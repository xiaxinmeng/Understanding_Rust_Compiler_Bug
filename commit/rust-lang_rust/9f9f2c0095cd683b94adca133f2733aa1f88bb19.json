{"sha": "9f9f2c0095cd683b94adca133f2733aa1f88bb19", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmOWYyYzAwOTVjZDY4M2I5NGFkY2ExMzNmMjczM2FhMWY4OGJiMTk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-08-21T16:04:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-08-21T16:04:11Z"}, "message": "Auto merge of #53530 - kennytm:rollup, r=kennytm\n\nRollup of 17 pull requests\n\nSuccessful merges:\n\n - #53030 (Updated RELEASES.md for 1.29.0)\n - #53104 (expand the documentation on the `Unpin` trait)\n - #53213 (Stabilize IP associated constants)\n - #53296 (When closure with no arguments was expected, suggest wrapping)\n - #53329 (Replace usages of ptr::offset with ptr::{add,sub}.)\n - #53363 (add individual docs to `core::num::NonZero*`)\n - #53370 (Stabilize macro_vis_matcher)\n - #53393 (Mark libserialize functions as inline)\n - #53405 (restore the page title after escaping out of a search)\n - #53452 (Change target triple used to check for lldb in build-manifest)\n - #53462 (Document Box::into_raw returns non-null ptr)\n - #53465 (Remove LinkMeta struct)\n - #53492 (update lld submodule to include RISCV patch)\n - #53496 (Fix typos found by codespell.)\n - #53521 (syntax: Optimize some literal parsing)\n - #53540 (Moved issue-53157.rs into src/test/ui/consts/const-eval/)\n - #53551 (Avoid some Place clones.)\n\nFailed merges:\n\nr? @ghost", "tree": {"sha": "633b85f8126a21ae60807bede94f1c57c5167a6a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/633b85f8126a21ae60807bede94f1c57c5167a6a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9f9f2c0095cd683b94adca133f2733aa1f88bb19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9f9f2c0095cd683b94adca133f2733aa1f88bb19", "html_url": "https://github.com/rust-lang/rust/commit/9f9f2c0095cd683b94adca133f2733aa1f88bb19", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9f9f2c0095cd683b94adca133f2733aa1f88bb19/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a9d496796f091f42c8bac60c5c9ca05e6ca5dcda", "url": "https://api.github.com/repos/rust-lang/rust/commits/a9d496796f091f42c8bac60c5c9ca05e6ca5dcda", "html_url": "https://github.com/rust-lang/rust/commit/a9d496796f091f42c8bac60c5c9ca05e6ca5dcda"}, {"sha": "e3887e6c8afbaafe0332e9776199bc89030e227b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3887e6c8afbaafe0332e9776199bc89030e227b", "html_url": "https://github.com/rust-lang/rust/commit/e3887e6c8afbaafe0332e9776199bc89030e227b"}], "stats": {"total": 1081, "additions": 571, "deletions": 510}, "files": [{"sha": "088d361b7ea6a961fca3219ef3d5be9d4b1431c7", "filename": "RELEASES.md", "status": "modified", "additions": 75, "deletions": 0, "changes": 75, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/RELEASES.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/RELEASES.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/RELEASES.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,3 +1,78 @@\n+Version 1.29.0 (2018-09-13)\n+==========================\n+\n+Compiler\n+--------\n+- [Bumped minimum LLVM version to 5.0.][51899]\n+- [Added `powerpc64le-unknown-linux-musl` target.][51619]\n+- [Added `aarch64-unknown-hermit` and `x86_64-unknown-hermit` targets.][52861]\n+\n+Libraries\n+---------\n+- [`Once::call_once` now no longer requires `Once` to be `'static`.][52239]\n+- [`BuildHasherDefault` now implements `PartialEq` and `Eq`.][52402]\n+- [`Box<CStr>`, `Box<OsStr>`, and `Box<Path>` now implement `Clone`.][51912]\n+- [Implemented `PartialEq<&str>` for `OsString` and `PartialEq<OsString>`\n+  for `&str`.][51178]\n+- [`Cell<T>` now allows `T` to be unsized.][50494]\n+- [`SocketAddr` is now stable on Redox.][52656]\n+\n+Stabilized APIs\n+---------------\n+- [`Arc::downcast`]\n+- [`Iterator::flatten`]\n+- [`Rc::downcast`]\n+\n+Cargo\n+-----\n+- [Cargo can silently fix some bad lockfiles ][cargo/5831] You can use\n+  `--locked` to disable this behaviour.\n+- [`cargo-install` will now allow you to cross compile an install\n+  using `--target`][cargo/5614]\n+- [Added the `cargo-fix` subcommand to automatically move project code from\n+  2015 edition to 2018.][cargo/5723]\n+\n+Misc\n+----\n+- [`rustdoc` now has the `--cap-lints` option which demotes all lints above\n+  the specified level to that level.][52354] For example `--cap-lints warn`\n+  will demote `deny` and `forbid` lints to `warn`.\n+- [`rustc` and `rustdoc` will now have the exit code of `1` if compilation\n+  fails, and `101` if there is a panic.][52197]\n+\n+Compatibility Notes\n+-------------------\n+- [`str::{slice_unchecked, slice_unchecked_mut}` are now deprecated.][51807]\n+  Use `str::get_unchecked(begin..end)` instead.\n+- [`std::env::home_dir` is now deprecated for its unintuitive behaviour.][51656]\n+  Consider using the `home_dir` function from\n+  https://crates.io/crates/dirs instead.\n+- [`rustc` will no longer silently ignore invalid data in target spec.][52330]\n+\n+[52861]: https://github.com/rust-lang/rust/pull/52861/\n+[52656]: https://github.com/rust-lang/rust/pull/52656/\n+[52239]: https://github.com/rust-lang/rust/pull/52239/\n+[52330]: https://github.com/rust-lang/rust/pull/52330/\n+[52354]: https://github.com/rust-lang/rust/pull/52354/\n+[52402]: https://github.com/rust-lang/rust/pull/52402/\n+[52103]: https://github.com/rust-lang/rust/pull/52103/\n+[52197]: https://github.com/rust-lang/rust/pull/52197/\n+[51807]: https://github.com/rust-lang/rust/pull/51807/\n+[51899]: https://github.com/rust-lang/rust/pull/51899/\n+[51912]: https://github.com/rust-lang/rust/pull/51912/\n+[51511]: https://github.com/rust-lang/rust/pull/51511/\n+[51619]: https://github.com/rust-lang/rust/pull/51619/\n+[51656]: https://github.com/rust-lang/rust/pull/51656/\n+[51178]: https://github.com/rust-lang/rust/pull/51178/\n+[50494]: https://github.com/rust-lang/rust/pull/50494/\n+[cargo/5614]: https://github.com/rust-lang/cargo/pull/5614/\n+[cargo/5723]: https://github.com/rust-lang/cargo/pull/5723/\n+[cargo/5831]: https://github.com/rust-lang/cargo/pull/5831/\n+[`Arc::downcast`]: https://doc.rust-lang.org/std/sync/struct.Arc.html#method.downcast\n+[`Iterator::flatten`]: https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.flatten\n+[`Rc::downcast`]: https://doc.rust-lang.org/std/rc/struct.Rc.html#method.downcast\n+\n+\n Version 1.28.0 (2018-08-02)\n ===========================\n "}, {"sha": "e6a48a96da464ab1a034d926833492a768057e29", "filename": "src/ci/docker/scripts/musl.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -32,7 +32,7 @@ shift\n \n export CFLAGS=\"-fPIC $CFLAGS\"\n \n-# FIXME: remove the patch when upate to 1.1.20\n+# FIXME: remove the patch when updating to 1.1.20\n MUSL=musl-1.1.19\n \n # may have been downloaded in a previous run"}, {"sha": "11313ba99e1a6ea8398908ba514b96db585f8897", "filename": "src/doc/index.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Findex.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Findex.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Findex.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -34,7 +34,7 @@ minimum. It also includes exercises!\n \n # Use Rust\n \n-Once you've gotten familliar with the language, these resources can help you\n+Once you've gotten familiar with the language, these resources can help you\n when you're actually using it day-to-day.\n \n ## The Standard Library"}, {"sha": "4fc5f42dd552708867aa37c09dbc32ad2fa33c8d", "filename": "src/doc/rustc/src/codegen-options/index.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -153,7 +153,7 @@ This option allows you to put extra data in each output filename.\n This flag lets you control how many threads are used when doing\n code generation.\n \n-Increasing paralellism may speed up compile times, but may also\n+Increasing parallelism may speed up compile times, but may also\n produce slower code.\n \n ## remark"}, {"sha": "ff9e0235a0435e8a95e0f160ad63c7ab2ba4711b", "filename": "src/doc/rustc/src/lints/listing/deny-by-default.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flisting%2Fdeny-by-default.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flisting%2Fdeny-by-default.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Flints%2Flisting%2Fdeny-by-default.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -56,7 +56,7 @@ mod m {\n     pub struct S(u8);\n     \n     fn f() {\n-        // this is trying to use S from the 'use' line, but becuase the `u8` is\n+        // this is trying to use S from the 'use' line, but because the `u8` is\n         // not pub, it is private\n         ::S;\n     }\n@@ -103,7 +103,7 @@ This warning can always be fixed by removing the unused pattern in the\n \n ## mutable-transmutes\n \n-This lint catches transmuting from `&T` to `&mut T` becuase it is undefined\n+This lint catches transmuting from `&T` to `&mut T` because it is undefined\n behavior. Some example code that triggers this lint:\n \n ```rust,ignore"}, {"sha": "a91c2cd71cde34ce85c46f1960e9c6d3b6c39e10", "filename": "src/doc/rustdoc/src/unstable-features.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustdoc%2Fsrc%2Funstable-features.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,6 +1,6 @@\n # Unstable features\n \n-Rustdoc is under active developement, and like the Rust compiler, some features are only available\n+Rustdoc is under active development, and like the Rust compiler, some features are only available\n on the nightly releases. Some of these are new and need some more testing before they're able to get\n released to the world at large, and some of them are tied to features in the Rust compiler that are\n themselves unstable. Several features here require a matching `#![feature(...)]` attribute to"}, {"sha": "fe82f8555da329e3ba96fbb10bb8b440891121e0", "filename": "src/doc/unstable-book/src/language-features/infer-outlives-requirements.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Finfer-outlives-requirements.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Finfer-outlives-requirements.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Finfer-outlives-requirements.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -6,12 +6,12 @@ The tracking issue for this feature is: [#44493]\n \n ------------------------\n The `infer_outlives_requirements` feature indicates that certain\n-outlives requirements can be infered by the compiler rather than\n+outlives requirements can be inferred by the compiler rather than\n stating them explicitly.\n \n For example, currently generic struct definitions that contain\n references, require where-clauses of the form T: 'a. By using\n-this feature the outlives predicates will be infered, although\n+this feature the outlives predicates will be inferred, although\n they may still be written explicitly.\n \n ```rust,ignore (pseudo-Rust)"}, {"sha": "6187f395b0498ebf70c856d2b5d9d26292e25a5e", "filename": "src/doc/unstable-book/src/language-features/infer-static-outlives-requirements.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Finfer-static-outlives-requirements.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Finfer-static-outlives-requirements.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Finfer-static-outlives-requirements.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -6,15 +6,15 @@ The tracking issue for this feature is: [#44493]\n \n ------------------------\n The `infer_static_outlives_requirements` feature indicates that certain\n-`'static` outlives requirements can be infered by the compiler rather than\n+`'static` outlives requirements can be inferred by the compiler rather than\n stating them explicitly.\n \n Note: It is an accompanying feature to `infer_outlives_requirements`,\n which must be enabled to infer outlives requirements.\n \n For example, currently generic struct definitions that contain\n references, require where-clauses of the form T: 'static. By using\n-this feature the outlives predicates will be infered, although\n+this feature the outlives predicates will be inferred, although\n they may still be written explicitly.\n \n ```rust,ignore (pseudo-Rust)"}, {"sha": "7918a356843298d34cc458ed40d1b9e5fc075478", "filename": "src/doc/unstable-book/src/language-features/macro-vis-matcher.md", "status": "removed", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a9d496796f091f42c8bac60c5c9ca05e6ca5dcda/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fmacro-vis-matcher.md", "raw_url": "https://github.com/rust-lang/rust/raw/a9d496796f091f42c8bac60c5c9ca05e6ca5dcda/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fmacro-vis-matcher.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fmacro-vis-matcher.md?ref=a9d496796f091f42c8bac60c5c9ca05e6ca5dcda", "patch": "@@ -1,14 +0,0 @@\n-# `macro_vis_matcher`\n-\n-The tracking issue for this feature is: [#41022]\n-\n-With this feature gate enabled, the [list of fragment specifiers][frags] gains one more entry:\n-\n-* `vis`: a visibility qualifier. Examples: nothing (default visibility); `pub`; `pub(crate)`.\n-\n-A `vis` variable may be followed by a comma, ident, type, or path.\n-\n-[#41022]: https://github.com/rust-lang/rust/issues/41022\n-[frags]: ../book/first-edition/macros.html#syntactic-requirements\n-\n-------------------------"}, {"sha": "b408d5d0805152008ed803dbd6c5fa8ef0fd5128", "filename": "src/doc/unstable-book/src/language-features/plugin.md", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fplugin.md", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fplugin.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flanguage-features%2Fplugin.md?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -183,7 +183,6 @@ that warns about any item named `lintme`.\n ```rust,ignore\n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "3bd0c243b39acfd3e6eca39abf5b51c08f52b0ff", "filename": "src/liballoc/alloc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Falloc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Falloc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Falloc.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -245,7 +245,7 @@ mod tests {\n                 .unwrap_or_else(|_| handle_alloc_error(layout));\n \n             let mut i = ptr.cast::<u8>().as_ptr();\n-            let end = i.offset(layout.size() as isize);\n+            let end = i.add(layout.size());\n             while i < end {\n                 assert_eq!(*i, 0);\n                 i = i.offset(1);"}, {"sha": "32292e61f94d2f597568e600f8648dfba842bd16", "filename": "src/liballoc/boxed.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fboxed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fboxed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fboxed.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -126,7 +126,9 @@ impl<T: ?Sized> Box<T> {\n         Box(Unique::new_unchecked(raw))\n     }\n \n-    /// Consumes the `Box`, returning the wrapped raw pointer.\n+    /// Consumes the `Box`, returning a wrapped raw pointer.\n+    ///\n+    /// The pointer will be properly aligned and non-null.\n     ///\n     /// After calling this function, the caller is responsible for the\n     /// memory previously managed by the `Box`. In particular, the\n@@ -704,7 +706,7 @@ impl<T: Clone> Clone for Box<[T]> {\n         impl<T> Drop for BoxBuilder<T> {\n             fn drop(&mut self) {\n                 let mut data = self.data.ptr();\n-                let max = unsafe { data.offset(self.len as isize) };\n+                let max = unsafe { data.add(self.len) };\n \n                 while data != max {\n                     unsafe {"}, {"sha": "0315545262b6bc0a295953f22b4328070223356b", "filename": "src/liballoc/collections/btree/node.rs", "status": "modified", "additions": 24, "deletions": 24, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fcollections%2Fbtree%2Fnode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fcollections%2Fbtree%2Fnode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fcollections%2Fbtree%2Fnode.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1151,12 +1151,12 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Leaf>, marker::KV>\n             let new_len = self.node.len() - self.idx - 1;\n \n             ptr::copy_nonoverlapping(\n-                self.node.keys().as_ptr().offset(self.idx as isize + 1),\n+                self.node.keys().as_ptr().add(self.idx + 1),\n                 new_node.keys.as_mut_ptr(),\n                 new_len\n             );\n             ptr::copy_nonoverlapping(\n-                self.node.vals().as_ptr().offset(self.idx as isize + 1),\n+                self.node.vals().as_ptr().add(self.idx + 1),\n                 new_node.vals.as_mut_ptr(),\n                 new_len\n             );\n@@ -1209,17 +1209,17 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n             let new_len = self.node.len() - self.idx - 1;\n \n             ptr::copy_nonoverlapping(\n-                self.node.keys().as_ptr().offset(self.idx as isize + 1),\n+                self.node.keys().as_ptr().add(self.idx + 1),\n                 new_node.data.keys.as_mut_ptr(),\n                 new_len\n             );\n             ptr::copy_nonoverlapping(\n-                self.node.vals().as_ptr().offset(self.idx as isize + 1),\n+                self.node.vals().as_ptr().add(self.idx + 1),\n                 new_node.data.vals.as_mut_ptr(),\n                 new_len\n             );\n             ptr::copy_nonoverlapping(\n-                self.node.as_internal().edges.as_ptr().offset(self.idx as isize + 1),\n+                self.node.as_internal().edges.as_ptr().add(self.idx + 1),\n                 new_node.edges.as_mut_ptr(),\n                 new_len + 1\n             );\n@@ -1283,14 +1283,14 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n                        slice_remove(self.node.keys_mut(), self.idx));\n             ptr::copy_nonoverlapping(\n                 right_node.keys().as_ptr(),\n-                left_node.keys_mut().as_mut_ptr().offset(left_len as isize + 1),\n+                left_node.keys_mut().as_mut_ptr().add(left_len + 1),\n                 right_len\n             );\n             ptr::write(left_node.vals_mut().get_unchecked_mut(left_len),\n                        slice_remove(self.node.vals_mut(), self.idx));\n             ptr::copy_nonoverlapping(\n                 right_node.vals().as_ptr(),\n-                left_node.vals_mut().as_mut_ptr().offset(left_len as isize + 1),\n+                left_node.vals_mut().as_mut_ptr().add(left_len + 1),\n                 right_len\n             );\n \n@@ -1309,7 +1309,7 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n                              .as_internal_mut()\n                              .edges\n                              .as_mut_ptr()\n-                             .offset(left_len as isize + 1),\n+                             .add(left_len + 1),\n                     right_len + 1\n                 );\n \n@@ -1394,10 +1394,10 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n \n                 // Make room for stolen elements in the right child.\n                 ptr::copy(right_kv.0,\n-                          right_kv.0.offset(count as isize),\n+                          right_kv.0.add(count),\n                           right_len);\n                 ptr::copy(right_kv.1,\n-                          right_kv.1.offset(count as isize),\n+                          right_kv.1.add(count),\n                           right_len);\n \n                 // Move elements from the left child to the right one.\n@@ -1418,7 +1418,7 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n                     // Make room for stolen edges.\n                     let right_edges = right.reborrow_mut().as_internal_mut().edges.as_mut_ptr();\n                     ptr::copy(right_edges,\n-                              right_edges.offset(count as isize),\n+                              right_edges.add(count),\n                               right_len + 1);\n                     right.correct_childrens_parent_links(count, count + right_len + 1);\n \n@@ -1463,10 +1463,10 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n                 move_kv(right_kv, count - 1, parent_kv, 0, 1);\n \n                 // Fix right indexing\n-                ptr::copy(right_kv.0.offset(count as isize),\n+                ptr::copy(right_kv.0.add(count),\n                           right_kv.0,\n                           new_right_len);\n-                ptr::copy(right_kv.1.offset(count as isize),\n+                ptr::copy(right_kv.1.add(count),\n                           right_kv.1,\n                           new_right_len);\n             }\n@@ -1480,7 +1480,7 @@ impl<'a, K, V> Handle<NodeRef<marker::Mut<'a>, K, V, marker::Internal>, marker::\n \n                     // Fix right indexing.\n                     let right_edges = right.reborrow_mut().as_internal_mut().edges.as_mut_ptr();\n-                    ptr::copy(right_edges.offset(count as isize),\n+                    ptr::copy(right_edges.add(count),\n                               right_edges,\n                               new_right_len + 1);\n                     right.correct_childrens_parent_links(0, new_right_len + 1);\n@@ -1497,11 +1497,11 @@ unsafe fn move_kv<K, V>(\n     dest: (*mut K, *mut V), dest_offset: usize,\n     count: usize)\n {\n-    ptr::copy_nonoverlapping(source.0.offset(source_offset as isize),\n-                             dest.0.offset(dest_offset as isize),\n+    ptr::copy_nonoverlapping(source.0.add(source_offset),\n+                             dest.0.add(dest_offset),\n                              count);\n-    ptr::copy_nonoverlapping(source.1.offset(source_offset as isize),\n-                             dest.1.offset(dest_offset as isize),\n+    ptr::copy_nonoverlapping(source.1.add(source_offset),\n+                             dest.1.add(dest_offset),\n                              count);\n }\n \n@@ -1513,8 +1513,8 @@ unsafe fn move_edges<K, V>(\n {\n     let source_ptr = source.as_internal_mut().edges.as_mut_ptr();\n     let dest_ptr = dest.as_internal_mut().edges.as_mut_ptr();\n-    ptr::copy_nonoverlapping(source_ptr.offset(source_offset as isize),\n-                             dest_ptr.offset(dest_offset as isize),\n+    ptr::copy_nonoverlapping(source_ptr.add(source_offset),\n+                             dest_ptr.add(dest_offset),\n                              count);\n     dest.correct_childrens_parent_links(dest_offset, dest_offset + count);\n }\n@@ -1604,8 +1604,8 @@ pub mod marker {\n \n unsafe fn slice_insert<T>(slice: &mut [T], idx: usize, val: T) {\n     ptr::copy(\n-        slice.as_ptr().offset(idx as isize),\n-        slice.as_mut_ptr().offset(idx as isize + 1),\n+        slice.as_ptr().add(idx),\n+        slice.as_mut_ptr().add(idx + 1),\n         slice.len() - idx\n     );\n     ptr::write(slice.get_unchecked_mut(idx), val);\n@@ -1614,8 +1614,8 @@ unsafe fn slice_insert<T>(slice: &mut [T], idx: usize, val: T) {\n unsafe fn slice_remove<T>(slice: &mut [T], idx: usize) -> T {\n     let ret = ptr::read(slice.get_unchecked(idx));\n     ptr::copy(\n-        slice.as_ptr().offset(idx as isize + 1),\n-        slice.as_mut_ptr().offset(idx as isize),\n+        slice.as_ptr().add(idx + 1),\n+        slice.as_mut_ptr().add(idx),\n         slice.len() - idx - 1\n     );\n     ret"}, {"sha": "55c8a78f8d046e502979d8370bcb1d21207ef1c8", "filename": "src/liballoc/collections/vec_deque.rs", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fcollections%2Fvec_deque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fcollections%2Fvec_deque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fcollections%2Fvec_deque.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -126,13 +126,13 @@ impl<T> VecDeque<T> {\n     /// Moves an element out of the buffer\n     #[inline]\n     unsafe fn buffer_read(&mut self, off: usize) -> T {\n-        ptr::read(self.ptr().offset(off as isize))\n+        ptr::read(self.ptr().add(off))\n     }\n \n     /// Writes an element into the buffer, moving it.\n     #[inline]\n     unsafe fn buffer_write(&mut self, off: usize, value: T) {\n-        ptr::write(self.ptr().offset(off as isize), value);\n+        ptr::write(self.ptr().add(off), value);\n     }\n \n     /// Returns `true` if and only if the buffer is at full capacity.\n@@ -177,8 +177,8 @@ impl<T> VecDeque<T> {\n                       src,\n                       len,\n                       self.cap());\n-        ptr::copy(self.ptr().offset(src as isize),\n-                  self.ptr().offset(dst as isize),\n+        ptr::copy(self.ptr().add(src),\n+                  self.ptr().add(dst),\n                   len);\n     }\n \n@@ -197,8 +197,8 @@ impl<T> VecDeque<T> {\n                       src,\n                       len,\n                       self.cap());\n-        ptr::copy_nonoverlapping(self.ptr().offset(src as isize),\n-                                 self.ptr().offset(dst as isize),\n+        ptr::copy_nonoverlapping(self.ptr().add(src),\n+                                 self.ptr().add(dst),\n                                  len);\n     }\n \n@@ -436,7 +436,7 @@ impl<T> VecDeque<T> {\n     pub fn get(&self, index: usize) -> Option<&T> {\n         if index < self.len() {\n             let idx = self.wrap_add(self.tail, index);\n-            unsafe { Some(&*self.ptr().offset(idx as isize)) }\n+            unsafe { Some(&*self.ptr().add(idx)) }\n         } else {\n             None\n         }\n@@ -465,7 +465,7 @@ impl<T> VecDeque<T> {\n     pub fn get_mut(&mut self, index: usize) -> Option<&mut T> {\n         if index < self.len() {\n             let idx = self.wrap_add(self.tail, index);\n-            unsafe { Some(&mut *self.ptr().offset(idx as isize)) }\n+            unsafe { Some(&mut *self.ptr().add(idx)) }\n         } else {\n             None\n         }\n@@ -501,8 +501,8 @@ impl<T> VecDeque<T> {\n         let ri = self.wrap_add(self.tail, i);\n         let rj = self.wrap_add(self.tail, j);\n         unsafe {\n-            ptr::swap(self.ptr().offset(ri as isize),\n-                      self.ptr().offset(rj as isize))\n+            ptr::swap(self.ptr().add(ri),\n+                      self.ptr().add(rj))\n         }\n     }\n \n@@ -1805,20 +1805,20 @@ impl<T> VecDeque<T> {\n                 // `at` lies in the first half.\n                 let amount_in_first = first_len - at;\n \n-                ptr::copy_nonoverlapping(first_half.as_ptr().offset(at as isize),\n+                ptr::copy_nonoverlapping(first_half.as_ptr().add(at),\n                                          other.ptr(),\n                                          amount_in_first);\n \n                 // just take all of the second half.\n                 ptr::copy_nonoverlapping(second_half.as_ptr(),\n-                                         other.ptr().offset(amount_in_first as isize),\n+                                         other.ptr().add(amount_in_first),\n                                          second_len);\n             } else {\n                 // `at` lies in the second half, need to factor in the elements we skipped\n                 // in the first half.\n                 let offset = at - first_len;\n                 let amount_in_second = second_len - offset;\n-                ptr::copy_nonoverlapping(second_half.as_ptr().offset(offset as isize),\n+                ptr::copy_nonoverlapping(second_half.as_ptr().add(offset),\n                                          other.ptr(),\n                                          amount_in_second);\n             }\n@@ -2709,24 +2709,24 @@ impl<T> From<VecDeque<T>> for Vec<T> {\n \n             // Need to move the ring to the front of the buffer, as vec will expect this.\n             if other.is_contiguous() {\n-                ptr::copy(buf.offset(tail as isize), buf, len);\n+                ptr::copy(buf.add(tail), buf, len);\n             } else {\n                 if (tail - head) >= cmp::min(cap - tail, head) {\n                     // There is enough free space in the centre for the shortest block so we can\n                     // do this in at most three copy moves.\n                     if (cap - tail) > head {\n                         // right hand block is the long one; move that enough for the left\n-                        ptr::copy(buf.offset(tail as isize),\n-                                  buf.offset((tail - head) as isize),\n+                        ptr::copy(buf.add(tail),\n+                                  buf.add(tail - head),\n                                   cap - tail);\n                         // copy left in the end\n-                        ptr::copy(buf, buf.offset((cap - head) as isize), head);\n+                        ptr::copy(buf, buf.add(cap - head), head);\n                         // shift the new thing to the start\n-                        ptr::copy(buf.offset((tail - head) as isize), buf, len);\n+                        ptr::copy(buf.add(tail - head), buf, len);\n                     } else {\n                         // left hand block is the long one, we can do it in two!\n-                        ptr::copy(buf, buf.offset((cap - tail) as isize), head);\n-                        ptr::copy(buf.offset(tail as isize), buf, cap - tail);\n+                        ptr::copy(buf, buf.add(cap - tail), head);\n+                        ptr::copy(buf.add(tail), buf, cap - tail);\n                     }\n                 } else {\n                     // Need to use N swaps to move the ring\n@@ -2751,7 +2751,7 @@ impl<T> From<VecDeque<T>> for Vec<T> {\n                         for i in left_edge..right_edge {\n                             right_offset = (i - left_edge) % (cap - right_edge);\n                             let src: isize = (right_edge + right_offset) as isize;\n-                            ptr::swap(buf.offset(i as isize), buf.offset(src));\n+                            ptr::swap(buf.add(i), buf.offset(src));\n                         }\n                         let n_ops = right_edge - left_edge;\n                         left_edge += n_ops;"}, {"sha": "837770feecef596d7380dd009f6802a904877f32", "filename": "src/liballoc/raw_vec.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fraw_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fraw_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fraw_vec.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![unstable(feature = \"raw_vec_internals\", reason = \"implemention detail\", issue = \"0\")]\n+#![unstable(feature = \"raw_vec_internals\", reason = \"implementation detail\", issue = \"0\")]\n #![doc(hidden)]\n \n use core::cmp;\n@@ -282,7 +282,7 @@ impl<T, A: Alloc> RawVec<T, A> {\n     ///         // double would have aborted or panicked if the len exceeded\n     ///         // `isize::MAX` so this is safe to do unchecked now.\n     ///         unsafe {\n-    ///             ptr::write(self.buf.ptr().offset(self.len as isize), elem);\n+    ///             ptr::write(self.buf.ptr().add(self.len), elem);\n     ///         }\n     ///         self.len += 1;\n     ///     }\n@@ -487,7 +487,7 @@ impl<T, A: Alloc> RawVec<T, A> {\n     ///         // `isize::MAX` so this is safe to do unchecked now.\n     ///         for x in elems {\n     ///             unsafe {\n-    ///                 ptr::write(self.buf.ptr().offset(self.len as isize), x.clone());\n+    ///                 ptr::write(self.buf.ptr().add(self.len), x.clone());\n     ///             }\n     ///             self.len += 1;\n     ///         }"}, {"sha": "4860daa11e20c2f96a57ebc6a6e4a4ea8b16fc87", "filename": "src/liballoc/rc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Frc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Frc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Frc.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -771,7 +771,7 @@ impl<T: Clone> RcFromSlice<T> for Rc<[T]> {\n             };\n \n             for (i, item) in v.iter().enumerate() {\n-                ptr::write(elems.offset(i as isize), item.clone());\n+                ptr::write(elems.add(i), item.clone());\n                 guard.n_elems += 1;\n             }\n "}, {"sha": "9d442b3e00ca074ea7b6d1584272923bc8b922ef", "filename": "src/liballoc/slice.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fslice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fslice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fslice.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -715,8 +715,8 @@ unsafe fn merge<T, F>(v: &mut [T], mid: usize, buf: *mut T, is_less: &mut F)\n {\n     let len = v.len();\n     let v = v.as_mut_ptr();\n-    let v_mid = v.offset(mid as isize);\n-    let v_end = v.offset(len as isize);\n+    let v_mid = v.add(mid);\n+    let v_end = v.add(len);\n \n     // The merge process first copies the shorter run into `buf`. Then it traces the newly copied\n     // run and the longer run forwards (or backwards), comparing their next unconsumed elements and\n@@ -742,7 +742,7 @@ unsafe fn merge<T, F>(v: &mut [T], mid: usize, buf: *mut T, is_less: &mut F)\n         ptr::copy_nonoverlapping(v, buf, mid);\n         hole = MergeHole {\n             start: buf,\n-            end: buf.offset(mid as isize),\n+            end: buf.add(mid),\n             dest: v,\n         };\n \n@@ -766,7 +766,7 @@ unsafe fn merge<T, F>(v: &mut [T], mid: usize, buf: *mut T, is_less: &mut F)\n         ptr::copy_nonoverlapping(v_mid, buf, len - mid);\n         hole = MergeHole {\n             start: buf,\n-            end: buf.offset((len - mid) as isize),\n+            end: buf.add(len - mid),\n             dest: v_mid,\n         };\n "}, {"sha": "eabda7123dec0c396dfe5773806285e87ab1feff", "filename": "src/liballoc/string.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fstring.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fstring.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fstring.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1190,8 +1190,8 @@ impl String {\n         let next = idx + ch.len_utf8();\n         let len = self.len();\n         unsafe {\n-            ptr::copy(self.vec.as_ptr().offset(next as isize),\n-                      self.vec.as_mut_ptr().offset(idx as isize),\n+            ptr::copy(self.vec.as_ptr().add(next),\n+                      self.vec.as_mut_ptr().add(idx),\n                       len - next);\n             self.vec.set_len(len - (next - idx));\n         }\n@@ -1232,8 +1232,8 @@ impl String {\n                 del_bytes += ch_len;\n             } else if del_bytes > 0 {\n                 unsafe {\n-                    ptr::copy(self.vec.as_ptr().offset(idx as isize),\n-                              self.vec.as_mut_ptr().offset((idx - del_bytes) as isize),\n+                    ptr::copy(self.vec.as_ptr().add(idx),\n+                              self.vec.as_mut_ptr().add(idx - del_bytes),\n                               ch_len);\n                 }\n             }\n@@ -1289,11 +1289,11 @@ impl String {\n         let amt = bytes.len();\n         self.vec.reserve(amt);\n \n-        ptr::copy(self.vec.as_ptr().offset(idx as isize),\n-                  self.vec.as_mut_ptr().offset((idx + amt) as isize),\n+        ptr::copy(self.vec.as_ptr().add(idx),\n+                  self.vec.as_mut_ptr().add(idx + amt),\n                   len - idx);\n         ptr::copy(bytes.as_ptr(),\n-                  self.vec.as_mut_ptr().offset(idx as isize),\n+                  self.vec.as_mut_ptr().add(idx),\n                   amt);\n         self.vec.set_len(len + amt);\n     }"}, {"sha": "2cd7898f4c78134678cfee3e4750ecc3f10a6d89", "filename": "src/liballoc/sync.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fsync.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -672,7 +672,7 @@ impl<T: Clone> ArcFromSlice<T> for Arc<[T]> {\n             };\n \n             for (i, item) in v.iter().enumerate() {\n-                ptr::write(elems.offset(i as isize), item.clone());\n+                ptr::write(elems.add(i), item.clone());\n                 guard.n_elems += 1;\n             }\n "}, {"sha": "e9c1a3df518913cb709004445ee46e740dda94ac", "filename": "src/liballoc/vec.rs", "status": "modified", "additions": 16, "deletions": 16, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fvec.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -692,7 +692,7 @@ impl<T> Vec<T> {\n     pub fn truncate(&mut self, len: usize) {\n         let current_len = self.len;\n         unsafe {\n-            let mut ptr = self.as_mut_ptr().offset(self.len as isize);\n+            let mut ptr = self.as_mut_ptr().add(self.len);\n             // Set the final length at the end, keeping in mind that\n             // dropping an element might panic. Works around a missed\n             // optimization, as seen in the following issue:\n@@ -856,7 +856,7 @@ impl<T> Vec<T> {\n             // infallible\n             // The spot to put the new value\n             {\n-                let p = self.as_mut_ptr().offset(index as isize);\n+                let p = self.as_mut_ptr().add(index);\n                 // Shift everything over to make space. (Duplicating the\n                 // `index`th element into two consecutive places.)\n                 ptr::copy(p, p.offset(1), len - index);\n@@ -891,7 +891,7 @@ impl<T> Vec<T> {\n             let ret;\n             {\n                 // the place we are taking from.\n-                let ptr = self.as_mut_ptr().offset(index as isize);\n+                let ptr = self.as_mut_ptr().add(index);\n                 // copy it out, unsafely having a copy of the value on\n                 // the stack and in the vector at the same time.\n                 ret = ptr::read(ptr);\n@@ -1034,8 +1034,8 @@ impl<T> Vec<T> {\n             let mut w: usize = 1;\n \n             while r < ln {\n-                let p_r = p.offset(r as isize);\n-                let p_wm1 = p.offset((w - 1) as isize);\n+                let p_r = p.add(r);\n+                let p_wm1 = p.add(w - 1);\n                 if !same_bucket(&mut *p_r, &mut *p_wm1) {\n                     if r != w {\n                         let p_w = p_wm1.offset(1);\n@@ -1072,7 +1072,7 @@ impl<T> Vec<T> {\n             self.reserve(1);\n         }\n         unsafe {\n-            let end = self.as_mut_ptr().offset(self.len as isize);\n+            let end = self.as_mut_ptr().add(self.len);\n             ptr::write(end, value);\n             self.len += 1;\n         }\n@@ -1196,7 +1196,7 @@ impl<T> Vec<T> {\n             self.set_len(start);\n             // Use the borrow in the IterMut to indicate borrowing behavior of the\n             // whole Drain iterator (like &mut T).\n-            let range_slice = slice::from_raw_parts_mut(self.as_mut_ptr().offset(start as isize),\n+            let range_slice = slice::from_raw_parts_mut(self.as_mut_ptr().add(start),\n                                                         end - start);\n             Drain {\n                 tail_start: end,\n@@ -1290,7 +1290,7 @@ impl<T> Vec<T> {\n             self.set_len(at);\n             other.set_len(other_len);\n \n-            ptr::copy_nonoverlapping(self.as_ptr().offset(at as isize),\n+            ptr::copy_nonoverlapping(self.as_ptr().add(at),\n                                      other.as_mut_ptr(),\n                                      other.len());\n         }\n@@ -1473,7 +1473,7 @@ impl<T> Vec<T> {\n         self.reserve(n);\n \n         unsafe {\n-            let mut ptr = self.as_mut_ptr().offset(self.len() as isize);\n+            let mut ptr = self.as_mut_ptr().add(self.len());\n             // Use SetLenOnDrop to work around bug where compiler\n             // may not realize the store through `ptr` through self.set_len()\n             // don't alias.\n@@ -1799,7 +1799,7 @@ impl<T> IntoIterator for Vec<T> {\n             let end = if mem::size_of::<T>() == 0 {\n                 arith_offset(begin as *const i8, self.len() as isize) as *const T\n             } else {\n-                begin.offset(self.len() as isize) as *const T\n+                begin.add(self.len()) as *const T\n             };\n             let cap = self.buf.cap();\n             mem::forget(self);\n@@ -1898,7 +1898,7 @@ impl<T, I> SpecExtend<T, I> for Vec<T>\n         if let Some(additional) = high {\n             self.reserve(additional);\n             unsafe {\n-                let mut ptr = self.as_mut_ptr().offset(self.len() as isize);\n+                let mut ptr = self.as_mut_ptr().add(self.len());\n                 let mut local_len = SetLenOnDrop::new(&mut self.len);\n                 for element in iterator {\n                     ptr::write(ptr, element);\n@@ -2561,8 +2561,8 @@ impl<'a, T> Drop for Drain<'a, T> {\n                 let start = source_vec.len();\n                 let tail = self.tail_start;\n                 if tail != start {\n-                    let src = source_vec.as_ptr().offset(tail as isize);\n-                    let dst = source_vec.as_mut_ptr().offset(start as isize);\n+                    let src = source_vec.as_ptr().add(tail);\n+                    let dst = source_vec.as_mut_ptr().add(start);\n                     ptr::copy(src, dst, self.tail_len);\n                 }\n                 source_vec.set_len(start + self.tail_len);\n@@ -2672,7 +2672,7 @@ impl<'a, T> Drain<'a, T> {\n         let range_start = vec.len;\n         let range_end = self.tail_start;\n         let range_slice = slice::from_raw_parts_mut(\n-            vec.as_mut_ptr().offset(range_start as isize),\n+            vec.as_mut_ptr().add(range_start),\n             range_end - range_start);\n \n         for place in range_slice {\n@@ -2693,8 +2693,8 @@ impl<'a, T> Drain<'a, T> {\n         vec.buf.reserve(used_capacity, extra_capacity);\n \n         let new_tail_start = self.tail_start + extra_capacity;\n-        let src = vec.as_ptr().offset(self.tail_start as isize);\n-        let dst = vec.as_mut_ptr().offset(new_tail_start as isize);\n+        let src = vec.as_ptr().add(self.tail_start);\n+        let dst = vec.as_mut_ptr().add(new_tail_start);\n         ptr::copy(src, dst, self.tail_len);\n         self.tail_start = new_tail_start;\n     }"}, {"sha": "753b6a5e29248bac365e4d5d3eaeafd7e11fb5e4", "filename": "src/liballoc_system/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc_system%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Fliballoc_system%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc_system%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -249,7 +249,7 @@ mod platform {\n     }\n \n     unsafe fn align_ptr(ptr: *mut u8, align: usize) -> *mut u8 {\n-        let aligned = ptr.offset((align - (ptr as usize & (align - 1))) as isize);\n+        let aligned = ptr.add(align - (ptr as usize & (align - 1)));\n         *get_header(aligned) = Header(ptr);\n         aligned\n     }"}, {"sha": "6ad703180c224eecd7e6777c5beb18c17ea8fe5f", "filename": "src/libarena/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibarena%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibarena%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibarena%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -106,7 +106,7 @@ impl<T> TypedArenaChunk<T> {\n                 // A pointer as large as possible for zero-sized elements.\n                 !0 as *mut T\n             } else {\n-                self.start().offset(self.storage.cap() as isize)\n+                self.start().add(self.storage.cap())\n             }\n         }\n     }\n@@ -179,7 +179,7 @@ impl<T> TypedArena<T> {\n         unsafe {\n             let start_ptr = self.ptr.get();\n             let arena_slice = slice::from_raw_parts_mut(start_ptr, slice.len());\n-            self.ptr.set(start_ptr.offset(arena_slice.len() as isize));\n+            self.ptr.set(start_ptr.add(arena_slice.len()));\n             arena_slice.copy_from_slice(slice);\n             arena_slice\n         }"}, {"sha": "2df870a011dcb1c0f4ee3fece0c419558570c939", "filename": "src/libcore/future/future_obj.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Ffuture%2Ffuture_obj.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Ffuture%2Ffuture_obj.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Ffuture%2Ffuture_obj.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -27,7 +27,7 @@ use task::{Context, Poll};\n /// - The `Future` trait is currently not object safe: The `Future::poll`\n ///   method makes uses the arbitrary self types feature and traits in which\n ///   this feature is used are currently not object safe due to current compiler\n-///   limitations. (See tracking issue for arbitray self types for more\n+///   limitations. (See tracking issue for arbitrary self types for more\n ///   information #44874)\n pub struct LocalFutureObj<'a, T> {\n     ptr: *mut (),\n@@ -102,7 +102,7 @@ impl<'a, T> Drop for LocalFutureObj<'a, T> {\n /// - The `Future` trait is currently not object safe: The `Future::poll`\n ///   method makes uses the arbitrary self types feature and traits in which\n ///   this feature is used are currently not object safe due to current compiler\n-///   limitations. (See tracking issue for arbitray self types for more\n+///   limitations. (See tracking issue for arbitrary self types for more\n ///   information #44874)\n pub struct FutureObj<'a, T>(LocalFutureObj<'a, T>);\n "}, {"sha": "7756a6f71dbd60a2cf68731a750b4d676646ae60", "filename": "src/libcore/intrinsics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fintrinsics.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -918,7 +918,7 @@ extern \"rust-intrinsic\" {\n     ///         // treat it as \"dead\", and therefore, you only have two real\n     ///         // mutable slices.\n     ///         (slice::from_raw_parts_mut(ptr, mid),\n-    ///          slice::from_raw_parts_mut(ptr.offset(mid as isize), len - mid))\n+    ///          slice::from_raw_parts_mut(ptr.add(mid), len - mid))\n     ///     }\n     /// }\n     /// ```"}, {"sha": "b1dc84bb84cb8f1c8fee985546aae535b09fbc0f", "filename": "src/libcore/marker.rs", "status": "modified", "additions": 25, "deletions": 5, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fmarker.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fmarker.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fmarker.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -511,7 +511,7 @@ macro_rules! impls{\n ///     let ptr = vec.as_ptr();\n ///     Slice {\n ///         start: ptr,\n-///         end: unsafe { ptr.offset(vec.len() as isize) },\n+///         end: unsafe { ptr.add(vec.len()) },\n ///         phantom: PhantomData,\n ///     }\n /// }\n@@ -603,15 +603,35 @@ unsafe impl<T: ?Sized> Freeze for *mut T {}\n unsafe impl<'a, T: ?Sized> Freeze for &'a T {}\n unsafe impl<'a, T: ?Sized> Freeze for &'a mut T {}\n \n-/// Types which can be moved out of a `PinMut`.\n+/// Types which can be safely moved after being pinned.\n ///\n-/// The `Unpin` trait is used to control the behavior of the [`PinMut`] type. If a\n-/// type implements `Unpin`, it is safe to move a value of that type out of the\n-/// `PinMut` pointer.\n+/// Since Rust itself has no notion of immovable types, and will consider moves to always be safe,\n+/// this trait cannot prevent types from moving by itself.\n+///\n+/// Instead it can be used to prevent moves through the type system,\n+/// by controlling the behavior of special pointer types like [`PinMut`],\n+/// which \"pin\" the type in place by not allowing it to be moved out of them.\n+///\n+/// Implementing this trait lifts the restrictions of pinning off a type,\n+/// which then allows it to move out with functions such as [`replace`].\n+///\n+/// So this, for example, can only be done on types implementing `Unpin`:\n+///\n+/// ```rust\n+/// #![feature(pin)]\n+/// use std::mem::{PinMut, replace};\n+///\n+/// let mut string = \"this\".to_string();\n+/// let mut pinned_string = PinMut::new(&mut string);\n+///\n+/// // dereferencing the pointer mutably is only possible because String implements Unpin\n+/// replace(&mut *pinned_string, \"other\".to_string());\n+/// ```\n ///\n /// This trait is automatically implemented for almost every type.\n ///\n /// [`PinMut`]: ../mem/struct.PinMut.html\n+/// [`replace`]: ../mem/fn.replace.html\n #[unstable(feature = \"pin\", issue = \"49150\")]\n pub auto trait Unpin {}\n "}, {"sha": "b93428c6321f61e27f8d4279b1c1e02cdd206379", "filename": "src/libcore/num/mod.rs", "status": "modified", "additions": 23, "deletions": 20, "changes": 43, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fnum%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -34,22 +34,32 @@ macro_rules! impl_nonzero_fmt {\n     }\n }\n \n+macro_rules! doc_comment {\n+    ($x:expr, $($tt:tt)*) => {\n+        #[doc = $x]\n+        $($tt)*\n+    };\n+}\n+\n macro_rules! nonzero_integers {\n     ( $( $Ty: ident($Int: ty); )+ ) => {\n         $(\n-            /// An integer that is known not to equal zero.\n-            ///\n-            /// This enables some memory layout optimization.\n-            /// For example, `Option<NonZeroU32>` is the same size as `u32`:\n-            ///\n-            /// ```rust\n-            /// use std::mem::size_of;\n-            /// assert_eq!(size_of::<Option<std::num::NonZeroU32>>(), size_of::<u32>());\n-            /// ```\n-            #[stable(feature = \"nonzero\", since = \"1.28.0\")]\n-            #[derive(Copy, Clone, Eq, PartialEq, Ord, PartialOrd, Hash)]\n-            #[repr(transparent)]\n-            pub struct $Ty(NonZero<$Int>);\n+            doc_comment! {\n+                concat!(\"An integer that is known not to equal zero.\n+\n+This enables some memory layout optimization.\n+For example, `Option<\", stringify!($Ty), \">` is the same size as `\", stringify!($Int), \"`:\n+\n+```rust\n+use std::mem::size_of;\n+assert_eq!(size_of::<Option<std::num::\", stringify!($Ty), \">>(), size_of::<\", stringify!($Int),\n+\">());\n+```\"),\n+                #[stable(feature = \"nonzero\", since = \"1.28.0\")]\n+                #[derive(Copy, Clone, Eq, PartialEq, Ord, PartialOrd, Hash)]\n+                #[repr(transparent)]\n+                pub struct $Ty(NonZero<$Int>);\n+            }\n \n             impl $Ty {\n                 /// Create a non-zero without checking the value.\n@@ -176,13 +186,6 @@ pub mod dec2flt;\n pub mod bignum;\n pub mod diy_float;\n \n-macro_rules! doc_comment {\n-    ($x:expr, $($tt:tt)*) => {\n-        #[doc = $x]\n-        $($tt)*\n-    };\n-}\n-\n mod wrapping;\n \n // `Int` + `SignedInt` implemented for signed integers"}, {"sha": "3ebd10a920919cde757e38cfa57e85a1dca2f0fd", "filename": "src/libcore/ops/function.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fops%2Ffunction.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fops%2Ffunction.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fops%2Ffunction.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -66,6 +66,11 @@\n #[lang = \"fn\"]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_paren_sugar]\n+#[rustc_on_unimplemented(\n+    on(Args=\"()\", note=\"wrap the `{Self}` in a closure with no arguments: `|| {{ /* code */ }}\"),\n+    message=\"expected a `{Fn}<{Args}>` closure, found `{Self}`\",\n+    label=\"expected an `Fn<{Args}>` closure, found `{Self}`\",\n+)]\n #[fundamental] // so that regex can rely that `&str: !FnMut`\n pub trait Fn<Args> : FnMut<Args> {\n     /// Performs the call operation.\n@@ -139,6 +144,11 @@ pub trait Fn<Args> : FnMut<Args> {\n #[lang = \"fn_mut\"]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_paren_sugar]\n+#[rustc_on_unimplemented(\n+    on(Args=\"()\", note=\"wrap the `{Self}` in a closure with no arguments: `|| {{ /* code */ }}\"),\n+    message=\"expected a `{FnMut}<{Args}>` closure, found `{Self}`\",\n+    label=\"expected an `FnMut<{Args}>` closure, found `{Self}`\",\n+)]\n #[fundamental] // so that regex can rely that `&str: !FnMut`\n pub trait FnMut<Args> : FnOnce<Args> {\n     /// Performs the call operation.\n@@ -212,6 +222,11 @@ pub trait FnMut<Args> : FnOnce<Args> {\n #[lang = \"fn_once\"]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_paren_sugar]\n+#[rustc_on_unimplemented(\n+    on(Args=\"()\", note=\"wrap the `{Self}` in a closure with no arguments: `|| {{ /* code */ }}\"),\n+    message=\"expected a `{FnOnce}<{Args}>` closure, found `{Self}`\",\n+    label=\"expected an `FnOnce<{Args}>` closure, found `{Self}`\",\n+)]\n #[fundamental] // so that regex can rely that `&str: !FnMut`\n pub trait FnOnce<Args> {\n     /// The returned type after the call operator is used."}, {"sha": "ebdddde7de3717f656b7831f7f7e0040df808d5d", "filename": "src/libcore/ptr.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fptr.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -226,8 +226,8 @@ unsafe fn swap_nonoverlapping_bytes(x: *mut u8, y: *mut u8, len: usize) {\n         // Declaring `t` here avoids aligning the stack when this loop is unused\n         let mut t: Block = mem::uninitialized();\n         let t = &mut t as *mut _ as *mut u8;\n-        let x = x.offset(i as isize);\n-        let y = y.offset(i as isize);\n+        let x = x.add(i);\n+        let y = y.add(i);\n \n         // Swap a block of bytes of x & y, using t as a temporary buffer\n         // This should be optimized into efficient SIMD operations where available\n@@ -243,8 +243,8 @@ unsafe fn swap_nonoverlapping_bytes(x: *mut u8, y: *mut u8, len: usize) {\n         let rem = len - i;\n \n         let t = &mut t as *mut _ as *mut u8;\n-        let x = x.offset(i as isize);\n-        let y = y.offset(i as isize);\n+        let x = x.add(i);\n+        let y = y.add(i);\n \n         copy_nonoverlapping(x, t, rem);\n         copy_nonoverlapping(y, x, rem);\n@@ -613,7 +613,7 @@ impl<T: ?Sized> *const T {\n     /// The compiler and standard library generally tries to ensure allocations\n     /// never reach a size where an offset is a concern. For instance, `Vec`\n     /// and `Box` ensure they never allocate more than `isize::MAX` bytes, so\n-    /// `vec.as_ptr().offset(vec.len() as isize)` is always safe.\n+    /// `vec.as_ptr().add(vec.len())` is always safe.\n     ///\n     /// Most platforms fundamentally can't even construct such an allocation.\n     /// For instance, no known 64-bit platform can ever serve a request\n@@ -1231,7 +1231,7 @@ impl<T: ?Sized> *const T {\n     /// let ptr = &x[n] as *const u8;\n     /// let offset = ptr.align_offset(align_of::<u16>());\n     /// if offset < x.len() - n - 1 {\n-    ///     let u16_ptr = ptr.offset(offset as isize) as *const u16;\n+    ///     let u16_ptr = ptr.add(offset) as *const u16;\n     ///     assert_ne!(*u16_ptr, 500);\n     /// } else {\n     ///     // while the pointer can be aligned via `offset`, it would point\n@@ -1334,7 +1334,7 @@ impl<T: ?Sized> *mut T {\n     /// The compiler and standard library generally tries to ensure allocations\n     /// never reach a size where an offset is a concern. For instance, `Vec`\n     /// and `Box` ensure they never allocate more than `isize::MAX` bytes, so\n-    /// `vec.as_ptr().offset(vec.len() as isize)` is always safe.\n+    /// `vec.as_ptr().add(vec.len())` is always safe.\n     ///\n     /// Most platforms fundamentally can't even construct such an allocation.\n     /// For instance, no known 64-bit platform can ever serve a request\n@@ -2261,7 +2261,7 @@ impl<T: ?Sized> *mut T {\n     /// let ptr = &x[n] as *const u8;\n     /// let offset = ptr.align_offset(align_of::<u16>());\n     /// if offset < x.len() - n - 1 {\n-    ///     let u16_ptr = ptr.offset(offset as isize) as *const u16;\n+    ///     let u16_ptr = ptr.add(offset) as *const u16;\n     ///     assert_ne!(*u16_ptr, 500);\n     /// } else {\n     ///     // while the pointer can be aligned via `offset`, it would point\n@@ -2291,7 +2291,7 @@ impl<T: ?Sized> *mut T {\n ///\n /// If we ever decide to make it possible to call the intrinsic with `a` that is not a\n /// power-of-two, it will probably be more prudent to just change to a naive implementation rather\n-/// than trying to adapt this to accomodate that change.\n+/// than trying to adapt this to accommodate that change.\n ///\n /// Any questions go to @nagisa.\n #[lang=\"align_offset\"]"}, {"sha": "cf95333af9cbb1622a69244f25d4dba61b269b01", "filename": "src/libcore/slice/memchr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Fmemchr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Fmemchr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Fmemchr.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -72,8 +72,8 @@ pub fn memchr(x: u8, text: &[u8]) -> Option<usize> {\n     if len >= 2 * usize_bytes {\n         while offset <= len - 2 * usize_bytes {\n             unsafe {\n-                let u = *(ptr.offset(offset as isize) as *const usize);\n-                let v = *(ptr.offset((offset + usize_bytes) as isize) as *const usize);\n+                let u = *(ptr.add(offset) as *const usize);\n+                let v = *(ptr.add(offset + usize_bytes) as *const usize);\n \n                 // break if there is a matching byte\n                 let zu = contains_zero_byte(u ^ repeated_x);"}, {"sha": "3366c4a3e661c4a825bb0af9b03969ba907ab58c", "filename": "src/libcore/slice/mod.rs", "status": "modified", "additions": 26, "deletions": 26, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -383,7 +383,7 @@ impl<T> [T] {\n     ///\n     /// unsafe {\n     ///     for i in 0..x.len() {\n-    ///         assert_eq!(x.get_unchecked(i), &*x_ptr.offset(i as isize));\n+    ///         assert_eq!(x.get_unchecked(i), &*x_ptr.add(i));\n     ///     }\n     /// }\n     /// ```\n@@ -410,7 +410,7 @@ impl<T> [T] {\n     ///\n     /// unsafe {\n     ///     for i in 0..x.len() {\n-    ///         *x_ptr.offset(i as isize) += 2;\n+    ///         *x_ptr.add(i) += 2;\n     ///     }\n     /// }\n     /// assert_eq!(x, &[3, 4, 6]);\n@@ -546,9 +546,9 @@ impl<T> [T] {\n             assume(!ptr.is_null());\n \n             let end = if mem::size_of::<T>() == 0 {\n-                (ptr as *const u8).wrapping_offset(self.len() as isize) as *const T\n+                (ptr as *const u8).wrapping_add(self.len()) as *const T\n             } else {\n-                ptr.offset(self.len() as isize)\n+                ptr.add(self.len())\n             };\n \n             Iter {\n@@ -578,9 +578,9 @@ impl<T> [T] {\n             assume(!ptr.is_null());\n \n             let end = if mem::size_of::<T>() == 0 {\n-                (ptr as *mut u8).wrapping_offset(self.len() as isize) as *mut T\n+                (ptr as *mut u8).wrapping_add(self.len()) as *mut T\n             } else {\n-                ptr.offset(self.len() as isize)\n+                ptr.add(self.len())\n             };\n \n             IterMut {\n@@ -842,7 +842,7 @@ impl<T> [T] {\n             assert!(mid <= len);\n \n             (from_raw_parts_mut(ptr, mid),\n-             from_raw_parts_mut(ptr.offset(mid as isize), len - mid))\n+             from_raw_parts_mut(ptr.add(mid), len - mid))\n         }\n     }\n \n@@ -1444,7 +1444,7 @@ impl<T> [T] {\n \n         unsafe {\n             let p = self.as_mut_ptr();\n-            rotate::ptr_rotate(mid, p.offset(mid as isize), k);\n+            rotate::ptr_rotate(mid, p.add(mid), k);\n         }\n     }\n \n@@ -1485,7 +1485,7 @@ impl<T> [T] {\n \n         unsafe {\n             let p = self.as_mut_ptr();\n-            rotate::ptr_rotate(mid, p.offset(mid as isize), k);\n+            rotate::ptr_rotate(mid, p.add(mid), k);\n         }\n     }\n \n@@ -1680,7 +1680,7 @@ impl<T> [T] {\n         }\n     }\n \n-    /// Function to calculate lenghts of the middle and trailing slice for `align_to{,_mut}`.\n+    /// Function to calculate lengths of the middle and trailing slice for `align_to{,_mut}`.\n     fn align_to_offsets<U>(&self) -> (usize, usize) {\n         // What we gonna do about `rest` is figure out what multiple of `U`s we can put in a\n         // lowest number of `T`s. And how many `T`s we need for each such \"multiple\".\n@@ -1740,7 +1740,7 @@ impl<T> [T] {\n         (us_len, ts_len)\n     }\n \n-    /// Transmute the slice to a slice of another type, ensuring aligment of the types is\n+    /// Transmute the slice to a slice of another type, ensuring alignment of the types is\n     /// maintained.\n     ///\n     /// This method splits the slice into three distinct slices: prefix, correctly aligned middle\n@@ -1789,11 +1789,11 @@ impl<T> [T] {\n             let (us_len, ts_len) = rest.align_to_offsets::<U>();\n             (left,\n              from_raw_parts(rest.as_ptr() as *const U, us_len),\n-             from_raw_parts(rest.as_ptr().offset((rest.len() - ts_len) as isize), ts_len))\n+             from_raw_parts(rest.as_ptr().add(rest.len() - ts_len), ts_len))\n         }\n     }\n \n-    /// Transmute the slice to a slice of another type, ensuring aligment of the types is\n+    /// Transmute the slice to a slice of another type, ensuring alignment of the types is\n     /// maintained.\n     ///\n     /// This method splits the slice into three distinct slices: prefix, correctly aligned middle\n@@ -1843,7 +1843,7 @@ impl<T> [T] {\n             let mut_ptr = rest.as_mut_ptr();\n             (left,\n              from_raw_parts_mut(mut_ptr as *mut U, us_len),\n-             from_raw_parts_mut(mut_ptr.offset((rest.len() - ts_len) as isize), ts_len))\n+             from_raw_parts_mut(mut_ptr.add(rest.len() - ts_len), ts_len))\n         }\n     }\n }\n@@ -2037,12 +2037,12 @@ impl<T> SliceIndex<[T]> for usize {\n \n     #[inline]\n     unsafe fn get_unchecked(self, slice: &[T]) -> &T {\n-        &*slice.as_ptr().offset(self as isize)\n+        &*slice.as_ptr().add(self)\n     }\n \n     #[inline]\n     unsafe fn get_unchecked_mut(self, slice: &mut [T]) -> &mut T {\n-        &mut *slice.as_mut_ptr().offset(self as isize)\n+        &mut *slice.as_mut_ptr().add(self)\n     }\n \n     #[inline]\n@@ -2086,12 +2086,12 @@ impl<T> SliceIndex<[T]> for  ops::Range<usize> {\n \n     #[inline]\n     unsafe fn get_unchecked(self, slice: &[T]) -> &[T] {\n-        from_raw_parts(slice.as_ptr().offset(self.start as isize), self.end - self.start)\n+        from_raw_parts(slice.as_ptr().add(self.start), self.end - self.start)\n     }\n \n     #[inline]\n     unsafe fn get_unchecked_mut(self, slice: &mut [T]) -> &mut [T] {\n-        from_raw_parts_mut(slice.as_mut_ptr().offset(self.start as isize), self.end - self.start)\n+        from_raw_parts_mut(slice.as_mut_ptr().add(self.start), self.end - self.start)\n     }\n \n     #[inline]\n@@ -2467,7 +2467,7 @@ macro_rules! iterator {\n                 }\n                 // We are in bounds. `offset` does the right thing even for ZSTs.\n                 unsafe {\n-                    let elem = Some(& $( $mut_ )* *self.ptr.offset(n as isize));\n+                    let elem = Some(& $( $mut_ )* *self.ptr.add(n));\n                     self.post_inc_start((n as isize).wrapping_add(1));\n                     elem\n                 }\n@@ -3347,7 +3347,7 @@ impl<'a, T> FusedIterator for Windows<'a, T> {}\n #[doc(hidden)]\n unsafe impl<'a, T> TrustedRandomAccess for Windows<'a, T> {\n     unsafe fn get_unchecked(&mut self, i: usize) -> &'a [T] {\n-        from_raw_parts(self.v.as_ptr().offset(i as isize), self.size)\n+        from_raw_parts(self.v.as_ptr().add(i), self.size)\n     }\n     fn may_have_side_effect() -> bool { false }\n }\n@@ -3474,7 +3474,7 @@ unsafe impl<'a, T> TrustedRandomAccess for Chunks<'a, T> {\n             None => self.v.len(),\n             Some(end) => cmp::min(end, self.v.len()),\n         };\n-        from_raw_parts(self.v.as_ptr().offset(start as isize), end - start)\n+        from_raw_parts(self.v.as_ptr().add(start), end - start)\n     }\n     fn may_have_side_effect() -> bool { false }\n }\n@@ -3593,7 +3593,7 @@ unsafe impl<'a, T> TrustedRandomAccess for ChunksMut<'a, T> {\n             None => self.v.len(),\n             Some(end) => cmp::min(end, self.v.len()),\n         };\n-        from_raw_parts_mut(self.v.as_mut_ptr().offset(start as isize), end - start)\n+        from_raw_parts_mut(self.v.as_mut_ptr().add(start), end - start)\n     }\n     fn may_have_side_effect() -> bool { false }\n }\n@@ -3716,7 +3716,7 @@ impl<'a, T> FusedIterator for ExactChunks<'a, T> {}\n unsafe impl<'a, T> TrustedRandomAccess for ExactChunks<'a, T> {\n     unsafe fn get_unchecked(&mut self, i: usize) -> &'a [T] {\n         let start = i * self.chunk_size;\n-        from_raw_parts(self.v.as_ptr().offset(start as isize), self.chunk_size)\n+        from_raw_parts(self.v.as_ptr().add(start), self.chunk_size)\n     }\n     fn may_have_side_effect() -> bool { false }\n }\n@@ -3831,7 +3831,7 @@ impl<'a, T> FusedIterator for ExactChunksMut<'a, T> {}\n unsafe impl<'a, T> TrustedRandomAccess for ExactChunksMut<'a, T> {\n     unsafe fn get_unchecked(&mut self, i: usize) -> &'a mut [T] {\n         let start = i * self.chunk_size;\n-        from_raw_parts_mut(self.v.as_mut_ptr().offset(start as isize), self.chunk_size)\n+        from_raw_parts_mut(self.v.as_mut_ptr().add(start), self.chunk_size)\n     }\n     fn may_have_side_effect() -> bool { false }\n }\n@@ -4116,15 +4116,15 @@ impl_marker_for!(BytewiseEquality,\n #[doc(hidden)]\n unsafe impl<'a, T> TrustedRandomAccess for Iter<'a, T> {\n     unsafe fn get_unchecked(&mut self, i: usize) -> &'a T {\n-        &*self.ptr.offset(i as isize)\n+        &*self.ptr.add(i)\n     }\n     fn may_have_side_effect() -> bool { false }\n }\n \n #[doc(hidden)]\n unsafe impl<'a, T> TrustedRandomAccess for IterMut<'a, T> {\n     unsafe fn get_unchecked(&mut self, i: usize) -> &'a mut T {\n-        &mut *self.ptr.offset(i as isize)\n+        &mut *self.ptr.add(i)\n     }\n     fn may_have_side_effect() -> bool { false }\n }"}, {"sha": "0d182b8497452e2bf7db6d6417b4b6e2092d3b34", "filename": "src/libcore/slice/rotate.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Frotate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Frotate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Frotate.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -77,8 +77,8 @@ pub unsafe fn ptr_rotate<T>(mut left: usize, mid: *mut T, mut right: usize) {\n         }\n \n         ptr::swap_nonoverlapping(\n-            mid.offset(-(left as isize)),\n-            mid.offset((right-delta) as isize),\n+            mid.sub(left),\n+            mid.add(right - delta),\n             delta);\n \n         if left <= right {\n@@ -91,15 +91,15 @@ pub unsafe fn ptr_rotate<T>(mut left: usize, mid: *mut T, mut right: usize) {\n     let rawarray = RawArray::new();\n     let buf = rawarray.ptr();\n \n-    let dim = mid.offset(-(left as isize)).offset(right as isize);\n+    let dim = mid.sub(left).add(right);\n     if left <= right {\n-        ptr::copy_nonoverlapping(mid.offset(-(left as isize)), buf, left);\n-        ptr::copy(mid, mid.offset(-(left as isize)), right);\n+        ptr::copy_nonoverlapping(mid.sub(left), buf, left);\n+        ptr::copy(mid, mid.sub(left), right);\n         ptr::copy_nonoverlapping(buf, dim, left);\n     }\n     else {\n         ptr::copy_nonoverlapping(mid, buf, right);\n-        ptr::copy(mid.offset(-(left as isize)), dim, left);\n-        ptr::copy_nonoverlapping(buf, mid.offset(-(left as isize)), right);\n+        ptr::copy(mid.sub(left), dim, left);\n+        ptr::copy_nonoverlapping(buf, mid.sub(left), right);\n     }\n }"}, {"sha": "e4c1fd03f9eb384b1197e5a6d3b82ed14f85d349", "filename": "src/libcore/slice/sort.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Fsort.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fslice%2Fsort.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fslice%2Fsort.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -221,15 +221,15 @@ fn partition_in_blocks<T, F>(v: &mut [T], pivot: &T, is_less: &mut F) -> usize\n     // 3. `end` - End pointer into the `offsets` array.\n     // 4. `offsets - Indices of out-of-order elements within the block.\n \n-    // The current block on the left side (from `l` to `l.offset(block_l)`).\n+    // The current block on the left side (from `l` to `l.add(block_l)`).\n     let mut l = v.as_mut_ptr();\n     let mut block_l = BLOCK;\n     let mut start_l = ptr::null_mut();\n     let mut end_l = ptr::null_mut();\n     let mut offsets_l: [u8; BLOCK] = unsafe { mem::uninitialized() };\n \n-    // The current block on the right side (from `r.offset(-block_r)` to `r`).\n-    let mut r = unsafe { l.offset(v.len() as isize) };\n+    // The current block on the right side (from `r.sub(block_r)` to `r`).\n+    let mut r = unsafe { l.add(v.len()) };\n     let mut block_r = BLOCK;\n     let mut start_r = ptr::null_mut();\n     let mut end_r = ptr::null_mut();"}, {"sha": "64bdf4d9f486ad84d1d6d6dbdd72ad1ddaa3fe9f", "filename": "src/libcore/str/mod.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fstr%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibcore%2Fstr%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1518,12 +1518,12 @@ fn run_utf8_validation(v: &[u8]) -> Result<(), Utf8Error> {\n             let ptr = v.as_ptr();\n             let align = unsafe {\n                 // the offset is safe, because `index` is guaranteed inbounds\n-                ptr.offset(index as isize).align_offset(usize_bytes)\n+                ptr.add(index).align_offset(usize_bytes)\n             };\n             if align == 0 {\n                 while index < blocks_end {\n                     unsafe {\n-                        let block = ptr.offset(index as isize) as *const usize;\n+                        let block = ptr.add(index) as *const usize;\n                         // break if there is a nonascii byte\n                         let zu = contains_nonascii(*block);\n                         let zv = contains_nonascii(*block.offset(1));\n@@ -1878,13 +1878,13 @@ mod traits {\n         }\n         #[inline]\n         unsafe fn get_unchecked(self, slice: &str) -> &Self::Output {\n-            let ptr = slice.as_ptr().offset(self.start as isize);\n+            let ptr = slice.as_ptr().add(self.start);\n             let len = self.end - self.start;\n             super::from_utf8_unchecked(slice::from_raw_parts(ptr, len))\n         }\n         #[inline]\n         unsafe fn get_unchecked_mut(self, slice: &mut str) -> &mut Self::Output {\n-            let ptr = slice.as_ptr().offset(self.start as isize);\n+            let ptr = slice.as_ptr().add(self.start);\n             let len = self.end - self.start;\n             super::from_utf8_unchecked_mut(slice::from_raw_parts_mut(ptr as *mut u8, len))\n         }\n@@ -1973,13 +1973,13 @@ mod traits {\n         }\n         #[inline]\n         unsafe fn get_unchecked(self, slice: &str) -> &Self::Output {\n-            let ptr = slice.as_ptr().offset(self.start as isize);\n+            let ptr = slice.as_ptr().add(self.start);\n             let len = slice.len() - self.start;\n             super::from_utf8_unchecked(slice::from_raw_parts(ptr, len))\n         }\n         #[inline]\n         unsafe fn get_unchecked_mut(self, slice: &mut str) -> &mut Self::Output {\n-            let ptr = slice.as_ptr().offset(self.start as isize);\n+            let ptr = slice.as_ptr().add(self.start);\n             let len = slice.len() - self.start;\n             super::from_utf8_unchecked_mut(slice::from_raw_parts_mut(ptr as *mut u8, len))\n         }\n@@ -2573,7 +2573,7 @@ impl str {\n             unsafe {\n                 (from_utf8_unchecked_mut(slice::from_raw_parts_mut(ptr, mid)),\n                  from_utf8_unchecked_mut(slice::from_raw_parts_mut(\n-                    ptr.offset(mid as isize),\n+                    ptr.add(mid),\n                     len - mid\n                  )))\n             }"}, {"sha": "1bac6d22d37441effd48a7ef1e4b0755c8c67979", "filename": "src/libfmt_macros/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibfmt_macros%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibfmt_macros%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibfmt_macros%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -154,7 +154,7 @@ pub struct Parser<'a> {\n     style: Option<usize>,\n     /// How many newlines have been seen in the string so far, to adjust the error spans\n     seen_newlines: usize,\n-    /// Start and end byte offset of every successfuly parsed argument\n+    /// Start and end byte offset of every successfully parsed argument\n     pub arg_places: Vec<(usize, usize)>,\n }\n "}, {"sha": "7e0c32fe03d8a57a43f5d7b17e8264e646fdbc88", "filename": "src/libpanic_unwind/dwarf/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibpanic_unwind%2Fdwarf%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibpanic_unwind%2Fdwarf%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Fdwarf%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -38,7 +38,7 @@ impl DwarfReader {\n     // telling the backend to generate \"misalignment-safe\" code.\n     pub unsafe fn read<T: Copy>(&mut self) -> T {\n         let Unaligned(result) = *(self.ptr as *const Unaligned<T>);\n-        self.ptr = self.ptr.offset(mem::size_of::<T>() as isize);\n+        self.ptr = self.ptr.add(mem::size_of::<T>());\n         result\n     }\n "}, {"sha": "015be2dea2157205d6fd6b1eb3426bd42eace040", "filename": "src/libpanic_unwind/seh.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibpanic_unwind%2Fseh.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibpanic_unwind%2Fseh.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibpanic_unwind%2Fseh.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -142,7 +142,7 @@ mod imp {\n \n #[repr(C)]\n pub struct _ThrowInfo {\n-    pub attribues: c_uint,\n+    pub attributes: c_uint,\n     pub pnfnUnwind: imp::ptr_t,\n     pub pForwardCompat: imp::ptr_t,\n     pub pCatchableTypeArray: imp::ptr_t,\n@@ -178,7 +178,7 @@ pub struct _TypeDescriptor {\n }\n \n static mut THROW_INFO: _ThrowInfo = _ThrowInfo {\n-    attribues: 0,\n+    attributes: 0,\n     pnfnUnwind: ptr!(0),\n     pForwardCompat: ptr!(0),\n     pCatchableTypeArray: ptr!(0),"}, {"sha": "656819880b135271f142c5856e6786d5d0253180", "filename": "src/libproc_macro/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibproc_macro%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibproc_macro%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n //!\n //! This library, provided by the standard distribution, provides the types\n //! consumed in the interfaces of procedurally defined macro definitions such as\n-//! function-like macros `#[proc_macro]`, macro attribures `#[proc_macro_attribute]` and\n+//! function-like macros `#[proc_macro]`, macro attributes `#[proc_macro_attribute]` and\n //! custom derive attributes`#[proc_macro_derive]`.\n //!\n //! Note that this crate is intentionally bare-bones currently."}, {"sha": "b56da8f63042474469299bdbefae614dc1aad0eb", "filename": "src/librustc/infer/canonical/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Finfer%2Fcanonical%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Finfer%2Fcanonical%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Fcanonical%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -49,7 +49,7 @@ pub mod query_result;\n mod substitute;\n \n /// A \"canonicalized\" type `V` is one where all free inference\n-/// variables have been rewriten to \"canonical vars\". These are\n+/// variables have been rewritten to \"canonical vars\". These are\n /// numbered starting from 0 in order of first appearance.\n #[derive(Copy, Clone, Debug, PartialEq, Eq, Hash, RustcDecodable, RustcEncodable)]\n pub struct Canonical<'gcx, V> {"}, {"sha": "d458d62e738c3b95ff735223a0064357031dee1b", "filename": "src/librustc/infer/error_reporting/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -561,7 +561,7 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n             value.push_highlighted(\"<\");\n         }\n \n-        // Output the lifetimes fot the first type\n+        // Output the lifetimes for the first type\n         let lifetimes = sub.regions()\n             .map(|lifetime| {\n                 let s = lifetime.to_string();"}, {"sha": "bb1c9448132c117b72656f91fe0e871c36d1e555", "filename": "src/librustc/infer/higher_ranked/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Finfer%2Fhigher_ranked%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Finfer%2Fhigher_ranked%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Fhigher_ranked%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -527,7 +527,7 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n          * we're not careful, it will succeed.\n          *\n          * The reason is that when we walk through the subtyping\n-         * algorith, we begin by replacing `'a` with a skolemized\n+         * algorithm, we begin by replacing `'a` with a skolemized\n          * variable `'1`. We then have `fn(_#0t) <: fn(&'1 int)`. This\n          * can be made true by unifying `_#0t` with `&'1 int`. In the\n          * process, we create a fresh variable for the skolemized"}, {"sha": "c92f7eb5954964ac8906c0696d99c82ca9ed5e49", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -47,7 +47,7 @@\n #![feature(drain_filter)]\n #![feature(iterator_find_map)]\n #![cfg_attr(windows, feature(libc))]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(never_type)]\n #![feature(exhaustive_patterns)]\n #![feature(extern_types)]"}, {"sha": "f4b44043389615d2c2540f4b692bf198ae3bd2c3", "filename": "src/librustc/middle/cstore.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmiddle%2Fcstore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmiddle%2Fcstore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcstore.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -42,11 +42,6 @@ pub use self::NativeLibraryKind::*;\n \n // lonely orphan structs and enums looking for a better home\n \n-#[derive(Clone, Debug, Copy)]\n-pub struct LinkMeta {\n-    pub crate_hash: Svh,\n-}\n-\n /// Where a crate came from on the local filesystem. One of these three options\n /// must be non-None.\n #[derive(PartialEq, Clone, Debug)]\n@@ -233,8 +228,7 @@ pub trait CrateStore {\n \n     // utility functions\n     fn encode_metadata<'a, 'tcx>(&self,\n-                                 tcx: TyCtxt<'a, 'tcx, 'tcx>,\n-                                 link_meta: &LinkMeta)\n+                                 tcx: TyCtxt<'a, 'tcx, 'tcx>)\n                                  -> EncodedMetadata;\n     fn metadata_encoding_version(&self) -> &[u8];\n }"}, {"sha": "3e8b44b87fe74183356f833e4d0ebb4abcabb234", "filename": "src/librustc/mir/interpret/value.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmir%2Finterpret%2Fvalue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmir%2Finterpret%2Fvalue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Finterpret%2Fvalue.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -68,7 +68,7 @@ impl<'tcx> ConstValue<'tcx> {\n \n /// A `Value` represents a single self-contained Rust value.\n ///\n-/// A `Value` can either refer to a block of memory inside an allocation (`ByRef`) or to a primitve\n+/// A `Value` can either refer to a block of memory inside an allocation (`ByRef`) or to a primitive\n /// value held directly, outside of any allocation (`Scalar`).  For `ByRef`-values, we remember\n /// whether the pointer is supposed to be aligned or not (also see Place).\n ///"}, {"sha": "54fe30e609d3831f91eb234792ca3f9a4884eff4", "filename": "src/librustc/mir/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmir%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmir%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -927,11 +927,11 @@ pub enum TerminatorKind<'tcx> {\n     ///   Drop(P, goto BB1, unwind BB2)\n     /// }\n     /// BB1 {\n-    ///   // P is now unitialized\n+    ///   // P is now uninitialized\n     ///   P <- V\n     /// }\n     /// BB2 {\n-    ///   // P is now unitialized -- its dtor panicked\n+    ///   // P is now uninitialized -- its dtor panicked\n     ///   P <- V\n     /// }\n     /// ```"}, {"sha": "c919793fe3e03c38aeca2e498e5d97f15659e3eb", "filename": "src/librustc/mir/traversal.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmir%2Ftraversal.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fmir%2Ftraversal.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Ftraversal.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -171,7 +171,7 @@ impl<'a, 'tcx> Postorder<'a, 'tcx> {\n         //      (A, [C])]\n         //\n         // Now that the top of the stack has no successors we can traverse, each item will\n-        // be popped off during iteration until we get back to `A`. This yeilds [E, D, B].\n+        // be popped off during iteration until we get back to `A`. This yields [E, D, B].\n         //\n         // When we yield `B` and call `traverse_successor`, we push `C` to the stack, but\n         // since we've already visited `E`, that child isn't added to the stack. The last"}, {"sha": "a0882f8f92b46adcd9e783bd7b156222db21af15", "filename": "src/librustc/traits/auto_trait.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Ftraits%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Ftraits%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fauto_trait.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -264,12 +264,12 @@ impl<'a, 'tcx> AutoTraitFinder<'a, 'tcx> {\n     // The core logic responsible for computing the bounds for our synthesized impl.\n     //\n     // To calculate the bounds, we call SelectionContext.select in a loop. Like FulfillmentContext,\n-    // we recursively select the nested obligations of predicates we encounter. However, whenver we\n+    // we recursively select the nested obligations of predicates we encounter. However, whenever we\n     // encounter an UnimplementedError involving a type parameter, we add it to our ParamEnv. Since\n     // our goal is to determine when a particular type implements an auto trait, Unimplemented\n     // errors tell us what conditions need to be met.\n     //\n-    // This method ends up working somewhat similary to FulfillmentContext, but with a few key\n+    // This method ends up working somewhat similarly to FulfillmentContext, but with a few key\n     // differences. FulfillmentContext works under the assumption that it's dealing with concrete\n     // user code. According, it considers all possible ways that a Predicate could be met - which\n     // isn't always what we want for a synthesized impl. For example, given the predicate 'T:\n@@ -289,11 +289,11 @@ impl<'a, 'tcx> AutoTraitFinder<'a, 'tcx> {\n     // we'll pick up any nested bounds, without ever inferring that 'T: IntoIterator' needs to\n     // hold.\n     //\n-    // One additonal consideration is supertrait bounds. Normally, a ParamEnv is only ever\n+    // One additional consideration is supertrait bounds. Normally, a ParamEnv is only ever\n     // consutrcted once for a given type. As part of the construction process, the ParamEnv will\n     // have any supertrait bounds normalized - e.g. if we have a type 'struct Foo<T: Copy>', the\n     // ParamEnv will contain 'T: Copy' and 'T: Clone', since 'Copy: Clone'. When we construct our\n-    // own ParamEnv, we need to do this outselves, through traits::elaborate_predicates, or else\n+    // own ParamEnv, we need to do this ourselves, through traits::elaborate_predicates, or else\n     // SelectionContext will choke on the missing predicates. However, this should never show up in\n     // the final synthesized generics: we don't want our generated docs page to contain something\n     // like 'T: Copy + Clone', as that's redundant. Therefore, we keep track of a separate"}, {"sha": "fb095517040183aa8b59478e9ac18371a0461332", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -652,7 +652,7 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n                         }\n \n                         // If this error is due to `!: Trait` not implemented but `(): Trait` is\n-                        // implemented, and fallback has occured, then it could be due to a\n+                        // implemented, and fallback has occurred, then it could be due to a\n                         // variable that used to fallback to `()` now falling back to `!`. Issue a\n                         // note informing about the change in behaviour.\n                         if trait_predicate.skip_binder().self_ty().is_never()"}, {"sha": "3a1d50a6584ef5f6e0494dc444d87c2782cd3e6a", "filename": "src/librustc/traits/query/dropck_outlives.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Ftraits%2Fquery%2Fdropck_outlives.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Ftraits%2Fquery%2Fdropck_outlives.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Fquery%2Fdropck_outlives.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -82,7 +82,7 @@ impl<'cx, 'gcx, 'tcx> At<'cx, 'gcx, 'tcx> {\n         // Errors and ambiuity in dropck occur in two cases:\n         // - unresolved inference variables at the end of typeck\n         // - non well-formed types where projections cannot be resolved\n-        // Either of these should hvae created an error before.\n+        // Either of these should have created an error before.\n         tcx.sess\n             .delay_span_bug(span, \"dtorck encountered internal error\");\n         return InferOk {"}, {"sha": "ee0543f53ba6928cc01bf5a53241639c56e20fcf", "filename": "src/librustc/ty/context.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fcontext.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -26,7 +26,7 @@ use lint::{self, Lint};\n use ich::{StableHashingContext, NodeIdHashingMode};\n use infer::canonical::{CanonicalVarInfo, CanonicalVarInfos};\n use infer::outlives::free_region_map::FreeRegionMap;\n-use middle::cstore::{CrateStoreDyn, LinkMeta};\n+use middle::cstore::CrateStoreDyn;\n use middle::cstore::EncodedMetadata;\n use middle::lang_items;\n use middle::resolve_lifetime::{self, ObjectLifetimeDefault};\n@@ -892,7 +892,7 @@ pub struct GlobalCtxt<'tcx> {\n \n     pub(crate) queries: query::Queries<'tcx>,\n \n-    // Records the free variables refrenced by every closure\n+    // Records the free variables referenced by every closure\n     // expression. Do not track deps for this, just recompute it from\n     // scratch every time.\n     freevars: FxHashMap<DefId, Lrc<Vec<hir::Freevar>>>,\n@@ -1490,10 +1490,10 @@ impl<'a, 'gcx, 'tcx> TyCtxt<'a, 'gcx, 'tcx> {\n }\n \n impl<'a, 'tcx> TyCtxt<'a, 'tcx, 'tcx> {\n-    pub fn encode_metadata(self, link_meta: &LinkMeta)\n+    pub fn encode_metadata(self)\n         -> EncodedMetadata\n     {\n-        self.cstore.encode_metadata(self, link_meta)\n+        self.cstore.encode_metadata(self)\n     }\n }\n "}, {"sha": "486ed85843cd96eaaa9613f862a3ab74f5e07b16", "filename": "src/librustc/ty/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fty%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fty%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1501,7 +1501,7 @@ impl UniverseIndex {\n \n     /// Creates a universe index from the given integer.  Not to be\n     /// used lightly lest you pick a bad value. But sometimes we\n-    /// convert universe indicies into integers and back for various\n+    /// convert universe indices into integers and back for various\n     /// reasons.\n     pub fn from_u32(index: u32) -> Self {\n         UniverseIndex(index)"}, {"sha": "e3b0f8c4570df1fc30d0a2e201018c626d9f9f22", "filename": "src/librustc/ty/query/job.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fty%2Fquery%2Fjob.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc%2Fty%2Fquery%2Fjob.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fquery%2Fjob.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -262,7 +262,7 @@ where\n         }\n     }\n \n-    // Visit the explict waiters which use condvars and are resumable\n+    // Visit the explicit waiters which use condvars and are resumable\n     for (i, waiter) in query.latch.info.lock().waiters.iter().enumerate() {\n         if let Some(ref waiter_query) = waiter.query {\n             if visit(waiter.span, waiter_query.clone()).is_some() {"}, {"sha": "d50a56ad84ab2792d5c2b16cb71c9037258a29ea", "filename": "src/librustc_codegen_llvm/back/link.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fback%2Flink.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -47,8 +47,7 @@ use std::str;\n use syntax::attr;\n \n pub use rustc_codegen_utils::link::{find_crate_name, filename_for_input, default_output_for_target,\n-                                  invalid_output_for_target, build_link_meta, out_filename,\n-                                  check_file_is_writeable};\n+                                  invalid_output_for_target, out_filename, check_file_is_writeable};\n \n // The third parameter is for env vars, used on windows to set up the\n // path for MSVC to find its DLLs, and gcc to find its bundled"}, {"sha": "80e9965e39cd8b9ada6890699072c189185a0756", "filename": "src/librustc_codegen_llvm/back/write.rs", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fback%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fback%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fback%2Fwrite.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -19,7 +19,7 @@ use base;\n use consts;\n use rustc_incremental::{copy_cgu_workproducts_to_incr_comp_cache_dir, in_incr_comp_dir};\n use rustc::dep_graph::{WorkProduct, WorkProductId, WorkProductFileKind};\n-use rustc::middle::cstore::{LinkMeta, EncodedMetadata};\n+use rustc::middle::cstore::EncodedMetadata;\n use rustc::session::config::{self, OutputFilenames, OutputType, Passes, Sanitizer, Lto};\n use rustc::session::Session;\n use rustc::util::nodemap::FxHashMap;\n@@ -32,6 +32,7 @@ use rustc::ty::TyCtxt;\n use rustc::util::common::{time_ext, time_depth, set_time_depth, print_time_passes_entry};\n use rustc_fs_util::{path2cstr, link_or_copy};\n use rustc_data_structures::small_c_str::SmallCStr;\n+use rustc_data_structures::svh::Svh;\n use errors::{self, Handler, Level, DiagnosticBuilder, FatalError, DiagnosticId};\n use errors::emitter::{Emitter};\n use syntax::attr;\n@@ -327,7 +328,7 @@ struct AssemblerCommand {\n /// Additional resources used by optimize_and_codegen (not module specific)\n #[derive(Clone)]\n pub struct CodegenContext {\n-    // Resouces needed when running LTO\n+    // Resources needed when running LTO\n     pub time_passes: bool,\n     pub lto: Lto,\n     pub no_landing_pads: bool,\n@@ -595,7 +596,7 @@ unsafe fn optimize(cgcx: &CodegenContext,\n                                      -C passes=name-anon-globals to the compiler command line.\");\n                 } else {\n                     bug!(\"We are using thin LTO buffers without running the NameAnonGlobals pass. \\\n-                         This will likely cause errors in LLVM and shoud never happen.\");\n+                         This will likely cause errors in LLVM and should never happen.\");\n                 }\n             }\n         }\n@@ -912,13 +913,13 @@ fn need_crate_bitcode_for_rlib(sess: &Session) -> bool {\n \n pub fn start_async_codegen(tcx: TyCtxt,\n                                time_graph: Option<TimeGraph>,\n-                               link: LinkMeta,\n                                metadata: EncodedMetadata,\n                                coordinator_receive: Receiver<Box<dyn Any + Send>>,\n                                total_cgus: usize)\n                                -> OngoingCodegen {\n     let sess = tcx.sess;\n     let crate_name = tcx.crate_name(LOCAL_CRATE);\n+    let crate_hash = tcx.crate_hash(LOCAL_CRATE);\n     let no_builtins = attr::contains_name(&tcx.hir.krate().attrs, \"no_builtins\");\n     let subsystem = attr::first_attr_value_str_by_name(&tcx.hir.krate().attrs,\n                                                        \"windows_subsystem\");\n@@ -1037,7 +1038,7 @@ pub fn start_async_codegen(tcx: TyCtxt,\n \n     OngoingCodegen {\n         crate_name,\n-        link,\n+        crate_hash,\n         metadata,\n         windows_subsystem,\n         linker_info,\n@@ -2270,7 +2271,7 @@ impl SharedEmitterMain {\n \n pub struct OngoingCodegen {\n     crate_name: Symbol,\n-    link: LinkMeta,\n+    crate_hash: Svh,\n     metadata: EncodedMetadata,\n     windows_subsystem: Option<String>,\n     linker_info: LinkerInfo,\n@@ -2321,7 +2322,7 @@ impl OngoingCodegen {\n \n         (CodegenResults {\n             crate_name: self.crate_name,\n-            link: self.link,\n+            crate_hash: self.crate_hash,\n             metadata: self.metadata,\n             windows_subsystem: self.windows_subsystem,\n             linker_info: self.linker_info,"}, {"sha": "3834672633c05f1ac0bfb0de1e31834df82f449e", "filename": "src/librustc_codegen_llvm/base.rs", "status": "modified", "additions": 4, "deletions": 10, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fbase.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -29,7 +29,6 @@ use super::ModuleCodegen;\n use super::ModuleKind;\n \n use abi;\n-use back::link;\n use back::write::{self, OngoingCodegen};\n use llvm::{self, TypeKind, get_param};\n use metadata;\n@@ -42,7 +41,7 @@ use rustc::ty::{self, Ty, TyCtxt};\n use rustc::ty::layout::{self, Align, TyLayout, LayoutOf};\n use rustc::ty::query::Providers;\n use rustc::dep_graph::{DepNode, DepConstructor};\n-use rustc::middle::cstore::{self, LinkMeta, LinkagePreference};\n+use rustc::middle::cstore::{self, LinkagePreference};\n use rustc::middle::exported_symbols;\n use rustc::util::common::{time, print_time_passes_entry};\n use rustc::util::profiling::ProfileCategory;\n@@ -608,8 +607,7 @@ fn maybe_create_entry_wrapper(cx: &CodegenCx) {\n }\n \n fn write_metadata<'a, 'gcx>(tcx: TyCtxt<'a, 'gcx, 'gcx>,\n-                            llvm_module: &ModuleLlvm,\n-                            link_meta: &LinkMeta)\n+                            llvm_module: &ModuleLlvm)\n                             -> EncodedMetadata {\n     use std::io::Write;\n     use flate2::Compression;\n@@ -641,7 +639,7 @@ fn write_metadata<'a, 'gcx>(tcx: TyCtxt<'a, 'gcx, 'gcx>,\n         return EncodedMetadata::new();\n     }\n \n-    let metadata = tcx.encode_metadata(link_meta);\n+    let metadata = tcx.encode_metadata();\n     if kind == MetadataKind::Uncompressed {\n         return metadata;\n     }\n@@ -719,8 +717,6 @@ pub fn codegen_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         tcx.sess.fatal(\"this compiler's LLVM does not support PGO\");\n     }\n \n-    let crate_hash = tcx.crate_hash(LOCAL_CRATE);\n-    let link_meta = link::build_link_meta(crate_hash);\n     let cgu_name_builder = &mut CodegenUnitNameBuilder::new(tcx);\n \n     // Codegen the metadata.\n@@ -732,7 +728,7 @@ pub fn codegen_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n                                                                              .to_string();\n     let metadata_llvm_module = ModuleLlvm::new(tcx.sess, &metadata_cgu_name);\n     let metadata = time(tcx.sess, \"write metadata\", || {\n-        write_metadata(tcx, &metadata_llvm_module, &link_meta)\n+        write_metadata(tcx, &metadata_llvm_module)\n     });\n     tcx.sess.profiler(|p| p.end_activity(ProfileCategory::Codegen));\n \n@@ -754,7 +750,6 @@ pub fn codegen_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         let ongoing_codegen = write::start_async_codegen(\n             tcx,\n             time_graph.clone(),\n-            link_meta,\n             metadata,\n             rx,\n             1);\n@@ -789,7 +784,6 @@ pub fn codegen_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n     let ongoing_codegen = write::start_async_codegen(\n         tcx,\n         time_graph.clone(),\n-        link_meta,\n         metadata,\n         rx,\n         codegen_units.len());"}, {"sha": "03a2e0a82cf1010a5f8f75ed027be127a4dce8d1", "filename": "src/librustc_codegen_llvm/lib.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -88,6 +88,7 @@ use rustc::util::nodemap::{FxHashSet, FxHashMap};\n use rustc::util::profiling::ProfileCategory;\n use rustc_mir::monomorphize;\n use rustc_codegen_utils::codegen_backend::CodegenBackend;\n+use rustc_data_structures::svh::Svh;\n \n mod diagnostics;\n \n@@ -251,7 +252,7 @@ impl CodegenBackend for LlvmCodegenBackend {\n \n         // Now that we won't touch anything in the incremental compilation directory\n         // any more, we can finalize it (which involves renaming it)\n-        rustc_incremental::finalize_session_directory(sess, ongoing_codegen.link.crate_hash);\n+        rustc_incremental::finalize_session_directory(sess, ongoing_codegen.crate_hash);\n \n         Ok(())\n     }\n@@ -389,7 +390,7 @@ struct CodegenResults {\n     modules: Vec<CompiledModule>,\n     allocator_module: Option<CompiledModule>,\n     metadata_module: CompiledModule,\n-    link: rustc::middle::cstore::LinkMeta,\n+    crate_hash: Svh,\n     metadata: rustc::middle::cstore::EncodedMetadata,\n     windows_subsystem: Option<String>,\n     linker_info: back::linker::LinkerInfo,"}, {"sha": "02de5874672776537c357cfedbfd7e9de0f3c396", "filename": "src/librustc_codegen_llvm/mir/block.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fmir%2Fblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_llvm%2Fmir%2Fblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fmir%2Fblock.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -656,7 +656,7 @@ impl FunctionCx<'a, 'll, 'tcx> {\n                     llargs.push(b);\n                     return;\n                 }\n-                _ => bug!(\"codegen_argument: {:?} invalid for pair arugment\", op)\n+                _ => bug!(\"codegen_argument: {:?} invalid for pair argument\", op)\n             }\n         } else if arg.is_unsized_indirect() {\n             match op.val {"}, {"sha": "d693e088360d45e4f87e229ac2c4291be7d7ceb7", "filename": "src/librustc_codegen_utils/codegen_backend.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_utils%2Fcodegen_backend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_utils%2Fcodegen_backend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_utils%2Fcodegen_backend.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -44,7 +44,7 @@ use rustc::dep_graph::DepGraph;\n use rustc_target::spec::Target;\n use rustc_data_structures::fx::FxHashMap;\n use rustc_mir::monomorphize::collector;\n-use link::{build_link_meta, out_filename};\n+use link::out_filename;\n \n pub use rustc_data_structures::sync::MetadataRef;\n \n@@ -180,8 +180,7 @@ impl CodegenBackend for MetadataOnlyCodegenBackend {\n         }\n         tcx.sess.abort_if_errors();\n \n-        let link_meta = build_link_meta(tcx.crate_hash(LOCAL_CRATE));\n-        let metadata = tcx.encode_metadata(&link_meta);\n+        let metadata = tcx.encode_metadata();\n \n         box OngoingCodegen {\n             metadata: metadata,"}, {"sha": "75f1d614ae72ffa6a034e96e250f92a2ad37fb97", "filename": "src/librustc_codegen_utils/link.rs", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_utils%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_codegen_utils%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_utils%2Flink.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -10,8 +10,6 @@\n \n use rustc::session::config::{self, OutputFilenames, Input, OutputType};\n use rustc::session::Session;\n-use rustc::middle::cstore::LinkMeta;\n-use rustc_data_structures::svh::Svh;\n use std::path::{Path, PathBuf};\n use syntax::{ast, attr};\n use syntax_pos::Span;\n@@ -50,14 +48,6 @@ fn is_writeable(p: &Path) -> bool {\n     }\n }\n \n-pub fn build_link_meta(crate_hash: Svh) -> LinkMeta {\n-    let r = LinkMeta {\n-        crate_hash,\n-    };\n-    info!(\"{:?}\", r);\n-    return r;\n-}\n-\n pub fn find_crate_name(sess: Option<&Session>,\n                        attrs: &[ast::Attribute],\n                        input: &Input) -> String {"}, {"sha": "45fb56570618093f556f85134daa61a450e0da69", "filename": "src/librustc_data_structures/array_vec.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Farray_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Farray_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Farray_vec.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -139,7 +139,7 @@ impl<A: Array> ArrayVec<A> {\n             // whole Drain iterator (like &mut T).\n             let range_slice = {\n                 let arr = &mut self.values as &mut [ManuallyDrop<<A as Array>::Element>];\n-                slice::from_raw_parts_mut(arr.as_mut_ptr().offset(start as isize),\n+                slice::from_raw_parts_mut(arr.as_mut_ptr().add(start),\n                                           end - start)\n             };\n             Drain {\n@@ -262,8 +262,8 @@ impl<'a, A: Array> Drop for Drain<'a, A> {\n                 {\n                     let arr =\n                         &mut source_array_vec.values as &mut [ManuallyDrop<<A as Array>::Element>];\n-                    let src = arr.as_ptr().offset(tail as isize);\n-                    let dst = arr.as_mut_ptr().offset(start as isize);\n+                    let src = arr.as_ptr().add(tail);\n+                    let dst = arr.as_mut_ptr().add(start);\n                     ptr::copy(src, dst, self.tail_len);\n                 };\n                 source_array_vec.set_len(start + self.tail_len);"}, {"sha": "c3ee48d20f6f5afad8610a4914771335e765b4c7", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -25,7 +25,7 @@\n #![feature(unsize)]\n #![feature(specialization)]\n #![feature(optin_builtin_traits)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![cfg_attr(not(stage0), feature(nll))]\n #![feature(allow_internal_unstable)]\n #![feature(vec_resize_with)]"}, {"sha": "689aad25b431d78566f635b96821e5bb4959bdf8", "filename": "src/librustc_data_structures/small_vec.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Fsmall_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Fsmall_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fsmall_vec.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -125,7 +125,7 @@ impl<A: Array> SmallVec<A> {\n             // infallible\n             // The spot to put the new value\n             {\n-                let p = self.as_mut_ptr().offset(index as isize);\n+                let p = self.as_mut_ptr().add(index);\n                 // Shift everything over to make space. (Duplicating the\n                 // `index`th element into two consecutive places.)\n                 ptr::copy(p, p.offset(1), len - index);"}, {"sha": "6989cdc0a9a15afaf1e545cb3a10068f918d40b5", "filename": "src/librustc_data_structures/sync.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Fsync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_data_structures%2Fsync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fsync.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -26,7 +26,7 @@\n //!\n //! `MTLock` is a mutex which disappears if cfg!(parallel_queries) is false.\n //!\n-//! `MTRef` is a immutable refernce if cfg!(parallel_queries), and an mutable reference otherwise.\n+//! `MTRef` is a immutable reference if cfg!(parallel_queries), and an mutable reference otherwise.\n //!\n //! `rustc_erase_owner!` erases a OwningRef owner into Erased or Erased + Send + Sync\n //! depending on the value of cfg!(parallel_queries).\n@@ -432,7 +432,7 @@ impl<T> Once<T> {\n     /// closures may concurrently be computing a value which the inner value should take.\n     /// Only one of these closures are used to actually initialize the value.\n     /// If some other closure already set the value, we assert that it our closure computed\n-    /// a value equal to the value aready set and then\n+    /// a value equal to the value already set and then\n     /// we return the value our closure computed wrapped in a `Option`.\n     /// If our closure set the value, `None` is returned.\n     /// If the value is already initialized, the closure is not called and `None` is returned."}, {"sha": "038d53a35478d935922d7fe07bde554064dd563c", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -889,7 +889,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UnconditionalRecursion {\n         // NB. this has an edge case with non-returning statements,\n         // like `loop {}` or `panic!()`: control flow never reaches\n         // the exit node through these, so one can have a function\n-        // that never actually calls itselfs but is still picked up by\n+        // that never actually calls itself but is still picked up by\n         // this lint:\n         //\n         //     fn f(cond: bool) {"}, {"sha": "15eb4730c1d20e95190f5e41cd7f3636ce703d9f", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -26,7 +26,7 @@\n #![cfg_attr(test, feature(test))]\n #![feature(box_patterns)]\n #![feature(box_syntax)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![cfg_attr(not(stage0), feature(nll))]\n #![feature(quote)]\n #![feature(rustc_diagnostic_macros)]"}, {"sha": "a37b2eb5fd449c9e9ba0c7bb3226351933e559ac", "filename": "src/librustc_lint/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_lint%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_lint%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Ftypes.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -486,7 +486,7 @@ impl<'a, 'tcx> ImproperCTypesVisitor<'a, 'tcx> {\n         // Protect against infinite recursion, for example\n         // `struct S(*mut S);`.\n         // FIXME: A recursion limit is necessary as well, for irregular\n-        // recusive types.\n+        // recursive types.\n         if !cache.insert(ty) {\n             return FfiSafe;\n         }"}, {"sha": "083f95656665dac2f074af600c6fc4340e2afd40", "filename": "src/librustc_metadata/cstore_impl.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_metadata%2Fcstore_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_metadata%2Fcstore_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcstore_impl.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -17,7 +17,6 @@ use schema;\n \n use rustc::ty::query::QueryConfig;\n use rustc::middle::cstore::{CrateStore, DepKind,\n-                            LinkMeta,\n                             EncodedMetadata, NativeLibraryKind};\n use rustc::middle::exported_symbols::ExportedSymbol;\n use rustc::middle::stability::DeprecationEntry;\n@@ -567,11 +566,10 @@ impl CrateStore for cstore::CStore {\n     }\n \n     fn encode_metadata<'a, 'tcx>(&self,\n-                                 tcx: TyCtxt<'a, 'tcx, 'tcx>,\n-                                 link_meta: &LinkMeta)\n+                                 tcx: TyCtxt<'a, 'tcx, 'tcx>)\n                                  -> EncodedMetadata\n     {\n-        encoder::encode_metadata(tcx, link_meta)\n+        encoder::encode_metadata(tcx)\n     }\n \n     fn metadata_encoding_version(&self) -> &[u8]"}, {"sha": "a68c0692eb5e9f298029dca0d368309978554aab", "filename": "src/librustc_metadata/encoder.rs", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_metadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_metadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fencoder.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -13,7 +13,7 @@ use index_builder::{FromId, IndexBuilder, Untracked};\n use isolated_encoder::IsolatedEncoder;\n use schema::*;\n \n-use rustc::middle::cstore::{LinkMeta, LinkagePreference, NativeLibrary,\n+use rustc::middle::cstore::{LinkagePreference, NativeLibrary,\n                             EncodedMetadata, ForeignModule};\n use rustc::hir::def::CtorKind;\n use rustc::hir::def_id::{CrateNum, CRATE_DEF_INDEX, DefIndex, DefId, LocalDefId, LOCAL_CRATE};\n@@ -52,7 +52,6 @@ use rustc::hir::intravisit;\n pub struct EncodeContext<'a, 'tcx: 'a> {\n     opaque: opaque::Encoder,\n     pub tcx: TyCtxt<'a, 'tcx, 'tcx>,\n-    link_meta: &'a LinkMeta,\n \n     lazy_state: LazyState,\n     type_shorthands: FxHashMap<Ty<'tcx>, usize>,\n@@ -482,7 +481,6 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n         let index_bytes = self.position() - i;\n \n         let attrs = tcx.hir.krate_attrs();\n-        let link_meta = self.link_meta;\n         let is_proc_macro = tcx.sess.crate_types.borrow().contains(&CrateType::ProcMacro);\n         let has_default_lib_allocator = attr::contains_name(&attrs, \"default_lib_allocator\");\n         let has_global_allocator = *tcx.sess.has_global_allocator.get();\n@@ -491,7 +489,7 @@ impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n             name: tcx.crate_name(LOCAL_CRATE),\n             extra_filename: tcx.sess.opts.cg.extra_filename.clone(),\n             triple: tcx.sess.opts.target_triple.clone(),\n-            hash: link_meta.crate_hash,\n+            hash: tcx.crate_hash(LOCAL_CRATE),\n             disambiguator: tcx.sess.local_crate_disambiguator(),\n             panic_strategy: tcx.sess.panic_strategy(),\n             edition: hygiene::default_edition(),\n@@ -1823,8 +1821,7 @@ impl<'a, 'tcx, 'v> ItemLikeVisitor<'v> for ImplVisitor<'a, 'tcx> {\n // will allow us to slice the metadata to the precise length that we just\n // generated regardless of trailing bytes that end up in it.\n \n-pub fn encode_metadata<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n-                                 link_meta: &LinkMeta)\n+pub fn encode_metadata<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>)\n                                  -> EncodedMetadata\n {\n     let mut encoder = opaque::Encoder::new(vec![]);\n@@ -1837,7 +1834,6 @@ pub fn encode_metadata<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         let mut ecx = EncodeContext {\n             opaque: encoder,\n             tcx,\n-            link_meta,\n             lazy_state: LazyState::NoNode,\n             type_shorthands: Default::default(),\n             predicate_shorthands: Default::default(),"}, {"sha": "446ea6c32444184d4a2a06032650187107965e6f", "filename": "src/librustc_metadata/native_libs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_metadata%2Fnative_libs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_metadata%2Fnative_libs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fnative_libs.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -207,7 +207,7 @@ impl<'a, 'tcx> Collector<'a, 'tcx> {\n             }\n         }\n \n-        // Update kind and, optionally, the name of all native libaries\n+        // Update kind and, optionally, the name of all native libraries\n         // (there may be more than one) with the specified name.\n         for &(ref name, ref new_name, kind) in &self.tcx.sess.opts.libs {\n             let mut found = false;"}, {"sha": "4390ca371823a517855ec1aabfb7cdd530c1277d", "filename": "src/librustc_mir/borrow_check/mod.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1080,7 +1080,10 @@ impl<'cx, 'gcx, 'tcx> MirBorrowckCtxt<'cx, 'gcx, 'tcx> {\n             }\n         }\n \n-        if self\n+        // Check is_empty() first because it's the common case, and doing that\n+        // way we avoid the clone() call.\n+        if !self.access_place_error_reported.is_empty() &&\n+           self\n             .access_place_error_reported\n             .contains(&(place_span.0.clone(), place_span.1))\n         {"}, {"sha": "dc37c21fdabeba60a0819f9cab69a9bce4410c85", "filename": "src/librustc_mir/borrow_check/nll/invalidation.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Finvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Finvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Finvalidation.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -541,7 +541,7 @@ impl<'cg, 'cx, 'tcx, 'gcx> InvalidationGenerator<'cg, 'cx, 'tcx, 'gcx> {\n                             // unique or mutable borrows are invalidated by writes.\n                             // Reservations count as writes since we need to check\n                             // that activating the borrow will be OK\n-                            // TOOD(bob_twinkles) is this actually the right thing to do?\n+                            // FIXME(bob_twinkles) is this actually the right thing to do?\n                             this.generate_invalidates(borrow_index, context.loc);\n                         }\n                 }"}, {"sha": "2a78feed84915bf10b269acdf2ca0c7cc5748ab0", "filename": "src/librustc_mir/borrow_check/nll/type_check/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fnll%2Ftype_check%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -783,7 +783,7 @@ impl<'a, 'gcx, 'tcx> TypeChecker<'a, 'gcx, 'tcx> {\n     /// predicates, or otherwise uses the inference context, executes\n     /// `op` and then executes all the further obligations that `op`\n     /// returns. This will yield a set of outlives constraints amongst\n-    /// regions which are extracted and stored as having occured at\n+    /// regions which are extracted and stored as having occurred at\n     /// `locations`.\n     ///\n     /// **Any `rustc::infer` operations that might generate region"}, {"sha": "85abec7e7acc4daf8485e20b31ff38d632c28bd5", "filename": "src/librustc_mir/borrow_check/places_conflict.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fplaces_conflict.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fborrow_check%2Fplaces_conflict.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fborrow_check%2Fplaces_conflict.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -83,7 +83,7 @@ fn place_components_conflict<'gcx, 'tcx>(\n     // Our invariant is, that at each step of the iteration:\n     //  - If we didn't run out of access to match, our borrow and access are comparable\n     //    and either equal or disjoint.\n-    //  - If we did run out of accesss, the borrow can access a part of it.\n+    //  - If we did run out of access, the borrow can access a part of it.\n     loop {\n         // loop invariant: borrow_c is always either equal to access_c or disjoint from it.\n         if let Some(borrow_c) = borrow_components.next() {"}, {"sha": "116cefea175444496f8135faa5a6d18281c5152e", "filename": "src/librustc_mir/dataflow/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -605,7 +605,7 @@ pub trait BitDenotation: BitwiseOperator {\n     /// `sets.on_entry` to that local clone into `statement_effect` and\n     /// `terminator_effect`).\n     ///\n-    /// When its false, no local clone is constucted; instead a\n+    /// When it's false, no local clone is constructed; instead a\n     /// reference directly into `on_entry` is passed along via\n     /// `sets.on_entry` instead, which represents the flow state at\n     /// the block's start, not necessarily the state immediately prior"}, {"sha": "5517ed145546d069c220f42d6aa3230506016e17", "filename": "src/librustc_mir/interpret/eval_context.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Feval_context.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -462,7 +462,7 @@ impl<'a, 'mir, 'tcx: 'mir, M: Machine<'mir, 'tcx>> EvalContext<'a, 'mir, 'tcx, M\n         self.tcx.normalize_erasing_regions(ty::ParamEnv::reveal_all(), substituted)\n     }\n \n-    /// Return the size and aligment of the value at the given type.\n+    /// Return the size and alignment of the value at the given type.\n     /// Note that the value does not matter if the type is sized. For unsized types,\n     /// the value has to be a fat pointer, and we only care about the \"extra\" data in it.\n     pub fn size_and_align_of_dst("}, {"sha": "636b04a8d16da2826b301b8c1d7c4e317ff3b25d", "filename": "src/librustc_mir/interpret/memory.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Finterpret%2Fmemory.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Finterpret%2Fmemory.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Fmemory.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -599,7 +599,7 @@ impl<'a, 'mir, 'tcx, M: Machine<'mir, 'tcx>> Memory<'a, 'mir, 'tcx, M> {\n             Some(MemoryKind::Stack) => {},\n         }\n         if let Some(mut alloc) = alloc {\n-            // ensure llvm knows not to put this into immutable memroy\n+            // ensure llvm knows not to put this into immutable memory\n             alloc.runtime_mutability = mutability;\n             let alloc = self.tcx.intern_const_alloc(alloc);\n             self.tcx.alloc_map.lock().set_id_memory(alloc_id, alloc);"}, {"sha": "19fc087f128031b2cbcd39c1d923ec8995f3bbef", "filename": "src/librustc_mir/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -26,7 +26,7 @@ Rust MIR: a lowered representation of Rust. Also: an experiment!\n #![feature(const_fn)]\n #![feature(core_intrinsics)]\n #![feature(decl_macro)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(exhaustive_patterns)]\n #![feature(range_contains)]\n #![feature(rustc_diagnostic_macros)]"}, {"sha": "5062775fec168c6c7bd50dd94b464eaeaa3ba849", "filename": "src/librustc_mir/transform/inline.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Ftransform%2Finline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Ftransform%2Finline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Finline.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -704,7 +704,7 @@ impl<'a, 'tcx> MutVisitor<'tcx> for Integrator<'a, 'tcx> {\n                     *unwind = Some(self.update_target(tgt));\n                 } else if !self.in_cleanup_block {\n                     // Unless this drop is in a cleanup block, add an unwind edge to\n-                    // the orignal call's cleanup block\n+                    // the original call's cleanup block\n                     *unwind = self.cleanup_block;\n                 }\n             }\n@@ -716,7 +716,7 @@ impl<'a, 'tcx> MutVisitor<'tcx> for Integrator<'a, 'tcx> {\n                     *cleanup = Some(self.update_target(tgt));\n                 } else if !self.in_cleanup_block {\n                     // Unless this call is in a cleanup block, add an unwind edge to\n-                    // the orignal call's cleanup block\n+                    // the original call's cleanup block\n                     *cleanup = self.cleanup_block;\n                 }\n             }\n@@ -726,7 +726,7 @@ impl<'a, 'tcx> MutVisitor<'tcx> for Integrator<'a, 'tcx> {\n                     *cleanup = Some(self.update_target(tgt));\n                 } else if !self.in_cleanup_block {\n                     // Unless this assert is in a cleanup block, add an unwind edge to\n-                    // the orignal call's cleanup block\n+                    // the original call's cleanup block\n                     *cleanup = self.cleanup_block;\n                 }\n             }"}, {"sha": "bb66b9ed6ece8759e6900e3e04f1cd8f45c1e8c4", "filename": "src/librustc_mir/transform/promote_consts.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Ftransform%2Fpromote_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Ftransform%2Fpromote_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fpromote_consts.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -302,7 +302,7 @@ impl<'a, 'tcx> Promoter<'a, 'tcx> {\n                     let ref mut statement = blocks[loc.block].statements[loc.statement_index];\n                     match statement.kind {\n                         StatementKind::Assign(_, Rvalue::Ref(_, _, ref mut place)) => {\n-                            // Find the underlying local for this (necessarilly interior) borrow.\n+                            // Find the underlying local for this (necessarily interior) borrow.\n                             // HACK(eddyb) using a recursive function because of mutable borrows.\n                             fn interior_base<'a, 'tcx>(place: &'a mut Place<'tcx>)\n                                                        -> &'a mut Place<'tcx> {"}, {"sha": "4e9e085ca08a39c6158b8ff8cd7c32bd9c2993b9", "filename": "src/librustc_mir/transform/uniform_array_move_out.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Ftransform%2Funiform_array_move_out.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Ftransform%2Funiform_array_move_out.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Funiform_array_move_out.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -190,7 +190,7 @@ impl MirPass for RestoreSubsliceArrayMoveOut {\n                                 let local_use = &visitor.locals_use[*local];\n                                 let opt_index_and_place = Self::try_get_item_source(local_use, mir);\n                                 // each local should be used twice:\n-                                //  in assign and in aggregate statments\n+                                //  in assign and in aggregate statements\n                                 if local_use.use_count == 2 && opt_index_and_place.is_some() {\n                                     let (index, src_place) = opt_index_and_place.unwrap();\n                                     return Some((local_use, index, src_place));\n@@ -231,15 +231,15 @@ impl RestoreSubsliceArrayMoveOut {\n         if opt_size.is_some() && items.iter().all(\n             |l| l.is_some() && l.unwrap().2 == opt_src_place.unwrap()) {\n \n-            let indicies: Vec<_> = items.iter().map(|x| x.unwrap().1).collect();\n-            for i in 1..indicies.len() {\n-                if indicies[i - 1] + 1 != indicies[i] {\n+            let indices: Vec<_> = items.iter().map(|x| x.unwrap().1).collect();\n+            for i in 1..indices.len() {\n+                if indices[i - 1] + 1 != indices[i] {\n                     return;\n                 }\n             }\n \n-            let min = *indicies.first().unwrap();\n-            let max = *indicies.last().unwrap();\n+            let min = *indices.first().unwrap();\n+            let max = *indices.last().unwrap();\n \n             for item in items {\n                 let locals_use = item.unwrap().0;"}, {"sha": "bf835f5f0d9ad4edd7f5a2bf2f64bf57ce49a50f", "filename": "src/librustc_mir/util/pretty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Futil%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_mir%2Futil%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Futil%2Fpretty.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -459,7 +459,7 @@ fn write_scope_tree(\n     let indent = depth * INDENT.len();\n \n     let children = match scope_tree.get(&parent) {\n-        Some(childs) => childs,\n+        Some(children) => children,\n         None => return Ok(()),\n     };\n "}, {"sha": "4a63311c48a6ffb9cb2cabfc1bfabb19e10798ad", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -201,7 +201,7 @@ fn resolve_struct_error<'sess, 'a>(resolver: &'sess Resolver,\n                     if let Some(impl_span) = maybe_impl_defid.map_or(None,\n                             |def_id| resolver.definitions.opt_span(def_id)) {\n                         err.span_label(reduce_impl_span_to_impl_keyword(cm, impl_span),\n-                                    \"`Self` type implicitely declared here, on the `impl`\");\n+                                    \"`Self` type implicitly declared here, on the `impl`\");\n                     }\n                 },\n                 Def::TyParam(typaram_defid) => {"}, {"sha": "973580bcbe9045fc2aa888f482447b7fb26c53f9", "filename": "src/librustc_traits/dropck_outlives.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_traits%2Fdropck_outlives.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_traits%2Fdropck_outlives.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_traits%2Fdropck_outlives.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -81,7 +81,7 @@ fn dropck_outlives<'tcx>(\n         // into the types of its fields `(B, Vec<A>)`. These will get\n         // pushed onto the stack. Eventually, expanding `Vec<A>` will\n         // lead to us trying to push `A` a second time -- to prevent\n-        // infinite recusion, we notice that `A` was already pushed\n+        // infinite recursion, we notice that `A` was already pushed\n         // once and stop.\n         let mut ty_stack = vec![(for_ty, 0)];\n "}, {"sha": "f0afc58b3cec57a6420cbbcd9422042a038290c2", "filename": "src/librustc_typeck/check/generator_interior.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fgenerator_interior.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fgenerator_interior.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fgenerator_interior.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -121,7 +121,7 @@ pub fn resolve_interior<'a, 'gcx, 'tcx>(fcx: &'a FnCtxt<'a, 'gcx, 'tcx>,\n     // Replace all regions inside the generator interior with late bound regions\n     // Note that each region slot in the types gets a new fresh late bound region,\n     // which means that none of the regions inside relate to any other, even if\n-    // typeck had previously found contraints that would cause them to be related.\n+    // typeck had previously found constraints that would cause them to be related.\n     let mut counter = 0;\n     let type_list = fcx.tcx.fold_regions(&type_list, &mut false, |_, current_depth| {\n         counter += 1;"}, {"sha": "c9f717e6059fbe04d15d68dbbd722ed5b191c186", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -879,7 +879,7 @@ fn typeck_tables_of<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         // backwards compatibility. This makes fallback a stronger type hint than a cast coercion.\n         fcx.check_casts();\n \n-        // Closure and generater analysis may run after fallback\n+        // Closure and generator analysis may run after fallback\n         // because they don't constrain other type variables.\n         fcx.closure_analyze(body);\n         assert!(fcx.deferred_call_resolutions.borrow().is_empty());\n@@ -2332,7 +2332,7 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n     // unconstrained floats with f64.\n     // Fallback becomes very dubious if we have encountered type-checking errors.\n     // In that case, fallback to TyError.\n-    // The return value indicates whether fallback has occured.\n+    // The return value indicates whether fallback has occurred.\n     fn fallback_if_possible(&self, ty: Ty<'tcx>) -> bool {\n         use rustc::ty::error::UnconstrainedNumeric::Neither;\n         use rustc::ty::error::UnconstrainedNumeric::{UnconstrainedInt, UnconstrainedFloat};"}, {"sha": "6af939fcf99b7ec54106d2014f624885d5b6eb7e", "filename": "src/librustc_typeck/check/regionck.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fregionck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fregionck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fregionck.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1284,7 +1284,7 @@ impl<'a, 'gcx, 'tcx> RegionCtxt<'a, 'gcx, 'tcx> {\n         // how all the types get adjusted.)\n         match ref_kind {\n             ty::ImmBorrow => {\n-                // The reference being reborrowed is a sharable ref of\n+                // The reference being reborrowed is a shareable ref of\n                 // type `&'a T`. In this case, it doesn't matter where we\n                 // *found* the `&T` pointer, the memory it references will\n                 // be valid and immutable for `'a`. So we can stop here."}, {"sha": "e87183f847321ee6833e24e048c7980ed48799cc", "filename": "src/librustc_typeck/check/writeback.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fwriteback.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fcheck%2Fwriteback.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fwriteback.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -516,7 +516,7 @@ impl<'cx, 'gcx, 'tcx> WritebackCx<'cx, 'gcx, 'tcx> {\n     }\n \n     fn visit_node_id(&mut self, span: Span, hir_id: hir::HirId) {\n-        // Export associated path extensions and method resultions.\n+        // Export associated path extensions and method resolutions.\n         if let Some(def) = self.fcx\n             .tables\n             .borrow_mut()"}, {"sha": "11260b8f11e12c6a9386e9dad1b224298050a090", "filename": "src/librustc_typeck/impl_wf_check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fimpl_wf_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustc_typeck%2Fimpl_wf_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fimpl_wf_check.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -152,7 +152,7 @@ fn enforce_impl_params_are_constrained<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n     // }\n     // ```\n     //\n-    // In a concession to backwards compatbility, we continue to\n+    // In a concession to backwards compatibility, we continue to\n     // permit those, so long as the lifetimes aren't used in\n     // associated types. I believe this is sound, because lifetimes\n     // used elsewhere are not projected back out."}, {"sha": "de5a680ccf9d1625cede99f4e723100248406739", "filename": "src/librustdoc/clean/auto_trait.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fauto_trait.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -824,7 +824,7 @@ impl<'a, 'tcx, 'rcx, 'cstore> AutoTraitFinder<'a, 'tcx, 'rcx, 'cstore> {\n     // In fact, the iteration of an FxHashMap can even vary between platforms,\n     // since FxHasher has different behavior for 32-bit and 64-bit platforms.\n     //\n-    // Obviously, it's extremely undesireable for documentation rendering\n+    // Obviously, it's extremely undesirable for documentation rendering\n     // to be depndent on the platform it's run on. Apart from being confusing\n     // to end users, it makes writing tests much more difficult, as predicates\n     // can appear in any order in the final result.\n@@ -836,7 +836,7 @@ impl<'a, 'tcx, 'rcx, 'cstore> AutoTraitFinder<'a, 'tcx, 'rcx, 'cstore> {\n     // predicates and bounds, however, we ensure that for a given codebase, all\n     // auto-trait impls always render in exactly the same way.\n     //\n-    // Using the Debug impementation for sorting prevents us from needing to\n+    // Using the Debug implementation for sorting prevents us from needing to\n     // write quite a bit of almost entirely useless code (e.g. how should two\n     // Types be sorted relative to each other). It also allows us to solve the\n     // problem for both WherePredicates and GenericBounds at the same time. This"}, {"sha": "f90f1e54da22c375c4f43559e39e492499295c7e", "filename": "src/librustdoc/clean/cfg.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fclean%2Fcfg.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fclean%2Fcfg.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Fcfg.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -31,7 +31,7 @@ pub enum Cfg {\n     True,\n     /// Denies all configurations.\n     False,\n-    /// A generic configration option, e.g. `test` or `target_os = \"linux\"`.\n+    /// A generic configuration option, e.g. `test` or `target_os = \"linux\"`.\n     Cfg(Symbol, Option<Symbol>),\n     /// Negate a configuration requirement, i.e. `not(x)`.\n     Not(Box<Cfg>),"}, {"sha": "4caea56faad3408ac499dd50bc4dfd913c62ff52", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -315,7 +315,7 @@ pub struct Cache {\n     // the access levels from crateanalysis.\n     pub access_levels: Arc<AccessLevels<DefId>>,\n \n-    /// The version of the crate being documented, if given fron the `--crate-version` flag.\n+    /// The version of the crate being documented, if given from the `--crate-version` flag.\n     pub crate_version: Option<String>,\n \n     // Private fields only used when initially crawling a crate to build a cache"}, {"sha": "70782973e426d2b913d0fe24d54ec97862d19875", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -52,6 +52,8 @@\n \n     var themesWidth = null;\n \n+    var titleBeforeSearch = document.title;\n+\n     if (!String.prototype.startsWith) {\n         String.prototype.startsWith = function(searchString, position) {\n             position = position || 0;\n@@ -267,6 +269,7 @@\n             ev.preventDefault();\n             addClass(search, \"hidden\");\n             removeClass(document.getElementById(\"main\"), \"hidden\");\n+            document.title = titleBeforeSearch;\n         }\n         defocusSearchBar();\n     }"}, {"sha": "9748a5063925bc8d86a9dc2656ca7dfe531d2ac3", "filename": "src/libserialize/collection_impls.rs", "status": "modified", "additions": 15, "deletions": 17, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fcollection_impls.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fcollection_impls.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fcollection_impls.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -17,9 +17,7 @@ use std::collections::{LinkedList, VecDeque, BTreeMap, BTreeSet, HashMap, HashSe\n use std::rc::Rc;\n use std::sync::Arc;\n \n-impl<\n-    T: Encodable\n-> Encodable for LinkedList<T> {\n+impl<T: Encodable> Encodable for LinkedList<T> {\n     fn encode<S: Encoder>(&self, s: &mut S) -> Result<(), S::Error> {\n         s.emit_seq(self.len(), |s| {\n             for (i, e) in self.iter().enumerate() {\n@@ -65,10 +63,10 @@ impl<T:Decodable> Decodable for VecDeque<T> {\n     }\n }\n \n-impl<\n-    K: Encodable + PartialEq + Ord,\n-    V: Encodable\n-> Encodable for BTreeMap<K, V> {\n+impl<K, V> Encodable for BTreeMap<K, V>\n+    where K: Encodable + PartialEq + Ord,\n+          V: Encodable\n+{\n     fn encode<S: Encoder>(&self, e: &mut S) -> Result<(), S::Error> {\n         e.emit_map(self.len(), |e| {\n             let mut i = 0;\n@@ -82,10 +80,10 @@ impl<\n     }\n }\n \n-impl<\n-    K: Decodable + PartialEq + Ord,\n-    V: Decodable\n-> Decodable for BTreeMap<K, V> {\n+impl<K, V> Decodable for BTreeMap<K, V>\n+    where K: Decodable + PartialEq + Ord,\n+          V: Decodable\n+{\n     fn decode<D: Decoder>(d: &mut D) -> Result<BTreeMap<K, V>, D::Error> {\n         d.read_map(|d, len| {\n             let mut map = BTreeMap::new();\n@@ -99,9 +97,9 @@ impl<\n     }\n }\n \n-impl<\n-    T: Encodable + PartialEq + Ord\n-> Encodable for BTreeSet<T> {\n+impl<T> Encodable for BTreeSet<T>\n+    where T: Encodable + PartialEq + Ord\n+{\n     fn encode<S: Encoder>(&self, s: &mut S) -> Result<(), S::Error> {\n         s.emit_seq(self.len(), |s| {\n             let mut i = 0;\n@@ -114,9 +112,9 @@ impl<\n     }\n }\n \n-impl<\n-    T: Decodable + PartialEq + Ord\n-> Decodable for BTreeSet<T> {\n+impl<T> Decodable for BTreeSet<T>\n+    where T: Decodable + PartialEq + Ord\n+{\n     fn decode<D: Decoder>(d: &mut D) -> Result<BTreeSet<T>, D::Error> {\n         d.read_seq(|d, len| {\n             let mut set = BTreeSet::new();"}, {"sha": "e02bc5e1025fd6d9ceffaaff3aaa4d0101ea27b3", "filename": "src/libserialize/leb128.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fleb128.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fleb128.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fleb128.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -118,6 +118,7 @@ pub fn write_signed_leb128_to<W>(mut value: i128, mut write: W)\n     }\n }\n \n+#[inline]\n pub fn write_signed_leb128(out: &mut Vec<u8>, value: i128) {\n     write_signed_leb128_to(value, |v| write_to_vec(out, v))\n }"}, {"sha": "c71f474891131dede6617e443b15b3efd4da1e17", "filename": "src/libserialize/opaque.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fopaque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fopaque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fopaque.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -31,6 +31,7 @@ impl Encoder {\n         self.data\n     }\n \n+    #[inline]\n     pub fn emit_raw_bytes(&mut self, s: &[u8]) {\n         self.data.extend_from_slice(s);\n     }\n@@ -193,6 +194,7 @@ impl<'a> Decoder<'a> {\n         self.position += bytes;\n     }\n \n+    #[inline]\n     pub fn read_raw_bytes(&mut self, s: &mut [u8]) -> Result<(), String> {\n         let start = self.position;\n         let end = start + s.len();\n@@ -326,6 +328,7 @@ impl<'a> serialize::Decoder for Decoder<'a> {\n         Ok(Cow::Borrowed(s))\n     }\n \n+    #[inline]\n     fn error(&mut self, err: &str) -> Self::Error {\n         err.to_string()\n     }"}, {"sha": "60bb5a0fec2cdba8f5b8822af8631cd5f6113205", "filename": "src/libserialize/serialize.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fserialize.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibserialize%2Fserialize.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fserialize.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -119,6 +119,7 @@ pub trait Encoder {\n         self.emit_enum(\"Option\", f)\n     }\n \n+    #[inline]\n     fn emit_option_none(&mut self) -> Result<(), Self::Error> {\n         self.emit_enum_variant(\"None\", 0, 0, |_| Ok(()))\n     }\n@@ -560,14 +561,12 @@ impl< T: Decodable> Decodable for Box<[T]> {\n }\n \n impl<T:Encodable> Encodable for Rc<T> {\n-    #[inline]\n     fn encode<S: Encoder>(&self, s: &mut S) -> Result<(), S::Error> {\n         (**self).encode(s)\n     }\n }\n \n impl<T:Decodable> Decodable for Rc<T> {\n-    #[inline]\n     fn decode<D: Decoder>(d: &mut D) -> Result<Rc<T>, D::Error> {\n         Ok(Rc::new(Decodable::decode(d)?))\n     }\n@@ -618,7 +617,9 @@ impl<'a, T:Encodable> Encodable for Cow<'a, [T]> where [T]: ToOwned<Owned = Vec<\n     }\n }\n \n-impl<T:Decodable+ToOwned> Decodable for Cow<'static, [T]> where [T]: ToOwned<Owned = Vec<T>> {\n+impl<T:Decodable+ToOwned> Decodable for Cow<'static, [T]>\n+    where [T]: ToOwned<Owned = Vec<T>>\n+{\n     fn decode<D: Decoder>(d: &mut D) -> Result<Cow<'static, [T]>, D::Error> {\n         d.read_seq(|d, len| {\n             let mut v = Vec::with_capacity(len);"}, {"sha": "768357ec8dc417e7ea1fedfa4e522dbc2a480009", "filename": "src/libstd/collections/hash/table.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fcollections%2Fhash%2Ftable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fcollections%2Fhash%2Ftable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Ftable.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -234,10 +234,10 @@ fn can_alias_safehash_as_hash() {\n // make a RawBucket point to invalid memory using safe code.\n impl<K, V> RawBucket<K, V> {\n     unsafe fn hash(&self) -> *mut HashUint {\n-        self.hash_start.offset(self.idx as isize)\n+        self.hash_start.add(self.idx)\n     }\n     unsafe fn pair(&self) -> *mut (K, V) {\n-        self.pair_start.offset(self.idx as isize) as *mut (K, V)\n+        self.pair_start.add(self.idx) as *mut (K, V)\n     }\n     unsafe fn hash_pair(&self) -> (*mut HashUint, *mut (K, V)) {\n         (self.hash(), self.pair())"}, {"sha": "cadb5c0ba5d0e019b5a1156512e5c97b1a466cf0", "filename": "src/libstd/future.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Ffuture.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Ffuture.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ffuture.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -88,7 +88,7 @@ where\n /// This function acquires exclusive access to the task context.\n ///\n /// Panics if no task has been set or if the task context has already been\n-/// retrived by a surrounding call to get_task_cx.\n+/// retrieved by a surrounding call to get_task_cx.\n pub fn get_task_cx<F, R>(f: F) -> R\n where\n     F: FnOnce(&mut task::Context) -> R"}, {"sha": "77bc7e946eb41bfd4419ec704c1859c14eced5b8", "filename": "src/libstd/io/buffered.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fio%2Fbuffered.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fio%2Fbuffered.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fbuffered.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -889,7 +889,7 @@ impl<W: Write> Write for LineWriter<W> {\n \n         // Find the last newline character in the buffer provided. If found then\n         // we're going to write all the data up to that point and then flush,\n-        // otherewise we just write the whole block to the underlying writer.\n+        // otherwise we just write the whole block to the underlying writer.\n         let i = match memchr::memrchr(b'\\n', buf) {\n             Some(i) => i,\n             None => return self.inner.write(buf),"}, {"sha": "ade297219d221e73867a081517beff74175fafd6", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -270,7 +270,7 @@\n #![feature(libc)]\n #![feature(link_args)]\n #![feature(linkage)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(needs_panic_runtime)]\n #![feature(never_type)]\n #![cfg_attr(not(stage0), feature(nll))]"}, {"sha": "c28f3da98cea95952d5d94c7cf2a6ba1d1e2c9c7", "filename": "src/libstd/memchr.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fmemchr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fmemchr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fmemchr.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -57,7 +57,7 @@ pub fn memrchr(needle: u8, haystack: &[u8]) -> Option<usize> {\n \n #[cfg(test)]\n mod tests {\n-    // test the implementations for the current plattform\n+    // test the implementations for the current platform\n     use super::{memchr, memrchr};\n \n     #[test]"}, {"sha": "d45a66ef6653257455594c7239fe002bc91acbb9", "filename": "src/libstd/net/ip.rs", "status": "modified", "additions": 5, "deletions": 20, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet%2Fip.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -357,47 +357,38 @@ impl Ipv4Addr {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(ip_constructors)]\n     /// use std::net::Ipv4Addr;\n     ///\n     /// let addr = Ipv4Addr::LOCALHOST;\n     /// assert_eq!(addr, Ipv4Addr::new(127, 0, 0, 1));\n     /// ```\n-    #[unstable(feature = \"ip_constructors\",\n-               reason = \"requires greater scrutiny before stabilization\",\n-               issue = \"44582\")]\n+    #[stable(feature = \"ip_constructors\", since = \"1.30.0\")]\n     pub const LOCALHOST: Self = Ipv4Addr::new(127, 0, 0, 1);\n \n     /// An IPv4 address representing an unspecified address: 0.0.0.0\n     ///\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(ip_constructors)]\n     /// use std::net::Ipv4Addr;\n     ///\n     /// let addr = Ipv4Addr::UNSPECIFIED;\n     /// assert_eq!(addr, Ipv4Addr::new(0, 0, 0, 0));\n     /// ```\n-    #[unstable(feature = \"ip_constructors\",\n-               reason = \"requires greater scrutiny before stabilization\",\n-               issue = \"44582\")]\n+    #[stable(feature = \"ip_constructors\", since = \"1.30.0\")]\n     pub const UNSPECIFIED: Self = Ipv4Addr::new(0, 0, 0, 0);\n \n     /// An IPv4 address representing the broadcast address: 255.255.255.255\n     ///\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(ip_constructors)]\n     /// use std::net::Ipv4Addr;\n     ///\n     /// let addr = Ipv4Addr::BROADCAST;\n     /// assert_eq!(addr, Ipv4Addr::new(255, 255, 255, 255));\n     /// ```\n-    #[unstable(feature = \"ip_constructors\",\n-               reason = \"requires greater scrutiny before stabilization\",\n-               issue = \"44582\")]\n+    #[stable(feature = \"ip_constructors\", since = \"1.30.0\")]\n     pub const BROADCAST: Self = Ipv4Addr::new(255, 255, 255, 255);\n \n     /// Returns the four eight-bit integers that make up this address.\n@@ -896,31 +887,25 @@ impl Ipv6Addr {\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(ip_constructors)]\n     /// use std::net::Ipv6Addr;\n     ///\n     /// let addr = Ipv6Addr::LOCALHOST;\n     /// assert_eq!(addr, Ipv6Addr::new(0, 0, 0, 0, 0, 0, 0, 1));\n     /// ```\n-    #[unstable(feature = \"ip_constructors\",\n-               reason = \"requires greater scrutiny before stabilization\",\n-               issue = \"44582\")]\n+    #[stable(feature = \"ip_constructors\", since = \"1.30.0\")]\n     pub const LOCALHOST: Self = Ipv6Addr::new(0, 0, 0, 0, 0, 0, 0, 1);\n \n     /// An IPv6 address representing the unspecified address: `::`\n     ///\n     /// # Examples\n     ///\n     /// ```\n-    /// #![feature(ip_constructors)]\n     /// use std::net::Ipv6Addr;\n     ///\n     /// let addr = Ipv6Addr::UNSPECIFIED;\n     /// assert_eq!(addr, Ipv6Addr::new(0, 0, 0, 0, 0, 0, 0, 0));\n     /// ```\n-    #[unstable(feature = \"ip_constructors\",\n-               reason = \"requires greater scrutiny before stabilization\",\n-               issue = \"44582\")]\n+    #[stable(feature = \"ip_constructors\", since = \"1.30.0\")]\n     pub const UNSPECIFIED: Self = Ipv6Addr::new(0, 0, 0, 0, 0, 0, 0, 0);\n \n     /// Returns the eight 16-bit segments that make up this address."}, {"sha": "f258ff073e2a7fa390b554bf87c18f317e1e9f93", "filename": "src/libstd/sync/once.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsync%2Fonce.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsync%2Fonce.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fonce.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -176,7 +176,7 @@ impl Once {\n     /// happens-before relation between the closure and code executing after the\n     /// return).\n     ///\n-    /// If the given closure recusively invokes `call_once` on the same `Once`\n+    /// If the given closure recursively invokes `call_once` on the same `Once`\n     /// instance the exact behavior is not specified, allowed outcomes are\n     /// a panic or a deadlock.\n     ///"}, {"sha": "1d5b0cfa94ad549e9252ed00b7fe2a5d9e812b57", "filename": "src/libstd/sys/unix/fs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys%2Funix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ffs.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -857,7 +857,7 @@ pub fn copy(from: &Path, to: &Path) -> io::Result<u64> {\n     use sync::atomic::{AtomicBool, Ordering};\n \n     // Kernel prior to 4.5 don't have copy_file_range\n-    // We store the availability in a global to avoid unneccessary syscalls\n+    // We store the availability in a global to avoid unnecessary syscalls\n     static HAS_COPY_FILE_RANGE: AtomicBool = AtomicBool::new(true);\n \n     unsafe fn copy_file_range("}, {"sha": "8c73fe8c6129f12813d97abee98e8304b28dd287", "filename": "src/libstd/sys/unix/net.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys%2Funix%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys%2Funix%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fnet.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -35,7 +35,7 @@ use libc::SOCK_CLOEXEC;\n #[cfg(not(target_os = \"linux\"))]\n const SOCK_CLOEXEC: c_int = 0;\n \n-// Another conditional contant for name resolution: Macos et iOS use\n+// Another conditional constant for name resolution: Macos et iOS use\n // SO_NOSIGPIPE as a setsockopt flag to disable SIGPIPE emission on socket.\n // Other platforms do otherwise.\n #[cfg(target_vendor = \"apple\")]"}, {"sha": "4b19519a57a876cc94ed430e640e89544833aa46", "filename": "src/libstd/sys/windows/pipe.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Fpipe.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -359,6 +359,6 @@ unsafe fn slice_to_end(v: &mut Vec<u8>) -> &mut [u8] {\n     if v.capacity() == v.len() {\n         v.reserve(1);\n     }\n-    slice::from_raw_parts_mut(v.as_mut_ptr().offset(v.len() as isize),\n+    slice::from_raw_parts_mut(v.as_mut_ptr().add(v.len()),\n                               v.capacity() - v.len())\n }"}, {"sha": "8725abe741679a50da912a28021ba9be6800986d", "filename": "src/libstd/sys_common/wtf8.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys_common%2Fwtf8.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibstd%2Fsys_common%2Fwtf8.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys_common%2Fwtf8.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -772,7 +772,7 @@ pub fn is_code_point_boundary(slice: &Wtf8, index: usize) -> bool {\n pub unsafe fn slice_unchecked(s: &Wtf8, begin: usize, end: usize) -> &Wtf8 {\n     // memory layout of an &[u8] and &Wtf8 are the same\n     Wtf8::from_bytes_unchecked(slice::from_raw_parts(\n-        s.bytes.as_ptr().offset(begin as isize),\n+        s.bytes.as_ptr().add(begin),\n         end - begin\n     ))\n }"}, {"sha": "06e4087171a83fa07deda30fd8707ba234d82572", "filename": "src/libsyntax/ext/expand.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Fexpand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Fexpand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fexpand.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -321,7 +321,7 @@ impl<'a, 'b> MacroExpander<'a, 'b> {\n         // we'll be able to immediately resolve most of imported macros.\n         self.resolve_imports();\n \n-        // Resolve paths in all invocations and produce ouput expanded fragments for them, but\n+        // Resolve paths in all invocations and produce output expanded fragments for them, but\n         // do not insert them into our input AST fragment yet, only store in `expanded_fragments`.\n         // The output fragments also go through expansion recursively until no invocations are left.\n         // Unresolved macros produce dummy outputs as a recovery measure."}, {"sha": "7d98fa661c039f44000a51d6d9d79290ba0d6cad", "filename": "src/libsyntax/ext/tt/macro_parser.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_parser.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -637,7 +637,7 @@ pub fn parse(\n \n     // A queue of possible matcher positions. We initialize it with the matcher position in which\n     // the \"dot\" is before the first token of the first token tree in `ms`. `inner_parse_loop` then\n-    // processes all of these possible matcher positions and produces posible next positions into\n+    // processes all of these possible matcher positions and produces possible next positions into\n     // `next_items`. After some post-processing, the contents of `next_items` replenish `cur_items`\n     // and we start over again.\n     //\n@@ -726,7 +726,7 @@ pub fn parse(\n                 ),\n             );\n         }\n-        // If there are no posible next positions AND we aren't waiting for the black-box parser,\n+        // If there are no possible next positions AND we aren't waiting for the black-box parser,\n         // then their is a syntax error.\n         else if bb_items.is_empty() && next_items.is_empty() {\n             return Failure(parser.span, parser.token);"}, {"sha": "2c738ac2a04cd864db459a93b3e2b4a4ed8a1d87", "filename": "src/libsyntax/ext/tt/macro_rules.rs", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -964,7 +964,7 @@ fn is_legal_fragment_specifier(sess: &ParseSess,\n                                frag_span: Span) -> bool {\n     match frag_name {\n         \"item\" | \"block\" | \"stmt\" | \"expr\" | \"pat\" | \"lifetime\" |\n-        \"path\" | \"ty\" | \"ident\" | \"meta\" | \"tt\" | \"\" => true,\n+        \"path\" | \"ty\" | \"ident\" | \"meta\" | \"tt\" | \"vis\" | \"\" => true,\n         \"literal\" => {\n             if !features.macro_literal_matcher &&\n                !attr::contains_name(attrs, \"allow_internal_unstable\") {\n@@ -977,18 +977,6 @@ fn is_legal_fragment_specifier(sess: &ParseSess,\n             }\n             true\n         },\n-        \"vis\" => {\n-            if !features.macro_vis_matcher &&\n-               !attr::contains_name(attrs, \"allow_internal_unstable\") {\n-                let explain = feature_gate::EXPLAIN_VIS_MATCHER;\n-                emit_feature_err(sess,\n-                                 \"macro_vis_matcher\",\n-                                 frag_span,\n-                                 GateIssue::Language,\n-                                 explain);\n-            }\n-            true\n-        },\n         _ => false,\n     }\n }"}, {"sha": "cc635a29275fabaae849e8b23bb0c44b469add54", "filename": "src/libsyntax/ext/tt/quoted.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Ftt%2Fquoted.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fext%2Ftt%2Fquoted.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fquoted.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -323,7 +323,7 @@ where\n             }\n \n             // `tree` is followed by an `ident`. This could be `$meta_var` or the `$crate` special\n-            // metavariable that names the crate of the invokation.\n+            // metavariable that names the crate of the invocation.\n             Some(tokenstream::TokenTree::Token(ident_span, ref token)) if token.is_ident() => {\n                 let (ident, is_raw) = token.ident().unwrap();\n                 let span = ident_span.with_lo(span.lo());"}, {"sha": "bc36bde5cba07282b84ddbe7c2c8ae1cb07bdb0a", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -342,9 +342,6 @@ declare_features! (\n     // Allows overlapping impls of marker traits\n     (active, overlapping_marker_traits, \"1.18.0\", Some(29864), None),\n \n-    // Allows use of the :vis macro fragment specifier\n-    (active, macro_vis_matcher, \"1.18.0\", Some(41022), None),\n-\n     // rustc internal\n     (active, abi_thiscall, \"1.19.0\", None, None),\n \n@@ -645,6 +642,8 @@ declare_features! (\n     (accepted, repr_transparent, \"1.28.0\", Some(43036), None),\n     // Defining procedural macros in `proc-macro` crates\n     (accepted, proc_macro, \"1.29.0\", Some(38356), None),\n+    // Allows use of the :vis macro fragment specifier\n+    (accepted, macro_vis_matcher, \"1.29.0\", Some(41022), None),\n     // Allows importing and reexporting macros with `use`,\n     // enables macro modularization in general.\n     (accepted, use_extern_macros, \"1.30.0\", Some(35896), None),\n@@ -1362,9 +1361,6 @@ pub const EXPLAIN_DEPR_CUSTOM_DERIVE: &'static str =\n pub const EXPLAIN_DERIVE_UNDERSCORE: &'static str =\n     \"attributes of the form `#[derive_*]` are reserved for the compiler\";\n \n-pub const EXPLAIN_VIS_MATCHER: &'static str =\n-    \":vis fragment specifier is experimental and subject to change\";\n-\n pub const EXPLAIN_LITERAL_MATCHER: &'static str =\n     \":literal fragment specifier is experimental and subject to change\";\n "}, {"sha": "1136cda5ee3597587c3332eb8cede5982f22c217", "filename": "src/libsyntax/parse/mod.rs", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fparse%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fparse%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fmod.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -533,7 +533,7 @@ fn byte_lit(lit: &str) -> (u8, usize) {\n fn byte_str_lit(lit: &str) -> Lrc<Vec<u8>> {\n     let mut res = Vec::with_capacity(lit.len());\n \n-    let error = |i| format!(\"lexer should have rejected {} at {}\", lit, i);\n+    let error = |i| panic!(\"lexer should have rejected {} at {}\", lit, i);\n \n     /// Eat everything up to a non-whitespace\n     fn eat<I: Iterator<Item=(usize, u8)>>(it: &mut iter::Peekable<I>) {\n@@ -552,12 +552,11 @@ fn byte_str_lit(lit: &str) -> Lrc<Vec<u8>> {\n     loop {\n         match chars.next() {\n             Some((i, b'\\\\')) => {\n-                let em = error(i);\n-                match chars.peek().expect(&em).1 {\n+                match chars.peek().unwrap_or_else(|| error(i)).1 {\n                     b'\\n' => eat(&mut chars),\n                     b'\\r' => {\n                         chars.next();\n-                        if chars.peek().expect(&em).1 != b'\\n' {\n+                        if chars.peek().unwrap_or_else(|| error(i)).1 != b'\\n' {\n                             panic!(\"lexer accepted bare CR\");\n                         }\n                         eat(&mut chars);\n@@ -574,8 +573,7 @@ fn byte_str_lit(lit: &str) -> Lrc<Vec<u8>> {\n                 }\n             },\n             Some((i, b'\\r')) => {\n-                let em = error(i);\n-                if chars.peek().expect(&em).1 != b'\\n' {\n+                if chars.peek().unwrap_or_else(|| error(i)).1 != b'\\n' {\n                     panic!(\"lexer accepted bare CR\");\n                 }\n                 chars.next();"}, {"sha": "5467bab33f90dce786bac049579fb585c2fd7bde", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -3535,8 +3535,8 @@ impl<'a> Parser<'a> {\n                         if arm_start_lines.lines[0].end_col == expr_lines.lines[0].end_col\n                             && expr_lines.lines.len() == 2\n                             && self.token == token::FatArrow => {\n-                            // We check wether there's any trailing code in the parse span, if there\n-                            // isn't, we very likely have the following:\n+                            // We check whether there's any trailing code in the parse span,\n+                            // if there isn't, we very likely have the following:\n                             //\n                             // X |     &Y => \"y\"\n                             //   |        --    - missing comma\n@@ -3934,7 +3934,7 @@ impl<'a> Parser<'a> {\n     }\n \n     /// A wrapper around `parse_pat` with some special error handling for the\n-    /// \"top-level\" patterns in a match arm, `for` loop, `let`, &c. (in contast\n+    /// \"top-level\" patterns in a match arm, `for` loop, `let`, &c. (in contrast\n     /// to subpatterns within such).\n     fn parse_top_level_pat(&mut self) -> PResult<'a, P<Pat>> {\n         let pat = self.parse_pat()?;\n@@ -4322,7 +4322,7 @@ impl<'a> Parser<'a> {\n     // If `break_on_semi` is `Break`, then we will stop consuming tokens after\n     // finding (and consuming) a `;` outside of `{}` or `[]` (note that this is\n     // approximate - it can mean we break too early due to macros, but that\n-    // shoud only lead to sub-optimal recovery, not inaccurate parsing).\n+    // should only lead to sub-optimal recovery, not inaccurate parsing).\n     //\n     // If `break_on_block` is `Break`, then we will stop consuming tokens\n     // after finding (and consuming) a brace-delimited block.\n@@ -4887,7 +4887,7 @@ impl<'a> Parser<'a> {\n     fn parse_generic_bounds_common(&mut self, allow_plus: bool) -> PResult<'a, GenericBounds> {\n         let mut bounds = Vec::new();\n         loop {\n-            // This needs to be syncronized with `Token::can_begin_bound`.\n+            // This needs to be synchronized with `Token::can_begin_bound`.\n             let is_bound_start = self.check_path() || self.check_lifetime() ||\n                                  self.check(&token::Question) ||\n                                  self.check_keyword(keywords::For) ||"}, {"sha": "bebf20b1a3855b1ef115b89a52deb244d23ea53e", "filename": "src/libsyntax_ext/format.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax_ext%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax_ext%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_ext%2Fformat.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -117,7 +117,7 @@ struct Context<'a, 'b: 'a> {\n     invalid_refs: Vec<(usize, usize)>,\n     /// Spans of all the formatting arguments, in order.\n     arg_spans: Vec<Span>,\n-    /// Wether this formatting string is a literal or it comes from a macro.\n+    /// Whether this formatting string is a literal or it comes from a macro.\n     is_literal: bool,\n }\n "}, {"sha": "6b4684e14fcfe50d4513bb2b43cb981fa961cb3d", "filename": "src/libsyntax_pos/symbol.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax_pos%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Flibsyntax_pos%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax_pos%2Fsymbol.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -586,7 +586,7 @@ impl InternedString {\n         });\n         // This is safe because the interner keeps string alive until it is dropped.\n         // We can access it because we know the interner is still alive since we use a\n-        // scoped thread local to access it, and it was alive at the begining of this scope\n+        // scoped thread local to access it, and it was alive at the beginning of this scope\n         unsafe { f(&*str) }\n     }\n "}, {"sha": "2951ee4f6c94bf7f56b8efea7df0dd9f9cf58ec4", "filename": "src/test/codegen-units/item-collection/cross-crate-trait-method.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcodegen-units%2Fitem-collection%2Fcross-crate-trait-method.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcodegen-units%2Fitem-collection%2Fcross-crate-trait-method.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen-units%2Fitem-collection%2Fcross-crate-trait-method.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -28,7 +28,7 @@ fn start(_: isize, _: *const *const u8) -> isize {\n     let _: (char, u32) = Trait::without_default_impl(0);\n \n     // Currently, no object code is generated for trait methods with default\n-    // implemenations, unless they are actually called from somewhere. Therefore\n+    // implementations, unless they are actually called from somewhere. Therefore\n     // we cannot import the implementations and have to create our own inline.\n     //~ MONO_ITEM fn cgu_export_trait_method::Trait[0]::with_default_impl[0]<u32>\n     let _ = Trait::with_default_impl(0u32);"}, {"sha": "c965a3ed86c82d7336d47961b9a95f69935d4f84", "filename": "src/test/compile-fail-fulldeps/auxiliary/lint_for_crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_for_crate.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar, rustc_private)]\n #![feature(box_syntax)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n #[macro_use] extern crate rustc;"}, {"sha": "8ccb5878c40456d449fb746836dc5697124f083f", "filename": "src/test/compile-fail-fulldeps/auxiliary/lint_group_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n // Load rustc as a plugin to get macros"}, {"sha": "315dad7eea515279f0aa1d06b15ba5ea2ded568b", "filename": "src/test/compile-fail-fulldeps/auxiliary/lint_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Flint_plugin_test.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "f46d906d865a8bccdeb87282d2610b0fd47d7b0b", "filename": "src/test/compile-fail-fulldeps/auxiliary/pub_and_stability.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Fpub_and_stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Fpub_and_stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail-fulldeps%2Fauxiliary%2Fpub_and_stability.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // This crate attempts to enumerate the various scenarios for how a\n-// type can define fields and methods with various visiblities and\n+// type can define fields and methods with various visibilities and\n // stabilities.\n //\n // The basic stability pattern in this file has four cases:\n@@ -23,7 +23,7 @@\n //\n // However, since stability attributes can only be observed in\n // cross-crate linkage scenarios, there is little reason to take the\n-// cross-product (4 stability cases * 4 visiblity cases), because the\n+// cross-product (4 stability cases * 4 visibility cases), because the\n // first three visibility cases cannot be accessed outside this crate,\n // and therefore stability is only relevant when the visibility is pub\n // to the whole universe."}, {"sha": "c7d5574f909f208f3a959a24a04b881ea6e347c1", "filename": "src/test/run-fail/run-unexported-tests.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-fail%2Frun-unexported-tests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-fail%2Frun-unexported-tests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-fail%2Frun-unexported-tests.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// error-pattern:runned an unexported test\n+// error-pattern:ran an unexported test\n // compile-flags:--test\n // check-stdout\n \n@@ -17,6 +17,6 @@ mod m {\n \n     #[test]\n     fn unexported() {\n-        panic!(\"runned an unexported test\");\n+        panic!(\"ran an unexported test\");\n     }\n }"}, {"sha": "3412c8ce1f5820b3d5e7c9ecf6b230d300c9ef68", "filename": "src/test/run-make-fulldeps/hir-tree/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Fhir-tree%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Fhir-tree%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhir-tree%2FMakefile?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,6 +1,6 @@\n -include ../tools.mk\n \n-# Test that hir-tree output doens't crash and includes\n+# Test that hir-tree output doesn't crash and includes\n # the string constant we would expect to see.\n \n all:"}, {"sha": "b669f9cedc1e9d485fb40429dc869a04e9c7a8ce", "filename": "src/test/run-make-fulldeps/rustdoc-error-lines/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Frustdoc-error-lines%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Frustdoc-error-lines%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Frustdoc-error-lines%2FMakefile?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,6 +1,6 @@\n -include ../tools.mk\n \n-# Test that hir-tree output doens't crash and includes\n+# Test that hir-tree output doesn't crash and includes\n # the string constant we would expect to see.\n \n all:"}, {"sha": "4b7fece36d92a9e386ce14707ec2657b7a1a7688", "filename": "src/test/run-make-fulldeps/sanitizer-cdylib-link/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-cdylib-link%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-cdylib-link%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-cdylib-link%2FMakefile?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -3,7 +3,7 @@\n LOG := $(TMPDIR)/log.txt\n \n # This test builds a shared object, then an executable that links it as a native\n-# rust library (constrast to an rlib). The shared library and executable both\n+# rust library (contrast to an rlib). The shared library and executable both\n # are compiled with address sanitizer, and we assert that a fault in the cdylib\n # is correctly detected.\n "}, {"sha": "97f617214222427b86312ac3105a38c544af6fe1", "filename": "src/test/run-make-fulldeps/sanitizer-dylib-link/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-dylib-link%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-dylib-link%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fsanitizer-dylib-link%2FMakefile?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -3,7 +3,7 @@\n LOG := $(TMPDIR)/log.txt\n \n # This test builds a shared object, then an executable that links it as a native\n-# rust library (constrast to an rlib). The shared library and executable both\n+# rust library (contrast to an rlib). The shared library and executable both\n # are compiled with address sanitizer, and we assert that a fault in the dylib\n # is correctly detected.\n "}, {"sha": "601003827c6a287a463e193bda77647ff4274a62", "filename": "src/test/run-pass-fulldeps/auxiliary/lint_for_crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint_for_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fauxiliary%2Flint_for_crate.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar, rustc_private)]\n #![feature(box_syntax)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n #[macro_use] extern crate rustc;"}, {"sha": "adcd2d605e3ce2a48f762e717ec05ff0fa4d3a94", "filename": "src/test/run-pass-fulldeps/proc-macro/auxiliary/issue-40001-plugin.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fissue-40001-plugin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fissue-40001-plugin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fissue-40001-plugin.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n #![feature(box_syntax, plugin, plugin_registrar, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n #![crate_type = \"dylib\"]\n "}, {"sha": "5f915a762d1492e4eecc3582b6c12a50c6f7a79b", "filename": "src/test/run-pass/dropck_legal_cycles.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fdropck_legal_cycles.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fdropck_legal_cycles.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fdropck_legal_cycles.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -385,7 +385,7 @@ pub fn main() {\n     // RwLock (since we can grab the child pointers in read-only\n     // mode), but we cannot lock a std::sync::Mutex to guard reading\n     // from each node via the same pattern, since once you hit the\n-    // cycle, you'll be trying to acquring the same lock twice.\n+    // cycle, you'll be trying to acquiring the same lock twice.\n     // (We deal with this by exiting the traversal early if try_lock fails.)\n \n     // Cycle 12: { arc0 -> (arc1, arc2), arc1 -> (), arc2 -> arc0 }, refcells"}, {"sha": "37436d7ae0042cbeda01beabee0e88871dd6234e", "filename": "src/test/run-pass/ifmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fifmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fifmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fifmt.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -310,7 +310,7 @@ fn test_order() {\n }\n \n fn test_once() {\n-    // Make sure each argument are evaluted only once even though it may be\n+    // Make sure each argument are evaluated only once even though it may be\n     // formatted multiple times\n     fn foo() -> isize {\n         static mut FOO: isize = 0;"}, {"sha": "04ffad501b042e406ee2bb75d308c25bb4f64e3e", "filename": "src/test/run-pass/issue-15881-model-lexer-dotdotdot.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-15881-model-lexer-dotdotdot.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-15881-model-lexer-dotdotdot.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-15881-model-lexer-dotdotdot.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -27,7 +27,7 @@ pub fn main() {\n     }\n     match 'c' {\n       'a'...'z' => {}\n-      _ => panic!(\"should suppport char ranges\")\n+      _ => panic!(\"should support char ranges\")\n     }\n     match -3_isize {\n       -7...5 => {}"}, {"sha": "5727f54cd7046db4228cf73d46c6a9079939de36", "filename": "src/test/run-pass/issue-20616.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-20616.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-20616.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-20616.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -26,7 +26,7 @@ type TypeD = TypeA<'static>;\n // trailing comma on lifetime bounds\n type TypeE = TypeA<'static,>;\n \n-// normal type arugment\n+// normal type argument\n type TypeF<T> = Box<T>;\n \n // type argument with trailing comma"}, {"sha": "3bc0f7a0fdee8f3eae3b733dbeec64f33a451f13", "filename": "src/test/run-pass/issue-33903.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-33903.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-33903.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-33903.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -11,7 +11,7 @@\n // Issue 33903:\n // Built-in indexing should be used even when the index is not\n // trivially an integer\n-// Only built-in indexing can be used in constant expresssions\n+// Only built-in indexing can be used in constant expressions\n \n const FOO: i32 = [12, 34][0 + 1];\n "}, {"sha": "46aeb329c896babd7e83b4b40b91acc4888541b2", "filename": "src/test/run-pass/issue-48962.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-48962.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fissue-48962.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-48962.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Test that we are able to reinitilize box with moved referent\n+// Test that we are able to reinitialize box with moved referent\n #![feature(nll)]\n static mut ORDER: [usize; 3] = [0, 0, 0];\n static mut INDEX: usize = 0;"}, {"sha": "9216040ab6ec892b7c7b5f500aedf768d6c757dd", "filename": "src/test/run-pass/macro-first-set.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmacro-first-set.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmacro-first-set.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-first-set.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n //{{{ issue 40569 ==============================================================\n "}, {"sha": "db8331358b96e31ddcfd084830f11bfe897f4e9d", "filename": "src/test/run-pass/macro-pub-matcher.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmacro-pub-matcher.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmacro-pub-matcher.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-pub-matcher.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -9,7 +9,8 @@\n // except according to those terms.\n \n #![allow(dead_code, unused_imports)]\n-#![feature(macro_vis_matcher, crate_visibility_modifier)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n+#![feature(crate_visibility_modifier)]\n \n /**\n Ensure that `:vis` matches can be captured in existing positions, and passed"}, {"sha": "efa725321967d20ca603d11fb131fd4ace262ebe", "filename": "src/test/run-pass/match-range.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmatch-range.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmatch-range.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmatch-range.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -34,7 +34,7 @@ pub fn main() {\n     }\n     match 'c' {\n       'a'..='z' => {}\n-      _ => panic!(\"should suppport char ranges\")\n+      _ => panic!(\"should support char ranges\")\n     }\n     match -3 {\n       -7..=5 => {}"}, {"sha": "bedcee43db5ba511a9ff54822257f843198eef7d", "filename": "src/test/run-pass/match-reassign.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmatch-reassign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmatch-reassign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmatch-reassign.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // Regression test for #23698: The reassignment checker only cared\n-// about the last assigment in a match arm body\n+// about the last assignment in a match arm body\n \n // Use an extra function to make sure no extra assignments\n // are introduced by macros in the match statement"}, {"sha": "220482f57eb01052b9f991574cdbdb8bfd9e72b7", "filename": "src/test/run-pass/method-mut-self-modifies-mut-slice-lvalue.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmethod-mut-self-modifies-mut-slice-lvalue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fmethod-mut-self-modifies-mut-slice-lvalue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmethod-mut-self-modifies-mut-slice-lvalue.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -27,7 +27,7 @@ impl<'a> MyWriter for &'a mut [u8] {\n         let write_len = buf.len();\n         unsafe {\n             *self = slice::from_raw_parts_mut(\n-                self.as_mut_ptr().offset(write_len as isize),\n+                self.as_mut_ptr().add(write_len),\n                 self.len() - write_len\n             );\n         }"}, {"sha": "9d23a0c71489a8187e19522111d07c585a3f55a0", "filename": "src/test/run-pass/packed-struct-optimized-enum.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fpacked-struct-optimized-enum.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fpacked-struct-optimized-enum.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fpacked-struct-optimized-enum.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -26,7 +26,7 @@ fn sanity_check_size<T: Copy>(one: T) {\n \n fn main() {\n     // This can fail if rustc and LLVM disagree on the size of a type.\n-    // In this case, `Option<Packed<(&(), u32)>>` was erronously not\n+    // In this case, `Option<Packed<(&(), u32)>>` was erroneously not\n     // marked as packed despite needing alignment `1` and containing\n     // its `&()` discriminant, which has alignment larger than `1`.\n     sanity_check_size((Some(Packed((&(), 0))), true));"}, {"sha": "c4cae1e1d611d6bfa2f132241cf26db3b928bc34", "filename": "src/test/run-pass/realloc-16687.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Frealloc-16687.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Frealloc-16687.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frealloc-16687.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -37,8 +37,8 @@ unsafe fn test_triangle() -> bool {\n         for i in 0..COUNT / 2 {\n             let (p0, p1, size) = (ascend[2*i], ascend[2*i+1], idx_to_size(i));\n             for j in 0..size {\n-                assert_eq!(*p0.offset(j as isize), i as u8);\n-                assert_eq!(*p1.offset(j as isize), i as u8);\n+                assert_eq!(*p0.add(j), i as u8);\n+                assert_eq!(*p1.add(j), i as u8);\n             }\n         }\n     }\n@@ -100,8 +100,8 @@ unsafe fn test_triangle() -> bool {\n     for i in 0..COUNT / 2 {\n         let (p0, p1, size) = (ascend[2*i], ascend[2*i+1], idx_to_size(i));\n         for j in 0..size {\n-            *p0.offset(j as isize) = i as u8;\n-            *p1.offset(j as isize) = i as u8;\n+            *p0.add(j) = i as u8;\n+            *p1.add(j) = i as u8;\n         }\n     }\n "}, {"sha": "d349519478ae403891a6308cdda9d7fa95e67fb6", "filename": "src/test/run-pass/running-with-no-runtime.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Frunning-with-no-runtime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Frunning-with-no-runtime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frunning-with-no-runtime.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -36,7 +36,7 @@ fn start(argc: isize, argv: *const *const u8) -> isize {\n \n     let args = unsafe {\n         (0..argc as usize).map(|i| {\n-            let ptr = *argv.offset(i as isize) as *const _;\n+            let ptr = *argv.add(i) as *const _;\n             CStr::from_ptr(ptr).to_bytes().to_vec()\n         }).collect::<Vec<_>>()\n     };"}, {"sha": "ad099f82d13b97ffec795ccb46839952f3ecc040", "filename": "src/test/run-pass/signal-alternate-stack-cleanup.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fsignal-alternate-stack-cleanup.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frun-pass%2Fsignal-alternate-stack-cleanup.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fsignal-alternate-stack-cleanup.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -33,7 +33,7 @@ extern fn send_signal() {\n \n fn main() {\n     unsafe {\n-        // Install signal hander that runs on alternate signal stack.\n+        // Install signal handler that runs on alternate signal stack.\n         let mut action: sigaction = std::mem::zeroed();\n         action.sa_flags = (SA_ONSTACK | SA_SIGINFO) as _;\n         action.sa_sigaction = signal_handler as sighandler_t;"}, {"sha": "3fce62529c78f348bce7b88e62a21cfe6a032af0", "filename": "src/test/rustdoc/inline_cross/auxiliary/macro-vis.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frustdoc%2Finline_cross%2Fauxiliary%2Fmacro-vis.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Frustdoc%2Finline_cross%2Fauxiliary%2Fmacro-vis.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Finline_cross%2Fauxiliary%2Fmacro-vis.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -10,7 +10,7 @@\n \n #![crate_name = \"qwop\"]\n \n-/// (writen on a spider's web) Some Macro\n+/// (written on a spider's web) Some Macro\n #[macro_export]\n macro_rules! some_macro {\n     () => {"}, {"sha": "8ccb5878c40456d449fb746836dc5697124f083f", "filename": "src/test/ui-fulldeps/auxiliary/lint_group_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_group_plugin_test.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n // Load rustc as a plugin to get macros"}, {"sha": "315dad7eea515279f0aa1d06b15ba5ea2ded568b", "filename": "src/test/ui-fulldeps/auxiliary/lint_plugin_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_plugin_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_plugin_test.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "d7895bd8781ba02b83fcb3eb45031184e3361373", "filename": "src/test/ui-fulldeps/auxiliary/lint_tool_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -10,7 +10,7 @@\n \n #![feature(plugin_registrar)]\n #![feature(box_syntax, rustc_private)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n #![feature(macro_at_most_once_rep)]\n \n extern crate syntax;"}, {"sha": "9f1df14605b693440d1ce15179fa50f3b17e359a", "filename": "src/test/ui/associated-types/associated-types-incomplete-object.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fassociated-types%2Fassociated-types-incomplete-object.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Check that the user gets an errror if they omit a binding from an\n+// Check that the user gets an error if they omit a binding from an\n // object type.\n \n pub trait Foo {"}, {"sha": "5ed425e958a584aa720929f113881be2e91e615b", "filename": "src/test/ui/borrowck/issue-45983.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fborrowck%2Fissue-45983.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fborrowck%2Fissue-45983.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-45983.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -19,7 +19,7 @@\n // revisions: ast migrate nll\n \n // Since we are testing nll (and migration) explicitly as a separate\n-// revisions, dont worry about the --compare-mode=nll on this test.\n+// revisions, don't worry about the --compare-mode=nll on this test.\n \n // ignore-compare-mode-nll\n "}, {"sha": "ff52948ca8559f6482cc965c8de3ca399541a576", "filename": "src/test/ui/closure-expected.rs", "status": "renamed", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fclosure-expected.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fclosure-expected.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosure-expected.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,4 +1,4 @@\n-// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n // file at the top-level directory of this distribution and at\n // http://rust-lang.org/COPYRIGHT.\n //\n@@ -8,12 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Test that the MSP430 interrupt ABI cannot be used when msp430_interrupt\n-// feature gate is not used.\n-\n-macro_rules! m { ($v:vis) => {} }\n-//~^ ERROR :vis fragment specifier is experimental and subject to change\n-\n fn main() {\n-    m!(pub);\n+    let x = Some(1);\n+    let y = x.or_else(4);\n+    //~^ ERROR expected a `std::ops::FnOnce<()>` closure, found `{integer}`\n }", "previous_filename": "src/test/ui/feature-gates/feature-gate-macro-vis-matcher.rs"}, {"sha": "0da506b5b8139262e7c7621312a6d5d0ae913c28", "filename": "src/test/ui/closure-expected.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fclosure-expected.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fclosure-expected.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fclosure-expected.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -0,0 +1,12 @@\n+error[E0277]: expected a `std::ops::FnOnce<()>` closure, found `{integer}`\n+  --> $DIR/closure-expected.rs:13:15\n+   |\n+LL |     let y = x.or_else(4);\n+   |               ^^^^^^^ expected an `FnOnce<()>` closure, found `{integer}`\n+   |\n+   = help: the trait `std::ops::FnOnce<()>` is not implemented for `{integer}`\n+   = note: wrap the `{integer}` in a closure with no arguments: `|| { /* code */ }\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}, {"sha": "900847767e1ba14f7dd31fe96a696763ba27800c", "filename": "src/test/ui/consts/const-eval/issue-53157.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-53157.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-53157.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fissue-53157.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "previous_filename": "src/test/ui/const-eval/issue-53157.rs"}, {"sha": "b53ef0f5ba823986f5ec9f80a7f04eae2a137a92", "filename": "src/test/ui/defaulted-never-note.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fdefaulted-never-note.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fdefaulted-never-note.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdefaulted-never-note.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// We need to opt inot the `!` feature in order to trigger the\n+// We need to opt into the `!` feature in order to trigger the\n // requirement that this is testing.\n #![feature(never_type)]\n "}, {"sha": "b088e8330e998dfeed32b00701f141e85cc40255", "filename": "src/test/ui/error-codes/E0401.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Ferror-codes%2FE0401.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Ferror-codes%2FE0401.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0401.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -24,7 +24,7 @@ error[E0401]: can't use type parameters from outer function\n   --> $DIR/E0401.rs:32:25\n    |\n LL | impl<T> Iterator for A<T> {\n-   | ---- `Self` type implicitely declared here, on the `impl`\n+   | ---- `Self` type implicitly declared here, on the `impl`\n ...\n LL |         fn helper(sel: &Self) -> u8 { //~ ERROR E0401\n    |            ------       ^^^^ use of type variable from outer function"}, {"sha": "ea313385c10185caf87aecdc37ee3de8b93c8559", "filename": "src/test/ui/extern/extern-wrong-value-type.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fextern%2Fextern-wrong-value-type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fextern%2Fextern-wrong-value-type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fextern%2Fextern-wrong-value-type.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -17,5 +17,5 @@ fn main() {\n     // extern functions are extern \"C\" fn\n     let _x: extern \"C\" fn() = f; // OK\n     is_fn(f);\n-    //~^ ERROR `extern \"C\" fn() {f}: std::ops::Fn<()>` is not satisfied\n+    //~^ ERROR expected a `std::ops::Fn<()>` closure, found `extern \"C\" fn() {f}`\n }"}, {"sha": "0d8185839ccb47b380e556df6fa3d5b84d307907", "filename": "src/test/ui/extern/extern-wrong-value-type.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fextern%2Fextern-wrong-value-type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fextern%2Fextern-wrong-value-type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fextern%2Fextern-wrong-value-type.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,9 +1,11 @@\n-error[E0277]: the trait bound `extern \"C\" fn() {f}: std::ops::Fn<()>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<()>` closure, found `extern \"C\" fn() {f}`\n   --> $DIR/extern-wrong-value-type.rs:19:5\n    |\n LL |     is_fn(f);\n-   |     ^^^^^ the trait `std::ops::Fn<()>` is not implemented for `extern \"C\" fn() {f}`\n+   |     ^^^^^ expected an `Fn<()>` closure, found `extern \"C\" fn() {f}`\n    |\n+   = help: the trait `std::ops::Fn<()>` is not implemented for `extern \"C\" fn() {f}`\n+   = note: wrap the `extern \"C\" fn() {f}` in a closure with no arguments: `|| { /* code */ }\n note: required by `is_fn`\n   --> $DIR/extern-wrong-value-type.rs:14:1\n    |"}, {"sha": "9d98091674e76fc55e8b3d9ffceb8e9a38483dbf", "filename": "src/test/ui/feature-gates/feature-gate-macro-vis-matcher.stderr", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/a9d496796f091f42c8bac60c5c9ca05e6ca5dcda/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a9d496796f091f42c8bac60c5c9ca05e6ca5dcda/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gates%2Ffeature-gate-macro-vis-matcher.stderr?ref=a9d496796f091f42c8bac60c5c9ca05e6ca5dcda", "patch": "@@ -1,11 +0,0 @@\n-error[E0658]: :vis fragment specifier is experimental and subject to change (see issue #41022)\n-  --> $DIR/feature-gate-macro-vis-matcher.rs:14:19\n-   |\n-LL | macro_rules! m { ($v:vis) => {} }\n-   |                   ^^^^^^\n-   |\n-   = help: add #![feature(macro_vis_matcher)] to the crate attributes to enable\n-\n-error: aborting due to previous error\n-\n-For more information about this error, try `rustc --explain E0658`."}, {"sha": "ac7b0a609846281197761aacb176cf6efff8529a", "filename": "src/test/ui/fn/fn-trait-formatting.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Ffn%2Ffn-trait-formatting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Ffn%2Ffn-trait-formatting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffn%2Ffn-trait-formatting.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -27,5 +27,5 @@ fn main() {\n     //~| found type `std::boxed::Box<dyn std::ops::FnMut() -> isize>`\n \n     needs_fn(1);\n-    //~^ ERROR : std::ops::Fn<(isize,)>`\n+    //~^ ERROR expected a `std::ops::Fn<(isize,)>` closure, found `{integer}`\n }"}, {"sha": "198b343cdd3e76481ef3db3bed0a98de1059825f", "filename": "src/test/ui/fn/fn-trait-formatting.stderr", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Ffn%2Ffn-trait-formatting.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Ffn%2Ffn-trait-formatting.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffn%2Ffn-trait-formatting.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -25,15 +25,13 @@ LL |     let _: () = (box || -> isize { unimplemented!() }) as Box<FnMut() -> is\n    = note: expected type `()`\n               found type `std::boxed::Box<dyn std::ops::FnMut() -> isize>`\n \n-error[E0277]: the trait bound `{integer}: std::ops::Fn<(isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<(isize,)>` closure, found `{integer}`\n   --> $DIR/fn-trait-formatting.rs:29:5\n    |\n LL |     needs_fn(1);\n-   |     ^^^^^^^^ the trait `std::ops::Fn<(isize,)>` is not implemented for `{integer}`\n+   |     ^^^^^^^^ expected an `Fn<(isize,)>` closure, found `{integer}`\n    |\n-   = help: the following implementations were found:\n-             <&'a F as std::ops::Fn<A>>\n-             <core::str::LinesAnyMap as std::ops::Fn<(&'a str,)>>\n+   = help: the trait `std::ops::Fn<(isize,)>` is not implemented for `{integer}`\n note: required by `needs_fn`\n   --> $DIR/fn-trait-formatting.rs:13:1\n    |"}, {"sha": "1ae7ed268ebf8567745f4806e8ec4407e61c9e0b", "filename": "src/test/ui/imports/local-modularized-tricky-fail-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fimports%2Flocal-modularized-tricky-fail-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fimports%2Flocal-modularized-tricky-fail-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimports%2Flocal-modularized-tricky-fail-2.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// `#[macro_export] macro_rules` that doen't originate from macro expansions can be placed\n+// `#[macro_export] macro_rules` that doesn't originate from macro expansions can be placed\n // into the root module soon enough to act as usual items and shadow globs and preludes.\n \n #![feature(decl_macro)]"}, {"sha": "2708de2c13a8fc185408a838cdad805c590489b6", "filename": "src/test/ui/issues/issue-22034.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-22034.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-22034.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-22034.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -16,6 +16,6 @@ fn main() {\n     let ptr: *mut () = 0 as *mut _;\n     let _: &mut Fn() = unsafe {\n         &mut *(ptr as *mut Fn())\n-        //~^ ERROR `(): std::ops::Fn<()>` is not satisfied\n+        //~^ ERROR expected a `std::ops::Fn<()>` closure, found `()`\n     };\n }"}, {"sha": "da376fedbb98af5313eadeac191d0794e19e2100", "filename": "src/test/ui/issues/issue-22034.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-22034.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-22034.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-22034.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,9 +1,11 @@\n-error[E0277]: the trait bound `(): std::ops::Fn<()>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<()>` closure, found `()`\n   --> $DIR/issue-22034.rs:18:16\n    |\n LL |         &mut *(ptr as *mut Fn())\n-   |                ^^^ the trait `std::ops::Fn<()>` is not implemented for `()`\n+   |                ^^^ expected an `Fn<()>` closure, found `()`\n    |\n+   = help: the trait `std::ops::Fn<()>` is not implemented for `()`\n+   = note: wrap the `()` in a closure with no arguments: `|| { /* code */ }\n    = note: required for the cast to the object type `dyn std::ops::Fn()`\n \n error: aborting due to previous error"}, {"sha": "0418933180c00b97dbd96bafb89cf62f1d711370", "filename": "src/test/ui/issues/issue-23966.stderr", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-23966.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-23966.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-23966.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,8 +1,10 @@\n-error[E0277]: the trait bound `(): std::ops::FnMut<(_, char)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnMut<(_, char)>` closure, found `()`\n   --> $DIR/issue-23966.rs:12:16\n    |\n LL |     \"\".chars().fold(|_, _| (), ());\n-   |                ^^^^ the trait `std::ops::FnMut<(_, char)>` is not implemented for `()`\n+   |                ^^^^ expected an `FnMut<(_, char)>` closure, found `()`\n+   |\n+   = help: the trait `std::ops::FnMut<(_, char)>` is not implemented for `()`\n \n error: aborting due to previous error\n "}, {"sha": "418754b9a244676ad096606bcb66babe270fb019", "filename": "src/test/ui/issues/issue-31845.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-31845.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-31845.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-31845.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Checks lexical scopes cannot see through normal module boundries\n+// Checks lexical scopes cannot see through normal module boundaries\n \n fn f() {\n     fn g() {}"}, {"sha": "dd53a1c71a5bce538a8474502bc15c60457d5957", "filename": "src/test/ui/issues/issue-42755.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-42755.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-42755.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-42755.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n macro_rules! foo {\n     ($($p:vis)*) => {} //~ ERROR repetition matches empty token tree"}, {"sha": "8624dbd28dceb4b4764bbbe55ef50daf7ec61b4c", "filename": "src/test/ui/issues/issue-45696-no-variant-box-recur.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-45696-no-variant-box-recur.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-45696-no-variant-box-recur.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-45696-no-variant-box-recur.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -24,7 +24,7 @@\n \n // run-pass\n \n-// This test has structs and functions that are by definiton unusable\n+// This test has structs and functions that are by definition unusable\n // all over the place, so just go ahead and allow dead_code\n #![allow(dead_code)]\n "}, {"sha": "6c87d520934735432822a867f2d60369ae69062e", "filename": "src/test/ui/issues/issue-50761.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-50761.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fissues%2Fissue-50761.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-50761.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// Confirm that we don't accidently divide or mod by zero in llvm_type\n+// Confirm that we don't accidentally divide or mod by zero in llvm_type\n \n // compile-pass\n "}, {"sha": "8315104d37ff41d41f55409a7b35f145b3a18bba", "filename": "src/test/ui/label/label_break_value_illegal_uses.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flabel%2Flabel_break_value_illegal_uses.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flabel%2Flabel_break_value_illegal_uses.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flabel%2Flabel_break_value_illegal_uses.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -10,7 +10,7 @@\n \n #![feature(label_break_value)]\n \n-// These are forbidden occurences of label-break-value\n+// These are forbidden occurrences of label-break-value\n \n fn labeled_unsafe() {\n     unsafe 'b: {} //~ ERROR expected one of `extern`, `fn`, or `{`"}, {"sha": "6b0ca2ce9e00402842501ff435f817e481e5b1ab", "filename": "src/test/ui/lifetimes/lifetime-errors/liveness-assign-imm-local-notes.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fliveness-assign-imm-local-notes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fliveness-assign-imm-local-notes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetimes%2Flifetime-errors%2Fliveness-assign-imm-local-notes.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -9,8 +9,8 @@\n // except according to those terms.\n \n // FIXME: Change to UI Test\n-// Check notes are placed on an assignment that can actually precede the current assigmnent\n-// Don't emmit a first assignment for assignment in a loop.\n+// Check notes are placed on an assignment that can actually precede the current assignment\n+// Don't emit a first assignment for assignment in a loop.\n \n // compile-flags: -Zborrowck=compare\n "}, {"sha": "4ef185ee71c5ae2be5076b094f1489ac13f9562e", "filename": "src/test/ui/lint/lint-unused-extern-crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flint%2Flint-unused-extern-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flint%2Flint-unused-extern-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unused-extern-crate.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -35,7 +35,7 @@ use lint_unused_extern_crate2::foo as bar;\n use other::*;\n \n mod foo {\n-    // Test that this is unused even though an earler `extern crate` is used.\n+    // Test that this is unused even though an earlier `extern crate` is used.\n     extern crate lint_unused_extern_crate2; //~ ERROR unused extern crate\n }\n "}, {"sha": "0089617b11c0b9a84e1c3f5db6b8731694185a69", "filename": "src/test/ui/lint/unreachable_pub-pub_crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flint%2Funreachable_pub-pub_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flint%2Funreachable_pub-pub_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funreachable_pub-pub_crate.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -16,7 +16,7 @@\n \n // compile-pass\n \n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n #![allow(unused)]\n #![warn(unreachable_pub)]"}, {"sha": "7fd4a901090711bcfaf666bf456533ca5d9128a3", "filename": "src/test/ui/lint/unreachable_pub.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flint%2Funreachable_pub.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Flint%2Funreachable_pub.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Funreachable_pub.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -11,7 +11,7 @@\n // compile-pass\n \n #![feature(crate_visibility_modifier)]\n-#![feature(macro_vis_matcher)]\n+#![cfg_attr(stage0, feature(macro_vis_matcher))]\n \n #![allow(unused)]\n #![warn(unreachable_pub)]"}, {"sha": "ddc6a29a8f0bdd33bc08a9b2ed75fa539c04b3ce", "filename": "src/test/ui/rfc1598-generic-associated-types/shadowing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Frfc1598-generic-associated-types%2Fshadowing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Frfc1598-generic-associated-types%2Fshadowing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc1598-generic-associated-types%2Fshadowing.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -11,7 +11,7 @@\n #![feature(generic_associated_types)]\n \n //FIXME(#44265): The lifetime shadowing and type parameter shadowing\n-// should cause an error. Now it compiles (errorneously) and this will be addressed\n+// should cause an error. Now it compiles (erroneously) and this will be addressed\n // by a future PR. Then remove the following:\n // compile-pass\n "}, {"sha": "9a046bc6952b39157b306e08ea70fdf884e2e427", "filename": "src/test/ui/rust-2018/async-ident-allowed.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Frust-2018%2Fasync-ident-allowed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Frust-2018%2Fasync-ident-allowed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Fasync-ident-allowed.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -12,7 +12,7 @@\n \n #![deny(rust_2018_compatibility)]\n \n-// Don't make a suggestion for a raw identifer replacement unless raw\n+// Don't make a suggestion for a raw identifier replacement unless raw\n // identifiers are enabled.\n \n fn main() {"}, {"sha": "81adf89fd4330a46df5eba03d52fcc0edcc6e4e1", "filename": "src/test/ui/single-use-lifetime/two-uses-in-fn-arguments.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fsingle-use-lifetime%2Ftwo-uses-in-fn-arguments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fsingle-use-lifetime%2Ftwo-uses-in-fn-arguments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsingle-use-lifetime%2Ftwo-uses-in-fn-arguments.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // Test that we DO NOT warn when lifetime name is used multiple\n-// argments, or more than once in a single argument.\n+// arguments, or more than once in a single argument.\n //\n // compile-pass\n "}, {"sha": "e5e66efcaa2ced9cd2b62c7010e0ad72c03c48ab", "filename": "src/test/ui/unboxed-closures/unboxed-closures-fnmut-as-fn.stderr", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-fnmut-as-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-fnmut-as-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-fnmut-as-fn.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,9 +1,10 @@\n-error[E0277]: the trait bound `S: std::ops::Fn<(isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<(isize,)>` closure, found `S`\n   --> $DIR/unboxed-closures-fnmut-as-fn.rs:38:13\n    |\n LL |     let x = call_it(&S, 22);\n-   |             ^^^^^^^ the trait `std::ops::Fn<(isize,)>` is not implemented for `S`\n+   |             ^^^^^^^ expected an `Fn<(isize,)>` closure, found `S`\n    |\n+   = help: the trait `std::ops::Fn<(isize,)>` is not implemented for `S`\n note: required by `call_it`\n   --> $DIR/unboxed-closures-fnmut-as-fn.rs:33:1\n    |"}, {"sha": "7c76c10443af91763ee0c6e454b9f7236cd3e7f6", "filename": "src/test/ui/unboxed-closures/unboxed-closures-unsafe-extern-fn.stderr", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-unsafe-extern-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-unsafe-extern-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-unsafe-extern-fn.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,33 +1,36 @@\n-error[E0277]: the trait bound `for<'r> for<'s> unsafe fn(&'s isize) -> isize {square}: std::ops::Fn<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<(&isize,)>` closure, found `for<'r> unsafe fn(&'r isize) -> isize {square}`\n   --> $DIR/unboxed-closures-unsafe-extern-fn.rs:22:13\n    |\n LL |     let x = call_it(&square, 22);\n-   |             ^^^^^^^ the trait `for<'r> std::ops::Fn<(&'r isize,)>` is not implemented for `for<'r> unsafe fn(&'r isize) -> isize {square}`\n+   |             ^^^^^^^ expected an `Fn<(&isize,)>` closure, found `for<'r> unsafe fn(&'r isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::Fn<(&'r isize,)>` is not implemented for `for<'r> unsafe fn(&'r isize) -> isize {square}`\n note: required by `call_it`\n   --> $DIR/unboxed-closures-unsafe-extern-fn.rs:17:1\n    |\n LL | fn call_it<F:Fn(&isize)->isize>(_: &F, _: isize) -> isize { 0 }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `for<'r> for<'s> unsafe fn(&'s isize) -> isize {square}: std::ops::FnMut<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnMut<(&isize,)>` closure, found `for<'r> unsafe fn(&'r isize) -> isize {square}`\n   --> $DIR/unboxed-closures-unsafe-extern-fn.rs:27:13\n    |\n LL |     let y = call_it_mut(&mut square, 22);\n-   |             ^^^^^^^^^^^ the trait `for<'r> std::ops::FnMut<(&'r isize,)>` is not implemented for `for<'r> unsafe fn(&'r isize) -> isize {square}`\n+   |             ^^^^^^^^^^^ expected an `FnMut<(&isize,)>` closure, found `for<'r> unsafe fn(&'r isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::FnMut<(&'r isize,)>` is not implemented for `for<'r> unsafe fn(&'r isize) -> isize {square}`\n note: required by `call_it_mut`\n   --> $DIR/unboxed-closures-unsafe-extern-fn.rs:18:1\n    |\n LL | fn call_it_mut<F:FnMut(&isize)->isize>(_: &mut F, _: isize) -> isize { 0 }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `for<'r> for<'s> unsafe fn(&'s isize) -> isize {square}: std::ops::FnOnce<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnOnce<(&isize,)>` closure, found `for<'r> unsafe fn(&'r isize) -> isize {square}`\n   --> $DIR/unboxed-closures-unsafe-extern-fn.rs:32:13\n    |\n LL |     let z = call_it_once(square, 22);\n-   |             ^^^^^^^^^^^^ the trait `for<'r> std::ops::FnOnce<(&'r isize,)>` is not implemented for `for<'r> unsafe fn(&'r isize) -> isize {square}`\n+   |             ^^^^^^^^^^^^ expected an `FnOnce<(&isize,)>` closure, found `for<'r> unsafe fn(&'r isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::FnOnce<(&'r isize,)>` is not implemented for `for<'r> unsafe fn(&'r isize) -> isize {square}`\n note: required by `call_it_once`\n   --> $DIR/unboxed-closures-unsafe-extern-fn.rs:19:1\n    |"}, {"sha": "18ade48de664080d54ff9db4b563650de44316fa", "filename": "src/test/ui/unboxed-closures/unboxed-closures-wrong-abi.stderr", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-wrong-abi.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-wrong-abi.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-wrong-abi.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,33 +1,36 @@\n-error[E0277]: the trait bound `for<'r> for<'s> extern \"C\" fn(&'s isize) -> isize {square}: std::ops::Fn<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<(&isize,)>` closure, found `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n   --> $DIR/unboxed-closures-wrong-abi.rs:22:13\n    |\n LL |     let x = call_it(&square, 22);\n-   |             ^^^^^^^ the trait `for<'r> std::ops::Fn<(&'r isize,)>` is not implemented for `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n+   |             ^^^^^^^ expected an `Fn<(&isize,)>` closure, found `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::Fn<(&'r isize,)>` is not implemented for `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n note: required by `call_it`\n   --> $DIR/unboxed-closures-wrong-abi.rs:17:1\n    |\n LL | fn call_it<F:Fn(&isize)->isize>(_: &F, _: isize) -> isize { 0 }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `for<'r> for<'s> extern \"C\" fn(&'s isize) -> isize {square}: std::ops::FnMut<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnMut<(&isize,)>` closure, found `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n   --> $DIR/unboxed-closures-wrong-abi.rs:27:13\n    |\n LL |     let y = call_it_mut(&mut square, 22);\n-   |             ^^^^^^^^^^^ the trait `for<'r> std::ops::FnMut<(&'r isize,)>` is not implemented for `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n+   |             ^^^^^^^^^^^ expected an `FnMut<(&isize,)>` closure, found `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::FnMut<(&'r isize,)>` is not implemented for `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n note: required by `call_it_mut`\n   --> $DIR/unboxed-closures-wrong-abi.rs:18:1\n    |\n LL | fn call_it_mut<F:FnMut(&isize)->isize>(_: &mut F, _: isize) -> isize { 0 }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `for<'r> for<'s> extern \"C\" fn(&'s isize) -> isize {square}: std::ops::FnOnce<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnOnce<(&isize,)>` closure, found `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n   --> $DIR/unboxed-closures-wrong-abi.rs:32:13\n    |\n LL |     let z = call_it_once(square, 22);\n-   |             ^^^^^^^^^^^^ the trait `for<'r> std::ops::FnOnce<(&'r isize,)>` is not implemented for `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n+   |             ^^^^^^^^^^^^ expected an `FnOnce<(&isize,)>` closure, found `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::FnOnce<(&'r isize,)>` is not implemented for `for<'r> extern \"C\" fn(&'r isize) -> isize {square}`\n note: required by `call_it_once`\n   --> $DIR/unboxed-closures-wrong-abi.rs:19:1\n    |"}, {"sha": "f27b73017a28fed53e9f7745f9fda65843b61585", "filename": "src/test/ui/unboxed-closures/unboxed-closures-wrong-arg-type-extern-fn.stderr", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-wrong-arg-type-extern-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-wrong-arg-type-extern-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Funboxed-closures%2Funboxed-closures-wrong-arg-type-extern-fn.stderr?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1,33 +1,36 @@\n-error[E0277]: the trait bound `for<'r> unsafe fn(isize) -> isize {square}: std::ops::Fn<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::Fn<(&isize,)>` closure, found `unsafe fn(isize) -> isize {square}`\n   --> $DIR/unboxed-closures-wrong-arg-type-extern-fn.rs:23:13\n    |\n LL |     let x = call_it(&square, 22);\n-   |             ^^^^^^^ the trait `for<'r> std::ops::Fn<(&'r isize,)>` is not implemented for `unsafe fn(isize) -> isize {square}`\n+   |             ^^^^^^^ expected an `Fn<(&isize,)>` closure, found `unsafe fn(isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::Fn<(&'r isize,)>` is not implemented for `unsafe fn(isize) -> isize {square}`\n note: required by `call_it`\n   --> $DIR/unboxed-closures-wrong-arg-type-extern-fn.rs:18:1\n    |\n LL | fn call_it<F:Fn(&isize)->isize>(_: &F, _: isize) -> isize { 0 }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `for<'r> unsafe fn(isize) -> isize {square}: std::ops::FnMut<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnMut<(&isize,)>` closure, found `unsafe fn(isize) -> isize {square}`\n   --> $DIR/unboxed-closures-wrong-arg-type-extern-fn.rs:28:13\n    |\n LL |     let y = call_it_mut(&mut square, 22);\n-   |             ^^^^^^^^^^^ the trait `for<'r> std::ops::FnMut<(&'r isize,)>` is not implemented for `unsafe fn(isize) -> isize {square}`\n+   |             ^^^^^^^^^^^ expected an `FnMut<(&isize,)>` closure, found `unsafe fn(isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::FnMut<(&'r isize,)>` is not implemented for `unsafe fn(isize) -> isize {square}`\n note: required by `call_it_mut`\n   --> $DIR/unboxed-closures-wrong-arg-type-extern-fn.rs:19:1\n    |\n LL | fn call_it_mut<F:FnMut(&isize)->isize>(_: &mut F, _: isize) -> isize { 0 }\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error[E0277]: the trait bound `for<'r> unsafe fn(isize) -> isize {square}: std::ops::FnOnce<(&'r isize,)>` is not satisfied\n+error[E0277]: expected a `std::ops::FnOnce<(&isize,)>` closure, found `unsafe fn(isize) -> isize {square}`\n   --> $DIR/unboxed-closures-wrong-arg-type-extern-fn.rs:33:13\n    |\n LL |     let z = call_it_once(square, 22);\n-   |             ^^^^^^^^^^^^ the trait `for<'r> std::ops::FnOnce<(&'r isize,)>` is not implemented for `unsafe fn(isize) -> isize {square}`\n+   |             ^^^^^^^^^^^^ expected an `FnOnce<(&isize,)>` closure, found `unsafe fn(isize) -> isize {square}`\n    |\n+   = help: the trait `for<'r> std::ops::FnOnce<(&'r isize,)>` is not implemented for `unsafe fn(isize) -> isize {square}`\n note: required by `call_it_once`\n   --> $DIR/unboxed-closures-wrong-arg-type-extern-fn.rs:20:1\n    |"}, {"sha": "a5011c3abe7a7a72f6e7daecb9816b4365366803", "filename": "src/test/ui/variadic/variadic-ffi-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fvariadic%2Fvariadic-ffi-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fvariadic%2Fvariadic-ffi-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fvariadic%2Fvariadic-ffi-2.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// ignore-arm stdcall isn't suppported\n+// ignore-arm stdcall isn't supported\n \n fn baz(f: extern \"stdcall\" fn(usize, ...)) {\n     //~^ ERROR: variadic function must have C or cdecl calling convention"}, {"sha": "d81e61cac566d6c9e114b439979396f5a630ac77", "filename": "src/test/ui/variadic/variadic-ffi.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fvariadic%2Fvariadic-ffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fvariadic%2Fvariadic-ffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fvariadic%2Fvariadic-ffi.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -8,8 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// ignore-arm stdcall isn't suppported\n-// ignore-aarch64 stdcall isn't suppported\n+// ignore-arm stdcall isn't supported\n+// ignore-aarch64 stdcall isn't supported\n \n extern \"stdcall\" {\n     fn printf(_: *const u8, ...); //~ ERROR: variadic function must have C or cdecl calling"}, {"sha": "6179bdb34a38134902b868da68214f39bcbbb734", "filename": "src/test/ui/where-clauses/where-for-self-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fwhere-clauses%2Fwhere-for-self-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftest%2Fui%2Fwhere-clauses%2Fwhere-for-self-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fwhere-clauses%2Fwhere-for-self-2.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -10,7 +10,7 @@\n \n // Test that we can quantify lifetimes outside a constraint (i.e., including\n // the self type) in a where clause. Specifically, test that implementing for a\n-// specific lifetime is not enough to satisify the `for<'a> ...` constraint, which\n+// specific lifetime is not enough to satisfy the `for<'a> ...` constraint, which\n // should require *all* lifetimes.\n \n static X: &'static u32 = &42;"}, {"sha": "76c15f6601a4aec5f93c4b438b706c45389a61df", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9f9f2c0095cd683b94adca133f2733aa1f88bb19/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -273,7 +273,8 @@ impl Builder {\n         self.clippy_version = self.version(\"clippy\", \"x86_64-unknown-linux-gnu\");\n         self.rustfmt_version = self.version(\"rustfmt\", \"x86_64-unknown-linux-gnu\");\n         self.llvm_tools_version = self.version(\"llvm-tools\", \"x86_64-unknown-linux-gnu\");\n-        self.lldb_version = self.version(\"lldb\", \"x86_64-unknown-linux-gnu\");\n+        // lldb is only built for macOS.\n+        self.lldb_version = self.version(\"lldb\", \"x86_64-apple-darwin\");\n \n         self.rust_git_commit_hash = self.git_commit_hash(\"rust\", \"x86_64-unknown-linux-gnu\");\n         self.cargo_git_commit_hash = self.git_commit_hash(\"cargo\", \"x86_64-unknown-linux-gnu\");"}, {"sha": "813b3b952c07b6b85732c3fbdf3eb74f61a9fa96", "filename": "src/tools/lld", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": null, "raw_url": null, "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Flld?ref=9f9f2c0095cd683b94adca133f2733aa1f88bb19", "patch": "@@ -1 +1 @@\n-Subproject commit f76ea3ca16ed22dde8ef929db74a4b4df6f2f899\n+Subproject commit 813b3b952c07b6b85732c3fbdf3eb74f61a9fa96"}]}