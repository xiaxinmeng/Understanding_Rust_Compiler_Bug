{"sha": "68cc4df551ea289e542910226cd1429ff2310dfa", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4Y2M0ZGY1NTFlYTI4OWU1NDI5MTAyMjZjZDE0MjlmZjIzMTBkZmE=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-01-10T19:33:24Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-01-29T07:19:05Z"}, "message": "Maybe fix ICE?", "tree": {"sha": "8e8b232d3dfd088fceba7b1dbb56e7d282947d52", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e8b232d3dfd088fceba7b1dbb56e7d282947d52"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/68cc4df551ea289e542910226cd1429ff2310dfa", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEvUKv4zqIn2RHUgCKtvoGpuDiZlsFAlxP/mkACgkQtvoGpuDi\nZlvN/xAApfvM/DAvlxnNv1dO1RARJFAMNpS9EVhlzwMutDDf2IhtyU7aXLe3GK7s\nlHWim7599Yex9jhpGohKnftHPpfJJgRb9EtL+03JvLM3gyZyWq8jyEFHvQ8KPGuK\nEbKUywtiS6CR1eqpgEG8VnA1pyUdE2Nvxu/o5dEotGbtCtPZOZXtUVUPJl/PrTNu\np/THZvMxuWuSHf53sxP7BzigqZ5ZJRfYfo9IilQ3K/ql0chM9vULMNomw+rQNTjv\nxg54DgUqzSsOTQcvNx5LuF3oV/672vL2b/VGcTxI9J//UGNslP/Oxe94lAkOOOIG\nPbUswwtZYGfqnXlc6dbwPp3R3f+IZZelnqdF82xcOWDEzvbYSlRCV4ey8ioBKvDS\nHHq9MKVdE/ovq0dPor9zuMJ774eEz4zFzH8DsuLl6HmpiPVbnmCNn12wdB4YD2vP\n9VAz5kKTqUGt4Id+RCt9KrVk4iXBXQOxpA5OibtTyYXPqqidp3/uuqHXEIEtZJ5u\n3bMF/SHPMES8cSs/lrocfuqgYGtMej1sfmDT1fxfI/KPiQCJPG/VBeIhF6PNGg8W\nj974BuPjzTWRsZwDvuStjURseOxVqTtBjiI1nSKadS+zyjygMOSiZuPs002olIZL\ns7AsXsAD9GBhiUjvPCBtFy63jy0dLEuUnd3L0tG1B+G3zDYnTxA=\n=9Jdm\n-----END PGP SIGNATURE-----", "payload": "tree 8e8b232d3dfd088fceba7b1dbb56e7d282947d52\nparent c3980bf0bc1641717d3253f9168dec07b52e0e4f\nauthor Philipp Hansch <dev@phansch.net> 1547148804 +0100\ncommitter Philipp Hansch <dev@phansch.net> 1548746345 +0100\n\nMaybe fix ICE?\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/68cc4df551ea289e542910226cd1429ff2310dfa", "html_url": "https://github.com/rust-lang/rust/commit/68cc4df551ea289e542910226cd1429ff2310dfa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/68cc4df551ea289e542910226cd1429ff2310dfa/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3980bf0bc1641717d3253f9168dec07b52e0e4f", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3980bf0bc1641717d3253f9168dec07b52e0e4f", "html_url": "https://github.com/rust-lang/rust/commit/c3980bf0bc1641717d3253f9168dec07b52e0e4f"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "caa516acd24d13192250f68acec3c8770187bd45", "filename": "clippy_lints/src/missing_const_for_fn.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/68cc4df551ea289e542910226cd1429ff2310dfa/clippy_lints%2Fsrc%2Fmissing_const_for_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/68cc4df551ea289e542910226cd1429ff2310dfa/clippy_lints%2Fsrc%2Fmissing_const_for_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_const_for_fn.rs?ref=68cc4df551ea289e542910226cd1429ff2310dfa", "patch": "@@ -84,7 +84,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for MissingConstForFn {\n     ) {\n         let def_id = cx.tcx.hir().local_def_id(node_id);\n         let mir = cx.tcx.optimized_mir(def_id);\n-        if let Ok(_) = is_min_const_fn(cx.tcx, def_id, &mir) {\n+        if let Err((span, err) = is_min_const_fn(cx.tcx, def_id, &mir) {\n+            cx.tcx.sess.span_err(span, &err);\n+        } else {\n             match kind {\n                 FnKind::ItemFn(name, _generics, header, _vis, attrs) => {\n                     if !can_be_const_fn(&name.as_str(), header, attrs) {"}]}