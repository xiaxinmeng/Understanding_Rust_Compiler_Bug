{"sha": "e5d5e6a5604dbc14090e1a5919b6eac522442f6e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1ZDVlNmE1NjA0ZGJjMTQwOTBlMWE1OTE5YjZlYWM1MjI0NDJmNmU=", "commit": {"author": {"name": "varkor", "email": "github@varkor.com", "date": "2018-07-26T22:44:36Z"}, "committer": {"name": "varkor", "email": "github@varkor.com", "date": "2018-08-05T14:54:49Z"}, "message": "Fix outdated handling of GetLangItems", "tree": {"sha": "013dd70e4152505b7535b877335f9cc5b2f15b4b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/013dd70e4152505b7535b877335f9cc5b2f15b4b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e5d5e6a5604dbc14090e1a5919b6eac522442f6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e5d5e6a5604dbc14090e1a5919b6eac522442f6e", "html_url": "https://github.com/rust-lang/rust/commit/e5d5e6a5604dbc14090e1a5919b6eac522442f6e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e5d5e6a5604dbc14090e1a5919b6eac522442f6e/comments", "author": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "319b052357f3c6bb2cc6a911f1f7e7ce82e2b85c", "url": "https://api.github.com/repos/rust-lang/rust/commits/319b052357f3c6bb2cc6a911f1f7e7ce82e2b85c", "html_url": "https://github.com/rust-lang/rust/commit/319b052357f3c6bb2cc6a911f1f7e7ce82e2b85c"}], "stats": {"total": 12, "additions": 2, "deletions": 10}, "files": [{"sha": "66d6a4346685819d8baec9385d23fd4d3f4b2b28", "filename": "src/librustc/dep_graph/dep_node.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e5d5e6a5604dbc14090e1a5919b6eac522442f6e/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e5d5e6a5604dbc14090e1a5919b6eac522442f6e/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdep_graph%2Fdep_node.rs?ref=e5d5e6a5604dbc14090e1a5919b6eac522442f6e", "patch": "@@ -617,7 +617,7 @@ define_dep_nodes!( <'tcx>\n     [] ExternModStmtCnum(DefId),\n     [input] GetLibFeatures,\n     [] DefinedLibFeatures(CrateNum),\n-    [input] GetLangItems,\n+    [eval_always] GetLangItems,\n     [] DefinedLangItems(CrateNum),\n     [] MissingLangItems(CrateNum),\n     [] VisibleParentMap,"}, {"sha": "a35bd3c012f3fa74be08cd9497fc01a560749116", "filename": "src/librustc/ty/context.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/e5d5e6a5604dbc14090e1a5919b6eac522442f6e/src%2Flibrustc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e5d5e6a5604dbc14090e1a5919b6eac522442f6e/src%2Flibrustc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fcontext.rs?ref=e5d5e6a5604dbc14090e1a5919b6eac522442f6e", "patch": "@@ -2851,15 +2851,7 @@ pub fn provide(providers: &mut ty::query::Providers) {\n     };\n     providers.get_lang_items = |tcx, id| {\n         assert_eq!(id, LOCAL_CRATE);\n-        // FIXME(#42293) Right now we insert a `with_ignore` node in the dep\n-        // graph here to ignore the fact that `get_lang_items` below depends on\n-        // the entire crate.  For now this'll prevent false positives of\n-        // recompiling too much when anything changes.\n-        //\n-        // Once red/green incremental compilation lands we should be able to\n-        // remove this because while the crate changes often the lint level map\n-        // will change rarely.\n-        tcx.dep_graph.with_ignore(|| Lrc::new(middle::lang_items::collect(tcx)))\n+        Lrc::new(middle::lang_items::collect(tcx))\n     };\n     providers.freevars = |tcx, id| tcx.gcx.freevars.get(&id).cloned();\n     providers.maybe_unused_trait_import = |tcx, id| {"}]}