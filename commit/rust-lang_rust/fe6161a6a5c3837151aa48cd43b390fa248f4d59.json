{"sha": "fe6161a6a5c3837151aa48cd43b390fa248f4d59", "node_id": "C_kwDOAAsO6NoAKGZlNjE2MWE2YTVjMzgzNzE1MWFhNDhjZDQzYjM5MGZhMjQ4ZjRkNTk", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev+love@gmail.com", "date": "2022-11-07T00:46:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-07T00:46:28Z"}, "message": "Rollup merge of #104065 - GuillaumeGomez:css-migrate-logo-filter, r=notriddle\n\nMigrate rust logo filter to CSS variables", "tree": {"sha": "557b2c9fdb24c086dbb705ec6175063bb5a16fea", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/557b2c9fdb24c086dbb705ec6175063bb5a16fea"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fe6161a6a5c3837151aa48cd43b390fa248f4d59", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjaFVkCRBK7hj4Ov3rIwAACocIAKZzKBhl6vE4sebplPMB85mp\nohcU0/xUlwOpokp6GxlV3b9HfrEsCwbL1RgfnH3KB3xGZdx1YI3/gCvbuvTP/8TI\nF3jaiociucIeEJwjC/3/iS4ScERaes/zLXdFh65rnaQ+Qa2p7v4CqCFKUX8VMagc\ngq+ETbfQtm0Ciu1N+VVtyy5+yFnsG26isbIYh11rGnlMgPA4NlMMljO70VuobQL4\nLVSsm2BugZhNXC2cAFWHdBsodSrckOQXpBjoL93FRxCLoXuHXxw2DYOZLL9+qG0m\nruVbkJXoOZyxQbI4QuxHz7PSI8S2JtjDnLWmtx5TgoYOd2n1HK4ET1CmBBvBeUs=\n=eIFc\n-----END PGP SIGNATURE-----\n", "payload": "tree 557b2c9fdb24c086dbb705ec6175063bb5a16fea\nparent 458b132bf9ebb674cdb969bb649a045de88daa75\nparent 0e23d90e26571fc53f0263858d9558d03de6cd30\nauthor Yuki Okushi <huyuumi.dev+love@gmail.com> 1667781988 +0900\ncommitter GitHub <noreply@github.com> 1667781988 +0900\n\nRollup merge of #104065 - GuillaumeGomez:css-migrate-logo-filter, r=notriddle\n\nMigrate rust logo filter to CSS variables\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fe6161a6a5c3837151aa48cd43b390fa248f4d59", "html_url": "https://github.com/rust-lang/rust/commit/fe6161a6a5c3837151aa48cd43b390fa248f4d59", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fe6161a6a5c3837151aa48cd43b390fa248f4d59/comments", "author": null, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "458b132bf9ebb674cdb969bb649a045de88daa75", "url": "https://api.github.com/repos/rust-lang/rust/commits/458b132bf9ebb674cdb969bb649a045de88daa75", "html_url": "https://github.com/rust-lang/rust/commit/458b132bf9ebb674cdb969bb649a045de88daa75"}, {"sha": "0e23d90e26571fc53f0263858d9558d03de6cd30", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e23d90e26571fc53f0263858d9558d03de6cd30", "html_url": "https://github.com/rust-lang/rust/commit/0e23d90e26571fc53f0263858d9558d03de6cd30"}], "stats": {"total": 42, "additions": 22, "deletions": 20}, "files": [{"sha": "a38c0e42ab455345017d014801a85d38404e545a", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=fe6161a6a5c3837151aa48cd43b390fa248f4d59", "patch": "@@ -378,6 +378,10 @@ img {\n \tobject-fit: contain;\n }\n \n+.rust-logo {\n+\tfilter: var(--rust-logo-filter);\n+}\n+\n .sidebar, .mobile-topbar, .sidebar-menu-toggle {\n \tbackground-color: var(--sidebar-background-color);\n }"}, {"sha": "bf8a60affaa227f980ca8eece943da8ba76005fa", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=fe6161a6a5c3837151aa48cd43b390fa248f4d59", "patch": "@@ -63,6 +63,10 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--test-arrow-background-color: rgba(57, 175, 215, 0.09);\n \t--test-arrow-hover-color: #c5c5c5;\n \t--test-arrow-hover-background-color: rgba(57, 175, 215, 0.368);\n+\t--rust-logo-filter: drop-shadow(1px 0 0px #fff)\n+\t\tdrop-shadow(0 1px 0 #fff)\n+\t\tdrop-shadow(-1px 0 0 #fff)\n+\t\tdrop-shadow(0 -1px 0 #fff);\n }\n \n .slider {\n@@ -104,13 +108,6 @@ pre, .rustdoc.source .example-wrap {\n \tcolor: #e6e1cf;\n }\n \n-.rust-logo {\n-\tfilter: drop-shadow(1px 0 0px #fff)\n-\t\tdrop-shadow(0 1px 0 #fff)\n-\t\tdrop-shadow(-1px 0 0 #fff)\n-\t\tdrop-shadow(0 -1px 0 #fff);\n-}\n-\n .sidebar .current,\n .sidebar a:hover {\n \tcolor: #ffb44c;"}, {"sha": "ac6e527848f613e4853a64708cd4a10e86c09101", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=fe6161a6a5c3837151aa48cd43b390fa248f4d59", "patch": "@@ -58,6 +58,10 @@\n \t--test-arrow-background-color: rgba(78, 139, 202, 0.2);\n \t--test-arrow-hover-color: #dedede;\n \t--test-arrow-hover-background-color: #4e8bca;\n+\t--rust-logo-filter: drop-shadow(1px 0 0px #fff)\n+\t\tdrop-shadow(0 1px 0 #fff)\n+\t\tdrop-shadow(-1px 0 0 #fff)\n+\t\tdrop-shadow(0 -1px 0 #fff);\n }\n \n .slider {\n@@ -70,13 +74,6 @@ input:focus + .slider {\n \tbox-shadow: 0 0 0 2px #0a84ff, 0 0 0 6px rgba(10, 132, 255, 0.3);\n }\n \n-.rust-logo {\n-\tfilter: drop-shadow(1px 0 0px #fff)\n-\t\tdrop-shadow(0 1px 0 #fff)\n-\t\tdrop-shadow(-1px 0 0 #fff)\n-\t\tdrop-shadow(0 -1px 0 #fff)\n-}\n-\n .content .item-info::before { color: #ccc; }\n \n body.source .example-wrap pre.rust a {"}, {"sha": "608fc5aba7fd3f6e2bd2ee4c70cd565dca569e10", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=fe6161a6a5c3837151aa48cd43b390fa248f4d59", "patch": "@@ -58,6 +58,7 @@\n \t--test-arrow-background-color: rgba(78, 139, 202, 0.2);\n \t--test-arrow-hover-color: #f5f5f5;\n \t--test-arrow-hover-background-color: #4e8bca;\n+\t--rust-logo-filter: initial;\n }\n \n .slider {\n@@ -70,12 +71,6 @@ input:focus + .slider {\n \tbox-shadow: 0 0 0 2px #0a84ff, 0 0 0 6px rgba(10, 132, 255, 0.3);\n }\n \n-.rust-logo {\n-\t/* This rule exists to force other themes to explicitly style the logo.\n-\t * Rustdoc has a custom linter for this purpose.\n-\t */\n-}\n-\n .content .item-info::before { color: #ccc; }\n \n body.source .example-wrap pre.rust a {"}, {"sha": "816cc9abd693dca67daeeed89d728804e9db67c5", "filename": "src/test/rustdoc-gui/rust-logo.goml", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml", "raw_url": "https://github.com/rust-lang/rust/raw/fe6161a6a5c3837151aa48cd43b390fa248f4d59/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Frust-logo.goml?ref=fe6161a6a5c3837151aa48cd43b390fa248f4d59", "patch": "@@ -17,6 +17,15 @@ define-function: (\n         (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n         (\"reload\"),\n         (\"assert-css\", (\".rust-logo\", {\"filter\": |filter|})),\n+        // Now we check that the non-rust logos don't have a CSS filter set.\n+        (\"goto\", \"file://\" + |DOC_PATH| + \"/huge_logo/index.html\"),\n+        // Changing theme on the new page (again...).\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        (\"reload\"),\n+        // Check there is no rust logo\n+        (\"assert-false\", \".rust-logo\"),\n+        // Check there is no filter.\n+        (\"assert-css\", (\".sidebar .logo-container img\", {\"filter\": \"none\"})),\n     ],\n )\n "}]}