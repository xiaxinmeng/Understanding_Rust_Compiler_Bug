{"sha": "840af4f84d32934d210f254a8d710aae972948b1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0MGFmNGY4NGQzMjkzNGQyMTBmMjU0YThkNzEwYWFlOTcyOTQ4YjE=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-09-27T19:46:05Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-09-27T19:46:05Z"}, "message": "Option for putting the where clause on the same line as the function if the body is empty.", "tree": {"sha": "e9e5cabf91a2fc37da2e04cc453f8c737b594bbc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9e5cabf91a2fc37da2e04cc453f8c737b594bbc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/840af4f84d32934d210f254a8d710aae972948b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/840af4f84d32934d210f254a8d710aae972948b1", "html_url": "https://github.com/rust-lang/rust/commit/840af4f84d32934d210f254a8d710aae972948b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/840af4f84d32934d210f254a8d710aae972948b1/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9139a8040c0a6bfac096cc29ca90d94e7e59b27a", "url": "https://api.github.com/repos/rust-lang/rust/commits/9139a8040c0a6bfac096cc29ca90d94e7e59b27a", "html_url": "https://github.com/rust-lang/rust/commit/9139a8040c0a6bfac096cc29ca90d94e7e59b27a"}], "stats": {"total": 21, "additions": 14, "deletions": 7}, "files": [{"sha": "7460f5812055610d3562eabea60e7d59de51c78d", "filename": "src/config.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/840af4f84d32934d210f254a8d710aae972948b1/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/840af4f84d32934d210f254a8d710aae972948b1/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=840af4f84d32934d210f254a8d710aae972948b1", "patch": "@@ -74,6 +74,8 @@ pub enum Density {\n     Compressed,\n     // Use more lines.\n     Tall,\n+    // Try to compress if the body is empty.\n+    CompressedIfEmpty,\n }\n \n impl_enum_decodable!(Density, Compressed, Tall);\n@@ -82,7 +84,7 @@ impl Density {\n     pub fn to_list_tactic(self) -> ListTactic {\n         match self {\n             Density::Compressed => ListTactic::Mixed,\n-            Density::Tall => ListTactic::HorizontalVertical,\n+            Density::Tall | Density::CompressedIfEmpty => ListTactic::HorizontalVertical,\n         }\n     }\n }\n@@ -267,7 +269,7 @@ impl Default for Config {\n             fn_args_density: Density::Tall,\n             fn_args_layout: StructLitStyle::Visual,\n             fn_arg_indent: BlockIndentStyle::Visual,\n-            where_density: Density::Tall,\n+            where_density: Density::CompressedIfEmpty,\n             where_indent: BlockIndentStyle::Tabbed,\n             where_layout: ListTactic::Vertical,\n             where_pred_indent: BlockIndentStyle::Visual,"}, {"sha": "e6a334d9ad306129efbb03f9f29365dda620a4a5", "filename": "src/items.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/840af4f84d32934d210f254a8d710aae972948b1/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/840af4f84d32934d210f254a8d710aae972948b1/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=840af4f84d32934d210f254a8d710aae972948b1", "patch": "@@ -144,6 +144,7 @@ impl<'a> FmtVisitor<'a> {\n                                                    abi::Abi::Rust,\n                                                    ast::Visibility::Inherited,\n                                                    span,\n+                                                   false,\n                                                    false);\n \n                 match rewrite {\n@@ -210,7 +211,8 @@ impl<'a> FmtVisitor<'a> {\n                                                        abi,\n                                                        vis,\n                                                        span,\n-                                                       newline_brace));\n+                                                       newline_brace,\n+                                                       true));\n \n         if self.config.fn_brace_style != BraceStyle::AlwaysNextLine && !result.contains('\\n') {\n             newline_brace = false;\n@@ -250,6 +252,7 @@ impl<'a> FmtVisitor<'a> {\n                                                        sig.abi,\n                                                        ast::Visibility::Inherited,\n                                                        span,\n+                                                       false,\n                                                        false));\n \n         // Re-attach semicolon\n@@ -269,7 +272,8 @@ impl<'a> FmtVisitor<'a> {\n                        abi: abi::Abi,\n                        vis: ast::Visibility,\n                        span: Span,\n-                       newline_brace: bool)\n+                       newline_brace: bool,\n+                       has_body: bool)\n                        -> Option<String> {\n         // FIXME we'll lose any comments in between parts of the function decl, but anyone\n         // who comments there probably deserves what they get.\n@@ -407,7 +411,9 @@ impl<'a> FmtVisitor<'a> {\n                                 (!result.contains('\\n') ||\n                                  self.config.fn_args_layout == StructLitStyle::Block)) ||\n                                (self.config.fn_args_layout == StructLitStyle::Block &&\n-                                ret_str.is_empty()) {\n+                                ret_str.is_empty()) ||\n+                               (self.config.where_density == Density::CompressedIfEmpty &&\n+                                !has_body) {\n             Density::Compressed\n         } else {\n             Density::Tall"}, {"sha": "3e0a7ed692a508866323c3d41eec670c9e6cf977", "filename": "tests/target/trait.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/840af4f84d32934d210f254a8d710aae972948b1/tests%2Ftarget%2Ftrait.rs", "raw_url": "https://github.com/rust-lang/rust/raw/840af4f84d32934d210f254a8d710aae972948b1/tests%2Ftarget%2Ftrait.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Ftrait.rs?ref=840af4f84d32934d210f254a8d710aae972948b1", "patch": "@@ -15,8 +15,7 @@ trait Foo {\n \n     fn increment(&mut self, x: i32);\n \n-    fn read(&mut self, x: BufReader<R> /* Used to be MemReader */)\n-        where R: Read;\n+    fn read(&mut self, x: BufReader<R> /* Used to be MemReader */) where R: Read;\n }\n \n pub trait WriteMessage {"}]}