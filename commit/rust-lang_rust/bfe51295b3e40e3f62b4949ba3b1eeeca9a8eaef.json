{"sha": "bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmZTUxMjk1YjNlNDBlM2Y2MmI0OTQ5YmEzYjFlZWVjYTlhOGVhZWY=", "commit": {"author": {"name": "Jonathan Turner", "email": "jonathandturner@users.noreply.github.com", "date": "2016-08-31T20:53:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-31T20:53:33Z"}, "message": "Rollup merge of #35927 - matthew-piziak:bitandassign-example, r=GuillaumeGomez\n\nreplace `BitAndAssign` example with something more evocative\n\nThis is the augmented-assignment version of PR #35809.\n\nr? @GuillaumeGomez", "tree": {"sha": "bfba017de763a26338ea82a1571a2ba4d0c58414", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bfba017de763a26338ea82a1571a2ba4d0c58414"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef", "html_url": "https://github.com/rust-lang/rust/commit/bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef/comments", "author": {"login": "jonathandturner", "id": 111457284, "node_id": "O_kgDOBqS0BA", "avatar_url": "https://avatars.githubusercontent.com/u/111457284?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonathandturner", "html_url": "https://github.com/jonathandturner", "followers_url": "https://api.github.com/users/jonathandturner/followers", "following_url": "https://api.github.com/users/jonathandturner/following{/other_user}", "gists_url": "https://api.github.com/users/jonathandturner/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonathandturner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonathandturner/subscriptions", "organizations_url": "https://api.github.com/users/jonathandturner/orgs", "repos_url": "https://api.github.com/users/jonathandturner/repos", "events_url": "https://api.github.com/users/jonathandturner/events{/privacy}", "received_events_url": "https://api.github.com/users/jonathandturner/received_events", "type": "Organization", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "117cbb879e6ef498ea04e08bd80688bf2fc4a183", "url": "https://api.github.com/repos/rust-lang/rust/commits/117cbb879e6ef498ea04e08bd80688bf2fc4a183", "html_url": "https://github.com/rust-lang/rust/commit/117cbb879e6ef498ea04e08bd80688bf2fc4a183"}, {"sha": "ba69bc8b405f7e48eebda9f08f06fdf23af9027f", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba69bc8b405f7e48eebda9f08f06fdf23af9027f", "html_url": "https://github.com/rust-lang/rust/commit/ba69bc8b405f7e48eebda9f08f06fdf23af9027f"}], "stats": {"total": 60, "additions": 51, "deletions": 9}, "files": [{"sha": "2bb0c3c04e02c845d630e0dc189bec1e536dcac1", "filename": "src/libcore/ops.rs", "status": "modified", "additions": 51, "deletions": 9, "changes": 60, "blob_url": "https://github.com/rust-lang/rust/blob/bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef/src%2Flibcore%2Fops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef/src%2Flibcore%2Fops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fops.rs?ref=bfe51295b3e40e3f62b4949ba3b1eeeca9a8eaef", "patch": "@@ -1564,24 +1564,66 @@ rem_assign_impl! { usize u8 u16 u32 u64 isize i8 i16 i32 i64 f32 f64 }\n ///\n /// # Examples\n ///\n-/// A trivial implementation of `BitAndAssign`. When `Foo &= Foo` happens, it ends up\n-/// calling `bitand_assign`, and therefore, `main` prints `Bitwise And-ing!`.\n+/// In this example, the `&=` operator is lifted to a trivial `Scalar` type.\n ///\n /// ```\n /// use std::ops::BitAndAssign;\n ///\n-/// struct Foo;\n+/// #[derive(Debug, PartialEq)]\n+/// struct Scalar(bool);\n ///\n-/// impl BitAndAssign for Foo {\n-///     fn bitand_assign(&mut self, _rhs: Foo) {\n-///         println!(\"Bitwise And-ing!\");\n+/// impl BitAndAssign for Scalar {\n+///     // rhs is the \"right-hand side\" of the expression `a &= b`\n+///     fn bitand_assign(&mut self, rhs: Self) {\n+///         *self = Scalar(self.0 & rhs.0)\n ///     }\n /// }\n ///\n-/// # #[allow(unused_assignments)]\n /// fn main() {\n-///     let mut foo = Foo;\n-///     foo &= Foo;\n+///     let mut scalar = Scalar(true);\n+///     scalar &= Scalar(true);\n+///     assert_eq!(scalar, Scalar(true));\n+///\n+///     let mut scalar = Scalar(true);\n+///     scalar &= Scalar(false);\n+///     assert_eq!(scalar, Scalar(false));\n+///\n+///     let mut scalar = Scalar(false);\n+///     scalar &= Scalar(true);\n+///     assert_eq!(scalar, Scalar(false));\n+///\n+///     let mut scalar = Scalar(false);\n+///     scalar &= Scalar(false);\n+///     assert_eq!(scalar, Scalar(false));\n+/// }\n+/// ```\n+///\n+/// In this example, the `BitAndAssign` trait is implemented for a\n+/// `BooleanVector` struct.\n+///\n+/// ```\n+/// use std::ops::BitAndAssign;\n+///\n+/// #[derive(Debug, PartialEq)]\n+/// struct BooleanVector(Vec<bool>);\n+///\n+/// impl BitAndAssign for BooleanVector {\n+///     // rhs is the \"right-hand side\" of the expression `a &= b`\n+///     fn bitand_assign(&mut self, rhs: Self) {\n+///         assert_eq!(self.0.len(), rhs.0.len());\n+///         *self = BooleanVector(self.0\n+///                                   .iter()\n+///                                   .zip(rhs.0.iter())\n+///                                   .map(|(x, y)| *x && *y)\n+///                                   .collect());\n+///     }\n+/// }\n+///\n+/// fn main() {\n+///     let mut bv = BooleanVector(vec![true, true, false, false]);\n+///     bv &= BooleanVector(vec![true, false, true, false]);\n+///     let expected = BooleanVector(vec![true, false, false, false]);\n+///     assert_eq!(bv, expected);\n /// }\n /// ```\n #[lang = \"bitand_assign\"]"}]}