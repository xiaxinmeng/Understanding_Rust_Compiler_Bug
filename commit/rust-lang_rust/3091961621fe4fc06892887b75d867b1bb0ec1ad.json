{"sha": "3091961621fe4fc06892887b75d867b1bb0ec1ad", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMwOTE5NjE2MjFmZTRmYzA2ODkyODg3Yjc1ZDg2N2IxYmIwZWMxYWQ=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-04-29T20:22:41Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-04-29T20:22:41Z"}, "message": "Rollup merge of #60353 - JohnTitor:add-test, r=Centril\n\nAdd test not to forget resolved ICE\n\ncloses #55499\n\nI added the example as a test.\n\nr? @pnkfelix", "tree": {"sha": "32f6c3c0ac173fa7a5da00509f9339009429a7d0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/32f6c3c0ac173fa7a5da00509f9339009429a7d0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3091961621fe4fc06892887b75d867b1bb0ec1ad", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcx10RCRBK7hj4Ov3rIwAAdHIIAC1hRiGIlLwKPpkNoOPrYbw7\nt8nbFcC9ryU7MgNcwcKhQJMuM7Jj9aDOI4wCDB8y0brPbzWIaWWGsJXy3XTDdRME\n3LsPK9IKxlJ5bk5ZqZQxl0S7bp8vMTxdOXmxANYjtWA1H8j3IyVCyX4xsjiUP8Ia\ns8ruaIlprjuCWbATytBbm9CdQDXEMMngueG9ZFyB/P5Quw5B1bHm1R7JNSE2wBcn\nfTOU+Cuj5nTUnJla+fWoBGx7rrcbQpY61sXTfxEe10Dx+Lrqb4XWxvAgJeGepVjf\n8zR+S+BpnkcOJTB8fU9Q5J5NWJ8Bo6VQydbCdTGEqFTK+96Bo9g0PoNR8kSQ1KI=\n=LauR\n-----END PGP SIGNATURE-----\n", "payload": "tree 32f6c3c0ac173fa7a5da00509f9339009429a7d0\nparent ead8d81301c1854e7ec251a57239813f6dfa8001\nparent 52356cad4e749dd394d5f7571f4589b9d1430db5\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1556569361 +0200\ncommitter GitHub <noreply@github.com> 1556569361 +0200\n\nRollup merge of #60353 - JohnTitor:add-test, r=Centril\n\nAdd test not to forget resolved ICE\n\ncloses #55499\n\nI added the example as a test.\n\nr? @pnkfelix\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3091961621fe4fc06892887b75d867b1bb0ec1ad", "html_url": "https://github.com/rust-lang/rust/commit/3091961621fe4fc06892887b75d867b1bb0ec1ad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3091961621fe4fc06892887b75d867b1bb0ec1ad/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ead8d81301c1854e7ec251a57239813f6dfa8001", "url": "https://api.github.com/repos/rust-lang/rust/commits/ead8d81301c1854e7ec251a57239813f6dfa8001", "html_url": "https://github.com/rust-lang/rust/commit/ead8d81301c1854e7ec251a57239813f6dfa8001"}, {"sha": "52356cad4e749dd394d5f7571f4589b9d1430db5", "url": "https://api.github.com/repos/rust-lang/rust/commits/52356cad4e749dd394d5f7571f4589b9d1430db5", "html_url": "https://github.com/rust-lang/rust/commit/52356cad4e749dd394d5f7571f4589b9d1430db5"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "856a778078a61c323141838f3bb1f0d777afead4", "filename": "src/test/ui/async-with-closure.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/3091961621fe4fc06892887b75d867b1bb0ec1ad/src%2Ftest%2Fui%2Fasync-with-closure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3091961621fe4fc06892887b75d867b1bb0ec1ad/src%2Ftest%2Fui%2Fasync-with-closure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-with-closure.rs?ref=3091961621fe4fc06892887b75d867b1bb0ec1ad", "patch": "@@ -0,0 +1,26 @@\n+// compile-pass\n+// edition:2018\n+\n+#![feature(async_await, await_macro)]\n+\n+trait MyClosure {\n+    type Args;\n+}\n+\n+impl<R> MyClosure for dyn FnMut() -> R\n+where R: 'static {\n+    type Args = ();\n+}\n+\n+struct MyStream<C: ?Sized + MyClosure> {\n+    x: C::Args,\n+}\n+\n+async fn get_future<C: ?Sized + MyClosure>(_stream: MyStream<C>) {}\n+\n+async fn f() {\n+    let messages: MyStream<FnMut()> = unimplemented!();\n+    await!(get_future(messages));\n+}\n+\n+fn main() {}"}]}