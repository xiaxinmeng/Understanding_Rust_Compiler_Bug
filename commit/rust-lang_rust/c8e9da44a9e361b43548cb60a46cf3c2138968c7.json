{"sha": "c8e9da44a9e361b43548cb60a46cf3c2138968c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4ZTlkYTQ0YTllMzYxYjQzNTQ4Y2I2MGE0NmNmM2MyMTM4OTY4Yzc=", "commit": {"author": {"name": "varkor", "email": "github@varkor.com", "date": "2018-01-15T18:52:42Z"}, "committer": {"name": "varkor", "email": "github@varkor.com", "date": "2018-01-19T00:42:14Z"}, "message": "Update comments about the partitioning inefficiency", "tree": {"sha": "184aa76d21a7e237161c096c1d277a3f17930595", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/184aa76d21a7e237161c096c1d277a3f17930595"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c8e9da44a9e361b43548cb60a46cf3c2138968c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c8e9da44a9e361b43548cb60a46cf3c2138968c7", "html_url": "https://github.com/rust-lang/rust/commit/c8e9da44a9e361b43548cb60a46cf3c2138968c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c8e9da44a9e361b43548cb60a46cf3c2138968c7/comments", "author": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "varkor", "id": 3943692, "node_id": "MDQ6VXNlcjM5NDM2OTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3943692?v=4", "gravatar_id": "", "url": "https://api.github.com/users/varkor", "html_url": "https://github.com/varkor", "followers_url": "https://api.github.com/users/varkor/followers", "following_url": "https://api.github.com/users/varkor/following{/other_user}", "gists_url": "https://api.github.com/users/varkor/gists{/gist_id}", "starred_url": "https://api.github.com/users/varkor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/varkor/subscriptions", "organizations_url": "https://api.github.com/users/varkor/orgs", "repos_url": "https://api.github.com/users/varkor/repos", "events_url": "https://api.github.com/users/varkor/events{/privacy}", "received_events_url": "https://api.github.com/users/varkor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e60b0f802b438d350ccd1ec1b42f515994b1a4c0", "url": "https://api.github.com/repos/rust-lang/rust/commits/e60b0f802b438d350ccd1ec1b42f515994b1a4c0", "html_url": "https://github.com/rust-lang/rust/commit/e60b0f802b438d350ccd1ec1b42f515994b1a4c0"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "806d787c84522601c69c4a56fde4acbc7f547ba4", "filename": "src/librustc_mir/monomorphize/partitioning.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c8e9da44a9e361b43548cb60a46cf3c2138968c7/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8e9da44a9e361b43548cb60a46cf3c2138968c7/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fpartitioning.rs?ref=c8e9da44a9e361b43548cb60a46cf3c2138968c7", "patch": "@@ -427,8 +427,6 @@ fn merge_codegen_units<'tcx>(initial_partitioning: &mut PreInliningPartitioning<\n     codegen_units.sort_by_key(|cgu| cgu.name().clone());\n \n     // Merge the two smallest codegen units until the target size is reached.\n-    // Note that \"size\" is estimated here rather inaccurately as the number of\n-    // translation items in a given unit. This could be improved on.\n     while codegen_units.len() > target_cgu_count {\n         // Sort small cgus to the back\n         codegen_units.sort_by_key(|cgu| usize::MAX - cgu.size_estimate());"}, {"sha": "1126c9d2c8cdbddf686df67bae32d26f863354f6", "filename": "src/librustc_trans/base.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c8e9da44a9e361b43548cb60a46cf3c2138968c7/src%2Flibrustc_trans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c8e9da44a9e361b43548cb60a46cf3c2138968c7/src%2Flibrustc_trans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fbase.rs?ref=c8e9da44a9e361b43548cb60a46cf3c2138968c7", "patch": "@@ -824,9 +824,7 @@ pub fn trans_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n     ongoing_translation.submit_pre_translated_module_to_llvm(tcx, metadata_module);\n \n     // We sort the codegen units by size. This way we can schedule work for LLVM\n-    // a bit more efficiently. Note that \"size\" is defined rather crudely at the\n-    // moment as it is just the number of TransItems in the CGU, not taking into\n-    // account the size of each TransItem.\n+    // a bit more efficiently.\n     let codegen_units = {\n         let mut codegen_units = codegen_units;\n         codegen_units.sort_by_key(|cgu| usize::MAX - cgu.size_estimate());"}]}