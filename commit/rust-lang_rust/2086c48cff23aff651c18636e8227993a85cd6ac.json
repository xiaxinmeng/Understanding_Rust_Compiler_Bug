{"sha": "2086c48cff23aff651c18636e8227993a85cd6ac", "node_id": "C_kwDOAAsO6NoAKDIwODZjNDhjZmYyM2FmZjY1MWMxODYzNmU4MjI3OTkzYTg1Y2Q2YWM", "commit": {"author": {"name": "Dorian Scheidt", "email": "dorian.scheidt@gmail.com", "date": "2022-08-18T23:26:54Z"}, "committer": {"name": "Dorian Scheidt", "email": "dorian.scheidt@gmail.com", "date": "2022-08-18T23:26:54Z"}, "message": "Remove mut out params via assoc_fn_target_info", "tree": {"sha": "53b3d8873f2b79c1fd147d30ead88488fb35ca26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/53b3d8873f2b79c1fd147d30ead88488fb35ca26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2086c48cff23aff651c18636e8227993a85cd6ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2086c48cff23aff651c18636e8227993a85cd6ac", "html_url": "https://github.com/rust-lang/rust/commit/2086c48cff23aff651c18636e8227993a85cd6ac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2086c48cff23aff651c18636e8227993a85cd6ac/comments", "author": {"login": "DorianListens", "id": 5692947, "node_id": "MDQ6VXNlcjU2OTI5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5692947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DorianListens", "html_url": "https://github.com/DorianListens", "followers_url": "https://api.github.com/users/DorianListens/followers", "following_url": "https://api.github.com/users/DorianListens/following{/other_user}", "gists_url": "https://api.github.com/users/DorianListens/gists{/gist_id}", "starred_url": "https://api.github.com/users/DorianListens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DorianListens/subscriptions", "organizations_url": "https://api.github.com/users/DorianListens/orgs", "repos_url": "https://api.github.com/users/DorianListens/repos", "events_url": "https://api.github.com/users/DorianListens/events{/privacy}", "received_events_url": "https://api.github.com/users/DorianListens/received_events", "type": "User", "site_admin": false}, "committer": {"login": "DorianListens", "id": 5692947, "node_id": "MDQ6VXNlcjU2OTI5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5692947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DorianListens", "html_url": "https://github.com/DorianListens", "followers_url": "https://api.github.com/users/DorianListens/followers", "following_url": "https://api.github.com/users/DorianListens/following{/other_user}", "gists_url": "https://api.github.com/users/DorianListens/gists{/gist_id}", "starred_url": "https://api.github.com/users/DorianListens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DorianListens/subscriptions", "organizations_url": "https://api.github.com/users/DorianListens/orgs", "repos_url": "https://api.github.com/users/DorianListens/repos", "events_url": "https://api.github.com/users/DorianListens/events{/privacy}", "received_events_url": "https://api.github.com/users/DorianListens/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e27af5fae3e44ebd2339c3dd3fcaa1e9b59de598", "url": "https://api.github.com/repos/rust-lang/rust/commits/e27af5fae3e44ebd2339c3dd3fcaa1e9b59de598", "html_url": "https://github.com/rust-lang/rust/commit/e27af5fae3e44ebd2339c3dd3fcaa1e9b59de598"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "adb5ec2b99d0a85254e6c0ffe8c84e73a3bf9469", "filename": "crates/ide-assists/src/handlers/generate_function.rs", "status": "modified", "additions": 16, "deletions": 4, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/2086c48cff23aff651c18636e8227993a85cd6ac/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_function.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2086c48cff23aff651c18636e8227993a85cd6ac/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_function.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_function.rs?ref=2086c48cff23aff651c18636e8227993a85cd6ac", "patch": "@@ -92,8 +92,8 @@ fn fn_target_info(\n     call: &CallExpr,\n     fn_name: &str,\n ) -> Option<TargetInfo> {\n-    let mut target_module = None;\n-    let mut adt_name = None;\n+    let target_module;\n+    let adt_name = None;\n     let (target, file, insert_offset) = match path.qualifier() {\n         Some(qualifier) => match ctx.sema.resolve_path(&qualifier) {\n             Some(hir::PathResolution::Def(hir::ModuleDef::Module(module))) => {\n@@ -108,11 +108,11 @@ fn fn_target_info(\n                     }\n                 }\n \n-                assoc_fn_target(ctx, call, adt, &mut target_module, fn_name, &mut adt_name)?\n+                return assoc_fn_target_info(ctx, call, adt, fn_name);\n             }\n             Some(hir::PathResolution::SelfType(impl_)) => {\n                 let adt = impl_.self_ty(ctx.db()).as_adt()?;\n-                assoc_fn_target(ctx, call, adt, &mut target_module, fn_name, &mut adt_name)?\n+                return assoc_fn_target_info(ctx, call, adt, fn_name);\n             }\n             _ => {\n                 return None;\n@@ -412,6 +412,18 @@ fn get_method_target(\n     Some((target.clone(), get_insert_offset(&target)))\n }\n \n+fn assoc_fn_target_info(\n+    ctx: &AssistContext<'_>,\n+    call: &CallExpr,\n+    adt: hir::Adt,\n+    fn_name: &str,\n+) -> Option<TargetInfo> {\n+    let mut target_module = None;\n+    let mut adt_name = None;\n+    let (target, file, insert_offset) =\n+        assoc_fn_target(ctx, call, adt, &mut target_module, fn_name, &mut adt_name)?;\n+    Some(TargetInfo { target_module, adt_name, target, file, insert_offset })\n+}\n fn assoc_fn_target(\n     ctx: &AssistContext<'_>,\n     call: &CallExpr,"}]}