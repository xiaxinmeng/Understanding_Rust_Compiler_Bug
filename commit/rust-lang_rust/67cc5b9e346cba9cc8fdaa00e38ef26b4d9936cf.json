{"sha": "67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3Y2M1YjllMzQ2Y2JhOWNjOGZkYWEwMGUzOGVmMjZiNGQ5OTM2Y2Y=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-16T19:09:47Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-17T18:04:05Z"}, "message": "Allow multiple exports in a single export statement. Issue #817", "tree": {"sha": "0e2fc0e98276e6959121137e0c1abf565eec7387", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e2fc0e98276e6959121137e0c1abf565eec7387"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "html_url": "https://github.com/rust-lang/rust/commit/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c95e3ab6a8bdaf5c73b7addbda5af0e2e7e24a10", "url": "https://api.github.com/repos/rust-lang/rust/commits/c95e3ab6a8bdaf5c73b7addbda5af0e2e7e24a10", "html_url": "https://github.com/rust-lang/rust/commit/c95e3ab6a8bdaf5c73b7addbda5af0e2e7e24a10"}], "stats": {"total": 41, "additions": 31, "deletions": 10}, "files": [{"sha": "ec63af65729f689b87602bc327b2c3209865c776", "filename": "src/comp/syntax/ast.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Fcomp%2Fsyntax%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Fcomp%2Fsyntax%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fast.rs?ref=67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "patch": "@@ -564,7 +564,7 @@ tag view_item_ {\n     view_item_use(ident, [@meta_item], node_id);\n     view_item_import(ident, [ident], node_id);\n     view_item_import_glob([ident], node_id);\n-    view_item_export(ident, node_id);\n+    view_item_export([ident], node_id);\n }\n \n type obj_def_ids = {ty: node_id, ctor: node_id};\n@@ -627,11 +627,11 @@ fn is_exported(i: ident, m: _mod) -> bool {\n     let count = 0u;\n     for vi: @ast::view_item in m.view_items {\n         alt vi.node {\n-          ast::view_item_export(id, _) {\n-            if str::eq(i, id) {\n-                // even if it's nonlocal (since it's explicit)\n-\n-                ret true;\n+          ast::view_item_export(ids, _) {\n+            for id in ids {\n+                if str::eq(i, id) {\n+                    ret true;\n+                }\n             }\n             count += 1u;\n           }\n@@ -640,7 +640,7 @@ fn is_exported(i: ident, m: _mod) -> bool {\n     }\n     // If there are no declared exports then\n     // everything not imported is exported\n-\n+    // even if it's nonlocal (since it's explicit)\n     ret count == 0u && !nonlocal;\n }\n "}, {"sha": "e6b65444029dbcfbd9fd754251790ab6550b0ad6", "filename": "src/comp/syntax/parse/parser.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fparse%2Fparser.rs?ref=67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "patch": "@@ -2353,8 +2353,9 @@ fn parse_import(p: &parser) -> ast::view_item_ {\n }\n \n fn parse_export(p: &parser) -> ast::view_item_ {\n-    let id = parse_ident(p);\n-    ret ast::view_item_export(id, p.get_id());\n+    let ids = parse_seq_to_before_end(\n+        token::SEMI, option::some(token::COMMA), parse_ident, p);\n+    ret ast::view_item_export(ids, p.get_id());\n }\n \n fn parse_view_item(p: &parser) -> @ast::view_item {"}, {"sha": "43ab6c5c82381fed9a0c659ae6396f3d9806c26e", "filename": "src/comp/syntax/print/pprust.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fsyntax%2Fprint%2Fpprust.rs?ref=67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "patch": "@@ -1276,7 +1276,11 @@ fn print_view_item(s: &ps, item: &@ast::view_item) {\n         }\n         word(s.s, \"::*\");\n       }\n-      ast::view_item_export(id, _) { head(s, \"export\"); word(s.s, id); }\n+      ast::view_item_export(ids, _) {\n+        head(s, \"export\");\n+        commasep(s, inconsistent, ids,\n+                 fn(s: &ps, w: &str) { word(s.s, w) });\n+      }\n     }\n     word(s.s, \";\");\n     end(s); // end inner head-block"}, {"sha": "9f382cb4b7717f4aaaab8bfe8fa9f96ae65eace3", "filename": "src/test/run-pass/export-multi.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Ftest%2Frun-pass%2Fexport-multi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf/src%2Ftest%2Frun-pass%2Fexport-multi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fexport-multi.rs?ref=67cc5b9e346cba9cc8fdaa00e38ef26b4d9936cf", "patch": "@@ -0,0 +1,16 @@\n+import m::f;\n+import m::g;\n+\n+mod m {\n+    export f, g;\n+\n+    fn f() {}\n+    fn g() {}\n+}\n+\n+fn main() {\n+    f();\n+    g();\n+    m::f();\n+    m::g();\n+}\n\\ No newline at end of file"}]}