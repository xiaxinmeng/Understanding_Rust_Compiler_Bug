{"sha": "6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753", "node_id": "C_kwDOAAsO6NoAKDZiY2YwMWFmZGIxYzIxYTMwY2RmMWZkMjBmOWNkZWY3YzQ4MmU3NTM", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-05T03:26:47Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-08-05T03:26:47Z"}, "message": "Auto merge of #97085 - rylev:test-issue-33172, r=wesleywiser\n\nAdd a test for issue #33172\n\nAdds a test confirming that #33172 has been fixed.\n\nCDB has some surprising results as it looks like the supposedly unmangled static's symbol name is prefixed when it shouldn't be.\n\nr? `@wesleywiser`\n\nCloses #33172", "tree": {"sha": "737b58ed16ad75d476edf4a73f6edac80168533b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/737b58ed16ad75d476edf4a73f6edac80168533b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753", "html_url": "https://github.com/rust-lang/rust/commit/6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2da8820470817bfd3053be969fb38be9645e1a3d", "url": "https://api.github.com/repos/rust-lang/rust/commits/2da8820470817bfd3053be969fb38be9645e1a3d", "html_url": "https://github.com/rust-lang/rust/commit/2da8820470817bfd3053be969fb38be9645e1a3d"}, {"sha": "6cc3b412f827036e07c2e31a275722c452d069f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/6cc3b412f827036e07c2e31a275722c452d069f2", "html_url": "https://github.com/rust-lang/rust/commit/6cc3b412f827036e07c2e31a275722c452d069f2"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "e22d368745f56558507c5a8607d9f7ee2b04ee44", "filename": "src/test/debuginfo/no_mangle-info.rs", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753/src%2Ftest%2Fdebuginfo%2Fno_mangle-info.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753/src%2Ftest%2Fdebuginfo%2Fno_mangle-info.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fno_mangle-info.rs?ref=6bcf01afdb1c21a30cdf1fd20f9cdef7c482e753", "patch": "@@ -0,0 +1,40 @@\n+// compile-flags:-g\n+// min-gdb-version: 10.1\n+\n+// === GDB TESTS ===================================================================================\n+// gdb-command:run\n+// gdb-command:p TEST\n+// gdb-check:$1 = 3735928559\n+// gdb-command:p no_mangle_info::namespace::OTHER_TEST\n+// gdb-check:$2 = 42\n+\n+// === LLDB TESTS ==================================================================================\n+// lldb-command:run\n+// lldb-command:p TEST\n+// lldb-check: (unsigned long) $0 = 3735928559\n+// lldb-command:p OTHER_TEST\n+// lldb-check: (unsigned long) $1 = 42\n+\n+// === CDB TESTS ==================================================================================\n+// cdb-command: g\n+// Note: LLDB and GDB allow referring to items that are in the same namespace of the symbol\n+// we currently have a breakpoint on in an unqualified way. CDB does not, and thus we need to\n+// refer to it in a fully qualified way.\n+// cdb-command: dx a!no_mangle_info::TEST\n+// cdb-check: a!no_mangle_info::TEST : 0xdeadbeef [Type: unsigned __int64]\n+// cdb-command: dx a!no_mangle_info::namespace::OTHER_TEST\n+// cdb-check: a!no_mangle_info::namespace::OTHER_TEST : 0x2a [Type: unsigned __int64]\n+\n+#[no_mangle]\n+pub static TEST: u64 = 0xdeadbeef;\n+\n+// FIXME(rylev, wesleywiser): uncommenting this item breaks the test, and we're not sure why\n+// pub static OTHER_TEST: u64 = 43;\n+pub mod namespace {\n+    pub static OTHER_TEST: u64 = 42;\n+}\n+\n+pub fn main() {\n+    println!(\"TEST: {}\", TEST);\n+    println!(\"OTHER TEST: {}\", namespace::OTHER_TEST); // #break\n+}"}]}