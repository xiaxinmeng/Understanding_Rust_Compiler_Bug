{"sha": "31da06bebb721b7c1d93bf7e4802b95852acca4f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMxZGEwNmJlYmI3MjFiN2MxZDkzYmY3ZTQ4MDJiOTU4NTJhY2NhNGY=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2016-08-05T14:12:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-08-05T14:12:59Z"}, "message": "Rollup merge of #35326 - circuitfox:E0119-update-error-format, r=jonathandturner\n\nE0119 update error format\n\nPart of #35233, fixes #35252\n\nr? @jonathandturner", "tree": {"sha": "d5832811f5b3a0ab04b5abc31db0b0652f834054", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d5832811f5b3a0ab04b5abc31db0b0652f834054"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/31da06bebb721b7c1d93bf7e4802b95852acca4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/31da06bebb721b7c1d93bf7e4802b95852acca4f", "html_url": "https://github.com/rust-lang/rust/commit/31da06bebb721b7c1d93bf7e4802b95852acca4f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/31da06bebb721b7c1d93bf7e4802b95852acca4f/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6597a28144cb18efbdf605f17c83f14f4e63a52a", "url": "https://api.github.com/repos/rust-lang/rust/commits/6597a28144cb18efbdf605f17c83f14f4e63a52a", "html_url": "https://github.com/rust-lang/rust/commit/6597a28144cb18efbdf605f17c83f14f4e63a52a"}, {"sha": "2f36ecfff0fd6f4d5bd83ba61fc1685c4844dd04", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f36ecfff0fd6f4d5bd83ba61fc1685c4844dd04", "html_url": "https://github.com/rust-lang/rust/commit/2f36ecfff0fd6f4d5bd83ba61fc1685c4844dd04"}], "stats": {"total": 18, "additions": 13, "deletions": 5}, "files": [{"sha": "54bd141304d7816e21966f600a6c7c3878e1096f", "filename": "src/librustc_typeck/coherence/overlap.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/31da06bebb721b7c1d93bf7e4802b95852acca4f/src%2Flibrustc_typeck%2Fcoherence%2Foverlap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31da06bebb721b7c1d93bf7e4802b95852acca4f/src%2Flibrustc_typeck%2Fcoherence%2Foverlap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcoherence%2Foverlap.rs?ref=31da06bebb721b7c1d93bf7e4802b95852acca4f", "patch": "@@ -141,12 +141,18 @@ impl<'cx, 'tcx,'v> intravisit::Visitor<'v> for OverlapChecker<'cx, 'tcx> {\n                         self.tcx.sess, self.tcx.span_of_impl(impl_def_id).unwrap(), E0119,\n                         \"conflicting implementations of trait `{}`{}:\",\n                         overlap.trait_desc,\n-                        overlap.self_desc.map_or(String::new(),\n-                                                 |ty| format!(\" for type `{}`\", ty)));\n+                        overlap.self_desc.clone().map_or(String::new(),\n+                                                         |ty| format!(\" for type `{}`\", ty)));\n \n                     match self.tcx.span_of_impl(overlap.with_impl) {\n                         Ok(span) => {\n-                            err.span_note(span, \"conflicting implementation is here:\");\n+                            err.span_label(span,\n+                                           &format!(\"first implementation here\"));\n+                            err.span_label(self.tcx.span_of_impl(impl_def_id).unwrap(),\n+                                           &format!(\"conflicting implementation{}\",\n+                                                    overlap.self_desc\n+                                                        .map_or(String::new(),\n+                                                                |ty| format!(\" for `{}`\", ty))));\n                         }\n                         Err(cname) => {\n                             err.note(&format!(\"conflicting implementation in crate `{}`\","}, {"sha": "56820bcd1840ceafae7c0c45bab2322aa53ac2e4", "filename": "src/test/compile-fail/E0119.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/31da06bebb721b7c1d93bf7e4802b95852acca4f/src%2Ftest%2Fcompile-fail%2FE0119.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31da06bebb721b7c1d93bf7e4802b95852acca4f/src%2Ftest%2Fcompile-fail%2FE0119.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0119.rs?ref=31da06bebb721b7c1d93bf7e4802b95852acca4f", "patch": "@@ -12,7 +12,7 @@ trait MyTrait {\n     fn get(&self) -> usize;\n }\n \n-impl<T> MyTrait for T {\n+impl<T> MyTrait for T { //~ NOTE first implementation here\n     fn get(&self) -> usize { 0 }\n }\n \n@@ -21,6 +21,7 @@ struct Foo {\n }\n \n impl MyTrait for Foo { //~ ERROR E0119\n+                       //~| NOTE conflicting implementation for `Foo`\n     fn get(&self) -> usize { self.value }\n }\n "}, {"sha": "f03daafc63754b533828feddb9f3d8641c0d0c3b", "filename": "src/test/compile-fail/issue-28568.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/31da06bebb721b7c1d93bf7e4802b95852acca4f/src%2Ftest%2Fcompile-fail%2Fissue-28568.rs", "raw_url": "https://github.com/rust-lang/rust/raw/31da06bebb721b7c1d93bf7e4802b95852acca4f/src%2Ftest%2Fcompile-fail%2Fissue-28568.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-28568.rs?ref=31da06bebb721b7c1d93bf7e4802b95852acca4f", "patch": "@@ -11,12 +11,13 @@\n struct MyStruct;\n \n impl Drop for MyStruct {\n-//~^ NOTE conflicting implementation is here\n+//~^ NOTE first implementation here\n     fn drop(&mut self) { }\n }\n \n impl Drop for MyStruct {\n //~^ ERROR conflicting implementations of trait\n+//~| NOTE conflicting implementation for `MyStruct`\n     fn drop(&mut self) { }\n }\n "}]}