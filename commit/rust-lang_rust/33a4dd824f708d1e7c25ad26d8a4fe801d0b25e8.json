{"sha": "33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjMzYTRkZDgyNGY3MDhkMWU3YzI1YWQyNmQ4YTRmZTgwMWQwYjI1ZTg=", "commit": {"author": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2014-07-06T10:02:40Z"}, "committer": {"name": "Bj\u00f6rn Steinbrink", "email": "bsteinbr@gmail.com", "date": "2014-07-18T16:16:18Z"}, "message": "Remove outdated unreachable check from `call_visit_glue`\n\n`call_visit_glue` is only ever called from trans_intrinsic, and the\nblock won't be unreachable there. Also, the comment doesn't make sense\nanymore. When the code was introduced in 38fee9526a the function was\nalso responsible for the cleanup glue, which is no longer the case.\n\nWhile we're at it, also fixed the debug message to output the right\nfunction name.", "tree": {"sha": "a040ab832f527f9dccebb0caeb663fc58ba4f3f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a040ab832f527f9dccebb0caeb663fc58ba4f3f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8", "html_url": "https://github.com/rust-lang/rust/commit/33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8/comments", "author": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dotdash", "id": 230962, "node_id": "MDQ6VXNlcjIzMDk2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/230962?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dotdash", "html_url": "https://github.com/dotdash", "followers_url": "https://api.github.com/users/dotdash/followers", "following_url": "https://api.github.com/users/dotdash/following{/other_user}", "gists_url": "https://api.github.com/users/dotdash/gists{/gist_id}", "starred_url": "https://api.github.com/users/dotdash/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dotdash/subscriptions", "organizations_url": "https://api.github.com/users/dotdash/orgs", "repos_url": "https://api.github.com/users/dotdash/repos", "events_url": "https://api.github.com/users/dotdash/events{/privacy}", "received_events_url": "https://api.github.com/users/dotdash/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5ddc7b4a252fbebee5f2ac87ed755139816d6823", "url": "https://api.github.com/repos/rust-lang/rust/commits/5ddc7b4a252fbebee5f2ac87ed755139816d6823", "html_url": "https://github.com/rust-lang/rust/commit/5ddc7b4a252fbebee5f2ac87ed755139816d6823"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "b96f83246519b1634a9edca9a103bf5c0e6e84bb", "filename": "src/librustc/middle/trans/glue.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8/src%2Flibrustc%2Fmiddle%2Ftrans%2Fglue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8/src%2Flibrustc%2Fmiddle%2Ftrans%2Fglue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fglue.rs?ref=33a4dd824f708d1e7c25ad26d8a4fe801d0b25e8", "patch": "@@ -180,12 +180,8 @@ pub fn lazily_emit_visit_glue(ccx: &CrateContext, ti: &tydesc_info) -> ValueRef\n // See [Note-arg-mode]\n pub fn call_visit_glue(bcx: &Block, v: ValueRef, tydesc: ValueRef,\n                        static_ti: Option<&tydesc_info>) {\n-    let _icx = push_ctxt(\"call_tydesc_glue_full\");\n+    let _icx = push_ctxt(\"call_visit_glue\");\n     let ccx = bcx.ccx();\n-    // NB: Don't short-circuit even if this block is unreachable because\n-    // GC-based cleanup needs to the see that the roots are live.\n-    if bcx.unreachable.get() && !ccx.sess().no_landing_pads() { return; }\n-\n     let static_glue_fn = static_ti.map(|sti| lazily_emit_visit_glue(ccx, sti));\n \n     // When static type info is available, avoid casting to a generic pointer."}]}