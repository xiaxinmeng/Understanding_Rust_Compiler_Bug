{"sha": "b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "node_id": "C_kwDOAAsO6NoAKGI3NDRiYjY3ZmRmZDNlMzQ0MDRjYzlkZjFkODdhY2RmZGI0YTBjYjQ", "commit": {"author": {"name": "Pietro Albini", "email": "pietro.albini@ferrous-systems.com", "date": "2022-04-05T13:09:41Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2022-04-05T21:18:41Z"}, "message": "rustc_trait_selection changes", "tree": {"sha": "a04f5bbf9255d39f63663614a660c95cd0380003", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a04f5bbf9255d39f63663614a660c95cd0380003"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAmJMsjEACgkQPgar6Auq\n8Zzb4w//XXIevWRzpaCbGeSA6hivrd3Bo4rwgaPvrUqfLiqX+gUhxLck9cuuogPf\naEX6y8Je85olU4SnGRrokesIAJHZg7Th6PAk21EdfrwwY+2u7yqkRk4oErvPkW19\nv5lDblFZUVS33/rBfuzcqqm2bDsX3IKrCGFOs01a13+soA7bWjAylJMFWbO2BAzN\nRjv29Ma2cRV/x02dmPl2Me8l1fOjTkFmZG9Gxqx0RENyLDcB0EsBi+PAWBkojVqm\ngmY4kqZP0OXixGwET2k+uP9W2/tH3W6HE+vcKsnoMnDLpVkegyt3vvPLxrSWqgH/\nMM1NHqNvrfevoJJX9BZAYnqDsmPUavrxZn4qYrXPrGByK9TcZQFtoCVByik96jNT\nVjFvxW08RxopeE8vyBe+AQeBOfe4XfMHZpC9c2YZEp8LSLe+TlukQJOWyfT+NUHC\nRXyZ3o/DzrKTQZsAqbQT8LsA1Ccvgh4+bQVsqkXIJWMOMYBcwI+uaCXvO3AezerN\nDJNCYggReEhVy9nPR2s6XxadYQKek4kYrk11mnxlYpB73z3rg4AS1JoZ9oHcyeYK\nZWVOQRJFhmOqRbpHe5P+BfFBABVIsQ1C1QqRCL9VKbIL/4haUs+eFAICju04FMVJ\nZKVvonUt4kBIcN7wBXyXM9Z7ohkK3OjjSoG8znNrQgUsoAHHunU=\n=IHxX\n-----END PGP SIGNATURE-----", "payload": "tree a04f5bbf9255d39f63663614a660c95cd0380003\nparent 181d28bb6110dc974879db20d433f21aa142db3a\nauthor Pietro Albini <pietro.albini@ferrous-systems.com> 1649164181 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1649193521 +0200\n\nrustc_trait_selection changes\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "html_url": "https://github.com/rust-lang/rust/commit/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "181d28bb6110dc974879db20d433f21aa142db3a", "url": "https://api.github.com/repos/rust-lang/rust/commits/181d28bb6110dc974879db20d433f21aa142db3a", "html_url": "https://github.com/rust-lang/rust/commit/181d28bb6110dc974879db20d433f21aa142db3a"}], "stats": {"total": 18, "additions": 0, "deletions": 18}, "files": [{"sha": "06f5824099237b2c36b9e3f9717205c5d4d4e0ce", "filename": "compiler/rustc_trait_selection/src/traits/select/candidate_assembly.rs", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fcandidate_assembly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fcandidate_assembly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fcandidate_assembly.rs?ref=b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "patch": "@@ -307,17 +307,6 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n                 self.assemble_builtin_bound_candidates(sized_conditions, &mut candidates);\n             } else if lang_items.unsize_trait() == Some(def_id) {\n                 self.assemble_candidates_for_unsizing(obligation, &mut candidates);\n-            } else if lang_items.drop_trait() == Some(def_id)\n-                && obligation.predicate.is_const_if_const()\n-            {\n-                // holds to make it easier to transition\n-                // FIXME(fee1-dead): add a note for selection error of `~const Drop`\n-                // when beta is bumped\n-                // FIXME: remove this when beta is bumped\n-                #[cfg(bootstrap)]\n-                {}\n-\n-                candidates.vec.push(SelectionCandidate::ConstDestructCandidate(None))\n             } else if lang_items.destruct_trait() == Some(def_id) {\n                 self.assemble_const_destruct_candidates(obligation, &mut candidates);\n             } else {"}, {"sha": "b97ab39d991fee4dd05b23d2f0f9d46bfe254379", "filename": "compiler/rustc_trait_selection/src/traits/select/confirmation.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fconfirmation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fconfirmation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_trait_selection%2Fsrc%2Ftraits%2Fselect%2Fconfirmation.rs?ref=b744bb67fdfd3e34404cc9df1d87acdfdb4a0cb4", "patch": "@@ -1106,13 +1106,6 @@ impl<'cx, 'tcx> SelectionContext<'cx, 'tcx> {\n         }\n \n         let drop_trait = self.tcx().require_lang_item(LangItem::Drop, None);\n-        // FIXME: remove if statement below when beta is bumped\n-        #[cfg(bootstrap)]\n-        {}\n-\n-        if obligation.predicate.skip_binder().def_id() == drop_trait {\n-            return Ok(ImplSourceConstDestructData { nested: vec![] });\n-        }\n \n         let tcx = self.tcx();\n         let self_ty = self.infcx.shallow_resolve(obligation.self_ty());"}]}