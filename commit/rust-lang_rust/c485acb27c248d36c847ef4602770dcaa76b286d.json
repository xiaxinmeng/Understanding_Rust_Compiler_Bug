{"sha": "c485acb27c248d36c847ef4602770dcaa76b286d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM0ODVhY2IyN2MyNDhkMzZjODQ3ZWY0NjAyNzcwZGNhYTc2YjI4NmQ=", "commit": {"author": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2018-12-19T14:54:51Z"}, "committer": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2018-12-19T14:56:11Z"}, "message": "Only open one issue per tool", "tree": {"sha": "03e3513ae26d2ed8654d88c7b790ccdd8960b60a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/03e3513ae26d2ed8654d88c7b790ccdd8960b60a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c485acb27c248d36c847ef4602770dcaa76b286d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c485acb27c248d36c847ef4602770dcaa76b286d", "html_url": "https://github.com/rust-lang/rust/commit/c485acb27c248d36c847ef4602770dcaa76b286d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c485acb27c248d36c847ef4602770dcaa76b286d/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "46a8fcdf3cf0eb64b5ac70b4847f1facbdd12be1", "url": "https://api.github.com/repos/rust-lang/rust/commits/46a8fcdf3cf0eb64b5ac70b4847f1facbdd12be1", "html_url": "https://github.com/rust-lang/rust/commit/46a8fcdf3cf0eb64b5ac70b4847f1facbdd12be1"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "5cacdb7ef0b57d9cffbf94b89e83030af9541bee", "filename": "src/tools/publish_toolstate.py", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c485acb27c248d36c847ef4602770dcaa76b286d/src%2Ftools%2Fpublish_toolstate.py", "raw_url": "https://github.com/rust-lang/rust/raw/c485acb27c248d36c847ef4602770dcaa76b286d/src%2Ftools%2Fpublish_toolstate.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fpublish_toolstate.py?ref=c485acb27c248d36c847ef4602770dcaa76b286d", "patch": "@@ -46,11 +46,11 @@ def read_current_status(current_commit, path):\n     return {}\n \n def issue(\n-    title,\n     tool,\n     maintainers,\n     relevant_pr_number,\n     relevant_pr_user,\n+    msg,\n ):\n     # Open an issue about the toolstate failure.\n     gh_url = 'https://api.github.com/repos/rust-lang/rust/issues'\n@@ -64,8 +64,11 @@ def issue(\n \n             If you have the time it would be great if you could open a PR against {} that\n             fixes the fallout from your PR.\n-            '''.format(relevant_pr_user, relevant_pr_number, tool, tool),\n-            'title': title,\n+\n+            {}\n+\n+            '''.format(relevant_pr_user, relevant_pr_number, tool, tool, msg),\n+            'title': '\ud83d\udc94 {}'.format(tool),\n             'assignees': assignees,\n             'labels': ['T-compiler', 'I-nominated'],\n         }),\n@@ -105,6 +108,7 @@ def update_latest(\n         for status in latest:\n             tool = status['tool']\n             changed = False\n+            failures = ''\n \n             for os, s in current_status.items():\n                 old = status[os]\n@@ -120,7 +124,11 @@ def update_latest(\n                         .format(tool, os, old, new)\n                     message += '{} (cc {}, @rust-lang/infra).\\n' \\\n                         .format(title, MAINTAINERS.get(tool))\n-                    issue(title, tool, MAINTAINERS.get(tool), relevant_pr_number, relevant_pr_user)\n+                    failures += title\n+                    failures += '\\n'\n+\n+            if failures != '':\n+                issue(tool, MAINTAINERS.get(tool), relevant_pr_number, relevant_pr_user, failures)\n \n             if changed:\n                 status['commit'] = current_commit"}]}