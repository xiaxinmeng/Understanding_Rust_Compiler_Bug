{"sha": "e73985f25d1616c48caf9f66786320f05cc0b1db", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU3Mzk4NWYyNWQxNjE2YzQ4Y2FmOWY2Njc4NjMyMGYwNWNjMGIxZGI=", "commit": {"author": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2021-04-17T01:35:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-04-17T01:35:11Z"}, "message": "Merge pull request #89 from rust-lang/intrinsic-neg\n\nUse neg intrinsics", "tree": {"sha": "284f5a46ab855556548481d219770d526735c719", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/284f5a46ab855556548481d219770d526735c719"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e73985f25d1616c48caf9f66786320f05cc0b1db", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgejtPCRBK7hj4Ov3rIwAAzsgIADVkLttJx7k7dDNHVippHUzk\naz26d5mgOAGOCZ69zR5xlJwN4sOqTfRn8ial/PkGdN76KqvXsmSrUfdHcVI+v/AN\nDippTNCcPJ8JdAu6NgXIv8PN4Sm1zsNuKZdUuhgCeaRU/wvsalkjFVEr+kWX3Wsj\nAvrKFn8OGKoWKtkTcUWDwU3ctdRk8H4gda4ZQgvzOQ4V13gplry6+yFqGnS5ErAV\nMWLTs6S7aKQz3PGFqVjzI0NPX7HC74naDTHOjksuJEmgu7p65wnYF7P5XjtiAl7/\nX1061n4u1ovDJWDRQdrdKqIhWVQcMRnCbCuofB8jPtwYvqtrFrqbSuqpxfTl28I=\n=Nqn2\n-----END PGP SIGNATURE-----\n", "payload": "tree 284f5a46ab855556548481d219770d526735c719\nparent 1c3d957f98a3f0dfde1c1bd82384fd1de085c130\nparent 87b7207acd6bfb07f0f82b72511b22c866a74553\nauthor Caleb Zulawski <caleb.zulawski@gmail.com> 1618623311 -0400\ncommitter GitHub <noreply@github.com> 1618623311 -0400\n\nMerge pull request #89 from rust-lang/intrinsic-neg\n\nUse neg intrinsics"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e73985f25d1616c48caf9f66786320f05cc0b1db", "html_url": "https://github.com/rust-lang/rust/commit/e73985f25d1616c48caf9f66786320f05cc0b1db", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e73985f25d1616c48caf9f66786320f05cc0b1db/comments", "author": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c3d957f98a3f0dfde1c1bd82384fd1de085c130", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c3d957f98a3f0dfde1c1bd82384fd1de085c130", "html_url": "https://github.com/rust-lang/rust/commit/1c3d957f98a3f0dfde1c1bd82384fd1de085c130"}, {"sha": "87b7207acd6bfb07f0f82b72511b22c866a74553", "url": "https://api.github.com/repos/rust-lang/rust/commits/87b7207acd6bfb07f0f82b72511b22c866a74553", "html_url": "https://github.com/rust-lang/rust/commit/87b7207acd6bfb07f0f82b72511b22c866a74553"}], "stats": {"total": 25, "additions": 5, "deletions": 20}, "files": [{"sha": "4f89d00deb2307863aeb8f65839cf5f88b443cc4", "filename": "crates/core_simd/src/intrinsics.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e73985f25d1616c48caf9f66786320f05cc0b1db/crates%2Fcore_simd%2Fsrc%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e73985f25d1616c48caf9f66786320f05cc0b1db/crates%2Fcore_simd%2Fsrc%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcore_simd%2Fsrc%2Fintrinsics.rs?ref=e73985f25d1616c48caf9f66786320f05cc0b1db", "patch": "@@ -40,6 +40,9 @@ extern \"platform-intrinsic\" {\n     /// fptoui/fptosi/uitofp/sitofp\n     pub(crate) fn simd_cast<T, U>(x: T) -> U;\n \n+    /// neg/fneg\n+    pub(crate) fn simd_neg<T>(x: T) -> T;\n+\n     // floor\n     #[cfg(feature = \"std\")]\n     pub(crate) fn simd_floor<T>(x: T) -> T;"}, {"sha": "513eeb423d9263e58ba1fa43add4b59100b8a168", "filename": "crates/core_simd/src/ops.rs", "status": "modified", "additions": 2, "deletions": 20, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/e73985f25d1616c48caf9f66786320f05cc0b1db/crates%2Fcore_simd%2Fsrc%2Fops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e73985f25d1616c48caf9f66786320f05cc0b1db/crates%2Fcore_simd%2Fsrc%2Fops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcore_simd%2Fsrc%2Fops.rs?ref=e73985f25d1616c48caf9f66786320f05cc0b1db", "patch": "@@ -185,25 +185,7 @@ macro_rules! impl_op {\n             {\n                 type Output = Self;\n                 fn neg(self) -> Self::Output {\n-                    Self::splat(0) - self\n-                }\n-            }\n-        }\n-    };\n-\n-    { impl Neg for $type:ident, $scalar:ty, @float } => {\n-        impl_ref_ops! {\n-            impl<const LANES: usize> core::ops::Neg for crate::$type<LANES>\n-            where\n-                crate::$type<LANES>: LanesAtMost32,\n-                crate::SimdU32<LANES>: LanesAtMost32,\n-                crate::SimdU64<LANES>: LanesAtMost32,\n-            {\n-                type Output = Self;\n-                fn neg(self) -> Self::Output {\n-                    // FIXME: Replace this with fneg intrinsic once available.\n-                    // https://github.com/rust-lang/stdsimd/issues/32\n-                    Self::from_bits(Self::splat(-0.0).to_bits() ^ self.to_bits())\n+                    unsafe { crate::intrinsics::simd_neg(self) }\n                 }\n             }\n         }\n@@ -318,7 +300,7 @@ macro_rules! impl_float_ops {\n                 impl_op! { impl Mul for $vector, $scalar }\n                 impl_op! { impl Div for $vector, $scalar }\n                 impl_op! { impl Rem for $vector, $scalar }\n-                impl_op! { impl Neg for $vector, $scalar, @float }\n+                impl_op! { impl Neg for $vector, $scalar }\n                 impl_op! { impl Index for $vector, $scalar }\n             )*\n         )*"}]}