{"sha": "343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM0M2E5MjEyYjA0MjFiNWQ4MWMxNWIyZWY0ZWYwZjAyYzE5ZDI4NTA=", "commit": {"author": {"name": "Adrian Cruceru", "email": "cruceruadrian@gmail.com", "date": "2020-06-25T10:01:02Z"}, "committer": {"name": "Adrian Cruceru", "email": "cruceruadrian@gmail.com", "date": "2020-06-25T10:01:02Z"}, "message": "Fix comments", "tree": {"sha": "dd3152c6361f6d64513b0f5e7d8705573b362f0a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dd3152c6361f6d64513b0f5e7d8705573b362f0a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "html_url": "https://github.com/rust-lang/rust/commit/343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/comments", "author": {"login": "AdrianCX", "id": 31005609, "node_id": "MDQ6VXNlcjMxMDA1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/31005609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdrianCX", "html_url": "https://github.com/AdrianCX", "followers_url": "https://api.github.com/users/AdrianCX/followers", "following_url": "https://api.github.com/users/AdrianCX/following{/other_user}", "gists_url": "https://api.github.com/users/AdrianCX/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdrianCX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdrianCX/subscriptions", "organizations_url": "https://api.github.com/users/AdrianCX/orgs", "repos_url": "https://api.github.com/users/AdrianCX/repos", "events_url": "https://api.github.com/users/AdrianCX/events{/privacy}", "received_events_url": "https://api.github.com/users/AdrianCX/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AdrianCX", "id": 31005609, "node_id": "MDQ6VXNlcjMxMDA1NjA5", "avatar_url": "https://avatars.githubusercontent.com/u/31005609?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AdrianCX", "html_url": "https://github.com/AdrianCX", "followers_url": "https://api.github.com/users/AdrianCX/followers", "following_url": "https://api.github.com/users/AdrianCX/following{/other_user}", "gists_url": "https://api.github.com/users/AdrianCX/gists{/gist_id}", "starred_url": "https://api.github.com/users/AdrianCX/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AdrianCX/subscriptions", "organizations_url": "https://api.github.com/users/AdrianCX/orgs", "repos_url": "https://api.github.com/users/AdrianCX/repos", "events_url": "https://api.github.com/users/AdrianCX/events{/privacy}", "received_events_url": "https://api.github.com/users/AdrianCX/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3b1582bb926a7005ba77bfaa44b1ed59a587509", "url": "https://api.github.com/repos/rust-lang/rust/commits/f3b1582bb926a7005ba77bfaa44b1ed59a587509", "html_url": "https://github.com/rust-lang/rust/commit/f3b1582bb926a7005ba77bfaa44b1ed59a587509"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "345741d90091117a014b257e85b772da1bbe7a80", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "patch": "@@ -133,6 +133,13 @@ fn copy_third_party_objects(\n ) -> Vec<(PathBuf, DependencyType)> {\n     let mut target_deps = vec![];\n \n+    // FIXME: remove this in 2021\n+    if target == \"x86_64-fortanix-unknown-sgx\" {\n+        if env::var_os(\"X86_FORTANIX_SGX_LIBS\").is_some() {\n+            builder.info(\"Warning: X86_FORTANIX_SGX_LIBS environment variable is ignored, libunwind is now compiled as part of rustbuild\");\n+        }\n+    }\n+\n     if builder.config.sanitizers && compiler.stage != 0 {\n         // The sanitizers are only copied in stage1 or above,\n         // to avoid creating dependency on LLVM."}, {"sha": "208d45fa83fe1d4cc8682a023575ffcc5cccfe6e", "filename": "src/ci/docker/dist-various-2/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/src%2Fci%2Fdocker%2Fdist-various-2%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/src%2Fci%2Fdocker%2Fdist-various-2%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-2%2FDockerfile?ref=343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "patch": "@@ -73,7 +73,7 @@ COPY dist-various-2/x86_64-fortanix-unknown-sgx-clang-wrap.sh /usr/bin/x86_64-fo\n RUN ln -s /usr/bin/x86_64-fortanix-unknown-sgx-clang-11 /usr/bin/x86_64-fortanix-unknown-sgx-clang++-11\n # We pass the commit id of the port of LLVM's libunwind to the build script.\n # Any update to the commit id here, should cause the container image to be re-built from this point on.\n-RUN /tmp/build-x86_64-fortanix-unknown-sgx-toolchain.sh \"800f95131fe6acd20b96b6f4723ca3c820f3d379\"\n+RUN /tmp/build-x86_64-fortanix-unknown-sgx-toolchain.sh\n \n COPY dist-various-2/build-wasi-toolchain.sh /tmp/\n RUN /tmp/build-wasi-toolchain.sh"}, {"sha": "78bf4527feff19e953c4d06d4f4bd4e0ecc6fd8d", "filename": "src/ci/docker/dist-various-2/build-x86_64-fortanix-unknown-sgx-toolchain.sh", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-x86_64-fortanix-unknown-sgx-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/343a9212b0421b5d81c15b2ef4ef0f02c19d2850/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-x86_64-fortanix-unknown-sgx-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-2%2Fbuild-x86_64-fortanix-unknown-sgx-toolchain.sh?ref=343a9212b0421b5d81c15b2ef4ef0f02c19d2850", "patch": "@@ -3,14 +3,7 @@\n set -eu\n source shared.sh\n \n-if [ -z \"$1\" ]; then\n-    echo \"Usage: ${0} <commit_id>\"\n-    exit -1\n-fi\n-\n target=\"x86_64-fortanix-unknown-sgx\"\n-url=\"https://github.com/fortanix/llvm-project/archive/${1}.tar.gz\"\n-repo_name=\"llvm-project\"\n \n install_prereq() {\n     curl https://apt.llvm.org/llvm-snapshot.gpg.key|apt-key add -"}]}