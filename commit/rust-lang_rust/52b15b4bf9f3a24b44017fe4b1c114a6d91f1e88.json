{"sha": "52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "node_id": "C_kwDOAAsO6NoAKDUyYjE1YjRiZjlmM2EyNGI0NDAxN2ZlNGIxYzExNGE2ZDkxZjFlODg", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2023-03-23T14:47:49Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2023-03-28T13:31:39Z"}, "message": "rustdoc: Unsupport importing `doc(primitive)` and `doc(keyword)` modules\n\nThese are internal features used for a specific purpose, and modules without imports are enough for that purpose.", "tree": {"sha": "e4fc88e4a07036bf14d4f22aeba9760ae0aacd5c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4fc88e4a07036bf14d4f22aeba9760ae0aacd5c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "html_url": "https://github.com/rust-lang/rust/commit/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "60660371efe59dfc99644e9d709a1b71e25ae2ac", "url": "https://api.github.com/repos/rust-lang/rust/commits/60660371efe59dfc99644e9d709a1b71e25ae2ac", "html_url": "https://github.com/rust-lang/rust/commit/60660371efe59dfc99644e9d709a1b71e25ae2ac"}], "stats": {"total": 19, "additions": 1, "deletions": 18}, "files": [{"sha": "93c2b5e069c4c093b38455c2db1d6442c3bbcd16", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "patch": "@@ -232,14 +232,6 @@ impl ExternalCrate {\n                         hir::ItemKind::Mod(_) => {\n                             as_keyword(Res::Def(DefKind::Mod, id.owner_id.to_def_id()))\n                         }\n-                        hir::ItemKind::Use(path, hir::UseKind::Single)\n-                            if tcx.visibility(id.owner_id).is_public() =>\n-                        {\n-                            path.res\n-                                .iter()\n-                                .find_map(|res| as_keyword(res.expect_non_local()))\n-                                .map(|(_, prim)| (id.owner_id.to_def_id(), prim))\n-                        }\n                         _ => None,\n                     }\n                 })\n@@ -302,15 +294,6 @@ impl ExternalCrate {\n                         hir::ItemKind::Mod(_) => {\n                             as_primitive(Res::Def(DefKind::Mod, id.owner_id.to_def_id()))\n                         }\n-                        hir::ItemKind::Use(path, hir::UseKind::Single)\n-                            if tcx.visibility(id.owner_id).is_public() =>\n-                        {\n-                            path.res\n-                                .iter()\n-                                .find_map(|res| as_primitive(res.expect_non_local()))\n-                                // Pretend the primitive is local.\n-                                .map(|(_, prim)| (id.owner_id.to_def_id(), prim))\n-                        }\n                         _ => None,\n                     }\n                 })"}, {"sha": "614f2c1c08e87a4af95c4353b573b12d845383a2", "filename": "tests/rustdoc/issue-15318-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88/tests%2Frustdoc%2Fissue-15318-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88/tests%2Frustdoc%2Fissue-15318-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fissue-15318-2.rs?ref=52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "patch": "@@ -6,7 +6,7 @@ extern crate issue_15318;\n \n pub use issue_15318::ptr;\n \n-// @has issue_15318_2/fn.bar.html \\\n+// @!has issue_15318_2/fn.bar.html \\\n //          '//*[@href=\"primitive.pointer.html\"]' \\\n //          '*mut T'\n pub fn bar<T>(ptr: *mut T) {}"}]}