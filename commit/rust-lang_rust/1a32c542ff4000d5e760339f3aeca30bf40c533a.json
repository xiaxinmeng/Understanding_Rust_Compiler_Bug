{"sha": "1a32c542ff4000d5e760339f3aeca30bf40c533a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFhMzJjNTQyZmY0MDAwZDVlNzYwMzM5ZjNhZWNhMzBiZjQwYzUzM2E=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-11-09T17:16:08Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2020-11-09T17:16:08Z"}, "message": "Update Cranelift", "tree": {"sha": "914190730a075b3870c775db42ac2872c909e01f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/914190730a075b3870c775db42ac2872c909e01f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1a32c542ff4000d5e760339f3aeca30bf40c533a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1a32c542ff4000d5e760339f3aeca30bf40c533a", "html_url": "https://github.com/rust-lang/rust/commit/1a32c542ff4000d5e760339f3aeca30bf40c533a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1a32c542ff4000d5e760339f3aeca30bf40c533a/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf3aa64c662586548f1c5cebbde3cc5864a1cd45", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf3aa64c662586548f1c5cebbde3cc5864a1cd45", "html_url": "https://github.com/rust-lang/rust/commit/cf3aa64c662586548f1c5cebbde3cc5864a1cd45"}], "stats": {"total": 66, "additions": 33, "deletions": 33}, "files": [{"sha": "f7edbabfe7f135fbdd715f174424c704ed753935", "filename": "Cargo.lock", "status": "modified", "additions": 26, "deletions": 26, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/1a32c542ff4000d5e760339f3aeca30bf40c533a/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/1a32c542ff4000d5e760339f3aeca30bf40c533a/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=1a32c542ff4000d5e760339f3aeca30bf40c533a", "patch": "@@ -43,16 +43,16 @@ checksum = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"\n \n [[package]]\n name = \"cranelift-bforest\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"cranelift-entity\",\n ]\n \n [[package]]\n name = \"cranelift-codegen\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"byteorder\",\n  \"cranelift-bforest\",\n@@ -69,27 +69,27 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-codegen-meta\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"cranelift-codegen-shared\",\n  \"cranelift-entity\",\n ]\n \n [[package]]\n name = \"cranelift-codegen-shared\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n \n [[package]]\n name = \"cranelift-entity\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n \n [[package]]\n name = \"cranelift-frontend\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"cranelift-codegen\",\n  \"log\",\n@@ -99,8 +99,8 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-module\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\",\n@@ -111,8 +111,8 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-native\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"cranelift-codegen\",\n  \"raw-cpuid\",\n@@ -121,8 +121,8 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-object\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"anyhow\",\n  \"cranelift-codegen\",\n@@ -134,8 +134,8 @@ dependencies = [\n \n [[package]]\n name = \"cranelift-simplejit\"\n-version = \"0.67.0\"\n-source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#44cbdecea03c360ea82e6482f0cf6c614effef21\"\n+version = \"0.68.0\"\n+source = \"git+https://github.com/bytecodealliance/wasmtime/?branch=main#a9d8abbf5357ee0f176af3e1985a6425fb3ffda4\"\n dependencies = [\n  \"cranelift-codegen\",\n  \"cranelift-entity\",\n@@ -187,9 +187,9 @@ checksum = \"8f5f3913fa0bfe7ee1fd8248b6b9f42a5af4b9d65ec2dd2c3c26132b950ecfc2\"\n \n [[package]]\n name = \"gimli\"\n-version = \"0.22.0\"\n+version = \"0.23.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"aaf91faf136cb47367fa430cd46e37a788775e7fa104f8b4bcb3861dc389b724\"\n+checksum = \"f6503fe142514ca4799d4c26297c4248239fe8838d827db6bd6065c6ed29a6ce\"\n dependencies = [\n  \"indexmap\",\n ]\n@@ -246,9 +246,9 @@ dependencies = [\n \n [[package]]\n name = \"object\"\n-version = \"0.21.1\"\n+version = \"0.22.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"37fd5004feb2ce328a52b0b3d01dbf4ffff72583493900ed15f22d4111c51693\"\n+checksum = \"8d3b63360ec3cb337817c2dbd47ab4a0f170d285d8e5a2064600f3def1402397\"\n dependencies = [\n  \"crc32fast\",\n  \"indexmap\",\n@@ -274,9 +274,9 @@ dependencies = [\n \n [[package]]\n name = \"raw-cpuid\"\n-version = \"7.0.3\"\n+version = \"8.1.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"b4a349ca83373cfa5d6dbb66fd76e58b2cca08da71a5f6400de0a0a6a9bceeaf\"\n+checksum = \"1fdf7d9dbd43f3d81d94a49c1c3df73cc2b3827995147e6cf7f89d4ec5483e73\"\n dependencies = [\n  \"bitflags\",\n  \"cc\","}, {"sha": "cbff06749d3e93d51c1c1d8201be2a705b06cb8e", "filename": "Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1a32c542ff4000d5e760339f3aeca30bf40c533a/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1a32c542ff4000d5e760339f3aeca30bf40c533a/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=1a32c542ff4000d5e760339f3aeca30bf40c533a", "patch": "@@ -15,8 +15,8 @@ cranelift-module = { git = \"https://github.com/bytecodealliance/wasmtime/\", bran\n cranelift-simplejit = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\", optional = true }\n cranelift-object = { git = \"https://github.com/bytecodealliance/wasmtime/\", branch = \"main\" }\n target-lexicon = \"0.11.0\"\n-gimli = { version = \"0.22.0\", default-features = false, features = [\"write\"]}\n-object = { version = \"0.21.1\", default-features = false, features = [\"std\", \"read_core\", \"write\", \"coff\", \"elf\", \"macho\", \"pe\"] }\n+gimli = { version = \"0.23.0\", default-features = false, features = [\"write\"]}\n+object = { version = \"0.22.0\", default-features = false, features = [\"std\", \"read_core\", \"write\", \"coff\", \"elf\", \"macho\", \"pe\"] }\n \n ar = { git = \"https://github.com/bjorn3/rust-ar.git\", branch = \"do_not_remove_cg_clif_ranlib\" }\n indexmap = \"1.0.2\""}, {"sha": "87cfc45be8c139d98295f62349feb85971f86bed", "filename": "src/archive.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1a32c542ff4000d5e760339f3aeca30bf40c533a/src%2Farchive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a32c542ff4000d5e760339f3aeca30bf40c533a/src%2Farchive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Farchive.rs?ref=1a32c542ff4000d5e760339f3aeca30bf40c533a", "patch": "@@ -8,7 +8,7 @@ use rustc_codegen_ssa::back::archive::{find_library, ArchiveBuilder};\n use rustc_codegen_ssa::METADATA_FILENAME;\n use rustc_session::Session;\n \n-use object::{Object, SymbolKind};\n+use object::{Object, ObjectSymbol, SymbolKind};\n \n #[derive(Debug)]\n enum ArchiveEntry {\n@@ -184,7 +184,7 @@ impl<'a> ArchiveBuilder<'a> for ArArchiveBuilder<'a> {\n                             entry_name.as_bytes().to_vec(),\n                             object\n                                 .symbols()\n-                                .filter_map(|(_index, symbol)| {\n+                                .filter_map(|symbol| {\n                                     if symbol.is_undefined()\n                                         || symbol.is_local()\n                                         || symbol.kind() != SymbolKind::Data\n@@ -193,7 +193,7 @@ impl<'a> ArchiveBuilder<'a> for ArArchiveBuilder<'a> {\n                                     {\n                                         None\n                                     } else {\n-                                        symbol.name().map(|name| name.as_bytes().to_vec())\n+                                        symbol.name().map(|name| name.as_bytes().to_vec()).ok()\n                                     }\n                                 })\n                                 .collect::<Vec<_>>(),"}, {"sha": "96a543e64d0b6a7ced64bd6ca40aa8712cdf7f35", "filename": "src/driver/jit.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1a32c542ff4000d5e760339f3aeca30bf40c533a/src%2Fdriver%2Fjit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1a32c542ff4000d5e760339f3aeca30bf40c533a/src%2Fdriver%2Fjit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver%2Fjit.rs?ref=1a32c542ff4000d5e760339f3aeca30bf40c533a", "patch": "@@ -140,11 +140,11 @@ fn load_imported_symbols_for_jit(tcx: TyCtxt<'_>) -> Vec<(String, *const u8)> {\n \n     let mut imported_symbols = Vec::new();\n     for path in dylib_paths {\n-        use object::Object;\n+        use object::{Object, ObjectSymbol};\n         let lib = libloading::Library::new(&path).unwrap();\n         let obj = std::fs::read(path).unwrap();\n         let obj = object::File::parse(&obj).unwrap();\n-        imported_symbols.extend(obj.dynamic_symbols().filter_map(|(_idx, symbol)| {\n+        imported_symbols.extend(obj.dynamic_symbols().filter_map(|symbol| {\n             let name = symbol.name().unwrap().to_string();\n             if name.is_empty() || !symbol.is_global() || symbol.is_undefined() {\n                 return None;"}]}