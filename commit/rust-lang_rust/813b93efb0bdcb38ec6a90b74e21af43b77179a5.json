{"sha": "813b93efb0bdcb38ec6a90b74e21af43b77179a5", "node_id": "C_kwDOAAsO6NoAKDgxM2I5M2VmYjBiZGNiMzhlYzZhOTBiNzRlMjFhZjQzYjc3MTc5YTU", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-04-07T18:16:13Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2022-04-07T18:16:13Z"}, "message": "rustdoc doctest: include signal number in exit status\n\nRelated to #95601", "tree": {"sha": "cd2f16227c4442904ea827df7941dc6c202ad585", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cd2f16227c4442904ea827df7941dc6c202ad585"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/813b93efb0bdcb38ec6a90b74e21af43b77179a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/813b93efb0bdcb38ec6a90b74e21af43b77179a5", "html_url": "https://github.com/rust-lang/rust/commit/813b93efb0bdcb38ec6a90b74e21af43b77179a5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/813b93efb0bdcb38ec6a90b74e21af43b77179a5/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd38eea722c1f6f970a314435533e91cc2c14ffb", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd38eea722c1f6f970a314435533e91cc2c14ffb", "html_url": "https://github.com/rust-lang/rust/commit/dd38eea722c1f6f970a314435533e91cc2c14ffb"}], "stats": {"total": 8, "additions": 1, "deletions": 7}, "files": [{"sha": "eabe0803b4993ca1f19931273e203bf60e1111b4", "filename": "src/librustdoc/doctest.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/813b93efb0bdcb38ec6a90b74e21af43b77179a5/src%2Flibrustdoc%2Fdoctest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/813b93efb0bdcb38ec6a90b74e21af43b77179a5/src%2Flibrustdoc%2Fdoctest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fdoctest.rs?ref=813b93efb0bdcb38ec6a90b74e21af43b77179a5", "patch": "@@ -1069,13 +1069,7 @@ impl Tester for Collector {\n                             }\n                         }\n                         TestFailure::ExecutionFailure(out) => {\n-                            let reason = if let Some(code) = out.status.code() {\n-                                format!(\"exit code {code}\")\n-                            } else {\n-                                String::from(\"terminated by signal\")\n-                            };\n-\n-                            eprintln!(\"Test executable failed ({reason}).\");\n+                            eprintln!(\"Test executable failed ({reason}).\", reason = out.status);\n \n                             // FIXME(#12309): An unfortunate side-effect of capturing the test\n                             // executable's output is that the relative ordering between the test's"}]}