{"sha": "e0943504e4d4c42342cb7c0fa24895f991b01ca8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUwOTQzNTA0ZTRkNGM0MjM0MmNiN2MwZmEyNDg5NWY5OTFiMDFjYTg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-17T15:32:13Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-11-17T15:32:13Z"}, "message": "auto merge of #10523 : huonw/rust/10522, r=cmr\n\nIf any of the digits was one past the maximum (e.g. 10**9 for base 10),\r\nthen this wasn't detected correctly and so the length of the digit was\r\none more than expected, causing a very large allocation.\r\n\r\nFixes #10522.\r\nFixes #10288.", "tree": {"sha": "ea862d2329f196894b36f3dc35127e7487de2e0f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ea862d2329f196894b36f3dc35127e7487de2e0f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e0943504e4d4c42342cb7c0fa24895f991b01ca8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e0943504e4d4c42342cb7c0fa24895f991b01ca8", "html_url": "https://github.com/rust-lang/rust/commit/e0943504e4d4c42342cb7c0fa24895f991b01ca8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e0943504e4d4c42342cb7c0fa24895f991b01ca8/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5208332a1a0cc2d07d52c117a6abe7e2c8c1f36e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5208332a1a0cc2d07d52c117a6abe7e2c8c1f36e", "html_url": "https://github.com/rust-lang/rust/commit/5208332a1a0cc2d07d52c117a6abe7e2c8c1f36e"}, {"sha": "c8e6a38693d73e06e59c69fbd40c3924836a10e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8e6a38693d73e06e59c69fbd40c3924836a10e9", "html_url": "https://github.com/rust-lang/rust/commit/c8e6a38693d73e06e59c69fbd40c3924836a10e9"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "b79c2bd5cb565110915302f105991c9de6022711", "filename": "src/libextra/num/bigint.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e0943504e4d4c42342cb7c0fa24895f991b01ca8/src%2Flibextra%2Fnum%2Fbigint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e0943504e4d4c42342cb7c0fa24895f991b01ca8/src%2Flibextra%2Fnum%2Fbigint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibextra%2Fnum%2Fbigint.rs?ref=e0943504e4d4c42342cb7c0fa24895f991b01ca8", "patch": "@@ -660,7 +660,7 @@ impl ToStrRadix for BigUint {\n             let divider    = FromPrimitive::from_uint(base).unwrap();\n             let mut result = ~[];\n             let mut m      = n;\n-            while m > divider {\n+            while m >= divider {\n                 let (d, m0) = m.div_mod_floor(&divider);\n                 result.push(m0.to_uint().unwrap() as BigDigit);\n                 m = d;\n@@ -2520,6 +2520,11 @@ mod bigint_tests {\n         check(\"-10\", Some(-10));\n         check(\"Z\", None);\n         check(\"_\", None);\n+\n+        // issue 10522, this hit an edge case that caused it to\n+        // attempt to allocate a vector of size (-1u) == huge.\n+        let x: BigInt = from_str(\"1\" + \"0\".repeat(36)).unwrap();\n+        let _y = x.to_str();\n     }\n \n     #[test]"}]}