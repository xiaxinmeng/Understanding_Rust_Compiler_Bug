{"sha": "49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6", "node_id": "C_kwDOAAsO6NoAKDQ5YTVhYTRmMGNkMmUyMWYwNzEwNjdlN2EwYzUzNDc0YmE5ZTg2YzY", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-11-11T18:07:03Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-11-12T10:03:28Z"}, "message": "Verify predicates on RPIT and async opaques.", "tree": {"sha": "bec1baf802c6cba07c62596ddb0c9d55ac9adc12", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bec1baf802c6cba07c62596ddb0c9d55ac9adc12"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6", "html_url": "https://github.com/rust-lang/rust/commit/49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "da9dca704003df6fcc85a535aa578b42b13de590", "url": "https://api.github.com/repos/rust-lang/rust/commits/da9dca704003df6fcc85a535aa578b42b13de590", "html_url": "https://github.com/rust-lang/rust/commit/da9dca704003df6fcc85a535aa578b42b13de590"}], "stats": {"total": 20, "additions": 0, "deletions": 20}, "files": [{"sha": "5f4127632e33bf6e4ee477a0350efd98e5747b5e", "filename": "compiler/rustc_hir_analysis/src/collect/predicates_of.rs", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Fpredicates_of.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Fpredicates_of.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_analysis%2Fsrc%2Fcollect%2Fpredicates_of.rs?ref=49a5aa4f0cd2e21f071067e7a0c53474ba9e86c6", "patch": "@@ -106,26 +106,6 @@ fn gather_explicit_predicates_of(tcx: TyCtxt<'_>, def_id: DefId) -> ty::GenericP\n                     is_trait = Some(ty::TraitRef::identity(tcx, def_id));\n                     *generics\n                 }\n-                ItemKind::OpaqueTy(OpaqueTy {\n-                    origin: hir::OpaqueTyOrigin::AsyncFn(..) | hir::OpaqueTyOrigin::FnReturn(..),\n-                    ..\n-                }) => {\n-                    // return-position impl trait\n-                    //\n-                    // We don't inherit predicates from the parent here:\n-                    // If we have, say `fn f<'a, T: 'a>() -> impl Sized {}`\n-                    // then the return type is `f::<'static, T>::{{opaque}}`.\n-                    //\n-                    // If we inherited the predicates of `f` then we would\n-                    // require that `T: 'static` to show that the return\n-                    // type is well-formed.\n-                    //\n-                    // The only way to have something with this opaque type\n-                    // is from the return type of the containing function,\n-                    // which will ensure that the function's predicates\n-                    // hold.\n-                    return ty::GenericPredicates { parent: None, predicates: &[] };\n-                }\n                 ItemKind::OpaqueTy(OpaqueTy {\n                     ref generics,\n                     origin: hir::OpaqueTyOrigin::TyAlias,"}]}