{"sha": "6b4789d7cf8d4165398985ff89dfdbaa5548d39a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiNDc4OWQ3Y2Y4ZDQxNjUzOTg5ODVmZjg5ZGZkYmFhNTU0OGQzOWE=", "commit": {"author": {"name": "Bastian Kersting", "email": "bastian@cmbt.de", "date": "2021-02-06T19:05:51Z"}, "committer": {"name": "Bastian Kersting", "email": "bastian@cmbt.de", "date": "2021-02-06T19:05:51Z"}, "message": "Fixed suggestion in macro invocations", "tree": {"sha": "d3c18200f35554b985c260ff3a542bfd24b1b7c9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d3c18200f35554b985c260ff3a542bfd24b1b7c9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b4789d7cf8d4165398985ff89dfdbaa5548d39a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b4789d7cf8d4165398985ff89dfdbaa5548d39a", "html_url": "https://github.com/rust-lang/rust/commit/6b4789d7cf8d4165398985ff89dfdbaa5548d39a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b4789d7cf8d4165398985ff89dfdbaa5548d39a/comments", "author": {"login": "1c3t3a", "id": 45260993, "node_id": "MDQ6VXNlcjQ1MjYwOTkz", "avatar_url": "https://avatars.githubusercontent.com/u/45260993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1c3t3a", "html_url": "https://github.com/1c3t3a", "followers_url": "https://api.github.com/users/1c3t3a/followers", "following_url": "https://api.github.com/users/1c3t3a/following{/other_user}", "gists_url": "https://api.github.com/users/1c3t3a/gists{/gist_id}", "starred_url": "https://api.github.com/users/1c3t3a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1c3t3a/subscriptions", "organizations_url": "https://api.github.com/users/1c3t3a/orgs", "repos_url": "https://api.github.com/users/1c3t3a/repos", "events_url": "https://api.github.com/users/1c3t3a/events{/privacy}", "received_events_url": "https://api.github.com/users/1c3t3a/received_events", "type": "User", "site_admin": false}, "committer": {"login": "1c3t3a", "id": 45260993, "node_id": "MDQ6VXNlcjQ1MjYwOTkz", "avatar_url": "https://avatars.githubusercontent.com/u/45260993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/1c3t3a", "html_url": "https://github.com/1c3t3a", "followers_url": "https://api.github.com/users/1c3t3a/followers", "following_url": "https://api.github.com/users/1c3t3a/following{/other_user}", "gists_url": "https://api.github.com/users/1c3t3a/gists{/gist_id}", "starred_url": "https://api.github.com/users/1c3t3a/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/1c3t3a/subscriptions", "organizations_url": "https://api.github.com/users/1c3t3a/orgs", "repos_url": "https://api.github.com/users/1c3t3a/repos", "events_url": "https://api.github.com/users/1c3t3a/events{/privacy}", "received_events_url": "https://api.github.com/users/1c3t3a/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f1c15840a2bbd953414a650d24ee22d3a1c710f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/f1c15840a2bbd953414a650d24ee22d3a1c710f5", "html_url": "https://github.com/rust-lang/rust/commit/f1c15840a2bbd953414a650d24ee22d3a1c710f5"}], "stats": {"total": 7, "additions": 3, "deletions": 4}, "files": [{"sha": "839c995e52562ab795b3c3e2dfc26b9ad62d06d9", "filename": "clippy_lints/src/semicolon_if_nothing_returned.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6b4789d7cf8d4165398985ff89dfdbaa5548d39a/clippy_lints%2Fsrc%2Fsemicolon_if_nothing_returned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b4789d7cf8d4165398985ff89dfdbaa5548d39a/clippy_lints%2Fsrc%2Fsemicolon_if_nothing_returned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fsemicolon_if_nothing_returned.rs?ref=6b4789d7cf8d4165398985ff89dfdbaa5548d39a", "patch": "@@ -49,12 +49,12 @@ impl LateLintPass<'_> for SemicolonIfNothingReturned {\n                     return;\n                 }\n \n-                let sugg = sugg::Sugg::hir(cx, &expr, \"..\");\n+                let sugg = sugg::Sugg::hir_with_macro_callsite(cx, &expr, \"..\");\n                 let suggestion = format!(\"{0};\", sugg);\n                 span_lint_and_sugg(\n                     cx,\n                     SEMICOLON_IF_NOTHING_RETURNED,\n-                    expr.span,\n+                    expr.span.source_callsite(),\n                     \"consider adding a `;` to the last statement for consistent formatting\",\n                     \"add a `;` here\",\n                     suggestion,"}, {"sha": "b73f89675383f12d53aeb4298898502c443af5b0", "filename": "tests/ui/semicolon_if_nothing_returned.stderr", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6b4789d7cf8d4165398985ff89dfdbaa5548d39a/tests%2Fui%2Fsemicolon_if_nothing_returned.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6b4789d7cf8d4165398985ff89dfdbaa5548d39a/tests%2Fui%2Fsemicolon_if_nothing_returned.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsemicolon_if_nothing_returned.stderr?ref=6b4789d7cf8d4165398985ff89dfdbaa5548d39a", "patch": "@@ -2,10 +2,9 @@ error: consider adding a `;` to the last statement for consistent formatting\n   --> $DIR/semicolon_if_nothing_returned.rs:8:5\n    |\n LL |     println!(\"Hello\")\n-   |     ^^^^^^^^^^^^^^^^^\n+   |     ^^^^^^^^^^^^^^^^^ help: add a `;` here: `println!(\"Hello\");`\n    |\n    = note: `-D clippy::semicolon-if-nothing-returned` implied by `-D warnings`\n-   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: consider adding a `;` to the last statement for consistent formatting\n   --> $DIR/semicolon_if_nothing_returned.rs:12:5"}]}