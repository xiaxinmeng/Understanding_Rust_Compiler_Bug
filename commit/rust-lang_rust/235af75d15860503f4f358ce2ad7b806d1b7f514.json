{"sha": "235af75d15860503f4f358ce2ad7b806d1b7f514", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIzNWFmNzVkMTU4NjA1MDNmNGYzNThjZTJhZDdiODA2ZDFiN2Y1MTQ=", "commit": {"author": {"name": "Harm Berntsen", "email": "harm.berntsen@nedap.com", "date": "2018-05-04T06:53:27Z"}, "committer": {"name": "Harm Berntsen", "email": "harm.berntsen@nedap.com", "date": "2018-05-04T06:59:49Z"}, "message": "Merge armv5te musl container with dist-various-1", "tree": {"sha": "700b5645418d5e7f36b5ac67d2f7b95a31925d1f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/700b5645418d5e7f36b5ac67d2f7b95a31925d1f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/235af75d15860503f4f358ce2ad7b806d1b7f514", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJMBAABCAA2FiEEiF+uLp/Dqc3l0uG3fSuP11GmHNcFAlrsBOYYHGhhcm0uYmVy\nbnRzZW5AbmVkYXAuY29tAAoJEH0rj9dRphzXRhQQALBJ+qlafhmSdGSnlexcgwgW\nAbOAJwT/Dur5c6UcX+umYdblol0uFOsGaP2Y7JjWCN+wfkzlPxJ55YLsYDvizT/E\nBwbzYa0D+WQS5baeI6rKoV5UBxRV14wPlhxeWqehQqZJ4TDwfJcAy5v2bIXFj9AW\n4GaAItVt0JF6Ek0DhPl5hqDAb3QWLs/G7TUnuaXmbd3rhw5xz8DnKla/goU49IOv\nSpZwiNNIfbObR+Ut3MMEvMXo6pYQMXiraHk/oxPq75PnfD7oOPO/1eRTQRbn8b+s\nycm/fvV9gfrhSMuq6xVJFcqadR3H0aFXrM4fOuKOcG+n9DHMJ/98zwy8Cwodham1\nta0W6Np1BIH4C4ZfGM1H+dDLGIHsTjAKzkynby2dO89tNArqna6A7ir8NFeKon2F\nIo4nhD5WCbTex9hU/DevnKfx3scGswXmbfypsLJjlPpNbeFuW+Cesx7WUrmyyLp7\nfuyo74l0G+vA0VqYT3zpVs4aTbDuBTj9kcSe5EbmCkXTRb1eFXnpTEGZOTA+gu3H\nXaqMMXYZHf9NA+1Ibh4ZVCMZ+bYJm1V6yor/nd8HVaKCd80ptNkdg7o7AwJIxDMe\nRxFjquWYlkUEYE3ssqzz88DhGsJ4jtfI7rFiS3oYPAQW5PGBdyZO6GKLDYYL8wWK\n2951Tnv6tIujZQnpCHuA\n=+gCL\n-----END PGP SIGNATURE-----", "payload": "tree 700b5645418d5e7f36b5ac67d2f7b95a31925d1f\nparent 80f1912d83c977ac12946f1a12d2523383a0d3b7\nauthor Harm Berntsen <harm.berntsen@nedap.com> 1525416807 +0200\ncommitter Harm Berntsen <harm.berntsen@nedap.com> 1525417189 +0200\n\nMerge armv5te musl container with dist-various-1\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/235af75d15860503f4f358ce2ad7b806d1b7f514", "html_url": "https://github.com/rust-lang/rust/commit/235af75d15860503f4f358ce2ad7b806d1b7f514", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/235af75d15860503f4f358ce2ad7b806d1b7f514/comments", "author": {"login": "harm-nedap", "id": 36404260, "node_id": "MDQ6VXNlcjM2NDA0MjYw", "avatar_url": "https://avatars.githubusercontent.com/u/36404260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harm-nedap", "html_url": "https://github.com/harm-nedap", "followers_url": "https://api.github.com/users/harm-nedap/followers", "following_url": "https://api.github.com/users/harm-nedap/following{/other_user}", "gists_url": "https://api.github.com/users/harm-nedap/gists{/gist_id}", "starred_url": "https://api.github.com/users/harm-nedap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harm-nedap/subscriptions", "organizations_url": "https://api.github.com/users/harm-nedap/orgs", "repos_url": "https://api.github.com/users/harm-nedap/repos", "events_url": "https://api.github.com/users/harm-nedap/events{/privacy}", "received_events_url": "https://api.github.com/users/harm-nedap/received_events", "type": "User", "site_admin": false}, "committer": {"login": "harm-nedap", "id": 36404260, "node_id": "MDQ6VXNlcjM2NDA0MjYw", "avatar_url": "https://avatars.githubusercontent.com/u/36404260?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harm-nedap", "html_url": "https://github.com/harm-nedap", "followers_url": "https://api.github.com/users/harm-nedap/followers", "following_url": "https://api.github.com/users/harm-nedap/following{/other_user}", "gists_url": "https://api.github.com/users/harm-nedap/gists{/gist_id}", "starred_url": "https://api.github.com/users/harm-nedap/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harm-nedap/subscriptions", "organizations_url": "https://api.github.com/users/harm-nedap/orgs", "repos_url": "https://api.github.com/users/harm-nedap/repos", "events_url": "https://api.github.com/users/harm-nedap/events{/privacy}", "received_events_url": "https://api.github.com/users/harm-nedap/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "80f1912d83c977ac12946f1a12d2523383a0d3b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/80f1912d83c977ac12946f1a12d2523383a0d3b7", "html_url": "https://github.com/rust-lang/rust/commit/80f1912d83c977ac12946f1a12d2523383a0d3b7"}], "stats": {"total": 57, "additions": 9, "deletions": 48}, "files": [{"sha": "af2e410a3795333c5986d6a4ce194dbd44605f63", "filename": "src/ci/docker/dist-armv5te-linux-musleabi/Dockerfile", "status": "removed", "additions": 0, "deletions": 47, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/80f1912d83c977ac12946f1a12d2523383a0d3b7/src%2Fci%2Fdocker%2Fdist-armv5te-linux-musleabi%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/80f1912d83c977ac12946f1a12d2523383a0d3b7/src%2Fci%2Fdocker%2Fdist-armv5te-linux-musleabi%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-armv5te-linux-musleabi%2FDockerfile?ref=80f1912d83c977ac12946f1a12d2523383a0d3b7", "patch": "@@ -1,47 +0,0 @@\n-FROM ubuntu:16.04\n-\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-  g++ \\\n-  make \\\n-  file \\\n-  curl \\\n-  ca-certificates \\\n-  python2.7 \\\n-  git \\\n-  cmake \\\n-  sudo \\\n-  xz-utils \\\n-  zlib1g-dev \\\n-  g++-arm-linux-gnueabi \\\n-  bzip2 \\\n-  patch \\\n-  pkg-config\n-\n-WORKDIR /build\n-\n-# Suppress some warnings in the openwrt toolchains we downloaded\n-ENV STAGING_DIR=/tmp\n-\n-COPY scripts/musl.sh /build\n-RUN env \\\n-    CC=arm-linux-gnueabi-gcc CFLAGS=\"-march=armv5te -marm -mfloat-abi=soft\" \\\n-    CXX=arm-linux-gnueabi-g++ CXXFLAGS=\"-march=armv5te -marm -mfloat-abi=soft\" \\\n-    bash musl.sh armv5te && \\\n-    rm -rf /build/*\n-\n-ENV TARGETS=armv5te-unknown-linux-musleabi\n-\n-# FIXME: remove armv5te vars after https://github.com/alexcrichton/cc-rs/issues/271\n-#        get fixed and cc update\n-ENV CC_armv5te_unknown_linux_musleabi=arm-linux-gnueabi-gcc \\\n-    CFLAGS_armv5te_unknown_linux_musleabi=\"-march=armv5te -marm -mfloat-abi=soft\"\n-\n-ENV RUST_CONFIGURE_ARGS \\\n-      --musl-root-armv5te=/musl-armv5te \\\n-      --disable-docs\n-\n-ENV SCRIPT python2.7 ../x.py dist --target $TARGETS\n-\n-# sccache\n-COPY scripts/sccache.sh /scripts/\n-RUN sh /scripts/sccache.sh"}, {"sha": "b195decfcf57421f4df8e22bc938c15db52199a0", "filename": "src/ci/docker/dist-various-1/Dockerfile", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/235af75d15860503f4f358ce2ad7b806d1b7f514/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/235af75d15860503f4f358ce2ad7b806d1b7f514/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-various-1%2FDockerfile?ref=235af75d15860503f4f358ce2ad7b806d1b7f514", "patch": "@@ -43,6 +43,10 @@ ENV STAGING_DIR=/tmp\n \n COPY scripts/musl.sh /build\n RUN env \\\n+    CC=arm-linux-gnueabi-gcc CFLAGS=\"-march=armv5te -marm -mfloat-abi=soft\" \\\n+    CXX=arm-linux-gnueabi-g++ CXXFLAGS=\"-march=armv5te -marm -mfloat-abi=soft\" \\\n+    bash musl.sh armv5te && \\\n+    env \\\n     CC=arm-linux-gnueabi-gcc CFLAGS=\"-march=armv6 -marm\" \\\n     CXX=arm-linux-gnueabi-g++ CXXFLAGS=\"-march=armv6 -marm\" \\\n     bash musl.sh arm && \\\n@@ -84,6 +88,7 @@ ENV TARGETS=$TARGETS,mipsel-unknown-linux-musl\n ENV TARGETS=$TARGETS,arm-unknown-linux-musleabi\n ENV TARGETS=$TARGETS,arm-unknown-linux-musleabihf\n ENV TARGETS=$TARGETS,armv5te-unknown-linux-gnueabi\n+ENV TARGETS=$TARGETS,armv5te-unknown-linux-musleabi\n ENV TARGETS=$TARGETS,armv7-unknown-linux-musleabihf\n ENV TARGETS=$TARGETS,aarch64-unknown-linux-musl\n ENV TARGETS=$TARGETS,sparc64-unknown-linux-gnu\n@@ -100,9 +105,12 @@ ENV CC_mipsel_unknown_linux_musl=mipsel-openwrt-linux-gcc \\\n     CC_sparc64_unknown_linux_gnu=sparc64-linux-gnu-gcc \\\n     CC_x86_64_unknown_redox=x86_64-unknown-redox-gcc \\\n     CC_armv5te_unknown_linux_gnueabi=arm-linux-gnueabi-gcc \\\n-    CFLAGS_armv5te_unknown_linux_gnueabi=\"-march=armv5te -marm -mfloat-abi=soft\"\n+    CFLAGS_armv5te_unknown_linux_gnueabi=\"-march=armv5te -marm -mfloat-abi=soft\" \\\n+    CC_armv5te_unknown_linux_musleabi=arm-linux-gnueabi-gcc \\\n+    CFLAGS_armv5te_unknown_linux_musleabi=\"-march=armv5te -marm -mfloat-abi=soft\"\n \n ENV RUST_CONFIGURE_ARGS \\\n+      --musl-root-armv5te=/musl-armv5te \\\n       --musl-root-arm=/musl-arm \\\n       --musl-root-armhf=/musl-armhf \\\n       --musl-root-armv7=/musl-armv7 \\"}]}