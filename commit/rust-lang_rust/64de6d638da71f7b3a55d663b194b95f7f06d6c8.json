{"sha": "64de6d638da71f7b3a55d663b194b95f7f06d6c8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0ZGU2ZDYzOGRhNzFmN2IzYTU1ZDY2M2IxOTRiOTVmN2YwNmQ2Yzg=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-26T23:27:54Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-27T03:04:20Z"}, "message": "core: Fix mode warnings in str", "tree": {"sha": "f0157f5849650900b5e2ec61cad93e9429d6d6f3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f0157f5849650900b5e2ec61cad93e9429d6d6f3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/64de6d638da71f7b3a55d663b194b95f7f06d6c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/64de6d638da71f7b3a55d663b194b95f7f06d6c8", "html_url": "https://github.com/rust-lang/rust/commit/64de6d638da71f7b3a55d663b194b95f7f06d6c8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/64de6d638da71f7b3a55d663b194b95f7f06d6c8/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "996ec62cbfce9f25ecc8b573a0b9eb7f4a1b6db9", "url": "https://api.github.com/repos/rust-lang/rust/commits/996ec62cbfce9f25ecc8b573a0b9eb7f4a1b6db9", "html_url": "https://github.com/rust-lang/rust/commit/996ec62cbfce9f25ecc8b573a0b9eb7f4a1b6db9"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "d7e90c1a42d8eece77653c8ae7c0e35d4743cd5c", "filename": "src/libcore/str.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/64de6d638da71f7b3a55d663b194b95f7f06d6c8/src%2Flibcore%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/64de6d638da71f7b3a55d663b194b95f7f06d6c8/src%2Flibcore%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr.rs?ref=64de6d638da71f7b3a55d663b194b95f7f06d6c8", "patch": "@@ -1827,10 +1827,10 @@ const tag_six_b: uint = 252u;\n  * let i = str::as_bytes(\"Hello World\") { |bytes| vec::len(bytes) };\n  * ~~~\n  */\n-pure fn as_bytes<T>(s: &const ~str, f: fn(~[u8]) -> T) -> T {\n+pure fn as_bytes<T>(s: &const ~str, f: fn((&~[u8])) -> T) -> T {\n     unsafe {\n         let v: *~[u8] = cast::transmute(copy s);\n-        f(*v)\n+        f(&*v)\n     }\n }\n \n@@ -1945,7 +1945,7 @@ fn reserve_at_least(s: &const ~str, n: uint) {\n  */\n pure fn capacity(s: &const ~str) -> uint {\n     do as_bytes(s) |buf| {\n-        let vcap = vec::capacity(buf);\n+        let vcap = vec::capacity(*buf);\n         assert vcap > 0u;\n         vcap - 1u\n     }\n@@ -2037,7 +2037,7 @@ mod raw {\n \n     /// Form a slice from a *u8 buffer of the given length without copying.\n     unsafe fn buf_as_slice<T>(buf: *u8, len: uint,\n-                              f: fn(&&v: &str) -> T) -> T {\n+                              f: fn(v: &str) -> T) -> T {\n         let v = (buf, len + 1);\n         assert is_utf8(::cast::reinterpret_cast(&v));\n         f(::cast::transmute(move v))"}, {"sha": "8edee2bfe48fca53893641139b2d8cbceaa108f0", "filename": "src/rustc/metadata/encoder.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/64de6d638da71f7b3a55d663b194b95f7f06d6c8/src%2Frustc%2Fmetadata%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/64de6d638da71f7b3a55d663b194b95f7f06d6c8/src%2Frustc%2Fmetadata%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmetadata%2Fencoder.rs?ref=64de6d638da71f7b3a55d663b194b95f7f06d6c8", "patch": "@@ -1175,7 +1175,7 @@ fn encode_metadata(parms: encode_parms, crate: @crate) -> ~[u8] {\n     //   vec::from_slice(metadata_encoding_version) +\n \n     (do str::as_bytes(&~\"rust\\x00\\x00\\x00\\x01\") |bytes| {\n-        vec::slice(bytes, 0, 8)\n+        vec::slice(*bytes, 0, 8)\n     }) + flate::deflate_bytes(wr.buf.check_out(|buf| buf))\n }\n "}]}