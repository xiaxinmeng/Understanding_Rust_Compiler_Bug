{"sha": "5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkYzIzYmU1YjFiNWRhMWZjMjU1ZTBiM2FhZmJlZmJkZmZiMmIxMGU=", "commit": {"author": {"name": "ray glover", "email": "ray@rayglover.net", "date": "2015-03-30T16:59:28Z"}, "committer": {"name": "ray glover", "email": "ray@rayglover.net", "date": "2015-03-30T22:42:41Z"}, "message": "rustdoc: output stderr on doc-test fail\n\nForward output from stderr when a test executable panics/fails.", "tree": {"sha": "5a6a2d3bb018b4e694eedb1c0882db13aa93b378", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a6a2d3bb018b4e694eedb1c0882db13aa93b378"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "html_url": "https://github.com/rust-lang/rust/commit/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e/comments", "author": {"login": "rayglover-ibm", "id": 19191468, "node_id": "MDQ6VXNlcjE5MTkxNDY4", "avatar_url": "https://avatars.githubusercontent.com/u/19191468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayglover-ibm", "html_url": "https://github.com/rayglover-ibm", "followers_url": "https://api.github.com/users/rayglover-ibm/followers", "following_url": "https://api.github.com/users/rayglover-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/rayglover-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayglover-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayglover-ibm/subscriptions", "organizations_url": "https://api.github.com/users/rayglover-ibm/orgs", "repos_url": "https://api.github.com/users/rayglover-ibm/repos", "events_url": "https://api.github.com/users/rayglover-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/rayglover-ibm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rayglover-ibm", "id": 19191468, "node_id": "MDQ6VXNlcjE5MTkxNDY4", "avatar_url": "https://avatars.githubusercontent.com/u/19191468?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rayglover-ibm", "html_url": "https://github.com/rayglover-ibm", "followers_url": "https://api.github.com/users/rayglover-ibm/followers", "following_url": "https://api.github.com/users/rayglover-ibm/following{/other_user}", "gists_url": "https://api.github.com/users/rayglover-ibm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rayglover-ibm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rayglover-ibm/subscriptions", "organizations_url": "https://api.github.com/users/rayglover-ibm/orgs", "repos_url": "https://api.github.com/users/rayglover-ibm/repos", "events_url": "https://api.github.com/users/rayglover-ibm/events{/privacy}", "received_events_url": "https://api.github.com/users/rayglover-ibm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c5370be36ec6601c4a816f0341d1acd81e08d345", "url": "https://api.github.com/repos/rust-lang/rust/commits/c5370be36ec6601c4a816f0341d1acd81e08d345", "html_url": "https://github.com/rust-lang/rust/commit/c5370be36ec6601c4a816f0341d1acd81e08d345"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "babbe15b17df51ad1beeaa06f6540f6c2c951e74", "filename": "src/librustdoc/test.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e/src%2Flibrustdoc%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e/src%2Flibrustdoc%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Ftest.rs?ref=5dc23be5b1b5da1fc255e0b3aafbefbdffb2b10e", "patch": "@@ -243,8 +243,9 @@ fn runtest(test: &str, cratename: &str, libs: SearchPaths,\n             if should_panic && out.status.success() {\n                 panic!(\"test executable succeeded when it should have failed\");\n             } else if !should_panic && !out.status.success() {\n-                panic!(\"test executable failed:\\n{:?}\",\n-                      str::from_utf8(&out.stdout));\n+                panic!(\"test executable failed:\\n{}\\n{}\",\n+                       str::from_utf8(&out.stdout).unwrap_or(\"\"),\n+                       str::from_utf8(&out.stderr).unwrap_or(\"\"));\n             }\n         }\n     }"}]}