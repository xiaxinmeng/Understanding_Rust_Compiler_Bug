{"sha": "07062d0da4bf5295c6737dd8ee8427d4e6b63c7e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA3MDYyZDBkYTRiZjUyOTVjNjczN2RkOGVlODQyN2Q0ZTZiNjNjN2U=", "commit": {"author": {"name": "Martin Carton", "email": "cartonmartin+github@gmail.com", "date": "2017-01-09T20:52:16Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-01-09T20:52:16Z"}, "message": "Merge pull request #1425 from Manishearth/fix-travis\n\nFix Travis after_success", "tree": {"sha": "bff11d1d37421e2ffae17849ab1004a13eea95c8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bff11d1d37421e2ffae17849ab1004a13eea95c8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/07062d0da4bf5295c6737dd8ee8427d4e6b63c7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/07062d0da4bf5295c6737dd8ee8427d4e6b63c7e", "html_url": "https://github.com/rust-lang/rust/commit/07062d0da4bf5295c6737dd8ee8427d4e6b63c7e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/07062d0da4bf5295c6737dd8ee8427d4e6b63c7e/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3a18a48856e054ed3cdb2cf657f790533c588cf3", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a18a48856e054ed3cdb2cf657f790533c588cf3", "html_url": "https://github.com/rust-lang/rust/commit/3a18a48856e054ed3cdb2cf657f790533c588cf3"}, {"sha": "0c7992cdf5154e2d77a097f851d0d1bae5b7f1ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/0c7992cdf5154e2d77a097f851d0d1bae5b7f1ab", "html_url": "https://github.com/rust-lang/rust/commit/0c7992cdf5154e2d77a097f851d0d1bae5b7f1ab"}], "stats": {"total": 25, "additions": 12, "deletions": 13}, "files": [{"sha": "8f434f3ef2aead9d9ed54401df7b2e6761616243", "filename": ".travis.yml", "status": "modified", "additions": 12, "deletions": 13, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/07062d0da4bf5295c6737dd8ee8427d4e6b63c7e/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/07062d0da4bf5295c6737dd8ee8427d4e6b63c7e/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=07062d0da4bf5295c6737dd8ee8427d4e6b63c7e", "patch": "@@ -42,26 +42,25 @@ script:\n  - cd clippy_lints && PATH=$PATH:~/rust/cargo/bin cargo clippy -- -D clippy && cd ..\n  - set +e\n \n-after_success:\n-- ./.github/deploy.sh\n-# trigger rebuild of the clippy-service, to keep it up to date with clippy itself\n-- |\n-    #!/bin/bash\n+after_success: |\n+  #!/bin/bash\n+  if [ $(uname) == Linux ]; then\n+    ./.github/deploy.sh\n+  # trigger rebuild of the clippy-service, to keep it up to date with clippy itself\n     set -e\n     if [ \"$TRAVIS_PULL_REQUEST\" == \"false\" ] &&\n        [ \"$TRAVIS_REPO_SLUG\" == \"Manishearth/rust-clippy\" ] &&\n        [ \"$TRAVIS_BRANCH\" == \"master\" ] &&\n        [ \"$TRAVIS_TOKEN_CLIPPY_SERVICE\" != \"\" ] ; then\n-\n        curl -s -X POST \\\n-            -H \"Content-Type: application/json\" \\\n-            -H \"Accept: application/json\" \\\n-            -H \"Travis-API-Version: 3\" \\\n-            -H \"Authorization: token $TRAVIS_TOKEN_CLIPPY_SERVICE\" \\\n-            -d \"{ \\\"request\\\": { \\\"branch\\\":\\\"master\\\" }}\" \\\n-            https://api.travis-ci.org/repo/gnunicorn%2Fclippy-service/requests\n-\n+          -H \"Content-Type: application/json\" \\\n+          -H \"Accept: application/json\" \\\n+          -H \"Travis-API-Version: 3\" \\\n+          -H \"Authorization: token $TRAVIS_TOKEN_CLIPPY_SERVICE\" \\\n+          -d \"{ \\\"request\\\": { \\\"branch\\\":\\\"master\\\" }}\" \\\n+          https://api.travis-ci.org/repo/gnunicorn%2Fclippy-service/requests\n     else\n       echo \"Ignored\"\n     fi\n     set +e\n+  fi"}]}