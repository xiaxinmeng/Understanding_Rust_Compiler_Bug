{"sha": "e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "node_id": "C_kwDOAAsO6NoAKGUxZWZmMWIwZTg5YmYyMzUwZGNmNGQ3OTMzZjE5ODRmMmMzN2M5YzQ", "commit": {"author": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2022-01-28T00:53:17Z"}, "committer": {"name": "Eric Huss", "email": "eric@huss.org", "date": "2022-01-28T00:53:17Z"}, "message": "Windows: Disable LLVM crash dialog boxes.", "tree": {"sha": "621b20c36e43fddc9fc121beaabb245c1c5f5d1a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/621b20c36e43fddc9fc121beaabb245c1c5f5d1a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "html_url": "https://github.com/rust-lang/rust/commit/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/comments", "author": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ehuss", "id": 43198, "node_id": "MDQ6VXNlcjQzMTk4", "avatar_url": "https://avatars.githubusercontent.com/u/43198?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ehuss", "html_url": "https://github.com/ehuss", "followers_url": "https://api.github.com/users/ehuss/followers", "following_url": "https://api.github.com/users/ehuss/following{/other_user}", "gists_url": "https://api.github.com/users/ehuss/gists{/gist_id}", "starred_url": "https://api.github.com/users/ehuss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ehuss/subscriptions", "organizations_url": "https://api.github.com/users/ehuss/orgs", "repos_url": "https://api.github.com/users/ehuss/repos", "events_url": "https://api.github.com/users/ehuss/events{/privacy}", "received_events_url": "https://api.github.com/users/ehuss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "21b4a9cfdcbb1e76f4b36b5c3cfd64d627285093", "url": "https://api.github.com/repos/rust-lang/rust/commits/21b4a9cfdcbb1e76f4b36b5c3cfd64d627285093", "html_url": "https://github.com/rust-lang/rust/commit/21b4a9cfdcbb1e76f4b36b5c3cfd64d627285093"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "367c86a1dc942ebb77ff4c45b3a1602f3e2d89cd", "filename": "compiler/rustc_codegen_llvm/src/llvm/ffi.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm%2Fffi.rs?ref=e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "patch": "@@ -987,6 +987,7 @@ pub type SelfProfileAfterPassCallback = unsafe extern \"C\" fn(*mut c_void);\n \n extern \"C\" {\n     pub fn LLVMRustInstallFatalErrorHandler();\n+    pub fn LLVMRustDisableSystemDialogsOnCrash();\n \n     // Create and destroy contexts.\n     pub fn LLVMRustContextCreate(shouldDiscardNames: bool) -> &'static mut Context;"}, {"sha": "437f9a9e4cce082b792f3497e475b5489b003a80", "filename": "compiler/rustc_codegen_llvm/src/llvm_util.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fllvm_util.rs?ref=e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "patch": "@@ -46,6 +46,7 @@ unsafe fn configure_llvm(sess: &Session) {\n     let mut llvm_args = Vec::with_capacity(n_args + 1);\n \n     llvm::LLVMRustInstallFatalErrorHandler();\n+    llvm::LLVMRustDisableSystemDialogsOnCrash();\n \n     fn llvm_arg_to_arg_name(full_arg: &str) -> &str {\n         full_arg.trim().split(|c: char| c == '=' || c.is_whitespace()).next().unwrap_or(\"\")"}, {"sha": "d871290744f8bae8ca20b908c41015358c85bd60", "filename": "compiler/rustc_llvm/llvm-wrapper/RustWrapper.cpp", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_llvm%2Fllvm-wrapper%2FRustWrapper.cpp?ref=e1eff1b0e89bf2350dcf4d7933f1984f2c37c9c4", "patch": "@@ -76,6 +76,10 @@ extern \"C\" void LLVMRustInstallFatalErrorHandler() {\n   install_fatal_error_handler(FatalErrorHandler);\n }\n \n+extern \"C\" void LLVMRustDisableSystemDialogsOnCrash() {\n+  sys::DisableSystemDialogsOnCrash();\n+}\n+\n extern \"C\" char *LLVMRustGetLastError(void) {\n   char *Ret = LastError;\n   LastError = nullptr;"}]}