{"sha": "bebbfa1a29062a3e9304c80080316d8c4937e5bc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJlYmJmYTFhMjkwNjJhM2U5MzA0YzgwMDgwMzE2ZDhjNDkzN2U1YmM=", "commit": {"author": {"name": "vsrs", "email": "vit@conrlab.com", "date": "2020-07-03T11:56:30Z"}, "committer": {"name": "vsrs", "email": "vit@conrlab.com", "date": "2020-07-03T11:56:30Z"}, "message": "Fix workspaceRoot", "tree": {"sha": "54cdbd2844f8147e55d7ec66131b71509ca03c7b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/54cdbd2844f8147e55d7ec66131b71509ca03c7b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bebbfa1a29062a3e9304c80080316d8c4937e5bc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bebbfa1a29062a3e9304c80080316d8c4937e5bc", "html_url": "https://github.com/rust-lang/rust/commit/bebbfa1a29062a3e9304c80080316d8c4937e5bc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bebbfa1a29062a3e9304c80080316d8c4937e5bc/comments", "author": {"login": "vsrs", "id": 62505555, "node_id": "MDQ6VXNlcjYyNTA1NTU1", "avatar_url": "https://avatars.githubusercontent.com/u/62505555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsrs", "html_url": "https://github.com/vsrs", "followers_url": "https://api.github.com/users/vsrs/followers", "following_url": "https://api.github.com/users/vsrs/following{/other_user}", "gists_url": "https://api.github.com/users/vsrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsrs/subscriptions", "organizations_url": "https://api.github.com/users/vsrs/orgs", "repos_url": "https://api.github.com/users/vsrs/repos", "events_url": "https://api.github.com/users/vsrs/events{/privacy}", "received_events_url": "https://api.github.com/users/vsrs/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vsrs", "id": 62505555, "node_id": "MDQ6VXNlcjYyNTA1NTU1", "avatar_url": "https://avatars.githubusercontent.com/u/62505555?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vsrs", "html_url": "https://github.com/vsrs", "followers_url": "https://api.github.com/users/vsrs/followers", "following_url": "https://api.github.com/users/vsrs/following{/other_user}", "gists_url": "https://api.github.com/users/vsrs/gists{/gist_id}", "starred_url": "https://api.github.com/users/vsrs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vsrs/subscriptions", "organizations_url": "https://api.github.com/users/vsrs/orgs", "repos_url": "https://api.github.com/users/vsrs/repos", "events_url": "https://api.github.com/users/vsrs/events{/privacy}", "received_events_url": "https://api.github.com/users/vsrs/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "611fad275fb7f3c2ec018b5539444b6649285228", "url": "https://api.github.com/repos/rust-lang/rust/commits/611fad275fb7f3c2ec018b5539444b6649285228", "html_url": "https://github.com/rust-lang/rust/commit/611fad275fb7f3c2ec018b5539444b6649285228"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "de68f27aec512bad9005a26712a911caa1c26564", "filename": "editors/code/src/run.ts", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/bebbfa1a29062a3e9304c80080316d8c4937e5bc/editors%2Fcode%2Fsrc%2Frun.ts", "raw_url": "https://github.com/rust-lang/rust/raw/bebbfa1a29062a3e9304c80080316d8c4937e5bc/editors%2Fcode%2Fsrc%2Frun.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Frun.ts?ref=bebbfa1a29062a3e9304c80080316d8c4937e5bc", "patch": "@@ -103,6 +103,8 @@ export function prepareEnv(runnable: ra.Runnable, runnableEnvCfg: RunnableEnvCfg\n         env[\"UPDATE_EXPECT\"] = \"1\";\n     }\n \n+    Object.assign(env, process.env as { [key: string]: string });\n+\n     if (runnableEnvCfg) {\n         if (Array.isArray(runnableEnvCfg)) {\n             for (const it of runnableEnvCfg) {\n@@ -135,7 +137,7 @@ export async function createTask(runnable: ra.Runnable, config: Config): Promise\n         type: tasks.TASK_TYPE,\n         command: args[0], // run, test, etc...\n         args: args.slice(1),\n-        cwd: runnable.args.workspaceRoot,\n+        cwd: runnable.args.workspaceRoot || \".\",\n         env: prepareEnv(runnable, config.runnableEnv),\n     };\n "}]}