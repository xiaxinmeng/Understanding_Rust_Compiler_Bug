{"sha": "f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "node_id": "C_kwDOAAsO6NoAKGY3ODM2OWIzYWZlZGQ0ZDY2MmNjNmY5MmVlZTgyNWJjOTRiZjFlOGU", "commit": {"author": {"name": "bohan", "email": "bohan-zhang@foxmail.com", "date": "2023-05-23T14:00:07Z"}, "committer": {"name": "bohan", "email": "bohan-zhang@foxmail.com", "date": "2023-05-26T16:52:07Z"}, "message": "fix: dedup `static_candidates` before report", "tree": {"sha": "c6cead09e9947da29a0500e4190ab230054cdecf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c6cead09e9947da29a0500e4190ab230054cdecf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "html_url": "https://github.com/rust-lang/rust/commit/f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/comments", "author": {"login": "bvanjoi", "id": 30187863, "node_id": "MDQ6VXNlcjMwMTg3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/30187863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bvanjoi", "html_url": "https://github.com/bvanjoi", "followers_url": "https://api.github.com/users/bvanjoi/followers", "following_url": "https://api.github.com/users/bvanjoi/following{/other_user}", "gists_url": "https://api.github.com/users/bvanjoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/bvanjoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bvanjoi/subscriptions", "organizations_url": "https://api.github.com/users/bvanjoi/orgs", "repos_url": "https://api.github.com/users/bvanjoi/repos", "events_url": "https://api.github.com/users/bvanjoi/events{/privacy}", "received_events_url": "https://api.github.com/users/bvanjoi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bvanjoi", "id": 30187863, "node_id": "MDQ6VXNlcjMwMTg3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/30187863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bvanjoi", "html_url": "https://github.com/bvanjoi", "followers_url": "https://api.github.com/users/bvanjoi/followers", "following_url": "https://api.github.com/users/bvanjoi/following{/other_user}", "gists_url": "https://api.github.com/users/bvanjoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/bvanjoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bvanjoi/subscriptions", "organizations_url": "https://api.github.com/users/bvanjoi/orgs", "repos_url": "https://api.github.com/users/bvanjoi/repos", "events_url": "https://api.github.com/users/bvanjoi/events{/privacy}", "received_events_url": "https://api.github.com/users/bvanjoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1221e43bdf413f7c405e9b17ef19d76c88222098", "url": "https://api.github.com/repos/rust-lang/rust/commits/1221e43bdf413f7c405e9b17ef19d76c88222098", "html_url": "https://github.com/rust-lang/rust/commit/1221e43bdf413f7c405e9b17ef19d76c88222098"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "9ee967dc7a97ef14ec1e6f9bd7d4f1ea18768b76", "filename": "compiler/rustc_hir_typeck/src/method/suggest.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_hir_typeck%2Fsrc%2Fmethod%2Fsuggest.rs?ref=f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "patch": "@@ -473,6 +473,12 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n         let mut custom_span_label = false;\n \n         let static_candidates = &mut no_match_data.static_candidates;\n+\n+        // `static_candidates` may have same candidates appended by\n+        // inherent and extension, which may result in incorrect\n+        // diagnostic.\n+        static_candidates.dedup();\n+\n         if !static_candidates.is_empty() {\n             err.note(\n                 \"found the following associated functions; to be used as methods, \\"}, {"sha": "f679640c5dc90103a97db56ca7ee5ada265e68de", "filename": "tests/ui/suggestions/issue-103646.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/tests%2Fui%2Fsuggestions%2Fissue-103646.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/tests%2Fui%2Fsuggestions%2Fissue-103646.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsuggestions%2Fissue-103646.rs?ref=f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "patch": "@@ -0,0 +1,11 @@\n+trait Cat {\n+    fn nya() {}\n+}\n+\n+fn uwu<T: Cat>(c: T) {\n+    c.nya();\n+    //~^ ERROR no method named `nya` found for type parameter `T` in the current scope\n+    //~| Suggestion T::nya()\n+}\n+\n+fn main() {}"}, {"sha": "3ae9813d4914c1952ec31a10df3aeb3c905b6814", "filename": "tests/ui/suggestions/issue-103646.stderr", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/tests%2Fui%2Fsuggestions%2Fissue-103646.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f78369b3afedd4d662cc6f92eee825bc94bf1e8e/tests%2Fui%2Fsuggestions%2Fissue-103646.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fsuggestions%2Fissue-103646.stderr?ref=f78369b3afedd4d662cc6f92eee825bc94bf1e8e", "patch": "@@ -0,0 +1,21 @@\n+error[E0599]: no method named `nya` found for type parameter `T` in the current scope\n+  --> $DIR/issue-103646.rs:6:7\n+   |\n+LL | fn uwu<T: Cat>(c: T) {\n+   |        - method `nya` not found for this type parameter\n+LL |     c.nya();\n+   |     --^^^--\n+   |     | |\n+   |     | this is an associated function, not a method\n+   |     help: use associated function syntax instead: `T::nya()`\n+   |\n+   = note: found the following associated functions; to be used as methods, functions must have a `self` parameter\n+note: the candidate is defined in the trait `Cat`\n+  --> $DIR/issue-103646.rs:2:5\n+   |\n+LL |     fn nya() {}\n+   |     ^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0599`."}]}