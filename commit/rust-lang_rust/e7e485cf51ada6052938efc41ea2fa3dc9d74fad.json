{"sha": "e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU3ZTQ4NWNmNTFhZGE2MDUyOTM4ZWZjNDFlYTJmYTNkYzlkNzRmYWQ=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2021-04-03T21:31:28Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2021-04-05T20:12:56Z"}, "message": "rustc_target: Rely on defaults more in target specs", "tree": {"sha": "e7fccd03f9777ac01df19b0a23485fca6281b1af", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e7fccd03f9777ac01df19b0a23485fca6281b1af"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "html_url": "https://github.com/rust-lang/rust/commit/e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5a7a0ac51eefbdacc5b1763f8d49a787407afb34", "url": "https://api.github.com/repos/rust-lang/rust/commits/5a7a0ac51eefbdacc5b1763f8d49a787407afb34", "html_url": "https://github.com/rust-lang/rust/commit/5a7a0ac51eefbdacc5b1763f8d49a787407afb34"}], "stats": {"total": 58, "additions": 6, "deletions": 52}, "files": [{"sha": "6fa0b34545097bc7d6e21afc4aa64a0e18afcab4", "filename": "compiler/rustc_target/src/spec/apple_base.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fapple_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -1,6 +1,6 @@\n use std::env;\n \n-use crate::spec::{LinkArgs, SplitDebuginfo, TargetOptions};\n+use crate::spec::{SplitDebuginfo, TargetOptions};\n \n pub fn opts(os: &str) -> TargetOptions {\n     // ELF TLS is only available in macOS 10.7+. If you try to compile for 10.6\n@@ -27,10 +27,8 @@ pub fn opts(os: &str) -> TargetOptions {\n         is_like_osx: true,\n         dwarf_version: Some(2),\n         has_rpath: true,\n-        dll_prefix: \"lib\".to_string(),\n         dll_suffix: \".dylib\".to_string(),\n         archive_format: \"darwin\".to_string(),\n-        pre_link_args: LinkArgs::new(),\n         has_elf_tls: version >= (10, 7),\n         abi_return_struct_as_int: true,\n         emit_debug_gdb_scripts: false,"}, {"sha": "f6fe88de37cf6958cf4dc279bd6c9f7f5573f36d", "filename": "compiler/rustc_target/src/spec/armv7_unknown_linux_gnueabi.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_gnueabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_gnueabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_gnueabi.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -13,7 +13,6 @@ pub fn target() -> Target {\n \n         options: TargetOptions {\n             features: \"+v7,+thumb2,+soft-float,-neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             mcount: \"\\u{1}__gnu_mcount_nc\".to_string(),"}, {"sha": "5f0f47dd39776517d534e4c2c8187335a2eb87bf", "filename": "compiler/rustc_target/src/spec/armv7_unknown_linux_gnueabihf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_gnueabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_gnueabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_gnueabihf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -14,7 +14,6 @@ pub fn target() -> Target {\n         options: TargetOptions {\n             // Info about features at https://wiki.debian.org/ArmHardFloatPort\n             features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             mcount: \"\\u{1}__gnu_mcount_nc\".to_string(),"}, {"sha": "c888fc2d4a389f9fe70345ba58d40d771879ff26", "filename": "compiler/rustc_target/src/spec/armv7_unknown_linux_musleabi.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_musleabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_musleabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_musleabi.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -18,7 +18,6 @@ pub fn target() -> Target {\n \n         options: TargetOptions {\n             features: \"+v7,+thumb2,+soft-float,-neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             mcount: \"\\u{1}mcount\".to_string(),"}, {"sha": "2432ea519a8ecf8e58cb3ae36bd33aad32599d84", "filename": "compiler/rustc_target/src/spec/armv7_unknown_linux_musleabihf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_musleabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_musleabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_linux_musleabihf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -17,7 +17,6 @@ pub fn target() -> Target {\n         // target.\n         options: TargetOptions {\n             features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             mcount: \"\\u{1}mcount\".to_string(),"}, {"sha": "4fae3a8d0bf45b8060554d332734960e36b40bcb", "filename": "compiler/rustc_target/src/spec/armv7_unknown_netbsd_eabihf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_netbsd_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_netbsd_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_unknown_netbsd_eabihf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -11,7 +11,6 @@ pub fn target() -> Target {\n         options: TargetOptions {\n             env: \"eabihf\".to_string(),\n             features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             mcount: \"__mcount\".to_string(),"}, {"sha": "9fe7098a85f00c42c37ed3f7808ad7211ad387ce", "filename": "compiler/rustc_target/src/spec/armv7_wrs_vxworks_eabihf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_wrs_vxworks_eabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_wrs_vxworks_eabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv7_wrs_vxworks_eabihf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -10,7 +10,6 @@ pub fn target() -> Target {\n         options: TargetOptions {\n             // Info about features at https://wiki.debian.org/ArmHardFloatPort\n             features: \"+v7,+vfp3,-d32,+thumb2,-neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             ..base"}, {"sha": "69ccce875ab0c97016db677ba9968f4ffd0999e5", "filename": "compiler/rustc_target/src/spec/avr_gnu_base.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Favr_gnu_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Favr_gnu_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Favr_gnu_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -15,11 +15,8 @@ pub fn target(target_cpu: String) -> Target {\n             exe_suffix: \".elf\".to_string(),\n \n             linker: Some(\"avr-gcc\".to_owned()),\n-            dynamic_linking: false,\n             executables: true,\n             linker_is_gnu: true,\n-            has_rpath: false,\n-            position_independent_executables: false,\n             eh_frame_header: false,\n             pre_link_args: vec![(LinkerFlavor::Gcc, vec![format!(\"-mmcu={}\", target_cpu)])]\n                 .into_iter()"}, {"sha": "2b925f8b946c4a62908e070617c57dcf47fc6131", "filename": "compiler/rustc_target/src/spec/fuchsia_base.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Ffuchsia_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Ffuchsia_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Ffuchsia_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -23,13 +23,11 @@ pub fn opts() -> TargetOptions {\n         os: \"fuchsia\".to_string(),\n         linker_flavor: LinkerFlavor::Lld(LldFlavor::Ld),\n         linker: Some(\"rust-lld\".to_owned()),\n-        lld_flavor: LldFlavor::Ld,\n         dynamic_linking: true,\n         executables: true,\n         os_family: Some(\"unix\".to_string()),\n         is_like_fuchsia: true,\n         linker_is_gnu: true,\n-        has_rpath: false,\n         pre_link_args,\n         pre_link_objects: crt_objects::new(&[\n             (LinkOutputKind::DynamicNoPicExe, &[\"Scrt1.o\"]),"}, {"sha": "956e4ed4bf9c838e792928b2d0e8216635c7fb6d", "filename": "compiler/rustc_target/src/spec/haiku_base.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhaiku_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhaiku_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhaiku_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -5,7 +5,6 @@ pub fn opts() -> TargetOptions {\n         os: \"haiku\".to_string(),\n         dynamic_linking: true,\n         executables: true,\n-        has_rpath: false,\n         os_family: Some(\"unix\".to_string()),\n         relro_level: RelroLevel::Full,\n         linker_is_gnu: true,"}, {"sha": "ad013047e6a13e7b01a28f5bb5060dc59852d1f7", "filename": "compiler/rustc_target/src/spec/hermit_base.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhermit_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhermit_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhermit_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -1,5 +1,4 @@\n-use crate::spec::{LinkArgs, LinkerFlavor, LldFlavor, PanicStrategy};\n-use crate::spec::{RelocModel, TargetOptions, TlsModel};\n+use crate::spec::{LinkArgs, LinkerFlavor, LldFlavor, PanicStrategy, TargetOptions, TlsModel};\n \n pub fn opts() -> TargetOptions {\n     let mut pre_link_args = LinkArgs::new();\n@@ -19,8 +18,6 @@ pub fn opts() -> TargetOptions {\n         panic_strategy: PanicStrategy::Abort,\n         position_independent_executables: true,\n         static_position_independent_executables: true,\n-        relocation_model: RelocModel::Pic,\n-        os_family: None,\n         tls_model: TlsModel::InitialExec,\n         ..Default::default()\n     }"}, {"sha": "6d18a14d6aec0ef77a2ed2f1408437ab4a76b641", "filename": "compiler/rustc_target/src/spec/hermit_kernel_base.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhermit_kernel_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhermit_kernel_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhermit_kernel_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -1,5 +1,4 @@\n-use crate::spec::{LinkArgs, LinkerFlavor, LldFlavor, PanicStrategy};\n-use crate::spec::{RelocModel, TargetOptions, TlsModel};\n+use crate::spec::{LinkArgs, LinkerFlavor, LldFlavor, PanicStrategy, TargetOptions, TlsModel};\n \n pub fn opts() -> TargetOptions {\n     let mut pre_link_args = LinkArgs::new();\n@@ -20,8 +19,6 @@ pub fn opts() -> TargetOptions {\n         panic_strategy: PanicStrategy::Abort,\n         position_independent_executables: true,\n         static_position_independent_executables: true,\n-        relocation_model: RelocModel::Pic,\n-        os_family: None,\n         tls_model: TlsModel::InitialExec,\n         ..Default::default()\n     }"}, {"sha": "e0097ee220a464c39d189c48c7009db094831519", "filename": "compiler/rustc_target/src/spec/hexagon_unknown_linux_musl.rs", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhexagon_unknown_linux_musl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhexagon_unknown_linux_musl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fhexagon_unknown_linux_musl.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -1,4 +1,4 @@\n-use crate::spec::{LinkArgs, Target};\n+use crate::spec::Target;\n \n pub fn target() -> Target {\n     let mut base = super::linux_musl_base::opts();\n@@ -8,15 +8,11 @@ pub fn target() -> Target {\n     base.features = \"-small-data,+hvx-length128b\".to_string();\n \n     base.crt_static_default = false;\n-    base.atomic_cas = true;\n     base.has_rpath = true;\n     base.linker_is_gnu = false;\n     base.dynamic_linking = true;\n     base.executables = true;\n \n-    base.pre_link_args = LinkArgs::new();\n-    base.post_link_args = LinkArgs::new();\n-\n     Target {\n         llvm_target: \"hexagon-unknown-linux-musl\".to_string(),\n         pointer_width: 32,"}, {"sha": "db6b74eff6dbd039208b3dd1a883799d93cef670", "filename": "compiler/rustc_target/src/spec/l4re_base.rs", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fl4re_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fl4re_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fl4re_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -1,4 +1,4 @@\n-use crate::spec::{LinkArgs, LinkerFlavor, PanicStrategy, TargetOptions};\n+use crate::spec::{LinkerFlavor, PanicStrategy, TargetOptions};\n //use std::process::Command;\n \n // Use GCC to locate code for crt* libraries from the host, not from L4Re. Note\n@@ -13,18 +13,13 @@ use crate::spec::{LinkArgs, LinkerFlavor, PanicStrategy, TargetOptions};\n //}\n \n pub fn opts() -> TargetOptions {\n-    let mut args = LinkArgs::new();\n-    args.insert(LinkerFlavor::Gcc, vec![]);\n-\n     TargetOptions {\n         os: \"l4re\".to_string(),\n         env: \"uclibc\".to_string(),\n         linker_flavor: LinkerFlavor::Ld,\n         executables: true,\n-        has_elf_tls: false,\n         panic_strategy: PanicStrategy::Abort,\n         linker: Some(\"ld\".to_string()),\n-        pre_link_args: args,\n         os_family: Some(\"unix\".to_string()),\n         ..Default::default()\n     }"}, {"sha": "88a22f25ff47be86adaa69c675d8ca33f80eb337", "filename": "compiler/rustc_target/src/spec/riscv32i_unknown_none_elf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32i_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32i_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32i_unknown_none_elf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -14,7 +14,6 @@ pub fn target() -> Target {\n             cpu: \"generic-rv32\".to_string(),\n             max_atomic_width: Some(0),\n             atomic_cas: false,\n-            features: String::new(),\n             executables: true,\n             panic_strategy: PanicStrategy::Abort,\n             relocation_model: RelocModel::Static,"}, {"sha": "b406eec1e75024d9194bb0743f127a3198849a9b", "filename": "compiler/rustc_target/src/spec/riscv32imac_unknown_none_elf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32imac_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32imac_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32imac_unknown_none_elf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -13,7 +13,6 @@ pub fn target() -> Target {\n             linker: Some(\"rust-lld\".to_string()),\n             cpu: \"generic-rv32\".to_string(),\n             max_atomic_width: Some(32),\n-            atomic_cas: true,\n             features: \"+m,+a,+c\".to_string(),\n             executables: true,\n             panic_strategy: PanicStrategy::Abort,"}, {"sha": "481bce05a08e52208475ffddb4c496441e5acfe3", "filename": "compiler/rustc_target/src/spec/riscv64gc_unknown_none_elf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv64gc_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv64gc_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv64gc_unknown_none_elf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -14,7 +14,6 @@ pub fn target() -> Target {\n             llvm_abiname: \"lp64d\".to_string(),\n             cpu: \"generic-rv64\".to_string(),\n             max_atomic_width: Some(64),\n-            atomic_cas: true,\n             features: \"+m,+a,+f,+d,+c\".to_string(),\n             executables: true,\n             panic_strategy: PanicStrategy::Abort,"}, {"sha": "3e4afd446dda9eda19c81e1684a00b1cc38f152a", "filename": "compiler/rustc_target/src/spec/riscv64imac_unknown_none_elf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv64imac_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv64imac_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv64imac_unknown_none_elf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -13,7 +13,6 @@ pub fn target() -> Target {\n             linker: Some(\"rust-lld\".to_string()),\n             cpu: \"generic-rv64\".to_string(),\n             max_atomic_width: Some(64),\n-            atomic_cas: true,\n             features: \"+m,+a,+c\".to_string(),\n             executables: true,\n             panic_strategy: PanicStrategy::Abort,"}, {"sha": "ef58824f38108d252519ed48f32cd18054c90e85", "filename": "compiler/rustc_target/src/spec/thumbv4t_none_eabi.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv4t_none_eabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv4t_none_eabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv4t_none_eabi.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -45,9 +45,6 @@ pub fn target() -> Target {\n \n             main_needs_argc_argv: false,\n \n-            // No thread-local storage (just use a static Cell)\n-            has_elf_tls: false,\n-\n             // don't have atomic compare-and-swap\n             atomic_cas: false,\n             has_thumb_interworking: true,"}, {"sha": "1232daa577f233a3a1dfe430c108d6e105dbb3f2", "filename": "compiler/rustc_target/src/spec/thumbv7a_pc_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_pc_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_pc_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_pc_windows_msvc.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -29,7 +29,6 @@ pub fn target() -> Target {\n \n         options: TargetOptions {\n             features: \"+vfp3,+neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             ..base"}, {"sha": "e6a59f015c9935d8be0b94d209cc05412cdfadea", "filename": "compiler/rustc_target/src/spec/thumbv7a_uwp_windows_msvc.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_uwp_windows_msvc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_uwp_windows_msvc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7a_uwp_windows_msvc.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -16,7 +16,6 @@ pub fn target() -> Target {\n         arch: \"arm\".to_string(),\n         options: TargetOptions {\n             features: \"+vfp3,+neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             ..base\n         },"}, {"sha": "12d816d095b689e1ce92db232ec7b85aa30f8d87", "filename": "compiler/rustc_target/src/spec/thumbv7neon_unknown_linux_gnueabihf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7neon_unknown_linux_gnueabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7neon_unknown_linux_gnueabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7neon_unknown_linux_gnueabihf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -17,7 +17,6 @@ pub fn target() -> Target {\n         options: TargetOptions {\n             // Info about features at https://wiki.debian.org/ArmHardFloatPort\n             features: \"+v7,+thumb-mode,+thumb2,+vfp3,+neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             ..base"}, {"sha": "020de87147cb688c62a55d8f958c00516b2e0b57", "filename": "compiler/rustc_target/src/spec/thumbv7neon_unknown_linux_musleabihf.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7neon_unknown_linux_musleabihf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7neon_unknown_linux_musleabihf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fthumbv7neon_unknown_linux_musleabihf.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -21,7 +21,6 @@ pub fn target() -> Target {\n         // target.\n         options: TargetOptions {\n             features: \"+v7,+thumb-mode,+thumb2,+vfp3,+neon\".to_string(),\n-            cpu: \"generic\".to_string(),\n             max_atomic_width: Some(64),\n             unsupported_abis: super::arm_base::unsupported_abis(),\n             mcount: \"\\u{1}mcount\".to_string(),"}, {"sha": "41c4d7625af2a854015faf0efead054148f2e19e", "filename": "compiler/rustc_target/src/spec/vxworks_base.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fvxworks_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fvxworks_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fvxworks_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -12,7 +12,6 @@ pub fn opts() -> TargetOptions {\n         os_family: Some(\"unix\".to_string()),\n         linker_is_gnu: true,\n         has_rpath: true,\n-        position_independent_executables: false,\n         has_elf_tls: true,\n         crt_static_default: true,\n         crt_static_respected: true,"}, {"sha": "b208eb92f8ff96eef6d2bf4b09e2c1b8352d514d", "filename": "compiler/rustc_target/src/spec/wasm_base.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwasm_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -75,7 +75,6 @@ pub fn options() -> TargetOptions {\n         exe_suffix: \".wasm\".to_string(),\n         dll_prefix: String::new(),\n         dll_suffix: \".wasm\".to_string(),\n-        linker_is_gnu: false,\n         eh_frame_header: false,\n \n         max_atomic_width: Some(64),"}, {"sha": "478c567a93b2523ce7ab008ddeba1a081cf75996", "filename": "compiler/rustc_target/src/spec/windows_gnu_base.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_gnu_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_gnu_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_gnu_base.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -71,8 +71,6 @@ pub fn opts() -> TargetOptions {\n         dll_prefix: String::new(),\n         dll_suffix: \".dll\".to_string(),\n         exe_suffix: \".exe\".to_string(),\n-        staticlib_prefix: \"lib\".to_string(),\n-        staticlib_suffix: \".a\".to_string(),\n         os_family: Some(\"windows\".to_string()),\n         is_like_windows: true,\n         allows_weak_linkage: false,"}, {"sha": "90705c526f4b2add8eb7e09b14886ec5c94141e9", "filename": "compiler/rustc_target/src/spec/x86_64_fortanix_unknown_sgx.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_fortanix_unknown_sgx.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e7e485cf51ada6052938efc41ea2fa3dc9d74fad/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_fortanix_unknown_sgx.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_fortanix_unknown_sgx.rs?ref=e7e485cf51ada6052938efc41ea2fa3dc9d74fad", "patch": "@@ -1,6 +1,6 @@\n use std::iter;\n \n-use super::{LinkerFlavor, LldFlavor, PanicStrategy, Target, TargetOptions};\n+use super::{LinkerFlavor, LldFlavor, Target, TargetOptions};\n \n pub fn target() -> Target {\n     const PRE_LINK_ARGS: &[&str] = &[\n@@ -56,12 +56,10 @@ pub fn target() -> Target {\n         env: \"sgx\".into(),\n         vendor: \"fortanix\".into(),\n         linker_flavor: LinkerFlavor::Lld(LldFlavor::Ld),\n-        dynamic_linking: false,\n         executables: true,\n         linker_is_gnu: true,\n         linker: Some(\"rust-lld\".to_owned()),\n         max_atomic_width: Some(64),\n-        panic_strategy: PanicStrategy::Unwind,\n         cpu: \"x86-64\".into(),\n         features: \"+rdrnd,+rdseed,+lvi-cfi,+lvi-load-hardening\".into(),\n         llvm_args: vec![\"--x86-experimental-lvi-inline-asm-hardening\".into()],"}]}