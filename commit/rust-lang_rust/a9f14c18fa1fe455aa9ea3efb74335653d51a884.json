{"sha": "a9f14c18fa1fe455aa9ea3efb74335653d51a884", "node_id": "C_kwDOAAsO6NoAKGE5ZjE0YzE4ZmExZmU0NTVhYTllYTNlZmI3NDMzNTY1M2Q1MWE4ODQ", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-05T19:21:24Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2021-12-05T19:31:36Z"}, "message": "Add pretty printer test for async blocks\n\nCurrently fails with:\n\n    ---- [pretty] pretty/async.rs stdout ----\n\n    error: pretty-printed source does not match expected source\n    expected:\n    ------------------------------------------\n    // pp-exact\n    // pretty-compare-only\n    // edition:2021\n\n    async fn f() {\n        let first = async { 1 };\n        let second = async move { 2 };\n        join(first, second).await\n    }\n\n    ------------------------------------------\n    actual:\n    ------------------------------------------\n    // pp-exact\n    // pretty-compare-only\n    // edition:2021\n\n    async fn f() {\n        let first = async  { 1 };\n        let second = async move  { 2 };\n        join(first, second).await\n    }\n\n    ------------------------------------------\n    diff:\n    ------------------------------------------\n    3\t// edition:2021\n    4\n    5\tasync fn f() {\n    -\t    let first = async { 1 };\n    -\t    let second = async move { 2 };\n    +\t    let first = async  { 1 };\n    +\t    let second = async move  { 2 };\n    8\t    join(first, second).await\n    9\t}\n    10", "tree": {"sha": "1f670f7b1accdce64cd7d116628dc738653001e9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f670f7b1accdce64cd7d116628dc738653001e9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a9f14c18fa1fe455aa9ea3efb74335653d51a884", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmGtE6IACgkQ+boUO5X/\nbYKp/Q/+MwTl37eiZrt7KghxoTPzw/ZJoJtObAtYRDl6OVbKkf0LPvFJgHDTUG/i\nAaxrzyjIrEl4sUI+0XBuA5X69GutKyGKiqO4C6aic52WlhbZA8lDeqrqTJp3OvkW\nrHdCWe0mzuhbQ5DTmVqHj+/vS51S/ED4qvA8mPU6QIymcsdHXzWgiYt/fEmtcO85\ngFKGzQx4Wgiy81bA46DkzZGic5QwoTnoTWTfcx7LRXuymt8MtPDRytHOufQus9lA\nfHk3HvZ5LWSTtQeFj2ZeiPvWpRiA+9E+jBFkFB/eN8kYgRQXO5AfpiSoGjamVL0o\n3Y3iriCaZQ4dyqXvyegbf6iGDnH5zMmVuHEBmI/ZB8EL+Tu1FoX+oziFoqnkltjH\nmNU+8SsU9cTnS1jkhBBXHVNSL3PXWiGUgtW+1rrnNVKCKxBlInt8kVpwvWGl8THL\n5wUM5DZli1XD6VN24GtILvm0uDzRB48VKcyG8f0xx8ZKQoQlnOBNE90iVEH8CXZJ\naA5fJAt/Lp4EQQvAAP/SZNEYOuH9Gmp8h+C8cawzUBpLGccW/z2nrwskKrITxkpQ\nfrT1iSReL1WLyCGa6rqS2Q9rl+7hxA15j63wHbTjqRPLdrRfFYwHLkYOnjxNOZyE\nor2Mb5Qilj1hh5ISWb0PSdUgR2H4EfGhD5tYByhU5U/8z6IoJsY=\n=KwX2\n-----END PGP SIGNATURE-----", "payload": "tree 1f670f7b1accdce64cd7d116628dc738653001e9\nparent 772d51f887fa407216860bf8ecf3f1a32fb795b4\nauthor David Tolnay <dtolnay@gmail.com> 1638732084 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1638732696 -0800\n\nAdd pretty printer test for async blocks\n\nCurrently fails with:\n\n    ---- [pretty] pretty/async.rs stdout ----\n\n    error: pretty-printed source does not match expected source\n    expected:\n    ------------------------------------------\n    // pp-exact\n    // pretty-compare-only\n    // edition:2021\n\n    async fn f() {\n        let first = async { 1 };\n        let second = async move { 2 };\n        join(first, second).await\n    }\n\n    ------------------------------------------\n    actual:\n    ------------------------------------------\n    // pp-exact\n    // pretty-compare-only\n    // edition:2021\n\n    async fn f() {\n        let first = async  { 1 };\n        let second = async move  { 2 };\n        join(first, second).await\n    }\n\n    ------------------------------------------\n    diff:\n    ------------------------------------------\n    3\t// edition:2021\n    4\n    5\tasync fn f() {\n    -\t    let first = async { 1 };\n    -\t    let second = async move { 2 };\n    +\t    let first = async  { 1 };\n    +\t    let second = async move  { 2 };\n    8\t    join(first, second).await\n    9\t}\n    10\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a9f14c18fa1fe455aa9ea3efb74335653d51a884", "html_url": "https://github.com/rust-lang/rust/commit/a9f14c18fa1fe455aa9ea3efb74335653d51a884", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a9f14c18fa1fe455aa9ea3efb74335653d51a884/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "772d51f887fa407216860bf8ecf3f1a32fb795b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/772d51f887fa407216860bf8ecf3f1a32fb795b4", "html_url": "https://github.com/rust-lang/rust/commit/772d51f887fa407216860bf8ecf3f1a32fb795b4"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "573e79bffd7ef579e4fedd0343aa840c76e6161f", "filename": "src/test/pretty/async.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/a9f14c18fa1fe455aa9ea3efb74335653d51a884/src%2Ftest%2Fpretty%2Fasync.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a9f14c18fa1fe455aa9ea3efb74335653d51a884/src%2Ftest%2Fpretty%2Fasync.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fasync.rs?ref=a9f14c18fa1fe455aa9ea3efb74335653d51a884", "patch": "@@ -0,0 +1,9 @@\n+// pp-exact\n+// pretty-compare-only\n+// edition:2021\n+\n+async fn f() {\n+    let first = async { 1 };\n+    let second = async move { 2 };\n+    join(first, second).await\n+}"}]}