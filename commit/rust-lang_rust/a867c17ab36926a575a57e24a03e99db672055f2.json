{"sha": "a867c17ab36926a575a57e24a03e99db672055f2", "node_id": "C_kwDOAAsO6NoAKGE4NjdjMTdhYjM2OTI2YTU3NWE1N2UyNGEwM2U5OWRiNjcyMDU1ZjI", "commit": {"author": {"name": "Sosth\u00e8ne Gu\u00e9don", "email": "sosthene@guedon.gdn", "date": "2022-11-02T18:02:46Z"}, "committer": {"name": "Sosth\u00e8ne Gu\u00e9don", "email": "sosthene@guedon.gdn", "date": "2022-11-20T12:45:12Z"}, "message": "Improve code", "tree": {"sha": "f5605219f90fe84ec3af0b7b4bdbbb68a3dd6030", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5605219f90fe84ec3af0b7b4bdbbb68a3dd6030"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a867c17ab36926a575a57e24a03e99db672055f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a867c17ab36926a575a57e24a03e99db672055f2", "html_url": "https://github.com/rust-lang/rust/commit/a867c17ab36926a575a57e24a03e99db672055f2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a867c17ab36926a575a57e24a03e99db672055f2/comments", "author": {"login": "sgued", "id": 51865119, "node_id": "MDQ6VXNlcjUxODY1MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/51865119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgued", "html_url": "https://github.com/sgued", "followers_url": "https://api.github.com/users/sgued/followers", "following_url": "https://api.github.com/users/sgued/following{/other_user}", "gists_url": "https://api.github.com/users/sgued/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgued/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgued/subscriptions", "organizations_url": "https://api.github.com/users/sgued/orgs", "repos_url": "https://api.github.com/users/sgued/repos", "events_url": "https://api.github.com/users/sgued/events{/privacy}", "received_events_url": "https://api.github.com/users/sgued/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sgued", "id": 51865119, "node_id": "MDQ6VXNlcjUxODY1MTE5", "avatar_url": "https://avatars.githubusercontent.com/u/51865119?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sgued", "html_url": "https://github.com/sgued", "followers_url": "https://api.github.com/users/sgued/followers", "following_url": "https://api.github.com/users/sgued/following{/other_user}", "gists_url": "https://api.github.com/users/sgued/gists{/gist_id}", "starred_url": "https://api.github.com/users/sgued/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sgued/subscriptions", "organizations_url": "https://api.github.com/users/sgued/orgs", "repos_url": "https://api.github.com/users/sgued/repos", "events_url": "https://api.github.com/users/sgued/events{/privacy}", "received_events_url": "https://api.github.com/users/sgued/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3428da6e00c025b3b3141a9fe7c65ee5008e07f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/3428da6e00c025b3b3141a9fe7c65ee5008e07f3", "html_url": "https://github.com/rust-lang/rust/commit/3428da6e00c025b3b3141a9fe7c65ee5008e07f3"}], "stats": {"total": 36, "additions": 30, "deletions": 6}, "files": [{"sha": "0d50ec37989b931101c12ffa5928243e74b4b0e1", "filename": "clippy_lints/src/functions/misnamed_getters.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/a867c17ab36926a575a57e24a03e99db672055f2/clippy_lints%2Fsrc%2Ffunctions%2Fmisnamed_getters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a867c17ab36926a575a57e24a03e99db672055f2/clippy_lints%2Fsrc%2Ffunctions%2Fmisnamed_getters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions%2Fmisnamed_getters.rs?ref=a867c17ab36926a575a57e24a03e99db672055f2", "patch": "@@ -16,7 +16,7 @@ pub fn check_fn(\n     span: Span,\n     _hir_id: HirId,\n ) {\n-    let FnKind::Method(ref ident, sig) = kind else {\n+    let FnKind::Method(ref ident, _) = kind else {\n             return;\n         };\n \n@@ -27,7 +27,7 @@ pub fn check_fn(\n \n     let name = ident.name.as_str();\n \n-    let name = match sig.decl.implicit_self {\n+    let name = match decl.implicit_self {\n         ImplicitSelfKind::MutRef => {\n             let Some(name) = name.strip_suffix(\"_mut\") else {\n                     return;\n@@ -53,11 +53,12 @@ pub fn check_fn(\n     };\n     let expr_span = block_expr.span;\n \n-    let mut expr = block_expr;\n     // Accept &<expr>, &mut <expr> and <expr>\n-    if let ExprKind::AddrOf(_, _, tmp) = expr.kind {\n-        expr = tmp;\n-    }\n+    let expr = if let ExprKind::AddrOf(_, _, tmp) = block_expr.kind {\n+        tmp\n+    } else {\n+        block_expr\n+    };\n     let (self_data, used_ident) = if_chain! {\n         if let ExprKind::Field(self_data, ident) = expr.kind;\n         if ident.name.as_str() != name;"}, {"sha": "6f161818251674b9ed6acb4e2e2fcabf6f9b7257", "filename": "tests/ui/misnamed_getters.rs", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/a867c17ab36926a575a57e24a03e99db672055f2/tests%2Fui%2Fmisnamed_getters.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a867c17ab36926a575a57e24a03e99db672055f2/tests%2Fui%2Fmisnamed_getters.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmisnamed_getters.rs?ref=a867c17ab36926a575a57e24a03e99db672055f2", "patch": "@@ -60,6 +60,29 @@ impl B {\n     unsafe fn c_mut(&mut self) -> &mut u8 {\n         &mut self.a\n     }\n+\n+    unsafe fn a_unchecked(&self) -> &u8 {\n+        &self.b\n+    }\n+    unsafe fn a_unchecked_mut(&mut self) -> &mut u8 {\n+        &mut self.b\n+    }\n+\n+    unsafe fn b_unchecked(self) -> u8 {\n+        self.a\n+    }\n+\n+    unsafe fn b_unchecked_mut(&mut self) -> &mut u8 {\n+        &mut self.a\n+    }\n+\n+    unsafe fn c_unchecked(&self) -> &u8 {\n+        &self.b\n+    }\n+\n+    unsafe fn c_unchecked_mut(&mut self) -> &mut u8 {\n+        &mut self.a\n+    }\n }\n \n fn main() {"}]}