{"sha": "6d17c35cd5fb806eb81441a1cbea755b0efc41ad", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZkMTdjMzVjZDVmYjgwNmViODE0NDFhMWNiZWE3NTViMGVmYzQxYWQ=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-04-08T22:12:08Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2015-04-08T22:12:08Z"}, "message": "configure: Add --enable-debug-jemalloc", "tree": {"sha": "30457f5ee9d28b19f4e9f66258e6153ad40e89bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/30457f5ee9d28b19f4e9f66258e6153ad40e89bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6d17c35cd5fb806eb81441a1cbea755b0efc41ad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6d17c35cd5fb806eb81441a1cbea755b0efc41ad", "html_url": "https://github.com/rust-lang/rust/commit/6d17c35cd5fb806eb81441a1cbea755b0efc41ad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6d17c35cd5fb806eb81441a1cbea755b0efc41ad/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1002155c755562b8932251b50dac149edf8c885b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1002155c755562b8932251b50dac149edf8c885b", "html_url": "https://github.com/rust-lang/rust/commit/1002155c755562b8932251b50dac149edf8c885b"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "b23cfaf976f0eddec80faab06cb80cab9f84b1f0", "filename": "configure", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6d17c35cd5fb806eb81441a1cbea755b0efc41ad/configure", "raw_url": "https://github.com/rust-lang/rust/raw/6d17c35cd5fb806eb81441a1cbea755b0efc41ad/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=6d17c35cd5fb806eb81441a1cbea755b0efc41ad", "patch": "@@ -550,6 +550,7 @@ opt_nosave optimize-llvm 1 \"build optimized LLVM\"\n opt_nosave llvm-assertions 0 \"build LLVM with assertions\"\n opt_nosave debug-assertions 0 \"build with debugging assertions\"\n opt_nosave debuginfo 0 \"build with debugger metadata\"\n+opt_nosave debug-jemalloc 0 \"build jemalloc with --enable-debug --enable-fill\"\n \n valopt localstatedir \"/var/lib\" \"local state directory\"\n valopt sysconfdir \"/etc\" \"install system configuration files\"\n@@ -633,6 +634,7 @@ if [ -n \"$CFG_ENABLE_DEBUG\" ]; then\n     CFG_DISABLE_OPTIMIZE_LLVM=1\n     CFG_ENABLE_LLVM_ASSERTIONS=1\n     CFG_ENABLE_DEBUG_ASSERTIONS=1\n+    CFG_ENABLE_DEBUG_JEMALLOC=1\n fi\n \n # OK, now write the debugging options\n@@ -642,6 +644,7 @@ if [ -n \"$CFG_DISABLE_OPTIMIZE_LLVM\" ]; then putvar CFG_DISABLE_OPTIMIZE_LLVM; f\n if [ -n \"$CFG_ENABLE_LLVM_ASSERTIONS\" ]; then putvar CFG_ENABLE_LLVM_ASSERTIONS; fi\n if [ -n \"$CFG_ENABLE_DEBUG_ASSERTIONS\" ]; then putvar CFG_ENABLE_DEBUG_ASSERTIONS; fi\n if [ -n \"$CFG_ENABLE_DEBUGINFO\" ]; then putvar CFG_ENABLE_DEBUGINFO; fi\n+if [ -n \"$CFG_ENABLE_DEBUG_JEMALLOC\" ]; then putvar CFG_ENABLE_DEBUG_JEMALLOC; fi\n \n # A magic value that allows the compiler to use unstable features\n # during the bootstrap even when doing so would normally be an error"}, {"sha": "70abce8b4606751f1bda548dcd97a31f0661fecc", "filename": "mk/rt.mk", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6d17c35cd5fb806eb81441a1cbea755b0efc41ad/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/6d17c35cd5fb806eb81441a1cbea755b0efc41ad/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=6d17c35cd5fb806eb81441a1cbea755b0efc41ad", "patch": "@@ -143,6 +143,10 @@ else ifeq ($(findstring android, $(OSTYPE_$(1))), android)\n   JEMALLOC_ARGS_$(1) := --disable-tls\n endif\n \n+ifdef CFG_ENABLE_DEBUG_JEMALLOC\n+  JEMALLOC_ARGS_$(1) += --enable-debug --enable-fill\n+endif\n+\n ################################################################################\n # jemalloc\n ################################################################################"}]}