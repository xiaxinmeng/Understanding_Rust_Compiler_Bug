{"sha": "759a7f1f66490191a6f809c9709151d6d27cea87", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc1OWE3ZjFmNjY0OTAxOTFhNmY4MDljOTcwOTE1MWQ2ZDI3Y2VhODc=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-06-25T16:13:30Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-06-25T16:33:15Z"}, "message": "test: Use liblibc in lang-item-public\n\nMakes this test case more robust by using standard libraries to ensure the\nbinary can be built.", "tree": {"sha": "8d29beb7373e1975fabf7f0b49c3d2305e6c6256", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d29beb7373e1975fabf7f0b49c3d2305e6c6256"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/759a7f1f66490191a6f809c9709151d6d27cea87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/759a7f1f66490191a6f809c9709151d6d27cea87", "html_url": "https://github.com/rust-lang/rust/commit/759a7f1f66490191a6f809c9709151d6d27cea87", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/759a7f1f66490191a6f809c9709151d6d27cea87/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e3cb6447596049464292c0afa8c4b9a0cb8c806", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e3cb6447596049464292c0afa8c4b9a0cb8c806", "html_url": "https://github.com/rust-lang/rust/commit/9e3cb6447596049464292c0afa8c4b9a0cb8c806"}], "stats": {"total": 65, "additions": 8, "deletions": 57}, "files": [{"sha": "4b60a370187af15bbb3ea1b05edc1c3aa11fd83f", "filename": "src/test/auxiliary/lang-item-public.rs", "status": "modified", "additions": 7, "deletions": 28, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/759a7f1f66490191a6f809c9709151d6d27cea87/src%2Ftest%2Fauxiliary%2Flang-item-public.rs", "raw_url": "https://github.com/rust-lang/rust/raw/759a7f1f66490191a6f809c9709151d6d27cea87/src%2Ftest%2Fauxiliary%2Flang-item-public.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Flang-item-public.rs?ref=759a7f1f66490191a6f809c9709151d6d27cea87", "patch": "@@ -8,42 +8,21 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![feature(no_std)]\n+#![feature(no_std, core, libc)]\n #![no_std]\n #![feature(lang_items)]\n \n-#[lang=\"sized\"]\n-pub trait Sized { }\n-\n-#[lang=\"panic\"]\n-fn panic(_: &(&'static str, &'static str, usize)) -> ! { loop {} }\n+extern crate core;\n+extern crate libc;\n \n #[lang = \"stack_exhausted\"]\n extern fn stack_exhausted() {}\n \n #[lang = \"eh_personality\"]\n extern fn eh_personality() {}\n \n-#[lang=\"copy\"]\n-pub trait Copy {\n-    // Empty.\n-}\n-\n-#[lang=\"rem\"]\n-pub trait Rem<RHS=Self> {\n-    type Output = Self;\n-    fn rem(self, rhs: RHS) -> Self::Output;\n-}\n-\n-impl Rem for isize {\n-    type Output = isize;\n-\n-    #[inline]\n-    fn rem(self, other: isize) -> isize {\n-        // if you use `self % other` here, as one would expect, you\n-        // get back an error because of potential failure/overflow,\n-        // which tries to invoke error fns that don't have the\n-        // appropriate signatures anymore. So...just return 0.\n-        0\n-    }\n+#[lang = \"panic_fmt\"]\n+extern fn rust_begin_unwind(msg: core::fmt::Arguments, file: &'static str,\n+                            line: u32) -> ! {\n+    loop {}\n }"}, {"sha": "57a32ba599f93d0aeda49e41a1bed2f166fe0dd6", "filename": "src/test/run-pass/lang-item-public.rs", "status": "modified", "additions": 1, "deletions": 29, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/759a7f1f66490191a6f809c9709151d6d27cea87/src%2Ftest%2Frun-pass%2Flang-item-public.rs", "raw_url": "https://github.com/rust-lang/rust/raw/759a7f1f66490191a6f809c9709151d6d27cea87/src%2Ftest%2Frun-pass%2Flang-item-public.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Flang-item-public.rs?ref=759a7f1f66490191a6f809c9709151d6d27cea87", "patch": "@@ -11,39 +11,11 @@\n // aux-build:lang-item-public.rs\n // ignore-android\n \n-#![feature(lang_items, start, no_std)]\n+#![feature(start, no_std)]\n #![no_std]\n \n extern crate lang_item_public as lang_lib;\n \n-#[cfg(target_os = \"linux\")]\n-#[link(name = \"c\")]\n-extern {}\n-\n-#[cfg(target_os = \"android\")]\n-#[link(name = \"c\")]\n-extern {}\n-\n-#[cfg(target_os = \"freebsd\")]\n-#[link(name = \"execinfo\")]\n-extern {}\n-\n-#[cfg(target_os = \"freebsd\")]\n-#[link(name = \"c\")]\n-extern {}\n-\n-#[cfg(target_os = \"dragonfly\")]\n-#[link(name = \"c\")]\n-extern {}\n-\n-#[cfg(any(target_os = \"bitrig\", target_os = \"openbsd\"))]\n-#[link(name = \"c\")]\n-extern {}\n-\n-#[cfg(target_os = \"macos\")]\n-#[link(name = \"System\")]\n-extern {}\n-\n #[start]\n fn main(_: isize, _: *const *const u8) -> isize {\n     1_isize % 1_isize"}]}