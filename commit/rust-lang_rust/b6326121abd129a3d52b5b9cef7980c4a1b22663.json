{"sha": "b6326121abd129a3d52b5b9cef7980c4a1b22663", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI2MzI2MTIxYWJkMTI5YTNkNTJiNWI5Y2VmNzk4MGM0YTFiMjI2NjM=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2017-05-14T12:58:16Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2017-05-14T12:58:16Z"}, "message": "Fix span in `blacklisted_name`", "tree": {"sha": "785b0ef3981dcb855a867498967597efda9f07e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/785b0ef3981dcb855a867498967597efda9f07e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b6326121abd129a3d52b5b9cef7980c4a1b22663", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b6326121abd129a3d52b5b9cef7980c4a1b22663", "html_url": "https://github.com/rust-lang/rust/commit/b6326121abd129a3d52b5b9cef7980c4a1b22663", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b6326121abd129a3d52b5b9cef7980c4a1b22663/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "94ba6a5bd3df815cae8a6b2f2164c46a95b0f627", "url": "https://api.github.com/repos/rust-lang/rust/commits/94ba6a5bd3df815cae8a6b2f2164c46a95b0f627", "html_url": "https://github.com/rust-lang/rust/commit/94ba6a5bd3df815cae8a6b2f2164c46a95b0f627"}], "stats": {"total": 101, "additions": 78, "deletions": 23}, "files": [{"sha": "f8f0ea998bc3ddc0e159d26462f3ad0f4b54ef35", "filename": "clippy_lints/src/blacklisted_name.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b6326121abd129a3d52b5b9cef7980c4a1b22663/clippy_lints%2Fsrc%2Fblacklisted_name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6326121abd129a3d52b5b9cef7980c4a1b22663/clippy_lints%2Fsrc%2Fblacklisted_name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fblacklisted_name.rs?ref=b6326121abd129a3d52b5b9cef7980c4a1b22663", "patch": "@@ -43,7 +43,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for BlackListedName {\n             if self.blacklist.iter().any(|s| ident.node == *s) {\n                 span_lint(cx,\n                           BLACKLISTED_NAME,\n-                          pat.span,\n+                          ident.span,\n                           &format!(\"use of a blacklisted/placeholder name `{}`\", ident.node));\n             }\n         }"}, {"sha": "94c1757136fa7285c0b480a84cc51a284bf93701", "filename": "tests/ui/blacklisted_name.rs", "status": "modified", "additions": 16, "deletions": 3, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/b6326121abd129a3d52b5b9cef7980c4a1b22663/tests%2Fui%2Fblacklisted_name.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b6326121abd129a3d52b5b9cef7980c4a1b22663/tests%2Fui%2Fblacklisted_name.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblacklisted_name.rs?ref=b6326121abd129a3d52b5b9cef7980c4a1b22663", "patch": "@@ -1,9 +1,7 @@\n #![feature(plugin)]\n #![plugin(clippy)]\n \n-#![allow(dead_code)]\n-#![allow(single_match)]\n-#![allow(unused_variables, similar_names)]\n+#![allow(dead_code, similar_names, single_match, toplevel_ref_arg, unused_mut, unused_variables)]\n #![deny(blacklisted_name)]\n \n fn test(foo: ()) {}\n@@ -21,3 +19,18 @@ fn main() {\n         _ => (),\n     }\n }\n+\n+fn issue_1647(mut foo: u8) {\n+    let mut bar = 0;\n+    if let Some(mut baz) = Some(42) {}\n+}\n+\n+fn issue_1647_ref() {\n+    let ref bar = 0;\n+    if let Some(ref baz) = Some(42) {}\n+}\n+\n+fn issue_1647_ref_mut() {\n+    let ref mut bar = 0;\n+    if let Some(ref mut baz) = Some(42) {}\n+}"}, {"sha": "93405f99239df2c7e0aca2537ebdff71c55b201d", "filename": "tests/ui/blacklisted_name.stderr", "status": "modified", "additions": 60, "deletions": 18, "changes": 78, "blob_url": "https://github.com/rust-lang/rust/blob/b6326121abd129a3d52b5b9cef7980c4a1b22663/tests%2Fui%2Fblacklisted_name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b6326121abd129a3d52b5b9cef7980c4a1b22663/tests%2Fui%2Fblacklisted_name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fblacklisted_name.stderr?ref=b6326121abd129a3d52b5b9cef7980c4a1b22663", "patch": "@@ -1,50 +1,92 @@\n error: use of a blacklisted/placeholder name `foo`\n- --> $DIR/blacklisted_name.rs:9:9\n+ --> $DIR/blacklisted_name.rs:7:9\n   |\n-9 | fn test(foo: ()) {}\n+7 | fn test(foo: ()) {}\n   |         ^^^\n   |\n note: lint level defined here\n- --> $DIR/blacklisted_name.rs:7:9\n+ --> $DIR/blacklisted_name.rs:5:9\n   |\n-7 | #![deny(blacklisted_name)]\n+5 | #![deny(blacklisted_name)]\n   |         ^^^^^^^^^^^^^^^^\n \n error: use of a blacklisted/placeholder name `foo`\n-  --> $DIR/blacklisted_name.rs:12:9\n+  --> $DIR/blacklisted_name.rs:10:9\n    |\n-12 |     let foo = 42;\n+10 |     let foo = 42;\n    |         ^^^\n \n error: use of a blacklisted/placeholder name `bar`\n-  --> $DIR/blacklisted_name.rs:13:9\n+  --> $DIR/blacklisted_name.rs:11:9\n    |\n-13 |     let bar = 42;\n+11 |     let bar = 42;\n    |         ^^^\n \n error: use of a blacklisted/placeholder name `baz`\n-  --> $DIR/blacklisted_name.rs:14:9\n+  --> $DIR/blacklisted_name.rs:12:9\n    |\n-14 |     let baz = 42;\n+12 |     let baz = 42;\n    |         ^^^\n \n error: use of a blacklisted/placeholder name `foo`\n-  --> $DIR/blacklisted_name.rs:20:10\n+  --> $DIR/blacklisted_name.rs:18:10\n    |\n-20 |         (foo, Some(bar), baz @ Some(_)) => (),\n+18 |         (foo, Some(bar), baz @ Some(_)) => (),\n    |          ^^^\n \n error: use of a blacklisted/placeholder name `bar`\n-  --> $DIR/blacklisted_name.rs:20:20\n+  --> $DIR/blacklisted_name.rs:18:20\n    |\n-20 |         (foo, Some(bar), baz @ Some(_)) => (),\n+18 |         (foo, Some(bar), baz @ Some(_)) => (),\n    |                    ^^^\n \n error: use of a blacklisted/placeholder name `baz`\n-  --> $DIR/blacklisted_name.rs:20:26\n+  --> $DIR/blacklisted_name.rs:18:26\n+   |\n+18 |         (foo, Some(bar), baz @ Some(_)) => (),\n+   |                          ^^^\n+\n+error: use of a blacklisted/placeholder name `foo`\n+  --> $DIR/blacklisted_name.rs:23:19\n+   |\n+23 | fn issue_1647(mut foo: u8) {\n+   |                   ^^^\n+\n+error: use of a blacklisted/placeholder name `bar`\n+  --> $DIR/blacklisted_name.rs:24:13\n+   |\n+24 |     let mut bar = 0;\n+   |             ^^^\n+\n+error: use of a blacklisted/placeholder name `baz`\n+  --> $DIR/blacklisted_name.rs:25:21\n+   |\n+25 |     if let Some(mut baz) = Some(42) {}\n+   |                     ^^^\n+\n+error: use of a blacklisted/placeholder name `bar`\n+  --> $DIR/blacklisted_name.rs:29:13\n+   |\n+29 |     let ref bar = 0;\n+   |             ^^^\n+\n+error: use of a blacklisted/placeholder name `baz`\n+  --> $DIR/blacklisted_name.rs:30:21\n+   |\n+30 |     if let Some(ref baz) = Some(42) {}\n+   |                     ^^^\n+\n+error: use of a blacklisted/placeholder name `bar`\n+  --> $DIR/blacklisted_name.rs:34:17\n+   |\n+34 |     let ref mut bar = 0;\n+   |                 ^^^\n+\n+error: use of a blacklisted/placeholder name `baz`\n+  --> $DIR/blacklisted_name.rs:35:25\n    |\n-20 |         (foo, Some(bar), baz @ Some(_)) => (),\n-   |                          ^^^^^^^^^^^^^\n+35 |     if let Some(ref mut baz) = Some(42) {}\n+   |                         ^^^\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 14 previous errors\n "}, {"sha": "244ba32c4043581ef5186622975372db7102bf56", "filename": "tests/ui/conf_french_blacklisted_name.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b6326121abd129a3d52b5b9cef7980c4a1b22663/tests%2Fui%2Fconf_french_blacklisted_name.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b6326121abd129a3d52b5b9cef7980c4a1b22663/tests%2Fui%2Fconf_french_blacklisted_name.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fconf_french_blacklisted_name.stderr?ref=b6326121abd129a3d52b5b9cef7980c4a1b22663", "patch": "@@ -44,7 +44,7 @@ error: use of a blacklisted/placeholder name `titi`\n   --> $DIR/conf_french_blacklisted_name.rs:20:28\n    |\n 20 |         (toto, Some(tata), titi @ Some(_)) => (),\n-   |                            ^^^^^^^^^^^^^^\n+   |                            ^^^^\n \n error: aborting due to 7 previous errors\n "}]}