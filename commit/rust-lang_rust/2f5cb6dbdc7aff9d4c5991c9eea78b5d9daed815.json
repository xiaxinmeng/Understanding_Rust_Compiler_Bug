{"sha": "2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmNWNiNmRiZGM3YWZmOWQ0YzU5OTFjOWVlYTc4YjVkOWRhZWQ4MTU=", "commit": {"author": {"name": "Vitaly _Vi Shukela", "email": "vi0oss@gmail.com", "date": "2018-09-15T11:44:28Z"}, "committer": {"name": "Vitaly _Vi Shukela", "email": "vi0oss@gmail.com", "date": "2018-09-16T18:43:06Z"}, "message": "Add multipart_suggestion_with_applicability", "tree": {"sha": "a0ae94c5e7adcf0fdcca616a886e108e41a69d94", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0ae94c5e7adcf0fdcca616a886e108e41a69d94"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABEIAB0WIQQzEHnM5f9ubG8rMBnAlyIdbgPfaAUCW56kOgAKCRDAlyIdbgPf\naMM5AQCHFEsrk7oFMkX+sWjr7C1jnKFdpD0qQggXewjvd0OvmgD9HGksJDEP4jym\nDCp2J7F5SYQN/XqzA5vmV7YH1+kiK5Y=\n=LyEA\n-----END PGP SIGNATURE-----", "payload": "tree a0ae94c5e7adcf0fdcca616a886e108e41a69d94\nparent b6fea3255c0954456b068db8d1cdb6af464dd651\nauthor Vitaly _Vi Shukela <vi0oss@gmail.com> 1537011868 +0300\ncommitter Vitaly _Vi Shukela <vi0oss@gmail.com> 1537123386 +0300\n\nAdd multipart_suggestion_with_applicability\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815", "html_url": "https://github.com/rust-lang/rust/commit/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815/comments", "author": {"login": "vi", "id": 173219, "node_id": "MDQ6VXNlcjE3MzIxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vi", "html_url": "https://github.com/vi", "followers_url": "https://api.github.com/users/vi/followers", "following_url": "https://api.github.com/users/vi/following{/other_user}", "gists_url": "https://api.github.com/users/vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vi/subscriptions", "organizations_url": "https://api.github.com/users/vi/orgs", "repos_url": "https://api.github.com/users/vi/repos", "events_url": "https://api.github.com/users/vi/events{/privacy}", "received_events_url": "https://api.github.com/users/vi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vi", "id": 173219, "node_id": "MDQ6VXNlcjE3MzIxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vi", "html_url": "https://github.com/vi", "followers_url": "https://api.github.com/users/vi/followers", "following_url": "https://api.github.com/users/vi/following{/other_user}", "gists_url": "https://api.github.com/users/vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vi/subscriptions", "organizations_url": "https://api.github.com/users/vi/orgs", "repos_url": "https://api.github.com/users/vi/repos", "events_url": "https://api.github.com/users/vi/events{/privacy}", "received_events_url": "https://api.github.com/users/vi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b6fea3255c0954456b068db8d1cdb6af464dd651", "url": "https://api.github.com/repos/rust-lang/rust/commits/b6fea3255c0954456b068db8d1cdb6af464dd651", "html_url": "https://github.com/rust-lang/rust/commit/b6fea3255c0954456b068db8d1cdb6af464dd651"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "aebfce0bf2dc8c4d39c7b30b2316386b46716ac6", "filename": "src/librustc_errors/diagnostic.rs", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815/src%2Flibrustc_errors%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815/src%2Flibrustc_errors%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Fdiagnostic.rs?ref=2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815", "patch": "@@ -278,10 +278,11 @@ impl Diagnostic {\n         self\n     }\n \n-    pub fn multipart_suggestion(\n+    pub fn multipart_suggestion_with_applicability(\n         &mut self,\n         msg: &str,\n         suggestion: Vec<(Span, String)>,\n+        applicability: Applicability,\n     ) -> &mut Self {\n         self.suggestions.push(CodeSuggestion {\n             substitutions: vec![Substitution {\n@@ -292,11 +293,23 @@ impl Diagnostic {\n             }],\n             msg: msg.to_owned(),\n             show_code_when_inline: true,\n-            applicability: Applicability::Unspecified,\n+            applicability,\n         });\n         self\n     }\n \n+    pub fn multipart_suggestion(\n+        &mut self,\n+        msg: &str,\n+        suggestion: Vec<(Span, String)>,\n+    ) -> &mut Self {\n+        self.multipart_suggestion_with_applicability(\n+                                                     msg, \n+                                                     suggestion,\n+                                                     Applicability::Unspecified\n+                                                    )\n+    }\n+\n     /// Prints out a message with multiple suggested edits of the code.\n     pub fn span_suggestions(&mut self, sp: Span, msg: &str, suggestions: Vec<String>) -> &mut Self {\n         self.suggestions.push(CodeSuggestion {"}, {"sha": "79acf46891625716f28498734c4de79177b3faea", "filename": "src/librustc_errors/diagnostic_builder.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815/src%2Flibrustc_errors%2Fdiagnostic_builder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815/src%2Flibrustc_errors%2Fdiagnostic_builder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_errors%2Fdiagnostic_builder.rs?ref=2f5cb6dbdc7aff9d4c5991c9eea78b5d9daed815", "patch": "@@ -187,6 +187,23 @@ impl<'a> DiagnosticBuilder<'a> {\n                                      msg: &str,\n                                      suggestions: Vec<String>)\n                                      -> &mut Self);\n+\n+    pub fn multipart_suggestion_with_applicability(&mut self,\n+                                              msg: &str,\n+                                              suggestion: Vec<(Span, String)>,\n+                                              applicability: Applicability)\n+                                              -> &mut Self {\n+        if !self.allow_suggestions {\n+            return self\n+        }\n+        self.diagnostic.multipart_suggestion_with_applicability(\n+            msg,\n+            suggestion,\n+            applicability,\n+        );\n+        self\n+    }\n+\n     pub fn span_suggestion_with_applicability(&mut self,\n                                               sp: Span,\n                                               msg: &str,"}]}