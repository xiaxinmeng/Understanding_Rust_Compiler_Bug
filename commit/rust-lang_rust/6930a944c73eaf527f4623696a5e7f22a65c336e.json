{"sha": "6930a944c73eaf527f4623696a5e7f22a65c336e", "node_id": "C_kwDOAAsO6NoAKDY5MzBhOTQ0YzczZWFmNTI3ZjQ2MjM2OTZhNWU3ZjIyYTY1YzMzNmU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-06-01T20:47:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-06-01T20:47:30Z"}, "message": "Rollup merge of #111802 - jyn514:less-verbose, r=ozkanonur\n\nMake `x test --dry-run` less verbose\n\nThe new output looks like `Testing stage2 book rustc (x86_64-unknown-linux-gnu)`.\n\nPreviously, this would print a message for each doctest, which was quite verbose:\n```\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/exploit-mitigations.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/instrument-coverage.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/json.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/linker-plugin-lto.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/lints/groups.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/lints/index.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/lints/levels.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/aarch64-apple-ios-sim.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/aarch64-nintendo-switch-freestanding.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/apple-watchos.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armeb-unknown-linux-gnueabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv4t-none-eabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv5te-none-eabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv6k-nintendo-3ds.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv7-sony-vita-newlibeabihf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv7-unknown-linux-uclibceabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv7-unknown-linux-uclibceabihf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/esp-idf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/fuchsia.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/kmc-solid.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/loongarch-linux.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/m68k-unknown-linux-gnu.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/mipsel-sony-psx.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/nto-qnx.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/openbsd.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/openharmony.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/riscv32imac-unknown-xous-elf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/unknown-uefi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/wasm64-unknown-unknown.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/x86_64-fortanix-unknown-sgx.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/x86_64-unknown-none.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/profile-guided-optimization.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/target-tier-policy.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/targets/custom.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/targets/index.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/tests/index.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/what-is-rustc.md\n```", "tree": {"sha": "b8e106fb51c1d086bd472472368548fb4bd3fc19", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b8e106fb51c1d086bd472472368548fb4bd3fc19"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6930a944c73eaf527f4623696a5e7f22a65c336e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkeQPiCRBK7hj4Ov3rIwAAOL4IALAYV1NbF5sf+cWSmIrKF1Lj\nAvjH8khx+Ud6KzbPozDDauK6/HNq/IlX4PeG/Ayb5NlqYCTS37s4hxjPLVi5DdkV\nSRG1zmjDjXhMMY8OdxZjJMYBccm91xnmZxHXU4cwj+IJtutJSy68gPwYiX5SLAy6\nGtJZnxk200z/iLaI+Hvj3PVLKHFFJk49pNtsREznywu3ZDe0/90WHqzLGhAPhk8g\nqPBJZNGcP8++IFBA3WxkHxPqucdDzNVpQiB5lDCk1PciceZjDCw9UsqN7rzBzF8d\n8/9oCoVIx5NFQT6GYVyRio8z7lnK0XwapW940L+1ef+OtUoEbgLZrZtLhT/cOBA=\n=zHGO\n-----END PGP SIGNATURE-----\n", "payload": "tree b8e106fb51c1d086bd472472368548fb4bd3fc19\nparent e7ec428cadddd256340fbe113ae35a1d7da42085\nparent cfe8e8561c2cc31ff51a298bc1dfd0636eaffa13\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1685652450 +0200\ncommitter GitHub <noreply@github.com> 1685652450 +0200\n\nRollup merge of #111802 - jyn514:less-verbose, r=ozkanonur\n\nMake `x test --dry-run` less verbose\n\nThe new output looks like `Testing stage2 book rustc (x86_64-unknown-linux-gnu)`.\n\nPreviously, this would print a message for each doctest, which was quite verbose:\n```\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/exploit-mitigations.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/instrument-coverage.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/json.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/linker-plugin-lto.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/lints/groups.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/lints/index.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/lints/levels.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/aarch64-apple-ios-sim.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/aarch64-nintendo-switch-freestanding.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/apple-watchos.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armeb-unknown-linux-gnueabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv4t-none-eabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv5te-none-eabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv6k-nintendo-3ds.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv7-sony-vita-newlibeabihf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv7-unknown-linux-uclibceabi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/armv7-unknown-linux-uclibceabihf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/esp-idf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/fuchsia.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/kmc-solid.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/loongarch-linux.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/m68k-unknown-linux-gnu.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/mipsel-sony-psx.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/nto-qnx.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/openbsd.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/openharmony.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/riscv32imac-unknown-xous-elf.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/unknown-uefi.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/wasm64-unknown-unknown.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/x86_64-fortanix-unknown-sgx.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/platform-support/x86_64-unknown-none.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/profile-guided-optimization.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/target-tier-policy.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/targets/custom.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/targets/index.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/tests/index.md\ndoc tests for: /home/jyn/src/rust/src/doc/rustc/src/what-is-rustc.md\n```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6930a944c73eaf527f4623696a5e7f22a65c336e", "html_url": "https://github.com/rust-lang/rust/commit/6930a944c73eaf527f4623696a5e7f22a65c336e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6930a944c73eaf527f4623696a5e7f22a65c336e/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e7ec428cadddd256340fbe113ae35a1d7da42085", "url": "https://api.github.com/repos/rust-lang/rust/commits/e7ec428cadddd256340fbe113ae35a1d7da42085", "html_url": "https://github.com/rust-lang/rust/commit/e7ec428cadddd256340fbe113ae35a1d7da42085"}, {"sha": "cfe8e8561c2cc31ff51a298bc1dfd0636eaffa13", "url": "https://api.github.com/repos/rust-lang/rust/commits/cfe8e8561c2cc31ff51a298bc1dfd0636eaffa13", "html_url": "https://github.com/rust-lang/rust/commit/cfe8e8561c2cc31ff51a298bc1dfd0636eaffa13"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "eec8c4ad69f2343a002f18c8016be4f9038e7a73", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6930a944c73eaf527f4623696a5e7f22a65c336e/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6930a944c73eaf527f4623696a5e7f22a65c336e/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=6930a944c73eaf527f4623696a5e7f22a65c336e", "patch": "@@ -1772,6 +1772,14 @@ impl Step for BookTest {\n     ///\n     /// This uses the `rustdoc` that sits next to `compiler`.\n     fn run(self, builder: &Builder<'_>) {\n+        let host = self.compiler.host;\n+        let _guard = builder.msg(\n+            Kind::Test,\n+            self.compiler.stage,\n+            &format!(\"book {}\", self.name),\n+            host,\n+            host,\n+        );\n         // External docs are different from local because:\n         // - Some books need pre-processing by mdbook before being tested.\n         // - They need to save their state to toolstate.\n@@ -1963,7 +1971,7 @@ fn markdown_test(builder: &Builder<'_>, compiler: Compiler, markdown: &Path) ->\n         }\n     }\n \n-    builder.info(&format!(\"doc tests for: {}\", markdown.display()));\n+    builder.verbose(&format!(\"doc tests for: {}\", markdown.display()));\n     let mut cmd = builder.rustdoc_cmd(compiler);\n     builder.add_rust_test_threads(&mut cmd);\n     // allow for unstable options such as new editions"}]}