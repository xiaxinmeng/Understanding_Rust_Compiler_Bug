{"sha": "2c2346e3d4f999b95a56444d978c3ea792828263", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJjMjM0NmUzZDRmOTk5Yjk1YTU2NDQ0ZDk3OGMzZWE3OTI4MjgyNjM=", "commit": {"author": {"name": "James Miller", "email": "bladeon@gmail.com", "date": "2013-05-26T05:40:07Z"}, "committer": {"name": "James Miller", "email": "bladeon@gmail.com", "date": "2013-05-26T05:40:07Z"}, "message": "Mark &mut parameters as noalias", "tree": {"sha": "41553e521c5434998a19e8d39ef6d12589483e59", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/41553e521c5434998a19e8d39ef6d12589483e59"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2c2346e3d4f999b95a56444d978c3ea792828263", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2c2346e3d4f999b95a56444d978c3ea792828263", "html_url": "https://github.com/rust-lang/rust/commit/2c2346e3d4f999b95a56444d978c3ea792828263", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2c2346e3d4f999b95a56444d978c3ea792828263/comments", "author": null, "committer": null, "parents": [{"sha": "e2f8b51dc599cf1fb7f3f72252bef5e5b717f6bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/e2f8b51dc599cf1fb7f3f72252bef5e5b717f6bd", "html_url": "https://github.com/rust-lang/rust/commit/e2f8b51dc599cf1fb7f3f72252bef5e5b717f6bd"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "f14ea279c2d59ac672d5510e3e4eb0c3343b4e9f", "filename": "src/librustc/middle/trans/base.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/2c2346e3d4f999b95a56444d978c3ea792828263/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2c2346e3d4f999b95a56444d978c3ea792828263/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=2c2346e3d4f999b95a56444d978c3ea792828263", "patch": "@@ -1694,7 +1694,20 @@ pub fn create_llargs_for_fn_args(cx: fn_ctxt,\n     vec::from_fn(args.len(), |i| {\n         unsafe {\n             let arg_n = first_real_arg + i;\n-            llvm::LLVMGetParam(cx.llfn, arg_n as c_uint)\n+            let arg = &args[i];\n+            let llarg = llvm::LLVMGetParam(cx.llfn, arg_n as c_uint);\n+\n+            // Mark `&mut T` as no-alias, as the borrowck pass ensures it's true\n+            match arg.ty.node {\n+                ast::ty_rptr(_, mt) => {\n+                    if mt.mutbl == ast::m_mutbl  {\n+                        llvm::LLVMAddAttribute(llarg, lib::llvm::NoAliasAttribute as c_uint);\n+                    }\n+                }\n+                _ => {}\n+            }\n+\n+            llarg\n         }\n     })\n }"}]}