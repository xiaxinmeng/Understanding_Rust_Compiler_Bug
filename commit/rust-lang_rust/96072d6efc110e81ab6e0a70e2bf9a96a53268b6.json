{"sha": "96072d6efc110e81ab6e0a70e2bf9a96a53268b6", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk2MDcyZDZlZmMxMTBlODFhYjZlMGE3MGUyYmY5YTk2YTUzMjY4YjY=", "commit": {"author": {"name": "Ben Gamari", "email": "bgamari.foss@gmail.com", "date": "2014-07-17T02:24:42Z"}, "committer": {"name": "Ben Gamari", "email": "bgamari.foss@gmail.com", "date": "2014-07-17T02:24:42Z"}, "message": "syntax: Generalize ToTokens impl for Vec<T>\n\nIt will now `flat_map` over the elements of a `Vec<T>` if\n`T: ToTokens`", "tree": {"sha": "f34e7994d53a82c472fee3865384bcff7cfd7663", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f34e7994d53a82c472fee3865384bcff7cfd7663"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96072d6efc110e81ab6e0a70e2bf9a96a53268b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96072d6efc110e81ab6e0a70e2bf9a96a53268b6", "html_url": "https://github.com/rust-lang/rust/commit/96072d6efc110e81ab6e0a70e2bf9a96a53268b6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96072d6efc110e81ab6e0a70e2bf9a96a53268b6/comments", "author": {"login": "bgamari", "id": 1010174, "node_id": "MDQ6VXNlcjEwMTAxNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgamari", "html_url": "https://github.com/bgamari", "followers_url": "https://api.github.com/users/bgamari/followers", "following_url": "https://api.github.com/users/bgamari/following{/other_user}", "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions", "organizations_url": "https://api.github.com/users/bgamari/orgs", "repos_url": "https://api.github.com/users/bgamari/repos", "events_url": "https://api.github.com/users/bgamari/events{/privacy}", "received_events_url": "https://api.github.com/users/bgamari/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bgamari", "id": 1010174, "node_id": "MDQ6VXNlcjEwMTAxNzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1010174?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bgamari", "html_url": "https://github.com/bgamari", "followers_url": "https://api.github.com/users/bgamari/followers", "following_url": "https://api.github.com/users/bgamari/following{/other_user}", "gists_url": "https://api.github.com/users/bgamari/gists{/gist_id}", "starred_url": "https://api.github.com/users/bgamari/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bgamari/subscriptions", "organizations_url": "https://api.github.com/users/bgamari/orgs", "repos_url": "https://api.github.com/users/bgamari/repos", "events_url": "https://api.github.com/users/bgamari/events{/privacy}", "received_events_url": "https://api.github.com/users/bgamari/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8659889ed959d1a5921cb18e42d92e7a4cad5903", "url": "https://api.github.com/repos/rust-lang/rust/commits/8659889ed959d1a5921cb18e42d92e7a4cad5903", "html_url": "https://github.com/rust-lang/rust/commit/8659889ed959d1a5921cb18e42d92e7a4cad5903"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "21c5626d16d3f56089f5882943d37c6ab3c4cc27", "filename": "src/libsyntax/ext/quote.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/96072d6efc110e81ab6e0a70e2bf9a96a53268b6/src%2Flibsyntax%2Fext%2Fquote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96072d6efc110e81ab6e0a70e2bf9a96a53268b6/src%2Flibsyntax%2Fext%2Fquote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fquote.rs?ref=96072d6efc110e81ab6e0a70e2bf9a96a53268b6", "patch": "@@ -54,9 +54,10 @@ pub mod rt {\n         }\n     }\n \n-    impl ToTokens for Vec<TokenTree> {\n-        fn to_tokens(&self, _cx: &ExtCtxt) -> Vec<TokenTree> {\n-            (*self).clone()\n+    impl<T: ToTokens> ToTokens for Vec<T> {\n+        fn to_tokens(&self, cx: &ExtCtxt) -> Vec<TokenTree> {\n+            let a = self.iter().flat_map(|t| t.to_tokens(cx).move_iter());\n+            FromIterator::from_iter(a)\n         }\n     }\n "}]}