{"sha": "93a082149ac8735013313604637029659da9ea45", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkzYTA4MjE0OWFjODczNTAxMzMxMzYwNDYzNzAyOTY1OWRhOWVhNDU=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-10T06:53:46Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-10T06:56:53Z"}, "message": "build: Switch from naturaldocs to rustdoc", "tree": {"sha": "5b681f1d85a3fd53eb68f4a38dc730c872246e22", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b681f1d85a3fd53eb68f4a38dc730c872246e22"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/93a082149ac8735013313604637029659da9ea45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/93a082149ac8735013313604637029659da9ea45", "html_url": "https://github.com/rust-lang/rust/commit/93a082149ac8735013313604637029659da9ea45", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/93a082149ac8735013313604637029659da9ea45/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4d4995fc60be7cc5854fc38b468b441fa8c78d45", "url": "https://api.github.com/repos/rust-lang/rust/commits/4d4995fc60be7cc5854fc38b468b441fa8c78d45", "html_url": "https://github.com/rust-lang/rust/commit/4d4995fc60be7cc5854fc38b468b441fa8c78d45"}], "stats": {"total": 329, "additions": 17, "deletions": 312}, "files": [{"sha": "70ea7d4b4e2a2aee778510237ce683b21acb01c5", "filename": "configure", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/93a082149ac8735013313604637029659da9ea45/configure", "raw_url": "https://github.com/rust-lang/rust/raw/93a082149ac8735013313604637029659da9ea45/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=93a082149ac8735013313604637029659da9ea45", "patch": "@@ -319,7 +319,6 @@ probe CFG_LLVM_CONFIG      llvm-config\n probe CFG_VALGRIND         valgrind\n probe CFG_PERF             perf\n probe CFG_ISCC             iscc\n-probe CFG_NATURALDOCS      NaturalDocs naturaldocs\n probe CFG_LLNEXTGEN        LLnextgen\n probe CFG_PANDOC           pandoc\n probe CFG_PDFLATEX         pdflatex\n@@ -413,7 +412,6 @@ step_msg \"making directories\"\n \n for i in \\\n     doc doc/core doc/std \\\n-    nd nd/core nd/std \\\n     dl tmp\n do\n     make_dir $i"}, {"sha": "565e4c27109f0056dc22ab6fbecc737d079991b6", "filename": "doc/Languages.txt", "status": "removed", "additions": 0, "deletions": 126, "changes": 126, "blob_url": "https://github.com/rust-lang/rust/blob/4d4995fc60be7cc5854fc38b468b441fa8c78d45/doc%2FLanguages.txt", "raw_url": "https://github.com/rust-lang/rust/raw/4d4995fc60be7cc5854fc38b468b441fa8c78d45/doc%2FLanguages.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2FLanguages.txt?ref=4d4995fc60be7cc5854fc38b468b441fa8c78d45", "patch": "@@ -1,126 +0,0 @@\n-Format: 1.51\n-\n-# This is the Natural Docs languages file for this project.  If you change\n-# anything here, it will apply to THIS PROJECT ONLY.  If you'd like to change\n-# something for all your projects, edit the Languages.txt in Natural Docs'\n-# Config directory instead.\n-\n-\n-# You can prevent certain file extensions from being scanned like this:\n-# Ignore Extensions: [extension] [extension] ...\n-\n-\n-#-------------------------------------------------------------------------------\n-# SYNTAX:\n-#\n-# Unlike other Natural Docs configuration files, in this file all comments\n-# MUST be alone on a line.  Some languages deal with the # character, so you\n-# cannot put comments on the same line as content.\n-#\n-# Also, all lists are separated with spaces, not commas, again because some\n-# languages may need to use them.\n-#\n-# Language: [name]\n-# Alter Language: [name]\n-#    Defines a new language or alters an existing one.  Its name can use any\n-#    characters.  If any of the properties below have an add/replace form, you\n-#    must use that when using Alter Language.\n-#\n-#    The language Shebang Script is special.  It's entry is only used for\n-#    extensions, and files with those extensions have their shebang (#!) lines\n-#    read to determine the real language of the file.  Extensionless files are\n-#    always treated this way.\n-#\n-#    The language Text File is also special.  It's treated as one big comment\n-#    so you can put Natural Docs content in them without special symbols.  Also,\n-#    if you don't specify a package separator, ignored prefixes, or enum value\n-#    behavior, it will copy those settings from the language that is used most\n-#    in the source tree.\n-#\n-# Extensions: [extension] [extension] ...\n-# [Add/Replace] Extensions: [extension] [extension] ...\n-#    Defines the file extensions of the language's source files.  You can\n-#    redefine extensions found in the main languages file.  You can use * to\n-#    mean any undefined extension.\n-#\n-# Shebang Strings: [string] [string] ...\n-# [Add/Replace] Shebang Strings: [string] [string] ...\n-#    Defines a list of strings that can appear in the shebang (#!) line to\n-#    designate that it's part of the language.  You can redefine strings found\n-#    in the main languages file.\n-#\n-# Ignore Prefixes in Index: [prefix] [prefix] ...\n-# [Add/Replace] Ignored Prefixes in Index: [prefix] [prefix] ...\n-#\n-# Ignore [Topic Type] Prefixes in Index: [prefix] [prefix] ...\n-# [Add/Replace] Ignored [Topic Type] Prefixes in Index: [prefix] [prefix] ...\n-#    Specifies prefixes that should be ignored when sorting symbols in an\n-#    index.  Can be specified in general or for a specific topic type.\n-#\n-#------------------------------------------------------------------------------\n-# For basic language support only:\n-#\n-# Line Comments: [symbol] [symbol] ...\n-#    Defines a space-separated list of symbols that are used for line comments,\n-#    if any.\n-#\n-# Block Comments: [opening sym] [closing sym] [opening sym] [closing sym] ...\n-#    Defines a space-separated list of symbol pairs that are used for block\n-#    comments, if any.\n-#\n-# Package Separator: [symbol]\n-#    Defines the default package separator symbol.  The default is a dot.\n-#\n-# [Topic Type] Prototype Enders: [symbol] [symbol] ...\n-#    When defined, Natural Docs will attempt to get a prototype from the code\n-#    immediately following the topic type.  It stops when it reaches one of\n-#    these symbols.  Use \\n for line breaks.\n-#\n-# Line Extender: [symbol]\n-#    Defines the symbol that allows a prototype to span multiple lines if\n-#    normally a line break would end it.\n-#\n-# Enum Values: [global|under type|under parent]\n-#    Defines how enum values are referenced.  The default is global.\n-#    global       - Values are always global, referenced as 'value'.\n-#    under type   - Values are under the enum type, referenced as\n-#               'package.enum.value'.\n-#    under parent - Values are under the enum's parent, referenced as\n-#               'package.value'.\n-#\n-# Perl Package: [perl package]\n-#    Specifies the Perl package used to fine-tune the language behavior in ways\n-#    too complex to do in this file.\n-#\n-#------------------------------------------------------------------------------\n-# For full language support only:\n-#\n-# Full Language Support: [perl package]\n-#    Specifies the Perl package that has the parsing routines necessary for full\n-#    language support.\n-#\n-#-------------------------------------------------------------------------------\n-\n-# The following languages are defined in the main file, if you'd like to alter\n-# them:\n-#\n-#    Text File, Shebang Script, C/C++, C#, Java, JavaScript, Perl, Python,\n-#    PHP, SQL, Visual Basic, Pascal, Assembly, Ada, Tcl, Ruby, Makefile,\n-#    ActionScript, ColdFusion, R, Fortran\n-\n-# If you add a language that you think would be useful to other developers\n-# and should be included in Natural Docs by default, please e-mail it to\n-# languages [at] naturaldocs [dot] org.\n-\n-\n-Language: Rust\n-\n-   Extensions: rc rs\n-   Line Comment: //\n-   Block Comment: /* */\n-   Package Separator: ::\n-   Function Prototype Enders: ; {\n-   Predicate Prototype Enders: ; {\n-   Type Prototype Enders: ; }\n-   Class Prototype Enders: {\n-   Variant Prototype Enders: ;"}, {"sha": "32e39f85abcb3d1fbaf05d9c0ce563da4bc9423d", "filename": "doc/Topics.txt", "status": "removed", "additions": 0, "deletions": 159, "changes": 159, "blob_url": "https://github.com/rust-lang/rust/blob/4d4995fc60be7cc5854fc38b468b441fa8c78d45/doc%2FTopics.txt", "raw_url": "https://github.com/rust-lang/rust/raw/4d4995fc60be7cc5854fc38b468b441fa8c78d45/doc%2FTopics.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/doc%2FTopics.txt?ref=4d4995fc60be7cc5854fc38b468b441fa8c78d45", "patch": "@@ -1,159 +0,0 @@\n-Format: 1.51\n-\n-# This is the Natural Docs topics file for this project.  If you change anything\n-# here, it will apply to THIS PROJECT ONLY.  If you'd like to change something\n-# for all your projects, edit the Topics.txt in Natural Docs' Config directory\n-# instead.\n-\n-\n-# If you'd like to prevent keywords from being recognized by Natural Docs, you\n-# can do it like this:\n-# Ignore Keywords: [keyword], [keyword], ...\n-#\n-# Or you can use the list syntax like how they are defined:\n-# Ignore Keywords:\n-#    [keyword]\n-#    [keyword], [plural keyword]\n-#    ...\n-\n-\n-#-------------------------------------------------------------------------------\n-# SYNTAX:\n-#\n-# Topic Type: [name]\n-# Alter Topic Type: [name]\n-#    Creates a new topic type or alters one from the main file.  Each type gets\n-#    its own index and behavior settings.  Its name can have letters, numbers,\n-#    spaces, and these charaters: - / . '\n-#\n-# Plural: [name]\n-#    Sets the plural name of the topic type, if different.\n-#\n-# Keywords:\n-#    [keyword]\n-#    [keyword], [plural keyword]\n-#    ...\n-#    Defines or adds to the list of keywords for the topic type.  They may only\n-#    contain letters, numbers, and spaces and are not case sensitive.  Plural\n-#    keywords are used for list topics.  You can redefine keywords found in the\n-#    main topics file.\n-#\n-# Index: [yes|no]\n-#    Whether the topics get their own index.  Defaults to yes.  Everything is\n-#    included in the general index regardless of this setting.\n-#\n-# Scope: [normal|start|end|always global]\n-#    How the topics affects scope.  Defaults to normal.\n-#    normal        - Topics stay within the current scope.\n-#    start         - Topics start a new scope for all the topics beneath it,\n-#                    like class topics.\n-#    end           - Topics reset the scope back to global for all the topics\n-#                    beneath it.\n-#    always global - Topics are defined as global, but do not change the scope\n-#                    for any other topics.\n-#\n-# Class Hierarchy: [yes|no]\n-#    Whether the topics are part of the class hierarchy.  Defaults to no.\n-#\n-# Page Title If First: [yes|no]\n-#    Whether the topic's title becomes the page title if it's the first one in\n-#    a file.  Defaults to no.\n-#\n-# Break Lists: [yes|no]\n-#    Whether list topics should be broken into individual topics in the output.\n-#    Defaults to no.\n-#\n-# Can Group With: [type], [type], ...\n-#    Defines a list of topic types that this one can possibly be grouped with.\n-#    Defaults to none.\n-#-------------------------------------------------------------------------------\n-\n-# The following topics are defined in the main file, if you'd like to alter\n-# their behavior or add keywords:\n-#\n-#    Generic, Class, Interface, Section, File, Group, Function, Variable,\n-#    Property, Type, Constant, Enumeration, Event, Delegate, Macro,\n-#    Database, Database Table, Database View, Database Index, Database\n-#    Cursor, Database Trigger, Cookie, Build Target\n-\n-# If you add something that you think would be useful to other developers\n-# and should be included in Natural Docs by default, please e-mail it to\n-# topics [at] naturaldocs [dot] org.\n-\n-\n-#Topic Type: Crate\n-\n-#   Plural: Crates\n-#   Scope: Always Global\n-\n-#   Keywords:\n-#      crate, crates\n-\n-Topic Type: Syntax Extension\n-\n-   Plural: Syntax Extensions\n-   Scope: Always Global\n-\n-   Keywords:\n-      syntax extension, syntax extensions\n-\n-#Alter Topic Type: Class\n-\n-#   Keywords:\n-#      object, objects\n-#      tag, tags\n-#      resource, resources\n-\n-Topic Type: Module\n-   Plural: Modules\n-   Scope: Start\n-   Class Hierarchy: Yes\n-   Page Title If First: Yes\n-\n-   Keywords:\n-      module, modules\n-\n-Topic Type: Object\n-   Plural: Objects\n-   Scope: Start\n-   Class Hierarchy: Yes\n-\n-   Keywords:\n-      obj, objs\n-\n-Topic Type: Tag\n-   Plural: Tags\n-   Scope: Start\n-   Class Hierarchy: Yes\n-\n-   Keywords:\n-      tag, tags\n-\n-#Alter Topic Type: Function\n-\n-#   Scope: Start\n-#      predicate, predicates\n-\n-#   Ignore Keywords:\n-#      method, methods\n-#   Keywords:\n-#      variant, variants\n-\n-Topic Type: Variant\n-\n-   Plural: Variants\n-   Keywords:\n-      variant, variants\n-\n-Alter Topic Type: Type\n-\n-    Keywords:\n-       resource, resources\n-\n-Topic Type: Predicate\n-\n-   Plural: Predicates\n-   Break Lists: Yes\n-\n-   Keywords:\n-      predicate, predicates"}, {"sha": "132a048352dd0523141a8baaec7b910fe9ed958c", "filename": "mk/docs.mk", "status": "modified", "additions": 17, "deletions": 25, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/93a082149ac8735013313604637029659da9ea45/mk%2Fdocs.mk", "raw_url": "https://github.com/rust-lang/rust/raw/93a082149ac8735013313604637029659da9ea45/mk%2Fdocs.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdocs.mk?ref=93a082149ac8735013313604637029659da9ea45", "patch": "@@ -100,42 +100,34 @@ endif\n \n \n ######################################################################\n-# Naturaldocs (library reference related)\n+# Rustdoc (libcore/std)\n ######################################################################\n \n-ifeq ($(CFG_NATURALDOCS),)\n-  $(info cfg: no naturaldocs found, omitting library doc build)\n+ifeq ($(CFG_PANDOC),)\n+  $(info cfg: no pandoc found, omitting library doc build)\n else\n \n-define libdoc\n-doc/$(1)/index.html: nd/$(1)/Languages.txt nd/$(1)/Topics.txt \\\n-                     nd/$(1)/lib.css $(2)\n-\t@$$(call E, naturaldocs: $$@)\n-\t$(CFG_NATURALDOCS) -i $(S)src/lib$(1) -o HTML doc/$(1) \\\n-                       -p nd/$(1) -r -s Default lib\n-\n-nd/$(1)/Languages.txt: $(S)doc/Languages.txt\n-\t@$$(call E, cp: $$@)\n-\t$(Q)cp $$< $$@\n+# The rustdoc executable\n+RUSTDOC = $(HBIN2_H_$(CFG_HOST_TRIPLE))/rustdoc$(X)\n \n-nd/$(1)/Topics.txt: $(S)doc/Topics.txt\n-\t@$$(call E, cp: $$@)\n-\t$(Q)cp $$< $$@\n+# The library documenting macro\n+# $(1) - The output directory\n+# $(2) - The crate file\n+# $(3) - The crate soruce files\n+define libdoc\n+doc/$(1)/index.html: $(2) $(3) $$(RUSTDOC) doc/$(1)/rust.css\n+\t@$$(call E, rustdoc: $$@)\n+\t$(Q)$(RUSTDOC) $(2) --output-dir=doc/$(1)\n \n-nd/$(1)/lib.css: $(S)doc/lib.css\n+doc/$(1)/rust.css: $(S)doc/rust.css\n \t@$$(call E, cp: $$@)\n \t$(Q)cp $$< $$@\n \n-GENERATED += nd/$(1)/Languages.txt \\\n-             nd/$(1)/Topics.txt \\\n-             nd/$(1)/Menu.txt \\\n-             nd/$(1)/Data\n-\n-DOCS += doc/$(1)/index.html nd/$(1)/lib.css\n+DOCS += doc/$(1)/index.html\n endef\n \n-$(eval $(call libdoc,core,$(CORELIB_CRATE) $(CORELIB_INPUTS)))\n-$(eval $(call libdoc,std,$(STDLIB_CRATE) $(STDLIB_INPUTS)))\n+$(eval $(call libdoc,core,$(CORELIB_CRATE),$(CORELIB_INPUTS)))\n+$(eval $(call libdoc,std,$(STDLIB_CRATE),$(STDLIB_INPUTS)))\n endif\n \n "}]}