{"sha": "06a97a027a21f6fe67f91b0630291fbb62d2de83", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA2YTk3YTAyN2EyMWY2ZmU2N2Y5MWIwNjMwMjkxZmJiNjJkMmRlODM=", "commit": {"author": {"name": "Nathan West", "email": "Lucretiel@gmail.com", "date": "2020-05-22T19:59:38Z"}, "committer": {"name": "Nathan West", "email": "Lucretiel@gmail.com", "date": "2020-05-29T04:50:36Z"}, "message": "Clarify comment message & MAX_LENGTH const", "tree": {"sha": "5b9bfb2b34605161297db426cdc86cf4b4c8f36b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b9bfb2b34605161297db426cdc86cf4b4c8f36b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/06a97a027a21f6fe67f91b0630291fbb62d2de83", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/06a97a027a21f6fe67f91b0630291fbb62d2de83", "html_url": "https://github.com/rust-lang/rust/commit/06a97a027a21f6fe67f91b0630291fbb62d2de83", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/06a97a027a21f6fe67f91b0630291fbb62d2de83/comments", "author": {"login": "Lucretiel", "id": 1823405, "node_id": "MDQ6VXNlcjE4MjM0MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1823405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lucretiel", "html_url": "https://github.com/Lucretiel", "followers_url": "https://api.github.com/users/Lucretiel/followers", "following_url": "https://api.github.com/users/Lucretiel/following{/other_user}", "gists_url": "https://api.github.com/users/Lucretiel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lucretiel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lucretiel/subscriptions", "organizations_url": "https://api.github.com/users/Lucretiel/orgs", "repos_url": "https://api.github.com/users/Lucretiel/repos", "events_url": "https://api.github.com/users/Lucretiel/events{/privacy}", "received_events_url": "https://api.github.com/users/Lucretiel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Lucretiel", "id": 1823405, "node_id": "MDQ6VXNlcjE4MjM0MDU=", "avatar_url": "https://avatars.githubusercontent.com/u/1823405?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Lucretiel", "html_url": "https://github.com/Lucretiel", "followers_url": "https://api.github.com/users/Lucretiel/followers", "following_url": "https://api.github.com/users/Lucretiel/following{/other_user}", "gists_url": "https://api.github.com/users/Lucretiel/gists{/gist_id}", "starred_url": "https://api.github.com/users/Lucretiel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Lucretiel/subscriptions", "organizations_url": "https://api.github.com/users/Lucretiel/orgs", "repos_url": "https://api.github.com/users/Lucretiel/repos", "events_url": "https://api.github.com/users/Lucretiel/events{/privacy}", "received_events_url": "https://api.github.com/users/Lucretiel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "defbd845a33cf3c61c3af77aae474964f92e34bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/defbd845a33cf3c61c3af77aae474964f92e34bb", "html_url": "https://github.com/rust-lang/rust/commit/defbd845a33cf3c61c3af77aae474964f92e34bb"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "b780340884e1f83d735a8907887acc86e3774111", "filename": "src/libstd/net/addr.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/06a97a027a21f6fe67f91b0630291fbb62d2de83/src%2Flibstd%2Fnet%2Faddr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/06a97a027a21f6fe67f91b0630291fbb62d2de83/src%2Flibstd%2Fnet%2Faddr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet%2Faddr.rs?ref=06a97a027a21f6fe67f91b0630291fbb62d2de83", "patch": "@@ -605,11 +605,14 @@ impl fmt::Display for SocketAddrV4 {\n         if f.precision().is_none() && f.width().is_none() {\n             write!(f, \"{}:{}\", self.ip(), self.port())\n         } else {\n-            const IPV4_SOCKET_BUF_LEN: usize = 21;\n+            const IPV4_SOCKET_BUF_LEN: usize = (3 * 4)  // the segments\n+                + 3  // the separators\n+                + 1 + 5; // the port\n             let mut buf = [0; IPV4_SOCKET_BUF_LEN];\n             let mut buf_slice = &mut buf[..];\n \n-            // Unwrap is fine because writing to a buffer is infallible\n+            // Unwrap is fine because writing to a sufficiently-sized\n+            // buffer is infallible\n             write!(buf_slice, \"{}:{}\", self.ip(), self.port()).unwrap();\n             let len = IPV4_SOCKET_BUF_LEN - buf_slice.len();\n \n@@ -643,7 +646,8 @@ impl fmt::Display for SocketAddrV6 {\n             let mut buf = [0; IPV6_SOCKET_BUF_LEN];\n             let mut buf_slice = &mut buf[..];\n \n-            // Unwrap is fine because writing to a buffer is infallible\n+            // Unwrap is fine because writing to a sufficiently-sized\n+            // buffer is infallible\n             write!(buf_slice, \"[{}]:{}\", self.ip(), self.port()).unwrap();\n             let len = IPV6_SOCKET_BUF_LEN - buf_slice.len();\n "}]}