{"sha": "94b0a7b8e9affe00c83c7afdb725edd530d855ee", "node_id": "C_kwDOAAsO6NoAKDk0YjBhN2I4ZTlhZmZlMDBjODNjN2FmZGI3MjVlZGQ1MzBkODU1ZWU", "commit": {"author": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-02-01T09:13:32Z"}, "committer": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-02-01T09:13:32Z"}, "message": "silence lint in clippy", "tree": {"sha": "80dd6c4ef37ed5ab997962c2ab02df8b2a1d085e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/80dd6c4ef37ed5ab997962c2ab02df8b2a1d085e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/94b0a7b8e9affe00c83c7afdb725edd530d855ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/94b0a7b8e9affe00c83c7afdb725edd530d855ee", "html_url": "https://github.com/rust-lang/rust/commit/94b0a7b8e9affe00c83c7afdb725edd530d855ee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/94b0a7b8e9affe00c83c7afdb725edd530d855ee/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea624699e3311985deec9b150ed02242b86aeb95", "url": "https://api.github.com/repos/rust-lang/rust/commits/ea624699e3311985deec9b150ed02242b86aeb95", "html_url": "https://github.com/rust-lang/rust/commit/ea624699e3311985deec9b150ed02242b86aeb95"}], "stats": {"total": 53, "additions": 27, "deletions": 26}, "files": [{"sha": "514fb25c8cfd823bfacd62b2babbfcd3d05e2a22", "filename": "src/tools/clippy/tests/ui/non_send_fields_in_send_ty.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/94b0a7b8e9affe00c83c7afdb725edd530d855ee/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fnon_send_fields_in_send_ty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/94b0a7b8e9affe00c83c7afdb725edd530d855ee/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fnon_send_fields_in_send_ty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fnon_send_fields_in_send_ty.rs?ref=94b0a7b8e9affe00c83c7afdb725edd530d855ee", "patch": "@@ -1,4 +1,5 @@\n #![warn(clippy::non_send_fields_in_send_ty)]\n+#![allow(suspicious_auto_trait_impls)]\n #![feature(extern_types)]\n \n use std::cell::UnsafeCell;"}, {"sha": "b6c904a147a5f4da727b9e75b70c94ced79ad607", "filename": "src/tools/clippy/tests/ui/non_send_fields_in_send_ty.stderr", "status": "modified", "additions": 26, "deletions": 26, "changes": 52, "blob_url": "https://github.com/rust-lang/rust/blob/94b0a7b8e9affe00c83c7afdb725edd530d855ee/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fnon_send_fields_in_send_ty.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/94b0a7b8e9affe00c83c7afdb725edd530d855ee/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fnon_send_fields_in_send_ty.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fclippy%2Ftests%2Fui%2Fnon_send_fields_in_send_ty.stderr?ref=94b0a7b8e9affe00c83c7afdb725edd530d855ee", "patch": "@@ -1,167 +1,167 @@\n error: some fields in `RingBuffer<T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:16:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:17:1\n    |\n LL | unsafe impl<T> Send for RingBuffer<T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `-D clippy::non-send-fields-in-send-ty` implied by `-D warnings`\n note: it is not safe to send field `data` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:11:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:12:5\n    |\n LL |     data: Vec<UnsafeCell<T>>,\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n    = help: add bounds on type parameter `T` that satisfy `Vec<UnsafeCell<T>>: Send`\n \n error: some fields in `MvccRwLock<T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:24:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:25:1\n    |\n LL | unsafe impl<T> Send for MvccRwLock<T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `lock` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:21:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:22:5\n    |\n LL |     lock: Mutex<Box<T>>,\n    |     ^^^^^^^^^^^^^^^^^^^\n    = help: add bounds on type parameter `T` that satisfy `Mutex<Box<T>>: Send`\n \n error: some fields in `ArcGuard<RC, T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:32:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:33:1\n    |\n LL | unsafe impl<RC, T: Send> Send for ArcGuard<RC, T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `head` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:29:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:30:5\n    |\n LL |     head: Arc<RC>,\n    |     ^^^^^^^^^^^^^\n    = help: add bounds on type parameter `RC` that satisfy `Arc<RC>: Send`\n \n error: some fields in `DeviceHandle<T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:48:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:49:1\n    |\n LL | unsafe impl<T: UsbContext> Send for DeviceHandle<T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `context` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:44:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:45:5\n    |\n LL |     context: T,\n    |     ^^^^^^^^^^\n    = help: add `T: Send` bound in `Send` impl\n \n error: some fields in `NoGeneric` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:55:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:56:1\n    |\n LL | unsafe impl Send for NoGeneric {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `rc_is_not_send` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:52:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:53:5\n    |\n LL |     rc_is_not_send: Rc<String>,\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = help: use a thread-safe type that implements `Send`\n \n error: some fields in `MultiField<T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:63:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:64:1\n    |\n LL | unsafe impl<T> Send for MultiField<T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `field1` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:58:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:59:5\n    |\n LL |     field1: T,\n    |     ^^^^^^^^^\n    = help: add `T: Send` bound in `Send` impl\n note: it is not safe to send field `field2` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:59:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:60:5\n    |\n LL |     field2: T,\n    |     ^^^^^^^^^\n    = help: add `T: Send` bound in `Send` impl\n note: it is not safe to send field `field3` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:60:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:61:5\n    |\n LL |     field3: T,\n    |     ^^^^^^^^^\n    = help: add `T: Send` bound in `Send` impl\n \n error: some fields in `MyOption<T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:70:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:71:1\n    |\n LL | unsafe impl<T> Send for MyOption<T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `0` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:66:12\n+  --> $DIR/non_send_fields_in_send_ty.rs:67:12\n    |\n LL |     MySome(T),\n    |            ^\n    = help: add `T: Send` bound in `Send` impl\n \n error: some fields in `MultiParam<A, B>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:82:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:83:1\n    |\n LL | unsafe impl<A, B> Send for MultiParam<A, B> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `vec` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:79:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:80:5\n    |\n LL |     vec: Vec<(A, B)>,\n    |     ^^^^^^^^^^^^^^^^\n    = help: add bounds on type parameters `A, B` that satisfy `Vec<(A, B)>: Send`\n \n error: some fields in `HeuristicTest` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:100:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:101:1\n    |\n LL | unsafe impl Send for HeuristicTest {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `field4` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:95:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:96:5\n    |\n LL |     field4: (*const NonSend, Rc<u8>),\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    = help: use a thread-safe type that implements `Send`\n \n error: some fields in `AttrTest3<T>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:119:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:120:1\n    |\n LL | unsafe impl<T> Send for AttrTest3<T> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `0` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:114:11\n+  --> $DIR/non_send_fields_in_send_ty.rs:115:11\n    |\n LL |     Enum2(T),\n    |           ^\n    = help: add `T: Send` bound in `Send` impl\n \n error: some fields in `Complex<P, u32>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:127:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:128:1\n    |\n LL | unsafe impl<P> Send for Complex<P, u32> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `field1` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:123:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:124:5\n    |\n LL |     field1: A,\n    |     ^^^^^^^^^\n    = help: add `P: Send` bound in `Send` impl\n \n error: some fields in `Complex<Q, MutexGuard<'static, bool>>` are not safe to be sent to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:130:1\n+  --> $DIR/non_send_fields_in_send_ty.rs:131:1\n    |\n LL | unsafe impl<Q: Send> Send for Complex<Q, MutexGuard<'static, bool>> {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: it is not safe to send field `field2` to another thread\n-  --> $DIR/non_send_fields_in_send_ty.rs:124:5\n+  --> $DIR/non_send_fields_in_send_ty.rs:125:5\n    |\n LL |     field2: B,\n    |     ^^^^^^^^^"}]}