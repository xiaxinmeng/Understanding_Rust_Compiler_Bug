{"sha": "6142bf6bd91cff38e4067e513813705e5e90ceb7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYxNDJiZjZiZDkxY2ZmMzhlNDA2N2U1MTM4MTM3MDVlNWU5MGNlYjc=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2020-10-07T02:36:12Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-11-17T15:43:38Z"}, "message": "Update fulldeps test", "tree": {"sha": "b9e3c11995733fddce10cdd3071d6ac5124e40e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b9e3c11995733fddce10cdd3071d6ac5124e40e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6142bf6bd91cff38e4067e513813705e5e90ceb7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl+z76wACgkQPgar6Auq\n8Zyp/BAAvnFIrr49xZk8UYVLGGGtv2tfaRJQZTrjULlottVRQbbu54z7nxM2a2C4\nKCAf/L00Ksn8jYGPMMEfY2yYhhwCY6pgi3m3UDlKX6qdQ10lHyku95qPoMBpyGs/\nVKr3ViH/9O0OtKypP4sjS+yPRr6+fyn6x1Nz8nqcDhZzYWGqwhi3LdQUG3RIQqDF\n8QTJ+HQrVATEHCwPMCKIWFN+8l6vhfLHCmHFxGH6q5ICyVzHPHNXo5+7FUcqODzO\nOsQqn30qO8NJBmz23ZSrDqNc67zpVQef3RNp/pDobJRfHB8dg2mLXfMDInvSDebf\nRXrdvSe7nB9DFsfv/kTU1kcK5+/+j/TdaF3/mnamJxbV5f+nHCixtkRb1NfY89bO\nntqeBVtFugmKqCYlGQCCqaCXmzNxjkxCq/14Vk7Zcp2gaR1JlRNScXHshROQlAb0\nhQJsO6uuaO51k/u8e9Hw8isWxDqzErYw5fe+3YQBCSX26tjMmMqYrv+KgZFCXX1N\nVr+YrOYilqbZ5VzWJGK6FiGARTSXJjBOQ1qmeFfB/C3WOA4lXasEk/KDwqnEEl5V\npYh8hjxZxCy5xAMUFzuROvteOTVFydgE252V8HuGtWuRSX8EIiYwlEuYdoOBmD59\nsT1K/4ZxORVOHQnGUCYgx65Z2uLIpHjpzQohUKrt3fOGochte8c=\n=rcLZ\n-----END PGP SIGNATURE-----", "payload": "tree b9e3c11995733fddce10cdd3071d6ac5124e40e3\nparent d2df22268c9eb0e900a72157170d2b320daa3099\nauthor Mark Rousskov <mark.simulacrum@gmail.com> 1602038172 -0400\ncommitter Pietro Albini <pietro@pietroalbini.org> 1605627818 +0100\n\nUpdate fulldeps test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6142bf6bd91cff38e4067e513813705e5e90ceb7", "html_url": "https://github.com/rust-lang/rust/commit/6142bf6bd91cff38e4067e513813705e5e90ceb7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6142bf6bd91cff38e4067e513813705e5e90ceb7/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2df22268c9eb0e900a72157170d2b320daa3099", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2df22268c9eb0e900a72157170d2b320daa3099", "html_url": "https://github.com/rust-lang/rust/commit/d2df22268c9eb0e900a72157170d2b320daa3099"}], "stats": {"total": 47, "additions": 18, "deletions": 29}, "files": [{"sha": "303268fae27a1ddeb048cd58bdcde2683d9a7038", "filename": "src/test/ui-fulldeps/session-derive-errors.stderr", "status": "modified", "additions": 18, "deletions": 29, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/6142bf6bd91cff38e4067e513813705e5e90ceb7/src%2Ftest%2Fui-fulldeps%2Fsession-derive-errors.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6142bf6bd91cff38e4067e513813705e5e90ceb7/src%2Ftest%2Fui-fulldeps%2Fsession-derive-errors.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fsession-derive-errors.stderr?ref=6142bf6bd91cff38e4067e513813705e5e90ceb7", "patch": "@@ -1,25 +1,20 @@\n error: `#[derive(SessionDiagnostic)]` can only be used on structs\n   --> $DIR/session-derive-errors.rs:28:1\n    |\n-LL | / #[error = \"E0123\"]\n-LL | |\n-LL | | enum SessionDiagnosticOnEnum {\n-LL | |     Foo,\n-LL | |     Bar,\n-LL | | }\n-   | |_^\n+LL | #[error = \"E0123\"]\n+   | ^\n \n error: `#[label = ...]` is not a valid SessionDiagnostic struct attribute\n   --> $DIR/session-derive-errors.rs:37:1\n    |\n LL | #[label = \"This is in the wrong place\"]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   | ^\n \n error: `#[suggestion = ...]` is not a valid SessionDiagnostic field attribute\n   --> $DIR/session-derive-errors.rs:44:5\n    |\n LL |     #[suggestion = \"this is the wrong kind of attribute\"]\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |     ^\n \n error: `error` specified multiple times\n   --> $DIR/session-derive-errors.rs:52:11\n@@ -37,21 +32,21 @@ error: `code` not specified\n   --> $DIR/session-derive-errors.rs:67:1\n    |\n LL | struct ErrorCodeNotProvided {}\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   | ^^^^^^\n    |\n    = help: use the [code = \"...\"] attribute to set this diagnostic's error code \n \n error: the `#[message = \"...\"]` attribute can only be applied to fields of type Span\n   --> $DIR/session-derive-errors.rs:95:5\n    |\n LL |     #[message = \"this message is applied to a String field\"]\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |     ^\n \n error: `name` doesn't refer to a field on this type\n   --> $DIR/session-derive-errors.rs:102:1\n    |\n LL | #[message = \"This error has a field, and references {name}\"]\n-   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   | ^\n \n error: invalid format string: expected `'}'` but string was terminated\n   --> $DIR/session-derive-errors.rs:110:1\n@@ -77,59 +72,53 @@ error: The `#[label = ...]` attribute can only be applied to fields of type Span\n   --> $DIR/session-derive-errors.rs:138:5\n    |\n LL |     #[label = \"See here\"]\n-   |     ^^^^^^^^^^^^^^^^^^^^^\n+   |     ^\n \n error: `nonsense` is not a valid key for `#[suggestion(...)]`\n   --> $DIR/session-derive-errors.rs:163:18\n    |\n LL |     #[suggestion(nonsense = \"This is nonsense\")]\n-   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |                  ^^^^^^^^\n \n error: `msg` is not a valid key for `#[suggestion(...)]`\n   --> $DIR/session-derive-errors.rs:171:18\n    |\n LL |     #[suggestion(msg = \"This is a suggestion\")]\n-   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |                  ^^^\n \n error: missing suggestion message\n   --> $DIR/session-derive-errors.rs:179:7\n    |\n LL |     #[suggestion(code = \"This is suggested code\")]\n-   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |       ^^^^^^^^^^\n    |\n    = help: provide a suggestion message using #[suggestion(message = \"...\")]\n \n error: wrong field type for suggestion\n   --> $DIR/session-derive-errors.rs:194:5\n    |\n-LL | /     #[suggestion(message = \"This is a message\", code = \"This is suggested code\")]\n-LL | |\n-LL | |     suggestion: Applicability,\n-   | |_____________________________^\n+LL |     #[suggestion(message = \"This is a message\", code = \"This is suggested code\")]\n+   |     ^\n    |\n    = help: #[suggestion(...)] should be applied to fields of type Span or (Span, Applicability)\n \n error: type of field annotated with `#[suggestion(...)]` contains more than one Span\n   --> $DIR/session-derive-errors.rs:209:5\n    |\n-LL | /     #[suggestion(message = \"This is a message\", code = \"This is suggested code\")]\n-LL | |\n-LL | |     suggestion: (Span, Span, Applicability),\n-   | |___________________________________________^\n+LL |     #[suggestion(message = \"This is a message\", code = \"This is suggested code\")]\n+   |     ^\n \n error: type of field annotated with `#[suggestion(...)]` contains more than one Applicability\n   --> $DIR/session-derive-errors.rs:217:5\n    |\n-LL | /     #[suggestion(message = \"This is a message\", code = \"This is suggested code\")]\n-LL | |\n-LL | |     suggestion: (Applicability, Applicability, Span),\n-   | |____________________________________________________^\n+LL |     #[suggestion(message = \"This is a message\", code = \"This is suggested code\")]\n+   |     ^\n \n error: invalid annotation list `#[label(...)]`\n   --> $DIR/session-derive-errors.rs:225:7\n    |\n LL |     #[label(\"wrong kind of annotation for label\")]\n-   |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |       ^^^^^\n \n error: aborting due to 18 previous errors\n "}]}