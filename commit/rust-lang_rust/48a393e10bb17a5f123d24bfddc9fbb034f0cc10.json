{"sha": "48a393e10bb17a5f123d24bfddc9fbb034f0cc10", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ4YTM5M2UxMGJiMTdhNWYxMjNkMjRiZmRkYzlmYmIwMzRmMGNjMTA=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2021-03-09T23:01:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-03-09T23:01:30Z"}, "message": "Rollup merge of #82802 - jyn514:build-rustdoc-fullmake, r=Mark-Simulacrum\n\nBuild rustdoc for run-make tests, not just run-make-fulldeps\n\nRustdoc almost never needs a full stage 2 compiler, and requiring\nrustdoc tests to be in run-make-fulldeps adds a lot of compile time for\nno reason.\n\nThis is the same change from https://github.com/rust-lang/rust/pull/81197, but separated into its own PR. I ran into this again today while working on https://github.com/rust-lang/docs.rs/issues/1302.\nr? ```@Mark-Simulacrum```", "tree": {"sha": "0dc6657f7c0d8f4fc03efe54541c8fa3c96519c2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0dc6657f7c0d8f4fc03efe54541c8fa3c96519c2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/48a393e10bb17a5f123d24bfddc9fbb034f0cc10", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgR/5LCRBK7hj4Ov3rIwAAdHIIAIPlds2uLQP3OHoNi3oPMRlT\nXJvbmICcT5dRDDlj3BNsppwvIw16UprTlW/XGI359oWaPCzxpOk+lYCM0PRJWDUH\ngw7AfZ5oMzNwYjz5wlYPX2ecN2aXHLFfo8XH4nHj9ZXt/LM6ybxIRJ1YBEmwZmfa\nokK2XQQNqirH9kDobcmBMNbZC2Ci5W57Su7w9n+IysxDZy379vCYvCLswKbX3S7X\nFIjIgVSb51dHz5DexumISVpplZIHlWgHhE5YChm7lIFr1/h5f8JYhzhfbsEWCREs\n9FGkIjsVay9Z9D0+nS+fCFpQKnZ+2pygPBYcxp0FUk9GFpYK7UWbjLdIhD0+RBc=\n=6tHX\n-----END PGP SIGNATURE-----\n", "payload": "tree 0dc6657f7c0d8f4fc03efe54541c8fa3c96519c2\nparent 761a2b389d49d834ee0088aaccb19033e260bd84\nparent a05a890c35150efbfddcd8788e998bbf7d605847\nauthor Yuki Okushi <huyuumi.dev@gmail.com> 1615330890 +0900\ncommitter GitHub <noreply@github.com> 1615330890 +0900\n\nRollup merge of #82802 - jyn514:build-rustdoc-fullmake, r=Mark-Simulacrum\n\nBuild rustdoc for run-make tests, not just run-make-fulldeps\n\nRustdoc almost never needs a full stage 2 compiler, and requiring\nrustdoc tests to be in run-make-fulldeps adds a lot of compile time for\nno reason.\n\nThis is the same change from https://github.com/rust-lang/rust/pull/81197, but separated into its own PR. I ran into this again today while working on https://github.com/rust-lang/docs.rs/issues/1302.\nr? ```@Mark-Simulacrum```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/48a393e10bb17a5f123d24bfddc9fbb034f0cc10", "html_url": "https://github.com/rust-lang/rust/commit/48a393e10bb17a5f123d24bfddc9fbb034f0cc10", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/48a393e10bb17a5f123d24bfddc9fbb034f0cc10/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "761a2b389d49d834ee0088aaccb19033e260bd84", "url": "https://api.github.com/repos/rust-lang/rust/commits/761a2b389d49d834ee0088aaccb19033e260bd84", "html_url": "https://github.com/rust-lang/rust/commit/761a2b389d49d834ee0088aaccb19033e260bd84"}, {"sha": "a05a890c35150efbfddcd8788e998bbf7d605847", "url": "https://api.github.com/repos/rust-lang/rust/commits/a05a890c35150efbfddcd8788e998bbf7d605847", "html_url": "https://github.com/rust-lang/rust/commit/a05a890c35150efbfddcd8788e998bbf7d605847"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "5d836c6bb623214d6c18a8f489880f6a703f5926", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/48a393e10bb17a5f123d24bfddc9fbb034f0cc10/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/48a393e10bb17a5f123d24bfddc9fbb034f0cc10/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=48a393e10bb17a5f123d24bfddc9fbb034f0cc10", "patch": "@@ -1076,7 +1076,7 @@ note: if you're sure you want to do this, please open an issue as to why. In the\n \n         // Avoid depending on rustdoc when we don't need it.\n         if mode == \"rustdoc\"\n-            || (mode == \"run-make\" && suite.ends_with(\"fulldeps\"))\n+            || mode == \"run-make\"\n             || (mode == \"ui\" && is_rustdoc)\n             || mode == \"js-doc-test\"\n             || mode == \"rustdoc-json\""}]}