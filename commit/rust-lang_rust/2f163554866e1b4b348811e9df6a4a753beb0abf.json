{"sha": "2f163554866e1b4b348811e9df6a4a753beb0abf", "node_id": "C_kwDOAAsO6NoAKDJmMTYzNTU0ODY2ZTFiNGIzNDg4MTFlOWRmNmE0YTc1M2JlYjBhYmY", "commit": {"author": {"name": "Jesus Checa Hidalgo", "email": "jchecahi@redhat.com", "date": "2023-02-22T07:25:14Z"}, "committer": {"name": "Jesus Checa Hidalgo", "email": "jchecahi@redhat.com", "date": "2023-02-22T07:29:09Z"}, "message": "Add no-fail-fast support to miri, rustfmt and clippy testsuites\n\nThis commit adds `--no-fail-fast` flag to each `cargo test`\ncommand in each tool Step trait implementation.\n\nFixes #108261", "tree": {"sha": "c1d181d5fb0644c0ac1a4ab3e6c009de98913dab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c1d181d5fb0644c0ac1a4ab3e6c009de98913dab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2f163554866e1b4b348811e9df6a4a753beb0abf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2f163554866e1b4b348811e9df6a4a753beb0abf", "html_url": "https://github.com/rust-lang/rust/commit/2f163554866e1b4b348811e9df6a4a753beb0abf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2f163554866e1b4b348811e9df6a4a753beb0abf/comments", "author": null, "committer": null, "parents": [{"sha": "824f915cbc32c0942122389274a1b6fbe2ffc51e", "url": "https://api.github.com/repos/rust-lang/rust/commits/824f915cbc32c0942122389274a1b6fbe2ffc51e", "html_url": "https://github.com/rust-lang/rust/commit/824f915cbc32c0942122389274a1b6fbe2ffc51e"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "b4f1506dc8f30c019aaaf0ec021eac9ceb6d6c15", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2f163554866e1b4b348811e9df6a4a753beb0abf/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2f163554866e1b4b348811e9df6a4a753beb0abf/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=2f163554866e1b4b348811e9df6a4a753beb0abf", "patch": "@@ -435,6 +435,10 @@ impl Step for Rustfmt {\n             &[],\n         );\n \n+        if !builder.fail_fast {\n+            cargo.arg(\"--no-fail-fast\");\n+        }\n+\n         let dir = testdir(builder, compiler.host);\n         t!(fs::create_dir_all(&dir));\n         cargo.env(\"RUSTFMT_TEST_DIR\", dir);\n@@ -615,6 +619,10 @@ impl Step for Miri {\n         );\n         cargo.add_rustc_lib_path(builder, compiler);\n \n+        if !builder.fail_fast {\n+            cargo.arg(\"--no-fail-fast\");\n+        }\n+\n         // miri tests need to know about the stage sysroot\n         cargo.env(\"MIRI_SYSROOT\", &miri_sysroot);\n         cargo.env(\"MIRI_HOST_SYSROOT\", sysroot);\n@@ -746,6 +754,10 @@ impl Step for Clippy {\n             &[],\n         );\n \n+        if !builder.fail_fast {\n+            cargo.arg(\"--no-fail-fast\");\n+        }\n+\n         cargo.env(\"RUSTC_TEST_SUITE\", builder.rustc(compiler));\n         cargo.env(\"RUSTC_LIB_PATH\", builder.rustc_libdir(compiler));\n         let host_libs = builder.stage_out(compiler, Mode::ToolRustc).join(builder.cargo_dir());"}]}