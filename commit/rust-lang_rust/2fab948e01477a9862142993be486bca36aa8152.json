{"sha": "2fab948e01477a9862142993be486bca36aa8152", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJmYWI5NDhlMDE0NzdhOTg2MjE0Mjk5M2JlNDg2YmNhMzZhYTgxNTI=", "commit": {"author": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-08-26T17:50:02Z"}, "committer": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-08-27T01:03:32Z"}, "message": "stdlib: Added a treemap traversal function.", "tree": {"sha": "289e692dc4467dce5836415bf9b14873b3029839", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/289e692dc4467dce5836415bf9b14873b3029839"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2fab948e01477a9862142993be486bca36aa8152", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2fab948e01477a9862142993be486bca36aa8152", "html_url": "https://github.com/rust-lang/rust/commit/2fab948e01477a9862142993be486bca36aa8152", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2fab948e01477a9862142993be486bca36aa8152/comments", "author": null, "committer": null, "parents": [{"sha": "cd913b454d1974967536c99c2e0b744b548536c5", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd913b454d1974967536c99c2e0b744b548536c5", "html_url": "https://github.com/rust-lang/rust/commit/cd913b454d1974967536c99c2e0b744b548536c5"}], "stats": {"total": 40, "additions": 40, "deletions": 0}, "files": [{"sha": "6f73df36ef29923690924e1e17d7f9cd57902ec6", "filename": "src/lib/treemap.rs", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/2fab948e01477a9862142993be486bca36aa8152/src%2Flib%2Ftreemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fab948e01477a9862142993be486bca36aa8152/src%2Flib%2Ftreemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ftreemap.rs?ref=2fab948e01477a9862142993be486bca36aa8152", "patch": "@@ -15,6 +15,7 @@ export treemap;\n export init;\n export insert;\n export find;\n+export traverse;\n \n tag tree_node<@K, @V> {\n     empty;\n@@ -74,3 +75,25 @@ fn find<@K, @V>(m : &treemap<K, V>, k : &K) -> option<V> {\n     }\n   }\n }\n+\n+// Performs an in-order traversal\n+fn traverse<@K, @V>(m : &treemap<K, V>, f : fn(&K, &V)) {\n+  alt *m {\n+    empty. { }\n+    node(@k, @v, _, _) {\n+      // copy v to make aliases work out\n+      let v1 = v;\n+      alt *m {\n+        node(_, _, left, _) {\n+          traverse(left, f);\n+        }\n+      }\n+      f(k, v1);\n+      alt *m {\n+        node(_, _, _, right) {\n+          traverse(right, f);\n+        }\n+      }\n+    }\n+  }\n+}"}, {"sha": "f77c95fb7f3cbe2fcc879d313b5c935798ad0a09", "filename": "src/test/stdtest/treemap.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/2fab948e01477a9862142993be486bca36aa8152/src%2Ftest%2Fstdtest%2Ftreemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2fab948e01477a9862142993be486bca36aa8152/src%2Ftest%2Fstdtest%2Ftreemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fstdtest%2Ftreemap.rs?ref=2fab948e01477a9862142993be486bca36aa8152", "patch": "@@ -40,3 +40,20 @@ fn find_not_found() {\n     insert(m, 1, 2);\n     assert(find(m, 2) == none);\n }\n+\n+#[test]\n+fn traverse_in_order() {\n+    let m = init();\n+    insert(m, 3, ());\n+    insert(m, 0, ());\n+    insert(m, 4, ());\n+    insert(m, 2, ());\n+    insert(m, 1, ());\n+\n+    let n = 0;\n+    fn t(n : &mutable int, k : &int, v : &()) {\n+        assert(n == k);\n+        n += 1;\n+    }\n+    traverse(m, bind t(n, _, _));\n+}\n\\ No newline at end of file"}]}