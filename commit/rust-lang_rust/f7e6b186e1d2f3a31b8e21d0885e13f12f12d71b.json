{"sha": "f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY3ZTZiMTg2ZTFkMmYzYTMxYjhlMjFkMDg4NWUxM2YxMmYxMmQ3MWI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-04-03T18:56:53Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-04-03T18:57:25Z"}, "message": "Intern `ModPath` in `Import`\n\nMinor savings only", "tree": {"sha": "9d7a2c08e173ee9bf20cd09ca068ff3de83489f4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9d7a2c08e173ee9bf20cd09ca068ff3de83489f4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "html_url": "https://github.com/rust-lang/rust/commit/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e2213a503ec4c602eb976dccb9d34b56d9c6aba3", "url": "https://api.github.com/repos/rust-lang/rust/commits/e2213a503ec4c602eb976dccb9d34b56d9c6aba3", "html_url": "https://github.com/rust-lang/rust/commit/e2213a503ec4c602eb976dccb9d34b56d9c6aba3"}], "stats": {"total": 12, "additions": 8, "deletions": 4}, "files": [{"sha": "dd80cef23a59a3b4cc37bcb3c000292da97fcb81", "filename": "crates/hir_def/src/item_tree.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/crates%2Fhir_def%2Fsrc%2Fitem_tree.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/crates%2Fhir_def%2Fsrc%2Fitem_tree.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fitem_tree.rs?ref=f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "patch": "@@ -529,7 +529,7 @@ impl<N: ItemTreeNode> Index<FileItemTreeId<N>> for ItemTree {\n /// A desugared `use` import.\n #[derive(Debug, Clone, Eq, PartialEq)]\n pub struct Import {\n-    pub path: ModPath,\n+    pub path: Interned<ModPath>,\n     pub alias: Option<ImportAlias>,\n     pub visibility: RawVisibilityId,\n     pub is_glob: bool,"}, {"sha": "ead7cd7a4588549868da3b6cf6e628e32204b3e3", "filename": "crates/hir_def/src/item_tree/lower.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/crates%2Fhir_def%2Fsrc%2Fitem_tree%2Flower.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/crates%2Fhir_def%2Fsrc%2Fitem_tree%2Flower.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fitem_tree%2Flower.rs?ref=f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "patch": "@@ -577,7 +577,7 @@ impl Ctx {\n             &self.hygiene,\n             |path, _use_tree, is_glob, alias| {\n                 imports.push(id(tree.imports.alloc(Import {\n-                    path,\n+                    path: Interned::new(path),\n                     alias,\n                     visibility,\n                     is_glob,"}, {"sha": "c2e445b688923fbd47439d8154c26ae65c8e0243", "filename": "crates/hir_def/src/nameres/collector.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/crates%2Fhir_def%2Fsrc%2Fnameres%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b/crates%2Fhir_def%2Fsrc%2Fnameres%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir_def%2Fsrc%2Fnameres%2Fcollector.rs?ref=f7e6b186e1d2f3a31b8e21d0885e13f12f12d71b", "patch": "@@ -23,6 +23,7 @@ use crate::{\n     attr::Attrs,\n     db::DefDatabase,\n     derive_macro_as_call_id,\n+    intern::Interned,\n     item_scope::{ImportType, PerNsGlobImports},\n     item_tree::{\n         self, FileItemTreeId, ItemTree, ItemTreeId, MacroCall, MacroDef, MacroRules, Mod, ModItem,\n@@ -139,7 +140,7 @@ enum ImportSource {\n \n #[derive(Clone, Debug, Eq, PartialEq)]\n struct Import {\n-    path: ModPath,\n+    path: Interned<ModPath>,\n     alias: Option<ImportAlias>,\n     visibility: RawVisibility,\n     is_glob: bool,\n@@ -181,7 +182,10 @@ impl Import {\n         let attrs = &tree.attrs(db, krate, ModItem::from(id.value).into());\n         let visibility = &tree[it.visibility];\n         Self {\n-            path: ModPath::from_segments(PathKind::Plain, iter::once(it.name.clone())),\n+            path: Interned::new(ModPath::from_segments(\n+                PathKind::Plain,\n+                iter::once(it.name.clone()),\n+            )),\n             alias: it.alias.clone(),\n             visibility: visibility.clone(),\n             is_glob: false,"}]}