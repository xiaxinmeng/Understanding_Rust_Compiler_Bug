{"sha": "7228dbadcaf0d97b0da421127e703d921b2bce53", "node_id": "C_kwDOAAsO6NoAKDcyMjhkYmFkY2FmMGQ5N2IwZGE0MjExMjdlNzAzZDkyMWIyYmNlNTM", "commit": {"author": {"name": "\u9f99\u65b9\u6dde", "email": "longfangsong@icloud.com", "date": "2021-10-06T02:06:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-06T02:06:51Z"}, "message": "Update crates/ide_assists/src/handlers/generate_constant.rs\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>", "tree": {"sha": "9aea948bc4b1d4ce3378a7ea444176a4eb149e81", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9aea948bc4b1d4ce3378a7ea444176a4eb149e81"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7228dbadcaf0d97b0da421127e703d921b2bce53", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhXQS7CRBK7hj4Ov3rIwAA1voIAJI1HWHUU+jqxBEKmAPjfznr\ngk1LVQxwtt744WitsCqOGWVRO9/Lv1+/gU341XX2mpqYQ0qTX/SbfQ1I4/Fn4cRI\ndrhJMshN5bOVEwpyBM+k9BOhQbl3lAs2kxMMajHEICOHyibHbjB7pUWWmlhO+vEc\nuJqK1rE5ea8xjg+pxQe70filjIBi24MZwb7cBzHUmPYjxpu671YmROMPJUoPr0J4\nQod0LbvfcuHMXkZ8F7AmmukyHnEQ4Esbuom/JHRh9De6Q3DTsxbAMLDySQYiJL1s\nBy/QUKnfJ6I+w9PJt3OSlumEJceInZcVQqSZy0KvptDc8RcVM76We2r4o4Jk4VA=\n=ViyQ\n-----END PGP SIGNATURE-----\n", "payload": "tree 9aea948bc4b1d4ce3378a7ea444176a4eb149e81\nparent fab238adf632f05993af992dca2f411e5ac02dc7\nauthor \u9f99\u65b9\u6dde <longfangsong@icloud.com> 1633486011 +0800\ncommitter GitHub <noreply@github.com> 1633486011 +0800\n\nUpdate crates/ide_assists/src/handlers/generate_constant.rs\n\nCo-authored-by: Lukas Wirth <lukastw97@gmail.com>"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7228dbadcaf0d97b0da421127e703d921b2bce53", "html_url": "https://github.com/rust-lang/rust/commit/7228dbadcaf0d97b0da421127e703d921b2bce53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7228dbadcaf0d97b0da421127e703d921b2bce53/comments", "author": {"login": "longfangsong", "id": 13777628, "node_id": "MDQ6VXNlcjEzNzc3NjI4", "avatar_url": "https://avatars.githubusercontent.com/u/13777628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/longfangsong", "html_url": "https://github.com/longfangsong", "followers_url": "https://api.github.com/users/longfangsong/followers", "following_url": "https://api.github.com/users/longfangsong/following{/other_user}", "gists_url": "https://api.github.com/users/longfangsong/gists{/gist_id}", "starred_url": "https://api.github.com/users/longfangsong/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/longfangsong/subscriptions", "organizations_url": "https://api.github.com/users/longfangsong/orgs", "repos_url": "https://api.github.com/users/longfangsong/repos", "events_url": "https://api.github.com/users/longfangsong/events{/privacy}", "received_events_url": "https://api.github.com/users/longfangsong/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fab238adf632f05993af992dca2f411e5ac02dc7", "url": "https://api.github.com/repos/rust-lang/rust/commits/fab238adf632f05993af992dca2f411e5ac02dc7", "html_url": "https://github.com/rust-lang/rust/commit/fab238adf632f05993af992dca2f411e5ac02dc7"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "5332484f49c2cbc3c20b64dffaa18002164f4029", "filename": "crates/ide_assists/src/handlers/generate_constant.rs", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7228dbadcaf0d97b0da421127e703d921b2bce53/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fgenerate_constant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7228dbadcaf0d97b0da421127e703d921b2bce53/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fgenerate_constant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_assists%2Fsrc%2Fhandlers%2Fgenerate_constant.rs?ref=7228dbadcaf0d97b0da421127e703d921b2bce53", "patch": "@@ -57,14 +57,13 @@ pub(crate) fn generate_constant(acc: &mut Assists, ctx: &AssistContext) -> Optio\n         \"Generate constant\",\n         target,\n         |builder| {\n-            builder.replace(\n-                statement.syntax().text_range(),\n+            builder.insert(\n+                statement.syntax().text_range.start(),\n                 format!(\n-                    \"const {}: {} = $0;\\n{}{}\",\n+                    \"const {}: {} = $0;\\n{}\",\n                     constant_token,\n                     type_name,\n-                    indent,\n-                    statement_syntax.text()\n+                    indent\n                 ),\n             );\n         },"}]}