{"sha": "24715028a078fe592b546870c33de68d16a9ca3f", "node_id": "C_kwDOAAsO6NoAKDI0NzE1MDI4YTA3OGZlNTkyYjU0Njg3MGMzM2RlNjhkMTZhOWNhM2Y", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-03-29T20:46:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-29T20:46:36Z"}, "message": "Rollup merge of #95437 - notriddle:notriddle/issue-79076, r=compiler-errors\n\ndiagnostics: regression test for derive bounds\n\nCloses #79076", "tree": {"sha": "cbbd2f53a1af15c37af805341655f7a82be2962d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cbbd2f53a1af15c37af805341655f7a82be2962d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/24715028a078fe592b546870c33de68d16a9ca3f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiQ3AsCRBK7hj4Ov3rIwAARVUIAD5l+2rhPJn/LttYSkTjwfKT\nRsPsIbWTnE43Plj6K2AiA5Qi+GaTibZbsl/axaL/ocdJYyfkTWaXeUEuO2Y5mkHu\n2BJPdywTRhXbln3heBKUCO9Nd0MSqzHyhW9n8kIF+ZVMU1xkCgWL5JaTnL9bc16q\nUTsFqd/D6cer7ngM86UCALP2eUyHBNL3gwk4UamKe0DmHtqdhYQm4u/ZQuY5PToE\nuyopAjhxy00O+QTyW0N3jVGraM/yTxrtsMEAPqBe6amNu3jcHfbrxa60040s31rm\nfoXv7cwOielfI2M26w89Y9EIkAmWRNKN0IVBfazokGoyYEMjTVJGbPMZ3tiPuUY=\n=MpPi\n-----END PGP SIGNATURE-----\n", "payload": "tree cbbd2f53a1af15c37af805341655f7a82be2962d\nparent a0d2862ca41013337d07743c5e0831fe1fbddc99\nparent 0eea3346d215e76e6de283a2c3d9674a1e762452\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1648586796 +0200\ncommitter GitHub <noreply@github.com> 1648586796 +0200\n\nRollup merge of #95437 - notriddle:notriddle/issue-79076, r=compiler-errors\n\ndiagnostics: regression test for derive bounds\n\nCloses #79076\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/24715028a078fe592b546870c33de68d16a9ca3f", "html_url": "https://github.com/rust-lang/rust/commit/24715028a078fe592b546870c33de68d16a9ca3f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/24715028a078fe592b546870c33de68d16a9ca3f/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0d2862ca41013337d07743c5e0831fe1fbddc99", "url": "https://api.github.com/repos/rust-lang/rust/commits/a0d2862ca41013337d07743c5e0831fe1fbddc99", "html_url": "https://github.com/rust-lang/rust/commit/a0d2862ca41013337d07743c5e0831fe1fbddc99"}, {"sha": "0eea3346d215e76e6de283a2c3d9674a1e762452", "url": "https://api.github.com/repos/rust-lang/rust/commits/0eea3346d215e76e6de283a2c3d9674a1e762452", "html_url": "https://github.com/rust-lang/rust/commit/0eea3346d215e76e6de283a2c3d9674a1e762452"}], "stats": {"total": 61, "additions": 61, "deletions": 0}, "files": [{"sha": "f07784d53b3a38471474abe4816f4f6cf0b95d2c", "filename": "src/test/ui/suggestions/derive-clone-for-eq.fixed", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/24715028a078fe592b546870c33de68d16a9ca3f/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/24715028a078fe592b546870c33de68d16a9ca3f/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.fixed?ref=24715028a078fe592b546870c33de68d16a9ca3f", "patch": "@@ -0,0 +1,18 @@\n+// run-rustfix\n+// https://github.com/rust-lang/rust/issues/79076\n+\n+use std::cmp::PartialEq;\n+\n+#[derive(Clone, Eq)] //~ ERROR [E0277]\n+pub struct Struct<T: std::clone::Clone>(T);\n+\n+impl<T: Clone, U> PartialEq<U> for Struct<T>\n+where\n+    U: Into<Struct<T>> + Clone\n+{\n+    fn eq(&self, _other: &U) -> bool {\n+        todo!()\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "15c0d4659fbbe0c470580b09ea273c1288101bc9", "filename": "src/test/ui/suggestions/derive-clone-for-eq.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/24715028a078fe592b546870c33de68d16a9ca3f/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/24715028a078fe592b546870c33de68d16a9ca3f/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.rs?ref=24715028a078fe592b546870c33de68d16a9ca3f", "patch": "@@ -0,0 +1,18 @@\n+// run-rustfix\n+// https://github.com/rust-lang/rust/issues/79076\n+\n+use std::cmp::PartialEq;\n+\n+#[derive(Clone, Eq)] //~ ERROR [E0277]\n+pub struct Struct<T>(T);\n+\n+impl<T: Clone, U> PartialEq<U> for Struct<T>\n+where\n+    U: Into<Struct<T>> + Clone\n+{\n+    fn eq(&self, _other: &U) -> bool {\n+        todo!()\n+    }\n+}\n+\n+fn main() {}"}, {"sha": "55a23c031d5bcb9a1a6f1790a3fb452e71fe07db", "filename": "src/test/ui/suggestions/derive-clone-for-eq.stderr", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/24715028a078fe592b546870c33de68d16a9ca3f/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/24715028a078fe592b546870c33de68d16a9ca3f/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fderive-clone-for-eq.stderr?ref=24715028a078fe592b546870c33de68d16a9ca3f", "patch": "@@ -0,0 +1,25 @@\n+error[E0277]: the trait bound `T: Clone` is not satisfied\n+  --> $DIR/derive-clone-for-eq.rs:6:17\n+   |\n+LL | #[derive(Clone, Eq)]\n+   |                 ^^ the trait `Clone` is not implemented for `T`\n+   |\n+note: required because of the requirements on the impl of `PartialEq` for `Struct<T>`\n+  --> $DIR/derive-clone-for-eq.rs:9:19\n+   |\n+LL | impl<T: Clone, U> PartialEq<U> for Struct<T>\n+   |                   ^^^^^^^^^^^^     ^^^^^^^^^\n+note: required by a bound in `Eq`\n+  --> $SRC_DIR/core/src/cmp.rs:LL:COL\n+   |\n+LL | pub trait Eq: PartialEq<Self> {\n+   |               ^^^^^^^^^^^^^^^ required by this bound in `Eq`\n+   = note: this error originates in the derive macro `Eq` (in Nightly builds, run with -Z macro-backtrace for more info)\n+help: consider restricting type parameter `T`\n+   |\n+LL | pub struct Struct<T: std::clone::Clone>(T);\n+   |                    +++++++++++++++++++\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}]}