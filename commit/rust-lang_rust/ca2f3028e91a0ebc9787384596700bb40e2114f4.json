{"sha": "ca2f3028e91a0ebc9787384596700bb40e2114f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNhMmYzMDI4ZTkxYTBlYmM5Nzg3Mzg0NTk2NzAwYmI0MGUyMTE0ZjQ=", "commit": {"author": {"name": "Michael Letterle", "email": "michael.letterle@gmail.com", "date": "2013-11-02T18:38:25Z"}, "committer": {"name": "Michael Letterle", "email": "michael.letterle@gmail.com", "date": "2013-11-02T23:35:35Z"}, "message": "Updated debugging metadata for ty_nil and ty_bot\n\nty_nil will now report as \"()\" in gdb\nty_bot will now report as \"!\" in gdb\n\nAdded test to confirm basic types debugging metadata.\n\nThis fixes #9226", "tree": {"sha": "c9f39501fdc96eaa8257581ab9516a7a88f027b4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9f39501fdc96eaa8257581ab9516a7a88f027b4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ca2f3028e91a0ebc9787384596700bb40e2114f4", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ca2f3028e91a0ebc9787384596700bb40e2114f4", "html_url": "https://github.com/rust-lang/rust/commit/ca2f3028e91a0ebc9787384596700bb40e2114f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ca2f3028e91a0ebc9787384596700bb40e2114f4/comments", "author": {"login": "mletterle", "id": 3096, "node_id": "MDQ6VXNlcjMwOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mletterle", "html_url": "https://github.com/mletterle", "followers_url": "https://api.github.com/users/mletterle/followers", "following_url": "https://api.github.com/users/mletterle/following{/other_user}", "gists_url": "https://api.github.com/users/mletterle/gists{/gist_id}", "starred_url": "https://api.github.com/users/mletterle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mletterle/subscriptions", "organizations_url": "https://api.github.com/users/mletterle/orgs", "repos_url": "https://api.github.com/users/mletterle/repos", "events_url": "https://api.github.com/users/mletterle/events{/privacy}", "received_events_url": "https://api.github.com/users/mletterle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mletterle", "id": 3096, "node_id": "MDQ6VXNlcjMwOTY=", "avatar_url": "https://avatars.githubusercontent.com/u/3096?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mletterle", "html_url": "https://github.com/mletterle", "followers_url": "https://api.github.com/users/mletterle/followers", "following_url": "https://api.github.com/users/mletterle/following{/other_user}", "gists_url": "https://api.github.com/users/mletterle/gists{/gist_id}", "starred_url": "https://api.github.com/users/mletterle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mletterle/subscriptions", "organizations_url": "https://api.github.com/users/mletterle/orgs", "repos_url": "https://api.github.com/users/mletterle/repos", "events_url": "https://api.github.com/users/mletterle/events{/privacy}", "received_events_url": "https://api.github.com/users/mletterle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e0c01ca15383513eb2981b6ee532c33ea546b4a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/e0c01ca15383513eb2981b6ee532c33ea546b4a8", "html_url": "https://github.com/rust-lang/rust/commit/e0c01ca15383513eb2981b6ee532c33ea546b4a8"}], "stats": {"total": 76, "additions": 75, "deletions": 1}, "files": [{"sha": "3e17bc1b585a1a514b3e04d888c0a0de7b8d0629", "filename": "src/librustc/middle/trans/debuginfo.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ca2f3028e91a0ebc9787384596700bb40e2114f4/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca2f3028e91a0ebc9787384596700bb40e2114f4/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fdebuginfo.rs?ref=ca2f3028e91a0ebc9787384596700bb40e2114f4", "patch": "@@ -1015,7 +1015,8 @@ fn basic_type_metadata(cx: &mut CrateContext, t: ty::t) -> DIType {\n     debug!(\"basic_type_metadata: {:?}\", ty::get(t));\n \n     let (name, encoding) = match ty::get(t).sty {\n-        ty::ty_nil | ty::ty_bot => (~\"uint\", DW_ATE_unsigned),\n+        ty::ty_nil => (~\"()\", DW_ATE_unsigned),\n+        ty::ty_bot => (~\"!\", DW_ATE_unsigned),\n         ty::ty_bool => (~\"bool\", DW_ATE_boolean),\n         ty::ty_char => (~\"char\", DW_ATE_unsigned_char),\n         ty::ty_int(int_ty) => match int_ty {"}, {"sha": "e8ce7bd23668610fa8349e01b7f14749da85093f", "filename": "src/test/debug-info/basic-types-metadata.rs", "status": "added", "additions": 73, "deletions": 0, "changes": 73, "blob_url": "https://github.com/rust-lang/rust/blob/ca2f3028e91a0ebc9787384596700bb40e2114f4/src%2Ftest%2Fdebug-info%2Fbasic-types-metadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ca2f3028e91a0ebc9787384596700bb40e2114f4/src%2Ftest%2Fdebug-info%2Fbasic-types-metadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebug-info%2Fbasic-types-metadata.rs?ref=ca2f3028e91a0ebc9787384596700bb40e2114f4", "patch": "@@ -0,0 +1,73 @@\n+// Copyright 2013 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// compile-flags:-Z extra-debug-info\n+// debugger:rbreak zzz\n+// debugger:run\n+// debugger:finish\n+// debugger:whatis unit\n+// check:type = ()\n+// debugger:whatis b\n+// check:type = bool\n+// debugger:whatis i\n+// check:type = int\n+// debugger:whatis c\n+// check:type = char\n+// debugger:whatis i8\n+// check:type = i8\n+// debugger:whatis i16\n+// check:type = i16\n+// debugger:whatis i32\n+// check:type = i32\n+// debugger:whatis i64\n+// check:type = i64\n+// debugger:whatis u\n+// check:type = uint\n+// debugger:whatis u8\n+// check:type = u8\n+// debugger:whatis u16\n+// check:type = u16\n+// debugger:whatis u32\n+// check:type = u32\n+// debugger:whatis u64\n+// check:type = u64\n+// debugger:whatis f32\n+// check:type = f32\n+// debugger:whatis f64\n+// check:type = f64\n+// debugger:info functions _yyy\n+// check:[...]\n+// check:! basic-types-metadata::_yyy()();\n+// debugger:detach\n+// debugger:quit\n+\n+#[allow(unused_variable)];\n+\n+fn main() {\n+    let unit: () = ();\n+    let b: bool = false;\n+    let i: int = -1;\n+    let c: char = 'a';\n+    let i8: i8 = 68;\n+    let i16: i16 = -16;\n+    let i32: i32 = -32;\n+    let i64: i64 = -64;\n+    let u: uint = 1;\n+    let u8: u8 = 100;\n+    let u16: u16 = 16;\n+    let u32: u32 = 32;\n+    let u64: u64 = 64;\n+    let f32: f32 = 2.5;\n+    let f64: f64 = 3.5;\n+    _zzz();\n+}\n+\n+fn _zzz() {()}\n+fn _yyy() -> ! {fail!()}"}]}