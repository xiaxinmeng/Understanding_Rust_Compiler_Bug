{"sha": "56d1ff65324d59623e8483c7cbf03672611cbcdf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2ZDFmZjY1MzI0ZDU5NjIzZTg0ODNjN2NiZjAzNjcyNjExY2JjZGY=", "commit": {"author": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-24T22:55:13Z"}, "committer": {"name": "Veetaha", "email": "gerzoh1@gmail.com", "date": "2020-02-24T22:55:13Z"}, "message": "vscode: migrate matching_brace to rust-analyzer-api.ts", "tree": {"sha": "a25ccd11fb9f7eecba583b1694e917f50fa0de89", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a25ccd11fb9f7eecba583b1694e917f50fa0de89"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/56d1ff65324d59623e8483c7cbf03672611cbcdf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/56d1ff65324d59623e8483c7cbf03672611cbcdf", "html_url": "https://github.com/rust-lang/rust/commit/56d1ff65324d59623e8483c7cbf03672611cbcdf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/56d1ff65324d59623e8483c7cbf03672611cbcdf/comments", "author": null, "committer": null, "parents": [{"sha": "38d7945ec7d3522e09a105a92156d1aaf8651f46", "url": "https://api.github.com/repos/rust-lang/rust/commits/38d7945ec7d3522e09a105a92156d1aaf8651f46", "html_url": "https://github.com/rust-lang/rust/commit/38d7945ec7d3522e09a105a92156d1aaf8651f46"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "a60776e2d4d15cf6452abad56d391b0d0ee65a8d", "filename": "editors/code/src/commands/matching_brace.ts", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/56d1ff65324d59623e8483c7cbf03672611cbcdf/editors%2Fcode%2Fsrc%2Fcommands%2Fmatching_brace.ts", "raw_url": "https://github.com/rust-lang/rust/raw/56d1ff65324d59623e8483c7cbf03672611cbcdf/editors%2Fcode%2Fsrc%2Fcommands%2Fmatching_brace.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcommands%2Fmatching_brace.ts?ref=56d1ff65324d59623e8483c7cbf03672611cbcdf", "patch": "@@ -1,5 +1,5 @@\n import * as vscode from 'vscode';\n-import * as lc from 'vscode-languageclient';\n+import * as ra from '../rust-analyzer-api';\n \n import { Ctx, Cmd } from '../ctx';\n \n@@ -9,16 +9,12 @@ export function matchingBrace(ctx: Ctx): Cmd {\n         const client = ctx.client;\n         if (!editor || !client) return;\n \n-        const request: FindMatchingBraceParams = {\n+        const response = await client.sendRequest(ra.findMatchingBrace, {\n             textDocument: { uri: editor.document.uri.toString() },\n             offsets: editor.selections.map(s =>\n                 client.code2ProtocolConverter.asPosition(s.active),\n             ),\n-        };\n-        const response = await client.sendRequest<lc.Position[]>(\n-            'rust-analyzer/findMatchingBrace',\n-            request,\n-        );\n+        });\n         editor.selections = editor.selections.map((sel, idx) => {\n             const active = client.protocol2CodeConverter.asPosition(\n                 response[idx],\n@@ -29,8 +25,3 @@ export function matchingBrace(ctx: Ctx): Cmd {\n         editor.revealRange(editor.selection);\n     };\n }\n-\n-interface FindMatchingBraceParams {\n-    textDocument: lc.TextDocumentIdentifier;\n-    offsets: lc.Position[];\n-}"}]}