{"sha": "00ccadf43f02c1991e352a1eb3e0880ada52cada", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAwY2NhZGY0M2YwMmMxOTkxZTM1MmExZWIzZTA4ODBhZGE1MmNhZGE=", "commit": {"author": {"name": "Nadrieril", "email": "nadrieril+git@gmail.com", "date": "2019-11-29T12:25:36Z"}, "committer": {"name": "Nadrieril", "email": "nadrieril+git@gmail.com", "date": "2019-12-02T16:00:24Z"}, "message": "Add some tests", "tree": {"sha": "8e249ed4f0693ca79354b8e74fe5f2bcc20b89e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e249ed4f0693ca79354b8e74fe5f2bcc20b89e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00ccadf43f02c1991e352a1eb3e0880ada52cada", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00ccadf43f02c1991e352a1eb3e0880ada52cada", "html_url": "https://github.com/rust-lang/rust/commit/00ccadf43f02c1991e352a1eb3e0880ada52cada", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00ccadf43f02c1991e352a1eb3e0880ada52cada/comments", "author": {"login": "Nadrieril", "id": 6783654, "node_id": "MDQ6VXNlcjY3ODM2NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nadrieril", "html_url": "https://github.com/Nadrieril", "followers_url": "https://api.github.com/users/Nadrieril/followers", "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}", "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions", "organizations_url": "https://api.github.com/users/Nadrieril/orgs", "repos_url": "https://api.github.com/users/Nadrieril/repos", "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}", "received_events_url": "https://api.github.com/users/Nadrieril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nadrieril", "id": 6783654, "node_id": "MDQ6VXNlcjY3ODM2NTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6783654?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nadrieril", "html_url": "https://github.com/Nadrieril", "followers_url": "https://api.github.com/users/Nadrieril/followers", "following_url": "https://api.github.com/users/Nadrieril/following{/other_user}", "gists_url": "https://api.github.com/users/Nadrieril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nadrieril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nadrieril/subscriptions", "organizations_url": "https://api.github.com/users/Nadrieril/orgs", "repos_url": "https://api.github.com/users/Nadrieril/repos", "events_url": "https://api.github.com/users/Nadrieril/events{/privacy}", "received_events_url": "https://api.github.com/users/Nadrieril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6aa96246fe6125dae72d2840749f2859b49a47f", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6aa96246fe6125dae72d2840749f2859b49a47f", "html_url": "https://github.com/rust-lang/rust/commit/e6aa96246fe6125dae72d2840749f2859b49a47f"}], "stats": {"total": 180, "additions": 171, "deletions": 9}, "files": [{"sha": "d49ae74db51b593953c30665861b39d8f5624716", "filename": "src/test/ui/or-patterns/exhaustiveness-pass.rs", "status": "modified", "additions": 37, "deletions": 9, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/00ccadf43f02c1991e352a1eb3e0880ada52cada/src%2Ftest%2Fui%2For-patterns%2Fexhaustiveness-pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00ccadf43f02c1991e352a1eb3e0880ada52cada/src%2Ftest%2Fui%2For-patterns%2Fexhaustiveness-pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2For-patterns%2Fexhaustiveness-pass.rs?ref=00ccadf43f02c1991e352a1eb3e0880ada52cada", "patch": "@@ -6,35 +6,63 @@\n // We wrap patterns in a tuple because top-level or-patterns are special-cased for now.\n fn main() {\n     // Get the fatal error out of the way\n-    match (0u8,) {\n+    match (0,) {\n         (0 | _,) => {}\n         //~^ ERROR or-patterns are not fully implemented yet\n     }\n \n-    match (0u8,) {\n+    match (0,) {\n         (1 | 2,) => {}\n         _ => {}\n     }\n \n-    match (0u8,) {\n-        (1 | 1,) => {} // FIXME(or_patterns): redundancy not detected for now.\n-        _ => {}\n-    }\n-    match (0u8, 0u8) {\n+    match (0, 0) {\n         (1 | 2, 3 | 4) => {}\n         (1, 2) => {}\n-        (2, 1) => {}\n+        (3, 1) => {}\n         _ => {}\n     }\n     match (Some(0u8),) {\n         (None | Some(0 | 1),) => {}\n         (Some(2..=255),) => {}\n     }\n-    match ((0u8,),) {\n+    match ((0,),) {\n         ((0 | 1,) | (2 | 3,),) => {},\n         ((_,),) => {},\n     }\n     match (&[0u8][..],) {\n         ([] | [0 | 1..=255] | [_, ..],) => {},\n     }\n+\n+    match ((0, 0),) {\n+        ((0, 0) | (0, 1),) => {}\n+        _ => {}\n+    }\n+    match ((0, 0),) {\n+        ((0, 0) | (1, 0),) => {}\n+        _ => {}\n+    }\n+\n+     // FIXME(or_patterns): Redundancies not detected for now.\n+    match (0,) {\n+        (1 | 1,) => {}\n+        _ => {}\n+    }\n+    match [0; 2] {\n+        [0 | 0, 0 | 0] => {}\n+        _ => {}\n+    }\n+    match &[][..] {\n+        [0] => {}\n+        [0, _] => {}\n+        [0, _, _] => {}\n+        [1, ..] => {}\n+        [1 | 2, ..] => {}\n+        _ => {}\n+    }\n+    match Some(0) {\n+        Some(0) => {}\n+        Some(0 | 1) => {}\n+        _ => {}\n+    }\n }"}, {"sha": "6ba9b4584779721f1d3e3473a78a3fa6fbc23ff9", "filename": "src/test/ui/pattern/usefulness/top-level-alternation.rs", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/00ccadf43f02c1991e352a1eb3e0880ada52cada/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Ftop-level-alternation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00ccadf43f02c1991e352a1eb3e0880ada52cada/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Ftop-level-alternation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Ftop-level-alternation.rs?ref=00ccadf43f02c1991e352a1eb3e0880ada52cada", "patch": "@@ -0,0 +1,58 @@\n+#![deny(unreachable_patterns)]\n+\n+fn main() {\n+    while let 0..=2 | 1 = 0 {} //~ ERROR unreachable pattern\n+    if let 0..=2 | 1 = 0 {} //~ WARN irrefutable if-let pattern\n+    // this one ^ is incorrect\n+\n+    match 0u8 {\n+        0\n+            | 0 => {} //~ ERROR unreachable pattern\n+        _ => {}\n+    }\n+    match Some(0u8) {\n+        Some(0)\n+            | Some(0) => {} //~ ERROR unreachable pattern\n+        _ => {}\n+    }\n+    match (0u8, 0u8) {\n+        (0, _) | (_, 0) => {}\n+        (0, 0) => {} //~ ERROR unreachable pattern\n+        (1, 1) => {}\n+        _ => {}\n+    }\n+    match (0u8, 0u8) {\n+        (0, 1) | (2, 3) => {}\n+        (0, 3) => {}\n+        (2, 1) => {}\n+        _ => {}\n+    }\n+    match (0u8, 0u8) {\n+        (_, 0) | (_, 1) => {}\n+        _ => {}\n+    }\n+    match (0u8, 0u8) {\n+        (0, _) | (1, _) => {}\n+        _ => {}\n+    }\n+    match Some(0u8) {\n+        None | Some(_) => {}\n+        _ => {} //~ ERROR unreachable pattern\n+    }\n+    match Some(0u8) {\n+        None | Some(_) => {}\n+        Some(_) => {} //~ ERROR unreachable pattern\n+        None => {} //~ ERROR unreachable pattern\n+    }\n+    match Some(0u8) {\n+        Some(_) => {}\n+        None => {}\n+        None //~ ERROR unreachable pattern\n+            | Some(_) => {} //~ ERROR unreachable pattern\n+    }\n+    match 0u8 {\n+        1 | 2 => {},\n+        1..=2 => {}, //~ ERROR unreachable pattern\n+        _ => {},\n+    }\n+}"}, {"sha": "ef7327471212a136fc0bf61315a5c7dad3d45c5a", "filename": "src/test/ui/pattern/usefulness/top-level-alternation.stderr", "status": "added", "additions": 76, "deletions": 0, "changes": 76, "blob_url": "https://github.com/rust-lang/rust/blob/00ccadf43f02c1991e352a1eb3e0880ada52cada/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Ftop-level-alternation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/00ccadf43f02c1991e352a1eb3e0880ada52cada/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Ftop-level-alternation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Ftop-level-alternation.stderr?ref=00ccadf43f02c1991e352a1eb3e0880ada52cada", "patch": "@@ -0,0 +1,76 @@\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:4:23\n+   |\n+LL |     while let 0..=2 | 1 = 0 {}\n+   |                       ^\n+   |\n+note: lint level defined here\n+  --> $DIR/top-level-alternation.rs:1:9\n+   |\n+LL | #![deny(unreachable_patterns)]\n+   |         ^^^^^^^^^^^^^^^^^^^^\n+\n+warning: irrefutable if-let pattern\n+  --> $DIR/top-level-alternation.rs:5:20\n+   |\n+LL |     if let 0..=2 | 1 = 0 {}\n+   |                    ^\n+   |\n+   = note: `#[warn(irrefutable_let_patterns)]` on by default\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:10:15\n+   |\n+LL |             | 0 => {}\n+   |               ^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:15:15\n+   |\n+LL |             | Some(0) => {}\n+   |               ^^^^^^^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:20:9\n+   |\n+LL |         (0, 0) => {}\n+   |         ^^^^^^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:40:9\n+   |\n+LL |         _ => {}\n+   |         ^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:44:9\n+   |\n+LL |         Some(_) => {}\n+   |         ^^^^^^^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:45:9\n+   |\n+LL |         None => {}\n+   |         ^^^^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:50:9\n+   |\n+LL |         None\n+   |         ^^^^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:51:15\n+   |\n+LL |             | Some(_) => {}\n+   |               ^^^^^^^\n+\n+error: unreachable pattern\n+  --> $DIR/top-level-alternation.rs:55:9\n+   |\n+LL |         1..=2 => {},\n+   |         ^^^^^\n+\n+error: aborting due to 10 previous errors\n+"}]}