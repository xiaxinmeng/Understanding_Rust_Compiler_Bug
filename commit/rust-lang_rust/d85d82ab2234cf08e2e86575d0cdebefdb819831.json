{"sha": "d85d82ab2234cf08e2e86575d0cdebefdb819831", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4NWQ4MmFiMjIzNGNmMDhlMmU4NjU3NWQwY2RlYmVmZGI4MTk4MzE=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-03-04T14:57:26Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-03-04T14:58:50Z"}, "message": "Implement Error for OccupiedError.", "tree": {"sha": "f83a52337fab8c386b8dfdd092ee458f43e760e3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f83a52337fab8c386b8dfdd092ee458f43e760e3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d85d82ab2234cf08e2e86575d0cdebefdb819831", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d85d82ab2234cf08e2e86575d0cdebefdb819831", "html_url": "https://github.com/rust-lang/rust/commit/d85d82ab2234cf08e2e86575d0cdebefdb819831", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d85d82ab2234cf08e2e86575d0cdebefdb819831/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "69d95e232af0fe81de85e1e4a1f8dc73d7b0f16c", "url": "https://api.github.com/repos/rust-lang/rust/commits/69d95e232af0fe81de85e1e4a1f8dc73d7b0f16c", "html_url": "https://github.com/rust-lang/rust/commit/69d95e232af0fe81de85e1e4a1f8dc73d7b0f16c"}], "stats": {"total": 45, "additions": 45, "deletions": 0}, "files": [{"sha": "a5ece31d67b623c5aaa2f73a184138eb1e8076e5", "filename": "library/alloc/src/collections/btree/map/entry.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap%2Fentry.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap%2Fentry.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fcollections%2Fbtree%2Fmap%2Fentry.rs?ref=d85d82ab2234cf08e2e86575d0cdebefdb819831", "patch": "@@ -93,6 +93,19 @@ impl<K: Debug + Ord, V: Debug> Debug for OccupiedError<'_, K, V> {\n     }\n }\n \n+#[unstable(feature = \"map_try_insert\", issue = \"none\")]\n+impl<'a, K: Debug + Ord, V: Debug> fmt::Display for OccupiedError<'a, K, V> {\n+    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n+        write!(\n+            f,\n+            \"failed to insert {:?}, key {:?} already exists with value {:?}\",\n+            self.value,\n+            self.entry.key(),\n+            self.entry.get(),\n+        )\n+    }\n+}\n+\n impl<'a, K: Ord, V> Entry<'a, K, V> {\n     /// Ensures a value is in the entry by inserting the default if empty, and returns\n     /// a mutable reference to the value in the entry."}, {"sha": "a4a7b2566547bc40705afb147892815fd60e1d5a", "filename": "library/std/src/collections/hash/map.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Fstd%2Fsrc%2Fcollections%2Fhash%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Fstd%2Fsrc%2Fcollections%2Fhash%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fcollections%2Fhash%2Fmap.rs?ref=d85d82ab2234cf08e2e86575d0cdebefdb819831", "patch": "@@ -1907,6 +1907,19 @@ impl<K: Debug, V: Debug> Debug for OccupiedError<'_, K, V> {\n     }\n }\n \n+#[unstable(feature = \"map_try_insert\", issue = \"none\")]\n+impl<'a, K: Debug, V: Debug> fmt::Display for OccupiedError<'a, K, V> {\n+    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n+        write!(\n+            f,\n+            \"failed to insert {:?}, key {:?} already exists with value {:?}\",\n+            self.value,\n+            self.entry.key(),\n+            self.entry.get(),\n+        )\n+    }\n+}\n+\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n impl<'a, K, V, S> IntoIterator for &'a HashMap<K, V, S> {\n     type Item = (&'a K, &'a V);"}, {"sha": "a7f744ce51533262c37f31d6f4681ca07a4066ff", "filename": "library/std/src/error.rs", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Fstd%2Fsrc%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Fstd%2Fsrc%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Ferror.rs?ref=d85d82ab2234cf08e2e86575d0cdebefdb819831", "patch": "@@ -470,6 +470,24 @@ impl Error for char::DecodeUtf16Error {\n     }\n }\n \n+#[unstable(feature = \"map_try_insert\", issue = \"none\")]\n+impl<'a, K: Debug + Ord, V: Debug> Error\n+    for crate::collections::btree_map::OccupiedError<'a, K, V>\n+{\n+    #[allow(deprecated)]\n+    fn description(&self) -> &str {\n+        \"key already exists\"\n+    }\n+}\n+\n+#[unstable(feature = \"map_try_insert\", issue = \"none\")]\n+impl<'a, K: Debug, V: Debug> Error for crate::collections::hash_map::OccupiedError<'a, K, V> {\n+    #[allow(deprecated)]\n+    fn description(&self) -> &str {\n+        \"key already exists\"\n+    }\n+}\n+\n #[stable(feature = \"box_error\", since = \"1.8.0\")]\n impl<T: Error> Error for Box<T> {\n     #[allow(deprecated, deprecated_in_future)]"}, {"sha": "7e86311bbb00c23a4cae8226a083483ad9de2718", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d85d82ab2234cf08e2e86575d0cdebefdb819831/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=d85d82ab2234cf08e2e86575d0cdebefdb819831", "patch": "@@ -281,6 +281,7 @@\n #![feature(linkage)]\n #![feature(llvm_asm)]\n #![feature(log_syntax)]\n+#![feature(map_try_insert)]\n #![feature(maybe_uninit_extra)]\n #![feature(maybe_uninit_ref)]\n #![feature(maybe_uninit_slice)]"}]}