{"sha": "f1fa1768a27c4bb5c47ce0bd002258474aa64cbe", "node_id": "MDY6Q29tbWl0NzI0NzEyOmYxZmExNzY4YTI3YzRiYjVjNDdjZTBiZDAwMjI1ODQ3NGFhNjRjYmU=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-07-31T20:42:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-07-31T20:42:17Z"}, "message": "Merge pull request #1909 from Arnavion/fix-manifest-path\n\nCanonicalize --manifest-path argument before comparing it to cargo metadata.", "tree": {"sha": "3f45d4d65fb45e959b29af0035815269aa215805", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f45d4d65fb45e959b29af0035815269aa215805"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe", "html_url": "https://github.com/rust-lang/rust/commit/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41c96908cc0a79f280cbfaa080089f891772ace7", "url": "https://api.github.com/repos/rust-lang/rust/commits/41c96908cc0a79f280cbfaa080089f891772ace7", "html_url": "https://github.com/rust-lang/rust/commit/41c96908cc0a79f280cbfaa080089f891772ace7"}, {"sha": "dfbc8990eba6c99acd0844af6764ea9ec3dbbea3", "url": "https://api.github.com/repos/rust-lang/rust/commits/dfbc8990eba6c99acd0844af6764ea9ec3dbbea3", "html_url": "https://github.com/rust-lang/rust/commit/dfbc8990eba6c99acd0844af6764ea9ec3dbbea3"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "9e17f0574e3fd2cfb7b42f6eef45b7d41489e204", "filename": ".travis.yml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=f1fa1768a27c4bb5c47ce0bd002258474aa64cbe", "patch": "@@ -38,6 +38,8 @@ script:\n  - cd clippy_workspace_tests/src && PATH=$PATH:~/rust/cargo/bin cargo clippy -- -D clippy && cd ../..\n  - cd clippy_workspace_tests/subcrate && PATH=$PATH:~/rust/cargo/bin cargo clippy -- -D clippy && cd ../..\n  - cd clippy_workspace_tests/subcrate/src && PATH=$PATH:~/rust/cargo/bin cargo clippy -- -D clippy && cd ../../..\n+ - PATH=$PATH:~/rust/cargo/bin cargo clippy --manifest-path=clippy_workspace_tests/Cargo.toml -- -D clippy\n+ - cd clippy_workspace_tests/subcrate && PATH=$PATH:~/rust/cargo/bin cargo clippy --manifest-path=../Cargo.toml -- -D clippy && cd ../..\n  - set +e\n \n after_success: |"}, {"sha": "266c1373ff25b1f57a86d64a7f6239408e6d796e", "filename": "src/main.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe/src%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f1fa1768a27c4bb5c47ce0bd002258474aa64cbe/src%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fmain.rs?ref=f1fa1768a27c4bb5c47ce0bd002258474aa64cbe", "patch": "@@ -191,12 +191,14 @@ pub fn main() {\n                 process::exit(101);\n             };\n \n-        let manifest_path = manifest_path_arg.map(|arg| PathBuf::from(Path::new(&arg[\"--manifest-path=\".len()..])));\n+        let manifest_path = manifest_path_arg.map(|arg| Path::new(&arg[\"--manifest-path=\".len()..])\n+            .canonicalize().expect(\"manifest path could not be canonicalized\"));\n \n         let package_index = {\n-                if let Some(ref manifest_path) = manifest_path {\n+                if let Some(manifest_path) = manifest_path {\n                     metadata.packages.iter().position(|package| {\n-                        let package_manifest_path = Path::new(&package.manifest_path);\n+                        let package_manifest_path = Path::new(&package.manifest_path)\n+                            .canonicalize().expect(\"package manifest path could not be canonicalized\");\n                         package_manifest_path == manifest_path\n                     })\n                 } else {"}]}