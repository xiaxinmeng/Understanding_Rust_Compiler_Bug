{"sha": "94a9ee3692d43627aecc2b0889134d4b71e46257", "node_id": "C_kwDOAAsO6NoAKDk0YTllZTM2OTJkNDM2MjdhZWNjMmIwODg5MTM0ZDRiNzFlNDYyNTc", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-10-22T12:12:01Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-10-22T12:12:01Z"}, "message": "Use functions for headings rustodoc GUI test", "tree": {"sha": "6b7c32346a39a971f25d00f62989f4516ba7a4ce", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b7c32346a39a971f25d00f62989f4516ba7a4ce"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/94a9ee3692d43627aecc2b0889134d4b71e46257", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/94a9ee3692d43627aecc2b0889134d4b71e46257", "html_url": "https://github.com/rust-lang/rust/commit/94a9ee3692d43627aecc2b0889134d4b71e46257", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/94a9ee3692d43627aecc2b0889134d4b71e46257/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0940040c0486a536be4f8685c7dd9a078f9e87c2", "url": "https://api.github.com/repos/rust-lang/rust/commits/0940040c0486a536be4f8685c7dd9a078f9e87c2", "html_url": "https://github.com/rust-lang/rust/commit/0940040c0486a536be4f8685c7dd9a078f9e87c2"}], "stats": {"total": 176, "additions": 76, "deletions": 100}, "files": [{"sha": "85e17ca9551a2af896074ffc1f5a13dd4b4162e5", "filename": "src/test/rustdoc-gui/headings.goml", "status": "modified", "additions": 76, "deletions": 100, "changes": 176, "blob_url": "https://github.com/rust-lang/rust/blob/94a9ee3692d43627aecc2b0889134d4b71e46257/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "raw_url": "https://github.com/rust-lang/rust/raw/94a9ee3692d43627aecc2b0889134d4b71e46257/src%2Ftest%2Frustdoc-gui%2Fheadings.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fheadings.goml?ref=94a9ee3692d43627aecc2b0889134d4b71e46257", "patch": "@@ -150,109 +150,85 @@ assert-css: (\"h2#top-doc-prose-title\", {\"border-bottom-width\": \"1px\"})\n assert-css: (\"h3#top-doc-prose-sub-heading\", {\"font-size\": \"20px\"})\n assert-css: (\"h3#top-doc-prose-sub-heading\", {\"border-bottom-width\": \"1px\"})\n \n-// Checking colors now.\n+// Needed to check colors\n show-text: true\n-local-storage: {\"rustdoc-theme\": \"light\", \"rustdoc-use-system-theme\": \"false\"}\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/struct.HeavilyDocumentedStruct.html\"\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h3\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h4\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom\": \"1px solid rgb(221, 221, 221)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h5\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h4\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h5\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h6\",\n-    {\"color\": \"rgb(0, 0, 0)\", \"border-bottom-width\": \"0px\"},\n-)\n \n-local-storage: {\"rustdoc-theme\": \"dark\"}\n-reload:\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h3\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h4\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom\": \"1px solid rgb(210, 210, 210)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h5\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h4\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h5\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h6\",\n-    {\"color\": \"rgb(221, 221, 221)\", \"border-bottom-width\": \"0px\"},\n+define-function: (\n+    \"check-colors\",\n+    (theme, heading_color, small_heading_color, heading_border_color),\n+    [\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|, \"rustdoc-use-system-theme\": \"false\"}),\n+        (\"reload\"),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h2\",\n+            {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n+        )),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h3\",\n+            {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n+        )),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h4\",\n+            {\"color\": |heading_color|, \"border-bottom\": \"1px solid \" + |heading_border_color|},\n+        )),\n+        (\"assert-css\", (\n+            \".top-doc .docblock h5\",\n+            {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+        (\"assert-css\", (\n+            \"#implementations-list .docblock h4\",\n+            {\"color\": |heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+        (\"assert-css\", (\n+            \"#implementations-list .docblock h5\",\n+            {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+        (\"assert-css\", (\n+            \"#implementations-list .docblock h6\",\n+            {\"color\": |small_heading_color|, \"border-bottom-width\": \"0px\"},\n+        )),\n+    ],\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"ayu\",\n+        \"heading_color\": \"rgb(255, 255, 255)\",\n+        \"small_heading_color\": \"rgb(197, 197, 197)\",\n+        \"heading_border_color\": \"rgb(92, 103, 115)\",\n+    },\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"dark\",\n+        \"heading_color\": \"rgb(221, 221, 221)\",\n+        \"small_heading_color\": \"rgb(221, 221, 221)\",\n+        \"heading_border_color\": \"rgb(210, 210, 210)\",\n+    },\n+)\n+call-function: (\n+    \"check-colors\",\n+    {\n+        \"theme\": \"light\",\n+        \"heading_color\": \"rgb(0, 0, 0)\",\n+        \"small_heading_color\": \"rgb(0, 0, 0)\",\n+        \"heading_border_color\": \"rgb(221, 221, 221)\",\n+    },\n+)\n+\n+define-function: (\n+    \"check-since-color\",\n+    (theme),\n+    [\n+        (\"local-storage\", {\"rustdoc-theme\": |theme|}),\n+        (\"reload\"),\n+        (\"assert-css\", (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)),\n+    ],\n )\n \n-local-storage: {\"rustdoc-theme\": \"ayu\"}\n-reload:\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h2\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h4\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom\": \"1px solid rgb(92, 103, 115)\"},\n-)\n-assert-css: (\n-    \".top-doc .docblock h5\",\n-    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h4\",\n-    {\"color\": \"rgb(255, 255, 255)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h5\",\n-    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom-width\": \"0px\"},\n-)\n-assert-css: (\n-    \"#implementations-list .docblock h6\",\n-    {\"color\": \"rgb(197, 197, 197)\", \"border-bottom-width\": \"0px\"},\n-)\n-\n-local-storage: {\"rustdoc-theme\": \"light\"}\n goto: \"file://\" + |DOC_PATH| + \"/staged_api/struct.Foo.html\"\n-assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n-\n-local-storage: {\"rustdoc-theme\": \"dark\"}\n-reload:\n-assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n-\n-local-storage: {\"rustdoc-theme\": \"ayu\"}\n-reload:\n-assert-css: (\".since\", {\"color\": \"rgb(128, 128, 128)\"}, ALL)\n+call-function: (\"check-since-color\", (\"ayu\"))\n+call-function: (\"check-since-color\", (\"dark\"))\n+call-function: (\"check-since-color\", (\"light\"))"}]}