{"sha": "7e903f82ff1401445853905083456b9bb0e761cc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlOTAzZjgyZmYxNDAxNDQ1ODUzOTA1MDgzNDU2YjliYjBlNzYxY2M=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2020-03-09T11:57:54Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-03-09T11:57:54Z"}, "message": "Rollup merge of #69842 - JohnTitor:more-tests, r=Centril\n\nAdd more regression tests\n\nCloses #54239\nCloses #57200\nCloses #57201\nCloses #60473\nCloses #64620\nCloses #67166\n\nr? @Centril", "tree": {"sha": "9e1d2f9871ea0024b1657db356742eae8c2b750a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9e1d2f9871ea0024b1657db356742eae8c2b750a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e903f82ff1401445853905083456b9bb0e761cc", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeZi9CCRBK7hj4Ov3rIwAAdHIIACn6jG7DoWGhFwzaW387gYsp\nG6DIFfP35Qll+fj43EGQ04K98NnWrpUFX5NkivEPV9K9FsFewREmFq1DK6+8hYGh\nI4L1rh2KtFxbscZu/VCwBrRQeKjZOgCBYdwTHMtupVhF9T30R/tzU1leUmqLDBrU\nSInvZ+xydZ4faKmnAGzOnn/qmjGNk4sbuHUK0XiOP4JZAjXkFCZfRjrVSiVPNV/1\nzaT6sH/J5qGPIIgYal1A0MCmlI8CdhVS9fEaK/mfoznCR0CM32ercI5meAwuVWnv\n79X4G5XRQClHg5dC91j9VfOUryLUsCK6+q+id4/TyrPy0MuUJ/X5iDQyWJ8utjU=\n=PVO+\n-----END PGP SIGNATURE-----\n", "payload": "tree 9e1d2f9871ea0024b1657db356742eae8c2b750a\nparent 2677d5929883ff0a9e3824dde1a630a5f60a6962\nparent ef98ec055ea30466a83f0b0efb2e40ebd3f89011\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1583755074 +0100\ncommitter GitHub <noreply@github.com> 1583755074 +0100\n\nRollup merge of #69842 - JohnTitor:more-tests, r=Centril\n\nAdd more regression tests\n\nCloses #54239\nCloses #57200\nCloses #57201\nCloses #60473\nCloses #64620\nCloses #67166\n\nr? @Centril\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e903f82ff1401445853905083456b9bb0e761cc", "html_url": "https://github.com/rust-lang/rust/commit/7e903f82ff1401445853905083456b9bb0e761cc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e903f82ff1401445853905083456b9bb0e761cc/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2677d5929883ff0a9e3824dde1a630a5f60a6962", "url": "https://api.github.com/repos/rust-lang/rust/commits/2677d5929883ff0a9e3824dde1a630a5f60a6962", "html_url": "https://github.com/rust-lang/rust/commit/2677d5929883ff0a9e3824dde1a630a5f60a6962"}, {"sha": "ef98ec055ea30466a83f0b0efb2e40ebd3f89011", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef98ec055ea30466a83f0b0efb2e40ebd3f89011", "html_url": "https://github.com/rust-lang/rust/commit/ef98ec055ea30466a83f0b0efb2e40ebd3f89011"}], "stats": {"total": 131, "additions": 131, "deletions": 0}, "files": [{"sha": "16cf7ad52e4f9a84eedad3abee777aaf98073d91", "filename": "src/test/ui/async-await/issue-54239-private-type-triggers-lint.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fasync-await%2Fissue-54239-private-type-triggers-lint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fasync-await%2Fissue-54239-private-type-triggers-lint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-await%2Fissue-54239-private-type-triggers-lint.rs?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,17 @@\n+// Regression test for #54239, shouldn't trigger lint.\n+// check-pass\n+// edition:2018\n+\n+#![deny(missing_debug_implementations)]\n+\n+struct DontLookAtMe(i32);\n+\n+async fn secret() -> DontLookAtMe {\n+    DontLookAtMe(41)\n+}\n+\n+pub async fn looking() -> i32 { // Shouldn't trigger lint here.\n+    secret().await.0\n+}\n+\n+fn main() {}"}, {"sha": "2cbe8f5161465b11258f799d2c4e7c89de2365d3", "filename": "src/test/ui/generator/issue-64620-yield-array-element.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fgenerator%2Fissue-64620-yield-array-element.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fgenerator%2Fissue-64620-yield-array-element.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fissue-64620-yield-array-element.rs?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,9 @@\n+// Regression test for #64620\n+\n+#![feature(generators)]\n+\n+pub fn crash(arr: [usize; 1]) {\n+    yield arr[0]; //~ ERROR: yield expression outside of generator literal\n+}\n+\n+fn main() {}"}, {"sha": "48383c2ed08243ed884c6d4e86a6e36da89bff35", "filename": "src/test/ui/generator/issue-64620-yield-array-element.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fgenerator%2Fissue-64620-yield-array-element.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fgenerator%2Fissue-64620-yield-array-element.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fissue-64620-yield-array-element.stderr?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,9 @@\n+error[E0627]: yield expression outside of generator literal\n+  --> $DIR/issue-64620-yield-array-element.rs:6:5\n+   |\n+LL |     yield arr[0];\n+   |     ^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0627`."}, {"sha": "e0c71d1ac9a61cb59081935d61c13f4d6a02a858", "filename": "src/test/ui/impl-trait/issue-57200.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57200.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57200.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57200.rs?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,15 @@\n+// Regression test for #57200\n+// FIXME: The error is temporary hack, we'll revisit here at some point.\n+\n+#![feature(impl_trait_in_bindings)]\n+#![allow(incomplete_features)]\n+\n+fn bug<'a, 'b, T>()\n+where\n+    'a: 'b,\n+{\n+    let f: impl Fn(&'a T) -> &'b T = |x| x;\n+    //~^ ERROR: lifetimes in impl Trait types in bindings are not currently supported\n+}\n+\n+fn main() {}"}, {"sha": "b44f332d58ccdc9f9cde8ec280a8cfac0e49f4c2", "filename": "src/test/ui/impl-trait/issue-57200.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57200.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57200.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57200.stderr?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,8 @@\n+error: lifetimes in impl Trait types in bindings are not currently supported\n+  --> $DIR/issue-57200.rs:11:12\n+   |\n+LL |     let f: impl Fn(&'a T) -> &'b T = |x| x;\n+   |            ^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "c1a98d8897bfbd075373d1ddfad1ae2fa86a95a6", "filename": "src/test/ui/impl-trait/issue-57201.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57201.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57201.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57201.rs?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,15 @@\n+// Regression test for #57201\n+// FIXME: The error is temporary hack, we'll revisit here at some point.\n+\n+#![feature(impl_trait_in_bindings)]\n+#![allow(incomplete_features)]\n+\n+fn bug<'a, 'b, T>()\n+where\n+    'a: 'b,\n+{\n+    let f: &impl Fn(&'a T) -> &'b T = &|x| x;\n+    //~^ ERROR: lifetimes in impl Trait types in bindings are not currently supported\n+}\n+\n+fn main() {}"}, {"sha": "462b17bf45e2f71e63789debb4ccd800950daac4", "filename": "src/test/ui/impl-trait/issue-57201.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57201.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57201.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-57201.stderr?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,8 @@\n+error: lifetimes in impl Trait types in bindings are not currently supported\n+  --> $DIR/issue-57201.rs:11:13\n+   |\n+LL |     let f: &impl Fn(&'a T) -> &'b T = &|x| x;\n+   |             ^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "50cf0c8c6d641dfdce25f8e2899d1740a3580a99", "filename": "src/test/ui/impl-trait/issue-60473.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-60473.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-60473.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-60473.rs?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,17 @@\n+// Regression test for #60473\n+\n+#![feature(impl_trait_in_bindings)]\n+#![allow(incomplete_features)]\n+\n+struct A<'a>(&'a ());\n+\n+trait Trait<T> {\n+}\n+\n+impl<T> Trait<T> for () {\n+}\n+\n+fn main() {\n+    let x: impl Trait<A> = (); // FIXME: The error doesn't seem correct.\n+    //~^ ERROR: opaque type expands to a recursive type\n+}"}, {"sha": "2d95be4e52c61b34c52a78d7a9b3782c61f8ac14", "filename": "src/test/ui/impl-trait/issue-60473.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-60473.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-60473.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-60473.stderr?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,11 @@\n+error[E0720]: opaque type expands to a recursive type\n+  --> $DIR/issue-60473.rs:15:12\n+   |\n+LL |     let x: impl Trait<A> = (); // FIXME: The error doesn't seem correct.\n+   |            ^^^^^^^^^^^^^ expands to a recursive type\n+   |\n+   = note: type resolves to itself\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0720`."}, {"sha": "de7433a9bfc4cdbb63961f0e17c41f0e01e1f53c", "filename": "src/test/ui/impl-trait/issue-67166.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-67166.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-67166.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-67166.rs?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,11 @@\n+// Regression test for #67166\n+\n+#![feature(impl_trait_in_bindings)]\n+#![allow(incomplete_features)]\n+\n+pub fn run() {\n+    let _foo: Box<impl Copy + '_> = Box::new(()); // FIXME: The error doesn't much make sense.\n+    //~^ ERROR: opaque type expands to a recursive type\n+}\n+\n+fn main() {}"}, {"sha": "56cba3cff0b554b70f049506de4318a561ea988c", "filename": "src/test/ui/impl-trait/issue-67166.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-67166.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7e903f82ff1401445853905083456b9bb0e761cc/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-67166.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissue-67166.stderr?ref=7e903f82ff1401445853905083456b9bb0e761cc", "patch": "@@ -0,0 +1,11 @@\n+error[E0720]: opaque type expands to a recursive type\n+  --> $DIR/issue-67166.rs:7:19\n+   |\n+LL |     let _foo: Box<impl Copy + '_> = Box::new(()); // FIXME: The error doesn't much make sense.\n+   |                   ^^^^^^^^^^^^^^ expands to a recursive type\n+   |\n+   = note: type resolves to itself\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0720`."}]}