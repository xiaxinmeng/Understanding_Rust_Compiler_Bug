{"sha": "b11ec29e2828fe4d3df9d78c57f0e548a594991f", "node_id": "C_kwDOAAsO6NoAKGIxMWVjMjllMjgyOGZlNGQzZGY5ZDc4YzU3ZjBlNTQ4YTU5NDk5MWY", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-10-19T17:17:33Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-10-20T16:51:15Z"}, "message": "Address review.", "tree": {"sha": "6f92c2067840e17bab07edf1200ddd1913865f6e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6f92c2067840e17bab07edf1200ddd1913865f6e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b11ec29e2828fe4d3df9d78c57f0e548a594991f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b11ec29e2828fe4d3df9d78c57f0e548a594991f", "html_url": "https://github.com/rust-lang/rust/commit/b11ec29e2828fe4d3df9d78c57f0e548a594991f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b11ec29e2828fe4d3df9d78c57f0e548a594991f/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8785b70774185b81d46d2392b3814cd081209c3e", "url": "https://api.github.com/repos/rust-lang/rust/commits/8785b70774185b81d46d2392b3814cd081209c3e", "html_url": "https://github.com/rust-lang/rust/commit/8785b70774185b81d46d2392b3814cd081209c3e"}], "stats": {"total": 9, "additions": 1, "deletions": 8}, "files": [{"sha": "f3100010770307a08e1168547bd4c3d1082880d5", "filename": "compiler/rustc_middle/src/dep_graph/dep_node.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b11ec29e2828fe4d3df9d78c57f0e548a594991f/compiler%2Frustc_middle%2Fsrc%2Fdep_graph%2Fdep_node.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b11ec29e2828fe4d3df9d78c57f0e548a594991f/compiler%2Frustc_middle%2Fsrc%2Fdep_graph%2Fdep_node.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fdep_graph%2Fdep_node.rs?ref=b11ec29e2828fe4d3df9d78c57f0e548a594991f", "patch": "@@ -124,13 +124,6 @@ pub struct DepKindStruct {\n     /// with kind `MirValidated`, we know that the GUID/fingerprint of the `DepNode`\n     /// is actually a `DefPathHash`, and can therefore just look up the corresponding\n     /// `DefId` in `tcx.def_path_hash_to_def_id`.\n-    ///\n-    /// When you implement a new query, it will likely have a corresponding new\n-    /// `DepKind`, and you'll have to support it here in `force_from_dep_node()`. As\n-    /// a rule of thumb, if your query takes a `DefId` or `LocalDefId` as sole parameter,\n-    /// then `force_from_dep_node()` should not fail for it. Otherwise, you can just\n-    /// add it to the \"We don't have enough information to reconstruct...\" group in\n-    /// the match below.\n     pub force_from_dep_node: Option<fn(tcx: TyCtxt<'_>, dep_node: DepNode) -> bool>,\n \n     /// Invoke a query to put the on-disk cached value in memory."}, {"sha": "056611317dcf18cb601e6fa0f2b62a8966efedf1", "filename": "compiler/rustc_query_system/src/query/plumbing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b11ec29e2828fe4d3df9d78c57f0e548a594991f/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fplumbing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b11ec29e2828fe4d3df9d78c57f0e548a594991f/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fplumbing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_query_system%2Fsrc%2Fquery%2Fplumbing.rs?ref=b11ec29e2828fe4d3df9d78c57f0e548a594991f", "patch": "@@ -713,7 +713,7 @@ where\n     Q::Key: DepNodeParams<CTX::DepContext>,\n     CTX: QueryContext,\n {\n-    debug_assert!(!Q::ANON);\n+    assert!(!Q::ANON);\n \n     // We may be concurrently trying both execute and force a query.\n     // Ensure that only one of them runs the query."}]}