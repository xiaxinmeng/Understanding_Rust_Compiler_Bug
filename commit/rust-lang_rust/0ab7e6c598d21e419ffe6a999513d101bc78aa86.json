{"sha": "0ab7e6c598d21e419ffe6a999513d101bc78aa86", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhYjdlNmM1OThkMjFlNDE5ZmZlNmE5OTk1MTNkMTAxYmM3OGFhODY=", "commit": {"author": {"name": "Phil Turnbull", "email": "philip.turnbull@gmail.com", "date": "2016-10-16T19:13:09Z"}, "committer": {"name": "Phil Turnbull", "email": "philip.turnbull@gmail.com", "date": "2016-11-19T19:44:32Z"}, "message": "Factor out lint_vec_extend", "tree": {"sha": "ea973b1c14e230f051081d5be492d1a520179c66", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ea973b1c14e230f051081d5be492d1a520179c66"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0ab7e6c598d21e419ffe6a999513d101bc78aa86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0ab7e6c598d21e419ffe6a999513d101bc78aa86", "html_url": "https://github.com/rust-lang/rust/commit/0ab7e6c598d21e419ffe6a999513d101bc78aa86", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0ab7e6c598d21e419ffe6a999513d101bc78aa86/comments", "author": {"login": "philipturnbull", "id": 45588, "node_id": "MDQ6VXNlcjQ1NTg4", "avatar_url": "https://avatars.githubusercontent.com/u/45588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philipturnbull", "html_url": "https://github.com/philipturnbull", "followers_url": "https://api.github.com/users/philipturnbull/followers", "following_url": "https://api.github.com/users/philipturnbull/following{/other_user}", "gists_url": "https://api.github.com/users/philipturnbull/gists{/gist_id}", "starred_url": "https://api.github.com/users/philipturnbull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philipturnbull/subscriptions", "organizations_url": "https://api.github.com/users/philipturnbull/orgs", "repos_url": "https://api.github.com/users/philipturnbull/repos", "events_url": "https://api.github.com/users/philipturnbull/events{/privacy}", "received_events_url": "https://api.github.com/users/philipturnbull/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philipturnbull", "id": 45588, "node_id": "MDQ6VXNlcjQ1NTg4", "avatar_url": "https://avatars.githubusercontent.com/u/45588?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philipturnbull", "html_url": "https://github.com/philipturnbull", "followers_url": "https://api.github.com/users/philipturnbull/followers", "following_url": "https://api.github.com/users/philipturnbull/following{/other_user}", "gists_url": "https://api.github.com/users/philipturnbull/gists{/gist_id}", "starred_url": "https://api.github.com/users/philipturnbull/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philipturnbull/subscriptions", "organizations_url": "https://api.github.com/users/philipturnbull/orgs", "repos_url": "https://api.github.com/users/philipturnbull/repos", "events_url": "https://api.github.com/users/philipturnbull/events{/privacy}", "received_events_url": "https://api.github.com/users/philipturnbull/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "276e85b70068398a81e3ce0ab18dc6fe59004c7c", "url": "https://api.github.com/repos/rust-lang/rust/commits/276e85b70068398a81e3ce0ab18dc6fe59004c7c", "html_url": "https://github.com/rust-lang/rust/commit/276e85b70068398a81e3ce0ab18dc6fe59004c7c"}], "stats": {"total": 13, "additions": 8, "deletions": 5}, "files": [{"sha": "73a86ff1d171faf388b0081a9dc93ff11eb9fa9d", "filename": "clippy_lints/src/methods.rs", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/0ab7e6c598d21e419ffe6a999513d101bc78aa86/clippy_lints%2Fsrc%2Fmethods.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0ab7e6c598d21e419ffe6a999513d101bc78aa86/clippy_lints%2Fsrc%2Fmethods.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods.rs?ref=0ab7e6c598d21e419ffe6a999513d101bc78aa86", "patch": "@@ -794,11 +794,7 @@ fn lint_clone_on_copy(cx: &LateContext, expr: &hir::Expr, arg: &hir::Expr, arg_t\n     }\n }\n \n-fn lint_extend(cx: &LateContext, expr: &hir::Expr, args: &MethodArgs) {\n-    let (obj_ty, _) = walk_ptrs_ty_depth(cx.tcx.tables().expr_ty(&args[0]));\n-    if !match_type(cx, obj_ty, &paths::VEC) {\n-        return;\n-    }\n+fn lint_vec_extend(cx: &LateContext, expr: &hir::Expr, args: &MethodArgs) {\n     let arg_ty = cx.tcx.tables().expr_ty(&args[1]);\n     if let Some(slice) = derefs_to_slice(cx, &args[1], arg_ty) {\n         span_lint_and_then(cx, EXTEND_FROM_SLICE, expr.span, \"use of `extend` to extend a Vec by a slice\", |db| {\n@@ -811,6 +807,13 @@ fn lint_extend(cx: &LateContext, expr: &hir::Expr, args: &MethodArgs) {\n     }\n }\n \n+fn lint_extend(cx: &LateContext, expr: &hir::Expr, args: &MethodArgs) {\n+    let (obj_ty, _) = walk_ptrs_ty_depth(cx.tcx.tables().expr_ty(&args[0]));\n+    if match_type(cx, obj_ty, &paths::VEC) {\n+        lint_vec_extend(cx, expr, args);\n+    }\n+}\n+\n fn lint_cstring_as_ptr(cx: &LateContext, expr: &hir::Expr, new: &hir::Expr, unwrap: &hir::Expr) {\n     if_let_chain!{[\n         let hir::ExprCall(ref fun, ref args) = new.node,"}]}