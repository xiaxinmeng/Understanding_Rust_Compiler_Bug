{"sha": "0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA4NTdjMjJmMjYzZmYxODQxOGY5MzliNTdhN2EyYWIzZjhhYWMyYzE=", "commit": {"author": {"name": "Alan Du", "email": "alanhdu@gmail.com", "date": "2018-10-20T16:29:25Z"}, "committer": {"name": "Alan Du", "email": "alanhdu@gmail.com", "date": "2018-10-20T16:29:25Z"}, "message": "Revert \"clippy: Fix new_ret_no_self\"\n\nThis reverts commit 2ae9dfa812ccf18867373f77a106161378a6d91d.", "tree": {"sha": "f7a33b9fb8ddabe65c99f4db6a7d84c7a8463e16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7a33b9fb8ddabe65c99f4db6a7d84c7a8463e16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "html_url": "https://github.com/rust-lang/rust/commit/0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/comments", "author": {"login": "alanhdu", "id": 1914111, "node_id": "MDQ6VXNlcjE5MTQxMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1914111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alanhdu", "html_url": "https://github.com/alanhdu", "followers_url": "https://api.github.com/users/alanhdu/followers", "following_url": "https://api.github.com/users/alanhdu/following{/other_user}", "gists_url": "https://api.github.com/users/alanhdu/gists{/gist_id}", "starred_url": "https://api.github.com/users/alanhdu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alanhdu/subscriptions", "organizations_url": "https://api.github.com/users/alanhdu/orgs", "repos_url": "https://api.github.com/users/alanhdu/repos", "events_url": "https://api.github.com/users/alanhdu/events{/privacy}", "received_events_url": "https://api.github.com/users/alanhdu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alanhdu", "id": 1914111, "node_id": "MDQ6VXNlcjE5MTQxMTE=", "avatar_url": "https://avatars.githubusercontent.com/u/1914111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alanhdu", "html_url": "https://github.com/alanhdu", "followers_url": "https://api.github.com/users/alanhdu/followers", "following_url": "https://api.github.com/users/alanhdu/following{/other_user}", "gists_url": "https://api.github.com/users/alanhdu/gists{/gist_id}", "starred_url": "https://api.github.com/users/alanhdu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alanhdu/subscriptions", "organizations_url": "https://api.github.com/users/alanhdu/orgs", "repos_url": "https://api.github.com/users/alanhdu/repos", "events_url": "https://api.github.com/users/alanhdu/events{/privacy}", "received_events_url": "https://api.github.com/users/alanhdu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6dd3fa6a947a4442e46ac042ff955a7f17bd6a0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6dd3fa6a947a4442e46ac042ff955a7f17bd6a0f", "html_url": "https://github.com/rust-lang/rust/commit/6dd3fa6a947a4442e46ac042ff955a7f17bd6a0f"}], "stats": {"total": 34, "additions": 17, "deletions": 17}, "files": [{"sha": "3fca3e5814a538fcb3cf89192bbf386c5907281a", "filename": "crates/ra_analysis/src/descriptors.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Fsrc%2Fdescriptors.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Fsrc%2Fdescriptors.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fdescriptors.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -232,7 +232,7 @@ pub struct FnDescriptor {\n }\n \n impl FnDescriptor {\n-    pub fn new_opt(node: ast::FnDef) -> Option<Self> {\n+    pub fn new(node: ast::FnDef) -> Option<Self> {\n         let name = node.name()?.text().to_string();\n \n         // Strip the body out for the label."}, {"sha": "2ed6694bab4f6e37e26d4013b084d733b44c016d", "filename": "crates/ra_analysis/src/imp.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Fsrc%2Fimp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Fsrc%2Fimp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fimp.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -362,7 +362,7 @@ impl AnalysisImpl {\n         for (_, fs) in file_symbols {\n             if fs.kind == FN_DEF {\n                 if let Some(fn_def) = find_node_at_offset(syntax, fs.node_range.start()) {\n-                    if let Some(descriptor) = FnDescriptor::new_opt(fn_def) {\n+                    if let Some(descriptor) = FnDescriptor::new(fn_def) {\n                         // If we have a calling expression let's find which argument we are on\n                         let mut current_parameter = None;\n "}, {"sha": "2871f983908306b8bb6881b3af4dedce8f55198d", "filename": "crates/ra_analysis/src/job.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Fsrc%2Fjob.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Fsrc%2Fjob.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Fsrc%2Fjob.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -11,7 +11,7 @@ pub struct JobToken {\n }\n \n impl JobHandle {\n-    pub fn new_pair() -> (JobHandle, JobToken) {\n+    pub fn new() -> (JobHandle, JobToken) {\n         let (sender_alive, receiver_alive) = bounded(0);\n         let (sender_canceled, receiver_canceled) = bounded(0);\n         let token = JobToken {"}, {"sha": "e0c637d65d59748e0982c0a6cc7a48dcffa311eb", "filename": "crates/ra_analysis/tests/tests.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Ftests%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_analysis%2Ftests%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_analysis%2Ftests%2Ftests.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -62,7 +62,7 @@ fn get_signature(text: &str) -> (FnDescriptor, Option<usize>) {\n     let (offset, code) = extract_offset(text);\n     let code = code.as_str();\n \n-    let (_handle, token) = JobHandle::new_pair();\n+    let (_handle, token) = JobHandle::new();\n     let snap = analysis(&[(\"/lib.rs\", code)]);\n \n     snap.resolve_callable(FileId(1), offset, &token).unwrap()\n@@ -71,7 +71,7 @@ fn get_signature(text: &str) -> (FnDescriptor, Option<usize>) {\n #[test]\n fn test_resolve_module() {\n     let snap = analysis(&[(\"/lib.rs\", \"mod foo;\"), (\"/foo.rs\", \"\")]);\n-    let (_handle, token) = JobHandle::new_pair();\n+    let (_handle, token) = JobHandle::new();\n     let symbols = snap.approximately_resolve_symbol(FileId(1), 4.into(), &token);\n     assert_eq_dbg(\n         r#\"[(FileId(2), FileSymbol { name: \"foo\", node_range: [0; 0), kind: MODULE })]\"#,"}, {"sha": "9088e5a608b562125b5ff62b45c1e1c69036f5f7", "filename": "crates/ra_editor/src/scope/fn_scope.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_editor%2Fsrc%2Fscope%2Ffn_scope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_editor%2Fsrc%2Fscope%2Ffn_scope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_editor%2Fsrc%2Fscope%2Ffn_scope.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -63,7 +63,7 @@ impl FnScopes {\n             .syntax()\n             .descendants()\n             .filter_map(ast::BindPat::cast)\n-            .filter_map(ScopeEntry::new_opt);\n+            .filter_map(ScopeEntry::new);\n         self.scopes[scope].entries.extend(entries);\n     }\n     fn add_params_bindings(&mut self, scope: ScopeId, params: Option<ast::ParamList>) {\n@@ -88,7 +88,7 @@ pub struct ScopeEntry {\n }\n \n impl ScopeEntry {\n-    fn new_opt(pat: ast::BindPat) -> Option<ScopeEntry> {\n+    fn new(pat: ast::BindPat) -> Option<ScopeEntry> {\n         if pat.name().is_some() {\n             Some(ScopeEntry {\n                 syntax: pat.syntax().owned(),"}, {"sha": "8d7e408f851f826ada9e6426267cdd4bf8045799", "filename": "crates/ra_editor/src/scope/mod_scope.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_editor%2Fsrc%2Fscope%2Fmod_scope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_editor%2Fsrc%2Fscope%2Fmod_scope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_editor%2Fsrc%2Fscope%2Fmod_scope.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -22,14 +22,14 @@ impl ModuleScope {\n         let mut entries = Vec::new();\n         for item in items {\n             let entry = match item {\n-                ast::ModuleItem::StructDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::EnumDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::FnDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::ConstDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::StaticDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::TraitDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::TypeDef(item) => Entry::new_item(item),\n-                ast::ModuleItem::Module(item) => Entry::new_item(item),\n+                ast::ModuleItem::StructDef(item) => Entry::new(item),\n+                ast::ModuleItem::EnumDef(item) => Entry::new(item),\n+                ast::ModuleItem::FnDef(item) => Entry::new(item),\n+                ast::ModuleItem::ConstDef(item) => Entry::new(item),\n+                ast::ModuleItem::StaticDef(item) => Entry::new(item),\n+                ast::ModuleItem::TraitDef(item) => Entry::new(item),\n+                ast::ModuleItem::TypeDef(item) => Entry::new(item),\n+                ast::ModuleItem::Module(item) => Entry::new(item),\n                 ast::ModuleItem::UseItem(item) => {\n                     if let Some(tree) = item.use_tree() {\n                         collect_imports(tree, &mut entries);\n@@ -50,7 +50,7 @@ impl ModuleScope {\n }\n \n impl Entry {\n-    fn new_item<'a>(item: impl ast::NameOwner<'a>) -> Option<Entry> {\n+    fn new<'a>(item: impl ast::NameOwner<'a>) -> Option<Entry> {\n         let name = item.name()?;\n         Some(Entry {\n             node: name.syntax().owned(),"}, {"sha": "a11baf4aaecb1682f1650e0dc4649f845ca6e496", "filename": "crates/ra_lsp_server/src/main_loop/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0857c22f263ff18418f939b57a7a2ab3f8aac2c1/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fmod.rs?ref=0857c22f263ff18418f939b57a7a2ab3f8aac2c1", "patch": "@@ -355,7 +355,7 @@ impl<'a> PoolDispatcher<'a> {\n         };\n         match req.cast::<R>() {\n             Ok((id, params)) => {\n-                let (handle, token) = JobHandle::new_pair();\n+                let (handle, token) = JobHandle::new();\n                 let world = self.world.snapshot();\n                 let sender = self.sender.clone();\n                 self.pool.spawn(move || {"}]}