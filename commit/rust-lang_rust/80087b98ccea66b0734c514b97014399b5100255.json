{"sha": "80087b98ccea66b0734c514b97014399b5100255", "node_id": "C_kwDOAAsO6NoAKDgwMDg3Yjk4Y2NlYTY2YjA3MzRjNTE0Yjk3MDE0Mzk5YjUxMDAyNTU", "commit": {"author": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-05-06T02:00:39Z"}, "committer": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-05-06T02:04:04Z"}, "message": "bootstrap: bsd platform flags for split debuginfo\n\nBootstrap currently provides `-Zunstable-options` for OpenBSD when using\nsplit debuginfo - this commit provides it for all BSD targets.\n\nSigned-off-by: David Wood <david.wood@huawei.com>", "tree": {"sha": "8a66f361339e43ffd32d2693e549d58fcadcee5c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a66f361339e43ffd32d2693e549d58fcadcee5c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/80087b98ccea66b0734c514b97014399b5100255", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/80087b98ccea66b0734c514b97014399b5100255", "html_url": "https://github.com/rust-lang/rust/commit/80087b98ccea66b0734c514b97014399b5100255", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/80087b98ccea66b0734c514b97014399b5100255/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "74cea9fdb9ca77d4104df5c28124817004ead6a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/74cea9fdb9ca77d4104df5c28124817004ead6a3", "html_url": "https://github.com/rust-lang/rust/commit/74cea9fdb9ca77d4104df5c28124817004ead6a3"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "e91a9991806c3ae38f452086f088a0970ffc0252", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/80087b98ccea66b0734c514b97014399b5100255/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/80087b98ccea66b0734c514b97014399b5100255/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=80087b98ccea66b0734c514b97014399b5100255", "patch": "@@ -1405,8 +1405,12 @@ impl<'a> Builder<'a> {\n         // FIXME(davidtwco): #[cfg(not(bootstrap))] - #95612 needs to be in the bootstrap compiler\n         // for this conditional to be removed.\n         if !target.contains(\"windows\") || compiler.stage >= 1 {\n-            if target.contains(\"linux\") || target.contains(\"windows\") || target.contains(\"openbsd\")\n-            {\n+            let needs_unstable_opts = target.contains(\"linux\")\n+                || target.contains(\"windows\")\n+                || target.contains(\"bsd\")\n+                || target.contains(\"dragonfly\");\n+\n+            if needs_unstable_opts {\n                 rustflags.arg(\"-Zunstable-options\");\n             }\n             match self.config.rust_split_debuginfo {"}]}