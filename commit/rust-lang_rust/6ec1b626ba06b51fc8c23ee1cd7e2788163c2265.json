{"sha": "6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlYzFiNjI2YmEwNmI1MWZjOGMyM2VlMWNkN2UyNzg4MTYzYzIyNjU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-06-19T15:05:19Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-06-19T15:05:19Z"}, "message": "Auto merge of #51367 - oli-obk:silence!_I_test_you, r=Mark-Simulacrum\n\nUse quiet tests by default\n\nr? @eddyb", "tree": {"sha": "b68f8195cabfa90413f0db986cffd7af6938dc95", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b68f8195cabfa90413f0db986cffd7af6938dc95"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "html_url": "https://github.com/rust-lang/rust/commit/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a646c912f76412921b27b426a1da83e7df981dcc", "url": "https://api.github.com/repos/rust-lang/rust/commits/a646c912f76412921b27b426a1da83e7df981dcc", "html_url": "https://github.com/rust-lang/rust/commit/a646c912f76412921b27b426a1da83e7df981dcc"}, {"sha": "0c1bcd3871d08490fbe9aa5368a0cf043aeb5683", "url": "https://api.github.com/repos/rust-lang/rust/commits/0c1bcd3871d08490fbe9aa5368a0cf043aeb5683", "html_url": "https://github.com/rust-lang/rust/commit/0c1bcd3871d08490fbe9aa5368a0cf043aeb5683"}], "stats": {"total": 34, "additions": 16, "deletions": 18}, "files": [{"sha": "feb55d57ef3e18e38727baedac38f7356ddcf073", "filename": "config.toml.example", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "patch": "@@ -301,9 +301,9 @@\n # desired in distributions, for example.\n #rpath = true\n \n-# Suppresses extraneous output from tests to ensure the output of the test\n-# harness is relatively clean.\n-#quiet-tests = false\n+# Emits extraneous output from tests to ensure that failures of the test\n+# harness are debuggable just from logfiles.\n+#verbose-tests = false\n \n # Flag indicating whether tests are compiled with optimizations (the -O flag) or\n # with debuginfo (the -g flag)"}, {"sha": "11e0b6900b0060f083763ce1378795c718ca0e10", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "patch": "@@ -125,7 +125,7 @@ pub struct Config {\n     // misc\n     pub low_priority: bool,\n     pub channel: String,\n-    pub quiet_tests: bool,\n+    pub verbose_tests: bool,\n     pub test_miri: bool,\n     pub save_toolstates: Option<PathBuf>,\n     pub print_step_timings: bool,\n@@ -301,7 +301,7 @@ struct Rust {\n     ignore_git: Option<bool>,\n     debug: Option<bool>,\n     dist_src: Option<bool>,\n-    quiet_tests: Option<bool>,\n+    verbose_tests: Option<bool>,\n     test_miri: Option<bool>,\n     incremental: Option<bool>,\n     save_toolstates: Option<String>,\n@@ -528,7 +528,7 @@ impl Config {\n             set(&mut config.backtrace, rust.backtrace);\n             set(&mut config.channel, rust.channel.clone());\n             set(&mut config.rust_dist_src, rust.dist_src);\n-            set(&mut config.quiet_tests, rust.quiet_tests);\n+            set(&mut config.verbose_tests, rust.verbose_tests);\n             set(&mut config.test_miri, rust.test_miri);\n             // in the case \"false\" is set explicitly, do not overwrite the command line args\n             if let Some(true) = rust.incremental {"}, {"sha": "446db9c0a9e28a7feff8ab5f99a07f3b74bea1fd", "filename": "src/bootstrap/configure.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fbootstrap%2Fconfigure.py", "raw_url": "https://github.com/rust-lang/rust/raw/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fbootstrap%2Fconfigure.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfigure.py?ref=6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "patch": "@@ -47,7 +47,7 @@ def v(*args):\n o(\"experimental-parallel-queries\", \"rust.experimental-parallel-queries\", \"build rustc with experimental parallelization\")\n o(\"test-miri\", \"rust.test-miri\", \"run miri's test suite\")\n o(\"debuginfo-tests\", \"rust.debuginfo-tests\", \"build tests with debugger metadata\")\n-o(\"quiet-tests\", \"rust.quiet-tests\", \"enable quieter output when running tests\")\n+o(\"verbose-tests\", \"rust.verbose-tests\", \"enable verbose output when running tests\")\n o(\"ccache\", \"llvm.ccache\", \"invoke gcc/clang via ccache to reuse object files between builds\")\n o(\"sccache\", None, \"invoke gcc/clang via sccache to reuse object files between builds\")\n o(\"local-rust\", None, \"use an installed rustc rather than downloading a snapshot\")"}, {"sha": "d2fd798723dabbf0c6abf809eb50f56b32c11c18", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "patch": "@@ -632,7 +632,7 @@ impl Step for Tidy {\n         if !builder.config.vendor {\n             cmd.arg(\"--no-vendor\");\n         }\n-        if builder.config.quiet_tests {\n+        if !builder.config.verbose_tests {\n             cmd.arg(\"--quiet\");\n         }\n \n@@ -1086,7 +1086,7 @@ impl Step for Compiletest {\n             cmd.arg(\"--verbose\");\n         }\n \n-        if builder.config.quiet_tests {\n+        if !builder.config.verbose_tests {\n             cmd.arg(\"--quiet\");\n         }\n \n@@ -1397,10 +1397,10 @@ fn markdown_test(builder: &Builder, compiler: Compiler, markdown: &Path) -> bool\n     let test_args = builder.config.cmd.test_args().join(\" \");\n     cmd.arg(\"--test-args\").arg(test_args);\n \n-    if builder.config.quiet_tests {\n-        try_run_quiet(builder, &mut cmd)\n-    } else {\n+    if builder.config.verbose_tests {\n         try_run(builder, &mut cmd)\n+    } else {\n+        try_run_quiet(builder, &mut cmd)\n     }\n }\n \n@@ -1632,7 +1632,7 @@ impl Step for Crate {\n         cargo.arg(\"--\");\n         cargo.args(&builder.config.cmd.test_args());\n \n-        if builder.config.quiet_tests {\n+        if !builder.config.verbose_tests {\n             cargo.arg(\"--quiet\");\n         }\n \n@@ -1742,7 +1742,7 @@ impl Step for CrateRustdoc {\n         cargo.arg(\"--\");\n         cargo.args(&builder.config.cmd.test_args());\n \n-        if builder.config.quiet_tests {\n+        if !builder.config.verbose_tests {\n             cargo.arg(\"--quiet\");\n         }\n "}, {"sha": "5b1fb676187b1bb3e90dcb41921e42cc348bf23f", "filename": "src/ci/run.sh", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6ec1b626ba06b51fc8c23ee1cd7e2788163c2265/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=6ec1b626ba06b51fc8c23ee1cd7e2788163c2265", "patch": "@@ -27,10 +27,8 @@ fi\n ci_dir=`cd $(dirname $0) && pwd`\n source \"$ci_dir/shared.sh\"\n \n-if [ \"$TRAVIS\" == \"true\" ] && [ \"$TRAVIS_BRANCH\" != \"auto\" ]; then\n-    RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-quiet-tests\"\n-else\n-    RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set build.print-step-timings\"\n+if [ \"$TRAVIS\" != \"true\" ] || [ \"$TRAVIS_BRANCH\" == \"auto\" ]; then\n+    RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --set build.print-step-timings --enable-verbose-tests\"\n fi\n \n RUST_CONFIGURE_ARGS=\"$RUST_CONFIGURE_ARGS --enable-sccache\""}]}