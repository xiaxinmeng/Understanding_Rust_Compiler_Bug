{"sha": "6a8328cfa30543614cb776dd66334bc0f8f2cdfc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZhODMyOGNmYTMwNTQzNjE0Y2I3NzZkZDY2MzM0YmMwZjhmMmNkZmM=", "commit": {"author": {"name": "Johannes L\u00f6thberg", "email": "johannes@kyriasis.com", "date": "2017-07-17T22:18:00Z"}, "committer": {"name": "Johannes L\u00f6thberg", "email": "johannes@kyriasis.com", "date": "2017-07-17T22:18:00Z"}, "message": "Move relro_level from CodegenOptions to DebuggingOptions\n\nSigned-off-by: Johannes L\u00f6thberg <johannes@kyriasis.com>", "tree": {"sha": "1aac7747183c97c8880b325a351370e385c41ddb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1aac7747183c97c8880b325a351370e385c41ddb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6a8328cfa30543614cb776dd66334bc0f8f2cdfc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6a8328cfa30543614cb776dd66334bc0f8f2cdfc", "html_url": "https://github.com/rust-lang/rust/commit/6a8328cfa30543614cb776dd66334bc0f8f2cdfc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6a8328cfa30543614cb776dd66334bc0f8f2cdfc/comments", "author": {"login": "kyrias", "id": 2285387, "node_id": "MDQ6VXNlcjIyODUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2285387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyrias", "html_url": "https://github.com/kyrias", "followers_url": "https://api.github.com/users/kyrias/followers", "following_url": "https://api.github.com/users/kyrias/following{/other_user}", "gists_url": "https://api.github.com/users/kyrias/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyrias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyrias/subscriptions", "organizations_url": "https://api.github.com/users/kyrias/orgs", "repos_url": "https://api.github.com/users/kyrias/repos", "events_url": "https://api.github.com/users/kyrias/events{/privacy}", "received_events_url": "https://api.github.com/users/kyrias/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kyrias", "id": 2285387, "node_id": "MDQ6VXNlcjIyODUzODc=", "avatar_url": "https://avatars.githubusercontent.com/u/2285387?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kyrias", "html_url": "https://github.com/kyrias", "followers_url": "https://api.github.com/users/kyrias/followers", "following_url": "https://api.github.com/users/kyrias/following{/other_user}", "gists_url": "https://api.github.com/users/kyrias/gists{/gist_id}", "starred_url": "https://api.github.com/users/kyrias/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kyrias/subscriptions", "organizations_url": "https://api.github.com/users/kyrias/orgs", "repos_url": "https://api.github.com/users/kyrias/repos", "events_url": "https://api.github.com/users/kyrias/events{/privacy}", "received_events_url": "https://api.github.com/users/kyrias/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ecf3f6d4def2b2aa4b268ed50a7799ce40423bc0", "url": "https://api.github.com/repos/rust-lang/rust/commits/ecf3f6d4def2b2aa4b268ed50a7799ce40423bc0", "html_url": "https://github.com/rust-lang/rust/commit/ecf3f6d4def2b2aa4b268ed50a7799ce40423bc0"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "a5fa6c845bb531efc609569279b30ee68e838b6e", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/6a8328cfa30543614cb776dd66334bc0f8f2cdfc/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a8328cfa30543614cb776dd66334bc0f8f2cdfc/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=6a8328cfa30543614cb776dd66334bc0f8f2cdfc", "patch": "@@ -881,8 +881,6 @@ options! {CodegenOptions, CodegenSetter, basic_codegen_options,\n         \"disable the use of the redzone\"),\n     relocation_model: Option<String> = (None, parse_opt_string, [TRACKED],\n          \"choose the relocation model to use (rustc --print relocation-models for details)\"),\n-    relro_level: Option<RelroLevel> = (None, parse_relro_level, [TRACKED],\n-        \"choose which RELRO level to use\"),\n     code_model: Option<String> = (None, parse_opt_string, [TRACKED],\n          \"choose the code model to use (rustc --print code-models for details)\"),\n     metadata: Vec<String> = (Vec::new(), parse_list, [TRACKED],\n@@ -1057,6 +1055,8 @@ options! {DebuggingOptions, DebuggingSetter, basic_debugging_options,\n         \"extra arguments to prepend to the linker invocation (space separated)\"),\n     profile: bool = (false, parse_bool, [TRACKED],\n                      \"insert profiling code\"),\n+    relro_level: Option<RelroLevel> = (None, parse_relro_level, [TRACKED],\n+        \"choose which RELRO level to use\"),\n }\n \n pub fn default_lib_output() -> CrateType {\n@@ -2450,10 +2450,6 @@ mod tests {\n         opts.cg.relocation_model = Some(String::from(\"relocation model\"));\n         assert!(reference.dep_tracking_hash() != opts.dep_tracking_hash());\n \n-        opts = reference.clone();\n-        opts.cg.relro_level = Some(RelroLevel::Full);\n-        assert!(reference.dep_tracking_hash() != opts.dep_tracking_hash());\n-\n         opts = reference.clone();\n         opts.cg.code_model = Some(String::from(\"code model\"));\n         assert!(reference.dep_tracking_hash() != opts.dep_tracking_hash());\n@@ -2602,5 +2598,9 @@ mod tests {\n         opts = reference.clone();\n         opts.debugging_opts.mir_opt_level = 3;\n         assert!(reference.dep_tracking_hash() != opts.dep_tracking_hash());\n+\n+        opts = reference.clone();\n+        opts.debugging_opts.relro_level = Some(RelroLevel::Full);\n+        assert!(reference.dep_tracking_hash() != opts.dep_tracking_hash());\n     }\n }"}, {"sha": "40f3e0109284fe4a7b41451af98c13d66f40fc2e", "filename": "src/librustc_trans/back/link.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6a8328cfa30543614cb776dd66334bc0f8f2cdfc/src%2Flibrustc_trans%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6a8328cfa30543614cb776dd66334bc0f8f2cdfc/src%2Flibrustc_trans%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Flink.rs?ref=6a8328cfa30543614cb776dd66334bc0f8f2cdfc", "patch": "@@ -1029,7 +1029,7 @@ fn link_args(cmd: &mut Linker,\n         }\n     }\n \n-    let relro_level = match sess.opts.cg.relro_level {\n+    let relro_level = match sess.opts.debugging_opts.relro_level {\n         Some(level) => level,\n         None => t.options.relro_level,\n     };"}]}