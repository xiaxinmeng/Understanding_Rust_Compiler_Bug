{"sha": "7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmMDRiOGZmMDdiYTBjMjdjMmFlZjk1N2Q3YWEzZWQ0NDA0ZmM4Nzc=", "commit": {"author": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2015-06-13T16:53:07Z"}, "committer": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2015-06-13T16:53:07Z"}, "message": "compiletest: remove JIT", "tree": {"sha": "f4adc1b899b138037735bdfbb371e7b71f0bb0fc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f4adc1b899b138037735bdfbb371e7b71f0bb0fc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "html_url": "https://github.com/rust-lang/rust/commit/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/comments", "author": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a27982623c12e759c0d8d8e53c5290b76351bdd3", "url": "https://api.github.com/repos/rust-lang/rust/commits/a27982623c12e759c0d8d8e53c5290b76351bdd3", "html_url": "https://github.com/rust-lang/rust/commit/a27982623c12e759c0d8d8e53c5290b76351bdd3"}], "stats": {"total": 46, "additions": 12, "deletions": 34}, "files": [{"sha": "eb6c29eefbe78c33459e67972fe1f83a3513ecc7", "filename": "src/compiletest/common.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/src%2Fcompiletest%2Fcommon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/src%2Fcompiletest%2Fcommon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcommon.rs?ref=7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "patch": "@@ -124,9 +124,6 @@ pub struct Config {\n     // Flags to pass to the compiler when building for the target\n     pub target_rustcflags: Option<String>,\n \n-    // Run tests using the JIT\n-    pub jit: bool,\n-\n     // Target system to be tested\n     pub target: String,\n "}, {"sha": "1471e30baa6b02fabe8d4d7f8750308e2ea719f7", "filename": "src/compiletest/compiletest.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/src%2Fcompiletest%2Fcompiletest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/src%2Fcompiletest%2Fcompiletest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fcompiletest.rs?ref=7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "patch": "@@ -79,7 +79,6 @@ pub fn parse_config(args: Vec<String> ) -> Config {\n           optopt(\"\", \"target-rustcflags\", \"flags to pass to rustc for target\", \"FLAGS\"),\n           optflag(\"\", \"verbose\", \"run tests verbosely, showing all output\"),\n           optopt(\"\", \"logfile\", \"file to log test execution to\", \"FILE\"),\n-          optflag(\"\", \"jit\", \"run tests under the JIT\"),\n           optopt(\"\", \"target\", \"the target to build for\", \"TARGET\"),\n           optopt(\"\", \"host\", \"the host to build for\", \"HOST\"),\n           optopt(\"\", \"gdb-version\", \"the version of GDB used\", \"VERSION STRING\"),\n@@ -146,7 +145,6 @@ pub fn parse_config(args: Vec<String> ) -> Config {\n         runtool: matches.opt_str(\"runtool\"),\n         host_rustcflags: matches.opt_str(\"host-rustcflags\"),\n         target_rustcflags: matches.opt_str(\"target-rustcflags\"),\n-        jit: matches.opt_present(\"jit\"),\n         target: opt_str2(matches.opt_str(\"target\")),\n         host: opt_str2(matches.opt_str(\"host\")),\n         gdb_version: extract_gdb_version(matches.opt_str(\"gdb-version\")),\n@@ -186,7 +184,6 @@ pub fn log_config(config: &Config) {\n                     opt_str(&config.host_rustcflags)));\n     logv(c, format!(\"target-rustcflags: {}\",\n                     opt_str(&config.target_rustcflags)));\n-    logv(c, format!(\"jit: {}\", config.jit));\n     logv(c, format!(\"target: {}\", config.target));\n     logv(c, format!(\"host: {}\", config.host));\n     logv(c, format!(\"android-cross-path: {:?}\","}, {"sha": "5a076b8437e2694695d9f2528a4c4c716deb1f33", "filename": "src/compiletest/runtest.rs", "status": "modified", "additions": 12, "deletions": 28, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/src%2Fcompiletest%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877/src%2Fcompiletest%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcompiletest%2Fruntest.rs?ref=7f04b8ff07ba0c27c2aef957d7aa3ed4404fc877", "patch": "@@ -98,17 +98,13 @@ fn run_cfail_test(config: &Config, props: &TestProps, testfile: &Path) {\n }\n \n fn run_rfail_test(config: &Config, props: &TestProps, testfile: &Path) {\n-    let proc_res = if !config.jit {\n-        let proc_res = compile_test(config, props, testfile);\n+    let proc_res = compile_test(config, props, testfile);\n \n-        if !proc_res.status.success() {\n-            fatal_proc_rec(\"compilation failed!\", &proc_res);\n-        }\n+    if !proc_res.status.success() {\n+        fatal_proc_rec(\"compilation failed!\", &proc_res);\n+    }\n \n-        exec_compiled_test(config, props, testfile)\n-    } else {\n-        jit_test(config, props, testfile)\n-    };\n+    let proc_res = exec_compiled_test(config, props, testfile);\n \n     // The value our Makefile configures valgrind to return on failure\n     const VALGRIND_ERR: i32 = 100;\n@@ -133,24 +129,16 @@ fn check_correct_failure_status(proc_res: &ProcRes) {\n }\n \n fn run_rpass_test(config: &Config, props: &TestProps, testfile: &Path) {\n-    if !config.jit {\n-        let mut proc_res = compile_test(config, props, testfile);\n-\n-        if !proc_res.status.success() {\n-            fatal_proc_rec(\"compilation failed!\", &proc_res);\n-        }\n+    let proc_res = compile_test(config, props, testfile);\n \n-        proc_res = exec_compiled_test(config, props, testfile);\n+    if !proc_res.status.success() {\n+        fatal_proc_rec(\"compilation failed!\", &proc_res);\n+    }\n \n-        if !proc_res.status.success() {\n-            fatal_proc_rec(\"test run failed!\", &proc_res);\n-        }\n-    } else {\n-        let proc_res = jit_test(config, props, testfile);\n+    let proc_res = exec_compiled_test(config, props, testfile);\n \n-        if !proc_res.status.success() {\n-            fatal_proc_rec(\"jit failed!\", &proc_res);\n-        }\n+    if !proc_res.status.success() {\n+        fatal_proc_rec(\"test run failed!\", &proc_res);\n     }\n }\n \n@@ -1141,10 +1129,6 @@ fn compile_test(config: &Config, props: &TestProps,\n     compile_test_(config, props, testfile, &[])\n }\n \n-fn jit_test(config: &Config, props: &TestProps, testfile: &Path) -> ProcRes {\n-    compile_test_(config, props, testfile, &[\"--jit\".to_string()])\n-}\n-\n fn compile_test_(config: &Config, props: &TestProps,\n                  testfile: &Path, extra_args: &[String]) -> ProcRes {\n     let aux_dir = aux_output_dir_name(config, testfile);"}]}