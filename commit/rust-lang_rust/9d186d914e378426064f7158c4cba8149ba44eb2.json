{"sha": "9d186d914e378426064f7158c4cba8149ba44eb2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkMTg2ZDkxNGUzNzg0MjYwNjRmNzE1OGM0Y2JhODE0OWJhNDRlYjI=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-04-07T12:31:39Z"}, "committer": {"name": "Oliver Schneider", "email": "git-no-reply-9879165716479413131@oli-obk.de", "date": "2018-04-13T14:04:57Z"}, "message": "Update Cargo.lock and some improvements", "tree": {"sha": "796d198932f5fc845d0e868a9697f1d6cd3aa3b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/796d198932f5fc845d0e868a9697f1d6cd3aa3b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d186d914e378426064f7158c4cba8149ba44eb2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJgBAABCgBKFiEEvpMjxK4/cnPNfesJHVy0/Fl8MAQFAlrQuRIsHGdpdC1uby1y\nZXBseS05ODc5MTY1NzE2NDc5NDEzMTMxQG9saS1vYmsuZGUACgkQHVy0/Fl8MARy\nvxAA0juwYRqc8Cdj3dGfGG3vT4cuVQlWSjguJ4tKOiU9G6ZAUB8LAENYsWelpZ1N\nQ9FUNp9ePVwiUifKqUnOLlGj/6Q2gkHhWUjPN0xROaehikkC/S1cMAUxqf9C3ZYW\nvKYAlocD2zif8ViYdBUCXaVfHd3Mr++kGnzhT9iBtez/fAHLi4Byvj2xv9UI8eEB\nOxjZFaZAM826elYO8OhAlGkLsxZD9je1veYUFz6LsZQ2SjP9y92OIa2oOlBTglUa\n3dagYq1Zr5bnFJWOLPquA3vdpP/4R5ttsinc6BHvxK5MM2Kn9/b6lyRI32vm1LIg\nXlhlCY+BTOrdgAx9wlGqSrHcF5hHy4RwRcT5ois2n2AISCTw9erINtnat9xT1cRg\npXF/IS0lcDBo9b205tnvZIqCELkblhAj07ZOHiZ6W0YzheBIs3QpMBO4t6/Il2gU\nqdepKjUrIQWPX6LHtbb406zD+LlvRr0PgaaAgw/umu/rQ+dNHc0OJCz5lzRuEQYf\nEw0NoeYNL/0Beclxll9B4o/kaZ1G5wBElPposaDRTa/6p+N9am4lFwT3fMPqHDry\nPOtWV8jdd8WTZ8GiKgv7UExs/DDmMV6bHQMGDUdIydZf9Kjr1D6OkwaN2bEZqves\nJntLi7i5JJhpg7oaLWXn+x+jB7+JT+BxUOKw5dSNytS73xU=\n=KD+F\n-----END PGP SIGNATURE-----", "payload": "tree 796d198932f5fc845d0e868a9697f1d6cd3aa3b8\nparent 7bd20f1b12bc68396acb387884902a1308a045e5\nauthor bjorn3 <bjorn3@users.noreply.github.com> 1523104299 +0200\ncommitter Oliver Schneider <git-no-reply-9879165716479413131@oli-obk.de> 1523628297 +0200\n\nUpdate Cargo.lock and some improvements\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d186d914e378426064f7158c4cba8149ba44eb2", "html_url": "https://github.com/rust-lang/rust/commit/9d186d914e378426064f7158c4cba8149ba44eb2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d186d914e378426064f7158c4cba8149ba44eb2/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7bd20f1b12bc68396acb387884902a1308a045e5", "url": "https://api.github.com/repos/rust-lang/rust/commits/7bd20f1b12bc68396acb387884902a1308a045e5", "html_url": "https://github.com/rust-lang/rust/commit/7bd20f1b12bc68396acb387884902a1308a045e5"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "444c6f60d544e05ba39914680f598b5102d8a62e", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9d186d914e378426064f7158c4cba8149ba44eb2/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/9d186d914e378426064f7158c4cba8149ba44eb2/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=9d186d914e378426064f7158c4cba8149ba44eb2", "patch": "@@ -23,7 +23,7 @@ path = \"miri/lib.rs\"\n \n [dependencies]\n byteorder = { version = \"1.1\", features = [\"i128\"]}\n-cargo_metadata = { version = \"0.2\", optional = true }\n+cargo_metadata = { version = \"0.5\", optional = true }\n regex = \"0.2.2\"\n lazy_static = \"1.0\"\n env_logger = \"0.5.0-rc.1\""}, {"sha": "39a41583a39e0187ac95e14817c5513c7b616bca", "filename": "miri/bin/cargo-miri.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9d186d914e378426064f7158c4cba8149ba44eb2/miri%2Fbin%2Fcargo-miri.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d186d914e378426064f7158c4cba8149ba44eb2/miri%2Fbin%2Fcargo-miri.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri%2Fbin%2Fcargo-miri.rs?ref=9d186d914e378426064f7158c4cba8149ba44eb2", "patch": "@@ -121,7 +121,9 @@ fn main() {\n \n         let home = option_env!(\"RUSTUP_HOME\").or(option_env!(\"MULTIRUST_HOME\"));\n         let toolchain = option_env!(\"RUSTUP_TOOLCHAIN\").or(option_env!(\"MULTIRUST_TOOLCHAIN\"));\n-        let sys_root = if let (Some(home), Some(toolchain)) = (home, toolchain) {\n+        let sys_root = if let Ok(sysroot) = ::std::env::var(\"MIRI_SYSROOT\") {\n+            sysroot\n+        } else if let (Some(home), Some(toolchain)) = (home, toolchain) {\n             format!(\"{}/toolchains/{}\", home, toolchain)\n         } else {\n             option_env!(\"RUST_SYSROOT\")"}, {"sha": "16a7c5ad77c1b85d5bfc79dea5c6ba6cbb6b085e", "filename": "miri/fn_call.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9d186d914e378426064f7158c4cba8149ba44eb2/miri%2Ffn_call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d186d914e378426064f7158c4cba8149ba44eb2/miri%2Ffn_call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri%2Ffn_call.rs?ref=9d186d914e378426064f7158c4cba8149ba44eb2", "patch": "@@ -444,7 +444,6 @@ impl<'a, 'mir, 'tcx: 'mir + 'a> EvalContextExt<'tcx> for EvalContext<'a, 'mir, '\n \n             \"sysconf\" => {\n                 let name = self.value_to_primval(args[0])?.to_u64()?;\n-                let name_align = self.layout_of(args[0].ty)?.align;\n \n                 trace!(\"sysconf() called with name {}\", name);\n                 // cache the sysconf integers via miri's global cache"}, {"sha": "16510a5f17b252326efa1d41a79e23b0ba98b11f", "filename": "miri/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9d186d914e378426064f7158c4cba8149ba44eb2/miri%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d186d914e378426064f7158c4cba8149ba44eb2/miri%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri%2Flib.rs?ref=9d186d914e378426064f7158c4cba8149ba44eb2", "patch": "@@ -173,6 +173,7 @@ pub fn eval_main<'a, 'tcx: 'a>(\n             }\n         }\n         Err(mut e) => {\n+            ecx.tcx.sess.err(&e.to_string());\n             ecx.report(&mut e, true, None);\n         }\n     }"}]}