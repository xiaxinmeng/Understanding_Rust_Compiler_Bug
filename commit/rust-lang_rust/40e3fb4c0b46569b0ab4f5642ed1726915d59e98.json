{"sha": "40e3fb4c0b46569b0ab4f5642ed1726915d59e98", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQwZTNmYjRjMGI0NjU2OWIwYWI0ZjU2NDJlZDE3MjY5MTVkNTllOTg=", "commit": {"author": {"name": "Cameron Zwarich", "email": "zwarich@mozilla.com", "date": "2014-06-06T18:59:33Z"}, "committer": {"name": "Cameron Zwarich", "email": "zwarich@mozilla.com", "date": "2014-06-06T18:59:33Z"}, "message": "Use the MoveReason to determine a more precise MoveKind in gather_moves.", "tree": {"sha": "71798cd21a29dac4b17e38f9f6f9f0d67459a766", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/71798cd21a29dac4b17e38f9f6f9f0d67459a766"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/40e3fb4c0b46569b0ab4f5642ed1726915d59e98", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/40e3fb4c0b46569b0ab4f5642ed1726915d59e98", "html_url": "https://github.com/rust-lang/rust/commit/40e3fb4c0b46569b0ab4f5642ed1726915d59e98", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/40e3fb4c0b46569b0ab4f5642ed1726915d59e98/comments", "author": null, "committer": null, "parents": [{"sha": "5ccb7644be0f0ab04a76bf88c93cecb63b1ba20d", "url": "https://api.github.com/repos/rust-lang/rust/commits/5ccb7644be0f0ab04a76bf88c93cecb63b1ba20d", "html_url": "https://github.com/rust-lang/rust/commit/5ccb7644be0f0ab04a76bf88c93cecb63b1ba20d"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "6df474809779ac37cd62eebe2b80a6c86f002b7b", "filename": "src/librustc/middle/borrowck/gather_loans/gather_moves.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/40e3fb4c0b46569b0ab4f5642ed1726915d59e98/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fgather_moves.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40e3fb4c0b46569b0ab4f5642ed1726915d59e98/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fgather_moves.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fgather_moves.rs?ref=40e3fb4c0b46569b0ab4f5642ed1726915d59e98", "patch": "@@ -45,10 +45,15 @@ pub fn gather_move_from_expr(bccx: &BorrowckCtxt,\n                              move_data: &MoveData,\n                              move_error_collector: &MoveErrorCollector,\n                              move_expr_id: ast::NodeId,\n-                             cmt: mc::cmt) {\n+                             cmt: mc::cmt,\n+                             move_reason: euv::MoveReason) {\n+    let kind = match move_reason {\n+        euv::DirectRefMove | euv::PatBindingMove => MoveExpr,\n+        euv::CaptureMove => Captured\n+    };\n     let move_info = GatherMoveInfo {\n         id: move_expr_id,\n-        kind: MoveExpr,\n+        kind: kind,\n         cmt: cmt,\n         span_path_opt: None,\n     };"}, {"sha": "003687e7b63f9e342c86074d2fd4e3c9fa346a2d", "filename": "src/librustc/middle/borrowck/gather_loans/mod.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/40e3fb4c0b46569b0ab4f5642ed1726915d59e98/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40e3fb4c0b46569b0ab4f5642ed1726915d59e98/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fborrowck%2Fgather_loans%2Fmod.rs?ref=40e3fb4c0b46569b0ab4f5642ed1726915d59e98", "patch": "@@ -75,13 +75,13 @@ impl<'a> euv::Delegate for GatherLoanCtxt<'a> {\n                consume_id, cmt.repr(self.tcx()), mode);\n \n         match mode {\n-            euv::Copy => { return; }\n-            euv::Move(_) => { }\n+            euv::Move(move_reason) => {\n+                gather_moves::gather_move_from_expr(\n+                    self.bccx, &self.move_data, &self.move_error_collector,\n+                    consume_id, cmt, move_reason);\n+            }\n+            euv::Copy => { }\n         }\n-\n-        gather_moves::gather_move_from_expr(\n-            self.bccx, &self.move_data, &self.move_error_collector,\n-            consume_id, cmt);\n     }\n \n     fn consume_pat(&mut self,"}]}