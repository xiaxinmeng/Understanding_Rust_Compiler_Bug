{"sha": "8e317f5283969aa775552e659d4219bb2641954a", "node_id": "C_kwDOAAsO6NoAKDhlMzE3ZjUyODM5NjlhYTc3NTU1MmU2NTlkNDIxOWJiMjY0MTk1NGE", "commit": {"author": {"name": "togami2864", "email": "tuabobo123@gmail.com", "date": "2021-11-17T15:43:49Z"}, "committer": {"name": "togami2864", "email": "tuabobo123@gmail.com", "date": "2021-11-17T15:43:49Z"}, "message": "fix suggestion message", "tree": {"sha": "615c1cf7a1892d0a6008f57b9e3e80a1f6525c68", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/615c1cf7a1892d0a6008f57b9e3e80a1f6525c68"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e317f5283969aa775552e659d4219bb2641954a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e317f5283969aa775552e659d4219bb2641954a", "html_url": "https://github.com/rust-lang/rust/commit/8e317f5283969aa775552e659d4219bb2641954a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e317f5283969aa775552e659d4219bb2641954a/comments", "author": {"login": "togami2864", "id": 62130798, "node_id": "MDQ6VXNlcjYyMTMwNzk4", "avatar_url": "https://avatars.githubusercontent.com/u/62130798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/togami2864", "html_url": "https://github.com/togami2864", "followers_url": "https://api.github.com/users/togami2864/followers", "following_url": "https://api.github.com/users/togami2864/following{/other_user}", "gists_url": "https://api.github.com/users/togami2864/gists{/gist_id}", "starred_url": "https://api.github.com/users/togami2864/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/togami2864/subscriptions", "organizations_url": "https://api.github.com/users/togami2864/orgs", "repos_url": "https://api.github.com/users/togami2864/repos", "events_url": "https://api.github.com/users/togami2864/events{/privacy}", "received_events_url": "https://api.github.com/users/togami2864/received_events", "type": "User", "site_admin": false}, "committer": {"login": "togami2864", "id": 62130798, "node_id": "MDQ6VXNlcjYyMTMwNzk4", "avatar_url": "https://avatars.githubusercontent.com/u/62130798?v=4", "gravatar_id": "", "url": "https://api.github.com/users/togami2864", "html_url": "https://github.com/togami2864", "followers_url": "https://api.github.com/users/togami2864/followers", "following_url": "https://api.github.com/users/togami2864/following{/other_user}", "gists_url": "https://api.github.com/users/togami2864/gists{/gist_id}", "starred_url": "https://api.github.com/users/togami2864/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/togami2864/subscriptions", "organizations_url": "https://api.github.com/users/togami2864/orgs", "repos_url": "https://api.github.com/users/togami2864/repos", "events_url": "https://api.github.com/users/togami2864/events{/privacy}", "received_events_url": "https://api.github.com/users/togami2864/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "006c4426577bf243f7218f951d0c9ada6b4fe737", "url": "https://api.github.com/repos/rust-lang/rust/commits/006c4426577bf243f7218f951d0c9ada6b4fe737", "html_url": "https://github.com/rust-lang/rust/commit/006c4426577bf243f7218f951d0c9ada6b4fe737"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "177054f763b276937e6770ef695e54d8e4279faf", "filename": "tests/ui/option_map_or_none.fixed", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8e317f5283969aa775552e659d4219bb2641954a/tests%2Fui%2Foption_map_or_none.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/8e317f5283969aa775552e659d4219bb2641954a/tests%2Fui%2Foption_map_or_none.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Foption_map_or_none.fixed?ref=8e317f5283969aa775552e659d4219bb2641954a", "patch": "@@ -14,4 +14,9 @@ fn main() {\n     let _: Option<i32> = opt.map(|x| x + 1);\n     // function returning `Option`\n     let _: Option<i32> = opt.and_then(bar);\n+    let _: Option<i32> = opt.and_then(|x| {\n+        let offset = 0;\n+        let height = x;\n+        Some(offset + height)\n+    });\n }"}, {"sha": "6908546d32507e91e7b47ba5a6b19a554c1077d7", "filename": "tests/ui/option_map_or_none.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8e317f5283969aa775552e659d4219bb2641954a/tests%2Fui%2Foption_map_or_none.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e317f5283969aa775552e659d4219bb2641954a/tests%2Fui%2Foption_map_or_none.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Foption_map_or_none.rs?ref=8e317f5283969aa775552e659d4219bb2641954a", "patch": "@@ -18,7 +18,7 @@ fn main() {\n     let _: Option<i32> = opt.map_or(None, bar);\n     let _: Option<i32> = opt.map_or(None, |x| {\n         let offset = 0;\n-        let height = 1;\n+        let height = x;\n         Some(offset + height)\n     });\n }"}, {"sha": "11bdd887b6d3bc6d3966179ee225052462106bf7", "filename": "tests/ui/option_map_or_none.stderr", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/8e317f5283969aa775552e659d4219bb2641954a/tests%2Fui%2Foption_map_or_none.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8e317f5283969aa775552e659d4219bb2641954a/tests%2Fui%2Foption_map_or_none.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Foption_map_or_none.stderr?ref=8e317f5283969aa775552e659d4219bb2641954a", "patch": "@@ -21,5 +21,25 @@ error: called `map_or(None, ..)` on an `Option` value. This can be done more dir\n LL |     let _: Option<i32> = opt.map_or(None, bar);\n    |                          ^^^^^^^^^^^^^^^^^^^^^ help: try using `and_then` instead: `opt.and_then(bar)`\n \n-error: aborting due to 3 previous errors\n+error: called `map_or(None, ..)` on an `Option` value. This can be done more directly by calling `and_then(..)` instead\n+  --> $DIR/option_map_or_none.rs:19:26\n+   |\n+LL |       let _: Option<i32> = opt.map_or(None, |x| {\n+   |  __________________________^\n+LL | |         let offset = 0;\n+LL | |         let height = x;\n+LL | |         Some(offset + height)\n+LL | |     });\n+   | |______^\n+   |\n+help: try using `and_then` instead\n+   |\n+LL ~     let _: Option<i32> = opt.and_then(|x| {\n+LL +         let offset = 0;\n+LL +         let height = x;\n+LL +         Some(offset + height)\n+LL ~     });\n+   |\n+\n+error: aborting due to 4 previous errors\n "}]}