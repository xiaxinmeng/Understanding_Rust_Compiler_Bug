{"sha": "0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhMGNlOGQyMjdjZWVkZDUzOTI0Y2UwYTlhZmJhYzhkNTYwNGUzY2I=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-20T21:15:52Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2013-12-26T21:01:29Z"}, "message": "librustc: De-`@mut` `RegionVarBindings::skolemization_count`", "tree": {"sha": "46b4aa16bd0e8b4d4cd66c209b49064374af82a5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46b4aa16bd0e8b4d4cd66c209b49064374af82a5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "html_url": "https://github.com/rust-lang/rust/commit/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9f4cfe2e786e3a2f47b504d4a83dcdc70f29fb2c", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f4cfe2e786e3a2f47b504d4a83dcdc70f29fb2c", "html_url": "https://github.com/rust-lang/rust/commit/9f4cfe2e786e3a2f47b504d4a83dcdc70f29fb2c"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "0ae16e859d73c860d24f37852eefcb41164aadfe", "filename": "src/librustc/middle/typeck/infer/region_inference/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftypeck%2Finfer%2Fregion_inference%2Fmod.rs?ref=0a0ce8d227ceedd53924ce0a9afbac8d5604e3cb", "patch": "@@ -24,7 +24,7 @@ use middle::graph::{Direction, NodeIndex};\n use util::common::indenter;\n use util::ppaux::{Repr};\n \n-use std::cell::RefCell;\n+use std::cell::{Cell, RefCell};\n use std::hashmap::{HashMap, HashSet};\n use std::uint;\n use std::vec;\n@@ -92,7 +92,7 @@ pub struct RegionVarBindings {\n     constraints: RefCell<HashMap<Constraint, SubregionOrigin>>,\n     lubs: CombineMap,\n     glbs: CombineMap,\n-    skolemization_count: uint,\n+    skolemization_count: Cell<uint>,\n     bound_count: uint,\n \n     // The undo log records actions that might later be undone.\n@@ -118,7 +118,7 @@ pub fn RegionVarBindings(tcx: ty::ctxt) -> RegionVarBindings {\n         constraints: RefCell::new(HashMap::new()),\n         lubs: HashMap::new(),\n         glbs: HashMap::new(),\n-        skolemization_count: 0,\n+        skolemization_count: Cell::new(0),\n         bound_count: 0,\n         undo_log: ~[]\n     }\n@@ -188,8 +188,8 @@ impl RegionVarBindings {\n     }\n \n     pub fn new_skolemized(&mut self, br: ty::BoundRegion) -> Region {\n-        let sc = self.skolemization_count;\n-        self.skolemization_count += 1;\n+        let sc = self.skolemization_count.get();\n+        self.skolemization_count.set(sc + 1);\n         ReInfer(ReSkolemized(sc, br))\n     }\n "}]}