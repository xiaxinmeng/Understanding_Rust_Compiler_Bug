{"sha": "251e52e0c589d27a6d34cca8e706437a94174aeb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI1MWU1MmUwYzU4OWQyN2E2ZDM0Y2NhOGU3MDY0MzdhOTQxNzRhZWI=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-03-22T01:30:30Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2012-03-22T01:40:32Z"}, "message": "Fix rt deps. Close #1449.", "tree": {"sha": "210d34b80886c63ba5d9bf1410f880fa3e5398a2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/210d34b80886c63ba5d9bf1410f880fa3e5398a2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/251e52e0c589d27a6d34cca8e706437a94174aeb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/251e52e0c589d27a6d34cca8e706437a94174aeb", "html_url": "https://github.com/rust-lang/rust/commit/251e52e0c589d27a6d34cca8e706437a94174aeb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/251e52e0c589d27a6d34cca8e706437a94174aeb/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d28175b91603f61cd8f7f13d695623437fe1d4c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/d28175b91603f61cd8f7f13d695623437fe1d4c4", "html_url": "https://github.com/rust-lang/rust/commit/d28175b91603f61cd8f7f13d695623437fe1d4c4"}], "stats": {"total": 51, "additions": 14, "deletions": 37}, "files": [{"sha": "c17cb2d554fd706f3e5bd33bee67b772fddb6b9b", "filename": "mk/rt.mk", "status": "modified", "additions": 14, "deletions": 37, "changes": 51, "blob_url": "https://github.com/rust-lang/rust/blob/251e52e0c589d27a6d34cca8e706437a94174aeb/mk%2Frt.mk", "raw_url": "https://github.com/rust-lang/rust/raw/251e52e0c589d27a6d34cca8e706437a94174aeb/mk%2Frt.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Frt.mk?ref=251e52e0c589d27a6d34cca8e706437a94174aeb", "patch": "@@ -66,40 +66,16 @@ RUNTIME_S_$(1) := rt/arch/$$(HOST_$(1))/_context.S \\\n                   rt/arch/$$(HOST_$(1))/ccall.S \\\n                   rt/arch/$$(HOST_$(1))/record_sp.S\n \n-RUNTIME_HDR_$(1) := rt/globals.h \\\n-               rt/rust.h \\\n-               rt/rust_abi.h \\\n-               rt/rust_cc.h \\\n-               rt/rust_debug.h \\\n-               rt/rust_internal.h \\\n-               rt/rust_util.h \\\n-               rt/rust_env.h \\\n-               rt/rust_unwind.h \\\n-               rt/rust_upcall.h \\\n-               rt/rust_port.h \\\n-               rt/rust_task_thread.h \\\n-               rt/rust_scheduler.h \\\n-               rt/rust_shape.h \\\n-               rt/rust_task.h \\\n-               rt/rust_stack.h \\\n-               rt/rust_log.h \\\n-               rt/rust_port_selector.h \\\n-               rt/circular_buffer.h \\\n-               rt/util/array_list.h \\\n-               rt/util/indexed_list.h \\\n-               rt/util/synchronized_indexed_list.h \\\n-               rt/util/hash_map.h \\\n-               rt/sync/sync.h \\\n-               rt/sync/timer.h \\\n-               rt/sync/lock_and_signal.h \\\n-               rt/sync/lock_free_queue.h \\\n-               rt/sync/rust_thread.h \\\n-               rt/rust_srv.h \\\n-               rt/rust_kernel.h \\\n-               rt/memory_region.h \\\n-               rt/memory.h \\\n-               rt/arch/$$(HOST_$(1))/context.h \\\n-               rt/arch/$$(HOST_$(1))/regs.h\n+RUNTIME_HDR_$(1) := $$(wildcard \\\n+                       rt/*.h \\\n+                       rt/bigint/*.h \\\n+                       rt/isaac/*.h \\\n+                       rt/msvc/*.h \\\n+                       rt/sync/*.h \\\n+                       rt/uthash/*.h \\\n+                       rt/util/*.h \\\n+                       rt/vg/*.h \\\n+                       rt/arch/$$(HOST_$(1))/*.h)\n \n ifeq ($$(HOST_$(1)), i386)\n   LIBUV_ARCH_$(1) := ia32\n@@ -129,11 +105,12 @@ RUNTIME_OBJS_$(1) := $$(RUNTIME_CS_$(1):rt/%.cpp=rt/$(1)/%.o) \\\n                      $$(RUNTIME_S_$(1):rt/%.S=rt/$(1)/%.o)\n RUNTIME_LIBS_$(1) := $$(LIBUV_LIB_$(1))\n \n-rt/$(1)/%.o: rt/%.cpp $$(MKFILE_DEPS)\n+rt/$(1)/%.o: rt/%.cpp RUNTIME_HDR_$(1) $$(MKFILE_DEPS)\n \t@$$(call E, compile: $$@)\n \t$$(Q)$$(call CFG_COMPILE_C_$(1), $$@, $$(RUNTIME_INCS_$(1))) $$<\n \n-rt/$(1)/%.o: rt/%.S $$(MKFILE_DEPS) $$(LLVM_CONFIG_$$(CFG_HOST_TRIPLE))\n+rt/$(1)/%.o: rt/%.S  RUNTIME_HDR_$(1) $$(MKFILE_DEPS) \\\n+                     $$(LLVM_CONFIG_$$(CFG_HOST_TRIPLE))\n \t@$$(call E, compile: $$@)\n \t$$(Q)$$(call CFG_ASSEMBLE_$(1),$$@,$$<)\n \n@@ -143,7 +120,7 @@ rt/$(1)/arch/$$(HOST_$(1))/libmorestack.a: \\\n \t$$(Q)ar rcs $$@ $$<\n \n rt/$(1)/$(CFG_RUNTIME): $$(RUNTIME_OBJS_$(1)) $$(MKFILE_DEPS) \\\n-\t\t\t$$(RUNTIME_HDR_$(1)) \\\n+                        $$(RUNTIME_HDR_$(1)) \\\n                         $$(RUNTIME_DEF_$(1)) \\\n                         $$(RUNTIME_LIBS_$(1))\n \t@$$(call E, link: $$@)"}]}