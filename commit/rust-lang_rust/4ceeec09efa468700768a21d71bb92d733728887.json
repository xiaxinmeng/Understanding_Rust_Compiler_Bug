{"sha": "4ceeec09efa468700768a21d71bb92d733728887", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjZWVlYzA5ZWZhNDY4NzAwNzY4YTIxZDcxYmI5MmQ3MzM3Mjg4ODc=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2018-09-25T20:34:50Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-09-25T20:34:50Z"}, "message": "Rollup merge of #54557 - michaelwoerister:dont-auto-share-generics-for-incr-comp, r=alexcrichton\n\nincr.comp.: Don't automatically enable -Zshare-generics for incr. comp. builds.\n\nSo far the compiler would automatically enable sharing of monomorphizations for incremental builds. That was OK because without (Thin)LTO this could have very little impact on the runtime performance of the generated code. However, since https://github.com/rust-lang/rust/pull/53673, ThinLTO and incr. comp. can be combined, so the trade-off is not as clear anymore.\n\nThis PR removes the automatic tie between the two options. Whether monomorphizations are shared between crates or not now _only_ depends on the optimization level.\n\nr? @alexcrichton", "tree": {"sha": "6b82f5c5408db8034faa5a35a4b9860e98e9d2fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b82f5c5408db8034faa5a35a4b9860e98e9d2fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4ceeec09efa468700768a21d71bb92d733728887", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbqpvqCRBK7hj4Ov3rIwAAdHIIAASFrUDn8K1aKtLwoA2A+qj0\nBO6/rDvpKq5Bgbszb5ReRWteuntOP5ml2+/W6tDDOwKor349LdV6L9POcu0BYEZJ\nhLpltxVxGutou4lnEPX4UWHQO5k6AJL+uEd8vjyu2rbkg3NmtIh+nSxrLGGW5j4F\nNQFGIrkYwBApKmv+O2Br/ChwlDe15ODxEHgh89T2VBMT9M9nyWreEjZJ9lqUNogg\n3/tXmUCxxZGDNgPO2mVWY9jbbDKU1RxvDZVyMv3fRL5jpsLdkbNxR9kTEnq0CJJ7\nCiCYbdXK0zvwNMErKfszmUh1uGyBefUg2kYD/qAIeSsDM4+HB1PR3Ze0IUdv8GA=\n=PDgc\n-----END PGP SIGNATURE-----\n", "payload": "tree 6b82f5c5408db8034faa5a35a4b9860e98e9d2fb\nparent bd217b62f66d02b6b8caf14b00c5955eb75786b6\nparent 8fc7b5d12bfe6b2d7f8705db8bfc7fdcd6704d2e\nauthor Pietro Albini <pietro@pietroalbini.org> 1537907690 +0200\ncommitter GitHub <noreply@github.com> 1537907690 +0200\n\nRollup merge of #54557 - michaelwoerister:dont-auto-share-generics-for-incr-comp, r=alexcrichton\n\nincr.comp.: Don't automatically enable -Zshare-generics for incr. comp. builds.\n\nSo far the compiler would automatically enable sharing of monomorphizations for incremental builds. That was OK because without (Thin)LTO this could have very little impact on the runtime performance of the generated code. However, since https://github.com/rust-lang/rust/pull/53673, ThinLTO and incr. comp. can be combined, so the trade-off is not as clear anymore.\n\nThis PR removes the automatic tie between the two options. Whether monomorphizations are shared between crates or not now _only_ depends on the optimization level.\n\nr? @alexcrichton\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4ceeec09efa468700768a21d71bb92d733728887", "html_url": "https://github.com/rust-lang/rust/commit/4ceeec09efa468700768a21d71bb92d733728887", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4ceeec09efa468700768a21d71bb92d733728887/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd217b62f66d02b6b8caf14b00c5955eb75786b6", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd217b62f66d02b6b8caf14b00c5955eb75786b6", "html_url": "https://github.com/rust-lang/rust/commit/bd217b62f66d02b6b8caf14b00c5955eb75786b6"}, {"sha": "8fc7b5d12bfe6b2d7f8705db8bfc7fdcd6704d2e", "url": "https://api.github.com/repos/rust-lang/rust/commits/8fc7b5d12bfe6b2d7f8705db8bfc7fdcd6704d2e", "html_url": "https://github.com/rust-lang/rust/commit/8fc7b5d12bfe6b2d7f8705db8bfc7fdcd6704d2e"}], "stats": {"total": 1, "additions": 0, "deletions": 1}, "files": [{"sha": "8fa15d48a5dc9692f3fdfa38b71f9f34d8ae4814", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4ceeec09efa468700768a21d71bb92d733728887/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ceeec09efa468700768a21d71bb92d733728887/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=4ceeec09efa468700768a21d71bb92d733728887", "patch": "@@ -646,7 +646,6 @@ impl Options {\n         match self.debugging_opts.share_generics {\n             Some(setting) => setting,\n             None => {\n-                self.incremental.is_some() ||\n                 match self.optimize {\n                     OptLevel::No   |\n                     OptLevel::Less |"}]}