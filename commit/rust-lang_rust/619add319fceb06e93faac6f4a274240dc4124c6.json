{"sha": "619add319fceb06e93faac6f4a274240dc4124c6", "node_id": "C_kwDOAAsO6NoAKDYxOWFkZDMxOWZjZWIwNmU5M2ZhYWM2ZjRhMjc0MjQwZGM0MTI0YzY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-06T07:35:28Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-06T07:35:28Z"}, "message": "Rollup merge of #104035 - m-ou-se:weird-expr-closure-match, r=compiler-errors\n\nAdd 'closure match' test to weird-exprs.rs.\n\nHaving fun with patterns that look like closures.", "tree": {"sha": "2daf7b42226e2b18c06596f026be420ea862a023", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2daf7b42226e2b18c06596f026be420ea862a023"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/619add319fceb06e93faac6f4a274240dc4124c6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjZ2PACRBK7hj4Ov3rIwAA2UUIAIB4SyMGVtZ+bdnybQGK0Rns\nw9nGHFCBe2/4hpgDJl+KPUarR1s8y5ZpZf2ON4OhjXZ7/lt9TvTKNPxVtyBqbtxC\nQFXh3MEDoRItmhKYcce3tByRYJYCTlP6yPqH5Z+A5I3JUK48mNkJVuNw7pZQ6qYW\nqO65YdswRyPzXTNJlZk7hmPfefWut5kgrQ/+kAu7EzG9oJnsdtpHl5qEon1B5LyB\n3pTWVB9Omvh4QFtE/Mhd9kzXpCNh2wu10ResSClaVlPeTuS7ZcADAGPymYrT0+/x\n4kfs3YOhFzMzA5ZYcCK3BFZce8P5EmSdYTq971/xKknCE2wRprujV5Hj7ThkPs0=\n=sLtu\n-----END PGP SIGNATURE-----\n", "payload": "tree 2daf7b42226e2b18c06596f026be420ea862a023\nparent 13e62be1e5efbab8b3a8247fb61d2712b28aa20f\nparent 84fe2ee9d24cd2b8a44e15ae3214c302e4c3117f\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1667720128 +0100\ncommitter GitHub <noreply@github.com> 1667720128 +0100\n\nRollup merge of #104035 - m-ou-se:weird-expr-closure-match, r=compiler-errors\n\nAdd 'closure match' test to weird-exprs.rs.\n\nHaving fun with patterns that look like closures.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/619add319fceb06e93faac6f4a274240dc4124c6", "html_url": "https://github.com/rust-lang/rust/commit/619add319fceb06e93faac6f4a274240dc4124c6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/619add319fceb06e93faac6f4a274240dc4124c6/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "13e62be1e5efbab8b3a8247fb61d2712b28aa20f", "url": "https://api.github.com/repos/rust-lang/rust/commits/13e62be1e5efbab8b3a8247fb61d2712b28aa20f", "html_url": "https://github.com/rust-lang/rust/commit/13e62be1e5efbab8b3a8247fb61d2712b28aa20f"}, {"sha": "84fe2ee9d24cd2b8a44e15ae3214c302e4c3117f", "url": "https://api.github.com/repos/rust-lang/rust/commits/84fe2ee9d24cd2b8a44e15ae3214c302e4c3117f", "html_url": "https://github.com/rust-lang/rust/commit/84fe2ee9d24cd2b8a44e15ae3214c302e4c3117f"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "d65703ef5cae3cc5b93da2f835e8be1fc9cd6b37", "filename": "src/test/ui/weird-exprs.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/619add319fceb06e93faac6f4a274240dc4124c6/src%2Ftest%2Fui%2Fweird-exprs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/619add319fceb06e93faac6f4a274240dc4124c6/src%2Ftest%2Fui%2Fweird-exprs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fweird-exprs.rs?ref=619add319fceb06e93faac6f4a274240dc4124c6", "patch": "@@ -8,6 +8,7 @@\n #![allow(unreachable_code)]\n #![allow(unused_braces, unused_must_use, unused_parens)]\n #![allow(uncommon_codepoints, confusable_idents)]\n+#![allow(unreachable_patterns)]\n \n #![recursion_limit = \"256\"]\n \n@@ -194,6 +195,15 @@ fn bathroom_stall() {\n     assert_eq!(i, 13);\n }\n \n+fn closure_matching() {\n+    let x = |_| Some(1);\n+    let (|x| x) = match x(..) {\n+        |_| Some(2) => |_| Some(3),\n+        |_| _ => unreachable!(),\n+    };\n+    assert!(matches!(x(..), |_| Some(4)));\n+}\n+\n pub fn main() {\n     strange();\n     funny();\n@@ -216,4 +226,5 @@ pub fn main() {\n     \ud835\ude8c\ud835\ude98\ud835\ude97\ud835\ude9d\ud835\ude92\ud835\ude97\ud835\ude9e\ud835\ude8e();\n     function();\n     bathroom_stall();\n+    closure_matching();\n }"}]}