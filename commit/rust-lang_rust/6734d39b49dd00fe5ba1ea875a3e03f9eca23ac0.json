{"sha": "6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY3MzRkMzliNDlkZDAwZmU1YmExZWE4NzVhM2UwM2Y5ZWNhMjNhYzA=", "commit": {"author": {"name": "Zack M. Davis", "email": "code@zackmdavis.net", "date": "2017-09-23T17:11:39Z"}, "committer": {"name": "Zack M. Davis", "email": "code@zackmdavis.net", "date": "2017-09-23T17:11:39Z"}, "message": "update `fn_must_use` UI test to exercise nonprimitive comparisons", "tree": {"sha": "bbb46bbd1758b486efbe3583c4e94bc4d0afa118", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bbb46bbd1758b486efbe3583c4e94bc4d0afa118"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0", "html_url": "https://github.com/rust-lang/rust/commit/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0/comments", "author": {"login": "zackmdavis", "id": 1076988, "node_id": "MDQ6VXNlcjEwNzY5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1076988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zackmdavis", "html_url": "https://github.com/zackmdavis", "followers_url": "https://api.github.com/users/zackmdavis/followers", "following_url": "https://api.github.com/users/zackmdavis/following{/other_user}", "gists_url": "https://api.github.com/users/zackmdavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/zackmdavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zackmdavis/subscriptions", "organizations_url": "https://api.github.com/users/zackmdavis/orgs", "repos_url": "https://api.github.com/users/zackmdavis/repos", "events_url": "https://api.github.com/users/zackmdavis/events{/privacy}", "received_events_url": "https://api.github.com/users/zackmdavis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "zackmdavis", "id": 1076988, "node_id": "MDQ6VXNlcjEwNzY5ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/1076988?v=4", "gravatar_id": "", "url": "https://api.github.com/users/zackmdavis", "html_url": "https://github.com/zackmdavis", "followers_url": "https://api.github.com/users/zackmdavis/followers", "following_url": "https://api.github.com/users/zackmdavis/following{/other_user}", "gists_url": "https://api.github.com/users/zackmdavis/gists{/gist_id}", "starred_url": "https://api.github.com/users/zackmdavis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/zackmdavis/subscriptions", "organizations_url": "https://api.github.com/users/zackmdavis/orgs", "repos_url": "https://api.github.com/users/zackmdavis/repos", "events_url": "https://api.github.com/users/zackmdavis/events{/privacy}", "received_events_url": "https://api.github.com/users/zackmdavis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8917616e6a295fb4080c8e29362dc1e5a477c479", "url": "https://api.github.com/repos/rust-lang/rust/commits/8917616e6a295fb4080c8e29362dc1e5a477c479", "html_url": "https://github.com/rust-lang/rust/commit/8917616e6a295fb4080c8e29362dc1e5a477c479"}], "stats": {"total": 43, "additions": 31, "deletions": 12}, "files": [{"sha": "3741ba4f3ae7a3a97dd02600f4935093d4ae3f31", "filename": "src/test/ui/rfc_1940-must_use_on_functions/fn_must_use.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0/src%2Ftest%2Fui%2Frfc_1940-must_use_on_functions%2Ffn_must_use.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0/src%2Ftest%2Fui%2Frfc_1940-must_use_on_functions%2Ffn_must_use.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc_1940-must_use_on_functions%2Ffn_must_use.rs?ref=6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0", "patch": "@@ -11,6 +11,7 @@\n #![feature(fn_must_use)]\n #![warn(unused_must_use)]\n \n+#[derive(PartialEq, Eq)]\n struct MyStruct {\n     n: usize,\n }\n@@ -58,12 +59,18 @@ fn main() {\n     need_to_use_this_value();\n \n     let mut m = MyStruct { n: 2 };\n+    let n = MyStruct { n: 3 };\n+\n     m.need_to_use_this_method_value();\n     m.is_even(); // trait method!\n \n     m.replace(3); // won't warn (annotation needs to be in trait definition)\n \n-    2.eq(&3); // comparison methods are `must_use`\n+    // comparison methods are `must_use`\n+    2.eq(&3);\n+    m.eq(&n);\n \n-    2 == 3; // lint includes comparison operators\n+    // lint includes comparison operators\n+    2 == 3;\n+    m == n;\n }"}, {"sha": "fdd0a591bc78da13b4c6c6a94014e4756911ec2d", "filename": "src/test/ui/rfc_1940-must_use_on_functions/fn_must_use.stderr", "status": "modified", "additions": 22, "deletions": 10, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0/src%2Ftest%2Fui%2Frfc_1940-must_use_on_functions%2Ffn_must_use.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0/src%2Ftest%2Fui%2Frfc_1940-must_use_on_functions%2Ffn_must_use.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frfc_1940-must_use_on_functions%2Ffn_must_use.stderr?ref=6734d39b49dd00fe5ba1ea875a3e03f9eca23ac0", "patch": "@@ -1,7 +1,7 @@\n warning: unused return value of `need_to_use_this_value` which must be used: it's important\n-  --> $DIR/fn_must_use.rs:58:5\n+  --> $DIR/fn_must_use.rs:59:5\n    |\n-58 |     need_to_use_this_value();\n+59 |     need_to_use_this_value();\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: lint level defined here\n@@ -11,26 +11,38 @@ note: lint level defined here\n    |         ^^^^^^^^^^^^^^^\n \n warning: unused return value of `MyStruct::need_to_use_this_method_value` which must be used\n-  --> $DIR/fn_must_use.rs:61:5\n+  --> $DIR/fn_must_use.rs:64:5\n    |\n-61 |     m.need_to_use_this_method_value();\n+64 |     m.need_to_use_this_method_value();\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused return value of `EvenNature::is_even` which must be used: no side effects\n-  --> $DIR/fn_must_use.rs:62:5\n+  --> $DIR/fn_must_use.rs:65:5\n    |\n-62 |     m.is_even(); // trait method!\n+65 |     m.is_even(); // trait method!\n    |     ^^^^^^^^^^^^\n \n warning: unused return value of `std::cmp::PartialEq::eq` which must be used\n-  --> $DIR/fn_must_use.rs:66:5\n+  --> $DIR/fn_must_use.rs:70:5\n    |\n-66 |     2.eq(&3); // comparison methods are `must_use`\n+70 |     2.eq(&3);\n    |     ^^^^^^^^^\n \n+warning: unused return value of `std::cmp::PartialEq::eq` which must be used\n+  --> $DIR/fn_must_use.rs:71:5\n+   |\n+71 |     m.eq(&n);\n+   |     ^^^^^^^^^\n+\n+warning: unused comparison which must be used\n+  --> $DIR/fn_must_use.rs:74:5\n+   |\n+74 |     2 == 3;\n+   |     ^^^^^^\n+\n warning: unused comparison which must be used\n-  --> $DIR/fn_must_use.rs:68:5\n+  --> $DIR/fn_must_use.rs:75:5\n    |\n-68 |     2 == 3; // lint includes comparison operators\n+75 |     m == n;\n    |     ^^^^^^\n "}]}