{"sha": "478a07df05e3fe8df964291d8b25dd80b7e0e76b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ3OGEwN2RmMDVlM2ZlOGRmOTY0MjkxZDhiMjVkZDgwYjdlMGU3NmI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-04-29T20:06:07Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-04-29T20:06:07Z"}, "message": "Auto merge of #84708 - pnkfelix:revert-77885-everywhere, r=Mark-Simulacrum\n\nRevert PR 77885 everywhere\n\nChange to probe-stack=call (instead of inline-or-call) everywhere again, for now.\n\nWe had already reverted the change on stable back in PR #83412.\n\nSince then, we've had some movement on issue #83139, but not a 100% fix.\n\nBut also since then, we had bug reported, issue #84667, that looks like outright codegen breakage, rather than problems confined to debuginfo issues.    So we are reverting PR #77885 on stable and beta. We'll reland PR #77885 (or some    variant) switching back to an LLVM-dependent selection of out-of-line call vs    inline-asm, after these other issues have been resolved.", "tree": {"sha": "d254ebcc83009a82392a741c80b69b95eff48bcc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d254ebcc83009a82392a741c80b69b95eff48bcc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/478a07df05e3fe8df964291d8b25dd80b7e0e76b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/478a07df05e3fe8df964291d8b25dd80b7e0e76b", "html_url": "https://github.com/rust-lang/rust/commit/478a07df05e3fe8df964291d8b25dd80b7e0e76b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/478a07df05e3fe8df964291d8b25dd80b7e0e76b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "18587b14d1d820d31151d5c0a633621a67149e78", "url": "https://api.github.com/repos/rust-lang/rust/commits/18587b14d1d820d31151d5c0a633621a67149e78", "html_url": "https://github.com/rust-lang/rust/commit/18587b14d1d820d31151d5c0a633621a67149e78"}, {"sha": "db4c54443499d35c5273149ab8694247bd6ba727", "url": "https://api.github.com/repos/rust-lang/rust/commits/db4c54443499d35c5273149ab8694247bd6ba727", "html_url": "https://github.com/rust-lang/rust/commit/db4c54443499d35c5273149ab8694247bd6ba727"}], "stats": {"total": 137, "additions": 62, "deletions": 75}, "files": [{"sha": "f5d7be4537be097a98d6a49b20ec597edfdea359", "filename": "compiler/rustc_target/src/spec/i386_apple_ios.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi386_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi386_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi386_apple_ios.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -12,7 +12,8 @@ pub fn target() -> Target {\n         arch: \"x86\".to_string(),\n         options: TargetOptions {\n             max_atomic_width: Some(64),\n-            stack_probes: StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) },\n+            // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+            stack_probes: StackProbeType::Call,\n             ..base\n         },\n     }"}, {"sha": "06d71db4af2410264730ccfae91177b2ac4f4b13", "filename": "compiler/rustc_target/src/spec/i686_apple_darwin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_apple_darwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_apple_darwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_apple_darwin.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -6,7 +6,8 @@ pub fn target() -> Target {\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.insert(LinkerFlavor::Gcc, vec![\"-m32\".to_string()]);\n     base.link_env_remove.extend(super::apple_base::macos_link_env_remove());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.eliminate_frame_pointer = false;\n \n     // Clang automatically chooses a more specific target based on"}, {"sha": "19d7b3c95cf6d3d53e9bd24b697fdbf85275ad50", "filename": "compiler/rustc_target/src/spec/i686_linux_android.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_linux_android.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_linux_android.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_linux_android.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -11,7 +11,8 @@ pub fn target() -> Target {\n     // http://developer.android.com/ndk/guides/abis.html#x86\n     base.cpu = \"pentiumpro\".to_string();\n     base.features = \"+mmx,+sse,+sse2,+sse3,+ssse3\".to_string();\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-linux-android\".to_string(),"}, {"sha": "d8e37e72371543281372af5369e06ab93bb019ca", "filename": "compiler/rustc_target/src/spec/i686_unknown_freebsd.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_freebsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_freebsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_freebsd.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -7,7 +7,8 @@ pub fn target() -> Target {\n     let pre_link_args = base.pre_link_args.entry(LinkerFlavor::Gcc).or_default();\n     pre_link_args.push(\"-m32\".to_string());\n     pre_link_args.push(\"-Wl,-znotext\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-unknown-freebsd\".to_string(),"}, {"sha": "e4c01db543980035011ca832f268a06823246706", "filename": "compiler/rustc_target/src/spec/i686_unknown_haiku.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_haiku.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_haiku.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_haiku.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"pentium4\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.insert(LinkerFlavor::Gcc, vec![\"-m32\".to_string()]);\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-unknown-haiku\".to_string(),"}, {"sha": "165505ee73139eb2c545c874fb6422108ee39c21", "filename": "compiler/rustc_target/src/spec/i686_unknown_linux_gnu.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_linux_gnu.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"pentium4\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m32\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-unknown-linux-gnu\".to_string(),"}, {"sha": "228976779f0d438e03d6e203a4af82c199b30425", "filename": "compiler/rustc_target/src/spec/i686_unknown_linux_musl.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_linux_musl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_linux_musl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_linux_musl.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -6,7 +6,8 @@ pub fn target() -> Target {\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m32\".to_string());\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-Wl,-melf_i386\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     // The unwinder used by i686-unknown-linux-musl, the LLVM libunwind\n     // implementation, apparently relies on frame pointers existing... somehow."}, {"sha": "989e3fb1adf049e9f2be73716a9e422c54a78968", "filename": "compiler/rustc_target/src/spec/i686_unknown_netbsd.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_netbsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_netbsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_netbsd.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"pentium4\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m32\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-unknown-netbsdelf\".to_string(),"}, {"sha": "7ff79961375cf053071888cddb0b969645bf6059", "filename": "compiler/rustc_target/src/spec/i686_unknown_openbsd.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_openbsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_openbsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_unknown_openbsd.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -6,7 +6,8 @@ pub fn target() -> Target {\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m32\".to_string());\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-fuse-ld=lld\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-unknown-openbsd\".to_string(),"}, {"sha": "c7963dbde777db542b3fd4718cbaf8281f780180", "filename": "compiler/rustc_target/src/spec/i686_wrs_vxworks.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_wrs_vxworks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_wrs_vxworks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fi686_wrs_vxworks.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"pentium4\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m32\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"i686-unknown-linux-gnu\".to_string(),"}, {"sha": "64f47b4aa9bbde7f7d701358bdc298dda0fcc30f", "filename": "compiler/rustc_target/src/spec/linux_kernel_base.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Flinux_kernel_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Flinux_kernel_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Flinux_kernel_base.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn opts() -> TargetOptions {\n         env: \"gnu\".to_string(),\n         disable_redzone: true,\n         panic_strategy: PanicStrategy::Abort,\n-        stack_probes: StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) },\n+        // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+        stack_probes: StackProbeType::Call,\n         eliminate_frame_pointer: false,\n         linker_is_gnu: true,\n         position_independent_executables: true,"}, {"sha": "dc7597fe7b2a15905b20421551c00a998b0344af", "filename": "compiler/rustc_target/src/spec/x86_64_apple_darwin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_darwin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_darwin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_darwin.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -10,7 +10,8 @@ pub fn target() -> Target {\n         vec![\"-m64\".to_string(), \"-arch\".to_string(), \"x86_64\".to_string()],\n     );\n     base.link_env_remove.extend(super::apple_base::macos_link_env_remove());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.supported_sanitizers = SanitizerSet::ADDRESS | SanitizerSet::LEAK | SanitizerSet::THREAD;\n \n     // Clang automatically chooses a more specific target based on"}, {"sha": "adb877185897bcbf540caa5f1ecc0caac9cedad2", "filename": "compiler/rustc_target/src/spec/x86_64_apple_ios.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_ios.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_ios.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_ios.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -11,7 +11,8 @@ pub fn target() -> Target {\n         arch: \"x86_64\".to_string(),\n         options: TargetOptions {\n             max_atomic_width: Some(64),\n-            stack_probes: StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) },\n+            // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+            stack_probes: StackProbeType::Call,\n             ..base\n         },\n     }"}, {"sha": "c228e42ef300408a662c0bd34aec209e4f57ca8a", "filename": "compiler/rustc_target/src/spec/x86_64_apple_ios_macabi.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_ios_macabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_ios_macabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_ios_macabi.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -11,7 +11,8 @@ pub fn target() -> Target {\n         arch: \"x86_64\".to_string(),\n         options: TargetOptions {\n             max_atomic_width: Some(64),\n-            stack_probes: StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) },\n+            // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+            stack_probes: StackProbeType::Call,\n             ..base\n         },\n     }"}, {"sha": "e3a5de4cbd1a403cfb900092cf00d969d3346720", "filename": "compiler/rustc_target/src/spec/x86_64_apple_tvos.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_tvos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_tvos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_apple_tvos.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -10,7 +10,8 @@ pub fn target() -> Target {\n         arch: \"x86_64\".to_string(),\n         options: TargetOptions {\n             max_atomic_width: Some(64),\n-            stack_probes: StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) },\n+            // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+            stack_probes: StackProbeType::Call,\n             ..base\n         },\n     }"}, {"sha": "aa65ebe1f9dbd77615e0f381b5ef7eb098b6438c", "filename": "compiler/rustc_target/src/spec/x86_64_fuchsia.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_fuchsia.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_fuchsia.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_fuchsia.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -4,7 +4,8 @@ pub fn target() -> Target {\n     let mut base = super::fuchsia_base::opts();\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.supported_sanitizers = SanitizerSet::ADDRESS;\n \n     Target {"}, {"sha": "9065283b731ee79c3132225de8c1a80f517fc666", "filename": "compiler/rustc_target/src/spec/x86_64_linux_android.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_linux_android.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_linux_android.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_linux_android.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -7,7 +7,8 @@ pub fn target() -> Target {\n     base.features = \"+mmx,+sse,+sse2,+sse3,+ssse3,+sse4.1,+sse4.2,+popcnt\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-linux-android\".to_string(),"}, {"sha": "b78e43d4fe9b6f842db4d179d5437936bfde8c8b", "filename": "compiler/rustc_target/src/spec/x86_64_pc_solaris.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_pc_solaris.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_pc_solaris.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_pc_solaris.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -6,7 +6,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.vendor = \"pc\".to_string();\n     base.max_atomic_width = Some(64);\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-pc-solaris\".to_string(),"}, {"sha": "2fa53470f74f2af8ddef69fd88998b4c8e542df8", "filename": "compiler/rustc_target/src/spec/x86_64_sun_solaris.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_sun_solaris.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_sun_solaris.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_sun_solaris.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -6,7 +6,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.vendor = \"sun\".to_string();\n     base.max_atomic_width = Some(64);\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-pc-solaris\".to_string(),"}, {"sha": "d69830f0a3f4fa5e2ca88cc40422ed86743b9487", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_dragonfly.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_dragonfly.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_dragonfly.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_dragonfly.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-unknown-dragonfly\".to_string(),"}, {"sha": "b5fc15f5e04bf200038118a5f9ae0d5db909c0fc", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_freebsd.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_freebsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_freebsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_freebsd.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.supported_sanitizers = SanitizerSet::ADDRESS | SanitizerSet::MEMORY | SanitizerSet::THREAD;\n \n     Target {"}, {"sha": "fcd96ddd61b33cb0016efa69bf397127cc691aa9", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_haiku.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_haiku.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_haiku.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_haiku.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.insert(LinkerFlavor::Gcc, vec![\"-m64\".to_string()]);\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     // This option is required to build executables on Haiku x86_64\n     base.position_independent_executables = true;\n "}, {"sha": "1ef24b6eb365eaca18ed01736c71544e5459db31", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_hermit.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_hermit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_hermit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_hermit.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.features = \"+rdrnd,+rdseed\".to_string();\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-unknown-hermit\".to_string(),"}, {"sha": "085079e06e570a0e3f7aea0aa4f119c8eb4f8638", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_linux_gnu.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnu.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnu.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnu.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.supported_sanitizers =\n         SanitizerSet::ADDRESS | SanitizerSet::LEAK | SanitizerSet::MEMORY | SanitizerSet::THREAD;\n "}, {"sha": "7b77ad668cd2ff4ec042d4e8e43839ed0f67ff65", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_linux_gnux32.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnux32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnux32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_gnux32.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-mx32\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.has_elf_tls = false;\n     // BUG(GabrielMajeri): disabling the PLT on x86_64 Linux with x32 ABI\n     // breaks code gen. See LLVM bug 36743"}, {"sha": "5ad243aa4075e2c3616e24a053e213cf22a3c96e", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_linux_musl.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_musl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_musl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_linux_musl.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.static_position_independent_executables = true;\n     base.supported_sanitizers =\n         SanitizerSet::ADDRESS | SanitizerSet::LEAK | SanitizerSet::MEMORY | SanitizerSet::THREAD;"}, {"sha": "0269c7afe55e9a73131058910e9bf8a0b26bf4be", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_netbsd.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_netbsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_netbsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_netbsd.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-unknown-netbsd\".to_string(),"}, {"sha": "28d9801b78cb581cf835339b45c39171c6666234", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_none_hermitkernel.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_none_hermitkernel.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_none_hermitkernel.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_none_hermitkernel.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -7,7 +7,8 @@ pub fn target() -> Target {\n     base.features =\n         \"-mmx,-sse,-sse2,-sse3,-ssse3,-sse4.1,-sse4.2,-3dnow,-3dnowa,-avx,-avx2,+soft-float\"\n             .to_string();\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-unknown-none-elf\".to_string(),"}, {"sha": "4eb3f34a036142e1368637235f09e443b7d92b2f", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_openbsd.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_openbsd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_openbsd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_openbsd.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-unknown-openbsd\".to_string(),"}, {"sha": "b8269ecae20bbaefee34ba49c073e47512621e25", "filename": "compiler/rustc_target/src/spec/x86_64_unknown_redox.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_redox.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_redox.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_unknown_redox.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n \n     Target {\n         llvm_target: \"x86_64-unknown-redox\".to_string(),"}, {"sha": "f9f775084fb417845d454989132a8a350ebf8005", "filename": "compiler/rustc_target/src/spec/x86_64_wrs_vxworks.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_wrs_vxworks.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_wrs_vxworks.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fx86_64_wrs_vxworks.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -5,7 +5,8 @@ pub fn target() -> Target {\n     base.cpu = \"x86-64\".to_string();\n     base.max_atomic_width = Some(64);\n     base.pre_link_args.entry(LinkerFlavor::Gcc).or_default().push(\"-m64\".to_string());\n-    base.stack_probes = StackProbeType::InlineOrCall { min_llvm_version_for_inline: (11, 0, 1) };\n+    // don't use probe-stack=inline-asm until rust#83139 and rust#84667 are resolved\n+    base.stack_probes = StackProbeType::Call;\n     base.disable_redzone = true;\n \n     Target {"}, {"sha": "9597e242f1b0f6b743a800e932f3975b7c000c18", "filename": "src/test/assembly/stack-probes.rs", "status": "removed", "additions": 0, "deletions": 42, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/18587b14d1d820d31151d5c0a633621a67149e78/src%2Ftest%2Fassembly%2Fstack-probes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18587b14d1d820d31151d5c0a633621a67149e78/src%2Ftest%2Fassembly%2Fstack-probes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fstack-probes.rs?ref=18587b14d1d820d31151d5c0a633621a67149e78", "patch": "@@ -1,42 +0,0 @@\n-// min-llvm-version: 11.0.1\n-// revisions: x86_64 i686\n-// assembly-output: emit-asm\n-//[x86_64] compile-flags: --target x86_64-unknown-linux-gnu\n-//[i686] compile-flags: --target i686-unknown-linux-gnu\n-// compile-flags: -C llvm-args=--x86-asm-syntax=intel\n-\n-#![feature(no_core, lang_items)]\n-#![crate_type = \"lib\"]\n-#![no_core]\n-\n-#[lang = \"sized\"]\n-trait Sized {}\n-#[lang = \"copy\"]\n-trait Copy {}\n-\n-impl Copy for u8 {}\n-\n-// Check that inline-asm stack probes are generated correctly.\n-// To avoid making this test fragile to slight asm changes,\n-// we only check that the stack pointer is decremented by a page at a time,\n-// instead of matching the whole probe sequence.\n-\n-// CHECK-LABEL: small_stack_probe:\n-#[no_mangle]\n-pub fn small_stack_probe(x: u8, f: fn([u8; 8192])) {\n-    // CHECK-NOT: __rust_probestack\n-    // x86_64: sub rsp, 4096\n-    // i686: sub esp, 4096\n-    let a = [x; 8192];\n-    f(a);\n-}\n-\n-// CHECK-LABEL: big_stack_probe:\n-#[no_mangle]\n-pub fn big_stack_probe(x: u8, f: fn([u8; 65536])) {\n-    // CHECK-NOT: __rust_probestack\n-    // x86_64: sub rsp, 4096\n-    // i686: sub esp, 4096\n-    let a = [x; 65536];\n-    f(a);\n-}"}, {"sha": "9bd351df3eaa069d45a1356c1582fc2b638382de", "filename": "src/test/codegen/stack-probes.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/478a07df05e3fe8df964291d8b25dd80b7e0e76b/src%2Ftest%2Fcodegen%2Fstack-probes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/478a07df05e3fe8df964291d8b25dd80b7e0e76b/src%2Ftest%2Fcodegen%2Fstack-probes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fstack-probes.rs?ref=478a07df05e3fe8df964291d8b25dd80b7e0e76b", "patch": "@@ -13,12 +13,10 @@\n // ignore-emscripten\n // ignore-windows\n // compile-flags: -C no-prepopulate-passes\n-// min-llvm-version: 11.0.1\n \n #![crate_type = \"lib\"]\n \n #[no_mangle]\n pub fn foo() {\n // CHECK: @foo() unnamed_addr #0\n-// CHECK: attributes #0 = { {{.*}}\"probe-stack\"=\"inline-asm\"{{.*}} }\n }"}]}