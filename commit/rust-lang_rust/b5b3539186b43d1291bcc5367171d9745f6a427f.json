{"sha": "b5b3539186b43d1291bcc5367171d9745f6a427f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI1YjM1MzkxODZiNDNkMTI5MWJjYzUzNjcxNzFkOTc0NWY2YTQyN2Y=", "commit": {"author": {"name": "Nick Massey", "email": "nickmass@nickmass.com", "date": "2016-08-04T21:35:43Z"}, "committer": {"name": "Nick Massey", "email": "nickmass@nickmass.com", "date": "2016-08-04T21:35:43Z"}, "message": "Update compiler error E0055 to use new error format", "tree": {"sha": "fd3abe90f7bc676b4b8f8ccb18773435195208d3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fd3abe90f7bc676b4b8f8ccb18773435195208d3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b5b3539186b43d1291bcc5367171d9745f6a427f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b5b3539186b43d1291bcc5367171d9745f6a427f", "html_url": "https://github.com/rust-lang/rust/commit/b5b3539186b43d1291bcc5367171d9745f6a427f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b5b3539186b43d1291bcc5367171d9745f6a427f/comments", "author": {"login": "nickmass", "id": 1085568, "node_id": "MDQ6VXNlcjEwODU1Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/1085568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickmass", "html_url": "https://github.com/nickmass", "followers_url": "https://api.github.com/users/nickmass/followers", "following_url": "https://api.github.com/users/nickmass/following{/other_user}", "gists_url": "https://api.github.com/users/nickmass/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickmass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickmass/subscriptions", "organizations_url": "https://api.github.com/users/nickmass/orgs", "repos_url": "https://api.github.com/users/nickmass/repos", "events_url": "https://api.github.com/users/nickmass/events{/privacy}", "received_events_url": "https://api.github.com/users/nickmass/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nickmass", "id": 1085568, "node_id": "MDQ6VXNlcjEwODU1Njg=", "avatar_url": "https://avatars.githubusercontent.com/u/1085568?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nickmass", "html_url": "https://github.com/nickmass", "followers_url": "https://api.github.com/users/nickmass/followers", "following_url": "https://api.github.com/users/nickmass/following{/other_user}", "gists_url": "https://api.github.com/users/nickmass/gists{/gist_id}", "starred_url": "https://api.github.com/users/nickmass/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nickmass/subscriptions", "organizations_url": "https://api.github.com/users/nickmass/orgs", "repos_url": "https://api.github.com/users/nickmass/repos", "events_url": "https://api.github.com/users/nickmass/events{/privacy}", "received_events_url": "https://api.github.com/users/nickmass/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e804a3cf256106c097d44f6e0212cd183122da07", "url": "https://api.github.com/repos/rust-lang/rust/commits/e804a3cf256106c097d44f6e0212cd183122da07", "html_url": "https://github.com/rust-lang/rust/commit/e804a3cf256106c097d44f6e0212cd183122da07"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "265422468fe2a1c4a18b6ca9f790f005d2f539d5", "filename": "src/librustc_typeck/check/autoderef.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b5b3539186b43d1291bcc5367171d9745f6a427f/src%2Flibrustc_typeck%2Fcheck%2Fautoderef.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5b3539186b43d1291bcc5367171d9745f6a427f/src%2Flibrustc_typeck%2Fcheck%2Fautoderef.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fautoderef.rs?ref=b5b3539186b43d1291bcc5367171d9745f6a427f", "patch": "@@ -54,9 +54,11 @@ impl<'a, 'gcx, 'tcx> Iterator for Autoderef<'a, 'gcx, 'tcx> {\n \n         if self.steps.len() == tcx.sess.recursion_limit.get() {\n             // We've reached the recursion limit, error gracefully.\n-            span_err!(tcx.sess, self.span, E0055,\n+            struct_span_err!(tcx.sess, self.span, E0055,\n                       \"reached the recursion limit while auto-dereferencing {:?}\",\n-                      self.cur_ty);\n+                      self.cur_ty)\n+                      .span_label(self.span, &format!(\"deref recursion limit reached\"))\n+                      .emit();\n             return None;\n         }\n "}, {"sha": "2b2d278ad4cc63eb6f93cb47ecc215e3557d38ce", "filename": "src/test/compile-fail/E0055.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b5b3539186b43d1291bcc5367171d9745f6a427f/src%2Ftest%2Fcompile-fail%2FE0055.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b5b3539186b43d1291bcc5367171d9745f6a427f/src%2Ftest%2Fcompile-fail%2FE0055.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0055.rs?ref=b5b3539186b43d1291bcc5367171d9745f6a427f", "patch": "@@ -18,5 +18,7 @@ impl Foo {\n fn main() {\n     let foo = Foo;\n     let ref_foo = &&Foo;\n-    ref_foo.foo(); //~ ERROR E0055\n+    ref_foo.foo();\n+    //~^ ERROR E0055\n+    //~| NOTE deref recursion limit reached\n }"}]}