{"sha": "1b98f6da7af8cea31066588776b7190c511455b1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiOThmNmRhN2FmOGNlYTMxMDY2NTg4Nzc2YjcxOTBjNTExNDU1YjE=", "commit": {"author": {"name": "Alexis Beingessner", "email": "a.beingessner@gmail.com", "date": "2015-03-20T17:43:01Z"}, "committer": {"name": "Alexis", "email": "a.beingessner@gmail.com", "date": "2015-03-27T11:42:03Z"}, "message": "default => or_insert per RFC", "tree": {"sha": "59e9a6e2b8803eea091517ba75cfea54e59faa6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/59e9a6e2b8803eea091517ba75cfea54e59faa6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b98f6da7af8cea31066588776b7190c511455b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b98f6da7af8cea31066588776b7190c511455b1", "html_url": "https://github.com/rust-lang/rust/commit/1b98f6da7af8cea31066588776b7190c511455b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b98f6da7af8cea31066588776b7190c511455b1/comments", "author": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Gankra", "id": 1136864, "node_id": "MDQ6VXNlcjExMzY4NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1136864?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Gankra", "html_url": "https://github.com/Gankra", "followers_url": "https://api.github.com/users/Gankra/followers", "following_url": "https://api.github.com/users/Gankra/following{/other_user}", "gists_url": "https://api.github.com/users/Gankra/gists{/gist_id}", "starred_url": "https://api.github.com/users/Gankra/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Gankra/subscriptions", "organizations_url": "https://api.github.com/users/Gankra/orgs", "repos_url": "https://api.github.com/users/Gankra/repos", "events_url": "https://api.github.com/users/Gankra/events{/privacy}", "received_events_url": "https://api.github.com/users/Gankra/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "93cdf1f2783e3a863929a5ef2032e7de752e4e40", "url": "https://api.github.com/repos/rust-lang/rust/commits/93cdf1f2783e3a863929a5ef2032e7de752e4e40", "html_url": "https://github.com/rust-lang/rust/commit/93cdf1f2783e3a863929a5ef2032e7de752e4e40"}], "stats": {"total": 65, "additions": 31, "deletions": 34}, "files": [{"sha": "04a692cc3aea2b59d63675bb648ddcd900418d4b", "filename": "src/libcollections/btree/map.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibcollections%2Fbtree%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibcollections%2Fbtree%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fbtree%2Fmap.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -1146,7 +1146,7 @@ impl<'a, K: Ord, V> Entry<'a, K, V> {\n     #[unstable(feature = \"std_misc\",\n                reason = \"will soon be replaced by or_insert\")]\n     #[deprecated(since = \"1.0\",\n-                reason = \"replaced with more ergonomic `default` and `default_with`\")]\n+                reason = \"replaced with more ergonomic `or_insert` and `or_insert_with`\")]\n     /// Returns a mutable reference to the entry if occupied, or the VacantEntry if vacant\n     pub fn get(self) -> Result<&'a mut V, VacantEntry<'a, K, V>> {\n         match self {\n@@ -1159,7 +1159,7 @@ impl<'a, K: Ord, V> Entry<'a, K, V> {\n                reason = \"matches entry v3 specification, waiting for dust to settle\")]\n     /// Ensures a value is in the entry by inserting the default if empty, and returns\n     /// a mutable reference to the value in the entry.\n-    pub fn default(self, default: V) -> &'a mut V {\n+    pub fn or_insert(self, default: V) -> &'a mut V {\n         match self {\n             Occupied(entry) => entry.into_mut(),\n             Vacant(entry) => entry.insert(default),\n@@ -1170,7 +1170,7 @@ impl<'a, K: Ord, V> Entry<'a, K, V> {\n                reason = \"matches entry v3 specification, waiting for dust to settle\")]\n     /// Ensures a value is in the entry by inserting the result of the default function if empty,\n     /// and returns a mutable reference to the value in the entry.\n-    pub fn default_with<F: FnOnce() -> V>(self, default: F) -> &'a mut V {\n+    pub fn or_insert_with<F: FnOnce() -> V>(self, default: F) -> &'a mut V {\n         match self {\n             Occupied(entry) => entry.into_mut(),\n             Vacant(entry) => entry.insert(default()),\n@@ -1592,7 +1592,7 @@ impl<K: Ord, V> BTreeMap<K, V> {\n     ///\n     /// // count the number of occurrences of letters in the vec\n     /// for x in vec![\"a\",\"b\",\"a\",\"c\",\"a\",\"b\"] {\n-    ///     *count.entry(x).default(0) += 1;\n+    ///     *count.entry(x).or_insert(0) += 1;\n     /// }\n     ///\n     /// assert_eq!(count[\"a\"], 3);"}, {"sha": "58f9101d1d366046597aa756dcc5ab7eafc19f39", "filename": "src/libcollections/vec_map.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibcollections%2Fvec_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibcollections%2Fvec_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fvec_map.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -637,7 +637,7 @@ impl<V> VecMap<V> {\n     ///\n     /// // count the number of occurrences of numbers in the vec\n     /// for x in vec![1, 2, 1, 2, 3, 4, 1, 2, 4] {\n-    ///     *count.entry(x).default(0) += 1;\n+    ///     *count.entry(x).or_insert(0) += 1;\n     /// }\n     ///\n     /// assert_eq!(count[1], 3);\n@@ -667,7 +667,7 @@ impl<'a, V> Entry<'a, V> {\n     #[unstable(feature = \"collections\",\n                reason = \"will soon be replaced by or_insert\")]\n     #[deprecated(since = \"1.0\",\n-                reason = \"replaced with more ergonomic `default` and `default_with`\")]\n+                reason = \"replaced with more ergonomic `or_insert` and `or_insert_with`\")]\n     /// Returns a mutable reference to the entry if occupied, or the VacantEntry if vacant\n     pub fn get(self) -> Result<&'a mut V, VacantEntry<'a, V>> {\n         match self {\n@@ -680,7 +680,7 @@ impl<'a, V> Entry<'a, V> {\n                reason = \"matches entry v3 specification, waiting for dust to settle\")]\n     /// Ensures a value is in the entry by inserting the default if empty, and returns\n     /// a mutable reference to the value in the entry.\n-    pub fn default(self, default: V) -> &'a mut V {\n+    pub fn or_insert(self, default: V) -> &'a mut V {\n         match self {\n             Occupied(entry) => entry.into_mut(),\n             Vacant(entry) => entry.insert(default),\n@@ -691,7 +691,7 @@ impl<'a, V> Entry<'a, V> {\n                reason = \"matches entry v3 specification, waiting for dust to settle\")]\n     /// Ensures a value is in the entry by inserting the result of the default function if empty,\n     /// and returns a mutable reference to the value in the entry.\n-    pub fn default_with<F: FnOnce() -> V>(self, default: F) -> &'a mut V {\n+    pub fn or_insert_with<F: FnOnce() -> V>(self, default: F) -> &'a mut V {\n         match self {\n             Occupied(entry) => entry.into_mut(),\n             Vacant(entry) => entry.insert(default()),"}, {"sha": "80fc3769453427f4815464ccbca410dd2c4129d4", "filename": "src/librustc/metadata/loader.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmetadata%2Floader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmetadata%2Floader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmetadata%2Floader.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -426,7 +426,8 @@ impl<'a> Context<'a> {\n             info!(\"lib candidate: {}\", path.display());\n \n             let hash_str = hash.to_string();\n-            let slot = candidates.entry(hash_str).default_with(|| (HashMap::new(), HashMap::new()));\n+            let slot = candidates.entry(hash_str)\n+                                 .or_insert_with(|| (HashMap::new(), HashMap::new()));\n             let (ref mut rlibs, ref mut dylibs) = *slot;\n             if rlib {\n                 rlibs.insert(fs::realpath(path).unwrap(), kind);"}, {"sha": "0d58fd2702f680e692933464c594e232ec1d1188", "filename": "src/librustc/middle/dataflow.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmiddle%2Fdataflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmiddle%2Fdataflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fdataflow.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -160,7 +160,7 @@ fn build_nodeid_to_index(decl: Option<&ast::FnDecl>,\n \n     cfg.graph.each_node(|node_idx, node| {\n         if let cfg::CFGNodeData::AST(id) = node.data {\n-            index.entry(id).default(vec![]).push(node_idx);\n+            index.entry(id).or_insert(vec![]).push(node_idx);\n         }\n         true\n     });\n@@ -180,7 +180,7 @@ fn build_nodeid_to_index(decl: Option<&ast::FnDecl>,\n         visit::walk_fn_decl(&mut formals, decl);\n         impl<'a, 'v> visit::Visitor<'v> for Formals<'a> {\n             fn visit_pat(&mut self, p: &ast::Pat) {\n-                self.index.entry(p.id).default(vec![]).push(self.entry);\n+                self.index.entry(p.id).or_insert(vec![]).push(self.entry);\n                 visit::walk_pat(self, p)\n             }\n         }"}, {"sha": "3d46f93914a589c53d21354b1aeff8fde7c63deb", "filename": "src/librustc/middle/traits/fulfill.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmiddle%2Ftraits%2Ffulfill.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmiddle%2Ftraits%2Ffulfill.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftraits%2Ffulfill.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -436,7 +436,7 @@ fn register_region_obligation<'tcx>(tcx: &ty::ctxt<'tcx>,\n     debug!(\"register_region_obligation({})\",\n            region_obligation.repr(tcx));\n \n-    region_obligations.entry(region_obligation.cause.body_id).default(vec![])\n+    region_obligations.entry(region_obligation.cause.body_id).or_insert(vec![])\n         .push(region_obligation);\n \n }"}, {"sha": "23fba5ead22598df14a75fa8eced8f960053ed28", "filename": "src/librustc/middle/ty.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmiddle%2Fty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fmiddle%2Fty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fty.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -5669,7 +5669,7 @@ pub fn lookup_field_type<'tcx>(tcx: &ctxt<'tcx>,\n         node_id_to_type(tcx, id.node)\n     } else {\n         let mut tcache = tcx.tcache.borrow_mut();\n-        tcache.entry(id).default_with(|| csearch::get_field_type(tcx, struct_id, id)).ty\n+        tcache.entry(id).or_insert_with(|| csearch::get_field_type(tcx, struct_id, id)).ty\n     };\n     ty.subst(tcx, substs)\n }\n@@ -6817,7 +6817,7 @@ pub fn replace_late_bound_regions<'tcx, T, F>(\n         debug!(\"region={}\", region.repr(tcx));\n         match region {\n             ty::ReLateBound(debruijn, br) if debruijn.depth == current_depth => {\n-                let region = *map.entry(br).default_with(|| mapf(br));\n+                let region = *map.entry(br).or_insert_with(|| mapf(br));\n \n                 if let ty::ReLateBound(debruijn1, br) = region {\n                     // If the callback returns a late-bound region,"}, {"sha": "931cfc7999281cecd767328b1b6a47126f958d47", "filename": "src/librustc/session/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fsession%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc%2Fsession%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fsession%2Fconfig.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -1036,7 +1036,7 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n             None => early_error(\"--extern value must be of the format `foo=bar`\"),\n         };\n \n-        externs.entry(name.to_string()).default(vec![]).push(location.to_string());\n+        externs.entry(name.to_string()).or_insert(vec![]).push(location.to_string());\n     }\n \n     let crate_name = matches.opt_str(\"crate-name\");"}, {"sha": "5bf561c218d044365f88de58687a99b0a078a6ac", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -26,7 +26,6 @@\n #![feature(rustc_diagnostic_macros)]\n #![feature(rustc_private)]\n #![feature(staged_api)]\n-#![feature(std_misc)]\n \n #[macro_use] extern crate log;\n #[macro_use] extern crate syntax;"}, {"sha": "662b5a366431ca785460742cc0775e2fb0ca6f42", "filename": "src/librustc_resolve/resolve_imports.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc_resolve%2Fresolve_imports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc_resolve%2Fresolve_imports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Fresolve_imports.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -836,11 +836,8 @@ impl<'a, 'b:'a, 'tcx:'b> ImportResolver<'a, 'b, 'tcx> {\n         let is_public = import_directive.is_public;\n \n         let mut import_resolutions = module_.import_resolutions.borrow_mut();\n-        let dest_import_resolution = import_resolutions.entry(name).get().unwrap_or_else(\n-            |vacant_entry| {\n-                // Create a new import resolution from this child.\n-                vacant_entry.insert(ImportResolution::new(id, is_public))\n-            });\n+        let dest_import_resolution = import_resolutions.entry(name)\n+            .or_insert_with(|| ImportResolution::new(id, is_public));\n \n         debug!(\"(resolving glob import) writing resolution `{}` in `{}` \\\n                to `{}`\","}, {"sha": "0f9836bc0734606cd504c05f52229fe9010f5ab5", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -1361,7 +1361,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                                        closure_def_id: ast::DefId,\n                                        r: DeferredCallResolutionHandler<'tcx>) {\n         let mut deferred_call_resolutions = self.inh.deferred_call_resolutions.borrow_mut();\n-        deferred_call_resolutions.entry(closure_def_id).default(vec![]).push(r);\n+        deferred_call_resolutions.entry(closure_def_id).or_insert(vec![]).push(r);\n     }\n \n     fn remove_deferred_call_resolutions(&self,"}, {"sha": "d36124247945bf936f473641e49f704e82a0c7e7", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -876,7 +876,7 @@ impl DocFolder for Cache {\n         if let clean::ImplItem(ref i) = item.inner {\n             match i.trait_ {\n                 Some(clean::ResolvedPath{ did, .. }) => {\n-                    self.implementors.entry(did).default(vec![]).push(Implementor {\n+                    self.implementors.entry(did).or_insert(vec![]).push(Implementor {\n                         def_id: item.def_id,\n                         generics: i.generics.clone(),\n                         trait_: i.trait_.as_ref().unwrap().clone(),\n@@ -1078,7 +1078,7 @@ impl DocFolder for Cache {\n                         };\n \n                         if let Some(did) = did {\n-                            self.impls.entry(did).default(vec![]).push(Impl {\n+                            self.impls.entry(did).or_insert(vec![]).push(Impl {\n                                 impl_: i,\n                                 dox: dox,\n                                 stability: item.stability.clone(),\n@@ -1330,7 +1330,7 @@ impl Context {\n                 Some(ref s) => s.to_string(),\n             };\n             let short = short.to_string();\n-            map.entry(short).default(vec![])\n+            map.entry(short).or_insert(vec![])\n                 .push((myname, Some(plain_summary_line(item.doc_value()))));\n         }\n "}, {"sha": "a85f770f63ca49fceaea83886ab68397ee181985", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -352,7 +352,7 @@ fn parse_externs(matches: &getopts::Matches) -> Result<core::Externs, String> {\n             }\n         };\n         let name = name.to_string();\n-        externs.entry(name).default(vec![]).push(location.to_string());\n+        externs.entry(name).or_insert(vec![]).push(location.to_string());\n     }\n     Ok(externs)\n }"}, {"sha": "91225891338a58a42dc19542377103de57ff457f", "filename": "src/libstd/collections/hash/map.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Fmap.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -1489,7 +1489,8 @@ impl<'a, K, V> Entry<'a, K, V> {\n     #[unstable(feature = \"std_misc\",\n                reason = \"will soon be replaced by or_insert\")]\n     #[deprecated(since = \"1.0\",\n-                reason = \"replaced with more ergonomic `default` and `default_with`\")]\n+                reason = \"replaced with more ergonomic `or_insert` and `or_insert_with`\")]\n+    /// Returns a mutable reference to the entry if occupied, or the VacantEntry if vacant\n     pub fn get(self) -> Result<&'a mut V, VacantEntry<'a, K, V>> {\n         match self {\n             Occupied(entry) => Ok(entry.into_mut()),\n@@ -1501,7 +1502,7 @@ impl<'a, K, V> Entry<'a, K, V> {\n                reason = \"matches entry v3 specification, waiting for dust to settle\")]\n     /// Ensures a value is in the entry by inserting the default if empty, and returns\n     /// a mutable reference to the value in the entry.\n-    pub fn default(self, default: V) -> &'a mut V {\n+    pub fn or_insert(self, default: V) -> &'a mut V {\n         match self {\n             Occupied(entry) => entry.into_mut(),\n             Vacant(entry) => entry.insert(default),\n@@ -1512,7 +1513,7 @@ impl<'a, K, V> Entry<'a, K, V> {\n                reason = \"matches entry v3 specification, waiting for dust to settle\")]\n     /// Ensures a value is in the entry by inserting the result of the default function if empty,\n     /// and returns a mutable reference to the value in the entry.\n-    pub fn default_with<F: FnOnce() -> V>(self, default: F) -> &'a mut V {\n+    pub fn or_insert_with<F: FnOnce() -> V>(self, default: F) -> &'a mut V {\n         match self {\n             Occupied(entry) => entry.into_mut(),\n             Vacant(entry) => entry.insert(default()),"}, {"sha": "0ac97b71298b85df6c737c6bec041bb512522544", "filename": "src/libstd/collections/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibstd%2Fcollections%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibstd%2Fcollections%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fmod.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -307,7 +307,7 @@\n //! let message = \"she sells sea shells by the sea shore\";\n //!\n //! for c in message.chars() {\n-//!     *count.entry(c).default(0) += 1;\n+//!     *count.entry(c).or_insert(0) += 1;\n //! }\n //!\n //! assert_eq!(count.get(&'s'), Some(&8));\n@@ -340,7 +340,7 @@\n //! for id in orders.into_iter() {\n //!     // If this is the first time we've seen this customer, initialize them\n //!     // with no blood alcohol. Otherwise, just retrieve them.\n-//!     let person = blood_alcohol.entry(id).default(Person{id: id, blood_alcohol: 0.0});\n+//!     let person = blood_alcohol.entry(id).or_insert(Person{id: id, blood_alcohol: 0.0});\n //!\n //!     // Reduce their blood alcohol level. It takes time to order and drink a beer!\n //!     person.blood_alcohol *= 0.9;"}, {"sha": "a2023d6832efbce2fe48cf33ed7e85962fc9c431", "filename": "src/libsyntax/ext/mtwt.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibsyntax%2Fext%2Fmtwt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibsyntax%2Fext%2Fmtwt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fmtwt.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -67,7 +67,7 @@ pub fn apply_mark(m: Mrk, ctxt: SyntaxContext) -> SyntaxContext {\n fn apply_mark_internal(m: Mrk, ctxt: SyntaxContext, table: &SCTable) -> SyntaxContext {\n     let key = (ctxt, m);\n     * table.mark_memo.borrow_mut().entry(key)\n-        .default_with(|| idx_push(&mut *table.table.borrow_mut(), Mark(m, ctxt)))\n+        .or_insert_with(|| idx_push(&mut *table.table.borrow_mut(), Mark(m, ctxt)))\n }\n \n /// Extend a syntax context with a given rename\n@@ -84,7 +84,7 @@ fn apply_rename_internal(id: Ident,\n     let key = (ctxt, id, to);\n \n     * table.rename_memo.borrow_mut().entry(key)\n-        .default_with(|| idx_push(&mut *table.table.borrow_mut(), Rename(id, to, ctxt)))\n+        .or_insert_with(|| idx_push(&mut *table.table.borrow_mut(), Rename(id, to, ctxt)))\n }\n \n /// Apply a list of renamings to a context"}, {"sha": "72498afa3201e7c9383c46edd05ca78ded6d5bb3", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b98f6da7af8cea31066588776b7190c511455b1/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=1b98f6da7af8cea31066588776b7190c511455b1", "patch": "@@ -35,7 +35,6 @@\n #![feature(quote, unsafe_destructor)]\n #![feature(rustc_private)]\n #![feature(staged_api)]\n-#![feature(std_misc)]\n #![feature(unicode)]\n #![feature(path_ext)]\n #![feature(str_char)]"}]}