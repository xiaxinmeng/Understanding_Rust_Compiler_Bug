{"sha": "d275739c09f266479d6db388cbf55ba6ca791b9d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQyNzU3MzljMDlmMjY2NDc5ZDZkYjM4OGNiZjU1YmE2Y2E3OTFiOWQ=", "commit": {"author": {"name": "Adam Perry", "email": "lol@anp.lol", "date": "2020-06-21T14:55:04Z"}, "committer": {"name": "Adam Perry", "email": "lol@anp.lol", "date": "2020-06-30T03:58:19Z"}, "message": "Derive common traits for panic::Location.\n\nAdd documentation about the host/target behavior of Location::file.", "tree": {"sha": "6919e0d7838b579d849841f3e97ad42a26541ba8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6919e0d7838b579d849841f3e97ad42a26541ba8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d275739c09f266479d6db388cbf55ba6ca791b9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d275739c09f266479d6db388cbf55ba6ca791b9d", "html_url": "https://github.com/rust-lang/rust/commit/d275739c09f266479d6db388cbf55ba6ca791b9d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d275739c09f266479d6db388cbf55ba6ca791b9d/comments", "author": {"login": "anp", "id": 6812281, "node_id": "MDQ6VXNlcjY4MTIyODE=", "avatar_url": "https://avatars.githubusercontent.com/u/6812281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anp", "html_url": "https://github.com/anp", "followers_url": "https://api.github.com/users/anp/followers", "following_url": "https://api.github.com/users/anp/following{/other_user}", "gists_url": "https://api.github.com/users/anp/gists{/gist_id}", "starred_url": "https://api.github.com/users/anp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anp/subscriptions", "organizations_url": "https://api.github.com/users/anp/orgs", "repos_url": "https://api.github.com/users/anp/repos", "events_url": "https://api.github.com/users/anp/events{/privacy}", "received_events_url": "https://api.github.com/users/anp/received_events", "type": "User", "site_admin": false}, "committer": {"login": "anp", "id": 6812281, "node_id": "MDQ6VXNlcjY4MTIyODE=", "avatar_url": "https://avatars.githubusercontent.com/u/6812281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/anp", "html_url": "https://github.com/anp", "followers_url": "https://api.github.com/users/anp/followers", "following_url": "https://api.github.com/users/anp/following{/other_user}", "gists_url": "https://api.github.com/users/anp/gists{/gist_id}", "starred_url": "https://api.github.com/users/anp/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/anp/subscriptions", "organizations_url": "https://api.github.com/users/anp/orgs", "repos_url": "https://api.github.com/users/anp/repos", "events_url": "https://api.github.com/users/anp/events{/privacy}", "received_events_url": "https://api.github.com/users/anp/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a1528c432e45339d9b5602a19ac3571e2900d37b", "url": "https://api.github.com/repos/rust-lang/rust/commits/a1528c432e45339d9b5602a19ac3571e2900d37b", "html_url": "https://github.com/rust-lang/rust/commit/a1528c432e45339d9b5602a19ac3571e2900d37b"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "aa3625ac01953a8a57b6883294ae678f705c5c9a", "filename": "src/libcore/panic.rs", "status": "modified", "additions": 23, "deletions": 1, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d275739c09f266479d6db388cbf55ba6ca791b9d/src%2Flibcore%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d275739c09f266479d6db388cbf55ba6ca791b9d/src%2Flibcore%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fpanic.rs?ref=d275739c09f266479d6db388cbf55ba6ca791b9d", "patch": "@@ -173,8 +173,14 @@ impl fmt::Display for PanicInfo<'_> {\n ///\n /// panic!(\"Normal panic\");\n /// ```\n+///\n+/// # Comparisons\n+///\n+/// Comparisons for equality and ordering are made in file, line, then column priority. Such\n+/// comparisons can occasionally have surprising results. See [`Location::file`]'s documentation for\n+/// more discussion.\n #[lang = \"panic_location\"]\n-#[derive(Debug)]\n+#[derive(Copy, Clone, Debug, Eq, Hash, Ord, PartialEq, PartialOrd)]\n #[stable(feature = \"panic_hooks\", since = \"1.10.0\")]\n pub struct Location<'a> {\n     file: &'a str,\n@@ -252,6 +258,22 @@ impl<'a> Location<'a> {\n \n     /// Returns the name of the source file from which the panic originated.\n     ///\n+    /// # `&str`, not `&Path`\n+    ///\n+    /// The returned name refers to a source path on the compiling system, but it isn't valid to\n+    /// represent this directly as a `&Path`. The compiled code may run on a different system with\n+    /// a different `Path` implementation than the system providing the contents and this library\n+    /// does not currently have a different \"host path\" type.\n+    ///\n+    /// The most surprising behavior occurs when \"the same\" file is reachable via multiple paths in\n+    /// the module system (usually using the `#[path = \"...\"]` attribute or similar), which can\n+    /// cause what appears to be identical code to return differing values from this function.\n+    ///\n+    /// # Cross-compilation\n+    ///\n+    /// This value is not suitable for passing to `Path::new` or similar constructors when the host\n+    /// platform and target platform differ.\n+    ///\n     /// # Examples\n     ///\n     /// ```should_panic"}]}