{"sha": "152f2eade87b7930a83f9cc8da8cae08769b2faf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE1MmYyZWFkZTg3Yjc5MzBhODNmOWNjOGRhOGNhZTA4NzY5YjJmYWY=", "commit": {"author": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2012-07-10T22:55:49Z"}, "committer": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2012-07-11T16:07:06Z"}, "message": "arc.rs: make exclusive's data mutable", "tree": {"sha": "c2ec0e65530ba303e9db4d759b455c9283442e75", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c2ec0e65530ba303e9db4d759b455c9283442e75"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/152f2eade87b7930a83f9cc8da8cae08769b2faf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/152f2eade87b7930a83f9cc8da8cae08769b2faf", "html_url": "https://github.com/rust-lang/rust/commit/152f2eade87b7930a83f9cc8da8cae08769b2faf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/152f2eade87b7930a83f9cc8da8cae08769b2faf/comments", "author": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9c0b469613d58eba7d5f15625b589218fc903e66", "url": "https://api.github.com/repos/rust-lang/rust/commits/9c0b469613d58eba7d5f15625b589218fc903e66", "html_url": "https://github.com/rust-lang/rust/commit/9c0b469613d58eba7d5f15625b589218fc903e66"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "2fd03cdb7a12ba49c4a000dd088e406526dc0626", "filename": "src/libcore/arc.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/152f2eade87b7930a83f9cc8da8cae08769b2faf/src%2Flibcore%2Farc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/152f2eade87b7930a83f9cc8da8cae08769b2faf/src%2Flibcore%2Farc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Farc.rs?ref=152f2eade87b7930a83f9cc8da8cae08769b2faf", "patch": "@@ -84,7 +84,7 @@ fn clone<T: const send>(rc: &arc<T>) -> arc<T> {\n }\n \n // An arc over mutable data that is protected by a lock.\n-type ex_data<T: send> = {lock: sys::lock_and_signal, data: T};\n+type ex_data<T: send> = {lock: sys::lock_and_signal, mut data: T};\n type exclusive<T: send> = arc_destruct<ex_data<T>>;\n \n fn exclusive<T:send >(-data: T) -> exclusive<T> {\n@@ -110,12 +110,12 @@ impl methods<T: send> for exclusive<T> {\n         arc_destruct(self.data)\n     }\n \n-    unsafe fn with<U>(f: fn(sys::condition, x: &T) -> U) -> U {\n+    unsafe fn with<U>(f: fn(sys::condition, x: &mut T) -> U) -> U {\n         let ptr: ~arc_data<ex_data<T>> =\n             unsafe::reinterpret_cast(self.data);\n         let r = {\n             let rec: &ex_data<T> = &(*ptr).data;\n-            rec.lock.lock_cond(|c| f(c, &rec.data))\n+            rec.lock.lock_cond(|c| f(c, &mut rec.data))\n         };\n         unsafe::forget(ptr);\n         r"}]}