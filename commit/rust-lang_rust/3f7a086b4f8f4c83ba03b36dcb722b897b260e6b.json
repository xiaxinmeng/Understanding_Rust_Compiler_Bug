{"sha": "3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNmN2EwODZiNGY4ZjRjODNiYTAzYjM2ZGNiNzIyYjg5N2IyNjBlNmI=", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2021-04-21T09:08:15Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2021-04-21T09:08:15Z"}, "message": "Parse outer atttributes for RecordPatField", "tree": {"sha": "ec28254cd1f8bdbdca15d1f30218abe43a383abc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec28254cd1f8bdbdca15d1f30218abe43a383abc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "html_url": "https://github.com/rust-lang/rust/commit/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70fe7a4515ebdc6222a6565cd4cd1c5fd0c77350", "url": "https://api.github.com/repos/rust-lang/rust/commits/70fe7a4515ebdc6222a6565cd4cd1c5fd0c77350", "html_url": "https://github.com/rust-lang/rust/commit/70fe7a4515ebdc6222a6565cd4cd1c5fd0c77350"}], "stats": {"total": 65, "additions": 57, "deletions": 8}, "files": [{"sha": "3ab34783454de907d5c770fb5160f168f481da17", "filename": "crates/parser/src/grammar/patterns.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "patch": "@@ -206,13 +206,15 @@ fn record_pat_field_list(p: &mut Parser) {\n             T![.] if p.at(T![..]) => p.bump(T![..]),\n             T!['{'] => error_block(p, \"expected ident\"),\n \n-            c => {\n+            _ => {\n                 let m = p.start();\n-                match c {\n+                attributes::outer_attrs(p);\n+                match p.current() {\n                     // test record_pat_field\n                     // fn foo() {\n                     //     let S { 0: 1 } = ();\n                     //     let S { x: 1 } = ();\n+                    //     let S { #[cfg(any())] x: 1 } = ();\n                     // }\n                     IDENT | INT_NUMBER if p.nth(1) == T![:] => {\n                         name_ref_or_index(p);"}, {"sha": "e9202a612e6d689506b232cc149a2faf61bc85a4", "filename": "crates/syntax/test_data/parser/inline/ok/0145_record_pat_field.rast", "status": "modified", "additions": 52, "deletions": 6, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_pat_field.rast", "raw_url": "https://github.com/rust-lang/rust/raw/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_pat_field.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_pat_field.rast?ref=3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "patch": "@@ -1,5 +1,5 @@\n-SOURCE_FILE@0..63\n-  FN@0..62\n+SOURCE_FILE@0..102\n+  FN@0..101\n     FN_KW@0..2 \"fn\"\n     WHITESPACE@2..3 \" \"\n     NAME@3..6\n@@ -8,7 +8,7 @@ SOURCE_FILE@0..63\n       L_PAREN@6..7 \"(\"\n       R_PAREN@7..8 \")\"\n     WHITESPACE@8..9 \" \"\n-    BLOCK_EXPR@9..62\n+    BLOCK_EXPR@9..101\n       L_CURLY@9..10 \"{\"\n       WHITESPACE@10..15 \"\\n    \"\n       LET_STMT@15..35\n@@ -70,6 +70,52 @@ SOURCE_FILE@0..63\n           L_PAREN@57..58 \"(\"\n           R_PAREN@58..59 \")\"\n         SEMICOLON@59..60 \";\"\n-      WHITESPACE@60..61 \"\\n\"\n-      R_CURLY@61..62 \"}\"\n-  WHITESPACE@62..63 \"\\n\"\n+      WHITESPACE@60..65 \"\\n    \"\n+      LET_STMT@65..99\n+        LET_KW@65..68 \"let\"\n+        WHITESPACE@68..69 \" \"\n+        RECORD_PAT@69..93\n+          PATH@69..70\n+            PATH_SEGMENT@69..70\n+              NAME_REF@69..70\n+                IDENT@69..70 \"S\"\n+          WHITESPACE@70..71 \" \"\n+          RECORD_PAT_FIELD_LIST@71..93\n+            L_CURLY@71..72 \"{\"\n+            WHITESPACE@72..73 \" \"\n+            RECORD_PAT_FIELD@73..91\n+              ATTR@73..86\n+                POUND@73..74 \"#\"\n+                L_BRACK@74..75 \"[\"\n+                PATH@75..78\n+                  PATH_SEGMENT@75..78\n+                    NAME_REF@75..78\n+                      IDENT@75..78 \"cfg\"\n+                TOKEN_TREE@78..85\n+                  L_PAREN@78..79 \"(\"\n+                  IDENT@79..82 \"any\"\n+                  TOKEN_TREE@82..84\n+                    L_PAREN@82..83 \"(\"\n+                    R_PAREN@83..84 \")\"\n+                  R_PAREN@84..85 \")\"\n+                R_BRACK@85..86 \"]\"\n+              WHITESPACE@86..87 \" \"\n+              NAME_REF@87..88\n+                IDENT@87..88 \"x\"\n+              COLON@88..89 \":\"\n+              WHITESPACE@89..90 \" \"\n+              LITERAL_PAT@90..91\n+                LITERAL@90..91\n+                  INT_NUMBER@90..91 \"1\"\n+            WHITESPACE@91..92 \" \"\n+            R_CURLY@92..93 \"}\"\n+        WHITESPACE@93..94 \" \"\n+        EQ@94..95 \"=\"\n+        WHITESPACE@95..96 \" \"\n+        TUPLE_EXPR@96..98\n+          L_PAREN@96..97 \"(\"\n+          R_PAREN@97..98 \")\"\n+        SEMICOLON@98..99 \";\"\n+      WHITESPACE@99..100 \"\\n\"\n+      R_CURLY@100..101 \"}\"\n+  WHITESPACE@101..102 \"\\n\""}, {"sha": "53cfdc22dd80860585994ff6d814c528895cbd4d", "filename": "crates/syntax/test_data/parser/inline/ok/0145_record_pat_field.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_pat_field.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3f7a086b4f8f4c83ba03b36dcb722b897b260e6b/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_pat_field.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fsyntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_pat_field.rs?ref=3f7a086b4f8f4c83ba03b36dcb722b897b260e6b", "patch": "@@ -1,4 +1,5 @@\n fn foo() {\n     let S { 0: 1 } = ();\n     let S { x: 1 } = ();\n+    let S { #[cfg(any())] x: 1 } = ();\n }"}]}