{"sha": "3af9c9157e40197f404c95ddfda68114d9ef2adb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhZjljOTE1N2U0MDE5N2Y0MDRjOTVkZGZkYTY4MTE0ZDllZjJhZGI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-06-22T09:11:45Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2021-06-22T09:11:45Z"}, "message": "Update browser-ui-test version", "tree": {"sha": "b92c33318ed836546212911ab93a36e62b25a192", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b92c33318ed836546212911ab93a36e62b25a192"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3af9c9157e40197f404c95ddfda68114d9ef2adb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3af9c9157e40197f404c95ddfda68114d9ef2adb", "html_url": "https://github.com/rust-lang/rust/commit/3af9c9157e40197f404c95ddfda68114d9ef2adb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3af9c9157e40197f404c95ddfda68114d9ef2adb/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9d93819fa7ae40376ac1f563a858d2ba5f3b0277", "url": "https://api.github.com/repos/rust-lang/rust/commits/9d93819fa7ae40376ac1f563a858d2ba5f3b0277", "html_url": "https://github.com/rust-lang/rust/commit/9d93819fa7ae40376ac1f563a858d2ba5f3b0277"}], "stats": {"total": 80, "additions": 40, "deletions": 40}, "files": [{"sha": "35d274da673b8245a6abdc6b2f6eb07692cb8065", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/Dockerfile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2FDockerfile?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -71,7 +71,7 @@ ENV PATH=\"/node-v14.4.0-linux-x64/bin:${PATH}\"\n # https://github.com/puppeteer/puppeteer/issues/375\n #\n # We also specify the version in case we need to update it to go around cache limitations.\n-RUN npm install -g browser-ui-test@0.3.0 --unsafe-perm=true\n+RUN npm install -g browser-ui-test@0.4.0 --unsafe-perm=true\n \n ENV RUST_CONFIGURE_ARGS \\\n   --build=x86_64-unknown-linux-gnu \\"}, {"sha": "5cf8a5e136ef79cfd47dc094264838b4c6c2c075", "filename": "src/test/rustdoc-gui/escape-key.goml", "status": "modified", "additions": 13, "deletions": 13, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fescape-key.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -2,25 +2,25 @@ goto: file://|DOC_PATH|/test_docs/index.html\n // First, we check that the search results are hidden when the Escape key is pressed.\n write: (\".search-input\", \"test\")\n wait-for: \"#search > h1\" // The search element is empty before the first search \n-assert-attr: (\"#search\", {\"class\": \"content\"})\n-assert-attr: (\"#main\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#search\", {\"class\": \"content\"})\n+assert-attribute: (\"#main\", {\"class\": \"content hidden\"})\n press-key: \"Escape\"\n-assert-attr: (\"#search\", {\"class\": \"content hidden\"})\n-assert-attr: (\"#main\", {\"class\": \"content\"})\n+assert-attribute: (\"#search\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#main\", {\"class\": \"content\"})\n \n // Check that focusing the search input brings back the search results\n focus: \".search-input\"\n-assert-attr: (\"#search\", {\"class\": \"content\"})\n-assert-attr: (\"#main\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#search\", {\"class\": \"content\"})\n+assert-attribute: (\"#main\", {\"class\": \"content hidden\"})\n \n // Now let's check that when the help popup is displayed and we press Escape, it doesn't\n // hide the search results too.\n click: \"#help-button\"\n-assert-attr: (\"#help\", {\"class\": \"\"})\n+assert-attribute: (\"#help\", {\"class\": \"\"})\n press-key: \"Escape\"\n-assert-attr: (\"#help\", {\"class\": \"hidden\"})\n-assert-attr: (\"#search\", {\"class\": \"content\"})\n-assert-attr: (\"#main\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#help\", {\"class\": \"hidden\"})\n+assert-attribute: (\"#search\", {\"class\": \"content\"})\n+assert-attribute: (\"#main\", {\"class\": \"content hidden\"})\n \n // Check that Escape hides the search results when a search result is focused.\n focus: \".search-input\"\n@@ -29,6 +29,6 @@ press-key: \"ArrowDown\"\n assert-false: \".search-input:focus\"\n assert: \"#results a:focus\"\n press-key: \"Escape\"\n-assert-attr: (\"#help\", {\"class\": \"hidden\"})\n-assert-attr: (\"#search\", {\"class\": \"content hidden\"})\n-assert-attr: (\"#main\", {\"class\": \"content\"})\n+assert-attribute: (\"#help\", {\"class\": \"hidden\"})\n+assert-attribute: (\"#search\", {\"class\": \"content hidden\"})\n+assert-attribute: (\"#main\", {\"class\": \"content\"})"}, {"sha": "42bc1c100200528470d64421501565a08012e49d", "filename": "src/test/rustdoc-gui/hash-item-expansion.goml", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fhash-item-expansion.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -1,15 +1,15 @@\n // This test ensures that the element corresponding to the hash is displayed.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html#method.borrow\n // In the blanket implementations list, \"Borrow\" is the second one, hence the \":nth(2)\".\n-assert-attr: (\"#blanket-implementations-list > details:nth-child(2)\", {\"open\": \"\"})\n+assert-attribute: (\"#blanket-implementations-list > details:nth-child(2)\", {\"open\": \"\"})\n // We first check that the impl block is open by default.\n-assert-attr: (\"#implementations + details\", {\"open\": \"\"})\n+assert-attribute: (\"#implementations + details\", {\"open\": \"\"})\n // We collapse it.\n click: \"#implementations + details > summary\"\n // We check that it was collapsed as expected.\n-assert-attr-false: (\"#implementations + details\", {\"open\": \"\"})\n+assert-attribute-false: (\"#implementations + details\", {\"open\": \"\"})\n // To ensure that we will click on the currently hidden method.\n assert-text: (\".sidebar-links > a\", \"must_use\")\n click: \".sidebar-links > a\"\n // We check that the impl block was opened as expected so that we can see the method.\n-assert-attr: (\"#implementations + details\", {\"open\": \"\"})\n+assert-attribute: (\"#implementations + details\", {\"open\": \"\"})"}, {"sha": "b268ec68d42e3b42e612a6e11d55784a690d0599", "filename": "src/test/rustdoc-gui/impl-default-expansion.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimpl-default-expansion.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -1,3 +1,3 @@\n // This test ensures that the impl blocks are open by default.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n-assert-attr: (\"#main > details.implementors-toggle\", {\"open\": \"\"})\n+assert-attribute: (\"#main > details.implementors-toggle\", {\"open\": \"\"})"}, {"sha": "a61ec672ae6e6ed68fd43c3a1aa0bf61d2dd43fa", "filename": "src/test/rustdoc-gui/search-tab-selection-if-current-is-empty.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsearch-tab-selection-if-current-is-empty.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -2,20 +2,20 @@ goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"Foo\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n-assert-attr: (\"#titles > button:nth-of-type(1)\", {\"class\": \"selected\"})\n+assert-attribute: (\"#titles > button:nth-of-type(1)\", {\"class\": \"selected\"})\n \n // To go back to the original \"state\"\n goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"-> String\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n // With this search, only the last tab shouldn't be empty so it should be selected.\n-assert-attr: (\"#titles > button:nth-of-type(3)\", {\"class\": \"selected\"})\n+assert-attribute: (\"#titles > button:nth-of-type(3)\", {\"class\": \"selected\"})\n \n // To go back to the original \"state\"\n goto: file://|DOC_PATH|/test_docs/index.html\n write: (\".search-input\", \"-> Something\")\n // Waiting for the search results to appear...\n wait-for: \"#titles\"\n // With this search, all the tabs are empty so the first one should remain selected.\n-assert-attr: (\"#titles > button:nth-of-type(1)\", {\"class\": \"selected\"})\n+assert-attribute: (\"#titles > button:nth-of-type(1)\", {\"class\": \"selected\"})"}, {"sha": "41232dbd80f6715c8b8b4470f4e3fabdb4a80e0d", "filename": "src/test/rustdoc-gui/source-code-page.goml", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsource-code-page.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -3,11 +3,11 @@ goto: file://|DOC_PATH|/src/test_docs/lib.rs.html\n click: (40, 224) // This is the position of the span for line 4.\n // Unfortunately, \"#4\" isn't a valid query selector, so we have to go around that limitation\n // by instead getting the nth span.\n-assert-attr: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n // We now check that the good spans are highlighted\n goto: file://|DOC_PATH|/src/test_docs/lib.rs.html#4-6\n-assert-attr-false: (\".line-numbers > span:nth-child(3)\", {\"class\": \"line-highlighted\"})\n-assert-attr: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n-assert-attr: (\".line-numbers > span:nth-child(5)\", {\"class\": \"line-highlighted\"})\n-assert-attr: (\".line-numbers > span:nth-child(6)\", {\"class\": \"line-highlighted\"})\n-assert-attr-false: (\".line-numbers > span:nth-child(7)\", {\"class\": \"line-highlighted\"})\n+assert-attribute-false: (\".line-numbers > span:nth-child(3)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".line-numbers > span:nth-child(4)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".line-numbers > span:nth-child(5)\", {\"class\": \"line-highlighted\"})\n+assert-attribute: (\".line-numbers > span:nth-child(6)\", {\"class\": \"line-highlighted\"})\n+assert-attribute-false: (\".line-numbers > span:nth-child(7)\", {\"class\": \"line-highlighted\"})"}, {"sha": "471d88701d4f58d1f49fa879377c11692ae2d4f1", "filename": "src/test/rustdoc-gui/toggle-docs-mobile.goml", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs-mobile.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs-mobile.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs-mobile.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -1,21 +1,21 @@\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n size: (433, 600)\n-assert-attr: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute: (\".top-doc\", {\"open\": \"\"})\n click: (4, 280) // This is the position of the top doc comment toggle\n-assert-attr-false: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute-false: (\".top-doc\", {\"open\": \"\"})\n click: (4, 280)\n-assert-attr: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute: (\".top-doc\", {\"open\": \"\"})\n // To ensure that the toggle isn't over the text, we check that the toggle isn't clicked.\n click: (3, 280)\n-assert-attr: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute: (\".top-doc\", {\"open\": \"\"})\n \n // Now we do the same but with a little bigger width\n size: (600, 600)\n-assert-attr: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute: (\".top-doc\", {\"open\": \"\"})\n click: (4, 240) // New Y position since all search elements are back on one line.\n-assert-attr-false: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute-false: (\".top-doc\", {\"open\": \"\"})\n click: (4, 240)\n-assert-attr: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute: (\".top-doc\", {\"open\": \"\"})\n // To ensure that the toggle isn't over the text, we check that the toggle isn't clicked.\n click: (3, 240)\n-assert-attr: (\".top-doc\", {\"open\": \"\"})\n+assert-attribute: (\".top-doc\", {\"open\": \"\"})"}, {"sha": "136868f3175c9722e8083a92caec6a13ce888332", "filename": "src/test/rustdoc-gui/toggle-docs.goml", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggle-docs.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -1,10 +1,10 @@\n goto: file://|DOC_PATH|/test_docs/index.html\n-assert-attr: (\"#main > details.top-doc\", {\"open\": \"\"})\n+assert-attribute: (\"#main > details.top-doc\", {\"open\": \"\"})\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // This is now collapsed so there shouldn't be the \"open\" attribute on details.\n-assert-attr-false: (\"#main > details.top-doc\", {\"open\": \"\"})\n+assert-attribute-false: (\"#main > details.top-doc\", {\"open\": \"\"})\n click: \"#toggle-all-docs\"\n wait-for: 1000\n // Not collapsed anymore so the \"open\" attribute should be back.\n-assert-attr: (\"#main > details.top-doc\", {\"open\": \"\"})\n+assert-attribute: (\"#main > details.top-doc\", {\"open\": \"\"})"}, {"sha": "bc97b38c8670c9b2eb7ac82f6823cfa79e207ab9", "filename": "src/test/rustdoc-gui/toggled-open-implementations.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml", "raw_url": "https://github.com/rust-lang/rust/raw/3af9c9157e40197f404c95ddfda68114d9ef2adb/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftoggled-open-implementations.goml?ref=3af9c9157e40197f404c95ddfda68114d9ef2adb", "patch": "@@ -2,4 +2,4 @@\n // has all the implementations toggled open by default, so users can\n // find method names in those implementations with Ctrl-F.\n goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n-assert-attr: (\".rustdoc-toggle.implementors-toggle\", {\"open\": \"\"})\n+assert-attribute: (\".rustdoc-toggle.implementors-toggle\", {\"open\": \"\"})"}]}