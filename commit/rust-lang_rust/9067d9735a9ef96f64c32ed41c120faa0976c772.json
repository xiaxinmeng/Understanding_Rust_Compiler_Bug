{"sha": "9067d9735a9ef96f64c32ed41c120faa0976c772", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwNjdkOTczNWE5ZWY5NmY2NGMzMmVkNDFjMTIwZmFhMDk3NmM3NzI=", "commit": {"author": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2017-11-26T21:25:49Z"}, "committer": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2017-11-28T23:15:30Z"}, "message": "rustc_llvm: use cc::Build::define", "tree": {"sha": "a18df75d920a389d17d82ce56a39d23f7e22cbcd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a18df75d920a389d17d82ce56a39d23f7e22cbcd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9067d9735a9ef96f64c32ed41c120faa0976c772", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE/uKQcsWiEQj1Z6uEHB6YzI4Xu4kFAlod7hIACgkQHB6YzI4X\nu4nGABAAk6nnucQvPtDeefGyNKdXRUB2yl6niBrgg/pnIBEP5uR0JNwgdHTdBrdN\nVdG38zbPPolYYeEpX40kkho0+vlMeH4h9kuPqxIQX1X4QpHv7Tz2Hyd/A082CAtb\nFsPuFgVZMstb7dUFASfUDRuhCtcJ5dB3nU3nAkhqz49NRsLAWThIe9Y57qzPjADi\nmEFzG3O19OrTmA6D64/1/P8yWTzWmFhTTNJU2+kYU4JSqNmu7bPsuxPBsr+dA+W0\njqaOvymu70z87EizyDGwsI5CEIv7pGWMcUGj/dA9pQpnYjCW9BrYJfoplEgzYzhb\nbbnHBWRZObXkVPb2FMNIPSjsZHvuxmGInPwxXn5lQyhF1265lMJzfT7jbRkpDmXd\nvGpjU+WGPYUu2xtS5rIEIDp/Otc70BJIiYdyyktrG7MlNL/Y1FjfEF2eU9su7adJ\n1X7reim8j2Xp92hgxSyZC1QAPCsB4qgsZ/akdiHKBmNgyFL1DrubrZzq9S1uYWet\njNbSvqyrJu/bsSLejDem7GzvBIZFqRcZYWbnHWyQA+VRw/IMfQAUweMJkY1mcV06\nZ7k0KWn4dsqahkH0rANL5jvUYgwGbFBEjpItVyDcKfzPY0tEEJJk2x5Uf05UUE6a\nit07bdlW/io/QHYW4WfK+rNw9bKOpmJo8sS8qlvh70TbRXVpp4k=\n=jRXb\n-----END PGP SIGNATURE-----", "payload": "tree a18df75d920a389d17d82ce56a39d23f7e22cbcd\nparent 658ea389fd753049bd8ef3f100ee4edb9c9f2a44\nauthor Tamir Duberstein <tamird@gmail.com> 1511731549 -0500\ncommitter Tamir Duberstein <tamird@gmail.com> 1511910930 -0500\n\nrustc_llvm: use cc::Build::define\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9067d9735a9ef96f64c32ed41c120faa0976c772", "html_url": "https://github.com/rust-lang/rust/commit/9067d9735a9ef96f64c32ed41c120faa0976c772", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9067d9735a9ef96f64c32ed41c120faa0976c772/comments", "author": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "url": "https://api.github.com/repos/rust-lang/rust/commits/658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "html_url": "https://github.com/rust-lang/rust/commit/658ea389fd753049bd8ef3f100ee4edb9c9f2a44"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "d860c6c44f024f7a269d7830936abaa39335a498", "filename": "src/librustc_llvm/build.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9067d9735a9ef96f64c32ed41c120faa0976c772/src%2Flibrustc_llvm%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9067d9735a9ef96f64c32ed41c120faa0976c772/src%2Flibrustc_llvm%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Fbuild.rs?ref=9067d9735a9ef96f64c32ed41c120faa0976c772", "patch": "@@ -154,13 +154,13 @@ fn main() {\n     }\n \n     for component in &components {\n-        let mut flag = String::from(\"-DLLVM_COMPONENT_\");\n+        let mut flag = String::from(\"LLVM_COMPONENT_\");\n         flag.push_str(&component.to_uppercase());\n-        cfg.flag(&flag);\n+        cfg.define(&flag, None);\n     }\n \n     if env::var_os(\"LLVM_RUSTLLVM\").is_some() {\n-        cfg.flag(\"-DLLVM_RUSTLLVM\");\n+        cfg.define(\"LLVM_RUSTLLVM\", None);\n     }\n \n     build_helper::rerun_if_changed_anything_in_dir(Path::new(\"../rustllvm\"));"}]}