{"sha": "8ffbd814afd5bcb0534eef7d69af8df3a641d3ec", "node_id": "C_kwDOAAsO6NoAKDhmZmJkODE0YWZkNWJjYjA1MzRlZWY3ZDY5YWY4ZGYzYTY0MWQzZWM", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-15T17:41:41Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-15T17:41:41Z"}, "message": "Update next_node_id.", "tree": {"sha": "31b9fedb367a4406d77c2bf454b4d4d270324c9a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/31b9fedb367a4406d77c2bf454b4d4d270324c9a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8ffbd814afd5bcb0534eef7d69af8df3a641d3ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8ffbd814afd5bcb0534eef7d69af8df3a641d3ec", "html_url": "https://github.com/rust-lang/rust/commit/8ffbd814afd5bcb0534eef7d69af8df3a641d3ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8ffbd814afd5bcb0534eef7d69af8df3a641d3ec/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "52f22c7d01f68c6015fca73dc3623040d6a5dc9d", "url": "https://api.github.com/repos/rust-lang/rust/commits/52f22c7d01f68c6015fca73dc3623040d6a5dc9d", "html_url": "https://github.com/rust-lang/rust/commit/52f22c7d01f68c6015fca73dc3623040d6a5dc9d"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "ec1a48a91c53c2b81aa17d292ca33319230918da", "filename": "compiler/rustc_ast_lowering/src/lib.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8ffbd814afd5bcb0534eef7d69af8df3a641d3ec/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8ffbd814afd5bcb0534eef7d69af8df3a641d3ec/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Flib.rs?ref=8ffbd814afd5bcb0534eef7d69af8df3a641d3ec", "patch": "@@ -496,13 +496,10 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n     }\n \n     fn next_node_id(&mut self) -> NodeId {\n-        let next = self\n-            .next_node_id\n-            .as_usize()\n-            .checked_add(1)\n-            .expect(\"input too large; ran out of NodeIds\");\n-        self.next_node_id = NodeId::from_usize(next);\n-        self.next_node_id\n+        let start = self.next_node_id;\n+        let next = start.as_u32().checked_add(1).expect(\"input too large; ran out of NodeIds\");\n+        self.next_node_id = ast::NodeId::from_u32(next);\n+        start\n     }\n \n     fn opt_local_def_id(&self, node: NodeId) -> Option<LocalDefId> {"}]}