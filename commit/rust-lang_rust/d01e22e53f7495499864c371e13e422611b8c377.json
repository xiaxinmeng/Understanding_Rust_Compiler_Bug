{"sha": "d01e22e53f7495499864c371e13e422611b8c377", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwMWUyMmU1M2Y3NDk1NDk5ODY0YzM3MWUxM2U0MjI2MTFiOGMzNzc=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-01-29T21:28:28Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-01-29T21:28:28Z"}, "message": "Auto merge of #39382 - cuviper:ibm-rewind, r=alexcrichton\n\ntravis: move IBM backwards in time\n\nUsing Ubuntu's cross-toolchains for powerpc* and s390x meant they were\ndepending on glibc symbols from Ubuntu 16.04. And if that host is ever\nupdated to a new release, the toolchains would raise the bar too.\n\nThis switches powerpc, powerpc64, and s390x to use crosstool-ng\ntoolchains, configured approximately like RHEL6 with kernel 2.6.32 and\nglibc 2.12. This ABI level should also be compatible with Debian 7\n(wheezy) and Ubuntu 12.04 (precise).\n\nFor powerpc64le, the challenge was that only glibc-2.19 officially added\nsupport, but RHEL7 backported those changes to glibc-2.17. The backport\npatches are complex and numerous, so instead of trying to push those\ninto crosstool-ng, this just uses glibc binaries directly from CentOS 7\nand builds the toolchain manually.\n\nThis is ported from rust-lang/rust-buildbot#149.\n\nr? @alexcrichton", "tree": {"sha": "255095c028033ec754df0b2c066baa6cc74cbfe0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/255095c028033ec754df0b2c066baa6cc74cbfe0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d01e22e53f7495499864c371e13e422611b8c377", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d01e22e53f7495499864c371e13e422611b8c377", "html_url": "https://github.com/rust-lang/rust/commit/d01e22e53f7495499864c371e13e422611b8c377", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d01e22e53f7495499864c371e13e422611b8c377/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4be49e1937e25cc9c78d7758e095046563052dec", "url": "https://api.github.com/repos/rust-lang/rust/commits/4be49e1937e25cc9c78d7758e095046563052dec", "html_url": "https://github.com/rust-lang/rust/commit/4be49e1937e25cc9c78d7758e095046563052dec"}, {"sha": "cb47d9ffc3a4fcd66e38b9065bcb9a9487dea3fc", "url": "https://api.github.com/repos/rust-lang/rust/commits/cb47d9ffc3a4fcd66e38b9065bcb9a9487dea3fc", "html_url": "https://github.com/rust-lang/rust/commit/cb47d9ffc3a4fcd66e38b9065bcb9a9487dea3fc"}], "stats": {"total": 2154, "additions": 2119, "deletions": 35}, "files": [{"sha": "52f74ba90de6ef0787b96170d128cb1f56c515da", "filename": "src/ci/docker/README.md", "status": "modified", "additions": 55, "deletions": 0, "changes": 55, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2FREADME.md", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2FREADME.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2FREADME.md?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -143,3 +143,58 @@ For targets: `aarch64-unknown-linux-gnu`\n - C-library > glibc version = 2.17 -- aarch64 support was introduced in this version\n - C compiler > gcc version = 5.2.0\n - C compiler > C++ = ENABLE -- to cross compile LLVM\n+\n+## `powerpc-linux-gnu.config`\n+\n+For targets: `powerpc-unknown-linux-gnu`\n+\n+- Path and misc options > Prefix directory = /x-tools/${CT\\_TARGET}\n+- Path and misc options > Patches origin = Bundled, then local\n+- Path and misc options > Local patch directory = /tmp/patches\n+- Target options > Target Architecture = powerpc\n+- Target options > Emit assembly for CPU = power4 -- (+)\n+- Target options > Tune for CPU = power6 -- (+)\n+- Operating System > Target OS = linux\n+- Operating System > Linux kernel version = 2.6.32.68 -- ~RHEL6 kernel\n+- C-library > glibc version = 2.12.2 -- ~RHEL6 glibc\n+- C compiler > gcc version = 4.9.3\n+- C compiler > Core gcc extra config = --with-cpu-32=power4 --with-cpu=default32 -- (+)\n+- C compiler > gcc extra config = --with-cpu-32=power4 --with-cpu=default32 -- (+)\n+- C compiler > C++ = ENABLE -- to cross compile LLVM\n+\n+(+) These CPU options match the configuration of the toolchains in RHEL6.\n+\n+## `powerpc64-linux-gnu.config`\n+\n+For targets: `powerpc64-unknown-linux-gnu`\n+\n+- Path and misc options > Prefix directory = /x-tools/${CT\\_TARGET}\n+- Path and misc options > Patches origin = Bundled, then local\n+- Path and misc options > Local patch directory = /tmp/patches\n+- Target options > Target Architecture = powerpc\n+- Target options > Bitness = 64-bit\n+- Target options > Emit assembly for CPU = power4 -- (+)\n+- Target options > Tune for CPU = power6 -- (+)\n+- Operating System > Target OS = linux\n+- Operating System > Linux kernel version = 2.6.32.68 -- ~RHEL6 kernel\n+- C-library > glibc version = 2.12.2 -- ~RHEL6 glibc\n+- C compiler > gcc version = 4.9.3\n+- C compiler > C++ = ENABLE -- to cross compile LLVM\n+\n+(+) These CPU options match the configuration of the toolchains in RHEL6.\n+\n+## `s390x-linux-gnu.config`\n+\n+For targets: `s390x-unknown-linux-gnu`\n+\n+- Path and misc options > Prefix directory = /x-tools/${CT\\_TARGET}\n+- Path and misc options > Patches origin = Bundled, then local\n+- Path and misc options > Local patch directory = /build/patches\n+- Target options > Target Architecture = s390\n+- Target options > Bitness = 64-bit\n+- Operating System > Target OS = linux\n+- Operating System > Linux kernel version = 2.6.32.68 -- ~RHEL6 kernel\n+- C-library > glibc version = 2.12.2 -- ~RHEL6 glibc\n+- C compiler > gcc version = 4.9.3\n+- C compiler > gcc extra config = --with-arch=z10 -- LLVM's minimum support\n+- C compiler > C++ = ENABLE -- to cross compile LLVM"}, {"sha": "640bacc54eb30b1d8ba65233c45ec6a09535372b", "filename": "src/ci/docker/dist-powerpc-linux/Dockerfile", "status": "modified", "additions": 56, "deletions": 8, "changes": 64, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2FDockerfile?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -1,18 +1,29 @@\n FROM ubuntu:16.04\n \n RUN apt-get update && apt-get install -y --no-install-recommends \\\n+  automake \\\n+  bison \\\n+  bzip2 \\\n+  ca-certificates \\\n+  cmake \\\n+  curl \\\n+  file \\\n+  flex \\\n   g++ \\\n+  gawk \\\n+  gdb \\\n+  git \\\n+  gperf \\\n+  help2man \\\n+  libncurses-dev \\\n+  libtool-bin \\\n   make \\\n-  file \\\n-  curl \\\n-  ca-certificates \\\n+  patch \\\n   python2.7 \\\n-  git \\\n-  cmake \\\n   sudo \\\n-  gdb \\\n-  xz-utils \\\n-  g++-powerpc-linux-gnu\n+  texinfo \\\n+  wget \\\n+  xz-utils\n \n ENV SCCACHE_DIGEST=7237e38e029342fa27b7ac25412cb9d52554008b12389727320bd533fd7f05b6a96d55485f305caf95e5c8f5f97c3313e10012ccad3e752aba2518f3522ba783\n RUN curl -L https://api.pub.build.mozilla.org/tooltool/sha512/$SCCACHE_DIGEST | \\\n@@ -23,6 +34,43 @@ RUN curl -OL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-ini\n     rm dumb-init_*.deb\n ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n \n+# Ubuntu 16.04 (this contianer) ships with make 4, but something in the\n+# toolchains we build below chokes on that, so go back to make 3\n+RUN curl https://ftp.gnu.org/gnu/make/make-3.81.tar.gz | tar xzf - && \\\n+      cd make-3.81 && \\\n+      ./configure --prefix=/usr && \\\n+      make && \\\n+      make install && \\\n+      cd .. && \\\n+      rm -rf make-3.81\n+\n+RUN curl http://crosstool-ng.org/download/crosstool-ng/crosstool-ng-1.22.0.tar.bz2 | \\\n+      tar xjf - && \\\n+      cd crosstool-ng && \\\n+      ./configure --prefix=/usr/local && \\\n+      make -j$(nproc) && \\\n+      make install && \\\n+      cd .. && \\\n+      rm -rf crosstool-ng\n+\n+RUN groupadd -r rustbuild && useradd -m -r -g rustbuild rustbuild\n+RUN mkdir /x-tools && chown rustbuild:rustbuild /x-tools\n+USER rustbuild\n+WORKDIR /tmp\n+\n+COPY patches/ /tmp/patches/\n+COPY powerpc-linux-gnu.config build-powerpc-toolchain.sh /tmp/\n+RUN ./build-powerpc-toolchain.sh\n+\n+USER root\n+\n+ENV PATH=$PATH:/x-tools/powerpc-unknown-linux-gnu/bin\n+\n+ENV \\\n+    CC_powerpc_unknown_linux_gnu=powerpc-unknown-linux-gnu-gcc \\\n+    AR_powerpc_unknown_linux_gnu=powerpc-unknown-linux-gnu-ar \\\n+    CXX_powerpc_unknown_linux_gnu=powerpc-unknown-linux-gnu-g++\n+\n ENV HOSTS=powerpc-unknown-linux-gnu\n \n ENV RUST_CONFIGURE_ARGS --host=$HOSTS --enable-extended"}, {"sha": "90a4df0c19583d9a878cd314bb153deebe4f1129", "filename": "src/ci/docker/dist-powerpc-linux/build-powerpc-toolchain.sh", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fbuild-powerpc-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fbuild-powerpc-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fbuild-powerpc-toolchain.sh?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,36 @@\n+#!/bin/bash\n+# Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n+\n+set -ex\n+\n+hide_output() {\n+  set +x\n+  on_err=\"\n+echo ERROR: An error was encountered with the build.\n+cat /tmp/build.log\n+exit 1\n+\"\n+  trap \"$on_err\" ERR\n+  bash -c \"while true; do sleep 30; echo \\$(date) - building ...; done\" &\n+  PING_LOOP_PID=$!\n+  $@ &> /tmp/build.log\n+  rm /tmp/build.log\n+  trap - ERR\n+  kill $PING_LOOP_PID\n+  set -x\n+}\n+\n+mkdir build\n+cd build\n+cp ../powerpc-linux-gnu.config .config\n+hide_output ct-ng build\n+cd ..\n+rm -rf build"}, {"sha": "744eb180cd1f670cd52f3b47ccce8ce645e20a91", "filename": "src/ci/docker/dist-powerpc-linux/patches/glibc/2.12.2/001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fpatches%2Fglibc%2F2.12.2%2F001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fpatches%2Fglibc%2F2.12.2%2F001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fpatches%2Fglibc%2F2.12.2%2F001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,24 @@\n+From b3563932f85d60bb0d38b0a5f3b8f4abc133f890 Mon Sep 17 00:00:00 2001\n+From: Tulio Magno Quites Machado Filho <tuliom@linux.vnet.ibm.com>\n+Date: Thu, 1 Nov 2012 18:00:06 -0500\n+Subject: [PATCH] PowerPC: Remove unnecessary -mnew-mnemonics.\n+\n+---\n+ sysdeps/powerpc/Makefile | 4 ----\n+ 1 file changed, 4 deletions(-)\n+\n+diff --git a/sysdeps/powerpc/Makefile b/sysdeps/powerpc/Makefile\n+index 79dd6fa976d5..7442b6709ad1 100644\n+--- a/sysdeps/powerpc/Makefile\n++++ b/sysdeps/powerpc/Makefile\n+@@ -1,7 +1,3 @@\n+-# We always want to use the new mnemonic syntax even if we are on a RS6000\n+-# machine.\n+-+cflags += -mnew-mnemonics\n+-\n+ ifeq ($(subdir),gmon)\n+ sysdep_routines += ppc-mcount\n+ endif\n+-- \n+2.9.3\n+"}, {"sha": "26e2de863a0f97bf073c157de7539238df4551a2", "filename": "src/ci/docker/dist-powerpc-linux/powerpc-linux-gnu.config", "status": "added", "additions": 528, "deletions": 0, "changes": 528, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fpowerpc-linux-gnu.config", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fpowerpc-linux-gnu.config", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc-linux%2Fpowerpc-linux-gnu.config?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,528 @@\n+#\n+# Automatically generated file; DO NOT EDIT.\n+# Crosstool-NG Configuration\n+#\n+CT_CONFIGURE_has_make381=y\n+CT_CONFIGURE_has_xz=y\n+CT_MODULES=y\n+\n+#\n+# Paths and misc options\n+#\n+\n+#\n+# crosstool-NG behavior\n+#\n+# CT_OBSOLETE is not set\n+# CT_EXPERIMENTAL is not set\n+# CT_DEBUG_CT is not set\n+\n+#\n+# Paths\n+#\n+CT_LOCAL_TARBALLS_DIR=\"\"\n+CT_WORK_DIR=\"${CT_TOP_DIR}/.build\"\n+CT_PREFIX_DIR=\"/x-tools/${CT_TARGET}\"\n+CT_INSTALL_DIR=\"${CT_PREFIX_DIR}\"\n+CT_RM_RF_PREFIX_DIR=y\n+CT_REMOVE_DOCS=y\n+CT_INSTALL_DIR_RO=y\n+CT_STRIP_HOST_TOOLCHAIN_EXECUTABLES=y\n+# CT_STRIP_TARGET_TOOLCHAIN_EXECUTABLES is not set\n+\n+#\n+# Downloading\n+#\n+# CT_FORBID_DOWNLOAD is not set\n+# CT_FORCE_DOWNLOAD is not set\n+CT_CONNECT_TIMEOUT=10\n+# CT_ONLY_DOWNLOAD is not set\n+# CT_USE_MIRROR is not set\n+\n+#\n+# Extracting\n+#\n+# CT_FORCE_EXTRACT is not set\n+CT_OVERIDE_CONFIG_GUESS_SUB=y\n+# CT_ONLY_EXTRACT is not set\n+# CT_PATCH_BUNDLED is not set\n+# CT_PATCH_LOCAL is not set\n+CT_PATCH_BUNDLED_LOCAL=y\n+# CT_PATCH_LOCAL_BUNDLED is not set\n+# CT_PATCH_BUNDLED_FALLBACK_LOCAL is not set\n+# CT_PATCH_LOCAL_FALLBACK_BUNDLED is not set\n+# CT_PATCH_NONE is not set\n+CT_PATCH_ORDER=\"bundled,local\"\n+CT_PATCH_USE_LOCAL=y\n+CT_LOCAL_PATCH_DIR=\"/tmp/patches\"\n+\n+#\n+# Build behavior\n+#\n+CT_PARALLEL_JOBS=0\n+CT_LOAD=\"\"\n+CT_USE_PIPES=y\n+CT_EXTRA_CFLAGS_FOR_BUILD=\"\"\n+CT_EXTRA_LDFLAGS_FOR_BUILD=\"\"\n+CT_EXTRA_CFLAGS_FOR_HOST=\"\"\n+CT_EXTRA_LDFLAGS_FOR_HOST=\"\"\n+# CT_CONFIG_SHELL_SH is not set\n+# CT_CONFIG_SHELL_ASH is not set\n+CT_CONFIG_SHELL_BASH=y\n+# CT_CONFIG_SHELL_CUSTOM is not set\n+CT_CONFIG_SHELL=\"${bash}\"\n+\n+#\n+# Logging\n+#\n+# CT_LOG_ERROR is not set\n+# CT_LOG_WARN is not set\n+CT_LOG_INFO=y\n+# CT_LOG_EXTRA is not set\n+# CT_LOG_ALL is not set\n+# CT_LOG_DEBUG is not set\n+CT_LOG_LEVEL_MAX=\"INFO\"\n+# CT_LOG_SEE_TOOLS_WARN is not set\n+CT_LOG_PROGRESS_BAR=y\n+CT_LOG_TO_FILE=y\n+CT_LOG_FILE_COMPRESS=y\n+\n+#\n+# Target options\n+#\n+CT_ARCH=\"powerpc\"\n+CT_ARCH_SUPPORTS_BOTH_ENDIAN=y\n+CT_ARCH_SUPPORTS_32=y\n+CT_ARCH_SUPPORTS_64=y\n+CT_ARCH_SUPPORTS_WITH_ABI=y\n+CT_ARCH_SUPPORTS_WITH_CPU=y\n+CT_ARCH_SUPPORTS_WITH_TUNE=y\n+CT_ARCH_SUPPORTS_WITH_FLOAT=y\n+CT_ARCH_DEFAULT_BE=y\n+CT_ARCH_DEFAULT_32=y\n+CT_ARCH_ABI=\"\"\n+CT_ARCH_CPU=\"power4\"\n+CT_ARCH_TUNE=\"power6\"\n+CT_ARCH_BE=y\n+# CT_ARCH_LE is not set\n+CT_ARCH_32=y\n+# CT_ARCH_64 is not set\n+CT_ARCH_BITNESS=32\n+# CT_ARCH_FLOAT_HW is not set\n+# CT_ARCH_FLOAT_SW is not set\n+CT_TARGET_CFLAGS=\"\"\n+CT_TARGET_LDFLAGS=\"\"\n+# CT_ARCH_alpha is not set\n+# CT_ARCH_arm is not set\n+# CT_ARCH_avr is not set\n+# CT_ARCH_m68k is not set\n+# CT_ARCH_mips is not set\n+# CT_ARCH_nios2 is not set\n+CT_ARCH_powerpc=y\n+# CT_ARCH_s390 is not set\n+# CT_ARCH_sh is not set\n+# CT_ARCH_sparc is not set\n+# CT_ARCH_x86 is not set\n+# CT_ARCH_xtensa is not set\n+CT_ARCH_alpha_AVAILABLE=y\n+CT_ARCH_arm_AVAILABLE=y\n+CT_ARCH_avr_AVAILABLE=y\n+CT_ARCH_m68k_AVAILABLE=y\n+CT_ARCH_microblaze_AVAILABLE=y\n+CT_ARCH_mips_AVAILABLE=y\n+CT_ARCH_nios2_AVAILABLE=y\n+CT_ARCH_powerpc_AVAILABLE=y\n+CT_ARCH_s390_AVAILABLE=y\n+CT_ARCH_sh_AVAILABLE=y\n+CT_ARCH_sparc_AVAILABLE=y\n+CT_ARCH_x86_AVAILABLE=y\n+CT_ARCH_xtensa_AVAILABLE=y\n+CT_ARCH_SUFFIX=\"\"\n+\n+#\n+# Generic target options\n+#\n+# CT_MULTILIB is not set\n+CT_ARCH_USE_MMU=y\n+CT_ARCH_ENDIAN=\"big\"\n+\n+#\n+# Target optimisations\n+#\n+CT_ARCH_FLOAT_AUTO=y\n+CT_ARCH_FLOAT=\"auto\"\n+\n+#\n+# powerpc other options\n+#\n+CT_ARCH_powerpc_ABI=\"\"\n+CT_ARCH_powerpc_ABI_DEFAULT=y\n+# CT_ARCH_powerpc_ABI_SPE is not set\n+\n+#\n+# Toolchain options\n+#\n+\n+#\n+# General toolchain options\n+#\n+CT_FORCE_SYSROOT=y\n+CT_USE_SYSROOT=y\n+CT_SYSROOT_NAME=\"sysroot\"\n+CT_SYSROOT_DIR_PREFIX=\"\"\n+CT_WANTS_STATIC_LINK=y\n+# CT_STATIC_TOOLCHAIN is not set\n+CT_TOOLCHAIN_PKGVERSION=\"\"\n+CT_TOOLCHAIN_BUGURL=\"\"\n+\n+#\n+# Tuple completion and aliasing\n+#\n+CT_TARGET_VENDOR=\"unknown\"\n+CT_TARGET_ALIAS_SED_EXPR=\"\"\n+CT_TARGET_ALIAS=\"\"\n+\n+#\n+# Toolchain type\n+#\n+CT_CROSS=y\n+# CT_CANADIAN is not set\n+CT_TOOLCHAIN_TYPE=\"cross\"\n+\n+#\n+# Build system\n+#\n+CT_BUILD=\"\"\n+CT_BUILD_PREFIX=\"\"\n+CT_BUILD_SUFFIX=\"\"\n+\n+#\n+# Misc options\n+#\n+# CT_TOOLCHAIN_ENABLE_NLS is not set\n+\n+#\n+# Operating System\n+#\n+CT_KERNEL_SUPPORTS_SHARED_LIBS=y\n+CT_KERNEL=\"linux\"\n+CT_KERNEL_VERSION=\"2.6.32.68\"\n+# CT_KERNEL_bare_metal is not set\n+CT_KERNEL_linux=y\n+CT_KERNEL_bare_metal_AVAILABLE=y\n+CT_KERNEL_linux_AVAILABLE=y\n+# CT_KERNEL_V_4_3 is not set\n+# CT_KERNEL_V_4_2 is not set\n+# CT_KERNEL_V_4_1 is not set\n+# CT_KERNEL_V_3_18 is not set\n+# CT_KERNEL_V_3_14 is not set\n+# CT_KERNEL_V_3_12 is not set\n+# CT_KERNEL_V_3_10 is not set\n+# CT_KERNEL_V_3_4 is not set\n+# CT_KERNEL_V_3_2 is not set\n+CT_KERNEL_V_2_6_32=y\n+# CT_KERNEL_LINUX_CUSTOM is not set\n+CT_KERNEL_windows_AVAILABLE=y\n+\n+#\n+# Common kernel options\n+#\n+CT_SHARED_LIBS=y\n+\n+#\n+# linux other options\n+#\n+CT_KERNEL_LINUX_VERBOSITY_0=y\n+# CT_KERNEL_LINUX_VERBOSITY_1 is not set\n+# CT_KERNEL_LINUX_VERBOSITY_2 is not set\n+CT_KERNEL_LINUX_VERBOSE_LEVEL=0\n+CT_KERNEL_LINUX_INSTALL_CHECK=y\n+\n+#\n+# Binary utilities\n+#\n+CT_ARCH_BINFMT_ELF=y\n+CT_BINUTILS=\"binutils\"\n+CT_BINUTILS_binutils=y\n+\n+#\n+# GNU binutils\n+#\n+# CT_CC_BINUTILS_SHOW_LINARO is not set\n+CT_BINUTILS_V_2_25_1=y\n+# CT_BINUTILS_V_2_25 is not set\n+# CT_BINUTILS_V_2_24 is not set\n+# CT_BINUTILS_V_2_23_2 is not set\n+# CT_BINUTILS_V_2_23_1 is not set\n+# CT_BINUTILS_V_2_22 is not set\n+# CT_BINUTILS_V_2_21_53 is not set\n+# CT_BINUTILS_V_2_21_1a is not set\n+# CT_BINUTILS_V_2_20_1a is not set\n+# CT_BINUTILS_V_2_19_1a is not set\n+# CT_BINUTILS_V_2_18a is not set\n+CT_BINUTILS_VERSION=\"2.25.1\"\n+CT_BINUTILS_2_25_1_or_later=y\n+CT_BINUTILS_2_25_or_later=y\n+CT_BINUTILS_2_24_or_later=y\n+CT_BINUTILS_2_23_or_later=y\n+CT_BINUTILS_2_22_or_later=y\n+CT_BINUTILS_2_21_or_later=y\n+CT_BINUTILS_2_20_or_later=y\n+CT_BINUTILS_2_19_or_later=y\n+CT_BINUTILS_2_18_or_later=y\n+CT_BINUTILS_HAS_HASH_STYLE=y\n+CT_BINUTILS_HAS_GOLD=y\n+CT_BINUTILS_HAS_PLUGINS=y\n+CT_BINUTILS_HAS_PKGVERSION_BUGURL=y\n+CT_BINUTILS_FORCE_LD_BFD=y\n+CT_BINUTILS_LINKER_LD=y\n+CT_BINUTILS_LINKERS_LIST=\"ld\"\n+CT_BINUTILS_LINKER_DEFAULT=\"bfd\"\n+# CT_BINUTILS_PLUGINS is not set\n+CT_BINUTILS_EXTRA_CONFIG_ARRAY=\"\"\n+# CT_BINUTILS_FOR_TARGET is not set\n+\n+#\n+# binutils other options\n+#\n+\n+#\n+# C-library\n+#\n+CT_LIBC=\"glibc\"\n+CT_LIBC_VERSION=\"2.12.2\"\n+CT_LIBC_glibc=y\n+# CT_LIBC_musl is not set\n+# CT_LIBC_uClibc is not set\n+CT_LIBC_avr_libc_AVAILABLE=y\n+CT_LIBC_glibc_AVAILABLE=y\n+CT_THREADS=\"nptl\"\n+# CT_CC_GLIBC_SHOW_LINARO is not set\n+# CT_LIBC_GLIBC_V_2_22 is not set\n+# CT_LIBC_GLIBC_V_2_21 is not set\n+# CT_LIBC_GLIBC_V_2_20 is not set\n+# CT_LIBC_GLIBC_V_2_19 is not set\n+# CT_LIBC_GLIBC_V_2_18 is not set\n+# CT_LIBC_GLIBC_V_2_17 is not set\n+# CT_LIBC_GLIBC_V_2_16_0 is not set\n+# CT_LIBC_GLIBC_V_2_15 is not set\n+# CT_LIBC_GLIBC_V_2_14_1 is not set\n+# CT_LIBC_GLIBC_V_2_14 is not set\n+# CT_LIBC_GLIBC_V_2_13 is not set\n+CT_LIBC_GLIBC_V_2_12_2=y\n+# CT_LIBC_GLIBC_V_2_12_1 is not set\n+# CT_LIBC_GLIBC_V_2_11_1 is not set\n+# CT_LIBC_GLIBC_V_2_11 is not set\n+# CT_LIBC_GLIBC_V_2_10_1 is not set\n+# CT_LIBC_GLIBC_V_2_9 is not set\n+# CT_LIBC_GLIBC_V_2_8 is not set\n+CT_LIBC_mingw_AVAILABLE=y\n+CT_LIBC_musl_AVAILABLE=y\n+CT_LIBC_newlib_AVAILABLE=y\n+CT_LIBC_none_AVAILABLE=y\n+CT_LIBC_uClibc_AVAILABLE=y\n+CT_LIBC_SUPPORT_THREADS_ANY=y\n+CT_LIBC_SUPPORT_THREADS_NATIVE=y\n+\n+#\n+# Common C library options\n+#\n+CT_THREADS_NATIVE=y\n+CT_LIBC_XLDD=y\n+\n+#\n+# glibc other options\n+#\n+CT_LIBC_GLIBC_PORTS_EXTERNAL=y\n+CT_LIBC_glibc_familly=y\n+CT_LIBC_GLIBC_EXTRA_CONFIG_ARRAY=\"\"\n+CT_LIBC_GLIBC_CONFIGPARMS=\"\"\n+CT_LIBC_GLIBC_EXTRA_CFLAGS=\"\"\n+CT_LIBC_EXTRA_CC_ARGS=\"\"\n+# CT_LIBC_DISABLE_VERSIONING is not set\n+CT_LIBC_OLDEST_ABI=\"\"\n+CT_LIBC_GLIBC_FORCE_UNWIND=y\n+# CT_LIBC_GLIBC_USE_PORTS is not set\n+CT_LIBC_ADDONS_LIST=\"\"\n+# CT_LIBC_LOCALES is not set\n+# CT_LIBC_GLIBC_KERNEL_VERSION_NONE is not set\n+CT_LIBC_GLIBC_KERNEL_VERSION_AS_HEADERS=y\n+# CT_LIBC_GLIBC_KERNEL_VERSION_CHOSEN is not set\n+CT_LIBC_GLIBC_MIN_KERNEL=\"2.6.32.68\"\n+\n+#\n+# C compiler\n+#\n+CT_CC=\"gcc\"\n+CT_CC_CORE_PASSES_NEEDED=y\n+CT_CC_CORE_PASS_1_NEEDED=y\n+CT_CC_CORE_PASS_2_NEEDED=y\n+CT_CC_gcc=y\n+# CT_CC_GCC_SHOW_LINARO is not set\n+# CT_CC_GCC_V_5_2_0 is not set\n+CT_CC_GCC_V_4_9_3=y\n+# CT_CC_GCC_V_4_8_5 is not set\n+# CT_CC_GCC_V_4_7_4 is not set\n+# CT_CC_GCC_V_4_6_4 is not set\n+# CT_CC_GCC_V_4_5_4 is not set\n+# CT_CC_GCC_V_4_4_7 is not set\n+# CT_CC_GCC_V_4_3_6 is not set\n+# CT_CC_GCC_V_4_2_4 is not set\n+CT_CC_GCC_4_2_or_later=y\n+CT_CC_GCC_4_3_or_later=y\n+CT_CC_GCC_4_4_or_later=y\n+CT_CC_GCC_4_5_or_later=y\n+CT_CC_GCC_4_6_or_later=y\n+CT_CC_GCC_4_7_or_later=y\n+CT_CC_GCC_4_8_or_later=y\n+CT_CC_GCC_4_9=y\n+CT_CC_GCC_4_9_or_later=y\n+CT_CC_GCC_HAS_GRAPHITE=y\n+CT_CC_GCC_USE_GRAPHITE=y\n+CT_CC_GCC_HAS_LTO=y\n+CT_CC_GCC_USE_LTO=y\n+CT_CC_GCC_HAS_PKGVERSION_BUGURL=y\n+CT_CC_GCC_HAS_BUILD_ID=y\n+CT_CC_GCC_HAS_LNK_HASH_STYLE=y\n+CT_CC_GCC_USE_GMP_MPFR=y\n+CT_CC_GCC_USE_MPC=y\n+CT_CC_GCC_HAS_LIBQUADMATH=y\n+CT_CC_GCC_HAS_LIBSANITIZER=y\n+CT_CC_GCC_VERSION=\"4.9.3\"\n+# CT_CC_LANG_FORTRAN is not set\n+CT_CC_GCC_ENABLE_CXX_FLAGS=\"\"\n+CT_CC_GCC_CORE_EXTRA_CONFIG_ARRAY=\"--with-cpu-32=power4 --with-cpu=default32\"\n+CT_CC_GCC_EXTRA_CONFIG_ARRAY=\"--with-cpu-32=power4 --with-cpu=default32\"\n+CT_CC_GCC_EXTRA_ENV_ARRAY=\"\"\n+CT_CC_GCC_STATIC_LIBSTDCXX=y\n+# CT_CC_GCC_SYSTEM_ZLIB is not set\n+\n+#\n+# Optimisation features\n+#\n+\n+#\n+# Settings for libraries running on target\n+#\n+CT_CC_GCC_ENABLE_TARGET_OPTSPACE=y\n+# CT_CC_GCC_LIBMUDFLAP is not set\n+# CT_CC_GCC_LIBGOMP is not set\n+# CT_CC_GCC_LIBSSP is not set\n+# CT_CC_GCC_LIBQUADMATH is not set\n+# CT_CC_GCC_LIBSANITIZER is not set\n+\n+#\n+# Misc. obscure options.\n+#\n+CT_CC_CXA_ATEXIT=y\n+# CT_CC_GCC_DISABLE_PCH is not set\n+CT_CC_GCC_SJLJ_EXCEPTIONS=m\n+CT_CC_GCC_LDBL_128=m\n+# CT_CC_GCC_BUILD_ID is not set\n+CT_CC_GCC_LNK_HASH_STYLE_DEFAULT=y\n+# CT_CC_GCC_LNK_HASH_STYLE_SYSV is not set\n+# CT_CC_GCC_LNK_HASH_STYLE_GNU is not set\n+# CT_CC_GCC_LNK_HASH_STYLE_BOTH is not set\n+CT_CC_GCC_LNK_HASH_STYLE=\"\"\n+CT_CC_GCC_DEC_FLOAT_AUTO=y\n+# CT_CC_GCC_DEC_FLOAT_BID is not set\n+# CT_CC_GCC_DEC_FLOAT_DPD is not set\n+# CT_CC_GCC_DEC_FLOATS_NO is not set\n+CT_CC_SUPPORT_CXX=y\n+CT_CC_SUPPORT_FORTRAN=y\n+CT_CC_SUPPORT_JAVA=y\n+CT_CC_SUPPORT_ADA=y\n+CT_CC_SUPPORT_OBJC=y\n+CT_CC_SUPPORT_OBJCXX=y\n+CT_CC_SUPPORT_GOLANG=y\n+\n+#\n+# Additional supported languages:\n+#\n+CT_CC_LANG_CXX=y\n+# CT_CC_LANG_JAVA is not set\n+\n+#\n+# Debug facilities\n+#\n+# CT_DEBUG_dmalloc is not set\n+# CT_DEBUG_duma is not set\n+# CT_DEBUG_gdb is not set\n+# CT_DEBUG_ltrace is not set\n+# CT_DEBUG_strace is not set\n+\n+#\n+# Companion libraries\n+#\n+CT_COMPLIBS_NEEDED=y\n+CT_LIBICONV_NEEDED=y\n+CT_GETTEXT_NEEDED=y\n+CT_GMP_NEEDED=y\n+CT_MPFR_NEEDED=y\n+CT_ISL_NEEDED=y\n+CT_CLOOG_NEEDED=y\n+CT_MPC_NEEDED=y\n+CT_COMPLIBS=y\n+CT_LIBICONV=y\n+CT_GETTEXT=y\n+CT_GMP=y\n+CT_MPFR=y\n+CT_ISL=y\n+CT_CLOOG=y\n+CT_MPC=y\n+CT_LIBICONV_V_1_14=y\n+CT_LIBICONV_VERSION=\"1.14\"\n+CT_GETTEXT_V_0_19_6=y\n+CT_GETTEXT_VERSION=\"0.19.6\"\n+CT_GMP_V_6_0_0=y\n+# CT_GMP_V_5_1_3 is not set\n+# CT_GMP_V_5_1_1 is not set\n+# CT_GMP_V_5_0_2 is not set\n+# CT_GMP_V_5_0_1 is not set\n+# CT_GMP_V_4_3_2 is not set\n+# CT_GMP_V_4_3_1 is not set\n+# CT_GMP_V_4_3_0 is not set\n+CT_GMP_5_0_2_or_later=y\n+CT_GMP_VERSION=\"6.0.0a\"\n+CT_MPFR_V_3_1_3=y\n+# CT_MPFR_V_3_1_2 is not set\n+# CT_MPFR_V_3_1_0 is not set\n+# CT_MPFR_V_3_0_1 is not set\n+# CT_MPFR_V_3_0_0 is not set\n+# CT_MPFR_V_2_4_2 is not set\n+# CT_MPFR_V_2_4_1 is not set\n+# CT_MPFR_V_2_4_0 is not set\n+CT_MPFR_VERSION=\"3.1.3\"\n+CT_ISL_V_0_14=y\n+CT_ISL_V_0_14_or_later=y\n+CT_ISL_V_0_12_or_later=y\n+CT_ISL_VERSION=\"0.14\"\n+CT_CLOOG_V_0_18_4=y\n+# CT_CLOOG_V_0_18_1 is not set\n+# CT_CLOOG_V_0_18_0 is not set\n+CT_CLOOG_VERSION=\"0.18.4\"\n+CT_CLOOG_0_18_4_or_later=y\n+CT_CLOOG_0_18_or_later=y\n+CT_MPC_V_1_0_3=y\n+# CT_MPC_V_1_0_2 is not set\n+# CT_MPC_V_1_0_1 is not set\n+# CT_MPC_V_1_0 is not set\n+# CT_MPC_V_0_9 is not set\n+# CT_MPC_V_0_8_2 is not set\n+# CT_MPC_V_0_8_1 is not set\n+# CT_MPC_V_0_7 is not set\n+CT_MPC_VERSION=\"1.0.3\"\n+\n+#\n+# Companion libraries common options\n+#\n+# CT_COMPLIBS_CHECK is not set\n+\n+#\n+# Companion tools\n+#\n+\n+#\n+# READ HELP before you say 'Y' below !!!\n+#\n+# CT_COMP_TOOLS is not set"}, {"sha": "624763ef5de6708a3b64dbb1126cab144a7dde39", "filename": "src/ci/docker/dist-powerpc64-linux/Dockerfile", "status": "modified", "additions": 61, "deletions": 12, "changes": 73, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2FDockerfile?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -1,19 +1,29 @@\n FROM ubuntu:16.04\n \n RUN apt-get update && apt-get install -y --no-install-recommends \\\n+  automake \\\n+  bison \\\n+  bzip2 \\\n+  ca-certificates \\\n+  cmake \\\n+  curl \\\n+  file \\\n+  flex \\\n   g++ \\\n+  gawk \\\n+  gdb \\\n+  git \\\n+  gperf \\\n+  help2man \\\n+  libncurses-dev \\\n+  libtool-bin \\\n   make \\\n-  file \\\n-  curl \\\n-  ca-certificates \\\n+  patch \\\n   python2.7 \\\n-  git \\\n-  cmake \\\n   sudo \\\n-  gdb \\\n-  xz-utils \\\n-  g++-powerpc64-linux-gnu \\\n-  g++-powerpc64le-linux-gnu\n+  texinfo \\\n+  wget \\\n+  xz-utils\n \n ENV SCCACHE_DIGEST=7237e38e029342fa27b7ac25412cb9d52554008b12389727320bd533fd7f05b6a96d55485f305caf95e5c8f5f97c3313e10012ccad3e752aba2518f3522ba783\n RUN curl -L https://api.pub.build.mozilla.org/tooltool/sha512/$SCCACHE_DIGEST | \\\n@@ -24,10 +34,49 @@ RUN curl -OL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-ini\n     rm dumb-init_*.deb\n ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n \n+# Ubuntu 16.04 (this contianer) ships with make 4, but something in the\n+# toolchains we build below chokes on that, so go back to make 3\n+RUN curl https://ftp.gnu.org/gnu/make/make-3.81.tar.gz | tar xzf - && \\\n+      cd make-3.81 && \\\n+      ./configure --prefix=/usr && \\\n+      make && \\\n+      make install && \\\n+      cd .. && \\\n+      rm -rf make-3.81\n+\n+RUN curl http://crosstool-ng.org/download/crosstool-ng/crosstool-ng-1.22.0.tar.bz2 | \\\n+      tar xjf - && \\\n+      cd crosstool-ng && \\\n+      ./configure --prefix=/usr/local && \\\n+      make -j$(nproc) && \\\n+      make install && \\\n+      cd .. && \\\n+      rm -rf crosstool-ng\n+\n+RUN groupadd -r rustbuild && useradd -m -r -g rustbuild rustbuild\n+RUN mkdir /x-tools && chown rustbuild:rustbuild /x-tools\n+USER rustbuild\n+WORKDIR /tmp\n+\n+COPY patches/ /tmp/patches/\n+COPY powerpc64-linux-gnu.config build-powerpc64-toolchain.sh /tmp/\n+RUN ./build-powerpc64-toolchain.sh\n+\n+USER root\n+\n+RUN apt-get install -y --no-install-recommends rpm2cpio cpio\n+COPY build-powerpc64le-toolchain.sh /tmp/\n+RUN ./build-powerpc64le-toolchain.sh\n+\n+ENV PATH=$PATH:/x-tools/powerpc64-unknown-linux-gnu/bin\n+\n ENV \\\n-    AR_powerpc64_unknown_linux_gnu=powerpc64-linux-gnu-ar \\\n-    CC_powerpc64_unknown_linux_gnu=powerpc64-linux-gnu-gcc \\\n-    CXX_powerpc64_unknown_linux_gnu=powerpc64-linux-gnu-g++\n+    AR_powerpc64_unknown_linux_gnu=powerpc64-unknown-linux-gnu-ar \\\n+    CC_powerpc64_unknown_linux_gnu=powerpc64-unknown-linux-gnu-gcc \\\n+    CXX_powerpc64_unknown_linux_gnu=powerpc64-unknown-linux-gnu-g++ \\\n+    AR_powerpc64le_unknown_linux_gnu=powerpc64le-linux-gnu-ar \\\n+    CC_powerpc64le_unknown_linux_gnu=powerpc64le-linux-gnu-gcc \\\n+    CXX_powerpc64le_unknown_linux_gnu=powerpc64le-linux-gnu-g++\n \n ENV HOSTS=powerpc64-unknown-linux-gnu\n ENV HOSTS=$HOSTS,powerpc64le-unknown-linux-gnu"}, {"sha": "d70947d2dd9d61be7d90025ac333339764612298", "filename": "src/ci/docker/dist-powerpc64-linux/build-powerpc64-toolchain.sh", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64-toolchain.sh?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,36 @@\n+#!/bin/bash\n+# Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n+\n+set -ex\n+\n+hide_output() {\n+  set +x\n+  on_err=\"\n+echo ERROR: An error was encountered with the build.\n+cat /tmp/build.log\n+exit 1\n+\"\n+  trap \"$on_err\" ERR\n+  bash -c \"while true; do sleep 30; echo \\$(date) - building ...; done\" &\n+  PING_LOOP_PID=$!\n+  $@ &> /tmp/build.log\n+  rm /tmp/build.log\n+  trap - ERR\n+  kill $PING_LOOP_PID\n+  set -x\n+}\n+\n+mkdir build\n+cd build\n+cp ../powerpc64-linux-gnu.config .config\n+hide_output ct-ng build\n+cd ..\n+rm -rf build"}, {"sha": "8b924ca34c47c48ae86e7951ae360759b4cb2f3c", "filename": "src/ci/docker/dist-powerpc64-linux/build-powerpc64le-toolchain.sh", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64le-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64le-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fbuild-powerpc64le-toolchain.sh?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,79 @@\n+#!/bin/bash\n+# Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n+\n+set -ex\n+\n+BINUTILS=2.25.1\n+GCC=5.3.0\n+TARGET=powerpc64le-linux-gnu\n+SYSROOT=/usr/local/$TARGET/sysroot\n+\n+# First, download the CentOS7 glibc.ppc64le and relevant header files.\n+# (upstream ppc64le support wasn't added until 2.19, which el7 backported.)\n+mkdir -p $SYSROOT\n+pushd $SYSROOT\n+\n+centos_base=http://mirror.centos.org/altarch/7.3.1611/os/ppc64le/Packages\n+glibc_v=2.17-157.el7\n+kernel_v=3.10.0-514.el7\n+for package in glibc{,-devel,-headers}-$glibc_v kernel-headers-$kernel_v; do\n+  curl $centos_base/$package.ppc64le.rpm | \\\n+    rpm2cpio - | cpio -idm\n+done\n+\n+ln -sT lib64 lib\n+ln -sT lib64 usr/lib\n+\n+popd\n+\n+# Next, download and build binutils.\n+mkdir binutils-$TARGET\n+pushd binutils-$TARGET\n+curl https://ftp.gnu.org/gnu/binutils/binutils-$BINUTILS.tar.bz2 | tar xjf -\n+mkdir binutils-build\n+cd binutils-build\n+../binutils-$BINUTILS/configure --target=$TARGET --with-sysroot=$SYSROOT\n+make -j10\n+make install\n+popd\n+rm -rf binutils-$TARGET\n+\n+# Finally, download and build gcc.\n+mkdir gcc-$TARGET\n+pushd gcc-$TARGET\n+curl https://ftp.gnu.org/gnu/gcc/gcc-$GCC/gcc-$GCC.tar.bz2 | tar xjf -\n+cd gcc-$GCC\n+./contrib/download_prerequisites\n+\n+mkdir ../gcc-build\n+cd ../gcc-build\n+../gcc-$GCC/configure                            \\\n+  --enable-languages=c,c++                       \\\n+  --target=$TARGET                               \\\n+  --with-cpu=power8                              \\\n+  --with-sysroot=$SYSROOT                        \\\n+  --disable-libcilkrts                           \\\n+  --disable-multilib                             \\\n+  --disable-nls                                  \\\n+  --disable-libgomp                              \\\n+  --disable-libquadmath                          \\\n+  --disable-libssp                               \\\n+  --disable-libvtv                               \\\n+  --disable-libcilkrt                            \\\n+  --disable-libada                               \\\n+  --disable-libsanitizer                         \\\n+  --disable-libquadmath-support                  \\\n+  --disable-lto\n+make -j10\n+make install\n+\n+popd\n+rm -rf gcc-$TARGET"}, {"sha": "744eb180cd1f670cd52f3b47ccce8ce645e20a91", "filename": "src/ci/docker/dist-powerpc64-linux/patches/glibc/2.12.2/001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpatches%2Fglibc%2F2.12.2%2F001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpatches%2Fglibc%2F2.12.2%2F001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpatches%2Fglibc%2F2.12.2%2F001-PowerPC-Remove-unnecessary-mnew-mnemonics.patch?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,24 @@\n+From b3563932f85d60bb0d38b0a5f3b8f4abc133f890 Mon Sep 17 00:00:00 2001\n+From: Tulio Magno Quites Machado Filho <tuliom@linux.vnet.ibm.com>\n+Date: Thu, 1 Nov 2012 18:00:06 -0500\n+Subject: [PATCH] PowerPC: Remove unnecessary -mnew-mnemonics.\n+\n+---\n+ sysdeps/powerpc/Makefile | 4 ----\n+ 1 file changed, 4 deletions(-)\n+\n+diff --git a/sysdeps/powerpc/Makefile b/sysdeps/powerpc/Makefile\n+index 79dd6fa976d5..7442b6709ad1 100644\n+--- a/sysdeps/powerpc/Makefile\n++++ b/sysdeps/powerpc/Makefile\n+@@ -1,7 +1,3 @@\n+-# We always want to use the new mnemonic syntax even if we are on a RS6000\n+-# machine.\n+-+cflags += -mnew-mnemonics\n+-\n+ ifeq ($(subdir),gmon)\n+ sysdep_routines += ppc-mcount\n+ endif\n+-- \n+2.9.3\n+"}, {"sha": "47cc8b28d225a11d496593d510e43f6bc7fa2e7b", "filename": "src/ci/docker/dist-powerpc64-linux/patches/glibc/2.12.2/002-Prevent-inlining-in-PPC64-initfini.s.patch", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpatches%2Fglibc%2F2.12.2%2F002-Prevent-inlining-in-PPC64-initfini.s.patch", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpatches%2Fglibc%2F2.12.2%2F002-Prevent-inlining-in-PPC64-initfini.s.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpatches%2Fglibc%2F2.12.2%2F002-Prevent-inlining-in-PPC64-initfini.s.patch?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,26 @@\n+From a4f388e111ce05e2ab7912cff3c9070334bb74ae Mon Sep 17 00:00:00 2001\n+From: Josh Stone <jistone@redhat.com>\n+Date: Fri, 20 Jan 2017 15:41:56 -0800\n+Subject: [PATCH] Prevent inlining in PPC64 initfini.s\n+\n+Ref: https://sourceware.org/ml/libc-alpha/2012-01/msg00195.html\n+---\n+ sysdeps/powerpc/powerpc64/Makefile | 2 +-\n+ 1 file changed, 1 insertion(+), 1 deletion(-)\n+\n+diff --git a/sysdeps/powerpc/powerpc64/Makefile b/sysdeps/powerpc/powerpc64/Makefile\n+index 78d4f07e575f..fe96aae4d43e 100644\n+--- a/sysdeps/powerpc/powerpc64/Makefile\n++++ b/sysdeps/powerpc/powerpc64/Makefile\n+@@ -28,7 +28,7 @@ elide-routines.os += hp-timing\n+ ifneq ($(elf),no)\n+ # The initfini generation code doesn't work in the presence of -fPIC, so\n+ # we use -fpic instead which is much better.\n+-CFLAGS-initfini.s += -fpic -O1\n++CFLAGS-initfini.s += -fpic -O1 -fno-inline\n+ endif\n+ endif\n+ \n+-- \n+2.9.3\n+"}, {"sha": "c2d02ee85cf25cb4e43c89c60895d5cb22757cbf", "filename": "src/ci/docker/dist-powerpc64-linux/powerpc64-linux-gnu.config", "status": "added", "additions": 528, "deletions": 0, "changes": 528, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpowerpc64-linux-gnu.config", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpowerpc64-linux-gnu.config", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-powerpc64-linux%2Fpowerpc64-linux-gnu.config?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,528 @@\n+#\n+# Automatically generated file; DO NOT EDIT.\n+# Crosstool-NG Configuration\n+#\n+CT_CONFIGURE_has_make381=y\n+CT_CONFIGURE_has_xz=y\n+CT_MODULES=y\n+\n+#\n+# Paths and misc options\n+#\n+\n+#\n+# crosstool-NG behavior\n+#\n+# CT_OBSOLETE is not set\n+# CT_EXPERIMENTAL is not set\n+# CT_DEBUG_CT is not set\n+\n+#\n+# Paths\n+#\n+CT_LOCAL_TARBALLS_DIR=\"\"\n+CT_WORK_DIR=\"${CT_TOP_DIR}/.build\"\n+CT_PREFIX_DIR=\"/x-tools/${CT_TARGET}\"\n+CT_INSTALL_DIR=\"${CT_PREFIX_DIR}\"\n+CT_RM_RF_PREFIX_DIR=y\n+CT_REMOVE_DOCS=y\n+CT_INSTALL_DIR_RO=y\n+CT_STRIP_HOST_TOOLCHAIN_EXECUTABLES=y\n+# CT_STRIP_TARGET_TOOLCHAIN_EXECUTABLES is not set\n+\n+#\n+# Downloading\n+#\n+# CT_FORBID_DOWNLOAD is not set\n+# CT_FORCE_DOWNLOAD is not set\n+CT_CONNECT_TIMEOUT=10\n+# CT_ONLY_DOWNLOAD is not set\n+# CT_USE_MIRROR is not set\n+\n+#\n+# Extracting\n+#\n+# CT_FORCE_EXTRACT is not set\n+CT_OVERIDE_CONFIG_GUESS_SUB=y\n+# CT_ONLY_EXTRACT is not set\n+# CT_PATCH_BUNDLED is not set\n+# CT_PATCH_LOCAL is not set\n+CT_PATCH_BUNDLED_LOCAL=y\n+# CT_PATCH_LOCAL_BUNDLED is not set\n+# CT_PATCH_BUNDLED_FALLBACK_LOCAL is not set\n+# CT_PATCH_LOCAL_FALLBACK_BUNDLED is not set\n+# CT_PATCH_NONE is not set\n+CT_PATCH_ORDER=\"bundled,local\"\n+CT_PATCH_USE_LOCAL=y\n+CT_LOCAL_PATCH_DIR=\"/tmp/patches\"\n+\n+#\n+# Build behavior\n+#\n+CT_PARALLEL_JOBS=0\n+CT_LOAD=\"\"\n+CT_USE_PIPES=y\n+CT_EXTRA_CFLAGS_FOR_BUILD=\"\"\n+CT_EXTRA_LDFLAGS_FOR_BUILD=\"\"\n+CT_EXTRA_CFLAGS_FOR_HOST=\"\"\n+CT_EXTRA_LDFLAGS_FOR_HOST=\"\"\n+# CT_CONFIG_SHELL_SH is not set\n+# CT_CONFIG_SHELL_ASH is not set\n+CT_CONFIG_SHELL_BASH=y\n+# CT_CONFIG_SHELL_CUSTOM is not set\n+CT_CONFIG_SHELL=\"${bash}\"\n+\n+#\n+# Logging\n+#\n+# CT_LOG_ERROR is not set\n+# CT_LOG_WARN is not set\n+CT_LOG_INFO=y\n+# CT_LOG_EXTRA is not set\n+# CT_LOG_ALL is not set\n+# CT_LOG_DEBUG is not set\n+CT_LOG_LEVEL_MAX=\"INFO\"\n+# CT_LOG_SEE_TOOLS_WARN is not set\n+CT_LOG_PROGRESS_BAR=y\n+CT_LOG_TO_FILE=y\n+CT_LOG_FILE_COMPRESS=y\n+\n+#\n+# Target options\n+#\n+CT_ARCH=\"powerpc\"\n+CT_ARCH_SUPPORTS_BOTH_ENDIAN=y\n+CT_ARCH_SUPPORTS_32=y\n+CT_ARCH_SUPPORTS_64=y\n+CT_ARCH_SUPPORTS_WITH_ABI=y\n+CT_ARCH_SUPPORTS_WITH_CPU=y\n+CT_ARCH_SUPPORTS_WITH_TUNE=y\n+CT_ARCH_SUPPORTS_WITH_FLOAT=y\n+CT_ARCH_DEFAULT_BE=y\n+CT_ARCH_DEFAULT_32=y\n+CT_ARCH_ABI=\"\"\n+CT_ARCH_CPU=\"power4\"\n+CT_ARCH_TUNE=\"power6\"\n+CT_ARCH_BE=y\n+# CT_ARCH_LE is not set\n+# CT_ARCH_32 is not set\n+CT_ARCH_64=y\n+CT_ARCH_BITNESS=64\n+# CT_ARCH_FLOAT_HW is not set\n+# CT_ARCH_FLOAT_SW is not set\n+CT_TARGET_CFLAGS=\"\"\n+CT_TARGET_LDFLAGS=\"\"\n+# CT_ARCH_alpha is not set\n+# CT_ARCH_arm is not set\n+# CT_ARCH_avr is not set\n+# CT_ARCH_m68k is not set\n+# CT_ARCH_mips is not set\n+# CT_ARCH_nios2 is not set\n+CT_ARCH_powerpc=y\n+# CT_ARCH_s390 is not set\n+# CT_ARCH_sh is not set\n+# CT_ARCH_sparc is not set\n+# CT_ARCH_x86 is not set\n+# CT_ARCH_xtensa is not set\n+CT_ARCH_alpha_AVAILABLE=y\n+CT_ARCH_arm_AVAILABLE=y\n+CT_ARCH_avr_AVAILABLE=y\n+CT_ARCH_m68k_AVAILABLE=y\n+CT_ARCH_microblaze_AVAILABLE=y\n+CT_ARCH_mips_AVAILABLE=y\n+CT_ARCH_nios2_AVAILABLE=y\n+CT_ARCH_powerpc_AVAILABLE=y\n+CT_ARCH_s390_AVAILABLE=y\n+CT_ARCH_sh_AVAILABLE=y\n+CT_ARCH_sparc_AVAILABLE=y\n+CT_ARCH_x86_AVAILABLE=y\n+CT_ARCH_xtensa_AVAILABLE=y\n+CT_ARCH_SUFFIX=\"\"\n+\n+#\n+# Generic target options\n+#\n+# CT_MULTILIB is not set\n+CT_ARCH_USE_MMU=y\n+CT_ARCH_ENDIAN=\"big\"\n+\n+#\n+# Target optimisations\n+#\n+CT_ARCH_FLOAT_AUTO=y\n+CT_ARCH_FLOAT=\"auto\"\n+\n+#\n+# powerpc other options\n+#\n+CT_ARCH_powerpc_ABI=\"\"\n+CT_ARCH_powerpc_ABI_DEFAULT=y\n+# CT_ARCH_powerpc_ABI_SPE is not set\n+\n+#\n+# Toolchain options\n+#\n+\n+#\n+# General toolchain options\n+#\n+CT_FORCE_SYSROOT=y\n+CT_USE_SYSROOT=y\n+CT_SYSROOT_NAME=\"sysroot\"\n+CT_SYSROOT_DIR_PREFIX=\"\"\n+CT_WANTS_STATIC_LINK=y\n+# CT_STATIC_TOOLCHAIN is not set\n+CT_TOOLCHAIN_PKGVERSION=\"\"\n+CT_TOOLCHAIN_BUGURL=\"\"\n+\n+#\n+# Tuple completion and aliasing\n+#\n+CT_TARGET_VENDOR=\"unknown\"\n+CT_TARGET_ALIAS_SED_EXPR=\"\"\n+CT_TARGET_ALIAS=\"\"\n+\n+#\n+# Toolchain type\n+#\n+CT_CROSS=y\n+# CT_CANADIAN is not set\n+CT_TOOLCHAIN_TYPE=\"cross\"\n+\n+#\n+# Build system\n+#\n+CT_BUILD=\"\"\n+CT_BUILD_PREFIX=\"\"\n+CT_BUILD_SUFFIX=\"\"\n+\n+#\n+# Misc options\n+#\n+# CT_TOOLCHAIN_ENABLE_NLS is not set\n+\n+#\n+# Operating System\n+#\n+CT_KERNEL_SUPPORTS_SHARED_LIBS=y\n+CT_KERNEL=\"linux\"\n+CT_KERNEL_VERSION=\"2.6.32.68\"\n+# CT_KERNEL_bare_metal is not set\n+CT_KERNEL_linux=y\n+CT_KERNEL_bare_metal_AVAILABLE=y\n+CT_KERNEL_linux_AVAILABLE=y\n+# CT_KERNEL_V_4_3 is not set\n+# CT_KERNEL_V_4_2 is not set\n+# CT_KERNEL_V_4_1 is not set\n+# CT_KERNEL_V_3_18 is not set\n+# CT_KERNEL_V_3_14 is not set\n+# CT_KERNEL_V_3_12 is not set\n+# CT_KERNEL_V_3_10 is not set\n+# CT_KERNEL_V_3_4 is not set\n+# CT_KERNEL_V_3_2 is not set\n+CT_KERNEL_V_2_6_32=y\n+# CT_KERNEL_LINUX_CUSTOM is not set\n+CT_KERNEL_windows_AVAILABLE=y\n+\n+#\n+# Common kernel options\n+#\n+CT_SHARED_LIBS=y\n+\n+#\n+# linux other options\n+#\n+CT_KERNEL_LINUX_VERBOSITY_0=y\n+# CT_KERNEL_LINUX_VERBOSITY_1 is not set\n+# CT_KERNEL_LINUX_VERBOSITY_2 is not set\n+CT_KERNEL_LINUX_VERBOSE_LEVEL=0\n+CT_KERNEL_LINUX_INSTALL_CHECK=y\n+\n+#\n+# Binary utilities\n+#\n+CT_ARCH_BINFMT_ELF=y\n+CT_BINUTILS=\"binutils\"\n+CT_BINUTILS_binutils=y\n+\n+#\n+# GNU binutils\n+#\n+# CT_CC_BINUTILS_SHOW_LINARO is not set\n+CT_BINUTILS_V_2_25_1=y\n+# CT_BINUTILS_V_2_25 is not set\n+# CT_BINUTILS_V_2_24 is not set\n+# CT_BINUTILS_V_2_23_2 is not set\n+# CT_BINUTILS_V_2_23_1 is not set\n+# CT_BINUTILS_V_2_22 is not set\n+# CT_BINUTILS_V_2_21_53 is not set\n+# CT_BINUTILS_V_2_21_1a is not set\n+# CT_BINUTILS_V_2_20_1a is not set\n+# CT_BINUTILS_V_2_19_1a is not set\n+# CT_BINUTILS_V_2_18a is not set\n+CT_BINUTILS_VERSION=\"2.25.1\"\n+CT_BINUTILS_2_25_1_or_later=y\n+CT_BINUTILS_2_25_or_later=y\n+CT_BINUTILS_2_24_or_later=y\n+CT_BINUTILS_2_23_or_later=y\n+CT_BINUTILS_2_22_or_later=y\n+CT_BINUTILS_2_21_or_later=y\n+CT_BINUTILS_2_20_or_later=y\n+CT_BINUTILS_2_19_or_later=y\n+CT_BINUTILS_2_18_or_later=y\n+CT_BINUTILS_HAS_HASH_STYLE=y\n+CT_BINUTILS_HAS_GOLD=y\n+CT_BINUTILS_HAS_PLUGINS=y\n+CT_BINUTILS_HAS_PKGVERSION_BUGURL=y\n+CT_BINUTILS_FORCE_LD_BFD=y\n+CT_BINUTILS_LINKER_LD=y\n+CT_BINUTILS_LINKERS_LIST=\"ld\"\n+CT_BINUTILS_LINKER_DEFAULT=\"bfd\"\n+# CT_BINUTILS_PLUGINS is not set\n+CT_BINUTILS_EXTRA_CONFIG_ARRAY=\"\"\n+# CT_BINUTILS_FOR_TARGET is not set\n+\n+#\n+# binutils other options\n+#\n+\n+#\n+# C-library\n+#\n+CT_LIBC=\"glibc\"\n+CT_LIBC_VERSION=\"2.12.2\"\n+CT_LIBC_glibc=y\n+# CT_LIBC_musl is not set\n+# CT_LIBC_uClibc is not set\n+CT_LIBC_avr_libc_AVAILABLE=y\n+CT_LIBC_glibc_AVAILABLE=y\n+CT_THREADS=\"nptl\"\n+# CT_CC_GLIBC_SHOW_LINARO is not set\n+# CT_LIBC_GLIBC_V_2_22 is not set\n+# CT_LIBC_GLIBC_V_2_21 is not set\n+# CT_LIBC_GLIBC_V_2_20 is not set\n+# CT_LIBC_GLIBC_V_2_19 is not set\n+# CT_LIBC_GLIBC_V_2_18 is not set\n+# CT_LIBC_GLIBC_V_2_17 is not set\n+# CT_LIBC_GLIBC_V_2_16_0 is not set\n+# CT_LIBC_GLIBC_V_2_15 is not set\n+# CT_LIBC_GLIBC_V_2_14_1 is not set\n+# CT_LIBC_GLIBC_V_2_14 is not set\n+# CT_LIBC_GLIBC_V_2_13 is not set\n+CT_LIBC_GLIBC_V_2_12_2=y\n+# CT_LIBC_GLIBC_V_2_12_1 is not set\n+# CT_LIBC_GLIBC_V_2_11_1 is not set\n+# CT_LIBC_GLIBC_V_2_11 is not set\n+# CT_LIBC_GLIBC_V_2_10_1 is not set\n+# CT_LIBC_GLIBC_V_2_9 is not set\n+# CT_LIBC_GLIBC_V_2_8 is not set\n+CT_LIBC_mingw_AVAILABLE=y\n+CT_LIBC_musl_AVAILABLE=y\n+CT_LIBC_newlib_AVAILABLE=y\n+CT_LIBC_none_AVAILABLE=y\n+CT_LIBC_uClibc_AVAILABLE=y\n+CT_LIBC_SUPPORT_THREADS_ANY=y\n+CT_LIBC_SUPPORT_THREADS_NATIVE=y\n+\n+#\n+# Common C library options\n+#\n+CT_THREADS_NATIVE=y\n+CT_LIBC_XLDD=y\n+\n+#\n+# glibc other options\n+#\n+CT_LIBC_GLIBC_PORTS_EXTERNAL=y\n+CT_LIBC_glibc_familly=y\n+CT_LIBC_GLIBC_EXTRA_CONFIG_ARRAY=\"\"\n+CT_LIBC_GLIBC_CONFIGPARMS=\"\"\n+CT_LIBC_GLIBC_EXTRA_CFLAGS=\"\"\n+CT_LIBC_EXTRA_CC_ARGS=\"\"\n+# CT_LIBC_DISABLE_VERSIONING is not set\n+CT_LIBC_OLDEST_ABI=\"\"\n+CT_LIBC_GLIBC_FORCE_UNWIND=y\n+# CT_LIBC_GLIBC_USE_PORTS is not set\n+CT_LIBC_ADDONS_LIST=\"\"\n+# CT_LIBC_LOCALES is not set\n+# CT_LIBC_GLIBC_KERNEL_VERSION_NONE is not set\n+CT_LIBC_GLIBC_KERNEL_VERSION_AS_HEADERS=y\n+# CT_LIBC_GLIBC_KERNEL_VERSION_CHOSEN is not set\n+CT_LIBC_GLIBC_MIN_KERNEL=\"2.6.32.68\"\n+\n+#\n+# C compiler\n+#\n+CT_CC=\"gcc\"\n+CT_CC_CORE_PASSES_NEEDED=y\n+CT_CC_CORE_PASS_1_NEEDED=y\n+CT_CC_CORE_PASS_2_NEEDED=y\n+CT_CC_gcc=y\n+# CT_CC_GCC_SHOW_LINARO is not set\n+# CT_CC_GCC_V_5_2_0 is not set\n+CT_CC_GCC_V_4_9_3=y\n+# CT_CC_GCC_V_4_8_5 is not set\n+# CT_CC_GCC_V_4_7_4 is not set\n+# CT_CC_GCC_V_4_6_4 is not set\n+# CT_CC_GCC_V_4_5_4 is not set\n+# CT_CC_GCC_V_4_4_7 is not set\n+# CT_CC_GCC_V_4_3_6 is not set\n+# CT_CC_GCC_V_4_2_4 is not set\n+CT_CC_GCC_4_2_or_later=y\n+CT_CC_GCC_4_3_or_later=y\n+CT_CC_GCC_4_4_or_later=y\n+CT_CC_GCC_4_5_or_later=y\n+CT_CC_GCC_4_6_or_later=y\n+CT_CC_GCC_4_7_or_later=y\n+CT_CC_GCC_4_8_or_later=y\n+CT_CC_GCC_4_9=y\n+CT_CC_GCC_4_9_or_later=y\n+CT_CC_GCC_HAS_GRAPHITE=y\n+CT_CC_GCC_USE_GRAPHITE=y\n+CT_CC_GCC_HAS_LTO=y\n+CT_CC_GCC_USE_LTO=y\n+CT_CC_GCC_HAS_PKGVERSION_BUGURL=y\n+CT_CC_GCC_HAS_BUILD_ID=y\n+CT_CC_GCC_HAS_LNK_HASH_STYLE=y\n+CT_CC_GCC_USE_GMP_MPFR=y\n+CT_CC_GCC_USE_MPC=y\n+CT_CC_GCC_HAS_LIBQUADMATH=y\n+CT_CC_GCC_HAS_LIBSANITIZER=y\n+CT_CC_GCC_VERSION=\"4.9.3\"\n+# CT_CC_LANG_FORTRAN is not set\n+CT_CC_GCC_ENABLE_CXX_FLAGS=\"\"\n+CT_CC_GCC_CORE_EXTRA_CONFIG_ARRAY=\"\"\n+CT_CC_GCC_EXTRA_CONFIG_ARRAY=\"\"\n+CT_CC_GCC_EXTRA_ENV_ARRAY=\"\"\n+CT_CC_GCC_STATIC_LIBSTDCXX=y\n+# CT_CC_GCC_SYSTEM_ZLIB is not set\n+\n+#\n+# Optimisation features\n+#\n+\n+#\n+# Settings for libraries running on target\n+#\n+CT_CC_GCC_ENABLE_TARGET_OPTSPACE=y\n+# CT_CC_GCC_LIBMUDFLAP is not set\n+# CT_CC_GCC_LIBGOMP is not set\n+# CT_CC_GCC_LIBSSP is not set\n+# CT_CC_GCC_LIBQUADMATH is not set\n+# CT_CC_GCC_LIBSANITIZER is not set\n+\n+#\n+# Misc. obscure options.\n+#\n+CT_CC_CXA_ATEXIT=y\n+# CT_CC_GCC_DISABLE_PCH is not set\n+CT_CC_GCC_SJLJ_EXCEPTIONS=m\n+CT_CC_GCC_LDBL_128=m\n+# CT_CC_GCC_BUILD_ID is not set\n+CT_CC_GCC_LNK_HASH_STYLE_DEFAULT=y\n+# CT_CC_GCC_LNK_HASH_STYLE_SYSV is not set\n+# CT_CC_GCC_LNK_HASH_STYLE_GNU is not set\n+# CT_CC_GCC_LNK_HASH_STYLE_BOTH is not set\n+CT_CC_GCC_LNK_HASH_STYLE=\"\"\n+CT_CC_GCC_DEC_FLOAT_AUTO=y\n+# CT_CC_GCC_DEC_FLOAT_BID is not set\n+# CT_CC_GCC_DEC_FLOAT_DPD is not set\n+# CT_CC_GCC_DEC_FLOATS_NO is not set\n+CT_CC_SUPPORT_CXX=y\n+CT_CC_SUPPORT_FORTRAN=y\n+CT_CC_SUPPORT_JAVA=y\n+CT_CC_SUPPORT_ADA=y\n+CT_CC_SUPPORT_OBJC=y\n+CT_CC_SUPPORT_OBJCXX=y\n+CT_CC_SUPPORT_GOLANG=y\n+\n+#\n+# Additional supported languages:\n+#\n+CT_CC_LANG_CXX=y\n+# CT_CC_LANG_JAVA is not set\n+\n+#\n+# Debug facilities\n+#\n+# CT_DEBUG_dmalloc is not set\n+# CT_DEBUG_duma is not set\n+# CT_DEBUG_gdb is not set\n+# CT_DEBUG_ltrace is not set\n+# CT_DEBUG_strace is not set\n+\n+#\n+# Companion libraries\n+#\n+CT_COMPLIBS_NEEDED=y\n+CT_LIBICONV_NEEDED=y\n+CT_GETTEXT_NEEDED=y\n+CT_GMP_NEEDED=y\n+CT_MPFR_NEEDED=y\n+CT_ISL_NEEDED=y\n+CT_CLOOG_NEEDED=y\n+CT_MPC_NEEDED=y\n+CT_COMPLIBS=y\n+CT_LIBICONV=y\n+CT_GETTEXT=y\n+CT_GMP=y\n+CT_MPFR=y\n+CT_ISL=y\n+CT_CLOOG=y\n+CT_MPC=y\n+CT_LIBICONV_V_1_14=y\n+CT_LIBICONV_VERSION=\"1.14\"\n+CT_GETTEXT_V_0_19_6=y\n+CT_GETTEXT_VERSION=\"0.19.6\"\n+CT_GMP_V_6_0_0=y\n+# CT_GMP_V_5_1_3 is not set\n+# CT_GMP_V_5_1_1 is not set\n+# CT_GMP_V_5_0_2 is not set\n+# CT_GMP_V_5_0_1 is not set\n+# CT_GMP_V_4_3_2 is not set\n+# CT_GMP_V_4_3_1 is not set\n+# CT_GMP_V_4_3_0 is not set\n+CT_GMP_5_0_2_or_later=y\n+CT_GMP_VERSION=\"6.0.0a\"\n+CT_MPFR_V_3_1_3=y\n+# CT_MPFR_V_3_1_2 is not set\n+# CT_MPFR_V_3_1_0 is not set\n+# CT_MPFR_V_3_0_1 is not set\n+# CT_MPFR_V_3_0_0 is not set\n+# CT_MPFR_V_2_4_2 is not set\n+# CT_MPFR_V_2_4_1 is not set\n+# CT_MPFR_V_2_4_0 is not set\n+CT_MPFR_VERSION=\"3.1.3\"\n+CT_ISL_V_0_14=y\n+CT_ISL_V_0_14_or_later=y\n+CT_ISL_V_0_12_or_later=y\n+CT_ISL_VERSION=\"0.14\"\n+CT_CLOOG_V_0_18_4=y\n+# CT_CLOOG_V_0_18_1 is not set\n+# CT_CLOOG_V_0_18_0 is not set\n+CT_CLOOG_VERSION=\"0.18.4\"\n+CT_CLOOG_0_18_4_or_later=y\n+CT_CLOOG_0_18_or_later=y\n+CT_MPC_V_1_0_3=y\n+# CT_MPC_V_1_0_2 is not set\n+# CT_MPC_V_1_0_1 is not set\n+# CT_MPC_V_1_0 is not set\n+# CT_MPC_V_0_9 is not set\n+# CT_MPC_V_0_8_2 is not set\n+# CT_MPC_V_0_8_1 is not set\n+# CT_MPC_V_0_7 is not set\n+CT_MPC_VERSION=\"1.0.3\"\n+\n+#\n+# Companion libraries common options\n+#\n+# CT_COMPLIBS_CHECK is not set\n+\n+#\n+# Companion tools\n+#\n+\n+#\n+# READ HELP before you say 'Y' below !!!\n+#\n+# CT_COMP_TOOLS is not set"}, {"sha": "589b5fd530fc7cce13bd5bf4fd9a791ed52aa91f", "filename": "src/ci/docker/dist-s390x-linux-netbsd/Dockerfile", "status": "modified", "additions": 59, "deletions": 15, "changes": 74, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2FDockerfile?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -1,37 +1,81 @@\n FROM ubuntu:16.04\n \n RUN apt-get update && apt-get install -y --no-install-recommends \\\n+  automake \\\n+  bison \\\n+  bzip2 \\\n+  ca-certificates \\\n+  cmake \\\n+  curl \\\n+  file \\\n+  flex \\\n   g++ \\\n+  gawk \\\n+  gdb \\\n+  git \\\n+  gperf \\\n+  help2man \\\n+  libncurses-dev \\\n+  libtool-bin \\\n   make \\\n-  file \\\n-  curl \\\n-  ca-certificates \\\n+  patch \\\n   python2.7 \\\n-  git \\\n-  cmake \\\n   sudo \\\n-  bzip2 \\\n-  xz-utils \\\n+  texinfo \\\n   wget \\\n-  patch \\\n-  g++-s390x-linux-gnu\n+  xz-utils\n \n-COPY build-toolchain.sh /tmp/\n-RUN sh /tmp/build-toolchain.sh\n+ENV SCCACHE_DIGEST=7237e38e029342fa27b7ac25412cb9d52554008b12389727320bd533fd7f05b6a96d55485f305caf95e5c8f5f97c3313e10012ccad3e752aba2518f3522ba783\n+RUN curl -L https://api.pub.build.mozilla.org/tooltool/sha512/$SCCACHE_DIGEST | \\\n+      tar xJf - -C /usr/local/bin --strip-components=1\n \n RUN curl -OL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-init_1.2.0_amd64.deb && \\\n     dpkg -i dumb-init_*.deb && \\\n     rm dumb-init_*.deb\n ENTRYPOINT [\"/usr/bin/dumb-init\", \"--\"]\n \n-ENV SCCACHE_DIGEST=7237e38e029342fa27b7ac25412cb9d52554008b12389727320bd533fd7f05b6a96d55485f305caf95e5c8f5f97c3313e10012ccad3e752aba2518f3522ba783\n-RUN curl -L https://api.pub.build.mozilla.org/tooltool/sha512/$SCCACHE_DIGEST | \\\n-      tar xJf - -C /usr/local/bin --strip-components=1\n+# Ubuntu 16.04 (this contianer) ships with make 4, but something in the\n+# toolchains we build below chokes on that, so go back to make 3\n+RUN curl https://ftp.gnu.org/gnu/make/make-3.81.tar.gz | tar xzf - && \\\n+      cd make-3.81 && \\\n+      ./configure --prefix=/usr && \\\n+      make && \\\n+      make install && \\\n+      cd .. && \\\n+      rm -rf make-3.81\n+\n+RUN curl http://crosstool-ng.org/download/crosstool-ng/crosstool-ng-1.22.0.tar.bz2 | \\\n+      tar xjf - && \\\n+      cd crosstool-ng && \\\n+      ./configure --prefix=/usr/local && \\\n+      make -j$(nproc) && \\\n+      make install && \\\n+      cd .. && \\\n+      rm -rf crosstool-ng\n+\n+RUN groupadd -r rustbuild && useradd -m -r -g rustbuild rustbuild\n+RUN mkdir /x-tools && chown rustbuild:rustbuild /x-tools\n+USER rustbuild\n+WORKDIR /tmp\n+\n+COPY patches/ /tmp/patches/\n+COPY s390x-linux-gnu.config build-s390x-toolchain.sh /tmp/\n+RUN ./build-s390x-toolchain.sh\n+\n+USER root\n+\n+COPY build-netbsd-toolchain.sh /tmp/\n+RUN ./build-netbsd-toolchain.sh\n+\n+ENV PATH=$PATH:/x-tools/s390x-ibm-linux-gnu/bin\n \n ENV \\\n     AR_x86_64_unknown_netbsd=x86_64-unknown-netbsd-ar \\\n     CC_x86_64_unknown_netbsd=x86_64-unknown-netbsd-gcc \\\n-    CXX_x86_64_unknown_netbsd=x86_64-unknown-netbsd-g++\n+    CXX_x86_64_unknown_netbsd=x86_64-unknown-netbsd-g++ \\\n+    CC_s390x_unknown_linux_gnu=s390x-ibm-linux-gnu-gcc \\\n+    AR_s390x_unknown_linux_gnu=s390x-ibm-linux-gnu-ar \\\n+    CXX_s390x_unknown_linux_gnu=s390x-ibm-linux-gnu-g++\n \n ENV HOSTS=x86_64-unknown-netbsd\n ENV HOSTS=$HOSTS,s390x-unknown-linux-gnu"}, {"sha": "654b458ea409e01335ebe1816ab6b40a58991761", "filename": "src/ci/docker/dist-s390x-linux-netbsd/build-netbsd-toolchain.sh", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fbuild-netbsd-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fbuild-netbsd-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fbuild-netbsd-toolchain.sh?ref=d01e22e53f7495499864c371e13e422611b8c377", "previous_filename": "src/ci/docker/dist-s390x-linux-netbsd/build-toolchain.sh"}, {"sha": "b4995e20dc69b1058bc1577ea3e5aa535d790dd8", "filename": "src/ci/docker/dist-s390x-linux-netbsd/build-s390x-toolchain.sh", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fbuild-s390x-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fbuild-s390x-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fbuild-s390x-toolchain.sh?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,36 @@\n+#!/bin/bash\n+# Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+# file at the top-level directory of this distribution and at\n+# http://rust-lang.org/COPYRIGHT.\n+#\n+# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+# option. This file may not be copied, modified, or distributed\n+# except according to those terms.\n+\n+set -ex\n+\n+hide_output() {\n+  set +x\n+  on_err=\"\n+echo ERROR: An error was encountered with the build.\n+cat /tmp/build.log\n+exit 1\n+\"\n+  trap \"$on_err\" ERR\n+  bash -c \"while true; do sleep 30; echo \\$(date) - building ...; done\" &\n+  PING_LOOP_PID=$!\n+  $@ &> /tmp/build.log\n+  rm /tmp/build.log\n+  trap - ERR\n+  kill $PING_LOOP_PID\n+  set -x\n+}\n+\n+mkdir build\n+cd build\n+cp ../s390x-linux-gnu.config .config\n+hide_output ct-ng build\n+cd ..\n+rm -rf build"}, {"sha": "cba416ed2f70bc12990229442e23feb47a0fdd3c", "filename": "src/ci/docker/dist-s390x-linux-netbsd/patches/glibc/2.12.2/001-Use-.machine-to-prevent-AS-from-complaining-about-z9.patch", "status": "added", "additions": 63, "deletions": 0, "changes": 63, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fpatches%2Fglibc%2F2.12.2%2F001-Use-.machine-to-prevent-AS-from-complaining-about-z9.patch", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fpatches%2Fglibc%2F2.12.2%2F001-Use-.machine-to-prevent-AS-from-complaining-about-z9.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fpatches%2Fglibc%2F2.12.2%2F001-Use-.machine-to-prevent-AS-from-complaining-about-z9.patch?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,63 @@\n+From 2739047682590b1df473401b4febf424f857fccf Mon Sep 17 00:00:00 2001\n+From: Andreas Krebbel <Andreas.Krebbel@de.ibm.com>\n+Date: Sun, 17 Apr 2011 20:43:59 -0400\n+Subject: [PATCH] Use .machine to prevent AS from complaining about z9-109\n+ instructions in iconv modules\n+\n+---\n+ sysdeps/s390/s390-64/utf16-utf32-z9.c | 5 ++++-\n+ sysdeps/s390/s390-64/utf8-utf16-z9.c  | 5 ++++-\n+ sysdeps/s390/s390-64/utf8-utf32-z9.c  | 5 ++++-\n+ 3 files changed, 12 insertions(+), 3 deletions(-)\n+\n+diff --git a/sysdeps/s390/s390-64/utf16-utf32-z9.c b/sysdeps/s390/s390-64/utf16-utf32-z9.c\n+index 14daf2118fe5..5bcaaaedec9c 100644\n+--- a/sysdeps/s390/s390-64/utf16-utf32-z9.c\n++++ b/sysdeps/s390/s390-64/utf16-utf32-z9.c\n+@@ -169,7 +169,10 @@ gconv_end (struct __gconv_step *data)\n+     register unsigned long long outlen asm(\"11\") = outend - outptr;\t\\\n+     uint64_t cc = 0;\t\t\t\t\t\t\t\\\n+ \t\t\t\t\t\t\t\t\t\\\n+-    asm volatile (\"0: \" INSTRUCTION \"  \\n\\t\"\t\t\t\t\\\n++    asm volatile (\".machine push       \\n\\t\"\t\t\t\t\\\n++                  \".machine \\\"z9-109\\\" \\n\\t\"\t\t\t\t\\\n++\t\t  \"0: \" INSTRUCTION \"  \\n\\t\"\t\t\t\t\\\n++                  \".machine pop        \\n\\t\"\t\t\t\t\\\n+                   \"   jo     0b        \\n\\t\"\t\t\t\t\\\n+ \t\t  \"   ipm    %2        \\n\"\t\t\t        \\\n+ \t\t  : \"+a\" (pOutput), \"+a\" (pInput), \"+d\" (cc),\t\t\\\n+diff --git a/sysdeps/s390/s390-64/utf8-utf16-z9.c b/sysdeps/s390/s390-64/utf8-utf16-z9.c\n+index 5f73f3c59e21..812a42fae44c 100644\n+--- a/sysdeps/s390/s390-64/utf8-utf16-z9.c\n++++ b/sysdeps/s390/s390-64/utf8-utf16-z9.c\n+@@ -151,7 +151,10 @@ gconv_end (struct __gconv_step *data)\n+     register unsigned long long outlen asm(\"11\") = outend - outptr;\t\\\n+     uint64_t cc = 0;\t\t\t\t\t\t\t\\\n+ \t\t\t\t\t\t\t\t\t\\\n+-    asm volatile (\"0: \" INSTRUCTION \"  \\n\\t\"\t\t\t\t\\\n++    asm volatile (\".machine push       \\n\\t\"\t\t\t\t\\\n++                  \".machine \\\"z9-109\\\" \\n\\t\"\t\t\t\t\\\n++\t\t  \"0: \" INSTRUCTION \"  \\n\\t\"\t\t\t\t\\\n++                  \".machine pop        \\n\\t\"\t\t\t\t\\\n+                   \"   jo     0b        \\n\\t\"\t\t\t\t\\\n+ \t\t  \"   ipm    %2        \\n\"\t\t\t        \\\n+ \t\t  : \"+a\" (pOutput), \"+a\" (pInput), \"+d\" (cc),\t\t\\\n+diff --git a/sysdeps/s390/s390-64/utf8-utf32-z9.c b/sysdeps/s390/s390-64/utf8-utf32-z9.c\n+index 17ef8bc890c3..0ffd848c8124 100644\n+--- a/sysdeps/s390/s390-64/utf8-utf32-z9.c\n++++ b/sysdeps/s390/s390-64/utf8-utf32-z9.c\n+@@ -155,7 +155,10 @@ gconv_end (struct __gconv_step *data)\n+     register unsigned long long outlen asm(\"11\") = outend - outptr;\t\\\n+     uint64_t cc = 0;\t\t\t\t\t\t\t\\\n+ \t\t\t\t\t\t\t\t\t\\\n+-    asm volatile (\"0: \" INSTRUCTION \"  \\n\\t\"\t\t\t\t\\\n++    asm volatile (\".machine push       \\n\\t\"\t\t\t\t\\\n++                  \".machine \\\"z9-109\\\" \\n\\t\"\t\t\t\t\\\n++\t\t  \"0: \" INSTRUCTION \"  \\n\\t\"\t\t\t\t\\\n++                  \".machine pop        \\n\\t\"\t\t\t\t\\\n+                   \"   jo     0b        \\n\\t\"\t\t\t\t\\\n+ \t\t  \"   ipm    %2        \\n\"\t\t\t\t\\\n+ \t\t  : \"+a\" (pOutput), \"+a\" (pInput), \"+d\" (cc),\t\t\\\n+-- \n+2.9.3\n+"}, {"sha": "fa5e4510987f1ca682a642234f52353481e77e1f", "filename": "src/ci/docker/dist-s390x-linux-netbsd/s390x-linux-gnu.config", "status": "added", "additions": 508, "deletions": 0, "changes": 508, "blob_url": "https://github.com/rust-lang/rust/blob/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fs390x-linux-gnu.config", "raw_url": "https://github.com/rust-lang/rust/raw/d01e22e53f7495499864c371e13e422611b8c377/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fs390x-linux-gnu.config", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fdist-s390x-linux-netbsd%2Fs390x-linux-gnu.config?ref=d01e22e53f7495499864c371e13e422611b8c377", "patch": "@@ -0,0 +1,508 @@\n+#\n+# Automatically generated file; DO NOT EDIT.\n+# Crosstool-NG Configuration\n+#\n+CT_CONFIGURE_has_make381=y\n+CT_CONFIGURE_has_xz=y\n+CT_MODULES=y\n+\n+#\n+# Paths and misc options\n+#\n+\n+#\n+# crosstool-NG behavior\n+#\n+# CT_OBSOLETE is not set\n+# CT_EXPERIMENTAL is not set\n+# CT_DEBUG_CT is not set\n+\n+#\n+# Paths\n+#\n+CT_LOCAL_TARBALLS_DIR=\"\"\n+CT_WORK_DIR=\"${CT_TOP_DIR}/.build\"\n+CT_PREFIX_DIR=\"/x-tools/${CT_TARGET}\"\n+CT_INSTALL_DIR=\"${CT_PREFIX_DIR}\"\n+CT_RM_RF_PREFIX_DIR=y\n+CT_REMOVE_DOCS=y\n+CT_INSTALL_DIR_RO=y\n+CT_STRIP_HOST_TOOLCHAIN_EXECUTABLES=y\n+# CT_STRIP_TARGET_TOOLCHAIN_EXECUTABLES is not set\n+\n+#\n+# Downloading\n+#\n+# CT_FORBID_DOWNLOAD is not set\n+# CT_FORCE_DOWNLOAD is not set\n+CT_CONNECT_TIMEOUT=10\n+# CT_ONLY_DOWNLOAD is not set\n+# CT_USE_MIRROR is not set\n+\n+#\n+# Extracting\n+#\n+# CT_FORCE_EXTRACT is not set\n+CT_OVERIDE_CONFIG_GUESS_SUB=y\n+# CT_ONLY_EXTRACT is not set\n+# CT_PATCH_BUNDLED is not set\n+# CT_PATCH_LOCAL is not set\n+CT_PATCH_BUNDLED_LOCAL=y\n+# CT_PATCH_LOCAL_BUNDLED is not set\n+# CT_PATCH_BUNDLED_FALLBACK_LOCAL is not set\n+# CT_PATCH_LOCAL_FALLBACK_BUNDLED is not set\n+# CT_PATCH_NONE is not set\n+CT_PATCH_ORDER=\"bundled,local\"\n+CT_PATCH_USE_LOCAL=y\n+CT_LOCAL_PATCH_DIR=\"/tmp/patches\"\n+\n+#\n+# Build behavior\n+#\n+CT_PARALLEL_JOBS=0\n+CT_LOAD=\"\"\n+CT_USE_PIPES=y\n+CT_EXTRA_CFLAGS_FOR_BUILD=\"\"\n+CT_EXTRA_LDFLAGS_FOR_BUILD=\"\"\n+CT_EXTRA_CFLAGS_FOR_HOST=\"\"\n+CT_EXTRA_LDFLAGS_FOR_HOST=\"\"\n+# CT_CONFIG_SHELL_SH is not set\n+# CT_CONFIG_SHELL_ASH is not set\n+CT_CONFIG_SHELL_BASH=y\n+# CT_CONFIG_SHELL_CUSTOM is not set\n+CT_CONFIG_SHELL=\"${bash}\"\n+\n+#\n+# Logging\n+#\n+# CT_LOG_ERROR is not set\n+# CT_LOG_WARN is not set\n+CT_LOG_INFO=y\n+# CT_LOG_EXTRA is not set\n+# CT_LOG_ALL is not set\n+# CT_LOG_DEBUG is not set\n+CT_LOG_LEVEL_MAX=\"INFO\"\n+# CT_LOG_SEE_TOOLS_WARN is not set\n+CT_LOG_PROGRESS_BAR=y\n+CT_LOG_TO_FILE=y\n+CT_LOG_FILE_COMPRESS=y\n+\n+#\n+# Target options\n+#\n+CT_ARCH=\"s390\"\n+CT_ARCH_SUPPORTS_32=y\n+CT_ARCH_SUPPORTS_64=y\n+CT_ARCH_SUPPORTS_WITH_FPU=y\n+CT_ARCH_DEFAULT_32=y\n+CT_ARCH_FPU=\"\"\n+# CT_ARCH_32 is not set\n+CT_ARCH_64=y\n+CT_ARCH_BITNESS=64\n+CT_TARGET_CFLAGS=\"\"\n+CT_TARGET_LDFLAGS=\"\"\n+# CT_ARCH_alpha is not set\n+# CT_ARCH_arm is not set\n+# CT_ARCH_avr is not set\n+# CT_ARCH_m68k is not set\n+# CT_ARCH_mips is not set\n+# CT_ARCH_nios2 is not set\n+# CT_ARCH_powerpc is not set\n+CT_ARCH_s390=y\n+# CT_ARCH_sh is not set\n+# CT_ARCH_sparc is not set\n+# CT_ARCH_x86 is not set\n+# CT_ARCH_xtensa is not set\n+CT_ARCH_alpha_AVAILABLE=y\n+CT_ARCH_arm_AVAILABLE=y\n+CT_ARCH_avr_AVAILABLE=y\n+CT_ARCH_m68k_AVAILABLE=y\n+CT_ARCH_microblaze_AVAILABLE=y\n+CT_ARCH_mips_AVAILABLE=y\n+CT_ARCH_nios2_AVAILABLE=y\n+CT_ARCH_powerpc_AVAILABLE=y\n+CT_ARCH_s390_AVAILABLE=y\n+CT_ARCH_sh_AVAILABLE=y\n+CT_ARCH_sparc_AVAILABLE=y\n+CT_ARCH_x86_AVAILABLE=y\n+CT_ARCH_xtensa_AVAILABLE=y\n+CT_ARCH_SUFFIX=\"\"\n+\n+#\n+# Generic target options\n+#\n+# CT_MULTILIB is not set\n+CT_ARCH_USE_MMU=y\n+\n+#\n+# Target optimisations\n+#\n+CT_ARCH_FLOAT=\"\"\n+\n+#\n+# Toolchain options\n+#\n+\n+#\n+# General toolchain options\n+#\n+CT_FORCE_SYSROOT=y\n+CT_USE_SYSROOT=y\n+CT_SYSROOT_NAME=\"sysroot\"\n+CT_SYSROOT_DIR_PREFIX=\"\"\n+CT_WANTS_STATIC_LINK=y\n+# CT_STATIC_TOOLCHAIN is not set\n+CT_TOOLCHAIN_PKGVERSION=\"\"\n+CT_TOOLCHAIN_BUGURL=\"\"\n+\n+#\n+# Tuple completion and aliasing\n+#\n+CT_TARGET_VENDOR=\"unknown\"\n+CT_TARGET_ALIAS_SED_EXPR=\"\"\n+CT_TARGET_ALIAS=\"\"\n+\n+#\n+# Toolchain type\n+#\n+CT_CROSS=y\n+# CT_CANADIAN is not set\n+CT_TOOLCHAIN_TYPE=\"cross\"\n+\n+#\n+# Build system\n+#\n+CT_BUILD=\"\"\n+CT_BUILD_PREFIX=\"\"\n+CT_BUILD_SUFFIX=\"\"\n+\n+#\n+# Misc options\n+#\n+# CT_TOOLCHAIN_ENABLE_NLS is not set\n+\n+#\n+# Operating System\n+#\n+CT_KERNEL_SUPPORTS_SHARED_LIBS=y\n+CT_KERNEL=\"linux\"\n+CT_KERNEL_VERSION=\"2.6.32.68\"\n+# CT_KERNEL_bare_metal is not set\n+CT_KERNEL_linux=y\n+CT_KERNEL_bare_metal_AVAILABLE=y\n+CT_KERNEL_linux_AVAILABLE=y\n+# CT_KERNEL_V_4_3 is not set\n+# CT_KERNEL_V_4_2 is not set\n+# CT_KERNEL_V_4_1 is not set\n+# CT_KERNEL_V_3_18 is not set\n+# CT_KERNEL_V_3_14 is not set\n+# CT_KERNEL_V_3_12 is not set\n+# CT_KERNEL_V_3_10 is not set\n+# CT_KERNEL_V_3_4 is not set\n+# CT_KERNEL_V_3_2 is not set\n+CT_KERNEL_V_2_6_32=y\n+# CT_KERNEL_LINUX_CUSTOM is not set\n+CT_KERNEL_windows_AVAILABLE=y\n+\n+#\n+# Common kernel options\n+#\n+CT_SHARED_LIBS=y\n+\n+#\n+# linux other options\n+#\n+CT_KERNEL_LINUX_VERBOSITY_0=y\n+# CT_KERNEL_LINUX_VERBOSITY_1 is not set\n+# CT_KERNEL_LINUX_VERBOSITY_2 is not set\n+CT_KERNEL_LINUX_VERBOSE_LEVEL=0\n+CT_KERNEL_LINUX_INSTALL_CHECK=y\n+\n+#\n+# Binary utilities\n+#\n+CT_ARCH_BINFMT_ELF=y\n+CT_BINUTILS=\"binutils\"\n+CT_BINUTILS_binutils=y\n+\n+#\n+# GNU binutils\n+#\n+# CT_CC_BINUTILS_SHOW_LINARO is not set\n+CT_BINUTILS_V_2_25_1=y\n+# CT_BINUTILS_V_2_25 is not set\n+# CT_BINUTILS_V_2_24 is not set\n+# CT_BINUTILS_V_2_23_2 is not set\n+# CT_BINUTILS_V_2_23_1 is not set\n+# CT_BINUTILS_V_2_22 is not set\n+# CT_BINUTILS_V_2_21_53 is not set\n+# CT_BINUTILS_V_2_21_1a is not set\n+# CT_BINUTILS_V_2_20_1a is not set\n+# CT_BINUTILS_V_2_19_1a is not set\n+# CT_BINUTILS_V_2_18a is not set\n+CT_BINUTILS_VERSION=\"2.25.1\"\n+CT_BINUTILS_2_25_1_or_later=y\n+CT_BINUTILS_2_25_or_later=y\n+CT_BINUTILS_2_24_or_later=y\n+CT_BINUTILS_2_23_or_later=y\n+CT_BINUTILS_2_22_or_later=y\n+CT_BINUTILS_2_21_or_later=y\n+CT_BINUTILS_2_20_or_later=y\n+CT_BINUTILS_2_19_or_later=y\n+CT_BINUTILS_2_18_or_later=y\n+CT_BINUTILS_HAS_HASH_STYLE=y\n+CT_BINUTILS_HAS_GOLD=y\n+CT_BINUTILS_HAS_PLUGINS=y\n+CT_BINUTILS_HAS_PKGVERSION_BUGURL=y\n+CT_BINUTILS_FORCE_LD_BFD=y\n+CT_BINUTILS_LINKER_LD=y\n+CT_BINUTILS_LINKERS_LIST=\"ld\"\n+CT_BINUTILS_LINKER_DEFAULT=\"bfd\"\n+# CT_BINUTILS_PLUGINS is not set\n+CT_BINUTILS_EXTRA_CONFIG_ARRAY=\"\"\n+# CT_BINUTILS_FOR_TARGET is not set\n+\n+#\n+# binutils other options\n+#\n+\n+#\n+# C-library\n+#\n+CT_LIBC=\"glibc\"\n+CT_LIBC_VERSION=\"2.12.2\"\n+CT_LIBC_glibc=y\n+# CT_LIBC_musl is not set\n+# CT_LIBC_uClibc is not set\n+CT_LIBC_avr_libc_AVAILABLE=y\n+CT_LIBC_glibc_AVAILABLE=y\n+CT_THREADS=\"nptl\"\n+# CT_CC_GLIBC_SHOW_LINARO is not set\n+# CT_LIBC_GLIBC_V_2_22 is not set\n+# CT_LIBC_GLIBC_V_2_21 is not set\n+# CT_LIBC_GLIBC_V_2_20 is not set\n+# CT_LIBC_GLIBC_V_2_19 is not set\n+# CT_LIBC_GLIBC_V_2_18 is not set\n+# CT_LIBC_GLIBC_V_2_17 is not set\n+# CT_LIBC_GLIBC_V_2_16_0 is not set\n+# CT_LIBC_GLIBC_V_2_15 is not set\n+# CT_LIBC_GLIBC_V_2_14_1 is not set\n+# CT_LIBC_GLIBC_V_2_14 is not set\n+# CT_LIBC_GLIBC_V_2_13 is not set\n+CT_LIBC_GLIBC_V_2_12_2=y\n+# CT_LIBC_GLIBC_V_2_12_1 is not set\n+# CT_LIBC_GLIBC_V_2_11_1 is not set\n+# CT_LIBC_GLIBC_V_2_11 is not set\n+# CT_LIBC_GLIBC_V_2_10_1 is not set\n+# CT_LIBC_GLIBC_V_2_9 is not set\n+# CT_LIBC_GLIBC_V_2_8 is not set\n+CT_LIBC_mingw_AVAILABLE=y\n+CT_LIBC_musl_AVAILABLE=y\n+CT_LIBC_newlib_AVAILABLE=y\n+CT_LIBC_none_AVAILABLE=y\n+CT_LIBC_uClibc_AVAILABLE=y\n+CT_LIBC_SUPPORT_THREADS_ANY=y\n+CT_LIBC_SUPPORT_THREADS_NATIVE=y\n+\n+#\n+# Common C library options\n+#\n+CT_THREADS_NATIVE=y\n+CT_LIBC_XLDD=y\n+\n+#\n+# glibc other options\n+#\n+CT_LIBC_GLIBC_PORTS_EXTERNAL=y\n+CT_LIBC_glibc_familly=y\n+CT_LIBC_GLIBC_EXTRA_CONFIG_ARRAY=\"\"\n+CT_LIBC_GLIBC_CONFIGPARMS=\"\"\n+CT_LIBC_GLIBC_EXTRA_CFLAGS=\"\"\n+CT_LIBC_EXTRA_CC_ARGS=\"\"\n+# CT_LIBC_DISABLE_VERSIONING is not set\n+CT_LIBC_OLDEST_ABI=\"\"\n+CT_LIBC_GLIBC_FORCE_UNWIND=y\n+# CT_LIBC_GLIBC_USE_PORTS is not set\n+CT_LIBC_ADDONS_LIST=\"\"\n+# CT_LIBC_LOCALES is not set\n+# CT_LIBC_GLIBC_KERNEL_VERSION_NONE is not set\n+CT_LIBC_GLIBC_KERNEL_VERSION_AS_HEADERS=y\n+# CT_LIBC_GLIBC_KERNEL_VERSION_CHOSEN is not set\n+CT_LIBC_GLIBC_MIN_KERNEL=\"2.6.32.68\"\n+\n+#\n+# C compiler\n+#\n+CT_CC=\"gcc\"\n+CT_CC_CORE_PASSES_NEEDED=y\n+CT_CC_CORE_PASS_1_NEEDED=y\n+CT_CC_CORE_PASS_2_NEEDED=y\n+CT_CC_gcc=y\n+# CT_CC_GCC_SHOW_LINARO is not set\n+# CT_CC_GCC_V_5_2_0 is not set\n+CT_CC_GCC_V_4_9_3=y\n+# CT_CC_GCC_V_4_8_5 is not set\n+# CT_CC_GCC_V_4_7_4 is not set\n+# CT_CC_GCC_V_4_6_4 is not set\n+# CT_CC_GCC_V_4_5_4 is not set\n+# CT_CC_GCC_V_4_4_7 is not set\n+# CT_CC_GCC_V_4_3_6 is not set\n+# CT_CC_GCC_V_4_2_4 is not set\n+CT_CC_GCC_4_2_or_later=y\n+CT_CC_GCC_4_3_or_later=y\n+CT_CC_GCC_4_4_or_later=y\n+CT_CC_GCC_4_5_or_later=y\n+CT_CC_GCC_4_6_or_later=y\n+CT_CC_GCC_4_7_or_later=y\n+CT_CC_GCC_4_8_or_later=y\n+CT_CC_GCC_4_9=y\n+CT_CC_GCC_4_9_or_later=y\n+CT_CC_GCC_HAS_GRAPHITE=y\n+CT_CC_GCC_USE_GRAPHITE=y\n+CT_CC_GCC_HAS_LTO=y\n+CT_CC_GCC_USE_LTO=y\n+CT_CC_GCC_HAS_PKGVERSION_BUGURL=y\n+CT_CC_GCC_HAS_BUILD_ID=y\n+CT_CC_GCC_HAS_LNK_HASH_STYLE=y\n+CT_CC_GCC_USE_GMP_MPFR=y\n+CT_CC_GCC_USE_MPC=y\n+CT_CC_GCC_HAS_LIBQUADMATH=y\n+CT_CC_GCC_HAS_LIBSANITIZER=y\n+CT_CC_GCC_VERSION=\"4.9.3\"\n+# CT_CC_LANG_FORTRAN is not set\n+CT_CC_GCC_ENABLE_CXX_FLAGS=\"\"\n+CT_CC_GCC_CORE_EXTRA_CONFIG_ARRAY=\"\"\n+CT_CC_GCC_EXTRA_CONFIG_ARRAY=\"--with-arch=z10\"\n+CT_CC_GCC_EXTRA_ENV_ARRAY=\"\"\n+CT_CC_GCC_STATIC_LIBSTDCXX=y\n+# CT_CC_GCC_SYSTEM_ZLIB is not set\n+\n+#\n+# Optimisation features\n+#\n+\n+#\n+# Settings for libraries running on target\n+#\n+CT_CC_GCC_ENABLE_TARGET_OPTSPACE=y\n+# CT_CC_GCC_LIBMUDFLAP is not set\n+# CT_CC_GCC_LIBGOMP is not set\n+# CT_CC_GCC_LIBSSP is not set\n+# CT_CC_GCC_LIBQUADMATH is not set\n+# CT_CC_GCC_LIBSANITIZER is not set\n+\n+#\n+# Misc. obscure options.\n+#\n+CT_CC_CXA_ATEXIT=y\n+# CT_CC_GCC_DISABLE_PCH is not set\n+CT_CC_GCC_SJLJ_EXCEPTIONS=m\n+CT_CC_GCC_LDBL_128=m\n+# CT_CC_GCC_BUILD_ID is not set\n+CT_CC_GCC_LNK_HASH_STYLE_DEFAULT=y\n+# CT_CC_GCC_LNK_HASH_STYLE_SYSV is not set\n+# CT_CC_GCC_LNK_HASH_STYLE_GNU is not set\n+# CT_CC_GCC_LNK_HASH_STYLE_BOTH is not set\n+CT_CC_GCC_LNK_HASH_STYLE=\"\"\n+CT_CC_GCC_DEC_FLOAT_AUTO=y\n+# CT_CC_GCC_DEC_FLOAT_BID is not set\n+# CT_CC_GCC_DEC_FLOAT_DPD is not set\n+# CT_CC_GCC_DEC_FLOATS_NO is not set\n+CT_CC_SUPPORT_CXX=y\n+CT_CC_SUPPORT_FORTRAN=y\n+CT_CC_SUPPORT_JAVA=y\n+CT_CC_SUPPORT_ADA=y\n+CT_CC_SUPPORT_OBJC=y\n+CT_CC_SUPPORT_OBJCXX=y\n+CT_CC_SUPPORT_GOLANG=y\n+\n+#\n+# Additional supported languages:\n+#\n+CT_CC_LANG_CXX=y\n+# CT_CC_LANG_JAVA is not set\n+\n+#\n+# Debug facilities\n+#\n+# CT_DEBUG_dmalloc is not set\n+# CT_DEBUG_duma is not set\n+# CT_DEBUG_gdb is not set\n+# CT_DEBUG_ltrace is not set\n+# CT_DEBUG_strace is not set\n+\n+#\n+# Companion libraries\n+#\n+CT_COMPLIBS_NEEDED=y\n+CT_LIBICONV_NEEDED=y\n+CT_GETTEXT_NEEDED=y\n+CT_GMP_NEEDED=y\n+CT_MPFR_NEEDED=y\n+CT_ISL_NEEDED=y\n+CT_CLOOG_NEEDED=y\n+CT_MPC_NEEDED=y\n+CT_COMPLIBS=y\n+CT_LIBICONV=y\n+CT_GETTEXT=y\n+CT_GMP=y\n+CT_MPFR=y\n+CT_ISL=y\n+CT_CLOOG=y\n+CT_MPC=y\n+CT_LIBICONV_V_1_14=y\n+CT_LIBICONV_VERSION=\"1.14\"\n+CT_GETTEXT_V_0_19_6=y\n+CT_GETTEXT_VERSION=\"0.19.6\"\n+CT_GMP_V_6_0_0=y\n+# CT_GMP_V_5_1_3 is not set\n+# CT_GMP_V_5_1_1 is not set\n+# CT_GMP_V_5_0_2 is not set\n+# CT_GMP_V_5_0_1 is not set\n+# CT_GMP_V_4_3_2 is not set\n+# CT_GMP_V_4_3_1 is not set\n+# CT_GMP_V_4_3_0 is not set\n+CT_GMP_5_0_2_or_later=y\n+CT_GMP_VERSION=\"6.0.0a\"\n+CT_MPFR_V_3_1_3=y\n+# CT_MPFR_V_3_1_2 is not set\n+# CT_MPFR_V_3_1_0 is not set\n+# CT_MPFR_V_3_0_1 is not set\n+# CT_MPFR_V_3_0_0 is not set\n+# CT_MPFR_V_2_4_2 is not set\n+# CT_MPFR_V_2_4_1 is not set\n+# CT_MPFR_V_2_4_0 is not set\n+CT_MPFR_VERSION=\"3.1.3\"\n+CT_ISL_V_0_14=y\n+CT_ISL_V_0_14_or_later=y\n+CT_ISL_V_0_12_or_later=y\n+CT_ISL_VERSION=\"0.14\"\n+CT_CLOOG_V_0_18_4=y\n+# CT_CLOOG_V_0_18_1 is not set\n+# CT_CLOOG_V_0_18_0 is not set\n+CT_CLOOG_VERSION=\"0.18.4\"\n+CT_CLOOG_0_18_4_or_later=y\n+CT_CLOOG_0_18_or_later=y\n+CT_MPC_V_1_0_3=y\n+# CT_MPC_V_1_0_2 is not set\n+# CT_MPC_V_1_0_1 is not set\n+# CT_MPC_V_1_0 is not set\n+# CT_MPC_V_0_9 is not set\n+# CT_MPC_V_0_8_2 is not set\n+# CT_MPC_V_0_8_1 is not set\n+# CT_MPC_V_0_7 is not set\n+CT_MPC_VERSION=\"1.0.3\"\n+\n+#\n+# Companion libraries common options\n+#\n+# CT_COMPLIBS_CHECK is not set\n+\n+#\n+# Companion tools\n+#\n+\n+#\n+# READ HELP before you say 'Y' below !!!\n+#\n+# CT_COMP_TOOLS is not set"}]}