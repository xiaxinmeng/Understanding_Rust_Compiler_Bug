{"sha": "fb03bb72b9c5e46d98726ba520ba08fe8ba2082f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiMDNiYjcyYjljNWU0NmQ5ODcyNmJhNTIwYmEwOGZlOGJhMjA4MmY=", "commit": {"author": {"name": "James Tucker", "email": "jftucker@gmail.com", "date": "2017-10-04T22:29:01Z"}, "committer": {"name": "James Tucker", "email": "jftucker@gmail.com", "date": "2017-10-04T23:06:53Z"}, "message": "zircon: update some more zx and lp constants\n\n * Use size_t where size_t is used, while it's not critical on our\n specifically supported architectures, this is more accurate.\n * Update HND_SPECIAL_COUNT to the correct value, and give it the size\n that enum is likely to be.", "tree": {"sha": "e9131b8f7130487fe64bfdc02defd5a4f9722c22", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9131b8f7130487fe64bfdc02defd5a4f9722c22"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f", "html_url": "https://github.com/rust-lang/rust/commit/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f/comments", "author": {"login": "raggi", "id": 348, "node_id": "MDQ6VXNlcjM0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raggi", "html_url": "https://github.com/raggi", "followers_url": "https://api.github.com/users/raggi/followers", "following_url": "https://api.github.com/users/raggi/following{/other_user}", "gists_url": "https://api.github.com/users/raggi/gists{/gist_id}", "starred_url": "https://api.github.com/users/raggi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raggi/subscriptions", "organizations_url": "https://api.github.com/users/raggi/orgs", "repos_url": "https://api.github.com/users/raggi/repos", "events_url": "https://api.github.com/users/raggi/events{/privacy}", "received_events_url": "https://api.github.com/users/raggi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "raggi", "id": 348, "node_id": "MDQ6VXNlcjM0OA==", "avatar_url": "https://avatars.githubusercontent.com/u/348?v=4", "gravatar_id": "", "url": "https://api.github.com/users/raggi", "html_url": "https://github.com/raggi", "followers_url": "https://api.github.com/users/raggi/followers", "following_url": "https://api.github.com/users/raggi/following{/other_user}", "gists_url": "https://api.github.com/users/raggi/gists{/gist_id}", "starred_url": "https://api.github.com/users/raggi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/raggi/subscriptions", "organizations_url": "https://api.github.com/users/raggi/orgs", "repos_url": "https://api.github.com/users/raggi/repos", "events_url": "https://api.github.com/users/raggi/events{/privacy}", "received_events_url": "https://api.github.com/users/raggi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "17a2a766ac61762fdec7e89c80ce9f8ac97bf654", "url": "https://api.github.com/repos/rust-lang/rust/commits/17a2a766ac61762fdec7e89c80ce9f8ac97bf654", "html_url": "https://github.com/rust-lang/rust/commit/17a2a766ac61762fdec7e89c80ce9f8ac97bf654"}], "stats": {"total": 38, "additions": 16, "deletions": 22}, "files": [{"sha": "a7a67ed36e82363e5cf11182d7626e372adf8c1e", "filename": "src/libstd/sys/unix/process/process_fuchsia.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f/src%2Flibstd%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f/src%2Flibstd%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fprocess%2Fprocess_fuchsia.rs?ref=fb03bb72b9c5e46d98726ba520ba08fe8ba2082f", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n use io;\n-use libc;\n+use libc::{self, size_t};\n use mem;\n use ptr;\n \n@@ -148,8 +148,8 @@ impl Process {\n         use sys::process::zircon::*;\n \n         let mut proc_info: zx_info_process_t = Default::default();\n-        let mut actual: zx_size_t = 0;\n-        let mut avail: zx_size_t = 0;\n+        let mut actual: size_t = 0;\n+        let mut avail: size_t = 0;\n \n         unsafe {\n             zx_cvt(zx_object_wait_one(self.handle.raw(), ZX_TASK_TERMINATED,\n@@ -171,8 +171,8 @@ impl Process {\n         use sys::process::zircon::*;\n \n         let mut proc_info: zx_info_process_t = Default::default();\n-        let mut actual: zx_size_t = 0;\n-        let mut avail: zx_size_t = 0;\n+        let mut actual: size_t = 0;\n+        let mut avail: size_t = 0;\n \n         unsafe {\n             let status = zx_object_wait_one(self.handle.raw(), ZX_TASK_TERMINATED,"}, {"sha": "90864e6ef3ff28589fa835f0b9a6e6c48f2defec", "filename": "src/libstd/sys/unix/process/zircon.rs", "status": "modified", "additions": 11, "deletions": 17, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f/src%2Flibstd%2Fsys%2Funix%2Fprocess%2Fzircon.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb03bb72b9c5e46d98726ba520ba08fe8ba2082f/src%2Flibstd%2Fsys%2Funix%2Fprocess%2Fzircon.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fprocess%2Fzircon.rs?ref=fb03bb72b9c5e46d98726ba520ba08fe8ba2082f", "patch": "@@ -15,20 +15,13 @@ use io;\n use os::raw::c_char;\n use u64;\n \n-use libc::{c_int, c_void};\n+use libc::{c_int, c_void, size_t};\n \n pub type zx_handle_t = u32;\n pub type zx_vaddr_t = usize;\n pub type zx_rights_t = u32;\n pub type zx_status_t = i32;\n \n-// TODO(raggi): zx_size_t was removed from Zircon. various syscall API docs use size_t here, but\n-// don't define that well at the ABI level yet, as the C spec definition of size_t isn't what is\n-// meant. In the future Zirocn will define size_t more strictly for it's ABI. At that time,\n-// zx_size_t should be removed here, and replaced with an appropriately sized type with a\n-// sufficiently strict definition.\n-pub type zx_size_t = usize;\n-\n pub const ZX_HANDLE_INVALID: zx_handle_t = 0;\n \n pub type zx_time_t = u64;\n@@ -120,36 +113,37 @@ extern {\n                               pending: *mut zx_signals_t) -> zx_status_t;\n \n     pub fn zx_object_get_info(handle: zx_handle_t, topic: u32, buffer: *mut c_void,\n-                              buffer_size: zx_size_t, actual_size: *mut zx_size_t,\n-                              avail: *mut zx_size_t) -> zx_status_t;\n+                              buffer_size: size_t, actual_size: *mut size_t,\n+                              avail: *mut size_t) -> zx_status_t;\n }\n \n // From `enum special_handles` in system/ulib/launchpad/launchpad.c\n // HND_LOADER_SVC = 0\n // HND_EXEC_VMO = 1\n-pub const HND_SPECIAL_COUNT: usize = 2;\n+// HND_SEGMENTS_VMAR = 2\n+const HND_SPECIAL_COUNT: c_int = 3;\n \n #[repr(C)]\n pub struct launchpad_t {\n     argc: u32,\n     envc: u32,\n     args: *const c_char,\n-    args_len: usize,\n+    args_len: size_t,\n     env: *const c_char,\n-    env_len: usize,\n+    env_len: size_t,\n \n     handles: *mut zx_handle_t,\n     handles_info: *mut u32,\n-    handle_count: usize,\n-    handle_alloc: usize,\n+    handle_count: size_t,\n+    handle_alloc: size_t,\n \n     entry: zx_vaddr_t,\n     base: zx_vaddr_t,\n     vdso_base: zx_vaddr_t,\n \n-    stack_size: usize,\n+    stack_size: size_t,\n \n-    special_handles: [zx_handle_t; HND_SPECIAL_COUNT],\n+    special_handles: [zx_handle_t; HND_SPECIAL_COUNT as usize],\n     loader_message: bool,\n }\n "}]}