{"sha": "879bfeca54a61c22b836905da1468ac2e37085b5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3OWJmZWNhNTRhNjFjMjJiODM2OTA1ZGExNDY4YWMyZTM3MDg1YjU=", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2021-04-06T04:50:55Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2021-04-06T11:35:41Z"}, "message": "Use AnonConst for asm! constants", "tree": {"sha": "7a99d0f73cc470691f18c0883724b9566e6a61b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a99d0f73cc470691f18c0883724b9566e6a61b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/879bfeca54a61c22b836905da1468ac2e37085b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/879bfeca54a61c22b836905da1468ac2e37085b5", "html_url": "https://github.com/rust-lang/rust/commit/879bfeca54a61c22b836905da1468ac2e37085b5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/879bfeca54a61c22b836905da1468ac2e37085b5/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b438e30fa65a8c59cd62604e0b7f8464be141f12", "url": "https://api.github.com/repos/rust-lang/rust/commits/b438e30fa65a8c59cd62604e0b7f8464be141f12", "html_url": "https://github.com/rust-lang/rust/commit/b438e30fa65a8c59cd62604e0b7f8464be141f12"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "01a7627fc7f34d12dc8f687401ac63f5c07fc664", "filename": "clippy_lints/src/loops/never_loop.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/879bfeca54a61c22b836905da1468ac2e37085b5/clippy_lints%2Fsrc%2Floops%2Fnever_loop.rs", "raw_url": "https://github.com/rust-lang/rust/raw/879bfeca54a61c22b836905da1468ac2e37085b5/clippy_lints%2Fsrc%2Floops%2Fnever_loop.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops%2Fnever_loop.rs?ref=879bfeca54a61c22b836905da1468ac2e37085b5", "patch": "@@ -142,12 +142,12 @@ fn never_loop_expr(expr: &Expr<'_>, main_loop_id: HirId) -> NeverLoopResult {\n             .map(|(o, _)| match o {\n                 InlineAsmOperand::In { expr, .. }\n                 | InlineAsmOperand::InOut { expr, .. }\n-                | InlineAsmOperand::Const { expr }\n                 | InlineAsmOperand::Sym { expr } => never_loop_expr(expr, main_loop_id),\n                 InlineAsmOperand::Out { expr, .. } => never_loop_expr_all(&mut expr.iter(), main_loop_id),\n                 InlineAsmOperand::SplitInOut { in_expr, out_expr, .. } => {\n                     never_loop_expr_all(&mut once(in_expr).chain(out_expr.iter()), main_loop_id)\n                 },\n+                InlineAsmOperand::Const { .. } => NeverLoopResult::Otherwise,\n             })\n             .fold(NeverLoopResult::Otherwise, combine_both),\n         ExprKind::Struct(_, _, None)"}, {"sha": "b3fe66ed4285eff8ba0a54f4e48275c70e0ee1ca", "filename": "clippy_lints/src/utils/inspector.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/879bfeca54a61c22b836905da1468ac2e37085b5/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/879bfeca54a61c22b836905da1468ac2e37085b5/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finspector.rs?ref=879bfeca54a61c22b836905da1468ac2e37085b5", "patch": "@@ -306,7 +306,6 @@ fn print_expr(cx: &LateContext<'_>, expr: &hir::Expr<'_>, indent: usize) {\n                 match op {\n                     hir::InlineAsmOperand::In { expr, .. }\n                     | hir::InlineAsmOperand::InOut { expr, .. }\n-                    | hir::InlineAsmOperand::Const { expr }\n                     | hir::InlineAsmOperand::Sym { expr } => print_expr(cx, expr, indent + 1),\n                     hir::InlineAsmOperand::Out { expr, .. } => {\n                         if let Some(expr) = expr {\n@@ -319,6 +318,10 @@ fn print_expr(cx: &LateContext<'_>, expr: &hir::Expr<'_>, indent: usize) {\n                             print_expr(cx, out_expr, indent + 1);\n                         }\n                     },\n+                    hir::InlineAsmOperand::Const { anon_const } => {\n+                        println!(\"{}anon_const:\", ind);\n+                        print_expr(cx, &cx.tcx.hir().body(anon_const.body).value, indent + 1);\n+                    }\n                 }\n             }\n         },"}, {"sha": "b30c0b7988194d20bc6835cc06c70325043d953f", "filename": "clippy_utils/src/hir_utils.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/879bfeca54a61c22b836905da1468ac2e37085b5/clippy_utils%2Fsrc%2Fhir_utils.rs", "raw_url": "https://github.com/rust-lang/rust/raw/879bfeca54a61c22b836905da1468ac2e37085b5/clippy_utils%2Fsrc%2Fhir_utils.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_utils%2Fsrc%2Fhir_utils.rs?ref=879bfeca54a61c22b836905da1468ac2e37085b5", "patch": "@@ -663,7 +663,8 @@ impl<'a, 'tcx> SpanlessHash<'a, 'tcx> {\n                                 self.hash_expr(out_expr);\n                             }\n                         },\n-                        InlineAsmOperand::Const { expr } | InlineAsmOperand::Sym { expr } => self.hash_expr(expr),\n+                        InlineAsmOperand::Const { anon_const } => self.hash_body(anon_const.body),\n+                        InlineAsmOperand::Sym { expr } => self.hash_expr(expr),\n                     }\n                 }\n             },"}]}