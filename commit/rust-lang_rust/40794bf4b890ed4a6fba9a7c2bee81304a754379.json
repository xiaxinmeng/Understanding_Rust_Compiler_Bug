{"sha": "40794bf4b890ed4a6fba9a7c2bee81304a754379", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQwNzk0YmY0Yjg5MGVkNGE2ZmJhOWE3YzJiZWU4MTMwNGE3NTQzNzk=", "commit": {"author": {"name": "Sebastian Humenda", "email": "shumenda@gmx.de", "date": "2017-09-07T19:04:24Z"}, "committer": {"name": "Tobias Schaffner", "email": "tschaff@genua.de", "date": "2017-09-08T12:36:56Z"}, "message": "Move the stack size value for L4Re to the min_stack_size function", "tree": {"sha": "a34659af4c67a48559426d9b7cb389c862f8a3d2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a34659af4c67a48559426d9b7cb389c862f8a3d2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/40794bf4b890ed4a6fba9a7c2bee81304a754379", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/40794bf4b890ed4a6fba9a7c2bee81304a754379", "html_url": "https://github.com/rust-lang/rust/commit/40794bf4b890ed4a6fba9a7c2bee81304a754379", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/40794bf4b890ed4a6fba9a7c2bee81304a754379/comments", "author": {"login": "humenda", "id": 4473821, "node_id": "MDQ6VXNlcjQ0NzM4MjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4473821?v=4", "gravatar_id": "", "url": "https://api.github.com/users/humenda", "html_url": "https://github.com/humenda", "followers_url": "https://api.github.com/users/humenda/followers", "following_url": "https://api.github.com/users/humenda/following{/other_user}", "gists_url": "https://api.github.com/users/humenda/gists{/gist_id}", "starred_url": "https://api.github.com/users/humenda/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/humenda/subscriptions", "organizations_url": "https://api.github.com/users/humenda/orgs", "repos_url": "https://api.github.com/users/humenda/repos", "events_url": "https://api.github.com/users/humenda/events{/privacy}", "received_events_url": "https://api.github.com/users/humenda/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0b77464d2234231e13d03acd1d580ab2e3369d64", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b77464d2234231e13d03acd1d580ab2e3369d64", "html_url": "https://github.com/rust-lang/rust/commit/0b77464d2234231e13d03acd1d580ab2e3369d64"}], "stats": {"total": 9, "additions": 5, "deletions": 4}, "files": [{"sha": "60bce7924cdd8ee1ecfb82871ea303952a36335f", "filename": "src/libstd/sys/unix/thread.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/40794bf4b890ed4a6fba9a7c2bee81304a754379/src%2Flibstd%2Fsys%2Funix%2Fthread.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40794bf4b890ed4a6fba9a7c2bee81304a754379/src%2Flibstd%2Fsys%2Funix%2Fthread.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Fthread.rs?ref=40794bf4b890ed4a6fba9a7c2bee81304a754379", "patch": "@@ -53,10 +53,6 @@ impl Thread {\n \n         let stack_size = cmp::max(stack, min_stack_size(&attr));\n \n-        // L4Re only supports a maximum of 1Mb per default.\n-        #[cfg(target_os = \"l4re\")]\n-        let stack_size = cmp::min(stack_size, 1024 * 1024);\n-\n         match pthread_attr_setstacksize(&mut attr,\n                                         stack_size) {\n             0 => {}"}, {"sha": "41be6f4376348b0746a541a7453708b2561f300d", "filename": "src/libstd/sys_common/util.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/40794bf4b890ed4a6fba9a7c2bee81304a754379/src%2Flibstd%2Fsys_common%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/40794bf4b890ed4a6fba9a7c2bee81304a754379/src%2Flibstd%2Fsys_common%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys_common%2Futil.rs?ref=40794bf4b890ed4a6fba9a7c2bee81304a754379", "patch": "@@ -22,7 +22,12 @@ pub fn min_stack() -> usize {\n         n => return n - 1,\n     }\n     let amt = env::var(\"RUST_MIN_STACK\").ok().and_then(|s| s.parse().ok());\n+    #[cfg(not(target_os = \"l4re\"))]\n     let amt = amt.unwrap_or(2 * 1024 * 1024);\n+    // L4Re only supports a maximum of 1Mb per default.\n+    #[cfg(target_os = \"l4re\")]\n+    let amt = amt.unwrap_or(1024 * 1024);\n+\n     // 0 is our sentinel value, so ensure that we'll never see 0 after\n     // initialization has run\n     MIN.store(amt + 1, Ordering::SeqCst);"}]}