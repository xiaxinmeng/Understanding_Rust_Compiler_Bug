{"sha": "8cdef2ffcf09e1830d62eb82e0b484341bec39f0", "node_id": "C_kwDOAAsO6NoAKDhjZGVmMmZmY2YwOWUxODMwZDYyZWI4MmUwYjQ4NDM0MWJlYzM5ZjA", "commit": {"author": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-02-21T12:43:42Z"}, "committer": {"name": "Lukas Wirth", "email": "lukastw97@gmail.com", "date": "2022-02-21T12:43:42Z"}, "message": "fix: Don't count commas when looking for the derive attribute in diagnostics", "tree": {"sha": "64ff1ee8a086c9bb05eb469cc2759405e08e3def", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64ff1ee8a086c9bb05eb469cc2759405e08e3def"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8cdef2ffcf09e1830d62eb82e0b484341bec39f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8cdef2ffcf09e1830d62eb82e0b484341bec39f0", "html_url": "https://github.com/rust-lang/rust/commit/8cdef2ffcf09e1830d62eb82e0b484341bec39f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8cdef2ffcf09e1830d62eb82e0b484341bec39f0/comments", "author": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Veykril", "id": 3757771, "node_id": "MDQ6VXNlcjM3NTc3NzE=", "avatar_url": "https://avatars.githubusercontent.com/u/3757771?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Veykril", "html_url": "https://github.com/Veykril", "followers_url": "https://api.github.com/users/Veykril/followers", "following_url": "https://api.github.com/users/Veykril/following{/other_user}", "gists_url": "https://api.github.com/users/Veykril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Veykril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Veykril/subscriptions", "organizations_url": "https://api.github.com/users/Veykril/orgs", "repos_url": "https://api.github.com/users/Veykril/repos", "events_url": "https://api.github.com/users/Veykril/events{/privacy}", "received_events_url": "https://api.github.com/users/Veykril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d6ed146a1caa41c65a831efbc80d79067c8f5955", "url": "https://api.github.com/repos/rust-lang/rust/commits/d6ed146a1caa41c65a831efbc80d79067c8f5955", "html_url": "https://github.com/rust-lang/rust/commit/d6ed146a1caa41c65a831efbc80d79067c8f5955"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "a26d8e9ebf97ffbfca20abd92fcdd3f5332815a0", "filename": "crates/hir/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8cdef2ffcf09e1830d62eb82e0b484341bec39f0/crates%2Fhir%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8cdef2ffcf09e1830d62eb82e0b484341bec39f0/crates%2Fhir%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fhir%2Fsrc%2Flib.rs?ref=8cdef2ffcf09e1830d62eb82e0b484341bec39f0", "patch": "@@ -649,6 +649,7 @@ fn emit_def_diagnostic(db: &dyn HirDatabase, acc: &mut Vec<AnyDiagnostic>, diag:\n                             })\n                             .group_by(|t| t.kind() == T![,])\n                             .into_iter()\n+                            .filter(|&(comma, _)| !comma)\n                             .nth(*derive_index as usize)\n                             .and_then(|(_, mut g)| g.find(|t| t.kind() == T![ident]))\n                     })();"}]}