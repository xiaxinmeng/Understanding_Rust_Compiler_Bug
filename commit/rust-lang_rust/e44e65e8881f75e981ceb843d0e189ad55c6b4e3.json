{"sha": "e44e65e8881f75e981ceb843d0e189ad55c6b4e3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU0NGU2NWU4ODgxZjc1ZTk4MWNlYjg0M2QwZTE4OWFkNTVjNmI0ZTM=", "commit": {"author": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-06-19T04:54:33Z"}, "committer": {"name": "Yuki Okushi", "email": "yuki.okushi@huawei.com", "date": "2021-06-19T04:55:24Z"}, "message": "Assert `is_associated_const` when resolving", "tree": {"sha": "3b940a940cead0628fa2ad668b1d773b27a940a3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3b940a940cead0628fa2ad668b1d773b27a940a3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e44e65e8881f75e981ceb843d0e189ad55c6b4e3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEx6scKn6IIf/+FpBu2rpbBylhwYoFAmDNeLwACgkQ2rpbBylh\nwYqC/BAArHTOfKuQAYGrfl5GfJBiTeZFwqRp4Ua3bCVIOngQT6EAXnG2LmNmZewO\n+njW/GjdWjulzLjcj4tpKuGt2e+GQbljhUSrJjev2J1oKf98ENY0oPn9QSaulEsp\nkuARZOMJ/01X06NNJdgJ3IzQYZ/Bn3lVafl+o4oSOmaSSkemBVKJcgUY0UeGcLKX\njGwwe21BtLiHMkH3Dceuz9BXyUCKsWWwELwCn4hHqOKN/MOqrqVKVIrYE8xqcINF\np7GWrtc51BInqAmNhdVWEt6tekKjDfIpwWjaifhJAacL8bxqrKuLo8a5Nnyc618g\nRA4VhG8OoeD5+dG79h2F63YMaIko+wjfQRGzkKNCAt32Yu7qUZOwQKAGkhrBNXIH\ng+s7pey/2+GHfnC8g94J/WJIhPzagPuSKInrApxWiw73WDHP3+mG80WzyfcDBczY\nlkkUsiwkmRuD7wDHTeFx2NotnknzhYIA/iBPiWBaQlBT58bPgcxyIugtuAszoEK0\n+RhOwIPrC9bQE2VDmCPif33R6O0w8XjJxZQTWfimUANJ95VoB9tPCTp0suGp7gxT\nbxfkgf3JzA1tL67La44WiN9nhikdaoehm/D+cqlZ7gNS/2icFSv5yubs7h1xRaWv\nPnxAWsJ4K6L8zczH89pejHrd6U+pHyueSBw35QqPJCuM0jnMzhc=\n=It+7\n-----END PGP SIGNATURE-----", "payload": "tree 3b940a940cead0628fa2ad668b1d773b27a940a3\nparent bc243a7f5597dbc6bd6947e9d799ed9fba428634\nauthor Yuki Okushi <yuki.okushi@huawei.com> 1624078473 +0900\ncommitter Yuki Okushi <yuki.okushi@huawei.com> 1624078524 +0900\n\nAssert `is_associated_const` when resolving\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e44e65e8881f75e981ceb843d0e189ad55c6b4e3", "html_url": "https://github.com/rust-lang/rust/commit/e44e65e8881f75e981ceb843d0e189ad55c6b4e3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e44e65e8881f75e981ceb843d0e189ad55c6b4e3/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc243a7f5597dbc6bd6947e9d799ed9fba428634", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc243a7f5597dbc6bd6947e9d799ed9fba428634", "html_url": "https://github.com/rust-lang/rust/commit/bc243a7f5597dbc6bd6947e9d799ed9fba428634"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "3ea76fb99d53171ab2131427aa86a038aebe844f", "filename": "compiler/rustc_mir_build/src/thir/pattern/mod.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/e44e65e8881f75e981ceb843d0e189ad55c6b4e3/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e44e65e8881f75e981ceb843d0e189ad55c6b4e3/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_build%2Fsrc%2Fthir%2Fpattern%2Fmod.rs?ref=e44e65e8881f75e981ceb843d0e189ad55c6b4e3", "patch": "@@ -469,9 +469,10 @@ impl<'a, 'tcx> PatCtxt<'a, 'tcx> {\n         let instance = match ty::Instance::resolve(self.tcx, param_env_reveal_all, def_id, substs) {\n             Ok(Some(i)) => i,\n             Ok(None) => {\n-                if is_associated_const {\n-                    self.errors.push(PatternError::AssocConstInPattern(span));\n-                }\n+                // It should be assoc consts if there's no error but we cannot resolve it.\n+                debug_assert!(is_associated_const);\n+\n+                self.errors.push(PatternError::AssocConstInPattern(span));\n \n                 return pat_from_kind(PatKind::Wild);\n             }"}]}