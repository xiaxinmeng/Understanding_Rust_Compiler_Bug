{"sha": "92f7ba8446d397bb92f68ea1b45fd893d9410b86", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyZjdiYTg0NDZkMzk3YmI5MmY2OGVhMWI0NWZkODkzZDk0MTBiODY=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2020-10-05T22:34:15Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2020-10-05T22:34:15Z"}, "message": "Add WaitOnAddress/WakeByAddress API to sys::windows::c.", "tree": {"sha": "e394dfbee1a5213a235b6428b63527cb458d79db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e394dfbee1a5213a235b6428b63527cb458d79db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92f7ba8446d397bb92f68ea1b45fd893d9410b86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92f7ba8446d397bb92f68ea1b45fd893d9410b86", "html_url": "https://github.com/rust-lang/rust/commit/92f7ba8446d397bb92f68ea1b45fd893d9410b86", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92f7ba8446d397bb92f68ea1b45fd893d9410b86/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "738d4a7a368b4da8bfa31915f06bb1ddce9e9980", "url": "https://api.github.com/repos/rust-lang/rust/commits/738d4a7a368b4da8bfa31915f06bb1ddce9e9980", "html_url": "https://github.com/rust-lang/rust/commit/738d4a7a368b4da8bfa31915f06bb1ddce9e9980"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "6a088b91b5140c35bed0a949488504a10b996ed2", "filename": "library/std/src/sys/windows/c.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/92f7ba8446d397bb92f68ea1b45fd893d9410b86/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92f7ba8446d397bb92f68ea1b45fd893d9410b86/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fc.rs?ref=92f7ba8446d397bb92f68ea1b45fd893d9410b86", "patch": "@@ -1096,3 +1096,18 @@ compat_fn! {\n         panic!(\"rwlocks not available\")\n     }\n }\n+compat_fn! {\n+    \"api-ms-win-core-synch-l1-2-0\":\n+    pub fn WaitOnAddress(\n+        Address: LPVOID,\n+        CompareAddress: LPVOID,\n+        AddressSize: SIZE_T,\n+        dwMilliseconds: DWORD\n+    ) -> BOOL {\n+        panic!(\"WaitOnAddress not available\")\n+    }\n+    pub fn WakeByAddressSingle(Address: LPVOID) -> () {\n+        // If this api is unavailable, there cannot be anything waiting, because\n+        // WaitOnAddress would've panicked. So it's fine to do nothing here.\n+    }\n+}"}, {"sha": "a5151ab620c0de3986b044d579d6ae07df5d7816", "filename": "library/std/src/sys/windows/compat.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/92f7ba8446d397bb92f68ea1b45fd893d9410b86/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92f7ba8446d397bb92f68ea1b45fd893d9410b86/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs?ref=92f7ba8446d397bb92f68ea1b45fd893d9410b86", "patch": "@@ -34,6 +34,7 @@ macro_rules! compat_fn {\n     )*) => ($(\n         $(#[$meta])*\n         pub mod $symbol {\n+            #[allow(unused_imports)]\n             use super::*;\n             use crate::sync::atomic::{AtomicUsize, Ordering};\n             use crate::mem;"}]}