{"sha": "9cd12cdf788e3bc46ff72ec7f77448316cfa64c3", "node_id": "C_kwDOAAsO6NoAKDljZDEyY2RmNzg4ZTNiYzQ2ZmY3MmVjN2Y3NzQ0ODMxNmNmYTY0YzM", "commit": {"author": {"name": "Ding Xiang Fei", "email": "dingxiangfei2009@protonmail.ch", "date": "2022-11-27T17:48:35Z"}, "committer": {"name": "Ding Xiang Fei", "email": "dingxiangfei2009@protonmail.ch", "date": "2022-11-27T17:48:35Z"}, "message": "inference test for #104649", "tree": {"sha": "f5c506fad4ac0c7cf0ee044de1a20c67d5d6d9fc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f5c506fad4ac0c7cf0ee044de1a20c67d5d6d9fc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE0u8S3YU336XkLsQOPNdIZH7vY1kFAmODovMACgkQPNdIZH7v\nY1leRA//fy8GpvbQGFE2ugkFwc//P6+jbW2vHqN8J7mN6xdHnzkDeDDgrZc5cYN/\nFtLOPklniOX5oJuvF8PqRfnwtMKmr0rHssHdkC8FVsMH1eK4ix0LYXHSyl/4iRDt\nG8ltFRHI6L/DXm/PM/ePR3litDeOAW0PswAEiW/SWhnMCKDZiuYSWzR+5VwswM1Y\nZUWjfO1Y3OpToxTRrewbjvwkAV66NqfUAMOY8I4EOFBSjcZA0NIIeIE3h7sBh1C6\n3v3ze2XaVtFn5uWMcEZLjKtgrn/zwOs7DMWJ6NMkYOcRxdqz4frD52kaE8Wziv9b\n3dZxiGagy5MTT6ZjaA7yGdrT7v/ehxJ9cT2vSbmwmPuOZhlA5FJckj8kVg+rf34w\nlArZ9YO2g7BxT/bqKHU3vkCJaCvVAnOHKSoDR/YlB2gwHKChsW5OOJ10boggKZPm\nY70enZoFDL2NkPuvbhC5IbNUXCCsoYSKqkRBMiI0Vtu7t1vEPBZ1jIdJoHctpXJg\nYXk/USFBUCJHHS3AFsg8J1AWSS/cy5KM7KwABj7/Fpyj+1gYrpvoZbo9Zh68/R/4\nZg+NzdP5XkQOJkTtRFC6igqOKT9j+ElKC+xsOo4XO+vpC4GaCHJnQRNBy4kT2om9\n9YHO4js+LPBZPH6dWo88ZrbLam5I1QG7MqJUNmSpaiFE3sn6bK8=\n=sTl6\n-----END PGP SIGNATURE-----", "payload": "tree f5c506fad4ac0c7cf0ee044de1a20c67d5d6d9fc\nparent daf93df430eddbaeb31fea2fcb91c974b0b7bcf5\nauthor Ding Xiang Fei <dingxiangfei2009@protonmail.ch> 1669571315 +0800\ncommitter Ding Xiang Fei <dingxiangfei2009@protonmail.ch> 1669571315 +0800\n\ninference test for #104649\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3", "html_url": "https://github.com/rust-lang/rust/commit/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3/comments", "author": {"login": "dingxiangfei2009", "id": 6884440, "node_id": "MDQ6VXNlcjY4ODQ0NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6884440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dingxiangfei2009", "html_url": "https://github.com/dingxiangfei2009", "followers_url": "https://api.github.com/users/dingxiangfei2009/followers", "following_url": "https://api.github.com/users/dingxiangfei2009/following{/other_user}", "gists_url": "https://api.github.com/users/dingxiangfei2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/dingxiangfei2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dingxiangfei2009/subscriptions", "organizations_url": "https://api.github.com/users/dingxiangfei2009/orgs", "repos_url": "https://api.github.com/users/dingxiangfei2009/repos", "events_url": "https://api.github.com/users/dingxiangfei2009/events{/privacy}", "received_events_url": "https://api.github.com/users/dingxiangfei2009/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dingxiangfei2009", "id": 6884440, "node_id": "MDQ6VXNlcjY4ODQ0NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/6884440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dingxiangfei2009", "html_url": "https://github.com/dingxiangfei2009", "followers_url": "https://api.github.com/users/dingxiangfei2009/followers", "following_url": "https://api.github.com/users/dingxiangfei2009/following{/other_user}", "gists_url": "https://api.github.com/users/dingxiangfei2009/gists{/gist_id}", "starred_url": "https://api.github.com/users/dingxiangfei2009/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dingxiangfei2009/subscriptions", "organizations_url": "https://api.github.com/users/dingxiangfei2009/orgs", "repos_url": "https://api.github.com/users/dingxiangfei2009/repos", "events_url": "https://api.github.com/users/dingxiangfei2009/events{/privacy}", "received_events_url": "https://api.github.com/users/dingxiangfei2009/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "daf93df430eddbaeb31fea2fcb91c974b0b7bcf5", "url": "https://api.github.com/repos/rust-lang/rust/commits/daf93df430eddbaeb31fea2fcb91c974b0b7bcf5", "html_url": "https://github.com/rust-lang/rust/commit/daf93df430eddbaeb31fea2fcb91c974b0b7bcf5"}], "stats": {"total": 46, "additions": 46, "deletions": 0}, "files": [{"sha": "4637b884d445d877044b8b858bb91854b015f215", "filename": "src/test/ui/inference/issue-104649.rs", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3/src%2Ftest%2Fui%2Finference%2Fissue-104649.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3/src%2Ftest%2Fui%2Finference%2Fissue-104649.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finference%2Fissue-104649.rs?ref=9cd12cdf788e3bc46ff72ec7f77448316cfa64c3", "patch": "@@ -0,0 +1,32 @@\n+type Result<T, E = Error> = ::std::result::Result<T, E>;\n+struct Error;\n+\n+trait ForEach {\n+    type Input;\n+    fn for_each<F, U>(self, f: F)\n+    where\n+        F: FnOnce(Self::Input) -> U;\n+}\n+\n+impl<T> ForEach for A<T> {\n+    type Input = T;\n+    fn for_each<F, U>(self, f: F)\n+    where\n+        F: FnOnce(Self::Input) -> U,\n+    {\n+        todo!()\n+    }\n+}\n+\n+struct A<T>(T);\n+\n+fn main() {\n+    let a = A(Result::Ok(Result::Ok(()))); //~ ERROR type annotations needed\n+    a.for_each(|a: Result<_>| {\n+        let f = || match a {\n+            Ok(Ok(a)) => {}\n+            Ok(Err(a)) => {}\n+            Err(a) => {}\n+        };\n+    });\n+}"}, {"sha": "4962b21f9fdb4c9c475067f2d11edcf77b9c81d3", "filename": "src/test/ui/inference/issue-104649.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3/src%2Ftest%2Fui%2Finference%2Fissue-104649.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9cd12cdf788e3bc46ff72ec7f77448316cfa64c3/src%2Ftest%2Fui%2Finference%2Fissue-104649.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Finference%2Fissue-104649.stderr?ref=9cd12cdf788e3bc46ff72ec7f77448316cfa64c3", "patch": "@@ -0,0 +1,14 @@\n+error[E0282]: type annotations needed for `A<std::result::Result<std::result::Result<(), E>, Error>>`\n+  --> $DIR/issue-104649.rs:24:9\n+   |\n+LL |     let a = A(Result::Ok(Result::Ok(())));\n+   |         ^\n+   |\n+help: consider giving `a` an explicit type, where the type for type parameter `E` is specified\n+   |\n+LL |     let a: A<std::result::Result<std::result::Result<(), E>, Error>> = A(Result::Ok(Result::Ok(())));\n+   |          +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0282`."}]}