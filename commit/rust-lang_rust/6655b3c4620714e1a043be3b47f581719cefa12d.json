{"sha": "6655b3c4620714e1a043be3b47f581719cefa12d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY2NTViM2M0NjIwNzE0ZTFhMDQzYmUzYjQ3ZjU4MTcxOWNlZmExMmQ=", "commit": {"author": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-08-31T05:28:59Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2013-08-31T07:54:15Z"}, "message": "repr: remove trailing {} from unit-like structs", "tree": {"sha": "d6b0cd21d35427c85ea0894759e9d7b23e2fba55", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d6b0cd21d35427c85ea0894759e9d7b23e2fba55"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6655b3c4620714e1a043be3b47f581719cefa12d", "comment_count": 8, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6655b3c4620714e1a043be3b47f581719cefa12d", "html_url": "https://github.com/rust-lang/rust/commit/6655b3c4620714e1a043be3b47f581719cefa12d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6655b3c4620714e1a043be3b47f581719cefa12d/comments", "author": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "874611b348ba6fc18fb017c9f8a6a46b98ce6c76", "url": "https://api.github.com/repos/rust-lang/rust/commits/874611b348ba6fc18fb017c9f8a6a46b98ce6c76", "html_url": "https://github.com/rust-lang/rust/commit/874611b348ba6fc18fb017c9f8a6a46b98ce6c76"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "3e2c5773acceddbac595906c78d7d8a58507781e", "filename": "src/libstd/repr.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/6655b3c4620714e1a043be3b47f581719cefa12d/src%2Flibstd%2Frepr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6655b3c4620714e1a043be3b47f581719cefa12d/src%2Flibstd%2Frepr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frepr.rs?ref=6655b3c4620714e1a043be3b47f581719cefa12d", "patch": "@@ -412,10 +412,12 @@ impl<'self> TyVisitor for ReprVisitor<'self> {\n         true\n     }\n \n-    fn visit_enter_class(&mut self, name: &str, _n_fields: uint,\n+    fn visit_enter_class(&mut self, name: &str, n_fields: uint,\n                          _sz: uint, _align: uint) -> bool {\n         self.writer.write(name.as_bytes());\n-        self.writer.write(['{' as u8]);\n+        if n_fields != 0 {\n+            self.writer.write(['{' as u8]);\n+        }\n         true\n     }\n \n@@ -431,9 +433,11 @@ impl<'self> TyVisitor for ReprVisitor<'self> {\n         true\n     }\n \n-    fn visit_leave_class(&mut self, _name: &str, _n_fields: uint,\n+    fn visit_leave_class(&mut self, _name: &str, n_fields: uint,\n                          _sz: uint, _align: uint) -> bool {\n-        self.writer.write(['}' as u8]);\n+        if n_fields != 0 {\n+            self.writer.write(['}' as u8]);\n+        }\n         true\n     }\n \n@@ -650,5 +654,5 @@ fn test_repr() {\n                \"(10u64, ~\\\"hello\\\")\");\n \n     struct Foo;\n-    exact_test(&(~[Foo, Foo]), \"~[repr::test_repr::Foo{}, repr::test_repr::Foo{}]\");\n+    exact_test(&(~[Foo, Foo]), \"~[repr::test_repr::Foo, repr::test_repr::Foo]\");\n }"}, {"sha": "22c64c6b39cd7b796713d29e71965e7af0f86795", "filename": "src/libstd/vec.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6655b3c4620714e1a043be3b47f581719cefa12d/src%2Flibstd%2Fvec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6655b3c4620714e1a043be3b47f581719cefa12d/src%2Flibstd%2Fvec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fvec.rs?ref=6655b3c4620714e1a043be3b47f581719cefa12d", "patch": "@@ -3682,11 +3682,11 @@ mod tests {\n \n         let xs = ~[Foo, Foo, Foo];\n         assert_eq!(fmt!(\"%?\", xs.slice(0, 2).to_owned()),\n-                   ~\"~[vec::tests::Foo{}, vec::tests::Foo{}]\");\n+                   ~\"~[vec::tests::Foo, vec::tests::Foo]\");\n \n         let xs: [Foo, ..3] = [Foo, Foo, Foo];\n         assert_eq!(fmt!(\"%?\", xs.slice(0, 2).to_owned()),\n-                   ~\"~[vec::tests::Foo{}, vec::tests::Foo{}]\");\n+                   ~\"~[vec::tests::Foo, vec::tests::Foo]\");\n         cnt = 0;\n         for f in xs.iter() {\n             assert!(*f == Foo);"}, {"sha": "c60c97552fa5dafc3f2567611ad357f7922389f1", "filename": "src/test/run-pass/ifmt.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6655b3c4620714e1a043be3b47f581719cefa12d/src%2Ftest%2Frun-pass%2Fifmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6655b3c4620714e1a043be3b47f581719cefa12d/src%2Ftest%2Frun-pass%2Fifmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fifmt.rs?ref=6655b3c4620714e1a043be3b47f581719cefa12d", "patch": "@@ -29,7 +29,7 @@ pub fn main() {\n \n     // Make sure there's a poly formatter that takes anything\n     t!(format!(\"{:?}\", 1), \"1\");\n-    t!(format!(\"{:?}\", A), \"A{}\");\n+    t!(format!(\"{:?}\", A), \"A\");\n     t!(format!(\"{:?}\", ()), \"()\");\n     t!(format!(\"{:?}\", @(~1, \"foo\")), \"@(~1, \\\"foo\\\")\");\n "}]}