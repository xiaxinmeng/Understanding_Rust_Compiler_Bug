{"sha": "4d5ce340cd643cbb775728cfd223a7a4b5281bae", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRkNWNlMzQwY2Q2NDNjYmI3NzU3MjhjZmQyMjNhN2E0YjUyODFiYWU=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-05-30T21:04:57Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-05-30T21:17:33Z"}, "message": "test-macros: Avoid always producing errors in `#[derive(Print)]`", "tree": {"sha": "e4f44f94c6c71a49381e538ac69cc1cbdb4dca26", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4f44f94c6c71a49381e538ac69cc1cbdb4dca26"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4d5ce340cd643cbb775728cfd223a7a4b5281bae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4d5ce340cd643cbb775728cfd223a7a4b5281bae", "html_url": "https://github.com/rust-lang/rust/commit/4d5ce340cd643cbb775728cfd223a7a4b5281bae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4d5ce340cd643cbb775728cfd223a7a4b5281bae/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "74e80468347471779be6060d8d7d6d04e98e467f", "url": "https://api.github.com/repos/rust-lang/rust/commits/74e80468347471779be6060d8d7d6d04e98e467f", "html_url": "https://github.com/rust-lang/rust/commit/74e80468347471779be6060d8d7d6d04e98e467f"}], "stats": {"total": 38, "additions": 5, "deletions": 33}, "files": [{"sha": "fb8016cd43896029c08f6c4b2a0737f8f3e98c6a", "filename": "src/test/ui/proc-macro/auxiliary/test-macros.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4d5ce340cd643cbb775728cfd223a7a4b5281bae/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Ftest-macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d5ce340cd643cbb775728cfd223a7a4b5281bae/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Ftest-macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fauxiliary%2Ftest-macros.rs?ref=4d5ce340cd643cbb775728cfd223a7a4b5281bae", "patch": "@@ -108,5 +108,6 @@ pub fn print_attr(_: TokenStream, input: TokenStream) -> TokenStream {\n \n #[proc_macro_derive(Print, attributes(print_helper))]\n pub fn print_derive(input: TokenStream) -> TokenStream {\n-    print_helper(input, \"DERIVE\")\n+    print_helper(input, \"DERIVE\");\n+    TokenStream::new()\n }"}, {"sha": "5f2549376d1ba25ea0e88fd193cc7db07ef0fdb8", "filename": "src/test/ui/proc-macro/dollar-crate.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/4d5ce340cd643cbb775728cfd223a7a4b5281bae/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4d5ce340cd643cbb775728cfd223a7a4b5281bae/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate.rs?ref=4d5ce340cd643cbb775728cfd223a7a4b5281bae", "patch": "@@ -1,3 +1,4 @@\n+// check-pass\n // edition:2018\n // aux-build:test-macros.rs\n // aux-build:dollar-crate-external.rs\n@@ -23,7 +24,7 @@ mod local {\n             struct A($crate::S);\n \n             #[derive(Print)]\n-            struct D($crate::S); //~ ERROR the name `D` is defined multiple times\n+            struct D($crate::S);\n         };\n     }\n \n@@ -33,7 +34,7 @@ mod local {\n mod external {\n     use crate::dollar_crate_external;\n \n-    dollar_crate_external::external!(); //~ ERROR the name `D` is defined multiple times\n+    dollar_crate_external::external!();\n }\n \n fn main() {}"}, {"sha": "465f242580dfbe551a48ff04b45c11c9a7ad4077", "filename": "src/test/ui/proc-macro/dollar-crate.stderr", "status": "removed", "additions": 0, "deletions": 30, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/74e80468347471779be6060d8d7d6d04e98e467f/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/74e80468347471779be6060d8d7d6d04e98e467f/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Fdollar-crate.stderr?ref=74e80468347471779be6060d8d7d6d04e98e467f", "patch": "@@ -1,30 +0,0 @@\n-error[E0428]: the name `D` is defined multiple times\n-  --> $DIR/dollar-crate.rs:26:13\n-   |\n-LL |             struct D($crate::S);\n-   |             ^^^^^^^^^^^^^^^^^^^^\n-   |             |\n-   |             `D` redefined here\n-   |             previous definition of the type `D` here\n-...\n-LL |     local!();\n-   |     --------- in this macro invocation\n-   |\n-   = note: `D` must be defined only once in the type namespace of this module\n-   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n-\n-error[E0428]: the name `D` is defined multiple times\n-  --> $DIR/dollar-crate.rs:36:5\n-   |\n-LL |     dollar_crate_external::external!();\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-   |     |\n-   |     `D` redefined here\n-   |     previous definition of the type `D` here\n-   |\n-   = note: `D` must be defined only once in the type namespace of this module\n-   = note: this error originates in a macro (in Nightly builds, run with -Z macro-backtrace for more info)\n-\n-error: aborting due to 2 previous errors\n-\n-For more information about this error, try `rustc --explain E0428`."}]}