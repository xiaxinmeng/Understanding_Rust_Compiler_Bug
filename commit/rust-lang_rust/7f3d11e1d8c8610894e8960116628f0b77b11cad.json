{"sha": "7f3d11e1d8c8610894e8960116628f0b77b11cad", "node_id": "C_kwDOAAsO6NoAKDdmM2QxMWUxZDhjODYxMDg5NGU4OTYwMTE2NjI4ZjBiNzdiMTFjYWQ", "commit": {"author": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-07-31T13:45:26Z"}, "committer": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-07-31T13:45:26Z"}, "message": "Fix compat.rs for `cfg(miri)`", "tree": {"sha": "4ca92f2528a154e5583753747ab29dd496a535d1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4ca92f2528a154e5583753747ab29dd496a535d1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f3d11e1d8c8610894e8960116628f0b77b11cad", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmLmh3YACgkQcTRy8vRW\nJ96Cpg//blJq+asLi04WyTaJMDhKEMKBol5iswss8MBcUlZCzaWT61JBT0OR5YVV\nwGoYEsUB+xk34H7fTQsjlg1NT1u4Imyg0AuRcnTzsfFOdpWnGKJuHMt0Msoan5pI\n/YHUTcPguXEGrb907/bUskqETlrIiPB44AKUt2/k5WhYcxEf6QyvThDm9N1gR/6c\nckYISUYUyZtabIjGRj2Q5n+LLS5h7ZBk+X19mLGKzRKGa43/ro4l5ym6/hAIc+ZB\nlYZPMN8zU9N0fUlHGg7YAOwaxpzKWBJniYTf1hLibj2fCsydiiZi3Y6D/4J5r3o0\nJL7Wy+gr5dwucutI5SHMx3oVz4TzK1hO3izacZPdCF2lzNvHii+JxVsKxGzsEHZX\n6dgWWYea9bBxGFhGO2sBu58+vWpJqDl5Vgm7kr0KBBoWRqMaV6Pc41vU1HsPByOZ\nTOtOHmr++fALfhRsRgq9JDfCPRfnJx40SrcwkpYUQLLsIUUJSK6pPlm/ZTamslpp\n0g9htxEzSk9iKXPld72foDsA5B54z4izuj8OJXA3A8oQ0dnVOLYaVwgzgSLE4q3d\nDl1PYhRqCnrU88d1xwSTJreVHs8/4JpMzZuDzjkh7OkWu3GuN0Jb82/C83FEkdU4\nvm5wZGqND0ktXHXirIg9AaKGb9PQ0Q1ILwUUGnAzW4vN5xDQR7s=\n=Stt4\n-----END PGP SIGNATURE-----", "payload": "tree 4ca92f2528a154e5583753747ab29dd496a535d1\nparent 76822a28780a9a93be04409e52c5df21663aab97\nauthor Chris Denton <christophersdenton@gmail.com> 1659275126 +0100\ncommitter Chris Denton <christophersdenton@gmail.com> 1659275126 +0100\n\nFix compat.rs for `cfg(miri)`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f3d11e1d8c8610894e8960116628f0b77b11cad", "html_url": "https://github.com/rust-lang/rust/commit/7f3d11e1d8c8610894e8960116628f0b77b11cad", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f3d11e1d8c8610894e8960116628f0b77b11cad/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "76822a28780a9a93be04409e52c5df21663aab97", "url": "https://api.github.com/repos/rust-lang/rust/commits/76822a28780a9a93be04409e52c5df21663aab97", "html_url": "https://github.com/rust-lang/rust/commit/76822a28780a9a93be04409e52c5df21663aab97"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "b8df46957a59622f7371628da924d582da623e2a", "filename": "library/std/src/sys/windows/compat.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7f3d11e1d8c8610894e8960116628f0b77b11cad/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f3d11e1d8c8610894e8960116628f0b77b11cad/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fcompat.rs?ref=7f3d11e1d8c8610894e8960116628f0b77b11cad", "patch": "@@ -251,7 +251,7 @@ macro_rules! compat_fn_optional {\n             pub fn option() -> Option<F> {\n                 let mut func = NonNull::new(PTR.load(Ordering::Relaxed));\n                 if func.is_none() {\n-                    Module::new($module).map(preload);\n+                    unsafe { Module::new($module).map(preload) };\n                     func = NonNull::new(PTR.load(Ordering::Relaxed));\n                 }\n                 unsafe {"}]}