{"sha": "3d16a20c7aa117773a957db9893f83a1cb3bd653", "node_id": "C_kwDOAAsO6NoAKDNkMTZhMjBjN2FhMTE3NzczYTk1N2RiOTg5M2Y4M2ExY2IzYmQ2NTM", "commit": {"author": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2021-12-11T01:11:57Z"}, "committer": {"name": "Andy Wang", "email": "cbeuw.andy@gmail.com", "date": "2021-12-11T01:11:57Z"}, "message": "Remap path in MCOptions", "tree": {"sha": "2039c068074ae748bbdf984420414d156813d999", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2039c068074ae748bbdf984420414d156813d999"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3d16a20c7aa117773a957db9893f83a1cb3bd653", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCAAdFiEE7dcbcBMl24/h63ldGBtJ+fOPM3QFAmGz+t0ACgkQGBtJ+fOP\nM3S1tgv/QNWQiWZiV66hnxprgyww+QnOP5eq8zx87NyRAhpMYYfBGupJcz/1KgBM\nGJL+fsCKP8i1h2+xBAZRdLOSGgjqYPuQoHRULf1LQ0Ebz9nmcVBW+2TOLXWPIhQ2\n7AcmUgElAjuy+J7AKQISyg0pGC7rB+bhFhnk/4tnqde79W9yrzwKKYSS1CVrOpx4\n7kHur9Na5l4KffBqXa9Z867a6rB8FBWNL9LvzS1XY2WX7XTEoxWecFqDdkk7VY2B\nwSID0GLtkPHYIQaoLLK9MgNCNij8WwacOhyCezRKURj26uNv/MAQm3JeeYV/E2x3\ng/LDPGRsxN6kXplrQrpyDJC+mYMw4MJs6uagBqK9b/n1hzIW4JUrxEXRKIFChiXr\n8iua9H7mbdQhC1uOtsoBbNJOoDvyTXaLPvYPUirjA2bT3c+Jsv/OfEXbrZLpRIBC\nINgF8TSmkH2BSl4rO1jVInhVOE3SArPIbP9enlwZBVc+/PB3zRrfD/9dNcqw6/DV\nSYm8V8/f\n=w5lc\n-----END PGP SIGNATURE-----", "payload": "tree 2039c068074ae748bbdf984420414d156813d999\nparent 42190bb42e06f87e24f9b4280a996175e97b73ab\nauthor Andy Wang <cbeuw.andy@gmail.com> 1639185117 +0000\ncommitter Andy Wang <cbeuw.andy@gmail.com> 1639185117 +0000\n\nRemap path in MCOptions\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3d16a20c7aa117773a957db9893f83a1cb3bd653", "html_url": "https://github.com/rust-lang/rust/commit/3d16a20c7aa117773a957db9893f83a1cb3bd653", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3d16a20c7aa117773a957db9893f83a1cb3bd653/comments", "author": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cbeuw", "id": 7034308, "node_id": "MDQ6VXNlcjcwMzQzMDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7034308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cbeuw", "html_url": "https://github.com/cbeuw", "followers_url": "https://api.github.com/users/cbeuw/followers", "following_url": "https://api.github.com/users/cbeuw/following{/other_user}", "gists_url": "https://api.github.com/users/cbeuw/gists{/gist_id}", "starred_url": "https://api.github.com/users/cbeuw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cbeuw/subscriptions", "organizations_url": "https://api.github.com/users/cbeuw/orgs", "repos_url": "https://api.github.com/users/cbeuw/repos", "events_url": "https://api.github.com/users/cbeuw/events{/privacy}", "received_events_url": "https://api.github.com/users/cbeuw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42190bb42e06f87e24f9b4280a996175e97b73ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/42190bb42e06f87e24f9b4280a996175e97b73ab", "html_url": "https://github.com/rust-lang/rust/commit/42190bb42e06f87e24f9b4280a996175e97b73ab"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "1ddc0cf8b9b723756ab206d2bc3c445110ede13d", "filename": "compiler/rustc_codegen_llvm/src/back/write.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/3d16a20c7aa117773a957db9893f83a1cb3bd653/compiler%2Frustc_codegen_llvm%2Fsrc%2Fback%2Fwrite.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3d16a20c7aa117773a957db9893f83a1cb3bd653/compiler%2Frustc_codegen_llvm%2Fsrc%2Fback%2Fwrite.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_llvm%2Fsrc%2Fback%2Fwrite.rs?ref=3d16a20c7aa117773a957db9893f83a1cb3bd653", "patch": "@@ -205,8 +205,11 @@ pub fn target_machine_factory(\n     let use_init_array =\n         !sess.opts.debugging_opts.use_ctors_section.unwrap_or(sess.target.use_ctors_section);\n \n+    let path_mapping = sess.source_map().path_mapping().clone();\n+\n     Arc::new(move |config: TargetMachineFactoryConfig| {\n-        let split_dwarf_file = config.split_dwarf_file.unwrap_or_default();\n+        let split_dwarf_file =\n+            path_mapping.map_prefix(config.split_dwarf_file.unwrap_or_default()).0;\n         let split_dwarf_file = CString::new(split_dwarf_file.to_str().unwrap()).unwrap();\n \n         let tm = unsafe {"}]}