{"sha": "a76d9b529a75780690aa0978471f18da81676dd4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3NmQ5YjUyOWE3NTc4MDY5MGFhMDk3ODQ3MWYxOGRhODE2NzZkZDQ=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-03-12T04:24:04Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-03-19T20:27:31Z"}, "message": "format code and tests", "tree": {"sha": "5c1d1d324cd73c68b46b35e78dc05ca6749e2161", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5c1d1d324cd73c68b46b35e78dc05ca6749e2161"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a76d9b529a75780690aa0978471f18da81676dd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a76d9b529a75780690aa0978471f18da81676dd4", "html_url": "https://github.com/rust-lang/rust/commit/a76d9b529a75780690aa0978471f18da81676dd4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a76d9b529a75780690aa0978471f18da81676dd4/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "164cf7d6c95d3184eb678ccb97007116e9ba7ca0", "url": "https://api.github.com/repos/rust-lang/rust/commits/164cf7d6c95d3184eb678ccb97007116e9ba7ca0", "html_url": "https://github.com/rust-lang/rust/commit/164cf7d6c95d3184eb678ccb97007116e9ba7ca0"}], "stats": {"total": 48, "additions": 22, "deletions": 26}, "files": [{"sha": "ae37b043c05567b1fd250f8035bec80275d5613b", "filename": "bootstrap.sh", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/bootstrap.sh", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/bootstrap.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/bootstrap.sh?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -7,9 +7,8 @@\n cargo build --release\n \n target/release/rustfmt --write-mode=overwrite src/lib.rs\n-target/release/rustfmt --write-mode=overwrite src/bin/rustfmt.rs\n-target/release/rustfmt --write-mode=overwrite src/bin/cargo-fmt.rs\n-target/release/rustfmt --write-mode=overwrite tests/system.rs\n+target/release/rustfmt --write-mode=overwrite src/bin/main.rs\n+target/release/rustfmt --write-mode=overwrite src/cargo-fmt/main.rs\n \n for filename in tests/target/*.rs; do\n     if ! grep -q \"rustfmt-\" \"$filename\"; then"}, {"sha": "914b2cee1afe381dfe8c2d367ea88c52bb6ba6f4", "filename": "src/bin/main.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fbin%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fbin%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fmain.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -22,9 +22,9 @@ use std::str::FromStr;\n \n use getopts::{Matches, Options};\n \n+use rustfmt::{run, FileName, Input, Summary};\n use rustfmt::config::{get_toml_path, Color, Config, WriteMode};\n use rustfmt::config::file_lines::FileLines;\n-use rustfmt::{run, FileName, Input, Summary};\n \n type FmtError = Box<error::Error + Send + Sync>;\n type FmtResult<T> = std::result::Result<T, FmtError>;"}, {"sha": "c5f24004fcf712241a316a3112665d38f2b4c964", "filename": "src/codemap.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcodemap.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -12,8 +12,8 @@\n //! This includes extension traits and methods for looking up spans and line ranges for AST nodes.\n \n use config::file_lines::LineRange;\n-use visitor::SnippetProvider;\n use syntax::codemap::{BytePos, CodeMap, Span};\n+use visitor::SnippetProvider;\n \n use comment::FindUncommented;\n "}, {"sha": "d49fdbe7ebaeb30204acd19db77a679bf4b8bf87", "filename": "src/config/license.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fconfig%2Flicense.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fconfig%2Flicense.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Flicense.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -1,6 +1,6 @@\n-use std::io;\n use std::fmt;\n use std::fs::File;\n+use std::io;\n use std::io::Read;\n \n use regex;"}, {"sha": "056cd26151f569fb68eacd998d69e7c51f82d230", "filename": "src/config/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fconfig%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fconfig%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fmod.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -23,9 +23,9 @@ mod config_type;\n mod options;\n \n pub mod file_lines;\n+pub mod license;\n pub mod lists;\n pub mod summary;\n-pub mod license;\n \n use config::config_type::ConfigType;\n use config::file_lines::FileLines;\n@@ -69,7 +69,7 @@ create_config! {\n \n     // Ordering\n     reorder_extern_crates: bool, true, false, \"Reorder extern crate statements alphabetically\";\n-    reorder_extern_crates_in_group: bool, true, false, \"Reorder extern crate statements in group\";\n+    reorder_extern_crates_in_group: bool, false, false, \"Reorder extern crate statements in group\";\n     reorder_imports: bool, true, false, \"Reorder import statements alphabetically\";\n     reorder_imports_in_group: bool, true, false, \"Reorder import statements in group\";\n     reorder_imported_names: bool, true, false,"}, {"sha": "99bf752f2b9aa532a1d93da7c19e67839d4fca1e", "filename": "src/config/summary.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fconfig%2Fsummary.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fconfig%2Fsummary.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fsummary.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -8,8 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use std::time::{Duration, Instant};\n use std::default::Default;\n+use std::time::{Duration, Instant};\n \n #[must_use]\n #[derive(Debug, Default, Clone, Copy)]"}, {"sha": "273e5b36d6f881bfac94b9e62bc43b4f12265115", "filename": "src/items.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fitems.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Fitems.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fitems.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -26,8 +26,8 @@ use config::{BraceStyle, Config, Density, IndentStyle};\n use expr::{format_expr, is_empty_block, is_simple_block_stmt, rewrite_assign_rhs,\n            rewrite_assign_rhs_with, ExprType, RhsTactics};\n use lists::{definitive_tactic, itemize_list, write_list, ListFormatting, ListItem, Separator};\n-use rewrite::{Rewrite, RewriteContext};\n use overflow;\n+use rewrite::{Rewrite, RewriteContext};\n use shape::{Indent, Shape};\n use spanned::Spanned;\n use types::TraitTyParamBounds;"}, {"sha": "c76b67c461ebc319000fe2598fd0cd8ef946ce1c", "filename": "src/overflow.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Foverflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Foverflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Foverflow.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -17,9 +17,9 @@ use syntax::codemap::Span;\n \n use closures;\n use codemap::SpanUtils;\n+use expr::{is_nested_call, maybe_get_args_offset, ToExpr};\n use lists::{definitive_tactic, itemize_list, write_list, ListFormatting, ListItem, Separator};\n use rewrite::{Rewrite, RewriteContext};\n-use expr::{is_nested_call, maybe_get_args_offset, ToExpr};\n use shape::Shape;\n use spanned::Spanned;\n use utils::{count_newlines, extra_offset, first_line_width, last_line_width, mk_sp, paren_overhead};"}, {"sha": "ca847656562dcd7ae8e50a7e9db484ccb2c3c723", "filename": "src/rustfmt_diff.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/src%2Frustfmt_diff.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/src%2Frustfmt_diff.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustfmt_diff.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -12,8 +12,8 @@ use config::Color;\n use diff;\n use std::collections::VecDeque;\n use std::io;\n-use term;\n use std::io::Write;\n+use term;\n use utils::use_colored_tty;\n \n #[derive(Debug, PartialEq)]"}, {"sha": "61989cace75de253dee4f0650d76c83023f0c2d0", "filename": "tests/target/extern.rs", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fextern.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fextern.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fextern.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -1,17 +1,14 @@\n // rustfmt-normalize_comments: true\n \n-extern crate foo;\n-extern crate foo as bar;\n-\n+extern crate bar;\n extern crate chrono;\n extern crate dotenv;\n-extern crate futures;\n-\n-extern crate bar;\n extern crate foo;\n-\n-// #2315\n+extern crate foo;\n+extern crate foo as bar;\n+extern crate futures;\n extern crate proc_macro;\n+// #2315\n extern crate proc_macro2;\n \n extern \"C\" {"}, {"sha": "9d247aaf6dffb6cbe1c01705c9ef127f88892f7a", "filename": "tests/target/import-fencepost-length.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fimport-fencepost-length.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fimport-fencepost-length.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fimport-fencepost-length.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -1,4 +1,4 @@\n-use aaaaaaaaaaaaaaa::bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb;\n use aaaaaaaaaaaaaaa::{bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb, ccccccccccccccccccccccccccccccc, dddddddd};\n use aaaaaaaaaaaaaaa::{bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb, ccccccccccccccccccccccccccccccc,\n                       ddddddddd};\n+use aaaaaaaaaaaaaaa::bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb;"}, {"sha": "34573b48937b6f8a196d2e91345120da05ee39b8", "filename": "tests/target/imports.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fimports.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fimports.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fimports.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -4,11 +4,11 @@\n // Imports.\n \n // Long import.\n-use syntax::ast::{ItemDefaultImpl, ItemForeignMod, ItemImpl, ItemMac, ItemMod, ItemStatic};\n-use exceedingly::looooooooooooooooooooooooooooooooooooooooooooooooooooooooooong::import::path::{ItemA,\n-                                                                                                ItemB};\n use exceedingly::loooooooooooooooooooooooooooooooooooooooooooooooooooooooong::import::path::{ItemA,\n                                                                                              ItemB};\n+use exceedingly::looooooooooooooooooooooooooooooooooooooooooooooooooooooooooong::import::path::{ItemA,\n+                                                                                                ItemB};\n+use syntax::ast::{ItemDefaultImpl, ItemForeignMod, ItemImpl, ItemMac, ItemMod, ItemStatic};\n \n use list::{// Another item\n            AnotherItem, // Another Comment\n@@ -19,9 +19,9 @@ use list::{// Another item\n \n use test::{/* A */ self /* B */, Other /* C */};\n \n-use syntax;\n use {Bar /* comment */, /* Pre-comment! */ Foo};\n use Foo::{Bar, Baz};\n+use syntax;\n pub use syntax::ast::{Expr, ExprAssign, ExprCall, ExprMethodCall, ExprPath, Expr_};\n \n use self;"}, {"sha": "11d1d69e91af891c40efd589df4e0c23f8591f43", "filename": "tests/target/skip.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fskip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a76d9b529a75780690aa0978471f18da81676dd4/tests%2Ftarget%2Fskip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fskip.rs?ref=a76d9b529a75780690aa0978471f18da81676dd4", "patch": "@@ -59,7 +59,7 @@ fn skip_on_statements() {\n \n     // Item\n     #[cfg_attr(rustfmt, rustfmt_skip)]\n-    use   foobar  ;\n+    use foobar;\n \n     // Mac\n     #[cfg_attr(rustfmt, rustfmt_skip)]"}]}