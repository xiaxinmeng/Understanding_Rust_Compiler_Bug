{"sha": "0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBhZjlmN2VkYjc0NjM5YjljZjBlZWQ4YmQxZDJlNWI4MDg4MGZkOWE=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-11-02T12:20:16Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-11-02T12:20:16Z"}, "message": "compiletest: try running lldb_batchmode.py with PYTHONUNBUFFERED\n\nWhen reporting fatal errors, LLVM calls abort() to exit the program.\nThere is a chance that might interfere with Python printing stuff to\nstdout, as by default it relies on buffering to increase performance.\n\nThis commit tries to disable Python buffering, to hopefully get useful\nlogs while debugging #78665.", "tree": {"sha": "e9fbd3ff36e1655cf7fb5a686f0bb81e8d20b89a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e9fbd3ff36e1655cf7fb5a686f0bb81e8d20b89a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl+f+nUACgkQPgar6Auq\n8ZwAWw/9F6xSOeXAdJBamysD3sCjvtZfmjfouEs1W7OdDA5tqUpekQV2KM8hcagx\ngwJ0dvHGFubsOsJPp3hGnPIWQgKNB0dsHCdeSvbWFcVg64xhteRNTxxXXDnVWcNo\nxtC60v0dxk2V2XnBKKdTcCRexAfuXt6Sjk2pnIRv5CmXXg8dAZQGbszKL8YX62GU\nMujVA9Xzm2Ngn8nz+aGeVsbey/OcnD6yUbnwl0J7Tbs2beJawoHJw/D0xeNYyn5I\ndLiANE3isNxhZZ9FrNdyX07DAGh3/8h/I7S6Uhrdld2l4q0glB7jXDWub4RQLH/s\ncRiIjuytSrSRRqkN9hHRAy5NQCZPUNqbHXW7fGvbmvt+0I01ct9iTKTy3OePJpnY\n7EvaYRpcoJWEkGtlVenXm5amQ8O9Z8P+ywlv2cg6F/zD1qktN4NLCLgIF63+ZObR\nP+TQhyiDzIyLaUWmrph7OMqZFk3N1KQfZhP2CPvYi63w9ohGP6EofkA9MXbenM+1\n2MnwLKe5WB5o5Xyw7f8T4LRluxt/mqsnFDnl/1zAJuTDdbGMYYtE7MkdqtF7UjJE\nTwclwv3lbqrl/NOZ1uLjFJxfblXcembQF8Em8vcalQe6P5048+o+thurC8LhSLXM\nmN9uVB5nkDAyTSj86kekp2zn1j2dl9A3iS5N1Ni4ijVOZ/iA+Rc=\n=Y2tZ\n-----END PGP SIGNATURE-----", "payload": "tree e9fbd3ff36e1655cf7fb5a686f0bb81e8d20b89a\nparent 3478d7c3607ffbba629af2265c01002771e48c18\nauthor Pietro Albini <pietro@pietroalbini.org> 1604319616 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1604319616 +0100\n\ncompiletest: try running lldb_batchmode.py with PYTHONUNBUFFERED\n\nWhen reporting fatal errors, LLVM calls abort() to exit the program.\nThere is a chance that might interfere with Python printing stuff to\nstdout, as by default it relies on buffering to increase performance.\n\nThis commit tries to disable Python buffering, to hopefully get useful\nlogs while debugging #78665.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a", "html_url": "https://github.com/rust-lang/rust/commit/0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3478d7c3607ffbba629af2265c01002771e48c18", "url": "https://api.github.com/repos/rust-lang/rust/commits/3478d7c3607ffbba629af2265c01002771e48c18", "html_url": "https://github.com/rust-lang/rust/commit/3478d7c3607ffbba629af2265c01002771e48c18"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "492620d45bfe5b6096bb5cf7df0dc19636b3dfd2", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=0af9f7edb74639b9cf0eed8bd1d2e5b80880fd9a", "patch": "@@ -1166,6 +1166,7 @@ impl<'test> TestCx<'test> {\n                 .arg(&lldb_script_path)\n                 .arg(test_executable)\n                 .arg(debugger_script)\n+                .env(\"PYTHONUNBUFFERED\", \"1\") // Help debugging #78665\n                 .env(\"PYTHONPATH\", self.config.lldb_python_dir.as_ref().unwrap()),\n         )\n     }"}]}