{"sha": "f44f96d61c11e439e9d4092258e3322e126418bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY0NGY5NmQ2MWMxMWU0MzllOWQ0MDkyMjU4ZTMzMjJlMTI2NDE4YmY=", "commit": {"author": {"name": "Vishnunarayan K I", "email": "appukuttancr@gmail.com", "date": "2020-11-03T09:10:42Z"}, "committer": {"name": "Vishnunarayan K I", "email": "appukuttancr@gmail.com", "date": "2020-11-03T09:10:42Z"}, "message": "add tests", "tree": {"sha": "83d2ef5f96463c2ecff2a58d7a28d77e1ba70159", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/83d2ef5f96463c2ecff2a58d7a28d77e1ba70159"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f44f96d61c11e439e9d4092258e3322e126418bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f44f96d61c11e439e9d4092258e3322e126418bf", "html_url": "https://github.com/rust-lang/rust/commit/f44f96d61c11e439e9d4092258e3322e126418bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f44f96d61c11e439e9d4092258e3322e126418bf/comments", "author": {"login": "vn-ki", "id": 31964688, "node_id": "MDQ6VXNlcjMxOTY0Njg4", "avatar_url": "https://avatars.githubusercontent.com/u/31964688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vn-ki", "html_url": "https://github.com/vn-ki", "followers_url": "https://api.github.com/users/vn-ki/followers", "following_url": "https://api.github.com/users/vn-ki/following{/other_user}", "gists_url": "https://api.github.com/users/vn-ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/vn-ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vn-ki/subscriptions", "organizations_url": "https://api.github.com/users/vn-ki/orgs", "repos_url": "https://api.github.com/users/vn-ki/repos", "events_url": "https://api.github.com/users/vn-ki/events{/privacy}", "received_events_url": "https://api.github.com/users/vn-ki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vn-ki", "id": 31964688, "node_id": "MDQ6VXNlcjMxOTY0Njg4", "avatar_url": "https://avatars.githubusercontent.com/u/31964688?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vn-ki", "html_url": "https://github.com/vn-ki", "followers_url": "https://api.github.com/users/vn-ki/followers", "following_url": "https://api.github.com/users/vn-ki/following{/other_user}", "gists_url": "https://api.github.com/users/vn-ki/gists{/gist_id}", "starred_url": "https://api.github.com/users/vn-ki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vn-ki/subscriptions", "organizations_url": "https://api.github.com/users/vn-ki/orgs", "repos_url": "https://api.github.com/users/vn-ki/repos", "events_url": "https://api.github.com/users/vn-ki/events{/privacy}", "received_events_url": "https://api.github.com/users/vn-ki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f422e811e4932907e11e8da92f24d2834f7612f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/f422e811e4932907e11e8da92f24d2834f7612f2", "html_url": "https://github.com/rust-lang/rust/commit/f422e811e4932907e11e8da92f24d2834f7612f2"}], "stats": {"total": 49, "additions": 49, "deletions": 0}, "files": [{"sha": "508e486afec7253ce604ac209312a578e663d274", "filename": "src/test/ui/pattern/bindings-after-at/bind-by-copy.rs", "status": "added", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/f44f96d61c11e439e9d4092258e3322e126418bf/src%2Ftest%2Fui%2Fpattern%2Fbindings-after-at%2Fbind-by-copy.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f44f96d61c11e439e9d4092258e3322e126418bf/src%2Ftest%2Fui%2Fpattern%2Fbindings-after-at%2Fbind-by-copy.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fbindings-after-at%2Fbind-by-copy.rs?ref=f44f96d61c11e439e9d4092258e3322e126418bf", "patch": "@@ -0,0 +1,49 @@\n+// run-pass\n+\n+// Test copy\n+\n+#![feature(bindings_after_at)]\n+\n+struct A { a: i32, b: i32 }\n+struct B { a: i32, b: C }\n+struct D { a: i32, d: C }\n+#[derive(Copy,Clone)]\n+struct C { c: i32 }\n+\n+pub fn main() {\n+    match (A {a: 10, b: 20}) {\n+        x@A {a, b: 20} => { assert!(x.a == 10); assert!(a == 10); }\n+        A {b: _b, ..} => { panic!(); }\n+    }\n+\n+    let mut x@B {b, ..} = B {a: 10, b: C {c: 20}};\n+    assert_eq!(x.a, 10);\n+    x.b.c = 30;\n+    assert_eq!(b.c, 20);\n+    let mut y@D {d, ..} = D {a: 10, d: C {c: 20}};\n+    assert_eq!(y.a, 10);\n+    y.d.c = 30;\n+    assert_eq!(d.c, 20);\n+\n+    let some_b = Some(B { a: 10, b: C { c: 20 } });\n+\n+    // in irrefutable pattern\n+    if let Some(x @ B { b, .. }) = some_b {\n+        assert_eq!(x.b.c, 20);\n+        assert_eq!(b.c, 20);\n+    } else {\n+        unreachable!();\n+    }\n+\n+    let some_b = Some(B { a: 10, b: C { c: 20 } });\n+\n+    if let Some(x @ B { b: mut b @ C { c }, .. }) = some_b {\n+        assert_eq!(x.b.c, 20);\n+        assert_eq!(b.c, 20);\n+        b.c = 30;\n+        assert_eq!(b.c, 30);\n+        assert_eq!(c, 20);\n+    } else {\n+        unreachable!();\n+    }\n+}"}]}