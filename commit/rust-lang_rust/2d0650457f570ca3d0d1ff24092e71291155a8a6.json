{"sha": "2d0650457f570ca3d0d1ff24092e71291155a8a6", "node_id": "C_kwDOAAsO6NoAKDJkMDY1MDQ1N2Y1NzBjYTNkMGQxZmYyNDA5MmU3MTI5MTE1NWE4YTY", "commit": {"author": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-07-05T11:00:51Z"}, "committer": {"name": "Chris Denton", "email": "christophersdenton@gmail.com", "date": "2022-07-05T11:05:51Z"}, "message": "Add comment and simplify `hiberfil_sys` test", "tree": {"sha": "a838525d59a470d24dfa14d5ea53dfc7d2a204cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a838525d59a470d24dfa14d5ea53dfc7d2a204cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2d0650457f570ca3d0d1ff24092e71291155a8a6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmLEGw8ACgkQcTRy8vRW\nJ95nPg/6AkxbHcUJoamf+k6abhjq3+2uzhYUkHXUpEUHelOcXIPpPUJSASHXzTSm\nZibCQQtp+fmAgsRmCDC79xd1ksFP9ovoUKikVgF/INdvhIL9HE4BShZxjW9Q3r6j\nER56WHtnNifkZVU4ohjIFsgJ0Mn/JGZv1g7HRkvrFfVgBd5ZYghsgyztTwx5TnIx\ndC5KRn5TO4oqpKAIC4xQHEhaSIcplBGe86pcWmkblNiTBX0SOlZAZuCboF8V2g1L\n1HeKq9jnp0EUg9pIZdUQjoblvhSt6R9iXgBJiETBOitU+RKPT6ISZuKlieuL7QyP\nlvfUaN19qOWvLR0NFvStUr07Z/mAtzEzx7712KwEQQ0sW4RQbSANhVG3Pxoa9Srd\nuiQbgY+bV7l+sv5uBKu5/4DXFELJdkrPm9zCkCsXI3LS8Pk/qMVZrsijJ8tAbdIT\nXcdoDD/F+D7VHvHmOXrRty78N9zXeENw0PzVJxEKtgeXaeFHGIlXLlqN5N1rAyn6\nnvSe5cITJgU29LsgrGLB3dx4DoADRmQrW3AcNU/eBwJFGa3WG8UaSYwEuD2U7/ci\n+umESDp6YjKlyqQXeLJwfm2zFuLBtPE6JMUHJCud9T7Nl0QVKUuO11wpBuJE2glD\n/oG8116i09b0CmNxRl6w/Z9vmqMyvWAk70hYlwTk4IzUrRN7M6c=\n=/oul\n-----END PGP SIGNATURE-----", "payload": "tree a838525d59a470d24dfa14d5ea53dfc7d2a204cc\nparent 8d4adad953edef2ef94b02e2bb1ed9b22bb1d975\nauthor Chris Denton <christophersdenton@gmail.com> 1657018851 +0100\ncommitter Chris Denton <christophersdenton@gmail.com> 1657019151 +0100\n\nAdd comment and simplify `hiberfil_sys` test\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2d0650457f570ca3d0d1ff24092e71291155a8a6", "html_url": "https://github.com/rust-lang/rust/commit/2d0650457f570ca3d0d1ff24092e71291155a8a6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2d0650457f570ca3d0d1ff24092e71291155a8a6/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d4adad953edef2ef94b02e2bb1ed9b22bb1d975", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d4adad953edef2ef94b02e2bb1ed9b22bb1d975", "html_url": "https://github.com/rust-lang/rust/commit/8d4adad953edef2ef94b02e2bb1ed9b22bb1d975"}], "stats": {"total": 11, "additions": 6, "deletions": 5}, "files": [{"sha": "d028204e5a182da4619cd60b1e3247f59166d8bf", "filename": "library/std/src/fs/tests.rs", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2d0650457f570ca3d0d1ff24092e71291155a8a6/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d0650457f570ca3d0d1ff24092e71291155a8a6/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Ffs%2Ftests.rs?ref=2d0650457f570ca3d0d1ff24092e71291155a8a6", "patch": "@@ -1535,13 +1535,14 @@ fn read_large_dir() {\n     }\n }\n \n+/// Test the fallback for getting the metadata of files like hiberfil.sys that\n+/// Windows holds a special lock on, preventing normal means of querying\n+/// metadata. See #96980.\n #[test]\n #[cfg(windows)]\n fn hiberfil_sys() {\n-    // Get the system drive, which is usually `C:`.\n-    let mut hiberfil = crate::env::var(\"SystemDrive\").unwrap();\n-    hiberfil.push_str(r\"\\hiberfil.sys\");\n+    let hiberfil = r\"C:\\hiberfil.sys\";\n \n-    fs::metadata(&hiberfil).unwrap();\n-    fs::symlink_metadata(&hiberfil).unwrap();\n+    fs::metadata(hiberfil).unwrap();\n+    fs::symlink_metadata(hiberfil).unwrap();\n }"}]}