{"sha": "8078c4c809210f44a356b2c88a59ea436cd76edd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgwNzhjNGM4MDkyMTBmNDRhMzU2YjJjODhhNTllYTQzNmNkNzZlZGQ=", "commit": {"author": {"name": "Meziu", "email": "meziu210@icloud.com", "date": "2021-08-31T11:23:59Z"}, "committer": {"name": "Meziu", "email": "meziu210@icloud.com", "date": "2021-08-31T12:11:23Z"}, "message": "ARMv6K Nintendo 3DS Tier 3 target added", "tree": {"sha": "2b0ec8f21b68ed65a2efa581621ba557db0f8177", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2b0ec8f21b68ed65a2efa581621ba557db0f8177"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8078c4c809210f44a356b2c88a59ea436cd76edd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8078c4c809210f44a356b2c88a59ea436cd76edd", "html_url": "https://github.com/rust-lang/rust/commit/8078c4c809210f44a356b2c88a59ea436cd76edd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8078c4c809210f44a356b2c88a59ea436cd76edd/comments", "author": {"login": "Meziu", "id": 55318903, "node_id": "MDQ6VXNlcjU1MzE4OTAz", "avatar_url": "https://avatars.githubusercontent.com/u/55318903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Meziu", "html_url": "https://github.com/Meziu", "followers_url": "https://api.github.com/users/Meziu/followers", "following_url": "https://api.github.com/users/Meziu/following{/other_user}", "gists_url": "https://api.github.com/users/Meziu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Meziu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Meziu/subscriptions", "organizations_url": "https://api.github.com/users/Meziu/orgs", "repos_url": "https://api.github.com/users/Meziu/repos", "events_url": "https://api.github.com/users/Meziu/events{/privacy}", "received_events_url": "https://api.github.com/users/Meziu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Meziu", "id": 55318903, "node_id": "MDQ6VXNlcjU1MzE4OTAz", "avatar_url": "https://avatars.githubusercontent.com/u/55318903?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Meziu", "html_url": "https://github.com/Meziu", "followers_url": "https://api.github.com/users/Meziu/followers", "following_url": "https://api.github.com/users/Meziu/following{/other_user}", "gists_url": "https://api.github.com/users/Meziu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Meziu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Meziu/subscriptions", "organizations_url": "https://api.github.com/users/Meziu/orgs", "repos_url": "https://api.github.com/users/Meziu/repos", "events_url": "https://api.github.com/users/Meziu/events{/privacy}", "received_events_url": "https://api.github.com/users/Meziu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fe37929e4cba2c5c21e6805805769630c736bc3d", "url": "https://api.github.com/repos/rust-lang/rust/commits/fe37929e4cba2c5c21e6805805769630c736bc3d", "html_url": "https://github.com/rust-lang/rust/commit/fe37929e4cba2c5c21e6805805769630c736bc3d"}], "stats": {"total": 48, "additions": 48, "deletions": 0}, "files": [{"sha": "b689cdd8262e595f2cbbccd11f8ccb435bfa17b8", "filename": "compiler/rustc_target/src/spec/armv6k_nintendo_3ds.rs", "status": "added", "additions": 45, "deletions": 0, "changes": 45, "blob_url": "https://github.com/rust-lang/rust/blob/8078c4c809210f44a356b2c88a59ea436cd76edd/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv6k_nintendo_3ds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8078c4c809210f44a356b2c88a59ea436cd76edd/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv6k_nintendo_3ds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Farmv6k_nintendo_3ds.rs?ref=8078c4c809210f44a356b2c88a59ea436cd76edd", "patch": "@@ -0,0 +1,45 @@\n+use crate::spec::{LinkArgs, LinkerFlavor, PanicStrategy, RelocModel, Target, TargetOptions};\n+\n+/// A base target for Nintendo 3DS devices using the devkitARM toolchain.\n+///\n+/// Requires the devkitARM toolchain for 3DS targets on the host system.\n+\n+pub fn target() -> Target {\n+    let mut pre_link_args = LinkArgs::new();\n+    pre_link_args.insert(\n+        LinkerFlavor::Gcc,\n+        vec![\n+            \"-specs=3dsx.specs\".to_string(),\n+            \"-g\".to_string(),\n+            \"-march=armv6k\".to_string(),\n+            \"-mtune=mpcore\".to_string(),\n+            \"-mfloat-abi=hard\".to_string(),\n+            \"-mtp=soft\".to_string(),\n+        ],\n+    );\n+\n+    Target {\n+        llvm_target: \"arm-none-eabihf\".to_string(),\n+        pointer_width: 32,\n+        data_layout: \"e-m:e-p:32:32-Fi8-i64:64-v128:64:128-a:0:32-n32-S64\".to_string(),\n+        arch: \"arm\".to_string(),\n+\n+        options: TargetOptions {\n+            os: \"horizon\".to_string(),\n+            env: \"newlib\".to_string(),\n+            vendor: \"nintendo\".to_string(),\n+            abi: \"eabihf\".to_string(),\n+            linker_flavor: LinkerFlavor::Gcc,\n+            cpu: \"mpcore\".to_string(),\n+            executables: true,\n+            families: vec![\"unix\".to_string()],\n+            linker: Some(\"arm-none-eabi-gcc\".to_string()),\n+            relocation_model: RelocModel::Static,\n+            features: \"+vfp2\".to_string(),\n+            pre_link_args,\n+            exe_suffix: \".elf\".to_string(),\n+            panic_strategy: PanicStrategy::Abort,\n+            ..Default::default()\n+        },\n+    }\n+}"}, {"sha": "1aed1e8506f36e104aef99550ccaf1b603041c80", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8078c4c809210f44a356b2c88a59ea436cd76edd/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8078c4c809210f44a356b2c88a59ea436cd76edd/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=8078c4c809210f44a356b2c88a59ea436cd76edd", "patch": "@@ -941,6 +941,8 @@ supported_targets! {\n \n     (\"bpfeb-unknown-none\", bpfeb_unknown_none),\n     (\"bpfel-unknown-none\", bpfel_unknown_none),\n+\n+    (\"armv6k-nintendo-3ds\", armv6k_nintendo_3ds),\n }\n \n /// Warnings encountered when parsing the target `json`."}, {"sha": "3ba06e87220e343fa4547806f19891ba1189ecd0", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8078c4c809210f44a356b2c88a59ea436cd76edd/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/8078c4c809210f44a356b2c88a59ea436cd76edd/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=8078c4c809210f44a356b2c88a59ea436cd76edd", "patch": "@@ -217,6 +217,7 @@ target | std | host | notes\n `armv5te-unknown-linux-uclibceabi` | ? |  | ARMv5TE Linux with uClibc\n `armv6-unknown-freebsd` | \u2713 | \u2713 | ARMv6 FreeBSD\n `armv6-unknown-netbsd-eabihf` | ? |  |\n+`armv6k-nintendo-3ds` | * |  | ARMv6K Nintendo 3DS, Horizon (Requires devkitARM toolchain)\n `armv7-apple-ios` | \u2713 |  | ARMv7 iOS, Cortex-a8\n `armv7-unknown-freebsd` | \u2713 | \u2713 | ARMv7 FreeBSD\n `armv7-unknown-netbsd-eabihf` | \u2713 | \u2713 |"}]}