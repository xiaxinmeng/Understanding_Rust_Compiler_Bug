{"sha": "2a7fb3584c974d6bf09182d454a457515aca228b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJhN2ZiMzU4NGM5NzRkNmJmMDkxODJkNDU0YTQ1NzUxNWFjYTIyOGI=", "commit": {"author": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2014-11-03T15:53:49Z"}, "committer": {"name": "Jorge Aparicio", "email": "japaricious@gmail.com", "date": "2014-11-03T23:29:24Z"}, "message": "syntax: Use UFCS in the expansion of `#[deriving(Clone)]`", "tree": {"sha": "9b9532c2b10b360c3d25d22ea822d9520c04816f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9b9532c2b10b360c3d25d22ea822d9520c04816f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2a7fb3584c974d6bf09182d454a457515aca228b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2a7fb3584c974d6bf09182d454a457515aca228b", "html_url": "https://github.com/rust-lang/rust/commit/2a7fb3584c974d6bf09182d454a457515aca228b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2a7fb3584c974d6bf09182d454a457515aca228b/comments", "author": null, "committer": null, "parents": [{"sha": "b11b706545ec986b0416a14383170c60004644a5", "url": "https://api.github.com/repos/rust-lang/rust/commits/b11b706545ec986b0416a14383170c60004644a5", "html_url": "https://github.com/rust-lang/rust/commit/b11b706545ec986b0416a14383170c60004644a5"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "e653c8aebf447c03d41a7be48a61ea50b40a7e77", "filename": "src/libsyntax/ext/deriving/clone.rs", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/2a7fb3584c974d6bf09182d454a457515aca228b/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2a7fb3584c974d6bf09182d454a457515aca228b/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Fderiving%2Fclone.rs?ref=2a7fb3584c974d6bf09182d454a457515aca228b", "patch": "@@ -52,11 +52,19 @@ fn cs_clone(\n     name: &str,\n     cx: &mut ExtCtxt, trait_span: Span,\n     substr: &Substructure) -> P<Expr> {\n-    let clone_ident = substr.method_ident;\n     let ctor_ident;\n     let all_fields;\n-    let subcall = |field: &FieldInfo|\n-        cx.expr_method_call(field.span, field.self_.clone(), clone_ident, Vec::new());\n+    let fn_path = vec![\n+        cx.ident_of(\"std\"),\n+        cx.ident_of(\"clone\"),\n+        cx.ident_of(\"Clone\"),\n+        cx.ident_of(\"clone\"),\n+    ];\n+    let subcall = |field: &FieldInfo| {\n+        let args = vec![cx.expr_addr_of(field.span, field.self_.clone())];\n+\n+        cx.expr_call_global(field.span, fn_path.clone(), args)\n+    };\n \n     match *substr.fields {\n         Struct(ref af) => {"}]}