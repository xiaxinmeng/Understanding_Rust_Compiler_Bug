{"sha": "ce20571a55ecc7915eaaa95bfedb67d389d2899c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlMjA1NzFhNTVlY2M3OTE1ZWFhYTk1YmZlZGI2N2QzODlkMjg5OWM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-07-23T00:17:57Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2014-07-23T00:18:03Z"}, "message": "Revert \"Made 'make install' include libs for additional targets\"\n\nThis reverts commit 87334fb05ff2a665419241d877c13d6c4770a3f4.\n\nConflicts:\n\tmk/install.mk", "tree": {"sha": "d0e0ecd2b6bbfbf68dbb6210b788a3061498b893", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d0e0ecd2b6bbfbf68dbb6210b788a3061498b893"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce20571a55ecc7915eaaa95bfedb67d389d2899c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce20571a55ecc7915eaaa95bfedb67d389d2899c", "html_url": "https://github.com/rust-lang/rust/commit/ce20571a55ecc7915eaaa95bfedb67d389d2899c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce20571a55ecc7915eaaa95bfedb67d389d2899c/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bc6bbc3db16f78dc49e7311a4d0d0668f6cb801e", "url": "https://api.github.com/repos/rust-lang/rust/commits/bc6bbc3db16f78dc49e7311a4d0d0668f6cb801e", "html_url": "https://github.com/rust-lang/rust/commit/bc6bbc3db16f78dc49e7311a4d0d0668f6cb801e"}], "stats": {"total": 38, "additions": 15, "deletions": 23}, "files": [{"sha": "a3d9a5758e411906e14ccdf0c50f0bf8f5a9c272", "filename": "mk/dist.mk", "status": "modified", "additions": 13, "deletions": 21, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/ce20571a55ecc7915eaaa95bfedb67d389d2899c/mk%2Fdist.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ce20571a55ecc7915eaaa95bfedb67d389d2899c/mk%2Fdist.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fdist.mk?ref=ce20571a55ecc7915eaaa95bfedb67d389d2899c", "patch": "@@ -205,17 +205,19 @@ distcheck-osx: dist-osx\n # Unix binary installer tarballs\n ######################################################################\n \n-define DEF_PREPARE_DIST_DIR\n-\n-dist-install-dir-$(1)$(3): PREPARE_HOST=$(1)\n-dist-install-dir-$(1)$(3): PREPARE_TARGETS=$(2)\n-dist-install-dir-$(1)$(3): PREPARE_DEST_DIR=tmp/dist/$$(PKG_NAME)-$(1)\n-dist-install-dir-$(1)$(3): PREPARE_DIR_CMD=$(DEFAULT_PREPARE_DIR_CMD)\n-dist-install-dir-$(1)$(3): PREPARE_BIN_CMD=$(DEFAULT_PREPARE_BIN_CMD)\n-dist-install-dir-$(1)$(3): PREPARE_LIB_CMD=$(DEFAULT_PREPARE_LIB_CMD)\n-dist-install-dir-$(1)$(3): PREPARE_MAN_CMD=$(DEFAULT_PREPARE_MAN_CMD)\n-dist-install-dir-$(1)$(3): PREPARE_CLEAN=true\n-dist-install-dir-$(1)$(3): prepare-base-dir-$(1) docs compiler-docs\n+define DEF_INSTALLER\n+\n+$$(eval $$(call DEF_PREPARE,dir-$(1)))\n+\n+dist-install-dir-$(1): PREPARE_HOST=$(1)\n+dist-install-dir-$(1): PREPARE_TARGETS=$(1)\n+dist-install-dir-$(1): PREPARE_DEST_DIR=tmp/dist/$$(PKG_NAME)-$(1)\n+dist-install-dir-$(1): PREPARE_DIR_CMD=$(DEFAULT_PREPARE_DIR_CMD)\n+dist-install-dir-$(1): PREPARE_BIN_CMD=$(DEFAULT_PREPARE_BIN_CMD)\n+dist-install-dir-$(1): PREPARE_LIB_CMD=$(DEFAULT_PREPARE_LIB_CMD)\n+dist-install-dir-$(1): PREPARE_MAN_CMD=$(DEFAULT_PREPARE_MAN_CMD)\n+dist-install-dir-$(1): PREPARE_CLEAN=true\n+dist-install-dir-$(1): prepare-base-dir-$(1) docs compiler-docs\n \t$$(Q)(cd $$(PREPARE_DEST_DIR)/ && find . -type f | sed 's/^\\.\\///') \\\n       > tmp/dist/manifest-$(1).in\n \t$$(Q)mv tmp/dist/manifest-$(1).in $$(PREPARE_DEST_DIR)/$$(CFG_LIBDIR_RELATIVE)/rustlib/manifest.in\n@@ -227,16 +229,6 @@ dist-install-dir-$(1)$(3): prepare-base-dir-$(1) docs compiler-docs\n \t$$(Q)cp -r doc $$(PREPARE_DEST_DIR)\n \t$$(Q)$$(PREPARE_BIN_CMD) $$(S)src/etc/install.sh $$(PREPARE_DEST_DIR)\n \n-endef\n-\n-define DEF_INSTALLER\n-\n-$$(eval $$(call DEF_PREPARE,dir-$(1)))\n-\n-$$(eval $$(call DEF_PREPARE_DIST_DIR,$(1),$(1),))\n-\n-$$(eval $$(call DEF_PREPARE_DIST_DIR,$(1),$(CFG_TARGET),-with-target-libs))\n-\n dist/$$(PKG_NAME)-$(1).tar.gz: dist-install-dir-$(1)\n \t@$(call E, build: $$@)\n \t$$(Q)tar -czf dist/$$(PKG_NAME)-$(1).tar.gz -C tmp/dist $$(PKG_NAME)-$(1)"}, {"sha": "b7dac6a2e921c0683da0d14d1e19d2cf5f3960fd", "filename": "mk/install.mk", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ce20571a55ecc7915eaaa95bfedb67d389d2899c/mk%2Finstall.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ce20571a55ecc7915eaaa95bfedb67d389d2899c/mk%2Finstall.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Finstall.mk?ref=ce20571a55ecc7915eaaa95bfedb67d389d2899c", "patch": "@@ -14,12 +14,12 @@ else\n MAYBE_DISABLE_VERIFY=\n endif\n \n-install: dist-install-dir-$(CFG_BUILD)-with-target-libs | tmp/empty_dir\n+install: dist-install-dir-$(CFG_BUILD) | tmp/empty_dir\n \t$(Q)cd tmp/empty_dir && sh ../../tmp/dist/$(PKG_NAME)-$(CFG_BUILD)/install.sh --prefix=\"$(DESTDIR)$(CFG_PREFIX)\" --libdir=\"$(DESTDIR)$(CFG_LIBDIR)\" --mandir=\"$(DESTDIR)$(CFG_MANDIR)\" \"$(MAYBE_DISABLE_VERIFY)\"\n # Remove tmp files while we can because they may have been created under sudo\n \t$(Q)rm -R tmp/dist\n \n-uninstall: dist-install-dir-$(CFG_BUILD)-with-target-libs | tmp/empty_dir\n+uninstall: dist-install-dir-$(CFG_BUILD) | tmp/empty_dir\n \t$(Q)cd tmp/empty_dir && sh ../../tmp/dist/$(PKG_NAME)-$(CFG_BUILD)/install.sh --uninstall --prefix=\"$(DESTDIR)$(CFG_PREFIX)\" --libdir=\"$(DESTDIR)$(CFG_LIBDIR)\" --mandir=\"$(DESTDIR)$(CFG_MANDIR)\"\n # Remove tmp files while we can because they may have been created under sudo\n \t$(Q)rm -R tmp/dist"}]}