{"sha": "5d19432679b1047dc00d1fd110d630c4de1dbcfc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkMTk0MzI2NzliMTA0N2RjMDBkMWZkMTEwZDYzMGM0ZGUxZGJjZmM=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2014-12-03T13:33:45Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2014-12-04T15:04:52Z"}, "message": "FIXME(#19497) -- Stop messing around and just give rustc 32MB of stack unconditionally. This is prompted by some sort of bug in trans that causes a stack overflow when the modules in trans are made private. (In particular, the overflow can also be avoided by making `controlflow` and `callee` public, but that seems strictly worse than just using more stack.)", "tree": {"sha": "48c0f7eecb5288ed03cf70516b4f4c650333bcf5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/48c0f7eecb5288ed03cf70516b4f4c650333bcf5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d19432679b1047dc00d1fd110d630c4de1dbcfc", "comment_count": 4, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d19432679b1047dc00d1fd110d630c4de1dbcfc", "html_url": "https://github.com/rust-lang/rust/commit/5d19432679b1047dc00d1fd110d630c4de1dbcfc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d19432679b1047dc00d1fd110d630c4de1dbcfc/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61edb0ccb791934fa86000a9e59a23a9fc1f983c", "url": "https://api.github.com/repos/rust-lang/rust/commits/61edb0ccb791934fa86000a9e59a23a9fc1f983c", "html_url": "https://github.com/rust-lang/rust/commit/61edb0ccb791934fa86000a9e59a23a9fc1f983c"}], "stats": {"total": 8, "additions": 1, "deletions": 7}, "files": [{"sha": "33c009cf3291bcb61f870aabc61c165e3740c1a5", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5d19432679b1047dc00d1fd110d630c4de1dbcfc/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5d19432679b1047dc00d1fd110d630c4de1dbcfc/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=5d19432679b1047dc00d1fd110d630c4de1dbcfc", "patch": "@@ -470,13 +470,7 @@ pub fn list_metadata(sess: &Session, path: &Path,\n /// The diagnostic emitter yielded to the procedure should be used for reporting\n /// errors of the compiler.\n pub fn monitor(f: proc():Send) {\n-    // FIXME: This is a hack for newsched since it doesn't support split stacks.\n-    // rustc needs a lot of stack! When optimizations are disabled, it needs\n-    // even *more* stack than usual as well.\n-    #[cfg(rtopt)]\n-    static STACK_SIZE: uint = 6000000;  // 6MB\n-    #[cfg(not(rtopt))]\n-    static STACK_SIZE: uint = 20000000; // 20MB\n+    static STACK_SIZE: uint = 32000000; // 32MB\n \n     let (tx, rx) = channel();\n     let w = io::ChanWriter::new(tx);"}]}