{"sha": "f65281534f99754d94388e705cdc40c047093dee", "node_id": "C_kwDOAAsO6NoAKGY2NTI4MTUzNGY5OTc1NGQ5NDM4OGU3MDVjZGM0MGMwNDcwOTNkZWU", "commit": {"author": {"name": "Nilstrieb", "email": "48135649+Nilstrieb@users.noreply.github.com", "date": "2023-05-16T09:39:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-05-16T09:39:38Z"}, "message": "Rollup merge of #111428 - bvanjoi:fix-109250, r=Nilstrieb\n\nrefactor(resolve): clean up the early error return caused by non-call\n\ncloses https://github.com/rust-lang/rust/issues/109250\n\nIt seems no bad happened, r? ``@Nilstrieb``", "tree": {"sha": "3735f280a9dd25d3b556019c33361fa9dd34eec1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3735f280a9dd25d3b556019c33361fa9dd34eec1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f65281534f99754d94388e705cdc40c047093dee", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkY09aCRBK7hj4Ov3rIwAAriYIAJFi8sXOMTCwlopLOO0pHCmK\nAQEifphd5W+kz19tfjC/3561DMrvR4Crohrm/G25nC34FaXcwaS3RNAJOaX3oZZn\nr2Ppy8seSXLSxQLYRcXjlHf8SGnX6gXq1DjU9lgk6lQjMLuX4zmm9SN4m0mB2RFU\n9Nr2zui5Pl4rEVEXw5cGikVppnCGlZ0cbyI2oUkCFJDxezki6syYXJxSwwm+EoaA\n0dUcx4OimtkxwF/UXr2GcMDPsmWKQVbJsloMI6zXvyXqp5Kd0tFyF9T0x/ske0Uj\nQySuAzIMabAOgkGvXUgGBqi66ge/IgkF47IJbegSBNvaTSzzP192S7rkaJVCjTQ=\n=GL01\n-----END PGP SIGNATURE-----\n", "payload": "tree 3735f280a9dd25d3b556019c33361fa9dd34eec1\nparent 3ea9ad532474343426e564b997891e459cda89a6\nparent 7c1bc0353b8c13edc6e3cb8e0a37e876f06da7b7\nauthor Nilstrieb <48135649+Nilstrieb@users.noreply.github.com> 1684229978 +0200\ncommitter GitHub <noreply@github.com> 1684229978 +0200\n\nRollup merge of #111428 - bvanjoi:fix-109250, r=Nilstrieb\n\nrefactor(resolve): clean up the early error return caused by non-call\n\ncloses https://github.com/rust-lang/rust/issues/109250\n\nIt seems no bad happened, r? ``@Nilstrieb``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f65281534f99754d94388e705cdc40c047093dee", "html_url": "https://github.com/rust-lang/rust/commit/f65281534f99754d94388e705cdc40c047093dee", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f65281534f99754d94388e705cdc40c047093dee/comments", "author": {"login": "Nilstrieb", "id": 48135649, "node_id": "MDQ6VXNlcjQ4MTM1NjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/48135649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nilstrieb", "html_url": "https://github.com/Nilstrieb", "followers_url": "https://api.github.com/users/Nilstrieb/followers", "following_url": "https://api.github.com/users/Nilstrieb/following{/other_user}", "gists_url": "https://api.github.com/users/Nilstrieb/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nilstrieb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nilstrieb/subscriptions", "organizations_url": "https://api.github.com/users/Nilstrieb/orgs", "repos_url": "https://api.github.com/users/Nilstrieb/repos", "events_url": "https://api.github.com/users/Nilstrieb/events{/privacy}", "received_events_url": "https://api.github.com/users/Nilstrieb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3ea9ad532474343426e564b997891e459cda89a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ea9ad532474343426e564b997891e459cda89a6", "html_url": "https://github.com/rust-lang/rust/commit/3ea9ad532474343426e564b997891e459cda89a6"}, {"sha": "7c1bc0353b8c13edc6e3cb8e0a37e876f06da7b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c1bc0353b8c13edc6e3cb8e0a37e876f06da7b7", "html_url": "https://github.com/rust-lang/rust/commit/7c1bc0353b8c13edc6e3cb8e0a37e876f06da7b7"}], "stats": {"total": 94, "additions": 65, "deletions": 29}, "files": [{"sha": "c053ea222a026d6e17c3104edd8fd4b03ab1daaa", "filename": "compiler/rustc_resolve/src/late.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/compiler%2Frustc_resolve%2Fsrc%2Flate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/compiler%2Frustc_resolve%2Fsrc%2Flate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate.rs?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -3543,10 +3543,6 @@ impl<'a: 'ast, 'b, 'ast, 'tcx> LateResolutionVisitor<'a, 'b, 'ast, 'tcx> {\n         //\n         // Similar thing, for types, happens in `report_errors` above.\n         let report_errors_for_call = |this: &mut Self, parent_err: Spanned<ResolutionError<'a>>| {\n-            if !source.is_call() {\n-                return Some(parent_err);\n-            }\n-\n             // Before we start looking for candidates, we have to get our hands\n             // on the type user is trying to perform invocation on; basically:\n             // we're transforming `HashMap::new` into just `HashMap`."}, {"sha": "b21ff30a27da9212546845e2a038b004140b6dff", "filename": "tests/ui/generic-associated-types/equality-bound.stderr", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fgeneric-associated-types%2Fequality-bound.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fgeneric-associated-types%2Fequality-bound.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fgeneric-associated-types%2Fequality-bound.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -36,7 +36,10 @@ error[E0433]: failed to resolve: use of undeclared type `I`\n   --> $DIR/equality-bound.rs:9:41\n    |\n LL | fn sum3<J: Iterator>(i: J) -> i32 where I::Item = i32 {\n-   |                                         ^ use of undeclared type `I`\n+   |                                         ^\n+   |                                         |\n+   |                                         use of undeclared type `I`\n+   |                                         help: a type parameter with a similar name exists: `J`\n \n error: aborting due to 4 previous errors\n "}, {"sha": "8cd9a63b808934566d5320b8d08180053c6cb9ac", "filename": "tests/ui/macros/builtin-prelude-no-accidents.stderr", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fmacros%2Fbuiltin-prelude-no-accidents.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fmacros%2Fbuiltin-prelude-no-accidents.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmacros%2Fbuiltin-prelude-no-accidents.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -4,18 +4,21 @@ error[E0433]: failed to resolve: use of undeclared crate or module `env`\n LL |     env::current_dir;\n    |     ^^^ use of undeclared crate or module `env`\n \n+error[E0433]: failed to resolve: use of undeclared crate or module `vec`\n+  --> $DIR/builtin-prelude-no-accidents.rs:7:14\n+   |\n+LL |     type B = vec::Vec<u8>;\n+   |              ^^^\n+   |              |\n+   |              use of undeclared crate or module `vec`\n+   |              help: a struct with a similar name exists (notice the capitalization): `Vec`\n+\n error[E0433]: failed to resolve: use of undeclared crate or module `panic`\n   --> $DIR/builtin-prelude-no-accidents.rs:6:14\n    |\n LL |     type A = panic::PanicInfo;\n    |              ^^^^^ use of undeclared crate or module `panic`\n \n-error[E0433]: failed to resolve: use of undeclared crate or module `vec`\n-  --> $DIR/builtin-prelude-no-accidents.rs:7:14\n-   |\n-LL |     type B = vec::Vec<u8>;\n-   |              ^^^ use of undeclared crate or module `vec`\n-\n error: aborting due to 3 previous errors\n \n For more information about this error, try `rustc --explain E0433`."}, {"sha": "e34d855a9d4f997d21f52a6ed95c581f587c178e", "filename": "tests/ui/parser/dyn-trait-compatibility.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fparser%2Fdyn-trait-compatibility.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fparser%2Fdyn-trait-compatibility.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fdyn-trait-compatibility.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -1,9 +1,3 @@\n-error[E0433]: failed to resolve: use of undeclared crate or module `dyn`\n-  --> $DIR/dyn-trait-compatibility.rs:3:11\n-   |\n-LL | type A1 = dyn::dyn;\n-   |           ^^^ use of undeclared crate or module `dyn`\n-\n error[E0412]: cannot find type `dyn` in this scope\n   --> $DIR/dyn-trait-compatibility.rs:1:11\n    |\n@@ -46,6 +40,12 @@ error[E0412]: cannot find type `dyn` in this scope\n LL | type A3 = dyn<<dyn as dyn>::dyn>;\n    |                ^^^ not found in this scope\n \n+error[E0433]: failed to resolve: use of undeclared crate or module `dyn`\n+  --> $DIR/dyn-trait-compatibility.rs:3:11\n+   |\n+LL | type A1 = dyn::dyn;\n+   |           ^^^ use of undeclared crate or module `dyn`\n+\n error: aborting due to 8 previous errors\n \n Some errors have detailed explanations: E0405, E0412, E0433."}, {"sha": "10fcccb030162357e4489769e7e601c8ff27226e", "filename": "tests/ui/pattern/pattern-error-continue.stderr", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fpattern%2Fpattern-error-continue.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fpattern%2Fpattern-error-continue.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpattern%2Fpattern-error-continue.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -1,9 +1,3 @@\n-error[E0433]: failed to resolve: use of undeclared type `E`\n-  --> $DIR/pattern-error-continue.rs:33:9\n-   |\n-LL |         E::V => {}\n-   |         ^ use of undeclared type `E`\n-\n error[E0532]: expected tuple struct or tuple variant, found unit variant `A::D`\n   --> $DIR/pattern-error-continue.rs:18:9\n    |\n@@ -56,6 +50,15 @@ note: function defined here\n LL | fn f(_c: char) {}\n    |    ^ --------\n \n+error[E0433]: failed to resolve: use of undeclared type `E`\n+  --> $DIR/pattern-error-continue.rs:33:9\n+   |\n+LL |         E::V => {}\n+   |         ^\n+   |         |\n+   |         use of undeclared type `E`\n+   |         help: an enum with a similar name exists: `A`\n+\n error: aborting due to 5 previous errors\n \n Some errors have detailed explanations: E0023, E0308, E0433, E0532."}, {"sha": "68e33f693cef1b847cd1ce49196e6ddc7432db9c", "filename": "tests/ui/resolve/issue-109250.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fresolve%2Fissue-109250.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fresolve%2Fissue-109250.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fresolve%2Fissue-109250.rs?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -0,0 +1,3 @@\n+fn main() {       //~ HELP consider importing\n+    HashMap::new; //~ ERROR failed to resolve: use of undeclared type `HashMap`\n+}"}, {"sha": "d5b8c08ced7d7d63874322b85d06e2fd46086d8a", "filename": "tests/ui/resolve/issue-109250.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fresolve%2Fissue-109250.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fresolve%2Fissue-109250.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fresolve%2Fissue-109250.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -0,0 +1,14 @@\n+error[E0433]: failed to resolve: use of undeclared type `HashMap`\n+  --> $DIR/issue-109250.rs:2:5\n+   |\n+LL |     HashMap::new;\n+   |     ^^^^^^^ use of undeclared type `HashMap`\n+   |\n+help: consider importing this struct\n+   |\n+LL + use std::collections::HashMap;\n+   |\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0433`."}, {"sha": "ed157197d17e1a199827da271104f2402480c6a6", "filename": "tests/ui/resolve/resolve-variant-assoc-item.stderr", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fresolve%2Fresolve-variant-assoc-item.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Fresolve%2Fresolve-variant-assoc-item.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fresolve%2Fresolve-variant-assoc-item.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -3,12 +3,26 @@ error[E0433]: failed to resolve: `V` is a variant, not a module\n    |\n LL |     E::V::associated_item;\n    |        ^ `V` is a variant, not a module\n+   |\n+help: there is an enum variant `E::V`; try using the variant's enum\n+   |\n+LL |     E;\n+   |     ~\n \n error[E0433]: failed to resolve: `V` is a variant, not a module\n   --> $DIR/resolve-variant-assoc-item.rs:6:5\n    |\n LL |     V::associated_item;\n    |     ^ `V` is a variant, not a module\n+   |\n+help: there is an enum variant `E::V`; try using the variant's enum\n+   |\n+LL |     E;\n+   |     ~\n+help: an enum with a similar name exists\n+   |\n+LL |     E::associated_item;\n+   |     ~\n \n error: aborting due to 2 previous errors\n "}, {"sha": "8b12aa1a393b2d229b83631946ffe767c99a8a2e", "filename": "tests/ui/type/type-path-err-node-types.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Ftype%2Ftype-path-err-node-types.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/f65281534f99754d94388e705cdc40c047093dee/tests%2Fui%2Ftype%2Ftype-path-err-node-types.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ftype%2Ftype-path-err-node-types.stderr?ref=f65281534f99754d94388e705cdc40c047093dee", "patch": "@@ -1,9 +1,3 @@\n-error[E0433]: failed to resolve: use of undeclared type `NonExistent`\n-  --> $DIR/type-path-err-node-types.rs:15:5\n-   |\n-LL |     NonExistent::Assoc::<u8>;\n-   |     ^^^^^^^^^^^ use of undeclared type `NonExistent`\n-\n error[E0412]: cannot find type `Nonexistent` in this scope\n   --> $DIR/type-path-err-node-types.rs:7:12\n    |\n@@ -22,6 +16,12 @@ error[E0425]: cannot find value `nonexistent` in this scope\n LL |     nonexistent.nonexistent::<u8>();\n    |     ^^^^^^^^^^^ not found in this scope\n \n+error[E0433]: failed to resolve: use of undeclared type `NonExistent`\n+  --> $DIR/type-path-err-node-types.rs:15:5\n+   |\n+LL |     NonExistent::Assoc::<u8>;\n+   |     ^^^^^^^^^^^ use of undeclared type `NonExistent`\n+\n error[E0282]: type annotations needed\n   --> $DIR/type-path-err-node-types.rs:23:14\n    |"}]}