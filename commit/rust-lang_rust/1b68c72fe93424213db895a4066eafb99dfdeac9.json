{"sha": "1b68c72fe93424213db895a4066eafb99dfdeac9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiNjhjNzJmZTkzNDI0MjEzZGI4OTVhNDA2NmVhZmI5OWRmZGVhYzk=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-04-10T18:46:42Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-04-10T18:46:42Z"}, "message": "Move timeit to stdx", "tree": {"sha": "5530ff52ddd3fde6725844a2107aaa566ea45c96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5530ff52ddd3fde6725844a2107aaa566ea45c96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b68c72fe93424213db895a4066eafb99dfdeac9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b68c72fe93424213db895a4066eafb99dfdeac9", "html_url": "https://github.com/rust-lang/rust/commit/1b68c72fe93424213db895a4066eafb99dfdeac9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b68c72fe93424213db895a4066eafb99dfdeac9/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "72a0db8dc46c63409a93745d04758049515abaf0", "url": "https://api.github.com/repos/rust-lang/rust/commits/72a0db8dc46c63409a93745d04758049515abaf0", "html_url": "https://github.com/rust-lang/rust/commit/72a0db8dc46c63409a93745d04758049515abaf0"}], "stats": {"total": 31, "additions": 15, "deletions": 16}, "files": [{"sha": "2d4f68f5e07ec2f5e929370985be9897a8ccc463", "filename": "crates/ra_prof/src/lib.rs", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/1b68c72fe93424213db895a4066eafb99dfdeac9/crates%2Fra_prof%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b68c72fe93424213db895a4066eafb99dfdeac9/crates%2Fra_prof%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_prof%2Fsrc%2Flib.rs?ref=1b68c72fe93424213db895a4066eafb99dfdeac9", "patch": "@@ -113,21 +113,6 @@ pub fn profile(label: Label) -> Profiler {\n     })\n }\n \n-pub fn print_time(label: Label) -> impl Drop {\n-    struct Guard {\n-        label: Label,\n-        start: Instant,\n-    }\n-\n-    impl Drop for Guard {\n-        fn drop(&mut self) {\n-            eprintln!(\"{}: {:?}\", self.label, self.start.elapsed())\n-        }\n-    }\n-\n-    Guard { label, start: Instant::now() }\n-}\n-\n pub struct Profiler {\n     label: Option<Label>,\n     detail: Option<String>,"}, {"sha": "01cdf452c22bf1cb0d9433a459fae060a835a8a7", "filename": "crates/stdx/src/lib.rs", "status": "modified", "additions": 15, "deletions": 1, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1b68c72fe93424213db895a4066eafb99dfdeac9/crates%2Fstdx%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b68c72fe93424213db895a4066eafb99dfdeac9/crates%2Fstdx%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fstdx%2Fsrc%2Flib.rs?ref=1b68c72fe93424213db895a4066eafb99dfdeac9", "patch": "@@ -1,6 +1,6 @@\n //! Missing batteries for standard libraries.\n \n-use std::{cell::Cell, fmt};\n+use std::{cell::Cell, fmt, time::Instant};\n \n #[inline(always)]\n pub fn is_ci() -> bool {\n@@ -88,3 +88,17 @@ where\n         Ok(())\n     }\n }\n+pub fn timeit(label: &'static str) -> impl Drop {\n+    struct Guard {\n+        label: &'static str,\n+        start: Instant,\n+    }\n+\n+    impl Drop for Guard {\n+        fn drop(&mut self) {\n+            eprintln!(\"{}: {:?}\", self.label, self.start.elapsed())\n+        }\n+    }\n+\n+    Guard { label, start: Instant::now() }\n+}"}]}