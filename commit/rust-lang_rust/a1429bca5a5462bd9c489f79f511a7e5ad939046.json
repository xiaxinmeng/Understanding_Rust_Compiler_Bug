{"sha": "a1429bca5a5462bd9c489f79f511a7e5ad939046", "node_id": "MDY6Q29tbWl0NzI0NzEyOmExNDI5YmNhNWE1NDYyYmQ5YzQ4OWY3OWY1MTFhN2U1YWQ5MzkwNDY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-08-08T21:36:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-08-08T21:36:11Z"}, "message": "auto merge of #16277 : Gankro/rust/responsive-docs, r=cmr\n\n* move some sidebar contents to a title bar when small\r\n* inline description toggle when small\r\n* make out-of-band and in-band content share space, rather than float and clash\r\n* compress wording of out-of-band content to avoid line-wrap as much as possible\r\n\r\n## [Live Version Here](http://cg.scs.carleton.ca/~abeinges/doc/index.html)\r\n\r\nPages Of Interest:\r\n* [Vec](http://cg.scs.carleton.ca/~abeinges/doc/std/vec/struct.Vec.html) (small path)\r\n* [TreeSet](http://cg.scs.carleton.ca/~abeinges/doc/collections/treemap/struct.TreeSet.html) (long path)\r\n* [std](http://cg.scs.carleton.ca/~abeinges/doc/std/index.html) (for stability dash)\r\n\r\nTBD in a future PR is to convert links in the sidebar into a series of nest ul/li's, so that they can easily be moved to a drop-down in the new title bar. I think this is out of scope for this PR, but am willing to implement it now if desired.", "tree": {"sha": "62f7991bbdc70ab632bda89f2b6fa02784a6dfdf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/62f7991bbdc70ab632bda89f2b6fa02784a6dfdf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a1429bca5a5462bd9c489f79f511a7e5ad939046", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a1429bca5a5462bd9c489f79f511a7e5ad939046", "html_url": "https://github.com/rust-lang/rust/commit/a1429bca5a5462bd9c489f79f511a7e5ad939046", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a1429bca5a5462bd9c489f79f511a7e5ad939046/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57630eb8090f305da41291c481c42bf94b9ccf34", "url": "https://api.github.com/repos/rust-lang/rust/commits/57630eb8090f305da41291c481c42bf94b9ccf34", "html_url": "https://github.com/rust-lang/rust/commit/57630eb8090f305da41291c481c42bf94b9ccf34"}, {"sha": "dd437ee6ed81f85c715bf415d261feca484bb39f", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd437ee6ed81f85c715bf415d261feca484bb39f", "html_url": "https://github.com/rust-lang/rust/commit/dd437ee6ed81f85c715bf415d261feca484bb39f"}], "stats": {"total": 107, "additions": 79, "deletions": 28}, "files": [{"sha": "eea594550398b36e4a7a0b46fb969181c3a1df53", "filename": "src/librustdoc/html/render.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a1429bca5a5462bd9c489f79f511a7e5ad939046/src%2Flibrustdoc%2Fhtml%2Frender.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a1429bca5a5462bd9c489f79f511a7e5ad939046/src%2Flibrustdoc%2Fhtml%2Frender.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender.rs?ref=a1429bca5a5462bd9c489f79f511a7e5ad939046", "patch": "@@ -1294,7 +1294,7 @@ impl<'a> Item<'a> {\n impl<'a> fmt::Show for Item<'a> {\n     fn fmt(&self, fmt: &mut fmt::Formatter) -> fmt::Result {\n         // Write the breadcrumb trail header for the top\n-        try!(write!(fmt, \"\\n<h1 class='fqn'>\"));\n+        try!(write!(fmt, \"\\n<h1 class='fqn'><div class='in-band'>\"));\n         match self.item.inner {\n             clean::ModuleItem(ref m) => if m.is_crate {\n                     try!(write!(fmt, \"Crate \"));\n@@ -1316,7 +1316,7 @@ impl<'a> fmt::Show for Item<'a> {\n             let cur = self.cx.current.as_slice();\n             let amt = if self.ismodule() { cur.len() - 1 } else { cur.len() };\n             for (i, component) in cur.iter().enumerate().take(amt) {\n-                try!(write!(fmt, \"<a href='{}index.html'>{}</a>::\",\n+                try!(write!(fmt, \"<a href='{}index.html'>{}</a>&#8203;::\",\n                             \"../\".repeat(cur.len() - i - 1),\n                             component.as_slice()));\n             }\n@@ -1325,10 +1325,10 @@ impl<'a> fmt::Show for Item<'a> {\n                     shortty(self.item), self.item.name.get_ref().as_slice()));\n \n         // Write stability level\n-        try!(write!(fmt, \"{}\", Stability(&self.item.stability)));\n+        try!(write!(fmt, \"&#8203;{}\", Stability(&self.item.stability)));\n \n         // Links to out-of-band information, i.e. src and stability dashboard\n-        try!(write!(fmt, \"<span class='out-of-band'>\"));\n+        try!(write!(fmt, \"</div><div class='out-of-band'>\"));\n \n         // Write stability dashboard link\n         match self.item.inner {\n@@ -1340,8 +1340,8 @@ impl<'a> fmt::Show for Item<'a> {\n \n         try!(write!(fmt,\n         r##\"<span id='render-detail'>\n-            <a id=\"collapse-all\" href=\"#\">[collapse all]</a>\n-            <a id=\"expand-all\" href=\"#\">[expand all]</a>\n+            <a id=\"collapse-all\" href=\"#\">[-]\n+            </a>&nbsp;<a id=\"expand-all\" href=\"#\">[+]</a>\n         </span>\"##));\n \n         // Write `src` tag\n@@ -1360,7 +1360,7 @@ impl<'a> fmt::Show for Item<'a> {\n             }\n         }\n \n-        try!(write!(fmt, \"</span>\"));\n+        try!(write!(fmt, \"</div>\"));\n \n         try!(write!(fmt, \"</h1>\\n\"));\n "}, {"sha": "e41566e07fd811b9deba0de81fc934d49e1e7347", "filename": "src/librustdoc/html/static/main.css", "status": "modified", "additions": 72, "deletions": 21, "changes": 93, "blob_url": "https://github.com/rust-lang/rust/blob/a1429bca5a5462bd9c489f79f511a7e5ad939046/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "raw_url": "https://github.com/rust-lang/rust/raw/a1429bca5a5462bd9c489f79f511a7e5ad939046/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.css?ref=a1429bca5a5462bd9c489f79f511a7e5ad939046", "patch": "@@ -252,8 +252,19 @@ nav.sub {\n .docblock h3, .docblock h4, .docblock h5 { font-size: 1em; }\n \n .content .out-of-band {\n-    float: right;\n     font-size: 23px;\n+    width: 40%;\n+    margin: 0px;\n+    padding: 0px;\n+    text-align: right;\n+    display: inline-block;\n+}\n+\n+.content .in-band {\n+    width: 60%;\n+    margin: 0px;\n+    padding: 0px;\n+    display: inline-block;\n }\n \n .content table {\n@@ -282,8 +293,8 @@ nav.sub {\n }\n .content .multi-column li { width: 100%; display: inline-block; }\n \n-.content .method { \n-    font-size: 1em; \n+.content .method {\n+    font-size: 1em;\n     position: relative;\n }\n .content .methods .docblock { margin-left: 40px; }\n@@ -455,8 +466,8 @@ pre.rust { position: relative; }\n     top: 0;\n     right: 10px;\n     font-size: 150%;\n-    -webkit-transform: scaleX(-1); \n-    transform: scaleX(-1); \n+    -webkit-transform: scaleX(-1);\n+    transform: scaleX(-1);\n }\n \n .methods .section-header {\n@@ -470,22 +481,6 @@ pre.rust { position: relative; }\n     content: '\\2002\\00a7\\2002';\n }\n \n-/* Media Queries */\n-\n-@media (max-width: 700px) {\n-    .sidebar {\n-        display: none;\n-    }\n-\n-    .content {\n-        margin-left: 0px;\n-    }\n-\n-    nav.sub {\n-        margin: 0 auto;\n-    }\n-}\n-\n .collapse-toggle {\n     font-weight: 100;\n     position: absolute;\n@@ -518,3 +513,59 @@ pre.rust { position: relative; }\n     color: #999;\n     font-style: italic;\n }\n+\n+\n+\n+/* Media Queries */\n+\n+@media (max-width: 700px) {\n+    body {\n+        padding-top: 0px;\n+    }\n+\n+    .sidebar {\n+        height: 40px;\n+        min-height: 40px;\n+        width: 100%;\n+        margin: 0px;\n+        padding: 0px;\n+        position: static;\n+    }\n+\n+    .sidebar .location {\n+        float: left;\n+        margin: 0px;\n+        padding: 5px;\n+        width: 60%;\n+        background: inherit;\n+        text-align: left;\n+        font-size: 24px;\n+    }\n+\n+    .sidebar img {\n+        width: 35px;\n+        margin-top: 5px;\n+        margin-bottom: 0px;\n+        float: left;\n+    }\n+\n+    nav.sub {\n+        margin: 0 auto;\n+    }\n+\n+    .sidebar .block {\n+        display: none;\n+    }\n+\n+    .content {\n+        margin-left: 0px;\n+    }\n+\n+    .toggle-wrapper > .collapse-toggle {\n+        left: 0px;\n+    }\n+\n+    .toggle-wrapper {\n+        height: 1.5em;\n+    }\n+}"}]}