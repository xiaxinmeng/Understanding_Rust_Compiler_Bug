{"sha": "6b2c3117184e9fff432e84f8d75417056d757113", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZiMmMzMTE3MTg0ZTlmZmY0MzJlODRmOGQ3NTQxNzA1NmQ3NTcxMTM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-01-06T13:05:11Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-01-06T13:05:11Z"}, "message": "Auto merge of #57121 - glaubitz:flock-fixes, r=nagisa\n\nflock: Use fcntl constants directly from libc crate on Unix targets\n\nSince the values for the fcntl constants can vary from architecture\nto architecture, it is better to use the values defined in the libc\ncrate instead of assigning literals in the flock code which would\nmake the assumption that all architectures use the same values.\n\nFixes #57007", "tree": {"sha": "4674ed92b3a7bde68a84634c64a70a7cd5418f1c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4674ed92b3a7bde68a84634c64a70a7cd5418f1c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6b2c3117184e9fff432e84f8d75417056d757113", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6b2c3117184e9fff432e84f8d75417056d757113", "html_url": "https://github.com/rust-lang/rust/commit/6b2c3117184e9fff432e84f8d75417056d757113", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6b2c3117184e9fff432e84f8d75417056d757113/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e628196d41834971e70b3eb7d40a9d962b4d4da6", "url": "https://api.github.com/repos/rust-lang/rust/commits/e628196d41834971e70b3eb7d40a9d962b4d4da6", "html_url": "https://github.com/rust-lang/rust/commit/e628196d41834971e70b3eb7d40a9d962b4d4da6"}, {"sha": "1c4823e81c57fce3aa2770e35c70d6d474f9e98b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c4823e81c57fce3aa2770e35c70d6d474f9e98b", "html_url": "https://github.com/rust-lang/rust/commit/1c4823e81c57fce3aa2770e35c70d6d474f9e98b"}], "stats": {"total": 154, "additions": 59, "deletions": 95}, "files": [{"sha": "e7cb716a39d5cf93f93343154e48621ca9e4c33f", "filename": "Cargo.lock", "status": "modified", "additions": 54, "deletions": 54, "changes": 108, "blob_url": "https://github.com/rust-lang/rust/blob/6b2c3117184e9fff432e84f8d75417056d757113/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/6b2c3117184e9fff432e84f8d75417056d757113/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=6b2c3117184e9fff432e84f8d75417056d757113", "patch": "@@ -75,7 +75,7 @@ name = \"atty\"\n version = \"0.2.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"termion 1.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -87,7 +87,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"backtrace-sys 0.1.27 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-demangle 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -99,7 +99,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"compiler_builtins 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-std-workspace-core 1.0.0\",\n ]\n \n@@ -136,7 +136,7 @@ dependencies = [\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"num_cpus 1.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"petgraph 0.4.13 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pretty_assertions 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -219,7 +219,7 @@ dependencies = [\n  \"jobserver 0.1.12 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazycell 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libgit2-sys 0.7.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miow 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -406,7 +406,7 @@ name = \"commoncrypto-sys\"\n version = \"0.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -427,7 +427,7 @@ dependencies = [\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miow 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -447,7 +447,7 @@ dependencies = [\n  \"diff 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"getopts 0.2.17 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miow 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"regex 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -471,7 +471,7 @@ version = \"0.6.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"core-foundation-sys 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -594,7 +594,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"curl-sys 0.4.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"kernel32-sys 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-probe 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-sys 0.9.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"schannel 0.1.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -608,7 +608,7 @@ version = \"0.4.15\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libnghttp2-sys 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libz-sys 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-sys 0.9.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -658,7 +658,7 @@ name = \"directories\"\n version = \"1.0.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -668,7 +668,7 @@ version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"compiler_builtins 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc-std-workspace-core 1.0.0\",\n ]\n \n@@ -777,7 +777,7 @@ version = \"0.2.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_syscall 0.1.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -792,7 +792,7 @@ version = \"1.0.6\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"crc32fast 1.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libz-sys 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miniz-sys 0.1.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miniz_oxide_c_api 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -834,7 +834,7 @@ name = \"fs2\"\n version = \"0.4.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -899,7 +899,7 @@ version = \"0.8.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libgit2-sys 0.7.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-probe 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1078,15 +1078,15 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fs_extra 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n name = \"jobserver\"\n version = \"0.1.12\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand 0.6.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -1149,7 +1149,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"libc\"\n-version = \"0.2.45\"\n+version = \"0.2.46\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"rustc-std-workspace-core 1.0.0\",\n@@ -1162,7 +1162,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"curl-sys 0.4.15 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libssh2-sys 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libz-sys 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-sys 0.9.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1175,7 +1175,7 @@ version = \"0.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1184,7 +1184,7 @@ version = \"0.2.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libz-sys 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-sys 0.9.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1197,7 +1197,7 @@ version = \"1.0.25\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"vcpkg 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -1238,7 +1238,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1311,7 +1311,7 @@ version = \"2.1.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"version_check 0.1.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1320,7 +1320,7 @@ name = \"memmap\"\n version = \"0.6.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1343,7 +1343,7 @@ version = \"0.1.11\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1361,7 +1361,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"crc 1.8.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"miniz_oxide 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1432,7 +1432,7 @@ name = \"num_cpus\"\n version = \"1.8.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1459,7 +1459,7 @@ dependencies = [\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"foreign-types 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-sys 0.9.40 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1482,7 +1482,7 @@ version = \"0.9.40\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"openssl-src 111.1.0+1.1.1a (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"pkg-config 0.3.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"vcpkg 0.2.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1520,7 +1520,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"compiler_builtins 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1530,7 +1530,7 @@ dependencies = [\n  \"alloc 0.0.0\",\n  \"compiler_builtins 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"unwind 0.0.0\",\n ]\n \n@@ -1548,7 +1548,7 @@ name = \"parking_lot_core\"\n version = \"0.3.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"smallvec 0.6.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1773,7 +1773,7 @@ version = \"0.4.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1784,7 +1784,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cloudabi 0.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_core 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -1796,7 +1796,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cloudabi 0.0.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fuchsia-zircon 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_chacha 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_core 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand_hc 0.1.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1812,7 +1812,7 @@ name = \"rand_chacha\"\n version = \"0.1.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"rand_core 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rand_core 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rustc_version 0.2.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n@@ -1834,7 +1834,7 @@ name = \"rand_hc\"\n version = \"0.1.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"rand_core 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rand_core 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1859,7 +1859,7 @@ name = \"rand_xorshift\"\n version = \"0.1.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"rand_core 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rand_core 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -1878,7 +1878,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"crossbeam-deque 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"num_cpus 1.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -2238,7 +2238,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"crossbeam-deque 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"num_cpus 1.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -2334,7 +2334,7 @@ dependencies = [\n  \"bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"cc 1.0.25 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"jobserver 0.1.12 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"memmap 0.6.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"num_cpus 1.8.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2876,7 +2876,7 @@ version = \"0.3.8\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_syscall 0.1.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -2897,7 +2897,7 @@ dependencies = [\n  \"core 0.0.0\",\n  \"dlmalloc 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fortanix-sgx-abi 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"panic_abort 0.0.0\",\n  \"panic_unwind 0.0.0\",\n  \"profiler_builtins 0.0.0\",\n@@ -3048,7 +3048,7 @@ version = \"0.4.20\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"filetime 0.2.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_syscall 0.1.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"xattr 0.2.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -3059,7 +3059,7 @@ version = \"3.0.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"rand 0.6.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_syscall 0.1.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"remove_dir_all 0.5.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -3102,7 +3102,7 @@ name = \"termion\"\n version = \"1.5.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_syscall 0.1.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_termios 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -3146,7 +3146,7 @@ name = \"time\"\n version = \"0.1.40\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"redox_syscall 0.1.43 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"winapi 0.3.6 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n@@ -3236,7 +3236,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"compiler_builtins 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"core 0.0.0\",\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3303,7 +3303,7 @@ name = \"wait-timeout\"\n version = \"0.1.5\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3367,7 +3367,7 @@ name = \"xattr\"\n version = \"0.2.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n- \"libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n [[package]]\n@@ -3489,7 +3489,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum lazy_static 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"76f033c7ad61445c5b347c7382dd1237847eb1bce590fe50365dcb33d546be73\"\n \"checksum lazy_static 1.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"a374c89b9db55895453a74c1e38861d9deec0b01b405a82516e9d5de4820dea1\"\n \"checksum lazycell 1.2.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"b294d6fa9ee409a054354afc4352b0b9ef7ca222c69b8812cbea9e7d2bf3783f\"\n-\"checksum libc 0.2.45 (registry+https://github.com/rust-lang/crates.io-index)\" = \"2d2857ec59fadc0773853c664d2d18e7198e83883e7060b63c924cb077bd5c74\"\n+\"checksum libc 0.2.46 (registry+https://github.com/rust-lang/crates.io-index)\" = \"023a4cd09b2ff695f9734c1934145a315594b7986398496841c7031a5a1bbdbd\"\n \"checksum libgit2-sys 0.7.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"48441cb35dc255da8ae72825689a95368bf510659ae1ad55dc4aa88cb1789bf1\"\n \"checksum libnghttp2-sys 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d75d7966bda4730b722d1eab8e668df445368a24394bae9fc1e8dc0ab3dbe4f4\"\n \"checksum libssh2-sys 0.2.11 (registry+https://github.com/rust-lang/crates.io-index)\" = \"126a1f4078368b163bfdee65fbab072af08a1b374a5551b21e87ade27b1fbf9d\""}, {"sha": "2dea249f1c07c25773f4858225aaba14d56d076d", "filename": "src/librustc_data_structures/flock.rs", "status": "modified", "additions": 5, "deletions": 41, "changes": 46, "blob_url": "https://github.com/rust-lang/rust/blob/6b2c3117184e9fff432e84f8d75417056d757113/src%2Flibrustc_data_structures%2Fflock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6b2c3117184e9fff432e84f8d75417056d757113/src%2Flibrustc_data_structures%2Fflock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Fflock.rs?ref=6b2c3117184e9fff432e84f8d75417056d757113", "patch": "@@ -31,12 +31,6 @@ cfg_if! {\n                 // not actually here, but brings in line with freebsd\n                 pub l_sysid: libc::c_int,\n             }\n-\n-            pub const F_RDLCK: libc::c_short = 0;\n-            pub const F_WRLCK: libc::c_short = 1;\n-            pub const F_UNLCK: libc::c_short = 2;\n-            pub const F_SETLK: libc::c_int = 6;\n-            pub const F_SETLKW: libc::c_int = 7;\n         }\n \n         #[cfg(target_os = \"freebsd\")]\n@@ -52,12 +46,6 @@ cfg_if! {\n                 pub l_whence: libc::c_short,\n                 pub l_sysid: libc::c_int,\n             }\n-\n-            pub const F_RDLCK: libc::c_short = 1;\n-            pub const F_UNLCK: libc::c_short = 2;\n-            pub const F_WRLCK: libc::c_short = 3;\n-            pub const F_SETLK: libc::c_int = 12;\n-            pub const F_SETLKW: libc::c_int = 13;\n         }\n \n         #[cfg(any(target_os = \"dragonfly\",\n@@ -78,12 +66,6 @@ cfg_if! {\n                 // not actually here, but brings in line with freebsd\n                 pub l_sysid: libc::c_int,\n             }\n-\n-            pub const F_RDLCK: libc::c_short = 1;\n-            pub const F_UNLCK: libc::c_short = 2;\n-            pub const F_WRLCK: libc::c_short = 3;\n-            pub const F_SETLK: libc::c_int = 8;\n-            pub const F_SETLKW: libc::c_int = 9;\n         }\n \n         #[cfg(target_os = \"haiku\")]\n@@ -101,12 +83,6 @@ cfg_if! {\n                 // not actually here, but brings in line with freebsd\n                 pub l_sysid: libc::c_int,\n             }\n-\n-            pub const F_RDLCK: libc::c_short = 0x0040;\n-            pub const F_UNLCK: libc::c_short = 0x0200;\n-            pub const F_WRLCK: libc::c_short = 0x0400;\n-            pub const F_SETLK: libc::c_int = 0x0080;\n-            pub const F_SETLKW: libc::c_int = 0x0100;\n         }\n \n         #[cfg(any(target_os = \"macos\", target_os = \"ios\"))]\n@@ -124,12 +100,6 @@ cfg_if! {\n                 // not actually here, but brings in line with freebsd\n                 pub l_sysid: libc::c_int,\n             }\n-\n-            pub const F_RDLCK: libc::c_short = 1;\n-            pub const F_UNLCK: libc::c_short = 2;\n-            pub const F_WRLCK: libc::c_short = 3;\n-            pub const F_SETLK: libc::c_int = 8;\n-            pub const F_SETLKW: libc::c_int = 9;\n         }\n \n         #[cfg(target_os = \"solaris\")]\n@@ -145,12 +115,6 @@ cfg_if! {\n                 pub l_sysid: libc::c_int,\n                 pub l_pid: libc::pid_t,\n             }\n-\n-            pub const F_RDLCK: libc::c_short = 1;\n-            pub const F_WRLCK: libc::c_short = 2;\n-            pub const F_UNLCK: libc::c_short = 3;\n-            pub const F_SETLK: libc::c_int = 6;\n-            pub const F_SETLKW: libc::c_int = 7;\n         }\n \n         #[derive(Debug)]\n@@ -182,9 +146,9 @@ cfg_if! {\n                 }\n \n                 let lock_type = if exclusive {\n-                    os::F_WRLCK\n+                    libc::F_WRLCK as libc::c_short\n                 } else {\n-                    os::F_RDLCK\n+                    libc::F_RDLCK as libc::c_short\n                 };\n \n                 let flock = os::flock {\n@@ -195,7 +159,7 @@ cfg_if! {\n                     l_type: lock_type,\n                     l_sysid: 0,\n                 };\n-                let cmd = if wait { os::F_SETLKW } else { os::F_SETLK };\n+                let cmd = if wait { libc::F_SETLKW } else { libc::F_SETLK };\n                 let ret = unsafe {\n                     libc::fcntl(fd, cmd, &flock)\n                 };\n@@ -216,11 +180,11 @@ cfg_if! {\n                     l_len: 0,\n                     l_pid: 0,\n                     l_whence: libc::SEEK_SET as libc::c_short,\n-                    l_type: os::F_UNLCK,\n+                    l_type: libc::F_UNLCK as libc::c_short,\n                     l_sysid: 0,\n                 };\n                 unsafe {\n-                    libc::fcntl(self.fd, os::F_SETLK, &flock);\n+                    libc::fcntl(self.fd, libc::F_SETLK, &flock);\n                     libc::close(self.fd);\n                 }\n             }"}]}