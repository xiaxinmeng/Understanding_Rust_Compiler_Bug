{"sha": "985fa02783ffb91a3b266e1c818aa927ff40c7bb", "node_id": "C_kwDOAAsO6NoAKDk4NWZhMDI3ODNmZmI5MWEzYjI2NmUxYzgxOGFhOTI3ZmY0MGM3YmI", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2022-11-10T05:53:37Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-10T05:53:37Z"}, "message": "Rollup merge of #104201 - GuillaumeGomez:gui-test-check-file-errors, r=notriddle\n\nAdd check in GUI test for file loading failure\n\nSince https://github.com/rust-lang/rust/pull/101702, some resources location need to be updated in case their content changed because then their hash will change too. This will prevent errors like https://github.com/rust-lang/rust/pull/104114 to happen again.\n\nThe second commit is to prevent CORS errors: when a file is linked from a file itself imported, the web browser considers they come from a different domain and therefore triggers the error. The option tells the web browser to ignore this case.\n\ncc ```@jsha```\nr? ```@notriddle```", "tree": {"sha": "07babedfe27c8583ff76e5559a15de2c5a385e15", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/07babedfe27c8583ff76e5559a15de2c5a385e15"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/985fa02783ffb91a3b266e1c818aa927ff40c7bb", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjbJHhCRBK7hj4Ov3rIwAAD18IAGKgTGlfVyY8xFCV4tc4Cbkq\nvUJFYOdU0whtxoPJ91edL6/8nLwajL62laLBargWx3E8k7jjN9SJho5vByQrTWvu\nuzuhkRgDL4+03OaCFhZkSmxMS15PGvX9SOn7nRK0100bZ+ZRFvJIPwjEjy7z/csR\nGoJ1TCDEdAi09lqaz7wYNgMROcKbHwpzp4IFG+CnMc19TSBnFeGY0ctJLEgzu+RK\n7YHFXdPseyVRw/mZxoMC6nkoMhDMR0VM+povYpAfuR7DETSFJuDT3SRPBHYeyHkP\nMDofI9BPiEflmgL9J8jN9/q5HWWN+nFjZsWIf3Vu4xdWqll/Lv5sAEtU2mc0wX8=\n=irRX\n-----END PGP SIGNATURE-----\n", "payload": "tree 07babedfe27c8583ff76e5559a15de2c5a385e15\nparent 41c8a62b108e05c37a6ae9bca2bb0a46bc9a83e8\nparent 9f0e3761e858d17f17242963ae71eaead6f58882\nauthor Michael Goulet <michael@errs.io> 1668059617 -0800\ncommitter GitHub <noreply@github.com> 1668059617 -0800\n\nRollup merge of #104201 - GuillaumeGomez:gui-test-check-file-errors, r=notriddle\n\nAdd check in GUI test for file loading failure\n\nSince https://github.com/rust-lang/rust/pull/101702, some resources location need to be updated in case their content changed because then their hash will change too. This will prevent errors like https://github.com/rust-lang/rust/pull/104114 to happen again.\n\nThe second commit is to prevent CORS errors: when a file is linked from a file itself imported, the web browser considers they come from a different domain and therefore triggers the error. The option tells the web browser to ignore this case.\n\ncc ```@jsha```\nr? ```@notriddle```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/985fa02783ffb91a3b266e1c818aa927ff40c7bb", "html_url": "https://github.com/rust-lang/rust/commit/985fa02783ffb91a3b266e1c818aa927ff40c7bb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/985fa02783ffb91a3b266e1c818aa927ff40c7bb/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41c8a62b108e05c37a6ae9bca2bb0a46bc9a83e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/41c8a62b108e05c37a6ae9bca2bb0a46bc9a83e8", "html_url": "https://github.com/rust-lang/rust/commit/41c8a62b108e05c37a6ae9bca2bb0a46bc9a83e8"}, {"sha": "9f0e3761e858d17f17242963ae71eaead6f58882", "url": "https://api.github.com/repos/rust-lang/rust/commits/9f0e3761e858d17f17242963ae71eaead6f58882", "html_url": "https://github.com/rust-lang/rust/commit/9f0e3761e858d17f17242963ae71eaead6f58882"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "ed0d9e9902b995528b86b686a9d445ac07bf4a27", "filename": "src/ci/docker/host-x86_64/x86_64-gnu-tools/browser-ui-test.version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fx86_64-gnu-tools%2Fbrowser-ui-test.version?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -1 +1 @@\n-0.12.7\n\\ No newline at end of file\n+0.13.1\n\\ No newline at end of file"}, {"sha": "94c1a6525aaa5e08bfbce9db7531c71cdcca5384", "filename": "src/test/rustdoc-gui/code-tags.goml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Fcode-tags.goml", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Fcode-tags.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcode-tags.goml?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -1,4 +1,8 @@\n // This test ensures that items and documentation code blocks are wrapped in <pre><code>\n+\n+// We need to disable this check because `implementors/test_docs/trait.AnotherOne.js`\n+// doesn't exist.\n+fail-on-request-error: false\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/fn.foo.html\"\n size: (1080, 600)\n // There should be four doc codeblocks."}, {"sha": "9a46f256056f9eda2efc74e17750911e70332065", "filename": "src/test/rustdoc-gui/item-decl-colors.goml", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Fitem-decl-colors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Fitem-decl-colors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-decl-colors.goml?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -1,4 +1,9 @@\n // This test ensures that the color of the items in the type decl are working as expected.\n+\n+// We need to disable this check because `implementors/test_docs/trait.TraitWithoutGenerics.js`\n+// doesn't exist.\n+fail-on-request-error: false\n+\n define-function: (\n     \"check-colors\",\n     ("}, {"sha": "17a955064d733f5583ded2f11dca520e581b5cc1", "filename": "src/test/rustdoc-gui/no-docblock.goml", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Fno-docblock.goml", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Fno-docblock.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fno-docblock.goml?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -1,4 +1,9 @@\n // This test checks that there are margins applied to methods with no docblocks.\n+\n+// We need to disable this check because `implementors/test_docs/trait.TraitWithNoDocblock.js`\n+// doesn't exist.\n+fail-on-request-error: false\n+\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/trait.TraitWithNoDocblocks.html\"\n // Check that the two methods are more than 24px apart.\n compare-elements-position-near-false: (\"//*[@id='tymethod.first_fn']\", \"//*[@id='tymethod.second_fn']\", {\"y\": 24})"}, {"sha": "e5d023544d682824b41dfbb88267264507dc2d76", "filename": "src/test/rustdoc-gui/trait-sidebar-item-order.goml", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftrait-sidebar-item-order.goml?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -1,4 +1,9 @@\n // Checks that the elements in the sidebar are alphabetically sorted.\n+\n+// We need to disable this check because `implementors/test_docs/trait.AnotherOne.js`\n+// doesn't exist.\n+fail-on-request-error: false\n+\n goto: \"file://\" + |DOC_PATH| + \"/test_docs/trait.AnotherOne.html\"\n assert-text: (\".sidebar-elems section .block li:nth-of-type(1) > a\", \"another\")\n assert-text: (\".sidebar-elems section .block li:nth-of-type(2) > a\", \"func1\")"}, {"sha": "dcffe956c21975132859f6239e806eee969af005", "filename": "src/test/rustdoc-gui/type-declation-overflow.goml", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Ftype-declation-overflow.goml?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -1,4 +1,10 @@\n // This test ensures that the items declaration content overflow is handled inside the <pre> directly.\n+\n+// We need to disable this check because\n+// `implementors/test_docs/trait.ALongNameBecauseItHelpsTestingTheCurrentProblem.js`\n+// doesn't exist.\n+fail-on-request-error: false\n+\n goto: \"file://\" + |DOC_PATH| + \"/lib2/long_trait/trait.ALongNameBecauseItHelpsTestingTheCurrentProblem.html\"\n // We set a fixed size so there is no chance of \"random\" resize.\n size: (1100, 800)"}, {"sha": "d40d9a3cb542abab7c22f30ae0a24aa32336f05d", "filename": "src/tools/rustdoc-gui/tester.js", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftools%2Frustdoc-gui%2Ftester.js", "raw_url": "https://github.com/rust-lang/rust/raw/985fa02783ffb91a3b266e1c818aa927ff40c7bb/src%2Ftools%2Frustdoc-gui%2Ftester.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustdoc-gui%2Ftester.js?ref=985fa02783ffb91a3b266e1c818aa927ff40c7bb", "patch": "@@ -149,6 +149,7 @@ async function main(argv) {\n         // This is more convenient that setting fields one by one.\n         let args = [\n             \"--variable\", \"DOC_PATH\", opts[\"doc_folder\"], \"--enable-fail-on-js-error\",\n+            \"--allow-file-access-from-files\",\n         ];\n         if (opts[\"debug\"]) {\n             debug = true;"}]}