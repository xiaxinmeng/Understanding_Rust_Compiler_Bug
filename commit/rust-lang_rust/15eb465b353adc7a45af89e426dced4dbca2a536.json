{"sha": "15eb465b353adc7a45af89e426dced4dbca2a536", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE1ZWI0NjViMzUzYWRjN2E0NWFmODllNDI2ZGNlZDRkYmNhMmE1MzY=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-14T07:22:17Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-14T07:22:17Z"}, "message": "Rollup merge of #49465 - ollie27:rustbuild_test_docs, r=steveklabnik,QuietMisdreavus,frewsxcv,GuillaumeGomez\n\nAdd docs for the test crate with the std docs\n\nIf the compiler docs aren't going to include the test crate then it may as well be included with std.\n\nFixes #49388", "tree": {"sha": "0ae042ad21ae06482f423674520f0aef59adbecc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0ae042ad21ae06482f423674520f0aef59adbecc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/15eb465b353adc7a45af89e426dced4dbca2a536", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrRrCkACgkQ/vbIBR0O\nATxLsw//W/g7IWeMTnHCGQvZL9NrS/eqKfv6tAToWkcPWitMuenFfVhW8GYjfrLe\nKFbkpCHMgDFLeu/19fdC4CkSvdL/uIFcFZbGYK+DzBIczR37e32O9Xu9JHYKwGOC\npsRrPvit1egnnV22+HJlVEANyit2UQh+kTCq3O3GXR4j+Yiv5J6qCnKQ7LH3Qm0S\n3rhkqcO3aUxdh0KT4wK2skwJm795oULEexi/g1FKfFajGEW9SBtiSrlWc9d2EhRJ\nYH+zTj7f/EAVum3dRs1BIrXz3xxhhViZbJB0yB1jv7q/gJJ33sIrjiEK1nFkz4Ga\nvqeK2v22t8Qf4MtQzzDiZBqbaHz5uAlswpJX+wceWNIxzUGsxqd06206r+8hiJck\nQtoT87HiuTPrBJR8J5k8jiTvx8tSikmjcvd+OuXAULNg+S7Xn1E2kCcWL3av4Uid\n2Kyrw9Pfvkq/Lx7isoy7gakcJJHNnf7lFLujsjVQp6eyNYKsYxOLKBbabx30bSCa\ny5SIfIKSzwrats7zC097p8DEbK9I4PulC9Yb8wNl2C0mJJlJ5PtUuBPL7CAZ41Qf\nN6FfOqQR8bLbxNOVlFCV/lDKiJ+Gt1CwgwR+qu66yZ2Qkj6a/DIBtAGSoLKVhP9Q\nyZH/ZzQFRO9CPx0DrbEn8uadGl4bnL0mYLqo/2iUh4KZ9L5pQCk=\n=m+R3\n-----END PGP SIGNATURE-----", "payload": "tree 0ae042ad21ae06482f423674520f0aef59adbecc\nparent c22b4db0f5e17e18f1099a803945cb0e96ac3c56\nparent e719bb048e32c00fb9d9b2236a61b7a379ce4f1b\nauthor kennytm <kennytm@gmail.com> 1523690537 +0800\ncommitter kennytm <kennytm@gmail.com> 1523690537 +0800\n\nRollup merge of #49465 - ollie27:rustbuild_test_docs, r=steveklabnik,QuietMisdreavus,frewsxcv,GuillaumeGomez\n\nAdd docs for the test crate with the std docs\n\nIf the compiler docs aren't going to include the test crate then it may as well be included with std.\n\nFixes #49388\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/15eb465b353adc7a45af89e426dced4dbca2a536", "html_url": "https://github.com/rust-lang/rust/commit/15eb465b353adc7a45af89e426dced4dbca2a536", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/15eb465b353adc7a45af89e426dced4dbca2a536/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c22b4db0f5e17e18f1099a803945cb0e96ac3c56", "url": "https://api.github.com/repos/rust-lang/rust/commits/c22b4db0f5e17e18f1099a803945cb0e96ac3c56", "html_url": "https://github.com/rust-lang/rust/commit/c22b4db0f5e17e18f1099a803945cb0e96ac3c56"}, {"sha": "e719bb048e32c00fb9d9b2236a61b7a379ce4f1b", "url": "https://api.github.com/repos/rust-lang/rust/commits/e719bb048e32c00fb9d9b2236a61b7a379ce4f1b", "html_url": "https://github.com/rust-lang/rust/commit/e719bb048e32c00fb9d9b2236a61b7a379ce4f1b"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "620e125a43da1977f1bb01e748d0525eae6ea078", "filename": "src/bootstrap/doc.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/15eb465b353adc7a45af89e426dced4dbca2a536/src%2Fbootstrap%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15eb465b353adc7a45af89e426dced4dbca2a536/src%2Fbootstrap%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdoc.rs?ref=15eb465b353adc7a45af89e426dced4dbca2a536", "patch": "@@ -514,7 +514,7 @@ impl Step for Test {\n \n     fn should_run(run: ShouldRun) -> ShouldRun {\n         let builder = run.builder;\n-        run.krate(\"test\").default_condition(builder.config.compiler_docs)\n+        run.krate(\"test\").default_condition(builder.build.config.docs)\n     }\n \n     fn make_run(run: RunConfig) {\n@@ -557,6 +557,9 @@ impl Step for Test {\n \n         let mut cargo = builder.cargo(compiler, Mode::Libtest, target, \"doc\");\n         compile::test_cargo(build, &compiler, target, &mut cargo);\n+\n+        cargo.arg(\"--no-deps\").arg(\"-p\").arg(\"test\");\n+\n         build.run(&mut cargo);\n         build.cp_r(&my_out, &out);\n     }"}]}