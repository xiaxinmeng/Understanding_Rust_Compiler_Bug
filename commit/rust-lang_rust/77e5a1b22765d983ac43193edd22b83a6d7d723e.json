{"sha": "77e5a1b22765d983ac43193edd22b83a6d7d723e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3ZTVhMWIyMjc2NWQ5ODNhYzQzMTkzZWRkMjJiODNhNmQ3ZDcyM2U=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-09T00:04:53Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-09T19:35:37Z"}, "message": "Split up `missing-doc` ui test", "tree": {"sha": "6e6dc2fd459790c4cf17465aab563190214f91c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e6dc2fd459790c4cf17465aab563190214f91c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/77e5a1b22765d983ac43193edd22b83a6d7d723e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/77e5a1b22765d983ac43193edd22b83a6d7d723e", "html_url": "https://github.com/rust-lang/rust/commit/77e5a1b22765d983ac43193edd22b83a6d7d723e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/77e5a1b22765d983ac43193edd22b83a6d7d723e/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ac795a6f3aaaaa4d39afda0845e24891ca892126", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac795a6f3aaaaa4d39afda0845e24891ca892126", "html_url": "https://github.com/rust-lang/rust/commit/ac795a6f3aaaaa4d39afda0845e24891ca892126"}], "stats": {"total": 416, "additions": 214, "deletions": 202}, "files": [{"sha": "1317521f7366fb444a685180b45e669703605b56", "filename": "tests/ui/missing-doc-impl.rs", "status": "added", "additions": 87, "deletions": 0, "changes": 87, "blob_url": "https://github.com/rust-lang/rust/blob/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc-impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc-impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmissing-doc-impl.rs?ref=77e5a1b22765d983ac43193edd22b83a6d7d723e", "patch": "@@ -0,0 +1,87 @@\n+#![warn(clippy::missing_docs_in_private_items)]\n+#![allow(dead_code)]\n+#![feature(associated_type_defaults)]\n+\n+//! Some garbage docs for the crate here\n+#![doc = \"More garbage\"]\n+\n+struct Foo {\n+    a: isize,\n+    b: isize,\n+}\n+\n+pub struct PubFoo {\n+    pub a: isize,\n+    b: isize,\n+}\n+\n+#[allow(clippy::missing_docs_in_private_items)]\n+pub struct PubFoo2 {\n+    pub a: isize,\n+    pub c: isize,\n+}\n+\n+/// dox\n+pub trait A {\n+    /// dox\n+    fn foo(&self);\n+    /// dox\n+    fn foo_with_impl(&self) {}\n+}\n+\n+#[allow(clippy::missing_docs_in_private_items)]\n+trait B {\n+    fn foo(&self);\n+    fn foo_with_impl(&self) {}\n+}\n+\n+pub trait C {\n+    fn foo(&self);\n+    fn foo_with_impl(&self) {}\n+}\n+\n+#[allow(clippy::missing_docs_in_private_items)]\n+pub trait D {\n+    fn dummy(&self) {}\n+}\n+\n+/// dox\n+pub trait E {\n+    type AssociatedType;\n+    type AssociatedTypeDef = Self;\n+\n+    /// dox\n+    type DocumentedType;\n+    /// dox\n+    type DocumentedTypeDef = Self;\n+    /// dox\n+    fn dummy(&self) {}\n+}\n+\n+impl Foo {\n+    pub fn foo() {}\n+    fn bar() {}\n+}\n+\n+impl PubFoo {\n+    pub fn foo() {}\n+    /// dox\n+    pub fn foo1() {}\n+    fn foo2() {}\n+    #[allow(clippy::missing_docs_in_private_items)]\n+    pub fn foo3() {}\n+}\n+\n+#[allow(clippy::missing_docs_in_private_items)]\n+trait F {\n+    fn a();\n+    fn b(&self);\n+}\n+\n+// should need to redefine documentation for implementations of traits\n+impl F for Foo {\n+    fn a() {}\n+    fn b(&self) {}\n+}\n+\n+fn main() {}"}, {"sha": "9656a39abceb5b460b1261a84a1c0919daa98a57", "filename": "tests/ui/missing-doc-impl.stderr", "status": "added", "additions": 103, "deletions": 0, "changes": 103, "blob_url": "https://github.com/rust-lang/rust/blob/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc-impl.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc-impl.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmissing-doc-impl.stderr?ref=77e5a1b22765d983ac43193edd22b83a6d7d723e", "patch": "@@ -0,0 +1,103 @@\n+error: missing documentation for a struct\n+  --> $DIR/missing-doc-impl.rs:8:1\n+   |\n+LL | / struct Foo {\n+LL | |     a: isize,\n+LL | |     b: isize,\n+LL | | }\n+   | |_^\n+   |\n+   = note: `-D clippy::missing-docs-in-private-items` implied by `-D warnings`\n+\n+error: missing documentation for a struct field\n+  --> $DIR/missing-doc-impl.rs:9:5\n+   |\n+LL |     a: isize,\n+   |     ^^^^^^^^\n+\n+error: missing documentation for a struct field\n+  --> $DIR/missing-doc-impl.rs:10:5\n+   |\n+LL |     b: isize,\n+   |     ^^^^^^^^\n+\n+error: missing documentation for a struct\n+  --> $DIR/missing-doc-impl.rs:13:1\n+   |\n+LL | / pub struct PubFoo {\n+LL | |     pub a: isize,\n+LL | |     b: isize,\n+LL | | }\n+   | |_^\n+\n+error: missing documentation for a struct field\n+  --> $DIR/missing-doc-impl.rs:14:5\n+   |\n+LL |     pub a: isize,\n+   |     ^^^^^^^^^^^^\n+\n+error: missing documentation for a struct field\n+  --> $DIR/missing-doc-impl.rs:15:5\n+   |\n+LL |     b: isize,\n+   |     ^^^^^^^^\n+\n+error: missing documentation for a trait\n+  --> $DIR/missing-doc-impl.rs:38:1\n+   |\n+LL | / pub trait C {\n+LL | |     fn foo(&self);\n+LL | |     fn foo_with_impl(&self) {}\n+LL | | }\n+   | |_^\n+\n+error: missing documentation for a trait method\n+  --> $DIR/missing-doc-impl.rs:39:5\n+   |\n+LL |     fn foo(&self);\n+   |     ^^^^^^^^^^^^^^\n+\n+error: missing documentation for a trait method\n+  --> $DIR/missing-doc-impl.rs:40:5\n+   |\n+LL |     fn foo_with_impl(&self) {}\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: missing documentation for an associated type\n+  --> $DIR/missing-doc-impl.rs:50:5\n+   |\n+LL |     type AssociatedType;\n+   |     ^^^^^^^^^^^^^^^^^^^^\n+\n+error: missing documentation for an associated type\n+  --> $DIR/missing-doc-impl.rs:51:5\n+   |\n+LL |     type AssociatedTypeDef = Self;\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: missing documentation for a method\n+  --> $DIR/missing-doc-impl.rs:62:5\n+   |\n+LL |     pub fn foo() {}\n+   |     ^^^^^^^^^^^^^^^\n+\n+error: missing documentation for a method\n+  --> $DIR/missing-doc-impl.rs:63:5\n+   |\n+LL |     fn bar() {}\n+   |     ^^^^^^^^^^^\n+\n+error: missing documentation for a method\n+  --> $DIR/missing-doc-impl.rs:67:5\n+   |\n+LL |     pub fn foo() {}\n+   |     ^^^^^^^^^^^^^^^\n+\n+error: missing documentation for a method\n+  --> $DIR/missing-doc-impl.rs:70:5\n+   |\n+LL |     fn foo2() {}\n+   |     ^^^^^^^^^^^^\n+\n+error: aborting due to 15 previous errors\n+"}, {"sha": "a9bf7140a1e594ae61cf64f9a000ee6716b669b3", "filename": "tests/ui/missing-doc.rs", "status": "modified", "additions": 1, "deletions": 80, "changes": 81, "blob_url": "https://github.com/rust-lang/rust/blob/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmissing-doc.rs?ref=77e5a1b22765d983ac43193edd22b83a6d7d723e", "patch": "@@ -2,30 +2,14 @@\n // When denying at the crate level, be sure to not get random warnings from the\n // injected intrinsics by the compiler.\n #![allow(dead_code)]\n-#![feature(associated_type_defaults, global_asm)]\n+#![feature(global_asm)]\n \n //! Some garbage docs for the crate here\n #![doc = \"More garbage\"]\n \n type Typedef = String;\n pub type PubTypedef = String;\n \n-struct Foo {\n-    a: isize,\n-    b: isize,\n-}\n-\n-pub struct PubFoo {\n-    pub a: isize,\n-    b: isize,\n-}\n-\n-#[allow(clippy::missing_docs_in_private_items)]\n-pub struct PubFoo2 {\n-    pub a: isize,\n-    pub c: isize,\n-}\n-\n mod module_no_dox {}\n pub mod pub_module_no_dox {}\n \n@@ -36,69 +20,6 @@ fn foo3() {}\n #[allow(clippy::missing_docs_in_private_items)]\n pub fn foo4() {}\n \n-/// dox\n-pub trait A {\n-    /// dox\n-    fn foo(&self);\n-    /// dox\n-    fn foo_with_impl(&self) {}\n-}\n-\n-#[allow(clippy::missing_docs_in_private_items)]\n-trait B {\n-    fn foo(&self);\n-    fn foo_with_impl(&self) {}\n-}\n-\n-pub trait C {\n-    fn foo(&self);\n-    fn foo_with_impl(&self) {}\n-}\n-\n-#[allow(clippy::missing_docs_in_private_items)]\n-pub trait D {\n-    fn dummy(&self) {}\n-}\n-\n-/// dox\n-pub trait E {\n-    type AssociatedType;\n-    type AssociatedTypeDef = Self;\n-\n-    /// dox\n-    type DocumentedType;\n-    /// dox\n-    type DocumentedTypeDef = Self;\n-    /// dox\n-    fn dummy(&self) {}\n-}\n-\n-impl Foo {\n-    pub fn foo() {}\n-    fn bar() {}\n-}\n-\n-impl PubFoo {\n-    pub fn foo() {}\n-    /// dox\n-    pub fn foo1() {}\n-    fn foo2() {}\n-    #[allow(clippy::missing_docs_in_private_items)]\n-    pub fn foo3() {}\n-}\n-\n-#[allow(clippy::missing_docs_in_private_items)]\n-trait F {\n-    fn a();\n-    fn b(&self);\n-}\n-\n-// should need to redefine documentation for implementations of traits\n-impl F for Foo {\n-    fn a() {}\n-    fn b(&self) {}\n-}\n-\n // It sure is nice if doc(hidden) implies allow(missing_docs), and that it\n // applies recursively\n #[doc(hidden)]"}, {"sha": "a876dc078ebff96f25c8e34efad90156b896a70a", "filename": "tests/ui/missing-doc.stderr", "status": "modified", "additions": 23, "deletions": 122, "changes": 145, "blob_url": "https://github.com/rust-lang/rust/blob/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/77e5a1b22765d983ac43193edd22b83a6d7d723e/tests%2Fui%2Fmissing-doc.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fmissing-doc.stderr?ref=77e5a1b22765d983ac43193edd22b83a6d7d723e", "patch": "@@ -12,131 +12,32 @@ error: missing documentation for a type alias\n LL | pub type PubTypedef = String;\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: missing documentation for a struct\n-  --> $DIR/missing-doc.rs:13:1\n-   |\n-LL | / struct Foo {\n-LL | |     a: isize,\n-LL | |     b: isize,\n-LL | | }\n-   | |_^\n-\n-error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:14:5\n-   |\n-LL |     a: isize,\n-   |     ^^^^^^^^\n-\n-error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:15:5\n-   |\n-LL |     b: isize,\n-   |     ^^^^^^^^\n-\n-error: missing documentation for a struct\n-  --> $DIR/missing-doc.rs:18:1\n-   |\n-LL | / pub struct PubFoo {\n-LL | |     pub a: isize,\n-LL | |     b: isize,\n-LL | | }\n-   | |_^\n-\n-error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:19:5\n-   |\n-LL |     pub a: isize,\n-   |     ^^^^^^^^^^^^\n-\n-error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:20:5\n-   |\n-LL |     b: isize,\n-   |     ^^^^^^^^\n-\n error: missing documentation for a module\n-  --> $DIR/missing-doc.rs:29:1\n+  --> $DIR/missing-doc.rs:13:1\n    |\n LL | mod module_no_dox {}\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a module\n-  --> $DIR/missing-doc.rs:30:1\n+  --> $DIR/missing-doc.rs:14:1\n    |\n LL | pub mod pub_module_no_dox {}\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:34:1\n+  --> $DIR/missing-doc.rs:18:1\n    |\n LL | pub fn foo2() {}\n    | ^^^^^^^^^^^^^^^^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:35:1\n+  --> $DIR/missing-doc.rs:19:1\n    |\n LL | fn foo3() {}\n    | ^^^^^^^^^^^^\n \n-error: missing documentation for a trait\n-  --> $DIR/missing-doc.rs:53:1\n-   |\n-LL | / pub trait C {\n-LL | |     fn foo(&self);\n-LL | |     fn foo_with_impl(&self) {}\n-LL | | }\n-   | |_^\n-\n-error: missing documentation for a trait method\n-  --> $DIR/missing-doc.rs:54:5\n-   |\n-LL |     fn foo(&self);\n-   |     ^^^^^^^^^^^^^^\n-\n-error: missing documentation for a trait method\n-  --> $DIR/missing-doc.rs:55:5\n-   |\n-LL |     fn foo_with_impl(&self) {}\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-error: missing documentation for an associated type\n-  --> $DIR/missing-doc.rs:65:5\n-   |\n-LL |     type AssociatedType;\n-   |     ^^^^^^^^^^^^^^^^^^^^\n-\n-error: missing documentation for an associated type\n-  --> $DIR/missing-doc.rs:66:5\n-   |\n-LL |     type AssociatedTypeDef = Self;\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n-\n-error: missing documentation for a method\n-  --> $DIR/missing-doc.rs:77:5\n-   |\n-LL |     pub fn foo() {}\n-   |     ^^^^^^^^^^^^^^^\n-\n-error: missing documentation for a method\n-  --> $DIR/missing-doc.rs:78:5\n-   |\n-LL |     fn bar() {}\n-   |     ^^^^^^^^^^^\n-\n-error: missing documentation for a method\n-  --> $DIR/missing-doc.rs:82:5\n-   |\n-LL |     pub fn foo() {}\n-   |     ^^^^^^^^^^^^^^^\n-\n-error: missing documentation for a method\n-  --> $DIR/missing-doc.rs:85:5\n-   |\n-LL |     fn foo2() {}\n-   |     ^^^^^^^^^^^^\n-\n error: missing documentation for an enum\n-  --> $DIR/missing-doc.rs:112:1\n+  --> $DIR/missing-doc.rs:33:1\n    |\n LL | / enum Baz {\n LL | |     BazA { a: isize, b: isize },\n@@ -145,75 +46,75 @@ LL | | }\n    | |_^\n \n error: missing documentation for a variant\n-  --> $DIR/missing-doc.rs:113:5\n+  --> $DIR/missing-doc.rs:34:5\n    |\n LL |     BazA { a: isize, b: isize },\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:113:12\n+  --> $DIR/missing-doc.rs:34:12\n    |\n LL |     BazA { a: isize, b: isize },\n    |            ^^^^^^^^\n \n error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:113:22\n+  --> $DIR/missing-doc.rs:34:22\n    |\n LL |     BazA { a: isize, b: isize },\n    |                      ^^^^^^^^\n \n error: missing documentation for a variant\n-  --> $DIR/missing-doc.rs:114:5\n+  --> $DIR/missing-doc.rs:35:5\n    |\n LL |     BarB,\n    |     ^^^^\n \n error: missing documentation for an enum\n-  --> $DIR/missing-doc.rs:117:1\n+  --> $DIR/missing-doc.rs:38:1\n    |\n LL | / pub enum PubBaz {\n LL | |     PubBazA { a: isize },\n LL | | }\n    | |_^\n \n error: missing documentation for a variant\n-  --> $DIR/missing-doc.rs:118:5\n+  --> $DIR/missing-doc.rs:39:5\n    |\n LL |     PubBazA { a: isize },\n    |     ^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a struct field\n-  --> $DIR/missing-doc.rs:118:15\n+  --> $DIR/missing-doc.rs:39:15\n    |\n LL |     PubBazA { a: isize },\n    |               ^^^^^^^^\n \n error: missing documentation for a constant\n-  --> $DIR/missing-doc.rs:138:1\n+  --> $DIR/missing-doc.rs:59:1\n    |\n LL | const FOO: u32 = 0;\n    | ^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a constant\n-  --> $DIR/missing-doc.rs:145:1\n+  --> $DIR/missing-doc.rs:66:1\n    |\n LL | pub const FOO4: u32 = 0;\n    | ^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a static\n-  --> $DIR/missing-doc.rs:147:1\n+  --> $DIR/missing-doc.rs:68:1\n    |\n LL | static BAR: u32 = 0;\n    | ^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a static\n-  --> $DIR/missing-doc.rs:154:1\n+  --> $DIR/missing-doc.rs:75:1\n    |\n LL | pub static BAR4: u32 = 0;\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a module\n-  --> $DIR/missing-doc.rs:156:1\n+  --> $DIR/missing-doc.rs:77:1\n    |\n LL | / mod internal_impl {\n LL | |     /// dox\n@@ -225,34 +126,34 @@ LL | | }\n    | |_^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:159:5\n+  --> $DIR/missing-doc.rs:80:5\n    |\n LL |     pub fn undocumented1() {}\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:160:5\n+  --> $DIR/missing-doc.rs:81:5\n    |\n LL |     pub fn undocumented2() {}\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:161:5\n+  --> $DIR/missing-doc.rs:82:5\n    |\n LL |     fn undocumented3() {}\n    |     ^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:166:9\n+  --> $DIR/missing-doc.rs:87:9\n    |\n LL |         pub fn also_undocumented1() {}\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing documentation for a function\n-  --> $DIR/missing-doc.rs:167:9\n+  --> $DIR/missing-doc.rs:88:9\n    |\n LL |         fn also_undocumented2() {}\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 39 previous errors\n+error: aborting due to 24 previous errors\n "}]}