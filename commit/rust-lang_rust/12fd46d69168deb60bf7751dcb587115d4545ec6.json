{"sha": "12fd46d69168deb60bf7751dcb587115d4545ec6", "node_id": "C_kwDOAAsO6NoAKDEyZmQ0NmQ2OTE2OGRlYjYwYmY3NzUxZGNiNTg3MTE1ZDQ1NDVlYzY", "commit": {"author": {"name": "Alex Gaynor", "email": "alex.gaynor@gmail.com", "date": "2023-05-15T02:41:38Z"}, "committer": {"name": "Alex Gaynor", "email": "alex.gaynor@gmail.com", "date": "2023-05-22T21:13:23Z"}, "message": "Enable sanitizers and profiler for aarch64-unknown-linux-musl", "tree": {"sha": "bc504915ae0fc2d523723aa8191495542474d5b4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bc504915ae0fc2d523723aa8191495542474d5b4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/12fd46d69168deb60bf7751dcb587115d4545ec6", "comment_count": 0, "verification": {"verified": false, "reason": "bad_cert", "signature": "-----BEGIN SIGNED MESSAGE-----\nMIIENgYJKoZIhvcNAQcCoIIEJzCCBCMCAQExDTALBglghkgBZQMEAgEwCwYJKoZI\nhvcNAQcBoIIC1zCCAtMwggJZoAMCAQICFHzBWVgerwb1U3PxQscYyE9gSjw0MAoG\nCCqGSM49BAMDMDcxFTATBgNVBAoTDHNpZ3N0b3JlLmRldjEeMBwGA1UEAxMVc2ln\nc3RvcmUtaW50ZXJtZWRpYXRlMB4XDTIzMDUyMjIxMTMyOFoXDTIzMDUyMjIxMjMy\nOFowADBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABNAcFRPHZISEFmXK6MN11oY8\nx052fOAnm9fO06qCEREFB+4XupAkm2Z+ONe5Honp1WvI/GmrbxNLvbzf9thm2Tej\nggF4MIIBdDAOBgNVHQ8BAf8EBAMCB4AwEwYDVR0lBAwwCgYIKwYBBQUHAwMwHQYD\nVR0OBBYEFE3d2FyWkLEKxXa1CF/lzhszFPyfMB8GA1UdIwQYMBaAFN/T6c9WJBGW\n+ajY6ShVosYuGGQ/MCMGA1UdEQEB/wQZMBeBFWFsZXguZ2F5bm9yQGdtYWlsLmNv\nbTAsBgorBgEEAYO/MAEBBB5odHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgw\nLgYKKwYBBAGDvzABCAQgDB5odHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgw\ngYkGCisGAQQB1nkCBAIEewR5AHcAdQDdPTBqxscRMmMZHhyZZzcCokpeuN48rf+H\ninKALynujgAAAYhFT1keAAAEAwBGMEQCIG+K3CUm6Cu45MI3m7R/zresGQoCpCTN\nHWZDn7nS4DPWAiBs4UJ9rOvp5n/Lobx4mTPNriGYM1c/TwBrvMJiDnpp+DAKBggq\nhkjOPQQDAwNoADBlAjB0C08qwoT0Qt/H63n0qvXAgeX3G4KX9Wx0qYYNb3/nHn9P\nvE/Cw88fUbhixlMJ8sMCMQDHYC6brL8DprKSISrMIQPKjbrmAQDO/pTBHzmEczXq\nulLJdCkSBEnGg641aZ3OmJExggElMIIBIQIBATBPMDcxFTATBgNVBAoTDHNpZ3N0\nb3JlLmRldjEeMBwGA1UEAxMVc2lnc3RvcmUtaW50ZXJtZWRpYXRlAhR8wVlYHq8G\n9VNz8ULHGMhPYEo8NDALBglghkgBZQMEAgGgaTAYBgkqhkiG9w0BCQMxCwYJKoZI\nhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0yMzA1MjIyMTEzMjhaMC8GCSqGSIb3DQEJ\nBDEiBCBO8n9igADY9S9vdV8RMh9AjTxN/TGjU8RHv0cExONEezAKBggqhkjOPQQD\nAgRHMEUCIAz4BDEhJ4I7kMWasQzb2OwVdd2CG5qhBoTU5WihLM2JAiEA54mDkMU5\n3umj3+b94B6lXedKUbDDVRhLMXOM6yDz7nM=\n-----END SIGNED MESSAGE-----", "payload": "tree bc504915ae0fc2d523723aa8191495542474d5b4\nparent a14d6961f940255727f06689cad99d755e498c24\nauthor Alex Gaynor <alex.gaynor@gmail.com> 1684118498 -0400\ncommitter Alex Gaynor <alex.gaynor@gmail.com> 1684790003 -0700\n\nEnable sanitizers and profiler for aarch64-unknown-linux-musl\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/12fd46d69168deb60bf7751dcb587115d4545ec6", "html_url": "https://github.com/rust-lang/rust/commit/12fd46d69168deb60bf7751dcb587115d4545ec6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/12fd46d69168deb60bf7751dcb587115d4545ec6/comments", "author": {"login": "alex", "id": 772, "node_id": "MDQ6VXNlcjc3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex", "html_url": "https://github.com/alex", "followers_url": "https://api.github.com/users/alex/followers", "following_url": "https://api.github.com/users/alex/following{/other_user}", "gists_url": "https://api.github.com/users/alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex/subscriptions", "organizations_url": "https://api.github.com/users/alex/orgs", "repos_url": "https://api.github.com/users/alex/repos", "events_url": "https://api.github.com/users/alex/events{/privacy}", "received_events_url": "https://api.github.com/users/alex/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alex", "id": 772, "node_id": "MDQ6VXNlcjc3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alex", "html_url": "https://github.com/alex", "followers_url": "https://api.github.com/users/alex/followers", "following_url": "https://api.github.com/users/alex/following{/other_user}", "gists_url": "https://api.github.com/users/alex/gists{/gist_id}", "starred_url": "https://api.github.com/users/alex/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alex/subscriptions", "organizations_url": "https://api.github.com/users/alex/orgs", "repos_url": "https://api.github.com/users/alex/repos", "events_url": "https://api.github.com/users/alex/events{/privacy}", "received_events_url": "https://api.github.com/users/alex/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a14d6961f940255727f06689cad99d755e498c24", "url": "https://api.github.com/repos/rust-lang/rust/commits/a14d6961f940255727f06689cad99d755e498c24", "html_url": "https://github.com/rust-lang/rust/commit/a14d6961f940255727f06689cad99d755e498c24"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "523eb6bd2fe22b0e748434d2c420781828f0245a", "filename": "compiler/rustc_target/src/spec/aarch64_unknown_linux_musl.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/12fd46d69168deb60bf7751dcb587115d4545ec6/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_unknown_linux_musl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/12fd46d69168deb60bf7751dcb587115d4545ec6/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_unknown_linux_musl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Faarch64_unknown_linux_musl.rs?ref=12fd46d69168deb60bf7751dcb587115d4545ec6", "patch": "@@ -1,10 +1,15 @@\n-use crate::spec::{Target, TargetOptions};\n+use crate::spec::{SanitizerSet, Target, TargetOptions};\n \n pub fn target() -> Target {\n     let mut base = super::linux_musl_base::opts();\n     base.max_atomic_width = Some(128);\n     base.supports_xray = true;\n     base.features = \"+v8a\".into();\n+    base.supported_sanitizers = SanitizerSet::ADDRESS\n+        | SanitizerSet::CFI\n+        | SanitizerSet::LEAK\n+        | SanitizerSet::MEMORY\n+        | SanitizerSet::THREAD;\n \n     Target {\n         llvm_target: \"aarch64-unknown-linux-musl\".into(),"}, {"sha": "420c42bc9d8079a134a5a45a3f6e7f01cf98acb3", "filename": "src/ci/docker/host-x86_64/dist-arm-linux/Dockerfile", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/12fd46d69168deb60bf7751dcb587115d4545ec6/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-arm-linux%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/12fd46d69168deb60bf7751dcb587115d4545ec6/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-arm-linux%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-arm-linux%2FDockerfile?ref=12fd46d69168deb60bf7751dcb587115d4545ec6", "patch": "@@ -33,6 +33,11 @@ ENV CC_arm_unknown_linux_gnueabi=arm-unknown-linux-gnueabi-gcc \\\n \n ENV HOSTS=arm-unknown-linux-gnueabi,aarch64-unknown-linux-musl\n \n-ENV RUST_CONFIGURE_ARGS --enable-full-tools --disable-docs --musl-root-aarch64=/usr/local/aarch64-linux-musl \\\n-    --set target.aarch64-unknown-linux-musl.crt-static=false\n+ENV RUST_CONFIGURE_ARGS \\\n+      --enable-full-tools \\\n+      --disable-docs \\\n+      --musl-root-aarch64=/usr/local/aarch64-linux-musl \\\n+      --enable-sanitizers \\\n+      --enable-profiler \\\n+      --set target.aarch64-unknown-linux-musl.crt-static=false\n ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}]}