{"sha": "8c3cd8f121d4306732423d1c8804d54e36bd706a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjM2NkOGYxMjFkNDMwNjczMjQyM2QxYzg4MDRkNTRlMzZiZDcwNmE=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-05-29T19:18:57Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-05-29T19:18:57Z"}, "message": "Merge #1346\n\n1346: bump timeout for CI r=matklad a=matklad\n\n\n\nCo-authored-by: Aleksey Kladov <aleksey.kladov@gmail.com>", "tree": {"sha": "fa887bc9a274813869d41f36cb5e48a4c1bd3ef9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa887bc9a274813869d41f36cb5e48a4c1bd3ef9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c3cd8f121d4306732423d1c8804d54e36bd706a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c3cd8f121d4306732423d1c8804d54e36bd706a", "html_url": "https://github.com/rust-lang/rust/commit/8c3cd8f121d4306732423d1c8804d54e36bd706a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c3cd8f121d4306732423d1c8804d54e36bd706a/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "7e9c5e32e5f7819b340fc2adb63b2ffeeb2627cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/7e9c5e32e5f7819b340fc2adb63b2ffeeb2627cf", "html_url": "https://github.com/rust-lang/rust/commit/7e9c5e32e5f7819b340fc2adb63b2ffeeb2627cf"}, {"sha": "9304cb026309d68f2b5a6326e74f836bc79f88f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/9304cb026309d68f2b5a6326e74f836bc79f88f5", "html_url": "https://github.com/rust-lang/rust/commit/9304cb026309d68f2b5a6326e74f836bc79f88f5"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "42dcac332050709501cdcff68f5855fe8c840c18", "filename": "crates/ra_hir/src/nameres.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_hir%2Fsrc%2Fnameres.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_hir%2Fsrc%2Fnameres.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fnameres.rs?ref=8c3cd8f121d4306732423d1c8804d54e36bd706a", "patch": "@@ -222,6 +222,7 @@ fn or(left: ItemOrMacro, right: ItemOrMacro) -> ItemOrMacro {\n \n impl CrateDefMap {\n     pub(crate) fn crate_def_map_query(db: &impl DefDatabase, krate: Crate) -> Arc<CrateDefMap> {\n+        db.check_canceled();\n         let _p = profile(\"crate_def_map_query\");\n         let def_map = {\n             let edition = krate.edition(db);"}, {"sha": "af8ac064c42606cd09c6f160d86db8b7c48c47f4", "filename": "crates/ra_hir/src/nameres/collector.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_hir%2Fsrc%2Fnameres%2Fcollector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_hir%2Fsrc%2Fnameres%2Fcollector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fnameres%2Fcollector.rs?ref=8c3cd8f121d4306732423d1c8804d54e36bd706a", "patch": "@@ -112,6 +112,7 @@ where\n         // main name resolution fixed-point loop.\n         let mut i = 0;\n         loop {\n+            self.db.check_canceled();\n             match (self.resolve_imports(), self.resolve_macros()) {\n                 (ReachedFixedPoint::Yes, ReachedFixedPoint::Yes) => break,\n                 _ => i += 1,"}, {"sha": "fc90f56d50e07f122b0dfc165b92deba9528d775", "filename": "crates/ra_hir/src/ty/traits.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits.rs?ref=8c3cd8f121d4306732423d1c8804d54e36bd706a", "patch": "@@ -82,6 +82,7 @@ pub(crate) fn implements_query(\n     krate: Crate,\n     trait_ref: Canonical<TraitRef>,\n ) -> Option<Solution> {\n+    db.check_canceled();\n     let _p = profile(\"implements_query\");\n     let goal: chalk_ir::Goal = trait_ref.value.to_chalk(db).cast();\n     debug!(\"goal: {:?}\", goal);"}, {"sha": "0ebfd641dfb285a8c5021b9df65ead413eaaa195", "filename": "crates/ra_lsp_server/src/main_loop/handlers.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Fsrc%2Fmain_loop%2Fhandlers.rs?ref=8c3cd8f121d4306732423d1c8804d54e36bd706a", "patch": "@@ -34,7 +34,7 @@ pub fn handle_analyzer_status(world: ServerWorld, _: ()) -> Result<String> {\n     let requests = world.latest_completed_requests.read();\n     for (idx, r) in requests.iter().enumerate() {\n         let current = if idx == world.request_idx { \"*\" } else { \" \" };\n-        writeln!(buf, \"{:4}{}{:<36}: {:?}\", r.id, current, r.method, r.duration).unwrap();\n+        writeln!(buf, \"{:4}{}{:<36}{}ms\", r.id, current, r.method, r.duration.as_millis()).unwrap();\n     }\n     Ok(buf)\n }"}, {"sha": "f952a03a398fff93f975b3e4b05a23b1775c02cc", "filename": "crates/ra_lsp_server/tests/heavy_tests/support.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_lsp_server%2Ftests%2Fheavy_tests%2Fsupport.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c3cd8f121d4306732423d1c8804d54e36bd706a/crates%2Fra_lsp_server%2Ftests%2Fheavy_tests%2Fsupport.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_lsp_server%2Ftests%2Fheavy_tests%2Fsupport.rs?ref=8c3cd8f121d4306732423d1c8804d54e36bd706a", "patch": "@@ -227,7 +227,7 @@ impl Drop for Server {\n }\n \n fn recv_timeout(receiver: &Receiver<RawMessage>) -> Option<RawMessage> {\n-    let timeout = Duration::from_secs(50);\n+    let timeout = Duration::from_secs(120);\n     select! {\n         recv(receiver) -> msg => msg.ok(),\n         recv(after(timeout)) -> _ => panic!(\"timed out\"),"}]}