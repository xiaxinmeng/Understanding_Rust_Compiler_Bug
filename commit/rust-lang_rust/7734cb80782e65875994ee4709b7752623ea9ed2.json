{"sha": "7734cb80782e65875994ee4709b7752623ea9ed2", "node_id": "C_kwDOAAsO6NoAKDc3MzRjYjgwNzgyZTY1ODc1OTk0ZWU0NzA5Yjc3NTI2MjNlYTllZDI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-11-03T15:11:06Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-11-03T15:11:06Z"}, "message": "Auto merge of #90527 - 12101111:libc_a, r=petrochenkov\n\nProvide standalone libc.a in self-contained for musl and wasi\n\nThis is a prerequisites of https://github.com/rust-lang/libc/pull/2272, which in turn fix:\n\n- https://github.com/rust-lang/wg-cargo-std-aware/issues/66\n- https://github.com/rust-lang/rust/issues/89626", "tree": {"sha": "a494d289a8b8faba2c673f2ea7f9c9d36f70acd0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a494d289a8b8faba2c673f2ea7f9c9d36f70acd0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7734cb80782e65875994ee4709b7752623ea9ed2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7734cb80782e65875994ee4709b7752623ea9ed2", "html_url": "https://github.com/rust-lang/rust/commit/7734cb80782e65875994ee4709b7752623ea9ed2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7734cb80782e65875994ee4709b7752623ea9ed2/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "473eaa42e9365c47d129f72693b5d163a20cf369", "url": "https://api.github.com/repos/rust-lang/rust/commits/473eaa42e9365c47d129f72693b5d163a20cf369", "html_url": "https://github.com/rust-lang/rust/commit/473eaa42e9365c47d129f72693b5d163a20cf369"}, {"sha": "b23c1c567002d7a164049a4201949215d1b3c8af", "url": "https://api.github.com/repos/rust-lang/rust/commits/b23c1c567002d7a164049a4201949215d1b3c8af", "html_url": "https://github.com/rust-lang/rust/commit/b23c1c567002d7a164049a4201949215d1b3c8af"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "007ca9f7f5a92f6431d3025767576f58427b3b4f", "filename": "src/bootstrap/compile.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7734cb80782e65875994ee4709b7752623ea9ed2/src%2Fbootstrap%2Fcompile.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7734cb80782e65875994ee4709b7752623ea9ed2/src%2Fbootstrap%2Fcompile.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fcompile.rs?ref=7734cb80782e65875994ee4709b7752623ea9ed2", "patch": "@@ -197,7 +197,7 @@ fn copy_self_contained_objects(\n     t!(fs::create_dir_all(&libdir_self_contained));\n     let mut target_deps = vec![];\n \n-    // Copies the CRT objects.\n+    // Copies the libc and CRT objects.\n     //\n     // rustc historically provides a more self-contained installation for musl targets\n     // not requiring the presence of a native musl toolchain. For example, it can fall back\n@@ -208,7 +208,7 @@ fn copy_self_contained_objects(\n         let srcdir = builder.musl_libdir(target).unwrap_or_else(|| {\n             panic!(\"Target {:?} does not have a \\\"musl-libdir\\\" key\", target.triple)\n         });\n-        for &obj in &[\"crt1.o\", \"Scrt1.o\", \"rcrt1.o\", \"crti.o\", \"crtn.o\"] {\n+        for &obj in &[\"libc.a\", \"crt1.o\", \"Scrt1.o\", \"rcrt1.o\", \"crti.o\", \"crtn.o\"] {\n             copy_and_stamp(\n                 builder,\n                 &libdir_self_contained,\n@@ -235,7 +235,7 @@ fn copy_self_contained_objects(\n                 panic!(\"Target {:?} does not have a \\\"wasi-root\\\" key\", target.triple)\n             })\n             .join(\"lib/wasm32-wasi\");\n-        for &obj in &[\"crt1-command.o\", \"crt1-reactor.o\"] {\n+        for &obj in &[\"libc.a\", \"crt1-command.o\", \"crt1-reactor.o\"] {\n             copy_and_stamp(\n                 builder,\n                 &libdir_self_contained,"}]}