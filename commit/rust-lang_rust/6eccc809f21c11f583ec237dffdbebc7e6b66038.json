{"sha": "6eccc809f21c11f583ec237dffdbebc7e6b66038", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZlY2NjODA5ZjIxYzExZjU4M2VjMjM3ZGZmZGJlYmM3ZTZiNjYwMzg=", "commit": {"author": {"name": "Christian Poveda", "email": "git@christianpoveda.xyz", "date": "2020-03-07T14:26:04Z"}, "committer": {"name": "Christian Poveda", "email": "git@christianpoveda.xyz", "date": "2020-03-07T14:39:55Z"}, "message": "test that `environ` gets deallocated on changes", "tree": {"sha": "332014347b91d5fdb2a9ef0e0309633ef981fc11", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/332014347b91d5fdb2a9ef0e0309633ef981fc11"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6eccc809f21c11f583ec237dffdbebc7e6b66038", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQRsB8A/3NrzTlMMjT0nUl7150IKUAUCXmOyOwAKCRAnUl7150IK\nUO5/AP49VDZMo1wNAJZ20KLE3viuHUkX1ugPHuOi59EZLPFswwD/dSZu5D5zpiCp\nJinSHXU7TutyRw19t2gPGQjrj/+CLQc=\n=rz/H\n-----END PGP SIGNATURE-----", "payload": "tree 332014347b91d5fdb2a9ef0e0309633ef981fc11\nparent aedc34c6e5ee8d675212bb60d54e1394e9ee9964\nauthor Christian Poveda <git@christianpoveda.xyz> 1583591164 -0500\ncommitter Christian Poveda <git@christianpoveda.xyz> 1583591995 -0500\n\ntest that `environ` gets deallocated on changes\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6eccc809f21c11f583ec237dffdbebc7e6b66038", "html_url": "https://github.com/rust-lang/rust/commit/6eccc809f21c11f583ec237dffdbebc7e6b66038", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6eccc809f21c11f583ec237dffdbebc7e6b66038/comments", "author": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aedc34c6e5ee8d675212bb60d54e1394e9ee9964", "url": "https://api.github.com/repos/rust-lang/rust/commits/aedc34c6e5ee8d675212bb60d54e1394e9ee9964", "html_url": "https://github.com/rust-lang/rust/commit/aedc34c6e5ee8d675212bb60d54e1394e9ee9964"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "014c8c431e7fb6ee07a6f2a1cb581317c448666e", "filename": "tests/compile-fail/environ-gets-deallocated.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6eccc809f21c11f583ec237dffdbebc7e6b66038/tests%2Fcompile-fail%2Fenviron-gets-deallocated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6eccc809f21c11f583ec237dffdbebc7e6b66038/tests%2Fcompile-fail%2Fenviron-gets-deallocated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fenviron-gets-deallocated.rs?ref=6eccc809f21c11f583ec237dffdbebc7e6b66038", "patch": "@@ -0,0 +1,10 @@\n+extern \"C\" {\n+    static environ: *const *const u8;\n+}\n+\n+fn main() {\n+    let pointer = unsafe { environ };\n+    let _x = unsafe { *pointer };\n+    std::env::set_var(\"FOO\", \"BAR\");\n+    let _y = unsafe { *pointer }; //~ ERROR dangling pointer was dereferenced\n+}"}]}