{"sha": "911da62586071ec30aa1f5eb3643ef445f99dfca", "node_id": "C_kwDOAAsO6NoAKDkxMWRhNjI1ODYwNzFlYzMwYWExZjVlYjM2NDNlZjQ0NWY5OWRmY2E", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2022-04-12T17:58:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-04-12T17:58:17Z"}, "message": "Rollup merge of #95963 - luqmana:llvm-dist-cross-filecheck, r=Mark-Simulacrum\n\n[bootstrap] Grab the right FileCheck binary for dist when cross-compiling.\n\nFixes #95862\n\nWe were using the target dir for all the other LLVM tools (`llvm-config`, `llvm-ar`, etc) but the build target dir for `FileCheck`. This meant for targets which are cross-compiled, we were copying the wrong binary.", "tree": {"sha": "a60fde5aa6c3299333946ca8d7b22538caed3dba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a60fde5aa6c3299333946ca8d7b22538caed3dba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/911da62586071ec30aa1f5eb3643ef445f99dfca", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiVb25CRBK7hj4Ov3rIwAAAEYIACVZwoz4kxNUPZsd5HqprmYV\n6s4LQm0MEduHVmogEXO8mD7n3O3V1sazVkjaCcUOCCP4EBTUAqCEmjXztKzQ3+jG\nYdkIB4BoGy7srSOAEd1EIbZOxjLaexoOYf1ifH/l9EH+zjTwhN7qpc/UuVAWnfos\n8DVEK0cV/yRIqDb9DFRoGUkYF/5HK75iMJqh5tWtIl6ya0XeTqdCr3MEzM5tUcKx\nJsRBwwxYlxx4Ag7KwgZdG9ANWvKsOhC9ta3ZwU8Y3a+bgI5Ba+5Qh3Nxt9DGkYhR\n0SDvWBWC6KRX3X1WFXKfDkWmqONyxoBNfhVHIKZyqpu8Pyqh9Zvdkl5jxE2U6Q0=\n=rEjs\n-----END PGP SIGNATURE-----\n", "payload": "tree a60fde5aa6c3299333946ca8d7b22538caed3dba\nparent d6843448f158d83f48cd7126c7c8a35f973f0e6b\nparent 03bcbbf9280efa27f6cc558b82edff5042b9b584\nauthor Mara Bos <m-ou.se@m-ou.se> 1649786297 +0200\ncommitter GitHub <noreply@github.com> 1649786297 +0200\n\nRollup merge of #95963 - luqmana:llvm-dist-cross-filecheck, r=Mark-Simulacrum\n\n[bootstrap] Grab the right FileCheck binary for dist when cross-compiling.\n\nFixes #95862\n\nWe were using the target dir for all the other LLVM tools (`llvm-config`, `llvm-ar`, etc) but the build target dir for `FileCheck`. This meant for targets which are cross-compiled, we were copying the wrong binary.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/911da62586071ec30aa1f5eb3643ef445f99dfca", "html_url": "https://github.com/rust-lang/rust/commit/911da62586071ec30aa1f5eb3643ef445f99dfca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/911da62586071ec30aa1f5eb3643ef445f99dfca/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d6843448f158d83f48cd7126c7c8a35f973f0e6b", "url": "https://api.github.com/repos/rust-lang/rust/commits/d6843448f158d83f48cd7126c7c8a35f973f0e6b", "html_url": "https://github.com/rust-lang/rust/commit/d6843448f158d83f48cd7126c7c8a35f973f0e6b"}, {"sha": "03bcbbf9280efa27f6cc558b82edff5042b9b584", "url": "https://api.github.com/repos/rust-lang/rust/commits/03bcbbf9280efa27f6cc558b82edff5042b9b584", "html_url": "https://github.com/rust-lang/rust/commit/03bcbbf9280efa27f6cc558b82edff5042b9b584"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "7b496e6c66933d6c360ff21cba611351da98674f", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/911da62586071ec30aa1f5eb3643ef445f99dfca/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/911da62586071ec30aa1f5eb3643ef445f99dfca/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=911da62586071ec30aa1f5eb3643ef445f99dfca", "patch": "@@ -865,8 +865,8 @@ impl Build {\n                 }\n             }\n         } else {\n-            let base = self.llvm_out(self.config.build).join(\"build\");\n-            let base = if !self.ninja() && self.config.build.contains(\"msvc\") {\n+            let base = self.llvm_out(target).join(\"build\");\n+            let base = if !self.ninja() && target.contains(\"msvc\") {\n                 if self.config.llvm_optimize {\n                     if self.config.llvm_release_debuginfo {\n                         base.join(\"RelWithDebInfo\")"}]}