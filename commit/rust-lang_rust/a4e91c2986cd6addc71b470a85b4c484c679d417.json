{"sha": "a4e91c2986cd6addc71b470a85b4c484c679d417", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0ZTkxYzI5ODZjZDZhZGRjNzFiNDcwYTg1YjRjNDg0YzY3OWQ0MTc=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-11-05T08:49:47Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-11-05T08:49:47Z"}, "message": "Rollup merge of #65136 - ehuss:update-codegen-options, r=Dylan-DPC\n\nUpdate codegen option documentation.\n\nSome documentation updates:\n\n- Add more detail to codegen options.\n- Add missing options:\n    - `force-frame-pointers`\n    - `default-linker-libraries`\n    - `linker-plugin-lto`\n- Add fragment anchors for all command-line-arguments.\n- Add some cross links between options.", "tree": {"sha": "73c0abf5acc8b350f599a0b1a5adb47011ed2d0f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73c0abf5acc8b350f599a0b1a5adb47011ed2d0f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a4e91c2986cd6addc71b470a85b4c484c679d417", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdwTerCRBK7hj4Ov3rIwAAdHIIAKpmfrBMlGd0WM22YxOnQSNp\ndplkyI2GLHbgx/I/jmpyxTH5heck2vBgBRTbkVWzSeaEcXXOTAmeZa9dyNxdeZa6\nt6TadbWp5c1byTS+NnozzB+IYg1nFgM2u+Vslq83E59lZiXHcHLpfEPFojknOPNk\nVRlobwC/GBfEQzxCiCzb4ILO6kV47HMiLV+rgq5TuoEa4mbKH+tMuQpRcbwX2l55\n+MIHSdvXmK4SPPqzKgfLYzOOOgckbsxXfeWseItm3u7MvihB7cFzgNu5UL2vv8AE\ns8k7ep51ccMCVnUJgv5FSWszSV0gkYCFF8F5detqyT0xgy6RCBA6VkVWOeo74gs=\n=08dZ\n-----END PGP SIGNATURE-----\n", "payload": "tree 73c0abf5acc8b350f599a0b1a5adb47011ed2d0f\nparent d2185f6752d3e9db6a0330f1a43c27a370783ac8\nparent 9b9d6512880d09722e2af3f8c6e154314fd071af\nauthor Pietro Albini <pietro@pietroalbini.org> 1572943787 +0100\ncommitter GitHub <noreply@github.com> 1572943787 +0100\n\nRollup merge of #65136 - ehuss:update-codegen-options, r=Dylan-DPC\n\nUpdate codegen option documentation.\n\nSome documentation updates:\n\n- Add more detail to codegen options.\n- Add missing options:\n    - `force-frame-pointers`\n    - `default-linker-libraries`\n    - `linker-plugin-lto`\n- Add fragment anchors for all command-line-arguments.\n- Add some cross links between options.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a4e91c2986cd6addc71b470a85b4c484c679d417", "html_url": "https://github.com/rust-lang/rust/commit/a4e91c2986cd6addc71b470a85b4c484c679d417", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a4e91c2986cd6addc71b470a85b4c484c679d417/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2185f6752d3e9db6a0330f1a43c27a370783ac8", "url": "https://api.github.com/repos/rust-lang/rust/commits/d2185f6752d3e9db6a0330f1a43c27a370783ac8", "html_url": "https://github.com/rust-lang/rust/commit/d2185f6752d3e9db6a0330f1a43c27a370783ac8"}, {"sha": "9b9d6512880d09722e2af3f8c6e154314fd071af", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b9d6512880d09722e2af3f8c6e154314fd071af", "html_url": "https://github.com/rust-lang/rust/commit/9b9d6512880d09722e2af3f8c6e154314fd071af"}], "stats": {"total": 322, "additions": 254, "deletions": 68}, "files": [{"sha": "70c7acccd3638b457d7aaf08c8b74feedc0bd75d", "filename": "src/doc/rustc/src/codegen-options/index.md", "status": "modified", "additions": 186, "deletions": 37, "changes": 223, "blob_url": "https://github.com/rust-lang/rust/blob/a4e91c2986cd6addc71b470a85b4c484c679d417/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md", "raw_url": "https://github.com/rust-lang/rust/raw/a4e91c2986cd6addc71b470a85b4c484c679d417/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fcodegen-options%2Findex.md?ref=a4e91c2986cd6addc71b470a85b4c484c679d417", "patch": "@@ -9,9 +9,12 @@ This option is deprecated and does nothing.\n \n ## linker\n \n-This flag lets you control which linker `rustc` invokes to link your code.\n+This flag lets you control which linker `rustc` invokes to link your code. It\n+takes a path to the linker executable. If this flag is not specified, the\n+linker will be inferred based on the target. See also the\n+[linker-flavor](#linker-flavor) flag for another way to specify the linker.\n \n-## link-arg=val\n+## link-arg\n \n This flag lets you append a single extra argument to the linker invocation.\n \n@@ -25,9 +28,27 @@ options should be separated by spaces.\n ## linker-flavor\n \n This flag lets you control the linker flavor used by `rustc`. If a linker is given with the\n-`-C linker` flag described above then the linker flavor is inferred from the value provided. If no\n+[`-C linker` flag](#linker), then the linker flavor is inferred from the value provided. If no\n linker is given then the linker flavor is used to determine the linker to use. Every `rustc` target\n-defaults to some linker flavor.\n+defaults to some linker flavor. Valid options are:\n+\n+* `em`: Uses [Emscripten `emcc`](https://emscripten.org/docs/tools_reference/emcc.html).\n+* `gcc`: Uses the `cc` executable, which is typically gcc or clang on many systems.\n+* `ld`: Uses the `ld` executable.\n+* `msvc`: Uses the `link.exe` executable from Microsoft Visual Studio MSVC.\n+* `ptx-linker`: Uses\n+  [`rust-ptx-linker`](https://github.com/denzp/rust-ptx-linker) for Nvidia\n+  NVPTX GPGPU support.\n+* `wasm-ld`: Uses the [`wasm-ld`](https://lld.llvm.org/WebAssembly.html)\n+  executable, a port of LLVM `lld` for WebAssembly.\n+* `ld64.lld`: Uses the LLVM `lld` executable with the [`-flavor darwin`\n+  flag][lld-flavor] for Apple's `ld`.\n+* `ld.lld`: Uses the LLVM `lld` executable with the [`-flavor gnu`\n+  flag][lld-flavor] for GNU binutils' `ld`.\n+* `lld-link`: Uses the LLVM `lld` executable with the [`-flavor link`\n+  flag][lld-flavor] for Microsoft's `link.exe`.\n+\n+[lld-flavor]: https://lld.llvm.org/Driver.html\n \n ## link-dead-code\n \n@@ -39,42 +60,92 @@ metrics.\n ## lto\n \n This flag instructs LLVM to use [link time\n-optimizations](https://llvm.org/docs/LinkTimeOptimization.html).\n+optimizations](https://llvm.org/docs/LinkTimeOptimization.html) to produce\n+better optimized code, using whole-program analysis, at the cost of longer\n+linking time.\n \n-It takes one of two values, `thin` and `fat`. 'thin' LTO [is a new feature of\n-LLVM](http://blog.llvm.org/2016/06/thinlto-scalable-and-incremental-lto.html),\n-'fat' referring to the classic version of LTO.\n+This flag may take one of the following values:\n+\n+* `y`, `yes`, `on`, `fat`, or no value: Performs \"fat\" LTO which attempts to\n+  perform optimizations across all crates within the dependency graph.\n+* `n`, `no`, `off`: Disables LTO.\n+* `thin`: Performs [\"thin\"\n+  LTO](http://blog.llvm.org/2016/06/thinlto-scalable-and-incremental-lto.html).\n+  This is similar to \"fat\", but takes substantially less time to run while\n+  still achieving performance gains similar to \"fat\".\n+\n+If `-C lto` is not specified, then the compiler will attempt to perform \"thin\n+local LTO\" which performs \"thin\" LTO on the local crate only across its\n+[codegen units](#codegen-units). When `-C lto` is not specified, LTO is\n+disabled if codegen units is 1 or optimizations are disabled ([`-C\n+opt-level=0`](#opt-level)). That is:\n+\n+* When `-C lto` is not specified:\n+  * `codegen-units=1`: Disables LTO.\n+  * `opt-level=0`: Disables LTO.\n+* When `-C lto=true`:\n+  * `lto=true`: 16 codegen units, performs fat LTO across crates.\n+  * `codegen-units=1` + `lto=true`: 1 codegen unit, fat LTO across crates.\n+\n+See also [linker-plugin-lto](#linker-plugin-lto) for cross-language LTO.\n+\n+## linker-plugin-lto\n+\n+Defers LTO optimizations to the linker. See\n+[linkger-plugin-LTO](../linker-plugin-lto.md) for more details. Takes one of\n+the following values:\n+\n+* `y`, `yes`, `on`, or no value: Enabled.\n+* `n`, `no`, or `off`: Disabled (default).\n+* A path to the linker plugin.\n \n ## target-cpu\n \n This instructs `rustc` to generate code specifically for a particular processor.\n \n You can run `rustc --print target-cpus` to see the valid options to pass\n here. Additionally, `native` can be passed to use the processor of the host\n-machine.\n+machine. Each target has a default base CPU.\n \n ## target-feature\n \n Individual targets will support different features; this flag lets you control\n-enabling or disabling a feature.\n+enabling or disabling a feature. Each feature should be prefixed with a `+` to\n+enable it or `-` to disable it. Separate multiple features with commas.\n \n To see the valid options and an example of use, run `rustc --print\n target-features`.\n \n-Using this flag is unsafe and might result in [undefined runtime behavior](../targets/known-issues.md).\n+Using this flag is unsafe and might result in [undefined runtime\n+behavior](../targets/known-issues.md).\n+\n+See also the [`target_feature`\n+attribute](../../reference/attributes/codegen.md#the-target_feature-attribute)\n+for controlling features per-function.\n+\n+This also supports the feature `+crt-static` and `-crt-static` to control\n+[static C runtime linkage](../../reference/linkage.html#static-and-dynamic-c-runtimes).\n+\n+Each target and [`target-cpu`](#target-cpu) has a default set of enabled\n+features.\n \n ## passes\n \n-This flag can be used to add extra LLVM passes to the compilation.\n+This flag can be used to add extra [LLVM\n+passes](http://llvm.org/docs/Passes.html) to the compilation.\n \n The list must be separated by spaces.\n \n+See also the [`no-prepopulate-passes`](#no-prepopulate-passes) flag.\n+\n ## llvm-args\n \n This flag can be used to pass a list of arguments directly to LLVM.\n \n The list must be separated by spaces.\n \n+Pass `--help` to see a list of options.\n+\n ## save-temps\n \n `rustc` will generate temporary files during compilation; normally it will\n@@ -83,16 +154,21 @@ preserved instead of removed.\n \n ## rpath\n \n-This option allows you to set the value of\n+This option allows you to enable\n [`rpath`](https://en.wikipedia.org/wiki/Rpath).\n \n ## overflow-checks\n \n-This flag allows you to control the behavior of integer overflow. This flag\n-can be passed many options:\n+This flag allows you to control the behavior of [runtime integer\n+overflow](../../reference/expressions/operator-expr.md#overflow). When\n+overflow-checks are enabled, a panic will occur on overflow. This flag takes\n+one of the following values:\n \n-* To turn overflow checks on: `y`, `yes`, or `on`.\n-* To turn overflow checks off: `n`, `no`, or `off`.\n+* `y`, `yes`, `on`, or no value: Enable overflow checks.\n+* `n`, `no`, or `off`: Disable overflow checks.\n+\n+If not specified, overflow checks are enabled if\n+[debug-assertions](#debug-assertions) are enabled, disabled otherwise.\n \n ## no-prepopulate-passes\n \n@@ -125,49 +201,65 @@ make it use dynamic linking instead.\n \n ## no-integrated-as\n \n-LLVM comes with an internal assembler; this option will let you use an\n-external assembler instead.\n+`rustc` normally uses the LLVM internal assembler to create object code. This\n+flag will disable the internal assembler and emit assembly code to be\n+translated using an external assembler, currently the linker such as `cc`.\n \n ## no-redzone\n \n This flag allows you to disable [the\n red zone](https://en.wikipedia.org/wiki/Red_zone_\\(computing\\)). This flag can\n-be passed many options:\n+be passed one of the following options:\n+\n+* `y`, `yes`, `on`, or no value: Disables the red zone.\n+* `n`, `no`, or `off`: Enables the red zone.\n \n-* To enable the red zone: `y`, `yes`, or `on`.\n-* To disable it: `n`, `no`, or `off`.\n+The default if not specified depends on the target.\n \n ## relocation-model\n \n-This option lets you choose which relocation model to use.\n+This option lets you choose which\n+[relocation](https://en.wikipedia.org/wiki/Relocation_\\(computing\\)) model to\n+use.\n \n To find the valid options for this flag, run `rustc --print relocation-models`.\n \n-## code-model=val\n+## code-model\n \n This option lets you choose which code model to use.\n \n To find the valid options for this flag, run `rustc --print code-models`.\n \n ## metadata\n \n-This option allows you to control the metadata used for symbol mangling.\n+This option allows you to control the metadata used for symbol mangling. This\n+takes a space-separated list of strings. Mangled symbols will incorporate a\n+hash of the metadata. This may be used, for example, to differentiate symbols\n+between two different versions of the same crate being linked.\n \n ## extra-filename\n \n-This option allows you to put extra data in each output filename.\n+This option allows you to put extra data in each output filename. It takes a\n+string to add as a suffix to the filename. See the [`--emit`\n+flag][option-emit] for more information.\n \n ## codegen-units\n \n-This flag lets you control how many threads are used when doing\n-code generation.\n+This flag controls how many code generation units the crate is split into. It\n+takes an integer greater than 0.\n \n-Increasing parallelism may speed up compile times, but may also\n-produce slower code.\n+When a crate is split into multiple codegen units, LLVM is able to process\n+them in parallel. Increasing parallelism may speed up compile times, but may\n+also produce slower code. Setting this to 1 may improve the performance of\n+generated code, but may be slower to compile.\n+\n+The default, if not specified, is 16. This flag is ignored if\n+[incremental](#incremental) is enabled, in which case an internal heuristic is\n+used to split the crate.\n \n ## remark\n \n-This flag lets you print remarks for these optimization passes.\n+This flag lets you print remarks for optimization passes.\n \n The list of passes should be separated by spaces.\n \n@@ -181,30 +273,55 @@ This option is deprecated and does nothing.\n \n This flag lets you control debug information:\n \n-* `0`: no debug info at all\n+* `0`: no debug info at all (default)\n * `1`: line tables only\n * `2`: full debug info\n \n+Note: The [`-g` flag][option-g-debug] is an alias for `-C debuginfo=2`.\n+\n ## opt-level\n \n This flag lets you control the optimization level.\n \n-* `0`: no optimizations, also turn on `cfg(debug_assertions)`.\n+* `0`: no optimizations, also turns on [`cfg(debug_assertions)`](#debug-assertions).\n * `1`: basic optimizations\n * `2`: some optimizations\n * `3`: all optimizations\n * `s`: optimize for binary size\n * `z`: optimize for binary size, but also turn off loop vectorization.\n \n+Note: The [`-O` flag][option-o-optimize] is an alias for `-C opt-level=2`.\n+\n+The default is `0`.\n+\n ## debug-assertions\n \n-This flag lets you turn `cfg(debug_assertions)` on or off.\n+This flag lets you turn `cfg(debug_assertions)` [conditional\n+compilation](../../reference/conditional-compilation.md#debug_assertions) on\n+or off. It takes one of the following values:\n+\n+* `y`, `yes`, `on`, or no value: Enable debug-assertions.\n+* `n`, `no`, or `off`: Disable debug-assertions.\n+\n+If not specified, debug assertions are automatically enabled only if the\n+[opt-level](#opt-level) is 0.\n \n ## inline-threshold\n \n-This option lets you set the threshold for inlining a function.\n+This option lets you set the default threshold for inlining a function. It\n+takes an unsigned integer as a value. Inlining is based on a cost model, where\n+a higher threshold will allow more inlining.\n \n-The default is 225.\n+The default depends on the [opt-level](#opt-level):\n+\n+| opt-level | Threshold |\n+|-----------|-----------|\n+| 0         | N/A, only inlines always-inline functions |\n+| 1         | N/A, only inlines always-inline functions and LLVM lifetime intrinsics |\n+| 2         | 225 |\n+| 3         | 275 |\n+| s         | 75 |\n+| z         | 25 |\n \n ## panic\n \n@@ -213,9 +330,14 @@ This option lets you control what happens when the code panics.\n * `abort`: terminate the process upon panic\n * `unwind`: unwind the stack upon panic\n \n+If not specified, the default depends on the target.\n+\n ## incremental\n \n-This flag allows you to enable incremental compilation.\n+This flag allows you to enable incremental compilation, which allows `rustc`\n+to save information after compiling a crate to be reused when recompiling the\n+crate, improving re-compile times. This takes a path to a directory where\n+incremental files will be stored.\n \n ## profile-generate\n \n@@ -232,4 +354,31 @@ optimization (PGO). The flag takes a mandatory argument which is the path\n to a valid `.profdata` file. See the chapter on\n [profile-guided optimization] for more information.\n \n+## force-frame-pointers\n+\n+This flag forces the use of frame pointers. It takes one of the following\n+values:\n+\n+* `y`, `yes`, `on`, or no value: Frame pointers are forced to be enabled.\n+* `n`, `no`, or `off`: Frame pointers are not forced to be enabled. This does\n+  not necessarily mean frame pointers will be removed.\n+\n+The default if not specified depends on the target.\n+\n+## default-linker-libraries\n+\n+This flag controls whether or not the linker includes its default libraries.\n+It takes one of the following values:\n+\n+* `y`, `yes`, `on`, or no value: Default libraries are included.\n+* `n`, `no`, or `off`: Default libraries are **not** included.\n+\n+For example, for gcc flavor linkers, this issues the `-nodefaultlibs` flag to\n+the linker.\n+\n+The default is `yes` if not specified.\n+\n+[option-emit]: ../command-line-arguments.md#option-emit\n+[option-o-optimize]: ../command-line-arguments.md#option-o-optimize\n [profile-guided optimization]: ../profile-guided-optimization.md\n+[option-g-debug]: ../command-line-arguments.md#option-g-debug"}, {"sha": "79b4f7542f9b05b82df6727c0dbf19fbdbcea2d3", "filename": "src/doc/rustc/src/command-line-arguments.md", "status": "modified", "additions": 68, "deletions": 31, "changes": 99, "blob_url": "https://github.com/rust-lang/rust/blob/a4e91c2986cd6addc71b470a85b4c484c679d417/src%2Fdoc%2Frustc%2Fsrc%2Fcommand-line-arguments.md", "raw_url": "https://github.com/rust-lang/rust/raw/a4e91c2986cd6addc71b470a85b4c484c679d417/src%2Fdoc%2Frustc%2Fsrc%2Fcommand-line-arguments.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fcommand-line-arguments.md?ref=a4e91c2986cd6addc71b470a85b4c484c679d417", "patch": "@@ -2,19 +2,23 @@\n \n Here's a list of command-line arguments to `rustc` and what they do.\n \n+<a id=\"option-help\"></a>\n ## `-h`/`--help`: get help\n \n This flag will print out help information for `rustc`.\n \n+<a id=\"option-cfg\"></a>\n ## `--cfg`: configure the compilation environment\n \n-This flag can turn on or off various `#[cfg]` settings.\n+This flag can turn on or off various `#[cfg]` settings for [conditional\n+compilation](../reference/conditional-compilation.md).\n \n The value can either be a single identifier or two identifiers separated by `=`.\n \n For examples, `--cfg 'verbose'` or `--cfg 'feature=\"serde\"'`. These correspond\n to `#[cfg(verbose)]` and `#[cfg(feature = \"serde\")]` respectively.\n \n+<a id=\"option-l-search-path\"></a>\n ## `-L`: add a directory to the library search path\n \n When looking for external crates or libraries, a directory passed to this flag\n@@ -31,6 +35,7 @@ KIND=PATH` where `KIND` may be one of:\n - `all` \u2014\u00a0Search for all library kinds in this directory. This is the default\n   if `KIND` is not specified.\n \n+<a id=\"option-l-link-lib\"></a>\n ## `-l`: link the generated crate to a native library\n \n This flag allows you to specify linking to a specific native library when building\n@@ -55,6 +60,7 @@ and `LINK_NAME` is the name of the actual library that will be linked.\n \n [link-attribute]: ../reference/items/external-blocks.html#the-link-attribute\n \n+<a id=\"option-crate-type\"></a>\n ## `--crate-type`: a list of types of crates for the compiler to emit\n \n This instructs `rustc` on which crate type to build. This flag accepts a\n@@ -80,19 +86,21 @@ More details may be found in the [linkage chapter] of the reference.\n [linkage chapter]: ../reference/linkage.html\n [crate_type]: ../reference/linkage.html\n \n+<a id=\"option-crate-name\"></a>\n ## `--crate-name`: specify the name of the crate being built\n \n This informs `rustc` of the name of your crate.\n \n+<a id=\"option-edition\"></a>\n ## `--edition`: specify the edition to use\n \n This flag takes a value of `2015` or `2018`. The default is `2015`. More\n information about editions may be found in the [edition guide].\n \n [edition guide]: ../edition-guide/introduction.html\n \n+<a id=\"option-emit\"></a>\n ## `--emit`: specifies the types of output files to generate\n- <a id=\"option-emit\"></a>\n \n This flag controls the types of output files generated by the compiler. It\n accepts a comma-separated list of values, and may be specified multiple times.\n@@ -117,22 +125,24 @@ The valid emit kinds are:\n - `obj` \u2014 Generates a native object file. The default output filename is\n   `CRATE_NAME.o`.\n \n-The output filename can be set with the `-o` flag. A suffix may be added to\n-the filename with the `-C extra-filename` flag. The files are written to the\n-current directory unless the `--out-dir` flag is used. Each emission type may\n-also specify the output filename with the form `KIND=PATH`, which takes\n-precedence over the `-o` flag.\n+The output filename can be set with the [`-o` flag](#option-o-output). A\n+suffix may be added to the filename with the [`-C extra-filename`\n+flag](codegen-options/index.md#extra-filename). The files are written to the\n+current directory unless the [`--out-dir` flag](#option-out-dir) is used. Each\n+emission type may also specify the output filename with the form `KIND=PATH`,\n+which takes precedence over the `-o` flag.\n \n [LLVM bitcode]: https://llvm.org/docs/BitCodeFormat.html\n [LLVM IR]: https://llvm.org/docs/LangRef.html\n \n+<a id=\"option-print\"></a>\n ## `--print`: print compiler information\n \n This flag prints out various information about the compiler. This flag may be\n specified multiple times, and the information is printed in the order the\n flags are specified. Specifying a `--print` flag will usually disable the\n-`--emit` step and will only print the requested information. The valid types\n-of print values are:\n+[`--emit`](#option-emit) step and will only print the requested information.\n+The valid types of print values are:\n \n - `crate-name` \u2014 The name of the crate.\n - `file-names` \u2014 The names of the files created by the `link` emit kind.\n@@ -142,14 +152,17 @@ of print values are:\n - `target-list` \u2014 List of known targets. The target may be selected with the\n   `--target` flag.\n - `target-cpus` \u2014 List of available CPU values for the current target. The\n-  target CPU may be selected with the `-C target-cpu=val` flag.\n+  target CPU may be selected with the [`-C target-cpu=val`\n+  flag](codegen-options/index.md#target-cpu).\n - `target-features` \u2014 List of available target features for the current\n-  target. Target features may be enabled with the `-C target-feature=val`\n-  flag. This flag is unsafe. See [known issues](targets/known-issues.md) for more details.\n+  target. Target features may be enabled with the [`-C target-feature=val`\n+  flag](codegen-options/index.md#target-feature).  This flag is unsafe. See\n+  [known issues](targets/known-issues.md) for more details.\n - `relocation-models` \u2014 List of relocation models. Relocation models may be\n-  selected with the `-C relocation-model=val` flag.\n+  selected with the [`-C relocation-model=val`\n+  flag](codegen-options/index.md#relocation-model).\n - `code-models` \u2014 List of code models. Code models may be selected with the\n-  `-C code-model=val` flag.\n+  [`-C code-model=val` flag](codegen-options/index.md#code-model).\n - `tls-models` \u2014 List of Thread Local Storage models supported. The model may\n   be selected with the `-Z tls-model=val` flag.\n - `native-static-libs` \u2014 This may be used when creating a `staticlib` crate\n@@ -160,89 +173,107 @@ of print values are:\n \n [conditional compilation]: ../reference/conditional-compilation.html\n \n+<a id=\"option-g-debug\"></a>\n ## `-g`: include debug information\n \n-A synonym for `-C debuginfo=2`, for more see [here](codegen-options/index.md#debuginfo).\n+A synonym for [`-C debuginfo=2`](codegen-options/index.md#debuginfo).\n \n+<a id=\"option-o-optimize\"></a>\n ## `-O`: optimize your code\n \n-A synonym for `-C opt-level=2`, for more see [here](codegen-options/index.md#opt-level).\n+A synonym for [`-C opt-level=2`](codegen-options/index.md#opt-level).\n \n+<a id=\"option-o-output\"></a>\n ## `-o`: filename of the output\n \n This flag controls the output filename.\n \n+<a id=\"option-out-dir\"></a>\n ## `--out-dir`: directory to write the output in\n \n The outputted crate will be written to this directory. This flag is ignored if\n-the `-o` flag is used.\n+the [`-o` flag](#option-o-output) is used.\n \n+<a id=\"option-explain\"></a>\n ## `--explain`: provide a detailed explanation of an error message\n \n Each error of `rustc`'s comes with an error code; this will print\n out a longer explanation of a given error.\n \n+<a id=\"option-test\"></a>\n ## `--test`: build a test harness\n \n When compiling this crate, `rustc` will ignore your `main` function\n and instead produce a test harness.\n \n+<a id=\"option-target\"></a>\n ## `--target`: select a target triple to build\n \n This controls which [target](targets/index.md) to produce.\n \n+<a id=\"option-w-warn\"></a>\n ## `-W`: set lint warnings\n \n This flag will set which lints should be set to the [warn level](lints/levels.md#warn).\n \n+<a id=\"option-a-allow\"></a>\n ## `-A`: set lint allowed\n \n This flag will set which lints should be set to the [allow level](lints/levels.md#allow).\n \n+<a id=\"option-d-deny\"></a>\n ## `-D`: set lint denied\n \n This flag will set which lints should be set to the [deny level](lints/levels.md#deny).\n \n+<a id=\"option-f-forbid\"></a>\n ## `-F`: set lint forbidden\n \n This flag will set which lints should be set to the [forbid level](lints/levels.md#forbid).\n \n+<a id=\"option-z-unstable\"></a>\n ## `-Z`: set unstable options\n \n This flag will allow you to set unstable options of rustc. In order to set multiple options,\n the -Z flag can be used multiple times. For example: `rustc -Z verbose -Z time`.\n Specifying options with -Z is only available on nightly. To view all available options\n run: `rustc -Z help`.\n \n+<a id=\"option-cap-lints\"></a>\n ## `--cap-lints`: set the most restrictive lint level\n \n This flag lets you 'cap' lints, for more, [see here](lints/levels.md#capping-lints).\n \n+<a id=\"option-codegen\"></a>\n ## `-C`/`--codegen`: code generation options\n \n This flag will allow you to set [codegen options](codegen-options/index.md).\n \n+<a id=\"option-version\"></a>\n ## `-V`/`--version`: print a version\n \n This flag will print out `rustc`'s version.\n \n+<a id=\"option-verbose\"></a>\n ## `-v`/`--verbose`: use verbose output\n \n This flag, when combined with other flags, makes them produce extra output.\n \n+<a id=\"option-extern\"></a>\n ## `--extern`: specify where an external library is located\n \n This flag allows you to pass the name and location of an external crate that\n will be linked into the crate you are building. This flag may be specified\n multiple times. The format of the value should be `CRATENAME=PATH`.\n \n+<a id=\"option-sysroot\"></a>\n ## `--sysroot`: Override the system root\n \n The \"sysroot\" is where `rustc` looks for the crates that come with the Rust\n distribution; this flag allows that to be overridden.\n \n+<a id=\"option-error-format\"></a>\n ## `--error-format`: control how errors are produced\n- <a id=\"option-error-format\"></a>\n \n This flag lets you control the format of messages. Messages are printed to\n stderr. The valid options are:\n@@ -251,6 +282,7 @@ stderr. The valid options are:\n - `json` \u2014 Structured JSON output. See [the JSON chapter] for more detail.\n - `short` \u2014 Short, one-line messages.\n \n+<a id=\"option-color\"></a>\n ## `--color`: configure coloring of output\n \n This flag lets you control color settings of the output. The valid options\n@@ -260,6 +292,7 @@ are:\n - `always` \u2014\u00a0Always use colors.\n - `never` \u2014\u00a0Never colorize output.\n \n+<a id=\"option-remap-path-prefix\"></a>\n ## `--remap-path-prefix`: remap source names in output\n \n Remap source path prefixes in all output, including compiler diagnostics,\n@@ -274,13 +307,14 @@ replacement is purely textual, with no consideration of the current system's\n pathname syntax. For example `--remap-path-prefix foo=bar` will match\n `foo/lib.rs` but not `./foo/lib.rs`.\n \n+<a id=\"option-json\"></a>\n ## `--json`: configure json messages printed by the compiler\n- <a id=\"option-json\"></a>\n \n-When the `--error-format=json` option is passed to rustc then all of the\n-compiler's diagnostic output will be emitted in the form of JSON blobs. The\n-`--json` argument can be used in conjunction with `--error-format=json` to\n-configure what the JSON blobs contain as well as which ones are emitted.\n+When the [`--error-format=json` option](#option-error-format) is passed to\n+rustc then all of the compiler's diagnostic output will be emitted in the form\n+of JSON blobs. The `--json` argument can be used in conjunction with\n+`--error-format=json` to configure what the JSON blobs contain as well as\n+which ones are emitted.\n \n With `--error-format=json` the compiler will always emit any compiler errors as\n a JSON blob, but the following options are also available to the `--json` flag\n@@ -296,20 +330,23 @@ to customize the output:\n   indicates that the diagnostic should have embedded ANSI color codes intended\n   to be used to colorize the message in the manner rustc typically already does\n   for terminal outputs. Note that this is usefully combined with crates like\n-  `fwdansi` to translate these ANSI codes on Windows to console commands or\n-  `strip-ansi-escapes` if you'd like to optionally remove the ansi colors\n-  afterwards.\n+  [`fwdansi`](https://crates.io/crates/fwdansi) to translate these ANSI codes\n+  on Windows to console commands or\n+  [`strip-ansi-escapes`](https://crates.io/crates/strip-ansi-escapes) if you'd\n+  like to optionally remove the ansi colors afterwards.\n \n - `artifacts` - this instructs rustc to emit a JSON blob for each artifact that\n-  is emitted. An artifact corresponds to a request from the `--emit` CLI\n-  argument, and as soon as the artifact is available on the filesystem a\n-  notification will be emitted.\n+  is emitted. An artifact corresponds to a request from the [`--emit` CLI\n+  argument](#option-emit), and as soon as the artifact is available on the\n+  filesystem a notification will be emitted.\n \n-Note that it is invalid to combine the `--json` argument with the `--color`\n-argument, and it is required to combine `--json` with `--error-format=json`.\n+Note that it is invalid to combine the `--json` argument with the\n+[`--color`](#option-color) argument, and it is required to combine `--json`\n+with `--error-format=json`.\n \n See [the JSON chapter] for more detail.\n \n+<a id=\"at-path\"></a>\n ## `@path`: load command-line flags from a path\n \n If you specify `@path` on the command-line, then it will open `path` and read"}]}