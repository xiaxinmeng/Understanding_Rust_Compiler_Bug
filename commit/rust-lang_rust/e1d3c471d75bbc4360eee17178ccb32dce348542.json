{"sha": "e1d3c471d75bbc4360eee17178ccb32dce348542", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUxZDNjNDcxZDc1YmJjNDM2MGVlZTE3MTc4Y2NiMzJkY2UzNDg1NDI=", "commit": {"author": {"name": "nabijaczleweli", "email": "nabijaczleweli@gmail.com", "date": "2018-03-31T17:12:29Z"}, "committer": {"name": "nabijaczleweli", "email": "nabijaczleweli@gmail.com", "date": "2018-03-31T17:12:29Z"}, "message": "Open the file as write before trying to flush it\n\nThis should be enough and shouldn't require append(true) since we're not\nexplicitly writing anything so we're not flushing it so we've no risk of\noverwriting it", "tree": {"sha": "a7bfd3cd5565b4da4793b5a82a0f24cb7107b123", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a7bfd3cd5565b4da4793b5a82a0f24cb7107b123"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e1d3c471d75bbc4360eee17178ccb32dce348542", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v2\n\niQIcBAABCAAGBQJav8JMAAoJELz9CwGNJljxUgMP/iera88s+0KuCls/esQaJ+hZ\nwuwMK2osIDE9DUgAK3zm+w/eyAeg68RuRANKnx6XmNX0Y9rOGZAwUabz59gZa5p9\nNH/q/qUZOo+lYgKieGgtqQG8NMobgQ1hSA93Uz2K1AU/Idc7oyEBnlF9YTeqtnMQ\naCQRXSpcHyWzU8We2xElMnTHMfba24N2A1ATbSWifUSIbR0SJ7JFm6L72DVIbirI\njrG1xWEBhtj0rBHSq9Aizb9zz88rDvT7NrpS5W1rtBGfTlQPI/bysRuUz3gqoG/F\nZXzT949M9RQO0n9/1sAMQ/b52QWqwUCt55UBxEY6rC0j5iuo+K60pzpWOXNSDjh5\njShF+BNN5E+p4Vj2Hy50OjucQHyjPbENki0y4hWWFGuuzGNlB/HY7YxRfycf0PUJ\nOAevnrThPWKjqfptI9X+Iak/bTcv1NagIKvXf1lr8waVf/Y22OOHaEUmbnoW9Lga\nN9fy0Isu0oqpqbmlpyH6X04bEXui5/Ek3rXtUCtlClGce5nfa+FCjMvDBKl2/2fE\nx/3vS4aT1UUpPzfyk/m5nAdaWNo+ghrnzHoJJ2c0vZrg+Ut3nnR+gkM3/NbI+27e\nrbjcDnlx+46Vl3FWqEMOpyWUYR7KU/BpVcJYRDpX8WV9DG8XACBzK5q49x4lDrC/\nqISASqrGLVhzpOrUS0Jv\n=Wyh/\n-----END PGP SIGNATURE-----", "payload": "tree a7bfd3cd5565b4da4793b5a82a0f24cb7107b123\nparent 3787106be6e3a9be377aecc8600a2e57aa1afb58\nauthor nabijaczleweli <nabijaczleweli@gmail.com> 1522516349 +0200\ncommitter nabijaczleweli <nabijaczleweli@gmail.com> 1522516349 +0200\n\nOpen the file as write before trying to flush it\n\nThis should be enough and shouldn't require append(true) since we're not\nexplicitly writing anything so we're not flushing it so we've no risk of\noverwriting it\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e1d3c471d75bbc4360eee17178ccb32dce348542", "html_url": "https://github.com/rust-lang/rust/commit/e1d3c471d75bbc4360eee17178ccb32dce348542", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e1d3c471d75bbc4360eee17178ccb32dce348542/comments", "author": {"login": "nabijaczleweli", "id": 6709544, "node_id": "MDQ6VXNlcjY3MDk1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6709544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nabijaczleweli", "html_url": "https://github.com/nabijaczleweli", "followers_url": "https://api.github.com/users/nabijaczleweli/followers", "following_url": "https://api.github.com/users/nabijaczleweli/following{/other_user}", "gists_url": "https://api.github.com/users/nabijaczleweli/gists{/gist_id}", "starred_url": "https://api.github.com/users/nabijaczleweli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nabijaczleweli/subscriptions", "organizations_url": "https://api.github.com/users/nabijaczleweli/orgs", "repos_url": "https://api.github.com/users/nabijaczleweli/repos", "events_url": "https://api.github.com/users/nabijaczleweli/events{/privacy}", "received_events_url": "https://api.github.com/users/nabijaczleweli/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nabijaczleweli", "id": 6709544, "node_id": "MDQ6VXNlcjY3MDk1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6709544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nabijaczleweli", "html_url": "https://github.com/nabijaczleweli", "followers_url": "https://api.github.com/users/nabijaczleweli/followers", "following_url": "https://api.github.com/users/nabijaczleweli/following{/other_user}", "gists_url": "https://api.github.com/users/nabijaczleweli/gists{/gist_id}", "starred_url": "https://api.github.com/users/nabijaczleweli/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nabijaczleweli/subscriptions", "organizations_url": "https://api.github.com/users/nabijaczleweli/orgs", "repos_url": "https://api.github.com/users/nabijaczleweli/repos", "events_url": "https://api.github.com/users/nabijaczleweli/events{/privacy}", "received_events_url": "https://api.github.com/users/nabijaczleweli/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3787106be6e3a9be377aecc8600a2e57aa1afb58", "url": "https://api.github.com/repos/rust-lang/rust/commits/3787106be6e3a9be377aecc8600a2e57aa1afb58", "html_url": "https://github.com/rust-lang/rust/commit/3787106be6e3a9be377aecc8600a2e57aa1afb58"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "5da4667af910c3962a38d48e3f1cdb7a07bbcf63", "filename": "src/librustc_trans/back/link.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e1d3c471d75bbc4360eee17178ccb32dce348542/src%2Flibrustc_trans%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e1d3c471d75bbc4360eee17178ccb32dce348542/src%2Flibrustc_trans%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fback%2Flink.rs?ref=e1d3c471d75bbc4360eee17178ccb32dce348542", "patch": "@@ -894,7 +894,7 @@ fn exec_linker(sess: &Session, cmd: &mut Command, out_filename: &Path, tmpdir: &\n \n         if let &Ok(ref out) = command_output {\n             if out.status.success() {\n-                if let Ok(of) = fs::File::open(out_filename) {\n+                if let Ok(of) = fs::OpenOptions::new().write(true).open(out_filename) {\n                     of.sync_all()?;\n                 }\n             }"}]}