{"sha": "28135b79d71e4256f9f0ac76aa8c6c49b3127d09", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4MTM1Yjc5ZDcxZTQyNTZmOWYwYWM3NmFhOGM2YzQ5YjMxMjdkMDk=", "commit": {"author": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2021-03-05T17:04:33Z"}, "committer": {"name": "Michael Howell", "email": "michael@notriddle.com", "date": "2021-03-05T17:04:33Z"}, "message": "Remove redundant enableSearchInput function\n\nenableSearchInput was called from two places:\n\n- setupSearchLoader\n- addSearchOptions, which is itself called from setupSearchLoader only\n\nThis commit can safely get rid of the addSearchOptions calls entirely,\nand since the setupSearchLoader call is immediately preceded by other\nmethod calls on search_input, there's no need to check if it's set.", "tree": {"sha": "0aa0f7298fe25f4fb2b3ffdedaa931ae09f1bd08", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0aa0f7298fe25f4fb2b3ffdedaa931ae09f1bd08"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/28135b79d71e4256f9f0ac76aa8c6c49b3127d09", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/28135b79d71e4256f9f0ac76aa8c6c49b3127d09", "html_url": "https://github.com/rust-lang/rust/commit/28135b79d71e4256f9f0ac76aa8c6c49b3127d09", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/28135b79d71e4256f9f0ac76aa8c6c49b3127d09/comments", "author": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "committer": {"login": "notriddle", "id": 1593513, "node_id": "MDQ6VXNlcjE1OTM1MTM=", "avatar_url": "https://avatars.githubusercontent.com/u/1593513?v=4", "gravatar_id": "", "url": "https://api.github.com/users/notriddle", "html_url": "https://github.com/notriddle", "followers_url": "https://api.github.com/users/notriddle/followers", "following_url": "https://api.github.com/users/notriddle/following{/other_user}", "gists_url": "https://api.github.com/users/notriddle/gists{/gist_id}", "starred_url": "https://api.github.com/users/notriddle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/notriddle/subscriptions", "organizations_url": "https://api.github.com/users/notriddle/orgs", "repos_url": "https://api.github.com/users/notriddle/repos", "events_url": "https://api.github.com/users/notriddle/events{/privacy}", "received_events_url": "https://api.github.com/users/notriddle/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8ccc89bc312caa65ca46b55b47492abdd5b6910a", "url": "https://api.github.com/repos/rust-lang/rust/commits/8ccc89bc312caa65ca46b55b47492abdd5b6910a", "html_url": "https://github.com/rust-lang/rust/commit/8ccc89bc312caa65ca46b55b47492abdd5b6910a"}], "stats": {"total": 12, "additions": 2, "deletions": 10}, "files": [{"sha": "965db73db0a13f4a2f930abdf486bb36ed74201c", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 2, "deletions": 10, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/28135b79d71e4256f9f0ac76aa8c6c49b3127d09/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/28135b79d71e4256f9f0ac76aa8c6c49b3127d09/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=28135b79d71e4256f9f0ac76aa8c6c49b3127d09", "patch": "@@ -2208,7 +2208,7 @@ function defocusSearchBar() {\n             return \"+\";\n         }\n         // button will collapse the section\n-        // note that this text is also set in the HTML template in render.rs\n+        // note that this text is also set in the HTML template in ../render/mod.rs\n         return \"\\u2212\"; // \"\\u2212\" is \"\u2212\" minus sign\n     }\n \n@@ -2851,17 +2851,10 @@ function defocusSearchBar() {\n         });\n     }\n \n-    function enableSearchInput() {\n-        if (search_input) {\n-            search_input.removeAttribute('disabled');\n-        }\n-    }\n-\n     function addSearchOptions(crates) {\n         var elem = document.getElementById(\"crate-search\");\n \n         if (!elem) {\n-            enableSearchInput();\n             return;\n         }\n         var savedCrate = getSettingValue(\"saved-filter-crate\");\n@@ -2880,7 +2873,6 @@ function defocusSearchBar() {\n                 elem.value = savedCrate;\n             }\n         }\n-        enableSearchInput();\n     };\n \n     function buildHelperPopup() {\n@@ -2972,7 +2964,7 @@ function defocusSearchBar() {\n         search_input.addEventListener(\"blur\", function() {\n             search_input.placeholder = search_input.origPlaceholder;\n         });\n-        enableSearchInput();\n+        search_input.removeAttribute('disabled');\n \n         var crateSearchDropDown = document.getElementById(\"crate-search\");\n         crateSearchDropDown.addEventListener(\"focus\", loadSearch);"}]}