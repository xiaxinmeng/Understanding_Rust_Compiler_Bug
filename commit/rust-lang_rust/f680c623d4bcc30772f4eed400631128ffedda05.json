{"sha": "f680c623d4bcc30772f4eed400631128ffedda05", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY2ODBjNjIzZDRiY2MzMDc3MmY0ZWVkNDAwNjMxMTI4ZmZlZGRhMDU=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-04-06T14:17:12Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2016-04-11T17:49:07Z"}, "message": "mir: store the span of a scope in the ScopeData.", "tree": {"sha": "04e643896261121e03893b74c618aad343bbb89f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/04e643896261121e03893b74c618aad343bbb89f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f680c623d4bcc30772f4eed400631128ffedda05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f680c623d4bcc30772f4eed400631128ffedda05", "html_url": "https://github.com/rust-lang/rust/commit/f680c623d4bcc30772f4eed400631128ffedda05", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f680c623d4bcc30772f4eed400631128ffedda05/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4e6b178649b30b060cce043862dbaeedd361f2c7", "url": "https://api.github.com/repos/rust-lang/rust/commits/4e6b178649b30b060cce043862dbaeedd361f2c7", "html_url": "https://github.com/rust-lang/rust/commit/4e6b178649b30b060cce043862dbaeedd361f2c7"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "aacb3aae81c5e1124aa38ee17a6553d7dba74d1c", "filename": "src/librustc/mir/repr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/f680c623d4bcc30772f4eed400631128ffedda05/src%2Flibrustc%2Fmir%2Frepr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f680c623d4bcc30772f4eed400631128ffedda05/src%2Flibrustc%2Fmir%2Frepr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Frepr.rs?ref=f680c623d4bcc30772f4eed400631128ffedda05", "patch": "@@ -698,6 +698,7 @@ impl ScopeId {\n \n #[derive(Clone, Debug, RustcEncodable, RustcDecodable)]\n pub struct ScopeData {\n+    pub span: Span,\n     pub parent_scope: Option<ScopeId>,\n }\n "}, {"sha": "87f0139104952054aad3798c1672bc644a5d5b5f", "filename": "src/librustc/mir/visit.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f680c623d4bcc30772f4eed400631128ffedda05/src%2Flibrustc%2Fmir%2Fvisit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f680c623d4bcc30772f4eed400631128ffedda05/src%2Flibrustc%2Fmir%2Fvisit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmir%2Fvisit.rs?ref=f680c623d4bcc30772f4eed400631128ffedda05", "patch": "@@ -298,9 +298,11 @@ macro_rules! make_mir_visitor {\n             fn super_scope_data(&mut self,\n                                 scope_data: & $($mutability)* ScopeData) {\n                 let ScopeData {\n+                    ref $($mutability)* span,\n                     ref $($mutability)* parent_scope,\n                 } = *scope_data;\n \n+                self.visit_span(span);\n                 if let Some(ref $($mutability)* parent_scope) = *parent_scope {\n                     self.visit_scope_id(parent_scope);\n                 }"}, {"sha": "84fda62067d95910377aa81eafe0372840dcc426", "filename": "src/librustc_mir/build/scope.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f680c623d4bcc30772f4eed400631128ffedda05/src%2Flibrustc_mir%2Fbuild%2Fscope.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f680c623d4bcc30772f4eed400631128ffedda05/src%2Flibrustc_mir%2Fbuild%2Fscope.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fscope.rs?ref=f680c623d4bcc30772f4eed400631128ffedda05", "patch": "@@ -255,7 +255,9 @@ impl<'a,'tcx> Builder<'a,'tcx> {\n         debug!(\"push_scope({:?})\", extent);\n         let parent_id = self.scopes.last().map(|s| s.id);\n         let id = ScopeId::new(self.scope_datas.len());\n+        let tcx = self.hir.tcx();\n         self.scope_datas.push(ScopeData {\n+            span: extent.span(&tcx.region_maps, &tcx.map).unwrap_or(DUMMY_SP),\n             parent_scope: parent_id,\n         });\n         self.scopes.push(Scope {"}]}