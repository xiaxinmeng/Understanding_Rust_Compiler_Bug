{"sha": "bfc9a499c25919b75a87c05beb60e2c76688e7cf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmYzlhNDk5YzI1OTE5Yjc1YTg3YzA1YmViNjBlMmM3NjY4OGU3Y2Y=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-12-30T23:26:49Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-12-30T23:26:49Z"}, "message": "Print usage messages to rustc and rustdoc when invoked with no args. Close #1394.", "tree": {"sha": "7a23dd2d543c0e7b770a83d0dde2793c8bd4fb7f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7a23dd2d543c0e7b770a83d0dde2793c8bd4fb7f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bfc9a499c25919b75a87c05beb60e2c76688e7cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bfc9a499c25919b75a87c05beb60e2c76688e7cf", "html_url": "https://github.com/rust-lang/rust/commit/bfc9a499c25919b75a87c05beb60e2c76688e7cf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bfc9a499c25919b75a87c05beb60e2c76688e7cf/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "90ae3e3168a5d4afb9a81c19b8ad7cc737dac0d8", "url": "https://api.github.com/repos/rust-lang/rust/commits/90ae3e3168a5d4afb9a81c19b8ad7cc737dac0d8", "html_url": "https://github.com/rust-lang/rust/commit/90ae3e3168a5d4afb9a81c19b8ad7cc737dac0d8"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "7f0ad7da3bb26ed89fcff3d654d5aacbe67d9dfc", "filename": "src/comp/driver/rustc.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/bfc9a499c25919b75a87c05beb60e2c76688e7cf/src%2Fcomp%2Fdriver%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bfc9a499c25919b75a87c05beb60e2c76688e7cf/src%2Fcomp%2Fdriver%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Frustc.rs?ref=bfc9a499c25919b75a87c05beb60e2c76688e7cf", "patch": "@@ -61,6 +61,9 @@ options:\n \n fn main(args: [str]) {\n     let args = args, binary = vec::shift(args);\n+\n+    if vec::len(args) == 0u { usage(binary); ret; }\n+\n     let match =\n         alt getopts::getopts(args, opts()) {\n           ok(m) { m }"}, {"sha": "cfa1fbed67693852645d28a29f95dcd7e4e54568", "filename": "src/rustdoc/rustdoc.rs", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bfc9a499c25919b75a87c05beb60e2c76688e7cf/src%2Frustdoc%2Frustdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bfc9a499c25919b75a87c05beb60e2c76688e7cf/src%2Frustdoc%2Frustdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Frustdoc.rs?ref=bfc9a499c25919b75a87c05beb60e2c76688e7cf", "patch": "@@ -179,9 +179,17 @@ fn doc_header(rd: rustdoc, name: str) {\n *  argv[1]: crate file name\",\n   args(argv = \"Command-line arguments.\")\n )]\n+\n fn main(argv: [str]) {\n-    let sess = @{cm: codemap::new_codemap(), mutable next_id: 0};\n+\n     let w = io::stdout();\n+\n+    if vec::len(argv) != 2u {\n+        w.write_str(#fmt(\"usage: %s <input>\\n\", argv[0]));\n+        ret;\n+    }\n+\n+    let sess = @{cm: codemap::new_codemap(), mutable next_id: 0};\n     let rd = { ps: pprust::rust_printer(w), w: w };\n     doc_header(rd, argv[1]);\n     let p = parser::parse_crate_from_source_file(argv[1], [], sess);"}]}