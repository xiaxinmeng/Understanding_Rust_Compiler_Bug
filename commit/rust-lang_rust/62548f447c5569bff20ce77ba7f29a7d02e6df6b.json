{"sha": "62548f447c5569bff20ce77ba7f29a7d02e6df6b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYyNTQ4ZjQ0N2M1NTY5YmZmMjBjZTc3YmE3ZjI5YTdkMDJlNmRmNmI=", "commit": {"author": {"name": "Yati Sagade", "email": "yati.sagade@gmail.com", "date": "2017-04-09T12:20:14Z"}, "committer": {"name": "Yati Sagade", "email": "yati.sagade@gmail.com", "date": "2017-04-09T12:20:14Z"}, "message": "needless_continue: Add ui test\n\nThe test program contains both conditions tested by the lint, i.e.,\na redundant continue in the `if` and `else` blocks within a loop. Maybe\nsplitting them out and also having a program that should *not* trigger\nthe lint warning is better.", "tree": {"sha": "0804713d1d3dcd1b07dc28e86fec549e45fe0dd3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0804713d1d3dcd1b07dc28e86fec549e45fe0dd3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/62548f447c5569bff20ce77ba7f29a7d02e6df6b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/62548f447c5569bff20ce77ba7f29a7d02e6df6b", "html_url": "https://github.com/rust-lang/rust/commit/62548f447c5569bff20ce77ba7f29a7d02e6df6b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/62548f447c5569bff20ce77ba7f29a7d02e6df6b/comments", "author": {"login": "yati-sagade", "id": 966274, "node_id": "MDQ6VXNlcjk2NjI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/966274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yati-sagade", "html_url": "https://github.com/yati-sagade", "followers_url": "https://api.github.com/users/yati-sagade/followers", "following_url": "https://api.github.com/users/yati-sagade/following{/other_user}", "gists_url": "https://api.github.com/users/yati-sagade/gists{/gist_id}", "starred_url": "https://api.github.com/users/yati-sagade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yati-sagade/subscriptions", "organizations_url": "https://api.github.com/users/yati-sagade/orgs", "repos_url": "https://api.github.com/users/yati-sagade/repos", "events_url": "https://api.github.com/users/yati-sagade/events{/privacy}", "received_events_url": "https://api.github.com/users/yati-sagade/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yati-sagade", "id": 966274, "node_id": "MDQ6VXNlcjk2NjI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/966274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yati-sagade", "html_url": "https://github.com/yati-sagade", "followers_url": "https://api.github.com/users/yati-sagade/followers", "following_url": "https://api.github.com/users/yati-sagade/following{/other_user}", "gists_url": "https://api.github.com/users/yati-sagade/gists{/gist_id}", "starred_url": "https://api.github.com/users/yati-sagade/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yati-sagade/subscriptions", "organizations_url": "https://api.github.com/users/yati-sagade/orgs", "repos_url": "https://api.github.com/users/yati-sagade/repos", "events_url": "https://api.github.com/users/yati-sagade/events{/privacy}", "received_events_url": "https://api.github.com/users/yati-sagade/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "69928906f490e52aed6497f9b8f8e5a3ad924477", "url": "https://api.github.com/repos/rust-lang/rust/commits/69928906f490e52aed6497f9b8f8e5a3ad924477", "html_url": "https://github.com/rust-lang/rust/commit/69928906f490e52aed6497f9b8f8e5a3ad924477"}], "stats": {"total": 116, "additions": 116, "deletions": 0}, "files": [{"sha": "b6f9513be448dfb2b59ad38f12e987cc84c7bbc4", "filename": "tests/ui/needless_continue.rs", "status": "added", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/62548f447c5569bff20ce77ba7f29a7d02e6df6b/tests%2Fui%2Fneedless_continue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/62548f447c5569bff20ce77ba7f29a7d02e6df6b/tests%2Fui%2Fneedless_continue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_continue.rs?ref=62548f447c5569bff20ce77ba7f29a7d02e6df6b", "patch": "@@ -0,0 +1,50 @@\n+#![feature(plugin)]\n+#![plugin(clippy)]\n+\n+macro_rules! zero {\n+    ($x:expr) => ($x == 0);\n+}\n+\n+macro_rules! nonzero {\n+    ($x:expr) => (!zero!($x));\n+}\n+\n+#[deny(needless_continue)]\n+fn main() {\n+    let mut i = 1;\n+    while i < 10 {\n+        i += 1;\n+\n+        if i % 2 == 0 && i % 3 == 0 {\n+            println!(\"{}\", i);\n+            println!(\"{}\", i+1);\n+            if i % 5 == 0 {\n+                println!(\"{}\", i+2);\n+            }\n+            let i = 0;\n+            println!(\"bar {} \", i);\n+        } else {\n+            continue;\n+        }\n+\n+        println!(\"bleh\");\n+        {\n+            println!(\"blah\");\n+        }\n+\n+        // some comments that also should ideally be included in the\n+        // output of the lint suggestion if possible.\n+        if !(!(i == 2) || !(i == 5)) {\n+            println!(\"lama\");\n+        }\n+\n+        if (zero!(i % 2) || nonzero!(i % 5)) && i % 3 != 0 {\n+            continue;\n+        } else {\n+            println!(\"Blabber\");\n+            println!(\"Jabber\");\n+        }\n+\n+        println!(\"bleh\");\n+    }\n+}"}, {"sha": "e8433ef9f747ad35c732509b45f5f9ded7769dbd", "filename": "tests/ui/needless_continue.stderr", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/rust-lang/rust/blob/62548f447c5569bff20ce77ba7f29a7d02e6df6b/tests%2Fui%2Fneedless_continue.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/62548f447c5569bff20ce77ba7f29a7d02e6df6b/tests%2Fui%2Fneedless_continue.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fneedless_continue.stderr?ref=62548f447c5569bff20ce77ba7f29a7d02e6df6b", "patch": "@@ -0,0 +1,66 @@\n+error: This else block is redundant.\n+\n+  --> $DIR/needless_continue.rs:26:16\n+   |\n+26 |           } else {\n+   |  ________________^ starting here...\n+27 | |             continue;\n+28 | |         }\n+   | |_________^ ...ending here\n+   |\n+note: lint level defined here\n+  --> $DIR/needless_continue.rs:12:8\n+   |\n+12 | #[deny(needless_continue)]\n+   |        ^^^^^^^^^^^^^^^^^\n+   = help: Consider dropping the else clause and merging the code that follows (in the loop) with the if block, like so:\n+           if i % 2 == 0 && i % 3 == 0 {\n+               println!(\"{}\", i);\n+               println!(\"{}\", i+1);\n+               if i % 5 == 0 {\n+                   println!(\"{}\", i+2);\n+               }\n+               let i = 0;\n+               println!(\"bar {} \", i);\n+           \n+               // Merged code follows...\n+               println!(\"bleh\");\n+               {\n+                   println!(\"blah\");\n+               }\n+               if !(!(i == 2) || !(i == 5)) {\n+                   println!(\"lama\");\n+               }\n+               if (zero!(i % 2) || nonzero!(i % 5)) && i % 3 != 0 {\n+                   continue;\n+               } else {\n+                   println!(\"Blabber\");\n+                   println!(\"Jabber\");\n+               }\n+               println!(\"bleh\");\n+           }\n+           \n+\n+error: There is no need for an explicit `else` block for this `if` expression\n+\n+  --> $DIR/needless_continue.rs:41:9\n+   |\n+41 |           if (zero!(i % 2) || nonzero!(i % 5)) && i % 3 != 0 {\n+   |  _________^ starting here...\n+42 | |             continue;\n+43 | |         } else {\n+44 | |             println!(\"Blabber\");\n+45 | |             println!(\"Jabber\");\n+46 | |         }\n+   | |_________^ ...ending here\n+   |\n+   = help: Consider dropping the else clause, and moving out the code in the else block, like so:\n+           if (zero!(i % 2) || nonzero!(i % 5)) && i % 3 != 0 {\n+               continue;\n+           }\n+           println!(\"Blabber\");\n+           println!(\"Jabber\");\n+           ...\n+\n+error: aborting due to 2 previous errors\n+"}]}