{"sha": "d9f60bcf67ea175ab3298608d8a94563e1ac0f6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5ZjYwYmNmNjdlYTE3NWFiMzI5ODYwOGQ4YTk0NTYzZTFhYzBmNmQ=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-03-10T21:31:27Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-03-20T16:25:03Z"}, "message": "add a test for rustc_layout(debug)", "tree": {"sha": "2235226464268b99d1e1ce6f655c9969b91b8338", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2235226464268b99d1e1ce6f655c9969b91b8338"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d", "html_url": "https://github.com/rust-lang/rust/commit/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "55c2cf2a3214cc3be11d9e27da5aa419653cac0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/55c2cf2a3214cc3be11d9e27da5aa419653cac0c", "html_url": "https://github.com/rust-lang/rust/commit/55c2cf2a3214cc3be11d9e27da5aa419653cac0c"}], "stats": {"total": 127, "additions": 127, "deletions": 0}, "files": [{"sha": "64a02ee5a22c821cd5fa8da119ef16a2a6d76d3f", "filename": "src/test/ui/layout/debug.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d/src%2Ftest%2Fui%2Flayout%2Fdebug.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d/src%2Ftest%2Fui%2Flayout%2Fdebug.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flayout%2Fdebug.rs?ref=d9f60bcf67ea175ab3298608d8a94563e1ac0f6d", "patch": "@@ -0,0 +1,7 @@\n+#![feature(never_type, rustc_attrs)]\n+#![crate_type = \"lib\"]\n+\n+enum E { Foo, Bar(!, i32, i32) }\n+\n+#[rustc_layout(debug)]\n+type Test = E; //~ ERROR: layout debugging"}, {"sha": "df8b70f307074d4c5c4a1cb9d5f8edf42946f529", "filename": "src/test/ui/layout/debug.stderr", "status": "added", "additions": 120, "deletions": 0, "changes": 120, "blob_url": "https://github.com/rust-lang/rust/blob/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d/src%2Ftest%2Fui%2Flayout%2Fdebug.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d9f60bcf67ea175ab3298608d8a94563e1ac0f6d/src%2Ftest%2Fui%2Flayout%2Fdebug.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flayout%2Fdebug.stderr?ref=d9f60bcf67ea175ab3298608d8a94563e1ac0f6d", "patch": "@@ -0,0 +1,120 @@\n+error: layout debugging: LayoutDetails {\n+    fields: Arbitrary {\n+        offsets: [\n+            Size {\n+                raw: 0,\n+            },\n+        ],\n+        memory_index: [\n+            0,\n+        ],\n+    },\n+    variants: Multiple {\n+        discr: Scalar {\n+            value: Int(\n+                I32,\n+                false,\n+            ),\n+            valid_range: 0..=0,\n+        },\n+        discr_kind: Tag,\n+        discr_index: 0,\n+        variants: [\n+            LayoutDetails {\n+                fields: Arbitrary {\n+                    offsets: [],\n+                    memory_index: [],\n+                },\n+                variants: Single {\n+                    index: 0,\n+                },\n+                abi: Aggregate {\n+                    sized: true,\n+                },\n+                largest_niche: None,\n+                align: AbiAndPrefAlign {\n+                    abi: Align {\n+                        pow2: 0,\n+                    },\n+                    pref: Align {\n+                        pow2: 3,\n+                    },\n+                },\n+                size: Size {\n+                    raw: 4,\n+                },\n+            },\n+            LayoutDetails {\n+                fields: Arbitrary {\n+                    offsets: [\n+                        Size {\n+                            raw: 4,\n+                        },\n+                        Size {\n+                            raw: 4,\n+                        },\n+                        Size {\n+                            raw: 8,\n+                        },\n+                    ],\n+                    memory_index: [\n+                        0,\n+                        1,\n+                        2,\n+                    ],\n+                },\n+                variants: Single {\n+                    index: 1,\n+                },\n+                abi: Uninhabited,\n+                largest_niche: None,\n+                align: AbiAndPrefAlign {\n+                    abi: Align {\n+                        pow2: 2,\n+                    },\n+                    pref: Align {\n+                        pow2: 3,\n+                    },\n+                },\n+                size: Size {\n+                    raw: 12,\n+                },\n+            },\n+        ],\n+    },\n+    abi: Aggregate {\n+        sized: true,\n+    },\n+    largest_niche: Some(\n+        Niche {\n+            offset: Size {\n+                raw: 0,\n+            },\n+            scalar: Scalar {\n+                value: Int(\n+                    I32,\n+                    false,\n+                ),\n+                valid_range: 0..=0,\n+            },\n+        },\n+    ),\n+    align: AbiAndPrefAlign {\n+        abi: Align {\n+            pow2: 2,\n+        },\n+        pref: Align {\n+            pow2: 3,\n+        },\n+    },\n+    size: Size {\n+        raw: 12,\n+    },\n+}\n+  --> $DIR/debug.rs:7:1\n+   |\n+LL | type Test = E;\n+   | ^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+"}]}