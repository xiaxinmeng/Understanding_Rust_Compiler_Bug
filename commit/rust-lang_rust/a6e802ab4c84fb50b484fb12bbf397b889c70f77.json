{"sha": "a6e802ab4c84fb50b484fb12bbf397b889c70f77", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2ZTgwMmFiNGM4NGZiNTBiNDg0ZmIxMmJiZjM5N2I4ODljNzBmNzc=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2019-04-05T09:32:45Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2019-04-05T09:32:45Z"}, "message": "Add regression test for #59137.", "tree": {"sha": "ce1953865dba489fdc4b88b0feed0f548a0244ca", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ce1953865dba489fdc4b88b0feed0f548a0244ca"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a6e802ab4c84fb50b484fb12bbf397b889c70f77", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a6e802ab4c84fb50b484fb12bbf397b889c70f77", "html_url": "https://github.com/rust-lang/rust/commit/a6e802ab4c84fb50b484fb12bbf397b889c70f77", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a6e802ab4c84fb50b484fb12bbf397b889c70f77/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ef648f4a4936700c7ebf85f82cbcba29a6187bcc", "url": "https://api.github.com/repos/rust-lang/rust/commits/ef648f4a4936700c7ebf85f82cbcba29a6187bcc", "html_url": "https://github.com/rust-lang/rust/commit/ef648f4a4936700c7ebf85f82cbcba29a6187bcc"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "ab8ee6c2ef7e11aa80d0824c9c072ea467c7b378", "filename": "src/test/run-make-fulldeps/lto-dylib-dep/Makefile", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/a6e802ab4c84fb50b484fb12bbf397b889c70f77/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/a6e802ab4c84fb50b484fb12bbf397b889c70f77/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2FMakefile?ref=a6e802ab4c84fb50b484fb12bbf397b889c70f77", "patch": "@@ -0,0 +1,10 @@\n+-include ../tools.mk\n+\n+# Test that we don't run into an assertion when using a Rust dylib dependency\n+# while compiling with full LTO.\n+# See https://github.com/rust-lang/rust/issues/59137\n+\n+all:\n+\t$(RUSTC) a_dylib.rs --crate-type=dylib -C prefer-dynamic\n+\t$(RUSTC) main.rs -C lto\n+\t$(call RUN,main)"}, {"sha": "c5a35296f89ed8342304b4a975eba225f4c6068d", "filename": "src/test/run-make-fulldeps/lto-dylib-dep/a_dylib.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a6e802ab4c84fb50b484fb12bbf397b889c70f77/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2Fa_dylib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6e802ab4c84fb50b484fb12bbf397b889c70f77/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2Fa_dylib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2Fa_dylib.rs?ref=a6e802ab4c84fb50b484fb12bbf397b889c70f77", "patch": "@@ -0,0 +1,4 @@\n+\n+pub fn foo() {\n+    println!(\"bar\");\n+}"}, {"sha": "af0955e7f3520fa7c36483156c465092e9a4de82", "filename": "src/test/run-make-fulldeps/lto-dylib-dep/main.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a6e802ab4c84fb50b484fb12bbf397b889c70f77/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a6e802ab4c84fb50b484fb12bbf397b889c70f77/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Flto-dylib-dep%2Fmain.rs?ref=a6e802ab4c84fb50b484fb12bbf397b889c70f77", "patch": "@@ -0,0 +1,6 @@\n+\n+extern crate a_dylib;\n+\n+fn main() {\n+    a_dylib::foo();\n+}"}]}