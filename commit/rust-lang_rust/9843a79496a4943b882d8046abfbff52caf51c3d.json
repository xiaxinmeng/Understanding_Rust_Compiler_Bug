{"sha": "9843a79496a4943b882d8046abfbff52caf51c3d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk4NDNhNzk0OTZhNDk0M2I4ODJkODA0NmFiZmJmZjUyY2FmNTFjM2Q=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2019-05-20T21:37:24Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2019-05-20T21:37:24Z"}, "message": "Finalize AWS install", "tree": {"sha": "fe172131c646aca29a84690b0a40c15281840a4f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fe172131c646aca29a84690b0a40c15281840a4f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9843a79496a4943b882d8046abfbff52caf51c3d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9843a79496a4943b882d8046abfbff52caf51c3d", "html_url": "https://github.com/rust-lang/rust/commit/9843a79496a4943b882d8046abfbff52caf51c3d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9843a79496a4943b882d8046abfbff52caf51c3d/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "12f370156ddcdff567e7b0acf83cdf871a997a0a", "url": "https://api.github.com/repos/rust-lang/rust/commits/12f370156ddcdff567e7b0acf83cdf871a997a0a", "html_url": "https://github.com/rust-lang/rust/commit/12f370156ddcdff567e7b0acf83cdf871a997a0a"}], "stats": {"total": 29, "additions": 13, "deletions": 16}, "files": [{"sha": "dfe54e65e4ecc90637f107c65435a696389d1285", "filename": ".azure-pipelines/steps/run.yml", "status": "modified", "additions": 13, "deletions": 16, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/9843a79496a4943b882d8046abfbff52caf51c3d/.azure-pipelines%2Fsteps%2Frun.yml", "raw_url": "https://github.com/rust-lang/rust/raw/9843a79496a4943b882d8046abfbff52caf51c3d/.azure-pipelines%2Fsteps%2Frun.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.azure-pipelines%2Fsteps%2Frun.yml?ref=9843a79496a4943b882d8046abfbff52caf51c3d", "patch": "@@ -8,22 +8,6 @@\n \n steps:\n \n-# Ensure the `aws` CLI is installed so we can deploy later on, cache docker\n-# images, etc.\n-- bash: |\n-    set -e\n-    sudo apt-get install -y python3-setuptools\n-    pip3 install awscli --upgrade --user\n-    echo \"##vso[task.prependpath]$HOME/.local/bin\"\n-  displayName: Install awscli (Linux)\n-  condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))\n-- script: pip install awscli\n-  displayName: Install awscli (non-Linux)\n-  condition: and(succeeded(), ne(variables['Agent.OS'], 'Linux'))\n-\n-- bash: aws s3 help\n-- bash: exit 1\n-\n - checkout: self\n   fetchDepth: 2\n \n@@ -67,6 +51,19 @@ steps:\n   condition: and(succeeded(), eq(variables['Agent.OS'], 'Windows_NT'))\n   displayName: Check out submodules (Windows)\n \n+# Ensure the `aws` CLI is installed so we can deploy later on, cache docker\n+# images, etc.\n+- bash: |\n+    set -e\n+    sudo apt-get install -y python3-setuptools\n+    pip3 install awscli --upgrade --user\n+    echo \"##vso[task.prependpath]$HOME/.local/bin\"\n+  displayName: Install awscli (Linux)\n+  condition: and(succeeded(), eq(variables['Agent.OS'], 'Linux'))\n+- script: pip install awscli\n+  displayName: Install awscli (non-Linux)\n+  condition: and(succeeded(), ne(variables['Agent.OS'], 'Linux'))\n+\n # Configure our CI_JOB_NAME variable which log analyzers can use for the main\n # step to see what's going on.\n - bash: echo \"##vso[task.setvariable variable=CI_JOB_NAME]$SYSTEM_JOBNAME\""}]}