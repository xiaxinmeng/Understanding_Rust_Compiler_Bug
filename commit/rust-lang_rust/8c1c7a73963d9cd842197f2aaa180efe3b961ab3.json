{"sha": "8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjMWM3YTczOTYzZDljZDg0MjE5N2YyYWFhMTgwZWZlM2I5NjFhYjM=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2021-03-24T00:52:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-03-24T00:52:32Z"}, "message": "Rollup merge of #83393 - GuillaumeGomez:codeblock-tooltip-position, r=Nemo157\n\nCodeblock tooltip position\n\nThe codeblocks tooltips were misplaced. Normally, there is no top margin applied to a tooltip unless the codeblock is the first element of the doc block. The CSS rule was too vague though, applying it to all tooltips where the codeblock was the first child of its parent. Which can be easily seen with lists:\n\nBefore:\n\n![Screenshot from 2021-03-22 22-05-16](https://user-images.githubusercontent.com/3050060/112059812-a667ba80-8b5c-11eb-88dd-1c598ceb3766.png)\n\nAfter:\n\n![Screenshot from 2021-03-22 22-06-31](https://user-images.githubusercontent.com/3050060/112059815-a7005100-8b5c-11eb-9e40-8fc57513e498.png)\n\nr? ``@Nemo157``", "tree": {"sha": "69e601b97b8e56d6e2d34a67b41535c0fe5676cf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69e601b97b8e56d6e2d34a67b41535c0fe5676cf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgWo1RCRBK7hj4Ov3rIwAAdHIIAJpR3kBxKlHF8EfD9Ap51dB9\n/PJnIA39VVM9SnKnsaKJtzsEQlNXTtWE8L9xNP3izZEIiM1q+W84mFBazdN4SSgO\n2fa7sUoq540vJPoPTu9jZXcnb0Ax1t6VoP1NGHKmA8aN55fKcyPfi4dEqsqQLH76\nnn4hLMlNtb6xixCu3LpUAWqMO11UCcckVY2Sn5xUDDyLSHu8jNsmUtvytzHiczf5\nbZJMFprCitYKqCKasEdt2x3XCZ7uNvKCBYz7sTUwdlOLqobDQBq/1a1SN/FFSFVE\nBqabt57v9XCrbRZQiecUKXzJoymkv3NI5h1yh6DuweJbrzEvyduXHOPgyYxZXSU=\n=dqQC\n-----END PGP SIGNATURE-----\n", "payload": "tree 69e601b97b8e56d6e2d34a67b41535c0fe5676cf\nparent 2b53ec3d1e2acc416b069278dd55169452037850\nparent 6c80deb4a5b8e9ec6dcf03e504461ec71eab69f1\nauthor Dylan DPC <dylan.dpc@gmail.com> 1616547152 +0100\ncommitter GitHub <noreply@github.com> 1616547152 +0100\n\nRollup merge of #83393 - GuillaumeGomez:codeblock-tooltip-position, r=Nemo157\n\nCodeblock tooltip position\n\nThe codeblocks tooltips were misplaced. Normally, there is no top margin applied to a tooltip unless the codeblock is the first element of the doc block. The CSS rule was too vague though, applying it to all tooltips where the codeblock was the first child of its parent. Which can be easily seen with lists:\n\nBefore:\n\n![Screenshot from 2021-03-22 22-05-16](https://user-images.githubusercontent.com/3050060/112059812-a667ba80-8b5c-11eb-88dd-1c598ceb3766.png)\n\nAfter:\n\n![Screenshot from 2021-03-22 22-06-31](https://user-images.githubusercontent.com/3050060/112059815-a7005100-8b5c-11eb-9e40-8fc57513e498.png)\n\nr? ``@Nemo157``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "html_url": "https://github.com/rust-lang/rust/commit/8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2b53ec3d1e2acc416b069278dd55169452037850", "url": "https://api.github.com/repos/rust-lang/rust/commits/2b53ec3d1e2acc416b069278dd55169452037850", "html_url": "https://github.com/rust-lang/rust/commit/2b53ec3d1e2acc416b069278dd55169452037850"}, {"sha": "6c80deb4a5b8e9ec6dcf03e504461ec71eab69f1", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c80deb4a5b8e9ec6dcf03e504461ec71eab69f1", "html_url": "https://github.com/rust-lang/rust/commit/6c80deb4a5b8e9ec6dcf03e504461ec71eab69f1"}], "stats": {"total": 29, "additions": 24, "deletions": 5}, "files": [{"sha": "2842bf4ba7fdf39b1acebad6fe8ea5eae7f9b4aa", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "patch": "@@ -1353,7 +1353,7 @@ h4 > .notable-traits {\n \tto prevent an overlay between the \"collapse toggle\" and the information tooltip.\n \tHowever, it's not needed with smaller screen width because the doc/code block is always put\n \t\"one line\" below. */\n-\t.information:first-child > .tooltip {\n+\t.docblock > .information:first-child > .tooltip {\n \t\tmargin-top: 16px;\n \t}\n }"}, {"sha": "9aa72a3ad53e746ddc599b253dc31410b318071f", "filename": "src/test/rustdoc-gui/check_info_sign_position.goml", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fcheck_info_sign_position.goml?ref=8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "patch": "@@ -0,0 +1,9 @@\n+goto: file://|DOC_PATH|/index.html\n+goto: ./fn.check_list_code_block.html\n+// If the codeblock is the first element of the docblock, the information tooltip must have\n+// have some top margin to avoid going over the toggle (the \"[+]\").\n+assert: (\".docblock > .information > .compile_fail\", { \"margin-top\": \"16px\" })\n+// Checks that the other codeblocks don't have this top margin.\n+assert: (\"ol > li > .information > .compile_fail\", { \"margin-top\": \"0px\" })\n+assert: (\"ol > li > .information > .ignore\", { \"margin-top\": \"0px\" })\n+assert: (\".docblock > .information > .ignore\", { \"margin-top\": \"0px\" })"}, {"sha": "c1e161e123588cdbe22622be63152f55d5297ef8", "filename": "src/test/rustdoc-gui/lib.rs", "status": "modified", "additions": 14, "deletions": 4, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/src%2Ftest%2Frustdoc-gui%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c1c7a73963d9cd842197f2aaa180efe3b961ab3/src%2Ftest%2Frustdoc-gui%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Flib.rs?ref=8c1c7a73963d9cd842197f2aaa180efe3b961ab3", "patch": "@@ -62,16 +62,26 @@ pub trait AnotherOne {\n     fn hello();\n }\n \n+/// ```compile_fail\n+/// whatever\n+/// ```\n+///\n /// Check for \"i\" signs in lists!\n ///\n /// 1. elem 1\n-/// 2.test 1\n-///   ```compile_fail\n-///   fn foo() {}\n-///   ```\n+/// 2. test 1\n+///    ```compile_fail\n+///    fn foo() {}\n+///    ```\n /// 3. elem 3\n /// 4. ```ignore (it's a test)\n ///    fn foo() {}\n ///    ```\n /// 5. elem 5\n+///\n+/// Final one:\n+///\n+/// ```ignore (still a test)\n+/// let x = 12;\n+/// ```\n pub fn check_list_code_block() {}"}]}