{"sha": "4ea78d4c844bfff0efbc5043efd04f40e44c9b01", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRlYTc4ZDRjODQ0YmZmZjBlZmJjNTA0M2VmZDA0ZjQwZTQ0YzliMDE=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-14T08:29:42Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-03-14T16:15:44Z"}, "message": "Rollup merge of #48765 - Phlosioneer:10234-wall-help-message, r=estebank\n\nAdd info message for -Wall command\n\nUsers coming from other languages (namely C and C++) often expect\nto use a -Wall flag. Rustc doesn't support that, and previously it\nsimply printed that it didn't recognize the \"all\" lint.\n\nThis change makes rustc print out a help message, explaining:\n- Why there is no -Wall flag\n- How to view all the available warnings\n- Point out that the most commonly used warning is -Wunused\n- Instead of using a command-line flag, the user should consider\n  a !#[warn(unused)] directive in the root of their crate.\n\nI tried to keep the language consistent with the other usage help. Comment if I should change anything.\n\ncloses #10234, if accepted.", "tree": {"sha": "9f91c28c792977f97cb136370e64f9b6ad64e876", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9f91c28c792977f97cb136370e64f9b6ad64e876"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4ea78d4c844bfff0efbc5043efd04f40e44c9b01", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlqpSrAACgkQ/vbIBR0O\nATzUsBAAm22FmiaX+vzPeVaMsvmEXfB/AQQx0g+raBQsDYZVmLbwVc8scJAOqHdl\n/mF899WJ/pXIGjPgTmsXs72GE9DpAs9WSSS5XFOC0OdOp1HBz4IUMdzxU7V8kwl2\ntHlR0opMCPzKDa1V/ogwwNvSmq1oJR+QQzZ8rF7gYRDCj8cyWJTw1xPf6bmyMpCs\nBYEk68ekPRMxgB/9nzXOuXT+QstJSi2EAT2BDiDobMRKHVejU6uehaJoMsg7UxCz\n9UdnytupHN0P+eD7vvgBSLcVMMcgyBtWPqjz7daXmmBuqimcUYhT6wBkqbN73dYx\nxH9jXunjA6AE13w66bz2teo/sLpc06Yq5FkLhwNmkpt2cNJmYMLSTQtaBK2yybZ3\n1zib4tXdiDrNqh23B6PvxiPaT2GMaU0H1/ESexWvAy/FPUo4xwj9JDpVAvgwCGXe\n4ccMSi7wBvwNxOsbLs5akIRLImJDS9aRPLQFCD6MH8jWRudcHbMi4tbBWbEk4xbz\nVnzoKx//5VR4pLAKsNUxsJHgZM20QkEx4dwroKTn+H55zYc3yigE9yaSdJf0V99t\nq9hVJxB4v1cDylxN3owVyx3R6N5j9ktgUuF+U5g8m5vMrB24plsUmMKxMoPKmB/g\nIiBkAZkdCWHi4RWlM4W/uwag6hvu7O4pFNzeO4uTGU9gl4+9UQQ=\n=ukmb\n-----END PGP SIGNATURE-----", "payload": "tree 9f91c28c792977f97cb136370e64f9b6ad64e876\nparent d089fe974edc53fa34384e8e76eeb1eca0d89042\nparent c1337cda4ccf349b8a5a80156e32c2499520b621\nauthor kennytm <kennytm@gmail.com> 1521016182 +0800\ncommitter kennytm <kennytm@gmail.com> 1521044144 +0800\n\nRollup merge of #48765 - Phlosioneer:10234-wall-help-message, r=estebank\n\nAdd info message for -Wall command\n\nUsers coming from other languages (namely C and C++) often expect\nto use a -Wall flag. Rustc doesn't support that, and previously it\nsimply printed that it didn't recognize the \"all\" lint.\n\nThis change makes rustc print out a help message, explaining:\n- Why there is no -Wall flag\n- How to view all the available warnings\n- Point out that the most commonly used warning is -Wunused\n- Instead of using a command-line flag, the user should consider\n  a !#[warn(unused)] directive in the root of their crate.\n\nI tried to keep the language consistent with the other usage help. Comment if I should change anything.\n\ncloses #10234, if accepted.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4ea78d4c844bfff0efbc5043efd04f40e44c9b01", "html_url": "https://github.com/rust-lang/rust/commit/4ea78d4c844bfff0efbc5043efd04f40e44c9b01", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4ea78d4c844bfff0efbc5043efd04f40e44c9b01/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d089fe974edc53fa34384e8e76eeb1eca0d89042", "url": "https://api.github.com/repos/rust-lang/rust/commits/d089fe974edc53fa34384e8e76eeb1eca0d89042", "html_url": "https://github.com/rust-lang/rust/commit/d089fe974edc53fa34384e8e76eeb1eca0d89042"}, {"sha": "c1337cda4ccf349b8a5a80156e32c2499520b621", "url": "https://api.github.com/repos/rust-lang/rust/commits/c1337cda4ccf349b8a5a80156e32c2499520b621", "html_url": "https://github.com/rust-lang/rust/commit/c1337cda4ccf349b8a5a80156e32c2499520b621"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "4974e6f24a8d2f2be9761771510d51d51a12e7f9", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/4ea78d4c844bfff0efbc5043efd04f40e44c9b01/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4ea78d4c844bfff0efbc5043efd04f40e44c9b01/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=4ea78d4c844bfff0efbc5043efd04f40e44c9b01", "patch": "@@ -1147,6 +1147,15 @@ fn usage(verbose: bool, include_unstable_options: bool) {\n              verbose_help);\n }\n \n+fn print_wall_help() {\n+    println!(\"\n+The flag `-Wall` does not exist in `rustc`. Most useful lints are enabled by\n+default. Use `rustc -W help` to see all available lints. It's more common to put\n+warning settings in the crate root using `#![warn(LINT_NAME)]` instead of using\n+the command line flag directly.\n+\");\n+}\n+\n fn describe_lints(sess: &Session, lint_store: &lint::LintStore, loaded_plugins: bool) {\n     println!(\"\n Available lint options:\n@@ -1391,6 +1400,13 @@ pub fn handle_options(args: &[String]) -> Option<getopts::Matches> {\n         return None;\n     }\n \n+    // Handle the special case of -Wall.\n+    let wall = matches.opt_strs(\"W\");\n+    if wall.iter().any(|x| *x == \"all\") {\n+        print_wall_help();\n+        return None;\n+    }\n+\n     // Don't handle -W help here, because we might first load plugins.\n     let r = matches.opt_strs(\"Z\");\n     if r.iter().any(|x| *x == \"help\") {"}]}