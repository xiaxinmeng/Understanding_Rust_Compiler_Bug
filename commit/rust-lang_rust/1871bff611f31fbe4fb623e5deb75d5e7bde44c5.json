{"sha": "1871bff611f31fbe4fb623e5deb75d5e7bde44c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4NzFiZmY2MTFmMzFmYmU0ZmI2MjNlNWRlYjc1ZDVlN2JkZTQ0YzU=", "commit": {"author": {"name": "Corey Farwell", "email": "coreyf@rwell.org", "date": "2017-02-13T15:58:51Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-02-13T15:58:51Z"}, "message": "Rollup merge of #39759 - binarycrusader:master, r=alexcrichton\n\nadd solaris rustbuild support\n\nAdd Solaris as recognized ostype\nAdd cputype recognition for Solaris\n\nFixes #39729\n\nA future pull request will discriminate between the commercial release and older opensource derivatives to account for divergence, for now, this is compatible with both.", "tree": {"sha": "84f5d09394dd22a6386539c786160afd342d0c1e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/84f5d09394dd22a6386539c786160afd342d0c1e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1871bff611f31fbe4fb623e5deb75d5e7bde44c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1871bff611f31fbe4fb623e5deb75d5e7bde44c5", "html_url": "https://github.com/rust-lang/rust/commit/1871bff611f31fbe4fb623e5deb75d5e7bde44c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1871bff611f31fbe4fb623e5deb75d5e7bde44c5/comments", "author": {"login": "frewsxcv", "id": 416575, "node_id": "MDQ6VXNlcjQxNjU3NQ==", "avatar_url": "https://avatars.githubusercontent.com/u/416575?v=4", "gravatar_id": "", "url": "https://api.github.com/users/frewsxcv", "html_url": "https://github.com/frewsxcv", "followers_url": "https://api.github.com/users/frewsxcv/followers", "following_url": "https://api.github.com/users/frewsxcv/following{/other_user}", "gists_url": "https://api.github.com/users/frewsxcv/gists{/gist_id}", "starred_url": "https://api.github.com/users/frewsxcv/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/frewsxcv/subscriptions", "organizations_url": "https://api.github.com/users/frewsxcv/orgs", "repos_url": "https://api.github.com/users/frewsxcv/repos", "events_url": "https://api.github.com/users/frewsxcv/events{/privacy}", "received_events_url": "https://api.github.com/users/frewsxcv/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "41487111b1e85e9e4b5ecfcdb5921ef761d5a4f2", "url": "https://api.github.com/repos/rust-lang/rust/commits/41487111b1e85e9e4b5ecfcdb5921ef761d5a4f2", "html_url": "https://github.com/rust-lang/rust/commit/41487111b1e85e9e4b5ecfcdb5921ef761d5a4f2"}, {"sha": "3807e1f393e3022dcf686e2109eda1fb34eb22c9", "url": "https://api.github.com/repos/rust-lang/rust/commits/3807e1f393e3022dcf686e2109eda1fb34eb22c9", "html_url": "https://github.com/rust-lang/rust/commit/3807e1f393e3022dcf686e2109eda1fb34eb22c9"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "caf2402f40c4baed766601db6158fee60bc98b33", "filename": "src/bootstrap/bootstrap.py", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/1871bff611f31fbe4fb623e5deb75d5e7bde44c5/src%2Fbootstrap%2Fbootstrap.py", "raw_url": "https://github.com/rust-lang/rust/raw/1871bff611f31fbe4fb623e5deb75d5e7bde44c5/src%2Fbootstrap%2Fbootstrap.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbootstrap.py?ref=1871bff611f31fbe4fb623e5deb75d5e7bde44c5", "patch": "@@ -315,7 +315,7 @@ def build_triple(self):\n         try:\n             ostype = subprocess.check_output(['uname', '-s']).strip().decode(default_encoding)\n             cputype = subprocess.check_output(['uname', '-m']).strip().decode(default_encoding)\n-        except (subprocess.CalledProcessError, WindowsError):\n+        except (subprocess.CalledProcessError, OSError):\n             if sys.platform == 'win32':\n                 return 'x86_64-pc-windows-msvc'\n             err = \"uname not found\"\n@@ -345,6 +345,21 @@ def build_triple(self):\n             ostype = 'unknown-openbsd'\n         elif ostype == 'NetBSD':\n             ostype = 'unknown-netbsd'\n+        elif ostype == 'SunOS':\n+            ostype = 'sun-solaris'\n+            # On Solaris, uname -m will return a machine classification instead\n+            # of a cpu type, so uname -p is recommended instead.  However, the\n+            # output from that option is too generic for our purposes (it will\n+            # always emit 'i386' on x86/amd64 systems).  As such, isainfo -k\n+            # must be used instead.\n+            try:\n+                cputype = subprocess.check_output(['isainfo',\n+                  '-k']).strip().decode(default_encoding)\n+            except (subprocess.CalledProcessError, OSError):\n+                err = \"isainfo not found\"\n+                if self.verbose:\n+                    raise Exception(err)\n+                sys.exit(err)\n         elif ostype == 'Darwin':\n             ostype = 'apple-darwin'\n         elif ostype.startswith('MINGW'):"}, {"sha": "ea0d76978339df730973b7ca36387c5ab54ade96", "filename": "src/libunwind/build.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1871bff611f31fbe4fb623e5deb75d5e7bde44c5/src%2Flibunwind%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1871bff611f31fbe4fb623e5deb75d5e7bde44c5/src%2Flibunwind%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibunwind%2Fbuild.rs?ref=1871bff611f31fbe4fb623e5deb75d5e7bde44c5", "patch": "@@ -27,6 +27,8 @@ fn main() {\n         println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"openbsd\") {\n         println!(\"cargo:rustc-link-lib=gcc\");\n+    } else if target.contains(\"solaris\") {\n+        println!(\"cargo:rustc-link-lib=gcc_s\");\n     } else if target.contains(\"bitrig\") {\n         println!(\"cargo:rustc-link-lib=c++abi\");\n     } else if target.contains(\"dragonfly\") {"}]}