{"sha": "0b7e2376c82b901ff151d5755d17ffed59896380", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBiN2UyMzc2YzgyYjkwMWZmMTUxZDU3NTVkMTdmZmVkNTk4OTYzODA=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-12T05:28:07Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-12T17:42:23Z"}, "message": "Keep old deprecated lints deprecated as non-tool, too", "tree": {"sha": "6b5a4ae71e7d5ea5fdc183d0d7788360c66dd10b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6b5a4ae71e7d5ea5fdc183d0d7788360c66dd10b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0b7e2376c82b901ff151d5755d17ffed59896380", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAl1RpP8QHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5slPEACylKl9kS20rLbcJn4eTybdEfWgiMvMhUS2\n2Ywc+GqQLFRxBtSLAm8oIceiQJgiXlfcceY0pQ0PZl4MkMov6D5O8UG3FdQaTrsg\nX+mGKKzP/SNSiCJVx3sZv6+yJ3H/0czGi+vG0qvr/NqEzdSf69MaM4DznImMM5pD\nDnN6OoLBi/g2LIRagGhTCOSKfAPvB5a0EKjpug9C/2yslB7NijBHD1RYgfzmiTBl\nNczVwOBq9stzivfSEADnGtOC+CQ518HxV9EzBDjH0Lfs4DWrtwcMJ2l1palRczrQ\nUqXkJ6hjMZS+ZKP97DmYvh86naa5XQpMg5JtnPZD17c1KI1/sfdYu3y20SA4aRdw\nAqY8qrSz8qmXtiT9ACNow5LrZQsVBFeysdXQg8EnW5A2Re9gCXWUO/MQgQk0tsJ6\n8Nq2vPFYJJK36wHn4I7ss7tQ+pWlSP7x8F+rlfZzMpC45dcazWvA/xso99Prjnne\ntSSUkiFRJy88CXlIwycVmuqdA5AqKJxNPmtDxNGmIdRE2HJkSkwVIc9K49MsKnlw\nZwN1HJvHAnR1yNsI93S0bMS+rpMT/SO56w41Qn9w8zrZ8787sCHXx7toW9iXUoF4\noErIO5JndcbZAKz+nnNTb3ZQIaiORZl7p0621oi1vqz4dmCZYz0iA8draWxeMvjh\n1cISMTD62A==\n=TAtQ\n-----END PGP SIGNATURE-----", "payload": "tree 6b5a4ae71e7d5ea5fdc183d0d7788360c66dd10b\nparent 5114050839ba288cbd1af44ac0261c50c8239493\nauthor Philipp Hansch <dev@phansch.net> 1565587687 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1565631743 +0200\n\nKeep old deprecated lints deprecated as non-tool, too\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0b7e2376c82b901ff151d5755d17ffed59896380", "html_url": "https://github.com/rust-lang/rust/commit/0b7e2376c82b901ff151d5755d17ffed59896380", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0b7e2376c82b901ff151d5755d17ffed59896380/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5114050839ba288cbd1af44ac0261c50c8239493", "url": "https://api.github.com/repos/rust-lang/rust/commits/5114050839ba288cbd1af44ac0261c50c8239493", "html_url": "https://github.com/rust-lang/rust/commit/5114050839ba288cbd1af44ac0261c50c8239493"}], "stats": {"total": 62, "additions": 56, "deletions": 6}, "files": [{"sha": "0ac0a5304bd19975edade3d8189c4e89de2a9205", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 50, "deletions": 0, "changes": 50, "blob_url": "https://github.com/rust-lang/rust/blob/0b7e2376c82b901ff151d5755d17ffed59896380/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b7e2376c82b901ff151d5755d17ffed59896380/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=0b7e2376c82b901ff151d5755d17ffed59896380", "patch": "@@ -384,6 +384,8 @@ pub fn read_conf(reg: &rustc_plugin::Registry<'_>) -> Conf {\n #[rustfmt::skip]\n pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n     let mut store = reg.sess.lint_store.borrow_mut();\n+    register_removed_non_tool_lints(&mut store);\n+\n     // begin deprecated lints, do not remove this comment, it\u2019s used in `update_lints`\n     store.register_removed(\n         \"clippy::should_assert_eq\",\n@@ -1164,6 +1166,54 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry<'_>, conf: &Conf) {\n     ]);\n }\n \n+#[rustfmt::skip]\n+fn register_removed_non_tool_lints(store: &mut rustc::lint::LintStore) {\n+    store.register_removed(\n+        \"should_assert_eq\",\n+        \"`assert!()` will be more flexible with RFC 2011\",\n+    );\n+    store.register_removed(\n+        \"extend_from_slice\",\n+        \"`.extend_from_slice(_)` is a faster way to extend a Vec by a slice\",\n+    );\n+    store.register_removed(\n+        \"range_step_by_zero\",\n+        \"`iterator.step_by(0)` panics nowadays\",\n+    );\n+    store.register_removed(\n+        \"unstable_as_slice\",\n+        \"`Vec::as_slice` has been stabilized in 1.7\",\n+    );\n+    store.register_removed(\n+        \"unstable_as_mut_slice\",\n+        \"`Vec::as_mut_slice` has been stabilized in 1.7\",\n+    );\n+    store.register_removed(\n+        \"str_to_string\",\n+        \"using `str::to_string` is common even today and specialization will likely happen soon\",\n+    );\n+    store.register_removed(\n+        \"string_to_string\",\n+        \"using `string::to_string` is common even today and specialization will likely happen soon\",\n+    );\n+    store.register_removed(\n+        \"misaligned_transmute\",\n+        \"this lint has been split into cast_ptr_alignment and transmute_ptr_to_ptr\",\n+    );\n+    store.register_removed(\n+        \"assign_ops\",\n+        \"using compound assignment operators (e.g., `+=`) is harmless\",\n+    );\n+    store.register_removed(\n+        \"if_let_redundant_pattern_matching\",\n+        \"this lint has been changed to redundant_pattern_matching\",\n+    );\n+    store.register_removed(\n+        \"unsafe_vector_initialization\",\n+        \"the replacement suggested by this lint had substantially different behavior\",\n+    );\n+}\n+\n /// Register renamed lints.\n ///\n /// Used in `./src/driver.rs`."}, {"sha": "cd6a3a5bf5a9625b15a1cd9bb84cb3f7301b3e89", "filename": "tests/ui/deprecated.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0b7e2376c82b901ff151d5755d17ffed59896380/tests%2Fui%2Fdeprecated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b7e2376c82b901ff151d5755d17ffed59896380/tests%2Fui%2Fdeprecated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdeprecated.rs?ref=0b7e2376c82b901ff151d5755d17ffed59896380", "patch": "@@ -1,8 +1,8 @@\n-#[warn(clippy::str_to_string)]\n-#[warn(clippy::string_to_string)]\n-#[warn(clippy::unstable_as_slice)]\n-#[warn(clippy::unstable_as_mut_slice)]\n-#[warn(clippy::misaligned_transmute)]\n-#[warn(clippy::unused_collect)]\n+#[warn(str_to_string)]\n+#[warn(string_to_string)]\n+#[warn(unstable_as_slice)]\n+#[warn(unstable_as_mut_slice)]\n+#[warn(misaligned_transmute)]\n+#[warn(unused_collect)]\n \n fn main() {}"}]}