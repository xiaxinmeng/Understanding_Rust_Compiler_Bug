{"sha": "609a069757aa071c377c0e02d7b18b4ff7b32631", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYwOWEwNjk3NTdhYTA3MWMzNzdjMGUwMmQ3YjE4YjRmZjdiMzI2MzE=", "commit": {"author": {"name": "Phil Ellison", "email": "phil.j.ellison@gmail.com", "date": "2021-01-01T19:35:10Z"}, "committer": {"name": "Phil Ellison", "email": "phil.j.ellison@gmail.com", "date": "2021-01-01T19:35:10Z"}, "message": "Remove some unnecessary code copied from the Syntax Tree command", "tree": {"sha": "edc2b964bc5e3a00a02e68cadc43f4626505f269", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/edc2b964bc5e3a00a02e68cadc43f4626505f269"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/609a069757aa071c377c0e02d7b18b4ff7b32631", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/609a069757aa071c377c0e02d7b18b4ff7b32631", "html_url": "https://github.com/rust-lang/rust/commit/609a069757aa071c377c0e02d7b18b4ff7b32631", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/609a069757aa071c377c0e02d7b18b4ff7b32631/comments", "author": {"login": "theotherphil", "id": 1974256, "node_id": "MDQ6VXNlcjE5NzQyNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1974256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theotherphil", "html_url": "https://github.com/theotherphil", "followers_url": "https://api.github.com/users/theotherphil/followers", "following_url": "https://api.github.com/users/theotherphil/following{/other_user}", "gists_url": "https://api.github.com/users/theotherphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/theotherphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theotherphil/subscriptions", "organizations_url": "https://api.github.com/users/theotherphil/orgs", "repos_url": "https://api.github.com/users/theotherphil/repos", "events_url": "https://api.github.com/users/theotherphil/events{/privacy}", "received_events_url": "https://api.github.com/users/theotherphil/received_events", "type": "User", "site_admin": false}, "committer": {"login": "theotherphil", "id": 1974256, "node_id": "MDQ6VXNlcjE5NzQyNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1974256?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theotherphil", "html_url": "https://github.com/theotherphil", "followers_url": "https://api.github.com/users/theotherphil/followers", "following_url": "https://api.github.com/users/theotherphil/following{/other_user}", "gists_url": "https://api.github.com/users/theotherphil/gists{/gist_id}", "starred_url": "https://api.github.com/users/theotherphil/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theotherphil/subscriptions", "organizations_url": "https://api.github.com/users/theotherphil/orgs", "repos_url": "https://api.github.com/users/theotherphil/repos", "events_url": "https://api.github.com/users/theotherphil/events{/privacy}", "received_events_url": "https://api.github.com/users/theotherphil/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db53db804604574337f80a614565fb964403a654", "url": "https://api.github.com/repos/rust-lang/rust/commits/db53db804604574337f80a614565fb964403a654", "html_url": "https://github.com/rust-lang/rust/commit/db53db804604574337f80a614565fb964403a654"}], "stats": {"total": 20, "additions": 3, "deletions": 17}, "files": [{"sha": "2911bccd5e46d64b75b5951f7025a2a36a6d53ce", "filename": "editors/code/src/commands.ts", "status": "modified", "additions": 3, "deletions": 17, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/609a069757aa071c377c0e02d7b18b4ff7b32631/editors%2Fcode%2Fsrc%2Fcommands.ts", "raw_url": "https://github.com/rust-lang/rust/raw/609a069757aa071c377c0e02d7b18b4ff7b32631/editors%2Fcode%2Fsrc%2Fcommands.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fcommands.ts?ref=609a069757aa071c377c0e02d7b18b4ff7b32631", "patch": "@@ -340,7 +340,7 @@ export function syntaxTree(ctx: Ctx): Cmd {\n     };\n }\n \n-// Opens the virtual file that will show hir\n+// Opens the virtual file that will show the HIR of the function containing the cursor position\n //\n // The contents of the file come from the `TextDocumentContentProvider`\n export function viewHir(ctx: Ctx): Cmd {\n@@ -384,25 +384,11 @@ export function viewHir(ctx: Ctx): Cmd {\n         }\n     };\n \n-    void new AstInspector(ctx);\n-\n     ctx.pushCleanup(vscode.workspace.registerTextDocumentContentProvider('rust-analyzer', tdcp));\n-    ctx.pushCleanup(vscode.languages.setLanguageConfiguration(\"ra_syntax_tree\", {\n-        brackets: [[\"[\", \")\"]],\n-    }));\n \n     return async () => {\n-        const editor = vscode.window.activeTextEditor;\n-        const rangeEnabled = !!editor && !editor.selection.isEmpty;\n-\n-        const uri = rangeEnabled\n-            ? vscode.Uri.parse(`${tdcp.uri.toString()}?range=true`)\n-            : tdcp.uri;\n-\n-        const document = await vscode.workspace.openTextDocument(uri);\n-\n-        tdcp.eventEmitter.fire(uri);\n-\n+        const document = await vscode.workspace.openTextDocument(tdcp.uri);\n+        tdcp.eventEmitter.fire(tdcp.uri);\n         void await vscode.window.showTextDocument(document, {\n             viewColumn: vscode.ViewColumn.Two,\n             preserveFocus: true"}]}