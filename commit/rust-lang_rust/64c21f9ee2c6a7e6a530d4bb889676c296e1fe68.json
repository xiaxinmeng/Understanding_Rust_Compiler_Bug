{"sha": "64c21f9ee2c6a7e6a530d4bb889676c296e1fe68", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY0YzIxZjllZTJjNmE3ZTZhNTMwZDRiYjg4OTY3NmMyOTZlMWZlNjg=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-06T17:50:44Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-12-06T17:50:44Z"}, "message": "Auto merge of #30241 - Manishearth:diag-30236, r=eddyb\n\nr? @eddyb", "tree": {"sha": "d5a208c22a36379183c293a56a74bd039f557499", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d5a208c22a36379183c293a56a74bd039f557499"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68", "html_url": "https://github.com/rust-lang/rust/commit/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "85b031b3bc78b673cdbbf578112028ec7b798443", "url": "https://api.github.com/repos/rust-lang/rust/commits/85b031b3bc78b673cdbbf578112028ec7b798443", "html_url": "https://github.com/rust-lang/rust/commit/85b031b3bc78b673cdbbf578112028ec7b798443"}, {"sha": "050ad0d67e3353a1395f23b2a21db0583948ebf2", "url": "https://api.github.com/repos/rust-lang/rust/commits/050ad0d67e3353a1395f23b2a21db0583948ebf2", "html_url": "https://github.com/rust-lang/rust/commit/050ad0d67e3353a1395f23b2a21db0583948ebf2"}], "stats": {"total": 25, "additions": 21, "deletions": 4}, "files": [{"sha": "622b2e4238fbb38e47b7271aa294a48f0dafd7aa", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=64c21f9ee2c6a7e6a530d4bb889676c296e1fe68", "patch": "@@ -704,9 +704,9 @@ pub fn check_item_type<'a,'tcx>(ccx: &CrateCtxt<'a,'tcx>, it: &'tcx hir::Item) {\n       hir::ItemStruct(..) => {\n         check_struct(ccx, it.id, it.span);\n       }\n-      hir::ItemTy(ref t, ref generics) => {\n+      hir::ItemTy(_, ref generics) => {\n         let pty_ty = ccx.tcx.node_id_to_type(it.id);\n-        check_bounds_are_used(ccx, t.span, &generics.ty_params, pty_ty);\n+        check_bounds_are_used(ccx, &generics.ty_params, pty_ty);\n       }\n       hir::ItemForeignMod(ref m) => {\n         if m.abi == abi::RustIntrinsic {\n@@ -4904,7 +4904,6 @@ pub fn may_break(cx: &ty::ctxt, id: ast::NodeId, b: &hir::Block) -> bool {\n }\n \n pub fn check_bounds_are_used<'a, 'tcx>(ccx: &CrateCtxt<'a, 'tcx>,\n-                                       span: Span,\n                                        tps: &OwnedSlice<hir::TyParam>,\n                                        ty: Ty<'tcx>) {\n     debug!(\"check_bounds_are_used(n_tps={}, ty={:?})\",\n@@ -4923,7 +4922,7 @@ pub fn check_bounds_are_used<'a, 'tcx>(ccx: &CrateCtxt<'a, 'tcx>,\n \n     for (i, b) in tps_used.iter().enumerate() {\n         if !*b {\n-            span_err!(ccx.tcx.sess, span, E0091,\n+            span_err!(ccx.tcx.sess, tps[i].span, E0091,\n                 \"type parameter `{}` is unused\",\n                 tps[i].name);\n         }"}, {"sha": "45a5cd093379fa84646a54b5a2925e3476cc52b7", "filename": "src/test/compile-fail/issue-30236.rs", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68/src%2Ftest%2Fcompile-fail%2Fissue-30236.rs", "raw_url": "https://github.com/rust-lang/rust/raw/64c21f9ee2c6a7e6a530d4bb889676c296e1fe68/src%2Ftest%2Fcompile-fail%2Fissue-30236.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-30236.rs?ref=64c21f9ee2c6a7e6a530d4bb889676c296e1fe68", "patch": "@@ -0,0 +1,18 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+type Foo<\n+    Unused //~ ERROR type parameter `Unused` is unused\n+    > = u8;\n+\n+fn main() {\n+\n+}\n+"}]}