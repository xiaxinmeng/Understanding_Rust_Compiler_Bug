{"sha": "b0884a3528c45a5d575e182f407c759d243fdcba", "node_id": "C_kwDOAAsO6NoAKGIwODg0YTM1MjhjNDVhNWQ1NzVlMTgyZjQwN2M3NTlkMjQzZmRjYmE", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-14T12:52:27Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-04-14T12:52:27Z"}, "message": "Auto merge of #110177 - RalfJung:miri-tests, r=oli-obk\n\nfix running Miri tests\n\nThis partially reverts https://github.com/rust-lang/rust/pull/108659 to fix https://github.com/rust-lang/rust/issues/110102: the Miri test runner does not support any flags, they are interpreted as filters instead which leads to no tests being run.\n\nI have not checked any of the other test runners for whether they are having any trouble with these flags.\n\nCc `@pietroalbini` `@Mark-Simulacrum` `@jyn514`", "tree": {"sha": "bbcdf633fd44c02f6aa56067647227783c8fa9da", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bbcdf633fd44c02f6aa56067647227783c8fa9da"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0884a3528c45a5d575e182f407c759d243fdcba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0884a3528c45a5d575e182f407c759d243fdcba", "html_url": "https://github.com/rust-lang/rust/commit/b0884a3528c45a5d575e182f407c759d243fdcba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0884a3528c45a5d575e182f407c759d243fdcba/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e565f1a27a19f7da48c7109500b4351c0819e68", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e565f1a27a19f7da48c7109500b4351c0819e68", "html_url": "https://github.com/rust-lang/rust/commit/3e565f1a27a19f7da48c7109500b4351c0819e68"}, {"sha": "873ab04d898b32cd9196d15e68c724d583c07f17", "url": "https://api.github.com/repos/rust-lang/rust/commits/873ab04d898b32cd9196d15e68c724d583c07f17", "html_url": "https://github.com/rust-lang/rust/commit/873ab04d898b32cd9196d15e68c724d583c07f17"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "2bf28674d36554907acb9ad5a4a79156df3fb7a7", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b0884a3528c45a5d575e182f407c759d243fdcba/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0884a3528c45a5d575e182f407c759d243fdcba/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=b0884a3528c45a5d575e182f407c759d243fdcba", "patch": "@@ -638,7 +638,10 @@ impl Step for Miri {\n         // Forward test filters.\n         cargo.arg(\"--\").args(builder.config.cmd.test_args());\n \n-        add_flags_and_try_run_tests(builder, &mut cargo.into());\n+        // This can NOT be `add_flags_and_try_run_tests` since the Miri test runner\n+        // does not understand those flags!\n+        let mut cargo = Command::from(cargo);\n+        builder.run(&mut cargo);\n \n         // # Run `cargo miri test`.\n         // This is just a smoke test (Miri's own CI invokes this in a bunch of different ways and ensures"}]}