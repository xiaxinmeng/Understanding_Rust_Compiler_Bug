{"sha": "ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFlNmRhZjc3YmE5NzYyZjRmMTE4YjIzNDIyOThjZTVmYTJlMzJhN2E=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-01-22T11:28:32Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-01-22T11:28:32Z"}, "message": "Default to Cranelift newBE", "tree": {"sha": "b5884fda533dec6225eeb9fa2881f3e0d9cd8a9c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b5884fda533dec6225eeb9fa2881f3e0d9cd8a9c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "html_url": "https://github.com/rust-lang/rust/commit/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2ced8c0eb0df6ae52cfc63c88b92c70c46049178", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ced8c0eb0df6ae52cfc63c88b92c70c46049178", "html_url": "https://github.com/rust-lang/rust/commit/2ced8c0eb0df6ae52cfc63c88b92c70c46049178"}], "stats": {"total": 23, "additions": 12, "deletions": 11}, "files": [{"sha": "20c58423a0c502c7386799638a300d3f06edbbe3", "filename": ".github/workflows/main.yml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/.github%2Fworkflows%2Fmain.yml", "raw_url": "https://github.com/rust-lang/rust/raw/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/.github%2Fworkflows%2Fmain.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fmain.yml?ref=ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "patch": "@@ -14,7 +14,7 @@ jobs:\n         os: [ubuntu-latest, macos-latest]\n         env:\n           - BACKEND: \"\"\n-          - BACKEND: --features newbe\n+          - BACKEND: --oldbe\n \n     steps:\n     - uses: actions/checkout@v2"}, {"sha": "4558da2de73eaa1b3b5ec47dd2e10151c571b8d2", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "patch": "@@ -37,7 +37,7 @@ libloading = { version = \"0.6.0\", optional = true }\n default = [\"jit\", \"inline_asm\"]\n jit = [\"cranelift-jit\", \"libloading\"]\n inline_asm = []\n-newbe = []\n+oldbe = []\n \n [profile.dev]\n # By compiling dependencies with optimizations, performing tests gets much faster."}, {"sha": "522b3b3f5923e2b2d248e7aac138020000215c4c", "filename": "build.sh", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/build.sh", "raw_url": "https://github.com/rust-lang/rust/raw/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/build.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/build.sh?ref=ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "patch": "@@ -5,7 +5,7 @@ set -e\n export CHANNEL=\"release\"\n build_sysroot=1\n target_dir='build'\n-newbe=''\n+oldbe=''\n while [[ $# != 0 ]]; do\n     case $1 in\n         \"--debug\")\n@@ -18,12 +18,13 @@ while [[ $# != 0 ]]; do\n             target_dir=$2\n             shift\n             ;;\n-        \"--newbe\")\n-            newbe='--features newbe'\n+        \"--oldbe\")\n+            oldbe='--features oldbe'\n             ;;\n         *)\n             echo \"Unknown flag '$1'\"\n-            echo \"Usage: ./build.sh [--debug] [--without-sysroot] [--target-dir DIR] [--newbe]\"\n+            echo \"Usage: ./build.sh [--debug] [--without-sysroot] [--target-dir DIR] [--oldbe]\"\n+            exit 1\n             ;;\n     esac\n     shift\n@@ -43,9 +44,9 @@ else\n    exit 1\n fi\n if [[ \"$CHANNEL\" == \"release\" ]]; then\n-    cargo build $newbe --release\n+    cargo build $oldbe --release\n else\n-    cargo build $newbe\n+    cargo build $oldbe\n fi\n \n rm -rf \"$target_dir\""}, {"sha": "9b5b7d8051c72f19a46eae826aac60acc0a6c8a9", "filename": "src/lib.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ae6daf77ba9762f4f118b2342298ce5fa2e32a7a/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=ae6daf77ba9762f4f118b2342298ce5fa2e32a7a", "patch": "@@ -339,10 +339,10 @@ fn build_isa(sess: &Session) -> Box<dyn isa::TargetIsa + 'static> {\n \n     let flags = settings::Flags::new(flags_builder);\n \n-    let variant = if cfg!(feature = \"newbe\") {\n-        cranelift_codegen::isa::BackendVariant::MachInst\n-    } else {\n+    let variant = if cfg!(feature = \"oldbe\") {\n         cranelift_codegen::isa::BackendVariant::Legacy\n+    } else {\n+        cranelift_codegen::isa::BackendVariant::MachInst\n     };\n     let mut isa_builder = cranelift_codegen::isa::lookup_variant(target_triple, variant).unwrap();\n     // Don't use \"haswell\", as it implies `has_lzcnt`.macOS CI is still at Ivy Bridge EP, so `lzcnt`"}]}