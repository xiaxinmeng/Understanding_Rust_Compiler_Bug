{"sha": "0e3f19d3f179c179ccde3a2f15e9e429483f6903", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBlM2YxOWQzZjE3OWMxNzljY2RlM2EyZjE1ZTllNDI5NDgzZjY5MDM=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-07T00:39:58Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-07T00:39:58Z"}, "message": "Do not account for inner/outer attr", "tree": {"sha": "7b7c68b8954883a2b4c5789611a3140e67bc02cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7b7c68b8954883a2b4c5789611a3140e67bc02cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0e3f19d3f179c179ccde3a2f15e9e429483f6903", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0e3f19d3f179c179ccde3a2f15e9e429483f6903", "html_url": "https://github.com/rust-lang/rust/commit/0e3f19d3f179c179ccde3a2f15e9e429483f6903", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0e3f19d3f179c179ccde3a2f15e9e429483f6903/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3cc09c8380ed22d4aa9b3b0896b88707b4034b3b", "url": "https://api.github.com/repos/rust-lang/rust/commits/3cc09c8380ed22d4aa9b3b0896b88707b4034b3b", "html_url": "https://github.com/rust-lang/rust/commit/3cc09c8380ed22d4aa9b3b0896b88707b4034b3b"}], "stats": {"total": 16, "additions": 3, "deletions": 13}, "files": [{"sha": "b3b737ab28329beb1cb4c507e2b13e7c4e29c9aa", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/0e3f19d3f179c179ccde3a2f15e9e429483f6903/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0e3f19d3f179c179ccde3a2f15e9e429483f6903/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=0e3f19d3f179c179ccde3a2f15e9e429483f6903", "patch": "@@ -687,18 +687,8 @@ impl EarlyLintPass for BadRepr {\n     fn check_attribute(&mut self, cx: &EarlyContext, attr: &ast::Attribute) {\n         if attr.name() == \"repr\" {\n             let list = attr.meta_item_list();\n-            let outer = match attr.style {\n-                ast::AttrStyle::Outer => true,\n-                ast::AttrStyle::Inner => false,\n-            };\n \n-            let repr_str = move |lit: &str| {\n-                if outer {\n-                    format!(\"#[repr({})]\", lit)\n-                } else {\n-                    format!(\"#![repr({})]\", lit)\n-                }\n-            };\n+            let repr_str = |lit: &str| { format!(\"#[repr({})]\", lit) };\n \n             // Emit warnings with `repr` either has a literal assignment (`#[repr = \"C\"]`) or\n             // no hints (``#[repr]`)"}, {"sha": "f351a9e69d01135e018894a56a0a840c53e67a0a", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0e3f19d3f179c179ccde3a2f15e9e429483f6903/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0e3f19d3f179c179ccde3a2f15e9e429483f6903/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr?ref=0e3f19d3f179c179ccde3a2f15e9e429483f6903", "patch": "@@ -193,7 +193,7 @@ LL |     mod inner { #![repr=\"3900\"] }\n    |                 ^^^^^^^^^^^^^^^ needs a hint\n    |\n    = note: #[warn(bad_repr)] on by default\n-   = help: valid hints include `#![repr(C)]`, `#![repr(packed)]`, `#![repr(rust)]` and `#![repr(transparent)]`\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]`, `#[repr(rust)]` and `#[repr(transparent)]`\n    = note: for more information, visit <https://doc.rust-lang.org/reference/type-layout.html>\n \n warning: `repr` attribute isn't configurable with a literal\n@@ -238,7 +238,7 @@ warning: `repr` attribute isn't configurable with a literal\n LL | #![repr                       = \"3900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ needs a hint\n    |\n-   = help: valid hints include `#![repr(C)]`, `#![repr(packed)]`, `#![repr(rust)]` and `#![repr(transparent)]`\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]`, `#[repr(rust)]` and `#[repr(transparent)]`\n    = note: for more information, visit <https://doc.rust-lang.org/reference/type-layout.html>\n \n warning: unused attribute"}]}