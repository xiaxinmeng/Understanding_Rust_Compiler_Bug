{"sha": "c5fd58d5125e071e9c49aa469383c302ea3d1fe3", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM1ZmQ1OGQ1MTI1ZTA3MWU5YzQ5YWE0NjkzODNjMzAyZWEzZDFmZTM=", "commit": {"author": {"name": "Barosl LEE", "email": "github@barosl.com", "date": "2015-01-20T17:16:50Z"}, "committer": {"name": "Barosl LEE", "email": "github@barosl.com", "date": "2015-01-20T17:16:50Z"}, "message": "Rollup merge of #21377 - iKevinY:speedy-tidy, r=huonw\n\n`x in y` is more Pythonic than `y.find(x) != -1`. I believe it runs quite a bit faster as well (though it's probably not a bottleneck of the Travis builds):\r\n\r\n```bash\r\n$ python -m timeit '\"abc\".find(\"a\") != -1'\r\n1000000 loops, best of 3: 0.218 usec per loop\r\n$ python -m timeit '\"a\" in \"abc\"'\r\n10000000 loops, best of 3: 0.0343 usec per loop\r\n```", "tree": {"sha": "14a689a982f7c115c0622fc13a799a913bfd7d0b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/14a689a982f7c115c0622fc13a799a913bfd7d0b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c5fd58d5125e071e9c49aa469383c302ea3d1fe3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c5fd58d5125e071e9c49aa469383c302ea3d1fe3", "html_url": "https://github.com/rust-lang/rust/commit/c5fd58d5125e071e9c49aa469383c302ea3d1fe3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c5fd58d5125e071e9c49aa469383c302ea3d1fe3/comments", "author": {"login": "barosl", "id": 573768, "node_id": "MDQ6VXNlcjU3Mzc2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/573768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barosl", "html_url": "https://github.com/barosl", "followers_url": "https://api.github.com/users/barosl/followers", "following_url": "https://api.github.com/users/barosl/following{/other_user}", "gists_url": "https://api.github.com/users/barosl/gists{/gist_id}", "starred_url": "https://api.github.com/users/barosl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barosl/subscriptions", "organizations_url": "https://api.github.com/users/barosl/orgs", "repos_url": "https://api.github.com/users/barosl/repos", "events_url": "https://api.github.com/users/barosl/events{/privacy}", "received_events_url": "https://api.github.com/users/barosl/received_events", "type": "User", "site_admin": false}, "committer": {"login": "barosl", "id": 573768, "node_id": "MDQ6VXNlcjU3Mzc2OA==", "avatar_url": "https://avatars.githubusercontent.com/u/573768?v=4", "gravatar_id": "", "url": "https://api.github.com/users/barosl", "html_url": "https://github.com/barosl", "followers_url": "https://api.github.com/users/barosl/followers", "following_url": "https://api.github.com/users/barosl/following{/other_user}", "gists_url": "https://api.github.com/users/barosl/gists{/gist_id}", "starred_url": "https://api.github.com/users/barosl/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/barosl/subscriptions", "organizations_url": "https://api.github.com/users/barosl/orgs", "repos_url": "https://api.github.com/users/barosl/repos", "events_url": "https://api.github.com/users/barosl/events{/privacy}", "received_events_url": "https://api.github.com/users/barosl/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a79f1921a977595a0321dee96ba08b17b52850ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/a79f1921a977595a0321dee96ba08b17b52850ae", "html_url": "https://github.com/rust-lang/rust/commit/a79f1921a977595a0321dee96ba08b17b52850ae"}, {"sha": "21f4483de3a78c843db2a6de49b14d4777b83918", "url": "https://api.github.com/repos/rust-lang/rust/commits/21f4483de3a78c843db2a6de49b14d4777b83918", "html_url": "https://github.com/rust-lang/rust/commit/21f4483de3a78c843db2a6de49b14d4777b83918"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "536ab7f30b9fa0604a420980633af1aa2dabcc92", "filename": "src/etc/tidy.py", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/c5fd58d5125e071e9c49aa469383c302ea3d1fe3/src%2Fetc%2Ftidy.py", "raw_url": "https://github.com/rust-lang/rust/raw/c5fd58d5125e071e9c49aa469383c302ea3d1fe3/src%2Fetc%2Ftidy.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Ftidy.py?ref=c5fd58d5125e071e9c49aa469383c302ea3d1fe3", "patch": "@@ -58,14 +58,14 @@ def do_license_check(name, contents):\n     for line in fileinput.input(file_names,\n                                 openhook=fileinput.hook_encoded(\"utf-8\")):\n \n-        if fileinput.filename().find(\"tidy.py\") == -1:\n-            if line.find(cr_flag) != -1:\n+        if \"tidy.py\" not in fileinput.filename():\n+            if cr_flag in line:\n                 check_cr = False\n-            if line.find(tab_flag) != -1:\n+            if tab_flag in line:\n                 check_tab = False\n-            if line.find(linelength_flag) != -1:\n+            if linelength_flag in line:\n                 check_linelength = False\n-            if line.find(\"TODO\") != -1:\n+            if \"TODO\" in line:\n                 report_err(\"TODO is deprecated; use FIXME\")\n             match = re.match(r'^.*/(\\*|/!?)\\s*XXX', line)\n             if match:\n@@ -86,10 +86,10 @@ def do_license_check(name, contents):\n                 if \"SNAP\" in line:\n                     report_warn(\"unmatched SNAP line: \" + line)\n \n-        if check_tab and (line.find('\\t') != -1 and\n-            fileinput.filename().find(\"Makefile\") == -1):\n+        if check_tab and ('\\t' in line and\n+            \"Makefile\" not in fileinput.filename()):\n             report_err(\"tab character\")\n-        if check_cr and not autocrlf and line.find('\\r') != -1:\n+        if check_cr and not autocrlf and '\\r' in line:\n             report_err(\"CR character\")\n         if line.endswith(\" \\n\") or line.endswith(\"\\t\\n\"):\n             report_err(\"trailing whitespace\")"}]}