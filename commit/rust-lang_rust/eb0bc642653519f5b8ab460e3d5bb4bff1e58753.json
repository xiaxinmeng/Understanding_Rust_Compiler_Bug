{"sha": "eb0bc642653519f5b8ab460e3d5bb4bff1e58753", "node_id": "MDY6Q29tbWl0NzI0NzEyOmViMGJjNjQyNjUzNTE5ZjViOGFiNDYwZTNkNWJiNGJmZjFlNTg3NTM=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-07-31T21:35:35Z"}, "committer": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2018-08-03T17:09:36Z"}, "message": "Visibility is now a query", "tree": {"sha": "9e3962da6da038e1088169302215db4dbe9afd84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9e3962da6da038e1088169302215db4dbe9afd84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eb0bc642653519f5b8ab460e3d5bb4bff1e58753", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eb0bc642653519f5b8ab460e3d5bb4bff1e58753", "html_url": "https://github.com/rust-lang/rust/commit/eb0bc642653519f5b8ab460e3d5bb4bff1e58753", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eb0bc642653519f5b8ab460e3d5bb4bff1e58753/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cc1a6b99b0fd5440d528283116c4e94b6a8df4c6", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc1a6b99b0fd5440d528283116c4e94b6a8df4c6", "html_url": "https://github.com/rust-lang/rust/commit/cc1a6b99b0fd5440d528283116c4e94b6a8df4c6"}], "stats": {"total": 5, "additions": 0, "deletions": 5}, "files": [{"sha": "caa8ad7da995a576f05a35b83dd2dbe6c92a12d8", "filename": "src/librustc/middle/cstore.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eb0bc642653519f5b8ab460e3d5bb4bff1e58753/src%2Flibrustc%2Fmiddle%2Fcstore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb0bc642653519f5b8ab460e3d5bb4bff1e58753/src%2Flibrustc%2Fmiddle%2Fcstore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fcstore.rs?ref=eb0bc642653519f5b8ab460e3d5bb4bff1e58753", "patch": "@@ -231,7 +231,6 @@ pub trait CrateStore {\n     fn def_path_table(&self, cnum: CrateNum) -> Lrc<DefPathTable>;\n \n     // \"queries\" used in resolve that aren't tracked for incremental compilation\n-    fn visibility_untracked(&self, def: DefId) -> ty::Visibility;\n     fn export_macros_untracked(&self, cnum: CrateNum);\n     fn dep_kind_untracked(&self, cnum: CrateNum) -> DepKind;\n     fn crate_name_untracked(&self, cnum: CrateNum) -> Symbol;"}, {"sha": "fc23494585a76f86e264a2843e3c4474bc1188de", "filename": "src/librustc_metadata/cstore_impl.rs", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/eb0bc642653519f5b8ab460e3d5bb4bff1e58753/src%2Flibrustc_metadata%2Fcstore_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eb0bc642653519f5b8ab460e3d5bb4bff1e58753/src%2Flibrustc_metadata%2Fcstore_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_metadata%2Fcstore_impl.rs?ref=eb0bc642653519f5b8ab460e3d5bb4bff1e58753", "patch": "@@ -420,10 +420,6 @@ impl CrateStore for cstore::CStore {\n         &*self.metadata_loader\n     }\n \n-    fn visibility_untracked(&self, def: DefId) -> ty::Visibility {\n-        self.get_crate_data(def.krate).get_visibility(def.index)\n-    }\n-\n     fn item_generics_cloned_untracked(&self, def: DefId, sess: &Session) -> ty::Generics {\n         self.get_crate_data(def.krate).get_generics(def.index, sess)\n     }"}]}