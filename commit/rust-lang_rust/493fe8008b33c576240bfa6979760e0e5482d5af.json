{"sha": "493fe8008b33c576240bfa6979760e0e5482d5af", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5M2ZlODAwOGIzM2M1NzYyNDBiZmE2OTc5NzYwZTBlNTQ4MmQ1YWY=", "commit": {"author": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2021-06-13T18:19:39Z"}, "committer": {"name": "Simonas Kazlauskas", "email": "git@kazlauskas.me", "date": "2021-06-24T20:13:08Z"}, "message": "Re-Annotate the tests with needs-llvm-components\n\nDoesn't work though, because compiletest doesn't process ignores on a\nper-revision manner.", "tree": {"sha": "d46b1f014e12717c8805ce9fea2e85f8bf074752", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d46b1f014e12717c8805ce9fea2e85f8bf074752"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/493fe8008b33c576240bfa6979760e0e5482d5af", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/493fe8008b33c576240bfa6979760e0e5482d5af", "html_url": "https://github.com/rust-lang/rust/commit/493fe8008b33c576240bfa6979760e0e5482d5af", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/493fe8008b33c576240bfa6979760e0e5482d5af/comments", "author": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nagisa", "id": 679122, "node_id": "MDQ6VXNlcjY3OTEyMg==", "avatar_url": "https://avatars.githubusercontent.com/u/679122?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nagisa", "html_url": "https://github.com/nagisa", "followers_url": "https://api.github.com/users/nagisa/followers", "following_url": "https://api.github.com/users/nagisa/following{/other_user}", "gists_url": "https://api.github.com/users/nagisa/gists{/gist_id}", "starred_url": "https://api.github.com/users/nagisa/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nagisa/subscriptions", "organizations_url": "https://api.github.com/users/nagisa/orgs", "repos_url": "https://api.github.com/users/nagisa/repos", "events_url": "https://api.github.com/users/nagisa/events{/privacy}", "received_events_url": "https://api.github.com/users/nagisa/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a8e6a2cd9efa19787dbbb469c202dfb922e799c6", "url": "https://api.github.com/repos/rust-lang/rust/commits/a8e6a2cd9efa19787dbbb469c202dfb922e799c6", "html_url": "https://github.com/rust-lang/rust/commit/a8e6a2cd9efa19787dbbb469c202dfb922e799c6"}], "stats": {"total": 85, "additions": 61, "deletions": 24}, "files": [{"sha": "9ec7ba83c4278b263b4e57add025815a0780d673", "filename": "src/test/assembly/asm/mips-types.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fmips-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fmips-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fmips-types.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -2,8 +2,9 @@\n // revisions: mips32 mips64\n // assembly-output: emit-asm\n //[mips32] compile-flags: --target mips-unknown-linux-gnu\n+//[mips32] needs-llvm-components: mips\n //[mips64] compile-flags: --target mips64-unknown-linux-gnuabi64\n-// needs-llvm-components: mips\n+//[mips64] needs-llvm-components: mips\n \n #![feature(no_core, lang_items, rustc_attrs, repr_simd)]\n #![crate_type = \"rlib\"]"}, {"sha": "1e263649e860a335d9291e76773e5c18db81f366", "filename": "src/test/assembly/asm/powerpc-types.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fpowerpc-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fpowerpc-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fpowerpc-types.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -2,8 +2,9 @@\n // revisions: powerpc powerpc64\n // assembly-output: emit-asm\n //[powerpc] compile-flags: --target powerpc-unknown-linux-gnu\n+//[powerpc] needs-llvm-components: powerpc\n //[powerpc64] compile-flags: --target powerpc64-unknown-linux-gnu\n-// needs-llvm-components: powerpc\n+//[powerpc64] needs-llvm-components: powerpc\n \n #![feature(no_core, lang_items, rustc_attrs, repr_simd)]\n #![crate_type = \"rlib\"]"}, {"sha": "e62a6197b9a5e319adc698b4ea29c465afbee48c", "filename": "src/test/assembly/asm/riscv-types.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Friscv-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Friscv-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Friscv-types.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -2,9 +2,10 @@\n // revisions: riscv64 riscv32\n // assembly-output: emit-asm\n //[riscv64] compile-flags: --target riscv64imac-unknown-none-elf\n+//[riscv64] needs-llvm-components: riscv\n //[riscv32] compile-flags: --target riscv32imac-unknown-none-elf\n+//[riscv32] needs-llvm-components: riscv\n // compile-flags: -C target-feature=+d\n-// needs-llvm-components: riscv\n // min-system-llvm-version: 12.0\n \n #![feature(no_core, lang_items, rustc_attrs)]"}, {"sha": "c926fd7b3f56539a81d8c905c7f946df22fa8b61", "filename": "src/test/assembly/asm/x86-modifiers.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fx86-modifiers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fx86-modifiers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fx86-modifiers.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -3,7 +3,9 @@\n // assembly-output: emit-asm\n // compile-flags: -O\n //[x86_64] compile-flags: --target x86_64-unknown-linux-gnu\n+//[x86_64] needs-llvm-components: x86\n //[i686] compile-flags: --target i686-unknown-linux-gnu\n+//[i686] needs-llvm-components: x86\n // compile-flags: -C llvm-args=--x86-asm-syntax=intel\n // compile-flags: -C target-feature=+avx512bw\n "}, {"sha": "d25f3a03777a6746beed80a72b1e525062374421", "filename": "src/test/assembly/asm/x86-types.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fx86-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fasm%2Fx86-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fasm%2Fx86-types.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -2,7 +2,9 @@\n // revisions: x86_64 i686\n // assembly-output: emit-asm\n //[x86_64] compile-flags: --target x86_64-unknown-linux-gnu\n+//[x86_64] needs-llvm-components: x86\n //[i686] compile-flags: --target i686-unknown-linux-gnu\n+//[i686] needs-llvm-components: x86\n // compile-flags: -C llvm-args=--x86-asm-syntax=intel\n // compile-flags: -C target-feature=+avx512bw\n "}, {"sha": "b331d45668ab378711f10001434f8101eba80252", "filename": "src/test/assembly/static-relocation-model.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fstatic-relocation-model.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fassembly%2Fstatic-relocation-model.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fassembly%2Fstatic-relocation-model.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,10 +1,12 @@\n // min-llvm-version: 12.0.0\n-// needs-llvm-components: aarch64 x86 powerpc\n // revisions: x64 A64 ppc64le\n // assembly-output: emit-asm\n // [x64] compile-flags: --target x86_64-unknown-linux-gnu -Crelocation-model=static\n+// [x64] needs-llvm-components: x86\n // [A64] compile-flags: --target aarch64-unknown-linux-gnu -Crelocation-model=static\n+// [A64] needs-llvm-components: aarch64\n // [ppc64le] compile-flags: --target powerpc64le-unknown-linux-gnu -Crelocation-model=static\n+// [ppc64le] needs-llvm-components: powerpc\n \n #![feature(no_core, lang_items)]\n #![no_core]"}, {"sha": "b4fda5f8c8428d0c879382dbf0a6e616af8315f6", "filename": "src/test/codegen/abi-efiapi.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fabi-efiapi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fabi-efiapi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fabi-efiapi.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,13 +1,16 @@\n // Checks if the correct annotation for the efiapi ABI is passed to llvm.\n \n // revisions:x86_64 i686 aarch64 arm riscv\n-// needs-llvm-components: aarch64 arm riscv\n-\n //[x86_64] compile-flags: --target x86_64-unknown-uefi\n+//[x86_64] needs-llvm-components: aarch64 arm riscv\n //[i686] compile-flags: --target i686-unknown-linux-musl\n+//[i686] needs-llvm-components: aarch64 arm riscv\n //[aarch64] compile-flags: --target aarch64-unknown-none\n+//[aarch64] needs-llvm-components: aarch64 arm riscv\n //[arm] compile-flags: --target armv7r-none-eabi\n+//[arm] needs-llvm-components: aarch64 arm riscv\n //[riscv] compile-flags: --target riscv64gc-unknown-none-elf\n+//[riscv] needs-llvm-components: aarch64 arm riscv\n // compile-flags: -C no-prepopulate-passes\n \n #![crate_type = \"lib\"]"}, {"sha": "135177016bf9a9e3fe50196920c6a082d5a0ffbd", "filename": "src/test/codegen/asm-sanitize-llvm.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fasm-sanitize-llvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fasm-sanitize-llvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fasm-sanitize-llvm.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,5 +1,6 @@\n-// FIXME(nagisa): remove the flags here once all targets support `asm!`.\n+// FIXME(nagisa): remove the flags below once all targets support `asm!`.\n // compile-flags: --target x86_64-unknown-linux-gnu\n+// needs-llvm-components: x86\n \n // Verify we sanitize the special tokens for the LLVM inline-assembly, ensuring people won't\n // inadvertently rely on the LLVM-specific syntax and features."}, {"sha": "5d77d3f14bb12bd9066a362ec6acdbbdfab0f062", "filename": "src/test/codegen/default-requires-uwtable.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fdefault-requires-uwtable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fdefault-requires-uwtable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fdefault-requires-uwtable.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,8 +1,9 @@\n // revisions: WINDOWS ANDROID\n-// needs-llvm-components: x86 arm\n // compile-flags: -C panic=abort\n // [WINDOWS] compile-flags: --target=x86_64-pc-windows-msvc\n+// [WINDOWS] needs-llvm-components: x86\n // [ANDROID] compile-flags: --target=armv7-linux-androideabi\n+// [ANDROID] needs-llvm-components: arm\n \n #![feature(no_core, lang_items)]\n #![crate_type = \"lib\"]"}, {"sha": "17258a264a5e60c668ea3166219346e4f06f91fe", "filename": "src/test/codegen/i686-macosx-deployment-target.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fi686-macosx-deployment-target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fi686-macosx-deployment-target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fi686-macosx-deployment-target.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -3,6 +3,7 @@\n // See issue #60235.\n \n // compile-flags: -O --target=i686-apple-darwin --crate-type=rlib\n+// needs-llvm-components: x86\n // rustc-env:MACOSX_DEPLOYMENT_TARGET=10.9\n #![feature(no_core, lang_items)]\n #![no_core]"}, {"sha": "043040a95e364b89a3f9c421cd106e2120631d77", "filename": "src/test/codegen/i686-no-macosx-deployment-target.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fi686-no-macosx-deployment-target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fi686-no-macosx-deployment-target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fi686-no-macosx-deployment-target.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -3,6 +3,7 @@\n // See issue #60235.\n \n // compile-flags: -O --target=i686-apple-darwin --crate-type=rlib\n+// needs-llvm-components: x86\n // unset-rustc-env:MACOSX_DEPLOYMENT_TARGET\n #![feature(no_core, lang_items)]\n #![no_core]"}, {"sha": "f228d7c55008487c583114f1e59e61b490b7bd8d", "filename": "src/test/codegen/sparc-struct-abi.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fsparc-struct-abi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fsparc-struct-abi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fsparc-struct-abi.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,9 +1,8 @@\n-//\n // Checks that we correctly codegen extern \"C\" functions returning structs.\n // See issue #52638.\n \n-// only-sparc64\n // compile-flags: -O --target=sparc64-unknown-linux-gnu --crate-type=rlib\n+// needs-llvm-components: sparc\n #![feature(no_core, lang_items)]\n #![no_core]\n "}, {"sha": "8e673d11d98e941075e21ba79f97ce35de0cdf69", "filename": "src/test/codegen/x86_64-macosx-deployment-target.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fx86_64-macosx-deployment-target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fx86_64-macosx-deployment-target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fx86_64-macosx-deployment-target.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -3,6 +3,7 @@\n // See issue #60235.\n \n // compile-flags: -O --target=x86_64-apple-darwin --crate-type=rlib\n+// needs-llvm-components: x86\n // rustc-env:MACOSX_DEPLOYMENT_TARGET=10.9\n #![feature(no_core, lang_items)]\n #![no_core]"}, {"sha": "25ae6924de03e191e8c77f9dec335cff0de95c43", "filename": "src/test/codegen/x86_64-no-macosx-deployment-target.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fx86_64-no-macosx-deployment-target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fcodegen%2Fx86_64-no-macosx-deployment-target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fx86_64-no-macosx-deployment-target.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -3,6 +3,7 @@\n // See issue #60235.\n \n // compile-flags: -O --target=x86_64-apple-darwin --crate-type=rlib\n+// needs-llvm-components: x86\n // unset-rustc-env:MACOSX_DEPLOYMENT_TARGET\n #![feature(no_core, lang_items)]\n #![no_core]"}, {"sha": "481990398f4c6ac0a1ed00aed3bdec4735b24d52", "filename": "src/test/ui/asm/inline-syntax.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fasm%2Finline-syntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fasm%2Finline-syntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Finline-syntax.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,11 +1,13 @@\n-// needs-llvm-components: arm\n // revisions: x86_64 arm\n //[x86_64] compile-flags: --target x86_64-unknown-linux-gnu\n //[x86_64] check-pass\n+//[x86_64] needs-llvm-components: x86\n //[x86_64_allowed] compile-flags: --target x86_64-unknown-linux-gnu\n //[x86_64_allowed] check-pass\n+//[x86_64_allowed] needs-llvm-components: x86\n //[arm] compile-flags: --target armv7-unknown-linux-gnueabihf\n //[arm] build-fail\n+//[arm] needs-llvm-components: arm\n \n #![feature(no_core, lang_items, rustc_attrs)]\n #![crate_type = \"rlib\"]"}, {"sha": "247efc055d906cda9042a5f0f9d4ad8fcdcfd15b", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-call/params-on-registers.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-registers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-registers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-registers.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,6 +1,6 @@\n // build-pass\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n+// needs-llvm-components: arm\n #![feature(abi_c_cmse_nonsecure_call)]\n #![no_std]\n "}, {"sha": "52c0e3a21656dd5c829e741b916b1feecf3c5311", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-call/params-on-stack.rs", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fparams-on-stack.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,7 +1,16 @@\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n-#![feature(abi_c_cmse_nonsecure_call)]\n-#![no_std]\n+// needs-llvm-components: arm\n+// min-llvm-version: 11.0\n+#![feature(abi_c_cmse_nonsecure_call, no_core, lang_items, intrinsics)]\n+#![no_core]\n+#[lang=\"sized\"]\n+pub trait Sized { }\n+#[lang=\"copy\"]\n+pub trait Copy { }\n+\n+extern \"rust-intrinsic\" {\n+    pub fn transmute<T, U>(e: T) -> U;\n+}\n \n #[no_mangle]\n pub fn test(a: u32, b: u32, c: u32, d: u32, e: u32) -> u32 {"}, {"sha": "a838d34a118bd224cc166502fbddc700c184b1ea", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-call/wrong-abi-location-1.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fwrong-abi-location-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fwrong-abi-location-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fwrong-abi-location-1.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,5 +1,5 @@\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n+// needs-llvm-components: arm\n #![feature(abi_c_cmse_nonsecure_call)]\n #![no_std]\n "}, {"sha": "15bb618f6ad43d86b55d33fb01b5db1daeffef9f", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-call/wrong-abi-location-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fwrong-abi-location-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fwrong-abi-location-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-call%2Fwrong-abi-location-2.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,5 +1,5 @@\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n+// needs-llvm-components: arm\n #![feature(abi_c_cmse_nonsecure_call)]\n #![no_std]\n "}, {"sha": "866f5416ad438ae8872616790129bb710210847a", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-entry/params-on-registers.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-registers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-registers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-registers.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,6 +1,6 @@\n // build-pass\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n+// needs-llvm-components: arm\n #![feature(cmse_nonsecure_entry)]\n #![no_std]\n "}, {"sha": "b01031f035e299ce6abb9ddd28b0cf13e81fdea9", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-entry/params-on-stack.rs", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-stack.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-stack.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fparams-on-stack.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,10 +1,15 @@\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n-#![feature(cmse_nonsecure_entry)]\n-#![no_std]\n+// needs-llvm-components: arm\n+// min-llvm-version: 11.0\n+#![feature(cmse_nonsecure_entry, no_core, lang_items)]\n+#![no_core]\n+#[lang=\"sized\"]\n+trait Sized { }\n+#[lang=\"copy\"]\n+trait Copy { }\n \n #[no_mangle]\n #[cmse_nonsecure_entry]\n-pub extern \"C\" fn entry_function(a: u32, b: u32, c: u32, d: u32, e: u32) -> u32 { //~ ERROR\n-    a + b + c + d + e\n+pub extern \"C\" fn entry_function(_: u32, _: u32, _: u32, _: u32, e: u32) -> u32 {\n+    e\n }"}, {"sha": "da8abe77777a6e749290fd23b6adb5555093237b", "filename": "src/test/ui/cmse-nonsecure/cmse-nonsecure-entry/wrong-abi.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fwrong-abi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fwrong-abi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcmse-nonsecure%2Fcmse-nonsecure-entry%2Fwrong-abi.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,5 +1,5 @@\n // compile-flags: --target thumbv8m.main-none-eabi --crate-type lib\n-// only-thumbv8m.main-none-eabi\n+// needs-llvm-components: arm\n #![feature(cmse_nonsecure_entry)]\n #![no_std]\n "}, {"sha": "de4ccc185608c82ebadf5dbdd65a099ece02130a", "filename": "src/test/ui/crate-loading/missing-std.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcrate-loading%2Fmissing-std.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fcrate-loading%2Fmissing-std.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fcrate-loading%2Fmissing-std.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,4 +1,5 @@\n // compile-flags: --target x86_64-unknown-uefi\n+// needs-llvm-components: x86\n // rustc-env:CARGO=/usr/bin/cargo\n // rustc-env:RUSTUP_HOME=/home/bors/.rustup\n #![no_core]"}, {"sha": "7a6b9eda3fa123a40675c5a620231ac6eca89abb", "filename": "src/test/ui/sanitize/crt-static.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fsanitize%2Fcrt-static.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fsanitize%2Fcrt-static.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsanitize%2Fcrt-static.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,4 +1,5 @@\n // compile-flags: -Z sanitizer=address -C target-feature=+crt-static --target x86_64-unknown-linux-gnu\n+// needs-llvm-components: x86\n \n #![feature(no_core)]\n #![no_core]"}, {"sha": "bcafc2891fda82893e86abbde549049db8e5c75d", "filename": "src/test/ui/sanitize/incompatible.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fsanitize%2Fincompatible.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fsanitize%2Fincompatible.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsanitize%2Fincompatible.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,4 +1,5 @@\n // compile-flags: -Z sanitizer=address -Z sanitizer=memory --target x86_64-unknown-linux-gnu\n+// needs-llvm-components: x86\n // error-pattern: error: `-Zsanitizer=address` is incompatible with `-Zsanitizer=memory`\n \n #![feature(no_core)]"}, {"sha": "9f29c76353bac9da0537ae523a9f837443d4853b", "filename": "src/test/ui/sanitize/unsupported-target.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fsanitize%2Funsupported-target.rs", "raw_url": "https://github.com/rust-lang/rust/raw/493fe8008b33c576240bfa6979760e0e5482d5af/src%2Ftest%2Fui%2Fsanitize%2Funsupported-target.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsanitize%2Funsupported-target.rs?ref=493fe8008b33c576240bfa6979760e0e5482d5af", "patch": "@@ -1,4 +1,5 @@\n // compile-flags: -Z sanitizer=leak --target i686-unknown-linux-gnu\n+// needs-llvm-components: x86\n // error-pattern: error: leak sanitizer is not supported for this target\n #![feature(no_core)]\n #![no_core]"}]}