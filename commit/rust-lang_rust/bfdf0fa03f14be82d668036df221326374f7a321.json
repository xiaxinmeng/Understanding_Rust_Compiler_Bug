{"sha": "bfdf0fa03f14be82d668036df221326374f7a321", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmZGYwZmEwM2YxNGJlODJkNjY4MDM2ZGYyMjEzMjYzNzRmN2EzMjE=", "commit": {"author": {"name": "Yoshitomo Nakanishi", "email": "yurayura.rounin.3@gmail.com", "date": "2021-02-22T02:45:25Z"}, "committer": {"name": "Yoshitomo Nakanishi", "email": "yurayura.rounin.3@gmail.com", "date": "2021-02-22T02:45:25Z"}, "message": "Describe the order of fields in struct ctor doesn't affect the resulted instance", "tree": {"sha": "69faeea69e1ff9638be281b744a90aa0cfaf79bc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/69faeea69e1ff9638be281b744a90aa0cfaf79bc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bfdf0fa03f14be82d668036df221326374f7a321", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bfdf0fa03f14be82d668036df221326374f7a321", "html_url": "https://github.com/rust-lang/rust/commit/bfdf0fa03f14be82d668036df221326374f7a321", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bfdf0fa03f14be82d668036df221326374f7a321/comments", "author": {"login": "Y-Nak", "id": 6376004, "node_id": "MDQ6VXNlcjYzNzYwMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6376004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Y-Nak", "html_url": "https://github.com/Y-Nak", "followers_url": "https://api.github.com/users/Y-Nak/followers", "following_url": "https://api.github.com/users/Y-Nak/following{/other_user}", "gists_url": "https://api.github.com/users/Y-Nak/gists{/gist_id}", "starred_url": "https://api.github.com/users/Y-Nak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Y-Nak/subscriptions", "organizations_url": "https://api.github.com/users/Y-Nak/orgs", "repos_url": "https://api.github.com/users/Y-Nak/repos", "events_url": "https://api.github.com/users/Y-Nak/events{/privacy}", "received_events_url": "https://api.github.com/users/Y-Nak/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Y-Nak", "id": 6376004, "node_id": "MDQ6VXNlcjYzNzYwMDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/6376004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Y-Nak", "html_url": "https://github.com/Y-Nak", "followers_url": "https://api.github.com/users/Y-Nak/followers", "following_url": "https://api.github.com/users/Y-Nak/following{/other_user}", "gists_url": "https://api.github.com/users/Y-Nak/gists{/gist_id}", "starred_url": "https://api.github.com/users/Y-Nak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Y-Nak/subscriptions", "organizations_url": "https://api.github.com/users/Y-Nak/orgs", "repos_url": "https://api.github.com/users/Y-Nak/repos", "events_url": "https://api.github.com/users/Y-Nak/events{/privacy}", "received_events_url": "https://api.github.com/users/Y-Nak/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d646aa2ae7a27495dd87344ffdad4b66c1bd4425", "url": "https://api.github.com/repos/rust-lang/rust/commits/d646aa2ae7a27495dd87344ffdad4b66c1bd4425", "html_url": "https://github.com/rust-lang/rust/commit/d646aa2ae7a27495dd87344ffdad4b66c1bd4425"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "c5afdf530eb70da76cbfa7d9dcfee0091243b84f", "filename": "clippy_lints/src/inconsistent_struct_constructor.rs", "status": "modified", "additions": 19, "deletions": 3, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/bfdf0fa03f14be82d668036df221326374f7a321/clippy_lints%2Fsrc%2Finconsistent_struct_constructor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bfdf0fa03f14be82d668036df221326374f7a321/clippy_lints%2Fsrc%2Finconsistent_struct_constructor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finconsistent_struct_constructor.rs?ref=bfdf0fa03f14be82d668036df221326374f7a321", "patch": "@@ -13,7 +13,23 @@ declare_clippy_lint! {\n     /// **What it does:** Checks for struct constructors where the order of the field init\n     /// shorthand in the constructor is inconsistent with the order in the struct definition.\n     ///\n-    /// **Why is this bad?** It decreases readability and consistency.\n+    /// **Why is this bad?** Since the order of fields in a constructor doesn't affect the\n+    /// resulted instance as the below example indicates,\n+    ///\n+    /// ```rust\n+    /// #[derive(Debug, PartialEq, Eq)]\n+    /// struct Foo {\n+    ///     x: i32,\n+    ///     y: i32,\n+    /// }\n+    /// let x = 1;\n+    /// let y = 2;\n+    ///\n+    /// // This assertion never fails.\n+    /// assert_eq!(Foo { x, y }, Foo { y, x });\n+    /// ```\n+    ///\n+    /// inconsistent order means nothing and just decreases readability and consistency.\n     ///\n     /// **Known problems:** None.\n     ///\n@@ -74,12 +90,12 @@ impl LateLintPass<'_> for InconsistentStructConstructor {\n                 for ident in idents {\n                     fields_snippet.push_str(&format!(\"{}, \", ident));\n                 }\n-                fields_snippet.push_str(&format!(\"{}\", last_ident));\n+                fields_snippet.push_str(&last_ident.to_string());\n \n                 let base_snippet = if let Some(base) = base {\n                         format!(\", ..{}\", snippet(cx, base.span, \"..\"))\n                     } else {\n-                        \"\".to_string()\n+                        String::new()\n                     };\n \n                 let sugg = format!(\"{} {{ {}{} }}\","}]}