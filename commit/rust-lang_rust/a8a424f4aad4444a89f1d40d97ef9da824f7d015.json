{"sha": "a8a424f4aad4444a89f1d40d97ef9da824f7d015", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE4YTQyNGY0YWFkNDQ0NGE4OWYxZDQwZDk3ZWY5ZGE4MjRmN2QwMTU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-10-20T19:46:38Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-10-20T19:46:38Z"}, "message": "Rollup merge of #78133 - JohnTitor:mir-tests, r=lcnr\n\nAdd some MIR-related regression tests\n\nCloses #68841\nCloses #75053\nCloses #76375\nCloses #77911\n\nI think they're fixed by #77306.", "tree": {"sha": "930e510ef4d275a7ce85e72f68ae64741a57aa97", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/930e510ef4d275a7ce85e72f68ae64741a57aa97"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a8a424f4aad4444a89f1d40d97ef9da824f7d015", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfjz6fCRBK7hj4Ov3rIwAAdHIIAHJvlyNgEWNfWwLjgakkVBHF\niHv79nhOp83DhX3cfxl0l6heJfFk+TXozLYKQtufpIA49iOx+x2x/CnDywtNUD0G\nIvjpbI1nUur0mUYvL7d333OH4bqMOcaiTz83T9zlL7iOkefUVGKWAWcwBPUEmL+J\nyx3xuiC8R7PSkkR/tQLZ07FKdlKxqs+rUnt7WmESu5cTRp3ey4r3UiwKBg/npnNc\nA0md4fHhfRoUQcvwmmnyUU2FVtQg79yF9xer9UKYbTXIWCtI/f4viNt66w9dWpHo\nte2RBwhocnzJQvtIjZlEKP+Z5WrJZ4HVpgXRtsSfox//+QepKzBWnln//QtbDhc=\n=BoGI\n-----END PGP SIGNATURE-----\n", "payload": "tree 930e510ef4d275a7ce85e72f68ae64741a57aa97\nparent adda858356a4c7059e612977a1563adbdfd940bb\nparent a619865889f97f0539a22a29502481c379f29b09\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1603223198 +0200\ncommitter GitHub <noreply@github.com> 1603223198 +0200\n\nRollup merge of #78133 - JohnTitor:mir-tests, r=lcnr\n\nAdd some MIR-related regression tests\n\nCloses #68841\nCloses #75053\nCloses #76375\nCloses #77911\n\nI think they're fixed by #77306.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a8a424f4aad4444a89f1d40d97ef9da824f7d015", "html_url": "https://github.com/rust-lang/rust/commit/a8a424f4aad4444a89f1d40d97ef9da824f7d015", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a8a424f4aad4444a89f1d40d97ef9da824f7d015/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "adda858356a4c7059e612977a1563adbdfd940bb", "url": "https://api.github.com/repos/rust-lang/rust/commits/adda858356a4c7059e612977a1563adbdfd940bb", "html_url": "https://github.com/rust-lang/rust/commit/adda858356a4c7059e612977a1563adbdfd940bb"}, {"sha": "a619865889f97f0539a22a29502481c379f29b09", "url": "https://api.github.com/repos/rust-lang/rust/commits/a619865889f97f0539a22a29502481c379f29b09", "html_url": "https://github.com/rust-lang/rust/commit/a619865889f97f0539a22a29502481c379f29b09"}], "stats": {"total": 108, "additions": 108, "deletions": 0}, "files": [{"sha": "f8b318d58ba2adb115f16953c71ad723561557c8", "filename": "src/test/ui/mir/auxiliary/issue_76375_aux.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fauxiliary%2Fissue_76375_aux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fauxiliary%2Fissue_76375_aux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fauxiliary%2Fissue_76375_aux.rs?ref=a8a424f4aad4444a89f1d40d97ef9da824f7d015", "patch": "@@ -0,0 +1,14 @@\n+// edition:2018\n+// compile-flags: -Z mir-opt-level=2 -Z unsound-mir-opts\n+\n+#[inline(always)]\n+pub fn f(s: bool) -> String {\n+    let a = \"Hello world!\".to_string();\n+    let b = a;\n+    let c = b;\n+    if s {\n+        c\n+    } else {\n+        String::new()\n+    }\n+}"}, {"sha": "14884a97fabcbc4763b9954875d3c1780852a939", "filename": "src/test/ui/mir/issue-68841.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-68841.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-68841.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fissue-68841.rs?ref=a8a424f4aad4444a89f1d40d97ef9da824f7d015", "patch": "@@ -0,0 +1,15 @@\n+// compile-flags: -Z mir-opt-level=2\n+// edition:2018\n+// build-pass\n+\n+#![feature(async_closure)]\n+\n+use std::future::Future;\n+\n+fn async_closure() -> impl Future<Output = u8> {\n+    (async move || -> u8 { 42 })()\n+}\n+\n+fn main() {\n+    let _fut = async_closure();\n+}"}, {"sha": "6e7211c2ee60e29918107a4f5171a992f56cfad2", "filename": "src/test/ui/mir/issue-75053.rs", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-75053.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-75053.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fissue-75053.rs?ref=a8a424f4aad4444a89f1d40d97ef9da824f7d015", "patch": "@@ -0,0 +1,48 @@\n+// compile-flags: -Z mir-opt-level=2\n+// build-pass\n+\n+#![feature(type_alias_impl_trait)]\n+\n+use std::marker::PhantomData;\n+\n+trait MyIndex<T> {\n+    type O;\n+    fn my_index(self) -> Self::O;\n+}\n+trait MyFrom<T>: Sized {\n+    type Error;\n+    fn my_from(value: T) -> Result<Self, Self::Error>;\n+}\n+\n+trait F {}\n+impl F for () {}\n+type DummyT<T> = impl F;\n+fn _dummy_t<T>() -> DummyT<T> {}\n+\n+struct Phantom1<T>(PhantomData<T>);\n+struct Phantom2<T>(PhantomData<T>);\n+struct Scope<T>(Phantom2<DummyT<T>>);\n+\n+impl<T> Scope<T> {\n+    fn new() -> Self {\n+        unimplemented!()\n+    }\n+}\n+\n+impl<T> MyFrom<Phantom2<T>> for Phantom1<T> {\n+    type Error = ();\n+    fn my_from(_: Phantom2<T>) -> Result<Self, Self::Error> {\n+        unimplemented!()\n+    }\n+}\n+\n+impl<T: MyFrom<Phantom2<DummyT<U>>>, U> MyIndex<Phantom1<T>> for Scope<U> {\n+    type O = T;\n+    fn my_index(self) -> Self::O {\n+        MyFrom::my_from(self.0).ok().unwrap()\n+    }\n+}\n+\n+fn main() {\n+    let _pos: Phantom1<DummyT<()>> = Scope::new().my_index();\n+}"}, {"sha": "ef459f6a28ec8864669d944a5b889a0d3a47bcde", "filename": "src/test/ui/mir/issue-76375.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-76375.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-76375.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fissue-76375.rs?ref=a8a424f4aad4444a89f1d40d97ef9da824f7d015", "patch": "@@ -0,0 +1,15 @@\n+// edition:2018\n+// build-pass\n+// compile-flags: -Z mir-opt-level=2 -L.\n+// aux-build:issue_76375_aux.rs\n+\n+#![crate_type = \"lib\"]\n+\n+extern crate issue_76375_aux;\n+\n+pub async fn g() {\n+    issue_76375_aux::f(true);\n+    h().await;\n+}\n+\n+pub async fn h() {}"}, {"sha": "b24faa6f885c78b078289086ecc8a54073fa40dd", "filename": "src/test/ui/mir/issue-77911.rs", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-77911.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8a424f4aad4444a89f1d40d97ef9da824f7d015/src%2Ftest%2Fui%2Fmir%2Fissue-77911.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmir%2Fissue-77911.rs?ref=a8a424f4aad4444a89f1d40d97ef9da824f7d015", "patch": "@@ -0,0 +1,16 @@\n+// compile-flags: -Z mir-opt-level=2\n+// ignore-cloudabi no std::fs\n+// build-pass\n+\n+use std::fs::File;\n+use std::io::{BufRead, BufReader};\n+\n+fn file_lines() -> impl Iterator<Item = String> {\n+    BufReader::new(File::open(\"\").unwrap())\n+        .lines()\n+        .map(Result::unwrap)\n+}\n+\n+fn main() {\n+    for _ in file_lines() {}\n+}"}]}