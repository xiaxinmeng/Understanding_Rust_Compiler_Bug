{"sha": "4bf350dc388792fe859580ad92b422f701573616", "node_id": "C_kwDOAAsO6NoAKDRiZjM1MGRjMzg4NzkyZmU4NTk1ODBhZDkyYjQyMmY3MDE1NzM2MTY", "commit": {"author": {"name": "b-naber", "email": "bn263@gmx.de", "date": "2022-08-10T07:58:53Z"}, "committer": {"name": "b-naber", "email": "bn263@gmx.de", "date": "2022-08-10T08:22:07Z"}, "message": "add test", "tree": {"sha": "a194d1d7bddceabd0670591bac382161f921b2d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a194d1d7bddceabd0670591bac382161f921b2d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4bf350dc388792fe859580ad92b422f701573616", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4bf350dc388792fe859580ad92b422f701573616", "html_url": "https://github.com/rust-lang/rust/commit/4bf350dc388792fe859580ad92b422f701573616", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4bf350dc388792fe859580ad92b422f701573616/comments", "author": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "site_admin": false}, "committer": {"login": "b-naber", "id": 71934879, "node_id": "MDQ6VXNlcjcxOTM0ODc5", "avatar_url": "https://avatars.githubusercontent.com/u/71934879?v=4", "gravatar_id": "", "url": "https://api.github.com/users/b-naber", "html_url": "https://github.com/b-naber", "followers_url": "https://api.github.com/users/b-naber/followers", "following_url": "https://api.github.com/users/b-naber/following{/other_user}", "gists_url": "https://api.github.com/users/b-naber/gists{/gist_id}", "starred_url": "https://api.github.com/users/b-naber/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/b-naber/subscriptions", "organizations_url": "https://api.github.com/users/b-naber/orgs", "repos_url": "https://api.github.com/users/b-naber/repos", "events_url": "https://api.github.com/users/b-naber/events{/privacy}", "received_events_url": "https://api.github.com/users/b-naber/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "52830efdcc216a78319fabeb26259570614686ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/52830efdcc216a78319fabeb26259570614686ca", "html_url": "https://github.com/rust-lang/rust/commit/52830efdcc216a78319fabeb26259570614686ca"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "4e9d3626aa89c82be790cd1036addc6738ac1e70", "filename": "src/test/ui/const-generics/issues/issue-100313.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/4bf350dc388792fe859580ad92b422f701573616/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-100313.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4bf350dc388792fe859580ad92b422f701573616/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-100313.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-100313.rs?ref=4bf350dc388792fe859580ad92b422f701573616", "patch": "@@ -0,0 +1,21 @@\n+#![allow(incomplete_features)]\n+#![feature(const_mut_refs)]\n+#![feature(adt_const_params)]\n+\n+struct T<const B: &'static bool>;\n+\n+impl <const B: &'static bool> T<B> {\n+    const fn set_false(&self) {\n+        unsafe {\n+            *(B as *const bool as *mut bool) = false;\n+            //~^ ERROR evaluation of constant value failed [E0080]\n+        }\n+    }\n+}\n+\n+const _: () = {\n+    let x = T::<{&true}>;\n+    x.set_false();\n+};\n+\n+fn main() {}"}, {"sha": "f3ce357c2bb8d9b8f221d0f9e436b36c4a9eb84e", "filename": "src/test/ui/const-generics/issues/issue-100313.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/4bf350dc388792fe859580ad92b422f701573616/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-100313.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4bf350dc388792fe859580ad92b422f701573616/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-100313.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fissues%2Fissue-100313.stderr?ref=4bf350dc388792fe859580ad92b422f701573616", "patch": "@@ -0,0 +1,15 @@\n+error[E0080]: evaluation of constant value failed\n+  --> $DIR/issue-100313.rs:10:13\n+   |\n+LL |             *(B as *const bool as *mut bool) = false;\n+   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |             |\n+   |             writing to alloc7 which is read-only\n+   |             inside `T::<&true>::set_false` at $DIR/issue-100313.rs:10:13\n+...\n+LL |     x.set_false();\n+   |     ------------- inside `_` at $DIR/issue-100313.rs:18:5\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0080`."}]}