{"sha": "ec0a00e53980619a6313ff4f01099a1aebcfd9e6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVjMGEwMGU1Mzk4MDYxOWE2MzEzZmY0ZjAxMDk5YTFhZWJjZmQ5ZTY=", "commit": {"author": {"name": "Eduardo Broto", "email": "ebroto@tutanota.com", "date": "2020-05-24T19:17:54Z"}, "committer": {"name": "Eduardo Broto", "email": "ebroto@tutanota.com", "date": "2020-05-25T18:00:08Z"}, "message": "Use find_map instead of find() + map()", "tree": {"sha": "29acfca2edf36f8d117cda47bb95f0372aafc055", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29acfca2edf36f8d117cda47bb95f0372aafc055"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ec0a00e53980619a6313ff4f01099a1aebcfd9e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ec0a00e53980619a6313ff4f01099a1aebcfd9e6", "html_url": "https://github.com/rust-lang/rust/commit/ec0a00e53980619a6313ff4f01099a1aebcfd9e6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ec0a00e53980619a6313ff4f01099a1aebcfd9e6/comments", "author": {"login": "ebroto", "id": 816908, "node_id": "MDQ6VXNlcjgxNjkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/816908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebroto", "html_url": "https://github.com/ebroto", "followers_url": "https://api.github.com/users/ebroto/followers", "following_url": "https://api.github.com/users/ebroto/following{/other_user}", "gists_url": "https://api.github.com/users/ebroto/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebroto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebroto/subscriptions", "organizations_url": "https://api.github.com/users/ebroto/orgs", "repos_url": "https://api.github.com/users/ebroto/repos", "events_url": "https://api.github.com/users/ebroto/events{/privacy}", "received_events_url": "https://api.github.com/users/ebroto/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ebroto", "id": 816908, "node_id": "MDQ6VXNlcjgxNjkwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/816908?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebroto", "html_url": "https://github.com/ebroto", "followers_url": "https://api.github.com/users/ebroto/followers", "following_url": "https://api.github.com/users/ebroto/following{/other_user}", "gists_url": "https://api.github.com/users/ebroto/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebroto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebroto/subscriptions", "organizations_url": "https://api.github.com/users/ebroto/orgs", "repos_url": "https://api.github.com/users/ebroto/repos", "events_url": "https://api.github.com/users/ebroto/events{/privacy}", "received_events_url": "https://api.github.com/users/ebroto/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8642fc97dd1a9b4f0291726c47ec97d15599d74d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8642fc97dd1a9b4f0291726c47ec97d15599d74d", "html_url": "https://github.com/rust-lang/rust/commit/8642fc97dd1a9b4f0291726c47ec97d15599d74d"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "b6770804e180118736898314e6f94615d67a93ec", "filename": "clippy_lints/src/multiple_crate_versions.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ec0a00e53980619a6313ff4f01099a1aebcfd9e6/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ec0a00e53980619a6313ff4f01099a1aebcfd9e6/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmultiple_crate_versions.rs?ref=ec0a00e53980619a6313ff4f01099a1aebcfd9e6", "patch": "@@ -37,7 +37,6 @@ declare_clippy_lint! {\n declare_lint_pass!(MultipleCrateVersions => [MULTIPLE_CRATE_VERSIONS]);\n \n impl LateLintPass<'_, '_> for MultipleCrateVersions {\n-    #[allow(clippy::find_map)]\n     fn check_crate(&mut self, cx: &LateContext<'_, '_>, _: &Crate<'_>) {\n         if !run_lints(cx, &[MULTIPLE_CRATE_VERSIONS], CRATE_HIR_ID) {\n             return;\n@@ -56,7 +55,9 @@ impl LateLintPass<'_, '_> for MultipleCrateVersions {\n \n         if_chain! {\n             if let Some(resolve) = &metadata.resolve;\n-            if let Some(local_id) = packages.iter().find(|p| p.name == *local_name).map(|p| &p.id);\n+            if let Some(local_id) = packages\n+                .iter()\n+                .find_map(|p| if p.name == *local_name { Some(&p.id) } else { None });\n             then {\n                 for (name, group) in &packages.iter().group_by(|p| p.name.clone()) {\n                     let group: Vec<&Package> = group.collect();"}]}