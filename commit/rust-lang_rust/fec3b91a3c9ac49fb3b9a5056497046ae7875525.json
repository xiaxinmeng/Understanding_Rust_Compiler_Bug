{"sha": "fec3b91a3c9ac49fb3b9a5056497046ae7875525", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZlYzNiOTFhM2M5YWM0OWZiM2I5YTUwNTY0OTcwNDZhZTc4NzU1MjU=", "commit": {"author": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-06-06T04:17:16Z"}, "committer": {"name": "Tim Chevalier", "email": "chevalier@alum.wellesley.edu", "date": "2012-06-06T04:17:16Z"}, "message": "In reachability, visit class ctors", "tree": {"sha": "84b05c80368ead06e499c1c295b2eb7d92c5931e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/84b05c80368ead06e499c1c295b2eb7d92c5931e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fec3b91a3c9ac49fb3b9a5056497046ae7875525", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fec3b91a3c9ac49fb3b9a5056497046ae7875525", "html_url": "https://github.com/rust-lang/rust/commit/fec3b91a3c9ac49fb3b9a5056497046ae7875525", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fec3b91a3c9ac49fb3b9a5056497046ae7875525/comments", "author": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "committer": {"login": "catamorphism", "id": 427212, "node_id": "MDQ6VXNlcjQyNzIxMg==", "avatar_url": "https://avatars.githubusercontent.com/u/427212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/catamorphism", "html_url": "https://github.com/catamorphism", "followers_url": "https://api.github.com/users/catamorphism/followers", "following_url": "https://api.github.com/users/catamorphism/following{/other_user}", "gists_url": "https://api.github.com/users/catamorphism/gists{/gist_id}", "starred_url": "https://api.github.com/users/catamorphism/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/catamorphism/subscriptions", "organizations_url": "https://api.github.com/users/catamorphism/orgs", "repos_url": "https://api.github.com/users/catamorphism/repos", "events_url": "https://api.github.com/users/catamorphism/events{/privacy}", "received_events_url": "https://api.github.com/users/catamorphism/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8972588583398b207f0f7033b2af20bca509eba7", "url": "https://api.github.com/repos/rust-lang/rust/commits/8972588583398b207f0f7033b2af20bca509eba7", "html_url": "https://github.com/rust-lang/rust/commit/8972588583398b207f0f7033b2af20bca509eba7"}], "stats": {"total": 4, "additions": 4, "deletions": 0}, "files": [{"sha": "25c60aa2793b8b5f22ddceabfb8509b2b77c21c8", "filename": "src/rustc/middle/trans/reachable.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fec3b91a3c9ac49fb3b9a5056497046ae7875525/src%2Frustc%2Fmiddle%2Ftrans%2Freachable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fec3b91a3c9ac49fb3b9a5056497046ae7875525/src%2Frustc%2Fmiddle%2Ftrans%2Freachable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Freachable.rs?ref=fec3b91a3c9ac49fb3b9a5056497046ae7875525", "patch": "@@ -63,6 +63,10 @@ fn traverse_def_id(cx: ctx, did: def_id) {\n       ast_map::node_method(_, impl_id, _) { traverse_def_id(cx, impl_id); }\n       ast_map::node_native_item(item, _, _) { cx.rmap.insert(item.id, ()); }\n       ast_map::node_variant(v, _, _) { cx.rmap.insert(v.node.id, ()); }\n+      // If it's a class ctor, consider the parent reachable\n+      ast_map::node_ctor(_, _, ast_map::class_ctor(_, parent_id), _) {\n+        traverse_def_id(cx, parent_id);\n+      }\n       _ {}\n     }\n }"}]}