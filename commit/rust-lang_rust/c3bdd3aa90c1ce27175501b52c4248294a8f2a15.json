{"sha": "c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMzYmRkM2FhOTBjMWNlMjcxNzU1MDFiNTJjNDI0ODI5NGE4ZjJhMTU=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2018-05-01T22:26:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-05-01T22:26:49Z"}, "message": "Merge pull request #2665 from topecongiro/issue-2647\n\nUse correct one line width for list attribute", "tree": {"sha": "730417031015859a4d7cf4ee4b86a93405cfdb6a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/730417031015859a4d7cf4ee4b86a93405cfdb6a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJa6OmpCRBK7hj4Ov3rIwAAdHIIAKOEY/92/cmGlkhHSJLYTEkg\nqFQCZDRlEqaDbB4qnU4sKFVOrSZP2YLm1vS+Zz6L5h6lwkeKhnrl8RYBk9PFz/Ij\n5f+fgpoFbcKGJ9esAzMQ5a0wtGBRwTkmEIGG7Kci3Uw3oy+Q6RHxOXxgRsQ5SVzt\n+8IHumxI7RInDCFjdiZDO1dA15ahl7mB0PNneq4U6Nq3TRSb2w//7vV7FcgJ44kI\nhon0Ixw/uJ/7sHqd4xj/E9j7veLnAy85Rxk9TdhcMCadkGwuyUYFqbIHwMtKEqx8\n1ETiMlcFU/4d2MKbOXCkqEz8cvtWp9iB0POEreq+Cdt8s/4BI4YRltpPA+RU11w=\n=I2lb\n-----END PGP SIGNATURE-----\n", "payload": "tree 730417031015859a4d7cf4ee4b86a93405cfdb6a\nparent d8982e5efe8fda1d6f64e88a67da2f05b6af225e\nparent 61a401ae5147312daf1ccbe92156e47d3580e7cb\nauthor Nick Cameron <nrc@ncameron.org> 1525213609 +1200\ncommitter GitHub <noreply@github.com> 1525213609 +1200\n\nMerge pull request #2665 from topecongiro/issue-2647\n\nUse correct one line width for list attribute"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "html_url": "https://github.com/rust-lang/rust/commit/c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8982e5efe8fda1d6f64e88a67da2f05b6af225e", "url": "https://api.github.com/repos/rust-lang/rust/commits/d8982e5efe8fda1d6f64e88a67da2f05b6af225e", "html_url": "https://github.com/rust-lang/rust/commit/d8982e5efe8fda1d6f64e88a67da2f05b6af225e"}, {"sha": "61a401ae5147312daf1ccbe92156e47d3580e7cb", "url": "https://api.github.com/repos/rust-lang/rust/commits/61a401ae5147312daf1ccbe92156e47d3580e7cb", "html_url": "https://github.com/rust-lang/rust/commit/61a401ae5147312daf1ccbe92156e47d3580e7cb"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "83de61c5e253addf6a2188fe305b501d4f392580", "filename": "src/attr.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/src%2Fattr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/src%2Fattr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fattr.rs?ref=c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "patch": "@@ -247,7 +247,8 @@ impl Rewrite for ast::MetaItem {\n                     config: context.config,\n                 };\n                 let item_str = write_list(&item_vec, &fmt)?;\n-                let one_line_budget = shape.offset_left(name.len())?.sub_width(2)?.width;\n+                // 3 = \"()\" and \"]\"\n+                let one_line_budget = shape.offset_left(name.len())?.sub_width(3)?.width;\n                 if context.config.indent_style() == IndentStyle::Visual\n                     || (!item_str.contains('\\n') && item_str.len() <= one_line_budget)\n                 {"}, {"sha": "d5c244a9bf88456a8cf3f4d95e9da8bc3d6f2429", "filename": "tests/source/attrib.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/tests%2Fsource%2Fattrib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/tests%2Fsource%2Fattrib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fattrib.rs?ref=c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "patch": "@@ -157,3 +157,7 @@ pub struct HP(pub u8);\n \n // Long `#[doc = \"...\"]`\n struct A { #[doc = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"] b: i32 }\n+\n+// #2647\n+#[cfg(feature = \"this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\")]\n+pub fn foo() {}"}, {"sha": "45dc4ea8ba956f9a6bac2329c005a7d39fac3ae7", "filename": "tests/target/attrib.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/tests%2Ftarget%2Fattrib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c3bdd3aa90c1ce27175501b52c4248294a8f2a15/tests%2Ftarget%2Fattrib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fattrib.rs?ref=c3bdd3aa90c1ce27175501b52c4248294a8f2a15", "patch": "@@ -165,3 +165,9 @@ struct A {\n     #[doc = \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"]\n     b: i32,\n }\n+\n+// #2647\n+#[cfg(\n+    feature = \"this_line_is_101_characters_long_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n+)]\n+pub fn foo() {}"}]}