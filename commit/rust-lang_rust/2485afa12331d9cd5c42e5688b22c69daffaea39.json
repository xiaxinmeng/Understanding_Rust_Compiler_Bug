{"sha": "2485afa12331d9cd5c42e5688b22c69daffaea39", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI0ODVhZmExMjMzMWQ5Y2Q1YzQyZTU2ODhiMjJjNjlkYWZmYWVhMzk=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-11-29T02:55:19Z"}, "committer": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-11-29T02:55:19Z"}, "message": "Deploy builds both with asserts enabled and asserts disabled to CI.\n\nThis also removes uploads to the 'try' bucket, and instead dumps\neverything into the two rustc-builds and rustc-builds-alt buckets. This\nmakes lives easier, as there is only one location for a given \"type\" of\nbuild, and since we have the git commit hash in the filenames, this is\nfine; we won't run into uploads of the same commit.", "tree": {"sha": "09b4110878eb56a88e5d9cb62e238d8f0a696305", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/09b4110878eb56a88e5d9cb62e238d8f0a696305"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2485afa12331d9cd5c42e5688b22c69daffaea39", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2485afa12331d9cd5c42e5688b22c69daffaea39", "html_url": "https://github.com/rust-lang/rust/commit/2485afa12331d9cd5c42e5688b22c69daffaea39", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2485afa12331d9cd5c42e5688b22c69daffaea39/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "77ab3a1d5ff69c0cb3eb85a75ef734eaf7429f1b", "url": "https://api.github.com/repos/rust-lang/rust/commits/77ab3a1d5ff69c0cb3eb85a75ef734eaf7429f1b", "html_url": "https://github.com/rust-lang/rust/commit/77ab3a1d5ff69c0cb3eb85a75ef734eaf7429f1b"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "b0d05655e24dfbfda5026851a07eb5351f310e12", "filename": ".travis.yml", "status": "modified", "additions": 23, "deletions": 6, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/2485afa12331d9cd5c42e5688b22c69daffaea39/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/2485afa12331d9cd5c42e5688b22c69daffaea39/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=2485afa12331d9cd5c42e5688b22c69daffaea39", "patch": "@@ -16,7 +16,7 @@ matrix:\n       if: type = pull_request OR branch = auto\n \n     - env: IMAGE=dist-x86_64-linux DEPLOY=1\n-      if: branch = auto\n+      if: branch = try OR branch = auto\n \n     # \"alternate\" deployments, these are \"nightlies\" but don't have assertions\n     # turned on, they're deployed to a different location primarily for projects\n@@ -310,22 +310,39 @@ deploy:\n       branch: auto\n       condition: $DEPLOY = 1\n \n+  # this is the same as the above deployment provider except that it uploads to\n+  # a slightly different directory and has a different trigger\n   - provider: s3\n     bucket: rust-lang-ci2\n     skip_cleanup: true\n     local_dir: deploy\n-    upload_dir: rustc-builds-try\n+    upload_dir: rustc-builds-alt\n     acl: public_read\n     region: us-west-1\n     access_key_id: AKIAJVBODR3IA4O72THQ\n     secret_access_key:\n       secure: \"kUGd3t7JcVWFESgIlzvsM8viZgCA9Encs3creW0xLJaLSeI1iVjlJK4h/2/nO6y224AFrh/GUfsNr4/4AlxPuYb8OU5oC5Lv+Ff2JiRDYtuNpyQSKAQp+bRYytWMtrmhja91h118Mbm90cUfcLPwkdiINgJNTXhPKg5Cqu3VYn0=\"\n     on:\n-      branch: try\n+      branch: auto\n       condition: $DEPLOY_ALT = 1\n \n-  # this is the same as the above deployment provider except that it uploads to\n-  # a slightly different directory and has a different trigger\n+  # These two providers are the same as the two above, except deploy on the\n+  # try branch. Travis does not appear to provide a way to use \"or\" in these\n+  # conditions.\n+  - provider: s3\n+    bucket: rust-lang-ci2\n+    skip_cleanup: true\n+    local_dir: deploy\n+    upload_dir: rustc-builds\n+    acl: public_read\n+    region: us-west-1\n+    access_key_id: AKIAJVBODR3IA4O72THQ\n+    secret_access_key:\n+      secure: \"kUGd3t7JcVWFESgIlzvsM8viZgCA9Encs3creW0xLJaLSeI1iVjlJK4h/2/nO6y224AFrh/GUfsNr4/4AlxPuYb8OU5oC5Lv+Ff2JiRDYtuNpyQSKAQp+bRYytWMtrmhja91h118Mbm90cUfcLPwkdiINgJNTXhPKg5Cqu3VYn0=\"\n+    on:\n+      branch: try\n+      condition: $DEPLOY = 1\n+\n   - provider: s3\n     bucket: rust-lang-ci2\n     skip_cleanup: true\n@@ -337,5 +354,5 @@ deploy:\n     secret_access_key:\n       secure: \"kUGd3t7JcVWFESgIlzvsM8viZgCA9Encs3creW0xLJaLSeI1iVjlJK4h/2/nO6y224AFrh/GUfsNr4/4AlxPuYb8OU5oC5Lv+Ff2JiRDYtuNpyQSKAQp+bRYytWMtrmhja91h118Mbm90cUfcLPwkdiINgJNTXhPKg5Cqu3VYn0=\"\n     on:\n-      branch: auto\n+      branch: try\n       condition: $DEPLOY_ALT = 1"}]}