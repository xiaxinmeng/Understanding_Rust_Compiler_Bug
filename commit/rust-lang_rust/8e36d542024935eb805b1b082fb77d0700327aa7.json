{"sha": "8e36d542024935eb805b1b082fb77d0700327aa7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhlMzZkNTQyMDI0OTM1ZWI4MDViMWIwODJmYjc3ZDA3MDAzMjdhYTc=", "commit": {"author": {"name": "Johannes Linke", "email": "johannes.linke@posteo.de", "date": "2018-02-18T11:47:42Z"}, "committer": {"name": "Johannes Linke", "email": "johannes.linke@posteo.de", "date": "2018-02-18T11:50:10Z"}, "message": "Fix #2346: empty comments should not have any trailing space added", "tree": {"sha": "81bbf974c5f2da756163e059b42e6df1a21ad0a6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81bbf974c5f2da756163e059b42e6df1a21ad0a6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8e36d542024935eb805b1b082fb77d0700327aa7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8e36d542024935eb805b1b082fb77d0700327aa7", "html_url": "https://github.com/rust-lang/rust/commit/8e36d542024935eb805b1b082fb77d0700327aa7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8e36d542024935eb805b1b082fb77d0700327aa7/comments", "author": {"login": "karyon", "id": 1891915, "node_id": "MDQ6VXNlcjE4OTE5MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1891915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karyon", "html_url": "https://github.com/karyon", "followers_url": "https://api.github.com/users/karyon/followers", "following_url": "https://api.github.com/users/karyon/following{/other_user}", "gists_url": "https://api.github.com/users/karyon/gists{/gist_id}", "starred_url": "https://api.github.com/users/karyon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karyon/subscriptions", "organizations_url": "https://api.github.com/users/karyon/orgs", "repos_url": "https://api.github.com/users/karyon/repos", "events_url": "https://api.github.com/users/karyon/events{/privacy}", "received_events_url": "https://api.github.com/users/karyon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "karyon", "id": 1891915, "node_id": "MDQ6VXNlcjE4OTE5MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1891915?v=4", "gravatar_id": "", "url": "https://api.github.com/users/karyon", "html_url": "https://github.com/karyon", "followers_url": "https://api.github.com/users/karyon/followers", "following_url": "https://api.github.com/users/karyon/following{/other_user}", "gists_url": "https://api.github.com/users/karyon/gists{/gist_id}", "starred_url": "https://api.github.com/users/karyon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/karyon/subscriptions", "organizations_url": "https://api.github.com/users/karyon/orgs", "repos_url": "https://api.github.com/users/karyon/repos", "events_url": "https://api.github.com/users/karyon/events{/privacy}", "received_events_url": "https://api.github.com/users/karyon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "263104a365797151246d28e7d0d05673390a358d", "url": "https://api.github.com/repos/rust-lang/rust/commits/263104a365797151246d28e7d0d05673390a358d", "html_url": "https://github.com/rust-lang/rust/commit/263104a365797151246d28e7d0d05673390a358d"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "67678f5907457a2bd599b87e350f771e958cc7d9", "filename": "rustfmt-core/src/comment.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8e36d542024935eb805b1b082fb77d0700327aa7/rustfmt-core%2Fsrc%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e36d542024935eb805b1b082fb77d0700327aa7/rustfmt-core%2Fsrc%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustfmt-core%2Fsrc%2Fcomment.rs?ref=8e36d542024935eb805b1b082fb77d0700327aa7", "patch": "@@ -466,7 +466,7 @@ fn rewrite_comment_inner(\n     }\n \n     result.push_str(closer);\n-    if result == opener && result.ends_with(' ') {\n+    if result.ends_with(opener) && opener.ends_with(' ') {\n         // Trailing space.\n         result.pop();\n     }"}, {"sha": "07817221a510874a19b7d95160507ceb4f170811", "filename": "rustfmt-core/tests/target/issue-2346.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8e36d542024935eb805b1b082fb77d0700327aa7/rustfmt-core%2Ftests%2Ftarget%2Fissue-2346.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8e36d542024935eb805b1b082fb77d0700327aa7/rustfmt-core%2Ftests%2Ftarget%2Fissue-2346.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/rustfmt-core%2Ftests%2Ftarget%2Fissue-2346.rs?ref=8e36d542024935eb805b1b082fb77d0700327aa7", "patch": "@@ -0,0 +1,4 @@\n+// rustfmt-normalize_comments: true\n+// the following empty comment should not have any trailing space added.\n+//\n+fn main() {}"}]}