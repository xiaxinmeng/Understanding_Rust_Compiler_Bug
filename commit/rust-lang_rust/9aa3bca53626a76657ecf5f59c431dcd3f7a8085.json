{"sha": "9aa3bca53626a76657ecf5f59c431dcd3f7a8085", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhYTNiY2E1MzYyNmE3NjY1N2VjZjVmNTljNDMxZGNkM2Y3YTgwODU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-04-08T10:51:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-04-08T10:51:46Z"}, "message": "Merge #3892\n\n3892: Add L_DOLLAR for TYPE_RECOVERY_SET r=matklad a=edwin0cheng\n\nThis PR is a hot fix for issue #3861 that just prevent it make the parser being stuck.\r\n\r\nThe actual problem described in https://github.com/rust-analyzer/rust-analyzer/pull/3873#issuecomment-610208693 is a very deep rabbit hole I don't want to dig right now :(\n\nCo-authored-by: Edwin Cheng <edwin0cheng@gmail.com>", "tree": {"sha": "85b7729d3c8edbae11faad34f3d4a0d41749de18", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/85b7729d3c8edbae11faad34f3d4a0d41749de18"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9aa3bca53626a76657ecf5f59c431dcd3f7a8085", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJejazCCRBK7hj4Ov3rIwAAdHIIABmxYIGwoPoX3v6gxXIvM5i9\nMY+TUlNp0ustXXOmG/g/VoZ+xSA6n6FrPeAh57wRhJSFcEsjGTSH72yjYSeI1OZV\nfu6JMulN8jVb/xb99henIH7lEMO5e8EzAMbY1OodKbJmd55ZlS8B8KXVgLDd7b2q\nGtYQUCBlS3CKHXnjEtVvsPP9Fj7DWEHqWjyQZNPoZX3zD0icI/Ve1muIz9FodCnf\nRsYaUMzhMXqLUPqhYy1vn+zbNbdB3V1rrSfkfq2KUk0UYyl+VVudN6Io3a1V8OYD\nDCMZT5nmZ6j0IaQ2OxaSoMDelXLOftpwj1QYDpafk4tkbWFI1CA0ZuTNaUysVmU=\n=E22d\n-----END PGP SIGNATURE-----\n", "payload": "tree 85b7729d3c8edbae11faad34f3d4a0d41749de18\nparent 9e3c8438475308bffaced3d9842299676037d036\nparent 53d05448c1d44b3ac2a46d54b40c3f2653fa0312\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1586343106 +0000\ncommitter GitHub <noreply@github.com> 1586343106 +0000\n\nMerge #3892\n\n3892: Add L_DOLLAR for TYPE_RECOVERY_SET r=matklad a=edwin0cheng\n\nThis PR is a hot fix for issue #3861 that just prevent it make the parser being stuck.\r\n\r\nThe actual problem described in https://github.com/rust-analyzer/rust-analyzer/pull/3873#issuecomment-610208693 is a very deep rabbit hole I don't want to dig right now :(\n\nCo-authored-by: Edwin Cheng <edwin0cheng@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9aa3bca53626a76657ecf5f59c431dcd3f7a8085", "html_url": "https://github.com/rust-lang/rust/commit/9aa3bca53626a76657ecf5f59c431dcd3f7a8085", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9aa3bca53626a76657ecf5f59c431dcd3f7a8085/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e3c8438475308bffaced3d9842299676037d036", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e3c8438475308bffaced3d9842299676037d036", "html_url": "https://github.com/rust-lang/rust/commit/9e3c8438475308bffaced3d9842299676037d036"}, {"sha": "53d05448c1d44b3ac2a46d54b40c3f2653fa0312", "url": "https://api.github.com/repos/rust-lang/rust/commits/53d05448c1d44b3ac2a46d54b40c3f2653fa0312", "html_url": "https://github.com/rust-lang/rust/commit/53d05448c1d44b3ac2a46d54b40c3f2653fa0312"}], "stats": {"total": 19, "additions": 18, "deletions": 1}, "files": [{"sha": "254318e239d2938c8dbee05fb30a9f5e3748f62e", "filename": "crates/ra_mbe/src/tests.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/9aa3bca53626a76657ecf5f59c431dcd3f7a8085/crates%2Fra_mbe%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9aa3bca53626a76657ecf5f59c431dcd3f7a8085/crates%2Fra_mbe%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_mbe%2Fsrc%2Ftests.rs?ref=9aa3bca53626a76657ecf5f59c431dcd3f7a8085", "patch": "@@ -1614,6 +1614,23 @@ fn test_issue_2520() {\n     );\n }\n \n+#[test]\n+fn test_issue_3861() {\n+    let macro_fixture = parse_macro(\n+        r#\"\n+        macro_rules! rgb_color {\n+            ($p:expr, $t: ty) => {\n+                pub fn new() {\n+                    let _ = 0 as $t << $p;\n+                }\n+            };\n+        }\n+    \"#,\n+    );\n+\n+    macro_fixture.expand_items(r#\"rgb_color!(8 + 8, u32);\"#);\n+}\n+\n #[test]\n fn test_repeat_bad_var() {\n     // FIXME: the second rule of the macro should be removed and an error about"}, {"sha": "386969d2d7e70282d46d018d4a8632bfc968fdb5", "filename": "crates/ra_parser/src/grammar/types.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9aa3bca53626a76657ecf5f59c431dcd3f7a8085/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9aa3bca53626a76657ecf5f59c431dcd3f7a8085/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs?ref=9aa3bca53626a76657ecf5f59c431dcd3f7a8085", "patch": "@@ -7,7 +7,7 @@ pub(super) const TYPE_FIRST: TokenSet = paths::PATH_FIRST.union(token_set![\n     DYN_KW, L_ANGLE,\n ]);\n \n-const TYPE_RECOVERY_SET: TokenSet = token_set![R_PAREN, COMMA];\n+const TYPE_RECOVERY_SET: TokenSet = token_set![R_PAREN, COMMA, L_DOLLAR];\n \n pub(crate) fn type_(p: &mut Parser) {\n     type_with_bounds_cond(p, true);"}]}