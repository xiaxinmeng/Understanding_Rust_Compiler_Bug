{"sha": "8489a67f0b0ca5a973d48b27d609c91cb93cf343", "node_id": "C_kwDOAAsO6NoAKDg0ODlhNjdmMGIwY2E1YTk3M2Q0OGIyN2Q2MDljOTFjYjkzY2YzNDM", "commit": {"author": {"name": "Xiretza", "email": "xiretza@xiretza.xyz", "date": "2022-09-14T17:22:20Z"}, "committer": {"name": "Xiretza", "email": "xiretza@xiretza.xyz", "date": "2022-09-27T18:29:18Z"}, "message": "Implement IntoDiagnosticArg for rustc_ast::Path", "tree": {"sha": "e69c24d4a69303c76e0a5fcf1e55681beb5dc3b3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e69c24d4a69303c76e0a5fcf1e55681beb5dc3b3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8489a67f0b0ca5a973d48b27d609c91cb93cf343", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8489a67f0b0ca5a973d48b27d609c91cb93cf343", "html_url": "https://github.com/rust-lang/rust/commit/8489a67f0b0ca5a973d48b27d609c91cb93cf343", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8489a67f0b0ca5a973d48b27d609c91cb93cf343/comments", "author": {"login": "Xiretza", "id": 3107142, "node_id": "MDQ6VXNlcjMxMDcxNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3107142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiretza", "html_url": "https://github.com/Xiretza", "followers_url": "https://api.github.com/users/Xiretza/followers", "following_url": "https://api.github.com/users/Xiretza/following{/other_user}", "gists_url": "https://api.github.com/users/Xiretza/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiretza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiretza/subscriptions", "organizations_url": "https://api.github.com/users/Xiretza/orgs", "repos_url": "https://api.github.com/users/Xiretza/repos", "events_url": "https://api.github.com/users/Xiretza/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiretza/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Xiretza", "id": 3107142, "node_id": "MDQ6VXNlcjMxMDcxNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3107142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Xiretza", "html_url": "https://github.com/Xiretza", "followers_url": "https://api.github.com/users/Xiretza/followers", "following_url": "https://api.github.com/users/Xiretza/following{/other_user}", "gists_url": "https://api.github.com/users/Xiretza/gists{/gist_id}", "starred_url": "https://api.github.com/users/Xiretza/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Xiretza/subscriptions", "organizations_url": "https://api.github.com/users/Xiretza/orgs", "repos_url": "https://api.github.com/users/Xiretza/repos", "events_url": "https://api.github.com/users/Xiretza/events{/privacy}", "received_events_url": "https://api.github.com/users/Xiretza/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "495e271883188ece09b80ae7f405e8062853f2d3", "url": "https://api.github.com/repos/rust-lang/rust/commits/495e271883188ece09b80ae7f405e8062853f2d3", "html_url": "https://github.com/rust-lang/rust/commit/495e271883188ece09b80ae7f405e8062853f2d3"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "6432a0426b7de14ae027930552b55172373b19d8", "filename": "Cargo.lock", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8489a67f0b0ca5a973d48b27d609c91cb93cf343/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/8489a67f0b0ca5a973d48b27d609c91cb93cf343/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=8489a67f0b0ca5a973d48b27d609c91cb93cf343", "patch": "@@ -3438,6 +3438,8 @@ version = \"0.0.0\"\n dependencies = [\n  \"annotate-snippets\",\n  \"atty\",\n+ \"rustc_ast\",\n+ \"rustc_ast_pretty\",\n  \"rustc_data_structures\",\n  \"rustc_error_messages\",\n  \"rustc_hir\","}, {"sha": "1eb9dca2a2b915ca70e8222767c28e99164d0db6", "filename": "compiler/rustc_errors/Cargo.toml", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8489a67f0b0ca5a973d48b27d609c91cb93cf343/compiler%2Frustc_errors%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/8489a67f0b0ca5a973d48b27d609c91cb93cf343/compiler%2Frustc_errors%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2FCargo.toml?ref=8489a67f0b0ca5a973d48b27d609c91cb93cf343", "patch": "@@ -8,6 +8,8 @@ doctest = false\n \n [dependencies]\n tracing = \"0.1\"\n+rustc_ast = { path = \"../rustc_ast\" }\n+rustc_ast_pretty = { path = \"../rustc_ast_pretty\" }\n rustc_error_messages = { path = \"../rustc_error_messages\" }\n rustc_serialize = { path = \"../rustc_serialize\" }\n rustc_span = { path = \"../rustc_span\" }"}, {"sha": "fb409c578f6d5eb03aaa6f89db8110c21fa92c22", "filename": "compiler/rustc_errors/src/diagnostic.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8489a67f0b0ca5a973d48b27d609c91cb93cf343/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8489a67f0b0ca5a973d48b27d609c91cb93cf343/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Fdiagnostic.rs?ref=8489a67f0b0ca5a973d48b27d609c91cb93cf343", "patch": "@@ -3,6 +3,8 @@ use crate::{\n     CodeSuggestion, DiagnosticMessage, EmissionGuarantee, Level, LintDiagnosticBuilder, MultiSpan,\n     SubdiagnosticMessage, Substitution, SubstitutionPart, SuggestionStyle,\n };\n+use rustc_ast as ast;\n+use rustc_ast_pretty::pprust;\n use rustc_data_structures::fx::FxHashMap;\n use rustc_error_messages::FluentValue;\n use rustc_hir as hir;\n@@ -175,6 +177,12 @@ impl IntoDiagnosticArg for hir::ConstContext {\n     }\n }\n \n+impl IntoDiagnosticArg for ast::Path {\n+    fn into_diagnostic_arg(self) -> DiagnosticArgValue<'static> {\n+        DiagnosticArgValue::Str(Cow::Owned(pprust::path_to_string(&self)))\n+    }\n+}\n+\n /// Trait implemented by error types. This should not be implemented manually. Instead, use\n /// `#[derive(Subdiagnostic)]` -- see [rustc_macros::Subdiagnostic].\n #[cfg_attr(bootstrap, rustc_diagnostic_item = \"AddSubdiagnostic\")]"}]}