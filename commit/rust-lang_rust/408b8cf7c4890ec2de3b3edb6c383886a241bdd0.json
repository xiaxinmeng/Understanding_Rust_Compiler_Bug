{"sha": "408b8cf7c4890ec2de3b3edb6c383886a241bdd0", "node_id": "C_kwDOAAsO6NoAKDQwOGI4Y2Y3YzQ4OTBlYzJkZTNiM2VkYjZjMzgzODg2YTI0MWJkZDA", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2022-11-07T13:05:23Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-07T13:05:23Z"}, "message": "Rollup merge of #103757 - ffmancera:ff/clarify_E0207, r=jackh726\n\nMention const and lifetime parameters in error E0207\n\nError Index for E0207 must mention const and lifetime parameters. In addition, add code examples for these situations.\n\nFixes #80862", "tree": {"sha": "2e43d2ee67f2b15714ff365586ea2db07363f47f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2e43d2ee67f2b15714ff365586ea2db07363f47f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/408b8cf7c4890ec2de3b3edb6c383886a241bdd0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjaQKTCRBK7hj4Ov3rIwAAVC8IAHoG+7KM4MqEiI+2lMh3V2AI\nWsoQ6eCeSxI3KX0ikNjpZnvjGykljHBkGucpS5swL2hheVQfOjs0RC4on+68fu13\nd9By0oMLR7erjIsZWj4j+qZEyPxDz1GEb7ZhaNF26qnOkpmbuSLKzZx4ov98ru1g\nmHTFIb4S5YI47xdkD2blv47aSay2bB7Nv2sXvXZarqDs9d2VerbhCTaOExgpEKGs\nAVU3dFtV52D7C7GHdcPdhm6iZdceBHuyfMP2BIa5NdIfQqzQb90FO4INLcjeXaSd\n66bn0UISkCxA0rQygeVecLD8mHRZOI64bOVgvIDL0dRtypxWfw/+SDq70N1+Agk=\n=CVfT\n-----END PGP SIGNATURE-----\n", "payload": "tree 2e43d2ee67f2b15714ff365586ea2db07363f47f\nparent ca08a3265511d3b0c2f3c3cf06e7acc10b73a5ce\nparent 2159df22a287a024e194d83763c67fbcfd001150\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1667826323 +0530\ncommitter GitHub <noreply@github.com> 1667826323 +0530\n\nRollup merge of #103757 - ffmancera:ff/clarify_E0207, r=jackh726\n\nMention const and lifetime parameters in error E0207\n\nError Index for E0207 must mention const and lifetime parameters. In addition, add code examples for these situations.\n\nFixes #80862\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/408b8cf7c4890ec2de3b3edb6c383886a241bdd0", "html_url": "https://github.com/rust-lang/rust/commit/408b8cf7c4890ec2de3b3edb6c383886a241bdd0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/408b8cf7c4890ec2de3b3edb6c383886a241bdd0/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca08a3265511d3b0c2f3c3cf06e7acc10b73a5ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca08a3265511d3b0c2f3c3cf06e7acc10b73a5ce", "html_url": "https://github.com/rust-lang/rust/commit/ca08a3265511d3b0c2f3c3cf06e7acc10b73a5ce"}, {"sha": "2159df22a287a024e194d83763c67fbcfd001150", "url": "https://api.github.com/repos/rust-lang/rust/commits/2159df22a287a024e194d83763c67fbcfd001150", "html_url": "https://github.com/rust-lang/rust/commit/2159df22a287a024e194d83763c67fbcfd001150"}], "stats": {"total": 75, "additions": 71, "deletions": 4}, "files": [{"sha": "95e7c9fc76ce2bf00c081a386e488c4dfcf05b6e", "filename": "compiler/rustc_error_codes/src/error_codes/E0207.md", "status": "modified", "additions": 71, "deletions": 4, "changes": 75, "blob_url": "https://github.com/rust-lang/rust/blob/408b8cf7c4890ec2de3b3edb6c383886a241bdd0/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0207.md", "raw_url": "https://github.com/rust-lang/rust/raw/408b8cf7c4890ec2de3b3edb6c383886a241bdd0/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0207.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0207.md?ref=408b8cf7c4890ec2de3b3edb6c383886a241bdd0", "patch": "@@ -1,4 +1,5 @@\n-A type parameter that is specified for `impl` is not constrained.\n+A type, const or lifetime parameter that is specified for `impl` is not\n+constrained.\n \n Erroneous code example:\n \n@@ -14,15 +15,18 @@ impl<T: Default> Foo {\n }\n ```\n \n-Any type parameter of an `impl` must meet at least one of\n-the following criteria:\n+Any type or const parameter of an `impl` must meet at least one of the\n+following criteria:\n \n  - it appears in the _implementing type_ of the impl, e.g. `impl<T> Foo<T>`\n  - for a trait impl, it appears in the _implemented trait_, e.g.\n    `impl<T> SomeTrait<T> for Foo`\n  - it is bound as an associated type, e.g. `impl<T, U> SomeTrait for T\n    where T: AnotherTrait<AssocType=U>`\n \n+Any unconstrained lifetime parameter of an `impl` is not supported if the\n+lifetime parameter is used by an associated type.\n+\n ### Error example 1\n \n Suppose we have a struct `Foo` and we would like to define some methods for it.\n@@ -32,7 +36,6 @@ The problem is that the parameter `T` does not appear in the implementing type\n (`Foo`) of the impl. In this case, we can fix the error by moving the type\n parameter from the `impl` to the method `get`:\n \n-\n ```\n struct Foo;\n \n@@ -128,6 +131,70 @@ impl<T: Default> Maker<Foo<T>> for FooMaker {\n }\n ```\n \n+### Error example 3\n+\n+Suppose we have a struct `Foo` and we would like to define some methods for it.\n+The following code example has a definition which leads to a compiler error:\n+\n+```compile_fail,E0207\n+struct Foo;\n+\n+impl<const T: i32> Foo {\n+    // error: the const parameter `T` is not constrained by the impl trait, self\n+    // type, or predicates [E0207]\n+    fn get(&self) -> i32 {\n+        i32::default()\n+    }\n+}\n+```\n+\n+The problem is that the const parameter `T` does not appear in the implementing\n+type (`Foo`) of the impl. In this case, we can fix the error by moving the type\n+parameter from the `impl` to the method `get`:\n+\n+\n+```\n+struct Foo;\n+\n+// Move the const parameter from the impl to the method\n+impl Foo {\n+    fn get<const T: i32>(&self) -> i32 {\n+        i32::default()\n+    }\n+}\n+```\n+\n+### Error example 4\n+\n+Suppose we have a struct `Foo` and a struct `Bar` that uses lifetime `'a`. We\n+would like to implement trait `Contains` for `Foo`. The trait `Contains` have\n+the associated type `B`. The following code example has a definition which\n+leads to a compiler error:\n+\n+```compile_fail,E0207\n+struct Foo;\n+struct Bar<'a>;\n+\n+trait Contains {\n+    type B;\n+\n+    fn get(&self) -> i32;\n+}\n+\n+impl<'a> Contains for Foo {\n+    type B = Bar<'a>;\n+\n+    // error: the lifetime parameter `'a` is not constrained by the impl trait,\n+    // self type, or predicates [E0207]\n+    fn get(&self) -> i32 {\n+        i32::default()\n+    }\n+}\n+```\n+\n+Please note that unconstrained lifetime parameters are not supported if they are\n+being used by an associated type.\n+\n ### Additional information\n \n For more information, please see [RFC 447]."}]}