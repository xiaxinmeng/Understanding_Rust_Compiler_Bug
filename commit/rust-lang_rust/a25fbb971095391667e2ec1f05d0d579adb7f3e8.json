{"sha": "a25fbb971095391667e2ec1f05d0d579adb7f3e8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyNWZiYjk3MTA5NTM5MTY2N2UyZWMxZjA1ZDBkNTc5YWRiN2YzZTg=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2020-06-26T07:38:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-26T07:38:58Z"}, "message": "Rollup merge of #72967 - integer32llc:prevent-default-arrows, r=kinnison\n\nDon't move cursor in search box when using arrows to navigate results\n\n## What happens\n\n- Go to https://doc.rust-lang.org/stable/std/index.html\n- Press 's' to focus the search box\n- Type a query like 'test'\n- Press the down arrow one or more times to change which search result is highlighted\n- Press the up arrow once to go up one search result\n- Notice the cursor in the search box is now at the beginning of your query, such that if you now typed 'a' the search box would contain 'atest', when it would be expected that the cursor would have remained where it was and if you typed 'a' at this point it would result in 'testa'\n- Press the down arrow once to go down one search result\n- Now notice the cursor is at the end of your query again\n\n## What I expected\n\nI expected that changing which search result was highlighted using the up and down arrows would have no effect on where the cursor was in the search box.\n\n## The fix\n\nThis PR prevents the default action of the up and down arrows when the custom keydown events are happening during a search.", "tree": {"sha": "d152d81978db0e31bec81b5497969bdfb7faa70a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d152d81978db0e31bec81b5497969bdfb7faa70a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a25fbb971095391667e2ec1f05d0d579adb7f3e8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe9aYSCRBK7hj4Ov3rIwAAdHIIAB6RpZoNEcyV4X8q3kRYYjx0\n7scv1/uk/ZKk09QqgLHtiB7mGX/A0JJVYOA0vUwPDG3MLXbxNrjSEEP1RjOTcVOO\nhuTFZFLkTL3/Xb5DYCHfeZVKgpbFg0gJ9QJBlkEqEF9XHqxdmGefn89eGCseV441\nq+TWjO9WInqGrrcP5PJlpeHWiIUx5Q4JOVdPE7ndPcWhyUniVWKLjmhC3xb3NDod\nPeoWjVdOfcE2pGOakyu/NsSR0bYhh+aXvMR7XT5uoHCkRRZQWlYdI1gaxiTHYa84\nNuPrpyZQm1yl+E7yZy3rH+IcKPL2bP2OpUWWrrktfvKNkC3HXJEbBLGq9NJRsNU=\n=AXFy\n-----END PGP SIGNATURE-----\n", "payload": "tree d152d81978db0e31bec81b5497969bdfb7faa70a\nparent 14dc103a85694a67e25ade61c3af4db234b14a9a\nparent e85df08bdec792f512c1f92dbdb126c49ac57d0c\nauthor Manish Goregaokar <manishsmail@gmail.com> 1593157138 -0700\ncommitter GitHub <noreply@github.com> 1593157138 -0700\n\nRollup merge of #72967 - integer32llc:prevent-default-arrows, r=kinnison\n\nDon't move cursor in search box when using arrows to navigate results\n\n## What happens\n\n- Go to https://doc.rust-lang.org/stable/std/index.html\n- Press 's' to focus the search box\n- Type a query like 'test'\n- Press the down arrow one or more times to change which search result is highlighted\n- Press the up arrow once to go up one search result\n- Notice the cursor in the search box is now at the beginning of your query, such that if you now typed 'a' the search box would contain 'atest', when it would be expected that the cursor would have remained where it was and if you typed 'a' at this point it would result in 'testa'\n- Press the down arrow once to go down one search result\n- Now notice the cursor is at the end of your query again\n\n## What I expected\n\nI expected that changing which search result was highlighted using the up and down arrows would have no effect on where the cursor was in the search box.\n\n## The fix\n\nThis PR prevents the default action of the up and down arrows when the custom keydown events are happening during a search.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a25fbb971095391667e2ec1f05d0d579adb7f3e8", "html_url": "https://github.com/rust-lang/rust/commit/a25fbb971095391667e2ec1f05d0d579adb7f3e8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a25fbb971095391667e2ec1f05d0d579adb7f3e8/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14dc103a85694a67e25ade61c3af4db234b14a9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/14dc103a85694a67e25ade61c3af4db234b14a9a", "html_url": "https://github.com/rust-lang/rust/commit/14dc103a85694a67e25ade61c3af4db234b14a9a"}, {"sha": "e85df08bdec792f512c1f92dbdb126c49ac57d0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/e85df08bdec792f512c1f92dbdb126c49ac57d0c", "html_url": "https://github.com/rust-lang/rust/commit/e85df08bdec792f512c1f92dbdb126c49ac57d0c"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "62a23298c1b9f215bb09bab134a21c90acb56ea4", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a25fbb971095391667e2ec1f05d0d579adb7f3e8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/a25fbb971095391667e2ec1f05d0d579adb7f3e8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=a25fbb971095391667e2ec1f05d0d579adb7f3e8", "patch": "@@ -1408,6 +1408,7 @@ function defocusSearchBar() {\n \n                     addClass(actives[currentTab][0].previousElementSibling, \"highlighted\");\n                     removeClass(actives[currentTab][0], \"highlighted\");\n+                    e.preventDefault();\n                 } else if (e.which === 40) { // down\n                     if (!actives[currentTab].length) {\n                         var results = document.getElementById(\"results\").childNodes;\n@@ -1421,6 +1422,7 @@ function defocusSearchBar() {\n                         addClass(actives[currentTab][0].nextElementSibling, \"highlighted\");\n                         removeClass(actives[currentTab][0], \"highlighted\");\n                     }\n+                    e.preventDefault();\n                 } else if (e.which === 13) { // return\n                     if (actives[currentTab].length) {\n                         document.location.href ="}]}