{"sha": "7e83e46556fea9f448e47f7879f5970c400fb24c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlODNlNDY1NTZmZWE5ZjQ0OGU0N2Y3ODc5ZjU5NzBjNDAwZmIyNGM=", "commit": {"author": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2015-01-25T09:52:55Z"}, "committer": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2015-01-25T12:05:37Z"}, "message": "assert path ends with executable. On Windows the process executable contains the full path", "tree": {"sha": "7e80eaa171e84541f81c626f3df5be3ccd296938", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e80eaa171e84541f81c626f3df5be3ccd296938"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7e83e46556fea9f448e47f7879f5970c400fb24c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7e83e46556fea9f448e47f7879f5970c400fb24c", "html_url": "https://github.com/rust-lang/rust/commit/7e83e46556fea9f448e47f7879f5970c400fb24c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7e83e46556fea9f448e47f7879f5970c400fb24c/comments", "author": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "577c4643dd3f098697c17606e64d92477247d4b5", "url": "https://api.github.com/repos/rust-lang/rust/commits/577c4643dd3f098697c17606e64d92477247d4b5", "html_url": "https://github.com/rust-lang/rust/commit/577c4643dd3f098697c17606e64d92477247d4b5"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "bf395b14eb4eceafedb6bd2f75ffeb27ff386729", "filename": "src/test/run-pass/issue-15149.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/7e83e46556fea9f448e47f7879f5970c400fb24c/src%2Ftest%2Frun-pass%2Fissue-15149.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7e83e46556fea9f448e47f7879f5970c400fb24c/src%2Ftest%2Frun-pass%2Fissue-15149.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-15149.rs?ref=7e83e46556fea9f448e47f7879f5970c400fb24c", "patch": "@@ -8,6 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+use std::slice::SliceExt;\n use std::io::{Command, fs, USER_RWX};\n use std::os;\n use std::path::BytesContainer;\n@@ -17,8 +18,11 @@ fn main() {\n     // If we're the child, make sure we were invoked correctly\n     let args = os::args();\n     if args.len() > 1 && args[1].as_slice() == \"child\" {\n-        return assert_eq!(args[0],\n-                          format!(\"mytest{}\", os::consts::EXE_SUFFIX));\n+        // FIXME: This should check the whole `args[0]` instead of just\n+        // checking that it ends_with the executable name. This\n+        // is needed because of Windows, which has a different behavior.\n+        // See #15149 for more info.\n+        return assert!(args[0].ends_with(&format!(\"mytest{}\", os::consts::EXE_SUFFIX)[]));\n     }\n \n     test();"}]}