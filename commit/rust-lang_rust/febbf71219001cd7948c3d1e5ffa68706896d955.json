{"sha": "febbf71219001cd7948c3d1e5ffa68706896d955", "node_id": "C_kwDOAAsO6NoAKGZlYmJmNzEyMTkwMDFjZDc5NDhjM2QxZTVmZmE2ODcwNjg5NmQ5NTU", "commit": {"author": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-10-03T14:34:00Z"}, "committer": {"name": "David Wood", "email": "david.wood@huawei.com", "date": "2022-10-10T12:32:23Z"}, "message": "macros: tidy up lint changes\n\nSmall tweaks to changes made in a previous PR, unrelated to eager\ntranslation.\n\nSigned-off-by: David Wood <david.wood@huawei.com>", "tree": {"sha": "a0af68fb8637277797af0f5da0765ce549b05b50", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0af68fb8637277797af0f5da0765ce549b05b50"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/febbf71219001cd7948c3d1e5ffa68706896d955", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/febbf71219001cd7948c3d1e5ffa68706896d955", "html_url": "https://github.com/rust-lang/rust/commit/febbf71219001cd7948c3d1e5ffa68706896d955", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/febbf71219001cd7948c3d1e5ffa68706896d955/comments", "author": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidtwco", "id": 1295100, "node_id": "MDQ6VXNlcjEyOTUxMDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1295100?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidtwco", "html_url": "https://github.com/davidtwco", "followers_url": "https://api.github.com/users/davidtwco/followers", "following_url": "https://api.github.com/users/davidtwco/following{/other_user}", "gists_url": "https://api.github.com/users/davidtwco/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidtwco/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidtwco/subscriptions", "organizations_url": "https://api.github.com/users/davidtwco/orgs", "repos_url": "https://api.github.com/users/davidtwco/repos", "events_url": "https://api.github.com/users/davidtwco/events{/privacy}", "received_events_url": "https://api.github.com/users/davidtwco/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "691aeaad6c9ee3483f2851695379b348b8a92a43", "url": "https://api.github.com/repos/rust-lang/rust/commits/691aeaad6c9ee3483f2851695379b348b8a92a43", "html_url": "https://github.com/rust-lang/rust/commit/691aeaad6c9ee3483f2851695379b348b8a92a43"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "406a56cd4ae3ea9f287648772f9f067c4ec1e2da", "filename": "compiler/rustc_macros/src/diagnostics/diagnostic.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/febbf71219001cd7948c3d1e5ffa68706896d955/compiler%2Frustc_macros%2Fsrc%2Fdiagnostics%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/febbf71219001cd7948c3d1e5ffa68706896d955/compiler%2Frustc_macros%2Fsrc%2Fdiagnostics%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_macros%2Fsrc%2Fdiagnostics%2Fdiagnostic.rs?ref=febbf71219001cd7948c3d1e5ffa68706896d955", "patch": "@@ -105,8 +105,8 @@ impl<'a> LintDiagnosticDerive<'a> {\n         });\n \n         let msg = builder.each_variant(&mut structure, |mut builder, variant| {\n-            // HACK(wafflelapkin): initialize slug (???)\n-            let _preamble = builder.preamble(&variant);\n+            // Collect the slug by generating the preamble.\n+            let _ = builder.preamble(&variant);\n \n             match builder.slug.value_ref() {\n                 None => {\n@@ -125,7 +125,10 @@ impl<'a> LintDiagnosticDerive<'a> {\n         let diag = &builder.diag;\n         structure.gen_impl(quote! {\n             gen impl<'__a> rustc_errors::DecorateLint<'__a, ()> for @Self {\n-                fn decorate_lint<'__b>(self, #diag: &'__b mut rustc_errors::DiagnosticBuilder<'__a, ()>) -> &'__b mut rustc_errors::DiagnosticBuilder<'__a, ()> {\n+                fn decorate_lint<'__b>(\n+                    self,\n+                    #diag: &'__b mut rustc_errors::DiagnosticBuilder<'__a, ()>\n+                ) -> &'__b mut rustc_errors::DiagnosticBuilder<'__a, ()> {\n                     use rustc_errors::IntoDiagnosticArg;\n                     #implementation\n                 }"}]}