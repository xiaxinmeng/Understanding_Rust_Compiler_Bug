{"sha": "866900449aee9281c88076076b8bc558a8aa5140", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2NjkwMDQ0OWFlZTkyODFjODgwNzYwNzZiOGJjNTU4YThhYTUxNDA=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-04-20T10:10:48Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-04-20T10:10:48Z"}, "message": "Make some more stuff private\n\n0.6", "tree": {"sha": "2328f5170c9c09f0418ce66e182e16284fde0abc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2328f5170c9c09f0418ce66e182e16284fde0abc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/866900449aee9281c88076076b8bc558a8aa5140", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/866900449aee9281c88076076b8bc558a8aa5140", "html_url": "https://github.com/rust-lang/rust/commit/866900449aee9281c88076076b8bc558a8aa5140", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/866900449aee9281c88076076b8bc558a8aa5140/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ca610d35b3a78b9b2e9d8444eaf0296a1a242277", "url": "https://api.github.com/repos/rust-lang/rust/commits/ca610d35b3a78b9b2e9d8444eaf0296a1a242277", "html_url": "https://github.com/rust-lang/rust/commit/ca610d35b3a78b9b2e9d8444eaf0296a1a242277"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "a15fd21740925853462f3df004351686bd3e20d2", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/866900449aee9281c88076076b8bc558a8aa5140/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/866900449aee9281c88076076b8bc558a8aa5140/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=866900449aee9281c88076076b8bc558a8aa5140", "patch": "@@ -451,7 +451,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n [[package]]\n name = \"rustfmt-nightly\"\n-version = \"0.5.0\"\n+version = \"0.6.0\"\n dependencies = [\n  \"assert_cli 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"cargo_metadata 0.5.4 (registry+https://github.com/rust-lang/crates.io-index)\","}, {"sha": "4b5a2e00586db67a14c074f7781d1c55246d9e76", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/866900449aee9281c88076076b8bc558a8aa5140/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/866900449aee9281c88076076b8bc558a8aa5140/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=866900449aee9281c88076076b8bc558a8aa5140", "patch": "@@ -1,7 +1,7 @@\n [package]\n \n name = \"rustfmt-nightly\"\n-version = \"0.5.0\"\n+version = \"0.6.0\"\n authors = [\"Nicholas Cameron <ncameron@mozilla.com>\", \"The Rustfmt developers\"]\n description = \"Tool to find and fix Rust formatting issues\"\n repository = \"https://github.com/rust-lang-nursery/rustfmt\""}, {"sha": "9386c72f07776794e21aee9db4a3ca4411c8b8a7", "filename": "src/lib.rs", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/866900449aee9281c88076076b8bc558a8aa5140/src%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/866900449aee9281c88076076b8bc558a8aa5140/src%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib.rs?ref=866900449aee9281c88076076b8bc558a8aa5140", "patch": "@@ -39,7 +39,7 @@ extern crate unicode_segmentation;\n use std::collections::HashMap;\n use std::error;\n use std::fmt;\n-use std::io::{self, stdout, BufRead, Write};\n+use std::io::{self, stdout, Write};\n use std::panic::{catch_unwind, AssertUnwindSafe};\n use std::path::PathBuf;\n use std::rc::Rc;\n@@ -819,7 +819,7 @@ fn format_input_inner<T: Write>(\n /// A single span of changed lines, with 0 or more removed lines\n /// and a vector of 0 or more inserted lines.\n #[derive(Debug, PartialEq, Eq)]\n-pub struct ModifiedChunk {\n+struct ModifiedChunk {\n     /// The first to be removed from the original text\n     pub line_number_orig: u32,\n     /// The number of lines which have been replaced\n@@ -830,13 +830,14 @@ pub struct ModifiedChunk {\n \n /// Set of changed sections of a file.\n #[derive(Debug, PartialEq, Eq)]\n-pub struct ModifiedLines {\n+struct ModifiedLines {\n     /// The set of changed chunks.\n     pub chunks: Vec<ModifiedChunk>,\n }\n \n /// The successful result of formatting via `get_modified_lines()`.\n-pub struct ModifiedLinesResult {\n+#[cfg(test)]\n+struct ModifiedLinesResult {\n     /// The high level summary details\n     pub summary: Summary,\n     /// The result Filemap\n@@ -849,10 +850,13 @@ pub struct ModifiedLinesResult {\n \n /// Format a file and return a `ModifiedLines` data structure describing\n /// the changed ranges of lines.\n-pub fn get_modified_lines(\n+#[cfg(test)]\n+fn get_modified_lines(\n     input: Input,\n     config: &Config,\n ) -> Result<ModifiedLinesResult, (io::Error, Summary)> {\n+    use std::io::BufRead;\n+\n     let mut data = Vec::new();\n \n     let mut config = config.clone();"}]}