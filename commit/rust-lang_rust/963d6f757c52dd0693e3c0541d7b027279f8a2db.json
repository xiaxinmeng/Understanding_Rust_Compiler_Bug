{"sha": "963d6f757c52dd0693e3c0541d7b027279f8a2db", "node_id": "C_kwDOAAsO6NoAKDk2M2Q2Zjc1N2M1MmRkMDY5M2UzYzA1NDFkN2IwMjcyNzlmOGEyZGI", "commit": {"author": {"name": "The 8472", "email": "git@infinite-source.de", "date": "2022-10-17T20:47:39Z"}, "committer": {"name": "The 8472", "email": "git@infinite-source.de", "date": "2022-10-17T21:40:21Z"}, "message": "add a benchmark for slice_iter.copied().array_chunks()", "tree": {"sha": "ac080b6ce4ee0e712abe55f094f75596c25478f7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ac080b6ce4ee0e712abe55f094f75596c25478f7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/963d6f757c52dd0693e3c0541d7b027279f8a2db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/963d6f757c52dd0693e3c0541d7b027279f8a2db", "html_url": "https://github.com/rust-lang/rust/commit/963d6f757c52dd0693e3c0541d7b027279f8a2db", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/963d6f757c52dd0693e3c0541d7b027279f8a2db/comments", "author": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "committer": {"login": "the8472", "id": 1065730, "node_id": "MDQ6VXNlcjEwNjU3MzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1065730?v=4", "gravatar_id": "", "url": "https://api.github.com/users/the8472", "html_url": "https://github.com/the8472", "followers_url": "https://api.github.com/users/the8472/followers", "following_url": "https://api.github.com/users/the8472/following{/other_user}", "gists_url": "https://api.github.com/users/the8472/gists{/gist_id}", "starred_url": "https://api.github.com/users/the8472/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/the8472/subscriptions", "organizations_url": "https://api.github.com/users/the8472/orgs", "repos_url": "https://api.github.com/users/the8472/repos", "events_url": "https://api.github.com/users/the8472/events{/privacy}", "received_events_url": "https://api.github.com/users/the8472/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8be3ce9056d17f822704b8994f60668adf180fe8", "url": "https://api.github.com/repos/rust-lang/rust/commits/8be3ce9056d17f822704b8994f60668adf180fe8", "html_url": "https://github.com/rust-lang/rust/commit/8be3ce9056d17f822704b8994f60668adf180fe8"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "38887f29af1537733249ec7a3da964a6c0b25ed4", "filename": "library/core/benches/iter.rs", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/963d6f757c52dd0693e3c0541d7b027279f8a2db/library%2Fcore%2Fbenches%2Fiter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/963d6f757c52dd0693e3c0541d7b027279f8a2db/library%2Fcore%2Fbenches%2Fiter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fbenches%2Fiter.rs?ref=963d6f757c52dd0693e3c0541d7b027279f8a2db", "patch": "@@ -1,4 +1,6 @@\n use core::iter::*;\n+use core::mem;\n+use core::num::Wrapping;\n use test::{black_box, Bencher};\n \n #[bench]\n@@ -398,3 +400,21 @@ fn bench_trusted_random_access_adapters(b: &mut Bencher) {\n         acc\n     })\n }\n+\n+/// Exercises the iter::Copied specialization for slice::Iter\n+#[bench]\n+fn bench_copied_array_chunks(b: &mut Bencher) {\n+    let v = vec![1u8; 1024];\n+\n+    b.iter(|| {\n+        black_box(&v)\n+            .iter()\n+            .copied()\n+            .array_chunks::<{ mem::size_of::<u64>() }>()\n+            .map(|ary| {\n+                let d = u64::from_ne_bytes(ary);\n+                Wrapping(d.rotate_left(7).wrapping_add(1))\n+            })\n+            .sum::<Wrapping<u64>>()\n+    })\n+}"}, {"sha": "1e462e3fc3f8c4e2f8bb73f10c21f92db19fc822", "filename": "library/core/benches/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/963d6f757c52dd0693e3c0541d7b027279f8a2db/library%2Fcore%2Fbenches%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/963d6f757c52dd0693e3c0541d7b027279f8a2db/library%2Fcore%2Fbenches%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fbenches%2Flib.rs?ref=963d6f757c52dd0693e3c0541d7b027279f8a2db", "patch": "@@ -4,6 +4,7 @@\n #![feature(int_log)]\n #![feature(test)]\n #![feature(trusted_random_access)]\n+#![feature(iter_array_chunks)]\n \n extern crate test;\n "}]}