{"sha": "c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5NmQwYmZmOTQ5ZWY2ZmFlZDNiYzVhYjI2YjQ1MzBjMmMyN2NjNDI=", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2017-09-29T09:13:18Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2017-10-03T11:50:55Z"}, "message": "incr.comp.: Fix some merge fallout.", "tree": {"sha": "9e7ae334fc5e0b2f70ea3358a66627e92fe37589", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9e7ae334fc5e0b2f70ea3358a66627e92fe37589"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "html_url": "https://github.com/rust-lang/rust/commit/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dbab705f04037f0eeb35f10b994214c992597ed4", "url": "https://api.github.com/repos/rust-lang/rust/commits/dbab705f04037f0eeb35f10b994214c992597ed4", "html_url": "https://github.com/rust-lang/rust/commit/dbab705f04037f0eeb35f10b994214c992597ed4"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "81b9231aa4f26db6d03e90d14f8e787ef2f9f61e", "filename": "src/librustc/ty/maps/plumbing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fmaps%2Fplumbing.rs?ref=c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "patch": "@@ -651,7 +651,7 @@ pub fn force_from_dep_node<'a, 'gcx, 'lcx>(tcx: TyCtxt<'a, 'gcx, 'lcx>,\n \n                 profq_msg!(tcx,\n                     ProfileQueriesMsg::QueryBegin(\n-                        span.clone(),\n+                        span.data(),\n                         ::ty::maps::QueryMsg::$query(profq_key!(tcx, $key))\n                     )\n                 );"}, {"sha": "cdfc9f2edc3f5aea9db688851a52f0d14fbb5c83", "filename": "src/librustc_incremental/persist/load.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/src%2Flibrustc_incremental%2Fpersist%2Fload.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/src%2Flibrustc_incremental%2Fpersist%2Fload.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_incremental%2Fpersist%2Fload.rs?ref=c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "patch": "@@ -33,6 +33,13 @@ pub fn dep_graph_tcx_init<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>) {\n     tcx.allocate_metadata_dep_nodes();\n     tcx.precompute_in_scope_traits_hashes();\n \n+    if tcx.sess.incr_comp_session_dir_opt().is_none() {\n+        // If we are only building with -Zquery-dep-graph but without an actual\n+        // incr. comp. session directory, we exit here. Otherwise we'd fail\n+        // when trying to load work products.\n+        return\n+    }\n+\n     let work_products_path = work_products_path(tcx.sess);\n     if let Some(work_products_data) = load_data(tcx.sess, &work_products_path) {\n         // Decode the list of work_products"}, {"sha": "8c39f579b3ea6003b4a98132ee9c9095189f499a", "filename": "src/librustc_trans/base.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/src%2Flibrustc_trans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c96d0bff949ef6faed3bc5ab26b4530c2c27cc42/src%2Flibrustc_trans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fbase.rs?ref=c96d0bff949ef6faed3bc5ab26b4530c2c27cc42", "patch": "@@ -956,8 +956,6 @@ pub fn trans_crate<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         }\n     }\n \n-    assert!(codegen_units.len() <= 1 || !tcx.sess.lto());\n-\n     let ongoing_translation = write::start_async_translation(\n         tcx,\n         time_graph.clone(),"}]}