{"sha": "cc5d1065fb0ee6579bd326eb16b721b070661a59", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNjNWQxMDY1ZmIwZWU2NTc5YmQzMjZlYjE2YjcyMWIwNzA2NjFhNTk=", "commit": {"author": {"name": "Oliver Schneider", "email": "oli-obk@users.noreply.github.com", "date": "2017-08-07T06:39:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-08-07T06:39:43Z"}, "message": "Merge pull request #1923 from killercup/feature/1917-docs-versions-index\n\nGenerate version index for docs domain index", "tree": {"sha": "8a9cdb82324c12ba148c188ac2a70ce505ea2128", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a9cdb82324c12ba148c188ac2a70ce505ea2128"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cc5d1065fb0ee6579bd326eb16b721b070661a59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cc5d1065fb0ee6579bd326eb16b721b070661a59", "html_url": "https://github.com/rust-lang/rust/commit/cc5d1065fb0ee6579bd326eb16b721b070661a59", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cc5d1065fb0ee6579bd326eb16b721b070661a59/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "878333fd6ca568aba90b16a45dd2f02a166cd5c1", "url": "https://api.github.com/repos/rust-lang/rust/commits/878333fd6ca568aba90b16a45dd2f02a166cd5c1", "html_url": "https://github.com/rust-lang/rust/commit/878333fd6ca568aba90b16a45dd2f02a166cd5c1"}, {"sha": "b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3", "html_url": "https://github.com/rust-lang/rust/commit/b3c90efcb43a19d4c65eb7cbd4f406ede7b2a7f3"}], "stats": {"total": 85, "additions": 84, "deletions": 1}, "files": [{"sha": "8f6abc93ecfc165895ce2c5bcaac46a6988d43de", "filename": ".github/deploy.sh", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/cc5d1065fb0ee6579bd326eb16b721b070661a59/.github%2Fdeploy.sh", "raw_url": "https://github.com/rust-lang/rust/raw/cc5d1065fb0ee6579bd326eb16b721b070661a59/.github%2Fdeploy.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fdeploy.sh?ref=cc5d1065fb0ee6579bd326eb16b721b070661a59", "patch": "@@ -33,6 +33,19 @@ if [ -n \"$TRAVIS_TAG\" ]; then\n     ln -s \"$TRAVIS_TAG\" out/current\n fi\n \n+# Generate version index that is shown as root index page\n+(\n+    cp util/gh-pages/versions.html out/index.html\n+\n+    cd out\n+    python -c '\\\n+        import os, json;\\\n+        print json.dumps([\\\n+            dir for dir in os.listdir(\".\")\\\n+            if not dir.startswith(\".\") and os.path.isdir(dir)\\\n+        ])' > versions.json\n+)\n+\n # Pull requests and commits to other branches shouldn't try to deploy, just build to verify\n if [ \"$TRAVIS_PULL_REQUEST\" != \"false\" ] || [ \"$TRAVIS_BRANCH\" != \"$SOURCE_BRANCH\" ]; then\n     # Tags should deploy"}, {"sha": "2cac5c6bcdef4672e603741fe69b56c5ad551095", "filename": "util/gh-pages/index.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cc5d1065fb0ee6579bd326eb16b721b070661a59/util%2Fgh-pages%2Findex.html", "raw_url": "https://github.com/rust-lang/rust/raw/cc5d1065fb0ee6579bd326eb16b721b070661a59/util%2Fgh-pages%2Findex.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fgh-pages%2Findex.html?ref=cc5d1065fb0ee6579bd326eb16b721b070661a59", "patch": "@@ -94,7 +94,7 @@ <h4 class=\"list-group-item-heading\">\n         </div>\n     </div>\n \n-    <a href=\"https://github.com/Manishearth/rust-clippy\">\n+    <a href=\"https://github.com/rust-lang-nursery/rust-clippy\">\n         <img style=\"position: absolute; top: 0; right: 0; border: 0;\" src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\"/>\n     </a>\n "}, {"sha": "baa44bf4676ddeb68e1d5ac28fa97c9c2ad06f6c", "filename": "util/gh-pages/versions.html", "status": "added", "additions": 70, "deletions": 0, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/cc5d1065fb0ee6579bd326eb16b721b070661a59/util%2Fgh-pages%2Fversions.html", "raw_url": "https://github.com/rust-lang/rust/raw/cc5d1065fb0ee6579bd326eb16b721b070661a59/util%2Fgh-pages%2Fversions.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/util%2Fgh-pages%2Fversions.html?ref=cc5d1065fb0ee6579bd326eb16b721b070661a59", "patch": "@@ -0,0 +1,70 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+    <meta charset=\"UTF-8\"/>\n+    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\n+\n+    <title>Clippy</title>\n+\n+    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css\"/>\n+    <style>\n+        [ng\\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak { display: none !important; }\n+    </style>\n+</head>\n+<body>\n+    <div class=\"container\" ng-app=\"clippy\" ng-controller=\"docVersions\">\n+        <div class=\"page-header\">\n+            <h1>Clippy lints documention</h1>\n+        </div>\n+\n+        <div ng-cloak>\n+            <div class=\"alert alert-info\" role=\"alert\" ng-if=\"loading\">\n+                Loading&#x2026;\n+            </div>\n+            <div class=\"alert alert-danger\" role=\"alert\" ng-if=\"error\">\n+                Error loading versions!<br/>\n+                You can always try to get <a href=\"master/index.html\">the master branch docs</a>.\n+            </div>\n+\n+            <article class=\"panel panel-default\" ng-show=\"data\">\n+                <div class=\"panel-heading\">\n+                    <h3 class=\"panel-title\">\n+                        Available versions\n+                    </h3>\n+                </div>\n+\n+                <ul class=\"list-group\">\n+                    <a class=\"list-group-item\" ng-repeat=\"version in data | orderBy\"\n+                       href=\"./{{version}}/index.html\">\n+                        {{version}}\n+                    </a>\n+                </ul>\n+            </article>\n+        </div>\n+    </div>\n+\n+    <a href=\"https://github.com/rust-lang-nursery/rust-clippy\">\n+        <img style=\"position: absolute; top: 0; right: 0; border: 0;\" src=\"https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png\"/>\n+    </a>\n+\n+\n+    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.12/angular.min.js\"></script>\n+    <script>\n+        angular.module('clippy', [])\n+        .controller('docVersions', function ($scope, $http) {\n+            $scope.loading = true;\n+\n+            $http.get('./versions.json')\n+            .success(function (data) {\n+                $scope.data = data;\n+                $scope.loading = false;\n+            })\n+            .error(function (data) {\n+                $scope.error = data;\n+                $scope.loading = false;\n+            });\n+        })\n+        ;\n+    </script>\n+</body>\n+</html>"}]}