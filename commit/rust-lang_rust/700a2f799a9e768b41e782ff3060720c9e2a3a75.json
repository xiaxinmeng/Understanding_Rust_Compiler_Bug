{"sha": "700a2f799a9e768b41e782ff3060720c9e2a3a75", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwMGEyZjc5OWE5ZTc2OGI0MWU3ODJmZjMwNjA3MjBjOWUyYTNhNzU=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-06-27T22:15:41Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-06-27T22:15:41Z"}, "message": "Rollup merge of #51800 - mark-i-m:edition2018compiletest, r=nikomatsakis\n\nAdd a compiletest header for edition\n\nr? @nikomatsakis\n\nAre the `-Zunstable-options` options needed in these tests? It looks like they aren't. If not, I can remove them.", "tree": {"sha": "5b7a79f973b22557e6682125d30de191fc77086c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b7a79f973b22557e6682125d30de191fc77086c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/700a2f799a9e768b41e782ff3060720c9e2a3a75", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbNAyNCRBK7hj4Ov3rIwAAdHIIADiS4hoBwv7XVgBg1eVrw/J3\ns2B5LOC3SKInKdBzic2nbtqetu3YgDXmP3LH26V8zsbuOZw03MakH2X8lIvNNDkD\nJfr398iXGOrng73ObvD6yWRnp3V8Fz6PJ8XGhgzZs3kttuX03S+HgFpRYbsStItK\nC+WdDHgn45FXUUQ3I9Mu7LWEUpqQmcI4ZPK8QA8ZMN1uaTP1DpSQxRgHjahAn+X8\nw4A/KNvHnm7fVmZnVGeESPmyB0wHE8596MtpzuGPIH+XC5HbWsi5cp6m6dkmGfEm\n8DyIMztwXTZ1L5r/7ws2mS+Aj4hfB0/OK7wC/Ya1+LZJfzimaHRR/b1bmUg1MHw=\n=13qF\n-----END PGP SIGNATURE-----\n", "payload": "tree 5b7a79f973b22557e6682125d30de191fc77086c\nparent 770d0fba6370b3793aaf8fc44e9aecd46018ed04\nparent 75d33cfa649610d4d8908bac2491a2ccced525f5\nauthor kennytm <kennytm@gmail.com> 1530137741 +0800\ncommitter GitHub <noreply@github.com> 1530137741 +0800\n\nRollup merge of #51800 - mark-i-m:edition2018compiletest, r=nikomatsakis\n\nAdd a compiletest header for edition\n\nr? @nikomatsakis\n\nAre the `-Zunstable-options` options needed in these tests? It looks like they aren't. If not, I can remove them.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/700a2f799a9e768b41e782ff3060720c9e2a3a75", "html_url": "https://github.com/rust-lang/rust/commit/700a2f799a9e768b41e782ff3060720c9e2a3a75", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/700a2f799a9e768b41e782ff3060720c9e2a3a75/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "770d0fba6370b3793aaf8fc44e9aecd46018ed04", "url": "https://api.github.com/repos/rust-lang/rust/commits/770d0fba6370b3793aaf8fc44e9aecd46018ed04", "html_url": "https://github.com/rust-lang/rust/commit/770d0fba6370b3793aaf8fc44e9aecd46018ed04"}, {"sha": "75d33cfa649610d4d8908bac2491a2ccced525f5", "url": "https://api.github.com/repos/rust-lang/rust/commits/75d33cfa649610d4d8908bac2491a2ccced525f5", "html_url": "https://github.com/rust-lang/rust/commit/75d33cfa649610d4d8908bac2491a2ccced525f5"}], "stats": {"total": 85, "additions": 48, "deletions": 37}, "files": [{"sha": "4ba44fa54d8cd79678864fc0a8d4cee4d8169d0f", "filename": "src/test/compile-fail/edition-raw-pointer-method-2015.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Fedition-raw-pointer-method-2015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Fedition-raw-pointer-method-2015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fedition-raw-pointer-method-2015.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // ignore-tidy-linelength\n-// compile-flags: --edition=2015 -Zunstable-options\n+// edition:2015\n \n // tests that editions work with the tyvar warning-turned-error\n "}, {"sha": "c8548ed35b972765fe9b8988213ec1a87915c26b", "filename": "src/test/compile-fail/edition-raw-pointer-method-2018.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Fedition-raw-pointer-method-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Fedition-raw-pointer-method-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fedition-raw-pointer-method-2018.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // ignore-tidy-linelength\n-// compile-flags: --edition=2018 -Zunstable-options\n+// edition:2018\n \n // tests that editions work with the tyvar warning-turned-error\n "}, {"sha": "e04bb27f43500723d39886c97e8a74507a1df05b", "filename": "src/test/compile-fail/rfc-2126-extern-absolute-paths/non-existent-1.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-1.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018 -Zunstable-options\n+// edition:2018\n \n #![feature(extern_absolute_paths)]\n "}, {"sha": "bebf0236bb4d03e7b1f377a0719e8ec94a027927", "filename": "src/test/compile-fail/rfc-2126-extern-absolute-paths/non-existent-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-2.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018 -Zunstable-options\n+// edition:2018\n \n #![feature(extern_absolute_paths)]\n "}, {"sha": "5906a0719c842cfd1305b49a122db46c627579d1", "filename": "src/test/compile-fail/rfc-2126-extern-absolute-paths/non-existent-3.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fnon-existent-3.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018 -Zunstable-options\n+// edition:2018\n \n #![feature(extern_absolute_paths)]\n "}, {"sha": "7111176dbd9af8e68ae6369315487515899d72b8", "filename": "src/test/compile-fail/rfc-2126-extern-absolute-paths/single-segment.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fsingle-segment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fsingle-segment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Frfc-2126-extern-absolute-paths%2Fsingle-segment.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // aux-build:xcrate.rs\n-// compile-flags: --edition=2018 -Zunstable-options\n+// edition:2018\n \n #![feature(crate_in_paths)]\n #![feature(extern_absolute_paths)]"}, {"sha": "8b649f6ef7bbdc548924c8dfcfc840831c6fdfeb", "filename": "src/test/run-pass/async-await.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fasync-await.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fasync-await.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fasync-await.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n \n #![feature(arbitrary_self_types, async_await, await_macro, futures_api, pin)]\n "}, {"sha": "69952e9f90af6a4949bd9f8f9da2528356c35a02", "filename": "src/test/run-pass/auxiliary/edition-kw-macro-2015.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fauxiliary%2Fedition-kw-macro-2015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fauxiliary%2Fedition-kw-macro-2015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fauxiliary%2Fedition-kw-macro-2015.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n \n #![feature(raw_identifiers)]\n "}, {"sha": "415988586a066f18f379df16afda7dbf54b363a5", "filename": "src/test/run-pass/auxiliary/edition-kw-macro-2018.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fauxiliary%2Fedition-kw-macro-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fauxiliary%2Fedition-kw-macro-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fauxiliary%2Fedition-kw-macro-2018.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n \n #![feature(raw_identifiers)]\n "}, {"sha": "73869e63de7c4bfc879ff160230bade1da85bbe3", "filename": "src/test/run-pass/edition-keywords-2015-2015.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2015-2015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2015-2015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fedition-keywords-2015-2015.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n // aux-build:edition-kw-macro-2015.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "0a1c6505854c99cacdf044efed2eed888f0316c3", "filename": "src/test/run-pass/edition-keywords-2015-2018.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2015-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2015-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fedition-keywords-2015-2018.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n // aux-build:edition-kw-macro-2018.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "4c22667d0bf4302e9cf3de452cf3f592c404ea0f", "filename": "src/test/run-pass/edition-keywords-2018-2015.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2018-2015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2018-2015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fedition-keywords-2018-2015.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n // aux-build:edition-kw-macro-2015.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "2a98b904da5dbedb716e7c4e2208bf5eb0343166", "filename": "src/test/run-pass/edition-keywords-2018-2018.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2018-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Fedition-keywords-2018-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fedition-keywords-2018-2018.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n // aux-build:edition-kw-macro-2018.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "dfa583415f7b64cab475b27d851fbc3b142bc72e", "filename": "src/test/run-pass/rfc-2126-extern-absolute-paths/basic.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Frfc-2126-extern-absolute-paths%2Fbasic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Frfc-2126-extern-absolute-paths%2Fbasic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frfc-2126-extern-absolute-paths%2Fbasic.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -9,7 +9,7 @@\n // except according to those terms.\n \n // aux-build:xcrate.rs\n-// compile-flags: --edition=2018 -Zunstable-options\n+// edition:2018\n \n #![feature(extern_absolute_paths)]\n "}, {"sha": "6317dc17652cd0b58ababe49baa858ae8190e3c9", "filename": "src/test/run-pass/rfc-2126-extern-absolute-paths/test.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Frfc-2126-extern-absolute-paths%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Frun-pass%2Frfc-2126-extern-absolute-paths%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Frfc-2126-extern-absolute-paths%2Ftest.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -12,7 +12,8 @@\n //\n // Regression test for #47075.\n \n-// compile-flags: --test --edition=2018 -Zunstable-options\n+// edition:2018\n+// compile-flags: --test\n \n #![feature(extern_absolute_paths)]\n "}, {"sha": "aab4974e2e7a1c9ff6376c19f96ed33f754a4e76", "filename": "src/test/ui/async-fn-multiple-lifetimes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fasync-fn-multiple-lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fasync-fn-multiple-lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasync-fn-multiple-lifetimes.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n \n #![feature(arbitrary_self_types, async_await, await_macro, futures_api, pin)]\n "}, {"sha": "69952e9f90af6a4949bd9f8f9da2528356c35a02", "filename": "src/test/ui/auxiliary/edition-kw-macro-2015.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fauxiliary%2Fedition-kw-macro-2015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fauxiliary%2Fedition-kw-macro-2015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fauxiliary%2Fedition-kw-macro-2015.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n \n #![feature(raw_identifiers)]\n "}, {"sha": "415988586a066f18f379df16afda7dbf54b363a5", "filename": "src/test/ui/auxiliary/edition-kw-macro-2018.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fauxiliary%2Fedition-kw-macro-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fauxiliary%2Fedition-kw-macro-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fauxiliary%2Fedition-kw-macro-2018.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n \n #![feature(raw_identifiers)]\n "}, {"sha": "349ab3e27ad32bf8a149d08371d1d0ecf0939c34", "filename": "src/test/ui/edition-keywords-2015-2015-expansion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2015-expansion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2015-expansion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2015-2015-expansion.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n // aux-build:edition-kw-macro-2015.rs\n // compile-pass\n "}, {"sha": "08cba2d2908a65c36cd3ce8f2d44a7baf03a464b", "filename": "src/test/ui/edition-keywords-2015-2015-parsing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2015-parsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2015-parsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2015-2015-parsing.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n // aux-build:edition-kw-macro-2015.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "082eb8d89f9f1bb028e1344963218649c4cda01e", "filename": "src/test/ui/edition-keywords-2015-2018-expansion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2018-expansion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2018-expansion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2015-2018-expansion.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n // aux-build:edition-kw-macro-2018.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "337d6be6bbcd88d0ba3101b85a7865a6b650501b", "filename": "src/test/ui/edition-keywords-2015-2018-parsing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2018-parsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2015-2018-parsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2015-2018-parsing.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n // aux-build:edition-kw-macro-2018.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "6e2073e0e494ae1b858459140d373922394e2c2a", "filename": "src/test/ui/edition-keywords-2018-2015-expansion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2015-expansion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2015-expansion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2018-2015-expansion.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n // aux-build:edition-kw-macro-2015.rs\n // compile-pass\n "}, {"sha": "713da57f7e2c7f58f50832862ab67a9b37a16eba", "filename": "src/test/ui/edition-keywords-2018-2015-parsing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2015-parsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2015-parsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2018-2015-parsing.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n // aux-build:edition-kw-macro-2015.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "50db4202e98d3eb477b2f418e359221f56d6c8c5", "filename": "src/test/ui/edition-keywords-2018-2018-expansion.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2018-expansion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2018-expansion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2018-2018-expansion.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n // aux-build:edition-kw-macro-2018.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "263ec95caa7d6a3d31b5d4ddcd201e644ea644ab", "filename": "src/test/ui/edition-keywords-2018-2018-parsing.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2018-parsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fedition-keywords-2018-2018-parsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fedition-keywords-2018-2018-parsing.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n // aux-build:edition-kw-macro-2018.rs\n \n #![feature(raw_identifiers)]"}, {"sha": "5b865e9c1c7cbe21b7c94661012e2f3946b08098", "filename": "src/test/ui/feature-gate-async-await-2015-edition.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Ffeature-gate-async-await-2015-edition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Ffeature-gate-async-await-2015-edition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate-async-await-2015-edition.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2015\n+// edition:2015\n \n #![feature(futures_api)]\n "}, {"sha": "be34842dea3a68898f1b0705c33c4fc5e70aec22", "filename": "src/test/ui/feature-gate-async-await.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Ffeature-gate-async-await.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Ffeature-gate-async-await.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate-async-await.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n+\n #![feature(futures_api)]\n \n async fn foo() {} //~ ERROR async fn is unstable"}, {"sha": "79ed5c4d008b13ef1f6c473fa01bed9289b47841", "filename": "src/test/ui/feature-gate-async-await.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Ffeature-gate-async-await.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Ffeature-gate-async-await.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate-async-await.stderr?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -1,21 +1,21 @@\n error[E0658]: async fn is unstable (see issue #50547)\n-  --> $DIR/feature-gate-async-await.rs:14:1\n+  --> $DIR/feature-gate-async-await.rs:15:1\n    |\n LL | async fn foo() {} //~ ERROR async fn is unstable\n    | ^^^^^^^^^^^^^^^^^\n    |\n    = help: add #![feature(async_await)] to the crate attributes to enable\n \n error[E0658]: async blocks are unstable (see issue #50547)\n-  --> $DIR/feature-gate-async-await.rs:17:13\n+  --> $DIR/feature-gate-async-await.rs:18:13\n    |\n LL |     let _ = async {}; //~ ERROR async blocks are unstable\n    |             ^^^^^^^^\n    |\n    = help: add #![feature(async_await)] to the crate attributes to enable\n \n error[E0658]: async closures are unstable (see issue #50547)\n-  --> $DIR/feature-gate-async-await.rs:18:13\n+  --> $DIR/feature-gate-async-await.rs:19:13\n    |\n LL |     let _ = async || {}; //~ ERROR async closures are unstable\n    |             ^^^^^^^^^^^"}, {"sha": "c4379b496f8d4fd1a112fa70243099799fab93c6", "filename": "src/test/ui/lint-anon-param-edition.fixed", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Flint-anon-param-edition.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Flint-anon-param-edition.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint-anon-param-edition.fixed?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -11,7 +11,7 @@\n // tests that the anonymous_parameters lint is warn-by-default on the 2018 edition\n \n // compile-pass\n-// compile-flags: --edition=2018\n+// edition:2018\n // run-rustfix\n \n trait Foo {"}, {"sha": "13eb5dfd816ab0e18860b4ccb9871e9712c99d6e", "filename": "src/test/ui/lint-anon-param-edition.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Flint-anon-param-edition.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Flint-anon-param-edition.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint-anon-param-edition.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -11,7 +11,7 @@\n // tests that the anonymous_parameters lint is warn-by-default on the 2018 edition\n \n // compile-pass\n-// compile-flags: --edition=2018\n+// edition:2018\n // run-rustfix\n \n trait Foo {"}, {"sha": "9cb754167cfe5f1e2a0b213725dc3a548696c3df", "filename": "src/test/ui/no-args-non-move-async-closure.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fno-args-non-move-async-closure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftest%2Fui%2Fno-args-non-move-async-closure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fno-args-non-move-async-closure.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --edition=2018\n+// edition:2018\n \n #![feature(arbitrary_self_types, async_await, await_macro, futures_api, pin)]\n "}, {"sha": "1dd7fe7f0cb39d5fbdd2414677aef566eb81c3de", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -298,6 +298,10 @@ impl TestProps {\n                     .extend(flags.split_whitespace().map(|s| s.to_owned()));\n             }\n \n+            if let Some(edition) = config.parse_edition(ln) {\n+                self.compile_flags.push(format!(\"--edition={}\", edition));\n+            }\n+\n             if let Some(r) = config.parse_revisions(ln) {\n                 self.revisions.extend(r);\n             }\n@@ -371,9 +375,9 @@ impl TestProps {\n                 self.compile_pass = config.parse_compile_pass(ln) || self.run_pass;\n             }\n \n-                        if !self.skip_codegen {\n-                            self.skip_codegen = config.parse_skip_codegen(ln);\n-                        }\n+            if !self.skip_codegen {\n+                self.skip_codegen = config.parse_skip_codegen(ln);\n+            }\n \n             if !self.disable_ui_testing_normalization {\n                 self.disable_ui_testing_normalization =\n@@ -647,6 +651,10 @@ impl Config {\n     fn parse_run_rustfix(&self, line: &str) -> bool {\n         self.parse_name_directive(line, \"run-rustfix\")\n     }\n+\n+    fn parse_edition(&self, line: &str) -> Option<String> {\n+        self.parse_name_value_directive(line, \"edition\")\n+    }\n }\n \n pub fn lldb_version_to_int(version_string: &str) -> isize {"}, {"sha": "408eda5ba5bb58aa6d19848ac6be270c2a15ee4d", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/700a2f799a9e768b41e782ff3060720c9e2a3a75/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=700a2f799a9e768b41e782ff3060720c9e2a3a75", "patch": "@@ -1368,6 +1368,7 @@ impl<'test> TestCx<'test> {\n             .arg(out_dir)\n             .arg(&self.testpaths.file)\n             .args(&self.props.compile_flags);\n+\n         if let Some(ref linker) = self.config.linker {\n             rustdoc\n                 .arg(\"--linker\")"}]}