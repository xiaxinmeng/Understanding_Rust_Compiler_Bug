{"sha": "51a0425f36f313a08a6925612e772c7302525991", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUxYTA0MjVmMzZmMzEzYTA4YTY5MjU2MTJlNzcyYzczMDI1MjU5OTE=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-19T23:03:31Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-27T04:13:40Z"}, "message": "rename lint to `unnameable-test-functions`", "tree": {"sha": "cdd2ccb8ddcc950016ad8527495683314fc3489f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cdd2ccb8ddcc950016ad8527495683314fc3489f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51a0425f36f313a08a6925612e772c7302525991", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51a0425f36f313a08a6925612e772c7302525991", "html_url": "https://github.com/rust-lang/rust/commit/51a0425f36f313a08a6925612e772c7302525991", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51a0425f36f313a08a6925612e772c7302525991/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6a2003e4e30e368ce89a76efc4f6dbf824d01511", "url": "https://api.github.com/repos/rust-lang/rust/commits/6a2003e4e30e368ce89a76efc4f6dbf824d01511", "html_url": "https://github.com/rust-lang/rust/commit/6a2003e4e30e368ce89a76efc4f6dbf824d01511"}], "stats": {"total": 28, "additions": 14, "deletions": 14}, "files": [{"sha": "196290d495c771fd51de24cd9d966d73cd4b8a9a", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/51a0425f36f313a08a6925612e772c7302525991/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51a0425f36f313a08a6925612e772c7302525991/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=51a0425f36f313a08a6925612e772c7302525991", "patch": "@@ -1740,20 +1740,20 @@ impl EarlyLintPass for EllipsisInclusiveRangePatterns {\n }\n \n declare_lint! {\n-    UNTESTABLE_METHOD,\n+    UNNAMEABLE_TEST_FUNCTIONS,\n     Warn,\n-    \"detects untestable method marked as #[test]\"\n+    \"detects an function that cannot be named being marked as #[test]\"\n }\n \n-pub struct UntestableMethod;\n+pub struct UnnameableTestFunctions;\n \n-impl LintPass for UntestableMethod {\n+impl LintPass for UnnameableTestFunctions {\n     fn get_lints(&self) -> LintArray {\n-        lint_array!(UNTESTABLE_METHOD)\n+        lint_array!(UNNAMEABLE_TEST_FUNCTIONS)\n     }\n }\n \n-impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UntestableMethod {\n+impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UnnameableTestFunctions {\n     fn check_item(&mut self, cx: &LateContext, it: &hir::Item) {\n         match it.node {\n             hir::ItemFn(..) => {\n@@ -1765,7 +1765,7 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UntestableMethod {\n                             None => {}\n                             _ => {\n                                 cx.struct_span_lint(\n-                                    UNTESTABLE_METHOD,\n+                                    UNNAMEABLE_TEST_FUNCTIONS,\n                                     attr.span,\n                                     \"cannot test inner function\",\n                                 ).emit();"}, {"sha": "adc700506ffc0bc15f271a2b3b365edca9711021", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/51a0425f36f313a08a6925612e772c7302525991/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51a0425f36f313a08a6925612e772c7302525991/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=51a0425f36f313a08a6925612e772c7302525991", "patch": "@@ -130,7 +130,7 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n         MutableTransmutes: MutableTransmutes,\n         UnionsWithDropFields: UnionsWithDropFields,\n         UnreachablePub: UnreachablePub,\n-        UntestableMethod: UntestableMethod,\n+        UnnameableTestFunctions: UnnameableTestFunctions,\n         TypeAliasBounds: TypeAliasBounds,\n         UnusedBrokenConst: UnusedBrokenConst,\n         TrivialConstraints: TrivialConstraints,"}, {"sha": "4304c96197f962c5b00289fe0ec7d70a37a7ce0d", "filename": "src/test/ui/lint/test-inner-fn.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/51a0425f36f313a08a6925612e772c7302525991/src%2Ftest%2Fui%2Flint%2Ftest-inner-fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51a0425f36f313a08a6925612e772c7302525991/src%2Ftest%2Fui%2Flint%2Ftest-inner-fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Ftest-inner-fn.rs?ref=51a0425f36f313a08a6925612e772c7302525991", "patch": "@@ -8,19 +8,19 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: --test -D untestable_method\n+// compile-flags: --test -D unnameable_test_functions\n \n #[test]\n fn foo() {\n-    #[test] //~ ERROR cannot test inner function [untestable_method]\n+    #[test] //~ ERROR cannot test inner function [unnameable_test_functions]\n     fn bar() {}\n     bar();\n }\n \n mod x {\n     #[test]\n     fn foo() {\n-        #[test] //~ ERROR cannot test inner function [untestable_method]\n+        #[test] //~ ERROR cannot test inner function [unnameable_test_functions]\n         fn bar() {}\n         bar();\n     }"}, {"sha": "37f0c161036ee0f287fc25caf96c01ad7740ef33", "filename": "src/test/ui/lint/test-inner-fn.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/51a0425f36f313a08a6925612e772c7302525991/src%2Ftest%2Fui%2Flint%2Ftest-inner-fn.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/51a0425f36f313a08a6925612e772c7302525991/src%2Ftest%2Fui%2Flint%2Ftest-inner-fn.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Ftest-inner-fn.stderr?ref=51a0425f36f313a08a6925612e772c7302525991", "patch": "@@ -1,15 +1,15 @@\n error: cannot test inner function\n   --> $DIR/test-inner-fn.rs:15:5\n    |\n-LL |     #[test] //~ ERROR cannot test inner function [untestable_method]\n+LL |     #[test] //~ ERROR cannot test inner function [unnameable_test_functions]\n    |     ^^^^^^^\n    |\n-   = note: requested on the command line with `-D untestable-method`\n+   = note: requested on the command line with `-D unnameable-test-functions`\n \n error: cannot test inner function\n   --> $DIR/test-inner-fn.rs:23:9\n    |\n-LL |         #[test] //~ ERROR cannot test inner function [untestable_method]\n+LL |         #[test] //~ ERROR cannot test inner function [unnameable_test_functions]\n    |         ^^^^^^^\n \n error: aborting due to 2 previous errors"}]}