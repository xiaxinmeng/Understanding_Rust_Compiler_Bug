{"sha": "8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "node_id": "C_kwDOAAsO6NoAKDhmYmQ5MmQwYjk1ZDg0N2M2ODk0OGQ4ZGJiZmFjY2I0NzBkYjRmOTI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-05-08T11:14:47Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-05-08T11:14:47Z"}, "message": "Auto merge of #96689 - gimbles:campfire, r=Mark-Simulacrum\n\nMove check-bootstrap from a makefile rule to test::Bootstrap\n\nFixes #96688", "tree": {"sha": "ef2386ca8f46dc683348daf8e9943143b425d2c7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ef2386ca8f46dc683348daf8e9943143b425d2c7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "html_url": "https://github.com/rust-lang/rust/commit/8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c09a3345ab10b9a10a284cea1a1f3673bc9a414", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c09a3345ab10b9a10a284cea1a1f3673bc9a414", "html_url": "https://github.com/rust-lang/rust/commit/4c09a3345ab10b9a10a284cea1a1f3673bc9a414"}, {"sha": "72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "url": "https://api.github.com/repos/rust-lang/rust/commits/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc", "html_url": "https://github.com/rust-lang/rust/commit/72d2d6a4ba40fae2254a03f7782a80b8b315ddbc"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "5a1f2e70413781ddd529ffdb38ccb20cba236826", "filename": "src/bootstrap/mk/Makefile.in", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/src%2Fbootstrap%2Fmk%2FMakefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/src%2Fbootstrap%2Fmk%2FMakefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmk%2FMakefile.in?ref=8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "patch": "@@ -45,8 +45,6 @@ check-aux:\n \t\tsrc/tools/cargo \\\n \t\tsrc/tools/cargotest \\\n \t\t$(BOOTSTRAP_ARGS)\n-check-bootstrap:\n-\t$(Q)$(CFG_PYTHON) $(CFG_SRC_DIR)src/bootstrap/bootstrap_test.py\n dist:\n \t$(Q)$(BOOTSTRAP) dist $(BOOTSTRAP_ARGS)\n distcheck:"}, {"sha": "bc851568f896b95076ef5926dc01af6f66d380ae", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "patch": "@@ -2351,6 +2351,10 @@ impl Step for Bootstrap {\n \n     /// Tests the build system itself.\n     fn run(self, builder: &Builder<'_>) {\n+        let mut check_bootstrap = Command::new(&builder.python());\n+        check_bootstrap.arg(\"bootstrap_test.py\").current_dir(builder.src.join(\"src/bootstrap/\"));\n+        try_run(builder, &mut check_bootstrap);\n+\n         let mut cmd = Command::new(&builder.initial_cargo);\n         cmd.arg(\"test\")\n             .current_dir(builder.src.join(\"src/bootstrap\"))"}, {"sha": "5f843a13bcd9b574ddbed4e71bf61ed3a12ce5e1", "filename": "src/ci/run.sh", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/src%2Fci%2Frun.sh", "raw_url": "https://github.com/rust-lang/rust/raw/8fbd92d0b95d847c68948d8dbbfaccb470db4f92/src%2Fci%2Frun.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Frun.sh?ref=8fbd92d0b95d847c68948d8dbbfaccb470db4f92", "patch": "@@ -141,8 +141,6 @@ $SRC/configure $RUST_CONFIGURE_ARGS\n \n retry make prepare\n \n-make check-bootstrap\n-\n # Display the CPU and memory information. This helps us know why the CI timing\n # is fluctuating.\n if isMacOS; then"}]}