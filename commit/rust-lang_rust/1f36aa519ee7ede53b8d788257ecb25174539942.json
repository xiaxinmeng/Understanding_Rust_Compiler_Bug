{"sha": "1f36aa519ee7ede53b8d788257ecb25174539942", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmMzZhYTUxOWVlN2VkZTUzYjhkNzg4MjU3ZWNiMjUxNzQ1Mzk5NDI=", "commit": {"author": {"name": "Darren Tsung", "email": "darrentsung@Darrens-MacBook-Pro.local", "date": "2017-12-22T18:51:41Z"}, "committer": {"name": "Darren Tsung", "email": "darrentsung@Darrens-MacBook-Pro.local", "date": "2017-12-22T18:51:41Z"}, "message": "Check that eq_op lint doesn\u2019t mark macro use of functions as errors since macros, fix #2265", "tree": {"sha": "73cdd0c134746a0f6ab01fbbb6d1c9030d7e875c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73cdd0c134746a0f6ab01fbbb6d1c9030d7e875c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1f36aa519ee7ede53b8d788257ecb25174539942", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1f36aa519ee7ede53b8d788257ecb25174539942", "html_url": "https://github.com/rust-lang/rust/commit/1f36aa519ee7ede53b8d788257ecb25174539942", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1f36aa519ee7ede53b8d788257ecb25174539942/comments", "author": null, "committer": null, "parents": [{"sha": "50eb48e42b0be3dc124ad04eb14adfafabcaf155", "url": "https://api.github.com/repos/rust-lang/rust/commits/50eb48e42b0be3dc124ad04eb14adfafabcaf155", "html_url": "https://github.com/rust-lang/rust/commit/50eb48e42b0be3dc124ad04eb14adfafabcaf155"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "9bea91848dc3ffad72703e2d0db351136e656bd4", "filename": "clippy_lints/src/eq_op.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1f36aa519ee7ede53b8d788257ecb25174539942/clippy_lints%2Fsrc%2Feq_op.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1f36aa519ee7ede53b8d788257ecb25174539942/clippy_lints%2Fsrc%2Feq_op.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Feq_op.rs?ref=1f36aa519ee7ede53b8d788257ecb25174539942", "patch": "@@ -1,6 +1,6 @@\n use rustc::hir::*;\n use rustc::lint::*;\n-use utils::{implements_trait, is_copy, multispan_sugg, snippet, span_lint, span_lint_and_then, SpanlessEq};\n+use utils::{in_macro, implements_trait, is_copy, multispan_sugg, snippet, span_lint, span_lint_and_then, SpanlessEq};\n \n /// **What it does:** Checks for equal operands to comparison, logical and\n /// bitwise, difference and division binary operators (`==`, `>`, etc., `&&`,\n@@ -53,7 +53,7 @@ impl LintPass for EqOp {\n impl<'a, 'tcx> LateLintPass<'a, 'tcx> for EqOp {\n     fn check_expr(&mut self, cx: &LateContext<'a, 'tcx>, e: &'tcx Expr) {\n         if let ExprBinary(ref op, ref left, ref right) = e.node {\n-            if is_valid_operator(op) && SpanlessEq::new(cx).ignore_fn().eq_expr(left, right) {\n+            if !in_macro(e.span) && is_valid_operator(op) && SpanlessEq::new(cx).ignore_fn().eq_expr(left, right) {\n                 span_lint(\n                     cx,\n                     EQ_OP,"}]}