{"sha": "5704485063bad82e651c8e68f4fa2d333bfdf152", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3MDQ0ODUwNjNiYWQ4MmU2NTFjOGU2OGY0ZmEyZDMzM2JmZGYxNTI=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-09-25T18:14:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-09-25T18:14:35Z"}, "message": "Merge #1913\n\n1913: Fix retrieval of the Fn traits r=flodiebold a=flodiebold\n\nI used the wrong query, so it only used the lang items from the respective\r\ncrate...\n\nCo-authored-by: Florian Diebold <flodiebold@gmail.com>", "tree": {"sha": "b0928748d21ca45547e53701c6fc4d6d93a39c9a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b0928748d21ca45547e53701c6fc4d6d93a39c9a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5704485063bad82e651c8e68f4fa2d333bfdf152", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdi66LCRBK7hj4Ov3rIwAAdHIIAEIeFJUmfmwe2OUoPj8OKjOn\n1kOmY5Yjp5sx9Ub/tomrsrBowGs7alXQvXIP96bfQFfQYfuiNRdgDV4o7ubH5pwe\nlmL6A9cc+uUw2nB5KTCtBK8fdbveZamOyXp6c3CqKaem/p6UNqxkyEE6y9jxPdqX\nw7btcZ6TQXGtX/CxDOY4gfQ2XO1njlbyFXCLKo+US7L0t++n++XwwMfSMKhjNyX2\ncVAyBvrsAJBNlLdaFrWqW2m6NzXP+ERl2J52sXCMiae3XHYxk3BbfawO4+ayJCvI\nKvjQvUHMZmE7gFmRbYJwLco32uFgozNYl6RJsqCQNHcew4f+qrjAGdyhIfDX+bE=\n=fH9g\n-----END PGP SIGNATURE-----\n", "payload": "tree b0928748d21ca45547e53701c6fc4d6d93a39c9a\nparent a452e50e0e89390b8a055f0c7c64100e9872edac\nparent d0d1a202d4a4c56e593611aa34ef2e39255d16d2\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1569435275 +0000\ncommitter GitHub <noreply@github.com> 1569435275 +0000\n\nMerge #1913\n\n1913: Fix retrieval of the Fn traits r=flodiebold a=flodiebold\n\nI used the wrong query, so it only used the lang items from the respective\r\ncrate...\n\nCo-authored-by: Florian Diebold <flodiebold@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5704485063bad82e651c8e68f4fa2d333bfdf152", "html_url": "https://github.com/rust-lang/rust/commit/5704485063bad82e651c8e68f4fa2d333bfdf152", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5704485063bad82e651c8e68f4fa2d333bfdf152/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a452e50e0e89390b8a055f0c7c64100e9872edac", "url": "https://api.github.com/repos/rust-lang/rust/commits/a452e50e0e89390b8a055f0c7c64100e9872edac", "html_url": "https://github.com/rust-lang/rust/commit/a452e50e0e89390b8a055f0c7c64100e9872edac"}, {"sha": "d0d1a202d4a4c56e593611aa34ef2e39255d16d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/d0d1a202d4a4c56e593611aa34ef2e39255d16d2", "html_url": "https://github.com/rust-lang/rust/commit/d0d1a202d4a4c56e593611aa34ef2e39255d16d2"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "deed1c62f84c86bbda39a3180bd8602448339e49", "filename": "crates/ra_hir/src/db.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_hir%2Fsrc%2Fdb.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_hir%2Fsrc%2Fdb.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fdb.rs?ref=5704485063bad82e651c8e68f4fa2d333bfdf152", "patch": "@@ -136,8 +136,8 @@ pub trait DefDatabase: InternDatabase + HirDebugDatabase {\n     #[salsa::invoke(crate::lang_item::LangItems::module_lang_items_query)]\n     fn module_lang_items(&self, module: Module) -> Option<Arc<LangItems>>;\n \n-    #[salsa::invoke(crate::lang_item::LangItems::lang_items_query)]\n-    fn lang_items(&self, krate: Crate) -> Arc<LangItems>;\n+    #[salsa::invoke(crate::lang_item::LangItems::crate_lang_items_query)]\n+    fn crate_lang_items(&self, krate: Crate) -> Arc<LangItems>;\n \n     #[salsa::invoke(crate::lang_item::LangItems::lang_item_query)]\n     fn lang_item(&self, start_crate: Crate, item: SmolStr) -> Option<LangItemTarget>;"}, {"sha": "bcce314d8818b7e594bda79b365af79eac75528a", "filename": "crates/ra_hir/src/lang_item.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_hir%2Fsrc%2Flang_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_hir%2Fsrc%2Flang_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Flang_item.rs?ref=5704485063bad82e651c8e68f4fa2d333bfdf152", "patch": "@@ -42,7 +42,7 @@ impl LangItems {\n     }\n \n     /// Salsa query. This will look for lang items in a specific crate.\n-    pub(crate) fn lang_items_query(\n+    pub(crate) fn crate_lang_items_query(\n         db: &(impl DefDatabase + AstDatabase),\n         krate: Crate,\n     ) -> Arc<LangItems> {\n@@ -75,7 +75,7 @@ impl LangItems {\n         start_crate: Crate,\n         item: SmolStr,\n     ) -> Option<LangItemTarget> {\n-        let lang_items = db.lang_items(start_crate);\n+        let lang_items = db.crate_lang_items(start_crate);\n         let start_crate_target = lang_items.items.get(&item);\n         if let Some(target) = start_crate_target {\n             Some(*target)"}, {"sha": "538b4d3ec066619434c6afc210da42cb06141f37", "filename": "crates/ra_hir/src/ty/traits/chalk.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits%2Fchalk.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits%2Fchalk.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir%2Fsrc%2Fty%2Ftraits%2Fchalk.rs?ref=5704485063bad82e651c8e68f4fa2d333bfdf152", "patch": "@@ -765,10 +765,9 @@ fn closure_fn_trait_impl_datum(\n }\n \n fn get_fn_trait(db: &impl HirDatabase, krate: Crate, fn_trait: super::FnTrait) -> Option<Trait> {\n-    let lang_items = db.lang_items(krate);\n-    let target = lang_items.target(fn_trait.lang_item_name())?;\n+    let target = db.lang_item(krate, fn_trait.lang_item_name().into())?;\n     match target {\n-        crate::lang_item::LangItemTarget::Trait(t) => Some(*t),\n+        crate::lang_item::LangItemTarget::Trait(t) => Some(t),\n         _ => None,\n     }\n }"}, {"sha": "b4ba3f3cd985cd4234d229071b1e856bf72a9d70", "filename": "crates/ra_ide_api/src/change.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_ide_api%2Fsrc%2Fchange.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5704485063bad82e651c8e68f4fa2d333bfdf152/crates%2Fra_ide_api%2Fsrc%2Fchange.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fchange.rs?ref=5704485063bad82e651c8e68f4fa2d333bfdf152", "patch": "@@ -326,7 +326,7 @@ impl RootDatabase {\n             hir::db::ConstDataQuery\n             hir::db::StaticDataQuery\n             hir::db::ModuleLangItemsQuery\n-            hir::db::LangItemsQuery\n+            hir::db::CrateLangItemsQuery\n             hir::db::LangItemQuery\n             hir::db::DocumentationQuery\n             hir::db::ExprScopesQuery"}]}