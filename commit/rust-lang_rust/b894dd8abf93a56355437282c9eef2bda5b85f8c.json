{"sha": "b894dd8abf93a56355437282c9eef2bda5b85f8c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI4OTRkZDhhYmY5M2E1NjM1NTQzNzI4MmM5ZWVmMmJkYTViODVmOGM=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-09-26T06:25:41Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-09-26T06:25:41Z"}, "message": "Use a width heuristic for struct lits.\n\nCloses #123", "tree": {"sha": "7cf07761ad6c255e1ac5d09f0979d8e6e2d347db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7cf07761ad6c255e1ac5d09f0979d8e6e2d347db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b894dd8abf93a56355437282c9eef2bda5b85f8c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b894dd8abf93a56355437282c9eef2bda5b85f8c", "html_url": "https://github.com/rust-lang/rust/commit/b894dd8abf93a56355437282c9eef2bda5b85f8c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b894dd8abf93a56355437282c9eef2bda5b85f8c/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a5688f7c238c3c62d193972a93d7006cccfe8e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a5688f7c238c3c62d193972a93d7006cccfe8e4", "html_url": "https://github.com/rust-lang/rust/commit/9a5688f7c238c3c62d193972a93d7006cccfe8e4"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "020761744820ec9a977bb5aa6fd81710a0ca916c", "filename": "src/config.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b894dd8abf93a56355437282c9eef2bda5b85f8c/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b894dd8abf93a56355437282c9eef2bda5b85f8c/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=b894dd8abf93a56355437282c9eef2bda5b85f8c", "patch": "@@ -218,8 +218,10 @@ create_config! {\n     ideal_width: usize, \"Ideal width of each line (only used for comments)\",\n     leeway: usize, \"Leeway of line width (deprecated)\",\n     tab_spaces: usize, \"Number of spaces per tab\",\n-    list_width: usize, \"Maximum width in a struct literal or function \\\n-                        call before faling back to vertical formatting\",\n+    fn_call_width: usize, \"Maximum width of the args of a function call\\\n+                           before faling back to vertical formatting\",\n+    struct_lit_width: usize, \"Maximum width in the body of a struct lit\\\n+                              before faling back to vertical formatting\",\n     newline_style: NewlineStyle, \"Unix or Windows line endings\",\n     fn_brace_style: BraceStyle, \"Brace style for functions\",\n     fn_return_indent: ReturnIndent, \"Location of return type in function declaration\",\n@@ -258,7 +260,8 @@ impl Default for Config {\n             ideal_width: 80,\n             leeway: 5,\n             tab_spaces: 4,\n-            list_width: 50,\n+            fn_call_width: 50,\n+            struct_lit_width: 12,\n             newline_style: NewlineStyle::Unix,\n             fn_brace_style: BraceStyle::SameLineWhere,\n             fn_return_indent: ReturnIndent::WithArgs,"}, {"sha": "f2e6b1e0dfa1df85bdbc8228a90b1a5d47576b8a", "filename": "src/expr.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b894dd8abf93a56355437282c9eef2bda5b85f8c/src%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b894dd8abf93a56355437282c9eef2bda5b85f8c/src%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fexpr.rs?ref=b894dd8abf93a56355437282c9eef2bda5b85f8c", "patch": "@@ -1226,11 +1226,15 @@ fn rewrite_struct_lit<'a>(context: &RewriteContext,\n                              span_after(span, \"{\", context.codemap),\n                              span.hi);\n \n-    let tactic = match (context.config.struct_lit_style, fields.len()) {\n+    let mut tactic = match (context.config.struct_lit_style, fields.len()) {\n         (StructLitStyle::Visual, 1) => ListTactic::HorizontalVertical,\n         _ => context.config.struct_lit_multiline_style.to_list_tactic(),\n     };\n \n+    if tactic == ListTactic::HorizontalVertical && fields.len() > 1 {\n+        tactic = ListTactic::LimitedHorizontalVertical(context.config.struct_lit_width);\n+    }\n+\n     let fmt = ListFormatting {\n         tactic: tactic,\n         separator: \",\","}, {"sha": "c372be2fe8f65560cb3df0576d2b8cafb1f3e2a5", "filename": "src/lists.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b894dd8abf93a56355437282c9eef2bda5b85f8c/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b894dd8abf93a56355437282c9eef2bda5b85f8c/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=b894dd8abf93a56355437282c9eef2bda5b85f8c", "patch": "@@ -62,7 +62,7 @@ pub struct ListFormatting<'a> {\n impl<'a> ListFormatting<'a> {\n     pub fn for_fn(width: usize, offset: Indent, config: &'a Config) -> ListFormatting<'a> {\n         ListFormatting {\n-            tactic: ListTactic::LimitedHorizontalVertical(config.list_width),\n+            tactic: ListTactic::LimitedHorizontalVertical(config.fn_call_width),\n             separator: \",\",\n             trailing_separator: SeparatorTactic::Never,\n             indent: offset,"}]}