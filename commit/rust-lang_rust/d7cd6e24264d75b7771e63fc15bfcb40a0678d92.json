{"sha": "d7cd6e24264d75b7771e63fc15bfcb40a0678d92", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ3Y2Q2ZTI0MjY0ZDc1Yjc3NzFlNjNmYzE1YmZjYjQwYTA2NzhkOTI=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-05-03T16:36:06Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2021-05-03T16:41:59Z"}, "message": "Fix RESTRICTED_DEPENDENCY_CRATES to list rustc_driver instead of rustc_middle", "tree": {"sha": "7d9241d1a8e8e5a3ba7d3c101c143663c3272024", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d9241d1a8e8e5a3ba7d3c101c143663c3272024"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d7cd6e24264d75b7771e63fc15bfcb40a0678d92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d7cd6e24264d75b7771e63fc15bfcb40a0678d92", "html_url": "https://github.com/rust-lang/rust/commit/d7cd6e24264d75b7771e63fc15bfcb40a0678d92", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d7cd6e24264d75b7771e63fc15bfcb40a0678d92/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e327a823d8b64e294e490efeca7829f383aa119d", "url": "https://api.github.com/repos/rust-lang/rust/commits/e327a823d8b64e294e490efeca7829f383aa119d", "html_url": "https://github.com/rust-lang/rust/commit/e327a823d8b64e294e490efeca7829f383aa119d"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "4d9a19535ade9fda1b4f87327e6c58ed07af46fd", "filename": "src/tools/tidy/src/deps.rs", "status": "modified", "additions": 22, "deletions": 1, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/d7cd6e24264d75b7771e63fc15bfcb40a0678d92/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d7cd6e24264d75b7771e63fc15bfcb40a0678d92/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Fdeps.rs?ref=d7cd6e24264d75b7771e63fc15bfcb40a0678d92", "patch": "@@ -49,7 +49,7 @@ const EXCEPTIONS: &[(&str, &str)] = &[\n const RUNTIME_CRATES: &[&str] = &[\"std\", \"core\", \"alloc\", \"test\", \"panic_abort\", \"panic_unwind\"];\n \n /// Crates whose dependencies must be explicitly permitted.\n-const RESTRICTED_DEPENDENCY_CRATES: &[&str] = &[\"rustc_middle\", \"rustc_codegen_llvm\"];\n+const RESTRICTED_DEPENDENCY_CRATES: &[&str] = &[\"rustc_driver\", \"rustc_codegen_llvm\"];\n \n /// Crates rustc is allowed to depend on. Avoid adding to the list if possible.\n ///\n@@ -72,7 +72,10 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"cc\",\n     \"cfg-if\",\n     \"chalk-derive\",\n+    \"chalk-engine\",\n     \"chalk-ir\",\n+    \"chalk-solve\",\n+    \"chrono\",\n     \"cmake\",\n     \"compiler_builtins\",\n     \"cpuid-bool\",\n@@ -92,6 +95,7 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"expect-test\",\n     \"fake-simd\",\n     \"filetime\",\n+    \"fixedbitset\",\n     \"flate2\",\n     \"fortanix-sgx-abi\",\n     \"fuchsia-zircon\",\n@@ -107,13 +111,15 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"indexmap\",\n     \"instant\",\n     \"itertools\",\n+    \"itoa\",\n     \"jobserver\",\n     \"kernel32-sys\",\n     \"lazy_static\",\n     \"libc\",\n     \"libz-sys\",\n     \"lock_api\",\n     \"log\",\n+    \"matchers\",\n     \"maybe-uninit\",\n     \"md-5\",\n     \"measureme\",\n@@ -123,13 +129,16 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"memoffset\",\n     \"miniz_oxide\",\n     \"num_cpus\",\n+    \"num-integer\",\n+    \"num-traits\",\n     \"object\",\n     \"once_cell\",\n     \"opaque-debug\",\n     \"parking_lot\",\n     \"parking_lot_core\",\n     \"pathdiff\",\n     \"perf-event-open-sys\",\n+    \"petgraph\",\n     \"pin-project-lite\",\n     \"pkg-config\",\n     \"polonius-engine\",\n@@ -147,22 +156,28 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"rand_xorshift\",\n     \"redox_syscall\",\n     \"regex\",\n+    \"regex-automata\",\n     \"regex-syntax\",\n     \"remove_dir_all\",\n+    \"rls-data\",\n+    \"rls-span\",\n     \"rustc-demangle\",\n     \"rustc-hash\",\n     \"rustc-rayon\",\n     \"rustc-rayon-core\",\n     \"rustc_version\",\n+    \"ryu\",\n     \"scoped-tls\",\n     \"scopeguard\",\n     \"semver\",\n     \"semver-parser\",\n     \"serde\",\n     \"serde_derive\",\n+    \"serde_json\",\n     \"sha-1\",\n     \"sha2\",\n     \"smallvec\",\n+    \"sharded-slab\",\n     \"snap\",\n     \"stable_deref_trait\",\n     \"stacker\",\n@@ -172,9 +187,15 @@ const PERMITTED_DEPENDENCIES: &[&str] = &[\n     \"termcolor\",\n     \"termize\",\n     \"thread_local\",\n+    \"time\",\n+    \"tinyvec\",\n     \"tracing\",\n     \"tracing-attributes\",\n     \"tracing-core\",\n+    \"tracing-log\",\n+    \"tracing-serde\",\n+    \"tracing-subscriber\",\n+    \"tracing-tree\",\n     \"typenum\",\n     \"unicode-normalization\",\n     \"unicode-script\","}]}