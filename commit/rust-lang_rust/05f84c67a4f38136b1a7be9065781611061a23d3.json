{"sha": "05f84c67a4f38136b1a7be9065781611061a23d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1Zjg0YzY3YTRmMzgxMzZiMWE3YmU5MDY1NzgxNjExMDYxYTIzZDM=", "commit": {"author": {"name": "Simon Vandel Sillesen", "email": "simon.vandel@gmail.com", "date": "2020-09-23T16:25:55Z"}, "committer": {"name": "Simon Vandel Sillesen", "email": "simon.vandel@gmail.com", "date": "2020-09-23T16:25:55Z"}, "message": "Ignore test on wasm as it does not unwind", "tree": {"sha": "1aef7f66d737be75f52969a6c7eee0139f6830c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1aef7f66d737be75f52969a6c7eee0139f6830c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05f84c67a4f38136b1a7be9065781611061a23d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05f84c67a4f38136b1a7be9065781611061a23d3", "html_url": "https://github.com/rust-lang/rust/commit/05f84c67a4f38136b1a7be9065781611061a23d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05f84c67a4f38136b1a7be9065781611061a23d3/comments", "author": {"login": "simonvandel", "id": 2770647, "node_id": "MDQ6VXNlcjI3NzA2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2770647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonvandel", "html_url": "https://github.com/simonvandel", "followers_url": "https://api.github.com/users/simonvandel/followers", "following_url": "https://api.github.com/users/simonvandel/following{/other_user}", "gists_url": "https://api.github.com/users/simonvandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonvandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonvandel/subscriptions", "organizations_url": "https://api.github.com/users/simonvandel/orgs", "repos_url": "https://api.github.com/users/simonvandel/repos", "events_url": "https://api.github.com/users/simonvandel/events{/privacy}", "received_events_url": "https://api.github.com/users/simonvandel/received_events", "type": "User", "site_admin": false}, "committer": {"login": "simonvandel", "id": 2770647, "node_id": "MDQ6VXNlcjI3NzA2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/2770647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/simonvandel", "html_url": "https://github.com/simonvandel", "followers_url": "https://api.github.com/users/simonvandel/followers", "following_url": "https://api.github.com/users/simonvandel/following{/other_user}", "gists_url": "https://api.github.com/users/simonvandel/gists{/gist_id}", "starred_url": "https://api.github.com/users/simonvandel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/simonvandel/subscriptions", "organizations_url": "https://api.github.com/users/simonvandel/orgs", "repos_url": "https://api.github.com/users/simonvandel/repos", "events_url": "https://api.github.com/users/simonvandel/events{/privacy}", "received_events_url": "https://api.github.com/users/simonvandel/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ff241633f4ac520ec2409a30679c13b1302f53ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/ff241633f4ac520ec2409a30679c13b1302f53ba", "html_url": "https://github.com/rust-lang/rust/commit/ff241633f4ac520ec2409a30679c13b1302f53ba"}], "stats": {"total": 93, "additions": 47, "deletions": 46}, "files": [{"sha": "787cf6f97c1f2da412a80b719745da1b0ef2f083", "filename": "src/test/mir-opt/remove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.cannot_opt_generic.RemoveUnneededDrops.diff?ref=05f84c67a4f38136b1a7be9065781611061a23d3", "patch": "@@ -2,31 +2,31 @@\n + // MIR for `cannot_opt_generic` after RemoveUnneededDrops\n   \n   fn cannot_opt_generic(_1: T) -> () {\n-      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:19:26: 19:27\n-      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:19:32: 19:32\n-      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:20:5: 20:12\n-      let mut _3: T;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:20:10: 20:11\n+      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:20:26: 20:27\n+      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:20:32: 20:32\n+      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n+      let mut _3: T;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n       scope 1 {\n           debug _x => _3;                  // in scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n       }\n   \n       bb0: {\n-          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:20:5: 20:12\n-          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:20:10: 20:11\n-          _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:20:10: 20:11\n+          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:5: 21:12\n+          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n+          _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:21:10: 21:11\n           _2 = const ();                   // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n           drop(_3) -> [return: bb2, unwind: bb1]; // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n       }\n   \n       bb1 (cleanup): {\n-          resume;                          // scope 0 at $DIR/remove_unneeded_drops.rs:19:1: 21:2\n+          resume;                          // scope 0 at $DIR/remove_unneeded_drops.rs:20:1: 22:2\n       }\n   \n       bb2: {\n-          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:20:11: 20:12\n-          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:20:12: 20:13\n-          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:19:32: 21:2\n-          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:21:2: 21:2\n+          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:11: 21:12\n+          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:21:12: 21:13\n+          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:20:32: 22:2\n+          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:22:2: 22:2\n       }\n   }\n   "}, {"sha": "52e182eeb4a8a32bd49a6117bff3ec175c433e12", "filename": "src/test/mir-opt/remove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 12, "deletions": 12, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.dont_opt.RemoveUnneededDrops.diff?ref=05f84c67a4f38136b1a7be9065781611061a23d3", "patch": "@@ -2,31 +2,31 @@\n + // MIR for `dont_opt` after RemoveUnneededDrops\n   \n   fn dont_opt(_1: Vec<bool>) -> () {\n-      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:7:13: 7:14\n-      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:7:27: 7:27\n-      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:8:5: 8:12\n-      let mut _3: std::vec::Vec<bool>;     // in scope 0 at $DIR/remove_unneeded_drops.rs:8:10: 8:11\n+      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:8:13: 8:14\n+      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:8:27: 8:27\n+      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n+      let mut _3: std::vec::Vec<bool>;     // in scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n       scope 1 {\n           debug _x => _3;                  // in scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n       }\n   \n       bb0: {\n-          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:8:5: 8:12\n-          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:8:10: 8:11\n-          _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:8:10: 8:11\n+          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:5: 9:12\n+          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n+          _3 = move _1;                    // scope 0 at $DIR/remove_unneeded_drops.rs:9:10: 9:11\n           _2 = const ();                   // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n           drop(_3) -> [return: bb2, unwind: bb1]; // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n       }\n   \n       bb1 (cleanup): {\n-          resume;                          // scope 0 at $DIR/remove_unneeded_drops.rs:7:1: 9:2\n+          resume;                          // scope 0 at $DIR/remove_unneeded_drops.rs:8:1: 10:2\n       }\n   \n       bb2: {\n-          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:8:11: 8:12\n-          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:8:12: 8:13\n-          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:7:27: 9:2\n-          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:9:2: 9:2\n+          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:11: 9:12\n+          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:9:12: 9:13\n+          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:8:27: 10:2\n+          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:10:2: 10:2\n       }\n   }\n   "}, {"sha": "bc9e1344f3176c992de29a800453cad2c417e896", "filename": "src/test/mir-opt/remove_unneeded_drops.opt.RemoveUnneededDrops.diff", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt.RemoveUnneededDrops.diff?ref=05f84c67a4f38136b1a7be9065781611061a23d3", "patch": "@@ -2,27 +2,27 @@\n + // MIR for `opt` after RemoveUnneededDrops\n   \n   fn opt(_1: bool) -> () {\n-      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:2:8: 2:9\n-      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:2:17: 2:17\n-      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:3:5: 3:12\n-      let mut _3: bool;                    // in scope 0 at $DIR/remove_unneeded_drops.rs:3:10: 3:11\n+      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:3:8: 3:9\n+      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:3:17: 3:17\n+      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n+      let mut _3: bool;                    // in scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n       scope 1 {\n           debug _x => _3;                  // in scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n       }\n   \n       bb0: {\n-          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:3:5: 3:12\n-          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:3:10: 3:11\n-          _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:3:10: 3:11\n+          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:5: 4:12\n+          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n+          _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:4:10: 4:11\n           _2 = const ();                   // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n -         drop(_3) -> bb1;                 // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n -     }\n - \n -     bb1: {\n-          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:3:11: 3:12\n-          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:3:12: 3:13\n-          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:2:17: 4:2\n-          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:4:2: 4:2\n+          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:11: 4:12\n+          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:4:12: 4:13\n+          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:3:17: 5:2\n+          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:5:2: 5:2\n       }\n   }\n   "}, {"sha": "5c8b1d1372115ac7dc5029a8194cb5d1b1915a68", "filename": "src/test/mir-opt/remove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.opt_generic_copy.RemoveUnneededDrops.diff?ref=05f84c67a4f38136b1a7be9065781611061a23d3", "patch": "@@ -2,27 +2,27 @@\n + // MIR for `opt_generic_copy` after RemoveUnneededDrops\n   \n   fn opt_generic_copy(_1: T) -> () {\n-      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:12:30: 12:31\n-      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:12:36: 12:36\n-      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:13:5: 13:12\n-      let mut _3: T;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:13:10: 13:11\n+      debug x => _1;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:13:30: 13:31\n+      let mut _0: ();                      // return place in scope 0 at $DIR/remove_unneeded_drops.rs:13:36: 13:36\n+      let _2: ();                          // in scope 0 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n+      let mut _3: T;                       // in scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n       scope 1 {\n           debug _x => _3;                  // in scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n       }\n   \n       bb0: {\n-          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:13:5: 13:12\n-          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:13:10: 13:11\n-          _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:13:10: 13:11\n+          StorageLive(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:5: 14:12\n+          StorageLive(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n+          _3 = _1;                         // scope 0 at $DIR/remove_unneeded_drops.rs:14:10: 14:11\n           _2 = const ();                   // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n -         drop(_3) -> bb1;                 // scope 1 at $SRC_DIR/core/src/mem/mod.rs:LL:COL\n -     }\n - \n -     bb1: {\n-          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:13:11: 13:12\n-          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:13:12: 13:13\n-          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:12:36: 14:2\n-          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:14:2: 14:2\n+          StorageDead(_3);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:11: 14:12\n+          StorageDead(_2);                 // scope 0 at $DIR/remove_unneeded_drops.rs:14:12: 14:13\n+          _0 = const ();                   // scope 0 at $DIR/remove_unneeded_drops.rs:13:36: 15:2\n+          return;                          // scope 0 at $DIR/remove_unneeded_drops.rs:15:2: 15:2\n       }\n   }\n   "}, {"sha": "1052f2886770d423b755c9457c5213f724d54981", "filename": "src/test/mir-opt/remove_unneeded_drops.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f84c67a4f38136b1a7be9065781611061a23d3/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_unneeded_drops.rs?ref=05f84c67a4f38136b1a7be9065781611061a23d3", "patch": "@@ -1,3 +1,4 @@\n+// ignore-wasm32-bare compiled with panic=abort by default\n // EMIT_MIR remove_unneeded_drops.opt.RemoveUnneededDrops.diff\n fn opt(x: bool) {\n     drop(x);"}]}