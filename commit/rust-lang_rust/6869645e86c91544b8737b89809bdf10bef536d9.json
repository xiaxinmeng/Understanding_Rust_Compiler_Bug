{"sha": "6869645e86c91544b8737b89809bdf10bef536d9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY4Njk2NDVlODZjOTE1NDRiODczN2I4OTgwOWJkZjEwYmVmNTM2ZDk=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-01-21T11:07:31Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-01-21T11:07:31Z"}, "message": "Auto merge of #21242 - richo:no-perl, r=brson\n\nThere's only one build-critical path in which perl is used, and it was to do a text replacement trivially achievable with sed(1).\r\n\r\nI ported the indenter script because it [appears to be used][indenter], but removed check links because it appears to be entirely out of date.\r\n\r\n[indenter]: https://github.com/rust-lang/rust/blob/master/src/librustc/util/common.rs#L60-70", "tree": {"sha": "522452a9cb7b47e2c8c8df97aa2727290bc9a159", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/522452a9cb7b47e2c8c8df97aa2727290bc9a159"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6869645e86c91544b8737b89809bdf10bef536d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6869645e86c91544b8737b89809bdf10bef536d9", "html_url": "https://github.com/rust-lang/rust/commit/6869645e86c91544b8737b89809bdf10bef536d9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6869645e86c91544b8737b89809bdf10bef536d9/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8abcbaba1dd3f98dc37bec2288ba61a044be785c", "url": "https://api.github.com/repos/rust-lang/rust/commits/8abcbaba1dd3f98dc37bec2288ba61a044be785c", "html_url": "https://github.com/rust-lang/rust/commit/8abcbaba1dd3f98dc37bec2288ba61a044be785c"}, {"sha": "de3ea99ec55d5f544abef6df836d67e6b87cb299", "url": "https://api.github.com/repos/rust-lang/rust/commits/de3ea99ec55d5f544abef6df836d67e6b87cb299", "html_url": "https://github.com/rust-lang/rust/commit/de3ea99ec55d5f544abef6df836d67e6b87cb299"}], "stats": {"total": 67, "additions": 17, "deletions": 50}, "files": [{"sha": "eef27236b1aa365df9f17f4aa6fe01309f1cb541", "filename": "README.md", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/6869645e86c91544b8737b89809bdf10bef536d9/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/6869645e86c91544b8737b89809bdf10bef536d9/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=6869645e86c91544b8737b89809bdf10bef536d9", "patch": "@@ -21,7 +21,6 @@ documentation.\n 1. Make sure you have installed the dependencies:\n     * `g++` 4.7 or `clang++` 3.x\n     * `python` 2.6 or later (but not 3.x)\n-    * `perl` 5.0 or later\n     * GNU `make` 3.81 or later\n     * `curl`\n     * `git`"}, {"sha": "b14eac4b77e13051c1bbf57694466f4c2aa520f1", "filename": "configure", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/6869645e86c91544b8737b89809bdf10bef536d9/configure", "raw_url": "https://github.com/rust-lang/rust/raw/6869645e86c91544b8737b89809bdf10bef536d9/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=6869645e86c91544b8737b89809bdf10bef536d9", "patch": "@@ -617,7 +617,6 @@ putvar CFG_BOOTSTRAP_KEY\n \n step_msg \"looking for build programs\"\n \n-probe_need CFG_PERL        perl\n probe_need CFG_CURLORWGET  curl wget\n probe_need CFG_PYTHON      python2.7 python2.6 python2 python\n \n@@ -1375,7 +1374,7 @@ do\n done\n \n # Munge any paths that appear in config.mk back to posix-y\n-perl -i.bak -p -e 's@ ([a-zA-Z]):[/\\\\]@ /\\1/@go;' config.tmp\n+sed -i.bak -e 's@ \\([a-zA-Z]\\):[/\\\\]@ /\\1/@g;' config.tmp\n rm -f config.tmp.bak\n \n msg"}, {"sha": "3818c0f840139d9aa02576388d682be0debf0fae", "filename": "src/etc/check-links.pl", "status": "removed", "additions": 0, "deletions": 34, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/8abcbaba1dd3f98dc37bec2288ba61a044be785c/src%2Fetc%2Fcheck-links.pl", "raw_url": "https://github.com/rust-lang/rust/raw/8abcbaba1dd3f98dc37bec2288ba61a044be785c/src%2Fetc%2Fcheck-links.pl", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fcheck-links.pl?ref=8abcbaba1dd3f98dc37bec2288ba61a044be785c", "patch": "@@ -1,34 +0,0 @@\n-#!/usr/bin/perl -w\n-# Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n-# file at the top-level directory of this distribution and at\n-# http://rust-lang.org/COPYRIGHT.\n-#\n-# Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n-# http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n-# <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n-# option. This file may not be copied, modified, or distributed\n-# except according to those terms.\n-\n-my $file = $ARGV[0];\n-\n-my @lines = <>;\n-\n-my $anchors = {};\n-\n-my $i = 0;\n-for $line (@lines) {\n-    $i++;\n-    if ($line =~ m/id=\"([^\"]+)\"/) {\n-        $anchors->{$1} = $i;\n-    }\n-}\n-\n-$i = 0;\n-for $line (@lines) {\n-    $i++;\n-    while ($line =~ m/href=\"#([^\"]+)\"/g) {\n-        if (! exists($anchors->{$1})) {\n-            print \"$file:$i: $1 referenced\\n\";\n-        }\n-    }\n-}"}, {"sha": "b3eed6a144342fd83bf64cc67d579a9c59009365", "filename": "src/etc/indenter", "status": "modified", "additions": 16, "deletions": 13, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/6869645e86c91544b8737b89809bdf10bef536d9/src%2Fetc%2Findenter", "raw_url": "https://github.com/rust-lang/rust/raw/6869645e86c91544b8737b89809bdf10bef536d9/src%2Fetc%2Findenter", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Findenter?ref=6869645e86c91544b8737b89809bdf10bef536d9", "patch": "@@ -1,16 +1,19 @@\n-#!/usr/bin/perl\n-use strict;\n-use warnings;\n+#!/usr/bin/env python\n+import re\n+import sys\n \n-my $indent = 0;\n-while (<>) {\n-    if (/^rust: ~\">>/) {\n-        $indent += 1;\n-    }\n+indent = 0\n+more_re = re.compile(r\"^rust: ~\\\">>\")\n+less_re = re.compile(r\"^rust: ~\\\"<<\")\n+while True:\n+    line = sys.stdin.readline()\n+    if not line:\n+        break\n \n-    printf \"%03d  %s%s\", $indent, (\"  \" x $indent), $_;\n+    if more_re.match(line):\n+        indent += 1\n \n-    if (/^rust: ~\"<</) {\n-        $indent -= 1;\n-    }\n-}\n+    print \"%03d %s%s\" % (indent, \" \" * indent, line.strip())\n+\n+    if less_re.match(line):\n+        indent -= 1"}]}