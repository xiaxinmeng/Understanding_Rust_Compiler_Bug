{"sha": "e269a7435e80e0c4e02e3a5aa21233ef28892def", "node_id": "MDY6Q29tbWl0NzI0NzEyOmUyNjlhNzQzNWU4MGUwYzRlMDJlM2E1YWEyMTIzM2VmMjg4OTJkZWY=", "commit": {"author": {"name": "S\u00e9bastien Marie", "email": "semarie@users.noreply.github.com", "date": "2018-03-18T17:08:17Z"}, "committer": {"name": "S\u00e9bastien Marie", "email": "semarie@users.noreply.github.com", "date": "2018-03-18T17:08:17Z"}, "message": "Allow test target to pass without installing\n\nexplicitly pass -L target-lib to rustdoc", "tree": {"sha": "4f9eb14680575f52d471a3f383e2a2dd12889af5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f9eb14680575f52d471a3f383e2a2dd12889af5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e269a7435e80e0c4e02e3a5aa21233ef28892def", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e269a7435e80e0c4e02e3a5aa21233ef28892def", "html_url": "https://github.com/rust-lang/rust/commit/e269a7435e80e0c4e02e3a5aa21233ef28892def", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e269a7435e80e0c4e02e3a5aa21233ef28892def/comments", "author": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "committer": {"login": "semarie", "id": 8948701, "node_id": "MDQ6VXNlcjg5NDg3MDE=", "avatar_url": "https://avatars.githubusercontent.com/u/8948701?v=4", "gravatar_id": "", "url": "https://api.github.com/users/semarie", "html_url": "https://github.com/semarie", "followers_url": "https://api.github.com/users/semarie/followers", "following_url": "https://api.github.com/users/semarie/following{/other_user}", "gists_url": "https://api.github.com/users/semarie/gists{/gist_id}", "starred_url": "https://api.github.com/users/semarie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/semarie/subscriptions", "organizations_url": "https://api.github.com/users/semarie/orgs", "repos_url": "https://api.github.com/users/semarie/repos", "events_url": "https://api.github.com/users/semarie/events{/privacy}", "received_events_url": "https://api.github.com/users/semarie/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8aa27ee30972f16320ae4a8887c8f54616fff819", "url": "https://api.github.com/repos/rust-lang/rust/commits/8aa27ee30972f16320ae4a8887c8f54616fff819", "html_url": "https://github.com/rust-lang/rust/commit/8aa27ee30972f16320ae4a8887c8f54616fff819"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "af1707de6c02f52432cfc241cca0df4f9e06ad70", "filename": "src/test/run-make/tools.mk", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e269a7435e80e0c4e02e3a5aa21233ef28892def/src%2Ftest%2Frun-make%2Ftools.mk", "raw_url": "https://github.com/rust-lang/rust/raw/e269a7435e80e0c4e02e3a5aa21233ef28892def/src%2Ftest%2Frun-make%2Ftools.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Ftools.mk?ref=e269a7435e80e0c4e02e3a5aa21233ef28892def", "patch": "@@ -9,7 +9,7 @@ RUSTC_ORIGINAL := $(RUSTC)\n BARE_RUSTC := $(HOST_RPATH_ENV) '$(RUSTC)'\n BARE_RUSTDOC := $(HOST_RPATH_ENV) '$(RUSTDOC)'\n RUSTC := $(BARE_RUSTC) --out-dir $(TMPDIR) -L $(TMPDIR) $(RUSTFLAGS)\n-RUSTDOC := $(BARE_RUSTDOC)\n+RUSTDOC := $(BARE_RUSTDOC) -L $(TARGET_RPATH_DIR)\n ifdef RUSTC_LINKER\n RUSTC := $(RUSTC) -Clinker=$(RUSTC_LINKER)\n RUSTDOC := $(RUSTDOC) --linker $(RUSTC_LINKER) -Z unstable-options"}, {"sha": "23bb39215d37a1b47825460d7de708c33ddc25df", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e269a7435e80e0c4e02e3a5aa21233ef28892def/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e269a7435e80e0c4e02e3a5aa21233ef28892def/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=e269a7435e80e0c4e02e3a5aa21233ef28892def", "patch": "@@ -1324,6 +1324,8 @@ impl<'test> TestCx<'test> {\n         let mut rustdoc = Command::new(rustdoc_path);\n \n         rustdoc\n+            .arg(\"-L\")\n+            .arg(self.config.run_lib_path.to_str().unwrap())\n             .arg(\"-L\")\n             .arg(aux_dir)\n             .arg(\"-o\")"}]}