{"sha": "7fbca4e31ce51ac4b7cae155780730e1ab2dccb4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmYmNhNGUzMWNlNTFhYzRiN2NhZTE1NTc4MDczMGUxYWIyZGNjYjQ=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2011-12-10T03:12:03Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2011-12-14T22:32:19Z"}, "message": "sendable functions now \"work\", meaning pass through trans/typestate\nbut they do not generate correct code", "tree": {"sha": "fb4f7d4f8932926723b26094dafbd530d5caf008", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fb4f7d4f8932926723b26094dafbd530d5caf008"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4", "html_url": "https://github.com/rust-lang/rust/commit/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa1cd61c84199c8a1e44645e4af3f8c15c6dd018", "url": "https://api.github.com/repos/rust-lang/rust/commits/aa1cd61c84199c8a1e44645e4af3f8c15c6dd018", "html_url": "https://github.com/rust-lang/rust/commit/aa1cd61c84199c8a1e44645e4af3f8c15c6dd018"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "b898a73b3be6da9e69cdb79e7ff1390826a038a0", "filename": "src/comp/middle/resolve.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4/src%2Fcomp%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4/src%2Fcomp%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Fresolve.rs?ref=7fbca4e31ce51ac4b7cae155780730e1ab2dccb4", "patch": "@@ -678,9 +678,14 @@ fn scope_is_fn(sc: scope) -> bool {\n         };\n }\n \n+// Returns:\n+//   none - does not close\n+//   some(true) - closes and permits mutation\n+//   some(false) - closes but no mutation\n fn scope_closes(sc: scope) -> option::t<bool> {\n     alt sc {\n       scope_fn(_, ast::proto_block., _) { some(true) }\n+      scope_fn(_, ast::proto_send., _) { some(false) }\n       scope_fn(_, ast::proto_shared(_), _) { some(false) }\n       _ { none }\n     }"}, {"sha": "8f2f79a9dc3381e9978de18555c7f4e4f3420fdb", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7fbca4e31ce51ac4b7cae155780730e1ab2dccb4/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=7fbca4e31ce51ac4b7cae155780730e1ab2dccb4", "patch": "@@ -2192,7 +2192,7 @@ fn trans_expr_fn(bcx: @block_ctxt, f: ast::_fn, sp: span,\n                || f.proto == ast::proto_shared(ast::sugar_sexy);\n     let env;\n     alt f.proto {\n-      ast::proto_block. | ast::proto_shared(_) {\n+      ast::proto_block. | ast::proto_shared(_) | ast::proto_send. {\n         let upvars = get_freevars(ccx.tcx, id);\n         let env_r = build_closure(bcx, upvars, copying);\n         env = env_r.ptr;\n@@ -2201,7 +2201,7 @@ fn trans_expr_fn(bcx: @block_ctxt, f: ast::_fn, sp: span,\n             load_environment(bcx, fcx, env_r.ptrty, upvars, copying);\n         });\n       }\n-      _ {\n+      ast::proto_bare. {\n         env = C_null(T_opaque_closure_ptr(ccx));\n         trans_closure(sub_cx, sp, f, llfn, none, [], id, {|_fcx|});\n       }"}]}