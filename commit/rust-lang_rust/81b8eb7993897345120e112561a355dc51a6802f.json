{"sha": "81b8eb7993897345120e112561a355dc51a6802f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYjhlYjc5OTM4OTczNDUxMjBlMTEyNTYxYTM1NWRjNTFhNjgwMmY=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-04-28T09:57:16Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2015-04-28T09:57:16Z"}, "message": "Comments on their own lines between args", "tree": {"sha": "74d112a76798255c6b12172b3777fd7229bba601", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/74d112a76798255c6b12172b3777fd7229bba601"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81b8eb7993897345120e112561a355dc51a6802f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81b8eb7993897345120e112561a355dc51a6802f", "html_url": "https://github.com/rust-lang/rust/commit/81b8eb7993897345120e112561a355dc51a6802f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81b8eb7993897345120e112561a355dc51a6802f/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cdfda8801e871744a384eba8289f1114fd8b6d66", "url": "https://api.github.com/repos/rust-lang/rust/commits/cdfda8801e871744a384eba8289f1114fd8b6d66", "html_url": "https://github.com/rust-lang/rust/commit/cdfda8801e871744a384eba8289f1114fd8b6d66"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "039e7efd085861c6ceb81e67717b36def2ea0191", "filename": "src/functions.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/81b8eb7993897345120e112561a355dc51a6802f/src%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81b8eb7993897345120e112561a355dc51a6802f/src%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ffunctions.rs?ref=81b8eb7993897345120e112561a355dc51a6802f", "patch": "@@ -236,10 +236,11 @@ impl<'a> FmtVisitor<'a> {\n             let cur_start = get_lo(&item);\n             let snippet = self.snippet(codemap::mk_sp(prev_end, cur_start));\n             let mut snippet = snippet.trim();\n+            let white_space: &[_] = &[' ', '\\t'];\n             if snippet.starts_with(separator) {\n-                snippet = snippet[1..].trim();\n+                snippet = snippet[separator.len()..].trim_matches(white_space);\n             } else if snippet.ends_with(separator) {\n-                snippet = snippet[..snippet.len()-1].trim();\n+                snippet = snippet[..snippet.len()-separator.len()].trim_matches(white_space);\n             }\n             result.push(snippet.to_string());\n             prev_end = get_hi(&item);"}, {"sha": "47b6491544d393964fe739a3e2e947a3c9c8e75a", "filename": "src/lists.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/81b8eb7993897345120e112561a355dc51a6802f/src%2Flists.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81b8eb7993897345120e112561a355dc51a6802f/src%2Flists.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flists.rs?ref=81b8eb7993897345120e112561a355dc51a6802f", "patch": "@@ -124,7 +124,9 @@ pub fn write_list<'b>(items: &[(String, String)], formatting: &ListFormatting<'b\n         result.push_str(item);\n \n         if tactic != ListTactic::Vertical && comment.len() > 0 {\n-            result.push(' ');\n+            if !comment.starts_with('\\n') {\n+                result.push(' ');\n+            }\n             result.push_str(comment);\n         }\n \n@@ -133,7 +135,9 @@ pub fn write_list<'b>(items: &[(String, String)], formatting: &ListFormatting<'b\n         }\n \n         if tactic == ListTactic::Vertical && comment.len() > 0 {\n-            result.push(' ');\n+            if !comment.starts_with('\\n') {\n+                result.push(' ');\n+            }\n             result.push_str(comment);\n         }\n     }"}, {"sha": "f9f7bb27c07ff9015ac9ae2bcad5a13261d13bc9", "filename": "tests/idem/comments-fn.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/81b8eb7993897345120e112561a355dc51a6802f/tests%2Fidem%2Fcomments-fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81b8eb7993897345120e112561a355dc51a6802f/tests%2Fidem%2Fcomments-fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fidem%2Fcomments-fn.rs?ref=81b8eb7993897345120e112561a355dc51a6802f", "patch": "@@ -4,7 +4,10 @@\n fn foo<F, G>(a: aaaaaaaaaaaaa, // A comment\n              b: bbbbbbbbbbbbb, /* a second comment */\n              c: ccccccccccccc,\n+             // Newline comment\n              d: ddddddddddddd,\n+             //  A multi line comment\n+             // between args.\n              e: eeeeeeeeeeeee /* comment before paren*/)\n     -> bar\n     where F: Foo, // COmment after where clause"}]}