{"sha": "52a9c157d04808b61d245c251c223a81ae2dcb70", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUyYTljMTU3ZDA0ODA4YjYxZDI0NWMyNTFjMjIzYTgxYWUyZGNiNzA=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-08-02T10:17:20Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2020-08-03T21:34:11Z"}, "message": "rustc_ast: `(Nested)MetaItem::check_name` -> `has_name`\n\nFor consistency with `Attribute::has_name` which doesn't mark the attribute as used either.\n\nReplace all uses of `check_name` with `has_name` outside of rustc", "tree": {"sha": "9cfc36949835e670185ddba69305662ac9b68e84", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9cfc36949835e670185ddba69305662ac9b68e84"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/52a9c157d04808b61d245c251c223a81ae2dcb70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/52a9c157d04808b61d245c251c223a81ae2dcb70", "html_url": "https://github.com/rust-lang/rust/commit/52a9c157d04808b61d245c251c223a81ae2dcb70", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/52a9c157d04808b61d245c251c223a81ae2dcb70/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "24a6130da21ee4c5f0c57ed2e5257b110a7466ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/24a6130da21ee4c5f0c57ed2e5257b110a7466ce", "html_url": "https://github.com/rust-lang/rust/commit/24a6130da21ee4c5f0c57ed2e5257b110a7466ce"}], "stats": {"total": 38, "additions": 19, "deletions": 19}, "files": [{"sha": "40af6bb3d7bcff06c605c0bd4a04238a3fc583e2", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -286,14 +286,14 @@ impl<'tcx> LateLintPass<'tcx> for Attributes {\n                     },\n                     _ => {},\n                 }\n-                if items.is_empty() || !attr.check_name(sym!(deprecated)) {\n+                if items.is_empty() || !attr.has_name(sym!(deprecated)) {\n                     return;\n                 }\n                 for item in items {\n                     if_chain! {\n                         if let NestedMetaItem::MetaItem(mi) = &item;\n                         if let MetaItemKind::NameValue(lit) = &mi.kind;\n-                        if mi.check_name(sym!(since));\n+                        if mi.has_name(sym!(since));\n                         then {\n                             check_semver(cx, item.span(), lit);\n                         }\n@@ -309,7 +309,7 @@ impl<'tcx> LateLintPass<'tcx> for Attributes {\n         }\n         match item.kind {\n             ItemKind::ExternCrate(..) | ItemKind::Use(..) => {\n-                let skip_unused_imports = item.attrs.iter().any(|attr| attr.check_name(sym!(macro_use)));\n+                let skip_unused_imports = item.attrs.iter().any(|attr| attr.has_name(sym!(macro_use)));\n \n                 for attr in item.attrs {\n                     if in_external_macro(cx.sess(), attr.span) {\n@@ -524,7 +524,7 @@ fn check_attrs(cx: &LateContext<'_>, span: Span, name: Name, attrs: &[Attribute]\n \n     for attr in attrs {\n         if let Some(values) = attr.meta_item_list() {\n-            if values.len() != 1 || !attr.check_name(sym!(inline)) {\n+            if values.len() != 1 || !attr.has_name(sym!(inline)) {\n                 continue;\n             }\n             if is_word(&values[0], sym!(always)) {\n@@ -558,7 +558,7 @@ fn check_semver(cx: &LateContext<'_>, span: Span, lit: &Lit) {\n \n fn is_word(nmi: &NestedMetaItem, expected: Symbol) -> bool {\n     if let NestedMetaItem::MetaItem(mi) = &nmi {\n-        mi.is_word() && mi.check_name(expected)\n+        mi.is_word() && mi.has_name(expected)\n     } else {\n         false\n     }\n@@ -618,15 +618,15 @@ fn check_empty_line_after_outer_attr(cx: &EarlyContext<'_>, item: &rustc_ast::as\n fn check_deprecated_cfg_attr(cx: &EarlyContext<'_>, attr: &Attribute) {\n     if_chain! {\n         // check cfg_attr\n-        if attr.check_name(sym!(cfg_attr));\n+        if attr.has_name(sym!(cfg_attr));\n         if let Some(items) = attr.meta_item_list();\n         if items.len() == 2;\n         // check for `rustfmt`\n         if let Some(feature_item) = items[0].meta_item();\n-        if feature_item.check_name(sym!(rustfmt));\n+        if feature_item.has_name(sym!(rustfmt));\n         // check for `rustfmt_skip` and `rustfmt::skip`\n         if let Some(skip_item) = &items[1].meta_item();\n-        if skip_item.check_name(sym!(rustfmt_skip)) ||\n+        if skip_item.has_name(sym!(rustfmt_skip)) ||\n             skip_item.path.segments.last().expect(\"empty path in attribute\").ident.name == sym!(skip);\n         // Only lint outer attributes, because custom inner attributes are unstable\n         // Tracking issue: https://github.com/rust-lang/rust/issues/54726\n@@ -685,7 +685,7 @@ fn check_mismatched_target_os(cx: &EarlyContext<'_>, attr: &Attribute) {\n     }\n \n     if_chain! {\n-        if attr.check_name(sym!(cfg));\n+        if attr.has_name(sym!(cfg));\n         if let Some(list) = attr.meta_item_list();\n         let mismatched = find_mismatched_target_os(&list);\n         if !mismatched.is_empty();"}, {"sha": "e87c33d1b09dd42d6e688b0e079a7760817b4a36", "filename": "clippy_lints/src/doc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdoc.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -323,7 +323,7 @@ fn check_attrs<'a>(cx: &LateContext<'_>, valid_idents: &FxHashSet<String>, attrs\n             let (comment, current_spans) = strip_doc_comment_decoration(&comment, attr.span);\n             spans.extend_from_slice(&current_spans);\n             doc.push_str(&comment);\n-        } else if attr.check_name(sym!(doc)) {\n+        } else if attr.has_name(sym!(doc)) {\n             // ignore mix of sugared and non-sugared doc\n             // don't trigger the safety or errors check\n             return DocHeaders {"}, {"sha": "4b605fdb366a91b0bdb5620ba81ee6c730f9bf83", "filename": "clippy_lints/src/inline_fn_without_body.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Finline_fn_without_body.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Finline_fn_without_body.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Finline_fn_without_body.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -41,7 +41,7 @@ impl<'tcx> LateLintPass<'tcx> for InlineFnWithoutBody {\n \n fn check_attrs(cx: &LateContext<'_>, name: Symbol, attrs: &[Attribute]) {\n     for attr in attrs {\n-        if !attr.check_name(sym!(inline)) {\n+        if !attr.has_name(sym!(inline)) {\n             continue;\n         }\n "}, {"sha": "ca1381852daeead7d134f9edcebbc33d360c1e96", "filename": "clippy_lints/src/manual_non_exhaustive.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fmanual_non_exhaustive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fmanual_non_exhaustive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmanual_non_exhaustive.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -83,7 +83,7 @@ fn check_manual_non_exhaustive_enum(cx: &EarlyContext<'_>, item: &Item, variants\n     }\n \n     fn is_doc_hidden(attr: &Attribute) -> bool {\n-        attr.check_name(sym!(doc))\n+        attr.has_name(sym!(doc))\n             && match attr.meta_item_list() {\n                 Some(l) => attr::list_contains_name(&l, sym!(hidden)),\n                 None => false,"}, {"sha": "813f9c4394819034ded9055b97499207ef272c60", "filename": "clippy_lints/src/missing_doc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fmissing_doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fmissing_doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_doc.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -105,7 +105,7 @@ impl<'tcx> LateLintPass<'tcx> for MissingDoc {\n     fn enter_lint_attrs(&mut self, _: &LateContext<'tcx>, attrs: &'tcx [ast::Attribute]) {\n         let doc_hidden = self.doc_hidden()\n             || attrs.iter().any(|attr| {\n-                attr.check_name(sym!(doc))\n+                attr.has_name(sym!(doc))\n                     && match attr.meta_item_list() {\n                         None => false,\n                         Some(l) => attr::list_contains_name(&l[..], sym!(hidden)),"}, {"sha": "3eae45b2819d849510a5b47f3d1e8e2f7ef93f2b", "filename": "clippy_lints/src/missing_inline.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fmissing_inline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fmissing_inline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_inline.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -57,7 +57,7 @@ declare_clippy_lint! {\n }\n \n fn check_missing_inline_attrs(cx: &LateContext<'_>, attrs: &[ast::Attribute], sp: Span, desc: &'static str) {\n-    let has_inline = attrs.iter().any(|a| a.check_name(sym!(inline)));\n+    let has_inline = attrs.iter().any(|a| a.has_name(sym!(inline)));\n     if !has_inline {\n         span_lint(\n             cx,"}, {"sha": "9391049c6e8f95d6513b0c8444bdcd94b5d3224a", "filename": "clippy_lints/src/needless_borrow.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fneedless_borrow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fneedless_borrow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_borrow.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -112,7 +112,7 @@ impl<'tcx> LateLintPass<'tcx> for NeedlessBorrow {\n     }\n \n     fn check_item(&mut self, _: &LateContext<'tcx>, item: &'tcx Item<'_>) {\n-        if item.attrs.iter().any(|a| a.check_name(sym!(automatically_derived))) {\n+        if item.attrs.iter().any(|a| a.has_name(sym!(automatically_derived))) {\n             debug_assert!(self.derived_item.is_none());\n             self.derived_item = Some(item.hir_id);\n         }"}, {"sha": "a7f7c97fc487cf0e937a681c84c32662c3b37e5e", "filename": "clippy_lints/src/needless_pass_by_value.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_pass_by_value.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -312,7 +312,7 @@ fn requires_exact_signature(attrs: &[Attribute]) -> bool {\n     attrs.iter().any(|attr| {\n         [sym!(proc_macro), sym!(proc_macro_attribute), sym!(proc_macro_derive)]\n             .iter()\n-            .any(|&allow| attr.check_name(allow))\n+            .any(|&allow| attr.has_name(allow))\n     })\n }\n "}, {"sha": "8ed20995a70af1257708ba3b8b278dc08adbec8d", "filename": "clippy_lints/src/returns.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Freturns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Freturns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Freturns.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -235,7 +235,7 @@ impl EarlyLintPass for Return {\n }\n \n fn attr_is_cfg(attr: &ast::Attribute) -> bool {\n-    attr.meta_item_list().is_some() && attr.check_name(sym!(cfg))\n+    attr.meta_item_list().is_some() && attr.has_name(sym!(cfg))\n }\n \n // get the def site"}, {"sha": "7948d99162b8116b91b6236a8f0a1d1945406b34", "filename": "clippy_lints/src/trivially_copy_pass_by_ref.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Ftrivially_copy_pass_by_ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Ftrivially_copy_pass_by_ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ftrivially_copy_pass_by_ref.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -155,7 +155,7 @@ impl<'tcx> LateLintPass<'tcx> for TriviallyCopyPassByRef {\n                     return;\n                 }\n                 for a in attrs {\n-                    if a.meta_item_list().is_some() && a.check_name(sym!(proc_macro_derive)) {\n+                    if a.meta_item_list().is_some() && a.has_name(sym!(proc_macro_derive)) {\n                         return;\n                     }\n                 }"}, {"sha": "ba3492a6fff1136dc1d70fcce17ef362da35292d", "filename": "clippy_lints/src/utils/conf.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/52a9c157d04808b61d245c251c223a81ae2dcb70/clippy_lints%2Fsrc%2Futils%2Fconf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Fconf.rs?ref=52a9c157d04808b61d245c251c223a81ae2dcb70", "patch": "@@ -13,7 +13,7 @@ use std::{env, fmt, fs, io};\n /// Gets the configuration file from arguments.\n pub fn file_from_args(args: &[NestedMetaItem]) -> Result<Option<PathBuf>, (&'static str, Span)> {\n     for arg in args.iter().filter_map(NestedMetaItem::meta_item) {\n-        if arg.check_name(sym!(conf_file)) {\n+        if arg.has_name(sym!(conf_file)) {\n             return match arg.kind {\n                 MetaItemKind::Word | MetaItemKind::List(_) => Err((\"`conf_file` must be a named value\", arg.span)),\n                 MetaItemKind::NameValue(ref value) => {"}]}