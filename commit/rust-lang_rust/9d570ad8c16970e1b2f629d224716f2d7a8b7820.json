{"sha": "9d570ad8c16970e1b2f629d224716f2d7a8b7820", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkNTcwYWQ4YzE2OTcwZTFiMmY2MjlkMjI0NzE2ZjJkN2E4Yjc4MjA=", "commit": {"author": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2014-04-09T13:29:29Z"}, "committer": {"name": "Eduard Burtescu", "email": "edy.burt@gmail.com", "date": "2014-04-11T15:03:16Z"}, "message": "rustc: remove the last mentions of @fn.", "tree": {"sha": "ed69c74f59e6f1429168f5fbfd54ab0130d7ce85", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ed69c74f59e6f1429168f5fbfd54ab0130d7ce85"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d570ad8c16970e1b2f629d224716f2d7a8b7820", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d570ad8c16970e1b2f629d224716f2d7a8b7820", "html_url": "https://github.com/rust-lang/rust/commit/9d570ad8c16970e1b2f629d224716f2d7a8b7820", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d570ad8c16970e1b2f629d224716f2d7a8b7820/comments", "author": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eddyb", "id": 77424, "node_id": "MDQ6VXNlcjc3NDI0", "avatar_url": "https://avatars.githubusercontent.com/u/77424?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eddyb", "html_url": "https://github.com/eddyb", "followers_url": "https://api.github.com/users/eddyb/followers", "following_url": "https://api.github.com/users/eddyb/following{/other_user}", "gists_url": "https://api.github.com/users/eddyb/gists{/gist_id}", "starred_url": "https://api.github.com/users/eddyb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eddyb/subscriptions", "organizations_url": "https://api.github.com/users/eddyb/orgs", "repos_url": "https://api.github.com/users/eddyb/repos", "events_url": "https://api.github.com/users/eddyb/events{/privacy}", "received_events_url": "https://api.github.com/users/eddyb/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f0c0c2ae91061a2b6041658a6e406c757e4e5483", "url": "https://api.github.com/repos/rust-lang/rust/commits/f0c0c2ae91061a2b6041658a6e406c757e4e5483", "html_url": "https://github.com/rust-lang/rust/commit/f0c0c2ae91061a2b6041658a6e406c757e4e5483"}], "stats": {"total": 21, "additions": 9, "deletions": 12}, "files": [{"sha": "7f157e321baf9cd87089340f03b827c9d693b386", "filename": "src/librustc/middle/mem_categorization.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9d570ad8c16970e1b2f629d224716f2d7a8b7820/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d570ad8c16970e1b2f629d224716f2d7a8b7820/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fmem_categorization.rs?ref=9d570ad8c16970e1b2f629d224716f2d7a8b7820", "patch": "@@ -76,7 +76,7 @@ use syntax::parse::token;\n pub enum categorization {\n     cat_rvalue(ty::Region),            // temporary val, argument is its scope\n     cat_static_item,\n-    cat_copied_upvar(CopiedUpvar),     // upvar copied into @fn or ~fn env\n+    cat_copied_upvar(CopiedUpvar),     // upvar copied into proc env\n     cat_upvar(ty::UpvarId, ty::UpvarBorrow), // by ref upvar from stack closure\n     cat_local(ast::NodeId),            // local variable\n     cat_arg(ast::NodeId),              // formal argument\n@@ -1092,7 +1092,7 @@ impl<TYPER:Typer> MemCategorizationContext<TYPER> {\n               ~\"static item\"\n           }\n           cat_copied_upvar(_) => {\n-              ~\"captured outer variable in a heap closure\"\n+              ~\"captured outer variable in a proc\"\n           }\n           cat_rvalue(..) => {\n               ~\"non-lvalue\""}, {"sha": "bc80f88f623e1d6ca1ef743c5ac65dc9c0e63d96", "filename": "src/librustc/middle/trans/closure.rs", "status": "modified", "additions": 7, "deletions": 10, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/9d570ad8c16970e1b2f629d224716f2d7a8b7820/src%2Flibrustc%2Fmiddle%2Ftrans%2Fclosure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d570ad8c16970e1b2f629d224716f2d7a8b7820/src%2Flibrustc%2Fmiddle%2Ftrans%2Fclosure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2Fclosure.rs?ref=9d570ad8c16970e1b2f629d224716f2d7a8b7820", "patch": "@@ -38,17 +38,14 @@ use syntax::ast_util;\n // roughly as follows:\n //\n // struct rust_opaque_box {         // see rust_internal.h\n-//   unsigned ref_count;            // only used for @fn()\n-//   type_desc *tydesc;             // describes closure_data struct\n-//   rust_opaque_box *prev;         // (used internally by memory alloc)\n-//   rust_opaque_box *next;         // (used internally by memory alloc)\n+//   unsigned ref_count;            // obsolete (part of @T's header)\n+//   fn(void*) *drop_glue;          // destructor (for proc)\n+//   rust_opaque_box *prev;         // obsolete (part of @T's header)\n+//   rust_opaque_box *next;         // obsolete (part of @T's header)\n //   struct closure_data {\n-//       type_desc *bound_tdescs[]; // bound descriptors\n-//       struct {\n-//         upvar1_t upvar1;\n-//         ...\n-//         upvarN_t upvarN;\n-//       } bound_data;\n+//       upvar1_t upvar1;\n+//       ...\n+//       upvarN_t upvarN;\n //    }\n // };\n //"}]}