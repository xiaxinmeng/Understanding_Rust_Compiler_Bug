{"sha": "dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRjNmIxNjdlMjI0ZjNhNzgyZmE3YjFlNmY1Y2ZmMjFmNTIzOGY5N2U=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-27T20:51:00Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-27T20:51:00Z"}, "message": "Rollup merge of #50257 - estebank:fix-49560, r=nikomatsakis\n\nDon't ICE on tuple struct ctor with incorrect arg count\n\nFix #49560.", "tree": {"sha": "4b7f94bd41ed6ace04a8a31b56658fafac41e739", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b7f94bd41ed6ace04a8a31b56658fafac41e739"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrjjTQACgkQ/vbIBR0O\nATyONBAAoe4ykbyK1eU0IlIvIuEsVoWBP0/d84I4YiB8HS3wDRv2fOR57S15G8XL\n7GgT14mCweBb62y7UQPgwDK1WJpk8H8H0BmjhQhKFcrGLCw3FWMdX39PO9Fl8jE9\nFCGxmb/YT1bUPNjVX9aiACvz1s6GX7g+kGq74koactw7yNy0fnKRlG/v0oiY9zc8\nmm7CM5elGvBB/u3aBwPhp56fSUUl2pwzZqj1B5iB34BN5PD9TJbqgy7sDL8q9eVX\n1NhyEP0kFHA9ywrinU7AAmcYS5ZLrpa6fZv+GO+vvFRifr1FnH+ZoicyGVwwjZV+\nzAsTmWuxpPzcsLLUZU8ge7qV1mgtmDu+4cB76Ib4lTB0+RfY7BIlYSrmdcXqfCIy\nlzwe3visuNQzkW7QqgarwJ35ThPxFg36Yl4RIe7k9lxPSF+n3zGemzJ3qCZ4iTNj\nKeq3un8oNfZHvRXK2J6DDFH+V0xxpDUlqSiPcWMkMlbqG/Vp3+GFWYWpQQA4MtSr\nzI+x3U34ZJgUWGimPFNi9cPsAwywvbekMdogRnvU44MsZq6IwzU01hqZcxnfDUQS\niW7yGio8pWx9SrrdWZBQrxliTVm5FQt1ymccTEIaIunZLDxeH13bGvp9JYcsLvci\nq3/5REIqHd4k5XNXrEquEp1ein+naF1PLIxM7+PhZjfJeQjvL1Y=\n=cxvf\n-----END PGP SIGNATURE-----", "payload": "tree 4b7f94bd41ed6ace04a8a31b56658fafac41e739\nparent e5983943fe896c564db441add38e6389c978aaef\nparent d92d1935cb01cfa469a725f041e4c1d8a2ee9564\nauthor kennytm <kennytm@gmail.com> 1524862260 +0800\ncommitter kennytm <kennytm@gmail.com> 1524862260 +0800\n\nRollup merge of #50257 - estebank:fix-49560, r=nikomatsakis\n\nDon't ICE on tuple struct ctor with incorrect arg count\n\nFix #49560.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "html_url": "https://github.com/rust-lang/rust/commit/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5983943fe896c564db441add38e6389c978aaef", "url": "https://api.github.com/repos/rust-lang/rust/commits/e5983943fe896c564db441add38e6389c978aaef", "html_url": "https://github.com/rust-lang/rust/commit/e5983943fe896c564db441add38e6389c978aaef"}, {"sha": "d92d1935cb01cfa469a725f041e4c1d8a2ee9564", "url": "https://api.github.com/repos/rust-lang/rust/commits/d92d1935cb01cfa469a725f041e4c1d8a2ee9564", "html_url": "https://github.com/rust-lang/rust/commit/d92d1935cb01cfa469a725f041e4c1d8a2ee9564"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "047d4bb893096103d38a4f6c3a6af6132ea3133d", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "patch": "@@ -979,6 +979,12 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n                      ArgKind::Arg(format!(\"{}\", field.name), \"_\".to_string())\n                  }).collect::<Vec<_>>())\n             }\n+            hir::map::NodeStructCtor(ref variant_data) => {\n+                (self.tcx.sess.codemap().def_span(self.tcx.hir.span(variant_data.id())),\n+                 variant_data.fields()\n+                    .iter().map(|_| ArgKind::Arg(\"_\".to_owned(), \"_\".to_owned()))\n+                    .collect())\n+            }\n             _ => panic!(\"non-FnLike node found: {:?}\", node),\n         }\n     }"}, {"sha": "9eb11148a8bcef45200484c0163c2371927fe782", "filename": "src/test/ui/mismatched_types/closure-arg-count.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.rs?ref=dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "patch": "@@ -39,7 +39,13 @@ fn main() {\n \n     let _it = vec![1, 2, 3].into_iter().map(usize::checked_add);\n     //~^ ERROR function is expected to take\n+\n+    call(Foo);\n+    //~^ ERROR function is expected to take\n }\n \n fn foo() {}\n fn qux(x: usize, y: usize) {}\n+\n+fn call<F, R>(_: F) where F: FnOnce() -> R {}\n+struct Foo(u8);"}, {"sha": "6270e794498766f17fcba58f4b3e8e130e07b981", "filename": "src/test/ui/mismatched_types/closure-arg-count.stderr", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/dc6b167e224f3a782fa7b1e6f5cff21f5238f97e/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmismatched_types%2Fclosure-arg-count.stderr?ref=dc6b167e224f3a782fa7b1e6f5cff21f5238f97e", "patch": "@@ -116,6 +116,21 @@ error[E0593]: function is expected to take 1 argument, but it takes 2 arguments\n LL |     let _it = vec![1, 2, 3].into_iter().map(usize::checked_add);\n    |                                         ^^^ expected function that takes 1 argument\n \n-error: aborting due to 12 previous errors\n+error[E0593]: function is expected to take 0 arguments, but it takes 1 argument\n+  --> $DIR/closure-arg-count.rs:43:5\n+   |\n+LL |     call(Foo);\n+   |     ^^^^ expected function that takes 0 arguments\n+...\n+LL | struct Foo(u8);\n+   | --------------- takes 1 argument\n+   |\n+note: required by `call`\n+  --> $DIR/closure-arg-count.rs:50:1\n+   |\n+LL | fn call<F, R>(_: F) where F: FnOnce() -> R {}\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 13 previous errors\n \n For more information about this error, try `rustc --explain E0593`."}]}