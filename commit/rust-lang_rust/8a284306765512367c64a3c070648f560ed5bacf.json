{"sha": "8a284306765512367c64a3c070648f560ed5bacf", "node_id": "C_kwDOAAsO6NoAKDhhMjg0MzA2NzY1NTEyMzY3YzY0YTNjMDcwNjQ4ZjU2MGVkNWJhY2Y", "commit": {"author": {"name": "Steven Joruk", "email": "steven@joruk.com", "date": "2022-03-11T21:44:18Z"}, "committer": {"name": "Steven Joruk", "email": "steven@joruk.com", "date": "2022-03-11T22:28:38Z"}, "message": "refactor: Rename and move const_arg_path\n\nIt wasn't testing the `const_arg` code path, it was actually hitting\nconst_param's default value code path, so move it to the right place\nand rename it.", "tree": {"sha": "27acf38f35af9500e2ea958418d344c6e3b219e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27acf38f35af9500e2ea958418d344c6e3b219e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8a284306765512367c64a3c070648f560ed5bacf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8a284306765512367c64a3c070648f560ed5bacf", "html_url": "https://github.com/rust-lang/rust/commit/8a284306765512367c64a3c070648f560ed5bacf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8a284306765512367c64a3c070648f560ed5bacf/comments", "author": {"login": "steven-joruk", "id": 1277939, "node_id": "MDQ6VXNlcjEyNzc5Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1277939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steven-joruk", "html_url": "https://github.com/steven-joruk", "followers_url": "https://api.github.com/users/steven-joruk/followers", "following_url": "https://api.github.com/users/steven-joruk/following{/other_user}", "gists_url": "https://api.github.com/users/steven-joruk/gists{/gist_id}", "starred_url": "https://api.github.com/users/steven-joruk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steven-joruk/subscriptions", "organizations_url": "https://api.github.com/users/steven-joruk/orgs", "repos_url": "https://api.github.com/users/steven-joruk/repos", "events_url": "https://api.github.com/users/steven-joruk/events{/privacy}", "received_events_url": "https://api.github.com/users/steven-joruk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steven-joruk", "id": 1277939, "node_id": "MDQ6VXNlcjEyNzc5Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1277939?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steven-joruk", "html_url": "https://github.com/steven-joruk", "followers_url": "https://api.github.com/users/steven-joruk/followers", "following_url": "https://api.github.com/users/steven-joruk/following{/other_user}", "gists_url": "https://api.github.com/users/steven-joruk/gists{/gist_id}", "starred_url": "https://api.github.com/users/steven-joruk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steven-joruk/subscriptions", "organizations_url": "https://api.github.com/users/steven-joruk/orgs", "repos_url": "https://api.github.com/users/steven-joruk/repos", "events_url": "https://api.github.com/users/steven-joruk/events{/privacy}", "received_events_url": "https://api.github.com/users/steven-joruk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e84453c47f847f92a038eceb5071a308d2515fa7", "url": "https://api.github.com/repos/rust-lang/rust/commits/e84453c47f847f92a038eceb5071a308d2515fa7", "html_url": "https://github.com/rust-lang/rust/commit/e84453c47f847f92a038eceb5071a308d2515fa7"}], "stats": {"total": 74, "additions": 41, "deletions": 33}, "files": [{"sha": "948873ae2daf7468b04a8edbbc0fbd3122eb145d", "filename": "crates/parser/src/grammar/generic_args.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Fsrc%2Fgrammar%2Fgeneric_args.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Fsrc%2Fgrammar%2Fgeneric_args.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fgeneric_args.rs?ref=8a284306765512367c64a3c070648f560ed5bacf", "patch": "@@ -99,9 +99,8 @@ pub(super) fn const_arg_expr(p: &mut Parser) {\n             expressions::literal(p);\n             lm.complete(p, PREFIX_EXPR);\n         }\n-        // test const_arg_path\n-        // type T = S<u32::MAX>;\n         _ => {\n+            // This shouldn't be hit by `const_arg`\n             let lm = p.start();\n             paths::use_path(p);\n             lm.complete(p, PATH_EXPR);"}, {"sha": "fbd514078d4f057d43948f7cc546eb6afc9c41a4", "filename": "crates/parser/src/grammar/generic_params.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Fsrc%2Fgrammar%2Fgeneric_params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Fsrc%2Fgrammar%2Fgeneric_params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Fsrc%2Fgrammar%2Fgeneric_params.rs?ref=8a284306765512367c64a3c070648f560ed5bacf", "patch": "@@ -85,6 +85,9 @@ fn const_param(p: &mut Parser, m: Marker) {\n \n         // test const_param_default_expression\n         // struct A<const N: i32 = { 1 }>;\n+\n+        // test const_param_default_path\n+        // struct A<const N: i32 = i32::MAX>;\n         generic_args::const_arg_expr(p);\n     }\n "}, {"sha": "62ddefa5a8d4ff55407dd09e1b990b27e588b334", "filename": "crates/parser/test_data/parser/inline/ok/0188_const_arg_path.rast", "status": "removed", "additions": 0, "deletions": 30, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/e84453c47f847f92a038eceb5071a308d2515fa7/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_arg_path.rast", "raw_url": "https://github.com/rust-lang/rust/raw/e84453c47f847f92a038eceb5071a308d2515fa7/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_arg_path.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_arg_path.rast?ref=e84453c47f847f92a038eceb5071a308d2515fa7", "patch": "@@ -1,30 +0,0 @@\n-SOURCE_FILE\n-  TYPE_ALIAS\n-    TYPE_KW \"type\"\n-    WHITESPACE \" \"\n-    NAME\n-      IDENT \"T\"\n-    WHITESPACE \" \"\n-    EQ \"=\"\n-    WHITESPACE \" \"\n-    PATH_TYPE\n-      PATH\n-        PATH_SEGMENT\n-          NAME_REF\n-            IDENT \"S\"\n-          GENERIC_ARG_LIST\n-            L_ANGLE \"<\"\n-            TYPE_ARG\n-              PATH_TYPE\n-                PATH\n-                  PATH\n-                    PATH_SEGMENT\n-                      NAME_REF\n-                        IDENT \"u32\"\n-                  COLON2 \"::\"\n-                  PATH_SEGMENT\n-                    NAME_REF\n-                      IDENT \"MAX\"\n-            R_ANGLE \">\"\n-    SEMICOLON \";\"\n-  WHITESPACE \"\\n\""}, {"sha": "1383d0d6d5661c945ce2f4682d61b4e68cdad9cd", "filename": "crates/parser/test_data/parser/inline/ok/0188_const_arg_path.rs", "status": "removed", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/e84453c47f847f92a038eceb5071a308d2515fa7/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_arg_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e84453c47f847f92a038eceb5071a308d2515fa7/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_arg_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_arg_path.rs?ref=e84453c47f847f92a038eceb5071a308d2515fa7", "patch": "@@ -1 +0,0 @@\n-type T = S<u32::MAX>;"}, {"sha": "11002bf98d01f3d8a35f9cbca2d8f2f33a7aa5e5", "filename": "crates/parser/test_data/parser/inline/ok/0188_const_param_default_path.rast", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_param_default_path.rast", "raw_url": "https://github.com/rust-lang/rust/raw/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_param_default_path.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_param_default_path.rast?ref=8a284306765512367c64a3c070648f560ed5bacf", "patch": "@@ -0,0 +1,36 @@\n+SOURCE_FILE\n+  STRUCT\n+    STRUCT_KW \"struct\"\n+    WHITESPACE \" \"\n+    NAME\n+      IDENT \"A\"\n+    GENERIC_PARAM_LIST\n+      L_ANGLE \"<\"\n+      CONST_PARAM\n+        CONST_KW \"const\"\n+        WHITESPACE \" \"\n+        NAME\n+          IDENT \"N\"\n+        COLON \":\"\n+        WHITESPACE \" \"\n+        PATH_TYPE\n+          PATH\n+            PATH_SEGMENT\n+              NAME_REF\n+                IDENT \"i32\"\n+        WHITESPACE \" \"\n+        EQ \"=\"\n+        WHITESPACE \" \"\n+        PATH_EXPR\n+          PATH\n+            PATH\n+              PATH_SEGMENT\n+                NAME_REF\n+                  IDENT \"i32\"\n+            COLON2 \"::\"\n+            PATH_SEGMENT\n+              NAME_REF\n+                IDENT \"MAX\"\n+      R_ANGLE \">\"\n+    SEMICOLON \";\"\n+  WHITESPACE \"\\n\""}, {"sha": "f3da43ca06cbd0b5e76356e641c53997a16d6be9", "filename": "crates/parser/test_data/parser/inline/ok/0188_const_param_default_path.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_param_default_path.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8a284306765512367c64a3c070648f560ed5bacf/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_param_default_path.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fparser%2Ftest_data%2Fparser%2Finline%2Fok%2F0188_const_param_default_path.rs?ref=8a284306765512367c64a3c070648f560ed5bacf", "patch": "@@ -0,0 +1 @@\n+struct A<const N: i32 = i32::MAX>;"}]}