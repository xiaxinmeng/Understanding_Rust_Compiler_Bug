{"sha": "d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQzMjQ0ZGY2YjZiN2Q4MzRkNWJhNGFjMGU3ZmE3YzZiZTgyOTE4YTU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-11-12T10:31:49Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-12T10:31:49Z"}, "message": "Rollup merge of #78933 - jyn514:tracing-output, r=oli-obk\n\nDon't print thread ids and names in `tracing` logs\n\nBefore:\n\n```\n2:rustc INFO rustc_interface::passes Pre-codegen\n2:rustcTy interner             total           ty lt ct all\n2:rustc    Adt               :   1078 81.3%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Array             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Slice             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    RawPtr            :      2  0.2%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Ref               :      4  0.3%,  0.1%   0.1%  0.0%  0.0%\n2:rustc    FnDef             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    FnPtr             :     76  5.7%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Placeholder       :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Generator         :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    GeneratorWitness  :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Dynamic           :      3  0.2%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Closure           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Tuple             :     13  1.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Bound             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Param             :    146 11.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Infer             :      2  0.2%,  0.1%   0.0%  0.0%  0.0%\n2:rustc    Projection        :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Opaque            :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Foreign           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc                  total   1326         0.2%   0.1%  0.0%  0.0%\n2:rustcInternalSubsts interner: #437\n2:rustcRegion interner: #355\n2:rustcStability interner: #1\n2:rustcConst Stability interner: #0\n2:rustcAllocation interner: #0\n2:rustcLayout interner: #0\n```\n\nAfter:\n\n```\n INFO rustc_interface::passes Post-codegen\nTy interner             total           ty lt ct all\n    Adt               :   1078 81.3%,  0.0%   0.0%  0.0%  0.0%\n    Array             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n    Slice             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n    RawPtr            :      2  0.2%,  0.0%   0.0%  0.0%  0.0%\n    Ref               :      4  0.3%,  0.1%   0.1%  0.0%  0.0%\n    FnDef             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    FnPtr             :     76  5.7%,  0.0%   0.0%  0.0%  0.0%\n    Placeholder       :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Generator         :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    GeneratorWitness  :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Dynamic           :      3  0.2%,  0.0%   0.0%  0.0%  0.0%\n    Closure           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Tuple             :     13  1.0%,  0.0%   0.0%  0.0%  0.0%\n    Bound             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Param             :    146 11.0%,  0.0%   0.0%  0.0%  0.0%\n    Infer             :      2  0.2%,  0.1%   0.0%  0.0%  0.0%\n    Projection        :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Opaque            :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Foreign           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n                  total   1326         0.2%   0.1%  0.0%  0.0%\nInternalSubsts interner: #437\nRegion interner: #355\nStability interner: #1\nConst Stability interner: #0\nAllocation interner: #0\nLayout interner: #0\n```\n\nCloses https://github.com/rust-lang/rust/issues/78931\nr? ``@oli-obk``", "tree": {"sha": "5fc100447c3ea4605b92488333467841ebcff615", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5fc100447c3ea4605b92488333467841ebcff615"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfrQ8WCRBK7hj4Ov3rIwAAdHIIABxljIlx2EylFlOG8Ce5ZQrO\nAeimJ/ikTwZLVbUonewQYa8/CJdb0NMW5YLZERtSQfdxQ26ycwQke8OUe9NASVdY\n9MSPTBcC5NXa8tle8/9P/jtfVqsfnbjtbW44EGtSxai/LtTvrerSLtKQNuztEbPg\nXIUoXmEbSUxtSLW/IysvL2h+OloLykFTXF04vHt767iDwSo0H5Acf4I0R6X0RbsP\nrb7xN/+IVN/KyGEfbG22C33sVPXV5oeB/Ao1HcMnMwCQA52pB5xjoLBB8qYk+u+2\nFihyS52Evl8PhuSS89NurajjpGkrk/VgmjyCOybUtcvoLFW4nYEWoaq4uVnQ5pA=\n=QsDC\n-----END PGP SIGNATURE-----\n", "payload": "tree 5fc100447c3ea4605b92488333467841ebcff615\nparent 6d41735e363c06215135476b6ff58d52e27d8a74\nparent 6e9ed8b486876d6ac4a57342315eeba839f73eca\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1605177109 +0100\ncommitter GitHub <noreply@github.com> 1605177109 +0100\n\nRollup merge of #78933 - jyn514:tracing-output, r=oli-obk\n\nDon't print thread ids and names in `tracing` logs\n\nBefore:\n\n```\n2:rustc INFO rustc_interface::passes Pre-codegen\n2:rustcTy interner             total           ty lt ct all\n2:rustc    Adt               :   1078 81.3%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Array             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Slice             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    RawPtr            :      2  0.2%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Ref               :      4  0.3%,  0.1%   0.1%  0.0%  0.0%\n2:rustc    FnDef             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    FnPtr             :     76  5.7%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Placeholder       :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Generator         :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    GeneratorWitness  :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Dynamic           :      3  0.2%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Closure           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Tuple             :     13  1.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Bound             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Param             :    146 11.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Infer             :      2  0.2%,  0.1%   0.0%  0.0%  0.0%\n2:rustc    Projection        :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Opaque            :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc    Foreign           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n2:rustc                  total   1326         0.2%   0.1%  0.0%  0.0%\n2:rustcInternalSubsts interner: #437\n2:rustcRegion interner: #355\n2:rustcStability interner: #1\n2:rustcConst Stability interner: #0\n2:rustcAllocation interner: #0\n2:rustcLayout interner: #0\n```\n\nAfter:\n\n```\n INFO rustc_interface::passes Post-codegen\nTy interner             total           ty lt ct all\n    Adt               :   1078 81.3%,  0.0%   0.0%  0.0%  0.0%\n    Array             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n    Slice             :      1  0.1%,  0.0%   0.0%  0.0%  0.0%\n    RawPtr            :      2  0.2%,  0.0%   0.0%  0.0%  0.0%\n    Ref               :      4  0.3%,  0.1%   0.1%  0.0%  0.0%\n    FnDef             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    FnPtr             :     76  5.7%,  0.0%   0.0%  0.0%  0.0%\n    Placeholder       :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Generator         :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    GeneratorWitness  :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Dynamic           :      3  0.2%,  0.0%   0.0%  0.0%  0.0%\n    Closure           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Tuple             :     13  1.0%,  0.0%   0.0%  0.0%  0.0%\n    Bound             :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Param             :    146 11.0%,  0.0%   0.0%  0.0%  0.0%\n    Infer             :      2  0.2%,  0.1%   0.0%  0.0%  0.0%\n    Projection        :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Opaque            :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n    Foreign           :      0  0.0%,  0.0%   0.0%  0.0%  0.0%\n                  total   1326         0.2%   0.1%  0.0%  0.0%\nInternalSubsts interner: #437\nRegion interner: #355\nStability interner: #1\nConst Stability interner: #0\nAllocation interner: #0\nLayout interner: #0\n```\n\nCloses https://github.com/rust-lang/rust/issues/78931\nr? ``@oli-obk``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5", "html_url": "https://github.com/rust-lang/rust/commit/d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d41735e363c06215135476b6ff58d52e27d8a74", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d41735e363c06215135476b6ff58d52e27d8a74", "html_url": "https://github.com/rust-lang/rust/commit/6d41735e363c06215135476b6ff58d52e27d8a74"}, {"sha": "6e9ed8b486876d6ac4a57342315eeba839f73eca", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e9ed8b486876d6ac4a57342315eeba839f73eca", "html_url": "https://github.com/rust-lang/rust/commit/6e9ed8b486876d6ac4a57342315eeba839f73eca"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a192c2eb94ec8009f3c9be0b8008c840ae278a15", "filename": "compiler/rustc_driver/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5/compiler%2Frustc_driver%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5/compiler%2Frustc_driver%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver%2Fsrc%2Flib.rs?ref=d3244df6b6b7d834d5ba4ac0e7fa7c6be82918a5", "patch": "@@ -1288,12 +1288,12 @@ pub fn init_env_logger(env: &str) {\n         .with_indent_lines(true)\n         .with_ansi(true)\n         .with_targets(true)\n-        .with_thread_ids(true)\n-        .with_thread_names(true)\n         .with_wraparound(10)\n         .with_verbose_exit(true)\n         .with_verbose_entry(true)\n         .with_indent_amount(2);\n+    #[cfg(parallel_compiler)]\n+    let layer = layer.with_thread_ids(true).with_thread_names(true);\n \n     use tracing_subscriber::layer::SubscriberExt;\n     let subscriber = tracing_subscriber::Registry::default().with(filter).with(layer);"}]}