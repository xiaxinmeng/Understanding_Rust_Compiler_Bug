{"sha": "378ef99eb3849033fa298ce0953c35a6d5a0b16b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM3OGVmOTllYjM4NDkwMzNmYTI5OGNlMDk1M2MzNWE2ZDVhMGIxNmI=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-07-24T01:49:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-07-24T01:49:59Z"}, "message": "Rollup merge of #52641 - ljedrz:mir_dataflow_misc, r=cramertj\n\nSimplify 2 functions in rustc_mir/dataflow\n\n- `graphviz::outgoing`: the `enumerate` only provides indices; use a range instead\n- `DataflowState::interpret_set`: change a push loop to an iterator and remove the `each_bit` helper function", "tree": {"sha": "de0d4501e103858464e1ddb73bbac757c73d24e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/de0d4501e103858464e1ddb73bbac757c73d24e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/378ef99eb3849033fa298ce0953c35a6d5a0b16b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbVoXHCRBK7hj4Ov3rIwAAdHIIAC4WzLlEBdqNB0CZE82rKwh3\njLTrrBI0LQcsiXahHPMATYgg9D/2PavN2TJSf8vhoHrNI3Ox/EsAe0w2nhhG+IQK\nk53qoaaK4ngvOXt8TDw9Nf9JBaEUSXVBDgv8L+sKueo7b99AWEXaiWyFU48wQv8b\nYDxn6I62o3Vlm+GMBbZ5Ucp+E/A9vZpZTkLk3SRhhlDjoP2bD8fA2BE6X96Jlvt0\ngoybOarMcBp99W3JR8QAselMugCzK1UxRQqYrWeBPs9fCOwCgAESJjnJo7tay2Kx\niMEzfKY+1zLjk5OHxb343kK12I6K35KDTLhixbR9o1HSqdFNM/w9eV3cyvf24XI=\n=cIwV\n-----END PGP SIGNATURE-----\n", "payload": "tree de0d4501e103858464e1ddb73bbac757c73d24e1\nparent b3c9fe2537b528424333d10e5fc491a0fa050dc2\nparent d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5\nauthor kennytm <kennytm@gmail.com> 1532396999 +0800\ncommitter GitHub <noreply@github.com> 1532396999 +0800\n\nRollup merge of #52641 - ljedrz:mir_dataflow_misc, r=cramertj\n\nSimplify 2 functions in rustc_mir/dataflow\n\n- `graphviz::outgoing`: the `enumerate` only provides indices; use a range instead\n- `DataflowState::interpret_set`: change a push loop to an iterator and remove the `each_bit` helper function\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/378ef99eb3849033fa298ce0953c35a6d5a0b16b", "html_url": "https://github.com/rust-lang/rust/commit/378ef99eb3849033fa298ce0953c35a6d5a0b16b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/378ef99eb3849033fa298ce0953c35a6d5a0b16b/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b3c9fe2537b528424333d10e5fc491a0fa050dc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/b3c9fe2537b528424333d10e5fc491a0fa050dc2", "html_url": "https://github.com/rust-lang/rust/commit/b3c9fe2537b528424333d10e5fc491a0fa050dc2"}, {"sha": "d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "url": "https://api.github.com/repos/rust-lang/rust/commits/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "html_url": "https://github.com/rust-lang/rust/commit/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "7475b4d82f45207b75cc37db8c8f624c1ac36a79", "filename": "src/librustc_mir/dataflow/graphviz.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/378ef99eb3849033fa298ce0953c35a6d5a0b16b/src%2Flibrustc_mir%2Fdataflow%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/378ef99eb3849033fa298ce0953c35a6d5a0b16b/src%2Flibrustc_mir%2Fdataflow%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fgraphviz.rs?ref=378ef99eb3849033fa298ce0953c35a6d5a0b16b", "patch": "@@ -73,8 +73,8 @@ pub type Node = BasicBlock;\n pub struct Edge { source: BasicBlock, index: usize }\n \n fn outgoing(mir: &Mir, bb: BasicBlock) -> Vec<Edge> {\n-    mir[bb].terminator().successors().enumerate()\n-        .map(|(index, _)| Edge { source: bb, index: index}).collect()\n+    (0..mir[bb].terminator().successors().count())\n+        .map(|index| Edge { source: bb, index: index}).collect()\n }\n \n impl<'a, 'tcx, MWF, P> dot::Labeller<'a> for Graph<'a, 'tcx, MWF, P>"}, {"sha": "4227f0bcd362dfcd97912f4a2940e17c654e4faa", "filename": "src/librustc_mir/dataflow/mod.rs", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/378ef99eb3849033fa298ce0953c35a6d5a0b16b/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/378ef99eb3849033fa298ce0953c35a6d5a0b16b/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs?ref=378ef99eb3849033fa298ce0953c35a6d5a0b16b", "patch": "@@ -441,23 +441,14 @@ pub struct DataflowState<O: BitDenotation>\n }\n \n impl<O: BitDenotation> DataflowState<O> {\n-    pub fn each_bit<F>(&self, words: &IdxSet<O::Idx>, f: F) where F: FnMut(O::Idx)\n-    {\n-        words.iter().for_each(f)\n-    }\n-\n     pub(crate) fn interpret_set<'c, P>(&self,\n                                        o: &'c O,\n                                        words: &IdxSet<O::Idx>,\n                                        render_idx: &P)\n                                        -> Vec<DebugFormatted>\n         where P: Fn(&O, O::Idx) -> DebugFormatted\n     {\n-        let mut v = Vec::new();\n-        self.each_bit(words, |i| {\n-            v.push(render_idx(o, i));\n-        });\n-        v\n+        words.iter().map(|i| render_idx(o, i)).collect()\n     }\n }\n "}]}