{"sha": "3c08da3433fe63595e4d46b95f0b1483c1c2650d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNjMDhkYTM0MzNmZTYzNTk1ZTRkNDZiOTVmMGIxNDgzYzFjMjY1MGQ=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2017-12-11T03:40:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-12-11T03:40:12Z"}, "message": "Merge pull request #2270 from topecongiro/issue-2260\n\nTrim a trailing whitespace on empty line inside code block comment", "tree": {"sha": "8d57773e1587a5440ea9e4025a71223f0e04c7fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d57773e1587a5440ea9e4025a71223f0e04c7fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3c08da3433fe63595e4d46b95f0b1483c1c2650d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJaLf4cCRBK7hj4Ov3rIwAAdHIIAHPqbnvqxtcv5bPkClgf7P+L\nmLpdXIm0F1tz1WhBjHazO7IIQcbee4sNQx8qVzCyJj6a3iogGznSNH6boYnTnc8Q\noHj2FZcsLF8nssDfhY9YLsJV4HZIpaK1XrJ9HoA4habLzR+XcZqr+V8MypxtW421\nnZ1+0Oaa81YIddxT8vr1ZkXRelWTcaoDQYIgmrxGhYxErss6jw+A02tFoC38DjaQ\nD4JgA/XV80OgDgJwi3XL7hrX0iEBACyfBpBtOquMTuQy71GpgyDNIYp1IA4g3jd7\n/vzmQ5tRb90wnshuCtokNAlqGEGVvNjmGK+urTOHYgiv7Kcg9pTl1efxqEFMPjY=\n=huf9\n-----END PGP SIGNATURE-----\n", "payload": "tree 8d57773e1587a5440ea9e4025a71223f0e04c7fb\nparent aec8cfa74904ed0b7303a25bf97ac5e005b8542f\nparent a16a5b4c2e193341850e6fb5bea8663eaa30e1e3\nauthor Nick Cameron <nrc@ncameron.org> 1512963612 +1300\ncommitter GitHub <noreply@github.com> 1512963612 +1300\n\nMerge pull request #2270 from topecongiro/issue-2260\n\nTrim a trailing whitespace on empty line inside code block comment "}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3c08da3433fe63595e4d46b95f0b1483c1c2650d", "html_url": "https://github.com/rust-lang/rust/commit/3c08da3433fe63595e4d46b95f0b1483c1c2650d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3c08da3433fe63595e4d46b95f0b1483c1c2650d/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aec8cfa74904ed0b7303a25bf97ac5e005b8542f", "url": "https://api.github.com/repos/rust-lang/rust/commits/aec8cfa74904ed0b7303a25bf97ac5e005b8542f", "html_url": "https://github.com/rust-lang/rust/commit/aec8cfa74904ed0b7303a25bf97ac5e005b8542f"}, {"sha": "a16a5b4c2e193341850e6fb5bea8663eaa30e1e3", "url": "https://api.github.com/repos/rust-lang/rust/commits/a16a5b4c2e193341850e6fb5bea8663eaa30e1e3", "html_url": "https://github.com/rust-lang/rust/commit/a16a5b4c2e193341850e6fb5bea8663eaa30e1e3"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "4a44c77a4a22e708b536d5ac93127c67a9a9662f", "filename": "src/comment.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3c08da3433fe63595e4d46b95f0b1483c1c2650d/src%2Fcomment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c08da3433fe63595e4d46b95f0b1483c1c2650d/src%2Fcomment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomment.rs?ref=3c08da3433fe63595e4d46b95f0b1483c1c2650d", "patch": "@@ -332,7 +332,11 @@ fn rewrite_comment_inner(\n             inside_code_block = !inside_code_block;\n         }\n         if inside_code_block {\n-            result.push_str(line);\n+            if line.is_empty() && result.ends_with(' ') {\n+                result.pop();\n+            } else {\n+                result.push_str(line);\n+            }\n             continue;\n         }\n "}, {"sha": "39a79a4cacc4685a70ec777c0de9c3bb91f51826", "filename": "tests/source/configs-wrap_comments-true.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3c08da3433fe63595e4d46b95f0b1483c1c2650d/tests%2Fsource%2Fconfigs-wrap_comments-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c08da3433fe63595e4d46b95f0b1483c1c2650d/tests%2Fsource%2Fconfigs-wrap_comments-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fsource%2Fconfigs-wrap_comments-true.rs?ref=3c08da3433fe63595e4d46b95f0b1483c1c2650d", "patch": "@@ -5,3 +5,11 @@\n fn main() {\n     // Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.\n }\n+\n+fn code_block() {\n+    // ```rust\n+    // let x = 3;\n+    //\n+    // println!(\"x = {}\", x);\n+    // ```\n+}"}, {"sha": "4096fd4d89d2cfe9ed9ebc503b46d5d81aa503ea", "filename": "tests/target/configs-wrap_comments-true.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/3c08da3433fe63595e4d46b95f0b1483c1c2650d/tests%2Ftarget%2Fconfigs-wrap_comments-true.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3c08da3433fe63595e4d46b95f0b1483c1c2650d/tests%2Ftarget%2Fconfigs-wrap_comments-true.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Ftarget%2Fconfigs-wrap_comments-true.rs?ref=3c08da3433fe63595e4d46b95f0b1483c1c2650d", "patch": "@@ -10,3 +10,11 @@ fn main() {\n     // nostrud exercitation ullamco laboris nisi\n     // ut aliquip ex ea commodo consequat.\n }\n+\n+fn code_block() {\n+    // ```rust\n+    // let x = 3;\n+    //\n+    // println!(\"x = {}\", x);\n+    // ```\n+}"}]}