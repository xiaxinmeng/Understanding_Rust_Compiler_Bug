{"sha": "575f6940b764bd0d3ea91919e84d3e428b19fc4e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3NWY2OTQwYjc2NGJkMGQzZWE5MTkxOWU4NGQzZTQyOGIxOWZjNGU=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2021-02-04T20:24:41Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2021-02-04T20:24:41Z"}, "message": "ci: only copy python.exe to python3.exe if the latter does not exist\n\nWe're copying the binary to make sure we can call python3.exe around,\nbut it seems like the base image of GitHub Actions changed, copying the\nfile before we do so.\n\nThis commit changes the CI script to only copy the file if it doesn't\nalready exist.", "tree": {"sha": "e872e685e183192e55a07437da9949b915880074", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e872e685e183192e55a07437da9949b915880074"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/575f6940b764bd0d3ea91919e84d3e428b19fc4e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAmAcWGIACgkQPgar6Auq\n8ZzTlxAAkaNhL22fs51ppGQCRuWizB6jif8pSZkD390HVFM7YNukXTZAd89o7P0C\nJMlVd+llq2shITMum7LzTg29VLj8FhwC4ji21vtTVKSYiTyZui/x7jT+bqOW11VV\nKv6iPGWJ+2DIiUjB5jVzTFpMTUhI4NA6147i0Nzm8NiHSo+MLdtsVwIQ66F6V9el\nhN6g5H0OEl07LOSazbUWMJuLIADSk52oYDoJgIeM7sWqJ1caqxuwODqSdph1+ESw\nHt0gxicfKq+uI5M2G0/77bidxll3d7KXN+7gi9uXnT0kbUz8ZeuMbl3Am3uFNYr6\nuqgQhmTgoJp1/zRzYYKwi7etdX7aU4voXjz1Z+V83oLe8ZrQaXnlQ3RC36H3JY7r\nxNa55hoOjREpYE+mBlu2PB5uxBbXY8PEfRtgQXSurK/SmoXF6AXpiWcyhfCdZJz7\nXwtQOmRwIer+n5vdWh1RnPUyA0+M5dTYfmb6/K3O1tx/pbM9eLVrL2FmJ8p/3LFr\nx19Hj+d+1wiiNcLKGDtC9EKRELGJ8gCwUPmreGaJhtecenRWKcBw7HKdM3s/SeIh\net9cy7YrZEN0VZXz75qBk/vHQ2husk9Kr5im5rMuiPwaC9DjYInGwYCFAsjNJy9k\nqPp3DcVZGDS9Na70SO+GLm2Lg+EYX9Sa74na/rEKIZESq++23aI=\n=c48R\n-----END PGP SIGNATURE-----", "payload": "tree e872e685e183192e55a07437da9949b915880074\nparent d3163e96553ae8cb1fca0e62084b124e8b98310b\nauthor Pietro Albini <pietro@pietroalbini.org> 1612470281 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1612470281 +0100\n\nci: only copy python.exe to python3.exe if the latter does not exist\n\nWe're copying the binary to make sure we can call python3.exe around,\nbut it seems like the base image of GitHub Actions changed, copying the\nfile before we do so.\n\nThis commit changes the CI script to only copy the file if it doesn't\nalready exist.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/575f6940b764bd0d3ea91919e84d3e428b19fc4e", "html_url": "https://github.com/rust-lang/rust/commit/575f6940b764bd0d3ea91919e84d3e428b19fc4e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/575f6940b764bd0d3ea91919e84d3e428b19fc4e/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d3163e96553ae8cb1fca0e62084b124e8b98310b", "url": "https://api.github.com/repos/rust-lang/rust/commits/d3163e96553ae8cb1fca0e62084b124e8b98310b", "html_url": "https://github.com/rust-lang/rust/commit/d3163e96553ae8cb1fca0e62084b124e8b98310b"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "0aa4b42a6a8fb5fe1cf5387c6326ada8e734e0f0", "filename": "src/ci/scripts/install-msys2.sh", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/575f6940b764bd0d3ea91919e84d3e428b19fc4e/src%2Fci%2Fscripts%2Finstall-msys2.sh", "raw_url": "https://github.com/rust-lang/rust/raw/575f6940b764bd0d3ea91919e84d3e428b19fc4e/src%2Fci%2Fscripts%2Finstall-msys2.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-msys2.sh?ref=575f6940b764bd0d3ea91919e84d3e428b19fc4e", "patch": "@@ -24,7 +24,9 @@ if isWindows; then\n     # baked in which break LLVM's build system one way or another, so let's use the\n     # native version which keeps everything as native as possible.\n     python_home=\"/c/hostedtoolcache/windows/Python/${native_python_version}/x64\"\n-    cp \"${python_home}/python.exe\" \"${python_home}/python3.exe\"\n+    if ! [[ -f \"${python_home}/python3.exe\" ]]; then\n+        cp \"${python_home}/python.exe\" \"${python_home}/python3.exe\"\n+    fi\n     ciCommandAddPath \"C:\\\\hostedtoolcache\\\\windows\\\\Python\\\\${native_python_version}\\\\x64\"\n     ciCommandAddPath \"C:\\\\hostedtoolcache\\\\windows\\\\Python\\\\${native_python_version}\\\\x64\\\\Scripts\"\n fi"}]}