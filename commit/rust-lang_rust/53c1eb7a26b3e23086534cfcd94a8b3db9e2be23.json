{"sha": "53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzYzFlYjdhMjZiM2UyMzA4NjUzNGNmY2Q5NGE4YjNkYjllMmJlMjM=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-11-04T17:38:49Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-11-04T17:38:49Z"}, "message": "ci: demote i686-unknown-freebsd to tier 2 compiler target\n\nWhile technically the i686-unknown-freebsd target has been a tier 2\ndevelopment platform for a long time, with full toolchain tarballs\navailable on static.rust-lang.org, due to a bug in the manifest\ngeneration the target was never available for download through rustup.\n\nThe infrastructure team privately inquired the FreeBSD package\nmaintainers, and they weren't relying on those tarballs either, so it's\na fair assumption to say practically nobody is using those tarballs.\n\nThis PR then removes the CI builder that produces full tarballs for the\ntarget, and moves the compilation of rust-std for the target in\ndist-various-2.\n\nThe x86_64-unknown-freebsd target is *not* affected.", "tree": {"sha": "e86dc1d7240fe970287b8d4f42ec53fcad9ad2f6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e86dc1d7240fe970287b8d4f42ec53fcad9ad2f6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl+i6aMACgkQPgar6Auq\n8ZyDQw/+MYg2XhV3JEMsJEqF1hYhXj1EL+1cb0gOC/1srfyTtirq6iABqYyi+Q27\nM1eOadr30+dza8CSUnduMuT+x+c8p54Udr+YXmIwJSNjlxjFmd/pfm04wlmpLiI6\n8F7+sqYJgKNmfvKIyWkjSlkacfpzTlclY/6SDnqmgF6CgRD313PUMAYQ8HU2i2X9\nLKZbybJGMU/WSq2XStXSPX878it/Wkna+rufzHJUq1e9jspj/HgBgzcKckFelkSz\niZxhMDm4BJ8Zye9lTqLfu6INSnP5GgUUOwF5OhtFnZ8YvrkdT9bBfSHd9wc/Uz1t\n55Yifyxg6JagRC268WBrKjrhDndllJL9E6vraWkajTk8A07Lfx25bzwXc3n4LGIc\nfalgdXhfds0EUhwuxvrPbrGbQ6z+q2xUUM6JXl8YsUGpam/hxzXCahrPKQlFvqZP\nI7YlQkyOvBK2kVU/66fvNCDqdGB/2aPc1Z7etodp5GOSplLo66BJLbxDA3Q3EU9o\nLXzT/Qlscmo0ZyHPe7kpnwaqa4VHmJojIw2EcXCtX8mQuuBqpRkGoMpn+s72sitZ\n1oAiuRD0Ra8DJ/WA01dwr0H5bDxN/bnSZ6TYl4Z011xz++mQ9sH0CgqGbO+DSyzk\nzOInkSRTxe+rBhbG+mwATQDIftfI1E9uufsQs2hiRF7CoyLGq6Y=\n=dzJc\n-----END PGP SIGNATURE-----", "payload": "tree e86dc1d7240fe970287b8d4f42ec53fcad9ad2f6\nparent d662f808550acadc5980969e1826a653ec35b408\nauthor Pietro Albini <pietro@pietroalbini.org> 1604511529 +0100\ncommitter Pietro Albini <pietro@pietroalbini.org> 1604511529 +0100\n\nci: demote i686-unknown-freebsd to tier 2 compiler target\n\nWhile technically the i686-unknown-freebsd target has been a tier 2\ndevelopment platform for a long time, with full toolchain tarballs\navailable on static.rust-lang.org, due to a bug in the manifest\ngeneration the target was never available for download through rustup.\n\nThe infrastructure team privately inquired the FreeBSD package\nmaintainers, and they weren't relying on those tarballs either, so it's\na fair assumption to say practically nobody is using those tarballs.\n\nThis PR then removes the CI builder that produces full tarballs for the\ntarget, and moves the compilation of rust-std for the target in\ndist-various-2.\n\nThe x86_64-unknown-freebsd target is *not* affected.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "html_url": "https://github.com/rust-lang/rust/commit/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d662f808550acadc5980969e1826a653ec35b408", "url": "https://api.github.com/repos/rust-lang/rust/commits/d662f808550acadc5980969e1826a653ec35b408", "html_url": "https://github.com/rust-lang/rust/commit/d662f808550acadc5980969e1826a653ec35b408"}], "stats": {"total": 49, "additions": 8, "deletions": 41}, "files": [{"sha": "970bcac027962665515756aa7ff0cb3da0802963", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "patch": "@@ -178,9 +178,6 @@ jobs:\n           - name: dist-i586-gnu-i586-i686-musl\n             os: ubuntu-latest-xl\n             env: {}\n-          - name: dist-i686-freebsd\n-            os: ubuntu-latest-xl\n-            env: {}\n           - name: dist-i686-linux\n             os: ubuntu-latest-xl\n             env: {}"}, {"sha": "7db6e58c4d688a018b2fe9fa9a26c02ba7b53e7b", "filename": "src/ci/docker/host-x86_64/dist-i686-freebsd/Dockerfile", "status": "removed", "additions": 0, "deletions": 34, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/d662f808550acadc5980969e1826a653ec35b408/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/d662f808550acadc5980969e1826a653ec35b408/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-i686-freebsd%2FDockerfile?ref=d662f808550acadc5980969e1826a653ec35b408", "patch": "@@ -1,34 +0,0 @@\n-FROM ubuntu:18.04\n-\n-RUN apt-get update && apt-get install -y --no-install-recommends \\\n-  clang \\\n-  make \\\n-  ninja-build \\\n-  file \\\n-  curl \\\n-  ca-certificates \\\n-  python3 \\\n-  git \\\n-  cmake \\\n-  sudo \\\n-  bzip2 \\\n-  xz-utils \\\n-  wget \\\n-  libssl-dev \\\n-  pkg-config\n-\n-COPY scripts/freebsd-toolchain.sh /tmp/\n-RUN /tmp/freebsd-toolchain.sh i686\n-\n-COPY scripts/sccache.sh /scripts/\n-RUN sh /scripts/sccache.sh\n-\n-ENV \\\n-    AR_i686_unknown_freebsd=i686-unknown-freebsd11-ar \\\n-    CC_i686_unknown_freebsd=i686-unknown-freebsd11-clang \\\n-    CXX_i686_unknown_freebsd=i686-unknown-freebsd11-clang++\n-\n-ENV HOSTS=i686-unknown-freebsd\n-\n-ENV RUST_CONFIGURE_ARGS --enable-extended --enable-profiler --disable-docs\n-ENV SCRIPT python3 ../x.py dist --host $HOSTS --target $HOSTS"}, {"sha": "b8b81ab327b0232d7d6583815d81ff9222b5285a", "filename": "src/ci/docker/host-x86_64/dist-various-2/Dockerfile", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2FDockerfile", "raw_url": "https://github.com/rust-lang/rust/raw/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2FDockerfile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2FDockerfile?ref=53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "patch": "@@ -48,6 +48,9 @@ ENV \\\n     CFLAGS_x86_64_fortanix_unknown_sgx=\"-mlvi-hardening -mllvm -x86-experimental-lvi-inline-asm-hardening\" \\\n     CXX_x86_64_fortanix_unknown_sgx=x86_64-fortanix-unknown-sgx-clang++-11 \\\n     CXXFLAGS_x86_64_fortanix_unknown_sgx=\"-mlvi-hardening -mllvm -x86-experimental-lvi-inline-asm-hardening\" \\\n+    AR_i686_unknown_freebsd=i686-unknown-freebsd11-ar \\\n+    CC_i686_unknown_freebsd=i686-unknown-freebsd11-clang \\\n+    CXX_i686_unknown_freebsd=i686-unknown-freebsd11-clang++ \\\n     CC=gcc-7 \\\n     CXX=g++-7\n \n@@ -74,6 +77,9 @@ RUN /tmp/build-x86_64-fortanix-unknown-sgx-toolchain.sh\n COPY host-x86_64/dist-various-2/build-wasi-toolchain.sh /tmp/\n RUN /tmp/build-wasi-toolchain.sh\n \n+COPY scripts/freebsd-toolchain.sh /tmp/\n+RUN /tmp/freebsd-toolchain.sh i686\n+\n COPY scripts/sccache.sh /scripts/\n RUN sh /scripts/sccache.sh\n \n@@ -99,6 +105,7 @@ ENV TARGETS=$TARGETS,x86_64-fortanix-unknown-sgx\n ENV TARGETS=$TARGETS,nvptx64-nvidia-cuda\n ENV TARGETS=$TARGETS,armv7-unknown-linux-gnueabi\n ENV TARGETS=$TARGETS,armv7-unknown-linux-musleabi\n+ENV TARGETS=$TARGETS,i686-unknown-freebsd\n \n # As per https://bugs.launchpad.net/ubuntu/+source/gcc-defaults/+bug/1300211\n # we need asm in the search path for gcc-7 (for gnux32) but not in the search path of the"}, {"sha": "8d56da198955b6a3128bfcde2cdd65d5170bbec5", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "patch": "@@ -325,9 +325,6 @@ jobs:\n           - name: dist-i586-gnu-i586-i686-musl\n             <<: *job-linux-xl\n \n-          - name: dist-i686-freebsd\n-            <<: *job-linux-xl\n-\n           - name: dist-i686-linux\n             <<: *job-linux-xl\n "}, {"sha": "2e9c74d53de02e7e2e15b55d2bce610cf2abb326", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/53c1eb7a26b3e23086534cfcd94a8b3db9e2be23/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=53c1eb7a26b3e23086534cfcd94a8b3db9e2be23", "patch": "@@ -88,7 +88,7 @@ target | std | host | notes\n `i586-unknown-linux-gnu` | \u2713 |  | 32-bit Linux w/o SSE (kernel 4.4, glibc 2.23)\n `i586-unknown-linux-musl` | \u2713 |  | 32-bit Linux w/o SSE, MUSL\n `i686-linux-android` | \u2713 |  | 32-bit x86 Android\n-`i686-unknown-freebsd` | \u2713 | \u2713 | 32-bit FreeBSD\n+`i686-unknown-freebsd` | \u2713 |  | 32-bit FreeBSD\n `i686-unknown-linux-musl` | \u2713 |  | 32-bit Linux with MUSL\n `mips-unknown-linux-gnu` | \u2713 | \u2713 | MIPS Linux (kernel 4.4, glibc 2.23)\n `mips-unknown-linux-musl` | \u2713 |  | MIPS Linux with MUSL"}]}