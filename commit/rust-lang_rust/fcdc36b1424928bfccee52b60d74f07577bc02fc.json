{"sha": "fcdc36b1424928bfccee52b60d74f07577bc02fc", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjZGMzNmIxNDI0OTI4YmZjY2VlNTJiNjBkNzRmMDc1NzdiYzAyZmM=", "commit": {"author": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2014-04-16T14:28:09Z"}, "committer": {"name": "Flavio Percoco", "email": "flaper87@gmail.com", "date": "2014-04-16T15:45:06Z"}, "message": "Move `--ls` behind `-Z ls`\n\nCloses #13549", "tree": {"sha": "1c77a4a9278cfb52d51c77ec320e0f5f9820f960", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c77a4a9278cfb52d51c77ec320e0f5f9820f960"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fcdc36b1424928bfccee52b60d74f07577bc02fc", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fcdc36b1424928bfccee52b60d74f07577bc02fc", "html_url": "https://github.com/rust-lang/rust/commit/fcdc36b1424928bfccee52b60d74f07577bc02fc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fcdc36b1424928bfccee52b60d74f07577bc02fc/comments", "author": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flaper87", "id": 13816, "node_id": "MDQ6VXNlcjEzODE2", "avatar_url": "https://avatars.githubusercontent.com/u/13816?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flaper87", "html_url": "https://github.com/flaper87", "followers_url": "https://api.github.com/users/flaper87/followers", "following_url": "https://api.github.com/users/flaper87/following{/other_user}", "gists_url": "https://api.github.com/users/flaper87/gists{/gist_id}", "starred_url": "https://api.github.com/users/flaper87/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flaper87/subscriptions", "organizations_url": "https://api.github.com/users/flaper87/orgs", "repos_url": "https://api.github.com/users/flaper87/repos", "events_url": "https://api.github.com/users/flaper87/events{/privacy}", "received_events_url": "https://api.github.com/users/flaper87/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "246ebd2d5aebc68a581c33c33cbce5f2bc7dc7d6", "url": "https://api.github.com/repos/rust-lang/rust/commits/246ebd2d5aebc68a581c33c33cbce5f2bc7dc7d6", "html_url": "https://github.com/rust-lang/rust/commit/246ebd2d5aebc68a581c33c33cbce5f2bc7dc7d6"}], "stats": {"total": 18, "additions": 8, "deletions": 10}, "files": [{"sha": "308b2f089f4a03ad62065a9cd53e2637136faeb0", "filename": "man/rustc.1", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/fcdc36b1424928bfccee52b60d74f07577bc02fc/man%2Frustc.1", "raw_url": "https://github.com/rust-lang/rust/raw/fcdc36b1424928bfccee52b60d74f07577bc02fc/man%2Frustc.1", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/man%2Frustc.1?ref=fcdc36b1424928bfccee52b60d74f07577bc02fc", "patch": "@@ -27,9 +27,6 @@ Display this message\n \\fB\\-L\\fR PATH\n Add a directory to the library search path\n .TP\n-\\fB\\-\\-ls\\fR\n-List the symbols defined by a library crate\n-.TP\n \\fB\\-\\-no\\-trans\\fR\n Run all passes except translation; no output\n .TP"}, {"sha": "908ef5ca63698b18b67bd4caae708b56333598fc", "filename": "src/librustc/driver/driver.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Flibrustc%2Fdriver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Flibrustc%2Fdriver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fdriver.rs?ref=fcdc36b1424928bfccee52b60d74f07577bc02fc", "patch": "@@ -1096,7 +1096,6 @@ pub fn optgroups() -> Vec<getopts::OptGroup> {\n   optflag(\"\", \"crate-name\", \"Output the crate name and exit\"),\n   optflag(\"\", \"crate-file-name\", \"Output the file(s) that would be written if compilation \\\n           continued and exit\"),\n-  optflag(\"\",  \"ls\",  \"List the symbols defined by a library crate\"),\n   optflag(\"g\",  \"\",  \"Equivalent to --debuginfo=2\"),\n   optopt(\"\",  \"debuginfo\",  \"Emit DWARF debug info to the objects created:\n          0 = no debug info,"}, {"sha": "16b05612e252a2259169ffa15558140d419394b4", "filename": "src/librustc/driver/session.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Flibrustc%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Flibrustc%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdriver%2Fsession.rs?ref=fcdc36b1424928bfccee52b60d74f07577bc02fc", "patch": "@@ -69,7 +69,8 @@ debugging_opts!(\n         PRINT_LLVM_PASSES,\n         LTO,\n         AST_JSON,\n-        AST_JSON_NOEXPAND\n+        AST_JSON_NOEXPAND,\n+        LS\n     ]\n     0\n )\n@@ -102,7 +103,8 @@ pub fn debugging_opts_map() -> Vec<(&'static str, &'static str, u64)> {\n       PRINT_LLVM_PASSES),\n      (\"lto\", \"Perform LLVM link-time optimizations\", LTO),\n      (\"ast-json\", \"Print the AST as JSON and halt\", AST_JSON),\n-     (\"ast-json-noexpand\", \"Print the pre-expansion AST as JSON and halt\", AST_JSON_NOEXPAND))\n+     (\"ast-json-noexpand\", \"Print the pre-expansion AST as JSON and halt\", AST_JSON_NOEXPAND),\n+     (\"ls\", \"List the symbols defined by a library crate\", LS))\n }\n \n #[deriving(Clone, Eq)]"}, {"sha": "411d9019632ce8a5465bbb5ad7517dbdfd9c8fa5", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=fcdc36b1424928bfccee52b60d74f07577bc02fc", "patch": "@@ -299,8 +299,8 @@ pub fn run_compiler(args: &[~str]) {\n         }\n         None::<d::PpMode> => {/* continue */ }\n     }\n-    let ls = matches.opt_present(\"ls\");\n-    if ls {\n+\n+    if r.contains(&~\"ls\") {\n         match input {\n             d::FileInput(ref ifile) => {\n                 let mut stdout = io::stdout();"}, {"sha": "fc3f5bce0cda2c8557255a3195403dd0f8d0ea19", "filename": "src/test/run-make/ls-metadata/Makefile", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Ftest%2Frun-make%2Fls-metadata%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/fcdc36b1424928bfccee52b60d74f07577bc02fc/src%2Ftest%2Frun-make%2Fls-metadata%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fls-metadata%2FMakefile?ref=fcdc36b1424928bfccee52b60d74f07577bc02fc", "patch": "@@ -2,6 +2,6 @@\n \n all:\n \t$(RUSTC) foo.rs\n-\t$(RUSTC) --ls $(TMPDIR)/foo\n+\t$(RUSTC) -Z ls $(TMPDIR)/foo\n \ttouch $(TMPDIR)/bar\n-\t$(RUSTC) --ls $(TMPDIR)/bar\n+\t$(RUSTC) -Z ls $(TMPDIR)/bar"}]}