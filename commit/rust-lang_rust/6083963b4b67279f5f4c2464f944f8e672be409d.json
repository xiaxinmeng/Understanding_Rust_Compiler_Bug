{"sha": "6083963b4b67279f5f4c2464f944f8e672be409d", "node_id": "C_kwDOAAsO6NoAKDYwODM5NjNiNGI2NzI3OWY1ZjRjMjQ2NGY5NDRmOGU2NzJiZTQwOWQ", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-07-05T00:05:22Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2022-07-05T00:14:07Z"}, "message": "do not enable expensive-debug-assertions in installed Miri in CI", "tree": {"sha": "ccf8f9ded55c8d1085ae2e1dd5423ccb4ecf57d8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ccf8f9ded55c8d1085ae2e1dd5423ccb4ecf57d8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6083963b4b67279f5f4c2464f944f8e672be409d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6083963b4b67279f5f4c2464f944f8e672be409d", "html_url": "https://github.com/rust-lang/rust/commit/6083963b4b67279f5f4c2464f944f8e672be409d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6083963b4b67279f5f4c2464f944f8e672be409d/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b2e64653ebdc7c314fb28a6ef8c944a40888ba00", "url": "https://api.github.com/repos/rust-lang/rust/commits/b2e64653ebdc7c314fb28a6ef8c944a40888ba00", "html_url": "https://github.com/rust-lang/rust/commit/b2e64653ebdc7c314fb28a6ef8c944a40888ba00"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "e7c6ed833c60c4b60bed064f5128570375a5f70b", "filename": "ci.sh", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/6083963b4b67279f5f4c2464f944f8e672be409d/ci.sh", "raw_url": "https://github.com/rust-lang/rust/raw/6083963b4b67279f5f4c2464f944f8e672be409d/ci.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/ci.sh?ref=6083963b4b67279f5f4c2464f944f8e672be409d", "patch": "@@ -1,15 +1,16 @@\n #!/bin/bash\n set -euo pipefail\n+set -x\n \n # Determine configuration\n export RUSTFLAGS=\"-D warnings\"\n export CARGO_INCREMENTAL=0\n-export CARGO_EXTRA_FLAGS=\"--all-features\"\n+export CARGO_EXTRA_FLAGS=\"--all-features\" # in particular, expensive-debug-assertions\n \n # Prepare\n echo \"Build and install miri\"\n-./miri build --all-targets --locked\n-./miri install # implicitly locked\n+CARGO_EXTRA_FLAGS=\"\" ./miri install # implicitly locked -- and the *installed* Miri does *not* get the expensive-debug-assertions feature\n+./miri build --all-targets --locked # the build that all the `./miri test` below will use\n echo\n \n # Test"}]}