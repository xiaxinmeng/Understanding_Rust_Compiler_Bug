{"sha": "2875f825fd5a29d94bbfd78b1019ebdedd8d2444", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI4NzVmODI1ZmQ1YTI5ZDk0YmJmZDc4YjEwMTllYmRlZGQ4ZDI0NDQ=", "commit": {"author": {"name": "Marco A L Barbosa", "email": "malbarbo@gmail.com", "date": "2018-01-27T22:57:10Z"}, "committer": {"name": "Marco A L Barbosa", "email": "malbarbo@gmail.com", "date": "2018-01-27T22:57:10Z"}, "message": "Remove musl/libunwind patch for i686\n\nThe i686 problem was fixed upstream:\nhttps://github.com/llvm-mirror/libunwind/commit/aa805e415f19f50ebc6f5e1e1e4bf9bb7f61816b", "tree": {"sha": "46b6575eb39e582e87cb8baebbb8e60aa85aaceb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46b6575eb39e582e87cb8baebbb8e60aa85aaceb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2875f825fd5a29d94bbfd78b1019ebdedd8d2444", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2875f825fd5a29d94bbfd78b1019ebdedd8d2444", "html_url": "https://github.com/rust-lang/rust/commit/2875f825fd5a29d94bbfd78b1019ebdedd8d2444", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2875f825fd5a29d94bbfd78b1019ebdedd8d2444/comments", "author": {"login": "malbarbo", "id": 1678126, "node_id": "MDQ6VXNlcjE2NzgxMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1678126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malbarbo", "html_url": "https://github.com/malbarbo", "followers_url": "https://api.github.com/users/malbarbo/followers", "following_url": "https://api.github.com/users/malbarbo/following{/other_user}", "gists_url": "https://api.github.com/users/malbarbo/gists{/gist_id}", "starred_url": "https://api.github.com/users/malbarbo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malbarbo/subscriptions", "organizations_url": "https://api.github.com/users/malbarbo/orgs", "repos_url": "https://api.github.com/users/malbarbo/repos", "events_url": "https://api.github.com/users/malbarbo/events{/privacy}", "received_events_url": "https://api.github.com/users/malbarbo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "malbarbo", "id": 1678126, "node_id": "MDQ6VXNlcjE2NzgxMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1678126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/malbarbo", "html_url": "https://github.com/malbarbo", "followers_url": "https://api.github.com/users/malbarbo/followers", "following_url": "https://api.github.com/users/malbarbo/following{/other_user}", "gists_url": "https://api.github.com/users/malbarbo/gists{/gist_id}", "starred_url": "https://api.github.com/users/malbarbo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/malbarbo/subscriptions", "organizations_url": "https://api.github.com/users/malbarbo/orgs", "repos_url": "https://api.github.com/users/malbarbo/repos", "events_url": "https://api.github.com/users/malbarbo/events{/privacy}", "received_events_url": "https://api.github.com/users/malbarbo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd47ddf24da14a27956cbf715b05589e11fdcf7a", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd47ddf24da14a27956cbf715b05589e11fdcf7a", "html_url": "https://github.com/rust-lang/rust/commit/cd47ddf24da14a27956cbf715b05589e11fdcf7a"}], "stats": {"total": 31, "additions": 0, "deletions": 31}, "files": [{"sha": "fb0bd06ce309924458212dcee487bb8daddbca6a", "filename": "src/ci/docker/scripts/musl.sh", "status": "modified", "additions": 0, "deletions": 31, "changes": 31, "blob_url": "https://github.com/rust-lang/rust/blob/2875f825fd5a29d94bbfd78b1019ebdedd8d2444/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh", "raw_url": "https://github.com/rust-lang/rust/raw/2875f825fd5a29d94bbfd78b1019ebdedd8d2444/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fmusl.sh?ref=2875f825fd5a29d94bbfd78b1019ebdedd8d2444", "patch": "@@ -57,37 +57,6 @@ LLVM=60\n if [ ! -d libunwind-release_$LLVM ]; then\n   curl -L https://github.com/llvm-mirror/llvm/archive/release_$LLVM.tar.gz | tar xzf -\n   curl -L https://github.com/llvm-mirror/libunwind/archive/release_$LLVM.tar.gz | tar xzf -\n-  # Whoa what's this mysterious patch we're applying to libunwind! Why are we\n-  # swapping the values of ESP/EBP in libunwind?!\n-  #\n-  # Discovered in #35599 it turns out that the vanilla build of libunwind is not\n-  # suitable for unwinding i686 musl. After some investigation it ended up\n-  # looking like the register values for ESP/EBP were indeed incorrect (swapped)\n-  # in the source. Similar commits in libunwind (r280099 and r282589) have noticed\n-  # this for other platforms, and we just need to realize it for musl linux as\n-  # well.\n-  #\n-  # More technical info can be found at #35599\n-  cd libunwind-release_$LLVM\n-  patch -Np1 << EOF\n-diff --git a/include/libunwind.h b/include/libunwind.h\n-index c5b9633..1360eb2 100644\n---- a/include/libunwind.h\n-+++ b/include/libunwind.h\n-@@ -151,8 +151,8 @@ enum {\n-   UNW_X86_ECX = 1,\n-   UNW_X86_EDX = 2,\n-   UNW_X86_EBX = 3,\n--  UNW_X86_EBP = 4,\n--  UNW_X86_ESP = 5,\n-+  UNW_X86_ESP = 4,\n-+  UNW_X86_EBP = 5,\n-   UNW_X86_ESI = 6,\n-   UNW_X86_EDI = 7\n- };\n-fi\n-EOF\n-  cd ..\n fi\n \n mkdir libunwind-build"}]}