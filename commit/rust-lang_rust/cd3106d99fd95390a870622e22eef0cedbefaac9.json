{"sha": "cd3106d99fd95390a870622e22eef0cedbefaac9", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNkMzEwNmQ5OWZkOTUzOTBhODcwNjIyZTIyZWVmMGNlZGJlZmFhYzk=", "commit": {"author": {"name": "clippered", "email": "clarke_overkill@yahoo.com", "date": "2017-11-06T09:02:42Z"}, "committer": {"name": "clippered", "email": "clarke_overkill@yahoo.com", "date": "2017-11-06T09:02:42Z"}, "message": "add more negative tests", "tree": {"sha": "2134497955b8ae03f7a4e80e63d05dead4a09fab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2134497955b8ae03f7a4e80e63d05dead4a09fab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cd3106d99fd95390a870622e22eef0cedbefaac9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cd3106d99fd95390a870622e22eef0cedbefaac9", "html_url": "https://github.com/rust-lang/rust/commit/cd3106d99fd95390a870622e22eef0cedbefaac9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cd3106d99fd95390a870622e22eef0cedbefaac9/comments", "author": {"login": "clippered", "id": 5051900, "node_id": "MDQ6VXNlcjUwNTE5MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5051900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clippered", "html_url": "https://github.com/clippered", "followers_url": "https://api.github.com/users/clippered/followers", "following_url": "https://api.github.com/users/clippered/following{/other_user}", "gists_url": "https://api.github.com/users/clippered/gists{/gist_id}", "starred_url": "https://api.github.com/users/clippered/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clippered/subscriptions", "organizations_url": "https://api.github.com/users/clippered/orgs", "repos_url": "https://api.github.com/users/clippered/repos", "events_url": "https://api.github.com/users/clippered/events{/privacy}", "received_events_url": "https://api.github.com/users/clippered/received_events", "type": "User", "site_admin": false}, "committer": {"login": "clippered", "id": 5051900, "node_id": "MDQ6VXNlcjUwNTE5MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/5051900?v=4", "gravatar_id": "", "url": "https://api.github.com/users/clippered", "html_url": "https://github.com/clippered", "followers_url": "https://api.github.com/users/clippered/followers", "following_url": "https://api.github.com/users/clippered/following{/other_user}", "gists_url": "https://api.github.com/users/clippered/gists{/gist_id}", "starred_url": "https://api.github.com/users/clippered/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/clippered/subscriptions", "organizations_url": "https://api.github.com/users/clippered/orgs", "repos_url": "https://api.github.com/users/clippered/repos", "events_url": "https://api.github.com/users/clippered/events{/privacy}", "received_events_url": "https://api.github.com/users/clippered/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2787a60fc23accc81c9f9c7350b62c73f1c368a4", "url": "https://api.github.com/repos/rust-lang/rust/commits/2787a60fc23accc81c9f9c7350b62c73f1c368a4", "html_url": "https://github.com/rust-lang/rust/commit/2787a60fc23accc81c9f9c7350b62c73f1c368a4"}], "stats": {"total": 62, "additions": 62, "deletions": 0}, "files": [{"sha": "fe69eeeed0a2875293ceb071d86ad0643abceec1", "filename": "tests/ui/float_cmp_const.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/cd3106d99fd95390a870622e22eef0cedbefaac9/tests%2Fui%2Ffloat_cmp_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd3106d99fd95390a870622e22eef0cedbefaac9/tests%2Fui%2Ffloat_cmp_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffloat_cmp_const.rs?ref=cd3106d99fd95390a870622e22eef0cedbefaac9", "patch": "@@ -28,4 +28,17 @@ fn main() {\n     v > ONE;\n     v <= ONE;\n     v >= ONE;\n+\n+    // has float_cmp warns (as expected), no float constants\n+    let w = 1.1;\n+    v == w;\n+    v != w;\n+    v == 1.0;\n+    v != 1.0;\n+\n+    // no errors, zero and infinity values\n+    ONE != 0f32;\n+    TWO == 0f32;\n+    ONE != ::std::f32::INFINITY;\n+    ONE == ::std::f32::NEG_INFINITY;\n }"}, {"sha": "f8933938ed8bf2030fe01050f1c41c0ff7d3ddbc", "filename": "tests/ui/float_cmp_const.stderr", "status": "modified", "additions": 49, "deletions": 0, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/cd3106d99fd95390a870622e22eef0cedbefaac9/tests%2Fui%2Ffloat_cmp_const.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cd3106d99fd95390a870622e22eef0cedbefaac9/tests%2Fui%2Ffloat_cmp_const.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffloat_cmp_const.stderr?ref=cd3106d99fd95390a870622e22eef0cedbefaac9", "patch": "@@ -83,3 +83,52 @@ note: std::f32::EPSILON and std::f64::EPSILON are available.\n 24 |     v != ONE;\n    |     ^^^^^^^^\n \n+error: strict comparison of f32 or f64\n+  --> $DIR/float_cmp_const.rs:34:5\n+   |\n+34 |     v == w;\n+   |     ^^^^^^ help: consider comparing them within some error: `(v - w).abs() < error`\n+   |\n+   = note: `-D float-cmp` implied by `-D warnings`\n+note: std::f32::EPSILON and std::f64::EPSILON are available.\n+  --> $DIR/float_cmp_const.rs:34:5\n+   |\n+34 |     v == w;\n+   |     ^^^^^^\n+\n+error: strict comparison of f32 or f64\n+  --> $DIR/float_cmp_const.rs:35:5\n+   |\n+35 |     v != w;\n+   |     ^^^^^^ help: consider comparing them within some error: `(v - w).abs() < error`\n+   |\n+note: std::f32::EPSILON and std::f64::EPSILON are available.\n+  --> $DIR/float_cmp_const.rs:35:5\n+   |\n+35 |     v != w;\n+   |     ^^^^^^\n+\n+error: strict comparison of f32 or f64\n+  --> $DIR/float_cmp_const.rs:36:5\n+   |\n+36 |     v == 1.0;\n+   |     ^^^^^^^^ help: consider comparing them within some error: `(v - 1.0).abs() < error`\n+   |\n+note: std::f32::EPSILON and std::f64::EPSILON are available.\n+  --> $DIR/float_cmp_const.rs:36:5\n+   |\n+36 |     v == 1.0;\n+   |     ^^^^^^^^\n+\n+error: strict comparison of f32 or f64\n+  --> $DIR/float_cmp_const.rs:37:5\n+   |\n+37 |     v != 1.0;\n+   |     ^^^^^^^^ help: consider comparing them within some error: `(v - 1.0).abs() < error`\n+   |\n+note: std::f32::EPSILON and std::f64::EPSILON are available.\n+  --> $DIR/float_cmp_const.rs:37:5\n+   |\n+37 |     v != 1.0;\n+   |     ^^^^^^^^\n+"}]}