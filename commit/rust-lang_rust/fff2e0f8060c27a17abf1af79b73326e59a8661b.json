{"sha": "fff2e0f8060c27a17abf1af79b73326e59a8661b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmZjJlMGY4MDYwYzI3YTE3YWJmMWFmNzliNzMzMjZlNTlhODY2MWI=", "commit": {"author": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2020-02-26T18:19:56Z"}, "committer": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2020-03-11T08:10:49Z"}, "message": "Print function pointer type for function pointer const generics", "tree": {"sha": "8d7adafad5b55d64ebcb16d12dd8051393619cd1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8d7adafad5b55d64ebcb16d12dd8051393619cd1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fff2e0f8060c27a17abf1af79b73326e59a8661b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fff2e0f8060c27a17abf1af79b73326e59a8661b", "html_url": "https://github.com/rust-lang/rust/commit/fff2e0f8060c27a17abf1af79b73326e59a8661b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fff2e0f8060c27a17abf1af79b73326e59a8661b/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b78dbf43f4b88e94b7b7f90f0cbe100e52afeae6", "url": "https://api.github.com/repos/rust-lang/rust/commits/b78dbf43f4b88e94b7b7f90f0cbe100e52afeae6", "html_url": "https://github.com/rust-lang/rust/commit/b78dbf43f4b88e94b7b7f90f0cbe100e52afeae6"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "32630737cd57feaee952a3aa7f4619578ca9dbad", "filename": "src/librustc/ty/print/pretty.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fff2e0f8060c27a17abf1af79b73326e59a8661b/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fff2e0f8060c27a17abf1af79b73326e59a8661b/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fprint%2Fpretty.rs?ref=fff2e0f8060c27a17abf1af79b73326e59a8661b", "patch": "@@ -1009,7 +1009,11 @@ pub trait PrettyPrinter<'tcx>:\n                     let alloc_map = self.tcx().alloc_map.lock();\n                     alloc_map.unwrap_fn(ptr.alloc_id)\n                 };\n-                p!(print_value_path(instance.def_id(), instance.substs));\n+                self = self.typed_value(\n+                    |this| this.print_value_path(instance.def_id(), instance.substs),\n+                    |this| this.print_type(ty),\n+                    true,\n+                )?;\n             }\n             // For function type zsts just printing the type is enough\n             (Scalar::Raw { size: 0, .. }, ty::FnDef(..)) => p!(print(ty)),"}, {"sha": "05d2dff8e986816a9a355b25b6876a8eab7e7fe0", "filename": "src/test/ui/const-generics/fn-const-param-infer.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/fff2e0f8060c27a17abf1af79b73326e59a8661b/src%2Ftest%2Fui%2Fconst-generics%2Ffn-const-param-infer.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/fff2e0f8060c27a17abf1af79b73326e59a8661b/src%2Ftest%2Fui%2Fconst-generics%2Ffn-const-param-infer.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Ffn-const-param-infer.stderr?ref=fff2e0f8060c27a17abf1af79b73326e59a8661b", "patch": "@@ -10,12 +10,12 @@ error[E0308]: mismatched types\n   --> $DIR/fn-const-param-infer.rs:16:31\n    |\n LL |     let _: Checked<not_one> = Checked::<not_two>;\n-   |            ----------------   ^^^^^^^^^^^^^^^^^^ expected `not_one`, found `not_two`\n+   |            ----------------   ^^^^^^^^^^^^^^^^^^ expected `{not_one as fn(usize) -> bool}`, found `{not_two as fn(usize) -> bool}`\n    |            |\n    |            expected due to this\n    |\n-   = note: expected struct `Checked<not_one>`\n-              found struct `Checked<not_two>`\n+   = note: expected struct `Checked<{not_one as fn(usize) -> bool}>`\n+              found struct `Checked<{not_two as fn(usize) -> bool}>`\n \n error[E0308]: mismatched types\n   --> $DIR/fn-const-param-infer.rs:20:24\n@@ -36,12 +36,12 @@ error[E0308]: mismatched types\n   --> $DIR/fn-const-param-infer.rs:25:40\n    |\n LL |     let _: Checked<{generic::<u32>}> = Checked::<{generic::<u16>}>;\n-   |            -------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `generic::<u32>`, found `generic::<u16>`\n+   |            -------------------------   ^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected `{generic::<u32> as fn(usize) -> bool}`, found `{generic::<u16> as fn(usize) -> bool}`\n    |            |\n    |            expected due to this\n    |\n-   = note: expected struct `Checked<generic::<u32>>`\n-              found struct `Checked<generic::<u16>>`\n+   = note: expected struct `Checked<{generic::<u32> as fn(usize) -> bool}>`\n+              found struct `Checked<{generic::<u16> as fn(usize) -> bool}>`\n \n error: aborting due to 4 previous errors\n "}]}