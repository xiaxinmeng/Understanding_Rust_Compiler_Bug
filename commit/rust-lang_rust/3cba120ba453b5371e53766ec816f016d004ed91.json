{"sha": "3cba120ba453b5371e53766ec816f016d004ed91", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNjYmExMjBiYTQ1M2I1MzcxZTUzNzY2ZWM4MTZmMDE2ZDAwNGVkOTE=", "commit": {"author": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-05-06T14:11:08Z"}, "committer": {"name": "Ian Jackson", "email": "ijackson@chiark.greenend.org.uk", "date": "2021-05-07T10:17:44Z"}, "message": "std panicking: ALWAYS_ABORT: use Relaxed memory ordering\n\nAs per\n  https://github.com/rust-lang/rust/pull/81858#discussion_r626507810\n\nSuggested-by: Mara Bos <m-ou.se@m-ou.se>\nSigned-off-by: Ian Jackson <ijackson@chiark.greenend.org.uk>", "tree": {"sha": "55a512e94d983e7dbc55c9a9f042f838fbcdb962", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55a512e94d983e7dbc55c9a9f042f838fbcdb962"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3cba120ba453b5371e53766ec816f016d004ed91", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3cba120ba453b5371e53766ec816f016d004ed91", "html_url": "https://github.com/rust-lang/rust/commit/3cba120ba453b5371e53766ec816f016d004ed91", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3cba120ba453b5371e53766ec816f016d004ed91/comments", "author": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ijackson", "id": 2090772, "node_id": "MDQ6VXNlcjIwOTA3NzI=", "avatar_url": "https://avatars.githubusercontent.com/u/2090772?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ijackson", "html_url": "https://github.com/ijackson", "followers_url": "https://api.github.com/users/ijackson/followers", "following_url": "https://api.github.com/users/ijackson/following{/other_user}", "gists_url": "https://api.github.com/users/ijackson/gists{/gist_id}", "starred_url": "https://api.github.com/users/ijackson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ijackson/subscriptions", "organizations_url": "https://api.github.com/users/ijackson/orgs", "repos_url": "https://api.github.com/users/ijackson/repos", "events_url": "https://api.github.com/users/ijackson/events{/privacy}", "received_events_url": "https://api.github.com/users/ijackson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1b1bf2463619e23eba1b36b6d7df276ce73563dd", "url": "https://api.github.com/repos/rust-lang/rust/commits/1b1bf2463619e23eba1b36b6d7df276ce73563dd", "html_url": "https://github.com/rust-lang/rust/commit/1b1bf2463619e23eba1b36b6d7df276ce73563dd"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a8410bea7342b1f198c412d2e9e5403bca9bf480", "filename": "library/std/src/panicking.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3cba120ba453b5371e53766ec816f016d004ed91/library%2Fstd%2Fsrc%2Fpanicking.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3cba120ba453b5371e53766ec816f016d004ed91/library%2Fstd%2Fsrc%2Fpanicking.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fpanicking.rs?ref=3cba120ba453b5371e53766ec816f016d004ed91", "patch": "@@ -259,7 +259,7 @@ pub mod panic_count {\n \n     pub fn increase() -> (bool, usize) {\n         (\n-            GLOBAL_PANIC_COUNT.fetch_add(1, Ordering::Acquire) & ALWAYS_ABORT_FLAG != 0,\n+            GLOBAL_PANIC_COUNT.fetch_add(1, Ordering::Relaxed) & ALWAYS_ABORT_FLAG != 0,\n             LOCAL_PANIC_COUNT.with(|c| {\n                 let next = c.get() + 1;\n                 c.set(next);\n@@ -278,7 +278,7 @@ pub mod panic_count {\n     }\n \n     pub fn set_always_abort() {\n-        GLOBAL_PANIC_COUNT.fetch_or(ALWAYS_ABORT_FLAG, Ordering::Release);\n+        GLOBAL_PANIC_COUNT.fetch_or(ALWAYS_ABORT_FLAG, Ordering::Relaxed);\n     }\n \n     // Disregards ALWAYS_ABORT_FLAG"}]}