{"sha": "51534b897efcdc083fd569f4a9cad21af740f439", "node_id": "C_kwDOAAsO6NoAKDUxNTM0Yjg5N2VmY2RjMDgzZmQ1NjlmNGE5Y2FkMjFhZjc0MGY0Mzk", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-12-29T17:24:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-12-29T17:24:32Z"}, "message": "Rollup merge of #106236 - Ezrashaw:add-test+docs-e0519-e0514, r=GuillaumeGomez\n\ndocs/test: add docs and a UI test for `E0514` and `E0519`\n\nNo UI test on `E0514`, it would need to compile with a different `rustc` version.\n\nr? `@GuillaumeGomez`", "tree": {"sha": "42f39c3b04fbe095e5373e1fad6b7d699d61587f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/42f39c3b04fbe095e5373e1fad6b7d699d61587f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51534b897efcdc083fd569f4a9cad21af740f439", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjrc1QCRBK7hj4Ov3rIwAAf4kIAGSDV3F/X4AK1ycpOBN+V2Zt\ns8nqhoygPWQ/Ii9UQFMOdXTJPlV841Hwsj4yj2HQ37aqTXlG68Bwlw57RDCxhdGT\nlFkEatsWj7n1Pw1FJXxaQIZnNBvKpkjlnyp3Cdw49hfvGIOKDapceUSLoxyFpBXJ\nah7P4Sp5ILAmRDBrovjITxeX3Vs76VD2iGO9jjigRNgS0wbAVjbft3O5g5MCPqPh\nb2JKp8V00mGkVP/hou62LihHomia83tYyMSE0XsVyq6GBXkvWVTj5FDDQHw3NTTT\nLRIE7c5UbuI2OQAph3ztw9vtonKSBXK9oXmzIDnChCmJVYcU6Wz1H6zZJQWKWKs=\n=a7sh\n-----END PGP SIGNATURE-----\n", "payload": "tree 42f39c3b04fbe095e5373e1fad6b7d699d61587f\nparent 0e953ed69a8a45bde961de4e7b9789cd6cd21d0b\nparent 726519d4f5dc8f12783ba873ccae75fce6654c89\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1672334672 +0100\ncommitter GitHub <noreply@github.com> 1672334672 +0100\n\nRollup merge of #106236 - Ezrashaw:add-test+docs-e0519-e0514, r=GuillaumeGomez\n\ndocs/test: add docs and a UI test for `E0514` and `E0519`\n\nNo UI test on `E0514`, it would need to compile with a different `rustc` version.\n\nr? `@GuillaumeGomez`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51534b897efcdc083fd569f4a9cad21af740f439", "html_url": "https://github.com/rust-lang/rust/commit/51534b897efcdc083fd569f4a9cad21af740f439", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51534b897efcdc083fd569f4a9cad21af740f439/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e953ed69a8a45bde961de4e7b9789cd6cd21d0b", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e953ed69a8a45bde961de4e7b9789cd6cd21d0b", "html_url": "https://github.com/rust-lang/rust/commit/0e953ed69a8a45bde961de4e7b9789cd6cd21d0b"}, {"sha": "726519d4f5dc8f12783ba873ccae75fce6654c89", "url": "https://api.github.com/repos/rust-lang/rust/commits/726519d4f5dc8f12783ba873ccae75fce6654c89", "html_url": "https://github.com/rust-lang/rust/commit/726519d4f5dc8f12783ba873ccae75fce6654c89"}], "stats": {"total": 98, "additions": 94, "deletions": 4}, "files": [{"sha": "5a1670f06fc641ad731ab66649acc50f0ea26333", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/51534b897efcdc083fd569f4a9cad21af740f439/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51534b897efcdc083fd569f4a9cad21af740f439/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=51534b897efcdc083fd569f4a9cad21af740f439", "patch": "@@ -276,10 +276,12 @@ E0509: include_str!(\"./error_codes/E0509.md\"),\n E0510: include_str!(\"./error_codes/E0510.md\"),\n E0511: include_str!(\"./error_codes/E0511.md\"),\n E0512: include_str!(\"./error_codes/E0512.md\"),\n+E0514: include_str!(\"./error_codes/E0514.md\"),\n E0515: include_str!(\"./error_codes/E0515.md\"),\n E0516: include_str!(\"./error_codes/E0516.md\"),\n E0517: include_str!(\"./error_codes/E0517.md\"),\n E0518: include_str!(\"./error_codes/E0518.md\"),\n+E0519: include_str!(\"./error_codes/E0519.md\"),\n E0520: include_str!(\"./error_codes/E0520.md\"),\n E0521: include_str!(\"./error_codes/E0521.md\"),\n E0522: include_str!(\"./error_codes/E0522.md\"),\n@@ -615,8 +617,6 @@ E0791: include_str!(\"./error_codes/E0791.md\"),\n //  E0488, // lifetime of variable does not enclose its declaration\n //  E0489, // type/lifetime parameter not in scope here\n     E0490, // a value of type `..` is borrowed for too long\n-    E0514, // metadata version mismatch\n-    E0519, // local crate and dependency have same (crate-name, disambiguator)\n     E0523, // two dependencies have same (crate-name, disambiguator) but different SVH\n //  E0526, // shuffle indices are not constant\n //  E0540, // multiple rustc_deprecated attributes"}, {"sha": "ce2bbc5c5056c4a3d5748b495b4890c1536c322c", "filename": "compiler/rustc_error_codes/src/error_codes/E0514.md", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/51534b897efcdc083fd569f4a9cad21af740f439/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0514.md", "raw_url": "https://github.com/rust-lang/rust/raw/51534b897efcdc083fd569f4a9cad21af740f439/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0514.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0514.md?ref=51534b897efcdc083fd569f4a9cad21af740f439", "patch": "@@ -0,0 +1,33 @@\n+Dependency compiled with different version of `rustc`.\n+\n+Example of erroneous code:\n+\n+`a.rs`\n+```ignore (cannot-link-with-other-tests)\n+// compiled with stable `rustc`\n+\n+#[crate_type = \"lib\"]\n+```\n+\n+`b.rs`\n+```ignore (cannot-link-with-other-tests)\n+// compiled with nightly `rustc`\n+\n+#[crate_type = \"lib\"]\n+\n+extern crate a; // error: found crate `a` compiled by an incompatible version\n+                //        of rustc\n+```\n+\n+This error is caused when the version of `rustc` used to compile a crate, as\n+stored in the binary's metadata, differs from the version of one of its\n+dependencies. Many parts of Rust binaries are considered unstable. For\n+instance, the Rust ABI is not stable between compiler versions. This means that\n+the compiler cannot be sure about *how* to call a function between compiler\n+versions, and therefore this error occurs.\n+\n+This error can be fixed by:\n+ * Using [Cargo](../cargo/index.html), the Rust package manager and\n+   [Rustup](https://rust-lang.github.io/rustup/), the Rust toolchain installer,\n+   automatically fixing this issue.\n+ * Recompiling the crates with a uniform `rustc` version."}, {"sha": "12876e2ad75fcc92c34885a567292945b7335e78", "filename": "compiler/rustc_error_codes/src/error_codes/E0519.md", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/51534b897efcdc083fd569f4a9cad21af740f439/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0519.md", "raw_url": "https://github.com/rust-lang/rust/raw/51534b897efcdc083fd569f4a9cad21af740f439/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0519.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0519.md?ref=51534b897efcdc083fd569f4a9cad21af740f439", "patch": "@@ -0,0 +1,40 @@\n+The current crate is indistinguishable from one of its dependencies, in terms\n+of metadata.\n+\n+Example of erroneous code:\n+\n+`a.rs`\n+```ignore (cannot-link-with-other-tests)\n+#![crate_name = \"a\"]\n+#![crate_type = \"lib\"]\n+\n+pub fn foo() {}\n+```\n+\n+`b.rs`\n+```ignore (cannot-link-with-other-tests)\n+#![crate_name = \"a\"]\n+#![crate_type = \"lib\"]\n+\n+// error: the current crate is indistinguishable from one of its dependencies:\n+//        it has the same crate-name `a` and was compiled with the same\n+//        `-C metadata` arguments. This will result in symbol conflicts between\n+//        the two.\n+extern crate a;\n+\n+pub fn foo() {}\n+\n+fn bar() {\n+    a::foo(); // is this calling the local crate or the dependency?\n+}\n+```\n+\n+The above example compiles two crates with exactly the same name and\n+`crate_type` (plus any other metadata). This causes an error because it becomes\n+impossible for the compiler to distinguish between symbols (`pub` item names).\n+\n+This error can be fixed by:\n+ * Using [Cargo](../cargo/index.html), the Rust package manager, automatically\n+   fixing this issue.\n+ * Recompiling the crate with different metadata (different name/\n+   `crate_type`)."}, {"sha": "269ffd6320d9e7ad95fc420cc78ca36043c2a2d5", "filename": "src/test/ui/error-codes/E0519.rs", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/51534b897efcdc083fd569f4a9cad21af740f439/src%2Ftest%2Fui%2Ferror-codes%2FE0519.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51534b897efcdc083fd569f4a9cad21af740f439/src%2Ftest%2Fui%2Ferror-codes%2FE0519.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0519.rs?ref=51534b897efcdc083fd569f4a9cad21af740f439", "patch": "@@ -0,0 +1,8 @@\n+// no need to create a new aux file, we can use an existing.\n+// aux-build: crateresolve1-1.rs\n+\n+// set same metadata as `crateresolve1`\n+#![crate_name = \"crateresolve1\"]\n+#![crate_type = \"lib\"]\n+\n+extern crate crateresolve1; //~ ERROR E0519"}, {"sha": "e24fc4aaa70fb18dd83c4f98b41896e73f26e995", "filename": "src/test/ui/error-codes/E0519.stderr", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/51534b897efcdc083fd569f4a9cad21af740f439/src%2Ftest%2Fui%2Ferror-codes%2FE0519.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/51534b897efcdc083fd569f4a9cad21af740f439/src%2Ftest%2Fui%2Ferror-codes%2FE0519.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0519.stderr?ref=51534b897efcdc083fd569f4a9cad21af740f439", "patch": "@@ -0,0 +1,9 @@\n+error[E0519]: the current crate is indistinguishable from one of its dependencies: it has the same crate-name `crateresolve1` and was compiled with the same `-C metadata` arguments. This will result in symbol conflicts between the two.\n+  --> $DIR/E0519.rs:8:1\n+   |\n+LL | extern crate crateresolve1;\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0519`."}, {"sha": "fd870b0997ce0294566b048ecac3cd19214d6ee4", "filename": "src/tools/tidy/src/error_codes_check.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/51534b897efcdc083fd569f4a9cad21af740f439/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51534b897efcdc083fd569f4a9cad21af740f439/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs?ref=51534b897efcdc083fd569f4a9cad21af740f439", "patch": "@@ -11,8 +11,8 @@ use regex::Regex;\n \n // A few of those error codes can't be tested but all the others can and *should* be tested!\n const EXEMPTED_FROM_TEST: &[&str] = &[\n-    \"E0313\", \"E0461\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0519\", \"E0523\", \"E0554\", \"E0640\",\n-    \"E0717\", \"E0729\", \"E0789\",\n+    \"E0313\", \"E0461\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0523\", \"E0554\", \"E0640\", \"E0717\",\n+    \"E0729\", \"E0789\",\n ];\n \n // Some error codes don't have any tests apparently..."}]}