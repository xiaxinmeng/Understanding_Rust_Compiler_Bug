{"sha": "622c44510fcc65ad4038beb1714cf8950f96a2a0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYyMmM0NDUxMGZjYzY1YWQ0MDM4YmViMTcxNGNmODk1MGY5NmEyYTA=", "commit": {"author": {"name": "Niv Kaminer", "email": "nivkner@zoho.com", "date": "2017-12-09T22:10:43Z"}, "committer": {"name": "Niv Kaminer", "email": "nivkner@zoho.com", "date": "2018-03-17T18:24:49Z"}, "message": "remove FIXME(#37712) and implement ItemLikeVisitor instead of Visitor", "tree": {"sha": "13d795281ce42f27c3fc87362ff3e3f220ed4776", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/13d795281ce42f27c3fc87362ff3e3f220ed4776"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/622c44510fcc65ad4038beb1714cf8950f96a2a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/622c44510fcc65ad4038beb1714cf8950f96a2a0", "html_url": "https://github.com/rust-lang/rust/commit/622c44510fcc65ad4038beb1714cf8950f96a2a0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/622c44510fcc65ad4038beb1714cf8950f96a2a0/comments", "author": {"login": "nivkner", "id": 22821514, "node_id": "MDQ6VXNlcjIyODIxNTE0", "avatar_url": "https://avatars.githubusercontent.com/u/22821514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nivkner", "html_url": "https://github.com/nivkner", "followers_url": "https://api.github.com/users/nivkner/followers", "following_url": "https://api.github.com/users/nivkner/following{/other_user}", "gists_url": "https://api.github.com/users/nivkner/gists{/gist_id}", "starred_url": "https://api.github.com/users/nivkner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nivkner/subscriptions", "organizations_url": "https://api.github.com/users/nivkner/orgs", "repos_url": "https://api.github.com/users/nivkner/repos", "events_url": "https://api.github.com/users/nivkner/events{/privacy}", "received_events_url": "https://api.github.com/users/nivkner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nivkner", "id": 22821514, "node_id": "MDQ6VXNlcjIyODIxNTE0", "avatar_url": "https://avatars.githubusercontent.com/u/22821514?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nivkner", "html_url": "https://github.com/nivkner", "followers_url": "https://api.github.com/users/nivkner/followers", "following_url": "https://api.github.com/users/nivkner/following{/other_user}", "gists_url": "https://api.github.com/users/nivkner/gists{/gist_id}", "starred_url": "https://api.github.com/users/nivkner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nivkner/subscriptions", "organizations_url": "https://api.github.com/users/nivkner/orgs", "repos_url": "https://api.github.com/users/nivkner/repos", "events_url": "https://api.github.com/users/nivkner/events{/privacy}", "received_events_url": "https://api.github.com/users/nivkner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4a06708d30cc744583a3bce5508347977de6ac8c", "url": "https://api.github.com/repos/rust-lang/rust/commits/4a06708d30cc744583a3bce5508347977de6ac8c", "html_url": "https://github.com/rust-lang/rust/commit/4a06708d30cc744583a3bce5508347977de6ac8c"}], "stats": {"total": 21, "additions": 6, "deletions": 15}, "files": [{"sha": "47bbd67fb5c70840cc5fdf85e8cfca77338df991", "filename": "src/librustc_trans_utils/symbol_names_test.rs", "status": "modified", "additions": 6, "deletions": 15, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/622c44510fcc65ad4038beb1714cf8950f96a2a0/src%2Flibrustc_trans_utils%2Fsymbol_names_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/622c44510fcc65ad4038beb1714cf8950f96a2a0/src%2Flibrustc_trans_utils%2Fsymbol_names_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans_utils%2Fsymbol_names_test.rs?ref=622c44510fcc65ad4038beb1714cf8950f96a2a0", "patch": "@@ -15,7 +15,6 @@\n //! paths etc in all kinds of annoying scenarios.\n \n use rustc::hir;\n-use rustc::hir::intravisit::{self, Visitor, NestedVisitorMap};\n use rustc::ty::TyCtxt;\n use syntax::ast;\n \n@@ -34,8 +33,7 @@ pub fn report_symbol_names<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>) {\n \n     tcx.dep_graph.with_ignore(|| {\n         let mut visitor = SymbolNamesTest { tcx: tcx };\n-        // FIXME(#37712) could use ItemLikeVisitor if trait items were item-like\n-        tcx.hir.krate().visit_all_item_likes(&mut visitor.as_deep_visitor());\n+        tcx.hir.krate().visit_all_item_likes(&mut visitor);\n     })\n }\n \n@@ -66,23 +64,16 @@ impl<'a, 'tcx> SymbolNamesTest<'a, 'tcx> {\n     }\n }\n \n-impl<'a, 'tcx> Visitor<'tcx> for SymbolNamesTest<'a, 'tcx> {\n-    fn nested_visit_map<'this>(&'this mut self) -> NestedVisitorMap<'this, 'tcx> {\n-        NestedVisitorMap::None\n-    }\n-\n+impl<'a, 'tcx> hir::itemlikevisit::ItemLikeVisitor<'tcx> for SymbolNamesTest<'a, 'tcx> {\n     fn visit_item(&mut self, item: &'tcx hir::Item) {\n         self.process_attrs(item.id);\n-        intravisit::walk_item(self, item);\n     }\n \n-    fn visit_trait_item(&mut self, ti: &'tcx hir::TraitItem) {\n-        self.process_attrs(ti.id);\n-        intravisit::walk_trait_item(self, ti)\n+    fn visit_trait_item(&mut self, trait_item: &'tcx hir::TraitItem) {\n+        self.process_attrs(trait_item.id);\n     }\n \n-    fn visit_impl_item(&mut self, ii: &'tcx hir::ImplItem) {\n-        self.process_attrs(ii.id);\n-        intravisit::walk_impl_item(self, ii)\n+    fn visit_impl_item(&mut self, impl_item: &'tcx hir::ImplItem) {\n+        self.process_attrs(impl_item.id);\n     }\n }"}]}