{"sha": "00eec854f167c546cedd0911f4cc302a54ed0be9", "node_id": "C_kwDOAAsO6NoAKDAwZWVjODU0ZjE2N2M1NDZjZWRkMDkxMWY0Y2MzMDJhNTRlZDBiZTk", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2023-02-23T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2023-02-23T13:03:51Z"}, "message": "Emit diff instead of after mir in ElaborateDrops tests\n\nto make it easy to understand chnages made by elaboration.", "tree": {"sha": "57d50a570d2f5bcd372be7861a4a1450ba1eff3f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57d50a570d2f5bcd372be7861a4a1450ba1eff3f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00eec854f167c546cedd0911f4cc302a54ed0be9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00eec854f167c546cedd0911f4cc302a54ed0be9", "html_url": "https://github.com/rust-lang/rust/commit/00eec854f167c546cedd0911f4cc302a54ed0be9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00eec854f167c546cedd0911f4cc302a54ed0be9/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07c993eba8b76eae497e98433ae075b00f01be10", "url": "https://api.github.com/repos/rust-lang/rust/commits/07c993eba8b76eae497e98433ae075b00f01be10", "html_url": "https://github.com/rust-lang/rust/commit/07c993eba8b76eae497e98433ae075b00f01be10"}], "stats": {"total": 673, "additions": 347, "deletions": 326}, "files": [{"sha": "c2ea3ac502f89dc3f89446f4700bea44444d19a4", "filename": "tests/mir-opt/issue_41110.main.ElaborateDrops.after.mir", "status": "removed", "additions": 0, "deletions": 70, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/07c993eba8b76eae497e98433ae075b00f01be10/tests%2Fmir-opt%2Fissue_41110.main.ElaborateDrops.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/07c993eba8b76eae497e98433ae075b00f01be10/tests%2Fmir-opt%2Fissue_41110.main.ElaborateDrops.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41110.main.ElaborateDrops.after.mir?ref=07c993eba8b76eae497e98433ae075b00f01be10", "patch": "@@ -1,70 +0,0 @@\n-// MIR for `main` after ElaborateDrops\n-\n-fn main() -> () {\n-    let mut _0: ();                      // return place in scope 0 at $DIR/issue_41110.rs:+0:11: +0:11\n-    let _1: ();                          // in scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n-    let mut _2: S;                       // in scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n-    let mut _3: S;                       // in scope 0 at $DIR/issue_41110.rs:+1:21: +1:27\n-    let mut _4: S;                       // in scope 0 at $DIR/issue_41110.rs:+1:21: +1:22\n-    let mut _5: bool;                    // in scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-    scope 1 {\n-        debug x => _1;                   // in scope 1 at $DIR/issue_41110.rs:+1:9: +1:10\n-    }\n-\n-    bb0: {\n-        _5 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n-        StorageLive(_1);                 // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n-        StorageLive(_2);                 // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n-        _5 = const true;                 // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n-        _2 = S;                          // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n-        StorageLive(_3);                 // scope 0 at $DIR/issue_41110.rs:+1:21: +1:27\n-        StorageLive(_4);                 // scope 0 at $DIR/issue_41110.rs:+1:21: +1:22\n-        _4 = S;                          // scope 0 at $DIR/issue_41110.rs:+1:21: +1:22\n-        _3 = S::id(move _4) -> [return: bb1, unwind: bb4]; // scope 0 at $DIR/issue_41110.rs:+1:21: +1:27\n-                                         // mir::Constant\n-                                         // + span: $DIR/issue_41110.rs:8:23: 8:25\n-                                         // + literal: Const { ty: fn(S) -> S {S::id}, val: Value(<ZST>) }\n-    }\n-\n-    bb1: {\n-        StorageDead(_4);                 // scope 0 at $DIR/issue_41110.rs:+1:26: +1:27\n-        _5 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:13: +1:28\n-        _1 = S::other(move _2, move _3) -> [return: bb2, unwind: bb3]; // scope 0 at $DIR/issue_41110.rs:+1:13: +1:28\n-                                         // mir::Constant\n-                                         // + span: $DIR/issue_41110.rs:8:15: 8:20\n-                                         // + literal: Const { ty: fn(S, S) {S::other}, val: Value(<ZST>) }\n-    }\n-\n-    bb2: {\n-        StorageDead(_3);                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-        _5 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-        StorageDead(_2);                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-        _0 = const ();                   // scope 0 at $DIR/issue_41110.rs:+0:11: +2:2\n-        StorageDead(_1);                 // scope 0 at $DIR/issue_41110.rs:+2:1: +2:2\n-        return;                          // scope 0 at $DIR/issue_41110.rs:+2:2: +2:2\n-    }\n-\n-    bb3 (cleanup): {\n-        goto -> bb5;                     // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-    }\n-\n-    bb4 (cleanup): {\n-        goto -> bb5;                     // scope 0 at $DIR/issue_41110.rs:+1:26: +1:27\n-    }\n-\n-    bb5 (cleanup): {\n-        goto -> bb8;                     // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-    }\n-\n-    bb6 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue_41110.rs:+0:1: +2:2\n-    }\n-\n-    bb7 (cleanup): {\n-        drop(_2) -> bb6;                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-    }\n-\n-    bb8 (cleanup): {\n-        switchInt(_5) -> [0: bb6, otherwise: bb7]; // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n-    }\n-}"}, {"sha": "7ac75b51a370f67929c23de185cd4181f81955d6", "filename": "tests/mir-opt/issue_41110.main.ElaborateDrops.diff", "status": "added", "additions": 75, "deletions": 0, "changes": 75, "blob_url": "https://github.com/rust-lang/rust/blob/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41110.main.ElaborateDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41110.main.ElaborateDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41110.main.ElaborateDrops.diff?ref=00eec854f167c546cedd0911f4cc302a54ed0be9", "patch": "@@ -0,0 +1,75 @@\n+- // MIR for `main` before ElaborateDrops\n++ // MIR for `main` after ElaborateDrops\n+  \n+  fn main() -> () {\n+      let mut _0: ();                      // return place in scope 0 at $DIR/issue_41110.rs:+0:11: +0:11\n+      let _1: ();                          // in scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n+      let mut _2: S;                       // in scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n+      let mut _3: S;                       // in scope 0 at $DIR/issue_41110.rs:+1:21: +1:27\n+      let mut _4: S;                       // in scope 0 at $DIR/issue_41110.rs:+1:21: +1:22\n++     let mut _5: bool;                    // in scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n+      scope 1 {\n+          debug x => _1;                   // in scope 1 at $DIR/issue_41110.rs:+1:9: +1:10\n+      }\n+  \n+      bb0: {\n++         _5 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n+          StorageLive(_1);                 // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n+          StorageLive(_2);                 // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n++         _5 = const true;                 // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n+          _2 = S;                          // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n+          StorageLive(_3);                 // scope 0 at $DIR/issue_41110.rs:+1:21: +1:27\n+          StorageLive(_4);                 // scope 0 at $DIR/issue_41110.rs:+1:21: +1:22\n+          _4 = S;                          // scope 0 at $DIR/issue_41110.rs:+1:21: +1:22\n+          _3 = S::id(move _4) -> [return: bb1, unwind: bb4]; // scope 0 at $DIR/issue_41110.rs:+1:21: +1:27\n+                                           // mir::Constant\n+                                           // + span: $DIR/issue_41110.rs:8:23: 8:25\n+                                           // + literal: Const { ty: fn(S) -> S {S::id}, val: Value(<ZST>) }\n+      }\n+  \n+      bb1: {\n+          StorageDead(_4);                 // scope 0 at $DIR/issue_41110.rs:+1:26: +1:27\n++         _5 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:13: +1:28\n+          _1 = S::other(move _2, move _3) -> [return: bb2, unwind: bb3]; // scope 0 at $DIR/issue_41110.rs:+1:13: +1:28\n+                                           // mir::Constant\n+                                           // + span: $DIR/issue_41110.rs:8:15: 8:20\n+                                           // + literal: Const { ty: fn(S, S) {S::other}, val: Value(<ZST>) }\n+      }\n+  \n+      bb2: {\n+          StorageDead(_3);                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n++         _5 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n+          StorageDead(_2);                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n+          _0 = const ();                   // scope 0 at $DIR/issue_41110.rs:+0:11: +2:2\n+          StorageDead(_1);                 // scope 0 at $DIR/issue_41110.rs:+2:1: +2:2\n+          return;                          // scope 0 at $DIR/issue_41110.rs:+2:2: +2:2\n+      }\n+  \n+      bb3 (cleanup): {\n+-         drop(_3) -> bb5;                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n++         goto -> bb5;                     // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n+      }\n+  \n+      bb4 (cleanup): {\n+-         drop(_4) -> bb5;                 // scope 0 at $DIR/issue_41110.rs:+1:26: +1:27\n++         goto -> bb5;                     // scope 0 at $DIR/issue_41110.rs:+1:26: +1:27\n+      }\n+  \n+      bb5 (cleanup): {\n+-         drop(_2) -> bb6;                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n++         goto -> bb8;                     // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n+      }\n+  \n+      bb6 (cleanup): {\n+          resume;                          // scope 0 at $DIR/issue_41110.rs:+0:1: +2:2\n++     }\n++ \n++     bb7 (cleanup): {\n++         drop(_2) -> bb6;                 // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n++     }\n++ \n++     bb8 (cleanup): {\n++         switchInt(_5) -> [0: bb6, otherwise: bb7]; // scope 0 at $DIR/issue_41110.rs:+1:27: +1:28\n+      }\n+  }\n+  "}, {"sha": "e1067ce53e41dd03f33a081c698f6177b58e78e7", "filename": "tests/mir-opt/issue_41110.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41110.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41110.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41110.rs?ref=00eec854f167c546cedd0911f4cc302a54ed0be9", "patch": "@@ -3,14 +3,14 @@\n // check that we don't emit multiple drop flags when they are not needed.\n \n \n-// EMIT_MIR issue_41110.main.ElaborateDrops.after.mir\n+// EMIT_MIR issue_41110.main.ElaborateDrops.diff\n fn main() {\n     let x = S.other(S.id());\n }\n \n // no_mangle to make sure this gets instantiated even in an executable.\n #[no_mangle]\n-// EMIT_MIR issue_41110.test.ElaborateDrops.after.mir\n+// EMIT_MIR issue_41110.test.ElaborateDrops.diff\n pub fn test() {\n     let u = S;\n     let mut v = S;"}, {"sha": "82989c3f071b43d39f022ca6dadc2e802aa7404e", "filename": "tests/mir-opt/issue_41110.test.ElaborateDrops.after.mir", "status": "removed", "additions": 0, "deletions": 101, "changes": 101, "blob_url": "https://github.com/rust-lang/rust/blob/07c993eba8b76eae497e98433ae075b00f01be10/tests%2Fmir-opt%2Fissue_41110.test.ElaborateDrops.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/07c993eba8b76eae497e98433ae075b00f01be10/tests%2Fmir-opt%2Fissue_41110.test.ElaborateDrops.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41110.test.ElaborateDrops.after.mir?ref=07c993eba8b76eae497e98433ae075b00f01be10", "patch": "@@ -1,101 +0,0 @@\n-// MIR for `test` after ElaborateDrops\n-\n-fn test() -> () {\n-    let mut _0: ();                      // return place in scope 0 at $DIR/issue_41110.rs:+0:15: +0:15\n-    let _1: S;                           // in scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n-    let _3: ();                          // in scope 0 at $DIR/issue_41110.rs:+3:5: +3:12\n-    let mut _4: S;                       // in scope 0 at $DIR/issue_41110.rs:+3:10: +3:11\n-    let mut _5: S;                       // in scope 0 at $DIR/issue_41110.rs:+4:9: +4:10\n-    let mut _6: bool;                    // in scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-    scope 1 {\n-        debug u => _1;                   // in scope 1 at $DIR/issue_41110.rs:+1:9: +1:10\n-        let mut _2: S;                   // in scope 1 at $DIR/issue_41110.rs:+2:9: +2:14\n-        scope 2 {\n-            debug v => _2;               // in scope 2 at $DIR/issue_41110.rs:+2:9: +2:14\n-        }\n-    }\n-\n-    bb0: {\n-        _6 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n-        StorageLive(_1);                 // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n-        _6 = const true;                 // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n-        _1 = S;                          // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n-        StorageLive(_2);                 // scope 1 at $DIR/issue_41110.rs:+2:9: +2:14\n-        _2 = S;                          // scope 1 at $DIR/issue_41110.rs:+2:17: +2:18\n-        StorageLive(_3);                 // scope 2 at $DIR/issue_41110.rs:+3:5: +3:12\n-        StorageLive(_4);                 // scope 2 at $DIR/issue_41110.rs:+3:10: +3:11\n-        _4 = move _2;                    // scope 2 at $DIR/issue_41110.rs:+3:10: +3:11\n-        _3 = std::mem::drop::<S>(move _4) -> [return: bb1, unwind: bb7]; // scope 2 at $DIR/issue_41110.rs:+3:5: +3:12\n-                                         // mir::Constant\n-                                         // + span: $DIR/issue_41110.rs:17:5: 17:9\n-                                         // + literal: Const { ty: fn(S) {std::mem::drop::<S>}, val: Value(<ZST>) }\n-    }\n-\n-    bb1: {\n-        StorageDead(_4);                 // scope 2 at $DIR/issue_41110.rs:+3:11: +3:12\n-        StorageDead(_3);                 // scope 2 at $DIR/issue_41110.rs:+3:12: +3:13\n-        StorageLive(_5);                 // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n-        _6 = const false;                // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n-        _5 = move _1;                    // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n-        goto -> bb12;                    // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n-    }\n-\n-    bb2: {\n-        goto -> bb3;                     // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n-    }\n-\n-    bb3: {\n-        StorageDead(_5);                 // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n-        _0 = const ();                   // scope 0 at $DIR/issue_41110.rs:+0:15: +5:2\n-        drop(_2) -> [return: bb4, unwind: bb9]; // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n-    }\n-\n-    bb4: {\n-        StorageDead(_2);                 // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n-        goto -> bb5;                     // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-    }\n-\n-    bb5: {\n-        _6 = const false;                // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-        StorageDead(_1);                 // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-        return;                          // scope 0 at $DIR/issue_41110.rs:+5:2: +5:2\n-    }\n-\n-    bb6 (cleanup): {\n-        goto -> bb8;                     // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n-    }\n-\n-    bb7 (cleanup): {\n-        goto -> bb8;                     // scope 2 at $DIR/issue_41110.rs:+3:11: +3:12\n-    }\n-\n-    bb8 (cleanup): {\n-        goto -> bb9;                     // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n-    }\n-\n-    bb9 (cleanup): {\n-        goto -> bb14;                    // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-    }\n-\n-    bb10 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue_41110.rs:+0:1: +5:2\n-    }\n-\n-    bb11 (cleanup): {\n-        _2 = move _5;                    // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n-        goto -> bb6;                     // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n-    }\n-\n-    bb12: {\n-        _2 = move _5;                    // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n-        goto -> bb2;                     // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n-    }\n-\n-    bb13 (cleanup): {\n-        drop(_1) -> bb10;                // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-    }\n-\n-    bb14 (cleanup): {\n-        switchInt(_6) -> [0: bb10, otherwise: bb13]; // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n-    }\n-}"}, {"sha": "d979a6a722cd50dd1335dacb5696a2b544d87222", "filename": "tests/mir-opt/issue_41110.test.ElaborateDrops.diff", "status": "added", "additions": 110, "deletions": 0, "changes": 110, "blob_url": "https://github.com/rust-lang/rust/blob/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41110.test.ElaborateDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41110.test.ElaborateDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41110.test.ElaborateDrops.diff?ref=00eec854f167c546cedd0911f4cc302a54ed0be9", "patch": "@@ -0,0 +1,110 @@\n+- // MIR for `test` before ElaborateDrops\n++ // MIR for `test` after ElaborateDrops\n+  \n+  fn test() -> () {\n+      let mut _0: ();                      // return place in scope 0 at $DIR/issue_41110.rs:+0:15: +0:15\n+      let _1: S;                           // in scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n+      let _3: ();                          // in scope 0 at $DIR/issue_41110.rs:+3:5: +3:12\n+      let mut _4: S;                       // in scope 0 at $DIR/issue_41110.rs:+3:10: +3:11\n+      let mut _5: S;                       // in scope 0 at $DIR/issue_41110.rs:+4:9: +4:10\n++     let mut _6: bool;                    // in scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n+      scope 1 {\n+          debug u => _1;                   // in scope 1 at $DIR/issue_41110.rs:+1:9: +1:10\n+          let mut _2: S;                   // in scope 1 at $DIR/issue_41110.rs:+2:9: +2:14\n+          scope 2 {\n+              debug v => _2;               // in scope 2 at $DIR/issue_41110.rs:+2:9: +2:14\n+          }\n+      }\n+  \n+      bb0: {\n++         _6 = const false;                // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n+          StorageLive(_1);                 // scope 0 at $DIR/issue_41110.rs:+1:9: +1:10\n++         _6 = const true;                 // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n+          _1 = S;                          // scope 0 at $DIR/issue_41110.rs:+1:13: +1:14\n+          StorageLive(_2);                 // scope 1 at $DIR/issue_41110.rs:+2:9: +2:14\n+          _2 = S;                          // scope 1 at $DIR/issue_41110.rs:+2:17: +2:18\n+          StorageLive(_3);                 // scope 2 at $DIR/issue_41110.rs:+3:5: +3:12\n+          StorageLive(_4);                 // scope 2 at $DIR/issue_41110.rs:+3:10: +3:11\n+          _4 = move _2;                    // scope 2 at $DIR/issue_41110.rs:+3:10: +3:11\n+          _3 = std::mem::drop::<S>(move _4) -> [return: bb1, unwind: bb7]; // scope 2 at $DIR/issue_41110.rs:+3:5: +3:12\n+                                           // mir::Constant\n+                                           // + span: $DIR/issue_41110.rs:17:5: 17:9\n+                                           // + literal: Const { ty: fn(S) {std::mem::drop::<S>}, val: Value(<ZST>) }\n+      }\n+  \n+      bb1: {\n+          StorageDead(_4);                 // scope 2 at $DIR/issue_41110.rs:+3:11: +3:12\n+          StorageDead(_3);                 // scope 2 at $DIR/issue_41110.rs:+3:12: +3:13\n+          StorageLive(_5);                 // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n++         _6 = const false;                // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n+          _5 = move _1;                    // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n+-         replace(_2 <- move _5) -> [return: bb2, unwind: bb6]; // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n++         goto -> bb12;                    // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n+      }\n+  \n+      bb2: {\n+-         drop(_5) -> [return: bb3, unwind: bb8]; // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n++         goto -> bb3;                     // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n+      }\n+  \n+      bb3: {\n+          StorageDead(_5);                 // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n+          _0 = const ();                   // scope 0 at $DIR/issue_41110.rs:+0:15: +5:2\n+          drop(_2) -> [return: bb4, unwind: bb9]; // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n+      }\n+  \n+      bb4: {\n+          StorageDead(_2);                 // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n+-         drop(_1) -> bb5;                 // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n++         goto -> bb5;                     // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n+      }\n+  \n+      bb5: {\n++         _6 = const false;                // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n+          StorageDead(_1);                 // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n+          return;                          // scope 0 at $DIR/issue_41110.rs:+5:2: +5:2\n+      }\n+  \n+      bb6 (cleanup): {\n+-         drop(_5) -> bb8;                 // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n++         goto -> bb8;                     // scope 2 at $DIR/issue_41110.rs:+4:9: +4:10\n+      }\n+  \n+      bb7 (cleanup): {\n+-         drop(_4) -> bb8;                 // scope 2 at $DIR/issue_41110.rs:+3:11: +3:12\n++         goto -> bb8;                     // scope 2 at $DIR/issue_41110.rs:+3:11: +3:12\n+      }\n+  \n+      bb8 (cleanup): {\n+-         drop(_2) -> bb9;                 // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n++         goto -> bb9;                     // scope 1 at $DIR/issue_41110.rs:+5:1: +5:2\n+      }\n+  \n+      bb9 (cleanup): {\n+-         drop(_1) -> bb10;                // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n++         goto -> bb14;                    // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n+      }\n+  \n+      bb10 (cleanup): {\n+          resume;                          // scope 0 at $DIR/issue_41110.rs:+0:1: +5:2\n++     }\n++ \n++     bb11 (cleanup): {\n++         _2 = move _5;                    // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n++         goto -> bb6;                     // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n++     }\n++ \n++     bb12: {\n++         _2 = move _5;                    // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n++         goto -> bb2;                     // scope 2 at $DIR/issue_41110.rs:+4:5: +4:6\n++     }\n++ \n++     bb13 (cleanup): {\n++         drop(_1) -> bb10;                // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n++     }\n++ \n++     bb14 (cleanup): {\n++         switchInt(_6) -> [0: bb10, otherwise: bb13]; // scope 0 at $DIR/issue_41110.rs:+5:1: +5:2\n+      }\n+  }\n+  "}, {"sha": "00504273245b1d2a9acb320e5a5929061fb6a401", "filename": "tests/mir-opt/issue_41888.main.ElaborateDrops.after.mir", "status": "removed", "additions": 0, "deletions": 152, "changes": 152, "blob_url": "https://github.com/rust-lang/rust/blob/07c993eba8b76eae497e98433ae075b00f01be10/tests%2Fmir-opt%2Fissue_41888.main.ElaborateDrops.after.mir", "raw_url": "https://github.com/rust-lang/rust/raw/07c993eba8b76eae497e98433ae075b00f01be10/tests%2Fmir-opt%2Fissue_41888.main.ElaborateDrops.after.mir", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41888.main.ElaborateDrops.after.mir?ref=07c993eba8b76eae497e98433ae075b00f01be10", "patch": "@@ -1,152 +0,0 @@\n-// MIR for `main` after ElaborateDrops\n-\n-fn main() -> () {\n-    let mut _0: ();                      // return place in scope 0 at $DIR/issue_41888.rs:+0:11: +0:11\n-    let _1: E;                           // in scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n-    let mut _2: bool;                    // in scope 0 at $DIR/issue_41888.rs:+2:8: +2:14\n-    let mut _3: E;                       // in scope 0 at $DIR/issue_41888.rs:+3:13: +3:20\n-    let mut _4: K;                       // in scope 0 at $DIR/issue_41888.rs:+3:18: +3:19\n-    let mut _5: isize;                   // in scope 0 at $DIR/issue_41888.rs:+4:16: +4:24\n-    let mut _7: bool;                    // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    let mut _8: bool;                    // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    let mut _9: bool;                    // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    let mut _10: isize;                  // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    let mut _11: isize;                  // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    scope 1 {\n-        debug e => _1;                   // in scope 1 at $DIR/issue_41888.rs:+1:9: +1:10\n-        scope 2 {\n-            debug _k => _6;              // in scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n-            let _6: K;                   // in scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n-        }\n-    }\n-\n-    bb0: {\n-        _9 = const false;                // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n-        _7 = const false;                // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n-        _8 = const false;                // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n-        StorageLive(_1);                 // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n-        StorageLive(_2);                 // scope 1 at $DIR/issue_41888.rs:+2:8: +2:14\n-        _2 = cond() -> [return: bb1, unwind: bb11]; // scope 1 at $DIR/issue_41888.rs:+2:8: +2:14\n-                                         // mir::Constant\n-                                         // + span: $DIR/issue_41888.rs:8:8: 8:12\n-                                         // + literal: Const { ty: fn() -> bool {cond}, val: Value(<ZST>) }\n-    }\n-\n-    bb1: {\n-        switchInt(move _2) -> [0: bb7, otherwise: bb2]; // scope 1 at $DIR/issue_41888.rs:+2:8: +2:14\n-    }\n-\n-    bb2: {\n-        StorageLive(_3);                 // scope 1 at $DIR/issue_41888.rs:+3:13: +3:20\n-        StorageLive(_4);                 // scope 1 at $DIR/issue_41888.rs:+3:18: +3:19\n-        _4 = K;                          // scope 1 at $DIR/issue_41888.rs:+3:18: +3:19\n-        _3 = E::F(move _4);              // scope 1 at $DIR/issue_41888.rs:+3:13: +3:20\n-        StorageDead(_4);                 // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n-        goto -> bb14;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-    }\n-\n-    bb3: {\n-        goto -> bb4;                     // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n-    }\n-\n-    bb4: {\n-        StorageDead(_3);                 // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n-        _5 = discriminant(_1);           // scope 2 at $DIR/issue_41888.rs:+4:16: +4:24\n-        switchInt(move _5) -> [0: bb5, otherwise: bb6]; // scope 2 at $DIR/issue_41888.rs:+4:16: +4:24\n-    }\n-\n-    bb5: {\n-        StorageLive(_6);                 // scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n-        _9 = const false;                // scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n-        _6 = move ((_1 as F).0: K);      // scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n-        _0 = const ();                   // scope 2 at $DIR/issue_41888.rs:+4:29: +7:10\n-        StorageDead(_6);                 // scope 1 at $DIR/issue_41888.rs:+7:9: +7:10\n-        goto -> bb8;                     // scope 1 at $DIR/issue_41888.rs:+4:9: +7:10\n-    }\n-\n-    bb6: {\n-        _0 = const ();                   // scope 1 at $DIR/issue_41888.rs:+7:10: +7:10\n-        goto -> bb8;                     // scope 1 at $DIR/issue_41888.rs:+4:9: +7:10\n-    }\n-\n-    bb7: {\n-        _0 = const ();                   // scope 1 at $DIR/issue_41888.rs:+8:6: +8:6\n-        goto -> bb8;                     // scope 1 at $DIR/issue_41888.rs:+2:5: +8:6\n-    }\n-\n-    bb8: {\n-        StorageDead(_2);                 // scope 1 at $DIR/issue_41888.rs:+8:5: +8:6\n-        goto -> bb20;                    // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb9: {\n-        _7 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        _8 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        _9 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        StorageDead(_1);                 // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        return;                          // scope 0 at $DIR/issue_41888.rs:+9:2: +9:2\n-    }\n-\n-    bb10 (cleanup): {\n-        goto -> bb11;                    // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n-    }\n-\n-    bb11 (cleanup): {\n-        goto -> bb12;                    // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb12 (cleanup): {\n-        resume;                          // scope 0 at $DIR/issue_41888.rs:+0:1: +9:2\n-    }\n-\n-    bb13 (cleanup): {\n-        _7 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        _8 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        _9 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        _1 = move _3;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        goto -> bb10;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-    }\n-\n-    bb14: {\n-        _7 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        _8 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        _9 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        _1 = move _3;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-        goto -> bb3;                     // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n-    }\n-\n-    bb15: {\n-        _7 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        goto -> bb9;                     // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb16 (cleanup): {\n-        goto -> bb12;                    // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb17: {\n-        drop(_1) -> [return: bb15, unwind: bb12]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb18 (cleanup): {\n-        drop(_1) -> bb12;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb19: {\n-        _10 = discriminant(_1);          // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        switchInt(move _10) -> [0: bb15, otherwise: bb17]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb20: {\n-        switchInt(_7) -> [0: bb15, otherwise: bb19]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb21 (cleanup): {\n-        _11 = discriminant(_1);          // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-        switchInt(move _11) -> [0: bb16, otherwise: bb18]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-\n-    bb22 (cleanup): {\n-        switchInt(_7) -> [0: bb12, otherwise: bb21]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n-    }\n-}"}, {"sha": "07740eacadf6842d229d0630b862405af80004e3", "filename": "tests/mir-opt/issue_41888.main.ElaborateDrops.diff", "status": "added", "additions": 159, "deletions": 0, "changes": 159, "blob_url": "https://github.com/rust-lang/rust/blob/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41888.main.ElaborateDrops.diff", "raw_url": "https://github.com/rust-lang/rust/raw/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41888.main.ElaborateDrops.diff", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41888.main.ElaborateDrops.diff?ref=00eec854f167c546cedd0911f4cc302a54ed0be9", "patch": "@@ -0,0 +1,159 @@\n+- // MIR for `main` before ElaborateDrops\n++ // MIR for `main` after ElaborateDrops\n+  \n+  fn main() -> () {\n+      let mut _0: ();                      // return place in scope 0 at $DIR/issue_41888.rs:+0:11: +0:11\n+      let _1: E;                           // in scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n+      let mut _2: bool;                    // in scope 0 at $DIR/issue_41888.rs:+2:8: +2:14\n+      let mut _3: E;                       // in scope 0 at $DIR/issue_41888.rs:+3:13: +3:20\n+      let mut _4: K;                       // in scope 0 at $DIR/issue_41888.rs:+3:18: +3:19\n+      let mut _5: isize;                   // in scope 0 at $DIR/issue_41888.rs:+4:16: +4:24\n++     let mut _7: bool;                    // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     let mut _8: bool;                    // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     let mut _9: bool;                    // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     let mut _10: isize;                  // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     let mut _11: isize;                  // in scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n+      scope 1 {\n+          debug e => _1;                   // in scope 1 at $DIR/issue_41888.rs:+1:9: +1:10\n+          scope 2 {\n+              debug _k => _6;              // in scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n+              let _6: K;                   // in scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n+          }\n+      }\n+  \n+      bb0: {\n++         _9 = const false;                // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n++         _7 = const false;                // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n++         _8 = const false;                // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n+          StorageLive(_1);                 // scope 0 at $DIR/issue_41888.rs:+1:9: +1:10\n+          StorageLive(_2);                 // scope 1 at $DIR/issue_41888.rs:+2:8: +2:14\n+          _2 = cond() -> [return: bb1, unwind: bb11]; // scope 1 at $DIR/issue_41888.rs:+2:8: +2:14\n+                                           // mir::Constant\n+                                           // + span: $DIR/issue_41888.rs:8:8: 8:12\n+                                           // + literal: Const { ty: fn() -> bool {cond}, val: Value(<ZST>) }\n+      }\n+  \n+      bb1: {\n+          switchInt(move _2) -> [0: bb7, otherwise: bb2]; // scope 1 at $DIR/issue_41888.rs:+2:8: +2:14\n+      }\n+  \n+      bb2: {\n+          StorageLive(_3);                 // scope 1 at $DIR/issue_41888.rs:+3:13: +3:20\n+          StorageLive(_4);                 // scope 1 at $DIR/issue_41888.rs:+3:18: +3:19\n+          _4 = K;                          // scope 1 at $DIR/issue_41888.rs:+3:18: +3:19\n+          _3 = E::F(move _4);              // scope 1 at $DIR/issue_41888.rs:+3:13: +3:20\n+          StorageDead(_4);                 // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n+-         replace(_1 <- move _3) -> [return: bb3, unwind: bb10]; // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         goto -> bb14;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n+      }\n+  \n+      bb3: {\n+-         drop(_3) -> [return: bb4, unwind: bb11]; // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n++         goto -> bb4;                     // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n+      }\n+  \n+      bb4: {\n+          StorageDead(_3);                 // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n+          _5 = discriminant(_1);           // scope 2 at $DIR/issue_41888.rs:+4:16: +4:24\n+          switchInt(move _5) -> [0: bb5, otherwise: bb6]; // scope 2 at $DIR/issue_41888.rs:+4:16: +4:24\n+      }\n+  \n+      bb5: {\n+          StorageLive(_6);                 // scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n++         _9 = const false;                // scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n+          _6 = move ((_1 as F).0: K);      // scope 2 at $DIR/issue_41888.rs:+4:21: +4:23\n+          _0 = const ();                   // scope 2 at $DIR/issue_41888.rs:+4:29: +7:10\n+          StorageDead(_6);                 // scope 1 at $DIR/issue_41888.rs:+7:9: +7:10\n+          goto -> bb8;                     // scope 1 at $DIR/issue_41888.rs:+4:9: +7:10\n+      }\n+  \n+      bb6: {\n+          _0 = const ();                   // scope 1 at $DIR/issue_41888.rs:+7:10: +7:10\n+          goto -> bb8;                     // scope 1 at $DIR/issue_41888.rs:+4:9: +7:10\n+      }\n+  \n+      bb7: {\n+          _0 = const ();                   // scope 1 at $DIR/issue_41888.rs:+8:6: +8:6\n+          goto -> bb8;                     // scope 1 at $DIR/issue_41888.rs:+2:5: +8:6\n+      }\n+  \n+      bb8: {\n+          StorageDead(_2);                 // scope 1 at $DIR/issue_41888.rs:+8:5: +8:6\n+-         drop(_1) -> bb9;                 // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         goto -> bb20;                    // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n+      }\n+  \n+      bb9: {\n++         _7 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         _8 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         _9 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n+          StorageDead(_1);                 // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n+          return;                          // scope 0 at $DIR/issue_41888.rs:+9:2: +9:2\n+      }\n+  \n+      bb10 (cleanup): {\n+-         drop(_3) -> bb11;                // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n++         goto -> bb11;                    // scope 1 at $DIR/issue_41888.rs:+3:19: +3:20\n+      }\n+  \n+      bb11 (cleanup): {\n+-         drop(_1) -> bb12;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         goto -> bb12;                    // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n+      }\n+  \n+      bb12 (cleanup): {\n+          resume;                          // scope 0 at $DIR/issue_41888.rs:+0:1: +9:2\n++     }\n++ \n++     bb13 (cleanup): {\n++         _7 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         _8 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         _9 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         _1 = move _3;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         goto -> bb10;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++     }\n++ \n++     bb14: {\n++         _7 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         _8 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         _9 = const true;                 // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         _1 = move _3;                    // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++         goto -> bb3;                     // scope 1 at $DIR/issue_41888.rs:+3:9: +3:10\n++     }\n++ \n++     bb15: {\n++         _7 = const false;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         goto -> bb9;                     // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb16 (cleanup): {\n++         goto -> bb12;                    // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb17: {\n++         drop(_1) -> [return: bb15, unwind: bb12]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb18 (cleanup): {\n++         drop(_1) -> bb12;                // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb19: {\n++         _10 = discriminant(_1);          // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         switchInt(move _10) -> [0: bb15, otherwise: bb17]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb20: {\n++         switchInt(_7) -> [0: bb15, otherwise: bb19]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb21 (cleanup): {\n++         _11 = discriminant(_1);          // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++         switchInt(move _11) -> [0: bb16, otherwise: bb18]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n++     }\n++ \n++     bb22 (cleanup): {\n++         switchInt(_7) -> [0: bb12, otherwise: bb21]; // scope 0 at $DIR/issue_41888.rs:+9:1: +9:2\n+      }\n+  }\n+  "}, {"sha": "0f10c0a1d09f1824c34a740f7d0b3ef070398de4", "filename": "tests/mir-opt/issue_41888.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41888.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00eec854f167c546cedd0911f4cc302a54ed0be9/tests%2Fmir-opt%2Fissue_41888.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fmir-opt%2Fissue_41888.rs?ref=00eec854f167c546cedd0911f4cc302a54ed0be9", "patch": "@@ -2,7 +2,7 @@\n // check that we clear the \"ADT master drop flag\" even when there are\n // no fields to be dropped.\n \n-// EMIT_MIR issue_41888.main.ElaborateDrops.after.mir\n+// EMIT_MIR issue_41888.main.ElaborateDrops.diff\n fn main() {\n     let e;\n     if cond() {"}]}