{"sha": "566377f6272b0a3b9fa65dabe1f39ee82be80d4e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU2NjM3N2Y2MjcyYjBhM2I5ZmE2NWRhYmUxZjM5ZWU4MmJlODBkNGU=", "commit": {"author": {"name": "Jeremy Stucki", "email": "stucki.jeremy@gmail.com", "date": "2019-08-21T19:19:28Z"}, "committer": {"name": "Jeremy Stucki", "email": "dev@jeremystucki.ch", "date": "2020-05-25T19:41:20Z"}, "message": "Ignore calls to 'len'", "tree": {"sha": "728804f468310b60891c9bb724792d57907ca4f9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/728804f468310b60891c9bb724792d57907ca4f9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/566377f6272b0a3b9fa65dabe1f39ee82be80d4e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqb4qJQjc+6Oz6tP6ScQbsLIGYysFAl7MH2AACgkQScQbsLIG\nYys9DA//a82gwZldp60hgleoOc7SasLVDYv08Tvo3mvOWn+KoR1Du+Nm79y+6uqI\n4lRaQ5dxrC7H2g+plbZ7aqt4o6PIezfKliiMJ9vWOwvrAgg6rhWIOxTw0RuU0jy/\nS1nq2L64SXQ35JfLXRLKyUNK+IDctzqrepD9lp4r79bpwutmb7ku0ImGAX6pkBBs\no3msBi8DJyn+bsDRrGBuX4mQszBrbfrDl6h3KNN7rIGx1Q3BoNqUu11yz0nRDdg/\n/Tn5oTge3XxwHnn2E7D/wsSzt5bqRmI6y7JqN9iYvqkm09UKlcjwl6EFo+L1nMpj\ntRpkctK1PXuruDYUXxx39Mrne8P9tN3d0dPMccP2ABhzts9a2nmtx5CmN1Uu0vFQ\nQ/MWpWu8EGGkZDIt4GXL0gMyq/Z2GWMvKirWEpu7ORPZf37pSJhPSvdqzSW7IkGg\nTMQTlI6dO1t44Xh3EQ4TsZba/HhLClqDKmFr//JqWlYJtcsnVL+QFuGFsM+kq2dQ\nn6k24fJqw2eHeeQVbeHbA0TLpcRBIRn3U7YxQJVUAMliDJJJeZEamqLKZwr3wQeX\nfpVZpSMkMx0in2skkmVKPu+aW63jI7AtF1CW89hP1u2K5FqVpBA8bC2KWL+AmyTa\nNMR4dbyy5UC83u0c4x/F1rOy7xZvA+dZjoIKv9JvfCCqfldWcLw=\n=sm24\n-----END PGP SIGNATURE-----", "payload": "tree 728804f468310b60891c9bb724792d57907ca4f9\nparent 6bd9cd99a3da53bdda4530dde9f737a843de6c91\nauthor Jeremy Stucki <stucki.jeremy@gmail.com> 1566415168 +0200\ncommitter Jeremy Stucki <dev@jeremystucki.ch> 1590435680 +0200\n\nIgnore calls to 'len'\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/566377f6272b0a3b9fa65dabe1f39ee82be80d4e", "html_url": "https://github.com/rust-lang/rust/commit/566377f6272b0a3b9fa65dabe1f39ee82be80d4e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/566377f6272b0a3b9fa65dabe1f39ee82be80d4e/comments", "author": {"login": "jeremystucki", "id": 7629727, "node_id": "MDQ6VXNlcjc2Mjk3Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/7629727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremystucki", "html_url": "https://github.com/jeremystucki", "followers_url": "https://api.github.com/users/jeremystucki/followers", "following_url": "https://api.github.com/users/jeremystucki/following{/other_user}", "gists_url": "https://api.github.com/users/jeremystucki/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremystucki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremystucki/subscriptions", "organizations_url": "https://api.github.com/users/jeremystucki/orgs", "repos_url": "https://api.github.com/users/jeremystucki/repos", "events_url": "https://api.github.com/users/jeremystucki/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremystucki/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jeremystucki", "id": 7629727, "node_id": "MDQ6VXNlcjc2Mjk3Mjc=", "avatar_url": "https://avatars.githubusercontent.com/u/7629727?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremystucki", "html_url": "https://github.com/jeremystucki", "followers_url": "https://api.github.com/users/jeremystucki/followers", "following_url": "https://api.github.com/users/jeremystucki/following{/other_user}", "gists_url": "https://api.github.com/users/jeremystucki/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremystucki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremystucki/subscriptions", "organizations_url": "https://api.github.com/users/jeremystucki/orgs", "repos_url": "https://api.github.com/users/jeremystucki/repos", "events_url": "https://api.github.com/users/jeremystucki/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremystucki/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6bd9cd99a3da53bdda4530dde9f737a843de6c91", "url": "https://api.github.com/repos/rust-lang/rust/commits/6bd9cd99a3da53bdda4530dde9f737a843de6c91", "html_url": "https://github.com/rust-lang/rust/commit/6bd9cd99a3da53bdda4530dde9f737a843de6c91"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "c82cf57a4b1f1541906ae23ab97a320ba3e75c60", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/566377f6272b0a3b9fa65dabe1f39ee82be80d4e/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/566377f6272b0a3b9fa65dabe1f39ee82be80d4e/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=566377f6272b0a3b9fa65dabe1f39ee82be80d4e", "patch": "@@ -1614,6 +1614,21 @@ fn lint_or_fun_call<'a, 'tcx>(\n         or_has_args: bool,\n         span: Span,\n     ) {\n+        if let hir::ExprKind::MethodCall(ref path, _, ref args) = &arg.node {\n+            if path.ident.as_str() == \"len\" {\n+                let ty = walk_ptrs_ty(cx.tables.expr_ty(&args[0]));\n+\n+                match ty.sty {\n+                    ty::Slice(_) | ty::Array(_, _) => return,\n+                    _ => (),\n+                }\n+\n+                if match_type(cx, ty, &paths::VEC) {\n+                    return;\n+                }\n+            }\n+        }\n+\n         // (path, fn_has_argument, methods, suffix)\n         let know_types: &[(&[_], _, &[_], _)] = &[\n             (&paths::BTREEMAP_ENTRY, false, &[\"or_insert\"], \"with\"),"}]}