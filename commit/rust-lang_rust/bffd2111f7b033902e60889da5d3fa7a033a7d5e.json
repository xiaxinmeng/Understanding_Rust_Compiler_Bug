{"sha": "bffd2111f7b033902e60889da5d3fa7a033a7d5e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJmZmQyMTExZjdiMDMzOTAyZTYwODg5ZGE1ZDNmYTdhMDMzYTdkNWU=", "commit": {"author": {"name": "Alexis Bourget", "email": "alexis.bourget@gmail.com", "date": "2020-09-18T09:09:36Z"}, "committer": {"name": "Alexis Bourget", "email": "alexis.bourget@gmail.com", "date": "2020-09-18T09:09:36Z"}, "message": "Finish moving to intra doc links for std::sync", "tree": {"sha": "67d501da19715e0534a3f59fa931c5c9a059bb7c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/67d501da19715e0534a3f59fa931c5c9a059bb7c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bffd2111f7b033902e60889da5d3fa7a033a7d5e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bffd2111f7b033902e60889da5d3fa7a033a7d5e", "html_url": "https://github.com/rust-lang/rust/commit/bffd2111f7b033902e60889da5d3fa7a033a7d5e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bffd2111f7b033902e60889da5d3fa7a033a7d5e/comments", "author": {"login": "poliorcetics", "id": 7951708, "node_id": "MDQ6VXNlcjc5NTE3MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7951708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poliorcetics", "html_url": "https://github.com/poliorcetics", "followers_url": "https://api.github.com/users/poliorcetics/followers", "following_url": "https://api.github.com/users/poliorcetics/following{/other_user}", "gists_url": "https://api.github.com/users/poliorcetics/gists{/gist_id}", "starred_url": "https://api.github.com/users/poliorcetics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poliorcetics/subscriptions", "organizations_url": "https://api.github.com/users/poliorcetics/orgs", "repos_url": "https://api.github.com/users/poliorcetics/repos", "events_url": "https://api.github.com/users/poliorcetics/events{/privacy}", "received_events_url": "https://api.github.com/users/poliorcetics/received_events", "type": "User", "site_admin": false}, "committer": {"login": "poliorcetics", "id": 7951708, "node_id": "MDQ6VXNlcjc5NTE3MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/7951708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/poliorcetics", "html_url": "https://github.com/poliorcetics", "followers_url": "https://api.github.com/users/poliorcetics/followers", "following_url": "https://api.github.com/users/poliorcetics/following{/other_user}", "gists_url": "https://api.github.com/users/poliorcetics/gists{/gist_id}", "starred_url": "https://api.github.com/users/poliorcetics/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/poliorcetics/subscriptions", "organizations_url": "https://api.github.com/users/poliorcetics/orgs", "repos_url": "https://api.github.com/users/poliorcetics/repos", "events_url": "https://api.github.com/users/poliorcetics/events{/privacy}", "received_events_url": "https://api.github.com/users/poliorcetics/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f3c923a13a458c35ee26b3513533fce8a15c9c05", "url": "https://api.github.com/repos/rust-lang/rust/commits/f3c923a13a458c35ee26b3513533fce8a15c9c05", "html_url": "https://github.com/rust-lang/rust/commit/f3c923a13a458c35ee26b3513533fce8a15c9c05"}], "stats": {"total": 85, "additions": 34, "deletions": 51}, "files": [{"sha": "b8b4baf14b4c1df163a3337e8dd6fb6bc8714287", "filename": "library/std/src/sync/barrier.rs", "status": "modified", "additions": 8, "deletions": 15, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/bffd2111f7b033902e60889da5d3fa7a033a7d5e/library%2Fstd%2Fsrc%2Fsync%2Fbarrier.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bffd2111f7b033902e60889da5d3fa7a033a7d5e/library%2Fstd%2Fsrc%2Fsync%2Fbarrier.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Fbarrier.rs?ref=bffd2111f7b033902e60889da5d3fa7a033a7d5e", "patch": "@@ -43,11 +43,8 @@ struct BarrierState {\n     generation_id: usize,\n }\n \n-/// A `BarrierWaitResult` is returned by [`wait`] when all threads in the [`Barrier`]\n-/// have rendezvoused.\n-///\n-/// [`wait`]: struct.Barrier.html#method.wait\n-/// [`Barrier`]: struct.Barrier.html\n+/// A `BarrierWaitResult` is returned by [`Barrier::wait()`] when all threads\n+/// in the [`Barrier`] have rendezvoused.\n ///\n /// # Examples\n ///\n@@ -70,10 +67,10 @@ impl fmt::Debug for Barrier {\n impl Barrier {\n     /// Creates a new barrier that can block a given number of threads.\n     ///\n-    /// A barrier will block `n`-1 threads which call [`wait`] and then wake up\n-    /// all threads at once when the `n`th thread calls [`wait`].\n+    /// A barrier will block `n`-1 threads which call [`wait()`] and then wake\n+    /// up all threads at once when the `n`th thread calls [`wait()`].\n     ///\n-    /// [`wait`]: #method.wait\n+    /// [`wait()`]: Barrier::wait\n     ///\n     /// # Examples\n     ///\n@@ -99,10 +96,7 @@ impl Barrier {\n     /// A single (arbitrary) thread will receive a [`BarrierWaitResult`] that\n     /// returns `true` from [`is_leader`] when returning from this function, and\n     /// all other threads will receive a result that will return `false` from\n-    /// [`is_leader`].\n-    ///\n-    /// [`BarrierWaitResult`]: struct.BarrierWaitResult.html\n-    /// [`is_leader`]: struct.BarrierWaitResult.html#method.is_leader\n+    /// [`BarrierWaitResult::is_leader`].\n     ///\n     /// # Examples\n     ///\n@@ -156,13 +150,12 @@ impl fmt::Debug for BarrierWaitResult {\n }\n \n impl BarrierWaitResult {\n-    /// Returns `true` if this thread from [`wait`] is the \"leader thread\".\n+    /// Returns `true` if this thread from [`Barrier::wait()`] is the\n+    /// \"leader thread\".\n     ///\n     /// Only one thread will have `true` returned from their result, all other\n     /// threads will have `false` returned.\n     ///\n-    /// [`wait`]: struct.Barrier.html#method.wait\n-    ///\n     /// # Examples\n     ///\n     /// ```"}, {"sha": "ee8902bf764bf15c6396c077f983e9feaef40cd3", "filename": "library/std/src/sync/once.rs", "status": "modified", "additions": 26, "deletions": 36, "changes": 62, "blob_url": "https://github.com/rust-lang/rust/blob/bffd2111f7b033902e60889da5d3fa7a033a7d5e/library%2Fstd%2Fsrc%2Fsync%2Fonce.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bffd2111f7b033902e60889da5d3fa7a033a7d5e/library%2Fstd%2Fsrc%2Fsync%2Fonce.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Fonce.rs?ref=bffd2111f7b033902e60889da5d3fa7a033a7d5e", "patch": "@@ -95,11 +95,9 @@ use crate::thread::{self, Thread};\n \n /// A synchronization primitive which can be used to run a one-time global\n /// initialization. Useful for one-time initialization for FFI or related\n-/// functionality. This type can only be constructed with the [`Once::new`]\n+/// functionality. This type can only be constructed with the [`Once::new()`]\n /// constructor.\n ///\n-/// [`Once::new`]: struct.Once.html#method.new\n-///\n /// # Examples\n ///\n /// ```\n@@ -126,11 +124,8 @@ unsafe impl Sync for Once {}\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n unsafe impl Send for Once {}\n \n-/// State yielded to [`call_once_force`]\u2019s closure parameter. The state can be\n-/// used to query the poison status of the [`Once`].\n-///\n-/// [`call_once_force`]: struct.Once.html#method.call_once_force\n-/// [`Once`]: struct.Once.html\n+/// State yielded to [`Once::call_once_force()`]\u2019s closure parameter. The state\n+/// can be used to query the poison status of the [`Once`].\n #[unstable(feature = \"once_poison\", issue = \"33577\")]\n #[derive(Debug)]\n pub struct OnceState {\n@@ -140,8 +135,6 @@ pub struct OnceState {\n \n /// Initialization value for static [`Once`] values.\n ///\n-/// [`Once`]: struct.Once.html\n-///\n /// # Examples\n ///\n /// ```\n@@ -212,7 +205,7 @@ impl Once {\n     /// happens-before relation between the closure and code executing after the\n     /// return).\n     ///\n-    /// If the given closure recursively invokes `call_once` on the same `Once`\n+    /// If the given closure recursively invokes `call_once` on the same [`Once`]\n     /// instance the exact behavior is not specified, allowed outcomes are\n     /// a panic or a deadlock.\n     ///\n@@ -249,7 +242,7 @@ impl Once {\n     ///\n     /// The closure `f` will only be executed once if this is called\n     /// concurrently amongst many threads. If that closure panics, however, then\n-    /// it will *poison* this `Once` instance, causing all future invocations of\n+    /// it will *poison* this [`Once`] instance, causing all future invocations of\n     /// `call_once` to also panic.\n     ///\n     /// This is similar to [poisoning with mutexes][poison].\n@@ -269,21 +262,21 @@ impl Once {\n         self.call_inner(false, &mut |_| f.take().unwrap()());\n     }\n \n-    /// Performs the same function as [`call_once`] except ignores poisoning.\n+    /// Performs the same function as [`call_once()`] except ignores poisoning.\n     ///\n-    /// Unlike [`call_once`], if this `Once` has been poisoned (i.e., a previous\n-    /// call to `call_once` or `call_once_force` caused a panic), calling\n-    /// `call_once_force` will still invoke the closure `f` and will _not_\n-    /// result in an immediate panic. If `f` panics, the `Once` will remain\n-    /// in a poison state. If `f` does _not_ panic, the `Once` will no\n-    /// longer be in a poison state and all future calls to `call_once` or\n-    /// `call_once_force` will be no-ops.\n+    /// Unlike [`call_once()`], if this [`Once`] has been poisoned (i.e., a previous\n+    /// call to [`call_once()`] or [`call_once_force()`] caused a panic), calling\n+    /// [`call_once_force()`] will still invoke the closure `f` and will _not_\n+    /// result in an immediate panic. If `f` panics, the [`Once`] will remain\n+    /// in a poison state. If `f` does _not_ panic, the [`Once`] will no\n+    /// longer be in a poison state and all future calls to [`call_once()`] or\n+    /// [`call_once_force()`] will be no-ops.\n     ///\n     /// The closure `f` is yielded a [`OnceState`] structure which can be used\n-    /// to query the poison status of the `Once`.\n+    /// to query the poison status of the [`Once`].\n     ///\n-    /// [`call_once`]: struct.Once.html#method.call_once\n-    /// [`OnceState`]: struct.OnceState.html\n+    /// [`call_once()`]: Once::call_once\n+    /// [`call_once_force()`]: Once::call_once_force\n     ///\n     /// # Examples\n     ///\n@@ -329,18 +322,20 @@ impl Once {\n         self.call_inner(true, &mut |p| f.take().unwrap()(p));\n     }\n \n-    /// Returns `true` if some `call_once` call has completed\n+    /// Returns `true` if some [`call_once()`] call has completed\n     /// successfully. Specifically, `is_completed` will return false in\n     /// the following situations:\n-    ///   * `call_once` was not called at all,\n-    ///   * `call_once` was called, but has not yet completed,\n-    ///   * the `Once` instance is poisoned\n+    ///   * [`call_once()`] was not called at all,\n+    ///   * [`call_once()`] was called, but has not yet completed,\n+    ///   * the [`Once`] instance is poisoned\n     ///\n-    /// This function returning `false` does not mean that `Once` has not been\n+    /// This function returning `false` does not mean that [`Once`] has not been\n     /// executed. For example, it may have been executed in the time between\n     /// when `is_completed` starts executing and when it returns, in which case\n     /// the `false` return value would be stale (but still permissible).\n     ///\n+    /// [`call_once()`]: Once::call_once\n+    ///\n     /// # Examples\n     ///\n     /// ```\n@@ -519,14 +514,11 @@ impl Drop for WaiterQueue<'_> {\n \n impl OnceState {\n     /// Returns `true` if the associated [`Once`] was poisoned prior to the\n-    /// invocation of the closure passed to [`call_once_force`].\n-    ///\n-    /// [`call_once_force`]: struct.Once.html#method.call_once_force\n-    /// [`Once`]: struct.Once.html\n+    /// invocation of the closure passed to [`Once::call_once_force()`].\n     ///\n     /// # Examples\n     ///\n-    /// A poisoned `Once`:\n+    /// A poisoned [`Once`]:\n     ///\n     /// ```\n     /// #![feature(once_poison)]\n@@ -547,7 +539,7 @@ impl OnceState {\n     /// });\n     /// ```\n     ///\n-    /// An unpoisoned `Once`:\n+    /// An unpoisoned [`Once`]:\n     ///\n     /// ```\n     /// #![feature(once_poison)]\n@@ -565,8 +557,6 @@ impl OnceState {\n     }\n \n     /// Poison the associated [`Once`] without explicitly panicking.\n-    ///\n-    /// [`Once`]: struct.Once.html\n     // NOTE: This is currently only exposed for the `lazy` module\n     pub(crate) fn poison(&self) {\n         self.set_state_on_drop_to.set(POISONED);"}]}