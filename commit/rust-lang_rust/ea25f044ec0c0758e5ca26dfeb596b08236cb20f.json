{"sha": "ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhMjVmMDQ0ZWMwYzA3NThlNWNhMjZkZmViNTk2YjA4MjM2Y2IyMGY=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-04-17T02:35:02Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-04-17T02:35:02Z"}, "message": "Auto merge of #3977 - phansch:add_rustfix_bool_comparison, r=flip1995\n\nAdd run-rustfix for bool_comparison lint\n\ncc #3630", "tree": {"sha": "f7b0f680fc5068c4d63ea707f37419c9ebb25aa3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7b0f680fc5068c4d63ea707f37419c9ebb25aa3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "html_url": "https://github.com/rust-lang/rust/commit/ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1936368da1321efdd29ff939797fdf6741ebb5f6", "url": "https://api.github.com/repos/rust-lang/rust/commits/1936368da1321efdd29ff939797fdf6741ebb5f6", "html_url": "https://github.com/rust-lang/rust/commit/1936368da1321efdd29ff939797fdf6741ebb5f6"}, {"sha": "90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "url": "https://api.github.com/repos/rust-lang/rust/commits/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c", "html_url": "https://github.com/rust-lang/rust/commit/90ddf0da6ce8c2aa0ebb9d8d96de4077efd5ca0c"}], "stats": {"total": 143, "additions": 129, "deletions": 14}, "files": [{"sha": "0bd73ec2c104ea437952f660de382ab687b9bd20", "filename": "tests/ui/bool_comparison.fixed", "status": "added", "additions": 113, "deletions": 0, "changes": 113, "blob_url": "https://github.com/rust-lang/rust/blob/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/tests%2Fui%2Fbool_comparison.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/tests%2Fui%2Fbool_comparison.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.fixed?ref=ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "patch": "@@ -0,0 +1,113 @@\n+// run-rustfix\n+\n+#[warn(clippy::bool_comparison)]\n+fn main() {\n+    let x = true;\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if !x {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    let y = true;\n+    if !x & y {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+    if x & !y {\n+        \"yes\"\n+    } else {\n+        \"no\"\n+    };\n+}\n+\n+#[allow(dead_code)]\n+fn issue3703() {\n+    struct Foo;\n+    impl PartialEq<bool> for Foo {\n+        fn eq(&self, _: &bool) -> bool {\n+            true\n+        }\n+    }\n+    impl PartialEq<Foo> for bool {\n+        fn eq(&self, _: &Foo) -> bool {\n+            true\n+        }\n+    }\n+    impl PartialOrd<bool> for Foo {\n+        fn partial_cmp(&self, _: &bool) -> Option<std::cmp::Ordering> {\n+            None\n+        }\n+    }\n+    impl PartialOrd<Foo> for bool {\n+        fn partial_cmp(&self, _: &Foo) -> Option<std::cmp::Ordering> {\n+            None\n+        }\n+    }\n+\n+    if Foo == true {}\n+    if true == Foo {}\n+    if Foo != true {}\n+    if true != Foo {}\n+    if Foo == false {}\n+    if false == Foo {}\n+    if Foo != false {}\n+    if false != Foo {}\n+    if Foo < false {}\n+    if false < Foo {}\n+}"}, {"sha": "74f504edfd0697054580db65500ea8b62e11c2b7", "filename": "tests/ui/bool_comparison.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/tests%2Fui%2Fbool_comparison.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/tests%2Fui%2Fbool_comparison.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.rs?ref=ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "patch": "@@ -1,3 +1,5 @@\n+// run-rustfix\n+\n #[warn(clippy::bool_comparison)]\n fn main() {\n     let x = true;"}, {"sha": "2aa070a00f30914e27a49e4a6a331343574cdb04", "filename": "tests/ui/bool_comparison.stderr", "status": "modified", "additions": 14, "deletions": 14, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/tests%2Fui%2Fbool_comparison.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ea25f044ec0c0758e5ca26dfeb596b08236cb20f/tests%2Fui%2Fbool_comparison.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fbool_comparison.stderr?ref=ea25f044ec0c0758e5ca26dfeb596b08236cb20f", "patch": "@@ -1,85 +1,85 @@\n error: equality checks against true are unnecessary\n-  --> $DIR/bool_comparison.rs:4:8\n+  --> $DIR/bool_comparison.rs:6:8\n    |\n LL |     if x == true {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n    |\n    = note: `-D clippy::bool-comparison` implied by `-D warnings`\n \n error: equality checks against false can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:9:8\n+  --> $DIR/bool_comparison.rs:11:8\n    |\n LL |     if x == false {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: equality checks against true are unnecessary\n-  --> $DIR/bool_comparison.rs:14:8\n+  --> $DIR/bool_comparison.rs:16:8\n    |\n LL |     if true == x {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: equality checks against false can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:19:8\n+  --> $DIR/bool_comparison.rs:21:8\n    |\n LL |     if false == x {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: inequality checks against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:24:8\n+  --> $DIR/bool_comparison.rs:26:8\n    |\n LL |     if x != true {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: inequality checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:29:8\n+  --> $DIR/bool_comparison.rs:31:8\n    |\n LL |     if x != false {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: inequality checks against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:34:8\n+  --> $DIR/bool_comparison.rs:36:8\n    |\n LL |     if true != x {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: inequality checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:39:8\n+  --> $DIR/bool_comparison.rs:41:8\n    |\n LL |     if false != x {\n    |        ^^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: less than comparison against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:44:8\n+  --> $DIR/bool_comparison.rs:46:8\n    |\n LL |     if x < true {\n    |        ^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: greater than checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:49:8\n+  --> $DIR/bool_comparison.rs:51:8\n    |\n LL |     if false < x {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: greater than checks against false are unnecessary\n-  --> $DIR/bool_comparison.rs:54:8\n+  --> $DIR/bool_comparison.rs:56:8\n    |\n LL |     if x > false {\n    |        ^^^^^^^^^ help: try simplifying it as shown: `x`\n \n error: less than comparison against true can be replaced by a negation\n-  --> $DIR/bool_comparison.rs:59:8\n+  --> $DIR/bool_comparison.rs:61:8\n    |\n LL |     if true > x {\n    |        ^^^^^^^^ help: try simplifying it as shown: `!x`\n \n error: order comparisons between booleans can be simplified\n-  --> $DIR/bool_comparison.rs:65:8\n+  --> $DIR/bool_comparison.rs:67:8\n    |\n LL |     if x < y {\n    |        ^^^^^ help: try simplifying it as shown: `!x & y`\n \n error: order comparisons between booleans can be simplified\n-  --> $DIR/bool_comparison.rs:70:8\n+  --> $DIR/bool_comparison.rs:72:8\n    |\n LL |     if x > y {\n    |        ^^^^^ help: try simplifying it as shown: `x & !y`"}]}