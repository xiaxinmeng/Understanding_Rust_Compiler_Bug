{"sha": "aa99bd96fdbbe00e5aa96927c5edba908095527f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhOTliZDk2ZmRiYmUwMGU1YWE5NjkyN2M1ZWRiYTkwODA5NTUyN2Y=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2017-11-27T19:16:43Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-11-27T19:16:43Z"}, "message": "Rollup merge of #46174 - stjepang:stabilize-spinloophint, r=sfackler\n\nStabilize spin_loop_hint\n\nStabilize `spin_loop_hint` in release `1.23.0`.\nI've also renamed feature `hint_core_should_pause` to `spin_loop_hint`.\n\ncc #41196", "tree": {"sha": "eda1cd008de6a39a1b4bfcce2bfdcae287673ea0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eda1cd008de6a39a1b4bfcce2bfdcae287673ea0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aa99bd96fdbbe00e5aa96927c5edba908095527f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aa99bd96fdbbe00e5aa96927c5edba908095527f", "html_url": "https://github.com/rust-lang/rust/commit/aa99bd96fdbbe00e5aa96927c5edba908095527f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aa99bd96fdbbe00e5aa96927c5edba908095527f/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f012e4405c6d5bdd2855f3e1c416bd6e75808d8", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f012e4405c6d5bdd2855f3e1c416bd6e75808d8", "html_url": "https://github.com/rust-lang/rust/commit/2f012e4405c6d5bdd2855f3e1c416bd6e75808d8"}, {"sha": "d5e8b61054018799c09d0e4c7166a6c4f198cbc5", "url": "https://api.github.com/repos/rust-lang/rust/commits/d5e8b61054018799c09d0e4c7166a6c4f198cbc5", "html_url": "https://github.com/rust-lang/rust/commit/d5e8b61054018799c09d0e4c7166a6c4f198cbc5"}], "stats": {"total": 46, "additions": 2, "deletions": 44}, "files": [{"sha": "05e057be4932df41e80dfb9c52a3538e3ba1d8c5", "filename": "src/doc/unstable-book/src/library-features/hint-core-should-pause.md", "status": "removed", "additions": 0, "deletions": 41, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/2f012e4405c6d5bdd2855f3e1c416bd6e75808d8/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fhint-core-should-pause.md", "raw_url": "https://github.com/rust-lang/rust/raw/2f012e4405c6d5bdd2855f3e1c416bd6e75808d8/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fhint-core-should-pause.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Funstable-book%2Fsrc%2Flibrary-features%2Fhint-core-should-pause.md?ref=2f012e4405c6d5bdd2855f3e1c416bd6e75808d8", "patch": "@@ -1,41 +0,0 @@\n-# `hint_core_should_pause`\n-\n-The tracking issue for this feature is: [#41196]\n-\n-[#41196]: https://github.com/rust-lang/rust/issues/41196\n-\n-------------------------\n-\n-Many programs have spin loops like the following:\n-\n-```rust,no_run\n-use std::sync::atomic::{AtomicBool,Ordering};\n-\n-fn spin_loop(value: &AtomicBool) {\n-    loop {\n-        if value.load(Ordering::Acquire) {\n-             break;\n-        }\n-    }\n-}\n-```\n-\n-These programs can be improved in performance like so:\n-\n-```rust,no_run\n-#![feature(hint_core_should_pause)]\n-use std::sync::atomic;\n-use std::sync::atomic::{AtomicBool,Ordering};\n-\n-fn spin_loop(value: &AtomicBool) {\n-    loop {\n-        if value.load(Ordering::Acquire) {\n-             break;\n-        }\n-        atomic::hint_core_should_pause();\n-    }\n-}\n-```\n-\n-Further improvements could combine `hint_core_should_pause` with\n-exponential backoff or `std::thread::yield_now`."}, {"sha": "8a261b8f07737840dcb3eb7961dd868359dddf34", "filename": "src/libcore/sync/atomic.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/aa99bd96fdbbe00e5aa96927c5edba908095527f/src%2Flibcore%2Fsync%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aa99bd96fdbbe00e5aa96927c5edba908095527f/src%2Flibcore%2Fsync%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fsync%2Fatomic.rs?ref=aa99bd96fdbbe00e5aa96927c5edba908095527f", "patch": "@@ -103,9 +103,8 @@ use fmt;\n ///\n /// On some platforms this function may not do anything at all.\n #[inline]\n-#[unstable(feature = \"hint_core_should_pause\", issue = \"41196\")]\n-pub fn hint_core_should_pause()\n-{\n+#[stable(feature = \"spin_loop_hint\", since = \"1.24.0\")]\n+pub fn spin_loop_hint() {\n     #[cfg(any(target_arch = \"x86\", target_arch = \"x86_64\"))]\n     unsafe {\n         asm!(\"pause\" ::: \"memory\" : \"volatile\");"}]}