{"sha": "a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmEyYmY5NmYxYzYwNzA5NmE3ZGZhYzgwNjVlN2JkN2EwYmU3Mjk3NGU=", "commit": {"author": {"name": "Jane Lusby", "email": "jlusby42@gmail.com", "date": "2019-06-10T22:47:31Z"}, "committer": {"name": "Jane Lusby", "email": "jlusby42@gmail.com", "date": "2019-06-12T19:29:37Z"}, "message": "make it pass dogfood", "tree": {"sha": "4ed385e0150074b031f3405d91ab997e41ea0189", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4ed385e0150074b031f3405d91ab997e41ea0189"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "html_url": "https://github.com/rust-lang/rust/commit/a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/comments", "author": {"login": "yaahc", "id": 1993852, "node_id": "MDQ6VXNlcjE5OTM4NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1993852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaahc", "html_url": "https://github.com/yaahc", "followers_url": "https://api.github.com/users/yaahc/followers", "following_url": "https://api.github.com/users/yaahc/following{/other_user}", "gists_url": "https://api.github.com/users/yaahc/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaahc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaahc/subscriptions", "organizations_url": "https://api.github.com/users/yaahc/orgs", "repos_url": "https://api.github.com/users/yaahc/repos", "events_url": "https://api.github.com/users/yaahc/events{/privacy}", "received_events_url": "https://api.github.com/users/yaahc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yaahc", "id": 1993852, "node_id": "MDQ6VXNlcjE5OTM4NTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1993852?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yaahc", "html_url": "https://github.com/yaahc", "followers_url": "https://api.github.com/users/yaahc/followers", "following_url": "https://api.github.com/users/yaahc/following{/other_user}", "gists_url": "https://api.github.com/users/yaahc/gists{/gist_id}", "starred_url": "https://api.github.com/users/yaahc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yaahc/subscriptions", "organizations_url": "https://api.github.com/users/yaahc/orgs", "repos_url": "https://api.github.com/users/yaahc/repos", "events_url": "https://api.github.com/users/yaahc/events{/privacy}", "received_events_url": "https://api.github.com/users/yaahc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "113ae891d927e4a0e4b4f79f60cd477b3a2ff8cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/113ae891d927e4a0e4b4f79f60cd477b3a2ff8cc", "html_url": "https://github.com/rust-lang/rust/commit/113ae891d927e4a0e4b4f79f60cd477b3a2ff8cc"}], "stats": {"total": 57, "additions": 29, "deletions": 28}, "files": [{"sha": "fedbb661763a8965e4f901402e698a58051a1303", "filename": "clippy_dev/src/main.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/clippy_dev%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/clippy_dev%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_dev%2Fsrc%2Fmain.rs?ref=a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "patch": "@@ -98,11 +98,11 @@ fn update_lints(update_mode: &UpdateMode) {\n         \"../src/lintlist/mod.rs\",\n         &format!(\n             \"\\\n-//! This file is managed by util/dev update_lints. Do not edit.\n+//! This file is managed by `util/dev update_lints`. Do not edit.\n \n pub mod lint;\n+pub use lint::Level;\n pub use lint::Lint;\n-pub use lint::LintLevel;\n pub use lint::LINT_LEVELS;\n \n pub const ALL_LINTS: [Lint; {}] = {:#?};\\n\","}, {"sha": "468951cd4b0d0e4e74aa27550f0e2b52d5f0cb65", "filename": "src/driver.rs", "status": "modified", "additions": 15, "deletions": 14, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/src%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/src%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdriver.rs?ref=a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "patch": "@@ -110,6 +110,7 @@ impl rustc_driver::Callbacks for ClippyCallbacks {\n     }\n }\n \n+#[allow(clippy::find_map, clippy::filter_map)]\n fn describe_lints() {\n     use lintlist::*;\n     use std::collections::HashSet;\n@@ -129,11 +130,10 @@ Available lint options:\n         LINT_LEVELS\n             .iter()\n             .find(|level_mapping| level_mapping.0 == lint.group)\n-            .map(|(_, level)| level)\n-            .map(|level| match level {\n-                LintLevel::Allow => \"allow\",\n-                LintLevel::Warn => \"warn\",\n-                LintLevel::Deny => \"deny\",\n+            .map(|(_, level)| match level {\n+                Level::Allow => \"allow\",\n+                Level::Warn => \"warn\",\n+                Level::Deny => \"deny\",\n             })\n             .unwrap()\n     };\n@@ -142,15 +142,15 @@ Available lint options:\n     // The sort doesn't case-fold but it's doubtful we care.\n     lints.sort_by_cached_key(|x: &&Lint| (lint_level(x), x.name));\n \n-    let max_name_len = lints\n+    let max_lint_name_len = lints\n         .iter()\n         .map(|lint| lint.name.len())\n         .map(|len| len + \"clippy::\".len())\n         .max()\n         .unwrap_or(0);\n \n     let padded = |x: &str| {\n-        let mut s = \" \".repeat(max_name_len - x.chars().count());\n+        let mut s = \" \".repeat(max_lint_name_len - x.chars().count());\n         s.push_str(x);\n         s\n     };\n@@ -178,8 +178,8 @@ Available lint options:\n \n     print_lints(&lints);\n \n-    let max_name_len = std::cmp::max(\n-        \"warnings\".len(),\n+    let max_group_name_len = std::cmp::max(\n+        \"all\".len(),\n         lint_groups\n             .iter()\n             .map(|group| group.len())\n@@ -188,15 +188,16 @@ Available lint options:\n             .unwrap_or(0),\n     );\n \n-    let padded = |x: &str| {\n-        let mut s = \" \".repeat(max_name_len - x.chars().count());\n+    let padded_group = |x: &str| {\n+        let mut s = \" \".repeat(max_group_name_len - x.chars().count());\n         s.push_str(x);\n         s\n     };\n \n     println!(\"Lint groups provided by clippy:\\n\");\n-    println!(\"    {}  sub-lints\", padded(\"name\"));\n-    println!(\"    {}  ---------\", padded(\"----\"));\n+    println!(\"    {}  sub-lints\", padded_group(\"name\"));\n+    println!(\"    {}  ---------\", padded_group(\"----\"));\n+    println!(\"    {}  the set of all clippy lints\", padded_group(\"clippy::all\"));\n \n     let print_lint_groups = || {\n         for group in lint_groups {\n@@ -208,7 +209,7 @@ Available lint options:\n                 .map(|name| name.replace(\"_\", \"-\"))\n                 .collect::<Vec<String>>()\n                 .join(\", \");\n-            println!(\"    {}  {}\", padded(&scoped(&name)), desc);\n+            println!(\"    {}  {}\", padded_group(&scoped(&name)), desc);\n         }\n         println!(\"\\n\");\n     };"}, {"sha": "c817d83b33aeb12df5817b1c5a2e891c3423df17", "filename": "src/lintlist/lint.rs", "status": "modified", "additions": 10, "deletions": 10, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/src%2Flintlist%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/src%2Flintlist%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Flint.rs?ref=a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "patch": "@@ -9,19 +9,19 @@ pub struct Lint {\n }\n \n #[derive(PartialOrd, PartialEq, Ord, Eq)]\n-pub enum LintLevel {\n+pub enum Level {\n     Allow,\n     Warn,\n     Deny,\n }\n \n-pub const LINT_LEVELS: [(&str, LintLevel); 8] = [\n-    (\"correctness\", LintLevel::Deny),\n-    (\"style\", LintLevel::Warn),\n-    (\"complexity\", LintLevel::Warn),\n-    (\"perf\", LintLevel::Warn),\n-    (\"restriction\", LintLevel::Allow),\n-    (\"pedantic\", LintLevel::Allow),\n-    (\"nursery\", LintLevel::Allow),\n-    (\"cargo\", LintLevel::Allow),\n+pub const LINT_LEVELS: [(&str, Level); 8] = [\n+    (\"correctness\", Level::Deny),\n+    (\"style\", Level::Warn),\n+    (\"complexity\", Level::Warn),\n+    (\"perf\", Level::Warn),\n+    (\"restriction\", Level::Allow),\n+    (\"pedantic\", Level::Allow),\n+    (\"nursery\", Level::Allow),\n+    (\"cargo\", Level::Allow),\n ];"}, {"sha": "3317ccb5ed01da506d6f894f0b3b990cd6f0583c", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a2bf96f1c607096a7dfac8065e7bd7a0be72974e/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=a2bf96f1c607096a7dfac8065e7bd7a0be72974e", "patch": "@@ -1,8 +1,8 @@\n-//! This file is managed by util/dev update_lints. Do not edit.\n+//! This file is managed by `util/dev update_lints`. Do not edit.\n \n pub mod lint;\n+pub use lint::Level;\n pub use lint::Lint;\n-pub use lint::LintLevel;\n pub use lint::LINT_LEVELS;\n \n pub const ALL_LINTS: [Lint; 304] = ["}]}