{"sha": "87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3ZWY4NmVmNWE4ZTY1N2VlMjBiZDdhNjFjNmEwY2FkZDFiMDM4YjI=", "commit": {"author": {"name": "Victor Polevoy", "email": "fx@thefx.co", "date": "2019-08-29T08:56:13Z"}, "committer": {"name": "Victor Polevoy", "email": "fx@thefx.co", "date": "2019-08-29T09:54:18Z"}, "message": "Improve cognitive_complexity lint's warning.\n\nAdds the value of complexity limit set for the lint\nto the warning.\n\nFixes #4466\n\nSigned-off-by: Victor Polevoy <fx@thefx.co>", "tree": {"sha": "82df96b302096223eeaae73d75dfc52e026f6b65", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/82df96b302096223eeaae73d75dfc52e026f6b65"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "html_url": "https://github.com/rust-lang/rust/commit/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/comments", "author": {"login": "vityafx", "id": 1146369, "node_id": "MDQ6VXNlcjExNDYzNjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1146369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vityafx", "html_url": "https://github.com/vityafx", "followers_url": "https://api.github.com/users/vityafx/followers", "following_url": "https://api.github.com/users/vityafx/following{/other_user}", "gists_url": "https://api.github.com/users/vityafx/gists{/gist_id}", "starred_url": "https://api.github.com/users/vityafx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vityafx/subscriptions", "organizations_url": "https://api.github.com/users/vityafx/orgs", "repos_url": "https://api.github.com/users/vityafx/repos", "events_url": "https://api.github.com/users/vityafx/events{/privacy}", "received_events_url": "https://api.github.com/users/vityafx/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vityafx", "id": 1146369, "node_id": "MDQ6VXNlcjExNDYzNjk=", "avatar_url": "https://avatars.githubusercontent.com/u/1146369?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vityafx", "html_url": "https://github.com/vityafx", "followers_url": "https://api.github.com/users/vityafx/followers", "following_url": "https://api.github.com/users/vityafx/following{/other_user}", "gists_url": "https://api.github.com/users/vityafx/gists{/gist_id}", "starred_url": "https://api.github.com/users/vityafx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vityafx/subscriptions", "organizations_url": "https://api.github.com/users/vityafx/orgs", "repos_url": "https://api.github.com/users/vityafx/repos", "events_url": "https://api.github.com/users/vityafx/events{/privacy}", "received_events_url": "https://api.github.com/users/vityafx/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4c8a941dafff56a2485258b85b33ba33e66f6258", "url": "https://api.github.com/repos/rust-lang/rust/commits/4c8a941dafff56a2485258b85b33ba33e66f6258", "html_url": "https://github.com/rust-lang/rust/commit/4c8a941dafff56a2485258b85b33ba33e66f6258"}], "stats": {"total": 48, "additions": 26, "deletions": 22}, "files": [{"sha": "fccec347ef008025dcdcc35a2e4fc7f4752bfb61", "filename": "clippy_lints/src/cognitive_complexity.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/clippy_lints%2Fsrc%2Fcognitive_complexity.rs", "raw_url": "https://github.com/rust-lang/rust/raw/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/clippy_lints%2Fsrc%2Fcognitive_complexity.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcognitive_complexity.rs?ref=87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "patch": "@@ -100,7 +100,11 @@ impl CognitiveComplexity {\n                     cx,\n                     COGNITIVE_COMPLEXITY,\n                     span,\n-                    &format!(\"the function has a cognitive complexity of {}\", rust_cc),\n+                    &format!(\n+                        \"the function has a cognitive complexity of ({}/{})\",\n+                        rust_cc,\n+                        self.limit.limit()\n+                    ),\n                     \"you could split it up into multiple smaller functions\",\n                 );\n             }"}, {"sha": "32a56f00c5dbcbcba5b8f501cec87f1c9f4dcc66", "filename": "tests/ui/cognitive_complexity.stderr", "status": "modified", "additions": 20, "deletions": 20, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/tests%2Fui%2Fcognitive_complexity.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/tests%2Fui%2Fcognitive_complexity.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcognitive_complexity.stderr?ref=87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "patch": "@@ -1,4 +1,4 @@\n-error: the function has a cognitive complexity of 28\n+error: the function has a cognitive complexity of (28/25)\n   --> $DIR/cognitive_complexity.rs:6:1\n    |\n LL | / fn main() {\n@@ -13,7 +13,7 @@ LL | | }\n    = note: `-D clippy::cognitive-complexity` implied by `-D warnings`\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 7\n+error: the function has a cognitive complexity of (7/0)\n   --> $DIR/cognitive_complexity.rs:91:1\n    |\n LL | / fn kaboom() {\n@@ -27,7 +27,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 1\n+error: the function has a cognitive complexity of (1/0)\n   --> $DIR/cognitive_complexity.rs:137:1\n    |\n LL | / fn lots_of_short_circuits() -> bool {\n@@ -37,7 +37,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 1\n+error: the function has a cognitive complexity of (1/0)\n   --> $DIR/cognitive_complexity.rs:142:1\n    |\n LL | / fn lots_of_short_circuits2() -> bool {\n@@ -47,7 +47,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:147:1\n    |\n LL | / fn baa() {\n@@ -61,7 +61,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:148:13\n    |\n LL |       let x = || match 99 {\n@@ -76,7 +76,7 @@ LL | |     };\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:165:1\n    |\n LL | / fn bar() {\n@@ -89,7 +89,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:184:1\n    |\n LL | / fn barr() {\n@@ -103,7 +103,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 3\n+error: the function has a cognitive complexity of (3/0)\n   --> $DIR/cognitive_complexity.rs:194:1\n    |\n LL | / fn barr2() {\n@@ -117,7 +117,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:210:1\n    |\n LL | / fn barrr() {\n@@ -131,7 +131,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 3\n+error: the function has a cognitive complexity of (3/0)\n   --> $DIR/cognitive_complexity.rs:220:1\n    |\n LL | / fn barrr2() {\n@@ -145,7 +145,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:236:1\n    |\n LL | / fn barrrr() {\n@@ -159,7 +159,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 3\n+error: the function has a cognitive complexity of (3/0)\n   --> $DIR/cognitive_complexity.rs:246:1\n    |\n LL | / fn barrrr2() {\n@@ -173,7 +173,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 2\n+error: the function has a cognitive complexity of (2/0)\n   --> $DIR/cognitive_complexity.rs:262:1\n    |\n LL | / fn cake() {\n@@ -187,7 +187,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 4\n+error: the function has a cognitive complexity of (4/0)\n   --> $DIR/cognitive_complexity.rs:272:1\n    |\n LL | / pub fn read_file(input_path: &str) -> String {\n@@ -201,7 +201,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 1\n+error: the function has a cognitive complexity of (1/0)\n   --> $DIR/cognitive_complexity.rs:303:1\n    |\n LL | / fn void(void: Void) {\n@@ -213,7 +213,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 1\n+error: the function has a cognitive complexity of (1/0)\n   --> $DIR/cognitive_complexity.rs:316:1\n    |\n LL | / fn try_() -> Result<i32, &'static str> {\n@@ -226,7 +226,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 1\n+error: the function has a cognitive complexity of (1/0)\n   --> $DIR/cognitive_complexity.rs:324:1\n    |\n LL | / fn try_again() -> Result<i32, &'static str> {\n@@ -240,7 +240,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 1\n+error: the function has a cognitive complexity of (1/0)\n   --> $DIR/cognitive_complexity.rs:340:1\n    |\n LL | / fn early() -> Result<i32, &'static str> {\n@@ -254,7 +254,7 @@ LL | | }\n    |\n    = help: you could split it up into multiple smaller functions\n \n-error: the function has a cognitive complexity of 8\n+error: the function has a cognitive complexity of (8/0)\n   --> $DIR/cognitive_complexity.rs:354:1\n    |\n LL | / fn early_ret() -> i32 {"}, {"sha": "d06066972fbcc1b5409f6f9900f2f65d5a9f863a", "filename": "tests/ui/cognitive_complexity_attr_used.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/tests%2Fui%2Fcognitive_complexity_attr_used.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2/tests%2Fui%2Fcognitive_complexity_attr_used.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcognitive_complexity_attr_used.stderr?ref=87ef86ef5a8e657ee20bd7a61c6a0cadd1b038b2", "patch": "@@ -1,4 +1,4 @@\n-error: the function has a cognitive complexity of 3\n+error: the function has a cognitive complexity of (3/0)\n   --> $DIR/cognitive_complexity_attr_used.rs:9:1\n    |\n LL | / fn kaboom() {"}]}