{"sha": "bcda724c432cd62c55e73948b1b201e72613182b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJjZGE3MjRjNDMyY2Q2MmM1NWU3Mzk0OGIxYjIwMWU3MjYxMzE4MmI=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-09-09T13:44:35Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2016-09-09T13:44:35Z"}, "message": "closures don't work yet", "tree": {"sha": "f7544145c7e1c9a87cf9af8f15203a206b141d44", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f7544145c7e1c9a87cf9af8f15203a206b141d44"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bcda724c432cd62c55e73948b1b201e72613182b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJX0rzDAAoJEFbW7qD8Z6xGyukP/R7R8Mi/35FOMh6aIb/eKN7t\nszFDzDj7n6uD+gLSAau9VgO3xgmAZddz+Alq37JXzLg3alGHUV38jVnurVSy2eKP\nUdehZ1C/Eauxio+/YjIaK+0ukj6WeVVjOyX9EY90IuOdSgh1FC0VgR6mxegrcpC5\ni8kejVERFM3Szwwg2e80L/faK8rPSbxbyE8MZBW+Jw5wapaZZZyNY9FluJBUnfdk\nW7pNN6kNNFIENHWod5VwIZlNNWcVSR/5+NH6709p67aLyDyPMH4kADX+zNMSj5rQ\nJ5vC01/ZhED96il21lgYAFBXecCnypJOBp7nejYTU1iM7fN8R8qkcLedhLuzMCrh\nKkHrHUW7zJMr9lpyCtut9jXuKFlXF6ZhuWhgj7WmTFZAXwIAwdSbARbvvLSfjQ2s\nw8Vdm4WqcRK+ZE+V6FNztvsr2DQvNZvUj0p0o2jybjnWHKMEi6EPEMIRuNWuis7l\nEUfcSlIsiIlMmGNC8bgBLRMX7BWvjF5ptAAGsmTzeQOhNnbLkeVJbhiHqKrkraEo\nv//Z50k0Dt8hzyt3u+6yEJzCns07B6o6u5HTnd2OGfCylXZIYDzHLdx1mjQiKefa\ntCHWzeHrgURQ8/B0zu7K2jCahpA5haps0A/r3nvcvr70FgBAVJ6hkEjkAGq1IxM5\nFugYgZasDb6+Wpz76Cxr\n=R2BF\n-----END PGP SIGNATURE-----", "payload": "tree f7544145c7e1c9a87cf9af8f15203a206b141d44\nparent 00c551c5f063ea40f241ed50c5de6c67de8173f9\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1473428675 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1473428675 +0200\n\nclosures don't work yet"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bcda724c432cd62c55e73948b1b201e72613182b", "html_url": "https://github.com/rust-lang/rust/commit/bcda724c432cd62c55e73948b1b201e72613182b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bcda724c432cd62c55e73948b1b201e72613182b/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00c551c5f063ea40f241ed50c5de6c67de8173f9", "url": "https://api.github.com/repos/rust-lang/rust/commits/00c551c5f063ea40f241ed50c5de6c67de8173f9", "html_url": "https://github.com/rust-lang/rust/commit/00c551c5f063ea40f241ed50c5de6c67de8173f9"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "a2686c0dbc563b51c8598791393b2d97ec3b0c36", "filename": "src/interpreter/terminator.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/bcda724c432cd62c55e73948b1b201e72613182b/src%2Finterpreter%2Fterminator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcda724c432cd62c55e73948b1b201e72613182b/src%2Finterpreter%2Fterminator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Finterpreter%2Fterminator.rs?ref=bcda724c432cd62c55e73948b1b201e72613182b", "patch": "@@ -528,8 +528,6 @@ impl<'a, 'tcx> EvalContext<'a, 'tcx> {\n             traits::VtableObject(ref data) => {\n                 let idx = self.tcx.get_vtable_index_of_object_method(data, def_id);\n                 if let Some(&mut(first_arg, ref mut first_ty)) = first_arg {\n-                    self.memory.dump(first_arg.alloc_id);\n-                    println!(\"idx: {}\", idx);\n                     let (_, vtable) = self.get_fat_ptr(first_arg);\n                     let vtable = self.memory.read_ptr(vtable)?;\n                     let idx = idx + 3;"}, {"sha": "800ded8177cb98ed9d7ade74aee2bebfcbdba451", "filename": "src/interpreter/vtable.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bcda724c432cd62c55e73948b1b201e72613182b/src%2Finterpreter%2Fvtable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcda724c432cd62c55e73948b1b201e72613182b/src%2Finterpreter%2Fvtable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Finterpreter%2Fvtable.rs?ref=bcda724c432cd62c55e73948b1b201e72613182b", "patch": "@@ -46,7 +46,14 @@ impl<'a, 'tcx> EvalContext<'a, 'tcx> {\n                         substs,\n                         nested: _ }) => {\n                     let closure_type = self.tcx.closure_type(closure_def_id, substs);\n-                    vec![Some(self.memory.create_closure_ptr(closure_def_id, substs, closure_type))].into_iter()\n+                    let fn_ty = ty::BareFnTy {\n+                        unsafety: closure_type.unsafety,\n+                        abi: closure_type.abi,\n+                        sig: closure_type.sig,\n+                    };\n+                    let fn_ty = self.tcx.mk_bare_fn(fn_ty);\n+                    unimplemented!()\n+                    //vec![Some(self.memory.create_fn_ptr(closure_def_id, substs.func_substs, fn_ty))].into_iter()\n                 }\n                 traits::VtableFnPointer(\n                     traits::VtableFnPointerData {"}, {"sha": "acef02d2bc8863624c422da621557fd2bb52dd16", "filename": "tests/run-pass/traits.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bcda724c432cd62c55e73948b1b201e72613182b/tests%2Frun-pass%2Ftraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bcda724c432cd62c55e73948b1b201e72613182b/tests%2Frun-pass%2Ftraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Ftraits.rs?ref=bcda724c432cd62c55e73948b1b201e72613182b", "patch": "@@ -13,4 +13,14 @@ impl Trait for Struct {\n fn main() {\n     let y: &Trait = &Struct(42);\n     y.method();\n+    /*\n+    let x: Box<Fn(i32) -> i32> = Box::new(|x| x * 2);\n+    assert_eq!(x(21), 42);\n+    let mut i = 5;\n+    {\n+        let mut x: Box<FnMut()> = Box::new(|| i *= 2);\n+        x(); x();\n+    }\n+    assert_eq!(i, 20);\n+    */\n }"}]}