{"sha": "085d2f1f0913890b531fde75d9300bd995dfb568", "node_id": "C_kwDOAAsO6NoAKDA4NWQyZjFmMDkxMzg5MGI1MzFmZGU3NWQ5MzAwYmQ5OTVkZmI1Njg", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-01-14T17:45:25Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-14T17:45:25Z"}, "message": "Rollup merge of #105526 - Xiretza:iter-from-generator-derive, r=scottmcm\n\nlibcore: make result of iter::from_generator Clone\n\n`@rustbot` label +A-generators", "tree": {"sha": "e4bfc4da7812db5eb31ccf20fe14e0f10b8ac179", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4bfc4da7812db5eb31ccf20fe14e0f10b8ac179"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/085d2f1f0913890b531fde75d9300bd995dfb568", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjwuo1CRBK7hj4Ov3rIwAAD+0IAHJCm5aw02tnjLB2VkKvGClf\nEz4IZqK66YoLldAh1UHyKIBdZRAZXfpioU1K89YLZCrxnjm4nbdeFHNe3dvuwEyE\ns3m0anq8yXBRKe9Po0lU12v6844xe2ALoGbvLzACgGXEbQvJq5fPKNfvZZiue6fi\n8AfgsapkFlVdZ5uigxjyYFZ4K81xyqPDn75eGO+VhnD7T2FNlkatnl8ojyF7fvMT\nqcD8CU8wV+waC39tOnGDHYicNuPao0+kz1gqE6+EvQUY+ByX8tRYdTvEBMh40Trr\nKFfYNZHB20ZjqKR+/OR5+0slYVTlY2KukGCYpf4QNA46gb3rmpKtZ+MgXoPN+D0=\n=0Vyn\n-----END PGP SIGNATURE-----\n", "payload": "tree e4bfc4da7812db5eb31ccf20fe14e0f10b8ac179\nparent 4b51adf6ffa1ae2286ea436eb48cbaa8771886e6\nparent 17a0740ebb1798ee29fc39c1ec025f0949144541\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1673718325 +0100\ncommitter GitHub <noreply@github.com> 1673718325 +0100\n\nRollup merge of #105526 - Xiretza:iter-from-generator-derive, r=scottmcm\n\nlibcore: make result of iter::from_generator Clone\n\n`@rustbot` label +A-generators\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/085d2f1f0913890b531fde75d9300bd995dfb568", "html_url": "https://github.com/rust-lang/rust/commit/085d2f1f0913890b531fde75d9300bd995dfb568", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/085d2f1f0913890b531fde75d9300bd995dfb568/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4b51adf6ffa1ae2286ea436eb48cbaa8771886e6", "url": "https://api.github.com/repos/rust-lang/rust/commits/4b51adf6ffa1ae2286ea436eb48cbaa8771886e6", "html_url": "https://github.com/rust-lang/rust/commit/4b51adf6ffa1ae2286ea436eb48cbaa8771886e6"}, {"sha": "17a0740ebb1798ee29fc39c1ec025f0949144541", "url": "https://api.github.com/repos/rust-lang/rust/commits/17a0740ebb1798ee29fc39c1ec025f0949144541", "html_url": "https://github.com/rust-lang/rust/commit/17a0740ebb1798ee29fc39c1ec025f0949144541"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "4cbe731b222f920131e999b0bd409747aa387a88", "filename": "library/core/src/iter/sources/from_generator.rs", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/085d2f1f0913890b531fde75d9300bd995dfb568/library%2Fcore%2Fsrc%2Fiter%2Fsources%2Ffrom_generator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/085d2f1f0913890b531fde75d9300bd995dfb568/library%2Fcore%2Fsrc%2Fiter%2Fsources%2Ffrom_generator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fsources%2Ffrom_generator.rs?ref=085d2f1f0913890b531fde75d9300bd995dfb568", "patch": "@@ -1,3 +1,4 @@\n+use crate::fmt;\n use crate::ops::{Generator, GeneratorState};\n use crate::pin::Pin;\n \n@@ -23,14 +24,21 @@ use crate::pin::Pin;\n /// ```\n #[inline]\n #[unstable(feature = \"iter_from_generator\", issue = \"43122\", reason = \"generators are unstable\")]\n-pub fn from_generator<G: Generator<Return = ()> + Unpin>(\n-    generator: G,\n-) -> impl Iterator<Item = G::Yield> {\n+pub fn from_generator<G: Generator<Return = ()> + Unpin>(generator: G) -> FromGenerator<G> {\n     FromGenerator(generator)\n }\n \n-struct FromGenerator<G>(G);\n+/// An iterator over the values yielded by an underlying generator.\n+///\n+/// This `struct` is created by the [`iter::from_generator()`] function. See its documentation for\n+/// more.\n+///\n+/// [`iter::from_generator()`]: from_generator\n+#[unstable(feature = \"iter_from_generator\", issue = \"43122\", reason = \"generators are unstable\")]\n+#[derive(Clone)]\n+pub struct FromGenerator<G>(G);\n \n+#[unstable(feature = \"iter_from_generator\", issue = \"43122\", reason = \"generators are unstable\")]\n impl<G: Generator<Return = ()> + Unpin> Iterator for FromGenerator<G> {\n     type Item = G::Yield;\n \n@@ -41,3 +49,10 @@ impl<G: Generator<Return = ()> + Unpin> Iterator for FromGenerator<G> {\n         }\n     }\n }\n+\n+#[unstable(feature = \"iter_from_generator\", issue = \"43122\", reason = \"generators are unstable\")]\n+impl<G> fmt::Debug for FromGenerator<G> {\n+    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {\n+        f.debug_struct(\"FromGenerator\").finish()\n+    }\n+}"}]}