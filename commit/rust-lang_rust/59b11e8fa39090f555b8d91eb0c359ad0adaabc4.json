{"sha": "59b11e8fa39090f555b8d91eb0c359ad0adaabc4", "node_id": "C_kwDOAAsO6NoAKDU5YjExZThmYTM5MDkwZjU1NWI4ZDkxZWIwYzM1OWFkMGFkYWFiYzQ", "commit": {"author": {"name": "Chris Denton", "email": "chris@chrisdenton.dev", "date": "2023-02-10T18:07:23Z"}, "committer": {"name": "Chris Denton", "email": "chris@chrisdenton.dev", "date": "2023-02-10T18:14:53Z"}, "message": "Zero the `REPARSE_MOUNTPOINT_DATA_BUFFER` header\n\nMakes sure the full header is correctly initialized, including reserve parameters.", "tree": {"sha": "6fedc9282451cf3ebd1570f68dabe09c836e8e2a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6fedc9282451cf3ebd1570f68dabe09c836e8e2a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/59b11e8fa39090f555b8d91eb0c359ad0adaabc4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE+p/jD6jrzmnSIWJLcTRy8vRWJ94FAmPmiZ4ACgkQcTRy8vRW\nJ96F9A/+L0CZNkyJhemBhYmUx3F8AvIX2NOwpPQ16TL+QKJucupYTksMk2A5dNDP\nPLCwaHDp8cNyylNs+kCRhC7pW9tLNwcye3R8K8HmjKZJfGtUTWVKBl8oRBOwXUQm\n981aMuEt4mWNaX4jvH2ue/XxgUmoB1SzibQ19ohzxwBNCWHMA7FZ14yWi29WfTxT\nhF7PXT8LhjaHjOamaMEHwWus3EfVUkuKxCuigJCxPD+yy5GVJsLPzPXrt+FK6YFi\nlx4eUAdyQTQN8HQ1EEhuWyHlVn2QqBWqBGTBvnmkWPj9loaY6nkQwSCUYdMbcH9f\nbhHBiVSbk6qRVNcy365i7bOdadelRSCSxRPj78Gwo6xV6FRy9E2HVr4Pcc+srAIp\nlRzgvyEC3WiHoVALLQ38gGyi1EogHsi2AJbCMJz5UR8JEESfW1pE7VUatc6/68LP\nHhD2C9S5wpBgyFl0Ctpk9OC5VieqfafzQw6TlPu5/PK+Nos6ZrceC9L1/iqQ1+lA\naVMmamDAqdXRnGIoWAkXkUbeoEplBi329f8XH8ROZ6hQNOb5+oZe3xkgGfOToGLl\nZXhcdWbrN4sUNOREPgl2zzJyfPizorvZZyEQiUsy3qQyQ6Yx8ly6+TS8e4UtcINS\ncaSe+k/az70B5zjZRllsui195hYcCLk3RztdjHYozifWRlMILsQ=\n=ZMIk\n-----END PGP SIGNATURE-----", "payload": "tree 6fedc9282451cf3ebd1570f68dabe09c836e8e2a\nparent d1ac43a9b9a8250d858705b0796dfed6186e18db\nauthor Chris Denton <chris@chrisdenton.dev> 1676052443 +0000\ncommitter Chris Denton <chris@chrisdenton.dev> 1676052893 +0000\n\nZero the `REPARSE_MOUNTPOINT_DATA_BUFFER` header\n\nMakes sure the full header is correctly initialized, including reserve parameters.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/59b11e8fa39090f555b8d91eb0c359ad0adaabc4", "html_url": "https://github.com/rust-lang/rust/commit/59b11e8fa39090f555b8d91eb0c359ad0adaabc4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/59b11e8fa39090f555b8d91eb0c359ad0adaabc4/comments", "author": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ChrisDenton", "id": 4459874, "node_id": "MDQ6VXNlcjQ0NTk4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4459874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ChrisDenton", "html_url": "https://github.com/ChrisDenton", "followers_url": "https://api.github.com/users/ChrisDenton/followers", "following_url": "https://api.github.com/users/ChrisDenton/following{/other_user}", "gists_url": "https://api.github.com/users/ChrisDenton/gists{/gist_id}", "starred_url": "https://api.github.com/users/ChrisDenton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ChrisDenton/subscriptions", "organizations_url": "https://api.github.com/users/ChrisDenton/orgs", "repos_url": "https://api.github.com/users/ChrisDenton/repos", "events_url": "https://api.github.com/users/ChrisDenton/events{/privacy}", "received_events_url": "https://api.github.com/users/ChrisDenton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d1ac43a9b9a8250d858705b0796dfed6186e18db", "url": "https://api.github.com/repos/rust-lang/rust/commits/d1ac43a9b9a8250d858705b0796dfed6186e18db", "html_url": "https://github.com/rust-lang/rust/commit/d1ac43a9b9a8250d858705b0796dfed6186e18db"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "f1a784b5fd2e75c96cd7b5adb3eb2e1d2fee26ed", "filename": "library/std/src/sys/windows/fs.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/59b11e8fa39090f555b8d91eb0c359ad0adaabc4/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/59b11e8fa39090f555b8d91eb0c359ad0adaabc4/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs?ref=59b11e8fa39090f555b8d91eb0c359ad0adaabc4", "patch": "@@ -1393,6 +1393,8 @@ fn symlink_junction_inner(original: &Path, junction: &Path) -> io::Result<()> {\n         let mut data = Align8([MaybeUninit::<u8>::uninit(); c::MAXIMUM_REPARSE_DATA_BUFFER_SIZE]);\n         let data_ptr = data.0.as_mut_ptr();\n         let db = data_ptr.cast::<c::REPARSE_MOUNTPOINT_DATA_BUFFER>();\n+        // Zero the header to ensure it's fully initialized, including reserved parameters.\n+        *db = mem::zeroed();\n         let buf = ptr::addr_of_mut!((*db).ReparseTarget).cast::<c::WCHAR>();\n         let mut i = 0;\n         // FIXME: this conversion is very hacky"}]}