{"sha": "4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRjYWU1MGNjY2JkNWI5Y2YzNDliYWFhOTMxNzhlZGI4YjJmZjNiMWQ=", "commit": {"author": {"name": "David Renshaw", "email": "david@sandstorm.io", "date": "2017-03-14T00:33:23Z"}, "committer": {"name": "David Renshaw", "email": "david@sandstorm.io", "date": "2017-03-14T00:33:23Z"}, "message": "add write_bytes() test for a larger-than-u128 struct", "tree": {"sha": "10735a66aa794874aaee5a085a1fdc4ebb6f0ff5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10735a66aa794874aaee5a085a1fdc4ebb6f0ff5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d", "html_url": "https://github.com/rust-lang/rust/commit/4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d/comments", "author": null, "committer": null, "parents": [{"sha": "e79ee140ee0809fc23e4d6f148fac228ca669e98", "url": "https://api.github.com/repos/rust-lang/rust/commits/e79ee140ee0809fc23e4d6f148fac228ca669e98", "html_url": "https://github.com/rust-lang/rust/commit/e79ee140ee0809fc23e4d6f148fac228ca669e98"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "7c9a38fca696dd3e9401c355cb79b5ad00233cc4", "filename": "tests/run-pass/write-bytes.rs", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d/tests%2Frun-pass%2Fwrite-bytes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d/tests%2Frun-pass%2Fwrite-bytes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fwrite-bytes.rs?ref=4cae50cccbd5b9cf349baaa93178edb8b2ff3b1d", "patch": "@@ -1,3 +1,11 @@\n+#[repr(C)]\n+#[derive(Copy, Clone)]\n+struct Foo {\n+    a: u64,\n+    b: u64,\n+    c: u64,\n+}\n+\n fn main() {\n     const LENGTH: usize = 10;\n     let mut v: [u64; LENGTH] = [0; LENGTH];\n@@ -14,4 +22,24 @@ fn main() {\n     for idx in 0..LENGTH {\n         assert_eq!(v[idx], 0xabababababababab);\n     }\n+\n+    // -----\n+\n+    let mut w: [Foo; LENGTH] = [Foo { a: 0, b: 0, c: 0 }; LENGTH];\n+    for idx in 0..LENGTH {\n+        assert_eq!(w[idx].a, 0);\n+        assert_eq!(w[idx].b, 0);\n+        assert_eq!(w[idx].c, 0);\n+    }\n+\n+    unsafe {\n+        let p = w.as_mut_ptr();\n+        ::std::ptr::write_bytes(p, 0xcd, LENGTH);\n+    }\n+\n+    for idx in 0..LENGTH {\n+        assert_eq!(w[idx].a, 0xcdcdcdcdcdcdcdcd);\n+        assert_eq!(w[idx].b, 0xcdcdcdcdcdcdcdcd);\n+        assert_eq!(w[idx].c, 0xcdcdcdcdcdcdcdcd);\n+    }\n }"}]}