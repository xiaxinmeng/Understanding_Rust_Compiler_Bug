{"sha": "3a0727e84e29318ee41eb63bac27bfc1a379bfc5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhMDcyN2U4NGUyOTMxOGVlNDFlYjYzYmFjMjdiZmMxYTM3OWJmYzU=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-04-30T22:27:24Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2020-05-07T18:08:08Z"}, "message": "Add more tests for doc aliases", "tree": {"sha": "744b09ad35251189f0827caa3ddf06b852c6bf3c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/744b09ad35251189f0827caa3ddf06b852c6bf3c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a0727e84e29318ee41eb63bac27bfc1a379bfc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a0727e84e29318ee41eb63bac27bfc1a379bfc5", "html_url": "https://github.com/rust-lang/rust/commit/3a0727e84e29318ee41eb63bac27bfc1a379bfc5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a0727e84e29318ee41eb63bac27bfc1a379bfc5/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf41b1d3a5fc5e4c209ab101b159095178dea916", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf41b1d3a5fc5e4c209ab101b159095178dea916", "html_url": "https://github.com/rust-lang/rust/commit/cf41b1d3a5fc5e4c209ab101b159095178dea916"}], "stats": {"total": 317, "additions": 317, "deletions": 0}, "files": [{"sha": "e6310b625e533deb3866c10d064b194dea3b489d", "filename": "src/test/rustdoc-js/doc-alias.js", "status": "added", "additions": 237, "deletions": 0, "changes": 237, "blob_url": "https://github.com/rust-lang/rust/blob/3a0727e84e29318ee41eb63bac27bfc1a379bfc5/src%2Ftest%2Frustdoc-js%2Fdoc-alias.js", "raw_url": "https://github.com/rust-lang/rust/raw/3a0727e84e29318ee41eb63bac27bfc1a379bfc5/src%2Ftest%2Frustdoc-js%2Fdoc-alias.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-js%2Fdoc-alias.js?ref=3a0727e84e29318ee41eb63bac27bfc1a379bfc5", "patch": "@@ -0,0 +1,237 @@\n+// exact-check\n+\n+const QUERY = [\n+    'StructItem',\n+    'StructFieldItem',\n+    'StructMethodItem',\n+    'ImplTraitItem',\n+    'ImplAssociatedConstItem',\n+    'ImplTraitFunction',\n+    'EnumItem',\n+    'VariantItem',\n+    'EnumMethodItem',\n+    'TypedefItem',\n+    'TraitItem',\n+    'TraitTypeItem',\n+    'AssociatedConstItem',\n+    'TraitFunctionItem',\n+    'FunctionItem',\n+    'ModuleItem',\n+    'ConstItem',\n+    'StaticItem',\n+    'UnionItem',\n+    'UnionFieldItem',\n+    'UnionMethodItem',\n+    'MacroItem',\n+];\n+\n+const EXPECTED = [\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Struct',\n+                'alias': 'StructItem',\n+                'href': '../doc_alias/struct.Struct.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Struct',\n+                'name': 'field',\n+                'alias': 'StructFieldItem',\n+                'href': '../doc_alias/struct.Struct.html#structfield.field'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Struct',\n+                'name': 'method',\n+                'alias': 'StructMethodItem',\n+                'href': '../doc_alias/struct.Struct.html#method.method'\n+            },\n+        ],\n+    },\n+    {\n+        // ImplTraitItem\n+        'others': [],\n+    },\n+    {\n+        // ImplAssociatedConstItem\n+        'others': [],\n+    },\n+    {\n+        // ImplTraitFunction\n+        'others': [],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Enum',\n+                'alias': 'EnumItem',\n+                'href': '../doc_alias/enum.Enum.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Enum',\n+                'name': 'Variant',\n+                'alias': 'VariantItem',\n+                'href': '../doc_alias/enum.Enum.html#variant.Variant'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Enum',\n+                'name': 'method',\n+                'alias': 'EnumMethodItem',\n+                'href': '../doc_alias/enum.Enum.html#method.method'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Typedef',\n+                'alias': 'TypedefItem',\n+                'href': '../doc_alias/type.Typedef.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Trait',\n+                'alias': 'TraitItem',\n+                'href': '../doc_alias/trait.Trait.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Trait',\n+                'name': 'Target',\n+                'alias': 'TraitTypeItem',\n+                'href': '../doc_alias/trait.Trait.html#associatedtype.Target'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Trait',\n+                'name': 'AssociatedConst',\n+                'alias': 'AssociatedConstItem',\n+                'href': '../doc_alias/trait.Trait.html#associatedconstant.AssociatedConst'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Trait',\n+                'name': 'function',\n+                'alias': 'TraitFunctionItem',\n+                'href': '../doc_alias/trait.Trait.html#tymethod.function'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'function',\n+                'alias': 'FunctionItem',\n+                'href': '../doc_alias/fn.function.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Module',\n+                'alias': 'ModuleItem',\n+                'href': '../doc_alias/Module/index.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Const',\n+                'alias': 'ConstItem',\n+                'href': '../doc_alias/constant.Const.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Static',\n+                'alias': 'StaticItem',\n+                'href': '../doc_alias/static.Static.html'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Union',\n+                'alias': 'UnionItem',\n+                'href': '../doc_alias/union.Union.html'\n+            },\n+            // Not an alias!\n+            {\n+                'path': 'doc_alias::Union',\n+                'name': 'union_item',\n+                'href': '../doc_alias/union.Union.html#structfield.union_item'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Union',\n+                'name': 'union_item',\n+                'alias': 'UnionFieldItem',\n+                'href': '../doc_alias/union.Union.html#structfield.union_item'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias::Union',\n+                'name': 'method',\n+                'alias': 'UnionMethodItem',\n+                'href': '../doc_alias/union.Union.html#method.method'\n+            },\n+        ],\n+    },\n+    {\n+        'others': [\n+            {\n+                'path': 'doc_alias',\n+                'name': 'Macro',\n+                'alias': 'MacroItem',\n+                'href': '../doc_alias/macro.Macro.html'\n+            },\n+        ],\n+    },\n+];"}, {"sha": "8cd0a829974143c3c64135d2ff193f75418a33f9", "filename": "src/test/rustdoc-js/doc-alias.rs", "status": "added", "additions": 80, "deletions": 0, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/3a0727e84e29318ee41eb63bac27bfc1a379bfc5/src%2Ftest%2Frustdoc-js%2Fdoc-alias.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a0727e84e29318ee41eb63bac27bfc1a379bfc5/src%2Ftest%2Frustdoc-js%2Fdoc-alias.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-js%2Fdoc-alias.rs?ref=3a0727e84e29318ee41eb63bac27bfc1a379bfc5", "patch": "@@ -0,0 +1,80 @@\n+#![feature(doc_alias)]\n+\n+#[doc(alias = \"StructItem\")]\n+pub struct Struct {\n+    #[doc(alias = \"StructFieldItem\")]\n+    pub field: u32,\n+}\n+\n+impl Struct {\n+    #[doc(alias = \"StructMethodItem\")]\n+    pub fn method(&self) {}\n+}\n+\n+impl Trait for Struct {\n+    // Shouldn't be listed in aliases!\n+    #[doc(alias = \"ImplTraitItem\")]\n+    type Target = u32;\n+    // Shouldn't be listed in aliases!\n+    #[doc(alias = \"ImplAssociatedConstItem\")]\n+    const AssociatedConst: i32 = 12;\n+\n+    // Shouldn't be listed in aliases!\n+    #[doc(alias = \"ImplTraitFunction\")]\n+    fn function() -> Self::Target { 0 }\n+}\n+\n+#[doc(alias = \"EnumItem\")]\n+pub enum Enum {\n+    #[doc(alias = \"VariantItem\")]\n+    Variant,\n+}\n+\n+impl Enum {\n+    #[doc(alias = \"EnumMethodItem\")]\n+    pub fn method(&self) {}\n+}\n+\n+#[doc(alias = \"TypedefItem\")]\n+pub type Typedef = i32;\n+\n+#[doc(alias = \"TraitItem\")]\n+pub trait Trait {\n+    #[doc(alias = \"TraitTypeItem\")]\n+    type Target;\n+    #[doc(alias = \"AssociatedConstItem\")]\n+    const AssociatedConst: i32;\n+\n+    #[doc(alias = \"TraitFunctionItem\")]\n+    fn function() -> Self::Target;\n+}\n+\n+#[doc(alias = \"FunctionItem\")]\n+pub fn function() {}\n+\n+#[doc(alias = \"ModuleItem\")]\n+pub mod Module {}\n+\n+#[doc(alias = \"ConstItem\")]\n+pub const Const: u32 = 0;\n+\n+#[doc(alias = \"StaticItem\")]\n+pub static Static: u32 = 0;\n+\n+#[doc(alias = \"UnionItem\")]\n+pub union Union {\n+    #[doc(alias = \"UnionFieldItem\")]\n+    pub union_item: u32,\n+    pub y: f32,\n+}\n+\n+impl Union {\n+    #[doc(alias = \"UnionMethodItem\")]\n+    pub fn method(&self) {}\n+}\n+\n+#[doc(alias = \"MacroItem\")]\n+#[macro_export]\n+macro_rules! Macro {\n+    () => {}\n+}"}]}