{"sha": "3009cb3f6bded69d83b1d5fe22b26612496e87fc", "node_id": "C_kwDOAAsO6NoAKDMwMDljYjNmNmJkZWQ2OWQ4M2IxZDVmZTIyYjI2NjEyNDk2ZTg3ZmM", "commit": {"author": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-05-12T00:58:02Z"}, "committer": {"name": "Michael Goulet", "email": "michael@errs.io", "date": "2023-05-12T00:58:06Z"}, "message": "Don't ICE in layout computation for placeholder types", "tree": {"sha": "f68424634c83be60a1c4f2a299003d2b6f0d3bfd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f68424634c83be60a1c4f2a299003d2b6f0d3bfd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3009cb3f6bded69d83b1d5fe22b26612496e87fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3009cb3f6bded69d83b1d5fe22b26612496e87fc", "html_url": "https://github.com/rust-lang/rust/commit/3009cb3f6bded69d83b1d5fe22b26612496e87fc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3009cb3f6bded69d83b1d5fe22b26612496e87fc/comments", "author": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "compiler-errors", "id": 3674314, "node_id": "MDQ6VXNlcjM2NzQzMTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/3674314?v=4", "gravatar_id": "", "url": "https://api.github.com/users/compiler-errors", "html_url": "https://github.com/compiler-errors", "followers_url": "https://api.github.com/users/compiler-errors/followers", "following_url": "https://api.github.com/users/compiler-errors/following{/other_user}", "gists_url": "https://api.github.com/users/compiler-errors/gists{/gist_id}", "starred_url": "https://api.github.com/users/compiler-errors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/compiler-errors/subscriptions", "organizations_url": "https://api.github.com/users/compiler-errors/orgs", "repos_url": "https://api.github.com/users/compiler-errors/repos", "events_url": "https://api.github.com/users/compiler-errors/events{/privacy}", "received_events_url": "https://api.github.com/users/compiler-errors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2a8221dbdfd180a2d56d4b0089f4f3952d8c2bcd", "url": "https://api.github.com/repos/rust-lang/rust/commits/2a8221dbdfd180a2d56d4b0089f4f3952d8c2bcd", "html_url": "https://github.com/rust-lang/rust/commit/2a8221dbdfd180a2d56d4b0089f4f3952d8c2bcd"}], "stats": {"total": 26, "additions": 21, "deletions": 5}, "files": [{"sha": "488d83b5f671b6e083ede5ece2e1985ca20a9cdc", "filename": "compiler/rustc_middle/src/ty/sty.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3009cb3f6bded69d83b1d5fe22b26612496e87fc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fsty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3009cb3f6bded69d83b1d5fe22b26612496e87fc/compiler%2Frustc_middle%2Fsrc%2Fty%2Fsty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fty%2Fsty.rs?ref=3009cb3f6bded69d83b1d5fe22b26612496e87fc", "patch": "@@ -2366,13 +2366,11 @@ impl<'tcx> Ty<'tcx> {\n \n             ty::Adt(def, _substs) => def.sized_constraint(tcx).0.is_empty(),\n \n-            ty::Alias(..) | ty::Param(_) => false,\n+            ty::Alias(..) | ty::Param(_) | ty::Placeholder(..) => false,\n \n             ty::Infer(ty::TyVar(_)) => false,\n \n-            ty::Bound(..)\n-            | ty::Placeholder(..)\n-            | ty::Infer(ty::FreshTy(_) | ty::FreshIntTy(_) | ty::FreshFloatTy(_)) => {\n+            ty::Bound(..) | ty::Infer(ty::FreshTy(_) | ty::FreshIntTy(_) | ty::FreshFloatTy(_)) => {\n                 bug!(\"`is_trivially_sized` applied to unexpected type: {:?}\", self)\n             }\n         }"}, {"sha": "ba42f619a5461dbb1c2fbeae7e57648444e9cb71", "filename": "tests/ui/dyn-star/check-size-at-cast-polymorphic-bad.current.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3009cb3f6bded69d83b1d5fe22b26612496e87fc/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.current.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3009cb3f6bded69d83b1d5fe22b26612496e87fc/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.current.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.current.stderr?ref=3009cb3f6bded69d83b1d5fe22b26612496e87fc", "patch": "@@ -1,5 +1,5 @@\n error[E0277]: `&T` needs to have the same ABI as a pointer\n-  --> $DIR/check-size-at-cast-polymorphic-bad.rs:11:15\n+  --> $DIR/check-size-at-cast-polymorphic-bad.rs:14:15\n    |\n LL |     dyn_debug(t);\n    |               ^ `&T` needs to be a pointer-like type", "previous_filename": "tests/ui/dyn-star/check-size-at-cast-polymorphic-bad.stderr"}, {"sha": "ba42f619a5461dbb1c2fbeae7e57648444e9cb71", "filename": "tests/ui/dyn-star/check-size-at-cast-polymorphic-bad.next.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/3009cb3f6bded69d83b1d5fe22b26612496e87fc/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.next.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3009cb3f6bded69d83b1d5fe22b26612496e87fc/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.next.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.next.stderr?ref=3009cb3f6bded69d83b1d5fe22b26612496e87fc", "patch": "@@ -0,0 +1,15 @@\n+error[E0277]: `&T` needs to have the same ABI as a pointer\n+  --> $DIR/check-size-at-cast-polymorphic-bad.rs:14:15\n+   |\n+LL |     dyn_debug(t);\n+   |               ^ `&T` needs to be a pointer-like type\n+   |\n+   = help: the trait `PointerLike` is not implemented for `&T`\n+help: consider introducing a `where` clause, but there might be an alternative better way to express this requirement\n+   |\n+LL | fn polymorphic<T: Debug + ?Sized>(t: &T) where &T: PointerLike {\n+   |                                          +++++++++++++++++++++\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0277`."}, {"sha": "9846f87142457fd21c003c635cd48b39d6f5ee74", "filename": "tests/ui/dyn-star/check-size-at-cast-polymorphic-bad.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3009cb3f6bded69d83b1d5fe22b26612496e87fc/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3009cb3f6bded69d83b1d5fe22b26612496e87fc/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fdyn-star%2Fcheck-size-at-cast-polymorphic-bad.rs?ref=3009cb3f6bded69d83b1d5fe22b26612496e87fc", "patch": "@@ -1,3 +1,6 @@\n+// revisions: current next\n+//[next] compile-flags: -Ztrait-solver=next\n+\n #![feature(dyn_star)]\n #![allow(incomplete_features)]\n "}]}