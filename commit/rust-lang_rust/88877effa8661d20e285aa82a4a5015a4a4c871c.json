{"sha": "88877effa8661d20e285aa82a4a5015a4a4c871c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg4ODc3ZWZmYTg2NjFkMjBlMjg1YWE4MmE0YTUwMTVhNGE0Yzg3MWM=", "commit": {"author": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-07-23T18:51:12Z"}, "committer": {"name": "Eric Holk", "email": "eric.holk@gmail.com", "date": "2012-07-25T19:12:25Z"}, "message": "Allow logging slices", "tree": {"sha": "bb357a5d1415e758f23ae5dcda6dee52113c8754", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bb357a5d1415e758f23ae5dcda6dee52113c8754"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/88877effa8661d20e285aa82a4a5015a4a4c871c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/88877effa8661d20e285aa82a4a5015a4a4c871c", "html_url": "https://github.com/rust-lang/rust/commit/88877effa8661d20e285aa82a4a5015a4a4c871c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/88877effa8661d20e285aa82a4a5015a4a4c871c/comments", "author": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "eholk", "id": 105766, "node_id": "MDQ6VXNlcjEwNTc2Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/105766?v=4", "gravatar_id": "", "url": "https://api.github.com/users/eholk", "html_url": "https://github.com/eholk", "followers_url": "https://api.github.com/users/eholk/followers", "following_url": "https://api.github.com/users/eholk/following{/other_user}", "gists_url": "https://api.github.com/users/eholk/gists{/gist_id}", "starred_url": "https://api.github.com/users/eholk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/eholk/subscriptions", "organizations_url": "https://api.github.com/users/eholk/orgs", "repos_url": "https://api.github.com/users/eholk/repos", "events_url": "https://api.github.com/users/eholk/events{/privacy}", "received_events_url": "https://api.github.com/users/eholk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4f29814f2a2503f9abb2ccb1e3c286dbf8e8a0d0", "url": "https://api.github.com/repos/rust-lang/rust/commits/4f29814f2a2503f9abb2ccb1e3c286dbf8e8a0d0", "html_url": "https://github.com/rust-lang/rust/commit/4f29814f2a2503f9abb2ccb1e3c286dbf8e8a0d0"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "eabaffc8995ce06b9e1609972e24bfb5d146b0d8", "filename": "src/libcore/extfmt.rs", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/88877effa8661d20e285aa82a4a5015a4a4c871c/src%2Flibcore%2Fextfmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88877effa8661d20e285aa82a4a5015a4a4c871c/src%2Flibcore%2Fextfmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fextfmt.rs?ref=88877effa8661d20e285aa82a4a5015a4a4c871c", "patch": "@@ -312,15 +312,15 @@ mod rt {\n         let mut s = str::from_char(c);\n         ret pad(cv, s, pad_nozero);\n     }\n-    fn conv_str(cv: conv, s: ~str) -> ~str {\n+    fn conv_str(cv: conv, s: &str) -> ~str {\n         // For strings, precision is the maximum characters\n         // displayed\n         let mut unpadded = alt cv.precision {\n-          count_implied { s }\n+          count_implied { s.to_unique() }\n           count_is(max) {\n             if max as uint < str::char_len(s) {\n                 str::substr(s, 0u, max as uint)\n-            } else { s }\n+            } else { s.to_unique() }\n           }\n         };\n         ret pad(cv, unpadded, pad_nozero);\n@@ -433,6 +433,14 @@ mod rt {\n     }\n }\n \n+#[cfg(test)]\n+mod test {\n+    #[test]\n+    fn fmt_slice() {\n+        let s = \"abc\";\n+        let _s = #fmt(\"%s\", s);\n+    }\n+}\n \n // Local Variables:\n // mode: rust;"}, {"sha": "e915bafafd3a9ecc93abfd0083af9810e99b15af", "filename": "src/libcore/str.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/88877effa8661d20e285aa82a4a5015a4a4c871c/src%2Flibcore%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/88877effa8661d20e285aa82a4a5015a4a4c871c/src%2Flibcore%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fstr.rs?ref=88877effa8661d20e285aa82a4a5015a4a4c871c", "patch": "@@ -1944,6 +1944,7 @@ trait str_slice {\n     fn to_upper() -> ~str;\n     fn escape_default() -> ~str;\n     fn escape_unicode() -> ~str;\n+    fn to_unique() -> ~str;\n }\n \n /// Extension methods for strings\n@@ -2050,6 +2051,9 @@ impl extensions/& of str_slice for &str {\n     /// Escape each char in `s` with char::escape_unicode.\n     #[inline]\n     fn escape_unicode() -> ~str { escape_unicode(self) }\n+\n+    #[inline]\n+    fn to_unique() -> ~str { self.slice(0, self.len()) }\n }\n \n #[cfg(test)]"}]}