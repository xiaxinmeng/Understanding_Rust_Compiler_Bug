{"sha": "55641720aa29aab8a82ff907f6ac513180337f93", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU1NjQxNzIwYWEyOWFhYjhhODJmZjkwN2Y2YWM1MTMxODAzMzdmOTM=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-07-01T15:58:51Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-07-01T16:25:25Z"}, "message": "Expand docs for recv\n\nAdd an example, plus some text that covers the buffering nature of\nchannels.\n\nFixes #26497", "tree": {"sha": "cfce98b3f8e30f7551c00b8aef4e00b99b257869", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/cfce98b3f8e30f7551c00b8aef4e00b99b257869"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/55641720aa29aab8a82ff907f6ac513180337f93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/55641720aa29aab8a82ff907f6ac513180337f93", "html_url": "https://github.com/rust-lang/rust/commit/55641720aa29aab8a82ff907f6ac513180337f93", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/55641720aa29aab8a82ff907f6ac513180337f93/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a9e26b5ced41a3b3a18036c5ba6d44d067a34057", "url": "https://api.github.com/repos/rust-lang/rust/commits/a9e26b5ced41a3b3a18036c5ba6d44d067a34057", "html_url": "https://github.com/rust-lang/rust/commit/a9e26b5ced41a3b3a18036c5ba6d44d067a34057"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "1453c91fd4d1d019a92890faaaa5552b6a1f41a6", "filename": "src/libstd/sync/mpsc/mod.rs", "status": "modified", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/rust-lang/rust/blob/55641720aa29aab8a82ff907f6ac513180337f93/src%2Flibstd%2Fsync%2Fmpsc%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/55641720aa29aab8a82ff907f6ac513180337f93/src%2Flibstd%2Fsync%2Fmpsc%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsync%2Fmpsc%2Fmod.rs?ref=55641720aa29aab8a82ff907f6ac513180337f93", "patch": "@@ -768,6 +768,48 @@ impl<T> Receiver<T> {\n     /// If the corresponding `Sender` has disconnected, or it disconnects while\n     /// this call is blocking, this call will wake up and return `Err` to\n     /// indicate that no more messages can ever be received on this channel.\n+    /// However, since channels are buffered, messages sent before the disconnect\n+    /// will still be properly received.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```\n+    /// use std::sync::mpsc;\n+    /// use std::thread;\n+    ///\n+    /// let (send, recv) = mpsc::channel();\n+    /// let handle = thread::spawn(move || {\n+    ///     send.send(1u8).unwrap();\n+    /// });\n+    ///\n+    /// handle.join().unwrap();\n+    ///\n+    /// assert_eq!(Ok(1), recv.recv());\n+    /// ```\n+    ///\n+    /// Buffering behavior:\n+    ///\n+    /// ```\n+    /// use std::sync::mpsc;\n+    /// use std::thread;\n+    /// use std::sync::mpsc::RecvError;\n+    ///\n+    /// let (send, recv) = mpsc::channel();\n+    /// let handle = thread::spawn(move || {\n+    ///     send.send(1u8).unwrap();\n+    ///     send.send(2).unwrap();\n+    ///     send.send(3).unwrap();\n+    ///     drop(send);\n+    /// });\n+    ///\n+    /// // wait for the thread to join so we ensure the sender is dropped\n+    /// handle.join().unwrap();\n+    ///\n+    /// assert_eq!(Ok(1), recv.recv());\n+    /// assert_eq!(Ok(2), recv.recv());\n+    /// assert_eq!(Ok(3), recv.recv());\n+    /// assert_eq!(Err(RecvError), recv.recv());\n+    /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     pub fn recv(&self) -> Result<T, RecvError> {\n         loop {"}]}