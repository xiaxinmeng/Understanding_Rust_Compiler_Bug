{"sha": "49fb43f293fa933871f52be7189905adbe9ff53c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5ZmI0M2YyOTNmYTkzMzg3MWY1MmJlNzE4OTkwNWFkYmU5ZmY1M2M=", "commit": {"author": {"name": "David Renshaw", "email": "david@sandstorm.io", "date": "2017-06-06T14:29:53Z"}, "committer": {"name": "David Renshaw", "email": "david@sandstorm.io", "date": "2017-06-06T14:29:53Z"}, "message": "use type_align() and type_size() instaed of size_and_align_of_dst()", "tree": {"sha": "b220132e63f6e96862ed0c193693b1f5ff9a70b5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b220132e63f6e96862ed0c193693b1f5ff9a70b5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49fb43f293fa933871f52be7189905adbe9ff53c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49fb43f293fa933871f52be7189905adbe9ff53c", "html_url": "https://github.com/rust-lang/rust/commit/49fb43f293fa933871f52be7189905adbe9ff53c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49fb43f293fa933871f52be7189905adbe9ff53c/comments", "author": null, "committer": null, "parents": [{"sha": "c8be312933c375a76a021a947330f1024dc83b9a", "url": "https://api.github.com/repos/rust-lang/rust/commits/c8be312933c375a76a021a947330f1024dc83b9a", "html_url": "https://github.com/rust-lang/rust/commit/c8be312933c375a76a021a947330f1024dc83b9a"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "696381b1c0c09da23e221680d76a7ee32b697af7", "filename": "src/terminator/intrinsic.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/49fb43f293fa933871f52be7189905adbe9ff53c/src%2Fterminator%2Fintrinsic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49fb43f293fa933871f52be7189905adbe9ff53c/src%2Fterminator%2Fintrinsic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fterminator%2Fintrinsic.rs?ref=49fb43f293fa933871f52be7189905adbe9ff53c", "patch": "@@ -385,8 +385,9 @@ impl<'a, 'tcx> EvalContext<'a, 'tcx> {\n             \"transmute\" => {\n                 let src_ty = substs.type_at(0);\n                 let dest_ty = substs.type_at(1);\n-                let (_, src_align) = self.size_and_align_of_dst(src_ty, arg_vals[0])?;\n-                let (size, dest_align) = self.size_and_align_of_dst(dest_ty, arg_vals[0])?;\n+                let src_align = self.type_align(src_ty)?;\n+                let dest_align = self.type_align(dest_ty)?;\n+                let size = self.type_size(dest_ty)?.expect(\"transmute() type must be sized\");\n                 if dest_align < src_align {\n                     let ptr = self.force_allocation(dest)?.to_ptr();\n                     self.memory.mark_packed(ptr, size);"}]}