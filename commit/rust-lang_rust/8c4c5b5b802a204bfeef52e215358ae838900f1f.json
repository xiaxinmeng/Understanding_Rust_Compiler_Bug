{"sha": "8c4c5b5b802a204bfeef52e215358ae838900f1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjNGM1YjViODAyYTIwNGJmZWVmNTJlMjE1MzU4YWU4Mzg5MDBmMWY=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-02-17T13:27:54Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2018-02-17T13:27:54Z"}, "message": "Merge #53\n\n53: More correct path type r=matklad a=matklad\n\nbors r+", "tree": {"sha": "8dfe6cab5e91be9d6acaf91aee767b19ec93d3c9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8dfe6cab5e91be9d6acaf91aee767b19ec93d3c9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c4c5b5b802a204bfeef52e215358ae838900f1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c4c5b5b802a204bfeef52e215358ae838900f1f", "html_url": "https://github.com/rust-lang/rust/commit/8c4c5b5b802a204bfeef52e215358ae838900f1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c4c5b5b802a204bfeef52e215358ae838900f1f/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "94681450f82c7cf6b034548aebd0cc0279fd09ad", "url": "https://api.github.com/repos/rust-lang/rust/commits/94681450f82c7cf6b034548aebd0cc0279fd09ad", "html_url": "https://github.com/rust-lang/rust/commit/94681450f82c7cf6b034548aebd0cc0279fd09ad"}, {"sha": "1c4e05ec2f177dd82c85b015f611650430b2f020", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c4e05ec2f177dd82c85b015f611650430b2f020", "html_url": "https://github.com/rust-lang/rust/commit/1c4e05ec2f177dd82c85b015f611650430b2f020"}], "stats": {"total": 83, "additions": 81, "deletions": 2}, "files": [{"sha": "bcdc3ef9716f402848ac8d671e087575b0f01739", "filename": "src/parser/grammar/types.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8c4c5b5b802a204bfeef52e215358ae838900f1f/src%2Fparser%2Fgrammar%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c4c5b5b802a204bfeef52e215358ae838900f1f/src%2Fparser%2Fgrammar%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fparser%2Fgrammar%2Ftypes.rs?ref=8c4c5b5b802a204bfeef52e215358ae838900f1f", "patch": "@@ -10,7 +10,7 @@ pub(super) fn type_(p: &mut Parser) {\n         UNDERSCORE => placeholder_type(p),\n         FN_KW | UNSAFE_KW | EXTERN_KW => fn_pointer_type(p),\n         FOR_KW => for_type(p),\n-        IDENT => path_type(p),\n+        _ if paths::is_path_start(p) => path_type(p),\n         _ => {\n             p.error(\"expected type\");\n         }\n@@ -178,8 +178,13 @@ fn for_type(p: &mut Parser) {\n     m.complete(p, FOR_TYPE);\n }\n \n+// test path_type\n+// type A = Foo;\n+// type B = ::Foo;\n+// type C = self::Foo;\n+// type D = super::Foo;\n fn path_type(p: &mut Parser) {\n-    assert!(p.at(IDENT));\n+    assert!(paths::is_path_start(p));\n     let m = p.start();\n     paths::type_path(p);\n     m.complete(p, PATH_TYPE);"}, {"sha": "bf94f32e1968ab1e3349832e771798c286da260f", "filename": "tests/data/parser/inline/0032_path_type.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8c4c5b5b802a204bfeef52e215358ae838900f1f/tests%2Fdata%2Fparser%2Finline%2F0032_path_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c4c5b5b802a204bfeef52e215358ae838900f1f/tests%2Fdata%2Fparser%2Finline%2F0032_path_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0032_path_type.rs?ref=8c4c5b5b802a204bfeef52e215358ae838900f1f", "patch": "@@ -0,0 +1,4 @@\n+type A = Foo;\n+type B = ::Foo;\n+type C = self::Foo;\n+type D = super::Foo;"}, {"sha": "1441b8c1387366ffa5fe62d64d62c4a29c216546", "filename": "tests/data/parser/inline/0032_path_type.txt", "status": "added", "additions": 70, "deletions": 0, "changes": 70, "blob_url": "https://github.com/rust-lang/rust/blob/8c4c5b5b802a204bfeef52e215358ae838900f1f/tests%2Fdata%2Fparser%2Finline%2F0032_path_type.txt", "raw_url": "https://github.com/rust-lang/rust/raw/8c4c5b5b802a204bfeef52e215358ae838900f1f/tests%2Fdata%2Fparser%2Finline%2F0032_path_type.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Fparser%2Finline%2F0032_path_type.txt?ref=8c4c5b5b802a204bfeef52e215358ae838900f1f", "patch": "@@ -0,0 +1,70 @@\n+FILE@[0; 71)\n+  TYPE_ITEM@[0; 14)\n+    TYPE_KW@[0; 4)\n+    NAME@[4; 7)\n+      WHITESPACE@[4; 5)\n+      IDENT@[5; 6) \"A\"\n+      WHITESPACE@[6; 7)\n+    EQ@[7; 8)\n+    PATH_TYPE@[8; 12)\n+      PATH@[8; 12)\n+        PATH_SEGMENT@[8; 12)\n+          NAME_REF@[8; 12)\n+            WHITESPACE@[8; 9)\n+            IDENT@[9; 12) \"Foo\"\n+    SEMI@[12; 13)\n+    WHITESPACE@[13; 14)\n+  TYPE_ITEM@[14; 30)\n+    TYPE_KW@[14; 18)\n+    NAME@[18; 21)\n+      WHITESPACE@[18; 19)\n+      IDENT@[19; 20) \"B\"\n+      WHITESPACE@[20; 21)\n+    EQ@[21; 22)\n+    PATH_TYPE@[22; 28)\n+      PATH@[22; 28)\n+        PATH_SEGMENT@[22; 28)\n+          WHITESPACE@[22; 23)\n+          COLONCOLON@[23; 25)\n+          NAME_REF@[25; 28)\n+            IDENT@[25; 28) \"Foo\"\n+    SEMI@[28; 29)\n+    WHITESPACE@[29; 30)\n+  TYPE_ITEM@[30; 50)\n+    TYPE_KW@[30; 34)\n+    NAME@[34; 37)\n+      WHITESPACE@[34; 35)\n+      IDENT@[35; 36) \"C\"\n+      WHITESPACE@[36; 37)\n+    EQ@[37; 38)\n+    PATH_TYPE@[38; 48)\n+      PATH@[38; 48)\n+        PATH@[38; 43)\n+          PATH_SEGMENT@[38; 43)\n+            WHITESPACE@[38; 39)\n+            SELF_KW@[39; 43)\n+        COLONCOLON@[43; 45)\n+        PATH_SEGMENT@[45; 48)\n+          NAME_REF@[45; 48)\n+            IDENT@[45; 48) \"Foo\"\n+    SEMI@[48; 49)\n+    WHITESPACE@[49; 50)\n+  TYPE_ITEM@[50; 71)\n+    TYPE_KW@[50; 54)\n+    NAME@[54; 57)\n+      WHITESPACE@[54; 55)\n+      IDENT@[55; 56) \"D\"\n+      WHITESPACE@[56; 57)\n+    EQ@[57; 58)\n+    PATH_TYPE@[58; 69)\n+      PATH@[58; 69)\n+        PATH@[58; 64)\n+          PATH_SEGMENT@[58; 64)\n+            WHITESPACE@[58; 59)\n+            SUPER_KW@[59; 64)\n+        COLONCOLON@[64; 66)\n+        PATH_SEGMENT@[66; 69)\n+          NAME_REF@[66; 69)\n+            IDENT@[66; 69) \"Foo\"\n+    SEMI@[69; 70)\n+    WHITESPACE@[70; 71)"}]}