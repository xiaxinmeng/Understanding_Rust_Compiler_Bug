{"sha": "ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhNjY4MTMwMGU5ZDdhMTAzNzljOWZiYmY1MzlmNGYzMjYxZmRjNmE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-08-26T11:11:57Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2019-08-26T11:11:57Z"}, "message": "Auto merge of #4436 - BO41:written_as, r=phansch\n\nAdd some \"could be written as\" examples\n\nfixes #4405\nchangelog: none", "tree": {"sha": "4aa1104a4415e83b0098f3dbc02812aec364164a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4aa1104a4415e83b0098f3dbc02812aec364164a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "html_url": "https://github.com/rust-lang/rust/commit/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8e5e6f3c204877da9c7eaef0d956514f2c8f6d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8e5e6f3c204877da9c7eaef0d956514f2c8f6d2", "html_url": "https://github.com/rust-lang/rust/commit/b8e5e6f3c204877da9c7eaef0d956514f2c8f6d2"}, {"sha": "31a6ab47e1e877eef79c3c7bbbffc439a287add6", "url": "https://api.github.com/repos/rust-lang/rust/commits/31a6ab47e1e877eef79c3c7bbbffc439a287add6", "html_url": "https://github.com/rust-lang/rust/commit/31a6ab47e1e877eef79c3c7bbbffc439a287add6"}], "stats": {"total": 58, "additions": 57, "deletions": 1}, "files": [{"sha": "0ad7c26f84926eac2e392735e1313ed455c62dd2", "filename": "clippy_lints/src/loops.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Floops.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Floops.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Floops.rs?ref=ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "patch": "@@ -312,6 +312,14 @@ declare_clippy_lint! {\n     /// for i in 0..v.len() { foo(v[i]); }\n     /// for i in 0..v.len() { bar(i, v[i]); }\n     /// ```\n+    /// Could be written as\n+    /// ```rust\n+    /// # let v = vec![1];\n+    /// # fn foo(bar: usize) {}\n+    /// # fn bar(bar: usize, baz: usize) {}\n+    /// for item in &v { foo(*item); }\n+    /// for (i, item) in v.iter().enumerate() { bar(i, *item); }\n+    /// ```\n     pub EXPLICIT_COUNTER_LOOP,\n     complexity,\n     \"for-looping with an explicit counter when `_.enumerate()` would do\""}, {"sha": "dc468e072e58af97aabebbe60a66a7aa3fbd349e", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 20, "deletions": 1, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "patch": "@@ -302,6 +302,11 @@ declare_clippy_lint! {\n     /// # let vec = vec![1];\n     /// vec.iter().filter(|x| **x == 0).next();\n     /// ```\n+    /// Could be written as\n+    /// ```rust\n+    /// # let vec = vec![1];\n+    /// vec.iter().find(|x| **x == 0);\n+    /// ```\n     pub FILTER_NEXT,\n     complexity,\n     \"using `filter(p).next()`, which is more succinctly expressed as `.find(p)`\"\n@@ -425,6 +430,11 @@ declare_clippy_lint! {\n     /// # let vec = vec![1];\n     /// vec.iter().find(|x| **x == 0).is_some();\n     /// ```\n+    /// Could be written as\n+    /// ```rust\n+    /// # let vec = vec![1];\n+    /// vec.iter().any(|x| *x == 0);\n+    /// ```\n     pub SEARCH_IS_SOME,\n     complexity,\n     \"using an iterator search followed by `is_some()`, which is more succinctly expressed as a call to `any()`\"\n@@ -442,7 +452,12 @@ declare_clippy_lint! {\n     /// **Example:**\n     /// ```rust\n     /// let name = \"foo\";\n-    /// name.chars().next() == Some('_');\n+    /// if name.chars().next() == Some('_') {};\n+    /// ```\n+    /// Could be written as\n+    /// ```rust\n+    /// let name = \"foo\";\n+    /// if name.starts_with('_') {};\n     /// ```\n     pub CHARS_NEXT_CMP,\n     complexity,\n@@ -889,6 +904,10 @@ declare_clippy_lint! {\n     /// ```rust\n     /// let _ = [1, 2, 3].into_iter().map(|x| *x).collect::<Vec<u32>>();\n     /// ```\n+    /// Could be written as:\n+    /// ```rust\n+    /// let _ = [1, 2, 3].iter().map(|x| *x).collect::<Vec<u32>>();\n+    /// ```\n     pub INTO_ITER_ON_ARRAY,\n     correctness,\n     \"using `.into_iter()` on an array\""}, {"sha": "b9c05bb2bd3342391537dc335f3ab2b7cd047684", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "patch": "@@ -105,6 +105,12 @@ declare_clippy_lint! {\n     /// # let y = String::from(\"foo\");\n     /// if x.to_owned() == y {}\n     /// ```\n+    /// Could be written as\n+    /// ```rust\n+    /// # let x = \"foo\";\n+    /// # let y = String::from(\"foo\");\n+    /// if x == y {}\n+    /// ```\n     pub CMP_OWNED,\n     perf,\n     \"creating owned instances for comparing with others, e.g., `x == \\\"foo\\\".to_string()`\""}, {"sha": "b761457f64ce23e035ea042c9dab34085e11e5bb", "filename": "clippy_lints/src/needless_bool.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fneedless_bool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fneedless_bool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_bool.rs?ref=ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "patch": "@@ -31,6 +31,10 @@ declare_clippy_lint! {\n     ///     true\n     /// }\n     /// ```\n+    /// Could be written as\n+    /// ```rust,ignore\n+    /// !x\n+    /// ```\n     pub NEEDLESS_BOOL,\n     complexity,\n     \"if-statements with plain booleans in the then- and else-clause, e.g., `if p { true } else { false }`\""}, {"sha": "804f86a9a9649830907db947582683290ad6dd1e", "filename": "clippy_lints/src/ranges.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Franges.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Franges.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Franges.rs?ref=ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "patch": "@@ -43,6 +43,11 @@ declare_clippy_lint! {\n     /// # let x = vec![1];\n     /// x.iter().zip(0..x.len());\n     /// ```\n+    /// Could be written as\n+    /// ```rust\n+    /// # let x = vec![1];\n+    /// x.iter().enumerate();\n+    /// ```\n     pub RANGE_ZIP_WITH_LEN,\n     complexity,\n     \"zipping iterator with a range when `enumerate()` would do\"\n@@ -64,6 +69,10 @@ declare_clippy_lint! {\n     /// ```rust,ignore\n     /// for x..(y+1) { .. }\n     /// ```\n+    /// Could be written as\n+    /// ```rust,ignore\n+    /// for x..=y { .. }\n+    /// ```\n     pub RANGE_PLUS_ONE,\n     complexity,\n     \"`x..(y+1)` reads better as `x..=y`\"\n@@ -82,6 +91,10 @@ declare_clippy_lint! {\n     /// ```rust,ignore\n     /// for x..=(y-1) { .. }\n     /// ```\n+    /// Could be written as\n+    /// ```rust,ignore\n+    /// for x..y { .. }\n+    /// ```\n     pub RANGE_MINUS_ONE,\n     complexity,\n     \"`x..=(y-1)` reads better as `x..y`\""}, {"sha": "80c9a33c06a807bdac2915c31a8a94350b9918db", "filename": "clippy_lints/src/swap.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fswap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba6681300e9d7a10379c9fbbf539f4f3261fdc6a/clippy_lints%2Fsrc%2Fswap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fswap.rs?ref=ba6681300e9d7a10379c9fbbf539f4f3261fdc6a", "patch": "@@ -52,6 +52,12 @@ declare_clippy_lint! {\n     /// a = b;\n     /// b = a;\n     /// ```\n+    /// Could be written as:\n+    /// ```rust\n+    /// # let mut a = 1;\n+    /// # let mut b = 2;\n+    /// std::mem::swap(&mut a, &mut b);\n+    /// ```\n     pub ALMOST_SWAPPED,\n     correctness,\n     \"`foo = bar; bar = foo` sequence\""}]}