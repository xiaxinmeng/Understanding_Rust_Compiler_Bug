{"sha": "fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "node_id": "C_kwDOAAsO6NoAKGZhMTFjOWU4Y2E0ZThiZjZkMWU3ZDkxNmJiN2MwZGE5MzRkM2RlZDM", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-05-20T06:50:59Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-05-20T06:50:59Z"}, "message": "Rollup merge of #111606 - jyn514:nightly-diagnostics, r=lcnr\n\nvery minor cleanups\n\n- add `must_use` to `early_error_no_abort`\n\n  this was already being used at its only callsite, but this ensures that new code remembers to use it if it's called in the future. found this while investigating https://github.com/rust-lang/rust/issues/110090.\n\n- remove outdated and incorrect comment in `builder.rs`. `doc_rust_lang_org_channel` doesn't exist in rustdoc, it gets it from an env var instead: https://github.com/rust-lang/rust/blob/b275d2c30b6e88cc48747f349f7137076d450658/src/librustdoc/clean/utils.rs#L569-L573", "tree": {"sha": "f2c873ba1aae2db17d37239a7bab125bd0488b0e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2c873ba1aae2db17d37239a7bab125bd0488b0e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkaG3TCRBK7hj4Ov3rIwAAkpkIACbynjVNpSth39pe2tKEY6wL\nvFNz47RmtGC2FahIeUxdRGJI1qod3GqoG6bvYZ8sqt1ZeKSvhuQDTtumoZJTDasp\nc8cwZdlvTDdySNlvO3DEeu93hD0u+JTHeYXI5TYcgvGo/pwEFChVnJE3FEiLJcxg\n8FS2BhX/vjWp8vflLftcatQX2L/XsI5mzbV2W1UVNc4LlCOCKJRRT8yLX5f7GNyH\nNy8KLHSeu1kF1UgPFPkbTAPKpFnKKKpCnRfHKucYeBE/EaRpnPPh7bLChg3J/rId\nDYyI0rWEJaEJaaNYTGU3OX37qBKE/lhDC2wVaVCZg7Kydo+oYCudg/TKrUbfWD4=\n=EoCU\n-----END PGP SIGNATURE-----\n", "payload": "tree f2c873ba1aae2db17d37239a7bab125bd0488b0e\nparent 2294d81fb3998706784c277154caa772d2bff03c\nparent 04265621f9a82cfc2fc2278b935dcc5d4a1c39b7\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1684565459 +0530\ncommitter GitHub <noreply@github.com> 1684565459 +0530\n\nRollup merge of #111606 - jyn514:nightly-diagnostics, r=lcnr\n\nvery minor cleanups\n\n- add `must_use` to `early_error_no_abort`\n\n  this was already being used at its only callsite, but this ensures that new code remembers to use it if it's called in the future. found this while investigating https://github.com/rust-lang/rust/issues/110090.\n\n- remove outdated and incorrect comment in `builder.rs`. `doc_rust_lang_org_channel` doesn't exist in rustdoc, it gets it from an env var instead: https://github.com/rust-lang/rust/blob/b275d2c30b6e88cc48747f349f7137076d450658/src/librustdoc/clean/utils.rs#L569-L573\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "html_url": "https://github.com/rust-lang/rust/commit/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2294d81fb3998706784c277154caa772d2bff03c", "url": "https://api.github.com/repos/rust-lang/rust/commits/2294d81fb3998706784c277154caa772d2bff03c", "html_url": "https://github.com/rust-lang/rust/commit/2294d81fb3998706784c277154caa772d2bff03c"}, {"sha": "04265621f9a82cfc2fc2278b935dcc5d4a1c39b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/04265621f9a82cfc2fc2278b935dcc5d4a1c39b7", "html_url": "https://github.com/rust-lang/rust/commit/04265621f9a82cfc2fc2278b935dcc5d4a1c39b7"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "6c204b894a6ad27a5f1fbbc97af7dd5b6bfb5c04", "filename": "compiler/rustc_driver_impl/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_driver_impl%2Fsrc%2Flib.rs?ref=fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "patch": "@@ -1250,7 +1250,8 @@ pub fn install_ice_hook(bug_report_url: &'static str, extra_info: fn(&Handler))\n         #[cfg(windows)]\n         if let Some(msg) = info.payload().downcast_ref::<String>() {\n             if msg.starts_with(\"failed printing to stdout: \") && msg.ends_with(\"(os error 232)\") {\n-                early_error_no_abort(ErrorOutputType::default(), msg.as_str());\n+                // the error code is already going to be reported when the panic unwinds up the stack\n+                let _ = early_error_no_abort(ErrorOutputType::default(), msg.as_str());\n                 return;\n             }\n         };"}, {"sha": "4f593083b6f3a754d656779c336e351ed283f32a", "filename": "compiler/rustc_session/src/session.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fsession.rs?ref=fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "patch": "@@ -1732,6 +1732,7 @@ fn early_error_handler(output: config::ErrorOutputType) -> rustc_errors::Handler\n \n #[allow(rustc::untranslatable_diagnostic)]\n #[allow(rustc::diagnostic_outside_of_impl)]\n+#[must_use = \"ErrorGuaranteed must be returned from `run_compiler` in order to exit with a non-zero status code\"]\n pub fn early_error_no_abort(\n     output: config::ErrorOutputType,\n     msg: impl Into<DiagnosticMessage>,"}, {"sha": "cf7c6596c02389d5668da9e2ea040cc0b14d5da5", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=fa11c9e8ca4e8bf6d1e7d916bb7c0da934d3ded3", "patch": "@@ -942,7 +942,6 @@ impl<'a> Builder<'a> {\n         self.run_step_descriptions(&Builder::get_step_descriptions(Kind::Doc), paths);\n     }\n \n-    /// NOTE: keep this in sync with `rustdoc::clean::utils::doc_rust_lang_org_channel`, or tests will fail on beta/stable.\n     pub fn doc_rust_lang_org_channel(&self) -> String {\n         let channel = match &*self.config.channel {\n             \"stable\" => &self.version,"}]}