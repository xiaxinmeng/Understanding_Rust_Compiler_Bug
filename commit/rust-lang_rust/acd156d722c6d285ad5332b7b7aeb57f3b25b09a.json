{"sha": "acd156d722c6d285ad5332b7b7aeb57f3b25b09a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFjZDE1NmQ3MjJjNmQyODVhZDUzMzJiN2I3YWViNTdmM2IyNWIwOWE=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-01-30T11:17:02Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-01-30T11:17:02Z"}, "message": "add test that relies on non-reborrowing-cast-to-raw", "tree": {"sha": "897db2519380447224ea5b69a8400ece75905ebf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/897db2519380447224ea5b69a8400ece75905ebf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/acd156d722c6d285ad5332b7b7aeb57f3b25b09a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/acd156d722c6d285ad5332b7b7aeb57f3b25b09a", "html_url": "https://github.com/rust-lang/rust/commit/acd156d722c6d285ad5332b7b7aeb57f3b25b09a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/acd156d722c6d285ad5332b7b7aeb57f3b25b09a/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aff1e43137e7f8360b2d02ed15ca3df8a506fb3a", "url": "https://api.github.com/repos/rust-lang/rust/commits/aff1e43137e7f8360b2d02ed15ca3df8a506fb3a", "html_url": "https://github.com/rust-lang/rust/commit/aff1e43137e7f8360b2d02ed15ca3df8a506fb3a"}], "stats": {"total": 15, "additions": 4, "deletions": 11}, "files": [{"sha": "208cb7e15e03de9e44bb8a35f485757eb5ff423f", "filename": "tests/run-pass/stacked-borrows/stacked-borrows.rs", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/acd156d722c6d285ad5332b7b7aeb57f3b25b09a/tests%2Frun-pass%2Fstacked-borrows%2Fstacked-borrows.rs", "raw_url": "https://github.com/rust-lang/rust/raw/acd156d722c6d285ad5332b7b7aeb57f3b25b09a/tests%2Frun-pass%2Fstacked-borrows%2Fstacked-borrows.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fstacked-borrows%2Fstacked-borrows.rs?ref=acd156d722c6d285ad5332b7b7aeb57f3b25b09a", "patch": "@@ -129,16 +129,15 @@ fn two_raw() { unsafe {\n } }\n \n // Make sure that creating a *mut does not invalidate existing shared references.\n-fn shr_and_raw() { /* unsafe {\n+fn shr_and_raw() { unsafe {\n     use std::mem;\n-    // FIXME: This is currently disabled because \"as *mut _\" incurs a reborrow.\n     let x = &mut 0;\n     let y1: &i32 = mem::transmute(&*x); // launder lifetimes\n     let y2 = x as *mut _;\n     let _val = *y1;\n     *y2 += 1;\n     // TODO: Once this works, add compile-fail test that tries to read from y1 again.\n-} */ }\n+} }\n \n fn disjoint_mutable_subborrows() {\n     struct Foo {\n@@ -165,5 +164,5 @@ fn disjoint_mutable_subborrows() {\n     let b = unsafe{ borrow_field_b(ptr) };\n     b.push(4);\n     a.push_str(\" world\");\n-    dbg!(a,b);\n+    eprintln!(\"{:?} {:?}\", a, b);\n }"}, {"sha": "8ee4e25dbef8431827774bed1ae50b8cfdf16b24", "filename": "tests/run-pass/stacked-borrows/stacked-borrows.stderr", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/acd156d722c6d285ad5332b7b7aeb57f3b25b09a/tests%2Frun-pass%2Fstacked-borrows%2Fstacked-borrows.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/acd156d722c6d285ad5332b7b7aeb57f3b25b09a/tests%2Frun-pass%2Fstacked-borrows%2Fstacked-borrows.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frun-pass%2Fstacked-borrows%2Fstacked-borrows.stderr?ref=acd156d722c6d285ad5332b7b7aeb57f3b25b09a", "patch": "@@ -1,7 +1 @@\n-[$DIR/stacked-borrows.rs:168] a = \"hello world\"\n-[$DIR/stacked-borrows.rs:168] b = [\n-    0,\n-    1,\n-    2,\n-    4,\n-]\n+\"hello world\" [0, 1, 2, 4]"}]}