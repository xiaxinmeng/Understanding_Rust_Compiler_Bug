{"sha": "1869888b1aac51d2d0fa423869b7e76967b7f2c7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE4Njk4ODhiMWFhYzUxZDJkMGZhNDIzODY5YjdlNzY5NjdiN2YyYzc=", "commit": {"author": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-05-11T01:58:34Z"}, "committer": {"name": "Nick Cameron", "email": "ncameron@mozilla.com", "date": "2018-05-11T01:58:34Z"}, "message": "Remove `--verbose-diff`\n\nUse `--verbose` instead\n\ncc #1976", "tree": {"sha": "0f01d64b7f60df5a8ab7dcba9701a2dd4cf3ce1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0f01d64b7f60df5a8ab7dcba9701a2dd4cf3ce1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1869888b1aac51d2d0fa423869b7e76967b7f2c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1869888b1aac51d2d0fa423869b7e76967b7f2c7", "html_url": "https://github.com/rust-lang/rust/commit/1869888b1aac51d2d0fa423869b7e76967b7f2c7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1869888b1aac51d2d0fa423869b7e76967b7f2c7/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "55ac062da038a4bd160cfc875dc92e6d888be2db", "url": "https://api.github.com/repos/rust-lang/rust/commits/55ac062da038a4bd160cfc875dc92e6d888be2db", "html_url": "https://github.com/rust-lang/rust/commit/55ac062da038a4bd160cfc875dc92e6d888be2db"}], "stats": {"total": 17, "additions": 6, "deletions": 11}, "files": [{"sha": "dba319f44af32f89219e6857590ed5cb4daf6203", "filename": "src/bin/main.rs", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Fbin%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Fbin%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Fmain.rs?ref=1869888b1aac51d2d0fa423869b7e76967b7f2c7", "patch": "@@ -130,11 +130,6 @@ fn make_opts() -> Options {\n         \"Format specified line ranges. See README for more detail on the JSON format.\",\n         \"JSON\",\n     );\n-    opts.optflag(\n-        \"\",\n-        \"verbose-diff\",\n-        \"Emit a more verbose diff, indicating the end of lines.\",\n-    );\n     opts.optflag(\"h\", \"help\", \"Show this message\");\n     opts.optflag(\"\", \"skip-children\", \"Don't reformat child modules\");\n     opts.optflag("}, {"sha": "ac81ded5f76f0c60a6129418cba8c4729837f4ff", "filename": "src/config/mod.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Fconfig%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Fconfig%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Fmod.rs?ref=1869888b1aac51d2d0fa423869b7e76967b7f2c7", "patch": "@@ -144,7 +144,6 @@ create_config! {\n \n     // Not user-facing\n     verbose: Verbosity, Verbosity::Normal, false, \"How much to information to emit to the user\";\n-    verbose_diff: bool, false, false, \"Emit verbose diffs\";\n     file_lines: FileLines, FileLines::all(), false,\n         \"Lines to format; this is not supported in rustfmt.toml, and can only be specified \\\n          via the --file-lines option\";"}, {"sha": "a11e1f01eaf64adc15798f60c0b37e7ba5eecd2d", "filename": "src/config/options.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Fconfig%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Fconfig%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig%2Foptions.rs?ref=1869888b1aac51d2d0fa423869b7e76967b7f2c7", "patch": "@@ -330,7 +330,6 @@ pub struct CliOptions {\n     skip_children: Option<bool>,\n     quiet: bool,\n     verbose: bool,\n-    verbose_diff: bool,\n     pub(super) config_path: Option<PathBuf>,\n     write_mode: Option<WriteMode>,\n     color: Option<Color>,\n@@ -347,7 +346,6 @@ impl CliOptions {\n         if options.verbose && options.quiet {\n             return Err(format_err!(\"Can't use both `--verbose` and `--quiet`\"));\n         }\n-        options.verbose_diff = matches.opt_present(\"verbose-diff\");\n \n         let unstable_features = matches.opt_present(\"unstable-features\");\n         let rust_nightly = option_env!(\"CFG_RELEASE_CHANNEL\")\n@@ -404,7 +402,6 @@ impl CliOptions {\n         } else {\n             config.set().verbose(Verbosity::Normal);\n         }\n-        config.set().verbose_diff(self.verbose_diff);\n         config.set().file_lines(self.file_lines);\n         config.set().unstable_features(self.unstable_features);\n         if let Some(skip_children) = self.skip_children {"}, {"sha": "f2acc96a8deb9d1cd442fd99b75a7c4a4c91fddd", "filename": "src/rustfmt_diff.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Frustfmt_diff.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1869888b1aac51d2d0fa423869b7e76967b7f2c7/src%2Frustfmt_diff.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustfmt_diff.rs?ref=1869888b1aac51d2d0fa423869b7e76967b7f2c7", "patch": "@@ -8,7 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-use config::{Color, Config};\n+use config::{Color, Config, Verbosity};\n use diff;\n use std::collections::VecDeque;\n use std::io;\n@@ -154,7 +154,11 @@ where\n     F: Fn(u32) -> String,\n {\n     let color = config.color();\n-    let line_terminator = if config.verbose_diff() { \"\u23ce\" } else { \"\" };\n+    let line_terminator = if config.verbose() == Verbosity::Verbose {\n+        \"\u23ce\"\n+    } else {\n+        \"\"\n+    };\n \n     let mut writer = OutputWriter::new(color);\n "}]}