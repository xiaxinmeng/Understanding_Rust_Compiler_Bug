{"sha": "156a4317f6b4c090241d0cbc441a5d34bf4ac1ce", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE1NmE0MzE3ZjZiNGMwOTAyNDFkMGNiYzQ0MWE1ZDM0YmY0YWMxY2U=", "commit": {"author": {"name": "Jeff Olson", "email": "olson.jeffery@gmail.com", "date": "2012-06-08T05:06:42Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-06-29T22:41:55Z"}, "message": "std: finish impl of io::writer for tcp_socket_buf", "tree": {"sha": "baef8bdb968a7015890f016da540fa90f80580e2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/baef8bdb968a7015890f016da540fa90f80580e2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/156a4317f6b4c090241d0cbc441a5d34bf4ac1ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/156a4317f6b4c090241d0cbc441a5d34bf4ac1ce", "html_url": "https://github.com/rust-lang/rust/commit/156a4317f6b4c090241d0cbc441a5d34bf4ac1ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/156a4317f6b4c090241d0cbc441a5d34bf4ac1ce/comments", "author": {"login": "olsonjeffery", "id": 10408, "node_id": "MDQ6VXNlcjEwNDA4", "avatar_url": "https://avatars.githubusercontent.com/u/10408?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olsonjeffery", "html_url": "https://github.com/olsonjeffery", "followers_url": "https://api.github.com/users/olsonjeffery/followers", "following_url": "https://api.github.com/users/olsonjeffery/following{/other_user}", "gists_url": "https://api.github.com/users/olsonjeffery/gists{/gist_id}", "starred_url": "https://api.github.com/users/olsonjeffery/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olsonjeffery/subscriptions", "organizations_url": "https://api.github.com/users/olsonjeffery/orgs", "repos_url": "https://api.github.com/users/olsonjeffery/repos", "events_url": "https://api.github.com/users/olsonjeffery/events{/privacy}", "received_events_url": "https://api.github.com/users/olsonjeffery/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "af3fa5306de44250abd9a9fdb5a8747b7fbf405c", "url": "https://api.github.com/repos/rust-lang/rust/commits/af3fa5306de44250abd9a9fdb5a8747b7fbf405c", "html_url": "https://github.com/rust-lang/rust/commit/af3fa5306de44250abd9a9fdb5a8747b7fbf405c"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "cc329513ab2ef8e7905c52bc2081da113fcf346a", "filename": "src/libstd/net_tcp.rs", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/156a4317f6b4c090241d0cbc441a5d34bf4ac1ce/src%2Flibstd%2Fnet_tcp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/156a4317f6b4c090241d0cbc441a5d34bf4ac1ce/src%2Flibstd%2Fnet_tcp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet_tcp.rs?ref=156a4317f6b4c090241d0cbc441a5d34bf4ac1ce", "patch": "@@ -778,13 +778,17 @@ impl tcp_socket_buf of io::reader for tcp_socket_buf {\n     }\n }\n \n-/*\n #[doc=\"\n Implementation of `io::reader` iface for a buffered `net::tcp::tcp_socket`\n \"]\n impl tcp_socket_buf of io::writer for tcp_socket_buf {\n-    fn write(data: [const u8]/&) {\n-        (*self).sock.write(iter::to_vec(data as [u8]/&));\n+    fn write(data: [const u8]/&) unsafe {\n+        let socket_data_ptr = ptr::addr_of(**((*self).sock));\n+        let write_buf_vec = vec::unpack_const_slice(data) {|ptr, len|\n+            [ uv::ll::buf_init(ptr as *u8, len) ]\n+        };\n+        let write_buf_vec_ptr = ptr::addr_of(write_buf_vec);\n+        write_common_impl(socket_data_ptr, write_buf_vec_ptr);\n     }\n     fn seek(dist: int, seek: io::seek_style) {\n       log(debug, #fmt(\"tcp_socket_buf seek stub %? %?\", dist, seek));\n@@ -797,7 +801,6 @@ impl tcp_socket_buf of io::writer for tcp_socket_buf {\n         0\n     }\n }\n-*/\n \n // INTERNAL API\n "}]}