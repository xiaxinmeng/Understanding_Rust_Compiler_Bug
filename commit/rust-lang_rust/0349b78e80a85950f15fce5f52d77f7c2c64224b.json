{"sha": "0349b78e80a85950f15fce5f52d77f7c2c64224b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjAzNDliNzhlODBhODU5NTBmMTVmY2U1ZjUyZDc3ZjdjMmM2NDIyNGI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-04-17T08:31:33Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-04-17T08:31:33Z"}, "message": "Rollup merge of #59646 - JohnTitor:improve-wording, r=oli-obk\n\nconst fn: Improve wording\n\nfixes #59611\n\nThis might need discussion. Feel free to close this PR if we don't need to fix.", "tree": {"sha": "eb7775e3b45c06e141dee258cd228d2a0ad79363", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/eb7775e3b45c06e141dee258cd228d2a0ad79363"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0349b78e80a85950f15fce5f52d77f7c2c64224b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJctuRlCRBK7hj4Ov3rIwAAdHIIAGNticj1jv/hpFBOPk6s4zZU\nevKG23U2xrb86TLsivDVuSb5laM6SG2rVMoA0h9vTMLZQTu1wMS37R03vH4x5Y5A\n2GzYqoXa6PECidcvjxP3J98L9k2zZ26tPAigPZyYTHm1w+t7GlHUr0j0/j7h+XXq\njndABf6CCOFp8BuaLQIciEZ4VyNGCNwJB7C+2Bi+gnjWhXjTfB/6wxbNYoLxlPpq\niyOEdpleZbJIDfLwgRz5XxhhVkt3kkGhdu9bcryqqosBaLAb069YtD/1wUu9PebU\nD18rvapTbtLuZgMiCjflocHG3xbu7VeNEvYMU7aM9BZ4NDPd20G5buDtdWlN1FM=\n=s/Zn\n-----END PGP SIGNATURE-----\n", "payload": "tree eb7775e3b45c06e141dee258cd228d2a0ad79363\nparent c89bc54d4f0174bd7c86693dc3b0500d11d756d2\nparent 407541552b4970d18a7c15ec3b1de792bbbef54b\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1555489893 +0200\ncommitter GitHub <noreply@github.com> 1555489893 +0200\n\nRollup merge of #59646 - JohnTitor:improve-wording, r=oli-obk\n\nconst fn: Improve wording\n\nfixes #59611\n\nThis might need discussion. Feel free to close this PR if we don't need to fix.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0349b78e80a85950f15fce5f52d77f7c2c64224b", "html_url": "https://github.com/rust-lang/rust/commit/0349b78e80a85950f15fce5f52d77f7c2c64224b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0349b78e80a85950f15fce5f52d77f7c2c64224b/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c89bc54d4f0174bd7c86693dc3b0500d11d756d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/c89bc54d4f0174bd7c86693dc3b0500d11d756d2", "html_url": "https://github.com/rust-lang/rust/commit/c89bc54d4f0174bd7c86693dc3b0500d11d756d2"}, {"sha": "407541552b4970d18a7c15ec3b1de792bbbef54b", "url": "https://api.github.com/repos/rust-lang/rust/commits/407541552b4970d18a7c15ec3b1de792bbbef54b", "html_url": "https://github.com/rust-lang/rust/commit/407541552b4970d18a7c15ec3b1de792bbbef54b"}], "stats": {"total": 44, "additions": 25, "deletions": 19}, "files": [{"sha": "7826d3da4fed2a2e79587138823705f1d983998f", "filename": "src/librustc_mir/transform/qualify_min_const_fn.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Flibrustc_mir%2Ftransform%2Fqualify_min_const_fn.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Flibrustc_mir%2Ftransform%2Fqualify_min_const_fn.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fqualify_min_const_fn.rs?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -326,7 +326,12 @@ fn check_terminator(\n                     abi::Abi::Rust if tcx.is_min_const_fn(def_id) => {},\n                     abi::Abi::Rust => return Err((\n                         span,\n-                        \"can only call other `min_const_fn` within a `min_const_fn`\".into(),\n+                        format!(\n+                            \"can only call other `const fn` within a `const fn`, \\\n+                             but `{:?}` is not stable as `const fn`\",\n+                            func,\n+                        )\n+                        .into(),\n                     )),\n                     abi => return Err((\n                         span,"}, {"sha": "759d9ab6a408137aa619f5109eedbc7165bf0446", "filename": "src/test/ui/consts/min_const_fn/min_const_fn_libstd_stability.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.rs?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -12,14 +12,14 @@ const fn foo() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const fn bar() -> u32 { foo() } //~ ERROR can only call other `min_const_fn`\n+const fn bar() -> u32 { foo() } //~ ERROR can only call other `const fn`\n \n #[unstable(feature = \"rust1\", issue=\"0\")]\n const fn foo2() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const fn bar2() -> u32 { foo2() } //~ ERROR can only call other `min_const_fn`\n+const fn bar2() -> u32 { foo2() } //~ ERROR can only call other `const fn`\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // conformity is required, even with `const_fn` feature gate\n@@ -31,6 +31,6 @@ const fn foo2_gated() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const fn bar2_gated() -> u32 { foo2_gated() } //~ ERROR can only call other `min_const_fn`\n+const fn bar2_gated() -> u32 { foo2_gated() } //~ ERROR can only call other `const fn`\n \n fn main() {}"}, {"sha": "c73eda9ab9fc19e54342d20865d741f34683e670", "filename": "src/test/ui/consts/min_const_fn/min_const_fn_libstd_stability.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.stderr?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -1,12 +1,12 @@\n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_fn_libstd_stability.rs:15:25\n    |\n LL | const fn bar() -> u32 { foo() }\n    |                         ^^^^^\n    |\n    = help: add #![feature(const_fn)] to the crate attributes to enable\n \n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo2` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_fn_libstd_stability.rs:22:26\n    |\n LL | const fn bar2() -> u32 { foo2() }\n@@ -22,7 +22,7 @@ LL | const fn bar3() -> u32 { (5f32 + 6f32) as u32 }\n    |\n    = help: add #![feature(const_fn)] to the crate attributes to enable\n \n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo2_gated` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_fn_libstd_stability.rs:34:32\n    |\n LL | const fn bar2_gated() -> u32 { foo2_gated() }"}, {"sha": "64057b012b8dffaf047ef1aef90a6934dcdf0fda", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.rs?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -12,14 +12,14 @@ const unsafe fn foo() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const unsafe fn bar() -> u32 { unsafe { foo() } } //~ ERROR can only call other `min_const_fn`\n+const unsafe fn bar() -> u32 { unsafe { foo() } } //~ ERROR can only call other `const fn`\n \n #[unstable(feature = \"rust1\", issue=\"0\")]\n const unsafe fn foo2() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const unsafe fn bar2() -> u32 { unsafe { foo2() } } //~ ERROR can only call other `min_const_fn`\n+const unsafe fn bar2() -> u32 { unsafe { foo2() } } //~ ERROR can only call other `const fn`\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // conformity is required, even with `const_fn` feature gate\n@@ -31,6 +31,7 @@ const unsafe fn foo2_gated() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const unsafe fn bar2_gated() -> u32 { unsafe { foo2_gated() } } //~ ERROR can only call other\n+const unsafe fn bar2_gated() -> u32 { unsafe { foo2_gated() } }\n+//~^ ERROR can only call other `const fn`\n \n fn main() {}"}, {"sha": "87b572dcc46f3cc4bbc41957d4c4639e597bad3f", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -1,12 +1,12 @@\n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_unsafe_fn_libstd_stability.rs:15:41\n    |\n LL | const unsafe fn bar() -> u32 { unsafe { foo() } }\n    |                                         ^^^^^\n    |\n    = help: add #![feature(const_fn)] to the crate attributes to enable\n \n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo2` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_unsafe_fn_libstd_stability.rs:22:42\n    |\n LL | const unsafe fn bar2() -> u32 { unsafe { foo2() } }\n@@ -22,7 +22,7 @@ LL | const unsafe fn bar3() -> u32 { (5f32 + 6f32) as u32 }\n    |\n    = help: add #![feature(const_fn)] to the crate attributes to enable\n \n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo2_gated` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_unsafe_fn_libstd_stability.rs:34:48\n    |\n LL | const unsafe fn bar2_gated() -> u32 { unsafe { foo2_gated() } }"}, {"sha": "deb2cb6b619bbe7369284ae124a965d31959e439", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability2.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.rs?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -12,21 +12,21 @@ const fn foo() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const unsafe fn bar() -> u32 { foo() } //~ ERROR can only call other `min_const_fn`\n+const unsafe fn bar() -> u32 { foo() } //~ ERROR can only call other `const fn`\n \n #[unstable(feature = \"rust1\", issue=\"0\")]\n const fn foo2() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const unsafe fn bar2() -> u32 { foo2() } //~ ERROR can only call other `min_const_fn`\n+const unsafe fn bar2() -> u32 { foo2() } //~ ERROR can only call other `const fn`\n \n // check whether this function cannot be called even with the feature gate active\n #[unstable(feature = \"foo2\", issue=\"0\")]\n const fn foo2_gated() -> u32 { 42 }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n // can't call non-min_const_fn\n-const unsafe fn bar2_gated() -> u32 { foo2_gated() } //~ ERROR can only call other `min_const_fn`\n+const unsafe fn bar2_gated() -> u32 { foo2_gated() } //~ ERROR can only call other `const fn`\n \n fn main() {}"}, {"sha": "5fddc119758844fd3c46308cde24b621a7715847", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability2.stderr", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0349b78e80a85950f15fce5f52d77f7c2c64224b/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability2.stderr?ref=0349b78e80a85950f15fce5f52d77f7c2c64224b", "patch": "@@ -1,20 +1,20 @@\n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:15:32\n    |\n LL | const unsafe fn bar() -> u32 { foo() }\n    |                                ^^^^^\n    |\n    = help: add #![feature(const_fn)] to the crate attributes to enable\n \n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo2` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:22:33\n    |\n LL | const unsafe fn bar2() -> u32 { foo2() }\n    |                                 ^^^^^^\n    |\n    = help: add #![feature(const_fn)] to the crate attributes to enable\n \n-error[E0723]: can only call other `min_const_fn` within a `min_const_fn` (see issue #57563)\n+error[E0723]: can only call other `const fn` within a `const fn`, but `const foo2_gated` is not stable as `const fn` (see issue #57563)\n   --> $DIR/min_const_unsafe_fn_libstd_stability2.rs:30:39\n    |\n LL | const unsafe fn bar2_gated() -> u32 { foo2_gated() }"}]}