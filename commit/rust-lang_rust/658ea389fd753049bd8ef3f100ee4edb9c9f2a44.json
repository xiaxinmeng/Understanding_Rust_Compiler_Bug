{"sha": "658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1OGVhMzg5ZmQ3NTMwNDliZDhlZjNmMTAwZWU0ZWRiOWM5ZjJhNDQ=", "commit": {"author": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2017-11-26T17:09:35Z"}, "committer": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2017-11-28T23:15:28Z"}, "message": "rustc_llvm: remove stale references\n\n...that were removed in 77c3bfa7429abf87b76ba84108df018d9e9d90e2.", "tree": {"sha": "521ed7a26f8e775ff3a97490b3631176cb21ee79", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/521ed7a26f8e775ff3a97490b3631176cb21ee79"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE/uKQcsWiEQj1Z6uEHB6YzI4Xu4kFAlod7hEACgkQHB6YzI4X\nu4kkRg//UHA8v/cJl8xfGBkCYH5+v7HU1LUZZCxhAXFWyqdXTuRdGdIGnboKO7v6\nkBCNvZHv7t1YB1iNX7O4G00QVnePyS3tDF0KswWBTKULffPRvzuYrVmU3mdmjNst\nyXFmukWsaB4jToV/m7jOuHaLunMAYfqkEBSma1+1lnJ2VuCDWZNUcJXvJDA5clz5\nEi2xOH8wOrz4JmQE6deFrKatyN80qFpKWP3k6tV45B7qmpVx4XgzExD56ahD++Oa\nB8QTUfGXBNFZRMOUsUrl5RyjqNbdTyn63Mj3k1MgMk85rP+q9aqax2qXiZLdUSv0\nzn867h7DI8GV5/0JpR7QXazzzR+BtbY9RitMk620C5rbBNtlUk6n2JhtC9of6Zq0\ns8wOomXh8bYuh2qkTFQfYlVxU+gPBmKEMI3h8Cf/GELaf+DDa8MT2sFOeIxp/YXy\n+1nBK4EVhZLAgPMKj7f+WQYbe5r17VS+81o5ZJz5vlg1o/YbnBv2UCYO2C+2uBIZ\neEG7RZ+klcRsLEAdFxdSRKvb0uV9vzV4RIEPP4e0IgU0Sjkrgq4LyL+alc3s/OoN\nNDUQUOVKCf4g40WGo9ItVm7fb/I0EnDY+D5EVBpaq4h+xmgZyhMCns7ZGutIj6gI\nIxouSgXj5+AJjiHDiDQPKBD86ays7H+91dJrEE5a98D3pG0RVZs=\n=Td/L\n-----END PGP SIGNATURE-----", "payload": "tree 521ed7a26f8e775ff3a97490b3631176cb21ee79\nparent 71340ca4e181b824bcefa887f1be60dd0b7352ce\nauthor Tamir Duberstein <tamird@gmail.com> 1511716175 -0500\ncommitter Tamir Duberstein <tamird@gmail.com> 1511910928 -0500\n\nrustc_llvm: remove stale references\n\n...that were removed in 77c3bfa7429abf87b76ba84108df018d9e9d90e2.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "html_url": "https://github.com/rust-lang/rust/commit/658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/658ea389fd753049bd8ef3f100ee4edb9c9f2a44/comments", "author": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71340ca4e181b824bcefa887f1be60dd0b7352ce", "url": "https://api.github.com/repos/rust-lang/rust/commits/71340ca4e181b824bcefa887f1be60dd0b7352ce", "html_url": "https://github.com/rust-lang/rust/commit/71340ca4e181b824bcefa887f1be60dd0b7352ce"}], "stats": {"total": 19, "additions": 7, "deletions": 12}, "files": [{"sha": "57407a2399a2f249f85ecf5ad69d05b3888ef481", "filename": ".gitignore", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/658ea389fd753049bd8ef3f100ee4edb9c9f2a44/.gitignore", "raw_url": "https://github.com/rust-lang/rust/raw/658ea389fd753049bd8ef3f100ee4edb9c9f2a44/.gitignore", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.gitignore?ref=658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "patch": "@@ -95,7 +95,6 @@ config.stamp\n keywords.md\n lexer.ml\n src/etc/dl\n-src/librustc_llvm/llvmdeps.rs\n tmp.*.rs\n version.md\n version.ml"}, {"sha": "1c2fa1bbb484817abd96356c0e63ee402462c979", "filename": "src/librustc_llvm/ffi.rs", "status": "modified", "additions": 7, "deletions": 11, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/658ea389fd753049bd8ef3f100ee4edb9c9f2a44/src%2Flibrustc_llvm%2Fffi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/658ea389fd753049bd8ef3f100ee4edb9c9f2a44/src%2Flibrustc_llvm%2Fffi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_llvm%2Fffi.rs?ref=658ea389fd753049bd8ef3f100ee4edb9c9f2a44", "patch": "@@ -505,17 +505,13 @@ pub mod debuginfo {\n \n pub enum ModuleBuffer {}\n \n-// Link to our native llvm bindings (things that we need to use the C++ api\n-// for) and because llvm is written in C++ we need to link against libstdc++\n-//\n-// You'll probably notice that there is an omission of all LLVM libraries\n-// from this location. This is because the set of LLVM libraries that we\n-// link to is mostly defined by LLVM, and the `llvm-config` tool is used to\n-// figure out the exact set of libraries. To do this, the build system\n-// generates an llvmdeps.rs file next to this one which will be\n-// automatically updated whenever LLVM is updated to include an up-to-date\n-// set of the libraries we need to link to LLVM for.\n-#[link(name = \"rustllvm\", kind = \"static\")] // not quite true but good enough\n+// This annotation is primarily needed for MSVC where attributes like\n+// dllimport/dllexport are applied and need to be correct for everything to\n+// link successfully. The #[link] annotation here says \"these symbols are\n+// included statically\" which means that they're all exported with dllexport\n+// and from the rustc_llvm dynamic library. Otherwise the rustc_trans dynamic\n+// library would not be able to access these symbols.\n+#[link(name = \"rustllvm\", kind = \"static\")]\n extern \"C\" {\n     // Create and destroy contexts.\n     pub fn LLVMContextCreate() -> ContextRef;"}]}