{"sha": "bd5bc49d0553235ea0ea04bf96b9abb873505087", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkNWJjNDlkMDU1MzIzNWVhMGVhMDRiZjk2YjlhYmI4NzM1MDUwODc=", "commit": {"author": {"name": "Wesley Wiser", "email": "wesleywiser@microsoft.com", "date": "2021-09-20T19:26:56Z"}, "committer": {"name": "Wesley Wiser", "email": "wesleywiser@microsoft.com", "date": "2021-09-20T19:26:56Z"}, "message": "Re-enable the `src/test/debuginfo/mutex.rs` test on Windows\n\nThis test required a newer version of cdb than was previously enabled in\nCI thus leading to some bitrot in the test since the time it was\noriginally created. With the update to the `windows-latest` image last\nweek, we're now running this test in CI and thus uncovered the\nregression.\n\nI've updated the test and it now passes.", "tree": {"sha": "73abf29f850fc542a6f532c31d1394258bb6156b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73abf29f850fc542a6f532c31d1394258bb6156b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bd5bc49d0553235ea0ea04bf96b9abb873505087", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bd5bc49d0553235ea0ea04bf96b9abb873505087", "html_url": "https://github.com/rust-lang/rust/commit/bd5bc49d0553235ea0ea04bf96b9abb873505087", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bd5bc49d0553235ea0ea04bf96b9abb873505087/comments", "author": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "committer": {"login": "wesleywiser", "id": 831192, "node_id": "MDQ6VXNlcjgzMTE5Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/831192?v=4", "gravatar_id": "", "url": "https://api.github.com/users/wesleywiser", "html_url": "https://github.com/wesleywiser", "followers_url": "https://api.github.com/users/wesleywiser/followers", "following_url": "https://api.github.com/users/wesleywiser/following{/other_user}", "gists_url": "https://api.github.com/users/wesleywiser/gists{/gist_id}", "starred_url": "https://api.github.com/users/wesleywiser/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/wesleywiser/subscriptions", "organizations_url": "https://api.github.com/users/wesleywiser/orgs", "repos_url": "https://api.github.com/users/wesleywiser/repos", "events_url": "https://api.github.com/users/wesleywiser/events{/privacy}", "received_events_url": "https://api.github.com/users/wesleywiser/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "db1fb85cff63ad5fffe435e17128f99f9e1d970c", "url": "https://api.github.com/repos/rust-lang/rust/commits/db1fb85cff63ad5fffe435e17128f99f9e1d970c", "html_url": "https://github.com/rust-lang/rust/commit/db1fb85cff63ad5fffe435e17128f99f9e1d970c"}], "stats": {"total": 12, "additions": 5, "deletions": 7}, "files": [{"sha": "00dccf5f9064a3dfa00f9d2d98c59dc5ed82e436", "filename": "src/test/debuginfo/mutex.rs", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/bd5bc49d0553235ea0ea04bf96b9abb873505087/src%2Ftest%2Fdebuginfo%2Fmutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bd5bc49d0553235ea0ea04bf96b9abb873505087/src%2Ftest%2Fdebuginfo%2Fmutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fdebuginfo%2Fmutex.rs?ref=bd5bc49d0553235ea0ea04bf96b9abb873505087", "patch": "@@ -3,8 +3,6 @@\n // cdb-only\n // min-cdb-version: 10.0.21287.1005\n // compile-flags:-g\n-// FIXME: Failed on update to 10.0.22000.1\n-// ignore-windows\n \n // === CDB TESTS ==================================================================================\n //\n@@ -14,17 +12,17 @@\n // cdb-check:m,d              [Type: std::sync::mutex::Mutex<i32>]\n // cdb-check:    [...] inner            [Type: std::sys_common::mutex::MovableMutex]\n // cdb-check:    [...] poison           [Type: std::sync::poison::Flag]\n-// cdb-check:    [...] data             [Type: core::cell::UnsafeCell<i32>]\n+// cdb-check:    [...] data             : 0 [Type: core::cell::UnsafeCell<i32>]\n \n //\n // cdb-command:dx m.data,d\n-// cdb-check:m.data,d         [Type: core::cell::UnsafeCell<i32>]\n-// cdb-check:    [...] value            : 0 [Type: int]\n+// cdb-check:m.data,d         : 0 [Type: core::cell::UnsafeCell<i32>]\n+// cdb-check:    [<Raw View>]     [Type: core::cell::UnsafeCell<i32>]\n \n //\n // cdb-command:dx lock,d\n-// cdb-check:lock,d           : Ok [Type: enum$<core::result::Result<std::sync::mutex::MutexGuard<i32>, enum$<std::sync::poison::TryLockError<std::sync::mutex::MutexGuard<i32> >, 0, 1, Poisoned> > >]\n-// cdb-check:    [...] variant$         : Ok (0) [Type: core::result::Result]\n+// cdb-check:lock,d           : Ok [Type: enum$<core::result::Result<std::sync::mutex::MutexGuard<i32>,enum$<std::sync::poison::TryLockError<std::sync::mutex::MutexGuard<i32> >, 0, 1, Poisoned> > >]\n+// cdb-check:    [variant]        : Ok\n // cdb-check:    [...] __0              [Type: std::sync::mutex::MutexGuard<i32>]\n \n use std::sync::Mutex;"}]}