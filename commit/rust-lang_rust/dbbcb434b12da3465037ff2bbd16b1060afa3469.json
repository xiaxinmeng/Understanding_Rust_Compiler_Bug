{"sha": "dbbcb434b12da3465037ff2bbd16b1060afa3469", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiYmNiNDM0YjEyZGEzNDY1MDM3ZmYyYmJkMTZiMTA2MGFmYTM0Njk=", "commit": {"author": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-08-18T17:42:34Z"}, "committer": {"name": "Steve Klabnik", "email": "steve@steveklabnik.com", "date": "2015-08-18T18:22:18Z"}, "message": "Add note about backtraces to TRPL\n\nThis is where panic!() is introduced.\n\nFixes #27428", "tree": {"sha": "783f25d8bdb938440bff5304410210042491e653", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/783f25d8bdb938440bff5304410210042491e653"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbbcb434b12da3465037ff2bbd16b1060afa3469", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbbcb434b12da3465037ff2bbd16b1060afa3469", "html_url": "https://github.com/rust-lang/rust/commit/dbbcb434b12da3465037ff2bbd16b1060afa3469", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbbcb434b12da3465037ff2bbd16b1060afa3469/comments", "author": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "steveklabnik", "id": 27786, "node_id": "MDQ6VXNlcjI3Nzg2", "avatar_url": "https://avatars.githubusercontent.com/u/27786?v=4", "gravatar_id": "", "url": "https://api.github.com/users/steveklabnik", "html_url": "https://github.com/steveklabnik", "followers_url": "https://api.github.com/users/steveklabnik/followers", "following_url": "https://api.github.com/users/steveklabnik/following{/other_user}", "gists_url": "https://api.github.com/users/steveklabnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/steveklabnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/steveklabnik/subscriptions", "organizations_url": "https://api.github.com/users/steveklabnik/orgs", "repos_url": "https://api.github.com/users/steveklabnik/repos", "events_url": "https://api.github.com/users/steveklabnik/events{/privacy}", "received_events_url": "https://api.github.com/users/steveklabnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c6291e04cc620ce3824d8bccdb8a5bd923fcd741", "url": "https://api.github.com/repos/rust-lang/rust/commits/c6291e04cc620ce3824d8bccdb8a5bd923fcd741", "html_url": "https://github.com/rust-lang/rust/commit/c6291e04cc620ce3824d8bccdb8a5bd923fcd741"}], "stats": {"total": 58, "additions": 54, "deletions": 4}, "files": [{"sha": "84cea5dabc3b528edacdcb1be014dbe821e8d235", "filename": "src/doc/trpl/functions.md", "status": "modified", "additions": 54, "deletions": 4, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/dbbcb434b12da3465037ff2bbd16b1060afa3469/src%2Fdoc%2Ftrpl%2Ffunctions.md", "raw_url": "https://github.com/rust-lang/rust/raw/dbbcb434b12da3465037ff2bbd16b1060afa3469/src%2Fdoc%2Ftrpl%2Ffunctions.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Ftrpl%2Ffunctions.md?ref=dbbcb434b12da3465037ff2bbd16b1060afa3469", "patch": "@@ -214,11 +214,61 @@ fn diverges() -> ! {\n \n `panic!` is a macro, similar to `println!()` that we\u2019ve already seen. Unlike\n `println!()`, `panic!()` causes the current thread of execution to crash with\n-the given message.\n+the given message. Because this function will cause a crash, it will never\n+return, and so it has the type \u2018`!`\u2019, which is read \u2018diverges\u2019.\n \n-Because this function will cause a crash, it will never return, and so it has\n-the type \u2018`!`\u2019, which is read \u2018diverges\u2019. A diverging function can be used\n-as any type:\n+If you add a main function that calls `diverges()` and run it, you\u2019ll get\n+some output that looks like this:\n+\n+```text\n+thread \u2018<main>\u2019 panicked at \u2018This function never returns!\u2019, hello.rs:2\n+```\n+\n+If you want more information, you can get a backtrace by setting the\n+`RUST_BACKTRACE` environment variable:\n+\n+```text\n+$ RUST_BACKTRACE=1 ./diverges\n+thread '<main>' panicked at 'This function never returns!', hello.rs:2\n+stack backtrace:\n+   1:     0x7f402773a829 - sys::backtrace::write::h0942de78b6c02817K8r\n+   2:     0x7f402773d7fc - panicking::on_panic::h3f23f9d0b5f4c91bu9w\n+   3:     0x7f402773960e - rt::unwind::begin_unwind_inner::h2844b8c5e81e79558Bw\n+   4:     0x7f4027738893 - rt::unwind::begin_unwind::h4375279447423903650\n+   5:     0x7f4027738809 - diverges::h2266b4c4b850236beaa\n+   6:     0x7f40277389e5 - main::h19bb1149c2f00ecfBaa\n+   7:     0x7f402773f514 - rt::unwind::try::try_fn::h13186883479104382231\n+   8:     0x7f402773d1d8 - __rust_try\n+   9:     0x7f402773f201 - rt::lang_start::ha172a3ce74bb453aK5w\n+  10:     0x7f4027738a19 - main\n+  11:     0x7f402694ab44 - __libc_start_main\n+  12:     0x7f40277386c8 - <unknown>\n+  13:                0x0 - <unknown>\n+```\n+\n+`RUST_BACKTRACE` also works with Cargo\u2019s `run` command:\n+\n+```text\n+$ RUST_BACKTRACE=1 cargo run\n+     Running `target/debug/diverges`\n+thread '<main>' panicked at 'This function never returns!', hello.rs:2\n+stack backtrace:\n+   1:     0x7f402773a829 - sys::backtrace::write::h0942de78b6c02817K8r\n+   2:     0x7f402773d7fc - panicking::on_panic::h3f23f9d0b5f4c91bu9w\n+   3:     0x7f402773960e - rt::unwind::begin_unwind_inner::h2844b8c5e81e79558Bw\n+   4:     0x7f4027738893 - rt::unwind::begin_unwind::h4375279447423903650\n+   5:     0x7f4027738809 - diverges::h2266b4c4b850236beaa\n+   6:     0x7f40277389e5 - main::h19bb1149c2f00ecfBaa\n+   7:     0x7f402773f514 - rt::unwind::try::try_fn::h13186883479104382231\n+   8:     0x7f402773d1d8 - __rust_try\n+   9:     0x7f402773f201 - rt::lang_start::ha172a3ce74bb453aK5w\n+  10:     0x7f4027738a19 - main\n+  11:     0x7f402694ab44 - __libc_start_main\n+  12:     0x7f40277386c8 - <unknown>\n+  13:                0x0 - <unknown>\n+```\n+\n+A diverging function can be used as any type:\n \n ```should_panic\n # fn diverges() -> ! {"}]}