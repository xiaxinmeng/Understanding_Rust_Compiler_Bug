{"sha": "1b3465cf9eb8063b22649a34ba780b17eb78b253", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFiMzQ2NWNmOWViODA2M2IyMjY0OWEzNGJhNzgwYjE3ZWI3OGIyNTM=", "commit": {"author": {"name": "Richo Healey", "email": "richo@psych0tik.net", "date": "2015-05-24T02:24:17Z"}, "committer": {"name": "Richo Healey", "email": "richo@psych0tik.net", "date": "2015-05-24T02:51:44Z"}, "message": "driver: Only emit the RUST_BACKTRACE message if not present", "tree": {"sha": "73b5fc54cbbfd500f632ccc9ec704cdbd5d5f2cc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/73b5fc54cbbfd500f632ccc9ec704cdbd5d5f2cc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1b3465cf9eb8063b22649a34ba780b17eb78b253", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1b3465cf9eb8063b22649a34ba780b17eb78b253", "html_url": "https://github.com/rust-lang/rust/commit/1b3465cf9eb8063b22649a34ba780b17eb78b253", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1b3465cf9eb8063b22649a34ba780b17eb78b253/comments", "author": {"login": "richo", "id": 476418, "node_id": "MDQ6VXNlcjQ3NjQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richo", "html_url": "https://github.com/richo", "followers_url": "https://api.github.com/users/richo/followers", "following_url": "https://api.github.com/users/richo/following{/other_user}", "gists_url": "https://api.github.com/users/richo/gists{/gist_id}", "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richo/subscriptions", "organizations_url": "https://api.github.com/users/richo/orgs", "repos_url": "https://api.github.com/users/richo/repos", "events_url": "https://api.github.com/users/richo/events{/privacy}", "received_events_url": "https://api.github.com/users/richo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "richo", "id": 476418, "node_id": "MDQ6VXNlcjQ3NjQxOA==", "avatar_url": "https://avatars.githubusercontent.com/u/476418?v=4", "gravatar_id": "", "url": "https://api.github.com/users/richo", "html_url": "https://github.com/richo", "followers_url": "https://api.github.com/users/richo/followers", "following_url": "https://api.github.com/users/richo/following{/other_user}", "gists_url": "https://api.github.com/users/richo/gists{/gist_id}", "starred_url": "https://api.github.com/users/richo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/richo/subscriptions", "organizations_url": "https://api.github.com/users/richo/orgs", "repos_url": "https://api.github.com/users/richo/repos", "events_url": "https://api.github.com/users/richo/events{/privacy}", "received_events_url": "https://api.github.com/users/richo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0c2642a571e951a15c2bc7550c86f583ad02ffcd", "url": "https://api.github.com/repos/rust-lang/rust/commits/0c2642a571e951a15c2bc7550c86f583ad02ffcd", "html_url": "https://github.com/rust-lang/rust/commit/0c2642a571e951a15c2bc7550c86f583ad02ffcd"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "d91a26ed4ee9b0b37ed36b1b4e4ab26a8fa6cd21", "filename": "src/librustc_driver/lib.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/1b3465cf9eb8063b22649a34ba780b17eb78b253/src%2Flibrustc_driver%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1b3465cf9eb8063b22649a34ba780b17eb78b253/src%2Flibrustc_driver%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Flib.rs?ref=1b3465cf9eb8063b22649a34ba780b17eb78b253", "patch": "@@ -831,11 +831,14 @@ pub fn monitor<F:FnOnce()+Send+'static>(f: F) {\n                     \"the compiler unexpectedly panicked. this is a bug.\".to_string(),\n                     format!(\"we would appreciate a bug report: {}\",\n                             BUG_REPORT_URL),\n-                    \"run with `RUST_BACKTRACE=1` for a backtrace\".to_string(),\n                 ];\n                 for note in &xs {\n                     emitter.emit(None, &note[..], None, diagnostic::Note)\n                 }\n+                if let None = env::var_os(\"RUST_BACKTRACE\") {\n+                    emitter.emit(None, \"run with `RUST_BACKTRACE=1` for a backtrace\",\n+                                 None, diagnostic::Note);\n+                }\n \n                 println!(\"{}\", str::from_utf8(&data.lock().unwrap()).unwrap());\n             }"}]}