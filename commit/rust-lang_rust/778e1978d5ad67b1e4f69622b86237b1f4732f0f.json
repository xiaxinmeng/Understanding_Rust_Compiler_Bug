{"sha": "778e1978d5ad67b1e4f69622b86237b1f4732f0f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc3OGUxOTc4ZDVhZDY3YjFlNGY2OTYyMmI4NjIzN2IxZjQ3MzJmMGY=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-03-18T20:35:46Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2021-03-18T23:57:44Z"}, "message": "Mark early otherwise optimization unsound", "tree": {"sha": "b62d2aa523f3de7ec5beeb02a41818b0dce92342", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b62d2aa523f3de7ec5beeb02a41818b0dce92342"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/778e1978d5ad67b1e4f69622b86237b1f4732f0f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEF0ntrgrd9qf9uuThgTGiTgx5768FAmBT6PkACgkQgTGiTgx5\n768NRw//WO1PTV/6TkpOGhOHjAPOoG5H7gBLQ3HQ7It8I6p/ht8b5fz8ME26kygF\ngT7xLPLGsWibE3IgibaUDAy/CHfqAcvgClWoDFBOfj0PiaiSFldkDkGqrkpomany\nGHNZEJhFevwiFBBaWhWFuT7oOR/LFR81Cf8cvdPw1mzYhrfKA5a6kbjFUWZXubWm\n55bT1D2a/xg3pgIxGhuLM1qyOQ9Vz6iQ04ube2bTAKiS50Jk+dH83+IiMDCHP2b0\nlP8YHDqZocJyrhRMY9ZfEfaZ/v8o7tKGVdJYwzAUcfHOGOMQhHPgez7SIjq0iZzg\nk0tO6QkGvMKJDqko9Vjm1aOgds/4sk/TT+JeGnp9u0sAuL5QRo4fEslDtsEaADlc\n9Q9+RT6nmbff0RLOmotFX6t5AmIjGyisgco5hMV6QravnxVNxjQWWw+qyAW5yh0d\nshdsfxHGo1CuEEBGEU28907DJw9QeDOGE5UhDLqY8dABGnGdcuM+AdLd1WVUN9p3\n/N/4nOUvFdwpZjVjOOgRz6cCuU04Md319urdT6bt7uKhhx4zHmzozbhNEld/Cnua\nu5YhueAzZgP4r2t8jxrVeGye/kElF8t2QPH1lmLx3UY+GL141hfd9PrRWEvb3ATr\nKhllLh9TBFI+fLtR/FdVU5AJVFSnnT7oSnHUFdScZLHrt2aku8Y=\n=9A0G\n-----END PGP SIGNATURE-----", "payload": "tree b62d2aa523f3de7ec5beeb02a41818b0dce92342\nparent 1705a7d64b833d1c4b69958b0627bd054e6d764b\nauthor Santiago Pastorino <spastorino@gmail.com> 1616099746 -0300\ncommitter Santiago Pastorino <spastorino@gmail.com> 1616111864 -0300\n\nMark early otherwise optimization unsound\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/778e1978d5ad67b1e4f69622b86237b1f4732f0f", "html_url": "https://github.com/rust-lang/rust/commit/778e1978d5ad67b1e4f69622b86237b1f4732f0f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/778e1978d5ad67b1e4f69622b86237b1f4732f0f/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1705a7d64b833d1c4b69958b0627bd054e6d764b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1705a7d64b833d1c4b69958b0627bd054e6d764b", "html_url": "https://github.com/rust-lang/rust/commit/1705a7d64b833d1c4b69958b0627bd054e6d764b"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "f7ea9faec47283cf2903062fedd031d0f9c4a440", "filename": "compiler/rustc_mir/src/transform/early_otherwise_branch.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/778e1978d5ad67b1e4f69622b86237b1f4732f0f/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fearly_otherwise_branch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/778e1978d5ad67b1e4f69622b86237b1f4732f0f/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fearly_otherwise_branch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fearly_otherwise_branch.rs?ref=778e1978d5ad67b1e4f69622b86237b1f4732f0f", "patch": "@@ -26,6 +26,11 @@ pub struct EarlyOtherwiseBranch;\n \n impl<'tcx> MirPass<'tcx> for EarlyOtherwiseBranch {\n     fn run_pass(&self, tcx: TyCtxt<'tcx>, body: &mut Body<'tcx>) {\n+        //  FIXME(#78496)\n+        if !tcx.sess.opts.debugging_opts.unsound_mir_opts {\n+            return;\n+        }\n+\n         if tcx.sess.mir_opt_level() < 3 {\n             return;\n         }"}, {"sha": "b2caf7d7b8fde4353c63dd1829f6ecc08cbb2ba6", "filename": "src/test/mir-opt/early_otherwise_branch.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/778e1978d5ad67b1e4f69622b86237b1f4732f0f/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.rs", "raw_url": "https://github.com/rust-lang/rust/raw/778e1978d5ad67b1e4f69622b86237b1f4732f0f/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch.rs?ref=778e1978d5ad67b1e4f69622b86237b1f4732f0f", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: -Z mir-opt-level=4\n+// compile-flags: -Z mir-opt-level=4 -Z unsound-mir-opts\n // EMIT_MIR early_otherwise_branch.opt1.EarlyOtherwiseBranch.diff\n fn opt1(x: Option<u32>, y: Option<u32>) -> u32 {\n     match (x, y) {"}, {"sha": "8527c01d756589ec0446deaee306eee29886eb3c", "filename": "src/test/mir-opt/early_otherwise_branch_3_element_tuple.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/778e1978d5ad67b1e4f69622b86237b1f4732f0f/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.rs", "raw_url": "https://github.com/rust-lang/rust/raw/778e1978d5ad67b1e4f69622b86237b1f4732f0f/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fearly_otherwise_branch_3_element_tuple.rs?ref=778e1978d5ad67b1e4f69622b86237b1f4732f0f", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: -Z mir-opt-level=4\n+// compile-flags: -Z mir-opt-level=4 -Z unsound-mir-opts\n \n // EMIT_MIR early_otherwise_branch_3_element_tuple.opt1.EarlyOtherwiseBranch.diff\n fn opt1(x: Option<u32>, y: Option<u32>, z: Option<u32>) -> u32 {"}]}