{"sha": "ea4219f6e59bb0a6cd915cf71c934079767944b0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVhNDIxOWY2ZTU5YmIwYTZjZDkxNWNmNzFjOTM0MDc5NzY3OTQ0YjA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-01-05T00:36:46Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2014-01-05T00:36:46Z"}, "message": "auto merge of #11290 : alexcrichton/rust/testname, r=brson\n\nCloses #11288\r\nCloses #11222", "tree": {"sha": "2d7f0acdbd36c25ed8e2abc8009ebe9082eb70d5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2d7f0acdbd36c25ed8e2abc8009ebe9082eb70d5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ea4219f6e59bb0a6cd915cf71c934079767944b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ea4219f6e59bb0a6cd915cf71c934079767944b0", "html_url": "https://github.com/rust-lang/rust/commit/ea4219f6e59bb0a6cd915cf71c934079767944b0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ea4219f6e59bb0a6cd915cf71c934079767944b0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "19cff913f369343182b83f9d05c6c7418890fd40", "url": "https://api.github.com/repos/rust-lang/rust/commits/19cff913f369343182b83f9d05c6c7418890fd40", "html_url": "https://github.com/rust-lang/rust/commit/19cff913f369343182b83f9d05c6c7418890fd40"}, {"sha": "2453079d09d992b4a234761025cdcca618793027", "url": "https://api.github.com/repos/rust-lang/rust/commits/2453079d09d992b4a234761025cdcca618793027", "html_url": "https://github.com/rust-lang/rust/commit/2453079d09d992b4a234761025cdcca618793027"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "4573ca3a14f4f35176c7784fd012c198998772e0", "filename": "mk/tests.mk", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/ea4219f6e59bb0a6cd915cf71c934079767944b0/mk%2Ftests.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ea4219f6e59bb0a6cd915cf71c934079767944b0/mk%2Ftests.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Ftests.mk?ref=ea4219f6e59bb0a6cd915cf71c934079767944b0", "patch": "@@ -768,7 +768,7 @@ $$(call TEST_OK_FILE,$(1),$(2),$(3),doc-$(4)):\t\t\\\n \t\t$$(HBIN$(1)_H_$(3))/rustdoc$$(X_$(3))\n \t@$$(call E, run doc-$(4) [$(2)])\n \t$$(Q)$$(HBIN$(1)_H_$(3))/rustdoc$$(X_$(3)) --test \\\n-\t    $$(CRATE_DOC_LIB-$(4)) && touch $$@\n+\t    $$(CRATE_DOC_LIB-$(4)) --test-args \"$$(TESTARGS)\" && touch $$@\n else\n $$(call TEST_OK_FILE,$(1),$(2),$(3),doc-$(4)):\n \ttouch $$@\n@@ -970,12 +970,12 @@ $(3)/test/run-make/%-$(1)-T-$(2)-H-$(3).ok: \\\n \t\t$$(CSREQ$(1)_T_$(2)_H_$(3))\n \t@rm -rf $(3)/test/run-make/$$*\n \t@mkdir -p $(3)/test/run-make/$$*\n-\t@echo maketest: $$*\n \t$$(Q)$$(CFG_PYTHON) $(S)src/etc/maketest.py $$(dir $$<) \\\n \t    $$(HBIN$(1)_H_$(3))/rustc$$(X_$(3)) \\\n \t    $(3)/test/run-make/$$* \\\n \t    \"$$(CC_$(3)) $$(CFG_GCCISH_CFLAGS_$(3))\" \\\n-\t    $$(HBIN$(1)_H_$(3))/rustdoc$$(X_$(3))\n+\t    $$(HBIN$(1)_H_$(3))/rustdoc$$(X_$(3)) \\\n+\t    \"$$(TESTNAME)\"\n \t@touch $$@\n else\n # FIXME #11094 - The above rule doesn't work right for multiple targets"}, {"sha": "91de7fba7580a7f83c240fec7ec2f75335f04dde", "filename": "src/etc/maketest.py", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ea4219f6e59bb0a6cd915cf71c934079767944b0/src%2Fetc%2Fmaketest.py", "raw_url": "https://github.com/rust-lang/rust/raw/ea4219f6e59bb0a6cd915cf71c934079767944b0/src%2Fetc%2Fmaketest.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fmaketest.py?ref=ea4219f6e59bb0a6cd915cf71c934079767944b0", "patch": "@@ -8,6 +8,11 @@\n os.putenv('TMPDIR', os.path.abspath(sys.argv[3]))\n os.putenv('CC', sys.argv[4])\n os.putenv('RUSTDOC', os.path.abspath(sys.argv[5]))\n+filt = sys.argv[6]\n+\n+if not filt in sys.argv[1]:\n+    sys.exit(0)\n+print('maketest: ' + os.path.basename(os.path.dirname(sys.argv[1])))\n \n proc = subprocess.Popen(['make', '-C', sys.argv[1]],\n                         stdout = subprocess.PIPE,"}]}