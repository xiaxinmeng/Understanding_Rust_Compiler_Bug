{"sha": "a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE3YmQzNmM5ZThjZGZhYzZhNmVkZDQxMjRlMGQxZDk5YTQxYjk5YTI=", "commit": {"author": {"name": "Linus Unneb\u00e4ck", "email": "linus@folkdatorn.se", "date": "2019-03-11T16:07:31Z"}, "committer": {"name": "Linus Unneb\u00e4ck", "email": "linus@folkdatorn.se", "date": "2019-03-16T11:13:32Z"}, "message": "Add peer_addr function to UdpSocket", "tree": {"sha": "17494930a8cd851269bbc8870b621c1b40561cc4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/17494930a8cd851269bbc8870b621c1b40561cc4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJIBAABCgAyFiEEGVAiYwRM3WarYwjjznDOrpwPpm8FAlyM2l0UHGxpbnVzQGZv\nbGtkYXRvcm4uc2UACgkQznDOrpwPpm+V0BAAwipVRB+kA69lWEM+ino5dgG9X+P2\nKRlICt+MTgc+boStF9ps4xh1f/o+TvYxmgG4gtqkp/M4Vp9QEICkJ1jMqM9d/VXn\naJ3zbZ2BetVKygJyhqVz0WWAjtiRHqRHb0HmC9EwmNdssoZg0opcNaUiKk1pkkyM\nsbhWPRkWcd0aRf7Em68xx0GBN7osFE6YyTObu8cl9XmDdLcsUnx2+jZKPuGk1tGW\nlS2pFS9XTlpcklvCOs3KkX8oKx69GEyrRGF1YRRPj0WO90IAwMUVmH4pewSWm/tl\niZKq9dy/KJZjF5+5YIwB+3fcjfMta9lEcPJpxUIzpzVnU1NLwCC4CzwMLVak0Lvm\nWJJZ/i4ycAPMhJxmqEifAIAgb5U5FFeW37Sen7n7OMyF4+fqSiRoCXSLM/+fWLSL\n57X/txUKHyFPA8qNwTXs+9XFA27dESzWFQNfXus7Z0+teBt1CL1Og1X2LPG162vV\nOGBJ26YkFOVEa8+0oassRed/JyUhhXswBWwuE19niiwWTcEhSf1Sm1vqhYj2L7bK\nQdvlUcvuYU0XJ6ZTeaClYVsd4EHUmL78UbjVbj6FqQdICqg0uuK2m+UbAO2ouzf+\nye6uK789Gpva3Pn+wDpZ3pCFQ6Xx8Qw1HY2LxULkBoCS0jXI+nrlQ89+dohUBacM\nnj+bDPwm+x2fYkQ=\n=baXg\n-----END PGP SIGNATURE-----", "payload": "tree 17494930a8cd851269bbc8870b621c1b40561cc4\nparent 52e885628e4317aa3f158622435927eb29b812e9\nauthor Linus Unneb\u00e4ck <linus@folkdatorn.se> 1552320451 +0000\ncommitter Linus Unneb\u00e4ck <linus@folkdatorn.se> 1552734812 +0000\n\nAdd peer_addr function to UdpSocket\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "html_url": "https://github.com/rust-lang/rust/commit/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/comments", "author": {"login": "LinusU", "id": 189580, "node_id": "MDQ6VXNlcjE4OTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/189580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LinusU", "html_url": "https://github.com/LinusU", "followers_url": "https://api.github.com/users/LinusU/followers", "following_url": "https://api.github.com/users/LinusU/following{/other_user}", "gists_url": "https://api.github.com/users/LinusU/gists{/gist_id}", "starred_url": "https://api.github.com/users/LinusU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LinusU/subscriptions", "organizations_url": "https://api.github.com/users/LinusU/orgs", "repos_url": "https://api.github.com/users/LinusU/repos", "events_url": "https://api.github.com/users/LinusU/events{/privacy}", "received_events_url": "https://api.github.com/users/LinusU/received_events", "type": "User", "site_admin": false}, "committer": {"login": "LinusU", "id": 189580, "node_id": "MDQ6VXNlcjE4OTU4MA==", "avatar_url": "https://avatars.githubusercontent.com/u/189580?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LinusU", "html_url": "https://github.com/LinusU", "followers_url": "https://api.github.com/users/LinusU/followers", "following_url": "https://api.github.com/users/LinusU/following{/other_user}", "gists_url": "https://api.github.com/users/LinusU/gists{/gist_id}", "starred_url": "https://api.github.com/users/LinusU/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LinusU/subscriptions", "organizations_url": "https://api.github.com/users/LinusU/orgs", "repos_url": "https://api.github.com/users/LinusU/repos", "events_url": "https://api.github.com/users/LinusU/events{/privacy}", "received_events_url": "https://api.github.com/users/LinusU/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "52e885628e4317aa3f158622435927eb29b812e9", "url": "https://api.github.com/repos/rust-lang/rust/commits/52e885628e4317aa3f158622435927eb29b812e9", "html_url": "https://github.com/rust-lang/rust/commit/52e885628e4317aa3f158622435927eb29b812e9"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "c7ccf45b953e7fea69e7601d8893f7006c8014ee", "filename": "src/libstd/net/udp.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fnet%2Fudp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fnet%2Fudp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnet%2Fudp.rs?ref=a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "patch": "@@ -180,6 +180,23 @@ impl UdpSocket {\n         }\n     }\n \n+    /// Returns the socket address of the remote peer this socket was connected to.\n+    ///\n+    /// # Examples\n+    ///\n+    /// ```no_run\n+    /// use std::net::{Ipv4Addr, SocketAddr, SocketAddrV4, UdpSocket};\n+    ///\n+    /// let socket = UdpSocket::bind(\"127.0.0.1:34254\").expect(\"couldn't bind to address\");\n+    /// socket.connect(\"192.168.0.1:41203\").expect(\"couldn't connect to address\");\n+    /// assert_eq!(socket.peer_addr().unwrap(),\n+    ///            SocketAddr::V4(SocketAddrV4::new(Ipv4Addr::new(192, 168, 0, 1), 41203)));\n+    /// ```\n+    #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n+        self.0.peer_addr()\n+    }\n+\n     /// Returns the socket address that this socket was created from.\n     ///\n     /// # Examples"}, {"sha": "4364a1365443a20f27bd97ae1a05f128943b70ff", "filename": "src/libstd/sys/cloudabi/shims/net.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fcloudabi%2Fshims%2Fnet.rs?ref=a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "patch": "@@ -159,6 +159,10 @@ impl UdpSocket {\n         unsupported()\n     }\n \n+    pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n+        match self.0 {}\n+    }\n+\n     pub fn socket_addr(&self) -> io::Result<SocketAddr> {\n         match self.0 {}\n     }"}, {"sha": "274123dce4b5846110be17196db5433ebebd726d", "filename": "src/libstd/sys/redox/net/udp.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys%2Fredox%2Fnet%2Fudp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys%2Fredox%2Fnet%2Fudp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fredox%2Fnet%2Fudp.rs?ref=a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "patch": "@@ -72,6 +72,11 @@ impl UdpSocket {\n         Ok(None)\n     }\n \n+    pub fn peer_addr(&self) -> Result<SocketAddr> {\n+        let path = self.0.path()?;\n+        Ok(path_to_peer_addr(path.to_str().unwrap_or(\"\")))\n+    }\n+\n     pub fn socket_addr(&self) -> Result<SocketAddr> {\n         let path = self.0.path()?;\n         Ok(path_to_local_addr(path.to_str().unwrap_or(\"\")))"}, {"sha": "e851bdfe6a8318b2837a23ef84a5e805f52636d0", "filename": "src/libstd/sys/sgx/net.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys%2Fsgx%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys%2Fsgx%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fsgx%2Fnet.rs?ref=a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "patch": "@@ -257,6 +257,10 @@ impl UdpSocket {\n         unsupported()\n     }\n \n+    pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n+        match self.0 {}\n+    }\n+\n     pub fn socket_addr(&self) -> io::Result<SocketAddr> {\n         match self.0 {}\n     }"}, {"sha": "b77bcee4b9d04b4c107f29d6018a1aba5fd52e02", "filename": "src/libstd/sys_common/net.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys_common%2Fnet.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2/src%2Flibstd%2Fsys_common%2Fnet.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys_common%2Fnet.rs?ref=a7bd36c9e8cdfac6a6edd4124e0d1d99a41b99a2", "patch": "@@ -472,6 +472,12 @@ impl UdpSocket {\n \n     pub fn into_socket(self) -> Socket { self.inner }\n \n+    pub fn peer_addr(&self) -> io::Result<SocketAddr> {\n+        sockname(|buf, len| unsafe {\n+            c::getpeername(*self.inner.as_inner(), buf, len)\n+        })\n+    }\n+\n     pub fn socket_addr(&self) -> io::Result<SocketAddr> {\n         sockname(|buf, len| unsafe {\n             c::getsockname(*self.inner.as_inner(), buf, len)"}]}