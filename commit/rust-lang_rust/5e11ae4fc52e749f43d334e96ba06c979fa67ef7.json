{"sha": "5e11ae4fc52e749f43d334e96ba06c979fa67ef7", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVlMTFhZTRmYzUyZTc0OWY0M2QzMzRlOTZiYTA2Yzk3OWZhNjdlZjc=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-07-20T15:11:30Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-07-20T15:12:30Z"}, "message": "ci: allow RLA to pick the right PR number", "tree": {"sha": "e71fda9f3e1aca57a5fc7ac60223706d8e644546", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e71fda9f3e1aca57a5fc7ac60223706d8e644546"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5e11ae4fc52e749f43d334e96ba06c979fa67ef7", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl8VtF8ACgkQPgar6Auq\n8ZyONxAAv76wVt6E8yxh87nPWeiD6x1kEqRF2P32hdx+BxSnVMwUyUewKWCnJ2Nh\nTu5v05FtqriTv7UoycCM1VSjHNAu9gJc8aDGUAEZm7zZDwhfZOLhtIRPoegSO305\nFZzr5He8M575jFCuqccxoCmmJB1xfsAtEyW4Z3v5tDSMNZpWdtD3xwjLGMlvOUxv\nlekoOembyGezNgNLSH5ZOtGfwHSmQjKxXzC57rQcl5c76Yyfh+bMT1lYHheLFE3Q\npzUGGP9zc35jgHLiKhGv4wiruXaqKoTpVflaAQQh2geypmrGOdIi7lVQ74dbFiqJ\nEYjbr2ttiCE8LxZMwxRnkznZIeJNZvIdh0FLmmFcb9QqTxJmZz11ymXq0Y40psAw\ngTg/wrFhss2OXfFQbY20k7l8YCCSeC/4P4IcAlnRWcYcdl7ILolu8YUTfvmi90Zw\n3/tOu0IHKmthOpa9ZjSoiM7V8gqtFl2CRW+keK0lUXkb9FiaPoHrI8okMPObPz3a\nspYdtd8k+Ui1EiTrSGWNLUq3gl96KRjX1CkM+aQBfmu4dOfFvCev3efphf51EVkN\nCpwLhczlHnFITdSIgifZfMnJxejUYcOWpbeiyg1OyMeAYO9b8h6d/71xu7LULAeq\ngoguv/8y2iisTwkJT+aXC9pB/GbAF1C5pjZWYqoZ/XQQFz8ug5E=\n=fNCu\n-----END PGP SIGNATURE-----", "payload": "tree e71fda9f3e1aca57a5fc7ac60223706d8e644546\nparent 71384101ea3b030b80f7def80a37f67e148518b0\nauthor Pietro Albini <pietro@pietroalbini.org> 1595257890 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1595257950 +0200\n\nci: allow RLA to pick the right PR number\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5e11ae4fc52e749f43d334e96ba06c979fa67ef7", "html_url": "https://github.com/rust-lang/rust/commit/5e11ae4fc52e749f43d334e96ba06c979fa67ef7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5e11ae4fc52e749f43d334e96ba06c979fa67ef7/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "71384101ea3b030b80f7def80a37f67e148518b0", "url": "https://api.github.com/repos/rust-lang/rust/commits/71384101ea3b030b80f7def80a37f67e148518b0", "html_url": "https://github.com/rust-lang/rust/commit/71384101ea3b030b80f7def80a37f67e148518b0"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "e3525efd4b6fdbf03f0f83b123e51ace39844d29", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/5e11ae4fc52e749f43d334e96ba06c979fa67ef7/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5e11ae4fc52e749f43d334e96ba06c979fa67ef7/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=5e11ae4fc52e749f43d334e96ba06c979fa67ef7", "patch": "@@ -63,6 +63,11 @@ jobs:\n         with:\n           github_token: \"${{ secrets.github_token }}\"\n         if: \"success() && !env.SKIP_JOB && github.ref != 'refs/heads/try'\"\n+      - name: configure the PR in which the error message will be posted\n+        run: \"echo \\\"[CI_PR_NUMBER=$num]\\\"\"\n+        env:\n+          num: \"${{ github.event.number }}\"\n+        if: \"success() && !env.SKIP_JOBS && github.event_name == 'pull_request'\"\n       - name: add extra environment variables\n         run: src/ci/scripts/setup-environment.sh\n         env:\n@@ -162,6 +167,11 @@ jobs:\n         with:\n           github_token: \"${{ secrets.github_token }}\"\n         if: \"success() && !env.SKIP_JOB && github.ref != 'refs/heads/try'\"\n+      - name: configure the PR in which the error message will be posted\n+        run: \"echo \\\"[CI_PR_NUMBER=$num]\\\"\"\n+        env:\n+          num: \"${{ github.event.number }}\"\n+        if: \"success() && !env.SKIP_JOBS && github.event_name == 'pull_request'\"\n       - name: add extra environment variables\n         run: src/ci/scripts/setup-environment.sh\n         env:\n@@ -479,6 +489,11 @@ jobs:\n         with:\n           github_token: \"${{ secrets.github_token }}\"\n         if: \"success() && !env.SKIP_JOB && github.ref != 'refs/heads/try'\"\n+      - name: configure the PR in which the error message will be posted\n+        run: \"echo \\\"[CI_PR_NUMBER=$num]\\\"\"\n+        env:\n+          num: \"${{ github.event.number }}\"\n+        if: \"success() && !env.SKIP_JOBS && github.event_name == 'pull_request'\"\n       - name: add extra environment variables\n         run: src/ci/scripts/setup-environment.sh\n         env:\n@@ -604,6 +619,11 @@ jobs:\n         with:\n           github_token: \"${{ secrets.github_token }}\"\n         if: \"success() && !env.SKIP_JOB && github.ref != 'refs/heads/try'\"\n+      - name: configure the PR in which the error message will be posted\n+        run: \"echo \\\"[CI_PR_NUMBER=$num]\\\"\"\n+        env:\n+          num: \"${{ github.event.number }}\"\n+        if: \"success() && !env.SKIP_JOBS && github.event_name == 'pull_request'\"\n       - name: add extra environment variables\n         run: src/ci/scripts/setup-environment.sh\n         env:"}, {"sha": "d2b804f08c392a886b1554bae79837a2265f2f53", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5e11ae4fc52e749f43d334e96ba06c979fa67ef7/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/5e11ae4fc52e749f43d334e96ba06c979fa67ef7/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=5e11ae4fc52e749f43d334e96ba06c979fa67ef7", "patch": "@@ -92,6 +92,15 @@ x--expand-yaml-anchors--remove:\n         if: success() && !env.SKIP_JOB && github.ref != 'refs/heads/try'\n         <<: *step\n \n+      # Rust Log Analyzer can't currently detect the PR number of a GitHub\n+      # Actions build on its own, so a hint in the log message is needed to\n+      # point it in the right direction.\n+      - name: configure the PR in which the error message will be posted\n+        run: echo \"[CI_PR_NUMBER=$num]\"\n+        env:\n+          num: ${{ github.event.number }}\n+        if: success() && !env.SKIP_JOBS && github.event_name == 'pull_request'\n+\n       - name: add extra environment variables\n         run: src/ci/scripts/setup-environment.sh\n         env:"}]}