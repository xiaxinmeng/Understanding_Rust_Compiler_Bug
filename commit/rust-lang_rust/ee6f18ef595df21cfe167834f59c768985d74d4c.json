{"sha": "ee6f18ef595df21cfe167834f59c768985d74d4c", "node_id": "C_kwDOAAsO6NoAKGVlNmYxOGVmNTk1ZGYyMWNmZTE2NzgzNGY1OWM3Njg5ODVkNzRkNGM", "commit": {"author": {"name": "Vincenzo Palazzo", "email": "vincenzopalazzodev@gmail.com", "date": "2022-11-26T21:23:27Z"}, "committer": {"name": "Vincenzo Palazzo", "email": "vincenzopalazzodev@gmail.com", "date": "2022-11-27T10:50:02Z"}, "message": "make simple check of prinf function.\n\nWith this commit we start to make some simple\ncheck when the name resolution fails, and\nwe generate some helper message in case the\nname is a C name like in the case of the `printf`\nand suggest the correct rust method.\n\nSigned-off-by: Vincenzo Palazzo <vincenzopalazzodev@gmail.com>", "tree": {"sha": "5a1d0d4c41dbeec0bdb6e387b250099410038878", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a1d0d4c41dbeec0bdb6e387b250099410038878"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ee6f18ef595df21cfe167834f59c768985d74d4c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE3eMWwQll8j3M3QQgi23CuHC4DV8FAmODQNoACgkQi23CuHC4\nDV+uFA/9HLpvAsK7pFeSz+w/X39SfrUw/Sqn0LVkJ6vplP9gKU953QwzpbHtlz/T\nKVvce57dxGrJfjq3/m1MnyZXq61KAYH/fC1JNFGsHuwZvQz0MXAp6uuxaAajqvqi\nmRWKPgGHmhZB73Wy4ntQk/7JxWw9DyeM5tTHf6UpgmYMDaXkZoBlC7Twsr1llt3k\nnOqgzHuGwf4ryb3HzB9jaJpxadv2OEVJ+hK0IjtYf+iz12zEfzgzCtWjZ+ip5M7t\niYNiGIMAp8qiiQ+hT+shbCGFj2uKgQgqdkYVhcdSMKx68ImT3ZZFr/1EOjqko8Y5\nVZs5iYTKYYEAib9VJx+ZFcXBN1LgNT60tyMDJOL6UVrGqNwEnEtCbD6G33IaLDTg\nFkV8rgFCNEqbCvuPqqsadIQzZBP47mAAjbS3qEx0+9RNF9lLDtOoCN3//MzWnjJp\nKZakh7WTzgI6nme4EXJxYUk9DX7tMgz6pVnrJkPUXn/vykqdiU+vw9meUI1VqcSi\nMhKR1+22tfkNbPXrx/Istp20i5K0U0ACYzP9PyC+nJqX8/obkBQyzlIYs+fNii1o\n+4b0qJOcF1kPLSonpMcYK2VyeZxrKc2rky3xW0bYDjJUhdxKyiFUVHrAEJhI/w/C\nupyVzW0XpP1ACYjcvscBum+srHYmQiB9m5AACgwkdGqkJyRGkxM=\n=Lqgn\n-----END PGP SIGNATURE-----", "payload": "tree 5a1d0d4c41dbeec0bdb6e387b250099410038878\nparent c3a1c023c0784ffbcf4dd57cf4618d208bccae69\nauthor Vincenzo Palazzo <vincenzopalazzodev@gmail.com> 1669497807 +0100\ncommitter Vincenzo Palazzo <vincenzopalazzodev@gmail.com> 1669546202 +0100\n\nmake simple check of prinf function.\n\nWith this commit we start to make some simple\ncheck when the name resolution fails, and\nwe generate some helper message in case the\nname is a C name like in the case of the `printf`\nand suggest the correct rust method.\n\nSigned-off-by: Vincenzo Palazzo <vincenzopalazzodev@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ee6f18ef595df21cfe167834f59c768985d74d4c", "html_url": "https://github.com/rust-lang/rust/commit/ee6f18ef595df21cfe167834f59c768985d74d4c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ee6f18ef595df21cfe167834f59c768985d74d4c/comments", "author": {"login": "vincenzopalazzo", "id": 17150045, "node_id": "MDQ6VXNlcjE3MTUwMDQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17150045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincenzopalazzo", "html_url": "https://github.com/vincenzopalazzo", "followers_url": "https://api.github.com/users/vincenzopalazzo/followers", "following_url": "https://api.github.com/users/vincenzopalazzo/following{/other_user}", "gists_url": "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincenzopalazzo/subscriptions", "organizations_url": "https://api.github.com/users/vincenzopalazzo/orgs", "repos_url": "https://api.github.com/users/vincenzopalazzo/repos", "events_url": "https://api.github.com/users/vincenzopalazzo/events{/privacy}", "received_events_url": "https://api.github.com/users/vincenzopalazzo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vincenzopalazzo", "id": 17150045, "node_id": "MDQ6VXNlcjE3MTUwMDQ1", "avatar_url": "https://avatars.githubusercontent.com/u/17150045?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vincenzopalazzo", "html_url": "https://github.com/vincenzopalazzo", "followers_url": "https://api.github.com/users/vincenzopalazzo/followers", "following_url": "https://api.github.com/users/vincenzopalazzo/following{/other_user}", "gists_url": "https://api.github.com/users/vincenzopalazzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/vincenzopalazzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vincenzopalazzo/subscriptions", "organizations_url": "https://api.github.com/users/vincenzopalazzo/orgs", "repos_url": "https://api.github.com/users/vincenzopalazzo/repos", "events_url": "https://api.github.com/users/vincenzopalazzo/events{/privacy}", "received_events_url": "https://api.github.com/users/vincenzopalazzo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3a1c023c0784ffbcf4dd57cf4618d208bccae69", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3a1c023c0784ffbcf4dd57cf4618d208bccae69", "html_url": "https://github.com/rust-lang/rust/commit/c3a1c023c0784ffbcf4dd57cf4618d208bccae69"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "5b9513ebc0da4ae9ced55de9fce5e9d9ca19cb2c", "filename": "compiler/rustc_resolve/src/late/diagnostics.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ee6f18ef595df21cfe167834f59c768985d74d4c/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee6f18ef595df21cfe167834f59c768985d74d4c/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Flate%2Fdiagnostics.rs?ref=ee6f18ef595df21cfe167834f59c768985d74d4c", "patch": "@@ -282,6 +282,14 @@ impl<'a: 'ast, 'ast> LateResolutionVisitor<'a, '_, 'ast> {\n                             \"you may want to use a bool value instead\",\n                             format!(\"{}\", item_typo),\n                         ))\n+                    // FIXME(vicnenzopalazzo): make the check smarter,\n+                    // and maybe expand with levenshtein distance checks\n+                    } else if item_str.as_str() == \"printf\" {\n+                        Some((\n+                            item_span,\n+                            \"you may have meant to use the `print` macro\",\n+                            \"print!\".to_owned(),\n+                        ))\n                     } else {\n                         suggestion\n                     };"}, {"sha": "25566cd7f2aeb8440b4d521ea852230b1dfb1f98", "filename": "src/test/ui/suggestions/seggest_print_over_printf.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ee6f18ef595df21cfe167834f59c768985d74d4c/src%2Ftest%2Fui%2Fsuggestions%2Fseggest_print_over_printf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ee6f18ef595df21cfe167834f59c768985d74d4c/src%2Ftest%2Fui%2Fsuggestions%2Fseggest_print_over_printf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fseggest_print_over_printf.rs?ref=ee6f18ef595df21cfe167834f59c768985d74d4c", "patch": "@@ -0,0 +1,9 @@\n+// Suggest to a user to use the print macros\n+// instead to use the printf.\n+\n+fn main() {\n+    let x = 4;\n+    printf(\"%d\", x);\n+    //~^ ERROR cannot find function `printf` in this scope\n+    //~| HELP you may have meant to use the `print` macro\n+}"}, {"sha": "7b1ce047a92747901cb76c0ca5b299e96f856934", "filename": "src/test/ui/suggestions/seggest_print_over_printf.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ee6f18ef595df21cfe167834f59c768985d74d4c/src%2Ftest%2Fui%2Fsuggestions%2Fseggest_print_over_printf.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ee6f18ef595df21cfe167834f59c768985d74d4c/src%2Ftest%2Fui%2Fsuggestions%2Fseggest_print_over_printf.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fseggest_print_over_printf.stderr?ref=ee6f18ef595df21cfe167834f59c768985d74d4c", "patch": "@@ -0,0 +1,14 @@\n+error[E0425]: cannot find function `printf` in this scope\n+  --> $DIR/seggest_print_over_printf.rs:6:5\n+   |\n+LL |     printf(\"%d\", x);\n+   |     ^^^^^^ not found in this scope\n+   |\n+help: you may have meant to use the `print` macro\n+   |\n+LL |     print!(\"%d\", x);\n+   |     ~~~~~~\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0425`."}]}