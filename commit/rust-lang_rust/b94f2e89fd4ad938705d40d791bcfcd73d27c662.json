{"sha": "b94f2e89fd4ad938705d40d791bcfcd73d27c662", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI5NGYyZTg5ZmQ0YWQ5Mzg3MDVkNDBkNzkxYmNmY2Q3M2QyN2M2NjI=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2019-09-25T17:49:56Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2019-09-25T21:45:18Z"}, "message": "unnecessary_operation: make test rustfixable", "tree": {"sha": "b7c0a41f22c3e453eeaf84f3bd9aad2bf3010080", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b7c0a41f22c3e453eeaf84f3bd9aad2bf3010080"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b94f2e89fd4ad938705d40d791bcfcd73d27c662", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b94f2e89fd4ad938705d40d791bcfcd73d27c662", "html_url": "https://github.com/rust-lang/rust/commit/b94f2e89fd4ad938705d40d791bcfcd73d27c662", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b94f2e89fd4ad938705d40d791bcfcd73d27c662/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "04dd580f377f4a02feb828aece5c84201c825257", "url": "https://api.github.com/repos/rust-lang/rust/commits/04dd580f377f4a02feb828aece5c84201c825257", "html_url": "https://github.com/rust-lang/rust/commit/04dd580f377f4a02feb828aece5c84201c825257"}], "stats": {"total": 139, "additions": 112, "deletions": 27}, "files": [{"sha": "2fca96c4cd556654db75f3f0b58ab24c0c9d028a", "filename": "tests/ui/unnecessary_operation.fixed", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/rust-lang/rust/blob/b94f2e89fd4ad938705d40d791bcfcd73d27c662/tests%2Fui%2Funnecessary_operation.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/b94f2e89fd4ad938705d40d791bcfcd73d27c662/tests%2Fui%2Funnecessary_operation.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_operation.fixed?ref=b94f2e89fd4ad938705d40d791bcfcd73d27c662", "patch": "@@ -0,0 +1,79 @@\n+// run-rustfix\n+\n+#![feature(box_syntax)]\n+#![allow(clippy::deref_addrof, dead_code, unused, clippy::no_effect)]\n+#![warn(clippy::unnecessary_operation)]\n+\n+struct Tuple(i32);\n+struct Struct {\n+    field: i32,\n+}\n+enum Enum {\n+    Tuple(i32),\n+    Struct { field: i32 },\n+}\n+struct DropStruct {\n+    field: i32,\n+}\n+impl Drop for DropStruct {\n+    fn drop(&mut self) {}\n+}\n+struct DropTuple(i32);\n+impl Drop for DropTuple {\n+    fn drop(&mut self) {}\n+}\n+enum DropEnum {\n+    Tuple(i32),\n+    Struct { field: i32 },\n+}\n+impl Drop for DropEnum {\n+    fn drop(&mut self) {}\n+}\n+struct FooString {\n+    s: String,\n+}\n+\n+fn get_number() -> i32 {\n+    0\n+}\n+\n+fn get_usize() -> usize {\n+    0\n+}\n+fn get_struct() -> Struct {\n+    Struct { field: 0 }\n+}\n+fn get_drop_struct() -> DropStruct {\n+    DropStruct { field: 0 }\n+}\n+\n+fn main() {\n+    get_number();\n+    get_number();\n+    get_struct();\n+    get_number();\n+    get_number();\n+    5;get_number();\n+    get_number();\n+    get_number();\n+    5;6;get_number();\n+    get_number();\n+    get_number();\n+    get_number();\n+    5;get_number();\n+    42;get_number();\n+    [42, 55];get_usize();\n+    42;get_number();\n+    get_number();\n+    [42; 55];get_usize();\n+    get_number();\n+    String::from(\"blah\");\n+\n+    // Do not warn\n+    DropTuple(get_number());\n+    DropStruct { field: get_number() };\n+    DropStruct { field: get_number() };\n+    DropStruct { ..get_drop_struct() };\n+    DropEnum::Tuple(get_number());\n+    DropEnum::Struct { field: get_number() };\n+}"}, {"sha": "08cb9ab522ee0d7f22ea647908102b06b73b36a7", "filename": "tests/ui/unnecessary_operation.rs", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b94f2e89fd4ad938705d40d791bcfcd73d27c662/tests%2Fui%2Funnecessary_operation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b94f2e89fd4ad938705d40d791bcfcd73d27c662/tests%2Fui%2Funnecessary_operation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_operation.rs?ref=b94f2e89fd4ad938705d40d791bcfcd73d27c662", "patch": "@@ -1,5 +1,7 @@\n+// run-rustfix\n+\n #![feature(box_syntax)]\n-#![allow(clippy::deref_addrof)]\n+#![allow(clippy::deref_addrof, dead_code, unused, clippy::no_effect)]\n #![warn(clippy::unnecessary_operation)]\n \n struct Tuple(i32);\n@@ -34,6 +36,10 @@ struct FooString {\n fn get_number() -> i32 {\n     0\n }\n+\n+fn get_usize() -> usize {\n+    0\n+}\n fn get_struct() -> Struct {\n     Struct { field: 0 }\n }\n@@ -56,10 +62,10 @@ fn main() {\n     ..get_number();\n     5..get_number();\n     [42, get_number()];\n-    [42, 55][get_number() as usize];\n+    [42, 55][get_usize()];\n     (42, get_number()).1;\n     [get_number(); 55];\n-    [42; 55][get_number() as usize];\n+    [42; 55][get_usize()];\n     {\n         get_number()\n     };"}, {"sha": "f88c9f9908beabdf4c2bef4afaebf708ee533059", "filename": "tests/ui/unnecessary_operation.stderr", "status": "modified", "additions": 24, "deletions": 24, "changes": 48, "blob_url": "https://github.com/rust-lang/rust/blob/b94f2e89fd4ad938705d40d791bcfcd73d27c662/tests%2Fui%2Funnecessary_operation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b94f2e89fd4ad938705d40d791bcfcd73d27c662/tests%2Fui%2Funnecessary_operation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Funnecessary_operation.stderr?ref=b94f2e89fd4ad938705d40d791bcfcd73d27c662", "patch": "@@ -1,123 +1,123 @@\n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:45:5\n+  --> $DIR/unnecessary_operation.rs:51:5\n    |\n LL |     Tuple(get_number());\n    |     ^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n    |\n    = note: `-D clippy::unnecessary-operation` implied by `-D warnings`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:46:5\n+  --> $DIR/unnecessary_operation.rs:52:5\n    |\n LL |     Struct { field: get_number() };\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:47:5\n+  --> $DIR/unnecessary_operation.rs:53:5\n    |\n LL |     Struct { ..get_struct() };\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_struct();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:48:5\n+  --> $DIR/unnecessary_operation.rs:54:5\n    |\n LL |     Enum::Tuple(get_number());\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:49:5\n+  --> $DIR/unnecessary_operation.rs:55:5\n    |\n LL |     Enum::Struct { field: get_number() };\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:50:5\n+  --> $DIR/unnecessary_operation.rs:56:5\n    |\n LL |     5 + get_number();\n    |     ^^^^^^^^^^^^^^^^^ help: replace it with: `5;get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:51:5\n+  --> $DIR/unnecessary_operation.rs:57:5\n    |\n LL |     *&get_number();\n    |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:52:5\n+  --> $DIR/unnecessary_operation.rs:58:5\n    |\n LL |     &get_number();\n    |     ^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:53:5\n+  --> $DIR/unnecessary_operation.rs:59:5\n    |\n LL |     (5, 6, get_number());\n    |     ^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `5;6;get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:54:5\n+  --> $DIR/unnecessary_operation.rs:60:5\n    |\n LL |     box get_number();\n    |     ^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:55:5\n+  --> $DIR/unnecessary_operation.rs:61:5\n    |\n LL |     get_number()..;\n    |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:56:5\n+  --> $DIR/unnecessary_operation.rs:62:5\n    |\n LL |     ..get_number();\n    |     ^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:57:5\n+  --> $DIR/unnecessary_operation.rs:63:5\n    |\n LL |     5..get_number();\n    |     ^^^^^^^^^^^^^^^^ help: replace it with: `5;get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:58:5\n+  --> $DIR/unnecessary_operation.rs:64:5\n    |\n LL |     [42, get_number()];\n    |     ^^^^^^^^^^^^^^^^^^^ help: replace it with: `42;get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:59:5\n+  --> $DIR/unnecessary_operation.rs:65:5\n    |\n-LL |     [42, 55][get_number() as usize];\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `[42, 55];get_number() as usize;`\n+LL |     [42, 55][get_usize()];\n+   |     ^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `[42, 55];get_usize();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:60:5\n+  --> $DIR/unnecessary_operation.rs:66:5\n    |\n LL |     (42, get_number()).1;\n    |     ^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `42;get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:61:5\n+  --> $DIR/unnecessary_operation.rs:67:5\n    |\n LL |     [get_number(); 55];\n    |     ^^^^^^^^^^^^^^^^^^^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:62:5\n+  --> $DIR/unnecessary_operation.rs:68:5\n    |\n-LL |     [42; 55][get_number() as usize];\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `[42; 55];get_number() as usize;`\n+LL |     [42; 55][get_usize()];\n+   |     ^^^^^^^^^^^^^^^^^^^^^^ help: replace it with: `[42; 55];get_usize();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:63:5\n+  --> $DIR/unnecessary_operation.rs:69:5\n    |\n LL | /     {\n LL | |         get_number()\n LL | |     };\n    | |______^ help: replace it with: `get_number();`\n \n error: statement can be reduced\n-  --> $DIR/unnecessary_operation.rs:66:5\n+  --> $DIR/unnecessary_operation.rs:72:5\n    |\n LL | /     FooString {\n LL | |         s: String::from(\"blah\"),"}]}