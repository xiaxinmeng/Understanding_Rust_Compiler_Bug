{"sha": "c518f2dd7040eca7591d3cacffe3646d8f54ac7c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM1MThmMmRkNzA0MGVjYTc1OTFkM2NhY2ZmZTM2NDZkOGY1NGFjN2M=", "commit": {"author": {"name": "Lukas Kalbertodt", "email": "lukas.kalbertodt@gmail.com", "date": "2019-03-14T12:27:49Z"}, "committer": {"name": "Lukas Kalbertodt", "email": "lukas.kalbertodt@gmail.com", "date": "2019-03-14T12:43:19Z"}, "message": "Overwrite Cursor's `Seek::stream_{len, position}` for performance", "tree": {"sha": "f42c3ca9af683c3207a34eb0513f4c40013a6692", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f42c3ca9af683c3207a34eb0513f4c40013a6692"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c518f2dd7040eca7591d3cacffe3646d8f54ac7c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEENwctvZ5TgcKYXim8PLr0FT+BhicFAlyKTGcACgkQPLr0FT+B\nhidI8g/9H8G6+iEZaZgcYOM/J3GfD2XVp8lWDaVooYNh/QnONDpvYlhAZNEROH8m\nIboFGx/Y9gPiSdnKjZxtuX1PNt5O4v8VEWELD74+VxHvxvROfQk6MOBzTRIJ/gjU\nRmm4o1phiKY3hAIkS59ty4bsspNjRuVNm8EkAW6HxhGTAN0MFfTOecUzdf5b13yi\nNRhREIS8aSl+l06S26BA10vJC+snMEwzeEdfTzXUE3vYW/vd03gJOqKOyre1CS+2\nVc6NpqIGReERfyXGKMwUukI3kq3RVgX8WPjU0cQ7g5ITxF+PLuy0y2rExx33gCU6\nBdRofobG0qlUmpZPfHikNj6YsekUIkAvTAyhXBm4qRAJyZbYi+1SouYAAE6O1RSe\nePWkYBrGdqvPB9k8YLtiCAnweRkiN/lDtJeXv3e9Evy2HAAjjIuzAQA5FGwPvQyy\n8kGnWEbRUQX0OFLZaNSMQb1vvXyDbslyaB146JebzB0pblsWvhLlhGdO8JUHhhvq\nmUhkARhZbaiakI8tX19LY0Svw79IHFCZFpOulB/7li5w2tvIRK+I3H+DV+dgqnzx\nfFnQKEo0JCUpWbOf6VwRqaD708B/FTjGCl0bx5p1HwkV8v6wNGlFEZh5n2e7/E9W\nSlhSDvUdy2640pi1tExJ+kBHfYQUse+RpBFlQhBc13PsUQNgwhc=\n=Fwzb\n-----END PGP SIGNATURE-----", "payload": "tree f42c3ca9af683c3207a34eb0513f4c40013a6692\nparent 598a1b4dd1a6cc1bfe689a6931af9e6aa47134e1\nauthor Lukas Kalbertodt <lukas.kalbertodt@gmail.com> 1552566469 +0100\ncommitter Lukas Kalbertodt <lukas.kalbertodt@gmail.com> 1552567399 +0100\n\nOverwrite Cursor's `Seek::stream_{len, position}` for performance\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c518f2dd7040eca7591d3cacffe3646d8f54ac7c", "html_url": "https://github.com/rust-lang/rust/commit/c518f2dd7040eca7591d3cacffe3646d8f54ac7c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c518f2dd7040eca7591d3cacffe3646d8f54ac7c/comments", "author": {"login": "LukasKalbertodt", "id": 7419664, "node_id": "MDQ6VXNlcjc0MTk2NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukasKalbertodt", "html_url": "https://github.com/LukasKalbertodt", "followers_url": "https://api.github.com/users/LukasKalbertodt/followers", "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}", "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions", "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs", "repos_url": "https://api.github.com/users/LukasKalbertodt/repos", "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}", "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events", "type": "User", "site_admin": false}, "committer": {"login": "LukasKalbertodt", "id": 7419664, "node_id": "MDQ6VXNlcjc0MTk2NjQ=", "avatar_url": "https://avatars.githubusercontent.com/u/7419664?v=4", "gravatar_id": "", "url": "https://api.github.com/users/LukasKalbertodt", "html_url": "https://github.com/LukasKalbertodt", "followers_url": "https://api.github.com/users/LukasKalbertodt/followers", "following_url": "https://api.github.com/users/LukasKalbertodt/following{/other_user}", "gists_url": "https://api.github.com/users/LukasKalbertodt/gists{/gist_id}", "starred_url": "https://api.github.com/users/LukasKalbertodt/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/LukasKalbertodt/subscriptions", "organizations_url": "https://api.github.com/users/LukasKalbertodt/orgs", "repos_url": "https://api.github.com/users/LukasKalbertodt/repos", "events_url": "https://api.github.com/users/LukasKalbertodt/events{/privacy}", "received_events_url": "https://api.github.com/users/LukasKalbertodt/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "598a1b4dd1a6cc1bfe689a6931af9e6aa47134e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/598a1b4dd1a6cc1bfe689a6931af9e6aa47134e1", "html_url": "https://github.com/rust-lang/rust/commit/598a1b4dd1a6cc1bfe689a6931af9e6aa47134e1"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "247d45c3ec91f6391522e04d1dad32bb7e772874", "filename": "src/libstd/io/cursor.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c518f2dd7040eca7591d3cacffe3646d8f54ac7c/src%2Flibstd%2Fio%2Fcursor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c518f2dd7040eca7591d3cacffe3646d8f54ac7c/src%2Flibstd%2Fio%2Fcursor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fio%2Fcursor.rs?ref=c518f2dd7040eca7591d3cacffe3646d8f54ac7c", "patch": "@@ -212,6 +212,14 @@ impl<T> io::Seek for Cursor<T> where T: AsRef<[u8]> {\n                            \"invalid seek to a negative or overflowing position\"))\n         }\n     }\n+\n+    fn stream_len(&mut self) -> io::Result<u64> {\n+        Ok(self.inner.as_ref().len() as u64)\n+    }\n+\n+    fn stream_position(&mut self) -> io::Result<u64> {\n+        Ok(self.pos)\n+    }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}]}