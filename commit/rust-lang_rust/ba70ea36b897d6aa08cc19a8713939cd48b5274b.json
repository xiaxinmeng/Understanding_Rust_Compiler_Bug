{"sha": "ba70ea36b897d6aa08cc19a8713939cd48b5274b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhNzBlYTM2Yjg5N2Q2YWEwOGNjMTlhODcxMzkzOWNkNDhiNTI3NGI=", "commit": {"author": {"name": "Nick Cameron", "email": "nrc@ncameron.org", "date": "2017-07-20T23:23:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-07-20T23:23:24Z"}, "message": "Merge pull request #1803 from nrc/writemode\n\nChange the writemode to overwrite", "tree": {"sha": "f34136acd08980904876d3bcf5e0d787a4e0f195", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f34136acd08980904876d3bcf5e0d787a4e0f195"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ba70ea36b897d6aa08cc19a8713939cd48b5274b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ba70ea36b897d6aa08cc19a8713939cd48b5274b", "html_url": "https://github.com/rust-lang/rust/commit/ba70ea36b897d6aa08cc19a8713939cd48b5274b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ba70ea36b897d6aa08cc19a8713939cd48b5274b/comments", "author": {"login": "nrc", "id": 762626, "node_id": "MDQ6VXNlcjc2MjYyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/762626?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nrc", "html_url": "https://github.com/nrc", "followers_url": "https://api.github.com/users/nrc/followers", "following_url": "https://api.github.com/users/nrc/following{/other_user}", "gists_url": "https://api.github.com/users/nrc/gists{/gist_id}", "starred_url": "https://api.github.com/users/nrc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nrc/subscriptions", "organizations_url": "https://api.github.com/users/nrc/orgs", "repos_url": "https://api.github.com/users/nrc/repos", "events_url": "https://api.github.com/users/nrc/events{/privacy}", "received_events_url": "https://api.github.com/users/nrc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf195fb3267976fab78b54ae537ea5c0ee121264", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf195fb3267976fab78b54ae537ea5c0ee121264", "html_url": "https://github.com/rust-lang/rust/commit/cf195fb3267976fab78b54ae537ea5c0ee121264"}, {"sha": "6984c05e6945e73a75b43c3e797462af1c06271f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6984c05e6945e73a75b43c3e797462af1c06271f", "html_url": "https://github.com/rust-lang/rust/commit/6984c05e6945e73a75b43c3e797462af1c06271f"}], "stats": {"total": 35, "additions": 13, "deletions": 22}, "files": [{"sha": "efad18d5abcf45fb946ec9e3dcdec439606f1eda", "filename": "Cargo.lock", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ba70ea36b897d6aa08cc19a8713939cd48b5274b/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/ba70ea36b897d6aa08cc19a8713939cd48b5274b/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=ba70ea36b897d6aa08cc19a8713939cd48b5274b", "patch": "@@ -1,6 +1,6 @@\n [root]\n name = \"rustfmt-nightly\"\n-version = \"0.1.9\"\n+version = \"0.2.0\"\n dependencies = [\n  \"diff 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"env_logger 0.4.3 (registry+https://github.com/rust-lang/crates.io-index)\","}, {"sha": "5ac6bf54144d9c59731a4d4dde70f5dde1af4eb0", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ba70ea36b897d6aa08cc19a8713939cd48b5274b/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/ba70ea36b897d6aa08cc19a8713939cd48b5274b/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=ba70ea36b897d6aa08cc19a8713939cd48b5274b", "patch": "@@ -1,7 +1,7 @@\n [package]\n \n name = \"rustfmt-nightly\"\n-version = \"0.1.9\"\n+version = \"0.2.0\"\n authors = [\"Nicholas Cameron <ncameron@mozilla.com>\", \"The Rustfmt developers\"]\n description = \"Tool to find and fix Rust formatting issues\"\n repository = \"https://github.com/rust-lang-nursery/rustfmt\""}, {"sha": "5c75030d480846ed7be2ac4f3f15f78c930c33c6", "filename": "Configurations.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ba70ea36b897d6aa08cc19a8713939cd48b5274b/Configurations.md", "raw_url": "https://github.com/rust-lang/rust/raw/ba70ea36b897d6aa08cc19a8713939cd48b5274b/Configurations.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Configurations.md?ref=ba70ea36b897d6aa08cc19a8713939cd48b5274b", "patch": "@@ -2120,5 +2120,5 @@ See also: [`indent_match_arms`](#indent_match_arms), [`match_block_trailing_comm\n \n What Write Mode to use when none is supplied: Replace, Overwrite, Display, Diff, Coverage\n \n-- **Default value**: `\"Replace\"`\n+- **Default value**: `\"Overwrite\"`\n - **Possible values**: `\"Checkstyle\"`, `\"Coverage\"`, `\"Diff\"`, `\"Display\"`, `\"Overwrite\"`, `\"Plain\"`, `\"Replace\"`"}, {"sha": "f7efdfeb2664792ca5a9a5f1ca2193c86380174c", "filename": "README.md", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ba70ea36b897d6aa08cc19a8713939cd48b5274b/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/ba70ea36b897d6aa08cc19a8713939cd48b5274b/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=ba70ea36b897d6aa08cc19a8713939cd48b5274b", "patch": "@@ -90,11 +90,12 @@ read data from stdin. Alternatively, you can use `cargo fmt` to format all\n binary and library targets of your crate.\n \n You'll probably want to specify the write mode. Currently, there are modes for\n-diff, replace, overwrite, display, coverage, and checkstyle.\n+`diff`, `replace`, `overwrite`, `display`, `coverage`, `checkstyle`, and `plain`.\n \n-* `replace` Is the default and overwrites the original files after creating backups of the files.\n-* `overwrite` Overwrites the original files _without_ creating backups.\n+* `overwrite` Is the default and overwrites the original files _without_ creating backups.\n+* `replace` Overwrites the original files after creating backups of the files.\n * `display` Will print the formatted files to stdout.\n+* `plain` Also writes to stdout, but with no metadata.\n * `diff` Will print a diff between the original files and formatted files to stdout.\n          Will also exit with an error code if there are any differences.\n * `checkstyle` Will output the lines that need to be corrected as a checkstyle XML file,\n@@ -103,7 +104,7 @@ diff, replace, overwrite, display, coverage, and checkstyle.\n The write mode can be set by passing the `--write-mode` flag on\n the command line. For example `rustfmt --write-mode=display src/filename.rs`\n \n-`cargo fmt` uses `--write-mode=replace` by default.\n+`cargo fmt` uses `--write-mode=overwrite` by default.\n \n If you want to restrict reformatting to specific sets of lines, you can\n use the `--file-lines` option. Its argument is a JSON array of objects"}, {"sha": "2de572f616e9b1d2bbd10b65d7734c933fd6fb2e", "filename": "src/bin/rustfmt.rs", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/ba70ea36b897d6aa08cc19a8713939cd48b5274b/src%2Fbin%2Frustfmt.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba70ea36b897d6aa08cc19a8713939cd48b5274b/src%2Fbin%2Frustfmt.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbin%2Frustfmt.rs?ref=ba70ea36b897d6aa08cc19a8713939cd48b5274b", "patch": "@@ -78,11 +78,6 @@ impl CliOptions {\n                     format!(\"Invalid write-mode: {}\", write_mode),\n                 ));\n             }\n-        } else if !matches.opt_present(\"no-warn-write-mode\") {\n-            println!(\n-                \"Warning: the default write-mode for Rustfmt will soon change to overwrite \\\n-                 - this will not leave backups of changed files.\"\n-            );\n         }\n \n         if let Some(ref file_lines) = matches.opt_str(\"file-lines\") {\n@@ -120,17 +115,11 @@ fn make_opts() -> Options {\n     opts.optflag(\"h\", \"help\", \"show this message\");\n     opts.optflag(\"V\", \"version\", \"show version information\");\n     opts.optflag(\"v\", \"verbose\", \"print verbose output\");\n-    // Suppress warning. Remove this option after the default write mode changed to overwrite.\n-    opts.optflag(\n-        \"w\",\n-        \"no-warn-write-mode\",\n-        \"inhibit warning about write-mode change\",\n-    );\n     opts.optopt(\n         \"\",\n         \"write-mode\",\n-        \"mode to write in (not usable when piping from stdin)\",\n-        \"[replace|overwrite|display|diff|coverage|checkstyle]\",\n+        \"how to write output (not usable when piping from stdin)\",\n+        \"[replace|overwrite|display|plain|diff|coverage|checkstyle]\",\n     );\n     opts.optflag(\"\", \"skip-children\", \"don't reformat child modules\");\n "}, {"sha": "7ffe141e6c1f5aab736c5eeff2ff0216d68b6e12", "filename": "src/config.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ba70ea36b897d6aa08cc19a8713939cd48b5274b/src%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba70ea36b897d6aa08cc19a8713939cd48b5274b/src%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fconfig.rs?ref=ba70ea36b897d6aa08cc19a8713939cd48b5274b", "patch": "@@ -596,8 +596,9 @@ create_config! {\n     spaces_within_square_brackets: bool, false, \"Put spaces within non-empty square brackets\";\n     spaces_within_parens: bool, false, \"Put spaces within non-empty parentheses\";\n     use_try_shorthand: bool, false, \"Replace uses of the try! macro by the ? shorthand\";\n-    write_mode: WriteMode, WriteMode::Replace,\n-        \"What Write Mode to use when none is supplied: Replace, Overwrite, Display, Diff, Coverage\";\n+    write_mode: WriteMode, WriteMode::Overwrite,\n+        \"What Write Mode to use when none is supplied: \\\n+         Replace, Overwrite, Display, Plain, Diff, Coverage\";\n     condense_wildcard_suffixes: bool, false, \"Replace strings of _ wildcards by a single .. in \\\n                                               tuple patterns\";\n     combine_control_expr: bool, true, \"Combine control expressions with funciton calls.\";"}]}