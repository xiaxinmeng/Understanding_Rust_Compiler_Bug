{"sha": "41e79910aa106bcc41b26ccc2b4513849d11015e", "node_id": "C_kwDOAAsO6NoAKDQxZTc5OTEwYWExMDZiY2M0MWIyNmNjYzJiNDUxMzg0OWQxMTAxNWU", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-07-01T04:05:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-01T04:05:53Z"}, "message": "Rollup merge of #98640 - cuviper:stable-rust-analyzer, r=Mark-Simulacrum\n\nLet rust-analyzer ship on stable, non-preview\n\nThe consensus on rust-lang/rust-analyzer#12432 seems to be that we are ready for `rust-analyzer` to ship as a rustup component on the beta and stable channels. This won't always be the preferred distribution method, e.g. the VS Code extension will probably still independently update to its weekly releases, but it's still useful to have a component that follows the release train with the rest of the Rust toolchain. So this removes the nightly-only gating on the bundled component, and removes the \"-preview\" suffix as well by the usual renaming mechanism.\n\ncc ``@rust-lang/wg-rls-2`` ``@rust-lang/release``", "tree": {"sha": "077d50b7969cfe785f94cdcecb0b5416a5f09fcd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/077d50b7969cfe785f94cdcecb0b5416a5f09fcd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/41e79910aa106bcc41b26ccc2b4513849d11015e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJivnKhCRBK7hj4Ov3rIwAAnDEIAIkxzqvFFuLJ0tdhkB4JQLU3\nwZxga9Zr3wZND5YC3d6En7ALiLjDWlNGe5P+thgM8/wo8TN6T+DCHDW3nulHhR/b\nLH8YID5o7/V1vJM55EyEHqOMpV9jRIy/yxv9mhErywAUFyr85G/3vaTLim65eO8E\nbvlRiN+/UHulO2ZTgd7cFqfi5T2k6CTwgCnQkTA8GU8c8XqQVFRR9RFeqeyQs0Kx\nqBDhFg1U44S/hEo1W9PyKBB3cr/z9m8dLCgdk3x5P9jKj2cotqD1/zOb7vr8Ubsh\nJk0z8/5/AQoB6sp9tv3sAzrHhVuQRoseT+31cnMlH7rN/dFOqJ68gGvXsF/Ql6k=\n=Kk97\n-----END PGP SIGNATURE-----\n", "payload": "tree 077d50b7969cfe785f94cdcecb0b5416a5f09fcd\nparent 0d5636ce8879381f151d7c03d691b35fe4a8ea56\nparent c29e584a997083b61a75b0a4e6336cc5f222a354\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1656648353 +0200\ncommitter GitHub <noreply@github.com> 1656648353 +0200\n\nRollup merge of #98640 - cuviper:stable-rust-analyzer, r=Mark-Simulacrum\n\nLet rust-analyzer ship on stable, non-preview\n\nThe consensus on rust-lang/rust-analyzer#12432 seems to be that we are ready for `rust-analyzer` to ship as a rustup component on the beta and stable channels. This won't always be the preferred distribution method, e.g. the VS Code extension will probably still independently update to its weekly releases, but it's still useful to have a component that follows the release train with the rest of the Rust toolchain. So this removes the nightly-only gating on the bundled component, and removes the \"-preview\" suffix as well by the usual renaming mechanism.\n\ncc ``@rust-lang/wg-rls-2`` ``@rust-lang/release``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/41e79910aa106bcc41b26ccc2b4513849d11015e", "html_url": "https://github.com/rust-lang/rust/commit/41e79910aa106bcc41b26ccc2b4513849d11015e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/41e79910aa106bcc41b26ccc2b4513849d11015e/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0d5636ce8879381f151d7c03d691b35fe4a8ea56", "url": "https://api.github.com/repos/rust-lang/rust/commits/0d5636ce8879381f151d7c03d691b35fe4a8ea56", "html_url": "https://github.com/rust-lang/rust/commit/0d5636ce8879381f151d7c03d691b35fe4a8ea56"}, {"sha": "c29e584a997083b61a75b0a4e6336cc5f222a354", "url": "https://api.github.com/repos/rust-lang/rust/commits/c29e584a997083b61a75b0a4e6336cc5f222a354", "html_url": "https://github.com/rust-lang/rust/commit/c29e584a997083b61a75b0a4e6336cc5f222a354"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "74ec9cab5ca97f31656a49955cd0a3600eca39b7", "filename": "src/bootstrap/dist.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/41e79910aa106bcc41b26ccc2b4513849d11015e/src%2Fbootstrap%2Fdist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41e79910aa106bcc41b26ccc2b4513849d11015e/src%2Fbootstrap%2Fdist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fdist.rs?ref=41e79910aa106bcc41b26ccc2b4513849d11015e", "patch": "@@ -1044,12 +1044,6 @@ impl Step for RustAnalyzer {\n     }\n \n     fn run(self, builder: &Builder<'_>) -> Option<GeneratedTarball> {\n-        // This prevents rust-analyzer from being built for \"dist\" or \"install\"\n-        // on the stable/beta channels. It is a nightly-only tool and should\n-        // not be included.\n-        if !builder.build.unstable_features() {\n-            return None;\n-        }\n         let compiler = self.compiler;\n         let target = self.target;\n "}, {"sha": "5be6841e988ae74a6732bf43fd5606d3dc162f83", "filename": "src/bootstrap/tool.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/41e79910aa106bcc41b26ccc2b4513849d11015e/src%2Fbootstrap%2Ftool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41e79910aa106bcc41b26ccc2b4513849d11015e/src%2Fbootstrap%2Ftool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftool.rs?ref=41e79910aa106bcc41b26ccc2b4513849d11015e", "patch": "@@ -780,7 +780,7 @@ tool_extended!((self, builder),\n     // and this is close enough for now.\n     RustDemangler, rust_demangler, \"src/tools/rust-demangler\", \"rust-demangler\", stable=false, in_tree=true, tool_std=true, {};\n     Rustfmt, rustfmt, \"src/tools/rustfmt\", \"rustfmt\", stable=true, in_tree=true, {};\n-    RustAnalyzer, rust_analyzer, \"src/tools/rust-analyzer/crates/rust-analyzer\", \"rust-analyzer\", stable=false, submodule=\"rust-analyzer\", {};\n+    RustAnalyzer, rust_analyzer, \"src/tools/rust-analyzer/crates/rust-analyzer\", \"rust-analyzer\", stable=true, submodule=\"rust-analyzer\", {};\n );\n \n impl<'a> Builder<'a> {"}, {"sha": "efe3f2b618be30a8de33055725745cd21b5d3817", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/41e79910aa106bcc41b26ccc2b4513849d11015e/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/41e79910aa106bcc41b26ccc2b4513849d11015e/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=41e79910aa106bcc41b26ccc2b4513849d11015e", "patch": "@@ -184,7 +184,7 @@ static PKG_INSTALLERS: &[&str] = &[\"x86_64-apple-darwin\", \"aarch64-apple-darwin\"\n \n static MINGW: &[&str] = &[\"i686-pc-windows-gnu\", \"x86_64-pc-windows-gnu\"];\n \n-static NIGHTLY_ONLY_COMPONENTS: &[&str] = &[\"miri-preview\", \"rust-analyzer-preview\"];\n+static NIGHTLY_ONLY_COMPONENTS: &[&str] = &[\"miri-preview\"];\n \n macro_rules! t {\n     ($e:expr) => {\n@@ -403,6 +403,7 @@ impl Builder {\n         rename(\"rustfmt\", \"rustfmt-preview\");\n         rename(\"clippy\", \"clippy-preview\");\n         rename(\"miri\", \"miri-preview\");\n+        rename(\"rust-analyzer\", \"rust-analyzer-preview\");\n     }\n \n     fn rust_package(&mut self, manifest: &Manifest) -> Package {"}]}