{"sha": "9c4791300a164b587882cbee52b82ab252252fa6", "node_id": "C_kwDOAAsO6NoAKDljNDc5MTMwMGExNjRiNTg3ODgyY2JlZTUyYjgyYWIyNTIyNTJmYTY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-10-10T22:34:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-10T22:34:39Z"}, "message": "Rollup merge of #89707 - clemenswasser:apply_clippy_suggestions, r=Mark-Simulacrum\n\nApply clippy suggestions for std", "tree": {"sha": "103750a5fa0a2a87b9b4cc013d87846cdf26cf65", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/103750a5fa0a2a87b9b4cc013d87846cdf26cf65"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9c4791300a164b587882cbee52b82ab252252fa6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhY2p/CRBK7hj4Ov3rIwAA798IAGdjkq2aLTqlmWBDsSxuCqGE\nIWoUCjdrRrfqghtEwL+VGA6BoHjjQP3tFzZZDWLElFGvl2/a7PS9bb9Jqew6OBw9\ng0ym0f3kzJkWkujpGieQFTRYjBYEs/JRI7mXeh+SZXb13JF1f930G/O24Qmawbta\nMjGmFU37UD2yc6JSjs1/M+JeCFK1DGN15XGye3iMoMCzfF+zueTeHQ0KYsIIUzMz\n6UHKECdP0aHmVfY1mCOBzWNSNMJX7rTL9Xn0lcaqYYadHzzQkGnwLg2tv8bugMRS\no8PnvzCZs9hJnAMF3FX5u0n4wKgyQSjq/JhilAgXZyr1cOVDjZH1EK6pv/MuOyw=\n=kN49\n-----END PGP SIGNATURE-----\n", "payload": "tree 103750a5fa0a2a87b9b4cc013d87846cdf26cf65\nparent 1b8f7a9db5cd39d89008cf70961a0c7494b05f67\nparent 8545472a081f5ead6bff98ae45b07b13ec6932bf\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1633905279 +0200\ncommitter GitHub <noreply@github.com> 1633905279 +0200\n\nRollup merge of #89707 - clemenswasser:apply_clippy_suggestions, r=Mark-Simulacrum\n\nApply clippy suggestions for std\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9c4791300a164b587882cbee52b82ab252252fa6", "html_url": "https://github.com/rust-lang/rust/commit/9c4791300a164b587882cbee52b82ab252252fa6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9c4791300a164b587882cbee52b82ab252252fa6/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1b8f7a9db5cd39d89008cf70961a0c7494b05f67", "url": "https://api.github.com/repos/rust-lang/rust/commits/1b8f7a9db5cd39d89008cf70961a0c7494b05f67", "html_url": "https://github.com/rust-lang/rust/commit/1b8f7a9db5cd39d89008cf70961a0c7494b05f67"}, {"sha": "8545472a081f5ead6bff98ae45b07b13ec6932bf", "url": "https://api.github.com/repos/rust-lang/rust/commits/8545472a081f5ead6bff98ae45b07b13ec6932bf", "html_url": "https://github.com/rust-lang/rust/commit/8545472a081f5ead6bff98ae45b07b13ec6932bf"}], "stats": {"total": 29, "additions": 13, "deletions": 16}, "files": [{"sha": "2864e94f60f2c82ca542ac8fa890701bc340a0a9", "filename": "library/std/src/io/buffered/bufreader.rs", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fio%2Fbuffered%2Fbufreader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fio%2Fbuffered%2Fbufreader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fio%2Fbuffered%2Fbufreader.rs?ref=9c4791300a164b587882cbee52b82ab252252fa6", "patch": "@@ -242,14 +242,13 @@ impl<R: Seek> BufReader<R> {\n                 self.pos = new_pos as usize;\n                 return Ok(());\n             }\n-        } else {\n-            if let Some(new_pos) = pos.checked_add(offset as u64) {\n-                if new_pos <= self.cap as u64 {\n-                    self.pos = new_pos as usize;\n-                    return Ok(());\n-                }\n+        } else if let Some(new_pos) = pos.checked_add(offset as u64) {\n+            if new_pos <= self.cap as u64 {\n+                self.pos = new_pos as usize;\n+                return Ok(());\n             }\n         }\n+\n         self.seek(SeekFrom::Current(offset)).map(drop)\n     }\n }"}, {"sha": "ad550a823ae90e2596c26614d19c2911bbd953ad", "filename": "library/std/src/sys/windows/fs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Ffs.rs?ref=9c4791300a164b587882cbee52b82ab252252fa6", "patch": "@@ -558,7 +558,7 @@ impl IntoInner<Handle> for File {\n \n impl FromInner<Handle> for File {\n     fn from_inner(handle: Handle) -> File {\n-        File { handle: handle }\n+        File { handle }\n     }\n }\n \n@@ -672,7 +672,7 @@ impl FilePermissions {\n \n impl FileType {\n     fn new(attrs: c::DWORD, reparse_tag: c::DWORD) -> FileType {\n-        FileType { attributes: attrs, reparse_tag: reparse_tag }\n+        FileType { attributes: attrs, reparse_tag }\n     }\n     pub fn is_dir(&self) -> bool {\n         !self.is_symlink() && self.is_directory()"}, {"sha": "18a2a36ad2548e25c0bab340235d2fd41ac81646", "filename": "library/std/src/sys/windows/stack_overflow.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fstack_overflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fstack_overflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Fwindows%2Fstack_overflow.rs?ref=9c4791300a164b587882cbee52b82ab252252fa6", "patch": "@@ -9,10 +9,10 @@ impl Handler {\n     pub unsafe fn new() -> Handler {\n         // This API isn't available on XP, so don't panic in that case and just\n         // pray it works out ok.\n-        if c::SetThreadStackGuarantee(&mut 0x5000) == 0 {\n-            if c::GetLastError() as u32 != c::ERROR_CALL_NOT_IMPLEMENTED as u32 {\n-                panic!(\"failed to reserve stack space for exception handling\");\n-            }\n+        if c::SetThreadStackGuarantee(&mut 0x5000) == 0\n+            && c::GetLastError() as u32 != c::ERROR_CALL_NOT_IMPLEMENTED as u32\n+        {\n+            panic!(\"failed to reserve stack space for exception handling\");\n         }\n         Handler\n     }"}, {"sha": "d5e8f12414ff2d688007a157925030225d107518", "filename": "library/std/src/sys_common/backtrace.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fsys_common%2Fbacktrace.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9c4791300a164b587882cbee52b82ab252252fa6/library%2Fstd%2Fsrc%2Fsys_common%2Fbacktrace.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys_common%2Fbacktrace.rs?ref=9c4791300a164b587882cbee52b82ab252252fa6", "patch": "@@ -93,10 +93,8 @@ unsafe fn _print_fmt(fmt: &mut fmt::Formatter<'_>, print_fmt: PrintFmt) -> fmt::\n         if stop {\n             return false;\n         }\n-        if !hit {\n-            if start {\n-                res = bt_fmt.frame().print_raw(frame.ip(), None, None, None);\n-            }\n+        if !hit && start {\n+            res = bt_fmt.frame().print_raw(frame.ip(), None, None, None);\n         }\n \n         idx += 1;"}]}