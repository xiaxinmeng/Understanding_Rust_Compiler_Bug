{"sha": "3a12b4c4f805f66d223861d4be232112c2982a0e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhMTJiNGM0ZjgwNWY2NmQyMjM4NjFkNGJlMjMyMTEyYzI5ODJhMGU=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2015-07-28T22:17:27Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2015-07-28T22:18:27Z"}, "message": "libcollections: Inline some performance-critical string functions; e.g.\n`chars()`.\n\nThis was showing up in Servo profiles.", "tree": {"sha": "1f8787458a10399a66e0bf68b7312ad2e5b28e7d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1f8787458a10399a66e0bf68b7312ad2e5b28e7d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a12b4c4f805f66d223861d4be232112c2982a0e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a12b4c4f805f66d223861d4be232112c2982a0e", "html_url": "https://github.com/rust-lang/rust/commit/3a12b4c4f805f66d223861d4be232112c2982a0e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a12b4c4f805f66d223861d4be232112c2982a0e/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba9224f35451e5d5ef7647bd2b40e5da80ce2735", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba9224f35451e5d5ef7647bd2b40e5da80ce2735", "html_url": "https://github.com/rust-lang/rust/commit/ba9224f35451e5d5ef7647bd2b40e5da80ce2735"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "a9b66c8f418c8818587ad4972210652cfd460069", "filename": "src/libcollections/str.rs", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/3a12b4c4f805f66d223861d4be232112c2982a0e/src%2Flibcollections%2Fstr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a12b4c4f805f66d223861d4be232112c2982a0e/src%2Flibcollections%2Fstr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fstr.rs?ref=3a12b4c4f805f66d223861d4be232112c2982a0e", "patch": "@@ -425,6 +425,7 @@ impl str {\n                  since = \"1.0.0\")]\n     #[unstable(feature = \"unicode\",\n                reason = \"this functionality may only be provided by libunicode\")]\n+    #[inline]\n     pub fn width(&self, is_cjk: bool) -> usize {\n         UnicodeStr::width(self, is_cjk)\n     }\n@@ -459,6 +460,7 @@ impl str {\n                          with the existence of the char_indices iterator or \\\n                          this method may want to be replaced with checked \\\n                          slicing\")]\n+    #[inline]\n     pub fn is_char_boundary(&self, index: usize) -> bool {\n         core_str::StrExt::is_char_boundary(self, index)\n     }\n@@ -514,6 +516,7 @@ impl str {\n     /// }\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[inline]\n     pub unsafe fn slice_unchecked(&self, begin: usize, end: usize) -> &str {\n         core_str::StrExt::slice_unchecked(self, begin, end)\n     }\n@@ -522,6 +525,7 @@ impl str {\n     ///\n     /// Same as `slice_unchecked`, but works with `&mut str` instead of `&str`.\n     #[unstable(feature = \"str_slice_mut\", reason = \"recently added\")]\n+    #[inline]\n     pub unsafe fn slice_mut_unchecked(&mut self, begin: usize, end: usize) -> &mut str {\n         core_str::StrExt::slice_mut_unchecked(self, begin, end)\n     }\n@@ -556,6 +560,7 @@ impl str {\n     #[deprecated(since = \"1.3.0\",\n                  reason = \"can be implemented with char_indices and \\\n                            hasn't seen enough use to justify inclusion\")]\n+    #[inline]\n     pub fn slice_chars(&self, begin: usize, end: usize) -> &str {\n         core_str::StrExt::slice_chars(self, begin, end)\n     }\n@@ -608,6 +613,7 @@ impl str {\n                reason = \"often replaced by char_indices, this method may \\\n                          be removed in favor of just char_at() or eventually \\\n                          removed altogether\")]\n+    #[inline]\n     pub fn char_range_at(&self, start: usize) -> CharRange {\n         core_str::StrExt::char_range_at(self, start)\n     }\n@@ -665,6 +671,7 @@ impl str {\n                reason = \"often replaced by char_indices, this method may \\\n                          be removed in favor of just char_at_reverse() or \\\n                          eventually removed altogether\")]\n+    #[inline]\n     pub fn char_range_at_reverse(&self, start: usize) -> CharRange {\n         core_str::StrExt::char_range_at_reverse(self, start)\n     }\n@@ -691,6 +698,7 @@ impl str {\n                          future; it is normally replaced by chars/char_indices \\\n                          iterators or by getting the first char from a \\\n                          subslice\")]\n+    #[inline]\n     pub fn char_at(&self, i: usize) -> char {\n         core_str::StrExt::char_at(self, i)\n     }\n@@ -716,6 +724,7 @@ impl str {\n                reason = \"see char_at for more details, but reverse semantics \\\n                          are also somewhat unclear, especially with which \\\n                          cases generate panics\")]\n+    #[inline]\n     pub fn char_at_reverse(&self, i: usize) -> char {\n         core_str::StrExt::char_at_reverse(self, i)\n     }\n@@ -749,6 +758,7 @@ impl str {\n                reason = \"awaiting conventions about shifting and slices and \\\n                          may not be warranted with the existence of the chars \\\n                          and/or char_indices iterators\")]\n+    #[inline]\n     pub fn slice_shift_char(&self) -> Option<(char, &str)> {\n         core_str::StrExt::slice_shift_char(self)\n     }\n@@ -810,6 +820,7 @@ impl str {\n     ///     '\\u{1f1e8}', '\\u{1f1ed}', ' ', '\ud55c']);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[inline]\n     pub fn chars(&self) -> Chars {\n         core_str::StrExt::chars(self)\n     }\n@@ -825,6 +836,7 @@ impl str {\n     /// assert_eq!(v, b);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[inline]\n     pub fn char_indices(&self) -> CharIndices {\n         core_str::StrExt::char_indices(self)\n     }\n@@ -839,6 +851,7 @@ impl str {\n     /// assert_eq!(v, b\"bors\".to_vec());\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[inline]\n     pub fn bytes(&self) -> Bytes {\n         core_str::StrExt::bytes(self)\n     }\n@@ -855,6 +868,7 @@ impl str {\n     /// assert_eq!(v, [\"Mary\", \"had\", \"a\", \"little\", \"lamb\"]);\n     /// ```\n     #[stable(feature = \"split_whitespace\", since = \"1.1.0\")]\n+    #[inline]\n     pub fn split_whitespace(&self) -> SplitWhitespace {\n         UnicodeStr::split_whitespace(self)\n     }\n@@ -877,6 +891,7 @@ impl str {\n     #[unstable(feature = \"str_words\",\n                reason = \"the precise algorithm to use is unclear\")]\n     #[allow(deprecated)]\n+    #[inline]\n     pub fn words(&self) -> Words {\n         UnicodeStr::words(self)\n     }\n@@ -903,6 +918,7 @@ impl str {\n     /// assert_eq!(v, [\"foo\", \"bar\", \"\", \"baz\"]);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[inline]\n     pub fn lines(&self) -> Lines {\n         core_str::StrExt::lines(self)\n     }\n@@ -930,6 +946,7 @@ impl str {\n     /// assert_eq!(v, [\"foo\", \"bar\", \"\", \"baz\"]);\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+    #[inline]\n     pub fn lines_any(&self) -> LinesAny {\n         core_str::StrExt::lines_any(self)\n     }"}]}