{"sha": "49835d8abf93ca0d3249d7f534963fe28313aa18", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ5ODM1ZDhhYmY5M2NhMGQzMjQ5ZDdmNTM0OTYzZmUyODMxM2FhMTg=", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2020-11-27T08:55:10Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2021-03-09T18:23:08Z"}, "message": "Remove hir::ImplItem::attrs.", "tree": {"sha": "8474b3053fa56f88581e98ebd227bb470f3e2101", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8474b3053fa56f88581e98ebd227bb470f3e2101"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/49835d8abf93ca0d3249d7f534963fe28313aa18", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/49835d8abf93ca0d3249d7f534963fe28313aa18", "html_url": "https://github.com/rust-lang/rust/commit/49835d8abf93ca0d3249d7f534963fe28313aa18", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/49835d8abf93ca0d3249d7f534963fe28313aa18/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd2af148ccfaa30b29341823ac8e38989ffd1b6d", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd2af148ccfaa30b29341823ac8e38989ffd1b6d", "html_url": "https://github.com/rust-lang/rust/commit/dd2af148ccfaa30b29341823ac8e38989ffd1b6d"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "362b11792a8def92b8b495d756cb5e7730cde229", "filename": "clippy_lints/src/attrs.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fattrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fattrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fattrs.rs?ref=49835d8abf93ca0d3249d7f534963fe28313aa18", "patch": "@@ -353,7 +353,7 @@ impl<'tcx> LateLintPass<'tcx> for Attributes {\n \n     fn check_impl_item(&mut self, cx: &LateContext<'tcx>, item: &'tcx ImplItem<'_>) {\n         if is_relevant_impl(cx, item) {\n-            check_attrs(cx, item.span, item.ident.name, &item.attrs)\n+            check_attrs(cx, item.span, item.ident.name, cx.tcx.hir().attrs(item.hir_id()))\n         }\n     }\n "}, {"sha": "058f64780d69da0e2197ac383a7519bb31bb43a7", "filename": "clippy_lints/src/doc.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fdoc.rs?ref=49835d8abf93ca0d3249d7f534963fe28313aa18", "patch": "@@ -260,7 +260,8 @@ impl<'tcx> LateLintPass<'tcx> for DocMarkdown {\n     }\n \n     fn check_impl_item(&mut self, cx: &LateContext<'tcx>, item: &'tcx hir::ImplItem<'_>) {\n-        let headers = check_attrs(cx, &self.valid_idents, &item.attrs);\n+        let attrs = cx.tcx.hir().attrs(item.hir_id());\n+        let headers = check_attrs(cx, &self.valid_idents, attrs);\n         if self.in_trait_impl || in_external_macro(cx.tcx.sess, item.span) {\n             return;\n         }"}, {"sha": "b48b0b9f3e2f262c529d59247cd23e9f117927f5", "filename": "clippy_lints/src/functions.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Ffunctions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Ffunctions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Ffunctions.rs?ref=49835d8abf93ca0d3249d7f534963fe28313aa18", "patch": "@@ -312,11 +312,12 @@ impl<'tcx> LateLintPass<'tcx> for Functions {\n             if is_public && trait_ref_of_method(cx, item.hir_id()).is_none() {\n                 check_result_unit_err(cx, &sig.decl, item.span, fn_header_span);\n             }\n-            let attr = must_use_attr(&item.attrs);\n+            let attrs = cx.tcx.hir().attrs(item.hir_id());\n+            let attr = must_use_attr(attrs);\n             if let Some(attr) = attr {\n                 check_needless_must_use(cx, &sig.decl, item.hir_id(), item.span, fn_header_span, attr);\n             } else if is_public\n-                && !is_proc_macro(cx.sess(), &item.attrs)\n+                && !is_proc_macro(cx.sess(), attrs)\n                 && trait_ref_of_method(cx, item.hir_id()).is_none()\n             {\n                 check_must_use_candidate("}, {"sha": "84852dd602bbb3c8ef17b852183fd6a68f1dbe3e", "filename": "clippy_lints/src/missing_doc.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fmissing_doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fmissing_doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_doc.rs?ref=49835d8abf93ca0d3249d7f534963fe28313aa18", "patch": "@@ -183,7 +183,8 @@ impl<'tcx> LateLintPass<'tcx> for MissingDoc {\n         }\n \n         let (article, desc) = cx.tcx.article_and_description(impl_item.def_id.to_def_id());\n-        self.check_missing_docs_attrs(cx, &impl_item.attrs, impl_item.span, article, desc);\n+        let attrs = cx.tcx.hir().attrs(impl_item.hir_id());\n+        self.check_missing_docs_attrs(cx, attrs, impl_item.span, article, desc);\n     }\n \n     fn check_struct_field(&mut self, cx: &LateContext<'tcx>, sf: &'tcx hir::StructField<'_>) {"}, {"sha": "c915e329087f53df0266f9e667f3305958b14dae", "filename": "clippy_lints/src/missing_inline.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fmissing_inline.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Fmissing_inline.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_inline.rs?ref=49835d8abf93ca0d3249d7f534963fe28313aa18", "patch": "@@ -161,6 +161,7 @@ impl<'tcx> LateLintPass<'tcx> for MissingInline {\n             }\n         }\n \n-        check_missing_inline_attrs(cx, &impl_item.attrs, impl_item.span, desc);\n+        let attrs = cx.tcx.hir().attrs(impl_item.hir_id());\n+        check_missing_inline_attrs(cx, attrs, impl_item.span, desc);\n     }\n }"}, {"sha": "e95840e9db1cc6936b514ad2ad0804cda21b18f2", "filename": "clippy_lints/src/utils/inspector.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "raw_url": "https://github.com/rust-lang/rust/raw/49835d8abf93ca0d3249d7f534963fe28313aa18/clippy_lints%2Fsrc%2Futils%2Finspector.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Futils%2Finspector.rs?ref=49835d8abf93ca0d3249d7f534963fe28313aa18", "patch": "@@ -40,7 +40,7 @@ impl<'tcx> LateLintPass<'tcx> for DeepCodeInspector {\n     }\n \n     fn check_impl_item(&mut self, cx: &LateContext<'tcx>, item: &'tcx hir::ImplItem<'_>) {\n-        if !has_attr(cx.sess(), &item.attrs) {\n+        if !has_attr(cx.sess(), cx.tcx.hir().attrs(item.hir_id())) {\n             return;\n         }\n         println!(\"impl item `{}`\", item.ident.name);"}]}