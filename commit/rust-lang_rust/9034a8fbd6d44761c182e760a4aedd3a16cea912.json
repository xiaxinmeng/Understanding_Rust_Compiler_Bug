{"sha": "9034a8fbd6d44761c182e760a4aedd3a16cea912", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwMzRhOGZiZDZkNDQ3NjFjMTgyZTc2MGE0YWVkZDNhMTZjZWE5MTI=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-04-20T04:55:55Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2011-04-20T04:55:55Z"}, "message": "Fix #335, log context needs to be a scope to capture cleanups.", "tree": {"sha": "c96bd7e6dd2f068398919ce7ae729fac1bda196c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c96bd7e6dd2f068398919ce7ae729fac1bda196c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9034a8fbd6d44761c182e760a4aedd3a16cea912", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9034a8fbd6d44761c182e760a4aedd3a16cea912", "html_url": "https://github.com/rust-lang/rust/commit/9034a8fbd6d44761c182e760a4aedd3a16cea912", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9034a8fbd6d44761c182e760a4aedd3a16cea912/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2e6711fca5005364e908eae61ece8083cd334124", "url": "https://api.github.com/repos/rust-lang/rust/commits/2e6711fca5005364e908eae61ece8083cd334124", "html_url": "https://github.com/rust-lang/rust/commit/2e6711fca5005364e908eae61ece8083cd334124"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "f8945b17fff0cbd95f0f9e3d6effb8c90c54166a", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9034a8fbd6d44761c182e760a4aedd3a16cea912/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9034a8fbd6d44761c182e760a4aedd3a16cea912/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=9034a8fbd6d44761c182e760a4aedd3a16cea912", "patch": "@@ -5133,7 +5133,7 @@ fn trans_log(int lvl, @block_ctxt cx, @ast.expr e) -> result {\n         lcx.ccx.module_data.insert(modname, global);\n     }\n \n-    auto log_cx = new_sub_block_ctxt(cx, \"log\");\n+    auto log_cx = new_scope_block_ctxt(cx, \"log\");\n     auto after_cx = new_sub_block_ctxt(cx, \"after\");\n     auto load = cx.build.Load(global);\n     auto test = cx.build.ICmp(lib.llvm.LLVMIntSGE, load, C_int(lvl));"}, {"sha": "c1cd39da6d77da1fda4995ba5ddd01dab1045e90", "filename": "src/test/run-pass/log-err-phi.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9034a8fbd6d44761c182e760a4aedd3a16cea912/src%2Ftest%2Frun-pass%2Flog-err-phi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9034a8fbd6d44761c182e760a4aedd3a16cea912/src%2Ftest%2Frun-pass%2Flog-err-phi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Flog-err-phi.rs?ref=9034a8fbd6d44761c182e760a4aedd3a16cea912", "patch": "@@ -0,0 +1,6 @@\n+fn main() {\n+  if (false) {\n+    log_err \"foo\" + \"bar\";\n+  }\n+}\n+"}]}