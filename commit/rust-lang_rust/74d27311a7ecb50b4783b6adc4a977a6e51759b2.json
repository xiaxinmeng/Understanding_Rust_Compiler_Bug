{"sha": "74d27311a7ecb50b4783b6adc4a977a6e51759b2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc0ZDI3MzExYTdlY2I1MGI0NzgzYjZhZGM0YTk3N2E2ZTUxNzU5YjI=", "commit": {"author": {"name": "Guillaume Pinot", "email": "texitoi@texitoi.eu", "date": "2013-11-14T22:05:33Z"}, "committer": {"name": "Guillaume Pinot", "email": "texitoi@texitoi.eu", "date": "2013-11-14T22:05:33Z"}, "message": "remove useless Iterate impl, and permute the order of the argument of iterate\n\nWriting iterate(x, f) is more logical as rust iterator pipeline is left to right.", "tree": {"sha": "36b0a4ed963735b4dcc5eeeee1fe83833e897d20", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/36b0a4ed963735b4dcc5eeeee1fe83833e897d20"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/74d27311a7ecb50b4783b6adc4a977a6e51759b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/74d27311a7ecb50b4783b6adc4a977a6e51759b2", "html_url": "https://github.com/rust-lang/rust/commit/74d27311a7ecb50b4783b6adc4a977a6e51759b2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/74d27311a7ecb50b4783b6adc4a977a6e51759b2/comments", "author": {"login": "TeXitoi", "id": 5787066, "node_id": "MDQ6VXNlcjU3ODcwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5787066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeXitoi", "html_url": "https://github.com/TeXitoi", "followers_url": "https://api.github.com/users/TeXitoi/followers", "following_url": "https://api.github.com/users/TeXitoi/following{/other_user}", "gists_url": "https://api.github.com/users/TeXitoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeXitoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeXitoi/subscriptions", "organizations_url": "https://api.github.com/users/TeXitoi/orgs", "repos_url": "https://api.github.com/users/TeXitoi/repos", "events_url": "https://api.github.com/users/TeXitoi/events{/privacy}", "received_events_url": "https://api.github.com/users/TeXitoi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TeXitoi", "id": 5787066, "node_id": "MDQ6VXNlcjU3ODcwNjY=", "avatar_url": "https://avatars.githubusercontent.com/u/5787066?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TeXitoi", "html_url": "https://github.com/TeXitoi", "followers_url": "https://api.github.com/users/TeXitoi/followers", "following_url": "https://api.github.com/users/TeXitoi/following{/other_user}", "gists_url": "https://api.github.com/users/TeXitoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/TeXitoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TeXitoi/subscriptions", "organizations_url": "https://api.github.com/users/TeXitoi/orgs", "repos_url": "https://api.github.com/users/TeXitoi/repos", "events_url": "https://api.github.com/users/TeXitoi/events{/privacy}", "received_events_url": "https://api.github.com/users/TeXitoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89a9ce0cc6ecd8c1369bede6916ef9e27bcc0ee8", "url": "https://api.github.com/repos/rust-lang/rust/commits/89a9ce0cc6ecd8c1369bede6916ef9e27bcc0ee8", "html_url": "https://github.com/rust-lang/rust/commit/89a9ce0cc6ecd8c1369bede6916ef9e27bcc0ee8"}], "stats": {"total": 13, "additions": 4, "deletions": 9}, "files": [{"sha": "2c72e8f30f2e29e0cdbcf2dd46551f2c9fe9d246", "filename": "src/test/bench/shootout-meteor.rs", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/74d27311a7ecb50b4783b6adc4a977a6e51759b2/src%2Ftest%2Fbench%2Fshootout-meteor.rs", "raw_url": "https://github.com/rust-lang/rust/raw/74d27311a7ecb50b4783b6adc4a977a6e51759b2/src%2Ftest%2Fbench%2Fshootout-meteor.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fbench%2Fshootout-meteor.rs?ref=74d27311a7ecb50b4783b6adc4a977a6e51759b2", "patch": "@@ -14,18 +14,13 @@\n \n // returns an infinite iterator of repeated applications of f to x,\n // i.e. [x, f(x), f(f(x)), ...], as haskell iterate function.\n-fn iterate<'a, T>(f: &'a fn(&T) -> T, x: T) -> Iterate<'a, T> {\n-    Iterate::new(f, x)\n+fn iterate<'a, T>(x: T, f: &'a fn(&T) -> T) -> Iterate<'a, T> {\n+    Iterate {f: f, next: x}\n }\n struct Iterate<'self, T> {\n     priv f: &'self fn(&T) -> T,\n     priv next: T\n }\n-impl<'self, T> Iterate<'self, T> {\n-    fn new<'a>(f: &'a fn(&T) -> T, x: T) -> Iterate<'a, T> {\n-        Iterate {f: f, next: x}\n-    }\n-}\n impl<'self, T> Iterator<T> for Iterate<'self, T> {\n     fn next(&mut self) -> Option<T> {\n         let mut res = (self.f)(&self.next);\n@@ -71,11 +66,11 @@ impl<'self, T> Iterator<&'self T> for ListIterator<'self, T> {\n fn transform(p: ~[(int, int)], all: bool) -> ~[~[(int, int)]] {\n     let mut res =\n         // rotations\n-        iterate(|p| p.iter().map(|&(y, x)| (x + y, -y)).collect(), p)\n+        iterate(p, |p| p.iter().map(|&(y, x)| (x + y, -y)).collect())\n         .take(if all {6} else {3})\n         // mirror\n         .flat_map(|p| {\n-            iterate(|p| p.iter().map(|&(y, x)| (x, y)).collect(), p).take(2)\n+            iterate(p, |p| p.iter().map(|&(y, x)| (x, y)).collect()).take(2)\n         }).to_owned_vec();\n \n     // translating to (0, 0) as minimum coordinates."}]}