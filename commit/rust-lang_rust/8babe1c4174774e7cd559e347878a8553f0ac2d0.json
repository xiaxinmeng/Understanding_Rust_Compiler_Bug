{"sha": "8babe1c4174774e7cd559e347878a8553f0ac2d0", "node_id": "C_kwDOAAsO6NoAKDhiYWJlMWM0MTc0Nzc0ZTdjZDU1OWUzNDc4NzhhODU1M2YwYWMyZDA", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-25T09:44:40Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-25T09:44:40Z"}, "message": "Rollup merge of #104849 - GuillaumeGomez:source-code-sidebar-css-migration, r=notriddle\n\nMigrate source code elements style to CSS variables\n\nr? ``@notriddle``", "tree": {"sha": "0693c6667f7d6e1cf2e052cc40e1deada37d1192", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0693c6667f7d6e1cf2e052cc40e1deada37d1192"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8babe1c4174774e7cd559e347878a8553f0ac2d0", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjgI6ICRBK7hj4Ov3rIwAAgLoIALDpAu08qFgCCGjSrRjx0jDv\n8hiJaKAnz2GGCkqDAg/tWhkpEqor+smbeDKMgAS2SfpcHb7nYkcckLssO/cW6EIf\nPxqfjtIvoOQfChrCg0BKrwGRCV9SdZcIH5C0NI/cqeib3wm+XlHV89MqJcmwZiK0\nk31HUrs35vICMOXnmW9nBORdsM098r99Ee2OnZMxvqUAfbBzP7yBitjNPuv2Wf93\ngk3qA94FdOEK1hu520tDxBFum90Wg+O4kkG5TvDLEDUe9qhCL0NKXAkVVI3J+XfA\nvyi697w2hFuJCKliOxu04LvSE5d8VVQMUbRnLXK4inh8lT42+/yCtUv+gWe9JEw=\n=2jou\n-----END PGP SIGNATURE-----\n", "payload": "tree 0693c6667f7d6e1cf2e052cc40e1deada37d1192\nparent 34f1de8395629aa6cc67997a08c48e2a0ff56e5e\nparent e6a4008d24cf91baf681014f301ff01b503f580a\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1669369480 +0100\ncommitter GitHub <noreply@github.com> 1669369480 +0100\n\nRollup merge of #104849 - GuillaumeGomez:source-code-sidebar-css-migration, r=notriddle\n\nMigrate source code elements style to CSS variables\n\nr? ``@notriddle``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8babe1c4174774e7cd559e347878a8553f0ac2d0", "html_url": "https://github.com/rust-lang/rust/commit/8babe1c4174774e7cd559e347878a8553f0ac2d0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8babe1c4174774e7cd559e347878a8553f0ac2d0/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34f1de8395629aa6cc67997a08c48e2a0ff56e5e", "url": "https://api.github.com/repos/rust-lang/rust/commits/34f1de8395629aa6cc67997a08c48e2a0ff56e5e", "html_url": "https://github.com/rust-lang/rust/commit/34f1de8395629aa6cc67997a08c48e2a0ff56e5e"}, {"sha": "e6a4008d24cf91baf681014f301ff01b503f580a", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6a4008d24cf91baf681014f301ff01b503f580a", "html_url": "https://github.com/rust-lang/rust/commit/e6a4008d24cf91baf681014f301ff01b503f580a"}], "stats": {"total": 78, "additions": 50, "deletions": 28}, "files": [{"sha": "c1f7a8338342d550fd9d7eb9e1f255d8a737099a", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=8babe1c4174774e7cd559e347878a8553f0ac2d0", "patch": "@@ -1343,6 +1343,13 @@ a.test-arrow:hover {\n \tborder-bottom: 1px solid var(--border-color);\n \tmargin-bottom: 6px;\n }\n+#source-sidebar div.files > a:hover, details.dir-entry summary:hover,\n+#source-sidebar div.files > a:focus, details.dir-entry summary:focus {\n+\tbackground-color: var(--source-sidebar-background-hover);\n+}\n+#source-sidebar div.files > a.selected {\n+\tbackground-color: var(--source-sidebar-background-selected);\n+}\n #sidebar-toggle > button {\n \tfont-size: inherit;\n \tfont-weight: bold;"}, {"sha": "de7db7d438c9f4baf2ee19965d6202b62c65f640", "filename": "src/librustdoc/html/static/css/themes/ayu.css", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "raw_url": "https://github.com/rust-lang/rust/raw/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fayu.css?ref=8babe1c4174774e7cd559e347878a8553f0ac2d0", "patch": "@@ -84,6 +84,8 @@ Original by Dempfi (https://github.com/dempfi/ayu)\n \t--crate-search-div-hover-filter: invert(98%) sepia(12%) saturate(81%) hue-rotate(343deg)\n \t\tbrightness(113%) contrast(76%);\n \t--crate-search-hover-border: #e0e0e0;\n+\t--source-sidebar-background-selected: #14191f;\n+\t--source-sidebar-background-hover: #14191f;\n }\n \n h1, h2, h3, h4 {\n@@ -208,12 +210,8 @@ pre.rust .kw-2, pre.rust .prelude-ty {}\n \tcolor: #fff;\n }\n #source-sidebar div.files > a:hover, details.dir-entry summary:hover,\n-#source-sidebar div.files > a:focus, details.dir-entry summary:focus {\n-\tbackground-color: #14191f;\n-\tcolor: #ffb44c;\n-}\n+#source-sidebar div.files > a:focus, details.dir-entry summary:focus,\n #source-sidebar div.files > a.selected {\n-\tbackground-color: #14191f;\n \tcolor: #ffb44c;\n }\n "}, {"sha": "d8929f32338643a1276b6bbf6994ca125a133afe", "filename": "src/librustdoc/html/static/css/themes/dark.css", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "raw_url": "https://github.com/rust-lang/rust/raw/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Fdark.css?ref=8babe1c4174774e7cd559e347878a8553f0ac2d0", "patch": "@@ -79,6 +79,8 @@\n \t--crate-search-div-hover-filter: invert(69%) sepia(60%) saturate(6613%) hue-rotate(184deg)\n \t\tbrightness(100%) contrast(91%);\n \t--crate-search-hover-border: #2196f3;\n+\t--source-sidebar-background-selected: #333;\n+\t--source-sidebar-background-hover: #444;\n }\n \n .content .item-info::before { color: #ccc; }\n@@ -105,14 +107,6 @@ details.rustdoc-toggle > summary::before {\n \tcolor: #888;\n }\n \n-#source-sidebar div.files > a:hover, details.dir-entry summary:hover,\n-#source-sidebar div.files > a:focus, details.dir-entry summary:focus {\n-\tbackground-color: #444;\n-}\n-#source-sidebar div.files > a.selected {\n-\tbackground-color: #333;\n-}\n-\n .scraped-example-list .scrape-help {\n \tborder-color: #aaa;\n \tcolor: #eee;"}, {"sha": "ff6c68635338c6c324994fc9111421e01f2dc8bf", "filename": "src/librustdoc/html/static/css/themes/light.css", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "raw_url": "https://github.com/rust-lang/rust/raw/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Fthemes%2Flight.css?ref=8babe1c4174774e7cd559e347878a8553f0ac2d0", "patch": "@@ -76,6 +76,8 @@\n \t--crate-search-div-hover-filter: invert(44%) sepia(18%) saturate(23%) hue-rotate(317deg)\n \t\tbrightness(96%) contrast(93%);\n \t--crate-search-hover-border: #717171;\n+\t--source-sidebar-background-selected: #fff;\n+\t--source-sidebar-background-hover: #e0e0e0;\n }\n \n .content .item-info::before { color: #ccc; }\n@@ -98,13 +100,6 @@ body.source .example-wrap pre.rust a {\n \tcolor: #888;\n }\n \n-#source-sidebar div.files > a:hover, details.dir-entry summary:hover,\n-#source-sidebar div.files > a:focus, details.dir-entry summary:focus {\n-\tbackground-color: #E0E0E0;\n-}\n-#source-sidebar div.files > a.selected {\n-\tbackground-color: #fff;\n-}\n .scraped-example-list .scrape-help {\n \tborder-color: #555;\n \tcolor: #333;"}, {"sha": "40ae4af81be45329419f13e007cdf1559d39f178", "filename": "src/test/rustdoc-gui/sidebar-source-code-display.goml", "status": "modified", "additions": 36, "deletions": 8, "changes": 44, "blob_url": "https://github.com/rust-lang/rust/blob/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8babe1c4174774e7cd559e347878a8553f0ac2d0/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsidebar-source-code-display.goml?ref=8babe1c4174774e7cd559e347878a8553f0ac2d0", "patch": "@@ -43,49 +43,77 @@ define-function: (\n             \"#source-sidebar details[open] > .files a.selected\",\n             {\"color\": |color_hover|, \"background-color\": |background|},\n         )),\n+\n         // Without hover or focus.\n         (\"assert-css\", (\"#sidebar-toggle > button\", {\"background-color\": |background_toggle|})),\n         // With focus.\n         (\"focus\", \"#sidebar-toggle > button\"),\n-        (\"assert-css\", (\"#sidebar-toggle > button\", {\"background-color\": |background_toggle_hover|})),\n+        (\"assert-css\", (\n+            \"#sidebar-toggle > button:focus\",\n+            {\"background-color\": |background_toggle_hover|},\n+        )),\n         (\"focus\", \".search-input\"),\n         // With hover.\n         (\"move-cursor-to\", \"#sidebar-toggle > button\"),\n-        (\"assert-css\", (\"#sidebar-toggle > button\", {\"background-color\": |background_toggle_hover|})),\n-        // Without hover.\n+        (\"assert-css\", (\n+            \"#sidebar-toggle > button:hover\",\n+            {\"background-color\": |background_toggle_hover|},\n+        )),\n+\n+        // Without hover or focus.\n         (\"assert-css\", (\n             \"#source-sidebar details[open] > .files a:not(.selected)\",\n             {\"color\": |color|, \"background-color\": |background_toggle|},\n         )),\n         // With focus.\n         (\"focus\", \"#source-sidebar details[open] > .files a:not(.selected)\"),\n         (\"wait-for-css\", (\n-            \"#source-sidebar details[open] > .files a:not(.selected)\",\n+            \"#source-sidebar details[open] > .files a:not(.selected):focus\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n         )),\n         (\"focus\", \".search-input\"),\n         // With hover.\n         (\"move-cursor-to\", \"#source-sidebar details[open] > .files a:not(.selected)\"),\n         (\"assert-css\", (\n-            \"#source-sidebar details[open] > .files a:not(.selected)\",\n+            \"#source-sidebar details[open] > .files a:not(.selected):hover\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n         )),\n-        // Without hover.\n+\n+        // Without hover or focus.\n+        (\"assert-css\", (\n+            \"#source-sidebar .dir-entry summary\",\n+            {\"color\": |color|, \"background-color\": |background_toggle|},\n+        )),\n+        // With focus.\n+        (\"focus\", \"#source-sidebar .dir-entry summary\"),\n+        (\"wait-for-css\", (\n+            \"#source-sidebar .dir-entry summary:focus\",\n+            {\"color\": |color_hover|, \"background-color\": |background_hover|},\n+        )),\n+        (\"focus\", \".search-input\"),\n+        // With hover.\n+        (\"move-cursor-to\", \"#source-sidebar .dir-entry summary\"),\n+        (\"assert-css\", (\n+            \"#source-sidebar .dir-entry summary:hover\",\n+            {\"color\": |color_hover|, \"background-color\": |background_hover|},\n+        )),\n+\n+        // Without hover or focus.\n         (\"assert-css\", (\n             \"#source-sidebar details[open] > .folders > details > summary\",\n             {\"color\": |color|, \"background-color\": |background_toggle|},\n         )),\n         // With focus.\n         (\"focus\", \"#source-sidebar details[open] > .folders > details > summary\"),\n         (\"wait-for-css\", (\n-            \"#source-sidebar details[open] > .folders > details > summary\",\n+            \"#source-sidebar details[open] > .folders > details > summary:focus\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n         )),\n         (\"focus\", \".search-input\"),\n         // With hover.\n         (\"move-cursor-to\", \"#source-sidebar details[open] > .folders > details > summary\"),\n         (\"assert-css\", (\n-            \"#source-sidebar details[open] > .folders > details > summary\",\n+            \"#source-sidebar details[open] > .folders > details > summary:hover\",\n             {\"color\": |color_hover|, \"background-color\": |background_hover|},\n         )),\n     ],"}]}