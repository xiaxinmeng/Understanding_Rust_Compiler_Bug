{"sha": "15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE1YTZiZGViYWI0ZTdiODExYjlhOTAyZTNmOGVkMjI1YzU5YWYwNmU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-10-22T11:46:22Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2013-10-22T11:46:22Z"}, "message": "auto merge of #10009 : LeoTestard/rust/asm-feature-gated, r=huonw\n\nSuite of #9991", "tree": {"sha": "5aabd7732bd8d303a24bb13f1255d15b2081154b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5aabd7732bd8d303a24bb13f1255d15b2081154b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "html_url": "https://github.com/rust-lang/rust/commit/15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c6337f2099f4364f6a030153fa7bf55daf9f3680", "url": "https://api.github.com/repos/rust-lang/rust/commits/c6337f2099f4364f6a030153fa7bf55daf9f3680", "html_url": "https://github.com/rust-lang/rust/commit/c6337f2099f4364f6a030153fa7bf55daf9f3680"}, {"sha": "c4bcf7714b1aa3dbf335cc4de6a1017e8dde3680", "url": "https://api.github.com/repos/rust-lang/rust/commits/c4bcf7714b1aa3dbf335cc4de6a1017e8dde3680", "html_url": "https://github.com/rust-lang/rust/commit/c4bcf7714b1aa3dbf335cc4de6a1017e8dde3680"}], "stats": {"total": 29, "additions": 21, "deletions": 8}, "files": [{"sha": "0f8307b87e5c0c5f9de012df4cee30b2daebf9fa", "filename": "src/librustc/front/feature_gate.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Flibrustc%2Ffront%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Flibrustc%2Ffront%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ffront%2Ffeature_gate.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -124,11 +124,8 @@ impl Visitor<()> for Context {\n         }\n \n         else if path.segments.last().identifier == self.sess.ident_of(\"asm\") {\n-            // NOTE: remove the false once the ASM feature is in the next snapshot\n-            if false {\n-                self.gate_feature(\"asm\", path.span, \"inline assembly is not \\\n-                    stable enough for use and is subject to change\");\n-            }\n+            self.gate_feature(\"asm\", path.span, \"inline assembly is not \\\n+                stable enough for use and is subject to change\");\n         }\n     }\n "}, {"sha": "c27609a590a3bc715da34598a45b678b5ed73cce", "filename": "src/libstd/std.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Flibstd%2Fstd.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Flibstd%2Fstd.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fstd.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -61,7 +61,7 @@ they contained the following prologue:\n       html_favicon_url = \"http://www.rust-lang.org/favicon.ico\",\n       html_root_url = \"http://static.rust-lang.org/doc/master\")];\n \n-#[feature(macro_rules, globs)];\n+#[feature(macro_rules, globs, asm)];\n \n // Don't link to std. We are std.\n #[no_std];"}, {"sha": "8d053bdae789b1e3358a87a286a628eaefeca326", "filename": "src/test/compile-fail/asm-gated.rs", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-gated.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-gated.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fasm-gated.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,8 +8,6 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// xfail-test\n-\n fn main() {\n     unsafe {\n         asm!(\"\"); //~ ERROR inline assembly is not stable enough"}, {"sha": "87d03290b46f17fa7e3bfb84b7ef6d4e8d7a6b65", "filename": "src/test/compile-fail/asm-in-bad-modifier.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-in-bad-modifier.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-in-bad-modifier.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fasm-in-bad-modifier.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,6 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// xfail-fast #[feature] doesn't work with check-fast\n+#[feature(asm)];\n+\n fn foo(x: int) { info2!(\"{}\", x); }\n \n #[cfg(target_arch = \"x86\")]"}, {"sha": "629d8082f44408057f626e831a19bcf053c0b808", "filename": "src/test/compile-fail/asm-out-assign-imm.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-out-assign-imm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-out-assign-imm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fasm-out-assign-imm.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,6 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// xfail-fast #[feature] doesn't work with check-fast\n+#[feature(asm)];\n+\n fn foo(x: int) { info2!(\"{}\", x); }\n \n #[cfg(target_arch = \"x86\")]"}, {"sha": "80237f331bca755c6d71c8abfd957b847e46d649", "filename": "src/test/compile-fail/asm-out-no-modifier.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-out-no-modifier.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-out-no-modifier.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fasm-out-no-modifier.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,6 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// xfail-fast #[feature] doesn't work with check-fast\n+#[feature(asm)];\n+\n fn foo(x: int) { info2!(\"{}\", x); }\n \n #[cfg(target_arch = \"x86\")]"}, {"sha": "ce3bbcebec2a2d968921446d1578821f9e0ac6f4", "filename": "src/test/compile-fail/asm-out-read-uninit.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-out-read-uninit.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fcompile-fail%2Fasm-out-read-uninit.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fasm-out-read-uninit.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,6 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// xfail-fast #[feature] doesn't work with check-fast\n+#[feature(asm)];\n+\n fn foo(x: int) { info2!(\"{}\", x); }\n \n #[cfg(target_arch = \"x86\")]"}, {"sha": "2bb1fadf87db259a75fc853764861932a8018e27", "filename": "src/test/pretty/raw-str-nonexpr.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fpretty%2Fraw-str-nonexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Fpretty%2Fraw-str-nonexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fpretty%2Fraw-str-nonexpr.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,8 +8,11 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// xfail-fast #[feature] doesn't work with check-fast\n // pp-exact\n \n+#[feature(asm)];\n+\n #[cfg = r#\"just parse this\"#]\n extern mod blah = r##\"blah\"##;\n "}, {"sha": "cbefe39c50f244db288426ff586676524a3bd831", "filename": "src/test/run-pass/asm-out-assign.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Frun-pass%2Fasm-out-assign.rs", "raw_url": "https://github.com/rust-lang/rust/raw/15a6bdebab4e7b811b9a902e3f8ed225c59af06e/src%2Ftest%2Frun-pass%2Fasm-out-assign.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fasm-out-assign.rs?ref=15a6bdebab4e7b811b9a902e3f8ed225c59af06e", "patch": "@@ -8,6 +8,9 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+// xfail-fast #[feature] doesn't work with check-fast\n+#[feature(asm)];\n+\n #[cfg(target_arch = \"x86\")]\n #[cfg(target_arch = \"x86_64\")]\n pub fn main() {"}]}