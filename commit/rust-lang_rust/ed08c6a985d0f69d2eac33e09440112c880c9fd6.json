{"sha": "ed08c6a985d0f69d2eac33e09440112c880c9fd6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVkMDhjNmE5ODVkMGY2OWQyZWFjMzNlMDk0NDAxMTJjODgwYzlmZDY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-04-30T17:59:30Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-04-30T17:59:30Z"}, "message": "review comments: change wording", "tree": {"sha": "2a3ca18d0ae72a443e8f13e3b4ba7bc14baa855c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2a3ca18d0ae72a443e8f13e3b4ba7bc14baa855c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ed08c6a985d0f69d2eac33e09440112c880c9fd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ed08c6a985d0f69d2eac33e09440112c880c9fd6", "html_url": "https://github.com/rust-lang/rust/commit/ed08c6a985d0f69d2eac33e09440112c880c9fd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ed08c6a985d0f69d2eac33e09440112c880c9fd6/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6068478d56a05ab1aa4d9ad87046e1d5d47afd7f", "url": "https://api.github.com/repos/rust-lang/rust/commits/6068478d56a05ab1aa4d9ad87046e1d5d47afd7f", "html_url": "https://github.com/rust-lang/rust/commit/6068478d56a05ab1aa4d9ad87046e1d5d47afd7f"}], "stats": {"total": 23, "additions": 6, "deletions": 17}, "files": [{"sha": "f5aa2e6ea5ceaf8564d75733967f7d5af9e4f7a1", "filename": "src/librustc_typeck/check/_match.rs", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ed08c6a985d0f69d2eac33e09440112c880c9fd6/src%2Flibrustc_typeck%2Fcheck%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ed08c6a985d0f69d2eac33e09440112c880c9fd6/src%2Flibrustc_typeck%2Fcheck%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2F_match.rs?ref=ed08c6a985d0f69d2eac33e09440112c880c9fd6", "patch": "@@ -535,19 +535,9 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n                         err.help(&format!(\"did you mean `{}: &{}`?\", snippet, expected));\n                     }\n                 }\n-                hir::Node::Expr(hir::Expr { node: hir::ExprKind::Match(..), .. }) => {\n-                    // rely on match ergonomics\n-                    if let Ok(snippet) = tcx.sess.source_map().span_to_snippet(inner.span) {\n-                        err.span_suggestion(\n-                            pat.span,\n-                            \"you can rely on match ergonomics and remove the explicit borrow\",\n-                            snippet,\n-                            Applicability::MaybeIncorrect,\n-                        );\n-                    }\n-                }\n+                hir::Node::Expr(hir::Expr { node: hir::ExprKind::Match(..), .. }) |\n                 hir::Node::Pat(_) => {\n-                    // nested `&&pat`\n+                    // rely on match ergonomics or it might be nested `&&pat`\n                     if let Ok(snippet) = tcx.sess.source_map().span_to_snippet(inner.span) {\n                         err.span_suggestion(\n                             pat.span,"}, {"sha": "b7497be6ceb3693b4f42c485035336a6b55a82c3", "filename": "src/test/ui/suggestions/match-ergonomics.stderr", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/ed08c6a985d0f69d2eac33e09440112c880c9fd6/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-ergonomics.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ed08c6a985d0f69d2eac33e09440112c880c9fd6/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-ergonomics.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Fmatch-ergonomics.stderr?ref=ed08c6a985d0f69d2eac33e09440112c880c9fd6", "patch": "@@ -26,14 +26,13 @@ error[E0308]: mismatched types\n   --> $DIR/match-ergonomics.rs:29:9\n    |\n LL |         &v => {},\n-   |         ^^ expected i32, found reference\n+   |         ^^\n+   |         |\n+   |         expected i32, found reference\n+   |         help: you can probably remove the explicit borrow: `v`\n    |\n    = note: expected type `i32`\n               found type `&_`\n-help: you can rely on match ergonomics and remove the explicit borrow\n-   |\n-LL |         v => {},\n-   |         ^\n \n error[E0308]: mismatched types\n   --> $DIR/match-ergonomics.rs:40:13"}]}