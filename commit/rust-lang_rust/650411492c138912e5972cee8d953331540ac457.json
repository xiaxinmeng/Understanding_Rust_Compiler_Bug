{"sha": "650411492c138912e5972cee8d953331540ac457", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1MDQxMTQ5MmMxMzg5MTJlNTk3MmNlZThkOTUzMzMxNTQwYWM0NTc=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2021-04-04T09:09:40Z"}, "committer": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2021-04-04T09:09:40Z"}, "message": "also test getrandom directly", "tree": {"sha": "3920f65d475c9ccfa65895bed8df66077356a36d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3920f65d475c9ccfa65895bed8df66077356a36d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/650411492c138912e5972cee8d953331540ac457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/650411492c138912e5972cee8d953331540ac457", "html_url": "https://github.com/rust-lang/rust/commit/650411492c138912e5972cee8d953331540ac457", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/650411492c138912e5972cee8d953331540ac457/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cdd1744b896e8129322229f253f95fd7ad491f1", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cdd1744b896e8129322229f253f95fd7ad491f1", "html_url": "https://github.com/rust-lang/rust/commit/2cdd1744b896e8129322229f253f95fd7ad491f1"}], "stats": {"total": 39, "additions": 35, "deletions": 4}, "files": [{"sha": "3473d86c486b051423f9ae86f6be43672894af5d", "filename": "test-cargo-miri/Cargo.lock", "status": "modified", "additions": 30, "deletions": 4, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/650411492c138912e5972cee8d953331540ac457/test-cargo-miri%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/650411492c138912e5972cee8d953331540ac457/test-cargo-miri%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.lock?ref=650411492c138912e5972cee8d953331540ac457", "patch": "@@ -1,5 +1,7 @@\n # This file is automatically @generated by Cargo.\n # It is not intended for manual editing.\n+version = 3\n+\n [[package]]\n name = \"byteorder\"\n version = \"1.3.4\"\n@@ -12,6 +14,7 @@ version = \"0.1.0\"\n dependencies = [\n  \"byteorder\",\n  \"cdylib\",\n+ \"getrandom 0.2.2\",\n  \"issue_1567\",\n  \"issue_1691\",\n  \"issue_1705\",\n@@ -32,15 +35,32 @@ version = \"0.1.10\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"4785bdd1c96b2a846b2bd7cc02e86b6b3dbf14e7e53446c4f54c92a361040822\"\n \n+[[package]]\n+name = \"cfg-if\"\n+version = \"1.0.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"baf1de4339761588bc0619e3cbc0120ee582ebb74b53b4efbf79117bd2da40fd\"\n+\n [[package]]\n name = \"getrandom\"\n version = \"0.1.15\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"fc587bc0ec293155d5bfa6b9891ec18a1e330c234f896ea47fbada4cadbe47e6\"\n dependencies = [\n- \"cfg-if\",\n+ \"cfg-if 0.1.10\",\n  \"libc\",\n- \"wasi\",\n+ \"wasi 0.9.0+wasi-snapshot-preview1\",\n+]\n+\n+[[package]]\n+name = \"getrandom\"\n+version = \"0.2.2\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"c9495705279e7140bf035dde1f6e750c162df8b625267cd52cc44e0b156732c8\"\n+dependencies = [\n+ \"cfg-if 1.0.0\",\n+ \"libc\",\n+ \"wasi 0.10.2+wasi-snapshot-preview1\",\n ]\n \n [[package]]\n@@ -116,7 +136,7 @@ version = \"0.7.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"6a6b1679d49b24bbfe0c803429aa1874472f50d9b363131f0e89fc356b544d03\"\n dependencies = [\n- \"getrandom\",\n+ \"getrandom 0.1.15\",\n  \"libc\",\n  \"rand_chacha\",\n  \"rand_core\",\n@@ -140,7 +160,7 @@ version = \"0.5.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"90bde5296fc891b0cef12a6d03ddccc162ce7b2aff54160af9338f8d40df6d19\"\n dependencies = [\n- \"getrandom\",\n+ \"getrandom 0.1.15\",\n ]\n \n [[package]]\n@@ -201,3 +221,9 @@ name = \"wasi\"\n version = \"0.9.0+wasi-snapshot-preview1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"cccddf32554fecc6acb585f82a32a72e28b48f8c4c1883ddfeeeaa96f7d8e519\"\n+\n+[[package]]\n+name = \"wasi\"\n+version = \"0.10.2+wasi-snapshot-preview1\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+checksum = \"fd6fbd9a79829dd1ad0cc20627bf1ed606756a7f77edff7b66b7064f9cb327c6\""}, {"sha": "c9619b6b4baa789d1af1db77bdff176a154f7a54", "filename": "test-cargo-miri/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/650411492c138912e5972cee8d953331540ac457/test-cargo-miri%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/650411492c138912e5972cee8d953331540ac457/test-cargo-miri%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2FCargo.toml?ref=650411492c138912e5972cee8d953331540ac457", "patch": "@@ -16,6 +16,7 @@ issue_1705 = { path = \"issue-1705\" }\n \n [dev-dependencies]\n rand = { version = \"0.7\", features = [\"small_rng\"] }\n+getrandom = { version = \"0.2\" }\n serde_derive = \"1.0\" # not actually used, but exercises some unique code path (`--extern` .so file)\n \n [lib]"}, {"sha": "33b814eeeeeba39f68a9a215ce496f0e972d12b2", "filename": "test-cargo-miri/tests/test.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/650411492c138912e5972cee8d953331540ac457/test-cargo-miri%2Ftests%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/650411492c138912e5972cee8d953331540ac457/test-cargo-miri%2Ftests%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/test-cargo-miri%2Ftests%2Ftest.rs?ref=650411492c138912e5972cee8d953331540ac457", "patch": "@@ -24,6 +24,10 @@ fn does_not_work_on_miri() {\n \n #[test]\n fn entropy_rng() {\n+    // Test `getrandom` directly.\n+    let mut data = vec![0; 16];\n+    getrandom::getrandom(&mut data).unwrap();\n+\n     // Try seeding with \"real\" entropy.\n     let mut rng = SmallRng::from_entropy();\n     let _val = rng.gen::<i32>();"}]}