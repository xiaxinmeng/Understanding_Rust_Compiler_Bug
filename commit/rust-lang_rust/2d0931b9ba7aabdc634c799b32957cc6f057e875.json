{"sha": "2d0931b9ba7aabdc634c799b32957cc6f057e875", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJkMDkzMWI5YmE3YWFiZGM2MzRjNzk5YjMyOTU3Y2M2ZjA1N2U4NzU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2019-08-22T06:57:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-08-22T06:57:01Z"}, "message": "Merge #1714\n\n1714: Fix syntax-highlighting for fields (`NAMED_FIELD_DEF`) r=matklad a=cynecx\n\nBefore:\r\n\r\n`ralsp.function: \"#ff0000\"`\r\n\r\n![image](https://user-images.githubusercontent.com/5961244/63473802-13920600-c477-11e9-93df-67c04fc67636.png)\r\n\r\nAfter:\r\n\r\n`ralsp.field: \"#9cdcfe\"`\r\n\r\n![image](https://user-images.githubusercontent.com/5961244/63473976-a894ff00-c477-11e9-8731-269a4c942e05.png)\r\n\r\n\n\nCo-authored-by: cynecx <me@cynecx.net>", "tree": {"sha": "0e23834d5e32c411919b156ecfc7f923de9acd83", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0e23834d5e32c411919b156ecfc7f923de9acd83"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2d0931b9ba7aabdc634c799b32957cc6f057e875", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdXjy9CRBK7hj4Ov3rIwAAdHIIAC2pv7x2jrjT+0xjEoTcb2yr\njTHpqKzeIzQPUI9JWDmfX3VA/IAD5AAunWuZJVXrBFEdGT3jrgd7yaJzsufDkQmK\nLWDAT1+HQopbOW3dIm+7ds+BxAGrI7lxfuBUZNP7xz10wYJp6xnyi0BKfCqvwQ7n\nIcRYFiq77q6qH9XjQHMhUiTAKS+h0Xz1/pgYHocecG706elw0LJQi8TPFCnIBFT1\nSOJucLHI5KlmumoMaZga3NF5ggE5NaZy8bUwfR1HiGrZg5sbsTmer7w8gaPBcvrS\nTCX1Jd+9jWdiJ0AEJBs7DJiezLSfD1L9cge4Pg2pDq7qDavv/8McKzjOXPcUOjc=\n=Ku86\n-----END PGP SIGNATURE-----\n", "payload": "tree 0e23834d5e32c411919b156ecfc7f923de9acd83\nparent 5fd9a5be0984faa138281e46dd4b73cfdad073b1\nparent 1d87f85441fe8879be96952c7c39ff8b8d4bc880\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1566457021 +0000\ncommitter GitHub <noreply@github.com> 1566457021 +0000\n\nMerge #1714\n\n1714: Fix syntax-highlighting for fields (`NAMED_FIELD_DEF`) r=matklad a=cynecx\n\nBefore:\r\n\r\n`ralsp.function: \"#ff0000\"`\r\n\r\n![image](https://user-images.githubusercontent.com/5961244/63473802-13920600-c477-11e9-93df-67c04fc67636.png)\r\n\r\nAfter:\r\n\r\n`ralsp.field: \"#9cdcfe\"`\r\n\r\n![image](https://user-images.githubusercontent.com/5961244/63473976-a894ff00-c477-11e9-8731-269a4c942e05.png)\r\n\r\n\n\nCo-authored-by: cynecx <me@cynecx.net>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2d0931b9ba7aabdc634c799b32957cc6f057e875", "html_url": "https://github.com/rust-lang/rust/commit/2d0931b9ba7aabdc634c799b32957cc6f057e875", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2d0931b9ba7aabdc634c799b32957cc6f057e875/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fd9a5be0984faa138281e46dd4b73cfdad073b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fd9a5be0984faa138281e46dd4b73cfdad073b1", "html_url": "https://github.com/rust-lang/rust/commit/5fd9a5be0984faa138281e46dd4b73cfdad073b1"}, {"sha": "1d87f85441fe8879be96952c7c39ff8b8d4bc880", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d87f85441fe8879be96952c7c39ff8b8d4bc880", "html_url": "https://github.com/rust-lang/rust/commit/1d87f85441fe8879be96952c7c39ff8b8d4bc880"}], "stats": {"total": 28, "additions": 12, "deletions": 16}, "files": [{"sha": "b39c4d3717a7ad89efab4c42c15f5199bf8d6c82", "filename": "crates/ra_ide_api/src/snapshots/highlighting.html", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2d0931b9ba7aabdc634c799b32957cc6f057e875/crates%2Fra_ide_api%2Fsrc%2Fsnapshots%2Fhighlighting.html", "raw_url": "https://github.com/rust-lang/rust/raw/2d0931b9ba7aabdc634c799b32957cc6f057e875/crates%2Fra_ide_api%2Fsrc%2Fsnapshots%2Fhighlighting.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fsnapshots%2Fhighlighting.html?ref=2d0931b9ba7aabdc634c799b32957cc6f057e875", "patch": "@@ -21,8 +21,8 @@\n </style>\n <pre><code><span class=\"attribute\">#</span><span class=\"attribute\">[</span><span class=\"attribute\">derive</span><span class=\"attribute\">(</span><span class=\"attribute\">Clone</span><span class=\"attribute\">,</span><span class=\"attribute\"> </span><span class=\"attribute\">Debug</span><span class=\"attribute\">)</span><span class=\"attribute\">]</span>\n <span class=\"keyword\">struct</span> <span class=\"type\">Foo</span> {\n-    <span class=\"keyword\">pub</span> <span class=\"function\">x</span>: <span class=\"type\">i32</span>,\n-    <span class=\"keyword\">pub</span> <span class=\"function\">y</span>: <span class=\"type\">i32</span>,\n+    <span class=\"keyword\">pub</span> <span class=\"field\">x</span>: <span class=\"type\">i32</span>,\n+    <span class=\"keyword\">pub</span> <span class=\"field\">y</span>: <span class=\"type\">i32</span>,\n }\n \n <span class=\"keyword\">fn</span> <span class=\"function\">foo</span>&lt;<span class=\"type\">T</span>&gt;() -&gt; <span class=\"type\">T</span> {"}, {"sha": "448acffc86ffa656eb216eda27812a14480f5ca0", "filename": "crates/ra_ide_api/src/syntax_highlighting.rs", "status": "modified", "additions": 10, "deletions": 14, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/2d0931b9ba7aabdc634c799b32957cc6f057e875/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2d0931b9ba7aabdc634c799b32957cc6f057e875/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fsyntax_highlighting.rs?ref=2d0931b9ba7aabdc634c799b32957cc6f057e875", "patch": "@@ -158,21 +158,17 @@ pub(crate) fn highlight(db: &RootDatabase, file_id: FileId) -> Vec<HighlightedRa\n                         } else {\n                             \"variable\"\n                         }\n-                    } else if name\n-                        .syntax()\n-                        .parent()\n-                        .map(|x| {\n-                            x.kind() == TYPE_PARAM\n-                                || x.kind() == STRUCT_DEF\n-                                || x.kind() == ENUM_DEF\n-                                || x.kind() == TRAIT_DEF\n-                                || x.kind() == TYPE_ALIAS_DEF\n-                        })\n-                        .unwrap_or(false)\n-                    {\n-                        \"type\"\n                     } else {\n-                        \"function\"\n+                        name.syntax()\n+                            .parent()\n+                            .map(|x| match x.kind() {\n+                                TYPE_PARAM | STRUCT_DEF | ENUM_DEF | TRAIT_DEF | TYPE_ALIAS_DEF => {\n+                                    \"type\"\n+                                }\n+                                NAMED_FIELD_DEF => \"field\",\n+                                _ => \"function\",\n+                            })\n+                            .unwrap_or(\"function\")\n                     }\n                 } else {\n                     \"text\""}]}