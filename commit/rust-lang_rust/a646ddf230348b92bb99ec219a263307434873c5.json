{"sha": "a646ddf230348b92bb99ec219a263307434873c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE2NDZkZGYyMzAzNDhiOTJiYjk5ZWMyMTlhMjYzMzA3NDM0ODczYzU=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-07-20T14:09:24Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-07-20T14:09:24Z"}, "message": "Merge #9646\n\n9646: add 'use' prefix for any auto-import r=Veykril a=mahdi-frms\n\nFixes #9643\r\n\r\nlooks like there was an if condition that had to be removed.\n\nCo-authored-by: mahdi-frms <mahdif1380@outlook.com>", "tree": {"sha": "b20f7b2761ff3afdc4b90d3658c0390218b0480c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b20f7b2761ff3afdc4b90d3658c0390218b0480c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a646ddf230348b92bb99ec219a263307434873c5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJg9tkUCRBK7hj4Ov3rIwAAmIIIAJ7kpjz+bZOxXZ+h2cUPAe4D\nBeB4OyKpAO4TrGQYSTJtMta7pSGEUfc4mV17lhaZXtl3mzKKCVf4/z8SYXDxECNp\nbxv1ddIB8V7T5BIpR2WmCKZ8nFkvFoSCQHBwCGuozN5wRxyEHqyMmcDtgMJ2ejnR\nO6J/6dzpepy8wlM7BrGAnemWtEkz0hV4vnIKyZ350CGw+x+QgXDfjuQFjsreMSLg\nJr7a+01ANutNtmrhqxwyhqQbRjMmCsm4EEAsOiDe1iwjcikq078+OAaszMgWQm5I\nU4dtlROstT7qUd+2Jt8zo/LcPREZqjmj98YrYkBjYqJLTvU0ZP3zwz4JoHhT/Xk=\n=IFuX\n-----END PGP SIGNATURE-----\n", "payload": "tree b20f7b2761ff3afdc4b90d3658c0390218b0480c\nparent 5fee2bef197deb575a70cdd059a474c4832d8caa\nparent 65839f406915820013f1caa2053eceed59992ed0\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1626790164 +0000\ncommitter GitHub <noreply@github.com> 1626790164 +0000\n\nMerge #9646\n\n9646: add 'use' prefix for any auto-import r=Veykril a=mahdi-frms\n\nFixes #9643\r\n\r\nlooks like there was an if condition that had to be removed.\n\nCo-authored-by: mahdi-frms <mahdif1380@outlook.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a646ddf230348b92bb99ec219a263307434873c5", "html_url": "https://github.com/rust-lang/rust/commit/a646ddf230348b92bb99ec219a263307434873c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a646ddf230348b92bb99ec219a263307434873c5/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5fee2bef197deb575a70cdd059a474c4832d8caa", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fee2bef197deb575a70cdd059a474c4832d8caa", "html_url": "https://github.com/rust-lang/rust/commit/5fee2bef197deb575a70cdd059a474c4832d8caa"}, {"sha": "65839f406915820013f1caa2053eceed59992ed0", "url": "https://api.github.com/repos/rust-lang/rust/commits/65839f406915820013f1caa2053eceed59992ed0", "html_url": "https://github.com/rust-lang/rust/commit/65839f406915820013f1caa2053eceed59992ed0"}], "stats": {"total": 20, "additions": 7, "deletions": 13}, "files": [{"sha": "75b5daca1f8ebbc13a465e98163aaa99af56e4c9", "filename": "crates/ide_completion/src/completions/flyimport.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/a646ddf230348b92bb99ec219a263307434873c5/crates%2Fide_completion%2Fsrc%2Fcompletions%2Fflyimport.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a646ddf230348b92bb99ec219a263307434873c5/crates%2Fide_completion%2Fsrc%2Fcompletions%2Fflyimport.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_completion%2Fsrc%2Fcompletions%2Fflyimport.rs?ref=a646ddf230348b92bb99ec219a263307434873c5", "patch": "@@ -368,9 +368,9 @@ fn main() {\n }\n \"#,\n             expect![[r#\"\n-                st dep::some_module::ThirdStruct\n-                st dep::some_module::AfterThirdStruct\n-                st dep::some_module::ThiiiiiirdStruct\n+                st ThirdStruct (use dep::some_module::ThirdStruct)\n+                st AfterThirdStruct (use dep::some_module::AfterThirdStruct)\n+                st ThiiiiiirdStruct (use dep::some_module::ThiiiiiirdStruct)\n             \"#]],\n         );\n     }\n@@ -817,7 +817,7 @@ fn main() {\n         check(\n             fixture,\n             expect![[r#\"\n-        st foo::bar::baz::Item\n+        st Item (use foo::bar::baz::Item)\n         \"#]],\n         );\n \n@@ -997,7 +997,7 @@ fn main() {\n     TE$0\n }\"#,\n             expect![[r#\"\n-        ct foo::TEST_CONST\n+        ct TEST_CONST (use foo::TEST_CONST)\n     \"#]],\n         );\n \n@@ -1014,7 +1014,7 @@ fn main() {\n     te$0\n }\"#,\n             expect![[r#\"\n-        ct foo::TEST_CONST\n+        ct TEST_CONST (use foo::TEST_CONST)\n         fn test_function() (use foo::test_function) fn() -> i32\n     \"#]],\n         );"}, {"sha": "2bc69d5657e46f58fb920749c645646ae0c729b6", "filename": "crates/ide_completion/src/item.rs", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/a646ddf230348b92bb99ec219a263307434873c5/crates%2Fide_completion%2Fsrc%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a646ddf230348b92bb99ec219a263307434873c5/crates%2Fide_completion%2Fsrc%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide_completion%2Fsrc%2Fitem.rs?ref=a646ddf230348b92bb99ec219a263307434873c5", "patch": "@@ -429,13 +429,7 @@ impl Builder {\n         {\n             lookup = lookup.or_else(|| Some(label.clone()));\n             insert_text = insert_text.or_else(|| Some(label.clone()));\n-\n-            let original_path_label = original_path.to_string();\n-            if original_path_label.ends_with(&label) {\n-                label = original_path_label;\n-            } else {\n-                format_to!(label, \" (use {})\", original_path)\n-            }\n+            format_to!(label, \" (use {})\", original_path)\n         } else if let Some(trait_name) = self.trait_name {\n             insert_text = insert_text.or_else(|| Some(label.clone()));\n             format_to!(label, \" (as {})\", trait_name)"}]}