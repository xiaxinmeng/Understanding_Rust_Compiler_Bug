{"sha": "1c2334950435bb7b6cc26015ab6205fde3958b19", "node_id": "C_kwDOAAsO6NoAKDFjMjMzNDk1MDQzNWJiN2I2Y2MyNjAxNWFiNjIwNWZkZTM5NThiMTk", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-09-23T17:55:30Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2021-09-23T18:03:38Z"}, "message": "Clean up clean/types.rs file by making the implementations follow the type declaration", "tree": {"sha": "a761a20c13c60462b14b55eaf9a4b748b072f29d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a761a20c13c60462b14b55eaf9a4b748b072f29d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1c2334950435bb7b6cc26015ab6205fde3958b19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1c2334950435bb7b6cc26015ab6205fde3958b19", "html_url": "https://github.com/rust-lang/rust/commit/1c2334950435bb7b6cc26015ab6205fde3958b19", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1c2334950435bb7b6cc26015ab6205fde3958b19/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cfff31bc833070a00578bd6178160aeed56f28ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/cfff31bc833070a00578bd6178160aeed56f28ba", "html_url": "https://github.com/rust-lang/rust/commit/cfff31bc833070a00578bd6178160aeed56f28ba"}], "stats": {"total": 82, "additions": 40, "deletions": 42}, "files": [{"sha": "cf170f7f25c4be3c63a62bffefa54d1a1bf31a81", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 40, "deletions": 42, "changes": 82, "blob_url": "https://github.com/rust-lang/rust/blob/1c2334950435bb7b6cc26015ab6205fde3958b19/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1c2334950435bb7b6cc26015ab6205fde3958b19/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=1c2334950435bb7b6cc26015ab6205fde3958b19", "patch": "@@ -908,18 +908,10 @@ impl<'a> FromIterator<&'a DocFragment> for String {\n     }\n }\n \n-/// The attributes on an [`Item`], including attributes like `#[derive(...)]` and `#[inline]`,\n-/// as well as doc comments.\n-#[derive(Clone, Debug, Default)]\n-crate struct Attributes {\n-    crate doc_strings: Vec<DocFragment>,\n-    crate other_attrs: Vec<ast::Attribute>,\n-}\n-\n-#[derive(Clone, Debug, PartialEq, Eq, Hash)]\n /// A link that has not yet been rendered.\n ///\n /// This link will be turned into a rendered link by [`Item::links`].\n+#[derive(Clone, Debug, PartialEq, Eq, Hash)]\n crate struct ItemLink {\n     /// The original link written in the markdown\n     pub(crate) link: String,\n@@ -944,6 +936,14 @@ pub struct RenderedLink {\n     pub(crate) href: String,\n }\n \n+/// The attributes on an [`Item`], including attributes like `#[derive(...)]` and `#[inline]`,\n+/// as well as doc comments.\n+#[derive(Clone, Debug, Default)]\n+crate struct Attributes {\n+    crate doc_strings: Vec<DocFragment>,\n+    crate other_attrs: Vec<ast::Attribute>,\n+}\n+\n impl Attributes {\n     crate fn lists(&self, name: Symbol) -> ListAttributesIter<'_> {\n         self.other_attrs.lists(name)\n@@ -1424,37 +1424,6 @@ crate enum Type {\n     ImplTrait(Vec<GenericBound>),\n }\n \n-#[derive(Clone, PartialEq, Eq, Hash, Copy, Debug)]\n-/// N.B. this has to be different from `hir::PrimTy` because it also includes types that aren't\n-/// paths, like `Unit`.\n-crate enum PrimitiveType {\n-    Isize,\n-    I8,\n-    I16,\n-    I32,\n-    I64,\n-    I128,\n-    Usize,\n-    U8,\n-    U16,\n-    U32,\n-    U64,\n-    U128,\n-    F32,\n-    F64,\n-    Char,\n-    Bool,\n-    Str,\n-    Slice,\n-    Array,\n-    Tuple,\n-    Unit,\n-    RawPointer,\n-    Reference,\n-    Fn,\n-    Never,\n-}\n-\n crate trait GetDefId {\n     /// Use this method to get the [`DefId`] of a [`clean`] AST node.\n     /// This will return [`None`] when called on a primitive [`clean::Type`].\n@@ -1569,9 +1538,7 @@ impl Type {\n         };\n         Some((&self_, trait_did, *name))\n     }\n-}\n \n-impl Type {\n     fn inner_def_id(&self, cache: Option<&Cache>) -> Option<DefId> {\n         let t: PrimitiveType = match *self {\n             ResolvedPath { did, .. } => return Some(did),\n@@ -1608,6 +1575,37 @@ impl GetDefId for Type {\n     }\n }\n \n+/// N.B. this has to be different from `hir::PrimTy` because it also includes types that aren't\n+/// paths, like `Unit`.\n+#[derive(Clone, PartialEq, Eq, Hash, Copy, Debug)]\n+crate enum PrimitiveType {\n+    Isize,\n+    I8,\n+    I16,\n+    I32,\n+    I64,\n+    I128,\n+    Usize,\n+    U8,\n+    U16,\n+    U32,\n+    U64,\n+    U128,\n+    F32,\n+    F64,\n+    Char,\n+    Bool,\n+    Str,\n+    Slice,\n+    Array,\n+    Tuple,\n+    Unit,\n+    RawPointer,\n+    Reference,\n+    Fn,\n+    Never,\n+}\n+\n impl PrimitiveType {\n     crate fn from_hir(prim: hir::PrimTy) -> PrimitiveType {\n         use ast::{FloatTy, IntTy, UintTy};"}]}