{"sha": "43d0497824d3d1a6f0b15d865a00715537673af2", "node_id": "C_kwDOAAsO6NoAKDQzZDA0OTc4MjRkM2QxYTZmMGIxNWQ4NjVhMDA3MTU1Mzc2NzNhZjI", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-04-08T13:30:37Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-04-08T13:30:37Z"}, "message": "Fix invalid array access in `beautify_doc_string`", "tree": {"sha": "3884a656aeb9e464ae02408eded551861bf4d73f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3884a656aeb9e464ae02408eded551861bf4d73f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/43d0497824d3d1a6f0b15d865a00715537673af2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/43d0497824d3d1a6f0b15d865a00715537673af2", "html_url": "https://github.com/rust-lang/rust/commit/43d0497824d3d1a6f0b15d865a00715537673af2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/43d0497824d3d1a6f0b15d865a00715537673af2/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1a4b9a85634c17a60e8802307510c300a35a4b9b", "url": "https://api.github.com/repos/rust-lang/rust/commits/1a4b9a85634c17a60e8802307510c300a35a4b9b", "html_url": "https://github.com/rust-lang/rust/commit/1a4b9a85634c17a60e8802307510c300a35a4b9b"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "8730aeb0f3bffdf182cef918a75c06a4a44bd391", "filename": "compiler/rustc_ast/src/util/comments.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/43d0497824d3d1a6f0b15d865a00715537673af2/compiler%2Frustc_ast%2Fsrc%2Futil%2Fcomments.rs", "raw_url": "https://github.com/rust-lang/rust/raw/43d0497824d3d1a6f0b15d865a00715537673af2/compiler%2Frustc_ast%2Fsrc%2Futil%2Fcomments.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast%2Fsrc%2Futil%2Fcomments.rs?ref=43d0497824d3d1a6f0b15d865a00715537673af2", "patch": "@@ -52,7 +52,10 @@ pub fn beautify_doc_string(data: Symbol, kind: CommentKind) -> Symbol {\n         // when we try to compute the \"horizontal trim\".\n         let lines = if kind == CommentKind::Block {\n             // Whatever happens, we skip the first line.\n-            let mut i = if lines[0].trim_start().starts_with('*') { 0 } else { 1 };\n+            let mut i = lines\n+                .get(0)\n+                .map(|l| if l.trim_start().starts_with('*') { 0 } else { 1 })\n+                .unwrap_or(0);\n             let mut j = lines.len();\n \n             while i < j && lines[i].trim().is_empty() {"}]}