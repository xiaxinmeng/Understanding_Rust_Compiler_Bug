{"sha": "7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "node_id": "C_kwDOAAsO6NoAKDdlZThmZDc3YWNlOWJhOTNiOGY5N2I5YjZlN2FjYjVkNDkxZmUxMWY", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-05-29T23:59:51Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-05-29T23:59:51Z"}, "message": "Auto merge of #10841 - xFrednet:changelog-1-70, r=giraffate\n\nChangelog for Rust 1.70 :hammer:\n\nRoses are red,\nviolets are blue,\ndamn I have an exam to cram,\nand this rhyme is a scam\n\n---\n\nThis poem is... certainly something... Anyways, hope whoever is reading this, has a lovely day full of sunshine without the need to study :D\n\n---\n\nchangelog: none", "tree": {"sha": "32c6df6b1073bb6acec99276825f753cec0bce54", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/32c6df6b1073bb6acec99276825f753cec0bce54"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "html_url": "https://github.com/rust-lang/rust/commit/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d9e4272d681f04aa024c3f581f5dfc13aa75775", "url": "https://api.github.com/repos/rust-lang/rust/commits/8d9e4272d681f04aa024c3f581f5dfc13aa75775", "html_url": "https://github.com/rust-lang/rust/commit/8d9e4272d681f04aa024c3f581f5dfc13aa75775"}, {"sha": "7dd0ae0262319e850870b5564ffdf53255a47ada", "url": "https://api.github.com/repos/rust-lang/rust/commits/7dd0ae0262319e850870b5564ffdf53255a47ada", "html_url": "https://github.com/rust-lang/rust/commit/7dd0ae0262319e850870b5564ffdf53255a47ada"}], "stats": {"total": 141, "additions": 133, "deletions": 8}, "files": [{"sha": "fdf0cacad3624fa97255d7fe1da2f30f0741010a", "filename": "CHANGELOG.md", "status": "modified", "additions": 126, "deletions": 1, "changes": 127, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -6,7 +6,132 @@ document.\n \n ## Unreleased / Beta / In Rust Nightly\n \n-[149392b0...master](https://github.com/rust-lang/rust-clippy/compare/149392b0...master)\n+[83e42a23...master](https://github.com/rust-lang/rust-clippy/compare/83e42a23...master)\n+\n+## Rust 1.70\n+\n+Current beta, released 2023-06-01\n+\n+[149392b0...83e42a23](https://github.com/rust-lang/rust-clippy/compare/149392b0...83e42a23)\n+\n+### New Lints\n+\n+* [`large_futures`]\n+  [#10414](https://github.com/rust-lang/rust-clippy/pull/10414)\n+* [`missing_assert_message`]\n+  [#10362](https://github.com/rust-lang/rust-clippy/pull/10362)\n+* [`clear_with_drain`]\n+  [#10528](https://github.com/rust-lang/rust-clippy/pull/10528)\n+* [`redundant_async_block`]\n+  [#10448](https://github.com/rust-lang/rust-clippy/pull/10448)\n+* [`collection_is_never_read`]\n+  [#10415](https://github.com/rust-lang/rust-clippy/pull/10415)\n+* [`let_with_type_underscore`]\n+  [#10467](https://github.com/rust-lang/rust-clippy/pull/10467)\n+* [`tests_outside_test_module`]\n+  [#10543](https://github.com/rust-lang/rust-clippy/pull/10543)\n+* [`allow_attributes`]\n+  [#10481](https://github.com/rust-lang/rust-clippy/pull/10481)\n+* [`suspicious_doc_comments`]\n+  [#10497](https://github.com/rust-lang/rust-clippy/pull/10497)\n+* [`unnecessary_box_returns`]\n+  [#9102](https://github.com/rust-lang/rust-clippy/pull/9102)\n+* [`manual_main_separator_str`]\n+  [#10483](https://github.com/rust-lang/rust-clippy/pull/10483)\n+* [`unnecessary_struct_initialization`]\n+  [#10489](https://github.com/rust-lang/rust-clippy/pull/10489)\n+* [`manual_slice_size_calculation`]\n+  [#10601](https://github.com/rust-lang/rust-clippy/pull/10601)\n+* [`lines_filter_map_ok`]\n+  [#10534](https://github.com/rust-lang/rust-clippy/pull/10534)\n+\n+### Moves and Deprecations\n+\n+* Moved [`let_underscore_untyped`] to `restriction`\n+  [#10442](https://github.com/rust-lang/rust-clippy/pull/10442)\n+\n+### Enhancements\n+\n+* [`extra_unused_type_parameters`]: No longer lints on public items if `avoid-breaking-exported-api` is set\n+  [#10536](https://github.com/rust-lang/rust-clippy/pull/10536)\n+* [`len_without_is_empty`]: Now also detects `async` functions\n+  [#10359](https://github.com/rust-lang/rust-clippy/pull/10359)\n+* [`arithmetic_side_effects`]: Now correctly handles divisions and modulo expressions if the right-hand-side\n+  is unknown\n+  [#10585](https://github.com/rust-lang/rust-clippy/pull/10585)\n+* [`nonminimal_bool`]: No longer ignores `#[allow]` attributes\n+  [#10588](https://github.com/rust-lang/rust-clippy/pull/10588)\n+* [`uninit_vec`], [`uninit_assumed_init`]: Now uses a better heuristic\n+  [#10520](https://github.com/rust-lang/rust-clippy/pull/10520)\n+* [`ifs_same_cond`]: Now also detects immutable method calls.\n+  [#10350](https://github.com/rust-lang/rust-clippy/pull/10350)\n+* [`arithmetic_side_effects`]: No longer lints on right or left shifts with constant integers, as the\n+  compiler warns about them\n+  [#10309](https://github.com/rust-lang/rust-clippy/pull/10309)\n+* [`items_after_statements`]: `#[allow(items_after_statements)]` now works on items\n+  [#10542](https://github.com/rust-lang/rust-clippy/pull/10542)\n+* [`significant_drop_tightening`]: Was optimized\n+  [#10533](https://github.com/rust-lang/rust-clippy/pull/10533)\n+\n+### False Positive Fixes\n+\n+* [`single_component_path_imports`]: No longer lints if the import is used relative to `self`\n+  [#10566](https://github.com/rust-lang/rust-clippy/pull/10566)\n+* [`derivable_impls`]: No longer suggests deriving `Default` on generics with implicit arguments\n+  [#10399](https://github.com/rust-lang/rust-clippy/pull/10399)\n+* [`let_unit_value`]: No longer lints if the expression contains an `await`\n+  [#10439](https://github.com/rust-lang/rust-clippy/pull/10439)\n+* [`double_must_use`]: Now ignores `async` functions\n+  [#10589](https://github.com/rust-lang/rust-clippy/pull/10589)\n+* [`manual_clamp`]: No longer lints in constant context\n+  [#10479](https://github.com/rust-lang/rust-clippy/pull/10479)\n+* [`almost_swapped`]: Now ignores external macros\n+  [#10502](https://github.com/rust-lang/rust-clippy/pull/10502)\n+* [`nonminimal_bool`]: Now ignores macros\n+  [#10527](https://github.com/rust-lang/rust-clippy/pull/10527)\n+* [`needless_return`]: No longer lints match statements with incompatible branches\n+  [#10593](https://github.com/rust-lang/rust-clippy/pull/10593)\n+* [`use_self`]: Do not suggest using `Self` in const generic parameters\n+  [#10375](https://github.com/rust-lang/rust-clippy/pull/10375)\n+* [`mem_replace_option_with_none`]: No longer lints on field expressions\n+  [#10594](https://github.com/rust-lang/rust-clippy/pull/10594)\n+* [`items_after_statements`]: No longer lints on times from macros\n+  [#10542](https://github.com/rust-lang/rust-clippy/pull/10542)\n+* [`print_literal`], [`write_literal`]: No longer lint strings coming from the `file!()` macro\n+  [#10573](https://github.com/rust-lang/rust-clippy/pull/10573)\n+* [`uninit_vec`], [`uninit_assumed_init`]: Now check the types inside arrays and tuples\n+  [#10553](https://github.com/rust-lang/rust-clippy/pull/10553)\n+* [`almost_swapped`]: No longer lints if a variable is assigned to itself\n+  [#10499](https://github.com/rust-lang/rust-clippy/pull/10499)\n+* [`missing_docs_in_private_items`]: No longer lints on public items\n+  [#10324](https://github.com/rust-lang/rust-clippy/pull/10324)\n+\n+### Suggestion Fixes/Improvements\n+\n+* [`extra_unused_type_parameters`]: The suggestion is now machine applicable\n+  [#10536](https://github.com/rust-lang/rust-clippy/pull/10536)\n+* [`match_single_binding`]: Now adds a semicolon after the suggestion\n+  [#10470](https://github.com/rust-lang/rust-clippy/pull/10470)\n+* [`missing_const_for_fn`]: Now includes a note if the change could break compatibility\n+  [#10618](https://github.com/rust-lang/rust-clippy/pull/10618)\n+* [`cast_possible_truncation`]: Corrected suggestion for float and wildcard casts\n+  [#10496](https://github.com/rust-lang/rust-clippy/pull/10496)\n+* [`transmutes_expressible_as_ptr_casts`]: The suggestion now includes parentheses when they are required\n+  [#10454](https://github.com/rust-lang/rust-clippy/pull/10454)\n+\n+### ICE Fixes\n+\n+* [`needless_borrow`]: No longer panics on ambiguous projections\n+  [#10403](https://github.com/rust-lang/rust-clippy/pull/10403)\n+* [`multiple_unsafe_ops_per_block`]: Fix ICE when calling a function-like object in an unsafe block\n+  [#10405](https://github.com/rust-lang/rust-clippy/pull/10405)\n+\n+### Others\n+\n+* `clippy-driver` now searches parent directories for `clippy.toml` files\n+  [#10592](https://github.com/rust-lang/rust-clippy/pull/10592)\n+* Fixed a deserialization error for the `array-size-threshold` config value\n+  [#10423](https://github.com/rust-lang/rust-clippy/pull/10423)\n \n ## Rust 1.69\n "}, {"sha": "554efdc58e1cb094e2e0bae0e587ffc3b0ebf912", "filename": "clippy_lints/src/allow_attributes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fallow_attributes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fallow_attributes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fallow_attributes.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -40,7 +40,7 @@ declare_clippy_lint! {\n     ///     a.len()\n     /// }\n     /// ```\n-    #[clippy::version = \"1.69.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub ALLOW_ATTRIBUTES,\n     restriction,\n     \"`#[allow]` will not trigger if a warning isn't found. `#[expect]` triggers if there are no warnings.\""}, {"sha": "ac5ac542cf944e3a433f006240ca4d4a087d077b", "filename": "clippy_lints/src/collection_is_never_read.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fcollection_is_never_read.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fcollection_is_never_read.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fcollection_is_never_read.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -37,7 +37,7 @@ declare_clippy_lint! {\n     ///     println!(\"{sample}\");\n     /// }\n     /// ```\n-    #[clippy::version = \"1.69.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub COLLECTION_IS_NEVER_READ,\n     nursery,\n     \"a collection is never queried\""}, {"sha": "087c4a65250a9b50692169e45fd4efd652b2d943", "filename": "clippy_lints/src/large_futures.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Flarge_futures.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Flarge_futures.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flarge_futures.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -38,7 +38,7 @@ declare_clippy_lint! {\n     ///     wait(fut).await;\n     /// }\n     /// ```\n-    #[clippy::version = \"1.68.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub LARGE_FUTURES,\n     pedantic,\n     \"large future may lead to unexpected stack overflows\""}, {"sha": "2f10e3d258133640c9ca872e3c90116e5222c63b", "filename": "clippy_lints/src/let_with_type_underscore.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Flet_with_type_underscore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Flet_with_type_underscore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_with_type_underscore.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -17,7 +17,7 @@ declare_clippy_lint! {\n     /// ```rust,ignore\n     /// let my_number = 1;\n     /// ```\n-    #[clippy::version = \"1.69.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub LET_WITH_TYPE_UNDERSCORE,\n     complexity,\n     \"unneeded underscore type (`_`) in a variable declaration\""}, {"sha": "88cbefbb5d3d5e5541c5aaf3117cddf1aa3f3eb3", "filename": "clippy_lints/src/methods/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmethods%2Fmod.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -3191,7 +3191,7 @@ declare_clippy_lint! {\n     /// let mut v = vec![1, 2, 3];\n     /// v.clear();\n     /// ```\n-    #[clippy::version = \"1.69.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub CLEAR_WITH_DRAIN,\n     nursery,\n     \"calling `drain` in order to `clear` a container\""}, {"sha": "4dbb79334caf3e859d1f8ac1b9728fa86c79b1be", "filename": "clippy_lints/src/missing_assert_message.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fmissing_assert_message.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fmissing_assert_message.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_assert_message.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -36,7 +36,7 @@ declare_clippy_lint! {\n     ///     assert!(service.ready, \"`service.poll_ready()` must be called first to ensure that service is ready to receive requests\");\n     /// }\n     /// ```\n-    #[clippy::version = \"1.69.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub MISSING_ASSERT_MESSAGE,\n     restriction,\n     \"checks assertions without a custom panic message\""}, {"sha": "05e52e6b38b1294a16c8cb1032d72f4148149b30", "filename": "clippy_lints/src/redundant_async_block.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fredundant_async_block.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f/clippy_lints%2Fsrc%2Fredundant_async_block.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_async_block.rs?ref=7ee8fd77ace9ba93b8f97b9b6e7acb5d491fe11f", "patch": "@@ -35,7 +35,7 @@ declare_clippy_lint! {\n     /// };\n     /// let fut = f;\n     /// ```\n-    #[clippy::version = \"1.69.0\"]\n+    #[clippy::version = \"1.70.0\"]\n     pub REDUNDANT_ASYNC_BLOCK,\n     complexity,\n     \"`async { future.await }` can be replaced by `future`\""}]}