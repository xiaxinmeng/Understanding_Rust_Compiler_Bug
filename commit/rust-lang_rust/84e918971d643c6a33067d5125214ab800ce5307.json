{"sha": "84e918971d643c6a33067d5125214ab800ce5307", "node_id": "C_kwDOAAsO6NoAKDg0ZTkxODk3MWQ2NDNjNmEzMzA2N2Q1MTI1MjE0YWI4MDBjZTUzMDc", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-01-21T10:38:30Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-01-21T10:38:30Z"}, "message": "Auto merge of #92896 - lqd:update-deps, r=Mark-Simulacrum\n\nUpdate some rustc dependencies to deduplicate them\n\nThis PR updates `rand` and `itertools` in rustc (not the whole workspace) in order to deduplicate them (and hopefully slightly improve compile times).\n\n~~Currently, `object` is still duplicated, but https://github.com/rust-lang/thorin/pull/15 and updating `thorin` in the future will remove the use of version 0.27.~~  Update: Thorin 0.2 has now been released, and this PR updates `rustc_codegen_ssa` to use it and deduplicate the `object` crate.\n\nThere's a final tiny rustc dependency, `cfg-if`, which will be left: as both versions 0.1.x and 1.0 looked to be heavily depended on, they will require a few cascading updates to be removed.", "tree": {"sha": "1d8ae381aa7904cc622ebae02b320cc87feb2bcf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1d8ae381aa7904cc622ebae02b320cc87feb2bcf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84e918971d643c6a33067d5125214ab800ce5307", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84e918971d643c6a33067d5125214ab800ce5307", "html_url": "https://github.com/rust-lang/rust/commit/84e918971d643c6a33067d5125214ab800ce5307", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84e918971d643c6a33067d5125214ab800ce5307/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0bcacb391b28460f5a50fd627f01f670dfcfc7cc", "url": "https://api.github.com/repos/rust-lang/rust/commits/0bcacb391b28460f5a50fd627f01f670dfcfc7cc", "html_url": "https://github.com/rust-lang/rust/commit/0bcacb391b28460f5a50fd627f01f670dfcfc7cc"}, {"sha": "820fd05e2908cf8f3e65c1fbe2400216da66b6b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/820fd05e2908cf8f3e65c1fbe2400216da66b6b7", "html_url": "https://github.com/rust-lang/rust/commit/820fd05e2908cf8f3e65c1fbe2400216da66b6b7"}], "stats": {"total": 47, "additions": 18, "deletions": 29}, "files": [{"sha": "1e7c9ee029bd1a26d1f6985b8aee0ded56f29dd1", "filename": "Cargo.lock", "status": "modified", "additions": 12, "deletions": 23, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/84e918971d643c6a33067d5125214ab800ce5307/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/84e918971d643c6a33067d5125214ab800ce5307/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=84e918971d643c6a33067d5125214ab800ce5307", "patch": "@@ -1582,9 +1582,9 @@ dependencies = [\n \n [[package]]\n name = \"hashbrown\"\n-version = \"0.11.0\"\n+version = \"0.11.2\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"362385356d610bd1e5a408ddf8d022041774b683f345a1d2cfcb4f60f8ae2db5\"\n+checksum = \"ab5ef0d4909ef3724cc8cce6ccc8572c5c817592e9285f5464f8e86f8bd3726e\"\n dependencies = [\n  \"ahash\",\n  \"compiler_builtins\",\n@@ -2403,25 +2403,14 @@ dependencies = [\n  \"rustc-std-workspace-core\",\n ]\n \n-[[package]]\n-name = \"object\"\n-version = \"0.27.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"67ac1d3f9a1d3616fd9a60c8d74296f22406a238b6a72f5cc1e6f314df4ffbf9\"\n-dependencies = [\n- \"crc32fast\",\n- \"flate2\",\n- \"indexmap\",\n- \"memchr\",\n-]\n-\n [[package]]\n name = \"object\"\n version = \"0.28.1\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"7ce8b38d41f9f3618fc23f908faae61510f8d8ce2d99cbe910641e8f1971f084\"\n dependencies = [\n  \"crc32fast\",\n+ \"flate2\",\n  \"hashbrown\",\n  \"indexmap\",\n  \"memchr\",\n@@ -3440,7 +3429,7 @@ dependencies = [\n name = \"rustc_ast_passes\"\n version = \"0.0.0\"\n dependencies = [\n- \"itertools 0.9.0\",\n+ \"itertools 0.10.1\",\n  \"rustc_ast\",\n  \"rustc_ast_pretty\",\n  \"rustc_attr\",\n@@ -3483,7 +3472,7 @@ name = \"rustc_borrowck\"\n version = \"0.0.0\"\n dependencies = [\n  \"either\",\n- \"itertools 0.9.0\",\n+ \"itertools 0.10.1\",\n  \"polonius-engine\",\n  \"rustc_const_eval\",\n  \"rustc_data_structures\",\n@@ -3564,7 +3553,7 @@ version = \"0.0.0\"\n dependencies = [\n  \"bitflags\",\n  \"cc\",\n- \"itertools 0.9.0\",\n+ \"itertools 0.10.1\",\n  \"jobserver\",\n  \"libc\",\n  \"object 0.28.1\",\n@@ -3772,7 +3761,7 @@ dependencies = [\n name = \"rustc_incremental\"\n version = \"0.0.0\"\n dependencies = [\n- \"rand 0.7.3\",\n+ \"rand 0.8.4\",\n  \"rustc_ast\",\n  \"rustc_data_structures\",\n  \"rustc_errors\",\n@@ -4048,7 +4037,7 @@ name = \"rustc_mir_transform\"\n version = \"0.0.0\"\n dependencies = [\n  \"coverage_test_macros\",\n- \"itertools 0.9.0\",\n+ \"itertools 0.10.1\",\n  \"rustc_ast\",\n  \"rustc_attr\",\n  \"rustc_const_eval\",\n@@ -5113,13 +5102,13 @@ dependencies = [\n \n [[package]]\n name = \"thorin-dwp\"\n-version = \"0.1.1\"\n+version = \"0.2.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"039d1fc0bfdb73910c2702893515580e38c192f47a987bc98ddd38a36f2d953a\"\n+checksum = \"dd95b4559c196987c8451b4e14d08a4c796c2844f9adf4d2a2dbc9b3142843be\"\n dependencies = [\n  \"gimli 0.26.1\",\n- \"indexmap\",\n- \"object 0.27.1\",\n+ \"hashbrown\",\n+ \"object 0.28.1\",\n  \"tracing\",\n ]\n "}, {"sha": "45b70420338ddd98a77d14b17dc5393d466be8fe", "filename": "compiler/rustc_ast_passes/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_ast_passes%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_ast_passes%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_passes%2FCargo.toml?ref=84e918971d643c6a33067d5125214ab800ce5307", "patch": "@@ -4,7 +4,7 @@ version = \"0.0.0\"\n edition = \"2021\"\n \n [dependencies]\n-itertools = \"0.9\"\n+itertools = \"0.10\"\n tracing = \"0.1\"\n rustc_ast_pretty = { path = \"../rustc_ast_pretty\" }\n rustc_attr = { path = \"../rustc_attr\" }"}, {"sha": "eb2fdbd07967d029f83f5ea2bbfdfef2a9141cb7", "filename": "compiler/rustc_borrowck/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_borrowck%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_borrowck%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_borrowck%2FCargo.toml?ref=84e918971d643c6a33067d5125214ab800ce5307", "patch": "@@ -8,7 +8,7 @@ doctest = false\n \n [dependencies]\n either = \"1.5.0\"\n-itertools = \"0.9\"\n+itertools = \"0.10\"\n tracing = \"0.1\"\n polonius-engine = \"0.13.0\"\n smallvec = { version = \"1.6.1\", features = [\"union\", \"may_dangle\"] }"}, {"sha": "8bbf25ce030f8f14a95f9a50cda465c83caa836b", "filename": "compiler/rustc_codegen_ssa/Cargo.toml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_codegen_ssa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_codegen_ssa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_codegen_ssa%2FCargo.toml?ref=84e918971d643c6a33067d5125214ab800ce5307", "patch": "@@ -9,12 +9,12 @@ test = false\n [dependencies]\n bitflags = \"1.2.1\"\n cc = \"1.0.69\"\n-itertools = \"0.9\"\n+itertools = \"0.10\"\n tracing = \"0.1\"\n libc = \"0.2.50\"\n jobserver = \"0.1.22\"\n tempfile = \"3.2\"\n-thorin-dwp = \"0.1.1\"\n+thorin-dwp = \"0.2\"\n pathdiff = \"0.2.0\"\n snap = \"1\"\n smallvec = { version = \"1.6.1\", features = [\"union\", \"may_dangle\"] }"}, {"sha": "d3c425a072bce6b7ff2476cdb282d25405055624", "filename": "compiler/rustc_incremental/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_incremental%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_incremental%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_incremental%2FCargo.toml?ref=84e918971d643c6a33067d5125214ab800ce5307", "patch": "@@ -9,7 +9,7 @@ doctest = false\n [dependencies]\n rustc_graphviz = { path = \"../rustc_graphviz\" }\n tracing = \"0.1\"\n-rand = \"0.7\"\n+rand = \"0.8.4\"\n rustc_middle = { path = \"../rustc_middle\" }\n rustc_data_structures = { path = \"../rustc_data_structures\" }\n rustc_hir = { path = \"../rustc_hir\" }"}, {"sha": "7b000e2e1d22645303479956ce3b6cbf56f982c8", "filename": "compiler/rustc_mir_transform/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_mir_transform%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/84e918971d643c6a33067d5125214ab800ce5307/compiler%2Frustc_mir_transform%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_transform%2FCargo.toml?ref=84e918971d643c6a33067d5125214ab800ce5307", "patch": "@@ -7,7 +7,7 @@ edition = \"2021\"\n doctest = false\n \n [dependencies]\n-itertools = \"0.9\"\n+itertools = \"0.10\"\n smallvec = { version = \"1.6.1\", features = [\"union\", \"may_dangle\"] }\n tracing = \"0.1\"\n rustc_ast = { path = \"../rustc_ast\" }"}]}