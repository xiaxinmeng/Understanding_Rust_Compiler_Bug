{"sha": "db4e7ac725689c3006a2817f373fb6ce9e64d29f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiNGU3YWM3MjU2ODljMzAwNmEyODE3ZjM3M2ZiNmNlOWU2NGQyOWY=", "commit": {"author": {"name": "flip1995", "email": "uwdkn@student.kit.edu", "date": "2018-05-06T15:26:47Z"}, "committer": {"name": "flip1995", "email": "uwdkn@student.kit.edu", "date": "2018-05-09T10:29:28Z"}, "message": "panic_params: don't lint escaped squigglies", "tree": {"sha": "c6d2e0adbdce9b705e859b354025ad3af3e0ec5d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c6d2e0adbdce9b705e859b354025ad3af3e0ec5d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/db4e7ac725689c3006a2817f373fb6ce9e64d29f", "comment_count": 0, "verification": {"verified": false, "reason": "unverified_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEz66kzxK9mXB0K2lyZ1erJvcvAIQFAlryzYgACgkQZ1erJvcv\nAIS1EQ/9F9gjCbAMf6PGGjJvX1435zrLsKM/fV1B2+l8FtI5sw66XxAEic3OpYYM\nJvnCr116HdOhiDMDY0mhkFL+cA1UWN51LDiak4hJfiD40I/W+X8sdJR4SR7DZPed\nvQX3aENVaX7nalpA8NSUXGt2XdYfPxrX3amXcLEPhjKEdsV/VtKTMSFm1tc0PZ49\nscVZDXnJbuhkomuNetUuOyuuZjttFUvKdUiQGpa5D8xAk1B4oyJzz122Pbo7EE67\nANqqyKr5Yu8//9H89ddN7qfz+Efiwu/FJaNB+euGb5F6UGarPsBjdcOOSmtKDit7\nw58Xjlru/hLCrQRaoV03fU2HRWsXt3o0g+eHLLElIu5qVJ9t3d3aHEy0fxP8rsKr\nc/eN+JBBKoL+3pqCspbRi77FlGuU6pZX+yQPdzOzFX/bpCbfhgGcoTzTrEycpMrU\nfW3pUYciK6T+bhbUAnA2SUg8tnTrVSVxvK7M1HsEdIs0ehfSU6T1pMBjgc4p/Iin\nh+BOqsGVBQTbyHoGYOGSUs6hOoncCZiLXTmLR97tOGXpcfsOEmvMtRsyX+7cJJHN\nnuSmZfNYmQdHX/4IyIhB9yI7/6tKkrh3qGCvi8UaKNJSeVhP1TYPE/Au38DjWeFX\nPEJJu9D/le7nkaI+G2LCWdMXZJfXUoj3+0rRocDUoXkT3+aGNxw=\n=eoWu\n-----END PGP SIGNATURE-----", "payload": "tree c6d2e0adbdce9b705e859b354025ad3af3e0ec5d\nparent ad438b30de49fcd238e771e936994543648ffc6a\nauthor flip1995 <uwdkn@student.kit.edu> 1525620407 +0200\ncommitter flip1995 <uwdkn@student.kit.edu> 1525861768 +0200\n\npanic_params: don't lint escaped squigglies\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/db4e7ac725689c3006a2817f373fb6ce9e64d29f", "html_url": "https://github.com/rust-lang/rust/commit/db4e7ac725689c3006a2817f373fb6ce9e64d29f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/db4e7ac725689c3006a2817f373fb6ce9e64d29f/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ad438b30de49fcd238e771e936994543648ffc6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/ad438b30de49fcd238e771e936994543648ffc6a", "html_url": "https://github.com/rust-lang/rust/commit/ad438b30de49fcd238e771e936994543648ffc6a"}], "stats": {"total": 29, "additions": 24, "deletions": 5}, "files": [{"sha": "a6691db8678c76b7248b9c1a9665d0111e862ff1", "filename": "clippy_lints/src/panic.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/db4e7ac725689c3006a2817f373fb6ce9e64d29f/clippy_lints%2Fsrc%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db4e7ac725689c3006a2817f373fb6ce9e64d29f/clippy_lints%2Fsrc%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fpanic.rs?ref=db4e7ac725689c3006a2817f373fb6ce9e64d29f", "patch": "@@ -10,8 +10,7 @@ use utils::{is_direct_expn_of, match_def_path, opt_def_id, paths, resolve_node,\n /// is not a format string and used literally. So while `format!(\"{}\")` will\n /// fail to compile, `panic!(\"{}\")` will not.\n ///\n-/// **Known problems:** Should you want to use curly brackets in `panic!`\n-/// without any parameter, this lint will warn.\n+/// **Known problems:** None.\n ///\n /// **Example:**\n /// ```rust\n@@ -45,8 +44,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for Pass {\n             if let ExprLit(ref lit) = params[0].node;\n             if is_direct_expn_of(expr.span, \"panic\").is_some();\n             if let LitKind::Str(ref string, _) = lit.node;\n-            if let Some(par) = string.as_str().find('{');\n-            if string.as_str()[par..].contains('}');\n+            let string = string.as_str().replace(\"{{\", \"\").replace(\"}}\", \"\");\n+            if let Some(par) = string.find('{');\n+            if string[par..].contains('}');\n             if params[0].span.source_callee().is_none();\n             if params[0].span.lo() != params[0].span.hi();\n             then {"}, {"sha": "d833d2651a5975bc5c7713924eeaf7504ef698d8", "filename": "tests/ui/panic.rs", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/db4e7ac725689c3006a2817f373fb6ce9e64d29f/tests%2Fui%2Fpanic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/db4e7ac725689c3006a2817f373fb6ce9e64d29f/tests%2Fui%2Fpanic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic.rs?ref=db4e7ac725689c3006a2817f373fb6ce9e64d29f", "patch": "@@ -11,6 +11,8 @@ fn missing() {\n     } else {\n         assert!(true, \"here be missing values: {}\");\n     }\n+\n+    panic!(\"{{{this}}}\");\n }\n \n fn ok_single() {\n@@ -41,11 +43,22 @@ fn ok_nomsg() {\n     assert!(if 1 == ONE { ONE == 1 } else { false });\n }\n \n+fn ok_escaped() {\n+    panic!(\"{{ why should this not be ok? }}\");\n+    panic!(\" or {{ that ?\");\n+    panic!(\" or }} this ?\");\n+    panic!(\" {or {{ that ?\");\n+    panic!(\" }or }} this ?\");\n+    panic!(\"{{ test }\");\n+    panic!(\"{case }}\");\n+}\n+\n fn main() {\n     missing();\n     ok_single();\n     ok_multiple();\n     ok_bracket();\n     ok_inner();\n     ok_nomsg();\n+    ok_escaped();\n }"}, {"sha": "165c33cacb7da49a6301905f2ba73d4ae8b44887", "filename": "tests/ui/panic.stderr", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/db4e7ac725689c3006a2817f373fb6ce9e64d29f/tests%2Fui%2Fpanic.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/db4e7ac725689c3006a2817f373fb6ce9e64d29f/tests%2Fui%2Fpanic.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fpanic.stderr?ref=db4e7ac725689c3006a2817f373fb6ce9e64d29f", "patch": "@@ -18,5 +18,11 @@ error: you probably are missing some parameter in your format string\n 12 |         assert!(true, \"here be missing values: {}\");\n    |                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 3 previous errors\n+error: you probably are missing some parameter in your format string\n+  --> $DIR/panic.rs:15:12\n+   |\n+15 |     panic!(\"{{{this}}}\");\n+   |            ^^^^^^^^^^^^\n+\n+error: aborting due to 4 previous errors\n "}]}