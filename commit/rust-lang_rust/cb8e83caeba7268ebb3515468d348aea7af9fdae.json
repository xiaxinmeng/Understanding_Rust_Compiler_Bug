{"sha": "cb8e83caeba7268ebb3515468d348aea7af9fdae", "node_id": "C_kwDOAAsO6NoAKGNiOGU4M2NhZWJhNzI2OGViYjM1MTU0NjhkMzQ4YWVhN2FmOWZkYWU", "commit": {"author": {"name": "Gus Wynn", "email": "guswynn@gmail.com", "date": "2021-09-29T00:57:08Z"}, "committer": {"name": "Gus Wynn", "email": "guswynn@gmail.com", "date": "2021-09-29T00:57:08Z"}, "message": "ref/refmut", "tree": {"sha": "64954c0efce5cf5170eca99887ff581a9e627925", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64954c0efce5cf5170eca99887ff581a9e627925"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cb8e83caeba7268ebb3515468d348aea7af9fdae", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cb8e83caeba7268ebb3515468d348aea7af9fdae", "html_url": "https://github.com/rust-lang/rust/commit/cb8e83caeba7268ebb3515468d348aea7af9fdae", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cb8e83caeba7268ebb3515468d348aea7af9fdae/comments", "author": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "guswynn", "id": 5404303, "node_id": "MDQ6VXNlcjU0MDQzMDM=", "avatar_url": "https://avatars.githubusercontent.com/u/5404303?v=4", "gravatar_id": "", "url": "https://api.github.com/users/guswynn", "html_url": "https://github.com/guswynn", "followers_url": "https://api.github.com/users/guswynn/followers", "following_url": "https://api.github.com/users/guswynn/following{/other_user}", "gists_url": "https://api.github.com/users/guswynn/gists{/gist_id}", "starred_url": "https://api.github.com/users/guswynn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/guswynn/subscriptions", "organizations_url": "https://api.github.com/users/guswynn/orgs", "repos_url": "https://api.github.com/users/guswynn/repos", "events_url": "https://api.github.com/users/guswynn/events{/privacy}", "received_events_url": "https://api.github.com/users/guswynn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4cc3297dc403e9d4d2106b26418efe35d4bb1af2", "url": "https://api.github.com/repos/rust-lang/rust/commits/4cc3297dc403e9d4d2106b26418efe35d4bb1af2", "html_url": "https://github.com/rust-lang/rust/commit/4cc3297dc403e9d4d2106b26418efe35d4bb1af2"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "c0121eebb7feff689395915f461e33529483790c", "filename": "library/core/src/cell.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fcore%2Fsrc%2Fcell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fcore%2Fsrc%2Fcell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fcell.rs?ref=cb8e83caeba7268ebb3515468d348aea7af9fdae", "patch": "@@ -1303,6 +1303,11 @@ impl Clone for BorrowRef<'_> {\n ///\n /// See the [module-level documentation](self) for more.\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+#[cfg_attr(\n+    not(bootstrap),\n+    must_not_suspend = \"Holding a Ref across suspend \\\n+                      points can cause BorrowErrors\"\n+)]\n pub struct Ref<'b, T: ?Sized + 'b> {\n     value: &'b T,\n     borrow: BorrowRef<'b>,\n@@ -1679,6 +1684,11 @@ impl<'b> BorrowRefMut<'b> {\n ///\n /// See the [module-level documentation](self) for more.\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n+#[cfg_attr(\n+    not(bootstrap),\n+    must_not_suspend = \"Holding a RefMut across suspend \\\n+                      points can cause BorrowErrors\"\n+)]\n pub struct RefMut<'b, T: ?Sized + 'b> {\n     value: &'b mut T,\n     borrow: BorrowRefMut<'b>,"}, {"sha": "2230461b5f4b59ea0aba60578cfb759e58b6dedb", "filename": "library/core/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fcore%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fcore%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Flib.rs?ref=cb8e83caeba7268ebb3515468d348aea7af9fdae", "patch": "@@ -141,6 +141,7 @@\n #![feature(link_llvm_intrinsics)]\n #![feature(llvm_asm)]\n #![feature(min_specialization)]\n+#![cfg_attr(not(bootstrap), feature(must_not_suspend))]\n #![feature(negative_impls)]\n #![feature(never_type)]\n #![feature(no_core)]"}, {"sha": "06a97fd3f761022a5c5c41e8e4f9aabf0d1bfc48", "filename": "library/std/src/sync/mutex.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fstd%2Fsrc%2Fsync%2Fmutex.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fstd%2Fsrc%2Fsync%2Fmutex.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Fmutex.rs?ref=cb8e83caeba7268ebb3515468d348aea7af9fdae", "patch": "@@ -192,7 +192,7 @@ unsafe impl<T: ?Sized + Send> Sync for Mutex<T> {}\n     not(bootstrap),\n     must_not_suspend = \"Holding a MutexGuard across suspend \\\n                       points can cause deadlocks, delays, \\\n-                      and cause Future's to not implement `Send`\"\n+                      and cause Futures to not implement `Send`\"\n )]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub struct MutexGuard<'a, T: ?Sized + 'a> {"}, {"sha": "aa1ce82d96799b9a99d2ae6c44e2bde8bcad08ba", "filename": "library/std/src/sync/rwlock.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fstd%2Fsrc%2Fsync%2Frwlock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cb8e83caeba7268ebb3515468d348aea7af9fdae/library%2Fstd%2Fsrc%2Fsync%2Frwlock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsync%2Frwlock.rs?ref=cb8e83caeba7268ebb3515468d348aea7af9fdae", "patch": "@@ -99,7 +99,7 @@ unsafe impl<T: ?Sized + Send + Sync> Sync for RwLock<T> {}\n     not(bootstrap),\n     must_not_suspend = \"Holding a RwLockReadGuard across suspend \\\n                       points can cause deadlocks, delays, \\\n-                      and cause Future's to not implement `Send`\"\n+                      and cause Futures to not implement `Send`\"\n )]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub struct RwLockReadGuard<'a, T: ?Sized + 'a> {"}, {"sha": "4e0d9343c2c7118b88f257809125cf26528b0841", "filename": "src/test/ui/lint/must_not_suspend/mutex.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cb8e83caeba7268ebb3515468d348aea7af9fdae/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fmutex.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cb8e83caeba7268ebb3515468d348aea7af9fdae/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fmutex.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Fmust_not_suspend%2Fmutex.stderr?ref=cb8e83caeba7268ebb3515468d348aea7af9fdae", "patch": "@@ -11,7 +11,7 @@ note: the lint level is defined here\n    |\n LL | #![deny(must_not_suspend)]\n    |         ^^^^^^^^^^^^^^^^\n-note: Holding a MutexGuard across suspend points can cause deadlocks, delays, and cause Future's to not implement `Send`\n+note: Holding a MutexGuard across suspend points can cause deadlocks, delays, and cause Futures to not implement `Send`\n   --> $DIR/mutex.rs:7:9\n    |\n LL |     let _guard = m.lock().unwrap();"}]}