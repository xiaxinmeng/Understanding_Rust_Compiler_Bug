{"sha": "b36e58a4589706ff790eb25bbd78f40b1d649431", "node_id": "C_kwDOAAsO6NoAKGIzNmU1OGE0NTg5NzA2ZmY3OTBlYjI1YmJkNzhmNDBiMWQ2NDk0MzE", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-07-08T06:00:36Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-07-08T06:00:36Z"}, "message": "Rollup merge of #95635 - davidtwco:terminal-width-stabilization, r=oli-obk\n\nsess: stabilize `--terminal-width` as `--diagnostic-width`\n\nFormerly `-Zterminal-width`, `--terminal-width` allows the user or build\ntool to inform rustc of the width of the terminal so that diagnostics\ncan be truncated.\n\nPending agreement to stabilize, see tracking issue at #84673.\n\nr? ```@oli-obk```", "tree": {"sha": "5dad0374d556f353fb0324988b3bb54f694f4aaa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5dad0374d556f353fb0324988b3bb54f694f4aaa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b36e58a4589706ff790eb25bbd78f40b1d649431", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJix8gECRBK7hj4Ov3rIwAAzG8IAGVlhtPvEnNsZbGUdUMQHF/T\nPMiig4UOqueIGbaH46icOHCwVLLnYSCH3TKBgTFBiOTpoU/pinR9FX6WgrLWQgnR\nl4jAPqkkGZ9UP6ERuYQBDTr+MKsPwG55ZDSVzhDsBJPXtDuMRaRa+52pM1KjPxu2\nFRfdyFs9BYZFBWXG6bfXVe4s34mCGfO0fsdkRIQ72AewRLtBtwVKvg4XDTSivHi5\nFCI8AF2wZezaOlxH4wW1lPBlOVGK1stP4ML6WAsH5XBG+NwFd+mtZ4EKQzt/EJZv\nUnKbPcc/HNm40tdaHB57iHf3Dc99aQYKfbghswVVywGc+WW9x78M0nef1GHVMwE=\n=oEFh\n-----END PGP SIGNATURE-----\n", "payload": "tree 5dad0374d556f353fb0324988b3bb54f694f4aaa\nparent eba361ae36be41e42fb8fdf138455307e0ad407c\nparent 44c1fcc04dad7c59d1af5c7759afd121951e195c\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1657260036 +0200\ncommitter GitHub <noreply@github.com> 1657260036 +0200\n\nRollup merge of #95635 - davidtwco:terminal-width-stabilization, r=oli-obk\n\nsess: stabilize `--terminal-width` as `--diagnostic-width`\n\nFormerly `-Zterminal-width`, `--terminal-width` allows the user or build\ntool to inform rustc of the width of the terminal so that diagnostics\ncan be truncated.\n\nPending agreement to stabilize, see tracking issue at #84673.\n\nr? ```@oli-obk```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b36e58a4589706ff790eb25bbd78f40b1d649431", "html_url": "https://github.com/rust-lang/rust/commit/b36e58a4589706ff790eb25bbd78f40b1d649431", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b36e58a4589706ff790eb25bbd78f40b1d649431/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "eba361ae36be41e42fb8fdf138455307e0ad407c", "url": "https://api.github.com/repos/rust-lang/rust/commits/eba361ae36be41e42fb8fdf138455307e0ad407c", "html_url": "https://github.com/rust-lang/rust/commit/eba361ae36be41e42fb8fdf138455307e0ad407c"}, {"sha": "44c1fcc04dad7c59d1af5c7759afd121951e195c", "url": "https://api.github.com/repos/rust-lang/rust/commits/44c1fcc04dad7c59d1af5c7759afd121951e195c", "html_url": "https://github.com/rust-lang/rust/commit/44c1fcc04dad7c59d1af5c7759afd121951e195c"}], "stats": {"total": 147, "additions": 101, "deletions": 46}, "files": [{"sha": "85ea8eb3937822708c0c8206286a3ca4eb0ac18d", "filename": "compiler/rustc_errors/src/emitter.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_errors%2Fsrc%2Femitter.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_errors%2Fsrc%2Femitter.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Femitter.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -63,7 +63,7 @@ impl HumanReadableErrorType {\n         bundle: Option<Lrc<FluentBundle>>,\n         fallback_bundle: LazyFallbackBundle,\n         teach: bool,\n-        terminal_width: Option<usize>,\n+        diagnostic_width: Option<usize>,\n         macro_backtrace: bool,\n     ) -> EmitterWriter {\n         let (short, color_config) = self.unzip();\n@@ -76,7 +76,7 @@ impl HumanReadableErrorType {\n             short,\n             teach,\n             color,\n-            terminal_width,\n+            diagnostic_width,\n             macro_backtrace,\n         )\n     }\n@@ -710,7 +710,7 @@ pub struct EmitterWriter {\n     short_message: bool,\n     teach: bool,\n     ui_testing: bool,\n-    terminal_width: Option<usize>,\n+    diagnostic_width: Option<usize>,\n \n     macro_backtrace: bool,\n }\n@@ -730,7 +730,7 @@ impl EmitterWriter {\n         fallback_bundle: LazyFallbackBundle,\n         short_message: bool,\n         teach: bool,\n-        terminal_width: Option<usize>,\n+        diagnostic_width: Option<usize>,\n         macro_backtrace: bool,\n     ) -> EmitterWriter {\n         let dst = Destination::from_stderr(color_config);\n@@ -742,7 +742,7 @@ impl EmitterWriter {\n             short_message,\n             teach,\n             ui_testing: false,\n-            terminal_width,\n+            diagnostic_width,\n             macro_backtrace,\n         }\n     }\n@@ -755,7 +755,7 @@ impl EmitterWriter {\n         short_message: bool,\n         teach: bool,\n         colored: bool,\n-        terminal_width: Option<usize>,\n+        diagnostic_width: Option<usize>,\n         macro_backtrace: bool,\n     ) -> EmitterWriter {\n         EmitterWriter {\n@@ -766,7 +766,7 @@ impl EmitterWriter {\n             short_message,\n             teach,\n             ui_testing: false,\n-            terminal_width,\n+            diagnostic_width,\n             macro_backtrace,\n         }\n     }\n@@ -1615,7 +1615,7 @@ impl EmitterWriter {\n                     width_offset + annotated_file.multiline_depth + 1\n                 };\n \n-                let column_width = if let Some(width) = self.terminal_width {\n+                let column_width = if let Some(width) = self.diagnostic_width {\n                     width.saturating_sub(code_offset)\n                 } else if self.ui_testing {\n                     DEFAULT_COLUMN_WIDTH"}, {"sha": "b8cd334b4c6c6af6844526f60dc7316ff5a0ab7d", "filename": "compiler/rustc_errors/src/json.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_errors%2Fsrc%2Fjson.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_errors%2Fsrc%2Fjson.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_errors%2Fsrc%2Fjson.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -42,7 +42,7 @@ pub struct JsonEmitter {\n     pretty: bool,\n     ui_testing: bool,\n     json_rendered: HumanReadableErrorType,\n-    terminal_width: Option<usize>,\n+    diagnostic_width: Option<usize>,\n     macro_backtrace: bool,\n }\n \n@@ -54,7 +54,7 @@ impl JsonEmitter {\n         fallback_bundle: LazyFallbackBundle,\n         pretty: bool,\n         json_rendered: HumanReadableErrorType,\n-        terminal_width: Option<usize>,\n+        diagnostic_width: Option<usize>,\n         macro_backtrace: bool,\n     ) -> JsonEmitter {\n         JsonEmitter {\n@@ -66,7 +66,7 @@ impl JsonEmitter {\n             pretty,\n             ui_testing: false,\n             json_rendered,\n-            terminal_width,\n+            diagnostic_width,\n             macro_backtrace,\n         }\n     }\n@@ -76,7 +76,7 @@ impl JsonEmitter {\n         json_rendered: HumanReadableErrorType,\n         fluent_bundle: Option<Lrc<FluentBundle>>,\n         fallback_bundle: LazyFallbackBundle,\n-        terminal_width: Option<usize>,\n+        diagnostic_width: Option<usize>,\n         macro_backtrace: bool,\n     ) -> JsonEmitter {\n         let file_path_mapping = FilePathMapping::empty();\n@@ -87,7 +87,7 @@ impl JsonEmitter {\n             fallback_bundle,\n             pretty,\n             json_rendered,\n-            terminal_width,\n+            diagnostic_width,\n             macro_backtrace,\n         )\n     }\n@@ -100,7 +100,7 @@ impl JsonEmitter {\n         fallback_bundle: LazyFallbackBundle,\n         pretty: bool,\n         json_rendered: HumanReadableErrorType,\n-        terminal_width: Option<usize>,\n+        diagnostic_width: Option<usize>,\n         macro_backtrace: bool,\n     ) -> JsonEmitter {\n         JsonEmitter {\n@@ -112,7 +112,7 @@ impl JsonEmitter {\n             pretty,\n             ui_testing: false,\n             json_rendered,\n-            terminal_width,\n+            diagnostic_width,\n             macro_backtrace,\n         }\n     }\n@@ -345,7 +345,7 @@ impl Diagnostic {\n                 je.fluent_bundle.clone(),\n                 je.fallback_bundle.clone(),\n                 false,\n-                je.terminal_width,\n+                je.diagnostic_width,\n                 je.macro_backtrace,\n             )\n             .ui_testing(je.ui_testing)"}, {"sha": "81145416437b759de95009b17f571c4bd46c2316", "filename": "compiler/rustc_interface/src/tests.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_interface%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_interface%2Fsrc%2Ftests.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -689,7 +689,6 @@ fn test_debugging_options_tracking_hash() {\n     untracked!(span_debug, true);\n     untracked!(span_free_formats, true);\n     untracked!(temps_dir, Some(String::from(\"abc\")));\n-    untracked!(terminal_width, Some(80));\n     untracked!(threads, 99);\n     untracked!(time, true);\n     untracked!(time_llvm_passes, true);"}, {"sha": "b7da0f229420bdf16101473e3bd679089792dcaa", "filename": "compiler/rustc_session/src/config.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_session%2Fsrc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fconfig.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -726,6 +726,7 @@ impl Default for Options {\n             prints: Vec::new(),\n             cg: Default::default(),\n             error_format: ErrorOutputType::default(),\n+            diagnostic_width: None,\n             externs: Externs(BTreeMap::new()),\n             crate_name: None,\n             libs: Vec::new(),\n@@ -1427,6 +1428,12 @@ pub fn rustc_optgroups() -> Vec<RustcOptGroup> {\n                                  never  = never colorize output\",\n             \"auto|always|never\",\n         ),\n+        opt::opt_s(\n+            \"\",\n+            \"diagnostic-width\",\n+            \"Inform rustc of the width of the output so that diagnostics can be truncated to fit\",\n+            \"WIDTH\",\n+        ),\n         opt::multi_s(\n             \"\",\n             \"remap-path-prefix\",\n@@ -2202,6 +2209,10 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n \n     let error_format = parse_error_format(matches, color, json_rendered);\n \n+    let diagnostic_width = matches.opt_get(\"diagnostic-width\").unwrap_or_else(|_| {\n+        early_error(error_format, \"`--diagnostic-width` must be an positive integer\");\n+    });\n+\n     let unparsed_crate_types = matches.opt_strs(\"crate-type\");\n     let crate_types = parse_crate_types_from_list(unparsed_crate_types)\n         .unwrap_or_else(|e| early_error(error_format, &e));\n@@ -2474,6 +2485,7 @@ pub fn build_session_options(matches: &getopts::Matches) -> Options {\n         prints,\n         cg,\n         error_format,\n+        diagnostic_width,\n         externs,\n         unstable_features: UnstableFeatures::from_environment(crate_name.as_deref()),\n         crate_name,"}, {"sha": "b0c74ffb6dcc13d2fb99d95f2186239058603d12", "filename": "compiler/rustc_session/src/options.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_session%2Fsrc%2Foptions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Foptions.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -170,6 +170,7 @@ top_level_options!(\n \n         test: bool [TRACKED],\n         error_format: ErrorOutputType [UNTRACKED],\n+        diagnostic_width: Option<usize> [UNTRACKED],\n \n         /// If `Some`, enable incremental compilation, using the given\n         /// directory to store intermediate results.\n@@ -1388,6 +1389,8 @@ options! {\n         \"panic strategy for out-of-memory handling\"),\n     osx_rpath_install_name: bool = (false, parse_bool, [TRACKED],\n         \"pass `-install_name @rpath/...` to the macOS linker (default: no)\"),\n+    diagnostic_width: Option<usize> = (None, parse_opt_number, [UNTRACKED],\n+        \"set the current output width for diagnostic truncation\"),\n     panic_abort_tests: bool = (false, parse_bool, [TRACKED],\n         \"support compiling tests with panic=abort (default: no)\"),\n     panic_in_drop: PanicStrategy = (PanicStrategy::Unwind, parse_panic_strategy, [TRACKED],\n@@ -1514,8 +1517,6 @@ options! {\n         \"show extended diagnostic help (default: no)\"),\n     temps_dir: Option<String> = (None, parse_opt_string, [UNTRACKED],\n         \"the directory the intermediate files are written to\"),\n-    terminal_width: Option<usize> = (None, parse_opt_number, [UNTRACKED],\n-        \"set the current terminal width\"),\n     // Diagnostics are considered side-effects of a query (see `QuerySideEffects`) and are saved\n     // alongside query results and changes to translation options can affect diagnostics - so\n     // translation options should be tracked."}, {"sha": "52b9ee94718028b03875d1fbfd174858d43a6041", "filename": "compiler/rustc_session/src/session.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/compiler%2Frustc_session%2Fsrc%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_session%2Fsrc%2Fsession.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -1162,7 +1162,7 @@ fn default_emitter(\n                         fallback_bundle,\n                         short,\n                         sopts.debugging_opts.teach,\n-                        sopts.debugging_opts.terminal_width,\n+                        sopts.diagnostic_width,\n                         macro_backtrace,\n                     ),\n                     Some(dst) => EmitterWriter::new(\n@@ -1173,7 +1173,7 @@ fn default_emitter(\n                         short,\n                         false, // no teach messages when writing to a buffer\n                         false, // no colors when writing to a buffer\n-                        None,  // no terminal width\n+                        None,  // no diagnostic width\n                         macro_backtrace,\n                     ),\n                 };\n@@ -1188,7 +1188,7 @@ fn default_emitter(\n                 fallback_bundle,\n                 pretty,\n                 json_rendered,\n-                sopts.debugging_opts.terminal_width,\n+                sopts.diagnostic_width,\n                 macro_backtrace,\n             )\n             .ui_testing(sopts.debugging_opts.ui_testing),\n@@ -1202,7 +1202,7 @@ fn default_emitter(\n                 fallback_bundle,\n                 pretty,\n                 json_rendered,\n-                sopts.debugging_opts.terminal_width,\n+                sopts.diagnostic_width,\n                 macro_backtrace,\n             )\n             .ui_testing(sopts.debugging_opts.ui_testing),"}, {"sha": "272188f82994c05f2579490d89f6e9d15cafeb9e", "filename": "src/librustdoc/config.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Flibrustdoc%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Flibrustdoc%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fconfig.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -73,6 +73,8 @@ pub(crate) struct Options {\n     pub(crate) proc_macro_crate: bool,\n     /// How to format errors and warnings.\n     pub(crate) error_format: ErrorOutputType,\n+    /// Width of output buffer to truncate errors appropriately.\n+    pub(crate) diagnostic_width: Option<usize>,\n     /// Library search paths to hand to the compiler.\n     pub(crate) libs: Vec<SearchPath>,\n     /// Library search paths strings to hand to the compiler.\n@@ -331,11 +333,12 @@ impl Options {\n         let config::JsonConfig { json_rendered, json_unused_externs, .. } =\n             config::parse_json(matches);\n         let error_format = config::parse_error_format(matches, color, json_rendered);\n+        let diagnostic_width = matches.opt_get(\"diagnostic-width\").unwrap_or_default();\n \n         let codegen_options = CodegenOptions::build(matches, error_format);\n         let debugging_opts = DebuggingOptions::build(matches, error_format);\n \n-        let diag = new_handler(error_format, None, &debugging_opts);\n+        let diag = new_handler(error_format, None, diagnostic_width, &debugging_opts);\n \n         // check for deprecated options\n         check_deprecated_options(matches, &diag);\n@@ -699,6 +702,7 @@ impl Options {\n             input,\n             proc_macro_crate,\n             error_format,\n+            diagnostic_width,\n             libs,\n             lib_strs,\n             externs,"}, {"sha": "8c494ee28cc1f404963da09a9a58ac9e79b2e3e1", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -154,6 +154,7 @@ impl<'tcx> DocContext<'tcx> {\n pub(crate) fn new_handler(\n     error_format: ErrorOutputType,\n     source_map: Option<Lrc<source_map::SourceMap>>,\n+    diagnostic_width: Option<usize>,\n     debugging_opts: &DebuggingOptions,\n ) -> rustc_errors::Handler {\n     let fallback_bundle =\n@@ -169,7 +170,7 @@ pub(crate) fn new_handler(\n                     fallback_bundle,\n                     short,\n                     debugging_opts.teach,\n-                    debugging_opts.terminal_width,\n+                    diagnostic_width,\n                     false,\n                 )\n                 .ui_testing(debugging_opts.ui_testing),\n@@ -187,7 +188,7 @@ pub(crate) fn new_handler(\n                     fallback_bundle,\n                     pretty,\n                     json_rendered,\n-                    debugging_opts.terminal_width,\n+                    diagnostic_width,\n                     false,\n                 )\n                 .ui_testing(debugging_opts.ui_testing),\n@@ -208,6 +209,7 @@ pub(crate) fn create_config(\n         crate_name,\n         proc_macro_crate,\n         error_format,\n+        diagnostic_width,\n         libs,\n         externs,\n         mut cfgs,\n@@ -266,6 +268,7 @@ pub(crate) fn create_config(\n         actually_rustdoc: true,\n         debugging_opts,\n         error_format,\n+        diagnostic_width,\n         edition,\n         describe_lints,\n         crate_name,"}, {"sha": "0d3ec7ecb6448052f90987cb3517c9f90c5f9971", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -462,6 +462,14 @@ fn opts() -> Vec<RustcOptGroup> {\n                 \"human|json|short\",\n             )\n         }),\n+        unstable(\"diagnostic-width\", |o| {\n+            o.optopt(\n+                \"\",\n+                \"diagnostic-width\",\n+                \"Provide width of the output for truncated error messages\",\n+                \"WIDTH\",\n+            )\n+        }),\n         stable(\"json\", |o| {\n             o.optopt(\"\", \"json\", \"Configure the structure of JSON diagnostics\", \"CONFIG\")\n         }),\n@@ -733,7 +741,12 @@ fn run_renderer<'tcx, T: formats::FormatRenderer<'tcx>>(\n }\n \n fn main_options(options: config::Options) -> MainResult {\n-    let diag = core::new_handler(options.error_format, None, &options.debugging_opts);\n+    let diag = core::new_handler(\n+        options.error_format,\n+        None,\n+        options.diagnostic_width,\n+        &options.debugging_opts,\n+    );\n \n     match (options.should_test, options.markdown_input()) {\n         (true, true) => return wrap_return(&diag, markdown::test(options)),"}, {"sha": "08877af92865742980f71988f10e2a814cc5a4ba", "filename": "src/test/run-make/issue-88756-default-output/output-default.stdout", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Frun-make%2Fissue-88756-default-output%2Foutput-default.stdout", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Frun-make%2Fissue-88756-default-output%2Foutput-default.stdout", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fissue-88756-default-output%2Foutput-default.stdout?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -110,6 +110,9 @@ Options:\n                         never = never colorize output\n         --error-format human|json|short\n                         How errors and other messages are produced\n+        --diagnostic-width WIDTH\n+                        Provide width of the output for truncated error\n+                        messages\n         --json CONFIG   Configure the structure of JSON diagnostics\n         --disable-minification \n                         Disable minification applied on JS files"}, {"sha": "61961d5ec710e2527735863bbce062387b02279b", "filename": "src/test/rustdoc-ui/diagnostic-width.rs", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Frustdoc-ui%2Fdiagnostic-width.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Frustdoc-ui%2Fdiagnostic-width.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdiagnostic-width.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -0,0 +1,5 @@\n+// compile-flags: -Zunstable-options --diagnostic-width=10\n+#![deny(rustdoc::bare_urls)]\n+\n+/// This is a long line that contains a http://link.com\n+pub struct Foo; //~^ ERROR"}, {"sha": "fed049d2b37bcdb5f7c60b218d04b312dabec6b4", "filename": "src/test/rustdoc-ui/diagnostic-width.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Frustdoc-ui%2Fdiagnostic-width.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Frustdoc-ui%2Fdiagnostic-width.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdiagnostic-width.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -0,0 +1,15 @@\n+error: this URL is not a hyperlink\n+  --> $DIR/diagnostic-width.rs:4:41\n+   |\n+LL | ... a http://link.com\n+   |       ^^^^^^^^^^^^^^^ help: use an automatic link instead: `<http://link.com>`\n+   |\n+note: the lint level is defined here\n+  --> $DIR/diagnostic-width.rs:2:9\n+   |\n+LL | ...ny(rustdoc::bare_url...\n+   |       ^^^^^^^^^^^^^^^^^^\n+   = note: bare URLs are not automatically turned into clickable links\n+\n+error: aborting due to previous error\n+"}, {"sha": "289bfbabd949bb48264eb4fb431164c26077c393", "filename": "src/test/ui/diagnostic-width/flag-human.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-human.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-human.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-human.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -0,0 +1,9 @@\n+// compile-flags: --diagnostic-width=20\n+\n+// This test checks that `-Z output-width` effects the human error output by restricting it to an\n+// arbitrarily low value so that the effect is visible.\n+\n+fn main() {\n+    let _: () = 42;\n+    //~^ ERROR mismatched types\n+}"}, {"sha": "393dcf2b82845b1da2a4d6d0352d44c7cdc978a1", "filename": "src/test/ui/diagnostic-width/flag-human.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-human.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-human.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-human.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/flag-human.stderr"}, {"sha": "51a1fb447c7d22df069e10271318c75b40c5100d", "filename": "src/test/ui/diagnostic-width/flag-json.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-json.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-json.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-json.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -0,0 +1,9 @@\n+// compile-flags: --diagnostic-width=20 --error-format=json\n+\n+// This test checks that `-Z output-width` effects the JSON error output by restricting it to an\n+// arbitrarily low value so that the effect is visible.\n+\n+fn main() {\n+    let _: () = 42;\n+    //~^ ERROR arguments to this function are incorrect\n+}"}, {"sha": "b21391d1640efce3144aee31a623d5ae5691a3a4", "filename": "src/test/ui/diagnostic-width/flag-json.stderr", "status": "renamed", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-json.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-json.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fflag-json.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "patch": "@@ -24,7 +24,7 @@ This error occurs when an expression was used in a place where the compiler\n expected an expression of a different type. It can occur in several cases, the\n most common being when calling a function and passing an argument which has a\n different type than the matching type in the function declaration.\n-\"},\"level\":\"error\",\"spans\":[{\"file_name\":\"$DIR/flag-json.rs\",\"byte_start\":244,\"byte_end\":246,\"line_start\":7,\"line_end\":7,\"column_start\":17,\"column_end\":19,\"is_primary\":true,\"text\":[{\"text\":\"    let _: () = 42;\",\"highlight_start\":17,\"highlight_end\":19}],\"label\":\"expected `()`, found integer\",\"suggested_replacement\":null,\"suggestion_applicability\":null,\"expansion\":null},{\"file_name\":\"$DIR/flag-json.rs\",\"byte_start\":239,\"byte_end\":241,\"line_start\":7,\"line_end\":7,\"column_start\":12,\"column_end\":14,\"is_primary\":false,\"text\":[{\"text\":\"    let _: () = 42;\",\"highlight_start\":12,\"highlight_end\":14}],\"label\":\"expected due to this\",\"suggested_replacement\":null,\"suggestion_applicability\":null,\"expansion\":null}],\"children\":[],\"rendered\":\"error[E0308]: mismatched types\n+\"},\"level\":\"error\",\"spans\":[{\"file_name\":\"$DIR/flag-json.rs\",\"byte_start\":243,\"byte_end\":245,\"line_start\":7,\"line_end\":7,\"column_start\":17,\"column_end\":19,\"is_primary\":true,\"text\":[{\"text\":\"    let _: () = 42;\",\"highlight_start\":17,\"highlight_end\":19}],\"label\":\"expected `()`, found integer\",\"suggested_replacement\":null,\"suggestion_applicability\":null,\"expansion\":null},{\"file_name\":\"$DIR/flag-json.rs\",\"byte_start\":238,\"byte_end\":240,\"line_start\":7,\"line_end\":7,\"column_start\":12,\"column_end\":14,\"is_primary\":false,\"text\":[{\"text\":\"    let _: () = 42;\",\"highlight_start\":12,\"highlight_end\":14}],\"label\":\"expected due to this\",\"suggested_replacement\":null,\"suggestion_applicability\":null,\"expansion\":null}],\"children\":[],\"rendered\":\"error[E0308]: mismatched types\n   --> $DIR/flag-json.rs:7:17\n    |\n LL | ..._: () = 42;", "previous_filename": "src/test/ui/terminal-width/flag-json.stderr"}, {"sha": "1989ea8863592038e57e42fb4a0015ac448cccfb", "filename": "src/test/ui/diagnostic-width/non-1-width-unicode-multiline-label.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-1-width-unicode-multiline-label.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-1-width-unicode-multiline-label.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-1-width-unicode-multiline-label.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-1-width-unicode-multiline-label.rs"}, {"sha": "bf277362dbab2977369c18f05f6b47754dc456c2", "filename": "src/test/ui/diagnostic-width/non-1-width-unicode-multiline-label.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-1-width-unicode-multiline-label.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-1-width-unicode-multiline-label.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-1-width-unicode-multiline-label.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-1-width-unicode-multiline-label.stderr"}, {"sha": "abd9e189a75378d59123d8feec47890d2a69cc3e", "filename": "src/test/ui/diagnostic-width/non-whitespace-trimming-2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-2.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-whitespace-trimming-2.rs"}, {"sha": "5dbb9ce45ee9e7b929756560f532e2cab7eb68c2", "filename": "src/test/ui/diagnostic-width/non-whitespace-trimming-2.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-2.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-whitespace-trimming-2.stderr"}, {"sha": "8d4d1b1627940c2ab2e5d5b08f1d1c9e01b7e57f", "filename": "src/test/ui/diagnostic-width/non-whitespace-trimming-unicode.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-unicode.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-unicode.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-unicode.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-whitespace-trimming-unicode.rs"}, {"sha": "1e5ff9398321fd91a345e29371d5543f836812c4", "filename": "src/test/ui/diagnostic-width/non-whitespace-trimming-unicode.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-unicode.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-unicode.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming-unicode.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-whitespace-trimming-unicode.stderr"}, {"sha": "f6c8d345c652e89226f96b5c0bdc157679bebb44", "filename": "src/test/ui/diagnostic-width/non-whitespace-trimming.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-whitespace-trimming.rs"}, {"sha": "c4ff0e16890b23e94fe26b237ef4f80eb7da6f3a", "filename": "src/test/ui/diagnostic-width/non-whitespace-trimming.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fnon-whitespace-trimming.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/non-whitespace-trimming.stderr"}, {"sha": "ade21753b457c8084d47cec2e909122630a7700b", "filename": "src/test/ui/diagnostic-width/tabs-trimming.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Ftabs-trimming.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Ftabs-trimming.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Ftabs-trimming.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/tabs-trimming.rs"}, {"sha": "6c8d9afc73b2aabb35bf5e98266ce9f32cda4277", "filename": "src/test/ui/diagnostic-width/tabs-trimming.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Ftabs-trimming.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Ftabs-trimming.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Ftabs-trimming.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/tabs-trimming.stderr"}, {"sha": "c68f678aab3495a7dcc4cd6fc7f9c627a96326bf", "filename": "src/test/ui/diagnostic-width/whitespace-trimming-2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming-2.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/whitespace-trimming-2.rs"}, {"sha": "97a64e603b761b49bd93b33e22c86e3bdeffa05f", "filename": "src/test/ui/diagnostic-width/whitespace-trimming-2.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming-2.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/whitespace-trimming-2.stderr"}, {"sha": "f747bcf17e0b427992a72926029dba912cd0b181", "filename": "src/test/ui/diagnostic-width/whitespace-trimming.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming.rs?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/whitespace-trimming.rs"}, {"sha": "e296d48893cdac7b50f0df5f0bbb296351a35ce1", "filename": "src/test/ui/diagnostic-width/whitespace-trimming.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/b36e58a4589706ff790eb25bbd78f40b1d649431/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdiagnostic-width%2Fwhitespace-trimming.stderr?ref=b36e58a4589706ff790eb25bbd78f40b1d649431", "previous_filename": "src/test/ui/terminal-width/whitespace-trimming.stderr"}, {"sha": "e445a84fd012e7b2089b3d848bcbaed194dd986e", "filename": "src/test/ui/terminal-width/flag-human.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/eba361ae36be41e42fb8fdf138455307e0ad407c/src%2Ftest%2Fui%2Fterminal-width%2Fflag-human.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eba361ae36be41e42fb8fdf138455307e0ad407c/src%2Ftest%2Fui%2Fterminal-width%2Fflag-human.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fterminal-width%2Fflag-human.rs?ref=eba361ae36be41e42fb8fdf138455307e0ad407c", "patch": "@@ -1,9 +0,0 @@\n-// compile-flags: -Z terminal-width=20\n-\n-// This test checks that `-Z terminal-width` effects the human error output by restricting it to an\n-// arbitrarily low value so that the effect is visible.\n-\n-fn main() {\n-    let _: () = 42;\n-    //~^ ERROR mismatched types\n-}"}, {"sha": "3d2530e204b3336943d618c880414612be503df2", "filename": "src/test/ui/terminal-width/flag-json.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/eba361ae36be41e42fb8fdf138455307e0ad407c/src%2Ftest%2Fui%2Fterminal-width%2Fflag-json.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eba361ae36be41e42fb8fdf138455307e0ad407c/src%2Ftest%2Fui%2Fterminal-width%2Fflag-json.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fterminal-width%2Fflag-json.rs?ref=eba361ae36be41e42fb8fdf138455307e0ad407c", "patch": "@@ -1,9 +0,0 @@\n-// compile-flags: -Z terminal-width=20 --error-format=json\n-\n-// This test checks that `-Z terminal-width` effects the JSON error output by restricting it to an\n-// arbitrarily low value so that the effect is visible.\n-\n-fn main() {\n-    let _: () = 42;\n-    //~^ ERROR arguments to this function are incorrect\n-}"}]}