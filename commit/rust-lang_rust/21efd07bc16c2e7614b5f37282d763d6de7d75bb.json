{"sha": "21efd07bc16c2e7614b5f37282d763d6de7d75bb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxZWZkMDdiYzE2YzJlNzYxNGI1ZjM3MjgyZDc2M2Q2ZGU3ZDc1YmI=", "commit": {"author": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-05-21T01:27:23Z"}, "committer": {"name": "Eric Holk", "email": "eholk@mozilla.com", "date": "2011-05-27T22:20:58Z"}, "message": "New tasks run, but their arguments get lost and something ends up in an infinite loop when the task exits.", "tree": {"sha": "919b9d24f163fd0483b056e7d880b1e963a5abe1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/919b9d24f163fd0483b056e7d880b1e963a5abe1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/21efd07bc16c2e7614b5f37282d763d6de7d75bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/21efd07bc16c2e7614b5f37282d763d6de7d75bb", "html_url": "https://github.com/rust-lang/rust/commit/21efd07bc16c2e7614b5f37282d763d6de7d75bb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/21efd07bc16c2e7614b5f37282d763d6de7d75bb/comments", "author": null, "committer": null, "parents": [{"sha": "e3b3a71e6aa2b8d8d4e5914eb6841caf5611271a", "url": "https://api.github.com/repos/rust-lang/rust/commits/e3b3a71e6aa2b8d8d4e5914eb6841caf5611271a", "html_url": "https://github.com/rust-lang/rust/commit/e3b3a71e6aa2b8d8d4e5914eb6841caf5611271a"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "643135f940705799b64670f165560e9c90fe17ef", "filename": "src/comp/middle/trans.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/21efd07bc16c2e7614b5f37282d763d6de7d75bb/src%2Fcomp%2Fmiddle%2Ftrans.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21efd07bc16c2e7614b5f37282d763d6de7d75bb/src%2Fcomp%2Fmiddle%2Ftrans.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fmiddle%2Ftrans.rs?ref=21efd07bc16c2e7614b5f37282d763d6de7d75bb", "patch": "@@ -5932,8 +5932,12 @@ fn trans_spawn(&@block_ctxt cx,\n     auto llfnptr = bcx.build.GEP(fnptr.val,\n                                  [C_int(0), C_int(0)]);\n     log_err \"Casting llfnptr\";\n-    auto llfnptr_i = bcx.build.PointerCast(llfnptr,\n-                                    T_int());\n+    auto llfnptrptr_i = bcx.build.PointerCast(llfnptr,\n+                                              T_ptr(T_int()));\n+    // We'd better dereference this one more time, since that one points into\n+    // the symbol table or something.\n+    auto llfnptr_i = bcx.build.Load(llfnptrptr_i);\n+\n     log_err \"Cassting llargs\";\n     auto llargs_i = bcx.build.PointerCast(llargs.val,\n                                    T_int());"}]}