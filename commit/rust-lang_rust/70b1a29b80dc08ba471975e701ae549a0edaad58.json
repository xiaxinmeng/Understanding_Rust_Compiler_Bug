{"sha": "70b1a29b80dc08ba471975e701ae549a0edaad58", "node_id": "MDY6Q29tbWl0NzI0NzEyOjcwYjFhMjliODBkYzA4YmE0NzE5NzVlNzAxYWU1NDlhMGVkYWFkNTg=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-12-28T13:13:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-12-28T13:13:17Z"}, "message": "Rollup merge of #80399 - jyn514:hir-id-cleanup, r=marmeladema\n\nRemove FIXME in rustc_privacy\n\n#71104 has been fixed.\n\nr? ``@marmeladema`` if you have time, otherwise ``@petrochenkov``", "tree": {"sha": "7230468ed4210239eae1fd7778f1c910e93a94dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7230468ed4210239eae1fd7778f1c910e93a94dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/70b1a29b80dc08ba471975e701ae549a0edaad58", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJf6dnuCRBK7hj4Ov3rIwAAdHIIAH81w8ySmQiTRVnNIGYRk7HI\nGpMfKXGElxmhm3imi2wzDow7XT5qe5OnntCjQLp9BoHRfju2p/T434pB4nso5Jgx\nATBlgr2PwWfJUDNx9Fa46eFPD29tMxWDc00NsDW6CsYC9bDu5XOZ0APm/adW9cBt\n2bvi5feLkLOH2qH29++MwkbDY45WPAMPv/YjwPbIBq0g/vxjrUwwMfgVC2xcIsXS\nbZpjC0eYBmo9FJYaLAstX4Fh6UZ7wudDD6o1at4F51oUi09Ij1hXyioEW2UaL2S9\n4uEuvhrPkZ2tmFoyfpFx6XVe16r4WfiGNB1UbFVH6qdGCGj1IZPD8Iu6GlLy2yo=\n=jZC+\n-----END PGP SIGNATURE-----\n", "payload": "tree 7230468ed4210239eae1fd7778f1c910e93a94dc\nparent 18be436550b7e6df8ce079a5294c2b9adaf885af\nparent 53da233aecbf5c6ee11596cd5be41ed3a40af9b9\nauthor Dylan DPC <dylan.dpc@gmail.com> 1609161197 +0100\ncommitter GitHub <noreply@github.com> 1609161197 +0100\n\nRollup merge of #80399 - jyn514:hir-id-cleanup, r=marmeladema\n\nRemove FIXME in rustc_privacy\n\n#71104 has been fixed.\n\nr? ``@marmeladema`` if you have time, otherwise ``@petrochenkov``\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/70b1a29b80dc08ba471975e701ae549a0edaad58", "html_url": "https://github.com/rust-lang/rust/commit/70b1a29b80dc08ba471975e701ae549a0edaad58", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/70b1a29b80dc08ba471975e701ae549a0edaad58/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "18be436550b7e6df8ce079a5294c2b9adaf885af", "url": "https://api.github.com/repos/rust-lang/rust/commits/18be436550b7e6df8ce079a5294c2b9adaf885af", "html_url": "https://github.com/rust-lang/rust/commit/18be436550b7e6df8ce079a5294c2b9adaf885af"}, {"sha": "53da233aecbf5c6ee11596cd5be41ed3a40af9b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/53da233aecbf5c6ee11596cd5be41ed3a40af9b9", "html_url": "https://github.com/rust-lang/rust/commit/53da233aecbf5c6ee11596cd5be41ed3a40af9b9"}], "stats": {"total": 4, "additions": 1, "deletions": 3}, "files": [{"sha": "708563f2ee981bd2802dbdceeac59f7a2ccb1cfa", "filename": "compiler/rustc_privacy/src/lib.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/70b1a29b80dc08ba471975e701ae549a0edaad58/compiler%2Frustc_privacy%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/70b1a29b80dc08ba471975e701ae549a0edaad58/compiler%2Frustc_privacy%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_privacy%2Fsrc%2Flib.rs?ref=70b1a29b80dc08ba471975e701ae549a0edaad58", "patch": "@@ -842,11 +842,9 @@ impl Visitor<'tcx> for EmbargoVisitor<'tcx> {\n         let macro_module_def_id =\n             ty::DefIdTree::parent(self.tcx, self.tcx.hir().local_def_id(md.hir_id).to_def_id())\n                 .unwrap();\n-        // FIXME(#71104) Should really be using just `as_local_hir_id` but\n-        // some `DefId` do not seem to have a corresponding HirId.\n         let hir_id = macro_module_def_id\n             .as_local()\n-            .and_then(|def_id| self.tcx.hir().opt_local_def_id_to_hir_id(def_id));\n+            .map(|def_id| self.tcx.hir().local_def_id_to_hir_id(def_id));\n         let mut module_id = match hir_id {\n             Some(module_id) if self.tcx.hir().is_hir_id_module(module_id) => module_id,\n             // `module_id` doesn't correspond to a `mod`, return early (#63164, #65252)."}]}