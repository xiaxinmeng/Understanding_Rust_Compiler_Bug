{"sha": "6957af770bb92b71485f852beb9071733e5f178b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5NTdhZjc3MGJiOTJiNzE0ODVmODUyYmViOTA3MTczM2U1ZjE3OGI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-11T01:00:03Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-09-11T01:12:35Z"}, "message": "Report obsolete trait lists on structs", "tree": {"sha": "b1e231b803ada6963d4391bfb008291c18904dc8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b1e231b803ada6963d4391bfb008291c18904dc8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6957af770bb92b71485f852beb9071733e5f178b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6957af770bb92b71485f852beb9071733e5f178b", "html_url": "https://github.com/rust-lang/rust/commit/6957af770bb92b71485f852beb9071733e5f178b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6957af770bb92b71485f852beb9071733e5f178b/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9869d071d101c580e1b54f077a30af8ee0fc960c", "url": "https://api.github.com/repos/rust-lang/rust/commits/9869d071d101c580e1b54f077a30af8ee0fc960c", "html_url": "https://github.com/rust-lang/rust/commit/9869d071d101c580e1b54f077a30af8ee0fc960c"}], "stats": {"total": 23, "additions": 19, "deletions": 4}, "files": [{"sha": "9a2b6474b19e5e88ffc877835e9f76788752f7a2", "filename": "src/libsyntax/parse/obsolete.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/6957af770bb92b71485f852beb9071733e5f178b/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6957af770bb92b71485f852beb9071733e5f178b/src%2Flibsyntax%2Fparse%2Fobsolete.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fobsolete.rs?ref=6957af770bb92b71485f852beb9071733e5f178b", "patch": "@@ -20,6 +20,7 @@ pub enum ObsoleteSyntax {\n     ObsoleteStructCtor,\n     ObsoleteWith,\n     ObsoleteClassMethod,\n+    ObsoleteClassTraits\n }\n \n impl ObsoleteSyntax : cmp::Eq {\n@@ -76,6 +77,11 @@ impl parser : ObsoleteReporter {\n                 \"class method\",\n                 \"methods should be defined inside impls\"\n             ),\n+            ObsoleteClassTraits => (\n+                \"class traits\",\n+                \"implemented traits are specified on the impl, as in \\\n+                 `impl foo : bar {`\"\n+            ),\n         };\n \n         self.report(sp, kind, kind_str, desc);"}, {"sha": "49fa14c5b7dc2785752722d5ad274474a70e6422", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6957af770bb92b71485f852beb9071733e5f178b/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6957af770bb92b71485f852beb9071733e5f178b/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=6957af770bb92b71485f852beb9071733e5f178b", "patch": "@@ -19,7 +19,7 @@ use obsolete::{\n     ObsoleteReporter, ObsoleteSyntax,\n     ObsoleteLowerCaseKindBounds, ObsoleteLet,\n     ObsoleteFieldTerminator, ObsoleteStructCtor,\n-    ObsoleteWith, ObsoleteClassMethod\n+    ObsoleteWith, ObsoleteClassMethod, ObsoleteClassTraits\n };\n use ast::{_mod, add, alt_check, alt_exhaustive, arg, arm, attribute,\n              bind_by_ref, bind_by_implicit_ref, bind_by_value, bind_by_move,\n@@ -2648,8 +2648,10 @@ impl parser {\n         let class_name = self.parse_value_ident();\n         self.parse_region_param();\n         let ty_params = self.parse_ty_params();\n-        let traits : ~[@trait_ref] = if self.eat(token::COLON)\n-            { self.parse_trait_ref_list(token::LBRACE) }\n+        let traits : ~[@trait_ref] = if self.eat(token::COLON) {\n+            self.obsolete(copy self.span, ObsoleteClassTraits);\n+            self.parse_trait_ref_list(token::LBRACE)\n+        }\n         else { ~[] };\n \n         let mut fields: ~[@struct_field];"}, {"sha": "642a26e6e9ef0299700c68964e5952b51b328a78", "filename": "src/test/compile-fail/class-method-missing.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/6957af770bb92b71485f852beb9071733e5f178b/src%2Ftest%2Fcompile-fail%2Fclass-method-missing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6957af770bb92b71485f852beb9071733e5f178b/src%2Ftest%2Fcompile-fail%2Fclass-method-missing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fclass-method-missing.rs?ref=6957af770bb92b71485f852beb9071733e5f178b", "patch": "@@ -3,10 +3,13 @@ trait animal {\n   fn eat();\n }\n \n-struct cat : animal {\n+struct cat {\n   meows: uint,\n }\n \n+impl cat : animal {\n+}\n+\n fn cat(in_x : uint) -> cat {\n     cat {\n         meows: in_x"}, {"sha": "9a3939692f5646ed99783da5b1a489d803e1ca41", "filename": "src/test/compile-fail/obsolete-syntax.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6957af770bb92b71485f852beb9071733e5f178b/src%2Ftest%2Fcompile-fail%2Fobsolete-syntax.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6957af770bb92b71485f852beb9071733e5f178b/src%2Ftest%2Fcompile-fail%2Fobsolete-syntax.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fobsolete-syntax.rs?ref=6957af770bb92b71485f852beb9071733e5f178b", "patch": "@@ -27,6 +27,10 @@ struct ss {\n     //~^ ERROR obsolete syntax: class method\n }\n \n+struct q : r {\n+    //~^ ERROR obsolete syntax: class traits\n+}\n+\n fn obsolete_with() {\n     struct S {\n         foo: (),"}]}