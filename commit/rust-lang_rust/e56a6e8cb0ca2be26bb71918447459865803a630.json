{"sha": "e56a6e8cb0ca2be26bb71918447459865803a630", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1NmE2ZThjYjBjYTJiZTI2YmI3MTkxODQ0NzQ1OTg2NTgwM2E2MzA=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-06-06T18:43:04Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2012-06-06T18:43:04Z"}, "message": "Revert \"Forbid classes with no fields\" due to test failures\n\nThis reverts commit 8fd9986f0ff1d0414cc064451f72748065a77cdf.", "tree": {"sha": "64d3157008b052f631b7edadac77fa742a1891d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/64d3157008b052f631b7edadac77fa742a1891d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e56a6e8cb0ca2be26bb71918447459865803a630", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e56a6e8cb0ca2be26bb71918447459865803a630", "html_url": "https://github.com/rust-lang/rust/commit/e56a6e8cb0ca2be26bb71918447459865803a630", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e56a6e8cb0ca2be26bb71918447459865803a630/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c6e16c5668a86245259a4f542a62199b2023b89b", "url": "https://api.github.com/repos/rust-lang/rust/commits/c6e16c5668a86245259a4f542a62199b2023b89b", "html_url": "https://github.com/rust-lang/rust/commit/c6e16c5668a86245259a4f542a62199b2023b89b"}], "stats": {"total": 15, "additions": 0, "deletions": 15}, "files": [{"sha": "70167192afc8830b2e3aa7f15519d82b7d60f2f9", "filename": "src/rustc/middle/typeck/check.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e56a6e8cb0ca2be26bb71918447459865803a630/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e56a6e8cb0ca2be26bb71918447459865803a630/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftypeck%2Fcheck.rs?ref=e56a6e8cb0ca2be26bb71918447459865803a630", "patch": "@@ -387,12 +387,6 @@ fn check_item(ccx: @crate_ctxt, it: @ast::item) {\n           };\n           // typecheck the members\n           for members.each {|m| check_class_member(class_ccx, class_t, m); }\n-          // Check that there's at least one field\n-          let (fields,_) = split_class_items(members);\n-          if fields.len() < 1u {\n-              ccx.tcx.sess.span_err(it.span, \"A class must have at least one \\\n-                field\");\n-          }\n           // Check that the class is instantiable\n           check_instantiable(ccx.tcx, it.span, it.id);\n       }"}, {"sha": "a500d249c07a8aa0071d35868d01090e788f32cb", "filename": "src/test/compile-fail/issue-2509-a.rs", "status": "removed", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c6e16c5668a86245259a4f542a62199b2023b89b/src%2Ftest%2Fcompile-fail%2Fissue-2509-a.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6e16c5668a86245259a4f542a62199b2023b89b/src%2Ftest%2Fcompile-fail%2Fissue-2509-a.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-2509-a.rs?ref=c6e16c5668a86245259a4f542a62199b2023b89b", "patch": "@@ -1,9 +0,0 @@\n-class c { //! ERROR A class must have at least one field\n-    new() { }\n-}\n-\n-fn main() {\n-    let a = c();\n-    let x = [a];\n-    let _y = x[0];\n-}"}]}