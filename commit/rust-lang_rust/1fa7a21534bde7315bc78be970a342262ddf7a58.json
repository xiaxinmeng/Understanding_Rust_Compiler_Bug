{"sha": "1fa7a21534bde7315bc78be970a342262ddf7a58", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmYTdhMjE1MzRiZGU3MzE1YmM3OGJlOTcwYTM0MjI2MmRkZjdhNTg=", "commit": {"author": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2019-02-07T11:08:05Z"}, "committer": {"name": "Amanieu d'Antras", "email": "amanieu@gmail.com", "date": "2019-04-23T22:54:14Z"}, "message": "Make libstd depend on the hashbrown crate", "tree": {"sha": "bfad0820f65e2fd60b1677520fe094371a8cf943", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bfad0820f65e2fd60b1677520fe094371a8cf943"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1fa7a21534bde7315bc78be970a342262ddf7a58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1fa7a21534bde7315bc78be970a342262ddf7a58", "html_url": "https://github.com/rust-lang/rust/commit/1fa7a21534bde7315bc78be970a342262ddf7a58", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1fa7a21534bde7315bc78be970a342262ddf7a58/comments", "author": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Amanieu", "id": 278509, "node_id": "MDQ6VXNlcjI3ODUwOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/278509?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Amanieu", "html_url": "https://github.com/Amanieu", "followers_url": "https://api.github.com/users/Amanieu/followers", "following_url": "https://api.github.com/users/Amanieu/following{/other_user}", "gists_url": "https://api.github.com/users/Amanieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/Amanieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Amanieu/subscriptions", "organizations_url": "https://api.github.com/users/Amanieu/orgs", "repos_url": "https://api.github.com/users/Amanieu/repos", "events_url": "https://api.github.com/users/Amanieu/events{/privacy}", "received_events_url": "https://api.github.com/users/Amanieu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "556fc40a95be2ea20e33ad34c32598cf2e3edf72", "url": "https://api.github.com/repos/rust-lang/rust/commits/556fc40a95be2ea20e33ad34c32598cf2e3edf72", "html_url": "https://github.com/rust-lang/rust/commit/556fc40a95be2ea20e33ad34c32598cf2e3edf72"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "6c5951f08da2fc376e727b0a4c057898b0048d2f", "filename": "Cargo.lock", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/1fa7a21534bde7315bc78be970a342262ddf7a58/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/1fa7a21534bde7315bc78be970a342262ddf7a58/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=1fa7a21534bde7315bc78be970a342262ddf7a58", "patch": "@@ -1066,6 +1066,16 @@ dependencies = [\n  \"walkdir 2.2.7 (registry+https://github.com/rust-lang/crates.io-index)\",\n ]\n \n+[[package]]\n+name = \"hashbrown\"\n+version = \"0.2.0\"\n+source = \"registry+https://github.com/rust-lang/crates.io-index\"\n+dependencies = [\n+ \"compiler_builtins 0.1.10 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"rustc-std-workspace-alloc 1.0.0\",\n+ \"rustc-std-workspace-core 1.0.0\",\n+]\n+\n [[package]]\n name = \"heck\"\n version = \"0.3.0\"\n@@ -2529,6 +2539,13 @@ name = \"rustc-serialize\"\n version = \"0.3.24\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \n+[[package]]\n+name = \"rustc-std-workspace-alloc\"\n+version = \"1.0.0\"\n+dependencies = [\n+ \"alloc 0.0.0\",\n+]\n+\n [[package]]\n name = \"rustc-std-workspace-core\"\n version = \"1.0.0\"\n@@ -3260,6 +3277,7 @@ dependencies = [\n  \"core 0.0.0\",\n  \"dlmalloc 0.1.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"fortanix-sgx-abi 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"hashbrown 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"libc 0.2.51 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"panic_abort 0.0.0\",\n  \"panic_unwind 0.0.0\",\n@@ -4103,6 +4121,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum globset 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4743617a7464bbda3c8aec8558ff2f9429047e025771037df561d383337ff865\"\n \"checksum handlebars 0.32.4 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d89ec99d1594f285d4590fc32bac5f75cdab383f1123d504d27862c644a807dd\"\n \"checksum handlebars 1.1.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"d82e5750d8027a97b9640e3fefa66bbaf852a35228e1c90790efd13c4b09c166\"\n+\"checksum hashbrown 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"58623735fa622916205f9e0a52a031b25b0e251ddaef47f7cb288444c4410beb\"\n \"checksum heck 0.3.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"ea04fa3ead4e05e51a7c806fc07271fdbde4e246a6c6d1efd52e72230b771b82\"\n \"checksum hex 0.3.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"805026a5d0141ffc30abb3be3173848ad46a1b1664fe632428479619a3644d77\"\n \"checksum home 0.3.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"80dff82fb58cfbbc617fb9a9184b010be0529201553cda50ad04372bc2333aff\""}, {"sha": "ccd7e8b7654a67f05e15444db80b89421e160590", "filename": "Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1fa7a21534bde7315bc78be970a342262ddf7a58/Cargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1fa7a21534bde7315bc78be970a342262ddf7a58/Cargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.toml?ref=1fa7a21534bde7315bc78be970a342262ddf7a58", "patch": "@@ -67,6 +67,7 @@ rustc-workspace-hack = { path = 'src/tools/rustc-workspace-hack' }\n # See comments in `tools/rustc-std-workspace-core/README.md` for what's going on\n # here\n rustc-std-workspace-core = { path = 'src/tools/rustc-std-workspace-core' }\n+rustc-std-workspace-alloc = { path = 'src/tools/rustc-std-workspace-alloc' }\n \n [patch.\"https://github.com/rust-lang/rust-clippy\"]\n clippy_lints = { path = \"src/tools/clippy/clippy_lints\" }"}, {"sha": "83aee507f32f2d8799f1e6e159ce239d1b256f5f", "filename": "src/libstd/Cargo.toml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/1fa7a21534bde7315bc78be970a342262ddf7a58/src%2Flibstd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1fa7a21534bde7315bc78be970a342262ddf7a58/src%2Flibstd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2FCargo.toml?ref=1fa7a21534bde7315bc78be970a342262ddf7a58", "patch": "@@ -22,6 +22,7 @@ libc = { version = \"0.2.51\", default-features = false, features = ['rustc-dep-of\n compiler_builtins = { version = \"0.1.9\" }\n profiler_builtins = { path = \"../libprofiler_builtins\", optional = true }\n unwind = { path = \"../libunwind\" }\n+hashbrown = { version = \"0.2.0\", features = ['rustc-dep-of-std'] }\n rustc-demangle = { version = \"0.1.10\", features = ['rustc-dep-of-std'] }\n backtrace-sys = { version = \"0.1.24\", features = [\"rustc-dep-of-std\"], optional = true }\n "}, {"sha": "98578914963db01a83d9eff939118a443f478b4b", "filename": "src/tools/rustc-std-workspace-alloc/Cargo.toml", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/1fa7a21534bde7315bc78be970a342262ddf7a58/src%2Ftools%2Frustc-std-workspace-alloc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/1fa7a21534bde7315bc78be970a342262ddf7a58/src%2Ftools%2Frustc-std-workspace-alloc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustc-std-workspace-alloc%2FCargo.toml?ref=1fa7a21534bde7315bc78be970a342262ddf7a58", "patch": "@@ -0,0 +1,14 @@\n+[package]\n+name = \"rustc-std-workspace-alloc\"\n+version = \"1.0.0\"\n+authors = [\"Alex Crichton <alex@alexcrichton.com>\"]\n+license = 'MIT/Apache-2.0'\n+description = \"\"\"\n+Hack for the compiler's own build system\n+\"\"\"\n+\n+[lib]\n+path = \"lib.rs\"\n+\n+[dependencies]\n+alloc = { path = \"../../liballoc\" }"}, {"sha": "50294e6cbad5a2c4d92de97352a9c1fa34af264c", "filename": "src/tools/rustc-std-workspace-alloc/lib.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/1fa7a21534bde7315bc78be970a342262ddf7a58/src%2Ftools%2Frustc-std-workspace-alloc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fa7a21534bde7315bc78be970a342262ddf7a58/src%2Ftools%2Frustc-std-workspace-alloc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Frustc-std-workspace-alloc%2Flib.rs?ref=1fa7a21534bde7315bc78be970a342262ddf7a58", "patch": "@@ -0,0 +1,9 @@\n+#![feature(no_core, alloc)]\n+#![no_core]\n+\n+// See rustc-std-workspace-core for why this crate is needed.\n+\n+// Rename the crate to avoid conflicting with the alloc module in liballoc.\n+extern crate alloc as foo;\n+\n+pub use foo::*;"}]}