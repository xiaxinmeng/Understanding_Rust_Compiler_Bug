{"sha": "6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def", "node_id": "C_kwDOAAsO6NoAKDZlYjBjODlmNmJiZTBmODFhMDNiOWZhYTFkY2EwNTc3YTU2ZDhkZWY", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-25T15:45:42Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-08-03T17:14:29Z"}, "message": "Bless ui tests.", "tree": {"sha": "c83664aaff990566f7de4b0ed5185d032ab14be5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c83664aaff990566f7de4b0ed5185d032ab14be5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def", "html_url": "https://github.com/rust-lang/rust/commit/6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "845009d0718d07415d774c930f6cbe32509d03b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/845009d0718d07415d774c930f6cbe32509d03b8", "html_url": "https://github.com/rust-lang/rust/commit/845009d0718d07415d774c930f6cbe32509d03b8"}], "stats": {"total": 103, "additions": 45, "deletions": 58}, "files": [{"sha": "f90967fbe6e43ae65e6776da071f80d0fca8da84", "filename": "src/test/ui/asm/naked-functions.stderr", "status": "modified", "additions": 45, "deletions": 58, "changes": 103, "blob_url": "https://github.com/rust-lang/rust/blob/6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def/src%2Ftest%2Fui%2Fasm%2Fnaked-functions.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def/src%2Ftest%2Fui%2Fasm%2Fnaked-functions.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fasm%2Fnaked-functions.stderr?ref=6eb0c89f6bbe0f81a03b9faa1dca0577a56d8def", "patch": "@@ -57,13 +57,11 @@ LL |     a + 1\n error[E0787]: naked functions must contain a single asm block\n   --> $DIR/naked-functions.rs:33:1\n    |\n-LL | / pub unsafe extern \"C\" fn inc(a: u32) -> u32 {\n-LL | |\n-LL | |     a + 1\n-   | |     ----- non-asm is unsupported in naked functions\n-LL | |\n-LL | | }\n-   | |_^\n+LL | pub unsafe extern \"C\" fn inc(a: u32) -> u32 {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL |     a + 1\n+   |     ----- non-asm is unsupported in naked functions\n \n error: referencing function parameters is not allowed in naked functions\n   --> $DIR/naked-functions.rs:42:31\n@@ -82,12 +80,11 @@ LL |     asm!(\"/* {0} */\", in(reg) a, options(noreturn));\n error[E0787]: naked functions must contain a single asm block\n   --> $DIR/naked-functions.rs:48:1\n    |\n-LL | / pub unsafe extern \"C\" fn inc_closure(a: u32) -> u32 {\n-LL | |\n-LL | |     (|| a + 1)()\n-   | |     ------------ non-asm is unsupported in naked functions\n-LL | | }\n-   | |_^\n+LL | pub unsafe extern \"C\" fn inc_closure(a: u32) -> u32 {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL |     (|| a + 1)()\n+   |     ------------ non-asm is unsupported in naked functions\n \n error[E0787]: only `const` and `sym` operands are supported in naked functions\n   --> $DIR/naked-functions.rs:65:10\n@@ -124,30 +121,25 @@ LL |          sym G, options(noreturn),\n error[E0787]: naked functions must contain a single asm block\n   --> $DIR/naked-functions.rs:54:1\n    |\n-LL | / pub unsafe extern \"C\" fn unsupported_operands() {\n-LL | |\n-LL | |     let mut a = 0usize;\n-   | |     ------------------- non-asm is unsupported in naked functions\n-LL | |     let mut b = 0usize;\n-   | |     ------------------- non-asm is unsupported in naked functions\n-LL | |     let mut c = 0usize;\n-   | |     ------------------- non-asm is unsupported in naked functions\n-LL | |     let mut d = 0usize;\n-   | |     ------------------- non-asm is unsupported in naked functions\n-LL | |     let mut e = 0usize;\n-   | |     ------------------- non-asm is unsupported in naked functions\n-...  |\n-LL | |     );\n-LL | | }\n-   | |_^\n+LL | pub unsafe extern \"C\" fn unsupported_operands() {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL |     let mut a = 0usize;\n+   |     ------------------- non-asm is unsupported in naked functions\n+LL |     let mut b = 0usize;\n+   |     ------------------- non-asm is unsupported in naked functions\n+LL |     let mut c = 0usize;\n+   |     ------------------- non-asm is unsupported in naked functions\n+LL |     let mut d = 0usize;\n+   |     ------------------- non-asm is unsupported in naked functions\n+LL |     let mut e = 0usize;\n+   |     ------------------- non-asm is unsupported in naked functions\n \n error[E0787]: naked functions must contain a single asm block\n   --> $DIR/naked-functions.rs:77:1\n    |\n-LL | / pub extern \"C\" fn missing_assembly() {\n-LL | |\n-LL | | }\n-   | |_^\n+LL | pub extern \"C\" fn missing_assembly() {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error[E0787]: asm in naked functions must use `noreturn` option\n   --> $DIR/naked-functions.rs:84:5\n@@ -185,20 +177,17 @@ LL |     asm!(\"\", options(noreturn));\n error[E0787]: naked functions must contain a single asm block\n   --> $DIR/naked-functions.rs:82:1\n    |\n-LL | / pub extern \"C\" fn too_many_asm_blocks() {\n-LL | |\n-LL | |     asm!(\"\");\n-LL | |\n-LL | |     asm!(\"\");\n-   | |     -------- multiple asm blocks are unsupported in naked functions\n-LL | |\n-LL | |     asm!(\"\");\n-   | |     -------- multiple asm blocks are unsupported in naked functions\n-LL | |\n-LL | |     asm!(\"\", options(noreturn));\n-   | |     --------------------------- multiple asm blocks are unsupported in naked functions\n-LL | | }\n-   | |_^\n+LL | pub extern \"C\" fn too_many_asm_blocks() {\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+...\n+LL |     asm!(\"\");\n+   |     -------- multiple asm blocks are unsupported in naked functions\n+LL |\n+LL |     asm!(\"\");\n+   |     -------- multiple asm blocks are unsupported in naked functions\n+LL |\n+LL |     asm!(\"\", options(noreturn));\n+   |     --------------------------- multiple asm blocks are unsupported in naked functions\n \n error: referencing function parameters is not allowed in naked functions\n   --> $DIR/naked-functions.rs:97:11\n@@ -211,13 +200,11 @@ LL |         *&y\n error[E0787]: naked functions must contain a single asm block\n   --> $DIR/naked-functions.rs:95:5\n    |\n-LL | /     pub extern \"C\" fn inner(y: usize) -> usize {\n-LL | |\n-LL | |         *&y\n-   | |         --- non-asm is unsupported in naked functions\n-LL | |\n-LL | |     }\n-   | |_____^\n+LL |     pub extern \"C\" fn inner(y: usize) -> usize {\n+   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+LL |\n+LL |         *&y\n+   |         --- non-asm is unsupported in naked functions\n \n error[E0787]: asm options unsupported in naked functions: `nomem`, `preserves_flags`\n   --> $DIR/naked-functions.rs:105:5\n@@ -249,18 +236,18 @@ LL |     asm!(\"\", options(noreturn, may_unwind));\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: Rust ABI is unsupported in naked functions\n-  --> $DIR/naked-functions.rs:124:15\n+  --> $DIR/naked-functions.rs:124:1\n    |\n LL | pub unsafe fn default_abi() {\n-   |               ^^^^^^^^^^^\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: `#[warn(undefined_naked_function_abi)]` on by default\n \n warning: Rust ABI is unsupported in naked functions\n-  --> $DIR/naked-functions.rs:130:15\n+  --> $DIR/naked-functions.rs:130:1\n    |\n LL | pub unsafe fn rust_abi() {\n-   |               ^^^^^^^^\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: naked functions cannot be inlined\n   --> $DIR/naked-functions.rs:170:1"}]}