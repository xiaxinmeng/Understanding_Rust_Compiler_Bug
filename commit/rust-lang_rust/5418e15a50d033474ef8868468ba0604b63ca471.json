{"sha": "5418e15a50d033474ef8868468ba0604b63ca471", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0MThlMTVhNTBkMDMzNDc0ZWY4ODY4NDY4YmEwNjA0YjYzY2E0NzE=", "commit": {"author": {"name": "Haoran Wang", "email": "waharaxn@gmail.com", "date": "2019-09-25T21:22:46Z"}, "committer": {"name": "Haoran Wang", "email": "waharaxn@gmail.com", "date": "2019-09-26T00:42:59Z"}, "message": "Fix issue #64732\n\nBased on issue #64732, when creating a byte literal with single quotes,\nthe suggestion message would indicate that you meant to write a `str` literal,\nbut we actually meant to write a byte string literal.\n\nSo I changed the unescape_error_reporting.rs to decide whether to print out\n\"if you meant to write a `str` literal, use double quotes\",\nor \"if you meant to write a byte string literal, use double quotes\".", "tree": {"sha": "7688c1f8d425de6dda9d47deee1e2d765b57889c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7688c1f8d425de6dda9d47deee1e2d765b57889c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5418e15a50d033474ef8868468ba0604b63ca471", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5418e15a50d033474ef8868468ba0604b63ca471", "html_url": "https://github.com/rust-lang/rust/commit/5418e15a50d033474ef8868468ba0604b63ca471", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5418e15a50d033474ef8868468ba0604b63ca471/comments", "author": {"login": "onehr", "id": 8767126, "node_id": "MDQ6VXNlcjg3NjcxMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8767126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onehr", "html_url": "https://github.com/onehr", "followers_url": "https://api.github.com/users/onehr/followers", "following_url": "https://api.github.com/users/onehr/following{/other_user}", "gists_url": "https://api.github.com/users/onehr/gists{/gist_id}", "starred_url": "https://api.github.com/users/onehr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onehr/subscriptions", "organizations_url": "https://api.github.com/users/onehr/orgs", "repos_url": "https://api.github.com/users/onehr/repos", "events_url": "https://api.github.com/users/onehr/events{/privacy}", "received_events_url": "https://api.github.com/users/onehr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "onehr", "id": 8767126, "node_id": "MDQ6VXNlcjg3NjcxMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/8767126?v=4", "gravatar_id": "", "url": "https://api.github.com/users/onehr", "html_url": "https://github.com/onehr", "followers_url": "https://api.github.com/users/onehr/followers", "following_url": "https://api.github.com/users/onehr/following{/other_user}", "gists_url": "https://api.github.com/users/onehr/gists{/gist_id}", "starred_url": "https://api.github.com/users/onehr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/onehr/subscriptions", "organizations_url": "https://api.github.com/users/onehr/orgs", "repos_url": "https://api.github.com/users/onehr/repos", "events_url": "https://api.github.com/users/onehr/events{/privacy}", "received_events_url": "https://api.github.com/users/onehr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6c2c29c43206d6e2f1091fa278d2792ea10e3659", "url": "https://api.github.com/repos/rust-lang/rust/commits/6c2c29c43206d6e2f1091fa278d2792ea10e3659", "html_url": "https://github.com/rust-lang/rust/commit/6c2c29c43206d6e2f1091fa278d2792ea10e3659"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "5565015179c2d5949a9291f72b5b1431b38b21c0", "filename": "src/libsyntax/parse/unescape_error_reporting.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/5418e15a50d033474ef8868468ba0604b63ca471/src%2Flibsyntax%2Fparse%2Funescape_error_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5418e15a50d033474ef8868468ba0604b63ca471/src%2Flibsyntax%2Fparse%2Funescape_error_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Funescape_error_reporting.rs?ref=5418e15a50d033474ef8868468ba0604b63ca471", "patch": "@@ -47,14 +47,20 @@ pub(crate) fn emit_unescape_error(\n                 .emit();\n         }\n         EscapeError::MoreThanOneChar => {\n+            let msg = if mode.is_bytes() {\n+                \"if you meant to write a byte string literal, use double quotes\"\n+            } else {\n+                \"if you meant to write a `str` literal, use double quotes\"\n+            };\n+\n             handler\n                 .struct_span_err(\n                     span_with_quotes,\n                     \"character literal may only contain one codepoint\",\n                 )\n                 .span_suggestion(\n                     span_with_quotes,\n-                    \"if you meant to write a `str` literal, use double quotes\",\n+                    msg,\n                     format!(\"\\\"{}\\\"\", lit),\n                     Applicability::MachineApplicable,\n                 ).emit()"}]}