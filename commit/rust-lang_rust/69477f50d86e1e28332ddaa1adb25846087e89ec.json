{"sha": "69477f50d86e1e28332ddaa1adb25846087e89ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5NDc3ZjUwZDg2ZTFlMjgzMzJkZGFhMWFkYjI1ODQ2MDg3ZTg5ZWM=", "commit": {"author": {"name": "James Munns", "email": "james.munns@ferrous-systems.com", "date": "2020-11-17T00:38:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-17T00:38:53Z"}, "message": "Clarify availability of atomic operations\n\nThis was noticed while we were updating the embedded rust book: https://github.com/rust-embedded/book/pull/273/files\r\n\r\nThese targets do natively have atomic load/stores, but do not support CAS operations.", "tree": {"sha": "55caaee3ed6411055a86c026160c867fcc0d9166", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/55caaee3ed6411055a86c026160c867fcc0d9166"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/69477f50d86e1e28332ddaa1adb25846087e89ec", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfsxudCRBK7hj4Ov3rIwAAdHIIAC8q12FoJ53XcaE7vVywWlmN\nZ9hS4qyzcQ6SPhkj8ri0V/E2yLVOCFbjvlpZ9SVX4qUfSuvZt+sB6iGCHff6QfMO\nxeQI227CDTLwmMjRe5v1GJYj7HfNEE58DmVKvzx8oCGgCiOyKfZqGvrt9CEBUuD6\nSBxvv9BgnPvlj/ZIGAMjaXcuqUIyjKlMAD8SqOI95GVI1+Z2PwOT9YdEnudfoeXl\nDb/oGfRZOtlVsMmVDDkoPBmU+dmXMLQOsUJD9mqIvGX7EmV0tbPBTmuAAWE5G1DH\nFFhy8TTvXToKKHoa4s+xOyn/b+a6wlolKu4N8SBRGJxpqjZH1cdBxGk8GOsyDKQ=\n=DOQ+\n-----END PGP SIGNATURE-----\n", "payload": "tree 55caaee3ed6411055a86c026160c867fcc0d9166\nparent f5230fbf76bafd86ee4376a0e26e551df8d17fec\nauthor James Munns <james.munns@ferrous-systems.com> 1605573533 +0100\ncommitter GitHub <noreply@github.com> 1605573533 +0100\n\nClarify availability of atomic operations\n\nThis was noticed while we were updating the embedded rust book: https://github.com/rust-embedded/book/pull/273/files\r\n\r\nThese targets do natively have atomic load/stores, but do not support CAS operations."}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/69477f50d86e1e28332ddaa1adb25846087e89ec", "html_url": "https://github.com/rust-lang/rust/commit/69477f50d86e1e28332ddaa1adb25846087e89ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/69477f50d86e1e28332ddaa1adb25846087e89ec/comments", "author": null, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f5230fbf76bafd86ee4376a0e26e551df8d17fec", "url": "https://api.github.com/repos/rust-lang/rust/commits/f5230fbf76bafd86ee4376a0e26e551df8d17fec", "html_url": "https://github.com/rust-lang/rust/commit/f5230fbf76bafd86ee4376a0e26e551df8d17fec"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "9d2045990570b5e4a919b27e9435be3aaf5d550e", "filename": "library/core/src/sync/atomic.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/69477f50d86e1e28332ddaa1adb25846087e89ec/library%2Fcore%2Fsrc%2Fsync%2Fatomic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/69477f50d86e1e28332ddaa1adb25846087e89ec/library%2Fcore%2Fsrc%2Fsync%2Fatomic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fsync%2Fatomic.rs?ref=69477f50d86e1e28332ddaa1adb25846087e89ec", "patch": "@@ -47,9 +47,16 @@\n //!\n //! * PowerPC and MIPS platforms with 32-bit pointers do not have `AtomicU64` or\n //!   `AtomicI64` types.\n-//! * ARM platforms like `armv5te` that aren't for Linux do not have any atomics\n-//!   at all.\n-//! * ARM targets with `thumbv6m` do not have atomic operations at all.\n+//! * ARM platforms like `armv5te` that aren't for Linux only provide `load`\n+//!   and `store` operations, and do not support Compare and Swap (CAS)\n+//!   operations, such as `swap`, `fetch_add`, etc. Additionally on Linux,\n+//!   these CAS operations are implemented via [operating system support], which\n+//!   may come with a performance penalty.\n+//! * ARM targets with `thumbv6m` only provide `load` and `store` operations,\n+//!   and do not support Compare and Swap (CAS) operations, such as `swap`,\n+//!   `fetch_add`, etc.\n+//!\n+//! [operating system support]: https://www.kernel.org/doc/Documentation/arm/kernel_user_helpers.txt\n //!\n //! Note that future platforms may be added that also do not have support for\n //! some atomic operations. Maximally portable code will want to be careful"}]}