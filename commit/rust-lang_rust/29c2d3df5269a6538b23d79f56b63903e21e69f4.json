{"sha": "29c2d3df5269a6538b23d79f56b63903e21e69f4", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI5YzJkM2RmNTI2OWE2NTM4YjIzZDc5ZjU2YjYzOTAzZTIxZTY5ZjQ=", "commit": {"author": {"name": "Till Hoeppner", "email": "till@hoeppner.ws", "date": "2014-09-23T18:01:59Z"}, "committer": {"name": "Till Hoeppner", "email": "till@hoeppner.ws", "date": "2014-09-25T12:12:03Z"}, "message": "Add partial_min/max to libcore/cmp\n\nAdd partial_min/max to libcore/cmp\n\nMatch against None and mark as experimental\n\nShortened documentation.\n\nRemoved whitespace", "tree": {"sha": "622f5751841d909f24cc8318eba666c24947f2c1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/622f5751841d909f24cc8318eba666c24947f2c1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/29c2d3df5269a6538b23d79f56b63903e21e69f4", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/29c2d3df5269a6538b23d79f56b63903e21e69f4", "html_url": "https://github.com/rust-lang/rust/commit/29c2d3df5269a6538b23d79f56b63903e21e69f4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/29c2d3df5269a6538b23d79f56b63903e21e69f4/comments", "author": {"login": "tilpner", "id": 4322055, "node_id": "MDQ6VXNlcjQzMjIwNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4322055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tilpner", "html_url": "https://github.com/tilpner", "followers_url": "https://api.github.com/users/tilpner/followers", "following_url": "https://api.github.com/users/tilpner/following{/other_user}", "gists_url": "https://api.github.com/users/tilpner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tilpner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tilpner/subscriptions", "organizations_url": "https://api.github.com/users/tilpner/orgs", "repos_url": "https://api.github.com/users/tilpner/repos", "events_url": "https://api.github.com/users/tilpner/events{/privacy}", "received_events_url": "https://api.github.com/users/tilpner/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tilpner", "id": 4322055, "node_id": "MDQ6VXNlcjQzMjIwNTU=", "avatar_url": "https://avatars.githubusercontent.com/u/4322055?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tilpner", "html_url": "https://github.com/tilpner", "followers_url": "https://api.github.com/users/tilpner/followers", "following_url": "https://api.github.com/users/tilpner/following{/other_user}", "gists_url": "https://api.github.com/users/tilpner/gists{/gist_id}", "starred_url": "https://api.github.com/users/tilpner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tilpner/subscriptions", "organizations_url": "https://api.github.com/users/tilpner/orgs", "repos_url": "https://api.github.com/users/tilpner/repos", "events_url": "https://api.github.com/users/tilpner/events{/privacy}", "received_events_url": "https://api.github.com/users/tilpner/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d299bafb31a7c0528e690e48ec6d5591f1eb0bac", "url": "https://api.github.com/repos/rust-lang/rust/commits/d299bafb31a7c0528e690e48ec6d5591f1eb0bac", "html_url": "https://github.com/rust-lang/rust/commit/d299bafb31a7c0528e690e48ec6d5591f1eb0bac"}], "stats": {"total": 95, "additions": 94, "deletions": 1}, "files": [{"sha": "a567eaa57d57faa33d456157370dec2c0b07d858", "filename": "src/libcore/cmp.rs", "status": "modified", "additions": 27, "deletions": 1, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/29c2d3df5269a6538b23d79f56b63903e21e69f4/src%2Flibcore%2Fcmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29c2d3df5269a6538b23d79f56b63903e21e69f4/src%2Flibcore%2Fcmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fcmp.rs?ref=29c2d3df5269a6538b23d79f56b63903e21e69f4", "patch": "@@ -39,7 +39,7 @@\n \n #![stable]\n \n-use option::{Option, Some};\n+use option::{Option, Some, None};\n \n /// Trait for values that can be compared for equality and inequality.\n ///\n@@ -268,6 +268,32 @@ pub fn max<T: Ord>(v1: T, v2: T) -> T {\n     if v1 > v2 { v1 } else { v2 }\n }\n \n+/// Compare and return the minimum of two values if there is one.\n+///\n+/// Returns the first argument if the comparison determines them to be equal.\n+#[inline]\n+#[experimental]\n+pub fn partial_min<T: PartialOrd>(v1: T, v2: T) -> Option<T> {\n+    match v1.partial_cmp(&v2) {\n+        Some(Less) | Some(Equal) => Some(v1),\n+        Some(Greater) => Some(v2),\n+        None => None\n+    }\n+}\n+\n+/// Compare and return the maximum of two values if there is one.\n+///\n+/// Returns the first argument if the comparison determines them to be equal.\n+#[inline]\n+#[experimental]\n+pub fn partial_max<T: PartialOrd>(v1: T, v2: T) -> Option<T> {\n+    match v1.partial_cmp(&v2) {\n+        Some(Less) => Some(v2),\n+        Some(Equal) | Some(Greater) => Some(v1),\n+        None => None\n+    }\n+}\n+\n // Implementation of PartialEq, Eq, PartialOrd and Ord for primitive types\n mod impls {\n     use cmp::{PartialOrd, Ord, PartialEq, Eq, Ordering,"}, {"sha": "4ac3f7e931049ad937dcfce7e9f7cc97db7d6129", "filename": "src/libcoretest/cmp.rs", "status": "modified", "additions": 67, "deletions": 0, "changes": 67, "blob_url": "https://github.com/rust-lang/rust/blob/29c2d3df5269a6538b23d79f56b63903e21e69f4/src%2Flibcoretest%2Fcmp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/29c2d3df5269a6538b23d79f56b63903e21e69f4/src%2Flibcoretest%2Fcmp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcoretest%2Fcmp.rs?ref=29c2d3df5269a6538b23d79f56b63903e21e69f4", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n use core::cmp::lexical_ordering;\n+use core::cmp::{ partial_min, partial_max };\n \n #[test]\n fn test_int_totalord() {\n@@ -56,6 +57,72 @@ fn test_lexical_ordering() {\n      }\n }\n \n+#[test]\n+fn test_partial_min() {\n+    use core::f64::NAN;\n+    let data_integer = [\n+        // a, b, result\n+        (0i, 0i, Some(0i)),\n+        (1i, 0i, Some(0i)),\n+        (0i, 1i, Some(0i)),\n+        (-1i, 0i, Some(-1i)),\n+        (0i, -1i, Some(-1i))\n+    ];\n+\n+    let data_float = [\n+        // a, b, result\n+        (0.0f64, 0.0f64, Some(0.0f64)),\n+        (1.0f64, 0.0f64, Some(0.0f64)),\n+        (0.0f64, 1.0f64, Some(0.0f64)),\n+        (-1.0f64, 0.0f64, Some(-1.0f64)),\n+        (0.0f64, -1.0f64, Some(-1.0f64)),\n+        (NAN, NAN, None),\n+        (NAN, 1.0f64, None),\n+        (1.0f64, NAN, None)\n+    ];\n+\n+    for &(a, b, result) in data_integer.iter() {\n+        assert!(partial_min(a, b) == result);\n+    }\n+\n+    for &(a, b, result) in data_float.iter() {\n+        assert!(partial_min(a, b) == result);\n+    }\n+}\n+\n+#[test]\n+fn test_partial_max() {\n+    use core::f64::NAN;\n+    let data_integer = [\n+        // a, b, result\n+        (0i, 0i, Some(0i)),\n+        (1i, 0i, Some(1i)),\n+        (0i, 1i, Some(1i)),\n+        (-1i, 0i, Some(0i)),\n+        (0i, -1i, Some(0i))\n+    ];\n+\n+    let data_float = [\n+        // a, b, result\n+        (0.0f64, 0.0f64, Some(0.0f64)),\n+        (1.0f64, 0.0f64, Some(1.0f64)),\n+        (0.0f64, 1.0f64, Some(1.0f64)),\n+        (-1.0f64, 0.0f64, Some(0.0f64)),\n+        (0.0f64, -1.0f64, Some(0.0f64)),\n+        (NAN, NAN, None),\n+        (NAN, 1.0f64, None),\n+        (1.0f64, NAN, None)\n+    ];\n+\n+    for &(a, b, result) in data_integer.iter() {\n+        assert!(partial_max(a, b) == result);\n+    }\n+\n+    for &(a, b, result) in data_float.iter() {\n+        assert!(partial_max(a, b) == result);\n+    }\n+}\n+\n #[test]\n fn test_user_defined_eq() {\n     // Our type."}]}