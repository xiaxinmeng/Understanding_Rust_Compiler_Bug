{"sha": "afb1e193efbf012b9258542d45450454f3f1cbd6", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmYjFlMTkzZWZiZjAxMmI5MjU4NTQyZDQ1NDUwNDU0ZjNmMWNiZDY=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-01-15T08:55:32Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-01-15T10:49:34Z"}, "message": "Rollup merge of #47368 - chrisvittal:nll-tests, r=nikomatsakis\n\nAdd NLL tests for #46557 and #38899\n\nThis adapts the sample code from the two issues into test code.\n\nCloses #46557\nCloses #38899\n\nr? @nikomatsakis", "tree": {"sha": "1c178690f0d4e26af138cb6a92755544cb945948", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1c178690f0d4e26af138cb6a92755544cb945948"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/afb1e193efbf012b9258542d45450454f3f1cbd6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlpchz8ACgkQ/vbIBR0O\nATzi4w/+KcuRmgy4Ng3HxJwkWrZki+qw9BCrGsX5UoARh3pyg9d8ZNUeEeyuy6Dk\n1TaH2uC0eJI7uUSj5+S8k70P25M7HvL/1L2Pr1ywdBKjg9uBVqZruEhkFIvZ9mm7\ntZZrFdCU26VXEJwYa6zFK8z7xbfEk0xlR2LMR9Z7qOBiWOwfiGMTyNgw5RvBJJGB\nrLh9yXLbaRYAmCNBBEnBEA+tlmpL8/1zgvD98tYDUBPWRC7nYsV0taxDLa8SrQH9\nE1uZqgIJdV0Xwa/YGSc/On2ONO8DtWEgRz3qQF/Rr9buJ/6E44pP7Mnc9LE5hRFe\nzPFdHD/YjbAWqRO9jjhAiId54t+tQWWeeH0iUcFSm6wEVPo8w/TcpyyrhBQk/EH/\ntJfIwDuD/37hTzbMcKM1ADLoG9bj1CN4cltt2H82AXbc2oYUOJyQwvKIFNAdp20w\nE3iilHJ0Faj3CYyLI0eBQQF0rUt+Z+QtyUDHVEOPqMO6IGiVghZdUhzc76U8+WMK\nfDrfsF8jbSZu1OD/48NHBAfAhtNMOCSsb+DqvFyQ537HqP4OU7LElUIB7LqPJJWU\n9t6oX1qzrM2sJD7eVNXS/5SKHwnmFTD/tf0iMLQarHpZIBhkCs4o2/hoGPWRobTf\nrsbty5aWF5h/iTvoTkYC4ci8ooCp2wlZOJcyeE1Vf9WHSU/Em5w=\n=kelz\n-----END PGP SIGNATURE-----", "payload": "tree 1c178690f0d4e26af138cb6a92755544cb945948\nparent 6966f335ac7037900831007022f8d655bc186904\nparent e14720bc7b9f9be8bb072cfdda2b41bdabd9c6e1\nauthor kennytm <kennytm@gmail.com> 1516006532 +0800\ncommitter kennytm <kennytm@gmail.com> 1516013374 +0800\n\nRollup merge of #47368 - chrisvittal:nll-tests, r=nikomatsakis\n\nAdd NLL tests for #46557 and #38899\n\nThis adapts the sample code from the two issues into test code.\n\nCloses #46557\nCloses #38899\n\nr? @nikomatsakis\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/afb1e193efbf012b9258542d45450454f3f1cbd6", "html_url": "https://github.com/rust-lang/rust/commit/afb1e193efbf012b9258542d45450454f3f1cbd6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/afb1e193efbf012b9258542d45450454f3f1cbd6/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6966f335ac7037900831007022f8d655bc186904", "url": "https://api.github.com/repos/rust-lang/rust/commits/6966f335ac7037900831007022f8d655bc186904", "html_url": "https://github.com/rust-lang/rust/commit/6966f335ac7037900831007022f8d655bc186904"}, {"sha": "e14720bc7b9f9be8bb072cfdda2b41bdabd9c6e1", "url": "https://api.github.com/repos/rust-lang/rust/commits/e14720bc7b9f9be8bb072cfdda2b41bdabd9c6e1", "html_url": "https://github.com/rust-lang/rust/commit/e14720bc7b9f9be8bb072cfdda2b41bdabd9c6e1"}], "stats": {"total": 75, "additions": 75, "deletions": 0}, "files": [{"sha": "d7c15851418b1d0cc82c57c3649b730f22da1ea2", "filename": "src/test/ui/nll/borrowed-referent-issue-38899.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Fborrowed-referent-issue-38899.rs", "raw_url": "https://github.com/rust-lang/rust/raw/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Fborrowed-referent-issue-38899.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fborrowed-referent-issue-38899.rs?ref=afb1e193efbf012b9258542d45450454f3f1cbd6", "patch": "@@ -0,0 +1,30 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Regression test for issue #38899\n+\n+#![feature(nll)]\n+#![allow(dead_code)]\n+\n+pub struct Block<'a> {\n+    current: &'a u8,\n+    unrelated: &'a u8,\n+}\n+\n+fn bump<'a>(mut block: &mut Block<'a>) {\n+    let x = &mut block;\n+    println!(\"{}\", x.current);\n+    let p: &'a u8 = &*block.current;\n+    //~^ ERROR cannot borrow `*block.current` as immutable because it is also borrowed as mutable\n+    drop(x);\n+    drop(p);\n+}\n+\n+fn main() {}"}, {"sha": "3031fec2d0b2173e34925938b604e292ce22907f", "filename": "src/test/ui/nll/borrowed-referent-issue-38899.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Fborrowed-referent-issue-38899.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Fborrowed-referent-issue-38899.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Fborrowed-referent-issue-38899.stderr?ref=afb1e193efbf012b9258542d45450454f3f1cbd6", "patch": "@@ -0,0 +1,11 @@\n+error[E0502]: cannot borrow `*block.current` as immutable because it is also borrowed as mutable\n+  --> $DIR/borrowed-referent-issue-38899.rs:24:21\n+   |\n+22 |     let x = &mut block;\n+   |             ---------- mutable borrow occurs here\n+23 |     println!(\"{}\", x.current);\n+24 |     let p: &'a u8 = &*block.current;\n+   |                     ^^^^^^^^^^^^^^^ immutable borrow occurs here\n+\n+error: aborting due to previous error\n+"}, {"sha": "79150f340cad84f4feb9fef1db883720aca0c6a6", "filename": "src/test/ui/nll/return-ref-mut-issue-46557.rs", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Freturn-ref-mut-issue-46557.rs", "raw_url": "https://github.com/rust-lang/rust/raw/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Freturn-ref-mut-issue-46557.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Freturn-ref-mut-issue-46557.rs?ref=afb1e193efbf012b9258542d45450454f3f1cbd6", "patch": "@@ -0,0 +1,21 @@\n+// Copyright 2018 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+// Regression test for issue #46557\n+\n+#![feature(nll)]\n+#![allow(dead_code)]\n+\n+fn gimme_static_mut() -> &'static mut u32 {\n+    let ref mut x = 1234543; //~ ERROR borrowed value does not live long enough [E0597]\n+    x\n+}\n+\n+fn main() {}"}, {"sha": "763e2bfd8929447f270a2d7bc6b9d9a74d9ad6d0", "filename": "src/test/ui/nll/return-ref-mut-issue-46557.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Freturn-ref-mut-issue-46557.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/afb1e193efbf012b9258542d45450454f3f1cbd6/src%2Ftest%2Fui%2Fnll%2Freturn-ref-mut-issue-46557.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fnll%2Freturn-ref-mut-issue-46557.stderr?ref=afb1e193efbf012b9258542d45450454f3f1cbd6", "patch": "@@ -0,0 +1,13 @@\n+error[E0597]: borrowed value does not live long enough\n+  --> $DIR/return-ref-mut-issue-46557.rs:17:21\n+   |\n+17 |     let ref mut x = 1234543; //~ ERROR borrowed value does not live long enough [E0597]\n+   |                     ^^^^^^^ temporary value does not live long enough\n+18 |     x\n+19 | }\n+   |  - temporary value only lives until here\n+   |\n+   = note: borrowed value must be valid for lifetime '_#2r...\n+\n+error: aborting due to previous error\n+"}]}