{"sha": "9d423950cc141e110242ff1973f2d7b84c719a86", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkNDIzOTUwY2MxNDFlMTEwMjQyZmYxOTczZjJkN2I4NGM3MTlhODY=", "commit": {"author": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-02-17T21:39:50Z"}, "committer": {"name": "Dylan MacKenzie", "email": "ecstaticmorse@gmail.com", "date": "2020-02-17T21:39:50Z"}, "message": "Use doc comment for explanation of `shared_borrow_allows_mutation`", "tree": {"sha": "036cc36e6f1b0608a5cfcc834131dcdd4e4d643f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/036cc36e6f1b0608a5cfcc834131dcdd4e4d643f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d423950cc141e110242ff1973f2d7b84c719a86", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d423950cc141e110242ff1973f2d7b84c719a86", "html_url": "https://github.com/rust-lang/rust/commit/9d423950cc141e110242ff1973f2d7b84c719a86", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d423950cc141e110242ff1973f2d7b84c719a86/comments", "author": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ecstatic-morse", "id": 29463364, "node_id": "MDQ6VXNlcjI5NDYzMzY0", "avatar_url": "https://avatars.githubusercontent.com/u/29463364?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ecstatic-morse", "html_url": "https://github.com/ecstatic-morse", "followers_url": "https://api.github.com/users/ecstatic-morse/followers", "following_url": "https://api.github.com/users/ecstatic-morse/following{/other_user}", "gists_url": "https://api.github.com/users/ecstatic-morse/gists{/gist_id}", "starred_url": "https://api.github.com/users/ecstatic-morse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ecstatic-morse/subscriptions", "organizations_url": "https://api.github.com/users/ecstatic-morse/orgs", "repos_url": "https://api.github.com/users/ecstatic-morse/repos", "events_url": "https://api.github.com/users/ecstatic-morse/events{/privacy}", "received_events_url": "https://api.github.com/users/ecstatic-morse/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "668d2fe807068073647f9c92d81ff0e7b9ab8486", "url": "https://api.github.com/repos/rust-lang/rust/commits/668d2fe807068073647f9c92d81ff0e7b9ab8486", "html_url": "https://github.com/rust-lang/rust/commit/668d2fe807068073647f9c92d81ff0e7b9ab8486"}], "stats": {"total": 18, "additions": 9, "deletions": 9}, "files": [{"sha": "44693c50eac9ccc827b8ce503917b78347ef94b8", "filename": "src/librustc_mir/dataflow/impls/borrowed_locals.rs", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9d423950cc141e110242ff1973f2d7b84c719a86/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrowed_locals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d423950cc141e110242ff1973f2d7b84c719a86/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrowed_locals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fimpls%2Fborrowed_locals.rs?ref=9d423950cc141e110242ff1973f2d7b84c719a86", "patch": "@@ -221,15 +221,15 @@ pub struct MutBorrow<'mir, 'tcx> {\n }\n \n impl MutBorrow<'mir, 'tcx> {\n-    // `&` and `&raw` only allow mutation if the borrowed place is `!Freeze`.\n-    //\n-    // This assumes that it is UB to take the address of a struct field whose type is\n-    // `Freeze`, then use pointer arithmetic to derive a pointer to a *different* field of\n-    // that same struct whose type is `!Freeze`. If we decide that this is not UB, we will\n-    // have to check the type of the borrowed **local** instead of the borrowed **place**\n-    // below. See [rust-lang/unsafe-code-guidelines#134].\n-    //\n-    // [rust-lang/unsafe-code-guidelines#134]: https://github.com/rust-lang/unsafe-code-guidelines/issues/134\n+    /// `&` and `&raw` only allow mutation if the borrowed place is `!Freeze`.\n+    ///\n+    /// This assumes that it is UB to take the address of a struct field whose type is\n+    /// `Freeze`, then use pointer arithmetic to derive a pointer to a *different* field of\n+    /// that same struct whose type is `!Freeze`. If we decide that this is not UB, we will\n+    /// have to check the type of the borrowed **local** instead of the borrowed **place**\n+    /// below. See [rust-lang/unsafe-code-guidelines#134].\n+    ///\n+    /// [rust-lang/unsafe-code-guidelines#134]: https://github.com/rust-lang/unsafe-code-guidelines/issues/134\n     fn shared_borrow_allows_mutation(&self, place: &Place<'tcx>) -> bool {\n         !place.ty(self.body, self.tcx).ty.is_freeze(self.tcx, self.param_env, DUMMY_SP)\n     }"}]}