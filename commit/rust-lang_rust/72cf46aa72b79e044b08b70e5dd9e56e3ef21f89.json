{"sha": "72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "node_id": "C_kwDOAAsO6NoAKDcyY2Y0NmFhNzJiNzllMDQ0YjA4YjcwZTVkZDllNTZlM2VmMjFmODk", "commit": {"author": {"name": "Wim Looman", "email": "git@nemo157.com", "date": "2022-09-12T18:10:35Z"}, "committer": {"name": "Wim Looman", "email": "git@nemo157.com", "date": "2022-09-12T19:20:24Z"}, "message": "Feature gate the rustdoc::missing_doc_code_examples lint", "tree": {"sha": "10bf2770c8b29c57d889c8dc020267de46057968", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10bf2770c8b29c57d889c8dc020267de46057968"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIYEABYIAC4WIQSil6aeYAADwGp0ncHG9XSMbdFgewUCYx+GehAcZ2l0QG5lbW8x\nNTcuY29tAAoJEMb1dIxt0WB7vEEA/3vE4LuIn54A9cGJ8ES+KRL3RyH6PxSEHvFa\nuOj3OrYKAQCLfnHvtAPzM291aXPHGkLrkJ2iubFmoSLsTqmcu+IiAg==\n=1NVt\n-----END PGP SIGNATURE-----", "payload": "tree 10bf2770c8b29c57d889c8dc020267de46057968\nparent fd1a399c4f3d0510b0c7528a298bc597d113856d\nauthor Wim Looman <git@nemo157.com> 1663006235 +0200\ncommitter Wim Looman <git@nemo157.com> 1663010424 +0200\n\nFeature gate the rustdoc::missing_doc_code_examples lint\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "html_url": "https://github.com/rust-lang/rust/commit/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/comments", "author": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Nemo157", "id": 81079, "node_id": "MDQ6VXNlcjgxMDc5", "avatar_url": "https://avatars.githubusercontent.com/u/81079?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nemo157", "html_url": "https://github.com/Nemo157", "followers_url": "https://api.github.com/users/Nemo157/followers", "following_url": "https://api.github.com/users/Nemo157/following{/other_user}", "gists_url": "https://api.github.com/users/Nemo157/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nemo157/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nemo157/subscriptions", "organizations_url": "https://api.github.com/users/Nemo157/orgs", "repos_url": "https://api.github.com/users/Nemo157/repos", "events_url": "https://api.github.com/users/Nemo157/events{/privacy}", "received_events_url": "https://api.github.com/users/Nemo157/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fd1a399c4f3d0510b0c7528a298bc597d113856d", "url": "https://api.github.com/repos/rust-lang/rust/commits/fd1a399c4f3d0510b0c7528a298bc597d113856d", "html_url": "https://github.com/rust-lang/rust/commit/fd1a399c4f3d0510b0c7528a298bc597d113856d"}], "stats": {"total": 130, "additions": 93, "deletions": 37}, "files": [{"sha": "2cbf348f13a1b84cc63d65de03b55ac644ed8f69", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -221,6 +221,8 @@ declare_features! (\n     (active, rustc_private, \"1.0.0\", Some(27812), None),\n     /// Allows using internal rustdoc features like `doc(primitive)` or `doc(keyword)`.\n     (active, rustdoc_internals, \"1.58.0\", Some(90418), None),\n+    /// Allows using the `rustdoc::missing_doc_code_examples` lint\n+    (active, rustdoc_missing_doc_code_examples, \"1.31.0\", Some(101730), None),\n     /// Allows using `#[start]` on a function indicating that it is the program entrypoint.\n     (active, start, \"1.0.0\", Some(29633), None),\n     /// Allows using `#[structural_match]` which indicates that a type is structurally matchable."}, {"sha": "1779ff4bcf1dc2aa8c4a9ea3b492953de7863a54", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1292,6 +1292,7 @@ symbols! {\n         rustc_variance,\n         rustdoc,\n         rustdoc_internals,\n+        rustdoc_missing_doc_code_examples,\n         rustfmt,\n         rvalue_static_promotion,\n         s,"}, {"sha": "e76c19a61c541f077e9f68ffc320049c44db6ebf", "filename": "src/librustdoc/lint.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Flibrustdoc%2Flint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Flibrustdoc%2Flint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flint.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -64,9 +64,13 @@ where\n }\n \n macro_rules! declare_rustdoc_lint {\n-    ($(#[$attr:meta])* $name: ident, $level: ident, $descr: literal $(,)?) => {\n+    (\n+        $(#[$attr:meta])* $name: ident, $level: ident, $descr: literal $(,)?\n+        $(@feature_gate = $gate:expr;)?\n+    ) => {\n         declare_tool_lint! {\n             $(#[$attr])* pub rustdoc::$name, $level, $descr\n+            $(, @feature_gate = $gate;)?\n         }\n     }\n }\n@@ -123,7 +127,8 @@ declare_rustdoc_lint! {\n     /// [rustdoc book]: ../../../rustdoc/lints.html#missing_doc_code_examples\n     MISSING_DOC_CODE_EXAMPLES,\n     Allow,\n-    \"detects publicly-exported items without code samples in their documentation\"\n+    \"detects publicly-exported items without code samples in their documentation\",\n+    @feature_gate = rustc_span::symbol::sym::rustdoc_missing_doc_code_examples;\n }\n \n declare_rustdoc_lint! {"}, {"sha": "55d5f303d345289eb84797d982f91f9356ba78af", "filename": "src/librustdoc/passes/check_doc_test_visibility.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Flibrustdoc%2Fpasses%2Fcheck_doc_test_visibility.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Flibrustdoc%2Fpasses%2Fcheck_doc_test_visibility.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fcheck_doc_test_visibility.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -117,7 +117,7 @@ pub(crate) fn look_for_tests<'tcx>(cx: &DocContext<'tcx>, dox: &str, item: &Item\n \n     find_testable_code(dox, &mut tests, ErrorCodes::No, false, None);\n \n-    if tests.found_tests == 0 && cx.tcx.sess.is_nightly_build() {\n+    if tests.found_tests == 0 && cx.tcx.features().rustdoc_missing_doc_code_examples {\n         if should_have_doc_example(cx, item) {\n             debug!(\"reporting error for {:?} (hir_id={:?})\", item, hir_id);\n             let sp = item.attr_span(cx.tcx);"}, {"sha": "c5e1759ee2d1d18fd805114908639b31f9c8f7c1", "filename": "src/test/rustdoc-ui/check-fail.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,5 +1,6 @@\n // compile-flags: -Z unstable-options --check\n \n+#![feature(rustdoc_missing_doc_code_examples)]\n #![deny(missing_docs)]\n #![deny(rustdoc::all)]\n "}, {"sha": "217b89d935bf95f17349cffe74c910d2b42f2690", "filename": "src/test/rustdoc-ui/check-fail.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck-fail.stderr?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,30 +1,30 @@\n error: missing documentation for a function\n-  --> $DIR/check-fail.rs:11:1\n+  --> $DIR/check-fail.rs:12:1\n    |\n LL | pub fn foo() {}\n    | ^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n-  --> $DIR/check-fail.rs:3:9\n+  --> $DIR/check-fail.rs:4:9\n    |\n LL | #![deny(missing_docs)]\n    |         ^^^^^^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/check-fail.rs:11:1\n+  --> $DIR/check-fail.rs:12:1\n    |\n LL | pub fn foo() {}\n    | ^^^^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n-  --> $DIR/check-fail.rs:4:9\n+  --> $DIR/check-fail.rs:5:9\n    |\n LL | #![deny(rustdoc::all)]\n    |         ^^^^^^^^^^^^\n    = note: `#[deny(rustdoc::missing_doc_code_examples)]` implied by `#[deny(rustdoc::all)]`\n \n error: unknown attribute `testharness`. Did you mean `test_harness`?\n-  --> $DIR/check-fail.rs:6:1\n+  --> $DIR/check-fail.rs:7:1\n    |\n LL | / //! ```rust,testharness\n LL | |\n@@ -36,7 +36,7 @@ LL | | //! ```\n    = help: the code block will either not be tested if not marked as a rust one or the code will be wrapped inside a main function\n \n error: unknown attribute `testharness`. Did you mean `test_harness`?\n-  --> $DIR/check-fail.rs:15:1\n+  --> $DIR/check-fail.rs:16:1\n    |\n LL | / /// hello\n LL | |"}, {"sha": "f70b033615139da5f708d95cfc9685caf4e0febc", "filename": "src/test/rustdoc-ui/check.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -2,9 +2,11 @@\n // compile-flags: -Z unstable-options --check\n // normalize-stderr-test: \"nightly|beta|1\\.[0-9][0-9]\\.[0-9]\" -> \"$$CHANNEL\"\n \n-#![warn(missing_docs)]\n+#![feature(rustdoc_missing_doc_code_examples)]\n //~^ WARN\n //~^^ WARN\n+\n+#![warn(missing_docs)]\n #![warn(rustdoc::all)]\n \n pub fn foo() {}"}, {"sha": "78ae65d313a700ebc4dc833bc3e196245a91bc98", "filename": "src/test/rustdoc-ui/check.stderr", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fcheck.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fcheck.stderr?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,30 +1,31 @@\n warning: missing documentation for the crate\n   --> $DIR/check.rs:5:1\n    |\n-LL | / #![warn(missing_docs)]\n+LL | / #![feature(rustdoc_missing_doc_code_examples)]\n LL | |\n LL | |\n-LL | | #![warn(rustdoc::all)]\n+LL | |\n+...  |\n LL | |\n LL | | pub fn foo() {}\n    | |_______________^\n    |\n note: the lint level is defined here\n-  --> $DIR/check.rs:5:9\n+  --> $DIR/check.rs:9:9\n    |\n LL | #![warn(missing_docs)]\n    |         ^^^^^^^^^^^^\n \n warning: missing documentation for a function\n-  --> $DIR/check.rs:10:1\n+  --> $DIR/check.rs:12:1\n    |\n LL | pub fn foo() {}\n    | ^^^^^^^^^^^^\n \n warning: no documentation found for this crate's top-level module\n    |\n note: the lint level is defined here\n-  --> $DIR/check.rs:8:9\n+  --> $DIR/check.rs:10:9\n    |\n LL | #![warn(rustdoc::all)]\n    |         ^^^^^^^^^^^^\n@@ -35,18 +36,19 @@ LL | #![warn(rustdoc::all)]\n warning: missing code example in this documentation\n   --> $DIR/check.rs:5:1\n    |\n-LL | / #![warn(missing_docs)]\n+LL | / #![feature(rustdoc_missing_doc_code_examples)]\n+LL | |\n LL | |\n LL | |\n-LL | | #![warn(rustdoc::all)]\n+...  |\n LL | |\n LL | | pub fn foo() {}\n    | |_______________^\n    |\n    = note: `#[warn(rustdoc::missing_doc_code_examples)]` implied by `#[warn(rustdoc::all)]`\n \n warning: missing code example in this documentation\n-  --> $DIR/check.rs:10:1\n+  --> $DIR/check.rs:12:1\n    |\n LL | pub fn foo() {}\n    | ^^^^^^^^^^^^^^^"}, {"sha": "86d7c83d335981541cdce90d1f7cc404eefae3cc", "filename": "src/test/rustdoc-ui/doc-without-codeblock.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,4 +1,5 @@\n-#![deny(rustdoc::missing_doc_code_examples)] //~ ERROR missing code example in this documentation\n+#![feature(rustdoc_missing_doc_code_examples)] //~ ERROR missing code example in this documentation\n+#![deny(rustdoc::missing_doc_code_examples)]\n \n /// Some docs.\n //~^ ERROR missing code example in this documentation"}, {"sha": "ebf2a2d54f75c154cb86fb939a8a1bb5c3bc7be0", "filename": "src/test/rustdoc-ui/doc-without-codeblock.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Fdoc-without-codeblock.stderr?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,35 +1,35 @@\n error: missing code example in this documentation\n   --> $DIR/doc-without-codeblock.rs:1:1\n    |\n-LL | / #![deny(rustdoc::missing_doc_code_examples)]\n+LL | / #![feature(rustdoc_missing_doc_code_examples)]\n+LL | | #![deny(rustdoc::missing_doc_code_examples)]\n LL | |\n LL | | /// Some docs.\n-LL | |\n ...  |\n LL | |     }\n LL | | }\n    | |_^\n    |\n note: the lint level is defined here\n-  --> $DIR/doc-without-codeblock.rs:1:9\n+  --> $DIR/doc-without-codeblock.rs:2:9\n    |\n LL | #![deny(rustdoc::missing_doc_code_examples)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/doc-without-codeblock.rs:7:1\n+  --> $DIR/doc-without-codeblock.rs:8:1\n    |\n LL | /// And then, the princess died.\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/doc-without-codeblock.rs:10:5\n+  --> $DIR/doc-without-codeblock.rs:11:5\n    |\n LL |     /// Or maybe not because she saved herself!\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/doc-without-codeblock.rs:3:1\n+  --> $DIR/doc-without-codeblock.rs:4:1\n    |\n LL | /// Some docs.\n    | ^^^^^^^^^^^^^^"}, {"sha": "daba6986864084c0fdd38e6d8c573bf9cf52671b", "filename": "src/test/rustdoc-ui/feature-gate-rustdoc_missing_doc_code_examples.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Ffeature-gate-rustdoc_missing_doc_code_examples.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Ffeature-gate-rustdoc_missing_doc_code_examples.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Ffeature-gate-rustdoc_missing_doc_code_examples.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -0,0 +1,10 @@\n+#![deny(unknown_lints)]\n+//~^ NOTE defined here\n+\n+#![allow(rustdoc::missing_doc_code_examples)]\n+//~^ ERROR unknown lint\n+//~| ERROR unknown lint\n+//~| NOTE lint is unstable\n+//~| NOTE lint is unstable\n+//~| NOTE see issue\n+//~| NOTE see issue"}, {"sha": "517e08aa7c9748bf9d86c2edce370c29fd4f0083", "filename": "src/test/rustdoc-ui/feature-gate-rustdoc_missing_doc_code_examples.stderr", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Ffeature-gate-rustdoc_missing_doc_code_examples.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Ffeature-gate-rustdoc_missing_doc_code_examples.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Ffeature-gate-rustdoc_missing_doc_code_examples.stderr?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -0,0 +1,29 @@\n+error: unknown lint: `rustdoc::missing_doc_code_examples`\n+  --> $DIR/feature-gate-rustdoc_missing_doc_code_examples.rs:4:1\n+   |\n+LL | #![allow(rustdoc::missing_doc_code_examples)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+note: the lint level is defined here\n+  --> $DIR/feature-gate-rustdoc_missing_doc_code_examples.rs:1:9\n+   |\n+LL | #![deny(unknown_lints)]\n+   |         ^^^^^^^^^^^^^\n+   = note: the `rustdoc::missing_doc_code_examples` lint is unstable\n+   = note: see issue #101730 <https://github.com/rust-lang/rust/issues/101730> for more information\n+   = help: add `#![feature(rustdoc_missing_doc_code_examples)]` to the crate attributes to enable\n+\n+error: unknown lint: `rustdoc::missing_doc_code_examples`\n+  --> $DIR/feature-gate-rustdoc_missing_doc_code_examples.rs:4:1\n+   |\n+LL | #![allow(rustdoc::missing_doc_code_examples)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the `rustdoc::missing_doc_code_examples` lint is unstable\n+   = note: see issue #101730 <https://github.com/rust-lang/rust/issues/101730> for more information\n+   = help: add `#![feature(rustdoc_missing_doc_code_examples)]` to the crate attributes to enable\n+\n+error: Compilation failed, aborting rustdoc\n+\n+error: aborting due to 3 previous errors\n+"}, {"sha": "09aca6d2b2742df0130bb92126b017ee6f4d2c74", "filename": "src/test/rustdoc-ui/lint-group.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-group.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-group.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-group.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,3 +1,5 @@\n+#![feature(rustdoc_missing_doc_code_examples)]\n+\n //! Documenting the kinds of lints emitted by rustdoc.\n //!\n //! ```"}, {"sha": "5336c0445747a58d123cd660ab2c0dbf6e35df73", "filename": "src/test/rustdoc-ui/lint-group.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-group.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-group.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-group.stderr?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,18 +1,18 @@\n error: missing code example in this documentation\n-  --> $DIR/lint-group.rs:16:1\n+  --> $DIR/lint-group.rs:18:1\n    |\n LL | /// wait, this doesn't have a doctest?\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n-  --> $DIR/lint-group.rs:7:9\n+  --> $DIR/lint-group.rs:9:9\n    |\n LL | #![deny(rustdoc::all)]\n    |         ^^^^^^^^^^^^\n    = note: `#[deny(rustdoc::missing_doc_code_examples)]` implied by `#[deny(rustdoc::all)]`\n \n error: documentation test in private item\n-  --> $DIR/lint-group.rs:19:1\n+  --> $DIR/lint-group.rs:21:1\n    |\n LL | / /// wait, this *does* have a doctest?\n LL | | ///\n@@ -24,13 +24,13 @@ LL | | /// ```\n    = note: `#[deny(rustdoc::private_doc_tests)]` implied by `#[deny(rustdoc::all)]`\n \n error: missing code example in this documentation\n-  --> $DIR/lint-group.rs:26:1\n+  --> $DIR/lint-group.rs:28:1\n    |\n LL | /// <unknown>\n    | ^^^^^^^^^^^^^\n \n error: unresolved link to `error`\n-  --> $DIR/lint-group.rs:9:29\n+  --> $DIR/lint-group.rs:11:29\n    |\n LL | /// what up, let's make an [error]\n    |                             ^^^^^ no item named `error` in scope\n@@ -39,7 +39,7 @@ LL | /// what up, let's make an [error]\n    = help: to escape `[` and `]` characters, add '\\' before them like `\\[` or `\\]`\n \n error: unclosed HTML tag `unknown`\n-  --> $DIR/lint-group.rs:26:5\n+  --> $DIR/lint-group.rs:28:5\n    |\n LL | /// <unknown>\n    |     ^^^^^^^^^"}, {"sha": "40f35728d79b0ba2f8cc09db394258119f96d54d", "filename": "src/test/rustdoc-ui/lint-missing-doc-code-example.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.rs?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,3 +1,4 @@\n+#![feature(rustdoc_missing_doc_code_examples)]\n #![deny(missing_docs)]\n #![deny(rustdoc::missing_doc_code_examples)]\n "}, {"sha": "f9331250154d7923c4a422fadfe4a9a55d94463b", "filename": "src/test/rustdoc-ui/lint-missing-doc-code-example.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/72cf46aa72b79e044b08b70e5dd9e56e3ef21f89/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Flint-missing-doc-code-example.stderr?ref=72cf46aa72b79e044b08b70e5dd9e56e3ef21f89", "patch": "@@ -1,35 +1,35 @@\n error: missing code example in this documentation\n-  --> $DIR/lint-missing-doc-code-example.rs:19:1\n+  --> $DIR/lint-missing-doc-code-example.rs:20:1\n    |\n LL | pub mod module1 {\n    | ^^^^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n-  --> $DIR/lint-missing-doc-code-example.rs:2:9\n+  --> $DIR/lint-missing-doc-code-example.rs:3:9\n    |\n LL | #![deny(rustdoc::missing_doc_code_examples)]\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/lint-missing-doc-code-example.rs:37:3\n+  --> $DIR/lint-missing-doc-code-example.rs:38:3\n    |\n LL |   /// doc\n    |   ^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/lint-missing-doc-code-example.rs:49:1\n+  --> $DIR/lint-missing-doc-code-example.rs:50:1\n    |\n LL | /// Doc\n    | ^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/lint-missing-doc-code-example.rs:56:1\n+  --> $DIR/lint-missing-doc-code-example.rs:57:1\n    |\n LL | /// Doc\n    | ^^^^^^^\n \n error: missing code example in this documentation\n-  --> $DIR/lint-missing-doc-code-example.rs:63:1\n+  --> $DIR/lint-missing-doc-code-example.rs:64:1\n    |\n LL | /// Doc\n    | ^^^^^^^"}]}