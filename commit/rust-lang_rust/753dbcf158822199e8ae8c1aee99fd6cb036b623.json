{"sha": "753dbcf158822199e8ae8c1aee99fd6cb036b623", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc1M2RiY2YxNTg4MjIxOTllOGFlOGMxYWVlOTlmZDZjYjAzNmI2MjM=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-01-12T08:41:36Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-01-12T08:41:36Z"}, "message": "add a test for dereferencing a pointer to a `!`", "tree": {"sha": "fc3a70081d88f336384925f36a248a87c652ee18", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fc3a70081d88f336384925f36a248a87c652ee18"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/753dbcf158822199e8ae8c1aee99fd6cb036b623", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJYd0FAAAoJEFbW7qD8Z6xGh64P/A5082mlVgqg85k0vcu3MyxW\n7FI1Zvle5rDNncIv4LJQVcLHlmiVvMbKNXtX8IWUZeUuRa/1mUzmVFio3SqH3VHT\nfdc0XABnysAITWDQMawVmZYLTyxv0fxRMHWRfxcN8M1MDIKH1saqSUGpDcLARmhu\nUQlMBJ34yuo3DS51aZUDVZtjCHNB6sn1PFOl9rD1jes15d834KnsxWr/gRi8V/zX\nSypaLq8fOZGLhNae0R7knCFBv/HZxh/SD7KFdyZzuTCX44cg8pzuMaYjPPSCNeJu\n32xLIPzAr/QY7plqkBHM5ucpjWrkJhmG0xXrsH8UU6Lh7C6wK3vf8bQGtzLF2xAO\nLJVqyghry9Npf7evICuaxQPNj9bG5DQinWdSaiAPl+sT2fSbUkJ8f++eK0Rss+06\ncsQ/mCkwEd1ZsfYPMh8KPcc2cUGusb1hr8MQSFmMCuxVMcCrGsRMg1zLu4m6zSga\n/XdvXZuUPXgpcvvOUzybsF6xEVHzrZIw4lUz829mVRR1crP2waYhBVY62Ccja9l5\nFkViIP3an07bDGIelgsl3fCmCmK4ZMDE2KPMPUb9hs3m7ym8OFVjQXIItfkwal/J\nx/IkHFzcIT7tbeGum6yWEdk6AEwFu3eM63ILU7mr4t1bw0QzyIDAzqEZVhz2zULD\nBw7tU8YN+beBJmgLO5bX\n=D7B4\n-----END PGP SIGNATURE-----", "payload": "tree fc3a70081d88f336384925f36a248a87c652ee18\nparent 7c486416cb68efcefcf216037d1bcaab60e88133\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1484210496 +0100\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1484210496 +0100\n\nadd a test for dereferencing a pointer to a `!`"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/753dbcf158822199e8ae8c1aee99fd6cb036b623", "html_url": "https://github.com/rust-lang/rust/commit/753dbcf158822199e8ae8c1aee99fd6cb036b623", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/753dbcf158822199e8ae8c1aee99fd6cb036b623/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7c486416cb68efcefcf216037d1bcaab60e88133", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c486416cb68efcefcf216037d1bcaab60e88133", "html_url": "https://github.com/rust-lang/rust/commit/7c486416cb68efcefcf216037d1bcaab60e88133"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "bf1c71f089dbd11f408ba9ec09b5fddbe74ab4b1", "filename": "src/error.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/753dbcf158822199e8ae8c1aee99fd6cb036b623/src%2Ferror.rs", "raw_url": "https://github.com/rust-lang/rust/raw/753dbcf158822199e8ae8c1aee99fd6cb036b623/src%2Ferror.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ferror.rs?ref=753dbcf158822199e8ae8c1aee99fd6cb036b623", "patch": "@@ -52,6 +52,7 @@ pub enum EvalError<'tcx> {\n     ReallocatedFrozenMemory,\n     DeallocatedFrozenMemory,\n     Layout(layout::LayoutError<'tcx>),\n+    Unreachable,\n }\n \n pub type EvalResult<'tcx, T> = Result<T, EvalError<'tcx>>;\n@@ -122,6 +123,8 @@ impl<'tcx> Error for EvalError<'tcx> {\n                 \"rustc layout computation failed\",\n             EvalError::UnterminatedCString(_) =>\n                 \"attempted to get length of a null terminated string, but no null found before end of allocation\",\n+            EvalError::Unreachable =>\n+                \"entered unreachable code\",\n         }\n     }\n "}, {"sha": "1b302523ff2ae75f6cc5aeb746af21c7b53b4d1c", "filename": "src/terminator/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/753dbcf158822199e8ae8c1aee99fd6cb036b623/src%2Fterminator%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/753dbcf158822199e8ae8c1aee99fd6cb036b623/src%2Fterminator%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fterminator%2Fmod.rs?ref=753dbcf158822199e8ae8c1aee99fd6cb036b623", "patch": "@@ -155,7 +155,7 @@ impl<'a, 'tcx> EvalContext<'a, 'tcx> {\n \n             DropAndReplace { .. } => unimplemented!(),\n             Resume => unimplemented!(),\n-            Unreachable => unimplemented!(),\n+            Unreachable => return Err(EvalError::Unreachable),\n         }\n \n         Ok(())"}, {"sha": "5d7e9fec62c24b45ce349742e9ced2b39ad5a93a", "filename": "tests/compile-fail/never_say_never.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/753dbcf158822199e8ae8c1aee99fd6cb036b623/tests%2Fcompile-fail%2Fnever_say_never.rs", "raw_url": "https://github.com/rust-lang/rust/raw/753dbcf158822199e8ae8c1aee99fd6cb036b623/tests%2Fcompile-fail%2Fnever_say_never.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-fail%2Fnever_say_never.rs?ref=753dbcf158822199e8ae8c1aee99fd6cb036b623", "patch": "@@ -0,0 +1,12 @@\n+#![feature(never_type)]\n+#![allow(unreachable_code)]\n+\n+fn main() {\n+    let y = &5;\n+    let x: ! = unsafe {\n+        *(y as *const _ as *const !) //~ ERROR entered unreachable code\n+    };\n+    f(x)\n+}\n+\n+fn f(x: !) -> ! { x }"}]}