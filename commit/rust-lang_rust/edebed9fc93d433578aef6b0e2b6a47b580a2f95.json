{"sha": "edebed9fc93d433578aef6b0e2b6a47b580a2f95", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVkZWJlZDlmYzkzZDQzMzU3OGFlZjZiMGUyYjZhNDdiNTgwYTJmOTU=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-04-08T19:32:38Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-04-08T19:35:44Z"}, "message": "compiletest: Improve no_prefer_dynamic docs\n\nThis adds some extra docs for the `no-prefer-dynamic` header.\n\nAnd also a `s/must_compile_successfully/compile_pass`.\n\n`must_compile_successfully` has been renamed to `compile_pass` at some\npoint in the past and this comment was still referring to the old name.", "tree": {"sha": "efbb8ccdf451179036e3d13d09001a6b1d6b1b67", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/efbb8ccdf451179036e3d13d09001a6b1d6b1b67"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/edebed9fc93d433578aef6b0e2b6a47b580a2f95", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAlyropIQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5iS1D/91NwjEPpEiHmkrobatF9j9fDCm0Y7U65Zc\nxpwJTlAWPEvPtFtjqmy5/IwAO4fgAr8ek4ufIviztPXvFPvVss6YRN3/Z3zQm7Jf\nyTF7NSdVNC0lyLcDagWAU8bRao98JOnl8lqdR8dCzWV83kZSlvgMpBq9CPTo5Zx7\nQ3R4AT4dRrMGCnltir86Peet/CbJKzrUZBII/2KTDRFh/9l1WQUvsydns2eMGBZp\nnfPXh12rXzpaIMrdhaDSPNjTw2h8DE3PY9tW+qadMVfA+0Q+bes7BAf7UPWkwWe/\ngkjysBvBYnCDOgpbY3SHqAQ59JCqBp65D8ewFw+Vk4DGuwiiChE3aaeg32OE7+31\nUyxYLyKo+39XdTduj/eZgIVtofCfdcjlRdVvYoLPUZvA16ReuAOYtFv6d2ypAo2f\nDwQq7DaCKNJ7A8i0ExaSnFRoesmfLtHMOLFCN3TUhc6iMXMAXFKe3qREF2Ds3ivH\nfSK5hRyWN2MmJkMPaCGYVsOGocc1rCVmjv9XnwuUX187Kf9S26nu5wcK37iJnecw\n3oxaWQYMGPn4HLPf2q7km0kISlxNrlIxBeGXz/pbqdctjLemJw/Z98Eu2u7FBJlT\nGX92JeBrD0g5SCtlDnT/olPTUW30CdCVy6JAckmaNXb8ZSjXy5x/nd2Q1nKWqEeK\nYCkaAUPxGw==\n=H1fv\n-----END PGP SIGNATURE-----", "payload": "tree efbb8ccdf451179036e3d13d09001a6b1d6b1b67\nparent f694222887cf31f51e68927716c25736e62f037f\nauthor Philipp Hansch <dev@phansch.net> 1554751958 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1554752144 +0200\n\ncompiletest: Improve no_prefer_dynamic docs\n\nThis adds some extra docs for the `no-prefer-dynamic` header.\n\nAnd also a `s/must_compile_successfully/compile_pass`.\n\n`must_compile_successfully` has been renamed to `compile_pass` at some\npoint in the past and this comment was still referring to the old name.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/edebed9fc93d433578aef6b0e2b6a47b580a2f95", "html_url": "https://github.com/rust-lang/rust/commit/edebed9fc93d433578aef6b0e2b6a47b580a2f95", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/edebed9fc93d433578aef6b0e2b6a47b580a2f95/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f694222887cf31f51e68927716c25736e62f037f", "url": "https://api.github.com/repos/rust-lang/rust/commits/f694222887cf31f51e68927716c25736e62f037f", "html_url": "https://github.com/rust-lang/rust/commit/f694222887cf31f51e68927716c25736e62f037f"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "2fe837e99d33f916f00e4f2b32b3ef7c0520a262", "filename": "src/tools/compiletest/src/header.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/edebed9fc93d433578aef6b0e2b6a47b580a2f95/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/edebed9fc93d433578aef6b0e2b6a47b580a2f95/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fheader.rs?ref=edebed9fc93d433578aef6b0e2b6a47b580a2f95", "patch": "@@ -303,6 +303,10 @@ pub struct TestProps {\n     // For UI tests, allows compiler to generate arbitrary output to stderr\n     pub dont_check_compiler_stderr: bool,\n     // Don't force a --crate-type=dylib flag on the command line\n+    //\n+    // Set this for example if you have an auxiliary test file that contains\n+    // a proc-macro and needs `#![crate_type = \"proc-macro\"]`. This ensures\n+    // that the aux file is compiled as a `proc-macro` and not as a `dylib`.\n     pub no_prefer_dynamic: bool,\n     // Run --pretty expanded when running pretty printing tests\n     pub pretty_expanded: bool,\n@@ -490,7 +494,7 @@ impl TestProps {\n             }\n \n             if !self.compile_pass {\n-                // run-pass implies must_compile_successfully\n+                // run-pass implies compile_pass\n                 self.compile_pass = config.parse_compile_pass(ln) || self.run_pass;\n             }\n "}]}