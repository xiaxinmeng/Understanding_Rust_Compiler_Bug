{"sha": "daab8b2fd03340ea0be91281673c256b02ad8a90", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhYWI4YjJmZDAzMzQwZWEwYmU5MTI4MTY3M2MyNTZiMDJhZDhhOTA=", "commit": {"author": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2020-07-21T10:11:02Z"}, "committer": {"name": "Lauren\u021biu Nicola", "email": "lnicola@dend.ro", "date": "2020-07-21T10:11:51Z"}, "message": "Remove insta dep", "tree": {"sha": "dae0469fcd4a29b480dd2332b58f9941c96a59a5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dae0469fcd4a29b480dd2332b58f9941c96a59a5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/daab8b2fd03340ea0be91281673c256b02ad8a90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/daab8b2fd03340ea0be91281673c256b02ad8a90", "html_url": "https://github.com/rust-lang/rust/commit/daab8b2fd03340ea0be91281673c256b02ad8a90", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/daab8b2fd03340ea0be91281673c256b02ad8a90/comments", "author": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lnicola", "id": 308347, "node_id": "MDQ6VXNlcjMwODM0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/308347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lnicola", "html_url": "https://github.com/lnicola", "followers_url": "https://api.github.com/users/lnicola/followers", "following_url": "https://api.github.com/users/lnicola/following{/other_user}", "gists_url": "https://api.github.com/users/lnicola/gists{/gist_id}", "starred_url": "https://api.github.com/users/lnicola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lnicola/subscriptions", "organizations_url": "https://api.github.com/users/lnicola/orgs", "repos_url": "https://api.github.com/users/lnicola/repos", "events_url": "https://api.github.com/users/lnicola/events{/privacy}", "received_events_url": "https://api.github.com/users/lnicola/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f7e4b99d154fa85e4f37aa9e53d4ffb8f4a0073e", "url": "https://api.github.com/repos/rust-lang/rust/commits/f7e4b99d154fa85e4f37aa9e53d4ffb8f4a0073e", "html_url": "https://github.com/rust-lang/rust/commit/f7e4b99d154fa85e4f37aa9e53d4ffb8f4a0073e"}], "stats": {"total": 95, "additions": 3, "deletions": 92}, "files": [{"sha": "cf4de8bbea04679b914f2a8ba87d5ff5c4707cb5", "filename": "Cargo.lock", "status": "modified", "additions": 0, "deletions": 87, "changes": 87, "blob_url": "https://github.com/rust-lang/rust/blob/daab8b2fd03340ea0be91281673c256b02ad8a90/Cargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/daab8b2fd03340ea0be91281673c256b02ad8a90/Cargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/Cargo.lock?ref=daab8b2fd03340ea0be91281673c256b02ad8a90", "patch": "@@ -205,20 +205,6 @@ dependencies = [\n  \"cc\",\n ]\n \n-[[package]]\n-name = \"console\"\n-version = \"0.11.3\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"8c0994e656bba7b922d8dd1245db90672ffb701e684e45be58f20719d69abc5a\"\n-dependencies = [\n- \"encode_unicode\",\n- \"lazy_static\",\n- \"libc\",\n- \"terminal_size\",\n- \"termios\",\n- \"winapi 0.3.9\",\n-]\n-\n [[package]]\n name = \"crc32fast\"\n version = \"1.2.0\"\n@@ -298,12 +284,6 @@ version = \"0.1.4\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n checksum = \"69b26e475fd29098530e709294e94e661974c851aed42512793f120fed4e199f\"\n \n-[[package]]\n-name = \"dtoa\"\n-version = \"0.4.6\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"134951f4028bdadb9b84baf4232681efbf277da25144b9b0ad65df75946c422b\"\n-\n [[package]]\n name = \"either\"\n version = \"1.5.3\"\n@@ -319,12 +299,6 @@ dependencies = [\n  \"log\",\n ]\n \n-[[package]]\n-name = \"encode_unicode\"\n-version = \"0.3.6\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"a357d28ed41a50f9c765dbfe56cbc04a64e53e5fc58ba79fbc34c10ef3df831f\"\n-\n [[package]]\n name = \"env_logger\"\n version = \"0.7.1\"\n@@ -537,20 +511,6 @@ dependencies = [\n  \"libc\",\n ]\n \n-[[package]]\n-name = \"insta\"\n-version = \"0.16.1\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"617e921abc813f96a3b00958c079e7bf1e2db998f8a04f1546dd967373a418ee\"\n-dependencies = [\n- \"console\",\n- \"difference\",\n- \"lazy_static\",\n- \"serde\",\n- \"serde_json\",\n- \"serde_yaml\",\n-]\n-\n [[package]]\n name = \"instant\"\n version = \"0.1.6\"\n@@ -665,12 +625,6 @@ dependencies = [\n  \"cmake\",\n ]\n \n-[[package]]\n-name = \"linked-hash-map\"\n-version = \"0.5.3\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"8dd5a6d5999d9907cda8ed67bbd137d3af8085216c2ac62de5be860bd41f304a\"\n-\n [[package]]\n name = \"lock_api\"\n version = \"0.4.1\"\n@@ -1128,7 +1082,6 @@ dependencies = [\n  \"chalk-solve\",\n  \"ena\",\n  \"expect\",\n- \"insta\",\n  \"itertools\",\n  \"log\",\n  \"ra_arena\",\n@@ -1659,18 +1612,6 @@ dependencies = [\n  \"syn\",\n ]\n \n-[[package]]\n-name = \"serde_yaml\"\n-version = \"0.8.13\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"ae3e2dd40a7cdc18ca80db804b7f461a39bb721160a85c9a1fa30134bf3c02a5\"\n-dependencies = [\n- \"dtoa\",\n- \"linked-hash-map\",\n- \"serde\",\n- \"yaml-rust\",\n-]\n-\n [[package]]\n name = \"sharded-slab\"\n version = \"0.0.9\"\n@@ -1757,25 +1698,6 @@ dependencies = [\n  \"winapi-util\",\n ]\n \n-[[package]]\n-name = \"terminal_size\"\n-version = \"0.1.13\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"9a14cd9f8c72704232f0bfc8455c0e861f0ad4eb60cc9ec8a170e231414c1e13\"\n-dependencies = [\n- \"libc\",\n- \"winapi 0.3.9\",\n-]\n-\n-[[package]]\n-name = \"termios\"\n-version = \"0.3.2\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"6f0fcee7b24a25675de40d5bb4de6e41b0df07bc9856295e7e2b3a3600c400c2\"\n-dependencies = [\n- \"libc\",\n-]\n-\n [[package]]\n name = \"test_utils\"\n version = \"0.1.0\"\n@@ -2065,12 +1987,3 @@ dependencies = [\n  \"quote\",\n  \"walkdir\",\n ]\n-\n-[[package]]\n-name = \"yaml-rust\"\n-version = \"0.4.4\"\n-source = \"registry+https://github.com/rust-lang/crates.io-index\"\n-checksum = \"39f0c922f1a334134dc2f7a8b67dc5d25f0735263feec974345ff706bcf20b0d\"\n-dependencies = [\n- \"linked-hash-map\",\n-]"}, {"sha": "cdabb359f264acb3a04694c1fef9afd4724249a7", "filename": "crates/ra_hir_ty/Cargo.toml", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/daab8b2fd03340ea0be91281673c256b02ad8a90/crates%2Fra_hir_ty%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/daab8b2fd03340ea0be91281673c256b02ad8a90/crates%2Fra_hir_ty%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2FCargo.toml?ref=daab8b2fd03340ea0be91281673c256b02ad8a90", "patch": "@@ -33,7 +33,6 @@ chalk-ir = { version = \"0.18.0\" }\n chalk-recursive = { version = \"0.18.0\" }\n \n [dev-dependencies]\n-insta = \"0.16.0\"\n expect = { path = \"../expect\" }\n \n tracing = \"0.1\""}, {"sha": "45bc14c37f1c5b227d87f3376634b78d180e86de", "filename": "crates/ra_hir_ty/src/tests.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/daab8b2fd03340ea0be91281673c256b02ad8a90/crates%2Fra_hir_ty%2Fsrc%2Ftests.rs", "raw_url": "https://github.com/rust-lang/rust/raw/daab8b2fd03340ea0be91281673c256b02ad8a90/crates%2Fra_hir_ty%2Fsrc%2Ftests.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_ty%2Fsrc%2Ftests.rs?ref=daab8b2fd03340ea0be91281673c256b02ad8a90", "patch": "@@ -34,8 +34,8 @@ use crate::{\n };\n \n // These tests compare the inference results for all expressions in a file\n-// against snapshots of the expected results using insta. Use cargo-insta to\n-// update the snapshots.\n+// against snapshots of the expected results using expect. Use\n+// `env UPDATE_EXPECT=1 cargo test -p ra_hir_ty` to update the snapshots.\n \n fn setup_tracing() -> tracing::subscriber::DefaultGuard {\n     use tracing_subscriber::{layer::SubscriberExt, EnvFilter, Registry};"}, {"sha": "d0c6eea61f808c30924f9c0e378724a1ccff8dfd", "filename": "docs/dev/architecture.md", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/daab8b2fd03340ea0be91281673c256b02ad8a90/docs%2Fdev%2Farchitecture.md", "raw_url": "https://github.com/rust-lang/rust/raw/daab8b2fd03340ea0be91281673c256b02ad8a90/docs%2Fdev%2Farchitecture.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/docs%2Fdev%2Farchitecture.md?ref=daab8b2fd03340ea0be91281673c256b02ad8a90", "patch": "@@ -170,8 +170,7 @@ The innermost and most elaborate boundary is `hir`. It has a much richer\n vocabulary of types than `ide`, but the basic testing setup is the same: we\n create a database, run some queries, assert result.\n \n-For comparisons, we use [insta](https://github.com/mitsuhiko/insta/) library for\n-snapshot testing.\n+For comparisons, we use the `expect` crate for snapshot testing.\n \n To test various analysis corner cases and avoid forgetting about old tests, we\n use so-called marks. See the `marks` module in the `test_utils` crate for more."}]}