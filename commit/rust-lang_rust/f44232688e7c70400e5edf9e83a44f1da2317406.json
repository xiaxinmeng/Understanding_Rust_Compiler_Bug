{"sha": "f44232688e7c70400e5edf9e83a44f1da2317406", "node_id": "MDY6Q29tbWl0NzI0NzEyOmY0NDIzMjY4OGU3YzcwNDAwZTVlZGY5ZTgzYTQ0ZjFkYTIzMTc0MDY=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-10-14T16:01:14Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-10-14T16:24:27Z"}, "message": "Save current highlighted item in search tab", "tree": {"sha": "01d9f03ec22d37dffb58feb06a91a77652a192db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/01d9f03ec22d37dffb58feb06a91a77652a192db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f44232688e7c70400e5edf9e83a44f1da2317406", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f44232688e7c70400e5edf9e83a44f1da2317406", "html_url": "https://github.com/rust-lang/rust/commit/f44232688e7c70400e5edf9e83a44f1da2317406", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f44232688e7c70400e5edf9e83a44f1da2317406/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "45bb03f60c38be48b6ec06c95a4c6fa9b5c6ffba", "url": "https://api.github.com/repos/rust-lang/rust/commits/45bb03f60c38be48b6ec06c95a4c6fa9b5c6ffba", "html_url": "https://github.com/rust-lang/rust/commit/45bb03f60c38be48b6ec06c95a4c6fa9b5c6ffba"}], "stats": {"total": 51, "additions": 34, "deletions": 17}, "files": [{"sha": "93e4af1d620f1b00b4a2ad587fb30a852751071f", "filename": "src/librustdoc/html/layout.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f44232688e7c70400e5edf9e83a44f1da2317406/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f44232688e7c70400e5edf9e83a44f1da2317406/src%2Flibrustdoc%2Fhtml%2Flayout.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Flayout.rs?ref=f44232688e7c70400e5edf9e83a44f1da2317406", "patch": "@@ -101,6 +101,8 @@ r##\"<!DOCTYPE html>\n                     <dd>Move up in search results</dd>\n                     <dt>&rarrb;</dt>\n                     <dd>Move down in search results</dd>\n+                    <dt>\u21b9</dt>\n+                    <dd>Switch tab</dd>\n                     <dt>&#9166;</dt>\n                     <dd>Go to active search result</dd>\n                     <dt>+</dt>"}, {"sha": "015611db3ffdf71ce3f3edd3710335c6744df7c8", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 31, "deletions": 16, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/f44232688e7c70400e5edf9e83a44f1da2317406/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/f44232688e7c70400e5edf9e83a44f1da2317406/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=f44232688e7c70400e5edf9e83a44f1da2317406", "patch": "@@ -701,41 +701,56 @@\n             });\n \n             var search_input = document.getElementsByClassName('search-input')[0];\n-            search_input.onkeydown = null;\n             search_input.onkeydown = function(e) {\n-                var actives = [];\n+                // \"actives\" references the currently highlighted item in each search tab.\n+                // Each array in \"actives\" represents a tab.\n+                var actives = [[], [], []];\n+                // \"current\" is used to know which tab we're looking into.\n+                var current = 0;\n                 onEach(document.getElementsByClassName('search-results'), function(e) {\n-                    onEach(document.getElementsByClassName('highlighted'), function(e) {\n-                        actives.push(e);\n+                    onEach(e.getElementsByClassName('highlighted'), function(e) {\n+                        actives[current].push(e);\n                     });\n+                    current += 1;\n                 });\n \n                 if (e.which === 38) { // up\n-                    if (!actives.length || !actives[0].previousElementSibling) {\n+                    if (!actives[currentTab].length ||\n+                        !actives[currentTab][0].previousElementSibling) {\n                         return;\n                     }\n \n-                    addClass(actives[0].previousElementSibling, 'highlighted');\n-                    removeClass(actives[0], 'highlighted');\n+                    addClass(actives[currentTab][0].previousElementSibling, 'highlighted');\n+                    removeClass(actives[currentTab][0], 'highlighted');\n                 } else if (e.which === 40) { // down\n-                    if (!actives.length) {\n+                    if (!actives[currentTab].length) {\n                         var results = document.getElementsByClassName('search-results');\n                         if (results.length > 0) {\n-                            var res = results[0].getElementsByClassName('result');\n+                            var res = results[currentTab].getElementsByClassName('result');\n                             if (res.length > 0) {\n                                 addClass(res[0], 'highlighted');\n                             }\n                         }\n-                    } else if (actives[0].nextElementSibling) {\n-                        addClass(actives[0].nextElementSibling, 'highlighted');\n-                        removeClass(actives[0], 'highlighted');\n+                    } else if (actives[currentTab][0].nextElementSibling) {\n+                        addClass(actives[currentTab][0].nextElementSibling, 'highlighted');\n+                        removeClass(actives[currentTab][0], 'highlighted');\n                     }\n                 } else if (e.which === 13) { // return\n-                    if (actives.length) {\n-                        document.location.href = actives[0].getElementsByTagName('a')[0].href;\n+                    if (actives[currentTab].length) {\n+                        document.location.href =\n+                            actives[currentTab][0].getElementsByTagName('a')[0].href;\n                     }\n-                } else if (actives.length > 0) {\n-                    removeClass(actives[0], 'highlighted');\n+                } else if (e.which === 9) { // tab\n+                    if (e.shiftKey) {\n+                        printTab(currentTab > 0 ? currentTab - 1 : 2);\n+                    } else {\n+                        printTab(currentTab > 1 ? 0 : currentTab + 1);\n+                    }\n+                    e.preventDefault();\n+                } else if (e.which === 16) { // shift\n+                    // Does nothing, it's just to avoid losing \"focus\" on the highlighted element.\n+                } else if (actives[currentTab].length > 0) {\n+                    removeClass(actives[currentTab][0], 'highlighted');\n                 }\n             };\n         }"}, {"sha": "467fab888ab112d329e1b53244b2a00de5ff9b54", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f44232688e7c70400e5edf9e83a44f1da2317406/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/f44232688e7c70400e5edf9e83a44f1da2317406/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=f44232688e7c70400e5edf9e83a44f1da2317406", "patch": "@@ -552,7 +552,7 @@ body.blur > :not(#help) {\n \tflex: 0 0 auto;\n \tbox-shadow: 0 0 6px rgba(0,0,0,.2);\n \twidth: 550px;\n-\theight: 330px;\n+\theight: 354px;\n \tborder: 1px solid;\n }\n #help dt {"}]}