{"sha": "fc2702c96c0db560f55683e4cd33075c054ed062", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZjMjcwMmM5NmMwZGI1NjBmNTU2ODNlNGNkMzMwNzVjMDU0ZWQwNjI=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-02-19T22:44:53Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2020-02-19T23:14:55Z"}, "message": "Add regression test", "tree": {"sha": "d6c5a5a5642dc6a2477f94f600b290ff9b905732", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d6c5a5a5642dc6a2477f94f600b290ff9b905732"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fc2702c96c0db560f55683e4cd33075c054ed062", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fc2702c96c0db560f55683e4cd33075c054ed062", "html_url": "https://github.com/rust-lang/rust/commit/fc2702c96c0db560f55683e4cd33075c054ed062", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fc2702c96c0db560f55683e4cd33075c054ed062/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "66b1ae40606ae0c07645ebc8f97e537d8d30ef73", "url": "https://api.github.com/repos/rust-lang/rust/commits/66b1ae40606ae0c07645ebc8f97e537d8d30ef73", "html_url": "https://github.com/rust-lang/rust/commit/66b1ae40606ae0c07645ebc8f97e537d8d30ef73"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "60004f3b0aeee59529d1d6b6993844a8087ce8f4", "filename": "src/test/ui/generator/issue-69039.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/fc2702c96c0db560f55683e4cd33075c054ed062/src%2Ftest%2Fui%2Fgenerator%2Fissue-69039.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fc2702c96c0db560f55683e4cd33075c054ed062/src%2Ftest%2Fui%2Fgenerator%2Fissue-69039.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fgenerator%2Fissue-69039.rs?ref=fc2702c96c0db560f55683e4cd33075c054ed062", "patch": "@@ -0,0 +1,30 @@\n+// run-pass\n+\n+#![feature(generators, generator_trait)]\n+\n+use std::ops::{Generator, GeneratorState};\n+\n+fn my_scenario() -> impl Generator<String, Yield = &'static str, Return = String> {\n+    |_arg: String| {\n+        let my_name = yield \"What is your name?\";\n+        let my_mood = yield \"How are you feeling?\";\n+        format!(\"{} is {}\", my_name.trim(), my_mood.trim())\n+    }\n+}\n+\n+fn main() {\n+    let mut my_session = Box::pin(my_scenario());\n+\n+    assert_eq!(\n+        my_session.as_mut().resume(\"_arg\".to_string()),\n+        GeneratorState::Yielded(\"What is your name?\")\n+    );\n+    assert_eq!(\n+        my_session.as_mut().resume(\"Your Name\".to_string()),\n+        GeneratorState::Yielded(\"How are you feeling?\")\n+    );\n+    assert_eq!(\n+        my_session.as_mut().resume(\"Sensory Organs\".to_string()),\n+        GeneratorState::Complete(\"Your Name is Sensory Organs\".to_string())\n+    );\n+}"}]}