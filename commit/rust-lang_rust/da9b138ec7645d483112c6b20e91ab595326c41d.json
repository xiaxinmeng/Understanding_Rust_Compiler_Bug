{"sha": "da9b138ec7645d483112c6b20e91ab595326c41d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRhOWIxMzhlYzc2NDVkNDgzMTEyYzZiMjBlOTFhYjU5NTMyNmM0MWQ=", "commit": {"author": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-05-19T14:12:03Z"}, "committer": {"name": "flip1995", "email": "hello@philkrones.com", "date": "2020-05-20T11:25:20Z"}, "message": "Update test after const_ptr functions are must_use now", "tree": {"sha": "1752c426b54fabfa62ed5d352cd45b4d045abf2f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1752c426b54fabfa62ed5d352cd45b4d045abf2f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/da9b138ec7645d483112c6b20e91ab595326c41d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqv54U47RUUXZfOLnLO/Nsn7QvnkFAl7FE6AACgkQLO/Nsn7Q\nvnnAhRAAjylsSKA8rkCGT8ZAdrbMuOE5Aq1yg/5mzur5GZpwGGzQZcesQ7c/6NNb\nV+DvM1A5zgm98SuNF9f2ICPZsqfqHv3gMeV1oNnE7LrD0bcGeWtz2zKyHy5upJft\nQl8pv0t4mVEsWy5uQ/0fpxwzr6lXdoMBkHY2TZNvG5bX+g2H0x5WzXPQvcoevgq5\nDPbixDblFITlOibJ566NYguRBfiR4ycv2nB18tW80DIXYuZxtvzXl2NLhz4Ndmvb\napZCJhXPwuzpw+fX0mTlJkjzopAjEpL3jGh6XkZeOUFWFVDhV0sOd9zOEQAnNW/4\nS3BUYk3EAN6cFYOFWYwx49UoVs+OPR07k+/2gyfsfe08TptdeczkcFBxMNz86ulM\n4eeEH04vGd2cNfVdgk/JL6l4j0ua6k891zVw1cgWHyeD/Phtxhi4lMKIPp0GOhuJ\nnCqjjB7VVRxz3N+eFtZsnpiUbFXZqkfjzoN5N/GidIS88ZM33cjGSrCEQD4OY30P\nculQqRJQBb2eknoh8LwgWtkLVtOcQcdhMzz6iYucOjtBuy/IA55BO/Zc5W0D2+Xz\nP7Kw5v84JPS949wt+kXRhiwdujqGmN9z0ePXAAqv6wZ7tCh2xBBUUe9/I9xksLWI\nvGzJZL1zpx9P1CjF0oSwE6f11OjBDaoNuYNzXtukmA6f8+HtZ+g=\n=Dha2\n-----END PGP SIGNATURE-----", "payload": "tree 1752c426b54fabfa62ed5d352cd45b4d045abf2f\nparent b8098fe4cc0239727259fa2b09087b5e6fa4ae8b\nauthor flip1995 <hello@philkrones.com> 1589897523 +0200\ncommitter flip1995 <hello@philkrones.com> 1589973920 +0200\n\nUpdate test after const_ptr functions are must_use now\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/da9b138ec7645d483112c6b20e91ab595326c41d", "html_url": "https://github.com/rust-lang/rust/commit/da9b138ec7645d483112c6b20e91ab595326c41d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/da9b138ec7645d483112c6b20e91ab595326c41d/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b8098fe4cc0239727259fa2b09087b5e6fa4ae8b", "url": "https://api.github.com/repos/rust-lang/rust/commits/b8098fe4cc0239727259fa2b09087b5e6fa4ae8b", "html_url": "https://github.com/rust-lang/rust/commit/b8098fe4cc0239727259fa2b09087b5e6fa4ae8b"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "718e391e8bf697b59fbf1e02a4c38bad7108a716", "filename": "tests/ui/ptr_offset_with_cast.fixed", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/da9b138ec7645d483112c6b20e91ab595326c41d/tests%2Fui%2Fptr_offset_with_cast.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/da9b138ec7645d483112c6b20e91ab595326c41d/tests%2Fui%2Fptr_offset_with_cast.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fptr_offset_with_cast.fixed?ref=da9b138ec7645d483112c6b20e91ab595326c41d", "patch": "@@ -9,12 +9,12 @@ fn main() {\n     let offset_isize = 1_isize;\n \n     unsafe {\n-        ptr.add(offset_usize);\n-        ptr.offset(offset_isize as isize);\n-        ptr.offset(offset_u8 as isize);\n+        let _ = ptr.add(offset_usize);\n+        let _ = ptr.offset(offset_isize as isize);\n+        let _ = ptr.offset(offset_u8 as isize);\n \n-        ptr.wrapping_add(offset_usize);\n-        ptr.wrapping_offset(offset_isize as isize);\n-        ptr.wrapping_offset(offset_u8 as isize);\n+        let _ = ptr.wrapping_add(offset_usize);\n+        let _ = ptr.wrapping_offset(offset_isize as isize);\n+        let _ = ptr.wrapping_offset(offset_u8 as isize);\n     }\n }"}, {"sha": "f613742c741ef5660e339f0f560ce97576b8153a", "filename": "tests/ui/ptr_offset_with_cast.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/da9b138ec7645d483112c6b20e91ab595326c41d/tests%2Fui%2Fptr_offset_with_cast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/da9b138ec7645d483112c6b20e91ab595326c41d/tests%2Fui%2Fptr_offset_with_cast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fptr_offset_with_cast.rs?ref=da9b138ec7645d483112c6b20e91ab595326c41d", "patch": "@@ -9,12 +9,12 @@ fn main() {\n     let offset_isize = 1_isize;\n \n     unsafe {\n-        ptr.offset(offset_usize as isize);\n-        ptr.offset(offset_isize as isize);\n-        ptr.offset(offset_u8 as isize);\n+        let _ = ptr.offset(offset_usize as isize);\n+        let _ = ptr.offset(offset_isize as isize);\n+        let _ = ptr.offset(offset_u8 as isize);\n \n-        ptr.wrapping_offset(offset_usize as isize);\n-        ptr.wrapping_offset(offset_isize as isize);\n-        ptr.wrapping_offset(offset_u8 as isize);\n+        let _ = ptr.wrapping_offset(offset_usize as isize);\n+        let _ = ptr.wrapping_offset(offset_isize as isize);\n+        let _ = ptr.wrapping_offset(offset_u8 as isize);\n     }\n }"}, {"sha": "fd45224ca067fa3450bc07cd12f5ebef51052495", "filename": "tests/ui/ptr_offset_with_cast.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/da9b138ec7645d483112c6b20e91ab595326c41d/tests%2Fui%2Fptr_offset_with_cast.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/da9b138ec7645d483112c6b20e91ab595326c41d/tests%2Fui%2Fptr_offset_with_cast.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fptr_offset_with_cast.stderr?ref=da9b138ec7645d483112c6b20e91ab595326c41d", "patch": "@@ -1,16 +1,16 @@\n error: use of `offset` with a `usize` casted to an `isize`\n-  --> $DIR/ptr_offset_with_cast.rs:12:9\n+  --> $DIR/ptr_offset_with_cast.rs:12:17\n    |\n-LL |         ptr.offset(offset_usize as isize);\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `ptr.add(offset_usize)`\n+LL |         let _ = ptr.offset(offset_usize as isize);\n+   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `ptr.add(offset_usize)`\n    |\n    = note: `-D clippy::ptr-offset-with-cast` implied by `-D warnings`\n \n error: use of `wrapping_offset` with a `usize` casted to an `isize`\n-  --> $DIR/ptr_offset_with_cast.rs:16:9\n+  --> $DIR/ptr_offset_with_cast.rs:16:17\n    |\n-LL |         ptr.wrapping_offset(offset_usize as isize);\n-   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `ptr.wrapping_add(offset_usize)`\n+LL |         let _ = ptr.wrapping_offset(offset_usize as isize);\n+   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ help: try: `ptr.wrapping_add(offset_usize)`\n \n error: aborting due to 2 previous errors\n "}]}