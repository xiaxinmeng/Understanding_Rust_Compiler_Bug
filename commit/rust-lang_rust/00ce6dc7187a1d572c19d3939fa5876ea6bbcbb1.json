{"sha": "00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1", "node_id": "C_kwDOAAsO6NoAKDAwY2U2ZGM3MTg3YTFkNTcyYzE5ZDM5MzlmYTU4NzZlYTZiYmNiYjE", "commit": {"author": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2021-12-16T23:32:00Z"}, "committer": {"name": "Aaron Hill", "email": "aa1ronham@gmail.com", "date": "2021-12-16T23:32:00Z"}, "message": "Only cache local adt_def results on disk\n\nAn `AdtDef` contains `Span`s, and we don't appear\nto actually encode the `SourceFile` for foreign\nspans in the incremental cache in some cases.", "tree": {"sha": "4e23694e010e8966b14a79c71767cfc624c98b06", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4e23694e010e8966b14a79c71767cfc624c98b06"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7J9Gc3TfBwj2K399tAh+UQ6YsWQFAmG7zMUACgkQtAh+UQ6Y\nsWSzMg//TH2FdBrpCXalY7mitWKc1AjQzPnDkvnUg+QByFcHtS4rHjVedYAC6aDI\nwGVHZaEcXWbH/CxvvWjwbKuG+xuwEDd9AdFvVxb9no/bBKqnOIu3hxUt29jHe+T3\nUDzoN/yF7dx3Wnf2BcWgJ31sJyBDDBiNDEgCAp1pzZFHqCYzrUpqx7h/wp/iIF0X\nFWX2fYvNoIKpJqKuIZ5pp0ebQ9PU4HluXjI8+fjAZISlNEBrgB9kfkkiF+cdz9NU\nn9fQjtiQQiLwPidYwWOyK7SrEFsW8IdyWx0atw+bQfl7ZwYlBuCFKyaDU1g700/P\nmJv4INjGdWdKQ3IiCZVXZQcdr1SfHFGPtID+QnDgHxB8/q/TTirAodasxPryhPHo\nJC6RotAXg7w6wMiXnIADkQheJ+tLHtc/V8WVYn1RFM8FfW91+OhV/xJcz0zJ01AH\nf3Nu6bPAYXGt4FhbvRly/MccVXYQSJYc09b5jngTU6zCntoGK7JROxBBKO0U2Ie2\nGWnOu9A9jEe4WXEWPPanCUadB5myQhkOQ6hHnzcXU7+bWF7EqrorA64bno8ky8nb\nL/QWAxK8RQANs/DrKjzRjd9rAAxFtPYFBCBES6tVzh5kMxqAEqVW8nfB/xYNxk3w\nJ9rjCwi6DCZRkkkNC7lsqB+ypD/mnpKUx+S3zxK3miJhij4CdH0=\n=D2Su\n-----END PGP SIGNATURE-----", "payload": "tree 4e23694e010e8966b14a79c71767cfc624c98b06\nparent 70fba904121c6758e2874176e64db5a68ca14686\nauthor Aaron Hill <aa1ronham@gmail.com> 1639697520 -0500\ncommitter Aaron Hill <aa1ronham@gmail.com> 1639697520 -0500\n\nOnly cache local adt_def results on disk\n\nAn `AdtDef` contains `Span`s, and we don't appear\nto actually encode the `SourceFile` for foreign\nspans in the incremental cache in some cases.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1", "html_url": "https://github.com/rust-lang/rust/commit/00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1/comments", "author": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Aaron1011", "id": 1408859, "node_id": "MDQ6VXNlcjE0MDg4NTk=", "avatar_url": "https://avatars.githubusercontent.com/u/1408859?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Aaron1011", "html_url": "https://github.com/Aaron1011", "followers_url": "https://api.github.com/users/Aaron1011/followers", "following_url": "https://api.github.com/users/Aaron1011/following{/other_user}", "gists_url": "https://api.github.com/users/Aaron1011/gists{/gist_id}", "starred_url": "https://api.github.com/users/Aaron1011/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Aaron1011/subscriptions", "organizations_url": "https://api.github.com/users/Aaron1011/orgs", "repos_url": "https://api.github.com/users/Aaron1011/repos", "events_url": "https://api.github.com/users/Aaron1011/events{/privacy}", "received_events_url": "https://api.github.com/users/Aaron1011/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70fba904121c6758e2874176e64db5a68ca14686", "url": "https://api.github.com/repos/rust-lang/rust/commits/70fba904121c6758e2874176e64db5a68ca14686", "html_url": "https://github.com/rust-lang/rust/commit/70fba904121c6758e2874176e64db5a68ca14686"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "22caff1e8d9755fc4134d8949d0b0a5d77269876", "filename": "compiler/rustc_middle/src/query/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs?ref=00ce6dc7187a1d572c19d3939fa5876ea6bbcbb1", "patch": "@@ -522,7 +522,7 @@ rustc_queries! {\n     }\n     query adt_def(key: DefId) -> &'tcx ty::AdtDef {\n         desc { |tcx| \"computing ADT definition for `{}`\", tcx.def_path_str(key) }\n-        cache_on_disk_if { true }\n+        cache_on_disk_if { key.is_local() }\n         separate_provide_extern\n     }\n     query adt_destructor(key: DefId) -> Option<ty::Destructor> {"}]}