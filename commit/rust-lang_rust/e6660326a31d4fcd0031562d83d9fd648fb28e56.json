{"sha": "e6660326a31d4fcd0031562d83d9fd648fb28e56", "node_id": "C_kwDOAAsO6NoAKGU2NjYwMzI2YTMxZDRmY2QwMDMxNTYyZDgzZDlmZDY0OGZiMjhlNTY", "commit": {"author": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-07-04T17:13:53Z"}, "committer": {"name": "lcnr", "email": "rust@lcnr.de", "date": "2022-09-08T09:41:00Z"}, "message": "bound variables during ctfe are a bug", "tree": {"sha": "f572ca28a5511aa5ec01d2a70b017978ba0a6e7f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f572ca28a5511aa5ec01d2a70b017978ba0a6e7f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e6660326a31d4fcd0031562d83d9fd648fb28e56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e6660326a31d4fcd0031562d83d9fd648fb28e56", "html_url": "https://github.com/rust-lang/rust/commit/e6660326a31d4fcd0031562d83d9fd648fb28e56", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e6660326a31d4fcd0031562d83d9fd648fb28e56/comments", "author": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lcnr", "id": 29864074, "node_id": "MDQ6VXNlcjI5ODY0MDc0", "avatar_url": "https://avatars.githubusercontent.com/u/29864074?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lcnr", "html_url": "https://github.com/lcnr", "followers_url": "https://api.github.com/users/lcnr/followers", "following_url": "https://api.github.com/users/lcnr/following{/other_user}", "gists_url": "https://api.github.com/users/lcnr/gists{/gist_id}", "starred_url": "https://api.github.com/users/lcnr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lcnr/subscriptions", "organizations_url": "https://api.github.com/users/lcnr/orgs", "repos_url": "https://api.github.com/users/lcnr/repos", "events_url": "https://api.github.com/users/lcnr/events{/privacy}", "received_events_url": "https://api.github.com/users/lcnr/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d15b00af487c356a426d08b333e64155ff386694", "url": "https://api.github.com/repos/rust-lang/rust/commits/d15b00af487c356a426d08b333e64155ff386694", "html_url": "https://github.com/rust-lang/rust/commit/d15b00af487c356a426d08b333e64155ff386694"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "7dba5059307eaea2bc3369ea1c003d59f6ce92d3", "filename": "compiler/rustc_const_eval/src/interpret/intrinsics.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e6660326a31d4fcd0031562d83d9fd648fb28e56/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fintrinsics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6660326a31d4fcd0031562d83d9fd648fb28e56/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fintrinsics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Fintrinsics.rs?ref=e6660326a31d4fcd0031562d83d9fd648fb28e56", "patch": "@@ -79,9 +79,9 @@ pub(crate) fn eval_nullary_intrinsic<'tcx>(\n             ty::Projection(_)\n             | ty::Opaque(_, _)\n             | ty::Param(_)\n-            | ty::Bound(_, _)\n             | ty::Placeholder(_)\n             | ty::Infer(_) => throw_inval!(TooGeneric),\n+            ty::Bound(_, _) => bug!(\"bound ty during ctfe\"),\n             ty::Bool\n             | ty::Char\n             | ty::Int(_)"}, {"sha": "f6c4f7dd1122105405065a171e1978eb69370e54", "filename": "compiler/rustc_const_eval/src/interpret/operand.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/e6660326a31d4fcd0031562d83d9fd648fb28e56/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Foperand.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e6660326a31d4fcd0031562d83d9fd648fb28e56/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Foperand.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_const_eval%2Fsrc%2Finterpret%2Foperand.rs?ref=e6660326a31d4fcd0031562d83d9fd648fb28e56", "patch": "@@ -559,15 +559,15 @@ impl<'mir, 'tcx: 'mir, M: Machine<'mir, 'tcx>> InterpCx<'mir, 'tcx, M> {\n         layout: Option<TyAndLayout<'tcx>>,\n     ) -> InterpResult<'tcx, OpTy<'tcx, M::Provenance>> {\n         match c.kind() {\n-            ty::ConstKind::Param(_) | ty::ConstKind::Bound(..) => throw_inval!(TooGeneric),\n+            ty::ConstKind::Param(_) | ty::ConstKind::Placeholder(..) => throw_inval!(TooGeneric),\n             ty::ConstKind::Error(DelaySpanBugEmitted { reported, .. }) => {\n                 throw_inval!(AlreadyReported(reported))\n             }\n             ty::ConstKind::Unevaluated(uv) => {\n                 let instance = self.resolve(uv.def, uv.substs)?;\n                 Ok(self.eval_to_allocation(GlobalId { instance, promoted: uv.promoted })?.into())\n             }\n-            ty::ConstKind::Infer(..) | ty::ConstKind::Placeholder(..) => {\n+            ty::ConstKind::Bound(..) | ty::ConstKind::Infer(..) => {\n                 span_bug!(self.cur_span(), \"const_to_op: Unexpected ConstKind {:?}\", c)\n             }\n             ty::ConstKind::Value(valtree) => {"}]}