{"sha": "87c3a5c1a3e2daee39afb60be83133bf4caf4413", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg3YzNhNWMxYTNlMmRhZWUzOWFmYjYwYmU4MzEzM2JmNGNhZjQ0MTM=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-01-26T01:35:39Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-01-26T05:04:52Z"}, "message": "rustdoc: Extract some common functions from attr_parser", "tree": {"sha": "5539219e7da238d44f0ad04f5b0a71fa9fea268e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5539219e7da238d44f0ad04f5b0a71fa9fea268e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/87c3a5c1a3e2daee39afb60be83133bf4caf4413", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/87c3a5c1a3e2daee39afb60be83133bf4caf4413", "html_url": "https://github.com/rust-lang/rust/commit/87c3a5c1a3e2daee39afb60be83133bf4caf4413", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/87c3a5c1a3e2daee39afb60be83133bf4caf4413/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "259ea4e4b49cfe00efdb39e0226211a71807ec76", "url": "https://api.github.com/repos/rust-lang/rust/commits/259ea4e4b49cfe00efdb39e0226211a71807ec76", "html_url": "https://github.com/rust-lang/rust/commit/259ea4e4b49cfe00efdb39e0226211a71807ec76"}], "stats": {"total": 69, "additions": 16, "deletions": 53}, "files": [{"sha": "f822023a054656a12d15f15d709ae305d6f6fa4e", "filename": "src/rustdoc/attr_parser.rs", "status": "modified", "additions": 16, "deletions": 53, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/87c3a5c1a3e2daee39afb60be83133bf4caf4413/src%2Frustdoc%2Fattr_parser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/87c3a5c1a3e2daee39afb60be83133bf4caf4413/src%2Frustdoc%2Fattr_parser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fattr_parser.rs?ref=87c3a5c1a3e2daee39afb60be83133bf4caf4413", "patch": "@@ -125,7 +125,12 @@ fn should_not_extract_crate_name_if_no_name_value_in_link_attribute() {\n     assert attrs.name == none;\n }\n \n-fn parse_mod(attrs: [ast::attribute]) -> mod_attrs {\n+fn parse_basic(\n+    attrs: [ast::attribute]\n+) -> {\n+    brief: option<str>,\n+    desc: option<str>\n+} {\n     parse_short_doc_or(\n         attrs,\n         {|desc|\n@@ -134,19 +139,17 @@ fn parse_mod(attrs: [ast::attribute]) -> mod_attrs {\n                 desc: desc\n             }\n         },\n-        parse_mod_long_doc\n+        {|_items, brief, desc|\n+            {\n+                brief: brief,\n+                desc: desc\n+            }\n+        }\n     )\n }\n \n-fn parse_mod_long_doc(\n-    _items: [@ast::meta_item],\n-    brief: option<str>,\n-    desc: option<str>\n-) -> mod_attrs {\n-    {\n-        brief: brief,\n-        desc: desc\n-    }\n+fn parse_mod(attrs: [ast::attribute]) -> mod_attrs {\n+    parse_basic(attrs)\n }\n \n #[test]\n@@ -327,27 +330,7 @@ fn parse_fn_should_parse_failure_conditions() {\n }\n \n fn parse_const(attrs: [ast::attribute]) -> const_attrs {\n-    parse_short_doc_or(\n-        attrs,\n-        {|desc|\n-            {\n-                brief: none,\n-                desc: desc\n-            }\n-        },\n-        parse_const_long_doc\n-    )\n-}\n-\n-fn parse_const_long_doc(\n-    _items: [@ast::meta_item],\n-    brief: option<str>,\n-    desc: option<str>\n-) -> const_attrs {\n-    {\n-        brief: brief,\n-        desc: desc\n-    }\n+    parse_basic(attrs)\n }\n \n #[test]\n@@ -368,27 +351,7 @@ fn should_parse_const_long_doc() {\n }\n \n fn parse_enum(attrs: [ast::attribute]) -> enum_attrs {\n-    parse_short_doc_or(\n-        attrs,\n-        {|desc|\n-            {\n-                brief: none,\n-                desc: desc\n-            }\n-        },\n-        parse_enum_long_doc\n-    )\n-}\n-\n-fn parse_enum_long_doc(\n-    _items: [@ast::meta_item],\n-    brief: option<str>,\n-    desc: option<str>\n-) -> enum_attrs {\n-    {\n-        brief: brief,\n-        desc: desc\n-    }\n+    parse_basic(attrs)\n }\n \n #[test]"}]}