{"sha": "85d71f4dff6d96678eeb195249fd340dc8cf4912", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg1ZDcxZjRkZmY2ZDk2Njc4ZWViMTk1MjQ5ZmQzNDBkYzhjZjQ5MTI=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-07-29T12:35:27Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-07-29T12:35:27Z"}, "message": "Run package-specific cargo check and test for all targets", "tree": {"sha": "b20c755d57d3af543821d4e48a6401b50e88693b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b20c755d57d3af543821d4e48a6401b50e88693b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/85d71f4dff6d96678eeb195249fd340dc8cf4912", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/85d71f4dff6d96678eeb195249fd340dc8cf4912", "html_url": "https://github.com/rust-lang/rust/commit/85d71f4dff6d96678eeb195249fd340dc8cf4912", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/85d71f4dff6d96678eeb195249fd340dc8cf4912/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e35804355797a50195718918efc6f7272786d62e", "url": "https://api.github.com/repos/rust-lang/rust/commits/e35804355797a50195718918efc6f7272786d62e", "html_url": "https://github.com/rust-lang/rust/commit/e35804355797a50195718918efc6f7272786d62e"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "87a1367ac2e89b62ec0b134ad639a15d8938d01b", "filename": "crates/rust-analyzer/src/handlers.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/85d71f4dff6d96678eeb195249fd340dc8cf4912/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d71f4dff6d96678eeb195249fd340dc8cf4912/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Fsrc%2Fhandlers.rs?ref=85d71f4dff6d96678eeb195249fd340dc8cf4912", "patch": "@@ -469,12 +469,12 @@ pub(crate) fn handle_runnables(\n         res.push(runnable);\n     }\n \n-    // Add `cargo check` and `cargo test` for the whole package\n+    // Add `cargo check` and `cargo test` for all targets of the whole package\n     match cargo_spec {\n         Some(spec) => {\n             for &cmd in [\"check\", \"test\"].iter() {\n                 res.push(lsp_ext::Runnable {\n-                    label: format!(\"cargo {} -p {}\", cmd, spec.package),\n+                    label: format!(\"cargo {} -p {} --all-targets\", cmd, spec.package),\n                     location: None,\n                     kind: lsp_ext::RunnableKind::Cargo,\n                     args: lsp_ext::CargoRunnable {\n@@ -483,6 +483,7 @@ pub(crate) fn handle_runnables(\n                             cmd.to_string(),\n                             \"--package\".to_string(),\n                             spec.package.clone(),\n+                            \"--all-targets\".to_string(),\n                         ],\n                         executable_args: Vec::new(),\n                         expect_test: None,"}, {"sha": "7370505f8bfb2514aee27e5fe20029fbd8e6282b", "filename": "crates/rust-analyzer/tests/heavy_tests/main.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/85d71f4dff6d96678eeb195249fd340dc8cf4912/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/85d71f4dff6d96678eeb195249fd340dc8cf4912/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Frust-analyzer%2Ftests%2Fheavy_tests%2Fmain.rs?ref=85d71f4dff6d96678eeb195249fd340dc8cf4912", "patch": "@@ -115,21 +115,21 @@ fn main() {}\n           },\n           {\n             \"args\": {\n-              \"cargoArgs\": [\"check\", \"--package\", \"foo\"],\n+              \"cargoArgs\": [\"check\", \"--package\", \"foo\", \"--all-targets\"],\n               \"executableArgs\": [],\n               \"workspaceRoot\": server.path().join(\"foo\")\n             },\n             \"kind\": \"cargo\",\n-            \"label\": \"cargo check -p foo\"\n+            \"label\": \"cargo check -p foo --all-targets\"\n           },\n           {\n             \"args\": {\n-              \"cargoArgs\": [\"test\", \"--package\", \"foo\"],\n+              \"cargoArgs\": [\"test\", \"--package\", \"foo\", \"--all-targets\"],\n               \"executableArgs\": [],\n               \"workspaceRoot\": server.path().join(\"foo\")\n             },\n             \"kind\": \"cargo\",\n-            \"label\": \"cargo test -p foo\"\n+            \"label\": \"cargo test -p foo --all-targets\"\n           }\n         ]),\n     );"}]}