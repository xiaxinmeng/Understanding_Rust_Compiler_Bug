{"sha": "fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZhZDNlNTA5ODczMTFhM2M0MmE0NWJkM2Q5ZGJjZjdjN2E3N2U1NDQ=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2017-12-30T13:30:37Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2017-12-30T13:30:44Z"}, "message": "Lexer: symbols", "tree": {"sha": "b5f1d262e5ecb1226dc73780db50ee3eebe66ff8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b5f1d262e5ecb1226dc73780db50ee3eebe66ff8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "html_url": "https://github.com/rust-lang/rust/commit/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3e91e8b77db443775eea2ccd40b0cf1e27dc77d8", "url": "https://api.github.com/repos/rust-lang/rust/commits/3e91e8b77db443775eea2ccd40b0cf1e27dc77d8", "html_url": "https://github.com/rust-lang/rust/commit/3e91e8b77db443775eea2ccd40b0cf1e27dc77d8"}], "stats": {"total": 151, "additions": 144, "deletions": 7}, "files": [{"sha": "56617f75752b5e3f9caeacc19e7f31467b4ab49e", "filename": "grammar.ron", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/grammar.ron", "raw_url": "https://github.com/rust-lang/rust/raw/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/grammar.ron", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/grammar.ron?ref=fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "patch": "@@ -6,5 +6,24 @@ Grammar(\n         \"WHITESPACE\",\n         \"INT_NUMBER\",\n         \"FLOAT_NUMBER\",\n+        \"SEMI\",\n+        \"COMMA\",\n+        \"DOT\",\n+        \"DOTDOT\",\n+        \"DOTDOTDOT\",\n+        \"DOTDOTEQ\",\n+        \"L_PAREN\",\n+        \"R_PAREN\",\n+        \"L_CURLY\",\n+        \"R_CURLY\",\n+        \"L_BRACK\",\n+        \"R_BRACK\",\n+        \"AT\",\n+        \"POUND\",\n+        \"TILDE\",\n+        \"QUESTION\",\n+        \"COLON\",\n+        \"COLONCOLON\",\n+        \"DOLLAR\",\n     ]\n )\n\\ No newline at end of file"}, {"sha": "d2d4aaa2224fe18350ed7b7ea493bc71f3b37624", "filename": "src/lexer/mod.rs", "status": "modified", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/rust-lang/rust/blob/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/src%2Flexer%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/src%2Flexer%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flexer%2Fmod.rs?ref=fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "patch": "@@ -37,6 +37,47 @@ fn next_token_inner(c: char, ptr: &mut Ptr) -> SyntaxKind {\n         return scan_number(c, ptr);\n     }\n \n+    // One-byte tokens.\n+    match c {\n+        ';' => return SEMI,\n+        ',' => return COMMA,\n+        '(' => return L_PAREN,\n+        ')' => return R_PAREN,\n+        '{' => return L_CURLY,\n+        '}' => return R_CURLY,\n+        '[' => return L_BRACK,\n+        ']' => return R_BRACK,\n+        '@' => return AT,\n+        '#' => return POUND,\n+        '~' => return TILDE,\n+        '?' => return QUESTION,\n+        '$' => return DOLLAR,\n+        '.' => return match (ptr.next(), ptr.nnext()) {\n+            (Some('.'), Some('.')) => {\n+                ptr.bump();\n+                ptr.bump();\n+                DOTDOTDOT\n+            },\n+            (Some('.'), Some('=')) => {\n+                ptr.bump();\n+                ptr.bump();\n+                DOTDOTEQ\n+            },\n+            (Some('.'), _) => {\n+                ptr.bump();\n+                DOTDOT\n+            },\n+            _ => DOT\n+        },\n+        ':' => return match ptr.next() {\n+            Some(':') => {\n+                ptr.bump();\n+                COLONCOLON\n+            }\n+            _ => COLON\n+        },\n+        _ => (),\n+    }\n     ERROR\n }\n "}, {"sha": "6982cba950571490e3085ec8107970a87544d7e7", "filename": "src/syntax_kinds.rs", "status": "modified", "additions": 39, "deletions": 1, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/src%2Fsyntax_kinds.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/src%2Fsyntax_kinds.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsyntax_kinds.rs?ref=fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "patch": "@@ -7,14 +7,52 @@ pub const UNDERSCORE: SyntaxKind = SyntaxKind(2);\n pub const WHITESPACE: SyntaxKind = SyntaxKind(3);\n pub const INT_NUMBER: SyntaxKind = SyntaxKind(4);\n pub const FLOAT_NUMBER: SyntaxKind = SyntaxKind(5);\n+pub const SEMI: SyntaxKind = SyntaxKind(6);\n+pub const COMMA: SyntaxKind = SyntaxKind(7);\n+pub const DOT: SyntaxKind = SyntaxKind(8);\n+pub const DOTDOT: SyntaxKind = SyntaxKind(9);\n+pub const DOTDOTDOT: SyntaxKind = SyntaxKind(10);\n+pub const DOTDOTEQ: SyntaxKind = SyntaxKind(11);\n+pub const L_PAREN: SyntaxKind = SyntaxKind(12);\n+pub const R_PAREN: SyntaxKind = SyntaxKind(13);\n+pub const L_CURLY: SyntaxKind = SyntaxKind(14);\n+pub const R_CURLY: SyntaxKind = SyntaxKind(15);\n+pub const L_BRACK: SyntaxKind = SyntaxKind(16);\n+pub const R_BRACK: SyntaxKind = SyntaxKind(17);\n+pub const AT: SyntaxKind = SyntaxKind(18);\n+pub const POUND: SyntaxKind = SyntaxKind(19);\n+pub const TILDE: SyntaxKind = SyntaxKind(20);\n+pub const QUESTION: SyntaxKind = SyntaxKind(21);\n+pub const COLON: SyntaxKind = SyntaxKind(22);\n+pub const COLONCOLON: SyntaxKind = SyntaxKind(23);\n+pub const DOLLAR: SyntaxKind = SyntaxKind(24);\n \n-static INFOS: [SyntaxInfo; 6] = [\n+static INFOS: [SyntaxInfo; 25] = [\n     SyntaxInfo { name: \"ERROR\" },\n     SyntaxInfo { name: \"IDENT\" },\n     SyntaxInfo { name: \"UNDERSCORE\" },\n     SyntaxInfo { name: \"WHITESPACE\" },\n     SyntaxInfo { name: \"INT_NUMBER\" },\n     SyntaxInfo { name: \"FLOAT_NUMBER\" },\n+    SyntaxInfo { name: \"SEMI\" },\n+    SyntaxInfo { name: \"COMMA\" },\n+    SyntaxInfo { name: \"DOT\" },\n+    SyntaxInfo { name: \"DOTDOT\" },\n+    SyntaxInfo { name: \"DOTDOTDOT\" },\n+    SyntaxInfo { name: \"DOTDOTEQ\" },\n+    SyntaxInfo { name: \"L_PAREN\" },\n+    SyntaxInfo { name: \"R_PAREN\" },\n+    SyntaxInfo { name: \"L_CURLY\" },\n+    SyntaxInfo { name: \"R_CURLY\" },\n+    SyntaxInfo { name: \"L_BRACK\" },\n+    SyntaxInfo { name: \"R_BRACK\" },\n+    SyntaxInfo { name: \"AT\" },\n+    SyntaxInfo { name: \"POUND\" },\n+    SyntaxInfo { name: \"TILDE\" },\n+    SyntaxInfo { name: \"QUESTION\" },\n+    SyntaxInfo { name: \"COLON\" },\n+    SyntaxInfo { name: \"COLONCOLON\" },\n+    SyntaxInfo { name: \"DOLLAR\" },\n ];\n \n pub(crate) fn syntax_info(kind: SyntaxKind) -> &'static SyntaxInfo {"}, {"sha": "ede39aa99c67c8002819979513cb4c6e791dda07", "filename": "tests/data/lexer/0004_number.txt", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/tests%2Fdata%2Flexer%2F0004_number.txt", "raw_url": "https://github.com/rust-lang/rust/raw/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/tests%2Fdata%2Flexer%2F0004_number.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0004_number.txt?ref=fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "patch": "@@ -38,22 +38,21 @@ WHITESPACE 1 \" \"\n INT_NUMBER 6 \"0E1279\"\n WHITESPACE 1 \"\\n\"\n INT_NUMBER 1 \"0\"\n-ERROR 1 \".\"\n-ERROR 1 \".\"\n+DOTDOT 2 \"..\"\n INT_NUMBER 1 \"2\"\n WHITESPACE 1 \"\\n\"\n INT_NUMBER 1 \"0\"\n-ERROR 1 \".\"\n+DOT 1 \".\"\n IDENT 3 \"foo\"\n-ERROR 1 \"(\"\n-ERROR 1 \")\"\n+L_PAREN 1 \"(\"\n+R_PAREN 1 \")\"\n WHITESPACE 1 \"\\n\"\n INT_NUMBER 2 \"0e\"\n ERROR 1 \"+\"\n INT_NUMBER 1 \"1\"\n WHITESPACE 1 \"\\n\"\n INT_NUMBER 1 \"0\"\n-ERROR 1 \".\"\n+DOT 1 \".\"\n IDENT 1 \"e\"\n ERROR 1 \"+\"\n INT_NUMBER 1 \"1\""}, {"sha": "79747d5e1f92d9b559deeaef8e4751b96b1122a4", "filename": "tests/data/lexer/0005_symbols.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/tests%2Fdata%2Flexer%2F0005_symbols.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/tests%2Fdata%2Flexer%2F0005_symbols.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0005_symbols.rs?ref=fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "patch": "@@ -0,0 +1,3 @@\n+; , ( ) { } [ ] @ # ~ ? $\n+. .. ... ..=\n+: ::\n\\ No newline at end of file"}, {"sha": "c845d2dff693026adb2f81dcaa481e6c8174bb51", "filename": "tests/data/lexer/0005_symbols.txt", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/tests%2Fdata%2Flexer%2F0005_symbols.txt", "raw_url": "https://github.com/rust-lang/rust/raw/fad3e50987311a3c42a45bd3d9dbcf7c7a77e544/tests%2Fdata%2Flexer%2F0005_symbols.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fdata%2Flexer%2F0005_symbols.txt?ref=fad3e50987311a3c42a45bd3d9dbcf7c7a77e544", "patch": "@@ -0,0 +1,37 @@\n+SEMI 1 \";\"\n+WHITESPACE 1 \" \"\n+COMMA 1 \",\"\n+WHITESPACE 1 \" \"\n+L_PAREN 1 \"(\"\n+WHITESPACE 1 \" \"\n+R_PAREN 1 \")\"\n+WHITESPACE 1 \" \"\n+L_CURLY 1 \"{\"\n+WHITESPACE 1 \" \"\n+R_CURLY 1 \"}\"\n+WHITESPACE 1 \" \"\n+L_BRACK 1 \"[\"\n+WHITESPACE 1 \" \"\n+R_BRACK 1 \"]\"\n+WHITESPACE 1 \" \"\n+AT 1 \"@\"\n+WHITESPACE 1 \" \"\n+POUND 1 \"#\"\n+WHITESPACE 1 \" \"\n+TILDE 1 \"~\"\n+WHITESPACE 1 \" \"\n+QUESTION 1 \"?\"\n+WHITESPACE 1 \" \"\n+DOLLAR 1 \"$\"\n+WHITESPACE 1 \"\\n\"\n+DOT 1 \".\"\n+WHITESPACE 1 \" \"\n+DOTDOT 2 \"..\"\n+WHITESPACE 1 \" \"\n+DOTDOTDOT 3 \"...\"\n+WHITESPACE 1 \" \"\n+DOTDOTEQ 3 \"..=\"\n+WHITESPACE 1 \"\\n\"\n+COLON 1 \":\"\n+WHITESPACE 1 \" \"\n+COLONCOLON 2 \"::\""}]}