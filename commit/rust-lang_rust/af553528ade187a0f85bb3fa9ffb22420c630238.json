{"sha": "af553528ade187a0f85bb3fa9ffb22420c630238", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFmNTUzNTI4YWRlMTg3YTBmODViYjNmYTlmZmIyMjQyMGM2MzAyMzg=", "commit": {"author": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2020-04-01T15:33:20Z"}, "committer": {"name": "Oliver Scherer", "email": "github35764891676564198441@oli-obk.de", "date": "2020-04-01T15:33:20Z"}, "message": "Explain that you have to specify path and repository during subrepo synchronizations", "tree": {"sha": "57d11f7f0d4793907d596bd6aad4879a7914f2d4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57d11f7f0d4793907d596bd6aad4879a7914f2d4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/af553528ade187a0f85bb3fa9ffb22420c630238", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/af553528ade187a0f85bb3fa9ffb22420c630238", "html_url": "https://github.com/rust-lang/rust/commit/af553528ade187a0f85bb3fa9ffb22420c630238", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/af553528ade187a0f85bb3fa9ffb22420c630238/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "521eb0df67bd2b822d7dbe5f4613a1e9beb98e1c", "url": "https://api.github.com/repos/rust-lang/rust/commits/521eb0df67bd2b822d7dbe5f4613a1e9beb98e1c", "html_url": "https://github.com/rust-lang/rust/commit/521eb0df67bd2b822d7dbe5f4613a1e9beb98e1c"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "156ebdb0795c69df97d1899d3100ea80e9a82987", "filename": "CONTRIBUTING.md", "status": "modified", "additions": 16, "deletions": 8, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/af553528ade187a0f85bb3fa9ffb22420c630238/CONTRIBUTING.md", "raw_url": "https://github.com/rust-lang/rust/raw/af553528ade187a0f85bb3fa9ffb22420c630238/CONTRIBUTING.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CONTRIBUTING.md?ref=af553528ade187a0f85bb3fa9ffb22420c630238", "patch": "@@ -196,23 +196,31 @@ differently from other crates that are directly in this repo:\n * none so far, see https://github.com/rust-lang/rust/issues/70651 for more info\n \n They are just regular files and directories. This is in contrast to `submodule` dependencies\n-(see below for those).\n+(see below for those). Only tool authors will actually use any operations here.\n \n #### Synchronizing a subtree\n \n There are two synchronization directions: `subtree push` and `subtree pull`.\n \n-A `git subtree push -P src/tools/clippy`\n+`git subtree push -P src/tools/clippy https://github.com/rust-lang/rust-clippy.git`\n+\n takes all the changes that\n happened to the copy in this repo and creates commits on the remote repo that match the local\n changes (so every local commit that touched the subtree causes a commit on the remote repo).\n \n-A `git subtree pull -P src/tools/clippy` takes all changes since the last `subtree pull` from the clippy\n-repo and creates a single commit in the rustc repo with all the changes.\n-\n-You always need to specifiy the `-P` prefix to the subtree directory. If you specify the wrong directory\n-you'll get very fun merges that try to push the wrong directory to the remote repository. Luckily you\n-can just abort this without any consequences.\n+`git subtree pull -P src/tools/clippy https://github.com/rust-lang/rust-clippy.git`\n+takes all changes since the last `subtree pull` from the clippy\n+repo and adds these commits to the rustc repo + a merge commit with the existing changes.\n+It is recommended that you always do a push before a pull, so that the merge works without conflicts.\n+While definitely possible to resolve conflicts during a pull, you may have to redo the conflict\n+resolution if your PR doesn't get merged fast enough and there are new conflicts. Do not try to\n+rebase the result of a `git subtree pull`, rebasing merge commits is a bad idea in general.\n+\n+You always need to specify the `-P` prefix to the subtree directory and the corresponding remote\n+repository. If you specify the wrong directory or repository\n+you'll get very fun merges that try to push the wrong directory to the wrong remote repository.\n+Luckily you can just abort this without any consequences and try again. It is usually fairly obvious\n+that this is happening because you suddenly get thousands of commits that want to be synchronized.\n \n #### Creating a new subtree dependency\n "}]}