{"sha": "9b11c183ed41676bce00e8550707b6552184f30b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjliMTFjMTgzZWQ0MTY3NmJjZTAwZTg1NTA3MDdiNjU1MjE4NGYzMGI=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2020-02-26T13:34:46Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-02-26T13:34:46Z"}, "message": "Merge pull request #3320 from matklad/no-dep\n\nRemove unnecessary dep", "tree": {"sha": "a1c0eee91109b7e0662b3c28219dd70ed58f1311", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1c0eee91109b7e0662b3c28219dd70ed58f1311"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9b11c183ed41676bce00e8550707b6552184f30b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJeVnP2CRBK7hj4Ov3rIwAAdHIIAC8EaHducXqE3GfJ5O1o9zTH\n/jixyq8wpgi6M7kp1ijAj7xHMF2ZLgeqt5qrs5EssDAsLwIYyfUrGFiguHWWPntH\nqaEW/PiD0VK4R2T4JGcmS9e1zBkJLjE7fWjTok893EJYJ5v588dGpV88+nFbygxM\nY60OhFWI/nZTRQ0YuONGnBwU3up1Dcc9GMt2Z/B9NLJWX890JVb+Ua0OssKXZk91\nbDKnUV+GsMSi56xaCNunjLYWOt21SiQmuZV7OJDa2s7q81rdjUFPHrjl9vp1mRln\nSrWY/BaZORcPfZHm9i7TEYffTYYtk8IIC3pG/3Y6jv6NhcGumLL4O42j/BR23EU=\n=DQzl\n-----END PGP SIGNATURE-----\n", "payload": "tree a1c0eee91109b7e0662b3c28219dd70ed58f1311\nparent 80f8e474a0c6a1cf477afc2141f9d6182f8b05a3\nparent 1f1bda2c5a1d897b39df7a936e14c31e74e1dfff\nauthor Aleksey Kladov <aleksey.kladov@gmail.com> 1582724086 +0100\ncommitter GitHub <noreply@github.com> 1582724086 +0100\n\nMerge pull request #3320 from matklad/no-dep\n\nRemove unnecessary dep"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9b11c183ed41676bce00e8550707b6552184f30b", "html_url": "https://github.com/rust-lang/rust/commit/9b11c183ed41676bce00e8550707b6552184f30b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9b11c183ed41676bce00e8550707b6552184f30b/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "80f8e474a0c6a1cf477afc2141f9d6182f8b05a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/80f8e474a0c6a1cf477afc2141f9d6182f8b05a3", "html_url": "https://github.com/rust-lang/rust/commit/80f8e474a0c6a1cf477afc2141f9d6182f8b05a3"}, {"sha": "1f1bda2c5a1d897b39df7a936e14c31e74e1dfff", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f1bda2c5a1d897b39df7a936e14c31e74e1dfff", "html_url": "https://github.com/rust-lang/rust/commit/1f1bda2c5a1d897b39df7a936e14c31e74e1dfff"}], "stats": {"total": 34, "additions": 8, "deletions": 26}, "files": [{"sha": "6901363fc564378e5277d23ac93cf25492502ee3", "filename": "editors/code/package-lock.json", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/9b11c183ed41676bce00e8550707b6552184f30b/editors%2Fcode%2Fpackage-lock.json", "raw_url": "https://github.com/rust-lang/rust/raw/9b11c183ed41676bce00e8550707b6552184f30b/editors%2Fcode%2Fpackage-lock.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage-lock.json?ref=9b11c183ed41676bce00e8550707b6552184f30b", "patch": "@@ -112,12 +112,6 @@\n                 \"@types/node\": \"*\"\n             }\n         },\n-        \"@types/throttle-debounce\": {\n-            \"version\": \"2.1.0\",\n-            \"resolved\": \"https://registry.npmjs.org/@types/throttle-debounce/-/throttle-debounce-2.1.0.tgz\",\n-            \"integrity\": \"sha512-5eQEtSCoESnh2FsiLTxE121IiE60hnMqcb435fShf4bpLRjEu1Eoekht23y6zXS9Ts3l+Szu3TARnTsA0GkOkQ==\",\n-            \"dev\": true\n-        },\n         \"@types/vscode\": {\n             \"version\": \"1.42.0\",\n             \"resolved\": \"https://registry.npmjs.org/@types/vscode/-/vscode-1.42.0.tgz\",\n@@ -1517,11 +1511,6 @@\n             \"integrity\": \"sha1-f17oI66AUgfACvLfSoTsP8+lcLQ=\",\n             \"dev\": true\n         },\n-        \"throttle-debounce\": {\n-            \"version\": \"2.1.0\",\n-            \"resolved\": \"https://registry.npmjs.org/throttle-debounce/-/throttle-debounce-2.1.0.tgz\",\n-            \"integrity\": \"sha512-AOvyNahXQuU7NN+VVvOOX+uW6FPaWdAOdRP5HfwYxAfCzXTFKRMoIMk+n+po318+ktcChx+F1Dd91G3YHeMKyg==\"\n-        },\n         \"through\": {\n             \"version\": \"2.3.8\",\n             \"resolved\": \"https://registry.npmjs.org/through/-/through-2.3.8.tgz\","}, {"sha": "27e2bbfc3dfa1ddafb0244b33fa9a36b5c6bc633", "filename": "editors/code/package.json", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9b11c183ed41676bce00e8550707b6552184f30b/editors%2Fcode%2Fpackage.json", "raw_url": "https://github.com/rust-lang/rust/raw/9b11c183ed41676bce00e8550707b6552184f30b/editors%2Fcode%2Fpackage.json", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fpackage.json?ref=9b11c183ed41676bce00e8550707b6552184f30b", "patch": "@@ -27,15 +27,13 @@\n     \"dependencies\": {\n         \"jsonc-parser\": \"^2.1.0\",\n         \"node-fetch\": \"^2.6.0\",\n-        \"throttle-debounce\": \"^2.1.0\",\n         \"vscode-languageclient\": \"^6.1.1\"\n     },\n     \"devDependencies\": {\n         \"@rollup/plugin-commonjs\": \"^11.0.2\",\n         \"@rollup/plugin-node-resolve\": \"^7.1.1\",\n         \"@types/node\": \"^12.12.27\",\n         \"@types/node-fetch\": \"^2.5.4\",\n-        \"@types/throttle-debounce\": \"^2.1.0\",\n         \"@types/vscode\": \"^1.42.0\",\n         \"@typescript-eslint/eslint-plugin\": \"^2.20.0\",\n         \"@typescript-eslint/parser\": \"^2.20.0\","}, {"sha": "8ed99bf0a070c5f6828bf2a85650427944235075", "filename": "editors/code/src/installation/download_artifact.ts", "status": "modified", "additions": 8, "deletions": 13, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/9b11c183ed41676bce00e8550707b6552184f30b/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_artifact.ts", "raw_url": "https://github.com/rust-lang/rust/raw/9b11c183ed41676bce00e8550707b6552184f30b/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_artifact.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Finstallation%2Fdownload_artifact.ts?ref=9b11c183ed41676bce00e8550707b6552184f30b", "patch": "@@ -5,7 +5,6 @@ import { strict as assert } from \"assert\";\n \n import { ArtifactReleaseInfo } from \"./interfaces\";\n import { downloadFile } from \"./download_file\";\n-import { throttle } from \"throttle-debounce\";\n \n /**\n  * Downloads artifact from given `downloadUrl`.\n@@ -38,19 +37,15 @@ export async function downloadArtifact(\n         async (progress, _cancellationToken) => {\n             let lastPrecentage = 0;\n             const filePermissions = 0o755; // (rwx, r_x, r_x)\n-            await downloadFile(downloadUrl, installationPath, filePermissions, throttle(\n-                200,\n-                /* noTrailing: */ true,\n-                (readBytes, totalBytes) => {\n-                    const newPercentage = (readBytes / totalBytes) * 100;\n-                    progress.report({\n-                        message: newPercentage.toFixed(0) + \"%\",\n-                        increment: newPercentage - lastPrecentage\n-                    });\n+            await downloadFile(downloadUrl, installationPath, filePermissions, (readBytes, totalBytes) => {\n+                const newPercentage = (readBytes / totalBytes) * 100;\n+                progress.report({\n+                    message: newPercentage.toFixed(0) + \"%\",\n+                    increment: newPercentage - lastPrecentage\n+                });\n \n-                    lastPrecentage = newPercentage;\n-                })\n-            );\n+                lastPrecentage = newPercentage;\n+            });\n         }\n     );\n }"}]}