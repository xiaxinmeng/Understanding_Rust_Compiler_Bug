{"sha": "c6ece966ac6745f71f21f98454193e41ad85fe42", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM2ZWNlOTY2YWM2NzQ1ZjcxZjIxZjk4NDU0MTkzZTQxYWQ4NWZlNDI=", "commit": {"author": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-06-27T15:05:40Z"}, "committer": {"name": "Mark Simulacrum", "email": "mark.simulacrum@gmail.com", "date": "2017-07-04T13:31:55Z"}, "message": "Cleanup utils", "tree": {"sha": "9e8b60615c8ce2272d299f806fb2f560e96a1c27", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9e8b60615c8ce2272d299f806fb2f560e96a1c27"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c6ece966ac6745f71f21f98454193e41ad85fe42", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c6ece966ac6745f71f21f98454193e41ad85fe42", "html_url": "https://github.com/rust-lang/rust/commit/c6ece966ac6745f71f21f98454193e41ad85fe42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c6ece966ac6745f71f21f98454193e41ad85fe42/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "388fca81f6605ce32a79d484723262f0e50965e4", "url": "https://api.github.com/repos/rust-lang/rust/commits/388fca81f6605ce32a79d484723262f0e50965e4", "html_url": "https://github.com/rust-lang/rust/commit/388fca81f6605ce32a79d484723262f0e50965e4"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "092fb04637ba72da2e0ec80fb421e4dcaee1dd24", "filename": "src/bootstrap/util.rs", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/c6ece966ac6745f71f21f98454193e41ad85fe42/src%2Fbootstrap%2Futil.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c6ece966ac6745f71f21f98454193e41ad85fe42/src%2Fbootstrap%2Futil.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Futil.rs?ref=c6ece966ac6745f71f21f98454193e41ad85fe42", "patch": "@@ -14,7 +14,6 @@\n //! not a lot of interesting happenings here unfortunately.\n \n use std::env;\n-use std::ffi::OsString;\n use std::fs;\n use std::io::{self, Write};\n use std::path::{Path, PathBuf};\n@@ -32,16 +31,9 @@ pub fn staticlib(name: &str, target: &str) -> String {\n     }\n }\n \n-/// Copies a file from `src` to `dst`, attempting to use hard links and then\n-/// falling back to an actually filesystem copy if necessary.\n+/// Copies a file from `src` to `dst`\n pub fn copy(src: &Path, dst: &Path) {\n-    // A call to `hard_link` will fail if `dst` exists, so remove it if it\n-    // already exists so we can try to help `hard_link` succeed.\n     let _ = fs::remove_file(&dst);\n-\n-    // Attempt to \"easy copy\" by creating a hard link (symlinks don't work on\n-    // windows), but if that fails just fall back to a slow `copy` operation.\n-    // let res = fs::hard_link(src, dst);\n     let res = fs::copy(src, dst);\n     if let Err(e) = res {\n         panic!(\"failed to copy `{}` to `{}`: {}\", src.display(),\n@@ -149,8 +141,7 @@ pub fn dylib_path_var() -> &'static str {\n /// Parses the `dylib_path_var()` environment variable, returning a list of\n /// paths that are members of this lookup path.\n pub fn dylib_path() -> Vec<PathBuf> {\n-    env::split_paths(&env::var_os(dylib_path_var()).unwrap_or(OsString::new()))\n-        .collect()\n+    env::split_paths(&env::var_os(dylib_path_var()).unwrap_or_default()).collect()\n }\n \n /// `push` all components to `buf`. On windows, append `.exe` to the last component.\n@@ -422,4 +413,4 @@ impl CiEnv {\n             cmd.env(\"TERM\", \"xterm\").args(&[\"--color\", \"always\"]);\n         }\n     }\n-}\n\\ No newline at end of file\n+}"}]}