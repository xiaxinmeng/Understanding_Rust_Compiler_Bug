{"sha": "90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkwYzhkODFlZTRkYTk5YzU5YWJhNzllMjRhY2EyNTdlODFkYmJiZjE=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-04-15T19:46:44Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2016-04-15T19:48:07Z"}, "message": "Rollup merge of #32945 - durka:rfc1494, r=pnkfelix\n\nimplement RFC amendment 1494\n\nAdds `:block` to the follow set for `:ty` and `:path`. See rust-lang/rfcs#1494.", "tree": {"sha": "8f5f45a4012b76f4431fa12fa2b37d6267573913", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8f5f45a4012b76f4431fa12fa2b37d6267573913"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJXEUV3AAoJEDu/TT4u95+YWbwQAMztCkDnTLG6Z/oAF+y4bxLH\nq08122os2BK7EaEErCgQ0G4cmPosoCFqBe8udyhqwBNn1quiqeCUubTER3WJjhrA\nd8F5/xpNFFVkx7XRlq1zJejYUNPvaxuZZ2EQQ3OFBRChxSW2QxbXvJfrP/62NiSG\nEndDfiuUecWxMxwMRtwuBVY1xE1KJoe31ahbLV0dcONfPhJTvYqj4Ye9XW0ZAXSr\nglxKQn55fnkBB4jPhj4fip6xx24M3L5ZdpUkxuGegNMNCujjs5GbRgwrUAdwBAWz\nR/7ZQFJtTZYw7JBsS5y+cIld6PxZiwu8SQ90FSBSSocKU41Cngl4InZOlyiL3h3p\nd1i2uGgY/rIXRRvJ/DffHIwvtUicS+nqYCPgGF9cj3xUEBGUStGsU4ILzup0NBpm\n/BkeyO4gc7rQXwpYZRKLkw9rlXMZwesc1cqm6vjQuhFgLi6zh8NIccotfu+hKdop\nSvzFdJojtC7suRGmHkQwgBiRuEa5s6JVmkIn4WogJZJC6ycpSCnJHJwu5OoOewWN\nGBjBXKRm+3TaRXZEqmlOydS9t7yAmuBXnLNK/is2BnFyu9wNX0x4dcRUbA+43bMi\nmbEaJTsYh5aRUOC0QJ6uCyfUDSdo6xJz/gGZvz/gbprKj9Fsnmlo9avEk7uCpW6B\n8hFL38B4l0YD11SOMZod\n=mfoj\n-----END PGP SIGNATURE-----", "payload": "tree 8f5f45a4012b76f4431fa12fa2b37d6267573913\nparent fbbe85c6bafce59e1be4a966c1529f396bd546f0\nparent 01aebf01bc0cd0d95e02cc4c91059f02e4b03b13\nauthor Manish Goregaokar <manishsmail@gmail.com> 1460749604 +0530\ncommitter Manish Goregaokar <manishsmail@gmail.com> 1460749687 +0530\n\nRollup merge of #32945 - durka:rfc1494, r=pnkfelix\n\nimplement RFC amendment 1494\n\nAdds `:block` to the follow set for `:ty` and `:path`. See rust-lang/rfcs#1494.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "html_url": "https://github.com/rust-lang/rust/commit/90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fbbe85c6bafce59e1be4a966c1529f396bd546f0", "url": "https://api.github.com/repos/rust-lang/rust/commits/fbbe85c6bafce59e1be4a966c1529f396bd546f0", "html_url": "https://github.com/rust-lang/rust/commit/fbbe85c6bafce59e1be4a966c1529f396bd546f0"}, {"sha": "01aebf01bc0cd0d95e02cc4c91059f02e4b03b13", "url": "https://api.github.com/repos/rust-lang/rust/commits/01aebf01bc0cd0d95e02cc4c91059f02e4b03b13", "html_url": "https://github.com/rust-lang/rust/commit/01aebf01bc0cd0d95e02cc4c91059f02e4b03b13"}], "stats": {"total": 11, "additions": 7, "deletions": 4}, "files": [{"sha": "87ab3dad50c7082e6374c554f3d776e692a9c8e8", "filename": "src/libsyntax/ext/tt/macro_rules.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fext%2Ftt%2Fmacro_rules.rs?ref=90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "patch": "@@ -1014,6 +1014,7 @@ fn is_in_follow(_: &ExtCtxt, tok: &Token, frag: &str) -> Result<bool, String> {\n                 match *tok {\n                     OpenDelim(token::DelimToken::Brace) | OpenDelim(token::DelimToken::Bracket) |\n                     Comma | FatArrow | Colon | Eq | Gt | Semi | BinOp(token::Or) => Ok(true),\n+                    MatchNt(_, ref frag, _, _) if frag.name.as_str() == \"block\" => Ok(true),\n                     Ident(i, _) if (i.name.as_str() == \"as\" ||\n                                     i.name.as_str() == \"where\") => Ok(true),\n                     _ => Ok(false)"}, {"sha": "f985340c524108a32c12526bb87b910a9c4d6a90", "filename": "src/test/compile-fail/macro-follow.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/src%2Ftest%2Fcompile-fail%2Fmacro-follow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/src%2Ftest%2Fcompile-fail%2Fmacro-follow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fmacro-follow.rs?ref=90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "patch": "@@ -55,7 +55,7 @@ macro_rules! follow_expr {\n     ($e:expr $m:meta) => {};  //~ERROR `$e:expr` is followed by `$m:meta`\n }\n // FOLLOW(ty) = {OpenDelim(Brace), Comma, FatArrow, Colon, Eq, Gt, Semi, Or,\n-//               Ident(as), Ident(where), OpenDelim(Bracket)}\n+//               Ident(as), Ident(where), OpenDelim(Bracket), Nonterminal(Block)}\n macro_rules! follow_ty {\n     ($t:ty ()) => {};       //~WARN  `$t:ty` is followed by `(`\n     ($t:ty []) => {};       // ok (RFC 1462)\n@@ -67,7 +67,7 @@ macro_rules! follow_ty {\n     ($t:ty $t:ty) => {};    //~ERROR `$t:ty` is followed by `$t:ty`\n     ($t:ty $s:stmt) => {};  //~ERROR `$t:ty` is followed by `$s:stmt`\n     ($t:ty $p:path) => {};  //~ERROR `$t:ty` is followed by `$p:path`\n-    ($t:ty $b:block) => {}; //~ERROR `$t:ty` is followed by `$b:block`\n+    ($t:ty $b:block) => {}; // ok (RFC 1494)\n     ($t:ty $i:ident) => {}; //~ERROR `$t:ty` is followed by `$i:ident`\n     ($t:ty $t:tt) => {};    //~ERROR `$t:ty` is followed by `$t:tt`\n     ($t:ty $i:item) => {};  //~ERROR `$t:ty` is followed by `$i:item`\n@@ -109,7 +109,7 @@ macro_rules! follow_path {\n     ($p:path $t:ty) => {};    //~ERROR `$p:path` is followed by `$t:ty`\n     ($p:path $s:stmt) => {};  //~ERROR `$p:path` is followed by `$s:stmt`\n     ($p:path $p:path) => {};  //~ERROR `$p:path` is followed by `$p:path`\n-    ($p:path $b:block) => {}; //~ERROR `$p:path` is followed by `$b:block`\n+    ($p:path $b:block) => {}; // ok (RFC 1494)\n     ($p:path $i:ident) => {}; //~ERROR `$p:path` is followed by `$i:ident`\n     ($p:path $t:tt) => {};    //~ERROR `$p:path` is followed by `$t:tt`\n     ($p:path $i:item) => {};  //~ERROR `$p:path` is followed by `$i:item`"}, {"sha": "dca676f8cf95fe71707d0d094b0ff44ee8856252", "filename": "src/test/run-pass/macro-follow.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/src%2Ftest%2Frun-pass%2Fmacro-follow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/90c8d81ee4da99c59aba79e24aca257e81dbbbf1/src%2Ftest%2Frun-pass%2Fmacro-follow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-follow.rs?ref=90c8d81ee4da99c59aba79e24aca257e81dbbbf1", "patch": "@@ -26,7 +26,7 @@ macro_rules! follow_expr {\n     ($e:expr ;) => {};\n }\n // FOLLOW(ty) = {OpenDelim(Brace), Comma, FatArrow, Colon, Eq, Gt, Semi, Or,\n-//               Ident(as), Ident(where), OpenDelim(Bracket)}\n+//               Ident(as), Ident(where), OpenDelim(Bracket), Nonterminal(Block)}\n macro_rules! follow_ty {\n     ($t:ty {}) => {};\n     ($t:ty ,) => {};\n@@ -39,6 +39,7 @@ macro_rules! follow_ty {\n     ($t:ty as) => {};\n     ($t:ty where) => {};\n     ($t:ty []) => {};\n+    ($t:ty $b:block) => {};\n }\n // FOLLOW(stmt) = FOLLOW(expr)\n macro_rules! follow_stmt {\n@@ -59,6 +60,7 @@ macro_rules! follow_path {\n     ($p:path as) => {};\n     ($p:path where) => {};\n     ($p:path []) => {};\n+    ($p:path $b:block) => {};\n }\n // FOLLOW(block) = any token\n macro_rules! follow_block {"}]}