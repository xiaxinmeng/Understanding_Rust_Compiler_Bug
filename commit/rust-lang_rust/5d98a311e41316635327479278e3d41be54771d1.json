{"sha": "5d98a311e41316635327479278e3d41be54771d1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVkOThhMzExZTQxMzE2NjM1MzI3NDc5Mjc4ZTNkNDFiZTU0NzcxZDE=", "commit": {"author": {"name": "Michael Bebenita", "email": "mbebenita@mozilla.com", "date": "2010-08-17T01:44:26Z"}, "committer": {"name": "Michael Bebenita", "email": "mbebenita@mozilla.com", "date": "2010-08-17T01:44:26Z"}, "message": "Putting out the burning tree on Windows. Turns out you can completely starve threads by not yielding on windows/vmware, really weird.", "tree": {"sha": "8a6ff71650223b2b6c452074308d4d6b4d2bea81", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a6ff71650223b2b6c452074308d4d6b4d2bea81"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5d98a311e41316635327479278e3d41be54771d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5d98a311e41316635327479278e3d41be54771d1", "html_url": "https://github.com/rust-lang/rust/commit/5d98a311e41316635327479278e3d41be54771d1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5d98a311e41316635327479278e3d41be54771d1/comments", "author": {"login": "mbebenita", "id": 311082, "node_id": "MDQ6VXNlcjMxMTA4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/311082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbebenita", "html_url": "https://github.com/mbebenita", "followers_url": "https://api.github.com/users/mbebenita/followers", "following_url": "https://api.github.com/users/mbebenita/following{/other_user}", "gists_url": "https://api.github.com/users/mbebenita/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbebenita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbebenita/subscriptions", "organizations_url": "https://api.github.com/users/mbebenita/orgs", "repos_url": "https://api.github.com/users/mbebenita/repos", "events_url": "https://api.github.com/users/mbebenita/events{/privacy}", "received_events_url": "https://api.github.com/users/mbebenita/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mbebenita", "id": 311082, "node_id": "MDQ6VXNlcjMxMTA4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/311082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mbebenita", "html_url": "https://github.com/mbebenita", "followers_url": "https://api.github.com/users/mbebenita/followers", "following_url": "https://api.github.com/users/mbebenita/following{/other_user}", "gists_url": "https://api.github.com/users/mbebenita/gists{/gist_id}", "starred_url": "https://api.github.com/users/mbebenita/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mbebenita/subscriptions", "organizations_url": "https://api.github.com/users/mbebenita/orgs", "repos_url": "https://api.github.com/users/mbebenita/repos", "events_url": "https://api.github.com/users/mbebenita/events{/privacy}", "received_events_url": "https://api.github.com/users/mbebenita/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14f5b5750d6509ca69180341b82e99f7fbf9fddb", "url": "https://api.github.com/repos/rust-lang/rust/commits/14f5b5750d6509ca69180341b82e99f7fbf9fddb", "html_url": "https://github.com/rust-lang/rust/commit/14f5b5750d6509ca69180341b82e99f7fbf9fddb"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "e49eeb2282ec064d9b98db1bbcf43ff03beb2ccd", "filename": "src/rt/rust_dom.cpp", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/5d98a311e41316635327479278e3d41be54771d1/src%2Frt%2Frust_dom.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/5d98a311e41316635327479278e3d41be54771d1/src%2Frt%2Frust_dom.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_dom.cpp?ref=5d98a311e41316635327479278e3d41be54771d1", "patch": "@@ -400,9 +400,9 @@ rust_dom::start_main_loop()\n \n         rust_task *scheduled_task = schedule_task();\n \n-        // If we cannot schedule a task because all other live tasks\n-        // are blocked, yield and hopefully some progress is made in\n-        // other domains.\n+        // The scheduler busy waits until a task is available for scheduling.\n+        // Eventually we'll want a smarter way to do this, perhaps sleep\n+        // for a minimum amount of time.\n \n         if (scheduled_task == NULL) {\n             if (_log.is_tracing(rust_log::TASK)) {"}, {"sha": "09a6f291c70832e5336ef0582470ea816f537419", "filename": "src/rt/sync/sync.cpp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d98a311e41316635327479278e3d41be54771d1/src%2Frt%2Fsync%2Fsync.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/5d98a311e41316635327479278e3d41be54771d1/src%2Frt%2Fsync%2Fsync.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fsync%2Fsync.cpp?ref=5d98a311e41316635327479278e3d41be54771d1", "patch": "@@ -5,7 +5,7 @@ void sync::yield() {\n #ifdef __APPLE__\n     pthread_yield_np();\n #elif __WIN32__\n-\n+    Sleep(1);\n #else\n     pthread_yield();\n #endif"}, {"sha": "0487b39796f52fa53b00100094014e1c7352a361", "filename": "src/rt/sync/timer.cpp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5d98a311e41316635327479278e3d41be54771d1/src%2Frt%2Fsync%2Ftimer.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/5d98a311e41316635327479278e3d41be54771d1/src%2Frt%2Fsync%2Ftimer.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Fsync%2Ftimer.cpp?ref=5d98a311e41316635327479278e3d41be54771d1", "patch": "@@ -6,12 +6,12 @@\n #endif\n \n timer::timer() {\n-    reset(0);\n #if __WIN32__\n     uint64_t ticks_per_second;\n     QueryPerformanceFrequency((LARGE_INTEGER *)&ticks_per_second);\n     _ticks_per_us = ticks_per_second / 1000000;\n #endif\n+    reset(0);\n }\n \n void"}]}