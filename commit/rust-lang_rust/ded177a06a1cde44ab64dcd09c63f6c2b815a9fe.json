{"sha": "ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlZDE3N2EwNmExY2RlNDRhYjY0ZGNkMDljNjNmNmMyYjgxNWE5ZmU=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-11-30T06:44:01Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-11-30T06:44:50Z"}, "message": "derive(Default) for Features", "tree": {"sha": "46db50adb2323c3a11ab36a47c42c74e885a206c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/46db50adb2323c3a11ab36a47c42c74e885a206c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "html_url": "https://github.com/rust-lang/rust/commit/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "79077f13ffa9194161a0ed574b036794ab1a8c36", "url": "https://api.github.com/repos/rust-lang/rust/commits/79077f13ffa9194161a0ed574b036794ab1a8c36", "html_url": "https://github.com/rust-lang/rust/commit/79077f13ffa9194161a0ed574b036794ab1a8c36"}], "stats": {"total": 18, "additions": 4, "deletions": 14}, "files": [{"sha": "7c0d39965fc00ff0522ed544827aae6a2f4d35e9", "filename": "src/librustc_feature/active.rs", "status": "modified", "additions": 2, "deletions": 12, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/src%2Flibrustc_feature%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/src%2Flibrustc_feature%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_feature%2Factive.rs?ref=ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "patch": "@@ -36,7 +36,7 @@ macro_rules! declare_features {\n             ),+];\n \n         /// A set of features to be used by later passes.\n-        #[derive(Clone)]\n+        #[derive(Clone, Default)]\n         pub struct Features {\n             /// `#![feature]` attrs for language features, for error reporting.\n             pub declared_lang_features: Vec<(Symbol, Span, Option<Symbol>)>,\n@@ -49,17 +49,7 @@ macro_rules! declare_features {\n         }\n \n         impl Features {\n-            pub fn new() -> Features {\n-                Features {\n-                    declared_lang_features: Vec::new(),\n-                    declared_lib_features: Vec::new(),\n-                    $($feature: false),+\n-                }\n-            }\n-\n-            pub fn walk_feature_fields<F>(&self, mut f: F)\n-                where F: FnMut(&str, bool)\n-            {\n+            pub fn walk_feature_fields(&self, mut f: impl FnMut(&str, bool)) {\n                 $(f(stringify!($feature), self.$feature);)+\n             }\n         }"}, {"sha": "26e51e83d625a542225640d8b854027ebac8900a", "filename": "src/librustc_parse/config.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/src%2Flibrustc_parse%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/src%2Flibrustc_parse%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_parse%2Fconfig.rs?ref=ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "patch": "@@ -47,7 +47,7 @@ pub fn features(mut krate: ast::Crate, sess: &ParseSess, edition: Edition,\n         } else { // the entire crate is unconfigured\n             krate.attrs = Vec::new();\n             krate.module.items = Vec::new();\n-            return (krate, Features::new());\n+            return (krate, Features::default());\n         }\n \n         features = get_features(&sess.span_diagnostic, &krate.attrs, edition, allow_features);"}, {"sha": "3d2c3b1d4f90121de47f7f580d50f3842f85366e", "filename": "src/libsyntax/feature_gate/check.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ded177a06a1cde44ab64dcd09c63f6c2b815a9fe/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate%2Fcheck.rs?ref=ded177a06a1cde44ab64dcd09c63f6c2b815a9fe", "patch": "@@ -641,7 +641,7 @@ pub fn get_features(span_handler: &Handler, krate_attrs: &[ast::Attribute],\n         err.emit();\n     }\n \n-    let mut features = Features::new();\n+    let mut features = Features::default();\n     let mut edition_enabled_features = FxHashMap::default();\n \n     for &edition in ALL_EDITIONS {"}]}