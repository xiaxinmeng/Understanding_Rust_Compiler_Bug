{"sha": "e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU2NWRiODE2MWQzOWUxZjI3YTFjNTI1MDI3YzkyZjhmMGFhN2Y5N2M=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-06-19T08:52:13Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-07-07T08:52:18Z"}, "message": "Fix test", "tree": {"sha": "2dd41894f273759e39f9a18bf74d9c995de9222c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2dd41894f273759e39f9a18bf74d9c995de9222c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "html_url": "https://github.com/rust-lang/rust/commit/e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "097de536e43e0040e5966ee8e4c75e84c973b2e0", "url": "https://api.github.com/repos/rust-lang/rust/commits/097de536e43e0040e5966ee8e4c75e84c973b2e0", "html_url": "https://github.com/rust-lang/rust/commit/097de536e43e0040e5966ee8e4c75e84c973b2e0"}], "stats": {"total": 9, "additions": 4, "deletions": 5}, "files": [{"sha": "e203ec2737fc7f2cb67465461145e921cb61be7b", "filename": "src/test/run-make-fulldeps/hotplug_codegen_backend/Makefile", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2FMakefile?ref=e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "patch": "@@ -4,6 +4,6 @@ all:\n \t/bin/echo || exit 0 # This test requires /bin/echo to exist\n \t$(RUSTC) the_backend.rs --crate-name the_backend --crate-type dylib \\\n \t\t-o $(TMPDIR)/the_backend.dylib\n-\t$(RUSTC) some_crate.rs --crate-name some_crate --crate-type bin -o $(TMPDIR)/some_crate \\\n+\t$(RUSTC) some_crate.rs --crate-name some_crate --crate-type lib -o $(TMPDIR)/some_crate \\\n \t\t-Z codegen-backend=$(TMPDIR)/the_backend.dylib -Z unstable-options\n \tgrep -x \"This has been \\\"compiled\\\" successfully.\" $(TMPDIR)/some_crate"}, {"sha": "bfa8b6b3ef69a24af26f7f1bd216b9276dc68b83", "filename": "src/test/run-make-fulldeps/hotplug_codegen_backend/some_crate.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fsome_crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fsome_crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fsome_crate.rs?ref=e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "patch": "@@ -8,6 +8,5 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-fn main() {\n-    ::std::process::exit(1);\n-}\n+#![feature(no_core)]\n+#![no_core]"}, {"sha": "a3cd033f86382ed00a78ddcffa21806e6e716c19", "filename": "src/test/run-make-fulldeps/hotplug_codegen_backend/the_backend.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e65db8161d39e1f27a1c525027c92f8f0aa7f97c/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make-fulldeps%2Fhotplug_codegen_backend%2Fthe_backend.rs?ref=e65db8161d39e1f27a1c525027c92f8f0aa7f97c", "patch": "@@ -63,7 +63,7 @@ impl CodegenBackend for TheBackend {\n         let crate_name = ongoing_codegen.downcast::<Symbol>()\n             .expect(\"in join_codegen_and_link: ongoing_codegen is not a Symbol\");\n         for &crate_type in sess.opts.crate_types.iter() {\n-            if crate_type != CrateType::CrateTypeExecutable {\n+            if crate_type != CrateType::CrateTypeRlib {\n                 sess.fatal(&format!(\"Crate type is {:?}\", crate_type));\n             }\n             let output_name ="}]}