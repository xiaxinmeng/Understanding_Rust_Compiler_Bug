{"sha": "175c78bc171fb400d1af4dda49ca14b58fb4534b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE3NWM3OGJjMTcxZmI0MDBkMWFmNGRkYTQ5Y2ExNGI1OGZiNDUzNGI=", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-07T06:06:23Z"}, "committer": {"name": "Yuki Okushi", "email": "huyuumi.dev@gmail.com", "date": "2020-01-07T06:06:23Z"}, "message": "Split up `collapsible_if` ui test", "tree": {"sha": "549437f1df482e55d756f685199ae12aeb9ee4fb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/549437f1df482e55d756f685199ae12aeb9ee4fb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/175c78bc171fb400d1af4dda49ca14b58fb4534b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/175c78bc171fb400d1af4dda49ca14b58fb4534b", "html_url": "https://github.com/rust-lang/rust/commit/175c78bc171fb400d1af4dda49ca14b58fb4534b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/175c78bc171fb400d1af4dda49ca14b58fb4534b/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e8642c7a2900bed28003a98d4db8b62290ac802f", "url": "https://api.github.com/repos/rust-lang/rust/commits/e8642c7a2900bed28003a98d4db8b62290ac802f", "html_url": "https://github.com/rust-lang/rust/commit/e8642c7a2900bed28003a98d4db8b62290ac802f"}], "stats": {"total": 585, "additions": 302, "deletions": 283}, "files": [{"sha": "a31f748670cea8c710fd4859ecd87ac60d06c89b", "filename": "tests/ui/collapsible_else_if.fixed", "status": "added", "additions": 66, "deletions": 0, "changes": 66, "blob_url": "https://github.com/rust-lang/rust/blob/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_else_if.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_else_if.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_else_if.fixed?ref=175c78bc171fb400d1af4dda49ca14b58fb4534b", "patch": "@@ -0,0 +1,66 @@\n+// run-rustfix\n+#![allow(clippy::cognitive_complexity, clippy::assertions_on_constants)]\n+\n+#[rustfmt::skip]\n+#[warn(clippy::collapsible_if)]\n+fn main() {\n+    let x = \"hello\";\n+    let y = \"world\";\n+    // Collapse `else { if .. }` to `else if ..`\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else if y == \"world\" {\n+    println!(\"world!\")\n+}\n+\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else if let Some(42) = Some(42) {\n+    println!(\"world!\")\n+}\n+\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else if y == \"world\" {\n+    println!(\"world\")\n+}\n+else {\n+    println!(\"!\")\n+}\n+\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else if let Some(42) = Some(42) {\n+    println!(\"world\")\n+}\n+else {\n+    println!(\"!\")\n+}\n+\n+    if let Some(42) = Some(42) {\n+        print!(\"Hello \");\n+    } else if let Some(42) = Some(42) {\n+    println!(\"world\")\n+}\n+else {\n+    println!(\"!\")\n+}\n+\n+    if let Some(42) = Some(42) {\n+        print!(\"Hello \");\n+    } else if x == \"hello\" {\n+    println!(\"world\")\n+}\n+else {\n+    println!(\"!\")\n+}\n+\n+    if let Some(42) = Some(42) {\n+        print!(\"Hello \");\n+    } else if let Some(42) = Some(42) {\n+    println!(\"world\")\n+}\n+else {\n+    println!(\"!\")\n+}\n+}"}, {"sha": "79a27aafc4d9952683eb10763495213e7b7c51ff", "filename": "tests/ui/collapsible_else_if.rs", "status": "added", "additions": 80, "deletions": 0, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_else_if.rs", "raw_url": "https://github.com/rust-lang/rust/raw/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_else_if.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_else_if.rs?ref=175c78bc171fb400d1af4dda49ca14b58fb4534b", "patch": "@@ -0,0 +1,80 @@\n+// run-rustfix\n+#![allow(clippy::cognitive_complexity, clippy::assertions_on_constants)]\n+\n+#[rustfmt::skip]\n+#[warn(clippy::collapsible_if)]\n+fn main() {\n+    let x = \"hello\";\n+    let y = \"world\";\n+    // Collapse `else { if .. }` to `else if ..`\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else {\n+        if y == \"world\" {\n+            println!(\"world!\")\n+        }\n+    }\n+\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else {\n+        if let Some(42) = Some(42) {\n+            println!(\"world!\")\n+        }\n+    }\n+\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else {\n+        if y == \"world\" {\n+            println!(\"world\")\n+        }\n+        else {\n+            println!(\"!\")\n+        }\n+    }\n+\n+    if x == \"hello\" {\n+        print!(\"Hello \");\n+    } else {\n+        if let Some(42) = Some(42) {\n+            println!(\"world\")\n+        }\n+        else {\n+            println!(\"!\")\n+        }\n+    }\n+\n+    if let Some(42) = Some(42) {\n+        print!(\"Hello \");\n+    } else {\n+        if let Some(42) = Some(42) {\n+            println!(\"world\")\n+        }\n+        else {\n+            println!(\"!\")\n+        }\n+    }\n+\n+    if let Some(42) = Some(42) {\n+        print!(\"Hello \");\n+    } else {\n+        if x == \"hello\" {\n+            println!(\"world\")\n+        }\n+        else {\n+            println!(\"!\")\n+        }\n+    }\n+\n+    if let Some(42) = Some(42) {\n+        print!(\"Hello \");\n+    } else {\n+        if let Some(42) = Some(42) {\n+            println!(\"world\")\n+        }\n+        else {\n+            println!(\"!\")\n+        }\n+    }\n+}"}, {"sha": "26e3635c2d1c3be30660c02b602b63c8b9872bc7", "filename": "tests/ui/collapsible_else_if.stderr", "status": "added", "additions": 154, "deletions": 0, "changes": 154, "blob_url": "https://github.com/rust-lang/rust/blob/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_else_if.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_else_if.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_else_if.stderr?ref=175c78bc171fb400d1af4dda49ca14b58fb4534b", "patch": "@@ -0,0 +1,154 @@\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:12:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if y == \"world\" {\n+LL | |             println!(\"world!\")\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+   = note: `-D clippy::collapsible-if` implied by `-D warnings`\n+help: try\n+   |\n+LL |     } else if y == \"world\" {\n+LL |     println!(\"world!\")\n+LL | }\n+   |\n+\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:20:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if let Some(42) = Some(42) {\n+LL | |             println!(\"world!\")\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+help: try\n+   |\n+LL |     } else if let Some(42) = Some(42) {\n+LL |     println!(\"world!\")\n+LL | }\n+   |\n+\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:28:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if y == \"world\" {\n+LL | |             println!(\"world\")\n+LL | |         }\n+...  |\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+help: try\n+   |\n+LL |     } else if y == \"world\" {\n+LL |     println!(\"world\")\n+LL | }\n+LL | else {\n+LL |     println!(\"!\")\n+LL | }\n+   |\n+\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:39:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if let Some(42) = Some(42) {\n+LL | |             println!(\"world\")\n+LL | |         }\n+...  |\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+help: try\n+   |\n+LL |     } else if let Some(42) = Some(42) {\n+LL |     println!(\"world\")\n+LL | }\n+LL | else {\n+LL |     println!(\"!\")\n+LL | }\n+   |\n+\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:50:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if let Some(42) = Some(42) {\n+LL | |             println!(\"world\")\n+LL | |         }\n+...  |\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+help: try\n+   |\n+LL |     } else if let Some(42) = Some(42) {\n+LL |     println!(\"world\")\n+LL | }\n+LL | else {\n+LL |     println!(\"!\")\n+LL | }\n+   |\n+\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:61:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if x == \"hello\" {\n+LL | |             println!(\"world\")\n+LL | |         }\n+...  |\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+help: try\n+   |\n+LL |     } else if x == \"hello\" {\n+LL |     println!(\"world\")\n+LL | }\n+LL | else {\n+LL |     println!(\"!\")\n+LL | }\n+   |\n+\n+error: this `else { if .. }` block can be collapsed\n+  --> $DIR/collapsible_else_if.rs:72:12\n+   |\n+LL |       } else {\n+   |  ____________^\n+LL | |         if let Some(42) = Some(42) {\n+LL | |             println!(\"world\")\n+LL | |         }\n+...  |\n+LL | |         }\n+LL | |     }\n+   | |_____^\n+   |\n+help: try\n+   |\n+LL |     } else if let Some(42) = Some(42) {\n+LL |     println!(\"world\")\n+LL | }\n+LL | else {\n+LL |     println!(\"!\")\n+LL | }\n+   |\n+\n+error: aborting due to 7 previous errors\n+"}, {"sha": "e8f90b3164a9d0e8651c8ec8e4d5caa1adfdce31", "filename": "tests/ui/collapsible_if.fixed", "status": "modified", "additions": 0, "deletions": 58, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_if.fixed", "raw_url": "https://github.com/rust-lang/rust/raw/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_if.fixed", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.fixed?ref=175c78bc171fb400d1af4dda49ca14b58fb4534b", "patch": "@@ -30,64 +30,6 @@ fn main() {\n     println!(\"world!\")\n }\n \n-    // Collapse `else { if .. }` to `else if ..`\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else if y == \"world\" {\n-    println!(\"world!\")\n-}\n-\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else if let Some(42) = Some(42) {\n-    println!(\"world!\")\n-}\n-\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else if y == \"world\" {\n-    println!(\"world\")\n-}\n-else {\n-    println!(\"!\")\n-}\n-\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else if let Some(42) = Some(42) {\n-    println!(\"world\")\n-}\n-else {\n-    println!(\"!\")\n-}\n-\n-    if let Some(42) = Some(42) {\n-        print!(\"Hello \");\n-    } else if let Some(42) = Some(42) {\n-    println!(\"world\")\n-}\n-else {\n-    println!(\"!\")\n-}\n-\n-    if let Some(42) = Some(42) {\n-        print!(\"Hello \");\n-    } else if x == \"hello\" {\n-    println!(\"world\")\n-}\n-else {\n-    println!(\"!\")\n-}\n-\n-    if let Some(42) = Some(42) {\n-        print!(\"Hello \");\n-    } else if let Some(42) = Some(42) {\n-    println!(\"world\")\n-}\n-else {\n-    println!(\"!\")\n-}\n-\n     // Works because any if with an else statement cannot be collapsed.\n     if x == \"hello\" {\n         if y == \"world\" {"}, {"sha": "503cb35f8588eb9fc06bd9e0bcb15af46fea9701", "filename": "tests/ui/collapsible_if.rs", "status": "modified", "additions": 0, "deletions": 72, "changes": 72, "blob_url": "https://github.com/rust-lang/rust/blob/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_if.rs", "raw_url": "https://github.com/rust-lang/rust/raw/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_if.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.rs?ref=175c78bc171fb400d1af4dda49ca14b58fb4534b", "patch": "@@ -42,78 +42,6 @@ fn main() {\n         }\n     }\n \n-    // Collapse `else { if .. }` to `else if ..`\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else {\n-        if y == \"world\" {\n-            println!(\"world!\")\n-        }\n-    }\n-\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else {\n-        if let Some(42) = Some(42) {\n-            println!(\"world!\")\n-        }\n-    }\n-\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else {\n-        if y == \"world\" {\n-            println!(\"world\")\n-        }\n-        else {\n-            println!(\"!\")\n-        }\n-    }\n-\n-    if x == \"hello\" {\n-        print!(\"Hello \");\n-    } else {\n-        if let Some(42) = Some(42) {\n-            println!(\"world\")\n-        }\n-        else {\n-            println!(\"!\")\n-        }\n-    }\n-\n-    if let Some(42) = Some(42) {\n-        print!(\"Hello \");\n-    } else {\n-        if let Some(42) = Some(42) {\n-            println!(\"world\")\n-        }\n-        else {\n-            println!(\"!\")\n-        }\n-    }\n-\n-    if let Some(42) = Some(42) {\n-        print!(\"Hello \");\n-    } else {\n-        if x == \"hello\" {\n-            println!(\"world\")\n-        }\n-        else {\n-            println!(\"!\")\n-        }\n-    }\n-\n-    if let Some(42) = Some(42) {\n-        print!(\"Hello \");\n-    } else {\n-        if let Some(42) = Some(42) {\n-            println!(\"world\")\n-        }\n-        else {\n-            println!(\"!\")\n-        }\n-    }\n-\n     // Works because any if with an else statement cannot be collapsed.\n     if x == \"hello\" {\n         if y == \"world\" {"}, {"sha": "a204ccd4d82004423f3a4b696fbccb2dbe762ed9", "filename": "tests/ui/collapsible_if.stderr", "status": "modified", "additions": 2, "deletions": 153, "changes": 155, "blob_url": "https://github.com/rust-lang/rust/blob/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_if.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/175c78bc171fb400d1af4dda49ca14b58fb4534b/tests%2Fui%2Fcollapsible_if.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fcollapsible_if.stderr?ref=175c78bc171fb400d1af4dda49ca14b58fb4534b", "patch": "@@ -101,159 +101,8 @@ LL |     println!(\"world!\")\n LL | }\n    |\n \n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:48:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if y == \"world\" {\n-LL | |             println!(\"world!\")\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if y == \"world\" {\n-LL |     println!(\"world!\")\n-LL | }\n-   |\n-\n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:56:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if let Some(42) = Some(42) {\n-LL | |             println!(\"world!\")\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if let Some(42) = Some(42) {\n-LL |     println!(\"world!\")\n-LL | }\n-   |\n-\n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:64:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if y == \"world\" {\n-LL | |             println!(\"world\")\n-LL | |         }\n-...  |\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if y == \"world\" {\n-LL |     println!(\"world\")\n-LL | }\n-LL | else {\n-LL |     println!(\"!\")\n-LL | }\n-   |\n-\n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:75:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if let Some(42) = Some(42) {\n-LL | |             println!(\"world\")\n-LL | |         }\n-...  |\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if let Some(42) = Some(42) {\n-LL |     println!(\"world\")\n-LL | }\n-LL | else {\n-LL |     println!(\"!\")\n-LL | }\n-   |\n-\n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:86:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if let Some(42) = Some(42) {\n-LL | |             println!(\"world\")\n-LL | |         }\n-...  |\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if let Some(42) = Some(42) {\n-LL |     println!(\"world\")\n-LL | }\n-LL | else {\n-LL |     println!(\"!\")\n-LL | }\n-   |\n-\n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:97:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if x == \"hello\" {\n-LL | |             println!(\"world\")\n-LL | |         }\n-...  |\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if x == \"hello\" {\n-LL |     println!(\"world\")\n-LL | }\n-LL | else {\n-LL |     println!(\"!\")\n-LL | }\n-   |\n-\n-error: this `else { if .. }` block can be collapsed\n-  --> $DIR/collapsible_if.rs:108:12\n-   |\n-LL |       } else {\n-   |  ____________^\n-LL | |         if let Some(42) = Some(42) {\n-LL | |             println!(\"world\")\n-LL | |         }\n-...  |\n-LL | |         }\n-LL | |     }\n-   | |_____^\n-   |\n-help: try\n-   |\n-LL |     } else if let Some(42) = Some(42) {\n-LL |     println!(\"world\")\n-LL | }\n-LL | else {\n-LL |     println!(\"!\")\n-LL | }\n-   |\n-\n error: this if statement can be collapsed\n-  --> $DIR/collapsible_if.rs:167:5\n+  --> $DIR/collapsible_if.rs:95:5\n    |\n LL | /     if x == \"hello\" {\n LL | |         if y == \"world\" { // Collapsible\n@@ -269,5 +118,5 @@ LL |     println!(\"Hello world!\");\n LL | }\n    |\n \n-error: aborting due to 14 previous errors\n+error: aborting due to 7 previous errors\n "}]}