{"sha": "8b12e28e43245c11653aee087cbc738b0536ccf8", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiMTJlMjhlNDMyNDVjMTE2NTNhZWUwODdjYmM3MzhiMDUzNmNjZjg=", "commit": {"author": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-08-23T17:00:56Z"}, "committer": {"name": "mcarton", "email": "cartonmartin+git@gmail.com", "date": "2016-08-23T17:00:56Z"}, "message": "`in_macro` check in `MISSING_DOCS_IN_PRIVATE_ITEMS`", "tree": {"sha": "a72ede6dd81be7532008b5dbfe689384db0dd28e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a72ede6dd81be7532008b5dbfe689384db0dd28e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b12e28e43245c11653aee087cbc738b0536ccf8", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIcBAABCAAGBQJXvIFfAAoJEF5CfHlMukXoEN0P/08O+qg0W+2DM0CYM9FWTqx6\niG7A8ImFP4NzSSJgXEg6pYa0VFfUnhxEt+aEbDYmlUgwll8XKjYz5aLGsV9FGifP\nLilcjIyIjIdLoFeO9ceBPaVBz6zaFP6nR/888OHf1f7XfOMtAkcW9MbYYEaVNtok\nsBt4RzcO1N8+bN9M+mPaUiM5R1ze73Fet3N9iPMeNdAcoPq2YdROhyPpfCoXB2UL\nkX79RP2PViRFwFYYm1DpZ2wVCklcuS2eEC7QTyC+VxNzhYYdOwv21rIKzPfDCqR3\n2X3Xu9qDdPw0e0e/JId9dKa/hO4SJpI0TMT27Nd4DKuOn7uMWja6kK7TXfL9LwZs\njMOzE7dD/RQMNhSDWaBYb4Ew6aF52AbCfWyNNIAdPyOFtfZWZ/O3ktIyCCThdoyX\nZuGv2sCQ++ueecXidND064akUTb/WjFj15JbmBspbG0my2A4Y9/lPg4OiIlmfoxo\nJsgePuiGsfgB+l7pL27uZnOfd1MqNUYPy8e7UlH7wDwVcVzHr4O0xSAtK1uh7+Pi\nxeBIEW/Xs33HgAYFzcXFfblx24GkFrKS0NYWYDDkDQmazrTHBCS0Nn6xGBujNDx/\n5q+FZx4DV4LRChGjY6WeNbDiBmcCD7dAIbBtjOX5MRtM0H7WWRTKEV6LNOaMbNPw\nuCu6CCsy7+RkayGIm4IA\n=QCBm\n-----END PGP SIGNATURE-----", "payload": "tree a72ede6dd81be7532008b5dbfe689384db0dd28e\nparent 36d8ca04a158ba617ae020c73f14792d808ad103\nauthor mcarton <cartonmartin+git@gmail.com> 1471971656 +0200\ncommitter mcarton <cartonmartin+git@gmail.com> 1471971656 +0200\n\n`in_macro` check in `MISSING_DOCS_IN_PRIVATE_ITEMS`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b12e28e43245c11653aee087cbc738b0536ccf8", "html_url": "https://github.com/rust-lang/rust/commit/8b12e28e43245c11653aee087cbc738b0536ccf8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b12e28e43245c11653aee087cbc738b0536ccf8/comments", "author": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mcarton", "id": 3751788, "node_id": "MDQ6VXNlcjM3NTE3ODg=", "avatar_url": "https://avatars.githubusercontent.com/u/3751788?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mcarton", "html_url": "https://github.com/mcarton", "followers_url": "https://api.github.com/users/mcarton/followers", "following_url": "https://api.github.com/users/mcarton/following{/other_user}", "gists_url": "https://api.github.com/users/mcarton/gists{/gist_id}", "starred_url": "https://api.github.com/users/mcarton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mcarton/subscriptions", "organizations_url": "https://api.github.com/users/mcarton/orgs", "repos_url": "https://api.github.com/users/mcarton/repos", "events_url": "https://api.github.com/users/mcarton/events{/privacy}", "received_events_url": "https://api.github.com/users/mcarton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "36d8ca04a158ba617ae020c73f14792d808ad103", "url": "https://api.github.com/repos/rust-lang/rust/commits/36d8ca04a158ba617ae020c73f14792d808ad103", "html_url": "https://github.com/rust-lang/rust/commit/36d8ca04a158ba617ae020c73f14792d808ad103"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "0871f5ab5755550ff0dca320ecefd040548a1a75", "filename": "clippy_lints/src/missing_doc.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8b12e28e43245c11653aee087cbc738b0536ccf8/clippy_lints%2Fsrc%2Fmissing_doc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b12e28e43245c11653aee087cbc738b0536ccf8/clippy_lints%2Fsrc%2Fmissing_doc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmissing_doc.rs?ref=8b12e28e43245c11653aee087cbc738b0536ccf8", "patch": "@@ -16,12 +16,14 @@\n  *\n  * [`missing_doc`]: https://github.com/rust-lang/rust/blob/d6d05904697d89099b55da3331155392f1db9c00/src/librustc_lint/builtin.rs#L246\n  */\n+\n use rustc::hir;\n use rustc::lint::*;\n use rustc::ty;\n use syntax::ast;\n use syntax::attr::{self, AttrMetaMethods};\n use syntax::codemap::Span;\n+use utils::in_macro;\n \n /// **What it does:** Warns if there is missing doc for any documentable item (public or private).\n ///\n@@ -74,6 +76,10 @@ impl MissingDoc {\n             return;\n         }\n \n+        if in_macro(cx, sp) {\n+            return;\n+        }\n+\n         let has_doc = attrs.iter().any(|a| a.is_value_str() && a.name() == \"doc\");\n         if !has_doc {\n             cx.span_lint(MISSING_DOCS_IN_PRIVATE_ITEMS, sp,"}]}