{"sha": "9111e9dd01ac08b5a7e40ad0f348946816d6d140", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxMTFlOWRkMDFhYzA4YjVhN2U0MGFkMGYzNDg5NDY4MTZkNmQxNDA=", "commit": {"author": {"name": "\u00d6mer Sinan A\u011facan", "email": "omeragacan@gmail.com", "date": "2021-01-16T09:46:57Z"}, "committer": {"name": "\u00d6mer Sinan A\u011facan", "email": "omeragacan@gmail.com", "date": "2021-01-17T14:40:58Z"}, "message": "rustc_parse_format: Fix character indices in find_skips\n\nFixes #81006", "tree": {"sha": "10ba859e7aa4ad2162f58d401974a1c8aa6f6c72", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/10ba859e7aa4ad2162f58d401974a1c8aa6f6c72"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9111e9dd01ac08b5a7e40ad0f348946816d6d140", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9111e9dd01ac08b5a7e40ad0f348946816d6d140", "html_url": "https://github.com/rust-lang/rust/commit/9111e9dd01ac08b5a7e40ad0f348946816d6d140", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9111e9dd01ac08b5a7e40ad0f348946816d6d140/comments", "author": {"login": "osa1", "id": 448274, "node_id": "MDQ6VXNlcjQ0ODI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/448274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/osa1", "html_url": "https://github.com/osa1", "followers_url": "https://api.github.com/users/osa1/followers", "following_url": "https://api.github.com/users/osa1/following{/other_user}", "gists_url": "https://api.github.com/users/osa1/gists{/gist_id}", "starred_url": "https://api.github.com/users/osa1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/osa1/subscriptions", "organizations_url": "https://api.github.com/users/osa1/orgs", "repos_url": "https://api.github.com/users/osa1/repos", "events_url": "https://api.github.com/users/osa1/events{/privacy}", "received_events_url": "https://api.github.com/users/osa1/received_events", "type": "User", "site_admin": false}, "committer": {"login": "osa1", "id": 448274, "node_id": "MDQ6VXNlcjQ0ODI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/448274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/osa1", "html_url": "https://github.com/osa1", "followers_url": "https://api.github.com/users/osa1/followers", "following_url": "https://api.github.com/users/osa1/following{/other_user}", "gists_url": "https://api.github.com/users/osa1/gists{/gist_id}", "starred_url": "https://api.github.com/users/osa1/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/osa1/subscriptions", "organizations_url": "https://api.github.com/users/osa1/orgs", "repos_url": "https://api.github.com/users/osa1/repos", "events_url": "https://api.github.com/users/osa1/events{/privacy}", "received_events_url": "https://api.github.com/users/osa1/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d51cf9601c714a8383aecade7c98559dd4831625", "url": "https://api.github.com/repos/rust-lang/rust/commits/d51cf9601c714a8383aecade7c98559dd4831625", "html_url": "https://github.com/rust-lang/rust/commit/d51cf9601c714a8383aecade7c98559dd4831625"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "f150f7a41ae807d9bace8b7a464312eaa04fe85b", "filename": "compiler/rustc_parse_format/src/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9111e9dd01ac08b5a7e40ad0f348946816d6d140/compiler%2Frustc_parse_format%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9111e9dd01ac08b5a7e40ad0f348946816d6d140/compiler%2Frustc_parse_format%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse_format%2Fsrc%2Flib.rs?ref=9111e9dd01ac08b5a7e40ad0f348946816d6d140", "patch": "@@ -736,7 +736,7 @@ fn find_skips_from_snippet(\n \n     fn find_skips(snippet: &str, is_raw: bool) -> Vec<usize> {\n         let mut eat_ws = false;\n-        let mut s = snippet.chars().enumerate().peekable();\n+        let mut s = snippet.char_indices().peekable();\n         let mut skips = vec![];\n         while let Some((pos, c)) = s.next() {\n             match (c, s.peek()) {"}, {"sha": "602eb59742879c90830ee3f4b59d9e0ec9270da9", "filename": "src/test/ui/macros/issue-81006.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9111e9dd01ac08b5a7e40ad0f348946816d6d140/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9111e9dd01ac08b5a7e40ad0f348946816d6d140/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.rs?ref=9111e9dd01ac08b5a7e40ad0f348946816d6d140", "patch": "@@ -0,0 +1,10 @@\n+// check-fail\n+\n+// First format below would cause a panic, second would generate error with incorrect span\n+\n+fn main() {\n+    let _ = format!(\"\u2192{}\u2192\\n\");\n+    //~^ ERROR 1 positional argument in format string, but no arguments were given\n+    let _ = format!(\"\u2192{} \\n\");\n+    //~^ ERROR 1 positional argument in format string, but no arguments were given\n+}"}, {"sha": "14a8cbe0155f96917d4677ddc9c1b68eebaf134a", "filename": "src/test/ui/macros/issue-81006.stderr", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/9111e9dd01ac08b5a7e40ad0f348946816d6d140/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/9111e9dd01ac08b5a7e40ad0f348946816d6d140/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmacros%2Fissue-81006.stderr?ref=9111e9dd01ac08b5a7e40ad0f348946816d6d140", "patch": "@@ -0,0 +1,14 @@\n+error: 1 positional argument in format string, but no arguments were given\n+  --> $DIR/issue-81006.rs:6:23\n+   |\n+LL |     let _ = format!(\"\u2192{}\u2192\\n\");\n+   |                       ^^\n+\n+error: 1 positional argument in format string, but no arguments were given\n+  --> $DIR/issue-81006.rs:8:23\n+   |\n+LL |     let _ = format!(\"\u2192{} \\n\");\n+   |                       ^^\n+\n+error: aborting due to 2 previous errors\n+"}]}