{"sha": "0b22d4170eddc179680c0da4415fab721e02f85a", "node_id": "C_kwDOAAsO6NoAKDBiMjJkNDE3MGVkZGMxNzk2ODBjMGRhNDQxNWZhYjcyMWUwMmY4NWE", "commit": {"author": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-02-08T06:36:51Z"}, "committer": {"name": "Jacob Hoffman-Andrews", "email": "github@hoffman-andrews.com", "date": "2022-02-10T07:34:10Z"}, "message": "rustdoc: fix spacing of non-toggled impl blocks\n\nWe recently removed the \"up here\" arrows on item-infos, and adjusted\nvertical spacing so that even without the arrow, it would be visually\nclear which item the item-info belonged to. The new CSS styles for\nvertical spacing only applied to toggles, though. This missed\nnon-toggled impl blocks - for instance, those without any methods, like\nhttps://doc.rust-lang.org/nightly/std/marker/trait.Send.html#implementors.\nThe result was lists of implementors that were spaced too closely. This\nPR fixes the spacing by making it apply to non-toggled impl blocks as\nwell.\n\nThis also fixes an issue where item-infos were displayed too far below\ntheir items. That was a result of display: table on .item-info .stab.\nChanged that to display: inline-block.", "tree": {"sha": "593b478ee2180447b9cbb91539c9495d6960a6e4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/593b478ee2180447b9cbb91539c9495d6960a6e4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0b22d4170eddc179680c0da4415fab721e02f85a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0b22d4170eddc179680c0da4415fab721e02f85a", "html_url": "https://github.com/rust-lang/rust/commit/0b22d4170eddc179680c0da4415fab721e02f85a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0b22d4170eddc179680c0da4415fab721e02f85a/comments", "author": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsha", "id": 220205, "node_id": "MDQ6VXNlcjIyMDIwNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/220205?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsha", "html_url": "https://github.com/jsha", "followers_url": "https://api.github.com/users/jsha/followers", "following_url": "https://api.github.com/users/jsha/following{/other_user}", "gists_url": "https://api.github.com/users/jsha/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsha/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsha/subscriptions", "organizations_url": "https://api.github.com/users/jsha/orgs", "repos_url": "https://api.github.com/users/jsha/repos", "events_url": "https://api.github.com/users/jsha/events{/privacy}", "received_events_url": "https://api.github.com/users/jsha/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5d6ee0db96aada145725838379f909bbb8aa2312", "url": "https://api.github.com/repos/rust-lang/rust/commits/5d6ee0db96aada145725838379f909bbb8aa2312", "html_url": "https://github.com/rust-lang/rust/commit/5d6ee0db96aada145725838379f909bbb8aa2312"}], "stats": {"total": 26, "additions": 23, "deletions": 3}, "files": [{"sha": "18b424663b269b7ac3fbfbae6992e287def9a78b", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=0b22d4170eddc179680c0da4415fab721e02f85a", "patch": "@@ -1041,7 +1041,7 @@ body.blur > :not(#help) {\n }\n \n .item-info .stab {\n-\tdisplay: table;\n+\tdisplay: inline-block;\n }\n .stab {\n \tpadding: 3px;\n@@ -2039,7 +2039,8 @@ details.rustdoc-toggle[open] > summary.hideme::after {\n }\n \n .method-toggle summary,\n-.implementors-toggle summary {\n+.implementors-toggle summary,\n+.impl {\n \tmargin-bottom: 0.75em;\n }\n "}, {"sha": "6460a917e92d008dc0885d6ca225d4d2d630f9db", "filename": "src/test/rustdoc-gui/implementors.goml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fimplementors.goml?ref=0b22d4170eddc179680c0da4415fab721e02f85a", "patch": "@@ -14,3 +14,7 @@ assert: (\"#implementors-list .impl:nth-child(2) > a.anchor\")\n assert-attribute: (\"#implementors-list .impl:nth-child(2)\", {\"id\": \"impl-Whatever-1\"})\n assert-attribute: (\"#implementors-list .impl:nth-child(2) > a.anchor\", {\"href\": \"#impl-Whatever-1\"})\n assert: \"#implementors-list .impl:nth-child(2) > .code-header.in-band\"\n+\n+goto: file://|DOC_PATH|/test_docs/struct.HasEmptyTraits.html\n+compare-elements-position-near-false: (\"#impl-EmptyTrait1\", \"#impl-EmptyTrait2\", {\"y\": 30})\n+compare-elements-position-near: (\"#impl-EmptyTrait3 h3\", \"#impl-EmptyTrait3 .item-info\", {\"y\": 30})"}, {"sha": "82fcca94a18208bbb6e59c13316fc314b685f0cb", "filename": "src/test/rustdoc-gui/item-info-width.goml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "raw_url": "https://github.com/rust-lang/rust/raw/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fitem-info-width.goml?ref=0b22d4170eddc179680c0da4415fab721e02f85a", "patch": "@@ -4,5 +4,5 @@ goto: file://|DOC_PATH|/lib2/struct.Foo.html\n size: (1100, 800)\n // We check that \".item-info\" is bigger than its content.\n assert-css: (\".item-info\", {\"width\": \"790px\"})\n-assert-css: (\".item-info .stab\", {\"width\": \"340px\"})\n+assert-css: (\".item-info .stab\", {\"width\": \"339.562px\"})\n assert-position: (\".item-info .stab\", {\"x\": 295})"}, {"sha": "8be819b76e4134a700755f354145b182dec09362", "filename": "src/test/rustdoc-gui/src/test_docs/Cargo.toml", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2FCargo.toml?ref=0b22d4170eddc179680c0da4415fab721e02f85a", "patch": "@@ -7,3 +7,7 @@ build = \"build.rs\"\n \n [lib]\n path = \"lib.rs\"\n+\n+[features]\n+default = [\"some-feature\"]\n+some-feature = []"}, {"sha": "2068d1d6f39af1e1867d4e4d2b951c483a7eb59f", "filename": "src/test/rustdoc-gui/src/test_docs/lib.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b22d4170eddc179680c0da4415fab721e02f85a/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fsrc%2Ftest_docs%2Flib.rs?ref=0b22d4170eddc179680c0da4415fab721e02f85a", "patch": "@@ -260,3 +260,14 @@ impl HeavilyDocumentedUnion {\n macro_rules! heavily_documented_macro {\n     () => {};\n }\n+\n+pub trait EmptyTrait1 {}\n+pub trait EmptyTrait2 {}\n+pub trait EmptyTrait3 {}\n+\n+pub struct HasEmptyTraits{}\n+\n+impl EmptyTrait1 for HasEmptyTraits {}\n+impl EmptyTrait2 for HasEmptyTraits {}\n+#[doc(cfg(feature = \"some-feature\"))]\n+impl EmptyTrait3 for HasEmptyTraits {}"}]}