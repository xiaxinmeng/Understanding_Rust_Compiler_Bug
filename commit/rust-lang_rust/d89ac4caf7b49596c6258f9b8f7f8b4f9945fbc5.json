{"sha": "d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4OWFjNGNhZjdiNDk1OTZjNjI1OGY5YjhmN2Y4YjRmOTk0NWZiYzU=", "commit": {"author": {"name": "ljedrz", "email": "ljedrz@gmail.com", "date": "2018-07-23T12:10:31Z"}, "committer": {"name": "ljedrz", "email": "ljedrz@gmail.com", "date": "2018-07-23T12:10:31Z"}, "message": "Simplify 2 functions in rustc_mir/dataflow", "tree": {"sha": "dc97699aa500da2246e7abb2da2846a714cf8e0b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/dc97699aa500da2246e7abb2da2846a714cf8e0b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "html_url": "https://github.com/rust-lang/rust/commit/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5/comments", "author": {"login": "ljedrz", "id": 3750347, "node_id": "MDQ6VXNlcjM3NTAzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljedrz", "html_url": "https://github.com/ljedrz", "followers_url": "https://api.github.com/users/ljedrz/followers", "following_url": "https://api.github.com/users/ljedrz/following{/other_user}", "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions", "organizations_url": "https://api.github.com/users/ljedrz/orgs", "repos_url": "https://api.github.com/users/ljedrz/repos", "events_url": "https://api.github.com/users/ljedrz/events{/privacy}", "received_events_url": "https://api.github.com/users/ljedrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ljedrz", "id": 3750347, "node_id": "MDQ6VXNlcjM3NTAzNDc=", "avatar_url": "https://avatars.githubusercontent.com/u/3750347?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ljedrz", "html_url": "https://github.com/ljedrz", "followers_url": "https://api.github.com/users/ljedrz/followers", "following_url": "https://api.github.com/users/ljedrz/following{/other_user}", "gists_url": "https://api.github.com/users/ljedrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/ljedrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ljedrz/subscriptions", "organizations_url": "https://api.github.com/users/ljedrz/orgs", "repos_url": "https://api.github.com/users/ljedrz/repos", "events_url": "https://api.github.com/users/ljedrz/events{/privacy}", "received_events_url": "https://api.github.com/users/ljedrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "210d61f05c8c2f9e58f167eb28ab9d8bbef4968b", "url": "https://api.github.com/repos/rust-lang/rust/commits/210d61f05c8c2f9e58f167eb28ab9d8bbef4968b", "html_url": "https://github.com/rust-lang/rust/commit/210d61f05c8c2f9e58f167eb28ab9d8bbef4968b"}], "stats": {"total": 15, "additions": 3, "deletions": 12}, "files": [{"sha": "fd0c3f249078c43b238e3f6b21c6bf53d8ca99a9", "filename": "src/librustc_mir/dataflow/graphviz.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5/src%2Flibrustc_mir%2Fdataflow%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5/src%2Flibrustc_mir%2Fdataflow%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fgraphviz.rs?ref=d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "patch": "@@ -73,8 +73,8 @@ pub type Node = BasicBlock;\n pub struct Edge { source: BasicBlock, index: usize }\n \n fn outgoing(mir: &Mir, bb: BasicBlock) -> Vec<Edge> {\n-    mir[bb].terminator().successors().enumerate()\n-        .map(|(index, _)| Edge { source: bb, index: index}).collect()\n+    (0..mir[bb].terminator().successors().count())\n+        .map(|index| Edge { source: bb, index: index}).collect()\n }\n \n impl<'a, 'tcx, MWF, P> dot::Labeller<'a> for Graph<'a, 'tcx, MWF, P>"}, {"sha": "4227f0bcd362dfcd97912f4a2940e17c654e4faa", "filename": "src/librustc_mir/dataflow/mod.rs", "status": "modified", "additions": 1, "deletions": 10, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs?ref=d89ac4caf7b49596c6258f9b8f7f8b4f9945fbc5", "patch": "@@ -441,23 +441,14 @@ pub struct DataflowState<O: BitDenotation>\n }\n \n impl<O: BitDenotation> DataflowState<O> {\n-    pub fn each_bit<F>(&self, words: &IdxSet<O::Idx>, f: F) where F: FnMut(O::Idx)\n-    {\n-        words.iter().for_each(f)\n-    }\n-\n     pub(crate) fn interpret_set<'c, P>(&self,\n                                        o: &'c O,\n                                        words: &IdxSet<O::Idx>,\n                                        render_idx: &P)\n                                        -> Vec<DebugFormatted>\n         where P: Fn(&O, O::Idx) -> DebugFormatted\n     {\n-        let mut v = Vec::new();\n-        self.each_bit(words, |i| {\n-            v.push(render_idx(o, i));\n-        });\n-        v\n+        words.iter().map(|i| render_idx(o, i)).collect()\n     }\n }\n "}]}