{"sha": "7f396bad9e72d1102f4a2656d148a557a73d05f1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdmMzk2YmFkOWU3MmQxMTAyZjRhMjY1NmQxNDhhNTU3YTczZDA1ZjE=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-08-24T08:44:32Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-08-24T08:44:32Z"}, "message": "Rollup merge of #53559 - Dylan-DPC:fix/missing-doc-lint, r=kennytm\n\nadd macro check for lint\n\nFixes #53537", "tree": {"sha": "42bc728c034229de2763ca44e1455e16483a4fd5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/42bc728c034229de2763ca44e1455e16483a4fd5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f396bad9e72d1102f4a2656d148a557a73d05f1", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJbf8VxCRBK7hj4Ov3rIwAAdHIIAJuXM9jzdG7hiEB9h1gyRuIJ\nMQksrA6IUiKQt/e5meNUGLZ9KyCmiCIUDPRa4H3On7uUpa/aQC9947JmODKqaMtT\njCf5HXHIcxpQIdW6d7fcANMIpJ8YmvXMMjeDNG3+vEK7P9E9X5lswKmcEMW8VTnp\nA9qKn44kV+vhrdos5hrASXGcncj/H2RB5KVn5wG92zqkPBTm8Pt0lX8FnG5//EtS\n3koHr0vdtocknYXH+LT+3r3b3copahXnAWtg5DKNPhwUID0Jz7wnWSDT7aRaiVcs\nF0qt7NHeP/oh7yFyjBtv82+FnUwoRVrqtUhySnz0vkHaJ1gB8MEH7Ny7EHWn+Og=\n=0YDz\n-----END PGP SIGNATURE-----\n", "payload": "tree 42bc728c034229de2763ca44e1455e16483a4fd5\nparent 973428d5224f552341bf2d105d1b702cbdab0ceb\nparent 747722e44445bfb067bfbc84540c434170d538e8\nauthor kennytm <kennytm@gmail.com> 1535100272 +0800\ncommitter GitHub <noreply@github.com> 1535100272 +0800\n\nRollup merge of #53559 - Dylan-DPC:fix/missing-doc-lint, r=kennytm\n\nadd macro check for lint\n\nFixes #53537\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f396bad9e72d1102f4a2656d148a557a73d05f1", "html_url": "https://github.com/rust-lang/rust/commit/7f396bad9e72d1102f4a2656d148a557a73d05f1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f396bad9e72d1102f4a2656d148a557a73d05f1/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "973428d5224f552341bf2d105d1b702cbdab0ceb", "url": "https://api.github.com/repos/rust-lang/rust/commits/973428d5224f552341bf2d105d1b702cbdab0ceb", "html_url": "https://github.com/rust-lang/rust/commit/973428d5224f552341bf2d105d1b702cbdab0ceb"}, {"sha": "747722e44445bfb067bfbc84540c434170d538e8", "url": "https://api.github.com/repos/rust-lang/rust/commits/747722e44445bfb067bfbc84540c434170d538e8", "html_url": "https://github.com/rust-lang/rust/commit/747722e44445bfb067bfbc84540c434170d538e8"}], "stats": {"total": 46, "additions": 40, "deletions": 6}, "files": [{"sha": "d3fb781274e511947af7b64e7b52eba1f6d74ff7", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7f396bad9e72d1102f4a2656d148a557a73d05f1/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f396bad9e72d1102f4a2656d148a557a73d05f1/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=7f396bad9e72d1102f4a2656d148a557a73d05f1", "patch": "@@ -295,7 +295,8 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for UnsafeCode {\n declare_lint! {\n     pub MISSING_DOCS,\n     Allow,\n-    \"detects missing documentation for public members\"\n+    \"detects missing documentation for public members\",\n+    report_in_external_macro: true\n }\n \n pub struct MissingDoc {"}, {"sha": "3785968df871ad292aa32947948b39832622da1f", "filename": "src/test/ui/lint/lints-in-foreign-macros.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7f396bad9e72d1102f4a2656d148a557a73d05f1/src%2Ftest%2Fui%2Flint%2Flints-in-foreign-macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f396bad9e72d1102f4a2656d148a557a73d05f1/src%2Ftest%2Fui%2Flint%2Flints-in-foreign-macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flints-in-foreign-macros.rs?ref=7f396bad9e72d1102f4a2656d148a557a73d05f1", "patch": "@@ -11,7 +11,8 @@\n // aux-build:lints-in-foreign-macros.rs\n // compile-pass\n \n-#![warn(unused_imports)]\n+#![warn(unused_imports)] //~ missing documentation for crate [missing_docs]\n+#![warn(missing_docs)]\n \n #[macro_use]\n extern crate lints_in_foreign_macros;\n@@ -24,5 +25,7 @@ mod a { foo!(); }\n mod b { bar!(); }\n mod c { baz!(use std::string::ToString;); } //~ WARN: unused import\n mod d { baz2!(use std::string::ToString;); } //~ WARN: unused import\n+baz!(pub fn undocumented() {}); //~ WARN: missing documentation for a function\n+baz2!(pub fn undocumented2() {}); //~ WARN: missing documentation for a function\n \n fn main() {}"}, {"sha": "2ddca7781231fb00e5e64ed10f119a3e1a1fd8e3", "filename": "src/test/ui/lint/lints-in-foreign-macros.stderr", "status": "modified", "additions": 34, "deletions": 4, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/7f396bad9e72d1102f4a2656d148a557a73d05f1/src%2Ftest%2Fui%2Flint%2Flints-in-foreign-macros.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7f396bad9e72d1102f4a2656d148a557a73d05f1/src%2Ftest%2Fui%2Flint%2Flints-in-foreign-macros.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flints-in-foreign-macros.stderr?ref=7f396bad9e72d1102f4a2656d148a557a73d05f1", "patch": "@@ -1,5 +1,5 @@\n warning: unused import: `std::string::ToString`\n-  --> $DIR/lints-in-foreign-macros.rs:20:16\n+  --> $DIR/lints-in-foreign-macros.rs:21:16\n    |\n LL |     () => {use std::string::ToString;} //~ WARN: unused import\n    |                ^^^^^^^^^^^^^^^^^^^^^\n@@ -10,18 +10,48 @@ LL | mod a { foo!(); }\n note: lint level defined here\n   --> $DIR/lints-in-foreign-macros.rs:14:9\n    |\n-LL | #![warn(unused_imports)]\n+LL | #![warn(unused_imports)] //~ missing documentation for crate [missing_docs]\n    |         ^^^^^^^^^^^^^^\n \n warning: unused import: `std::string::ToString`\n-  --> $DIR/lints-in-foreign-macros.rs:25:18\n+  --> $DIR/lints-in-foreign-macros.rs:26:18\n    |\n LL | mod c { baz!(use std::string::ToString;); } //~ WARN: unused import\n    |                  ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused import: `std::string::ToString`\n-  --> $DIR/lints-in-foreign-macros.rs:26:19\n+  --> $DIR/lints-in-foreign-macros.rs:27:19\n    |\n LL | mod d { baz2!(use std::string::ToString;); } //~ WARN: unused import\n    |                   ^^^^^^^^^^^^^^^^^^^^^\n \n+warning: missing documentation for crate\n+  --> $DIR/lints-in-foreign-macros.rs:14:1\n+   |\n+LL | / #![warn(unused_imports)] //~ missing documentation for crate [missing_docs]\n+LL | | #![warn(missing_docs)]\n+LL | |\n+LL | | #[macro_use]\n+...  |\n+LL | |\n+LL | | fn main() {}\n+   | |____________^\n+   |\n+note: lint level defined here\n+  --> $DIR/lints-in-foreign-macros.rs:15:9\n+   |\n+LL | #![warn(missing_docs)]\n+   |         ^^^^^^^^^^^^\n+\n+warning: missing documentation for a function\n+  --> $DIR/lints-in-foreign-macros.rs:28:6\n+   |\n+LL | baz!(pub fn undocumented() {}); //~ WARN: missing documentation for a function\n+   |      ^^^^^^^^^^^^^^^^^^^^^\n+\n+warning: missing documentation for a function\n+  --> $DIR/lints-in-foreign-macros.rs:29:7\n+   |\n+LL | baz2!(pub fn undocumented2() {}); //~ WARN: missing documentation for a function\n+   |       ^^^^^^^^^^^^^^^^^^^^^^\n+"}]}