{"sha": "1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFmZTIwODU0NDFjNWM5YWZjMTUyM2MxOWMxYzFkZGJmODZiYWU0NjI=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2018-11-29T12:10:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-11-29T12:10:53Z"}, "message": "Rollup merge of #56322 - petrochenkov:edlints, r=eddyb\n\nresolve: Fix false-positives from lint `absolute_paths_not_starting_with_crate`\n\nFixes https://github.com/rust-lang/rust/issues/56311 (stable-to-beta regression)", "tree": {"sha": "da58b57f77e422398e6e2a7f93a6af6b2fac0bd0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/da58b57f77e422398e6e2a7f93a6af6b2fac0bd0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJb/9dNCRBK7hj4Ov3rIwAAdHIIAKG0Y9f43Psqaxj0e408s57L\nnwkRkqUu/gq0vyJ2KdluOmB+Rb+8R7/mh88M/R4lzJ7EOTThhmNXO8ffBL1EM794\nMI3z18VSh3FPnkkmbipK8PqX1e6gQyEosz8mA0Q2EW0zy0vJa4l53dHbCdD2/ZAq\nrHj0R25/PtqDd2+Sk7/xnvFYHTxoZmqm5yiN7/slzlG3yOqEEHXYr0QSXPcBN3SX\nsxnOpva2tymp2UbRo7x47oHOakogVPeWbkxqhvfOuIPJIEimEx3OtPe3oYEvCdSw\nAOEpacQwAOr2u2xaGlF7yaeQsQ3UkHi3iH+pO56X3OkQn1Or67U3mWQ05UJtAM8=\n=SL1S\n-----END PGP SIGNATURE-----\n", "payload": "tree da58b57f77e422398e6e2a7f93a6af6b2fac0bd0\nparent f20a1d7b5d2022e10b37362be88223e876c62fe3\nparent d77edb6458f6eafa61ff7a5c2bef3b613add80a1\nauthor Guillaume Gomez <guillaume1.gomez@gmail.com> 1543493453 +0100\ncommitter GitHub <noreply@github.com> 1543493453 +0100\n\nRollup merge of #56322 - petrochenkov:edlints, r=eddyb\n\nresolve: Fix false-positives from lint `absolute_paths_not_starting_with_crate`\n\nFixes https://github.com/rust-lang/rust/issues/56311 (stable-to-beta regression)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "html_url": "https://github.com/rust-lang/rust/commit/1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f20a1d7b5d2022e10b37362be88223e876c62fe3", "url": "https://api.github.com/repos/rust-lang/rust/commits/f20a1d7b5d2022e10b37362be88223e876c62fe3", "html_url": "https://github.com/rust-lang/rust/commit/f20a1d7b5d2022e10b37362be88223e876c62fe3"}, {"sha": "d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/d77edb6458f6eafa61ff7a5c2bef3b613add80a1", "html_url": "https://github.com/rust-lang/rust/commit/d77edb6458f6eafa61ff7a5c2bef3b613add80a1"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "c1d4643c2403ea633c4d439a79c299684cb7838d", "filename": "src/librustc_resolve/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/src%2Flibrustc_resolve%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/src%2Flibrustc_resolve%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_resolve%2Flib.rs?ref=1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "patch": "@@ -3950,7 +3950,7 @@ impl<'a, 'crateloader: 'a> Resolver<'a, 'crateloader> {\n \n         let first_name = match path.get(0) {\n             // In the 2018 edition this lint is a hard error, so nothing to do\n-            Some(seg) if seg.ident.span.rust_2015() => seg.ident.name,\n+            Some(seg) if seg.ident.span.rust_2015() && self.session.rust_2015() => seg.ident.name,\n             _ => return,\n         };\n "}, {"sha": "dc4ab2131a83420f9681454e854a99feca821872", "filename": "src/test/ui/rust-2018/auxiliary/edition-lint-paths.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/src%2Ftest%2Fui%2Frust-2018%2Fauxiliary%2Fedition-lint-paths.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/src%2Ftest%2Fui%2Frust-2018%2Fauxiliary%2Fedition-lint-paths.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Fauxiliary%2Fedition-lint-paths.rs?ref=1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "patch": "@@ -9,3 +9,14 @@\n // except according to those terms.\n \n pub fn foo() {}\n+\n+#[macro_export]\n+macro_rules! macro_2015 {\n+    () => {\n+        use edition_lint_paths as other_name;\n+        use edition_lint_paths::foo as other_foo;\n+        fn check_macro_2015() {\n+            ::edition_lint_paths::foo();\n+        }\n+    }\n+}"}, {"sha": "09b31beb775859dedaecf63813c69f1d699937fd", "filename": "src/test/ui/rust-2018/edition-lint-paths-2018.rs", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/src%2Ftest%2Fui%2Frust-2018%2Fedition-lint-paths-2018.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1fe2085441c5c9afc1523c19c1c1ddbf86bae462/src%2Ftest%2Fui%2Frust-2018%2Fedition-lint-paths-2018.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Frust-2018%2Fedition-lint-paths-2018.rs?ref=1fe2085441c5c9afc1523c19c1c1ddbf86bae462", "patch": "@@ -0,0 +1,10 @@\n+// compile-pass\n+// edition:2018\n+// compile-flags:--extern edition_lint_paths\n+// aux-build:edition-lint-paths.rs\n+\n+#![deny(absolute_paths_not_starting_with_crate)]\n+\n+edition_lint_paths::macro_2015!(); // OK\n+\n+fn main() {}"}]}