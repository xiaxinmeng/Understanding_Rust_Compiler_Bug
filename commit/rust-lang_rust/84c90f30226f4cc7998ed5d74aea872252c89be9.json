{"sha": "84c90f30226f4cc7998ed5d74aea872252c89be9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0YzkwZjMwMjI2ZjRjYzc5OThlZDVkNzRhZWE4NzIyNTJjODliZTk=", "commit": {"author": {"name": "Ulrik Sverdrup", "email": "bluss@users.noreply.github.com", "date": "2017-09-18T19:52:13Z"}, "committer": {"name": "Ulrik Sverdrup", "email": "bluss@users.noreply.github.com", "date": "2017-09-18T19:56:59Z"}, "message": "alloc: Implement rfold for VecDeque iterators", "tree": {"sha": "a1b67e14e74d20ceff2610f77a9ad1883a3170d0", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a1b67e14e74d20ceff2610f77a9ad1883a3170d0"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/84c90f30226f4cc7998ed5d74aea872252c89be9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/84c90f30226f4cc7998ed5d74aea872252c89be9", "html_url": "https://github.com/rust-lang/rust/commit/84c90f30226f4cc7998ed5d74aea872252c89be9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/84c90f30226f4cc7998ed5d74aea872252c89be9/comments", "author": {"login": "bluss", "id": 3209739, "node_id": "MDQ6VXNlcjMyMDk3Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluss", "html_url": "https://github.com/bluss", "followers_url": "https://api.github.com/users/bluss/followers", "following_url": "https://api.github.com/users/bluss/following{/other_user}", "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluss/subscriptions", "organizations_url": "https://api.github.com/users/bluss/orgs", "repos_url": "https://api.github.com/users/bluss/repos", "events_url": "https://api.github.com/users/bluss/events{/privacy}", "received_events_url": "https://api.github.com/users/bluss/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bluss", "id": 3209739, "node_id": "MDQ6VXNlcjMyMDk3Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/3209739?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bluss", "html_url": "https://github.com/bluss", "followers_url": "https://api.github.com/users/bluss/followers", "following_url": "https://api.github.com/users/bluss/following{/other_user}", "gists_url": "https://api.github.com/users/bluss/gists{/gist_id}", "starred_url": "https://api.github.com/users/bluss/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bluss/subscriptions", "organizations_url": "https://api.github.com/users/bluss/orgs", "repos_url": "https://api.github.com/users/bluss/repos", "events_url": "https://api.github.com/users/bluss/events{/privacy}", "received_events_url": "https://api.github.com/users/bluss/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a59a25d8e64deead0721b6e537a29f600227718f", "url": "https://api.github.com/repos/rust-lang/rust/commits/a59a25d8e64deead0721b6e537a29f600227718f", "html_url": "https://github.com/rust-lang/rust/commit/a59a25d8e64deead0721b6e537a29f600227718f"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "ac2f72d5fa187e10c3052f5305c2c0339e5770aa", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/84c90f30226f4cc7998ed5d74aea872252c89be9/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84c90f30226f4cc7998ed5d74aea872252c89be9/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=84c90f30226f4cc7998ed5d74aea872252c89be9", "patch": "@@ -98,6 +98,7 @@\n #![feature(generic_param_attrs)]\n #![feature(i128_type)]\n #![feature(inclusive_range)]\n+#![feature(iter_rfold)]\n #![feature(lang_items)]\n #![feature(needs_allocator)]\n #![feature(nonzero)]"}, {"sha": "6836fbb7c4de34f643c7f723caaa71ba91d28034", "filename": "src/liballoc/vec_deque.rs", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/84c90f30226f4cc7998ed5d74aea872252c89be9/src%2Fliballoc%2Fvec_deque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/84c90f30226f4cc7998ed5d74aea872252c89be9/src%2Fliballoc%2Fvec_deque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fvec_deque.rs?ref=84c90f30226f4cc7998ed5d74aea872252c89be9", "patch": "@@ -1973,6 +1973,14 @@ impl<'a, T> DoubleEndedIterator for Iter<'a, T> {\n         self.head = wrap_index(self.head.wrapping_sub(1), self.ring.len());\n         unsafe { Some(self.ring.get_unchecked(self.head)) }\n     }\n+\n+    fn rfold<Acc, F>(self, mut accum: Acc, mut f: F) -> Acc\n+        where F: FnMut(Acc, Self::Item) -> Acc\n+    {\n+        let (front, back) = RingSlices::ring_slices(self.ring, self.head, self.tail);\n+        accum = back.iter().rfold(accum, &mut f);\n+        front.iter().rfold(accum, &mut f)\n+    }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -2058,6 +2066,14 @@ impl<'a, T> DoubleEndedIterator for IterMut<'a, T> {\n             Some(&mut *(elem as *mut _))\n         }\n     }\n+\n+    fn rfold<Acc, F>(self, mut accum: Acc, mut f: F) -> Acc\n+        where F: FnMut(Acc, Self::Item) -> Acc\n+    {\n+        let (front, back) = RingSlices::ring_slices(self.ring, self.head, self.tail);\n+        accum = back.iter_mut().rfold(accum, &mut f);\n+        front.iter_mut().rfold(accum, &mut f)\n+    }\n }\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]"}]}