{"sha": "acc44e40ccd860a3cae54c7b56956c3c1340182e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFjYzQ0ZTQwY2NkODYwYTNjYWU1NGM3YjU2OTU2YzNjMTM0MDE4MmU=", "commit": {"author": {"name": "Vitaly _Vi Shukela", "email": "vi0oss@gmail.com", "date": "2018-09-13T17:40:39Z"}, "committer": {"name": "Vitaly _Vi Shukela", "email": "vi0oss@gmail.com", "date": "2018-09-13T17:44:07Z"}, "message": "Use span_suggestion_with_applicability for \"and/or\" hinter\n\nAdvised by @estebank.", "tree": {"sha": "7e451b9215ed2934e5b74f6af7473e550cf3c8c2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7e451b9215ed2934e5b74f6af7473e550cf3c8c2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/acc44e40ccd860a3cae54c7b56956c3c1340182e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABEIAB0WIQQzEHnM5f9ubG8rMBnAlyIdbgPfaAUCW5qh5wAKCRDAlyIdbgPf\naL4SAPsEa8FuAiJhOOoHkAkPZqO0azrUK1CVqDpw7GsRCzAugQD/dEHBycQsViw8\nCrezJsApdmPbdEIGDEHJS5NehF7s5qw=\n=4gO+\n-----END PGP SIGNATURE-----", "payload": "tree 7e451b9215ed2934e5b74f6af7473e550cf3c8c2\nparent 888b8c9451a41cccc8bdceee6423ee9d9e66bb43\nauthor Vitaly _Vi Shukela <vi0oss@gmail.com> 1536860439 +0300\ncommitter Vitaly _Vi Shukela <vi0oss@gmail.com> 1536860647 +0300\n\nUse span_suggestion_with_applicability for \"and/or\" hinter\n\nAdvised by @estebank.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/acc44e40ccd860a3cae54c7b56956c3c1340182e", "html_url": "https://github.com/rust-lang/rust/commit/acc44e40ccd860a3cae54c7b56956c3c1340182e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/acc44e40ccd860a3cae54c7b56956c3c1340182e/comments", "author": {"login": "vi", "id": 173219, "node_id": "MDQ6VXNlcjE3MzIxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vi", "html_url": "https://github.com/vi", "followers_url": "https://api.github.com/users/vi/followers", "following_url": "https://api.github.com/users/vi/following{/other_user}", "gists_url": "https://api.github.com/users/vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vi/subscriptions", "organizations_url": "https://api.github.com/users/vi/orgs", "repos_url": "https://api.github.com/users/vi/repos", "events_url": "https://api.github.com/users/vi/events{/privacy}", "received_events_url": "https://api.github.com/users/vi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vi", "id": 173219, "node_id": "MDQ6VXNlcjE3MzIxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vi", "html_url": "https://github.com/vi", "followers_url": "https://api.github.com/users/vi/followers", "following_url": "https://api.github.com/users/vi/following{/other_user}", "gists_url": "https://api.github.com/users/vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vi/subscriptions", "organizations_url": "https://api.github.com/users/vi/orgs", "repos_url": "https://api.github.com/users/vi/repos", "events_url": "https://api.github.com/users/vi/events{/privacy}", "received_events_url": "https://api.github.com/users/vi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "888b8c9451a41cccc8bdceee6423ee9d9e66bb43", "url": "https://api.github.com/repos/rust-lang/rust/commits/888b8c9451a41cccc8bdceee6423ee9d9e66bb43", "html_url": "https://github.com/rust-lang/rust/commit/888b8c9451a41cccc8bdceee6423ee9d9e66bb43"}], "stats": {"total": 51, "additions": 34, "deletions": 17}, "files": [{"sha": "429d1b6bf5e8fa446d7db168439a220e2c321872", "filename": "src/libsyntax/parse/parser.rs", "status": "modified", "additions": 24, "deletions": 4, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/acc44e40ccd860a3cae54c7b56956c3c1340182e/src%2Flibsyntax%2Fparse%2Fparser.rs", "raw_url": "https://github.com/rust-lang/rust/raw/acc44e40ccd860a3cae54c7b56956c3c1340182e/src%2Flibsyntax%2Fparse%2Fparser.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fparser.rs?ref=acc44e40ccd860a3cae54c7b56956c3c1340182e", "patch": "@@ -733,10 +733,20 @@ impl<'a> Parser<'a> {\n             };\n             let mut err = self.fatal(&msg_exp);\n             if self.token.is_ident_named(\"and\") {\n-                err.help(\"Use `&&` instead of `and` for the boolean operator\");\n+                err.span_suggestion_with_applicability(\n+                    self.span,\n+                    \"use `&&` instead of `and` for the boolean operator\",\n+                    \"&&\".to_string(),\n+                    Applicability::MaybeIncorrect,\n+                );\n             }\n             if self.token.is_ident_named(\"or\") {\n-                err.help(\"Use `||` instead of `or` for the boolean operator\");\n+                err.span_suggestion_with_applicability(\n+                    self.span,\n+                    \"use `||` instead of `or` for the boolean operator\",\n+                    \"||\".to_string(),\n+                    Applicability::MaybeIncorrect,\n+                );\n             }\n             let sp = if self.token == token::Token::Eof {\n                 // This is EOF, don't want to point at the following char, but rather the last token\n@@ -4758,10 +4768,20 @@ impl<'a> Parser<'a> {\n             }\n \n             if self.token.is_ident_named(\"and\") {\n-                e.help(\"Use `&&` instead of `and` for the boolean operator\");\n+                e.span_suggestion_with_applicability(\n+                    self.span,\n+                    \"use `&&` instead of `and` for the boolean operator\",\n+                    \"&&\".to_string(),\n+                    Applicability::MaybeIncorrect,\n+                );\n             }\n             if self.token.is_ident_named(\"or\") {\n-                e.help(\"Use `||` instead of `or` for the boolean operator\");\n+                e.span_suggestion_with_applicability(\n+                    self.span,\n+                    \"use `||` instead of `or` for the boolean operator\",\n+                    \"||\".to_string(),\n+                    Applicability::MaybeIncorrect,\n+                );\n             }\n \n             // Check to see if the user has written something like"}, {"sha": "74ebb1e757c96158f7285a4d995da52221f07dd7", "filename": "src/test/ui/did_you_mean/issue-54109-and_instead_of_ampersands.stderr", "status": "modified", "additions": 10, "deletions": 13, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/acc44e40ccd860a3cae54c7b56956c3c1340182e/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-54109-and_instead_of_ampersands.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/acc44e40ccd860a3cae54c7b56956c3c1340182e/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-54109-and_instead_of_ampersands.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-54109-and_instead_of_ampersands.stderr?ref=acc44e40ccd860a3cae54c7b56956c3c1340182e", "patch": "@@ -2,37 +2,34 @@ error: expected `{`, found `and`\n   --> $DIR/issue-54109-and_instead_of_ampersands.rs:14:10\n    |\n LL |     if a and b {\n-   |     --   ^^^\n+   |     --   ^^^ help: use `&&` instead of `and` for the boolean operator: `&&`\n    |     |\n    |     this `if` statement has a condition, but no block\n-   |\n-   = help: Use `&&` instead of `and` for the boolean operator\n \n error: expected `{`, found `or`\n   --> $DIR/issue-54109-and_instead_of_ampersands.rs:23:10\n    |\n LL |     if a or b {\n-   |     --   ^^\n+   |     --   ^^ help: use `||` instead of `or` for the boolean operator: `||`\n    |     |\n    |     this `if` statement has a condition, but no block\n-   |\n-   = help: Use `||` instead of `or` for the boolean operator\n \n error: expected one of `!`, `)`, `,`, `.`, `::`, `?`, `{`, or an operator, found `and`\n   --> $DIR/issue-54109-and_instead_of_ampersands.rs:32:11\n    |\n LL |     if (a and b) {\n-   |           ^^^ expected one of 8 possible tokens here\n-   |\n-   = help: Use `&&` instead of `and` for the boolean operator\n+   |           ^^^\n+   |           |\n+   |           expected one of 8 possible tokens here\n+   |           help: use `&&` instead of `and` for the boolean operator: `&&`\n \n error: expected one of `!`, `)`, `,`, `.`, `::`, `?`, `{`, or an operator, found `or`\n   --> $DIR/issue-54109-and_instead_of_ampersands.rs:41:11\n    |\n LL |     if (a or b) {\n-   |           ^^ expected one of 8 possible tokens here\n-   |\n-   = help: Use `||` instead of `or` for the boolean operator\n+   |           ^^\n+   |           |\n+   |           expected one of 8 possible tokens here\n+   |           help: use `||` instead of `or` for the boolean operator: `||`\n \n error: aborting due to 4 previous errors\n-"}]}