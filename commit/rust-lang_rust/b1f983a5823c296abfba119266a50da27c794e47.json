{"sha": "b1f983a5823c296abfba119266a50da27c794e47", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIxZjk4M2E1ODIzYzI5NmFiZmJhMTE5MjY2YTUwZGEyN2M3OTRlNDc=", "commit": {"author": {"name": "Dylan DPC", "email": "dylan.dpc@gmail.com", "date": "2020-08-29T23:43:57Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-08-29T23:43:57Z"}, "message": "Rollup merge of #76022 - GuillaumeGomez:cleanup-rustdoc-front, r=jyn514\n\nClean up rustdoc front-end source code\n\nr? @jyn514", "tree": {"sha": "d7885a2e0b5ebe6cb26e1625138712fc47ec8d85", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d7885a2e0b5ebe6cb26e1625138712fc47ec8d85"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b1f983a5823c296abfba119266a50da27c794e47", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfSug9CRBK7hj4Ov3rIwAAdHIIAI29RoXZeS6NLabSiwT9EgIC\n/jsv3Cv8LgMvzNmWMH3JfvyuR6dtyqqQciQbiKJeTLeG5X5LbzaXDPI6PKlC9QbE\nBkJQBHSyf1mWGXleX3FszaTSaoxNuTtGDn6yPB3gyokw+Q5E9SSjs3WmsXR8Yimb\nkwKzbAjQxfojgy7DlqxMYRL8bgfqFJyFN57dvjDPU+oUThBgp0Er5f7NwQiV3Tu6\n6oNHbGi9/tY22pc1Gmxipvb11k9uaOsbycnTyc3k5LUGc7RFCf0bQ3FvW+fPtLc6\nn0EgGcuml4BhyEKygJN+hcKO4qcpkxx3eRLhdZBtqe3MRspLX0n8UVd6SwUSXtI=\n=yXSi\n-----END PGP SIGNATURE-----\n", "payload": "tree d7885a2e0b5ebe6cb26e1625138712fc47ec8d85\nparent 063313bca632aef60e3482749ed6c00d46933917\nparent 3a4ef0f57d70866bbbe5e9dd8f0710b8ee942cfa\nauthor Dylan DPC <dylan.dpc@gmail.com> 1598744637 +0200\ncommitter GitHub <noreply@github.com> 1598744637 +0200\n\nRollup merge of #76022 - GuillaumeGomez:cleanup-rustdoc-front, r=jyn514\n\nClean up rustdoc front-end source code\n\nr? @jyn514\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b1f983a5823c296abfba119266a50da27c794e47", "html_url": "https://github.com/rust-lang/rust/commit/b1f983a5823c296abfba119266a50da27c794e47", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b1f983a5823c296abfba119266a50da27c794e47/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "063313bca632aef60e3482749ed6c00d46933917", "url": "https://api.github.com/repos/rust-lang/rust/commits/063313bca632aef60e3482749ed6c00d46933917", "html_url": "https://github.com/rust-lang/rust/commit/063313bca632aef60e3482749ed6c00d46933917"}, {"sha": "3a4ef0f57d70866bbbe5e9dd8f0710b8ee942cfa", "url": "https://api.github.com/repos/rust-lang/rust/commits/3a4ef0f57d70866bbbe5e9dd8f0710b8ee942cfa", "html_url": "https://github.com/rust-lang/rust/commit/3a4ef0f57d70866bbbe5e9dd8f0710b8ee942cfa"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "a1eef5c1202cbf7d5b4701eff86e4447dc0372e9", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/b1f983a5823c296abfba119266a50da27c794e47/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/b1f983a5823c296abfba119266a50da27c794e47/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=b1f983a5823c296abfba119266a50da27c794e47", "patch": "@@ -92,6 +92,7 @@ function defocusSearchBar() {\n     var disableShortcuts = getCurrentValue(\"rustdoc-disable-shortcuts\") === \"true\";\n     var search_input = getSearchInput();\n     var searchTimeout = null;\n+    var toggleAllDocsId = \"toggle-all-docs\";\n \n     // On the search screen, so you remain on the last tab you opened.\n     //\n@@ -1397,8 +1398,8 @@ function defocusSearchBar() {\n                 // \"current\" is used to know which tab we're looking into.\n                 var current = 0;\n                 onEachLazy(document.getElementById(\"results\").childNodes, function(e) {\n-                    onEachLazy(e.getElementsByClassName(\"highlighted\"), function(e) {\n-                        actives[current].push(e);\n+                    onEachLazy(e.getElementsByClassName(\"highlighted\"), function(h_e) {\n+                        actives[current].push(h_e);\n                     });\n                     current += 1;\n                 });\n@@ -2121,7 +2122,7 @@ function defocusSearchBar() {\n     }\n \n     function toggleAllDocs(pageId, fromAutoCollapse) {\n-        var innerToggle = document.getElementById(\"toggle-all-docs\");\n+        var innerToggle = document.getElementById(toggleAllDocsId);\n         if (!innerToggle) {\n             return;\n         }\n@@ -2314,11 +2315,6 @@ function defocusSearchBar() {\n         }\n     }\n \n-    var toggles = document.getElementById(\"toggle-all-docs\");\n-    if (toggles) {\n-        toggles.onclick = toggleAllDocs;\n-    }\n-\n     function insertAfter(newNode, referenceNode) {\n         referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);\n     }\n@@ -2368,6 +2364,11 @@ function defocusSearchBar() {\n     }\n \n     (function() {\n+        var toggles = document.getElementById(toggleAllDocsId);\n+        if (toggles) {\n+            toggles.onclick = toggleAllDocs;\n+        }\n+\n         var toggle = createSimpleToggle(false);\n         var hideMethodDocs = getCurrentValue(\"rustdoc-auto-hide-method-docs\") === \"true\";\n         var hideImplementors = getCurrentValue(\"rustdoc-auto-collapse-implementors\") !== \"false\";"}]}