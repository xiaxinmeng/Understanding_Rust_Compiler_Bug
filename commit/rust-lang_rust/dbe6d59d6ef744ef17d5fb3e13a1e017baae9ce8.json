{"sha": "dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRiZTZkNTlkNmVmNzQ0ZWYxN2Q1ZmIzZTEzYTFlMDE3YmFhZTljZTg=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-23T13:05:58Z"}, "committer": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-08-24T17:13:53Z"}, "message": "typeck/pat.rs: move note out of `check_dereferenceable` as it angers VSCode.", "tree": {"sha": "294bb12a7866bbebdee7a3aff3c1bd2434acc04a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/294bb12a7866bbebdee7a3aff3c1bd2434acc04a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8", "html_url": "https://github.com/rust-lang/rust/commit/dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "11d40910cdc501b22e503cfe1054a7f21478785e", "url": "https://api.github.com/repos/rust-lang/rust/commits/11d40910cdc501b22e503cfe1054a7f21478785e", "html_url": "https://github.com/rust-lang/rust/commit/11d40910cdc501b22e503cfe1054a7f21478785e"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "d8c6438817413452b587f6ae34f4feee21dd9b4d", "filename": "src/librustc_typeck/check/pat.rs", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8/src%2Flibrustc_typeck%2Fcheck%2Fpat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8/src%2Flibrustc_typeck%2Fcheck%2Fpat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fpat.rs?ref=dbe6d59d6ef744ef17d5fb3e13a1e017baae9ce8", "patch": "@@ -19,6 +19,15 @@ use std::cmp;\n \n use super::report_unexpected_variant_res;\n \n+const CANNOT_IMPLICITLY_DEREF_POINTER_TRAIT_OBJ: &str = \"\\\n+This error indicates that a pointer to a trait type cannot be implicitly dereferenced by a \\\n+pattern. Every trait defines a type, but because the size of trait implementors isn't fixed, \\\n+this type has no compile-time size. Therefore, all accesses to trait types must be through \\\n+pointers. If you encounter this error you should try to avoid dereferencing the pointer.\n+\n+You can read more about trait objects in the Trait Objects section of the Reference: \\\n+https://doc.rust-lang.org/reference/types.html#trait-objects\";\n+\n impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n     /// `discrim_span` argument having a `Span` indicates that this pattern is part of a match\n     /// expression arm guard, and it points to the match discriminant to add context in type errors.\n@@ -607,14 +616,7 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     );\n                     err.span_label(span, format!(\"type `{}` cannot be dereferenced\", type_str));\n                     if self.tcx.sess.teach(&err.get_code().unwrap()) {\n-                        err.note(\"\\\n-This error indicates that a pointer to a trait type cannot be implicitly dereferenced by a \\\n-pattern. Every trait defines a type, but because the size of trait implementors isn't fixed, \\\n-this type has no compile-time size. Therefore, all accesses to trait types must be through \\\n-pointers. If you encounter this error you should try to avoid dereferencing the pointer.\n-\n-You can read more about trait objects in the Trait Objects section of the Reference: \\\n-https://doc.rust-lang.org/reference/types.html#trait-objects\");\n+                        err.note(CANNOT_IMPLICITLY_DEREF_POINTER_TRAIT_OBJ);\n                     }\n                     err.emit();\n                     return false"}]}