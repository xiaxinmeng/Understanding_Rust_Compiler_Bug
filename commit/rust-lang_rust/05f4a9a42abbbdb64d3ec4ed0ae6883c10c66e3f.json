{"sha": "05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA1ZjRhOWE0MmFiYmJkYjY0ZDNlYzRlZDBhZTY4ODNjMTBjNjZlM2Y=", "commit": {"author": {"name": "Florian Warzecha", "email": "liketechnik@disroot.org", "date": "2020-10-21T18:54:20Z"}, "committer": {"name": "Florian Warzecha", "email": "liketechnik@disroot.org", "date": "2020-10-21T18:54:20Z"}, "message": "switch allow_internal_unstable const fns to rustc_allow_const_fn_unstable", "tree": {"sha": "06d63b7fdbcdced0725fcd426494a3c8be2b3904", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/06d63b7fdbcdced0725fcd426494a3c8be2b3904"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEmbauVGD14yLN3Z9qS+jH2X+RDGAFAl+QhEQACgkQS+jH2X+R\nDGDmghAAh2Xl94AtTIFhdFQ9/NUqrfQ4NCWiZeouilV3vu7IhNWJfa1rvd8rxIPj\nsuIr7rqzDj99W/p2cUxcEF98pmZ/Pxh3+lla3+PHl3dDVRXrGU93andvYVD3R+5Y\n1yYnspiS51pG6HFcF/5HTTQeKaHY+ihLJ+B7tnw6AqhT7wJOsOX3qxIsqmcE7m1z\niHa5/dloznG4w8QDtICfUDAaP42psaTRcwq9j9msfRwqqBXrAtZ9bAtQD1tZWKwz\nH49mQg4QqEfCx943F5myLP2CYn1f34sweIJW2p7ZyZU8bYkeX0XbtiH3B8TLX0Cu\ni3V+BRB5jhlV0M/7GJBqY9p+WOXXjxVKK0DM1CK35gxreMB4t6e6yHWpujcrOMRT\nTYcpHcdX/+C8A4700+ii6IS/GR8d+LQO6kq8MnvvrjbBMm1Z5RdiOY7ldASCSE/D\nyfdeMU68V1RvBOLRFOHFOco/0CNde9k4GqQUtRJis+wmA+jZXCxloWytuMIO1cha\nYaKplVI9bXP1J67XcVy8i+Lo2xw6SN6g+nM3mgeIJqBoxuFzBP0j58pQPg/qO1+G\ntaa4VVBpWTnYaJggE4dFtUun4wYpmunfks4YSV8jbyuWPFW0H/Dce8ldleb8BGZ/\nLsUzZc4DK/RkfRPD3JUI1+9s8yOYziCONclaS3aksLkbCsCWlyw=\n=sSwt\n-----END PGP SIGNATURE-----", "payload": "tree 06d63b7fdbcdced0725fcd426494a3c8be2b3904\nparent 3948b054dc8e598b83a194056dc4d3a0852dc79e\nauthor Florian Warzecha <liketechnik@disroot.org> 1603306460 +0200\ncommitter Florian Warzecha <liketechnik@disroot.org> 1603306460 +0200\n\nswitch allow_internal_unstable const fns to rustc_allow_const_fn_unstable\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "html_url": "https://github.com/rust-lang/rust/commit/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/comments", "author": {"login": "liketechnik", "id": 24209689, "node_id": "MDQ6VXNlcjI0MjA5Njg5", "avatar_url": "https://avatars.githubusercontent.com/u/24209689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liketechnik", "html_url": "https://github.com/liketechnik", "followers_url": "https://api.github.com/users/liketechnik/followers", "following_url": "https://api.github.com/users/liketechnik/following{/other_user}", "gists_url": "https://api.github.com/users/liketechnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/liketechnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liketechnik/subscriptions", "organizations_url": "https://api.github.com/users/liketechnik/orgs", "repos_url": "https://api.github.com/users/liketechnik/repos", "events_url": "https://api.github.com/users/liketechnik/events{/privacy}", "received_events_url": "https://api.github.com/users/liketechnik/received_events", "type": "User", "site_admin": false}, "committer": {"login": "liketechnik", "id": 24209689, "node_id": "MDQ6VXNlcjI0MjA5Njg5", "avatar_url": "https://avatars.githubusercontent.com/u/24209689?v=4", "gravatar_id": "", "url": "https://api.github.com/users/liketechnik", "html_url": "https://github.com/liketechnik", "followers_url": "https://api.github.com/users/liketechnik/followers", "following_url": "https://api.github.com/users/liketechnik/following{/other_user}", "gists_url": "https://api.github.com/users/liketechnik/gists{/gist_id}", "starred_url": "https://api.github.com/users/liketechnik/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/liketechnik/subscriptions", "organizations_url": "https://api.github.com/users/liketechnik/orgs", "repos_url": "https://api.github.com/users/liketechnik/repos", "events_url": "https://api.github.com/users/liketechnik/events{/privacy}", "received_events_url": "https://api.github.com/users/liketechnik/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3948b054dc8e598b83a194056dc4d3a0852dc79e", "url": "https://api.github.com/repos/rust-lang/rust/commits/3948b054dc8e598b83a194056dc4d3a0852dc79e", "html_url": "https://github.com/rust-lang/rust/commit/3948b054dc8e598b83a194056dc4d3a0852dc79e"}], "stats": {"total": 120, "additions": 81, "deletions": 39}, "files": [{"sha": "218a9b229e0df0fb2605606c0d609b9edd4d6e60", "filename": "compiler/rustc_attr/src/builtin.rs", "status": "modified", "additions": 21, "deletions": 4, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_attr%2Fsrc%2Fbuiltin.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -1013,13 +1013,28 @@ pub fn allow_internal_unstable<'a>(\n     sess: &'a Session,\n     attrs: &'a [Attribute],\n ) -> Option<impl Iterator<Item = Symbol> + 'a> {\n-    let attrs = sess.filter_by_name(attrs, sym::allow_internal_unstable);\n+    allow_unstable(sess, attrs, sym::allow_internal_unstable)\n+}\n+\n+pub fn rustc_allow_const_fn_unstable<'a>(\n+    sess: &'a Session,\n+    attrs: &'a [Attribute],\n+) -> Option<impl Iterator<Item = Symbol> + 'a> {\n+    allow_unstable(sess, attrs, sym::rustc_allow_const_fn_unstable)\n+}\n+\n+fn allow_unstable<'a>(\n+    sess: &'a Session,\n+    attrs: &'a [Attribute],\n+    symbol: Symbol,\n+) -> Option<impl Iterator<Item = Symbol> + 'a> {\n+    let attrs = sess.filter_by_name(attrs, symbol);\n     let list = attrs\n         .filter_map(move |attr| {\n             attr.meta_item_list().or_else(|| {\n                 sess.diagnostic().span_err(\n                     attr.span,\n-                    \"`allow_internal_unstable` expects a list of feature names\",\n+                    &format!(\"`{}` expects a list of feature names\", symbol.to_ident_string()),\n                 );\n                 None\n             })\n@@ -1029,8 +1044,10 @@ pub fn allow_internal_unstable<'a>(\n     Some(list.into_iter().filter_map(move |it| {\n         let name = it.ident().map(|ident| ident.name);\n         if name.is_none() {\n-            sess.diagnostic()\n-                .span_err(it.span(), \"`allow_internal_unstable` expects feature names\");\n+            sess.diagnostic().span_err(\n+                it.span(),\n+                &format!(\"`{}` expects feature names\", symbol.to_ident_string()),\n+            );\n         }\n         name\n     }))"}, {"sha": "e5bb213b5141269dacad34839d04efa5af4267d5", "filename": "compiler/rustc_expand/src/base.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_expand%2Fsrc%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_expand%2Fsrc%2Fbase.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -768,8 +768,13 @@ impl SyntaxExtension {\n         name: Symbol,\n         attrs: &[ast::Attribute],\n     ) -> SyntaxExtension {\n-        let allow_internal_unstable = attr::allow_internal_unstable(sess, &attrs)\n-            .map(|features| features.collect::<Vec<Symbol>>().into());\n+        let allow_internal_unstable = {\n+            let mut feat_list = Vec::new();\n+            attr::allow_internal_unstable(sess, &attrs).map(|features| feat_list.extend(features));\n+            attr::rustc_allow_const_fn_unstable(sess, &attrs)\n+                .map(|features| feat_list.extend(features));\n+            Some(feat_list.into())\n+        };\n \n         let mut local_inner_macros = false;\n         if let Some(macro_export) = sess.find_by_name(attrs, sym::macro_export) {"}, {"sha": "11e389cbe446464ad900689e4c0f3b6d68899092", "filename": "compiler/rustc_mir/src/transform/check_consts/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fmod.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -79,7 +79,7 @@ pub fn is_lang_panic_fn(tcx: TyCtxt<'tcx>, def_id: DefId) -> bool {\n \n pub fn allow_internal_unstable(tcx: TyCtxt<'tcx>, def_id: DefId, feature_gate: Symbol) -> bool {\n     let attrs = tcx.get_attrs(def_id);\n-    attr::allow_internal_unstable(&tcx.sess, attrs)\n+    attr::rustc_allow_const_fn_unstable(&tcx.sess, attrs)\n         .map_or(false, |mut features| features.any(|name| name == feature_gate))\n }\n "}, {"sha": "e23fb453c5ae0ed61921696e19ebecdec943892a", "filename": "compiler/rustc_mir/src/transform/check_consts/validation.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fvalidation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fvalidation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir%2Fsrc%2Ftransform%2Fcheck_consts%2Fvalidation.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -805,7 +805,7 @@ impl Visitor<'tcx> for Validator<'mir, 'tcx> {\n                     }\n \n                     // Calling an unstable function *always* requires that the corresponding gate\n-                    // be enabled, even if the function has `#[allow_internal_unstable(the_gate)]`.\n+                    // be enabled, even if the function has `#[rustc_allow_const_fn_unstable(the_gate)]`.\n                     if !tcx.features().declared_lib_features.iter().any(|&(sym, _)| sym == gate) {\n                         self.check_op(ops::FnCallUnstable(callee, Some(gate)));\n                         return;\n@@ -965,8 +965,8 @@ fn emit_unstable_in_stable_error(ccx: &ConstCx<'_, '_>, span: Span, gate: Symbol\n         )\n         .span_suggestion(\n             attr_span,\n-            \"otherwise `#[allow_internal_unstable]` can be used to bypass stability checks\",\n-            format!(\"#[allow_internal_unstable({})]\\n\", gate),\n+            \"otherwise `#[rustc_allow_const_fn_unstable]` can be used to bypass stability checks\",\n+            format!(\"#[rustc_allow_const_fn_unstable({})]\\n\", gate),\n             Applicability::MaybeIncorrect,\n         )\n         .emit();"}, {"sha": "b24c62b971a468a31ca5e32b36a8051cb68b1dc1", "filename": "compiler/rustc_passes/src/check_const.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_passes%2Fsrc%2Fcheck_const.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/compiler%2Frustc_passes%2Fsrc%2Fcheck_const.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fcheck_const.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -87,7 +87,7 @@ impl<'tcx> CheckConstVisitor<'tcx> {\n \n         let is_feature_allowed = |feature_gate| {\n             // All features require that the corresponding gate be enabled,\n-            // even if the function has `#[allow_internal_unstable(the_gate)]`.\n+            // even if the function has `#[rustc_allow_const_fn_unstable(the_gate)]`.\n             if !tcx.features().enabled(feature_gate) {\n                 return false;\n             }\n@@ -105,8 +105,8 @@ impl<'tcx> CheckConstVisitor<'tcx> {\n             }\n \n             // However, we cannot allow stable `const fn`s to use unstable features without an explicit\n-            // opt-in via `allow_internal_unstable`.\n-            attr::allow_internal_unstable(&tcx.sess, &tcx.get_attrs(def_id))\n+            // opt-in via `rustc_allow_const_fn_unstable`.\n+            attr::rustc_allow_const_fn_unstable(&tcx.sess, &tcx.get_attrs(def_id))\n                 .map_or(false, |mut features| features.any(|name| name == feature_gate))\n         };\n "}, {"sha": "ccabc336acc163b6e5f25e5a4c75c0ed40b72f0d", "filename": "library/alloc/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Falloc%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Falloc%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Flib.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -72,6 +72,7 @@\n #![allow(explicit_outlives_requirements)]\n #![allow(incomplete_features)]\n #![deny(unsafe_op_in_unsafe_fn)]\n+#![cfg_attr(not(bootstrap), feature(rustc_allow_const_fn_unstable))]\n #![cfg_attr(not(test), feature(generator_trait))]\n #![cfg_attr(test, feature(test))]\n #![cfg_attr(test, feature(new_uninit))]"}, {"sha": "43628259ba32a8620d346075b9da70d887fa5140", "filename": "library/alloc/src/raw_vec.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Falloc%2Fsrc%2Fraw_vec.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Falloc%2Fsrc%2Fraw_vec.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Falloc%2Fsrc%2Fraw_vec.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -150,7 +150,8 @@ impl<T> RawVec<T, Global> {\n impl<T, A: AllocRef> RawVec<T, A> {\n     /// Like `new`, but parameterized over the choice of allocator for\n     /// the returned `RawVec`.\n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn new_in(alloc: A) -> Self {\n         // `cap: 0` means \"unallocated\". zero-sized types are ignored.\n         Self { ptr: Unique::dangling(), cap: 0, alloc }"}, {"sha": "6cb240d1730edf4a1797fae4d98571c66065bba6", "filename": "library/core/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Flib.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -63,6 +63,7 @@\n #![warn(missing_debug_implementations)]\n #![allow(explicit_outlives_requirements)]\n #![allow(incomplete_features)]\n+#![cfg_attr(not(bootstrap), feature(rustc_allow_const_fn_unstable))]\n #![feature(allow_internal_unstable)]\n #![feature(arbitrary_self_types)]\n #![feature(asm)]"}, {"sha": "295a876773c48779255894975912de187d5b6c16", "filename": "library/core/src/num/int_macros.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fnum%2Fint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fnum%2Fint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fint_macros.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -2045,7 +2045,8 @@ assert_eq!(\n             #[rustc_const_stable(feature = \"const_int_conversion\", since = \"1.44.0\")]\n             // SAFETY: const sound because integers are plain old datatypes so we can always\n             // transmute them to arrays of bytes\n-            #[allow_internal_unstable(const_fn_transmute)]\n+            #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n             #[inline]\n             pub const fn to_ne_bytes(self) -> [u8; mem::size_of::<Self>()] {\n                 // SAFETY: integers are plain old datatypes so we can always transmute them to\n@@ -2193,7 +2194,8 @@ fn read_ne_\", stringify!($SelfT), \"(input: &mut &[u8]) -> \", stringify!($SelfT),\n             #[rustc_const_stable(feature = \"const_int_conversion\", since = \"1.44.0\")]\n             // SAFETY: const sound because integers are plain old datatypes so we can always\n             // transmute to them\n-            #[allow_internal_unstable(const_fn_transmute)]\n+            #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n             #[inline]\n             pub const fn from_ne_bytes(bytes: [u8; mem::size_of::<Self>()]) -> Self {\n                 // SAFETY: integers are plain old datatypes so we can always transmute to them"}, {"sha": "bdea0ea3b08c026aaf518462aa941c96987544b9", "filename": "library/core/src/num/uint_macros.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fnum%2Fuint_macros.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -1803,7 +1803,8 @@ assert_eq!(\n             #[rustc_const_stable(feature = \"const_int_conversion\", since = \"1.44.0\")]\n             // SAFETY: const sound because integers are plain old datatypes so we can always\n             // transmute them to arrays of bytes\n-            #[allow_internal_unstable(const_fn_transmute)]\n+            #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n             #[inline]\n             pub const fn to_ne_bytes(self) -> [u8; mem::size_of::<Self>()] {\n                 // SAFETY: integers are plain old datatypes so we can always transmute them to\n@@ -1951,7 +1952,8 @@ fn read_ne_\", stringify!($SelfT), \"(input: &mut &[u8]) -> \", stringify!($SelfT),\n             #[rustc_const_stable(feature = \"const_int_conversion\", since = \"1.44.0\")]\n             // SAFETY: const sound because integers are plain old datatypes so we can always\n             // transmute to them\n-            #[allow_internal_unstable(const_fn_transmute)]\n+            #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+            #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n             #[inline]\n             pub const fn from_ne_bytes(bytes: [u8; mem::size_of::<Self>()]) -> Self {\n                 // SAFETY: integers are plain old datatypes so we can always transmute to them"}, {"sha": "007c75dd07647f528b4cf6665f7c3d7f7248190f", "filename": "library/core/src/slice/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fslice%2Fmod.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -88,7 +88,8 @@ impl<T> [T] {\n     #[rustc_const_stable(feature = \"const_slice_len\", since = \"1.32.0\")]\n     #[inline]\n     // SAFETY: const sound because we transmute out the length field as a usize (which it must be)\n-    #[allow_internal_unstable(const_fn_union)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_union))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_union))]\n     pub const fn len(&self) -> usize {\n         // SAFETY: this is safe because `&[T]` and `FatPtr<T>` have the same layout.\n         // Only `std` can make this guarantee."}, {"sha": "952d0598a7c5b961366bb3aceda9a66b1c37edb8", "filename": "library/core/src/str/converts.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fstr%2Fconverts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fstr%2Fconverts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fstr%2Fconverts.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -157,7 +157,8 @@ pub fn from_utf8_mut(v: &mut [u8]) -> Result<&mut str, Utf8Error> {\n #[inline]\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_const_unstable(feature = \"const_str_from_utf8_unchecked\", issue = \"75196\")]\n-#[allow_internal_unstable(const_fn_transmute)]\n+#[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+#[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n pub const unsafe fn from_utf8_unchecked(v: &[u8]) -> &str {\n     // SAFETY: the caller must guarantee that the bytes `v` are valid UTF-8.\n     // Also relies on `&str` and `&[u8]` having the same layout."}, {"sha": "ee9c09fe186c7491e9864bc4f70146c0610222ce", "filename": "library/core/src/str/mod.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fstr%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Fstr%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fstr%2Fmod.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -219,7 +219,8 @@ impl str {\n     #[rustc_const_stable(feature = \"str_as_bytes\", since = \"1.32.0\")]\n     #[inline(always)]\n     #[allow(unused_attributes)]\n-    #[allow_internal_unstable(const_fn_transmute)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n     pub const fn as_bytes(&self) -> &[u8] {\n         // SAFETY: const sound because we transmute two types with the same layout\n         unsafe { mem::transmute(self) }"}, {"sha": "d3c0d9b784139c08974ba0c9e0cce3aa27f7257b", "filename": "library/core/src/task/wake.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Ftask%2Fwake.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fcore%2Fsrc%2Ftask%2Fwake.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Ftask%2Fwake.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -130,7 +130,8 @@ impl RawWakerVTable {\n     #[rustc_promotable]\n     #[stable(feature = \"futures_api\", since = \"1.36.0\")]\n     #[rustc_const_stable(feature = \"futures_api\", since = \"1.36.0\")]\n-    #[allow_internal_unstable(const_fn_fn_ptr_basics)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_fn_ptr_basics))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_fn_ptr_basics))]\n     pub const fn new(\n         clone: unsafe fn(*const ()) -> RawWaker,\n         wake: unsafe fn(*const ()),"}, {"sha": "dfe5df965cfacc043d518f9ddcaa509f7a5cfd5c", "filename": "library/proc_macro/src/bridge/client.rs", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclient.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclient.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fproc_macro%2Fsrc%2Fbridge%2Fclient.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -401,7 +401,8 @@ fn run_client<A: for<'a, 's> DecodeMut<'a, 's, ()>, R: Encode<()>>(\n }\n \n impl Client<fn(crate::TokenStream) -> crate::TokenStream> {\n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn expand1(f: fn(crate::TokenStream) -> crate::TokenStream) -> Self {\n         extern \"C\" fn run(\n             bridge: Bridge<'_>,\n@@ -414,7 +415,8 @@ impl Client<fn(crate::TokenStream) -> crate::TokenStream> {\n }\n \n impl Client<fn(crate::TokenStream, crate::TokenStream) -> crate::TokenStream> {\n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn expand2(\n         f: fn(crate::TokenStream, crate::TokenStream) -> crate::TokenStream,\n     ) -> Self {\n@@ -459,7 +461,8 @@ impl ProcMacro {\n         }\n     }\n \n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn custom_derive(\n         trait_name: &'static str,\n         attributes: &'static [&'static str],\n@@ -468,15 +471,17 @@ impl ProcMacro {\n         ProcMacro::CustomDerive { trait_name, attributes, client: Client::expand1(expand) }\n     }\n \n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn attr(\n         name: &'static str,\n         expand: fn(crate::TokenStream, crate::TokenStream) -> crate::TokenStream,\n     ) -> Self {\n         ProcMacro::Attr { name, client: Client::expand2(expand) }\n     }\n \n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn bang(\n         name: &'static str,\n         expand: fn(crate::TokenStream) -> crate::TokenStream,"}, {"sha": "e7c32b10384d4afdcbafad435a220c92f6df50be", "filename": "library/proc_macro/src/bridge/scoped_cell.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fproc_macro%2Fsrc%2Fbridge%2Fscoped_cell.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fproc_macro%2Fsrc%2Fbridge%2Fscoped_cell.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fproc_macro%2Fsrc%2Fbridge%2Fscoped_cell.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -35,7 +35,8 @@ impl<'a, 'b, T: LambdaL> DerefMut for RefMutL<'a, 'b, T> {\n pub struct ScopedCell<T: LambdaL>(Cell<<T as ApplyL<'static>>::Out>);\n \n impl<T: LambdaL> ScopedCell<T> {\n-    #[allow_internal_unstable(const_fn)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn))]\n     pub const fn new(value: <T as ApplyL<'static>>::Out) -> Self {\n         ScopedCell(Cell::new(value))\n     }"}, {"sha": "5a4b69cf6fc1b294b2380ad70f630b813dec1682", "filename": "library/proc_macro/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fproc_macro%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fproc_macro%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fproc_macro%2Fsrc%2Flib.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -18,6 +18,7 @@\n     test(no_crate_inject, attr(deny(warnings))),\n     test(attr(allow(dead_code, deprecated, unused_variables, unused_mut)))\n )]\n+#![cfg_attr(not(bootstrap), feature(rustc_allow_const_fn_unstable))]\n #![feature(nll)]\n #![feature(staged_api)]\n #![feature(const_fn)]"}, {"sha": "7aac411b63307c6984581835d6b95338e62bca79", "filename": "library/std/src/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fstd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fstd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Flib.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -206,6 +206,7 @@\n #![needs_panic_runtime]\n // std may use features in a platform-specific way\n #![allow(unused_features)]\n+#![cfg_attr(not(bootstrap), feature(rustc_allow_const_fn_unstable))]\n #![cfg_attr(test, feature(print_internals, set_stdio, update_panic_count))]\n #![cfg_attr(\n     all(target_vendor = \"fortanix\", target_env = \"sgx\"),"}, {"sha": "bb3ece4c2739f239883ffe5402fa81d66baf3fe2", "filename": "library/std/src/net/ip.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fstd%2Fsrc%2Fnet%2Fip.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/library%2Fstd%2Fsrc%2Fnet%2Fip.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fnet%2Fip.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -1043,7 +1043,8 @@ impl Ipv6Addr {\n     /// ```\n     #[stable(feature = \"rust1\", since = \"1.0.0\")]\n     #[rustc_const_stable(feature = \"const_ipv6\", since = \"1.32.0\")]\n-    #[allow_internal_unstable(const_fn_transmute)]\n+    #[cfg_attr(not(bootstrap), rustc_allow_const_fn_unstable(const_fn_transmute))]\n+    #[cfg_attr(bootstrap, allow_internal_unstable(const_fn_transmute))]\n     pub const fn new(a: u16, b: u16, c: u16, d: u16, e: u16, f: u16, g: u16, h: u16) -> Ipv6Addr {\n         let addr16 = [\n             a.to_be(),"}, {"sha": "53ade85bfd2e7de6adf302a250744b365a5a7f4f", "filename": "src/test/ui/consts/min_const_fn/allow_const_fn_ptr.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -1,4 +1,4 @@\n-#![feature(rustc_attrs, staged_api, allow_internal_unstable)]\n+#![feature(rustc_attrs, staged_api, rustc_allow_const_fn_unstable)]\n #![feature(const_fn_fn_ptr_basics)]\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n@@ -8,7 +8,7 @@ const fn error(_: fn()) {}\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_const_stable(since=\"1.0.0\", feature = \"mep\")]\n-#[allow_internal_unstable(const_fn_fn_ptr_basics)]\n+#[rustc_allow_const_fn_unstable(const_fn_fn_ptr_basics)]\n const fn compiles(_: fn()) {}\n \n fn main() {}"}, {"sha": "6f89225719f842ba9f8277981ea3ae0781fe079b", "filename": "src/test/ui/consts/min_const_fn/allow_const_fn_ptr.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr.stderr?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -8,9 +8,9 @@ help: if it is not part of the public API, make this function unstably const\n    |\n LL | #[rustc_const_unstable(feature = \"...\", issue = \"...\")]\n    |\n-help: otherwise `#[allow_internal_unstable]` can be used to bypass stability checks\n+help: otherwise `#[rustc_allow_const_fn_unstable]` can be used to bypass stability checks\n    |\n-LL | #[allow_internal_unstable(const_fn_fn_ptr_basics)]\n+LL | #[rustc_allow_const_fn_unstable(const_fn_fn_ptr_basics)]\n    |\n \n error: aborting due to previous error"}, {"sha": "430e911aacdee7fb09785b067fd9e0fd906337f3", "filename": "src/test/ui/consts/min_const_fn/allow_const_fn_ptr_run_pass.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr_run_pass.rs", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr_run_pass.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fallow_const_fn_ptr_run_pass.rs?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -1,13 +1,13 @@\n // run-pass\n-#![feature(allow_internal_unstable)]\n+#![feature(rustc_allow_const_fn_unstable)]\n #![feature(const_fn_fn_ptr_basics)]\n \n #![feature(rustc_attrs, staged_api)]\n #![stable(feature = \"rust1\", since = \"1.0.0\")]\n \n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n #[rustc_const_stable(since=\"1.0.0\", feature = \"mep\")]\n-#[allow_internal_unstable(const_fn_fn_ptr_basics)]\n+#[rustc_allow_const_fn_unstable(const_fn_fn_ptr_basics)]\n const fn takes_fn_ptr(_: fn()) {}\n \n const FN: fn() = || ();"}, {"sha": "d3017c5602a8c1ece32329c85158e957bdaad127", "filename": "src/test/ui/consts/min_const_fn/min_const_fn_libstd_stability.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_fn_libstd_stability.stderr?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -24,9 +24,9 @@ help: if it is not part of the public API, make this function unstably const\n    |\n LL | #[rustc_const_unstable(feature = \"...\", issue = \"...\")]\n    |\n-help: otherwise `#[allow_internal_unstable]` can be used to bypass stability checks\n+help: otherwise `#[rustc_allow_const_fn_unstable]` can be used to bypass stability checks\n    |\n-LL | #[allow_internal_unstable(const_fn_floating_point_arithmetic)]\n+LL | #[rustc_allow_const_fn_unstable(const_fn_floating_point_arithmetic)]\n    |\n \n error: `foo2_gated` is not yet stable as a const fn"}, {"sha": "53a59467e3d20bcb0e6deaa4f599b49d3b7ced2c", "filename": "src/test/ui/consts/min_const_fn/min_const_unsafe_fn_libstd_stability.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fmin_const_fn%2Fmin_const_unsafe_fn_libstd_stability.stderr?ref=05f4a9a42abbbdb64d3ec4ed0ae6883c10c66e3f", "patch": "@@ -24,9 +24,9 @@ help: if it is not part of the public API, make this function unstably const\n    |\n LL | #[rustc_const_unstable(feature = \"...\", issue = \"...\")]\n    |\n-help: otherwise `#[allow_internal_unstable]` can be used to bypass stability checks\n+help: otherwise `#[rustc_allow_const_fn_unstable]` can be used to bypass stability checks\n    |\n-LL | #[allow_internal_unstable(const_fn_floating_point_arithmetic)]\n+LL | #[rustc_allow_const_fn_unstable(const_fn_floating_point_arithmetic)]\n    |\n \n error: `foo2_gated` is not yet stable as a const fn"}]}