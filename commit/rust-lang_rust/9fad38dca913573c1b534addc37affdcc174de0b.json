{"sha": "9fad38dca913573c1b534addc37affdcc174de0b", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlmYWQzOGRjYTkxMzU3M2MxYjUzNGFkZGMzN2FmZmRjYzE3NGRlMGI=", "commit": {"author": {"name": "Maxwell Anderson", "email": "maxwell.brayden.anderson@gmail.com", "date": "2018-10-12T04:15:01Z"}, "committer": {"name": "Maxwell Anderson", "email": "maxwell.brayden.anderson@gmail.com", "date": "2018-10-12T04:15:01Z"}, "message": "tmp progress", "tree": {"sha": "4705aca75300035d05b5862fd894823fe75298a9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4705aca75300035d05b5862fd894823fe75298a9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9fad38dca913573c1b534addc37affdcc174de0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9fad38dca913573c1b534addc37affdcc174de0b", "html_url": "https://github.com/rust-lang/rust/commit/9fad38dca913573c1b534addc37affdcc174de0b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9fad38dca913573c1b534addc37affdcc174de0b/comments", "author": {"login": "Zaechus", "id": 19353212, "node_id": "MDQ6VXNlcjE5MzUzMjEy", "avatar_url": "https://avatars.githubusercontent.com/u/19353212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zaechus", "html_url": "https://github.com/Zaechus", "followers_url": "https://api.github.com/users/Zaechus/followers", "following_url": "https://api.github.com/users/Zaechus/following{/other_user}", "gists_url": "https://api.github.com/users/Zaechus/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zaechus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zaechus/subscriptions", "organizations_url": "https://api.github.com/users/Zaechus/orgs", "repos_url": "https://api.github.com/users/Zaechus/repos", "events_url": "https://api.github.com/users/Zaechus/events{/privacy}", "received_events_url": "https://api.github.com/users/Zaechus/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zaechus", "id": 19353212, "node_id": "MDQ6VXNlcjE5MzUzMjEy", "avatar_url": "https://avatars.githubusercontent.com/u/19353212?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zaechus", "html_url": "https://github.com/Zaechus", "followers_url": "https://api.github.com/users/Zaechus/followers", "following_url": "https://api.github.com/users/Zaechus/following{/other_user}", "gists_url": "https://api.github.com/users/Zaechus/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zaechus/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zaechus/subscriptions", "organizations_url": "https://api.github.com/users/Zaechus/orgs", "repos_url": "https://api.github.com/users/Zaechus/repos", "events_url": "https://api.github.com/users/Zaechus/events{/privacy}", "received_events_url": "https://api.github.com/users/Zaechus/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd11ffac0b944eddc605a06a742b02f43c57755f", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd11ffac0b944eddc605a06a742b02f43c57755f", "html_url": "https://github.com/rust-lang/rust/commit/dd11ffac0b944eddc605a06a742b02f43c57755f"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "2d64a24a79be1ae28bd5a182ab5cfe0f88ef3880", "filename": "clippy_lints/src/literal_representation.rs", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/9fad38dca913573c1b534addc37affdcc174de0b/clippy_lints%2Fsrc%2Fliteral_representation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9fad38dca913573c1b534addc37affdcc174de0b/clippy_lints%2Fsrc%2Fliteral_representation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fliteral_representation.rs?ref=9fad38dca913573c1b534addc37affdcc174de0b", "patch": "@@ -173,8 +173,10 @@ impl<'a> DigitInfo<'a> {\n             } else {\n                 d_idx\n             };\n-            if float && (d == 'f' || d == 'e' || d == 'E') ||\n-                !float && (d == 'i' || d == 'u' || is_possible_suffix_index(&sans_prefix, suffix_start, len)) {\n+            if float && ((is_possible_float_suffix_index(&sans_prefix, suffix_start, len)) ||\n+                (d == 'f' || d == 'e' || d == 'E')) ||\n+                !float && (d == 'i' || d == 'u' ||\n+                is_possible_suffix_index(&sans_prefix, suffix_start, len)) {\n                     let (digits, suffix) = sans_prefix.split_at(suffix_start);\n                     return Self {\n                         digits,\n@@ -248,6 +250,9 @@ impl<'a> DigitInfo<'a> {\n                 hint = format!(\"{:0>4}{}\", &hint[..nb_digits_to_fill], &hint[nb_digits_to_fill..]);\n             }\n             let suffix_hint = match self.suffix {\n+                Some(suffix) if is_mistyped_float_suffix(suffix) && self.digits.contains(\".\") => {\n+                    format!(\"_f{}\", &suffix[1..])\n+                },\n                 Some(suffix) if is_mistyped_suffix(suffix) => {\n                     format!(\"_i{}\", &suffix[1..])\n                 },\n@@ -572,3 +577,12 @@ fn is_possible_suffix_index(lit: &str, idx: usize, len: usize) -> bool {\n     ((len > 3 && idx == len - 3) || (len > 2 && idx == len - 2)) &&\n         is_mistyped_suffix(lit.split_at(idx).1)\n }\n+\n+fn is_mistyped_float_suffix(suffix: &str) -> bool {\n+    [\"_32\", \"_64\"].contains(&suffix)\n+}\n+\n+fn is_possible_float_suffix_index(lit: &str, idx: usize, len: usize) -> bool {\n+    ((len > 3 && idx == len - 3) || (len > 2 && idx == len - 2)) &&\n+        is_mistyped_float_suffix(lit.split_at(idx).1)\n+}"}, {"sha": "39d9f3f0e44c1f9107d38601039a7ee1845338b9", "filename": "tests/ui/literals.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/9fad38dca913573c1b534addc37affdcc174de0b/tests%2Fui%2Fliterals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9fad38dca913573c1b534addc37affdcc174de0b/tests%2Fui%2Fliterals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fliterals.rs?ref=9fad38dca913573c1b534addc37affdcc174de0b", "patch": "@@ -64,4 +64,7 @@ fn main() {\n     let fail21 = 4___16;\n     let fail22 = 3__4___23;\n     let fail23 = 3__16___23;\n+\n+    //let fail24 = 1E2_32;\n+    let fail25 = 1.2_32;\n }"}]}