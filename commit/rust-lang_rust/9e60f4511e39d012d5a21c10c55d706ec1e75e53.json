{"sha": "9e60f4511e39d012d5a21c10c55d706ec1e75e53", "node_id": "MDY6Q29tbWl0NzI0NzEyOjllNjBmNDUxMWUzOWQwMTJkNWEyMWMxMGM1NWQ3MDZlYzFlNzVlNTM=", "commit": {"author": {"name": "Hameer Abbasi", "email": "einstein.edison@gmail.com", "date": "2020-10-28T10:36:19Z"}, "committer": {"name": "Hameer Abbasi", "email": "einstein.edison@gmail.com", "date": "2020-10-28T10:36:19Z"}, "message": "Add const generics tests for supertraits + dyn traits.", "tree": {"sha": "be2c886b2e01adc57b3900161e9126f18cd2b4a6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be2c886b2e01adc57b3900161e9126f18cd2b4a6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9e60f4511e39d012d5a21c10c55d706ec1e75e53", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9e60f4511e39d012d5a21c10c55d706ec1e75e53", "html_url": "https://github.com/rust-lang/rust/commit/9e60f4511e39d012d5a21c10c55d706ec1e75e53", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9e60f4511e39d012d5a21c10c55d706ec1e75e53/comments", "author": {"login": "hameerabbasi", "id": 2190658, "node_id": "MDQ6VXNlcjIxOTA2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2190658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hameerabbasi", "html_url": "https://github.com/hameerabbasi", "followers_url": "https://api.github.com/users/hameerabbasi/followers", "following_url": "https://api.github.com/users/hameerabbasi/following{/other_user}", "gists_url": "https://api.github.com/users/hameerabbasi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hameerabbasi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hameerabbasi/subscriptions", "organizations_url": "https://api.github.com/users/hameerabbasi/orgs", "repos_url": "https://api.github.com/users/hameerabbasi/repos", "events_url": "https://api.github.com/users/hameerabbasi/events{/privacy}", "received_events_url": "https://api.github.com/users/hameerabbasi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hameerabbasi", "id": 2190658, "node_id": "MDQ6VXNlcjIxOTA2NTg=", "avatar_url": "https://avatars.githubusercontent.com/u/2190658?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hameerabbasi", "html_url": "https://github.com/hameerabbasi", "followers_url": "https://api.github.com/users/hameerabbasi/followers", "following_url": "https://api.github.com/users/hameerabbasi/following{/other_user}", "gists_url": "https://api.github.com/users/hameerabbasi/gists{/gist_id}", "starred_url": "https://api.github.com/users/hameerabbasi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hameerabbasi/subscriptions", "organizations_url": "https://api.github.com/users/hameerabbasi/orgs", "repos_url": "https://api.github.com/users/hameerabbasi/repos", "events_url": "https://api.github.com/users/hameerabbasi/events{/privacy}", "received_events_url": "https://api.github.com/users/hameerabbasi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2eb4fc800aaf5006f89af3af591e2aa34f469d81", "url": "https://api.github.com/repos/rust-lang/rust/commits/2eb4fc800aaf5006f89af3af591e2aa34f469d81", "html_url": "https://github.com/rust-lang/rust/commit/2eb4fc800aaf5006f89af3af591e2aa34f469d81"}], "stats": {"total": 58, "additions": 58, "deletions": 0}, "files": [{"sha": "b72dd9cc90cd4bcb1a366e9611a48b02585e81b4", "filename": "src/test/ui/const-generics/dyn-supertraits.rs", "status": "added", "additions": 58, "deletions": 0, "changes": 58, "blob_url": "https://github.com/rust-lang/rust/blob/9e60f4511e39d012d5a21c10c55d706ec1e75e53/src%2Ftest%2Fui%2Fconst-generics%2Fdyn-supertraits.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e60f4511e39d012d5a21c10c55d706ec1e75e53/src%2Ftest%2Fui%2Fconst-generics%2Fdyn-supertraits.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconst-generics%2Fdyn-supertraits.rs?ref=9e60f4511e39d012d5a21c10c55d706ec1e75e53", "patch": "@@ -0,0 +1,58 @@\n+// check-pass\n+// revisions: full min\n+\n+#![cfg_attr(full, feature(const_generics))]\n+#![cfg_attr(full, allow(incomplete_features))]\n+#![cfg_attr(min, feature(min_const_generics))]\n+\n+trait Foo<const N: usize> {}\n+trait Bar<const N: usize> : Foo<N> {}\n+trait Baz: Foo<3> {}\n+\n+struct FooType<const N: usize> {}\n+struct BarType<const N: usize> {}\n+struct BazType {}\n+\n+impl<const N: usize> Foo<N> for FooType<N> {}\n+impl<const N: usize> Foo<N> for BarType<N> {}\n+impl<const N: usize> Bar<N> for BarType<N> {}\n+impl Foo<3> for BazType {}\n+impl Baz for BazType {}\n+\n+trait Foz {}\n+trait Boz: Foo<3> + Foz {}\n+trait Bok<const N: usize>: Foo<N> + Foz {}\n+\n+struct FozType {}\n+struct BozType {}\n+struct BokType<const N: usize> {}\n+\n+impl Foz for FozType {}\n+\n+impl Foz for BozType {}\n+impl Foo<3> for BozType {}\n+impl Boz for BozType {}\n+\n+impl<const N: usize> Foz for BokType<N> {}\n+impl<const N: usize> Foo<N> for BokType<N> {}\n+impl<const N: usize> Bok<N> for BokType<N> {}\n+\n+fn a<const N: usize>(x: &dyn Foo<N>) {}\n+fn b(x: &dyn Foo<3>) {}\n+\n+fn main() {\n+    let foo = FooType::<3> {};\n+    a(&foo); b(&foo);\n+\n+    let bar = BarType::<3> {};\n+    a(&bar); b(&bar);\n+\n+    let baz = BazType {};\n+    a(&baz); b(&baz);\n+\n+    let boz = BozType {};\n+    a(&boz); b(&boz);\n+\n+    let bok = BokType::<3> {};\n+    a(&bok); b(&bok);\n+}"}]}