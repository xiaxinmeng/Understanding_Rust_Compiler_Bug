{"sha": "2e63604e2aef8aacff2591266933393ce0f41b13", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlNjM2MDRlMmFlZjhhYWNmZjI1OTEyNjY5MzMzOTNjZTBmNDFiMTM=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-06-18T00:22:02Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2015-06-18T00:32:11Z"}, "message": "mk: Fix reconfiguring top-level ./configure\n\nIn #26252 support was added to have prettier paths printed out on failure by not\npassing the full path to the source file to the compiler, but instead just a\nsmall relative path. To preserve this relative path across configurations, the\n`SREL` variable was used for reconfiguring, but if `SREL` is empty then it will\nattempt to run the command `configure` which is distinct from running\n`./configure` (e.g. doesn't run the local script).\n\nThis commit modifies the `SREL` value to re-run the configure script by setting\nit to `./` in the case where `SREL` is empty.", "tree": {"sha": "e0c2ddff5d74c133162c08a824323e04ba1235e6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e0c2ddff5d74c133162c08a824323e04ba1235e6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e63604e2aef8aacff2591266933393ce0f41b13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e63604e2aef8aacff2591266933393ce0f41b13", "html_url": "https://github.com/rust-lang/rust/commit/2e63604e2aef8aacff2591266933393ce0f41b13", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e63604e2aef8aacff2591266933393ce0f41b13/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8af39cebc547a946b4ae861854c46c9c9a70a923", "url": "https://api.github.com/repos/rust-lang/rust/commits/8af39cebc547a946b4ae861854c46c9c9a70a923", "html_url": "https://github.com/rust-lang/rust/commit/8af39cebc547a946b4ae861854c46c9c9a70a923"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "1a3a1774384d84d897675c9f67a4ee797b3927fa", "filename": "mk/reconfig.mk", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2e63604e2aef8aacff2591266933393ce0f41b13/mk%2Freconfig.mk", "raw_url": "https://github.com/rust-lang/rust/raw/2e63604e2aef8aacff2591266933393ce0f41b13/mk%2Freconfig.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Freconfig.mk?ref=2e63604e2aef8aacff2591266933393ce0f41b13", "patch": "@@ -32,6 +32,12 @@ endif\n \n Makefile config.mk: config.stamp\n \n+ifeq ($(SREL),)\n+SREL_ROOT := ./\n+else\n+SREL_ROOT := $(SREL)\n+endif\n+\n config.stamp: $(S)configure $(S)Makefile.in $(S)src/snapshots.txt\n \t@$(call E, cfg: reconfiguring)\n-\t$(SREL)configure $(CFG_CONFIGURE_ARGS)\n+\t$(SREL_ROOT)configure $(CFG_CONFIGURE_ARGS)"}]}