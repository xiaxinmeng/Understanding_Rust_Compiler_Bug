{"sha": "9a7bc3972ceeeab709b277f0930c5becce5e9adf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlhN2JjMzk3MmNlZWVhYjcwOWIyNzdmMDkzMGM1YmVjY2U1ZTlhZGY=", "commit": {"author": {"name": "Christian Poveda", "email": "git@christianpoveda.xyz", "date": "2020-02-19T22:17:47Z"}, "committer": {"name": "Christian Poveda", "email": "git@christianpoveda.xyz", "date": "2020-02-19T22:48:15Z"}, "message": "promote open and lseek shims to posix", "tree": {"sha": "a764f4a8d64bedf2a97b26fb626afa55c2f09b03", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a764f4a8d64bedf2a97b26fb626afa55c2f09b03"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9a7bc3972ceeeab709b277f0930c5becce5e9adf", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYIAB0WIQRsB8A/3NrzTlMMjT0nUl7150IKUAUCXk27LwAKCRAnUl7150IK\nUGszAP9QID5rYxB9lHb3l8XhpblsE9Iu+nhe7XYsdoOGMg0WWwEA1tb/sipMMiUa\nK0G/R7dD5wLi8uve/vx7CgtyXIlqJwk=\n=ZrDE\n-----END PGP SIGNATURE-----", "payload": "tree a764f4a8d64bedf2a97b26fb626afa55c2f09b03\nparent dbef2340b293e1ad825c7ed2aadff24ad4991cc3\nauthor Christian Poveda <git@christianpoveda.xyz> 1582150667 -0500\ncommitter Christian Poveda <git@christianpoveda.xyz> 1582152495 -0500\n\npromote open and lseek shims to posix\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9a7bc3972ceeeab709b277f0930c5becce5e9adf", "html_url": "https://github.com/rust-lang/rust/commit/9a7bc3972ceeeab709b277f0930c5becce5e9adf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9a7bc3972ceeeab709b277f0930c5becce5e9adf/comments", "author": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pvdrz", "id": 31802960, "node_id": "MDQ6VXNlcjMxODAyOTYw", "avatar_url": "https://avatars.githubusercontent.com/u/31802960?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pvdrz", "html_url": "https://github.com/pvdrz", "followers_url": "https://api.github.com/users/pvdrz/followers", "following_url": "https://api.github.com/users/pvdrz/following{/other_user}", "gists_url": "https://api.github.com/users/pvdrz/gists{/gist_id}", "starred_url": "https://api.github.com/users/pvdrz/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pvdrz/subscriptions", "organizations_url": "https://api.github.com/users/pvdrz/orgs", "repos_url": "https://api.github.com/users/pvdrz/repos", "events_url": "https://api.github.com/users/pvdrz/events{/privacy}", "received_events_url": "https://api.github.com/users/pvdrz/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dbef2340b293e1ad825c7ed2aadff24ad4991cc3", "url": "https://api.github.com/repos/rust-lang/rust/commits/dbef2340b293e1ad825c7ed2aadff24ad4991cc3", "html_url": "https://github.com/rust-lang/rust/commit/dbef2340b293e1ad825c7ed2aadff24ad4991cc3"}], "stats": {"total": 30, "additions": 10, "deletions": 20}, "files": [{"sha": "6dc21d15b9f630bd94cd5e2fa4afd1f76020cda9", "filename": "src/shims/foreign_items/posix.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9a7bc3972ceeeab709b277f0930c5becce5e9adf/src%2Fshims%2Fforeign_items%2Fposix.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a7bc3972ceeeab709b277f0930c5becce5e9adf/src%2Fshims%2Fforeign_items%2Fposix.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fforeign_items%2Fposix.rs?ref=9a7bc3972ceeeab709b277f0930c5becce5e9adf", "patch": "@@ -45,6 +45,11 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n             }\n \n             // File related shims\n+            \"open\" | \"open64\" => {\n+                let result = this.open(args[0], args[1])?;\n+                this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n+            }\n+\n             \"fcntl\" => {\n                 let result = this.fcntl(args[0], args[1], args.get(2).cloned())?;\n                 this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n@@ -104,6 +109,11 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                 this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n             }\n \n+            \"lseek\" | \"lseek64\" => {\n+                let result = this.lseek64(args[0], args[1], args[2])?;\n+                this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n+            }\n+\n             // Other shims\n             \"posix_memalign\" => {\n                 let ret = this.deref_operand(args[0])?;"}, {"sha": "1c03e3cb1cfeb140de07891caf65d72837dad345", "filename": "src/shims/foreign_items/posix/linux.rs", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9a7bc3972ceeeab709b277f0930c5becce5e9adf/src%2Fshims%2Fforeign_items%2Fposix%2Flinux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a7bc3972ceeeab709b277f0930c5becce5e9adf/src%2Fshims%2Fforeign_items%2Fposix%2Flinux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fforeign_items%2Fposix%2Flinux.rs?ref=9a7bc3972ceeeab709b277f0930c5becce5e9adf", "patch": "@@ -19,21 +19,11 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n             }\n \n             // File related shims\n-            \"open64\" => {\n-                let result = this.open(args[0], args[1])?;\n-                this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n-            }\n-\n             \"close\" => {\n                 let result = this.close(args[0])?;\n                 this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n             }\n \n-            \"lseek64\" => {\n-                let result = this.lseek64(args[0], args[1], args[2])?;\n-                this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n-            }\n-\n             // Time related shims\n             \"clock_gettime\" => {\n                 let result = this.clock_gettime(args[0], args[1])?;"}, {"sha": "bf7146267944f696260321e2bcc18bc3788a9b57", "filename": "src/shims/foreign_items/posix/macos.rs", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/9a7bc3972ceeeab709b277f0930c5becce5e9adf/src%2Fshims%2Fforeign_items%2Fposix%2Fmacos.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9a7bc3972ceeeab709b277f0930c5becce5e9adf/src%2Fshims%2Fforeign_items%2Fposix%2Fmacos.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fshims%2Fforeign_items%2Fposix%2Fmacos.rs?ref=9a7bc3972ceeeab709b277f0930c5becce5e9adf", "patch": "@@ -19,11 +19,6 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n             }\n \n             // File related shims\n-             \"open\" => {\n-                let result = this.open(args[0], args[1])?;\n-                this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n-            }\n-\n             \"close$NOCANCEL\" => {\n                 let result = this.close(args[0])?;\n                 this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n@@ -44,11 +39,6 @@ pub trait EvalContextExt<'mir, 'tcx: 'mir>: crate::MiriEvalContextExt<'mir, 'tcx\n                 this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n             }\n \n-            \"lseek\" => {\n-                let result = this.lseek64(args[0], args[1], args[2])?;\n-                this.write_scalar(Scalar::from_int(result, dest.layout.size), dest)?;\n-            }\n-\n             // Time related shims\n             \"gettimeofday\" => {\n                 let result = this.gettimeofday(args[0], args[1])?;"}]}