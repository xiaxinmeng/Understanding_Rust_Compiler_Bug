{"sha": "ff51964102db6fbf73cd2e111d441bf8202ea205", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmNTE5NjQxMDJkYjZmYmY3M2NkMmUxMTFkNDQxYmY4MjAyZWEyMDU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-03-03T21:26:24Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-03-03T21:26:24Z"}, "message": "Auto merge of #6825 - djc:naive-bytecount-pedantic, r=Manishearth\n\nMove naive_bytecount to pedantic\n\nAs discussed on Zulip, current best practice is to avoid recommending\nexternal crates. This lint is from before that was enforced. Move it\nto the pedantic group to avoid enabling it by default.\n\nhttps://rust-lang.zulipchat.com/#narrow/stream/257328-clippy/topic/naive_bytecount.20suggesting.20extra.20dependency\n\nchangelog: move [`naive_bytecount`] to pedantic", "tree": {"sha": "3f34cbb5626b8c0f63f9dbd36266dbe1f834f8aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f34cbb5626b8c0f63f9dbd36266dbe1f834f8aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ff51964102db6fbf73cd2e111d441bf8202ea205", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ff51964102db6fbf73cd2e111d441bf8202ea205", "html_url": "https://github.com/rust-lang/rust/commit/ff51964102db6fbf73cd2e111d441bf8202ea205", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ff51964102db6fbf73cd2e111d441bf8202ea205/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43d19f63f7c6007284387e76cfe0fe8b74e98a59", "url": "https://api.github.com/repos/rust-lang/rust/commits/43d19f63f7c6007284387e76cfe0fe8b74e98a59", "html_url": "https://github.com/rust-lang/rust/commit/43d19f63f7c6007284387e76cfe0fe8b74e98a59"}, {"sha": "9e4a064f0878215fccaa3bebdfaf4459db984da3", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e4a064f0878215fccaa3bebdfaf4459db984da3", "html_url": "https://github.com/rust-lang/rust/commit/9e4a064f0878215fccaa3bebdfaf4459db984da3"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "eb5dc7ceecdc75908d133c98fe1e5603159a7002", "filename": "clippy_lints/src/bytecount.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ff51964102db6fbf73cd2e111d441bf8202ea205/clippy_lints%2Fsrc%2Fbytecount.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff51964102db6fbf73cd2e111d441bf8202ea205/clippy_lints%2Fsrc%2Fbytecount.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fbytecount.rs?ref=ff51964102db6fbf73cd2e111d441bf8202ea205", "patch": "@@ -28,7 +28,7 @@ declare_clippy_lint! {\n     /// &vec.iter().filter(|x| **x == 0u8).count(); // use bytecount::count instead\n     /// ```\n     pub NAIVE_BYTECOUNT,\n-    perf,\n+    pedantic,\n     \"use of naive `<slice>.filter(|&x| x == y).count()` to count byte values\"\n }\n "}, {"sha": "8259fd3c320be978d257aeb5547e8bdfde82c809", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ff51964102db6fbf73cd2e111d441bf8202ea205/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ff51964102db6fbf73cd2e111d441bf8202ea205/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=ff51964102db6fbf73cd2e111d441bf8202ea205", "patch": "@@ -1343,6 +1343,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&await_holding_invalid::AWAIT_HOLDING_LOCK),\n         LintId::of(&await_holding_invalid::AWAIT_HOLDING_REFCELL_REF),\n         LintId::of(&bit_mask::VERBOSE_BIT_MASK),\n+        LintId::of(&bytecount::NAIVE_BYTECOUNT),\n         LintId::of(&case_sensitive_file_extension_comparisons::CASE_SENSITIVE_FILE_EXTENSION_COMPARISONS),\n         LintId::of(&checked_conversions::CHECKED_CONVERSIONS),\n         LintId::of(&copies::SAME_FUNCTIONS_IN_IF_CONDITION),\n@@ -1458,7 +1459,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&blocks_in_if_conditions::BLOCKS_IN_IF_CONDITIONS),\n         LintId::of(&booleans::LOGIC_BUG),\n         LintId::of(&booleans::NONMINIMAL_BOOL),\n-        LintId::of(&bytecount::NAIVE_BYTECOUNT),\n         LintId::of(&collapsible_if::COLLAPSIBLE_ELSE_IF),\n         LintId::of(&collapsible_if::COLLAPSIBLE_IF),\n         LintId::of(&collapsible_match::COLLAPSIBLE_MATCH),\n@@ -2015,7 +2015,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n     ]);\n \n     store.register_group(true, \"clippy::perf\", Some(\"clippy_perf\"), vec![\n-        LintId::of(&bytecount::NAIVE_BYTECOUNT),\n         LintId::of(&entry::MAP_ENTRY),\n         LintId::of(&escape::BOXED_LOCAL),\n         LintId::of(&large_const_arrays::LARGE_CONST_ARRAYS),"}]}