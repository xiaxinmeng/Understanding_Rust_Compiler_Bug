{"sha": "2da06c1a2a39338b2a292838b921f8887ac0e408", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJkYTA2YzFhMmEzOTMzOGIyYTI5MjgzOGI5MjFmODg4N2FjMGU0MDg=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-08-03T12:13:05Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-08-03T12:13:05Z"}, "message": "Merge #9771\n\n9771: Give better error message when the rust-analyzer binary path was set in the user's config but the binary is invalid r=matklad a=rylev\n\n`@yoshuawuyts` and I ran into an issue where my rust-analyzer binary path was set in my extension config (which I didn't realize), but the path set in the config was invalid (it simply wasn't on my path). Having an error message that hinted that the binary's path was explicitly set in the config would have considerably shortened the debug time. \r\n\r\nThanks! \n\nCo-authored-by: Ryan Levick <me@ryanlevick.com>", "tree": {"sha": "3f5a97fae2002adfdc225a7ec2f992cf6142191d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3f5a97fae2002adfdc225a7ec2f992cf6142191d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2da06c1a2a39338b2a292838b921f8887ac0e408", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhCTLRCRBK7hj4Ov3rIwAAQjEIAJcBTvQNXMctnVZi7J9a2HFD\nTQ+Yo2sPufOekfhmG44mvIAzWey81vuGw/lTraQqxi/y4GKSM1GZpFjqWoY2keux\nMrqv9zehA5cHesIXKaJRq9iJXi/8wp3fyS3U9L47/qfV9Y2ytLN4VwN/JAoDFPWO\ng5yef3eShWmDDBv6vTRzN6TRNIcwNcLz3/LJArac7nw7RZ2HDYbQcTtGr4Y2/iry\ndoMIBcy1o+jm9jQ8LM07s3eb+FPjCm4Aq9UBo93+6Dl3CGskEDhyHBOaWfyb/fJA\nijIQaYQ3zllrk4MgMh/WWTiZyWZExEs0cd2XK8tsgnbxiZDQFx3wAyMpSUDhGDA=\n=cgyH\n-----END PGP SIGNATURE-----\n", "payload": "tree 3f5a97fae2002adfdc225a7ec2f992cf6142191d\nparent ffbb43f336276b88c0ede6fc348a170255f12bc1\nparent ac50e35325231c5ac72541f3e96c4e119b2e2566\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1627992785 +0000\ncommitter GitHub <noreply@github.com> 1627992785 +0000\n\nMerge #9771\n\n9771: Give better error message when the rust-analyzer binary path was set in the user's config but the binary is invalid r=matklad a=rylev\n\n`@yoshuawuyts` and I ran into an issue where my rust-analyzer binary path was set in my extension config (which I didn't realize), but the path set in the config was invalid (it simply wasn't on my path). Having an error message that hinted that the binary's path was explicitly set in the config would have considerably shortened the debug time. \r\n\r\nThanks! \n\nCo-authored-by: Ryan Levick <me@ryanlevick.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2da06c1a2a39338b2a292838b921f8887ac0e408", "html_url": "https://github.com/rust-lang/rust/commit/2da06c1a2a39338b2a292838b921f8887ac0e408", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2da06c1a2a39338b2a292838b921f8887ac0e408/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ffbb43f336276b88c0ede6fc348a170255f12bc1", "url": "https://api.github.com/repos/rust-lang/rust/commits/ffbb43f336276b88c0ede6fc348a170255f12bc1", "html_url": "https://github.com/rust-lang/rust/commit/ffbb43f336276b88c0ede6fc348a170255f12bc1"}, {"sha": "ac50e35325231c5ac72541f3e96c4e119b2e2566", "url": "https://api.github.com/repos/rust-lang/rust/commits/ac50e35325231c5ac72541f3e96c4e119b2e2566", "html_url": "https://github.com/rust-lang/rust/commit/ac50e35325231c5ac72541f3e96c4e119b2e2566"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "a5958146354cae2a37b4caec6166a99bb173f442", "filename": "editors/code/src/main.ts", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/2da06c1a2a39338b2a292838b921f8887ac0e408/editors%2Fcode%2Fsrc%2Fmain.ts", "raw_url": "https://github.com/rust-lang/rust/raw/2da06c1a2a39338b2a292838b921f8887ac0e408/editors%2Fcode%2Fsrc%2Fmain.ts", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/editors%2Fcode%2Fsrc%2Fmain.ts?ref=2da06c1a2a39338b2a292838b921f8887ac0e408", "patch": "@@ -252,7 +252,12 @@ async function bootstrapServer(config: Config, state: PersistentState): Promise<\n     log.info(\"Using server binary at\", path);\n \n     if (!isValidExecutable(path)) {\n-        throw new Error(`Failed to execute ${path} --version`);\n+        if (config.serverPath) {\n+            throw new Error(`Failed to execute ${path} --version. \\`config.server.path\\` or \\`config.serverPath\\` has been set explicitly.\\\n+            Consider removing this config or making a valid server binary available at that path.`);\n+        } else {\n+            throw new Error(`Failed to execute ${path} --version`);\n+        }\n     }\n \n     return path;"}]}