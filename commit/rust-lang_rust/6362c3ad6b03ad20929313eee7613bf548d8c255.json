{"sha": "6362c3ad6b03ad20929313eee7613bf548d8c255", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzNjJjM2FkNmIwM2FkMjA5MjkzMTNlZWU3NjEzYmY1NDhkOGMyNTU=", "commit": {"author": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2013-08-06T23:50:58Z"}, "committer": {"name": "Michael Sullivan", "email": "sully@msully.net", "date": "2013-08-09T18:29:41Z"}, "message": "Switch to using .enumerate() some places in _match.", "tree": {"sha": "6a0ce0d80a02e6d54502d5835086072a8f1dc0b8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a0ce0d80a02e6d54502d5835086072a8f1dc0b8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6362c3ad6b03ad20929313eee7613bf548d8c255", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6362c3ad6b03ad20929313eee7613bf548d8c255", "html_url": "https://github.com/rust-lang/rust/commit/6362c3ad6b03ad20929313eee7613bf548d8c255", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6362c3ad6b03ad20929313eee7613bf548d8c255/comments", "author": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msullivan", "id": 340349, "node_id": "MDQ6VXNlcjM0MDM0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/340349?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msullivan", "html_url": "https://github.com/msullivan", "followers_url": "https://api.github.com/users/msullivan/followers", "following_url": "https://api.github.com/users/msullivan/following{/other_user}", "gists_url": "https://api.github.com/users/msullivan/gists{/gist_id}", "starred_url": "https://api.github.com/users/msullivan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msullivan/subscriptions", "organizations_url": "https://api.github.com/users/msullivan/orgs", "repos_url": "https://api.github.com/users/msullivan/repos", "events_url": "https://api.github.com/users/msullivan/events{/privacy}", "received_events_url": "https://api.github.com/users/msullivan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "74efdf6197aaee39bd14f8d97b75dbba08f1d32e", "url": "https://api.github.com/repos/rust-lang/rust/commits/74efdf6197aaee39bd14f8d97b75dbba08f1d32e", "html_url": "https://github.com/rust-lang/rust/commit/74efdf6197aaee39bd14f8d97b75dbba08f1d32e"}], "stats": {"total": 15, "additions": 6, "deletions": 9}, "files": [{"sha": "6b7361f186cc42bc9de6a94ab05de09dee07dd59", "filename": "src/librustc/middle/trans/_match.rs", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/6362c3ad6b03ad20929313eee7613bf548d8c255/src%2Flibrustc%2Fmiddle%2Ftrans%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6362c3ad6b03ad20929313eee7613bf548d8c255/src%2Flibrustc%2Fmiddle%2Ftrans%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Ftrans%2F_match.rs?ref=6362c3ad6b03ad20929313eee7613bf548d8c255", "patch": "@@ -1075,13 +1075,13 @@ fn pick_col(m: &[Match]) -> uint {\n     }\n     let mut scores = vec::from_elem(m[0].pats.len(), 0u);\n     for br in m.iter() {\n-        let mut i = 0u;\n-        for p in br.pats.iter() { scores[i] += score(*p); i += 1u; }\n+        for (i, p) in br.pats.iter().enumerate() {\n+            scores[i] += score(*p);\n+        }\n     }\n     let mut max_score = 0u;\n     let mut best_col = 0u;\n-    let mut i = 0u;\n-    for score in scores.iter() {\n+    for (i, score) in scores.iter().enumerate() {\n         let score = *score;\n \n         // Irrefutable columns always go first, they'd only be duplicated in\n@@ -1090,7 +1090,6 @@ fn pick_col(m: &[Match]) -> uint {\n         // If no irrefutable ones are found, we pick the one with the biggest\n         // branching factor.\n         if score > max_score { max_score = score; best_col = i; }\n-        i += 1u;\n     }\n     return best_col;\n }\n@@ -1490,13 +1489,11 @@ fn compile_submatch_continue(mut bcx: @mut Block,\n     let defaults = enter_default(else_cx, dm, m, col, val);\n     let exhaustive = chk.is_none() && defaults.len() == 0u;\n     let len = opts.len();\n-    let mut i = 0u;\n \n     // Compile subtrees for each option\n-    for opt in opts.iter() {\n-        i += 1u;\n+    for (i, opt) in opts.iter().enumerate() {\n         let mut opt_cx = else_cx;\n-        if !exhaustive || i < len {\n+        if !exhaustive || i+1 < len {\n             opt_cx = sub_block(bcx, \"match_case\");\n             match kind {\n               single => Br(bcx, opt_cx.llbb),"}]}