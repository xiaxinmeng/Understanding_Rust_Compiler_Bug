{"sha": "96a267ee1fb20fe7c77e1feb8742de467f3e7d23", "node_id": "C_kwDOAAsO6NoAKDk2YTI2N2VlMWZiMjBmZTdjNzdlMWZlYjg3NDJkZTQ2N2YzZTdkMjM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-01-06T11:01:03Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-01-06T11:01:03Z"}, "message": "Rollup merge of #92389 - chordtoll:test-92015, r=Mark-Simulacrum\n\nRegression test for borrowck ICE #92015\n\nThis issue has come up a few times. Creating a regression test.\nCloses #92015.", "tree": {"sha": "6c7eec0800a145a9853cda34d9496ea8c94f528a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6c7eec0800a145a9853cda34d9496ea8c94f528a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96a267ee1fb20fe7c77e1feb8742de467f3e7d23", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJh1svvCRBK7hj4Ov3rIwAAEa0IAB/TZR2d3XUa3nuCR9Hr4BtZ\nOaqrcJeWx49xciEKvr9Q1txlYePBBmIOtyImoR7+/lXT7CZB/14d9Ie16om7AvsI\nQoF0fNCtn7wcp3mSXf8rRnnRgO7NCtrZ8Tk2PimolbTT8KYnenVcZHyV1P2Pc7QA\n+rG57/Wwj2elJ7iB8fEJXVVSeIF42OZ9MrkG2KyNh0kqKr1KsG+eFAESYW/DAp07\n+wfzFzfy3b3p2hoVaCVDcZwoEbfr7jBPbRt4IQ6i3r8Gceji0msFs2m7pc761i+O\nrWvhvBU9eRQ3YCNxeEu6bBfWHiTaj397YYilu+1cldZpZ7ZczcOyuN1VokWyEBs=\n=m0hZ\n-----END PGP SIGNATURE-----\n", "payload": "tree 6c7eec0800a145a9853cda34d9496ea8c94f528a\nparent fb87e7ceed416f59196619df322710dfe5ba9cb3\nparent 57ac3179422248ac4f06210e4120c40f86e50dce\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1641466863 +0100\ncommitter GitHub <noreply@github.com> 1641466863 +0100\n\nRollup merge of #92389 - chordtoll:test-92015, r=Mark-Simulacrum\n\nRegression test for borrowck ICE #92015\n\nThis issue has come up a few times. Creating a regression test.\nCloses #92015.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96a267ee1fb20fe7c77e1feb8742de467f3e7d23", "html_url": "https://github.com/rust-lang/rust/commit/96a267ee1fb20fe7c77e1feb8742de467f3e7d23", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96a267ee1fb20fe7c77e1feb8742de467f3e7d23/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb87e7ceed416f59196619df322710dfe5ba9cb3", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb87e7ceed416f59196619df322710dfe5ba9cb3", "html_url": "https://github.com/rust-lang/rust/commit/fb87e7ceed416f59196619df322710dfe5ba9cb3"}, {"sha": "57ac3179422248ac4f06210e4120c40f86e50dce", "url": "https://api.github.com/repos/rust-lang/rust/commits/57ac3179422248ac4f06210e4120c40f86e50dce", "html_url": "https://github.com/rust-lang/rust/commit/57ac3179422248ac4f06210e4120c40f86e50dce"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "16d651717ff2c0f935a7e550e6f7f3cc556e7c51", "filename": "src/test/ui/borrowck/issue-92015.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/96a267ee1fb20fe7c77e1feb8742de467f3e7d23/src%2Ftest%2Fui%2Fborrowck%2Fissue-92015.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96a267ee1fb20fe7c77e1feb8742de467f3e7d23/src%2Ftest%2Fui%2Fborrowck%2Fissue-92015.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-92015.rs?ref=96a267ee1fb20fe7c77e1feb8742de467f3e7d23", "patch": "@@ -0,0 +1,7 @@\n+// Regression test for #92105.\n+// ICE when mutating immutable reference from last statement of a block.\n+\n+fn main() {\n+    let foo = Some(&0).unwrap();\n+    *foo = 1; //~ ERROR cannot assign\n+}"}, {"sha": "32a65d3b5bb0f472b341a95cfeb90c9a064abd66", "filename": "src/test/ui/borrowck/issue-92015.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/96a267ee1fb20fe7c77e1feb8742de467f3e7d23/src%2Ftest%2Fui%2Fborrowck%2Fissue-92015.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/96a267ee1fb20fe7c77e1feb8742de467f3e7d23/src%2Ftest%2Fui%2Fborrowck%2Fissue-92015.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fborrowck%2Fissue-92015.stderr?ref=96a267ee1fb20fe7c77e1feb8742de467f3e7d23", "patch": "@@ -0,0 +1,11 @@\n+error[E0594]: cannot assign to `*foo`, which is behind a `&` reference\n+  --> $DIR/issue-92015.rs:6:5\n+   |\n+LL |     let foo = Some(&0).unwrap();\n+   |         --- help: consider changing this to be a mutable reference: `&mut i32`\n+LL |     *foo = 1;\n+   |     ^^^^^^^^ `foo` is a `&` reference, so the data it refers to cannot be written\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0594`."}]}