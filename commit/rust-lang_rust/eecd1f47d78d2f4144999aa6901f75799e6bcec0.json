{"sha": "eecd1f47d78d2f4144999aa6901f75799e6bcec0", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVlY2QxZjQ3ZDc4ZDJmNDE0NDk5OWFhNjkwMWY3NTc5OWU2YmNlYzA=", "commit": {"author": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-20T19:12:37Z"}, "committer": {"name": "Graydon Hoare", "email": "graydon@mozilla.com", "date": "2010-08-20T19:12:37Z"}, "message": "Fix some lexer bugs in rustc. Beginning to lex stuff now.", "tree": {"sha": "a510c6b0ef028bb32264d8279a689eeeb31ad4dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a510c6b0ef028bb32264d8279a689eeeb31ad4dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eecd1f47d78d2f4144999aa6901f75799e6bcec0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eecd1f47d78d2f4144999aa6901f75799e6bcec0", "html_url": "https://github.com/rust-lang/rust/commit/eecd1f47d78d2f4144999aa6901f75799e6bcec0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eecd1f47d78d2f4144999aa6901f75799e6bcec0/comments", "author": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "committer": {"login": "graydon", "id": 14097, "node_id": "MDQ6VXNlcjE0MDk3", "avatar_url": "https://avatars.githubusercontent.com/u/14097?v=4", "gravatar_id": "", "url": "https://api.github.com/users/graydon", "html_url": "https://github.com/graydon", "followers_url": "https://api.github.com/users/graydon/followers", "following_url": "https://api.github.com/users/graydon/following{/other_user}", "gists_url": "https://api.github.com/users/graydon/gists{/gist_id}", "starred_url": "https://api.github.com/users/graydon/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/graydon/subscriptions", "organizations_url": "https://api.github.com/users/graydon/orgs", "repos_url": "https://api.github.com/users/graydon/repos", "events_url": "https://api.github.com/users/graydon/events{/privacy}", "received_events_url": "https://api.github.com/users/graydon/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1db0cb208de058ea2d1d5b2d2982a482d55de3b8", "url": "https://api.github.com/repos/rust-lang/rust/commits/1db0cb208de058ea2d1d5b2d2982a482d55de3b8", "html_url": "https://github.com/rust-lang/rust/commit/1db0cb208de058ea2d1d5b2d2982a482d55de3b8"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "d13b6f37512883ae8d684dc4d6f340c42b6b5a90", "filename": "src/comp/fe/lexer.rs", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/eecd1f47d78d2f4144999aa6901f75799e6bcec0/src%2Fcomp%2Ffe%2Flexer.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eecd1f47d78d2f4144999aa6901f75799e6bcec0/src%2Fcomp%2Ffe%2Flexer.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffe%2Flexer.rs?ref=eecd1f47d78d2f4144999aa6901f75799e6bcec0", "patch": "@@ -1,7 +1,7 @@\n import std._io.stdio_reader;\n \n fn in_range(char c, char lo, char hi) -> bool {\n-    ret c <= lo && c <= hi;\n+    ret lo <= c && c <= hi;\n }\n \n fn is_alpha(char c) -> bool {\n@@ -37,21 +37,25 @@ fn next_token(stdio_reader rdr) -> token.token {\n     }\n \n     if (c == eof) { ret token.EOF(); }\n+\n     if (is_alpha(c)) {\n         while (is_alpha(c)) {\n             accum += (c as u8);\n             c = rdr.getc() as char;\n-            ret token.IDENT(accum);\n         }\n+        rdr.ungetc(c as int);\n+        ret token.IDENT(accum);\n     }\n \n     if (is_dec_digit(c)) {\n         if (c == '0') {\n         } else {\n             while (is_dec_digit(c)) {\n                 accum += (c as u8);\n-                ret token.LIT_INT(0);\n+                c = rdr.getc() as char;\n             }\n+            rdr.ungetc(c as int);\n+            ret token.LIT_INT(0);\n         }\n     }\n "}]}