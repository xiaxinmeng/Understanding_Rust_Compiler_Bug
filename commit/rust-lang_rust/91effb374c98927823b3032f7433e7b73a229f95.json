{"sha": "91effb374c98927823b3032f7433e7b73a229f95", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkxZWZmYjM3NGM5ODkyNzgyM2IzMDMyZjc0MzNlN2I3M2EyMjlmOTU=", "commit": {"author": {"name": "swgillespie", "email": "sean.william.g@gmail.com", "date": "2015-06-11T01:18:04Z"}, "committer": {"name": "swgillespie", "email": "sean.william.g@gmail.com", "date": "2015-06-11T01:18:04Z"}, "message": "fix #26092 by returning an empty OS string when the output file path has no file_stem", "tree": {"sha": "ae5b37483eb78fe71a5da530242cc0af0d9f8210", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ae5b37483eb78fe71a5da530242cc0af0d9f8210"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/91effb374c98927823b3032f7433e7b73a229f95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/91effb374c98927823b3032f7433e7b73a229f95", "html_url": "https://github.com/rust-lang/rust/commit/91effb374c98927823b3032f7433e7b73a229f95", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/91effb374c98927823b3032f7433e7b73a229f95/comments", "author": {"login": "swgillespie", "id": 1871912, "node_id": "MDQ6VXNlcjE4NzE5MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1871912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swgillespie", "html_url": "https://github.com/swgillespie", "followers_url": "https://api.github.com/users/swgillespie/followers", "following_url": "https://api.github.com/users/swgillespie/following{/other_user}", "gists_url": "https://api.github.com/users/swgillespie/gists{/gist_id}", "starred_url": "https://api.github.com/users/swgillespie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swgillespie/subscriptions", "organizations_url": "https://api.github.com/users/swgillespie/orgs", "repos_url": "https://api.github.com/users/swgillespie/repos", "events_url": "https://api.github.com/users/swgillespie/events{/privacy}", "received_events_url": "https://api.github.com/users/swgillespie/received_events", "type": "User", "site_admin": false}, "committer": {"login": "swgillespie", "id": 1871912, "node_id": "MDQ6VXNlcjE4NzE5MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/1871912?v=4", "gravatar_id": "", "url": "https://api.github.com/users/swgillespie", "html_url": "https://github.com/swgillespie", "followers_url": "https://api.github.com/users/swgillespie/followers", "following_url": "https://api.github.com/users/swgillespie/following{/other_user}", "gists_url": "https://api.github.com/users/swgillespie/gists{/gist_id}", "starred_url": "https://api.github.com/users/swgillespie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/swgillespie/subscriptions", "organizations_url": "https://api.github.com/users/swgillespie/orgs", "repos_url": "https://api.github.com/users/swgillespie/repos", "events_url": "https://api.github.com/users/swgillespie/events{/privacy}", "received_events_url": "https://api.github.com/users/swgillespie/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae8a3c92a77e9295a764fc98998245aa1e0336b1", "url": "https://api.github.com/repos/rust-lang/rust/commits/ae8a3c92a77e9295a764fc98998245aa1e0336b1", "html_url": "https://github.com/rust-lang/rust/commit/ae8a3c92a77e9295a764fc98998245aa1e0336b1"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "bcb1c6d08d76d6a9b1e91920e0a9397849f3e665", "filename": "src/librustc_driver/driver.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/91effb374c98927823b3032f7433e7b73a229f95/src%2Flibrustc_driver%2Fdriver.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91effb374c98927823b3032f7433e7b73a229f95/src%2Flibrustc_driver%2Fdriver.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fdriver.rs?ref=91effb374c98927823b3032f7433e7b73a229f95", "patch": "@@ -33,7 +33,7 @@ use super::Compilation;\n use serialize::json;\n \n use std::env;\n-use std::ffi::OsString;\n+use std::ffi::{OsString, OsStr};\n use std::fs;\n use std::io::{self, Write};\n use std::path::{Path, PathBuf};\n@@ -966,7 +966,7 @@ pub fn build_output_filenames(input: &Input,\n \n             OutputFilenames {\n                 out_directory: out_file.parent().unwrap_or(cur_dir).to_path_buf(),\n-                out_filestem: out_file.file_stem().unwrap()\n+                out_filestem: out_file.file_stem().unwrap_or(OsStr::new(\"\"))\n                                       .to_str().unwrap().to_string(),\n                 single_output_file: ofile,\n                 extra: sess.opts.cg.extra_filename.clone(),"}, {"sha": "1e66e3a53804f81c67727d051fac03b0838b766a", "filename": "src/test/run-make/issue-26092/Makefile", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/91effb374c98927823b3032f7433e7b73a229f95/src%2Ftest%2Frun-make%2Fissue-26092%2FMakefile", "raw_url": "https://github.com/rust-lang/rust/raw/91effb374c98927823b3032f7433e7b73a229f95/src%2Ftest%2Frun-make%2Fissue-26092%2FMakefile", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fissue-26092%2FMakefile?ref=91effb374c98927823b3032f7433e7b73a229f95", "patch": "@@ -0,0 +1,5 @@\n+-include ../tools.mk\n+\n+all:\n+\t\t$(RUSTC) -o \"\" blank.rs 2>&1 | \\\n+\t\t\tgrep 'No such file or directory'"}, {"sha": "8ae3d072362ed6b5db81a00be3becce691926a7f", "filename": "src/test/run-make/issue-26092/blank.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/91effb374c98927823b3032f7433e7b73a229f95/src%2Ftest%2Frun-make%2Fissue-26092%2Fblank.rs", "raw_url": "https://github.com/rust-lang/rust/raw/91effb374c98927823b3032f7433e7b73a229f95/src%2Ftest%2Frun-make%2Fissue-26092%2Fblank.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-make%2Fissue-26092%2Fblank.rs?ref=91effb374c98927823b3032f7433e7b73a229f95", "patch": "@@ -0,0 +1,11 @@\n+// Copyright 2014 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+fn main() {}"}]}