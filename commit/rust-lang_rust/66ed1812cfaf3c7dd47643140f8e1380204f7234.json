{"sha": "66ed1812cfaf3c7dd47643140f8e1380204f7234", "node_id": "C_kwDOAAsO6NoAKDY2ZWQxODEyY2ZhZjNjN2RkNDc2NDMxNDBmOGUxMzgwMjA0ZjcyMzQ", "commit": {"author": {"name": "Ezra Shaw", "email": "ezrasure@outlook.com", "date": "2022-12-20T10:30:14Z"}, "committer": {"name": "Ezra Shaw", "email": "ezrasure@outlook.com", "date": "2022-12-22T21:56:16Z"}, "message": "docs/test: add UI test and long-form error docs for E0462", "tree": {"sha": "e1b36c89450af8b5db50256fed48fff45aa27abb", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e1b36c89450af8b5db50256fed48fff45aa27abb"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/66ed1812cfaf3c7dd47643140f8e1380204f7234", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEINUdoc4Vb1yVx04IZ6vxb7Ds2HAFAmOk0oIACgkQZ6vxb7Ds\n2HA8txAAi9AuMKu9SHkDtajHPSzAeUJkeM4QNRcyQldssV5smQu42sKVqKlkqGph\nDOyJ8WMJCVPhiv4kQRfh3rh+P2Wn2bcy00rb0MrHUgLxKlwtdygyyRjR5CFknwVA\n8dZTDvlAe4zrpW5FB08C6wjtPYNtV/STvdXPjk0l60cil9AXhIoOwJZRKQH5cMUZ\nDQ1E4zyMqibC51klmDor+upwMDk0m74xiiHfyPT/kdJKCpVttZ8gJPdlfOUbjVnm\nDvhF/Tr+hmuevxcbidc0EJ1+G//Qf36V1QSSc25ISVDvUYBZx1w4QVml7KMVJ9RF\np5J6eEyjyTZh2JorptAza5D0HnsboWnwOtiG3qbvHd2USU1tz/tf8iDra4S004AR\nbIxGlzv/HWBjTASZHOlBYQr3rF0lKXqwH61Rhu/5PHsVY7LYrVr154D8hadCLgPF\nGbbgStVin+XWRtFYC+yL6alvf/W3aLaIVA7+8Ozw1bvdQ/0hTh5NA/OiNrNCPrFl\nE/4CJJiqIllTgtFvkZUX7/F+OHe6HdroFxtwWAFbUwmLGzl3uYaFmhjDiq3J0fW3\nkPD3miJJjBY7enZeJiVdXxgQTMttKTx11H1RVVDnjfKg52iTgu28FSKerelgAD49\nOPGDFjNb+gM/pn3OXseOSSTvnK54Tpul1BB+msSJQUUnC4JBzzc=\n=cwZe\n-----END PGP SIGNATURE-----", "payload": "tree e1b36c89450af8b5db50256fed48fff45aa27abb\nparent d6da428f343ab811b2b132364360ba13ff05830c\nauthor Ezra Shaw <ezrasure@outlook.com> 1671532214 +1300\ncommitter Ezra Shaw <ezrasure@outlook.com> 1671746176 +1300\n\ndocs/test: add UI test and long-form error docs for E0462\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/66ed1812cfaf3c7dd47643140f8e1380204f7234", "html_url": "https://github.com/rust-lang/rust/commit/66ed1812cfaf3c7dd47643140f8e1380204f7234", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/66ed1812cfaf3c7dd47643140f8e1380204f7234/comments", "author": {"login": "Ezrashaw", "id": 38062690, "node_id": "MDQ6VXNlcjM4MDYyNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/38062690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ezrashaw", "html_url": "https://github.com/Ezrashaw", "followers_url": "https://api.github.com/users/Ezrashaw/followers", "following_url": "https://api.github.com/users/Ezrashaw/following{/other_user}", "gists_url": "https://api.github.com/users/Ezrashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ezrashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ezrashaw/subscriptions", "organizations_url": "https://api.github.com/users/Ezrashaw/orgs", "repos_url": "https://api.github.com/users/Ezrashaw/repos", "events_url": "https://api.github.com/users/Ezrashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/Ezrashaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Ezrashaw", "id": 38062690, "node_id": "MDQ6VXNlcjM4MDYyNjkw", "avatar_url": "https://avatars.githubusercontent.com/u/38062690?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Ezrashaw", "html_url": "https://github.com/Ezrashaw", "followers_url": "https://api.github.com/users/Ezrashaw/followers", "following_url": "https://api.github.com/users/Ezrashaw/following{/other_user}", "gists_url": "https://api.github.com/users/Ezrashaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/Ezrashaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Ezrashaw/subscriptions", "organizations_url": "https://api.github.com/users/Ezrashaw/orgs", "repos_url": "https://api.github.com/users/Ezrashaw/repos", "events_url": "https://api.github.com/users/Ezrashaw/events{/privacy}", "received_events_url": "https://api.github.com/users/Ezrashaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d6da428f343ab811b2b132364360ba13ff05830c", "url": "https://api.github.com/repos/rust-lang/rust/commits/d6da428f343ab811b2b132364360ba13ff05830c", "html_url": "https://github.com/rust-lang/rust/commit/d6da428f343ab811b2b132364360ba13ff05830c"}], "stats": {"total": 66, "additions": 63, "deletions": 3}, "files": [{"sha": "86c8b788e9b812cfe24d853fec823754d2bfe2ce", "filename": "compiler/rustc_error_codes/src/error_codes.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/66ed1812cfaf3c7dd47643140f8e1380204f7234/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/66ed1812cfaf3c7dd47643140f8e1380204f7234/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes.rs?ref=66ed1812cfaf3c7dd47643140f8e1380204f7234", "patch": "@@ -244,6 +244,7 @@ E0457: include_str!(\"./error_codes/E0457.md\"),\n E0458: include_str!(\"./error_codes/E0458.md\"),\n E0459: include_str!(\"./error_codes/E0459.md\"),\n E0460: include_str!(\"./error_codes/E0460.md\"),\n+E0462: include_str!(\"./error_codes/E0462.md\"),\n E0463: include_str!(\"./error_codes/E0463.md\"),\n E0464: include_str!(\"./error_codes/E0464.md\"),\n E0466: include_str!(\"./error_codes/E0466.md\"),\n@@ -594,7 +595,6 @@ E0791: include_str!(\"./error_codes/E0791.md\"),\n //  E0427, // merged into 530\n //  E0456, // plugin `..` is not available for triple `..`\n     E0461, // couldn't find crate `..` with expected target triple ..\n-    E0462, // found staticlib `..` instead of rlib or dylib\n     E0465, // multiple .. candidates for `..` found\n //  E0467, // removed\n //  E0470, // removed"}, {"sha": "4509cc6fad2d4e9bde523b81f93778d0eae9652d", "filename": "compiler/rustc_error_codes/src/error_codes/E0462.md", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/66ed1812cfaf3c7dd47643140f8e1380204f7234/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0462.md", "raw_url": "https://github.com/rust-lang/rust/raw/66ed1812cfaf3c7dd47643140f8e1380204f7234/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0462.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_error_codes%2Fsrc%2Ferror_codes%2FE0462.md?ref=66ed1812cfaf3c7dd47643140f8e1380204f7234", "patch": "@@ -0,0 +1,32 @@\n+Found `staticlib` `..` instead of `rlib` or `dylib`.\n+\n+Consider the following two files:\n+\n+`a.rs`\n+```ignore (cannot-link-with-other-tests)\n+#![crate_type = \"staticlib\"]\n+\n+fn foo() {}\n+```\n+\n+`main.rs`\n+```ignore (cannot-link-with-other-tests)\n+extern crate a;\n+\n+fn main() {\n+    a::foo();\n+}\n+```\n+\n+Crate `a` is compiled as a `staticlib`. A `staticlib` is a system-dependant\n+library only intended for linking with non-Rust applications (C programs). Note\n+that `staticlib`s include all upstream dependencies (`core`, `std`, other user\n+dependencies, etc) which makes them significantly larger than `dylib`s:\n+prefer `staticlib` for linking with C programs. Learn more about different\n+`crate_type`s in [this section of the Reference](../reference/linkage.html).\n+\n+This error can be fixed by:\n+ * Using [Cargo](../cargo/index.html), the Rust package manager, automatically\n+   fixing this issue.\n+ * Recompiling the crate as a `rlib` or `dylib`; formats suitable for Rust\n+   linking."}, {"sha": "f839ee783b53e30a3d57dcb1c1e84f0e626efb67", "filename": "src/test/ui/error-codes/E0462.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftest%2Fui%2Ferror-codes%2FE0462.rs", "raw_url": "https://github.com/rust-lang/rust/raw/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftest%2Fui%2Ferror-codes%2FE0462.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0462.rs?ref=66ed1812cfaf3c7dd47643140f8e1380204f7234", "patch": "@@ -0,0 +1,11 @@\n+// aux-build:found-staticlib.rs\n+\n+// normalize-stderr-test: \"\\.nll/\" -> \"/\"\n+// normalize-stderr-test: \"\\\\\\?\\\\\" -> \"\"\n+// normalize-stderr-test: \"(lib)?found_staticlib\\.[a-z]+\" -> \"libfound_staticlib.somelib\"\n+\n+extern crate found_staticlib; //~ ERROR E0462\n+\n+fn main() {\n+    found_staticlib::foo();\n+}"}, {"sha": "43e27965ffc50796d02585f29f747807b805582e", "filename": "src/test/ui/error-codes/E0462.stderr", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftest%2Fui%2Ferror-codes%2FE0462.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftest%2Fui%2Ferror-codes%2FE0462.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2FE0462.stderr?ref=66ed1812cfaf3c7dd47643140f8e1380204f7234", "patch": "@@ -0,0 +1,13 @@\n+error[E0462]: found staticlib `found_staticlib` instead of rlib or dylib\n+  --> $DIR/E0462.rs:7:1\n+   |\n+LL | extern crate found_staticlib;\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the following crate versions were found:\n+           crate `found_staticlib`: $TEST_BUILD_DIR/error-codes/E0462/auxiliary/libfound_staticlib.somelib\n+   = help: please recompile that crate using --crate-type lib\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0462`."}, {"sha": "04e2c59789d0c3154fccafe0b85578b247df01c7", "filename": "src/test/ui/error-codes/auxiliary/found-staticlib.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftest%2Fui%2Ferror-codes%2Fauxiliary%2Ffound-staticlib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftest%2Fui%2Ferror-codes%2Fauxiliary%2Ffound-staticlib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ferror-codes%2Fauxiliary%2Ffound-staticlib.rs?ref=66ed1812cfaf3c7dd47643140f8e1380204f7234", "patch": "@@ -0,0 +1,4 @@\n+// no-prefer-dynamic\n+#![crate_type = \"staticlib\"]\n+\n+pub fn foo() {}"}, {"sha": "49fc2ceb3a27f48e5bc5cc5e995c8a5b0ebc0161", "filename": "src/tools/tidy/src/error_codes_check.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "raw_url": "https://github.com/rust-lang/rust/raw/66ed1812cfaf3c7dd47643140f8e1380204f7234/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Ftidy%2Fsrc%2Ferror_codes_check.rs?ref=66ed1812cfaf3c7dd47643140f8e1380204f7234", "patch": "@@ -11,8 +11,8 @@ use regex::Regex;\n \n // A few of those error codes can't be tested but all the others can and *should* be tested!\n const EXEMPTED_FROM_TEST: &[&str] = &[\n-    \"E0313\", \"E0461\", \"E0462\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0519\", \"E0523\", \"E0554\",\n-    \"E0640\", \"E0717\", \"E0729\", \"E0789\",\n+    \"E0313\", \"E0461\", \"E0465\", \"E0476\", \"E0490\", \"E0514\", \"E0519\", \"E0523\", \"E0554\", \"E0640\",\n+    \"E0717\", \"E0729\", \"E0789\",\n ];\n \n // Some error codes don't have any tests apparently..."}]}