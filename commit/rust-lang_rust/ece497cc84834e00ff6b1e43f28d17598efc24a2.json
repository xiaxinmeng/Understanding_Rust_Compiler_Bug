{"sha": "ece497cc84834e00ff6b1e43f28d17598efc24a2", "node_id": "MDY6Q29tbWl0NzI0NzEyOmVjZTQ5N2NjODQ4MzRlMDBmZjZiMWU0M2YyOGQxNzU5OGVmYzI0YTI=", "commit": {"author": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-08-08T08:39:10Z"}, "committer": {"name": "bjorn3", "email": "bjorn3@users.noreply.github.com", "date": "2018-08-08T08:39:10Z"}, "message": "Some misc changes", "tree": {"sha": "0804412ee061ab9b817507bf9817a512014dfb55", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0804412ee061ab9b817507bf9817a512014dfb55"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ece497cc84834e00ff6b1e43f28d17598efc24a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ece497cc84834e00ff6b1e43f28d17598efc24a2", "html_url": "https://github.com/rust-lang/rust/commit/ece497cc84834e00ff6b1e43f28d17598efc24a2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ece497cc84834e00ff6b1e43f28d17598efc24a2/comments", "author": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bjorn3", "id": 17426603, "node_id": "MDQ6VXNlcjE3NDI2NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/17426603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bjorn3", "html_url": "https://github.com/bjorn3", "followers_url": "https://api.github.com/users/bjorn3/followers", "following_url": "https://api.github.com/users/bjorn3/following{/other_user}", "gists_url": "https://api.github.com/users/bjorn3/gists{/gist_id}", "starred_url": "https://api.github.com/users/bjorn3/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bjorn3/subscriptions", "organizations_url": "https://api.github.com/users/bjorn3/orgs", "repos_url": "https://api.github.com/users/bjorn3/repos", "events_url": "https://api.github.com/users/bjorn3/events{/privacy}", "received_events_url": "https://api.github.com/users/bjorn3/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "40176e03fd2c80ce29e23c40dd9c1531ad0da8a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/40176e03fd2c80ce29e23c40dd9c1531ad0da8a2", "html_url": "https://github.com/rust-lang/rust/commit/40176e03fd2c80ce29e23c40dd9c1531ad0da8a2"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "0537db405d3ee1973fd7ee559ad93f909564d1f2", "filename": "examples/example.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ece497cc84834e00ff6b1e43f28d17598efc24a2/examples%2Fexample.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ece497cc84834e00ff6b1e43f28d17598efc24a2/examples%2Fexample.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/examples%2Fexample.rs?ref=ece497cc84834e00ff6b1e43f28d17598efc24a2", "patch": "@@ -137,3 +137,8 @@ unsafe fn transmute(c: char) -> u32 {\n unsafe fn call_uninit() -> u8 {\n     intrinsics::uninit()\n }\n+\n+// TODO: enable when fat pointers are supported\n+/*unsafe fn deref_str_ptr(s: *const str) -> &'static str {\n+    &*s\n+}*/"}, {"sha": "929002f0e80398103c0cc6a393e83be4b925d9ac", "filename": "src/abi.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/ece497cc84834e00ff6b1e43f28d17598efc24a2/src%2Fabi.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ece497cc84834e00ff6b1e43f28d17598efc24a2/src%2Fabi.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fabi.rs?ref=ece497cc84834e00ff6b1e43f28d17598efc24a2", "patch": "@@ -330,7 +330,7 @@ pub fn codegen_call<'a, 'tcx: 'a>(\n \n             let nil_ty = fx.tcx.mk_nil();\n             let usize_layout = fx.layout_of(fx.tcx.types.usize);\n-            let ret = return_place.unwrap();\n+            let ret = return_place.expect(\"return place\");\n             match intrinsic {\n                 \"abort\" => {\n                     fx.bcx.ins().trap(TrapCode::User(!0 - 1));"}, {"sha": "e0c4b80afcc4669435dffb961573f33e021d539b", "filename": "src/base.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ece497cc84834e00ff6b1e43f28d17598efc24a2/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ece497cc84834e00ff6b1e43f28d17598efc24a2/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=ece497cc84834e00ff6b1e43f28d17598efc24a2", "patch": "@@ -354,6 +354,10 @@ fn trans_stmt<'a, 'tcx: 'a>(\n                     let res = match un_op {\n                         UnOp::Not => fx.bcx.ins().bnot(val),\n                         UnOp::Neg => match ty.sty {\n+                            TypeVariants::TyInt(_) => {\n+                                let zero = fx.bcx.ins().iconst(types::I64, 0);\n+                                fx.bcx.ins().isub(zero, val)\n+                            },\n                             TypeVariants::TyFloat(_) => fx.bcx.ins().fneg(val),\n                             _ => unimplemented!(\"un op Neg for {:?}\", ty),\n                         },"}]}