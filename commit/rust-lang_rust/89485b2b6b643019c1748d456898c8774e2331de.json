{"sha": "89485b2b6b643019c1748d456898c8774e2331de", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg5NDg1YjJiNmI2NDMwMTljMTc0OGQ0NTY4OThjODc3NGUyMzMxZGU=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-06-19T16:42:17Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2015-06-19T16:42:17Z"}, "message": "Auto merge of #26428 - Manishearth:rollup, r=Manishearth\n\n- Successful merges: #26388, #26401, #26414, #26427\n- Failed merges:", "tree": {"sha": "ab8f753944154d08518848440b7d1107b8e464aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ab8f753944154d08518848440b7d1107b8e464aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/89485b2b6b643019c1748d456898c8774e2331de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/89485b2b6b643019c1748d456898c8774e2331de", "html_url": "https://github.com/rust-lang/rust/commit/89485b2b6b643019c1748d456898c8774e2331de", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/89485b2b6b643019c1748d456898c8774e2331de/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2f5683913c9815d9f12494784747f79b0f3b3066", "url": "https://api.github.com/repos/rust-lang/rust/commits/2f5683913c9815d9f12494784747f79b0f3b3066", "html_url": "https://github.com/rust-lang/rust/commit/2f5683913c9815d9f12494784747f79b0f3b3066"}, {"sha": "a760d054ef5380e32191884068c11270c70071d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/a760d054ef5380e32191884068c11270c70071d9", "html_url": "https://github.com/rust-lang/rust/commit/a760d054ef5380e32191884068c11270c70071d9"}], "stats": {"total": 238, "additions": 232, "deletions": 6}, "files": [{"sha": "0f83cdff5372c95b797e4c3e2870c23b7e6bf6c1", "filename": "src/librustc/diagnostics.rs", "status": "modified", "additions": 51, "deletions": 2, "changes": 53, "blob_url": "https://github.com/rust-lang/rust/blob/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fdiagnostics.rs?ref=89485b2b6b643019c1748d456898c8774e2331de", "patch": "@@ -256,6 +256,21 @@ See [RFC 911] for more details on the design of `const fn`s.\n [RFC 911]: https://github.com/rust-lang/rfcs/blob/master/text/0911-const-fn.md\n \"##,\n \n+E0016: r##\"\n+Blocks in constants may only contain items (such as constant, function\n+definition, etc...) and a tail expression. Example:\n+\n+```\n+const FOO: i32 = { let x = 0; x }; // 'x' isn't an item!\n+```\n+\n+To avoid it, you have to replace the non-item object:\n+\n+```\n+const FOO: i32 = { const X : i32 = 0; X };\n+```\n+\"##,\n+\n E0018: r##\"\n The value of static and const variables must be known at compile time. You\n can't cast a pointer as an integer because we can't know what value the\n@@ -279,6 +294,42 @@ println!(\"{}\", Y);\n ```\n \"##,\n \n+E0019: r##\"\n+A function call isn't allowed in the const's initialization expression\n+because the expression's value must be known at compile-time. Example of\n+erroneous code:\n+\n+```\n+enum Test {\n+    V1\n+}\n+\n+impl Test {\n+    fn test(&self) -> i32 {\n+        12\n+    }\n+}\n+\n+fn main() {\n+    const FOO: Test = Test::V1;\n+\n+    const A: i32 = FOO.test(); // You can't call Test::func() here !\n+}\n+```\n+\n+Remember: you can't use a function call inside a const's initialization\n+expression! However, you can totally use it elsewhere you want:\n+\n+```\n+fn main() {\n+    const FOO: Test = Test::V1;\n+\n+    FOO.func(); // here is good\n+    let x = FOO.func(); // or even here!\n+}\n+```\n+\"##,\n+\n E0020: r##\"\n This error indicates that an attempt was made to divide by zero (or take the\n remainder of a zero divisor) in a static or constant expression.\n@@ -950,9 +1001,7 @@ static mut BAR: Option<Vec<i32>> = None;\n \n \n register_diagnostics! {\n-    E0016,\n     E0017,\n-    E0019,\n     E0022,\n     E0038,\n     E0109,"}, {"sha": "b382b71343f4ed8bb4f020b3bf2f6fbd8389f25b", "filename": "src/librustc_trans/trans/base.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustc_trans%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustc_trans%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Ftrans%2Fbase.rs?ref=89485b2b6b643019c1748d456898c8774e2331de", "patch": "@@ -756,7 +756,12 @@ pub fn invoke<'blk, 'tcx>(bcx: Block<'blk, 'tcx>,\n }\n \n pub fn need_invoke(bcx: Block) -> bool {\n-    if bcx.sess().no_landing_pads() {\n+    // FIXME(#25869) currently unwinding is not implemented for MSVC and our\n+    //               normal unwinding infrastructure ends up just causing linker\n+    //               errors with the current LLVM implementation, so landing\n+    //               pads are disabled entirely for MSVC targets\n+    if bcx.sess().no_landing_pads() ||\n+       bcx.sess().target.target.options.is_like_msvc {\n         return false;\n     }\n "}, {"sha": "fa29f8f1dcea96395a2c68ebf8ed5c12467538e8", "filename": "src/librustc_typeck/diagnostics.rs", "status": "modified", "additions": 144, "deletions": 3, "changes": 147, "blob_url": "https://github.com/rust-lang/rust/blob/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustc_typeck%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustc_typeck%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fdiagnostics.rs?ref=89485b2b6b643019c1748d456898c8774e2331de", "patch": "@@ -211,6 +211,150 @@ Reference:\n http://doc.rust-lang.org/reference.html#trait-objects\n \"##,\n \n+E0034: r##\"\n+The compiler doesn't know what method to call because more than one method\n+has the same prototype. Example:\n+\n+```\n+struct Test;\n+\n+trait Trait1 {\n+    fn foo();\n+}\n+\n+trait Trait2 {\n+    fn foo();\n+}\n+\n+impl Trait1 for Test { fn foo() {} }\n+impl Trait2 for Test { fn foo() {} }\n+\n+fn main() {\n+    Test::foo() // error, which foo() to call?\n+}\n+```\n+\n+To avoid this error, you have to keep only one of them and remove the others.\n+So let's take our example and fix it:\n+\n+```\n+struct Test;\n+\n+trait Trait1 {\n+    fn foo();\n+}\n+\n+impl Trait1 for Test { fn foo() {} }\n+\n+fn main() {\n+    Test::foo() // and now that's good!\n+}\n+```\n+\n+However, a better solution would be using fully explicit naming of type and\n+trait:\n+\n+```\n+struct Test;\n+\n+trait Trait1 {\n+    fn foo();\n+}\n+\n+trait Trait2 {\n+    fn foo();\n+}\n+\n+impl Trait1 for Test { fn foo() {} }\n+impl Trait2 for Test { fn foo() {} }\n+\n+fn main() {\n+    <Test as Trait1>::foo()\n+}\n+```\n+\"##,\n+\n+E0035: r##\"\n+You tried to give a type parameter where it wasn't needed. Bad example:\n+\n+```\n+struct Test;\n+\n+impl Test {\n+    fn method(&self) {}\n+}\n+\n+fn main() {\n+    let x = Test;\n+\n+    x.method::<i32>(); // Error: Test::method doesn't need type parameter!\n+}\n+```\n+\n+To fix this error, just remove the type parameter:\n+\n+```\n+struct Test;\n+\n+impl Test {\n+    fn method(&self) {}\n+}\n+\n+fn main() {\n+    let x = Test;\n+\n+    x.method(); // OK, we're good!\n+}\n+```\n+\"##,\n+\n+E0036: r##\"\n+This error occurrs when you pass too many or not enough type parameters to\n+a method. Example:\n+\n+```\n+struct Test;\n+\n+impl Test {\n+    fn method<T>(&self, v: &[T]) -> usize {\n+        v.len()\n+    }\n+}\n+\n+fn main() {\n+    let x = Test;\n+    let v = &[0i32];\n+\n+    x.method::<i32, i32>(v); // error: only one type parameter is expected!\n+}\n+```\n+\n+To fix it, just specify a correct number of type parameters:\n+\n+```\n+struct Test;\n+\n+impl Test {\n+    fn method<T>(&self, v: &[T]) -> usize {\n+        v.len()\n+    }\n+}\n+\n+fn main() {\n+    let x = Test;\n+    let v = &[0i32];\n+\n+    x.method::<i32>(v); // OK, we're good!\n+}\n+```\n+\n+Please note on the last example that we could have called `method` like this:\n+\n+```\n+x.method(v);\n+```\n+\"##,\n+\n E0040: r##\"\n It is not allowed to manually call destructors in Rust. It is also not\n necessary to do this since `drop` is called automatically whenever a value goes\n@@ -1320,9 +1464,6 @@ For more information see the [opt-in builtin traits RFC](https://github.com/rust\n }\n \n register_diagnostics! {\n-    E0034, // multiple applicable methods in scope\n-    E0035, // does not take type parameters\n-    E0036, // incorrect number of type parameters given for this method\n     E0044, // foreign items may not have type parameters\n     E0045, // variadic function must have C calling convention\n     E0068,"}, {"sha": "fb8f511795e87d01d084460dd6ebed083b9184bb", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/89485b2b6b643019c1748d456898c8774e2331de/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=89485b2b6b643019c1748d456898c8774e2331de", "patch": "@@ -571,6 +571,9 @@\n                 return;\n             }\n \n+            // Update document title to maintain a meaningful browser history\n+            $(document).prop(\"title\", \"Results for \" + query.query + \" - Rust\");\n+\n             // Because searching is incremental by character, only the most\n             // recent search query is added to the browser history.\n             if (browserSupportsHistoryApi()) {"}, {"sha": "32f52308af162c0b33aeec8a9485a0a608802031", "filename": "src/test/run-pass/issue-21622.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/89485b2b6b643019c1748d456898c8774e2331de/src%2Ftest%2Frun-pass%2Fissue-21622.rs", "raw_url": "https://github.com/rust-lang/rust/raw/89485b2b6b643019c1748d456898c8774e2331de/src%2Ftest%2Frun-pass%2Fissue-21622.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fissue-21622.rs?ref=89485b2b6b643019c1748d456898c8774e2331de", "patch": "@@ -0,0 +1,28 @@\n+// Copyright 2015 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+\n+struct Index;\n+\n+impl Index {\n+    fn new() -> Self { Index }\n+}\n+\n+fn user() {\n+    let new = Index::new;\n+\n+    fn inner() {\n+        let index = Index::new();\n+    }\n+\n+    let index2 = new();\n+}\n+\n+fn main() {}"}]}