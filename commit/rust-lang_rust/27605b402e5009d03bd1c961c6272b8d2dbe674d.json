{"sha": "27605b402e5009d03bd1c961c6272b8d2dbe674d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3NjA1YjQwMmU1MDA5ZDAzYmQxYzk2MWM2MjcyYjhkMmRiZTY3NGQ=", "commit": {"author": {"name": "Basti Ortiz", "email": "39114273+Some-Dood@users.noreply.github.com", "date": "2021-08-10T14:40:04Z"}, "committer": {"name": "Basti Ortiz", "email": "39114273+Some-Dood@users.noreply.github.com", "date": "2021-08-10T14:40:04Z"}, "message": "Fix: prefer the usage of `for` loops over `fold`", "tree": {"sha": "9a9f7b5cca4b8a140273e8323ac95fa09426beab", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9a9f7b5cca4b8a140273e8323ac95fa09426beab"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/27605b402e5009d03bd1c961c6272b8d2dbe674d", "comment_count": 0, "verification": {"verified": false, "reason": "bad_email", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEqA0bdqgj8CYCkkcsFALVyxf0jhsFAmESj/8ACgkQFALVyxf0\njhvkEA/+ITHZdT+hUE6CPl+QsXIYNLtn392SUt+MoItvia4AaslxDOFdlLyAzc3k\nXrJXRIXYvFfRMM5AQbq08heW1+W4y3ZlriIsqDeTftCtGWhtf6tv21tsZQjmBPSB\nv5i4FuTOKabm9u6Z2hknvZ4/wdhBirCh5Ru55pS2XGaEK0jZ0Ltj0T6GSx8yog++\n9IB+LTA8i2Gs0MEI4qAERbjDbPtyVz9n+tizFhsP+Tubo875dP7Y1OSNqfs9hIkZ\nXqEuVLJCcfL+pd2T29u2eNNNTUDIy4+aYP15HCufd11dVS8fwfkqXa08+EESJa7c\nGGAkxaLxqA/74wtx/1H9WKkBZe78tapEYODrfT4uLtodsG92bXuItYd8mWY+2Xm6\nCwDm2iZOjl8nrAJsez5oQVzgqqp+fktRVmXysw6kbq1HR1TD63PVGTUxWQijwaiU\n0FZ+Le6agqp/XOU7G1T3fmM6Ci22xZobL5NsCNJn12QOR9ZVNvcznfiPnT3o9TxW\nE6EIKwe4aeQ2fPrkyHCU8Jor1FWRYXq+skVyWEEectv9Y8ZxOmJn0XzmWmrBJHzA\nqkvxnG2LrsYh64FxoI6BKOClYz/AHXJYVbS7bfKMGdRFCfwIEZPR1sZWKVKvjBfe\noMO29BpPhftPMlZ3j0yHqp5oiVCRRy5Q/HU3M7biK5PsV2Dun9c=\n=pna1\n-----END PGP SIGNATURE-----", "payload": "tree 9a9f7b5cca4b8a140273e8323ac95fa09426beab\nparent 0e480a6e9c9fcb24d42011a031444e0446c07353\nauthor Basti Ortiz <39114273+Some-Dood@users.noreply.github.com> 1628606404 +0800\ncommitter Basti Ortiz <39114273+Some-Dood@users.noreply.github.com> 1628606404 +0800\n\nFix: prefer the usage of `for` loops over `fold`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/27605b402e5009d03bd1c961c6272b8d2dbe674d", "html_url": "https://github.com/rust-lang/rust/commit/27605b402e5009d03bd1c961c6272b8d2dbe674d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/27605b402e5009d03bd1c961c6272b8d2dbe674d/comments", "author": {"login": "BastiDood", "id": 39114273, "node_id": "MDQ6VXNlcjM5MTE0Mjcz", "avatar_url": "https://avatars.githubusercontent.com/u/39114273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BastiDood", "html_url": "https://github.com/BastiDood", "followers_url": "https://api.github.com/users/BastiDood/followers", "following_url": "https://api.github.com/users/BastiDood/following{/other_user}", "gists_url": "https://api.github.com/users/BastiDood/gists{/gist_id}", "starred_url": "https://api.github.com/users/BastiDood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BastiDood/subscriptions", "organizations_url": "https://api.github.com/users/BastiDood/orgs", "repos_url": "https://api.github.com/users/BastiDood/repos", "events_url": "https://api.github.com/users/BastiDood/events{/privacy}", "received_events_url": "https://api.github.com/users/BastiDood/received_events", "type": "User", "site_admin": false}, "committer": {"login": "BastiDood", "id": 39114273, "node_id": "MDQ6VXNlcjM5MTE0Mjcz", "avatar_url": "https://avatars.githubusercontent.com/u/39114273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/BastiDood", "html_url": "https://github.com/BastiDood", "followers_url": "https://api.github.com/users/BastiDood/followers", "following_url": "https://api.github.com/users/BastiDood/following{/other_user}", "gists_url": "https://api.github.com/users/BastiDood/gists{/gist_id}", "starred_url": "https://api.github.com/users/BastiDood/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/BastiDood/subscriptions", "organizations_url": "https://api.github.com/users/BastiDood/orgs", "repos_url": "https://api.github.com/users/BastiDood/repos", "events_url": "https://api.github.com/users/BastiDood/events{/privacy}", "received_events_url": "https://api.github.com/users/BastiDood/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0e480a6e9c9fcb24d42011a031444e0446c07353", "url": "https://api.github.com/repos/rust-lang/rust/commits/0e480a6e9c9fcb24d42011a031444e0446c07353", "html_url": "https://github.com/rust-lang/rust/commit/0e480a6e9c9fcb24d42011a031444e0446c07353"}], "stats": {"total": 17, "additions": 8, "deletions": 9}, "files": [{"sha": "c341b974a04dd4e48dcce6231a5677ba582c298e", "filename": "crates/vfs/src/loader.rs", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/27605b402e5009d03bd1c961c6272b8d2dbe674d/crates%2Fvfs%2Fsrc%2Floader.rs", "raw_url": "https://github.com/rust-lang/rust/raw/27605b402e5009d03bd1c961c6272b8d2dbe674d/crates%2Fvfs%2Fsrc%2Floader.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fvfs%2Fsrc%2Floader.rs?ref=27605b402e5009d03bd1c961c6272b8d2dbe674d", "patch": "@@ -161,16 +161,15 @@ impl Directories {\n     ///   - This path is longer than any element in `self.exclude` that is a prefix\n     ///     of `path`. In case of equality, exclusion wins.\n     fn includes_path(&self, path: &AbsPath) -> bool {\n-        let include = self.include.iter().fold(None::<&AbsPathBuf>, |include, incl| {\n-            if !path.starts_with(incl) {\n-                return include;\n+        let mut include = None::<&AbsPathBuf>;\n+        for incl in &self.include {\n+            if path.starts_with(incl) {\n+                include = Some(match include {\n+                    Some(prev) if prev.starts_with(incl) => prev,\n+                    _ => incl,\n+                });\n             }\n-\n-            Some(match include {\n-                Some(prev) if prev.starts_with(incl) => prev,\n-                _ => incl,\n-            })\n-        });\n+        }\n \n         let include = match include {\n             Some(it) => it,"}]}