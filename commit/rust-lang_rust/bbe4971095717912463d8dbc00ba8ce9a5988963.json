{"sha": "bbe4971095717912463d8dbc00ba8ce9a5988963", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJiZTQ5NzEwOTU3MTc5MTI0NjNkOGRiYzAwYmE4Y2U5YTU5ODg5NjM=", "commit": {"author": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2020-07-10T21:50:03Z"}, "committer": {"name": "Joshua Nelson", "email": "jyn514@gmail.com", "date": "2020-07-15T14:54:05Z"}, "message": "Don't crash on Vec<DoesNotExist>", "tree": {"sha": "3598a955acedd6a5cfdf641e86fd2037ce129dcf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3598a955acedd6a5cfdf641e86fd2037ce129dcf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bbe4971095717912463d8dbc00ba8ce9a5988963", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bbe4971095717912463d8dbc00ba8ce9a5988963", "html_url": "https://github.com/rust-lang/rust/commit/bbe4971095717912463d8dbc00ba8ce9a5988963", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bbe4971095717912463d8dbc00ba8ce9a5988963/comments", "author": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jyn514", "id": 23638587, "node_id": "MDQ6VXNlcjIzNjM4NTg3", "avatar_url": "https://avatars.githubusercontent.com/u/23638587?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jyn514", "html_url": "https://github.com/jyn514", "followers_url": "https://api.github.com/users/jyn514/followers", "following_url": "https://api.github.com/users/jyn514/following{/other_user}", "gists_url": "https://api.github.com/users/jyn514/gists{/gist_id}", "starred_url": "https://api.github.com/users/jyn514/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jyn514/subscriptions", "organizations_url": "https://api.github.com/users/jyn514/orgs", "repos_url": "https://api.github.com/users/jyn514/repos", "events_url": "https://api.github.com/users/jyn514/events{/privacy}", "received_events_url": "https://api.github.com/users/jyn514/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3576f5d7e153d10aae36b2be067bc6243a4c77db", "url": "https://api.github.com/repos/rust-lang/rust/commits/3576f5d7e153d10aae36b2be067bc6243a4c77db", "html_url": "https://github.com/rust-lang/rust/commit/3576f5d7e153d10aae36b2be067bc6243a4c77db"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "adc6b536699eb6edbed0bb7b3d8385e7355166ed", "filename": "src/librustdoc/core.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/bbe4971095717912463d8dbc00ba8ce9a5988963/src%2Flibrustdoc%2Fcore.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbe4971095717912463d8dbc00ba8ce9a5988963/src%2Flibrustdoc%2Fcore.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fcore.rs?ref=bbe4971095717912463d8dbc00ba8ce9a5988963", "patch": "@@ -9,7 +9,7 @@ use rustc_hir::def::{Namespace::TypeNS, Res};\n use rustc_hir::def_id::{CrateNum, DefId, DefIndex, LocalDefId, CRATE_DEF_INDEX, LOCAL_CRATE};\n use rustc_hir::HirId;\n use rustc_hir::{\n-    intravisit::{NestedVisitorMap, Visitor},\n+    intravisit::{self, NestedVisitorMap, Visitor},\n     Path,\n };\n use rustc_interface::interface;\n@@ -622,7 +622,7 @@ impl<'hir> Visitor<'hir> for EmitIgnoredResolutionErrors<'_, 'hir> {\n         NestedVisitorMap::OnlyBodies(self.hir_map)\n     }\n \n-    fn visit_path(&mut self, path: &'v Path<'v>, _id: HirId) {\n+    fn visit_path(&mut self, path: &'hir Path<'_>, _id: HirId) {\n         debug!(\"visiting path {:?}\", path);\n         if path.res == Res::Err {\n             // We have less context here than in rustc_resolve,\n@@ -648,7 +648,10 @@ impl<'hir> Visitor<'hir> for EmitIgnoredResolutionErrors<'_, 'hir> {\n             err.note(\"try running again with `rustc` and you may get a more detailed error\");\n             err.emit();\n         }\n-        // NOTE: this does _not_ visit the path segments\n+        // We could have an outer resolution that succeeded,\n+        // but with generic parameters that failed.\n+        // Recurse into the segments so we catch those too.\n+        intravisit::walk_path(self, path);\n     }\n }\n "}, {"sha": "0ccf2e3866fc910a864e5bd010331631a3b5154d", "filename": "src/test/rustdoc-ui/error-in-impl-trait/generic-argument.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/bbe4971095717912463d8dbc00ba8ce9a5988963/src%2Ftest%2Frustdoc-ui%2Ferror-in-impl-trait%2Fgeneric-argument.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bbe4971095717912463d8dbc00ba8ce9a5988963/src%2Ftest%2Frustdoc-ui%2Ferror-in-impl-trait%2Fgeneric-argument.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-ui%2Ferror-in-impl-trait%2Fgeneric-argument.rs?ref=bbe4971095717912463d8dbc00ba8ce9a5988963", "patch": "@@ -0,0 +1,7 @@\n+trait ValidTrait {}\n+\n+/// This has docs\n+pub fn f() -> impl ValidTrait {\n+    Vec::<DoesNotExist>::new()\n+    //~^ ERROR failed to resolve\n+}"}]}