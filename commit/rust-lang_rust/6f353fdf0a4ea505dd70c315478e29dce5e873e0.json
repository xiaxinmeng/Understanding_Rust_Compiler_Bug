{"sha": "6f353fdf0a4ea505dd70c315478e29dce5e873e0", "node_id": "C_kwDOAAsO6NoAKDZmMzUzZmRmMGE0ZWE1MDVkZDcwYzMxNTQ3OGUyOWRjZTVlODczZTA", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-12T19:34:15Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-02-12T19:34:15Z"}, "message": "Auto merge of #10310 - c410-f3r:arith-2, r=Alexendoo\n\n[arithmetic_side_effects] Fix #10209\n\nFix #10209\n\n---\n\nchangelog: Enhancement: [`arithmetic_side_effects`]: No longer lints, if safe constant values are used.\n[#10310](https://github.com/rust-lang/rust-clippy/pull/10310)\n<!-- changelog_checked -->", "tree": {"sha": "7d6cd7a42ba4c4eb2c7d41bcf63e085f1120accc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7d6cd7a42ba4c4eb2c7d41bcf63e085f1120accc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f353fdf0a4ea505dd70c315478e29dce5e873e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f353fdf0a4ea505dd70c315478e29dce5e873e0", "html_url": "https://github.com/rust-lang/rust/commit/6f353fdf0a4ea505dd70c315478e29dce5e873e0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f353fdf0a4ea505dd70c315478e29dce5e873e0/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ad2135e5a1bdc44e294c7c76f25c69b12d3d408f", "url": "https://api.github.com/repos/rust-lang/rust/commits/ad2135e5a1bdc44e294c7c76f25c69b12d3d408f", "html_url": "https://github.com/rust-lang/rust/commit/ad2135e5a1bdc44e294c7c76f25c69b12d3d408f"}, {"sha": "1ed8ed3435ab5dca63694d536f91b1d225da868d", "url": "https://api.github.com/repos/rust-lang/rust/commits/1ed8ed3435ab5dca63694d536f91b1d225da868d", "html_url": "https://github.com/rust-lang/rust/commit/1ed8ed3435ab5dca63694d536f91b1d225da868d"}], "stats": {"total": 258, "additions": 146, "deletions": 112}, "files": [{"sha": "87a8a2ed12b2a8c0967a9566d784a1a929cb5b51", "filename": "clippy_lints/src/operators/arithmetic_side_effects.rs", "status": "modified", "additions": 20, "deletions": 13, "changes": 33, "blob_url": "https://github.com/rust-lang/rust/blob/6f353fdf0a4ea505dd70c315478e29dce5e873e0/clippy_lints%2Fsrc%2Foperators%2Farithmetic_side_effects.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f353fdf0a4ea505dd70c315478e29dce5e873e0/clippy_lints%2Fsrc%2Foperators%2Farithmetic_side_effects.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Foperators%2Farithmetic_side_effects.rs?ref=6f353fdf0a4ea505dd70c315478e29dce5e873e0", "patch": "@@ -1,8 +1,8 @@\n use super::ARITHMETIC_SIDE_EFFECTS;\n use clippy_utils::{\n-    consts::{constant, constant_simple},\n+    consts::{constant, constant_simple, Constant},\n     diagnostics::span_lint,\n-    peel_hir_expr_refs, peel_hir_expr_unary,\n+    is_lint_allowed, peel_hir_expr_refs, peel_hir_expr_unary,\n };\n use rustc_ast as ast;\n use rustc_data_structures::fx::{FxHashMap, FxHashSet};\n@@ -97,17 +97,19 @@ impl ArithmeticSideEffects {\n         self.expr_span = Some(expr.span);\n     }\n \n-    /// If `expr` is not a literal integer like `1`, returns `None`.\n+    /// Returns the numeric value of a literal integer originated from `expr`, if any.\n     ///\n-    /// Returns the absolute value of the expression, if this is an integer literal.\n-    fn literal_integer(expr: &hir::Expr<'_>) -> Option<u128> {\n+    /// Literal integers can be originated from adhoc declarations like `1`, associated constants\n+    /// like `i32::MAX` or constant references like `N` from `const N: i32 = 1;`,\n+    fn literal_integer(cx: &LateContext<'_>, expr: &hir::Expr<'_>) -> Option<u128> {\n         let actual = peel_hir_expr_unary(expr).0;\n         if let hir::ExprKind::Lit(ref lit) = actual.kind && let ast::LitKind::Int(n, _) = lit.node {\n-            Some(n)\n+            return Some(n)\n         }\n-        else {\n-            None\n+        if let Some((Constant::Int(n), _)) = constant(cx, cx.typeck_results(), expr) {\n+            return Some(n);\n         }\n+        None\n     }\n \n     /// Manages when the lint should be triggered. Operations in constant environments, hard coded\n@@ -143,7 +145,10 @@ impl ArithmeticSideEffects {\n         let has_valid_op = if Self::is_integral(lhs_ty) && Self::is_integral(rhs_ty) {\n             let (actual_lhs, lhs_ref_counter) = peel_hir_expr_refs(lhs);\n             let (actual_rhs, rhs_ref_counter) = peel_hir_expr_refs(rhs);\n-            match (Self::literal_integer(actual_lhs), Self::literal_integer(actual_rhs)) {\n+            match (\n+                Self::literal_integer(cx, actual_lhs),\n+                Self::literal_integer(cx, actual_rhs),\n+            ) {\n                 (None, None) => false,\n                 (None, Some(n)) | (Some(n), None) => match (&op.node, n) {\n                     (hir::BinOpKind::Div | hir::BinOpKind::Rem, 0) => false,\n@@ -180,20 +185,22 @@ impl ArithmeticSideEffects {\n             return;\n         }\n         let actual_un_expr = peel_hir_expr_refs(un_expr).0;\n-        if Self::literal_integer(actual_un_expr).is_some() {\n+        if Self::literal_integer(cx, actual_un_expr).is_some() {\n             return;\n         }\n         self.issue_lint(cx, expr);\n     }\n \n-    fn should_skip_expr(&mut self, expr: &hir::Expr<'_>) -> bool {\n-        self.expr_span.is_some() || self.const_span.map_or(false, |sp| sp.contains(expr.span))\n+    fn should_skip_expr(&mut self, cx: &LateContext<'_>, expr: &hir::Expr<'_>) -> bool {\n+        is_lint_allowed(cx, ARITHMETIC_SIDE_EFFECTS, expr.hir_id)\n+            || self.expr_span.is_some()\n+            || self.const_span.map_or(false, |sp| sp.contains(expr.span))\n     }\n }\n \n impl<'tcx> LateLintPass<'tcx> for ArithmeticSideEffects {\n     fn check_expr(&mut self, cx: &LateContext<'tcx>, expr: &hir::Expr<'tcx>) {\n-        if self.should_skip_expr(expr) {\n+        if self.should_skip_expr(cx, expr) {\n             return;\n         }\n         match &expr.kind {"}, {"sha": "2611e3a785f6fe7740b5d3a4097d1f73b29cd068", "filename": "tests/ui/arithmetic_side_effects.rs", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/6f353fdf0a4ea505dd70c315478e29dce5e873e0/tests%2Fui%2Farithmetic_side_effects.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f353fdf0a4ea505dd70c315478e29dce5e873e0/tests%2Fui%2Farithmetic_side_effects.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Farithmetic_side_effects.rs?ref=6f353fdf0a4ea505dd70c315478e29dce5e873e0", "patch": "@@ -13,6 +13,9 @@\n \n use core::num::{Saturating, Wrapping};\n \n+const ONE: i32 = 1;\n+const ZERO: i32 = 0;\n+\n #[derive(Clone, Copy)]\n pub struct Custom;\n \n@@ -182,6 +185,10 @@ pub fn non_overflowing_ops_or_ops_already_handled_by_the_compiler_should_not_tri\n     _n += &0;\n     _n -= 0;\n     _n -= &0;\n+    _n += ZERO;\n+    _n += &ZERO;\n+    _n -= ZERO;\n+    _n -= &ZERO;\n     _n /= 99;\n     _n /= &99;\n     _n %= 99;\n@@ -190,10 +197,18 @@ pub fn non_overflowing_ops_or_ops_already_handled_by_the_compiler_should_not_tri\n     _n *= &0;\n     _n *= 1;\n     _n *= &1;\n+    _n *= ZERO;\n+    _n *= &ZERO;\n+    _n *= ONE;\n+    _n *= &ONE;\n     _n += -0;\n     _n += &-0;\n     _n -= -0;\n     _n -= &-0;\n+    _n += -ZERO;\n+    _n += &-ZERO;\n+    _n -= -ZERO;\n+    _n -= &-ZERO;\n     _n /= -99;\n     _n /= &-99;\n     _n %= -99;\n@@ -208,10 +223,18 @@ pub fn non_overflowing_ops_or_ops_already_handled_by_the_compiler_should_not_tri\n     _n = _n + &0;\n     _n = 0 + _n;\n     _n = &0 + _n;\n+    _n = _n + ZERO;\n+    _n = _n + &ZERO;\n+    _n = ZERO + _n;\n+    _n = &ZERO + _n;\n     _n = _n - 0;\n     _n = _n - &0;\n     _n = 0 - _n;\n     _n = &0 - _n;\n+    _n = _n - ZERO;\n+    _n = _n - &ZERO;\n+    _n = ZERO - _n;\n+    _n = &ZERO - _n;\n     _n = _n / 99;\n     _n = _n / &99;\n     _n = _n % 99;\n@@ -222,6 +245,10 @@ pub fn non_overflowing_ops_or_ops_already_handled_by_the_compiler_should_not_tri\n     _n = &0 * _n;\n     _n = _n * 1;\n     _n = _n * &1;\n+    _n = ZERO * _n;\n+    _n = &ZERO * _n;\n+    _n = _n * ONE;\n+    _n = _n * &ONE;\n     _n = 1 * _n;\n     _n = &1 * _n;\n     _n = 23 + 85;"}, {"sha": "17a2448fbfcad911a7a8db64d665c0329b16ff10", "filename": "tests/ui/arithmetic_side_effects.stderr", "status": "modified", "additions": 99, "deletions": 99, "changes": 198, "blob_url": "https://github.com/rust-lang/rust/blob/6f353fdf0a4ea505dd70c315478e29dce5e873e0/tests%2Fui%2Farithmetic_side_effects.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/6f353fdf0a4ea505dd70c315478e29dce5e873e0/tests%2Fui%2Farithmetic_side_effects.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Farithmetic_side_effects.stderr?ref=6f353fdf0a4ea505dd70c315478e29dce5e873e0", "patch": "@@ -1,595 +1,595 @@\n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:243:5\n+  --> $DIR/arithmetic_side_effects.rs:270:5\n    |\n LL |     _n += 1;\n    |     ^^^^^^^\n    |\n    = note: `-D clippy::arithmetic-side-effects` implied by `-D warnings`\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:244:5\n+  --> $DIR/arithmetic_side_effects.rs:271:5\n    |\n LL |     _n += &1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:245:5\n+  --> $DIR/arithmetic_side_effects.rs:272:5\n    |\n LL |     _n -= 1;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:246:5\n+  --> $DIR/arithmetic_side_effects.rs:273:5\n    |\n LL |     _n -= &1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:247:5\n+  --> $DIR/arithmetic_side_effects.rs:274:5\n    |\n LL |     _n /= 0;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:248:5\n+  --> $DIR/arithmetic_side_effects.rs:275:5\n    |\n LL |     _n /= &0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:249:5\n+  --> $DIR/arithmetic_side_effects.rs:276:5\n    |\n LL |     _n %= 0;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:250:5\n+  --> $DIR/arithmetic_side_effects.rs:277:5\n    |\n LL |     _n %= &0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:251:5\n+  --> $DIR/arithmetic_side_effects.rs:278:5\n    |\n LL |     _n *= 2;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:252:5\n+  --> $DIR/arithmetic_side_effects.rs:279:5\n    |\n LL |     _n *= &2;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:253:5\n+  --> $DIR/arithmetic_side_effects.rs:280:5\n    |\n LL |     _n += -1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:254:5\n+  --> $DIR/arithmetic_side_effects.rs:281:5\n    |\n LL |     _n += &-1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:255:5\n+  --> $DIR/arithmetic_side_effects.rs:282:5\n    |\n LL |     _n -= -1;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:256:5\n+  --> $DIR/arithmetic_side_effects.rs:283:5\n    |\n LL |     _n -= &-1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:257:5\n+  --> $DIR/arithmetic_side_effects.rs:284:5\n    |\n LL |     _n /= -0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:258:5\n+  --> $DIR/arithmetic_side_effects.rs:285:5\n    |\n LL |     _n /= &-0;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:259:5\n+  --> $DIR/arithmetic_side_effects.rs:286:5\n    |\n LL |     _n %= -0;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:260:5\n+  --> $DIR/arithmetic_side_effects.rs:287:5\n    |\n LL |     _n %= &-0;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:261:5\n+  --> $DIR/arithmetic_side_effects.rs:288:5\n    |\n LL |     _n *= -2;\n    |     ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:262:5\n+  --> $DIR/arithmetic_side_effects.rs:289:5\n    |\n LL |     _n *= &-2;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:263:5\n+  --> $DIR/arithmetic_side_effects.rs:290:5\n    |\n LL |     _custom += Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:264:5\n+  --> $DIR/arithmetic_side_effects.rs:291:5\n    |\n LL |     _custom += &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:265:5\n+  --> $DIR/arithmetic_side_effects.rs:292:5\n    |\n LL |     _custom -= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:266:5\n+  --> $DIR/arithmetic_side_effects.rs:293:5\n    |\n LL |     _custom -= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:267:5\n+  --> $DIR/arithmetic_side_effects.rs:294:5\n    |\n LL |     _custom /= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:268:5\n+  --> $DIR/arithmetic_side_effects.rs:295:5\n    |\n LL |     _custom /= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:269:5\n+  --> $DIR/arithmetic_side_effects.rs:296:5\n    |\n LL |     _custom %= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:270:5\n+  --> $DIR/arithmetic_side_effects.rs:297:5\n    |\n LL |     _custom %= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:271:5\n+  --> $DIR/arithmetic_side_effects.rs:298:5\n    |\n LL |     _custom *= Custom;\n    |     ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:272:5\n+  --> $DIR/arithmetic_side_effects.rs:299:5\n    |\n LL |     _custom *= &Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:273:5\n+  --> $DIR/arithmetic_side_effects.rs:300:5\n    |\n LL |     _custom += -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:274:5\n+  --> $DIR/arithmetic_side_effects.rs:301:5\n    |\n LL |     _custom += &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:275:5\n+  --> $DIR/arithmetic_side_effects.rs:302:5\n    |\n LL |     _custom -= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:276:5\n+  --> $DIR/arithmetic_side_effects.rs:303:5\n    |\n LL |     _custom -= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:277:5\n+  --> $DIR/arithmetic_side_effects.rs:304:5\n    |\n LL |     _custom /= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:278:5\n+  --> $DIR/arithmetic_side_effects.rs:305:5\n    |\n LL |     _custom /= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:279:5\n+  --> $DIR/arithmetic_side_effects.rs:306:5\n    |\n LL |     _custom %= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:280:5\n+  --> $DIR/arithmetic_side_effects.rs:307:5\n    |\n LL |     _custom %= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:281:5\n+  --> $DIR/arithmetic_side_effects.rs:308:5\n    |\n LL |     _custom *= -Custom;\n    |     ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:282:5\n+  --> $DIR/arithmetic_side_effects.rs:309:5\n    |\n LL |     _custom *= &-Custom;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:285:10\n+  --> $DIR/arithmetic_side_effects.rs:312:10\n    |\n LL |     _n = _n + 1;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:286:10\n+  --> $DIR/arithmetic_side_effects.rs:313:10\n    |\n LL |     _n = _n + &1;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:287:10\n+  --> $DIR/arithmetic_side_effects.rs:314:10\n    |\n LL |     _n = 1 + _n;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:288:10\n+  --> $DIR/arithmetic_side_effects.rs:315:10\n    |\n LL |     _n = &1 + _n;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:289:10\n+  --> $DIR/arithmetic_side_effects.rs:316:10\n    |\n LL |     _n = _n - 1;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:290:10\n+  --> $DIR/arithmetic_side_effects.rs:317:10\n    |\n LL |     _n = _n - &1;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:291:10\n+  --> $DIR/arithmetic_side_effects.rs:318:10\n    |\n LL |     _n = 1 - _n;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:292:10\n+  --> $DIR/arithmetic_side_effects.rs:319:10\n    |\n LL |     _n = &1 - _n;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:293:10\n+  --> $DIR/arithmetic_side_effects.rs:320:10\n    |\n LL |     _n = _n / 0;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:294:10\n+  --> $DIR/arithmetic_side_effects.rs:321:10\n    |\n LL |     _n = _n / &0;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:295:10\n+  --> $DIR/arithmetic_side_effects.rs:322:10\n    |\n LL |     _n = _n % 0;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:296:10\n+  --> $DIR/arithmetic_side_effects.rs:323:10\n    |\n LL |     _n = _n % &0;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:297:10\n+  --> $DIR/arithmetic_side_effects.rs:324:10\n    |\n LL |     _n = _n * 2;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:298:10\n+  --> $DIR/arithmetic_side_effects.rs:325:10\n    |\n LL |     _n = _n * &2;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:299:10\n+  --> $DIR/arithmetic_side_effects.rs:326:10\n    |\n LL |     _n = 2 * _n;\n    |          ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:300:10\n+  --> $DIR/arithmetic_side_effects.rs:327:10\n    |\n LL |     _n = &2 * _n;\n    |          ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:301:10\n+  --> $DIR/arithmetic_side_effects.rs:328:10\n    |\n LL |     _n = 23 + &85;\n    |          ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:302:10\n+  --> $DIR/arithmetic_side_effects.rs:329:10\n    |\n LL |     _n = &23 + 85;\n    |          ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:303:10\n+  --> $DIR/arithmetic_side_effects.rs:330:10\n    |\n LL |     _n = &23 + &85;\n    |          ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:304:15\n+  --> $DIR/arithmetic_side_effects.rs:331:15\n    |\n LL |     _custom = _custom + _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:305:15\n+  --> $DIR/arithmetic_side_effects.rs:332:15\n    |\n LL |     _custom = _custom + &_custom;\n    |               ^^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:306:15\n+  --> $DIR/arithmetic_side_effects.rs:333:15\n    |\n LL |     _custom = Custom + _custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:307:15\n+  --> $DIR/arithmetic_side_effects.rs:334:15\n    |\n LL |     _custom = &Custom + _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:308:15\n+  --> $DIR/arithmetic_side_effects.rs:335:15\n    |\n LL |     _custom = _custom - Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:309:15\n+  --> $DIR/arithmetic_side_effects.rs:336:15\n    |\n LL |     _custom = _custom - &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:310:15\n+  --> $DIR/arithmetic_side_effects.rs:337:15\n    |\n LL |     _custom = Custom - _custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:311:15\n+  --> $DIR/arithmetic_side_effects.rs:338:15\n    |\n LL |     _custom = &Custom - _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:312:15\n+  --> $DIR/arithmetic_side_effects.rs:339:15\n    |\n LL |     _custom = _custom / Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:313:15\n+  --> $DIR/arithmetic_side_effects.rs:340:15\n    |\n LL |     _custom = _custom / &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:314:15\n+  --> $DIR/arithmetic_side_effects.rs:341:15\n    |\n LL |     _custom = _custom % Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:315:15\n+  --> $DIR/arithmetic_side_effects.rs:342:15\n    |\n LL |     _custom = _custom % &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:316:15\n+  --> $DIR/arithmetic_side_effects.rs:343:15\n    |\n LL |     _custom = _custom * Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:317:15\n+  --> $DIR/arithmetic_side_effects.rs:344:15\n    |\n LL |     _custom = _custom * &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:318:15\n+  --> $DIR/arithmetic_side_effects.rs:345:15\n    |\n LL |     _custom = Custom * _custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:319:15\n+  --> $DIR/arithmetic_side_effects.rs:346:15\n    |\n LL |     _custom = &Custom * _custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:320:15\n+  --> $DIR/arithmetic_side_effects.rs:347:15\n    |\n LL |     _custom = Custom + &Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:321:15\n+  --> $DIR/arithmetic_side_effects.rs:348:15\n    |\n LL |     _custom = &Custom + Custom;\n    |               ^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:322:15\n+  --> $DIR/arithmetic_side_effects.rs:349:15\n    |\n LL |     _custom = &Custom + &Custom;\n    |               ^^^^^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:325:10\n+  --> $DIR/arithmetic_side_effects.rs:352:10\n    |\n LL |     _n = -_n;\n    |          ^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:326:10\n+  --> $DIR/arithmetic_side_effects.rs:353:10\n    |\n LL |     _n = -&_n;\n    |          ^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:327:15\n+  --> $DIR/arithmetic_side_effects.rs:354:15\n    |\n LL |     _custom = -_custom;\n    |               ^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:328:15\n+  --> $DIR/arithmetic_side_effects.rs:355:15\n    |\n LL |     _custom = -&_custom;\n    |               ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:337:5\n+  --> $DIR/arithmetic_side_effects.rs:364:5\n    |\n LL |     1 + i;\n    |     ^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:338:5\n+  --> $DIR/arithmetic_side_effects.rs:365:5\n    |\n LL |     i * 2;\n    |     ^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:340:5\n+  --> $DIR/arithmetic_side_effects.rs:367:5\n    |\n LL |     i - 2 + 2 - i;\n    |     ^^^^^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:341:5\n+  --> $DIR/arithmetic_side_effects.rs:368:5\n    |\n LL |     -i;\n    |     ^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:342:5\n+  --> $DIR/arithmetic_side_effects.rs:369:5\n    |\n LL |     i >> 1;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:343:5\n+  --> $DIR/arithmetic_side_effects.rs:370:5\n    |\n LL |     i << 1;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:352:5\n+  --> $DIR/arithmetic_side_effects.rs:379:5\n    |\n LL |     i += 1;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:353:5\n+  --> $DIR/arithmetic_side_effects.rs:380:5\n    |\n LL |     i -= 1;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:354:5\n+  --> $DIR/arithmetic_side_effects.rs:381:5\n    |\n LL |     i *= 2;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:356:5\n+  --> $DIR/arithmetic_side_effects.rs:383:5\n    |\n LL |     i /= 0;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:358:5\n+  --> $DIR/arithmetic_side_effects.rs:385:5\n    |\n LL |     i /= var1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:359:5\n+  --> $DIR/arithmetic_side_effects.rs:386:5\n    |\n LL |     i /= var2;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:361:5\n+  --> $DIR/arithmetic_side_effects.rs:388:5\n    |\n LL |     i %= 0;\n    |     ^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:363:5\n+  --> $DIR/arithmetic_side_effects.rs:390:5\n    |\n LL |     i %= var1;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:364:5\n+  --> $DIR/arithmetic_side_effects.rs:391:5\n    |\n LL |     i %= var2;\n    |     ^^^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:365:5\n+  --> $DIR/arithmetic_side_effects.rs:392:5\n    |\n LL |     i <<= 3;\n    |     ^^^^^^^\n \n error: arithmetic operation that can potentially result in unexpected side-effects\n-  --> $DIR/arithmetic_side_effects.rs:366:5\n+  --> $DIR/arithmetic_side_effects.rs:393:5\n    |\n LL |     i >>= 2;\n    |     ^^^^^^^"}]}