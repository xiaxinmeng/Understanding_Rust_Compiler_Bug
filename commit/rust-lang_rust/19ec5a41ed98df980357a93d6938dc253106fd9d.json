{"sha": "19ec5a41ed98df980357a93d6938dc253106fd9d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE5ZWM1YTQxZWQ5OGRmOTgwMzU3YTkzZDY5MzhkYzI1MzEwNmZkOWQ=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-05-19T02:05:31Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2012-05-19T02:07:19Z"}, "message": "allow region ptrs to be cast to uints", "tree": {"sha": "27f4c5b17a16c3bf2ef85680909bcc2a3ad1cdbc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/27f4c5b17a16c3bf2ef85680909bcc2a3ad1cdbc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/19ec5a41ed98df980357a93d6938dc253106fd9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/19ec5a41ed98df980357a93d6938dc253106fd9d", "html_url": "https://github.com/rust-lang/rust/commit/19ec5a41ed98df980357a93d6938dc253106fd9d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/19ec5a41ed98df980357a93d6938dc253106fd9d/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f1a46914c4241c05a5b44f6f8dad4630a150e292", "url": "https://api.github.com/repos/rust-lang/rust/commits/f1a46914c4241c05a5b44f6f8dad4630a150e292", "html_url": "https://github.com/rust-lang/rust/commit/f1a46914c4241c05a5b44f6f8dad4630a150e292"}], "stats": {"total": 19, "additions": 14, "deletions": 5}, "files": [{"sha": "2e2ad6b826a7640538f74d84ecc482cafdf2a895", "filename": "src/rustc/middle/trans/base.rs", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/19ec5a41ed98df980357a93d6938dc253106fd9d/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19ec5a41ed98df980357a93d6938dc253106fd9d/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fmiddle%2Ftrans%2Fbase.rs?ref=19ec5a41ed98df980357a93d6938dc253106fd9d", "patch": "@@ -2620,11 +2620,16 @@ fn float_cast(bcx: block, lldsttype: TypeRef, llsrctype: TypeRef,\n enum cast_kind { cast_pointer, cast_integral, cast_float,\n                 cast_enum, cast_other, }\n fn cast_type_kind(t: ty::t) -> cast_kind {\n-    if ty::type_is_fp(t) { cast_float }\n-    else if ty::type_is_unsafe_ptr(t) { cast_pointer }\n-    else if ty::type_is_integral(t) { cast_integral }\n-    else if ty::type_is_enum(t) { cast_enum }\n-    else { cast_other }\n+    alt ty::get(t).struct {\n+      ty::ty_float(*)   {cast_float}\n+      ty::ty_ptr(*)     {cast_pointer}\n+      ty::ty_rptr(*)    {cast_pointer}\n+      ty::ty_int(*)     {cast_integral}\n+      ty::ty_uint(*)    {cast_integral}\n+      ty::ty_bool       {cast_integral}\n+      ty::ty_enum(*)    {cast_enum}\n+      _                 {cast_other}\n+    }\n }\n \n "}, {"sha": "6cf827838311e44fd1e833ae2497cc3ae7527292", "filename": "src/test/run-pass/cast-region-to-uint.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/19ec5a41ed98df980357a93d6938dc253106fd9d/src%2Ftest%2Frun-pass%2Fcast-region-to-uint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/19ec5a41ed98df980357a93d6938dc253106fd9d/src%2Ftest%2Frun-pass%2Fcast-region-to-uint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fcast-region-to-uint.rs?ref=19ec5a41ed98df980357a93d6938dc253106fd9d", "patch": "@@ -0,0 +1,4 @@\n+fn main() {\n+    let x = 3;\n+    #debug[\"&x=%x\", &x as uint];\n+}\n\\ No newline at end of file"}]}