{"sha": "9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "node_id": "C_kwDOAAsO6NoAKDllNzIwYThhYWUyZDg5NWZkN2I3YmZmZTY1YTVkMmMzMDVlYTExNGY", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-12-18T13:49:39Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-12-18T13:49:39Z"}, "message": "Rollup merge of #91926 - SylvanB:remove_in_band_lifetimes_from_rustc_metadata, r=nagisa\n\nRemove `in_band_lifetimes` from `rustc_metadata`\n\nAnother for #91867", "tree": {"sha": "c3cccabe29712e2db862cd5cf7e98a4bb7d4457b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c3cccabe29712e2db862cd5cf7e98a4bb7d4457b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhvebzCRBK7hj4Ov3rIwAAkloIAI9g5JC1oUsFlxNWkR2dkybZ\nw/gk0+uXoNM3tfNIey0STv0xSXjNVRfHX77p5bQSu5OpcfSueW7wTIugJurdffHj\nIDyCsw6O/7LoM//t1o+Az8EiBI4H1yRYUiKdHNg5KZTp0AJApVOx7pVaaXCmo5sC\nrNUvONYs5bw1eHK1pFZPwr+tq4xbDOtgPTiBO+O39tyj/zlImpDX+Bz14Dida5lg\nj0wuf0x0/YqngzgBnK3b0u6c7M8/23nX/3F9FM7eefjST4rv3A9K8di3YOjXozSW\nGdB26AVO38+yoZIuI6VTxW6nrCU1AvD/gKrLRqhskuvURUkyc39+moJ79OKnDZ8=\n=T/kZ\n-----END PGP SIGNATURE-----\n", "payload": "tree c3cccabe29712e2db862cd5cf7e98a4bb7d4457b\nparent 1c42199c8f62a4b4df6c71a047b28d1cbb075c7f\nparent 8679e17723c783333b62e492c3e917276c7a2cbe\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1639835379 +0100\ncommitter GitHub <noreply@github.com> 1639835379 +0100\n\nRollup merge of #91926 - SylvanB:remove_in_band_lifetimes_from_rustc_metadata, r=nagisa\n\nRemove `in_band_lifetimes` from `rustc_metadata`\n\nAnother for #91867\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "html_url": "https://github.com/rust-lang/rust/commit/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1c42199c8f62a4b4df6c71a047b28d1cbb075c7f", "url": "https://api.github.com/repos/rust-lang/rust/commits/1c42199c8f62a4b4df6c71a047b28d1cbb075c7f", "html_url": "https://github.com/rust-lang/rust/commit/1c42199c8f62a4b4df6c71a047b28d1cbb075c7f"}, {"sha": "8679e17723c783333b62e492c3e917276c7a2cbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/8679e17723c783333b62e492c3e917276c7a2cbe", "html_url": "https://github.com/rust-lang/rust/commit/8679e17723c783333b62e492c3e917276c7a2cbe"}], "stats": {"total": 25, "additions": 12, "deletions": 13}, "files": [{"sha": "c70a6914520183fbdc21dc031499a5f601467b32", "filename": "compiler/rustc_metadata/src/foreign_modules.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Fforeign_modules.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Fforeign_modules.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Fforeign_modules.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -13,7 +13,7 @@ struct Collector {\n     modules: Vec<ForeignModule>,\n }\n \n-impl ItemLikeVisitor<'tcx> for Collector {\n+impl<'tcx> ItemLikeVisitor<'tcx> for Collector {\n     fn visit_item(&mut self, it: &'tcx hir::Item<'tcx>) {\n         let items = match it.kind {\n             hir::ItemKind::ForeignMod { items, .. } => items,"}, {"sha": "918c3b9daf1075bb6e6b9b9d5c520eb67536c8a8", "filename": "compiler/rustc_metadata/src/lib.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Flib.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -1,7 +1,6 @@\n #![doc(html_root_url = \"https://doc.rust-lang.org/nightly/nightly-rustc/\")]\n #![feature(crate_visibility_modifier)]\n #![feature(drain_filter)]\n-#![feature(in_band_lifetimes)]\n #![feature(let_else)]\n #![feature(nll)]\n #![feature(once_cell)]"}, {"sha": "2893ceb5bf54362327baf5325ed797bbc44b8dc9", "filename": "compiler/rustc_metadata/src/locator.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Flocator.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Flocator.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Flocator.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -734,7 +734,7 @@ impl<'a> CrateLocator<'a> {\n     }\n }\n \n-fn get_metadata_section(\n+fn get_metadata_section<'p>(\n     target: &Target,\n     flavor: CrateFlavor,\n     filename: &'p Path,"}, {"sha": "808151089df85d0d7271a4b70509884575daaee8", "filename": "compiler/rustc_metadata/src/native_libs.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Fnative_libs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Fnative_libs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Fnative_libs.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -31,7 +31,7 @@ struct Collector<'tcx> {\n     libs: Vec<NativeLib>,\n }\n \n-impl ItemLikeVisitor<'tcx> for Collector<'tcx> {\n+impl<'tcx> ItemLikeVisitor<'tcx> for Collector<'tcx> {\n     fn visit_item(&mut self, it: &'tcx hir::Item<'tcx>) {\n         let (abi, foreign_mod_items) = match it.kind {\n             hir::ItemKind::ForeignMod { abi, items } => (abi, items),\n@@ -223,7 +223,7 @@ impl ItemLikeVisitor<'tcx> for Collector<'tcx> {\n     fn visit_foreign_item(&mut self, _it: &'tcx hir::ForeignItem<'tcx>) {}\n }\n \n-impl Collector<'tcx> {\n+impl Collector<'_> {\n     fn register_native_lib(&mut self, span: Option<Span>, lib: NativeLib) {\n         if lib.name.as_ref().map_or(false, |&s| s == kw::Empty) {\n             match span {"}, {"sha": "09c6cb010b04dc7b3693c3b5056e476405423b2e", "filename": "compiler/rustc_metadata/src/rmeta/decoder.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdecoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdecoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdecoder.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -628,7 +628,7 @@ where\n \n implement_ty_decoder!(DecodeContext<'a, 'tcx>);\n \n-impl MetadataBlob {\n+impl<'tcx> MetadataBlob {\n     crate fn new(metadata_ref: MetadataRef) -> MetadataBlob {\n         MetadataBlob(Lrc::new(metadata_ref))\n     }\n@@ -697,7 +697,7 @@ impl CrateRoot<'_> {\n         &self.triple\n     }\n \n-    crate fn decode_crate_deps(\n+    crate fn decode_crate_deps<'a>(\n         &self,\n         metadata: &'a MetadataBlob,\n     ) -> impl ExactSizeIterator<Item = CrateDep> + Captures<'a> {"}, {"sha": "5ba7efc37f8bd238f9e95148a3b1a8b65f7a78b9", "filename": "compiler/rustc_metadata/src/rmeta/decoder/cstore_impl.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdecoder%2Fcstore_impl.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdecoder%2Fcstore_impl.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdecoder%2Fcstore_impl.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -83,7 +83,7 @@ impl IntoArgs for (CrateNum, DefId) {\n     }\n }\n \n-impl IntoArgs for ty::InstanceDef<'tcx> {\n+impl<'tcx> IntoArgs for ty::InstanceDef<'tcx> {\n     fn into_args(self) -> (DefId, DefId) {\n         (self.def_id(), self.def_id())\n     }"}, {"sha": "054431169a26cb342ed5d8d7f15539c9f84a48e8", "filename": "compiler/rustc_metadata/src/rmeta/def_path_hash_map.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdef_path_hash_map.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdef_path_hash_map.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fdef_path_hash_map.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -11,7 +11,7 @@ crate enum DefPathHashMapRef<'tcx> {\n     BorrowedFromTcx(&'tcx DefPathHashMap),\n }\n \n-impl DefPathHashMapRef<'tcx> {\n+impl DefPathHashMapRef<'_> {\n     #[inline]\n     pub fn def_path_hash_to_def_index(&self, def_path_hash: &DefPathHash) -> DefIndex {\n         match *self {"}, {"sha": "a6828e103dc5f80d06575ebd6ad00fa394dc7f33", "filename": "compiler/rustc_metadata/src/rmeta/encoder.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fencoder.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -964,7 +964,7 @@ fn should_encode_generics(def_kind: DefKind) -> bool {\n     }\n }\n \n-impl EncodeContext<'a, 'tcx> {\n+impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n     fn encode_def_ids(&mut self) {\n         if self.is_proc_macro {\n             return;\n@@ -1894,7 +1894,7 @@ impl EncodeContext<'a, 'tcx> {\n }\n \n // FIXME(eddyb) make metadata encoding walk over all definitions, instead of HIR.\n-impl Visitor<'tcx> for EncodeContext<'a, 'tcx> {\n+impl<'a, 'tcx> Visitor<'tcx> for EncodeContext<'a, 'tcx> {\n     type Map = Map<'tcx>;\n \n     fn nested_visit_map(&mut self) -> NestedVisitorMap<Self::Map> {\n@@ -1927,7 +1927,7 @@ impl Visitor<'tcx> for EncodeContext<'a, 'tcx> {\n     }\n }\n \n-impl EncodeContext<'a, 'tcx> {\n+impl<'a, 'tcx> EncodeContext<'a, 'tcx> {\n     fn encode_fields(&mut self, adt_def: &ty::AdtDef) {\n         for (variant_index, variant) in adt_def.variants.iter_enumerated() {\n             for (field_index, _field) in variant.fields.iter().enumerate() {"}, {"sha": "5ce239ac704269f781c4401b7c81ccb3fc64e1d0", "filename": "compiler/rustc_metadata/src/rmeta/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9e720a8aae2d895fd7b7bffe65a5d2c305ea114f/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_metadata%2Fsrc%2Frmeta%2Fmod.rs?ref=9e720a8aae2d895fd7b7bffe65a5d2c305ea114f", "patch": "@@ -275,7 +275,7 @@ macro_rules! define_tables {\n             $($name: TableBuilder<$IDX, $T>),+\n         }\n \n-        impl TableBuilders<'tcx> {\n+        impl<'tcx> TableBuilders<'tcx> {\n             fn encode(&self, buf: &mut Encoder) -> LazyTables<'tcx> {\n                 LazyTables {\n                     $($name: self.$name.encode(buf)),+"}]}