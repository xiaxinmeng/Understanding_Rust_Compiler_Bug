{"sha": "fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZiNzVkNGE3NDYxNWQwYzI4ZDNhYjdlM2NmOTdkYjJiZjhjZjY3N2Y=", "commit": {"author": {"name": "Ralf Jung", "email": "post@ralfj.de", "date": "2020-06-15T10:01:11Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-15T10:01:11Z"}, "message": "Rollup merge of #73296 - ehuss:remove-msvc-aux, r=Mark-Simulacrum\n\nRemove vestigial CI job msvc-aux.\n\nThis CI job isn't really doing anything, so it seems prudent to remove it.\n\nFor some history:\n* This was introduced in #48809 when the msvc job was split in two to keep it under 2 hours (oh the good old days). At the time, this check-aux job did a bunch of things:\n    * tidy\n    * src/test/pretty\n    * src/test/run-pass/pretty\n    * src/test/run-fail/pretty\n    * src/test/run-pass-valgrind/pretty\n    * src/test/run-pass-fulldeps/pretty\n    * src/test/run-fail-fulldeps/pretty\n* Tidy was removed in #60777.\n* run-pass and run-pass-fulldeps moved to UI in #63029\n* src/test/pretty removed in #58140\n* src/test/run-fail moved to UI in #71185\n* run-fail-fulldeps removed in #51285\n\nOver time through attrition, the job was left with one lonely thing: `src/test/run-pass-valgrind/pretty`. And of course, this wasn't actually running the \"pretty\" tests. The normal `run-pass-valgrind` tests ran, and then when it tried to run in \"pretty\" mode, all the tests were ignored because compiletest thought nothing had changed (apparently compiletest isn't fingerprinting the mode?  Needs more investigation\u2026). `run-pass-valgrind` is already being run as part of `x86_64-msvc-1`, so there's no need to run it here.\n\nI've taken the liberty of removing `src/test/run-pass-valgrind/pretty` as a distinct test. I'm guessing from the other PR's that the pretty tests should now live in `src/test/pretty`, and that the team has moved away from doing pretty tests on other parts of the `src/test` tree.", "tree": {"sha": "378b66aee4184a83fc4b0aa6279877dec50c62b4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/378b66aee4184a83fc4b0aa6279877dec50c62b4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe50bnCRBK7hj4Ov3rIwAAdHIIAGuI5I8+T0OG4oyvoLl8lnvD\na3yyP/46TE44zHIDwyWBBDQaxSdPPTz+IVDKmeEGAcgNjkxW3SNNLAPedhuFIZcY\ndxF4j5Rt+o0LcscrbOSalsAUSWIipmk3VQ9DcHe8/s3Z63WTWpxWVSubF7CecFzq\nx9eg/VzOWRqeV6a+7v+i7OXyHAzfUaDP43YXyxzQidhvcRGg3F2t6bi4qua+iepR\nNfzF1o9o+ECZVLSqqCDkt+Rgd2qLnSygnYETwo6VNWHYHxd5qNWS9aKXJetd8TTv\nT6FNvkWPue0+rmG0kX/ZipkzM5juYix5hTaaTx7pgYYpnHAHH0BAML8+2Wjmc0Y=\n=nle4\n-----END PGP SIGNATURE-----\n", "payload": "tree 378b66aee4184a83fc4b0aa6279877dec50c62b4\nparent ec6fe42dd451097f44ff0aeab2ccd23b7dd2571f\nparent c0aef6d816aa1f4a94e1057788e131ba82384d36\nauthor Ralf Jung <post@ralfj.de> 1592215271 +0200\ncommitter GitHub <noreply@github.com> 1592215271 +0200\n\nRollup merge of #73296 - ehuss:remove-msvc-aux, r=Mark-Simulacrum\n\nRemove vestigial CI job msvc-aux.\n\nThis CI job isn't really doing anything, so it seems prudent to remove it.\n\nFor some history:\n* This was introduced in #48809 when the msvc job was split in two to keep it under 2 hours (oh the good old days). At the time, this check-aux job did a bunch of things:\n    * tidy\n    * src/test/pretty\n    * src/test/run-pass/pretty\n    * src/test/run-fail/pretty\n    * src/test/run-pass-valgrind/pretty\n    * src/test/run-pass-fulldeps/pretty\n    * src/test/run-fail-fulldeps/pretty\n* Tidy was removed in #60777.\n* run-pass and run-pass-fulldeps moved to UI in #63029\n* src/test/pretty removed in #58140\n* src/test/run-fail moved to UI in #71185\n* run-fail-fulldeps removed in #51285\n\nOver time through attrition, the job was left with one lonely thing: `src/test/run-pass-valgrind/pretty`. And of course, this wasn't actually running the \"pretty\" tests. The normal `run-pass-valgrind` tests ran, and then when it tried to run in \"pretty\" mode, all the tests were ignored because compiletest thought nothing had changed (apparently compiletest isn't fingerprinting the mode?  Needs more investigation\u2026). `run-pass-valgrind` is already being run as part of `x86_64-msvc-1`, so there's no need to run it here.\n\nI've taken the liberty of removing `src/test/run-pass-valgrind/pretty` as a distinct test. I'm guessing from the other PR's that the pretty tests should now live in `src/test/pretty`, and that the team has moved away from doing pretty tests on other parts of the `src/test` tree.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "html_url": "https://github.com/rust-lang/rust/commit/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/comments", "author": {"login": "RalfJung", "id": 330628, "node_id": "MDQ6VXNlcjMzMDYyOA==", "avatar_url": "https://avatars.githubusercontent.com/u/330628?v=4", "gravatar_id": "", "url": "https://api.github.com/users/RalfJung", "html_url": "https://github.com/RalfJung", "followers_url": "https://api.github.com/users/RalfJung/followers", "following_url": "https://api.github.com/users/RalfJung/following{/other_user}", "gists_url": "https://api.github.com/users/RalfJung/gists{/gist_id}", "starred_url": "https://api.github.com/users/RalfJung/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/RalfJung/subscriptions", "organizations_url": "https://api.github.com/users/RalfJung/orgs", "repos_url": "https://api.github.com/users/RalfJung/repos", "events_url": "https://api.github.com/users/RalfJung/events{/privacy}", "received_events_url": "https://api.github.com/users/RalfJung/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ec6fe42dd451097f44ff0aeab2ccd23b7dd2571f", "url": "https://api.github.com/repos/rust-lang/rust/commits/ec6fe42dd451097f44ff0aeab2ccd23b7dd2571f", "html_url": "https://github.com/rust-lang/rust/commit/ec6fe42dd451097f44ff0aeab2ccd23b7dd2571f"}, {"sha": "c0aef6d816aa1f4a94e1057788e131ba82384d36", "url": "https://api.github.com/repos/rust-lang/rust/commits/c0aef6d816aa1f4a94e1057788e131ba82384d36", "html_url": "https://github.com/rust-lang/rust/commit/c0aef6d816aa1f4a94e1057788e131ba82384d36"}], "stats": {"total": 33, "additions": 2, "deletions": 31}, "files": [{"sha": "bf3c22744f1650c1a8aa2ef06dee11e2be7a8652", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "patch": "@@ -428,11 +428,6 @@ jobs:\n               NO_DEBUG_ASSERTIONS: 1\n               NO_LLVM_ASSERTIONS: 1\n             os: windows-latest-xl\n-          - name: x86_64-msvc-aux\n-            env:\n-              RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n-              RUST_CONFIGURE_ARGS: \"--build=x86_64-pc-windows-msvc\"\n-            os: windows-latest-xl\n           - name: x86_64-msvc-cargo\n             env:\n               SCRIPT: python x.py test src/tools/cargotest src/tools/cargo"}, {"sha": "ea5300bdfc04cbf26add156fe37a0793aef19198", "filename": "src/bootstrap/builder.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fbootstrap%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fbootstrap%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fbuilder.rs?ref=fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "patch": "@@ -373,7 +373,6 @@ impl<'a> Builder<'a> {\n                 test::UiFullDeps,\n                 test::Rustdoc,\n                 test::Pretty,\n-                test::RunPassValgrindPretty,\n                 test::Crate,\n                 test::CrateLibrustc,\n                 test::CrateRustdoc,"}, {"sha": "12a1734e21c7e165eea70f8ff3742cac2fe55889", "filename": "src/bootstrap/mk/Makefile.in", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fbootstrap%2Fmk%2FMakefile.in", "raw_url": "https://github.com/rust-lang/rust/raw/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fbootstrap%2Fmk%2FMakefile.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fmk%2FMakefile.in?ref=fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "patch": "@@ -6,12 +6,6 @@ Q := @\n BOOTSTRAP_ARGS :=\n endif\n \n-ifdef EXCLUDE_CARGO\n-AUX_ARGS :=\n-else\n-AUX_ARGS := src/tools/cargo src/tools/cargotest\n-endif\n-\n BOOTSTRAP := $(CFG_PYTHON) $(CFG_SRC_DIR)src/bootstrap/bootstrap.py\n \n all:\n@@ -48,8 +42,8 @@ check:\n \t$(Q)$(BOOTSTRAP) test $(BOOTSTRAP_ARGS)\n check-aux:\n \t$(Q)$(BOOTSTRAP) test \\\n-\t\tsrc/test/run-pass-valgrind/pretty \\\n-\t\t$(AUX_ARGS) \\\n+\t\tsrc/tools/cargo \\\n+\t\tsrc/tools/cargotest \\\n \t\t$(BOOTSTRAP_ARGS)\n check-bootstrap:\n \t$(Q)$(CFG_PYTHON) $(CFG_SRC_DIR)src/bootstrap/bootstrap_test.py"}, {"sha": "b8c57515658383e1bcb16c60d8f52fb1e5d4855b", "filename": "src/bootstrap/test.rs", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fbootstrap%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fbootstrap%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Ftest.rs?ref=fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "patch": "@@ -930,13 +930,6 @@ host_test!(UiFullDeps { path: \"src/test/ui-fulldeps\", mode: \"ui\", suite: \"ui-ful\n host_test!(Rustdoc { path: \"src/test/rustdoc\", mode: \"rustdoc\", suite: \"rustdoc\" });\n \n host_test!(Pretty { path: \"src/test/pretty\", mode: \"pretty\", suite: \"pretty\" });\n-test!(RunPassValgrindPretty {\n-    path: \"src/test/run-pass-valgrind/pretty\",\n-    mode: \"pretty\",\n-    suite: \"run-pass-valgrind\",\n-    default: false,\n-    host: true\n-});\n \n default_test!(RunMake { path: \"src/test/run-make\", mode: \"run-make\", suite: \"run-make\" });\n "}, {"sha": "3de27bc54c5c0b08b113b0587df78c5c851590da", "filename": "src/ci/azure-pipelines/auto.yml", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fci%2Fazure-pipelines%2Fauto.yml", "raw_url": "https://github.com/rust-lang/rust/raw/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fci%2Fazure-pipelines%2Fauto.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fazure-pipelines%2Fauto.yml?ref=fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "patch": "@@ -142,10 +142,6 @@ jobs:\n         # FIXME(#59637)\n         NO_DEBUG_ASSERTIONS: 1\n         NO_LLVM_ASSERTIONS: 1\n-      # MSVC aux tests\n-      x86_64-msvc-aux:\n-        RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n-        INITIAL_RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n       x86_64-msvc-cargo:\n         SCRIPT: python x.py test src/tools/cargotest src/tools/cargo\n         INITIAL_RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc --enable-lld"}, {"sha": "a052d0879a3dbfe1c6aecf1f9077e2dcbfe1ea1a", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=fb75d4a74615d0c28d3ab7e3cf97db2bf8cf677f", "patch": "@@ -492,12 +492,6 @@ jobs:\n               NO_LLVM_ASSERTIONS: 1\n             <<: *job-windows-xl\n \n-          - name: x86_64-msvc-aux\n-            env:\n-              RUST_CHECK_TARGET: check-aux EXCLUDE_CARGO=1\n-              RUST_CONFIGURE_ARGS: --build=x86_64-pc-windows-msvc\n-            <<: *job-windows-xl\n-\n           - name: x86_64-msvc-cargo\n             env:\n               SCRIPT: python x.py test src/tools/cargotest src/tools/cargo"}]}