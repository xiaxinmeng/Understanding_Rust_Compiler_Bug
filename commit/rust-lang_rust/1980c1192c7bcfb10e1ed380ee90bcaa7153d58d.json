{"sha": "1980c1192c7bcfb10e1ed380ee90bcaa7153d58d", "node_id": "C_kwDOAAsO6NoAKDE5ODBjMTE5MmM3YmNmYjEwZTFlZDM4MGVlOTBiY2FhNzE1M2Q1OGQ", "commit": {"author": {"name": "Dorian Scheidt", "email": "dorian.scheidt@gmail.com", "date": "2022-08-02T16:11:32Z"}, "committer": {"name": "Dorian Scheidt", "email": "dorian.scheidt@gmail.com", "date": "2022-08-02T18:37:12Z"}, "message": "Support PathPat paths in generate_enum_variant", "tree": {"sha": "b3f0239668b4e9b1aa520e15f04cdc25485f5240", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b3f0239668b4e9b1aa520e15f04cdc25485f5240"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1980c1192c7bcfb10e1ed380ee90bcaa7153d58d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1980c1192c7bcfb10e1ed380ee90bcaa7153d58d", "html_url": "https://github.com/rust-lang/rust/commit/1980c1192c7bcfb10e1ed380ee90bcaa7153d58d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1980c1192c7bcfb10e1ed380ee90bcaa7153d58d/comments", "author": {"login": "DorianListens", "id": 5692947, "node_id": "MDQ6VXNlcjU2OTI5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5692947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DorianListens", "html_url": "https://github.com/DorianListens", "followers_url": "https://api.github.com/users/DorianListens/followers", "following_url": "https://api.github.com/users/DorianListens/following{/other_user}", "gists_url": "https://api.github.com/users/DorianListens/gists{/gist_id}", "starred_url": "https://api.github.com/users/DorianListens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DorianListens/subscriptions", "organizations_url": "https://api.github.com/users/DorianListens/orgs", "repos_url": "https://api.github.com/users/DorianListens/repos", "events_url": "https://api.github.com/users/DorianListens/events{/privacy}", "received_events_url": "https://api.github.com/users/DorianListens/received_events", "type": "User", "site_admin": false}, "committer": {"login": "DorianListens", "id": 5692947, "node_id": "MDQ6VXNlcjU2OTI5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5692947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DorianListens", "html_url": "https://github.com/DorianListens", "followers_url": "https://api.github.com/users/DorianListens/followers", "following_url": "https://api.github.com/users/DorianListens/following{/other_user}", "gists_url": "https://api.github.com/users/DorianListens/gists{/gist_id}", "starred_url": "https://api.github.com/users/DorianListens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DorianListens/subscriptions", "organizations_url": "https://api.github.com/users/DorianListens/orgs", "repos_url": "https://api.github.com/users/DorianListens/repos", "events_url": "https://api.github.com/users/DorianListens/events{/privacy}", "received_events_url": "https://api.github.com/users/DorianListens/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "111694d85bc64e3604599668c5b2db574e07abf0", "url": "https://api.github.com/repos/rust-lang/rust/commits/111694d85bc64e3604599668c5b2db574e07abf0", "html_url": "https://github.com/rust-lang/rust/commit/111694d85bc64e3604599668c5b2db574e07abf0"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "35cd42908af2c0d225d3fa5d0fb3336fb3629d96", "filename": "crates/ide-assists/src/handlers/generate_enum_variant.rs", "status": "modified", "additions": 29, "deletions": 1, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/1980c1192c7bcfb10e1ed380ee90bcaa7153d58d/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1980c1192c7bcfb10e1ed380ee90bcaa7153d58d/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_enum_variant.rs?ref=1980c1192c7bcfb10e1ed380ee90bcaa7153d58d", "patch": "@@ -60,6 +60,7 @@ pub(crate) fn generate_enum_variant(acc: &mut Assists, ctx: &AssistContext<'_>)\n enum PathParent {\n     PathExpr(ast::PathExpr),\n     RecordExpr(ast::RecordExpr),\n+    PathPat(ast::PathPat),\n     UseTree(ast::UseTree),\n }\n \n@@ -68,6 +69,7 @@ impl PathParent {\n         match self {\n             PathParent::PathExpr(it) => it.syntax(),\n             PathParent::RecordExpr(it) => it.syntax(),\n+            PathParent::PathPat(it) => it.syntax(),\n             PathParent::UseTree(it) => it.syntax(),\n         }\n     }\n@@ -84,7 +86,7 @@ impl PathParent {\n                 }\n             }\n             PathParent::RecordExpr(it) => make_record_field_list(it, ctx, &scope),\n-            PathParent::UseTree(_) => None,\n+            PathParent::UseTree(_) | PathParent::PathPat(_) => None,\n         }\n     }\n }\n@@ -96,6 +98,7 @@ fn path_parent(path: &ast::Path) -> Option<PathParent> {\n         match parent {\n             ast::PathExpr(it) => Some(PathParent::PathExpr(it)),\n             ast::RecordExpr(it) => Some(PathParent::RecordExpr(it)),\n+            ast::PathPat(it) => Some(PathParent::PathPat(it)),\n             ast::UseTree(it) => Some(PathParent::UseTree(it)),\n             _ => None\n         }\n@@ -530,6 +533,31 @@ enum Foo {\n             r\"\n enum Foo {}\n impl Foo::Bar$0 {}\n+\",\n+        )\n+    }\n+\n+    #[test]\n+    fn path_pat() {\n+        check_assist(\n+            generate_enum_variant,\n+            r\"\n+enum Foo {}\n+fn foo(x: Foo) {\n+    match x {\n+        Foo::Bar$0 =>\n+    }\n+}\n+\",\n+            r\"\n+enum Foo {\n+    Bar,\n+}\n+fn foo(x: Foo) {\n+    match x {\n+        Foo::Bar =>\n+    }\n+}\n \",\n         )\n     }"}]}