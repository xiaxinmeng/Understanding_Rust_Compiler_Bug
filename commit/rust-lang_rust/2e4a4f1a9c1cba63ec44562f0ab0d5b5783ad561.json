{"sha": "2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561", "node_id": "C_kwDOAAsO6NoAKDJlNGE0ZjFhOWMxY2JhNjNlYzQ0NTYyZjBhYjBkNWI1NzgzYWQ1NjE", "commit": {"author": {"name": "Dorian Scheidt", "email": "dorian.scheidt@gmail.com", "date": "2022-08-18T23:28:43Z"}, "committer": {"name": "Dorian Scheidt", "email": "dorian.scheidt@gmail.com", "date": "2022-08-18T23:28:43Z"}, "message": "Cleanup inline", "tree": {"sha": "a998e2bf7c5bc9d416087d8151b2b64eff2c3ac7", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a998e2bf7c5bc9d416087d8151b2b64eff2c3ac7"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561", "html_url": "https://github.com/rust-lang/rust/commit/2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561/comments", "author": {"login": "DorianListens", "id": 5692947, "node_id": "MDQ6VXNlcjU2OTI5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5692947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DorianListens", "html_url": "https://github.com/DorianListens", "followers_url": "https://api.github.com/users/DorianListens/followers", "following_url": "https://api.github.com/users/DorianListens/following{/other_user}", "gists_url": "https://api.github.com/users/DorianListens/gists{/gist_id}", "starred_url": "https://api.github.com/users/DorianListens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DorianListens/subscriptions", "organizations_url": "https://api.github.com/users/DorianListens/orgs", "repos_url": "https://api.github.com/users/DorianListens/repos", "events_url": "https://api.github.com/users/DorianListens/events{/privacy}", "received_events_url": "https://api.github.com/users/DorianListens/received_events", "type": "User", "site_admin": false}, "committer": {"login": "DorianListens", "id": 5692947, "node_id": "MDQ6VXNlcjU2OTI5NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/5692947?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DorianListens", "html_url": "https://github.com/DorianListens", "followers_url": "https://api.github.com/users/DorianListens/followers", "following_url": "https://api.github.com/users/DorianListens/following{/other_user}", "gists_url": "https://api.github.com/users/DorianListens/gists{/gist_id}", "starred_url": "https://api.github.com/users/DorianListens/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DorianListens/subscriptions", "organizations_url": "https://api.github.com/users/DorianListens/orgs", "repos_url": "https://api.github.com/users/DorianListens/repos", "events_url": "https://api.github.com/users/DorianListens/events{/privacy}", "received_events_url": "https://api.github.com/users/DorianListens/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "96c04c5e1c54ceef0b16679ecb71f64548150826", "url": "https://api.github.com/repos/rust-lang/rust/commits/96c04c5e1c54ceef0b16679ecb71f64548150826", "html_url": "https://github.com/rust-lang/rust/commit/96c04c5e1c54ceef0b16679ecb71f64548150826"}], "stats": {"total": 25, "additions": 9, "deletions": 16}, "files": [{"sha": "cf28f49e034a00de3f0bafb3be934aedadf663a0", "filename": "crates/ide-assists/src/handlers/generate_function.rs", "status": "modified", "additions": 9, "deletions": 16, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_function.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_function.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fide-assists%2Fsrc%2Fhandlers%2Fgenerate_function.rs?ref=2e4a4f1a9c1cba63ec44562f0ab0d5b5783ad561", "patch": "@@ -418,22 +418,15 @@ fn assoc_fn_target_info(\n     adt: hir::Adt,\n     fn_name: &str,\n ) -> Option<TargetInfo> {\n-    let mut target_module = None;\n-    let mut adt_name = None;\n-    let (target, file, insert_offset) = {\n-        let target_module: &mut Option<Module> = &mut target_module;\n-        let adt_name: &mut Option<hir::Name> = &mut adt_name;\n-        let current_module = ctx.sema.scope(call.syntax())?.module();\n-        let module = adt.module(ctx.sema.db);\n-        *target_module = if current_module == module { None } else { Some(module) };\n-        if current_module.krate() != module.krate() {\n-            return None;\n-        }\n-        let (impl_, file) = get_adt_source(ctx, &adt, fn_name)?;\n-        let (target, insert_offset) = get_method_target(ctx, &module, &impl_)?;\n-        *adt_name = if impl_.is_none() { Some(adt.name(ctx.sema.db)) } else { None };\n-        Some((target, file, insert_offset))\n-    }?;\n+    let current_module = ctx.sema.scope(call.syntax())?.module();\n+    let module = adt.module(ctx.sema.db);\n+    let target_module = if current_module == module { None } else { Some(module) };\n+    if current_module.krate() != module.krate() {\n+        return None;\n+    }\n+    let (impl_, file) = get_adt_source(ctx, &adt, fn_name)?;\n+    let (target, insert_offset) = get_method_target(ctx, &module, &impl_)?;\n+    let adt_name = if impl_.is_none() { Some(adt.name(ctx.sema.db)) } else { None };\n     Some(TargetInfo { target_module, adt_name, target, file, insert_offset })\n }\n "}]}