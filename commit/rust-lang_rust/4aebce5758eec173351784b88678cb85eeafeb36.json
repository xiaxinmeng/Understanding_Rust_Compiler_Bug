{"sha": "4aebce5758eec173351784b88678cb85eeafeb36", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhZWJjZTU3NThlZWMxNzMzNTE3ODRiODg2NzhjYjg1ZWVhZmViMzY=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-02T06:55:14Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2019-03-02T14:58:26Z"}, "message": "Rollup merge of #58785 - euclio:tool-lint-attrs, r=estebank\n\nallow specifying attributes for tool lints\n\nNeeded for clippy to fix `unused_doc_comments` warnings that will be exposed by #57882 (and thus unblock it).", "tree": {"sha": "334c0a8a8f1b318f863e2a8e717b3a372b0df84c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/334c0a8a8f1b318f863e2a8e717b3a372b0df84c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4aebce5758eec173351784b88678cb85eeafeb36", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlx6mhIACgkQ/vbIBR0O\nATzUug/7Bs1r4HSswP0SFzIaZmB0p/yKHpWtlN+Qq6G0zYiZ+moYoWhl9i7VoHNh\nhmVsFw8Sisy7yalHCp0oHoix/nqJ878cVGV2rjXG+p4GvLkqrWlHyNNd0w+pjQMs\nmW78VGofbrso9VP6t3rlYi+kESdw+EyVfeiN4z+cNtgzuZF9jkFYkhmRNOsZ5ZZ5\nN4aFWKoibNnPnfvw5Z9Ru7n+76kw/d6ngM43TGt8VDHbTcXe46IvqazAhdXgeQzK\nT3QsRcLwFNSenTlZFJPClXMU81dkrBg8rd0ieNMyTsWwGS4EsuAVPG3zV3lOprlI\ncTmwerZv5uImeu+uJSCeJCnJBx5FGHCYGmTO+OzB9LQkauh6uP9I+0RVYcuysZGU\nAXkcf0jSDJgrTQsR3Q3yrQc13pJXlbizhmMy7DSOBIoZgdkUgo7KYWvYQwd6Ki0a\njvblEPcuWJPm46kI0gFAnuDC7TpyBPkgGOZiqpl3vukOMHHH5xWTu+IlB0vH8hpC\n71Mw1A6Si9xA8b1ZwvwxXqaxHAMqr1m8BtLl11IYgQvOOiSnEpRljjlIyZUP71Y9\nwAyDr8Bz9pXRNMu2ueR06t6D05/tX+PTs27XIPSzEkDTXOLCs6YZgkQERhrsq889\np68JfUYGSB4TBMq2ODBN0RiapFM7KpsUq+c238Adn/nZrex9NEs=\n=4UcB\n-----END PGP SIGNATURE-----", "payload": "tree 334c0a8a8f1b318f863e2a8e717b3a372b0df84c\nparent f67736ad04e4e727a62a59e94570467aaf9042d9\nparent a998b1f425bc13d891ed5b28f1b708970f9db4b4\nauthor kennytm <kennytm@gmail.com> 1551509714 +0800\ncommitter kennytm <kennytm@gmail.com> 1551538706 +0800\n\nRollup merge of #58785 - euclio:tool-lint-attrs, r=estebank\n\nallow specifying attributes for tool lints\n\nNeeded for clippy to fix `unused_doc_comments` warnings that will be exposed by #57882 (and thus unblock it).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4aebce5758eec173351784b88678cb85eeafeb36", "html_url": "https://github.com/rust-lang/rust/commit/4aebce5758eec173351784b88678cb85eeafeb36", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4aebce5758eec173351784b88678cb85eeafeb36/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f67736ad04e4e727a62a59e94570467aaf9042d9", "url": "https://api.github.com/repos/rust-lang/rust/commits/f67736ad04e4e727a62a59e94570467aaf9042d9", "html_url": "https://github.com/rust-lang/rust/commit/f67736ad04e4e727a62a59e94570467aaf9042d9"}, {"sha": "a998b1f425bc13d891ed5b28f1b708970f9db4b4", "url": "https://api.github.com/repos/rust-lang/rust/commits/a998b1f425bc13d891ed5b28f1b708970f9db4b4", "html_url": "https://github.com/rust-lang/rust/commit/a998b1f425bc13d891ed5b28f1b708970f9db4b4"}], "stats": {"total": 26, "additions": 19, "deletions": 7}, "files": [{"sha": "496ff568b31b4d5a775a0f1f1382dfa477a9fff6", "filename": "src/librustc/lint/mod.rs", "status": "modified", "additions": 14, "deletions": 6, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/4aebce5758eec173351784b88678cb85eeafeb36/src%2Flibrustc%2Flint%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4aebce5758eec173351784b88678cb85eeafeb36/src%2Flibrustc%2Flint%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fmod.rs?ref=4aebce5758eec173351784b88678cb85eeafeb36", "patch": "@@ -132,14 +132,22 @@ macro_rules! declare_lint {\n \n #[macro_export]\n macro_rules! declare_tool_lint {\n-    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr) => (\n-        declare_tool_lint!{$vis $tool::$NAME, $Level, $desc, false}\n+    (\n+        $(#[$attr:meta])* $vis:vis $tool:ident ::$NAME:ident, $Level: ident, $desc: expr\n+    ) => (\n+        declare_tool_lint!{$(#[$attr])* $vis $tool::$NAME, $Level, $desc, false}\n     );\n-    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr,\n-     report_in_external_macro: $rep: expr) => (\n-         declare_tool_lint!{$vis $tool::$NAME, $Level, $desc, $rep}\n+    (\n+        $(#[$attr:meta])* $vis:vis $tool:ident ::$NAME:ident, $Level:ident, $desc:expr,\n+        report_in_external_macro: $rep:expr\n+    ) => (\n+         declare_tool_lint!{$(#[$attr])* $vis $tool::$NAME, $Level, $desc, $rep}\n     );\n-    ($vis: vis $tool: ident ::$NAME: ident, $Level: ident, $desc: expr, $external: expr) => (\n+    (\n+        $(#[$attr:meta])* $vis:vis $tool:ident ::$NAME:ident, $Level:ident, $desc:expr,\n+        $external:expr\n+    ) => (\n+        $(#[$attr])*\n         $vis static $NAME: &$crate::lint::Lint = &$crate::lint::Lint {\n             name: &concat!(stringify!($tool), \"::\", stringify!($NAME)),\n             default_level: $crate::lint::$Level,"}, {"sha": "d25a5ea374627dbf5ec62eff4467088c2eb42ecb", "filename": "src/test/ui-fulldeps/auxiliary/lint_tool_test.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4aebce5758eec173351784b88678cb85eeafeb36/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4aebce5758eec173351784b88678cb85eeafeb36/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fauxiliary%2Flint_tool_test.rs?ref=4aebce5758eec173351784b88678cb85eeafeb36", "patch": "@@ -13,7 +13,11 @@ use rustc::lint::{EarlyContext, LintContext, LintPass, EarlyLintPass,\n use rustc_plugin::Registry;\n use syntax::ast;\n declare_tool_lint!(pub clippy::TEST_LINT, Warn, \"Warn about stuff\");\n-declare_tool_lint!(pub clippy::TEST_GROUP, Warn, \"Warn about other stuff\");\n+declare_tool_lint!(\n+    /// Some docs\n+    pub clippy::TEST_GROUP,\n+    Warn, \"Warn about other stuff\"\n+);\n \n struct Pass;\n "}]}