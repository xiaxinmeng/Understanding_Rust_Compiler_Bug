{"sha": "54c8c23a74ffb770b30896e1ff5b194387a5cf0d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0YzhjMjNhNzRmZmI3NzBiMzA4OTZlMWZmNWIxOTQzODdhNWNmMGQ=", "commit": {"author": {"name": "Benjamin Kampmann", "email": "ben@create-build-execute.com", "date": "2016-03-29T08:24:35Z"}, "committer": {"name": "Benjamin Kampmann", "email": "ben@create-build-execute.com", "date": "2016-03-29T08:24:35Z"}, "message": "Add Post-Success script to build clippy-service", "tree": {"sha": "6e7640a1c6a0764b198390aa64ab10a39eaf594c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e7640a1c6a0764b198390aa64ab10a39eaf594c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/54c8c23a74ffb770b30896e1ff5b194387a5cf0d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/54c8c23a74ffb770b30896e1ff5b194387a5cf0d", "html_url": "https://github.com/rust-lang/rust/commit/54c8c23a74ffb770b30896e1ff5b194387a5cf0d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/54c8c23a74ffb770b30896e1ff5b194387a5cf0d/comments", "author": null, "committer": null, "parents": [{"sha": "94f10ee69a98dec32961240376e3d87831ced4ae", "url": "https://api.github.com/repos/rust-lang/rust/commits/94f10ee69a98dec32961240376e3d87831ced4ae", "html_url": "https://github.com/rust-lang/rust/commit/94f10ee69a98dec32961240376e3d87831ced4ae"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "322e03258d49207f13effd88be12f359d8ce6865", "filename": ".travis.yml", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/rust-lang/rust/blob/54c8c23a74ffb770b30896e1ff5b194387a5cf0d/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/54c8c23a74ffb770b30896e1ff5b194387a5cf0d/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=54c8c23a74ffb770b30896e1ff5b194387a5cf0d", "patch": "@@ -10,3 +10,25 @@ script:\n \n  # only test regex_macros if it compiles\n  - if [[ \"$(cargo build --features 'debugging test-regex_macros')\" = 101 ]]; then cargo test --features 'debugging test-regex_macros'; fi\n+\n+# trigger rebuild of the clippy-service\n+after_success:\n+- |\n+    #!/bin/bash\n+    set -e\n+    if [ \"$TRAVIS_PULL_REQUEST\" == \"false\" ] &&\n+       [ \"$TRAVIS_REPO_SLUG\" == \"Manishearth/rust-clippy\" ] &&\n+       [ \"$TRAVIS_BRANCH\" == \"master\" ] &&\n+       [ \"$TRAVIS_TOKEN_CLIPPY_SERVICE\" != \"\" ] ; then\n+\n+       curl -s -X POST \\\n+            -H \"Content-Type: application/json\" \\\n+            -H \"Accept: application/json\" \\\n+            -H \"Travis-API-Version: 3\" \\\n+            -H \"Authorization: token $TRAVIS_TOKEN_CLIPPY_SERVICE\" \\\n+            -d \"{ \\\"request\\\": { \\\"branch\\\":\\\"master\\\" }}\" \\\n+            https://api.travis-ci.org/repo/ligthyear%2Fclippy-service/requests\n+\n+    else\n+      echo \"Ignored\"\n+    fi"}]}