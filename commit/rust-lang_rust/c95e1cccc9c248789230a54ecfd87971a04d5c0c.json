{"sha": "c95e1cccc9c248789230a54ecfd87971a04d5c0c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5NWUxY2NjYzljMjQ4Nzg5MjMwYTU0ZWNmZDg3OTcxYTA0ZDVjMGM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-05-19T10:04:42Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2018-05-19T10:04:42Z"}, "message": "Auto merge of #50874 - nikomatsakis:nll-reset-unification, r=estebank\n\nuse `reset_unifications` instead of creating new unification table\n\nThis eliminates a hot spot in NLL performance.", "tree": {"sha": "167f056fc9d10d45fba85cab99c5df911eeaa4c5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/167f056fc9d10d45fba85cab99c5df911eeaa4c5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c95e1cccc9c248789230a54ecfd87971a04d5c0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c95e1cccc9c248789230a54ecfd87971a04d5c0c", "html_url": "https://github.com/rust-lang/rust/commit/c95e1cccc9c248789230a54ecfd87971a04d5c0c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c95e1cccc9c248789230a54ecfd87971a04d5c0c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bdace29de04af4fe9e4317b73c3f7d6418a33de1", "url": "https://api.github.com/repos/rust-lang/rust/commits/bdace29de04af4fe9e4317b73c3f7d6418a33de1", "html_url": "https://github.com/rust-lang/rust/commit/bdace29de04af4fe9e4317b73c3f7d6418a33de1"}, {"sha": "7ed0fd76998be8e537fa985c9ec52d3c22844e6e", "url": "https://api.github.com/repos/rust-lang/rust/commits/7ed0fd76998be8e537fa985c9ec52d3c22844e6e", "html_url": "https://github.com/rust-lang/rust/commit/7ed0fd76998be8e537fa985c9ec52d3c22844e6e"}], "stats": {"total": 17, "additions": 7, "deletions": 10}, "files": [{"sha": "64f550be5148b3761b3b1ec4b785251048064355", "filename": "src/Cargo.lock", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/c95e1cccc9c248789230a54ecfd87971a04d5c0c/src%2FCargo.lock", "raw_url": "https://github.com/rust-lang/rust/raw/c95e1cccc9c248789230a54ecfd87971a04d5c0c/src%2FCargo.lock", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2FCargo.lock?ref=c95e1cccc9c248789230a54ecfd87971a04d5c0c", "patch": "@@ -588,7 +588,7 @@ dependencies = [\n \n [[package]]\n name = \"ena\"\n-version = \"0.9.2\"\n+version = \"0.9.3\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1750,7 +1750,7 @@ version = \"128.0.0\"\n source = \"registry+https://github.com/rust-lang/crates.io-index\"\n dependencies = [\n  \"cfg-if 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"ena 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"ena 0.9.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot_core 0.2.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -1957,7 +1957,7 @@ name = \"rustc_data_structures\"\n version = \"0.0.0\"\n dependencies = [\n  \"cfg-if 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n- \"ena 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\",\n+ \"ena 0.9.3 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"log 0.4.1 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot 0.5.5 (registry+https://github.com/rust-lang/crates.io-index)\",\n  \"parking_lot_core 0.2.14 (registry+https://github.com/rust-lang/crates.io-index)\",\n@@ -2999,7 +2999,7 @@ source = \"registry+https://github.com/rust-lang/crates.io-index\"\n \"checksum dtoa 0.4.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"09c3753c3db574d215cba4ea76018483895d7bff25a31b49ba45db21c48e50ab\"\n \"checksum either 1.5.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"3be565ca5c557d7f59e7cfcf1844f9e3033650c929c6566f511e8005f205c1d0\"\n \"checksum elasticlunr-rs 2.2.0 (registry+https://github.com/rust-lang/crates.io-index)\" = \"4511b63d69dd5d31e8e29aed2c132c413f87acea8035d0584801feaab9dd1f0f\"\n-\"checksum ena 0.9.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"f8b449f3b18c89d2dbe40548d2ee4fa58ea0a08b761992da6ecb9788e4688834\"\n+\"checksum ena 0.9.3 (registry+https://github.com/rust-lang/crates.io-index)\" = \"88dc8393b3c7352f94092497f6b52019643e493b6b890eb417cdb7c46117e621\"\n \"checksum endian-type 0.1.2 (registry+https://github.com/rust-lang/crates.io-index)\" = \"c34f04666d835ff5d62e058c3995147c06f42fe86ff053337632bca83e42702d\"\n \"checksum enum_primitive 0.1.1 (registry+https://github.com/rust-lang/crates.io-index)\" = \"be4551092f4d519593039259a9ed8daedf0da12e5109c5280338073eaeb81180\"\n \"checksum env_logger 0.5.8 (registry+https://github.com/rust-lang/crates.io-index)\" = \"be27f8ea102a7182093a80d98f0b78623b580eda8791cbe8e2345fe6e57567a6\""}, {"sha": "99d7b4eaf7d68b3b468934ba2c404f2b3c8023c1", "filename": "src/librustc/infer/region_constraints/mod.rs", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/c95e1cccc9c248789230a54ecfd87971a04d5c0c/src%2Flibrustc%2Finfer%2Fregion_constraints%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c95e1cccc9c248789230a54ecfd87971a04d5c0c/src%2Flibrustc%2Finfer%2Fregion_constraints%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Fregion_constraints%2Fmod.rs?ref=c95e1cccc9c248789230a54ecfd87971a04d5c0c", "patch": "@@ -318,7 +318,7 @@ impl<'tcx> RegionConstraintCollector<'tcx> {\n         // should think carefully about whether it needs to be cleared\n         // or updated in some way.\n         let RegionConstraintCollector {\n-            var_infos,\n+            var_infos: _,\n             data,\n             lubs,\n             glbs,\n@@ -338,10 +338,7 @@ impl<'tcx> RegionConstraintCollector<'tcx> {\n         // un-unified\" state. Note that when we unify `a` and `b`, we\n         // also insert `a <= b` and a `b <= a` edges, so the\n         // `RegionConstraintData` contains the relationship here.\n-        *unification_table = ut::UnificationTable::new();\n-        for vid in var_infos.indices() {\n-            unification_table.new_key(unify_key::RegionVidKey { min_vid: vid });\n-        }\n+        unification_table.reset_unifications(|vid| unify_key::RegionVidKey { min_vid: vid });\n \n         mem::replace(data, RegionConstraintData::default())\n     }"}, {"sha": "bb1fb84a0ce0fe7cac7e48905aa7d3209e3f8662", "filename": "src/librustc_data_structures/Cargo.toml", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c95e1cccc9c248789230a54ecfd87971a04d5c0c/src%2Flibrustc_data_structures%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/c95e1cccc9c248789230a54ecfd87971a04d5c0c/src%2Flibrustc_data_structures%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2FCargo.toml?ref=c95e1cccc9c248789230a54ecfd87971a04d5c0c", "patch": "@@ -9,7 +9,7 @@ path = \"lib.rs\"\n crate-type = [\"dylib\"]\n \n [dependencies]\n-ena = \"0.9.1\"\n+ena = \"0.9.3\"\n log = \"0.4\"\n rustc_cratesio_shim = { path = \"../librustc_cratesio_shim\" }\n serialize = { path = \"../libserialize\" }"}]}