{"sha": "7d6c3dafbd4b2afc03377572964ee60678096fac", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkNmMzZGFmYmQ0YjJhZmMwMzM3NzU3Mjk2NGVlNjA2NzgwOTZmYWM=", "commit": {"author": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2017-09-12T00:15:10Z"}, "committer": {"name": "Tamir Duberstein", "email": "tamird@gmail.com", "date": "2017-10-07T00:35:57Z"}, "message": "Trim and document compiler-builtins shim", "tree": {"sha": "e8c099873238a7954ee7e3c00aa0f3764ae5b34e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e8c099873238a7954ee7e3c00aa0f3764ae5b34e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d6c3dafbd4b2afc03377572964ee60678096fac", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE/uKQcsWiEQj1Z6uEHB6YzI4Xu4kFAlnYIW4ACgkQHB6YzI4X\nu4kPEw//RWi/E1vKT4oXKnPOQ/tdxMbMmvAJGgC+uQCtLaAQG0upkZXAcl/X86sn\nBE6NhaAAeISI6u7EKF3aHyAQQxdaV5axC6w5tX1gEBMTUh24BIl7DO5+1DB5/SHg\nEDyFrGtqKycDO5Y1tin41XwIn82h6xQ9FLaoY94XefxB4MprSlY2Aks6gltPAkbK\nDr2pXGtGC3x1RtZAMaHl9D/AmjQo/QEO3LTMIkWEHsI/pTsugQ2bIqihXTK+mHMn\nQyDgXSGhVOYL/2Wo96KM0VkEZL177nn6r9/dEwwRk7WLCxZF8U+y65muvlOn21bW\n7ej+p9+pcVZAPPnnMw0O/PMRoPj6dlwOq01+0vADUJyXJgudmiCYxs80rvuBwT71\ndVXJv0ONSIGd+BNxEWstw50px4Sac7KKBNIQvjq/RDegQIIA6wDvTjin7eWg7Ya7\nqbDiG5/RRt+iAHBnXTYqJhXJfS18SmsPtZ6DPHF8XK+4qMYz78qv072z7oVKci8r\ngXnX273z88dnvY7D69DLoAFH4YoN0aTXHdYXDxlzAevJyr+94Ued+vKRCp0hPW5L\nQU+d/PVPmg5RzrC179II0yuG73RNUhZUM1E9UNFb0ShXqw7ul8qVXTJJPBUg/YUT\nBuuHvkewlTPewXNOmtM4rtSL03xT6mfxSYBsJRVsj2EVU4BTngk=\n=wxto\n-----END PGP SIGNATURE-----", "payload": "tree e8c099873238a7954ee7e3c00aa0f3764ae5b34e\nparent b67f4283b3d04ef8e0504503123001cf642ec325\nauthor Tamir Duberstein <tamird@gmail.com> 1505175310 -0400\ncommitter Tamir Duberstein <tamird@gmail.com> 1507336557 -0400\n\nTrim and document compiler-builtins shim\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d6c3dafbd4b2afc03377572964ee60678096fac", "html_url": "https://github.com/rust-lang/rust/commit/7d6c3dafbd4b2afc03377572964ee60678096fac", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d6c3dafbd4b2afc03377572964ee60678096fac/comments", "author": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tamird", "id": 1535036, "node_id": "MDQ6VXNlcjE1MzUwMzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1535036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tamird", "html_url": "https://github.com/tamird", "followers_url": "https://api.github.com/users/tamird/followers", "following_url": "https://api.github.com/users/tamird/following{/other_user}", "gists_url": "https://api.github.com/users/tamird/gists{/gist_id}", "starred_url": "https://api.github.com/users/tamird/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tamird/subscriptions", "organizations_url": "https://api.github.com/users/tamird/orgs", "repos_url": "https://api.github.com/users/tamird/repos", "events_url": "https://api.github.com/users/tamird/events{/privacy}", "received_events_url": "https://api.github.com/users/tamird/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b67f4283b3d04ef8e0504503123001cf642ec325", "url": "https://api.github.com/repos/rust-lang/rust/commits/b67f4283b3d04ef8e0504503123001cf642ec325", "html_url": "https://github.com/rust-lang/rust/commit/b67f4283b3d04ef8e0504503123001cf642ec325"}], "stats": {"total": 32, "additions": 22, "deletions": 10}, "files": [{"sha": "886e239246d2558f4dfffdc3f8378740029a58a0", "filename": "src/rustc/compiler_builtins_shim/Cargo.toml", "status": "modified", "additions": 17, "deletions": 2, "changes": 19, "blob_url": "https://github.com/rust-lang/rust/blob/7d6c3dafbd4b2afc03377572964ee60678096fac/src%2Frustc%2Fcompiler_builtins_shim%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7d6c3dafbd4b2afc03377572964ee60678096fac/src%2Frustc%2Fcompiler_builtins_shim%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fcompiler_builtins_shim%2FCargo.toml?ref=7d6c3dafbd4b2afc03377572964ee60678096fac", "patch": "@@ -1,5 +1,3 @@\n-# See libc_shim/Cargo.toml for why this exists\n-\n [package]\n name = \"compiler_builtins\"\n authors = [\"The Rust Project Developers\"]\n@@ -12,6 +10,23 @@ test = false\n doctest = false\n \n [dependencies]\n+# Specify the path to libcore; at the time of writing, removing this shim in\n+# favor of using compiler-builtins from git results in a compilation failure:\n+#\n+# Building stage0 std artifacts (x86_64-apple-darwin -> x86_64-apple-darwin)\n+#    Compiling compiler_builtins v0.1.0 (https://github.com/rust-lang-nursery/compiler-builtins.git#23f14d3f)\n+# error[E0463]: can't find crate for `core`\n+#\n+# error: aborting due to previous error\n+#\n+# error: Could not compile `compiler_builtins`.\n+#\n+# Caused by:\n+#   process didn't exit successfully: `/Users/tamird/src/rust/build/bootstrap/debug/rustc --crate-name compiler_builtins /Users/tamird/.cargo/git/checkouts/compiler-builtins-ec094dc45a0179c8/23f14d3/src/lib.rs --error-format json --crate-type lib --emit=dep-info,link -C opt-level=2 --cfg feature=\"c\" --cfg feature=\"compiler-builtins\" --cfg feature=\"default\" --cfg feature=\"gcc\" -C metadata=876d429e8d7eae1f -C extra-filename=-876d429e8d7eae1f --out-dir /Users/tamird/src/rust/build/x86_64-apple-darwin/stage0-std/x86_64-apple-darwin/release/deps --target x86_64-apple-darwin -L dependency=/Users/tamird/src/rust/build/x86_64-apple-darwin/stage0-std/x86_64-apple-darwin/release/deps -L dependency=/Users/tamird/src/rust/build/x86_64-apple-darwin/stage0-std/release/deps --cap-lints allow -L native=/Users/tamird/src/rust/build/x86_64-apple-darwin/stage0-std/x86_64-apple-darwin/release/build/compiler_builtins-f18fab55928102ad/out -l static=compiler-rt` (exit code: 101)\n+# thread 'main' panicked at 'command did not execute successfully: \"/Users/tamird/src/rust/build/x86_64-apple-darwin/stage0/bin/cargo\" \"build\" \"-j\" \"4\" \"--target\" \"x86_64-apple-darwin\" \"--release\" \"--features\" \"panic-unwind jemalloc backtrace\" \"--manifest-path\" \"/Users/tamird/src/rust/src/libstd/Cargo.toml\" \"--message-format\" \"json\"\n+# expected success, got: exit code: 101', src/bootstrap/compile.rs:883:8\n+#\n+# See https://github.com/rust-lang/rfcs/pull/1133.\n core = { path = \"../../libcore\" }\n \n [build-dependencies]"}, {"sha": "b37543e5f679db8ffc0733faae909268e8e90f6c", "filename": "src/rustc/compiler_builtins_shim/build.rs", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7d6c3dafbd4b2afc03377572964ee60678096fac/src%2Frustc%2Fcompiler_builtins_shim%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d6c3dafbd4b2afc03377572964ee60678096fac/src%2Frustc%2Fcompiler_builtins_shim%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustc%2Fcompiler_builtins_shim%2Fbuild.rs?ref=7d6c3dafbd4b2afc03377572964ee60678096fac", "patch": "@@ -8,11 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-#![deny(warnings)]\n-\n-// See comments in Cargo.toml for why this exists\n-\n-fn main() {\n-    println!(\"cargo:rustc-cfg=stdbuild\");\n-    println!(\"cargo:rerun-if-changed=build.rs\");\n-}\n+// This file is left intentionally empty (and not removed) to avoid an issue\n+// where this crate is always considered dirty due to compiler-builtins'\n+// `cargo:rerun-if-changed=build.rs` directive; since the path is relative, it\n+// refers to this file when this shim crate is being built, and the absence of\n+// this file is considered by cargo to be equivalent to it having changed."}]}