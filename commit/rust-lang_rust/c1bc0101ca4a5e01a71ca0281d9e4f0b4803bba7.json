{"sha": "c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7", "node_id": "MDY6Q29tbWl0NzI0NzEyOmMxYmMwMTAxY2E0YTVlMDFhNzFjYTAyODFkOWU0ZjBiNDgwM2JiYTc=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-23T00:52:03Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-03-23T00:53:43Z"}, "message": "stdlib: Provide a function to extract the underlying buf_writer from a writer", "tree": {"sha": "4b66b8432340be7cc8fd662aadbd269055875cd6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4b66b8432340be7cc8fd662aadbd269055875cd6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7", "html_url": "https://github.com/rust-lang/rust/commit/c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "23e23bd762a4b5a14ff2abcbabfd2349621a3dbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/23e23bd762a4b5a14ff2abcbabfd2349621a3dbe", "html_url": "https://github.com/rust-lang/rust/commit/23e23bd762a4b5a14ff2abcbabfd2349621a3dbe"}], "stats": {"total": 9, "additions": 9, "deletions": 0}, "files": [{"sha": "dea15a27a1dd37443641ae6749e758f84492caa1", "filename": "src/lib/io.rs", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7/src%2Flib%2Fio.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7/src%2Flib%2Fio.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Fio.rs?ref=c1bc0101ca4a5e01a71ca0281d9e4f0b4803bba7", "patch": "@@ -223,6 +223,7 @@ fn file_buf_writer(str path, vec[fileflag] flags) -> buf_writer {\n \n type writer =\n     state obj {\n+          fn get_buf_writer() -> buf_writer;\n           impure fn write_str(str s);\n           impure fn write_int(int n);\n           impure fn write_uint(uint n);\n@@ -242,6 +243,9 @@ fn uint_to_le_bytes(uint n, uint size) -> vec[u8] {\n }\n \n state obj new_writer(buf_writer out) {\n+    fn get_buf_writer() -> buf_writer {\n+        ret out;\n+    }\n     impure fn write_str(str s) {\n         out.write(_str.bytes(s));\n     }\n@@ -262,6 +266,11 @@ state obj new_writer(buf_writer out) {\n     }\n }\n \n+// FIXME: Remove me once objects are exported.\n+fn new_writer_(buf_writer out) -> writer {\n+    ret new_writer(out);\n+}\n+\n fn file_writer(str path, vec[fileflag] flags) -> writer {\n     ret new_writer(file_buf_writer(path, flags));\n }"}]}