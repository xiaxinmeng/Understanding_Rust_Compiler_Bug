{"sha": "43006fcea0066a935b657fff9ccef56983cbf56c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQzMDA2ZmNlYTAwNjZhOTM1YjY1N2ZmZjljY2VmNTY5ODNjYmY1NmM=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2016-11-15T17:10:23Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2016-11-15T17:10:23Z"}, "message": "Auto merge of #37742 - mrhota:llvm_debuginfo, r=alexcrichton\n\nAdd llvm debuginfo configure option\n\nCC @nnethercote @Mark-Simulacrum\n\nWe add a new configure option, `--enable-llvm-debuginfo`, to do exactly what you'd think.\n\nRe: #31033\n\nFixes #37738", "tree": {"sha": "f70413548d8a272f2e458e898543bfa88541457f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f70413548d8a272f2e458e898543bfa88541457f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/43006fcea0066a935b657fff9ccef56983cbf56c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/43006fcea0066a935b657fff9ccef56983cbf56c", "html_url": "https://github.com/rust-lang/rust/commit/43006fcea0066a935b657fff9ccef56983cbf56c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/43006fcea0066a935b657fff9ccef56983cbf56c/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30857ae8f67676e32322cdbb6c606c319eacdd73", "url": "https://api.github.com/repos/rust-lang/rust/commits/30857ae8f67676e32322cdbb6c606c319eacdd73", "html_url": "https://github.com/rust-lang/rust/commit/30857ae8f67676e32322cdbb6c606c319eacdd73"}, {"sha": "d3574b8dc756c5bd5dd2d7b8053c0de15b902691", "url": "https://api.github.com/repos/rust-lang/rust/commits/d3574b8dc756c5bd5dd2d7b8053c0de15b902691", "html_url": "https://github.com/rust-lang/rust/commit/d3574b8dc756c5bd5dd2d7b8053c0de15b902691"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "15bfb5e3ec269a7b0fd9ab5de61bc915750b8f6e", "filename": "configure", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/43006fcea0066a935b657fff9ccef56983cbf56c/configure", "raw_url": "https://github.com/rust-lang/rust/raw/43006fcea0066a935b657fff9ccef56983cbf56c/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=43006fcea0066a935b657fff9ccef56983cbf56c", "patch": "@@ -642,6 +642,7 @@ opt_nosave optimize-cxx 1 \"build optimized C++ code\"\n opt_nosave optimize-llvm 1 \"build optimized LLVM\"\n opt_nosave llvm-assertions 0 \"build LLVM with assertions\"\n opt_nosave debug-assertions 0 \"build with debugging assertions\"\n+opt_nosave llvm-release-debuginfo 0 \"build LLVM with debugger metadata\"\n opt_nosave debuginfo 0 \"build with debugger metadata\"\n opt_nosave debuginfo-lines 0 \"build with line number debugger metadata\"\n opt_nosave debug-jemalloc 0 \"build jemalloc with --enable-debug --enable-fill\"\n@@ -778,6 +779,7 @@ if [ -n \"$CFG_DISABLE_OPTIMIZE_CXX\" ]; then putvar CFG_DISABLE_OPTIMIZE_CXX; fi\n if [ -n \"$CFG_DISABLE_OPTIMIZE_LLVM\" ]; then putvar CFG_DISABLE_OPTIMIZE_LLVM; fi\n if [ -n \"$CFG_ENABLE_LLVM_ASSERTIONS\" ]; then putvar CFG_ENABLE_LLVM_ASSERTIONS; fi\n if [ -n \"$CFG_ENABLE_DEBUG_ASSERTIONS\" ]; then putvar CFG_ENABLE_DEBUG_ASSERTIONS; fi\n+if [ -n \"$CFG_ENABLE_LLVM_RELEASE_DEBUGINFO\" ]; then putvar CFG_ENABLE_LLVM_RELEASE_DEBUGINFO; fi\n if [ -n \"$CFG_ENABLE_DEBUGINFO\" ]; then putvar CFG_ENABLE_DEBUGINFO; fi\n if [ -n \"$CFG_ENABLE_DEBUGINFO_LINES\" ]; then putvar CFG_ENABLE_DEBUGINFO_LINES; fi\n if [ -n \"$CFG_ENABLE_DEBUG_JEMALLOC\" ]; then putvar CFG_ENABLE_DEBUG_JEMALLOC; fi\n@@ -1772,6 +1774,8 @@ do\n \n     if [ -n \"$CFG_DISABLE_OPTIMIZE_LLVM\" ]; then\n         CMAKE_ARGS=\"$CMAKE_ARGS -DCMAKE_BUILD_TYPE=Debug\"\n+    elif [ -n \"$CFG_ENABLE_LLVM_RELEASE_DEBUGINFO\" ]; then\n+        CMAKE_ARGS=\"$CMAKE_ARGS -DCMAKE_BUILD_TYPE=RelWithDebInfo\"\n     else\n         CMAKE_ARGS=\"$CMAKE_ARGS -DCMAKE_BUILD_TYPE=Release\"\n     fi"}, {"sha": "76367e6f3a628c1d391b09d403dd17266987dc63", "filename": "mk/llvm.mk", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/43006fcea0066a935b657fff9ccef56983cbf56c/mk%2Fllvm.mk", "raw_url": "https://github.com/rust-lang/rust/raw/43006fcea0066a935b657fff9ccef56983cbf56c/mk%2Fllvm.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fllvm.mk?ref=43006fcea0066a935b657fff9ccef56983cbf56c", "patch": "@@ -21,6 +21,8 @@ endif\n \n ifdef CFG_DISABLE_OPTIMIZE_LLVM\n LLVM_BUILD_CONFIG_MODE := Debug\n+else ifdef CFG_ENABLE_LLVM_RELEASE_DEBUGINFO\n+LLVM_BUILD_CONFIG_MODE := RelWithDebInfo\n else\n LLVM_BUILD_CONFIG_MODE := Release\n endif"}, {"sha": "945d482c2aacd562c1214078cefad40da533df16", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/43006fcea0066a935b657fff9ccef56983cbf56c/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/43006fcea0066a935b657fff9ccef56983cbf56c/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=43006fcea0066a935b657fff9ccef56983cbf56c", "patch": "@@ -339,6 +339,7 @@ impl Config {\n                 (\"COMPILER_DOCS\", self.compiler_docs),\n                 (\"DOCS\", self.docs),\n                 (\"LLVM_ASSERTIONS\", self.llvm_assertions),\n+                (\"LLVM_RELEASE_DEBUGINFO\", self.llvm_release_debuginfo),\n                 (\"OPTIMIZE_LLVM\", self.llvm_optimize),\n                 (\"LLVM_VERSION_CHECK\", self.llvm_version_check),\n                 (\"LLVM_STATIC_STDCPP\", self.llvm_static_stdcpp),"}]}