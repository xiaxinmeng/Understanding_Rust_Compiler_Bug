{"sha": "a8e7f9530a623ea7ca37c556c2822ae8c3bfa339", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE4ZTdmOTUzMGE2MjNlYTdjYTM3YzU1NmMyODIyYWU4YzNiZmEzMzk=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-12-20T19:16:39Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2016-12-20T20:59:06Z"}, "message": "Rollup merge of #38432 - stjepang:fix-sort-comment, r=bluss\n\nMinor fix in the merge_sort comments\n\nThere was an off-by-one error discovered by @tbelaire.\nSo, to repeat... the two invariants we are enforcing are:\n\n1. Run lengths are decreasing.\n2. Sum of lengths of any two adjacent runs is less than the length of\ntheir predecessor.\n\nThis commit changes the relevant comment to be clearer and have correct bounds on `i`.\n\nr? @bluss", "tree": {"sha": "c4ddec6202f9ddc84e9e37103d6edd82545dbb76", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c4ddec6202f9ddc84e9e37103d6edd82545dbb76"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a8e7f9530a623ea7ca37c556c2822ae8c3bfa339", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a8e7f9530a623ea7ca37c556c2822ae8c3bfa339", "html_url": "https://github.com/rust-lang/rust/commit/a8e7f9530a623ea7ca37c556c2822ae8c3bfa339", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a8e7f9530a623ea7ca37c556c2822ae8c3bfa339/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "21f33dbf7166beb1ce94c349228035b618de8dbe", "url": "https://api.github.com/repos/rust-lang/rust/commits/21f33dbf7166beb1ce94c349228035b618de8dbe", "html_url": "https://github.com/rust-lang/rust/commit/21f33dbf7166beb1ce94c349228035b618de8dbe"}, {"sha": "18ff6410d8c196537fc64a10d9d5b502308eb6fa", "url": "https://api.github.com/repos/rust-lang/rust/commits/18ff6410d8c196537fc64a10d9d5b502308eb6fa", "html_url": "https://github.com/rust-lang/rust/commit/18ff6410d8c196537fc64a10d9d5b502308eb6fa"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "b5e6669220535282c1694e44c79264c970e62540", "filename": "src/libcollections/slice.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a8e7f9530a623ea7ca37c556c2822ae8c3bfa339/src%2Flibcollections%2Fslice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a8e7f9530a623ea7ca37c556c2822ae8c3bfa339/src%2Flibcollections%2Fslice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Fslice.rs?ref=a8e7f9530a623ea7ca37c556c2822ae8c3bfa339", "patch": "@@ -1496,10 +1496,10 @@ unsafe fn merge<T, F>(v: &mut [T], mid: usize, buf: *mut T, compare: &mut F)\n /// The algorithm identifies strictly descending and non-descending subsequences, which are called\n /// natural runs. There is a stack of pending runs yet to be merged. Each newly found run is pushed\n /// onto the stack, and then some pairs of adjacent runs are merged until these two invariants are\n-/// satisfied, for every `i` in `0 .. runs.len() - 2`:\n+/// satisfied:\n ///\n-/// 1. `runs[i].len > runs[i + 1].len`\n-/// 2. `runs[i].len > runs[i + 1].len + runs[i + 2].len`\n+/// 1. for every `i` in `1..runs.len()`: `runs[i - 1].len > runs[i].len`\n+/// 2. for every `i` in `2..runs.len()`: `runs[i - 2].len > runs[i - 1].len + runs[i].len`\n ///\n /// The invariants ensure that the total running time is `O(n log n)` worst-case.\n fn merge_sort<T, F>(v: &mut [T], mut compare: F)"}]}