{"sha": "35eda0531a51115cdae893fac68b6fae976cab1f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1ZWRhMDUzMWE1MTExNWNkYWU4OTNmYWM2OGI2ZmFlOTc2Y2FiMWY=", "commit": {"author": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2017-09-03T21:14:07Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2017-09-03T21:14:20Z"}, "message": "Fix unit_expr expectations and changelog entry", "tree": {"sha": "d1aea3e8f4fd777284b9522015d0696e1fdc036a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1aea3e8f4fd777284b9522015d0696e1fdc036a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/35eda0531a51115cdae893fac68b6fae976cab1f", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEKEMXbnGOy4KpaPA5O79NPi73n5gFAlmscKwACgkQO79NPi73\nn5jJEQ/+O7LM4wwpXYwD2MCrgJw9b7lNSl+KlCJRH1bQ/z0fMdX+uDIIcM4UZvtF\nnFy3tE7ohrJ7/PRTpPYevt0BH13nf/kJfEBDW1i/TtqZLswGXZdFC+tqA9NXcMvM\nU8rYUyH3GqAMZn4bk2ohKnX1Q7MoI058KBqQ5U2AEgFFzNuTRHPCfjIEozAE9Hao\nCRkD2fewylpheqN10sd5Nz3NbLQCReJ+BbVuGIWJVd90AZep7AyeUb5FiYsq5XnB\nQATN98+XMhFpTuuyHqfBSLO4M5y5sHp0/sjz+UKWq1fL1SfGevAGLw7jwim7oTl3\nCrD8XQLsFFW/VmFoMxgqviMQtqJhOeTddIuN8phdgatz9Qn7DbzBo/OvlJPCSZcd\nfjWjd6iA7N2eDuCT9iLBv8O1/o9j01qg01qJ61TEWIOEgaZtYVJL0ozoriICSmc2\nuGHpQxO6ES2QwJ4C6iWlVy6pHyisTN7l+JUV8l/F9BXIq+nd3arIkEuH4s9ZZ2ye\n4GrLmRkh8jh08X+jLDts+1ObLtG0fvhravhIMz0LZFwtcJP6KVnXPLvkdnUto4ib\nTchnNd4rSEHMEZb2DqJ/GdGFdUkj9foDBA/jLpuNTa6zF3BXYT9JEr6O/AcvKB4P\nesthkrRo3yG1yfIlAFT2CZSgcbYrG5SwHoBgBUzdBCJFgWqj9bs=\n=dOnx\n-----END PGP SIGNATURE-----", "payload": "tree d1aea3e8f4fd777284b9522015d0696e1fdc036a\nparent e56da2782c7316f490dce8f407c418d36b23e515\nauthor Manish Goregaokar <manishsmail@gmail.com> 1504473247 -0700\ncommitter Manish Goregaokar <manishsmail@gmail.com> 1504473260 -0700\n\nFix unit_expr expectations and changelog entry\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/35eda0531a51115cdae893fac68b6fae976cab1f", "html_url": "https://github.com/rust-lang/rust/commit/35eda0531a51115cdae893fac68b6fae976cab1f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/35eda0531a51115cdae893fac68b6fae976cab1f/comments", "author": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e56da2782c7316f490dce8f407c418d36b23e515", "url": "https://api.github.com/repos/rust-lang/rust/commits/e56da2782c7316f490dce8f407c418d36b23e515", "html_url": "https://github.com/rust-lang/rust/commit/e56da2782c7316f490dce8f407c418d36b23e515"}], "stats": {"total": 59, "additions": 33, "deletions": 26}, "files": [{"sha": "94cf6748d0bd2b83a0d640204e95b55692df9734", "filename": "CHANGELOG.md", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/35eda0531a51115cdae893fac68b6fae976cab1f/CHANGELOG.md", "raw_url": "https://github.com/rust-lang/rust/raw/35eda0531a51115cdae893fac68b6fae976cab1f/CHANGELOG.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/CHANGELOG.md?ref=35eda0531a51115cdae893fac68b6fae976cab1f", "patch": "@@ -1,7 +1,10 @@\n # Change Log\n All notable changes to this project will be documented in this file.\n \n-## 0.0.156\n+## Master\n+* New lint: [`unit_expr`]\n+\n+## 0.0.156 - 2017-09-03\n * Update to *rustc 1.22.0-nightly (744dd6c1d 2017-09-02)*\n \n ## 0.0.155\n@@ -602,6 +605,7 @@ All notable changes to this project will be documented in this file.\n [`type_complexity`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#type_complexity\n [`unicode_not_nfc`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#unicode_not_nfc\n [`unit_cmp`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#unit_cmp\n+[`unit_expr`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#unit_expr\n [`unnecessary_cast`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#unnecessary_cast\n [`unnecessary_mut_passed`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#unnecessary_mut_passed\n [`unnecessary_operation`]: https://rust-lang-nursery.github.io/rust-clippy/master/index.html#unnecessary_operation"}, {"sha": "95d45bed1337c0057320e6700e307e7b5cb1931d", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/35eda0531a51115cdae893fac68b6fae976cab1f/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/35eda0531a51115cdae893fac68b6fae976cab1f/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=35eda0531a51115cdae893fac68b6fae976cab1f", "patch": "@@ -91,8 +91,8 @@ pub mod functions;\n pub mod identity_op;\n pub mod if_let_redundant_pattern_matching;\n pub mod if_not_else;\n-pub mod is_unit_expr;\n pub mod infinite_iter;\n+pub mod is_unit_expr;\n pub mod items_after_statements;\n pub mod large_enum_variant;\n pub mod len_zero;\n@@ -423,6 +423,7 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n         identity_op::IDENTITY_OP,\n         if_let_redundant_pattern_matching::IF_LET_REDUNDANT_PATTERN_MATCHING,\n         infinite_iter::INFINITE_ITER,\n+        is_unit_expr::UNIT_EXPR,\n         large_enum_variant::LARGE_ENUM_VARIANT,\n         len_zero::LEN_WITHOUT_IS_EMPTY,\n         len_zero::LEN_ZERO,\n@@ -506,7 +507,6 @@ pub fn register_plugins(reg: &mut rustc_plugin::Registry) {\n         panic::PANIC_PARAMS,\n         partialeq_ne_impl::PARTIALEQ_NE_IMPL,\n         precedence::PRECEDENCE,\n-        is_unit_expr::UNIT_EXPR,\n         print::PRINT_WITH_NEWLINE,\n         ptr::CMP_NULL,\n         ptr::MUT_FROM_REF,"}, {"sha": "2d9fcfff74f884fe7ac4d921a4a847c491fde769", "filename": "tests/ui/is_unit_expr.stderr", "status": "modified", "additions": 26, "deletions": 23, "changes": 49, "blob_url": "https://github.com/rust-lang/rust/blob/35eda0531a51115cdae893fac68b6fae976cab1f/tests%2Fui%2Fis_unit_expr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/35eda0531a51115cdae893fac68b6fae976cab1f/tests%2Fui%2Fis_unit_expr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fis_unit_expr.stderr?ref=35eda0531a51115cdae893fac68b6fae976cab1f", "patch": "@@ -1,52 +1,55 @@\n error: This expression evaluates to the Unit type ()\n-  --> $DIR/is_unit_expr.rs:9:13\n+  --> $DIR/is_unit_expr.rs:8:13\n    |\n-9  |       let x = {\n+8  |       let x = {\n    |  _____________^\n-10 | |         \"foo\";\n-11 | |         \"baz\";\n-12 | |     };\n+9  | |         \"foo\";\n+10 | |         \"baz\";\n+11 | |     };\n    | |_____^\n    |\n    = note: `-D unit-expr` implied by `-D warnings`\n note: Consider removing the trailing semicolon\n-  --> $DIR/is_unit_expr.rs:11:9\n+  --> $DIR/is_unit_expr.rs:10:9\n    |\n-11 |         \"baz\";\n+10 |         \"baz\";\n    |         ^^^^^^\n \n error: This expression evaluates to the Unit type ()\n-  --> $DIR/is_unit_expr.rs:23:13\n+  --> $DIR/is_unit_expr.rs:22:13\n    |\n-23 |       let z = if true{\n+22 |       let z = if true {\n    |  _____________^\n-24 | |         \"foo\";\n-25 | |     } else{\n-26 | |         \"bar\";\n-27 | |     };\n+23 | |         \"foo\";\n+24 | |     } else {\n+25 | |         \"bar\";\n+26 | |     };\n    | |_____^\n    |\n note: Consider removing the trailing semicolon\n-  --> $DIR/is_unit_expr.rs:26:9\n+  --> $DIR/is_unit_expr.rs:25:9\n    |\n-26 |         \"bar\";\n+25 |         \"bar\";\n    |         ^^^^^^\n \n error: This expression evaluates to the Unit type ()\n-  --> $DIR/is_unit_expr.rs:39:14\n+  --> $DIR/is_unit_expr.rs:40:14\n    |\n-39 |       let a3 = match a1 {\n+40 |       let a3 = match a1 {\n    |  ______________^\n-40 | |         Some(x) => {x;},\n-41 | |         _ => {0;},\n-42 | |     };\n+41 | |         Some(x) => {\n+42 | |             x;\n+43 | |         },\n+...  |\n+46 | |         },\n+47 | |     };\n    | |_____^\n    |\n note: Consider removing the trailing semicolon\n-  --> $DIR/is_unit_expr.rs:40:21\n+  --> $DIR/is_unit_expr.rs:42:13\n    |\n-40 |         Some(x) => {x;},\n-   |                     ^^\n+42 |             x;\n+   |             ^^\n \n error: aborting due to 3 previous errors\n "}]}