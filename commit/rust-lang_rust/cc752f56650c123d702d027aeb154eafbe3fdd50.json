{"sha": "cc752f56650c123d702d027aeb154eafbe3fdd50", "node_id": "C_kwDOAAsO6NoAKGNjNzUyZjU2NjUwYzEyM2Q3MDJkMDI3YWViMTU0ZWFmYmUzZmRkNTA", "commit": {"author": {"name": "Maybe Waffle", "email": "waffle.lapkin@gmail.com", "date": "2022-07-24T21:54:47Z"}, "committer": {"name": "Maybe Waffle", "email": "waffle.lapkin@gmail.com", "date": "2022-10-25T13:25:52Z"}, "message": "Feature gate `impl_trait_in_fn_trait_return`", "tree": {"sha": "5f2a4c514df349c9d1dec7adbd159ba227983338", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5f2a4c514df349c9d1dec7adbd159ba227983338"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cc752f56650c123d702d027aeb154eafbe3fdd50", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cc752f56650c123d702d027aeb154eafbe3fdd50", "html_url": "https://github.com/rust-lang/rust/commit/cc752f56650c123d702d027aeb154eafbe3fdd50", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cc752f56650c123d702d027aeb154eafbe3fdd50/comments", "author": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "WaffleLapkin", "id": 38225716, "node_id": "MDQ6VXNlcjM4MjI1NzE2", "avatar_url": "https://avatars.githubusercontent.com/u/38225716?v=4", "gravatar_id": "", "url": "https://api.github.com/users/WaffleLapkin", "html_url": "https://github.com/WaffleLapkin", "followers_url": "https://api.github.com/users/WaffleLapkin/followers", "following_url": "https://api.github.com/users/WaffleLapkin/following{/other_user}", "gists_url": "https://api.github.com/users/WaffleLapkin/gists{/gist_id}", "starred_url": "https://api.github.com/users/WaffleLapkin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/WaffleLapkin/subscriptions", "organizations_url": "https://api.github.com/users/WaffleLapkin/orgs", "repos_url": "https://api.github.com/users/WaffleLapkin/repos", "events_url": "https://api.github.com/users/WaffleLapkin/events{/privacy}", "received_events_url": "https://api.github.com/users/WaffleLapkin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "00f22771f6fb625fd66122fded49d5bee7083707", "url": "https://api.github.com/repos/rust-lang/rust/commits/00f22771f6fb625fd66122fded49d5bee7083707", "html_url": "https://github.com/rust-lang/rust/commit/00f22771f6fb625fd66122fded49d5bee7083707"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "b7cda13fa4b709426a91a2fc374c3e7346283587", "filename": "compiler/rustc_ast_lowering/src/path.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/cc752f56650c123d702d027aeb154eafbe3fdd50/compiler%2Frustc_ast_lowering%2Fsrc%2Fpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cc752f56650c123d702d027aeb154eafbe3fdd50/compiler%2Frustc_ast_lowering%2Fsrc%2Fpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_lowering%2Fsrc%2Fpath.rs?ref=cc752f56650c123d702d027aeb154eafbe3fdd50", "patch": "@@ -363,7 +363,10 @@ impl<'a, 'hir> LoweringContext<'a, 'hir> {\n             // fn f(_: impl Fn() -> impl Debug) -> impl Fn() -> impl Debug\n             // //      disallowed --^^^^^^^^^^        allowed --^^^^^^^^^^\n             // ```\n-            FnRetTy::Ty(ty) if matches!(itctx, ImplTraitContext::ReturnPositionOpaqueTy { .. }) => {\n+            FnRetTy::Ty(ty)\n+                if matches!(itctx, ImplTraitContext::ReturnPositionOpaqueTy { .. })\n+                    && self.tcx.features().impl_trait_in_fn_trait_return =>\n+            {\n                 self.lower_ty(&ty, itctx)\n             }\n             FnRetTy::Ty(ty) => {"}, {"sha": "5656409c0d47165f9476ca71f52a173bc86f64b4", "filename": "compiler/rustc_feature/src/active.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/cc752f56650c123d702d027aeb154eafbe3fdd50/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cc752f56650c123d702d027aeb154eafbe3fdd50/compiler%2Frustc_feature%2Fsrc%2Factive.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Factive.rs?ref=cc752f56650c123d702d027aeb154eafbe3fdd50", "patch": "@@ -414,6 +414,8 @@ declare_features! (\n     (active, half_open_range_patterns_in_slices, \"CURRENT_RUSTC_VERSION\", Some(67264), None),\n     /// Allows `if let` guard in match arms.\n     (active, if_let_guard, \"1.47.0\", Some(51114), None),\n+    /// Allows `impl Trait` as output type in `Fn` traits in return position of functions.\n+    (active, impl_trait_in_fn_trait_return, \"1.64.0\", Some(99697), None),\n     /// Allows using imported `main` function\n     (active, imported_main, \"1.53.0\", Some(28937), None),\n     /// Allows associated types in inherent impls."}, {"sha": "21016602ff8d290cd89029297bc94970b79a7fac", "filename": "compiler/rustc_span/src/symbol.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/cc752f56650c123d702d027aeb154eafbe3fdd50/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cc752f56650c123d702d027aeb154eafbe3fdd50/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fsymbol.rs?ref=cc752f56650c123d702d027aeb154eafbe3fdd50", "patch": "@@ -813,6 +813,7 @@ symbols! {\n         impl_lint_pass,\n         impl_macros,\n         impl_trait_in_bindings,\n+        impl_trait_in_fn_trait_return,\n         implied_by,\n         import,\n         import_name_type,"}]}