{"sha": "3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNhNmU5NmU4YmM4YjcyODVjNWE5YjM1N2QwZTVlOGRkOWMxOTFlZGY=", "commit": {"author": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2019-09-25T08:28:53Z"}, "committer": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2019-09-25T08:28:53Z"}, "message": "Allow simd_insert and simd_extract in const_fn", "tree": {"sha": "8b4df8d6275396722fcf1c0fa4eb481434af9741", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8b4df8d6275396722fcf1c0fa4eb481434af9741"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "html_url": "https://github.com/rust-lang/rust/commit/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/comments", "author": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e6239bb81796715f66ec468b70d8779f8ccac6bd", "url": "https://api.github.com/repos/rust-lang/rust/commits/e6239bb81796715f66ec468b70d8779f8ccac6bd", "html_url": "https://github.com/rust-lang/rust/commit/e6239bb81796715f66ec468b70d8779f8ccac6bd"}], "stats": {"total": 294, "additions": 4, "deletions": 290}, "files": [{"sha": "8a6dcd1d2b476f2cce48af9e796c864701ad0f0b", "filename": "src/librustc_mir/transform/qualify_consts.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/src%2Flibrustc_mir%2Ftransform%2Fqualify_consts.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/src%2Flibrustc_mir%2Ftransform%2Fqualify_consts.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Ftransform%2Fqualify_consts.rs?ref=3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "patch": "@@ -557,6 +557,8 @@ impl Qualif for IsNotPromotable {\n                             | \"saturating_add\"\n                             | \"saturating_sub\"\n                             | \"transmute\"\n+                            | \"simd_insert\"\n+                            | \"simd_extract\"\n                             => return true,\n \n                             _ => {}"}, {"sha": "bbfae997e724196bc0bb5ae5a6137219a895d3b9", "filename": "src/test/ui/consts/const-eval/simd/insert_extract-fail.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract-fail.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract-fail.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract-fail.rs?ref=3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "patch": "@@ -1,4 +1,4 @@\n-// compile-flags: -Zunleash-the-miri-inside-of-you\n+#![feature(const_fn)]\n #![feature(repr_simd)]\n #![feature(platform_intrinsics)]\n #![allow(non_camel_case_types)]"}, {"sha": "d3462d802ea4e9c6fd666edabea7d54baac0b13b", "filename": "src/test/ui/consts/const-eval/simd/insert_extract.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.rs?ref=3a6e96e8bc8b7285c5a9b357d0e5e8dd9c191edf", "patch": "@@ -1,5 +1,5 @@\n // run-pass\n-// compile-flags: -Zunleash-the-miri-inside-of-you\n+#![feature(const_fn)]\n #![feature(repr_simd)]\n #![feature(platform_intrinsics)]\n #![allow(non_camel_case_types)]"}, {"sha": "8975241403e7427c86f3ee418e0fdc7738ff5389", "filename": "src/test/ui/consts/const-eval/simd/insert_extract.stderr", "status": "removed", "additions": 0, "deletions": 288, "changes": 288, "blob_url": "https://github.com/rust-lang/rust/blob/e6239bb81796715f66ec468b70d8779f8ccac6bd/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/e6239bb81796715f66ec468b70d8779f8ccac6bd/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconsts%2Fconst-eval%2Fsimd%2Finsert_extract.stderr?ref=e6239bb81796715f66ec468b70d8779f8ccac6bd", "patch": "@@ -1,288 +0,0 @@\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:22:9\n-   |\n-LL |         assert_eq!(X0, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:22:9\n-   |\n-LL |         assert_eq!(X0, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:22:9\n-   |\n-LL |         assert_eq!(X0, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:23:9\n-   |\n-LL |         assert_eq!(Y0, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:23:9\n-   |\n-LL |         assert_eq!(Y0, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:23:9\n-   |\n-LL |         assert_eq!(Y0, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:32:9\n-   |\n-LL |         assert_eq!(X0, 13);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:32:9\n-   |\n-LL |         assert_eq!(X0, 13);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:32:9\n-   |\n-LL |         assert_eq!(X0, 13);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:33:9\n-   |\n-LL |         assert_eq!(X1, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:33:9\n-   |\n-LL |         assert_eq!(X1, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:33:9\n-   |\n-LL |         assert_eq!(X1, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:34:9\n-   |\n-LL |         assert_eq!(Y0, 13);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:34:9\n-   |\n-LL |         assert_eq!(Y0, 13);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:34:9\n-   |\n-LL |         assert_eq!(Y0, 13);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:35:9\n-   |\n-LL |         assert_eq!(Y1, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:35:9\n-   |\n-LL |         assert_eq!(Y1, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:35:9\n-   |\n-LL |         assert_eq!(Y1, 42);\n-   |         ^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:46:9\n-   |\n-LL |         assert_eq!(X0, 13.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:46:9\n-   |\n-LL |         assert_eq!(X0, 13.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:46:9\n-   |\n-LL |         assert_eq!(X0, 13.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:47:9\n-   |\n-LL |         assert_eq!(X1, 42.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:47:9\n-   |\n-LL |         assert_eq!(X1, 42.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:47:9\n-   |\n-LL |         assert_eq!(X1, 42.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:48:9\n-   |\n-LL |         assert_eq!(X2, 15.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:48:9\n-   |\n-LL |         assert_eq!(X2, 15.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:48:9\n-   |\n-LL |         assert_eq!(X2, 15.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:49:9\n-   |\n-LL |         assert_eq!(Y0, 13.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:49:9\n-   |\n-LL |         assert_eq!(Y0, 13.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:49:9\n-   |\n-LL |         assert_eq!(Y0, 13.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:50:9\n-   |\n-LL |         assert_eq!(Y1, 42.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:50:9\n-   |\n-LL |         assert_eq!(Y1, 42.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:50:9\n-   |\n-LL |         assert_eq!(Y1, 42.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:51:9\n-   |\n-LL |         assert_eq!(Y2, 15.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:51:9\n-   |\n-LL |         assert_eq!(Y2, 15.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-\n-warning: skipping const checks\n-  --> $DIR/insert_extract.rs:51:9\n-   |\n-LL |         assert_eq!(Y2, 15.);\n-   |         ^^^^^^^^^^^^^^^^^^^^\n-   |\n-   = note: this warning originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)\n-"}]}