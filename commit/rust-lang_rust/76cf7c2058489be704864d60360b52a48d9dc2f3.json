{"sha": "76cf7c2058489be704864d60360b52a48d9dc2f3", "node_id": "C_kwDOAAsO6NoAKDc2Y2Y3YzIwNTg0ODliZTcwNDg2NGQ2MDM2MGI1MmE0OGQ5ZGMyZjM", "commit": {"author": {"name": "antoyo", "email": "antoyo@users.noreply.github.com", "date": "2022-03-30T13:47:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-03-30T13:47:12Z"}, "message": "Merge pull request #150 from bjorn3/bootstrap_missing_vendor_intrinsics\n\nAdd missing vendor intrinsics", "tree": {"sha": "251a41814254971dac2924c5ffe006f8bdb007c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/251a41814254971dac2924c5ffe006f8bdb007c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/76cf7c2058489be704864d60360b52a48d9dc2f3", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJiRF9gCRBK7hj4Ov3rIwAA1WQIAIaEapxiNZa4zq6RWLui0YC4\n5ropMEmDSrb6h+NPOELTcaGZwDK0PRC/bjYBqi/jTgOzH/csX368mEkPI9ylQEba\n3SVvHm+o/6SgkZSnO1K+zrQxtEV9MsrVvjPP30N4z7pPFfd5d+EdTbaJxuy0kDy7\n/IftJEcbhkAKukvZSdeXmhtqSi/Oj0xcqDhMrpFyRqzOkQM56Z/1TiT8rJ7HVUmo\nXOq0mPhU4+2O2AMcvwrYmW9iYSWpa/ksXC/uUZY5OSV9v9wbKL9PLeFDlF2z7a7n\npAxLWremCzLrkxpRH8QR4esYKdG/QDeiIoLDGEOg94LAuYmShtN1xCCNgoUoRdA=\n=NP22\n-----END PGP SIGNATURE-----\n", "payload": "tree 251a41814254971dac2924c5ffe006f8bdb007c3\nparent a445bcb53d5f62d188ef9c1bb107668293fd9013\nparent 9bb797c2aef1a5175185f4c7d25fa23eaaeec326\nauthor antoyo <antoyo@users.noreply.github.com> 1648648032 -0400\ncommitter GitHub <noreply@github.com> 1648648032 -0400\n\nMerge pull request #150 from bjorn3/bootstrap_missing_vendor_intrinsics\n\nAdd missing vendor intrinsics"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/76cf7c2058489be704864d60360b52a48d9dc2f3", "html_url": "https://github.com/rust-lang/rust/commit/76cf7c2058489be704864d60360b52a48d9dc2f3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/76cf7c2058489be704864d60360b52a48d9dc2f3/comments", "author": {"login": "antoyo", "id": 584972, "node_id": "MDQ6VXNlcjU4NDk3Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/584972?v=4", "gravatar_id": "", "url": "https://api.github.com/users/antoyo", "html_url": "https://github.com/antoyo", "followers_url": "https://api.github.com/users/antoyo/followers", "following_url": "https://api.github.com/users/antoyo/following{/other_user}", "gists_url": "https://api.github.com/users/antoyo/gists{/gist_id}", "starred_url": "https://api.github.com/users/antoyo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/antoyo/subscriptions", "organizations_url": "https://api.github.com/users/antoyo/orgs", "repos_url": "https://api.github.com/users/antoyo/repos", "events_url": "https://api.github.com/users/antoyo/events{/privacy}", "received_events_url": "https://api.github.com/users/antoyo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a445bcb53d5f62d188ef9c1bb107668293fd9013", "url": "https://api.github.com/repos/rust-lang/rust/commits/a445bcb53d5f62d188ef9c1bb107668293fd9013", "html_url": "https://github.com/rust-lang/rust/commit/a445bcb53d5f62d188ef9c1bb107668293fd9013"}, {"sha": "9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "url": "https://api.github.com/repos/rust-lang/rust/commits/9bb797c2aef1a5175185f4c7d25fa23eaaeec326", "html_url": "https://github.com/rust-lang/rust/commit/9bb797c2aef1a5175185f4c7d25fa23eaaeec326"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "d88fe9bca2ac5ef070eec64ed76852746508713b", "filename": "src/base.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/76cf7c2058489be704864d60360b52a48d9dc2f3/src%2Fbase.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76cf7c2058489be704864d60360b52a48d9dc2f3/src%2Fbase.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbase.rs?ref=76cf7c2058489be704864d60360b52a48d9dc2f3", "patch": "@@ -79,7 +79,10 @@ pub fn compile_codegen_unit<'tcx>(tcx: TyCtxt<'tcx>, cgu_name: Symbol, supports_\n         // TODO(antoyo): only set on x86 platforms.\n         context.add_command_line_option(\"-masm=intel\");\n         // TODO(antoyo): only add the following cli argument if the feature is supported.\n+        context.add_command_line_option(\"-msse2\");\n         context.add_command_line_option(\"-mavx2\");\n+        context.add_command_line_option(\"-msha\");\n+        context.add_command_line_option(\"-mpclmul\");\n         // FIXME(antoyo): the following causes an illegal instruction on vmovdqu64 in std_example on my CPU.\n         // Only add if the CPU supports it.\n         //context.add_command_line_option(\"-mavx512f\");"}, {"sha": "7634c649bc34327dd5c6fe7ee2b3ed90fc8e2aca", "filename": "src/intrinsic/llvm.rs", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/76cf7c2058489be704864d60360b52a48d9dc2f3/src%2Fintrinsic%2Fllvm.rs", "raw_url": "https://github.com/rust-lang/rust/raw/76cf7c2058489be704864d60360b52a48d9dc2f3/src%2Fintrinsic%2Fllvm.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fintrinsic%2Fllvm.rs?ref=76cf7c2058489be704864d60360b52a48d9dc2f3", "patch": "@@ -16,6 +16,7 @@ pub fn intrinsic<'gcc, 'tcx>(name: &str, cx: &CodegenCx<'gcc, 'tcx>) -> Function\n             \"llvm.x86.avx2.pshuf.b\" => \"__builtin_ia32_pshufb256\",\n             \"llvm.x86.avx2.pslli.d\" => \"__builtin_ia32_pslldi256\",\n             \"llvm.x86.avx2.psrli.d\" => \"__builtin_ia32_psrldi256\",\n+            \"llvm.x86.sse2.pslli.q\" => \"__builtin_ia32_psllqi128\",\n             \"llvm.x86.avx.vzeroupper\" => \"__builtin_ia32_vzeroupper\",\n             \"llvm.x86.avx2.vperm2i128\" => \"__builtin_ia32_permti256\",\n             \"llvm.x86.avx2.psrli.w\" => \"__builtin_ia32_psrlwi256\",\n@@ -28,6 +29,11 @@ pub fn intrinsic<'gcc, 'tcx>(name: &str, cx: &CodegenCx<'gcc, 'tcx>) -> Function\n             \"llvm.x86.avx2.pabs.b\" => \"__builtin_ia32_pabsb256\",\n             \"llvm.x86.avx2.psrli.q\" => \"__builtin_ia32_psrlqi256\",\n             \"llvm.x86.sse41.pblendvb\" => \"__builtin_ia32_pblendvb128\",\n+            \"llvm.x86.sse41.pblendw\" => \"__builtin_ia32_pblendw128\",\n+            \"llvm.x86.sse42.crc32.32.8\" => \"__builtin_ia32_crc32qi\",\n+            \"llvm.x86.sse42.crc32.32.16\" => \"__builtin_ia32_crc32hi\",\n+            \"llvm.x86.sse42.crc32.32.32\" => \"__builtin_ia32_crc32si\",\n+            \"llvm.x86.sse42.crc32.64.64\" => \"__builtin_ia32_crc32di\",\n             \"llvm.x86.avx2.pavg.w\" => \"__builtin_ia32_pavgw256\",\n             \"llvm.x86.avx2.pavg.b\" => \"__builtin_ia32_pavgb256\",\n             \"llvm.x86.avx2.phadd.w\" => \"__builtin_ia32_phaddw256\",\n@@ -113,6 +119,14 @@ pub fn intrinsic<'gcc, 'tcx>(name: &str, cx: &CodegenCx<'gcc, 'tcx>) -> Function\n             \"llvm.x86.avx2.psrlv.q\" => \"__builtin_ia32_psrlv2di\",\n             \"llvm.x86.avx2.psrlv.q.256\" => \"__builtin_ia32_psrlv4di\",\n             \"llvm.x86.sse.sqrt.ss\" => \"__builtin_ia32_sqrtss\",\n+            \"llvm.x86.pclmulqdq\" => \"__builtin_ia32_pclmulqdq128\",\n+            \"llvm.x86.sha1msg1\" => \"__builtin_ia32_sha1msg1\",\n+            \"llvm.x86.sha1msg2\" => \"__builtin_ia32_sha1msg2\",\n+            \"llvm.x86.sha1nexte\" => \"__builtin_ia32_sha1nexte\",\n+            \"llvm.x86.sha1rnds4\" => \"__builtin_ia32_sha1rnds4\",\n+            \"llvm.x86.sha256msg1\" => \"__builtin_ia32_sha256msg1\",\n+            \"llvm.x86.sha256msg2\" => \"__builtin_ia32_sha256msg2\",\n+            \"llvm.x86.sha256rnds2\" => \"__builtin_ia32_sha256rnds2\",\n \n             \"llvm.sqrt.v2f64\" => \"__builtin_ia32_sqrtpd\",\n             _ => unimplemented!(\"***** unsupported LLVM intrinsic {}\", name),"}]}