{"sha": "1db9eae03385d8e544968b0c6c6812d8cfb28632", "node_id": "C_kwDOAAsO6NoAKDFkYjllYWUwMzM4NWQ4ZTU0NDk2OGIwYzZjNjgxMmQ4Y2ZiMjg2MzI", "commit": {"author": {"name": "Dylan DPC", "email": "99973273+Dylan-DPC@users.noreply.github.com", "date": "2023-03-29T08:37:27Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-03-29T08:37:27Z"}, "message": "Rollup merge of #109534 - petrochenkov:noprimuse, r=GuillaumeGomez\n\nrustdoc: Unsupport importing `doc(primitive)` and `doc(keyword)` modules\n\nThese are internal features used for a specific purpose, and modules without imports are enough for that purpose.", "tree": {"sha": "679487180005b62cc7e6104303fd5c0c938d4272", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/679487180005b62cc7e6104303fd5c0c938d4272"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1db9eae03385d8e544968b0c6c6812d8cfb28632", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJkI/jHCRBK7hj4Ov3rIwAALkYIAFuzqJwOynAN53KkkIMc4ur6\nHkf1hnYFynJTvlg0vlEfKSJ5dASyv6BBTYDFHHJ12gNBjMSic8Cqs5NHDzJTotGd\n+Fr9DZa6HHxmY7YmfPDkczucEJXjRE00Lroe3/kavEHJWICdqVfGqZDlcAWaffJX\nwbwt0PzvQHqNENSqy/OJ9uTVNj0fQ8n/ErbpfT9ngs8RhM4vt8GeMrnl46E8g0FQ\nbm4nTYrdyXZ3ltrnzEe5WM8l9iOIkANMYB7eGDByVBBwNUG93j6MQ7ZQhXaOKhJa\ntCiZvzRWyTufDFwPxojmX/Q7mfjK6d/LIOkylKP3uoRUNvn26uoKqi+at6lsDCo=\n=0Efc\n-----END PGP SIGNATURE-----\n", "payload": "tree 679487180005b62cc7e6104303fd5c0c938d4272\nparent 777df024b19d39e52aee479e7c79d767cf1499af\nparent 52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88\nauthor Dylan DPC <99973273+Dylan-DPC@users.noreply.github.com> 1680079047 +0530\ncommitter GitHub <noreply@github.com> 1680079047 +0530\n\nRollup merge of #109534 - petrochenkov:noprimuse, r=GuillaumeGomez\n\nrustdoc: Unsupport importing `doc(primitive)` and `doc(keyword)` modules\n\nThese are internal features used for a specific purpose, and modules without imports are enough for that purpose.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1db9eae03385d8e544968b0c6c6812d8cfb28632", "html_url": "https://github.com/rust-lang/rust/commit/1db9eae03385d8e544968b0c6c6812d8cfb28632", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1db9eae03385d8e544968b0c6c6812d8cfb28632/comments", "author": {"login": "Dylan-DPC", "id": 99973273, "node_id": "U_kgDOBfV4mQ", "avatar_url": "https://avatars.githubusercontent.com/u/99973273?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Dylan-DPC", "html_url": "https://github.com/Dylan-DPC", "followers_url": "https://api.github.com/users/Dylan-DPC/followers", "following_url": "https://api.github.com/users/Dylan-DPC/following{/other_user}", "gists_url": "https://api.github.com/users/Dylan-DPC/gists{/gist_id}", "starred_url": "https://api.github.com/users/Dylan-DPC/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Dylan-DPC/subscriptions", "organizations_url": "https://api.github.com/users/Dylan-DPC/orgs", "repos_url": "https://api.github.com/users/Dylan-DPC/repos", "events_url": "https://api.github.com/users/Dylan-DPC/events{/privacy}", "received_events_url": "https://api.github.com/users/Dylan-DPC/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "777df024b19d39e52aee479e7c79d767cf1499af", "url": "https://api.github.com/repos/rust-lang/rust/commits/777df024b19d39e52aee479e7c79d767cf1499af", "html_url": "https://github.com/rust-lang/rust/commit/777df024b19d39e52aee479e7c79d767cf1499af"}, {"sha": "52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "url": "https://api.github.com/repos/rust-lang/rust/commits/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88", "html_url": "https://github.com/rust-lang/rust/commit/52b15b4bf9f3a24b44017fe4b1c114a6d91f1e88"}], "stats": {"total": 19, "additions": 1, "deletions": 18}, "files": [{"sha": "909e0a07e4cb2992440da02d7d813637e6189153", "filename": "src/librustdoc/clean/types.rs", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/1db9eae03385d8e544968b0c6c6812d8cfb28632/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1db9eae03385d8e544968b0c6c6812d8cfb28632/src%2Flibrustdoc%2Fclean%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fclean%2Ftypes.rs?ref=1db9eae03385d8e544968b0c6c6812d8cfb28632", "patch": "@@ -232,14 +232,6 @@ impl ExternalCrate {\n                         hir::ItemKind::Mod(_) => {\n                             as_keyword(Res::Def(DefKind::Mod, id.owner_id.to_def_id()))\n                         }\n-                        hir::ItemKind::Use(path, hir::UseKind::Single)\n-                            if tcx.visibility(id.owner_id).is_public() =>\n-                        {\n-                            path.res\n-                                .iter()\n-                                .find_map(|res| as_keyword(res.expect_non_local()))\n-                                .map(|(_, prim)| (id.owner_id.to_def_id(), prim))\n-                        }\n                         _ => None,\n                     }\n                 })\n@@ -302,15 +294,6 @@ impl ExternalCrate {\n                         hir::ItemKind::Mod(_) => {\n                             as_primitive(Res::Def(DefKind::Mod, id.owner_id.to_def_id()))\n                         }\n-                        hir::ItemKind::Use(path, hir::UseKind::Single)\n-                            if tcx.visibility(id.owner_id).is_public() =>\n-                        {\n-                            path.res\n-                                .iter()\n-                                .find_map(|res| as_primitive(res.expect_non_local()))\n-                                // Pretend the primitive is local.\n-                                .map(|(_, prim)| (id.owner_id.to_def_id(), prim))\n-                        }\n                         _ => None,\n                     }\n                 })"}, {"sha": "614f2c1c08e87a4af95c4353b573b12d845383a2", "filename": "tests/rustdoc/issue-15318-2.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1db9eae03385d8e544968b0c6c6812d8cfb28632/tests%2Frustdoc%2Fissue-15318-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1db9eae03385d8e544968b0c6c6812d8cfb28632/tests%2Frustdoc%2Fissue-15318-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fissue-15318-2.rs?ref=1db9eae03385d8e544968b0c6c6812d8cfb28632", "patch": "@@ -6,7 +6,7 @@ extern crate issue_15318;\n \n pub use issue_15318::ptr;\n \n-// @has issue_15318_2/fn.bar.html \\\n+// @!has issue_15318_2/fn.bar.html \\\n //          '//*[@href=\"primitive.pointer.html\"]' \\\n //          '*mut T'\n pub fn bar<T>(ptr: *mut T) {}"}]}