{"sha": "d817b56f1d7d485e7a2e466730adf2a618e3b077", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4MTdiNTZmMWQ3ZDQ4NWU3YTJlNDY2NzMwYWRmMmE2MThlM2IwNzc=", "commit": {"author": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2020-09-26T18:12:30Z"}, "committer": {"name": "Caleb Zulawski", "email": "caleb.zulawski@gmail.com", "date": "2020-09-26T18:12:30Z"}, "message": "Manually implement some traits, instead of derive", "tree": {"sha": "9abba35852715d233e8359e74a75afa674dd5575", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9abba35852715d233e8359e74a75afa674dd5575"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d817b56f1d7d485e7a2e466730adf2a618e3b077", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d817b56f1d7d485e7a2e466730adf2a618e3b077", "html_url": "https://github.com/rust-lang/rust/commit/d817b56f1d7d485e7a2e466730adf2a618e3b077", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d817b56f1d7d485e7a2e466730adf2a618e3b077/comments", "author": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebzulawski", "id": 563826, "node_id": "MDQ6VXNlcjU2MzgyNg==", "avatar_url": "https://avatars.githubusercontent.com/u/563826?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebzulawski", "html_url": "https://github.com/calebzulawski", "followers_url": "https://api.github.com/users/calebzulawski/followers", "following_url": "https://api.github.com/users/calebzulawski/following{/other_user}", "gists_url": "https://api.github.com/users/calebzulawski/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebzulawski/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebzulawski/subscriptions", "organizations_url": "https://api.github.com/users/calebzulawski/orgs", "repos_url": "https://api.github.com/users/calebzulawski/repos", "events_url": "https://api.github.com/users/calebzulawski/events{/privacy}", "received_events_url": "https://api.github.com/users/calebzulawski/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "167c3c8100bfbe704ecf3743cda2141c6cb6d15a", "url": "https://api.github.com/repos/rust-lang/rust/commits/167c3c8100bfbe704ecf3743cda2141c6cb6d15a", "html_url": "https://github.com/rust-lang/rust/commit/167c3c8100bfbe704ecf3743cda2141c6cb6d15a"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "ecf2b76ceb0d315a33cb4388f6cfb3c896f824f7", "filename": "crates/core_simd/src/macros.rs", "status": "modified", "additions": 27, "deletions": 2, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/d817b56f1d7d485e7a2e466730adf2a618e3b077/crates%2Fcore_simd%2Fsrc%2Fmacros.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d817b56f1d7d485e7a2e466730adf2a618e3b077/crates%2Fcore_simd%2Fsrc%2Fmacros.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fcore_simd%2Fsrc%2Fmacros.rs?ref=d817b56f1d7d485e7a2e466730adf2a618e3b077", "patch": "@@ -138,6 +138,32 @@ macro_rules! call_counting_args {\n /// Implements common traits on the specified vector `$name`, holding multiple `$lanes` of `$type`.\n macro_rules! base_vector_traits {\n     { $name:path => [$type:ty; $lanes:literal] } => {\n+        impl Copy for $name {}\n+\n+        impl Clone for $name {\n+            fn clone(&self) -> Self {\n+                *self\n+            }\n+        }\n+\n+        impl Default for $name {\n+            fn default() -> Self {\n+                Self::splat(<$type>::default())\n+            }\n+        }\n+\n+        impl PartialEq for $name {\n+            fn eq(&self, other: &Self) -> bool {\n+                AsRef::<[$type]>::as_ref(self) == AsRef::<[$type]>::as_ref(other)\n+            }\n+        }\n+\n+        impl PartialOrd for $name {\n+            fn partial_cmp(&self, other: &Self) -> Option<core::cmp::Ordering> {\n+                AsRef::<[$type]>::as_ref(self).partial_cmp(AsRef::<[$type]>::as_ref(other))\n+            }\n+        }\n+\n         // array references\n         impl AsRef<[$type; $lanes]> for $name {\n             #[inline]\n@@ -196,7 +222,6 @@ macro_rules! define_vector {\n     { def $(#[$attr:meta])* | $name:ident | $($itype:ty)* } => {\n         $(#[$attr])*\n         #[allow(non_camel_case_types)]\n-        #[derive(Copy, Clone, Default, PartialEq, PartialOrd)]\n         #[repr(simd)]\n         pub struct $name($($itype),*);\n     };\n@@ -233,7 +258,7 @@ macro_rules! define_mask_vector {\n     { def $(#[$attr:meta])* | $name:ident | $($itype:ty)* } => {\n         $(#[$attr])*\n         #[allow(non_camel_case_types)]\n-        #[derive(Copy, Clone, Default, PartialEq, PartialOrd, Eq, Ord)]\n+        #[derive(Eq, Ord)]\n         #[repr(simd)]\n         pub struct $name($($itype),*);\n     };"}]}