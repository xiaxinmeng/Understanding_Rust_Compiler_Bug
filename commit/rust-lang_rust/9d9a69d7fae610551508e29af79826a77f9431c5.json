{"sha": "9d9a69d7fae610551508e29af79826a77f9431c5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjlkOWE2OWQ3ZmFlNjEwNTUxNTA4ZTI5YWY3OTgyNmE3N2Y5NDMxYzU=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2018-01-22T09:21:22Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2018-03-08T07:34:08Z"}, "message": "Print whether the stackframe is for a promoted", "tree": {"sha": "33242653cd3288b906213deaea9688815422921f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/33242653cd3288b906213deaea9688815422921f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/9d9a69d7fae610551508e29af79826a77f9431c5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEYFTdM4NKd7XQft77pp+NIls619kFAlqg53AACgkQpp+NIls6\n19miFQ//UhE9MdRJD+xzPbmM0vheU908N5Zu19wr3sD53uANSTOHxeiyMgjq3WVg\nsBA7WrR3gcDJFayJ/VvNdXtV5XWjO/M3jN9YNm3BuyLalgGxOJSQ8R4k3T/r4+iX\nnpXH06VOoc1Oad4Rp2jNStw8+muPYe213B1uSjFNScDbjG+IO0G2ktiRa82Tpu0O\nHFdZDJ4mT4Wa+OsiHkj0crHXahbuhOKDuvclkYm4DH8EVfpQdoaS4TZBcpbGL6zT\nGAhEx5O3KkZJ6l0wMe/noAWwuZB38lEf7yZ6Su6rbK3EhaYIHvZErx//A0ADZTfv\nCubBL3SLWfcDm/CXXWOjYHrAO6/t5p6XB+q3hRpK5/oHE4aOFIu6qOYuTrVZO9Uq\nXJMo7ogHlHW5HoZ1htus9G/Kwh20EM0lzqUZ2lCqplCD322tS62nfgNW/Gu7KSZW\nh26QsdMmPhRBc8zbn9CHEc5+27nriTTpCLyy9LjhrWMzDjlugnWYSn1etNez8nBA\n6B0C9mpQLnRv91hz4cdHgXfuaiy8XwKAoCdxm/EkqyyPn37lfmaG5Jw8hUWMBCB7\nwbRyfQKM4yY9znWvHDAfg4+Nlp7WAVzgPJQ/WmsPnzOtTylK7BXqQTHeTzfZd17Z\nbnyArhkPZ/DV1Fp1qUqsLnmIyhR6TTNxpPCy9xNhsruHGe2todI=\n=c3kR\n-----END PGP SIGNATURE-----", "payload": "tree 33242653cd3288b906213deaea9688815422921f\nparent 7d2d4e320294d69f6fff3002200b7ea8809b95d1\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1516612882 +0100\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1520494448 +0100\n\nPrint whether the stackframe is for a promoted\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/9d9a69d7fae610551508e29af79826a77f9431c5", "html_url": "https://github.com/rust-lang/rust/commit/9d9a69d7fae610551508e29af79826a77f9431c5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/9d9a69d7fae610551508e29af79826a77f9431c5/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7d2d4e320294d69f6fff3002200b7ea8809b95d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/7d2d4e320294d69f6fff3002200b7ea8809b95d1", "html_url": "https://github.com/rust-lang/rust/commit/7d2d4e320294d69f6fff3002200b7ea8809b95d1"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "596baabba1878e1d8b520d6def8e668dee864932", "filename": "src/librustc_mir/interpret/const_eval.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/9d9a69d7fae610551508e29af79826a77f9431c5/src%2Flibrustc_mir%2Finterpret%2Fconst_eval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/9d9a69d7fae610551508e29af79826a77f9431c5/src%2Flibrustc_mir%2Finterpret%2Fconst_eval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Finterpret%2Fconst_eval.rs?ref=9d9a69d7fae610551508e29af79826a77f9431c5", "patch": "@@ -132,7 +132,9 @@ fn eval_body_and_ecx<'a, 'mir, 'tcx>(\n                 };\n                 let cleanup = StackPopCleanup::MarkStatic(mutability);\n                 let name = ty::tls::with(|tcx| tcx.item_path_str(cid.instance.def_id()));\n-                trace!(\"const_eval: pushing stack frame for global: {}\", name);\n+                let prom = cid.promoted.map_or(String::new(), |p| format!(\"::promoted[{:?}]\", p));\n+                trace!(\"const_eval: pushing stack frame for global: {}{}\", name, prom);\n+                assert!(mir.arg_count == 0);\n                 ecx.push_stack_frame(\n                     cid.instance,\n                     mir.span,"}]}