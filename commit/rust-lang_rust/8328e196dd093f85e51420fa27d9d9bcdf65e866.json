{"sha": "8328e196dd093f85e51420fa27d9d9bcdf65e866", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzMjhlMTk2ZGQwOTNmODVlNTE0MjBmYTI3ZDlkOWJjZGY2NWU4NjY=", "commit": {"author": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-02-08T11:24:39Z"}, "committer": {"name": "Aleksey Kladov", "email": "aleksey.kladov@gmail.com", "date": "2019-02-08T11:34:30Z"}, "message": "move diagnostics to a separate file", "tree": {"sha": "6fea69cad7871bdf32c18666625c9a9312a6c297", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6fea69cad7871bdf32c18666625c9a9312a6c297"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8328e196dd093f85e51420fa27d9d9bcdf65e866", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8328e196dd093f85e51420fa27d9d9bcdf65e866", "html_url": "https://github.com/rust-lang/rust/commit/8328e196dd093f85e51420fa27d9d9bcdf65e866", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8328e196dd093f85e51420fa27d9d9bcdf65e866/comments", "author": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matklad", "id": 1711539, "node_id": "MDQ6VXNlcjE3MTE1Mzk=", "avatar_url": "https://avatars.githubusercontent.com/u/1711539?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matklad", "html_url": "https://github.com/matklad", "followers_url": "https://api.github.com/users/matklad/followers", "following_url": "https://api.github.com/users/matklad/following{/other_user}", "gists_url": "https://api.github.com/users/matklad/gists{/gist_id}", "starred_url": "https://api.github.com/users/matklad/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matklad/subscriptions", "organizations_url": "https://api.github.com/users/matklad/orgs", "repos_url": "https://api.github.com/users/matklad/repos", "events_url": "https://api.github.com/users/matklad/events{/privacy}", "received_events_url": "https://api.github.com/users/matklad/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e4a6343e47a7dc87192b762b3b2ebd100240d194", "url": "https://api.github.com/repos/rust-lang/rust/commits/e4a6343e47a7dc87192b762b3b2ebd100240d194", "html_url": "https://github.com/rust-lang/rust/commit/e4a6343e47a7dc87192b762b3b2ebd100240d194"}], "stats": {"total": 49, "additions": 22, "deletions": 27}, "files": [{"sha": "c6ca91af8997e88e03d77e1dd1c99fe0cfd66592", "filename": "crates/ra_ide_api/src/diagnostics.rs", "status": "renamed", "additions": 3, "deletions": 25, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/8328e196dd093f85e51420fa27d9d9bcdf65e866/crates%2Fra_ide_api%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8328e196dd093f85e51420fa27d9d9bcdf65e866/crates%2Fra_ide_api%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Fdiagnostics.rs?ref=8328e196dd093f85e51420fa27d9d9bcdf65e866", "patch": "@@ -1,13 +1,8 @@\n-use hir::{\n-    self, Problem, source_binder\n-};\n-use ra_ide_api_light::{self, LocalEdit, Severity};\n+use hir::{Problem, source_binder};\n+use ra_ide_api_light::Severity;\n use ra_db::SourceDatabase;\n \n-use crate::{\n-    db, Diagnostic, FileId, FilePosition, FileSystemEdit,\n-    SourceChange, SourceFileEdit,\n-};\n+use crate::{db, Diagnostic, FileId, FileSystemEdit, SourceChange};\n \n impl db::RootDatabase {\n     pub(crate) fn diagnostics(&self, file_id: FileId) -> Vec<Diagnostic> {\n@@ -74,20 +69,3 @@ impl db::RootDatabase {\n         res\n     }\n }\n-\n-impl SourceChange {\n-    pub(crate) fn from_local_edit(file_id: FileId, edit: LocalEdit) -> SourceChange {\n-        let file_edit = SourceFileEdit {\n-            file_id,\n-            edit: edit.edit,\n-        };\n-        SourceChange {\n-            label: edit.label,\n-            source_file_edits: vec![file_edit],\n-            file_system_edits: vec![],\n-            cursor_position: edit\n-                .cursor_position\n-                .map(|offset| FilePosition { offset, file_id }),\n-        }\n-    }\n-}", "previous_filename": "crates/ra_ide_api/src/imp.rs"}, {"sha": "312b11a82656e92a15c2c746cb7dd3edaf2d2404", "filename": "crates/ra_ide_api/src/lib.rs", "status": "modified", "additions": 19, "deletions": 2, "changes": 21, "blob_url": "https://github.com/rust-lang/rust/blob/8328e196dd093f85e51420fa27d9d9bcdf65e866/crates%2Fra_ide_api%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8328e196dd093f85e51420fa27d9d9bcdf65e866/crates%2Fra_ide_api%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide_api%2Fsrc%2Flib.rs?ref=8328e196dd093f85e51420fa27d9d9bcdf65e866", "patch": "@@ -14,7 +14,6 @@\n #![recursion_limit = \"128\"]\n \n mod db;\n-mod imp;\n pub mod mock_analysis;\n mod symbol_index;\n mod navigation_target;\n@@ -32,6 +31,7 @@ mod parent_module;\n mod references;\n mod impls;\n mod assists;\n+mod diagnostics;\n \n #[cfg(test)]\n mod marks;\n@@ -58,7 +58,7 @@ pub use crate::{\n     change::{AnalysisChange, LibraryData},\n };\n pub use ra_ide_api_light::{\n-    Fold, FoldKind, HighlightedRange, Severity, StructureNode,\n+    Fold, FoldKind, HighlightedRange, Severity, StructureNode, LocalEdit,\n     LineIndex, LineCol, translate_offset_with_edit,\n };\n pub use ra_db::{\n@@ -399,6 +399,23 @@ impl Analysis {\n     }\n }\n \n+impl SourceChange {\n+    pub(crate) fn from_local_edit(file_id: FileId, edit: LocalEdit) -> SourceChange {\n+        let file_edit = SourceFileEdit {\n+            file_id,\n+            edit: edit.edit,\n+        };\n+        SourceChange {\n+            label: edit.label,\n+            source_file_edits: vec![file_edit],\n+            file_system_edits: vec![],\n+            cursor_position: edit\n+                .cursor_position\n+                .map(|offset| FilePosition { offset, file_id }),\n+        }\n+    }\n+}\n+\n #[test]\n fn analysis_is_send() {\n     fn is_send<T: Send>() {}"}]}