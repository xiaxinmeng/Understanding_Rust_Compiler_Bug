{"sha": "574c0502f1eb9fa1aa562e0181d8749b026d3b09", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU3NGMwNTAyZjFlYjlmYTFhYTU2MmUwMTgxZDg3NDliMDI2ZDNiMDk=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-11T19:37:12Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-11T19:37:12Z"}, "message": "Rollup merge of #49734 - alexcrichton:generalize-token-stream, r=nikomatsakis\n\nproc_macro: Generalize `FromIterator` impl\n\nWhile never intended to be stable we forgot that trait impls are insta-stable!\nThis construction of `FromIterator` wasn't our first choice of how to stabilize\nthe impl but our hands are tied at this point, so revert back to the original\ndefinition of `FromIterator` before #49597\n\nCloses #49725", "tree": {"sha": "3ab5fae8041d6c7ed4451efb0edcecf2fba67a93", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3ab5fae8041d6c7ed4451efb0edcecf2fba67a93"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/574c0502f1eb9fa1aa562e0181d8749b026d3b09", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrOY+gACgkQ/vbIBR0O\nATylfw//c8VJYzL+QqsfKhUnn2jIkdf6IxALMA7ZZ9fU3M5Aqr3YleJ3f6bAzul7\nNagzCIBKOcXsDmTCuL+HROS9ZCxI6EwNqMsMK+2dCh7pb9RK2kNxjh01HOMyl2+a\ncR165I6bDLcrsPcknTlLhLyDNulvKxwYkVf9OtpqDepVgR7JBxhjPkmVFf8fnXNf\nJxa6LNZb4oGSkr6vfelga0CGgQb5r+MrXx6t86x6bkXSTOwv6gOqKHmlKGQqFBqY\n8bl65EaWFMP+JPAXmDvxNBkvS1VPsalH+bdIFaetgpoD/1ZCTEb6EjLubzTIbJXI\njW5KhtbzycFo6rFX+1YRkRUP0qBsrw3TTEevkRWFYTftGwY4zWAZL8LQny+KLjWZ\n+0fzDq+DJWm475P+DJvmtigxBoWF5yUvKgjdznYmMxVPIfFxIDXGGaQtYskOpIq1\nYL451AS2KrYr4OgVzMCtcd6UoCLU86G1Q5Ke5IT+kn4T40pqBjlAhM8QgRVdCacm\nxy+iCXh8Xw73RMYsuZPbEkAwBwJ+iX4F27H82Bx05cPYut/OJwyxBQutYrYy8dAo\n4NnnxFKq44SCYEM4unLsd+VMI7/vwiT09ebSCa20uayDgVYkUCiucB5LdxunMdg+\na6GurkP3xW43NeOvFPqlW8V4vfWs7NCwXfcunGAGSDRqySb3Plo=\n=Hg+Y\n-----END PGP SIGNATURE-----", "payload": "tree 3ab5fae8041d6c7ed4451efb0edcecf2fba67a93\nparent 57b15f62e0d64f3e206b3394f7117577fe971d57\nparent d985344b933f2ccc07602fdf86fda94bc3e643cf\nauthor kennytm <kennytm@gmail.com> 1523475432 +0800\ncommitter kennytm <kennytm@gmail.com> 1523475432 +0800\n\nRollup merge of #49734 - alexcrichton:generalize-token-stream, r=nikomatsakis\n\nproc_macro: Generalize `FromIterator` impl\n\nWhile never intended to be stable we forgot that trait impls are insta-stable!\nThis construction of `FromIterator` wasn't our first choice of how to stabilize\nthe impl but our hands are tied at this point, so revert back to the original\ndefinition of `FromIterator` before #49597\n\nCloses #49725\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/574c0502f1eb9fa1aa562e0181d8749b026d3b09", "html_url": "https://github.com/rust-lang/rust/commit/574c0502f1eb9fa1aa562e0181d8749b026d3b09", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/574c0502f1eb9fa1aa562e0181d8749b026d3b09/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "57b15f62e0d64f3e206b3394f7117577fe971d57", "url": "https://api.github.com/repos/rust-lang/rust/commits/57b15f62e0d64f3e206b3394f7117577fe971d57", "html_url": "https://github.com/rust-lang/rust/commit/57b15f62e0d64f3e206b3394f7117577fe971d57"}, {"sha": "d985344b933f2ccc07602fdf86fda94bc3e643cf", "url": "https://api.github.com/repos/rust-lang/rust/commits/d985344b933f2ccc07602fdf86fda94bc3e643cf", "html_url": "https://github.com/rust-lang/rust/commit/d985344b933f2ccc07602fdf86fda94bc3e643cf"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "e171216523a1e3a6dd1ea35bf6c06d20868045d8", "filename": "src/libproc_macro/lib.rs", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/574c0502f1eb9fa1aa562e0181d8749b026d3b09/src%2Flibproc_macro%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/574c0502f1eb9fa1aa562e0181d8749b026d3b09/src%2Flibproc_macro%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Flib.rs?ref=574c0502f1eb9fa1aa562e0181d8749b026d3b09", "patch": "@@ -140,9 +140,16 @@ impl From<TokenTree> for TokenStream {\n #[unstable(feature = \"proc_macro\", issue = \"38356\")]\n impl iter::FromIterator<TokenTree> for TokenStream {\n     fn from_iter<I: IntoIterator<Item = TokenTree>>(trees: I) -> Self {\n+        trees.into_iter().map(TokenStream::from).collect()\n+    }\n+}\n+\n+#[unstable(feature = \"proc_macro\", issue = \"38356\")]\n+impl iter::FromIterator<TokenStream> for TokenStream {\n+    fn from_iter<I: IntoIterator<Item = TokenStream>>(streams: I) -> Self {\n         let mut builder = tokenstream::TokenStreamBuilder::new();\n-        for tree in trees {\n-            builder.push(tree.to_internal());\n+        for stream in streams {\n+            builder.push(stream.0);\n         }\n         TokenStream(builder.build())\n     }"}]}