{"sha": "7d5d59160a5e1f535ddfebb6cee22839cd253673", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdkNWQ1OTE2MGE1ZTFmNTM1ZGRmZWJiNmNlZTIyODM5Y2QyNTM2NzM=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-07-03T13:59:10Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-03T13:59:10Z"}, "message": "Rollup merge of #62021 - crlf0710:msvc_link_output_improve, r=alexcrichton\n\nMSVC link output improve\n\nResolves #35785.\n\nHowever i haven't come up with a idea to add test case for this :(\n\nr? @retep998", "tree": {"sha": "13e58d6d69bc1468bdd189c16e4f4ca5173dbf8d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/13e58d6d69bc1468bdd189c16e4f4ca5173dbf8d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7d5d59160a5e1f535ddfebb6cee22839cd253673", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdHLSuCRBK7hj4Ov3rIwAAdHIIAHKvBgTBQAUJAR71iu2S70EH\nVK7Gk4lI+gUbFQ/qIQNDAi7Va1/HNSKg7sRig6NxYWo1L+qW/9XOT00nEVcSrSk0\nLFjqaQv90MiwMuCQ9dMKfipmxqebTTYq4TWtDKMJGEtJUjn5UkWlXRDL291Vn+bH\nPKGHLppJW5VJsi/81BF2+n2OPlNjEs/ZLCUn53lKa0yN0lFglwrf/7rEmLt4k0pl\nQ8ZyhVgeu+e+KiPJ1IvFk7h9Te5lL+UTIGv7QbdOk+OHXbzaJNLjmLrYLPeuz9vt\n6mcISCZZ8qoC/A63h25K76BklWeDQXHkDj5JmgmKvj6eZFVA3JXScDMmyVYEKlY=\n=g2iM\n-----END PGP SIGNATURE-----\n", "payload": "tree 13e58d6d69bc1468bdd189c16e4f4ca5173dbf8d\nparent 8301de16dafc81a3b5d94aa0707ad83bdb56a599\nparent 8339211809987bcdc4a627214f03e4479182bfc2\nauthor Mark Rousskov <mark.simulacrum@gmail.com> 1562162350 -0400\ncommitter GitHub <noreply@github.com> 1562162350 -0400\n\nRollup merge of #62021 - crlf0710:msvc_link_output_improve, r=alexcrichton\n\nMSVC link output improve\n\nResolves #35785.\n\nHowever i haven't come up with a idea to add test case for this :(\n\nr? @retep998\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7d5d59160a5e1f535ddfebb6cee22839cd253673", "html_url": "https://github.com/rust-lang/rust/commit/7d5d59160a5e1f535ddfebb6cee22839cd253673", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7d5d59160a5e1f535ddfebb6cee22839cd253673/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8301de16dafc81a3b5d94aa0707ad83bdb56a599", "url": "https://api.github.com/repos/rust-lang/rust/commits/8301de16dafc81a3b5d94aa0707ad83bdb56a599", "html_url": "https://github.com/rust-lang/rust/commit/8301de16dafc81a3b5d94aa0707ad83bdb56a599"}, {"sha": "8339211809987bcdc4a627214f03e4479182bfc2", "url": "https://api.github.com/repos/rust-lang/rust/commits/8339211809987bcdc4a627214f03e4479182bfc2", "html_url": "https://github.com/rust-lang/rust/commit/8339211809987bcdc4a627214f03e4479182bfc2"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "707b7cae16ce73f1d58fa79a05d3dbd1e0dc6b02", "filename": "src/librustc_codegen_ssa/back/link.rs", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/7d5d59160a5e1f535ddfebb6cee22839cd253673/src%2Flibrustc_codegen_ssa%2Fback%2Flink.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d5d59160a5e1f535ddfebb6cee22839cd253673/src%2Flibrustc_codegen_ssa%2Fback%2Flink.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_ssa%2Fback%2Flink.rs?ref=7d5d59160a5e1f535ddfebb6cee22839cd253673", "patch": "@@ -653,10 +653,14 @@ fn link_natively<'a, B: ArchiveBuilder<'a>>(sess: &'a Session,\n             linker_error.emit();\n \n             if sess.target.target.options.is_like_msvc && linker_not_found {\n-                sess.note_without_error(\"the msvc targets depend on the msvc linker \\\n-                    but `link.exe` was not found\");\n-                sess.note_without_error(\"please ensure that VS 2013, VS 2015 or VS 2017 \\\n-                    was installed with the Visual C++ option\");\n+                sess.note_without_error(\n+                    \"the msvc targets depend on the msvc linker \\\n+                     but `link.exe` was not found\",\n+                );\n+                sess.note_without_error(\n+                    \"please ensure that VS 2013, VS 2015, VS 2017 or VS 2019 \\\n+                     was installed with the Visual C++ option\",\n+                );\n             }\n             sess.abort_if_errors();\n         }"}, {"sha": "b139083e99fc1e9d57d5413b18b5c83fff7352e8", "filename": "src/librustc_target/spec/windows_msvc_base.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7d5d59160a5e1f535ddfebb6cee22839cd253673/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7d5d59160a5e1f535ddfebb6cee22839cd253673/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_target%2Fspec%2Fwindows_msvc_base.rs?ref=7d5d59160a5e1f535ddfebb6cee22839cd253673", "patch": "@@ -19,6 +19,10 @@ pub fn opts() -> TargetOptions {\n         target_family: Some(\"windows\".to_string()),\n         is_like_windows: true,\n         is_like_msvc: true,\n+        // set VSLANG to 1033 can prevent link.exe from using\n+        // language packs, and avoid generating Non-UTF-8 error\n+        // messages if a link error occurred.\n+        link_env: vec![(\"VSLANG\".to_string(), \"1033\".to_string())],\n         pre_link_args: args,\n         crt_static_allows_dylibs: true,\n         crt_static_respected: true,"}]}