{"sha": "63cdd7ab50377323aaa997af78c6ac65611767ec", "node_id": "MDY6Q29tbWl0NzI0NzEyOjYzY2RkN2FiNTAzNzczMjNhYWE5OTdhZjc4YzZhYzY1NjExNzY3ZWM=", "commit": {"author": {"name": "Ariel Ben-Yehuda", "email": "arielb1@mail.tau.ac.il", "date": "2016-06-16T13:52:20Z"}, "committer": {"name": "Ariel Ben-Yehuda", "email": "arielb1@mail.tau.ac.il", "date": "2016-06-16T13:54:20Z"}, "message": "use a different filename for original and promoted MIRs", "tree": {"sha": "81c4d6abda7260fe866cc39c98cbe9aee2a72c00", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/81c4d6abda7260fe866cc39c98cbe9aee2a72c00"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/63cdd7ab50377323aaa997af78c6ac65611767ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/63cdd7ab50377323aaa997af78c6ac65611767ec", "html_url": "https://github.com/rust-lang/rust/commit/63cdd7ab50377323aaa997af78c6ac65611767ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/63cdd7ab50377323aaa997af78c6ac65611767ec/comments", "author": null, "committer": null, "parents": [{"sha": "a479a6a7a6fa1bfe1f18d7d7411ad14e7b8ca17b", "url": "https://api.github.com/repos/rust-lang/rust/commits/a479a6a7a6fa1bfe1f18d7d7411ad14e7b8ca17b", "html_url": "https://github.com/rust-lang/rust/commit/a479a6a7a6fa1bfe1f18d7d7411ad14e7b8ca17b"}], "stats": {"total": 9, "additions": 7, "deletions": 2}, "files": [{"sha": "95769a7a50b024f2737e7983c0dd0cbd6cfd721c", "filename": "src/librustc_mir/pretty.rs", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/63cdd7ab50377323aaa997af78c6ac65611767ec/src%2Flibrustc_mir%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/63cdd7ab50377323aaa997af78c6ac65611767ec/src%2Flibrustc_mir%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fpretty.rs?ref=63cdd7ab50377323aaa997af78c6ac65611767ec", "patch": "@@ -61,8 +61,13 @@ pub fn dump_mir<'a, 'tcx>(tcx: TyCtxt<'a, 'tcx, 'tcx>,\n         return;\n     }\n \n-    let file_name = format!(\"rustc.node{}.{}.{}.mir\",\n-                            node_id, pass_name, disambiguator);\n+    let promotion_id = match src {\n+        MirSource::Promoted(_, id) => format!(\"-promoted{}\", id),\n+        _ => String::new()\n+    };\n+\n+    let file_name = format!(\"rustc.node{}{}.{}.{}.mir\",\n+                            node_id, promotion_id, pass_name, disambiguator);\n     let _ = fs::File::create(&file_name).and_then(|mut file| {\n         try!(writeln!(file, \"// MIR for `{}`\", node_path));\n         try!(writeln!(file, \"// node_id = {}\", node_id));"}]}