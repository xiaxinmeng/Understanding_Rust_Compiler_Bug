{"sha": "b0fb57bd8d18946787a79d1244154f2512dcf15b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmIwZmI1N2JkOGQxODk0Njc4N2E3OWQxMjQ0MTU0ZjI1MTJkY2YxNWI=", "commit": {"author": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2020-04-22T20:03:05Z"}, "committer": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2020-04-22T20:03:05Z"}, "message": "impl From<Cow> for boxed slices and strings\n\nThese forward `Borrowed`/`Owned` values to existing `Box::from` impls.\n\n- `From<Cow<'_, [T]>> for Box<[T]>`\n- `From<Cow<'_, str>> for Box<str>`\n- `From<Cow<'_, CStr>> for Box<CStr>`\n- `From<Cow<'_, OsStr>> for Box<OsStr>`\n- `From<Cow<'_, Path>> for Box<Path>`", "tree": {"sha": "ae0caa7022e8b5fcafa1646fcbdb68c2c339c57d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ae0caa7022e8b5fcafa1646fcbdb68c2c339c57d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b0fb57bd8d18946787a79d1244154f2512dcf15b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b0fb57bd8d18946787a79d1244154f2512dcf15b", "html_url": "https://github.com/rust-lang/rust/commit/b0fb57bd8d18946787a79d1244154f2512dcf15b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b0fb57bd8d18946787a79d1244154f2512dcf15b/comments", "author": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82e90d64266b8a4b53935d629786e69610b33f25", "url": "https://api.github.com/repos/rust-lang/rust/commits/82e90d64266b8a4b53935d629786e69610b33f25", "html_url": "https://github.com/rust-lang/rust/commit/82e90d64266b8a4b53935d629786e69610b33f25"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "de906c7f7b08bd453e30db4c5a73a48f26953421", "filename": "src/liballoc/boxed.rs", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Fliballoc%2Fboxed.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Fliballoc%2Fboxed.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Fboxed.rs?ref=b0fb57bd8d18946787a79d1244154f2512dcf15b", "patch": "@@ -146,6 +146,7 @@ use core::ptr::{self, NonNull, Unique};\n use core::task::{Context, Poll};\n \n use crate::alloc::{self, AllocInit, AllocRef, Global};\n+use crate::borrow::Cow;\n use crate::raw_vec::RawVec;\n use crate::str::from_boxed_utf8_unchecked;\n use crate::vec::Vec;\n@@ -774,6 +775,17 @@ impl<T: Copy> From<&[T]> for Box<[T]> {\n     }\n }\n \n+#[stable(feature = \"box_from_cow\", since = \"1.45.0\")]\n+impl<T: Copy> From<Cow<'_, [T]>> for Box<[T]> {\n+    #[inline]\n+    fn from(cow: Cow<'_, [T]>) -> Box<[T]> {\n+        match cow {\n+            Cow::Borrowed(slice) => Box::from(slice),\n+            Cow::Owned(slice) => Box::from(slice),\n+        }\n+    }\n+}\n+\n #[stable(feature = \"box_from_slice\", since = \"1.17.0\")]\n impl From<&str> for Box<str> {\n     /// Converts a `&str` into a `Box<str>`\n@@ -792,6 +804,17 @@ impl From<&str> for Box<str> {\n     }\n }\n \n+#[stable(feature = \"box_from_cow\", since = \"1.45.0\")]\n+impl From<Cow<'_, str>> for Box<str> {\n+    #[inline]\n+    fn from(cow: Cow<'_, str>) -> Box<str> {\n+        match cow {\n+            Cow::Borrowed(s) => Box::from(s),\n+            Cow::Owned(s) => Box::from(s),\n+        }\n+    }\n+}\n+\n #[stable(feature = \"boxed_str_conv\", since = \"1.19.0\")]\n impl From<Box<str>> for Box<[u8]> {\n     /// Converts a `Box<str>>` into a `Box<[u8]>`"}, {"sha": "4bac9a4917d8f0a07b4cf4c852cba539d650d7f4", "filename": "src/libstd/ffi/c_str.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Flibstd%2Fffi%2Fc_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Flibstd%2Fffi%2Fc_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fffi%2Fc_str.rs?ref=b0fb57bd8d18946787a79d1244154f2512dcf15b", "patch": "@@ -730,6 +730,17 @@ impl From<&CStr> for Box<CStr> {\n     }\n }\n \n+#[stable(feature = \"box_from_cow\", since = \"1.45.0\")]\n+impl From<Cow<'_, CStr>> for Box<CStr> {\n+    #[inline]\n+    fn from(cow: Cow<'_, CStr>) -> Box<CStr> {\n+        match cow {\n+            Cow::Borrowed(s) => Box::from(s),\n+            Cow::Owned(s) => Box::from(s),\n+        }\n+    }\n+}\n+\n #[stable(feature = \"c_string_from_box\", since = \"1.18.0\")]\n impl From<Box<CStr>> for CString {\n     /// Converts a [`Box`]`<CStr>` into a [`CString`] without copying or allocating."}, {"sha": "7a2d34968e087585bc8d23f38d951daa05e1614e", "filename": "src/libstd/ffi/os_str.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Flibstd%2Fffi%2Fos_str.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Flibstd%2Fffi%2Fos_str.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fffi%2Fos_str.rs?ref=b0fb57bd8d18946787a79d1244154f2512dcf15b", "patch": "@@ -849,6 +849,17 @@ impl From<&OsStr> for Box<OsStr> {\n     }\n }\n \n+#[stable(feature = \"box_from_cow\", since = \"1.45.0\")]\n+impl From<Cow<'_, OsStr>> for Box<OsStr> {\n+    #[inline]\n+    fn from(cow: Cow<'_, OsStr>) -> Box<OsStr> {\n+        match cow {\n+            Cow::Borrowed(s) => Box::from(s),\n+            Cow::Owned(s) => Box::from(s),\n+        }\n+    }\n+}\n+\n #[stable(feature = \"os_string_from_box\", since = \"1.18.0\")]\n impl From<Box<OsStr>> for OsString {\n     /// Converts a [`Box`]`<`[`OsStr`]`>` into a `OsString` without copying or"}, {"sha": "ed1dc78732985b33d0ac1ca821d179e668615748", "filename": "src/libstd/path.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Flibstd%2Fpath.rs", "raw_url": "https://github.com/rust-lang/rust/raw/b0fb57bd8d18946787a79d1244154f2512dcf15b/src%2Flibstd%2Fpath.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fpath.rs?ref=b0fb57bd8d18946787a79d1244154f2512dcf15b", "patch": "@@ -1433,6 +1433,17 @@ impl From<&Path> for Box<Path> {\n     }\n }\n \n+#[stable(feature = \"box_from_cow\", since = \"1.45.0\")]\n+impl From<Cow<'_, Path>> for Box<Path> {\n+    #[inline]\n+    fn from(cow: Cow<'_, Path>) -> Box<Path> {\n+        match cow {\n+            Cow::Borrowed(path) => Box::from(path),\n+            Cow::Owned(path) => Box::from(path),\n+        }\n+    }\n+}\n+\n #[stable(feature = \"path_buf_from_box\", since = \"1.18.0\")]\n impl From<Box<Path>> for PathBuf {\n     /// Converts a `Box<Path>` into a `PathBuf`"}]}