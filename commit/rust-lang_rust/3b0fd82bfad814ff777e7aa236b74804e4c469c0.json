{"sha": "3b0fd82bfad814ff777e7aa236b74804e4c469c0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNiMGZkODJiZmFkODE0ZmY3NzdlN2FhMjM2Yjc0ODA0ZTRjNDY5YzA=", "commit": {"author": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2019-10-08T00:00:00Z"}, "committer": {"name": "Tomasz Mi\u0105sko", "email": "tomasz.miasko@gmail.com", "date": "2019-10-08T10:20:23Z"}, "message": "Disable Go and OCaml bindings when building LLVM\n\nInstead of instaling OCaml bindings in a location where installation\nwill not fail, don't build them in the first place.", "tree": {"sha": "d8895210ad9965f1ebceb83869fc2be309133720", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d8895210ad9965f1ebceb83869fc2be309133720"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3b0fd82bfad814ff777e7aa236b74804e4c469c0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3b0fd82bfad814ff777e7aa236b74804e4c469c0", "html_url": "https://github.com/rust-lang/rust/commit/3b0fd82bfad814ff777e7aa236b74804e4c469c0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3b0fd82bfad814ff777e7aa236b74804e4c469c0/comments", "author": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tmiasko", "id": 51362316, "node_id": "MDQ6VXNlcjUxMzYyMzE2", "avatar_url": "https://avatars.githubusercontent.com/u/51362316?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tmiasko", "html_url": "https://github.com/tmiasko", "followers_url": "https://api.github.com/users/tmiasko/followers", "following_url": "https://api.github.com/users/tmiasko/following{/other_user}", "gists_url": "https://api.github.com/users/tmiasko/gists{/gist_id}", "starred_url": "https://api.github.com/users/tmiasko/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tmiasko/subscriptions", "organizations_url": "https://api.github.com/users/tmiasko/orgs", "repos_url": "https://api.github.com/users/tmiasko/repos", "events_url": "https://api.github.com/users/tmiasko/events{/privacy}", "received_events_url": "https://api.github.com/users/tmiasko/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e1f25e31b1d26bd62aaf5a4554d25c33f75a0d1", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e1f25e31b1d26bd62aaf5a4554d25c33f75a0d1", "html_url": "https://github.com/rust-lang/rust/commit/1e1f25e31b1d26bd62aaf5a4554d25c33f75a0d1"}], "stats": {"total": 10, "additions": 1, "deletions": 9}, "files": [{"sha": "fb308bc35ebc5e8519bb1a2b487b213f071f03e0", "filename": "src/bootstrap/native.rs", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/3b0fd82bfad814ff777e7aa236b74804e4c469c0/src%2Fbootstrap%2Fnative.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3b0fd82bfad814ff777e7aa236b74804e4c469c0/src%2Fbootstrap%2Fnative.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fnative.rs?ref=3b0fd82bfad814ff777e7aa236b74804e4c469c0", "patch": "@@ -157,6 +157,7 @@ impl Step for Llvm {\n            .define(\"WITH_POLLY\", \"OFF\")\n            .define(\"LLVM_ENABLE_TERMINFO\", \"OFF\")\n            .define(\"LLVM_ENABLE_LIBEDIT\", \"OFF\")\n+           .define(\"LLVM_ENABLE_BINDINGS\", \"OFF\")\n            .define(\"LLVM_ENABLE_Z3_SOLVER\", \"OFF\")\n            .define(\"LLVM_PARALLEL_COMPILE_JOBS\", builder.jobs().to_string())\n            .define(\"LLVM_TARGET_ARCH\", target.split('-').next().unwrap())\n@@ -169,15 +170,6 @@ impl Step for Llvm {\n             }\n         }\n \n-        // By default, LLVM will automatically find OCaml and, if it finds it,\n-        // install the LLVM bindings in LLVM_OCAML_INSTALL_PATH, which defaults\n-        // to /usr/bin/ocaml.\n-        // This causes problem for non-root builds of Rust. Side-step the issue\n-        // by setting LLVM_OCAML_INSTALL_PATH to a relative path, so it installs\n-        // in the prefix.\n-        cfg.define(\"LLVM_OCAML_INSTALL_PATH\",\n-            env::var_os(\"LLVM_OCAML_INSTALL_PATH\").unwrap_or_else(|| \"usr/lib/ocaml\".into()));\n-\n         let want_lldb = builder.config.lldb_enabled && !self.emscripten;\n \n         // This setting makes the LLVM tools link to the dynamic LLVM library,"}]}