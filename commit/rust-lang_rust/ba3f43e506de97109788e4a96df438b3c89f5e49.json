{"sha": "ba3f43e506de97109788e4a96df438b3c89f5e49", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJhM2Y0M2U1MDZkZTk3MTA5Nzg4ZTRhOTZkZjQzOGIzYzg5ZjVlNDk=", "commit": {"author": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2013-06-20T02:27:06Z"}, "committer": {"name": "Ben Blum", "email": "bblum@andrew.cmu.edu", "date": "2013-06-23T21:54:25Z"}, "message": "Fix pretty-printing builtin bounds on closures and traits", "tree": {"sha": "2820c660052d6ee3e8defa37f362f8cf6450eab8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2820c660052d6ee3e8defa37f362f8cf6450eab8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ba3f43e506de97109788e4a96df438b3c89f5e49", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ba3f43e506de97109788e4a96df438b3c89f5e49", "html_url": "https://github.com/rust-lang/rust/commit/ba3f43e506de97109788e4a96df438b3c89f5e49", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ba3f43e506de97109788e4a96df438b3c89f5e49/comments", "author": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bblum", "id": 1820515, "node_id": "MDQ6VXNlcjE4MjA1MTU=", "avatar_url": "https://avatars.githubusercontent.com/u/1820515?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bblum", "html_url": "https://github.com/bblum", "followers_url": "https://api.github.com/users/bblum/followers", "following_url": "https://api.github.com/users/bblum/following{/other_user}", "gists_url": "https://api.github.com/users/bblum/gists{/gist_id}", "starred_url": "https://api.github.com/users/bblum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bblum/subscriptions", "organizations_url": "https://api.github.com/users/bblum/orgs", "repos_url": "https://api.github.com/users/bblum/repos", "events_url": "https://api.github.com/users/bblum/events{/privacy}", "received_events_url": "https://api.github.com/users/bblum/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1d2b20ee2c4b6a0f71a4c2f85e4b10157d616c0f", "url": "https://api.github.com/repos/rust-lang/rust/commits/1d2b20ee2c4b6a0f71a4c2f85e4b10157d616c0f", "html_url": "https://github.com/rust-lang/rust/commit/1d2b20ee2c4b6a0f71a4c2f85e4b10157d616c0f"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "e25267f4441236f4aeea9775125fb829b904fb4d", "filename": "src/librustc/util/ppaux.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/ba3f43e506de97109788e4a96df438b3c89f5e49/src%2Flibrustc%2Futil%2Fppaux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ba3f43e506de97109788e4a96df438b3c89f5e49/src%2Flibrustc%2Futil%2Fppaux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Futil%2Fppaux.rs?ref=ba3f43e506de97109788e4a96df438b3c89f5e49", "patch": "@@ -365,6 +365,9 @@ pub fn ty_to_str(cx: ctxt, typ: t) -> ~str {\n \n         s.push_str(\"fn\");\n \n+        if !cty.bounds.is_empty() {\n+            s.push_str(\":\");\n+        }\n         s.push_str(cty.bounds.repr(cx));\n \n         push_sig_to_str(cx, &mut s, &cty.sig);\n@@ -457,9 +460,10 @@ pub fn ty_to_str(cx: ctxt, typ: t) -> ~str {\n         let path = ty::item_path(cx, did);\n         let base = ast_map::path_to_str(path, cx.sess.intr());\n         let ty = parameterized(cx, base, substs.self_r, substs.tps);\n+        let bound_sep = if bounds.is_empty() { \"\" } else { \":\" };\n         let bound_str = bounds.repr(cx);\n-        fmt!(\"%s%s%s%s\", trait_store_to_str(cx, s), mutability_to_str(mutbl), ty,\n-                         bound_str)\n+        fmt!(\"%s%s%s%s%s\", trait_store_to_str(cx, s), mutability_to_str(mutbl), ty,\n+                           bound_sep, bound_str)\n       }\n       ty_evec(ref mt, vs) => {\n         vstore_ty_to_str(cx, mt, vs)"}]}