{"sha": "650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY1MDAwOWY4MGNmYzIwZDFjM2E4ZDMxZWJlNjU5M2I2NWU1OTUxYmY=", "commit": {"author": {"name": "Paul Stansifer", "email": "paul.stansifer@gmail.com", "date": "2012-07-11T17:42:59Z"}, "committer": {"name": "Paul Stansifer", "email": "paul.stansifer@gmail.com", "date": "2012-07-11T19:06:47Z"}, "message": "Test (but don't pretty-print) the new macro system.", "tree": {"sha": "7c734d04c1287469b247bb6ed4fdf8be47762647", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/7c734d04c1287469b247bb6ed4fdf8be47762647"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "html_url": "https://github.com/rust-lang/rust/commit/650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/comments", "author": {"login": "paulstansifer", "id": 1431, "node_id": "MDQ6VXNlcjE0MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulstansifer", "html_url": "https://github.com/paulstansifer", "followers_url": "https://api.github.com/users/paulstansifer/followers", "following_url": "https://api.github.com/users/paulstansifer/following{/other_user}", "gists_url": "https://api.github.com/users/paulstansifer/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulstansifer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulstansifer/subscriptions", "organizations_url": "https://api.github.com/users/paulstansifer/orgs", "repos_url": "https://api.github.com/users/paulstansifer/repos", "events_url": "https://api.github.com/users/paulstansifer/events{/privacy}", "received_events_url": "https://api.github.com/users/paulstansifer/received_events", "type": "User", "site_admin": false}, "committer": {"login": "paulstansifer", "id": 1431, "node_id": "MDQ6VXNlcjE0MzE=", "avatar_url": "https://avatars.githubusercontent.com/u/1431?v=4", "gravatar_id": "", "url": "https://api.github.com/users/paulstansifer", "html_url": "https://github.com/paulstansifer", "followers_url": "https://api.github.com/users/paulstansifer/followers", "following_url": "https://api.github.com/users/paulstansifer/following{/other_user}", "gists_url": "https://api.github.com/users/paulstansifer/gists{/gist_id}", "starred_url": "https://api.github.com/users/paulstansifer/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/paulstansifer/subscriptions", "organizations_url": "https://api.github.com/users/paulstansifer/orgs", "repos_url": "https://api.github.com/users/paulstansifer/repos", "events_url": "https://api.github.com/users/paulstansifer/events{/privacy}", "received_events_url": "https://api.github.com/users/paulstansifer/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0abd6a2eba72f0bde46abc33abcf361d45c376c", "url": "https://api.github.com/repos/rust-lang/rust/commits/c0abd6a2eba72f0bde46abc33abcf361d45c376c", "html_url": "https://github.com/rust-lang/rust/commit/c0abd6a2eba72f0bde46abc33abcf361d45c376c"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "c1b20f650e5fcbac560cd89563c27905a6a038e8", "filename": "src/test/run-pass/macro-2.rs", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-2.rs?ref=650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "patch": "@@ -1,9 +1,20 @@\n+// xfail-pretty - token trees can't pretty print\n+\n fn main() {\n     #macro[[#mylambda[x, body],\n             {\n-                fn f(x: int) -> int { ret body }\n+                fn f(x: int) -> int { ret body; }\n                 f\n             }]];\n \n     assert (#mylambda[y, y * 2](8) == 16);\n+\n+    macro_rules! mylambda_tt{\n+        {$x:ident, $body:expr} => {\n+            fn f($x: int) -> int { ret $body; };\n+            f\n+        }\n+    }\n+\n+    assert(mylambda_tt!{y, y * 2}(8) == 16)\n }"}, {"sha": "891d5a498b29d094fd0f2647ea24763a3f40d2aa", "filename": "src/test/run-pass/macro-3.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-3.rs?ref=650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "patch": "@@ -1,5 +1,12 @@\n+// xfail-pretty - token trees can't pretty print\n+\n fn main() {\n     #macro[[#trivial[], 1 * 2 * 4 * 2 * 1]];\n \n     assert (#trivial[] == 16);\n+\n+    macro_rules! trivial_tt{\n+        {} => {1*2*4*2*1}\n+    }\n+    assert(trivial_tt!{} == 16);\n }"}, {"sha": "5c04e1f2bb71b322c698ca408979002dbb03df6b", "filename": "src/test/run-pass/macro-by-example-1.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro-by-example-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro-by-example-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro-by-example-1.rs?ref=650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "patch": "@@ -1,7 +1,14 @@\n+// xfail-pretty - token trees can't pretty print\n+\n fn main() {\n     #macro[[#apply[f, [x, ...]], f(x, ...)]];\n \n+    macro_rules! apply_tt{\n+        {$f:expr, ($($x:expr),*)} => {$f($($x),*)}\n+    }\n+\n     fn add(a: int, b: int) -> int { ret a + b; }\n \n     assert (#apply[add, [1, 15]] == 16);\n+    assert(apply_tt!{add, (1, 15)} == 16);\n }"}, {"sha": "0f4350c5d8e23ebc1470b47187f8dd1405d0da00", "filename": "src/test/run-pass/macro.rs", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro.rs", "raw_url": "https://github.com/rust-lang/rust/raw/650009f80cfc20d1c3a8d31ebe6593b65e5951bf/src%2Ftest%2Frun-pass%2Fmacro.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fmacro.rs?ref=650009f80cfc20d1c3a8d31ebe6593b65e5951bf", "patch": "@@ -1 +1,11 @@\n-fn main() { #macro[[#m1[a], a * 4]]; assert (#m1[2] == 8); }\n+// xfail-pretty - token trees can't pretty print\n+\n+fn main() {\n+    #macro[[#m1[a], a * 4]];\n+    assert (#m1[2] == 8);\n+\n+    macro_rules! m1tt {\n+        {$a:expr} => {$a*4}\n+    };\n+    assert(m1tt!{2} == 8);\n+}"}]}