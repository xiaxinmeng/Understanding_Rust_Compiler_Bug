{"sha": "1550787b13d3e863f06da7c0c9e17ec1dee341df", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE1NTA3ODdiMTNkM2U4NjNmMDZkYTdjMGM5ZTE3ZWMxZGVlMzQxZGY=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-12T07:37:49Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2019-01-12T07:37:49Z"}, "message": "Add label for invalid literal suffix", "tree": {"sha": "5e66b0105dccb386893e3ff146ba534d8ec80057", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5e66b0105dccb386893e3ff146ba534d8ec80057"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1550787b13d3e863f06da7c0c9e17ec1dee341df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1550787b13d3e863f06da7c0c9e17ec1dee341df", "html_url": "https://github.com/rust-lang/rust/commit/1550787b13d3e863f06da7c0c9e17ec1dee341df", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1550787b13d3e863f06da7c0c9e17ec1dee341df/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3ead6de40d57ec78275ee398592baa814b5f0841", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ead6de40d57ec78275ee398592baa814b5f0841", "html_url": "https://github.com/rust-lang/rust/commit/3ead6de40d57ec78275ee398592baa814b5f0841"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "ea205530ca5ccb2dfdc8c35752203cd5e26cfcbb", "filename": "src/libsyntax/parse/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Flibsyntax%2Fparse%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Flibsyntax%2Fparse%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fmod.rs?ref=1550787b13d3e863f06da7c0c9e17ec1dee341df", "patch": "@@ -520,6 +520,7 @@ fn filtered_float_lit(data: Symbol, suffix: Option<Symbol>, diag: Option<(Span,\n                 } else {\n                     let msg = format!(\"invalid suffix `{}` for float literal\", suf);\n                     diag.struct_span_err(span, &msg)\n+                        .span_label(span, format!(\"invalid suffix `{}`\", suf))\n                         .help(\"valid suffixes are `f32` and `f64`\")\n                         .emit();\n                 }\n@@ -716,6 +717,7 @@ fn integer_lit(s: &str, suffix: Option<Symbol>, diag: Option<(Span, &Handler)>)\n                     } else {\n                         let msg = format!(\"invalid suffix `{}` for numeric literal\", suf);\n                         diag.struct_span_err(span, &msg)\n+                            .span_label(span, format!(\"invalid suffix `{}`\", suf))\n                             .help(\"the suffix must be one of the integral types \\\n                                    (`u32`, `isize`, etc)\")\n                             .emit();"}, {"sha": "c54b72a3585d11726fa62712179f1a36cede3e63", "filename": "src/test/ui/old-suffixes-are-really-forbidden.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fold-suffixes-are-really-forbidden.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fold-suffixes-are-really-forbidden.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fold-suffixes-are-really-forbidden.stderr?ref=1550787b13d3e863f06da7c0c9e17ec1dee341df", "patch": "@@ -2,15 +2,15 @@ error: invalid suffix `is` for numeric literal\n   --> $DIR/old-suffixes-are-really-forbidden.rs:2:13\n    |\n LL |     let a = 1_is; //~ ERROR invalid suffix\n-   |             ^^^^\n+   |             ^^^^ invalid suffix `is`\n    |\n    = help: the suffix must be one of the integral types (`u32`, `isize`, etc)\n \n error: invalid suffix `us` for numeric literal\n   --> $DIR/old-suffixes-are-really-forbidden.rs:3:13\n    |\n LL |     let b = 2_us; //~ ERROR invalid suffix\n-   |             ^^^^\n+   |             ^^^^ invalid suffix `us`\n    |\n    = help: the suffix must be one of the integral types (`u32`, `isize`, etc)\n "}, {"sha": "608c5fda2482aa490a6a71ff008299f5ca3bfce2", "filename": "src/test/ui/parser/bad-lit-suffixes.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fparser%2Fbad-lit-suffixes.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fparser%2Fbad-lit-suffixes.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fbad-lit-suffixes.stderr?ref=1550787b13d3e863f06da7c0c9e17ec1dee341df", "patch": "@@ -82,31 +82,31 @@ error: invalid suffix `suffix` for numeric literal\n   --> $DIR/bad-lit-suffixes.rs:25:5\n    |\n LL |     1234suffix; //~ ERROR invalid suffix `suffix` for numeric literal\n-   |     ^^^^^^^^^^\n+   |     ^^^^^^^^^^ invalid suffix `suffix`\n    |\n    = help: the suffix must be one of the integral types (`u32`, `isize`, etc)\n \n error: invalid suffix `suffix` for numeric literal\n   --> $DIR/bad-lit-suffixes.rs:26:5\n    |\n LL |     0b101suffix; //~ ERROR invalid suffix `suffix` for numeric literal\n-   |     ^^^^^^^^^^^\n+   |     ^^^^^^^^^^^ invalid suffix `suffix`\n    |\n    = help: the suffix must be one of the integral types (`u32`, `isize`, etc)\n \n error: invalid suffix `suffix` for float literal\n   --> $DIR/bad-lit-suffixes.rs:27:5\n    |\n LL |     1.0suffix; //~ ERROR invalid suffix `suffix` for float literal\n-   |     ^^^^^^^^^\n+   |     ^^^^^^^^^ invalid suffix `suffix`\n    |\n    = help: valid suffixes are `f32` and `f64`\n \n error: invalid suffix `suffix` for float literal\n   --> $DIR/bad-lit-suffixes.rs:28:5\n    |\n LL |     1.0e10suffix; //~ ERROR invalid suffix `suffix` for float literal\n-   |     ^^^^^^^^^^^^\n+   |     ^^^^^^^^^^^^ invalid suffix `suffix`\n    |\n    = help: valid suffixes are `f32` and `f64`\n "}, {"sha": "21f415bcfb0003b22a24dbf8684d7cfdb53489c1", "filename": "src/test/ui/parser/no-binary-float-literal.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fparser%2Fno-binary-float-literal.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fparser%2Fno-binary-float-literal.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fno-binary-float-literal.stderr?ref=1550787b13d3e863f06da7c0c9e17ec1dee341df", "patch": "@@ -14,7 +14,7 @@ error: invalid suffix `p4f64` for numeric literal\n   --> $DIR/no-binary-float-literal.rs:6:5\n    |\n LL |     0b101p4f64;\n-   |     ^^^^^^^^^^\n+   |     ^^^^^^^^^^ invalid suffix `p4f64`\n    |\n    = help: the suffix must be one of the integral types (`u32`, `isize`, etc)\n "}, {"sha": "258ab06d5ee2f2940c7ef45405be18782cfbeb49", "filename": "src/test/ui/parser/no-hex-float-literal.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fparser%2Fno-hex-float-literal.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1550787b13d3e863f06da7c0c9e17ec1dee341df/src%2Ftest%2Fui%2Fparser%2Fno-hex-float-literal.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fno-hex-float-literal.stderr?ref=1550787b13d3e863f06da7c0c9e17ec1dee341df", "patch": "@@ -8,7 +8,7 @@ error: invalid suffix `f` for float literal\n   --> $DIR/no-hex-float-literal.rs:6:18\n    |\n LL |     0xDEAD.BEEFp-2f;\n-   |                  ^^\n+   |                  ^^ invalid suffix `f`\n    |\n    = help: valid suffixes are `f32` and `f64`\n "}]}