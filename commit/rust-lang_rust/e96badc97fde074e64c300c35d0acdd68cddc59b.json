{"sha": "e96badc97fde074e64c300c35d0acdd68cddc59b", "node_id": "C_kwDOAAsO6NoAKGU5NmJhZGM5N2ZkZTA3NGU2NGMzMDBjMzVkMGFjZGQ2OGNkZGM1OWI", "commit": {"author": {"name": "Afonso Bordado", "email": "afonsobordado@az8.co", "date": "2022-09-27T07:15:41Z"}, "committer": {"name": "Afonso Bordado", "email": "afonsobordado@az8.co", "date": "2022-09-27T09:39:24Z"}, "message": "Disable some rand tests on MinGW", "tree": {"sha": "82c81a96dbf957e43a316f342747a38d1402d098", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/82c81a96dbf957e43a316f342747a38d1402d098"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e96badc97fde074e64c300c35d0acdd68cddc59b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e96badc97fde074e64c300c35d0acdd68cddc59b", "html_url": "https://github.com/rust-lang/rust/commit/e96badc97fde074e64c300c35d0acdd68cddc59b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e96badc97fde074e64c300c35d0acdd68cddc59b/comments", "author": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "site_admin": false}, "committer": {"login": "afonso360", "id": 1357143, "node_id": "MDQ6VXNlcjEzNTcxNDM=", "avatar_url": "https://avatars.githubusercontent.com/u/1357143?v=4", "gravatar_id": "", "url": "https://api.github.com/users/afonso360", "html_url": "https://github.com/afonso360", "followers_url": "https://api.github.com/users/afonso360/followers", "following_url": "https://api.github.com/users/afonso360/following{/other_user}", "gists_url": "https://api.github.com/users/afonso360/gists{/gist_id}", "starred_url": "https://api.github.com/users/afonso360/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/afonso360/subscriptions", "organizations_url": "https://api.github.com/users/afonso360/orgs", "repos_url": "https://api.github.com/users/afonso360/repos", "events_url": "https://api.github.com/users/afonso360/events{/privacy}", "received_events_url": "https://api.github.com/users/afonso360/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cd8becbc03916b2c1db31ce1063c40f7d0d2b38e", "url": "https://api.github.com/repos/rust-lang/rust/commits/cd8becbc03916b2c1db31ce1063c40f7d0d2b38e", "html_url": "https://github.com/rust-lang/rust/commit/cd8becbc03916b2c1db31ce1063c40f7d0d2b38e"}], "stats": {"total": 50, "additions": 47, "deletions": 3}, "files": [{"sha": "7f6cfd2ccc56f5a835de1c32b96e6094624d246d", "filename": ".github/workflows/main.yml", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/e96badc97fde074e64c300c35d0acdd68cddc59b/.github%2Fworkflows%2Fmain.yml", "raw_url": "https://github.com/rust-lang/rust/raw/e96badc97fde074e64c300c35d0acdd68cddc59b/.github%2Fworkflows%2Fmain.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fmain.yml?ref=e96badc97fde074e64c300c35d0acdd68cddc59b", "patch": "@@ -201,9 +201,6 @@ jobs:\n         \n         # This fails with a different output than expected \n         (Get-Content config.txt) -replace '(test.regex-shootout-regex-dna)', '# $1' |  Out-File config.txt\n-        \n-        # This only fails on x86_64-pc-windows-gnu when run from a windows host\n-        (Get-Content config.txt) -replace '(test.rust-random/rand)', '# $1' |  Out-File config.txt\n \n         ./y.exe test\n "}, {"sha": "108f882408df12a19b0d409ababf4b5ceb520427", "filename": "patches/0001-rand-Disable-rand-tests-on-mingw.patch", "status": "added", "additions": 47, "deletions": 0, "changes": 47, "blob_url": "https://github.com/rust-lang/rust/blob/e96badc97fde074e64c300c35d0acdd68cddc59b/patches%2F0001-rand-Disable-rand-tests-on-mingw.patch", "raw_url": "https://github.com/rust-lang/rust/raw/e96badc97fde074e64c300c35d0acdd68cddc59b/patches%2F0001-rand-Disable-rand-tests-on-mingw.patch", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/patches%2F0001-rand-Disable-rand-tests-on-mingw.patch?ref=e96badc97fde074e64c300c35d0acdd68cddc59b", "patch": "@@ -0,0 +1,47 @@\n+From eea3bbaed34ab210868c324219a862a9d5f4681c Mon Sep 17 00:00:00 2001\n+From: Afonso Bordado <afonsobordado@az8.co>\n+Date: Tue, 27 Sep 2022 08:13:58 +0100\n+Subject: [PATCH] Disable rand tests on mingw\n+\n+---\n+ rand_distr/src/pareto.rs            | 2 ++\n+ rand_distr/tests/value_stability.rs | 4 ++++\n+ 2 files changed, 6 insertions(+)\n+\n+diff --git a/rand_distr/src/pareto.rs b/rand_distr/src/pareto.rs\n+index 217899ed9a..5f8e2c9bbb 100644\n+--- a/rand_distr/src/pareto.rs\n++++ b/rand_distr/src/pareto.rs\n+@@ -107,6 +107,8 @@ mod tests {\n+     }\n+\n+     #[test]\n++    // This is broken on x86_64-pc-windows-gnu presumably due to a broken powf implementation\n++    #[cfg(not(all(target_os = \"windows\", target_env = \"gnu\")))]\n+     fn value_stability() {\n+         fn test_samples<F: Float + core::fmt::Debug, D: Distribution<F>>(\n+             distr: D, zero: F, expected: &[F],\n+diff --git a/rand_distr/tests/value_stability.rs b/rand_distr/tests/value_stability.rs\n+index 192ba748b7..10c6ac24f6 100644\n+--- a/rand_distr/tests/value_stability.rs\n++++ b/rand_distr/tests/value_stability.rs\n+@@ -72,6 +72,8 @@ fn unit_disc_stability() {\n+ }\n+\n+ #[test]\n++// This is broken on x86_64-pc-windows-gnu\n++#[cfg(not(all(target_os = \"windows\", target_env = \"gnu\")))]\n+ fn pareto_stability() {\n+     test_samples(213, Pareto::new(1.0, 1.0).unwrap(), &[\n+         1.0423688f32, 2.1235929, 4.132709, 1.4679428,\n+@@ -143,6 +145,8 @@ fn inverse_gaussian_stability() {\n+ }\n+\n+ #[test]\n++// This is broken on x86_64-pc-windows-gnu\n++#[cfg(not(all(target_os = \"windows\", target_env = \"gnu\")))]\n+ fn gamma_stability() {\n+     // Gamma has 3 cases: shape == 1, shape < 1, shape > 1\n+     test_samples(223, Gamma::new(1.0, 5.0).unwrap(), &[\n+-- \n+2.30.1.windows.1"}]}