{"sha": "81a187e8be3b8a8ee8c82efce08831c9542788db", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgxYTE4N2U4YmUzYjhhOGVlOGM4MmVmY2UwODgzMWM5NTQyNzg4ZGI=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T21:40:05Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-06-17T21:46:59Z"}, "message": "rustc: Remove metadata from the session.\n\nThis mechanism was not being used for anything. Issue #487.", "tree": {"sha": "5a193dc0721590cd5cf23095cceaf0982fdb3bd4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a193dc0721590cd5cf23095cceaf0982fdb3bd4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/81a187e8be3b8a8ee8c82efce08831c9542788db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/81a187e8be3b8a8ee8c82efce08831c9542788db", "html_url": "https://github.com/rust-lang/rust/commit/81a187e8be3b8a8ee8c82efce08831c9542788db", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/81a187e8be3b8a8ee8c82efce08831c9542788db/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "374967f67e1791db374603279944936864e53666", "url": "https://api.github.com/repos/rust-lang/rust/commits/374967f67e1791db374603279944936864e53666", "html_url": "https://github.com/rust-lang/rust/commit/374967f67e1791db374603279944936864e53666"}], "stats": {"total": 10, "additions": 2, "deletions": 8}, "files": [{"sha": "ef357281d9c52ee0bf44a49276df649d472663fb", "filename": "src/comp/driver/rustc.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/81a187e8be3b8a8ee8c82efce08831c9542788db/src%2Fcomp%2Fdriver%2Frustc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81a187e8be3b8a8ee8c82efce08831c9542788db/src%2Fcomp%2Fdriver%2Frustc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Frustc.rs?ref=81a187e8be3b8a8ee8c82efce08831c9542788db", "patch": "@@ -270,9 +270,8 @@ fn build_session(@session::options sopts) -> session::session {\n     auto target_cfg = build_target_config();\n     auto crate_cache = common::new_int_hash[session::crate_metadata]();\n     auto target_crate_num = 0;\n-    let vec[@ast::meta_item] md = [];\n     auto sess =\n-        session::session(target_crate_num, target_cfg, sopts, crate_cache, md,\n+        session::session(target_crate_num, target_cfg, sopts, crate_cache,\n                          front::codemap::new_codemap());\n     ret sess;\n }"}, {"sha": "9c810e30baf9d22c7162137087086c185964fd1c", "filename": "src/comp/driver/session.rs", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/81a187e8be3b8a8ee8c82efce08831c9542788db/src%2Fcomp%2Fdriver%2Fsession.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81a187e8be3b8a8ee8c82efce08831c9542788db/src%2Fcomp%2Fdriver%2Fsession.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Fdriver%2Fsession.rs?ref=81a187e8be3b8a8ee8c82efce08831c9542788db", "patch": "@@ -66,7 +66,6 @@ obj session(ast::crate_num cnum,\n             @config targ_cfg,\n             @options opts,\n             map::hashmap[int, crate_metadata] crates,\n-            mutable vec[@ast::meta_item] metadata,\n             codemap::codemap cm) {\n     fn get_targ_cfg() -> @config { ret targ_cfg; }\n     fn get_opts() -> @options { ret opts; }\n@@ -81,8 +80,6 @@ obj session(ast::crate_num cnum,\n         emit_diagnostic(none[span], msg, \"error\", 9u8, cm);\n         fail;\n     }\n-    fn add_metadata(vec[@ast::meta_item] data) { metadata = metadata + data; }\n-    fn get_metadata() -> vec[@ast::meta_item] { ret metadata; }\n     fn span_warn(span sp, str msg) {\n         // FIXME: Use constants, but rustboot doesn't know how to export them.\n "}, {"sha": "3d041124a966a75cf4b8b7b569db0f20dbd90588", "filename": "src/comp/front/eval.rs", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/81a187e8be3b8a8ee8c82efce08831c9542788db/src%2Fcomp%2Ffront%2Feval.rs", "raw_url": "https://github.com/rust-lang/rust/raw/81a187e8be3b8a8ee8c82efce08831c9542788db/src%2Fcomp%2Ffront%2Feval.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcomp%2Ffront%2Feval.rs?ref=81a187e8be3b8a8ee8c82efce08831c9542788db", "patch": "@@ -316,9 +316,7 @@ fn eval_crate_directive(ctx cx, env e, @ast::crate_directive cdir, str prefix,\n         case (ast::cdir_view_item(?vi)) {\n             vec::push[@ast::view_item](view_items, vi);\n         }\n-        case (ast::cdir_meta(?vi, ?mi)) {\n-            if (vi == ast::export_meta) { cx.sess.add_metadata(mi); }\n-        }\n+        case (ast::cdir_meta(?vi, ?mi)) { }\n         case (ast::cdir_syntax(?pth)) { }\n         case (ast::cdir_auth(?pth, ?eff)) { }\n     }"}]}