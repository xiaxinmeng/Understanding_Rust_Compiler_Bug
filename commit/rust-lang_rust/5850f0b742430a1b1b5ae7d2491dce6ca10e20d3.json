{"sha": "5850f0b742430a1b1b5ae7d2491dce6ca10e20d3", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU4NTBmMGI3NDI0MzBhMWIxYjVhZTdkMjQ5MWRjZTZjYTEwZTIwZDM=", "commit": {"author": {"name": "oberien", "email": "jaro.fietz@gmx.de", "date": "2018-01-19T13:55:20Z"}, "committer": {"name": "oberien", "email": "jaro.fietz@gmx.de", "date": "2018-01-19T13:55:25Z"}, "message": "Fix off-by-ones", "tree": {"sha": "b6ae586dac4a717ec3b62cdb19354dbf7900cf60", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b6ae586dac4a717ec3b62cdb19354dbf7900cf60"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5850f0b742430a1b1b5ae7d2491dce6ca10e20d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5850f0b742430a1b1b5ae7d2491dce6ca10e20d3", "html_url": "https://github.com/rust-lang/rust/commit/5850f0b742430a1b1b5ae7d2491dce6ca10e20d3", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5850f0b742430a1b1b5ae7d2491dce6ca10e20d3/comments", "author": {"login": "oberien", "id": 4820508, "node_id": "MDQ6VXNlcjQ4MjA1MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/4820508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oberien", "html_url": "https://github.com/oberien", "followers_url": "https://api.github.com/users/oberien/followers", "following_url": "https://api.github.com/users/oberien/following{/other_user}", "gists_url": "https://api.github.com/users/oberien/gists{/gist_id}", "starred_url": "https://api.github.com/users/oberien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oberien/subscriptions", "organizations_url": "https://api.github.com/users/oberien/orgs", "repos_url": "https://api.github.com/users/oberien/repos", "events_url": "https://api.github.com/users/oberien/events{/privacy}", "received_events_url": "https://api.github.com/users/oberien/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oberien", "id": 4820508, "node_id": "MDQ6VXNlcjQ4MjA1MDg=", "avatar_url": "https://avatars.githubusercontent.com/u/4820508?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oberien", "html_url": "https://github.com/oberien", "followers_url": "https://api.github.com/users/oberien/followers", "following_url": "https://api.github.com/users/oberien/following{/other_user}", "gists_url": "https://api.github.com/users/oberien/gists{/gist_id}", "starred_url": "https://api.github.com/users/oberien/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oberien/subscriptions", "organizations_url": "https://api.github.com/users/oberien/orgs", "repos_url": "https://api.github.com/users/oberien/repos", "events_url": "https://api.github.com/users/oberien/events{/privacy}", "received_events_url": "https://api.github.com/users/oberien/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "37771d42d72d80a3025cf1bbf2aa58df79669a4e", "url": "https://api.github.com/repos/rust-lang/rust/commits/37771d42d72d80a3025cf1bbf2aa58df79669a4e", "html_url": "https://github.com/rust-lang/rust/commit/37771d42d72d80a3025cf1bbf2aa58df79669a4e"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "33c00989fd286236d7518c41d9970e57337840af", "filename": "src/libcore/iter/mod.rs", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5850f0b742430a1b1b5ae7d2491dce6ca10e20d3/src%2Flibcore%2Fiter%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5850f0b742430a1b1b5ae7d2491dce6ca10e20d3/src%2Flibcore%2Fiter%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fiter%2Fmod.rs?ref=5850f0b742430a1b1b5ae7d2491dce6ca10e20d3", "patch": "@@ -698,13 +698,16 @@ impl<I> Iterator for StepBy<I> where I: Iterator {\n     #[inline]\n     fn nth(&mut self, mut n: usize) -> Option<Self::Item> {\n         if self.first_take {\n+            self.first_take = false;\n+            let first = self.iter.next();\n             if n == 0 {\n-                self.first_take = false;\n-                return self.iter.next()\n+                return first;\n             }\n             n -= 1;\n         }\n-        self.iter.nth(n * self.step)\n+        // n and self.step are indices, thus we need to add 1 before multiplying.\n+        // After that we need to subtract 1 from the result to convert it back to an index.\n+        self.iter.nth((n + 1) * (self.step + 1) - 1)\n     }\n }\n "}]}