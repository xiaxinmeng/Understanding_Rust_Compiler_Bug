{"sha": "5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7", "node_id": "C_kwDOAAsO6NoAKDVmZjAwZjk2ZTYyMjQ4ZTJlOWZlODIzM2ZmZDk4ZTQ3YmYzZGZkYzc", "commit": {"author": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2023-02-21T10:35:19Z"}, "committer": {"name": "Michael Woerister", "email": "michaelwoerister@posteo", "date": "2023-03-01T09:19:25Z"}, "message": "Use DefIdMap instead of FxHashMap for impl_item_implementor_ids query.", "tree": {"sha": "389631ed5a114616f833020fd71f6b0d94d96817", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/389631ed5a114616f833020fd71f6b0d94d96817"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7", "html_url": "https://github.com/rust-lang/rust/commit/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7/comments", "author": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "committer": {"login": "michaelwoerister", "id": 1825894, "node_id": "MDQ6VXNlcjE4MjU4OTQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1825894?v=4", "gravatar_id": "", "url": "https://api.github.com/users/michaelwoerister", "html_url": "https://github.com/michaelwoerister", "followers_url": "https://api.github.com/users/michaelwoerister/followers", "following_url": "https://api.github.com/users/michaelwoerister/following{/other_user}", "gists_url": "https://api.github.com/users/michaelwoerister/gists{/gist_id}", "starred_url": "https://api.github.com/users/michaelwoerister/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/michaelwoerister/subscriptions", "organizations_url": "https://api.github.com/users/michaelwoerister/orgs", "repos_url": "https://api.github.com/users/michaelwoerister/repos", "events_url": "https://api.github.com/users/michaelwoerister/events{/privacy}", "received_events_url": "https://api.github.com/users/michaelwoerister/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5983a3a99ea631da9d7d1ce510a6761913f92a89", "url": "https://api.github.com/repos/rust-lang/rust/commits/5983a3a99ea631da9d7d1ce510a6761913f92a89", "html_url": "https://github.com/rust-lang/rust/commit/5983a3a99ea631da9d7d1ce510a6761913f92a89"}], "stats": {"total": 7, "additions": 3, "deletions": 4}, "files": [{"sha": "fc4b3a2413a6eeb620c2c7babe2f6a3255c7324b", "filename": "compiler/rustc_middle/src/query/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_middle%2Fsrc%2Fquery%2Fmod.rs?ref=5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7", "patch": "@@ -757,7 +757,7 @@ rustc_queries! {\n     ///\n     /// The map returned for `tcx.impl_item_implementor_ids(impl_id)` would be\n     ///`{ trait_f: impl_f, trait_g: impl_g }`\n-    query impl_item_implementor_ids(impl_id: DefId) -> &'tcx FxHashMap<DefId, DefId> {\n+    query impl_item_implementor_ids(impl_id: DefId) -> &'tcx DefIdMap<DefId> {\n         arena_cache\n         desc { |tcx| \"comparing impl items against trait for `{}`\", tcx.def_path_str(impl_id) }\n     }"}, {"sha": "8312988ca3e62120df26b5ff1738977a959d726a", "filename": "compiler/rustc_ty_utils/src/assoc.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7/compiler%2Frustc_ty_utils%2Fsrc%2Fassoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7/compiler%2Frustc_ty_utils%2Fsrc%2Fassoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ty_utils%2Fsrc%2Fassoc.rs?ref=5ff00f96e62248e2e9fe8233ffd98e47bf3dfdc7", "patch": "@@ -1,7 +1,6 @@\n-use rustc_data_structures::fx::FxHashMap;\n use rustc_hir as hir;\n use rustc_hir::def::DefKind;\n-use rustc_hir::def_id::{DefId, LocalDefId};\n+use rustc_hir::def_id::{DefId, DefIdMap, LocalDefId};\n use rustc_hir::definitions::DefPathData;\n use rustc_hir::intravisit::{self, Visitor};\n use rustc_middle::ty::{self, DefIdTree, TyCtxt};\n@@ -40,7 +39,7 @@ fn associated_items(tcx: TyCtxt<'_>, def_id: DefId) -> ty::AssocItems {\n     }\n }\n \n-fn impl_item_implementor_ids(tcx: TyCtxt<'_>, impl_id: DefId) -> FxHashMap<DefId, DefId> {\n+fn impl_item_implementor_ids(tcx: TyCtxt<'_>, impl_id: DefId) -> DefIdMap<DefId> {\n     tcx.associated_items(impl_id)\n         .in_definition_order()\n         .filter_map(|item| item.trait_item_def_id.map(|trait_item| (trait_item, item.def_id)))"}]}