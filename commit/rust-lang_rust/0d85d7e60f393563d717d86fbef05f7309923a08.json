{"sha": "0d85d7e60f393563d717d86fbef05f7309923a08", "node_id": "MDY6Q29tbWl0NzI0NzEyOjBkODVkN2U2MGYzOTM1NjNkNzE3ZDg2ZmJlZjA1ZjczMDk5MjNhMDg=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-07T18:34:23Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2019-08-21T05:29:44Z"}, "message": "Fix suggestions for redundant_pattern_matching\n\nFixes the problem displayed in https://github.com/rust-lang/rust-clippy/issues/4344#issuecomment-519206388.\n\nWe now append `{}` to the suggestion so that the conditional has the\ncorrect syntax again.\n\n(If we were to _remove_ the `if` instead, it would trigger the\n`unused_must_use` warning for `#[must_use]` types.", "tree": {"sha": "5d6a39f7e7552821cb1d5cb79111c83f545afadc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5d6a39f7e7552821cb1d5cb79111c83f545afadc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0d85d7e60f393563d717d86fbef05f7309923a08", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJEBAABCgAuFiEEj4U0bmbiMSg/mWqvgqphyqETl+YFAl1c1sgQHGRldkBwaGFu\nc2NoLm5ldAAKCRCCqmHKoROX5uY6D/9i930V5wsj5TTmnoV95acKxgM1rNgFrE3v\nzT21UF+EwogOXVFXow5/+Qsq+kYPrijsfgJN1O72q7AVE1G7aFzt9VT8Snt9ATmz\nZAm28OjXZeSJF/RY2c2qAKd/AVc/DelxDhrhnYJIaUAUKeXjiX8YLUZhzqUAbjfD\n12l9vuzA+a0ptUMDNbXYpi+FnsFVzWrDUstW+U80NCd2LtmIxDfAj3VzSdtgJxV8\nz+x6c2OLneX8s12+aT4Ze7Wa0tGw9i3fG8t+uQRhzi7ag7zhHo8fV5HPvQa/d1WS\nn3H1NFPMGlNkondBtGdb4b+wJaM8L6/HE9BpJ4m1tYJw91xSClOSaSuMm8eC7KUk\nPtJLJVlJXwdepDWaKDiOE/Rb5Afq3io9ACOIsFCJrGOC2XIl0G+xoOR6eHWdoTTY\nrKlQOydCGWUeibu9fhlQ0yGJJU2+XqnrO7ba1y+80qMpnQIyoNuRlfNy1XAFOFF4\nzt/g4UAfWzTFNBvldDC6HdnVgv5Xh+1VTRp0lBCX4XM99gJgEEwqrESV6dzU8YZ7\nqg4uZJfyvpoh+59rUGzpkBMBIM/SXj/iLNYul5XJ2201DdoRJySZkXOv5U/vn4V4\nPbxE39r5xRBjKMZHAf9fByacCPw9T0src6FCZKiJlVT+BzsSPeCZv6dk55j4kkce\nS8oC5syWHw==\n=PkwY\n-----END PGP SIGNATURE-----", "payload": "tree 5d6a39f7e7552821cb1d5cb79111c83f545afadc\nparent 460e2659f1365fd987c2aad3433855ef24f1b700\nauthor Philipp Hansch <dev@phansch.net> 1565202863 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1566365384 +0200\n\nFix suggestions for redundant_pattern_matching\n\nFixes the problem displayed in https://github.com/rust-lang/rust-clippy/issues/4344#issuecomment-519206388.\n\nWe now append `{}` to the suggestion so that the conditional has the\ncorrect syntax again.\n\n(If we were to _remove_ the `if` instead, it would trigger the\n`unused_must_use` warning for `#[must_use]` types.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0d85d7e60f393563d717d86fbef05f7309923a08", "html_url": "https://github.com/rust-lang/rust/commit/0d85d7e60f393563d717d86fbef05f7309923a08", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0d85d7e60f393563d717d86fbef05f7309923a08/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "460e2659f1365fd987c2aad3433855ef24f1b700", "url": "https://api.github.com/repos/rust-lang/rust/commits/460e2659f1365fd987c2aad3433855ef24f1b700", "html_url": "https://github.com/rust-lang/rust/commit/460e2659f1365fd987c2aad3433855ef24f1b700"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "68862f838cb051e2d2315d0701a031d3bf66696a", "filename": "clippy_lints/src/redundant_pattern_matching.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0d85d7e60f393563d717d86fbef05f7309923a08/clippy_lints%2Fsrc%2Fredundant_pattern_matching.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0d85d7e60f393563d717d86fbef05f7309923a08/clippy_lints%2Fsrc%2Fredundant_pattern_matching.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fredundant_pattern_matching.rs?ref=0d85d7e60f393563d717d86fbef05f7309923a08", "patch": "@@ -90,8 +90,8 @@ fn find_sugg_for_if_let<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr,\n                 db.span_suggestion(\n                     span,\n                     \"try this\",\n-                    format!(\"if {}.{}\", snippet(cx, op.span, \"_\"), good_method),\n-                    Applicability::MachineApplicable, // snippet\n+                    format!(\"{}.{}\", snippet(cx, op.span, \"_\"), good_method),\n+                    Applicability::MaybeIncorrect, // snippet\n                 );\n             },\n         );\n@@ -154,7 +154,7 @@ fn find_sugg_for_match<'a, 'tcx>(cx: &LateContext<'a, 'tcx>, expr: &'tcx Expr, o\n                         span,\n                         \"try this\",\n                         format!(\"{}.{}\", snippet(cx, op.span, \"_\"), good_method),\n-                        Applicability::MachineApplicable, // snippet\n+                        Applicability::MaybeIncorrect, // snippet\n                     );\n                 },\n             );"}, {"sha": "a904c5ceb9d5ffbb77a76d96b3049cc021f0c896", "filename": "tests/ui/redundant_pattern_matching.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0d85d7e60f393563d717d86fbef05f7309923a08/tests%2Fui%2Fredundant_pattern_matching.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/0d85d7e60f393563d717d86fbef05f7309923a08/tests%2Fui%2Fredundant_pattern_matching.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fredundant_pattern_matching.stderr?ref=0d85d7e60f393563d717d86fbef05f7309923a08", "patch": "@@ -2,27 +2,27 @@ error: redundant pattern matching, consider using `is_ok()`\n   --> $DIR/redundant_pattern_matching.rs:5:12\n    |\n LL |     if let Ok(_) = Ok::<i32, i32>(42) {}\n-   |     -------^^^^^------------------------ help: try this: `if Ok::<i32, i32>(42).is_ok()`\n+   |     -------^^^^^------------------------ help: try this: `Ok::<i32, i32>(42).is_ok()`\n    |\n    = note: `-D clippy::redundant-pattern-matching` implied by `-D warnings`\n \n error: redundant pattern matching, consider using `is_err()`\n   --> $DIR/redundant_pattern_matching.rs:7:12\n    |\n LL |     if let Err(_) = Err::<i32, i32>(42) {}\n-   |     -------^^^^^^------------------------- help: try this: `if Err::<i32, i32>(42).is_err()`\n+   |     -------^^^^^^------------------------- help: try this: `Err::<i32, i32>(42).is_err()`\n \n error: redundant pattern matching, consider using `is_none()`\n   --> $DIR/redundant_pattern_matching.rs:9:12\n    |\n LL |     if let None = None::<()> {}\n-   |     -------^^^^---------------- help: try this: `if None::<()>.is_none()`\n+   |     -------^^^^---------------- help: try this: `None::<()>.is_none()`\n \n error: redundant pattern matching, consider using `is_some()`\n   --> $DIR/redundant_pattern_matching.rs:11:12\n    |\n LL |     if let Some(_) = Some(42) {}\n-   |     -------^^^^^^^-------------- help: try this: `if Some(42).is_some()`\n+   |     -------^^^^^^^-------------- help: try this: `Some(42).is_some()`\n \n error: redundant pattern matching, consider using `is_ok()`\n   --> $DIR/redundant_pattern_matching.rs:25:5"}]}