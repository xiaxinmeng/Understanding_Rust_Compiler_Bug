{"sha": "1536d7220b847d8a843a3357cc62ef5704f2c690", "node_id": "C_kwDOAAsO6NoAKDE1MzZkNzIyMGI4NDdkOGE4NDNhMzM1N2NjNjJlZjU3MDRmMmM2OTA", "commit": {"author": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2021-10-21T22:36:51Z"}, "committer": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2021-10-21T22:36:51Z"}, "message": "Don't suggest importing items with hygienic names\n\nThis will potentially hide a few correct suggestions, but importing\nthese items from another module is not generally possible.", "tree": {"sha": "6aa49a0b1775c1847c9eaad088414e1ac667b0dc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6aa49a0b1775c1847c9eaad088414e1ac667b0dc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1536d7220b847d8a843a3357cc62ef5704f2c690", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1536d7220b847d8a843a3357cc62ef5704f2c690", "html_url": "https://github.com/rust-lang/rust/commit/1536d7220b847d8a843a3357cc62ef5704f2c690", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1536d7220b847d8a843a3357cc62ef5704f2c690/comments", "author": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ecb49eba3770e4826346486252b9e7a1b5fcb33", "url": "https://api.github.com/repos/rust-lang/rust/commits/4ecb49eba3770e4826346486252b9e7a1b5fcb33", "html_url": "https://github.com/rust-lang/rust/commit/4ecb49eba3770e4826346486252b9e7a1b5fcb33"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "aefb3f2cb9c8399d25be44f42d7f20a58249bca0", "filename": "compiler/rustc_resolve/src/diagnostics.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1536d7220b847d8a843a3357cc62ef5704f2c690/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1536d7220b847d8a843a3357cc62ef5704f2c690/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_resolve%2Fsrc%2Fdiagnostics.rs?ref=1536d7220b847d8a843a3357cc62ef5704f2c690", "patch": "@@ -831,9 +831,11 @@ impl<'a> Resolver<'a> {\n \n                 // collect results based on the filter function\n                 // avoid suggesting anything from the same module in which we are resolving\n+                // avoid suggesting anything with a hygienic name\n                 if ident.name == lookup_ident.name\n                     && ns == namespace\n                     && !ptr::eq(in_module, parent_scope.module)\n+                    && !ident.span.normalize_to_macros_2_0().from_expansion()\n                 {\n                     let res = name_binding.res();\n                     if filter_fn(res) {"}, {"sha": "724d1904dc33c7125d7231f2190abc64d7d4f7c9", "filename": "compiler/rustc_span/src/hygiene.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/1536d7220b847d8a843a3357cc62ef5704f2c690/compiler%2Frustc_span%2Fsrc%2Fhygiene.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1536d7220b847d8a843a3357cc62ef5704f2c690/compiler%2Frustc_span%2Fsrc%2Fhygiene.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_span%2Fsrc%2Fhygiene.rs?ref=1536d7220b847d8a843a3357cc62ef5704f2c690", "patch": "@@ -709,7 +709,7 @@ impl SyntaxContext {\n     ///         pub fn f() {} // `f`'s `SyntaxContext` has a single `ExpnId` from `m`.\n     ///         pub fn $i() {} // `$i`'s `SyntaxContext` is empty.\n     ///     }\n-    ///     n(f);\n+    ///     n!(f);\n     ///     macro n($j:ident) {\n     ///         use foo::*;\n     ///         f(); // `f`'s `SyntaxContext` has a mark from `m` and a mark from `n`"}]}