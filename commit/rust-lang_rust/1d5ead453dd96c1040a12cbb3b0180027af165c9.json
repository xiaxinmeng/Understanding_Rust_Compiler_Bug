{"sha": "1d5ead453dd96c1040a12cbb3b0180027af165c9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFkNWVhZDQ1M2RkOTZjMTA0MGExMmNiYjNiMDE4MDAyN2FmMTY1Yzk=", "commit": {"author": {"name": "Vitaly _Vi Shukela", "email": "vi0oss@gmail.com", "date": "2017-12-18T21:35:43Z"}, "committer": {"name": "Vitaly _Vi Shukela", "email": "vi0oss@gmail.com", "date": "2017-12-18T21:35:43Z"}, "message": "Add Hash impl for SystemTime and Instant\n\nCloses #46670.", "tree": {"sha": "5df65995c6ae6eb6b136c717b5cc59e19a842d96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5df65995c6ae6eb6b136c717b5cc59e19a842d96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1d5ead453dd96c1040a12cbb3b0180027af165c9", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABEIAB0WIQQzEHnM5f9ubG8rMBnAlyIdbgPfaAUCWjg0rwAKCRDAlyIdbgPf\naK3dAP98QQwIzvfdJatQf+uQD0pJy+GHWsAgTo70z1s8vEBBfAEAgzJFf6GxD8zt\nWSEj4NfaHYsWdfPVbu2+rkvWPG3L8u4=\n=/uwy\n-----END PGP SIGNATURE-----", "payload": "tree 5df65995c6ae6eb6b136c717b5cc59e19a842d96\nparent a3a7203e2c9ed30a501da86f3fa1f9efe707ac94\nauthor Vitaly _Vi Shukela <vi0oss@gmail.com> 1513632943 +0300\ncommitter Vitaly _Vi Shukela <vi0oss@gmail.com> 1513632943 +0300\n\nAdd Hash impl for SystemTime and Instant\n\nCloses #46670.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1d5ead453dd96c1040a12cbb3b0180027af165c9", "html_url": "https://github.com/rust-lang/rust/commit/1d5ead453dd96c1040a12cbb3b0180027af165c9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1d5ead453dd96c1040a12cbb3b0180027af165c9/comments", "author": {"login": "vi", "id": 173219, "node_id": "MDQ6VXNlcjE3MzIxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vi", "html_url": "https://github.com/vi", "followers_url": "https://api.github.com/users/vi/followers", "following_url": "https://api.github.com/users/vi/following{/other_user}", "gists_url": "https://api.github.com/users/vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vi/subscriptions", "organizations_url": "https://api.github.com/users/vi/orgs", "repos_url": "https://api.github.com/users/vi/repos", "events_url": "https://api.github.com/users/vi/events{/privacy}", "received_events_url": "https://api.github.com/users/vi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vi", "id": 173219, "node_id": "MDQ6VXNlcjE3MzIxOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/173219?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vi", "html_url": "https://github.com/vi", "followers_url": "https://api.github.com/users/vi/followers", "following_url": "https://api.github.com/users/vi/following{/other_user}", "gists_url": "https://api.github.com/users/vi/gists{/gist_id}", "starred_url": "https://api.github.com/users/vi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vi/subscriptions", "organizations_url": "https://api.github.com/users/vi/orgs", "repos_url": "https://api.github.com/users/vi/repos", "events_url": "https://api.github.com/users/vi/events{/privacy}", "received_events_url": "https://api.github.com/users/vi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a3a7203e2c9ed30a501da86f3fa1f9efe707ac94", "url": "https://api.github.com/repos/rust-lang/rust/commits/a3a7203e2c9ed30a501da86f3fa1f9efe707ac94", "html_url": "https://github.com/rust-lang/rust/commit/a3a7203e2c9ed30a501da86f3fa1f9efe707ac94"}], "stats": {"total": 45, "additions": 34, "deletions": 11}, "files": [{"sha": "cf798500b7fd2d716dcccaaa7adb62250b879a88", "filename": "src/libstd/sys/redox/time.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Fredox%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Fredox%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fredox%2Ftime.rs?ref=1d5ead453dd96c1040a12cbb3b0180027af165c9", "patch": "@@ -13,6 +13,7 @@ use fmt;\n use sys::{cvt, syscall};\n use time::Duration;\n use convert::TryInto;\n+use core::hash::{Hash, Hasher};\n \n const NSEC_PER_SEC: u64 = 1_000_000_000;\n \n@@ -110,12 +111,19 @@ impl Ord for Timespec {\n     }\n }\n \n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+impl Hash for Timespec {\n+    fn hash<H : Hasher>(&self, state: &mut H) {\n+        self.t.tv_sec.hash(state);\n+        self.t.tv_nsec.hash(state);\n+    }\n+}\n+\n+#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n pub struct Instant {\n     t: Timespec,\n }\n \n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n pub struct SystemTime {\n     t: Timespec,\n }"}, {"sha": "83127935909931211957d8df0e34e7c599e92ceb", "filename": "src/libstd/sys/unix/time.rs", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Funix%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Funix%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Funix%2Ftime.rs?ref=1d5ead453dd96c1040a12cbb3b0180027af165c9", "patch": "@@ -11,6 +11,7 @@\n use cmp::Ordering;\n use libc;\n use time::Duration;\n+use core::hash::{Hash, Hasher};\n \n pub use self::inner::{Instant, SystemTime, UNIX_EPOCH};\n use convert::TryInto;\n@@ -111,6 +112,13 @@ impl Ord for Timespec {\n     }\n }\n \n+impl Hash for Timespec {\n+    fn hash<H : Hasher>(&self, state: &mut H) {\n+        self.t.tv_sec.hash(state);\n+        self.t.tv_nsec.hash(state);\n+    }\n+}\n+\n #[cfg(any(target_os = \"macos\", target_os = \"ios\"))]\n mod inner {\n     use fmt;\n@@ -123,12 +131,12 @@ mod inner {\n     use super::NSEC_PER_SEC;\n     use super::Timespec;\n \n-    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Debug)]\n+    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Debug, Hash)]\n     pub struct Instant {\n         t: u64\n     }\n \n-    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n     pub struct SystemTime {\n         t: Timespec,\n     }\n@@ -255,12 +263,12 @@ mod inner {\n \n     use super::Timespec;\n \n-    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n     pub struct Instant {\n         t: Timespec,\n     }\n \n-    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+    #[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n     pub struct SystemTime {\n         t: Timespec,\n     }"}, {"sha": "c269def98f6ffdae4f226414e678871adc3e6df7", "filename": "src/libstd/sys/wasm/time.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Fwasm%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Fwasm%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwasm%2Ftime.rs?ref=1d5ead453dd96c1040a12cbb3b0180027af165c9", "patch": "@@ -11,10 +11,10 @@\n use fmt;\n use time::Duration;\n \n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Debug)]\n+#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Debug, Hash)]\n pub struct Instant;\n \n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n pub struct SystemTime;\n \n pub const UNIX_EPOCH: SystemTime = SystemTime;"}, {"sha": "07e64d386a1c2b7c94927fda6d73a1f6b190ba5e", "filename": "src/libstd/sys/windows/time.rs", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Fwindows%2Ftime.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Fsys%2Fwindows%2Ftime.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fsys%2Fwindows%2Ftime.rs?ref=1d5ead453dd96c1040a12cbb3b0180027af165c9", "patch": "@@ -17,11 +17,12 @@ use sys::cvt;\n use sys_common::mul_div_u64;\n use time::Duration;\n use convert::TryInto;\n+use core::hash::{Hash, Hasher};\n \n const NANOS_PER_SEC: u64 = 1_000_000_000;\n const INTERVALS_PER_SEC: u64 = NANOS_PER_SEC / 100;\n \n-#[derive(Copy, Clone, Eq, PartialEq, Ord, PartialOrd, Debug)]\n+#[derive(Copy, Clone, Eq, PartialEq, Ord, PartialOrd, Debug, Hash)]\n pub struct Instant {\n     t: c::LARGE_INTEGER,\n }\n@@ -173,6 +174,12 @@ impl From<c::FILETIME> for SystemTime {\n     }\n }\n \n+impl Hash for SystemTime {\n+    fn hash<H : Hasher>(&self, state: &mut H) {\n+        self.intervals().hash(state)\n+    }\n+}\n+\n fn dur2intervals(d: &Duration) -> i64 {\n     d.as_secs()\n         .checked_mul(INTERVALS_PER_SEC)"}, {"sha": "6ce3b3e8a003191049ab3b4ebc2d8c4e04e2cec4", "filename": "src/libstd/time/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Ftime%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1d5ead453dd96c1040a12cbb3b0180027af165c9/src%2Flibstd%2Ftime%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Ftime%2Fmod.rs?ref=1d5ead453dd96c1040a12cbb3b0180027af165c9", "patch": "@@ -66,7 +66,7 @@ mod duration;\n ///    println!(\"{}\", now.elapsed().as_secs());\n /// }\n /// ```\n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n #[stable(feature = \"time2\", since = \"1.8.0\")]\n pub struct Instant(time::Instant);\n \n@@ -118,7 +118,7 @@ pub struct Instant(time::Instant);\n ///    }\n /// }\n /// ```\n-#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord)]\n+#[derive(Copy, Clone, PartialEq, Eq, PartialOrd, Ord, Hash)]\n #[stable(feature = \"time2\", since = \"1.8.0\")]\n pub struct SystemTime(time::SystemTime);\n "}]}