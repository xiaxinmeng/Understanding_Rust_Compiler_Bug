{"sha": "36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2MzUzYmIxODI3ZGJkMmVmY2RlMmQxOGM4NTk4YzRjYzVlMmUyOTY=", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2020-06-11T17:33:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-06-11T17:33:20Z"}, "message": "Merge #4833\n\n4833: Separating parsing of `for` in predicates and types r=matklad a=matthewjasper\n\nWe now correctly accept `for<'a> (&'a F): Fn(&'a str)` in a where clause and correctly reject `for<'a> &'a u32` as a type.\n\nCo-authored-by: Matthew Jasper <mjjasper1@gmail.com>", "tree": {"sha": "5b08ffc573918a2210abbb5b06ec523770cbab1b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5b08ffc573918a2210abbb5b06ec523770cbab1b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJe4mrgCRBK7hj4Ov3rIwAAdHIIACFgsfd5rLwdozoSDEzpmx4R\nn222ePpwx+6WbruHdXlau8C/02R5avJ5dKZEFPoHL8TdxvFxdqfOgNpexM0GfPTA\nBGXECT/qydN0pS5sy9kZejcHuI7hO4zgQrNXR2kkAOSk605b0DvyKoeh2ioLlTXY\nZqHhfmeNKtYViIcs0oTG1g9QGRz615LZ6Z/Gxdh3dL1jVX6qDWPrOJjGNwkPjyVJ\nRUcFhbEEpnzDdJjDYKcMCCEEshzvsuUhVS+b7xrYCulYTFRON8LnzQathCRfFf4V\nM6h/4p2f2xHR6DbH7/3EfHyzKCOOmTmHDbMFYxI+XuuuzvYgQM2PjWakqMg5AP8=\n=vIQ5\n-----END PGP SIGNATURE-----\n", "payload": "tree 5b08ffc573918a2210abbb5b06ec523770cbab1b\nparent bd61ad756cc0a7bfeaa5dae81ac5ab50a2e71697\nparent 8622e4cc1b79f5d23b8a2c6610d749f5b987ea7e\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1591896800 +0000\ncommitter GitHub <noreply@github.com> 1591896800 +0000\n\nMerge #4833\n\n4833: Separating parsing of `for` in predicates and types r=matklad a=matthewjasper\n\nWe now correctly accept `for<'a> (&'a F): Fn(&'a str)` in a where clause and correctly reject `for<'a> &'a u32` as a type.\n\nCo-authored-by: Matthew Jasper <mjjasper1@gmail.com>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "html_url": "https://github.com/rust-lang/rust/commit/36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd61ad756cc0a7bfeaa5dae81ac5ab50a2e71697", "url": "https://api.github.com/repos/rust-lang/rust/commits/bd61ad756cc0a7bfeaa5dae81ac5ab50a2e71697", "html_url": "https://github.com/rust-lang/rust/commit/bd61ad756cc0a7bfeaa5dae81ac5ab50a2e71697"}, {"sha": "8622e4cc1b79f5d23b8a2c6610d749f5b987ea7e", "url": "https://api.github.com/repos/rust-lang/rust/commits/8622e4cc1b79f5d23b8a2c6610d749f5b987ea7e", "html_url": "https://github.com/rust-lang/rust/commit/8622e4cc1b79f5d23b8a2c6610d749f5b987ea7e"}], "stats": {"total": 1134, "additions": 843, "deletions": 291}, "files": [{"sha": "325d566adee09c70a219ddb0455a680eb200901d", "filename": "crates/ra_parser/src/grammar/type_params.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftype_params.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftype_params.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftype_params.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -191,10 +191,14 @@ fn where_predicate(p: &mut Parser) {\n         }\n         _ => {\n             // test where_pred_for\n-            // fn test<F>()\n+            // fn for_trait<F>()\n             // where\n             //    for<'a> F: Fn(&'a str)\n             // { }\n+            if p.at(T![for]) {\n+                types::for_binder(p);\n+            }\n+\n             types::type_(p);\n \n             if p.at(T![:]) {"}, {"sha": "9e8e3bd97f829d3c41d1d05fcbc1c085f05026b4", "filename": "crates/ra_parser/src/grammar/types.rs", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Ftypes.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -216,19 +216,21 @@ pub(super) fn for_binder(p: &mut Parser) {\n \n // test for_type\n // type A = for<'a> fn() -> ();\n-// fn foo<T>(_t: &T) where for<'a> &'a T: Iterator {}\n-// fn bar<T>(_t: &T) where for<'a> &'a mut T: Iterator {}\n-// fn baz<T>(_t: &T) where for<'a> <&'a T as Baz>::Foo: Iterator {}\n+// type B = for<'a> unsafe extern \"C\" fn(&'a ()) -> ();\n+// type Obj = for<'a> PartialEq<&'a i32>;\n pub(super) fn for_type(p: &mut Parser) {\n     assert!(p.at(T![for]));\n     let m = p.start();\n     for_binder(p);\n     match p.current() {\n-        T![fn] | T![unsafe] | T![extern] => fn_pointer_type(p),\n-        T![&] => reference_type(p),\n-        _ if paths::is_path_start(p) => path_type_(p, false),\n-        _ => p.error(\"expected a path\"),\n+        T![fn] | T![unsafe] | T![extern] => {}\n+        // OK: legacy trait object format\n+        _ if paths::is_use_path_start(p) => {}\n+        _ => {\n+            p.error(\"expected a function pointer or path\");\n+        }\n     }\n+    type_no_bounds(p);\n     m.complete(p, FOR_TYPE);\n }\n "}, {"sha": "9d02aeef3fa2a7659e90428f9b86daa845eed37a", "filename": "crates/ra_syntax/src/ast.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Fsrc%2Fast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Fsrc%2Fast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fast.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -285,6 +285,8 @@ where\n     let pred = predicates.next().unwrap();\n     let mut bounds = pred.type_bound_list().unwrap().bounds();\n \n+    assert!(pred.for_token().is_none());\n+    assert!(pred.type_param_list().is_none());\n     assert_eq!(\"T\", pred.type_ref().unwrap().syntax().text().to_string());\n     assert_bound(\"Clone\", bounds.next());\n     assert_bound(\"Copy\", bounds.next());\n@@ -322,6 +324,8 @@ where\n     let pred = predicates.next().unwrap();\n     let mut bounds = pred.type_bound_list().unwrap().bounds();\n \n-    assert_eq!(\"for<'a> F\", pred.type_ref().unwrap().syntax().text().to_string());\n+    assert!(pred.for_token().is_some());\n+    assert_eq!(\"<'a>\", pred.type_param_list().unwrap().syntax().text().to_string());\n+    assert_eq!(\"F\", pred.type_ref().unwrap().syntax().text().to_string());\n     assert_bound(\"Fn(&'a str)\", bounds.next());\n }"}, {"sha": "40081ebb16ea13a646383e1f8962816f5ef7ed0e", "filename": "crates/ra_syntax/src/ast/generated/nodes.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Fsrc%2Fast%2Fgenerated%2Fnodes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Fsrc%2Fast%2Fgenerated%2Fnodes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Fsrc%2Fast%2Fgenerated%2Fnodes.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -2052,6 +2052,8 @@ pub struct WherePred {\n }\n impl ast::TypeBoundsOwner for WherePred {}\n impl WherePred {\n+    pub fn for_token(&self) -> Option<SyntaxToken> { support::token(&self.syntax, T![for]) }\n+    pub fn type_param_list(&self) -> Option<TypeParamList> { support::child(&self.syntax) }\n     pub fn lifetime_token(&self) -> Option<SyntaxToken> {\n         support::token(&self.syntax, T![lifetime])\n     }"}, {"sha": "4d6461d1e195da553feb721bd4c344c7e8a86c51", "filename": "crates/ra_syntax/test_data/parser/err/0027_incomplere_where_for.rast", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0027_incomplere_where_for.rast", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0027_incomplere_where_for.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0027_incomplere_where_for.rast?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -12,17 +12,16 @@ SOURCE_FILE@0..30\n       WHERE_KW@13..18 \"where\"\n       WHITESPACE@18..19 \" \"\n       WHERE_PRED@19..26\n-        FOR_TYPE@19..26\n-          FOR_KW@19..22 \"for\"\n-          TYPE_PARAM_LIST@22..26\n-            L_ANGLE@22..23 \"<\"\n-            LIFETIME_PARAM@23..25\n-              LIFETIME@23..25 \"\\'a\"\n-            R_ANGLE@25..26 \">\"\n+        FOR_KW@19..22 \"for\"\n+        TYPE_PARAM_LIST@22..26\n+          L_ANGLE@22..23 \"<\"\n+          LIFETIME_PARAM@23..25\n+            LIFETIME@23..25 \"\\'a\"\n+          R_ANGLE@25..26 \">\"\n     WHITESPACE@26..27 \"\\n\"\n     BLOCK_EXPR@27..29\n       L_CURLY@27..28 \"{\"\n       R_CURLY@28..29 \"}\"\n   WHITESPACE@29..30 \"\\n\"\n-error 26..26: expected a path\n+error 26..26: expected type\n error 26..26: expected colon"}, {"sha": "cb90f28bc74a5bb79d7296eaa183ad0f25eddd59", "filename": "crates/ra_syntax/test_data/parser/err/0044_unexpected_for_type.rast", "status": "added", "additions": 240, "deletions": 0, "changes": 240, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0044_unexpected_for_type.rast", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0044_unexpected_for_type.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0044_unexpected_for_type.rast?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -0,0 +1,240 @@\n+SOURCE_FILE@0..239\n+  TYPE_ALIAS_DEF@0..30\n+    TYPE_KW@0..4 \"type\"\n+    WHITESPACE@4..5 \" \"\n+    NAME@5..11\n+      IDENT@5..11 \"ForRef\"\n+    WHITESPACE@11..12 \" \"\n+    EQ@12..13 \"=\"\n+    WHITESPACE@13..14 \" \"\n+    FOR_TYPE@14..29\n+      FOR_KW@14..17 \"for\"\n+      TYPE_PARAM_LIST@17..21\n+        L_ANGLE@17..18 \"<\"\n+        LIFETIME_PARAM@18..20\n+          LIFETIME@18..20 \"\\'a\"\n+        R_ANGLE@20..21 \">\"\n+      WHITESPACE@21..22 \" \"\n+      REFERENCE_TYPE@22..29\n+        AMP@22..23 \"&\"\n+        LIFETIME@23..25 \"\\'a\"\n+        WHITESPACE@25..26 \" \"\n+        PATH_TYPE@26..29\n+          PATH@26..29\n+            PATH_SEGMENT@26..29\n+              NAME_REF@26..29\n+                IDENT@26..29 \"u32\"\n+    SEMICOLON@29..30 \";\"\n+  WHITESPACE@30..31 \"\\n\"\n+  TYPE_ALIAS_DEF@31..64\n+    TYPE_KW@31..35 \"type\"\n+    WHITESPACE@35..36 \" \"\n+    NAME@36..42\n+      IDENT@36..42 \"ForTup\"\n+    WHITESPACE@42..43 \" \"\n+    EQ@43..44 \"=\"\n+    WHITESPACE@44..45 \" \"\n+    FOR_TYPE@45..63\n+      FOR_KW@45..48 \"for\"\n+      TYPE_PARAM_LIST@48..52\n+        L_ANGLE@48..49 \"<\"\n+        LIFETIME_PARAM@49..51\n+          LIFETIME@49..51 \"\\'a\"\n+        R_ANGLE@51..52 \">\"\n+      WHITESPACE@52..53 \" \"\n+      TUPLE_TYPE@53..63\n+        L_PAREN@53..54 \"(\"\n+        REFERENCE_TYPE@54..61\n+          AMP@54..55 \"&\"\n+          LIFETIME@55..57 \"\\'a\"\n+          WHITESPACE@57..58 \" \"\n+          PATH_TYPE@58..61\n+            PATH@58..61\n+              PATH_SEGMENT@58..61\n+                NAME_REF@58..61\n+                  IDENT@58..61 \"u32\"\n+        COMMA@61..62 \",\"\n+        R_PAREN@62..63 \")\"\n+    SEMICOLON@63..64 \";\"\n+  WHITESPACE@64..65 \"\\n\"\n+  TYPE_ALIAS_DEF@65..95\n+    TYPE_KW@65..69 \"type\"\n+    WHITESPACE@69..70 \" \"\n+    NAME@70..78\n+      IDENT@70..78 \"ForSlice\"\n+    WHITESPACE@78..79 \" \"\n+    EQ@79..80 \"=\"\n+    WHITESPACE@80..81 \" \"\n+    FOR_TYPE@81..94\n+      FOR_KW@81..84 \"for\"\n+      TYPE_PARAM_LIST@84..88\n+        L_ANGLE@84..85 \"<\"\n+        LIFETIME_PARAM@85..87\n+          LIFETIME@85..87 \"\\'a\"\n+        R_ANGLE@87..88 \">\"\n+      WHITESPACE@88..89 \" \"\n+      SLICE_TYPE@89..94\n+        L_BRACK@89..90 \"[\"\n+        PATH_TYPE@90..93\n+          PATH@90..93\n+            PATH_SEGMENT@90..93\n+              NAME_REF@90..93\n+                IDENT@90..93 \"u32\"\n+        R_BRACK@93..94 \"]\"\n+    SEMICOLON@94..95 \";\"\n+  WHITESPACE@95..96 \"\\n\"\n+  TYPE_ALIAS_DEF@96..149\n+    TYPE_KW@96..100 \"type\"\n+    WHITESPACE@100..101 \" \"\n+    NAME@101..109\n+      IDENT@101..109 \"ForForFn\"\n+    WHITESPACE@109..110 \" \"\n+    EQ@110..111 \"=\"\n+    WHITESPACE@111..112 \" \"\n+    FOR_TYPE@112..148\n+      FOR_KW@112..115 \"for\"\n+      TYPE_PARAM_LIST@115..119\n+        L_ANGLE@115..116 \"<\"\n+        LIFETIME_PARAM@116..118\n+          LIFETIME@116..118 \"\\'a\"\n+        R_ANGLE@118..119 \">\"\n+      WHITESPACE@119..120 \" \"\n+      FOR_TYPE@120..148\n+        FOR_KW@120..123 \"for\"\n+        TYPE_PARAM_LIST@123..127\n+          L_ANGLE@123..124 \"<\"\n+          LIFETIME_PARAM@124..126\n+            LIFETIME@124..126 \"\\'b\"\n+          R_ANGLE@126..127 \">\"\n+        WHITESPACE@127..128 \" \"\n+        FN_POINTER_TYPE@128..148\n+          FN_KW@128..130 \"fn\"\n+          PARAM_LIST@130..148\n+            L_PAREN@130..131 \"(\"\n+            PARAM@131..138\n+              REFERENCE_TYPE@131..138\n+                AMP@131..132 \"&\"\n+                LIFETIME@132..134 \"\\'a\"\n+                WHITESPACE@134..135 \" \"\n+                PATH_TYPE@135..138\n+                  PATH@135..138\n+                    PATH_SEGMENT@135..138\n+                      NAME_REF@135..138\n+                        IDENT@135..138 \"i32\"\n+            COMMA@138..139 \",\"\n+            WHITESPACE@139..140 \" \"\n+            PARAM@140..147\n+              REFERENCE_TYPE@140..147\n+                AMP@140..141 \"&\"\n+                LIFETIME@141..143 \"\\'b\"\n+                WHITESPACE@143..144 \" \"\n+                PATH_TYPE@144..147\n+                  PATH@144..147\n+                    PATH_SEGMENT@144..147\n+                      NAME_REF@144..147\n+                        IDENT@144..147 \"i32\"\n+            R_PAREN@147..148 \")\"\n+    SEMICOLON@148..149 \";\"\n+  WHITESPACE@149..150 \"\\n\"\n+  FN_DEF@150..238\n+    FN_KW@150..152 \"fn\"\n+    WHITESPACE@152..153 \" \"\n+    NAME@153..164\n+      IDENT@153..164 \"for_for_for\"\n+    TYPE_PARAM_LIST@164..167\n+      L_ANGLE@164..165 \"<\"\n+      TYPE_PARAM@165..166\n+        NAME@165..166\n+          IDENT@165..166 \"T\"\n+      R_ANGLE@166..167 \">\"\n+    PARAM_LIST@167..169\n+      L_PAREN@167..168 \"(\"\n+      R_PAREN@168..169 \")\"\n+    WHITESPACE@169..170 \"\\n\"\n+    WHERE_CLAUSE@170..234\n+      WHERE_KW@170..175 \"where\"\n+      WHITESPACE@175..180 \"\\n    \"\n+      WHERE_PRED@180..233\n+        FOR_KW@180..183 \"for\"\n+        TYPE_PARAM_LIST@183..187\n+          L_ANGLE@183..184 \"<\"\n+          LIFETIME_PARAM@184..186\n+            LIFETIME@184..186 \"\\'a\"\n+          R_ANGLE@186..187 \">\"\n+        WHITESPACE@187..188 \" \"\n+        FOR_TYPE@188..227\n+          FOR_KW@188..191 \"for\"\n+          TYPE_PARAM_LIST@191..195\n+            L_ANGLE@191..192 \"<\"\n+            LIFETIME_PARAM@192..194\n+              LIFETIME@192..194 \"\\'b\"\n+            R_ANGLE@194..195 \">\"\n+          WHITESPACE@195..196 \" \"\n+          FOR_TYPE@196..227\n+            FOR_KW@196..199 \"for\"\n+            TYPE_PARAM_LIST@199..203\n+              L_ANGLE@199..200 \"<\"\n+              LIFETIME_PARAM@200..202\n+                LIFETIME@200..202 \"\\'c\"\n+              R_ANGLE@202..203 \">\"\n+            WHITESPACE@203..204 \" \"\n+            FN_POINTER_TYPE@204..227\n+              FN_KW@204..206 \"fn\"\n+              PARAM_LIST@206..227\n+                L_PAREN@206..207 \"(\"\n+                PARAM@207..212\n+                  REFERENCE_TYPE@207..212\n+                    AMP@207..208 \"&\"\n+                    LIFETIME@208..210 \"\\'a\"\n+                    WHITESPACE@210..211 \" \"\n+                    PATH_TYPE@211..212\n+                      PATH@211..212\n+                        PATH_SEGMENT@211..212\n+                          NAME_REF@211..212\n+                            IDENT@211..212 \"T\"\n+                COMMA@212..213 \",\"\n+                WHITESPACE@213..214 \" \"\n+                PARAM@214..219\n+                  REFERENCE_TYPE@214..219\n+                    AMP@214..215 \"&\"\n+                    LIFETIME@215..217 \"\\'b\"\n+                    WHITESPACE@217..218 \" \"\n+                    PATH_TYPE@218..219\n+                      PATH@218..219\n+                        PATH_SEGMENT@218..219\n+                          NAME_REF@218..219\n+                            IDENT@218..219 \"T\"\n+                COMMA@219..220 \",\"\n+                WHITESPACE@220..221 \" \"\n+                PARAM@221..226\n+                  REFERENCE_TYPE@221..226\n+                    AMP@221..222 \"&\"\n+                    LIFETIME@222..224 \"\\'c\"\n+                    WHITESPACE@224..225 \" \"\n+                    PATH_TYPE@225..226\n+                      PATH@225..226\n+                        PATH_SEGMENT@225..226\n+                          NAME_REF@225..226\n+                            IDENT@225..226 \"T\"\n+                R_PAREN@226..227 \")\"\n+        COLON@227..228 \":\"\n+        WHITESPACE@228..229 \" \"\n+        TYPE_BOUND_LIST@229..233\n+          TYPE_BOUND@229..233\n+            PATH_TYPE@229..233\n+              PATH@229..233\n+                PATH_SEGMENT@229..233\n+                  NAME_REF@229..233\n+                    IDENT@229..233 \"Copy\"\n+      COMMA@233..234 \",\"\n+    WHITESPACE@234..235 \"\\n\"\n+    BLOCK_EXPR@235..238\n+      L_CURLY@235..236 \"{\"\n+      WHITESPACE@236..237 \"\\n\"\n+      R_CURLY@237..238 \"}\"\n+  WHITESPACE@238..239 \"\\n\"\n+error 21..21: expected a function pointer or path\n+error 52..52: expected a function pointer or path\n+error 88..88: expected a function pointer or path\n+error 119..119: expected a function pointer or path\n+error 195..195: expected a function pointer or path"}, {"sha": "0e9f8ccb4f84bc978f2ee9715f6c18dc5dd66df7", "filename": "crates/ra_syntax/test_data/parser/err/0044_unexpected_for_type.rs", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0044_unexpected_for_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0044_unexpected_for_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Ferr%2F0044_unexpected_for_type.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -0,0 +1,9 @@\n+type ForRef = for<'a> &'a u32;\n+type ForTup = for<'a> (&'a u32,);\n+type ForSlice = for<'a> [u32];\n+type ForForFn = for<'a> for<'b> fn(&'a i32, &'b i32);\n+fn for_for_for<T>()\n+where\n+    for<'a> for<'b> for<'c> fn(&'a T, &'b T, &'c T): Copy,\n+{\n+}"}, {"sha": "cd0892451d9e9819a6b2a2bc04ae7ff83ffdb446", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0003_where_pred_for.rast", "status": "modified", "additions": 58, "deletions": 59, "changes": 117, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0003_where_pred_for.rast", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0003_where_pred_for.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0003_where_pred_for.rast?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -1,61 +1,60 @@\n-SOURCE_FILE@0..49\n-  FN_DEF@0..48\n+SOURCE_FILE@0..54\n+  FN_DEF@0..53\n     FN_KW@0..2 \"fn\"\n     WHITESPACE@2..3 \" \"\n-    NAME@3..7\n-      IDENT@3..7 \"test\"\n-    TYPE_PARAM_LIST@7..10\n-      L_ANGLE@7..8 \"<\"\n-      TYPE_PARAM@8..9\n-        NAME@8..9\n-          IDENT@8..9 \"F\"\n-      R_ANGLE@9..10 \">\"\n-    PARAM_LIST@10..12\n-      L_PAREN@10..11 \"(\"\n-      R_PAREN@11..12 \")\"\n-    WHITESPACE@12..13 \"\\n\"\n-    WHERE_CLAUSE@13..44\n-      WHERE_KW@13..18 \"where\"\n-      WHITESPACE@18..22 \"\\n   \"\n-      WHERE_PRED@22..44\n-        FOR_TYPE@22..31\n-          FOR_KW@22..25 \"for\"\n-          TYPE_PARAM_LIST@25..29\n-            L_ANGLE@25..26 \"<\"\n-            LIFETIME_PARAM@26..28\n-              LIFETIME@26..28 \"\\'a\"\n-            R_ANGLE@28..29 \">\"\n-          WHITESPACE@29..30 \" \"\n-          PATH_TYPE@30..31\n-            PATH@30..31\n-              PATH_SEGMENT@30..31\n-                NAME_REF@30..31\n-                  IDENT@30..31 \"F\"\n-        COLON@31..32 \":\"\n-        WHITESPACE@32..33 \" \"\n-        TYPE_BOUND_LIST@33..44\n-          TYPE_BOUND@33..44\n-            PATH_TYPE@33..44\n-              PATH@33..44\n-                PATH_SEGMENT@33..44\n-                  NAME_REF@33..35\n-                    IDENT@33..35 \"Fn\"\n-                  PARAM_LIST@35..44\n-                    L_PAREN@35..36 \"(\"\n-                    PARAM@36..43\n-                      REFERENCE_TYPE@36..43\n-                        AMP@36..37 \"&\"\n-                        LIFETIME@37..39 \"\\'a\"\n-                        WHITESPACE@39..40 \" \"\n-                        PATH_TYPE@40..43\n-                          PATH@40..43\n-                            PATH_SEGMENT@40..43\n-                              NAME_REF@40..43\n-                                IDENT@40..43 \"str\"\n-                    R_PAREN@43..44 \")\"\n-    WHITESPACE@44..45 \"\\n\"\n-    BLOCK_EXPR@45..48\n-      L_CURLY@45..46 \"{\"\n-      WHITESPACE@46..47 \" \"\n-      R_CURLY@47..48 \"}\"\n-  WHITESPACE@48..49 \"\\n\"\n+    NAME@3..12\n+      IDENT@3..12 \"for_trait\"\n+    TYPE_PARAM_LIST@12..15\n+      L_ANGLE@12..13 \"<\"\n+      TYPE_PARAM@13..14\n+        NAME@13..14\n+          IDENT@13..14 \"F\"\n+      R_ANGLE@14..15 \">\"\n+    PARAM_LIST@15..17\n+      L_PAREN@15..16 \"(\"\n+      R_PAREN@16..17 \")\"\n+    WHITESPACE@17..18 \"\\n\"\n+    WHERE_CLAUSE@18..49\n+      WHERE_KW@18..23 \"where\"\n+      WHITESPACE@23..27 \"\\n   \"\n+      WHERE_PRED@27..49\n+        FOR_KW@27..30 \"for\"\n+        TYPE_PARAM_LIST@30..34\n+          L_ANGLE@30..31 \"<\"\n+          LIFETIME_PARAM@31..33\n+            LIFETIME@31..33 \"\\'a\"\n+          R_ANGLE@33..34 \">\"\n+        WHITESPACE@34..35 \" \"\n+        PATH_TYPE@35..36\n+          PATH@35..36\n+            PATH_SEGMENT@35..36\n+              NAME_REF@35..36\n+                IDENT@35..36 \"F\"\n+        COLON@36..37 \":\"\n+        WHITESPACE@37..38 \" \"\n+        TYPE_BOUND_LIST@38..49\n+          TYPE_BOUND@38..49\n+            PATH_TYPE@38..49\n+              PATH@38..49\n+                PATH_SEGMENT@38..49\n+                  NAME_REF@38..40\n+                    IDENT@38..40 \"Fn\"\n+                  PARAM_LIST@40..49\n+                    L_PAREN@40..41 \"(\"\n+                    PARAM@41..48\n+                      REFERENCE_TYPE@41..48\n+                        AMP@41..42 \"&\"\n+                        LIFETIME@42..44 \"\\'a\"\n+                        WHITESPACE@44..45 \" \"\n+                        PATH_TYPE@45..48\n+                          PATH@45..48\n+                            PATH_SEGMENT@45..48\n+                              NAME_REF@45..48\n+                                IDENT@45..48 \"str\"\n+                    R_PAREN@48..49 \")\"\n+    WHITESPACE@49..50 \"\\n\"\n+    BLOCK_EXPR@50..53\n+      L_CURLY@50..51 \"{\"\n+      WHITESPACE@51..52 \" \"\n+      R_CURLY@52..53 \"}\"\n+  WHITESPACE@53..54 \"\\n\""}, {"sha": "423bc105bd7b4ad54fad0ffa9a912f32a99ab282", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0003_where_pred_for.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0003_where_pred_for.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0003_where_pred_for.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0003_where_pred_for.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -1,4 +1,4 @@\n-fn test<F>()\n+fn for_trait<F>()\n where\n    for<'a> F: Fn(&'a str)\n { }"}, {"sha": "b26ac2d365b99e32fc04a11879f94470bca83ba2", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0081_for_type.rast", "status": "modified", "additions": 82, "deletions": 210, "changes": 292, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0081_for_type.rast", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0081_for_type.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0081_for_type.rast?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -1,4 +1,4 @@\n-SOURCE_FILE@0..200\n+SOURCE_FILE@0..121\n   TYPE_ALIAS_DEF@0..28\n     TYPE_KW@0..4 \"type\"\n     WHITESPACE@4..5 \" \"\n@@ -29,212 +29,84 @@ SOURCE_FILE@0..200\n             R_PAREN@26..27 \")\"\n     SEMICOLON@27..28 \";\"\n   WHITESPACE@28..29 \"\\n\"\n-  FN_DEF@29..79\n-    FN_KW@29..31 \"fn\"\n-    WHITESPACE@31..32 \" \"\n-    NAME@32..35\n-      IDENT@32..35 \"foo\"\n-    TYPE_PARAM_LIST@35..38\n-      L_ANGLE@35..36 \"<\"\n-      TYPE_PARAM@36..37\n-        NAME@36..37\n-          IDENT@36..37 \"T\"\n-      R_ANGLE@37..38 \">\"\n-    PARAM_LIST@38..46\n-      L_PAREN@38..39 \"(\"\n-      PARAM@39..45\n-        BIND_PAT@39..41\n-          NAME@39..41\n-            IDENT@39..41 \"_t\"\n-        COLON@41..42 \":\"\n-        WHITESPACE@42..43 \" \"\n-        REFERENCE_TYPE@43..45\n-          AMP@43..44 \"&\"\n-          PATH_TYPE@44..45\n-            PATH@44..45\n-              PATH_SEGMENT@44..45\n-                NAME_REF@44..45\n-                  IDENT@44..45 \"T\"\n-      R_PAREN@45..46 \")\"\n-    WHITESPACE@46..47 \" \"\n-    WHERE_CLAUSE@47..76\n-      WHERE_KW@47..52 \"where\"\n-      WHITESPACE@52..53 \" \"\n-      WHERE_PRED@53..76\n-        FOR_TYPE@53..66\n-          FOR_KW@53..56 \"for\"\n-          TYPE_PARAM_LIST@56..60\n-            L_ANGLE@56..57 \"<\"\n-            LIFETIME_PARAM@57..59\n-              LIFETIME@57..59 \"\\'a\"\n-            R_ANGLE@59..60 \">\"\n-          WHITESPACE@60..61 \" \"\n-          REFERENCE_TYPE@61..66\n-            AMP@61..62 \"&\"\n-            LIFETIME@62..64 \"\\'a\"\n-            WHITESPACE@64..65 \" \"\n-            PATH_TYPE@65..66\n-              PATH@65..66\n-                PATH_SEGMENT@65..66\n-                  NAME_REF@65..66\n-                    IDENT@65..66 \"T\"\n-        COLON@66..67 \":\"\n-        WHITESPACE@67..68 \" \"\n-        TYPE_BOUND_LIST@68..76\n-          TYPE_BOUND@68..76\n-            PATH_TYPE@68..76\n-              PATH@68..76\n-                PATH_SEGMENT@68..76\n-                  NAME_REF@68..76\n-                    IDENT@68..76 \"Iterator\"\n-    WHITESPACE@76..77 \" \"\n-    BLOCK_EXPR@77..79\n-      L_CURLY@77..78 \"{\"\n-      R_CURLY@78..79 \"}\"\n-  WHITESPACE@79..80 \"\\n\"\n-  FN_DEF@80..134\n-    FN_KW@80..82 \"fn\"\n-    WHITESPACE@82..83 \" \"\n-    NAME@83..86\n-      IDENT@83..86 \"bar\"\n-    TYPE_PARAM_LIST@86..89\n-      L_ANGLE@86..87 \"<\"\n-      TYPE_PARAM@87..88\n-        NAME@87..88\n-          IDENT@87..88 \"T\"\n-      R_ANGLE@88..89 \">\"\n-    PARAM_LIST@89..97\n-      L_PAREN@89..90 \"(\"\n-      PARAM@90..96\n-        BIND_PAT@90..92\n-          NAME@90..92\n-            IDENT@90..92 \"_t\"\n-        COLON@92..93 \":\"\n-        WHITESPACE@93..94 \" \"\n-        REFERENCE_TYPE@94..96\n-          AMP@94..95 \"&\"\n-          PATH_TYPE@95..96\n-            PATH@95..96\n-              PATH_SEGMENT@95..96\n-                NAME_REF@95..96\n-                  IDENT@95..96 \"T\"\n-      R_PAREN@96..97 \")\"\n-    WHITESPACE@97..98 \" \"\n-    WHERE_CLAUSE@98..131\n-      WHERE_KW@98..103 \"where\"\n-      WHITESPACE@103..104 \" \"\n-      WHERE_PRED@104..131\n-        FOR_TYPE@104..121\n-          FOR_KW@104..107 \"for\"\n-          TYPE_PARAM_LIST@107..111\n-            L_ANGLE@107..108 \"<\"\n-            LIFETIME_PARAM@108..110\n-              LIFETIME@108..110 \"\\'a\"\n-            R_ANGLE@110..111 \">\"\n-          WHITESPACE@111..112 \" \"\n-          REFERENCE_TYPE@112..121\n-            AMP@112..113 \"&\"\n-            LIFETIME@113..115 \"\\'a\"\n-            WHITESPACE@115..116 \" \"\n-            MUT_KW@116..119 \"mut\"\n-            WHITESPACE@119..120 \" \"\n-            PATH_TYPE@120..121\n-              PATH@120..121\n-                PATH_SEGMENT@120..121\n-                  NAME_REF@120..121\n-                    IDENT@120..121 \"T\"\n-        COLON@121..122 \":\"\n-        WHITESPACE@122..123 \" \"\n-        TYPE_BOUND_LIST@123..131\n-          TYPE_BOUND@123..131\n-            PATH_TYPE@123..131\n-              PATH@123..131\n-                PATH_SEGMENT@123..131\n-                  NAME_REF@123..131\n-                    IDENT@123..131 \"Iterator\"\n-    WHITESPACE@131..132 \" \"\n-    BLOCK_EXPR@132..134\n-      L_CURLY@132..133 \"{\"\n-      R_CURLY@133..134 \"}\"\n-  WHITESPACE@134..135 \"\\n\"\n-  FN_DEF@135..199\n-    FN_KW@135..137 \"fn\"\n-    WHITESPACE@137..138 \" \"\n-    NAME@138..141\n-      IDENT@138..141 \"baz\"\n-    TYPE_PARAM_LIST@141..144\n-      L_ANGLE@141..142 \"<\"\n-      TYPE_PARAM@142..143\n-        NAME@142..143\n-          IDENT@142..143 \"T\"\n-      R_ANGLE@143..144 \">\"\n-    PARAM_LIST@144..152\n-      L_PAREN@144..145 \"(\"\n-      PARAM@145..151\n-        BIND_PAT@145..147\n-          NAME@145..147\n-            IDENT@145..147 \"_t\"\n-        COLON@147..148 \":\"\n-        WHITESPACE@148..149 \" \"\n-        REFERENCE_TYPE@149..151\n-          AMP@149..150 \"&\"\n-          PATH_TYPE@150..151\n-            PATH@150..151\n-              PATH_SEGMENT@150..151\n-                NAME_REF@150..151\n-                  IDENT@150..151 \"T\"\n-      R_PAREN@151..152 \")\"\n-    WHITESPACE@152..153 \" \"\n-    WHERE_CLAUSE@153..196\n-      WHERE_KW@153..158 \"where\"\n-      WHITESPACE@158..159 \" \"\n-      WHERE_PRED@159..196\n-        FOR_TYPE@159..186\n-          FOR_KW@159..162 \"for\"\n-          TYPE_PARAM_LIST@162..166\n-            L_ANGLE@162..163 \"<\"\n-            LIFETIME_PARAM@163..165\n-              LIFETIME@163..165 \"\\'a\"\n-            R_ANGLE@165..166 \">\"\n-          WHITESPACE@166..167 \" \"\n-          PATH_TYPE@167..186\n-            PATH@167..186\n-              PATH@167..181\n-                PATH_SEGMENT@167..181\n-                  L_ANGLE@167..168 \"<\"\n-                  REFERENCE_TYPE@168..173\n-                    AMP@168..169 \"&\"\n-                    LIFETIME@169..171 \"\\'a\"\n-                    WHITESPACE@171..172 \" \"\n-                    PATH_TYPE@172..173\n-                      PATH@172..173\n-                        PATH_SEGMENT@172..173\n-                          NAME_REF@172..173\n-                            IDENT@172..173 \"T\"\n-                  WHITESPACE@173..174 \" \"\n-                  AS_KW@174..176 \"as\"\n-                  WHITESPACE@176..177 \" \"\n-                  PATH_TYPE@177..180\n-                    PATH@177..180\n-                      PATH_SEGMENT@177..180\n-                        NAME_REF@177..180\n-                          IDENT@177..180 \"Baz\"\n-                  R_ANGLE@180..181 \">\"\n-              COLON2@181..183 \"::\"\n-              PATH_SEGMENT@183..186\n-                NAME_REF@183..186\n-                  IDENT@183..186 \"Foo\"\n-        COLON@186..187 \":\"\n-        WHITESPACE@187..188 \" \"\n-        TYPE_BOUND_LIST@188..196\n-          TYPE_BOUND@188..196\n-            PATH_TYPE@188..196\n-              PATH@188..196\n-                PATH_SEGMENT@188..196\n-                  NAME_REF@188..196\n-                    IDENT@188..196 \"Iterator\"\n-    WHITESPACE@196..197 \" \"\n-    BLOCK_EXPR@197..199\n-      L_CURLY@197..198 \"{\"\n-      R_CURLY@198..199 \"}\"\n-  WHITESPACE@199..200 \"\\n\"\n+  TYPE_ALIAS_DEF@29..81\n+    TYPE_KW@29..33 \"type\"\n+    WHITESPACE@33..34 \" \"\n+    NAME@34..35\n+      IDENT@34..35 \"B\"\n+    WHITESPACE@35..36 \" \"\n+    EQ@36..37 \"=\"\n+    WHITESPACE@37..38 \" \"\n+    FOR_TYPE@38..80\n+      FOR_KW@38..41 \"for\"\n+      TYPE_PARAM_LIST@41..45\n+        L_ANGLE@41..42 \"<\"\n+        LIFETIME_PARAM@42..44\n+          LIFETIME@42..44 \"\\'a\"\n+        R_ANGLE@44..45 \">\"\n+      WHITESPACE@45..46 \" \"\n+      FN_POINTER_TYPE@46..80\n+        UNSAFE_KW@46..52 \"unsafe\"\n+        WHITESPACE@52..53 \" \"\n+        ABI@53..63\n+          EXTERN_KW@53..59 \"extern\"\n+          WHITESPACE@59..60 \" \"\n+          STRING@60..63 \"\\\"C\\\"\"\n+        WHITESPACE@63..64 \" \"\n+        FN_KW@64..66 \"fn\"\n+        PARAM_LIST@66..74\n+          L_PAREN@66..67 \"(\"\n+          PARAM@67..73\n+            REFERENCE_TYPE@67..73\n+              AMP@67..68 \"&\"\n+              LIFETIME@68..70 \"\\'a\"\n+              WHITESPACE@70..71 \" \"\n+              TUPLE_TYPE@71..73\n+                L_PAREN@71..72 \"(\"\n+                R_PAREN@72..73 \")\"\n+          R_PAREN@73..74 \")\"\n+        WHITESPACE@74..75 \" \"\n+        RET_TYPE@75..80\n+          THIN_ARROW@75..77 \"->\"\n+          WHITESPACE@77..78 \" \"\n+          TUPLE_TYPE@78..80\n+            L_PAREN@78..79 \"(\"\n+            R_PAREN@79..80 \")\"\n+    SEMICOLON@80..81 \";\"\n+  WHITESPACE@81..82 \"\\n\"\n+  TYPE_ALIAS_DEF@82..120\n+    TYPE_KW@82..86 \"type\"\n+    WHITESPACE@86..87 \" \"\n+    NAME@87..90\n+      IDENT@87..90 \"Obj\"\n+    WHITESPACE@90..91 \" \"\n+    EQ@91..92 \"=\"\n+    WHITESPACE@92..93 \" \"\n+    FOR_TYPE@93..119\n+      FOR_KW@93..96 \"for\"\n+      TYPE_PARAM_LIST@96..100\n+        L_ANGLE@96..97 \"<\"\n+        LIFETIME_PARAM@97..99\n+          LIFETIME@97..99 \"\\'a\"\n+        R_ANGLE@99..100 \">\"\n+      WHITESPACE@100..101 \" \"\n+      PATH_TYPE@101..119\n+        PATH@101..119\n+          PATH_SEGMENT@101..119\n+            NAME_REF@101..110\n+              IDENT@101..110 \"PartialEq\"\n+            TYPE_ARG_LIST@110..119\n+              L_ANGLE@110..111 \"<\"\n+              TYPE_ARG@111..118\n+                REFERENCE_TYPE@111..118\n+                  AMP@111..112 \"&\"\n+                  LIFETIME@112..114 \"\\'a\"\n+                  WHITESPACE@114..115 \" \"\n+                  PATH_TYPE@115..118\n+                    PATH@115..118\n+                      PATH_SEGMENT@115..118\n+                        NAME_REF@115..118\n+                          IDENT@115..118 \"i32\"\n+              R_ANGLE@118..119 \">\"\n+    SEMICOLON@119..120 \";\"\n+  WHITESPACE@120..121 \"\\n\""}, {"sha": "8ac7b9e103800399c838a5214094b25299e552c5", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0081_for_type.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0081_for_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0081_for_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0081_for_type.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -1,4 +1,3 @@\n type A = for<'a> fn() -> ();\n-fn foo<T>(_t: &T) where for<'a> &'a T: Iterator {}\n-fn bar<T>(_t: &T) where for<'a> &'a mut T: Iterator {}\n-fn baz<T>(_t: &T) where for<'a> <&'a T as Baz>::Foo: Iterator {}\n+type B = for<'a> unsafe extern \"C\" fn(&'a ()) -> ();\n+type Obj = for<'a> PartialEq<&'a i32>;"}, {"sha": "5035851031f62069ab2780d9138c953b1d5fd64d", "filename": "crates/ra_syntax/test_data/parser/ok/0067_where_for_pred.rast", "status": "added", "additions": 392, "deletions": 0, "changes": 392, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0067_where_for_pred.rast", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0067_where_for_pred.rast", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0067_where_for_pred.rast?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -0,0 +1,392 @@\n+SOURCE_FILE@0..374\n+  FN_DEF@0..55\n+    FN_KW@0..2 \"fn\"\n+    WHITESPACE@2..3 \" \"\n+    NAME@3..12\n+      IDENT@3..12 \"for_trait\"\n+    TYPE_PARAM_LIST@12..15\n+      L_ANGLE@12..13 \"<\"\n+      TYPE_PARAM@13..14\n+        NAME@13..14\n+          IDENT@13..14 \"F\"\n+      R_ANGLE@14..15 \">\"\n+    PARAM_LIST@15..17\n+      L_PAREN@15..16 \"(\"\n+      R_PAREN@16..17 \")\"\n+    WHITESPACE@17..18 \"\\n\"\n+    WHERE_CLAUSE@18..51\n+      WHERE_KW@18..23 \"where\"\n+      WHITESPACE@23..28 \"\\n    \"\n+      WHERE_PRED@28..50\n+        FOR_KW@28..31 \"for\"\n+        TYPE_PARAM_LIST@31..35\n+          L_ANGLE@31..32 \"<\"\n+          LIFETIME_PARAM@32..34\n+            LIFETIME@32..34 \"\\'a\"\n+          R_ANGLE@34..35 \">\"\n+        WHITESPACE@35..36 \" \"\n+        PATH_TYPE@36..37\n+          PATH@36..37\n+            PATH_SEGMENT@36..37\n+              NAME_REF@36..37\n+                IDENT@36..37 \"F\"\n+        COLON@37..38 \":\"\n+        WHITESPACE@38..39 \" \"\n+        TYPE_BOUND_LIST@39..50\n+          TYPE_BOUND@39..50\n+            PATH_TYPE@39..50\n+              PATH@39..50\n+                PATH_SEGMENT@39..50\n+                  NAME_REF@39..41\n+                    IDENT@39..41 \"Fn\"\n+                  PARAM_LIST@41..50\n+                    L_PAREN@41..42 \"(\"\n+                    PARAM@42..49\n+                      REFERENCE_TYPE@42..49\n+                        AMP@42..43 \"&\"\n+                        LIFETIME@43..45 \"\\'a\"\n+                        WHITESPACE@45..46 \" \"\n+                        PATH_TYPE@46..49\n+                          PATH@46..49\n+                            PATH_SEGMENT@46..49\n+                              NAME_REF@46..49\n+                                IDENT@46..49 \"str\"\n+                    R_PAREN@49..50 \")\"\n+      COMMA@50..51 \",\"\n+    WHITESPACE@51..52 \"\\n\"\n+    BLOCK_EXPR@52..55\n+      L_CURLY@52..53 \"{\"\n+      WHITESPACE@53..54 \"\\n\"\n+      R_CURLY@54..55 \"}\"\n+  WHITESPACE@55..56 \"\\n\"\n+  FN_DEF@56..107\n+    FN_KW@56..58 \"fn\"\n+    WHITESPACE@58..59 \" \"\n+    NAME@59..66\n+      IDENT@59..66 \"for_ref\"\n+    TYPE_PARAM_LIST@66..69\n+      L_ANGLE@66..67 \"<\"\n+      TYPE_PARAM@67..68\n+        NAME@67..68\n+          IDENT@67..68 \"F\"\n+      R_ANGLE@68..69 \">\"\n+    PARAM_LIST@69..71\n+      L_PAREN@69..70 \"(\"\n+      R_PAREN@70..71 \")\"\n+    WHITESPACE@71..72 \"\\n\"\n+    WHERE_CLAUSE@72..103\n+      WHERE_KW@72..77 \"where\"\n+      WHITESPACE@77..82 \"\\n    \"\n+      WHERE_PRED@82..102\n+        FOR_KW@82..85 \"for\"\n+        TYPE_PARAM_LIST@85..89\n+          L_ANGLE@85..86 \"<\"\n+          LIFETIME_PARAM@86..88\n+            LIFETIME@86..88 \"\\'a\"\n+          R_ANGLE@88..89 \">\"\n+        WHITESPACE@89..90 \" \"\n+        REFERENCE_TYPE@90..95\n+          AMP@90..91 \"&\"\n+          LIFETIME@91..93 \"\\'a\"\n+          WHITESPACE@93..94 \" \"\n+          PATH_TYPE@94..95\n+            PATH@94..95\n+              PATH_SEGMENT@94..95\n+                NAME_REF@94..95\n+                  IDENT@94..95 \"F\"\n+        COLON@95..96 \":\"\n+        WHITESPACE@96..97 \" \"\n+        TYPE_BOUND_LIST@97..102\n+          TYPE_BOUND@97..102\n+            PATH_TYPE@97..102\n+              PATH@97..102\n+                PATH_SEGMENT@97..102\n+                  NAME_REF@97..102\n+                    IDENT@97..102 \"Debug\"\n+      COMMA@102..103 \",\"\n+    WHITESPACE@103..104 \"\\n\"\n+    BLOCK_EXPR@104..107\n+      L_CURLY@104..105 \"{\"\n+      WHITESPACE@105..106 \"\\n\"\n+      R_CURLY@106..107 \"}\"\n+  WHITESPACE@107..108 \"\\n\"\n+  FN_DEF@108..170\n+    FN_KW@108..110 \"fn\"\n+    WHITESPACE@110..111 \" \"\n+    NAME@111..121\n+      IDENT@111..121 \"for_parens\"\n+    TYPE_PARAM_LIST@121..124\n+      L_ANGLE@121..122 \"<\"\n+      TYPE_PARAM@122..123\n+        NAME@122..123\n+          IDENT@122..123 \"F\"\n+      R_ANGLE@123..124 \">\"\n+    PARAM_LIST@124..126\n+      L_PAREN@124..125 \"(\"\n+      R_PAREN@125..126 \")\"\n+    WHITESPACE@126..127 \"\\n\"\n+    WHERE_CLAUSE@127..166\n+      WHERE_KW@127..132 \"where\"\n+      WHITESPACE@132..137 \"\\n    \"\n+      WHERE_PRED@137..165\n+        FOR_KW@137..140 \"for\"\n+        TYPE_PARAM_LIST@140..144\n+          L_ANGLE@140..141 \"<\"\n+          LIFETIME_PARAM@141..143\n+            LIFETIME@141..143 \"\\'a\"\n+          R_ANGLE@143..144 \">\"\n+        WHITESPACE@144..145 \" \"\n+        PAREN_TYPE@145..152\n+          L_PAREN@145..146 \"(\"\n+          REFERENCE_TYPE@146..151\n+            AMP@146..147 \"&\"\n+            LIFETIME@147..149 \"\\'a\"\n+            WHITESPACE@149..150 \" \"\n+            PATH_TYPE@150..151\n+              PATH@150..151\n+                PATH_SEGMENT@150..151\n+                  NAME_REF@150..151\n+                    IDENT@150..151 \"F\"\n+          R_PAREN@151..152 \")\"\n+        COLON@152..153 \":\"\n+        WHITESPACE@153..154 \" \"\n+        TYPE_BOUND_LIST@154..165\n+          TYPE_BOUND@154..165\n+            PATH_TYPE@154..165\n+              PATH@154..165\n+                PATH_SEGMENT@154..165\n+                  NAME_REF@154..156\n+                    IDENT@154..156 \"Fn\"\n+                  PARAM_LIST@156..165\n+                    L_PAREN@156..157 \"(\"\n+                    PARAM@157..164\n+                      REFERENCE_TYPE@157..164\n+                        AMP@157..158 \"&\"\n+                        LIFETIME@158..160 \"\\'a\"\n+                        WHITESPACE@160..161 \" \"\n+                        PATH_TYPE@161..164\n+                          PATH@161..164\n+                            PATH_SEGMENT@161..164\n+                              NAME_REF@161..164\n+                                IDENT@161..164 \"str\"\n+                    R_PAREN@164..165 \")\"\n+      COMMA@165..166 \",\"\n+    WHITESPACE@166..167 \"\\n\"\n+    BLOCK_EXPR@167..170\n+      L_CURLY@167..168 \"{\"\n+      WHITESPACE@168..169 \"\\n\"\n+      R_CURLY@169..170 \"}\"\n+  WHITESPACE@170..171 \"\\n\"\n+  FN_DEF@171..223\n+    FN_KW@171..173 \"fn\"\n+    WHITESPACE@173..174 \" \"\n+    NAME@174..183\n+      IDENT@174..183 \"for_slice\"\n+    TYPE_PARAM_LIST@183..186\n+      L_ANGLE@183..184 \"<\"\n+      TYPE_PARAM@184..185\n+        NAME@184..185\n+          IDENT@184..185 \"F\"\n+      R_ANGLE@185..186 \">\"\n+    PARAM_LIST@186..188\n+      L_PAREN@186..187 \"(\"\n+      R_PAREN@187..188 \")\"\n+    WHITESPACE@188..189 \"\\n\"\n+    WHERE_CLAUSE@189..219\n+      WHERE_KW@189..194 \"where\"\n+      WHITESPACE@194..199 \"\\n    \"\n+      WHERE_PRED@199..218\n+        FOR_KW@199..202 \"for\"\n+        TYPE_PARAM_LIST@202..206\n+          L_ANGLE@202..203 \"<\"\n+          LIFETIME_PARAM@203..205\n+            LIFETIME@203..205 \"\\'a\"\n+          R_ANGLE@205..206 \">\"\n+        WHITESPACE@206..207 \" \"\n+        SLICE_TYPE@207..214\n+          L_BRACK@207..208 \"[\"\n+          REFERENCE_TYPE@208..213\n+            AMP@208..209 \"&\"\n+            LIFETIME@209..211 \"\\'a\"\n+            WHITESPACE@211..212 \" \"\n+            PATH_TYPE@212..213\n+              PATH@212..213\n+                PATH_SEGMENT@212..213\n+                  NAME_REF@212..213\n+                    IDENT@212..213 \"F\"\n+          R_BRACK@213..214 \"]\"\n+        COLON@214..215 \":\"\n+        WHITESPACE@215..216 \" \"\n+        TYPE_BOUND_LIST@216..218\n+          TYPE_BOUND@216..218\n+            PATH_TYPE@216..218\n+              PATH@216..218\n+                PATH_SEGMENT@216..218\n+                  NAME_REF@216..218\n+                    IDENT@216..218 \"Eq\"\n+      COMMA@218..219 \",\"\n+    WHITESPACE@219..220 \"\\n\"\n+    BLOCK_EXPR@220..223\n+      L_CURLY@220..221 \"{\"\n+      WHITESPACE@221..222 \"\\n\"\n+      R_CURLY@222..223 \"}\"\n+  WHITESPACE@223..224 \"\\n\"\n+  FN_DEF@224..300\n+    FN_KW@224..226 \"fn\"\n+    WHITESPACE@226..227 \" \"\n+    NAME@227..236\n+      IDENT@227..236 \"for_qpath\"\n+    TYPE_PARAM_LIST@236..239\n+      L_ANGLE@236..237 \"<\"\n+      TYPE_PARAM@237..238\n+        NAME@237..238\n+          IDENT@237..238 \"T\"\n+      R_ANGLE@238..239 \">\"\n+    PARAM_LIST@239..247\n+      L_PAREN@239..240 \"(\"\n+      PARAM@240..246\n+        BIND_PAT@240..242\n+          NAME@240..242\n+            IDENT@240..242 \"_t\"\n+        COLON@242..243 \":\"\n+        WHITESPACE@243..244 \" \"\n+        REFERENCE_TYPE@244..246\n+          AMP@244..245 \"&\"\n+          PATH_TYPE@245..246\n+            PATH@245..246\n+              PATH_SEGMENT@245..246\n+                NAME_REF@245..246\n+                  IDENT@245..246 \"T\"\n+      R_PAREN@246..247 \")\"\n+    WHITESPACE@247..248 \"\\n\"\n+    WHERE_CLAUSE@248..296\n+      WHERE_KW@248..253 \"where\"\n+      WHITESPACE@253..258 \"\\n    \"\n+      WHERE_PRED@258..295\n+        FOR_KW@258..261 \"for\"\n+        TYPE_PARAM_LIST@261..265\n+          L_ANGLE@261..262 \"<\"\n+          LIFETIME_PARAM@262..264\n+            LIFETIME@262..264 \"\\'a\"\n+          R_ANGLE@264..265 \">\"\n+        WHITESPACE@265..266 \" \"\n+        PATH_TYPE@266..285\n+          PATH@266..285\n+            PATH@266..280\n+              PATH_SEGMENT@266..280\n+                L_ANGLE@266..267 \"<\"\n+                REFERENCE_TYPE@267..272\n+                  AMP@267..268 \"&\"\n+                  LIFETIME@268..270 \"\\'a\"\n+                  WHITESPACE@270..271 \" \"\n+                  PATH_TYPE@271..272\n+                    PATH@271..272\n+                      PATH_SEGMENT@271..272\n+                        NAME_REF@271..272\n+                          IDENT@271..272 \"T\"\n+                WHITESPACE@272..273 \" \"\n+                AS_KW@273..275 \"as\"\n+                WHITESPACE@275..276 \" \"\n+                PATH_TYPE@276..279\n+                  PATH@276..279\n+                    PATH_SEGMENT@276..279\n+                      NAME_REF@276..279\n+                        IDENT@276..279 \"Baz\"\n+                R_ANGLE@279..280 \">\"\n+            COLON2@280..282 \"::\"\n+            PATH_SEGMENT@282..285\n+              NAME_REF@282..285\n+                IDENT@282..285 \"Foo\"\n+        COLON@285..286 \":\"\n+        WHITESPACE@286..287 \" \"\n+        TYPE_BOUND_LIST@287..295\n+          TYPE_BOUND@287..295\n+            PATH_TYPE@287..295\n+              PATH@287..295\n+                PATH_SEGMENT@287..295\n+                  NAME_REF@287..295\n+                    IDENT@287..295 \"Iterator\"\n+      COMMA@295..296 \",\"\n+    WHITESPACE@296..297 \"\\n\"\n+    BLOCK_EXPR@297..300\n+      L_CURLY@297..298 \"{\"\n+      WHITESPACE@298..299 \"\\n\"\n+      R_CURLY@299..300 \"}\"\n+  WHITESPACE@300..301 \"\\n\"\n+  FN_DEF@301..373\n+    FN_KW@301..303 \"fn\"\n+    WHITESPACE@303..304 \" \"\n+    NAME@304..314\n+      IDENT@304..314 \"for_for_fn\"\n+    TYPE_PARAM_LIST@314..317\n+      L_ANGLE@314..315 \"<\"\n+      TYPE_PARAM@315..316\n+        NAME@315..316\n+          IDENT@315..316 \"T\"\n+      R_ANGLE@316..317 \">\"\n+    PARAM_LIST@317..319\n+      L_PAREN@317..318 \"(\"\n+      R_PAREN@318..319 \")\"\n+    WHITESPACE@319..320 \"\\n\"\n+    WHERE_CLAUSE@320..369\n+      WHERE_KW@320..325 \"where\"\n+      WHITESPACE@325..330 \"\\n    \"\n+      WHERE_PRED@330..368\n+        FOR_KW@330..333 \"for\"\n+        TYPE_PARAM_LIST@333..337\n+          L_ANGLE@333..334 \"<\"\n+          LIFETIME_PARAM@334..336\n+            LIFETIME@334..336 \"\\'a\"\n+          R_ANGLE@336..337 \">\"\n+        WHITESPACE@337..338 \" \"\n+        FOR_TYPE@338..362\n+          FOR_KW@338..341 \"for\"\n+          TYPE_PARAM_LIST@341..345\n+            L_ANGLE@341..342 \"<\"\n+            LIFETIME_PARAM@342..344\n+              LIFETIME@342..344 \"\\'b\"\n+            R_ANGLE@344..345 \">\"\n+          WHITESPACE@345..346 \" \"\n+          FN_POINTER_TYPE@346..362\n+            FN_KW@346..348 \"fn\"\n+            PARAM_LIST@348..362\n+              L_PAREN@348..349 \"(\"\n+              PARAM@349..354\n+                REFERENCE_TYPE@349..354\n+                  AMP@349..350 \"&\"\n+                  LIFETIME@350..352 \"\\'a\"\n+                  WHITESPACE@352..353 \" \"\n+                  PATH_TYPE@353..354\n+                    PATH@353..354\n+                      PATH_SEGMENT@353..354\n+                        NAME_REF@353..354\n+                          IDENT@353..354 \"T\"\n+              COMMA@354..355 \",\"\n+              WHITESPACE@355..356 \" \"\n+              PARAM@356..361\n+                REFERENCE_TYPE@356..361\n+                  AMP@356..357 \"&\"\n+                  LIFETIME@357..359 \"\\'b\"\n+                  WHITESPACE@359..360 \" \"\n+                  PATH_TYPE@360..361\n+                    PATH@360..361\n+                      PATH_SEGMENT@360..361\n+                        NAME_REF@360..361\n+                          IDENT@360..361 \"T\"\n+              R_PAREN@361..362 \")\"\n+        COLON@362..363 \":\"\n+        WHITESPACE@363..364 \" \"\n+        TYPE_BOUND_LIST@364..368\n+          TYPE_BOUND@364..368\n+            PATH_TYPE@364..368\n+              PATH@364..368\n+                PATH_SEGMENT@364..368\n+                  NAME_REF@364..368\n+                    IDENT@364..368 \"Copy\"\n+      COMMA@368..369 \",\"\n+    WHITESPACE@369..370 \"\\n\"\n+    BLOCK_EXPR@370..373\n+      L_CURLY@370..371 \"{\"\n+      WHITESPACE@371..372 \"\\n\"\n+      R_CURLY@372..373 \"}\"\n+  WHITESPACE@373..374 \"\\n\""}, {"sha": "9058c46190c4da2d68d7c75904d43efad394b93f", "filename": "crates/ra_syntax/test_data/parser/ok/0067_where_for_pred.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0067_where_for_pred.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0067_where_for_pred.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Fok%2F0067_where_for_pred.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -0,0 +1,30 @@\n+fn for_trait<F>()\n+where\n+    for<'a> F: Fn(&'a str),\n+{\n+}\n+fn for_ref<F>()\n+where\n+    for<'a> &'a F: Debug,\n+{\n+}\n+fn for_parens<F>()\n+where\n+    for<'a> (&'a F): Fn(&'a str),\n+{\n+}\n+fn for_slice<F>()\n+where\n+    for<'a> [&'a F]: Eq,\n+{\n+}\n+fn for_qpath<T>(_t: &T)\n+where\n+    for<'a> <&'a T as Baz>::Foo: Iterator,\n+{\n+}\n+fn for_for_fn<T>()\n+where\n+    for<'a> for<'b> fn(&'a T, &'b T): Copy,\n+{\n+}"}, {"sha": "392648d7133d6c623ffed187d35074a822eca894", "filename": "xtask/src/ast_src.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/xtask%2Fsrc%2Fast_src.rs", "raw_url": "https://github.com/rust-lang/rust/raw/36353bb1827dbd2efcde2d18c8598c4cc5e2e296/xtask%2Fsrc%2Fast_src.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fast_src.rs?ref=36353bb1827dbd2efcde2d18c8598c4cc5e2e296", "patch": "@@ -1707,7 +1707,7 @@ pub(crate) const AST_SRC: AstSrc = AstSrc {\n         /// ```\n         ///\n         /// [Reference](https://doc.rust-lang.org/reference/items/generics.html#where-clauses)\n-        struct WherePred: TypeBoundsOwner { T![lifetime], TypeRef }\n+        struct WherePred: TypeBoundsOwner { T![for], TypeParamList, T![lifetime], TypeRef }\n \n         /// Where clause.\n         ///"}]}