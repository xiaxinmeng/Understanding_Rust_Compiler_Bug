{"sha": "2e1e8d29130fe5db2e8beceb7981a0197aaff772", "node_id": "MDY6Q29tbWl0NzI0NzEyOjJlMWU4ZDI5MTMwZmU1ZGIyZThiZWNlYjc5ODFhMDE5N2FhZmY3NzI=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-10-26T10:25:10Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-10-26T15:06:41Z"}, "message": "Rollup merge of #55343 - Keruspe:remap-debuginfo-release, r=alexcrichton\n\nrustbuild: fix remap-debuginfo when building a release\n\nFallback to the release number as we can't get the git commit sha as we're not in a git repository.\n\nFixes #55341", "tree": {"sha": "3c479fbc6d78c04c40922ef39305a2e6e325185a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3c479fbc6d78c04c40922ef39305a2e6e325185a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2e1e8d29130fe5db2e8beceb7981a0197aaff772", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlvTLYEACgkQ/vbIBR0O\nATxfShAAnEeYAKYge2i69ZvlBqVCJlynLymOfxtBrrwPmO9/Uo8qAwcb4CXre9IT\nyUnQut4fpTYTTMAAAnvUtQZer45qEzWrcw4DoIbLUjNKJ8EWHsi3BZgkVPPYdxtr\nhLyTLfCH0KLrw2Vv1jP2AH8AeFoNgG7T6wKm4FIlJL2LkGeZGL6BRZicx3purnak\n2kyck52WAi1A0rIQzBFD8HIQaOrMFwKBnzPB41lvlmwpRg/pLSwGqgRjVw90PlQJ\nuVt9tJXvVmIYwYLvC+yPDe70XI1HqksTvJ66SSsyekOcyXCI9yzDIcFaW17Uh27U\n4I/n8Xd68slAERm92K5OI1usSX9f4wTgsADBsf+lcvh08teiW4AG4KV4MmkprYXh\nifpd/Wa0iSy78VL37fwFqbLa+wH9sk9dJyQhyThkWHCx3Vns0EUY/PmdCuAbbPq8\nLrWKmJHXnGWAMq91JiZiVqOga1bRSy4E08k6bFMTWZ1bje8VDvfAyRqIyDxHbKoB\nqyxW9g/YF/VY4vLpoILak7C5plK5lS5O/CVLR5pOejnVgLq0ezXPS7LI8KUl0B9q\nsKoazV0OAGjadtFT6nwh0viLC/UpLDfUmh/z3LGED4DacIt1WT5pgT16oG8MhxEv\nHSMpuwriPaA5MDITdjPnu+FVKO2rbLbxvIxAg9v1AfTpLkGrt/4=\n=bzv7\n-----END PGP SIGNATURE-----", "payload": "tree 3c479fbc6d78c04c40922ef39305a2e6e325185a\nparent 5c94daa0171bc25e23efdd3ed698378c2852d500\nparent bbc3cd43784b69beda25dc0f002514d656d853a2\nauthor kennytm <kennytm@gmail.com> 1540549510 +0800\ncommitter kennytm <kennytm@gmail.com> 1540566401 +0800\n\nRollup merge of #55343 - Keruspe:remap-debuginfo-release, r=alexcrichton\n\nrustbuild: fix remap-debuginfo when building a release\n\nFallback to the release number as we can't get the git commit sha as we're not in a git repository.\n\nFixes #55341\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2e1e8d29130fe5db2e8beceb7981a0197aaff772", "html_url": "https://github.com/rust-lang/rust/commit/2e1e8d29130fe5db2e8beceb7981a0197aaff772", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2e1e8d29130fe5db2e8beceb7981a0197aaff772/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5c94daa0171bc25e23efdd3ed698378c2852d500", "url": "https://api.github.com/repos/rust-lang/rust/commits/5c94daa0171bc25e23efdd3ed698378c2852d500", "html_url": "https://github.com/rust-lang/rust/commit/5c94daa0171bc25e23efdd3ed698378c2852d500"}, {"sha": "bbc3cd43784b69beda25dc0f002514d656d853a2", "url": "https://api.github.com/repos/rust-lang/rust/commits/bbc3cd43784b69beda25dc0f002514d656d853a2", "html_url": "https://github.com/rust-lang/rust/commit/bbc3cd43784b69beda25dc0f002514d656d853a2"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "ab3d0b51370f142dfdd4e73615bd63c96e158b56", "filename": "src/bootstrap/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2e1e8d29130fe5db2e8beceb7981a0197aaff772/src%2Fbootstrap%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2e1e8d29130fe5db2e8beceb7981a0197aaff772/src%2Fbootstrap%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Flib.rs?ref=2e1e8d29130fe5db2e8beceb7981a0197aaff772", "patch": "@@ -765,7 +765,7 @@ impl Build {\n \n         let path = match which {\n             GitRepo::Rustc => {\n-                let sha = self.rust_info.sha().expect(\"failed to find sha\");\n+                let sha = self.rust_sha().unwrap_or(channel::CFG_RELEASE_NUM);\n                 format!(\"/rustc/{}\", sha)\n             }\n             GitRepo::Llvm => format!(\"/rustc/llvm\"),"}]}