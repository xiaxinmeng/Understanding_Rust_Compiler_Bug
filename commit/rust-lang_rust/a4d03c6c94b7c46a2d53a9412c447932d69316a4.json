{"sha": "a4d03c6c94b7c46a2d53a9412c447932d69316a4", "node_id": "C_kwDOAAsO6NoAKGE0ZDAzYzZjOTRiN2M0NmEyZDUzYTk0MTJjNDQ3OTMyZDY5MzE2YTQ", "commit": {"author": {"name": "Urgau", "email": "urgau@numericable.fr", "date": "2022-05-25T14:25:18Z"}, "committer": {"name": "Urgau", "email": "urgau@numericable.fr", "date": "2022-05-30T15:04:27Z"}, "message": "Add test for known-bugs of cfg_accessible", "tree": {"sha": "a46c49bbbc5f2f555872c1dcd5ee08b282a664f5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a46c49bbbc5f2f555872c1dcd5ee08b282a664f5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a4d03c6c94b7c46a2d53a9412c447932d69316a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a4d03c6c94b7c46a2d53a9412c447932d69316a4", "html_url": "https://github.com/rust-lang/rust/commit/a4d03c6c94b7c46a2d53a9412c447932d69316a4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a4d03c6c94b7c46a2d53a9412c447932d69316a4/comments", "author": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Urgau", "id": 3616612, "node_id": "MDQ6VXNlcjM2MTY2MTI=", "avatar_url": "https://avatars.githubusercontent.com/u/3616612?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Urgau", "html_url": "https://github.com/Urgau", "followers_url": "https://api.github.com/users/Urgau/followers", "following_url": "https://api.github.com/users/Urgau/following{/other_user}", "gists_url": "https://api.github.com/users/Urgau/gists{/gist_id}", "starred_url": "https://api.github.com/users/Urgau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Urgau/subscriptions", "organizations_url": "https://api.github.com/users/Urgau/orgs", "repos_url": "https://api.github.com/users/Urgau/repos", "events_url": "https://api.github.com/users/Urgau/events{/privacy}", "received_events_url": "https://api.github.com/users/Urgau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "83373675c81dd0343ccbee55d9c3b6ba13e65d35", "url": "https://api.github.com/repos/rust-lang/rust/commits/83373675c81dd0343ccbee55d9c3b6ba13e65d35", "html_url": "https://github.com/rust-lang/rust/commit/83373675c81dd0343ccbee55d9c3b6ba13e65d35"}], "stats": {"total": 52, "additions": 46, "deletions": 6}, "files": [{"sha": "a95d397d3d235c2e39d9f597fec318535468a32e", "filename": "src/test/ui/conditional-compilation/cfg_accessible-bugs.rs", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/a4d03c6c94b7c46a2d53a9412c447932d69316a4/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-bugs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4d03c6c94b7c46a2d53a9412c447932d69316a4/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-bugs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-bugs.rs?ref=a4d03c6c94b7c46a2d53a9412c447932d69316a4", "patch": "@@ -0,0 +1,30 @@\n+// This test is a collection of test that should pass.\n+//\n+// check-fail\n+\n+#![feature(cfg_accessible)]\n+#![feature(trait_alias)]\n+\n+enum Enum {\n+    Existing { existing: u8 },\n+}\n+\n+trait TraitAlias = std::fmt::Debug + Send;\n+\n+// FIXME: Currently returns `false` but should be \"not sure\"\n+#[cfg_accessible(Enum::Existing::existing)]\n+const A: bool = true;\n+\n+// FIXME: Currently returns `false` but should be \"not sure\"\n+#[cfg_accessible(Enum::Existing::unresolved)]\n+const B: bool = true;\n+\n+// FIXME: Currently shows \"cannot determine\" but should be `false`\n+#[cfg_accessible(unresolved)] //~ ERROR cannot determine\n+const C: bool = true;\n+\n+// FIXME: Currently shows \"not sure\" but should be `false`\n+#[cfg_accessible(TraitAlias::unresolved)] //~ ERROR not sure whether the path is accessible or not\n+const D: bool = true;\n+\n+fn main() {}"}, {"sha": "30db6063041348977f5f35bddd04511457864720", "filename": "src/test/ui/conditional-compilation/cfg_accessible-bugs.stderr", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a4d03c6c94b7c46a2d53a9412c447932d69316a4/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-bugs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a4d03c6c94b7c46a2d53a9412c447932d69316a4/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-bugs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-bugs.stderr?ref=a4d03c6c94b7c46a2d53a9412c447932d69316a4", "patch": "@@ -0,0 +1,16 @@\n+error: not sure whether the path is accessible or not\n+  --> $DIR/cfg_accessible-bugs.rs:28:18\n+   |\n+LL | #[cfg_accessible(TraitAlias::unresolved)]\n+   |                  ^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+   = note: the type may have associated items, but we are currently not checking them\n+\n+error: cannot determine whether the path is accessible or not\n+  --> $DIR/cfg_accessible-bugs.rs:24:1\n+   |\n+LL | #[cfg_accessible(unresolved)]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+error: aborting due to 2 previous errors\n+"}, {"sha": "55b68ce0d6313341ea71bc4cf1cdcadec8b2dc80", "filename": "src/test/ui/conditional-compilation/cfg_accessible-not_sure.rs", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/a4d03c6c94b7c46a2d53a9412c447932d69316a4/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-not_sure.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a4d03c6c94b7c46a2d53a9412c447932d69316a4/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-not_sure.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fconditional-compilation%2Fcfg_accessible-not_sure.rs?ref=a4d03c6c94b7c46a2d53a9412c447932d69316a4", "patch": "@@ -33,12 +33,6 @@ enum Enum {\n     Existing { existing: u8 },\n }\n \n-// FIXME: Currently returns `false` but should be \"not sure\"\n-#[cfg_accessible(Enum::Existing::existing)]\n-const A: bool = true;\n-// FIXME: Currently returns `false` but should be \"not sure\"\n-#[cfg_accessible(Enum::Existing::unresolved)]\n-const B: bool = true;\n #[cfg_accessible(Enum::unresolved)] //~ ERROR not sure\n const C: bool = true;\n "}]}