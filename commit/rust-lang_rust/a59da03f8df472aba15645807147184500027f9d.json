{"sha": "a59da03f8df472aba15645807147184500027f9d", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE1OWRhMDNmOGRmNDcyYWJhMTU2NDU4MDcxNDcxODQ1MDAwMjdmOWQ=", "commit": {"author": {"name": "flip1995", "email": "9744647+flip1995@users.noreply.github.com", "date": "2018-08-29T22:12:47Z"}, "committer": {"name": "Manish Goregaokar", "email": "manishsmail@gmail.com", "date": "2018-08-31T07:47:09Z"}, "message": "Add hint for cfg_attr and fix test", "tree": {"sha": "be4e70756ec4deb8043a418e4f52bcaa9fa1cb53", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be4e70756ec4deb8043a418e4f52bcaa9fa1cb53"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a59da03f8df472aba15645807147184500027f9d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a59da03f8df472aba15645807147184500027f9d", "html_url": "https://github.com/rust-lang/rust/commit/a59da03f8df472aba15645807147184500027f9d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a59da03f8df472aba15645807147184500027f9d/comments", "author": {"login": "flip1995", "id": 9744647, "node_id": "MDQ6VXNlcjk3NDQ2NDc=", "avatar_url": "https://avatars.githubusercontent.com/u/9744647?v=4", "gravatar_id": "", "url": "https://api.github.com/users/flip1995", "html_url": "https://github.com/flip1995", "followers_url": "https://api.github.com/users/flip1995/followers", "following_url": "https://api.github.com/users/flip1995/following{/other_user}", "gists_url": "https://api.github.com/users/flip1995/gists{/gist_id}", "starred_url": "https://api.github.com/users/flip1995/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/flip1995/subscriptions", "organizations_url": "https://api.github.com/users/flip1995/orgs", "repos_url": "https://api.github.com/users/flip1995/repos", "events_url": "https://api.github.com/users/flip1995/events{/privacy}", "received_events_url": "https://api.github.com/users/flip1995/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Manishearth", "id": 1617736, "node_id": "MDQ6VXNlcjE2MTc3MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1617736?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Manishearth", "html_url": "https://github.com/Manishearth", "followers_url": "https://api.github.com/users/Manishearth/followers", "following_url": "https://api.github.com/users/Manishearth/following{/other_user}", "gists_url": "https://api.github.com/users/Manishearth/gists{/gist_id}", "starred_url": "https://api.github.com/users/Manishearth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Manishearth/subscriptions", "organizations_url": "https://api.github.com/users/Manishearth/orgs", "repos_url": "https://api.github.com/users/Manishearth/repos", "events_url": "https://api.github.com/users/Manishearth/events{/privacy}", "received_events_url": "https://api.github.com/users/Manishearth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3720557361217761ef414519f1d21300e74f0984", "url": "https://api.github.com/repos/rust-lang/rust/commits/3720557361217761ef414519f1d21300e74f0984", "html_url": "https://github.com/rust-lang/rust/commit/3720557361217761ef414519f1d21300e74f0984"}], "stats": {"total": 31, "additions": 17, "deletions": 14}, "files": [{"sha": "7e8f8f309b4b15a2654d69c0e5ea60fd1cd75272", "filename": "src/librustc/lint/levels.rs", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/a59da03f8df472aba15645807147184500027f9d/src%2Flibrustc%2Flint%2Flevels.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a59da03f8df472aba15645807147184500027f9d/src%2Flibrustc%2Flint%2Flevels.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Flevels.rs?ref=a59da03f8df472aba15645807147184500027f9d", "patch": "@@ -280,25 +280,27 @@ impl<'a> LintLevelsBuilder<'a> {\n                                 let (lvl, src) =\n                                     self.sets\n                                         .get_lint_level(lint, self.cur, Some(&specs), &sess);\n+                                let msg = format!(\n+                                    \"lint name `{}` is deprecated \\\n+                                     and may not have an effect in the future \\\n+                                     Also `cfg_attr(cargo-clippy)` won't be necessary anymore\",\n+                                    name\n+                                );\n                                 let mut err = lint::struct_lint_level(\n                                     self.sess,\n                                     lint,\n                                     lvl,\n                                     src,\n                                     Some(li.span.into()),\n-                                    &format!(\n-                                        \"lint name `{}` is deprecated \\\n-                                         and may not have an effect in the future\",\n-                                        name\n-                                    ),\n+                                    &msg,\n                                 );\n                                 err.span_suggestion_with_applicability(\n                                     li.span,\n                                     \"change it to\",\n                                     new_lint_name.to_string(),\n                                     Applicability::MachineApplicable,\n-                                );\n-                                err.emit();\n+                                ).emit();\n+\n                                 let src = LintSource::Node(Symbol::intern(&new_lint_name), li.span);\n                                 for id in ids {\n                                     specs.insert(*id, (level, src));"}, {"sha": "aef15c1abb11ad704a516c53bdfc18ec6c4aa4da", "filename": "src/test/ui-fulldeps/lint_tool_test.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/a59da03f8df472aba15645807147184500027f9d/src%2Ftest%2Fui-fulldeps%2Flint_tool_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a59da03f8df472aba15645807147184500027f9d/src%2Ftest%2Fui-fulldeps%2Flint_tool_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint_tool_test.rs?ref=a59da03f8df472aba15645807147184500027f9d", "patch": "@@ -16,6 +16,7 @@\n #![allow(dead_code)]\n #![deny(clippy_group)]\n //~^ WARNING lint name `clippy_group` is deprecated and may not have an effect in the future\n+//~^^ WARNING lint name `clippy_group` is deprecated and may not have an effect in the future\n \n fn lintme() { } //~ ERROR item is named 'lintme'\n "}, {"sha": "f2ee954264b593fab6aecb19383ef568ba1a2a58", "filename": "src/test/ui-fulldeps/lint_tool_test.stderr", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/a59da03f8df472aba15645807147184500027f9d/src%2Ftest%2Fui-fulldeps%2Flint_tool_test.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/a59da03f8df472aba15645807147184500027f9d/src%2Ftest%2Fui-fulldeps%2Flint_tool_test.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Flint_tool_test.stderr?ref=a59da03f8df472aba15645807147184500027f9d", "patch": "@@ -1,33 +1,33 @@\n-warning: lint name `clippy_group` is deprecated and may not have an effect in the future\n+warning: lint name `clippy_group` is deprecated and may not have an effect in the future Also `cfg_attr(cargo-clippy)` won't be necessary anymore\n   --> $DIR/lint_tool_test.rs:17:9\n    |\n LL | #![deny(clippy_group)]\n    |         ^^^^^^^^^^^^ help: change it to: `clippy::group`\n    |\n    = note: #[warn(renamed_and_removed_lints)] on by default\n \n-warning: lint name `test_group` is deprecated and may not have an effect in the future\n-  --> $DIR/lint_tool_test.rs:31:9\n+warning: lint name `test_group` is deprecated and may not have an effect in the future Also `cfg_attr(cargo-clippy)` won't be necessary anymore\n+  --> $DIR/lint_tool_test.rs:32:9\n    |\n LL | #[allow(test_group)]\n    |         ^^^^^^^^^^ help: change it to: `clippy::test_group`\n \n warning: unknown lint: `this_lint_does_not_exist`\n-  --> $DIR/lint_tool_test.rs:33:8\n+  --> $DIR/lint_tool_test.rs:34:8\n    |\n LL | #[deny(this_lint_does_not_exist)] //~ WARNING unknown lint: `this_lint_does_not_exist`\n    |        ^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n    = note: #[warn(unknown_lints)] on by default\n \n-warning: lint name `clippy_group` is deprecated and may not have an effect in the future\n+warning: lint name `clippy_group` is deprecated and may not have an effect in the future Also `cfg_attr(cargo-clippy)` won't be necessary anymore\n   --> $DIR/lint_tool_test.rs:17:9\n    |\n LL | #![deny(clippy_group)]\n    |         ^^^^^^^^^^^^ help: change it to: `clippy::group`\n \n error: item is named 'lintme'\n-  --> $DIR/lint_tool_test.rs:20:1\n+  --> $DIR/lint_tool_test.rs:21:1\n    |\n LL | fn lintme() { } //~ ERROR item is named 'lintme'\n    | ^^^^^^^^^^^^^^^\n@@ -40,7 +40,7 @@ LL | #![deny(clippy_group)]\n    = note: #[deny(clippy::test_lint)] implied by #[deny(clippy::group)]\n \n error: item is named 'lintmetoo'\n-  --> $DIR/lint_tool_test.rs:28:5\n+  --> $DIR/lint_tool_test.rs:29:5\n    |\n LL |     fn lintmetoo() { } //~ ERROR item is named 'lintmetoo'\n    |     ^^^^^^^^^^^^^^^^^^"}]}