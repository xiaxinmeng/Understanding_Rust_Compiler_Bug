{"sha": "2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxMzFiMTUzYjMzZjdiYTJkYzBhN2NkM2VhNGVmZDFiYzRhMDNiYTI=", "commit": {"author": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2019-03-03T19:04:26Z"}, "committer": {"name": "Matthew Jasper", "email": "mjjasper1@gmail.com", "date": "2019-03-03T20:34:26Z"}, "message": "Check which blocks are cleanup in mir-opt tests", "tree": {"sha": "88d8c8f06d321b7ec0761e17824f36ba8c388d6c", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/88d8c8f06d321b7ec0761e17824f36ba8c388d6c"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "html_url": "https://github.com/rust-lang/rust/commit/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/comments", "author": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "matthewjasper", "id": 20113453, "node_id": "MDQ6VXNlcjIwMTEzNDUz", "avatar_url": "https://avatars.githubusercontent.com/u/20113453?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthewjasper", "html_url": "https://github.com/matthewjasper", "followers_url": "https://api.github.com/users/matthewjasper/followers", "following_url": "https://api.github.com/users/matthewjasper/following{/other_user}", "gists_url": "https://api.github.com/users/matthewjasper/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthewjasper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthewjasper/subscriptions", "organizations_url": "https://api.github.com/users/matthewjasper/orgs", "repos_url": "https://api.github.com/users/matthewjasper/repos", "events_url": "https://api.github.com/users/matthewjasper/events{/privacy}", "received_events_url": "https://api.github.com/users/matthewjasper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2cfd6444a7fb4bd6acef2b97ba53059adc0500a6", "url": "https://api.github.com/repos/rust-lang/rust/commits/2cfd6444a7fb4bd6acef2b97ba53059adc0500a6", "html_url": "https://github.com/rust-lang/rust/commit/2cfd6444a7fb4bd6acef2b97ba53059adc0500a6"}], "stats": {"total": 45, "additions": 22, "deletions": 23}, "files": [{"sha": "5000eb55b09f6952e0075da2a96095d57b59077c", "filename": "src/librustc_mir/util/pretty.rs", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Flibrustc_mir%2Futil%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Flibrustc_mir%2Futil%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Futil%2Fpretty.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -317,9 +317,8 @@ where\n     let data = &mir[block];\n \n     // Basic block label at the top.\n-    let cleanup_text = if data.is_cleanup { \" // cleanup\" } else { \"\" };\n-    let lbl = format!(\"{}{:?}: {{\", INDENT, block);\n-    writeln!(w, \"{0:1$}{2}\", lbl, ALIGN, cleanup_text)?;\n+    let cleanup_text = if data.is_cleanup { \" (cleanup)\" } else { \"\" };\n+    writeln!(w, \"{}{:?}{}: {{\", INDENT, block, cleanup_text)?;\n \n     // List of statements in the middle.\n     let mut current_location = Location {"}, {"sha": "c6ca6e41c2da418c7349d63dc6ac38ced8835161", "filename": "src/test/mir-opt/basic_assignment.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fbasic_assignment.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fbasic_assignment.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fbasic_assignment.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -48,7 +48,7 @@ fn main() {\n //        drop(_6) -> [return: bb6, unwind: bb4];\n //    }\n //    ...\n-//    bb5: {\n+//    bb5 (cleanup): {\n //        drop(_6) -> bb4;\n //    }\n // END rustc.main.SimplifyCfg-initial.after.mir"}, {"sha": "14d302f0eea72a9899df5899bd9a9e1654469f14", "filename": "src/test/mir-opt/box_expr.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fbox_expr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fbox_expr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fbox_expr.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -38,7 +38,7 @@ impl Drop for S {\n //         (*_2) = const S::new() -> [return: bb2, unwind: bb3];\n //     }\n //\n-//     bb1: {\n+//     bb1 (cleanup): {\n //         resume;\n //     }\n //\n@@ -47,7 +47,7 @@ impl Drop for S {\n //         drop(_2) -> bb4;\n //     }\n //\n-//     bb3: {\n+//     bb3 (cleanup): {\n //         drop(_2) -> bb1;\n //     }\n //\n@@ -62,11 +62,11 @@ impl Drop for S {\n //         drop(_4) -> [return: bb8, unwind: bb6];\n //     }\n //\n-//     bb6: {\n+//     bb6 (cleanup): {\n //         drop(_1) -> bb1;\n //     }\n //\n-//     bb7: {\n+//     bb7 (cleanup): {\n //         drop(_4) -> bb6;\n //     }\n //"}, {"sha": "047e623941b71835e2f9eceda95da670b3b02c7b", "filename": "src/test/mir-opt/issue-38669.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fissue-38669.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fissue-38669.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue-38669.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -18,7 +18,7 @@ fn main() {\n //         FakeRead(ForLet, _1);\n //         goto -> bb2;\n //     }\n-//     bb1: {\n+//     bb1 (cleanup): {\n //         resume;\n //     }\n //     bb2: {"}, {"sha": "5f4f4ab82af24a027d931f4289b31e7c9a4b0154", "filename": "src/test/mir-opt/issue-49232.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fissue-49232.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fissue-49232.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fissue-49232.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -43,7 +43,7 @@ fn main() {\n //         FakeRead(ForMatchedPlace, _3);\n //         switchInt(_3) -> [false: bb9, otherwise: bb8];\n //     }\n-//     bb4: {\n+//     bb4 (cleanup): {\n //         resume;\n //     }\n //     bb5: {"}, {"sha": "34891ee70b5c6c3d45f07e7a61be8003dac03cd4", "filename": "src/test/mir-opt/loop_test.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Floop_test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Floop_test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Floop_test.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -18,7 +18,7 @@ fn main() {\n // END RUST SOURCE\n // START rustc.main.SimplifyCfg-qualify-consts.after.mir\n //    ...\n-//    bb1: { // The cleanup block\n+//    bb1 (cleanup): {\n //        resume;\n //    }\n //    ..."}, {"sha": "7d3abdd79bddaa50fb625b4edae161d89355cb54", "filename": "src/test/mir-opt/match_false_edges.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fmatch_false_edges.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fmatch_false_edges.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fmatch_false_edges.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -47,7 +47,7 @@ fn main() {\n //      _3 = discriminant(_2);\n //      switchInt(move _3) -> [0isize: bb4, 1isize: bb2, otherwise: bb7];\n //  }\n-//  bb1: {\n+//  bb1 (cleanup): {\n //      resume;\n //  }\n //  bb2: {\n@@ -116,7 +116,7 @@ fn main() {\n //      _3 = discriminant(_2);\n //      switchInt(move _3) -> [0isize: bb3, 1isize: bb2, otherwise: bb7];\n //  }\n-//  bb1: {\n+//  bb1 (cleanup): {\n //      resume;\n //  }\n //  bb2: {\n@@ -185,7 +185,7 @@ fn main() {\n //      _3 = discriminant(_2);\n //      switchInt(move _3) -> [1isize: bb2, otherwise: bb3];\n //  }\n-//  bb1: {\n+//  bb1 (cleanup): {\n //      resume;\n //  }\n //  bb2: {"}, {"sha": "167a6eb349eb2f5e626a5104902c4b65ebc6c720", "filename": "src/test/mir-opt/packed-struct-drop-aligned.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fpacked-struct-drop-aligned.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fpacked-struct-drop-aligned.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fpacked-struct-drop-aligned.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -38,14 +38,14 @@ impl Drop for Droppy {\n //         _6 = move (_1.0: Aligned);\n //         drop(_6) -> [return: bb4, unwind: bb3];\n //     }\n-//     bb1: {\n+//     bb1 (cleanup): {\n //         resume;\n //     }\n //     bb2: {\n //         StorageDead(_1);\n //         return;\n //     }\n-//     bb3: {\n+//     bb3 (cleanup): {\n //         (_1.0: Aligned) = move _4;\n //         drop(_1) -> bb1;\n //     }"}, {"sha": "144348450a91b5aa34edce9ca7980e2d5afee8b7", "filename": "src/test/mir-opt/remove_fake_borrows.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fremove_fake_borrows.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Fremove_fake_borrows.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Fremove_fake_borrows.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -63,7 +63,7 @@ fn main() {\n //     StorageDead(_8);\n //     return;\n // }\n-// bb10: {\n+// bb10 (cleanup): {\n //     resume;\n // }\n // END rustc.match_guard.CleanupNonCodegenStatements.before.mir\n@@ -114,7 +114,7 @@ fn main() {\n //     StorageDead(_8);\n //     return;\n // }\n-// bb10: {\n+// bb10 (cleanup): {\n //     resume;\n // }\n // END rustc.match_guard.CleanupNonCodegenStatements.after.mir"}, {"sha": "c56334f2edd14484f07c76467383faf560fc43ee", "filename": "src/test/mir-opt/unusual-item-types.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Funusual-item-types.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2/src%2Ftest%2Fmir-opt%2Funusual-item-types.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fmir-opt%2Funusual-item-types.rs?ref=2131b153b33f7ba2dc0a7cd3ea4efd1bc4a03ba2", "patch": "@@ -22,7 +22,7 @@ fn main() {\n //     _0 = const 2i32;\n //     return;\n // }\n-// bb1: {\n+// bb1 (cleanup): {\n //     resume;\n // }\n // END rustc.{{impl}}-ASSOCIATED_CONSTANT.mir_map.0.mir\n@@ -32,7 +32,7 @@ fn main() {\n //     _0 = const 5isize;\n //     return;\n // }\n-// bb1: {\n+// bb1 (cleanup): {\n //     resume;\n // }\n // END rustc.E-V-{{constant}}.mir_map.0.mir\n@@ -44,16 +44,16 @@ fn main() {\n // bb1: {\n //     return;\n // }\n-// bb2: {\n+// bb2 (cleanup): {\n //     resume;\n // }\n // bb3: {\n //     goto -> bb1;\n // }\n-// bb4: {\n+// bb4 (cleanup): {\n //     goto -> bb2;\n // }\n-// bb5: {\n+// bb5 (cleanup): {\n //     drop(((*_1).0: alloc::raw_vec::RawVec<i32>)) -> bb4;\n // }\n // bb6: {"}]}