{"sha": "83ead589178e2f6cd6232b2a04f57fe3b2087f96", "node_id": "MDY6Q29tbWl0NzI0NzEyOjgzZWFkNTg5MTc4ZTJmNmNkNjIzMmIyYTA0ZjU3ZmUzYjIwODdmOTY=", "commit": {"author": {"name": "Mark Rousskov", "email": "mark.simulacrum@gmail.com", "date": "2019-07-15T23:55:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-07-15T23:55:12Z"}, "message": "Rollup merge of #62680 - ecstatic-morse:fix-dataflow-results-consumer, r=matthewjasper\n\nActually call `visit_block_entry` in `DataflowResultsConsumer`\n\nThis fixes a trivial bug in `DataflowResultsConsumer`: `visit_block_entry` is never called when visiting dataflow results.\n\nA previous version of #62547 used this API and included this fix, but it has since switched to `DataflowResultsCursor` making this commit irrelevant.", "tree": {"sha": "0fdc4a2e0ea2697de923bc63435f83fed641fb12", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0fdc4a2e0ea2697de923bc63435f83fed641fb12"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/83ead589178e2f6cd6232b2a04f57fe3b2087f96", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJdLRJgCRBK7hj4Ov3rIwAAdHIIAFbWqU9vi3TtEd8jIOW0FahF\nU3W3pFSpuOJ+NTcOnbJc3joIVb624mOyZwrQY4Umcc4gTODYPbQ0//vqynQdMn5Y\nhpHVyh5uHqFqd17M/PmKcq0nGIRR3ATHlPy2X0/YTZQJSrZ5n3wVcpAr7tfVt1AG\nue6k3xBlGmfJMWBwrUaxyA07ealAfqWmJTicjHBFE8XvywG3HLOYAa+HG2Zk3riU\nyli6JFK0rPGgU9vYBObrE+yGVL3m0ydYi+zBF8Itj4aDnKm6XR7S/DdhbegdvsMJ\nv+8JwT71oGdfJ+562qJo0pUETh2ao9hhviGCr76Ff4y6OnmOgUSPDL9tanDkrxQ=\n=LUOt\n-----END PGP SIGNATURE-----\n", "payload": "tree 0fdc4a2e0ea2697de923bc63435f83fed641fb12\nparent 879c610557a7a4aa5f219a8c0a73f08059f0571f\nparent 2ce227dcc6213947b0dab34cc4139b80525670db\nauthor Mark Rousskov <mark.simulacrum@gmail.com> 1563234912 -0400\ncommitter GitHub <noreply@github.com> 1563234912 -0400\n\nRollup merge of #62680 - ecstatic-morse:fix-dataflow-results-consumer, r=matthewjasper\n\nActually call `visit_block_entry` in `DataflowResultsConsumer`\n\nThis fixes a trivial bug in `DataflowResultsConsumer`: `visit_block_entry` is never called when visiting dataflow results.\n\nA previous version of #62547 used this API and included this fix, but it has since switched to `DataflowResultsCursor` making this commit irrelevant.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/83ead589178e2f6cd6232b2a04f57fe3b2087f96", "html_url": "https://github.com/rust-lang/rust/commit/83ead589178e2f6cd6232b2a04f57fe3b2087f96", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/83ead589178e2f6cd6232b2a04f57fe3b2087f96/comments", "author": {"login": "Mark-Simulacrum", "id": 5047365, "node_id": "MDQ6VXNlcjUwNDczNjU=", "avatar_url": "https://avatars.githubusercontent.com/u/5047365?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Mark-Simulacrum", "html_url": "https://github.com/Mark-Simulacrum", "followers_url": "https://api.github.com/users/Mark-Simulacrum/followers", "following_url": "https://api.github.com/users/Mark-Simulacrum/following{/other_user}", "gists_url": "https://api.github.com/users/Mark-Simulacrum/gists{/gist_id}", "starred_url": "https://api.github.com/users/Mark-Simulacrum/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Mark-Simulacrum/subscriptions", "organizations_url": "https://api.github.com/users/Mark-Simulacrum/orgs", "repos_url": "https://api.github.com/users/Mark-Simulacrum/repos", "events_url": "https://api.github.com/users/Mark-Simulacrum/events{/privacy}", "received_events_url": "https://api.github.com/users/Mark-Simulacrum/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "879c610557a7a4aa5f219a8c0a73f08059f0571f", "url": "https://api.github.com/repos/rust-lang/rust/commits/879c610557a7a4aa5f219a8c0a73f08059f0571f", "html_url": "https://github.com/rust-lang/rust/commit/879c610557a7a4aa5f219a8c0a73f08059f0571f"}, {"sha": "2ce227dcc6213947b0dab34cc4139b80525670db", "url": "https://api.github.com/repos/rust-lang/rust/commits/2ce227dcc6213947b0dab34cc4139b80525670db", "html_url": "https://github.com/rust-lang/rust/commit/2ce227dcc6213947b0dab34cc4139b80525670db"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "f05dfad32572d76f2df83326b40b0b7357a2ada2", "filename": "src/librustc_mir/dataflow/mod.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/83ead589178e2f6cd6232b2a04f57fe3b2087f96/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/83ead589178e2f6cd6232b2a04f57fe3b2087f96/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fdataflow%2Fmod.rs?ref=83ead589178e2f6cd6232b2a04f57fe3b2087f96", "patch": "@@ -333,6 +333,8 @@ pub(crate) trait DataflowResultsConsumer<'a, 'tcx: 'a> {\n     }\n \n     fn process_basic_block(&mut self, bb: BasicBlock, flow_state: &mut Self::FlowState) {\n+        self.visit_block_entry(bb, flow_state);\n+\n         let BasicBlockData { ref statements, ref terminator, is_cleanup: _ } =\n             self.body()[bb];\n         let mut location = Location { block: bb, statement_index: 0 };"}]}