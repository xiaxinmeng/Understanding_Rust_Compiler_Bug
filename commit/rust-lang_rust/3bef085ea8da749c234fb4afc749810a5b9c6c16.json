{"sha": "3bef085ea8da749c234fb4afc749810a5b9c6c16", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNiZWYwODVlYThkYTc0OWMyMzRmYjRhZmM3NDk4MTBhNWI5YzZjMTY=", "commit": {"author": {"name": "Kamal Marhubi", "email": "kamal@marhubi.com", "date": "2016-05-24T14:08:01Z"}, "committer": {"name": "Kamal Marhubi", "email": "kamal@marhubi.com", "date": "2016-05-24T14:08:01Z"}, "message": "syntax: Make codemap::get_filemap() return an Option\n\nThis is more idiomatic, putting the caller in charge of whether or not\nto panic.", "tree": {"sha": "d246cb8d1d4e414c1067bdbd466ec96b237c098e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d246cb8d1d4e414c1067bdbd466ec96b237c098e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3bef085ea8da749c234fb4afc749810a5b9c6c16", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3bef085ea8da749c234fb4afc749810a5b9c6c16", "html_url": "https://github.com/rust-lang/rust/commit/3bef085ea8da749c234fb4afc749810a5b9c6c16", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3bef085ea8da749c234fb4afc749810a5b9c6c16/comments", "author": {"login": "kamalmarhubi", "id": 50936, "node_id": "MDQ6VXNlcjUwOTM2", "avatar_url": "https://avatars.githubusercontent.com/u/50936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamalmarhubi", "html_url": "https://github.com/kamalmarhubi", "followers_url": "https://api.github.com/users/kamalmarhubi/followers", "following_url": "https://api.github.com/users/kamalmarhubi/following{/other_user}", "gists_url": "https://api.github.com/users/kamalmarhubi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamalmarhubi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamalmarhubi/subscriptions", "organizations_url": "https://api.github.com/users/kamalmarhubi/orgs", "repos_url": "https://api.github.com/users/kamalmarhubi/repos", "events_url": "https://api.github.com/users/kamalmarhubi/events{/privacy}", "received_events_url": "https://api.github.com/users/kamalmarhubi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kamalmarhubi", "id": 50936, "node_id": "MDQ6VXNlcjUwOTM2", "avatar_url": "https://avatars.githubusercontent.com/u/50936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kamalmarhubi", "html_url": "https://github.com/kamalmarhubi", "followers_url": "https://api.github.com/users/kamalmarhubi/followers", "following_url": "https://api.github.com/users/kamalmarhubi/following{/other_user}", "gists_url": "https://api.github.com/users/kamalmarhubi/gists{/gist_id}", "starred_url": "https://api.github.com/users/kamalmarhubi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kamalmarhubi/subscriptions", "organizations_url": "https://api.github.com/users/kamalmarhubi/orgs", "repos_url": "https://api.github.com/users/kamalmarhubi/repos", "events_url": "https://api.github.com/users/kamalmarhubi/events{/privacy}", "received_events_url": "https://api.github.com/users/kamalmarhubi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd6e8d45e183861d44ed91a99f0a50403b2776a3", "url": "https://api.github.com/repos/rust-lang/rust/commits/dd6e8d45e183861d44ed91a99f0a50403b2776a3", "html_url": "https://github.com/rust-lang/rust/commit/dd6e8d45e183861d44ed91a99f0a50403b2776a3"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "0a093887c509413a0b2884798c4efe4fd44d3ccf", "filename": "src/librustc_driver/pretty.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3bef085ea8da749c234fb4afc749810a5b9c6c16/src%2Flibrustc_driver%2Fpretty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bef085ea8da749c234fb4afc749810a5b9c6c16/src%2Flibrustc_driver%2Fpretty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_driver%2Fpretty.rs?ref=3bef085ea8da749c234fb4afc749810a5b9c6c16", "patch": "@@ -757,6 +757,7 @@ fn get_source(input: &Input, sess: &Session) -> (Vec<u8>, String) {\n     let src_name = driver::source_name(input);\n     let src = sess.codemap()\n                   .get_filemap(&src_name)\n+                  .unwrap()\n                   .src\n                   .as_ref()\n                   .unwrap()"}, {"sha": "3b13bf2fc50bace83ccf35e788d6ec9d23b55444", "filename": "src/libsyntax/codemap.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3bef085ea8da749c234fb4afc749810a5b9c6c16/src%2Flibsyntax%2Fcodemap.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3bef085ea8da749c234fb4afc749810a5b9c6c16/src%2Flibsyntax%2Fcodemap.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fcodemap.rs?ref=3bef085ea8da749c234fb4afc749810a5b9c6c16", "patch": "@@ -1191,13 +1191,13 @@ impl CodeMap {\n         }\n     }\n \n-    pub fn get_filemap(&self, filename: &str) -> Rc<FileMap> {\n+    pub fn get_filemap(&self, filename: &str) -> Option<Rc<FileMap>> {\n         for fm in self.files.borrow().iter() {\n             if filename == fm.name {\n-                return fm.clone();\n+                return Some(fm.clone());\n             }\n         }\n-        panic!(\"asking for {} which we don't know about\", filename);\n+        None\n     }\n \n     /// For a global BytePos compute the local offset within the containing FileMap"}]}