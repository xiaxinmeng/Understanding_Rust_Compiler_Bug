{"sha": "ce8cac5d9a9a763d0b0e7730f83d790414546471", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlOGNhYzVkOWE5YTc2M2QwYjBlNzczMGY4M2Q3OTA0MTQ1NDY0NzE=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-01T18:13:55Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-08-02T17:39:13Z"}, "message": "Use color to report the final test result, even when running in parallel\n\nAfter the tests are run there is no more parallelism, so it should be less\nlikely that the control characters will introduce wierd artifacts.", "tree": {"sha": "b62a1ab7d160fb2c35c0c06dfe4398a6b5cf6092", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b62a1ab7d160fb2c35c0c06dfe4398a6b5cf6092"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce8cac5d9a9a763d0b0e7730f83d790414546471", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce8cac5d9a9a763d0b0e7730f83d790414546471", "html_url": "https://github.com/rust-lang/rust/commit/ce8cac5d9a9a763d0b0e7730f83d790414546471", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce8cac5d9a9a763d0b0e7730f83d790414546471/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a601eb169ee5748b7afebab12d75ecc3ad3b47bc", "url": "https://api.github.com/repos/rust-lang/rust/commits/a601eb169ee5748b7afebab12d75ecc3ad3b47bc", "html_url": "https://github.com/rust-lang/rust/commit/a601eb169ee5748b7afebab12d75ecc3ad3b47bc"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "d74fd529f632f29a4fa1d8ea1038ac351d55b35f", "filename": "src/lib/test.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/ce8cac5d9a9a763d0b0e7730f83d790414546471/src%2Flib%2Ftest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce8cac5d9a9a763d0b0e7730f83d790414546471/src%2Flib%2Ftest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flib%2Ftest.rs?ref=ce8cac5d9a9a763d0b0e7730f83d790414546471", "patch": "@@ -171,8 +171,9 @@ fn run_tests_console_(opts: &test_opts, tests: &test_desc[],\n \n     st.out.write_str(#fmt(\"\\nresult: \"));\n     if success {\n-        write_ok(st.out, st.use_color);\n-    } else { write_failed(st.out, st.use_color); }\n+        // There's no parallelism at this point so it's safe to use color\n+        write_ok(st.out, true);\n+    } else { write_failed(st.out, true); }\n     st.out.write_str(#fmt(\". %u passed; %u failed; %u ignored\\n\\n\",\n                        st.passed, st.failed, st.ignored));\n "}]}