{"sha": "2760974ec05966c811f1ee6f85bf59b13f28b009", "node_id": "MDY6Q29tbWl0NzI0NzEyOjI3NjA5NzRlYzA1OTY2YzgxMWYxZWU2Zjg1YmY1OWIxM2YyOGIwMDk=", "commit": {"author": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2014-03-05T00:54:35Z"}, "committer": {"name": "Daniel Micay", "email": "danielmicay@gmail.com", "date": "2014-03-05T16:20:50Z"}, "message": "add correct floating point `min` and `max` methods.\n\nThe `std::cmp` functions are not correct for floating point types.\n\n`min(NaN, 2.0)` and `min(2.0, NaN)` return different values, because\nthese functions assume a total order. Floating point types need special\n`min`, `max` and `clamp` functions.", "tree": {"sha": "68d84ba69516afbecb642ad7cb9074292df3dbbd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/68d84ba69516afbecb642ad7cb9074292df3dbbd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2760974ec05966c811f1ee6f85bf59b13f28b009", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2760974ec05966c811f1ee6f85bf59b13f28b009", "html_url": "https://github.com/rust-lang/rust/commit/2760974ec05966c811f1ee6f85bf59b13f28b009", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2760974ec05966c811f1ee6f85bf59b13f28b009/comments", "author": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "thestinger", "id": 1505226, "node_id": "MDQ6VXNlcjE1MDUyMjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1505226?v=4", "gravatar_id": "", "url": "https://api.github.com/users/thestinger", "html_url": "https://github.com/thestinger", "followers_url": "https://api.github.com/users/thestinger/followers", "following_url": "https://api.github.com/users/thestinger/following{/other_user}", "gists_url": "https://api.github.com/users/thestinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/thestinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/thestinger/subscriptions", "organizations_url": "https://api.github.com/users/thestinger/orgs", "repos_url": "https://api.github.com/users/thestinger/repos", "events_url": "https://api.github.com/users/thestinger/events{/privacy}", "received_events_url": "https://api.github.com/users/thestinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6e7f170fedd3c526a643c0b2d13863acd982be02", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e7f170fedd3c526a643c0b2d13863acd982be02", "html_url": "https://github.com/rust-lang/rust/commit/6e7f170fedd3c526a643c0b2d13863acd982be02"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "fb56444d26577bb7959a2121998ee0f5b624b113", "filename": "src/libstd/num/f32.rs", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibstd%2Fnum%2Ff32.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibstd%2Fnum%2Ff32.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Ff32.rs?ref=2760974ec05966c811f1ee6f85bf59b13f28b009", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n //! Operations and constants for 32-bits floats (`f32` type)\n+\n #[allow(missing_doc)];\n \n use prelude::*;\n@@ -311,6 +312,16 @@ impl Bounded for f32 {\n impl Primitive for f32 {}\n \n impl Float for f32 {\n+    #[inline]\n+    fn max(self, other: f32) -> f32 {\n+        unsafe { cmath::c_float::fmax(self, other) }\n+    }\n+\n+    #[inline]\n+    fn min(self, other: f32) -> f32 {\n+        unsafe { cmath::c_float::fmin(self, other) }\n+    }\n+\n     #[inline]\n     fn nan() -> f32 { 0.0 / 0.0 }\n "}, {"sha": "7889041659ad8aa505e27e4cd4e6b55febe3e76c", "filename": "src/libstd/num/f64.rs", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibstd%2Fnum%2Ff64.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibstd%2Fnum%2Ff64.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Ff64.rs?ref=2760974ec05966c811f1ee6f85bf59b13f28b009", "patch": "@@ -23,8 +23,6 @@ use num::{Zero, One, Bounded, strconv};\n use num;\n use intrinsics;\n \n-pub use cmp::{min, max};\n-\n macro_rules! delegate(\n     (\n         $(\n@@ -313,6 +311,16 @@ impl Bounded for f64 {\n impl Primitive for f64 {}\n \n impl Float for f64 {\n+    #[inline]\n+    fn max(self, other: f64) -> f64 {\n+        unsafe { cmath::c_double::fmax(self, other) }\n+    }\n+\n+    #[inline]\n+    fn min(self, other: f64) -> f64 {\n+        unsafe { cmath::c_double::fmin(self, other) }\n+    }\n+\n     #[inline]\n     fn nan() -> f64 { 0.0 / 0.0 }\n "}, {"sha": "2f377a52ef82a72d61d7e3c8ed0d358407ddde2b", "filename": "src/libstd/num/mod.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibstd%2Fnum%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibstd%2Fnum%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fnum%2Fmod.rs?ref=2760974ec05966c811f1ee6f85bf59b13f28b009", "patch": "@@ -313,6 +313,9 @@ pub enum FPCategory {\n pub trait Float: Signed\n                + Round\n                + Primitive {\n+    fn max(self, other: Self) -> Self;\n+    fn min(self, other: Self) -> Self;\n+\n     // FIXME (#5527): These should be associated constants\n     fn nan() -> Self;\n     fn infinity() -> Self;"}, {"sha": "9ebd7d72c9188f3cd6a5f52e021d29dc412394f6", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2760974ec05966c811f1ee6f85bf59b13f28b009/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=2760974ec05966c811f1ee6f85bf59b13f28b009", "patch": "@@ -1063,7 +1063,7 @@ impl MetricMap {\n                 Some(v) => {\n                     let delta = v.value - vold.value;\n                     let noise = match noise_pct {\n-                        None => f64::max(vold.noise.abs(), v.noise.abs()),\n+                        None => vold.noise.abs().max(v.noise.abs()),\n                         Some(pct) => vold.value * pct / 100.0\n                     };\n                     if delta.abs() <= noise {"}]}