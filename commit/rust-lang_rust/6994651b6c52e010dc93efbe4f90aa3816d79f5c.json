{"sha": "6994651b6c52e010dc93efbe4f90aa3816d79f5c", "node_id": "C_kwDOAAsO6NoAKDY5OTQ2NTFiNmM1MmUwMTBkYzkzZWZiZTRmOTBhYTM4MTZkNzlmNWM", "commit": {"author": {"name": "jeremyd2019", "email": "github@jdrake.com", "date": "2022-11-06T19:51:12Z"}, "committer": {"name": "Jeremy Drake", "email": "github@jdrake.com", "date": "2022-11-07T01:29:14Z"}, "message": "fix debuginfo for windows_gnullvm_base.rs\n\nThese lines (including the FIXME comment) were added to windows_gnu_base.rs in cf2c492ef8c87c049b4e3a62f43c841aafc88cba but windows_gnullvm_base.rs was not updated.  This resulted in an error `LLVM ERROR: dwo only supported with ELF and Wasm` attempting to build on aarch64-pc-windows-gnullvm.\n\nSigned-off-by: Jeremy Drake <github@jdrake.com>", "tree": {"sha": "1b184d51479b13582aa512e0564d82042b57aeff", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1b184d51479b13582aa512e0564d82042b57aeff"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6994651b6c52e010dc93efbe4f90aa3816d79f5c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6994651b6c52e010dc93efbe4f90aa3816d79f5c", "html_url": "https://github.com/rust-lang/rust/commit/6994651b6c52e010dc93efbe4f90aa3816d79f5c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6994651b6c52e010dc93efbe4f90aa3816d79f5c/comments", "author": {"login": "jeremyd2019", "id": 4524874, "node_id": "MDQ6VXNlcjQ1MjQ4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4524874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremyd2019", "html_url": "https://github.com/jeremyd2019", "followers_url": "https://api.github.com/users/jeremyd2019/followers", "following_url": "https://api.github.com/users/jeremyd2019/following{/other_user}", "gists_url": "https://api.github.com/users/jeremyd2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremyd2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremyd2019/subscriptions", "organizations_url": "https://api.github.com/users/jeremyd2019/orgs", "repos_url": "https://api.github.com/users/jeremyd2019/repos", "events_url": "https://api.github.com/users/jeremyd2019/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremyd2019/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jeremyd2019", "id": 4524874, "node_id": "MDQ6VXNlcjQ1MjQ4NzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/4524874?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremyd2019", "html_url": "https://github.com/jeremyd2019", "followers_url": "https://api.github.com/users/jeremyd2019/followers", "following_url": "https://api.github.com/users/jeremyd2019/following{/other_user}", "gists_url": "https://api.github.com/users/jeremyd2019/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremyd2019/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremyd2019/subscriptions", "organizations_url": "https://api.github.com/users/jeremyd2019/orgs", "repos_url": "https://api.github.com/users/jeremyd2019/repos", "events_url": "https://api.github.com/users/jeremyd2019/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremyd2019/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1e1e5b8d98750a162335f64ec3c792ce80c9866c", "url": "https://api.github.com/repos/rust-lang/rust/commits/1e1e5b8d98750a162335f64ec3c792ce80c9866c", "html_url": "https://github.com/rust-lang/rust/commit/1e1e5b8d98750a162335f64ec3c792ce80c9866c"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "cada28652f98a79db8df2ac514a8fac9d22bc13a", "filename": "compiler/rustc_target/src/spec/windows_gnullvm_base.rs", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/6994651b6c52e010dc93efbe4f90aa3816d79f5c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_gnullvm_base.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6994651b6c52e010dc93efbe4f90aa3816d79f5c/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_gnullvm_base.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fwindows_gnullvm_base.rs?ref=6994651b6c52e010dc93efbe4f90aa3816d79f5c", "patch": "@@ -1,4 +1,5 @@\n-use crate::spec::{cvs, Cc, LinkerFlavor, Lld, TargetOptions};\n+use crate::spec::{cvs, Cc, DebuginfoKind, LinkerFlavor, Lld, SplitDebuginfo, TargetOptions};\n+use std::borrow::Cow;\n \n pub fn opts() -> TargetOptions {\n     // We cannot use `-nodefaultlibs` because compiler-rt has to be passed\n@@ -36,7 +37,10 @@ pub fn opts() -> TargetOptions {\n         eh_frame_header: false,\n         no_default_libraries: false,\n         has_thread_local: true,\n-\n+        // FIXME(davidtwco): Support Split DWARF on Windows GNU - may require LLVM changes to\n+        // output DWO, despite using DWARF, doesn't use ELF..\n+        debuginfo_kind: DebuginfoKind::Pdb,\n+        supported_split_debuginfo: Cow::Borrowed(&[SplitDebuginfo::Off]),\n         ..Default::default()\n     }\n }"}]}