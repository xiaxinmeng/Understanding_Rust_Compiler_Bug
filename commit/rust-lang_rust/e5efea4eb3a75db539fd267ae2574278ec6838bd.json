{"sha": "e5efea4eb3a75db539fd267ae2574278ec6838bd", "node_id": "MDY6Q29tbWl0NzI0NzEyOmU1ZWZlYTRlYjNhNzVkYjUzOWZkMjY3YWUyNTc0Mjc4ZWM2ODM4YmQ=", "commit": {"author": {"name": "mdinger", "email": "mdinger.bugzilla@gmail.com", "date": "2015-05-13T04:06:52Z"}, "committer": {"name": "mdinger", "email": "mdinger.bugzilla@gmail.com", "date": "2015-05-13T04:06:52Z"}, "message": "Delete `_book` folder if it exists from previous runs", "tree": {"sha": "1e1ba37c5ba196281d9ffbccd485c15e2e57ca98", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e1ba37c5ba196281d9ffbccd485c15e2e57ca98"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e5efea4eb3a75db539fd267ae2574278ec6838bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e5efea4eb3a75db539fd267ae2574278ec6838bd", "html_url": "https://github.com/rust-lang/rust/commit/e5efea4eb3a75db539fd267ae2574278ec6838bd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e5efea4eb3a75db539fd267ae2574278ec6838bd/comments", "author": {"login": "mdinger", "id": 4156987, "node_id": "MDQ6VXNlcjQxNTY5ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/4156987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdinger", "html_url": "https://github.com/mdinger", "followers_url": "https://api.github.com/users/mdinger/followers", "following_url": "https://api.github.com/users/mdinger/following{/other_user}", "gists_url": "https://api.github.com/users/mdinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdinger/subscriptions", "organizations_url": "https://api.github.com/users/mdinger/orgs", "repos_url": "https://api.github.com/users/mdinger/repos", "events_url": "https://api.github.com/users/mdinger/events{/privacy}", "received_events_url": "https://api.github.com/users/mdinger/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mdinger", "id": 4156987, "node_id": "MDQ6VXNlcjQxNTY5ODc=", "avatar_url": "https://avatars.githubusercontent.com/u/4156987?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mdinger", "html_url": "https://github.com/mdinger", "followers_url": "https://api.github.com/users/mdinger/followers", "following_url": "https://api.github.com/users/mdinger/following{/other_user}", "gists_url": "https://api.github.com/users/mdinger/gists{/gist_id}", "starred_url": "https://api.github.com/users/mdinger/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mdinger/subscriptions", "organizations_url": "https://api.github.com/users/mdinger/orgs", "repos_url": "https://api.github.com/users/mdinger/repos", "events_url": "https://api.github.com/users/mdinger/events{/privacy}", "received_events_url": "https://api.github.com/users/mdinger/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2b30b86df6b34ba19e87e63402e43d9e81a64fb", "url": "https://api.github.com/repos/rust-lang/rust/commits/c2b30b86df6b34ba19e87e63402e43d9e81a64fb", "html_url": "https://github.com/rust-lang/rust/commit/c2b30b86df6b34ba19e87e63402e43d9e81a64fb"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "47bdc9335c4019819de309ac70da326c1c528162", "filename": "src/rustbook/build.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e5efea4eb3a75db539fd267ae2574278ec6838bd/src%2Frustbook%2Fbuild.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e5efea4eb3a75db539fd267ae2574278ec6838bd/src%2Frustbook%2Fbuild.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustbook%2Fbuild.rs?ref=e5efea4eb3a75db539fd267ae2574278ec6838bd", "patch": "@@ -183,6 +183,12 @@ impl Subcommand for Build {\n             tgt = PathBuf::from(&env::args().nth(3).unwrap());\n         }\n \n+        // `_book` directory may already exist from previous runs. Check and\n+        // delete it if it exists.\n+        for entry in try!(fs::read_dir(&cwd)) {\n+            let path = try!(entry).path();\n+            if path == tgt { try!(fs::remove_dir_all(&tgt)) }\n+        }\n         try!(fs::create_dir(&tgt));\n \n         try!(File::create(&tgt.join(\"rust-book.css\")).and_then(|mut f| {"}]}