{"sha": "c99a2405ecfe5f38b1a87f0b752cfa611cc304ba", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM5OWEyNDA1ZWNmZTVmMzhiMWE4N2YwYjc1MmNmYTYxMWNjMzA0YmE=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2019-03-08T08:41:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-03-08T08:41:58Z"}, "message": "Rollup merge of #58918 - gilescope:async-await-issue-testcase, r=petrochenkov\n\nRegression test added for an async ICE.\n\nRegression test for #57084 (as suggested in issue).", "tree": {"sha": "f0840a1ae9f0ad954c6e0e6daf1b5144809cba22", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f0840a1ae9f0ad954c6e0e6daf1b5144809cba22"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c99a2405ecfe5f38b1a87f0b752cfa611cc304ba", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJcgirWCRBK7hj4Ov3rIwAAdHIIAGkzZdQmJ67l5ho8vi7VCFQv\nZc/2xTHr+InPSwocrJ5pzYwJifP+h+tbyiI5VLQhJBlMggZWTcOQgWaSxYvESXSx\nWGALiBIeIXohPzf9OXn0OqTMSzHm7pESXMuJeiMLShb1RMXkaNokLNqPlypQoggv\nftjMQnbSuce4Lawiw9wXagamMCwTxqpZ8zgduqU5cAhlyJo2ggpm/EP7H/DpZzzK\nqSZ41SzkzyRHX/TEzdvag6bMp4Q/1H7wCKIH8RcBhi+uIa/cSd1Wgh92Yg/07Y2+\nVM7FNrrCcYTO4xLve3LrNeiBZILmtndmIMoQq58wrBqTgs0SbaKHrLhiuTYzSC0=\n=sdY5\n-----END PGP SIGNATURE-----\n", "payload": "tree f0840a1ae9f0ad954c6e0e6daf1b5144809cba22\nparent d9c6908fb7fd5abd89c22352a6dc4d4250cf6c31\nparent 143e7d57321babc6fe993df370e0b54861443c11\nauthor Pietro Albini <pietro@pietroalbini.org> 1552034518 +0100\ncommitter GitHub <noreply@github.com> 1552034518 +0100\n\nRollup merge of #58918 - gilescope:async-await-issue-testcase, r=petrochenkov\n\nRegression test added for an async ICE.\n\nRegression test for #57084 (as suggested in issue).\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c99a2405ecfe5f38b1a87f0b752cfa611cc304ba", "html_url": "https://github.com/rust-lang/rust/commit/c99a2405ecfe5f38b1a87f0b752cfa611cc304ba", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c99a2405ecfe5f38b1a87f0b752cfa611cc304ba/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d9c6908fb7fd5abd89c22352a6dc4d4250cf6c31", "url": "https://api.github.com/repos/rust-lang/rust/commits/d9c6908fb7fd5abd89c22352a6dc4d4250cf6c31", "html_url": "https://github.com/rust-lang/rust/commit/d9c6908fb7fd5abd89c22352a6dc4d4250cf6c31"}, {"sha": "143e7d57321babc6fe993df370e0b54861443c11", "url": "https://api.github.com/repos/rust-lang/rust/commits/143e7d57321babc6fe993df370e0b54861443c11", "html_url": "https://github.com/rust-lang/rust/commit/143e7d57321babc6fe993df370e0b54861443c11"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "8aaa6a0e427d13395f176ddb746f9229f63a6988", "filename": "src/test/run-pass/generator/issue-57084.rs", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/c99a2405ecfe5f38b1a87f0b752cfa611cc304ba/src%2Ftest%2Frun-pass%2Fgenerator%2Fissue-57084.rs", "raw_url": "https://github.com/rust-lang/rust/raw/c99a2405ecfe5f38b1a87f0b752cfa611cc304ba/src%2Ftest%2Frun-pass%2Fgenerator%2Fissue-57084.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass%2Fgenerator%2Fissue-57084.rs?ref=c99a2405ecfe5f38b1a87f0b752cfa611cc304ba", "patch": "@@ -0,0 +1,28 @@\n+// This issue reproduces an ICE on compile (E.g. fails on 2018-12-19 nightly).\n+// \"cannot relate bound region: ReLateBound(DebruijnIndex(1), BrAnon(1)) <= '_#1r\"\n+// run-pass\n+// edition:2018\n+#![feature(generators,generator_trait)]\n+use std::ops::Generator;\n+\n+fn with<F>(f: F) -> impl Generator<Yield=(), Return=()>\n+where F: Fn() -> ()\n+{\n+    move || {\n+        loop {\n+            match f() {\n+                _ => yield,\n+            }\n+        }\n+    }\n+}\n+\n+fn main() {\n+    let data = &vec![1];\n+    || {\n+        let _to_pin = with(move || println!(\"{:p}\", data));\n+        loop {\n+            yield\n+        }\n+    };\n+}"}]}