{"sha": "1219494f6f1172343e8b08c43229c3ba148a9ffc", "node_id": "MDY6Q29tbWl0NzI0NzEyOjEyMTk0OTRmNmYxMTcyMzQzZThiMDhjNDMyMjljM2JhMTQ4YTlmZmM=", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume1.gomez@gmail.com", "date": "2017-12-21T12:18:21Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2017-12-21T12:18:21Z"}, "message": "Rollup merge of #46861 - GuillaumeGomez:fix-ios-sidebar, r=QuietMisdreavus\n\nFix sidebar on ios\n\nr? @QuietMisdreavus", "tree": {"sha": "38e96cc28f460e08918622e9911acb200bbd63c4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/38e96cc28f460e08918622e9911acb200bbd63c4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1219494f6f1172343e8b08c43229c3ba148a9ffc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1219494f6f1172343e8b08c43229c3ba148a9ffc", "html_url": "https://github.com/rust-lang/rust/commit/1219494f6f1172343e8b08c43229c3ba148a9ffc", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1219494f6f1172343e8b08c43229c3ba148a9ffc/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2770fdfaaaabcd4939899cc53d37d6b568b88995", "url": "https://api.github.com/repos/rust-lang/rust/commits/2770fdfaaaabcd4939899cc53d37d6b568b88995", "html_url": "https://github.com/rust-lang/rust/commit/2770fdfaaaabcd4939899cc53d37d6b568b88995"}, {"sha": "7f5c2f9249710a901e87ff747ba8da5a2be68de6", "url": "https://api.github.com/repos/rust-lang/rust/commits/7f5c2f9249710a901e87ff747ba8da5a2be68de6", "html_url": "https://github.com/rust-lang/rust/commit/7f5c2f9249710a901e87ff747ba8da5a2be68de6"}], "stats": {"total": 60, "additions": 50, "deletions": 10}, "files": [{"sha": "559f8494fc3c0a4d863022f1c14698fbc15e8876", "filename": "src/librustdoc/html/static/main.js", "status": "modified", "additions": 17, "deletions": 9, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/1219494f6f1172343e8b08c43229c3ba148a9ffc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "raw_url": "https://github.com/rust-lang/rust/raw/1219494f6f1172343e8b08c43229c3ba148a9ffc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fmain.js?ref=1219494f6f1172343e8b08c43229c3ba148a9ffc", "patch": "@@ -109,24 +109,32 @@\n     function showSidebar() {\n         var elems = document.getElementsByClassName(\"sidebar-elems\")[0];\n         if (elems) {\n-            elems.style.display = \"block\";\n+            addClass(elems, \"show-it\");\n         }\n         var sidebar = document.getElementsByClassName('sidebar')[0];\n-        sidebar.style.position = 'fixed';\n-        sidebar.style.width = '100%';\n-        sidebar.style.marginLeft = '0';\n+        if (sidebar) {\n+            addClass(sidebar, 'mobile');\n+            var filler = document.getElementById(\"sidebar-filler\");\n+            if (!filler) {\n+                var div = document.createElement(\"div\");\n+                div.id = \"sidebar-filler\";\n+                sidebar.appendChild(div);\n+            }\n+        }\n         document.getElementsByTagName(\"body\")[0].style.marginTop = '45px';\n     }\n \n     function hideSidebar() {\n         var elems = document.getElementsByClassName(\"sidebar-elems\")[0];\n         if (elems) {\n-            elems.style.display = \"\";\n+            removeClass(elems, \"show-it\");\n         }\n         var sidebar = document.getElementsByClassName('sidebar')[0];\n-        sidebar.style.position = '';\n-        sidebar.style.width = '';\n-        sidebar.style.marginLeft = '';\n+        removeClass(sidebar, 'mobile');\n+        var filler = document.getElementById(\"sidebar-filler\");\n+        if (filler) {\n+            filler.remove();\n+        }\n         document.getElementsByTagName(\"body\")[0].style.marginTop = '';\n     }\n \n@@ -1859,7 +1867,7 @@\n     if (sidebar_menu) {\n         sidebar_menu.onclick = function() {\n             var sidebar = document.getElementsByClassName('sidebar')[0];\n-            if (sidebar.style.position === \"fixed\") {\n+            if (hasClass(sidebar, \"mobile\") === true) {\n                 hideSidebar();\n             } else {\n                 showSidebar();"}, {"sha": "b41874a56b8e722e357fb3dc67769f8c9cf3aee4", "filename": "src/librustdoc/html/static/rustdoc.css", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/1219494f6f1172343e8b08c43229c3ba148a9ffc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/1219494f6f1172343e8b08c43229c3ba148a9ffc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Frustdoc.css?ref=1219494f6f1172343e8b08c43229c3ba148a9ffc", "patch": "@@ -1020,6 +1020,33 @@ h4 > .important-traits {\n \t#titles {\n \t\theight: 50px;\n \t}\n+\n+\t.sidebar.mobile {\n+\t\tposition: fixed;\n+\t\twidth: 100%;\n+\t\tmargin-left: 0;\n+\t\tbackground-color: rgba(0,0,0,0);\n+\t\theight: 100%;\n+\t}\n+\n+\t.show-it {\n+\t\tdisplay: block;\n+\t}\n+\n+\t/* Because of ios, we need to actually have a full height sidebar title so the\n+\t * actual sidebar can show up. But then we need to make it transparent so we don't\n+\t * hide content. The filler just allows to create the background for the sidebar\n+\t * title. But because of the absolute position, I had to lower the z-index.\n+\t */\n+\t#sidebar-filler {\n+\t\tposition: fixed;\n+\t\tleft: 45px;\n+\t\twidth: calc(100% - 45px);\n+\t\ttop: 0;\n+\t\theight: 45px;\n+\t\tz-index: -1;\n+\t\tborder-bottom: 1px solid;\n+\t}\n }\n \n "}, {"sha": "c79413c0852cec3de8c876fd2361790c4db10ecd", "filename": "src/librustdoc/html/static/styles/main.css", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/1219494f6f1172343e8b08c43229c3ba148a9ffc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fstyles%2Fmain.css", "raw_url": "https://github.com/rust-lang/rust/raw/1219494f6f1172343e8b08c43229c3ba148a9ffc/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fstyles%2Fmain.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fstyles%2Fmain.css?ref=1219494f6f1172343e8b08c43229c3ba148a9ffc", "patch": "@@ -191,7 +191,7 @@ a.test-arrow {\n \n #help > div {\n \tbackground: #e9e9e9;\n-\tborder-color: #bfbfbf;;\n+\tborder-color: #bfbfbf;\n }\n \n #help dt {\n@@ -342,4 +342,9 @@ pre.ignore:hover, .information:hover + pre.ignore {\n \t\tbackground-color: #F1F1F1;\n \t\tborder-right-color: #000;\n \t}\n+\n+\t#sidebar-filler {\n+\t\tbackground-color: #F1F1F1;\n+\t\tborder-bottom-color: #e0e0e0;\n+\t}\n }"}]}