{"sha": "4f30a24e42137149373311f20525ac52cff44d94", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmMzBhMjRlNDIxMzcxNDkzNzMzMTFmMjA1MjVhYzUyY2ZmNDRkOTQ=", "commit": {"author": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2018-12-05T17:59:48Z"}, "committer": {"name": "John K\u00e5re Alsaker", "email": "john.kare.alsaker@gmail.com", "date": "2018-12-21T11:09:43Z"}, "message": "Inline tweaks", "tree": {"sha": "96000e98815cd296ffeaaa5030af03888474ee78", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/96000e98815cd296ffeaaa5030af03888474ee78"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f30a24e42137149373311f20525ac52cff44d94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f30a24e42137149373311f20525ac52cff44d94", "html_url": "https://github.com/rust-lang/rust/commit/4f30a24e42137149373311f20525ac52cff44d94", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f30a24e42137149373311f20525ac52cff44d94/comments", "author": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Zoxc", "id": 25784, "node_id": "MDQ6VXNlcjI1Nzg0", "avatar_url": "https://avatars.githubusercontent.com/u/25784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Zoxc", "html_url": "https://github.com/Zoxc", "followers_url": "https://api.github.com/users/Zoxc/followers", "following_url": "https://api.github.com/users/Zoxc/following{/other_user}", "gists_url": "https://api.github.com/users/Zoxc/gists{/gist_id}", "starred_url": "https://api.github.com/users/Zoxc/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Zoxc/subscriptions", "organizations_url": "https://api.github.com/users/Zoxc/orgs", "repos_url": "https://api.github.com/users/Zoxc/repos", "events_url": "https://api.github.com/users/Zoxc/events{/privacy}", "received_events_url": "https://api.github.com/users/Zoxc/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d34ec18c7d7e574553f6347ecf08e1e1c45c13d", "url": "https://api.github.com/repos/rust-lang/rust/commits/6d34ec18c7d7e574553f6347ecf08e1e1c45c13d", "html_url": "https://github.com/rust-lang/rust/commit/6d34ec18c7d7e574553f6347ecf08e1e1c45c13d"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "9883752da0b69beec0010d4950752a8b014e689e", "filename": "src/librustc/ty/context.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibrustc%2Fty%2Fcontext.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibrustc%2Fty%2Fcontext.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fcontext.rs?ref=4f30a24e42137149373311f20525ac52cff44d94", "patch": "@@ -1926,13 +1926,15 @@ pub mod tls {\n     /// to `value` during the call to `f`. It is restored to its previous value after.\n     /// This is used to set the pointer to the new ImplicitCtxt.\n     #[cfg(parallel_queries)]\n+    #[inline]\n     fn set_tlv<F: FnOnce() -> R, R>(value: usize, f: F) -> R {\n         rayon_core::tlv::with(value, f)\n     }\n \n     /// Gets Rayon's thread local variable which is preserved for Rayon jobs.\n     /// This is used to get the pointer to the current ImplicitCtxt.\n     #[cfg(parallel_queries)]\n+    #[inline]\n     fn get_tlv() -> usize {\n         rayon_core::tlv::get()\n     }\n@@ -1945,6 +1947,7 @@ pub mod tls {\n     /// It is restored to its previous value after.\n     /// This is used to set the pointer to the new ImplicitCtxt.\n     #[cfg(not(parallel_queries))]\n+    #[inline]\n     fn set_tlv<F: FnOnce() -> R, R>(value: usize, f: F) -> R {\n         let old = get_tlv();\n         let _reset = OnDrop(move || TLV.with(|tlv| tlv.set(old)));\n@@ -2009,6 +2012,7 @@ pub mod tls {\n     }\n \n     /// Sets `context` as the new current ImplicitCtxt for the duration of the function `f`\n+    #[inline]\n     pub fn enter_context<'a, 'gcx: 'tcx, 'tcx, F, R>(context: &ImplicitCtxt<'a, 'gcx, 'tcx>,\n                                                      f: F) -> R\n         where F: FnOnce(&ImplicitCtxt<'a, 'gcx, 'tcx>) -> R\n@@ -2080,6 +2084,7 @@ pub mod tls {\n     }\n \n     /// Allows access to the current ImplicitCtxt in a closure if one is available\n+    #[inline]\n     pub fn with_context_opt<F, R>(f: F) -> R\n         where F: for<'a, 'gcx, 'tcx> FnOnce(Option<&ImplicitCtxt<'a, 'gcx, 'tcx>>) -> R\n     {\n@@ -2097,6 +2102,7 @@ pub mod tls {\n \n     /// Allows access to the current ImplicitCtxt.\n     /// Panics if there is no ImplicitCtxt available\n+    #[inline]\n     pub fn with_context<F, R>(f: F) -> R\n         where F: for<'a, 'gcx, 'tcx> FnOnce(&ImplicitCtxt<'a, 'gcx, 'tcx>) -> R\n     {\n@@ -2108,6 +2114,7 @@ pub mod tls {\n     /// with the same 'gcx lifetime as the TyCtxt passed in.\n     /// This will panic if you pass it a TyCtxt which has a different global interner from\n     /// the current ImplicitCtxt's tcx field.\n+    #[inline]\n     pub fn with_related_context<'a, 'gcx, 'tcx1, F, R>(tcx: TyCtxt<'a, 'gcx, 'tcx1>, f: F) -> R\n         where F: for<'b, 'tcx2> FnOnce(&ImplicitCtxt<'b, 'gcx, 'tcx2>) -> R\n     {\n@@ -2126,6 +2133,7 @@ pub mod tls {\n     /// is given an ImplicitCtxt with the same 'tcx and 'gcx lifetimes as the TyCtxt passed in.\n     /// This will panic if you pass it a TyCtxt which has a different global interner or\n     /// a different local interner from the current ImplicitCtxt's tcx field.\n+    #[inline]\n     pub fn with_fully_related_context<'a, 'gcx, 'tcx, F, R>(tcx: TyCtxt<'a, 'gcx, 'tcx>, f: F) -> R\n         where F: for<'b> FnOnce(&ImplicitCtxt<'b, 'gcx, 'tcx>) -> R\n     {\n@@ -2143,6 +2151,7 @@ pub mod tls {\n \n     /// Allows access to the TyCtxt in the current ImplicitCtxt.\n     /// Panics if there is no ImplicitCtxt available\n+    #[inline]\n     pub fn with<F, R>(f: F) -> R\n         where F: for<'a, 'gcx, 'tcx> FnOnce(TyCtxt<'a, 'gcx, 'tcx>) -> R\n     {\n@@ -2151,6 +2160,7 @@ pub mod tls {\n \n     /// Allows access to the TyCtxt in the current ImplicitCtxt.\n     /// The closure is passed None if there is no ImplicitCtxt available\n+    #[inline]\n     pub fn with_opt<F, R>(f: F) -> R\n         where F: for<'a, 'gcx, 'tcx> FnOnce(Option<TyCtxt<'a, 'gcx, 'tcx>>) -> R\n     {"}, {"sha": "549f0e94d70eaa754982de2cb125da5d5dd64391", "filename": "src/librustc/ty/query/plumbing.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibrustc%2Fty%2Fquery%2Fplumbing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibrustc%2Fty%2Fquery%2Fplumbing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fquery%2Fplumbing.rs?ref=4f30a24e42137149373311f20525ac52cff44d94", "patch": "@@ -171,6 +171,7 @@ impl<'a, 'tcx, Q: QueryDescription<'tcx>> JobOwner<'a, 'tcx, Q> {\n \n     /// Completes the query by updating the query cache with the `result`,\n     /// signals the waiter and forgets the JobOwner, so it won't poison the query\n+    #[inline(always)]\n     pub(super) fn complete(self, result: &Q::Value, dep_node_index: DepNodeIndex) {\n         // We can move out of `self` here because we `mem::forget` it below\n         let key = unsafe { ptr::read(&self.key) };\n@@ -227,6 +228,8 @@ impl<'a, 'tcx, Q: QueryDescription<'tcx>> JobOwner<'a, 'tcx, Q> {\n }\n \n impl<'a, 'tcx, Q: QueryDescription<'tcx>> Drop for JobOwner<'a, 'tcx, Q> {\n+    #[inline(never)]\n+    #[cold]\n     fn drop(&mut self) {\n         // Poison the query so jobs waiting on it panic\n         self.cache.borrow_mut().active.insert(self.key.clone(), QueryResult::Poisoned);"}, {"sha": "9d0201a9e38b11677b478a0c17f3840b50390a61", "filename": "src/librustc_data_structures/lib.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibrustc_data_structures%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibrustc_data_structures%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_data_structures%2Flib.rs?ref=4f30a24e42137149373311f20525ac52cff44d94", "patch": "@@ -113,12 +113,14 @@ pub struct OnDrop<F: Fn()>(pub F);\n impl<F: Fn()> OnDrop<F> {\n       /// Forgets the function which prevents it from running.\n       /// Ensure that the function owns no memory, otherwise it will be leaked.\n+      #[inline]\n       pub fn disable(self) {\n             std::mem::forget(self);\n       }\n }\n \n impl<F: Fn()> Drop for OnDrop<F> {\n+      #[inline]\n       fn drop(&mut self) {\n             (self.0)();\n       }"}, {"sha": "3eb7bc14a927fe64a6fb8f5a4ef93ca9ca875fdb", "filename": "src/libserialize/opaque.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibserialize%2Fopaque.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibserialize%2Fopaque.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Fopaque.rs?ref=4f30a24e42137149373311f20525ac52cff44d94", "patch": "@@ -172,6 +172,7 @@ pub struct Decoder<'a> {\n }\n \n impl<'a> Decoder<'a> {\n+    #[inline]\n     pub fn new(data: &'a [u8], position: usize) -> Decoder<'a> {\n         Decoder {\n             data,"}, {"sha": "7195175db28a6181decfcfce1f2528934d41fc67", "filename": "src/libstd/collections/hash/table.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibstd%2Fcollections%2Fhash%2Ftable.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f30a24e42137149373311f20525ac52cff44d94/src%2Flibstd%2Fcollections%2Fhash%2Ftable.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Fcollections%2Fhash%2Ftable.rs?ref=4f30a24e42137149373311f20525ac52cff44d94", "patch": "@@ -740,6 +740,7 @@ impl<K, V> RawTable<K, V> {\n         }\n     }\n \n+    #[inline]\n     fn new_internal(\n         capacity: usize,\n         fallibility: Fallibility,\n@@ -755,12 +756,14 @@ impl<K, V> RawTable<K, V> {\n \n     /// Tries to create a new raw table from a given capacity. If it cannot allocate,\n     /// it returns with AllocErr.\n+    #[inline]\n     pub fn try_new(capacity: usize) -> Result<RawTable<K, V>, CollectionAllocErr> {\n         Self::new_internal(capacity, Fallible)\n     }\n \n     /// Creates a new raw table from a given capacity. All buckets are\n     /// initially empty.\n+    #[inline]\n     pub fn new(capacity: usize) -> RawTable<K, V> {\n         match Self::new_internal(capacity, Infallible) {\n             Err(CollectionAllocErr::CapacityOverflow) => panic!(\"capacity overflow\"),"}]}