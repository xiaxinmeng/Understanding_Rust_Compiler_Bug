{"sha": "de6d07abf9032f7838580993b46addea81af63d4", "node_id": "MDY6Q29tbWl0NzI0NzEyOmRlNmQwN2FiZjkwMzJmNzgzODU4MDk5M2I0NmFkZGVhODFhZjYzZDQ=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-30T05:29:44Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2011-09-30T06:33:44Z"}, "message": "Register snapshots and finish filesystem reorg", "tree": {"sha": "d72668a273124ac30c6df29a57b05008b1db32c3", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d72668a273124ac30c6df29a57b05008b1db32c3"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/de6d07abf9032f7838580993b46addea81af63d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/de6d07abf9032f7838580993b46addea81af63d4", "html_url": "https://github.com/rust-lang/rust/commit/de6d07abf9032f7838580993b46addea81af63d4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/de6d07abf9032f7838580993b46addea81af63d4/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "80829af8723aa1289a180734915848c1dda38b2d", "url": "https://api.github.com/repos/rust-lang/rust/commits/80829af8723aa1289a180734915848c1dda38b2d", "html_url": "https://github.com/rust-lang/rust/commit/80829af8723aa1289a180734915848c1dda38b2d"}], "stats": {"total": 35, "additions": 6, "deletions": 29}, "files": [{"sha": "76f9ac5aee96a63ab06ff2fb82e3b1ee6c1d3b85", "filename": "mk/stage0.mk", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/de6d07abf9032f7838580993b46addea81af63d4/mk%2Fstage0.mk", "raw_url": "https://github.com/rust-lang/rust/raw/de6d07abf9032f7838580993b46addea81af63d4/mk%2Fstage0.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fstage0.mk?ref=de6d07abf9032f7838580993b46addea81af63d4", "patch": "@@ -1,15 +1,6 @@\n-# FIXME: We're temorarily moving stuff all over the place here to make\n-# the old snapshot compatible with the new build rules\n stage0/bin/rustc$(X): $(S)src/snapshots.txt $(S)src/etc/get-snapshot.py $(MKFILES)\n \t@$(call E, fetch: $@)\n \t$(Q)$(S)src/etc/get-snapshot.py\n-\t$(Q)cp stage0/rustc$(X) stage0/bin/rustc$(X)\n-\t$(Q)cp stage0/$(CFG_RUNTIME) stage0/lib/$(CFG_RUNTIME)\n-\t$(Q)cp stage0/$(CFG_RUSTLLVM) stage0/lib/$(CFG_RUSTLLVM)\n-\t$(Q)mkdir -p stage0/bin/lib\n-\t$(Q)cp stage0/lib/intrinsics.bc stage0/bin/lib/intrinsics.bc\n-\t$(Q)cp stage0/lib/glue.o stage0/bin/lib/glue.o\n-\t$(Q)cp stage0/lib/main.o stage0/bin/lib/main.o\n \t$(Q)touch $@\n \n # Host libs will be made in the process of making rustc above."}, {"sha": "9ed9fa83653ff2050090cf91000ce9e21654280d", "filename": "mk/stageN.mk", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/de6d07abf9032f7838580993b46addea81af63d4/mk%2FstageN.mk", "raw_url": "https://github.com/rust-lang/rust/raw/de6d07abf9032f7838580993b46addea81af63d4/mk%2FstageN.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2FstageN.mk?ref=de6d07abf9032f7838580993b46addea81af63d4", "patch": "@@ -27,13 +27,10 @@ stage$(2)/lib/%.o: stage$(2)/lib/%.s\n \t@$$(call E, assemble [gcc]: $$@)\n \t$$(Q)gcc $$(CFG_GCCISH_CFLAGS) -o $$@ -c $$<\n \n-# FIXME: the bin/lib/libstd.so dep is transitional\n-\n stage$(2)/bin/rustc$$(X): $$(COMPILER_CRATE) $$(COMPILER_INPUTS)          \\\n                           stage$(2)/lib/$$(CFG_RUNTIME)                       \\\n                           $$(call CFG_STDLIB_DEFAULT,stage$(1),stage$(2)) \\\n                           stage$(2)/lib/$$(CFG_RUSTLLVM)                      \\\n-                          stage$(1)/bin/lib/$$(CFG_STDLIB) \\\n                           $$(SREQ$(1)$(3))\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(1)) -L stage$(2)/lib -o $$@ $$<\n@@ -97,12 +94,6 @@ stage$(2)/lib/rustc/$(3)/libstd.rlib: \\\n \t@$$(call E, compile_and_link: $$@)\n \t$$(STAGE$(2)) --lib --static -o $$@ $$<\n \n-# FIXME: Transitional so that stage0 can find std when building stage1/rustc\n-stage$(2)/bin/lib/$$(CFG_STDLIB): stage$(2)/lib/rustc/$(3)/$$(CFG_STDLIB)\n-\t@$$(call E, cp: $$@)\n-\t$$(Q)mkdir -p stage$(2)/bin/lib\n-\t$$(Q)cp $$< $$@\n-\n stage$(2)/lib/rustc/$(3)/$$(CFG_RUNTIME): rt/$$(CFG_RUNTIME)\n \t@$$(call E, cp: $$@)\n \t$$(Q)cp $$< $$@"}, {"sha": "98e480defda1d1e91f56395461e25b64d0cc674a", "filename": "src/etc/get-snapshot.py", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/de6d07abf9032f7838580993b46addea81af63d4/src%2Fetc%2Fget-snapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/de6d07abf9032f7838580993b46addea81af63d4/src%2Fetc%2Fget-snapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fget-snapshot.py?ref=de6d07abf9032f7838580993b46addea81af63d4", "patch": "@@ -9,7 +9,7 @@ def unpack_snapshot(snap):\n   print(\"opening snapshot \" + dl_path)\n   tar = tarfile.open(dl_path)\n   kernel = get_kernel()\n-  for name in old_snapshot_files[kernel]:\n+  for name in snapshot_files[kernel]:\n     p = \"rust-stage0/\" + name\n     fp = os.path.join(\"stage0\", name)\n     print(\"extracting \" + fp)"}, {"sha": "689e798e778e5802bb4ae4a30ca5e2f69ee6e792", "filename": "src/etc/snapshot.py", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/de6d07abf9032f7838580993b46addea81af63d4/src%2Fetc%2Fsnapshot.py", "raw_url": "https://github.com/rust-lang/rust/raw/de6d07abf9032f7838580993b46addea81af63d4/src%2Fetc%2Fsnapshot.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fetc%2Fsnapshot.py?ref=de6d07abf9032f7838580993b46addea81af63d4", "patch": "@@ -15,16 +15,6 @@ def scrub(b):\n download_dir_base = \"dl\"\n download_unpack_base = os.path.join(download_dir_base, \"unpack\")\n \n-# FIXME: Transitional\n-old_snapshot_files = {\n-    \"linux\": [\"rustc\", \"lib/glue.o\", \"lib/libstd.so\", \"lib/main.o\",\n-              \"librustrt.so\", \"librustllvm.so\", \"lib/intrinsics.bc\"],\n-    \"macos\": [\"rustc\", \"lib/glue.o\", \"lib/libstd.dylib\", \"lib/main.o\",\n-              \"librustrt.dylib\", \"librustllvm.dylib\", \"lib/intrinsics.bc\"],\n-    \"winnt\": [\"rustc.exe\", \"lib/glue.o\", \"lib/std.dll\", \"lib/main.o\",\n-              \"rustrt.dll\", \"rustllvm.dll\", \"lib/intrinsics.bc\"]\n-    }\n-\n snapshot_files = {\n     \"linux\": [\"bin/rustc\", \"lib/libstd.so\",\n               \"lib/librustrt.so\", \"lib/librustllvm.so\"],"}, {"sha": "e981d72e18002ccb3637d3088c54407666ca8252", "filename": "src/snapshots.txt", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/de6d07abf9032f7838580993b46addea81af63d4/src%2Fsnapshots.txt", "raw_url": "https://github.com/rust-lang/rust/raw/de6d07abf9032f7838580993b46addea81af63d4/src%2Fsnapshots.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fsnapshots.txt?ref=de6d07abf9032f7838580993b46addea81af63d4", "patch": "@@ -1,3 +1,8 @@\n+S 2011-09-29 80829af\n+  linux-i386 0bf17c8bfdf7e3400cd546577d4f57b7be821441\n+  macos-i386 9b40e0c830396469811e9e6e0b430d0d51876a27\n+  winnt-i386 735b189037ab45d88f937cbe391c4e30aaf1182b\n+\n S 2011-09-28 a3a2737\n   linux-i386 d255b2ec7205209b7d7fe71be84def6306491387\n   macos-i386 1ff3b71ccfc7e404c813b68a7a257406f292b819"}]}