{"sha": "99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk5YmQ5MjY1ZDk4Yjc0MjgzZWUyZmE3ZmE0NTc4MmU4M2U1YmI3OWM=", "commit": {"author": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2014-07-17T04:50:54Z"}, "committer": {"name": "Seo Sanghyeon", "email": "sanxiyn@gmail.com", "date": "2014-07-17T04:50:54Z"}, "message": "Disallow importing from types when reexport is involved", "tree": {"sha": "f60b4513e090af2b8c119f7c7aeff3107e1f8a31", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f60b4513e090af2b8c119f7c7aeff3107e1f8a31"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "comment_count": 5, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "html_url": "https://github.com/rust-lang/rust/commit/99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/comments", "author": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sanxiyn", "id": 45249, "node_id": "MDQ6VXNlcjQ1MjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/45249?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sanxiyn", "html_url": "https://github.com/sanxiyn", "followers_url": "https://api.github.com/users/sanxiyn/followers", "following_url": "https://api.github.com/users/sanxiyn/following{/other_user}", "gists_url": "https://api.github.com/users/sanxiyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/sanxiyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sanxiyn/subscriptions", "organizations_url": "https://api.github.com/users/sanxiyn/orgs", "repos_url": "https://api.github.com/users/sanxiyn/repos", "events_url": "https://api.github.com/users/sanxiyn/events{/privacy}", "received_events_url": "https://api.github.com/users/sanxiyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "058242141b54bf9e9b82caf02a39c4b9083023c1", "url": "https://api.github.com/repos/rust-lang/rust/commits/058242141b54bf9e9b82caf02a39c4b9083023c1", "html_url": "https://github.com/rust-lang/rust/commit/058242141b54bf9e9b82caf02a39c4b9083023c1"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "d7c649aa24c6b3b2f92fc0ed2273c6aa4726b50c", "filename": "src/librustc/middle/resolve.rs", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/src%2Flibrustc%2Fmiddle%2Fresolve.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fmiddle%2Fresolve.rs?ref=99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "patch": "@@ -1599,6 +1599,12 @@ impl<'a> Resolver<'a> {\n         if is_exported {\n             self.external_exports.insert(def.def_id());\n         }\n+\n+        let kind = match def {\n+            DefStruct(..) | DefTy(..) => ImplModuleKind,\n+            _ => NormalModuleKind\n+        };\n+\n         match def {\n           DefMod(def_id) | DefForeignMod(def_id) | DefStruct(def_id) |\n           DefTy(def_id) => {\n@@ -1617,7 +1623,7 @@ impl<'a> Resolver<'a> {\n \n                 child_name_bindings.define_module(parent_link,\n                                                   Some(def_id),\n-                                                  NormalModuleKind,\n+                                                  kind,\n                                                   true,\n                                                   is_public,\n                                                   DUMMY_SP);"}, {"sha": "8c547c2800204e357b8b523523360b11ff796c7d", "filename": "src/test/auxiliary/use_from_trait_xc.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/src%2Ftest%2Fauxiliary%2Fuse_from_trait_xc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/src%2Ftest%2Fauxiliary%2Fuse_from_trait_xc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fauxiliary%2Fuse_from_trait_xc.rs?ref=99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "patch": "@@ -8,6 +8,8 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n+pub use self::sub::Bar;\n+\n pub trait Trait {\n     fn foo();\n }\n@@ -17,3 +19,11 @@ struct Foo;\n impl Foo {\n     pub fn new() {}\n }\n+\n+mod sub {\n+    pub struct Bar;\n+\n+    impl Bar {\n+        pub fn new() {}\n+    }\n+}"}, {"sha": "cea85955d37955a01c474e4f666dbc8ac8e6e1aa", "filename": "src/test/compile-fail/use-from-trait-xc.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/src%2Ftest%2Fcompile-fail%2Fuse-from-trait-xc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/99bd9265d98b74283ee2fa7fa45782e83e5bb79c/src%2Ftest%2Fcompile-fail%2Fuse-from-trait-xc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fuse-from-trait-xc.rs?ref=99bd9265d98b74283ee2fa7fa45782e83e5bb79c", "patch": "@@ -18,4 +18,7 @@ use use_from_trait_xc::Trait::foo;\n use use_from_trait_xc::Foo::new;\n //~^ ERROR unresolved import `use_from_trait_xc::Foo::new`. Cannot import from a trait or type imple\n \n+use use_from_trait_xc::Bar::new;\n+//~^ ERROR unresolved import `use_from_trait_xc::Bar::new`. Cannot import from a trait or type\n+\n fn main() {}"}]}