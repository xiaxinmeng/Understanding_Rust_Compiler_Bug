{"sha": "0b2837dc07f88577bee8a6c614d9971ed2aa46b1", "node_id": "C_kwDOAAsO6NoAKDBiMjgzN2RjMDdmODg1NzdiZWU4YTZjNjE0ZDk5NzFlZDJhYTQ2YjE", "commit": {"author": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-19T14:34:37Z"}, "committer": {"name": "Camille GILLOT", "email": "gillot.camille@gmail.com", "date": "2022-06-22T17:16:17Z"}, "message": "Simplify match.", "tree": {"sha": "e70477f71899a715f315b79d134ea6fd932df17e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e70477f71899a715f315b79d134ea6fd932df17e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0b2837dc07f88577bee8a6c614d9971ed2aa46b1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0b2837dc07f88577bee8a6c614d9971ed2aa46b1", "html_url": "https://github.com/rust-lang/rust/commit/0b2837dc07f88577bee8a6c614d9971ed2aa46b1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0b2837dc07f88577bee8a6c614d9971ed2aa46b1/comments", "author": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cjgillot", "id": 1822483, "node_id": "MDQ6VXNlcjE4MjI0ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/1822483?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cjgillot", "html_url": "https://github.com/cjgillot", "followers_url": "https://api.github.com/users/cjgillot/followers", "following_url": "https://api.github.com/users/cjgillot/following{/other_user}", "gists_url": "https://api.github.com/users/cjgillot/gists{/gist_id}", "starred_url": "https://api.github.com/users/cjgillot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cjgillot/subscriptions", "organizations_url": "https://api.github.com/users/cjgillot/orgs", "repos_url": "https://api.github.com/users/cjgillot/repos", "events_url": "https://api.github.com/users/cjgillot/events{/privacy}", "received_events_url": "https://api.github.com/users/cjgillot/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8276dac08183e374d27b2c3165d10b9dfcde09b3", "url": "https://api.github.com/repos/rust-lang/rust/commits/8276dac08183e374d27b2c3165d10b9dfcde09b3", "html_url": "https://github.com/rust-lang/rust/commit/8276dac08183e374d27b2c3165d10b9dfcde09b3"}], "stats": {"total": 8, "additions": 3, "deletions": 5}, "files": [{"sha": "1f73a1d90fdbe514add2259472990061badb41e7", "filename": "compiler/rustc_passes/src/dead.rs", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/0b2837dc07f88577bee8a6c614d9971ed2aa46b1/compiler%2Frustc_passes%2Fsrc%2Fdead.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0b2837dc07f88577bee8a6c614d9971ed2aa46b1/compiler%2Frustc_passes%2Fsrc%2Fdead.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fdead.rs?ref=0b2837dc07f88577bee8a6c614d9971ed2aa46b1", "patch": "@@ -82,8 +82,8 @@ impl<'tcx> MarkSymbolVisitor<'tcx> {\n \n     fn handle_res(&mut self, res: Res) {\n         match res {\n-            Res::Def(DefKind::Const | DefKind::AssocConst | DefKind::TyAlias, _) => {\n-                self.check_def_id(res.def_id());\n+            Res::Def(DefKind::Const | DefKind::AssocConst | DefKind::TyAlias, def_id) => {\n+                self.check_def_id(def_id);\n             }\n             _ if self.in_pat => {}\n             Res::PrimTy(..) | Res::SelfCtor(..) | Res::Local(..) => {}\n@@ -102,6 +102,7 @@ impl<'tcx> MarkSymbolVisitor<'tcx> {\n                     self.check_def_id(variant_id);\n                 }\n             }\n+            Res::Def(_, def_id) => self.check_def_id(def_id),\n             Res::SelfTy { trait_: t, alias_to: i } => {\n                 if let Some(t) = t {\n                     self.check_def_id(t);\n@@ -111,9 +112,6 @@ impl<'tcx> MarkSymbolVisitor<'tcx> {\n                 }\n             }\n             Res::ToolMod | Res::NonMacroAttr(..) | Res::Err => {}\n-            _ => {\n-                self.check_def_id(res.def_id());\n-            }\n         }\n     }\n "}]}