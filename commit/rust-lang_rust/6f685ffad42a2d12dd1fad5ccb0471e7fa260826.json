{"sha": "6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "node_id": "MDY6Q29tbWl0NzI0NzEyOjZmNjg1ZmZhZDQyYTJkMTJkZDFmYWQ1Y2NiMDQ3MWU3ZmEyNjA4MjY=", "commit": {"author": {"name": "kenta7777", "email": "k.hasegw7@gmail.com", "date": "2018-09-10T01:45:16Z"}, "committer": {"name": "kenta7777", "email": "k.hasegw7@gmail.com", "date": "2018-09-10T01:45:16Z"}, "message": "renamed is_nil to is_unit", "tree": {"sha": "9901db781de8c70dd7d64d146599712e2e7a1e2b", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9901db781de8c70dd7d64d146599712e2e7a1e2b"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "html_url": "https://github.com/rust-lang/rust/commit/6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/comments", "author": {"login": "kenta7777", "id": 16369171, "node_id": "MDQ6VXNlcjE2MzY5MTcx", "avatar_url": "https://avatars.githubusercontent.com/u/16369171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kenta7777", "html_url": "https://github.com/kenta7777", "followers_url": "https://api.github.com/users/kenta7777/followers", "following_url": "https://api.github.com/users/kenta7777/following{/other_user}", "gists_url": "https://api.github.com/users/kenta7777/gists{/gist_id}", "starred_url": "https://api.github.com/users/kenta7777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kenta7777/subscriptions", "organizations_url": "https://api.github.com/users/kenta7777/orgs", "repos_url": "https://api.github.com/users/kenta7777/repos", "events_url": "https://api.github.com/users/kenta7777/events{/privacy}", "received_events_url": "https://api.github.com/users/kenta7777/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kenta7777", "id": 16369171, "node_id": "MDQ6VXNlcjE2MzY5MTcx", "avatar_url": "https://avatars.githubusercontent.com/u/16369171?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kenta7777", "html_url": "https://github.com/kenta7777", "followers_url": "https://api.github.com/users/kenta7777/followers", "following_url": "https://api.github.com/users/kenta7777/following{/other_user}", "gists_url": "https://api.github.com/users/kenta7777/gists{/gist_id}", "starred_url": "https://api.github.com/users/kenta7777/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kenta7777/subscriptions", "organizations_url": "https://api.github.com/users/kenta7777/orgs", "repos_url": "https://api.github.com/users/kenta7777/repos", "events_url": "https://api.github.com/users/kenta7777/events{/privacy}", "received_events_url": "https://api.github.com/users/kenta7777/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "37d0600c23ba1890346078bd7f310e15915417b2", "url": "https://api.github.com/repos/rust-lang/rust/commits/37d0600c23ba1890346078bd7f310e15915417b2", "html_url": "https://github.com/rust-lang/rust/commit/37d0600c23ba1890346078bd7f310e15915417b2"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "ea547c592d048a2bf98dfeeae7301ea7c4202b59", "filename": "src/librustc/ty/sty.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc%2Fty%2Fsty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc%2Fty%2Fsty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fsty.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -1458,7 +1458,7 @@ impl RegionKind {\n \n /// Type utilities\n impl<'a, 'gcx, 'tcx> TyS<'tcx> {\n-    pub fn is_nil(&self) -> bool {\n+    pub fn is_unit(&self) -> bool {\n         match self.sty {\n             Tuple(ref tys) => tys.is_empty(),\n             _ => false,"}, {"sha": "3d7117dd46a21146529f94164e6db9e864066afd", "filename": "src/librustc/util/ppaux.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc%2Futil%2Fppaux.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc%2Futil%2Fppaux.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Futil%2Fppaux.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -234,7 +234,7 @@ impl PrintContext {\n             }\n         }\n         write!(f, \")\")?;\n-        if !output.is_nil() {\n+        if !output.is_unit() {\n             print!(f, self, write(\" -> \"), print_display(output))?;\n         }\n "}, {"sha": "f9eb80a1988af469263c9df86cef856d7dd88ed6", "filename": "src/librustc_codegen_llvm/debuginfo/type_names.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_codegen_llvm%2Fdebuginfo%2Ftype_names.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_codegen_llvm%2Fdebuginfo%2Ftype_names.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fdebuginfo%2Ftype_names.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -160,7 +160,7 @@ pub fn push_debuginfo_type_name<'a, 'tcx>(cx: &CodegenCx<'a, 'tcx>,\n \n             output.push(')');\n \n-            if !sig.output().is_nil() {\n+            if !sig.output().is_unit() {\n                 output.push_str(\" -> \");\n                 push_debuginfo_type_name(cx, sig.output(), true, output);\n             }"}, {"sha": "c3ec347f60876c03dc846bbec04f75f546b8d75d", "filename": "src/librustc_codegen_llvm/mir/rvalue.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_codegen_llvm%2Fmir%2Frvalue.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_codegen_llvm%2Fmir%2Frvalue.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fmir%2Frvalue.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -566,7 +566,7 @@ impl FunctionCx<'a, 'll, 'tcx> {\n     ) -> &'ll Value {\n         let is_float = input_ty.is_fp();\n         let is_signed = input_ty.is_signed();\n-        let is_nil = input_ty.is_nil();\n+        let is_unit = input_ty.is_unit();\n         match op {\n             mir::BinOp::Add => if is_float {\n                 bx.fadd(lhs, rhs)\n@@ -604,7 +604,7 @@ impl FunctionCx<'a, 'll, 'tcx> {\n             mir::BinOp::Shl => common::build_unchecked_lshift(bx, lhs, rhs),\n             mir::BinOp::Shr => common::build_unchecked_rshift(bx, input_ty, lhs, rhs),\n             mir::BinOp::Ne | mir::BinOp::Lt | mir::BinOp::Gt |\n-            mir::BinOp::Eq | mir::BinOp::Le | mir::BinOp::Ge => if is_nil {\n+            mir::BinOp::Eq | mir::BinOp::Le | mir::BinOp::Ge => if is_unit {\n                 C_bool(bx.cx, match op {\n                     mir::BinOp::Ne | mir::BinOp::Lt | mir::BinOp::Gt => false,\n                     mir::BinOp::Eq | mir::BinOp::Le | mir::BinOp::Ge => true,"}, {"sha": "2bec9203e9ee5ff7021c1cd0830f83dd1d7fbba3", "filename": "src/librustc_lint/types.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_lint%2Ftypes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_lint%2Ftypes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Ftypes.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -691,7 +691,7 @@ impl<'a, 'tcx> ImproperCTypesVisitor<'a, 'tcx> {\n                 }\n \n                 let sig = cx.erase_late_bound_regions(&sig);\n-                if !sig.output().is_nil() {\n+                if !sig.output().is_unit() {\n                     let r = self.check_type_for_ffi(cache, sig.output());\n                     match r {\n                         FfiSafe => {}\n@@ -767,7 +767,7 @@ impl<'a, 'tcx> ImproperCTypesVisitor<'a, 'tcx> {\n \n         if let hir::Return(ref ret_hir) = decl.output {\n             let ret_ty = sig.output();\n-            if !ret_ty.is_nil() {\n+            if !ret_ty.is_unit() {\n                 self.check_type_for_ffi_and_report_errors(ret_hir.span, ret_ty);\n             }\n         }"}, {"sha": "50d4944d7c2420082a5afda87e27ceba7d808b1e", "filename": "src/librustc_mir/build/block.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_mir%2Fbuild%2Fblock.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_mir%2Fbuild%2Fblock.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fblock.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -177,7 +177,7 @@ impl<'a, 'gcx, 'tcx> Builder<'a, 'gcx, 'tcx> {\n             // the case of `!`, no return value is required, as the block will never return.\n             let tcx = this.hir.tcx();\n             let ty = destination.ty(&this.local_decls, tcx).to_ty(tcx);\n-            if ty.is_nil() {\n+            if ty.is_unit() {\n                 // We only want to assign an implicit `()` as the return value of the block if the\n                 // block does not diverge. (Otherwise, we may try to assign a unit to a `!`-type.)\n                 this.cfg.push_assign_unit(block, source_info, destination);"}, {"sha": "3f5a05f9d0ed8381d0540cb1d84ca157e1344ac7", "filename": "src/librustc_mir/monomorphize/item.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_mir%2Fmonomorphize%2Fitem.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_mir%2Fmonomorphize%2Fitem.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fmonomorphize%2Fitem.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -368,7 +368,7 @@ impl<'a, 'tcx> DefPathBasedNames<'a, 'tcx> {\n \n                 output.push(')');\n \n-                if !sig.output().is_nil() {\n+                if !sig.output().is_unit() {\n                     output.push_str(\" -> \");\n                     self.push_type_name(sig.output(), output);\n                 }"}, {"sha": "a712bce2a4c4bd2b6866865755766c559d62bcdd", "filename": "src/librustc_typeck/check/_match.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_typeck%2Fcheck%2F_match.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_typeck%2Fcheck%2F_match.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2F_match.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -677,14 +677,14 @@ https://doc.rust-lang.org/reference/types.html#trait-objects\");\n             // Handle the fallback arm of a desugared if-let like a missing else.\n             let is_if_let_fallback = match match_src {\n                 hir::MatchSource::IfLetDesugar { contains_else_clause: false } => {\n-                    i == arms.len() - 1 && arm_ty.is_nil()\n+                    i == arms.len() - 1 && arm_ty.is_unit()\n                 }\n                 _ => false\n             };\n \n             if is_if_let_fallback {\n                 let cause = self.cause(expr.span, ObligationCauseCode::IfExpressionWithNoElse);\n-                assert!(arm_ty.is_nil());\n+                assert!(arm_ty.is_unit());\n                 coercion.coerce_forced_unit(self, &cause, &mut |_| (), true);\n             } else {\n                 let cause = self.cause(expr.span, ObligationCauseCode::MatchExpressionArm {"}, {"sha": "4b09e91bdd75f02b4b483e85e8010f569b66e183", "filename": "src/librustc_typeck/check/coercion.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_typeck%2Fcheck%2Fcoercion.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_typeck%2Fcheck%2Fcoercion.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fcoercion.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -1146,8 +1146,8 @@ impl<'gcx, 'tcx, 'exprs, E> CoerceMany<'gcx, 'tcx, 'exprs, E>\n             // `expression_ty` will be unit).\n             //\n             // Another example is `break` with no argument expression.\n-            assert!(expression_ty.is_nil());\n-            assert!(expression_ty.is_nil(), \"if let hack without unit type\");\n+            assert!(expression_ty.is_unit());\n+            assert!(expression_ty.is_unit(), \"if let hack without unit type\");\n             fcx.at(cause, fcx.param_env)\n                .eq_exp(label_expression_as_expected, expression_ty, self.merged_ty())\n                .map(|infer_ok| {"}, {"sha": "9638b6ca6ab2df227053effbb44ed6dec3e128b0", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/6f685ffad42a2d12dd1fad5ccb0471e7fa260826/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=6f685ffad42a2d12dd1fad5ccb0471e7fa260826", "patch": "@@ -2808,9 +2808,9 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n         } else {\n             // is the missing argument of type `()`?\n             let sugg_unit = if expected_arg_tys.len() == 1 && supplied_arg_count == 0 {\n-                self.resolve_type_vars_if_possible(&expected_arg_tys[0]).is_nil()\n+                self.resolve_type_vars_if_possible(&expected_arg_tys[0]).is_unit()\n             } else if fn_inputs.len() == 1 && supplied_arg_count == 0 {\n-                self.resolve_type_vars_if_possible(&fn_inputs[0]).is_nil()\n+                self.resolve_type_vars_if_possible(&fn_inputs[0]).is_unit()\n             } else {\n                 false\n             };\n@@ -3958,7 +3958,7 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n                         if let Some(ref e) = *expr_opt {\n                             coerce.coerce(self, &cause, e, e_ty);\n                         } else {\n-                            assert!(e_ty.is_nil());\n+                            assert!(e_ty.is_unit());\n                             coerce.coerce_forced_unit(self, &cause, &mut |_| (), true);\n                         }\n                     } else {\n@@ -4752,7 +4752,7 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n                                  expression: &'gcx hir::Expr,\n                                  expected: Ty<'tcx>,\n                                  cause_span: Span) {\n-        if expected.is_nil() {\n+        if expected.is_unit() {\n             // `BlockTailExpression` only relevant if the tail expr would be\n             // useful on its own.\n             match expression.node {\n@@ -4795,7 +4795,7 @@ impl<'a, 'gcx, 'tcx> FnCtxt<'a, 'gcx, 'tcx> {\n                                    can_suggest: bool) {\n         // Only suggest changing the return type for methods that\n         // haven't set a return type at all (and aren't `fn main()` or an impl).\n-        match (&fn_decl.output, found.is_suggestable(), can_suggest, expected.is_nil()) {\n+        match (&fn_decl.output, found.is_suggestable(), can_suggest, expected.is_unit()) {\n             (&hir::FunctionRetTy::DefaultReturn(span), true, true, true) => {\n                 err.span_suggestion_with_applicability(\n                     span,"}]}