{"sha": "d8540ae5a98b6135253521cdbf34c5953494a5bf", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4NTQwYWU1YTk4YjYxMzUyNTM1MjFjZGJmMzRjNTk1MzQ5NGE1YmY=", "commit": {"author": {"name": "Reese Williams", "email": "reese@reesew.io", "date": "2021-02-20T20:33:08Z"}, "committer": {"name": "Reese Williams", "email": "reese@reesew.io", "date": "2021-02-20T20:33:08Z"}, "message": "Fix suggestion span and move suggestions into new subwindow.", "tree": {"sha": "b2ee271d9bab0b522ea775d05de8bd7acd6a8955", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b2ee271d9bab0b522ea775d05de8bd7acd6a8955"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8540ae5a98b6135253521cdbf34c5953494a5bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8540ae5a98b6135253521cdbf34c5953494a5bf", "html_url": "https://github.com/rust-lang/rust/commit/d8540ae5a98b6135253521cdbf34c5953494a5bf", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8540ae5a98b6135253521cdbf34c5953494a5bf/comments", "author": {"login": "reese", "id": 26661872, "node_id": "MDQ6VXNlcjI2NjYxODcy", "avatar_url": "https://avatars.githubusercontent.com/u/26661872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reese", "html_url": "https://github.com/reese", "followers_url": "https://api.github.com/users/reese/followers", "following_url": "https://api.github.com/users/reese/following{/other_user}", "gists_url": "https://api.github.com/users/reese/gists{/gist_id}", "starred_url": "https://api.github.com/users/reese/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reese/subscriptions", "organizations_url": "https://api.github.com/users/reese/orgs", "repos_url": "https://api.github.com/users/reese/repos", "events_url": "https://api.github.com/users/reese/events{/privacy}", "received_events_url": "https://api.github.com/users/reese/received_events", "type": "User", "site_admin": false}, "committer": {"login": "reese", "id": 26661872, "node_id": "MDQ6VXNlcjI2NjYxODcy", "avatar_url": "https://avatars.githubusercontent.com/u/26661872?v=4", "gravatar_id": "", "url": "https://api.github.com/users/reese", "html_url": "https://github.com/reese", "followers_url": "https://api.github.com/users/reese/followers", "following_url": "https://api.github.com/users/reese/following{/other_user}", "gists_url": "https://api.github.com/users/reese/gists{/gist_id}", "starred_url": "https://api.github.com/users/reese/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/reese/subscriptions", "organizations_url": "https://api.github.com/users/reese/orgs", "repos_url": "https://api.github.com/users/reese/repos", "events_url": "https://api.github.com/users/reese/events{/privacy}", "received_events_url": "https://api.github.com/users/reese/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7879099ad3ef6c84d8df96521c30b7bf4c573615", "url": "https://api.github.com/repos/rust-lang/rust/commits/7879099ad3ef6c84d8df96521c30b7bf4c573615", "html_url": "https://github.com/rust-lang/rust/commit/7879099ad3ef6c84d8df96521c30b7bf4c573615"}], "stats": {"total": 62, "additions": 40, "deletions": 22}, "files": [{"sha": "c21e7d8aebc5571a0411192ee5612cf600cb02ae", "filename": "compiler/rustc_typeck/src/check/pat.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d8540ae5a98b6135253521cdbf34c5953494a5bf/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8540ae5a98b6135253521cdbf34c5953494a5bf/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_typeck%2Fsrc%2Fcheck%2Fpat.rs?ref=d8540ae5a98b6135253521cdbf34c5953494a5bf", "patch": "@@ -1256,8 +1256,8 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     \"tuple variant `{}` written as struct variant\",\n                     path\n                 );\n-                err.span_suggestion(\n-                    qpath.span().shrink_to_hi().until(pat.span),\n+                err.span_suggestion_verbose(\n+                    qpath.span().shrink_to_hi().to(pat.span.shrink_to_hi()),\n                     \"use the tuple variant pattern syntax instead\",\n                     format!(\"({})\", self.get_suggested_tuple_struct_pattern(fields, variant)),\n                     Applicability::MaybeIncorrect,\n@@ -1416,8 +1416,8 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n                     Applicability::MaybeIncorrect,\n                 )\n             };\n-            err.span_suggestion(\n-                qpath.span().shrink_to_hi().until(pat.span),\n+            err.span_suggestion_verbose(\n+                qpath.span().shrink_to_hi().to(pat.span.shrink_to_hi()),\n                 \"use the tuple variant pattern syntax instead\",\n                 format!(\"({})\", sugg),\n                 appl,"}, {"sha": "7df86d7326bc6e073174039742b091800a8f0078", "filename": "src/test/ui/issues/issue-17800.stderr", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fissues%2Fissue-17800.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fissues%2Fissue-17800.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fissues%2Fissue-17800.stderr?ref=d8540ae5a98b6135253521cdbf34c5953494a5bf", "patch": "@@ -2,9 +2,12 @@ error[E0769]: tuple variant `MyOption::MySome` written as struct variant\n   --> $DIR/issue-17800.rs:8:9\n    |\n LL |         MyOption::MySome { x: 42 } => (),\n-   |         ----------------^^^^^^^^^^\n-   |         |\n-   |         help: use the tuple variant pattern syntax instead: `(42)`\n+   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |         MyOption::MySome(42) => (),\n+   |                         ^^^^\n \n error: aborting due to previous error\n "}, {"sha": "a95b5bb94d24a7c020d01529a40227ff5f054a14", "filename": "src/test/ui/missing/missing-fields-in-struct-pattern.stderr", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fmissing%2Fmissing-fields-in-struct-pattern.stderr?ref=d8540ae5a98b6135253521cdbf34c5953494a5bf", "patch": "@@ -2,9 +2,12 @@ error[E0769]: tuple variant `S` written as struct variant\n   --> $DIR/missing-fields-in-struct-pattern.rs:4:12\n    |\n LL |     if let S { a, b, c, d } = S(1, 2, 3, 4) {\n-   |            -^^^^^^^^^^^^^^^\n-   |            |\n-   |            help: use the tuple variant pattern syntax instead: `(a, b, c, d)`\n+   |            ^^^^^^^^^^^^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |     if let S(a, b, c, d) = S(1, 2, 3, 4) {\n+   |             ^^^^^^^^^^^^\n \n error: aborting due to previous error\n "}, {"sha": "9b9d2bc4972b4c414d581974728b943cd8de489f", "filename": "src/test/ui/parser/recover-from-bad-variant.stderr", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fparser%2Frecover-from-bad-variant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fparser%2Frecover-from-bad-variant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Frecover-from-bad-variant.stderr?ref=d8540ae5a98b6135253521cdbf34c5953494a5bf", "patch": "@@ -22,9 +22,12 @@ error[E0769]: tuple variant `Enum::Bar` written as struct variant\n   --> $DIR/recover-from-bad-variant.rs:12:9\n    |\n LL |         Enum::Bar { a, b } => {}\n-   |         ---------^^^^^^^^^\n-   |         |\n-   |         help: use the tuple variant pattern syntax instead: `(a, b)`\n+   |         ^^^^^^^^^^^^^^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |         Enum::Bar(a, b) => {}\n+   |                  ^^^^^^\n \n error: aborting due to 3 previous errors\n "}, {"sha": "29e721465215d432bb8538a5db4ee2c162f0b4e3", "filename": "src/test/ui/structs/struct-tuple-field-names.stderr", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstructs%2Fstruct-tuple-field-names.stderr?ref=d8540ae5a98b6135253521cdbf34c5953494a5bf", "patch": "@@ -2,17 +2,23 @@ error[E0769]: tuple variant `E::S` written as struct variant\n   --> $DIR/struct-tuple-field-names.rs:8:9\n    |\n LL |         E::S { 0, 1 } => {}\n-   |         ----^^^^^^^^^\n-   |         |\n-   |         help: use the tuple variant pattern syntax instead: `(_, _)`\n+   |         ^^^^^^^^^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |         E::S(_, _) => {}\n+   |             ^^^^^^\n \n error[E0769]: tuple variant `S` written as struct variant\n   --> $DIR/struct-tuple-field-names.rs:13:9\n    |\n LL |         S { } => {}\n-   |         -^^^^\n-   |         |\n-   |         help: use the tuple variant pattern syntax instead: `(_, _)`\n+   |         ^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |         S(_, _) => {}\n+   |          ^^^^^^\n \n error: aborting due to 2 previous errors\n "}, {"sha": "c3d41ae68cd6ad07d687e571eef48f3990d57f08", "filename": "src/test/ui/type/type-check/issue-41314.stderr", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8540ae5a98b6135253521cdbf34c5953494a5bf/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ftype%2Ftype-check%2Fissue-41314.stderr?ref=d8540ae5a98b6135253521cdbf34c5953494a5bf", "patch": "@@ -2,9 +2,12 @@ error[E0769]: tuple variant `X::Y` written as struct variant\n   --> $DIR/issue-41314.rs:7:9\n    |\n LL |         X::Y { number } => {}\n-   |         ----^^^^^^^^^^^\n-   |         |\n-   |         help: use the tuple variant pattern syntax instead: `(number)`\n+   |         ^^^^^^^^^^^^^^^\n+   |\n+help: use the tuple variant pattern syntax instead\n+   |\n+LL |         X::Y(number) => {}\n+   |             ^^^^^^^^\n \n error: aborting due to previous error\n "}]}