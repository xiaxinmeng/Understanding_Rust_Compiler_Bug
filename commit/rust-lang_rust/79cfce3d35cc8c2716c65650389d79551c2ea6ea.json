{"sha": "79cfce3d35cc8c2716c65650389d79551c2ea6ea", "node_id": "MDY6Q29tbWl0NzI0NzEyOjc5Y2ZjZTNkMzVjYzhjMjcxNmM2NTY1MDM4OWQ3OTU1MWMyZWE2ZWE=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-11-12T21:04:41Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-11-12T21:04:41Z"}, "message": "Auto merge of #44167 - cengizIO:master, r=nikomatsakis\n\nImprove SubSupConflict with a named and an anonymous lifetime parameter #42701\n\nHello!\n\nThis fixes #42701.\n\n## UPDATE 01\nTests are producing different results between different env builds.\nThis inconsistency might take a long time to investigate and fix. So, be patient\n\n## UPDATE 02\nChanged an `FxHashMap` with a `BTreeMap`. Inconsistency seems to be resolved for now.", "tree": {"sha": "e59329d77e17421c16a10445d112db03c3aa6df4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e59329d77e17421c16a10445d112db03c3aa6df4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/79cfce3d35cc8c2716c65650389d79551c2ea6ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/79cfce3d35cc8c2716c65650389d79551c2ea6ea", "html_url": "https://github.com/rust-lang/rust/commit/79cfce3d35cc8c2716c65650389d79551c2ea6ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/79cfce3d35cc8c2716c65650389d79551c2ea6ea/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb5ba4ef90bda82b4aa7328927d4413c7f33683d", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb5ba4ef90bda82b4aa7328927d4413c7f33683d", "html_url": "https://github.com/rust-lang/rust/commit/fb5ba4ef90bda82b4aa7328927d4413c7f33683d"}, {"sha": "f53fc572978b7a544bedeb819aa656f0aef96e11", "url": "https://api.github.com/repos/rust-lang/rust/commits/f53fc572978b7a544bedeb819aa656f0aef96e11", "html_url": "https://github.com/rust-lang/rust/commit/f53fc572978b7a544bedeb819aa656f0aef96e11"}], "stats": {"total": 230, "additions": 99, "deletions": 131}, "files": [{"sha": "36370e23f216128f6f7e7c9c06eff16e95e464a4", "filename": "src/librustc/infer/error_reporting/different_lifetimes.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fdifferent_lifetimes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fdifferent_lifetimes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fdifferent_lifetimes.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -60,6 +60,7 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n     pub fn try_report_anon_anon_conflict(&self, error: &RegionResolutionError<'tcx>) -> bool {\n         let (span, sub, sup) = match *error {\n             ConcreteFailure(ref origin, sub, sup) => (origin.span(), sub, sup),\n+            SubSupConflict(_, ref origin, sub, _, sup) => (origin.span(), sub, sup),\n             _ => return false, // inapplicable\n         };\n "}, {"sha": "e0b8a193ede0c15e27c2be1a7cadffef572e60c7", "filename": "src/librustc/infer/error_reporting/named_anon_conflict.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fnamed_anon_conflict.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fnamed_anon_conflict.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Ferror_reporting%2Fnamed_anon_conflict.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -21,6 +21,7 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n     pub fn try_report_named_anon_conflict(&self, error: &RegionResolutionError<'tcx>) -> bool {\n         let (span, sub, sup) = match *error {\n             ConcreteFailure(ref origin, sub, sup) => (origin.span(), sub, sup),\n+            SubSupConflict(_, ref origin, sub, _, sup) => (origin.span(), sub, sup),\n             _ => return false, // inapplicable\n         };\n "}, {"sha": "efe364166e4be6c14f7fcf08f5645a492cec8614", "filename": "src/librustc/infer/region_inference/graphviz.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Fregion_inference%2Fgraphviz.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Fregion_inference%2Fgraphviz.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Fregion_inference%2Fgraphviz.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -30,6 +30,7 @@ use util::nodemap::{FxHashMap, FxHashSet};\n \n use std::borrow::Cow;\n use std::collections::hash_map::Entry::Vacant;\n+use std::collections::btree_map::BTreeMap;\n use std::env;\n use std::fs::File;\n use std::io;\n@@ -124,7 +125,7 @@ pub fn maybe_print_constraints_for<'a, 'gcx, 'tcx>(\n struct ConstraintGraph<'a, 'gcx: 'a+'tcx, 'tcx: 'a> {\n     graph_name: String,\n     region_rels: &'a RegionRelations<'a, 'gcx, 'tcx>,\n-    map: &'a FxHashMap<Constraint<'tcx>, SubregionOrigin<'tcx>>,\n+    map: &'a BTreeMap<Constraint<'tcx>, SubregionOrigin<'tcx>>,\n     node_ids: FxHashMap<Node, usize>,\n }\n \n@@ -264,7 +265,7 @@ impl<'a, 'gcx, 'tcx> dot::GraphWalk<'a> for ConstraintGraph<'a, 'gcx, 'tcx> {\n     }\n }\n \n-pub type ConstraintMap<'tcx> = FxHashMap<Constraint<'tcx>, SubregionOrigin<'tcx>>;\n+pub type ConstraintMap<'tcx> = BTreeMap<Constraint<'tcx>, SubregionOrigin<'tcx>>;\n \n fn dump_region_constraints_to<'a, 'gcx, 'tcx>(region_rels: &RegionRelations<'a, 'gcx, 'tcx>,\n                                               map: &ConstraintMap<'tcx>,"}, {"sha": "f5327fad312375160855c06850c2323341234cd8", "filename": "src/librustc/infer/region_inference/mod.rs", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Fregion_inference%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Finfer%2Fregion_inference%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Finfer%2Fregion_inference%2Fmod.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -28,6 +28,7 @@ use ty::{Region, RegionVid};\n use ty::{ReEmpty, ReStatic, ReFree, ReEarlyBound, ReErased};\n use ty::{ReLateBound, ReScope, ReVar, ReSkolemized, BrFresh};\n \n+use std::collections::BTreeMap;\n use std::cell::{Cell, RefCell};\n use std::fmt;\n use std::mem;\n@@ -36,7 +37,7 @@ use std::u32;\n mod graphviz;\n \n /// A constraint that influences the inference process.\n-#[derive(Clone, Copy, PartialEq, Eq, Hash, Debug)]\n+#[derive(Clone, Copy, PartialEq, Eq, Hash, Debug, PartialOrd, Ord)]\n pub enum Constraint<'tcx> {\n     /// One region variable is subregion of another\n     ConstrainVarSubVar(RegionVid, RegionVid),\n@@ -186,7 +187,13 @@ pub struct RegionVarBindings<'a, 'gcx: 'a+'tcx, 'tcx: 'a> {\n     /// Constraints of the form `A <= B` introduced by the region\n     /// checker.  Here at least one of `A` and `B` must be a region\n     /// variable.\n-    constraints: RefCell<FxHashMap<Constraint<'tcx>, SubregionOrigin<'tcx>>>,\n+    ///\n+    /// Using `BTreeMap` because the order in which we iterate over\n+    /// these constraints can affect the way we build the region graph,\n+    /// which in turn affects the way that region errors are reported,\n+    /// leading to small variations in error output across runs and\n+    /// platforms.\n+    constraints: RefCell<BTreeMap<Constraint<'tcx>, SubregionOrigin<'tcx>>>,\n \n     /// A \"verify\" is something that we need to verify after inference is\n     /// done, but which does not directly affect inference in any way.\n@@ -357,7 +364,7 @@ impl<'a, 'gcx, 'tcx> RegionVarBindings<'a, 'gcx, 'tcx> {\n             tcx,\n             var_origins: RefCell::new(Vec::new()),\n             values: RefCell::new(None),\n-            constraints: RefCell::new(FxHashMap()),\n+            constraints: RefCell::new(BTreeMap::new()),\n             verifys: RefCell::new(Vec::new()),\n             givens: RefCell::new(FxHashSet()),\n             lubs: RefCell::new(FxHashMap()),"}, {"sha": "a60cad0de9f76b32fdbb9cc09097816c385bb6a6", "filename": "src/librustc/ty/sty.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Fty%2Fsty.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Flibrustc%2Fty%2Fsty.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fty%2Fsty.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -760,7 +760,7 @@ impl<'a, 'gcx, 'tcx> ParamTy {\n /// is the outer fn.\n ///\n /// [dbi]: http://en.wikipedia.org/wiki/De_Bruijn_index\n-#[derive(Clone, PartialEq, Eq, Hash, RustcEncodable, RustcDecodable, Debug, Copy)]\n+#[derive(Clone, PartialEq, Eq, Hash, RustcEncodable, RustcDecodable, Debug, Copy, PartialOrd, Ord)]\n pub struct DebruijnIndex {\n     /// We maintain the invariant that this is never 0. So 1 indicates\n     /// the innermost binder. To ensure this, create with `DebruijnIndex::new`.\n@@ -825,7 +825,7 @@ pub type Region<'tcx> = &'tcx RegionKind;\n ///\n /// [1] http://smallcultfollowing.com/babysteps/blog/2013/10/29/intermingled-parameter-lists/\n /// [2] http://smallcultfollowing.com/babysteps/blog/2013/11/04/intermingled-parameter-lists/\n-#[derive(Clone, PartialEq, Eq, Hash, Copy, RustcEncodable, RustcDecodable)]\n+#[derive(Clone, PartialEq, Eq, Hash, Copy, RustcEncodable, RustcDecodable, PartialOrd, Ord)]\n pub enum RegionKind {\n     // Region bound in a type or fn declaration which will be\n     // substituted 'early' -- that is, at the same time when type\n@@ -871,7 +871,7 @@ pub enum RegionKind {\n \n impl<'tcx> serialize::UseSpecializedDecodable for Region<'tcx> {}\n \n-#[derive(Copy, Clone, PartialEq, Eq, Hash, RustcEncodable, RustcDecodable, Debug)]\n+#[derive(Copy, Clone, PartialEq, Eq, Hash, RustcEncodable, RustcDecodable, Debug, PartialOrd, Ord)]\n pub struct EarlyBoundRegion {\n     pub def_id: DefId,\n     pub index: u32,\n@@ -893,12 +893,12 @@ pub struct FloatVid {\n     pub index: u32,\n }\n \n-#[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Copy)]\n+#[derive(Clone, PartialEq, Eq, RustcEncodable, RustcDecodable, Hash, Copy, PartialOrd, Ord)]\n pub struct RegionVid {\n     pub index: u32,\n }\n \n-#[derive(Clone, Copy, PartialEq, Eq, Hash, RustcEncodable, RustcDecodable)]\n+#[derive(Clone, Copy, PartialEq, Eq, Hash, RustcEncodable, RustcDecodable, PartialOrd, Ord)]\n pub struct SkolemizedRegionVid {\n     pub index: u32,\n }"}, {"sha": "5451a20d8166ff9838f28014984d01e22412711d", "filename": "src/test/compile-fail/associated-types-project-from-hrtb-in-fn-body.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fassociated-types-project-from-hrtb-in-fn-body.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fassociated-types-project-from-hrtb-in-fn-body.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fassociated-types-project-from-hrtb-in-fn-body.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -30,7 +30,7 @@ fn bar<'a, 'b, I : for<'x> Foo<&'x isize>>(\n {\n     // x and y here have two distinct lifetimes:\n     let z: I::A = if cond { x } else { y };\n-    //~^ ERROR cannot infer\n+    //~^ ERROR lifetime mismatch\n }\n \n pub fn main() {}"}, {"sha": "a5e8f4068e6619711695c6310fdc4a8de6fe96c5", "filename": "src/test/compile-fail/associated-types/cache/project-fn-ret-contravariant.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fassociated-types%2Fcache%2Fproject-fn-ret-contravariant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fassociated-types%2Fcache%2Fproject-fn-ret-contravariant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fassociated-types%2Fcache%2Fproject-fn-ret-contravariant.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -50,9 +50,10 @@ fn baz<'a,'b>(x: &'a u32) -> &'static u32 {\n \n #[cfg(krisskross)] // two instantiations, mixing and matching: BAD\n fn transmute<'a,'b>(x: &'a u32, y: &'b u32) -> (&'a u32, &'b u32) {\n-   let a = bar(foo, y); //[krisskross]~ ERROR E0495\n-   let b = bar(foo, x); //[krisskross]~ ERROR E0495\n-   (a, b)\n+   let a = bar(foo, y);\n+   let b = bar(foo, x);\n+   (a, b) //[krisskross]~ ERROR 55:5: 55:6: lifetime mismatch [E0623]\n+   //[krisskross]~^ ERROR 55:8: 55:9: lifetime mismatch [E0623]\n }\n \n #[rustc_error]"}, {"sha": "6e4bdd4b21c79c310d45958e9085bdfdd99c8e2a", "filename": "src/test/compile-fail/associated-types/cache/project-fn-ret-invariant.rs", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fassociated-types%2Fcache%2Fproject-fn-ret-invariant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fassociated-types%2Fcache%2Fproject-fn-ret-invariant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fassociated-types%2Fcache%2Fproject-fn-ret-invariant.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -45,8 +45,8 @@ fn baz<'a,'b>(x: Type<'a>, y: Type<'b>) -> (Type<'a>, Type<'b>) {\n #[cfg(oneuse)] // one instantiation: BAD\n fn baz<'a,'b>(x: Type<'a>, y: Type<'b>) -> (Type<'a>, Type<'b>) {\n    let f = foo; // <-- No consistent type can be inferred for `f` here.\n-   let a = bar(f, x); //[oneuse]~^ ERROR E0495\n-   let b = bar(f, y);\n+   let a = bar(f, x);\n+   let b = bar(f, y); //[oneuse]~ ERROR 49:19: 49:20: lifetime mismatch [E0623]\n    (a, b)\n }\n \n@@ -60,9 +60,9 @@ fn baz<'a,'b>(x: Type<'a>) -> Type<'static> {\n \n #[cfg(krisskross)] // two instantiations, mixing and matching: BAD\n fn transmute<'a,'b>(x: Type<'a>, y: Type<'b>) -> (Type<'a>, Type<'b>) {\n-   let a = bar(foo, y); //[krisskross]~ ERROR E0495\n-   let b = bar(foo, x); //[krisskross]~ ERROR E0495\n-   (a, b)\n+   let a = bar(foo, y); //[krisskross]~ ERROR E0623\n+   let b = bar(foo, x);\n+   (a, b) //[krisskross]~ ERROR E0623\n }\n \n #[rustc_error]"}, {"sha": "af85e68f5debe8b628ec6a58a913179c8676c34d", "filename": "src/test/compile-fail/borrowck/borrowck-reborrow-from-shorter-lived-andmut.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fborrowck%2Fborrowck-reborrow-from-shorter-lived-andmut.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fborrowck%2Fborrowck-reborrow-from-shorter-lived-andmut.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fborrowck%2Fborrowck-reborrow-from-shorter-lived-andmut.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -17,7 +17,7 @@ struct S<'a> {\n \n fn copy_borrowed_ptr<'a,'b>(p: &'a mut S<'b>) -> S<'b> {\n     S { pointer: &mut *p.pointer }\n-    //~^ ERROR cannot infer\n+    //~^ ERROR lifetime mismatch\n }\n \n fn main() {"}, {"sha": "590f8073a1a0d33fd1a46f2a02cab905fa36a571", "filename": "src/test/compile-fail/issue-13058.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-13058.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-13058.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-13058.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -22,7 +22,7 @@ impl<'r> Itble<'r, usize, Range<usize>> for (usize, usize) {\n fn check<'r, I: Iterator<Item=usize>, T: Itble<'r, usize, I>>(cont: &T) -> bool\n {\n     let cont_iter = cont.iter();\n-//~^ ERROR cannot infer an appropriate lifetime for autoref due to conflicting requirements\n+//~^ ERROR 24:26: 24:30: explicit lifetime required in the type of `cont` [E0621]\n     let result = cont_iter.fold(Some(0), |state, val| {\n         state.map_or(None, |mask| {\n             let bit = 1 << val;"}, {"sha": "dceecee6ca74b0ad6fee883032889bf00a70c502", "filename": "src/test/compile-fail/issue-14285.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-14285.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-14285.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-14285.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -19,7 +19,7 @@ impl Foo for A {}\n struct B<'a>(&'a (Foo+'a));\n \n fn foo<'a>(a: &Foo) -> B<'a> {\n-    B(a)    //~ ERROR cannot infer an appropriate lifetime\n+    B(a)    //~ ERROR 22:5: 22:9: explicit lifetime required in the type of `a` [E0621]\n }\n \n fn main() {"}, {"sha": "a62e46820d3cb1cc64c14d7e3fecea811835c2b2", "filename": "src/test/compile-fail/issue-15034.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-15034.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-15034.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-15034.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -25,7 +25,7 @@ struct Parser<'a> {\n impl<'a> Parser<'a> {\n     pub fn new(lexer: &'a mut Lexer) -> Parser<'a> {\n         Parser { lexer: lexer }\n-        //~^ ERROR cannot infer an appropriate lifetime\n+        //~^ ERROR 27:25: 27:30: explicit lifetime required in the type of `lexer` [E0621]\n     }\n }\n "}, {"sha": "8516a8ea52e42ddbefb5860043aad9f85781f488", "filename": "src/test/compile-fail/issue-17728.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-17728.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-17728.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-17728.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -21,9 +21,9 @@ trait TraversesWorld {\n     fn attemptTraverse(&self, room: &Room, directionStr: &str) -> Result<&Room, &str> {\n         let direction = str_to_direction(directionStr);\n         let maybe_room = room.direction_to_room.get(&direction);\n-        //~^ ERROR cannot infer an appropriate lifetime for autoref due to conflicting requirements\n         match maybe_room {\n             Some(entry) => Ok(entry),\n+            //~^ ERROR 25:28: 25:37: lifetime mismatch [E0623]\n             _ => Err(\"Direction does not exist in room.\")\n         }\n     }"}, {"sha": "519e9d06d1b33c1c4558ed19b86f534aa03cce6a", "filename": "src/test/compile-fail/issue-3154.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-3154.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-3154.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-3154.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -13,7 +13,7 @@ struct thing<'a, Q:'a> {\n }\n \n fn thing<'a,Q>(x: &Q) -> thing<'a,Q> {\n-    thing{ x: x } //~ ERROR cannot infer\n+    thing{ x: x } //~ ERROR 16:5: 16:18: explicit lifetime required in the type of `x` [E0621]\n }\n \n fn main() {"}, {"sha": "e16a7ecf6b9087982ec09aa1a31fd79264d0a34c", "filename": "src/test/compile-fail/issue-40288-2.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-40288-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fissue-40288-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-40288-2.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -12,12 +12,12 @@ fn prove_static<T: 'static + ?Sized>(_: &'static T) {}\n \n fn lifetime_transmute_slice<'a, T: ?Sized>(x: &'a T, y: &T) -> &'a T {\n     let mut out = [x];\n-    //~^ ERROR cannot infer an appropriate lifetime due to conflicting requirements\n     {\n         let slice: &mut [_] = &mut out;\n         slice[0] = y;\n     }\n     out[0]\n+    //~^ ERROR 19:5: 19:11: explicit lifetime required in the type of `y` [E0621]\n }\n \n struct Struct<T, U: ?Sized> {\n@@ -27,12 +27,12 @@ struct Struct<T, U: ?Sized> {\n \n fn lifetime_transmute_struct<'a, T: ?Sized>(x: &'a T, y: &T) -> &'a T {\n     let mut out = Struct { head: x, _tail: [()] };\n-    //~^ ERROR cannot infer an appropriate lifetime due to conflicting requirements\n     {\n         let dst: &mut Struct<_, [()]> = &mut out;\n         dst.head = y;\n     }\n     out.head\n+    //~^ ERROR 34:5: 34:13: explicit lifetime required in the type of `y` [E0621]\n }\n \n fn main() {"}, {"sha": "c50f425b2c01d744cb41256a10fd0f726010c8bf", "filename": "src/test/compile-fail/object-lifetime-default-from-box-error.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fobject-lifetime-default-from-box-error.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fobject-lifetime-default-from-box-error.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fobject-lifetime-default-from-box-error.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -38,7 +38,7 @@ fn store(ss: &mut SomeStruct, b: Box<SomeTrait>) {\n fn store1<'b>(ss: &mut SomeStruct, b: Box<SomeTrait+'b>) {\n     // Here we override the lifetimes explicitly, and so naturally we get an error.\n \n-    ss.r = b; //~ ERROR cannot infer an appropriate lifetime\n+    ss.r = b; //~ ERROR 41:12: 41:13: explicit lifetime required in the type of `ss` [E0621]\n }\n \n fn main() {"}, {"sha": "e3d96f52e817b857ba091bafaff9c5ecee71198b", "filename": "src/test/compile-fail/region-lifetime-bounds-on-fns-where-clause.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregion-lifetime-bounds-on-fns-where-clause.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregion-lifetime-bounds-on-fns-where-clause.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregion-lifetime-bounds-on-fns-where-clause.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -21,7 +21,7 @@ fn b<'a, 'b>(x: &mut &'a isize, y: &mut &'b isize) {\n fn c<'a,'b>(x: &mut &'a isize, y: &mut &'b isize) {\n     // Here we try to call `foo` but do not know that `'a` and `'b` are\n     // related as required.\n-    a(x, y); //~ ERROR cannot infer\n+    a(x, y); //~ ERROR 24:7: 24:8: lifetime mismatch [E0623]\n }\n \n fn d() {"}, {"sha": "d8d12444dddb34bae2979ee6c7086f0f0fa9ba77", "filename": "src/test/compile-fail/region-multiple-lifetime-bounds-on-fns-where-clause.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregion-multiple-lifetime-bounds-on-fns-where-clause.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregion-multiple-lifetime-bounds-on-fns-where-clause.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregion-multiple-lifetime-bounds-on-fns-where-clause.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -23,7 +23,7 @@ fn b<'a, 'b, 'c>(x: &mut &'a isize, y: &mut &'b isize, z: &mut &'c isize) {\n fn c<'a,'b, 'c>(x: &mut &'a isize, y: &mut &'b isize, z: &mut &'c isize) {\n     // Here we try to call `foo` but do not know that `'a` and `'b` are\n     // related as required.\n-    a(x, y, z); //~ ERROR cannot infer\n+    a(x, y, z); //~ ERROR 26:7: 26:8: lifetime mismatch [E0623]\n }\n \n fn d() {"}, {"sha": "24e4c5fbd91be47f345f39866404be8991d2f0c2", "filename": "src/test/compile-fail/regions-bounded-method-type-parameters-cross-crate.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-bounded-method-type-parameters-cross-crate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-bounded-method-type-parameters-cross-crate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-bounded-method-type-parameters-cross-crate.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -27,7 +27,7 @@ fn call_into_maybe_owned<'x,F:IntoMaybeOwned<'x>>(f: F) {\n \n fn call_bigger_region<'x, 'y>(a: Inv<'x>, b: Inv<'y>) {\n     // Here the value provided for 'y is 'y, and hence 'y:'x does not hold.\n-    a.bigger_region(b) //~ ERROR cannot infer\n+    a.bigger_region(b) //~ ERROR 30:7: 30:20: lifetime mismatch [E0623]\n }\n \n fn main() { }"}, {"sha": "3e9d2aa6c3bff4b04755d25f6a51985e0c075879", "filename": "src/test/compile-fail/regions-bounded-method-type-parameters-trait-bound.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-bounded-method-type-parameters-trait-bound.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-bounded-method-type-parameters-trait-bound.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-bounded-method-type-parameters-trait-bound.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -27,7 +27,7 @@ fn caller1<'a,'b,F:Foo<'a>>(a: Inv<'a>, b: Inv<'b>, f: F) {\n \n fn caller2<'a,'b,F:Foo<'a>>(a: Inv<'a>, b: Inv<'b>, f: F) {\n     // Here the value provided for 'y is 'b, and hence 'b:'a does not hold.\n-    f.method(b); //~ ERROR cannot infer\n+    f.method(b); //~ ERROR 30:7: 30:13: lifetime mismatch [E0623]\n }\n \n fn caller3<'a,'b:'a,F:Foo<'a>>(a: Inv<'a>, b: Inv<'b>, f: F) {"}, {"sha": "dcc579d26c18f681f2e02bc1d89edb35233fb5c2", "filename": "src/test/compile-fail/regions-creating-enums3.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-creating-enums3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-creating-enums3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-creating-enums3.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -14,7 +14,7 @@ enum ast<'a> {\n }\n \n fn mk_add_bad1<'a,'b>(x: &'a ast<'a>, y: &'b ast<'b>) -> ast<'a> {\n-    ast::add(x, y) //~ ERROR cannot infer\n+    ast::add(x, y) //~ ERROR 17:5: 17:19: lifetime mismatch [E0623]\n }\n \n fn main() {"}, {"sha": "073a4f79b05f006d3143acd11b9862c873b62626", "filename": "src/test/compile-fail/regions-free-region-ordering-callee.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-free-region-ordering-callee.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-free-region-ordering-callee.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-free-region-ordering-callee.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -20,13 +20,13 @@ fn ordering1<'a, 'b>(x: &'a &'b usize) -> &'a usize {\n \n fn ordering2<'a, 'b>(x: &'a &'b usize, y: &'a usize) -> &'b usize {\n     // However, it is not safe to assume that 'b <= 'a\n-    &*y //~ ERROR cannot infer\n+    &*y //~ ERROR 23:5: 23:8: lifetime mismatch [E0623]\n }\n \n fn ordering3<'a, 'b>(x: &'a usize, y: &'b usize) -> &'a &'b usize {\n     // Do not infer an ordering from the return value.\n     let z: &'b usize = &*x;\n-    //~^ ERROR cannot infer\n+    //~^ ERROR 28:24: 28:27: lifetime mismatch [E0623]\n     panic!();\n }\n "}, {"sha": "843c5f512f8f17d181986ca788ba4584f44a538a", "filename": "src/test/compile-fail/regions-glb-free-free.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-glb-free-free.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-glb-free-free.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-glb-free-free.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -22,7 +22,7 @@ mod argparse {\n \n     impl<'a> Flag<'a> {\n         pub fn set_desc(self, s: &str) -> Flag<'a> {\n-            Flag { //~ ERROR cannot infer\n+            Flag { //~ ERROR 25:13: 30:14: explicit lifetime required in the type of `s` [E0621]\n                 name: self.name,\n                 desc: s,\n                 max_count: self.max_count,"}, {"sha": "5955619ea92adde671d8e5a8caa7fa8ae30c2d32", "filename": "src/test/compile-fail/regions-lifetime-bounds-on-fns.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-lifetime-bounds-on-fns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-lifetime-bounds-on-fns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-lifetime-bounds-on-fns.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -21,7 +21,7 @@ fn b<'a, 'b>(x: &mut &'a isize, y: &mut &'b isize) {\n fn c<'a,'b>(x: &mut &'a isize, y: &mut &'b isize) {\n     // Here we try to call `foo` but do not know that `'a` and `'b` are\n     // related as required.\n-    a(x, y); //~ ERROR E0495\n+    a(x, y); //~ ERROR 24:7: 24:8: lifetime mismatch [E0623]\n }\n \n fn d() {"}, {"sha": "f6f1a189e5ee14dbd5dc6cc57759ef71bd704284", "filename": "src/test/compile-fail/regions-reborrow-from-shorter-mut-ref-mut-ref.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-reborrow-from-shorter-mut-ref-mut-ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-reborrow-from-shorter-mut-ref-mut-ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-reborrow-from-shorter-mut-ref-mut-ref.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -11,7 +11,7 @@\n // Issue #8624. Test for reborrowing with 3 levels, not just two.\n \n fn copy_borrowed_ptr<'a, 'b, 'c>(p: &'a mut &'b mut &'c mut isize) -> &'b mut isize {\n-    &mut ***p //~ ERROR cannot infer\n+    &mut ***p //~ ERROR 14:5: 14:14: lifetime mismatch [E0623]\n }\n \n fn main() {"}, {"sha": "7270b477d2d88df3badf5762577cc24b78c96d36", "filename": "src/test/compile-fail/regions-reborrow-from-shorter-mut-ref.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-reborrow-from-shorter-mut-ref.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fregions-reborrow-from-shorter-mut-ref.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fregions-reborrow-from-shorter-mut-ref.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -13,7 +13,7 @@\n // for `'a` (which must be a sublifetime of `'b`).\n \n fn copy_borrowed_ptr<'a, 'b>(p: &'a mut &'b mut isize) -> &'b mut isize {\n-    &mut **p //~ ERROR cannot infer\n+    &mut **p //~ ERROR 16:5: 16:13: lifetime mismatch [E0623]\n }\n \n fn main() {"}, {"sha": "bc9eab2be821bf153bab93d29411cfcacd51a821", "filename": "src/test/compile-fail/variance-trait-matching.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fvariance-trait-matching.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fcompile-fail%2Fvariance-trait-matching.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fvariance-trait-matching.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -31,7 +31,7 @@ fn get<'a, G>(get: &G) -> i32\n     // This fails to type-check because, without variance, we can't\n     // use `G : Get<&'a i32>` as evidence that `G : Get<&'b i32>`,\n     // even if `'a : 'b`.\n-    pick(get, &22) //~ ERROR cannot infer\n+    pick(get, &22) //~ ERROR 34:5: 34:9: explicit lifetime required in the type of `get` [E0621]\n }\n \n fn pick<'b, G>(get: &'b G, if_odd: &'b i32) -> i32"}, {"sha": "04112c303bd935f2cbef5744adc628ac2bbd4207", "filename": "src/test/ui/lifetime-errors/42701_one_named_and_one_anonymous.rs", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2F42701_one_named_and_one_anonymous.rs", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2F42701_one_named_and_one_anonymous.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetime-errors%2F42701_one_named_and_one_anonymous.rs?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -0,0 +1,24 @@\n+// Copyright 2017 The Rust Project Developers. See the COPYRIGHT\n+// file at the top-level directory of this distribution and at\n+// http://rust-lang.org/COPYRIGHT.\n+//\n+// Licensed under the Apache License, Version 2.0 <LICENSE-APACHE or\n+// http://www.apache.org/licenses/LICENSE-2.0> or the MIT license\n+// <LICENSE-MIT or http://opensource.org/licenses/MIT>, at your\n+// option. This file may not be copied, modified, or distributed\n+// except according to those terms.\n+\n+struct Foo {\n+    field: i32,\n+}\n+\n+fn foo2<'a>(a: &'a Foo, x: &i32) -> &'a i32 {\n+    if true {\n+        let p: &i32 = &a.field;\n+        &*p\n+    } else {\n+        &*x\n+    }\n+}\n+\n+fn main() { }"}, {"sha": "613c903853ae5a1fbc2dc3cb833838435f88e094", "filename": "src/test/ui/lifetime-errors/42701_one_named_and_one_anonymous.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2F42701_one_named_and_one_anonymous.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2F42701_one_named_and_one_anonymous.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetime-errors%2F42701_one_named_and_one_anonymous.stderr?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -0,0 +1,11 @@\n+error[E0621]: explicit lifetime required in the type of `x`\n+  --> $DIR/42701_one_named_and_one_anonymous.rs:20:9\n+   |\n+15 | fn foo2<'a>(a: &'a Foo, x: &i32) -> &'a i32 {\n+   |                         - consider changing the type of `x` to `&'a i32`\n+...\n+20 |         &*x\n+   |         ^^^ lifetime `'a` required\n+\n+error: aborting due to previous error\n+"}, {"sha": "495af8ae208f640acc74d4a986432503449a515f", "filename": "src/test/ui/lifetime-errors/ex2c-push-inference-variable.stderr", "status": "modified", "additions": 5, "deletions": 29, "changes": 34, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2Fex2c-push-inference-variable.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2Fex2c-push-inference-variable.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetime-errors%2Fex2c-push-inference-variable.stderr?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -1,35 +1,11 @@\n-error[E0495]: cannot infer an appropriate lifetime for lifetime parameter `'a` due to conflicting requirements\n-  --> $DIR/ex2c-push-inference-variable.rs:16:13\n-   |\n-16 |     let z = Ref { data: y.data };\n-   |             ^^^\n-   |\n-note: first, the lifetime cannot outlive the lifetime 'c as defined on the function body at 15:1...\n-  --> $DIR/ex2c-push-inference-variable.rs:15:1\n-   |\n-15 | / fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n-16 | |     let z = Ref { data: y.data };\n-17 | |     x.push(z);\n-18 | | }\n-   | |_^\n-note: ...so that reference does not outlive borrowed content\n-  --> $DIR/ex2c-push-inference-variable.rs:16:25\n-   |\n-16 |     let z = Ref { data: y.data };\n-   |                         ^^^^^^\n-note: but, the lifetime must be valid for the lifetime 'b as defined on the function body at 15:1...\n-  --> $DIR/ex2c-push-inference-variable.rs:15:1\n-   |\n-15 | / fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n-16 | |     let z = Ref { data: y.data };\n-17 | |     x.push(z);\n-18 | | }\n-   | |_^\n-note: ...so that expression is assignable (expected Ref<'b, _>, found Ref<'_, _>)\n+error[E0623]: lifetime mismatch\n   --> $DIR/ex2c-push-inference-variable.rs:17:12\n    |\n+15 | fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n+   |                                   ------------      ------------ these two types are declared with different lifetimes...\n+16 |     let z = Ref { data: y.data };\n 17 |     x.push(z);\n-   |            ^\n+   |            ^ ...but data from `y` flows into `x` here\n \n error: aborting due to previous error\n "}, {"sha": "1f250a888472c55f43c03fcd82c8e56d8b789728", "filename": "src/test/ui/lifetime-errors/ex2d-push-inference-variable-2.stderr", "status": "modified", "additions": 4, "deletions": 31, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2Fex2d-push-inference-variable-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2Fex2d-push-inference-variable-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetime-errors%2Fex2d-push-inference-variable-2.stderr?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -1,37 +1,10 @@\n-error[E0495]: cannot infer an appropriate lifetime for lifetime parameter `'a` due to conflicting requirements\n-  --> $DIR/ex2d-push-inference-variable-2.rs:17:13\n-   |\n-17 |     let b = Ref { data: y.data };\n-   |             ^^^\n-   |\n-note: first, the lifetime cannot outlive the lifetime 'c as defined on the function body at 15:1...\n-  --> $DIR/ex2d-push-inference-variable-2.rs:15:1\n-   |\n-15 | / fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n-16 | |     let a: &mut Vec<Ref<i32>> = x;\n-17 | |     let b = Ref { data: y.data };\n-18 | |     a.push(b);\n-19 | | }\n-   | |_^\n-note: ...so that reference does not outlive borrowed content\n-  --> $DIR/ex2d-push-inference-variable-2.rs:17:25\n-   |\n-17 |     let b = Ref { data: y.data };\n-   |                         ^^^^^^\n-note: but, the lifetime must be valid for the lifetime 'b as defined on the function body at 15:1...\n-  --> $DIR/ex2d-push-inference-variable-2.rs:15:1\n-   |\n-15 | / fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n-16 | |     let a: &mut Vec<Ref<i32>> = x;\n-17 | |     let b = Ref { data: y.data };\n-18 | |     a.push(b);\n-19 | | }\n-   | |_^\n-note: ...so that expression is assignable (expected &mut std::vec::Vec<Ref<'_, i32>>, found &mut std::vec::Vec<Ref<'b, i32>>)\n+error[E0623]: lifetime mismatch\n   --> $DIR/ex2d-push-inference-variable-2.rs:16:33\n    |\n+15 | fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n+   |                                   ------------      ------------ these two types are declared with different lifetimes...\n 16 |     let a: &mut Vec<Ref<i32>> = x;\n-   |                                 ^\n+   |                                 ^ ...but data from `y` flows into `x` here\n \n error: aborting due to previous error\n "}, {"sha": "343c35b871edea38764ecdaa671978a50a32935c", "filename": "src/test/ui/lifetime-errors/ex2e-push-inference-variable-3.stderr", "status": "modified", "additions": 4, "deletions": 31, "changes": 35, "blob_url": "https://github.com/rust-lang/rust/blob/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2Fex2e-push-inference-variable-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/79cfce3d35cc8c2716c65650389d79551c2ea6ea/src%2Ftest%2Fui%2Flifetime-errors%2Fex2e-push-inference-variable-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flifetime-errors%2Fex2e-push-inference-variable-3.stderr?ref=79cfce3d35cc8c2716c65650389d79551c2ea6ea", "patch": "@@ -1,37 +1,10 @@\n-error[E0495]: cannot infer an appropriate lifetime for lifetime parameter `'a` due to conflicting requirements\n-  --> $DIR/ex2e-push-inference-variable-3.rs:17:13\n-   |\n-17 |     let b = Ref { data: y.data };\n-   |             ^^^\n-   |\n-note: first, the lifetime cannot outlive the lifetime 'c as defined on the function body at 15:1...\n-  --> $DIR/ex2e-push-inference-variable-3.rs:15:1\n-   |\n-15 | / fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n-16 | |     let a: &mut Vec<Ref<i32>> = x;\n-17 | |     let b = Ref { data: y.data };\n-18 | |     Vec::push(a, b);\n-19 | | }\n-   | |_^\n-note: ...so that reference does not outlive borrowed content\n-  --> $DIR/ex2e-push-inference-variable-3.rs:17:25\n-   |\n-17 |     let b = Ref { data: y.data };\n-   |                         ^^^^^^\n-note: but, the lifetime must be valid for the lifetime 'b as defined on the function body at 15:1...\n-  --> $DIR/ex2e-push-inference-variable-3.rs:15:1\n-   |\n-15 | / fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n-16 | |     let a: &mut Vec<Ref<i32>> = x;\n-17 | |     let b = Ref { data: y.data };\n-18 | |     Vec::push(a, b);\n-19 | | }\n-   | |_^\n-note: ...so that expression is assignable (expected &mut std::vec::Vec<Ref<'_, i32>>, found &mut std::vec::Vec<Ref<'b, i32>>)\n+error[E0623]: lifetime mismatch\n   --> $DIR/ex2e-push-inference-variable-3.rs:16:33\n    |\n+15 | fn foo<'a, 'b, 'c>(x: &'a mut Vec<Ref<'b, i32>>, y: Ref<'c, i32>) {\n+   |                                   ------------      ------------ these two types are declared with different lifetimes...\n 16 |     let a: &mut Vec<Ref<i32>> = x;\n-   |                                 ^\n+   |                                 ^ ...but data from `y` flows into `x` here\n \n error: aborting due to previous error\n "}]}