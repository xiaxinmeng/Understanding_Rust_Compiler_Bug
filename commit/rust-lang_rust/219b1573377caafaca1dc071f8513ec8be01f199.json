{"sha": "219b1573377caafaca1dc071f8513ec8be01f199", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxOWIxNTczMzc3Y2FhZmFjYTFkYzA3MWY4NTEzZWM4YmUwMWYxOTk=", "commit": {"author": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-03-25T06:54:15Z"}, "committer": {"name": "bors[bot]", "email": "bors[bot]@users.noreply.github.com", "date": "2019-03-25T06:54:15Z"}, "message": "Merge #1035\n\n1035: Add master branch docs build and publish r=matklad a=robojumper\n\nCloses #1024.\r\n\r\nAdditional setup required: \r\n\r\n* The rust-analyzer travis repo needs an [environment variable](https://docs.travis-ci.com/user/environment-variables/#defining-variables-in-repository-settings) `DOCS_TOKEN` that will be used to publish docs to the `gh-pages` branch. This is a GitHub access token with the appropriate permissions to push to this repository. Travis will keep this a secret.\r\n* In the GitHub repository settings, the GitHub pages source needs to be set to the `gh-pages` branch. This option will only appear once a branch is created with this exact name -- created either through the `deploy` step or manually.\r\n* In the GitHub repository settings, a GitHub pages theme will need to be chosen. What theme to use is unimportant, but [you must choose a theme](https://github.community/t5/GitHub-Pages/Github-Pages-are-not-published-after-following-the-documentation/m-p/18676#M1398).\r\n\r\nDocs are built as part of any rust build (on linux and windows, though all my Travis windows builds have timed out), but only published on master builds on linux.\r\n\r\nThe docs badge links to `https://rust-analyzer.github.io/rust-analyzer/ra_ide_api/index.html` -- since this project is a cargo workspace, there isn't a global index page, hence just the link to an arbitrarily chosen crate. If this project had a canonical main crate with good documentation, one could link to that. All other crates are accessible through the sidebar.\n\nCo-authored-by: robojumper <robojumper@gmail.com>", "tree": {"sha": "be802fa2d43032312a0b5c3d047b3565c2dc6655", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/be802fa2d43032312a0b5c3d047b3565c2dc6655"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/219b1573377caafaca1dc071f8513ec8be01f199", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/219b1573377caafaca1dc071f8513ec8be01f199", "html_url": "https://github.com/rust-lang/rust/commit/219b1573377caafaca1dc071f8513ec8be01f199", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/219b1573377caafaca1dc071f8513ec8be01f199/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "parents": [{"sha": "94cf23bfc4738990e6c74424450bc40f0beb2b62", "url": "https://api.github.com/repos/rust-lang/rust/commits/94cf23bfc4738990e6c74424450bc40f0beb2b62", "html_url": "https://github.com/rust-lang/rust/commit/94cf23bfc4738990e6c74424450bc40f0beb2b62"}, {"sha": "022d88cf4ce786642548d05e16a5a72b4970b110", "url": "https://api.github.com/repos/rust-lang/rust/commits/022d88cf4ce786642548d05e16a5a72b4970b110", "html_url": "https://github.com/rust-lang/rust/commit/022d88cf4ce786642548d05e16a5a72b4970b110"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "ebff7d8b01ba362382daaddab37d797257f4ffd1", "filename": ".travis.yml", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/219b1573377caafaca1dc071f8513ec8be01f199/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/219b1573377caafaca1dc071f8513ec8be01f199/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=219b1573377caafaca1dc071f8513ec8be01f199", "patch": "@@ -12,12 +12,15 @@ build: &rust_build\n         - rustup component add rust-src\n         - cargo test --no-run  # let's measure compile time separately\n         - cargo test\n+        - cargo doc --all --no-deps\n     env:\n         - RUSTFLAGS=\"-D warnings\", CARGO_INCREMENTAL=0\n \n matrix:\n     include:\n         - os: linux\n+          before_script:\n+              - DEPLOY_DOCS=1\n           <<: *rust_build\n         - language: node_js\n           node_js: node\n@@ -43,3 +46,14 @@ branches:\n         - staging\n         - master\n         - trying\n+\n+deploy:\n+    provider: pages\n+    skip-cleanup: true\n+    github-token: $DOCS_TOKEN  # Set in the settings page of your repository, as a secure variable\n+    keep-history: true\n+    local-dir: target/doc\n+    branch: gh-pages\n+    on:\n+        branch: master\n+        condition: $DEPLOY_DOCS = 1"}, {"sha": "7c81413d93587f07bc0fe1b1161bbd205cb75de0", "filename": "README.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/219b1573377caafaca1dc071f8513ec8be01f199/README.md", "raw_url": "https://github.com/rust-lang/rust/raw/219b1573377caafaca1dc071f8513ec8be01f199/README.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/README.md?ref=219b1573377caafaca1dc071f8513ec8be01f199", "patch": "@@ -1,6 +1,7 @@\n # Rust Analyzer\n \n [![Build Status](https://travis-ci.org/rust-analyzer/rust-analyzer.svg?branch=master)](https://travis-ci.org/rust-analyzer/rust-analyzer)\n+[![Master docs](https://img.shields.io/badge/docs-master-blue.svg)](https://rust-analyzer.github.io/rust-analyzer/ra_ide_api/index.html)\n \n Rust Analyzer is an **experimental** modular compiler frontend for the Rust\n language. It is a part of a larger rls-2.0 effort to create excellent IDE"}]}