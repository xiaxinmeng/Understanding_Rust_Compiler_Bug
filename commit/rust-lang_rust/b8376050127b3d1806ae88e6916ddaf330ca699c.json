{"sha": "b8376050127b3d1806ae88e6916ddaf330ca699c", "node_id": "C_kwDOAAsO6NoAKGI4Mzc2MDUwMTI3YjNkMTgwNmFlODhlNjkxNmRkYWYzMzBjYTY5OWM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2021-10-24T13:48:44Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-24T13:48:44Z"}, "message": "Rollup merge of #90155 - jsha:outdent-methods, r=GuillaumeGomez,camelid\n\nFix alignment of method headings for scannability\n\nWe sometimes use indentation to indicate something is a heading: The section that comes after is indented by 24px relative to the heading. However, the relationship between the \"Implementations\" section heading, the `impl` headings it contains, and the `pub fn` subheadings within each impl, is awkward. It goes **Implementations**, 15px indent, `impl`, 5px indent, `pub fn`, 4px indent, docblock.\n\nI line up `impl` and `pub fn` with the `Implementations` heading, give `impl` a larger font size to indicate it is higher in the hierarchy, and indent the docblock a full 24px relative to their parent, matching the indents we use elsewhere to distinguish section headings. By letting the `pub fn` stick out to the left of the docblock, I think this makes methods significantly more scannable.\n\nRelated to #59829\n\nr? `````@camelid`````\n\n[Old](https://doc.rust-lang.org/nightly/std/string/struct.String.html#implementations):\n\n[![image](https://user-images.githubusercontent.com/220205/138380233-9c63a0f2-0f80-40a3-ab3d-a1ee9fb7c5d8.png)](https://doc.rust-lang.org/nightly/std/string/struct.String.html#implementations)\n\n[New](https://jacob.hoffman-andrews.com/rust/outdent-methods/std/string/struct.String.html#implementations):\n\n[![image](https://user-images.githubusercontent.com/220205/138392479-b45fce3f-bf43-42e0-81ee-c4bb9ac35cda.png)](https://jacob.hoffman-andrews.com/rust/outdent-methods/std/string/struct.String.html#implementations)", "tree": {"sha": "6e5df3165789746da3734374732e5f7ed2767fac", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e5df3165789746da3734374732e5f7ed2767fac"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b8376050127b3d1806ae88e6916ddaf330ca699c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhdWQ8CRBK7hj4Ov3rIwAAkHAIAFaHPhGM0646yGG2soqebHmN\nrmxUh2l9t+lmfBaYWgFocBwHGRAH1VuX9ZHyikPLIWN09eRfPzc1+OWtdNUA7QEh\nQTly6HWqHZLv670UzA/+5uPCa5dKVH+h5B96fkFkYdrezbNNq2fY6d/KYVBNvV59\nEN7ECfzs6cu7R3ZKodnOfaHOwJurI9eYdF/kydfckE07LgiS1/7UpHLM1Lv3u6UG\nW7RnvkQXPE2KhQK9AHE8mNjrqDKtejIM8l+lm3TfTbtPEQpu4ZjbbaD7dD35o+Xh\nHFViRncdlx4J9UDD/NV2lOWs6+l43ZIDNLkfSQb88cLBa+CJVpegTkijvMbtOeQ=\n=bitO\n-----END PGP SIGNATURE-----\n", "payload": "tree 6e5df3165789746da3734374732e5f7ed2767fac\nparent d814af95baec4f1819b03ec878c83b8171031c54\nparent 542ab2daa6eb4b05a01403114783aa323315b416\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1635083324 +0200\ncommitter GitHub <noreply@github.com> 1635083324 +0200\n\nRollup merge of #90155 - jsha:outdent-methods, r=GuillaumeGomez,camelid\n\nFix alignment of method headings for scannability\n\nWe sometimes use indentation to indicate something is a heading: The section that comes after is indented by 24px relative to the heading. However, the relationship between the \"Implementations\" section heading, the `impl` headings it contains, and the `pub fn` subheadings within each impl, is awkward. It goes **Implementations**, 15px indent, `impl`, 5px indent, `pub fn`, 4px indent, docblock.\n\nI line up `impl` and `pub fn` with the `Implementations` heading, give `impl` a larger font size to indicate it is higher in the hierarchy, and indent the docblock a full 24px relative to their parent, matching the indents we use elsewhere to distinguish section headings. By letting the `pub fn` stick out to the left of the docblock, I think this makes methods significantly more scannable.\n\nRelated to #59829\n\nr? `````@camelid`````\n\n[Old](https://doc.rust-lang.org/nightly/std/string/struct.String.html#implementations):\n\n[![image](https://user-images.githubusercontent.com/220205/138380233-9c63a0f2-0f80-40a3-ab3d-a1ee9fb7c5d8.png)](https://doc.rust-lang.org/nightly/std/string/struct.String.html#implementations)\n\n[New](https://jacob.hoffman-andrews.com/rust/outdent-methods/std/string/struct.String.html#implementations):\n\n[![image](https://user-images.githubusercontent.com/220205/138392479-b45fce3f-bf43-42e0-81ee-c4bb9ac35cda.png)](https://jacob.hoffman-andrews.com/rust/outdent-methods/std/string/struct.String.html#implementations)\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b8376050127b3d1806ae88e6916ddaf330ca699c", "html_url": "https://github.com/rust-lang/rust/commit/b8376050127b3d1806ae88e6916ddaf330ca699c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b8376050127b3d1806ae88e6916ddaf330ca699c/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d814af95baec4f1819b03ec878c83b8171031c54", "url": "https://api.github.com/repos/rust-lang/rust/commits/d814af95baec4f1819b03ec878c83b8171031c54", "html_url": "https://github.com/rust-lang/rust/commit/d814af95baec4f1819b03ec878c83b8171031c54"}, {"sha": "542ab2daa6eb4b05a01403114783aa323315b416", "url": "https://api.github.com/repos/rust-lang/rust/commits/542ab2daa6eb4b05a01403114783aa323315b416", "html_url": "https://github.com/rust-lang/rust/commit/542ab2daa6eb4b05a01403114783aa323315b416"}], "stats": {"total": 39, "additions": 21, "deletions": 18}, "files": [{"sha": "6c908a21c39adacb097ccce682d9c2b5ec9f028a", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 10, "deletions": 18, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/b8376050127b3d1806ae88e6916ddaf330ca699c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/b8376050127b3d1806ae88e6916ddaf330ca699c/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=b8376050127b3d1806ae88e6916ddaf330ca699c", "patch": "@@ -152,10 +152,15 @@ h1.fqn > .in-band > a:hover {\n h2, h3, h4 {\n \tborder-bottom: 1px solid;\n }\n-h3.code-header, h4.code-header {\n+h3.code-header {\n+\tfont-size: 1.1em;\n+}\n+h4.code-header {\n \tfont-size: 1em;\n+}\n+h3.code-header, h4.code-header {\n \tfont-weight: 600;\n-\tborder: none;\n+\tborder-bottom-style: none;\n \tpadding: 0;\n \tmargin: 0;\n }\n@@ -174,12 +179,6 @@ h3.code-header, h4.code-header {\n \tmargin-bottom: 10px;\n \tposition: relative;\n }\n-.impl, .method.trait-impl,\n-.type.trait-impl,\n-.associatedconstant.trait-impl,\n-.associatedtype.trait-impl {\n-\tpadding-left: 15px;\n-}\n \n div.impl-items > div {\n \tpadding-left: 0;\n@@ -674,13 +673,6 @@ nav.sub {\n \tleft: -19px;\n }\n \n-.content .impl-items .method, .content .impl-items > .type, .impl-items > .associatedconstant,\n-.impl-items > .associatedtype, .content .impl-items details > summary > .type,\n-.impl-items details > summary > .associatedconstant,\n-.impl-items details > summary > .associatedtype {\n-\tmargin-left: 20px;\n-}\n-\n .content .impl-items .docblock, .content .impl-items .item-info {\n \tmargin-bottom: .6em;\n }\n@@ -751,7 +743,7 @@ a {\n .anchor {\n \tdisplay: none;\n \tposition: absolute;\n-\tleft: 0;\n+\tleft: -0.5em;\n \tbackground: none !important;\n }\n .anchor.field {\n@@ -1584,14 +1576,14 @@ details.rustdoc-toggle > summary.hideme::before {\n \n details.rustdoc-toggle > summary:not(.hideme)::before {\n \tposition: absolute;\n-\tleft: -23px;\n+\tleft: -24px;\n \ttop: 3px;\n }\n \n .impl-items > details.rustdoc-toggle > summary:not(.hideme)::before,\n .undocumented > details.rustdoc-toggle > summary:not(.hideme)::before {\n \tposition: absolute;\n-\tleft: -2px;\n+\tleft: -24px;\n }\n \n /* When a \"hideme\" summary is open and the \"Expand description\" or \"Show"}, {"sha": "424c312233b5d8e072629f30c018e8972a5fe4d6", "filename": "src/test/rustdoc-gui/anchor-navigable.goml", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/b8376050127b3d1806ae88e6916ddaf330ca699c/src%2Ftest%2Frustdoc-gui%2Fanchor-navigable.goml", "raw_url": "https://github.com/rust-lang/rust/raw/b8376050127b3d1806ae88e6916ddaf330ca699c/src%2Ftest%2Frustdoc-gui%2Fanchor-navigable.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-gui%2Fanchor-navigable.goml?ref=b8376050127b3d1806ae88e6916ddaf330ca699c", "patch": "@@ -0,0 +1,11 @@\n+// The `impl Foo` heading underneath `Implementations` has a \u00a7\n+// anchor to its left (used for linking to that heading). The anchor only shows\n+// up when hovering the `impl Foo`. This test ensures there's no gap between the\n+// anchor and the `impl Foo`. If there were a gap, this would cause an annoying\n+// problem: you hover `impl Foo` to see the anchor, then when you move your\n+// mouse to the left, the anchor disappears before you reach it.\n+goto: file://|DOC_PATH|/test_docs/struct.Foo.html\n+// We check that \".item-info\" is bigger than its content.\n+move-cursor-to: \".impl\"\n+assert-property: (\".impl > a.anchor\", {\"offsetWidth\": \"9\"})\n+assert-css: (\".impl > a.anchor\", {\"left\": \"-8px\"})"}]}