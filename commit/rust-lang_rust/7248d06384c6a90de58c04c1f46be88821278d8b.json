{"sha": "7248d06384c6a90de58c04c1f46be88821278d8b", "node_id": "C_kwDOAAsO6NoAKDcyNDhkMDYzODRjNmE5MGRlNThjMDRjMWY0NmJlODg4MjEyNzhkOGI", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-09-21T12:56:19Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-09-21T12:56:19Z"}, "message": "Auto merge of #9471 - jplatte:patch-1, r=xFrednet\n\nAdd matches! checking to nonstandard_macro_braces\n\nchangelog: Enhancement: [`nonstandard_macro_braces`]: Now includes `matches!()` in the default lint config\n  [#9471](https://github.com/rust-lang/rust-clippy/pull/9471)", "tree": {"sha": "c9208054dc09d46f8286dcbce8e8db7f54cb7392", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c9208054dc09d46f8286dcbce8e8db7f54cb7392"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7248d06384c6a90de58c04c1f46be88821278d8b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7248d06384c6a90de58c04c1f46be88821278d8b", "html_url": "https://github.com/rust-lang/rust/commit/7248d06384c6a90de58c04c1f46be88821278d8b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7248d06384c6a90de58c04c1f46be88821278d8b/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3956c9d3fe15bd55fdc25c094bf74fed88e8a5d2", "url": "https://api.github.com/repos/rust-lang/rust/commits/3956c9d3fe15bd55fdc25c094bf74fed88e8a5d2", "html_url": "https://github.com/rust-lang/rust/commit/3956c9d3fe15bd55fdc25c094bf74fed88e8a5d2"}, {"sha": "25584c0c6704623c8c5a3195b59bf068862f8bba", "url": "https://api.github.com/repos/rust-lang/rust/commits/25584c0c6704623c8c5a3195b59bf068862f8bba", "html_url": "https://github.com/rust-lang/rust/commit/25584c0c6704623c8c5a3195b59bf068862f8bba"}], "stats": {"total": 35, "additions": 26, "deletions": 9}, "files": [{"sha": "f86dfb6b8df8497d49352fe5076a744d2976ac6d", "filename": "clippy_lints/src/nonstandard_macro_braces.rs", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7248d06384c6a90de58c04c1f46be88821278d8b/clippy_lints%2Fsrc%2Fnonstandard_macro_braces.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7248d06384c6a90de58c04c1f46be88821278d8b/clippy_lints%2Fsrc%2Fnonstandard_macro_braces.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fnonstandard_macro_braces.rs?ref=7248d06384c6a90de58c04c1f46be88821278d8b", "patch": "@@ -184,6 +184,10 @@ fn macro_braces(conf: FxHashSet<MacroMatcher>) -> FxHashMap<String, (String, Str\n             name: \"vec\",\n             braces: (\"[\", \"]\"),\n         ),\n+        macro_matcher!(\n+            name: \"matches\",\n+            braces: (\"(\", \")\"),\n+        ),\n     ]\n     .into_iter()\n     .collect::<FxHashMap<_, _>>();"}, {"sha": "ed8161acc0efb3010d535434ef9fd32a74b7d33d", "filename": "tests/ui-toml/nonstandard_macro_braces/conf_nonstandard_macro_braces.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7248d06384c6a90de58c04c1f46be88821278d8b/tests%2Fui-toml%2Fnonstandard_macro_braces%2Fconf_nonstandard_macro_braces.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7248d06384c6a90de58c04c1f46be88821278d8b/tests%2Fui-toml%2Fnonstandard_macro_braces%2Fconf_nonstandard_macro_braces.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-toml%2Fnonstandard_macro_braces%2Fconf_nonstandard_macro_braces.rs?ref=7248d06384c6a90de58c04c1f46be88821278d8b", "patch": "@@ -42,6 +42,7 @@ macro_rules! printlnfoo {\n fn main() {\n     let _ = vec! {1, 2, 3};\n     let _ = format![\"ugh {} stop being such a good compiler\", \"hello\"];\n+    let _ = matches!{{}, ()};\n     let _ = quote!(let x = 1;);\n     let _ = quote::quote!(match match match);\n     let _ = test!(); // trigger when macro def is inside our own crate"}, {"sha": "d80ad49f3086d56d26abe5f5aecbad8450fa13d5", "filename": "tests/ui-toml/nonstandard_macro_braces/conf_nonstandard_macro_braces.stderr", "status": "modified", "additions": 21, "deletions": 9, "changes": 30, "blob_url": "https://github.com/rust-lang/rust/blob/7248d06384c6a90de58c04c1f46be88821278d8b/tests%2Fui-toml%2Fnonstandard_macro_braces%2Fconf_nonstandard_macro_braces.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/7248d06384c6a90de58c04c1f46be88821278d8b/tests%2Fui-toml%2Fnonstandard_macro_braces%2Fconf_nonstandard_macro_braces.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-toml%2Fnonstandard_macro_braces%2Fconf_nonstandard_macro_braces.stderr?ref=7248d06384c6a90de58c04c1f46be88821278d8b", "patch": "@@ -23,26 +23,38 @@ help: consider writing `format!(\"ugh () stop being such a good compiler\", \"hello\n LL |     let _ = format![\"ugh {} stop being such a good compiler\", \"hello\"];\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: use of irregular braces for `quote!` macro\n+error: use of irregular braces for `matches!` macro\n+  --> $DIR/conf_nonstandard_macro_braces.rs:45:13\n+   |\n+LL |     let _ = matches!{{}, ()};\n+   |             ^^^^^^^^^^^^^^^^\n+   |\n+help: consider writing `matches!((), ())`\n   --> $DIR/conf_nonstandard_macro_braces.rs:45:13\n    |\n+LL |     let _ = matches!{{}, ()};\n+   |             ^^^^^^^^^^^^^^^^\n+\n+error: use of irregular braces for `quote!` macro\n+  --> $DIR/conf_nonstandard_macro_braces.rs:46:13\n+   |\n LL |     let _ = quote!(let x = 1;);\n    |             ^^^^^^^^^^^^^^^^^^\n    |\n help: consider writing `quote! {let x = 1;}`\n-  --> $DIR/conf_nonstandard_macro_braces.rs:45:13\n+  --> $DIR/conf_nonstandard_macro_braces.rs:46:13\n    |\n LL |     let _ = quote!(let x = 1;);\n    |             ^^^^^^^^^^^^^^^^^^\n \n error: use of irregular braces for `quote::quote!` macro\n-  --> $DIR/conf_nonstandard_macro_braces.rs:46:13\n+  --> $DIR/conf_nonstandard_macro_braces.rs:47:13\n    |\n LL |     let _ = quote::quote!(match match match);\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n help: consider writing `quote::quote! {match match match}`\n-  --> $DIR/conf_nonstandard_macro_braces.rs:46:13\n+  --> $DIR/conf_nonstandard_macro_braces.rs:47:13\n    |\n LL |     let _ = quote::quote!(match match match);\n    |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -67,28 +79,28 @@ LL |     let _ = test!(); // trigger when macro def is inside our own crate\n    = note: this error originates in the macro `test` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: use of irregular braces for `type_pos!` macro\n-  --> $DIR/conf_nonstandard_macro_braces.rs:55:12\n+  --> $DIR/conf_nonstandard_macro_braces.rs:56:12\n    |\n LL |     let _: type_pos!(usize) = vec![];\n    |            ^^^^^^^^^^^^^^^^\n    |\n help: consider writing `type_pos![usize]`\n-  --> $DIR/conf_nonstandard_macro_braces.rs:55:12\n+  --> $DIR/conf_nonstandard_macro_braces.rs:56:12\n    |\n LL |     let _: type_pos!(usize) = vec![];\n    |            ^^^^^^^^^^^^^^^^\n \n error: use of irregular braces for `eprint!` macro\n-  --> $DIR/conf_nonstandard_macro_braces.rs:57:5\n+  --> $DIR/conf_nonstandard_macro_braces.rs:58:5\n    |\n LL |     eprint!(\"test if user config overrides defaults\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |\n help: consider writing `eprint![\"test if user config overrides defaults\"]`\n-  --> $DIR/conf_nonstandard_macro_braces.rs:57:5\n+  --> $DIR/conf_nonstandard_macro_braces.rs:58:5\n    |\n LL |     eprint!(\"test if user config overrides defaults\");\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n-error: aborting due to 7 previous errors\n+error: aborting due to 8 previous errors\n "}]}