{"sha": "96d4d491d025c48c324a11e41b427f27c4684ea4", "node_id": "C_kwDOAAsO6NoAKDk2ZDRkNDkxZDAyNWM0OGMzMjRhMTFlNDFiNDI3ZjI3YzQ2ODRlYTQ", "commit": {"author": {"name": "Yuki Okushi", "email": "huyuumi.dev+love@gmail.com", "date": "2023-01-14T03:04:35Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-14T03:04:35Z"}, "message": "Rollup merge of #106766 - GuillaumeGomez:rm-stripper-dead-code, r=notriddle\n\nRemove dead code in rustdoc stripper\n\nNo changes when this code is removed.\n\ncc `@aDotInTheVoid`\nr? `@notriddle`", "tree": {"sha": "910524c7d94c9416f12137a2f871116a2a548dcf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/910524c7d94c9416f12137a2f871116a2a548dcf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/96d4d491d025c48c324a11e41b427f27c4684ea4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjwhvDCRBK7hj4Ov3rIwAAerIIACXl1lM0MO1ypnbpdeH+QnaX\nFRekmIMcgnzA575YeKVxFEZhAgoUwqJXG80dimrpprfUemJ9tKIva6oAPpIqYko/\nbiMZiz2DO/5HRrleYmWDtaganTw5YEPfNfZWUALdPU/T3TSwgoX7OUtAdJDBBSCE\ngS1xMVg1z4KIJ4tU+X8MeVAjATbAu4noHR+8+jttpwvRFWmnrtQ684hTe0TBT7p1\nR1S9Q/OCNbsF6YFpMfFG9PMwv1HYb0bXFAITCneCjdHtfV+MU1mZmCtIq7AR13CF\nrQoFarIQQzVqcjDs20W44pr+A1L64t/vF0jqiCSDeqFHkP6xHAdFyut8hMnK/Ys=\n=WWln\n-----END PGP SIGNATURE-----\n", "payload": "tree 910524c7d94c9416f12137a2f871116a2a548dcf\nparent 9b502a4765b80f4ffaaf23ede63d8a823ad93272\nparent 0482a48dab150882363f65a9689d45707a396fc4\nauthor Yuki Okushi <huyuumi.dev+love@gmail.com> 1673665475 +0900\ncommitter GitHub <noreply@github.com> 1673665475 +0900\n\nRollup merge of #106766 - GuillaumeGomez:rm-stripper-dead-code, r=notriddle\n\nRemove dead code in rustdoc stripper\n\nNo changes when this code is removed.\n\ncc `@aDotInTheVoid`\nr? `@notriddle`\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/96d4d491d025c48c324a11e41b427f27c4684ea4", "html_url": "https://github.com/rust-lang/rust/commit/96d4d491d025c48c324a11e41b427f27c4684ea4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/96d4d491d025c48c324a11e41b427f27c4684ea4/comments", "author": null, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9b502a4765b80f4ffaaf23ede63d8a823ad93272", "url": "https://api.github.com/repos/rust-lang/rust/commits/9b502a4765b80f4ffaaf23ede63d8a823ad93272", "html_url": "https://github.com/rust-lang/rust/commit/9b502a4765b80f4ffaaf23ede63d8a823ad93272"}, {"sha": "0482a48dab150882363f65a9689d45707a396fc4", "url": "https://api.github.com/repos/rust-lang/rust/commits/0482a48dab150882363f65a9689d45707a396fc4", "html_url": "https://github.com/rust-lang/rust/commit/0482a48dab150882363f65a9689d45707a396fc4"}], "stats": {"total": 12, "additions": 1, "deletions": 11}, "files": [{"sha": "048ed2646233c45284f6a029b4c37dcf548a9c5c", "filename": "src/librustdoc/passes/stripper.rs", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/96d4d491d025c48c324a11e41b427f27c4684ea4/src%2Flibrustdoc%2Fpasses%2Fstripper.rs", "raw_url": "https://github.com/rust-lang/rust/raw/96d4d491d025c48c324a11e41b427f27c4684ea4/src%2Flibrustdoc%2Fpasses%2Fstripper.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fpasses%2Fstripper.rs?ref=96d4d491d025c48c324a11e41b427f27c4684ea4", "patch": "@@ -97,17 +97,7 @@ impl<'a, 'tcx> DocFolder for Stripper<'a, 'tcx> {\n             }\n \n             // handled in the `strip-priv-imports` pass\n-            clean::ExternCrateItem { .. } => {}\n-            clean::ImportItem(ref imp) => {\n-                // Because json doesn't inline imports from private modules, we need to mark\n-                // the imported item as retained so it's impls won't be stripped.\n-                //\n-                // FIXME: Is it necessary to check for json output here: See\n-                // https://github.com/rust-lang/rust/pull/100325#discussion_r941495215\n-                if let Some(did) = imp.source.did && self.is_json_output {\n-                    self.retained.insert(did.into());\n-                }\n-            }\n+            clean::ExternCrateItem { .. } | clean::ImportItem(_) => {}\n \n             clean::ImplItem(..) => {}\n "}]}