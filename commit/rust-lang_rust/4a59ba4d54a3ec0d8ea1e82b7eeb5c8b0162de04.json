{"sha": "4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04", "node_id": "C_kwDOAAsO6NoAKDRhNTliYTRkNTRhM2VjMGQ4ZWExZTgyYjdlZWI1YzhiMDE2MmRlMDQ", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-05-12T17:37:05Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2023-05-12T17:37:05Z"}, "message": "Auto merge of #111396 - vlad20012:reduce-Borrows-dataflow-bitset-size, r=cjgillot\n\nReduce BitSet size used in `Borrows` dataflow analysis\n\nIt looks like it is not needed to multiply the number of borrows by 2. Bits greater than `self.borrow_set.len()` are never set in this bitset. This should decrease the memory usage by an epsilon.", "tree": {"sha": "e56d0ba802f3337c018de55d788ad77a87d063ba", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e56d0ba802f3337c018de55d788ad77a87d063ba"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04", "html_url": "https://github.com/rust-lang/rust/commit/4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "077fc26f0acfa54e9c580534616c17ffc279a9d4", "url": "https://api.github.com/repos/rust-lang/rust/commits/077fc26f0acfa54e9c580534616c17ffc279a9d4", "html_url": "https://github.com/rust-lang/rust/commit/077fc26f0acfa54e9c580534616c17ffc279a9d4"}, {"sha": "6989246645ca911bebed10bd0d4b91a9f41406a8", "url": "https://api.github.com/repos/rust-lang/rust/commits/6989246645ca911bebed10bd0d4b91a9f41406a8", "html_url": "https://github.com/rust-lang/rust/commit/6989246645ca911bebed10bd0d4b91a9f41406a8"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "167f245361a2294610c9109a75c65db53e56be17", "filename": "compiler/rustc_borrowck/src/dataflow.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04/compiler%2Frustc_borrowck%2Fsrc%2Fdataflow.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04/compiler%2Frustc_borrowck%2Fsrc%2Fdataflow.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_borrowck%2Fsrc%2Fdataflow.rs?ref=4a59ba4d54a3ec0d8ea1e82b7eeb5c8b0162de04", "patch": "@@ -328,7 +328,7 @@ impl<'tcx> rustc_mir_dataflow::AnalysisDomain<'tcx> for Borrows<'_, 'tcx> {\n \n     fn bottom_value(&self, _: &mir::Body<'tcx>) -> Self::Domain {\n         // bottom = nothing is reserved or activated yet;\n-        BitSet::new_empty(self.borrow_set.len() * 2)\n+        BitSet::new_empty(self.borrow_set.len())\n     }\n \n     fn initialize_start_block(&self, _: &mir::Body<'tcx>, _: &mut Self::Domain) {"}]}