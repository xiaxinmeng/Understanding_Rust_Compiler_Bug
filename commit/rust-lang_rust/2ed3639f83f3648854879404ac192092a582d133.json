{"sha": "2ed3639f83f3648854879404ac192092a582d133", "node_id": "C_kwDOAAsO6NoAKDJlZDM2MzlmODNmMzY0ODg1NDg3OTQwNGFjMTkyMDkyYTU4MmQxMzM", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2023-01-25T21:19:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2023-01-25T21:19:53Z"}, "message": "Rollup merge of #107244 - notriddle:notriddle/primitive-reference-link, r=GuillaumeGomez\n\nrustdoc: rearrange HTML in primitive reference links\n\nThis patch avoids hard-to-click single character links by making the generic part of the link:\n\nBefore: <a href=\"#\">&</a>T\n\nAfter: <a href=\"#\">&T</a>", "tree": {"sha": "f53674088224f5fbe84c65a5d2cb6a21a8457855", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f53674088224f5fbe84c65a5d2cb6a21a8457855"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/2ed3639f83f3648854879404ac192092a582d133", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJj0Zz5CRBK7hj4Ov3rIwAAnXkIAI7hYnG65pWgY7MV5reYncLv\n8hGJBGlES2M6uLF5nS9twEp3Y9D+vxDephJZ2KrUvKPVo8wX9IV3BnP/Q6CU2jNo\nlXQiKouVB72K8xmXM58rHpldoPiWIy2MFxKNp/yg90diN3KH1v36xU1iRN+n9xPD\nhnoFf42CXCTU6GU7w0fclgQHMfCy6uPNHjRBEfAi/paQFVRiMoUz1WwmY/O2dxQH\n4ccKeM6wrGUhOjT3RmdCjKrmKS/n6oajwsb4ZOsjqvEat+EsJXmjYzbLlaFH+9vF\nKox08Qf0cibpVgc7Ebswghior2CQ0KMKfcUhfvQJKx4vP8MMMh3juuOV7L6rKsc=\n=03kv\n-----END PGP SIGNATURE-----\n", "payload": "tree f53674088224f5fbe84c65a5d2cb6a21a8457855\nparent b7baa9f2175aea93cad2c7dc0e17f5938bdbda13\nparent e65b36110f943118b7e50c4e39e26ad1f07d8552\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1674681593 +0100\ncommitter GitHub <noreply@github.com> 1674681593 +0100\n\nRollup merge of #107244 - notriddle:notriddle/primitive-reference-link, r=GuillaumeGomez\n\nrustdoc: rearrange HTML in primitive reference links\n\nThis patch avoids hard-to-click single character links by making the generic part of the link:\n\nBefore: <a href=\"#\">&</a>T\n\nAfter: <a href=\"#\">&T</a>\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/2ed3639f83f3648854879404ac192092a582d133", "html_url": "https://github.com/rust-lang/rust/commit/2ed3639f83f3648854879404ac192092a582d133", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/2ed3639f83f3648854879404ac192092a582d133/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b7baa9f2175aea93cad2c7dc0e17f5938bdbda13", "url": "https://api.github.com/repos/rust-lang/rust/commits/b7baa9f2175aea93cad2c7dc0e17f5938bdbda13", "html_url": "https://github.com/rust-lang/rust/commit/b7baa9f2175aea93cad2c7dc0e17f5938bdbda13"}, {"sha": "e65b36110f943118b7e50c4e39e26ad1f07d8552", "url": "https://api.github.com/repos/rust-lang/rust/commits/e65b36110f943118b7e50c4e39e26ad1f07d8552", "html_url": "https://github.com/rust-lang/rust/commit/e65b36110f943118b7e50c4e39e26ad1f07d8552"}], "stats": {"total": 18, "additions": 6, "deletions": 12}, "files": [{"sha": "33404a76835975da4e656f3f8bff6f5952116202", "filename": "src/librustdoc/html/format.rs", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/2ed3639f83f3648854879404ac192092a582d133/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/2ed3639f83f3648854879404ac192092a582d133/src%2Flibrustdoc%2Fhtml%2Fformat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fformat.rs?ref=2ed3639f83f3648854879404ac192092a582d133", "patch": "@@ -1064,14 +1064,8 @@ fn fmt_type<'cx>(\n                     fmt_type(ty, f, use_absolute, cx)?;\n                     write!(f, \")\")\n                 }\n-                clean::Generic(..) => {\n-                    primitive_link(\n-                        f,\n-                        PrimitiveType::Reference,\n-                        &format!(\"{}{}{}\", amp, lt, m),\n-                        cx,\n-                    )?;\n-                    fmt_type(ty, f, use_absolute, cx)\n+                clean::Generic(name) => {\n+                    primitive_link(f, PrimitiveType::Reference, &format!(\"{amp}{lt}{m}{name}\"), cx)\n                 }\n                 _ => {\n                     write!(f, \"{}{}{}\", amp, lt, m)?;"}, {"sha": "eeb22878f3c63f7c6f4fd1da7e361f5a8f2bcfdb", "filename": "tests/rustdoc/whitespace-after-where-clause.enum.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum.html", "raw_url": "https://github.com/rust-lang/rust/raw/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum.html?ref=2ed3639f83f3648854879404ac192092a582d133", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub enum Cow&lt;'a, B&gt;<span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + ?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a,</span>{\n-    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B),\n+    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>),\n     Whatever(<a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>),\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "c8037c2a8df5a946527d14945c30514be80c0418", "filename": "tests/rustdoc/whitespace-after-where-clause.enum2.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html", "raw_url": "https://github.com/rust-lang/rust/raw/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.enum2.html?ref=2ed3639f83f3648854879404ac192092a582d133", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub enum Cow2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n-    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B),\n+    Borrowed(<a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>),\n     Whatever(<a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>),\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "5892270b2f9309aa04495227d0f921c6d539fbbc", "filename": "tests/rustdoc/whitespace-after-where-clause.struct.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct.html", "raw_url": "https://github.com/rust-lang/rust/raw/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct.html?ref=2ed3639f83f3648854879404ac192092a582d133", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub struct Struct&lt;'a, B&gt;<span class=\"where fmt-newline\">where<br />&#160;&#160;&#160;&#160;B: <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + ?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + 'a,</span>{\n-    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B,\n+    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>,\n     pub b: <a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>,\n }</code></pre></div>\n\\ No newline at end of file"}, {"sha": "d3952b0c56699eecd68e68005bb243b737d82285", "filename": "tests/rustdoc/whitespace-after-where-clause.struct2.html", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html", "raw_url": "https://github.com/rust-lang/rust/raw/2ed3639f83f3648854879404ac192092a582d133/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc%2Fwhitespace-after-where-clause.struct2.html?ref=2ed3639f83f3648854879404ac192092a582d133", "patch": "@@ -1,4 +1,4 @@\n <div class=\"item-decl\"><pre class=\"rust\"><code>pub struct Struct2&lt;'a, B:&#160;?<a class=\"trait\" href=\"{{channel}}/core/marker/trait.Sized.html\" title=\"trait core::marker::Sized\">Sized</a> + <a class=\"trait\" href=\"trait.ToOwned.html\" title=\"trait foo::ToOwned\">ToOwned</a>&lt;dyn <a class=\"trait\" href=\"{{channel}}/core/clone/trait.Clone.html\" title=\"trait core::clone::Clone\">Clone</a>&gt; + 'a&gt; {\n-    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a </a>B,\n+    pub a: <a class=\"primitive\" href=\"{{channel}}/std/primitive.reference.html\">&amp;'a B</a>,\n     pub b: <a class=\"primitive\" href=\"{{channel}}/std/primitive.u32.html\">u32</a>,\n }</code></pre></div>\n\\ No newline at end of file"}]}