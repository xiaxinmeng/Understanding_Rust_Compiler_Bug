{"sha": "d904a0114008859c79840e7a6f5e24390131db0b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ5MDRhMDExNDAwODg1OWM3OTg0MGU3YTZmNWUyNDM5MDEzMWRiMGI=", "commit": {"author": {"name": "Andre Bogus", "email": "bogusandre@gmail.com", "date": "2017-02-14T16:30:55Z"}, "committer": {"name": "Andre Bogus", "email": "bogusandre@gmail.com", "date": "2017-02-14T16:30:55Z"}, "message": "fix windows tests\n\nWindows has a different error message than POSIX, so the ui tests fail for the clippy-config-fail tests.\nThis commit splits those tests up in target-os specific subdirectories and extends compile-test.rs to\nrun either of them based on the target os. Here's hope we'll get a green appveyor build.", "tree": {"sha": "c810b8fa8be2d3babe73297332153d1606bed948", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c810b8fa8be2d3babe73297332153d1606bed948"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d904a0114008859c79840e7a6f5e24390131db0b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d904a0114008859c79840e7a6f5e24390131db0b", "html_url": "https://github.com/rust-lang/rust/commit/d904a0114008859c79840e7a6f5e24390131db0b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d904a0114008859c79840e7a6f5e24390131db0b/comments", "author": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "committer": {"login": "llogiq", "id": 4200835, "node_id": "MDQ6VXNlcjQyMDA4MzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4200835?v=4", "gravatar_id": "", "url": "https://api.github.com/users/llogiq", "html_url": "https://github.com/llogiq", "followers_url": "https://api.github.com/users/llogiq/followers", "following_url": "https://api.github.com/users/llogiq/following{/other_user}", "gists_url": "https://api.github.com/users/llogiq/gists{/gist_id}", "starred_url": "https://api.github.com/users/llogiq/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/llogiq/subscriptions", "organizations_url": "https://api.github.com/users/llogiq/orgs", "repos_url": "https://api.github.com/users/llogiq/repos", "events_url": "https://api.github.com/users/llogiq/events{/privacy}", "received_events_url": "https://api.github.com/users/llogiq/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9a7597d5af4d882ddc92bf568a1c7ba582bb4b55", "url": "https://api.github.com/repos/rust-lang/rust/commits/9a7597d5af4d882ddc92bf568a1c7ba582bb4b55", "html_url": "https://github.com/rust-lang/rust/commit/9a7597d5af4d882ddc92bf568a1c7ba582bb4b55"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "e5942f523abef6ef49a1d3a3a2366c450b0d7d4c", "filename": "tests/compile-test.rs", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fcompile-test.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fcompile-test.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcompile-test.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -29,4 +29,6 @@ fn compile_test() {\n     prepare_env();\n     run_mode(\"run-pass\", \"run-pass\");\n     run_mode(\"ui\", \"ui\");\n+    #[cfg(target_os = \"windows\")] run_mode(\"ui-windows\", \"ui\");\n+    #[cfg(not(target_os = \"windows\"))] run_mode(\"ui-posix\", \"ui\");\n }"}, {"sha": "b5ea6d96ef58a5be9dafcb54b158bc3b4af272d8", "filename": "tests/ui-posix/conf_bad_toml.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_toml.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_toml.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_toml.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_bad_toml.rs"}, {"sha": "7920bd35589da9fe21b8bd22f98431949d299fbe", "filename": "tests/ui-posix/conf_bad_toml.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_toml.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_toml.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_toml.stderr?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_bad_toml.stderr"}, {"sha": "823e01a33b96172e13855c6c023599f2852e71f9", "filename": "tests/ui-posix/conf_bad_toml.toml", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_toml.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_toml.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_toml.toml?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_bad_toml.toml"}, {"sha": "8dc3e4ec2e675c61c5c8bffa38b4521db5cdb4a6", "filename": "tests/ui-posix/conf_bad_type.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_type.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_bad_type.rs"}, {"sha": "7920bd35589da9fe21b8bd22f98431949d299fbe", "filename": "tests/ui-posix/conf_bad_type.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_type.stderr?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_bad_type.stderr"}, {"sha": "168675394d7f45124940fcfa3433aab378c1fbd8", "filename": "tests/ui-posix/conf_bad_type.toml", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_type.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_bad_type.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_bad_type.toml?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_bad_type.toml"}, {"sha": "e287f7e02af932cc5f8ba849aaf8f18c89a9fc7b", "filename": "tests/ui-posix/conf_non_existant.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_non_existant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_non_existant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_non_existant.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_non_existant.rs"}, {"sha": "7920bd35589da9fe21b8bd22f98431949d299fbe", "filename": "tests/ui-posix/conf_non_existant.stderr", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_non_existant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-posix%2Fconf_non_existant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-posix%2Fconf_non_existant.stderr?ref=d904a0114008859c79840e7a6f5e24390131db0b", "previous_filename": "tests/ui/conf_non_existant.stderr"}, {"sha": "b5ea6d96ef58a5be9dafcb54b158bc3b4af272d8", "filename": "tests/ui-windows/conf_bad_toml.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_toml.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_toml.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_toml.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,6 @@\n+// error-pattern: error reading Clippy's configuration file\n+\n+#![feature(plugin)]\n+#![plugin(clippy(conf_file=\"./tests/compile-fail/conf_bad_toml.toml\"))]\n+\n+fn main() {}"}, {"sha": "f21ae524f5eaafee1d82f7a66edbcb23a42594e8", "filename": "tests/ui-windows/conf_bad_toml.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_toml.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_toml.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_toml.stderr?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,4 @@\n+error: error reading Clippy's configuration file: The system cannot find the file specified. (os error 2)\n+\n+error: aborting due to previous error\n+"}, {"sha": "823e01a33b96172e13855c6c023599f2852e71f9", "filename": "tests/ui-windows/conf_bad_toml.toml", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_toml.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_toml.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_toml.toml?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,2 @@\n+fn this_is_obviously(not: a, toml: file) {\n+}"}, {"sha": "8dc3e4ec2e675c61c5c8bffa38b4521db5cdb4a6", "filename": "tests/ui-windows/conf_bad_type.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_type.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_type.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_type.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,6 @@\n+// error-pattern: error reading Clippy's configuration file: `blacklisted-names` is expected to be a `Vec < String >` but is a `integer`\n+\n+#![feature(plugin)]\n+#![plugin(clippy(conf_file=\"./tests/compile-fail/conf_bad_type.toml\"))]\n+\n+fn main() {}"}, {"sha": "f21ae524f5eaafee1d82f7a66edbcb23a42594e8", "filename": "tests/ui-windows/conf_bad_type.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_type.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_type.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_type.stderr?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,4 @@\n+error: error reading Clippy's configuration file: The system cannot find the file specified. (os error 2)\n+\n+error: aborting due to previous error\n+"}, {"sha": "168675394d7f45124940fcfa3433aab378c1fbd8", "filename": "tests/ui-windows/conf_bad_type.toml", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_type.toml", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_bad_type.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_bad_type.toml?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1 @@\n+blacklisted-names = 42"}, {"sha": "e287f7e02af932cc5f8ba849aaf8f18c89a9fc7b", "filename": "tests/ui-windows/conf_non_existant.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_non_existant.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_non_existant.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_non_existant.rs?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,6 @@\n+// error-pattern: error reading Clippy's configuration file\n+\n+#![feature(plugin)]\n+#![plugin(clippy(conf_file=\"./tests/auxiliary/non_existant_conf.toml\"))]\n+\n+fn main() {}"}, {"sha": "f21ae524f5eaafee1d82f7a66edbcb23a42594e8", "filename": "tests/ui-windows/conf_non_existant.stderr", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_non_existant.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d904a0114008859c79840e7a6f5e24390131db0b/tests%2Fui-windows%2Fconf_non_existant.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui-windows%2Fconf_non_existant.stderr?ref=d904a0114008859c79840e7a6f5e24390131db0b", "patch": "@@ -0,0 +1,4 @@\n+error: error reading Clippy's configuration file: The system cannot find the file specified. (os error 2)\n+\n+error: aborting due to previous error\n+"}]}