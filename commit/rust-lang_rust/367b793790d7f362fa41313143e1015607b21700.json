{"sha": "367b793790d7f362fa41313143e1015607b21700", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM2N2I3OTM3OTBkN2YzNjJmYTQxMzEzMTQzZTEwMTU2MDdiMjE3MDA=", "commit": {"author": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2019-05-10T22:10:15Z"}, "committer": {"name": "Josh Stone", "email": "jistone@redhat.com", "date": "2019-08-25T16:47:50Z"}, "message": "Force #[unwind(aborts)] in test/codegen/c-variadic.rs", "tree": {"sha": "8a2ccca4049c458afdd1252069fa31edad0a1c96", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8a2ccca4049c458afdd1252069fa31edad0a1c96"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/367b793790d7f362fa41313143e1015607b21700", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/367b793790d7f362fa41313143e1015607b21700", "html_url": "https://github.com/rust-lang/rust/commit/367b793790d7f362fa41313143e1015607b21700", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/367b793790d7f362fa41313143e1015607b21700/comments", "author": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuviper", "id": 36186, "node_id": "MDQ6VXNlcjM2MTg2", "avatar_url": "https://avatars.githubusercontent.com/u/36186?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuviper", "html_url": "https://github.com/cuviper", "followers_url": "https://api.github.com/users/cuviper/followers", "following_url": "https://api.github.com/users/cuviper/following{/other_user}", "gists_url": "https://api.github.com/users/cuviper/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuviper/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuviper/subscriptions", "organizations_url": "https://api.github.com/users/cuviper/orgs", "repos_url": "https://api.github.com/users/cuviper/repos", "events_url": "https://api.github.com/users/cuviper/events{/privacy}", "received_events_url": "https://api.github.com/users/cuviper/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d810e77f4ed7a76aaac71b6430b7bfb049b3649c", "url": "https://api.github.com/repos/rust-lang/rust/commits/d810e77f4ed7a76aaac71b6430b7bfb049b3649c", "html_url": "https://github.com/rust-lang/rust/commit/d810e77f4ed7a76aaac71b6430b7bfb049b3649c"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "bb90a9653f5734fd98e4d07dea326f6a4a979082", "filename": "src/test/codegen/c-variadic.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/367b793790d7f362fa41313143e1015607b21700/src%2Ftest%2Fcodegen%2Fc-variadic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/367b793790d7f362fa41313143e1015607b21700/src%2Ftest%2Fcodegen%2Fc-variadic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcodegen%2Fc-variadic.rs?ref=367b793790d7f362fa41313143e1015607b21700", "patch": "@@ -2,6 +2,7 @@\n \n #![crate_type = \"lib\"]\n #![feature(c_variadic)]\n+#![feature(unwind_attributes)]\n #![no_std]\n use core::ffi::VaList;\n \n@@ -10,6 +11,7 @@ extern \"C\" {\n     fn foreign_c_variadic_1(_: VaList, ...);\n }\n \n+#[unwind(aborts)] // FIXME(#58794)\n pub unsafe extern \"C\" fn use_foreign_c_variadic_0() {\n     // Ensure that we correctly call foreign C-variadic functions.\n     // CHECK: invoke void (i32, ...) @foreign_c_variadic_0(i32 0)\n@@ -24,20 +26,24 @@ pub unsafe extern \"C\" fn use_foreign_c_variadic_0() {\n \n // Ensure that we do not remove the `va_list` passed to the foreign function when\n // removing the \"spoofed\" `VaListImpl` that is used by Rust defined C-variadics.\n+#[unwind(aborts)] // FIXME(#58794)\n pub unsafe extern \"C\" fn use_foreign_c_variadic_1_0(ap: VaList) {\n     // CHECK: invoke void ({{.*}}*, ...) @foreign_c_variadic_1({{.*}} %ap)\n     foreign_c_variadic_1(ap);\n }\n \n+#[unwind(aborts)] // FIXME(#58794)\n pub unsafe extern \"C\" fn use_foreign_c_variadic_1_1(ap: VaList) {\n     // CHECK: invoke void ({{.*}}*, ...) @foreign_c_variadic_1({{.*}} %ap, i32 42)\n     foreign_c_variadic_1(ap, 42i32);\n }\n+#[unwind(aborts)] // FIXME(#58794)\n pub unsafe extern \"C\" fn use_foreign_c_variadic_1_2(ap: VaList) {\n     // CHECK: invoke void ({{.*}}*, ...) @foreign_c_variadic_1({{.*}} %ap, i32 2, i32 42)\n     foreign_c_variadic_1(ap, 2i32, 42i32);\n }\n \n+#[unwind(aborts)] // FIXME(#58794)\n pub unsafe extern \"C\" fn use_foreign_c_variadic_1_3(ap: VaList) {\n     // CHECK: invoke void ({{.*}}*, ...) @foreign_c_variadic_1({{.*}} %ap, i32 2, i32 42, i32 0)\n     foreign_c_variadic_1(ap, 2i32, 42i32, 0i32);"}]}