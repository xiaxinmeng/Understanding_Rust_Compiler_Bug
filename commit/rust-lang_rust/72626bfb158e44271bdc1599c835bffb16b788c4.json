{"sha": "72626bfb158e44271bdc1599c835bffb16b788c4", "node_id": "C_kwDOAAsO6NoAKDcyNjI2YmZiMTU4ZTQ0MjcxYmRjMTU5OWM4MzViZmZiMTZiNzg4YzQ", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2021-10-13T12:55:18Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-13T12:55:18Z"}, "message": "Rollup merge of #89828 - rusticstuff:overflow-check-options-take-two, r=Mark-Simulacrum\n\nFix config.toml overflow-checks options\n\nThis a follow-up PR to #87784.\n\nImprovements:\n* Add missing entries for overflow-checks to config.toml.example.\n* Add --enable-overflow-checks-std option to configure script.\n* Make rust.overflow-checks-stdoption default to rust.overflow-checks.\n\nAlso adds the missing  `--enable-debug-assertions-std `option to configure script.\n\nr? ```@Mark-Simulacrum```\ncc ```@jyn514```", "tree": {"sha": "941aaf0e56a28374be30ac68a352cebdc8381ecf", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/941aaf0e56a28374be30ac68a352cebdc8381ecf"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/72626bfb158e44271bdc1599c835bffb16b788c4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhZtc2CRBK7hj4Ov3rIwAAZ6sIAAxPSYJUyg2hqeKP+cI8N+iQ\n8Qhnmkl7xAPRarYKLCpunwMHSZAQrBzaB8E4J4lrwqyZvEA/rDnThaKVYqoMda0Z\nc1l4H7FDy+f+P4sUl/65zyNJe43C5G9ppODeETqTijLwYMOhoDpvWIKUSFyfvE2P\nbVKag9BJtYKfq0Z4wzgBISq2vjWus1mkWUAKNORv9gWbmgRi9SdkfN06oO0sIGNI\nDq/HeCpYYDYnvtL9t7XDr1qtTrRJsMzAa20vRP7PAfbx6DPbsJETughusUROVAp6\nrQL2IpMGxj9PnZI/5ku3zFR9U/YiSqy1/qAy7zUfUxTKMd12PrvGWjmK0RFWJNI=\n=h8WT\n-----END PGP SIGNATURE-----\n", "payload": "tree 941aaf0e56a28374be30ac68a352cebdc8381ecf\nparent 6eb0a5f0e88757cb5dc8733dfc9ae47219401201\nparent 905ed5fa89d613f7d77509f49f47ebbd85469063\nauthor Yuki Okushi <jtitor@2k36.org> 1634129718 +0900\ncommitter GitHub <noreply@github.com> 1634129718 +0900\n\nRollup merge of #89828 - rusticstuff:overflow-check-options-take-two, r=Mark-Simulacrum\n\nFix config.toml overflow-checks options\n\nThis a follow-up PR to #87784.\n\nImprovements:\n* Add missing entries for overflow-checks to config.toml.example.\n* Add --enable-overflow-checks-std option to configure script.\n* Make rust.overflow-checks-stdoption default to rust.overflow-checks.\n\nAlso adds the missing  `--enable-debug-assertions-std `option to configure script.\n\nr? ```@Mark-Simulacrum```\ncc ```@jyn514```\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/72626bfb158e44271bdc1599c835bffb16b788c4", "html_url": "https://github.com/rust-lang/rust/commit/72626bfb158e44271bdc1599c835bffb16b788c4", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/72626bfb158e44271bdc1599c835bffb16b788c4/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6eb0a5f0e88757cb5dc8733dfc9ae47219401201", "url": "https://api.github.com/repos/rust-lang/rust/commits/6eb0a5f0e88757cb5dc8733dfc9ae47219401201", "html_url": "https://github.com/rust-lang/rust/commit/6eb0a5f0e88757cb5dc8733dfc9ae47219401201"}, {"sha": "905ed5fa89d613f7d77509f49f47ebbd85469063", "url": "https://api.github.com/repos/rust-lang/rust/commits/905ed5fa89d613f7d77509f49f47ebbd85469063", "html_url": "https://github.com/rust-lang/rust/commit/905ed5fa89d613f7d77509f49f47ebbd85469063"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "b63ff14d7d38d4e6826882a821fe1af4f248d754", "filename": "config.toml.example", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/72626bfb158e44271bdc1599c835bffb16b788c4/config.toml.example", "raw_url": "https://github.com/rust-lang/rust/raw/72626bfb158e44271bdc1599c835bffb16b788c4/config.toml.example", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/config.toml.example?ref=72626bfb158e44271bdc1599c835bffb16b788c4", "patch": "@@ -423,6 +423,18 @@ changelog-seen = 2\n # set this value to `true`.\n #debug-logging = rust.debug-assertions (boolean)\n \n+# Whether or not overflow checks are enabled for the compiler and standard\n+# library.\n+#\n+# Defaults to rust.debug value\n+#overflow-checks = rust.debug (boolean)\n+\n+# Whether or not overflow checks are enabled for the standard library.\n+# Overrides the `overflow-checks` option, if defined.\n+#\n+# Defaults to rust.overflow-checks value\n+#overflow-checks-std = rust.overflow-checks (boolean)\n+\n # Debuginfo level for most of Rust code, corresponds to the `-C debuginfo=N` option of `rustc`.\n # `0` - no debug info\n # `1` - line tables only - sufficient to generate backtraces that include line"}, {"sha": "7818b8b7d515d6d76e26a9feac184f230b331904", "filename": "src/bootstrap/config.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/72626bfb158e44271bdc1599c835bffb16b788c4/src%2Fbootstrap%2Fconfig.rs", "raw_url": "https://github.com/rust-lang/rust/raw/72626bfb158e44271bdc1599c835bffb16b788c4/src%2Fbootstrap%2Fconfig.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfig.rs?ref=72626bfb158e44271bdc1599c835bffb16b788c4", "patch": "@@ -982,7 +982,8 @@ impl Config {\n         config.rust_debug_assertions_std =\n             debug_assertions_std.unwrap_or(config.rust_debug_assertions);\n         config.rust_overflow_checks = overflow_checks.unwrap_or(default);\n-        config.rust_overflow_checks_std = overflow_checks_std.unwrap_or(default);\n+        config.rust_overflow_checks_std =\n+            overflow_checks_std.unwrap_or(config.rust_overflow_checks);\n \n         config.rust_debug_logging = debug_logging.unwrap_or(config.rust_debug_assertions);\n "}, {"sha": "94424cb4548fa5d0f5d8ef21ed4ef9291ef90550", "filename": "src/bootstrap/configure.py", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/72626bfb158e44271bdc1599c835bffb16b788c4/src%2Fbootstrap%2Fconfigure.py", "raw_url": "https://github.com/rust-lang/rust/raw/72626bfb158e44271bdc1599c835bffb16b788c4/src%2Fbootstrap%2Fconfigure.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fbootstrap%2Fconfigure.py?ref=72626bfb158e44271bdc1599c835bffb16b788c4", "patch": "@@ -75,7 +75,9 @@ def v(*args):\n o(\"llvm-assertions\", \"llvm.assertions\", \"build LLVM with assertions\")\n o(\"llvm-plugins\", \"llvm.plugins\", \"build LLVM with plugin interface\")\n o(\"debug-assertions\", \"rust.debug-assertions\", \"build with debugging assertions\")\n+o(\"debug-assertions-std\", \"rust.debug-assertions-std\", \"build the standard library with debugging assertions\")\n o(\"overflow-checks\", \"rust.overflow-checks\", \"build with overflow checks\")\n+o(\"overflow-checks-std\", \"rust.overflow-checks-std\", \"build the standard library with overflow checks\")\n o(\"llvm-release-debuginfo\", \"llvm.release-debuginfo\", \"build LLVM with debugger metadata\")\n v(\"debuginfo-level\", \"rust.debuginfo-level\", \"debuginfo level for Rust code\")\n v(\"debuginfo-level-rustc\", \"rust.debuginfo-level-rustc\", \"debuginfo level for the compiler\")"}]}