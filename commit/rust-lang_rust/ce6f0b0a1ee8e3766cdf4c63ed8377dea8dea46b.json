{"sha": "ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNlNmYwYjBhMWVlOGUzNzY2Y2RmNGM2M2VkODM3N2RlYThkZWE0NmI=", "commit": {"author": {"name": "Mazdak Farrokhzad", "email": "twingoow@gmail.com", "date": "2019-12-22T18:46:16Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2019-12-22T18:46:16Z"}, "message": "Rollup merge of #67519 - Mark-Simulacrum:any-unsafe, r=Centril\n\nDocument why Any is not an unsafe trait\n\nThe added documentation is not public (i.e., not in a doc comment) but that seems appropriate for this sort of low-level detail.\n\nFixes #62303", "tree": {"sha": "ffb43132e5dae149774e9fc10d42dcab8c16c89a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ffb43132e5dae149774e9fc10d42dcab8c16c89a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJd/7n4CRBK7hj4Ov3rIwAAdHIIAIID7qx0Ujqyfb1mnuogEWKQ\nrib7a1k71pwMy0F9n/zXx3AJcd/b7EDh9xxmvcqC8iUB2noHHsqKye6AFlakULq1\n9Udlwcltf8kktGjNpTUNOF4nwttcdP+gNmClioZuxqpGa+w5swAS/x67b/JD0V/z\n4iPlfGkpd+DUJskhOllKrkYmuZrfxh1Ugo2h5i9NROGqTWjuayzfBMvD5a3aZ9K4\nRkJBFcMEaC2wnjvPB3jZYIAxozVqHC2Xbxi58EX+BzerdkZhvQQQl8hubmuj9GRY\nSdpxAswKYMF/TkpenY3ylIhZ/TOAYevFCBDXMt6+39w7u1W/UJijzYUCTzhHIb4=\n=pf7N\n-----END PGP SIGNATURE-----\n", "payload": "tree ffb43132e5dae149774e9fc10d42dcab8c16c89a\nparent 63d480a07fd447303321d77a285e1024a1276d43\nparent 687891309659fd2942f4c8bc8f9fd2feaf85d864\nauthor Mazdak Farrokhzad <twingoow@gmail.com> 1577040376 +0100\ncommitter GitHub <noreply@github.com> 1577040376 +0100\n\nRollup merge of #67519 - Mark-Simulacrum:any-unsafe, r=Centril\n\nDocument why Any is not an unsafe trait\n\nThe added documentation is not public (i.e., not in a doc comment) but that seems appropriate for this sort of low-level detail.\n\nFixes #62303\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b", "html_url": "https://github.com/rust-lang/rust/commit/ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b/comments", "author": {"login": "Centril", "id": 855702, "node_id": "MDQ6VXNlcjg1NTcwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/855702?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Centril", "html_url": "https://github.com/Centril", "followers_url": "https://api.github.com/users/Centril/followers", "following_url": "https://api.github.com/users/Centril/following{/other_user}", "gists_url": "https://api.github.com/users/Centril/gists{/gist_id}", "starred_url": "https://api.github.com/users/Centril/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Centril/subscriptions", "organizations_url": "https://api.github.com/users/Centril/orgs", "repos_url": "https://api.github.com/users/Centril/repos", "events_url": "https://api.github.com/users/Centril/events{/privacy}", "received_events_url": "https://api.github.com/users/Centril/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "63d480a07fd447303321d77a285e1024a1276d43", "url": "https://api.github.com/repos/rust-lang/rust/commits/63d480a07fd447303321d77a285e1024a1276d43", "html_url": "https://github.com/rust-lang/rust/commit/63d480a07fd447303321d77a285e1024a1276d43"}, {"sha": "687891309659fd2942f4c8bc8f9fd2feaf85d864", "url": "https://api.github.com/repos/rust-lang/rust/commits/687891309659fd2942f4c8bc8f9fd2feaf85d864", "html_url": "https://github.com/rust-lang/rust/commit/687891309659fd2942f4c8bc8f9fd2feaf85d864"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "5126fe01a3f006ec805e076be8430ad0ecd3ee12", "filename": "src/libcore/any.rs", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b/src%2Flibcore%2Fany.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b/src%2Flibcore%2Fany.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcore%2Fany.rs?ref=ce6f0b0a1ee8e3766cdf4c63ed8377dea8dea46b", "patch": "@@ -74,6 +74,16 @@ use crate::intrinsics;\n /// See the [module-level documentation][mod] for more details.\n ///\n /// [mod]: index.html\n+// This trait is not unsafe, though we rely on the specifics of it's sole impl's\n+// `type_id` function in unsafe code (e.g., `downcast`). Normally, that would be\n+// a problem, but because the only impl of `Any` is a blanket implementation, no\n+// other code can implement `Any`.\n+//\n+// We could plausibly make this trait unsafe -- it would not cause breakage,\n+// since we control all the implementations -- but we choose not to as that's\n+// both not really necessary and may confuse users about the distinction of\n+// unsafe traits and unsafe methods (i.e., `type_id` would still be safe to call,\n+// but we would likely want to indicate as such in documentation).\n #[stable(feature = \"rust1\", since = \"1.0.0\")]\n pub trait Any: 'static {\n     /// Gets the `TypeId` of `self`."}]}