{"sha": "92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjkyZmQ0MzBkYWI4Y2QwYzdhNDc2Y2NjNWRiODc2MDdmM2YwZjAwYTI=", "commit": {"author": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-03-16T10:03:43Z"}, "committer": {"name": "Kirill Bulatov", "email": "mail4score@gmail.com", "date": "2020-03-16T10:03:43Z"}, "message": "Use Display instead of a custom method", "tree": {"sha": "62e0115f59514dbf465182d64e5187aa6fbd50df", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/62e0115f59514dbf465182d64e5187aa6fbd50df"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "html_url": "https://github.com/rust-lang/rust/commit/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/comments", "author": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SomeoneToIgnore", "id": 2690773, "node_id": "MDQ6VXNlcjI2OTA3NzM=", "avatar_url": "https://avatars.githubusercontent.com/u/2690773?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SomeoneToIgnore", "html_url": "https://github.com/SomeoneToIgnore", "followers_url": "https://api.github.com/users/SomeoneToIgnore/followers", "following_url": "https://api.github.com/users/SomeoneToIgnore/following{/other_user}", "gists_url": "https://api.github.com/users/SomeoneToIgnore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SomeoneToIgnore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SomeoneToIgnore/subscriptions", "organizations_url": "https://api.github.com/users/SomeoneToIgnore/orgs", "repos_url": "https://api.github.com/users/SomeoneToIgnore/repos", "events_url": "https://api.github.com/users/SomeoneToIgnore/events{/privacy}", "received_events_url": "https://api.github.com/users/SomeoneToIgnore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "059ed25a3eea97f370c190803318d5cb7885e1a9", "url": "https://api.github.com/repos/rust-lang/rust/commits/059ed25a3eea97f370c190803318d5cb7885e1a9", "html_url": "https://github.com/rust-lang/rust/commit/059ed25a3eea97f370c190803318d5cb7885e1a9"}], "stats": {"total": 36, "additions": 17, "deletions": 19}, "files": [{"sha": "bde843001a64971296927b87924723660235ef56", "filename": "crates/ra_db/src/input.rs", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/crates%2Fra_db%2Fsrc%2Finput.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/crates%2Fra_db%2Fsrc%2Finput.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_db%2Fsrc%2Finput.rs?ref=92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "patch": "@@ -14,6 +14,7 @@ use rustc_hash::FxHashMap;\n use rustc_hash::FxHashSet;\n \n use crate::{RelativePath, RelativePathBuf};\n+use fmt::Display;\n \n /// `FileId` is an integer which uniquely identifies a file. File paths are\n /// messy and system-dependent, so most of the code should work directly with\n@@ -102,9 +103,11 @@ impl CrateName {\n     pub fn normalize_dashes(name: &str) -> CrateName {\n         Self(SmolStr::new(name.replace('-', \"_\")))\n     }\n+}\n \n-    pub fn get_name(&self) -> String {\n-        self.0.to_string()\n+impl Display for CrateName {\n+    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n+        write!(f, \"{}\", self.0)\n     }\n }\n "}, {"sha": "03515309e081234d3ca8daaa23f1385a57625b81", "filename": "crates/ra_hir_def/src/nameres.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/crates%2Fra_hir_def%2Fsrc%2Fnameres.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/crates%2Fra_hir_def%2Fsrc%2Fnameres.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_hir_def%2Fsrc%2Fnameres.rs?ref=92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "patch": "@@ -181,7 +181,7 @@ impl CrateDefMap {\n             db.crate_graph()[krate]\n                 .display_name\n                 .as_ref()\n-                .map(|name| name.get_name())\n+                .map(ToString::to_string)\n                 .unwrap_or_default()\n         });\n         let def_map = {"}, {"sha": "5b3760c1866929f8abacb39c29a9759e51a01707", "filename": "crates/ra_ide/src/hover.rs", "status": "modified", "additions": 11, "deletions": 16, "changes": 27, "blob_url": "https://github.com/rust-lang/rust/blob/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/crates%2Fra_ide%2Fsrc%2Fhover.rs", "raw_url": "https://github.com/rust-lang/rust/raw/92fd430dab8cd0c7a476ccc5db87607f3f0f00a2/crates%2Fra_ide%2Fsrc%2Fhover.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_ide%2Fsrc%2Fhover.rs?ref=92fd430dab8cd0c7a476ccc5db87607f3f0f00a2", "patch": "@@ -94,22 +94,17 @@ fn definition_owner_name(db: &RootDatabase, def: &Definition) -> Option<String>\n \n fn determine_mod_path(db: &RootDatabase, def: &Definition) -> Option<String> {\n     let mod_path = def.module(db).map(|module| {\n-        once(\n-            db.crate_graph()[module.krate().into()]\n-                .display_name\n-                .as_ref()\n-                .map(|name| name.get_name()),\n-        )\n-        .chain(\n-            module\n-                .path_to_root(db)\n-                .into_iter()\n-                .rev()\n-                .map(|it| it.name(db).map(|name| name.to_string())),\n-        )\n-        .chain(once(definition_owner_name(db, def)))\n-        .flatten()\n-        .join(\"::\")\n+        once(db.crate_graph()[module.krate().into()].display_name.as_ref().map(ToString::to_string))\n+            .chain(\n+                module\n+                    .path_to_root(db)\n+                    .into_iter()\n+                    .rev()\n+                    .map(|it| it.name(db).map(|name| name.to_string())),\n+            )\n+            .chain(once(definition_owner_name(db, def)))\n+            .flatten()\n+            .join(\"::\")\n     });\n     mod_path // FIXME: replace dashes with underscores in crate display name\n }"}]}