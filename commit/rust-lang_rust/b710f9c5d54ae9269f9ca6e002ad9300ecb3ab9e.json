{"sha": "b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmI3MTBmOWM1ZDU0YWU5MjY5ZjljYTZlMDAyYWQ5MzAwZWNiM2FiOWU=", "commit": {"author": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-10-01T17:26:07Z"}, "committer": {"name": "Pietro Albini", "email": "pietro@pietroalbini.org", "date": "2020-10-01T17:26:50Z"}, "message": "ci: switch to environment files to change the environment on GHA\n\nSee GitHub's blog post on why the change was necessary:\n\n    https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/", "tree": {"sha": "efa9bed71a75473389df41a943fc261844f1effa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/efa9bed71a75473389df41a943fc261844f1effa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE1JbYPtLJAsc22U9xPgar6Auq8ZwFAl92EcAACgkQPgar6Auq\n8ZxzEhAAqqIX7rxtlUlC1bKph7FcE+ZM7Oe/rlmmdwCtFmgN6xmS9MA9OqodRuWC\n71aU0XEO5eRVW4PAuao3T2Nq24SVXwmWJU+XCPhDOltVnYFNZVHb7qfPR6dZ2eeM\nTS4qCKlpHLmBntup+xjWX761wD1Mnhue/i2Nl818SVR0O/OV5ADiVqG04WFLfJJP\nPLpew8IqnF7mn6ykDBWaFG7sYyHYQjHIqunjBxnegh2ZAdZ9qpjEqRuHIhJalj8o\nyxGoAkRHp7Bv3/BNIgxfokHR6nRJzOcwe4RV7NF61HNXbzYd278QAxPqCIKd1gY2\nPz3HK79S8S20z0p+O/6FaAb1scv29V4ba/gMYMMsmkyLc9cUgyQV1aowOfOzUq0h\n9ROhSCEVzfE00XTjtxK4DVK6qdcX6to6W+3Xlqda1hHeXXOma6d+Lfiu2T8syNti\n9FM8QYOR2I7SuKUJN4ptlBMPOple4bv1Jc9MbUoNRMucGj/QrOuDP4sy+XPzedw4\nUyVrhw6qHxhv3DZl/Rp+0dXWP0bj3vFUSW9/BdW05UCOEdSuVNzqXcs2ZpMebSYm\n/IwIch11t60bWoQrN06+9WT3xykwnrOgVDd6Oacy88+ZkPhV1RMAyLnY8Toeu8mR\nHgdFbUpasDDfyi4KfFPVAT5yp6aA+5oVygroHeNOqykVhJHP14Y=\n=H5mq\n-----END PGP SIGNATURE-----", "payload": "tree efa9bed71a75473389df41a943fc261844f1effa\nparent 782013564efc06ef02614ba35a4e67dee4fcb8e7\nauthor Pietro Albini <pietro@pietroalbini.org> 1601573167 +0200\ncommitter Pietro Albini <pietro@pietroalbini.org> 1601573210 +0200\n\nci: switch to environment files to change the environment on GHA\n\nSee GitHub's blog post on why the change was necessary:\n\n    https://github.blog/changelog/2020-10-01-github-actions-deprecating-set-env-and-add-path-commands/\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e", "html_url": "https://github.com/rust-lang/rust/commit/b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e/comments", "author": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pietroalbini", "id": 2299951, "node_id": "MDQ6VXNlcjIyOTk5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/2299951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pietroalbini", "html_url": "https://github.com/pietroalbini", "followers_url": "https://api.github.com/users/pietroalbini/followers", "following_url": "https://api.github.com/users/pietroalbini/following{/other_user}", "gists_url": "https://api.github.com/users/pietroalbini/gists{/gist_id}", "starred_url": "https://api.github.com/users/pietroalbini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pietroalbini/subscriptions", "organizations_url": "https://api.github.com/users/pietroalbini/orgs", "repos_url": "https://api.github.com/users/pietroalbini/repos", "events_url": "https://api.github.com/users/pietroalbini/events{/privacy}", "received_events_url": "https://api.github.com/users/pietroalbini/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "782013564efc06ef02614ba35a4e67dee4fcb8e7", "url": "https://api.github.com/repos/rust-lang/rust/commits/782013564efc06ef02614ba35a4e67dee4fcb8e7", "html_url": "https://github.com/rust-lang/rust/commit/782013564efc06ef02614ba35a4e67dee4fcb8e7"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "c93d4774e3992b89983a2bbd2fccef1688d916d9", "filename": "src/ci/shared.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e/src%2Fci%2Fshared.sh", "raw_url": "https://github.com/rust-lang/rust/raw/b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e/src%2Fci%2Fshared.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fshared.sh?ref=b710f9c5d54ae9269f9ca6e002ad9300ecb3ab9e", "patch": "@@ -104,7 +104,7 @@ function ciCommandAddPath {\n     if isAzurePipelines; then\n         echo \"##vso[task.prependpath]${path}\"\n     elif isGitHubActions; then\n-        echo \"::add-path::${path}\"\n+        echo \"${path}\" >> \"${GITHUB_PATH}\"\n     else\n         echo \"ciCommandAddPath only works inside CI!\"\n         exit 1\n@@ -122,7 +122,7 @@ function ciCommandSetEnv {\n     if isAzurePipelines; then\n         echo \"##vso[task.setvariable variable=${name}]${value}\"\n     elif isGitHubActions; then\n-        echo \"::set-env name=${name}::${value}\"\n+        echo \"${name}=${value}\" >> \"${GITHUB_ENV}\"\n     else\n         echo \"ciCommandSetEnv only works inside CI!\"\n         exit 1"}]}