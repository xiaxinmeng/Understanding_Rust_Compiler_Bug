{"sha": "d8649c1af86118dea6b6340c999b5864a8d55279", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4NjQ5YzFhZjg2MTE4ZGVhNmI2MzQwYzk5OWI1ODY0YThkNTUyNzk=", "commit": {"author": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2019-04-26T15:42:56Z"}, "committer": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2019-04-26T15:42:56Z"}, "message": "Simplify", "tree": {"sha": "e4d7f73b0253fb882ac043dd75a111fcaf487c27", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4d7f73b0253fb882ac043dd75a111fcaf487c27"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8649c1af86118dea6b6340c999b5864a8d55279", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8649c1af86118dea6b6340c999b5864a8d55279", "html_url": "https://github.com/rust-lang/rust/commit/d8649c1af86118dea6b6340c999b5864a8d55279", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8649c1af86118dea6b6340c999b5864a8d55279/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4251f083b551de9bfe15d11bb4b485c0a5de86ab", "url": "https://api.github.com/repos/rust-lang/rust/commits/4251f083b551de9bfe15d11bb4b485c0a5de86ab", "html_url": "https://github.com/rust-lang/rust/commit/4251f083b551de9bfe15d11bb4b485c0a5de86ab"}], "stats": {"total": 23, "additions": 10, "deletions": 13}, "files": [{"sha": "9fe529f53b3493c754a758ef218b7d5f8ec31b1e", "filename": "crates/ra_parser/src/grammar/expressions.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/d8649c1af86118dea6b6340c999b5864a8d55279/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8649c1af86118dea6b6340c999b5864a8d55279/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fexpressions.rs?ref=d8649c1af86118dea6b6340c999b5864a8d55279", "patch": "@@ -252,12 +252,12 @@ fn expr_bp(\n     // `newly_dollar_open` is a flag indicated that dollar is just closed after lhs, e.g.\n     // `$1$ + a`\n     // We use this flag to skip handling it.\n-    let mut newly_dollar_open = false;\n-\n-    if p.at_l_dollar() {\n+    let mut newly_dollar_open = if p.at_l_dollar() {\n         *dollar_lvl += p.eat_l_dollars();\n-        newly_dollar_open = true;\n-    }\n+        true\n+    } else {\n+        false\n+    };\n \n     let mut lhs = match lhs(p, r, dollar_lvl) {\n         Some((lhs, blocklike)) => {\n@@ -535,7 +535,7 @@ fn path_expr(p: &mut Parser, r: Restrictions) -> (CompletedMarker, BlockLike) {\n         }\n         EXCL => {\n             let block_like = items::macro_call_after_excl(p);\n-            return (m.complete(p, MACRO_CALL), block_like);\n+            (m.complete(p, MACRO_CALL), block_like)\n         }\n         _ => (m.complete(p, PATH_EXPR), BlockLike::NotBlock),\n     }"}, {"sha": "9ecb8e744b3ad97953ef810dbb4a9110106b3862", "filename": "crates/ra_prof/src/lib.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/d8649c1af86118dea6b6340c999b5864a8d55279/crates%2Fra_prof%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8649c1af86118dea6b6340c999b5864a8d55279/crates%2Fra_prof%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_prof%2Fsrc%2Flib.rs?ref=d8649c1af86118dea6b6340c999b5864a8d55279", "patch": "@@ -67,14 +67,11 @@ pub fn profile(desc: &str) -> Profiler {\n \n     PROFILE_STACK.with(|stack| {\n         let mut stack = stack.borrow_mut();\n-        if stack.starts.len() == 0 {\n-            match FILTER.try_read() {\n-                Ok(f) => {\n-                    if f.version > stack.filter_data.version {\n-                        stack.filter_data = f.clone();\n-                    }\n+        if stack.starts.is_empty() {\n+            if let Ok(f) = FILTER.try_read() {\n+                if f.version > stack.filter_data.version {\n+                    stack.filter_data = f.clone();\n                 }\n-                Err(_) => (),\n             };\n         }\n "}]}