{"sha": "393cd892673c48e9bba4e2d8bf7253274ea6046d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM5M2NkODkyNjczYzQ4ZTliYmE0ZTJkOGJmNzI1MzI3NGVhNjA0NmQ=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-02-04T15:29:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2018-02-04T15:29:01Z"}, "message": "Rollup merge of #47978 - eddyb:iu, r=kennytm\n\nui tests: diff from old (expected) to new (actual) instead of backwards.\n\nPreviously `actual` was \"old\" and `expected` was \"new\" which resulted in `+` before `-`.\nAFAIK all diff tools put `-` before `+`, which made the previous behavior *very confusing*.\n\nr? @nikomatsakis", "tree": {"sha": "c276e46126ec2a9981f2ba09fb76ef9a22bf3d16", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c276e46126ec2a9981f2ba09fb76ef9a22bf3d16"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/393cd892673c48e9bba4e2d8bf7253274ea6046d", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJadya9CRBK7hj4Ov3rIwAAdHIIADDFqUMiKcUQvv49Lib2Kx29\nQzaC8KUSSrdlFpY5PcuZ79z1Gnr2AiiW7abUoTUxIsryD0M3DVaRQYxSN1zAhqX+\n0XYYwqapTMjkOosM0wEXcLMhOY+GbeIrjSiogxFDEcrY28VBFA7KTy5xEdEHccUG\nDh+0906hjW0C6OMYPSb6ho6d+4P1ROG8QXE5rlu8LeBw/m+nwTOirk2P6bcMRMSs\n/LQ1nIllSfjGNpwB2uAdFA4xuo0y2TLzvshCLWmwWhN//HPcQHvRyuD0P0+7JGJd\nAZ1VcafIK25XsOwfJH4pXQlbkU96POymCKCCIdD1E/zf7TnRb3BWkVPuKlLazGs=\n=JRyD\n-----END PGP SIGNATURE-----\n", "payload": "tree c276e46126ec2a9981f2ba09fb76ef9a22bf3d16\nparent e58cff2a4d28d50a83cca7adeda54f1f671ab5f3\nparent cc68afb38476c6ebf53b3dab302a2760cb9374b9\nauthor kennytm <kennytm@gmail.com> 1517758141 +0800\ncommitter GitHub <noreply@github.com> 1517758141 +0800\n\nRollup merge of #47978 - eddyb:iu, r=kennytm\n\nui tests: diff from old (expected) to new (actual) instead of backwards.\n\nPreviously `actual` was \"old\" and `expected` was \"new\" which resulted in `+` before `-`.\nAFAIK all diff tools put `-` before `+`, which made the previous behavior *very confusing*.\n\nr? @nikomatsakis\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/393cd892673c48e9bba4e2d8bf7253274ea6046d", "html_url": "https://github.com/rust-lang/rust/commit/393cd892673c48e9bba4e2d8bf7253274ea6046d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/393cd892673c48e9bba4e2d8bf7253274ea6046d/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e58cff2a4d28d50a83cca7adeda54f1f671ab5f3", "url": "https://api.github.com/repos/rust-lang/rust/commits/e58cff2a4d28d50a83cca7adeda54f1f671ab5f3", "html_url": "https://github.com/rust-lang/rust/commit/e58cff2a4d28d50a83cca7adeda54f1f671ab5f3"}, {"sha": "cc68afb38476c6ebf53b3dab302a2760cb9374b9", "url": "https://api.github.com/repos/rust-lang/rust/commits/cc68afb38476c6ebf53b3dab302a2760cb9374b9", "html_url": "https://github.com/rust-lang/rust/commit/cc68afb38476c6ebf53b3dab302a2760cb9374b9"}], "stats": {"total": 8, "additions": 4, "deletions": 4}, "files": [{"sha": "46df211cbaf65f225df1c55278e5a3b39c51c5aa", "filename": "src/tools/compiletest/src/runtest.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/393cd892673c48e9bba4e2d8bf7253274ea6046d/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "raw_url": "https://github.com/rust-lang/rust/raw/393cd892673c48e9bba4e2d8bf7253274ea6046d/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fcompiletest%2Fsrc%2Fruntest.rs?ref=393cd892673c48e9bba4e2d8bf7253274ea6046d", "patch": "@@ -79,7 +79,7 @@ pub fn make_diff(expected: &str, actual: &str, context_size: usize) -> Vec<Misma\n     let mut results = Vec::new();\n     let mut mismatch = Mismatch::new(0);\n \n-    for result in diff::lines(actual, expected) {\n+    for result in diff::lines(expected, actual) {\n         match result {\n             diff::Result::Left(str) => {\n                 if lines_since_mismatch >= context_size && lines_since_mismatch > 0 {\n@@ -91,7 +91,8 @@ pub fn make_diff(expected: &str, actual: &str, context_size: usize) -> Vec<Misma\n                     mismatch.lines.push(DiffLine::Context(line.to_owned()));\n                 }\n \n-                mismatch.lines.push(DiffLine::Resulting(str.to_owned()));\n+                mismatch.lines.push(DiffLine::Expected(str.to_owned()));\n+                line_number += 1;\n                 lines_since_mismatch = 0;\n             }\n             diff::Result::Right(str) => {\n@@ -104,8 +105,7 @@ pub fn make_diff(expected: &str, actual: &str, context_size: usize) -> Vec<Misma\n                     mismatch.lines.push(DiffLine::Context(line.to_owned()));\n                 }\n \n-                mismatch.lines.push(DiffLine::Expected(str.to_owned()));\n-                line_number += 1;\n+                mismatch.lines.push(DiffLine::Resulting(str.to_owned()));\n                 lines_since_mismatch = 0;\n             }\n             diff::Result::Both(str, _) => {"}]}