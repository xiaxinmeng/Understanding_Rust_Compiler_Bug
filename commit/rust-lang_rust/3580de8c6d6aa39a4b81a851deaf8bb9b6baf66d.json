{"sha": "3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjM1ODBkZThjNmQ2YWEzOWE0YjgxYTg1MWRlYWY4YmI5YjZiYWY2NmQ=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-06T21:11:48Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-06-06T21:11:48Z"}, "message": "Turn warning into lint", "tree": {"sha": "ec056ae91fdc62fbab34ff5ba137d47df8f41dee", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ec056ae91fdc62fbab34ff5ba137d47df8f41dee"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "html_url": "https://github.com/rust-lang/rust/commit/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2c7099baeb6be82fcfec630b00d8a8175f5329f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/2c7099baeb6be82fcfec630b00d8a8175f5329f8", "html_url": "https://github.com/rust-lang/rust/commit/2c7099baeb6be82fcfec630b00d8a8175f5329f8"}], "stats": {"total": 573, "additions": 305, "deletions": 268}, "files": [{"sha": "591cb9d5ad6c2c33bb73984ea34992aa583b88f3", "filename": "src/librustc/hir/check_attr.rs", "status": "modified", "additions": 2, "deletions": 54, "changes": 56, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc%2Fhir%2Fcheck_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc%2Fhir%2Fcheck_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Fhir%2Fcheck_attr.rs?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -14,7 +14,7 @@\n //! conflicts between multiple such attributes attached to the same\n //! item.\n \n-use syntax_pos::{BytePos, Span};\n+use syntax_pos::Span;\n use ty::TyCtxt;\n \n use hir;\n@@ -154,59 +154,7 @@ impl<'a, 'tcx> CheckAttrVisitor<'a, 'tcx> {\n         let hints: Vec<_> = item.attrs\n             .iter()\n             .filter(|attr| attr.name() == \"repr\")\n-            .filter_map(|attr| {\n-                let list = attr.meta_item_list();\n-\n-                // Emit warnings with `repr` either has a literal assignment (`#[repr = \"C\"]`) or\n-                // no hints (``#[repr]`)\n-                let has_hints = list.as_ref().map(|ref list| !list.is_empty()).unwrap_or(false);\n-                if !has_hints {\n-                    let mut suggested = false;\n-                    let mut warn = if let Some(ref lit) = attr.value_str() {\n-                        // avoid warning about empty `repr` on `#[repr = \"foo\"]`\n-                        let sp = match format!(\"{}\", lit).as_ref() {\n-                            \"C\" | \"packed\" | \"rust\" | \"u*\" | \"i*\" => {\n-                                let lo = attr.span.lo() + BytePos(2);\n-                                let hi = attr.span.hi() - BytePos(1);\n-                                suggested = true;\n-                                attr.span.with_lo(lo).with_hi(hi)\n-                            }\n-                            _ => attr.span,  // the literal wasn't a valid `repr` arg\n-                        };\n-                        let mut warn = self.tcx.sess.struct_span_warn(\n-                            sp,\n-                            \"`repr` attribute isn't configurable with a literal\",\n-                        );\n-                        if suggested {\n-                            // if the literal could have been a valid `repr` arg,\n-                            // suggest the correct syntax\n-                            warn.span_suggestion(\n-                                sp,\n-                                \"give `repr` a hint\",\n-                                format!(\"repr({})\", lit),\n-                            );\n-                        } else {\n-                            warn.span_label(attr.span, \"needs a hint\");\n-                        }\n-                        warn\n-                    } else {\n-                        let mut warn = self.tcx.sess.struct_span_warn(\n-                            attr.span,\n-                            \"`repr` attribute must have a hint\",\n-                        );\n-                        warn.span_label(attr.span, \"needs a hint\");\n-                        warn\n-                    };\n-                    if !suggested {\n-                        warn.help(\"valid hints include `#[repr(C)]`, `#[repr(packed)]` and \\\n-                                   `#[repr(rust)]`\");\n-                        warn.note(\"for more information, visit \\\n-                                   <https://doc.rust-lang.org/nomicon/other-reprs.html>\");\n-                    }\n-                    warn.emit();\n-                }\n-                list\n-            })\n+            .filter_map(|attr| attr.meta_item_list())\n             .flat_map(|hints| hints)\n             .collect();\n "}, {"sha": "9fa6230670b670700f699b7ccb762fc182f3cad8", "filename": "src/librustc/lint/builtin.rs", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc%2Flint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc%2Flint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flint%2Fbuiltin.rs?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -206,6 +206,12 @@ declare_lint! {\n     \"potentially-conflicting impls were erroneously allowed\"\n }\n \n+declare_lint! {\n+    pub BAD_REPR,\n+    Warn,\n+    \"detects incorrect use of `repr` attribute\"\n+}\n+\n declare_lint! {\n     pub DEPRECATED,\n     Warn,"}, {"sha": "fbd153982b7c40f91994d63302739e6541aba3de", "filename": "src/librustc_lint/builtin.rs", "status": "modified", "additions": 69, "deletions": 0, "changes": 69, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc_lint%2Fbuiltin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc_lint%2Fbuiltin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbuiltin.rs?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -673,6 +673,75 @@ impl EarlyLintPass for AnonymousParameters {\n     }\n }\n \n+/// Checks for incorrect use use of `repr` attributes.\n+#[derive(Clone)]\n+pub struct BadRepr;\n+\n+impl LintPass for BadRepr {\n+    fn get_lints(&self) -> LintArray {\n+        lint_array!()\n+    }\n+}\n+\n+impl EarlyLintPass for BadRepr {\n+    fn check_attribute(&mut self, cx: &EarlyContext, attr: &ast::Attribute) {\n+        if attr.name() == \"repr\" {\n+            let list = attr.meta_item_list();\n+\n+            // Emit warnings with `repr` either has a literal assignment (`#[repr = \"C\"]`) or\n+            // no hints (``#[repr]`)\n+            let has_hints = list.as_ref().map(|ref list| !list.is_empty()).unwrap_or(false);\n+            if !has_hints {\n+                let mut suggested = false;\n+                let mut warn = if let Some(ref lit) = attr.value_str() {\n+                    // avoid warning about empty `repr` on `#[repr = \"foo\"]`\n+                    let sp = match format!(\"{}\", lit).as_ref() {\n+                        \"C\" | \"packed\" | \"rust\" | \"u*\" | \"i*\" => {\n+                            let lo = attr.span.lo() + BytePos(2);\n+                            let hi = attr.span.hi() - BytePos(1);\n+                            suggested = true;\n+                            attr.span.with_lo(lo).with_hi(hi)\n+                        }\n+                        _ => attr.span,  // the literal wasn't a valid `repr` arg\n+                    };\n+                    let mut warn = cx.struct_span_lint(\n+                        BAD_REPR,\n+                        sp,\n+                        \"`repr` attribute isn't configurable with a literal\",\n+                    );\n+                    if suggested {\n+                        // if the literal could have been a valid `repr` arg,\n+                        // suggest the correct syntax\n+                        warn.span_suggestion(\n+                            sp,\n+                            \"give `repr` a hint\",\n+                            format!(\"repr({})\", lit),\n+                        );\n+                    } else {\n+                        warn.span_label(attr.span, \"needs a hint\");\n+                    }\n+                    warn\n+                } else {\n+                    let mut warn = cx.struct_span_lint(\n+                        BAD_REPR,\n+                        attr.span,\n+                        \"`repr` attribute must have a hint\",\n+                    );\n+                    warn.span_label(attr.span, \"needs a hint\");\n+                    warn\n+                };\n+                if !suggested {\n+                    warn.help(\"valid hints include `#[repr(C)]`, `#[repr(packed)]` and \\\n+                               `#[repr(rust)]`\");\n+                    warn.note(\"for more information, visit \\\n+                               <https://doc.rust-lang.org/nomicon/other-reprs.html>\");\n+                }\n+                warn.emit();\n+            }\n+        }\n+    }\n+}\n+\n /// Checks for use of attributes which have been deprecated.\n #[derive(Clone)]\n pub struct DeprecatedAttr {"}, {"sha": "e1106281f45237ab627d4256faa31c3bd64ddcbc", "filename": "src/librustc_lint/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc_lint%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Flibrustc_lint%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Flib.rs?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -107,6 +107,7 @@ pub fn register_builtins(store: &mut lint::LintStore, sess: Option<&Session>) {\n                        UnusedImportBraces,\n                        AnonymousParameters,\n                        UnusedDocComment,\n+                       BadRepr,\n                        );\n \n     add_early_builtin_with_new!(sess,"}, {"sha": "db50b9514430c581908a99c5ef87b074bec89abe", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.rs", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.rs?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -59,7 +59,9 @@\n #![start                     = \"x4300\"] //~ WARN unused attribute\n // see issue-43106-gating-of-test.rs for crate-level; but non crate-level is below at \"4200\"\n // see issue-43106-gating-of-bench.rs for crate-level; but non crate-level is below at \"4100\"\n-#![repr                       = \"3900\"] //~ WARN unused attribute\n+#![repr                       = \"3900\"]\n+//~^ WARN unused attribute\n+//~| WARN `repr` attribute isn't configurable with a literal\n #![path                       = \"3800\"] //~ WARN unused attribute\n #![abi                        = \"3700\"] //~ WARN unused attribute\n #![automatically_derived      = \"3600\"] //~ WARN unused attribute"}, {"sha": "013504c554defe99e53e6d36076a89ebe54a83eb", "filename": "src/test/ui/feature-gate/issue-43106-gating-of-builtin-attrs.stderr", "status": "modified", "additions": 223, "deletions": 213, "changes": 436, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Ffeature-gate%2Fissue-43106-gating-of-builtin-attrs.stderr?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -1,11 +1,11 @@\n warning: macro_escape is a deprecated synonym for macro_use\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:498:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:500:1\n    |\n LL | #[macro_escape]\n    | ^^^^^^^^^^^^^^^\n \n warning: macro_escape is a deprecated synonym for macro_use\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:501:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:503:17\n    |\n LL |     mod inner { #![macro_escape] }\n    |                 ^^^^^^^^^^^^^^^^\n@@ -43,169 +43,161 @@ LL | #![deny                        (x5100)] //~ WARN unknown lint: `x5100`\n    |                                 ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:112:8\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:114:8\n    |\n LL | #[warn(x5400)]\n    |        ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:115:25\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:117:25\n    |\n LL |     mod inner { #![warn(x5400)] }\n    |                         ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:118:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:120:12\n    |\n LL |     #[warn(x5400)] fn f() { }\n    |            ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:121:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:123:12\n    |\n LL |     #[warn(x5400)] struct S;\n    |            ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:124:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:126:12\n    |\n LL |     #[warn(x5400)] type T = S;\n    |            ^^^^^\n \n warning: unknown lint: `x5400`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:127:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:129:12\n    |\n LL |     #[warn(x5400)] impl S { }\n    |            ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:131:9\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:133:9\n    |\n LL | #[allow(x5300)]\n    |         ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:134:26\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:136:26\n    |\n LL |     mod inner { #![allow(x5300)] }\n    |                          ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:137:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:139:13\n    |\n LL |     #[allow(x5300)] fn f() { }\n    |             ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:140:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:142:13\n    |\n LL |     #[allow(x5300)] struct S;\n    |             ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:143:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:145:13\n    |\n LL |     #[allow(x5300)] type T = S;\n    |             ^^^^^\n \n warning: unknown lint: `x5300`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:146:13\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:148:13\n    |\n LL |     #[allow(x5300)] impl S { }\n    |             ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:150:10\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:152:10\n    |\n LL | #[forbid(x5200)]\n    |          ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:153:27\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:155:27\n    |\n LL |     mod inner { #![forbid(x5200)] }\n    |                           ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:156:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:158:14\n    |\n LL |     #[forbid(x5200)] fn f() { }\n    |              ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:159:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:161:14\n    |\n LL |     #[forbid(x5200)] struct S;\n    |              ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:162:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:164:14\n    |\n LL |     #[forbid(x5200)] type T = S;\n    |              ^^^^^\n \n warning: unknown lint: `x5200`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:165:14\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:167:14\n    |\n LL |     #[forbid(x5200)] impl S { }\n    |              ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:169:8\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:171:8\n    |\n LL | #[deny(x5100)]\n    |        ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:172:25\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:174:25\n    |\n LL |     mod inner { #![deny(x5100)] }\n    |                         ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:175:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:177:12\n    |\n LL |     #[deny(x5100)] fn f() { }\n    |            ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:178:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:180:12\n    |\n LL |     #[deny(x5100)] struct S;\n    |            ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:181:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:183:12\n    |\n LL |     #[deny(x5100)] type T = S;\n    |            ^^^^^\n \n warning: unknown lint: `x5100`\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:184:12\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:186:12\n    |\n LL |     #[deny(x5100)] impl S { }\n    |            ^^^^^\n \n warning: `repr` attribute isn't configurable with a literal\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:310:1\n-   |\n-LL | #[repr = \"3900\"]\n-   | ^^^^^^^^^^^^^^^^ needs a hint\n-   |\n-   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n-   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n-\n-warning: `repr` attribute isn't configurable with a literal\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:314:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:316:17\n    |\n LL |     mod inner { #![repr=\"3900\"] }\n    |                 ^^^^^^^^^^^^^^^ needs a hint\n    |\n+   = note: #[warn(bad_repr)] on by default\n    = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n    = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n \n warning: `repr` attribute isn't configurable with a literal\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:318:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:320:5\n    |\n LL |     #[repr = \"3900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^ needs a hint\n@@ -214,7 +206,7 @@ LL |     #[repr = \"3900\"] fn f() { }\n    = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n \n warning: `repr` attribute isn't configurable with a literal\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:324:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:326:5\n    |\n LL |     #[repr = \"3900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^ needs a hint\n@@ -223,16 +215,34 @@ LL |     #[repr = \"3900\"] type T = S;\n    = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n \n warning: `repr` attribute isn't configurable with a literal\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:328:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:330:5\n    |\n LL |     #[repr = \"3900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^ needs a hint\n    |\n    = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n    = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n \n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:312:1\n+   |\n+LL | #[repr = \"3900\"]\n+   | ^^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n+warning: `repr` attribute isn't configurable with a literal\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:62:1\n+   |\n+LL | #![repr                       = \"3900\"]\n+   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ needs a hint\n+   |\n+   = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n+   = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n+\n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:192:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:194:5\n    |\n LL |     #[macro_use] fn f() { }\n    |     ^^^^^^^^^^^^\n@@ -244,277 +254,277 @@ LL | #![warn(unused_attributes, unknown_lints)]\n    |         ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:195:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:197:5\n    |\n LL |     #[macro_use] struct S;\n    |     ^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:198:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:200:5\n    |\n LL |     #[macro_use] type T = S;\n    |     ^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:201:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:203:5\n    |\n LL |     #[macro_use] impl S { }\n    |     ^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:208:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:210:17\n    |\n LL |     mod inner { #![macro_export=\"4800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:211:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:213:5\n    |\n LL |     #[macro_export = \"4800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:214:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:216:5\n    |\n LL |     #[macro_export = \"4800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:217:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:219:5\n    |\n LL |     #[macro_export = \"4800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:220:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:222:5\n    |\n LL |     #[macro_export = \"4800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:205:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:207:1\n    |\n LL | #[macro_export = \"4800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:227:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:229:17\n    |\n LL |     mod inner { #![plugin_registrar=\"4700\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:232:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:234:5\n    |\n LL |     #[plugin_registrar = \"4700\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:235:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:237:5\n    |\n LL |     #[plugin_registrar = \"4700\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:238:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:240:5\n    |\n LL |     #[plugin_registrar = \"4700\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:224:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:226:1\n    |\n LL | #[plugin_registrar = \"4700\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:245:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:247:17\n    |\n LL |     mod inner { #![main=\"4300\"] }\n    |                 ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:250:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:252:5\n    |\n LL |     #[main = \"4400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:253:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:255:5\n    |\n LL |     #[main = \"4400\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:256:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:258:5\n    |\n LL |     #[main = \"4400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:242:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:244:1\n    |\n LL | #[main = \"4400\"]\n    | ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:263:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:265:17\n    |\n LL |     mod inner { #![start=\"4300\"] }\n    |                 ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:268:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:270:5\n    |\n LL |     #[start = \"4300\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:271:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:273:5\n    |\n LL |     #[start = \"4300\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:274:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:276:5\n    |\n LL |     #[start = \"4300\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:260:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:262:1\n    |\n LL | #[start = \"4300\"]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:314:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:316:17\n    |\n LL |     mod inner { #![repr=\"3900\"] }\n    |                 ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:318:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:320:5\n    |\n LL |     #[repr = \"3900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:324:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:326:5\n    |\n LL |     #[repr = \"3900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:328:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:330:5\n    |\n LL |     #[repr = \"3900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:310:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:312:1\n    |\n LL | #[repr = \"3900\"]\n    | ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:337:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:339:5\n    |\n LL |     #[path = \"3800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:340:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:342:5\n    |\n LL |     #[path = \"3800\"]  struct S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:343:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:345:5\n    |\n LL |     #[path = \"3800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:346:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:348:5\n    |\n LL |     #[path = \"3800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:353:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:355:17\n    |\n LL |     mod inner { #![abi=\"3700\"] }\n    |                 ^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:356:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:358:5\n    |\n LL |     #[abi = \"3700\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:359:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:361:5\n    |\n LL |     #[abi = \"3700\"] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:362:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:364:5\n    |\n LL |     #[abi = \"3700\"] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:365:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:367:5\n    |\n LL |     #[abi = \"3700\"] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:350:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:352:1\n    |\n LL | #[abi = \"3700\"]\n    | ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:372:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:374:17\n    |\n LL |     mod inner { #![automatically_derived=\"3600\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:375:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:377:5\n    |\n LL |     #[automatically_derived = \"3600\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:378:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:380:5\n    |\n LL |     #[automatically_derived = \"3600\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:381:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:383:5\n    |\n LL |     #[automatically_derived = \"3600\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:384:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:386:5\n    |\n LL |     #[automatically_derived = \"3600\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:369:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:371:1\n    |\n LL | #[automatically_derived = \"3600\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: function is marked #[no_mangle], but not exported\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:392:27\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:394:27\n    |\n LL |     #[no_mangle = \"3500\"] fn f() { }\n    |                           -^^^^^^^^^\n@@ -524,709 +534,709 @@ LL |     #[no_mangle = \"3500\"] fn f() { }\n    = note: #[warn(private_no_mangle_fns)] on by default\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:405:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:407:17\n    |\n LL |     mod inner { #![no_link=\"3400\"] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:408:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:410:5\n    |\n LL |     #[no_link = \"3400\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:411:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:413:5\n    |\n LL |     #[no_link = \"3400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:414:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:416:5\n    |\n LL |     #[no_link = \"3400\"]type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:417:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:419:5\n    |\n LL |     #[no_link = \"3400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:402:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:404:1\n    |\n LL | #[no_link = \"3400\"]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:424:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:426:17\n    |\n LL |     mod inner { #![should_panic=\"3200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:427:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:429:5\n    |\n LL |     #[should_panic = \"3200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:430:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:432:5\n    |\n LL |     #[should_panic = \"3200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:433:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:435:5\n    |\n LL |     #[should_panic = \"3200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:436:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:438:5\n    |\n LL |     #[should_panic = \"3200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:421:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:423:1\n    |\n LL | #[should_panic = \"3200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:443:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:445:17\n    |\n LL |     mod inner { #![ignore=\"3100\"] }\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:446:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:448:5\n    |\n LL |     #[ignore = \"3100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:449:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:451:5\n    |\n LL |     #[ignore = \"3100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:452:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:454:5\n    |\n LL |     #[ignore = \"3100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:455:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:457:5\n    |\n LL |     #[ignore = \"3100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:440:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:442:1\n    |\n LL | #[ignore = \"3100\"]\n    | ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:462:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:464:17\n    |\n LL |     mod inner { #![no_implicit_prelude=\"3000\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:465:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:467:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:468:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:470:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:471:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:473:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:474:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:476:5\n    |\n LL |     #[no_implicit_prelude = \"3000\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:459:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:461:1\n    |\n LL | #[no_implicit_prelude = \"3000\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:481:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:483:17\n    |\n LL |     mod inner { #![reexport_test_harness_main=\"2900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:484:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:486:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:487:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:489:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:490:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:492:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:493:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:495:5\n    |\n LL |     #[reexport_test_harness_main = \"2900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:478:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:480:1\n    |\n LL | #[reexport_test_harness_main = \"2900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:504:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:506:5\n    |\n LL |     #[macro_escape] fn f() { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:507:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:509:5\n    |\n LL |     #[macro_escape] struct S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:510:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:512:5\n    |\n LL |     #[macro_escape] type T = S;\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:513:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:515:5\n    |\n LL |     #[macro_escape] impl S { }\n    |     ^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:521:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:523:17\n    |\n LL |     mod inner { #![no_std=\"2600\"] }\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:521:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:523:17\n    |\n LL |     mod inner { #![no_std=\"2600\"] }\n    |                 ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:525:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:527:5\n    |\n LL |     #[no_std = \"2600\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:525:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:527:5\n    |\n LL |     #[no_std = \"2600\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:529:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:531:5\n    |\n LL |     #[no_std = \"2600\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:529:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:531:5\n    |\n LL |     #[no_std = \"2600\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:533:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:535:5\n    |\n LL |     #[no_std = \"2600\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:533:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:535:5\n    |\n LL |     #[no_std = \"2600\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:537:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:539:5\n    |\n LL |     #[no_std = \"2600\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:537:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:539:5\n    |\n LL |     #[no_std = \"2600\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:517:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:519:1\n    |\n LL | #[no_std = \"2600\"]\n    | ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:517:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:519:1\n    |\n LL | #[no_std = \"2600\"]\n    | ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:676:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:678:17\n    |\n LL |     mod inner { #![crate_name=\"0900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:676:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:678:17\n    |\n LL |     mod inner { #![crate_name=\"0900\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:680:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:682:5\n    |\n LL |     #[crate_name = \"0900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:680:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:682:5\n    |\n LL |     #[crate_name = \"0900\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:684:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:686:5\n    |\n LL |     #[crate_name = \"0900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:684:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:686:5\n    |\n LL |     #[crate_name = \"0900\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:688:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:690:5\n    |\n LL |     #[crate_name = \"0900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:688:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:690:5\n    |\n LL |     #[crate_name = \"0900\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:694:5\n    |\n LL |     #[crate_name = \"0900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:692:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:694:5\n    |\n LL |     #[crate_name = \"0900\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:672:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:674:1\n    |\n LL | #[crate_name = \"0900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:672:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:674:1\n    |\n LL | #[crate_name = \"0900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:701:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:703:17\n    |\n LL |     mod inner { #![crate_type=\"0800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:701:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:703:17\n    |\n LL |     mod inner { #![crate_type=\"0800\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:705:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:707:5\n    |\n LL |     #[crate_type = \"0800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:705:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:707:5\n    |\n LL |     #[crate_type = \"0800\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:709:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:711:5\n    |\n LL |     #[crate_type = \"0800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:709:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:711:5\n    |\n LL |     #[crate_type = \"0800\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:713:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:715:5\n    |\n LL |     #[crate_type = \"0800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:713:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:715:5\n    |\n LL |     #[crate_type = \"0800\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:719:5\n    |\n LL |     #[crate_type = \"0800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:717:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:719:5\n    |\n LL |     #[crate_type = \"0800\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:697:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:699:1\n    |\n LL | #[crate_type = \"0800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:697:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:699:1\n    |\n LL | #[crate_type = \"0800\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:726:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:728:17\n    |\n LL |     mod inner { #![feature(x0600)] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:726:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:728:17\n    |\n LL |     mod inner { #![feature(x0600)] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:730:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:732:5\n    |\n LL |     #[feature(x0600)] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:730:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:732:5\n    |\n LL |     #[feature(x0600)] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:734:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:736:5\n    |\n LL |     #[feature(x0600)] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:734:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:736:5\n    |\n LL |     #[feature(x0600)] struct S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:738:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:740:5\n    |\n LL |     #[feature(x0600)] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:738:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:740:5\n    |\n LL |     #[feature(x0600)] type T = S;\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:742:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:744:5\n    |\n LL |     #[feature(x0600)] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:742:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:744:5\n    |\n LL |     #[feature(x0600)] impl S { }\n    |     ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:722:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:724:1\n    |\n LL | #[feature(x0600)]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:722:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:724:1\n    |\n LL | #[feature(x0600)]\n    | ^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:752:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:754:17\n    |\n LL |     mod inner { #![no_main=\"0400\"] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:752:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:754:17\n    |\n LL |     mod inner { #![no_main=\"0400\"] }\n    |                 ^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:756:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:758:5\n    |\n LL |     #[no_main = \"0400\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:756:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:758:5\n    |\n LL |     #[no_main = \"0400\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:760:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:762:5\n    |\n LL |     #[no_main = \"0400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:760:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:762:5\n    |\n LL |     #[no_main = \"0400\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:764:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:766:5\n    |\n LL |     #[no_main = \"0400\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:764:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:766:5\n    |\n LL |     #[no_main = \"0400\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:768:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:770:5\n    |\n LL |     #[no_main = \"0400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:768:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:770:5\n    |\n LL |     #[no_main = \"0400\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:748:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:750:1\n    |\n LL | #[no_main = \"0400\"]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:748:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:750:1\n    |\n LL | #[no_main = \"0400\"]\n    | ^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:790:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:792:17\n    |\n LL |     mod inner { #![recursion_limit=\"0200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:790:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:792:17\n    |\n LL |     mod inner { #![recursion_limit=\"0200\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:794:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:796:5\n    |\n LL |     #[recursion_limit=\"0200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:794:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:796:5\n    |\n LL |     #[recursion_limit=\"0200\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:798:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:800:5\n    |\n LL |     #[recursion_limit=\"0200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:798:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:800:5\n    |\n LL |     #[recursion_limit=\"0200\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:802:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:804:5\n    |\n LL |     #[recursion_limit=\"0200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:802:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:804:5\n    |\n LL |     #[recursion_limit=\"0200\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:806:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:808:5\n    |\n LL |     #[recursion_limit=\"0200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:806:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:808:5\n    |\n LL |     #[recursion_limit=\"0200\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:786:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:788:1\n    |\n LL | #[recursion_limit=\"0200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:786:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:788:1\n    |\n LL | #[recursion_limit=\"0200\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:815:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:817:17\n    |\n LL |     mod inner { #![type_length_limit=\"0100\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be in the root module\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:815:17\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:817:17\n    |\n LL |     mod inner { #![type_length_limit=\"0100\"] }\n    |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:819:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:821:5\n    |\n LL |     #[type_length_limit=\"0100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:819:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:821:5\n    |\n LL |     #[type_length_limit=\"0100\"] fn f() { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:823:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:825:5\n    |\n LL |     #[type_length_limit=\"0100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:823:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:825:5\n    |\n LL |     #[type_length_limit=\"0100\"] struct S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:827:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:829:5\n    |\n LL |     #[type_length_limit=\"0100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:827:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:829:5\n    |\n LL |     #[type_length_limit=\"0100\"] type T = S;\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:831:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:833:5\n    |\n LL |     #[type_length_limit=\"0100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:831:5\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:833:5\n    |\n LL |     #[type_length_limit=\"0100\"] impl S { }\n    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:811:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:813:1\n    |\n LL | #[type_length_limit=\"0100\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: crate-level attribute should be an inner attribute: add an exclamation mark: #![foo]\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:811:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:813:1\n    |\n LL | #[type_length_limit=\"0100\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n@@ -1258,53 +1268,53 @@ LL | #![start                     = \"x4300\"] //~ WARN unused attribute\n warning: unused attribute\n   --> $DIR/issue-43106-gating-of-builtin-attrs.rs:62:1\n    |\n-LL | #![repr                       = \"3900\"] //~ WARN unused attribute\n+LL | #![repr                       = \"3900\"]\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:63:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:65:1\n    |\n LL | #![path                       = \"3800\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:64:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:66:1\n    |\n LL | #![abi                        = \"3700\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:65:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:67:1\n    |\n LL | #![automatically_derived      = \"3600\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:67:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:69:1\n    |\n LL | #![no_link                    = \"3400\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:69:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:71:1\n    |\n LL | #![should_panic               = \"3200\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:70:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:72:1\n    |\n LL | #![ignore                     = \"3100\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n warning: unused attribute\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:76:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:78:1\n    |\n LL | #![proc_macro_derive          = \"2500\"] //~ WARN unused attribute\n    | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n error: compilation successful\n-  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:842:1\n+  --> $DIR/issue-43106-gating-of-builtin-attrs.rs:844:1\n    |\n LL | / fn main() { //~ ERROR compilation successful\n LL | |     println!(\"Hello World\");"}, {"sha": "24a22a81c4aa0e511b69014ddb7361ea8cd5b634", "filename": "src/test/ui/suggestions/repr.stderr", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Ftest%2Fui%2Fsuggestions%2Frepr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d/src%2Ftest%2Fui%2Fsuggestions%2Frepr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuggestions%2Frepr.stderr?ref=3580de8c6d6aa39a4b81a851deaf8bb9b6baf66d", "patch": "@@ -4,6 +4,7 @@ warning: `repr` attribute must have a hint\n LL | #[repr]\n    | ^^^^^^^ needs a hint\n    |\n+   = note: #[warn(bad_repr)] on by default\n    = help: valid hints include `#[repr(C)]`, `#[repr(packed)]` and `#[repr(rust)]`\n    = note: for more information, visit <https://doc.rust-lang.org/nomicon/other-reprs.html>\n "}]}