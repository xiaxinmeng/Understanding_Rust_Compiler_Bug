{"sha": "4ab3c117d08ce5dab484cb981db069fa4ec0e605", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhYjNjMTE3ZDA4Y2U1ZGFiNDg0Y2I5ODFkYjA2OWZhNGVjMGU2MDU=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-09-10T11:46:15Z"}, "committer": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2021-09-10T11:46:15Z"}, "message": "Work around CI issue with windows sdk 10.0.20348.0.", "tree": {"sha": "29903d9880be1bb0a56500e12c33af01e438ce2e", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/29903d9880be1bb0a56500e12c33af01e438ce2e"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4ab3c117d08ce5dab484cb981db069fa4ec0e605", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4ab3c117d08ce5dab484cb981db069fa4ec0e605", "html_url": "https://github.com/rust-lang/rust/commit/4ab3c117d08ce5dab484cb981db069fa4ec0e605", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4ab3c117d08ce5dab484cb981db069fa4ec0e605/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "497ee321af3b8496eaccd7af7b437f18bab81abf", "url": "https://api.github.com/repos/rust-lang/rust/commits/497ee321af3b8496eaccd7af7b437f18bab81abf", "html_url": "https://github.com/rust-lang/rust/commit/497ee321af3b8496eaccd7af7b437f18bab81abf"}], "stats": {"total": 10, "additions": 10, "deletions": 0}, "files": [{"sha": "78ff874e7550114f3919a77a108a9fd93514b788", "filename": ".github/workflows/ci.yml", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4ab3c117d08ce5dab484cb981db069fa4ec0e605/.github%2Fworkflows%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4ab3c117d08ce5dab484cb981db069fa4ec0e605/.github%2Fworkflows%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.github%2Fworkflows%2Fci.yml?ref=4ab3c117d08ce5dab484cb981db069fa4ec0e605", "patch": "@@ -404,6 +404,7 @@ jobs:\n               RUST_CONFIGURE_ARGS: \"--build=x86_64-pc-windows-msvc --host=aarch64-pc-windows-msvc --enable-full-tools --enable-profiler\"\n               SCRIPT: python x.py dist\n               DIST_REQUIRE_ALL_TOOLS: 0\n+              WINDOWS_SDK_20348_HACK: 1\n             os: windows-latest-xl\n           - name: dist-i686-mingw\n             env:"}, {"sha": "c9f8692d41887e1546d32836cece40f546f421cf", "filename": "src/ci/github-actions/ci.yml", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/4ab3c117d08ce5dab484cb981db069fa4ec0e605/src%2Fci%2Fgithub-actions%2Fci.yml", "raw_url": "https://github.com/rust-lang/rust/raw/4ab3c117d08ce5dab484cb981db069fa4ec0e605/src%2Fci%2Fgithub-actions%2Fci.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fgithub-actions%2Fci.yml?ref=4ab3c117d08ce5dab484cb981db069fa4ec0e605", "patch": "@@ -635,6 +635,9 @@ jobs:\n               SCRIPT: python x.py dist\n               # RLS does not build for aarch64-pc-windows-msvc. See rust-lang/rls#1693\n               DIST_REQUIRE_ALL_TOOLS: 0\n+              # Hack around this SDK version, because it doesn't work with clang.\n+              # See https://github.com/rust-lang/rust/issues/88796\n+              WINDOWS_SDK_20348_HACK: 1\n             <<: *job-windows-xl\n \n           - name: dist-i686-mingw"}, {"sha": "fd29d3a022ad3860be66cbb67bf69415daee65a7", "filename": "src/ci/scripts/install-clang.sh", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/4ab3c117d08ce5dab484cb981db069fa4ec0e605/src%2Fci%2Fscripts%2Finstall-clang.sh", "raw_url": "https://github.com/rust-lang/rust/raw/4ab3c117d08ce5dab484cb981db069fa4ec0e605/src%2Fci%2Fscripts%2Finstall-clang.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fscripts%2Finstall-clang.sh?ref=4ab3c117d08ce5dab484cb981db069fa4ec0e605", "patch": "@@ -37,6 +37,12 @@ if isMacOS; then\n     # `clang-ar` by accident.\n     ciCommandSetEnv AR \"ar\"\n elif isWindows && [[ ${CUSTOM_MINGW-0} -ne 1 ]]; then\n+\n+    if [[ ${WINDOWS_SDK_20348_HACK-0} -eq 1 ]]; then\n+        rm -rf '/c/Program Files (x86)/Windows Kits/10/include/10.0.20348.0'\n+        mv '/c/Program Files (x86)/Windows Kits/10/include/'10.0.{19041,20348}.0\n+    fi\n+\n     # If we're compiling for MSVC then we, like most other distribution builders,\n     # switch to clang as the compiler. This'll allow us eventually to enable LTO\n     # amongst LLVM and rustc. Note that we only do this on MSVC as I don't think"}]}