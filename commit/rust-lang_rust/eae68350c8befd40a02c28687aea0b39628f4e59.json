{"sha": "eae68350c8befd40a02c28687aea0b39628f4e59", "node_id": "C_kwDOAAsO6NoAKGVhZTY4MzUwYzhiZWZkNDBhMDJjMjg2ODdhZWEwYjM5NjI4ZjRlNTk", "commit": {"author": {"name": "ridwanabdillahi", "email": "91507758+ridwanabdillahi@users.noreply.github.com", "date": "2022-02-07T20:49:03Z"}, "committer": {"name": "ridwanabdillahi", "email": "91507758+ridwanabdillahi@users.noreply.github.com", "date": "2022-03-09T21:51:29Z"}, "message": "Add support for targeting riscv32im-unknown-none-elf\n\nUpdate riscv32im-unknown-none-elf to Tier2 support.\n\nDowngrade to Tier 3 platform support.", "tree": {"sha": "a9bd21f644558ec33b8413ecfdef188b95caef86", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a9bd21f644558ec33b8413ecfdef188b95caef86"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/eae68350c8befd40a02c28687aea0b39628f4e59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/eae68350c8befd40a02c28687aea0b39628f4e59", "html_url": "https://github.com/rust-lang/rust/commit/eae68350c8befd40a02c28687aea0b39628f4e59", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/eae68350c8befd40a02c28687aea0b39628f4e59/comments", "author": {"login": "ridwanabdillahi", "id": 91507758, "node_id": "U_kgDOBXRMLg", "avatar_url": "https://avatars.githubusercontent.com/u/91507758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ridwanabdillahi", "html_url": "https://github.com/ridwanabdillahi", "followers_url": "https://api.github.com/users/ridwanabdillahi/followers", "following_url": "https://api.github.com/users/ridwanabdillahi/following{/other_user}", "gists_url": "https://api.github.com/users/ridwanabdillahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ridwanabdillahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ridwanabdillahi/subscriptions", "organizations_url": "https://api.github.com/users/ridwanabdillahi/orgs", "repos_url": "https://api.github.com/users/ridwanabdillahi/repos", "events_url": "https://api.github.com/users/ridwanabdillahi/events{/privacy}", "received_events_url": "https://api.github.com/users/ridwanabdillahi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ridwanabdillahi", "id": 91507758, "node_id": "U_kgDOBXRMLg", "avatar_url": "https://avatars.githubusercontent.com/u/91507758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ridwanabdillahi", "html_url": "https://github.com/ridwanabdillahi", "followers_url": "https://api.github.com/users/ridwanabdillahi/followers", "following_url": "https://api.github.com/users/ridwanabdillahi/following{/other_user}", "gists_url": "https://api.github.com/users/ridwanabdillahi/gists{/gist_id}", "starred_url": "https://api.github.com/users/ridwanabdillahi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ridwanabdillahi/subscriptions", "organizations_url": "https://api.github.com/users/ridwanabdillahi/orgs", "repos_url": "https://api.github.com/users/ridwanabdillahi/repos", "events_url": "https://api.github.com/users/ridwanabdillahi/events{/privacy}", "received_events_url": "https://api.github.com/users/ridwanabdillahi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "10dccdc7fcbdc64ee9efe2c1ed975ab8c1d61287", "url": "https://api.github.com/repos/rust-lang/rust/commits/10dccdc7fcbdc64ee9efe2c1ed975ab8c1d61287", "html_url": "https://github.com/rust-lang/rust/commit/10dccdc7fcbdc64ee9efe2c1ed975ab8c1d61287"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "4f0c3bec1eecc329314da737f3a1bac44d6e10b8", "filename": "compiler/rustc_target/src/spec/mod.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eae68350c8befd40a02c28687aea0b39628f4e59/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eae68350c8befd40a02c28687aea0b39628f4e59/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Fmod.rs?ref=eae68350c8befd40a02c28687aea0b39628f4e59", "patch": "@@ -975,6 +975,7 @@ supported_targets! {\n     (\"x86_64-unknown-none-hermitkernel\", x86_64_unknown_none_hermitkernel),\n \n     (\"riscv32i-unknown-none-elf\", riscv32i_unknown_none_elf),\n+    (\"riscv32im-unknown-none-elf\", riscv32im_unknown_none_elf),\n     (\"riscv32imc-unknown-none-elf\", riscv32imc_unknown_none_elf),\n     (\"riscv32imc-esp-espidf\", riscv32imc_esp_espidf),\n     (\"riscv32imac-unknown-none-elf\", riscv32imac_unknown_none_elf),"}, {"sha": "0357a94914fe8e0780c49f761c815df0057565cf", "filename": "compiler/rustc_target/src/spec/riscv32im_unknown_none_elf.rs", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/eae68350c8befd40a02c28687aea0b39628f4e59/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32im_unknown_none_elf.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eae68350c8befd40a02c28687aea0b39628f4e59/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32im_unknown_none_elf.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_target%2Fsrc%2Fspec%2Friscv32im_unknown_none_elf.rs?ref=eae68350c8befd40a02c28687aea0b39628f4e59", "patch": "@@ -0,0 +1,26 @@\n+use crate::spec::{LinkerFlavor, LldFlavor, PanicStrategy, RelocModel};\n+use crate::spec::{Target, TargetOptions};\n+\n+pub fn target() -> Target {\n+    Target {\n+        data_layout: \"e-m:e-p:32:32-i64:64-n32-S128\".to_string(),\n+        llvm_target: \"riscv32\".to_string(),\n+        pointer_width: 32,\n+        arch: \"riscv32\".to_string(),\n+\n+        options: TargetOptions {\n+            linker_flavor: LinkerFlavor::Lld(LldFlavor::Ld),\n+            linker: Some(\"rust-lld\".to_string()),\n+            cpu: \"generic-rv32\".to_string(),\n+            max_atomic_width: Some(0),\n+            atomic_cas: false,\n+            features: \"+m\".to_string(),\n+            executables: true,\n+            panic_strategy: PanicStrategy::Abort,\n+            relocation_model: RelocModel::Static,\n+            emit_debug_gdb_scripts: false,\n+            eh_frame_header: false,\n+            ..Default::default()\n+        },\n+    }\n+}"}, {"sha": "cc92d273ed1c5db9a28cac6d9a0163f0012c0a08", "filename": "src/doc/rustc/src/platform-support.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eae68350c8befd40a02c28687aea0b39628f4e59/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "raw_url": "https://github.com/rust-lang/rust/raw/eae68350c8befd40a02c28687aea0b39628f4e59/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fdoc%2Frustc%2Fsrc%2Fplatform-support.md?ref=eae68350c8befd40a02c28687aea0b39628f4e59", "patch": "@@ -271,6 +271,7 @@ target | std | host | notes\n `powerpc64le-unknown-linux-musl` | ? |  |\n `riscv32gc-unknown-linux-gnu` |   |   | RISC-V Linux (kernel 5.4, glibc 2.33)\n `riscv32gc-unknown-linux-musl` |   |   | RISC-V Linux (kernel 5.4, musl + RISCV32 support patches)\n+`riscv32im-unknown-none-elf` | * |  | Bare RISC-V (RV32IM ISA)\n `riscv32imc-esp-espidf` | \u2713 |  | RISC-V ESP-IDF\n `riscv64gc-unknown-freebsd` |   |   | RISC-V FreeBSD\n `riscv64gc-unknown-linux-musl` |   |   | RISC-V Linux (kernel 4.20, musl 1.2.0)"}, {"sha": "c682879e323300ff391d537a542daf7cba3694dc", "filename": "src/tools/build-manifest/src/main.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/eae68350c8befd40a02c28687aea0b39628f4e59/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/eae68350c8befd40a02c28687aea0b39628f4e59/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftools%2Fbuild-manifest%2Fsrc%2Fmain.rs?ref=eae68350c8befd40a02c28687aea0b39628f4e59", "patch": "@@ -117,6 +117,7 @@ static TARGETS: &[&str] = &[\n     \"powerpc64-unknown-linux-gnu\",\n     \"powerpc64le-unknown-linux-gnu\",\n     \"riscv32i-unknown-none-elf\",\n+    \"riscv32im-unknown-none-elf\",\n     \"riscv32imc-unknown-none-elf\",\n     \"riscv32imac-unknown-none-elf\",\n     \"riscv32gc-unknown-linux-gnu\","}]}