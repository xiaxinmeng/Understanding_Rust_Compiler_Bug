{"sha": "d7513140ca3135be9cab2c19600336a5c0cd195e", "node_id": "C_kwDOAAsO6NoAKGQ3NTEzMTQwY2EzMTM1YmU5Y2FiMmMxOTYwMDMzNmE1YzBjZDE5NWU", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-16T12:13:57Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2022-06-16T12:13:57Z"}, "message": "Add rustdonc-json regression test for #98009", "tree": {"sha": "6e93e91dcea2069711370f8f0ec85ff7b6147a46", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6e93e91dcea2069711370f8f0ec85ff7b6147a46"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d7513140ca3135be9cab2c19600336a5c0cd195e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d7513140ca3135be9cab2c19600336a5c0cd195e", "html_url": "https://github.com/rust-lang/rust/commit/d7513140ca3135be9cab2c19600336a5c0cd195e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d7513140ca3135be9cab2c19600336a5c0cd195e/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "392d2728683f140f6125732240e462c43c5caff4", "url": "https://api.github.com/repos/rust-lang/rust/commits/392d2728683f140f6125732240e462c43c5caff4", "html_url": "https://github.com/rust-lang/rust/commit/392d2728683f140f6125732240e462c43c5caff4"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "d80656c7fc8aad584706916c082afa779b4b8b70", "filename": "src/test/rustdoc-json/output_generics.rs", "status": "added", "additions": 38, "deletions": 0, "changes": 38, "blob_url": "https://github.com/rust-lang/rust/blob/d7513140ca3135be9cab2c19600336a5c0cd195e/src%2Ftest%2Frustdoc-json%2Foutput_generics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d7513140ca3135be9cab2c19600336a5c0cd195e/src%2Ftest%2Frustdoc-json%2Foutput_generics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc-json%2Foutput_generics.rs?ref=d7513140ca3135be9cab2c19600336a5c0cd195e", "patch": "@@ -0,0 +1,38 @@\n+// compile-flags: --document-private-items --document-hidden-items\n+\n+// This is a regression test for #98009.\n+\n+// @has output_generics.json\n+// @has - \"$.index[*][?(@.name=='this_compiles')]\"\n+// @has - \"$.index[*][?(@.name=='this_does_not')]\"\n+// @has - \"$.index[*][?(@.name=='Events')]\"\n+// @has - \"$.index[*][?(@.name=='Other')]\"\n+// @has - \"$.index[*][?(@.name=='Trait')]\"\n+\n+struct Events<R>(R);\n+\n+struct Other;\n+\n+pub trait Trait<T> {\n+    fn handle(value: T) -> Self;\n+}\n+\n+impl<T, U> Trait<U> for T where T: From<U> {\n+    fn handle(_: U) -> Self { unimplemented!() }\n+}\n+\n+impl<'a, R> Trait<&'a mut Events<R>> for Other {\n+    fn handle(_: &'a mut Events<R>) -> Self { unimplemented!() }\n+}\n+\n+fn this_compiles<'a, R>(value: &'a mut Events<R>) {\n+    for _ in 0..3 {\n+        Other::handle(&mut *value);\n+    }\n+}\n+\n+fn this_does_not<'a, R>(value: &'a mut Events<R>) {\n+    for _ in 0..3 {\n+        Other::handle(value);\n+    }\n+}"}]}