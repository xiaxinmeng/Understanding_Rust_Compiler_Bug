{"sha": "bb1639769ec2ef5ff297986f63b2954091c9c95c", "node_id": "C_kwDOAAsO6NoAKGJiMTYzOTc2OWVjMmVmNWZmMjk3OTg2ZjYzYjI5NTQwOTFjOWM5NWM", "commit": {"author": {"name": "Jannis Christopher K\u00f6hl", "email": "mail@koehl.dev", "date": "2022-08-30T22:56:39Z"}, "committer": {"name": "Jannis Christopher K\u00f6hl", "email": "mail@koehl.dev", "date": "2022-11-07T09:35:10Z"}, "message": "Clarify registration and tracking of references", "tree": {"sha": "0b39db4d46831d056f126852ea1d5782a56c1727", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0b39db4d46831d056f126852ea1d5782a56c1727"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bb1639769ec2ef5ff297986f63b2954091c9c95c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bb1639769ec2ef5ff297986f63b2954091c9c95c", "html_url": "https://github.com/rust-lang/rust/commit/bb1639769ec2ef5ff297986f63b2954091c9c95c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bb1639769ec2ef5ff297986f63b2954091c9c95c/comments", "author": {"login": "jachris", "id": 30163784, "node_id": "MDQ6VXNlcjMwMTYzNzg0", "avatar_url": "https://avatars.githubusercontent.com/u/30163784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jachris", "html_url": "https://github.com/jachris", "followers_url": "https://api.github.com/users/jachris/followers", "following_url": "https://api.github.com/users/jachris/following{/other_user}", "gists_url": "https://api.github.com/users/jachris/gists{/gist_id}", "starred_url": "https://api.github.com/users/jachris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jachris/subscriptions", "organizations_url": "https://api.github.com/users/jachris/orgs", "repos_url": "https://api.github.com/users/jachris/repos", "events_url": "https://api.github.com/users/jachris/events{/privacy}", "received_events_url": "https://api.github.com/users/jachris/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jachris", "id": 30163784, "node_id": "MDQ6VXNlcjMwMTYzNzg0", "avatar_url": "https://avatars.githubusercontent.com/u/30163784?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jachris", "html_url": "https://github.com/jachris", "followers_url": "https://api.github.com/users/jachris/followers", "following_url": "https://api.github.com/users/jachris/following{/other_user}", "gists_url": "https://api.github.com/users/jachris/gists{/gist_id}", "starred_url": "https://api.github.com/users/jachris/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jachris/subscriptions", "organizations_url": "https://api.github.com/users/jachris/orgs", "repos_url": "https://api.github.com/users/jachris/repos", "events_url": "https://api.github.com/users/jachris/events{/privacy}", "received_events_url": "https://api.github.com/users/jachris/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c83489c64bac7c99624d8a13a6fa503330f6b9b7", "url": "https://api.github.com/repos/rust-lang/rust/commits/c83489c64bac7c99624d8a13a6fa503330f6b9b7", "html_url": "https://github.com/rust-lang/rust/commit/c83489c64bac7c99624d8a13a6fa503330f6b9b7"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "662ab0bdfa5260728440b8953a9e26c44d2440df", "filename": "compiler/rustc_mir_dataflow/src/value_analysis.rs", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/bb1639769ec2ef5ff297986f63b2954091c9c95c/compiler%2Frustc_mir_dataflow%2Fsrc%2Fvalue_analysis.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bb1639769ec2ef5ff297986f63b2954091c9c95c/compiler%2Frustc_mir_dataflow%2Fsrc%2Fvalue_analysis.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_mir_dataflow%2Fsrc%2Fvalue_analysis.rs?ref=bb1639769ec2ef5ff297986f63b2954091c9c95c", "patch": "@@ -7,8 +7,14 @@\n //! override some of the `handle_` methods. For an example, see `ConstAnalysis`.\n //!\n //! An implementation must also provide a [`Map`]. Before the anaylsis begins, all places that\n-//! should be tracked during the analysis must be registered. The set of tracked places cannot be\n-//! changed during the analysis.\n+//! should be tracked during the analysis must be registered. Currently, the projections of these\n+//! places may only contain derefs, fields and downcasts (otherwise registration fails). During the\n+//! analysis, no new places can be registered.\n+//!\n+//! Note that if you want to track values behind references, you have to register the dereferenced\n+//! place. For example: Assume `let x = (0, 0)` and that we want to propagate values from `x.0` and\n+//! `x.1` also through the assignment `let y = &x`. In this case, we should register `x.0`, `x.1`,\n+//! `(*y).0` and `(*y).1`.\n \n use std::fmt::{Debug, Formatter};\n "}]}