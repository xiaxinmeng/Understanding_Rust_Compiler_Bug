{"sha": "1cb35c9b2653d437e1981f4162a436e5e2766074", "node_id": "MDY6Q29tbWl0NzI0NzEyOjFjYjM1YzliMjY1M2Q0MzdlMTk4MWY0MTYyYTQzNmU1ZTI3NjYwNzQ=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-21T21:12:12Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-22T02:10:31Z"}, "message": "rt: Rename record_sp to record_sp_limit", "tree": {"sha": "657572c9485384d72357d815e0b7c917b579e194", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/657572c9485384d72357d815e0b7c917b579e194"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/1cb35c9b2653d437e1981f4162a436e5e2766074", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/1cb35c9b2653d437e1981f4162a436e5e2766074", "html_url": "https://github.com/rust-lang/rust/commit/1cb35c9b2653d437e1981f4162a436e5e2766074", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/1cb35c9b2653d437e1981f4162a436e5e2766074/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ba322b0a700d274089f740b699d763210ac4578d", "url": "https://api.github.com/repos/rust-lang/rust/commits/ba322b0a700d274089f740b699d763210ac4578d", "html_url": "https://github.com/rust-lang/rust/commit/ba322b0a700d274089f740b699d763210ac4578d"}], "stats": {"total": 36, "additions": 18, "deletions": 18}, "files": [{"sha": "b9a08d9f9f3014285b248ebce7c72acc3b53dda5", "filename": "src/rt/arch/i386/record_sp.S", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Farch%2Fi386%2Frecord_sp.S", "raw_url": "https://github.com/rust-lang/rust/raw/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Farch%2Fi386%2Frecord_sp.S", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fi386%2Frecord_sp.S?ref=1cb35c9b2653d437e1981f4162a436e5e2766074", "patch": "@@ -1,36 +1,36 @@\n .text\n \n #if defined(__APPLE__) || defined(_WIN32)\n-#define RECORD_SP          _record_sp\n+#define RECORD_SP_LIMIT    _record_sp_limit\n #define GET_SP             _get_sp\n #define CHECK_STACK        _check_stack_alignment\n #else\n-#define RECORD_SP          record_sp\n+#define RECORD_SP_LIMIT    record_sp_limit\n #define GET_SP             get_sp\n #define CHECK_STACK        check_stack_alignment\n #endif\n \n-.globl RECORD_SP\n+.globl RECORD_SP_LIMIT\n .globl GET_SP\n .globl CHECK_STACK\n \n #if defined(__linux__) || defined(__FreeBSD__)\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tmovl 4(%esp), %eax\n \tmovl %eax, %gs:48\n \tret\n #endif\n \n #if defined(__APPLE__)\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tmovl $0x48+90*4, %eax\n \tmovl 4(%esp), %ecx\n \tmovl %ecx, %gs:(%eax)\n \tret\n #endif\n \n #if defined(_WIN32)\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tmovl 4(%esp), %eax\n \tmovl %eax, %fs:0x14\n \tret"}, {"sha": "87b6633d9f2cc00101d014eb06b285709fc3fd81", "filename": "src/rt/arch/x86_64/record_sp.S", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Farch%2Fx86_64%2Frecord_sp.S", "raw_url": "https://github.com/rust-lang/rust/raw/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Farch%2Fx86_64%2Frecord_sp.S", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Farch%2Fx86_64%2Frecord_sp.S?ref=1cb35c9b2653d437e1981f4162a436e5e2766074", "patch": "@@ -1,34 +1,34 @@\n .text\n \n #if defined(__APPLE__) || defined(_WIN32)\n-#define RECORD_SP          _record_sp\n+#define RECORD_SP_LIMIT    _record_sp_limit\n #define GET_SP             _get_sp\n #define CHECK_STACK        _check_stack_alignment\n #else\n-#define RECORD_SP          record_sp\n+#define RECORD_SP_LIMIT    record_sp_limit\n #define GET_SP             get_sp\n #define CHECK_STACK        check_stack_alignment\n #endif\n \n-.globl RECORD_SP\n+.globl RECORD_SP_LIMIT\n .globl GET_SP\n .globl CHECK_STACK\n \n #if defined(__linux__)\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tmovq %rdi, %fs:112\n \tret\n #elif defined(__APPLE__)\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tmovq $0x60+90*8, %rsi\n \tmovq %rdi, %gs:(%rsi)\n \tret\n #elif defined(__FreeBSD__)\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tmovq %rdi, %fs:24\n \tret\n #else\n-RECORD_SP:\n+RECORD_SP_LIMIT:\n \tret\n #endif\n "}, {"sha": "8ffc9c8c1dbdee052441512eb43b1df1a5a0780d", "filename": "src/rt/rust_task.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Frust_task.h", "raw_url": "https://github.com/rust-lang/rust/raw/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Frust_task.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_task.h?ref=1cb35c9b2653d437e1981f4162a436e5e2766074", "patch": "@@ -427,7 +427,7 @@ rust_task::prev_stack() {\n }\n \n extern \"C\" CDECL void\n-record_sp(void *limit);\n+record_sp_limit(void *limit);\n \n inline void\n rust_task::record_stack_limit() {\n@@ -442,7 +442,7 @@ rust_task::record_stack_limit() {\n       (uintptr_t)stk->end - RED_ZONE_SIZE\n       - (uintptr_t)stk->data >= LIMIT_OFFSET,\n       \"Stack size must be greater than LIMIT_OFFSET\");\n-    record_sp(stk->data + LIMIT_OFFSET + RED_ZONE_SIZE);\n+    record_sp_limit(stk->data + LIMIT_OFFSET + RED_ZONE_SIZE);\n }\n \n "}, {"sha": "58798147e9b1bb9b55d25288d794a7d7b2a770ca", "filename": "src/rt/rust_upcall.cpp", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Frust_upcall.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/1cb35c9b2653d437e1981f4162a436e5e2766074/src%2Frt%2Frust_upcall.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_upcall.cpp?ref=1cb35c9b2653d437e1981f4162a436e5e2766074", "patch": "@@ -50,7 +50,7 @@ call_upcall_on_c_stack(void *args, void *fn_ptr) {\n     task->call_on_c_stack(args, fn_ptr);\n }\n \n-extern \"C\" void record_sp(void *limit);\n+extern \"C\" void record_sp_limit(void *limit);\n \n /**********************************************************************\n  * Switches to the C-stack and invokes |fn_ptr|, passing |args| as argument.\n@@ -66,7 +66,7 @@ upcall_call_shim_on_c_stack(void *args, void *fn_ptr) {\n     // FIXME (1226) - The shim functions generated by rustc contain the\n     // morestack prologue, so we need to let them know they have enough\n     // stack.\n-    record_sp(0);\n+    record_sp_limit(0);\n \n     try {\n         task->call_on_c_stack(args, fn_ptr);\n@@ -102,7 +102,7 @@ upcall_call_shim_on_rust_stack(void *args, void *fn_ptr) {\n     }\n \n     // FIXME: As above\n-    record_sp(0);\n+    record_sp_limit(0);\n }\n \n /**********************************************************************/"}]}