{"sha": "a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "node_id": "MDY6Q29tbWl0NzI0NzEyOmE0OWJjOWNlNTk5NmI5Y2IwYzQ5MTQyZjQ1OGE2NjEyZWYzYzI1MmM=", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2018-05-26T02:44:07Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2018-05-26T02:44:10Z"}, "message": "Rename TokenStream::empty to TokenStream::new\n\nThere is no precedent for the `empty` name -- we do not have\n`Vec::empty` or `HashMap::empty` etc.", "tree": {"sha": "b524e4fcf819b22eca0241477d684c995b47f7b9", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b524e4fcf819b22eca0241477d684c995b47f7b9"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1\n\niQIcBAABAgAGBQJbCMotAAoJEPm6FDuV/22CLXcP/0IeIvTChOnyHwpx2CMYB6LG\n6vRFYVp/Y7Oqf0dXAvnOVgYSzfzN0puUpy76gWf9WsC14ZhuNKzq4EPqbA/jVEC1\noUF1AbFzbqbqNP2dZGrP/t1ymPjnUM5QjEOEHRfDmxiNlNWjJabqkzekHmdGxjoE\n0u4w8/R+tPytcfox5YgpYzneKjT8gIf9KQSNMiud8gJupC9ia6t3l4sdJKitbm08\ndEIVWkhad5ruiEech6eS2S3gyfDdAtXcoiAZDj/clL/iW3O5hTru9hw27BIeOOHb\nPEsz0ghCL4VNaS++mq0EKJZCYkNc+SijE+LMASFBZDHAWo9Cfc9AbBWR2HAvNIGV\nxieVrleAu65e76BjoZeh/ADmV2vRsZwYu8qgVvBtoWdDf7mxsrG6y1g/4JEY7x/d\nNUJmcfyi8yR8FKChnTrff08hsnoC9BsC/kecPbrujbQveTaI3k+RHYvcSVfS4akq\n4hZSvifrvTJvwDnv0pHIJZGt9GfrE57rB927FrLeXjREQmYgbA9LtUJbrXzk0DbR\n6rn/Le/fz6gLMWdvE9/47k6ho16xxEOHpIAm8rrK5Gfcs46M76SLLefYZDXC236X\nOvV/rQUrU8C50UCUf2FQKOrjdJ0GnLIjHKhFVoMn5zz8eNU+mhM3MhvMVK0idEoh\nHd+Ag7fbZUy9/JRpstKW\n=XTuy\n-----END PGP SIGNATURE-----", "payload": "tree b524e4fcf819b22eca0241477d684c995b47f7b9\nparent 07c415c2154f29d6dce8da0154ef41c8a5497fbf\nauthor David Tolnay <dtolnay@gmail.com> 1527302647 -0700\ncommitter David Tolnay <dtolnay@gmail.com> 1527302650 -0700\n\nRename TokenStream::empty to TokenStream::new\n\nThere is no precedent for the `empty` name -- we do not have\n`Vec::empty` or `HashMap::empty` etc.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "html_url": "https://github.com/rust-lang/rust/commit/a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07c415c2154f29d6dce8da0154ef41c8a5497fbf", "url": "https://api.github.com/repos/rust-lang/rust/commits/07c415c2154f29d6dce8da0154ef41c8a5497fbf", "html_url": "https://github.com/rust-lang/rust/commit/07c415c2154f29d6dce8da0154ef41c8a5497fbf"}], "stats": {"total": 14, "additions": 7, "deletions": 7}, "files": [{"sha": "35e2d6b23167e658391eb3a2f9b703f66410b08e", "filename": "src/libproc_macro/lib.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Flibproc_macro%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Flibproc_macro%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Flib.rs?ref=a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "patch": "@@ -93,7 +93,7 @@ impl !Sync for LexError {}\n impl TokenStream {\n     /// Returns an empty `TokenStream` containing no token trees.\n     #[unstable(feature = \"proc_macro\", issue = \"38356\")]\n-    pub fn empty() -> TokenStream {\n+    pub fn new() -> TokenStream {\n         TokenStream(tokenstream::TokenStream::empty())\n     }\n "}, {"sha": "c9d0bc1405fc01dcb17fcf6432590a0f32864786", "filename": "src/libproc_macro/quote.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Flibproc_macro%2Fquote.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Flibproc_macro%2Fquote.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibproc_macro%2Fquote.rs?ref=a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "patch": "@@ -71,7 +71,7 @@ macro_rules! quote_tree {\n }\n \n macro_rules! quote {\n-    () => { TokenStream::empty() };\n+    () => { TokenStream::new() };\n     ($($t:tt)*) => {\n         [$(quote_tree!($t),)*].iter()\n             .cloned()\n@@ -104,7 +104,7 @@ impl<T: Quote> Quote for Option<T> {\n impl Quote for TokenStream {\n     fn quote(self) -> TokenStream {\n         if self.is_empty() {\n-            return quote!(::TokenStream::empty());\n+            return quote!(::TokenStream::new());\n         }\n         let mut after_dollar = false;\n         let tokens = self.into_iter().filter_map(|tree| {"}, {"sha": "c37682220da3358d40da13e9906f03d546cb164f", "filename": "src/test/run-pass-fulldeps/proc-macro/auxiliary/modify-ast.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fmodify-ast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fmodify-ast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fmodify-ast.rs?ref=a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "patch": "@@ -26,7 +26,7 @@ pub fn assert1(_a: TokenStream, b: TokenStream) -> TokenStream {\n #[proc_macro_derive(Foo, attributes(foo))]\n pub fn assert2(a: TokenStream) -> TokenStream {\n     assert_eq(a, \"pub struct MyStructc { _a: i32, }\".parse().unwrap());\n-    TokenStream::empty()\n+    TokenStream::new()\n }\n \n fn assert_eq(a: TokenStream, b: TokenStream) {"}, {"sha": "a640fabe04fac7f0a0bccc31f9e814c9f1126335", "filename": "src/test/run-pass-fulldeps/proc-macro/auxiliary/not-joint.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fnot-joint.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fnot-joint.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frun-pass-fulldeps%2Fproc-macro%2Fauxiliary%2Fnot-joint.rs?ref=a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "patch": "@@ -20,13 +20,13 @@ use proc_macro::*;\n #[proc_macro]\n pub fn tokens(input: TokenStream) -> TokenStream {\n     assert_nothing_joint(input);\n-    TokenStream::empty()\n+    TokenStream::new()\n }\n \n #[proc_macro_attribute]\n pub fn nothing(_: TokenStream, input: TokenStream) -> TokenStream {\n     assert_nothing_joint(input);\n-    TokenStream::empty()\n+    TokenStream::new()\n }\n \n fn assert_nothing_joint(s: TokenStream) {"}, {"sha": "5b8fcab0baaa70903b112f1c93918adf843f7752", "filename": "src/test/ui-fulldeps/proc-macro/auxiliary/three-equals.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Ftest%2Fui-fulldeps%2Fproc-macro%2Fauxiliary%2Fthree-equals.rs", "raw_url": "https://github.com/rust-lang/rust/raw/a49bc9ce5996b9cb0c49142f458a6612ef3c252c/src%2Ftest%2Fui-fulldeps%2Fproc-macro%2Fauxiliary%2Fthree-equals.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui-fulldeps%2Fproc-macro%2Fauxiliary%2Fthree-equals.rs?ref=a49bc9ce5996b9cb0c49142f458a6612ef3c252c", "patch": "@@ -50,7 +50,7 @@ fn parse(input: TokenStream) -> Result<(), Diagnostic> {\n pub fn three_equals(input: TokenStream) -> TokenStream {\n     if let Err(diag) = parse(input) {\n         diag.emit();\n-        return TokenStream::empty();\n+        return TokenStream::new();\n     }\n \n     \"3\".parse().unwrap()"}]}