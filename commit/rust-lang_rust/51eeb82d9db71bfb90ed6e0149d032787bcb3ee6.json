{"sha": "51eeb82d9db71bfb90ed6e0149d032787bcb3ee6", "node_id": "C_kwDOAAsO6NoAKDUxZWViODJkOWRiNzFiZmI5MGVkNmUwMTQ5ZDAzMjc4N2JjYjNlZTY", "commit": {"author": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-20T02:56:12Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2022-01-20T03:04:35Z"}, "message": "Inline print_newline function", "tree": {"sha": "44eea7b0fb32ef311c93c7616a280bde7adc20db", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/44eea7b0fb32ef311c93c7616a280bde7adc20db"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/51eeb82d9db71bfb90ed6e0149d032787bcb3ee6", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmHo0UMACgkQ+boUO5X/\nbYJ9/Q/9GTMm24DU0qwLixuayFjiEpTEufNyixE9HXC8e+rzWdDTCR8f9JH4Dnze\nNYSmCvpsHqJGNvIUdg858bFnSedTNN+CKbD84pcVn2tezL1o30gVb1UV1Yw7wCD0\nTpP3qSpvJJqPfFw7m5t8rx1VKBk/SFuDPbfMGhKoxpS60gbR0i8PXg3TLWiQDj4R\n2YsI+GHqaAuKQHXlcM9CofQBZx2tEXvwTkvZWSLC0XJX7vuF73LuSAqt9MMDz9EF\ngPCHv6d+dqNwh9gBljFKTkaHXBCStN/I0IMSHvHZrhV2It7TqwnBEHBgqPPV55M5\ndDe05LAPdRbOrJb85pD3xonhxAs1uV0G1SMl9WkrjX0Iq+MIU1voKTHBreT14Q/Z\n56z4vqqYq4xVbKlCURaKs6wtsaTrZ3vt8Dsed8tLtzNeNo0PEOBvv/lQnG76VlOX\ncDdzc9r3JVaSfdmlnkv37ATZUPIrw6VO5ORmx8YF3KDf8QguQqiLf4a+uvnON//h\noMj3G5MdwXSS5vZk8UTh9x7MFj8d2/+Llto3CGJKWOHtEGXnU/719R+W+ffp2w0C\n/RtPN9HgQcJsGoazwQThIbDvGyGcjVGSc9bVD7+Ru0qE8VePhe3gQ0/Gx+ZbLDf1\n8GjoNMWCz3WgF582H8zWIvwg2gp9SA8TDzobXQ5h/jPMJilgk3k=\n=8XFI\n-----END PGP SIGNATURE-----", "payload": "tree 44eea7b0fb32ef311c93c7616a280bde7adc20db\nparent 224536f4fee75a9825e7da0a8a332786cc1f52f8\nauthor David Tolnay <dtolnay@gmail.com> 1642647372 -0800\ncommitter David Tolnay <dtolnay@gmail.com> 1642647875 -0800\n\nInline print_newline function\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/51eeb82d9db71bfb90ed6e0149d032787bcb3ee6", "html_url": "https://github.com/rust-lang/rust/commit/51eeb82d9db71bfb90ed6e0149d032787bcb3ee6", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/51eeb82d9db71bfb90ed6e0149d032787bcb3ee6/comments", "author": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "224536f4fee75a9825e7da0a8a332786cc1f52f8", "url": "https://api.github.com/repos/rust-lang/rust/commits/224536f4fee75a9825e7da0a8a332786cc1f52f8", "html_url": "https://github.com/rust-lang/rust/commit/224536f4fee75a9825e7da0a8a332786cc1f52f8"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "9fc9282ac80560535fadeafc120d61dc3cbec1ff", "filename": "compiler/rustc_ast_pretty/src/pp.rs", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/51eeb82d9db71bfb90ed6e0149d032787bcb3ee6/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "raw_url": "https://github.com/rust-lang/rust/raw/51eeb82d9db71bfb90ed6e0149d032787bcb3ee6/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_ast_pretty%2Fsrc%2Fpp.rs?ref=51eeb82d9db71bfb90ed6e0149d032787bcb3ee6", "patch": "@@ -364,11 +364,6 @@ impl Printer {\n         }\n     }\n \n-    fn print_newline(&mut self, amount: isize) {\n-        self.out.push('\\n');\n-        self.pending_indentation = amount;\n-    }\n-\n     fn get_top(&self) -> PrintFrame {\n         *self\n             .print_stack\n@@ -396,12 +391,14 @@ impl Printer {\n                 self.space -= token.blank_space;\n             }\n             PrintFrame::Broken { offset, breaks: Breaks::Consistent } => {\n-                self.print_newline(offset + token.offset);\n+                self.out.push('\\n');\n+                self.pending_indentation = offset + token.offset;\n                 self.space = self.margin - (offset + token.offset);\n             }\n             PrintFrame::Broken { offset, breaks: Breaks::Inconsistent } => {\n                 if size > self.space {\n-                    self.print_newline(offset + token.offset);\n+                    self.out.push('\\n');\n+                    self.pending_indentation = offset + token.offset;\n                     self.space = self.margin - (offset + token.offset);\n                 } else {\n                     self.pending_indentation += token.blank_space;"}]}