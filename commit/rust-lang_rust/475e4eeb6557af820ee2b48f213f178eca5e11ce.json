{"sha": "475e4eeb6557af820ee2b48f213f178eca5e11ce", "node_id": "C_kwDOAAsO6NoAKDQ3NWU0ZWViNjU1N2FmODIwZWUyYjQ4ZjIxM2YxNzhlY2E1ZTExY2U", "commit": {"author": {"name": "Jeremy Banks", "email": "_@jeremy.ca", "date": "2022-02-07T23:40:17Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-02-08T00:46:16Z"}, "message": "Remove obsolete no-op #[main] attribute from compiler.", "tree": {"sha": "1514a2a1f3a71693170cc0a75bac2356d9e2b30a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1514a2a1f3a71693170cc0a75bac2356d9e2b30a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/475e4eeb6557af820ee2b48f213f178eca5e11ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/475e4eeb6557af820ee2b48f213f178eca5e11ce", "html_url": "https://github.com/rust-lang/rust/commit/475e4eeb6557af820ee2b48f213f178eca5e11ce", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/475e4eeb6557af820ee2b48f213f178eca5e11ce/comments", "author": {"login": "jeremyBanks", "id": 18020, "node_id": "MDQ6VXNlcjE4MDIw", "avatar_url": "https://avatars.githubusercontent.com/u/18020?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jeremyBanks", "html_url": "https://github.com/jeremyBanks", "followers_url": "https://api.github.com/users/jeremyBanks/followers", "following_url": "https://api.github.com/users/jeremyBanks/following{/other_user}", "gists_url": "https://api.github.com/users/jeremyBanks/gists{/gist_id}", "starred_url": "https://api.github.com/users/jeremyBanks/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jeremyBanks/subscriptions", "organizations_url": "https://api.github.com/users/jeremyBanks/orgs", "repos_url": "https://api.github.com/users/jeremyBanks/repos", "events_url": "https://api.github.com/users/jeremyBanks/events{/privacy}", "received_events_url": "https://api.github.com/users/jeremyBanks/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f52c31840df7ec9c9350baff51a8964b20b5e1ba", "url": "https://api.github.com/repos/rust-lang/rust/commits/f52c31840df7ec9c9350baff51a8964b20b5e1ba", "html_url": "https://github.com/rust-lang/rust/commit/f52c31840df7ec9c9350baff51a8964b20b5e1ba"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "b224c64ece7f60e64f583e3743cf6c7ab3930650", "filename": "compiler/rustc_feature/src/builtin_attrs.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/475e4eeb6557af820ee2b48f213f178eca5e11ce/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/475e4eeb6557af820ee2b48f213f178eca5e11ce/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_feature%2Fsrc%2Fbuiltin_attrs.rs?ref=475e4eeb6557af820ee2b48f213f178eca5e11ce", "patch": "@@ -339,7 +339,6 @@ pub const BUILTIN_ATTRIBUTES: &[BuiltinAttribute] = &[\n     ),\n \n     // Entry point:\n-    ungated!(main, Normal, template!(Word), WarnFollowing),\n     ungated!(start, Normal, template!(Word), WarnFollowing),\n     ungated!(no_start, CrateLevel, template!(Word), WarnFollowing),\n     ungated!(no_main, CrateLevel, template!(Word), WarnFollowing),"}, {"sha": "0e887469d4466ddb49104bd472b20f089841163e", "filename": "src/test/ui/attributes/main-removed-1.rs", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-1.rs?ref=475e4eeb6557af820ee2b48f213f178eca5e11ce", "patch": "@@ -0,0 +1,2 @@\n+#[main]  //~ ERROR cannot find attribute `main` in this scope\n+fn main() {}"}, {"sha": "2422c5c3b623946e7e43c92769c97218552138eb", "filename": "src/test/ui/attributes/main-removed-1.stderr", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-1.stderr?ref=475e4eeb6557af820ee2b48f213f178eca5e11ce", "patch": "@@ -0,0 +1,10 @@\n+error: cannot find attribute `main` in this scope\n+  --> $DIR/main-removed-1.rs:1:3\n+   |\n+LL | #[main]\n+   |   ^^^^\n+   |\n+   = note: `main` is in scope, but it is a function, not an attribute\n+\n+error: aborting due to previous error\n+"}, {"sha": "196b5be2dd0864164b3257147904ffa570bb202c", "filename": "src/test/ui/attributes/main-removed-2/auxiliary/tokyo.rs", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-2%2Fauxiliary%2Ftokyo.rs", "raw_url": "https://github.com/rust-lang/rust/raw/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-2%2Fauxiliary%2Ftokyo.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-2%2Fauxiliary%2Ftokyo.rs?ref=475e4eeb6557af820ee2b48f213f178eca5e11ce", "patch": "@@ -0,0 +1,12 @@\n+// force-host\n+// no-prefer-dynamic\n+\n+#![crate_type = \"proc-macro\"]\n+\n+extern crate proc_macro;\n+use proc_macro::TokenStream;\n+\n+#[proc_macro_attribute]\n+pub fn main(_: TokenStream, input: TokenStream) -> TokenStream {\n+    \"fn main() { println!(\\\"Hello Tokyo!\\\"); }\".parse().unwrap()\n+}"}, {"sha": "e8fecf825fa83b6f7e4e08162a2c6d1814e1cd16", "filename": "src/test/ui/attributes/main-removed-2/main.rs", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-2%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/475e4eeb6557af820ee2b48f213f178eca5e11ce/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-2%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fattributes%2Fmain-removed-2%2Fmain.rs?ref=475e4eeb6557af820ee2b48f213f178eca5e11ce", "patch": "@@ -0,0 +1,11 @@\n+// run-pass\n+// aux-build:tokyo.rs\n+// compile-flags:--extern tokyo\n+// edition:2021\n+\n+use tokyo::main;\n+\n+#[main]\n+fn main() {\n+    panic!(\"the #[main] macro should replace this with non-panicking code\")\n+}"}]}