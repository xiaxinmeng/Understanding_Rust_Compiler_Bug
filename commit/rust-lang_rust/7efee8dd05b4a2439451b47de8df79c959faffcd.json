{"sha": "7efee8dd05b4a2439451b47de8df79c959faffcd", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdlZmVlOGRkMDViNGEyNDM5NDUxYjQ3ZGU4ZGY3OWM5NTlmYWZmY2Q=", "commit": {"author": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2019-08-24T23:04:32Z"}, "committer": {"name": "Santiago Pastorino", "email": "spastorino@gmail.com", "date": "2019-09-09T21:16:49Z"}, "message": "Use rposition to find the position of an elem", "tree": {"sha": "24042bf5be936e570365e4951fdf6d1f880d0364", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/24042bf5be936e570365e4951fdf6d1f880d0364"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7efee8dd05b4a2439451b47de8df79c959faffcd", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEmNHc6jmXzkUyxd4xiMlBzaHUZDIFAl12wUEACgkQiMlBzaHU\nZDL2IhAAsAOp96dirN/qGkpYuHSYAvRWgK7FpkvpuCZJqSZFvB/6CSgaf8VLlmOy\nP9NNA+bR10M8LCHiAya8K8at8qmvHAxjLTUYNzD+Iov9hwWKsyEvVHqgCoAs3CM+\nAVNA0+XygmsKfaBwIBwvy9Yoo2AJNpqzITo3VvXYVeerY1IazAVEkomWe4YZVNuP\nBCDUEq+Ms8Gn1O42/1kfAxe1PWtsjdY6LBs4kkwQ28iGEEG6ZTFoM+L5AdrF2sN/\nMSwZZ6irhrwl8zlhDV/e9DuEKhpF/R5X7hcWpJR49PsrbjITmHhrDBOEeltqopSU\nYNKjwFZqp9tCRN1mDOzYAJLxvY8+gbz2spkCcNtscgB4lmgROLTWaOfqABJ1ipw3\n/o/RdwFk9lzoBpfDv7+f0eIK7XU10SB6lcjX7M/EohcOj0ezBusD61amfH6+e3Zf\njt+ZejDLRNhxwZB70L7TnmrtSipAd/MCqWMuomU/IojPG27s77snv03T/UL07CaO\nTHiNwlUo1Km492mssP6gP9ws9o958Bf/XTiaEDm1IniowPX3ZSnq2DzjSWxfzRms\nRngEBf4O2XG2gab6x6lc2F3AgC8c7AOf9F75PSVuifwx2iu3Ku9GHV+jGD4asc+m\nVM0bwJeTyE2gr1tfUit9D/RHiV5R29pXsqwlCYAkyzi9kMI/yz4=\n=osqy\n-----END PGP SIGNATURE-----", "payload": "tree 24042bf5be936e570365e4951fdf6d1f880d0364\nparent e9c41148c0c834d13d6f45bfd99c8f23781c5d31\nauthor Santiago Pastorino <spastorino@gmail.com> 1566687872 -0700\ncommitter Santiago Pastorino <spastorino@gmail.com> 1568063809 -0300\n\nUse rposition to find the position of an elem\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7efee8dd05b4a2439451b47de8df79c959faffcd", "html_url": "https://github.com/rust-lang/rust/commit/7efee8dd05b4a2439451b47de8df79c959faffcd", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7efee8dd05b4a2439451b47de8df79c959faffcd/comments", "author": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "committer": {"login": "spastorino", "id": 52642, "node_id": "MDQ6VXNlcjUyNjQy", "avatar_url": "https://avatars.githubusercontent.com/u/52642?v=4", "gravatar_id": "", "url": "https://api.github.com/users/spastorino", "html_url": "https://github.com/spastorino", "followers_url": "https://api.github.com/users/spastorino/followers", "following_url": "https://api.github.com/users/spastorino/following{/other_user}", "gists_url": "https://api.github.com/users/spastorino/gists{/gist_id}", "starred_url": "https://api.github.com/users/spastorino/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/spastorino/subscriptions", "organizations_url": "https://api.github.com/users/spastorino/orgs", "repos_url": "https://api.github.com/users/spastorino/repos", "events_url": "https://api.github.com/users/spastorino/events{/privacy}", "received_events_url": "https://api.github.com/users/spastorino/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e9c41148c0c834d13d6f45bfd99c8f23781c5d31", "url": "https://api.github.com/repos/rust-lang/rust/commits/e9c41148c0c834d13d6f45bfd99c8f23781c5d31", "html_url": "https://github.com/rust-lang/rust/commit/e9c41148c0c834d13d6f45bfd99c8f23781c5d31"}], "stats": {"total": 15, "additions": 7, "deletions": 8}, "files": [{"sha": "64368ab604645d6a8986e4a4210fd8846ef42f44", "filename": "src/librustc_mir/build/matches/mod.rs", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7efee8dd05b4a2439451b47de8df79c959faffcd/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7efee8dd05b4a2439451b47de8df79c959faffcd/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_mir%2Fbuild%2Fmatches%2Fmod.rs?ref=7efee8dd05b4a2439451b47de8df79c959faffcd", "patch": "@@ -942,16 +942,15 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n             for Binding { source, .. }\n                 in matched_candidates.iter().flat_map(|candidate| &candidate.bindings)\n             {\n-                for (i, elem) in source.projection.iter().enumerate().rev() {\n+                if let Some(i) =\n+                    source.projection.iter().rposition(|elem| *elem == ProjectionElem::Deref)\n+                {\n                     let proj_base = &source.projection[..i];\n \n-                    if let ProjectionElem::Deref = elem {\n-                        fake_borrows.insert(Place {\n-                            base: source.base.clone(),\n-                            projection: proj_base.to_vec().into_boxed_slice(),\n-                        });\n-                        break;\n-                    }\n+                    fake_borrows.insert(Place {\n+                        base: source.base.clone(),\n+                        projection: proj_base.to_vec().into_boxed_slice(),\n+                    });\n                 }\n             }\n         }"}]}