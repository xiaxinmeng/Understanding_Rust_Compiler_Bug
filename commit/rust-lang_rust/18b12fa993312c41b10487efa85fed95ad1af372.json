{"sha": "18b12fa993312c41b10487efa85fed95ad1af372", "node_id": "C_kwDOAAsO6NoAKDE4YjEyZmE5OTMzMTJjNDFiMTA0ODdlZmE4NWZlZDk1YWQxYWYzNzI", "commit": {"author": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-01T21:43:17Z"}, "committer": {"name": "Yuki Okushi", "email": "jtitor@2k36.org", "date": "2022-05-01T21:43:17Z"}, "message": "Add a regression test for #92305", "tree": {"sha": "f8628a0ddb945d58da90849608ee2b9b7d15201f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f8628a0ddb945d58da90849608ee2b9b7d15201f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/18b12fa993312c41b10487efa85fed95ad1af372", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEClCZYSKPPkQPouAvN5zu/dY+XdcFAmJu/vUACgkQN5zu/dY+\nXdfaKQ//SZiUK5hN7J1XGM7z/p/VX9m7JAlFEMNDcRYRQdNkwGBSr7n+agfV30Cb\ny8Cw+Rvk7wE0YNPCenS7zzFEk+tnPOmotd8EAcVdupABRgiMZhBfNLhjcF/gqmOw\nJ8XP/0UbUPGEBdSgZ50Ev/6+DvqAj8fX2rz9xXkWE/b3JCTvGoScSQBWO/OGXXsV\n1/yNmCEGUOQDIPC1DNvvq647JFV05/6pPpBGuO2rNeWRXv37ForSfuztiOrvmdv2\nZA39/kLYTeSydju16/X9cdpblrGkPHRJylvCyCXYBqYIsjibPHvl4MQmjQlApFHk\nkpFuLGeNuY66UxY577HmirQ//WSt+X+bxgd83mROTPVarrmLPCCKERUP5UxsVml5\nuujhZNFhcRZcKMZS2a1PTB8TnhcK/OIabV74RVjEarJzb8fDqd4+18zcxducSos0\nAZfcrMcWs8v+pY3BYM3FrsXk88mQjJ1ifpi6oUiFlXK9oYYgr4jg1V88nw9lh+iR\nuQ/mi6viu1JQ3RY2rLPt1GLN9dNC2pij7JsoKKi7KGsQzx2l7so5buoAmSNszwUY\nuIsKOEGnyuoKj5mfahofomeVOL29X0UqG7oTOqQCgRlUUc1JczTZ+v+XqGT6DyjO\n2gYzP7qtyPBAphJmx47Xy2iSJDzlzKkbV6tLd0dP+IMOY4mqv7c=\n=gqjY\n-----END PGP SIGNATURE-----", "payload": "tree f8628a0ddb945d58da90849608ee2b9b7d15201f\nparent a933de83989471ac444a13d62996d30621542654\nauthor Yuki Okushi <jtitor@2k36.org> 1651441397 +0900\ncommitter Yuki Okushi <jtitor@2k36.org> 1651441397 +0900\n\nAdd a regression test for #92305\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/18b12fa993312c41b10487efa85fed95ad1af372", "html_url": "https://github.com/rust-lang/rust/commit/18b12fa993312c41b10487efa85fed95ad1af372", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/18b12fa993312c41b10487efa85fed95ad1af372/comments", "author": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JohnTitor", "id": 25030997, "node_id": "MDQ6VXNlcjI1MDMwOTk3", "avatar_url": "https://avatars.githubusercontent.com/u/25030997?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JohnTitor", "html_url": "https://github.com/JohnTitor", "followers_url": "https://api.github.com/users/JohnTitor/followers", "following_url": "https://api.github.com/users/JohnTitor/following{/other_user}", "gists_url": "https://api.github.com/users/JohnTitor/gists{/gist_id}", "starred_url": "https://api.github.com/users/JohnTitor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JohnTitor/subscriptions", "organizations_url": "https://api.github.com/users/JohnTitor/orgs", "repos_url": "https://api.github.com/users/JohnTitor/repos", "events_url": "https://api.github.com/users/JohnTitor/events{/privacy}", "received_events_url": "https://api.github.com/users/JohnTitor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a933de83989471ac444a13d62996d30621542654", "url": "https://api.github.com/repos/rust-lang/rust/commits/a933de83989471ac444a13d62996d30621542654", "html_url": "https://github.com/rust-lang/rust/commit/a933de83989471ac444a13d62996d30621542654"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "1518c116b318571573629d1979540cdc8c5fdec4", "filename": "src/test/ui/impl-trait/issues/issue-92305.rs", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/18b12fa993312c41b10487efa85fed95ad1af372/src%2Ftest%2Fui%2Fimpl-trait%2Fissues%2Fissue-92305.rs", "raw_url": "https://github.com/rust-lang/rust/raw/18b12fa993312c41b10487efa85fed95ad1af372/src%2Ftest%2Fui%2Fimpl-trait%2Fissues%2Fissue-92305.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissues%2Fissue-92305.rs?ref=18b12fa993312c41b10487efa85fed95ad1af372", "patch": "@@ -0,0 +1,15 @@\n+// edition:2021\n+\n+use std::iter;\n+\n+fn f<T>(data: &[T]) -> impl Iterator<Item = Vec> {\n+    //~^ ERROR: missing generics for struct `Vec` [E0107]\n+    iter::empty() //~ ERROR: type annotations needed [E0282]\n+}\n+\n+fn g<T>(data: &[T], target: T) -> impl Iterator<Item = Vec<T>> {\n+    //~^ ERROR: type annotations needed [E0282]\n+    f(data).filter(|x| x == target)\n+}\n+\n+fn main() {}"}, {"sha": "c4fc49225e9a00daf5ce0a64d5a0ebca7d1e5b32", "filename": "src/test/ui/impl-trait/issues/issue-92305.stderr", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/rust-lang/rust/blob/18b12fa993312c41b10487efa85fed95ad1af372/src%2Ftest%2Fui%2Fimpl-trait%2Fissues%2Fissue-92305.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/18b12fa993312c41b10487efa85fed95ad1af372/src%2Ftest%2Fui%2Fimpl-trait%2Fissues%2Fissue-92305.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fimpl-trait%2Fissues%2Fissue-92305.stderr?ref=18b12fa993312c41b10487efa85fed95ad1af372", "patch": "@@ -0,0 +1,32 @@\n+error[E0107]: missing generics for struct `Vec`\n+  --> $DIR/issue-92305.rs:5:45\n+   |\n+LL | fn f<T>(data: &[T]) -> impl Iterator<Item = Vec> {\n+   |                                             ^^^ expected at least 1 generic argument\n+   |\n+note: struct defined here, with at least 1 generic parameter: `T`\n+  --> $SRC_DIR/alloc/src/vec/mod.rs:LL:COL\n+   |\n+LL | pub struct Vec<T, #[unstable(feature = \"allocator_api\", issue = \"32838\")] A: Allocator = Global> {\n+   |            ^^^ -\n+help: add missing generic argument\n+   |\n+LL | fn f<T>(data: &[T]) -> impl Iterator<Item = Vec<T>> {\n+   |                                             ~~~~~~\n+\n+error[E0282]: type annotations needed\n+  --> $DIR/issue-92305.rs:7:5\n+   |\n+LL |     iter::empty()\n+   |     ^^^^^^^^^^^ cannot infer type for type parameter `T` declared on the function `empty`\n+\n+error[E0282]: type annotations needed\n+  --> $DIR/issue-92305.rs:10:35\n+   |\n+LL | fn g<T>(data: &[T], target: T) -> impl Iterator<Item = Vec<T>> {\n+   |                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ cannot infer type\n+\n+error: aborting due to 3 previous errors\n+\n+Some errors have detailed explanations: E0107, E0282.\n+For more information about an error, try `rustc --explain E0107`."}]}