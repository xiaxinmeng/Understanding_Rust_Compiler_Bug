{"sha": "183090f775b058c3f1006b92eb4186c8af101aa7", "node_id": "C_kwDOAAsO6NoAKDE4MzA5MGY3NzViMDU4YzNmMTAwNmI5MmViNDE4NmM4YWYxMDFhYTc", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-03-20T01:50:36Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2022-03-20T01:50:36Z"}, "message": "Auto merge of #94976 - jclulow:solaris-festival, r=Mark-Simulacrum\n\nsolaris build environment should include libsendfile/liblgrp\n\nAs of version 0.2.120 of the libc crate, the solaris target now requires\nsome additional libraries to be present in the sysroot.  Note that the\nsolaris target doesn't really build against files from Solaris, but\nrather against some files from DilOS (a platform similar to both Solaris\nand illumos).  Pull in the extra libraries and their compilation links\nfrom that apt repository.\n\nThis aims to assist with rust-lang/rust#94052.", "tree": {"sha": "5a113e66ef37c14a398f80b231506a2da32076ef", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/5a113e66ef37c14a398f80b231506a2da32076ef"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/183090f775b058c3f1006b92eb4186c8af101aa7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/183090f775b058c3f1006b92eb4186c8af101aa7", "html_url": "https://github.com/rust-lang/rust/commit/183090f775b058c3f1006b92eb4186c8af101aa7", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/183090f775b058c3f1006b92eb4186c8af101aa7/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f2661cfe341f88bea919daf52a07015dceaf7a6a", "url": "https://api.github.com/repos/rust-lang/rust/commits/f2661cfe341f88bea919daf52a07015dceaf7a6a", "html_url": "https://github.com/rust-lang/rust/commit/f2661cfe341f88bea919daf52a07015dceaf7a6a"}, {"sha": "0dcb1754b6c2d2cf97aa06973875a6484be59adb", "url": "https://api.github.com/repos/rust-lang/rust/commits/0dcb1754b6c2d2cf97aa06973875a6484be59adb", "html_url": "https://github.com/rust-lang/rust/commit/0dcb1754b6c2d2cf97aa06973875a6484be59adb"}], "stats": {"total": 20, "additions": 12, "deletions": 8}, "files": [{"sha": "cf784a66ae4f9b0a7beb774bb9ec71a4259210b0", "filename": "src/ci/docker/host-x86_64/dist-various-2/build-solaris-toolchain.sh", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/rust-lang/rust/blob/183090f775b058c3f1006b92eb4186c8af101aa7/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-solaris-toolchain.sh", "raw_url": "https://github.com/rust-lang/rust/raw/183090f775b058c3f1006b92eb4186c8af101aa7/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-solaris-toolchain.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fhost-x86_64%2Fdist-various-2%2Fbuild-solaris-toolchain.sh?ref=183090f775b058c3f1006b92eb4186c8af101aa7", "patch": "@@ -33,14 +33,18 @@ cd solaris\n dpkg --add-architecture $APT_ARCH\n apt-get update\n apt-get download $(apt-cache depends --recurse --no-replaces \\\n-  libc:$APT_ARCH           \\\n-  libm-dev:$APT_ARCH       \\\n-  libpthread:$APT_ARCH     \\\n-  libresolv:$APT_ARCH      \\\n-  librt:$APT_ARCH          \\\n-  libsocket:$APT_ARCH      \\\n-  system-crt:$APT_ARCH     \\\n-  system-header:$APT_ARCH  \\\n+  libc:$APT_ARCH                                             \\\n+  liblgrp-dev:$APT_ARCH                                      \\\n+  liblgrp:$APT_ARCH                                          \\\n+  libm-dev:$APT_ARCH                                         \\\n+  libpthread:$APT_ARCH                                       \\\n+  libresolv:$APT_ARCH                                        \\\n+  librt:$APT_ARCH                                            \\\n+  libsendfile-dev:$APT_ARCH                                  \\\n+  libsendfile:$APT_ARCH                                      \\\n+  libsocket:$APT_ARCH                                        \\\n+  system-crt:$APT_ARCH                                       \\\n+  system-header:$APT_ARCH                                    \\\n   | grep \"^\\w\")\n \n for deb in *$APT_ARCH.deb; do"}]}