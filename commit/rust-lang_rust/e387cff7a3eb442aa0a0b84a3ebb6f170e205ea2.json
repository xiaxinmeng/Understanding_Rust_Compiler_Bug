{"sha": "e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2", "node_id": "C_kwDOAAsO6NoAKGUzODdjZmY3YTNlYjQ0MmFhMGEwYjg0YTNlYmI2ZjE3MGUyMDVlYTI", "commit": {"author": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2022-06-27T18:05:10Z"}, "committer": {"name": "Josh Triplett", "email": "josh@joshtriplett.org", "date": "2022-07-15T09:54:06Z"}, "message": "Also use fallback for futimens on Android\n\nfutimens requires Android API level 19, and std still supports older API\nlevels.", "tree": {"sha": "0944bfe14dcb1b8c7690b8c7b3ee06f9ffd42dcd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/0944bfe14dcb1b8c7690b8c7b3ee06f9ffd42dcd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2", "html_url": "https://github.com/rust-lang/rust/commit/e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2/comments", "author": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "committer": {"login": "joshtriplett", "id": 162737, "node_id": "MDQ6VXNlcjE2MjczNw==", "avatar_url": "https://avatars.githubusercontent.com/u/162737?v=4", "gravatar_id": "", "url": "https://api.github.com/users/joshtriplett", "html_url": "https://github.com/joshtriplett", "followers_url": "https://api.github.com/users/joshtriplett/followers", "following_url": "https://api.github.com/users/joshtriplett/following{/other_user}", "gists_url": "https://api.github.com/users/joshtriplett/gists{/gist_id}", "starred_url": "https://api.github.com/users/joshtriplett/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/joshtriplett/subscriptions", "organizations_url": "https://api.github.com/users/joshtriplett/orgs", "repos_url": "https://api.github.com/users/joshtriplett/repos", "events_url": "https://api.github.com/users/joshtriplett/events{/privacy}", "received_events_url": "https://api.github.com/users/joshtriplett/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "828b637c2a37c85f8d3734d57ad459868ea31584", "url": "https://api.github.com/repos/rust-lang/rust/commits/828b637c2a37c85f8d3734d57ad459868ea31584", "html_url": "https://github.com/rust-lang/rust/commit/828b637c2a37c85f8d3734d57ad459868ea31584"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "91deff71e4222be9dd17ab810373ed9233a6fdc1", "filename": "library/std/src/sys/unix/fs.rs", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2/library%2Fstd%2Fsrc%2Fsys%2Funix%2Ffs.rs", "raw_url": "https://github.com/rust-lang/rust/raw/e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2/library%2Fstd%2Fsrc%2Fsys%2Funix%2Ffs.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fstd%2Fsrc%2Fsys%2Funix%2Ffs.rs?ref=e387cff7a3eb442aa0a0b84a3ebb6f170e205ea2", "patch": "@@ -19,7 +19,7 @@ use crate::sys_common::{AsInner, AsInnerMut, FromInner, IntoInner};\n     target_os = \"ios\",\n ))]\n use crate::sys::weak::syscall;\n-#[cfg(target_os = \"macos\")]\n+#[cfg(any(target_os = \"android\", target_os = \"macos\"))]\n use crate::sys::weak::weak;\n \n use libc::{c_int, mode_t};\n@@ -1064,8 +1064,8 @@ impl File {\n \n     pub fn set_times(&self, times: FileTimes) -> io::Result<()> {\n         cfg_if::cfg_if! {\n-            // futimens requires macOS 10.13\n-            if #[cfg(target_os = \"macos\")] {\n+            // futimens requires macOS 10.13, and Android API level 19\n+            if #[cfg(any(target_os = \"android\", target_os = \"macos\"))] {\n                 fn ts_to_tv(ts: &libc::timespec) -> libc::timeval {\n                     libc::timeval { tv_sec: ts.tv_sec, tv_usec: (ts.tv_nsec / 1000) as _ }\n                 }"}]}