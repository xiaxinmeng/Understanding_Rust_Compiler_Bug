{"sha": "7ac657116343c599806e733c2caf896681ab3bd1", "node_id": "MDY6Q29tbWl0NzI0NzEyOjdhYzY1NzExNjM0M2M1OTk4MDZlNzMzYzJjYWY4OTY2ODFhYjNiZDE=", "commit": {"author": {"name": "Young-il Choi", "email": "duddlf.choi@samsung.com", "date": "2013-05-04T07:00:11Z"}, "committer": {"name": "Young-il Choi", "email": "duddlf.choi@samsung.com", "date": "2013-05-04T07:00:11Z"}, "message": "rt: glob, globfree dummy function for android", "tree": {"sha": "1e63a4b1b15f3c1ffeb0474c9b703a6e7db70204", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1e63a4b1b15f3c1ffeb0474c9b703a6e7db70204"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7ac657116343c599806e733c2caf896681ab3bd1", "comment_count": 4, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7ac657116343c599806e733c2caf896681ab3bd1", "html_url": "https://github.com/rust-lang/rust/commit/7ac657116343c599806e733c2caf896681ab3bd1", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7ac657116343c599806e733c2caf896681ab3bd1/comments", "author": {"login": "yichoi", "id": 3222276, "node_id": "MDQ6VXNlcjMyMjIyNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3222276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yichoi", "html_url": "https://github.com/yichoi", "followers_url": "https://api.github.com/users/yichoi/followers", "following_url": "https://api.github.com/users/yichoi/following{/other_user}", "gists_url": "https://api.github.com/users/yichoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/yichoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yichoi/subscriptions", "organizations_url": "https://api.github.com/users/yichoi/orgs", "repos_url": "https://api.github.com/users/yichoi/repos", "events_url": "https://api.github.com/users/yichoi/events{/privacy}", "received_events_url": "https://api.github.com/users/yichoi/received_events", "type": "User", "site_admin": false}, "committer": {"login": "yichoi", "id": 3222276, "node_id": "MDQ6VXNlcjMyMjIyNzY=", "avatar_url": "https://avatars.githubusercontent.com/u/3222276?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yichoi", "html_url": "https://github.com/yichoi", "followers_url": "https://api.github.com/users/yichoi/followers", "following_url": "https://api.github.com/users/yichoi/following{/other_user}", "gists_url": "https://api.github.com/users/yichoi/gists{/gist_id}", "starred_url": "https://api.github.com/users/yichoi/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yichoi/subscriptions", "organizations_url": "https://api.github.com/users/yichoi/orgs", "repos_url": "https://api.github.com/users/yichoi/repos", "events_url": "https://api.github.com/users/yichoi/events{/privacy}", "received_events_url": "https://api.github.com/users/yichoi/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3ab74b8b933a1bc2c5f207ae5c023cf3e7aeb58", "url": "https://api.github.com/repos/rust-lang/rust/commits/c3ab74b8b933a1bc2c5f207ae5c023cf3e7aeb58", "html_url": "https://github.com/rust-lang/rust/commit/c3ab74b8b933a1bc2c5f207ae5c023cf3e7aeb58"}], "stats": {"total": 38, "additions": 36, "deletions": 2}, "files": [{"sha": "0032e9c6e7fea0a02659a207942272dc0f3697a3", "filename": "src/rt/rust_android_dummy.cpp", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/7ac657116343c599806e733c2caf896681ab3bd1/src%2Frt%2Frust_android_dummy.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/7ac657116343c599806e733c2caf896681ab3bd1/src%2Frt%2Frust_android_dummy.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_android_dummy.cpp?ref=7ac657116343c599806e733c2caf896681ab3bd1", "patch": "@@ -2,12 +2,12 @@\n // Use of this source code is governed by a BSD-style license that can be\n // found in the LICENSE file.\n \n+#ifdef __ANDROID__\n+\n #include \"rust_android_dummy.h\"\n #include <math.h>\n #include <errno.h>\n \n-#ifdef __ANDROID__\n-\n int backtrace(void **array, int size) { return 0; }\n \n char **backtrace_symbols(void *const *array, int size) { return 0; }\n@@ -59,7 +59,18 @@ extern \"C\" void srand()\n extern \"C\" void atof()\n {\n }\n+\n extern \"C\" void tgammaf()\n {\n }\n+\n+extern \"C\" int glob(const char *pattern, int flags, int (*errfunc) (const char *epath, int eerrno), glob_t *pglob)\n+{\n+    return 0;\n+}\n+\n+extern \"C\" void globfree(glob_t *pglob)\n+{\n+}\n+\n #endif"}, {"sha": "a7c63035c00dc8c895a538feb985fda5ccc704d1", "filename": "src/rt/rust_android_dummy.h", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/rust-lang/rust/blob/7ac657116343c599806e733c2caf896681ab3bd1/src%2Frt%2Frust_android_dummy.h", "raw_url": "https://github.com/rust-lang/rust/raw/7ac657116343c599806e733c2caf896681ab3bd1/src%2Frt%2Frust_android_dummy.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_android_dummy.h?ref=7ac657116343c599806e733c2caf896681ab3bd1", "patch": "@@ -11,5 +11,28 @@ char **backtrace_symbols (void *__const *__array, int __size);\n \n void backtrace_symbols_fd (void *__const *__array, int __size, int __fd);\n \n+#include <sys/types.h>\n+\n+struct stat;\n+typedef struct {\n+    size_t gl_pathc;    /* Count of total paths so far. */\n+    size_t gl_matchc;   /* Count of paths matching pattern. */\n+    size_t gl_offs;     /* Reserved at beginning of gl_pathv. */\n+    int gl_flags;       /* Copy of flags parameter to glob. */\n+    char **gl_pathv;    /* List of paths matching pattern. */\n+                /* Copy of errfunc parameter to glob. */\n+    int (*gl_errfunc)(const char *, int);\n+\n+    /*\n+     * Alternate filesystem access methods for glob; replacement\n+     * versions of closedir(3), readdir(3), opendir(3), stat(2)\n+     * and lstat(2).\n+     */\n+    void (*gl_closedir)(void *);\n+    struct dirent *(*gl_readdir)(void *);\n+    void *(*gl_opendir)(const char *);\n+    int (*gl_lstat)(const char *, struct stat *);\n+} glob_t;\n+\n #endif\n "}]}