{"sha": "0402c6ace7aff13bef4791f578ffb623da69fef2", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA0MDJjNmFjZTdhZmYxM2JlZjQ3OTFmNTc4ZmZiNjIzZGE2OWZlZjI=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-11-20T16:51:41Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2020-11-20T16:51:41Z"}, "message": "Auto merge of #6354 - Daniel-B-Smith:refcell_ref_await, r=flip1995\n\nDowngrade the await holding lints from correctness\n\nWe found a false positive in these lints (see https://github.com/rust-lang/rust-clippy/issues/6353 for more details). As a short-term mitigation, this downgrades the lints from correctness to limit the noise.\n\nchangelog: downgrade AWAIT_HOLDING_REFCELL_REF and AWAIT_HOLDING_LOCK to pedantic. From rustup earlier, where I forgot the changlog: deprecate [`panic_params`] (uplifted)", "tree": {"sha": "a0fef327ca4b0b83b99936d86229abfd1b5ff149", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a0fef327ca4b0b83b99936d86229abfd1b5ff149"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0402c6ace7aff13bef4791f578ffb623da69fef2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0402c6ace7aff13bef4791f578ffb623da69fef2", "html_url": "https://github.com/rust-lang/rust/commit/0402c6ace7aff13bef4791f578ffb623da69fef2", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0402c6ace7aff13bef4791f578ffb623da69fef2/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "70ffebf5f0e5edca866c624212f08e9f11d41e17", "url": "https://api.github.com/repos/rust-lang/rust/commits/70ffebf5f0e5edca866c624212f08e9f11d41e17", "html_url": "https://github.com/rust-lang/rust/commit/70ffebf5f0e5edca866c624212f08e9f11d41e17"}, {"sha": "8b21241fd57376ab35e8ae75b3f57b7c601cdcdb", "url": "https://api.github.com/repos/rust-lang/rust/commits/8b21241fd57376ab35e8ae75b3f57b7c601cdcdb", "html_url": "https://github.com/rust-lang/rust/commit/8b21241fd57376ab35e8ae75b3f57b7c601cdcdb"}], "stats": {"total": 14, "additions": 6, "deletions": 8}, "files": [{"sha": "58892024ce2439cebfde97b587939df93c8bf406", "filename": "clippy_lints/src/await_holding_invalid.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0402c6ace7aff13bef4791f578ffb623da69fef2/clippy_lints%2Fsrc%2Fawait_holding_invalid.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0402c6ace7aff13bef4791f578ffb623da69fef2/clippy_lints%2Fsrc%2Fawait_holding_invalid.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fawait_holding_invalid.rs?ref=0402c6ace7aff13bef4791f578ffb623da69fef2", "patch": "@@ -45,7 +45,7 @@ declare_clippy_lint! {\n     /// }\n     /// ```\n     pub AWAIT_HOLDING_LOCK,\n-    correctness,\n+    pedantic,\n     \"Inside an async function, holding a MutexGuard while calling await\"\n }\n \n@@ -84,7 +84,7 @@ declare_clippy_lint! {\n     /// }\n     /// ```\n     pub AWAIT_HOLDING_REFCELL_REF,\n-    correctness,\n+    pedantic,\n     \"Inside an async function, holding a RefCell ref while calling await\"\n }\n "}, {"sha": "7e8cbd00c22a146dadb04d454046ed3bb2ce1cfb", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/0402c6ace7aff13bef4791f578ffb623da69fef2/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0402c6ace7aff13bef4791f578ffb623da69fef2/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=0402c6ace7aff13bef4791f578ffb623da69fef2", "patch": "@@ -1224,6 +1224,8 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n \n     store.register_group(true, \"clippy::pedantic\", Some(\"clippy_pedantic\"), vec![\n         LintId::of(&attrs::INLINE_ALWAYS),\n+        LintId::of(&await_holding_invalid::AWAIT_HOLDING_LOCK),\n+        LintId::of(&await_holding_invalid::AWAIT_HOLDING_REFCELL_REF),\n         LintId::of(&bit_mask::VERBOSE_BIT_MASK),\n         LintId::of(&checked_conversions::CHECKED_CONVERSIONS),\n         LintId::of(&copies::SAME_FUNCTIONS_IN_IF_CONDITION),\n@@ -1327,8 +1329,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&attrs::MISMATCHED_TARGET_OS),\n         LintId::of(&attrs::UNKNOWN_CLIPPY_LINTS),\n         LintId::of(&attrs::USELESS_ATTRIBUTE),\n-        LintId::of(&await_holding_invalid::AWAIT_HOLDING_LOCK),\n-        LintId::of(&await_holding_invalid::AWAIT_HOLDING_REFCELL_REF),\n         LintId::of(&bit_mask::BAD_BIT_MASK),\n         LintId::of(&bit_mask::INEFFECTIVE_BIT_MASK),\n         LintId::of(&blacklisted_name::BLACKLISTED_NAME),\n@@ -1793,8 +1793,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(&attrs::DEPRECATED_SEMVER),\n         LintId::of(&attrs::MISMATCHED_TARGET_OS),\n         LintId::of(&attrs::USELESS_ATTRIBUTE),\n-        LintId::of(&await_holding_invalid::AWAIT_HOLDING_LOCK),\n-        LintId::of(&await_holding_invalid::AWAIT_HOLDING_REFCELL_REF),\n         LintId::of(&bit_mask::BAD_BIT_MASK),\n         LintId::of(&bit_mask::INEFFECTIVE_BIT_MASK),\n         LintId::of(&booleans::LOGIC_BUG),"}, {"sha": "79b24b83680e28ef53249c349d58365a0fc2ab57", "filename": "src/lintlist/mod.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/0402c6ace7aff13bef4791f578ffb623da69fef2/src%2Flintlist%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0402c6ace7aff13bef4791f578ffb623da69fef2/src%2Flintlist%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flintlist%2Fmod.rs?ref=0402c6ace7aff13bef4791f578ffb623da69fef2", "patch": "@@ -62,14 +62,14 @@ vec![\n     },\n     Lint {\n         name: \"await_holding_lock\",\n-        group: \"correctness\",\n+        group: \"pedantic\",\n         desc: \"Inside an async function, holding a MutexGuard while calling await\",\n         deprecation: None,\n         module: \"await_holding_invalid\",\n     },\n     Lint {\n         name: \"await_holding_refcell_ref\",\n-        group: \"correctness\",\n+        group: \"pedantic\",\n         desc: \"Inside an async function, holding a RefCell ref while calling await\",\n         deprecation: None,\n         module: \"await_holding_invalid\","}]}