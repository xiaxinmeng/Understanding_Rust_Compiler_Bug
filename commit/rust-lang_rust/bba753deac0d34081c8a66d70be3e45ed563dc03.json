{"sha": "bba753deac0d34081c8a66d70be3e45ed563dc03", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJiYTc1M2RlYWMwZDM0MDgxYzhhNjZkNzBiZTNlNDVlZDU2M2RjMDM=", "commit": {"author": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-08-08T15:02:01Z"}, "committer": {"name": "Oliver Schneider", "email": "git-spam-no-reply9815368754983@oli-obk.de", "date": "2017-08-08T15:09:26Z"}, "message": "c_int != usize", "tree": {"sha": "57268286e62f71e04863cda27e2df2f9faab6bf6", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/57268286e62f71e04863cda27e2df2f9faab6bf6"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bba753deac0d34081c8a66d70be3e45ed563dc03", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEYFTdM4NKd7XQft77pp+NIls619kFAlmJ1CYACgkQpp+NIls6\n19mYZQ//WyIfdfqQUnTgf/rgAraweiUaDF+LTZjmCd+6zdNlG/6qJ7dYmkTF2Fo1\n0BxZDajTd1kJ3ZMgYjs7nGVav8koEz84PU/3sVTjWJoW0RyO5qCmXfPrqwL1wbiY\nhoqxtuwh2pf4KnAOY8x6T0p07J/PeGiBjI3CZMompwRxWUUkJUlf8+IqaQ9Vaoc3\nNgJ74EF3Bw7N/bP+9+wpS6FpYE9S4LhpcHiI0PA+qARrvJdSlczP1TKgRnJ7REJq\nn2yvitEGhmEHBWLJKejDXaXZgsgMvdIUFov5aW5hEB7c/Yvoe/QWLiAdPVuwJAy4\nR3v4IprxLPpJ16JJoZBX3k4Vp3cQfW/vPQZz+GZId7/IIO5+/Dk98TDLQo5JRUIR\ngr20Mm92duAkp8ZqZIs3rWUIQZRQEOmv8uX0skVVBQnjiFaoTggordNpMx27ouuE\nywwhnc3/J4nPJAnkZinXKH1RFk6/VG0yTWktagUgCxVPH0YdD1dOuQObGWE+ehrZ\nUYEGy51+Eai9ZfyuNTrm0/iTELU99h4xrdOjFYOjNRllPkLZ90gmDNzVUVLVXOBi\ngPkky4REMH3Jygk7J2NZSdmZfEJJJrQwv8a3MqPKqR2emkHxoSEzfA1ht2K4kOL5\nPQARfB3q7PhB+PNbvyk+EJVTIGyiENP16/DvZE6XPVwyksh8Q3Q=\n=lRbA\n-----END PGP SIGNATURE-----", "payload": "tree 57268286e62f71e04863cda27e2df2f9faab6bf6\nparent 9e787fbd82050ab2f15cc9897acd1cf42d5fc8aa\nauthor Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1502204521 +0200\ncommitter Oliver Schneider <git-spam-no-reply9815368754983@oli-obk.de> 1502204966 +0200\n\nc_int != usize\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bba753deac0d34081c8a66d70be3e45ed563dc03", "html_url": "https://github.com/rust-lang/rust/commit/bba753deac0d34081c8a66d70be3e45ed563dc03", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bba753deac0d34081c8a66d70be3e45ed563dc03/comments", "author": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "committer": {"login": "oli-obk", "id": 332036, "node_id": "MDQ6VXNlcjMzMjAzNg==", "avatar_url": "https://avatars.githubusercontent.com/u/332036?v=4", "gravatar_id": "", "url": "https://api.github.com/users/oli-obk", "html_url": "https://github.com/oli-obk", "followers_url": "https://api.github.com/users/oli-obk/followers", "following_url": "https://api.github.com/users/oli-obk/following{/other_user}", "gists_url": "https://api.github.com/users/oli-obk/gists{/gist_id}", "starred_url": "https://api.github.com/users/oli-obk/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/oli-obk/subscriptions", "organizations_url": "https://api.github.com/users/oli-obk/orgs", "repos_url": "https://api.github.com/users/oli-obk/repos", "events_url": "https://api.github.com/users/oli-obk/events{/privacy}", "received_events_url": "https://api.github.com/users/oli-obk/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9e787fbd82050ab2f15cc9897acd1cf42d5fc8aa", "url": "https://api.github.com/repos/rust-lang/rust/commits/9e787fbd82050ab2f15cc9897acd1cf42d5fc8aa", "html_url": "https://github.com/rust-lang/rust/commit/9e787fbd82050ab2f15cc9897acd1cf42d5fc8aa"}], "stats": {"total": 5, "additions": 3, "deletions": 2}, "files": [{"sha": "8b07b577bdda54fbe32c611e3b72b3281f7f11be", "filename": "miri/fn_call.rs", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/bba753deac0d34081c8a66d70be3e45ed563dc03/miri%2Ffn_call.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bba753deac0d34081c8a66d70be3e45ed563dc03/miri%2Ffn_call.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/miri%2Ffn_call.rs?ref=bba753deac0d34081c8a66d70be3e45ed563dc03", "patch": "@@ -317,7 +317,8 @@ impl<'a, 'tcx> EvalContextExt<'tcx> for EvalContext<'a, 'tcx, super::Evaluator>\n             }\n \n             \"sysconf\" => {\n-                let name = self.value_to_primval(args[0], usize)?.to_u64()?;\n+                let c_int = self.operand_ty(&arg_operands[0]);\n+                let name = self.value_to_primval(args[0], c_int)?.to_u64()?;\n                 trace!(\"sysconf() called with name {}\", name);\n                 // cache the sysconf integers via miri's global cache\n                 let paths = &[\n@@ -330,7 +331,7 @@ impl<'a, 'tcx> EvalContextExt<'tcx> for EvalContext<'a, 'tcx, super::Evaluator>\n                         let cid = GlobalId { instance, promoted: None };\n                         // compute global if not cached\n                         let val = match self.globals.get(&cid).cloned() {\n-                            Some(ptr) => self.value_to_primval(Value::ByRef(ptr), usize)?.to_u64()?,\n+                            Some(ptr) => self.value_to_primval(Value::ByRef(ptr), c_int)?.to_u64()?,\n                             None => eval_body_as_primval(self.tcx, instance)?.0.to_u64()?,\n                         };\n                         if val == name {"}]}