{"sha": "747f29fbabbf7e230be442e5f5023692d816ab3a", "node_id": "C_kwDOAAsO6NoAKDc0N2YyOWZiYWJiZjdlMjMwYmU0NDJlNWY1MDIzNjkyZDgxNmFiM2E", "commit": {"author": {"name": "Matthias Kr\u00fcger", "email": "matthias.krueger@famsik.de", "date": "2022-11-19T14:35:20Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-11-19T14:35:20Z"}, "message": "Rollup merge of #103989 - arlosi:arm32-panic, r=Amanieu\n\nFix build of std for thumbv7a-pc-windows-msvc\n\nAttempting to build std for the tier-3 target `thumbv7a-pc-windows-msvc` fails with the following error:\n```\nBuilding stage1 std artifacts (x86_64-pc-windows-msvc -> thumbv7a-pc-windows-msvc)\n..\nLLVM ERROR: WinEH not implemented for this target\nerror: could not compile `panic_unwind`\n```\n\nEH (unwinding) is not supported by LLVM for 32 bit arm msvc targets. This changes panic unwind to use the dummy implementation for `thumbv7a-pc-windows-msvc`.", "tree": {"sha": "f55f2506d29c5a0d6efe410c35c3a0b14b0a9fda", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f55f2506d29c5a0d6efe410c35c3a0b14b0a9fda"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/747f29fbabbf7e230be442e5f5023692d816ab3a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJjeOmoCRBK7hj4Ov3rIwAASfEIAIrZ9U/UFQxheIMZBHhYUhoy\npvWagCrYojBYXPAZ8WWlQ6b1wArVUQrGWKH/ZYk3MqaCPHLNB2/wH6YurRJ0+HfK\nPJiE3OcGEKsWvCNEI5iMZYJXhIvsHF13t3Ic2eYXlfhjTX18eMtxWE2RhYPz+zbu\ncM7YXtwo9MJUHNE/A6KqCfW6ofGOvCY5G98QUybqI+XEUKhT82NrqOlrBRUAE82J\nuFFkTcecub3YUM6a0pt1RhdxyZF0YvSv4VRAGYfLlluVs3q7OhPJHuzSvV05Ew7L\neIUVa3XlqwD8nQmz8a75ATzfumC+BU7kXUz5XsbdGA47PQhLWXxJIoWvvAivIqE=\n=/Y0s\n-----END PGP SIGNATURE-----\n", "payload": "tree f55f2506d29c5a0d6efe410c35c3a0b14b0a9fda\nparent 4451e2881fbc7c066e8f44c1b09b69b0648e41d7\nparent 7c602360364ac21ee17d5fd81dc142ecb67b56a5\nauthor Matthias Kr\u00fcger <matthias.krueger@famsik.de> 1668868520 +0100\ncommitter GitHub <noreply@github.com> 1668868520 +0100\n\nRollup merge of #103989 - arlosi:arm32-panic, r=Amanieu\n\nFix build of std for thumbv7a-pc-windows-msvc\n\nAttempting to build std for the tier-3 target `thumbv7a-pc-windows-msvc` fails with the following error:\n```\nBuilding stage1 std artifacts (x86_64-pc-windows-msvc -> thumbv7a-pc-windows-msvc)\n..\nLLVM ERROR: WinEH not implemented for this target\nerror: could not compile `panic_unwind`\n```\n\nEH (unwinding) is not supported by LLVM for 32 bit arm msvc targets. This changes panic unwind to use the dummy implementation for `thumbv7a-pc-windows-msvc`.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/747f29fbabbf7e230be442e5f5023692d816ab3a", "html_url": "https://github.com/rust-lang/rust/commit/747f29fbabbf7e230be442e5f5023692d816ab3a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/747f29fbabbf7e230be442e5f5023692d816ab3a/comments", "author": {"login": "matthiaskrgr", "id": 476013, "node_id": "MDQ6VXNlcjQ3NjAxMw==", "avatar_url": "https://avatars.githubusercontent.com/u/476013?v=4", "gravatar_id": "", "url": "https://api.github.com/users/matthiaskrgr", "html_url": "https://github.com/matthiaskrgr", "followers_url": "https://api.github.com/users/matthiaskrgr/followers", "following_url": "https://api.github.com/users/matthiaskrgr/following{/other_user}", "gists_url": "https://api.github.com/users/matthiaskrgr/gists{/gist_id}", "starred_url": "https://api.github.com/users/matthiaskrgr/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/matthiaskrgr/subscriptions", "organizations_url": "https://api.github.com/users/matthiaskrgr/orgs", "repos_url": "https://api.github.com/users/matthiaskrgr/repos", "events_url": "https://api.github.com/users/matthiaskrgr/events{/privacy}", "received_events_url": "https://api.github.com/users/matthiaskrgr/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4451e2881fbc7c066e8f44c1b09b69b0648e41d7", "url": "https://api.github.com/repos/rust-lang/rust/commits/4451e2881fbc7c066e8f44c1b09b69b0648e41d7", "html_url": "https://github.com/rust-lang/rust/commit/4451e2881fbc7c066e8f44c1b09b69b0648e41d7"}, {"sha": "7c602360364ac21ee17d5fd81dc142ecb67b56a5", "url": "https://api.github.com/repos/rust-lang/rust/commits/7c602360364ac21ee17d5fd81dc142ecb67b56a5", "html_url": "https://github.com/rust-lang/rust/commit/7c602360364ac21ee17d5fd81dc142ecb67b56a5"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "7e7180a38e2f23d6c76b3886a503ebb20832bec6", "filename": "library/panic_unwind/src/lib.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/747f29fbabbf7e230be442e5f5023692d816ab3a/library%2Fpanic_unwind%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/747f29fbabbf7e230be442e5f5023692d816ab3a/library%2Fpanic_unwind%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fpanic_unwind%2Fsrc%2Flib.rs?ref=747f29fbabbf7e230be442e5f5023692d816ab3a", "patch": "@@ -42,7 +42,8 @@ cfg_if::cfg_if! {\n         // L4Re is unix family but does not yet support unwinding.\n         #[path = \"dummy.rs\"]\n         mod real_imp;\n-    } else if #[cfg(target_env = \"msvc\")] {\n+    } else if #[cfg(all(target_env = \"msvc\", not(target_arch = \"arm\")))] {\n+        // LLVM does not support unwinding on 32 bit ARM msvc (thumbv7a-pc-windows-msvc)\n         #[path = \"seh.rs\"]\n         mod real_imp;\n     } else if #[cfg(any("}]}