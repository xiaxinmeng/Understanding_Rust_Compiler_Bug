{"sha": "738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "node_id": "MDY6Q29tbWl0NzI0NzEyOjczOGNkMDBmMWQzYjQwYTQ4NTY3ODVlNWE5NmIyY2E0YjBjYzRlN2Y=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-10-04T21:09:42Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-10-04T21:10:45Z"}, "message": "rt: Remove CHECK_CLAIMS", "tree": {"sha": "f93eabac853ebc78971f9d2c33558f81745524c5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f93eabac853ebc78971f9d2c33558f81745524c5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "html_url": "https://github.com/rust-lang/rust/commit/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f05bf26f859f9e373d5044048b8c937023497690", "url": "https://api.github.com/repos/rust-lang/rust/commits/f05bf26f859f9e373d5044048b8c937023497690", "html_url": "https://github.com/rust-lang/rust/commit/f05bf26f859f9e373d5044048b8c937023497690"}], "stats": {"total": 15, "additions": 0, "deletions": 15}, "files": [{"sha": "805ec37bfeaed16700b02b6069f451f5cfbf7942", "filename": "src/rt/rust.cpp", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust.cpp?ref=738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "patch": "@@ -67,11 +67,6 @@ command_line_args : public kernel_owned<command_line_args>\n     }\n };\n \n-// A global that indicates whether Rust typestate claim statements should be\n-// executed Generated code will read this variable directly (I think).\n-// FIXME (#2670): This belongs somewhere else\n-int check_claims = 0;\n-\n void* global_crate_map = NULL;\n \n /**\n@@ -94,9 +89,6 @@ rust_start(uintptr_t main_fn, int argc, char **argv, void* crate_map) {\n \n     update_log_settings(crate_map, env->logspec);\n \n-    // Maybe turn on typestate claim checking\n-    check_claims = env->check_claims;\n-\n     rust_kernel *kernel = new rust_kernel(env);\n \n     // Create the main scheduler and the main task"}, {"sha": "268aca965d70012a74b117d8135c7cab2fbb4f24", "filename": "src/rt/rust_env.cpp", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust_env.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust_env.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_env.cpp?ref=738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "patch": "@@ -10,7 +10,6 @@\n #define RUST_MIN_STACK \"RUST_MIN_STACK\"\n #define RUST_MAX_STACK \"RUST_MAX_STACK\"\n #define RUST_LOG \"RUST_LOG\"\n-#define CHECK_CLAIMS \"CHECK_CLAIMS\"\n #define DETAILED_LEAKS \"DETAILED_LEAKS\"\n #define RUST_SEED \"RUST_SEED\"\n #define RUST_POISON_ON_FREE \"RUST_POISON_ON_FREE\"\n@@ -114,7 +113,6 @@ load_env(int argc, char **argv) {\n     env->min_stack_size = get_min_stk_size();\n     env->max_stack_size = get_max_stk_size();\n     env->logspec = copyenv(RUST_LOG);\n-    env->check_claims = getenv(CHECK_CLAIMS) != NULL;\n     env->detailed_leaks = getenv(DETAILED_LEAKS) != NULL;\n     env->rust_seed = copyenv(RUST_SEED);\n     env->poison_on_free = getenv(RUST_POISON_ON_FREE) != NULL;"}, {"sha": "8a0ff4d1df1884a1fde8c69f015544c11b4c08a5", "filename": "src/rt/rust_env.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust_env.h", "raw_url": "https://github.com/rust-lang/rust/raw/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust_env.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_env.h?ref=738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "patch": "@@ -9,7 +9,6 @@ struct rust_env {\n     size_t min_stack_size;\n     size_t max_stack_size;\n     char* logspec;\n-    bool check_claims;\n     bool detailed_leaks;\n     char* rust_seed;\n     bool poison_on_free;"}, {"sha": "ec60af87b6b2ba7047fe9e55f53af7ae5ebe3c2e", "filename": "src/rt/rust_globals.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust_globals.h", "raw_url": "https://github.com/rust-lang/rust/raw/738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f/src%2Frt%2Frust_globals.h", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_globals.h?ref=738cd00f1d3b40a4856785e5a96b2ca4b0cc4e7f", "patch": "@@ -69,10 +69,6 @@ extern \"C\" {\n #define FASTCALL\n #endif\n \n-/* Controls whether claims are turned into checks */\n-/* Variable name must be kept consistent with trans.rs */\n-extern \"C\" int check_claims;\n-\n #define CHECKED(call)                                               \\\n     {                                                               \\\n     int res = (call);                                               \\"}]}