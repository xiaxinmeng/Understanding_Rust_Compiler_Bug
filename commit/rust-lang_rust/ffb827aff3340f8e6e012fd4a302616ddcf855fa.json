{"sha": "ffb827aff3340f8e6e012fd4a302616ddcf855fa", "node_id": "MDY6Q29tbWl0NzI0NzEyOmZmYjgyN2FmZjMzNDBmOGU2ZTAxMmZkNGEzMDI2MTZkZGNmODU1ZmE=", "commit": {"author": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-01-22T16:35:21Z"}, "committer": {"name": "Esteban K\u00fcber", "email": "esteban@kuber.com.ar", "date": "2018-01-22T23:46:51Z"}, "message": "Fix test redux", "tree": {"sha": "b64cdb4b6c28329c5412d0a9ed788bb603f70697", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b64cdb4b6c28329c5412d0a9ed788bb603f70697"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ffb827aff3340f8e6e012fd4a302616ddcf855fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ffb827aff3340f8e6e012fd4a302616ddcf855fa", "html_url": "https://github.com/rust-lang/rust/commit/ffb827aff3340f8e6e012fd4a302616ddcf855fa", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ffb827aff3340f8e6e012fd4a302616ddcf855fa/comments", "author": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "committer": {"login": "estebank", "id": 1606434, "node_id": "MDQ6VXNlcjE2MDY0MzQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1606434?v=4", "gravatar_id": "", "url": "https://api.github.com/users/estebank", "html_url": "https://github.com/estebank", "followers_url": "https://api.github.com/users/estebank/followers", "following_url": "https://api.github.com/users/estebank/following{/other_user}", "gists_url": "https://api.github.com/users/estebank/gists{/gist_id}", "starred_url": "https://api.github.com/users/estebank/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/estebank/subscriptions", "organizations_url": "https://api.github.com/users/estebank/orgs", "repos_url": "https://api.github.com/users/estebank/repos", "events_url": "https://api.github.com/users/estebank/events{/privacy}", "received_events_url": "https://api.github.com/users/estebank/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "864f6d180baf76365619a7fe76b6c8b87e5ead8f", "url": "https://api.github.com/repos/rust-lang/rust/commits/864f6d180baf76365619a7fe76b6c8b87e5ead8f", "html_url": "https://github.com/rust-lang/rust/commit/864f6d180baf76365619a7fe76b6c8b87e5ead8f"}], "stats": {"total": 61, "additions": 34, "deletions": 27}, "files": [{"sha": "334e1b06e37d45dbb00ec3127ddfaf5a01913bbc", "filename": "src/librustc_typeck/check/cast.rs", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Flibrustc_typeck%2Fcheck%2Fcast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Flibrustc_typeck%2Fcheck%2Fcast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fcast.rs?ref=ffb827aff3340f8e6e012fd4a302616ddcf855fa", "patch": "@@ -293,21 +293,21 @@ impl<'a, 'gcx, 'tcx> CastCheck<'tcx> {\n                 if fcx.tcx.sess.opts.debugging_opts.explain\n                     && !fcx.tcx.sess.parse_sess.span_diagnostic\n                         .code_emitted(&err.get_code().unwrap()) {\n-                    err.note(\n+                    err.help(\n                         \"Thin pointers are \\\"simple\\\" pointers: they are purely a reference to a\n memory address.\n \n Fat pointers are pointers referencing \\\"Dynamically Sized Types\\\" (also\n called DST). DST don't have a statically known size, therefore they can\n only exist behind some kind of pointers that contain additional\n information. Slices and trait objects are DSTs. In the case of slices,\n-the additional information the fat pointer holds is their size.\");\n-                    err.note(\"to fix this error, don't try to cast directly between thin and fat \\\n-                              pointers\");\n-                    err.help(\"for more information about casts, take a look at\n-                              [The Book]\\\n-                              (https://doc.rust-lang.org/book/first-edition/\\\n-                              casting-between-types.html)\");\n+the additional information the fat pointer holds is their size.\n+\n+To fix this error, don't try to cast directly between thin and fat\n+pointers.\n+\n+For more information about casts, take a look at The Book:\n+https://doc.rust-lang.org/book/first-edition/casting-between-types.html\");\n                 }\n                 err.emit();\n             }"}, {"sha": "9375fd9cade355fcbc6abab29c773d65afe23ccf", "filename": "src/test/compile-fail/E0617.rs", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fcompile-fail%2FE0617.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fcompile-fail%2FE0617.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2FE0617.rs?ref=ffb827aff3340f8e6e012fd4a302616ddcf855fa", "patch": "@@ -17,16 +17,22 @@ extern {\n fn main() {\n     unsafe {\n         printf(::std::ptr::null(), 0f32);\n-        //~^ ERROR can't pass `f32` to variadic function, cast to `c_double` [E0617]\n+        //~^ ERROR can't pass `f32` to variadic function\n+        //~| HELP cast the value to `c_double`\n         printf(::std::ptr::null(), 0i8);\n-        //~^ ERROR can't pass `i8` to variadic function, cast to `c_int` [E0617]\n+        //~^ ERROR can't pass `i8` to variadic function\n+        //~| HELP cast the value to `c_int`\n         printf(::std::ptr::null(), 0i16);\n-        //~^ ERROR can't pass `i16` to variadic function, cast to `c_int` [E0617]\n+        //~^ ERROR can't pass `i16` to variadic function\n+        //~| HELP cast the value to `c_int`\n         printf(::std::ptr::null(), 0u8);\n-        //~^ ERROR can't pass `u8` to variadic function, cast to `c_uint` [E0617]\n+        //~^ ERROR can't pass `u8` to variadic function\n+        //~| HELP cast the value to `c_uint`\n         printf(::std::ptr::null(), 0u16);\n-        //~^ ERROR can't pass `u16` to variadic function, cast to `c_uint` [E0617]\n+        //~^ ERROR can't pass `u16` to variadic function\n+        //~| HELP cast the value to `c_uint`\n         printf(::std::ptr::null(), printf);\n-        //~^ ERROR can't pass `unsafe extern \"C\" fn(*const i8, ...) {printf}` to variadic function, cast to `unsafe extern \"C\" fn(*const i8, ...)` [E0617]\n+        //~^ ERROR can't pass `unsafe extern \"C\" fn(*const i8, ...) {printf}` to variadic function\n+        //~| HELP cast the value to `unsafe extern \"C\" fn(*const i8, ...)`\n     }\n }"}, {"sha": "bf9f8ecbc8097c6eecb47cfb7c1f00b145d295e0", "filename": "src/test/compile-fail/issue-32201.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fcompile-fail%2Fissue-32201.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fcompile-fail%2Fissue-32201.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Fissue-32201.rs?ref=ffb827aff3340f8e6e012fd4a302616ddcf855fa", "patch": "@@ -17,6 +17,7 @@ fn bar(_: *const u8) {}\n fn main() {\n     unsafe {\n         foo(0, bar);\n-        //~^ ERROR can't pass `fn(*const u8) {bar}` to variadic function, cast to `fn(*const u8)`\n+        //~^ ERROR can't pass `fn(*const u8) {bar}` to variadic function\n+        //~| HELP cast the value to `fn(*const u8)`\n     }\n }"}, {"sha": "9807952c636e1dfc521914861abee0a75bd99154", "filename": "src/test/ui/variadic-ffi-3.rs", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fui%2Fvariadic-ffi-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fui%2Fvariadic-ffi-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fvariadic-ffi-3.rs?ref=ffb827aff3340f8e6e012fd4a302616ddcf855fa", "patch": "@@ -31,11 +31,11 @@ fn main() {\n         //~| expected type `extern \"C\" fn(isize, u8, ...)`\n         //~| found type `extern \"C\" fn(isize, u8) {bar}`\n \n-        foo(1, 2, 3f32); //~ ERROR can't pass `f32` to variadic function, cast to `c_double`\n-        foo(1, 2, true); //~ ERROR can't pass `bool` to variadic function, cast to `c_int`\n-        foo(1, 2, 1i8); //~ ERROR can't pass `i8` to variadic function, cast to `c_int`\n-        foo(1, 2, 1u8); //~ ERROR can't pass `u8` to variadic function, cast to `c_uint`\n-        foo(1, 2, 1i16); //~ ERROR can't pass `i16` to variadic function, cast to `c_int`\n-        foo(1, 2, 1u16); //~ ERROR can't pass `u16` to variadic function, cast to `c_uint`\n+        foo(1, 2, 3f32); //~ ERROR can't pass `f32` to variadic function\n+        foo(1, 2, true); //~ ERROR can't pass `bool` to variadic function\n+        foo(1, 2, 1i8); //~ ERROR can't pass `i8` to variadic function\n+        foo(1, 2, 1u8); //~ ERROR can't pass `u8` to variadic function\n+        foo(1, 2, 1i16); //~ ERROR can't pass `i16` to variadic function\n+        foo(1, 2, 1u16); //~ ERROR can't pass `u16` to variadic function\n     }\n }"}, {"sha": "54275fbc4f29f70fdfbf50812884f259547c05e7", "filename": "src/test/ui/variadic-ffi-3.stderr", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fui%2Fvariadic-ffi-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ffb827aff3340f8e6e012fd4a302616ddcf855fa/src%2Ftest%2Fui%2Fvariadic-ffi-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fvariadic-ffi-3.stderr?ref=ffb827aff3340f8e6e012fd4a302616ddcf855fa", "patch": "@@ -37,37 +37,37 @@ error[E0308]: mismatched types\n error[E0617]: can't pass `f32` to variadic function\n   --> $DIR/variadic-ffi-3.rs:34:19\n    |\n-34 |         foo(1, 2, 3f32); //~ ERROR can't pass `f32` to variadic function, cast to `c_double`\n+34 |         foo(1, 2, 3f32); //~ ERROR can't pass `f32` to variadic function\n    |                   ^^^^ help: cast the value to `c_double`: `3f32 as c_double`\n \n error[E0617]: can't pass `bool` to variadic function\n   --> $DIR/variadic-ffi-3.rs:35:19\n    |\n-35 |         foo(1, 2, true); //~ ERROR can't pass `bool` to variadic function, cast to `c_int`\n+35 |         foo(1, 2, true); //~ ERROR can't pass `bool` to variadic function\n    |                   ^^^^ help: cast the value to `c_int`: `true as c_int`\n \n error[E0617]: can't pass `i8` to variadic function\n   --> $DIR/variadic-ffi-3.rs:36:19\n    |\n-36 |         foo(1, 2, 1i8); //~ ERROR can't pass `i8` to variadic function, cast to `c_int`\n+36 |         foo(1, 2, 1i8); //~ ERROR can't pass `i8` to variadic function\n    |                   ^^^ help: cast the value to `c_int`: `1i8 as c_int`\n \n error[E0617]: can't pass `u8` to variadic function\n   --> $DIR/variadic-ffi-3.rs:37:19\n    |\n-37 |         foo(1, 2, 1u8); //~ ERROR can't pass `u8` to variadic function, cast to `c_uint`\n+37 |         foo(1, 2, 1u8); //~ ERROR can't pass `u8` to variadic function\n    |                   ^^^ help: cast the value to `c_uint`: `1u8 as c_uint`\n \n error[E0617]: can't pass `i16` to variadic function\n   --> $DIR/variadic-ffi-3.rs:38:19\n    |\n-38 |         foo(1, 2, 1i16); //~ ERROR can't pass `i16` to variadic function, cast to `c_int`\n+38 |         foo(1, 2, 1i16); //~ ERROR can't pass `i16` to variadic function\n    |                   ^^^^ help: cast the value to `c_int`: `1i16 as c_int`\n \n error[E0617]: can't pass `u16` to variadic function\n   --> $DIR/variadic-ffi-3.rs:39:19\n    |\n-39 |         foo(1, 2, 1u16); //~ ERROR can't pass `u16` to variadic function, cast to `c_uint`\n+39 |         foo(1, 2, 1u16); //~ ERROR can't pass `u16` to variadic function\n    |                   ^^^^ help: cast the value to `c_uint`: `1u16 as c_uint`\n \n error: aborting due to 10 previous errors"}]}