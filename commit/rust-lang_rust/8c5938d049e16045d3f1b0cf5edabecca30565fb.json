{"sha": "8c5938d049e16045d3f1b0cf5edabecca30565fb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhjNTkzOGQwNDllMTYwNDVkM2YxYjBjZjVlZGFiZWNjYTMwNTY1ZmI=", "commit": {"author": {"name": "hi-rustin", "email": "rustin.liu@gmail.com", "date": "2021-06-15T11:35:03Z"}, "committer": {"name": "hi-rustin", "email": "rustin.liu@gmail.com", "date": "2021-06-15T11:35:03Z"}, "message": "Use last segment", "tree": {"sha": "f642d6ee6d42f126a8f52f4f25a423176a76fdcc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f642d6ee6d42f126a8f52f4f25a423176a76fdcc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8c5938d049e16045d3f1b0cf5edabecca30565fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8c5938d049e16045d3f1b0cf5edabecca30565fb", "html_url": "https://github.com/rust-lang/rust/commit/8c5938d049e16045d3f1b0cf5edabecca30565fb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8c5938d049e16045d3f1b0cf5edabecca30565fb/comments", "author": {"login": "hi-rustin", "id": 29879298, "node_id": "MDQ6VXNlcjI5ODc5Mjk4", "avatar_url": "https://avatars.githubusercontent.com/u/29879298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hi-rustin", "html_url": "https://github.com/hi-rustin", "followers_url": "https://api.github.com/users/hi-rustin/followers", "following_url": "https://api.github.com/users/hi-rustin/following{/other_user}", "gists_url": "https://api.github.com/users/hi-rustin/gists{/gist_id}", "starred_url": "https://api.github.com/users/hi-rustin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hi-rustin/subscriptions", "organizations_url": "https://api.github.com/users/hi-rustin/orgs", "repos_url": "https://api.github.com/users/hi-rustin/repos", "events_url": "https://api.github.com/users/hi-rustin/events{/privacy}", "received_events_url": "https://api.github.com/users/hi-rustin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hi-rustin", "id": 29879298, "node_id": "MDQ6VXNlcjI5ODc5Mjk4", "avatar_url": "https://avatars.githubusercontent.com/u/29879298?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hi-rustin", "html_url": "https://github.com/hi-rustin", "followers_url": "https://api.github.com/users/hi-rustin/followers", "following_url": "https://api.github.com/users/hi-rustin/following{/other_user}", "gists_url": "https://api.github.com/users/hi-rustin/gists{/gist_id}", "starred_url": "https://api.github.com/users/hi-rustin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hi-rustin/subscriptions", "organizations_url": "https://api.github.com/users/hi-rustin/orgs", "repos_url": "https://api.github.com/users/hi-rustin/repos", "events_url": "https://api.github.com/users/hi-rustin/events{/privacy}", "received_events_url": "https://api.github.com/users/hi-rustin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "92d4164aca3647f08534a721bddec581a769a34a", "url": "https://api.github.com/repos/rust-lang/rust/commits/92d4164aca3647f08534a721bddec581a769a34a", "html_url": "https://github.com/rust-lang/rust/commit/92d4164aca3647f08534a721bddec581a769a34a"}], "stats": {"total": 51, "additions": 23, "deletions": 28}, "files": [{"sha": "a53bdd3e534ac97975f6dfb0afdd8d6845ed58c2", "filename": "compiler/rustc_passes/src/stability.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8c5938d049e16045d3f1b0cf5edabecca30565fb/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8c5938d049e16045d3f1b0cf5edabecca30565fb/compiler%2Frustc_passes%2Fsrc%2Fstability.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_passes%2Fsrc%2Fstability.rs?ref=8c5938d049e16045d3f1b0cf5edabecca30565fb", "patch": "@@ -828,10 +828,7 @@ impl Visitor<'tcx> for Checker<'tcx> {\n \n     fn visit_path(&mut self, path: &'tcx hir::Path<'tcx>, id: hir::HirId) {\n         if let Some(def_id) = path.res.opt_def_id() {\n-            let method_span = match path.segments {\n-                [.., _, last] => Some(last.ident.span),\n-                _ => None,\n-            };\n+            let method_span = path.segments.last().map(|s| s.ident.span);\n             self.tcx.check_stability(def_id, Some(id), path.span, method_span)\n         }\n         intravisit::walk_path(self, path)"}, {"sha": "f499ff85e5da8dad7fb48d72df07d4b93b00e3d0", "filename": "src/test/ui/deprecation/deprecation-lint-3.stderr", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8c5938d049e16045d3f1b0cf5edabecca30565fb/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-lint-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c5938d049e16045d3f1b0cf5edabecca30565fb/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-lint-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdeprecation%2Fdeprecation-lint-3.stderr?ref=8c5938d049e16045d3f1b0cf5edabecca30565fb", "patch": "@@ -1,15 +1,14 @@\n error: use of deprecated function `deprecation_lint::deprecated_text`: text\n-  --> $DIR/deprecation-lint-3.rs:13:5\n+  --> $DIR/deprecation-lint-3.rs:13:28\n    |\n LL |     macro_test_arg_nested!(deprecated_text);\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |                            ^^^^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n   --> $DIR/deprecation-lint-3.rs:4:9\n    |\n LL | #![deny(deprecated)]\n    |         ^^^^^^^^^^\n-   = note: this error originates in the macro `macro_test_arg_nested` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: aborting due to previous error\n "}, {"sha": "3bbb60dd35927f38833215860d5f543762c37263", "filename": "src/test/ui/lint/lint-stability3.stderr", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8c5938d049e16045d3f1b0cf5edabecca30565fb/src%2Ftest%2Fui%2Flint%2Flint-stability3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c5938d049e16045d3f1b0cf5edabecca30565fb/src%2Ftest%2Fui%2Flint%2Flint-stability3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-stability3.stderr?ref=8c5938d049e16045d3f1b0cf5edabecca30565fb", "patch": "@@ -1,15 +1,14 @@\n error: use of deprecated function `lint_stability::deprecated_text`: text\n-  --> $DIR/lint-stability3.rs:13:5\n+  --> $DIR/lint-stability3.rs:13:28\n    |\n LL |     macro_test_arg_nested!(deprecated_text);\n-   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+   |                            ^^^^^^^^^^^^^^^\n    |\n note: the lint level is defined here\n   --> $DIR/lint-stability3.rs:4:9\n    |\n LL | #![deny(deprecated)]\n    |         ^^^^^^^^^^\n-   = note: this error originates in the macro `macro_test_arg_nested` (in Nightly builds, run with -Z macro-backtrace for more info)\n \n error: aborting due to previous error\n "}, {"sha": "bc59844f77c8b80fee37bd70e692cdab785d7295", "filename": "src/test/ui/stability-attribute/generics-default-stability.stderr", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/8c5938d049e16045d3f1b0cf5edabecca30565fb/src%2Ftest%2Fui%2Fstability-attribute%2Fgenerics-default-stability.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8c5938d049e16045d3f1b0cf5edabecca30565fb/src%2Ftest%2Fui%2Fstability-attribute%2Fgenerics-default-stability.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fstability-attribute%2Fgenerics-default-stability.stderr?ref=8c5938d049e16045d3f1b0cf5edabecca30565fb", "patch": "@@ -34,7 +34,7 @@ warning: use of deprecated struct `unstable_generic_param::Struct4`: test\n   --> $DIR/generics-default-stability.rs:83:12\n    |\n LL |     let _: Struct4<isize> = Struct4 { field: 1 };\n-   |            ^^^^^^^^^^^^^^\n+   |            ^^^^^^^\n \n warning: use of deprecated struct `unstable_generic_param::Struct4`: test\n   --> $DIR/generics-default-stability.rs:88:12\n@@ -46,7 +46,7 @@ warning: use of deprecated struct `unstable_generic_param::Struct4`: test\n   --> $DIR/generics-default-stability.rs:89:12\n    |\n LL |     let _: Struct4<usize> = STRUCT4;\n-   |            ^^^^^^^^^^^^^^\n+   |            ^^^^^^^\n \n warning: use of deprecated struct `unstable_generic_param::Struct4`: test\n   --> $DIR/generics-default-stability.rs:90:29\n@@ -58,7 +58,7 @@ warning: use of deprecated struct `unstable_generic_param::Struct4`: test\n   --> $DIR/generics-default-stability.rs:90:12\n    |\n LL |     let _: Struct4<isize> = Struct4 { field: 0 };\n-   |            ^^^^^^^^^^^^^^\n+   |            ^^^^^^^\n \n warning: use of deprecated struct `unstable_generic_param::Struct5`: test\n   --> $DIR/generics-default-stability.rs:96:29\n@@ -70,7 +70,7 @@ warning: use of deprecated struct `unstable_generic_param::Struct5`: test\n   --> $DIR/generics-default-stability.rs:96:12\n    |\n LL |     let _: Struct5<isize> = Struct5 { field: 1 };\n-   |            ^^^^^^^^^^^^^^\n+   |            ^^^^^^^\n \n warning: use of deprecated struct `unstable_generic_param::Struct5`: test\n   --> $DIR/generics-default-stability.rs:101:12\n@@ -82,7 +82,7 @@ warning: use of deprecated struct `unstable_generic_param::Struct5`: test\n   --> $DIR/generics-default-stability.rs:102:12\n    |\n LL |     let _: Struct5<usize> = STRUCT5;\n-   |            ^^^^^^^^^^^^^^\n+   |            ^^^^^^^\n \n warning: use of deprecated struct `unstable_generic_param::Struct5`: test\n   --> $DIR/generics-default-stability.rs:104:29\n@@ -94,7 +94,7 @@ warning: use of deprecated struct `unstable_generic_param::Struct5`: test\n   --> $DIR/generics-default-stability.rs:104:12\n    |\n LL |     let _: Struct5<isize> = Struct5 { field: 0 };\n-   |            ^^^^^^^^^^^^^^\n+   |            ^^^^^^^\n \n warning: use of deprecated type alias `unstable_generic_param::Alias4`: test\n   --> $DIR/generics-default-stability.rs:159:28\n@@ -106,7 +106,7 @@ warning: use of deprecated type alias `unstable_generic_param::Alias4`: test\n   --> $DIR/generics-default-stability.rs:159:12\n    |\n LL |     let _: Alias4<isize> = Alias4::Some(1);\n-   |            ^^^^^^^^^^^^^\n+   |            ^^^^^^\n \n warning: use of deprecated type alias `unstable_generic_param::Alias4`: test\n   --> $DIR/generics-default-stability.rs:163:12\n@@ -118,7 +118,7 @@ warning: use of deprecated type alias `unstable_generic_param::Alias4`: test\n   --> $DIR/generics-default-stability.rs:164:12\n    |\n LL |     let _: Alias4<usize> = ALIAS4;\n-   |            ^^^^^^^^^^^^^\n+   |            ^^^^^^\n \n warning: use of deprecated type alias `unstable_generic_param::Alias4`: test\n   --> $DIR/generics-default-stability.rs:165:28\n@@ -130,7 +130,7 @@ warning: use of deprecated type alias `unstable_generic_param::Alias4`: test\n   --> $DIR/generics-default-stability.rs:165:12\n    |\n LL |     let _: Alias4<isize> = Alias4::Some(0);\n-   |            ^^^^^^^^^^^^^\n+   |            ^^^^^^\n \n warning: use of deprecated type alias `unstable_generic_param::Alias5`: test\n   --> $DIR/generics-default-stability.rs:170:28\n@@ -142,7 +142,7 @@ warning: use of deprecated type alias `unstable_generic_param::Alias5`: test\n   --> $DIR/generics-default-stability.rs:170:12\n    |\n LL |     let _: Alias5<isize> = Alias5::Some(1);\n-   |            ^^^^^^^^^^^^^\n+   |            ^^^^^^\n \n warning: use of deprecated type alias `unstable_generic_param::Alias5`: test\n   --> $DIR/generics-default-stability.rs:174:12\n@@ -154,7 +154,7 @@ warning: use of deprecated type alias `unstable_generic_param::Alias5`: test\n   --> $DIR/generics-default-stability.rs:175:12\n    |\n LL |     let _: Alias5<usize> = ALIAS5;\n-   |            ^^^^^^^^^^^^^\n+   |            ^^^^^^\n \n warning: use of deprecated type alias `unstable_generic_param::Alias5`: test\n   --> $DIR/generics-default-stability.rs:177:28\n@@ -166,7 +166,7 @@ warning: use of deprecated type alias `unstable_generic_param::Alias5`: test\n   --> $DIR/generics-default-stability.rs:177:12\n    |\n LL |     let _: Alias5<isize> = Alias5::Some(0);\n-   |            ^^^^^^^^^^^^^\n+   |            ^^^^^^\n \n warning: use of deprecated variant `unstable_generic_param::Enum4::Some`: test\n   --> $DIR/generics-default-stability.rs:231:34\n@@ -178,7 +178,7 @@ warning: use of deprecated enum `unstable_generic_param::Enum4`: test\n   --> $DIR/generics-default-stability.rs:231:12\n    |\n LL |     let _: Enum4<isize> = Enum4::Some(1);\n-   |            ^^^^^^^^^^^^\n+   |            ^^^^^\n \n warning: use of deprecated enum `unstable_generic_param::Enum4`: test\n   --> $DIR/generics-default-stability.rs:235:12\n@@ -190,7 +190,7 @@ warning: use of deprecated enum `unstable_generic_param::Enum4`: test\n   --> $DIR/generics-default-stability.rs:236:12\n    |\n LL |     let _: Enum4<usize> = ENUM4;\n-   |            ^^^^^^^^^^^^\n+   |            ^^^^^\n \n warning: use of deprecated variant `unstable_generic_param::Enum4::Some`: test\n   --> $DIR/generics-default-stability.rs:237:34\n@@ -202,7 +202,7 @@ warning: use of deprecated enum `unstable_generic_param::Enum4`: test\n   --> $DIR/generics-default-stability.rs:237:12\n    |\n LL |     let _: Enum4<isize> = Enum4::Some(0);\n-   |            ^^^^^^^^^^^^\n+   |            ^^^^^\n \n warning: use of deprecated variant `unstable_generic_param::Enum5::Some`: test\n   --> $DIR/generics-default-stability.rs:242:34\n@@ -214,7 +214,7 @@ warning: use of deprecated enum `unstable_generic_param::Enum5`: test\n   --> $DIR/generics-default-stability.rs:242:12\n    |\n LL |     let _: Enum5<isize> = Enum5::Some(1);\n-   |            ^^^^^^^^^^^^\n+   |            ^^^^^\n \n warning: use of deprecated enum `unstable_generic_param::Enum5`: test\n   --> $DIR/generics-default-stability.rs:246:12\n@@ -226,7 +226,7 @@ warning: use of deprecated enum `unstable_generic_param::Enum5`: test\n   --> $DIR/generics-default-stability.rs:247:12\n    |\n LL |     let _: Enum5<usize> = ENUM5;\n-   |            ^^^^^^^^^^^^\n+   |            ^^^^^\n \n warning: use of deprecated variant `unstable_generic_param::Enum5::Some`: test\n   --> $DIR/generics-default-stability.rs:249:34\n@@ -238,7 +238,7 @@ warning: use of deprecated enum `unstable_generic_param::Enum5`: test\n   --> $DIR/generics-default-stability.rs:249:12\n    |\n LL |     let _: Enum5<isize> = Enum5::Some(0);\n-   |            ^^^^^^^^^^^^\n+   |            ^^^^^\n \n error[E0658]: use of unstable library feature 'unstable_default'\n   --> $DIR/generics-default-stability.rs:35:20"}]}