{"sha": "aac0d914b2d776c43d6c95054815f49e19792e6e", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFhYzBkOTE0YjJkNzc2YzQzZDZjOTUwNTQ4MTVmNDllMTk3OTJlNmU=", "commit": {"author": {"name": "Ben Harris", "email": "mail@bharr.is", "date": "2018-07-09T07:24:42Z"}, "committer": {"name": "Ben Harris", "email": "mail@bharr.is", "date": "2018-07-09T07:40:16Z"}, "message": "Correct some codegen stats counters", "tree": {"sha": "76d05ed8fcf36bff5ca77a9632e625e915e68997", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/76d05ed8fcf36bff5ca77a9632e625e915e68997"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/aac0d914b2d776c43d6c95054815f49e19792e6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/aac0d914b2d776c43d6c95054815f49e19792e6e", "html_url": "https://github.com/rust-lang/rust/commit/aac0d914b2d776c43d6c95054815f49e19792e6e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/aac0d914b2d776c43d6c95054815f49e19792e6e/comments", "author": {"login": "bharrisau", "id": 119958, "node_id": "MDQ6VXNlcjExOTk1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/119958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bharrisau", "html_url": "https://github.com/bharrisau", "followers_url": "https://api.github.com/users/bharrisau/followers", "following_url": "https://api.github.com/users/bharrisau/following{/other_user}", "gists_url": "https://api.github.com/users/bharrisau/gists{/gist_id}", "starred_url": "https://api.github.com/users/bharrisau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bharrisau/subscriptions", "organizations_url": "https://api.github.com/users/bharrisau/orgs", "repos_url": "https://api.github.com/users/bharrisau/repos", "events_url": "https://api.github.com/users/bharrisau/events{/privacy}", "received_events_url": "https://api.github.com/users/bharrisau/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bharrisau", "id": 119958, "node_id": "MDQ6VXNlcjExOTk1OA==", "avatar_url": "https://avatars.githubusercontent.com/u/119958?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bharrisau", "html_url": "https://github.com/bharrisau", "followers_url": "https://api.github.com/users/bharrisau/followers", "following_url": "https://api.github.com/users/bharrisau/following{/other_user}", "gists_url": "https://api.github.com/users/bharrisau/gists{/gist_id}", "starred_url": "https://api.github.com/users/bharrisau/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bharrisau/subscriptions", "organizations_url": "https://api.github.com/users/bharrisau/orgs", "repos_url": "https://api.github.com/users/bharrisau/repos", "events_url": "https://api.github.com/users/bharrisau/events{/privacy}", "received_events_url": "https://api.github.com/users/bharrisau/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a80a610a4c30b6f5f60862afcb4588d03439f66c", "url": "https://api.github.com/repos/rust-lang/rust/commits/a80a610a4c30b6f5f60862afcb4588d03439f66c", "html_url": "https://github.com/rust-lang/rust/commit/a80a610a4c30b6f5f60862afcb4588d03439f66c"}], "stats": {"total": 7, "additions": 4, "deletions": 3}, "files": [{"sha": "c71e49b0d8821888b952f700ed09868c3f337853", "filename": "src/librustc_codegen_llvm/builder.rs", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/aac0d914b2d776c43d6c95054815f49e19792e6e/src%2Flibrustc_codegen_llvm%2Fbuilder.rs", "raw_url": "https://github.com/rust-lang/rust/raw/aac0d914b2d776c43d6c95054815f49e19792e6e/src%2Flibrustc_codegen_llvm%2Fbuilder.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_codegen_llvm%2Fbuilder.rs?ref=aac0d914b2d776c43d6c95054815f49e19792e6e", "patch": "@@ -277,7 +277,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     }\n \n     pub fn nswsub(&self, lhs: ValueRef, rhs: ValueRef) -> ValueRef {\n-        self.count_insn(\"nwsub\");\n+        self.count_insn(\"nswsub\");\n         unsafe {\n             llvm::LLVMBuildNSWSub(self.llbuilder, lhs, rhs, noname())\n         }\n@@ -291,14 +291,14 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     }\n \n     pub fn fsub(&self, lhs: ValueRef, rhs: ValueRef) -> ValueRef {\n-        self.count_insn(\"sub\");\n+        self.count_insn(\"fsub\");\n         unsafe {\n             llvm::LLVMBuildFSub(self.llbuilder, lhs, rhs, noname())\n         }\n     }\n \n     pub fn fsub_fast(&self, lhs: ValueRef, rhs: ValueRef) -> ValueRef {\n-        self.count_insn(\"sub\");\n+        self.count_insn(\"fsub\");\n         unsafe {\n             let instr = llvm::LLVMBuildFSub(self.llbuilder, lhs, rhs, noname());\n             llvm::LLVMRustSetHasUnsafeAlgebra(instr);\n@@ -1315,6 +1315,7 @@ impl<'a, 'tcx> Builder<'a, 'tcx> {\n     }\n \n     pub fn add_incoming_to_phi(&self, phi: ValueRef, val: ValueRef, bb: BasicBlockRef) {\n+        self.count_insn(\"addincoming\");\n         unsafe {\n             llvm::LLVMAddIncoming(phi, &val, &bb, 1 as c_uint);\n         }"}]}