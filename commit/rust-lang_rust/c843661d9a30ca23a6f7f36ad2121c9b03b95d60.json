{"sha": "c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "node_id": "MDY6Q29tbWl0NzI0NzEyOmM4NDM2NjFkOWEzMGNhMjNhNmY3ZjM2YWQyMTIxYzliMDNiOTVkNjA=", "commit": {"author": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-07-17T17:55:27Z"}, "committer": {"name": "Alex Crichton", "email": "alex@alexcrichton.com", "date": "2017-07-18T03:11:24Z"}, "message": "travis: Make a few `curl` invocations more resilient\n\nUse the `-f` flag to indicate that, for example, a 500 response code is to be\nconsidered a failure, triggering the normal retry logic. Also ignore errors\nwhere we check the date from google.com, as a failure there shouldn't fail the\nbuild.", "tree": {"sha": "3e45a3e042643eb0186ffc12d7feb7be21f29e00", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/3e45a3e042643eb0186ffc12d7feb7be21f29e00"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "html_url": "https://github.com/rust-lang/rust/commit/c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/comments", "author": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "alexcrichton", "id": 64996, "node_id": "MDQ6VXNlcjY0OTk2", "avatar_url": "https://avatars.githubusercontent.com/u/64996?v=4", "gravatar_id": "", "url": "https://api.github.com/users/alexcrichton", "html_url": "https://github.com/alexcrichton", "followers_url": "https://api.github.com/users/alexcrichton/followers", "following_url": "https://api.github.com/users/alexcrichton/following{/other_user}", "gists_url": "https://api.github.com/users/alexcrichton/gists{/gist_id}", "starred_url": "https://api.github.com/users/alexcrichton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/alexcrichton/subscriptions", "organizations_url": "https://api.github.com/users/alexcrichton/orgs", "repos_url": "https://api.github.com/users/alexcrichton/repos", "events_url": "https://api.github.com/users/alexcrichton/events{/privacy}", "received_events_url": "https://api.github.com/users/alexcrichton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5803f99bd4c53c3f469df26513ffa2e058094c53", "url": "https://api.github.com/repos/rust-lang/rust/commits/5803f99bd4c53c3f469df26513ffa2e058094c53", "html_url": "https://github.com/rust-lang/rust/commit/5803f99bd4c53c3f469df26513ffa2e058094c53"}], "stats": {"total": 32, "additions": 16, "deletions": 16}, "files": [{"sha": "eb8db13c0bb7f56d56d8c6333c38ebdd9fc3c130", "filename": ".travis.yml", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/.travis.yml", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/.travis.yml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.travis.yml?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -64,9 +64,9 @@ matrix:\n       os: osx\n       osx_image: xcode8.2\n       install: &osx_install_sccache >\n-        travis_retry curl -o /usr/local/bin/sccache https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-05-12-sccache-x86_64-apple-darwin &&\n+        travis_retry curl -fo /usr/local/bin/sccache https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-05-12-sccache-x86_64-apple-darwin &&\n           chmod +x /usr/local/bin/sccache &&\n-        travis_retry curl -o /usr/local/bin/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-apple-darwin &&\n+        travis_retry curl -fo /usr/local/bin/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-apple-darwin &&\n           chmod +x /usr/local/bin/stamp\n     - env: >\n         RUST_CHECK_TARGET=check\n@@ -144,7 +144,7 @@ env:\n \n # Note that this is overridden on OSX builders\n install: >\n-  travis_retry curl -o $HOME/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-unknown-linux-musl &&\n+  travis_retry curl -fo $HOME/stamp https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-03-17-stamp-x86_64-unknown-linux-musl &&\n     chmod +x $HOME/stamp &&\n     export PATH=$PATH:$HOME\n \n@@ -183,10 +183,10 @@ before_script:\n # clock drift. Timezones don't matter since relative deltas give all the necessary info.\n script:\n   - >\n-      date && curl -s --head https://google.com | grep ^Date: | sed 's/Date: //g'\n+      date && (curl -fs --head https://google.com | grep ^Date: | sed 's/Date: //g' || true)\n   - stamp sh -x -c \"$RUN_SCRIPT\"\n   - >\n-      date && curl -s --head https://google.com | grep ^Date: | sed 's/Date: //g'\n+      date && (curl -fs --head https://google.com | grep ^Date: | sed 's/Date: //g' || true)\n \n after_success:\n   - >"}, {"sha": "7fc2ebafea8c2d92a9837eca456ca6bf370e6ad4", "filename": "src/ci/docker/scripts/android-ndk.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fandroid-ndk.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fandroid-ndk.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fandroid-ndk.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -15,7 +15,7 @@ URL=https://dl.google.com/android/repository\n download_ndk() {\n     mkdir -p /android/ndk\n     cd /android/ndk\n-    curl -O $URL/$1\n+    curl -sO $URL/$1\n     unzip -q $1\n     rm $1\n     mv android-ndk-* ndk"}, {"sha": "90257dc411ea8494fa47b80b152a5b9a7180687a", "filename": "src/ci/docker/scripts/android-sdk.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fandroid-sdk.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fandroid-sdk.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fandroid-sdk.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -15,7 +15,7 @@ URL=https://dl.google.com/android/repository\n download_sdk() {\n     mkdir -p /android/sdk\n     cd /android/sdk\n-    curl -O $URL/$1\n+    curl -sO $URL/$1\n     unzip -q $1\n     rm -rf $1\n }"}, {"sha": "53ad0f8a2ebc5f39753bf06c345de3b44bc4ca57", "filename": "src/ci/docker/scripts/crosstool-ng.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fcrosstool-ng.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fcrosstool-ng.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fcrosstool-ng.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -11,7 +11,7 @@\n set -ex\n \n url=\"http://crosstool-ng.org/download/crosstool-ng/crosstool-ng-1.22.0.tar.bz2\"\n-curl $url | tar xjf -\n+curl -s $url | tar xjf -\n cd crosstool-ng\n ./configure --prefix=/usr/local\n make -j$(nproc)"}, {"sha": "616288f572b1197f559e2a2e669ef3555cb5e384", "filename": "src/ci/docker/scripts/dumb-init.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fdumb-init.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fdumb-init.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fdumb-init.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -10,6 +10,6 @@\n \n set -ex\n \n-curl -OL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-init_1.2.0_amd64.deb\n+curl -sOL https://github.com/Yelp/dumb-init/releases/download/v1.2.0/dumb-init_1.2.0_amd64.deb\n dpkg -i dumb-init_*.deb\n rm dumb-init_*.deb"}, {"sha": "18792c139ba76e1102d478442ab6bd1f3dd6213d", "filename": "src/ci/docker/scripts/emscripten-wasm.sh", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Femscripten-wasm.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Femscripten-wasm.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Femscripten-wasm.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -28,14 +28,14 @@ exit 1\n }\n \n # Download last known good emscripten from WebAssembly waterfall\n-BUILD=$(curl -L https://storage.googleapis.com/wasm-llvm/builds/linux/lkgr.json | \\\n+BUILD=$(curl -sL https://storage.googleapis.com/wasm-llvm/builds/linux/lkgr.json | \\\n     jq '.build | tonumber')\n-curl -L https://storage.googleapis.com/wasm-llvm/builds/linux/$BUILD/wasm-binaries.tbz2 | \\\n+curl -sL https://storage.googleapis.com/wasm-llvm/builds/linux/$BUILD/wasm-binaries.tbz2 | \\\n     hide_output tar xvkj\n \n # node 8 is required to run wasm\n cd /\n-curl -L https://nodejs.org/dist/v8.0.0/node-v8.0.0-linux-x64.tar.xz | \\\n+curl -sL https://nodejs.org/dist/v8.0.0/node-v8.0.0-linux-x64.tar.xz | \\\n     tar -xJ\n \n # Make emscripten use wasm-ready node and LLVM tools"}, {"sha": "0a570f18bfe752cb72a0923679cf18bf3bd90f14", "filename": "src/ci/docker/scripts/emscripten.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Femscripten.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Femscripten.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Femscripten.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -28,7 +28,7 @@ exit 1\n }\n \n cd /\n-curl -L https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz | \\\n+curl -sL https://s3.amazonaws.com/mozilla-games/emscripten/releases/emsdk-portable.tar.gz | \\\n     tar -xz\n \n cd /emsdk-portable\n@@ -49,5 +49,5 @@ chmod a+rxw -R /emsdk-portable\n \n # node 8 is required to run wasm\n cd /\n-curl -L https://nodejs.org/dist/v8.0.0/node-v8.0.0-linux-x64.tar.xz | \\\n+curl -sL https://nodejs.org/dist/v8.0.0/node-v8.0.0-linux-x64.tar.xz | \\\n   tar -xJ"}, {"sha": "a0b15cca1f146b7a5337e842cdc883cecaaf895e", "filename": "src/ci/docker/scripts/make3.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fmake3.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fmake3.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fmake3.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -10,7 +10,7 @@\n \n set -ex\n \n-curl https://ftp.gnu.org/gnu/make/make-3.81.tar.gz | tar xzf -\n+curl -s https://ftp.gnu.org/gnu/make/make-3.81.tar.gz | tar xzf -\n cd make-3.81\n ./configure --prefix=/usr\n make"}, {"sha": "4e497a6c9ce942438facf44b482369b0b9d1fdd7", "filename": "src/ci/docker/scripts/sccache.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fsccache.sh", "raw_url": "https://github.com/rust-lang/rust/raw/c843661d9a30ca23a6f7f36ad2121c9b03b95d60/src%2Fci%2Fdocker%2Fscripts%2Fsccache.sh", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fdocker%2Fscripts%2Fsccache.sh?ref=c843661d9a30ca23a6f7f36ad2121c9b03b95d60", "patch": "@@ -10,7 +10,7 @@\n \n set -ex\n \n-curl -o /usr/local/bin/sccache \\\n+curl -so /usr/local/bin/sccache \\\n   https://s3.amazonaws.com/rust-lang-ci/rust-ci-mirror/2017-05-12-sccache-x86_64-unknown-linux-musl\n \n chmod +x /usr/local/bin/sccache"}]}