{"sha": "8407957ec64b94740f86d2079dc2d433f7f85e6a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg0MDc5NTdlYzY0Yjk0NzQwZjg2ZDIwNzlkYzJkNDMzZjdmODVlNmE=", "commit": {"author": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-10-05T05:49:08Z"}, "committer": {"name": "Philipp Hansch", "email": "dev@phansch.net", "date": "2018-10-05T05:49:08Z"}, "message": "Fix fn_to_numeric_cast UI tests\n\nThis collapses both lint tests into one file.\nSomehow allowing the other lint in the respective files did not work\ncorrectly. Maybe that's fixed as part of fixing #3198.", "tree": {"sha": "a528c8371bd19c371b96b7cc9141fffd5a2f1c19", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a528c8371bd19c371b96b7cc9141fffd5a2f1c19"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8407957ec64b94740f86d2079dc2d433f7f85e6a", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEvUKv4zqIn2RHUgCKtvoGpuDiZlsFAlu2+6wACgkQtvoGpuDi\nZlsaow//Ue0KSKQ6SjOwKTSPkRCNX1ra0UZWLkG/sX4tCRNrQjYnWLM/OdQQn6DJ\nAJ96KlmxMWtCvIOW3USjq3LO5WzunR3+gZIquuisMsFdOVxzmmN2H+UYedQVbimD\ncoeTWiNwvTj9cKyPdAHkKSxnBYrPVE0/Bj8/vOMSBkd9iS1UEEWWXUUmjuWuhJSN\ncE4gxyNbLxLEl0C4JaPnkjA9v6/UinQvEPnrgnxqKK6/gre+T0iKUJNbIRWNqg7a\nMnkrq+6XdpiZWA6LQLB0vXdY9IOjjWyc+plK/bkJzYnE1fzY+VWgxmxys4FM0vJp\nKRJ+PLTWQH2DHYYj6VqJwCzmgggU/nbuVk5ZMDiB8pph2QjqhwEIUEBah9MtxAet\nnBIEKXSnfm1T6WaByzsg7WFqtGFNvO3vX4e88CiSPZgbpNeGPlvt9cJO+kKahATw\n4eBYm+qTzvU9Q/vur46q9Esn42CbF6h00ovj3R3nFVz6VGCXkNwr7aKPnjUzI62B\nhH2zxCW4ac8PLYPcaWX+QTvUGh4palDh7XK5FPsOrFHhyASRWHSgGyv3uImd7Vut\nYeaYQ16A1nE1ODKOifah10TLERpg+r4CW5g6rgCwTR0e3Hex1HyF4YImnL3D3nJA\nbgjMOgkc8VmsnschuALbzQyXP5Sh89880KvN8B1RlKHxM192kKw=\n=VARB\n-----END PGP SIGNATURE-----", "payload": "tree a528c8371bd19c371b96b7cc9141fffd5a2f1c19\nparent 1544a1a681d4f7ab909f8e89c64d1b14bc7a7337\nauthor Philipp Hansch <dev@phansch.net> 1538718548 +0200\ncommitter Philipp Hansch <dev@phansch.net> 1538718548 +0200\n\nFix fn_to_numeric_cast UI tests\n\nThis collapses both lint tests into one file.\nSomehow allowing the other lint in the respective files did not work\ncorrectly. Maybe that's fixed as part of fixing #3198.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8407957ec64b94740f86d2079dc2d433f7f85e6a", "html_url": "https://github.com/rust-lang/rust/commit/8407957ec64b94740f86d2079dc2d433f7f85e6a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8407957ec64b94740f86d2079dc2d433f7f85e6a/comments", "author": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "phansch", "id": 2042399, "node_id": "MDQ6VXNlcjIwNDIzOTk=", "avatar_url": "https://avatars.githubusercontent.com/u/2042399?v=4", "gravatar_id": "", "url": "https://api.github.com/users/phansch", "html_url": "https://github.com/phansch", "followers_url": "https://api.github.com/users/phansch/followers", "following_url": "https://api.github.com/users/phansch/following{/other_user}", "gists_url": "https://api.github.com/users/phansch/gists{/gist_id}", "starred_url": "https://api.github.com/users/phansch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/phansch/subscriptions", "organizations_url": "https://api.github.com/users/phansch/orgs", "repos_url": "https://api.github.com/users/phansch/repos", "events_url": "https://api.github.com/users/phansch/events{/privacy}", "received_events_url": "https://api.github.com/users/phansch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1544a1a681d4f7ab909f8e89c64d1b14bc7a7337", "url": "https://api.github.com/repos/rust-lang/rust/commits/1544a1a681d4f7ab909f8e89c64d1b14bc7a7337", "html_url": "https://github.com/rust-lang/rust/commit/1544a1a681d4f7ab909f8e89c64d1b14bc7a7337"}], "stats": {"total": 194, "additions": 66, "deletions": 128}, "files": [{"sha": "fc8aa19dcf037c0b14025a0e24e6949994fc9fbd", "filename": "tests/ui/fn_to_numeric_cast.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/8407957ec64b94740f86d2079dc2d433f7f85e6a/tests%2Fui%2Ffn_to_numeric_cast.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8407957ec64b94740f86d2079dc2d433f7f85e6a/tests%2Fui%2Ffn_to_numeric_cast.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn_to_numeric_cast.rs?ref=8407957ec64b94740f86d2079dc2d433f7f85e6a", "patch": "@@ -1,6 +1,7 @@\n+// only-64bit\n #![feature(tool_lints)]\n \n-#![warn(clippy::fn_to_numeric_cast)]\n+#![warn(clippy::fn_to_numeric_cast, clippy::fn_to_numeric_cast_with_truncation)]\n \n fn foo() -> String { String::new() }\n "}, {"sha": "29320f0d8ed8886668107cb4decc84254ff86f37", "filename": "tests/ui/fn_to_numeric_cast.stderr", "status": "modified", "additions": 64, "deletions": 62, "changes": 126, "blob_url": "https://github.com/rust-lang/rust/blob/8407957ec64b94740f86d2079dc2d433f7f85e6a/tests%2Fui%2Ffn_to_numeric_cast.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/8407957ec64b94740f86d2079dc2d433f7f85e6a/tests%2Fui%2Ffn_to_numeric_cast.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn_to_numeric_cast.stderr?ref=8407957ec64b94740f86d2079dc2d433f7f85e6a", "patch": "@@ -1,141 +1,143 @@\n-error: casting function pointer `foo` to `i8`\n- --> $DIR/fn_to_numeric_cast.rs:8:13\n+error: casting function pointer `foo` to `i8`, which truncates the value\n+ --> $DIR/fn_to_numeric_cast.rs:9:13\n   |\n-8 |     let _ = foo as i8;\n+9 |     let _ = foo as i8;\n   |             ^^^^^^^^^ help: try: `foo as usize`\n   |\n-  = note: `-D clippy::fn-to-numeric-cast` implied by `-D warnings`\n+  = note: `-D clippy::fn-to-numeric-cast-with-truncation` implied by `-D warnings`\n \n-error: casting function pointer `foo` to `i16`\n- --> $DIR/fn_to_numeric_cast.rs:9:13\n-  |\n-9 |     let _ = foo as i16;\n-  |             ^^^^^^^^^^ help: try: `foo as usize`\n-\n-error: casting function pointer `foo` to `i32`\n+error: casting function pointer `foo` to `i16`, which truncates the value\n   --> $DIR/fn_to_numeric_cast.rs:10:13\n    |\n-10 |     let _ = foo as i32;\n+10 |     let _ = foo as i16;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n-error: casting function pointer `foo` to `i64`\n+error: casting function pointer `foo` to `i32`, which truncates the value\n   --> $DIR/fn_to_numeric_cast.rs:11:13\n    |\n-11 |     let _ = foo as i64;\n+11 |     let _ = foo as i32;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n-error: casting function pointer `foo` to `i128`\n+error: casting function pointer `foo` to `i64`\n   --> $DIR/fn_to_numeric_cast.rs:12:13\n    |\n-12 |     let _ = foo as i128;\n+12 |     let _ = foo as i64;\n+   |             ^^^^^^^^^^ help: try: `foo as usize`\n+   |\n+   = note: `-D clippy::fn-to-numeric-cast` implied by `-D warnings`\n+\n+error: casting function pointer `foo` to `i128`\n+  --> $DIR/fn_to_numeric_cast.rs:13:13\n+   |\n+13 |     let _ = foo as i128;\n    |             ^^^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `isize`\n-  --> $DIR/fn_to_numeric_cast.rs:13:13\n+  --> $DIR/fn_to_numeric_cast.rs:14:13\n    |\n-13 |     let _ = foo as isize;\n+14 |     let _ = foo as isize;\n    |             ^^^^^^^^^^^^ help: try: `foo as usize`\n \n-error: casting function pointer `foo` to `u8`\n-  --> $DIR/fn_to_numeric_cast.rs:15:13\n+error: casting function pointer `foo` to `u8`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:16:13\n    |\n-15 |     let _ = foo as u8;\n+16 |     let _ = foo as u8;\n    |             ^^^^^^^^^ help: try: `foo as usize`\n \n-error: casting function pointer `foo` to `u16`\n-  --> $DIR/fn_to_numeric_cast.rs:16:13\n+error: casting function pointer `foo` to `u16`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:17:13\n    |\n-16 |     let _ = foo as u16;\n+17 |     let _ = foo as u16;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n-error: casting function pointer `foo` to `u32`\n-  --> $DIR/fn_to_numeric_cast.rs:17:13\n+error: casting function pointer `foo` to `u32`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:18:13\n    |\n-17 |     let _ = foo as u32;\n+18 |     let _ = foo as u32;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `u64`\n-  --> $DIR/fn_to_numeric_cast.rs:18:13\n+  --> $DIR/fn_to_numeric_cast.rs:19:13\n    |\n-18 |     let _ = foo as u64;\n+19 |     let _ = foo as u64;\n    |             ^^^^^^^^^^ help: try: `foo as usize`\n \n error: casting function pointer `foo` to `u128`\n-  --> $DIR/fn_to_numeric_cast.rs:19:13\n+  --> $DIR/fn_to_numeric_cast.rs:20:13\n    |\n-19 |     let _ = foo as u128;\n+20 |     let _ = foo as u128;\n    |             ^^^^^^^^^^^ help: try: `foo as usize`\n \n-error: casting function pointer `abc` to `i8`\n-  --> $DIR/fn_to_numeric_cast.rs:28:13\n+error: casting function pointer `abc` to `i8`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:29:13\n    |\n-28 |     let _ = abc as i8;\n+29 |     let _ = abc as i8;\n    |             ^^^^^^^^^ help: try: `abc as usize`\n \n-error: casting function pointer `abc` to `i16`\n-  --> $DIR/fn_to_numeric_cast.rs:29:13\n+error: casting function pointer `abc` to `i16`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:30:13\n    |\n-29 |     let _ = abc as i16;\n+30 |     let _ = abc as i16;\n    |             ^^^^^^^^^^ help: try: `abc as usize`\n \n-error: casting function pointer `abc` to `i32`\n-  --> $DIR/fn_to_numeric_cast.rs:30:13\n+error: casting function pointer `abc` to `i32`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:31:13\n    |\n-30 |     let _ = abc as i32;\n+31 |     let _ = abc as i32;\n    |             ^^^^^^^^^^ help: try: `abc as usize`\n \n error: casting function pointer `abc` to `i64`\n-  --> $DIR/fn_to_numeric_cast.rs:31:13\n+  --> $DIR/fn_to_numeric_cast.rs:32:13\n    |\n-31 |     let _ = abc as i64;\n+32 |     let _ = abc as i64;\n    |             ^^^^^^^^^^ help: try: `abc as usize`\n \n error: casting function pointer `abc` to `i128`\n-  --> $DIR/fn_to_numeric_cast.rs:32:13\n+  --> $DIR/fn_to_numeric_cast.rs:33:13\n    |\n-32 |     let _ = abc as i128;\n+33 |     let _ = abc as i128;\n    |             ^^^^^^^^^^^ help: try: `abc as usize`\n \n error: casting function pointer `abc` to `isize`\n-  --> $DIR/fn_to_numeric_cast.rs:33:13\n+  --> $DIR/fn_to_numeric_cast.rs:34:13\n    |\n-33 |     let _ = abc as isize;\n+34 |     let _ = abc as isize;\n    |             ^^^^^^^^^^^^ help: try: `abc as usize`\n \n-error: casting function pointer `abc` to `u8`\n-  --> $DIR/fn_to_numeric_cast.rs:35:13\n+error: casting function pointer `abc` to `u8`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:36:13\n    |\n-35 |     let _ = abc as u8;\n+36 |     let _ = abc as u8;\n    |             ^^^^^^^^^ help: try: `abc as usize`\n \n-error: casting function pointer `abc` to `u16`\n-  --> $DIR/fn_to_numeric_cast.rs:36:13\n+error: casting function pointer `abc` to `u16`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:37:13\n    |\n-36 |     let _ = abc as u16;\n+37 |     let _ = abc as u16;\n    |             ^^^^^^^^^^ help: try: `abc as usize`\n \n-error: casting function pointer `abc` to `u32`\n-  --> $DIR/fn_to_numeric_cast.rs:37:13\n+error: casting function pointer `abc` to `u32`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:38:13\n    |\n-37 |     let _ = abc as u32;\n+38 |     let _ = abc as u32;\n    |             ^^^^^^^^^^ help: try: `abc as usize`\n \n error: casting function pointer `abc` to `u64`\n-  --> $DIR/fn_to_numeric_cast.rs:38:13\n+  --> $DIR/fn_to_numeric_cast.rs:39:13\n    |\n-38 |     let _ = abc as u64;\n+39 |     let _ = abc as u64;\n    |             ^^^^^^^^^^ help: try: `abc as usize`\n \n error: casting function pointer `abc` to `u128`\n-  --> $DIR/fn_to_numeric_cast.rs:39:13\n+  --> $DIR/fn_to_numeric_cast.rs:40:13\n    |\n-39 |     let _ = abc as u128;\n+40 |     let _ = abc as u128;\n    |             ^^^^^^^^^^^ help: try: `abc as usize`\n \n-error: casting function pointer `f` to `i32`\n-  --> $DIR/fn_to_numeric_cast.rs:46:5\n+error: casting function pointer `f` to `i32`, which truncates the value\n+  --> $DIR/fn_to_numeric_cast.rs:47:5\n    |\n-46 |     f as i32\n+47 |     f as i32\n    |     ^^^^^^^^ help: try: `f as usize`\n \n error: aborting due to 23 previous errors"}, {"sha": "4ebde4e8c1d5295dfe153b22b539c291867cd6d8", "filename": "tests/ui/fn_to_numeric_cast_with_truncation.rs", "status": "removed", "additions": 0, "deletions": 25, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/1544a1a681d4f7ab909f8e89c64d1b14bc7a7337/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.rs", "raw_url": "https://github.com/rust-lang/rust/raw/1544a1a681d4f7ab909f8e89c64d1b14bc7a7337/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.rs?ref=1544a1a681d4f7ab909f8e89c64d1b14bc7a7337", "patch": "@@ -1,25 +0,0 @@\n-// only-64bit\n-#![feature(tool_lints)]\n-\n-#![warn(clippy::fn_to_numeric_cast_with_truncation)]\n-#![allow(clippy::fn_to_numeric_cast)]\n-\n-fn foo() -> String { String::new() }\n-\n-fn test_fn_to_numeric_cast_with_truncation() {\n-    let _ = foo as i8;\n-    let _ = foo as i16;\n-    let _ = foo as i32;\n-    let _ = foo as u8;\n-    let _ = foo as u16;\n-    let _ = foo as u32;\n-\n-    // These should not lint, because because casting to these types\n-    // does not truncate the function pointer address.\n-    let _ = foo as u64;\n-    let _ = foo as i64;\n-    let _ = foo as u128;\n-    let _ = foo as i128;\n-}\n-\n-fn main() {}"}, {"sha": "65c996814ca518403b89694518e0a5aca03080f3", "filename": "tests/ui/fn_to_numeric_cast_with_truncation.stderr", "status": "removed", "additions": 0, "deletions": 40, "changes": 40, "blob_url": "https://github.com/rust-lang/rust/blob/1544a1a681d4f7ab909f8e89c64d1b14bc7a7337/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/1544a1a681d4f7ab909f8e89c64d1b14bc7a7337/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Ffn_to_numeric_cast_with_truncation.stderr?ref=1544a1a681d4f7ab909f8e89c64d1b14bc7a7337", "patch": "@@ -1,40 +0,0 @@\n-error: casting function pointer `foo` to `i8`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:10:13\n-   |\n-10 |     let _ = foo as i8;\n-   |             ^^^^^^^^^ help: try: `foo as usize`\n-   |\n-   = note: `-D clippy::fn-to-numeric-cast-with-truncation` implied by `-D warnings`\n-\n-error: casting function pointer `foo` to `i16`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:11:13\n-   |\n-11 |     let _ = foo as i16;\n-   |             ^^^^^^^^^^ help: try: `foo as usize`\n-\n-error: casting function pointer `foo` to `i32`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:12:13\n-   |\n-12 |     let _ = foo as i32;\n-   |             ^^^^^^^^^^ help: try: `foo as usize`\n-\n-error: casting function pointer `foo` to `u8`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:13:13\n-   |\n-13 |     let _ = foo as u8;\n-   |             ^^^^^^^^^ help: try: `foo as usize`\n-\n-error: casting function pointer `foo` to `u16`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:14:13\n-   |\n-14 |     let _ = foo as u16;\n-   |             ^^^^^^^^^^ help: try: `foo as usize`\n-\n-error: casting function pointer `foo` to `u32`, which truncates the value\n-  --> $DIR/fn_to_numeric_cast_with_truncation.rs:15:13\n-   |\n-15 |     let _ = foo as u32;\n-   |             ^^^^^^^^^^ help: try: `foo as usize`\n-\n-error: aborting due to 6 previous errors\n-"}]}