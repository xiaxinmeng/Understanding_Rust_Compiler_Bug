{"sha": "4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRhMzFhYWRkYjM2NGY1YWI4MjgwMjQyYTEwMTZiZGQzZDEwZGNhZWQ=", "commit": {"author": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2015-01-07T14:15:34Z"}, "committer": {"name": "Felix S. Klock II", "email": "pnkfelix@pnkfx.org", "date": "2015-01-07T23:41:43Z"}, "message": "Added `box_syntax` feature gate; added to std and rustc crates for bootstrap.\n\nTo avoid using the feauture, change uses of `box <expr>` to\n`Box::new(<expr>)` alternative, as noted by the feature gate message.\n\n(Note that box patterns have no analogous trivial replacement, at\nleast not in general; you need to revise the code to do a partial\nmatch, deref, and then the rest of the match.)\n\n[breaking-change]", "tree": {"sha": "e62158c713cb8491833f4cff687dca10faabc5aa", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e62158c713cb8491833f4cff687dca10faabc5aa"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "html_url": "https://github.com/rust-lang/rust/commit/4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/comments", "author": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pnkfelix", "id": 173127, "node_id": "MDQ6VXNlcjE3MzEyNw==", "avatar_url": "https://avatars.githubusercontent.com/u/173127?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pnkfelix", "html_url": "https://github.com/pnkfelix", "followers_url": "https://api.github.com/users/pnkfelix/followers", "following_url": "https://api.github.com/users/pnkfelix/following{/other_user}", "gists_url": "https://api.github.com/users/pnkfelix/gists{/gist_id}", "starred_url": "https://api.github.com/users/pnkfelix/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pnkfelix/subscriptions", "organizations_url": "https://api.github.com/users/pnkfelix/orgs", "repos_url": "https://api.github.com/users/pnkfelix/repos", "events_url": "https://api.github.com/users/pnkfelix/events{/privacy}", "received_events_url": "https://api.github.com/users/pnkfelix/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "82af2a1847fd51dd82f38666283ec9ff174d7a74", "url": "https://api.github.com/repos/rust-lang/rust/commits/82af2a1847fd51dd82f38666283ec9ff174d7a74", "html_url": "https://github.com/rust-lang/rust/commit/82af2a1847fd51dd82f38666283ec9ff174d7a74"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "402a542a92b303785eaa1ee8d26685c5b6f593fe", "filename": "src/liballoc/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Fliballoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Fliballoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliballoc%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -66,6 +66,7 @@\n #![no_std]\n #![allow(unknown_features)]\n #![feature(lang_items, unsafe_destructor)]\n+#![feature(box_syntax)]\n \n #[macro_use]\n extern crate core;"}, {"sha": "37bc37b84dfd849cf14f529ce64107ada84194c6", "filename": "src/libcollections/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibcollections%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibcollections%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibcollections%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -24,6 +24,7 @@\n #![allow(unknown_features)]\n #![feature(unsafe_destructor, slicing_syntax)]\n #![feature(old_impl_check)]\n+#![feature(box_syntax)]\n #![feature(unboxed_closures)]\n #![no_std]\n "}, {"sha": "ca61e3d1655af1cbf10cdd6c50d4f9749d63c6cc", "filename": "src/liblog/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Fliblog%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Fliblog%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fliblog%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -164,6 +164,7 @@\n        html_root_url = \"http://doc.rust-lang.org/nightly/\",\n        html_playground_url = \"http://play.rust-lang.org/\")]\n #![feature(slicing_syntax)]\n+#![feature(box_syntax)]\n #![deny(missing_docs)]\n \n extern crate regex;"}, {"sha": "bd93816a26d6bafa4e2b8bf10867f98c6999b7f1", "filename": "src/libregex/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibregex%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibregex%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibregex%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -24,6 +24,7 @@\n \n #![allow(unknown_features)]\n #![feature(slicing_syntax)]\n+#![feature(box_syntax)]\n #![deny(missing_docs)]\n \n #[cfg(test)]"}, {"sha": "7b57544d9d15d4c998ec5a63d3899955cd735181", "filename": "src/librustc/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -25,6 +25,7 @@\n #![allow(unknown_features)]\n #![feature(quote)]\n #![feature(slicing_syntax, unsafe_destructor)]\n+#![feature(box_syntax)]\n #![feature(rustc_diagnostic_macros)]\n #![feature(old_impl_check)]\n "}, {"sha": "e5f8334049bd8135dcc7ec7d31a55e022d374eef", "filename": "src/librustc_trans/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustc_trans%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustc_trans%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -24,6 +24,7 @@\n \n #![feature(quote)]\n #![feature(slicing_syntax, unsafe_destructor)]\n+#![feature(box_syntax)]\n #![feature(rustc_diagnostic_macros)]\n \n extern crate arena;"}, {"sha": "950b3e4da86c7ca9b4ff61ddfbabf53bc3227787", "filename": "src/librustc_typeck/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustc_typeck%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustc_typeck%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -73,6 +73,7 @@ This API is completely unstable and subject to change.\n \n #![feature(quote)]\n #![feature(slicing_syntax, unsafe_destructor)]\n+#![feature(box_syntax)]\n #![feature(rustc_diagnostic_macros)]\n #![allow(non_camel_case_types)]\n "}, {"sha": "d71dd00dc853f266601c33aa617bd21888ba3ac8", "filename": "src/librustdoc/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustdoc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibrustdoc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -17,6 +17,7 @@\n        html_root_url = \"http://doc.rust-lang.org/nightly/\",\n        html_playground_url = \"http://play.rust-lang.org/\")]\n #![feature(slicing_syntax)]\n+#![feature(box_syntax)]\n \n extern crate arena;\n extern crate getopts;"}, {"sha": "39a6471aac65bdb140e4a193fef6a086eb6f9c29", "filename": "src/libserialize/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibserialize%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibserialize%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibserialize%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -24,6 +24,7 @@ Core encoding and decoding interfaces.\n        html_playground_url = \"http://play.rust-lang.org/\")]\n #![allow(unknown_features)]\n #![feature(slicing_syntax)]\n+#![feature(box_syntax)]\n #![feature(old_impl_check)]\n #![cfg_attr(stage0, allow(unused_attributes))]\n "}, {"sha": "d34f497bbea360cde46186ba7ac7daa24d577f47", "filename": "src/libstd/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibstd%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibstd%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -107,6 +107,7 @@\n #![feature(linkage, thread_local, asm)]\n #![feature(lang_items, unsafe_destructor)]\n #![feature(slicing_syntax, unboxed_closures)]\n+#![feature(box_syntax)]\n #![feature(old_impl_check)]\n #![cfg_attr(stage0, allow(unused_attributes))]\n "}, {"sha": "fbff5e16ef5f755b5da16798b72f32a888a32b18", "filename": "src/libsyntax/feature_gate.rs", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibsyntax%2Ffeature_gate.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibsyntax%2Ffeature_gate.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Ffeature_gate.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -70,6 +70,7 @@ static KNOWN_FEATURES: &'static [(&'static str, Status)] = &[\n     (\"associated_types\", Accepted),\n     (\"visible_private_types\", Active),\n     (\"slicing_syntax\", Active),\n+    (\"box_syntax\", Active),\n \n     (\"if_let\", Accepted),\n     (\"while_let\", Accepted),\n@@ -343,6 +344,12 @@ impl<'a, 'v> Visitor<'v> for PostExpansionVisitor<'a> {\n                                   e.span,\n                                   \"range syntax is experimental\");\n             }\n+            ast::ExprBox(..) | ast::ExprUnary(ast::UnOp::UnUniq, _) => {\n+                self.gate_feature(\"box_syntax\",\n+                                  e.span,\n+                                  \"box expression syntax is experimental in alpha release; \\\n+                                   you can call `Box::new` instead.\");\n+            }\n             _ => {}\n         }\n         visit::walk_expr(self, e);\n@@ -365,6 +372,11 @@ impl<'a, 'v> Visitor<'v> for PostExpansionVisitor<'a> {\n                                    but at the end of a slice (e.g. \\\n                                    `[0, ..xs, 0]` are experimental\")\n             }\n+            ast::PatBox(..) => {\n+                self.gate_feature(\"box_syntax\",\n+                                  pattern.span,\n+                                  \"box pattern syntax is experimental in alpha release\");\n+            }\n             _ => {}\n         }\n         visit::walk_pat(self, pattern)"}, {"sha": "b6516254dbfefeca7275fda118a9a015540d6ebd", "filename": "src/libsyntax/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibsyntax%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibsyntax%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -24,6 +24,7 @@\n \n #![allow(unknown_features)]\n #![feature(slicing_syntax)]\n+#![feature(box_syntax)]\n #![feature(quote, unsafe_destructor)]\n \n extern crate arena;"}, {"sha": "8f486ea8c02be684d5392ce552dd5dc12d4427a4", "filename": "src/libterm/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibterm%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibterm%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibterm%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -49,6 +49,7 @@\n \n #![allow(unknown_features)]\n #![feature(slicing_syntax)]\n+#![feature(box_syntax)]\n #![deny(missing_docs)]\n \n #[macro_use] extern crate log;"}, {"sha": "506a625beb6a4e47f34076614661e2141315651e", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4a31aaddb364f5ab8280242a1016bdd3d10dcaed/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=4a31aaddb364f5ab8280242a1016bdd3d10dcaed", "patch": "@@ -31,6 +31,7 @@\n        html_favicon_url = \"http://www.rust-lang.org/favicon.ico\",\n        html_root_url = \"http://doc.rust-lang.org/nightly/\")]\n #![feature(asm, slicing_syntax)]\n+#![feature(box_syntax)]\n \n extern crate getopts;\n extern crate regex;"}]}