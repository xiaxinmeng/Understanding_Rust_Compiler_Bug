{"sha": "547f96f19c45c469a65f5f3862213165cf899d54", "node_id": "MDY6Q29tbWl0NzI0NzEyOjU0N2Y5NmYxOWM0NWM0NjlhNjVmNWYzODYyMjEzMTY1Y2Y4OTlkNTQ=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2019-08-04T12:59:13Z"}, "committer": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2019-08-30T10:34:38Z"}, "message": "Update proc-macro tests\n\nDue to #59998, the panic hook fires incorrectly for errors that should\nnot be treated as ICEs. Previously, this would only print the default\npanic message, but moving the ICE printing into the panic handler will\nnow print the entire ICE ordeal we all hate to see.\n\nUnfortunately this will make #59998 a lot more visible.", "tree": {"sha": "177a04958182fa1c9d4f038e9ab63c5c20feb748", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/177a04958182fa1c9d4f038e9ab63c5c20feb748"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/547f96f19c45c469a65f5f3862213165cf899d54", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/547f96f19c45c469a65f5f3862213165cf899d54", "html_url": "https://github.com/rust-lang/rust/commit/547f96f19c45c469a65f5f3862213165cf899d54", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/547f96f19c45c469a65f5f3862213165cf899d54/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cf1db72281134ab7375447f17bc2becb3943ee5d", "url": "https://api.github.com/repos/rust-lang/rust/commits/cf1db72281134ab7375447f17bc2becb3943ee5d", "html_url": "https://github.com/rust-lang/rust/commit/cf1db72281134ab7375447f17bc2becb3943ee5d"}], "stats": {"total": 21, "additions": 18, "deletions": 3}, "files": [{"sha": "3b6498b4b0ee901d80dc5cc6d6f63869174999e3", "filename": "src/test/ui/proc-macro/invalid-punct-ident-1.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-1.rs?ref=547f96f19c45c469a65f5f3862213165cf899d54", "patch": "@@ -3,6 +3,11 @@\n // FIXME https://github.com/rust-lang/rust/issues/59998\n // normalize-stderr-test \"thread.*panicked.*proc_macro_server.rs.*\\n\" -> \"\"\n // normalize-stderr-test \"note:.*RUST_BACKTRACE=1.*\\n\" -> \"\"\n+// normalize-stderr-test \"error: internal compiler error.*\\n\" -> \"\"\n+// normalize-stderr-test \"note:.*unexpectedly panicked.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: we would appreciate a bug report.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: compiler flags.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: rustc.*running on.*\\n\" -> \"\"\n \n #[macro_use]\n extern crate invalid_punct_ident;"}, {"sha": "107f5fb515b1cdd5852ac94ddb39f715a6c939d7", "filename": "src/test/ui/proc-macro/invalid-punct-ident-1.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-1.stderr?ref=547f96f19c45c469a65f5f3862213165cf899d54", "patch": "@@ -1,5 +1,5 @@\n error: proc macro panicked\n-  --> $DIR/invalid-punct-ident-1.rs:10:1\n+  --> $DIR/invalid-punct-ident-1.rs:15:1\n    |\n LL | invalid_punct!();\n    | ^^^^^^^^^^^^^^^^^"}, {"sha": "ee57752e2be27c985b786292c84bf81e4925e7dd", "filename": "src/test/ui/proc-macro/invalid-punct-ident-2.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-2.rs?ref=547f96f19c45c469a65f5f3862213165cf899d54", "patch": "@@ -3,6 +3,11 @@\n // FIXME https://github.com/rust-lang/rust/issues/59998\n // normalize-stderr-test \"thread.*panicked.*proc_macro_server.rs.*\\n\" -> \"\"\n // normalize-stderr-test \"note:.*RUST_BACKTRACE=1.*\\n\" -> \"\"\n+// normalize-stderr-test \"error: internal compiler error.*\\n\" -> \"\"\n+// normalize-stderr-test \"note:.*unexpectedly panicked.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: we would appreciate a bug report.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: compiler flags.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: rustc.*running on.*\\n\" -> \"\"\n \n #[macro_use]\n extern crate invalid_punct_ident;"}, {"sha": "f1b9ecc6cbfe4552ef7e8ac198a5dc6a67076d48", "filename": "src/test/ui/proc-macro/invalid-punct-ident-2.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-2.stderr?ref=547f96f19c45c469a65f5f3862213165cf899d54", "patch": "@@ -1,5 +1,5 @@\n error: proc macro panicked\n-  --> $DIR/invalid-punct-ident-2.rs:10:1\n+  --> $DIR/invalid-punct-ident-2.rs:15:1\n    |\n LL | invalid_ident!();\n    | ^^^^^^^^^^^^^^^^^"}, {"sha": "efcd6801ecbdd3496f10ed8ba9c4c0da96ae2e24", "filename": "src/test/ui/proc-macro/invalid-punct-ident-3.rs", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-3.rs", "raw_url": "https://github.com/rust-lang/rust/raw/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-3.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-3.rs?ref=547f96f19c45c469a65f5f3862213165cf899d54", "patch": "@@ -3,6 +3,11 @@\n // FIXME https://github.com/rust-lang/rust/issues/59998\n // normalize-stderr-test \"thread.*panicked.*proc_macro_server.rs.*\\n\" -> \"\"\n // normalize-stderr-test \"note:.*RUST_BACKTRACE=1.*\\n\" -> \"\"\n+// normalize-stderr-test \"error: internal compiler error.*\\n\" -> \"\"\n+// normalize-stderr-test \"note:.*unexpectedly panicked.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: we would appreciate a bug report.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: compiler flags.*\\n\" -> \"\"\n+// normalize-stderr-test \"note: rustc.*running on.*\\n\" -> \"\"\n \n #[macro_use]\n extern crate invalid_punct_ident;"}, {"sha": "6044b9887401e1acd29160ef17749376091bc5d3", "filename": "src/test/ui/proc-macro/invalid-punct-ident-3.stderr", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-3.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/547f96f19c45c469a65f5f3862213165cf899d54/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-3.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fproc-macro%2Finvalid-punct-ident-3.stderr?ref=547f96f19c45c469a65f5f3862213165cf899d54", "patch": "@@ -1,5 +1,5 @@\n error: proc macro panicked\n-  --> $DIR/invalid-punct-ident-3.rs:10:1\n+  --> $DIR/invalid-punct-ident-3.rs:15:1\n    |\n LL | invalid_raw_ident!();\n    | ^^^^^^^^^^^^^^^^^^^^^"}]}