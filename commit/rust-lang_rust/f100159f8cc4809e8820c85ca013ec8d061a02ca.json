{"sha": "f100159f8cc4809e8820c85ca013ec8d061a02ca", "node_id": "C_kwDOAAsO6NoAKGYxMDAxNTlmOGNjNDgwOWU4ODIwYzg1Y2EwMTNlYzhkMDYxYTAyY2E", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-27T09:00:31Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2021-09-27T09:00:31Z"}, "message": "Auto merge of #7692 - workingjubilee:float-cmp-not-wrong, r=giraffate\n\nDemote float_cmp to pedantic\n\nSee this issue: https://github.com/rust-lang/rust-clippy/issues/7666\n\nThis is one of the most frequently suppressed lints. It is deny-by-default. It is not actually clearly wrong, as there are many instances where direct float comparison is actually desirable. It is only after operating on floats that they may lose precision, and that depends greatly on the operation. As most correctness lints have a much higher standard of error, being based on hard and fast binary logic, this should not be amongst them.\n\nA linter is not a substitute for observing the math carefully and running tests, and doing the desirable thing is even more likely to lead one to want exact comparisons.\n\nchangelog: Demote [`float_cmp`] from correctness to pedantic lints", "tree": {"sha": "b67aa8e75f1f6c1b299a4291a1138669581ff552", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/b67aa8e75f1f6c1b299a4291a1138669581ff552"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/f100159f8cc4809e8820c85ca013ec8d061a02ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/f100159f8cc4809e8820c85ca013ec8d061a02ca", "html_url": "https://github.com/rust-lang/rust/commit/f100159f8cc4809e8820c85ca013ec8d061a02ca", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/f100159f8cc4809e8820c85ca013ec8d061a02ca/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "30fe4ba1fb58c5f929dcf0f637b400a1ceb77693", "url": "https://api.github.com/repos/rust-lang/rust/commits/30fe4ba1fb58c5f929dcf0f637b400a1ceb77693", "html_url": "https://github.com/rust-lang/rust/commit/30fe4ba1fb58c5f929dcf0f637b400a1ceb77693"}, {"sha": "3ad3c51cee1d36d01fd145d6a45e33cff2bc12a1", "url": "https://api.github.com/repos/rust-lang/rust/commits/3ad3c51cee1d36d01fd145d6a45e33cff2bc12a1", "html_url": "https://github.com/rust-lang/rust/commit/3ad3c51cee1d36d01fd145d6a45e33cff2bc12a1"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "1d24d02511b7cffa9da735c6dc2aeaa1c58391f4", "filename": "clippy_lints/src/lib.rs", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/f100159f8cc4809e8820c85ca013ec8d061a02ca/clippy_lints%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f100159f8cc4809e8820c85ca013ec8d061a02ca/clippy_lints%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flib.rs?ref=f100159f8cc4809e8820c85ca013ec8d061a02ca", "patch": "@@ -1134,6 +1134,7 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(methods::INEFFICIENT_TO_STRING),\n         LintId::of(methods::MAP_FLATTEN),\n         LintId::of(methods::MAP_UNWRAP_OR),\n+        LintId::of(misc::FLOAT_CMP),\n         LintId::of(misc::USED_UNDERSCORE_BINDING),\n         LintId::of(misc_early::UNSEPARATED_LITERAL_SUFFIX),\n         LintId::of(mut_mut::MUT_MUT),\n@@ -1368,7 +1369,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(minmax::MIN_MAX),\n         LintId::of(misc::CMP_NAN),\n         LintId::of(misc::CMP_OWNED),\n-        LintId::of(misc::FLOAT_CMP),\n         LintId::of(misc::MODULO_ONE),\n         LintId::of(misc::SHORT_CIRCUIT_STATEMENT),\n         LintId::of(misc::TOPLEVEL_REF_ARG),\n@@ -1733,7 +1733,6 @@ pub fn register_plugins(store: &mut rustc_lint::LintStore, sess: &Session, conf:\n         LintId::of(methods::ZST_OFFSET),\n         LintId::of(minmax::MIN_MAX),\n         LintId::of(misc::CMP_NAN),\n-        LintId::of(misc::FLOAT_CMP),\n         LintId::of(misc::MODULO_ONE),\n         LintId::of(non_octal_unix_permissions::NON_OCTAL_UNIX_PERMISSIONS),\n         LintId::of(open_options::NONSENSICAL_OPEN_OPTIONS),"}, {"sha": "0f32cd9164e2d7ecf874923a3a5d7a299b19365a", "filename": "clippy_lints/src/misc.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/f100159f8cc4809e8820c85ca013ec8d061a02ca/clippy_lints%2Fsrc%2Fmisc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/f100159f8cc4809e8820c85ca013ec8d061a02ca/clippy_lints%2Fsrc%2Fmisc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fmisc.rs?ref=f100159f8cc4809e8820c85ca013ec8d061a02ca", "patch": "@@ -113,7 +113,7 @@ declare_clippy_lint! {\n     /// if (y - x).abs() > error_margin { }\n     /// ```\n     pub FLOAT_CMP,\n-    correctness,\n+    pedantic,\n     \"using `==` or `!=` on float values instead of comparing difference with an epsilon\"\n }\n "}]}