{"sha": "cd27820b1a26046e2040f666b3b66a9a5aa8c4ea", "node_id": "MDY6Q29tbWl0NzI0NzEyOmNkMjc4MjBiMWEyNjA0NmUyMDQwZjY2NmIzYjY2YTlhNWFhOGM0ZWE=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-02-15T15:06:53Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-02-15T15:06:53Z"}, "message": "Rollup merge of #81897 - vandenheuvel:match_exhaustive_diagnostics_regression_test, r=Mark-Simulacrum\n\nAdd match pattern diagnostics regression test\n\nCloses #72377 by adding a regression test.\n\nThis test case fails on stable but now works on beta and nightly. It *should* have worked already for years, the crucial point whether it is mentioned that some uncovered patterns are not explicitly mentioned.", "tree": {"sha": "4f7c0e8894794afb9c7207e9415ae0bbd50da490", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/4f7c0e8894794afb9c7207e9415ae0bbd50da490"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgKo4NCRBK7hj4Ov3rIwAAdHIIADwzMEVbCY1klEiSppjWvdlv\nozHLeOmN4EwCB6IJJsBXAJoB63qW0c96M9/YvTfeGBFmbLvDlmR2MQ66SB5IdCbc\nP5FgqwR9oMJbwcmlmrYhr8ow8dD8CyucMoYeg+QNHJS2OLeclbKkcErjZj/6IZFV\nxotfjlHCZDANToPv5SW7ef2P3y/UNo473KXTMh1lIEMewukRB8ebv5LQDlzYbids\nUKLUnz5CmgTDwSnWs7dT3uahu3nuZXtHZsdwKYdqbmgRhNAdOxtMxb7VI+KKAomc\n4yWtkaKQKlSwOEYIsJ0RKv61vEm1rwJHNNF/A1QK/WGOuFRZFpcZQUt5/E9T1Jc=\n=202A\n-----END PGP SIGNATURE-----\n", "payload": "tree 4f7c0e8894794afb9c7207e9415ae0bbd50da490\nparent f02f7b05b24543f0928f34c75aad2465e20094ca\nparent 5fe84900464aa382e85eab6132e778b7c9d8141e\nauthor Jonas Schievink <jonasschievink@gmail.com> 1613401613 +0100\ncommitter GitHub <noreply@github.com> 1613401613 +0100\n\nRollup merge of #81897 - vandenheuvel:match_exhaustive_diagnostics_regression_test, r=Mark-Simulacrum\n\nAdd match pattern diagnostics regression test\n\nCloses #72377 by adding a regression test.\n\nThis test case fails on stable but now works on beta and nightly. It *should* have worked already for years, the crucial point whether it is mentioned that some uncovered patterns are not explicitly mentioned.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea", "html_url": "https://github.com/rust-lang/rust/commit/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f02f7b05b24543f0928f34c75aad2465e20094ca", "url": "https://api.github.com/repos/rust-lang/rust/commits/f02f7b05b24543f0928f34c75aad2465e20094ca", "html_url": "https://github.com/rust-lang/rust/commit/f02f7b05b24543f0928f34c75aad2465e20094ca"}, {"sha": "5fe84900464aa382e85eab6132e778b7c9d8141e", "url": "https://api.github.com/repos/rust-lang/rust/commits/5fe84900464aa382e85eab6132e778b7c9d8141e", "html_url": "https://github.com/rust-lang/rust/commit/5fe84900464aa382e85eab6132e778b7c9d8141e"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "b0d8a53ed93b0062aa50265e0fbab52b4f9cd384", "filename": "src/test/ui/pattern/usefulness/issue-72377.rs", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/rust-lang/rust/blob/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Fissue-72377.rs", "raw_url": "https://github.com/rust-lang/rust/raw/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Fissue-72377.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Fissue-72377.rs?ref=cd27820b1a26046e2040f666b3b66a9a5aa8c4ea", "patch": "@@ -0,0 +1,17 @@\n+#[derive(PartialEq, Eq)]\n+enum X { A, B, C, }\n+\n+fn main() {\n+    let x = X::A;\n+    let y = Some(X::A);\n+\n+    match (x, y) {\n+        //~^ ERROR non-exhaustive patterns: `(A, Some(A))`, `(A, Some(B))`, `(B, Some(B))` and 2\n+        //~| more not covered\n+        (_, None) => false,\n+        (v, Some(w)) if v == w => true,\n+        (X::B, Some(X::C)) => false,\n+        (X::B, Some(X::A)) => false,\n+        (X::A, Some(X::C)) | (X::C, Some(X::A)) => false,\n+    };\n+}"}, {"sha": "b4a68333967b36b97d5ebf7c8284916c486c6d7b", "filename": "src/test/ui/pattern/usefulness/issue-72377.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Fissue-72377.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/cd27820b1a26046e2040f666b3b66a9a5aa8c4ea/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Fissue-72377.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fpattern%2Fusefulness%2Fissue-72377.stderr?ref=cd27820b1a26046e2040f666b3b66a9a5aa8c4ea", "patch": "@@ -0,0 +1,12 @@\n+error[E0004]: non-exhaustive patterns: `(A, Some(A))`, `(A, Some(B))`, `(B, Some(B))` and 2 more not covered\n+  --> $DIR/issue-72377.rs:8:11\n+   |\n+LL |     match (x, y) {\n+   |           ^^^^^^ patterns `(A, Some(A))`, `(A, Some(B))`, `(B, Some(B))` and 2 more not covered\n+   |\n+   = help: ensure that all possible cases are being handled, possibly by adding wildcards or more match arms\n+   = note: the matched value is of type `(X, Option<X>)`\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0004`."}]}