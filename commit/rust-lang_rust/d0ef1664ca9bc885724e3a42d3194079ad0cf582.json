{"sha": "d0ef1664ca9bc885724e3a42d3194079ad0cf582", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQwZWYxNjY0Y2E5YmM4ODU3MjRlM2E0MmQzMTk0MDc5YWQwY2Y1ODI=", "commit": {"author": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2015-02-12T18:34:50Z"}, "committer": {"name": "Niko Matsakis", "email": "niko@alum.mit.edu", "date": "2015-02-16T15:55:37Z"}, "message": "Clarify and improve comment, removing a TODO.", "tree": {"sha": "ac799967a427e8abc1fd68a320074f553c5dafa4", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/ac799967a427e8abc1fd68a320074f553c5dafa4"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d0ef1664ca9bc885724e3a42d3194079ad0cf582", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d0ef1664ca9bc885724e3a42d3194079ad0cf582", "html_url": "https://github.com/rust-lang/rust/commit/d0ef1664ca9bc885724e3a42d3194079ad0cf582", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d0ef1664ca9bc885724e3a42d3194079ad0cf582/comments", "author": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "committer": {"login": "nikomatsakis", "id": 155238, "node_id": "MDQ6VXNlcjE1NTIzOA==", "avatar_url": "https://avatars.githubusercontent.com/u/155238?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nikomatsakis", "html_url": "https://github.com/nikomatsakis", "followers_url": "https://api.github.com/users/nikomatsakis/followers", "following_url": "https://api.github.com/users/nikomatsakis/following{/other_user}", "gists_url": "https://api.github.com/users/nikomatsakis/gists{/gist_id}", "starred_url": "https://api.github.com/users/nikomatsakis/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nikomatsakis/subscriptions", "organizations_url": "https://api.github.com/users/nikomatsakis/orgs", "repos_url": "https://api.github.com/users/nikomatsakis/repos", "events_url": "https://api.github.com/users/nikomatsakis/events{/privacy}", "received_events_url": "https://api.github.com/users/nikomatsakis/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f58a1bfa981eee4ba4d4c3c801f94772e4ab0019", "url": "https://api.github.com/repos/rust-lang/rust/commits/f58a1bfa981eee4ba4d4c3c801f94772e4ab0019", "html_url": "https://github.com/rust-lang/rust/commit/f58a1bfa981eee4ba4d4c3c801f94772e4ab0019"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "828aed8b3efe0ca1b5b590d3fc2c0ffda9be2111", "filename": "src/librustc_typeck/check/mod.rs", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/d0ef1664ca9bc885724e3a42d3194079ad0cf582/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d0ef1664ca9bc885724e3a42d3194079ad0cf582/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_typeck%2Fcheck%2Fmod.rs?ref=d0ef1664ca9bc885724e3a42d3194079ad0cf582", "patch": "@@ -1891,12 +1891,13 @@ impl<'a, 'tcx> FnCtxt<'a, 'tcx> {\n \n impl<'a, 'tcx> RegionScope for FnCtxt<'a, 'tcx> {\n     fn object_lifetime_default(&self, span: Span) -> Option<ty::Region> {\n-        // TODO. RFC #599 specifies that object lifetime defaults take\n-        // precedence over other defaults. *However,* within a fn\n-        // body, we typically use inference to allow users to elide\n-        // lifetimes whenever they like, and then just infer it to\n-        // whatever it must be. So I interpret that as applying only\n-        // to fn sigs.\n+        // RFC #599 specifies that object lifetime defaults take\n+        // precedence over other defaults. But within a fn body we\n+        // don't have a *default* region, rather we use inference to\n+        // find the *correct* region, which is strictly more general\n+        // (and anyway, within a fn body the right region may not even\n+        // be something the user can write explicitly, since it might\n+        // be some expression).\n         Some(self.infcx().next_region_var(infer::MiscVariable(span)))\n     }\n "}]}