{"sha": "8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "node_id": "C_kwDOAAsO6NoAKDhhMzVjYzNkZGM1YjE4MzAzZDY3ZDA0NTVmYTFhOGZhODhjYTBhZjg", "commit": {"author": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-05-18T14:16:13Z"}, "committer": {"name": "Guillaume Gomez", "email": "guillaume.gomez@huawei.com", "date": "2023-06-02T21:56:10Z"}, "message": "Move item kind before the item name", "tree": {"sha": "a24bd3d4657ba33db878167d5447968e03e73167", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a24bd3d4657ba33db878167d5447968e03e73167"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "html_url": "https://github.com/rust-lang/rust/commit/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/comments", "author": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "committer": {"login": "GuillaumeGomez", "id": 3050060, "node_id": "MDQ6VXNlcjMwNTAwNjA=", "avatar_url": "https://avatars.githubusercontent.com/u/3050060?v=4", "gravatar_id": "", "url": "https://api.github.com/users/GuillaumeGomez", "html_url": "https://github.com/GuillaumeGomez", "followers_url": "https://api.github.com/users/GuillaumeGomez/followers", "following_url": "https://api.github.com/users/GuillaumeGomez/following{/other_user}", "gists_url": "https://api.github.com/users/GuillaumeGomez/gists{/gist_id}", "starred_url": "https://api.github.com/users/GuillaumeGomez/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/GuillaumeGomez/subscriptions", "organizations_url": "https://api.github.com/users/GuillaumeGomez/orgs", "repos_url": "https://api.github.com/users/GuillaumeGomez/repos", "events_url": "https://api.github.com/users/GuillaumeGomez/events{/privacy}", "received_events_url": "https://api.github.com/users/GuillaumeGomez/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a09a688de6f1565fe1608eaaaee5ff4fe0c3a6d", "url": "https://api.github.com/repos/rust-lang/rust/commits/7a09a688de6f1565fe1608eaaaee5ff4fe0c3a6d", "html_url": "https://github.com/rust-lang/rust/commit/7a09a688de6f1565fe1608eaaaee5ff4fe0c3a6d"}], "stats": {"total": 57, "additions": 22, "deletions": 35}, "files": [{"sha": "d469b397dcfce544dec44a93201e66b51eb8f7e1", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "patch": "@@ -190,6 +190,7 @@ h1, h2, h3, h4, h5, h6,\n .mobile-topbar,\n .search-input,\n .search-results .result-name,\n+.search-results .type-kind,\n .item-name > a,\n .out-of-band,\n span.since,\n@@ -870,6 +871,10 @@ so that we can apply CSS-filters to change the arrow color in themes */\n }\n \n .search-results > a > div {\n+\tflex: 3;\n+}\n+\n+.search-results > a > div.type-kind {\n \tflex: 1;\n }\n "}, {"sha": "c25c36994fa42c4f50049a31335f75bb73c9c8f4", "filename": "src/librustdoc/html/static/js/search.js", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "raw_url": "https://github.com/rust-lang/rust/raw/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fjs%2Fsearch.js?ref=8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "patch": "@@ -1866,7 +1866,7 @@ function initSearch(rawSearchIndex) {\n                 const name = item.name;\n                 const type = itemTypes[item.ty];\n                 const longType = longItemTypes[item.ty];\n-                let extra = longType.length !== 0 ? ` <i>(${longType})</i>` : \"\";\n+                const typeName = longType.length !== 0 ? `${longType}` : \"?\";\n \n                 length += 1;\n \n@@ -1878,7 +1878,6 @@ function initSearch(rawSearchIndex) {\n                 resultName.className = \"result-name\";\n \n                 if (item.is_alias) {\n-                    extra = \"\";\n                     const alias = document.createElement(\"span\");\n                     alias.className = \"alias\";\n \n@@ -1892,9 +1891,15 @@ function initSearch(rawSearchIndex) {\n \n                     resultName.appendChild(alias);\n                 }\n+\n+                const typeDisplay = document.createElement(\"div\");\n+                typeDisplay.innerText = typeName;\n+                typeDisplay.className = \"type-kind\";\n+                link.appendChild(typeDisplay);\n+\n                 resultName.insertAdjacentHTML(\n                     \"beforeend\",\n-                    item.displayPath + \"<span class=\\\"\" + type + \"\\\">\" + name + \"</span>\" + extra);\n+                    item.displayPath + \"<span class=\\\"\" + type + \"\\\">\" + name + \"</span>\");\n                 link.appendChild(resultName);\n \n                 const description = document.createElement(\"div\");"}, {"sha": "4f3ccd7159946eb80d0e4f7b361cf7add307d39d", "filename": "tests/rustdoc-gui/search-reexport.goml", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-reexport.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-reexport.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-reexport.goml?ref=8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "patch": "@@ -14,7 +14,8 @@ assert-attribute: (\n     \"//a[@class='result-import']\",\n     {\"href\": \"../test_docs/index.html#reexport.TheStdReexport\"},\n )\n-assert-text: (\"//a[@class='result-import']\", \"test_docs::TheStdReexport (re-export)\")\n+assert-text: (\"a.result-import .result-name\", \"test_docs::TheStdReexport\")\n+assert-text: (\"a.result-import .type-kind\", \"re-export\")\n click: \"//a[@class='result-import']\"\n // We check that it has the background modified thanks to the focus.\n wait-for-css: (\"//*[@id='reexport.TheStdReexport']\", {\"background-color\": \"rgb(73, 74, 61)\"})\n@@ -25,7 +26,7 @@ press-key: 'Enter'\n write: (\".search-input\", \"AliasForTheStdReexport\")\n wait-for: \"//a[@class='result-import']\"\n assert-text: (\n-    \"//a[@class='result-import']\",\n+    \"a.result-import .result-name\",\n     \"AliasForTheStdReexport - see test_docs::TheStdReexport\",\n )\n // Same thing again, we click on it to ensure the background is once again set as expected."}, {"sha": "5ae3125a7f186adbb120bb0d7df27cd16e6c1649", "filename": "tests/rustdoc-gui/search-result-color.goml", "status": "modified", "additions": 2, "deletions": 26, "changes": 28, "blob_url": "https://github.com/rust-lang/rust/blob/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-result-color.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-result-color.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-result-color.goml?ref=8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "patch": "@@ -5,7 +5,7 @@ define-function: (\n     (result_kind, color, hover_color),\n     block {\n         assert-css: (\".result-\" + |result_kind| + \" .\" + |result_kind|, {\"color\": |color|}, ALL)\n-        assert-css: (\".result-\" + |result_kind| + \" i\", {\"color\": |default_color|})\n+        assert-css: (\".result-\" + |result_kind| + \" .type-kind\", {\"color\": |entry_color|})\n         assert-css: (\n             \".result-\" + |result_kind|,\n             {\"color\": |entry_color|, \"background-color\": |background_color|},\n@@ -19,7 +19,7 @@ define-function: (\n             \".result-\" + |result_kind| + \":hover .\" + |result_kind|,\n             {\"color\": |hover_color|},\n         )\n-        assert-css: (\".result-\" + |result_kind| + \":hover i\", {\"color\": |default_color|})\n+        assert-css: (\".result-\" + |result_kind| + \":hover .type-kind\", {\"color\": |hover_entry_color|})\n         move-cursor-to: \".search-input\"\n         focus: \".result-\" + |result_kind|\n         assert-css: (\n@@ -67,14 +67,6 @@ assert-css: (\n     {\"border-bottom-color\": \"#aaa3\"}\n )\n \n-store-value: (default_color, \"rgb(197, 197, 197)\")\n-\n-// Checking the color of \"keyword\" text.\n-assert-css: (\n-    \"//*[@class='result-name']//*[text()='(keyword)']\",\n-    {\"color\": |default_color|},\n-)\n-\n store-value: (entry_color, \"#0096cf\") // color of the search entry\n store-value: (hover_entry_color, \"#fff\") // color of the hovered/focused search entry\n store-value: (background_color, \"transparent\") // background color\n@@ -186,14 +178,6 @@ assert-css: (\n     {\"border-bottom-color\": \"#aaa3\"}\n )\n \n-store-value: (default_color, \"rgb(221, 221, 221)\")\n-\n-// Checking the color for \"keyword\" text.\n-assert-css: (\n-    \"//*[@class='result-name']//*[text()='(keyword)']\",\n-    {\"color\": |default_color|},\n-)\n-\n store-value: (entry_color, \"#ddd\") // color of the search entry\n store-value: (hover_entry_color, \"#ddd\") // color of the hovered/focused search entry\n store-value: (background_color, \"transparent\") // background color\n@@ -290,14 +274,6 @@ assert-css: (\n     {\"border-bottom-color\": \"#aaa3\"}\n )\n \n-store-value: (default_color, \"rgb(0, 0, 0)\")\n-\n-// Checking the color for \"keyword\" text.\n-assert-css: (\n-    \"//*[@class='result-name']//*[text()='(keyword)']\",\n-    {\"color\": |default_color|},\n-)\n-\n store-value: (entry_color, \"#000\") // color of the search entry\n store-value: (hover_entry_color, \"#000\") // color of the hovered/focused search entry\n store-value: (background_color, \"transparent\") // background color"}, {"sha": "08c43b4899cd9a8e26bd8daff7b3ca1b93a0c6ef", "filename": "tests/rustdoc-gui/search-result-display.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-result-display.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-result-display.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-result-display.goml?ref=8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "patch": "@@ -7,11 +7,11 @@ press-key: 'Enter'\n wait-for: \"#crate-search\"\n // The width is returned by \"getComputedStyle\" which returns the exact number instead of the\n // CSS rule which is \"50%\"...\n-assert-css: (\".search-results div.desc\", {\"width\": \"310px\"})\n+assert-size: (\".search-results div.desc\", {\"width\": 259})\n set-window-size: (600, 100)\n // As counter-intuitive as it may seem, in this width, the width is \"100%\", which is why\n // when computed it's larger.\n-assert-css: (\".search-results div.desc\", {\"width\": \"566px\"})\n+assert-size: (\".search-results div.desc\", {\"width\": 566})\n \n // The result set is all on one line.\n assert-css: (\".search-results .result-name > span\", {\"display\": \"inline\"})"}, {"sha": "3326f5b72f4da5a4d643156c3da875489953b2ac", "filename": "tests/rustdoc-gui/search-result-keyword.goml", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-result-keyword.goml", "raw_url": "https://github.com/rust-lang/rust/raw/8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8/tests%2Frustdoc-gui%2Fsearch-result-keyword.goml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Frustdoc-gui%2Fsearch-result-keyword.goml?ref=8a35cc3ddc5b18303d67d0455fa1a8fa88ca0af8", "patch": "@@ -9,5 +9,5 @@ wait-for: \"#search-tabs\"\n // less good.\n //\n // Checking that the CSS is displaying \" (keyword)\" in italic.\n-assert-text: (\".result-keyword span.keyword + i\", \"(keyword)\")\n-assert-text: (\".result-keyword .result-name\", \"CookieMonster (keyword)\")\n+assert-text: (\".result-keyword .type-kind\", \"keyword\")\n+assert-text: (\".result-keyword .result-name\", \"CookieMonster\")"}]}