{"sha": "0629309a7de803ee9125179306228a981bb52078", "node_id": "MDY6Q29tbWl0NzI0NzEyOjA2MjkzMDlhN2RlODAzZWU5MTI1MTc5MzA2MjI4YTk4MWJiNTIwNzg=", "commit": {"author": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-11T11:56:53Z"}, "committer": {"name": "kennytm", "email": "kennytm@gmail.com", "date": "2018-04-11T19:23:19Z"}, "message": "Rollup merge of #49856 - varkor:no_mangle-statics-unlinted, r=michaelwoerister\n\nDo not uppercase-lint #[no_mangle] statics\n\nThe reasoning being that `#[no_mangle]` expresses enough intention that there's likely a good reason for the name.\n\nFixes #36258.", "tree": {"sha": "d1e19a38e86f70188ac3355e20e7f9d757b5c215", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d1e19a38e86f70188ac3355e20e7f9d757b5c215"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0629309a7de803ee9125179306228a981bb52078", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEZ1R8CLMp8f2GxWoQ/vbIBR0OATwFAlrOYKcACgkQ/vbIBR0O\nATzYag//b/HLFjYsB7pKf55KlMCbFWXhQm1fOfFyc50wos0zbMqislIzWMJbaaKE\nfTVQn4SC+9kQ+0embSQppcL7gykL2Y0Xe8ev+auFW83SwIzcj/DEPH18ydUSr7gJ\nZc9mvAePavlOrKMYilmaJJtC7kRKV1m/BJqybkDS92WwO4KO5QS/RqB9EgsdUbkA\nLlt5R4T3ieol1ex2bXfjdljmnyyImer6AxrSEXF+Tv0TmHmRjxQc+I4Z6k+4T7eV\nFm8nLuYkAgMrek6bOicpwGoO86lk3qNJdQ67tEek+T/syknS2AjpOAY0g3zC/lyf\nvaqU7YAZ9k6742R6me+Z7wFyCEG1KjdYjZ3RxmHoCr78zJDwHkOGgXY9dmsBnWDN\nTdupz1Uj+kWvBq8XHPy9jdDJRaPwBgw1ufhw3tb55LVbsOw+0+ihFcyLTtbUnm+Q\njOQ2hwY3P0nXKbIzQJGVD035EADswCx8GkTqvAkTLPmfBOmQpA1GCf57IjfmmcLK\nwfeDdMhkkCFVevKtcAbpbWoPuAVKcBGc7A8YEDDIl/NASZsEXa4M34coCm0Um46V\n3DMLTSet7H/0WbZrhFue4aeCghDdS7R0TUE+G2gICX04DdI1mnoVNV2oV8tohZyR\nbiAV/JKffXfaAXSEX36GrxLa+c9TyMTwtdzhiglRhqcCZHGh9B4=\n=xGSw\n-----END PGP SIGNATURE-----", "payload": "tree d1e19a38e86f70188ac3355e20e7f9d757b5c215\nparent 4dbca4c8ac713bb4cf13a4460b4f98751fce2191\nparent 6e0089ea7776eea84fb26690b590074710247146\nauthor kennytm <kennytm@gmail.com> 1523447813 +0800\ncommitter kennytm <kennytm@gmail.com> 1523474599 +0800\n\nRollup merge of #49856 - varkor:no_mangle-statics-unlinted, r=michaelwoerister\n\nDo not uppercase-lint #[no_mangle] statics\n\nThe reasoning being that `#[no_mangle]` expresses enough intention that there's likely a good reason for the name.\n\nFixes #36258.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0629309a7de803ee9125179306228a981bb52078", "html_url": "https://github.com/rust-lang/rust/commit/0629309a7de803ee9125179306228a981bb52078", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0629309a7de803ee9125179306228a981bb52078/comments", "author": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kennytm", "id": 103023, "node_id": "MDQ6VXNlcjEwMzAyMw==", "avatar_url": "https://avatars.githubusercontent.com/u/103023?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kennytm", "html_url": "https://github.com/kennytm", "followers_url": "https://api.github.com/users/kennytm/followers", "following_url": "https://api.github.com/users/kennytm/following{/other_user}", "gists_url": "https://api.github.com/users/kennytm/gists{/gist_id}", "starred_url": "https://api.github.com/users/kennytm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kennytm/subscriptions", "organizations_url": "https://api.github.com/users/kennytm/orgs", "repos_url": "https://api.github.com/users/kennytm/repos", "events_url": "https://api.github.com/users/kennytm/events{/privacy}", "received_events_url": "https://api.github.com/users/kennytm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4dbca4c8ac713bb4cf13a4460b4f98751fce2191", "url": "https://api.github.com/repos/rust-lang/rust/commits/4dbca4c8ac713bb4cf13a4460b4f98751fce2191", "html_url": "https://github.com/rust-lang/rust/commit/4dbca4c8ac713bb4cf13a4460b4f98751fce2191"}, {"sha": "6e0089ea7776eea84fb26690b590074710247146", "url": "https://api.github.com/repos/rust-lang/rust/commits/6e0089ea7776eea84fb26690b590074710247146", "html_url": "https://github.com/rust-lang/rust/commit/6e0089ea7776eea84fb26690b590074710247146"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "463ec4796e8b628e37a76d96b4f90dcba1ee93bb", "filename": "src/librustc_lint/bad_style.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0629309a7de803ee9125179306228a981bb52078/src%2Flibrustc_lint%2Fbad_style.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0629309a7de803ee9125179306228a981bb52078/src%2Flibrustc_lint%2Fbad_style.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Fbad_style.rs?ref=0629309a7de803ee9125179306228a981bb52078", "patch": "@@ -368,6 +368,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NonUpperCaseGlobals {\n     fn check_item(&mut self, cx: &LateContext, it: &hir::Item) {\n         match it.node {\n             hir::ItemStatic(..) => {\n+                if attr::find_by_name(&it.attrs, \"no_mangle\").is_some() {\n+                    return;\n+                }\n                 NonUpperCaseGlobals::check_upper_case(cx, \"static variable\", it.name, it.span);\n             }\n             hir::ItemConst(..) => {"}, {"sha": "84cc24a00109f5eb7dadbd3dc5ddf770fe0b3fcd", "filename": "src/test/compile-fail/lint-non-uppercase-statics.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/0629309a7de803ee9125179306228a981bb52078/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0629309a7de803ee9125179306228a981bb52078/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fcompile-fail%2Flint-non-uppercase-statics.rs?ref=0629309a7de803ee9125179306228a981bb52078", "patch": "@@ -16,4 +16,7 @@ static foo: isize = 1; //~ ERROR static variable `foo` should have an upper case\n static mut bar: isize = 1;\n         //~^ ERROR static variable `bar` should have an upper case name such as `BAR`\n \n+#[no_mangle]\n+pub static extern_foo: isize = 1; // OK, because #[no_mangle] supersedes the warning\n+\n fn main() { }"}]}