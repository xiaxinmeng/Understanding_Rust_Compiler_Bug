{"sha": "4f0508af90cfe4fac018b1a464ed94a828811600", "node_id": "MDY6Q29tbWl0NzI0NzEyOjRmMDUwOGFmOTBjZmU0ZmFjMDE4YjFhNDY0ZWQ5NGE4Mjg4MTE2MDA=", "commit": {"author": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-01-15T05:48:34Z"}, "committer": {"name": "bors", "email": "bors@rust-lang.org", "date": "2017-01-15T05:48:34Z"}, "message": "Auto merge of #39040 - estebank:relevant-impl-multiline, r=nikomatsakis\n\nUse multiline Diagnostic for \"relevant impl\" list\n\nProvide the following output:\n\n```\nerror[E0277]: the trait bound `Bar: Foo<usize>` is not satisfied\n  --> $DIR/issue-21659-show-relevant-trait-impls-2.rs:38:8\n   |\n38 |     f1.foo(1usize);\n   |        ^^^ the trait `Foo<usize>` is not implemented for `Bar`\n   |\n   = help: the following implementations were found:\n             <Bar as Foo<i8>>\n             <Bar as Foo<i16>>\n             <Bar as Foo<i32>>\n             <Bar as Foo<u8>>\n           and 2 others\n\nerror: aborting due to previous error\n```\n\ninstead of\n\n```\nerror[E0277]: the trait bound `Bar: Foo<usize>` is not satisfied\n  --> $DIR/issue-21659-show-relevant-trait-impls-2.rs:38:8\n   |\n38 |     f1.foo(1usize);\n   |        ^^^ the trait `Foo<usize>` is not implemented for `Bar`\n   |\n   = help: the following implementations were found:\n   = help:   <Bar as Foo<i8>>\n   = help:   <Bar as Foo<i16>>\n   = help:   <Bar as Foo<i32>>\n   = help:   <Bar as Foo<u8>>\n   = help: and 2 others\n\nerror: aborting due to previous error\n```", "tree": {"sha": "d795bef67c0d54fe193fca200ca6f593842d51dd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d795bef67c0d54fe193fca200ca6f593842d51dd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/4f0508af90cfe4fac018b1a464ed94a828811600", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/4f0508af90cfe4fac018b1a464ed94a828811600", "html_url": "https://github.com/rust-lang/rust/commit/4f0508af90cfe4fac018b1a464ed94a828811600", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/4f0508af90cfe4fac018b1a464ed94a828811600/comments", "author": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "committer": {"login": "bors", "id": 3372342, "node_id": "MDQ6VXNlcjMzNzIzNDI=", "avatar_url": "https://avatars.githubusercontent.com/u/3372342?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors", "html_url": "https://github.com/bors", "followers_url": "https://api.github.com/users/bors/followers", "following_url": "https://api.github.com/users/bors/following{/other_user}", "gists_url": "https://api.github.com/users/bors/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors/subscriptions", "organizations_url": "https://api.github.com/users/bors/orgs", "repos_url": "https://api.github.com/users/bors/repos", "events_url": "https://api.github.com/users/bors/events{/privacy}", "received_events_url": "https://api.github.com/users/bors/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bf6d7b665b85506dac663945229f00a406904fa5", "url": "https://api.github.com/repos/rust-lang/rust/commits/bf6d7b665b85506dac663945229f00a406904fa5", "html_url": "https://github.com/rust-lang/rust/commit/bf6d7b665b85506dac663945229f00a406904fa5"}, {"sha": "d04c027e9333d632a9ee0dcfbdf0d79dfddf0318", "url": "https://api.github.com/repos/rust-lang/rust/commits/d04c027e9333d632a9ee0dcfbdf0d79dfddf0318", "html_url": "https://github.com/rust-lang/rust/commit/d04c027e9333d632a9ee0dcfbdf0d79dfddf0318"}], "stats": {"total": 53, "additions": 41, "deletions": 12}, "files": [{"sha": "5cc9875e8018b8500ecf5422e9f99f081cf98044", "filename": "src/librustc/traits/error_reporting.rs", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc%2Ftraits%2Ferror_reporting.rs?ref=4f0508af90cfe4fac018b1a464ed94a828811600", "patch": "@@ -366,15 +366,17 @@ impl<'a, 'gcx, 'tcx> InferCtxt<'a, 'gcx, 'tcx> {\n             return;\n         }\n \n-        err.help(&format!(\"the following implementations were found:\"));\n-\n         let end = cmp::min(4, impl_candidates.len());\n-        for candidate in &impl_candidates[0..end] {\n-            err.help(&format!(\"  {:?}\", candidate));\n-        }\n-        if impl_candidates.len() > 4 {\n-            err.help(&format!(\"and {} others\", impl_candidates.len()-4));\n-        }\n+        err.help(&format!(\"the following implementations were found:{}{}\",\n+                          &impl_candidates[0..end].iter().map(|candidate| {\n+                              format!(\"\\n  {:?}\", candidate)\n+                          }).collect::<String>(),\n+                          if impl_candidates.len() > 4 {\n+                              format!(\"\\nand {} others\", impl_candidates.len() - 4)\n+                          } else {\n+                              \"\".to_owned()\n+                          }\n+                          ));\n     }\n \n     /// Reports that an overflow has occurred and halts compilation. We"}, {"sha": "99035209e14bc48aa4482f681a2ddf3d5f27796b", "filename": "src/test/ui/did_you_mean/issue-21659-show-relevant-trait-impls-1.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-1.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-1.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-1.rs?ref=4f0508af90cfe4fac018b1a464ed94a828811600", "previous_filename": "src/test/compile-fail/issue-21659-show-relevant-trait-impls-1.rs"}, {"sha": "9010de081da46b602e3db93efa77d54165c9f1c6", "filename": "src/test/ui/did_you_mean/issue-21659-show-relevant-trait-impls-1.stderr", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-1.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-1.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-1.stderr?ref=4f0508af90cfe4fac018b1a464ed94a828811600", "patch": "@@ -0,0 +1,12 @@\n+error[E0277]: the trait bound `Bar: Foo<usize>` is not satisfied\n+  --> $DIR/issue-21659-show-relevant-trait-impls-1.rs:34:8\n+   |\n+34 |     f1.foo(1usize);\n+   |        ^^^ the trait `Foo<usize>` is not implemented for `Bar`\n+   |\n+   = help: the following implementations were found:\n+             <Bar as Foo<i32>>\n+             <Bar as Foo<u8>>\n+\n+error: aborting due to previous error\n+"}, {"sha": "2009c32c854365a6bb91973f8f101d9d2b97e5e4", "filename": "src/test/ui/did_you_mean/issue-21659-show-relevant-trait-impls-2.rs", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/rust-lang/rust/blob/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-2.rs", "raw_url": "https://github.com/rust-lang/rust/raw/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-2.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-2.rs?ref=4f0508af90cfe4fac018b1a464ed94a828811600", "previous_filename": "src/test/compile-fail/issue-21659-show-relevant-trait-impls-2.rs"}, {"sha": "e9591a64784d5ad6dff8f3a96648d5a7b16194ce", "filename": "src/test/ui/did_you_mean/issue-21659-show-relevant-trait-impls-2.stderr", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-2.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-2.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fdid_you_mean%2Fissue-21659-show-relevant-trait-impls-2.stderr?ref=4f0508af90cfe4fac018b1a464ed94a828811600", "patch": "@@ -0,0 +1,15 @@\n+error[E0277]: the trait bound `Bar: Foo<usize>` is not satisfied\n+  --> $DIR/issue-21659-show-relevant-trait-impls-2.rs:38:8\n+   |\n+38 |     f1.foo(1usize);\n+   |        ^^^ the trait `Foo<usize>` is not implemented for `Bar`\n+   |\n+   = help: the following implementations were found:\n+             <Bar as Foo<i8>>\n+             <Bar as Foo<i16>>\n+             <Bar as Foo<i32>>\n+             <Bar as Foo<u8>>\n+           and 2 others\n+\n+error: aborting due to previous error\n+"}, {"sha": "85c11c05b9f9004c55a54d303433e11de586340b", "filename": "src/test/ui/span/multiline-span-simple.stderr", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fspan%2Fmultiline-span-simple.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/4f0508af90cfe4fac018b1a464ed94a828811600/src%2Ftest%2Fui%2Fspan%2Fmultiline-span-simple.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fspan%2Fmultiline-span-simple.stderr?ref=4f0508af90cfe4fac018b1a464ed94a828811600", "patch": "@@ -10,10 +10,10 @@ error[E0277]: the trait bound `u32: std::ops::Add<()>` is not satisfied\n    | |______________^ ...ending here: the trait `std::ops::Add<()>` is not implemented for `u32`\n    |\n    = help: the following implementations were found:\n-   = help:   <u32 as std::ops::Add>\n-   = help:   <&'a u32 as std::ops::Add<u32>>\n-   = help:   <u32 as std::ops::Add<&'a u32>>\n-   = help:   <&'b u32 as std::ops::Add<&'a u32>>\n+             <u32 as std::ops::Add>\n+             <&'a u32 as std::ops::Add<u32>>\n+             <u32 as std::ops::Add<&'a u32>>\n+             <&'b u32 as std::ops::Add<&'a u32>>\n \n error: aborting due to previous error\n "}]}