{"sha": "97623bf0516f9f852a18017d02af08011bea1da9", "node_id": "MDY6Q29tbWl0NzI0NzEyOjk3NjIzYmYwNTE2ZjlmODUyYTE4MDE3ZDAyYWYwODAxMWJlYTFkYTk=", "commit": {"author": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-05-17T23:49:38Z"}, "committer": {"name": "Noah Lev", "email": "camelidcamel@gmail.com", "date": "2021-07-22T19:52:33Z"}, "message": "Don't hide fields of enum struct variants\n\n* The toggle adds visual clutter\n* It's easy to miss that there are fields\n* Tuple variant fields are always shown, so it is inconsistent to hide\n  struct variant fields\n* It's annoying to have to click the toggle every time", "tree": {"sha": "d7b7dba469416f25d81ede7a4e525a10d4f951e1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d7b7dba469416f25d81ede7a4e525a10d4f951e1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/97623bf0516f9f852a18017d02af08011bea1da9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/97623bf0516f9f852a18017d02af08011bea1da9", "html_url": "https://github.com/rust-lang/rust/commit/97623bf0516f9f852a18017d02af08011bea1da9", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/97623bf0516f9f852a18017d02af08011bea1da9/comments", "author": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "committer": {"login": "camelid", "id": 37223377, "node_id": "MDQ6VXNlcjM3MjIzMzc3", "avatar_url": "https://avatars.githubusercontent.com/u/37223377?v=4", "gravatar_id": "", "url": "https://api.github.com/users/camelid", "html_url": "https://github.com/camelid", "followers_url": "https://api.github.com/users/camelid/followers", "following_url": "https://api.github.com/users/camelid/following{/other_user}", "gists_url": "https://api.github.com/users/camelid/gists{/gist_id}", "starred_url": "https://api.github.com/users/camelid/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/camelid/subscriptions", "organizations_url": "https://api.github.com/users/camelid/orgs", "repos_url": "https://api.github.com/users/camelid/repos", "events_url": "https://api.github.com/users/camelid/events{/privacy}", "received_events_url": "https://api.github.com/users/camelid/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e742158ef5483b9cd756b193402329af3d4ba177", "url": "https://api.github.com/repos/rust-lang/rust/commits/e742158ef5483b9cd756b193402329af3d4ba177", "html_url": "https://github.com/rust-lang/rust/commit/e742158ef5483b9cd756b193402329af3d4ba177"}], "stats": {"total": 13, "additions": 4, "deletions": 9}, "files": [{"sha": "2dfbaff1cc9954448152437f92a79ca44e66f17c", "filename": "src/librustdoc/html/render/print_item.rs", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/97623bf0516f9f852a18017d02af08011bea1da9/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "raw_url": "https://github.com/rust-lang/rust/raw/97623bf0516f9f852a18017d02af08011bea1da9/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Frender%2Fprint_item.rs?ref=97623bf0516f9f852a18017d02af08011bea1da9", "patch": "@@ -1029,14 +1029,12 @@ fn item_enum(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, e: &clean::Enum\n \n             use crate::clean::Variant;\n             if let clean::VariantItem(Variant::Struct(ref s)) = *variant.kind {\n-                let count_fields = s.fields.len();\n-                toggle_open(w, format_args!(\"{} field{}\", count_fields, pluralize(count_fields)));\n                 let variant_id = cx.derive_id(format!(\n                     \"{}.{}.fields\",\n                     ItemType::Variant,\n                     variant.name.as_ref().unwrap()\n                 ));\n-                write!(w, \"<div class=\\\"autohide sub-variant\\\" id=\\\"{id}\\\">\", id = variant_id);\n+                write!(w, \"<div class=\\\"sub-variant\\\" id=\\\"{id}\\\">\", id = variant_id);\n                 write!(\n                     w,\n                     \"<h3>Fields of <b>{name}</b></h3><div>\",\n@@ -1064,7 +1062,6 @@ fn item_enum(w: &mut Buffer, cx: &Context<'_>, it: &clean::Item, e: &clean::Enum\n                     }\n                 }\n                 w.write_str(\"</div></div>\");\n-                toggle_close(w);\n             }\n         }\n     }"}, {"sha": "f86aa06a1aad76b1cc8b06e5795ab59a547d3bc6", "filename": "src/librustdoc/html/static/css/rustdoc.css", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/97623bf0516f9f852a18017d02af08011bea1da9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "raw_url": "https://github.com/rust-lang/rust/raw/97623bf0516f9f852a18017d02af08011bea1da9/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustdoc%2Fhtml%2Fstatic%2Fcss%2Frustdoc.css?ref=97623bf0516f9f852a18017d02af08011bea1da9", "patch": "@@ -1072,7 +1072,7 @@ a.test-arrow:hover{\n \tpadding-top: 1px;\n }\n \n-#main > details > .sub-variant > h3 {\n+#main .sub-variant > h3 {\n \tfont-size: 15px;\n \tmargin-left: 25px;\n \tmargin-bottom: 5px;"}, {"sha": "8d2046591d08ac42244212c68e20a691d754a17c", "filename": "src/test/rustdoc/toggle-item-contents.rs", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/97623bf0516f9f852a18017d02af08011bea1da9/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "raw_url": "https://github.com/rust-lang/rust/raw/97623bf0516f9f852a18017d02af08011bea1da9/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Frustdoc%2Ftoggle-item-contents.rs?ref=97623bf0516f9f852a18017d02af08011bea1da9", "patch": "@@ -62,8 +62,7 @@ pub struct PrivStruct {\n }\n \n // @has 'toggle_item_contents/enum.Enum.html'\n-// @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 1\n-// @has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 'Show 2 fields'\n+// @!has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]'\n pub enum Enum {\n     A, B, C,\n     D {\n@@ -73,8 +72,7 @@ pub enum Enum {\n }\n \n // @has 'toggle_item_contents/enum.EnumStructVariant.html'\n-// @count - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 1\n-// @has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]' 'Show 1 field'\n+// @!has - '//details[@class=\"rustdoc-toggle type-contents-toggle\"]'\n pub enum EnumStructVariant {\n     A, B, C,\n     D {"}]}