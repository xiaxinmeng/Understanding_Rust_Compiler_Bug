{"sha": "86d0e6d257d8546b07417b863ef2f5d62bf7ce19", "node_id": "MDY6Q29tbWl0NzI0NzEyOjg2ZDBlNmQyNTdkODU0NmIwNzQxN2I4NjNlZjJmNWQ2MmJmN2NlMTk=", "commit": {"author": {"name": "Jonas Schievink", "email": "jonasschievink@gmail.com", "date": "2021-02-02T11:15:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-02-02T11:15:01Z"}, "message": "Rollup merge of #81599 - sdroege:fuse-trusted-len, r=m-ou-se\n\nImplement `TrustedLen` for `Fuse<I: TrustedLen>`\n\nThis looks like it was simply forgotten.", "tree": {"sha": "c7af41ae716e1add03df5b0d457fde6c823f1e51", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c7af41ae716e1add03df5b0d457fde6c823f1e51"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/86d0e6d257d8546b07417b863ef2f5d62bf7ce19", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgGTQ1CRBK7hj4Ov3rIwAAdHIIAGw+Wk88aLFL2LI2qnX4bnAV\nZIUz7fF7nrCTTIzxQ8UHHJLW4qKTagHtUHpMQIQ/kPtamDKwI82N1ijp1wOq9xg0\nIuREP1CxT9qnYB2vLmCJ/IULfc4t32gKWmzGEqN4lMpW6lsrt7xANbeAwBk5y8U7\nNX+auCqRZ7fRDL56vTlppziP/XJwLdYLLUl2mPWcB1a/FOiB5FUSw3aVcUmTObG8\nVxG9YHxacdZyUJcw4qe3SZxD3IkCKDR38v0oVyynjPNcYyJ7edNoS9zfMWWXNzXu\nAEA7RLBSSGIsi8zCpAeyzt0UI9ATIhPxtKk7FJKJPtMAqKP24n1q4UnKBqSu9CA=\n=/Y3S\n-----END PGP SIGNATURE-----\n", "payload": "tree c7af41ae716e1add03df5b0d457fde6c823f1e51\nparent efec2bbbce3c547559fed6a6398703f7041649c4\nparent 12b605af88e8935b7417234861ef8fa8e6131fd5\nauthor Jonas Schievink <jonasschievink@gmail.com> 1612264501 +0100\ncommitter GitHub <noreply@github.com> 1612264501 +0100\n\nRollup merge of #81599 - sdroege:fuse-trusted-len, r=m-ou-se\n\nImplement `TrustedLen` for `Fuse<I: TrustedLen>`\n\nThis looks like it was simply forgotten.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/86d0e6d257d8546b07417b863ef2f5d62bf7ce19", "html_url": "https://github.com/rust-lang/rust/commit/86d0e6d257d8546b07417b863ef2f5d62bf7ce19", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/86d0e6d257d8546b07417b863ef2f5d62bf7ce19/comments", "author": {"login": "jonas-schievink", "id": 1786438, "node_id": "MDQ6VXNlcjE3ODY0Mzg=", "avatar_url": "https://avatars.githubusercontent.com/u/1786438?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jonas-schievink", "html_url": "https://github.com/jonas-schievink", "followers_url": "https://api.github.com/users/jonas-schievink/followers", "following_url": "https://api.github.com/users/jonas-schievink/following{/other_user}", "gists_url": "https://api.github.com/users/jonas-schievink/gists{/gist_id}", "starred_url": "https://api.github.com/users/jonas-schievink/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jonas-schievink/subscriptions", "organizations_url": "https://api.github.com/users/jonas-schievink/orgs", "repos_url": "https://api.github.com/users/jonas-schievink/repos", "events_url": "https://api.github.com/users/jonas-schievink/events{/privacy}", "received_events_url": "https://api.github.com/users/jonas-schievink/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "efec2bbbce3c547559fed6a6398703f7041649c4", "url": "https://api.github.com/repos/rust-lang/rust/commits/efec2bbbce3c547559fed6a6398703f7041649c4", "html_url": "https://github.com/rust-lang/rust/commit/efec2bbbce3c547559fed6a6398703f7041649c4"}, {"sha": "12b605af88e8935b7417234861ef8fa8e6131fd5", "url": "https://api.github.com/repos/rust-lang/rust/commits/12b605af88e8935b7417234861ef8fa8e6131fd5", "html_url": "https://github.com/rust-lang/rust/commit/12b605af88e8935b7417234861ef8fa8e6131fd5"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "7a852c2cb9da55dc9d8bbb5c85c4987a22ae64a3", "filename": "library/core/src/iter/adapters/fuse.rs", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/86d0e6d257d8546b07417b863ef2f5d62bf7ce19/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Ffuse.rs", "raw_url": "https://github.com/rust-lang/rust/raw/86d0e6d257d8546b07417b863ef2f5d62bf7ce19/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Ffuse.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Fiter%2Fadapters%2Ffuse.rs?ref=86d0e6d257d8546b07417b863ef2f5d62bf7ce19", "patch": "@@ -1,6 +1,8 @@\n use crate::intrinsics;\n use crate::iter::adapters::{zip::try_get_unchecked, InPlaceIterable, SourceIter};\n-use crate::iter::{DoubleEndedIterator, ExactSizeIterator, FusedIterator, TrustedRandomAccess};\n+use crate::iter::{\n+    DoubleEndedIterator, ExactSizeIterator, FusedIterator, TrustedLen, TrustedRandomAccess,\n+};\n use crate::ops::Try;\n \n /// An iterator that yields `None` forever after the underlying iterator\n@@ -182,8 +184,19 @@ where\n     }\n }\n \n+#[unstable(feature = \"trusted_len\", issue = \"37572\")]\n+// SAFETY: `TrustedLen` requires that an accurate length is reported via `size_hint()`. As `Fuse`\n+// is just forwarding this to the wrapped iterator `I` this property is preserved and it is safe to\n+// implement `TrustedLen` here.\n+unsafe impl<I> TrustedLen for Fuse<I> where I: TrustedLen {}\n+\n #[doc(hidden)]\n #[unstable(feature = \"trusted_random_access\", issue = \"none\")]\n+// SAFETY: `TrustedRandomAccess` requires that `size_hint()` must be exact and cheap to call, and\n+// `Iterator::__iterator_get_unchecked()` must be implemented accordingly.\n+//\n+// This is safe to implement as `Fuse` is just forwarding these to the wrapped iterator `I`, which\n+// preserves these properties.\n unsafe impl<I> TrustedRandomAccess for Fuse<I>\n where\n     I: TrustedRandomAccess,"}]}