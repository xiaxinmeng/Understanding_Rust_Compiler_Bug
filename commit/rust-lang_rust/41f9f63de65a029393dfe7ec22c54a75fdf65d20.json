{"sha": "41f9f63de65a029393dfe7ec22c54a75fdf65d20", "node_id": "C_kwDOAAsO6NoAKDQxZjlmNjNkZTY1YTAyOTM5M2RmZTdlYzIyYzU0YTc1ZmRmNjVkMjA", "commit": {"author": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2023-06-07T12:16:28Z"}, "committer": {"name": "Jakub Ber\u00e1nek", "email": "berykubik@gmail.com", "date": "2023-06-07T12:16:28Z"}, "message": "Use ``--keep-stage` also for the final build", "tree": {"sha": "e35e7b9bd8f6ba9a3f46445c5dd79dc65eb647f2", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e35e7b9bd8f6ba9a3f46445c5dd79dc65eb647f2"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/41f9f63de65a029393dfe7ec22c54a75fdf65d20", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEEzFQynJm4WzBnfhz8kJzQ0mSDUWsFAmSAdSMACgkQkJzQ0mSD\nUWulxAv8Ds4mTGzi9r4lkIXLUiJm5wFq+Y4EVB+kcWgtHe1+bFB5Qs8td9k7M0yr\nlyCG/5/96Uo+oDzX/+vkc55AIyQFssuAt/MVzA5jGVFxuzSyhiExlUKM0XSybxfj\nZW/qvB6kHrNKOfyUKliHmt9o7GiTE/hicKKJCdzw+naToaJXlHDuviC1L5H0t8Hl\nUsxez9gUW6dXYOKQcRfsLdmA2A4M/lN3sH4tU1rfiJv644xNl0BvMJ70GJbF6qta\nup7Z/i8PVOa79lcOruRM5tVJqMYwhJ13aEoXllPzgbMP+vY2+PIpWvpO/PwN2vDD\nOqB6lz6u40kGSXclHTg7pRaF2r77ta/bzwwvOSBHtKX8NuUmJRYHLHz+zvNppD18\nSe4iNfGakaDtPDs0wimtTlnH+NXoQw1wYUITKkTeIXcpXZqGrGRzkZXt+4RwIcFF\nL+HGux0JCJ9vZuRnuLrctRrIX45aUmNwN0SJ3dyTAt6DliMQ4Dzdfu4Oy4/Ju+t8\nBzfB+C/k\n=tpVg\n-----END PGP SIGNATURE-----", "payload": "tree e35e7b9bd8f6ba9a3f46445c5dd79dc65eb647f2\nparent 14ed9fa01c48ba6b97e919193c95d6445078be6f\nauthor Jakub Ber\u00e1nek <berykubik@gmail.com> 1686140188 +0200\ncommitter Jakub Ber\u00e1nek <berykubik@gmail.com> 1686140188 +0200\n\nUse ``--keep-stage` also for the final build\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/41f9f63de65a029393dfe7ec22c54a75fdf65d20", "html_url": "https://github.com/rust-lang/rust/commit/41f9f63de65a029393dfe7ec22c54a75fdf65d20", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/41f9f63de65a029393dfe7ec22c54a75fdf65d20/comments", "author": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Kobzol", "id": 4539057, "node_id": "MDQ6VXNlcjQ1MzkwNTc=", "avatar_url": "https://avatars.githubusercontent.com/u/4539057?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Kobzol", "html_url": "https://github.com/Kobzol", "followers_url": "https://api.github.com/users/Kobzol/followers", "following_url": "https://api.github.com/users/Kobzol/following{/other_user}", "gists_url": "https://api.github.com/users/Kobzol/gists{/gist_id}", "starred_url": "https://api.github.com/users/Kobzol/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Kobzol/subscriptions", "organizations_url": "https://api.github.com/users/Kobzol/orgs", "repos_url": "https://api.github.com/users/Kobzol/repos", "events_url": "https://api.github.com/users/Kobzol/events{/privacy}", "received_events_url": "https://api.github.com/users/Kobzol/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14ed9fa01c48ba6b97e919193c95d6445078be6f", "url": "https://api.github.com/repos/rust-lang/rust/commits/14ed9fa01c48ba6b97e919193c95d6445078be6f", "html_url": "https://github.com/rust-lang/rust/commit/14ed9fa01c48ba6b97e919193c95d6445078be6f"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "febc0492b9433064c944a48bc2ac0716273c5600", "filename": "src/ci/stage-build.py", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/41f9f63de65a029393dfe7ec22c54a75fdf65d20/src%2Fci%2Fstage-build.py", "raw_url": "https://github.com/rust-lang/rust/raw/41f9f63de65a029393dfe7ec22c54a75fdf65d20/src%2Fci%2Fstage-build.py", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fci%2Fstage-build.py?ref=41f9f63de65a029393dfe7ec22c54a75fdf65d20", "patch": "@@ -973,6 +973,12 @@ def execute_build_pipeline(timer: Timer, pipeline: Pipeline, runner: BenchmarkRu\n             ]\n             print_free_disk_space(pipeline)\n \n+    # We want to keep the already built PGO-optimized `rustc`.\n+    dist_build_args += [\n+        \"--keep-stage\", \"0\",\n+        \"--keep-stage\", \"1\"\n+    ]\n+\n     \"\"\"\n     Final stage: Build PGO optimized rustc + PGO/BOLT optimized LLVM\n     \"\"\""}]}