{"sha": "8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhiNzgyNmZmYjliN2ZhZDYxNTkxNDIxZjU4YzFkZGMzYTJiZGFmNmU=", "commit": {"author": {"name": "Marco Castelluccio", "email": "mcastelluccio@mozilla.com", "date": "2017-06-04T18:53:42Z"}, "committer": {"name": "Marco Castelluccio", "email": "mcastelluccio@mozilla.com", "date": "2017-06-04T18:53:42Z"}, "message": "Use the three-element variant of the 'llvm.gcov' metadata", "tree": {"sha": "2aa30da2091c87f50c0491bf19523c8cc1e98ea1", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/2aa30da2091c87f50c0491bf19523c8cc1e98ea1"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e", "html_url": "https://github.com/rust-lang/rust/commit/8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e/comments", "author": {"login": "marco-c", "id": 1616846, "node_id": "MDQ6VXNlcjE2MTY4NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1616846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marco-c", "html_url": "https://github.com/marco-c", "followers_url": "https://api.github.com/users/marco-c/followers", "following_url": "https://api.github.com/users/marco-c/following{/other_user}", "gists_url": "https://api.github.com/users/marco-c/gists{/gist_id}", "starred_url": "https://api.github.com/users/marco-c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marco-c/subscriptions", "organizations_url": "https://api.github.com/users/marco-c/orgs", "repos_url": "https://api.github.com/users/marco-c/repos", "events_url": "https://api.github.com/users/marco-c/events{/privacy}", "received_events_url": "https://api.github.com/users/marco-c/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marco-c", "id": 1616846, "node_id": "MDQ6VXNlcjE2MTY4NDY=", "avatar_url": "https://avatars.githubusercontent.com/u/1616846?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marco-c", "html_url": "https://github.com/marco-c", "followers_url": "https://api.github.com/users/marco-c/followers", "following_url": "https://api.github.com/users/marco-c/following{/other_user}", "gists_url": "https://api.github.com/users/marco-c/gists{/gist_id}", "starred_url": "https://api.github.com/users/marco-c/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marco-c/subscriptions", "organizations_url": "https://api.github.com/users/marco-c/orgs", "repos_url": "https://api.github.com/users/marco-c/repos", "events_url": "https://api.github.com/users/marco-c/events{/privacy}", "received_events_url": "https://api.github.com/users/marco-c/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0b0a5ac032d121f89bae2e9906d70be771e39887", "url": "https://api.github.com/repos/rust-lang/rust/commits/0b0a5ac032d121f89bae2e9906d70be771e39887", "html_url": "https://github.com/rust-lang/rust/commit/0b0a5ac032d121f89bae2e9906d70be771e39887"}], "stats": {"total": 8, "additions": 2, "deletions": 6}, "files": [{"sha": "95ceec610eaa37894e49b62ccfe4a4fa9810714b", "filename": "src/librustc_trans/debuginfo/metadata.rs", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e/src%2Flibrustc_trans%2Fdebuginfo%2Fmetadata.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e/src%2Flibrustc_trans%2Fdebuginfo%2Fmetadata.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_trans%2Fdebuginfo%2Fmetadata.rs?ref=8b7826ffb9b7fad61591421f58c1ddc3a2bdaf6e", "patch": "@@ -811,14 +811,10 @@ pub fn compile_unit_metadata(scc: &SharedCrateContext,\n                                                                  unit_metadata);\n \n             let gcov_cu_info = [\n-                // Ideally we would be using the three-element form of !llvm.gcov metadata,\n-                // which allows us to specify gcno/gcda files explicitly, but that's only\n-                // available in LLVM 3.9+; so we rely on LLVM chopping off the extension\n-                // and replacing it with gcno/gcda, instead.\n                 path_to_mdstring(debug_context.llcontext,\n                                  &scc.output_filenames().with_extension(\"gcno\")),\n-                // path_to_mdstring(debug_context.llcontext,\n-                //                  &scc.output_filenames().with_extension(\"gcda\")),\n+                path_to_mdstring(debug_context.llcontext,\n+                                 &scc.output_filenames().with_extension(\"gcda\")),\n                 cu_desc_metadata,\n             ];\n             let gcov_metadata = llvm::LLVMMDNodeInContext(debug_context.llcontext,"}]}