{"sha": "5a65d4d9fb84c324e8364f4d89adae258d5a1789", "node_id": "MDY6Q29tbWl0NzI0NzEyOjVhNjVkNGQ5ZmI4NGMzMjRlODM2NGY0ZDg5YWRhZTI1OGQ1YTE3ODk=", "commit": {"author": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2019-09-20T15:43:34Z"}, "committer": {"name": "kjeremy", "email": "kjeremy@gmail.com", "date": "2019-09-20T15:43:34Z"}, "message": "Add indexing to record_field_pat", "tree": {"sha": "d10e02070a937bf05ddfefa5a813587e3e1be1bd", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/d10e02070a937bf05ddfefa5a813587e3e1be1bd"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5a65d4d9fb84c324e8364f4d89adae258d5a1789", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5a65d4d9fb84c324e8364f4d89adae258d5a1789", "html_url": "https://github.com/rust-lang/rust/commit/5a65d4d9fb84c324e8364f4d89adae258d5a1789", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5a65d4d9fb84c324e8364f4d89adae258d5a1789/comments", "author": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "committer": {"login": "kjeremy", "id": 4325700, "node_id": "MDQ6VXNlcjQzMjU3MDA=", "avatar_url": "https://avatars.githubusercontent.com/u/4325700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/kjeremy", "html_url": "https://github.com/kjeremy", "followers_url": "https://api.github.com/users/kjeremy/followers", "following_url": "https://api.github.com/users/kjeremy/following{/other_user}", "gists_url": "https://api.github.com/users/kjeremy/gists{/gist_id}", "starred_url": "https://api.github.com/users/kjeremy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/kjeremy/subscriptions", "organizations_url": "https://api.github.com/users/kjeremy/orgs", "repos_url": "https://api.github.com/users/kjeremy/repos", "events_url": "https://api.github.com/users/kjeremy/events{/privacy}", "received_events_url": "https://api.github.com/users/kjeremy/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c73399365867178523885d0c997844d0d2d33325", "url": "https://api.github.com/repos/rust-lang/rust/commits/c73399365867178523885d0c997844d0d2d33325", "html_url": "https://github.com/rust-lang/rust/commit/c73399365867178523885d0c997844d0d2d33325"}], "stats": {"total": 94, "additions": 92, "deletions": 2}, "files": [{"sha": "cf722eef48bbd8488dc55f1e92168b69d29faadf", "filename": "crates/ra_parser/src/grammar/patterns.rs", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/rust-lang/rust/blob/5a65d4d9fb84c324e8364f4d89adae258d5a1789/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a65d4d9fb84c324e8364f4d89adae258d5a1789/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_parser%2Fsrc%2Fgrammar%2Fpatterns.rs?ref=5a65d4d9fb84c324e8364f4d89adae258d5a1789", "patch": "@@ -168,6 +168,7 @@ fn record_field_pat_list(p: &mut Parser) {\n             T![.] if p.at(T![..]) => p.bump(T![..]),\n \n             IDENT if p.nth(1) == T![:] => record_field_pat(p),\n+            INT_NUMBER if p.nth(1) == T![:] => record_field_pat(p),\n             T!['{'] => error_block(p, \"expected ident\"),\n             T![box] => {\n                 box_pat(p);\n@@ -184,12 +185,22 @@ fn record_field_pat_list(p: &mut Parser) {\n     m.complete(p, RECORD_FIELD_PAT_LIST);\n }\n \n+// test record_field_pat\n+// fn foo() {\n+//     let S { 0: 1 } = ();\n+//     let S { x: 1 } = ();\n+// }\n fn record_field_pat(p: &mut Parser) {\n-    assert!(p.at(IDENT));\n+    assert!(p.at(IDENT) || p.at(INT_NUMBER));\n     assert!(p.nth(1) == T![:]);\n \n     let m = p.start();\n-    name(p);\n+\n+    match p.current() {\n+        IDENT => name(p),\n+        _ => p.bump_any(),\n+    }\n+\n     p.bump_any();\n     pattern(p);\n     m.complete(p, RECORD_FIELD_PAT);"}, {"sha": "26b1d5f895202062e05f3a8dd06980d1291081e6", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0145_record_field_pat.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5a65d4d9fb84c324e8364f4d89adae258d5a1789/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5a65d4d9fb84c324e8364f4d89adae258d5a1789/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.rs?ref=5a65d4d9fb84c324e8364f4d89adae258d5a1789", "patch": "@@ -0,0 +1,4 @@\n+fn foo() {\n+    let S { 0: 1 } = ();\n+    let S { x: 1 } = ();\n+}"}, {"sha": "06fbdfabf19caf882c2733cbcabbce9b3c915105", "filename": "crates/ra_syntax/test_data/parser/inline/ok/0145_record_field_pat.txt", "status": "added", "additions": 75, "deletions": 0, "changes": 75, "blob_url": "https://github.com/rust-lang/rust/blob/5a65d4d9fb84c324e8364f4d89adae258d5a1789/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.txt", "raw_url": "https://github.com/rust-lang/rust/raw/5a65d4d9fb84c324e8364f4d89adae258d5a1789/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.txt", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/crates%2Fra_syntax%2Ftest_data%2Fparser%2Finline%2Fok%2F0145_record_field_pat.txt?ref=5a65d4d9fb84c324e8364f4d89adae258d5a1789", "patch": "@@ -0,0 +1,75 @@\n+SOURCE_FILE@[0; 63)\n+  FN_DEF@[0; 62)\n+    FN_KW@[0; 2) \"fn\"\n+    WHITESPACE@[2; 3) \" \"\n+    NAME@[3; 6)\n+      IDENT@[3; 6) \"foo\"\n+    PARAM_LIST@[6; 8)\n+      L_PAREN@[6; 7) \"(\"\n+      R_PAREN@[7; 8) \")\"\n+    WHITESPACE@[8; 9) \" \"\n+    BLOCK_EXPR@[9; 62)\n+      BLOCK@[9; 62)\n+        L_CURLY@[9; 10) \"{\"\n+        WHITESPACE@[10; 15) \"\\n    \"\n+        LET_STMT@[15; 35)\n+          LET_KW@[15; 18) \"let\"\n+          WHITESPACE@[18; 19) \" \"\n+          RECORD_PAT@[19; 29)\n+            PATH@[19; 20)\n+              PATH_SEGMENT@[19; 20)\n+                NAME_REF@[19; 20)\n+                  IDENT@[19; 20) \"S\"\n+            WHITESPACE@[20; 21) \" \"\n+            RECORD_FIELD_PAT_LIST@[21; 29)\n+              L_CURLY@[21; 22) \"{\"\n+              WHITESPACE@[22; 23) \" \"\n+              RECORD_FIELD_PAT@[23; 27)\n+                INT_NUMBER@[23; 24) \"0\"\n+                COLON@[24; 25) \":\"\n+                WHITESPACE@[25; 26) \" \"\n+                LITERAL_PAT@[26; 27)\n+                  LITERAL@[26; 27)\n+                    INT_NUMBER@[26; 27) \"1\"\n+              WHITESPACE@[27; 28) \" \"\n+              R_CURLY@[28; 29) \"}\"\n+          WHITESPACE@[29; 30) \" \"\n+          EQ@[30; 31) \"=\"\n+          WHITESPACE@[31; 32) \" \"\n+          TUPLE_EXPR@[32; 34)\n+            L_PAREN@[32; 33) \"(\"\n+            R_PAREN@[33; 34) \")\"\n+          SEMI@[34; 35) \";\"\n+        WHITESPACE@[35; 40) \"\\n    \"\n+        LET_STMT@[40; 60)\n+          LET_KW@[40; 43) \"let\"\n+          WHITESPACE@[43; 44) \" \"\n+          RECORD_PAT@[44; 54)\n+            PATH@[44; 45)\n+              PATH_SEGMENT@[44; 45)\n+                NAME_REF@[44; 45)\n+                  IDENT@[44; 45) \"S\"\n+            WHITESPACE@[45; 46) \" \"\n+            RECORD_FIELD_PAT_LIST@[46; 54)\n+              L_CURLY@[46; 47) \"{\"\n+              WHITESPACE@[47; 48) \" \"\n+              RECORD_FIELD_PAT@[48; 52)\n+                NAME@[48; 49)\n+                  IDENT@[48; 49) \"x\"\n+                COLON@[49; 50) \":\"\n+                WHITESPACE@[50; 51) \" \"\n+                LITERAL_PAT@[51; 52)\n+                  LITERAL@[51; 52)\n+                    INT_NUMBER@[51; 52) \"1\"\n+              WHITESPACE@[52; 53) \" \"\n+              R_CURLY@[53; 54) \"}\"\n+          WHITESPACE@[54; 55) \" \"\n+          EQ@[55; 56) \"=\"\n+          WHITESPACE@[56; 57) \" \"\n+          TUPLE_EXPR@[57; 59)\n+            L_PAREN@[57; 58) \"(\"\n+            R_PAREN@[58; 59) \")\"\n+          SEMI@[59; 60) \";\"\n+        WHITESPACE@[60; 61) \"\\n\"\n+        R_CURLY@[61; 62) \"}\"\n+  WHITESPACE@[62; 63) \"\\n\""}]}