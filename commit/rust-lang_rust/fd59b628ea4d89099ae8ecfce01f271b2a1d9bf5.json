{"sha": "fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5", "node_id": "C_kwDOAAsO6NoAKGZkNTliNjI4ZWE0ZDg5MDk5YWU4ZWNmY2UwMWYyNzFiMmExZDliZjU", "commit": {"author": {"name": "James Higgins", "email": "james.isaac.higgins@gmail.com", "date": "2022-04-12T16:54:36Z"}, "committer": {"name": "David Tolnay", "email": "dtolnay@gmail.com", "date": "2023-01-02T18:20:59Z"}, "message": "Add PhantomData marker to Context to make Context !Send and !Sync", "tree": {"sha": "43eec436f214ab049d14cf73c58e348b2e67bae8", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/43eec436f214ab049d14cf73c58e348b2e67bae8"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEERijF2Cz/ZdaBZKeK+boUO5X/bYIFAmOzIIsACgkQ+boUO5X/\nbYLqOA/+J2WDMRnqPazHtx1OYPTTwuAheWSSD6frQTznBOE08g9ifFtCygS1mfVN\neRZ9pfzhAKrY+KRLGgFs1bH09Gqg/6K1Tw5A8ROFZYA2EMMX8WCFcYeMrB87wuwA\ni549DdZY7ZmemwDaReMnXerIsKnKAANUrHZdMRM+FJ2VrmF2esKInTkLlB9Uxn+3\nojy8j2lbpjdv0rFUEokJ5A7trgBflzK9H5hl7lbHFFng0JiX8Yhtdh81CIdo3R4d\nEKX6ULxhZFGxti7PIcYCi4vtgDDWQFqCnE7QA678ATHdBfa1tzrIlS0JjTXqopLa\neT6KcH/rFIOOaEZ/QGyJ35s57Eq5+vqHkGR4eUB+bxDzVleuBIitH5XQ93jFveJd\nMjLF0SWjKv/fJGRN2dLNcJrG2kwG/veOQTXClodSjw11OEqb+77I6zuymZ+gthSi\nmw7tD3Pl6W5EdoOMelGzZ5W1AfomsdPtKNvicquIr+52zkXtRezDbdu0FBM4yNIF\ngylBqe+Gmm7GbuIrKj2WlDlNJY+3tyOmh2MB55xampvsU19u8VjL0X467SkBnY29\nqdNp51L5LaYMX87DahZYAvomCTPqSFAswZq/RQ7FnS9zwQ9swFWFr875x6u5Qa/8\nCP1k7EbjRDFbvY8Hq4Ryhz0+t+F5QahUe25jD6dAgGJuY2MqW2I=\n=ce0g\n-----END PGP SIGNATURE-----", "payload": "tree 43eec436f214ab049d14cf73c58e348b2e67bae8\nparent fb9dfa8ceffb985105be3176d7ed2f99515ea377\nauthor James Higgins <james.isaac.higgins@gmail.com> 1649782476 -0300\ncommitter David Tolnay <dtolnay@gmail.com> 1672683659 -0800\n\nAdd PhantomData marker to Context to make Context !Send and !Sync\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5", "html_url": "https://github.com/rust-lang/rust/commit/fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5/comments", "author": {"login": "jihiggins", "id": 9329131, "node_id": "MDQ6VXNlcjkzMjkxMzE=", "avatar_url": "https://avatars.githubusercontent.com/u/9329131?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jihiggins", "html_url": "https://github.com/jihiggins", "followers_url": "https://api.github.com/users/jihiggins/followers", "following_url": "https://api.github.com/users/jihiggins/following{/other_user}", "gists_url": "https://api.github.com/users/jihiggins/gists{/gist_id}", "starred_url": "https://api.github.com/users/jihiggins/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jihiggins/subscriptions", "organizations_url": "https://api.github.com/users/jihiggins/orgs", "repos_url": "https://api.github.com/users/jihiggins/repos", "events_url": "https://api.github.com/users/jihiggins/events{/privacy}", "received_events_url": "https://api.github.com/users/jihiggins/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dtolnay", "id": 1940490, "node_id": "MDQ6VXNlcjE5NDA0OTA=", "avatar_url": "https://avatars.githubusercontent.com/u/1940490?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dtolnay", "html_url": "https://github.com/dtolnay", "followers_url": "https://api.github.com/users/dtolnay/followers", "following_url": "https://api.github.com/users/dtolnay/following{/other_user}", "gists_url": "https://api.github.com/users/dtolnay/gists{/gist_id}", "starred_url": "https://api.github.com/users/dtolnay/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dtolnay/subscriptions", "organizations_url": "https://api.github.com/users/dtolnay/orgs", "repos_url": "https://api.github.com/users/dtolnay/repos", "events_url": "https://api.github.com/users/dtolnay/events{/privacy}", "received_events_url": "https://api.github.com/users/dtolnay/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fb9dfa8ceffb985105be3176d7ed2f99515ea377", "url": "https://api.github.com/repos/rust-lang/rust/commits/fb9dfa8ceffb985105be3176d7ed2f99515ea377", "html_url": "https://github.com/rust-lang/rust/commit/fb9dfa8ceffb985105be3176d7ed2f99515ea377"}], "stats": {"total": 5, "additions": 4, "deletions": 1}, "files": [{"sha": "a4425fd234a4e22ad79ee3dfd4418464d80723ae", "filename": "library/core/src/task/wake.rs", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5/library%2Fcore%2Fsrc%2Ftask%2Fwake.rs", "raw_url": "https://github.com/rust-lang/rust/raw/fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5/library%2Fcore%2Fsrc%2Ftask%2Fwake.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Ftask%2Fwake.rs?ref=fd59b628ea4d89099ae8ecfce01f271b2a1d9bf5", "patch": "@@ -181,6 +181,9 @@ pub struct Context<'a> {\n     // are contravariant while return-position lifetimes are\n     // covariant).\n     _marker: PhantomData<fn(&'a ()) -> &'a ()>,\n+    // Ensure `Context` is `!Send` and `!Sync` in order to allow\n+    // for future `!Send` and / or `!Sync` fields.\n+    _marker2: PhantomData<*mut ()>,\n }\n \n impl<'a> Context<'a> {\n@@ -190,7 +193,7 @@ impl<'a> Context<'a> {\n     #[must_use]\n     #[inline]\n     pub const fn from_waker(waker: &'a Waker) -> Self {\n-        Context { waker, _marker: PhantomData }\n+        Context { waker, _marker: PhantomData, _marker2: PhantomData }\n     }\n \n     /// Returns a reference to the [`Waker`] for the current task."}]}