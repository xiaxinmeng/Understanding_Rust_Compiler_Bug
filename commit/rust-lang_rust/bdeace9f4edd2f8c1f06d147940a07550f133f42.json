{"sha": "bdeace9f4edd2f8c1f06d147940a07550f133f42", "node_id": "MDY6Q29tbWl0NzI0NzEyOmJkZWFjZTlmNGVkZDJmOGMxZjA2ZDE0Nzk0MGEwNzU1MGYxMzNmNDI=", "commit": {"author": {"name": "Mara Bos", "email": "m-ou.se@m-ou.se", "date": "2020-11-08T12:35:58Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2020-11-08T12:35:58Z"}, "message": "Rollup merge of #76227 - CDirkx:const-poll, r=KodrAus\n\nStabilize `Poll::is_ready` and `is_pending` as const\n\nInsta-stabilize the methods `is_ready` and `is_pending` of `std::task::Poll` as const, in the same way as [PR#76198](https://github.com/rust-lang/rust/pull/76198).\n\nPossible because of the recent stabilization of const control flow.\n\nPart of #76225.", "tree": {"sha": "c44f8dff555b2fbff3d34131312685bcb74a1b6f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/c44f8dff555b2fbff3d34131312685bcb74a1b6f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/bdeace9f4edd2f8c1f06d147940a07550f133f42", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJfp+YvCRBK7hj4Ov3rIwAAdHIIAJKlnDrGlQeTIbqNNm/iNWlx\nloqmApVl/qERnotBZ4QGdYYVirVh4RinoJiL0qEBX9qXZ4kgwzO+zVVLhnT+RBQI\nwFCV9jsKnBRcfvyP5V8y0oQRRLR5eHFICX2uR10x4vEDHTttQ3ls00zL0sUb7DAs\nLmrKhqHJdUjJn0fAGTgt+YIdJWgtXQ5WLWQN2TMTv017mGCnmUslptDxMeCIM6Mn\n4jkLgpx4pu8KuccdH8XEuRE6pyKbrVbvhf8KQpN636IijG1M8PzCfx1LAaDJ8ApI\nGlO5JBk8pJt/XN2duBxFO9ezcaueomov1dNvX3BHfubthwAyFwkobEbj5ThdIvA=\n=BA9o\n-----END PGP SIGNATURE-----\n", "payload": "tree c44f8dff555b2fbff3d34131312685bcb74a1b6f\nparent 1f034f77bc7cd5814cb341a1028f8955dc4262a5\nparent 5e80c65102f85700e1a449847dfa603e589df950\nauthor Mara Bos <m-ou.se@m-ou.se> 1604838958 +0100\ncommitter GitHub <noreply@github.com> 1604838958 +0100\n\nRollup merge of #76227 - CDirkx:const-poll, r=KodrAus\n\nStabilize `Poll::is_ready` and `is_pending` as const\n\nInsta-stabilize the methods `is_ready` and `is_pending` of `std::task::Poll` as const, in the same way as [PR#76198](https://github.com/rust-lang/rust/pull/76198).\n\nPossible because of the recent stabilization of const control flow.\n\nPart of #76225.\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/bdeace9f4edd2f8c1f06d147940a07550f133f42", "html_url": "https://github.com/rust-lang/rust/commit/bdeace9f4edd2f8c1f06d147940a07550f133f42", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/bdeace9f4edd2f8c1f06d147940a07550f133f42/comments", "author": {"login": "m-ou-se", "id": 783247, "node_id": "MDQ6VXNlcjc4MzI0Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/783247?v=4", "gravatar_id": "", "url": "https://api.github.com/users/m-ou-se", "html_url": "https://github.com/m-ou-se", "followers_url": "https://api.github.com/users/m-ou-se/followers", "following_url": "https://api.github.com/users/m-ou-se/following{/other_user}", "gists_url": "https://api.github.com/users/m-ou-se/gists{/gist_id}", "starred_url": "https://api.github.com/users/m-ou-se/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/m-ou-se/subscriptions", "organizations_url": "https://api.github.com/users/m-ou-se/orgs", "repos_url": "https://api.github.com/users/m-ou-se/repos", "events_url": "https://api.github.com/users/m-ou-se/events{/privacy}", "received_events_url": "https://api.github.com/users/m-ou-se/received_events", "type": "User", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1f034f77bc7cd5814cb341a1028f8955dc4262a5", "url": "https://api.github.com/repos/rust-lang/rust/commits/1f034f77bc7cd5814cb341a1028f8955dc4262a5", "html_url": "https://github.com/rust-lang/rust/commit/1f034f77bc7cd5814cb341a1028f8955dc4262a5"}, {"sha": "5e80c65102f85700e1a449847dfa603e589df950", "url": "https://api.github.com/repos/rust-lang/rust/commits/5e80c65102f85700e1a449847dfa603e589df950", "html_url": "https://github.com/rust-lang/rust/commit/5e80c65102f85700e1a449847dfa603e589df950"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "6851f3fcd2fc753710b1225a7d4af4c3b89d53fe", "filename": "library/core/src/task/poll.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/bdeace9f4edd2f8c1f06d147940a07550f133f42/library%2Fcore%2Fsrc%2Ftask%2Fpoll.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bdeace9f4edd2f8c1f06d147940a07550f133f42/library%2Fcore%2Fsrc%2Ftask%2Fpoll.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Fsrc%2Ftask%2Fpoll.rs?ref=bdeace9f4edd2f8c1f06d147940a07550f133f42", "patch": "@@ -39,15 +39,17 @@ impl<T> Poll<T> {\n \n     /// Returns `true` if this is `Poll::Ready`\n     #[inline]\n+    #[rustc_const_stable(feature = \"const_poll\", since = \"1.49.0\")]\n     #[stable(feature = \"futures_api\", since = \"1.36.0\")]\n-    pub fn is_ready(&self) -> bool {\n+    pub const fn is_ready(&self) -> bool {\n         matches!(*self, Poll::Ready(_))\n     }\n \n     /// Returns `true` if this is `Poll::Pending`\n     #[inline]\n+    #[rustc_const_stable(feature = \"const_poll\", since = \"1.49.0\")]\n     #[stable(feature = \"futures_api\", since = \"1.36.0\")]\n-    pub fn is_pending(&self) -> bool {\n+    pub const fn is_pending(&self) -> bool {\n         !self.is_ready()\n     }\n }"}, {"sha": "4d1080ccef0506f6b14cb2d205ab40f4733f7faa", "filename": "library/core/tests/lib.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/bdeace9f4edd2f8c1f06d147940a07550f133f42/library%2Fcore%2Ftests%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bdeace9f4edd2f8c1f06d147940a07550f133f42/library%2Fcore%2Ftests%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Flib.rs?ref=bdeace9f4edd2f8c1f06d147940a07550f133f42", "patch": "@@ -91,5 +91,6 @@ mod result;\n mod slice;\n mod str;\n mod str_lossy;\n+mod task;\n mod time;\n mod tuple;"}, {"sha": "d71fef9e5c87db5996bd6aafc4ec90bec4c788df", "filename": "library/core/tests/task.rs", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/rust-lang/rust/blob/bdeace9f4edd2f8c1f06d147940a07550f133f42/library%2Fcore%2Ftests%2Ftask.rs", "raw_url": "https://github.com/rust-lang/rust/raw/bdeace9f4edd2f8c1f06d147940a07550f133f42/library%2Fcore%2Ftests%2Ftask.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/library%2Fcore%2Ftests%2Ftask.rs?ref=bdeace9f4edd2f8c1f06d147940a07550f133f42", "patch": "@@ -0,0 +1,14 @@\n+use core::task::Poll;\n+\n+#[test]\n+fn poll_const() {\n+    // test that the methods of `Poll` are usable in a const context\n+\n+    const POLL: Poll<usize> = Poll::Pending;\n+\n+    const IS_READY: bool = POLL.is_ready();\n+    assert!(!IS_READY);\n+\n+    const IS_PENDING: bool = POLL.is_pending();\n+    assert!(IS_PENDING);\n+}"}]}