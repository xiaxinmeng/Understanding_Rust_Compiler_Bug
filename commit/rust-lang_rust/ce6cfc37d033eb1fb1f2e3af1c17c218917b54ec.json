{"sha": "ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "node_id": "C_kwDOAAsO6NoAKGNlNmNmYzM3ZDAzM2ViMWZiMWYyZTNhZjFjMTdjMjE4OTE3YjU0ZWM", "commit": {"author": {"name": "yukang", "email": "moorekang@gmail.com", "date": "2023-05-13T10:06:16Z"}, "committer": {"name": "yukang", "email": "moorekang@gmail.com", "date": "2023-05-13T10:06:16Z"}, "message": "Fix ice caused by shorthand fields in NoFieldsForFnCall", "tree": {"sha": "bed6cfba9c4f2695202b44891c78d26d6dc98256", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/bed6cfba9c4f2695202b44891c78d26d6dc98256"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "html_url": "https://github.com/rust-lang/rust/commit/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/comments", "author": {"login": "chenyukang", "id": 230646, "node_id": "MDQ6VXNlcjIzMDY0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/230646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyukang", "html_url": "https://github.com/chenyukang", "followers_url": "https://api.github.com/users/chenyukang/followers", "following_url": "https://api.github.com/users/chenyukang/following{/other_user}", "gists_url": "https://api.github.com/users/chenyukang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyukang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyukang/subscriptions", "organizations_url": "https://api.github.com/users/chenyukang/orgs", "repos_url": "https://api.github.com/users/chenyukang/repos", "events_url": "https://api.github.com/users/chenyukang/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyukang/received_events", "type": "User", "site_admin": false}, "committer": {"login": "chenyukang", "id": 230646, "node_id": "MDQ6VXNlcjIzMDY0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/230646?v=4", "gravatar_id": "", "url": "https://api.github.com/users/chenyukang", "html_url": "https://github.com/chenyukang", "followers_url": "https://api.github.com/users/chenyukang/followers", "following_url": "https://api.github.com/users/chenyukang/following{/other_user}", "gists_url": "https://api.github.com/users/chenyukang/gists{/gist_id}", "starred_url": "https://api.github.com/users/chenyukang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/chenyukang/subscriptions", "organizations_url": "https://api.github.com/users/chenyukang/orgs", "repos_url": "https://api.github.com/users/chenyukang/repos", "events_url": "https://api.github.com/users/chenyukang/events{/privacy}", "received_events_url": "https://api.github.com/users/chenyukang/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "69fef92ab2f287f072b66fb7b4f62c8bb4acba43", "url": "https://api.github.com/repos/rust-lang/rust/commits/69fef92ab2f287f072b66fb7b4f62c8bb4acba43", "html_url": "https://github.com/rust-lang/rust/commit/69fef92ab2f287f072b66fb7b4f62c8bb4acba43"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "808bbbdada66f333227e727f5fd4303cd8418671", "filename": "compiler/rustc_parse/src/parser/expr.rs", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fexpr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fexpr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/compiler%2Frustc_parse%2Fsrc%2Fparser%2Fexpr.rs?ref=ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "patch": "@@ -1180,6 +1180,13 @@ impl<'a> Parser<'a> {\n                         self.restore_snapshot(snapshot);\n                         let close_paren = self.prev_token.span;\n                         let span = lo.to(close_paren);\n+                        // filter shorthand fields\n+                        let fields: Vec<_> = fields\n+                            .into_iter()\n+                            .filter_map(\n+                                |field| if !field.is_shorthand { Some(field) } else { None },\n+                            )\n+                            .collect();\n                         if !fields.is_empty() &&\n                             // `token.kind` should not be compared here.\n                             // This is because the `snapshot.token.kind` is treated as the same as"}, {"sha": "deba8679b1a8eaf355d8a67e0a2f2d9a4b759fca", "filename": "tests/ui/parser/issues/issue-111416.rs", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.rs", "raw_url": "https://github.com/rust-lang/rust/raw/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.rs?ref=ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "patch": "@@ -0,0 +1,4 @@\n+\n+fn main() {\n+    let my = monad_bind(mx, T: Try); //~ ERROR invalid `struct` delimiters or `fn` call arguments\n+}"}, {"sha": "b9e61d70e8167a694eb0391d7151a3c4662649d2", "filename": "tests/ui/parser/issues/issue-111416.stderr", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/rust-lang/rust/blob/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fui%2Fparser%2Fissues%2Fissue-111416.stderr?ref=ce6cfc37d033eb1fb1f2e3af1c17c218917b54ec", "patch": "@@ -0,0 +1,18 @@\n+error: invalid `struct` delimiters or `fn` call arguments\n+  --> $DIR/issue-111416.rs:3:14\n+   |\n+LL |     let my = monad_bind(mx, T: Try);\n+   |              ^^^^^^^^^^^^^^^^^^^^^^\n+   |\n+help: if `monad_bind` is a struct, use braces as delimiters\n+   |\n+LL |     let my = monad_bind { mx, T: Try };\n+   |                         ~            ~\n+help: if `monad_bind` is a function, use the arguments directly\n+   |\n+LL -     let my = monad_bind(mx, T: Try);\n+LL +     let my = monad_bind(mx, Try);\n+   |\n+\n+error: aborting due to previous error\n+"}]}