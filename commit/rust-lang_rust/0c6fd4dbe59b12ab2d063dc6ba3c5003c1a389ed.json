{"sha": "0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "node_id": "C_kwDOAAsO6NoAKDBjNmZkNGRiZTU5YjEyYWIyZDA2M2RjNmJhM2M1MDAzYzFhMzg5ZWQ", "commit": {"author": {"name": "Noritada Kobayashi", "email": "noritada.kobayashi@gmail.com", "date": "2022-12-15T05:25:59Z"}, "committer": {"name": "Noritada Kobayashi", "email": "noritada.kobayashi@gmail.com", "date": "2022-12-15T05:25:59Z"}, "message": "Split the input/output data of the conversion from the test code to the respective files", "tree": {"sha": "a30932da95d3b7d246a332e106e40345bf1c8da5", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/a30932da95d3b7d246a332e106e40345bf1c8da5"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "html_url": "https://github.com/rust-lang/rust/commit/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/comments", "author": {"login": "noritada", "id": 20850, "node_id": "MDQ6VXNlcjIwODUw", "avatar_url": "https://avatars.githubusercontent.com/u/20850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noritada", "html_url": "https://github.com/noritada", "followers_url": "https://api.github.com/users/noritada/followers", "following_url": "https://api.github.com/users/noritada/following{/other_user}", "gists_url": "https://api.github.com/users/noritada/gists{/gist_id}", "starred_url": "https://api.github.com/users/noritada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noritada/subscriptions", "organizations_url": "https://api.github.com/users/noritada/orgs", "repos_url": "https://api.github.com/users/noritada/repos", "events_url": "https://api.github.com/users/noritada/events{/privacy}", "received_events_url": "https://api.github.com/users/noritada/received_events", "type": "User", "site_admin": false}, "committer": {"login": "noritada", "id": 20850, "node_id": "MDQ6VXNlcjIwODUw", "avatar_url": "https://avatars.githubusercontent.com/u/20850?v=4", "gravatar_id": "", "url": "https://api.github.com/users/noritada", "html_url": "https://github.com/noritada", "followers_url": "https://api.github.com/users/noritada/followers", "following_url": "https://api.github.com/users/noritada/following{/other_user}", "gists_url": "https://api.github.com/users/noritada/gists{/gist_id}", "starred_url": "https://api.github.com/users/noritada/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/noritada/subscriptions", "organizations_url": "https://api.github.com/users/noritada/orgs", "repos_url": "https://api.github.com/users/noritada/repos", "events_url": "https://api.github.com/users/noritada/events{/privacy}", "received_events_url": "https://api.github.com/users/noritada/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c78d759ab3f201e29f5fcd9ec06e05744e4f6dd4", "url": "https://api.github.com/repos/rust-lang/rust/commits/c78d759ab3f201e29f5fcd9ec06e05744e4f6dd4", "html_url": "https://github.com/rust-lang/rust/commit/c78d759ab3f201e29f5fcd9ec06e05744e4f6dd4"}], "stats": {"total": 351, "additions": 175, "deletions": 176}, "files": [{"sha": "3584278c19b2bdec4a224e8007c4fcafc0896be0", "filename": "xtask/src/publish/notes.rs", "status": "modified", "additions": 4, "deletions": 176, "changes": 180, "blob_url": "https://github.com/rust-lang/rust/blob/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/xtask%2Fsrc%2Fpublish%2Fnotes.rs", "raw_url": "https://github.com/rust-lang/rust/raw/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/xtask%2Fsrc%2Fpublish%2Fnotes.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Fsrc%2Fpublish%2Fnotes.rs?ref=0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "patch": "@@ -573,185 +573,13 @@ impl Macro {\n #[cfg(test)]\n mod tests {\n     use super::*;\n+    use std::fs::read_to_string;\n \n     #[test]\n     fn test_asciidoc_to_markdown_conversion() {\n-        let input = \"\\\n-= Changelog #256\n-:sectanchors:\n-:page-layout: post\n-\n-Hello!\n-\n-Commit: commit:0123456789abcdef0123456789abcdef01234567[] +\n-Release: release:2022-01-01[]\n-\n-== New Features\n-\n-* **BREAKING** pr:1111[] shortcut kbd:[ctrl+r]\n-- hyphen-prefixed list item\n-* nested list item\n-** `foo` -> `foofoo`\n-** `bar` -> `barbar`\n-* listing in the secondary level\n-. install\n-. add to config\n-+\n-[source,json]\n-----\n-{\\\"foo\\\":\\\"bar\\\"}\n-----\n-* list item with continuation\n-+\n-image::https://example.com/animation.gif[]\n-+\n-image::https://example.com/animation.gif[\\\"alt text\\\"]\n-+\n-video::https://example.com/movie.mp4[options=loop]\n-+\n-video::https://example.com/movie.mp4[options=\\\"autoplay,loop\\\"]\n-+\n-.Image\n-image::https://example.com/animation.gif[]\n-+\n-.Video\n-video::https://example.com/movie.mp4[options=loop]\n-+\n-[source,bash]\n-----\n-rustup update nightly\n-----\n-+\n-----\n-This is a plain listing.\n-----\n-* single line item followed by empty lines\n-\n-* multiline list\n-item followed by empty lines\n-\n-* multiline list\n-  item with indent\n-\n-* multiline list\n-item not followed by empty lines\n-* multiline list\n-item followed by different marker\n-** foo\n-** bar\n-* multiline list\n-item followed by list continuation\n-+\n-paragraph\n-paragraph\n-\n-== Another Section\n-\n-* foo bar baz\n-* list item with an inline image\n-  image:https://example.com/animation.gif[]\n-\n-The highlight of the month is probably pr:1111[].\n-See https://example.com/manual[online manual] for more information.\n-\n-[source,bash]\n-----\n-rustup update nightly\n-----\n-\n-[source]\n-----\n-rustup update nightly\n-----\n-\n-----\n-This is a plain listing.\n-----\n-\";\n-        let expected = \"\\\n-# Changelog #256\n-\n-Hello!\n-\n-Commit: [`0123456`](https://github.com/rust-analyzer/rust-analyzer/commit/0123456789abcdef0123456789abcdef01234567) \\\\\n-Release: [`2022-01-01`](https://github.com/rust-analyzer/rust-analyzer/releases/2022-01-01)\n-\n-## New Features\n-\n-- **BREAKING** [`#1111`](https://github.com/rust-analyzer/rust-analyzer/pull/1111) shortcut <kbd>ctrl</kbd>+<kbd>r</kbd>\n-  - hyphen-prefixed list item\n-- nested list item\n-  - `foo` -> `foofoo`\n-  - `bar` -> `barbar`\n-- listing in the secondary level\n-  1. install\n-  1. add to config\n-\n-     ```json\n-     {\\\"foo\\\":\\\"bar\\\"}\n-     ```\n-- list item with continuation\n-\n-  ![](https://example.com/animation.gif)\n-\n-  ![alt text](https://example.com/animation.gif)\n-\n-  <video src=\\\"https://example.com/movie.mp4\\\" controls loop>Your browser does not support the video tag.</video>\n-\n-  <video src=\\\"https://example.com/movie.mp4\\\" autoplay controls loop>Your browser does not support the video tag.</video>\n-\n-  _Image_\\\\\n-  ![](https://example.com/animation.gif)\n-\n-  _Video_\\\\\n-  <video src=\\\"https://example.com/movie.mp4\\\" controls loop>Your browser does not support the video tag.</video>\n-\n-  ```bash\n-  rustup update nightly\n-  ```\n-\n-  ```\n-  This is a plain listing.\n-  ```\n-- single line item followed by empty lines\n-- multiline list\n-  item followed by empty lines\n-- multiline list\n-  item with indent\n-- multiline list\n-  item not followed by empty lines\n-- multiline list\n-  item followed by different marker\n-  - foo\n-  - bar\n-- multiline list\n-  item followed by list continuation\n-\n-  paragraph\n-  paragraph\n-\n-## Another Section\n-\n-- foo bar baz\n-- list item with an inline image\n-  ![](https://example.com/animation.gif)\n-\n-The highlight of the month is probably [`#1111`](https://github.com/rust-analyzer/rust-analyzer/pull/1111).\n-See [online manual](https://example.com/manual) for more information.\n-\n-```bash\n-rustup update nightly\n-```\n-\n-```\n-rustup update nightly\n-```\n-\n-```\n-This is a plain listing.\n-```\n-\";\n-        let actual = convert_asciidoc_to_markdown(std::io::Cursor::new(input)).unwrap();\n+        let input = read_to_string(\"test_data/input.adoc\").unwrap();\n+        let expected = read_to_string(\"test_data/expected.md\").unwrap();\n+        let actual = convert_asciidoc_to_markdown(std::io::Cursor::new(&input)).unwrap();\n \n         assert_eq!(actual, expected);\n     }"}, {"sha": "19c940c67bdc52ebcac6eea58a8a826c7c8a5b97", "filename": "xtask/test_data/expected.md", "status": "added", "additions": 81, "deletions": 0, "changes": 81, "blob_url": "https://github.com/rust-lang/rust/blob/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/xtask%2Ftest_data%2Fexpected.md", "raw_url": "https://github.com/rust-lang/rust/raw/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/xtask%2Ftest_data%2Fexpected.md", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Ftest_data%2Fexpected.md?ref=0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "patch": "@@ -0,0 +1,81 @@\n+# Changelog #256\n+\n+Hello!\n+\n+Commit: [`0123456`](https://github.com/rust-analyzer/rust-analyzer/commit/0123456789abcdef0123456789abcdef01234567) \\\n+Release: [`2022-01-01`](https://github.com/rust-analyzer/rust-analyzer/releases/2022-01-01)\n+\n+## New Features\n+\n+- **BREAKING** [`#1111`](https://github.com/rust-analyzer/rust-analyzer/pull/1111) shortcut <kbd>ctrl</kbd>+<kbd>r</kbd>\n+  - hyphen-prefixed list item\n+- nested list item\n+  - `foo` -> `foofoo`\n+  - `bar` -> `barbar`\n+- listing in the secondary level\n+  1. install\n+  1. add to config\n+\n+     ```json\n+     {\"foo\":\"bar\"}\n+     ```\n+- list item with continuation\n+\n+  ![](https://example.com/animation.gif)\n+\n+  ![alt text](https://example.com/animation.gif)\n+\n+  <video src=\"https://example.com/movie.mp4\" controls loop>Your browser does not support the video tag.</video>\n+\n+  <video src=\"https://example.com/movie.mp4\" autoplay controls loop>Your browser does not support the video tag.</video>\n+\n+  _Image_\\\n+  ![](https://example.com/animation.gif)\n+\n+  _Video_\\\n+  <video src=\"https://example.com/movie.mp4\" controls loop>Your browser does not support the video tag.</video>\n+\n+  ```bash\n+  rustup update nightly\n+  ```\n+\n+  ```\n+  This is a plain listing.\n+  ```\n+- single line item followed by empty lines\n+- multiline list\n+  item followed by empty lines\n+- multiline list\n+  item with indent\n+- multiline list\n+  item not followed by empty lines\n+- multiline list\n+  item followed by different marker\n+  - foo\n+  - bar\n+- multiline list\n+  item followed by list continuation\n+\n+  paragraph\n+  paragraph\n+\n+## Another Section\n+\n+- foo bar baz\n+- list item with an inline image\n+  ![](https://example.com/animation.gif)\n+\n+The highlight of the month is probably [`#1111`](https://github.com/rust-analyzer/rust-analyzer/pull/1111).\n+See [online manual](https://example.com/manual) for more information.\n+\n+```bash\n+rustup update nightly\n+```\n+\n+```\n+rustup update nightly\n+```\n+\n+```\n+This is a plain listing.\n+```"}, {"sha": "105bd8df0db76cb3db95e79f9d2222ee642a1a0c", "filename": "xtask/test_data/input.adoc", "status": "added", "additions": 90, "deletions": 0, "changes": 90, "blob_url": "https://github.com/rust-lang/rust/blob/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/xtask%2Ftest_data%2Finput.adoc", "raw_url": "https://github.com/rust-lang/rust/raw/0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed/xtask%2Ftest_data%2Finput.adoc", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/xtask%2Ftest_data%2Finput.adoc?ref=0c6fd4dbe59b12ab2d063dc6ba3c5003c1a389ed", "patch": "@@ -0,0 +1,90 @@\n+= Changelog #256\n+:sectanchors:\n+:page-layout: post\n+\n+Hello!\n+\n+Commit: commit:0123456789abcdef0123456789abcdef01234567[] +\n+Release: release:2022-01-01[]\n+\n+== New Features\n+\n+* **BREAKING** pr:1111[] shortcut kbd:[ctrl+r]\n+- hyphen-prefixed list item\n+* nested list item\n+** `foo` -> `foofoo`\n+** `bar` -> `barbar`\n+* listing in the secondary level\n+. install\n+. add to config\n++\n+[source,json]\n+----\n+{\"foo\":\"bar\"}\n+----\n+* list item with continuation\n++\n+image::https://example.com/animation.gif[]\n++\n+image::https://example.com/animation.gif[\"alt text\"]\n++\n+video::https://example.com/movie.mp4[options=loop]\n++\n+video::https://example.com/movie.mp4[options=\"autoplay,loop\"]\n++\n+.Image\n+image::https://example.com/animation.gif[]\n++\n+.Video\n+video::https://example.com/movie.mp4[options=loop]\n++\n+[source,bash]\n+----\n+rustup update nightly\n+----\n++\n+----\n+This is a plain listing.\n+----\n+* single line item followed by empty lines\n+\n+* multiline list\n+item followed by empty lines\n+\n+* multiline list\n+  item with indent\n+\n+* multiline list\n+item not followed by empty lines\n+* multiline list\n+item followed by different marker\n+** foo\n+** bar\n+* multiline list\n+item followed by list continuation\n++\n+paragraph\n+paragraph\n+\n+== Another Section\n+\n+* foo bar baz\n+* list item with an inline image\n+  image:https://example.com/animation.gif[]\n+\n+The highlight of the month is probably pr:1111[].\n+See https://example.com/manual[online manual] for more information.\n+\n+[source,bash]\n+----\n+rustup update nightly\n+----\n+\n+[source]\n+----\n+rustup update nightly\n+----\n+\n+----\n+This is a plain listing.\n+----"}]}