{"sha": "d8cf95010f0f757d68712c7478b1008734791f66", "node_id": "MDY6Q29tbWl0NzI0NzEyOmQ4Y2Y5NTAxMGYwZjc1N2Q2ODcxMmM3NDc4YjEwMDg3MzQ3OTFmNjY=", "commit": {"author": {"name": "Tyler Lanphear", "email": "animemachine13@gmail.com", "date": "2020-02-01T23:30:52Z"}, "committer": {"name": "Tyler Lanphear", "email": "animemachine13@gmail.com", "date": "2020-02-06T02:01:23Z"}, "message": "unused-parens: implement for const/static items", "tree": {"sha": "60cd47097379aeec7653f2a520219b40be0ed193", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/60cd47097379aeec7653f2a520219b40be0ed193"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/d8cf95010f0f757d68712c7478b1008734791f66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/d8cf95010f0f757d68712c7478b1008734791f66", "html_url": "https://github.com/rust-lang/rust/commit/d8cf95010f0f757d68712c7478b1008734791f66", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/d8cf95010f0f757d68712c7478b1008734791f66/comments", "author": {"login": "Tyg13", "id": 25281, "node_id": "MDQ6VXNlcjI1Mjgx", "avatar_url": "https://avatars.githubusercontent.com/u/25281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tyg13", "html_url": "https://github.com/Tyg13", "followers_url": "https://api.github.com/users/Tyg13/followers", "following_url": "https://api.github.com/users/Tyg13/following{/other_user}", "gists_url": "https://api.github.com/users/Tyg13/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tyg13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tyg13/subscriptions", "organizations_url": "https://api.github.com/users/Tyg13/orgs", "repos_url": "https://api.github.com/users/Tyg13/repos", "events_url": "https://api.github.com/users/Tyg13/events{/privacy}", "received_events_url": "https://api.github.com/users/Tyg13/received_events", "type": "User", "site_admin": false}, "committer": {"login": "Tyg13", "id": 25281, "node_id": "MDQ6VXNlcjI1Mjgx", "avatar_url": "https://avatars.githubusercontent.com/u/25281?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Tyg13", "html_url": "https://github.com/Tyg13", "followers_url": "https://api.github.com/users/Tyg13/followers", "following_url": "https://api.github.com/users/Tyg13/following{/other_user}", "gists_url": "https://api.github.com/users/Tyg13/gists{/gist_id}", "starred_url": "https://api.github.com/users/Tyg13/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Tyg13/subscriptions", "organizations_url": "https://api.github.com/users/Tyg13/orgs", "repos_url": "https://api.github.com/users/Tyg13/repos", "events_url": "https://api.github.com/users/Tyg13/events{/privacy}", "received_events_url": "https://api.github.com/users/Tyg13/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "58b834344fc7b9185e7a50db1ff24e5eb07dae5e", "url": "https://api.github.com/repos/rust-lang/rust/commits/58b834344fc7b9185e7a50db1ff24e5eb07dae5e", "html_url": "https://github.com/rust-lang/rust/commit/58b834344fc7b9185e7a50db1ff24e5eb07dae5e"}], "stats": {"total": 48, "additions": 36, "deletions": 12}, "files": [{"sha": "5490e5e2b4d55104fd374570cbeec7b352e05483", "filename": "src/librustc_lint/unused.rs", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/d8cf95010f0f757d68712c7478b1008734791f66/src%2Flibrustc_lint%2Funused.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8cf95010f0f757d68712c7478b1008734791f66/src%2Flibrustc_lint%2Funused.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibrustc_lint%2Funused.rs?ref=d8cf95010f0f757d68712c7478b1008734791f66", "patch": "@@ -587,6 +587,14 @@ impl EarlyLintPass for UnusedParens {\n             }\n         }\n     }\n+\n+    fn check_item(&mut self, cx: &EarlyContext<'_>, item: &ast::Item) {\n+        use ast::ItemKind::*;\n+\n+        if let Const(.., ref expr) | Static(.., ref expr) = item.kind {\n+            self.check_unused_parens_expr(cx, expr, \"assigned value\", false, None, None);\n+        }\n+    }\n }\n \n declare_lint! {"}, {"sha": "5ce1f57608132e2f297597ea349b84ea5d84abd7", "filename": "src/test/ui/lint/lint-unnecessary-parens.rs", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/d8cf95010f0f757d68712c7478b1008734791f66/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8cf95010f0f757d68712c7478b1008734791f66/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.rs?ref=d8cf95010f0f757d68712c7478b1008734791f66", "patch": "@@ -38,6 +38,9 @@ macro_rules! baz {\n     }\n }\n \n+const CONST_ITEM: usize = (10); //~ ERROR unnecessary parentheses around assigned value\n+static STATIC_ITEM: usize = (10); //~ ERROR unnecessary parentheses around assigned value\n+\n fn main() {\n     foo();\n     bar((true)); //~ ERROR unnecessary parentheses around function argument"}, {"sha": "8858c9532732248cb2dc17b4265f610a34668a12", "filename": "src/test/ui/lint/lint-unnecessary-parens.stderr", "status": "modified", "additions": 24, "deletions": 12, "changes": 36, "blob_url": "https://github.com/rust-lang/rust/blob/d8cf95010f0f757d68712c7478b1008734791f66/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/d8cf95010f0f757d68712c7478b1008734791f66/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Flint%2Flint-unnecessary-parens.stderr?ref=d8cf95010f0f757d68712c7478b1008734791f66", "patch": "@@ -34,73 +34,85 @@ error: unnecessary parentheses around block return value\n LL |     (5)\n    |     ^^^ help: remove these parentheses\n \n+error: unnecessary parentheses around assigned value\n+  --> $DIR/lint-unnecessary-parens.rs:41:27\n+   |\n+LL | const CONST_ITEM: usize = (10);\n+   |                           ^^^^ help: remove these parentheses\n+\n+error: unnecessary parentheses around assigned value\n+  --> $DIR/lint-unnecessary-parens.rs:42:29\n+   |\n+LL | static STATIC_ITEM: usize = (10);\n+   |                             ^^^^ help: remove these parentheses\n+\n error: unnecessary parentheses around function argument\n-  --> $DIR/lint-unnecessary-parens.rs:43:9\n+  --> $DIR/lint-unnecessary-parens.rs:46:9\n    |\n LL |     bar((true));\n    |         ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `if` condition\n-  --> $DIR/lint-unnecessary-parens.rs:45:8\n+  --> $DIR/lint-unnecessary-parens.rs:48:8\n    |\n LL |     if (true) {}\n    |        ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `while` condition\n-  --> $DIR/lint-unnecessary-parens.rs:46:11\n+  --> $DIR/lint-unnecessary-parens.rs:49:11\n    |\n LL |     while (true) {}\n    |           ^^^^^^ help: remove these parentheses\n \n warning: denote infinite loops with `loop { ... }`\n-  --> $DIR/lint-unnecessary-parens.rs:46:5\n+  --> $DIR/lint-unnecessary-parens.rs:49:5\n    |\n LL |     while (true) {}\n    |     ^^^^^^^^^^^^ help: use `loop`\n    |\n    = note: `#[warn(while_true)]` on by default\n \n error: unnecessary parentheses around `match` head expression\n-  --> $DIR/lint-unnecessary-parens.rs:48:11\n+  --> $DIR/lint-unnecessary-parens.rs:51:11\n    |\n LL |     match (true) {\n    |           ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `let` head expression\n-  --> $DIR/lint-unnecessary-parens.rs:51:16\n+  --> $DIR/lint-unnecessary-parens.rs:54:16\n    |\n LL |     if let 1 = (1) {}\n    |                ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around `let` head expression\n-  --> $DIR/lint-unnecessary-parens.rs:52:19\n+  --> $DIR/lint-unnecessary-parens.rs:55:19\n    |\n LL |     while let 1 = (2) {}\n    |                   ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around method argument\n-  --> $DIR/lint-unnecessary-parens.rs:66:24\n+  --> $DIR/lint-unnecessary-parens.rs:69:24\n    |\n LL |     X { y: false }.foo((true));\n    |                        ^^^^^^ help: remove these parentheses\n \n error: unnecessary parentheses around assigned value\n-  --> $DIR/lint-unnecessary-parens.rs:68:18\n+  --> $DIR/lint-unnecessary-parens.rs:71:18\n    |\n LL |     let mut _a = (0);\n    |                  ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around assigned value\n-  --> $DIR/lint-unnecessary-parens.rs:69:10\n+  --> $DIR/lint-unnecessary-parens.rs:72:10\n    |\n LL |     _a = (0);\n    |          ^^^ help: remove these parentheses\n \n error: unnecessary parentheses around assigned value\n-  --> $DIR/lint-unnecessary-parens.rs:70:11\n+  --> $DIR/lint-unnecessary-parens.rs:73:11\n    |\n LL |     _a += (1);\n    |           ^^^ help: remove these parentheses\n \n-error: aborting due to 15 previous errors\n+error: aborting due to 17 previous errors\n "}, {"sha": "cb42ff2c6443a2b88349ebcb5d92b60301b27cbc", "filename": "src/test/ui/super-fast-paren-parsing.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/d8cf95010f0f757d68712c7478b1008734791f66/src%2Ftest%2Fui%2Fsuper-fast-paren-parsing.rs", "raw_url": "https://github.com/rust-lang/rust/raw/d8cf95010f0f757d68712c7478b1008734791f66/src%2Ftest%2Fui%2Fsuper-fast-paren-parsing.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fsuper-fast-paren-parsing.rs?ref=d8cf95010f0f757d68712c7478b1008734791f66", "patch": "@@ -1,5 +1,6 @@\n // run-pass\n \n+#![allow(unused_parens)]\n #![allow(non_upper_case_globals)]\n #![allow(dead_code)]\n // exec-env:RUST_MIN_STACK=16000000"}]}