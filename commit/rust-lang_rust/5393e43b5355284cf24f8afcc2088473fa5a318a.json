{"sha": "5393e43b5355284cf24f8afcc2088473fa5a318a", "node_id": "MDY6Q29tbWl0NzI0NzEyOjUzOTNlNDNiNTM1NTI4NGNmMjRmOGFmY2MyMDg4NDczZmE1YTMxOGE=", "commit": {"author": {"name": "Eric Reed", "email": "ereed@mozilla.com", "date": "2013-06-13T19:51:32Z"}, "committer": {"name": "Eric Reed", "email": "ereed@mozilla.com", "date": "2013-06-13T19:51:32Z"}, "message": "Corrected libuv UDP bindings.", "tree": {"sha": "8e55eeb90b752f57af90de2cc5d5d4aa7e4117fc", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/8e55eeb90b752f57af90de2cc5d5d4aa7e4117fc"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/5393e43b5355284cf24f8afcc2088473fa5a318a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/5393e43b5355284cf24f8afcc2088473fa5a318a", "html_url": "https://github.com/rust-lang/rust/commit/5393e43b5355284cf24f8afcc2088473fa5a318a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/5393e43b5355284cf24f8afcc2088473fa5a318a/comments", "author": null, "committer": null, "parents": [{"sha": "39a575fb43d2ba0511d295b7e1a9178b4919e348", "url": "https://api.github.com/repos/rust-lang/rust/commits/39a575fb43d2ba0511d295b7e1a9178b4919e348", "html_url": "https://github.com/rust-lang/rust/commit/39a575fb43d2ba0511d295b7e1a9178b4919e348"}], "stats": {"total": 50, "additions": 47, "deletions": 3}, "files": [{"sha": "cebd498aa024a8bdb5b87058538801ed335b5c6f", "filename": "src/libstd/rt/uv/uvll.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/5393e43b5355284cf24f8afcc2088473fa5a318a/src%2Flibstd%2Frt%2Fuv%2Fuvll.rs", "raw_url": "https://github.com/rust-lang/rust/raw/5393e43b5355284cf24f8afcc2088473fa5a318a/src%2Flibstd%2Frt%2Fuv%2Fuvll.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibstd%2Frt%2Fuv%2Fuvll.rs?ref=5393e43b5355284cf24f8afcc2088473fa5a318a", "patch": "@@ -201,14 +201,14 @@ pub unsafe fn udp_send<T>(req: *uv_udp_send_t, handle: *T, buf_in: &[uv_buf_t],\n                           addr: *sockaddr_in, cb: *u8) -> c_int {\n     let buf_ptr = vec::raw::to_ptr(buf_in);\n     let buf_cnt = buf_in.len() as i32;\n-    return rust_uv_udp_send(req, handle, buf_ptr, buf_cnt, addr, cb);\n+    return rust_uv_udp_send(req, handle as *c_void, buf_ptr, buf_cnt, addr, cb);\n }\n \n pub unsafe fn udp_send6<T>(req: *uv_udp_send_t, handle: *T, buf_in: &[uv_buf_t],\n                           addr: *sockaddr_in6, cb: *u8) -> c_int {\n     let buf_ptr = vec::raw::to_ptr(buf_in);\n     let buf_cnt = buf_in.len() as i32;\n-    return rust_uv_udp_send(req, handle, buf_ptr, buf_cnt, addr, cb);\n+    return rust_uv_udp_send(req, handle as *c_void, buf_ptr, buf_cnt, addr, cb);\n }\n \n pub unsafe fn udp_recv_start(server: *uv_udp_t, on_alloc: *u8, on_recv: *u8) -> c_int {"}, {"sha": "67a2f614b699a73344fbd415990db85438f0a3f4", "filename": "src/rt/rust_uv.cpp", "status": "modified", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/rust-lang/rust/blob/5393e43b5355284cf24f8afcc2088473fa5a318a/src%2Frt%2Frust_uv.cpp", "raw_url": "https://github.com/rust-lang/rust/raw/5393e43b5355284cf24f8afcc2088473fa5a318a/src%2Frt%2Frust_uv.cpp", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frust_uv.cpp?ref=5393e43b5355284cf24f8afcc2088473fa5a318a", "patch": "@@ -293,6 +293,43 @@ rust_uv_tcp_getpeername6\n     return uv_tcp_getpeername(handle, (sockaddr*)name, &namelen);\n }\n \n+extern \"C\" int\n+rust_uv_udp_init(uv_loop_t* loop, uv_udp_t* handle) {\n+    return uv_udp_init(loop, handle);\n+}\n+\n+extern \"C\" int\n+rust_uv_udp_bind(uv_udp_t* server, sockaddr_in* addr_ptr, unsigned flags) {\n+    return uv_udp_bind(server, *addr_ptr, flags);\n+}\n+\n+extern \"C\" int\n+rust_uv_udp_bind6(uv_udp_t* server, sockaddr_in6* addr_ptr, unsigned flags) {\n+    return uv_udp_bind6(server, *addr_ptr, flags);\n+}\n+\n+extern \"C\" int\n+rust_uv_udp_send(uv_udp_send_t* req, uv_udp_t* handle, uv_buf_t* buf_in, \n+                 int buf_cnt, sockaddr_in* addr_ptr, uv_udp_send_cb cb) {\n+    return uv_udp_send(req, handle, buf_in, buf_cnt, *addr_ptr, cb);\n+}\n+\n+extern \"C\" int\n+rust_uv_udp_send6(uv_udp_send_t* req, uv_udp_t* handle, uv_buf_t* buf_in, \n+                  int buf_cnt, sockaddr_in6* addr_ptr, uv_udp_send_cb cb) {\n+    return uv_udp_send6(req, handle, buf_in, buf_cnt, *addr_ptr, cb);\n+}\n+\n+extern \"C\" int\n+rust_uv_udp_recv_start(uv_udp_t* server, uv_alloc_cb on_alloc, uv_udp_recv_cb on_read) {\n+    return uv_udp_recv_start(server, on_alloc, on_read);\n+}\n+\n+extern \"C\" int\n+rust_uv_udp_recv_stop(uv_udp_t* server) {\n+    return uv_udp_recv_stop(server);\n+}\n+\n extern \"C\" int\n rust_uv_listen(uv_stream_t* stream, int backlog,\n         uv_connection_cb cb) {"}, {"sha": "cb7189c5a83211e89a6eabfc25913db89c34ac36", "filename": "src/rt/rustrt.def.in", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/rust-lang/rust/blob/5393e43b5355284cf24f8afcc2088473fa5a318a/src%2Frt%2Frustrt.def.in", "raw_url": "https://github.com/rust-lang/rust/raw/5393e43b5355284cf24f8afcc2088473fa5a318a/src%2Frt%2Frustrt.def.in", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frt%2Frustrt.def.in?ref=5393e43b5355284cf24f8afcc2088473fa5a318a", "patch": "@@ -104,6 +104,13 @@ rust_uv_tcp_connect\n rust_uv_tcp_bind\n rust_uv_tcp_connect6\n rust_uv_tcp_bind6\n+rust_uv_udp_init\n+rust_uv_udp_bind\n+rust_uv_udp_bind6\n+rust_uv_udp_send\n+rust_uv_udp_send6\n+rust_uv_udp_recv_start\n+rust_uv_udp_recv_stop\n rust_uv_listen\n rust_uv_accept\n rust_uv_write\n@@ -239,4 +246,4 @@ rust_valgrind_stack_deregister\n rust_take_env_lock\n rust_drop_env_lock\n rust_update_log_settings\n-rust_get_num_cpus\n\\ No newline at end of file\n+rust_get_num_cpus"}]}