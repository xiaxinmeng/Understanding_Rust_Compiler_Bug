{"sha": "46a8beb4b2536740b632d01abff8d341bbf20b6d", "node_id": "MDY6Q29tbWl0NzI0NzEyOjQ2YThiZWI0YjI1MzY3NDBiNjMyZDAxYWJmZjhkMzQxYmJmMjBiNmQ=", "commit": {"author": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2019-03-20T00:22:19Z"}, "committer": {"name": "gnzlbg", "email": "gonzalobg88@gmail.com", "date": "2019-03-20T00:22:19Z"}, "message": "Move some bench tests back from libtest", "tree": {"sha": "e4f17e1f441cbfec0933ce5f4923c61db9241a6a", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/e4f17e1f441cbfec0933ce5f4923c61db9241a6a"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/46a8beb4b2536740b632d01abff8d341bbf20b6d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/46a8beb4b2536740b632d01abff8d341bbf20b6d", "html_url": "https://github.com/rust-lang/rust/commit/46a8beb4b2536740b632d01abff8d341bbf20b6d", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/46a8beb4b2536740b632d01abff8d341bbf20b6d/comments", "author": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "committer": {"login": "gnzlbg", "id": 904614, "node_id": "MDQ6VXNlcjkwNDYxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/904614?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnzlbg", "html_url": "https://github.com/gnzlbg", "followers_url": "https://api.github.com/users/gnzlbg/followers", "following_url": "https://api.github.com/users/gnzlbg/following{/other_user}", "gists_url": "https://api.github.com/users/gnzlbg/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnzlbg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnzlbg/subscriptions", "organizations_url": "https://api.github.com/users/gnzlbg/orgs", "repos_url": "https://api.github.com/users/gnzlbg/repos", "events_url": "https://api.github.com/users/gnzlbg/events{/privacy}", "received_events_url": "https://api.github.com/users/gnzlbg/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3eb4890dfe6db0279fdd3cda19f9643873ae3db9", "url": "https://api.github.com/repos/rust-lang/rust/commits/3eb4890dfe6db0279fdd3cda19f9643873ae3db9", "html_url": "https://github.com/rust-lang/rust/commit/3eb4890dfe6db0279fdd3cda19f9643873ae3db9"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "cb0ce480e4273c3e9d89376a1a72417c4618f1c2", "filename": "src/libtest/lib.rs", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/rust-lang/rust/blob/46a8beb4b2536740b632d01abff8d341bbf20b6d/src%2Flibtest%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/46a8beb4b2536740b632d01abff8d341bbf20b6d/src%2Flibtest%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibtest%2Flib.rs?ref=46a8beb4b2536740b632d01abff8d341bbf20b6d", "patch": "@@ -44,3 +44,28 @@ pub fn black_box<T>(dummy: T) -> T {\n pub fn black_box<T>(dummy: T) -> T {\n     dummy\n }\n+\n+#[cfg(test)]\n+mod tests {\n+    use crate::Bencher;\n+    use libtest::stats::Stats;\n+\n+    #[bench]\n+    pub fn sum_three_items(b: &mut Bencher) {\n+        b.iter(|| {\n+            [1e20f64, 1.5f64, -1e20f64].sum();\n+        })\n+    }\n+\n+    #[bench]\n+    pub fn sum_many_f64(b: &mut Bencher) {\n+        let nums = [-1e30f64, 1e60, 1e30, 1.0, -1e60];\n+        let v = (0..500).map(|i| nums[i % 5]).collect::<Vec<_>>();\n+        b.iter(|| {\n+            v.sum();\n+        })\n+    }\n+\n+    #[bench]\n+    pub fn no_iter(_: &mut Bencher) {}\n+}"}]}