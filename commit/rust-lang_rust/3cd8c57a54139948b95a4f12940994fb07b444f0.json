{"sha": "3cd8c57a54139948b95a4f12940994fb07b444f0", "node_id": "MDY6Q29tbWl0NzI0NzEyOjNjZDhjNTdhNTQxMzk5NDhiOTVhNGYxMjk0MDk5NGZiMDdiNDQ0ZjA=", "commit": {"author": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-02T00:33:58Z"}, "committer": {"name": "Brian Anderson", "email": "banderson@mozilla.com", "date": "2012-03-02T00:34:09Z"}, "message": "rustdoc: Add index records to the doc tree", "tree": {"sha": "306f530c64c8effebb934551a25d98b94da66c63", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/306f530c64c8effebb934551a25d98b94da66c63"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/3cd8c57a54139948b95a4f12940994fb07b444f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/3cd8c57a54139948b95a4f12940994fb07b444f0", "html_url": "https://github.com/rust-lang/rust/commit/3cd8c57a54139948b95a4f12940994fb07b444f0", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/3cd8c57a54139948b95a4f12940994fb07b444f0/comments", "author": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "committer": {"login": "brson", "id": 147214, "node_id": "MDQ6VXNlcjE0NzIxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/147214?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brson", "html_url": "https://github.com/brson", "followers_url": "https://api.github.com/users/brson/followers", "following_url": "https://api.github.com/users/brson/following{/other_user}", "gists_url": "https://api.github.com/users/brson/gists{/gist_id}", "starred_url": "https://api.github.com/users/brson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brson/subscriptions", "organizations_url": "https://api.github.com/users/brson/orgs", "repos_url": "https://api.github.com/users/brson/repos", "events_url": "https://api.github.com/users/brson/events{/privacy}", "received_events_url": "https://api.github.com/users/brson/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5df44bd06669bef20959572a7c6a5b18759bec44", "url": "https://api.github.com/repos/rust-lang/rust/commits/5df44bd06669bef20959572a7c6a5b18759bec44", "html_url": "https://github.com/rust-lang/rust/commit/5df44bd06669bef20959572a7c6a5b18759bec44"}], "stats": {"total": 35, "additions": 31, "deletions": 4}, "files": [{"sha": "aa1bca2eab93051335c5f0ebc75f60e27d9e335e", "filename": "src/rustdoc/doc.rs", "status": "modified", "additions": 25, "deletions": 1, "changes": 26, "blob_url": "https://github.com/rust-lang/rust/blob/3cd8c57a54139948b95a4f12940994fb07b444f0/src%2Frustdoc%2Fdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3cd8c57a54139948b95a4f12940994fb07b444f0/src%2Frustdoc%2Fdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fdoc.rs?ref=3cd8c57a54139948b95a4f12940994fb07b444f0", "patch": "@@ -33,7 +33,8 @@ type itemdoc = {\n \n type moddoc = {\n     item: itemdoc,\n-    items: [itemtag]\n+    items: [itemtag],\n+    index: option<index>\n };\n \n type nmoddoc = {\n@@ -109,6 +110,29 @@ type tydoc = {\n     sig: option<str>\n };\n \n+type index = {\n+    entries: [index_entry]\n+};\n+\n+#[doc = \"\n+\n+A single entry in an index\n+\n+Fields:\n+\n+* kind - The type of thing being indexed, e.g. 'Module'\n+* name - The name of the thing\n+* brief - A description\n+* link - A format-specific string representing the link target\n+\n+\"]\n+type index_entry = {\n+    kind: str,\n+    name: str,\n+    brief: str,\n+    link: str\n+};\n+\n #[doc = \"Some helper methods on moddoc, mostly for testing\"]\n impl util for moddoc {\n "}, {"sha": "27ad5fe51ba3a8ed5dae8cf6cbe6c565bad179b7", "filename": "src/rustdoc/extract.rs", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/3cd8c57a54139948b95a4f12940994fb07b444f0/src%2Frustdoc%2Fextract.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3cd8c57a54139948b95a4f12940994fb07b444f0/src%2Frustdoc%2Fextract.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Fextract.rs?ref=3cd8c57a54139948b95a4f12940994fb07b444f0", "patch": "@@ -102,7 +102,8 @@ fn moddoc_from_mod(\n                 none\n               }\n             }\n-        }\n+        },\n+        index: none\n     }\n }\n "}, {"sha": "86af77a687fd754f2dac694dc8ca9014d7fcf256", "filename": "src/rustdoc/rustdoc.rs", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/3cd8c57a54139948b95a4f12940994fb07b444f0/src%2Frustdoc%2Frustdoc.rs", "raw_url": "https://github.com/rust-lang/rust/raw/3cd8c57a54139948b95a4f12940994fb07b444f0/src%2Frustdoc%2Frustdoc.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Frustdoc%2Frustdoc.rs?ref=3cd8c57a54139948b95a4f12940994fb07b444f0", "patch": "@@ -57,7 +57,8 @@ fn test_run_passes() {\n                     name: doc.topmod.name() + \"two\"\n                     with doc.topmod.item\n                 },\n-                items: []\n+                items: [],\n+                index: none\n             }\n         }\n     }\n@@ -71,7 +72,8 @@ fn test_run_passes() {\n                     name: doc.topmod.name() + \"three\"\n                     with doc.topmod.item\n                 },\n-                items: []\n+                items: [],\n+                index: none\n             }\n         }\n     }"}]}