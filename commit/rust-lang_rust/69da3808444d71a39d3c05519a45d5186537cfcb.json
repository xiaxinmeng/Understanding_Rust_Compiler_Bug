{"sha": "69da3808444d71a39d3c05519a45d5186537cfcb", "node_id": "MDY6Q29tbWl0NzI0NzEyOjY5ZGEzODA4NDQ0ZDcxYTM5ZDNjMDU1MTlhNDVkNTE4NjUzN2NmY2I=", "commit": {"author": {"name": "Kevin Ballard", "email": "kevin@sb.org", "date": "2013-07-11T06:35:13Z"}, "committer": {"name": "Kevin Ballard", "email": "kevin@sb.org", "date": "2013-07-14T21:37:29Z"}, "message": "Highlight rustc's warnings/errors in bold instead of bright white\n\nClang actually highlights using bold, not using bright white. Match\nclang on this so our diagnostics are still readable on terminals with a\nwhite background.", "tree": {"sha": "818c8839bd67be691b5edb315685ce83e7dd0e3f", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/818c8839bd67be691b5edb315685ce83e7dd0e3f"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/69da3808444d71a39d3c05519a45d5186537cfcb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/69da3808444d71a39d3c05519a45d5186537cfcb", "html_url": "https://github.com/rust-lang/rust/commit/69da3808444d71a39d3c05519a45d5186537cfcb", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/69da3808444d71a39d3c05519a45d5186537cfcb/comments", "author": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "committer": {"login": "lilyball", "id": 714, "node_id": "MDQ6VXNlcjcxNA==", "avatar_url": "https://avatars.githubusercontent.com/u/714?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lilyball", "html_url": "https://github.com/lilyball", "followers_url": "https://api.github.com/users/lilyball/followers", "following_url": "https://api.github.com/users/lilyball/following{/other_user}", "gists_url": "https://api.github.com/users/lilyball/gists{/gist_id}", "starred_url": "https://api.github.com/users/lilyball/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lilyball/subscriptions", "organizations_url": "https://api.github.com/users/lilyball/orgs", "repos_url": "https://api.github.com/users/lilyball/repos", "events_url": "https://api.github.com/users/lilyball/events{/privacy}", "received_events_url": "https://api.github.com/users/lilyball/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "690495de035ccaf743b2715dd1e88b1266878026", "url": "https://api.github.com/repos/rust-lang/rust/commits/690495de035ccaf743b2715dd1e88b1266878026", "html_url": "https://github.com/rust-lang/rust/commit/690495de035ccaf743b2715dd1e88b1266878026"}], "stats": {"total": 29, "additions": 15, "deletions": 14}, "files": [{"sha": "fc0dc4c8f5230179211be3a1c56c16c651c200b9", "filename": "src/libsyntax/diagnostic.rs", "status": "modified", "additions": 15, "deletions": 14, "changes": 29, "blob_url": "https://github.com/rust-lang/rust/blob/69da3808444d71a39d3c05519a45d5186537cfcb/src%2Flibsyntax%2Fdiagnostic.rs", "raw_url": "https://github.com/rust-lang/rust/raw/69da3808444d71a39d3c05519a45d5186537cfcb/src%2Flibsyntax%2Fdiagnostic.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fdiagnostic.rs?ref=69da3808444d71a39d3c05519a45d5186537cfcb", "patch": "@@ -186,22 +186,22 @@ fn diagnosticcolor(lvl: level) -> term::color::Color {\n     }\n }\n \n-fn print_maybe_colored(msg: &str, color: term::color::Color) {\n+fn print_maybe_styled(msg: &str, color: term::attr::Attr) {\n     let stderr = io::stderr();\n \n-    let t = term::Terminal::new(stderr);\n+    if stderr.get_type() == io::Screen {\n+        let t = term::Terminal::new(stderr);\n \n-    match t {\n-        Ok(term) => {\n-            if stderr.get_type() == io::Screen {\n-                term.fg(color);\n+        match t {\n+            Ok(term) => {\n+                term.attr(color);\n                 stderr.write_str(msg);\n                 term.reset();\n-            } else {\n-                stderr.write_str(msg);\n-            }\n-        },\n-        _ => stderr.write_str(msg)\n+            },\n+            _ => stderr.write_str(msg)\n+        }\n+    } else {\n+        stderr.write_str(msg);\n     }\n }\n \n@@ -212,8 +212,9 @@ fn print_diagnostic(topic: &str, lvl: level, msg: &str) {\n         stderr.write_str(fmt!(\"%s \", topic));\n     }\n \n-    print_maybe_colored(fmt!(\"%s: \", diagnosticstr(lvl)), diagnosticcolor(lvl));\n-    print_maybe_colored(fmt!(\"%s\\n\", msg), term::color::BRIGHT_WHITE);\n+    print_maybe_styled(fmt!(\"%s: \", diagnosticstr(lvl)),\n+                            term::attr::ForegroundColor(diagnosticcolor(lvl)));\n+    print_maybe_styled(fmt!(\"%s\\n\", msg), term::attr::Bold);\n }\n \n pub fn collect(messages: @mut ~[~str])\n@@ -312,7 +313,7 @@ fn highlight_lines(cm: @codemap::CodeMap,\n                 s.push_char('~')\n             }\n         }\n-        print_maybe_colored(s + \"\\n\", diagnosticcolor(lvl));\n+        print_maybe_styled(s + \"\\n\", term::attr::ForegroundColor(diagnosticcolor(lvl)));\n     }\n }\n "}]}