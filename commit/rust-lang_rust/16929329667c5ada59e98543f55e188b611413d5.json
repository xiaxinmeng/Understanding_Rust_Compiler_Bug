{"sha": "16929329667c5ada59e98543f55e188b611413d5", "node_id": "MDY6Q29tbWl0NzI0NzEyOjE2OTI5MzI5NjY3YzVhZGE1OWU5ODU0M2Y1NWUxODhiNjExNDEzZDU=", "commit": {"author": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-06-26T14:36:05Z"}, "committer": {"name": "hyd-dev", "email": "yd-huang@outlook.com", "date": "2021-06-26T14:36:05Z"}, "message": "Show error if `--target-dir` is provided more than once", "tree": {"sha": "6a0c7e5654eb28806df59ed6cf6c724add791831", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/6a0c7e5654eb28806df59ed6cf6c724add791831"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/16929329667c5ada59e98543f55e188b611413d5", "comment_count": 0, "verification": {"verified": false, "reason": "no_user", "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYIADMWIQRJ2jPMDdiQ+U4U42Z0+n/VuNoUuAUCYNc7VRUceWQtaHVhbmdA\nb3V0bG9vay5jb20ACgkQdPp/1bjaFLh7lwD7BeAfVGrcJW2qcIqrwdaAdaiNRLYe\nNzgcYtiPRctaRegA/juVDn0HregjwaDeen4GcZIDK+rbToiifWNU1Sd4jFgE\n=QdLw\n-----END PGP SIGNATURE-----", "payload": "tree 6a0c7e5654eb28806df59ed6cf6c724add791831\nparent 8f87903ec91499f8e3f68ed3386b70c5d069cf8d\nauthor hyd-dev <yd-huang@outlook.com> 1624718165 +0800\ncommitter hyd-dev <yd-huang@outlook.com> 1624718165 +0800\n\nShow error if `--target-dir` is provided more than once\n"}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/16929329667c5ada59e98543f55e188b611413d5", "html_url": "https://github.com/rust-lang/rust/commit/16929329667c5ada59e98543f55e188b611413d5", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/16929329667c5ada59e98543f55e188b611413d5/comments", "author": null, "committer": null, "parents": [{"sha": "8f87903ec91499f8e3f68ed3386b70c5d069cf8d", "url": "https://api.github.com/repos/rust-lang/rust/commits/8f87903ec91499f8e3f68ed3386b70c5d069cf8d", "html_url": "https://github.com/rust-lang/rust/commit/8f87903ec91499f8e3f68ed3386b70c5d069cf8d"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "aac945d2d780ae079052fe5da933ebc40a3078a3", "filename": "cargo-miri/bin.rs", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/16929329667c5ada59e98543f55e188b611413d5/cargo-miri%2Fbin.rs", "raw_url": "https://github.com/rust-lang/rust/raw/16929329667c5ada59e98543f55e188b611413d5/cargo-miri%2Fbin.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/cargo-miri%2Fbin.rs?ref=16929329667c5ada59e98543f55e188b611413d5", "patch": "@@ -572,7 +572,12 @@ fn phase_cargo_miri(mut args: env::Args) {\n     // Forward all arguments before `--` other than `--target-dir` and its value to Cargo.\n     for arg in ArgSplitFlagValue::new(&mut args, \"--target-dir\") {\n         match arg {\n-            Ok(value) => target_dir = Some(value.into()),\n+            Ok(value) => {\n+                if target_dir.is_some() {\n+                    show_error(format!(\"`--target-dir` is provided more than once\"));\n+                }\n+                target_dir = Some(value.into());\n+            }\n             Err(arg) => drop(cmd.arg(arg)),\n         }\n     }"}]}