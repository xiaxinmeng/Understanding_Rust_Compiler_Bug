{"sha": "7f6229b9aada69389be4ead0ecbec8aed5892a24", "node_id": "C_kwDOAAsO6NoAKDdmNjIyOWI5YWFkYTY5Mzg5YmU0ZWFkMGVjYmVjOGFlZDU4OTJhMjQ", "commit": {"author": {"name": "Caleb Cartwright", "email": "caleb.cartwright@outlook.com", "date": "2021-09-20T23:58:38Z"}, "committer": {"name": "Caleb Cartwright", "email": "calebcartwright@users.noreply.github.com", "date": "2021-09-24T02:12:57Z"}, "message": "tests: restructure and extend cargo-fmt tests", "tree": {"sha": "fa906cbf779bdc8626a67e2b9daacdae14868c74", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/fa906cbf779bdc8626a67e2b9daacdae14868c74"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/7f6229b9aada69389be4ead0ecbec8aed5892a24", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/7f6229b9aada69389be4ead0ecbec8aed5892a24", "html_url": "https://github.com/rust-lang/rust/commit/7f6229b9aada69389be4ead0ecbec8aed5892a24", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/7f6229b9aada69389be4ead0ecbec8aed5892a24/comments", "author": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "committer": {"login": "calebcartwright", "id": 13042488, "node_id": "MDQ6VXNlcjEzMDQyNDg4", "avatar_url": "https://avatars.githubusercontent.com/u/13042488?v=4", "gravatar_id": "", "url": "https://api.github.com/users/calebcartwright", "html_url": "https://github.com/calebcartwright", "followers_url": "https://api.github.com/users/calebcartwright/followers", "following_url": "https://api.github.com/users/calebcartwright/following{/other_user}", "gists_url": "https://api.github.com/users/calebcartwright/gists{/gist_id}", "starred_url": "https://api.github.com/users/calebcartwright/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/calebcartwright/subscriptions", "organizations_url": "https://api.github.com/users/calebcartwright/orgs", "repos_url": "https://api.github.com/users/calebcartwright/repos", "events_url": "https://api.github.com/users/calebcartwright/events{/privacy}", "received_events_url": "https://api.github.com/users/calebcartwright/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "74df7b3265702949105161b36aee8b0975907210", "url": "https://api.github.com/repos/rust-lang/rust/commits/74df7b3265702949105161b36aee8b0975907210", "html_url": "https://github.com/rust-lang/rust/commit/74df7b3265702949105161b36aee8b0975907210"}], "stats": {"total": 443, "additions": 443, "deletions": 0}, "files": [{"sha": "71cf88f79e67b674ecf7abc54035fabaa4c84539", "filename": ".gitignore", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/.gitignore", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/.gitignore", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/.gitignore?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -5,6 +5,7 @@\n # Generated by Cargo\n # will have compiled files and executables\n /target\n+tests/cargo-fmt/**/target\n \n # Remove Cargo.lock from gitignore if creating an executable, leave it for libraries\n # More information here http://doc.crates.io/guide.html#cargotoml-vs-cargolock"}, {"sha": "bf44924f13c31cdc56fa9779969791d6910418ee", "filename": "src/cargo-fmt/test/message_format.rs", "status": "added", "additions": 80, "deletions": 0, "changes": 80, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/src%2Fcargo-fmt%2Ftest%2Fmessage_format.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/src%2Fcargo-fmt%2Ftest%2Fmessage_format.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcargo-fmt%2Ftest%2Fmessage_format.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,80 @@\n+use super::*;\n+\n+#[test]\n+fn invalid_message_format() {\n+    assert_eq!(\n+        convert_message_format_to_rustfmt_args(\"awesome\", &mut vec![]),\n+        Err(String::from(\n+            \"invalid --message-format value: awesome. Allowed values are: short|json|human\"\n+        )),\n+    );\n+}\n+\n+#[test]\n+fn json_message_format_and_check_arg() {\n+    let mut args = vec![String::from(\"--check\")];\n+    assert_eq!(\n+        convert_message_format_to_rustfmt_args(\"json\", &mut args),\n+        Err(String::from(\n+            \"cannot include --check arg when --message-format is set to json\"\n+        )),\n+    );\n+}\n+\n+#[test]\n+fn json_message_format_and_emit_arg() {\n+    let mut args = vec![String::from(\"--emit\"), String::from(\"checkstyle\")];\n+    assert_eq!(\n+        convert_message_format_to_rustfmt_args(\"json\", &mut args),\n+        Err(String::from(\n+            \"cannot include --emit arg when --message-format is set to json\"\n+        )),\n+    );\n+}\n+\n+#[test]\n+fn json_message_format() {\n+    let mut args = vec![String::from(\"--edition\"), String::from(\"2018\")];\n+    assert!(convert_message_format_to_rustfmt_args(\"json\", &mut args).is_ok());\n+    assert_eq!(\n+        args,\n+        vec![\n+            String::from(\"--edition\"),\n+            String::from(\"2018\"),\n+            String::from(\"--emit\"),\n+            String::from(\"json\")\n+        ]\n+    );\n+}\n+\n+#[test]\n+fn human_message_format() {\n+    let exp_args = vec![String::from(\"--emit\"), String::from(\"json\")];\n+    let mut act_args = exp_args.clone();\n+    assert!(convert_message_format_to_rustfmt_args(\"human\", &mut act_args).is_ok());\n+    assert_eq!(act_args, exp_args);\n+}\n+\n+#[test]\n+fn short_message_format() {\n+    let mut args = vec![String::from(\"--check\")];\n+    assert!(convert_message_format_to_rustfmt_args(\"short\", &mut args).is_ok());\n+    assert_eq!(args, vec![String::from(\"--check\"), String::from(\"-l\")]);\n+}\n+\n+#[test]\n+fn short_message_format_included_short_list_files_flag() {\n+    let mut args = vec![String::from(\"--check\"), String::from(\"-l\")];\n+    assert!(convert_message_format_to_rustfmt_args(\"short\", &mut args).is_ok());\n+    assert_eq!(args, vec![String::from(\"--check\"), String::from(\"-l\")]);\n+}\n+\n+#[test]\n+fn short_message_format_included_long_list_files_flag() {\n+    let mut args = vec![String::from(\"--check\"), String::from(\"--files-with-diff\")];\n+    assert!(convert_message_format_to_rustfmt_args(\"short\", &mut args).is_ok());\n+    assert_eq!(\n+        args,\n+        vec![String::from(\"--check\"), String::from(\"--files-with-diff\")]\n+    );\n+}"}, {"sha": "360503632c7ed2ce2a42529a2e22265f2588fbd2", "filename": "src/cargo-fmt/test/mod.rs", "status": "added", "additions": 137, "deletions": 0, "changes": 137, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/src%2Fcargo-fmt%2Ftest%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/src%2Fcargo-fmt%2Ftest%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcargo-fmt%2Ftest%2Fmod.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,137 @@\n+use super::*;\n+\n+mod message_format;\n+mod targets;\n+\n+#[test]\n+fn default_options() {\n+    let empty: Vec<String> = vec![];\n+    let o = Opts::from_iter(&empty);\n+    assert_eq!(false, o.quiet);\n+    assert_eq!(false, o.verbose);\n+    assert_eq!(false, o.version);\n+    assert_eq!(false, o.check);\n+    assert_eq!(empty, o.packages);\n+    assert_eq!(empty, o.rustfmt_options);\n+    assert_eq!(false, o.format_all);\n+    assert_eq!(None, o.manifest_path);\n+    assert_eq!(None, o.message_format);\n+}\n+\n+#[test]\n+fn good_options() {\n+    let o = Opts::from_iter(&[\n+        \"test\",\n+        \"-q\",\n+        \"-p\",\n+        \"p1\",\n+        \"-p\",\n+        \"p2\",\n+        \"--message-format\",\n+        \"short\",\n+        \"--check\",\n+        \"--\",\n+        \"--edition\",\n+        \"2018\",\n+    ]);\n+    assert_eq!(true, o.quiet);\n+    assert_eq!(false, o.verbose);\n+    assert_eq!(false, o.version);\n+    assert_eq!(true, o.check);\n+    assert_eq!(vec![\"p1\", \"p2\"], o.packages);\n+    assert_eq!(vec![\"--edition\", \"2018\"], o.rustfmt_options);\n+    assert_eq!(false, o.format_all);\n+    assert_eq!(Some(String::from(\"short\")), o.message_format);\n+}\n+\n+#[test]\n+fn unexpected_option() {\n+    assert!(\n+        Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"unexpected\"])\n+            .is_err()\n+    );\n+}\n+\n+#[test]\n+fn unexpected_flag() {\n+    assert!(\n+        Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"--flag\"])\n+            .is_err()\n+    );\n+}\n+\n+#[test]\n+fn mandatory_separator() {\n+    assert!(\n+        Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"--emit\"])\n+            .is_err()\n+    );\n+    assert!(\n+        !Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"--\", \"--emit\"])\n+            .is_err()\n+    );\n+}\n+\n+#[test]\n+fn multiple_packages_one_by_one() {\n+    let o = Opts::from_iter(&[\n+        \"test\",\n+        \"-p\",\n+        \"package1\",\n+        \"--package\",\n+        \"package2\",\n+        \"-p\",\n+        \"package3\",\n+    ]);\n+    assert_eq!(3, o.packages.len());\n+}\n+\n+#[test]\n+fn multiple_packages_grouped() {\n+    let o = Opts::from_iter(&[\n+        \"test\",\n+        \"--package\",\n+        \"package1\",\n+        \"package2\",\n+        \"-p\",\n+        \"package3\",\n+        \"package4\",\n+    ]);\n+    assert_eq!(4, o.packages.len());\n+}\n+\n+#[test]\n+fn empty_packages_1() {\n+    assert!(Opts::clap().get_matches_from_safe(&[\"test\", \"-p\"]).is_err());\n+}\n+\n+#[test]\n+fn empty_packages_2() {\n+    assert!(\n+        Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"-p\", \"--\", \"--check\"])\n+            .is_err()\n+    );\n+}\n+\n+#[test]\n+fn empty_packages_3() {\n+    assert!(\n+        Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"-p\", \"--verbose\"])\n+            .is_err()\n+    );\n+}\n+\n+#[test]\n+fn empty_packages_4() {\n+    assert!(\n+        Opts::clap()\n+            .get_matches_from_safe(&[\"test\", \"-p\", \"--check\"])\n+            .is_err()\n+    );\n+}"}, {"sha": "b7e7fabdf7156e5e8a1587bc0f168791e7478002", "filename": "src/cargo-fmt/test/targets.rs", "status": "added", "additions": 134, "deletions": 0, "changes": 134, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/src%2Fcargo-fmt%2Ftest%2Ftargets.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/src%2Fcargo-fmt%2Ftest%2Ftargets.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Fcargo-fmt%2Ftest%2Ftargets.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,134 @@\n+use super::*;\n+\n+struct ExpTarget {\n+    path: &'static str,\n+    edition: &'static str,\n+    kind: &'static str,\n+}\n+\n+mod all_targets {\n+    use super::*;\n+\n+    fn assert_correct_targets_loaded(\n+        manifest_suffix: &str,\n+        source_root: &str,\n+        exp_targets: &[ExpTarget],\n+        exp_num_targets: usize,\n+    ) {\n+        let root_path = Path::new(\"tests/cargo-fmt/source\").join(source_root);\n+        let get_path = |exp: &str| PathBuf::from(&root_path).join(exp).canonicalize().unwrap();\n+        let manifest_path = Path::new(&root_path).join(manifest_suffix);\n+        let targets = get_targets(&CargoFmtStrategy::All, Some(manifest_path.as_path()))\n+            .expect(\"Targets should have been loaded\");\n+\n+        assert_eq!(targets.len(), exp_num_targets);\n+\n+        for target in exp_targets {\n+            assert!(targets.contains(&Target {\n+                path: get_path(target.path),\n+                edition: target.edition.to_owned(),\n+                kind: target.kind.to_owned(),\n+            }));\n+        }\n+    }\n+\n+    mod different_crate_and_dir_names {\n+        use super::*;\n+\n+        fn assert_correct_targets_loaded(manifest_suffix: &str) {\n+            let exp_targets = vec![\n+                ExpTarget {\n+                    path: \"dependency-dir-name/subdep-dir-name/src/lib.rs\",\n+                    edition: \"2018\",\n+                    kind: \"lib\",\n+                },\n+                ExpTarget {\n+                    path: \"dependency-dir-name/src/lib.rs\",\n+                    edition: \"2018\",\n+                    kind: \"lib\",\n+                },\n+                ExpTarget {\n+                    path: \"src/main.rs\",\n+                    edition: \"2018\",\n+                    kind: \"main\",\n+                },\n+            ];\n+            super::assert_correct_targets_loaded(\n+                manifest_suffix,\n+                \"divergent-crate-dir-names\",\n+                &exp_targets,\n+                3,\n+            );\n+        }\n+\n+        #[test]\n+        fn correct_targets_from_root() {\n+            assert_correct_targets_loaded(\"Cargo.toml\");\n+        }\n+\n+        #[test]\n+        fn correct_targets_from_sub_local_dep() {\n+            assert_correct_targets_loaded(\"dependency-dir-name/Cargo.toml\");\n+        }\n+    }\n+\n+    mod workspaces {\n+        use super::*;\n+\n+        fn assert_correct_targets_loaded(manifest_suffix: &str) {\n+            let exp_targets = vec![\n+                ExpTarget {\n+                    path: \"ws/a/src/main.rs\",\n+                    edition: \"2018\",\n+                    kind: \"bin\",\n+                },\n+                ExpTarget {\n+                    path: \"ws/b/src/main.rs\",\n+                    edition: \"2018\",\n+                    kind: \"bin\",\n+                },\n+                ExpTarget {\n+                    path: \"ws/c/src/lib.rs\",\n+                    edition: \"2018\",\n+                    kind: \"lib\",\n+                },\n+                ExpTarget {\n+                    path: \"ws/a/d/src/lib.rs\",\n+                    edition: \"2018\",\n+                    kind: \"lib\",\n+                },\n+                ExpTarget {\n+                    path: \"e/src/main.rs\",\n+                    edition: \"2018\",\n+                    kind: \"main\",\n+                },\n+                ExpTarget {\n+                    path: \"ws/a/d/f/src/lib.rs\",\n+                    edition: \"2018\",\n+                    kind: \"lib\",\n+                },\n+            ];\n+            super::assert_correct_targets_loaded(\n+                manifest_suffix,\n+                \"workspaces/path-dep-above\",\n+                &exp_targets,\n+                6,\n+            );\n+        }\n+\n+        #[test]\n+        fn includes_outside_workspace_deps() {\n+            assert_correct_targets_loaded(\"ws/Cargo.toml\");\n+        }\n+\n+        #[test]\n+        fn includes_workspace_from_dep_above() {\n+            assert_correct_targets_loaded(\"e/Cargo.toml\");\n+        }\n+\n+        #[test]\n+        fn includes_all_packages_from_workspace_subdir() {\n+            assert_correct_targets_loaded(\"ws/a/d/f/Cargo.toml\");\n+        }\n+    }\n+}"}, {"sha": "315364a64573a9c8b62d43ef098c3e1e274f3a9f", "filename": "tests/cargo-fmt/source/divergent-crate-dir-names/Cargo.toml", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,13 @@\n+[package]\n+name = \"cargo-fmt-test\"\n+version = \"0.1.0\"\n+authors = [\"calebcartwright\"]\n+edition = \"2018\"\n+\n+[dependencies]\n+indexmap = \"1.0.2\"\n+\n+[workspace]\n+members = [\n+  \"dependency-dir-name\",\n+]\n\\ No newline at end of file"}, {"sha": "4493882bf40a2ebb4402412295809bc3c114fceb", "filename": "tests/cargo-fmt/source/divergent-crate-dir-names/dependency-dir-name/Cargo.toml", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,10 @@\n+[package]\n+name = \"dependency-crate-name\"\n+version = \"0.1.0\"\n+authors = [\"calebcartwright\"]\n+edition = \"2018\"\n+\n+[dependencies]\n+subdep-crate-name = { path = \"subdep-dir-name\" }\n+indexmap = \"1.0.2\"\n+rusty-hook = \"0.8.4\"\n\\ No newline at end of file"}, {"sha": "e93b18d725b9d3809dbedb15c14f530975233df3", "filename": "tests/cargo-fmt/source/divergent-crate-dir-names/dependency-dir-name/src/lib.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsrc%2Flib.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,7 @@\n+#[cfg(test)]\n+mod tests {\n+#[test]\n+fn it_works() {\n+    assert_eq!(2 + 2, 4);\n+}\n+}"}, {"sha": "7dad09f4077b2e0d5746ce7b8c45559439195951", "filename": "tests/cargo-fmt/source/divergent-crate-dir-names/dependency-dir-name/subdep-dir-name/Cargo.toml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsubdep-dir-name%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsubdep-dir-name%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsubdep-dir-name%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,7 @@\n+[package]\n+name = \"subdep-crate-name\"\n+version = \"0.1.0\"\n+authors = [\"calebcartwright\"]\n+edition = \"2018\"\n+\n+[dependencies]"}, {"sha": "1c08c1c4fd3869b3ec1f5a75e9eff15a1760e1d8", "filename": "tests/cargo-fmt/source/divergent-crate-dir-names/dependency-dir-name/subdep-dir-name/src/lib.rs", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsubdep-dir-name%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsubdep-dir-name%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fdependency-dir-name%2Fsubdep-dir-name%2Fsrc%2Flib.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,7 @@\n+#[cfg(test)]\n+mod tests {\n+#[test]\n+fn sub_test_that_works() {\n+    assert_eq!(3 + 3, 6);\n+}\n+ }"}, {"sha": "f5c339a8dd1414567a06d41d0ba1786b66c3d815", "filename": "tests/cargo-fmt/source/divergent-crate-dir-names/src/main.rs", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fdivergent-crate-dir-names%2Fsrc%2Fmain.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,3 @@\n+fn main() {\n+println!(\"Hello, world!\");\n+}"}, {"sha": "df1886c82be31adc944051011e6360bce201907a", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/e/Cargo.toml", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fe%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fe%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fe%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,6 @@\n+[package]\n+name = \"e\"\n+version = \"0.1.0\"\n+edition = \"2018\"\n+[dependencies]\n+c = { path = \"../ws/c\" }"}, {"sha": "1c26a3895f37e165af2d84d8fa3e07a170e9ea4f", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/e/src/main.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fe%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fe%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fe%2Fsrc%2Fmain.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1 @@\n+struct E{   }"}, {"sha": "202739b613b8f64ce002bf46ddb386d942c4fbef", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/Cargo.toml", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,5 @@\n+[workspace]\n+members = [\n+    \"a\",\n+    \"b\"\n+] \n\\ No newline at end of file"}, {"sha": "712a113448fb1add7e9c0cefdabcf63558c4b8b6", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/a/Cargo.toml", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,6 @@\n+[package]\n+name = \"a\"\n+version = \"0.1.0\"\n+edition = \"2018\"\n+[dependencies]\n+d = { path = \"./d\" }"}, {"sha": "fb0f06fe5fce1bd460e8f049fcdba683e24a9279", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/a/d/Cargo.toml", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,7 @@\n+[package]\n+name = \"d\"\n+version = \"0.1.0\"\n+edition = \"2018\"\n+[dependencies]\n+e = { path = \"../../../e\" }\n+f = { path = \"f\" }"}, {"sha": "5c4fa5617886f9ed0902a4b4fa64cd16adcdd304", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/a/d/f/Cargo.toml", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Ff%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Ff%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Ff%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,4 @@\n+[package]\n+name = \"f\"\n+version = \"0.1.0\"\n+edition = \"2018\""}, {"sha": "c655c4d5e1a82205b657253c19336192e8be4539", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/a/d/f/src/lib.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Ff%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Ff%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Ff%2Fsrc%2Flib.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1 @@\n+struct F{   }\n\\ No newline at end of file"}, {"sha": "04e6e4cb94022970de8349030fab8064d8cd2c2e", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/a/d/src/lib.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fd%2Fsrc%2Flib.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1 @@\n+struct D{   }\n\\ No newline at end of file"}, {"sha": "04e6e4cb94022970de8349030fab8064d8cd2c2e", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/a/src/main.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fa%2Fsrc%2Fmain.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1 @@\n+struct D{   }\n\\ No newline at end of file"}, {"sha": "47a24ff4f275398dbe9a1ad24f951f9539050445", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/b/Cargo.toml", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fb%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fb%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fb%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,6 @@\n+[package]\n+name = \"b\"\n+version = \"0.1.0\"\n+edition = \"2018\"\n+[dependencies]\n+c = { path = \"../c\" }"}, {"sha": "4833bbc69b48ebe1c36055cf9579fb592b7a2bbb", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/b/src/main.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fb%2Fsrc%2Fmain.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fb%2Fsrc%2Fmain.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fb%2Fsrc%2Fmain.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1 @@\n+struct B{   }\n\\ No newline at end of file"}, {"sha": "49fa6c395eb6cdeb3c90ea73266a7ff5a513ffab", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/c/Cargo.toml", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fc%2FCargo.toml", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fc%2FCargo.toml", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fc%2FCargo.toml?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1,4 @@\n+[package]\n+name = \"c\"\n+version = \"0.1.0\"\n+edition = \"2018\""}, {"sha": "1245ac91d60a4ed8141ed4bc435d57189a5da0e4", "filename": "tests/cargo-fmt/source/workspaces/path-dep-above/ws/c/src/lib.rs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fc%2Fsrc%2Flib.rs", "raw_url": "https://github.com/rust-lang/rust/raw/7f6229b9aada69389be4ead0ecbec8aed5892a24/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fc%2Fsrc%2Flib.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/tests%2Fcargo-fmt%2Fsource%2Fworkspaces%2Fpath-dep-above%2Fws%2Fc%2Fsrc%2Flib.rs?ref=7f6229b9aada69389be4ead0ecbec8aed5892a24", "patch": "@@ -0,0 +1 @@\n+struct C{   }\n\\ No newline at end of file"}]}