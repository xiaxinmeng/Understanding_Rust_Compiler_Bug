{"sha": "ad925955d889c791b81b00e5a0f1516dceb8684a", "node_id": "MDY6Q29tbWl0NzI0NzEyOmFkOTI1OTU1ZDg4OWM3OTFiODFiMDBlNWEwZjE1MTZkY2ViODY4NGE=", "commit": {"author": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-08-05T15:57:39Z"}, "committer": {"name": "Patrick Walton", "email": "pcwalton@mimiga.net", "date": "2011-08-05T16:25:27Z"}, "message": "build: Don't error out if clang is too old. Instead, build with GCC.", "tree": {"sha": "9230a3c4a944f26e6ef45a8e7453bcc3268ef949", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/9230a3c4a944f26e6ef45a8e7453bcc3268ef949"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/ad925955d889c791b81b00e5a0f1516dceb8684a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/ad925955d889c791b81b00e5a0f1516dceb8684a", "html_url": "https://github.com/rust-lang/rust/commit/ad925955d889c791b81b00e5a0f1516dceb8684a", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/ad925955d889c791b81b00e5a0f1516dceb8684a/comments", "author": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pcwalton", "id": 157897, "node_id": "MDQ6VXNlcjE1Nzg5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/157897?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pcwalton", "html_url": "https://github.com/pcwalton", "followers_url": "https://api.github.com/users/pcwalton/followers", "following_url": "https://api.github.com/users/pcwalton/following{/other_user}", "gists_url": "https://api.github.com/users/pcwalton/gists{/gist_id}", "starred_url": "https://api.github.com/users/pcwalton/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pcwalton/subscriptions", "organizations_url": "https://api.github.com/users/pcwalton/orgs", "repos_url": "https://api.github.com/users/pcwalton/repos", "events_url": "https://api.github.com/users/pcwalton/events{/privacy}", "received_events_url": "https://api.github.com/users/pcwalton/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "684df97ef00116ad2fb763e43508673776e992de", "url": "https://api.github.com/repos/rust-lang/rust/commits/684df97ef00116ad2fb763e43508673776e992de", "html_url": "https://github.com/rust-lang/rust/commit/684df97ef00116ad2fb763e43508673776e992de"}], "stats": {"total": 14, "additions": 9, "deletions": 5}, "files": [{"sha": "fc7a6ace83257cd7417adce8a0a143d640b10572", "filename": "configure", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ad925955d889c791b81b00e5a0f1516dceb8684a/configure", "raw_url": "https://github.com/rust-lang/rust/raw/ad925955d889c791b81b00e5a0f1516dceb8684a/configure", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/configure?ref=ad925955d889c791b81b00e5a0f1516dceb8684a", "patch": "@@ -287,12 +287,17 @@ then\n     case $CFG_CLANG_VERSION in\n         (3.0svn | 3.0)\n         step_msg \"found ok version of CLANG: $CFG_CLANG_VERSION\"\n+        CFG_C_COMPILER=\"clang\"\n         ;;\n         (*)\n-        err \"bad CLANG version: $CFG_CLANG_VERSION, need >=3.0svn\"\n+        msg \"bad CLANG version: $CFG_CLANG_VERSION, need >=3.0svn; disabling\"\n+        CFG_C_COMPILER=\"gcc\"\n         ;;\n     esac\n+else\n+    CFG_C_COMPILER=\"gcc\"\n fi\n+putvar CFG_C_COMPILER\n \n putvar CFG_LLVM_ROOT\n putvar CFG_LLVM_INCDIR"}, {"sha": "5f5c01616efd12bde1da3d8b28e16232920086c9", "filename": "mk/platform.mk", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/rust-lang/rust/blob/ad925955d889c791b81b00e5a0f1516dceb8684a/mk%2Fplatform.mk", "raw_url": "https://github.com/rust-lang/rust/raw/ad925955d889c791b81b00e5a0f1516dceb8684a/mk%2Fplatform.mk", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/mk%2Fplatform.mk?ref=ad925955d889c791b81b00e5a0f1516dceb8684a", "patch": "@@ -135,8 +135,8 @@ ifdef CFG_WINDOWSY\n endif\n \n \n-ifdef CFG_CLANG\n-  CFG_INFO := $(info cfg: using clang)\n+CFG_INFO := $(info cfg: using $(CFG_C_COMPILER))\n+ifeq ($(CFG_C_COMPILER),clang)\n   CFG_GCCISH_CFLAGS += -Wall -Werror -fno-rtti -fno-exceptions -g\n   CFG_GCCISH_LINK_FLAGS += -g\n   CFG_COMPILE_C = $(CFG_GCCISH_CROSS)clang++ $(CFG_GCCISH_CFLAGS) \\\n@@ -146,8 +146,7 @@ ifdef CFG_CLANG\n   CFG_LINK_C = $(CFG_GCCISH_CROSS)clang++ $(CFG_GCCISH_LINK_FLAGS) -o $(1) \\\n     $(CFG_GCCISH_DEF_FLAG)$(3) $(2)\n else\n-ifdef CFG_GCC\n-  CFG_INFO := $(info cfg: using gcc)\n+ifeq ($(CFG_C_COMPILER),gcc)\n   CFG_GCCISH_CFLAGS += -Wall -Werror -fno-rtti -fno-exceptions -g\n   CFG_GCCISH_LINK_FLAGS += -g\n   CFG_COMPILE_C = $(CFG_GCCISH_CROSS)g++ $(CFG_GCCISH_CFLAGS) \\"}]}