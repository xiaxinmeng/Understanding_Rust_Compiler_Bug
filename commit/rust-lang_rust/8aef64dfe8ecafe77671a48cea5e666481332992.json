{"sha": "8aef64dfe8ecafe77671a48cea5e666481332992", "node_id": "MDY6Q29tbWl0NzI0NzEyOjhhZWY2NGRmZThlY2FmZTc3NjcxYTQ4Y2VhNWU2NjY0ODEzMzI5OTI=", "commit": {"author": {"name": "Enrico Schmitz", "email": "enrico@schmitz.link", "date": "2017-03-31T21:46:08Z"}, "committer": {"name": "Enrico Schmitz", "email": "es@mdtm.de", "date": "2017-03-31T21:46:08Z"}, "message": "Fix src/needless_bool.rs by using ExprBlock(block) = then", "tree": {"sha": "f2a5a6e88d1afb590a70605c376e858c4bc2f29d", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/f2a5a6e88d1afb590a70605c376e858c4bc2f29d"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/8aef64dfe8ecafe77671a48cea5e666481332992", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/8aef64dfe8ecafe77671a48cea5e666481332992", "html_url": "https://github.com/rust-lang/rust/commit/8aef64dfe8ecafe77671a48cea5e666481332992", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/8aef64dfe8ecafe77671a48cea5e666481332992/comments", "author": {"login": "ensch", "id": 180274, "node_id": "MDQ6VXNlcjE4MDI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/180274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ensch", "html_url": "https://github.com/ensch", "followers_url": "https://api.github.com/users/ensch/followers", "following_url": "https://api.github.com/users/ensch/following{/other_user}", "gists_url": "https://api.github.com/users/ensch/gists{/gist_id}", "starred_url": "https://api.github.com/users/ensch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ensch/subscriptions", "organizations_url": "https://api.github.com/users/ensch/orgs", "repos_url": "https://api.github.com/users/ensch/repos", "events_url": "https://api.github.com/users/ensch/events{/privacy}", "received_events_url": "https://api.github.com/users/ensch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ensch", "id": 180274, "node_id": "MDQ6VXNlcjE4MDI3NA==", "avatar_url": "https://avatars.githubusercontent.com/u/180274?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ensch", "html_url": "https://github.com/ensch", "followers_url": "https://api.github.com/users/ensch/followers", "following_url": "https://api.github.com/users/ensch/following{/other_user}", "gists_url": "https://api.github.com/users/ensch/gists{/gist_id}", "starred_url": "https://api.github.com/users/ensch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ensch/subscriptions", "organizations_url": "https://api.github.com/users/ensch/orgs", "repos_url": "https://api.github.com/users/ensch/repos", "events_url": "https://api.github.com/users/ensch/events{/privacy}", "received_events_url": "https://api.github.com/users/ensch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8297c19fccb101f19999dbe6b7a52d1600a85df3", "url": "https://api.github.com/repos/rust-lang/rust/commits/8297c19fccb101f19999dbe6b7a52d1600a85df3", "html_url": "https://github.com/rust-lang/rust/commit/8297c19fccb101f19999dbe6b7a52d1600a85df3"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "412571cebf28f9cd908d6f849e11b083163fb328", "filename": "clippy_lints/src/let_if_seq.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/8aef64dfe8ecafe77671a48cea5e666481332992/clippy_lints%2Fsrc%2Flet_if_seq.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8aef64dfe8ecafe77671a48cea5e666481332992/clippy_lints%2Fsrc%2Flet_if_seq.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Flet_if_seq.rs?ref=8aef64dfe8ecafe77671a48cea5e666481332992", "patch": "@@ -69,9 +69,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for LetIfSeq {\n                 let hir::StmtExpr(ref if_, _) = expr.node,\n                 let hir::ExprIf(ref cond, ref then, ref else_) = if_.node,\n                 !used_in_expr(cx, def_id, cond),\n-                !used_in_expr(cx, def_id, &*then),\n                 let hir::ExprBlock(ref then) = then.node,\n                 let Some(value) = check_assign(cx, def_id, &*then),\n+                !used_in_expr(cx, def_id, value),\n             ], {\n                 let span = Span { lo: stmt.span.lo, hi: if_.span.hi, ctxt: NO_EXPANSION };\n "}, {"sha": "53b26fc1276955f7fd131586ab9ed7896f66d288", "filename": "clippy_lints/src/needless_bool.rs", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/rust-lang/rust/blob/8aef64dfe8ecafe77671a48cea5e666481332992/clippy_lints%2Fsrc%2Fneedless_bool.rs", "raw_url": "https://github.com/rust-lang/rust/raw/8aef64dfe8ecafe77671a48cea5e666481332992/clippy_lints%2Fsrc%2Fneedless_bool.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/clippy_lints%2Fsrc%2Fneedless_bool.rs?ref=8aef64dfe8ecafe77671a48cea5e666481332992", "patch": "@@ -76,7 +76,8 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NeedlessBool {\n                                    \"this if-then-else expression returns a bool literal\",\n                                    |db| { db.span_suggestion(e.span, \"you can reduce it to\", hint); });\n             };\n-            match (fetch_bool_expr(&**then_block), fetch_bool_expr(else_expr)) {\n+            if let ExprBlock(ref then_block) = then_block.node {\n+            match (fetch_bool_block(then_block), fetch_bool_expr(else_expr)) {\n                 (RetBool(true), RetBool(true)) |\n                 (Bool(true), Bool(true)) => {\n                     span_lint(cx,\n@@ -97,6 +98,9 @@ impl<'a, 'tcx> LateLintPass<'a, 'tcx> for NeedlessBool {\n                 (Bool(false), Bool(true)) => reduce(false, true),\n                 _ => (),\n             }\n+            } else {\n+                panic!(\"IfExpr 'then' node is not an ExprBlock\");\n+            }\n         }\n     }\n }"}]}