{"sha": "21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "node_id": "MDY6Q29tbWl0NzI0NzEyOjIxZDY3YzQ1YTNkMDMyYjNmMGQ0MjFlNmY4ODJmMTFlYTQzZDFmOWM=", "commit": {"author": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-10-21T00:21:16Z"}, "committer": {"name": "Vadim Petrochenkov", "email": "vadim.petrochenkov@gmail.com", "date": "2018-10-21T11:06:29Z"}, "message": "Fix a few tests with target-specific output\n\nEnable one fully ignored test", "tree": {"sha": "1056ff7db31d9e29e717227138364d5407ed7496", "url": "https://api.github.com/repos/rust-lang/rust/git/trees/1056ff7db31d9e29e717227138364d5407ed7496"}, "url": "https://api.github.com/repos/rust-lang/rust/git/commits/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/rust-lang/rust/commits/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "html_url": "https://github.com/rust-lang/rust/commit/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "comments_url": "https://api.github.com/repos/rust-lang/rust/commits/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/comments", "author": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "committer": {"login": "petrochenkov", "id": 5751617, "node_id": "MDQ6VXNlcjU3NTE2MTc=", "avatar_url": "https://avatars.githubusercontent.com/u/5751617?v=4", "gravatar_id": "", "url": "https://api.github.com/users/petrochenkov", "html_url": "https://github.com/petrochenkov", "followers_url": "https://api.github.com/users/petrochenkov/followers", "following_url": "https://api.github.com/users/petrochenkov/following{/other_user}", "gists_url": "https://api.github.com/users/petrochenkov/gists{/gist_id}", "starred_url": "https://api.github.com/users/petrochenkov/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/petrochenkov/subscriptions", "organizations_url": "https://api.github.com/users/petrochenkov/orgs", "repos_url": "https://api.github.com/users/petrochenkov/repos", "events_url": "https://api.github.com/users/petrochenkov/events{/privacy}", "received_events_url": "https://api.github.com/users/petrochenkov/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7977250fb4c4c939132c28efd5dc58213535c454", "url": "https://api.github.com/repos/rust-lang/rust/commits/7977250fb4c4c939132c28efd5dc58213535c454", "html_url": "https://github.com/rust-lang/rust/commit/7977250fb4c4c939132c28efd5dc58213535c454"}], "stats": {"total": 82, "additions": 51, "deletions": 31}, "files": [{"sha": "a4b8ab86f37f689c0571797d7718c7e75cedf1ab", "filename": "src/libsyntax/parse/mod.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Flibsyntax%2Fparse%2Fmod.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Flibsyntax%2Fparse%2Fmod.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Flibsyntax%2Fparse%2Fmod.rs?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -230,7 +230,7 @@ fn file_to_source_file(sess: &ParseSess, path: &Path, spanopt: Option<Span>)\n     match sess.source_map().load_file(path) {\n         Ok(source_file) => source_file,\n         Err(e) => {\n-            let msg = format!(\"couldn't read {:?}: {}\", path.display(), e);\n+            let msg = format!(\"couldn't read {}: {}\", path.display(), e);\n             match spanopt {\n                 Some(sp) => sess.span_diagnostic.span_fatal(sp, &msg).raise(),\n                 None => sess.span_diagnostic.fatal(&msg).raise()"}, {"sha": "3622d59a51479a8a3c5f44527dbb42ef7606fc5a", "filename": "src/test/ui/parser/issue-5806.rs", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fissue-5806.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fissue-5806.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-5806.rs?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -8,15 +8,11 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// ignore-windows\n-// ignore-freebsd\n-// ignore-openbsd\n-// ignore-netbsd\n-// ignore-bitrig\n-\n // compile-flags: -Z parse-only\n+// normalize-stderr-test: \"parser:.*\\(\" -> \"parser: $$ACCESS_DENIED_MSG (\"\n+// normalize-stderr-test: \"os error \\d+\" -> \"os error $$ACCESS_DENIED_CODE\"\n \n-#[path = \"../compile-fail\"]\n-mod foo; //~ ERROR: a directory\n+#[path = \"../parser\"]\n+mod foo; //~ ERROR couldn't read\n \n fn main() {}"}, {"sha": "63beed2873f7c334600cd69f8f8af26bc2d9bfb3", "filename": "src/test/ui/parser/issue-5806.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fissue-5806.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fissue-5806.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fissue-5806.stderr?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -0,0 +1,8 @@\n+error: couldn't read $DIR/../parser: $ACCESS_DENIED_MSG (os error $ACCESS_DENIED_CODE)\n+  --> $DIR/issue-5806.rs:16:5\n+   |\n+LL | mod foo; //~ ERROR couldn't read\n+   |     ^^^\n+\n+error: aborting due to previous error\n+"}, {"sha": "59b2ebe9f863bab6f920f850d5d850276b106f4d", "filename": "src/test/ui/parser/mod_file_not_exist.rs", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist.rs?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -9,7 +9,6 @@\n // except according to those terms.\n \n // ignore-windows\n-\n // compile-flags: -Z parse-only\n \n mod not_a_real_file; //~ ERROR file not found for module `not_a_real_file`"}, {"sha": "a745fc2847baeab91e58767190bf409148a69d79", "filename": "src/test/ui/parser/mod_file_not_exist.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist.stderr?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -0,0 +1,11 @@\n+error[E0583]: file not found for module `not_a_real_file`\n+  --> $DIR/mod_file_not_exist.rs:14:5\n+   |\n+LL | mod not_a_real_file; //~ ERROR file not found for module `not_a_real_file`\n+   |     ^^^^^^^^^^^^^^^\n+   |\n+   = help: name the file either not_a_real_file.rs or not_a_real_file/mod.rs inside the directory \"$DIR\"\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0583`."}, {"sha": "6ee6792a8a2088490f11fa56c68a0ef6c3eb8bff", "filename": "src/test/ui/parser/mod_file_not_exist_windows.rs", "status": "modified", "additions": 1, "deletions": 15, "changes": 16, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist_windows.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist_windows.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist_windows.rs?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -8,21 +8,7 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// ignore-android\n-// ignore-bitrig\n-// ignore-cloudabi\n-// ignore-dragonfly\n-// ignore-emscripten\n-// ignore-freebsd\n-// ignore-gnu\n-// ignore-haiku\n-// ignore-ios\n-// ignore-linux\n-// ignore-macos\n-// ignore-netbsd\n-// ignore-openbsd\n-// ignore-solaris\n-\n+// only-windows\n // compile-flags: -Z parse-only\n \n mod not_a_real_file; //~ ERROR file not found for module `not_a_real_file`"}, {"sha": "695038f8e4dba2c26c6a959cdf4c0a3adb10c11b", "filename": "src/test/ui/parser/mod_file_not_exist_windows.stderr", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist_windows.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist_windows.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fmod_file_not_exist_windows.stderr?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -0,0 +1,11 @@\n+error[E0583]: file not found for module `not_a_real_file`\n+  --> $DIR/mod_file_not_exist_windows.rs:14:5\n+   |\n+LL | mod not_a_real_file; //~ ERROR file not found for module `not_a_real_file`\n+   |     ^^^^^^^^^^^^^^^\n+   |\n+   = help: name the file either not_a_real_file.rs or not_a_real_file/mod.rs inside the directory \"$DIR\"\n+\n+error: aborting due to previous error\n+\n+For more information about this error, try `rustc --explain E0583`."}, {"sha": "03aa8edc22924a7ea6c32e162223267eb5c3f9ca", "filename": "src/test/ui/parser/mod_file_with_path_attr.rs", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_with_path_attr.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_with_path_attr.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fmod_file_with_path_attr.rs?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -9,6 +9,7 @@\n // except according to those terms.\n \n // compile-flags: -Z parse-only\n+// normalize-stderr-test: \"not_a_real_file.rs:.*\\(\" -> \"not_a_real_file.rs: $$FILE_NOT_FOUND_MSG (\"\n \n #[path = \"not_a_real_file.rs\"]\n mod m; //~ ERROR not_a_real_file.rs"}, {"sha": "f4247b60f684d1098e62aa774cd6f93e05665b16", "filename": "src/test/ui/parser/mod_file_with_path_attr.stderr", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_with_path_attr.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fmod_file_with_path_attr.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fmod_file_with_path_attr.stderr?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -1,5 +1,5 @@\n-error: couldn't read \"C:/msys64/home/we/rust/src/test/ui/parser/not_a_real_file.rs\": The system cannot find the file specified. (os error 2)\n-  --> $DIR/mod_file_with_path_attr.rs:14:5\n+error: couldn't read $DIR/not_a_real_file.rs: $FILE_NOT_FOUND_MSG (os error 2)\n+  --> $DIR/mod_file_with_path_attr.rs:15:5\n    |\n LL | mod m; //~ ERROR not_a_real_file.rs\n    |     ^"}, {"sha": "0ff0f9bbf87ca3b8c07c17af702f56ad7f1ac0a7", "filename": "src/test/ui/parser/regions-out-of-scope-slice.rs", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fregions-out-of-scope-slice.rs", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fregions-out-of-scope-slice.rs", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fregions-out-of-scope-slice.rs?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -8,17 +8,17 @@\n // option. This file may not be copied, modified, or distributed\n // except according to those terms.\n \n-// compile-flags: -Z parse-only\n+// blk region isn't supported in the front-end\n \n-// ignore-test blk region isn't supported in the front-end\n+// compile-flags: -Z parse-only\n \n fn foo(cond: bool) {\n     // Here we will infer a type that uses the\n     // region of the if stmt then block, but in the scope:\n-    let mut x; //~ ERROR foo\n+    let mut x;\n \n     if cond {\n-        x = &'blk [1,2,3];\n+        x = &'blk [1,2,3]; //~ ERROR expected `:`, found `[`\n     }\n }\n "}, {"sha": "2eabc59882ac792da86a9d9d1bde2aa9b7f5e9d2", "filename": "src/test/ui/parser/regions-out-of-scope-slice.stderr", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/rust-lang/rust/blob/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fregions-out-of-scope-slice.stderr", "raw_url": "https://github.com/rust-lang/rust/raw/21d67c45a3d032b3f0d421e6f882f11ea43d1f9c/src%2Ftest%2Fui%2Fparser%2Fregions-out-of-scope-slice.stderr", "contents_url": "https://api.github.com/repos/rust-lang/rust/contents/src%2Ftest%2Fui%2Fparser%2Fregions-out-of-scope-slice.stderr?ref=21d67c45a3d032b3f0d421e6f882f11ea43d1f9c", "patch": "@@ -0,0 +1,8 @@\n+error: expected `:`, found `[`\n+  --> $DIR/regions-out-of-scope-slice.rs:21:19\n+   |\n+LL |         x = &'blk [1,2,3]; //~ ERROR expected `:`, found `[`\n+   |                   ^ expected `:`\n+\n+error: aborting due to previous error\n+"}]}