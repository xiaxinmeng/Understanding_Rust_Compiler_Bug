{"sha": "99eaf8d457598be158a5d4f79fe8e9655e74b6b8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTllYWY4ZDQ1NzU5OGJlMTU4YTVkNGY3OWZlOGU5NjU1ZTc0YjZiOA==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@cygnus.com", "date": "2000-09-29T20:14:53Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2000-09-29T20:14:53Z"}, "message": "parse.y (maybe_yank_clinit): Also keep <clinit> if its body contains something else than MODIFY_EXPR.\n\n2000-09-29  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n\n\t* parse.y (maybe_yank_clinit): Also keep <clinit> if its body\n\tcontains something else than MODIFY_EXPR.\n\n(http://gcc.gnu.org/ml/gcc-patches/2000-09/msg01141.html)\n\nFrom-SVN: r36670", "tree": {"sha": "8f7b156304d9631af57eecd52522716b8769f46c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f7b156304d9631af57eecd52522716b8769f46c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/99eaf8d457598be158a5d4f79fe8e9655e74b6b8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99eaf8d457598be158a5d4f79fe8e9655e74b6b8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99eaf8d457598be158a5d4f79fe8e9655e74b6b8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99eaf8d457598be158a5d4f79fe8e9655e74b6b8/comments", "author": null, "committer": null, "parents": [{"sha": "a1c63101c48412ffcac56f9c4bb32383f86c3c32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a1c63101c48412ffcac56f9c4bb32383f86c3c32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a1c63101c48412ffcac56f9c4bb32383f86c3c32"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "632707b28f12da325a5fcf313d43b3d5d128956a", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99eaf8d457598be158a5d4f79fe8e9655e74b6b8/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99eaf8d457598be158a5d4f79fe8e9655e74b6b8/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=99eaf8d457598be158a5d4f79fe8e9655e74b6b8", "patch": "@@ -1,3 +1,8 @@\n+2000-09-29  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* parse.y (maybe_yank_clinit): Also keep <clinit> if its body\n+\tcontains something else than MODIFY_EXPR.\n+\n 2000-09-23  Mark Mitchell  <mark@codesourcery.com>\n \n \t* Make-lang.in (JAVA_SRCS): Include java-tree.h."}, {"sha": "e6aeb32217fa2cd18fc8acdf867ed8e9a6c7fa98", "filename": "gcc/java/parse.y", "status": "modified", "additions": 30, "deletions": 1, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/99eaf8d457598be158a5d4f79fe8e9655e74b6b8/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/99eaf8d457598be158a5d4f79fe8e9655e74b6b8/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=99eaf8d457598be158a5d4f79fe8e9655e74b6b8", "patch": "@@ -7599,6 +7599,7 @@ maybe_yank_clinit (mdecl)\n {\n   tree type, current;\n   tree fbody, bbody;\n+  int found = 0;\n   \n   if (!DECL_CLINIT_P (mdecl))\n     return 0;\n@@ -7646,7 +7647,35 @@ maybe_yank_clinit (mdecl)\n \tbreak;\n     }\n \n-  if (current)\n+  /* Now we analyze the method body and look for something that\n+     isn't a MODIFY_EXPR */\n+  if (bbody == empty_stmt_node)\n+    bbody = NULL_TREE;\n+  while (bbody)\n+    switch (TREE_CODE (bbody))\n+      {\n+      case BLOCK:\n+\tbbody = BLOCK_EXPR_BODY (bbody);\n+\tbreak;\n+\t\n+      case EXPR_WITH_FILE_LOCATION:\n+\tbbody = EXPR_WFL_NODE (bbody);\n+\tbreak;\n+\t\n+      case COMPOUND_EXPR:\n+\tbbody = TREE_OPERAND (bbody, 0);\n+\tbreak;\n+\t\n+      case MODIFY_EXPR:\n+\tbbody = NULL_TREE;\n+\tbreak;\n+\n+      default:\n+\tbbody = NULL_TREE;\n+\tfound = 1;\n+      }\n+\n+  if (current || found)\n     return 0;\n \n   /* Get rid of <clinit> in the class' list of methods */"}]}