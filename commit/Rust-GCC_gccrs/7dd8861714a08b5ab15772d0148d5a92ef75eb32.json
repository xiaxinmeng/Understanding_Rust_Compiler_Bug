{"sha": "7dd8861714a08b5ab15772d0148d5a92ef75eb32", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RkODg2MTcxNGEwOGI1YWIxNTc3MmQwMTQ4ZDVhOTJlZjc1ZWIzMg==", "commit": {"author": {"name": "Donn Terry", "email": "donn@interix.com", "date": "1999-04-26T00:40:51Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1999-04-26T00:40:51Z"}, "message": "configure.in (alloca detection): Handle alloca directly for interix.\n\n        * configure.in (alloca detection): Handle alloca directly for interix.\n        * configure: Rebuilt.\n\nFrom-SVN: r26635", "tree": {"sha": "14ec38e32af7c78c7fdd8b489305ec0f717c4bec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/14ec38e32af7c78c7fdd8b489305ec0f717c4bec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dd8861714a08b5ab15772d0148d5a92ef75eb32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dd8861714a08b5ab15772d0148d5a92ef75eb32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dd8861714a08b5ab15772d0148d5a92ef75eb32", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dd8861714a08b5ab15772d0148d5a92ef75eb32/comments", "author": null, "committer": null, "parents": [{"sha": "ab40f612254bcfadf24f4eed82aabc17fdb86cd1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab40f612254bcfadf24f4eed82aabc17fdb86cd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab40f612254bcfadf24f4eed82aabc17fdb86cd1"}], "stats": {"total": 127, "additions": 87, "deletions": 40}, "files": [{"sha": "663d23062080e3d33535197adf7da558783301d9", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd8861714a08b5ab15772d0148d5a92ef75eb32/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd8861714a08b5ab15772d0148d5a92ef75eb32/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=7dd8861714a08b5ab15772d0148d5a92ef75eb32", "patch": "@@ -1,3 +1,8 @@\n+Mon Apr 26 01:36:06 1999  Donn Terry (donn@interix.com)\n+\n+\t* configure.in (alloca detection): Handle alloca directly for interix.\n+\t* configure: Rebuilt.\n+\n Sun Apr 25 01:18:21 1999  Mumit Khan  <khan@xraylith.wisc.edu>\n \n \t* choose-temp.c (DIR_SEPARATOR): Use '\\\\' only for native windows32."}, {"sha": "c55721e9a9175f12432e02da27d5c4b19b5b024b", "filename": "libiberty/configure", "status": "modified", "additions": 60, "deletions": 39, "changes": 99, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd8861714a08b5ab15772d0148d5a92ef75eb32/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd8861714a08b5ab15772d0148d5a92ef75eb32/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=7dd8861714a08b5ab15772d0148d5a92ef75eb32", "patch": "@@ -1835,22 +1835,40 @@ fi\n done\n \n \n-  # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n+\n+  case \"${host}\" in\n+  *-*-interix)\n+    # On Interix, it wrongly concludes that the MSVC compiler supports alloca.\n+    # (MSVC does on Win32, not on Interix.)\n+    # This should be temporary.\n+\n+    ac_cv_header_alloca_h=no\n+    ac_cv_func_alloca_works=no\n+    ALLOCA=alloca.o\n+    cat >> confdefs.h <<\\EOF\n+#define C_ALLOCA 1\n+EOF\n+    cat >> confdefs.h <<EOF\n+#define STACK_DIRECTION -1\n+EOF\n+    ;;\n+  *)\n+    # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1842: checking for working alloca.h\" >&5\n+echo \"configure:1860: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1847 \"configure\"\n+#line 1865 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n char *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:1854: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1872: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -1871,12 +1889,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1875: checking for alloca\" >&5\n+echo \"configure:1893: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1880 \"configure\"\n+#line 1898 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -1904,7 +1922,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:1908: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1926: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -1936,12 +1954,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:1940: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:1958: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1945 \"configure\"\n+#line 1963 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -1966,12 +1984,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1970: checking for $ac_func\" >&5\n+echo \"configure:1988: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1975 \"configure\"\n+#line 1993 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1994,7 +2012,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1998: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2016: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2021,15 +2039,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:2025: checking stack direction for C alloca\" >&5\n+echo \"configure:2043: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2033 \"configure\"\n+#line 2051 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -2048,7 +2066,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:2052: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2070: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2069,21 +2087,24 @@ EOF\n \n fi\n \n+    ;;\n+  esac\n+\n   echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:2074: checking for ANSI C header files\" >&5\n+echo \"configure:2095: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2079 \"configure\"\n+#line 2100 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2087: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2108: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2100,7 +2121,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2104 \"configure\"\n+#line 2125 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -2118,7 +2139,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2122 \"configure\"\n+#line 2143 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -2139,7 +2160,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2143 \"configure\"\n+#line 2164 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -2150,7 +2171,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:2154: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2175: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2174,12 +2195,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2178: checking for pid_t\" >&5\n+echo \"configure:2199: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2183 \"configure\"\n+#line 2204 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2208,17 +2229,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2212: checking for vfork.h\" >&5\n+echo \"configure:2233: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2217 \"configure\"\n+#line 2238 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2222: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2243: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2243,18 +2264,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2247: checking for working vfork\" >&5\n+echo \"configure:2268: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2253: checking for vfork\" >&5\n+echo \"configure:2274: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2258 \"configure\"\n+#line 2279 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2277,7 +2298,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2281: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2302: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2299,7 +2320,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2303 \"configure\"\n+#line 2324 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2394,7 +2415,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2398: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2419: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2421,19 +2442,19 @@ fi\n   fi\n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2425: checking for $v\" >&5\n+echo \"configure:2446: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2430 \"configure\"\n+#line 2451 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2437: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2458: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2459,12 +2480,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2463: checking for $ac_func\" >&5\n+echo \"configure:2484: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2468 \"configure\"\n+#line 2489 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2487,7 +2508,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2491: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2512: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else"}, {"sha": "77eec3bf43e186c20f90de8190103abeba9fefa2", "filename": "libiberty/configure.in", "status": "modified", "additions": 22, "deletions": 1, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd8861714a08b5ab15772d0148d5a92ef75eb32/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd8861714a08b5ab15772d0148d5a92ef75eb32/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=7dd8861714a08b5ab15772d0148d5a92ef75eb32", "patch": "@@ -299,7 +299,28 @@ if test -z \"${setobjs}\"; then\n   # tests.  This will only work if the compiler works.\n   AC_PROG_CC_WORKS\n   AC_REPLACE_FUNCS($funcs)\n-  AC_FUNC_ALLOCA\n+\n+  case \"${host}\" in\n+  *-*-interix)\n+    # On Interix, it wrongly concludes that the MSVC compiler supports alloca.\n+    # (MSVC does on Win32, not on Interix.)\n+    # This should be temporary.\n+\n+    ac_cv_header_alloca_h=no\n+    ac_cv_func_alloca_works=no\n+    ALLOCA=alloca.o\n+    cat >> confdefs.h <<\\EOF\n+#define C_ALLOCA 1\n+EOF\n+    cat >> confdefs.h <<EOF\n+#define STACK_DIRECTION -1\n+EOF\n+    ;;\n+  *)\n+    AC_FUNC_ALLOCA\n+    ;;\n+  esac\n+\n   AC_FUNC_VFORK\n   if test $ac_cv_func_vfork_works = no; then\n     LIBOBJS=\"$LIBOBJS vfork.o\""}]}