{"sha": "f637ebc1e8651f77b2f9853c1986b682839706e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjYzN2ViYzFlODY1MWY3N2IyZjk4NTNjMTk4NmI2ODI4Mzk3MDZlOA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2013-10-14T17:26:17Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2013-10-14T17:26:17Z"}, "message": "re PR fortran/58658 ([OOP] Pointer assignment to allocatable unlimited polymorphic accepted)\n\n2013-10-14  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/58658\n        * expr.c (gfc_check_vardef_context): Fix pointer diagnostic\n        for CLASS(*).\n\n2013-10-14  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/58658\n        * gfortran.dg/unlimited_polymorphic_10.f90: New.\n\nFrom-SVN: r203572", "tree": {"sha": "fc0f8777cba36f0d14f1ae7a8cd46e926f3d2b0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc0f8777cba36f0d14f1ae7a8cd46e926f3d2b0d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f637ebc1e8651f77b2f9853c1986b682839706e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f637ebc1e8651f77b2f9853c1986b682839706e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f637ebc1e8651f77b2f9853c1986b682839706e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f637ebc1e8651f77b2f9853c1986b682839706e8/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "47e0da377eb7021c043244cd4ff99669eb1a370c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47e0da377eb7021c043244cd4ff99669eb1a370c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47e0da377eb7021c043244cd4ff99669eb1a370c"}], "stats": {"total": 26, "additions": 22, "deletions": 4}, "files": [{"sha": "0515e6c68d5969ae27f4cabbe94179d72a5966db", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=f637ebc1e8651f77b2f9853c1986b682839706e8", "patch": "@@ -1,3 +1,9 @@\n+2013-10-14  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/58658\n+\t* expr.c (gfc_check_vardef_context): Fix pointer diagnostic\n+\tfor CLASS(*).\n+\n 2013-10-11  Jakub Jelinek  <jakub@redhat.com>\n \n \t* trans-openmp.c (gfc_omp_clause_default_ctor,"}, {"sha": "df96e5b4d351a0c743f76b055b01d0db35845e37", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 1, "deletions": 4, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=f637ebc1e8651f77b2f9853c1986b682839706e8", "patch": "@@ -4693,7 +4693,6 @@ gfc_check_vardef_context (gfc_expr* e, bool pointer, bool alloc_obj,\n   bool is_pointer;\n   bool check_intentin;\n   bool ptr_component;\n-  bool unlimited;\n   symbol_attribute attr;\n   gfc_ref* ref;\n   int i;\n@@ -4709,8 +4708,6 @@ gfc_check_vardef_context (gfc_expr* e, bool pointer, bool alloc_obj,\n       sym = e->value.function.esym ? e->value.function.esym : e->symtree->n.sym;\n     }\n \n-  unlimited = e->ts.type == BT_CLASS && UNLIMITED_POLY (sym);\n-\n   attr = gfc_expr_attr (e);\n   if (!pointer && e->expr_type == EXPR_FUNCTION && attr.pointer)\n     {\n@@ -4750,7 +4747,7 @@ gfc_check_vardef_context (gfc_expr* e, bool pointer, bool alloc_obj,\n   /* Find out whether the expr is a pointer; this also means following\n      component references to the last one.  */\n   is_pointer = (attr.pointer || attr.proc_pointer);\n-  if (pointer && !is_pointer && !unlimited)\n+  if (pointer && !is_pointer)\n     {\n       if (context)\n \tgfc_error (\"Non-POINTER in pointer association context (%s)\""}, {"sha": "075d0714b48f68c4b9d55242358387e3aa4be4fb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f637ebc1e8651f77b2f9853c1986b682839706e8", "patch": "@@ -1,3 +1,8 @@\n+2013-10-14  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/58658\n+\t* gfortran.dg/unlimited_polymorphic_10.f90: New.\n+\n 2013-10-14  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* gcc.dg/torture/pr58670.c (ASM_STR) [__i386__ || __x86_64__]: Use"}, {"sha": "04518d6c941faa4f51bdc5f7a80094c8a91ab2c9", "filename": "gcc/testsuite/gfortran.dg/unlimited_polymorphic_10.f90", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ftestsuite%2Fgfortran.dg%2Funlimited_polymorphic_10.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f637ebc1e8651f77b2f9853c1986b682839706e8/gcc%2Ftestsuite%2Fgfortran.dg%2Funlimited_polymorphic_10.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Funlimited_polymorphic_10.f90?ref=f637ebc1e8651f77b2f9853c1986b682839706e8", "patch": "@@ -0,0 +1,10 @@\n+! { dg-do compile }\n+!\n+! PR fortran/58658\n+!\n+! Contributed by Vladim\u00c3\u00adr Fuka\n+!\n+subroutine sub(a)\n+  class(*),allocatable :: a\n+  a => null() ! { dg-error \"Non-POINTER in pointer association context \\\\(pointer assignment\\\\)\" }\n+end subroutine"}]}