{"sha": "019e90494bd07f71380547ad8c2c70826aaf88f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDE5ZTkwNDk0YmQwN2Y3MTM4MDU0N2FkOGMyYzcwODI2YWFmODhmOQ==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2020-03-23T23:04:11Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2020-06-12T08:29:22Z"}, "message": "[Ada] Reuse Is_Entry where possible\n\n2020-06-12  Piotr Trojanek  <trojanek@adacore.com>\n\ngcc/ada/\n\n\t* contracts.adb, einfo.adb, sem_ch4.adb, sem_ch6.adb,\n\tsem_res.adb, sem_util.adb: Replace Ekind_In with Is_Entry.", "tree": {"sha": "ca23e1b5b3a6b428cdae26fc46d831cfcede5fa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca23e1b5b3a6b428cdae26fc46d831cfcede5fa3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/019e90494bd07f71380547ad8c2c70826aaf88f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/019e90494bd07f71380547ad8c2c70826aaf88f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/019e90494bd07f71380547ad8c2c70826aaf88f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/019e90494bd07f71380547ad8c2c70826aaf88f9/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c0cecc953a4a6b72ac9cf901707d98ab462e501e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0cecc953a4a6b72ac9cf901707d98ab462e501e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0cecc953a4a6b72ac9cf901707d98ab462e501e"}], "stats": {"total": 27, "additions": 12, "deletions": 15}, "files": [{"sha": "300bbf90cfad311c700262d2946ef39ea2de8d51", "filename": "gcc/ada/contracts.adb", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fcontracts.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fcontracts.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fcontracts.adb?ref=019e90494bd07f71380547ad8c2c70826aaf88f9", "patch": "@@ -562,8 +562,7 @@ package body Contracts is\n       --  Save the SPARK_Mode-related data to restore on exit\n \n       Skip_Assert_Exprs : constant Boolean :=\n-                            Ekind_In (Subp_Id, E_Entry, E_Entry_Family)\n-                              and then not GNATprove_Mode;\n+                            Is_Entry (Subp_Id) and then not GNATprove_Mode;\n \n       Depends  : Node_Id := Empty;\n       Global   : Node_Id := Empty;"}, {"sha": "2456fc15e8f1521ecf8a48ca023ab2bf829aad72", "filename": "gcc/ada/einfo.adb", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Feinfo.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Feinfo.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Feinfo.adb?ref=019e90494bd07f71380547ad8c2c70826aaf88f9", "patch": "@@ -1299,7 +1299,7 @@ package body Einfo is\n \n    function Contract_Wrapper (Id : E) return E is\n    begin\n-      pragma Assert (Ekind_In (Id, E_Entry, E_Entry_Family));\n+      pragma Assert (Is_Entry (Id));\n       return Node25 (Id);\n    end Contract_Wrapper;\n \n@@ -1709,8 +1709,7 @@ package body Einfo is\n    function Has_Out_Or_In_Out_Parameter (Id : E) return B is\n    begin\n       pragma Assert\n-        (Ekind_In (Id, E_Entry, E_Entry_Family)\n-          or else Is_Subprogram_Or_Generic_Subprogram (Id));\n+        (Is_Entry (Id) or else Is_Subprogram_Or_Generic_Subprogram (Id));\n       return Flag110 (Id);\n    end Has_Out_Or_In_Out_Parameter;\n \n@@ -4159,7 +4158,7 @@ package body Einfo is\n \n    procedure Set_Contract_Wrapper (Id : E; V : E) is\n    begin\n-      pragma Assert (Ekind_In (Id, E_Entry, E_Entry_Family));\n+      pragma Assert (Is_Entry (Id));\n       Set_Node25 (Id, V);\n    end Set_Contract_Wrapper;\n "}, {"sha": "4b19d2d31f16d9bc66c23b956ea4bbba586de2f4", "filename": "gcc/ada/sem_ch4.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch4.adb?ref=019e90494bd07f71380547ad8c2c70826aaf88f9", "patch": "@@ -4989,7 +4989,7 @@ package body Sem_Ch4 is\n          then\n             if Is_Task_Type (Prefix_Type)\n               and then Present (Entity (Sel))\n-              and then Ekind_In (Entity (Sel), E_Entry, E_Entry_Family)\n+              and then Is_Entry (Entity (Sel))\n             then\n                null;\n "}, {"sha": "9fb46d974741ae5885967b50674fe25fe20b7c80", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=019e90494bd07f71380547ad8c2c70826aaf88f9", "patch": "@@ -12259,7 +12259,7 @@ package body Sem_Ch6 is\n       --  point of the call.\n \n       if Out_Present (Spec) then\n-         if Ekind_In (Id, E_Entry, E_Entry_Family)\n+         if Is_Entry (Id)\n            or else Is_Subprogram_Or_Generic_Subprogram (Id)\n          then\n             Set_Has_Out_Or_In_Out_Parameter (Id, True);"}, {"sha": "4cd6f060eb56392307426e10ac961f6994084349", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=019e90494bd07f71380547ad8c2c70826aaf88f9", "patch": "@@ -6098,8 +6098,7 @@ package body Sem_Res is\n       --  can be an arbitrary expression with special resolution rules.\n \n       elsif Nkind_In (Subp, N_Selected_Component, N_Indexed_Component)\n-        or else (Is_Entity_Name (Subp)\n-                  and then Ekind_In (Entity (Subp), E_Entry, E_Entry_Family))\n+        or else (Is_Entity_Name (Subp) and then Is_Entry (Entity (Subp)))\n       then\n          Resolve_Entry_Call (N, Typ);\n \n@@ -7937,7 +7936,7 @@ package body Sem_Res is\n          end;\n       end if;\n \n-      if Ekind_In (Nam, E_Entry, E_Entry_Family)\n+      if Is_Entry (Nam)\n         and then Present (Contract_Wrapper (Nam))\n         and then Current_Scope /= Contract_Wrapper (Nam)\n       then\n@@ -8008,7 +8007,7 @@ package body Sem_Res is\n \n       Generate_Reference (Nam, Entry_Name, 's');\n \n-      if Ekind_In (Nam, E_Entry, E_Entry_Family) then\n+      if Is_Entry (Nam) then\n          Check_Potentially_Blocking_Operation (N);\n       end if;\n "}, {"sha": "2661517e760454e9a9872b25d8264761e245c479", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/019e90494bd07f71380547ad8c2c70826aaf88f9/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=019e90494bd07f71380547ad8c2c70826aaf88f9", "patch": "@@ -9139,7 +9139,7 @@ package body Sem_Util is\n          if Msg_Index <= Msg_Last - 10\n            and then Msg (Msg_Index .. Msg_Index + 9) = \"subprogram\"\n          then\n-            if Ekind_In (Id, E_Entry, E_Entry_Family) then\n+            if Is_Entry (Id) then\n                Res (Res_Index .. Res_Index + 4) := \"entry\";\n                Res_Index := Res_Index + 5;\n \n@@ -15417,7 +15417,7 @@ package body Sem_Util is\n    function Is_Entry_Body (Id : Entity_Id) return Boolean is\n    begin\n       return\n-        Ekind_In (Id, E_Entry, E_Entry_Family)\n+        Is_Entry (Id)\n           and then Nkind (Unit_Declaration_Node (Id)) = N_Entry_Body;\n    end Is_Entry_Body;\n \n@@ -15428,7 +15428,7 @@ package body Sem_Util is\n    function Is_Entry_Declaration (Id : Entity_Id) return Boolean is\n    begin\n       return\n-        Ekind_In (Id, E_Entry, E_Entry_Family)\n+        Is_Entry (Id)\n           and then Nkind (Unit_Declaration_Node (Id)) = N_Entry_Declaration;\n    end Is_Entry_Declaration;\n "}]}