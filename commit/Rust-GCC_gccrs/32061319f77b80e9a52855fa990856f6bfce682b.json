{"sha": "32061319f77b80e9a52855fa990856f6bfce682b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIwNjEzMTlmNzdiODBlOWE1Mjg1NWZhOTkwODU2ZjZiZmNlNjgyYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2012-10-24T21:09:55Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-10-24T21:09:55Z"}, "message": "re PR target/55061 (libbacktrace build fails during bootstrap on powerpc-apple-darwin9)\n\n\tPR target/55061\n\t* configure.ac: Check whether -funwind-tables option works.\n\t* configure: Rebuild.\n\nFrom-SVN: r192782", "tree": {"sha": "c53daad197d3a091ed98e30d079c0242bd7c1e81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c53daad197d3a091ed98e30d079c0242bd7c1e81"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32061319f77b80e9a52855fa990856f6bfce682b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32061319f77b80e9a52855fa990856f6bfce682b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32061319f77b80e9a52855fa990856f6bfce682b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32061319f77b80e9a52855fa990856f6bfce682b/comments", "author": null, "committer": null, "parents": [{"sha": "45c29893a678fe93a54ce82718a7d3839d69b8c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45c29893a678fe93a54ce82718a7d3839d69b8c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45c29893a678fe93a54ce82718a7d3839d69b8c4"}], "stats": {"total": 55, "additions": 53, "deletions": 2}, "files": [{"sha": "729123d8bb0e765205ae65dc6c4e034ff6869ef7", "filename": "libbacktrace/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32061319f77b80e9a52855fa990856f6bfce682b/libbacktrace%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32061319f77b80e9a52855fa990856f6bfce682b/libbacktrace%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2FChangeLog?ref=32061319f77b80e9a52855fa990856f6bfce682b", "patch": "@@ -1,3 +1,9 @@\n+2012-10-24  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR target/55061\n+\t* configure.ac: Check whether -funwind-tables option works.\n+\t* configure: Rebuild.\n+\n 2012-10-11  Ian Lance Taylor  <iant@google.com>\n \n \t* configure.ac: Do not use dl_iterate_phdr on Solaris 10."}, {"sha": "e27973701868944bfcac393c76a7e966144338fe", "filename": "libbacktrace/configure", "status": "modified", "additions": 33, "deletions": 1, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32061319f77b80e9a52855fa990856f6bfce682b/libbacktrace%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32061319f77b80e9a52855fa990856f6bfce682b/libbacktrace%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fconfigure?ref=32061319f77b80e9a52855fa990856f6bfce682b", "patch": "@@ -11490,8 +11490,40 @@ fi\n \n \n EXTRA_FLAGS=\n-if test \"x$GCC\" = \"xyes\"; then\n+if test -n \"${with_target_subdir}\"; then\n   EXTRA_FLAGS=-funwind-tables\n+else\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for -funwind-tables option\" >&5\n+$as_echo_n \"checking for -funwind-tables option... \" >&6; }\n+if test \"${libbacktrace_cv_c_unwind_tables+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  CFLAGS_hold=\"$CFLAGS\"\n+     CFLAGS=\"$CFLAGS -funwind-tables\"\n+     cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+static int f() { return 0; }\n+int\n+main ()\n+{\n+return f();\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  libbacktrace_cv_c_unwind_tables=yes\n+else\n+  libbacktrace_cv_c_unwind_tables=no\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+     CFLAGS=\"$CFLAGS_hold\"\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $libbacktrace_cv_c_unwind_tables\" >&5\n+$as_echo \"$libbacktrace_cv_c_unwind_tables\" >&6; }\n+   if test \"$libbacktrace_cv_c_unwind_tables\" = \"yes\"; then\n+     EXTRA_FLAGS=-funwind-tables\n+   fi\n fi\n \n "}, {"sha": "6867ecffb896f249f8b7155dbadf38bf1e3c106b", "filename": "libbacktrace/configure.ac", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32061319f77b80e9a52855fa990856f6bfce682b/libbacktrace%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32061319f77b80e9a52855fa990856f6bfce682b/libbacktrace%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libbacktrace%2Fconfigure.ac?ref=32061319f77b80e9a52855fa990856f6bfce682b", "patch": "@@ -97,8 +97,21 @@ fi\n AC_SUBST(BACKTRACE_FILE)\n \n EXTRA_FLAGS=\n-if test \"x$GCC\" = \"xyes\"; then\n+if test -n \"${with_target_subdir}\"; then\n   EXTRA_FLAGS=-funwind-tables\n+else\n+  AC_CACHE_CHECK([for -funwind-tables option],\n+    [libbacktrace_cv_c_unwind_tables],\n+    [CFLAGS_hold=\"$CFLAGS\"\n+     CFLAGS=\"$CFLAGS -funwind-tables\"\n+     AC_COMPILE_IFELSE(\n+       [AC_LANG_PROGRAM([static int f() { return 0; }], [return f();])],\n+       [libbacktrace_cv_c_unwind_tables=yes],\n+       [libbacktrace_cv_c_unwind_tables=no])\n+     CFLAGS=\"$CFLAGS_hold\"])\n+   if test \"$libbacktrace_cv_c_unwind_tables\" = \"yes\"; then\n+     EXTRA_FLAGS=-funwind-tables\n+   fi\n fi\n AC_SUBST(EXTRA_FLAGS)\n "}]}