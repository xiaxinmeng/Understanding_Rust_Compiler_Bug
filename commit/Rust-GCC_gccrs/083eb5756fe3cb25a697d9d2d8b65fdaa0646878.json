{"sha": "083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDgzZWI1NzU2ZmUzY2IyNWE2OTdkOWQyZDhiNjVmZGFhMDY0Njg3OA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-11-23T07:31:07Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-11-23T07:31:07Z"}, "message": "cp-tree.def (CTOR_COMPLETE): New tree node.\n\n\t* cp-tree.def (CTOR_COMPLETE): New tree node.\n\t(finish_constructor_body): Add it, to mark the end of the\n\tconstructor.\n\t(finish_function): Don't call end_protect_partials here.\n\t* ir.texi (CTOR_COMPLETE): Document it.\n\t* semantics.c (expand_stmt): Handle it.\n\nFrom-SVN: r30630", "tree": {"sha": "2994dcb7eddba39d83f51e1425155623f1f1fe9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2994dcb7eddba39d83f51e1425155623f1f1fe9a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "html_url": "https://github.com/Rust-GCC/gccrs/commit/083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/comments", "author": null, "committer": null, "parents": [{"sha": "4e32293ce6e25dfe4f3f756032a044f4d39e70d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e32293ce6e25dfe4f3f756032a044f4d39e70d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e32293ce6e25dfe4f3f756032a044f4d39e70d1"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "b5fdd4cc68c887e52fe4b7da10a2b585ec6447bb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "patch": "@@ -1,5 +1,12 @@\n 1999-11-22  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* cp-tree.def (CTOR_COMPLETE): New tree node.\n+\t(finish_constructor_body): Add it, to mark the end of the\n+\tconstructor.\n+\t(finish_function): Don't call end_protect_partials here.\n+\t* ir.texi (CTOR_COMPLETE): Document it.\n+\t* semantics.c (expand_stmt): Handle it.\n+\t\n \t* cp-tree.def (FUNCTION_NAME): New tree node.\n \t* cp-tree.h (current_function_name_declared): Tweak documentation.\n \t(lang_decl_flags): Add pretty_function_p, adjust dummy."}, {"sha": "59b14fd298a8a4155a255ed2df85ce4b1e477a62", "filename": "gcc/cp/cp-tree.def", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2Fcp-tree.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2Fcp-tree.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.def?ref=083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "patch": "@@ -237,6 +237,9 @@ DEFTREECODE (ASM_STMT, \"asm_stmt\", 'e', 5)\n    run if an exception is thrown before the end of the enclosing\n    function.  */\n DEFTREECODE (SUBOBJECT, \"subobject\", 'e', 1)\n+/* A CTOR_COMPLETE statements marks the end of the main body of the\n+   constructor, not including any function try blocks.  */\n+DEFTREECODE (CTOR_COMPLETE, \"ctor_complete\", 'e', 0)\n /* A CLEANUP_STMT marks the point at which a declaration is fully\n    constructed.  If, after this point, the CLEANUP_DECL goes out of\n    scope, the CLEANUP_EXPR must be run.  */"}, {"sha": "09ae98d53fa744bfb0a624eb458cf032e6a1b58a", "filename": "gcc/cp/ir.texi", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2Fir.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2Fir.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fir.texi?ref=083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "patch": "@@ -1274,6 +1274,10 @@ following the @code{TREE_CHAIN} link from one substatement to the next.\n Used to represent a @code{continue} statement.  There are no additional\n fields.\n \n+@item CTOR_COMPLETE\n+\n+Used to mark the end of the main body of a constructor.\n+\n @item DECL_STMT\n \n Used to represent a local declaration.  The @code{DECL_STMT_DECL} macro\n@@ -1383,7 +1387,7 @@ equalit) to @code{CATCH_ALL_TYPE} if this handler is for all types.\n \n In a constructor, these nodes are used to mark the point at which a\n subobject of @code{this} is fully constructed.  If, after this point, an\n-exception is thrown before the constructor finishes executing, the\n+exception is thrown before a CTOR_COMPLETE statement is encountered, the\n @code{SUBOBJECT_CLEANUP} must be executed.  The cleanups must be\n executed in the reverse order in which they appear.\n "}, {"sha": "7a030e696a272ac505337d6b0849914c1eddd8c3", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "patch": "@@ -2268,6 +2268,11 @@ expand_stmt (t)\n \t  finish_expr_stmt (EXPR_STMT_EXPR (t));\n \t  break;\n \n+\tcase CTOR_COMPLETE:\n+\t  /* All subobjects have been fully constructed at this point.  */\n+\t  end_protect_partials ();\n+\t  break;\n+\n \tcase DECL_STMT:\n \t  {\n \t    tree decl;"}, {"sha": "b9ed9a5db99aa2b88467b87c2e2aa966a1dffcf4", "filename": "gcc/testsuite/g++.old-deja/g++.eh/cleanup2.C", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.eh%2Fcleanup2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/083eb5756fe3cb25a697d9d2d8b65fdaa0646878/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.eh%2Fcleanup2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.eh%2Fcleanup2.C?ref=083eb5756fe3cb25a697d9d2d8b65fdaa0646878", "patch": "@@ -4,8 +4,6 @@\n // make sure we don't call base dtors, if we failed to call the\n // base ctor due to exception throwing\n \n-// execution test - XFAIL *-*-*\n-\n #include <stdio.h>\n \n static bool bad = false;"}]}