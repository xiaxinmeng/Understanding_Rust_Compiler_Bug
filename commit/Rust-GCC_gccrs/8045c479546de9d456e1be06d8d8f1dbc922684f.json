{"sha": "8045c479546de9d456e1be06d8d8f1dbc922684f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODA0NWM0Nzk1NDZkZTlkNDU2ZTFiZTA2ZDhkOGYxZGJjOTIyNjg0Zg==", "commit": {"author": {"name": "Vincent Celier", "email": "celier@adacore.com", "date": "2008-08-01T09:03:11Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-01T09:03:11Z"}, "message": "2008-08-01  Vincent Celier  <celier@adacore.com>\n\n\t* mlib-utl.adb:\n\t(Adalib_Path): New variable to store the path of the adalib directory\n\twhen procedure Specify_Adalib_Dir is called.\n\t(Lib_Directory): If Adalib_Path is not null, return its value\n\t(Specify_Adalib_Dir): New procedure\n\t\n\t* mlib-utl.ads (Specify_Adalib_Dir): New procedure\n\nFrom-SVN: r138488", "tree": {"sha": "3b3892690a3bc3eb18346284d50688d4c422777f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b3892690a3bc3eb18346284d50688d4c422777f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8045c479546de9d456e1be06d8d8f1dbc922684f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8045c479546de9d456e1be06d8d8f1dbc922684f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8045c479546de9d456e1be06d8d8f1dbc922684f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8045c479546de9d456e1be06d8d8f1dbc922684f/comments", "author": {"login": "vcelier", "id": 8888056, "node_id": "MDQ6VXNlcjg4ODgwNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/8888056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vcelier", "html_url": "https://github.com/vcelier", "followers_url": "https://api.github.com/users/vcelier/followers", "following_url": "https://api.github.com/users/vcelier/following{/other_user}", "gists_url": "https://api.github.com/users/vcelier/gists{/gist_id}", "starred_url": "https://api.github.com/users/vcelier/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vcelier/subscriptions", "organizations_url": "https://api.github.com/users/vcelier/orgs", "repos_url": "https://api.github.com/users/vcelier/repos", "events_url": "https://api.github.com/users/vcelier/events{/privacy}", "received_events_url": "https://api.github.com/users/vcelier/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "434a280743e4edcda87589ac978dac9743556cfc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/434a280743e4edcda87589ac978dac9743556cfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/434a280743e4edcda87589ac978dac9743556cfc"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "76e7db5332b71f0cf61835cde37630faffc0ead5", "filename": "gcc/ada/mlib-utl.adb", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8045c479546de9d456e1be06d8d8f1dbc922684f/gcc%2Fada%2Fmlib-utl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8045c479546de9d456e1be06d8d8f1dbc922684f/gcc%2Fada%2Fmlib-utl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-utl.adb?ref=8045c479546de9d456e1be06d8d8f1dbc922684f", "patch": "@@ -35,6 +35,10 @@ with System;\n \n package body MLib.Utl is\n \n+   Adalib_Path : String_Access := null;\n+   --  Path of the GNAT adalib directory, specified in procedure\n+   --  Specify_Adalib_Dir. Used in function Lib_Directory.\n+\n    Gcc_Name : String_Access;\n    --  Default value of the \"gcc\" executable used in procedure Gcc\n \n@@ -597,6 +601,13 @@ package body MLib.Utl is\n       Libgnat : constant String := Tgt.Libgnat;\n \n    begin\n+      --  If procedure Specify_Adalib_Dir has been called, used the specified\n+      --  value.\n+\n+      if Adalib_Path /= null then\n+         return Adalib_Path.all;\n+      end if;\n+\n       Name_Len := Libgnat'Length;\n       Name_Buffer (1 .. Name_Len) := Libgnat;\n       Get_Name_String (Osint.Find_File (Name_Enter, Osint.Library));\n@@ -606,4 +617,17 @@ package body MLib.Utl is\n       return Name_Buffer (1 .. Name_Len - Libgnat'Length);\n    end Lib_Directory;\n \n+   ------------------------\n+   -- Specify_Adalib_Dir --\n+   ------------------------\n+\n+   procedure Specify_Adalib_Dir (Path : String) is\n+   begin\n+      if Path'Length = 0 then\n+         Adalib_Path := null;\n+      else\n+         Adalib_Path := new String'(Path);\n+      end if;\n+   end Specify_Adalib_Dir;\n+\n end MLib.Utl;"}, {"sha": "f91eebf7f516771a35f1aebcbf65eed04a707250", "filename": "gcc/ada/mlib-utl.ads", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8045c479546de9d456e1be06d8d8f1dbc922684f/gcc%2Fada%2Fmlib-utl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8045c479546de9d456e1be06d8d8f1dbc922684f/gcc%2Fada%2Fmlib-utl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-utl.ads?ref=8045c479546de9d456e1be06d8d8f1dbc922684f", "patch": "@@ -58,4 +58,10 @@ package MLib.Utl is\n    function Lib_Directory return String;\n    --  Return the directory containing libgnat\n \n+   procedure Specify_Adalib_Dir (Path : String);\n+   --  Specify the path of the GNAT adalib directory, to be returned by\n+   --  function Lib_Directory without looking for it. This is used only in\n+   --  gprlib, because we cannot rely on the search in Lib_Directory, as the\n+   --  GNAT version may be different for gprbuild/gprlib and the compiler.\n+\n end MLib.Utl;"}]}