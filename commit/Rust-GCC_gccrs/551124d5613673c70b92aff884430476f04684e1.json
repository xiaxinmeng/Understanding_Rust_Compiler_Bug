{"sha": "551124d5613673c70b92aff884430476f04684e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTUxMTI0ZDU2MTM2NzNjNzBiOTJhZmY4ODQ0MzA0NzZmMDQ2ODRlMQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2017-10-19T13:57:06Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2017-10-19T13:57:06Z"}, "message": "Fix path::iterator post-increment and post-decrement\n\n\t* include/experimental/bits/fs_path.h (path::iterator++(int))\n\t(path::iterator--(int)): Fix for paths with only one component.\n\t* testsuite/experimental/filesystem/path/itr/traversal.cc: Test\n\tpost-increment and post-decrement.\n\nFrom-SVN: r253896", "tree": {"sha": "59e10dbab163fd24737f8e1ffec4bd54fefbbcc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59e10dbab163fd24737f8e1ffec4bd54fefbbcc1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/551124d5613673c70b92aff884430476f04684e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/551124d5613673c70b92aff884430476f04684e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/551124d5613673c70b92aff884430476f04684e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/551124d5613673c70b92aff884430476f04684e1/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "89b1e1613665783c12f707590d5a9fbc657cc954", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89b1e1613665783c12f707590d5a9fbc657cc954", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89b1e1613665783c12f707590d5a9fbc657cc954"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "76c87d65e74b8babbe81fe4835c130afed6ea268", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/551124d5613673c70b92aff884430476f04684e1/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/551124d5613673c70b92aff884430476f04684e1/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=551124d5613673c70b92aff884430476f04684e1", "patch": "@@ -1,5 +1,10 @@\n 2017-10-19  Jonathan Wakely  <jwakely@redhat.com>\n \n+\t* include/experimental/bits/fs_path.h (path::iterator++(int))\n+\t(path::iterator--(int)): Fix for paths with only one component.\n+\t* testsuite/experimental/filesystem/path/itr/traversal.cc: Test\n+\tpost-increment and post-decrement.\n+\n \t* doc/xml/manual/status_cxx2017.xml: Update references to C++17\n \tsection numbers.\n "}, {"sha": "9121439b7f20e6ee59f8a9a7bf57e93610c8eb86", "filename": "libstdc++-v3/include/experimental/bits/fs_path.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/551124d5613673c70b92aff884430476f04684e1/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Ffs_path.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/551124d5613673c70b92aff884430476f04684e1/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Ffs_path.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fexperimental%2Fbits%2Ffs_path.h?ref=551124d5613673c70b92aff884430476f04684e1", "patch": "@@ -725,10 +725,10 @@ _GLIBCXX_BEGIN_NAMESPACE_CXX11\n     pointer   operator->() const { return std::__addressof(**this); }\n \n     iterator& operator++();\n-    iterator  operator++(int) { auto __tmp = *this; ++_M_cur; return __tmp; }\n+    iterator  operator++(int) { auto __tmp = *this; ++*this; return __tmp; }\n \n     iterator& operator--();\n-    iterator  operator--(int) { auto __tmp = *this; --_M_cur; return __tmp; }\n+    iterator  operator--(int) { auto __tmp = *this; --*this; return __tmp; }\n \n     friend bool operator==(const iterator& __lhs, const iterator& __rhs)\n     { return __lhs._M_equals(__rhs); }"}, {"sha": "dbb4d46796dc38a1d2c0c3ac9eba2b92967b5a7c", "filename": "libstdc++-v3/testsuite/experimental/filesystem/path/itr/traversal.cc", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/551124d5613673c70b92aff884430476f04684e1/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fpath%2Fitr%2Ftraversal.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/551124d5613673c70b92aff884430476f04684e1/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fpath%2Fitr%2Ftraversal.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Fpath%2Fitr%2Ftraversal.cc?ref=551124d5613673c70b92aff884430476f04684e1", "patch": "@@ -79,9 +79,28 @@ test02()\n   }\n }\n \n+void\n+test03()\n+{\n+  path paths[] = { \"single\", \"multiple/elements\" };\n+  for (const path& p : paths)\n+    for (auto iter = p.begin(); iter != p.end(); ++iter)\n+    {\n+      auto iter2 = iter;\n+      ++iter;\n+      iter2++;\n+      VERIFY( iter2 == iter );\n+      auto iter3 = iter;\n+      --iter3;\n+      iter2--;\n+      VERIFY( iter2 == iter3 );\n+    }\n+}\n+\n int\n main()\n {\n   test01();\n   test02();\n+  test03();\n }"}]}