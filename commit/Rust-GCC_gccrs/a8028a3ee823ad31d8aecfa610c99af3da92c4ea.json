{"sha": "a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTgwMjhhM2VlODIzYWQzMWQ4YWVjZmE2MTBjOTlhZjNkYTkyYzRlYQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely.gcc@gmail.com", "date": "2011-12-03T15:35:35Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2011-12-03T15:35:35Z"}, "message": "macros.h (__glibcxx_check_non_empty_range): Define.\n\n\t* include/debug/macros.h (__glibcxx_check_non_empty_range): Define.\n\t* include/debug/debug.h (__glibcxx_requires_non_empty_range): Define.\n\t* include/debug/formatter.h (__msg_non_empty_range): Add.\n\t* src/debug.cc: Message text for __msg_non_empty_range.\n\t* include/bits/stl_heap.h (pop_heap): Check for non-empty range.\n\t* testsuite/25_algorithms/pop_heap/empty_neg.cc: New.\n\nFrom-SVN: r181970", "tree": {"sha": "b4f081c14bfc657eff0e2dff052a226d3aa19e6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4f081c14bfc657eff0e2dff052a226d3aa19e6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/comments", "author": null, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4ddd278c032e0b144c447129a5008c05ef4db698", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ddd278c032e0b144c447129a5008c05ef4db698", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ddd278c032e0b144c447129a5008c05ef4db698"}], "stats": {"total": 70, "additions": 65, "deletions": 5}, "files": [{"sha": "c070e89d43293dc0b036c5cd940b05c04f57b741", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -1,3 +1,12 @@\n+2011-12-03  Jonathan Wakely  <jwakely.gcc@gmail.com>\n+\n+\t* include/debug/macros.h (__glibcxx_check_non_empty_range): Define.\n+\t* include/debug/debug.h (__glibcxx_requires_non_empty_range): Define.\n+\t* include/debug/formatter.h (__msg_non_empty_range): Add.\n+\t* src/debug.cc: Message text for __msg_non_empty_range.\n+\t* include/bits/stl_heap.h (pop_heap): Check for non-empty range.\n+\t* testsuite/25_algorithms/pop_heap/empty_neg.cc: New.\n+\n 2011-12-03  Jonathan Wakely  <jwakely.gcc@gmail.com>\n \n \t* doc/xml/manual/utilities.xml: Remove outdated text."}, {"sha": "ed7750c2fa746276e6636183dc8f2016cec61744", "filename": "libstdc++-v3/include/bits/stl_heap.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_heap.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_heap.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_heap.h?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -1,7 +1,7 @@\n // Heap implementation -*- C++ -*-\n \n-// Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n-// Free Software Foundation, Inc.\n+// Copyright (C) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n+// 2011 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -270,6 +270,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n    *  @brief  Pop an element off a heap.\n    *  @param  __first  Start of heap.\n    *  @param  __last   End of heap.\n+   *  @pre    [__first, __last) is a valid, non-empty range.\n    *  @ingroup heap_algorithms\n    *\n    *  This operation pops the top of the heap.  The elements __first\n@@ -287,6 +288,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       __glibcxx_function_requires(_Mutable_RandomAccessIteratorConcept<\n \t    _RandomAccessIterator>)\n       __glibcxx_function_requires(_LessThanComparableConcept<_ValueType>)\n+      __glibcxx_requires_non_empty_range(__first, __last);\n       __glibcxx_requires_valid_range(__first, __last);\n       __glibcxx_requires_heap(__first, __last);\n "}, {"sha": "e07fb127d2b6eb54290a05066dc344db4a340b21", "filename": "libstdc++-v3/include/debug/debug.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -1,6 +1,6 @@\n // Debugging support implementation -*- C++ -*-\n \n-// Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n+// Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011\n // Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n@@ -64,6 +64,7 @@ namespace __gnu_debug\n # define _GLIBCXX_DEBUG_ONLY(_Statement) ;\n # define __glibcxx_requires_cond(_Cond,_Msg)\n # define __glibcxx_requires_valid_range(_First,_Last)\n+# define __glibcxx_requires_non_empty_range(_First,_Last)\n # define __glibcxx_requires_sorted(_First,_Last)\n # define __glibcxx_requires_sorted_pred(_First,_Last,_Pred)\n # define __glibcxx_requires_sorted_set(_First1,_Last1,_First2)\n@@ -96,6 +97,8 @@ namespace __gnu_debug\n # define __glibcxx_requires_cond(_Cond,_Msg) _GLIBCXX_DEBUG_VERIFY(_Cond,_Msg)\n # define __glibcxx_requires_valid_range(_First,_Last) \\\n      __glibcxx_check_valid_range(_First,_Last)\n+# define __glibcxx_requires_non_empty_range(_First,_Last) \\\n+     __glibcxx_check_non_empty_range(_First,_Last)\n # define __glibcxx_requires_sorted(_First,_Last) \\\n      __glibcxx_check_sorted(_First,_Last)\n # define __glibcxx_requires_sorted_pred(_First,_Last,_Pred) \\"}, {"sha": "d22a173e3ff560575b5a712a3ee4d51a47247fb7", "filename": "libstdc++-v3/include/debug/formatter.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fformatter.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fformatter.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fformatter.h?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -108,7 +108,8 @@ namespace __gnu_debug\n     __msg_erase_after_bad,\n     __msg_valid_range2,\n     // unordered sequence local iterators\n-    __msg_local_iter_compare_bad\n+    __msg_local_iter_compare_bad,\n+    __msg_non_empty_range\n   };\n \n   class _Error_formatter"}, {"sha": "07d714d353c9d740acb4f6244564e964eb4468d2", "filename": "libstdc++-v3/include/debug/macros.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -57,6 +57,13 @@ _GLIBCXX_DEBUG_VERIFY(__gnu_debug::__valid_range(_First, _Last),\t\\\n \t\t      ._M_iterator(_First, #_First)\t\t\t\\\n \t\t      ._M_iterator(_Last, #_Last))\n \n+// Verify that [_First, _Last) forms a non-empty iterator range.\n+#define __glibcxx_check_non_empty_range(_First,_Last)\t\t\t\\\n+_GLIBCXX_DEBUG_VERIFY(_First != _Last,\t\t\t\t\t\\\n+\t\t      _M_message(__gnu_debug::__msg_non_empty_range)\t\\\n+\t\t      ._M_iterator(_First, #_First)\t\t\t\\\n+\t\t      ._M_iterator(_Last, #_Last))\n+\n /** Verify that we can insert into *this with the iterator _Position.\n  *  Insertion into a container at a specific position requires that\n  *  the iterator be nonsingular, either dereferenceable or past-the-end,"}, {"sha": "af45ae4f543a6fb6bc7db9183a3230f954e59b59", "filename": "libstdc++-v3/src/debug.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -176,7 +176,8 @@ namespace __gnu_debug\n     \", \\\"%2.name;\\\" shall be before and not equal to \\\"%3.name;\\\"\",\n     // std::unordered_container::local_iterator\n     \"attempt to compare local iterators from different unordered container\"\n-    \" buckets\"\n+    \" buckets\",\n+    \"function requires a non-empty iterator range [%1.name;, %2.name;)\"\n   };\n \n   void"}, {"sha": "57b3f17f01d76af62f1782975ac3256663bcf478", "filename": "libstdc++-v3/testsuite/25_algorithms/pop_heap/empty_neg.cc", "status": "added", "additions": 37, "deletions": 0, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpop_heap%2Fempty_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8028a3ee823ad31d8aecfa610c99af3da92c4ea/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpop_heap%2Fempty_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fpop_heap%2Fempty_neg.cc?ref=a8028a3ee823ad31d8aecfa610c99af3da92c4ea", "patch": "@@ -0,0 +1,37 @@\n+// Copyright (C) 2011 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without Pred the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// 25.3.6 Heap operations [lib.alg.heap.operations]\n+\n+// { dg-require-debug-mode \"\" }\n+// { dg-do run { xfail *-*-* } }\n+\n+#include <algorithm>\n+\n+void\n+test01()\n+{\n+  int i = 0;\n+  std::pop_heap(&i, &i);\n+}\n+\n+int\n+main()\n+{\n+  test01();\n+  return 0;\n+}"}]}