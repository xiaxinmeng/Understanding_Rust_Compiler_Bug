{"sha": "112903088c98fc1995fbfbcaa1b86234b535b8b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTEyOTAzMDg4Yzk4ZmMxOTk1ZmJmYmNhYTFiODYyMzRiNTM1YjhiNA==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@ispras.ru", "date": "2014-05-14T09:46:26Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2014-05-14T09:46:26Z"}, "message": "re PR rtl-optimization/60901 (ICE: SIGSEGV in add_to_deps_list with -fsel-sched-pipelining-outer-loops)\n\n\tPR rtl-optimization/60901\n\t* config/i386/i386.c (ix86_dependencies_evaluation_hook): Check that\n\tbb predecessor belongs to the same scheduling region.  Adjust comment.\n\n\t* gcc.target/i386/pr60901.c: New test.\n\nFrom-SVN: r210414", "tree": {"sha": "1c7c14e625daeda475179d765fb92d0ef4b9bd21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c7c14e625daeda475179d765fb92d0ef4b9bd21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/112903088c98fc1995fbfbcaa1b86234b535b8b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/112903088c98fc1995fbfbcaa1b86234b535b8b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/112903088c98fc1995fbfbcaa1b86234b535b8b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/112903088c98fc1995fbfbcaa1b86234b535b8b4/comments", "author": {"login": "abonzo", "id": 20396542, "node_id": "MDQ6VXNlcjIwMzk2NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/20396542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abonzo", "html_url": "https://github.com/abonzo", "followers_url": "https://api.github.com/users/abonzo/followers", "following_url": "https://api.github.com/users/abonzo/following{/other_user}", "gists_url": "https://api.github.com/users/abonzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/abonzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abonzo/subscriptions", "organizations_url": "https://api.github.com/users/abonzo/orgs", "repos_url": "https://api.github.com/users/abonzo/repos", "events_url": "https://api.github.com/users/abonzo/events{/privacy}", "received_events_url": "https://api.github.com/users/abonzo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2675305b4f6ed4820b9c41cd7672ec2996799578", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2675305b4f6ed4820b9c41cd7672ec2996799578", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2675305b4f6ed4820b9c41cd7672ec2996799578"}], "stats": {"total": 40, "additions": 36, "deletions": 4}, "files": [{"sha": "c63b0b923d73eb5f96714f44a703dc58c8e5f400", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=112903088c98fc1995fbfbcaa1b86234b535b8b4", "patch": "@@ -1,3 +1,9 @@\n+2014-05-14  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/60901\n+\t* config/i386/i386.c (ix86_dependencies_evaluation_hook): Check that\n+\tbb predecessor belongs to the same scheduling region.  Adjust comment.\n+\n 2014-05-13  Peter Bergner  <bergner@vnet.ibm.com>\n \n \t* doc/sourcebuild.texi: (dfp_hw): Document."}, {"sha": "0274288387e38b6cf3b442cf61f02fdcf7c0c03d", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=112903088c98fc1995fbfbcaa1b86234b535b8b4", "patch": "@@ -26254,13 +26254,17 @@ ix86_dependencies_evaluation_hook (rtx head, rtx tail)\n \t      {\n \t\tedge e;\n \t\tedge_iterator ei;\n-\t\t/* Assume that region is SCC, i.e. all immediate predecessors\n-\t           of non-head block are in the same region.  */\n+\n+\t\t/* Regions are SCCs with the exception of selective\n+\t\t   scheduling with pipelining of outer blocks enabled.\n+\t\t   So also check that immediate predecessors of a non-head\n+\t\t   block are in the same region.  */\n \t\tFOR_EACH_EDGE (e, ei, bb->preds)\n \t\t  {\n \t\t    /* Avoid creating of loop-carried dependencies through\n-\t\t       using topological odering in region.  */\n-\t\t    if (BLOCK_TO_BB (bb->index) > BLOCK_TO_BB (e->src->index))\n+\t\t       using topological ordering in the region.  */\n+\t\t    if (rgn == CONTAINING_RGN (e->src->index)\n+\t\t\t&& BLOCK_TO_BB (bb->index) > BLOCK_TO_BB (e->src->index))\n \t\t      add_dependee_for_func_arg (first_arg, e->src); \n \t\t  }\n \t      }"}, {"sha": "b9847d38829e3eeb8ed354b794b76ed180cb5279", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=112903088c98fc1995fbfbcaa1b86234b535b8b4", "patch": "@@ -1,3 +1,8 @@\n+2014-05-14  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/60901\n+\t* gcc.target/i386/pr60901.c: New test. \n+\n 2014-05-14  Yury Gribov  <y.gribov@samsung.com>\n \n \tPR sanitizer/61100"}, {"sha": "f0f25a1dc2c7ce465daba0d0c9356f32a1f61aa0", "filename": "gcc/testsuite/gcc.target/i386/pr60901.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr60901.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/112903088c98fc1995fbfbcaa1b86234b535b8b4/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr60901.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr60901.c?ref=112903088c98fc1995fbfbcaa1b86234b535b8b4", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-options \"-O -fselective-scheduling -fschedule-insns -fsel-sched-pipelining -fsel-sched-pipelining-outer-loops -fno-tree-dominator-opts\"  } */\n+\n+extern int n;\n+extern void bar (void);\n+extern int baz (int);\n+\n+void\n+foo (void)\n+{\n+  int i, j;\n+  for (j = 0; j < n; j++)\n+    {\n+      for (i = 1; i < j; i++)\n+\tbar ();\n+      baz (0);\n+    }\n+}"}]}