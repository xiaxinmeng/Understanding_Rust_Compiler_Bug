{"sha": "f6820157d11eb890d301ae776f8bab3aebdb9630", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjY4MjAxNTdkMTFlYjg5MGQzMDFhZTc3NmY4YmFiM2FlYmRiOTYzMA==", "commit": {"author": {"name": "Bruce Korb", "email": "bkorb@gnu.org", "date": "2000-11-13T00:25:21Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2000-11-13T00:25:21Z"}, "message": "generalize the release script a bit\n\nFrom-SVN: r37411", "tree": {"sha": "f460687eb81b653057ff9462e32095e15571fd60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f460687eb81b653057ff9462e32095e15571fd60"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6820157d11eb890d301ae776f8bab3aebdb9630", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6820157d11eb890d301ae776f8bab3aebdb9630", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6820157d11eb890d301ae776f8bab3aebdb9630", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6820157d11eb890d301ae776f8bab3aebdb9630/comments", "author": {"login": "brkorb", "id": 1242936, "node_id": "MDQ6VXNlcjEyNDI5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1242936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brkorb", "html_url": "https://github.com/brkorb", "followers_url": "https://api.github.com/users/brkorb/followers", "following_url": "https://api.github.com/users/brkorb/following{/other_user}", "gists_url": "https://api.github.com/users/brkorb/gists{/gist_id}", "starred_url": "https://api.github.com/users/brkorb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brkorb/subscriptions", "organizations_url": "https://api.github.com/users/brkorb/orgs", "repos_url": "https://api.github.com/users/brkorb/repos", "events_url": "https://api.github.com/users/brkorb/events{/privacy}", "received_events_url": "https://api.github.com/users/brkorb/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2f86842d45277ae657c3524470f563873180a00c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f86842d45277ae657c3524470f563873180a00c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f86842d45277ae657c3524470f563873180a00c"}], "stats": {"total": 57, "additions": 37, "deletions": 20}, "files": [{"sha": "73dd29f33d331571358bc7b5b149a0661555cfab", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6820157d11eb890d301ae776f8bab3aebdb9630/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6820157d11eb890d301ae776f8bab3aebdb9630/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=f6820157d11eb890d301ae776f8bab3aebdb9630", "patch": "@@ -1,3 +1,7 @@\n+2000-11-12  Bruce Korb  <bkorb@gnu.org>\n+\n+\t* release: generalize the release script a bit.\n+\n Sat Nov 11 17:29:03 2000  Mark P Mitchell  <mark@codesourcery.com>\n \n \t* gcc_build: Add -o option for setting the objdir to use."}, {"sha": "ca6f0b2bf0639a2f1737baba0f58bb81220dd3c8", "filename": "contrib/release", "status": "modified", "additions": 33, "deletions": 20, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6820157d11eb890d301ae776f8bab3aebdb9630/contrib%2Frelease", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6820157d11eb890d301ae776f8bab3aebdb9630/contrib%2Frelease", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Frelease?ref=f6820157d11eb890d301ae776f8bab3aebdb9630", "patch": "@@ -4,27 +4,14 @@\n #\n # Originally written by Jeff Law <law@redhat.com>.\n \n-PATH=/home/law/gcc:$PATH\n-\n-TMPDIR=/var/tmp\n-STATEDIR=/home/law\n-\n-export TMPDIR STATEDIR\n-\n-# We run this on the cvs server itself so we can get at the cvs\n-# files quickly.  It also assumes access to my home dir for some\n-# programs.\n-CVSROOT=/cvs/gcc\n-export CVSROOT\n-\n-# Get somewhere useful with a lot of disk space.\n-cd $TMPDIR\n-\n # We need separate variables for the tag in the CVS sources and the\n # name of the release directory.  Consider if we have a packaging problem\n # and need to respin the release.  The sources do not change, but the release\n # name changes.\n #\n+# [[ Not clear.  You  can purge the old tag and make a new one, too.\n+#    That way they continue to match.  Maximize consistency. ]]\n+#\n # We used to use a tag to get the previous release, but it is more reliable to\n # actually unpack the previous release from the ftp directory.  Consider files\n # like .brik which are in the release, but not in the repository.\n@@ -56,7 +43,33 @@ case $last_release_name in\n     echo \"No testsuites in gcc-2.95*\"\n     ;;\n esac\n-\t\n+\n+STATEDIR=${STATEDIR-/home/law}\n+GCCBASE=${GCCBASE-${STATEDIR}/gcc}\n+TMPDIR=${TMPDIR-/var/tmp}\n+export TMPDIR STATEDIR GCCBASE\n+\n+PATH=${GCCBASE}:$PATH\n+\n+[ -f ${GCCBASE}/gcc.pot ] || {\n+  echo \"'${GCCBASE}/gcc.pot' is missing\"\n+  exit 1\n+}\n+\n+[ -f ${STATEDIR}/bin/brik ] || {\n+  echo \"'${STATEDIR}/bin/brik' is missing\"\n+  exit 1\n+}\n+\n+# We run this on the cvs server itself so we can get at the cvs\n+# files quickly.  It also assumes access to my home dir for some\n+# programs.\n+CVSROOT=/cvs/gcc\n+export CVSROOT\n+\n+# Get somewhere useful with a lot of disk space.\n+cd $TMPDIR\n+\n # Get into a temporary directory so as not to be confused by\n # any existing CVS administration files.\n rm -rf $$\n@@ -99,7 +112,7 @@ noncore_files=\"gcc/cp libio libstdc++ gcc/f libf2c gcc/objc libobjc gcc/ch libch\n cvs -Q export -ko -r$release_tag egcs\n cd egcs\n contrib/gcc_update --touch\n-cp /home/law/gcc/gcc.pot gcc/po\n+cp ${GCCBASE}/gcc.pot gcc/po\n cd ..\n cvs -Q export -ko -Dnow wwwdocs/htdocs/install\n cvs -Q export -ko -Dnow wwwdocs/htdocs/faq.html\n@@ -110,7 +123,7 @@ release_docs $release_name $$\n # Build a list of files in this release.\n cd $release_name\n find . -type f -print | sort > ../files_$release_name\n-/home/law/bin/brik -Gb -f ../files_$release_name > ../.brik_$release_name\n+${STATEDIR}/bin/brik -Gb -f ../files_$release_name > ../.brik_$release_name\n cp ../.brik_$release_name ./.brik\n \n # Get back to the directory with the two releases in it.\n@@ -153,7 +166,7 @@ fi\n cvs -Q export -ko -r$release_tag egcs\n cd egcs\n contrib/gcc_update --touch\n-cp /home/law/gcc/gcc.pot gcc/po\n+cp ${GCCBASE}/gcc.pot gcc/po\n cd ..\n cvs -Q export -ko -Dnow wwwdocs/htdocs/install\n cvs -Q export -ko -Dnow wwwdocs/htdocs/faq.html"}]}