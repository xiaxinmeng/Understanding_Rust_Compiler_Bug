{"sha": "0b7406341cfd55645d110b78d0cfd23f80cc23db", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGI3NDA2MzQxY2ZkNTU2NDVkMTEwYjc4ZDBjZmQyM2Y4MGNjMjNkYg==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2007-07-27T15:39:30Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2007-07-27T15:39:30Z"}, "message": "mangle.c (set_type_package_list): Constify.\n\n\t* mangle.c (set_type_package_list): Constify.\n\t* verify-glue.c (vfy_make_string): Delete.\n\t* verify.h (vfy_make_string): Likewise.\n\nFrom-SVN: r126980", "tree": {"sha": "040a5161d117eb07d2338cf8c7c895d406385ab0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/040a5161d117eb07d2338cf8c7c895d406385ab0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0b7406341cfd55645d110b78d0cfd23f80cc23db", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b7406341cfd55645d110b78d0cfd23f80cc23db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0b7406341cfd55645d110b78d0cfd23f80cc23db", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0b7406341cfd55645d110b78d0cfd23f80cc23db/comments", "author": null, "committer": null, "parents": [{"sha": "2b8327ce6ab70ad4240aa99e6f67d823e5966724", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b8327ce6ab70ad4240aa99e6f67d823e5966724", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b8327ce6ab70ad4240aa99e6f67d823e5966724"}], "stats": {"total": 37, "additions": 12, "deletions": 25}, "files": [{"sha": "23a80c135e6c943c5c3e339c4163e282299e9b29", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=0b7406341cfd55645d110b78d0cfd23f80cc23db", "patch": "@@ -1,3 +1,9 @@\n+2007-07-27  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* mangle.c (set_type_package_list): Constify.\n+\t* verify-glue.c (vfy_make_string): Delete.\n+\t* verify.h (vfy_make_string): Likewise.\n+\n 2007-07-26  Tom Tromey  <tromey@redhat.com>\n \n \t* java-tree.h (push_labeled_block, pop_labeled_block): Remove."}, {"sha": "2401501d9b83d726f9bebe5bbf605b7df4e9e7fb", "filename": "gcc/java/mangle.c", "status": "modified", "additions": 6, "deletions": 12, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2Fmangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2Fmangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fmangle.c?ref=0b7406341cfd55645d110b78d0cfd23f80cc23db", "patch": "@@ -749,27 +749,21 @@ set_type_package_list (tree type)\n {\n   int i;\n   const char *type_string = IDENTIFIER_POINTER (DECL_NAME (TYPE_NAME (type)));\n-  char *ptr;\n+  const char *ptr;\n   int qualifications;\n   tree list = NULL_TREE, elt;\n \n-  for (ptr = (char *)type_string, qualifications = 0; *ptr; ptr++)\n+  for (ptr = type_string, qualifications = 0; *ptr; ptr++)\n     if (*ptr == '.')\n       qualifications += 1;\n \n-  for (ptr = (char *)type_string, i = 0; i < qualifications; ptr++)\n+  for (ptr = type_string, i = 0; i < qualifications; ptr++)\n     {\n       if (ptr [0] == '.')\n \t{\n-\t  char c;\n-\t  tree identifier;\n-\n-\t  /* Can't use an obstack, we're already using it to\n-\t     accumulate the mangling. */\n-\t  c = ptr [0];\n-\t  ptr [0] = '\\0';\n-\t  identifier = get_identifier (type_string);\n-\t  ptr [0] = c;\n+\t  tree const identifier\n+\t    = get_identifier_with_length (type_string, ptr - type_string);\n+\n \t  elt = build_tree_list (identifier, identifier);\n \t  TREE_CHAIN (elt) = list;\n \t  list = elt;"}, {"sha": "48543877ca7329cbf61cafde463b0683adc3dbc5", "filename": "gcc/java/verify-glue.c", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2Fverify-glue.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2Fverify-glue.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fverify-glue.c?ref=0b7406341cfd55645d110b78d0cfd23f80cc23db", "patch": "@@ -210,18 +210,6 @@ vfy_get_pool_class (vfy_constants *pool, int index)\n   return k;\n }\n \n-vfy_string\n-vfy_make_string (const char *s, int len)\n-{\n-  tree result;\n-  char *s2 = (char *) s;\n-  char save = s2[len];\n-  s2[len] = '\\0';\n-  result = get_identifier (s2);\n-  s2[len] = save;\n-  return result;  \n-}\n-\n vfy_string\n vfy_get_class_name (vfy_jclass klass)\n {"}, {"sha": "a2f64e826626c2b87edbcfa8e586a7bc6a4d2b01", "filename": "gcc/java/verify.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2Fverify.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0b7406341cfd55645d110b78d0cfd23f80cc23db/gcc%2Fjava%2Fverify.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fverify.h?ref=0b7406341cfd55645d110b78d0cfd23f80cc23db", "patch": "@@ -97,7 +97,6 @@ vfy_constants *vfy_get_constants (vfy_jclass klass);\n int vfy_get_constants_size (vfy_jclass klass);\n vfy_string vfy_get_pool_string (vfy_constants *pool, int index);\n vfy_jclass vfy_get_pool_class (vfy_constants *pool, int index);\n-vfy_string vfy_make_string (const char *s, int len);\n vfy_string vfy_get_class_name (vfy_jclass klass);\n bool vfy_is_assignable_from (vfy_jclass target, vfy_jclass source);\n char vfy_get_primitive_char (vfy_jclass klass);"}]}