{"sha": "0fdd1804ee8ce04821110bb19c246f9d05248e22", "node_id": "C_kwDOANBUbNoAKDBmZGQxODA0ZWU4Y2UwNDgyMTExMGJiMTljMjQ2ZjlkMDUyNDhlMjI", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-11-24T14:57:03Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2021-11-25T13:23:44Z"}, "message": "Remove never looping loop in label_rtx_for_bb\n\nThis refactors the IL \"walk\" in a way to avoid the loop which will\nnever iterate.\n\n2021-11-25  Richard Biener  <rguenther@suse.de>\n\n\t* cfgexpand.c (label_rtx_for_bb): Remove dead loop construct.", "tree": {"sha": "d04382b1b1a08e058b32936d922d2a6ded762847", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d04382b1b1a08e058b32936d922d2a6ded762847"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0fdd1804ee8ce04821110bb19c246f9d05248e22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fdd1804ee8ce04821110bb19c246f9d05248e22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0fdd1804ee8ce04821110bb19c246f9d05248e22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0fdd1804ee8ce04821110bb19c246f9d05248e22/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "555b8cc39062d1e02ed9117883229c75e17a8871", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/555b8cc39062d1e02ed9117883229c75e17a8871", "html_url": "https://github.com/Rust-GCC/gccrs/commit/555b8cc39062d1e02ed9117883229c75e17a8871"}], "stats": {"total": 24, "additions": 6, "deletions": 18}, "files": [{"sha": "fb84d469f1e771b70e075330c901ab5a7ebb2cf1", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 6, "deletions": 18, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0fdd1804ee8ce04821110bb19c246f9d05248e22/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0fdd1804ee8ce04821110bb19c246f9d05248e22/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=0fdd1804ee8ce04821110bb19c246f9d05248e22", "patch": "@@ -2461,9 +2461,6 @@ static hash_map<basic_block, rtx_code_label *> *lab_rtx_for_bb;\n static rtx_code_label *\n label_rtx_for_bb (basic_block bb ATTRIBUTE_UNUSED)\n {\n-  gimple_stmt_iterator gsi;\n-  tree lab;\n-\n   if (bb->flags & BB_RTL)\n     return block_label (bb);\n \n@@ -2472,21 +2469,12 @@ label_rtx_for_bb (basic_block bb ATTRIBUTE_UNUSED)\n     return *elt;\n \n   /* Find the tree label if it is present.  */\n-\n-  for (gsi = gsi_start_bb (bb); !gsi_end_p (gsi); gsi_next (&gsi))\n-    {\n-      glabel *lab_stmt;\n-\n-      lab_stmt = dyn_cast <glabel *> (gsi_stmt (gsi));\n-      if (!lab_stmt)\n-\tbreak;\n-\n-      lab = gimple_label_label (lab_stmt);\n-      if (DECL_NONLOCAL (lab))\n-\tbreak;\n-\n-      return jump_target_rtx (lab);\n-    }\n+  gimple_stmt_iterator gsi = gsi_start_bb (bb);\n+  glabel *lab_stmt;\n+  if (!gsi_end_p (gsi)\n+      && (lab_stmt = dyn_cast <glabel *> (gsi_stmt (gsi)))\n+      && !DECL_NONLOCAL (gimple_label_label (lab_stmt)))\n+    return jump_target_rtx (gimple_label_label (lab_stmt));\n \n   rtx_code_label *l = gen_label_rtx ();\n   lab_rtx_for_bb->put (bb, l);"}]}