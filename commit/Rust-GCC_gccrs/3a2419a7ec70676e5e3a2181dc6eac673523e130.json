{"sha": "3a2419a7ec70676e5e3a2181dc6eac673523e130", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2EyNDE5YTdlYzcwNjc2ZTVlM2EyMTgxZGM2ZWFjNjczNTIzZTEzMA==", "commit": {"author": {"name": "Volker Reichelt", "email": "reichelt@igpm.rwth-aachen.de", "date": "2006-07-21T09:59:57Z"}, "committer": {"name": "Volker Reichelt", "email": "reichelt@gcc.gnu.org", "date": "2006-07-21T09:59:57Z"}, "message": "re PR c++/28250 (ICE with invalid catch)\n\n\tPR c++/28250\n\t* pt.c (tsubst_expr): Only apply DECL_TEMPLATE_INSTANTIATED to\n\tvalid decls.  Cleanup.\n\n\t* g++.dg/eh/catch3.C: New test.\n\nFrom-SVN: r115643", "tree": {"sha": "47257e935ca7afc4d653d7031859c5a3c8667774", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47257e935ca7afc4d653d7031859c5a3c8667774"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a2419a7ec70676e5e3a2181dc6eac673523e130", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a2419a7ec70676e5e3a2181dc6eac673523e130", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a2419a7ec70676e5e3a2181dc6eac673523e130", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a2419a7ec70676e5e3a2181dc6eac673523e130/comments", "author": null, "committer": null, "parents": [{"sha": "e488a090e6e7b25ca423628dc5a64bd88d793de3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e488a090e6e7b25ca423628dc5a64bd88d793de3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e488a090e6e7b25ca423628dc5a64bd88d793de3"}], "stats": {"total": 29, "additions": 22, "deletions": 7}, "files": [{"sha": "0017e1d8b405a8e9af7260f7ea4d1cb9e401cf64", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3a2419a7ec70676e5e3a2181dc6eac673523e130", "patch": "@@ -1,5 +1,9 @@\n 2006-07-21  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c++/28250\n+\t* pt.c (tsubst_expr): Only apply DECL_TEMPLATE_INSTANTIATED to\n+\tvalid decls.  Cleanup.\n+\n \tPR c++/28363\n \t* semantics.c (check_template_template_default_arg): Simplify\n \terror handling."}, {"sha": "76deddd04aed97cdf041013757d4a1ac917dcc77", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=3a2419a7ec70676e5e3a2181dc6eac673523e130", "patch": "@@ -8491,20 +8491,18 @@ tsubst_expr (tree t, tree args, tsubst_flags_t complain, tree in_decl)\n \n     case HANDLER:\n       {\n-\ttree decl;\n+\ttree decl = HANDLER_PARMS (t);\n \n-\tstmt = begin_handler ();\n-\tif (HANDLER_PARMS (t))\n+\tif (decl)\n \t  {\n-\t    decl = HANDLER_PARMS (t);\n \t    decl = tsubst (decl, args, complain, in_decl);\n \t    /* Prevent instantiate_decl from trying to instantiate\n \t       this variable.  We've already done all that needs to be\n \t       done.  */\n-\t    DECL_TEMPLATE_INSTANTIATED (decl) = 1;\n+\t    if (decl != error_mark_node)\n+\t      DECL_TEMPLATE_INSTANTIATED (decl) = 1;\n \t  }\n-\telse\n-\t  decl = NULL_TREE;\n+\tstmt = begin_handler ();\n \tfinish_handler_parms (decl, stmt);\n \ttsubst_expr (HANDLER_BODY (t), args, complain, in_decl);\n \tfinish_handler (stmt);"}, {"sha": "ad43ecab79fc32dd2784584e7bdef1d8365295e8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3a2419a7ec70676e5e3a2181dc6eac673523e130", "patch": "@@ -1,5 +1,8 @@\n 2006-07-21  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n+\tPR c++/28250\n+\t* g++.dg/eh/catch3.C: New test.\n+\n \tPR c++/28363\n \t* g++.dg/template/defarg10.C: New test.\n "}, {"sha": "884829288e46cc8a150a625a59febcececd88703", "filename": "gcc/testsuite/g++.dg/eh/catch3.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fcatch3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a2419a7ec70676e5e3a2181dc6eac673523e130/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fcatch3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Fcatch3.C?ref=3a2419a7ec70676e5e3a2181dc6eac673523e130", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/28250\n+// { dg-do compile }\n+\n+template<int> void foo()\n+{\n+  try {}\n+  catch () {}  // { dg-error \"type-specifier\" }\n+}\n+\n+template void foo<0>();"}]}