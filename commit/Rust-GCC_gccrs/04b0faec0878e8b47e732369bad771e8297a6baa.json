{"sha": "04b0faec0878e8b47e732369bad771e8297a6baa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDRiMGZhZWMwODc4ZThiNDdlNzMyMzY5YmFkNzcxZTgyOTdhNmJhYQ==", "commit": {"author": {"name": "Bud Davis", "email": "bdavis9659@comcast.net", "date": "2004-06-19T16:42:05Z"}, "committer": {"name": "Bud Davis", "email": "bdavis@gcc.gnu.org", "date": "2004-06-19T16:42:05Z"}, "message": "re PR libfortran/16080 (segmentation fault when reading empty string)\n\n\n2004-06-19  Bud Davis  <bdavis9659@comcast.net>\n\n      PR gfortran/16080\n      * gfortran.fortran-torture/execute/read_null_string.f90: New file.\n      * io/list_read.c(set_value): don't copy if the string is null.\n\nFrom-SVN: r83388", "tree": {"sha": "ce0db1391797050ac25dc55f5b988b01053e131f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce0db1391797050ac25dc55f5b988b01053e131f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/04b0faec0878e8b47e732369bad771e8297a6baa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04b0faec0878e8b47e732369bad771e8297a6baa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04b0faec0878e8b47e732369bad771e8297a6baa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04b0faec0878e8b47e732369bad771e8297a6baa/comments", "author": null, "committer": null, "parents": [{"sha": "bb60c95face9e13d4d62dc028bd20e073b4babcf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb60c95face9e13d4d62dc028bd20e073b4babcf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb60c95face9e13d4d62dc028bd20e073b4babcf"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "3061f0622480f242c26156b54f47117b83e6db45", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b0faec0878e8b47e732369bad771e8297a6baa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b0faec0878e8b47e732369bad771e8297a6baa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=04b0faec0878e8b47e732369bad771e8297a6baa", "patch": "@@ -1,3 +1,8 @@\n+2004-06-19  Bud Davis  <bdavis9659@comcast.net>\n+ \n+        PR gfortran/16080\n+\t* gfortran.fortran-torture/execute/read_null_string.f90: New file.\n+\n 2004-06-19  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* g++.dg/lookup/crash3.C: Use __SIZE_TYPE__"}, {"sha": "7cf949204dce7b1719d112dc69c4479dade7e403", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/read_null_string.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b0faec0878e8b47e732369bad771e8297a6baa/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fread_null_string.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b0faec0878e8b47e732369bad771e8297a6baa/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fread_null_string.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fread_null_string.f90?ref=04b0faec0878e8b47e732369bad771e8297a6baa", "patch": "@@ -0,0 +1,15 @@\n+! pr 16080, segfault on reading an empty string \n+      implicit none \n+      integer t \n+      character*20   temp_name \n+      character*2 quotes\n+      open(unit=7,status='SCRATCH')\n+      quotes = '\"\"\"\"'  ! \"\" in the file\n+      write(7,*)1\n+      write(7,'(A)')quotes\n+      temp_name = 'hello'  ! make sure the read overwrites it\n+      rewind(7)\n+      read(7, *) t \n+      read(7, *) temp_name \n+      if (temp_name.ne.'') call abort\n+      end"}, {"sha": "5d6a81654bc5020ea1fba049f580dbc69ea8ec67", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b0faec0878e8b47e732369bad771e8297a6baa/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b0faec0878e8b47e732369bad771e8297a6baa/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=04b0faec0878e8b47e732369bad771e8297a6baa", "patch": "@@ -1,3 +1,8 @@\n+2004-06-19  Bud Davis  <bdavis9659@comcast.net>\n+\n+\tPR gfortran/16080\n+\t* io/list_read.c(set_value): don't copy if the string is null.\n+\n 2004-06-14  Bud Davis  <bdavis9659@comcast.net>\n \n \tPR gfortran/15292"}, {"sha": "aa22f8ad0ff8b46c2d833a8cb57b8fde2e0436ef", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/04b0faec0878e8b47e732369bad771e8297a6baa/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/04b0faec0878e8b47e732369bad771e8297a6baa/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=04b0faec0878e8b47e732369bad771e8297a6baa", "patch": "@@ -1313,8 +1313,13 @@ list_formatted_read (bt type, void *p, int len)\n       break;\n \n     case BT_CHARACTER:\n-      m = (len < saved_used) ? len : saved_used;\n-      memcpy (p, saved_string, m);\n+      if (saved_string)\n+       { \n+          m = (len < saved_used) ? len : saved_used;\n+          memcpy (p, saved_string, m);\n+       }\n+      else    /* just delimeters encountered, nothing to copy but SPACE */\n+        m = 0;\n \n       if (m < len)\n \tmemset (((char *) p) + m, ' ', len - m);"}]}