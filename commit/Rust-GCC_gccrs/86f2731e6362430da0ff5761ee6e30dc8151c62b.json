{"sha": "86f2731e6362430da0ff5761ee6e30dc8151c62b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODZmMjczMWU2MzYyNDMwZGEwZmY1NzYxZWU2ZTMwZGM4MTUxYzYyYg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-11-12T19:34:52Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-11-12T19:34:52Z"}, "message": "syscall: Force first letter of error message to lower case.\n\nFrom-SVN: r193449", "tree": {"sha": "3ffc2f248e7a0d59729ef6a812638e41e11d1564", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ffc2f248e7a0d59729ef6a812638e41e11d1564"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/86f2731e6362430da0ff5761ee6e30dc8151c62b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86f2731e6362430da0ff5761ee6e30dc8151c62b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/86f2731e6362430da0ff5761ee6e30dc8151c62b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/86f2731e6362430da0ff5761ee6e30dc8151c62b/comments", "author": null, "committer": null, "parents": [{"sha": "36a41ef1917cef77d71209d666b9c33f248e111e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36a41ef1917cef77d71209d666b9c33f248e111e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36a41ef1917cef77d71209d666b9c33f248e111e"}], "stats": {"total": 30, "additions": 24, "deletions": 6}, "files": [{"sha": "aa656ca7cbebd273a2bb6e31ec9d56be0263a2e8", "filename": "libgo/go/syscall/errstr.go", "status": "modified", "additions": 10, "deletions": 5, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86f2731e6362430da0ff5761ee6e30dc8151c62b/libgo%2Fgo%2Fsyscall%2Ferrstr.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86f2731e6362430da0ff5761ee6e30dc8151c62b/libgo%2Fgo%2Fsyscall%2Ferrstr.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Ferrstr.go?ref=86f2731e6362430da0ff5761ee6e30dc8151c62b", "patch": "@@ -6,22 +6,27 @@\n \n package syscall\n \n-//sysnb\tstrerror_r(errnum int, buf []byte) (err error)\n+//sysnb\tstrerror_r(errnum int, buf []byte) (err Errno)\n //strerror_r(errnum _C_int, buf *byte, buflen Size_t) _C_int\n \n func Errstr(errnum int) string {\n \tfor len := 128; ; len *= 2 {\n \t\tb := make([]byte, len)\n-\t\terr := strerror_r(errnum, b)\n-\t\tif err == nil {\n+\t\terrno := strerror_r(errnum, b)\n+\t\tif errno == 0 {\n \t\t\ti := 0\n \t\t\tfor b[i] != 0 {\n \t\t\t\ti++\n \t\t\t}\n+\t\t\t// Lowercase first letter: Bad -> bad, but\n+\t\t\t// STREAM -> STREAM.\n+\t\t\tif i > 1 && 'A' <= b[0] && b[0] <= 'Z' && 'a' <= b[1] && b[1] <= 'z' {\n+\t\t\t\tb[0] += 'a' - 'A'\n+\t\t\t}\n \t\t\treturn string(b[:i])\n \t\t}\n-\t\tif err != ERANGE {\n-\t\t\treturn \"Errstr failure\"\n+\t\tif errno != ERANGE {\n+\t\t\treturn \"errstr failure\"\n \t\t}\n \t}\n }"}, {"sha": "d10476d3cb184ed6258bab00b7982a6e996219fb", "filename": "libgo/go/syscall/errstr_linux.go", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86f2731e6362430da0ff5761ee6e30dc8151c62b/libgo%2Fgo%2Fsyscall%2Ferrstr_linux.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86f2731e6362430da0ff5761ee6e30dc8151c62b/libgo%2Fgo%2Fsyscall%2Ferrstr_linux.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Ferrstr_linux.go?ref=86f2731e6362430da0ff5761ee6e30dc8151c62b", "patch": "@@ -19,5 +19,10 @@ func Errstr(errnum int) string {\n \tfor b[i] != 0 {\n \t\ti++\n \t}\n+\t// Lowercase first letter: Bad -> bad, but STREAM -> STREAM.\n+\tif i > 1 && 'A' <= b[0] && b[0] <= 'Z' && 'a' <= b[1] && b[1] <= 'z' {\n+\t\tc := b[0] + 'a' - 'A'\n+\t\treturn string(c) + string(b[1:i])\n+\t}\n \treturn string(b[:i])\n }"}, {"sha": "796561adda08a5fd34fe808f616fbcb4ce9a8b20", "filename": "libgo/go/syscall/errstr_nor.go", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/86f2731e6362430da0ff5761ee6e30dc8151c62b/libgo%2Fgo%2Fsyscall%2Ferrstr_nor.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/86f2731e6362430da0ff5761ee6e30dc8151c62b/libgo%2Fgo%2Fsyscall%2Ferrstr_nor.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Ferrstr_nor.go?ref=86f2731e6362430da0ff5761ee6e30dc8151c62b", "patch": "@@ -25,7 +25,15 @@ func Errstr(errno int) string {\n \tfor b[i] != 0 {\n \t\ti++\n \t}\n-\ts := string(b[:i])\n+\n+\t// Lowercase first letter: Bad -> bad, but STREAM -> STREAM.\n+\tvar s string\n+\tif i > 1 && 'A' <= b[0] && b[0] <= 'Z' && 'a' <= b[1] && b[1] <= 'z' {\n+\t\tc := b[0] + 'a' - 'A'\n+\t\ts = string(c) + string(b[1:i])\n+\t} else {\n+\t\ts = string(b[:i])\n+\t}\n \n \terrstr_lock.Unlock()\n "}]}