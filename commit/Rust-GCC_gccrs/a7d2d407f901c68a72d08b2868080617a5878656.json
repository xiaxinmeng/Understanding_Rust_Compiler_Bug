{"sha": "a7d2d407f901c68a72d08b2868080617a5878656", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTdkMmQ0MDdmOTAxYzY4YTcyZDA4YjI4NjgwODA2MTdhNTg3ODY1Ng==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-04-05T23:09:51Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-04-05T23:09:51Z"}, "message": "decl.c (lookup_name_current_level): Tweak, and improve documentation.\n\n\t* decl.c (lookup_name_current_level): Tweak, and improve\n\tdocumentation.\n\nFrom-SVN: r26210", "tree": {"sha": "cb9c5be581f8d0d7642fc8deb66bc0c2cce2b87c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb9c5be581f8d0d7642fc8deb66bc0c2cce2b87c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7d2d407f901c68a72d08b2868080617a5878656", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7d2d407f901c68a72d08b2868080617a5878656", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7d2d407f901c68a72d08b2868080617a5878656", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7d2d407f901c68a72d08b2868080617a5878656/comments", "author": null, "committer": null, "parents": [{"sha": "7c72138aa2c52e51598f2a1f82325bb109f8b529", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c72138aa2c52e51598f2a1f82325bb109f8b529", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c72138aa2c52e51598f2a1f82325bb109f8b529"}], "stats": {"total": 27, "additions": 22, "deletions": 5}, "files": [{"sha": "e5d86a99f052f178bd451d601cb06fc49ff4b7ac", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7d2d407f901c68a72d08b2868080617a5878656/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7d2d407f901c68a72d08b2868080617a5878656/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a7d2d407f901c68a72d08b2868080617a5878656", "patch": "@@ -1,5 +1,8 @@\n 1999-04-05  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* decl.c (lookup_name_current_level): Tweak, and improve\n+\tdocumentation.\n+\n \t* class.c (maybe_fixup_vptrs): Remove declaration.\n \t(build_class_init_list): Likewise.\n \t* decl.c (pushdecl_class_level): Call check_template_shadow here"}, {"sha": "098923768801c3d766c220b81d15d3ee88736b53", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7d2d407f901c68a72d08b2868080617a5878656/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7d2d407f901c68a72d08b2868080617a5878656/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=a7d2d407f901c68a72d08b2868080617a5878656", "patch": "@@ -5727,15 +5727,21 @@ lookup_name (name, prefer_type)\n   return lookup_name_real (name, prefer_type, 0, 0);\n }\n \n-/* Similar to `lookup_name' but look only at current binding level.  */\n+/* Similar to `lookup_name' but look only in the innermost non-class\n+   binding level.  */\n \n tree\n lookup_name_current_level (name)\n      tree name;\n {\n-  register tree t = NULL_TREE;\n+  struct binding_level *b;\n+  tree t = NULL_TREE;\n+\n+  b = current_binding_level;\n+  while (b->parm_flag == 2)\n+    b = b->level_chain;\n \n-  if (current_binding_level->namespace_p)\n+  if (b->namespace_p)\n     {\n       t =  IDENTIFIER_NAMESPACE_VALUE (name);\n \n@@ -5746,8 +5752,6 @@ lookup_name_current_level (name)\n   else if (IDENTIFIER_BINDING (name) \n \t   && LOCAL_BINDING_P (IDENTIFIER_BINDING (name)))\n     {\n-      struct binding_level *b = current_binding_level;\n-\n       while (1)\n \t{\n \t  if (BINDING_LEVEL (IDENTIFIER_BINDING (name)) == b)"}, {"sha": "22b27ef9b1207f8c0f7caaf5c07c037d46e1c56d", "filename": "gcc/testsuite/g++.old-deja/g++.other/crash8.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7d2d407f901c68a72d08b2868080617a5878656/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7d2d407f901c68a72d08b2868080617a5878656/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash8.C?ref=a7d2d407f901c68a72d08b2868080617a5878656", "patch": "@@ -0,0 +1,10 @@\n+// Build don't link:\n+// Origin: Jason Merrill <jason@cygnus.com>\n+\n+int main()\n+{\n+  void f();\n+  class A {\n+    friend void f();\n+  };\n+}"}]}