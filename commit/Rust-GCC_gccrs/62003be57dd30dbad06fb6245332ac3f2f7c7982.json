{"sha": "62003be57dd30dbad06fb6245332ac3f2f7c7982", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIwMDNiZTU3ZGQzMGRiYWQwNmZiNjI0NTMzMmFjM2YyZjdjNzk4Mg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2017-11-16T11:08:12Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2017-11-16T11:08:12Z"}, "message": "cfg.c (scale_bbs_frequencies_int, [...]): Remove.\n\n\n\t* cfg.c (scale_bbs_frequencies_int,\n\tcale_bbs_frequencies_gcov_type): Remove.\n\t* cfg.h (scale_bbs_frequencies_int,\n\tcale_bbs_frequencies_gcov_type): Remove.\n\nFrom-SVN: r254812", "tree": {"sha": "7c7af3a7f99ab72c4baa71c4df5baf74f8b28211", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c7af3a7f99ab72c4baa71c4df5baf74f8b28211"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62003be57dd30dbad06fb6245332ac3f2f7c7982", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62003be57dd30dbad06fb6245332ac3f2f7c7982", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62003be57dd30dbad06fb6245332ac3f2f7c7982", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62003be57dd30dbad06fb6245332ac3f2f7c7982/comments", "author": null, "committer": null, "parents": [{"sha": "2a00666935fa4118b927c5d5cd500c08d41bb566", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a00666935fa4118b927c5d5cd500c08d41bb566", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a00666935fa4118b927c5d5cd500c08d41bb566"}], "stats": {"total": 52, "additions": 7, "deletions": 45}, "files": [{"sha": "1c1944ef2129fbd927eca971c767785388f17e46", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62003be57dd30dbad06fb6245332ac3f2f7c7982/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62003be57dd30dbad06fb6245332ac3f2f7c7982/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=62003be57dd30dbad06fb6245332ac3f2f7c7982", "patch": "@@ -1,3 +1,10 @@\n+2017-11-14  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* cfg.c (scale_bbs_frequencies_int,\n+\tcale_bbs_frequencies_gcov_type): Remove.\n+\t* cfg.h (scale_bbs_frequencies_int,\n+\tcale_bbs_frequencies_gcov_type): Remove.\n+\n 2017-11-14  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* tree-ssa-loop-manip.c"}, {"sha": "34bc11239f69193edc1744a00a81d30a222ad512", "filename": "gcc/cfg.c", "status": "modified", "additions": 0, "deletions": 42, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62003be57dd30dbad06fb6245332ac3f2f7c7982/gcc%2Fcfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62003be57dd30dbad06fb6245332ac3f2f7c7982/gcc%2Fcfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfg.c?ref=62003be57dd30dbad06fb6245332ac3f2f7c7982", "patch": "@@ -916,48 +916,6 @@ update_bb_profile_for_threading (basic_block bb,\n   gcc_assert (bb == taken_edge->src);\n }\n \n-/* Multiply all frequencies of basic blocks in array BBS of length NBBS\n-   by NUM/DEN, in int arithmetic.  May lose some accuracy.  */\n-void\n-scale_bbs_frequencies_int (basic_block *bbs, int nbbs, int num, int den)\n-{\n-  int i;\n-  if (num < 0)\n-    num = 0;\n-\n-  /* Scale NUM and DEN to avoid overflows.  Frequencies are in order of\n-     10^4, if we make DEN <= 10^3, we can afford to upscale by 100\n-     and still safely fit in int during calculations.  */\n-  if (den > 1000)\n-    {\n-      if (num > 1000000)\n-\treturn;\n-\n-      num = RDIV (1000 * num, den);\n-      den = 1000;\n-    }\n-  if (num > 100 * den)\n-    return;\n-\n-  for (i = 0; i < nbbs; i++)\n-    {\n-      bbs[i]->count = bbs[i]->count.apply_scale (num, den);\n-    }\n-}\n-\n-/* Multiply all frequencies of basic blocks in array BBS of length NBBS\n-   by NUM/DEN, in gcov_type arithmetic.  More accurate than previous\n-   function but considerably slower.  */\n-void\n-scale_bbs_frequencies_gcov_type (basic_block *bbs, int nbbs, gcov_type num,\n-\t\t\t\t gcov_type den)\n-{\n-  int i;\n-\n-  for (i = 0; i < nbbs; i++)\n-    bbs[i]->count = bbs[i]->count.apply_scale (num, den);\n-}\n-\n /* Multiply all frequencies of basic blocks in array BBS of length NBBS\n    by NUM/DEN, in profile_count arithmetic.  More accurate than previous\n    function but considerably slower.  */"}, {"sha": "8ac1d785c48d476af6cba00030ae165cfb09e55e", "filename": "gcc/cfg.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62003be57dd30dbad06fb6245332ac3f2f7c7982/gcc%2Fcfg.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62003be57dd30dbad06fb6245332ac3f2f7c7982/gcc%2Fcfg.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfg.h?ref=62003be57dd30dbad06fb6245332ac3f2f7c7982", "patch": "@@ -107,9 +107,6 @@ extern basic_block debug_bb_n (int);\n extern void dump_bb_info (FILE *, basic_block, int, dump_flags_t, bool, bool);\n extern void brief_dump_cfg (FILE *, dump_flags_t);\n extern void update_bb_profile_for_threading (basic_block, profile_count, edge);\n-extern void scale_bbs_frequencies_int (basic_block *, int, int, int);\n-extern void scale_bbs_frequencies_gcov_type (basic_block *, int, gcov_type,\n-\t\t\t\t\t     gcov_type);\n extern void scale_bbs_frequencies_profile_count (basic_block *, int,\n \t\t\t\t\t     profile_count, profile_count);\n extern void scale_bbs_frequencies (basic_block *, int, profile_probability);"}]}