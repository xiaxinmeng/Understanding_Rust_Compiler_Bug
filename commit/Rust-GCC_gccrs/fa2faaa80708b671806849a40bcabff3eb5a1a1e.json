{"sha": "fa2faaa80708b671806849a40bcabff3eb5a1a1e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmEyZmFhYTgwNzA4YjY3MTgwNjg0OWE0MGJjYWJmZjNlYjVhMWExZQ==", "commit": {"author": {"name": "Carl Love", "email": "cel@us.ibm.com", "date": "2018-02-12T17:21:28Z"}, "committer": {"name": "Carl Love", "email": "carll@gcc.gnu.org", "date": "2018-02-12T17:21:28Z"}, "message": "builtins-4-runnable.c (main): Move int128 and uint128 tests to new testfile.\n\ngcc/testsuite/ChangeLog:\n\n2018-02-12  Carl Love  <cel@us.ibm.com>\n\n\t* gcc.target/powerpc/builtins-4-runnable.c (main): Move int128 and\n\tuint128 tests to new testfile.\n\t* gcc.target/powerpc/builtins-4-int128-runnable.c: New testfile for\n\tint128 and uint128 tests.\n\t* gcc.target/powerpc/powerpc.exp: Add builtins-4-int128-runnable.c to\n\tlist of torture tests.\n\nFrom-SVN: r257591", "tree": {"sha": "57564457ddbcedf4c1ac7e6ad2568cc4b4e1a925", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57564457ddbcedf4c1ac7e6ad2568cc4b4e1a925"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa2faaa80708b671806849a40bcabff3eb5a1a1e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa2faaa80708b671806849a40bcabff3eb5a1a1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa2faaa80708b671806849a40bcabff3eb5a1a1e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa2faaa80708b671806849a40bcabff3eb5a1a1e/comments", "author": {"login": "carlelove", "id": 86435705, "node_id": "MDQ6VXNlcjg2NDM1NzA1", "avatar_url": "https://avatars.githubusercontent.com/u/86435705?v=4", "gravatar_id": "", "url": "https://api.github.com/users/carlelove", "html_url": "https://github.com/carlelove", "followers_url": "https://api.github.com/users/carlelove/followers", "following_url": "https://api.github.com/users/carlelove/following{/other_user}", "gists_url": "https://api.github.com/users/carlelove/gists{/gist_id}", "starred_url": "https://api.github.com/users/carlelove/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/carlelove/subscriptions", "organizations_url": "https://api.github.com/users/carlelove/orgs", "repos_url": "https://api.github.com/users/carlelove/repos", "events_url": "https://api.github.com/users/carlelove/events{/privacy}", "received_events_url": "https://api.github.com/users/carlelove/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "24abcc441ab1c0e8705e43189efff80daa36acfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24abcc441ab1c0e8705e43189efff80daa36acfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24abcc441ab1c0e8705e43189efff80daa36acfb"}], "stats": {"total": 203, "additions": 119, "deletions": 84}, "files": [{"sha": "dba0bedb7cf2f8536e8429ea7eb7e63b6574329b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fa2faaa80708b671806849a40bcabff3eb5a1a1e", "patch": "@@ -1,3 +1,12 @@\n+2018-02-12  Carl Love  <cel@us.ibm.com>\n+\n+\t* gcc.target/powerpc/builtins-4-runnable.c (main): Move int128 and\n+\tuint128 tests to new testfile.\n+\t* gcc.target/powerpc/builtins-4-int128-runnable.c: New testfile for\n+\tint128 and uint128 tests.\n+\t* gcc.target/powerpc/powerpc.exp: Add builtins-4-int128-runnable.c to\n+\tlist of torture tests.\n+\n 2018-02-12  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/84273"}, {"sha": "162e26781a94b72a33677816f701915550285563", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-4-int128-runnable.c", "status": "added", "additions": 109, "deletions": 0, "changes": 109, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-4-int128-runnable.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-4-int128-runnable.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-4-int128-runnable.c?ref=fa2faaa80708b671806849a40bcabff3eb5a1a1e", "patch": "@@ -0,0 +1,109 @@\n+/* { dg-do run } */\n+/* { dg-require-effective-target int128 } */\n+/* { dg-require-effective-target vsx_hw } */\n+/* { dg-options \"-maltivec -mvsx\" } */\n+\n+#include <inttypes.h>\n+#include <altivec.h> // vector\n+\n+#ifdef DEBUG\n+#include <stdio.h>\n+#endif\n+\n+void abort (void);\n+\n+int main() {\n+  int i;\n+  __uint128_t data_u128[100];\n+  __int128_t data_128[100];\n+\n+  vector __int128_t vec_128_expected1, vec_128_result1;\n+  vector __uint128_t vec_u128_expected1, vec_u128_result1;\n+  signed long long zero = (signed long long) 0;\n+\n+  for (i = 0; i < 100; i++)\n+    {\n+      data_128[i] = i + 12800000;\n+      data_u128[i] = i + 12800001;\n+    }\n+\n+  /* vec_xl() tests */\n+\n+  vec_128_expected1 = (vector __int128_t){12800000};\n+  vec_128_result1 = vec_xl (zero, data_128);\n+\n+  if (vec_128_expected1[0] != vec_128_result1[0])\n+    {\n+#ifdef DEBUG\n+\tprintf(\"Error: vec_xl(), vec_128_result1[0] = %lld %llu; \",\n+\t       vec_128_result1[0] >> 64,\n+\t       vec_128_result1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n+\tprintf(\"vec_128_expected1[0] = %lld %llu\\n\",\n+\t       vec_128_expected1[0] >> 64,\n+\t       vec_128_expected1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n+#else\n+\tabort ();\n+#endif\n+    }\n+\n+  vec_u128_result1 = vec_xl (zero, data_u128);\n+  vec_u128_expected1 = (vector __uint128_t){12800001};\n+  if (vec_u128_expected1[0] != vec_u128_result1[0])\n+    {\n+#ifdef DEBUG\n+\tprintf(\"Error: vec_xl(), vec_u128_result1[0] = %lld; \",\n+\t       vec_u128_result1[0] >> 64,\n+\t       vec_u128_result1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n+\tprintf(\"vec_u128_expected1[0] = %lld\\n\",\n+\t       vec_u128_expected1[0] >> 64,\n+\t       vec_u128_expected1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n+#else\n+\tabort ();\n+#endif\n+    }\n+\n+  /* vec_xl_be() tests */\n+\n+  vec_128_result1 = vec_xl_be (zero, data_128);\n+#ifdef __BIG_ENDIAN__\n+  vec_128_expected1 = (vector __int128_t){ (__int128_t)12800000 };\n+#else\n+  vec_128_expected1 = (vector __int128_t){ (__int128_t)12800000 };\n+#endif\n+\n+  if (vec_128_expected1[0] != vec_128_result1[0])\n+    {\n+#ifdef DEBUG\n+\tprintf(\"Error: vec_xl_be(), vec_128_result1[0] = %llu %llu;\",\n+\t       vec_128_result1[0] >> 64,\n+\t       vec_128_result1[0] & 0xFFFFFFFFFFFFFFFF);\n+\tprintf(\" vec_128_expected1[0] = %llu %llu\\n\",\n+\t       vec_128_expected1[0] >> 64,\n+\t       vec_128_expected1[0] & 0xFFFFFFFFFFFFFFFF);\n+#else\n+      abort ();\n+#endif\n+    }\n+\n+#ifdef __BIG_ENDIAN__\n+  vec_u128_expected1 = (vector __uint128_t){ (__uint128_t)12800001 };\n+#else\n+  vec_u128_expected1 = (vector __uint128_t){ (__uint128_t)12800001 };\n+#endif\n+\n+  vec_u128_result1 = vec_xl_be (zero, data_u128);\n+\n+  if (vec_u128_expected1[0] != vec_u128_result1[0])\n+    {\n+#ifdef DEBUG\n+\tprintf(\"Error: vec_xl_be(), vec_u128_result1[0] = %llu %llu;\",\n+\t       vec_u128_result1[0] >> 64,\n+\t       vec_u128_result1[0] & 0xFFFFFFFFFFFFFFFF);\n+\tprintf(\" vec_u128_expected1[0] = %llu %llu\\n\",\n+\t       vec_u128_expected1[0] >> 64,\n+\t       vec_u128_expected1[0] & 0xFFFFFFFFFFFFFFFF);\n+#else\n+      abort ();\n+#endif\n+    }\n+}"}, {"sha": "35884b5b84856cc0d96f09dded4496dbf5e74916", "filename": "gcc/testsuite/gcc.target/powerpc/builtins-4-runnable.c", "status": "modified", "additions": 0, "deletions": 84, "changes": 84, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-4-runnable.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-4-runnable.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fbuiltins-4-runnable.c?ref=fa2faaa80708b671806849a40bcabff3eb5a1a1e", "patch": "@@ -27,9 +27,6 @@ int main() {\n \n   float data_f[100];\n   double data_d[100];\n-  __uint128_t data_u128[100];\n-  __int128_t data_128[100];\n-\n   signed long long disp;\n \n   vector signed char vec_c_expected1, vec_c_expected2, vec_c_result1, vec_c_result2;\n@@ -47,8 +44,6 @@ int main() {\n     vec_sll_result1, vec_sll_result2;\n   vector unsigned long long vec_ull_expected1, vec_ull_expected2,\n     vec_ull_result1, vec_ull_result2;\n-  vector __int128_t vec_128_expected1, vec_128_result1;\n-  vector __uint128_t vec_u128_expected1, vec_u128_result1;\n   vector float vec_f_expected1, vec_f_expected2, vec_f_result1, vec_f_result2;\n   vector double vec_d_expected1, vec_d_expected2, vec_d_result1, vec_d_result2;\n   char buf[20];\n@@ -66,8 +61,6 @@ int main() {\n       data_ull[i] = i+1001;\n       data_f[i] = i+100000.0;\n       data_d[i] = i+1000000.0;\n-      data_128[i] = i + 12800000;\n-      data_u128[i] = i + 12800001;\n     }\n \n   // vec_xl() tests\n@@ -319,39 +312,6 @@ int main() {\n #endif\n     }\n \n-  vec_128_expected1 = (vector __int128_t){12800000};\n-  vec_128_result1 = vec_xl (zero, data_128);\n-\n-  if (vec_128_expected1[0] != vec_128_result1[0])\n-    {\n-#ifdef DEBUG\n-\tprintf(\"Error: vec_xl(), vec_128_result1[0] = %lld %llu; \",\n-\t       vec_128_result1[0] >> 64,\n-\t       vec_128_result1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n-\tprintf(\"vec_128_expected1[0] = %lld %llu\\n\",\n-\t       vec_128_expected1[0] >> 64,\n-\t       vec_128_expected1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n-#else\n-\tabort ();\n-#endif\n-    }\n-\n-  vec_u128_result1 = vec_xl (zero, data_u128);\n-  vec_u128_expected1 = (vector __uint128_t){12800001};\n-  if (vec_u128_expected1[0] != vec_u128_result1[0])\n-    {\n-#ifdef DEBUG\n-\tprintf(\"Error: vec_xl(), vec_u128_result1[0] = %lld; \",\n-\t       vec_u128_result1[0] >> 64,\n-\t       vec_u128_result1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n-\tprintf(\"vec_u128_expected1[0] = %lld\\n\",\n-\t       vec_u128_expected1[0] >> 64,\n-\t       vec_u128_expected1[0] & (__int128_t)0xFFFFFFFFFFFFFFFF);\n-#else\n-\tabort ();\n-#endif\n-    }\n-\n   // vec_xl_be() tests\n   disp = 1;\n #ifdef __BIG_ENDIAN__\n@@ -708,50 +668,6 @@ int main() {\n \t       i,  vec_d_result2[i], i, vec_d_expected2[i]);\n #else\n \tabort ();\n-#endif\n-    }\n-\n-  disp = 0;\n-  vec_128_result1 = vec_xl_be (zero, data_128);\n-#ifdef __BIG_ENDIAN__\n-  vec_128_expected1 = (vector __int128_t){ (__int128_t)12800000 };\n-#else\n-  vec_128_expected1 = (vector __int128_t){ (__int128_t)12800000 };\n-#endif\n-\n-  if (vec_128_expected1[0] != vec_128_result1[0])\n-    {\n-#ifdef DEBUG\n-\tprintf(\"Error: vec_xl_be(), vec_128_result1[0] = %llu %llu;\",\n-\t       vec_128_result1[0] >> 64,\n-\t       vec_128_result1[0] & 0xFFFFFFFFFFFFFFFF);\n-\tprintf(\" vec_128_expected1[0] = %llu %llu\\n\",\n-\t       vec_128_expected1[0] >> 64,\n-\t       vec_128_expected1[0] & 0xFFFFFFFFFFFFFFFF);\n-#else\n-      abort ();\n-#endif\n-    }\n-\n-#ifdef __BIG_ENDIAN__\n-  vec_u128_expected1 = (vector __uint128_t){ (__uint128_t)12800001 };\n-#else\n-  vec_u128_expected1 = (vector __uint128_t){ (__uint128_t)12800001 };\n-#endif\n-\n-  vec_u128_result1 = vec_xl_be (zero, data_u128);\n-\n-  if (vec_u128_expected1[0] != vec_u128_result1[0])\n-    {\n-#ifdef DEBUG\n-\tprintf(\"Error: vec_xl_be(), vec_u128_result1[0] = %llu %llu;\",\n-\t       vec_u128_result1[0] >> 64,\n-\t       vec_u128_result1[0] & 0xFFFFFFFFFFFFFFFF);\n-\tprintf(\" vec_u128_expected1[0] = %llu %llu\\n\",\n-\t       vec_u128_expected1[0] >> 64,\n-\t       vec_u128_expected1[0] & 0xFFFFFFFFFFFFFFFF);\n-#else\n-      abort ();\n #endif\n     }\n }"}, {"sha": "fdb3e931d713d7249178887ee06fcac3b28e1159", "filename": "gcc/testsuite/gcc.target/powerpc/powerpc.exp", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpowerpc.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa2faaa80708b671806849a40bcabff3eb5a1a1e/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpowerpc.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpowerpc.exp?ref=fa2faaa80708b671806849a40bcabff3eb5a1a1e", "patch": "@@ -54,6 +54,7 @@ torture-init\n # Test load/store builtins at multiple optimizations\n set-torture-options [list -O0 -Os -O1 -O2 -O3]\n gcc-dg-runtest [list $srcdir/$subdir/builtins-4-runnable.c \\\n+\t\t$srcdir/$subdir/builtins-4-int128-runnable.c \\\n \t\t$srcdir/$subdir/builtins-6-runnable.c \\\n \t\t$srcdir/$subdir/builtins-5-p9-runnable.c \\\n \t       \t$srcdir/$subdir/builtins-6-p9-runnable.c] \"\" $DEFAULT_CFLAGS"}]}