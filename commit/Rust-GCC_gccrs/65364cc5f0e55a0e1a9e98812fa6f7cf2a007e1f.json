{"sha": "65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjUzNjRjYzVmMGU1NWEwZTFhOWU5ODgxMmZhNmY3Y2YyYTAwN2UxZg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-01-12T15:21:27Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-01-12T15:21:27Z"}, "message": "re PR objc++/68511 (FAIL: obj-c++.dg/property/dotsyntax-11.mm -fgnu-runtime  (test for errors, line 51,56,59))\n\n\tPR objc++/68511\n\tPR c++/69213\n\t* cp-gimplify.c (cp_gimplify_expr) <case INIT_EXPR>: Don't return\n\tGS_ERROR whenever seen_error (), only if *expr_p contains\n\tcilk spawn stmt, but cilk_detect_spawn_and_unwrap failed.\n\n\t* g++.dg/opt/pr69213.C: New test.\n\nFrom-SVN: r232278", "tree": {"sha": "434179667d7fac4265450359020d5661a757d477", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/434179667d7fac4265450359020d5661a757d477"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9eaaa83013a4517a36621593ea1edb3f431ddafa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eaaa83013a4517a36621593ea1edb3f431ddafa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eaaa83013a4517a36621593ea1edb3f431ddafa"}], "stats": {"total": 45, "additions": 39, "deletions": 6}, "files": [{"sha": "363f6cd6cd56db9cdbcec24e7b198ae2da04d349", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "patch": "@@ -1,5 +1,11 @@\n 2016-01-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR objc++/68511\n+\tPR c++/69213\n+\t* cp-gimplify.c (cp_gimplify_expr) <case INIT_EXPR>: Don't return\n+\tGS_ERROR whenever seen_error (), only if *expr_p contains\n+\tcilk spawn stmt, but cilk_detect_spawn_and_unwrap failed.\n+\n \tPR c++/66808\n \tPR c++/69000\n \t* pt.c (tsubst_decl): If not local_p, clear DECL_TEMPLATE_INFO."}, {"sha": "c0ee8e434667f1f7822c31b8bc0911dbd41154f5", "filename": "gcc/cp/cp-gimplify.c", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Fcp%2Fcp-gimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Fcp%2Fcp-gimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-gimplify.c?ref=65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "patch": "@@ -617,14 +617,17 @@ cp_gimplify_expr (tree *expr_p, gimple_seq *pre_p, gimple_seq *post_p)\n \t LHS of an assignment might also be involved in the RHS, as in bug\n \t 25979.  */\n     case INIT_EXPR:\n-      if (fn_contains_cilk_spawn_p (cfun)\n-\t  && cilk_detect_spawn_and_unwrap (expr_p))\n+      if (fn_contains_cilk_spawn_p (cfun))\n \t{\n-\t  cilk_cp_gimplify_call_params_in_spawned_fn (expr_p, pre_p, post_p);\n-\t  return (enum gimplify_status) gimplify_cilk_spawn (expr_p);\n+\t  if (cilk_detect_spawn_and_unwrap (expr_p))\n+\t    {\n+\t      cilk_cp_gimplify_call_params_in_spawned_fn (expr_p,\n+\t\t\t\t\t\t\t  pre_p, post_p);\n+\t      return (enum gimplify_status) gimplify_cilk_spawn (expr_p);\n+\t    }\n+\t  if (seen_error () && contains_cilk_spawn_stmt (*expr_p))\n+\t    return GS_ERROR;\n \t}\n-      if (seen_error ())\n-\treturn GS_ERROR;\n \n       cp_gimplify_init_expr (expr_p);\n       if (TREE_CODE (*expr_p) != INIT_EXPR)"}, {"sha": "5eba1a19bf70702da4c9c3c30818e7e34ff12483", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "patch": "@@ -1,3 +1,9 @@\n+2016-01-12  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR objc++/68511\n+\tPR c++/69213\n+\t* g++.dg/opt/pr69213.C: New test.\n+\n 2016-01-12  Christian Bruel  <christian.bruel@st.com>\n \n \tPR target/69180"}, {"sha": "8d94773852ddc1c2512389d02d83f576ba74fd11", "filename": "gcc/testsuite/g++.dg/opt/pr69213.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr69213.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr69213.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Fpr69213.C?ref=65364cc5f0e55a0e1a9e98812fa6f7cf2a007e1f", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/69213\n+// { dg-do compile }\n+// { dg-options \"-O3\" }\n+\n+int a, b;\n+\n+void\n+foo (void)\n+{\n+  __asm__ (\"# %0\" : : : \"memory\");\t// { dg-error \"operand number out of range\" }\n+}\n+\n+int\n+main ()\n+{\n+  for (; a < 0; b++)\n+    a = b;\n+}"}]}