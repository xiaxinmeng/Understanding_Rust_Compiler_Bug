{"sha": "34f56efcd57a31950d85b83c00b500a63ef46f35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzRmNTZlZmNkNTdhMzE5NTBkODViODNjMDBiNTAwYTYzZWY0NmYzNQ==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2013-09-13T06:43:17Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2013-09-13T06:43:17Z"}, "message": "winnt-cxx.c (i386_pe_type_dllexport_p): Don't dll-export inline-functions.\n\n2013-09-13  Kai Tietz  <ktietz@redhat.com>\n\n\t* config/i386/winnt-cxx.c (i386_pe_type_dllexport_p): Don't\n\tdll-export inline-functions.\n\t* config/i386/winnt.c (i386_pe_determine_dllexport_p): Likewise.\n\nAdditional fix ChangeLog-date of prior commit.\n\nFrom-SVN: r202555", "tree": {"sha": "cca08bfa2a207d4db89b1fa0da65ed4efa071520", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cca08bfa2a207d4db89b1fa0da65ed4efa071520"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/34f56efcd57a31950d85b83c00b500a63ef46f35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34f56efcd57a31950d85b83c00b500a63ef46f35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34f56efcd57a31950d85b83c00b500a63ef46f35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34f56efcd57a31950d85b83c00b500a63ef46f35/comments", "author": null, "committer": null, "parents": [{"sha": "f0e40b0a064d027278df3bc690bc5bfc4dbf8878", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0e40b0a064d027278df3bc690bc5bfc4dbf8878", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0e40b0a064d027278df3bc690bc5bfc4dbf8878"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "65170206a285ca71c0878f325d1ce9c0229e966b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f56efcd57a31950d85b83c00b500a63ef46f35/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f56efcd57a31950d85b83c00b500a63ef46f35/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=34f56efcd57a31950d85b83c00b500a63ef46f35", "patch": "@@ -1,4 +1,11 @@\n-2013-09-10  Jeff Law  <law@redhat.com>\n+2013-09-13  Kai Tietz  <ktietz@redhat.com>\n+\n+\t* config/i386/winnt-cxx.c (i386_pe_type_dllexport_p): Don't\n+\tdll-export inline-functions.\n+\t* config/i386/winnt.c (i386_pe_determine_dllexport_p): Likewise.\n+\n+\n+2013-09-13  Jeff Law  <law@redhat.com>\n \n \tPR middle-end/58387\n \tRevert:"}, {"sha": "92de46abd59ab2dd5c143be9b012593e3722cb58", "filename": "gcc/config/i386/winnt-cxx.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f56efcd57a31950d85b83c00b500a63ef46f35/gcc%2Fconfig%2Fi386%2Fwinnt-cxx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f56efcd57a31950d85b83c00b500a63ef46f35/gcc%2Fconfig%2Fi386%2Fwinnt-cxx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt-cxx.c?ref=34f56efcd57a31950d85b83c00b500a63ef46f35", "patch": "@@ -65,6 +65,13 @@ i386_pe_type_dllexport_p (tree decl)\n   if (TREE_CODE (TREE_TYPE (decl)) == METHOD_TYPE\n       && DECL_ARTIFICIAL (decl) && !DECL_THUNK_P (decl))\n     return false;\n+  if (TREE_CODE (decl) == FUNCTION_DECL\n+      && DECL_DECLARED_INLINE_P (decl))\n+    {\n+      if (DECL_REALLY_EXTERN (decl)\n+\t  || !flag_keep_inline_dllexport)\n+\treturn false;\n+    }\n   return true;\n }\n "}, {"sha": "8cf6b3c527af103e659530b03e5d9173e719b3a5", "filename": "gcc/config/i386/winnt.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34f56efcd57a31950d85b83c00b500a63ef46f35/gcc%2Fconfig%2Fi386%2Fwinnt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34f56efcd57a31950d85b83c00b500a63ef46f35/gcc%2Fconfig%2Fi386%2Fwinnt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fwinnt.c?ref=34f56efcd57a31950d85b83c00b500a63ef46f35", "patch": "@@ -110,6 +110,11 @@ i386_pe_determine_dllexport_p (tree decl)\n   if (!TREE_PUBLIC (decl))\n     return false;\n \n+  if (TREE_CODE (decl) == FUNCTION_DECL\n+      && DECL_DECLARED_INLINE_P (decl)\n+      && !flag_keep_inline_dllexport)\n+    return false; \n+\n   if (lookup_attribute (\"dllexport\", DECL_ATTRIBUTES (decl)))\n     return true;\n "}]}