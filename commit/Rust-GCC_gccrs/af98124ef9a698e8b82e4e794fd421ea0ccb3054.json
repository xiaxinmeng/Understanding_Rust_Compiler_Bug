{"sha": "af98124ef9a698e8b82e4e794fd421ea0ccb3054", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWY5ODEyNGVmOWE2OThlOGI4MmU0ZTc5NGZkNDIxZWEwY2NiMzA1NA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-04-20T05:49:48Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-04-20T05:49:48Z"}, "message": "jni.cc (_Jv_JNI_FindClass): Use system class loader if class doesn't have a loader.\n\n\t* jni.cc (_Jv_JNI_FindClass): Use system class loader if class\n\tdoesn't have a loader.\n\nFrom-SVN: r33272", "tree": {"sha": "28cabe5367d6c64b2d9309b330e806b228ed8eb7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/28cabe5367d6c64b2d9309b330e806b228ed8eb7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af98124ef9a698e8b82e4e794fd421ea0ccb3054", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af98124ef9a698e8b82e4e794fd421ea0ccb3054", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af98124ef9a698e8b82e4e794fd421ea0ccb3054", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af98124ef9a698e8b82e4e794fd421ea0ccb3054/comments", "author": null, "committer": null, "parents": [{"sha": "807bc1db3dea6d5c6bfdb228df6c207d65462e9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/807bc1db3dea6d5c6bfdb228df6c207d65462e9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/807bc1db3dea6d5c6bfdb228df6c207d65462e9a"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "f5806da6bbad5326ef9f43a2064ffc9de502d103", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af98124ef9a698e8b82e4e794fd421ea0ccb3054/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af98124ef9a698e8b82e4e794fd421ea0ccb3054/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=af98124ef9a698e8b82e4e794fd421ea0ccb3054", "patch": "@@ -1,3 +1,8 @@\n+2000-04-19  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* jni.cc (_Jv_JNI_FindClass): Use system class loader if class\n+\tdoesn't have a loader.\n+\n 2000-04-19  Bryce McKinlay  <bryce@albatross.co.nz>\n \n \t* boehm.cc: (_Jv_MarkObj, _Jv_MarkArray): Cast pointers for"}, {"sha": "cd45ab8feb2600d43ca6c069a291f949754fc8ec", "filename": "libjava/jni.cc", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af98124ef9a698e8b82e4e794fd421ea0ccb3054/libjava%2Fjni.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af98124ef9a698e8b82e4e794fd421ea0ccb3054/libjava%2Fjni.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjni.cc?ref=af98124ef9a698e8b82e4e794fd421ea0ccb3054", "patch": "@@ -424,15 +424,16 @@ _Jv_JNI_FindClass (JNIEnv *env, const char *name)\n       // This might throw an out of memory exception.\n       jstring n = JvNewStringUTF (s);\n \n-      java::lang::ClassLoader *loader;\n-      if (env->klass == NULL)\n+      java::lang::ClassLoader *loader = NULL;\n+      if (env->klass != NULL)\n+\tloader = env->klass->getClassLoader ();\n+\n+      if (loader == NULL)\n \t{\n \t  // FIXME: should use getBaseClassLoader, but we don't have that\n \t  // yet.\n \t  loader = java::lang::ClassLoader::getSystemClassLoader ();\n \t}\n-      else\n-\tloader = env->klass->getClassLoader ();\n \n       r = loader->loadClass (n);\n     }"}]}