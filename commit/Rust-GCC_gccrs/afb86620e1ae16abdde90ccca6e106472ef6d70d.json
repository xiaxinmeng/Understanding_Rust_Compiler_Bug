{"sha": "afb86620e1ae16abdde90ccca6e106472ef6d70d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZiODY2MjBlMWFlMTZhYmRkZTkwY2NjYTZlMTA2NDcyZWY2ZDcwZA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-07-17T09:11:11Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-07-17T09:11:11Z"}, "message": "re PR c++/36855 (__has_trivial_destructor() returns false for reference types.)\n\n/cp\n2008-07-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/36855\n\t* semantics.c (trait_expr_value): Update __has_trivial_destructor\n\tsemantics to the current WP (N2691).\n\n/testsuite\n2008-07-17  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/36855\n\t* g++.dg/ext/has_trivial_destructor.C: Rename to...\n\t* g++.dg/ext/has_trivial_destructor-1.C: ... this.\n\t* g++.dg/ext/has_trivial_destructor-2.C: New.\n\nFrom-SVN: r137914", "tree": {"sha": "dc4d9a5e45e100a882c0f61e398daa1470f6e4a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dc4d9a5e45e100a882c0f61e398daa1470f6e4a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afb86620e1ae16abdde90ccca6e106472ef6d70d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afb86620e1ae16abdde90ccca6e106472ef6d70d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afb86620e1ae16abdde90ccca6e106472ef6d70d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afb86620e1ae16abdde90ccca6e106472ef6d70d/comments", "author": null, "committer": null, "parents": [{"sha": "b08c51086fceec9cd27858dae48bf55fbbfccc1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b08c51086fceec9cd27858dae48bf55fbbfccc1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b08c51086fceec9cd27858dae48bf55fbbfccc1c"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "0e537b855c7c5dd04e4a2a4b48734d0bbfb628ad", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=afb86620e1ae16abdde90ccca6e106472ef6d70d", "patch": "@@ -1,8 +1,13 @@\n+2008-07-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/36855\n+\t* semantics.c (trait_expr_value): Update __has_trivial_destructor\n+\tsemantics to the current WP (N2691).\n+\n 2008-07-16  Dodji Seketeli  <dseketel@redhat.com>\n \n \tPR c++/13699\n-\t* gcc/cp/name-lookup.c (lookup_extern_c_fun_binding_in_all_ns):\n-\tNew function.\n+\t* name-lookup.c (lookup_extern_c_fun_binding_in_all_ns): New function.\n \t(pushdecl_maybe_friend): Check if a redeclaration of extern C function\n \tcomplies with exception specification constraints.\n \n@@ -22,8 +27,8 @@\n \n \tPR c++/13101\n \t* decl.c (grokdeclarator): Warn about initializing variables\n-\t  of storage class 'extern' only after the type of the declarator\n-\t  has been properly computed.\n+\tof storage class 'extern' only after the type of the declarator\n+\thas been properly computed.\n \n 2008-07-11  Dodji Seketeli  <dseketel@redhat.com>\n "}, {"sha": "d2f56ea810a312f4d79ac34f55285841806aca49", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=afb86620e1ae16abdde90ccca6e106472ef6d70d", "patch": "@@ -4730,7 +4730,7 @@ trait_expr_value (cp_trait_kind kind, tree type1, tree type2)\n \n     case CPTK_HAS_TRIVIAL_DESTRUCTOR:\n       type1 = strip_array_types (type1);\n-      return (pod_type_p (type1)\n+      return (pod_type_p (type1) || type_code1 == REFERENCE_TYPE\n \t      || (CLASS_TYPE_P (type1)\n \t\t  && TYPE_HAS_TRIVIAL_DESTRUCTOR (type1)));\n "}, {"sha": "528a1114b30df6845921ae684f330eef995f0e8e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=afb86620e1ae16abdde90ccca6e106472ef6d70d", "patch": "@@ -1,3 +1,10 @@\n+2008-07-17  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/36855\n+\t* g++.dg/ext/has_trivial_destructor.C: Rename to...\n+\t* g++.dg/ext/has_trivial_destructor-1.C: ... this.\n+\t* g++.dg/ext/has_trivial_destructor-2.C: New.\n+\n 2008-07-17  Paolo Bonzini  <bonzini@gnu.org>\n \n \tPR rtl-optimization/36753"}, {"sha": "719f05fd7a56ea323627c59a23df97327b9cddc7", "filename": "gcc/testsuite/g++.dg/ext/has_trivial_destructor-1.C", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fhas_trivial_destructor-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fhas_trivial_destructor-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fhas_trivial_destructor-1.C?ref=afb86620e1ae16abdde90ccca6e106472ef6d70d", "previous_filename": "gcc/testsuite/g++.dg/ext/has_trivial_destructor.C"}, {"sha": "f9dacf179e19029411e02e2c0a5efadac16ec102", "filename": "gcc/testsuite/g++.dg/ext/has_trivial_destructor-2.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fhas_trivial_destructor-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afb86620e1ae16abdde90ccca6e106472ef6d70d/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fhas_trivial_destructor-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fhas_trivial_destructor-2.C?ref=afb86620e1ae16abdde90ccca6e106472ef6d70d", "patch": "@@ -0,0 +1,3 @@\n+// PR c++/36855\n+\n+typedef char assert_0 [__has_trivial_destructor (int&) ? 1 : -1];"}]}