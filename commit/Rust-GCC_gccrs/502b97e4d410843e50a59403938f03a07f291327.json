{"sha": "502b97e4d410843e50a59403938f03a07f291327", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTAyYjk3ZTRkNDEwODQzZTUwYTU5NDAzOTM4ZjAzYTA3ZjI5MTMyNw==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2014-12-28T12:03:02Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2014-12-28T12:03:02Z"}, "message": "re PR fortran/56867 (Missing temporary with string array assignment)\n\n2014-12-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/56867\n\t* trans-array.c (gfc_conv_resolve_dependencies):  Also check\n\tdependencies when there may be substrings of character arrays.\n\n2014-12-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/56867\n\t* gfortran.dg/dependency_45.f90:  New test.\n\nFrom-SVN: r219089", "tree": {"sha": "ab1865383e8bab55f395065696f9b6e1acad3f55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab1865383e8bab55f395065696f9b6e1acad3f55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/502b97e4d410843e50a59403938f03a07f291327", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/502b97e4d410843e50a59403938f03a07f291327", "html_url": "https://github.com/Rust-GCC/gccrs/commit/502b97e4d410843e50a59403938f03a07f291327", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/502b97e4d410843e50a59403938f03a07f291327/comments", "author": null, "committer": null, "parents": [{"sha": "85a1cdffa2cdc6e328ea08cfb4f7bf488209bed9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85a1cdffa2cdc6e328ea08cfb4f7bf488209bed9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85a1cdffa2cdc6e328ea08cfb4f7bf488209bed9"}], "stats": {"total": 30, "additions": 30, "deletions": 0}, "files": [{"sha": "d7a76a3c9f9128fc5c5249299f1d3046fa28141e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=502b97e4d410843e50a59403938f03a07f291327", "patch": "@@ -1,3 +1,9 @@\n+2014-12-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/56867\n+\t* trans-array.c (gfc_conv_resolve_dependencies):  Also check\n+\tdependencies when there may be substrings of character arrays.\n+\n 2014-12-27  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/54756"}, {"sha": "ebd7f11a53bb9301cf238b26c34c3a4308a370d3", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=502b97e4d410843e50a59403938f03a07f291327", "patch": "@@ -4355,6 +4355,13 @@ gfc_conv_resolve_dependencies (gfc_loopinfo * loop, gfc_ss * dest,\n \t      && ss_expr->rank)\n \t    nDepend = gfc_check_dependency (dest_expr, ss_expr, true);\n \n+\t  /* Check for cases like   c(:)(1:2) = c(2)(2:3)  */\n+\t  if (!nDepend && dest_expr->rank > 0\n+\t      && dest_expr->ts.type == BT_CHARACTER\n+\t      && ss_expr->expr_type == EXPR_VARIABLE)\n+\t    \n+\t    nDepend = gfc_check_dependency (dest_expr, ss_expr, false);\n+\n \t  continue;\n \t}\n "}, {"sha": "ebcfdc4c769cee064fdbaefb2e207aee41c5c4d4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=502b97e4d410843e50a59403938f03a07f291327", "patch": "@@ -1,3 +1,8 @@\n+2014-12-28  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/56867\n+\t* gfortran.dg/dependency_45.f90:  New test.\n+\n 2014-12-27  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/54756"}, {"sha": "8b43f7507b6f19cadf369ef151bc875fb0783501", "filename": "gcc/testsuite/gfortran.dg/dependency_45.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ftestsuite%2Fgfortran.dg%2Fdependency_45.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/502b97e4d410843e50a59403938f03a07f291327/gcc%2Ftestsuite%2Fgfortran.dg%2Fdependency_45.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdependency_45.f90?ref=502b97e4d410843e50a59403938f03a07f291327", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do run }\n+! { dg-options \"-Warray-temporaries\" }\n+! PR 56867 - substrings were not checked for dependency.\n+program main\n+  character(len=4) :: a\n+  character(len=4) :: c(3)\n+  c(1) = 'abcd'\n+  c(2) = '1234'\n+  c(3) = 'wxyz'\n+  c(:)(1:2) = c(2)(2:3)   ! { dg-warning \"array temporary\" }\n+  if (c(3) .ne. '23yz') call abort\n+end program main"}]}