{"sha": "89a01fcf4cff990c0d25d048ae01abb476070d05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODlhMDFmY2Y0Y2ZmOTkwYzBkMjVkMDQ4YWUwMWFiYjQ3NjA3MGQwNQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2015-11-26T12:04:50Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2015-11-26T12:04:50Z"}, "message": "re PR c++/68527 (ICE with -fdump-ada-spec on invalid C++ 11 code)\n\n\tPR c++/68527\n\t* c-ada-spec.c (dump_nested_types): Add guard for error_mark_node.\n\t(print_ada_struct_decl): Likewise.\n\nFrom-SVN: r230942", "tree": {"sha": "f24a3de5b3494c6c366d702ed408f860d8e5b571", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f24a3de5b3494c6c366d702ed408f860d8e5b571"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/89a01fcf4cff990c0d25d048ae01abb476070d05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89a01fcf4cff990c0d25d048ae01abb476070d05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89a01fcf4cff990c0d25d048ae01abb476070d05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89a01fcf4cff990c0d25d048ae01abb476070d05/comments", "author": null, "committer": null, "parents": [{"sha": "d083907f1fe77f592eec0d427f9a114957f52f45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d083907f1fe77f592eec0d427f9a114957f52f45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d083907f1fe77f592eec0d427f9a114957f52f45"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "595fc3a9d6379cfc7abb4b6822a56f61e771b994", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89a01fcf4cff990c0d25d048ae01abb476070d05/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89a01fcf4cff990c0d25d048ae01abb476070d05/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=89a01fcf4cff990c0d25d048ae01abb476070d05", "patch": "@@ -1,3 +1,9 @@\n+2015-11-26  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR c++/68527\n+\t* c-ada-spec.c (dump_nested_types): Add guard for error_mark_node.\n+\t(print_ada_struct_decl): Likewise.\n+\n 2015-11-23  Igor Zamyatin  <igor.zamyatin@intel.com>\n \n \tPR c++/68001"}, {"sha": "3726a681fa9dad1870fc561ecdd1312db7c9f6f6", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/89a01fcf4cff990c0d25d048ae01abb476070d05/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/89a01fcf4cff990c0d25d048ae01abb476070d05/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=89a01fcf4cff990c0d25d048ae01abb476070d05", "patch": "@@ -2461,7 +2461,8 @@ dump_nested_types (pretty_printer *buffer, tree t, tree parent, bool forward,\n   field = TYPE_FIELDS (outer);\n   while (field)\n     {\n-      if ((TREE_TYPE (field) != outer\n+      if (((TREE_TYPE (field) != outer\n+\t    && TREE_TYPE (field) != error_mark_node)\n \t   || (TREE_CODE (TREE_TYPE (field)) == POINTER_TYPE\n \t       && TREE_TYPE (TREE_TYPE (field)) != outer))\n \t   && (!TYPE_NAME (TREE_TYPE (field))\n@@ -3230,9 +3231,10 @@ print_ada_struct_decl (pretty_printer *buffer, tree node, tree type, int spc,\n \t\t}\n \t    }\n \t  /* Avoid printing the structure recursively.  */\n-\t  else if ((TREE_TYPE (tmp) != node\n-\t\t   || (TREE_CODE (TREE_TYPE (tmp)) == POINTER_TYPE\n-\t\t       && TREE_TYPE (TREE_TYPE (tmp)) != node))\n+\t  else if (((TREE_TYPE (tmp) != node\n+\t\t     && TREE_TYPE (tmp) != error_mark_node)\n+\t\t    || (TREE_CODE (TREE_TYPE (tmp)) == POINTER_TYPE\n+\t\t\t&& TREE_TYPE (TREE_TYPE (tmp)) != node))\n \t\t   && TREE_CODE (tmp) != TYPE_DECL\n \t\t   && !TREE_STATIC (tmp))\n \t    {"}]}