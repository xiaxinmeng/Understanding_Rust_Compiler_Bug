{"sha": "78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzhhMGQ3MGNkZjU1MDIzMjAxNThkMWEzZmY0MWY1YmRjYWRhYmRiMA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-02-01T23:51:38Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-02-01T23:51:38Z"}, "message": "frame.c (find_fde): Convert for loop to do-while so compiler sees it's always executed at least once.\n\n\t* frame.c (find_fde): Convert for loop to do-while so compiler\n\tsees it's always executed at least once.\n\t* libgcc2.c (BBINBUFSIZE): Kill.\n\t(__bb_init_prg): Use fgets.\n\t(__bb_exit_trace_func): Don't paste strings.\n\t* unroll.c (unroll_loop): Initialize unroll_type, not\n\tunroll_number, and tweak logic to match.\n\n\t* i386.c (ix86_expand_int_movcc): Add explicit 'return 0' in\n\tall failure paths.\n\t(ix86_flags_dependant): Likewise.  Disentangle control flow.\n\t(ix86_sched_reorder): Break guts out to\n\tix86_sched_reorder_pentium and ix86_sched_reorder_ppro.\n\t(ix86_sched_reorder_ppro): Initialize pair2 and insnp before\n\tany possible use.\n\n\t* i386.h (MACHINE_STATE_SAVE, MACHINE_STATE_RESTORE): Don't\n\tuse string concatenation.  Don't save and restore esi.\n\n\t* fixinc/Makefile.in (fixincl.sh): Don't depend on inclhack.def.\n\t(machname.h): Remove script to separate file.  Use two-step\n\tsequence so target is not created if script fails.\n\t* fixinc/gen-machname.h: New file.  Handle case where no non-reserved\n\tidentifiers are defined.\n\t* fixinc/fixlib.c (mn_get_regexps): Return a flag: if MN_NAME_PAT is\n\tan empty string, machine_name doesn't need to do anything at\n\tall.\n\t(is_cxx_header): Add more cases to regexp.\n\t* fixinc/fixlib.h: Update prototype.\n\t* fixinc/fixtests.c, fixinc/fixfixes.c: Update callers of\n\tmn_get_regexps.\n\t* fixinc/fixincl.c: Define NO_BOGOSITY.\n\n\t* fixinc/inclhack.def (no_double_slash, else_endif_label): Ifdef out.\n\t(hp_sysfile): Add missing comma.\n\t(math_exception): Put the wrapper ifdefs at the beginning and\n\tthe end of the file.\n\t* fixinc/fixincl.x, fixinc/inclhack.sh: Regenerate.\n\nFrom-SVN: r31744", "tree": {"sha": "5baaef8b878781ee490f5410e86c28c9499bd88f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5baaef8b878781ee490f5410e86c28c9499bd88f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/comments", "author": null, "committer": null, "parents": [{"sha": "f232183759f43faadb2a392c6e03aaacd2172371", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f232183759f43faadb2a392c6e03aaacd2172371", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f232183759f43faadb2a392c6e03aaacd2172371"}], "stats": {"total": 837, "additions": 374, "deletions": 463}, "files": [{"sha": "2030daa05d04c9814819397f754e283adfb72931", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 168, "deletions": 142, "changes": 310, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -4917,7 +4917,7 @@ ix86_expand_int_movcc (operands)\n     {\n       /* Try a few things more with specific constants and a variable.  */\n \n-      optab op = NULL;\n+      optab op;\n       rtx var, orig_out, out, tmp;\n \n       if (optimize_size)\n@@ -4933,6 +4933,8 @@ ix86_expand_int_movcc (operands)\n \t    operands[3] = constm1_rtx, op = and_optab;\n \t  else if (INTVAL (operands[2]) == -1)\n \t    operands[3] = const0_rtx, op = ior_optab;\n+\t  else\n+\t    return 0; /* FAIL */\n \t}\n       else if (GET_CODE (operands[3]) == CONST_INT)\n \t{\n@@ -4941,9 +4943,10 @@ ix86_expand_int_movcc (operands)\n \t    operands[2] = constm1_rtx, op = and_optab;\n \t  else if (INTVAL (operands[3]) == -1)\n \t    operands[2] = const0_rtx, op = ior_optab;\n+\t  else\n+\t    return 0; /* FAIL */\n \t}\n-\n-      if (op == NULL)\n+      else\n         return 0; /* FAIL */\n \n       orig_out = operands[0];\n@@ -5901,17 +5904,21 @@ ix86_flags_dependant (insn, dep_insn, insn_type)\n       set = SET_DEST (XVECEXP (PATTERN (dep_insn), 0, 0));\n       set2 = SET_DEST (XVECEXP (PATTERN (dep_insn), 0, 0));\n     }\n+  else\n+    return 0;\n \n-  if (set && GET_CODE (set) == REG && REGNO (set) == FLAGS_REG)\n-    {\n-      /* This test is true if the dependant insn reads the flags but\n-\t not any other potentially set register.  */\n-      if (reg_overlap_mentioned_p (set, PATTERN (insn))\n-\t  && (!set2 || !reg_overlap_mentioned_p (set2, PATTERN (insn))))\n-\treturn 1;\n-    }\n+  if (GET_CODE (set) != REG || REGNO (set) != FLAGS_REG)\n+    return 0;\n \n-  return 0;\n+  /* This test is true if the dependant insn reads the flags but\n+     not any other potentially set register.  */\n+  if (!reg_overlap_mentioned_p (set, PATTERN (insn)))\n+    return 0;\n+\n+  if (set2 && reg_overlap_mentioned_p (set2, PATTERN (insn)))\n+    return 0;\n+\n+  return 1;\n }\n \n /* A subroutine of ix86_adjust_cost -- return true iff INSN has a memory\n@@ -6208,166 +6215,185 @@ ix86_pent_find_pair (e_ready, ready, type, first)\n   return bestinsnp;\n }\n \n-/* We are about to being issuing insns for this clock cycle.  \n-   Override the default sort algorithm to better slot instructions.  */\n+/* Subroutines of ix86_sched_reorder.  */\n \n-int\n-ix86_sched_reorder (dump, sched_verbose, ready, n_ready, clock_var)\n-     FILE *dump ATTRIBUTE_UNUSED;\n-     int sched_verbose ATTRIBUTE_UNUSED;\n+void\n+ix86_sched_reorder_pentium (ready, e_ready)\n      rtx *ready;\n-     int n_ready, clock_var ATTRIBUTE_UNUSED;\n+     rtx *e_ready;\n {\n-  rtx *e_ready = ready + n_ready - 1;\n+  enum attr_pent_pair pair1, pair2;\n   rtx *insnp;\n-  int i;\n \n-  if (n_ready < 2)\n-    goto out;\n+  /* This wouldn't be necessary if Haifa knew that static insn ordering\n+     is important to which pipe an insn is issued to.  So we have to make\n+     some minor rearrangements.  */\n \n-  switch (ix86_cpu)\n+  pair1 = ix86_safe_pent_pair (*e_ready);\n+\n+  /* If the first insn is non-pairable, let it be.  */\n+  if (pair1 == PENT_PAIR_NP)\n+    return;\n+\n+  pair2 = PENT_PAIR_NP;\n+  insnp = 0;\n+\n+  /* If the first insn is UV or PV pairable, search for a PU\n+     insn to go with.  */\n+  if (pair1 == PENT_PAIR_UV || pair1 == PENT_PAIR_PV)\n     {\n-    default:\n-      goto out;\n+      insnp = ix86_pent_find_pair (e_ready-1, ready,\n+\t\t\t\t   PENT_PAIR_PU, *e_ready);\n+      if (insnp)\n+\tpair2 = PENT_PAIR_PU;\n+    }\n \n-    case PROCESSOR_PENTIUM:\n-      /* This wouldn't be necessary if Haifa knew that static insn ordering\n-\t is important to which pipe an insn is issued to.  So we have to make\n-\t some minor rearrangements.  */\n-      {\n-\tenum attr_pent_pair pair1, pair2;\n+  /* If the first insn is PU or UV pairable, search for a PV\n+     insn to go with.  */\n+  if (pair2 == PENT_PAIR_NP\n+      && (pair1 == PENT_PAIR_PU || pair1 == PENT_PAIR_UV))\n+    {\n+      insnp = ix86_pent_find_pair (e_ready-1, ready,\n+\t\t\t\t   PENT_PAIR_PV, *e_ready);\n+      if (insnp)\n+\tpair2 = PENT_PAIR_PV;\n+    }\n \n-\tpair1 = ix86_safe_pent_pair (*e_ready);\n+  /* If the first insn is pairable, search for a UV\n+     insn to go with.  */\n+  if (pair2 == PENT_PAIR_NP)\n+    {\n+      insnp = ix86_pent_find_pair (e_ready-1, ready,\n+\t\t\t\t   PENT_PAIR_UV, *e_ready);\n+      if (insnp)\n+\tpair2 = PENT_PAIR_UV;\n+    }\n \n-\t/* If the first insn is non-pairable, let it be.  */\n-\tif (pair1 == PENT_PAIR_NP)\n-\t  goto out;\n-\tpair2 = PENT_PAIR_NP;\n+  if (pair2 == PENT_PAIR_NP)\n+    return;\n \n-\t/* If the first insn is UV or PV pairable, search for a PU\n-\t   insn to go with.  */\n-\tif (pair1 == PENT_PAIR_UV || pair1 == PENT_PAIR_PV)\n-\t  {\n-\t    insnp = ix86_pent_find_pair (e_ready-1, ready,\n-\t\t\t\t\t PENT_PAIR_PU, *e_ready);\n-\t    if (insnp)\n-\t      pair2 = PENT_PAIR_PU;\n-\t  }\n+  /* Found something!  Decide if we need to swap the order.  */\n+  if (pair1 == PENT_PAIR_PV || pair2 == PENT_PAIR_PU\n+      || (pair1 == PENT_PAIR_UV && pair2 == PENT_PAIR_UV\n+\t  && ix86_safe_memory (*e_ready) == MEMORY_BOTH\n+\t  && ix86_safe_memory (*insnp) == MEMORY_LOAD))\n+    ix86_reorder_insn (insnp, e_ready);\n+  else\n+    ix86_reorder_insn (insnp, e_ready - 1);\n+}\n \n-\t/* If the first insn is PU or UV pairable, search for a PV\n-\t   insn to go with.  */\n-\tif (pair2 == PENT_PAIR_NP\n-\t    && (pair1 == PENT_PAIR_PU || pair1 == PENT_PAIR_UV))\n-\t  {\n-\t    insnp = ix86_pent_find_pair (e_ready-1, ready,\n-\t\t\t\t\t PENT_PAIR_PV, *e_ready);\n-\t    if (insnp)\n-\t      pair2 = PENT_PAIR_PV;\n-\t  }\n+void\n+ix86_sched_reorder_ppro (ready, e_ready)\n+     rtx *ready;\n+     rtx *e_ready;\n+{\n+  rtx decode[3];\n+  enum attr_ppro_uops cur_uops;\n+  int issued_this_cycle;\n+  rtx *insnp;\n+  int i;\n \n-\t/* If the first insn is pairable, search for a UV\n-\t   insn to go with.  */\n-\tif (pair2 == PENT_PAIR_NP)\n-\t  {\n-\t    insnp = ix86_pent_find_pair (e_ready-1, ready,\n-\t\t\t\t\t PENT_PAIR_UV, *e_ready);\n-\t    if (insnp)\n-\t      pair2 = PENT_PAIR_UV;\n-\t  }\n+  /* At this point .ppro.decode contains the state of the three \n+     decoders from last \"cycle\".  That is, those insns that were\n+     actually independent.  But here we're scheduling for the \n+     decoder, and we may find things that are decodable in the\n+     same cycle.  */\n \n-\tif (pair2 == PENT_PAIR_NP)\n-\t  goto out;\n+  memcpy (decode, ix86_sched_data.ppro.decode, sizeof(decode));\n+  issued_this_cycle = 0;\n \n-\t/* Found something!  Decide if we need to swap the order.  */\n-\tif (pair1 == PENT_PAIR_PV || pair2 == PENT_PAIR_PU\n-\t    || (pair1 == PENT_PAIR_UV && pair2 == PENT_PAIR_UV\n-\t\t&& ix86_safe_memory (*e_ready) == MEMORY_BOTH\n-\t\t&& ix86_safe_memory (*insnp) == MEMORY_LOAD))\n-\t  ix86_reorder_insn (insnp, e_ready);\n-\telse\n-\t  ix86_reorder_insn (insnp, e_ready - 1);\n-      }\n-      break;\n+  insnp = e_ready;\n+  cur_uops = ix86_safe_ppro_uops (*insnp);\n \n-    case PROCESSOR_PENTIUMPRO:\n-      {\n-\trtx decode[3];\n-\tenum attr_ppro_uops cur_uops;\n-\tint issued_this_cycle;\n+  /* If the decoders are empty, and we've a complex insn at the\n+     head of the priority queue, let it issue without complaint.  */\n+  if (decode[0] == NULL)\n+    {\n+      if (cur_uops == PPRO_UOPS_MANY)\n+\t{\n+\t  decode[0] = *insnp;\n+\t  goto ppro_done;\n+\t}\n \n-\t/* At this point .ppro.decode contains the state of the three \n-\t   decoders from last \"cycle\".  That is, those insns that were\n-\t   actually independant.  But here we're scheduling for the \n-\t   decoder, and we may find things that are decodable in the\n-\t   same cycle.  */\n+      /* Otherwise, search for a 2-4 uop unsn to issue.  */\n+      while (cur_uops != PPRO_UOPS_FEW)\n+\t{\n+\t  if (insnp == ready)\n+\t    break;\n+\t  cur_uops = ix86_safe_ppro_uops (*--insnp);\n+\t}\n \n-\tmemcpy (decode, ix86_sched_data.ppro.decode, sizeof(decode));\n-\tissued_this_cycle = 0;\n+      /* If so, move it to the head of the line.  */\n+      if (cur_uops == PPRO_UOPS_FEW)\n+\tix86_reorder_insn (insnp, e_ready);\n+\n+      /* Issue the head of the queue.  */\n+      issued_this_cycle = 1;\n+      decode[0] = *e_ready--;\n+    }\n+\n+  /* Look for simple insns to fill in the other two slots.  */\n+  for (i = 1; i < 3; ++i)\n+    if (decode[i] == NULL)\n+      {\n+\tif (ready >= e_ready)\n+\t  goto ppro_done;\n \n \tinsnp = e_ready;\n \tcur_uops = ix86_safe_ppro_uops (*insnp);\n-\n-\t/* If the decoders are empty, and we've a complex insn at the\n-\t   head of the priority queue, let it issue without complaint.  */\n-\tif (decode[0] == NULL)\n+\twhile (cur_uops != PPRO_UOPS_ONE)\n \t  {\n-\t    if (cur_uops == PPRO_UOPS_MANY)\n-\t      {\n-\t\tdecode[0] = *insnp;\n-\t\tgoto ppro_done;\n-\t      }\n+\t    if (insnp == ready)\n+\t      break;\n+\t    cur_uops = ix86_safe_ppro_uops (*--insnp);\n+\t  }\n \n-\t    /* Otherwise, search for a 2-4 uop unsn to issue.  */\n-\t    while (cur_uops != PPRO_UOPS_FEW)\n-\t      {\n-\t\tif (insnp == ready)\n-\t\t  break;\n-\t\tcur_uops = ix86_safe_ppro_uops (*--insnp);\n-\t      }\n+\t/* Found one.  Move it to the head of the queue and issue it.  */\n+\tif (cur_uops == PPRO_UOPS_ONE)\n+\t  {\n+\t    ix86_reorder_insn (insnp, e_ready);\n+\t    decode[i] = *e_ready--;\n+\t    issued_this_cycle++;\n+\t    continue;\n+\t  }\n \n-\t    /* If so, move it to the head of the line.  */\n-\t    if (cur_uops == PPRO_UOPS_FEW)\n-\t      ix86_reorder_insn (insnp, e_ready);\n+\t/* ??? Didn't find one.  Ideally, here we would do a lazy split\n+\t   of 2-uop insns, issue one and queue the other.  */\n+      }\n \n-\t    /* Issue the head of the queue.  */\n-\t    issued_this_cycle = 1;\n-\t    decode[0] = *e_ready--;\n-\t  }\n+ ppro_done:\n+  if (issued_this_cycle == 0)\n+    issued_this_cycle = 1;\n+  ix86_sched_data.ppro.issued_this_cycle = issued_this_cycle;\n+}\n \n-\t/* Look for simple insns to fill in the other two slots.  */\n-\tfor (i = 1; i < 3; ++i)\n-\t  if (decode[i] == NULL)\n-\t    {\n-\t      if (ready >= e_ready)\n-\t\tgoto ppro_done;\n+  \n+/* We are about to being issuing insns for this clock cycle.  \n+   Override the default sort algorithm to better slot instructions.  */\n+int\n+ix86_sched_reorder (dump, sched_verbose, ready, n_ready, clock_var)\n+     FILE *dump ATTRIBUTE_UNUSED;\n+     int sched_verbose ATTRIBUTE_UNUSED;\n+     rtx *ready;\n+     int n_ready;\n+     int clock_var ATTRIBUTE_UNUSED;\n+{\n+  rtx *e_ready = ready + n_ready - 1;\n \n-\t      insnp = e_ready;\n-\t      cur_uops = ix86_safe_ppro_uops (*insnp);\n-\t      while (cur_uops != PPRO_UOPS_ONE)\n-\t\t{\n-\t\t  if (insnp == ready)\n-\t\t    break;\n-\t\t  cur_uops = ix86_safe_ppro_uops (*--insnp);\n-\t\t}\n+  if (n_ready < 2)\n+    goto out;\n \n-\t      /* Found one.  Move it to the head of the queue and issue it.  */\n-\t      if (cur_uops == PPRO_UOPS_ONE)\n-\t\t{\n-\t\t  ix86_reorder_insn (insnp, e_ready);\n-\t\t  decode[i] = *e_ready--;\n-\t\t  issued_this_cycle++;\n-\t\t  continue;\n-\t\t}\n+  switch (ix86_cpu)\n+    {\n+    default:\n+      break;\n \n-\t      /* ??? Didn't find one.  Ideally, here we would do a lazy split\n-\t\t of 2-uop insns, issue one and queue the other.  */\n-\t    }\n+    case PROCESSOR_PENTIUM:\n+      ix86_sched_reorder_pentium (ready, e_ready);\n+      break;\n \n-      ppro_done:\n-\tif (issued_this_cycle == 0)\n-\t  issued_this_cycle = 1;\n-\tix86_sched_data.ppro.issued_this_cycle = issued_this_cycle;\n-      }\n+    case PROCESSOR_PENTIUMPRO:\n+      ix86_sched_reorder_ppro (ready, e_ready);\n       break;\n     }\n "}, {"sha": "95532c94a14131994ed5a6c26ba2f35fc61ec636", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 17, "deletions": 18, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -1288,11 +1288,11 @@ typedef struct ix86_args {\n \tNote that function `__bb_trace_ret' must not change the\n \tmachine state, especially the flag register. To grant\n \tthis, you must output code to save and restore registers\n-\teither in this macro or in the macros MACHINE_STATE_SAVE_RET\n-\tand MACHINE_STATE_RESTORE_RET. The last two macros will be\n+\teither in this macro or in the macros MACHINE_STATE_SAVE\n+\tand MACHINE_STATE_RESTORE. The last two macros will be\n \tused in the function `__bb_trace_ret', so you must make\n \tsure that the function prologue does not change any \n-\tregister prior to saving it with MACHINE_STATE_SAVE_RET.\n+\tregister prior to saving it with MACHINE_STATE_SAVE.\n \n    else if profiling_block_flag != 0:\n \n@@ -1324,34 +1324,33 @@ emit_call_insn (gen_call (gen_rtx_MEM (Pmode,\t\t\\\n    On the i386 the initialization code at the begin of\n    function `__bb_trace_func' contains a `sub' instruction\n    therefore we handle save and restore of the flag register \n-   in the BLOCK_PROFILER macro. */\n+   in the BLOCK_PROFILER macro.\n+\n+   Note that ebx, esi, and edi are callee-save, so we don't have to\n+   preserve them explicitly.  */\n \n #define MACHINE_STATE_SAVE(ID)\t\t\t\t\t\\\n do {\t\t\t\t\t\t\t\t\\\n   register int eax_ __asm__(\"eax\");\t\t\t\t\\\n   register int ecx_ __asm__(\"ecx\");\t\t\t\t\\\n   register int edx_ __asm__(\"edx\");\t\t\t\t\\\n-  register int esi_ __asm__(\"esi\");\t\t\t\t\\\n-  __asm__ __volatile__ (\t\t\t\t\t\\\n-\t\"push{l} %0\\n\\t\"\t\t\t\t\t\\\n-\t\"push{l} %1\\n\\t\"\t\t\t\t\t\\\n-\t\"push{l} %2\\n\\t\"\t\t\t\t\t\\\n-\t\"push{l} %3\"\t\t\t\t\t\t\\\n-\t: : \"r\"(eax_), \"r\"(ecx_), \"r\"(edx_), \"r\"(esi_));\t\\\n+  __asm__ __volatile__ (\"\\\n+push{l} %0\\n\\t\\\n+push{l} %1\\n\\t\\\n+push{l} %2\"\t\t\t\t\t\t\t\\\n+\t: : \"r\"(eax_), \"r\"(ecx_), \"r\"(edx_));\t\t\t\\\n } while (0);\n \n #define MACHINE_STATE_RESTORE(ID)\t\t\t\t\\\n do {\t\t\t\t\t\t\t\t\\\n   register int eax_ __asm__(\"eax\");\t\t\t\t\\\n   register int ecx_ __asm__(\"ecx\");\t\t\t\t\\\n   register int edx_ __asm__(\"edx\");\t\t\t\t\\\n-  register int esi_ __asm__(\"esi\");\t\t\t\t\\\n-  __asm__ __volatile__ (\t\t\t\t\t\\\n-\t\"pop{l} %3\\n\\t\"\t\t\t\t\t\t\\\n-\t\"pop{l} %2\\n\\t\"\t\t\t\t\t\t\\\n-\t\"pop{l} %1\\n\\t\"\t\t\t\t\t\t\\\n-\t\"pop{l} %0\"\t\t\t\t\t\t\\\n-\t: \"=r\"(eax_), \"=r\"(ecx_), \"=r\"(edx_), \"=r\"(esi_));\t\\\n+  __asm__ __volatile__ (\"\\\n+pop{l} %2\\n\\t\\\n+pop{l} %1\\n\\t\\\n+pop{l} %0\"\t\t\t\t\t\t\t\\\n+\t: \"=r\"(eax_), \"=r\"(ecx_), \"=r\"(edx_));\t\t\t\\\n } while (0);\n \n /* EXIT_IGNORE_STACK should be nonzero if, when returning from a function,"}, {"sha": "af78996e7308630d4bb389212a1b3b821040c99d", "filename": "gcc/fixinc/Makefile.in", "status": "modified", "additions": 5, "deletions": 13, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2FMakefile.in?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -1,5 +1,5 @@\n # Makefile for GNU compilers.\n-#   Copyright (C) 1998, 1999 Free Software Foundation, Inc.\n+#   Copyright (C) 1998, 1999, 2000 Free Software Foundation, Inc.\n \n #This file is part of GNU CC.\n \n@@ -101,7 +101,8 @@ fixincl.x: fixincl.tpl inclhack.def\n inclhack.sh: inclhack.def inclhack.tpl hackshell.tpl\n \tcd $(srcdir) ; ./genfixes $@\n \n-fixincl.sh: inclhack.def inclhack.tpl\n+# fixinc.sh, unlike the other two, has _no_ dependency on the .def file.\n+fixincl.sh: inclhack.tpl\n \tcd $(srcdir) ; ./genfixes $@\n \n clean:\n@@ -137,15 +138,6 @@ Makefile: Makefile.in ../config.status\n \tcd .. \\\n \t  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status\n \n-# Black magic.\n-# Note dependency on ASCII. \\040 = space, \\011 = tab, \\012 = newline.\n-\n machname.h: ../specs\n-\t@tr -s '\\040\\011' '\\012\\012' < ../specs | \\\n-\t    sed -n 's/^.*-D\\([a-zA-Z_][a-zA-Z0-9_]*\\).*$$/\\1/p' | sort -u | \\\n-\t    grep -v '^_[_A-Z]' > mn.T\n-\t@echo \"Forbidden identifiers: `tr '\\012' ' ' <mn.T`\"\n-\t@sed 's/^/\\\\\\\\</; s/$$/\\\\\\\\>/' <mn.T | tr '\\012' '|' > mn.T2\n-\t@echo '' >>mn.T2\n-\t@sed 's/^/#define MN_NAME_PAT \"/; s/|$$/\"/' < mn.T2 > machname.h\n-\t@-rm -f mn.T mn.T2\n+\t$(SHELL) $(srcdir)/gen-machname.h < ../specs > machname.T\n+\tmv -f machname.T machname.h"}, {"sha": "c665b755abd1f80ee6444b5998bd995ace2dd792", "filename": "gcc/fixinc/fixfixes.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixfixes.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixfixes.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixfixes.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -566,7 +566,11 @@ FIX_PROC_HEAD( machine_name_fix )\n   char scratch[SCRATCHSZ];\n   size_t len;\n \n-  mn_get_regexps (&label_re, &name_re, \"machine_name_fix\");\n+  if (mn_get_regexps (&label_re, &name_re, \"machine_name_fix\"))\n+    /* This platform doesn't need this fix.  We can only get here if\n+       someone is running fixfixes by hand, but let's be polite.  */\n+    goto done;\n+\n   scratch[0] = '_';\n   scratch[1] = '_';\n "}, {"sha": "cfd7d9e20c42d82c0687a62c412df90a0fb0fcc7", "filename": "gcc/fixinc/fixincl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixincl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixincl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -33,6 +33,8 @@ Boston, MA 02111-1307, USA.  */\n \n #include \"server.h\"\n \n+#define NO_BOGOSITY\n+\n /*  Quality Assurance Marker  :-)\n \n     Any file that contains this string is presumed to have"}, {"sha": "75ae292388f47f9b5c63544d76ff51a29ba088f9", "filename": "gcc/fixinc/fixincl.x", "status": "modified", "additions": 90, "deletions": 164, "changes": 254, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.x?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -5,7 +5,7 @@\n  * files which are fixed to work correctly with ANSI C and placed in a\n  * directory that GNU C will search.\n  *\n- * This file contains 115 fixup descriptions.\n+ * This file contains 113 fixup descriptions.\n  *\n  * See README-fixinc for more information.\n  *\n@@ -1290,43 +1290,11 @@ const char* apzDec_Intern_AsmPatch[] = { \"sed\",\n #endif\\n\",\n     (char*)NULL };\n \n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description of No_Double_Slash fix\n- */\n-#define NO_DOUBLE_SLASH_FIXIDX           28\n-tSCC zNo_Double_SlashName[] =\n-     \"no_double_slash\";\n-\n-/*\n- *  File name selection pattern\n- */\n-#define zNo_Double_SlashList (char*)NULL\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzNo_Double_SlashMachs (const char**)NULL\n-\n-/*\n- *  perform the C function call test\n- */\n-tSCC zNo_Double_SlashFTst0[] = \"double_slash\";\n-\n-#define    NO_DOUBLE_SLASH_TEST_CT  1\n-tTestDesc aNo_Double_SlashTests[] = {\n-  { TT_FUNCTION, zNo_Double_SlashFTst0,   0 /* unused */ }, };\n-\n-/*\n- *  Fix Command Arguments for No_Double_Slash\n- */\n-const char* apzNo_Double_SlashPatch[] = {\"no_double_slash\",\n-    (char*)NULL };\n-\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Ecd_Cursor fix\n  */\n-#define ECD_CURSOR_FIXIDX                29\n+#define ECD_CURSOR_FIXIDX                28\n tSCC zEcd_CursorName[] =\n      \"ecd_cursor\";\n \n@@ -1353,7 +1321,7 @@ const char* apzEcd_CursorPatch[] = { \"sed\",\n  *\n  *  Description of Sco5_Stat_Wrappers fix\n  */\n-#define SCO5_STAT_WRAPPERS_FIXIDX        30\n+#define SCO5_STAT_WRAPPERS_FIXIDX        29\n tSCC zSco5_Stat_WrappersName[] =\n      \"sco5_stat_wrappers\";\n \n@@ -1386,43 +1354,11 @@ extern \\\"C\\\"\\\\\\n\\\n #endif /* __cplusplus */\\\\\\n\",\n     (char*)NULL };\n \n-/* * * * * * * * * * * * * * * * * * * * * * * * * *\n- *\n- *  Description of End_Else_Label fix\n- */\n-#define END_ELSE_LABEL_FIXIDX            31\n-tSCC zEnd_Else_LabelName[] =\n-     \"end_else_label\";\n-\n-/*\n- *  File name selection pattern\n- */\n-#define zEnd_Else_LabelList (char*)NULL\n-/*\n- *  Machine/OS name selection pattern\n- */\n-#define apzEnd_Else_LabelMachs (const char**)NULL\n-\n-/*\n- *  perform the C function call test\n- */\n-tSCC zEnd_Else_LabelFTst0[] = \"else_endif_label\";\n-\n-#define    END_ELSE_LABEL_TEST_CT  1\n-tTestDesc aEnd_Else_LabelTests[] = {\n-  { TT_FUNCTION, zEnd_Else_LabelFTst0,   0 /* unused */ }, };\n-\n-/*\n- *  Fix Command Arguments for End_Else_Label\n- */\n-const char* apzEnd_Else_LabelPatch[] = {\"else_endif_label\",\n-    (char*)NULL };\n-\n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Hp_Inline fix\n  */\n-#define HP_INLINE_FIXIDX                 32\n+#define HP_INLINE_FIXIDX                 30\n tSCC zHp_InlineName[] =\n      \"hp_inline\";\n \n@@ -1458,7 +1394,7 @@ const char* apzHp_InlinePatch[] = { \"sed\",\n  *\n  *  Description of Hp_Sysfile fix\n  */\n-#define HP_SYSFILE_FIXIDX                33\n+#define HP_SYSFILE_FIXIDX                31\n tSCC zHp_SysfileName[] =\n      \"hp_sysfile\";\n \n@@ -1486,14 +1422,14 @@ tTestDesc aHp_SysfileTests[] = {\n  *  Fix Command Arguments for Hp_Sysfile\n  */\n const char* apzHp_SysfilePatch[] = { \"sed\",\n-    \"-e\", \"s/(\\\\.\\\\.\\\\.)/(struct file * ...)/\",\n+    \"-e\", \"s/(\\\\.\\\\.\\\\.)/(struct file *, ...)/\",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n  *\n  *  Description of Cxx_Unready fix\n  */\n-#define CXX_UNREADY_FIXIDX               34\n+#define CXX_UNREADY_FIXIDX               32\n tSCC zCxx_UnreadyName[] =\n      \"cxx_unready\";\n \n@@ -1543,7 +1479,7 @@ extern \\\"C\\\" {\\\\\\n\\\n  *\n  *  Description of Hpux_Maxint fix\n  */\n-#define HPUX_MAXINT_FIXIDX               35\n+#define HPUX_MAXINT_FIXIDX               33\n tSCC zHpux_MaxintName[] =\n      \"hpux_maxint\";\n \n@@ -1573,7 +1509,7 @@ const char* apzHpux_MaxintPatch[] = { \"sed\",\n  *\n  *  Description of Hpux_Systime fix\n  */\n-#define HPUX_SYSTIME_FIXIDX              36\n+#define HPUX_SYSTIME_FIXIDX              34\n tSCC zHpux_SystimeName[] =\n      \"hpux_systime\";\n \n@@ -1608,7 +1544,7 @@ const char* apzHpux_SystimePatch[] = { \"sed\",\n  *\n  *  Description of Hpux8_Bogus_Inlines fix\n  */\n-#define HPUX8_BOGUS_INLINES_FIXIDX       37\n+#define HPUX8_BOGUS_INLINES_FIXIDX       35\n tSCC zHpux8_Bogus_InlinesName[] =\n      \"hpux8_bogus_inlines\";\n \n@@ -1646,7 +1582,7 @@ const char* apzHpux8_Bogus_InlinesPatch[] = { \"sed\",\n  *\n  *  Description of Hpux11_Uint32_C fix\n  */\n-#define HPUX11_UINT32_C_FIXIDX           38\n+#define HPUX11_UINT32_C_FIXIDX           36\n tSCC zHpux11_Uint32_CName[] =\n      \"hpux11_uint32_c\";\n \n@@ -1681,7 +1617,7 @@ const char* apzHpux11_Uint32_CPatch[] = { \"sed\",\n  *\n  *  Description of Isc_Omits_With_Stdc fix\n  */\n-#define ISC_OMITS_WITH_STDC_FIXIDX       39\n+#define ISC_OMITS_WITH_STDC_FIXIDX       37\n tSCC zIsc_Omits_With_StdcName[] =\n      \"isc_omits_with_stdc\";\n \n@@ -1716,7 +1652,7 @@ const char* apzIsc_Omits_With_StdcPatch[] = { \"sed\",\n  *\n  *  Description of Io_Use_Quotes fix\n  */\n-#define IO_USE_QUOTES_FIXIDX             40\n+#define IO_USE_QUOTES_FIXIDX             38\n tSCC zIo_Use_QuotesName[] =\n      \"io_use_quotes\";\n \n@@ -1749,7 +1685,7 @@ const char* apzIo_Use_QuotesPatch[] = {\"IO_use\",\n  *\n  *  Description of Io_Def_Quotes fix\n  */\n-#define IO_DEF_QUOTES_FIXIDX             41\n+#define IO_DEF_QUOTES_FIXIDX             39\n tSCC zIo_Def_QuotesName[] =\n      \"io_def_quotes\";\n \n@@ -1782,7 +1718,7 @@ const char* apzIo_Def_QuotesPatch[] = {\"IO_defn\",\n  *\n  *  Description of Ctrl_Use_Quotes fix\n  */\n-#define CTRL_USE_QUOTES_FIXIDX           42\n+#define CTRL_USE_QUOTES_FIXIDX           40\n tSCC zCtrl_Use_QuotesName[] =\n      \"ctrl_use_quotes\";\n \n@@ -1815,7 +1751,7 @@ const char* apzCtrl_Use_QuotesPatch[] = {\"CTRL_use\",\n  *\n  *  Description of Ctrl_Def_Quotes fix\n  */\n-#define CTRL_DEF_QUOTES_FIXIDX           43\n+#define CTRL_DEF_QUOTES_FIXIDX           41\n tSCC zCtrl_Def_QuotesName[] =\n      \"ctrl_def_quotes\";\n \n@@ -1848,7 +1784,7 @@ const char* apzCtrl_Def_QuotesPatch[] = {\"CTRL_defn\",\n  *\n  *  Description of Ip_Missing_Semi fix\n  */\n-#define IP_MISSING_SEMI_FIXIDX           44\n+#define IP_MISSING_SEMI_FIXIDX           42\n tSCC zIp_Missing_SemiName[] =\n      \"ip_missing_semi\";\n \n@@ -1883,7 +1819,7 @@ const char* apzIp_Missing_SemiPatch[] = { \"sed\",\n  *\n  *  Description of Irix_Multiline_Cmnt fix\n  */\n-#define IRIX_MULTILINE_CMNT_FIXIDX       45\n+#define IRIX_MULTILINE_CMNT_FIXIDX       43\n tSCC zIrix_Multiline_CmntName[] =\n      \"irix_multiline_cmnt\";\n \n@@ -1911,7 +1847,7 @@ const char* apzIrix_Multiline_CmntPatch[] = { \"sed\",\n  *\n  *  Description of Irix_Sockaddr fix\n  */\n-#define IRIX_SOCKADDR_FIXIDX             46\n+#define IRIX_SOCKADDR_FIXIDX             44\n tSCC zIrix_SockaddrName[] =\n      \"irix_sockaddr\";\n \n@@ -1954,7 +1890,7 @@ struct sockaddr;\\n\",\n  *\n  *  Description of Irix_Struct__File fix\n  */\n-#define IRIX_STRUCT__FILE_FIXIDX         47\n+#define IRIX_STRUCT__FILE_FIXIDX         45\n tSCC zIrix_Struct__FileName[] =\n      \"irix_struct__file\";\n \n@@ -1982,7 +1918,7 @@ struct __file_s;\\n\",\n  *\n  *  Description of Irix_Asm_Apostrophe fix\n  */\n-#define IRIX_ASM_APOSTROPHE_FIXIDX       48\n+#define IRIX_ASM_APOSTROPHE_FIXIDX       46\n tSCC zIrix_Asm_ApostropheName[] =\n      \"irix_asm_apostrophe\";\n \n@@ -2017,7 +1953,7 @@ const char* apzIrix_Asm_ApostrophePatch[] = { \"sed\",\n  *\n  *  Description of Isc_Fmod fix\n  */\n-#define ISC_FMOD_FIXIDX                  49\n+#define ISC_FMOD_FIXIDX                  47\n tSCC zIsc_FmodName[] =\n      \"isc_fmod\";\n \n@@ -2052,7 +1988,7 @@ const char* apzIsc_FmodPatch[] = { \"sed\",\n  *\n  *  Description of Motorola_Nested fix\n  */\n-#define MOTOROLA_NESTED_FIXIDX           50\n+#define MOTOROLA_NESTED_FIXIDX           48\n tSCC zMotorola_NestedName[] =\n      \"motorola_nested\";\n \n@@ -2082,7 +2018,7 @@ const char* apzMotorola_NestedPatch[] = { \"sed\",\n  *\n  *  Description of Isc_Sys_Limits fix\n  */\n-#define ISC_SYS_LIMITS_FIXIDX            51\n+#define ISC_SYS_LIMITS_FIXIDX            49\n tSCC zIsc_Sys_LimitsName[] =\n      \"isc_sys_limits\";\n \n@@ -2118,7 +2054,7 @@ const char* apzIsc_Sys_LimitsPatch[] = { \"sed\",\n  *\n  *  Description of Kandr_Concat fix\n  */\n-#define KANDR_CONCAT_FIXIDX              52\n+#define KANDR_CONCAT_FIXIDX              50\n tSCC zKandr_ConcatName[] =\n      \"kandr_concat\";\n \n@@ -2153,7 +2089,7 @@ const char* apzKandr_ConcatPatch[] = { \"sed\",\n  *\n  *  Description of Limits_Ifndefs fix\n  */\n-#define LIMITS_IFNDEFS_FIXIDX            53\n+#define LIMITS_IFNDEFS_FIXIDX            51\n tSCC zLimits_IfndefsName[] =\n      \"limits_ifndefs\";\n \n@@ -2212,7 +2148,7 @@ const char* apzLimits_IfndefsPatch[] = { \"sed\",\n  *\n  *  Description of Lynx_Void_Int fix\n  */\n-#define LYNX_VOID_INT_FIXIDX             54\n+#define LYNX_VOID_INT_FIXIDX             52\n tSCC zLynx_Void_IntName[] =\n      \"lynx_void_int\";\n \n@@ -2247,7 +2183,7 @@ const char* apzLynx_Void_IntPatch[] = { \"sed\",\n  *\n  *  Description of Lynxos_Fcntl_Proto fix\n  */\n-#define LYNXOS_FCNTL_PROTO_FIXIDX        55\n+#define LYNXOS_FCNTL_PROTO_FIXIDX        53\n tSCC zLynxos_Fcntl_ProtoName[] =\n      \"lynxos_fcntl_proto\";\n \n@@ -2282,7 +2218,7 @@ const char* apzLynxos_Fcntl_ProtoPatch[] = { \"sed\",\n  *\n  *  Description of M88k_Bad_Hypot_Opt fix\n  */\n-#define M88K_BAD_HYPOT_OPT_FIXIDX        56\n+#define M88K_BAD_HYPOT_OPT_FIXIDX        54\n tSCC zM88k_Bad_Hypot_OptName[] =\n      \"m88k_bad_hypot_opt\";\n \n@@ -2324,7 +2260,7 @@ static __inline__ double fake_hypot (x, y)\\\\\\n\\\n  *\n  *  Description of M88k_Bad_S_If fix\n  */\n-#define M88K_BAD_S_IF_FIXIDX             57\n+#define M88K_BAD_S_IF_FIXIDX             55\n tSCC zM88k_Bad_S_IfName[] =\n      \"m88k_bad_s_if\";\n \n@@ -2362,7 +2298,7 @@ const char* apzM88k_Bad_S_IfPatch[] = { \"sed\",\n  *\n  *  Description of M88k_Multi_Incl fix\n  */\n-#define M88K_MULTI_INCL_FIXIDX           58\n+#define M88K_MULTI_INCL_FIXIDX           56\n tSCC zM88k_Multi_InclName[] =\n      \"m88k_multi_incl\";\n \n@@ -2404,7 +2340,7 @@ const char* apzM88k_Multi_InclPatch[] = { \"sh\", \"-c\",\n  *\n  *  Description of Machine_Ansi_H_Va_List fix\n  */\n-#define MACHINE_ANSI_H_VA_LIST_FIXIDX    59\n+#define MACHINE_ANSI_H_VA_LIST_FIXIDX    57\n tSCC zMachine_Ansi_H_Va_ListName[] =\n      \"machine_ansi_h_va_list\";\n \n@@ -2446,7 +2382,7 @@ const char* apzMachine_Ansi_H_Va_ListPatch[] = { \"sed\",\n  *\n  *  Description of Machine_Name fix\n  */\n-#define MACHINE_NAME_FIXIDX              60\n+#define MACHINE_NAME_FIXIDX              58\n tSCC zMachine_NameName[] =\n      \"machine_name\";\n \n@@ -2478,7 +2414,7 @@ const char* apzMachine_NamePatch[] = {\"machine_name\",\n  *\n  *  Description of Math_Exception fix\n  */\n-#define MATH_EXCEPTION_FIXIDX            61\n+#define MATH_EXCEPTION_FIXIDX            59\n tSCC zMath_ExceptionName[] =\n      \"math_exception\";\n \n@@ -2513,11 +2449,11 @@ tTestDesc aMath_ExceptionTests[] = {\n  *  Fix Command Arguments for Math_Exception\n  */\n const char* apzMath_ExceptionPatch[] = { \"sed\",\n-    \"-e\", \"/struct exception/i\\\\\\n\\\n+    \"-e\", \"1i\\\\\\n\\\n #ifdef __cplusplus\\\\\\n\\\n #define exception __math_exception\\\\\\n\\\n #endif\\n\",\n-    \"-e\", \"/struct exception/a\\\\\\n\\\n+    \"-e\", \"$a\\\\\\n\\\n #ifdef __cplusplus\\\\\\n\\\n #undef exception\\\\\\n\\\n #endif\\n\",\n@@ -2527,7 +2463,7 @@ const char* apzMath_ExceptionPatch[] = { \"sed\",\n  *\n  *  Description of Math_Huge_Val_From_Dbl_Max fix\n  */\n-#define MATH_HUGE_VAL_FROM_DBL_MAX_FIXIDX 62\n+#define MATH_HUGE_VAL_FROM_DBL_MAX_FIXIDX 60\n tSCC zMath_Huge_Val_From_Dbl_MaxName[] =\n      \"math_huge_val_from_dbl_max\";\n \n@@ -2574,7 +2510,7 @@ const char* apzMath_Huge_Val_From_Dbl_MaxPatch[] = { \"sh\", \"-c\",\n  *\n  *  Description of Math_Huge_Val_Ifndef fix\n  */\n-#define MATH_HUGE_VAL_IFNDEF_FIXIDX      63\n+#define MATH_HUGE_VAL_IFNDEF_FIXIDX      61\n tSCC zMath_Huge_Val_IfndefName[] =\n      \"math_huge_val_ifndef\";\n \n@@ -2612,7 +2548,7 @@ const char* apzMath_Huge_Val_IfndefPatch[] = { \"sed\",\n  *\n  *  Description of Nested_Comment fix\n  */\n-#define NESTED_COMMENT_FIXIDX            64\n+#define NESTED_COMMENT_FIXIDX            62\n tSCC zNested_CommentName[] =\n      \"nested_comment\";\n \n@@ -2639,7 +2575,7 @@ const char* apzNested_CommentPatch[] = { \"sed\",\n  *\n  *  Description of News_Os_Recursion fix\n  */\n-#define NEWS_OS_RECURSION_FIXIDX         65\n+#define NEWS_OS_RECURSION_FIXIDX         63\n tSCC zNews_Os_RecursionName[] =\n      \"news_os_recursion\";\n \n@@ -2677,7 +2613,7 @@ const char* apzNews_Os_RecursionPatch[] = { \"sed\",\n  *\n  *  Description of Next_Math_Prefix fix\n  */\n-#define NEXT_MATH_PREFIX_FIXIDX          66\n+#define NEXT_MATH_PREFIX_FIXIDX          64\n tSCC zNext_Math_PrefixName[] =\n      \"next_math_prefix\";\n \n@@ -2716,7 +2652,7 @@ const char* apzNext_Math_PrefixPatch[] = { \"sed\",\n  *\n  *  Description of Next_Template fix\n  */\n-#define NEXT_TEMPLATE_FIXIDX             67\n+#define NEXT_TEMPLATE_FIXIDX             65\n tSCC zNext_TemplateName[] =\n      \"next_template\";\n \n@@ -2752,7 +2688,7 @@ const char* apzNext_TemplatePatch[] = { \"sed\",\n  *\n  *  Description of Next_Volitile fix\n  */\n-#define NEXT_VOLITILE_FIXIDX             68\n+#define NEXT_VOLITILE_FIXIDX             66\n tSCC zNext_VolitileName[] =\n      \"next_volitile\";\n \n@@ -2788,7 +2724,7 @@ const char* apzNext_VolitilePatch[] = { \"sed\",\n  *\n  *  Description of Next_Wait_Union fix\n  */\n-#define NEXT_WAIT_UNION_FIXIDX           69\n+#define NEXT_WAIT_UNION_FIXIDX           67\n tSCC zNext_Wait_UnionName[] =\n      \"next_wait_union\";\n \n@@ -2823,7 +2759,7 @@ const char* apzNext_Wait_UnionPatch[] = { \"sed\",\n  *\n  *  Description of Nodeent_Syntax fix\n  */\n-#define NODEENT_SYNTAX_FIXIDX            70\n+#define NODEENT_SYNTAX_FIXIDX            68\n tSCC zNodeent_SyntaxName[] =\n      \"nodeent_syntax\";\n \n@@ -2850,7 +2786,7 @@ const char* apzNodeent_SyntaxPatch[] = { \"sed\",\n  *\n  *  Description of Osf_Namespace_A fix\n  */\n-#define OSF_NAMESPACE_A_FIXIDX           71\n+#define OSF_NAMESPACE_A_FIXIDX           69\n tSCC zOsf_Namespace_AName[] =\n      \"osf_namespace_a\";\n \n@@ -2896,7 +2832,7 @@ const char* apzOsf_Namespace_APatch[] = { \"sed\",\n  *\n  *  Description of Osf_Namespace_B fix\n  */\n-#define OSF_NAMESPACE_B_FIXIDX           72\n+#define OSF_NAMESPACE_B_FIXIDX           70\n tSCC zOsf_Namespace_BName[] =\n      \"osf_namespace_b\";\n \n@@ -2943,7 +2879,7 @@ typedef __regmatch_t\\tregmatch_t;\\n\",\n  *\n  *  Description of Pthread_Page_Size fix\n  */\n-#define PTHREAD_PAGE_SIZE_FIXIDX         73\n+#define PTHREAD_PAGE_SIZE_FIXIDX         71\n tSCC zPthread_Page_SizeName[] =\n      \"pthread_page_size\";\n \n@@ -2978,7 +2914,7 @@ const char* apzPthread_Page_SizePatch[] = { \"sed\",\n  *\n  *  Description of Read_Ret_Type fix\n  */\n-#define READ_RET_TYPE_FIXIDX             74\n+#define READ_RET_TYPE_FIXIDX             72\n tSCC zRead_Ret_TypeName[] =\n      \"read_ret_type\";\n \n@@ -3014,7 +2950,7 @@ const char* apzRead_Ret_TypePatch[] = { \"sed\",\n  *\n  *  Description of Rs6000_Double fix\n  */\n-#define RS6000_DOUBLE_FIXIDX             75\n+#define RS6000_DOUBLE_FIXIDX             73\n tSCC zRs6000_DoubleName[] =\n      \"rs6000_double\";\n \n@@ -3052,7 +2988,7 @@ const char* apzRs6000_DoublePatch[] = { \"sed\",\n  *\n  *  Description of Rs6000_Fchmod fix\n  */\n-#define RS6000_FCHMOD_FIXIDX             76\n+#define RS6000_FCHMOD_FIXIDX             74\n tSCC zRs6000_FchmodName[] =\n      \"rs6000_fchmod\";\n \n@@ -3087,7 +3023,7 @@ const char* apzRs6000_FchmodPatch[] = { \"sed\",\n  *\n  *  Description of Rs6000_Param fix\n  */\n-#define RS6000_PARAM_FIXIDX              77\n+#define RS6000_PARAM_FIXIDX              75\n tSCC zRs6000_ParamName[] =\n      \"rs6000_param\";\n \n@@ -3122,7 +3058,7 @@ const char* apzRs6000_ParamPatch[] = { \"sed\",\n  *\n  *  Description of Sony_Include fix\n  */\n-#define SONY_INCLUDE_FIXIDX              78\n+#define SONY_INCLUDE_FIXIDX              76\n tSCC zSony_IncludeName[] =\n      \"sony_include\";\n \n@@ -3157,7 +3093,7 @@ const char* apzSony_IncludePatch[] = { \"sed\",\n  *\n  *  Description of Statsswtch fix\n  */\n-#define STATSSWTCH_FIXIDX                79\n+#define STATSSWTCH_FIXIDX                77\n tSCC zStatsswtchName[] =\n      \"statsswtch\";\n \n@@ -3192,7 +3128,7 @@ const char* apzStatsswtchPatch[] = { \"sed\",\n  *\n  *  Description of Stdio_Stdarg_H fix\n  */\n-#define STDIO_STDARG_H_FIXIDX            80\n+#define STDIO_STDARG_H_FIXIDX            78\n tSCC zStdio_Stdarg_HName[] =\n      \"stdio_stdarg_h\";\n \n@@ -3229,7 +3165,7 @@ const char* apzStdio_Stdarg_HPatch[] = { \"sed\",\n  *\n  *  Description of Stdio_Va_List fix\n  */\n-#define STDIO_VA_LIST_FIXIDX             81\n+#define STDIO_VA_LIST_FIXIDX             79\n tSCC zStdio_Va_ListName[] =\n      \"stdio_va_list\";\n \n@@ -3273,7 +3209,7 @@ s@_Va_LIST@_VA_LIST@\",\n  *\n  *  Description of Sun_Bogus_Ifdef fix\n  */\n-#define SUN_BOGUS_IFDEF_FIXIDX           82\n+#define SUN_BOGUS_IFDEF_FIXIDX           80\n tSCC zSun_Bogus_IfdefName[] =\n      \"sun_bogus_ifdef\";\n \n@@ -3308,7 +3244,7 @@ const char* apzSun_Bogus_IfdefPatch[] = { \"sed\",\n  *\n  *  Description of Sun_Bogus_Ifdef_Sun4c fix\n  */\n-#define SUN_BOGUS_IFDEF_SUN4C_FIXIDX     83\n+#define SUN_BOGUS_IFDEF_SUN4C_FIXIDX     81\n tSCC zSun_Bogus_Ifdef_Sun4cName[] =\n      \"sun_bogus_ifdef_sun4c\";\n \n@@ -3343,7 +3279,7 @@ const char* apzSun_Bogus_Ifdef_Sun4cPatch[] = { \"sed\",\n  *\n  *  Description of Sun_Catmacro fix\n  */\n-#define SUN_CATMACRO_FIXIDX              84\n+#define SUN_CATMACRO_FIXIDX              82\n tSCC zSun_CatmacroName[] =\n      \"sun_catmacro\";\n \n@@ -3383,7 +3319,7 @@ const char* apzSun_CatmacroPatch[] = { \"sed\",\n  *\n  *  Description of Sun_Malloc fix\n  */\n-#define SUN_MALLOC_FIXIDX                85\n+#define SUN_MALLOC_FIXIDX                83\n tSCC zSun_MallocName[] =\n      \"sun_malloc\";\n \n@@ -3413,7 +3349,7 @@ const char* apzSun_MallocPatch[] = { \"sed\",\n  *\n  *  Description of Sun_Rusers_Semi fix\n  */\n-#define SUN_RUSERS_SEMI_FIXIDX           86\n+#define SUN_RUSERS_SEMI_FIXIDX           84\n tSCC zSun_Rusers_SemiName[] =\n      \"sun_rusers_semi\";\n \n@@ -3448,7 +3384,7 @@ const char* apzSun_Rusers_SemiPatch[] = { \"sed\",\n  *\n  *  Description of Sun_Signal fix\n  */\n-#define SUN_SIGNAL_FIXIDX                87\n+#define SUN_SIGNAL_FIXIDX                85\n tSCC zSun_SignalName[] =\n      \"sun_signal\";\n \n@@ -3488,7 +3424,7 @@ void\\t(*signal(...))(...);\\\\\\n\\\n  *\n  *  Description of Sun_Auth_Proto fix\n  */\n-#define SUN_AUTH_PROTO_FIXIDX            88\n+#define SUN_AUTH_PROTO_FIXIDX            86\n tSCC zSun_Auth_ProtoName[] =\n      \"sun_auth_proto\";\n \n@@ -3528,7 +3464,7 @@ const char* apzSun_Auth_ProtoPatch[] = { \"sed\",\n  *\n  *  Description of Sunos_Matherr_Decl fix\n  */\n-#define SUNOS_MATHERR_DECL_FIXIDX        89\n+#define SUNOS_MATHERR_DECL_FIXIDX        87\n tSCC zSunos_Matherr_DeclName[] =\n      \"sunos_matherr_decl\";\n \n@@ -3565,7 +3501,7 @@ struct exception;\\n\",\n  *\n  *  Description of Sunos_Strlen fix\n  */\n-#define SUNOS_STRLEN_FIXIDX              90\n+#define SUNOS_STRLEN_FIXIDX              88\n tSCC zSunos_StrlenName[] =\n      \"sunos_strlen\";\n \n@@ -3600,7 +3536,7 @@ const char* apzSunos_StrlenPatch[] = { \"sed\",\n  *\n  *  Description of Systypes fix\n  */\n-#define SYSTYPES_FIXIDX                  91\n+#define SYSTYPES_FIXIDX                  89\n tSCC zSystypesName[] =\n      \"systypes\";\n \n@@ -3659,7 +3595,7 @@ typedef __SIZE_TYPE__ size_t;\\\\\\n\\\n  *\n  *  Description of Systypes_Stdlib_Size_T fix\n  */\n-#define SYSTYPES_STDLIB_SIZE_T_FIXIDX    92\n+#define SYSTYPES_STDLIB_SIZE_T_FIXIDX    90\n tSCC zSystypes_Stdlib_Size_TName[] =\n      \"systypes_stdlib_size_t\";\n \n@@ -3705,7 +3641,7 @@ const char* apzSystypes_Stdlib_Size_TPatch[] = { \"sed\",\n  *\n  *  Description of Sysv68_String fix\n  */\n-#define SYSV68_STRING_FIXIDX             93\n+#define SYSV68_STRING_FIXIDX             91\n tSCC zSysv68_StringName[] =\n      \"sysv68_string\";\n \n@@ -3742,7 +3678,7 @@ extern unsigned int\\\\\\n\\\n  *\n  *  Description of Sysz_Stdlib_For_Sun fix\n  */\n-#define SYSZ_STDLIB_FOR_SUN_FIXIDX       94\n+#define SYSZ_STDLIB_FOR_SUN_FIXIDX       92\n tSCC zSysz_Stdlib_For_SunName[] =\n      \"sysz_stdlib_for_sun\";\n \n@@ -3775,7 +3711,7 @@ const char* apzSysz_Stdlib_For_SunPatch[] = { \"sed\",\n  *\n  *  Description of Sysz_Stdtypes_For_Sun fix\n  */\n-#define SYSZ_STDTYPES_FOR_SUN_FIXIDX     95\n+#define SYSZ_STDTYPES_FOR_SUN_FIXIDX     93\n tSCC zSysz_Stdtypes_For_SunName[] =\n      \"sysz_stdtypes_for_sun\";\n \n@@ -3816,7 +3752,7 @@ const char* apzSysz_Stdtypes_For_SunPatch[] = { \"sed\",\n  *\n  *  Description of Tinfo_Cplusplus fix\n  */\n-#define TINFO_CPLUSPLUS_FIXIDX           96\n+#define TINFO_CPLUSPLUS_FIXIDX           94\n tSCC zTinfo_CplusplusName[] =\n      \"tinfo_cplusplus\";\n \n@@ -3851,7 +3787,7 @@ const char* apzTinfo_CplusplusPatch[] = { \"sed\",\n  *\n  *  Description of Ultrix_Fix_Fixproto fix\n  */\n-#define ULTRIX_FIX_FIXPROTO_FIXIDX       97\n+#define ULTRIX_FIX_FIXPROTO_FIXIDX       95\n tSCC zUltrix_Fix_FixprotoName[] =\n      \"ultrix_fix_fixproto\";\n \n@@ -3887,7 +3823,7 @@ struct utsname;\\n\",\n  *\n  *  Description of Ultrix_Atof_Param fix\n  */\n-#define ULTRIX_ATOF_PARAM_FIXIDX         98\n+#define ULTRIX_ATOF_PARAM_FIXIDX         96\n tSCC zUltrix_Atof_ParamName[] =\n      \"ultrix_atof_param\";\n \n@@ -3922,7 +3858,7 @@ const char* apzUltrix_Atof_ParamPatch[] = { \"sed\",\n  *\n  *  Description of Ultrix_Const fix\n  */\n-#define ULTRIX_CONST_FIXIDX              99\n+#define ULTRIX_CONST_FIXIDX              97\n tSCC zUltrix_ConstName[] =\n      \"ultrix_const\";\n \n@@ -3957,7 +3893,7 @@ const char* apzUltrix_ConstPatch[] = { \"sed\",\n  *\n  *  Description of Ultrix_Ifdef fix\n  */\n-#define ULTRIX_IFDEF_FIXIDX              100\n+#define ULTRIX_IFDEF_FIXIDX              98\n tSCC zUltrix_IfdefName[] =\n      \"ultrix_ifdef\";\n \n@@ -3992,7 +3928,7 @@ const char* apzUltrix_IfdefPatch[] = { \"sed\",\n  *\n  *  Description of Ultrix_Nested_Cmnt fix\n  */\n-#define ULTRIX_NESTED_CMNT_FIXIDX        101\n+#define ULTRIX_NESTED_CMNT_FIXIDX        99\n tSCC zUltrix_Nested_CmntName[] =\n      \"ultrix_nested_cmnt\";\n \n@@ -4019,7 +3955,7 @@ const char* apzUltrix_Nested_CmntPatch[] = { \"sed\",\n  *\n  *  Description of Ultrix_Static fix\n  */\n-#define ULTRIX_STATIC_FIXIDX             102\n+#define ULTRIX_STATIC_FIXIDX             100\n tSCC zUltrix_StaticName[] =\n      \"ultrix_static\";\n \n@@ -4056,7 +3992,7 @@ const char* apzUltrix_StaticPatch[] = { \"sed\",\n  *\n  *  Description of Undefine_Null fix\n  */\n-#define UNDEFINE_NULL_FIXIDX             103\n+#define UNDEFINE_NULL_FIXIDX             101\n tSCC zUndefine_NullName[] =\n      \"undefine_null\";\n \n@@ -4098,7 +4034,7 @@ const char* apzUndefine_NullPatch[] = { \"sed\",\n  *\n  *  Description of Unixware7_Byteorder_Fix fix\n  */\n-#define UNIXWARE7_BYTEORDER_FIX_FIXIDX   104\n+#define UNIXWARE7_BYTEORDER_FIX_FIXIDX   102\n tSCC zUnixware7_Byteorder_FixName[] =\n      \"unixware7_byteorder_fix\";\n \n@@ -4141,7 +4077,7 @@ const char* apzUnixware7_Byteorder_FixPatch[] = { \"sed\",\n  *\n  *  Description of Va_I960_Macro fix\n  */\n-#define VA_I960_MACRO_FIXIDX             105\n+#define VA_I960_MACRO_FIXIDX             103\n tSCC zVa_I960_MacroName[] =\n      \"va_i960_macro\";\n \n@@ -4179,7 +4115,7 @@ const char* apzVa_I960_MacroPatch[] = { \"sed\",\n  *\n  *  Description of Void_Null fix\n  */\n-#define VOID_NULL_FIXIDX                 106\n+#define VOID_NULL_FIXIDX                 104\n tSCC zVoid_NullName[] =\n      \"void_null\";\n \n@@ -4214,7 +4150,7 @@ const char* apzVoid_NullPatch[] = { \"sed\",\n  *\n  *  Description of Vxworks_Gcc_Problem fix\n  */\n-#define VXWORKS_GCC_PROBLEM_FIXIDX       107\n+#define VXWORKS_GCC_PROBLEM_FIXIDX       105\n tSCC zVxworks_Gcc_ProblemName[] =\n      \"vxworks_gcc_problem\";\n \n@@ -4264,7 +4200,7 @@ const char* apzVxworks_Gcc_ProblemPatch[] = { \"sed\",\n  *\n  *  Description of Vxworks_Needs_Vxtypes fix\n  */\n-#define VXWORKS_NEEDS_VXTYPES_FIXIDX     108\n+#define VXWORKS_NEEDS_VXTYPES_FIXIDX     106\n tSCC zVxworks_Needs_VxtypesName[] =\n      \"vxworks_needs_vxtypes\";\n \n@@ -4299,7 +4235,7 @@ const char* apzVxworks_Needs_VxtypesPatch[] = { \"sed\",\n  *\n  *  Description of Vxworks_Needs_Vxworks fix\n  */\n-#define VXWORKS_NEEDS_VXWORKS_FIXIDX     109\n+#define VXWORKS_NEEDS_VXWORKS_FIXIDX     107\n tSCC zVxworks_Needs_VxworksName[] =\n      \"vxworks_needs_vxworks\";\n \n@@ -4348,7 +4284,7 @@ const char* apzVxworks_Needs_VxworksPatch[] = { \"sed\",\n  *\n  *  Description of Vxworks_Time fix\n  */\n-#define VXWORKS_TIME_FIXIDX              110\n+#define VXWORKS_TIME_FIXIDX              108\n tSCC zVxworks_TimeName[] =\n      \"vxworks_time\";\n \n@@ -4399,7 +4335,7 @@ typedef void (*__gcc_VOIDFUNCPTR) ();\\\\\\n\\\n  *\n  *  Description of X11_Class fix\n  */\n-#define X11_CLASS_FIXIDX                 111\n+#define X11_CLASS_FIXIDX                 109\n tSCC zX11_ClassName[] =\n      \"x11_class\";\n \n@@ -4439,7 +4375,7 @@ const char* apzX11_ClassPatch[] = { \"sed\",\n  *\n  *  Description of X11_Class_Usage fix\n  */\n-#define X11_CLASS_USAGE_FIXIDX           112\n+#define X11_CLASS_USAGE_FIXIDX           110\n tSCC zX11_Class_UsageName[] =\n      \"x11_class_usage\";\n \n@@ -4474,7 +4410,7 @@ const char* apzX11_Class_UsagePatch[] = { \"sed\",\n  *\n  *  Description of X11_New fix\n  */\n-#define X11_NEW_FIXIDX                   113\n+#define X11_NEW_FIXIDX                   111\n tSCC zX11_NewName[] =\n      \"x11_new\";\n \n@@ -4515,7 +4451,7 @@ const char* apzX11_NewPatch[] = { \"sed\",\n  *\n  *  Description of X11_Sprintf fix\n  */\n-#define X11_SPRINTF_FIXIDX               114\n+#define X11_SPRINTF_FIXIDX               112\n tSCC zX11_SprintfName[] =\n      \"x11_sprintf\";\n \n@@ -4555,7 +4491,7 @@ extern char *\\tsprintf();\\\\\\n\\\n  */\n #define REGEX_COUNT          98\n #define MACH_LIST_SIZE_LIMIT 279\n-#define FIX_COUNT            115\n+#define FIX_COUNT            113\n \n tFixDesc fixDescList[ FIX_COUNT ] = {\n   {  zAaa_Ki_IfaceName,    zAaa_Ki_IfaceList,\n@@ -4698,11 +4634,6 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      DEC_INTERN_ASM_TEST_CT, FD_MACH_ONLY,\n      aDec_Intern_AsmTests,   apzDec_Intern_AsmPatch },\n \n-  {  zNo_Double_SlashName,    zNo_Double_SlashList,\n-     apzNo_Double_SlashMachs, (regex_t*)NULL,\n-     NO_DOUBLE_SLASH_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n-     aNo_Double_SlashTests,   apzNo_Double_SlashPatch },\n-\n   {  zEcd_CursorName,    zEcd_CursorList,\n      apzEcd_CursorMachs, (regex_t*)NULL,\n      ECD_CURSOR_TEST_CT, FD_MACH_ONLY,\n@@ -4713,11 +4644,6 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n      SCO5_STAT_WRAPPERS_TEST_CT, FD_MACH_ONLY,\n      aSco5_Stat_WrappersTests,   apzSco5_Stat_WrappersPatch },\n \n-  {  zEnd_Else_LabelName,    zEnd_Else_LabelList,\n-     apzEnd_Else_LabelMachs, (regex_t*)NULL,\n-     END_ELSE_LABEL_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n-     aEnd_Else_LabelTests,   apzEnd_Else_LabelPatch },\n-\n   {  zHp_InlineName,    zHp_InlineList,\n      apzHp_InlineMachs, (regex_t*)NULL,\n      HP_INLINE_TEST_CT, FD_MACH_ONLY,"}, {"sha": "6ca564638fa9a2bb51df2c91e3feca1524b12367", "filename": "gcc/fixinc/fixlib.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixlib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixlib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixlib.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -122,7 +122,11 @@ is_cxx_header (fname, text)\n       tSCC cxxpat[] = \"\\\n extern[ \\t]*\\\"C\\\\+\\\\+\\\"|\\\n -\\\\*-[ \\t]*([mM]ode:[ \\t]*)?[cC]\\\\+\\\\+[; \\t]*-\\\\*-|\\\n-template[ \\t]*<\";\n+template[ \\t]*<|\\\n+^[ \\t]*class[ \\t]|\\\n+(public|private|protected):|\\\n+^[ \\t]*#[ \\t]*pragma[ \\t]+(interface|implementation)\\\n+\";\n       static regex_t cxxre;\n       static int compiled;\n \n@@ -187,12 +191,16 @@ static regex_t mn_name_re;\n \n static int mn_compiled = 0;\n \n-void\n+int\n mn_get_regexps( label_re, name_re, who )\n      regex_t **label_re;\n      regex_t **name_re;\n      tCC *who;\n {\n+  /* Maybe we don't need to do this fix at all?  */\n+  if (mn_name_pat[0] == '\\0')\n+    return 1;\n+\n   if (! mn_compiled)\n     {\n       compile_re (mn_label_pat, &mn_label_re, 1, \"label pattern\", who);\n@@ -201,4 +209,5 @@ mn_get_regexps( label_re, name_re, who )\n     }\n   *label_re = &mn_label_re;\n   *name_re = &mn_name_re;\n+  return 0;\n }"}, {"sha": "bc43977922c397af0d1c5d1ca14230e8880b5489", "filename": "gcc/fixinc/fixlib.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixlib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixlib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixlib.h?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -99,6 +99,6 @@ char * load_file_data _P_(( FILE* fp ));\n t_bool is_cxx_header  _P_(( tCC* filename, tCC* filetext ));\n void   compile_re     _P_(( tCC* pat, regex_t* re, int match,\n \t\t\t    tCC *e1, tCC *e2 ));\n-void   mn_get_regexps _P_(( regex_t** label_re, regex_t** name_re,\n+int    mn_get_regexps _P_(( regex_t** label_re, regex_t** name_re,\n \t\t\t    tCC *who ));\n #endif /* FIXINCLUDES_FIXLIB_H */"}, {"sha": "ef821e1db11ac90766550f14986fead0657f93fe", "filename": "gcc/fixinc/fixtests.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixtests.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Ffixtests.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixtests.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -275,7 +275,8 @@ TEST_FOR_FIX_PROC_HEAD( machine_name_test )\n   regmatch_t match[2];\n   tCC *base, *limit;\n \n-  mn_get_regexps(&label_re, &name_re, \"machine_name_test\");\n+  if (mn_get_regexps(&label_re, &name_re, \"machine_name_test\"))\n+    return SKIP_FIX;\n \n   for (base = text;\n        regexec (label_re, base, 2, match, 0) == 0;"}, {"sha": "361b3aff546fc3f71b2959b826b23378b041bb0d", "filename": "gcc/fixinc/gen-machname.h", "status": "added", "additions": 46, "deletions": 0, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Fgen-machname.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Fgen-machname.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fgen-machname.h?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -0,0 +1,46 @@\n+#! /bin/sh\n+\n+# Copyright (C) 2000 Free Software Foundation, Inc.\n+# This file is part of GNU CC.\n+\n+# GNU CC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# GNU CC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with GNU CC; see the file COPYING.  If not, write to\n+# the Free Software Foundation, 59 Temple Place - Suite 330,\n+# Boston, MA 02111-1307, USA.\n+\n+# This script extracts from the specs file all the predefined macros\n+# that are not in the C89 reserved namespace (the reserved namespace\n+# is all identifiers beginnning with two underscores or one underscore\n+# followed by a capital letter).  The specs file is on standard input.\n+# A #define for a regular expression to find any of those macros in a\n+# header file is written to standard output.\n+\n+# Note dependency on ASCII. \\040 = space, \\011 = tab, \\012 = newline.\n+# tr ' ' '\\n' is, alas, not portable.\n+\n+tr -s '\\040\\011' '\\012\\012' |\n+    sed -n 's/^.*-D\\([a-zA-Z_][a-zA-Z0-9_]*\\).*$/\\1/p' |\n+    sort -u > mn.T\n+\n+if grep -v '^_[_A-Z]' mn.T > mn.U\n+then\n+    echo \"Forbidden identifiers: `tr '\\012' ' ' <mn.U`\" >&2\n+    sed 's/^/\\\\\\\\</; s/$/\\\\\\\\>/' <mn.U | tr '\\012' '|' > mn.V\n+    echo '' >>mn.V\n+    sed 's/^/#define MN_NAME_PAT \"/; s/|$/\"/' < mn.V\n+else\n+    echo \"No forbidden identifiers defined by this target\" >&2\n+    echo '#define MN_NAME_PAT \"\"'\n+fi\n+rm -f mn.[TUV]\n+exit 0"}, {"sha": "d4785c4f9dfbcfcdb7543521538e6bfaecf26a7e", "filename": "gcc/fixinc/inclhack.def", "status": "modified", "additions": 10, "deletions": 71, "changes": 81, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.def?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -765,6 +765,7 @@ fix = {\n };\n \n \n+#ifdef OLD_CPP\n /*\n  *  Remove the double-slash comments.  The \"double_slash\" test will\n  *  try to ignore C++ headers by checking for \"CC/\", \"xx/\" and \"++/\"\n@@ -776,6 +777,7 @@ fix = {\n     c_test = \"double_slash\";\n     c_fix  = \"no_double_slash\";\n };\n+#endif\n \n \n /*\n@@ -811,6 +813,7 @@ fix = {\n };\n \n \n+#ifdef OLD_CPP\n /*\n  *  Fix else and endif directives that contain non-commentary text\n  */\n@@ -824,6 +827,7 @@ fix = {\n     c_test = \"else_endif_label\";\n     c_fix  = \"else_endif_label\";\n };\n+#endif\n \n \n /*\n@@ -846,7 +850,7 @@ fix = {\n     hackname = hp_sysfile;\n     files    = sys/file.h;\n     select   = \"HPUX_SOURCE\";\n-    sed      = 's/(\\.\\.\\.)/(struct file * ...)/';\n+    sed      = 's/(\\.\\.\\.)/(struct file *, ...)/';\n };\n \n \n@@ -1282,88 +1286,23 @@ fix = {\n  *  the class exception defined in the C++ file std/stdexcept.h.  We\n  *  redefine it to __math_exception.  This is not a great fix, but I\n  *  haven't been able to think of anything better.\n+ *  Note that we have to put the #ifdef/#endif blocks at beginning\n+ *  and end of file, because fixproto runs after us and may insert\n+ *  additional references to struct exception.\n  */\n fix = {\n     hackname = math_exception;\n     files    = math.h;\n     select   = \"struct exception\";\n     bypass   = \"We have a problem when using C\\\\+\\\\+\";\n-    sed      = \"/struct exception/i\\\\\\n\"\n-               \"#ifdef __cplusplus\\\\\\n\"\n-               \"#define exception __math_exception\\\\\\n\"\n-               \"#endif\\n\";\n-    sed      = \"/struct exception/a\\\\\\n\"\n-               \"#ifdef __cplusplus\\\\\\n\"\n-               \"#undef exception\\\\\\n\"\n-               \"#endif\\n\";\n-\n-#ifdef MATH_EXCEPTION_FIXED\n-    sed      = \"/matherr/i\\\\\\n\"\n+    sed      = \"1i\\\\\\n\"\n                \"#ifdef __cplusplus\\\\\\n\"\n                \"#define exception __math_exception\\\\\\n\"\n                \"#endif\\n\";\n-\n-    sed      = \"/matherr/a\\\\\\n\"\n+    sed      = \"$a\\\\\\n\"\n                \"#ifdef __cplusplus\\\\\\n\"\n                \"#undef exception\\\\\\n\"\n                \"#endif\\n\";\n-\n-I think this patch needs some more thinking.\n-This is from SVR4.2 (With '#' replaced with '@').\n-Perhaps we could do without the \"/matherr/a\" entries?\n-Can we bypass the entire fix if someone was astute\n-enough to have '#ifdef __cplusplus' anywhere in the file?\n-\n-We can definitely do without the \"/matherr/a\" entries.  They are\n-there to cover the case where matherr is declared with no prototype\n--- extern int matherr(); -- but we don't need a fix then since there\n-is no reference to struct exception.\n-\n-Bypassing on \"#ifdef __cplusplus\" is too optimistic, but I've stuck\n-in a bypass for the comment in the glibc 2.1 header that indicates\n-awareness of the problem.  Hmm.  Could we use a shell test that did\n-cpp -D__cplusplus | grep \"struct exception\" ?\n-\n-*** /usr/include/math.h Fri Apr  3 18:54:59 1998\n---- math.h      Sun May  9 07:28:58 1999\n-***************\n-*** 25,31 ****\n---- 25,37 ----\n-  \n-  @ifndef __cplusplus\n-  \n-+ @ifdef __cplusplus\n-+ @define exception __math_exception\n-+ @endif\n-  struct exception\n-+ @ifdef __cplusplus\n-+ @undef exception\n-+ @endif\n-  {\n-        int     type;\n-        char    *name;\n-***************\n-*** 34,40 ****\n---- 40,58 ----\n-        double  retval;\n-  };\n-  \n-+ @ifdef __cplusplus\n-+ @define exception __math_exception\n-+ @endif\n-+ @ifdef __cplusplus\n-+ @define exception __math_exception\n-+ @endif\n-  extern int    matherr(struct exception *);\n-+ @ifdef __cplusplus\n-+ @undef exception\n-+ @endif\n-+ @ifdef __cplusplus\n-+ @undef exception\n-+ @endif\n-  \n-  @endif /*__cplusplus*/\n-#endif\n };\n \n fix = {"}, {"sha": "60c17195d074357fd53966b778c2277d3a55cb3a", "filename": "gcc/fixinc/inclhack.sh", "status": "modified", "additions": 4, "deletions": 36, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Finclhack.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Ffixinc%2Finclhack.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.sh?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -6,7 +6,7 @@\n # files which are fixed to work correctly with ANSI C and placed in a\n # directory that GNU C will search.\n #\n-# This script contains 115 fixup scripts.\n+# This script contains 113 fixup scripts.\n #\n # See README-fixinc for more information.\n #\n@@ -1263,22 +1263,6 @@ struct rusage;\n     esac\n \n \n-    #\n-    # Fix No_Double_Slash\n-    #\n-    if ${FIXTESTS} ${file} double_slash\n-    then\n-    fixlist=\"${fixlist}\n-      no_double_slash\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ${FIXFIXES} ${file} no_double_slash < $infile > ${DESTDIR}/fixinc.tmp\n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of c_test 'if'\n-\n-\n     #\n     # Fix Ecd_Cursor\n     #\n@@ -1329,22 +1313,6 @@ extern \"C\"\\\n     esac\n \n \n-    #\n-    # Fix End_Else_Label\n-    #\n-    if ${FIXTESTS} ${file} else_endif_label\n-    then\n-    fixlist=\"${fixlist}\n-      end_else_label\"\n-    if [ ! -r ${DESTFILE} ]\n-    then infile=${file}\n-    else infile=${DESTFILE} ; fi \n-    ${FIXFIXES} ${file} else_endif_label < $infile > ${DESTDIR}/fixinc.tmp\n-    rm -f ${DESTFILE}\n-    mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n-    fi # end of c_test 'if'\n-\n-\n     #\n     # Fix Hp_Inline\n     #\n@@ -1379,7 +1347,7 @@ extern \"C\"\\\n     then infile=${file}\n     else infile=${DESTFILE} ; fi \n \n-    sed -e 's/(\\.\\.\\.)/(struct file * ...)/' \\\n+    sed -e 's/(\\.\\.\\.)/(struct file *, ...)/' \\\n           < $infile > ${DESTDIR}/fixinc.tmp\n     rm -f ${DESTFILE}\n     mv -f ${DESTDIR}/fixinc.tmp ${DESTFILE}\n@@ -2060,12 +2028,12 @@ static __inline__ double fake_hypot (x, y)\\\n     then infile=${file}\n     else infile=${DESTFILE} ; fi \n \n-    sed -e '/struct exception/i\\\n+    sed -e '1i\\\n #ifdef __cplusplus\\\n #define exception __math_exception\\\n #endif\n ' \\\n-        -e '/struct exception/a\\\n+        -e '$a\\\n #ifdef __cplusplus\\\n #undef exception\\\n #endif"}, {"sha": "dc5d3a9c9ade8a7a783ac97c4945f646e9cb18ad", "filename": "gcc/frame.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Fframe.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Fframe.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fframe.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -610,12 +610,14 @@ find_fde (void *pc)\n \t{\n \t  fde **p = ob->fde_array;\n \t  \n-\t  for (; *p; ++p)\n+\t  do\n \t    {\n \t      f = search_fdes (*p, pc);\n \t      if (f)\n \t\tbreak;\n+\t      p++;\n \t    }\n+\t  while (*p);\n \t}\n       else\n \tf = search_fdes (ob->fde_begin, pc);"}, {"sha": "368b5c6dd5b4e2501cffbd3b76eb44596d4694c0", "filename": "gcc/libgcc2.c", "status": "modified", "additions": 7, "deletions": 8, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Flibgcc2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Flibgcc2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcc2.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -1881,11 +1881,6 @@ __bb_fork_func (void)\n \n #define BBINBUFSIZE 500\n \n-/* BBINBUFSIZE-1 with double quotes. We could use #BBINBUFSIZE or\n-   \"BBINBUFSIZE\" but want to avoid trouble with preprocessors.  */\n-\n-#define BBINBUFSIZESTR \"499\"\n-\n struct bb_edge\n {\n   struct bb_edge *next;\n@@ -2163,8 +2158,8 @@ found:        ;\n                struct bb_edge *bucket = bb_hashbuckets[i];\n                for ( ; bucket; bucket = bucket->next )\n                  {\n-                   fprintf (file, \"Jump from block 0x%.*lx to \"\n-                                  \"block 0x%.*lx executed %*lu time(s)\\n\", \n+                   fprintf (file,\n+\t\"Jump from block 0x%.*lx to block 0x%.*lx executed %*lu time(s)\\n\", \n                             addr_len, bucket->src_addr, \n                             addr_len, bucket->dst_addr, \n                             cnt_len, bucket->count);\n@@ -2235,8 +2230,12 @@ __bb_init_prg (void)\n   if (!(file = fopen (\"bb.in\", \"r\")))\n     return;\n \n-  while(fscanf (file, \" %\" BBINBUFSIZESTR \"s \", buf) != EOF)\n+  while(fgets (buf, BBINBUFSIZE, file) != 0)\n     {\n+      i = strlen (buf);\n+      if (buf[i] == '\\n')\n+\tbuf[i--] = '\\0';\n+\n       p = buf;\n       if (*p == '-') \n         { "}, {"sha": "780a7bd99e55354369b4442278096d891db73ced", "filename": "gcc/unroll.c", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78a0d70cdf5502320158d1a3ff41f5bdcadabdb0/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=78a0d70cdf5502320158d1a3ff41f5bdcadabdb0", "patch": "@@ -234,7 +234,7 @@ unroll_loop (loop, insn_count, end_insert_before, strength_reduce_p)\n {\n   int i, j;\n   unsigned HOST_WIDE_INT temp;\n-  int unroll_number = 1;\n+  int unroll_number;\n   rtx copy_start, copy_end;\n   rtx insn, sequence, pattern, tem;\n   int max_labelno, max_insnno;\n@@ -248,7 +248,7 @@ unroll_loop (loop, insn_count, end_insert_before, strength_reduce_p)\n   rtx start_label;\n   struct iv_class *bl;\n   int splitting_not_safe = 0;\n-  enum unroll_types unroll_type;\n+  enum unroll_types unroll_type = UNROLL_NAIVE;\n   int loop_preconditioned = 0;\n   rtx safety_label;\n   /* This points to the last real insn in the loop, which should be either\n@@ -437,16 +437,14 @@ unroll_loop (loop, insn_count, end_insert_before, strength_reduce_p)\n \n   /* Default case, calculate number of times to unroll loop based on its\n      size.  */\n-  if (unroll_number == 1)\n+  if (unroll_type == UNROLL_NAIVE)\n     {\n       if (8 * insn_count < MAX_UNROLLED_INSNS)\n \tunroll_number = 8;\n       else if (4 * insn_count < MAX_UNROLLED_INSNS)\n \tunroll_number = 4;\n       else\n \tunroll_number = 2;\n-\n-      unroll_type = UNROLL_NAIVE;\n     }\n \n   /* Now we know how many times to unroll the loop.  */"}]}