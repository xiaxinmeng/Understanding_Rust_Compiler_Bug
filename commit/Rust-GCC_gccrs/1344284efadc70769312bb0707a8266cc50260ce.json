{"sha": "1344284efadc70769312bb0707a8266cc50260ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTM0NDI4NGVmYWRjNzA3NjkzMTJiYjA3MDdhODI2NmNjNTAyNjBjZQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2007-06-07T02:12:31Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2007-06-07T02:12:31Z"}, "message": "re PR tree-optimization/32231 (Segfault in verify_ssa_name)\n\n2007-06-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR tree-opt/32231\n        * tree-vect-transform.c (vectorizable_call): Call update_stmt\n        after changing the right hand side of the assignment.\n\n2007-06-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR tree-opt/32231\n        * gcc.target/i386/vectorize4.c: New test.\n\nFrom-SVN: r125521", "tree": {"sha": "64c2efc348ee53773e1f761df1cf3c0f5a99d714", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64c2efc348ee53773e1f761df1cf3c0f5a99d714"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1344284efadc70769312bb0707a8266cc50260ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1344284efadc70769312bb0707a8266cc50260ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1344284efadc70769312bb0707a8266cc50260ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1344284efadc70769312bb0707a8266cc50260ce/comments", "author": null, "committer": null, "parents": [{"sha": "08835e64d378b7f6bf61b88d93850dd81f25030d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08835e64d378b7f6bf61b88d93850dd81f25030d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08835e64d378b7f6bf61b88d93850dd81f25030d"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "f95d01a072e36932b40088b2b7972b9d60a3c86a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1344284efadc70769312bb0707a8266cc50260ce/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1344284efadc70769312bb0707a8266cc50260ce/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1344284efadc70769312bb0707a8266cc50260ce", "patch": "@@ -1,3 +1,9 @@\n+2007-06-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR tree-opt/32231\n+\t* tree-vect-transform.c (vectorizable_call): Call update_stmt\n+\tafter changing the right hand side of the assignment.\n+\n 2007-06-06  Eric Christopher  <echristo@apple.com>\n \n \t* config.gcc (i?86-*-darwin*): Remove arch parameter."}, {"sha": "a1852f0cb08bd803bcaf683e06c8bcd095329715", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1344284efadc70769312bb0707a8266cc50260ce/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1344284efadc70769312bb0707a8266cc50260ce/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1344284efadc70769312bb0707a8266cc50260ce", "patch": "@@ -1,3 +1,8 @@\n+2007-06-06  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR tree-opt/32231\n+\t* gcc.target/i386/vectorize4.c: New test.\n+\n 2007-06-06  Steve Ellcey  <sje@cup.hp.com>\n \n \t* gfortran.dg/integer_exponentiation_3.F90: Use approx. check."}, {"sha": "f3d605e228a509f445f1ef5514249042220fddab", "filename": "gcc/testsuite/gcc.target/i386/vectorize4.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1344284efadc70769312bb0707a8266cc50260ce/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvectorize4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1344284efadc70769312bb0707a8266cc50260ce/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvectorize4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fvectorize4.c?ref=1344284efadc70769312bb0707a8266cc50260ce", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target ilp32 } */\n+/* { dg-options \"-O2 -ffast-math -ftree-vectorize -msse2 --param ggc-min-expand=0 --param ggc-min-heapsize=0\" } */\n+/* This test, tests two thing, we vectorize square root and also we don't crash due to a GC issue.  */\n+\n+\n+extern double sqrt (double __x);\n+calc_freq (int *dest)\n+{\n+  float tmp_out[257];\n+  int i;\n+  for (i = 0; i < 256; i++)\n+    dest[i] = sqrt (tmp_out[i]);\n+}\n+\n+/* { dg-final { scan-assembler \"sqrtpd\" } } */"}, {"sha": "eff1ed7db7d3dd9e40ce18d4395a095609141b90", "filename": "gcc/tree-vect-transform.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1344284efadc70769312bb0707a8266cc50260ce/gcc%2Ftree-vect-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1344284efadc70769312bb0707a8266cc50260ce/gcc%2Ftree-vect-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-transform.c?ref=1344284efadc70769312bb0707a8266cc50260ce", "patch": "@@ -1926,6 +1926,7 @@ vectorizable_call (tree stmt, block_stmt_iterator *bsi, tree *vec_stmt)\n      harmless.  */\n   type = TREE_TYPE (scalar_dest);\n   GIMPLE_STMT_OPERAND (stmt, 1) = fold_convert (type, integer_zero_node);\n+  update_stmt (stmt);\n \n   return true;\n }"}]}