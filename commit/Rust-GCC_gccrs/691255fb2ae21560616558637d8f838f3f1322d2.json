{"sha": "691255fb2ae21560616558637d8f838f3f1322d2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjkxMjU1ZmIyYWUyMTU2MDYxNjU1ODYzN2Q4ZjgzOGYzZjEzMjJkMg==", "commit": {"author": {"name": "Vladimir Puskas", "email": "vpuskas@eunet.yu", "date": "2003-01-21T20:45:57Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2003-01-21T20:45:57Z"}, "message": "natFileWin32.cc (isAbsolute): Check path length before looking at any characters.\n\n2003-01-21  Vladimir Puskas  <vpuskas@eunet.yu>\n\n\t* java/io/natFileWin32.cc (isAbsolute): Check path length before\n\tlooking at any characters.\n\t* java/io/natFilePosix.cc (_stat): Only compute `buf' if it will\n\tbe used.\n\t(isAbsolute): Check path's length as well.\n\nFrom-SVN: r61566", "tree": {"sha": "57a7bb9a11525f22d2e8a098acd05b80ec513c70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57a7bb9a11525f22d2e8a098acd05b80ec513c70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/691255fb2ae21560616558637d8f838f3f1322d2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/691255fb2ae21560616558637d8f838f3f1322d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/691255fb2ae21560616558637d8f838f3f1322d2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/691255fb2ae21560616558637d8f838f3f1322d2/comments", "author": null, "committer": null, "parents": [{"sha": "e8e8c1e5e3c84367e41d7ada5c924574b23350a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e8e8c1e5e3c84367e41d7ada5c924574b23350a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e8e8c1e5e3c84367e41d7ada5c924574b23350a9"}], "stats": {"total": 25, "additions": 17, "deletions": 8}, "files": [{"sha": "4b44d80b7354c9d39b96bb4f3083fce1bee4c36c", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/691255fb2ae21560616558637d8f838f3f1322d2/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/691255fb2ae21560616558637d8f838f3f1322d2/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=691255fb2ae21560616558637d8f838f3f1322d2", "patch": "@@ -1,3 +1,11 @@\n+2003-01-21  Vladimir Puskas  <vpuskas@eunet.yu>\n+\n+\t* java/io/natFileWin32.cc (isAbsolute): Check path length before\n+\tlooking at any characters.\n+\t* java/io/natFilePosix.cc (_stat): Only compute `buf' if it will\n+\tbe used.\n+\t(isAbsolute): Check path's length as well.\n+\n 2003-01-17  Mark Wielaard  <mark@klomp.org>\n \n \t* Makefile.am (core_java_source_files): Add VMObjectStreamClass.java."}, {"sha": "4946cfccae88476998131b97b46ae54fb5930599", "filename": "libjava/java/io/natFilePosix.cc", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/691255fb2ae21560616558637d8f838f3f1322d2/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/691255fb2ae21560616558637d8f838f3f1322d2/libjava%2Fjava%2Fio%2FnatFilePosix.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFilePosix.cc?ref=691255fb2ae21560616558637d8f838f3f1322d2", "patch": "@@ -1,6 +1,6 @@\n // natFile.cc - Native part of File class for POSIX.\n \n-/* Copyright (C) 1998, 1999, 2000, 2001, 2002  Free Software Foundation\n+/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -60,14 +60,14 @@ java::io::File::_access (jint query)\n jboolean\n java::io::File::_stat (jint query)\n {\n+  if (query == ISHIDDEN)\n+    return getName()->charAt(0) == '.';\n+\n+#ifdef HAVE_STAT\n   char *buf = (char *) __builtin_alloca (JvGetStringUTFLength (path) + 1);\n   jsize total = JvGetStringUTFRegion (path, 0, path->length(), buf);\n   buf[total] = '\\0';\n \n-  if (query == ISHIDDEN)\n-    return (getName()->charAt(0) == '.');\n-\n-#ifdef HAVE_STAT\n   struct stat sb;\n   if (::stat (buf, &sb))\n     return false;\n@@ -131,7 +131,7 @@ java::io::File::getCanonicalPath (void)\n jboolean\n java::io::File::isAbsolute (void)\n {\n-  return path->charAt(0) == '/';\n+  return path->length() > 0 && path->charAt(0) == '/';\n }\n \n jobjectArray"}, {"sha": "9bf0eefb74e59d18d010c4372d0d83bb8dc36615", "filename": "libjava/java/io/natFileWin32.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/691255fb2ae21560616558637d8f838f3f1322d2/libjava%2Fjava%2Fio%2FnatFileWin32.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/691255fb2ae21560616558637d8f838f3f1322d2/libjava%2Fjava%2Fio%2FnatFileWin32.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FnatFileWin32.cc?ref=691255fb2ae21560616558637d8f838f3f1322d2", "patch": "@@ -1,6 +1,6 @@\n // natFileWin32.cc - Native part of File class.\n \n-/* Copyright (C) 1998, 1999, 2002  Red Hat, Inc.\n+/* Copyright (C) 1998, 1999, 2002, 2003  Red Hat, Inc.\n \n    This file is part of libgcj.\n \n@@ -119,7 +119,8 @@ java::io::File::getCanonicalPath (void)\n jboolean\n java::io::File::isAbsolute (void)\n {\n-  if (path->charAt(0) == '/' || path->charAt(0) == '\\\\')\n+  if (path->length() > 0\n+      && (path->charAt(0) == '/' || path->charAt(0) == '\\\\'))\n     return true;\n   if (path->length() < 3)\n     return false;"}]}