{"sha": "130e00bd2407957f9cc32f7c107502848016166e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMwZTAwYmQyNDA3OTU3ZjljYzMyZjdjMTA3NTAyODQ4MDE2MTY2ZQ==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2012-08-22T08:36:23Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2012-08-22T08:36:23Z"}, "message": "Makefile.in (vis_hide, [...]): Do not make definitions depend on --enable-shared.\n\n\t* Makefile.in (vis_hide, gen-hide-list): Do not make definitions\n\tdepend on --enable-shared.\n\t($(lib1asmfuncs-o)): Use %.vis files independent of\n\t--enable-shared.\n\t* static-object.mk ($(base)$(objext), $(base).vis)\n\t($(base)_s$(objext)): Use same rules for visibility handling as in\n\tshared-object.mk.\n\nFrom-SVN: r190588", "tree": {"sha": "1ae2eef23131163eea19446e9fa59d3a68dc846d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ae2eef23131163eea19446e9fa59d3a68dc846d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/130e00bd2407957f9cc32f7c107502848016166e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/130e00bd2407957f9cc32f7c107502848016166e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/130e00bd2407957f9cc32f7c107502848016166e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/130e00bd2407957f9cc32f7c107502848016166e/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8f8a0b41e8cb34f205b58bea6080da4e6cfb337", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8f8a0b41e8cb34f205b58bea6080da4e6cfb337", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8f8a0b41e8cb34f205b58bea6080da4e6cfb337"}], "stats": {"total": 36, "additions": 22, "deletions": 14}, "files": [{"sha": "0d4d78dceaacf78b655c806ffd2fbd0867af643f", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130e00bd2407957f9cc32f7c107502848016166e/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130e00bd2407957f9cc32f7c107502848016166e/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=130e00bd2407957f9cc32f7c107502848016166e", "patch": "@@ -1,3 +1,13 @@\n+2012-08-22  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* Makefile.in (vis_hide, gen-hide-list): Do not make definitions\n+\tdepend on --enable-shared.\n+\t($(lib1asmfuncs-o)): Use %.vis files independent of\n+\t--enable-shared.\n+\t* static-object.mk ($(base)$(objext), $(base).vis)\n+\t($(base)_s$(objext)): Use same rules for visibility handling as in\n+\tshared-object.mk.\n+\n 2012-08-21  Ian Lance Taylor  <iant@google.com>\n \n \t* config/i386/morestack.S (__morestack_non_split): Increase amount"}, {"sha": "b37fdb90e0ac7369df7d56b55d372e60ff5e1a82", "filename": "libgcc/Makefile.in", "status": "modified", "additions": 4, "deletions": 12, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130e00bd2407957f9cc32f7c107502848016166e/libgcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130e00bd2407957f9cc32f7c107502848016166e/libgcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FMakefile.in?ref=130e00bd2407957f9cc32f7c107502848016166e", "patch": "@@ -363,6 +363,7 @@ ifeq ($(enable_shared),yes)\n   ifneq ($(LIBUNWIND),)\n     install-libunwind = install-libunwind\n   endif\n+endif\n \n # For -fvisibility=hidden.  We need both a -fvisibility=hidden on\n # the command line, and a #define to prevent libgcc2.h etc from\n@@ -386,11 +387,8 @@ else\n gen-hide-list = echo > $@\n endif\n \n-else\n-# Not enable_shared.\n+ifneq ($(enable_shared),yes)\n iterator = $(srcdir)/empty.mk $(patsubst %,$(srcdir)/static-object.mk,$(iter-items))\n-vis_hide =\n-gen-hide-list = echo > \\$@\n endif\n \n LIB2ADD += enable-execute-stack.c\n@@ -439,7 +437,6 @@ LIB2_DIVMOD_FUNCS := $(filter-out $(LIB2FUNCS_EXCLUDE) $(LIB1ASMFUNCS), \\\n \t\t       $(LIB2_DIVMOD_FUNCS))\n \n # Build \"libgcc1\" (assembly) components.\n-ifeq ($(enable_shared),yes)\n \n lib1asmfuncs-o = $(patsubst %,%$(objext),$(LIB1ASMFUNCS))\n $(lib1asmfuncs-o): %$(objext): $(srcdir)/config/$(LIB1ASMSRC) %.vis\n@@ -451,14 +448,9 @@ libgcc-objects += $(lib1asmfuncs-o)\n lib1asmfuncs-s-o = $(patsubst %,%_s$(objext),$(LIB1ASMFUNCS))\n $(lib1asmfuncs-s-o): %_s$(objext): $(srcdir)/config/$(LIB1ASMSRC)\n \t$(gcc_s_compile) -DL$* -xassembler-with-cpp -c $<\n-libgcc-s-objects += $(lib1asmfuncs-s-o)\n-\n-else\n+ifeq ($(enable_shared),yes)\n \n-lib1asmfuncs-o = $(patsubst %,%$(objext),$(LIB1ASMFUNCS))\n-$(lib1asmfuncs-o): %$(objext): $(srcdir)/config/$(LIB1ASMSRC)\n-\t$(gcc_compile) -DL$* -xassembler-with-cpp -c $<\n-libgcc-objects += $(lib1asmfuncs-o)\n+libgcc-s-objects += $(lib1asmfuncs-s-o)\n \n endif\n "}, {"sha": "4f536369f0dfa10bfe8281619b02996fa57d0beb", "filename": "libgcc/static-object.mk", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130e00bd2407957f9cc32f7c107502848016166e/libgcc%2Fstatic-object.mk", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130e00bd2407957f9cc32f7c107502848016166e/libgcc%2Fstatic-object.mk", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fstatic-object.mk?ref=130e00bd2407957f9cc32f7c107502848016166e", "patch": "@@ -24,7 +24,13 @@ $(error Unsupported file type: $o)\n endif\n endif\n \n-$(base)$(objext): $o\n-\t$(gcc_compile) -c -xassembler-with-cpp $<\n+$(base)$(objext): $o $(base).vis\n+\t$(gcc_compile) -c -xassembler-with-cpp -include $*.vis $<\n+\n+$(base).vis: $(base)_s$(objext)\n+\t$(gen-hide-list)\n+\n+$(base)_s$(objext): $o\n+\t$(gcc_s_compile) -c -xassembler-with-cpp $<\n \n endif"}]}