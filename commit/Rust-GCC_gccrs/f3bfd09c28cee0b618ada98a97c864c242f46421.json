{"sha": "f3bfd09c28cee0b618ada98a97c864c242f46421", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjNiZmQwOWMyOGNlZTBiNjE4YWRhOThhOTdjODY0YzI0MmY0NjQyMQ==", "commit": {"author": {"name": "Dan Nicolaescu", "email": "dann@ics.uci.edu", "date": "2001-12-12T02:22:51Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-12-12T02:22:51Z"}, "message": "* config/sparc/sparc.md (prefetch): New.\n\nFrom-SVN: r47911", "tree": {"sha": "8c6adc3de9a3851e96397be7cef2fabcc31872e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c6adc3de9a3851e96397be7cef2fabcc31872e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3bfd09c28cee0b618ada98a97c864c242f46421", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3bfd09c28cee0b618ada98a97c864c242f46421", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3bfd09c28cee0b618ada98a97c864c242f46421", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3bfd09c28cee0b618ada98a97c864c242f46421/comments", "author": null, "committer": null, "parents": [{"sha": "e817125dbbc96845ced07f54f93df2d757d0398f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e817125dbbc96845ced07f54f93df2d757d0398f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e817125dbbc96845ced07f54f93df2d757d0398f"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "48a09e5f73d633aeb93441c0f5c1f2d5d4b5b4bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3bfd09c28cee0b618ada98a97c864c242f46421/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3bfd09c28cee0b618ada98a97c864c242f46421/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f3bfd09c28cee0b618ada98a97c864c242f46421", "patch": "@@ -1,3 +1,7 @@\n+2001-12-11  Dan Nicolaescu  <dann@ics.uci.edu>\n+\n+\t* config/sparc/sparc.md (prefetch): New.\n+\n 2001-12-11  Aldy Hernandez  <aldyh@redhat.com>\n \n         * output.h (regno_uninitialized): Make argument unsigned."}, {"sha": "fc3f10bf0d98fc93070fb0c3e826b134e5d1b3fe", "filename": "gcc/config/sparc/sparc.md", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3bfd09c28cee0b618ada98a97c864c242f46421/gcc%2Fconfig%2Fsparc%2Fsparc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3bfd09c28cee0b618ada98a97c864c242f46421/gcc%2Fconfig%2Fsparc%2Fsparc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.md?ref=f3bfd09c28cee0b618ada98a97c864c242f46421", "patch": "@@ -9224,6 +9224,37 @@\n    && short_branch (INSN_UID (insn), INSN_UID (operands[2]))\n    && (USING_SJLJ_EXCEPTIONS || ! can_throw_internal (insn))\"\n   \"call\\\\t%a0, %1\\\\n\\\\tadd\\\\t%%o7, (%l2-.-4), %%o7\")\n+\n+(define_insn \"prefetch\"\n+  [(prefetch (match_operand:DI 0 \"address_operand\" \"p\")\n+\t     (match_operand:DI 1 \"const_int_operand\" \"n\")\n+\t     (match_operand:DI 2 \"const_int_operand\" \"n\"))]\n+  \"TARGET_V9\"\n+{\n+  static const char * const prefetch_instr[2][4] = {\n+    {\n+      \"prefetch\\\\t[%a0], 1\", /* no locality: prefetch for one read */\n+      \"prefetch\\\\t[%a0], 0\", /* medium locality: prefetch for several reads */\n+      \"prefetch\\\\t[%a0], 0\", /* medium locality: prefetch for several reads */\n+      \"prefetch\\\\t[%a0], 4\", /* high locality: prefetch page */\n+    },\n+    {\n+      \"prefetch\\\\t[%a0], 3\", /* no locality: prefetch for one write */\n+      \"prefetch\\\\t[%a0], 2\", /* medium locality: prefetch for several writes */\n+      \"prefetch\\\\t[%a0], 2\", /* medium locality: prefetch for several writes */\n+      \"prefetch\\\\t[%a0], 4\", /* high locality: prefetch page */\n+    }\n+  };\n+  int read_or_write = INTVAL (operands[1]);\n+  int locality = INTVAL (operands[2]);\n+\n+  if (read_or_write != 0 && read_or_write != 1)\n+    abort ();\n+  if (locality < 0 || locality > 3)\n+    abort ();\n+  return prefetch_instr [read_or_write][locality];\n+}\n+  [(set_attr \"type\" \"load\")])\n \f\n (define_expand \"prologue\"\n   [(const_int 1)]"}]}