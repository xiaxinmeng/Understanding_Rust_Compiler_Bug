{"sha": "5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU2NWQzZWU5YWRhNmQyMGVmZjVhMDlkNmMyYThhZjY5NTg4NzkxMw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-05-24T23:38:55Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-05-24T23:38:55Z"}, "message": "decl2.c (mark_vtable_entries): Don't make a copy of a function, and then make it look like `abort'.\n\n\t* decl2.c (mark_vtable_entries): Don't make a copy of a function,\n\tand then make it look like `abort'.  Just use `abort' instead.\n\nFrom-SVN: r27131", "tree": {"sha": "b45a659b2b3d0176195cb9e011fdbd9983c9c5cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b45a659b2b3d0176195cb9e011fdbd9983c9c5cc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/comments", "author": null, "committer": null, "parents": [{"sha": "590e30e761c43b00bcfb75d853947a65e1823c62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/590e30e761c43b00bcfb75d853947a65e1823c62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/590e30e761c43b00bcfb75d853947a65e1823c62"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "835402f0f0cfb19bdea6a3f8b704b28f09ad5812", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "patch": "@@ -1,5 +1,8 @@\n 1999-05-24  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* decl2.c (mark_vtable_entries): Don't make a copy of a function,\n+\tand then make it look like `abort'.  Just use `abort' instead.\n+\t\n \t* typeck.c (build_static_cast): Don't allow static_casts that cast\n \taway constness.\n \t(casts_away_constness_r): New function."}, {"sha": "793a974c1e35796237053ad5f6c20a8eaf3e8ae5", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "patch": "@@ -2424,8 +2424,7 @@ mark_vtable_entries (decl)\n       TREE_ADDRESSABLE (fn) = 1;\n       if (DECL_LANG_SPECIFIC (fn) && DECL_ABSTRACT_VIRTUAL_P (fn))\n \t{\n-\t  TREE_OPERAND (fnaddr, 0) = fn = copy_node (fn);\n-\t  DECL_RTL (fn) = DECL_RTL (abort_fndecl);\n+\t  TREE_OPERAND (fnaddr, 0) = abort_fndecl;\n \t  mark_used (abort_fndecl);\n \t}\n       if (TREE_CODE (fn) == THUNK_DECL && DECL_EXTERNAL (fn))"}, {"sha": "052b049790865a6dcfc478d29f2acc40e336e8d5", "filename": "gcc/testsuite/g++.old-deja/g++.pt/virtual2.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fvirtual2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e65d3ee9ada6d20eff5a09d6c2a8af695887913/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fvirtual2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fvirtual2.C?ref=5e65d3ee9ada6d20eff5a09d6c2a8af695887913", "patch": "@@ -0,0 +1,21 @@\n+// Build don't link:\n+// Origin: Mark Mitchell <mark@codesourcery.com>\n+\n+template <class T>\n+struct B \n+{\n+  virtual void f() = 0;\n+};\n+\n+template <class T>\n+struct D : public B<T> {\n+  virtual void f();\n+};\n+\n+void g() {\n+  B<int>* bi = new D<int>;\n+};\n+\n+template <class T>\n+void B<T>::f() {}\n+"}]}