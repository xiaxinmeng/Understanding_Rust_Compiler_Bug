{"sha": "229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjI5YjhlYzdjNmIxNmE5NDRiNDUwZWU4YWE3ZDdhMDhiNGZkZmE4YQ==", "commit": {"author": {"name": "Alex Samuel", "email": "samuel@codesourcery.com", "date": "2000-06-28T06:08:27Z"}, "committer": {"name": "Alex Samuel", "email": "samuel@gcc.gnu.org", "date": "2000-06-28T06:08:27Z"}, "message": "cp-demangle.c (demangle_special_name): Swap base and derived class when demangling construction vtables.\n\n\t* cp-demangle.c (demangle_special_name): Swap base and derived\n\tclass when demangling construction vtables.\n\nFrom-SVN: r34751", "tree": {"sha": "892461fc48beb346dd981ae892015c248e88017d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/892461fc48beb346dd981ae892015c248e88017d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a/comments", "author": null, "committer": null, "parents": [{"sha": "06772c7d0e9076d373ab6b1a623c617ea565b699", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06772c7d0e9076d373ab6b1a623c617ea565b699", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06772c7d0e9076d373ab6b1a623c617ea565b699"}], "stats": {"total": 32, "additions": 28, "deletions": 4}, "files": [{"sha": "ad5c214e6470ac10b95cd22cbaffd4bebaf84704", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a", "patch": "@@ -1,3 +1,8 @@\n+2000-06-27  Alex Samuel  <samuel@codesourcery.com>\n+\n+\t* cp-demangle.c (demangle_special_name): Swap base and derived\n+\tclass when demangling construction vtables.\n+\n 2000-06-21  Alex Samuel  <samuel@codesourcery.com>\n \n \t* cp-demangle.c: Don't include ctype.h."}, {"sha": "b658b40d9ffed9d287fb25d26e68b8f4b4a19921", "filename": "libiberty/cp-demangle.c", "status": "modified", "additions": 23, "deletions": 4, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a/libiberty%2Fcp-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a/libiberty%2Fcp-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fcp-demangle.c?ref=229b8ec7c6b16a944b450ee8aa7d7a08b4fdfa8a", "patch": "@@ -1682,19 +1682,38 @@ demangle_special_name (dm)\n \t  /* TC is a special g++ mangling for a construction vtable. */\n \t  if (!flag_strict)\n \t    {\n+\t      dyn_string_t derived_type;\n+\n \t      advance_char (dm);\n \t      RETURN_IF_ERROR (result_append (dm, \"construction vtable for \"));\n+\n+\t      /* Demangle the derived type off to the side.  */\n+\t      RETURN_IF_ERROR (result_push (dm));\n \t      RETURN_IF_ERROR (demangle_type (dm));\n+\t      derived_type = (dyn_string_t) result_pop (dm);\n+\n \t      /* Demangle the offset.  */\n \t      number = dyn_string_new (4);\n \t      if (number == NULL)\n-\t\treturn STATUS_ALLOCATION_FAILED;\n+\t\t{\n+\t\t  dyn_string_delete (derived_type);\n+\t\t  return STATUS_ALLOCATION_FAILED;\n+\t\t}\n \t      demangle_number_literally (dm, number, 10, 1);\n \t      /* Demangle the underscore separator.  */\n-\t      RETURN_IF_ERROR (demangle_char (dm, '_'));\n+\t      status = demangle_char (dm, '_');\n+\n \t      /* Demangle the base type.  */\n-\t      RETURN_IF_ERROR (result_append (dm, \"-in-\"));\n-\t      RETURN_IF_ERROR (demangle_type (dm));\n+\t      if (STATUS_NO_ERROR (status))\n+\t\tstatus = demangle_type (dm);\n+\n+\t      /* Emit the derived type.  */\n+\t      if (STATUS_NO_ERROR (status))\n+\t\tstatus = result_append (dm, \"-in-\");\n+\t      if (STATUS_NO_ERROR (status))\n+\t\tstatus = result_append_string (dm, derived_type);\n+\t      dyn_string_delete (derived_type);\n+\n \t      /* Don't display the offset unless in verbose mode.  */\n \t      if (flag_verbose)\n \t\t{"}]}