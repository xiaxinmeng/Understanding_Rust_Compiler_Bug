{"sha": "770d3487ef18a71f65626c182625889eee29f580", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcwZDM0ODdlZjE4YTcxZjY1NjI2YzE4MjYyNTg4OWVlZTI5ZjU4MA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2021-03-15T19:25:32Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2021-03-15T19:25:32Z"}, "message": "c++: Fix 2 testcases [PR 99601]\n\nI'd failed to correctly restrict some checks to lp64 x86 targets.\n\n\tPR c++/99601\n\tgcc/testsuite/\n\t* g++.dg/modules/builtin-3_a.C: Fix lp64 x86 detection.\n\t* g++.dg/modules/builtin-3_b.C: Fix lp64 x86 detection.", "tree": {"sha": "c1f880e2aa844da0d62c02b3f027814b78de8875", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1f880e2aa844da0d62c02b3f027814b78de8875"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/770d3487ef18a71f65626c182625889eee29f580", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770d3487ef18a71f65626c182625889eee29f580", "html_url": "https://github.com/Rust-GCC/gccrs/commit/770d3487ef18a71f65626c182625889eee29f580", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770d3487ef18a71f65626c182625889eee29f580/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2be82058fb40f3ae891c68d185ff53e07f14f45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2be82058fb40f3ae891c68d185ff53e07f14f45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2be82058fb40f3ae891c68d185ff53e07f14f45"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "5f61fa4efab61edc9425f5494570408c6f42f78a", "filename": "gcc/testsuite/g++.dg/modules/builtin-3_a.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770d3487ef18a71f65626c182625889eee29f580/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770d3487ef18a71f65626c182625889eee29f580/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_a.C?ref=770d3487ef18a71f65626c182625889eee29f580", "patch": "@@ -30,8 +30,8 @@ export inline int count (int a, ...)\n // The implementation details of va_list's are target-specific.\n // Usually one of two patterns though\n // { dg-final { scan-lang-dump-not { Cluster members:\\n  \\[0\\]=decl declaration '::__builtin_va_list'\\n  \\[1\\]=binding '::__builtin_va_list'\\n} module { target i?86-*-linux* x86_64-*-linux* } } }\n-// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* type_decl:'::__builtin_va_list'@builtins} module { target x86_64-*-linux* } } }\n-// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) type_decl:'::__builtin_va_list'} module { target x86_64-*-linux* } } }\n+// { dg-final { scan-lang-dump {Wrote GMF:-[0-9]* type_decl:'::__builtin_va_list'@builtins} module { { target x86_64-*-linux* i>86-*-linux* } && lp64 } }\n+// { dg-final { scan-lang-dump {Writing:-[0-9]*'s named merge key \\(decl\\) type_decl:'::__builtin_va_list'} module { target { x86_64-*-linux* i?86-*-linux* } && lp64 } } }\n \n // { dg-final { scan-lang-dump {Writing:-1's named merge key \\(decl\\) type_decl:'::__gnuc_va_list'} module { target i?86-*-linux* *-*-darwin* } } }\n // { dg-final { scan-lang-dump {Wrote GMF:-3 type_decl:'::__gnuc_va_list'@builtins} module { target i?86-*-linux* *-*-darwin* } } }"}, {"sha": "5c94890c9c446c989fc4084774ec44668c2bc7bd", "filename": "gcc/testsuite/g++.dg/modules/builtin-3_b.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770d3487ef18a71f65626c182625889eee29f580/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770d3487ef18a71f65626c182625889eee29f580/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fmodules%2Fbuiltin-3_b.C?ref=770d3487ef18a71f65626c182625889eee29f580", "patch": "@@ -8,6 +8,6 @@ int main ()\n }\n \n // { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) function_decl:'::__builtin_strlen'} module } }\n-// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) type_decl:'::__builtin_va_list'} module { target { x86_64-*-linux* } } } }\n+// { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(matched\\) type_decl:'::__builtin_va_list'} module { target { { x86_64-*-linux* i?86-*-linux* } && lp64 } } }\n // { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(new\\) type_decl:'::va_list'} module } }\n // { dg-final { scan-lang-dump {Read:-[0-9]*'s named merge key \\(new\\) type_decl:'::__gnuc_va_list'} module } }"}]}