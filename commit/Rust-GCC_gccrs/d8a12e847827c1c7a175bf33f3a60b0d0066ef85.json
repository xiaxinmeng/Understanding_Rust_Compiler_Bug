{"sha": "d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhhMTJlODQ3ODI3YzFjN2ExNzViZjMzZjNhNjBiMGQwMDY2ZWY4NQ==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2010-04-09T16:08:42Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2010-04-09T16:08:42Z"}, "message": "re PR preprocessor/43195 (#pragma once and -H)\n\n2010-04-09  Manuel L\u00f3pez-Ib\u00e1\u00f1ez <manu@gcc.gnu.org>\n\n\tPR cpp/43195\nlibcpp/\n\t* files.c (report_missing_guard): Test for #pragma once.\ntestsuite/\n\t* gcc.dg/cpp/pr43195.c: New.\n\t* gcc.dg/cpp/pr43195.h: New.\n\nFrom-SVN: r158169", "tree": {"sha": "20db70a3cd343042fa4941b4885b6d97190834a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20db70a3cd343042fa4941b4885b6d97190834a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/comments", "author": null, "committer": null, "parents": [{"sha": "d0b8780d9f4b5b5b98063995671e44d01712fcf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0b8780d9f4b5b5b98063995671e44d01712fcf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0b8780d9f4b5b5b98063995671e44d01712fcf9"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "3d07046b9d15e13292f35517c318cb7fb2f1abf4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "patch": "@@ -1,3 +1,9 @@\n+2010-04-09  Manuel L\u00f3pez-Ib\u00e1\u00f1ez <manu@gcc.gnu.org>\n+\n+\tPR cpp/43195\n+\t* gcc.dg/cpp/pr43195.c: New.\n+\t* gcc.dg/cpp/pr43195.h: New.\n+\n 2010-04-09  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR 42965"}, {"sha": "a239fc17ba7b98364f7707bb5bea245453770194", "filename": "gcc/testsuite/gcc.dg/cpp/pr43195.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr43195.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr43195.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr43195.c?ref=d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "patch": "@@ -0,0 +1,6 @@\n+/* PR preprocessor/43195 */\n+/* { dg-do preprocess } */\n+/* { dg-options \"-H\" } */\n+/* { dg-message \"pr43195\\.h\\n\" \"\" { target *-*-* } 0 } */\n+#include \"pr43195.h\"\n+"}, {"sha": "6f70f09beec2219624baeca92e2cd7deaa104fb4", "filename": "gcc/testsuite/gcc.dg/cpp/pr43195.h", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr43195.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr43195.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fpr43195.h?ref=d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "patch": "@@ -0,0 +1 @@\n+#pragma once"}, {"sha": "24838d3cd10bcb23ef676a10c1e1c517c6a2532b", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "patch": "@@ -1,3 +1,8 @@\n+2010-04-09  Manuel L\u00f3pez-Ib\u00e1\u00f1ez <manu@gcc.gnu.org>\n+\n+\tPR cpp/43195\n+\t* files.c (report_missing_guard): Test for #pragma once.\n+\n 2010-04-07  Simon Baldwin  <simonb@google.com>\n \n \t* directives.c (do_diagnostic): Add warning reason argument,"}, {"sha": "be39db9a94cee0ebe6bc10c29935e728f8b3d0de", "filename": "libcpp/files.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/libcpp%2Ffiles.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8a12e847827c1c7a175bf33f3a60b0d0066ef85/libcpp%2Ffiles.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Ffiles.c?ref=d8a12e847827c1c7a175bf33f3a60b0d0066ef85", "patch": "@@ -1261,7 +1261,8 @@ report_missing_guard (void **slot, void *d)\n       _cpp_file *file = entry->u.file;\n \n       /* We don't want MI guard advice for the main file.  */\n-      if (file->cmacro == NULL && file->stack_count == 1 && !file->main_file)\n+      if (!file->once_only && file->cmacro == NULL\n+\t  && file->stack_count == 1 && !file->main_file)\n \t{\n \t  if (data->paths == NULL)\n \t    {"}]}