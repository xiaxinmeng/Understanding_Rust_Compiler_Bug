{"sha": "8b9b8e930562b7cf5598dc5b564fa71d989ebb3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI5YjhlOTMwNTYyYjdjZjU1OThkYzViNTY0ZmE3MWQ5ODllYmIzYw==", "commit": {"author": {"name": "Doug Evans", "email": "dje@google.com", "date": "2010-04-14T21:16:34Z"}, "committer": {"name": "Doug Evans", "email": "devans@gcc.gnu.org", "date": "2010-04-14T21:16:34Z"}, "message": "* filenames.h (HAS_DRIVE_SPEC, STRIP_DRIVE_SPEC): New macros.\n\nFrom-SVN: r158359", "tree": {"sha": "c49575b8d1d4efbbd846cb19ee136295d1fad2ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c49575b8d1d4efbbd846cb19ee136295d1fad2ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c/comments", "author": null, "committer": null, "parents": [{"sha": "31ce8a531ca723fa33ddd5915fe7314a0ba6f0e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31ce8a531ca723fa33ddd5915fe7314a0ba6f0e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31ce8a531ca723fa33ddd5915fe7314a0ba6f0e5"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "938b5ba844051f0a053a8591cb52a561df4c65ee", "filename": "include/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=8b9b8e930562b7cf5598dc5b564fa71d989ebb3c", "patch": "@@ -1,3 +1,7 @@\n+2010-04-14  Doug Evans  <dje@google.com>\n+\n+\t* filenames.h (HAS_DRIVE_SPEC, STRIP_DRIVE_SPEC): New macros.\n+\n 2010-04-13  Matthias Klose  <doko@ubuntu.com>\n \n \t* elf: Remove empty directory."}, {"sha": "d5e34a0120011fe8959837d279c76b3f7ef696c9", "filename": "include/filenames.h", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c/include%2Ffilenames.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b9b8e930562b7cf5598dc5b564fa71d989ebb3c/include%2Ffilenames.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Ffilenames.h?ref=8b9b8e930562b7cf5598dc5b564fa71d989ebb3c", "patch": "@@ -5,7 +5,7 @@\n    use forward- and back-slash in path names interchangeably, and\n    some of them have case-insensitive file names.\n \n-   Copyright 2000, 2001, 2007 Free Software Foundation, Inc.\n+   Copyright 2000, 2001, 2007, 2010 Free Software Foundation, Inc.\n \n This file is part of BFD, the Binary File Descriptor library.\n \n@@ -37,17 +37,27 @@ extern \"C\" {\n #endif\n \n #define IS_DIR_SEPARATOR(c)\t((c) == '/' || (c) == '\\\\')\n+\n+#define HAS_DRIVE_SPEC(f)\t(((f)[0]) && ((f)[1] == ':'))\n+\n+/* Remove the drive spec from F, assuming HAS_DRIVE_SPEC (f).\n+   The result is a pointer to the remainder of F.  */\n+#define STRIP_DRIVE_SPEC(f)\t((f) + 2)\n+\n /* Note that IS_ABSOLUTE_PATH accepts d:foo as well, although it is\n    only semi-absolute.  This is because the users of IS_ABSOLUTE_PATH\n    want to know whether to prepend the current working directory to\n    a file name, which should not be done with a name like d:foo.  */\n-#define IS_ABSOLUTE_PATH(f)\t(IS_DIR_SEPARATOR((f)[0]) || (((f)[0]) && ((f)[1] == ':')))\n+#define IS_ABSOLUTE_PATH(f)\t(IS_DIR_SEPARATOR((f)[0]) || HAS_DRIVE_SPEC(f))\n \n #else  /* not DOSish */\n \n #define IS_DIR_SEPARATOR(c)\t((c) == '/')\n #define IS_ABSOLUTE_PATH(f)\t(IS_DIR_SEPARATOR((f)[0]))\n \n+#define HAS_DRIVE_SPEC(f)\t(0)\n+#define STRIP_DRIVE_SPEC(f)\t(f)\n+\n #endif /* not DOSish */\n \n extern int filename_cmp (const char *s1, const char *s2);"}]}