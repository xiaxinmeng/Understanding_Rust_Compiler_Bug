{"sha": "afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZhN2M5MDM5YzY5ZTRiZDVkYTZjYWFiNGRmMzVlYTMyZmQ1MWRiNQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2017-12-19T17:50:31Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2017-12-19T17:50:31Z"}, "message": "[SFN] start rtl block with label, then markers\n\nEmitting markers before labels turned out to not be worth the trouble.\nThe markers outside BBs confuse the ebb scheduler, and they don't add\nany useful information.  I'll arrange for markers to be moved past\nlabels, even in gimple, but for now this will fix the two remaining\nknown problems on ia64.\n\nfor  gcc/ChangeLog\n\n\tPR bootstrap/83396\n\t* cfgexpand.c (expand_gimple_basic_block): Expand label first,\n\teven if there are markers before it.\n\t* cfgrtl.c (rtl_verify_bb_layout): Reject DEBUG_INSNs outside BBs.\n\nFrom-SVN: r255833", "tree": {"sha": "792a16dead90049a61aa96e6fdfe303225646435", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/792a16dead90049a61aa96e6fdfe303225646435"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/comments", "author": null, "committer": null, "parents": [{"sha": "1e6bc14517c48daf008200f3f5616822e9e60bcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e6bc14517c48daf008200f3f5616822e9e60bcd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e6bc14517c48daf008200f3f5616822e9e60bcd"}], "stats": {"total": 20, "additions": 11, "deletions": 9}, "files": [{"sha": "0552a935af6b87eda3966466e56e45cb1d468913", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "patch": "@@ -1,3 +1,10 @@\n+2017-12-19  Alexandre Oliva <aoliva@redhat.com>\n+\n+\tPR bootstrap/83396\n+\t* cfgexpand.c (expand_gimple_basic_block): Expand label first,\n+\teven if there are markers before it.\n+\t* cfgrtl.c (rtl_verify_bb_layout): Reject DEBUG_INSNs outside BBs.\n+\n 2017-12-19  Jakub Jelinek  <jakub@redhat.com>\n \n \t* read-rtl.c (parse_reg_note_name): Replace Yoda conditions with"}, {"sha": "d1616e192cb51e897d65fcfb80b2bd6bc7587b2e", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 4, "deletions": 8, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "patch": "@@ -5515,20 +5515,16 @@ expand_gimple_basic_block (basic_block bb, bool disable_tail_calls)\n   gimple *label_stmt = stmt;\n   rtx_code_label **elt = lab_rtx_for_bb->get (bb);\n \n-  if (stmt)\n-    /* We'll get to it in the loop below, and get back to\n-       emit_label_and_note then.  */\n-    ;\n-  else if (stmt || elt)\n+  if (stmt || elt)\n     {\n-    emit_label_and_note:\n       gcc_checking_assert (!note);\n       last = get_last_insn ();\n \n       if (stmt)\n \t{\n \t  expand_gimple_stmt (stmt);\n-\t  gsi_next (&gsi);\n+\t  if (gsi_stmt (gsi) == stmt)\n+\t    gsi_next (&gsi);\n \t}\n \n       if (elt)\n@@ -5555,7 +5551,7 @@ expand_gimple_basic_block (basic_block bb, bool disable_tail_calls)\n       stmt = gsi_stmt (gsi);\n \n       if (stmt == label_stmt)\n-\tgoto emit_label_and_note;\n+\tcontinue;\n \n       /* If this statement is a non-debug one, and we generate debug\n \t insns, then this one might be the last real use of a TERed"}, {"sha": "45cccba680c99f961c141c07a075c0ed3eca7297", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afa7c9039c69e4bd5da6caab4df35ea32fd51db5/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=afa7c9039c69e4bd5da6caab4df35ea32fd51db5", "patch": "@@ -2954,7 +2954,6 @@ rtl_verify_bb_layout (void)\n \t    {\n \t    case BARRIER:\n \t    case NOTE:\n-\t    case DEBUG_INSN:\n \t      break;\n \n \t    case CODE_LABEL:"}]}