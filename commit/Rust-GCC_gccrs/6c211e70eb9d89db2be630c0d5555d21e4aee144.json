{"sha": "6c211e70eb9d89db2be630c0d5555d21e4aee144", "node_id": "C_kwDOANBUbNoAKDZjMjExZTcwZWI5ZDg5ZGIyYmU2MzBjMGQ1NTU1ZDIxZTRhZWUxNDQ", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@arm.com", "date": "2022-04-26T14:57:02Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@arm.com", "date": "2022-04-27T08:19:39Z"}, "message": "testsuite: Add arm testcase for PR105374\n\nAs discussed in the PR, here is the testcase with the appropriate dg-*\ndirectives.\n\nTested on arm-none-eabi with\n1 -mcpu=cortex-a7/-mfloat-abi=soft/-march=armv7ve+simd\n2 -mcpu=cortex-a7/-mfloat-abi=hard/-march=armv7ve+simd\n3 -mthumb/-mcpu=cortex-a7/-mfloat-abi=hard/-march=armv7ve+simd\n4 -mthumb/-mfloat-abi=soft/-march=armv6s-m\n5 -mthumb/-mfloat-abi=soft/-march=armv7-m\n6 -mthumb/-mfloat-abi=hard/-march=armv7e-m+fp\n7 -mthumb/-mfloat-abi=hard/-march=armv7e-m+fp.dp\n8 -mthumb/-mfloat-abi=hard/-march=armv8-m.main+fp+dsp\n9 -mthumb/-mfloat-abi=hard/-march=armv8.1-m.main+mve.fp+fp.dp\n10 -mthumb/-mfloat-abi=hard/-march=armv8.1-m.main+mve\n\nThe test is UNSUPPORTED with the first three ones (because of\n-mcpu=cortex-a7), ignored with armv6s-m, and PASSes with all the other\nones, while it used crash without Jakub's fix (r12-8263), ie. FAIL\nwith options 5,6,7,8,10. The test passed without Jakub's fix with\noption 9 because the problem happens only with an integer-only MVE.\n\n2022-04-26  Christophe Lyon  <christophe.lyon@arm.com>\n\n\tgcc/testsuite/\n\n\tPR tree-optimization/105374\n\t* gcc.target/arm/simd/pr105374.C: New.", "tree": {"sha": "f40d1fe2e236b8f54a3c3aed5751547e5b8cba69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f40d1fe2e236b8f54a3c3aed5751547e5b8cba69"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c211e70eb9d89db2be630c0d5555d21e4aee144", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c211e70eb9d89db2be630c0d5555d21e4aee144", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c211e70eb9d89db2be630c0d5555d21e4aee144", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c211e70eb9d89db2be630c0d5555d21e4aee144/comments", "author": null, "committer": null, "parents": [{"sha": "b2df4c40c44adcc1d70db11c39593ace9b4cb588", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2df4c40c44adcc1d70db11c39593ace9b4cb588", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2df4c40c44adcc1d70db11c39593ace9b4cb588"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "2b9096f1f521f82d5961befb4b1e3f360fc83fb2", "filename": "gcc/testsuite/gcc.target/arm/simd/pr105374.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c211e70eb9d89db2be630c0d5555d21e4aee144/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr105374.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c211e70eb9d89db2be630c0d5555d21e4aee144/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr105374.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fsimd%2Fpr105374.C?ref=6c211e70eb9d89db2be630c0d5555d21e4aee144", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O3\" } */\n+/* { dg-require-effective-target arm_v8_1m_mve_ok } */\n+/* { dg-add-options arm_v8_1m_mve } */\n+\n+typedef float v4f __attribute__((vector_size(4 * sizeof(float))));\n+v4f f_x, f_y;\n+long f() { return (f_x < f_y | f_x <= f_y)[2]; }"}]}