{"sha": "1432b19f40085f820a883101a40e878452b15e2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQzMmIxOWY0MDA4NWY4MjBhODgzMTAxYTQwZTg3ODQ1MmIxNWUyYQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2007-10-15T17:07:20Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2007-10-15T17:07:20Z"}, "message": "re PR tree-optimization/33735 (verify_stmts failed: missing PHI def)\n\ngcc/ChangeLog:\nPR tree-optimization/33735\nPR tree-optimization/33572\n* tree-inline.c (update_ssa_across_abnormal_edges): Revert\n2007-10-09's change.\n* except.c (duplicate_eh_regions): Don't look for prev_try\nbeyond ERT_ALLOWED_EXCEPTIONS with an empty list.\ngcc/testsuite/ChangeLog:\nPR tree-optimization/33735\n* g++.dg/torture/pr33735.C: New.\n\nFrom-SVN: r129356", "tree": {"sha": "b276d85de8d5be7b2524553d3b57869d69c66a04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b276d85de8d5be7b2524553d3b57869d69c66a04"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1432b19f40085f820a883101a40e878452b15e2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1432b19f40085f820a883101a40e878452b15e2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1432b19f40085f820a883101a40e878452b15e2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1432b19f40085f820a883101a40e878452b15e2a/comments", "author": null, "committer": null, "parents": [{"sha": "aa79283408d03841fae2f24d94b5385c978b5a0b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa79283408d03841fae2f24d94b5385c978b5a0b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa79283408d03841fae2f24d94b5385c978b5a0b"}], "stats": {"total": 42, "additions": 39, "deletions": 3}, "files": [{"sha": "2348ecc98438d0b87e8f2d9ec73e48963b2effc1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1432b19f40085f820a883101a40e878452b15e2a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1432b19f40085f820a883101a40e878452b15e2a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1432b19f40085f820a883101a40e878452b15e2a", "patch": "@@ -1,3 +1,12 @@\n+2007-10-15  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR tree-optimization/33735\n+\tPR tree-optimization/33572\n+\t* tree-inline.c (update_ssa_across_abnormal_edges): Revert\n+\t2007-10-09's change.\n+\t* except.c (duplicate_eh_regions): Don't look for prev_try\n+\tbeyond ERT_ALLOWED_EXCEPTIONS with an empty list.\n+\n 2007-10-15  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR middle-end/33706"}, {"sha": "0fbda613961a02536354bc119e804dca2ee34b79", "filename": "gcc/except.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=1432b19f40085f820a883101a40e878452b15e2a", "patch": "@@ -1005,7 +1005,9 @@ duplicate_eh_regions (struct function *ifun, duplicate_eh_regions_map map,\n     for (prev_try = VEC_index (eh_region, cfun->eh->region_array, outer_region);\n          prev_try && prev_try->type != ERT_TRY;\n \t prev_try = prev_try->outer)\n-      if (prev_try->type == ERT_MUST_NOT_THROW)\n+      if (prev_try->type == ERT_MUST_NOT_THROW\n+\t  || (prev_try->type == ERT_ALLOWED_EXCEPTIONS\n+\t      && !prev_try->u.allowed.type_list))\n \t{\n \t  prev_try = NULL;\n \t  break;"}, {"sha": "12b8cba6cb2fbf4a1ea5b0a065a6718ce6baea22", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1432b19f40085f820a883101a40e878452b15e2a", "patch": "@@ -1,3 +1,8 @@\n+2007-10-15  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR tree-optimization/33735\n+\t* g++.dg/torture/pr33735.C: New.\n+\n 2007-10-15  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR middle-end/33706"}, {"sha": "0a90745b91e510e56a0abd382637b29c77afd63c", "filename": "gcc/testsuite/g++.dg/torture/pr33735.C", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr33735.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr33735.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr33735.C?ref=1432b19f40085f820a883101a40e878452b15e2a", "patch": "@@ -0,0 +1,21 @@\n+// { dg-do compile }\n+#include <string>\n+typedef struct _ts { } PyThreadState;\n+PyThreadState * Py_NewInterpreter(void);\n+void Py_EndInterpreter(PyThreadState *);\n+class ApplicationError {\n+public:\n+    ApplicationError(std::string errormsg) : errormsg(errormsg)  { }\n+    std::string errormsg;\n+};\n+void run()\n+{\n+    PyThreadState *py_state=__null;\n+    try {\n+        if (!(py_state=Py_NewInterpreter()))\n+            throw ApplicationError(\"error\");\n+    }\n+    catch(ApplicationError e) {\n+        Py_EndInterpreter(py_state);\n+    }\n+}"}, {"sha": "55aef3d5c6e30f408dfb2ecd7450ec7e3615bd84", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1432b19f40085f820a883101a40e878452b15e2a/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=1432b19f40085f820a883101a40e878452b15e2a", "patch": "@@ -1064,8 +1064,7 @@ update_ssa_across_abnormal_edges (basic_block bb, basic_block ret_bb,\n \t      }\n \n \t    re = find_edge (ret_bb, e->dest);\n-\t    if (!re)\n-\t      continue;\n+\t    gcc_assert (re);\n \t    gcc_assert ((re->flags & (EDGE_EH | EDGE_ABNORMAL))\n \t\t\t== (e->flags & (EDGE_EH | EDGE_ABNORMAL)));\n "}]}