{"sha": "7289b80c09ea86586ad7663e76400878bf2a8b7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzI4OWI4MGMwOWVhODY1ODZhZDc2NjNlNzY0MDA4NzhiZjJhOGI3ZQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-20T10:07:30Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-20T10:07:30Z"}, "message": "[multiple changes]\n\n2009-04-20  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* gnat_ugn.texi: Add documentation for -fno-ivopts.\n\n2009-04-20  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch10.adb (Analyze_Context): Do not analyze a unit in a\n\twith_clause if it is the main unit.\n\nFrom-SVN: r146390", "tree": {"sha": "3f5e6659bb1a3d04e80fe22da42dc8149d0f0e0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f5e6659bb1a3d04e80fe22da42dc8149d0f0e0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7289b80c09ea86586ad7663e76400878bf2a8b7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7289b80c09ea86586ad7663e76400878bf2a8b7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7289b80c09ea86586ad7663e76400878bf2a8b7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7289b80c09ea86586ad7663e76400878bf2a8b7e/comments", "author": null, "committer": null, "parents": [{"sha": "c09a557e3abfb7250930d64dc9d07cdc1779a281", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c09a557e3abfb7250930d64dc9d07cdc1779a281", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c09a557e3abfb7250930d64dc9d07cdc1779a281"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "d2370239a88a9792668b0aba4e4e3b73e3660ee7", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7289b80c09ea86586ad7663e76400878bf2a8b7e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7289b80c09ea86586ad7663e76400878bf2a8b7e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7289b80c09ea86586ad7663e76400878bf2a8b7e", "patch": "@@ -1,3 +1,12 @@\n+2009-04-20  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat_ugn.texi: Add documentation for -fno-ivopts.\n+\n+2009-04-20  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch10.adb (Analyze_Context): Do not analyze a unit in a\n+\twith_clause if it is the main unit.\n+\n 2009-04-20  Thomas Quinot  <quinot@adacore.com>\n \n \t* sem_type.adb, ali.adb, erroutc.adb: Minor code reorganization"}, {"sha": "e9b5a664791c300f243217054a8d97cb38363464", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7289b80c09ea86586ad7663e76400878bf2a8b7e/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7289b80c09ea86586ad7663e76400878bf2a8b7e/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=7289b80c09ea86586ad7663e76400878bf2a8b7e", "patch": "@@ -3815,6 +3815,15 @@ if @option{-O2} is used.\n Suppresses inlining of subprograms local to the unit and called once\n from within it, which is enabled if @option{-O1} is used.\n \n+@item -fno-ivopts\n+@cindex @option{-fno-ivopts} (@command{gcc})\n+Suppresses high-level loop induction variable optimizations, which are\n+enabled if @option{-O1} is used. These optimizations are generally\n+profitable but, for some specific cases of loops with numerous uses\n+of the iteration variable that follow a common pattern, they may end\n+up destroying the regularity that could be exploited at a lower level\n+and thus producing inferior code.\n+\n @item -fno-strict-aliasing\n @cindex @option{-fno-strict-aliasing} (@command{gcc})\n Causes the compiler to avoid assumptions regarding non-aliasing"}, {"sha": "0a32539774f0150321a39f91cd7d76216d91c7ed", "filename": "gcc/ada/sem_ch10.adb", "status": "modified", "additions": 10, "deletions": 3, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7289b80c09ea86586ad7663e76400878bf2a8b7e/gcc%2Fada%2Fsem_ch10.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7289b80c09ea86586ad7663e76400878bf2a8b7e/gcc%2Fada%2Fsem_ch10.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch10.adb?ref=7289b80c09ea86586ad7663e76400878bf2a8b7e", "patch": "@@ -774,7 +774,7 @@ package body Sem_Ch10 is\n             Version_Update (N, Lib_Unit);\n          end if;\n \n-         --  Comment needed here ???\n+         --  If this is a child unit, generate references to the parents.\n \n          if Nkind (Defining_Unit_Name (Specification (Unit_Node))) =\n                                              N_Defining_Program_Unit_Name\n@@ -1278,9 +1278,16 @@ package body Sem_Ch10 is\n          then\n             --  Skip analyzing with clause if no unit, nothing to do (this\n             --  happens for a with that references a non-existent unit)\n+            --  Skip as well if this is a with_clause for the main unit, which\n+            --  happens if a subunit has a useless with_clause on its parent.\n \n             if Present (Library_Unit (Item)) then\n-               Analyze (Item);\n+               if Library_Unit (Item) /= Cunit (Current_Sem_Unit) then\n+                  Analyze (Item);\n+\n+               else\n+                  Set_Entity (Name (Item), Cunit_Entity (Current_Sem_Unit));\n+               end if;\n             end if;\n \n             if not Implicit_With (Item) then\n@@ -3111,7 +3118,7 @@ package body Sem_Ch10 is\n \n       if Is_Child_Spec (Lib_Unit) then\n \n-         --  The unit also has implicit withs on its own parents\n+         --  The unit also has implicit with_clauses on its own parents\n \n          if No (Context_Items (N)) then\n             Set_Context_Items (N, New_List);"}]}