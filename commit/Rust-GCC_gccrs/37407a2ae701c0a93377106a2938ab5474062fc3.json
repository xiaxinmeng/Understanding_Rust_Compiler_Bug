{"sha": "37407a2ae701c0a93377106a2938ab5474062fc3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzc0MDdhMmFlNzAxYzBhOTMzNzcxMDZhMjkzOGFiNTQ3NDA2MmZjMw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-05-11T16:14:26Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-05-11T16:21:08Z"}, "message": "libstdc++: Fix tests that fail in C++98 mode\n\nThe header synopsis test fails to define NOTHROW for C++98.\n\nThe shared_ptr test should be skipped for C++98.\n\nThe debug mode one should work for C++98 too, it just needs to avoid\nC++11 syntax that isn't valid in C++98.\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/20_util/headers/memory/synopsis.cc: Define C++98\n\talternative for macro.\n\t* testsuite/20_util/shared_ptr/creation/99006.cc: Add effective\n\ttarget keyword.\n\t* testsuite/25_algorithms/copy/debug/99402.cc: Avoid C++11\n\tsyntax.", "tree": {"sha": "64af84b86d77fd65018e79e30aec5cab443da536", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64af84b86d77fd65018e79e30aec5cab443da536"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37407a2ae701c0a93377106a2938ab5474062fc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37407a2ae701c0a93377106a2938ab5474062fc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37407a2ae701c0a93377106a2938ab5474062fc3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37407a2ae701c0a93377106a2938ab5474062fc3/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e3a1ea3d89d62972e1f036b2ede37a80b880bdf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e3a1ea3d89d62972e1f036b2ede37a80b880bdf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e3a1ea3d89d62972e1f036b2ede37a80b880bdf"}], "stats": {"total": 9, "additions": 6, "deletions": 3}, "files": [{"sha": "9a4264a075955450986d9a4d0fefe1c59adb9cff", "filename": "libstdc++-v3/testsuite/20_util/headers/memory/synopsis.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37407a2ae701c0a93377106a2938ab5474062fc3/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fheaders%2Fmemory%2Fsynopsis.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37407a2ae701c0a93377106a2938ab5474062fc3/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fheaders%2Fmemory%2Fsynopsis.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fheaders%2Fmemory%2Fsynopsis.cc?ref=37407a2ae701c0a93377106a2938ab5474062fc3", "patch": "@@ -22,6 +22,8 @@\n \n #if __cplusplus >= 201103L\n # define NOTHROW noexcept\n+#else\n+# define NOTHROW\n #endif\n \n namespace std {"}, {"sha": "e070fb9d42057566be9071868805313da00cda18", "filename": "libstdc++-v3/testsuite/20_util/shared_ptr/creation/99006.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37407a2ae701c0a93377106a2938ab5474062fc3/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcreation%2F99006.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37407a2ae701c0a93377106a2938ab5474062fc3/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcreation%2F99006.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fshared_ptr%2Fcreation%2F99006.cc?ref=37407a2ae701c0a93377106a2938ab5474062fc3", "patch": "@@ -1,5 +1,5 @@\n-// FIXME: This should use { target { ! c++20 } }\n-// { dg-do compile }\n+// FIXME: This should use { target { c++11 && { ! c++20 } } }\n+// { dg-do compile { target { c++11 } } }\n \n #include <memory>\n "}, {"sha": "9a9c97af6052d8dab4ea6b9680a8c136e90f3494", "filename": "libstdc++-v3/testsuite/25_algorithms/copy/debug/99402.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37407a2ae701c0a93377106a2938ab5474062fc3/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fcopy%2Fdebug%2F99402.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37407a2ae701c0a93377106a2938ab5474062fc3/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fcopy%2Fdebug%2F99402.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F25_algorithms%2Fcopy%2Fdebug%2F99402.cc?ref=37407a2ae701c0a93377106a2938ab5474062fc3", "patch": "@@ -28,8 +28,9 @@ using namespace std;\n \n int main()\n {\n+    int two[] = { 0, 1 };\n     // any container with non-random access iterators:\n-    const set<int> source = { 0, 1 };\n+    const set<int> source(two, two + 2);\n     vector<int> dest(1);\n     copy(source.begin(), ++source.begin(), dest.begin());\n }"}]}