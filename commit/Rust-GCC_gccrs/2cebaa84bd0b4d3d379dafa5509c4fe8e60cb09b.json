{"sha": "2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmNlYmFhODRiZDBiNGQzZDM3OWRhZmE1NTA5YzRmZThlNjBjYjA5Yg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-08-17T11:32:34Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1992-08-17T11:32:34Z"}, "message": "(LINK_SPEC): Add %s for default.ld.\n\n(LINK_LIBGCC_SPECIAL): No longer needed.\n(ASM_FILE_STARY): Add shared data section.\n(SHARED_SECTION_ASM_OP): New macro.\n(OVERRIDE_OPTIONS): If -fshared-data, add -fno-common.\n\nFrom-SVN: r1867", "tree": {"sha": "2a83084704dd9bb2c4e6745a7457018d473236b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a83084704dd9bb2c4e6745a7457018d473236b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b/comments", "author": null, "committer": null, "parents": [{"sha": "b8c59d6fe42626980c5020f7bc26ae53d0f1fe15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8c59d6fe42626980c5020f7bc26ae53d0f1fe15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8c59d6fe42626980c5020f7bc26ae53d0f1fe15"}], "stats": {"total": 28, "additions": 24, "deletions": 4}, "files": [{"sha": "7fd911b363ba417743d7d1578d01c245fb4df486", "filename": "gcc/config/a29k/unix.h", "status": "modified", "additions": 24, "deletions": 4, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b/gcc%2Fconfig%2Fa29k%2Funix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b/gcc%2Fconfig%2Fa29k%2Funix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fa29k%2Funix.h?ref=2cebaa84bd0b4d3d379dafa5509c4fe8e60cb09b", "patch": "@@ -37,10 +37,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #define CPP_SPEC \"%{!m29000:-Dam29050 -D__am29050__}\"\n \n #undef LINK_SPEC\n-#define LINK_SPEC \"-c /usr/lib/default.ld\"\n-\n-/* We can't say \"-lgcc\" due to a bug in gld for now.  */\n-#define LINK_LIBGCC_SPECIAL\n+#define LINK_SPEC \"-c default.ld%s\"\n \n /* For some systems, it is best if double-word objects are aligned on a \n    doubleword boundary.  We want to maintain compatibility with MetaWare in\n@@ -49,6 +46,29 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n #undef BIGGEST_ALIGNMENT\n #define BIGGEST_ALIGNMENT 64\n \n+/* Add shared data as a kludge for now.  */\n+\n+#undef ASM_FILE_START\n+#define ASM_FILE_START(FILE)\t\t\t\t\t\\\n+{ char *p, *after_dir = main_input_filename;\t\t\t\\\n+  if (TARGET_29050)\t\t\t\t\t\t\\\n+    fprintf (FILE, \"\\t.cputype 29050\\n\");\t\t\t\\\n+  for (p = main_input_filename; *p; p++)\t\t\t\\\n+    if (*p == '/')\t\t\t\t\t\t\\\n+      after_dir = p + 1;\t\t\t\t\t\\\n+  fprintf (FILE, \"\\t.file \\\"%s\\\"\\n\", after_dir);\t\t\\\n+  if (flag_shared_data)\t\t\t\t\t\t\\\n+    fprintf (FILE, \"\\t.sect .shdata,data\\n\");\t\t\t\\\n+  fprintf (FILE, \"\\t.sect .lit,lit\\n\");  }\n+\n+/* Output before shared  data.  */\n+\n+#define SHARED_SECTION_ASM_OP \"\\t.use .shdata\"\n+\n+/* If we want shared data, we have to turn off commons.  */\n+\n+#define OVERRIDE_OPTIONS if (flag_shared_data) flag_no_common = 1;\n+\n #if 0 /* This would be needed except that the 29k doesn't have strict\n \t alignment requirements.  */\n "}]}