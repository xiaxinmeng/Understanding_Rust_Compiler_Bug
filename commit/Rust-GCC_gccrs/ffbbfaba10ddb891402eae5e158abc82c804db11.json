{"sha": "ffbbfaba10ddb891402eae5e158abc82c804db11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZiYmZhYmExMGRkYjg5MTQwMmVhZTVlMTU4YWJjODJjODA0ZGIxMQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2012-11-13T16:59:37Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2012-11-13T16:59:37Z"}, "message": "re PR target/41993 ([sh] ICE in create_pre_exit, at mode-switching.c:399)\n\n\tPR target/41993\n\t* mode-switching.c (create_pre_exit): Set return_copy to last_insn\n\twhen copy_start is a function return regno instead of pseudo.\n\tSkip debug instructions in instruction scan loop.\n\nFrom-SVN: r193480", "tree": {"sha": "79b8e8a0b30c1b4dd3d038d8bc669a0031ea0dd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/79b8e8a0b30c1b4dd3d038d8bc669a0031ea0dd6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffbbfaba10ddb891402eae5e158abc82c804db11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffbbfaba10ddb891402eae5e158abc82c804db11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffbbfaba10ddb891402eae5e158abc82c804db11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffbbfaba10ddb891402eae5e158abc82c804db11/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "be22520dc2bc13d2cfa59266f55776889f5a2775", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be22520dc2bc13d2cfa59266f55776889f5a2775", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be22520dc2bc13d2cfa59266f55776889f5a2775"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "864fc8f83d70037a947af6346d6aa835585e69e0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffbbfaba10ddb891402eae5e158abc82c804db11/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffbbfaba10ddb891402eae5e158abc82c804db11/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ffbbfaba10ddb891402eae5e158abc82c804db11", "patch": "@@ -1,3 +1,10 @@\n+2012-11-13  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/41993\n+\t* mode-switching.c (create_pre_exit): Set return_copy to last_insn\n+\twhen copy_start is a function return regno instead of pseudo.\n+\tSkip debug instructions in instruction scan loop.\n+\n 2012-11-13  Andrew Stubbs  <ams@codesourcery.com>\n \t    Ulrich Weigand  <ulrich.weigand@linaro.org>\n "}, {"sha": "d607ad3122d848facb798ca2f6ffc1646b4ee930", "filename": "gcc/mode-switching.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffbbfaba10ddb891402eae5e158abc82c804db11/gcc%2Fmode-switching.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffbbfaba10ddb891402eae5e158abc82c804db11/gcc%2Fmode-switching.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmode-switching.c?ref=ffbbfaba10ddb891402eae5e158abc82c804db11", "patch": "@@ -242,7 +242,8 @@ create_pre_exit (int n_entities, int *entity_map, const int *num_modes)\n \t\tint copy_start, copy_num;\n \t\tint j;\n \n-\t\tif (INSN_P (return_copy))\n+\t\tif (INSN_P (return_copy)\n+\t\t    && !DEBUG_INSN_P (return_copy))\n \t\t  {\n \t\t    /* When using SJLJ exceptions, the call to the\n \t\t       unregister function is inserted between the\n@@ -330,7 +331,7 @@ create_pre_exit (int n_entities, int *entity_map, const int *num_modes)\n \t\t\t  short_block = 1;\n \t\t\tbreak;\n \t\t      }\n-\t\t    if (copy_start >= FIRST_PSEUDO_REGISTER)\n+\t\t    if (!targetm.calls.function_value_regno_p (copy_start))\n \t\t      {\n \t\t\tlast_insn = return_copy;\n \t\t\tcontinue;"}]}