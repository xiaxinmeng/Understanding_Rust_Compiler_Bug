{"sha": "9b396d7ccef4c96f577b6b97ed3604527cfb9181", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWIzOTZkN2NjZWY0Yzk2ZjU3N2I2Yjk3ZWQzNjA0NTI3Y2ZiOTE4MQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2005-02-17T22:32:29Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2005-02-17T22:32:29Z"}, "message": "re PR tree-optimization/19917 (Weak const function mishandled inside loop)\n\n\n\tPR tree-optimization/19917\n\t* tree-eh.c (tree_could_trap_p): Consider calls to weak functions\n\tto be potentially trapping.\n\nFrom-SVN: r95200", "tree": {"sha": "e9ef6bd5ecb20983f0c0ae646bc2bfd807cae4e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e9ef6bd5ecb20983f0c0ae646bc2bfd807cae4e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b396d7ccef4c96f577b6b97ed3604527cfb9181", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b396d7ccef4c96f577b6b97ed3604527cfb9181", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b396d7ccef4c96f577b6b97ed3604527cfb9181", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b396d7ccef4c96f577b6b97ed3604527cfb9181/comments", "author": null, "committer": null, "parents": [{"sha": "2e681715d677449e633b64e4fb3f8f1ac0184fd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e681715d677449e633b64e4fb3f8f1ac0184fd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e681715d677449e633b64e4fb3f8f1ac0184fd4"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "0fb1e729c8910ba0e77deed26ec468cfabeffcee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b396d7ccef4c96f577b6b97ed3604527cfb9181/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b396d7ccef4c96f577b6b97ed3604527cfb9181/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9b396d7ccef4c96f577b6b97ed3604527cfb9181", "patch": "@@ -1,3 +1,9 @@\n+2005-02-17  Roger Sayle  <roger@eyesopen.com>\n+\n+\tPR tree-optimization/19917\n+\t* tree-eh.c (tree_could_trap_p): Consider calls to weak functions\n+\tto be potentially trapping.\n+\n 2005-02-17  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* libgcc2.c, tree-vect-analyze.c: Fix comment typos."}, {"sha": "34c5cab921cc53bc700262d139a6290ac5f5903a", "filename": "gcc/tree-eh.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b396d7ccef4c96f577b6b97ed3604527cfb9181/gcc%2Ftree-eh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b396d7ccef4c96f577b6b97ed3604527cfb9181/gcc%2Ftree-eh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-eh.c?ref=9b396d7ccef4c96f577b6b97ed3604527cfb9181", "patch": "@@ -1840,6 +1840,13 @@ tree_could_trap_p (tree expr)\n \treturn true;\n       return false;\n \n+    case CALL_EXPR:\n+      t = get_callee_fndecl (expr);\n+      /* Assume that calls to weak functions may trap.  */\n+      if (!t || !DECL_P (t) || DECL_WEAK (t))\n+\treturn true;\n+      return false;\n+\n     default:\n       /* Any floating arithmetic may trap.  */\n       if (fp_operation && flag_trapping_math)"}]}