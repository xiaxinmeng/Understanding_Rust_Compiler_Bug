{"sha": "a3bc83cc3028fb98df61d1fde7e62f05295cf894", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNiYzgzY2MzMDI4ZmI5OGRmNjFkMWZkZTdlNjJmMDUyOTVjZjg5NA==", "commit": {"author": {"name": "Andrew Cagney", "email": "cagney@b1.cygnus.com", "date": "1998-11-09T16:50:18Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-11-09T16:50:18Z"}, "message": "Misc mips16 bug fixes found by gcc/gdb testsuites.\n\n\t* mips.c (function_prologue): When TARGET_MIPS16, adjust the register\n\toffset in the .mask pseudo to compensate for frame pointer adjustments.\n\t(mips16_fp_args, build_mips16_call_stub): For little endian, do not\n\tword swap arguments moved to/from FP registers.\n\t* mips16.S (DFREVCMP): Reverse arguments to OPCODE.\n\nFrom-SVN: r23586", "tree": {"sha": "eeffac9b9ca0e06059c2bf394c0927aeb11a9049", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eeffac9b9ca0e06059c2bf394c0927aeb11a9049"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3bc83cc3028fb98df61d1fde7e62f05295cf894", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3bc83cc3028fb98df61d1fde7e62f05295cf894", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3bc83cc3028fb98df61d1fde7e62f05295cf894", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3bc83cc3028fb98df61d1fde7e62f05295cf894/comments", "author": null, "committer": null, "parents": [{"sha": "b8b2d50de916d20189497865c6d4c0d3143d1ff0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8b2d50de916d20189497865c6d4c0d3143d1ff0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8b2d50de916d20189497865c6d4c0d3143d1ff0"}], "stats": {"total": 50, "additions": 39, "deletions": 11}, "files": [{"sha": "b3072f5994f92f530d5dde03d3410b496a5bdb8c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bc83cc3028fb98df61d1fde7e62f05295cf894/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bc83cc3028fb98df61d1fde7e62f05295cf894/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3bc83cc3028fb98df61d1fde7e62f05295cf894", "patch": "@@ -1,3 +1,11 @@\n+Mon Nov  9 16:37:52 1998  Andrew Cagney  <cagney@b1.cygnus.com>\n+\n+\t* mips.c (function_prologue): When TARGET_MIPS16, adjust the register\n+\toffset in the .mask pseudo to compensate for frame pointer adjustments.\n+\t(mips16_fp_args, build_mips16_call_stub): For little endian, do not\n+\tword swap arguments moved to/from FP registers.\n+\t* mips16.S (DFREVCMP): Reverse arguments to OPCODE.\n+\t\n Mon Nov 9 09:47:06 PST 1998 Jeff Law  (law@cygnus.com)\n \n \t* version.c: Bump for snapshot."}, {"sha": "93dd1fb0af433996c5b983c1fb6bf81e49596766", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 30, "deletions": 10, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bc83cc3028fb98df61d1fde7e62f05295cf894/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bc83cc3028fb98df61d1fde7e62f05295cf894/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=a3bc83cc3028fb98df61d1fde7e62f05295cf894", "patch": "@@ -6085,7 +6085,10 @@ function_prologue (file, size)\n \n       fprintf (file, \"\\t.mask\\t0x%08lx,%ld\\n\\t.fmask\\t0x%08lx,%ld\\n\",\n \t       current_frame_info.mask,\n-\t       current_frame_info.gp_save_offset,\n+\t       ((frame_pointer_needed && TARGET_MIPS16)\n+\t\t? (current_frame_info.gp_save_offset\n+\t\t   - current_function_outgoing_args_size)\n+\t\t: current_frame_info.gp_save_offset),\n \t       current_frame_info.fmask,\n \t       current_frame_info.fp_save_offset);\n     }\n@@ -7434,9 +7437,14 @@ mips16_fp_args (file, fp_code, from_fp_p)\n \t    {\n \t      if ((fparg & 1) != 0)\n \t\t++fparg;\n-\t      fprintf (file, \"\\t%s\\t%s,%s\\n\\t%s\\t%s,%s\\n\", s,\n-\t\t       reg_names[gparg], reg_names[fparg + 1], s,\n-\t\t       reg_names[gparg + 1], reg_names[fparg]);\n+\t      if (TARGET_BIG_ENDIAN)\n+\t\tfprintf (file, \"\\t%s\\t%s,%s\\n\\t%s\\t%s,%s\\n\", s,\n+\t\t\t reg_names[gparg], reg_names[fparg + 1], s,\n+\t\t\t reg_names[gparg + 1], reg_names[fparg]);\n+\t      else\n+\t\tfprintf (file, \"\\t%s\\t%s,%s\\n\\t%s\\t%s,%s\\n\", s,\n+\t\t\t reg_names[gparg], reg_names[fparg], s,\n+\t\t\t reg_names[gparg + 1], reg_names[fparg + 1]);\n \t      ++gparg;\n \t      ++fparg;\n \t    }\n@@ -7777,12 +7785,24 @@ build_mips16_call_stub (retval, fnmem, arg_size, fp_code)\n \t\t     reg_names[GP_REG_FIRST + 2], reg_names[FP_REG_FIRST + 0]);\n \t  else\n \t    {\n-\t      fprintf (asm_out_file, \"\\tmfc1\\t%s,%s\\n\",\n-\t\t       reg_names[GP_REG_FIRST + 2],\n-\t\t       reg_names[FP_REG_FIRST + 1]);\n-\t      fprintf (asm_out_file, \"\\tmfc1\\t%s,%s\\n\",\n-\t\t       reg_names[GP_REG_FIRST + 3],\n-\t\t       reg_names[FP_REG_FIRST + 0]);\n+\t      if (TARGET_BIG_ENDIAN)\n+\t\t{\n+\t\t  fprintf (asm_out_file, \"\\tmfc1\\t%s,%s\\n\",\n+\t\t\t   reg_names[GP_REG_FIRST + 2],\n+\t\t\t   reg_names[FP_REG_FIRST + 1]);\n+\t\t  fprintf (asm_out_file, \"\\tmfc1\\t%s,%s\\n\",\n+\t\t\t   reg_names[GP_REG_FIRST + 3],\n+\t\t\t   reg_names[FP_REG_FIRST + 0]);\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  fprintf (asm_out_file, \"\\tmfc1\\t%s,%s\\n\",\n+\t\t\t   reg_names[GP_REG_FIRST + 2],\n+\t\t\t   reg_names[FP_REG_FIRST + 0]);\n+\t\t  fprintf (asm_out_file, \"\\tmfc1\\t%s,%s\\n\",\n+\t\t\t   reg_names[GP_REG_FIRST + 3],\n+\t\t\t   reg_names[FP_REG_FIRST + 1]);\n+\t\t}\n \t    }\n \t  fprintf (asm_out_file, \"\\tj\\t%s\\n\", reg_names[GP_REG_FIRST + 18]);\n \t  /* As above, we can't fill the delay slot.  */"}, {"sha": "f21f10f2118bf720a276b50f64257e34297860a6", "filename": "gcc/config/mips/mips16.S", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3bc83cc3028fb98df61d1fde7e62f05295cf894/gcc%2Fconfig%2Fmips%2Fmips16.S", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3bc83cc3028fb98df61d1fde7e62f05295cf894/gcc%2Fconfig%2Fmips%2Fmips16.S", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips16.S?ref=a3bc83cc3028fb98df61d1fde7e62f05295cf894", "patch": "@@ -330,7 +330,7 @@ STARTFN (NAME);\t\t\t\t\t\\\n STARTFN (NAME);\t\t\t\t\t\\\n \tLDDBL1;\t\t\t\t\t\\\n \tLDDBL2;\t\t\t\t\t\\\n-\tOPCODE\t$f12,$f14;\t\t\t\\\n+\tOPCODE\t$f14,$f12;\t\t\t\\\n \tli\t$2,TRUE;\t\t\t\\\n \tbc1t\t1f;\t\t\t\t\\\n \tli\t$2,FALSE;\t\t\t\\"}]}