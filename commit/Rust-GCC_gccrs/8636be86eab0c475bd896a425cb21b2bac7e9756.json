{"sha": "8636be86eab0c475bd896a425cb21b2bac7e9756", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODYzNmJlODZlYWIwYzQ3NWJkODk2YTQyNWNiMjFiMmJhYzdlOTc1Ng==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-01-29T01:56:28Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-01-29T01:56:28Z"}, "message": "m68k.c (TARGET_PROMOTE_PROTOTYPES): New.\n\n\t* config/m68k/m68k.c (TARGET_PROMOTE_PROTOTYPES): New.\n\t(TARGET_STRUCT_VALUE_RTX): Likewise.\n\t(m68k_struct_value_rtx): Likewise.\n\t* config/m68k/m68k.h (STRUCT_VALUE_REGNUM): Rename to\n\tSTRUCT_VALUE_REGNUM.\n\t(PROMOTE_PROTOTYPES): Remove.\n\t* config/m68k/m68kelf.h (STRUCT_VALUE_REGNUM): Rename to\n\tSTRUCT_VALUE_REGNUM.\n\t* config/m68k/m68kv4.h (STRUCT_VALUE_REGNUM): Likewise.\n\t* config/m68k/netbsd-elf.h (STRUCT_VALUE_REGNUM): Likewise.\n\nFrom-SVN: r76833", "tree": {"sha": "a4ef36d1307b6363a5a016cbf9fbe02bcd8c75d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4ef36d1307b6363a5a016cbf9fbe02bcd8c75d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8636be86eab0c475bd896a425cb21b2bac7e9756", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8636be86eab0c475bd896a425cb21b2bac7e9756", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8636be86eab0c475bd896a425cb21b2bac7e9756", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8636be86eab0c475bd896a425cb21b2bac7e9756/comments", "author": null, "committer": null, "parents": [{"sha": "f2f61ee79ce0a21f469a7da55575f134effc1548", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2f61ee79ce0a21f469a7da55575f134effc1548", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2f61ee79ce0a21f469a7da55575f134effc1548"}], "stats": {"total": 58, "additions": 43, "deletions": 15}, "files": [{"sha": "e49812ab305c6a415fe29ff51132d8461203aa66", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8636be86eab0c475bd896a425cb21b2bac7e9756", "patch": "@@ -1,3 +1,16 @@\n+2004-01-28  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/m68k/m68k.c (TARGET_PROMOTE_PROTOTYPES): New.\n+\t(TARGET_STRUCT_VALUE_RTX): Likewise.\n+\t(m68k_struct_value_rtx): Likewise.\n+\t* config/m68k/m68k.h (STRUCT_VALUE_REGNUM): Rename to\n+\tSTRUCT_VALUE_REGNUM.\n+\t(PROMOTE_PROTOTYPES): Remove.\n+\t* config/m68k/m68kelf.h (STRUCT_VALUE_REGNUM): Rename to\n+\tSTRUCT_VALUE_REGNUM.\n+\t* config/m68k/m68kv4.h (STRUCT_VALUE_REGNUM): Likewise.\n+\t* config/m68k/netbsd-elf.h (STRUCT_VALUE_REGNUM): Likewise.\n+\n 2004-01-28  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/stormy16/stormy16.c"}, {"sha": "53b0926b6cbeb4c308cdb620916600fa13a51d73", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=8636be86eab0c475bd896a425cb21b2bac7e9756", "patch": "@@ -1,5 +1,6 @@\n /* Subroutines for insn-output.c for Motorola 68000 family.\n-   Copyright (C) 1987, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001, 2003, 2004\n+   Copyright (C) 1987, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n+   2001, 2003, 2004\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -107,6 +108,7 @@ static void m68k_hp320_file_start (void);\n #endif\n static void m68k_output_mi_thunk (FILE *, tree, HOST_WIDE_INT,\n \t\t\t\t\t  HOST_WIDE_INT, tree);\n+static rtx m68k_struct_value_rtx (tree, int);\n static bool m68k_interrupt_function_p (tree func);\n static tree m68k_handle_fndecl_attribute (tree *node, tree name,\n \t\t\t\t\t  tree args, int flags,\n@@ -192,6 +194,12 @@ int m68k_last_compare_had_fp_operands;\n #undef TARGET_ATTRIBUTE_TABLE\n #define TARGET_ATTRIBUTE_TABLE m68k_attribute_table\n \n+#undef TARGET_PROMOTE_PROTOTYPES\n+#define TARGET_PROMOTE_PROTOTYPES hook_bool_tree_true\n+\n+#undef TARGET_STRUCT_VALUE_RTX\n+#define TARGET_STRUCT_VALUE_RTX m68k_struct_value_rtx\n+\n static const struct attribute_spec m68k_attribute_table[] =\n {\n   /* { name, min_len, max_len, decl_req, type_req, fn_type_req, handler } */\n@@ -3496,3 +3504,12 @@ m68k_output_mi_thunk (FILE *file, tree thunk ATTRIBUTE_UNUSED,\n \n   output_asm_insn (fmt, xops);\n }\n+\n+/* Worker function for TARGET_STRUCT_VALUE_RTX.  */\n+\n+static rtx\n+m68k_struct_value_rtx (tree fntype ATTRIBUTE_UNUSED,\n+\t\t       int incoming ATTRIBUTE_UNUSED)\n+{\n+  return gen_rtx_REG (Pmode, M68K_STRUCT_VALUE_REGNUM);\n+}"}, {"sha": "5ae893ede9a37ed5fd1d0874bf63326dc99935e8", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=8636be86eab0c475bd896a425cb21b2bac7e9756", "patch": "@@ -1,7 +1,7 @@\n /* Definitions of target machine for GNU compiler.\n    Sun 68000/68020 version.\n    Copyright (C) 1987, 1988, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-   2000, 2001, 2002, 2003 Free Software Foundation, Inc.\n+   2000, 2001, 2002, 2003, 2004 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -587,7 +587,7 @@ extern int target_flags;\n \n /* Register in which address to store a structure value\n    is passed to a function.  */\n-#define STRUCT_VALUE_REGNUM 9\n+#define M68K_STRUCT_VALUE_REGNUM 9\n \f\n /* Define the classes of registers for register constraints in the\n    machine description.  Also define ranges of constants.\n@@ -1369,9 +1369,6 @@ __transfer_from_trampoline ()\t\t\t\t\t\\\n \n #define STORE_FLAG_VALUE (-1)\n \n-/* When a prototype says `char' or `short', really pass an `int'.  */\n-#define PROMOTE_PROTOTYPES 1\n-\n /* Specify the machine mode that pointers have.\n    After generation of rtl, the compiler makes no further distinction\n    between pointers and any other objects of this machine mode.  */"}, {"sha": "ac59af4b0bc0d9ba5a7b49eaf4fc38987a99ef7c", "filename": "gcc/config/m68k/m68kelf.h", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68kelf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68kelf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68kelf.h?ref=8636be86eab0c475bd896a425cb21b2bac7e9756", "patch": "@@ -1,7 +1,8 @@\n /* m68kelf support, derived from m68kv4.h */\n \n /* Target definitions for GNU compiler for mc680x0 running System V.4\n-   Copyright (C) 1991, 1993, 2000, 2002, 2003 Free Software Foundation, Inc.\n+   Copyright (C) 1991, 1993, 2000, 2002, 2003, 2004\n+   Free Software Foundation, Inc.\n \n    Written by Ron Guilmette (rfg@netcom.com) and Fred Fish (fnf@cygnus.com).\n \n@@ -137,8 +138,8 @@ do {\t\t\t\t\t\t\t\t\\\n /* Register in which address to store a structure value is passed to a\n    function.  The default in m68k.h is a1.  For m68k/SVR4 it is a0.  */\n \n-#undef STRUCT_VALUE_REGNUM\n-#define STRUCT_VALUE_REGNUM 8\n+#undef M68K_STRUCT_VALUE_REGNUM\n+#define M68K_STRUCT_VALUE_REGNUM 8\n \n #define ASM_COMMENT_START \"|\"\n "}, {"sha": "f7886b50bcc630cc430dfff6506b53ca6cf5dd81", "filename": "gcc/config/m68k/m68kv4.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68kv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fm68kv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68kv4.h?ref=8636be86eab0c475bd896a425cb21b2bac7e9756", "patch": "@@ -1,5 +1,5 @@\n /* Target definitions for GNU compiler for mc680x0 running System V.4\n-   Copyright (C) 1991, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2003\n+   Copyright (C) 1991, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2003, 2004\n    Free Software Foundation, Inc.\n    Contributed by Ron Guilmette (rfg@monkeys.com) and\n    Fred Fish (fnf@cygnus.com).\n@@ -90,8 +90,8 @@ Boston, MA 02111-1307, USA.  */\n /* Register in which address to store a structure value is passed to a\n    function.  The default in m68k.h is a1.  For m68k/SVR4 it is a0.  */\n \n-#undef STRUCT_VALUE_REGNUM\n-#define STRUCT_VALUE_REGNUM 8\n+#undef M68K_STRUCT_VALUE_REGNUM\n+#define M68K_STRUCT_VALUE_REGNUM 8\n \n /* Register in which static-chain is passed to a function.  The\n    default in m68k.h is a0, but that is already the struct value"}, {"sha": "31a805242ee6a098d09615130eaa422c1cb8d8ee", "filename": "gcc/config/m68k/netbsd-elf.h", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fnetbsd-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8636be86eab0c475bd896a425cb21b2bac7e9756/gcc%2Fconfig%2Fm68k%2Fnetbsd-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fnetbsd-elf.h?ref=8636be86eab0c475bd896a425cb21b2bac7e9756", "patch": "@@ -1,7 +1,7 @@\n /* Definitions of target machine for GNU compiler,\n    for m68k (including m68010) NetBSD platforms using the\n    ELF object format.\n-   Copyright (C) 2002, 2003 Free Software Foundation, Inc.\n+   Copyright (C) 2002, 2003, 2004 Free Software Foundation, Inc.\n    Contributed by Wasabi Systems. Inc.\n \n    This file is derived from <m68k/m68kv4.h>, <m68k/m68kelf.h>,\n@@ -273,8 +273,8 @@ while (0)\n /* Register in which address to store a structure value is passed to a\n    function.  The default in m68k.h is a1.  For m68k/SVR4 it is a0. */\n \n-#undef STRUCT_VALUE_REGNUM\n-#define STRUCT_VALUE_REGNUM 8\n+#undef M68K_STRUCT_VALUE_REGNUM\n+#define M68K_STRUCT_VALUE_REGNUM 8\n \n \n /* Register in which static-chain is passed to a function.  The"}]}