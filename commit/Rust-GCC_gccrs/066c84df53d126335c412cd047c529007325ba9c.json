{"sha": "066c84df53d126335c412cd047c529007325ba9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDY2Yzg0ZGY1M2QxMjYzMzVjNDEyY2QwNDdjNTI5MDA3MzI1YmE5Yw==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2001-03-11T01:46:24Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2001-03-11T01:46:24Z"}, "message": "tree.c (build_common_tree_nodes_2): Don't copy va_list_type_node if it's a record type.\n\n* tree.c (build_common_tree_nodes_2): Don't copy va_list_type_node\nif it's a record type.\n\nFrom-SVN: r40376", "tree": {"sha": "31c45f5289a72e8e73d2d482615481eacec1c16b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31c45f5289a72e8e73d2d482615481eacec1c16b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/066c84df53d126335c412cd047c529007325ba9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066c84df53d126335c412cd047c529007325ba9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/066c84df53d126335c412cd047c529007325ba9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/066c84df53d126335c412cd047c529007325ba9c/comments", "author": null, "committer": null, "parents": [{"sha": "d4829a16b14c2f88a1a9a182845298d8b4fac775", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4829a16b14c2f88a1a9a182845298d8b4fac775", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4829a16b14c2f88a1a9a182845298d8b4fac775"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "7fd1e0f7c4df37ddd2e4d17abdef320d6b9dcbc6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066c84df53d126335c412cd047c529007325ba9c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066c84df53d126335c412cd047c529007325ba9c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=066c84df53d126335c412cd047c529007325ba9c", "patch": "@@ -1,3 +1,8 @@\n+Sat Mar 10 22:42:05 2001  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* tree.c (build_common_tree_nodes_2): Don't copy va_list_type_node\n+\tif it's a record type.\n+\n Sat Mar 10 17:52:54 2001  Christopher Faylor <cgf@cygnus.com>\n \n \t* config/i386/cygwin.h: Make ../w32api a system directory.  Reorganize"}, {"sha": "ae7f005becda2fc0207173b7fb90058b92c732a0", "filename": "gcc/tree.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/066c84df53d126335c412cd047c529007325ba9c/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/066c84df53d126335c412cd047c529007325ba9c/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=066c84df53d126335c412cd047c529007325ba9c", "patch": "@@ -4828,7 +4828,16 @@ build_common_tree_nodes_2 (short_double)\n   {\n     tree t;\n     BUILD_VA_LIST_TYPE (t);\n-    va_list_type_node = build_type_copy (t);\n+\n+    /* Many back-ends define record types without seting TYPE_NAME.\n+       If we copied the record type here, we'd keep the original\n+       record type without a name.  This breaks name mangling.  So,\n+       don't copy record types and let c_common_nodes_and_builtins()\n+       declare the type to be __builtin_va_list.  */\n+    if (TREE_CODE (t) != RECORD_TYPE)\n+      t = build_type_copy (t);\n+\n+    va_list_type_node = t;\n   }\n \n   V4SF_type_node = make_node (VECTOR_TYPE);"}]}