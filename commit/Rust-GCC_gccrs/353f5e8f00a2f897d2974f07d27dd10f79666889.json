{"sha": "353f5e8f00a2f897d2974f07d27dd10f79666889", "node_id": "C_kwDOANBUbNoAKDM1M2Y1ZThmMDBhMmY4OTdkMjk3NGYwN2QyN2RkMTBmNzk2NjY4ODk", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2023-04-07T19:56:15Z"}, "committer": {"name": "Thomas Schwinge", "email": "thomas_schwinge@mentor.com", "date": "2023-04-07T19:56:15Z"}, "message": "Merge commit 'aee5ee35602e0098c2ae16fa2fc9c8845caf92ed' into HEAD\n\nAddresses: #1713\nFixes: #1973", "tree": {"sha": "1c82332ff22e5a8c17569e2282bf59a0fa9ec479", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1c82332ff22e5a8c17569e2282bf59a0fa9ec479"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/353f5e8f00a2f897d2974f07d27dd10f79666889", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/353f5e8f00a2f897d2974f07d27dd10f79666889", "html_url": "https://github.com/Rust-GCC/gccrs/commit/353f5e8f00a2f897d2974f07d27dd10f79666889", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/353f5e8f00a2f897d2974f07d27dd10f79666889/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6ee85b3255d638fd77ee3fe17a4e146c81545efb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ee85b3255d638fd77ee3fe17a4e146c81545efb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ee85b3255d638fd77ee3fe17a4e146c81545efb"}, {"sha": "aee5ee35602e0098c2ae16fa2fc9c8845caf92ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aee5ee35602e0098c2ae16fa2fc9c8845caf92ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aee5ee35602e0098c2ae16fa2fc9c8845caf92ed"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "49d072dadeb45c0a11c8a107c321cbab08ec812e", "filename": "gcc/rust/rust-lang.cc", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/353f5e8f00a2f897d2974f07d27dd10f79666889/gcc%2Frust%2Frust-lang.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/353f5e8f00a2f897d2974f07d27dd10f79666889/gcc%2Frust%2Frust-lang.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-lang.cc?ref=353f5e8f00a2f897d2974f07d27dd10f79666889", "patch": "@@ -232,6 +232,21 @@ grs_langhook_type_for_mode (machine_mode mode, int unsignedp)\n       if (mode == TYPE_MODE (complex_integer_type_node) && !unsignedp)\n \treturn complex_integer_type_node;\n     }\n+\n+  /* See (a) <https://github.com/Rust-GCC/gccrs/issues/1713>\n+     \"Test failure on msp430-elfbare target\", and\n+     (b) <https://gcc.gnu.org/PR46805>\n+     \"ICE: SIGSEGV in optab_for_tree_code (optabs.c:407) with -O -fno-tree-scev-cprop -ftree-vectorize\"\n+     -- we have to support \"random\" modes/types here.\n+     TODO Clean all this up (either locally, or preferably per PR46805:\n+     \"Ideally we'd never use lang_hooks.types.type_for_mode (or _for_size) in the\n+     middle-end but had a pure middle-end based implementation\".  */\n+  for (size_t i = 0; i < NUM_INT_N_ENTS; i ++)\n+    if (int_n_enabled_p[i]\n+\t&& mode == int_n_data[i].m)\n+      return (unsignedp ? int_n_trees[i].unsigned_type\n+\t      : int_n_trees[i].signed_type);\n+\n   /* gcc_unreachable */\n   return NULL;\n }"}]}