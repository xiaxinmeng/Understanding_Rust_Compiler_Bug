{"sha": "e42ea63bcc12e819c3e1066974a691988e86b724", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQyZWE2M2JjYzEyZTgxOWMzZTEwNjY5NzRhNjkxOTg4ZTg2YjcyNA==", "commit": {"author": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-03-15T21:38:31Z"}, "committer": {"name": "Iain Sandoe", "email": "iain@sandoe.co.uk", "date": "2021-08-27T15:49:21Z"}, "message": "testsuite, Darwin : Do not claim 'GAS' for cctools assembler.\n\nAlthough the cctools assembler is based of GNU GAS, it is from a\nvery old version (1.38) which does not support many of the features\nthat the target supports test is expecting.\n\ngcc/testsuite/ChangeLog:\n\n\t* lib/target-supports.exp: Exclude cctools assembler based on\n\tGAS 1.38.", "tree": {"sha": "506de85a60a92f025d6671794061430b943207dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/506de85a60a92f025d6671794061430b943207dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e42ea63bcc12e819c3e1066974a691988e86b724", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e42ea63bcc12e819c3e1066974a691988e86b724", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e42ea63bcc12e819c3e1066974a691988e86b724", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e42ea63bcc12e819c3e1066974a691988e86b724/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e5d9873fcb6f90d03b7534af53de39ec65d0cdc5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e5d9873fcb6f90d03b7534af53de39ec65d0cdc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e5d9873fcb6f90d03b7534af53de39ec65d0cdc5"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "0e877bcdba26e8d28e0facc88a8cb27b291fa7a0", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e42ea63bcc12e819c3e1066974a691988e86b724/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e42ea63bcc12e819c3e1066974a691988e86b724/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=e42ea63bcc12e819c3e1066974a691988e86b724", "patch": "@@ -9601,7 +9601,14 @@ proc check_effective_target_gas { } {\n \tset status [remote_exec host \"$gcc_as\" \"-v /dev/null\"]\n \tset as_output [lindex $status 1]\n \tif { [ string first \"GNU\" $as_output ] >= 0 } {\n-\t    set use_gas_saved 1\n+\t    # Some Darwin versions have an assembler which is based on an old\n+\t    # version of GAS (and reports GNU assembler in its -v output) but\n+\t    #\u00a0but doesn't support many of the modern GAS features.\n+\t    if { [ string first \"cctools\" $as_output ] >= 0 } {\n+\t        set use_gas_saved 0\n+\t    } else {\n+\t        set use_gas_saved 1\n+\t    }\n \t} else {\n \t    set use_gas_saved 0\n \t}"}]}