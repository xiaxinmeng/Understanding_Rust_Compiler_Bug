{"sha": "c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNiMTcwOWE3MTc3NGM1YWQ3YjE1OTExYjZmMGZiMmVhMzhmMmEzYw==", "commit": {"author": {"name": "Ramana Radhakrishnan", "email": "ramana.radhakrishnan@linaro.org", "date": "2012-08-15T07:56:41Z"}, "committer": {"name": "Ramana Radhakrishnan", "email": "ramana@gcc.gnu.org", "date": "2012-08-15T07:56:41Z"}, "message": "re PR target/54212 (ARM: invalid instruction (vdupeq.32) generated)\n\nFix PR target/54212\n\n2012-08-15  Ramana Radhakrishnan  <ramana.radhakrishnan@linaro.org>\n\n\tPR target/54212\n\t* config/arm/neon.md (vec_set<mode>_internal VD,VQ): Do not\n\tmark as predicable. Adjust asm template.\n\t(vec_setv2di_internal): Likewise.\n\t(vec_extract<mode> VD, VQ): Likewise.\n\t(vec_extractv2di): Likewise.\n\t(neon_vget_lane<mode>_sext_internal VD, VQ): Likewise.\n\t(neon_vset_lane<mode>_sext_internal VD, VQ): Likewise.\n\t(neon_vdup_n<mode> VX, V32): Likewise.\n\t(neon_vdup_nv2di): Likewise.\n\nFrom-SVN: r190407", "tree": {"sha": "b3ab607b0fed234276224d5ba7c7c6018bc44818", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b3ab607b0fed234276224d5ba7c7c6018bc44818"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c/comments", "author": null, "committer": null, "parents": [{"sha": "73590b4f3a0b505c68635fbaffc1e9a0b9a4abca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/73590b4f3a0b505c68635fbaffc1e9a0b9a4abca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/73590b4f3a0b505c68635fbaffc1e9a0b9a4abca"}], "stats": {"total": 82, "additions": 41, "deletions": 41}, "files": [{"sha": "a42125bcf92a12ed34da58bbf2a84c1fd178e40d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c", "patch": "@@ -1,3 +1,16 @@\n+2012-08-15  Ramana Radhakrishnan  <ramana.radhakrishnan@linaro.org>\n+\n+\tPR target/54212\n+\t* config/arm/neon.md (vec_set<mode>_internal VD,VQ): Do not\n+\tmark as predicable. Adjust asm template.\n+\t(vec_setv2di_internal): Likewise.\n+\t(vec_extract<mode> VD, VQ): Likewise.\n+\t(vec_extractv2di): Likewise.\n+\t(neon_vget_lane<mode>_sext_internal VD, VQ): Likewise.\n+\t(neon_vset_lane<mode>_sext_internal VD, VQ): Likewise.\n+\t(neon_vdup_n<mode> VX, V32): Likewise.\n+\t(neon_vdup_nv2di): Likewise.\n+\n 2012-08-14   Diego Novillo  <dnovillo@google.com>\n \n \tMerge from cxx-conversion branch.  Configury."}, {"sha": "12c7934d0a49108e407f430f881477b0bc494e21", "filename": "gcc/config/arm/neon.md", "status": "modified", "additions": 28, "deletions": 41, "changes": 69, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c/gcc%2Fconfig%2Farm%2Fneon.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c/gcc%2Fconfig%2Farm%2Fneon.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fneon.md?ref=c3b1709a71774c5ad7b15911b6f0fb2ea38f2a3c", "patch": "@@ -434,10 +434,9 @@\n     elt = GET_MODE_NUNITS (<MODE>mode) - 1 - elt;\n   operands[2] = GEN_INT (elt);\n   \n-  return \"vmov%?.<V_sz_elem>\\t%P0[%c2], %1\";\n+  return \"vmov.<V_sz_elem>\\t%P0[%c2], %1\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_mcr\")])\n+  [(set_attr \"neon_type\" \"neon_mcr\")])\n \n (define_insn \"vec_set<mode>_internal\"\n   [(set (match_operand:VQ 0 \"s_register_operand\" \"=w\")\n@@ -460,10 +459,9 @@\n   operands[0] = gen_rtx_REG (<V_HALF>mode, regno + hi);\n   operands[2] = GEN_INT (elt);\n \n-  return \"vmov%?.<V_sz_elem>\\t%P0[%c2], %1\";\n+  return \"vmov.<V_sz_elem>\\t%P0[%c2], %1\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_mcr\")]\n+  [(set_attr \"neon_type\" \"neon_mcr\")]\n )\n \n (define_insn \"vec_setv2di_internal\"\n@@ -480,10 +478,9 @@\n \n   operands[0] = gen_rtx_REG (DImode, regno);\n \n-  return \"vmov%?\\t%P0, %Q1, %R1\";\n+  return \"vmov\\t%P0, %Q1, %R1\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_mcr_2_mcrr\")]\n+  [(set_attr \"neon_type\" \"neon_mcr_2_mcrr\")]\n )\n \n (define_expand \"vec_set<mode>\"\n@@ -511,10 +508,9 @@\n       elt = GET_MODE_NUNITS (<MODE>mode) - 1 - elt;\n       operands[2] = GEN_INT (elt);\n     }\n-  return \"vmov%?.<V_uf_sclr>\\t%0, %P1[%c2]\";\n+  return \"vmov.<V_uf_sclr>\\t%0, %P1[%c2]\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_insn \"vec_extract<mode>\"\n@@ -535,10 +531,9 @@\n   operands[1] = gen_rtx_REG (<V_HALF>mode, regno + hi);\n   operands[2] = GEN_INT (elt);\n \n-  return \"vmov%?.<V_uf_sclr>\\t%0, %P1[%c2]\";\n+  return \"vmov.<V_uf_sclr>\\t%0, %P1[%c2]\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_insn \"vec_extractv2di\"\n@@ -552,10 +547,9 @@\n \n   operands[1] = gen_rtx_REG (DImode, regno);\n \n-  return \"vmov%?\\t%Q0, %R0, %P1  @ v2di\";\n+  return \"vmov\\t%Q0, %R0, %P1  @ v2di\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_int_1\")]\n+  [(set_attr \"neon_type\" \"neon_int_1\")]\n )\n \n (define_expand \"vec_init<mode>\"\n@@ -2622,10 +2616,9 @@\n       elt = GET_MODE_NUNITS (<MODE>mode) - 1 - elt;\n       operands[2] = GEN_INT (elt);\n     }\n-  return \"vmov%?.s<V_sz_elem>\\t%0, %P1[%c2]\";\n+  return \"vmov.s<V_sz_elem>\\t%0, %P1[%c2]\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_insn \"neon_vget_lane<mode>_zext_internal\"\n@@ -2642,10 +2635,9 @@\n       elt = GET_MODE_NUNITS (<MODE>mode) - 1 - elt;\n       operands[2] = GEN_INT (elt);\n     }\n-  return \"vmov%?.u<V_sz_elem>\\t%0, %P1[%c2]\";\n+  return \"vmov.u<V_sz_elem>\\t%0, %P1[%c2]\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_insn \"neon_vget_lane<mode>_sext_internal\"\n@@ -2668,12 +2660,11 @@\n   ops[0] = operands[0];\n   ops[1] = gen_rtx_REG (<V_HALF>mode, regno + 2 * (elt / halfelts));\n   ops[2] = GEN_INT (elt_adj);\n-  output_asm_insn (\"vmov%?.s<V_sz_elem>\\t%0, %P1[%c2]\", ops);\n+  output_asm_insn (\"vmov.s<V_sz_elem>\\t%0, %P1[%c2]\", ops);\n \n   return \"\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_insn \"neon_vget_lane<mode>_zext_internal\"\n@@ -2696,12 +2687,11 @@\n   ops[0] = operands[0];\n   ops[1] = gen_rtx_REG (<V_HALF>mode, regno + 2 * (elt / halfelts));\n   ops[2] = GEN_INT (elt_adj);\n-  output_asm_insn (\"vmov%?.u<V_sz_elem>\\t%0, %P1[%c2]\", ops);\n+  output_asm_insn (\"vmov.u<V_sz_elem>\\t%0, %P1[%c2]\", ops);\n \n   return \"\";\n }\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_expand \"neon_vget_lane<mode>\"\n@@ -2832,22 +2822,20 @@\n   [(set (match_operand:VX 0 \"s_register_operand\" \"=w\")\n         (vec_duplicate:VX (match_operand:<V_elem> 1 \"s_register_operand\" \"r\")))]\n   \"TARGET_NEON\"\n-  \"vdup%?.<V_sz_elem>\\t%<V_reg>0, %1\"\n+  \"vdup.<V_sz_elem>\\t%<V_reg>0, %1\"\n   ;; Assume this schedules like vmov.\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_insn \"neon_vdup_n<mode>\"\n   [(set (match_operand:V32 0 \"s_register_operand\" \"=w,w\")\n         (vec_duplicate:V32 (match_operand:<V_elem> 1 \"s_register_operand\" \"r,t\")))]\n   \"TARGET_NEON\"\n   \"@\n-  vdup%?.<V_sz_elem>\\t%<V_reg>0, %1\n-  vdup%?.<V_sz_elem>\\t%<V_reg>0, %y1\"\n+  vdup.<V_sz_elem>\\t%<V_reg>0, %1\n+  vdup.<V_sz_elem>\\t%<V_reg>0, %y1\"\n   ;; Assume this schedules like vmov.\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"neon_type\" \"neon_bp_simple\")]\n+  [(set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n \n (define_expand \"neon_vdup_ndi\"\n@@ -2865,10 +2853,9 @@\n         (vec_duplicate:V2DI (match_operand:DI 1 \"s_register_operand\" \"r,w\")))]\n   \"TARGET_NEON\"\n   \"@\n-  vmov%?\\t%e0, %Q1, %R1\\;vmov%?\\t%f0, %Q1, %R1\n-  vmov%?\\t%e0, %P1\\;vmov%?\\t%f0, %P1\"\n-  [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"length\" \"8\")\n+  vmov\\t%e0, %Q1, %R1\\;vmov\\t%f0, %Q1, %R1\n+  vmov\\t%e0, %P1\\;vmov\\t%f0, %P1\"\n+  [(set_attr \"length\" \"8\")\n    (set_attr \"neon_type\" \"neon_bp_simple\")]\n )\n "}]}