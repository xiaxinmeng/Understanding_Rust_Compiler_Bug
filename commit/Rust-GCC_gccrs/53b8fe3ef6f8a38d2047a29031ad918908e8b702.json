{"sha": "53b8fe3ef6f8a38d2047a29031ad918908e8b702", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTNiOGZlM2VmNmY4YTM4ZDIwNDdhMjkwMzFhZDkxODkwOGU4YjcwMg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2004-01-08T15:19:36Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2004-01-08T15:19:36Z"}, "message": "run_acats: Treat 'gnatchop' the same way as 'gnatmake'.\n\n\t* ada/acats/run_acats: Treat 'gnatchop' the same way\n\tas 'gnatmake'.  Export GCC_DRIVER.\n\t* ada/acats/run_all.sh: Add target_gnatchop.  Use\n\t'host_gnatchop' and 'target_gnatchop' instead of 'gnatshop'.\n\nFrom-SVN: r75551", "tree": {"sha": "d4edeee777ffd011ae6308327e0858e1851d7e22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d4edeee777ffd011ae6308327e0858e1851d7e22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/53b8fe3ef6f8a38d2047a29031ad918908e8b702", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53b8fe3ef6f8a38d2047a29031ad918908e8b702", "html_url": "https://github.com/Rust-GCC/gccrs/commit/53b8fe3ef6f8a38d2047a29031ad918908e8b702", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/53b8fe3ef6f8a38d2047a29031ad918908e8b702/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7ddb6568e39aca91b2f817254449752c3490f3ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ddb6568e39aca91b2f817254449752c3490f3ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ddb6568e39aca91b2f817254449752c3490f3ed"}], "stats": {"total": 34, "additions": 30, "deletions": 4}, "files": [{"sha": "e61a65482f1d64cdca94416a5ba261c21621f43e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53b8fe3ef6f8a38d2047a29031ad918908e8b702/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53b8fe3ef6f8a38d2047a29031ad918908e8b702/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=53b8fe3ef6f8a38d2047a29031ad918908e8b702", "patch": "@@ -1,3 +1,10 @@\n+2004-01-08  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* ada/acats/run_acats: Treat 'gnatchop' the same way\n+\tas 'gnatmake'.  Export GCC_DRIVER.\n+\t* ada/acats/run_all.sh: Add target_gnatchop.  Use\n+\t'host_gnatchop' and 'target_gnatchop' instead of 'gnatshop'.\n+\n 2004-01-08  Giovanni Bajo  <giovannibajo@gcc.gnu.org>\n \n \tPR c++/12573"}, {"sha": "24d87853e1349592609fcaa45e96e5cd48a8b38f", "filename": "gcc/testsuite/ada/acats/run_acats", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53b8fe3ef6f8a38d2047a29031ad918908e8b702/gcc%2Ftestsuite%2Fada%2Facats%2Frun_acats", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53b8fe3ef6f8a38d2047a29031ad918908e8b702/gcc%2Ftestsuite%2Fada%2Facats%2Frun_acats", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fada%2Facats%2Frun_acats?ref=53b8fe3ef6f8a38d2047a29031ad918908e8b702", "patch": "@@ -7,6 +7,7 @@ fi\n \n # Set up environment to use the Ada compiler from the object tree\n \n+host_gnatchop=`type gnatchop | awk '{print $3}'`\n host_gnatmake=`type gnatmake | awk '{print $3}'`\n ROOT=`${PWDCMD-pwd}`\n BASE=`cd $ROOT/../../..; ${PWDCMD-pwd}`\n@@ -20,13 +21,27 @@ if [ ! -d $ADA_INCLUDE_PATH ]; then\n    exit 1\n fi\n \n+if [ ! -f $BASE/gnatchop ]; then\n+   echo gnattools missing, exiting.\n+   exit 1\n+fi\n+\n if [ ! -f $BASE/gnatmake ]; then\n    echo gnattools missing, exiting.\n    exit 1\n fi\n \n+GCC_DRIVER=\"$BASE/xgcc\"\n GCC=\"$BASE/xgcc -B$BASE/\"\n-export PATH ADA_INCLUDE_PATH ADA_OBJECTS_PATH GCC\n+export PATH ADA_INCLUDE_PATH ADA_OBJECTS_PATH GCC_DRIVER GCC\n+\n+echo '#!/bin/sh' > host_gnatchop\n+echo PATH=`dirname $host_gnatchop`:'$PATH' >> host_gnatchop\n+echo unset ADA_INCLUDE_PATH ADA_OBJECTS_PATH GCC_EXEC_PREFIX >> host_gnatchop\n+echo export PATH >> host_gnatchop\n+echo exec $host_gnatchop '\"$@\"' >> host_gnatchop\n+\n+chmod +x host_gnatchop\n \n echo '#!/bin/sh' > host_gnatmake\n echo PATH=`dirname $host_gnatmake`:'$PATH' >> host_gnatmake"}, {"sha": "4d8862c1e9a72f4b9557f45f7518dd781d1e387a", "filename": "gcc/testsuite/ada/acats/run_all.sh", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/53b8fe3ef6f8a38d2047a29031ad918908e8b702/gcc%2Ftestsuite%2Fada%2Facats%2Frun_all.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/53b8fe3ef6f8a38d2047a29031ad918908e8b702/gcc%2Ftestsuite%2Fada%2Facats%2Frun_all.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fada%2Facats%2Frun_all.sh?ref=53b8fe3ef6f8a38d2047a29031ad918908e8b702", "patch": "@@ -47,6 +47,10 @@ if [ \"$dir\" = \"$testdir\" ]; then\n   exit 1\n fi\n \n+target_gnatchop () {\n+  gnatchop --GCC=\"$GCC_DRIVER\" $*\n+}\n+\n target_gnatmake () {\n   gnatmake --GCC=\"$GCC\" $gnatflags $gccflags $* -largs $EXTERNAL_OBJECTS --GCC=\"$GCC\"\n }\n@@ -101,7 +105,7 @@ mkdir -p $dir/run\n cp -pr $testdir/tests $dir/\n \n for i in $dir/support/*.ada $dir/support/*.a; do \n-   gnatchop $i >> $dir/acats.log 2>&1\n+   host_gnatchop $i >> $dir/acats.log 2>&1\n done\n \n # These tools are used to preprocess some ACATS sources\n@@ -139,7 +143,7 @@ if [ $? -ne 0 ]; then\n    exit 1\n fi\n \n-gnatchop *.adt >> $dir/acats.log 2>&1\n+target_gnatchop *.adt >> $dir/acats.log 2>&1\n \n target_gnatmake -c -gnato -gnatE *.ads > /dev/null 2>&1\n target_gnatmake -c -gnato -gnatE *.adb\n@@ -188,7 +192,7 @@ for chapter in $chapters; do\n       test=$dir/tests/$chapter/$i\n       mkdir $test\n       cd $test\n-      gnatchop -c -w `ls ${test}*.a ${test}*.ada ${test}*.adt ${test}*.am ${test}*.dep 2> /dev/null` >> $dir/acats.log 2>&1\n+      target_gnatchop -c -w `ls ${test}*.a ${test}*.ada ${test}*.adt ${test}*.am ${test}*.dep 2> /dev/null` >> $dir/acats.log 2>&1\n       ls ${i}?.adb > ${i}.lst 2> /dev/null\n       ls ${i}*m.adb >> ${i}.lst 2> /dev/null\n       ls ${i}.adb >> ${i}.lst 2> /dev/null"}]}