{"sha": "2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQ1YmMwMTZhZGI5MDBhOWZjYmFhZGU1Zjc4ZWVhZjRlMGFlNDk0ZA==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2006-05-01T20:57:20Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2006-05-01T20:57:20Z"}, "message": "vec.c: Include bconfig.h when appropriate.\n\n* vec.c: Include bconfig.h when appropriate.\n* Makefile.in (build/vec.o): Adjust dependencies.\n* mkconfig.sh: Make sure config.h isn't used for build machine\ncompiles.\n\nFrom-SVN: r113432", "tree": {"sha": "d7dec8e90275b123a2a3f7d5deb08469c901c1f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7dec8e90275b123a2a3f7d5deb08469c901c1f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/comments", "author": null, "committer": null, "parents": [{"sha": "2ce798794df8e1edc87b59e36417e2691a25d579", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ce798794df8e1edc87b59e36417e2691a25d579", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ce798794df8e1edc87b59e36417e2691a25d579"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "bec4dc97726dfa6d6a24001d31652ebb55709ac4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "patch": "@@ -1,3 +1,10 @@\n+2006-05-01  DJ Delorie  <dj@redhat.com>\n+\n+\t* vec.c: Include bconfig.h when appropriate.\n+\t* Makefile.in (build/vec.o): Adjust dependencies.\n+\t* mkconfig.sh: Make sure config.h isn't used for build machine\n+\tcompiles.\n+\n 2006-05-01  Zdenek Dvorak <dvorakz@suse.cz>\n \n \t* tree-into-ssa.c (phis_to_rewrite, blocks_with_phis_to_rewrite): New"}, {"sha": "4239808a06c270810964f152aafb39ee81a83800", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "patch": "@@ -2927,7 +2927,7 @@ build/read-rtl.o: read-rtl.c $(BCONFIG_H) $(SYSTEM_H) coretypes.h\t\\\n   $(GTM_H) $(RTL_BASE_H) $(OBSTACK_H) $(HASHTAB_H) gensupport.h\n build/rtl.o: rtl.c $(BCONFIG_H) coretypes.h $(GTM_H) $(SYSTEM_H)\t\\\n   $(RTL_H) $(REAL_H) $(GGC_H) errors.h\n-build/vec.o : vec.c $(CONFIG_H) $(SYSTEM_H) $(TREE_H) coretypes.h vec.h \\\n+build/vec.o : vec.c $(BCONFIG_H) $(SYSTEM_H) $(TREE_H) coretypes.h vec.h \\\n    $(GGC_H) toplev.h\n build/gencondmd.o : build/gencondmd.c $(BCONFIG_H) $(SYSTEM_H)\t\t\\\n   coretypes.h $(GTM_H) insn-constants.h $(RTL_H) $(TM_P_H)\t\t\\"}, {"sha": "9ffd200b9cfba166a383c5d7f883b08879b15155", "filename": "gcc/mkconfig.sh", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2Fmkconfig.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2Fmkconfig.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmkconfig.sh?ref=2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "patch": "@@ -1,6 +1,6 @@\n #! /bin/sh\n \n-# Copyright (C) 2001, 2002 Free Software Foundation, Inc.\n+# Copyright (C) 2001, 2002, 2006 Free Software Foundation, Inc.\n # This file is part of GCC.\n \n # GCC is free software; you can redistribute it and/or modify\n@@ -41,6 +41,14 @@ header_guard=GCC_`echo ${output} | sed -e ${hg_sed_expr}`\n echo \"#ifndef ${header_guard}\" >> ${output}T\n echo \"#define ${header_guard}\" >> ${output}T\n \n+# A special test to ensure that build-time files don't blindly use\n+# config.h.\n+if test x\"$output\" == x\"config.h\"; then\n+  echo \"#ifdef GENERATOR_FILE\" >> ${output}T\n+  echo \"#error config.h is for the host, not build, machine.\" >> ${output}T\n+  echo \"#endif\" >> ${output}T\n+fi\n+\n # Define TARGET_CPU_DEFAULT if the system wants one.\n # This substitutes for lots of *.h files.\n if [ \"$TARGET_CPU_DEFAULT\" != \"\" ]; then"}, {"sha": "5d5687475ec4d0b8e88908b8e00d413b50ea3798", "filename": "gcc/vec.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2Fvec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d/gcc%2Fvec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvec.c?ref=2d5bc016adb900a9fcbaade5f78eeaf4e0ae494d", "patch": "@@ -1,5 +1,5 @@\n /* Vector API for GNU compiler.\n-   Copyright (C) 2004, 2005 Free Software Foundation, Inc.\n+   Copyright (C) 2004, 2005, 2006 Free Software Foundation, Inc.\n    Contributed by Nathan Sidwell <nathan@codesourcery.com>\n \n This file is part of GCC.\n@@ -19,7 +19,14 @@ along with GCC; see the file COPYING.  If not, write to the Free\n Software Foundation, 51 Franklin Street, Fifth Floor, Boston, MA\n 02110-1301, USA.  */\n \n+/* This file is compiled twice: once for the generator programs\n+   once for the compiler.  */\n+#ifdef GENERATOR_FILE\n+#include \"bconfig.h\"\n+#else\n #include \"config.h\"\n+#endif\n+\n #include \"system.h\"\n #include \"ggc.h\"\n #include \"vec.h\""}]}