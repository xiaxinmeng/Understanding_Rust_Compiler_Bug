{"sha": "3e836a310dd93958129e5b917466c4f11cbabc13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U4MzZhMzEwZGQ5Mzk1ODEyOWU1YjkxNzQ2NmM0ZjExY2JhYmMxMw==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2008-02-01T21:28:46Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2008-02-01T21:28:46Z"}, "message": "re PR rtl-optimization/34773 (miscompilation of vfprintf_r)\n\n\tPR rtl-optimization/34773\n\t* reg-notes.def (EQUAL): Mention significance of combination of\n\tREG_EQUAL and REG_RETVAL.\n\t* fwprop.c (try_fwprop_subst): Don't add REG_EQUAL to an\n\tinsn that has a REG_RETVAL.\n\nFrom-SVN: r132053", "tree": {"sha": "249cc303d527362a0580a568986dea3066f5601b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/249cc303d527362a0580a568986dea3066f5601b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e836a310dd93958129e5b917466c4f11cbabc13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e836a310dd93958129e5b917466c4f11cbabc13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e836a310dd93958129e5b917466c4f11cbabc13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e836a310dd93958129e5b917466c4f11cbabc13/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2449e8e5cdb140871c4368606cd3405a48103319", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2449e8e5cdb140871c4368606cd3405a48103319", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2449e8e5cdb140871c4368606cd3405a48103319"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "8bf727f6f4109d47cda8e63914c7c5ea7982dd90", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e836a310dd93958129e5b917466c4f11cbabc13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e836a310dd93958129e5b917466c4f11cbabc13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e836a310dd93958129e5b917466c4f11cbabc13", "patch": "@@ -1,3 +1,11 @@\n+2008-02-01  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\tPR rtl-optimization/34773\n+\t* reg-notes.def (EQUAL): Mention significance of combination of\n+\tREG_EQUAL and REG_RETVAL.\n+\t* fwprop.c (try_fwprop_subst): Don't add REG_EQUAL to an\n+\tinsn that has a REG_RETVAL.\n+\n 2008-02-01  Roger Sayle  <roger@eyesopen.com>\n \n \tPR bootstrap/33781"}, {"sha": "1e0327230bbf631c720f4f4afa91466b9ab69c91", "filename": "gcc/fwprop.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e836a310dd93958129e5b917466c4f11cbabc13/gcc%2Ffwprop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e836a310dd93958129e5b917466c4f11cbabc13/gcc%2Ffwprop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffwprop.c?ref=3e836a310dd93958129e5b917466c4f11cbabc13", "patch": "@@ -729,9 +729,12 @@ try_fwprop_subst (struct df_ref *use, rtx *loc, rtx new, rtx def_insn, bool set_\n     {\n       cancel_changes (0);\n \n-      /* Can also record a simplified value in a REG_EQUAL note, making a\n-\t new one if one does not already exist.  */\n-      if (set_reg_equal)\n+      /* Can also record a simplified value in a REG_EQUAL note,\n+\t making a new one if one does not already exist.\n+\t Don't do this if the insn has a REG_RETVAL note, because the\n+\t combined presence means that the REG_EQUAL note refers to the\n+\t (full) contents of the libcall value.  */\n+      if (set_reg_equal && !find_reg_note (insn, REG_RETVAL, NULL_RTX))\n \t{\n \t  if (dump_file)\n \t    fprintf (dump_file, \" Setting REG_EQUAL note\\n\");"}, {"sha": "eaf04168f5fa3320964ea6f27febf81c6974eca0", "filename": "gcc/reg-notes.def", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e836a310dd93958129e5b917466c4f11cbabc13/gcc%2Freg-notes.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e836a310dd93958129e5b917466c4f11cbabc13/gcc%2Freg-notes.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freg-notes.def?ref=3e836a310dd93958129e5b917466c4f11cbabc13", "patch": "@@ -52,7 +52,9 @@ REG_NOTE (EQUIV)\n \n /* Like REG_EQUIV except that the destination is only momentarily\n    equal to the specified rtx.  Therefore, it cannot be used for\n-   substitution; but it can be used for cse.  */\n+   substitution; but it can be used for cse.  Together with a\n+   REG_RETVAL note, it means that the insn sets the full contents of\n+   the libcall value.  */\n REG_NOTE (EQUAL)\n \n /* This insn copies the return-value of a library call out of the hard"}]}