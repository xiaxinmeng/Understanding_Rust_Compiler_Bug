{"sha": "451c51e8ed385d06d80776168897a1b2a2e5d870", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDUxYzUxZThlZDM4NWQwNmQ4MDc3NjE2ODg5N2ExYjJhMmU1ZDg3MA==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2020-04-21T16:04:34Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-03-23T15:11:48Z"}, "message": "testsuite/arm: Remove useless -mfloat-abi option\n\nThese tests pass with their current dg-add-options, no need to force\n-mfloat=abi.\n\nI've noticed no impact on armv8_1m-shift-imm-1.c and\narmv8_1m-shift-reg-1.c, bf16_reinterpret.c now passes on\narm-linux-gnueabi and bf16_dup.c now passes on arm-linux-gnueabihf.\n\nThis allows pr51534.c to pass when forcing -mfloat-abi=soft in\nruntestflags, otherwise we get an error '-mfloat-abi=soft and\n-mfloat-abi=hard may not be used together' because we try to compile\nwith both flags.\n\n2021-03-19  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/testsuite/\n\t* gcc.target/arm/armv8_1m-shift-imm-1.c: Remove -mfloat=abi option.\n\t* gcc.target/arm/armv8_1m-shift-reg-1.c: Likewise.\n\t* gcc.target/arm/bf16_dup.c: Likewise.\n\t* gcc.target/arm/bf16_reinterpret.c: Likewise.\n\t* gcc.target/arm/pr51534.c: Remove -mfloat=abi option.", "tree": {"sha": "e1f58bc68d5fe802537ded4310e8c0cbf238ecbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1f58bc68d5fe802537ded4310e8c0cbf238ecbb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/451c51e8ed385d06d80776168897a1b2a2e5d870", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/451c51e8ed385d06d80776168897a1b2a2e5d870", "html_url": "https://github.com/Rust-GCC/gccrs/commit/451c51e8ed385d06d80776168897a1b2a2e5d870", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/451c51e8ed385d06d80776168897a1b2a2e5d870/comments", "author": null, "committer": null, "parents": [{"sha": "aa706c46366553081a618502e9d71530cfa74dfa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa706c46366553081a618502e9d71530cfa74dfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa706c46366553081a618502e9d71530cfa74dfa"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "84f13e24194f3498f4d1a17610352f4a0a5f82ad", "filename": "gcc/testsuite/gcc.target/arm/armv8_1m-shift-imm-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv8_1m-shift-imm-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv8_1m-shift-imm-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv8_1m-shift-imm-1.c?ref=451c51e8ed385d06d80776168897a1b2a2e5d870", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mfloat-abi=softfp -mlittle-endian\" } */\n /* { dg-require-effective-target arm_v8_1m_mve_ok } */\n+/* { dg-options \"-O2 -mlittle-endian\" } */\n /* { dg-add-options arm_v8_1m_mve } */\n \n long long longval1;"}, {"sha": "8668b6bf495c06335941479f48fd27411df0e70d", "filename": "gcc/testsuite/gcc.target/arm/armv8_1m-shift-reg-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv8_1m-shift-reg-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv8_1m-shift-reg-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Farmv8_1m-shift-reg-1.c?ref=451c51e8ed385d06d80776168897a1b2a2e5d870", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mfloat-abi=softfp -mlittle-endian\" } */\n /* { dg-require-effective-target arm_v8_1m_mve_ok } */\n+/* { dg-options \"-O2 -mlittle-endian\" } */\n /* { dg-add-options arm_v8_1m_mve } */\n \n long long longval2;"}, {"sha": "b62bce1e378c415f6f7affa954e98f903e18a7c1", "filename": "gcc/testsuite/gcc.target/arm/bf16_dup.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbf16_dup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbf16_dup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbf16_dup.c?ref=451c51e8ed385d06d80776168897a1b2a2e5d870", "patch": "@@ -1,7 +1,7 @@\n /* { dg-do assemble { target { arm*-*-* } } } */\n /* { dg-require-effective-target arm_v8_2a_bf16_neon_ok } */\n /* { dg-add-options arm_v8_2a_bf16_neon }  */\n-/* { dg-additional-options \"-save-temps -march=armv8.2-a+bf16+fp16 -mfloat-abi=softfp\" } */\n+/* { dg-additional-options \"-save-temps -march=armv8.2-a+bf16+fp16\" } */\n \n #include \"arm_neon.h\"\n "}, {"sha": "9e36fc53210425bade0ae9bf77f54efccc0d8265", "filename": "gcc/testsuite/gcc.target/arm/bf16_reinterpret.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbf16_reinterpret.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbf16_reinterpret.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fbf16_reinterpret.c?ref=451c51e8ed385d06d80776168897a1b2a2e5d870", "patch": "@@ -1,7 +1,7 @@\n /* { dg-do assemble { target { arm*-*-* } } } */\n /* { dg-require-effective-target arm_v8_2a_bf16_neon_ok } */\n /* { dg-add-options arm_v8_2a_bf16_neon }  */\n-/* { dg-additional-options \"-save-temps -march=armv8.2-a+fp16+bf16 -mfloat-abi=hard -mfpu=crypto-neon-fp-armv8\" } */\n+/* { dg-additional-options \"-save-temps -march=armv8.2-a+fp16+bf16 -mfpu=crypto-neon-fp-armv8\" } */\n \n #include <arm_neon.h>\n "}, {"sha": "3711b45eed99da5c57638eebc96b196aff1bff97", "filename": "gcc/testsuite/gcc.target/arm/pr51534.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr51534.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/451c51e8ed385d06d80776168897a1b2a2e5d870/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr51534.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr51534.c?ref=451c51e8ed385d06d80776168897a1b2a2e5d870", "patch": "@@ -3,7 +3,7 @@\n \n /* { dg-do assemble } */\n /* { dg-require-effective-target arm_neon_ok } */\n-/* { dg-options \"-save-temps -mfloat-abi=hard -O3\" } */\n+/* { dg-options \"-save-temps -O3\" } */\n /* { dg-add-options arm_neon } */\n \n #include <arm_neon.h>"}]}