{"sha": "7b8ee33affd968d3a8f5f6224268702d1900f0a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2I4ZWUzM2FmZmQ5NjhkM2E4ZjVmNjIyNDI2ODcwMmQxOTAwZjBhMQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-26T07:08:31Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-27T08:12:58Z"}, "message": "prepare-commit-msg: Save diff if requested by user.\n\ncontrib/ChangeLog:\n\n\t* prepare-commit-msg: Save diff to a file if\n\tthe GCC_GIT_DIFF_FILE variable is set.", "tree": {"sha": "1778b98401b046ddd869f122a45be8d9efa28b0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1778b98401b046ddd869f122a45be8d9efa28b0f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7b8ee33affd968d3a8f5f6224268702d1900f0a1", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEE6I4wzqqylQBfXaRhTcGC3A+nN4UFAl7OIQoACgkQTcGC3A+n\nN4Xs3wf/dDDFfYM9AAP86KV495xwK1ZuBk8Tr3i3UXsli/cWztc6IcKBVuTZNnDD\nEV9VpyhCVyENXy5H8kUw7s2T2M9rO3C2Id/6ZNykbCbLumqiZmAS9Zobumz4yP6R\nKGOER5LNbfYrp5o/Dd0h/xmoWE4X+Ileh2eb1HxhXwH7Y1zqWXlgSfrn/BwNKDAn\n6l/x0L2M34h20GakSgujvpLJ/tw6TNFQ5Zti6rx7WVIrSja/bjwHW9J6b9qyybkU\nCcJQp+92p+9Iz2UN0Uv/SeDghCwmZ5T2g462fPK1Uivf+p5OJj0T13cQOZWMyyiG\nd4B8P0ArOUyLsKhX6xwdG82n1zkxng==\n=9J4a\n-----END PGP SIGNATURE-----", "payload": "tree 1778b98401b046ddd869f122a45be8d9efa28b0f\nparent c3a4169be95d5ccf21296ad4e483981d8375f1ae\nauthor Martin Liska <mliska@suse.cz> 1590476911 +0200\ncommitter Martin Liska <mliska@suse.cz> 1590567178 +0200\n\nprepare-commit-msg: Save diff if requested by user.\n\ncontrib/ChangeLog:\n\n\t* prepare-commit-msg: Save diff to a file if\n\tthe GCC_GIT_DIFF_FILE variable is set.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b8ee33affd968d3a8f5f6224268702d1900f0a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7b8ee33affd968d3a8f5f6224268702d1900f0a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7b8ee33affd968d3a8f5f6224268702d1900f0a1/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c3a4169be95d5ccf21296ad4e483981d8375f1ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a4169be95d5ccf21296ad4e483981d8375f1ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3a4169be95d5ccf21296ad4e483981d8375f1ae"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "fd59bfbcf8837335cf5b095f2cfb267e1c7e9a17", "filename": "contrib/prepare-commit-msg", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7b8ee33affd968d3a8f5f6224268702d1900f0a1/contrib%2Fprepare-commit-msg", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7b8ee33affd968d3a8f5f6224268702d1900f0a1/contrib%2Fprepare-commit-msg", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fprepare-commit-msg?ref=7b8ee33affd968d3a8f5f6224268702d1900f0a1", "patch": "@@ -54,4 +54,9 @@ else\n     exit 0\n fi\n \n+# Save diff to a file if requested.\n+if ! [ -z \"$GCC_GIT_DIFF_FILE\" ]; then\n+  git $cmd > \"$GCC_GIT_DIFF_FILE\";\n+fi\n+\n git $cmd | git gcc-mklog -c \"$COMMIT_MSG_FILE\""}]}