{"sha": "4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGViMjBiMDM2ZTI2YWVkYjM5YmVhZTVkZTNlYzRlZmViN2EwOTdlOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-10-12T22:07:24Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-10-12T22:07:24Z"}, "message": "sse.md (vec_unpacks_lo_<mode>, [...]): Change VI124_128 mode to VI124_AVX2.\n\n\t* config/i386/sse.md (vec_unpacks_lo_<mode>,\n\tvec_unpacks_hi_<mode>, vec_unpacku_lo_<mode>,\n\tvec_unpacku_hi_<mode>): Change VI124_128 mode to\n\tVI124_AVX2.\n\t* config/i386/i386.c (ix86_expand_sse_unpack): Handle\n\tV32QImode, V16HImode and V8SImode for TARGET_AVX2.\n\nFrom-SVN: r179872", "tree": {"sha": "3520a4af9b3fe47476a6ef24b30afd6b7c114f8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3520a4af9b3fe47476a6ef24b30afd6b7c114f8b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f228967232d972181d9c497ca7731d5d1db60881", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f228967232d972181d9c497ca7731d5d1db60881", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f228967232d972181d9c497ca7731d5d1db60881"}], "stats": {"total": 51, "additions": 46, "deletions": 5}, "files": [{"sha": "cdc939122d005dbb81efbb233bdd655ab981b9d8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "patch": "@@ -1,5 +1,12 @@\n 2011-10-12  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* config/i386/sse.md (vec_unpacks_lo_<mode>,\n+\tvec_unpacks_hi_<mode>, vec_unpacku_lo_<mode>,\n+\tvec_unpacku_hi_<mode>): Change VI124_128 mode to\n+\tVI124_AVX2.\n+\t* config/i386/i386.c (ix86_expand_sse_unpack): Handle\n+\tV32QImode, V16HImode and V8SImode for TARGET_AVX2.\n+\n \t* config/i386/sse.md (vec_avx2): New mode_attr.\n \t(mulv16qi3): Macroize to cover also mulv32qi3 for\n \tTARGET_AVX2 into ..."}, {"sha": "3a5382964dac34ead3f9f7c6e80c4ea955d2deeb", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 35, "deletions": 1, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "patch": "@@ -19683,9 +19683,38 @@ ix86_expand_sse_unpack (rtx operands[2], bool unsigned_p, bool high_p)\n   if (TARGET_SSE4_1)\n     {\n       rtx (*unpack)(rtx, rtx);\n+      rtx (*extract)(rtx, rtx) = NULL;\n+      enum machine_mode halfmode = BLKmode;\n \n       switch (imode)\n \t{\n+\tcase V32QImode:\n+\t  if (unsigned_p)\n+\t    unpack = gen_avx2_zero_extendv16qiv16hi2;\n+\t  else\n+\t    unpack = gen_avx2_sign_extendv16qiv16hi2;\n+\t  halfmode = V16QImode;\n+\t  extract\n+\t    = high_p ? gen_vec_extract_hi_v32qi : gen_vec_extract_lo_v32qi;\n+\t  break;\n+\tcase V16HImode:\n+\t  if (unsigned_p)\n+\t    unpack = gen_avx2_zero_extendv8hiv8si2;\n+\t  else\n+\t    unpack = gen_avx2_sign_extendv8hiv8si2;\n+\t  halfmode = V8HImode;\n+\t  extract\n+\t    = high_p ? gen_vec_extract_hi_v16hi : gen_vec_extract_lo_v16hi;\n+\t  break;\n+\tcase V8SImode:\n+\t  if (unsigned_p)\n+\t    unpack = gen_avx2_zero_extendv4siv4di2;\n+\t  else\n+\t    unpack = gen_avx2_sign_extendv4siv4di2;\n+\t  halfmode = V4SImode;\n+\t  extract\n+\t    = high_p ? gen_vec_extract_hi_v8si : gen_vec_extract_lo_v8si;\n+\t  break;\n \tcase V16QImode:\n \t  if (unsigned_p)\n \t    unpack = gen_sse4_1_zero_extendv8qiv8hi2;\n@@ -19708,7 +19737,12 @@ ix86_expand_sse_unpack (rtx operands[2], bool unsigned_p, bool high_p)\n \t  gcc_unreachable ();\n \t}\n \n-      if (high_p)\n+      if (GET_MODE_SIZE (imode) == 32)\n+\t{\n+\t  tmp = gen_reg_rtx (halfmode);\n+\t  emit_insn (extract (tmp, operands[1]));\n+\t}\n+      else if (high_p)\n \t{\n \t  /* Shift higher 8 bytes to lower 8 bytes.  */\n \t  tmp = gen_reg_rtx (imode);"}, {"sha": "3073ab247c70d5fff4d83ffda2b8284cb6df1fde", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4eb20b036e26aedb39beae5de3ec4efeb7a097e8/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=4eb20b036e26aedb39beae5de3ec4efeb7a097e8", "patch": "@@ -7536,25 +7536,25 @@\n \n (define_expand \"vec_unpacks_lo_<mode>\"\n   [(match_operand:<sseunpackmode> 0 \"register_operand\" \"\")\n-   (match_operand:VI124_128 1 \"register_operand\" \"\")]\n+   (match_operand:VI124_AVX2 1 \"register_operand\" \"\")]\n   \"TARGET_SSE2\"\n   \"ix86_expand_sse_unpack (operands, false, false); DONE;\")\n \n (define_expand \"vec_unpacks_hi_<mode>\"\n   [(match_operand:<sseunpackmode> 0 \"register_operand\" \"\")\n-   (match_operand:VI124_128 1 \"register_operand\" \"\")]\n+   (match_operand:VI124_AVX2 1 \"register_operand\" \"\")]\n   \"TARGET_SSE2\"\n   \"ix86_expand_sse_unpack (operands, false, true); DONE;\")\n \n (define_expand \"vec_unpacku_lo_<mode>\"\n   [(match_operand:<sseunpackmode> 0 \"register_operand\" \"\")\n-   (match_operand:VI124_128 1 \"register_operand\" \"\")]\n+   (match_operand:VI124_AVX2 1 \"register_operand\" \"\")]\n   \"TARGET_SSE2\"\n   \"ix86_expand_sse_unpack (operands, true, false); DONE;\")\n \n (define_expand \"vec_unpacku_hi_<mode>\"\n   [(match_operand:<sseunpackmode> 0 \"register_operand\" \"\")\n-   (match_operand:VI124_128 1 \"register_operand\" \"\")]\n+   (match_operand:VI124_AVX2 1 \"register_operand\" \"\")]\n   \"TARGET_SSE2\"\n   \"ix86_expand_sse_unpack (operands, true, true); DONE;\")\n "}]}