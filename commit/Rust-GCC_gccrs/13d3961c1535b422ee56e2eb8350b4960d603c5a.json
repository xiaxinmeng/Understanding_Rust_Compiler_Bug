{"sha": "13d3961c1535b422ee56e2eb8350b4960d603c5a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTNkMzk2MWMxNTM1YjQyMmVlNTZlMmViODM1MGI0OTYwZDYwM2M1YQ==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2010-10-09T14:20:08Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2010-10-09T14:20:08Z"}, "message": "m68k.h (FUNCTION_ARG, [...]): Delete.\n\n\t* config/m68k/m68k.h (FUNCTION_ARG, FUNCTION_ARG_ADVANCE): Delete.\n\t* config/m68k/m68k.c (m68k_function_arg): New function.\n\t(m68k_function_arg_advance): New function.\n\t(TARGET_FUNCTION_ARG, TARGET_FUNCTION_ARG_ADVANCE): Define.\n\nFrom-SVN: r165227", "tree": {"sha": "c1c7a728bf4c729cac85d962736e576977abcdb0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1c7a728bf4c729cac85d962736e576977abcdb0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/13d3961c1535b422ee56e2eb8350b4960d603c5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13d3961c1535b422ee56e2eb8350b4960d603c5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13d3961c1535b422ee56e2eb8350b4960d603c5a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13d3961c1535b422ee56e2eb8350b4960d603c5a/comments", "author": null, "committer": null, "parents": [{"sha": "733bdfbd6881a2c1d1bb02ab15bfcd606f72ee94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/733bdfbd6881a2c1d1bb02ab15bfcd606f72ee94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/733bdfbd6881a2c1d1bb02ab15bfcd606f72ee94"}], "stats": {"total": 45, "additions": 37, "deletions": 8}, "files": [{"sha": "f0b5968f79d921c849a9cf590c212f030b9ff6d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d3961c1535b422ee56e2eb8350b4960d603c5a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d3961c1535b422ee56e2eb8350b4960d603c5a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=13d3961c1535b422ee56e2eb8350b4960d603c5a", "patch": "@@ -1,3 +1,10 @@\n+2010-10-09  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* config/m68k/m68k.h (FUNCTION_ARG, FUNCTION_ARG_ADVANCE): Delete.\n+\t* config/m68k/m68k.c (m68k_function_arg): New function.\n+\t(m68k_function_arg_advance): New function.\n+\t(TARGET_FUNCTION_ARG, TARGET_FUNCTION_ARG_ADVANCE): Define.\n+\n 2010-10-09  Nathan Froyd  <froydnj@codesourcery.com>\n \n \t* config/avr/avr-protos.h (function_arg): Delete."}, {"sha": "f032a47f6df83c02637bfa05a8d137782d3a2a0d", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d3961c1535b422ee56e2eb8350b4960d603c5a/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d3961c1535b422ee56e2eb8350b4960d603c5a/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=13d3961c1535b422ee56e2eb8350b4960d603c5a", "patch": "@@ -157,6 +157,10 @@ static void m68k_output_dwarf_dtprel (FILE *, int, rtx) ATTRIBUTE_UNUSED;\n static void m68k_trampoline_init (rtx, tree, rtx);\n static int m68k_return_pops_args (tree, tree, int);\n static rtx m68k_delegitimize_address (rtx);\n+static void m68k_function_arg_advance (CUMULATIVE_ARGS *, enum machine_mode,\n+\t\t\t\t       const_tree, bool);\n+static rtx m68k_function_arg (CUMULATIVE_ARGS *, enum machine_mode,\n+\t\t\t      const_tree, bool);\n \f\n \n /* Specify the identification number of the library being built */\n@@ -283,6 +287,12 @@ const char *m68k_library_id_string = \"_current_shared_library_a5_offset_\";\n #undef TARGET_DELEGITIMIZE_ADDRESS\n #define TARGET_DELEGITIMIZE_ADDRESS m68k_delegitimize_address\n \n+#undef TARGET_FUNCTION_ARG\n+#define TARGET_FUNCTION_ARG m68k_function_arg\n+\n+#undef TARGET_FUNCTION_ARG_ADVANCE\n+#define TARGET_FUNCTION_ARG_ADVANCE m68k_function_arg_advance\n+\n static const struct attribute_spec m68k_attribute_table[] =\n {\n   /* { name, min_len, max_len, decl_req, type_req, fn_type_req, handler } */\n@@ -1474,6 +1484,26 @@ m68k_ok_for_sibcall_p (tree decl, tree exp)\n   return false;\n }\n \n+/* On the m68k all args are always pushed.  */\n+\n+static rtx\n+m68k_function_arg (CUMULATIVE_ARGS *cum ATTRIBUTE_UNUSED,\n+\t\t   enum machine_mode mode ATTRIBUTE_UNUSED,\n+\t\t   const_tree type ATTRIBUTE_UNUSED,\n+\t\t   bool named ATTRIBUTE_UNUSED)\n+{\n+  return NULL_RTX;\n+}\n+\n+static void\n+m68k_function_arg_advance (CUMULATIVE_ARGS *cum, enum machine_mode mode,\n+\t\t\t   const_tree type, bool named ATTRIBUTE_UNUSED)\n+{\n+  *cum += (mode != BLKmode\n+\t   ? (GET_MODE_SIZE (mode) + 3) & ~3\n+\t   : (int_size_in_bytes (type) + 3) & ~3);\n+}\n+\n /* Convert X to a legitimate function call memory reference and return the\n    result.  */\n "}, {"sha": "5aac599d7117add3c2819ae92a8785915889e076", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/13d3961c1535b422ee56e2eb8350b4960d603c5a/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/13d3961c1535b422ee56e2eb8350b4960d603c5a/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=13d3961c1535b422ee56e2eb8350b4960d603c5a", "patch": "@@ -558,14 +558,6 @@ extern enum reg_class regno_reg_class[];\n #define INIT_CUMULATIVE_ARGS(CUM, FNTYPE, LIBNAME, INDIRECT, N_NAMED_ARGS) \\\n  ((CUM) = 0)\n \n-#define FUNCTION_ARG_ADVANCE(CUM, MODE, TYPE, NAMED)\t\\\n- ((CUM) += ((MODE) != BLKmode\t\t\t\\\n-\t    ? (GET_MODE_SIZE (MODE) + 3) & ~3\t\\\n-\t    : (int_size_in_bytes (TYPE) + 3) & ~3))\n-\n-/* On the m68k all args are always pushed.  */\n-#define FUNCTION_ARG(CUM, MODE, TYPE, NAMED) 0\n-\n #define FUNCTION_PROFILER(FILE, LABELNO)  \\\n   asm_fprintf (FILE, \"\\tlea %LLP%d,%Ra0\\n\\tjsr mcount\\n\", (LABELNO))\n "}]}