{"sha": "61b783995fac5355827ada1f8544052119a23606", "node_id": "C_kwDOANBUbNoAKDYxYjc4Mzk5NWZhYzUzNTU4MjdhZGExZjg1NDQwNTIxMTlhMjM2MDY", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-02-08T12:45:46Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2022-02-08T13:31:09Z"}, "message": "libstdc++: Adjust Filesystem TS test for Windows\n\nThe Filesystem TS isn't really supported for Windows, but the FAIL for\nthis test is just because it doesn't match what happens on Windows.\n\nlibstdc++-v3/ChangeLog:\n\n\t* testsuite/experimental/filesystem/operations/create_directories.cc:\n\tAdjust expected results for Windows.", "tree": {"sha": "ba42e47a27c1019ebb92f80c188c953d35f4447f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba42e47a27c1019ebb92f80c188c953d35f4447f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/61b783995fac5355827ada1f8544052119a23606", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61b783995fac5355827ada1f8544052119a23606", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61b783995fac5355827ada1f8544052119a23606", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61b783995fac5355827ada1f8544052119a23606/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5750952bec1e632d1f804f4a1bed2f74c0f3b189", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5750952bec1e632d1f804f4a1bed2f74c0f3b189", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5750952bec1e632d1f804f4a1bed2f74c0f3b189"}], "stats": {"total": 15, "additions": 15, "deletions": 0}, "files": [{"sha": "03060c6cbb33e97b6dcb99dba09d2b7d7c33524c", "filename": "libstdc++-v3/testsuite/experimental/filesystem/operations/create_directories.cc", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/61b783995fac5355827ada1f8544052119a23606/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Foperations%2Fcreate_directories.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/61b783995fac5355827ada1f8544052119a23606/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Foperations%2Fcreate_directories.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fexperimental%2Ffilesystem%2Foperations%2Fcreate_directories.cc?ref=61b783995fac5355827ada1f8544052119a23606", "patch": "@@ -108,8 +108,15 @@ test02()\n     VERIFY( !result );\n     VERIFY( ec == std::errc::not_a_directory );\n     result = create_directories(file.path/\"../bar\", ec);\n+#if defined(__MINGW32__) || defined(__MINGW64__)\n+    VERIFY( result );\n+    VERIFY( !ec );\n+    VERIFY( is_directory(dir.path/\"bar\") );\n+    remove(dir.path/\"bar\");\n+#else\n     VERIFY( !result );\n     VERIFY( ec );\n+#endif\n   }\n }\n \n@@ -120,11 +127,19 @@ test03()\n   const auto p = __gnu_test::nonexistent_path() / \"/\";\n   bool result = create_directories(p);\n   VERIFY( result );\n+#if defined(__MINGW32__) || defined(__MINGW64__)\n+  VERIFY( exists(p/\".\") ); // needed due to PR libstdc++/88881\n+#else\n   VERIFY( exists(p) );\n+#endif\n   remove(p);\n   result = create_directories(p/\"foo/\");\n   VERIFY( result );\n+#if defined(__MINGW32__) || defined(__MINGW64__)\n+  VERIFY( exists(p/\".\") ); // needed due to PR libstdc++/88881\n+#else\n   VERIFY( exists(p) );\n+#endif\n   VERIFY( exists(p/\"foo\") );\n   remove_all(p);\n }"}]}