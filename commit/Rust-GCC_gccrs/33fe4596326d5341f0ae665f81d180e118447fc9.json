{"sha": "33fe4596326d5341f0ae665f81d180e118447fc9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNmZTQ1OTYzMjZkNTM0MWYwYWU2NjVmODFkMTgwZTExODQ0N2ZjOQ==", "commit": {"author": {"name": "Mohan Embar", "email": "gnustuff@thisiscool.com", "date": "2003-11-24T15:14:23Z"}, "committer": {"name": "Mohan Embar", "email": "membar@gcc.gnu.org", "date": "2003-11-24T15:14:23Z"}, "message": "Make-lang.in: (java.install-common) Add symlink for $(target_noncanonical)-gcjh for native builds.\n\n\t* Make-lang.in: (java.install-common) Add\n\tsymlink for $(target_noncanonical)-gcjh for\n\tnative builds.\n\nFrom-SVN: r73875", "tree": {"sha": "1826677fffeec0fe9908a84effa7f45e2d300134", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1826677fffeec0fe9908a84effa7f45e2d300134"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33fe4596326d5341f0ae665f81d180e118447fc9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33fe4596326d5341f0ae665f81d180e118447fc9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33fe4596326d5341f0ae665f81d180e118447fc9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33fe4596326d5341f0ae665f81d180e118447fc9/comments", "author": null, "committer": null, "parents": [{"sha": "6c1e24d3a2a1b3dd13778dea5972a9445af771a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c1e24d3a2a1b3dd13778dea5972a9445af771a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c1e24d3a2a1b3dd13778dea5972a9445af771a7"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "4c7afaedb7b7070f9480d3d242c48cbd87fc7820", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33fe4596326d5341f0ae665f81d180e118447fc9/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33fe4596326d5341f0ae665f81d180e118447fc9/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=33fe4596326d5341f0ae665f81d180e118447fc9", "patch": "@@ -1,3 +1,9 @@\n+2003-11-24  Mohan Embar  <gnustuff@thisiscool.com>\n+\n+\t* Make-lang.in: (java.install-common) Add\n+\tsymlink for $(target_noncanonical)-gcjh for\n+\tnative builds.\n+\n 2003-11-20  Joseph S. Myers  <jsm@polyomino.org.uk>\n \n \t* Make-lang.in (java.extraclean): Delete."}, {"sha": "e7a5bae4fbeb795b4b97649095ade286a7341fd1", "filename": "gcc/java/Make-lang.in", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33fe4596326d5341f0ae665f81d180e118447fc9/gcc%2Fjava%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33fe4596326d5341f0ae665f81d180e118447fc9/gcc%2Fjava%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FMake-lang.in?ref=33fe4596326d5341f0ae665f81d180e118447fc9", "patch": "@@ -43,6 +43,7 @@\n # Actual names to use when installing a native compiler.\n JAVA_INSTALL_NAME = `echo gcj|sed '$(program_transform_name)'`\n JAVA_TARGET_INSTALL_NAME = $(target_noncanonical)-`echo gcj|sed '$(program_transform_name)'`\n+GCJH_TARGET_INSTALL_NAME = $(target_noncanonical)-`echo gcjh|sed '$(program_transform_name)'`\n \n # Actual names to use when installing a cross-compiler.\n JAVA_CROSS_NAME = `echo gcj|sed '$(program_transform_cross_name)'`\n@@ -179,6 +180,11 @@ check-java :\n # Nothing to do here.\n java.install-normal:\n \n+# Install gcj as well as the target-independent tools.\n+# For a native build, we special-case gcjh and also install\n+# its explicitly-prefixed variant. This allows us to write\n+# portable makefiles for both cross builds (where gcjh *must*\n+# be explicitly prefixed) and native builds.\n java.install-common: installdirs\n \t-if [ -f $(GCJ)$(exeext) ]; then \\\n \t  if [ -f $(GCJ)-cross$(exeext) ]; then \\\n@@ -200,6 +206,11 @@ java.install-common: installdirs\n \t    rm -f $(DESTDIR)$(bindir)/$$tool_transformed_name$(exeext); \\\n \t    $(INSTALL_PROGRAM) $$tool$(exeext) $(DESTDIR)$(bindir)/$$tool_transformed_name$(exeext); \\\n \t    chmod a+x $(DESTDIR)$(bindir)/$$tool_transformed_name$(exeext); \\\n+\t    if [ $$tool = gcjh ]; then \\\n+\t      rm -f $(DESTDIR)$(bindir)/$(GCJH_TARGET_INSTALL_NAME)$(exeext); \\\n+\t      ( cd $(DESTDIR)$(bindir) && \\\n+\t        $(LN) $$tool_transformed_name$(exeext) $(GCJH_TARGET_INSTALL_NAME)$(exeext) ); \\\n+\t    fi; \\\n           fi ; \\\n        done\n "}]}