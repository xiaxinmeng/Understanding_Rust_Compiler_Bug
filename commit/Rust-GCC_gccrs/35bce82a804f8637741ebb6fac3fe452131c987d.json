{"sha": "35bce82a804f8637741ebb6fac3fe452131c987d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzViY2U4MmE4MDRmODYzNzc0MWViYjZmYWMzZmU0NTIxMzFjOTg3ZA==", "commit": {"author": {"name": "Nicola Pero", "email": "nicola.pero@meta-innovation.com", "date": "2010-12-28T12:39:29Z"}, "committer": {"name": "Nicola Pero", "email": "nicola@gcc.gnu.org", "date": "2010-12-28T12:39:29Z"}, "message": "In gcc/objc/: 2010-12-28 Nicola Pero <nicola.pero@meta-innovation.com>\n\nIn gcc/objc/:\n2010-12-28  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n\t* objc-act.c (objc_start_category_interface): Produce an error if\n\ta class extension is found after the class @implementation.\n\nIn gcc/testsuite/:\n2010-12-28  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n\t* objc.dg/class-extension-4.m: New.\n\t* obj-c++.dg/class-extension-4.mm: New.\n\nFrom-SVN: r168294", "tree": {"sha": "06c6eb826aebfbc42cbcde31960ccc798313f917", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/06c6eb826aebfbc42cbcde31960ccc798313f917"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35bce82a804f8637741ebb6fac3fe452131c987d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35bce82a804f8637741ebb6fac3fe452131c987d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35bce82a804f8637741ebb6fac3fe452131c987d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35bce82a804f8637741ebb6fac3fe452131c987d/comments", "author": {"login": "Nico-31415", "id": 94470564, "node_id": "U_kgDOBaGBpA", "avatar_url": "https://avatars.githubusercontent.com/u/94470564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nico-31415", "html_url": "https://github.com/Nico-31415", "followers_url": "https://api.github.com/users/Nico-31415/followers", "following_url": "https://api.github.com/users/Nico-31415/following{/other_user}", "gists_url": "https://api.github.com/users/Nico-31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nico-31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nico-31415/subscriptions", "organizations_url": "https://api.github.com/users/Nico-31415/orgs", "repos_url": "https://api.github.com/users/Nico-31415/repos", "events_url": "https://api.github.com/users/Nico-31415/events{/privacy}", "received_events_url": "https://api.github.com/users/Nico-31415/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ecd815ac6be681098717d1347df7d670ee167337", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecd815ac6be681098717d1347df7d670ee167337", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecd815ac6be681098717d1347df7d670ee167337"}], "stats": {"total": 65, "additions": 65, "deletions": 0}, "files": [{"sha": "c7efb54cb9395d5813cf2323417a5a84375426d2", "filename": "gcc/objc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Fobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Fobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2FChangeLog?ref=35bce82a804f8637741ebb6fac3fe452131c987d", "patch": "@@ -1,3 +1,8 @@\n+2010-12-28  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* objc-act.c (objc_start_category_interface): Produce an error if\n+\ta class extension is found after the class @implementation.\n+\n 2010-12-28  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tPR objc/47073"}, {"sha": "1117967e71df81240b49dc7c791802881cf96e03", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=35bce82a804f8637741ebb6fac3fe452131c987d", "patch": "@@ -763,6 +763,23 @@ objc_start_category_interface (tree klass, tree categ,\n     {\n       if (flag_objc1_only)\n \terror_at (input_location, \"class extensions are not available in Objective-C 1.0\");\n+      else\n+\t{\n+\t  /* Iterate over all the classes and categories implemented\n+\t     up to now in this compilation unit.  */\n+\t  struct imp_entry *t;\n+\n+\t  for (t = imp_list; t; t = t->next)\n+\t    {\n+\t      /* If we find a class @implementation with the same name\n+\t\t as the one we are extending, produce an error.  */\n+\t    if (TREE_CODE (t->imp_context) == CLASS_IMPLEMENTATION_TYPE\n+\t\t&& IDENTIFIER_POINTER (CLASS_NAME (t->imp_context)) == IDENTIFIER_POINTER (klass))\n+\t      error_at (input_location, \n+\t\t\t\"class extension for class %qE declared after its %<@implementation%>\",\n+\t\t\tklass);\n+\t    }\n+\t}\n     }\n   objc_interface_context\n     = start_class (CATEGORY_INTERFACE_TYPE, klass, categ, protos, NULL_TREE);"}, {"sha": "ac141bd73e9eda4f5db5b739ae397286d257441f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=35bce82a804f8637741ebb6fac3fe452131c987d", "patch": "@@ -1,3 +1,8 @@\n+2010-12-28  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* objc.dg/class-extension-4.m: New.\n+\t* obj-c++.dg/class-extension-4.mm: New.\n+\n 2010-12-28  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tPR objc/47073"}, {"sha": "9e19aa70d3bd9d8c963930eecc556595b41ae3d8", "filename": "gcc/testsuite/obj-c++.dg/class-extension-4.mm", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fclass-extension-4.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fclass-extension-4.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fclass-extension-4.mm?ref=35bce82a804f8637741ebb6fac3fe452131c987d", "patch": "@@ -0,0 +1,19 @@\n+/* Contributed by Nicola Pero <nicola.pero@meta-innovation.com>, December 2010.  */\n+/* { dg-do compile } */\n+\n+/* This test tests you can not declare a class extension after the class @implementation.  */\n+\n+#include <objc/objc.h>\n+\n+@interface MyObject\n+{\n+  Class isa;\n+}\n+@end\n+\n+@implementation MyObject\n+@end\n+\n+@interface MyObject () /* { dg-error \"class extension for class .MyObject. declared after its ..implementation.\" } */\n+- (void) test;\n+@end"}, {"sha": "692a0fcbd0a828f8491793b9e73a07c108d91935", "filename": "gcc/testsuite/objc.dg/class-extension-4.m", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Ftestsuite%2Fobjc.dg%2Fclass-extension-4.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35bce82a804f8637741ebb6fac3fe452131c987d/gcc%2Ftestsuite%2Fobjc.dg%2Fclass-extension-4.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fclass-extension-4.m?ref=35bce82a804f8637741ebb6fac3fe452131c987d", "patch": "@@ -0,0 +1,19 @@\n+/* Contributed by Nicola Pero <nicola.pero@meta-innovation.com>, December 2010.  */\n+/* { dg-do compile } */\n+\n+/* This test tests you can not declare a class extension after the class @implementation.  */\n+\n+#include <objc/objc.h>\n+\n+@interface MyObject\n+{\n+  Class isa;\n+}\n+@end\n+\n+@implementation MyObject\n+@end\n+\n+@interface MyObject ()\n+- (void) test; /* { dg-error \"class extension for class .MyObject. declared after its ..implementation.\" } */\n+@end"}]}