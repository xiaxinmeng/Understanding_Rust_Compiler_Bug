{"sha": "03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNiZDA5NmIzYjE0ZDg5ODAxMzBjNmM2ZWU1ZWNjZjYzZmNhOWUzNw==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-06-22T21:02:19Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2009-06-22T21:02:19Z"}, "message": "re PR fortran/37254 (Reject valid PROCEDURE statement with implicit interface)\n\n2009-06-22  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/37254\n\tPR fortran/39850\n\t* interface.c (compare_parameter): Set implicit type for function\n\tactual arguments with BT_UNKNOWN.\n\n\n2009-06-22  Janus Weil  <janus@gcc.gnu.org>\n\n\tPR fortran/37254\n\tPR fortran/39850\n\t* gfortran.dg/interface_30.f90: Modified error message.\n\t* gfortran.dg/proc_decl_22.f90: New.\n\nFrom-SVN: r148816", "tree": {"sha": "520241a9afb08809d3512d9abdd9b26c088438a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/520241a9afb08809d3512d9abdd9b26c088438a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "34481f289c6844b496ead2a34200c5a6e13c3216", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34481f289c6844b496ead2a34200c5a6e13c3216", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34481f289c6844b496ead2a34200c5a6e13c3216"}], "stats": {"total": 54, "additions": 49, "deletions": 5}, "files": [{"sha": "cda349d35bbe57b852a23bafd410fd0e12b0106e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "patch": "@@ -1,3 +1,10 @@\n+2009-06-22  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/37254\n+\tPR fortran/39850\n+\t* interface.c (compare_parameter): Set implicit type for function\n+\tactual arguments with BT_UNKNOWN.\n+\n 2009-06-22  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/40472"}, {"sha": "c6da6f880ddc590a358f62ea289ad40cc24d5a1b", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "patch": "@@ -1407,9 +1407,14 @@ compare_parameter (gfc_symbol *formal, gfc_expr *actual,\n \t}\n \n       if (formal->attr.function && !act_sym->attr.function)\n-\tgfc_add_function (&act_sym->attr, act_sym->name, &act_sym->declared_at);\n-\n-      if (formal->attr.subroutine && !act_sym->attr.subroutine)\n+\t{\n+\t  gfc_add_function (&act_sym->attr, act_sym->name,\n+\t  &act_sym->declared_at);\n+\t  if (act_sym->ts.type == BT_UNKNOWN\n+\t      && gfc_set_default_type (act_sym, 1, act_sym->ns) == FAILURE)\n+\t    return 0;\n+\t}\n+      else if (formal->attr.subroutine && !act_sym->attr.subroutine)\n \tgfc_add_subroutine (&act_sym->attr, act_sym->name,\n \t\t\t    &act_sym->declared_at);\n "}, {"sha": "59918e1f40b0b7c79b393df458d0cf04decc6cfd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "patch": "@@ -1,3 +1,10 @@\n+2009-06-22  Janus Weil  <janus@gcc.gnu.org>\n+\n+\tPR fortran/37254\n+\tPR fortran/39850\n+\t* gfortran.dg/interface_30.f90: Modified error message.\n+\t* gfortran.dg/proc_decl_22.f90: New.\n+\n 2009-06-22  Ian Lance Taylor  <iant@google.com>\n \n \t* gcc.dg/Wcxx-compat-19.c: New testcase."}, {"sha": "cfea7068ab2aa99f6f1add6b0109b5720918d23c", "filename": "gcc/testsuite/gfortran.dg/interface_30.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_30.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_30.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Finterface_30.f90?ref=03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "patch": "@@ -15,9 +15,9 @@ program test\n   call sub1(func1)\n   call sub2(func2)\n   call sub1(func3)\n-  call sub2(func3)  ! { dg-error \"Type mismatch in argument\" }\n+  call sub2(func3)  ! { dg-error \"is not a subroutine\" }\n   call sub2(func4)\n-  call sub1(func4)  ! { dg-error \"Interface mismatch in dummy procedure\" }\n+  call sub1(func4)  ! { dg-error \"is not a function\" }\n contains\n   subroutine sub1(a1)\n     interface"}, {"sha": "40060061aef4c3a71b5fdc722c0659e947ee2159", "filename": "gcc/testsuite/gfortran.dg/proc_decl_22.f90", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_22.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03bd096b3b14d8980130c6c6ee5eccf63fca9e37/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_22.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fproc_decl_22.f90?ref=03bd096b3b14d8980130c6c6ee5eccf63fca9e37", "patch": "@@ -0,0 +1,25 @@\n+! { dg-do compile }\n+!\n+! PR 37254: Reject valid PROCEDURE statement with implicit interface\n+!\n+! Original test case by Dominique d'Humieres <dominiq@lps.ens.fr>\n+! Modified by Janus Weil <janus@gcc.gnu.org>\n+\n+  real function proc3( arg1 )\n+     integer :: arg1\n+     proc3 = arg1+7\n+  end function proc3\n+\n+program myProg\n+  PROCEDURE () :: proc3\n+  call proc4( proc3 )\n+\n+contains\n+\n+  subroutine proc4( arg1 )\n+     PROCEDURE(real) :: arg1\n+     print*, 'the func: ', arg1(0)\n+  end subroutine proc4\n+\n+end program myProg\n+"}]}