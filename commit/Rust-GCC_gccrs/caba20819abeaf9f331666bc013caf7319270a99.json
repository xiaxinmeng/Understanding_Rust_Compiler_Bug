{"sha": "caba20819abeaf9f331666bc013caf7319270a99", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2FiYTIwODE5YWJlYWY5ZjMzMTY2NmJjMDEzY2FmNzMxOTI3MGE5OQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-08-10T08:56:34Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-08-10T08:56:34Z"}, "message": "re PR c++/22256 (diagnostic shows wrong type for conversion operator)\n\n/cp\n2007-08-10  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/22256\n\t* decl.c (check_special_function_return_type): Just error\n\ton return type specified for conversion operator.\n\n/testsuite\n2007-08-10  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/22256\n\t* g++.dg/conversion/op3.C: New.\n\nFrom-SVN: r127331", "tree": {"sha": "d505c4057607c958f9e3c17961f7b0576ca4dc66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d505c4057607c958f9e3c17961f7b0576ca4dc66"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/caba20819abeaf9f331666bc013caf7319270a99", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caba20819abeaf9f331666bc013caf7319270a99", "html_url": "https://github.com/Rust-GCC/gccrs/commit/caba20819abeaf9f331666bc013caf7319270a99", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/caba20819abeaf9f331666bc013caf7319270a99/comments", "author": null, "committer": null, "parents": [{"sha": "d184f9d90b453676e964aa44fa83630b5fff8e03", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d184f9d90b453676e964aa44fa83630b5fff8e03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d184f9d90b453676e964aa44fa83630b5fff8e03"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "1260e10a78a27ed4ca06ed98365320b38334f008", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=caba20819abeaf9f331666bc013caf7319270a99", "patch": "@@ -1,3 +1,9 @@\n+2007-08-10  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/22256\n+\t* decl.c (check_special_function_return_type): Just error\n+\ton return type specified for conversion operator.\n+\n 2007-08-09  Daniel Berlin  <dberlin@dberlin.org>\n \n \t* typeck2.c (readonly_error): Handle general expressions."}, {"sha": "1740ed30b3b277a94357daac81e016e1d0e9978d", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=caba20819abeaf9f331666bc013caf7319270a99", "patch": "@@ -6993,10 +6993,8 @@ check_special_function_return_type (special_function_kind sfk,\n       break;\n \n     case sfk_conversion:\n-      if (type && !same_type_p (type, optype))\n-\terror (\"operator %qT declared to return %qT\", optype, type);\n-      else if (type)\n-\tpedwarn (\"return type specified for %<operator %T%>\",  optype);\n+      if (type)\n+\terror (\"return type specified for %<operator %T%>\",  optype);\n       type = optype;\n       break;\n "}, {"sha": "8046b9441742b18e1264323407465d9ca11637c4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=caba20819abeaf9f331666bc013caf7319270a99", "patch": "@@ -1,3 +1,8 @@\n+2007-08-10  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/22256\n+\t* g++.dg/conversion/op3.C: New.\n+\n 2007-08-09  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/32987"}, {"sha": "a01cdcf7617d6d385f97b5ca9e283b9a855bdb4a", "filename": "gcc/testsuite/g++.dg/conversion/op3.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconversion%2Fop3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/caba20819abeaf9f331666bc013caf7319270a99/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconversion%2Fop3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconversion%2Fop3.C?ref=caba20819abeaf9f331666bc013caf7319270a99", "patch": "@@ -0,0 +1,3 @@\n+// PR c++/22256\n+\n+struct node { int* operator int*(); }; // { dg-error \"return type specified\" }"}]}