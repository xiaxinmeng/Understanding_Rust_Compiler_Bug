{"sha": "698a5e79875a9966ea13a95cc4c8eec92efad7ef", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njk4YTVlNzk4NzVhOTk2NmVhMTNhOTVjYzRjOGVlYzkyZWZhZDdlZg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@act-europe.fr", "date": "2003-10-22T15:13:11Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2003-10-22T15:13:11Z"}, "message": "re PR ada/10110 ([mipsel-linux]ada bootstrap error)\n\n\t* Makefile.in: Disable build of gnatpa. PR ada/10110.\n\t* cstreams.c (__gnat_full_name): Minor improvements and clean up\n\tof previous change.\n\nFrom-SVN: r72800", "tree": {"sha": "f5b4eb644e643973998c85d1fa47dcfbadc4b121", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f5b4eb644e643973998c85d1fa47dcfbadc4b121"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/698a5e79875a9966ea13a95cc4c8eec92efad7ef", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/698a5e79875a9966ea13a95cc4c8eec92efad7ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/698a5e79875a9966ea13a95cc4c8eec92efad7ef", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/698a5e79875a9966ea13a95cc4c8eec92efad7ef/comments", "author": null, "committer": null, "parents": [{"sha": "a354c7d675cad0dfd66d559e19555cd9fdd37897", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a354c7d675cad0dfd66d559e19555cd9fdd37897", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a354c7d675cad0dfd66d559e19555cd9fdd37897"}], "stats": {"total": 30, "additions": 15, "deletions": 15}, "files": [{"sha": "15eee43fd7e6d4a74c7cb1f1d2ce878a10787b51", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/698a5e79875a9966ea13a95cc4c8eec92efad7ef/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/698a5e79875a9966ea13a95cc4c8eec92efad7ef/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=698a5e79875a9966ea13a95cc4c8eec92efad7ef", "patch": "@@ -1,3 +1,9 @@\n+2003-10-22  Arnaud Charlet  <charlet@act-europe.fr>\n+\n+\t* Makefile.in: Disable build of gnatpa. PR ada/10110.\n+\t* cstreams.c (__gnat_full_name): Minor improvements and clean up\n+\tof previous change.\n+\n 2003-10-22  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \n \t* tracebak.c (MAX): Avoid redefinition warning."}, {"sha": "f56cfff44bd4b2f3afaba4888ccbb50ab18d267a", "filename": "gcc/ada/cstreams.c", "status": "modified", "additions": 9, "deletions": 15, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/698a5e79875a9966ea13a95cc4c8eec92efad7ef/gcc%2Fada%2Fcstreams.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/698a5e79875a9966ea13a95cc4c8eec92efad7ef/gcc%2Fada%2Fcstreams.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fcstreams.c?ref=698a5e79875a9966ea13a95cc4c8eec92efad7ef", "patch": "@@ -140,37 +140,35 @@ int    __gnat_constant_seek_end = SEEK_END;\n int    __gnat_constant_seek_set = SEEK_SET;\n \n FILE *\n-__gnat_constant_stderr ()\n+__gnat_constant_stderr (void)\n {\n   return stderr;\n }\n \n FILE *\n-__gnat_constant_stdin ()\n+__gnat_constant_stdin (void)\n {\n   return stdin;\n }\n \n FILE *\n-__gnat_constant_stdout ()\n+__gnat_constant_stdout (void)\n {\n   return stdout;\n }\n \n char *\n-__gnat_full_name (nam, buffer)\n-     char *nam;\n-     char *buffer;\n+__gnat_full_name (char *nam, char *buffer)\n {\n #if defined(__EMX__) || defined (__MINGW32__)\n-  char *p;\n-\n   /* If this is a device file return it as is; under Windows NT and\n      OS/2 a device file end with \":\".  */\n   if (nam[strlen (nam) - 1] == ':')\n     strcpy (buffer, nam);\n   else\n     {\n+      char *p;\n+\n       _fullpath (buffer, nam, __gnat_max_path_len);\n \n       for (p = buffer; *p; p++)\n@@ -189,7 +187,6 @@ __gnat_full_name (nam, buffer)\n      getcwd approach instead. */\n   realpath (nam, buffer);\n \n-  return buffer;\n #elif defined (VMS)\n   strncpy (buffer, __gnat_to_canonical_file_spec (nam), __gnat_max_path_len);\n \n@@ -207,14 +204,11 @@ __gnat_full_name (nam, buffer)\n       strncpy (buffer, __gnat_to_host_file_spec (buffer), __gnat_max_path_len);\n     }\n \n-  return buffer;\n-\n #else\n-  char *p;\n-\n   if (nam[0] != '/')\n     {\n-      p = getcwd (buffer, __gnat_max_path_len);\n+      char *p = getcwd (buffer, __gnat_max_path_len);\n+\n       if (p == 0)\n \t{\n \t  buffer[0] = '\\0';\n@@ -230,7 +224,7 @@ __gnat_full_name (nam, buffer)\n     }\n   else\n     strcpy (buffer, nam);\n+#endif\n \n   return buffer;\n-#endif\n }"}]}