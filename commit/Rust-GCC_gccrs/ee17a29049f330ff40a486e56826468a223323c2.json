{"sha": "ee17a29049f330ff40a486e56826468a223323c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUxN2EyOTA0OWYzMzBmZjQwYTQ4NmU1NjgyNjQ2OGEyMjMzMjNjMg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-09-12T22:09:36Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-09-12T22:09:36Z"}, "message": "re GNATS gcj/343 (can't cast array to serializable)\n\n\tFix for PR gcj/343:\n\t* lex.c (java_init_lex): Initialize java_io_serializable.\n\t* parse.y (java_io_serializable): New global.\n\t(valid_ref_assignconv_cast_p): An array can be cast to\n\tserializable.\n\nFrom-SVN: r36376", "tree": {"sha": "0b6153fc2bd82325e0920acb3e0484fd0a0b659f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0b6153fc2bd82325e0920acb3e0484fd0a0b659f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee17a29049f330ff40a486e56826468a223323c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee17a29049f330ff40a486e56826468a223323c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee17a29049f330ff40a486e56826468a223323c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee17a29049f330ff40a486e56826468a223323c2/comments", "author": null, "committer": null, "parents": [{"sha": "635a2a90714353ec2cb81138a59924d5a67fcb30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/635a2a90714353ec2cb81138a59924d5a67fcb30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/635a2a90714353ec2cb81138a59924d5a67fcb30"}], "stats": {"total": 29, "additions": 24, "deletions": 5}, "files": [{"sha": "642f4a79164c3960c081b196cdd22ab3a28d4667", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee17a29049f330ff40a486e56826468a223323c2/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee17a29049f330ff40a486e56826468a223323c2/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=ee17a29049f330ff40a486e56826468a223323c2", "patch": "@@ -1,3 +1,11 @@\n+2000-09-12  Tom Tromey  <tromey@cygnus.com>\n+\n+\tFix for PR gcj/343:\n+\t* lex.c (java_init_lex): Initialize java_io_serializable.\n+\t* parse.y (java_io_serializable): New global.\n+\t(valid_ref_assignconv_cast_p): An array can be cast to\n+\tserializable.\n+\n 2000-09-10  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* decl.c, expr.c: Include defaults.h if not already included."}, {"sha": "535733fe2e2309bcf5a36c44fd5c860194a802c6", "filename": "gcc/java/lex.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee17a29049f330ff40a486e56826468a223323c2/gcc%2Fjava%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee17a29049f330ff40a486e56826468a223323c2/gcc%2Fjava%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flex.c?ref=ee17a29049f330ff40a486e56826468a223323c2", "patch": "@@ -72,6 +72,8 @@ java_init_lex ()\n     java_lang_id = get_identifier (\"java.lang\");\n   if (!java_lang_cloneable)\n     java_lang_cloneable = get_identifier (\"java.lang.Cloneable\");\n+  if (!java_io_serializable)\n+    java_io_serializable = get_identifier (\"java.io.Serializable\");\n   if (!inst_id)\n     inst_id = get_identifier (\"inst$\");\n   if (!wpv_id)"}, {"sha": "9c92e58242aa402997afea9c156e181df439a259", "filename": "gcc/java/parse.y", "status": "modified", "additions": 14, "deletions": 5, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee17a29049f330ff40a486e56826468a223323c2/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee17a29049f330ff40a486e56826468a223323c2/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=ee17a29049f330ff40a486e56826468a223323c2", "patch": "@@ -387,6 +387,9 @@ static tree inst_id = NULL_TREE;\n /* The \"java.lang.Cloneable\" qualified name.  */\n static tree java_lang_cloneable = NULL_TREE;\n \n+/* The \"java.io.Serializable\" qualified name.  */\n+static tree java_io_serializable = NULL_TREE; \n+\n /* Context and flag for static blocks */\n static tree current_static_block = NULL_TREE;\n \n@@ -12304,18 +12307,24 @@ valid_ref_assignconv_cast_p (source, dest, cast)\n \t  else\n \t    return source == dest || interface_of_p (dest, source);\n \t}\n-      else\t\t\t/* Array */\n-\treturn (cast ? \n-\t\t(DECL_NAME (TYPE_NAME (source)) == java_lang_cloneable) : 0);\n+      else\n+\t{\n+\t  /* Array */\n+\t  return (cast\n+\t\t  && (DECL_NAME (TYPE_NAME (source)) == java_lang_cloneable\n+\t\t      || (DECL_NAME (TYPE_NAME (source))\n+\t\t\t  == java_io_serializable)));\n+\t}\n     }\n   if (TYPE_ARRAY_P (source))\n     {\n       if (TYPE_CLASS_P (dest))\n \treturn dest == object_type_node;\n       /* Can't cast an array to an interface unless the interface is\n-\t java.lang.Cloneable */\n+\t java.lang.Cloneable or java.io.Serializable.  */\n       if (TYPE_INTERFACE_P (dest))\n-\treturn (DECL_NAME (TYPE_NAME (dest)) == java_lang_cloneable ? 1 : 0);\n+\treturn (DECL_NAME (TYPE_NAME (dest)) == java_lang_cloneable\n+\t\t|| DECL_NAME (TYPE_NAME (dest)) == java_io_serializable);\n       else\t\t\t/* Arrays */\n \t{\n \t  tree source_element_type = TYPE_ARRAY_ELEMENT (source);"}]}