{"sha": "d8b7ec41b57618f6a7e9d02942ac36b309cbeac9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDhiN2VjNDFiNTc2MThmNmE3ZTlkMDI5NDJhYzM2YjMwOWNiZWFjOQ==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2004-04-04T21:44:41Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2004-04-04T21:44:41Z"}, "message": "cse.c (cse_insn): Correct usage of simplify_replace_rtx when updating the REG_EQUAL note on an...\n\n\n\t* cse.c (cse_insn): Correct usage of simplify_replace_rtx when\n\tupdating the REG_EQUAL note on an insn's libcall_insn.\n\nFrom-SVN: r80400", "tree": {"sha": "80230eaf8180e7da392b456e733302e1bce34852", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80230eaf8180e7da392b456e733302e1bce34852"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9/comments", "author": null, "committer": null, "parents": [{"sha": "4012b7db1e8fd64e72dfaec3a9fcbc73deb2ec42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4012b7db1e8fd64e72dfaec3a9fcbc73deb2ec42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4012b7db1e8fd64e72dfaec3a9fcbc73deb2ec42"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "fcfbfdccee9b674d6326ee8f2d10295afc0f906b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d8b7ec41b57618f6a7e9d02942ac36b309cbeac9", "patch": "@@ -1,3 +1,8 @@\n+2004-04-04  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* cse.c (cse_insn): Correct usage of simplify_replace_rtx when\n+\tupdating the REG_EQUAL note on an insn's libcall_insn.\n+\n 2004-04-04  Roger Sayle  <roger@eyesopen.com>\n \n \t* df.h: Tidy up whitespace in the definitions of the DF_ flags."}, {"sha": "0a7281ecc426b4bbe75c00eabd4b714e6b19faa9", "filename": "gcc/cse.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9/gcc%2Fcse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d8b7ec41b57618f6a7e9d02942ac36b309cbeac9/gcc%2Fcse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcse.c?ref=d8b7ec41b57618f6a7e9d02942ac36b309cbeac9", "patch": "@@ -5402,8 +5402,13 @@ cse_insn (rtx insn, rtx libcall_insn)\n \t\t  && (GET_CODE (sets[i].orig_src) == REG\n \t\t      || GET_CODE (sets[i].orig_src) == SUBREG\n \t\t      || GET_CODE (sets[i].orig_src) == MEM))\n-\t\tsimplify_replace_rtx (REG_NOTES (libcall_insn),\n-\t\t\t\t      sets[i].orig_src, copy_rtx (new));\n+\t\t{\n+\t          rtx note = find_reg_equal_equiv_note (libcall_insn);\n+\t\t  if (note != 0)\n+\t\t    XEXP (note, 0) = simplify_replace_rtx (XEXP (note, 0),\n+\t\t\t\t\t\t\t   sets[i].orig_src,\n+\t\t\t\t\t\t\t   copy_rtx (new));\n+\t\t}\n \n \t      /* The result of apply_change_group can be ignored; see\n \t\t canon_reg.  */"}]}