{"sha": "39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzljMWI2ZGJmNTBmMmU2MzQyMDkzNjViNGZiMGI4YTJiOGVkZmJiZg==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2013-04-04T15:48:25Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2013-04-04T15:48:25Z"}, "message": "re PR tree-optimization/48186 (ICE: SIGFPE (division by zero) in maybe_hot_frequency_p at predict.c:129 with --param hot-bb-frequency-fraction=0 on basic code)\n\n        PR tree-optimization/48186\n        * predict.c (maybe_hot_frequency_p): Return false if\n        HOT_BB_FREQUENCY_FRACTION is 0.\n        (cgraph_maybe_hot_edge_p): Likewise.\n\n        * gcc.dg/pr48186.c: New test.\n\nFrom-SVN: r197487", "tree": {"sha": "a8aa0c1aee04fa4517748ac0f2623d515377254b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8aa0c1aee04fa4517748ac0f2623d515377254b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "314f64eb7d26e60585c0b5e2f8496d7cb1a81187", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/314f64eb7d26e60585c0b5e2f8496d7cb1a81187", "html_url": "https://github.com/Rust-GCC/gccrs/commit/314f64eb7d26e60585c0b5e2f8496d7cb1a81187"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "d3011094285d2b50ce5448f3fd94977c2b13b0f0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "patch": "@@ -1,3 +1,10 @@\n+2013-04-04  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR tree-optimization/48186\n+\t* predict.c (maybe_hot_frequency_p): Return false if\n+\tHOT_BB_FREQUENCY_FRACTION is 0.\n+\t(cgraph_maybe_hot_edge_p): Likewise.\n+\n 2013-04-04  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/56826"}, {"sha": "1871976d99b5fb2099d9637be2cd4697bd067391", "filename": "gcc/predict.c", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2Fpredict.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2Fpredict.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpredict.c?ref=39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "patch": "@@ -122,6 +122,8 @@ maybe_hot_frequency_p (struct function *fun, int freq)\n   if (node->frequency == NODE_FREQUENCY_EXECUTED_ONCE\n       && freq < (ENTRY_BLOCK_PTR_FOR_FUNCTION (fun)->frequency * 2 / 3))\n     return false;\n+  if (PARAM_VALUE (HOT_BB_FREQUENCY_FRACTION) == 0)\n+    return false;\n   if (freq < (ENTRY_BLOCK_PTR_FOR_FUNCTION (fun)->frequency\n \t      / PARAM_VALUE (HOT_BB_FREQUENCY_FRACTION)))\n     return false;\n@@ -202,10 +204,13 @@ cgraph_maybe_hot_edge_p (struct cgraph_edge *edge)\n   if (edge->caller->frequency == NODE_FREQUENCY_EXECUTED_ONCE\n       && edge->frequency < CGRAPH_FREQ_BASE * 3 / 2)\n     return false;\n-  if (flag_guess_branch_prob\n-      && edge->frequency <= (CGRAPH_FREQ_BASE\n-      \t\t\t     / PARAM_VALUE (HOT_BB_FREQUENCY_FRACTION)))\n-    return false;\n+  if (flag_guess_branch_prob)\n+    {\n+      if (PARAM_VALUE (HOT_BB_FREQUENCY_FRACTION) == 0\n+\t  || edge->frequency <= (CGRAPH_FREQ_BASE\n+\t\t\t\t / PARAM_VALUE (HOT_BB_FREQUENCY_FRACTION)))\n+        return false;\n+    }\n   return true;\n }\n "}, {"sha": "b2ca50b4729f54bcfb221f579d311933c214d933", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "patch": "@@ -1,3 +1,8 @@\n+2013-04-04  Marek Polacek  <polacek@redhat.com>\n+\n+\tPR tree-optimization/48186\n+\t* gcc.dg/pr48186.c: New test.\n+\n 2013-04-04  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/56826"}, {"sha": "5635f930de312d0b8e3d8a3f9b152a07443e6b0f", "filename": "gcc/testsuite/gcc.dg/pr48186.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2Ftestsuite%2Fgcc.dg%2Fpr48186.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf/gcc%2Ftestsuite%2Fgcc.dg%2Fpr48186.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr48186.c?ref=39c1b6dbf50f2e634209365b4fb0b8a2b8edfbbf", "patch": "@@ -0,0 +1,5 @@\n+/* PR tree-optimization/48186 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O --param hot-bb-frequency-fraction=0\" } */\n+\n+void foo (void) { }"}]}