{"sha": "184179f1834363a901d50a31610d51045b6976c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTg0MTc5ZjE4MzQzNjNhOTAxZDUwYTMxNjEwZDUxMDQ1YjY5NzZjMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2013-05-26T08:32:34Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-05-26T08:32:34Z"}, "message": "decl.c (gnat_to_gnu_entity): Always build the UNC variable for aliased objects with unconstrained nominal...\n\n\t* gcc-interface/decl.c (gnat_to_gnu_entity) <object>: Always build the\n\tUNC variable for aliased objects with unconstrained nominal subtype.\n\nFrom-SVN: r199335", "tree": {"sha": "26512d5a4f50145a70ef1b623681145b3078bf56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26512d5a4f50145a70ef1b623681145b3078bf56"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/184179f1834363a901d50a31610d51045b6976c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/184179f1834363a901d50a31610d51045b6976c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/184179f1834363a901d50a31610d51045b6976c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/184179f1834363a901d50a31610d51045b6976c1/comments", "author": null, "committer": null, "parents": [{"sha": "13716008f80a6b594aa98245354f95c9d36f6c15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/13716008f80a6b594aa98245354f95c9d36f6c15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/13716008f80a6b594aa98245354f95c9d36f6c15"}], "stats": {"total": 36, "additions": 17, "deletions": 19}, "files": [{"sha": "7c421738e4535539f2a246b343d4d069a4cf5284", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/184179f1834363a901d50a31610d51045b6976c1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/184179f1834363a901d50a31610d51045b6976c1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=184179f1834363a901d50a31610d51045b6976c1", "patch": "@@ -1,3 +1,8 @@\n+2013-05-26  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity) <object>: Always build the\n+\tUNC variable for aliased objects with unconstrained nominal subtype.\n+\n 2013-05-24  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/gigi.h (gnat_init_gcc_fp): Declare."}, {"sha": "bf334da576145b1141c553ba4bf56f1672e47cb5", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 12, "deletions": 19, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/184179f1834363a901d50a31610d51045b6976c1/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/184179f1834363a901d50a31610d51045b6976c1/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=184179f1834363a901d50a31610d51045b6976c1", "patch": "@@ -1411,26 +1411,19 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t       just above, we have nothing to do here.  */\n \t    if (!TYPE_IS_THIN_POINTER_P (gnu_type))\n \t      {\n-\t        gnu_size = NULL_TREE;\n-\t\tused_by_ref = true;\n+\t\ttree gnu_unc_var\n+\t\t   = create_var_decl (concat_name (gnu_entity_name, \"UNC\"),\n+\t\t\t\t      NULL_TREE, gnu_type, gnu_expr,\n+\t\t\t\t      const_flag, Is_Public (gnat_entity),\n+\t\t\t\t      imported_p || !definition, static_p,\n+\t\t\t\t      NULL, gnat_entity);\n+\t\tgnu_expr\n+\t\t  = build_unary_op (ADDR_EXPR, NULL_TREE, gnu_unc_var);\n+\t\tTREE_CONSTANT (gnu_expr) = 1;\n \n-\t\tif (definition && !imported_p)\n-\t\t  {\n-\t\t    tree gnu_unc_var\n-\t\t      = create_var_decl (concat_name (gnu_entity_name, \"UNC\"),\n-\t\t\t\t\t NULL_TREE, gnu_type, gnu_expr,\n-\t\t\t\t\t const_flag, Is_Public (gnat_entity),\n-\t\t\t\t\t false, static_p, NULL, gnat_entity);\n-\t\t    gnu_expr\n-\t\t      = build_unary_op (ADDR_EXPR, NULL_TREE, gnu_unc_var);\n-\t\t    TREE_CONSTANT (gnu_expr) = 1;\n-\t\t    const_flag = true;\n-\t\t  }\n-\t\telse\n-\t\t  {\n-\t\t    gnu_expr = NULL_TREE;\n-\t\t    const_flag = false;\n-\t\t  }\n+\t\tgnu_size = NULL_TREE;\n+\t\tused_by_ref = true;\n+\t\tconst_flag = true;\n \t      }\n \n \t    gnu_type"}]}