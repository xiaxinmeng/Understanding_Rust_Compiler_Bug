{"sha": "f70f60db2c6c1d3149477e24db4caed9d78fd905", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjcwZjYwZGIyYzZjMWQzMTQ5NDc3ZTI0ZGI0Y2FlZDlkNzhmZDkwNQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1994-12-20T14:31:20Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1994-12-20T14:31:20Z"}, "message": "Build libgcc.a\n\nFrom-SVN: r8674", "tree": {"sha": "7f1eeaf9e8bc91f1738882842a7e804795845059", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f1eeaf9e8bc91f1738882842a7e804795845059"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f70f60db2c6c1d3149477e24db4caed9d78fd905", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f70f60db2c6c1d3149477e24db4caed9d78fd905", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f70f60db2c6c1d3149477e24db4caed9d78fd905", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f70f60db2c6c1d3149477e24db4caed9d78fd905/comments", "author": null, "committer": null, "parents": [{"sha": "e29b094c19077c35203f298fb195d150cf579c81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e29b094c19077c35203f298fb195d150cf579c81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e29b094c19077c35203f298fb195d150cf579c81"}], "stats": {"total": 116, "additions": 115, "deletions": 1}, "files": [{"sha": "f8a99586e1e717c32f27408bfb11da67db36e1fe", "filename": "gcc/config/msdos/configur.bat", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Fconfigur.bat", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Fconfigur.bat", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsdos%2Fconfigur.bat?ref=f70f60db2c6c1d3149477e24db4caed9d78fd905", "patch": "@@ -12,7 +12,7 @@ update config\\i386\\i386.md md\n update config\\i386\\i386.c aux-output.c\r\n \r\n echo # Makefile generated by \"configure.bat\"> Makefile\r\n-echo all.dos: cccp cc1 cc1obj xgcc s-objlist >> Makefile\r\n+echo all.dos: cccp cc1 cc1obj xgcc libgcc.a s-objlist >> Makefile\r\n sed -f config/msdos/top.sed Makefile.in >> Makefile\r\n \r\n set LANG=\r"}, {"sha": "5f480b152d37a705f6229ff4459baee436a45237", "filename": "gcc/config/msdos/libgcc.mak", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Flibgcc.mak", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Flibgcc.mak", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsdos%2Flibgcc.mak?ref=f70f60db2c6c1d3149477e24db4caed9d78fd905", "patch": "@@ -0,0 +1,14 @@\n+# Build libgcc.a\r\n+\r\n+libgcc.a : libgcc1.c libgcc2.c mklibgcc\r\n+\t./mklibgcc -c\r\n+\t./mklibgcc '$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES)' libgcc1.c $(LIB1FUNCS)\r\n+\t./mklibgcc '$(CC) -c $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES)' libgcc2.c $(LIB2FUNCS)\r\n+\t-command /c mklibnow.bat\r\n+\t-command /c del libgcc.a\r\n+\tar rvs libgcc.a lgcctmp/*.o\r\n+\r\n+mklibgcc : config/msdos/mklibgcc.c\r\n+\tgcc $(CFLAGS) $^ -o $@\r\n+\r\n+\f\r"}, {"sha": "705b3d5c4046c3e97d7f14631918762fea0662ad", "filename": "gcc/config/msdos/mklibgcc.c", "status": "added", "additions": 98, "deletions": 0, "changes": 98, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Fmklibgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Fmklibgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsdos%2Fmklibgcc.c?ref=f70f60db2c6c1d3149477e24db4caed9d78fd905", "patch": "@@ -0,0 +1,98 @@\n+#include <stdio.h>\r\n+#include <string.h>\r\n+#include <dirent.h>\r\n+\r\n+char *skips[] = {\r\n+  \"__main\",\r\n+  \"_ctors\",\r\n+  \"_exit\",\r\n+  \"_ctor_list\",\r\n+  \"_dtor_list\",\r\n+  0\r\n+};\r\n+\r\n+int\r\n+do_clean()\r\n+{\r\n+  DIR *dir;\r\n+  struct dirent *de;\r\n+  remove(\"mklibnow.bat\");\r\n+\r\n+  dir = opendir(\"lgcctmp\");\r\n+  if (!dir)\r\n+    return 0;\r\n+  while ((de=readdir(dir)))\r\n+  {\r\n+    char buf[30];\r\n+    if (de->d_name[0] == '.')\r\n+      continue;\r\n+    sprintf(buf, \"lgcctmp/%s\", de->d_name);\r\n+    unlink(buf);\r\n+  }\r\n+  closedir(dir);\r\n+  return 0;\r\n+}\r\n+\r\n+int\r\n+main(int argc, char **argv)\r\n+{\r\n+  char *cc = argv[1];\r\n+  char *csrc=argv[2];\r\n+  int i;\r\n+  FILE *batfile;\r\n+  FILE *cfile;\r\n+\r\n+  if (argc > 1 && strcmp(argv[1], \"-c\")==0)\r\n+    return do_clean();\r\n+\r\n+  mkdir(\"lgcctmp\", 0755);\r\n+\r\n+  batfile = fopen(\"mklibnow.bat\", \"a\");\r\n+  if (!batfile)\r\n+  {\r\n+    perror(\"mklibnow.bat\");\r\n+    return 1;\r\n+  }\r\n+  fprintf(batfile, \"@echo off\\n\");\r\n+\r\n+  for (i=3; i<argc; i++)\r\n+  {\r\n+    char basename[30], *bp;\r\n+    int s;\r\n+    for (s=0; skips[s]; s++)\r\n+      if (strcmp(skips[s], argv[i]) == 0)\r\n+\tbreak;\r\n+    if (skips[s])\r\n+      continue;\r\n+    strcpy(basename, \"lgcctmp/\");\r\n+    if (strncmp(argv[i], \"_fix\", 4)==0)\r\n+    {\r\n+      strcat(basename, \"fx\");\r\n+      strcat(basename, argv[i]+4);\r\n+    }\r\n+    else if (strncmp(argv[i], \"_float\", 4)==0)\r\n+    {\r\n+      strcat(basename, \"flt\");\r\n+      strcat(basename, argv[i]+6);\r\n+    }\r\n+    else\r\n+    {\r\n+      strcat(basename, argv[i]);\r\n+    }\r\n+    bp = basename + strlen(basename);\r\n+    fprintf(batfile, \"%s -c %s.c -o %s.o\\n\", cc, basename, basename);\r\n+    strcpy(bp, \".c\");\r\n+    cfile = fopen(basename, \"w\");\r\n+    if (cfile)\r\n+    {\r\n+      *bp = 0;\r\n+      fprintf(cfile, \"#define L%s\\n#include \\\"%s\\\"\\n\", argv[i], csrc);\r\n+      fclose(cfile);\r\n+    }\r\n+    else\r\n+      perror(basename);\r\n+  }\r\n+\r\n+  fclose(batfile);\r\n+  return 0;\r\n+}\r"}, {"sha": "fc0de4b94492bd75976e56d1b87b297e052d4924", "filename": "gcc/config/msdos/top.sed", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Ftop.sed", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f70f60db2c6c1d3149477e24db4caed9d78fd905/gcc%2Fconfig%2Fmsdos%2Ftop.sed", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsdos%2Ftop.sed?ref=f70f60db2c6c1d3149477e24db4caed9d78fd905", "patch": "@@ -36,3 +36,5 @@ s/tmp-/t-/g\n s/^\\(SUBDIR_OBSTACK *=\\).*$/\\1 ..\\/obstack.o/\n s/^\\(SUBDIR_USE_ALLOCA *=\\).*$/\\1/\n s/^\\(SUBDIR_MALLOC *=\\).*$/\\1/\n+/^# Build libgcc.a/ r config/msdos/libgcc.mak\n+/^# Build libgcc.a/,/\f/ d"}]}