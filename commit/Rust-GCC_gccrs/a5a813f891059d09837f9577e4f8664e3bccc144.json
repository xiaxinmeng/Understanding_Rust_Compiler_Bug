{"sha": "a5a813f891059d09837f9577e4f8664e3bccc144", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVhODEzZjg5MTA1OWQwOTgzN2Y5NTc3ZTRmODY2NGUzYmNjYzE0NA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2005-08-13T23:44:14Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2005-08-13T23:44:14Z"}, "message": "Makefile.in (extra_ldflags_libobjc): New.\n\n2005-08-13  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        * Makefile.in (extra_ldflags_libobjc): New.\n        (libobjc$(libext).la): Add extra_ldflags_libobjc to the link line.\n        (libobjc_gc$(libext).la): Likewise.\n        * configure.ac (extra_ldflags_libgfortran): Set for *-darwin* to\n        \"-Wl,-single_module\".\n        * configure: Regenerate.\n        * linking.m (_objcInit): Remove.\n\nFrom-SVN: r103064", "tree": {"sha": "61dfb21612d6b2c4459838f77213e464ac26fffd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61dfb21612d6b2c4459838f77213e464ac26fffd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5a813f891059d09837f9577e4f8664e3bccc144", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5a813f891059d09837f9577e4f8664e3bccc144", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5a813f891059d09837f9577e4f8664e3bccc144", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5a813f891059d09837f9577e4f8664e3bccc144/comments", "author": null, "committer": null, "parents": [{"sha": "4f5dce2b358b6b05de478ee0bbbaf8ec4ee9a432", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f5dce2b358b6b05de478ee0bbbaf8ec4ee9a432", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f5dce2b358b6b05de478ee0bbbaf8ec4ee9a432"}], "stats": {"total": 47, "additions": 36, "deletions": 11}, "files": [{"sha": "ecd56859a85d399259afa24e86231c80aaabe5f5", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=a5a813f891059d09837f9577e4f8664e3bccc144", "patch": "@@ -1,3 +1,13 @@\n+2005-08-13  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\t* Makefile.in (extra_ldflags_libobjc): New.\n+\t(libobjc$(libext).la): Add extra_ldflags_libobjc to the link line.\n+\t(libobjc_gc$(libext).la): Likewise.\n+\t* configure.ac (extra_ldflags_libgfortran): Set for *-darwin* to\n+\t\"-Wl,-single_module\".\n+\t* configure: Regenerate.\n+\t* linking.m (_objcInit): Remove.\n+\n 2005-07-26  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \tPR libobjc/22606"}, {"sha": "b9c216bc80e6cb1e9d306a4861a9986c2c70b26d", "filename": "libobjc/Makefile.in", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FMakefile.in?ref=a5a813f891059d09837f9577e4f8664e3bccc144", "patch": "@@ -44,6 +44,8 @@ toolexeclibdir = @toolexeclibdir@\n includedirname = @includedirname@\n libext = @libext@\n \n+extra_ldflags_libobjc = @extra_ldflags_libobjc@\n+\n top_builddir = .\n \n libdir = $(exec_prefix)/lib\n@@ -271,12 +273,12 @@ doc: info dvi html\n libobjc$(libext).la: $(OBJS)\n \t$(LIBTOOL_LINK) $(CC) -o $@ $(OBJS) \\\n \t\t-rpath $(toolexeclibdir) \\\n-\t\t-version-info $(LIBOBJC_VERSION)\n+\t\t-version-info $(LIBOBJC_VERSION) $(extra_ldflags_libobjc)\n \n libobjc_gc$(libext).la: $(OBJS_GC)\n \t$(LIBTOOL_LINK) $(CC) -o $@ $(OBJS_GC) \\\n \t\t-rpath $(toolexeclibdir) \\\n-\t\t-version-info $(LIBOBJC_GC_VERSION)\n+\t\t-version-info $(LIBOBJC_GC_VERSION) $(extra_ldflags_libobjc)\n \n #\n # FIXME -- The following part does not fit in the libtool context. "}, {"sha": "f28e0c41e26dd5e031e5c11d7330408c51b876c4", "filename": "libobjc/configure", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure?ref=a5a813f891059d09837f9577e4f8664e3bccc144", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir VERSION OBJC_BOEHM_GC toplevel_srcdir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical glibcpp_srcdir toolexecdir toolexeclibdir includedirname libext CC ac_ct_CC EXEEXT OBJEXT CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LN_S STRIP ac_ct_STRIP LIBTOOL SET_MAKE CPP CPPFLAGS EGREP LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os build_subdir host_subdir target_subdir VERSION OBJC_BOEHM_GC toplevel_srcdir host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical glibcpp_srcdir toolexecdir toolexeclibdir includedirname libext CC ac_ct_CC EXEEXT OBJEXT extra_ldflags_libobjc CFLAGS AS ac_ct_AS AR ac_ct_AR RANLIB ac_ct_RANLIB INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT LN_S STRIP ac_ct_STRIP LIBTOOL SET_MAKE CPP CPPFLAGS EGREP LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -2612,6 +2612,15 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n \n+# extra LD Flags which are required for targets\n+case \"${host}\" in\n+  *-darwin*)\n+    # Darwin needs -single_module when linking libobjc\n+    extra_ldflags_libobjc=-Wl,-single_module\n+    ;;\n+esac\n+\n+\n \n \n if test -n \"$ac_tool_prefix\"; then\n@@ -3756,7 +3765,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 3759 \"configure\"' > conftest.$ac_ext\n+  echo '#line 3768 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -5184,7 +5193,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then\n   :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 5187 \"configure\"\n+#line 5196 \"configure\"\n @interface Frob\n @end\n @implementation Frob\n@@ -5916,6 +5925,7 @@ s,@CC@,$CC,;t t\n s,@ac_ct_CC@,$ac_ct_CC,;t t\n s,@EXEEXT@,$EXEEXT,;t t\n s,@OBJEXT@,$OBJEXT,;t t\n+s,@extra_ldflags_libobjc@,$extra_ldflags_libobjc,;t t\n s,@CFLAGS@,$CFLAGS,;t t\n s,@AS@,$AS,;t t\n s,@ac_ct_AS@,$ac_ct_AS,;t t"}, {"sha": "bf5fe7b903b0ae8aed5bd0facf689458a023499d", "filename": "libobjc/configure.ac", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fconfigure.ac?ref=a5a813f891059d09837f9577e4f8664e3bccc144", "patch": "@@ -178,6 +178,15 @@ m4_define([_AC_ARG_VAR_PRECIOUS],[])\n AC_PROG_CC\n m4_rename([real_PRECIOUS],[_AC_ARG_VAR_PRECIOUS])\n \n+# extra LD Flags which are required for targets\n+case \"${host}\" in\n+  *-darwin*)\n+    # Darwin needs -single_module when linking libobjc\n+    extra_ldflags_libobjc=-Wl,-single_module\n+    ;;\n+esac\n+AC_SUBST(extra_ldflags_libobjc)\n+\n AC_SUBST(CFLAGS)\n \n AC_CHECK_TOOL(AS, as)"}, {"sha": "a54ae012356ce0cc1130ea667f911171a0b23164", "filename": "libobjc/linking.m", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2Flinking.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a813f891059d09837f9577e4f8664e3bccc144/libobjc%2Flinking.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Flinking.m?ref=a5a813f891059d09837f9577e4f8664e3bccc144", "patch": "@@ -38,9 +38,3 @@ void __objc_linking (void)\n   [NXConstantString name];\n }\n \n-#ifdef __APPLE__\n-void _objcInit(void)\n-{\n-}\n-#endif\n-"}]}