{"sha": "c616e51b000fcbc426ce51a92688c775493906e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzYxNmU1MWIwMDBmY2JjNDI2Y2U1MWE5MjY4OGM3NzU0OTM5MDZlMA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-01-29T21:05:58Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-01-29T21:05:58Z"}, "message": "007-01-29  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\t* c-decl.c (pop_scope): Replace warnings with call to\n\twarn_for_unused_label.\n\t* c-common.h (warn_for_unused_label): Declare.\n\t* c-common.c (warn_for_unused_label): Define.\ncp/\n\t* decl.c (pop_label): Replace warning with call to\n\twarn_for_unused_label.\n\nFrom-SVN: r121310", "tree": {"sha": "d2e910056e5bca216a5240901b18a528d2b8fe28", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d2e910056e5bca216a5240901b18a528d2b8fe28"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c616e51b000fcbc426ce51a92688c775493906e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c616e51b000fcbc426ce51a92688c775493906e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c616e51b000fcbc426ce51a92688c775493906e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c616e51b000fcbc426ce51a92688c775493906e0/comments", "author": null, "committer": null, "parents": [{"sha": "971005966f30c246ab1cfcaa537497a852d1be52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/971005966f30c246ab1cfcaa537497a852d1be52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/971005966f30c246ab1cfcaa537497a852d1be52"}], "stats": {"total": 40, "additions": 31, "deletions": 9}, "files": [{"sha": "2137c70f1bc9990944cf9bf90a504be7010ff62d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c616e51b000fcbc426ce51a92688c775493906e0", "patch": "@@ -1,3 +1,10 @@\n+007-01-29  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\t* c-decl.c (pop_scope): Replace warnings with call to\n+\twarn_for_unused_label.\n+\t* c-common.h (warn_for_unused_label): Declare.\n+\t* c-common.c (warn_for_unused_label): Define.\n+\n 2007-01-29  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \t* tree-optimize.c (update_inlined_to_pointers): Delete unused"}, {"sha": "1bd59ff5e227ae7056be37fe61a43b6086074480", "filename": "gcc/c-common.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=c616e51b000fcbc426ce51a92688c775493906e0", "patch": "@@ -6758,5 +6758,18 @@ warn_about_parentheses (enum tree_code code, enum tree_code code_left,\n \t     \"have their mathematical meaning\");\n }\n \n+/* If LABEL (a LABEL_DECL) has not been used, issue a warning.  */\n+\n+void\n+warn_for_unused_label (tree label)\n+{\n+  if (!TREE_USED (label))\n+    {\n+      if (DECL_INITIAL (label))\n+\twarning (OPT_Wunused_label, \"label %q+D defined but not used\", label);\n+      else\n+        warning (OPT_Wunused_label, \"label %q+D declared but not defined\", label);\n+    }\n+}\n \n #include \"gt-c-common.h\""}, {"sha": "5ad4582d24034c9137ecf0f674814d88b2f9573a", "filename": "gcc/c-common.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.h?ref=c616e51b000fcbc426ce51a92688c775493906e0", "patch": "@@ -868,6 +868,7 @@ extern tree builtin_type_for_size (int, bool);\n extern void warn_array_subscript_with_type_char (tree);\n extern void warn_about_parentheses (enum tree_code, enum tree_code,\n \t\t\t\t    enum tree_code);\n+extern void warn_for_unused_label (tree label);\n \n \n /* In c-gimplify.c  */"}, {"sha": "2f9ffc3b62203b4a6a2e156881e5f9d2b37244e5", "filename": "gcc/c-decl.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=c616e51b000fcbc426ce51a92688c775493906e0", "patch": "@@ -761,13 +761,9 @@ pop_scope (void)\n \t      error (\"label %q+D used but not defined\", p);\n \t      DECL_INITIAL (p) = error_mark_node;\n \t    }\n-\t  else if (!TREE_USED (p) && warn_unused_label)\n-\t    {\n-\t      if (DECL_INITIAL (p))\n-\t\twarning (0, \"label %q+D defined but not used\", p);\n-\t      else\n-\t\twarning (0, \"label %q+D declared but not defined\", p);\n-\t    }\n+\t  else \n+\t    warn_for_unused_label (p);\n+\n \t  /* Labels go in BLOCK_VARS.  */\n \t  TREE_CHAIN (p) = BLOCK_VARS (block);\n \t  BLOCK_VARS (block) = p;"}, {"sha": "0746d6af30b0e644c29b95cd08cab634ccad1a01", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c616e51b000fcbc426ce51a92688c775493906e0", "patch": "@@ -1,3 +1,8 @@\n+2007-01-29  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\t* decl.c (pop_label): Replace warning with call to\n+\twarn_for_unused_label.\n+\n 2007-01-28  Andrew Pinski  <pinskia@gmail.com>\n \n \tPR C++/28988"}, {"sha": "cea649ad7316d9282bcd0ccaea1e690bcc893e3b", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c616e51b000fcbc426ce51a92688c775493906e0/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=c616e51b000fcbc426ce51a92688c775493906e0", "patch": "@@ -365,8 +365,8 @@ pop_label (tree label, tree old_value)\n \t  /* Avoid crashing later.  */\n \t  define_label (location, DECL_NAME (label));\n \t}\n-      else if (!TREE_USED (label))\n-\twarning (OPT_Wunused_label, \"label %q+D defined but not used\", label);\n+      else \n+\twarn_for_unused_label (label);\n     }\n \n   SET_IDENTIFIER_LABEL_VALUE (DECL_NAME (label), old_value);"}]}