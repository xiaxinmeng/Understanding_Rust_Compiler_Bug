{"sha": "eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWFlZTAyYTUyMGM3ZDU2MTljMzEwY2I0M2ZmYzVhNThjODljY2RjNw==", "commit": {"author": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-11-06T21:36:54Z"}, "committer": {"name": "Janus Weil", "email": "janus@gcc.gnu.org", "date": "2011-11-06T21:36:54Z"}, "message": "gfortran.h (gfc_extend_expr): Modified prototype.\n\n2011-11-06  Janus Weil  <janus@gcc.gnu.org>\n\n\t* gfortran.h (gfc_extend_expr): Modified prototype.\n\t* interface.c (gfc_extend_expr): Return 'match' instead of 'gfc_try'.\n\tRemove argument 'real_error'.\n\t* resolve.c (resolve_operator): Modified call to 'gfc_extend_expr'.\n\nFrom-SVN: r181044", "tree": {"sha": "5c2b289cb9d0de3d7f37994ef9efba47a95760a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c2b289cb9d0de3d7f37994ef9efba47a95760a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/comments", "author": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "janusw", "id": 484108, "node_id": "MDQ6VXNlcjQ4NDEwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/484108?v=4", "gravatar_id": "", "url": "https://api.github.com/users/janusw", "html_url": "https://github.com/janusw", "followers_url": "https://api.github.com/users/janusw/followers", "following_url": "https://api.github.com/users/janusw/following{/other_user}", "gists_url": "https://api.github.com/users/janusw/gists{/gist_id}", "starred_url": "https://api.github.com/users/janusw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/janusw/subscriptions", "organizations_url": "https://api.github.com/users/janusw/orgs", "repos_url": "https://api.github.com/users/janusw/repos", "events_url": "https://api.github.com/users/janusw/events{/privacy}", "received_events_url": "https://api.github.com/users/janusw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "9965f21f9ce932dd77935cd0375085571e8dffa0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9965f21f9ce932dd77935cd0375085571e8dffa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9965f21f9ce932dd77935cd0375085571e8dffa0"}], "stats": {"total": 39, "additions": 20, "deletions": 19}, "files": [{"sha": "707611242c65121e3146862f36a5e88b7d097235", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "patch": "@@ -1,3 +1,10 @@\n+2011-11-06  Janus Weil  <janus@gcc.gnu.org>\n+\n+\t* gfortran.h (gfc_extend_expr): Modified prototype.\n+\t* interface.c (gfc_extend_expr): Return 'match' instead of 'gfc_try'.\n+\tRemove argument 'real_error'.\n+\t* resolve.c (resolve_operator): Modified call to 'gfc_extend_expr'.\n+\n 2011-11-06  Andrew MacLeod  <amacleod@redhat.com>\n \t    Aldy Hernandez  <aldyh@redhat.com>\n "}, {"sha": "17ebd58e50fbe434fec92cef9ddd7b32ebcde1e1", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "patch": "@@ -2831,7 +2831,7 @@ void gfc_procedure_use (gfc_symbol *, gfc_actual_arglist **, locus *);\n void gfc_ppc_use (gfc_component *, gfc_actual_arglist **, locus *);\n gfc_symbol *gfc_search_interface (gfc_interface *, int,\n \t\t\t\t  gfc_actual_arglist **);\n-gfc_try gfc_extend_expr (gfc_expr *, bool *);\n+match gfc_extend_expr (gfc_expr *);\n void gfc_free_formal_arglist (gfc_formal_arglist *);\n gfc_try gfc_extend_assign (gfc_code *, gfc_namespace *);\n gfc_try gfc_add_interface (gfc_symbol *);"}, {"sha": "90d98c759ddfff45d229f0d39e08f37d19cf4176", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 9, "deletions": 14, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "patch": "@@ -3221,12 +3221,11 @@ build_compcall_for_operator (gfc_expr* e, gfc_actual_arglist* actual,\n    with the operator.  This subroutine builds an actual argument list\n    corresponding to the operands, then searches for a compatible\n    interface.  If one is found, the expression node is replaced with\n-   the appropriate function call.\n-   real_error is an additional output argument that specifies if FAILURE\n-   is because of some real error and not because no match was found.  */\n+   the appropriate function call. We use the 'match' enum to specify\n+   whether a replacement has been made or not, or if an error occurred.  */\n \n-gfc_try\n-gfc_extend_expr (gfc_expr *e, bool *real_error)\n+match\n+gfc_extend_expr (gfc_expr *e)\n {\n   gfc_actual_arglist *actual;\n   gfc_symbol *sym;\n@@ -3240,7 +3239,6 @@ gfc_extend_expr (gfc_expr *e, bool *real_error)\n   actual = gfc_get_actual_arglist ();\n   actual->expr = e->value.op.op1;\n \n-  *real_error = false;\n   gname = NULL;\n \n   if (e->value.op.op2 != NULL)\n@@ -3344,16 +3342,16 @@ gfc_extend_expr (gfc_expr *e, bool *real_error)\n \n \t  result = gfc_resolve_expr (e);\n \t  if (result == FAILURE)\n-\t    *real_error = true;\n+\t    return MATCH_ERROR;\n \n-\t  return result;\n+\t  return MATCH_YES;\n \t}\n \n       /* Don't use gfc_free_actual_arglist().  */\n       free (actual->next);\n       free (actual);\n \n-      return FAILURE;\n+      return MATCH_NO;\n     }\n \n   /* Change the expression node to a function call.  */\n@@ -3366,12 +3364,9 @@ gfc_extend_expr (gfc_expr *e, bool *real_error)\n   e->user_operator = 1;\n \n   if (gfc_resolve_expr (e) == FAILURE)\n-    {\n-      *real_error = true;\n-      return FAILURE;\n-    }\n+    return MATCH_ERROR;\n \n-  return SUCCESS;\n+  return MATCH_YES;\n }\n \n "}, {"sha": "ab251b57e7001fd13103efdf1fe96ce0fd5428ad", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eaee02a520c7d5619c310cb43ffc5a58c89ccdc7/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=eaee02a520c7d5619c310cb43ffc5a58c89ccdc7", "patch": "@@ -4034,11 +4034,10 @@ resolve_operator (gfc_expr *e)\n bad_op:\n \n   {\n-    bool real_error;\n-    if (gfc_extend_expr (e, &real_error) == SUCCESS)\n+    match m = gfc_extend_expr (e);\n+    if (m == MATCH_YES)\n       return SUCCESS;\n-\n-    if (real_error)\n+    if (m == MATCH_ERROR)\n       return FAILURE;\n   }\n "}]}