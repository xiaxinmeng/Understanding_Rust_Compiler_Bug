{"sha": "b715bc599a55f42755101f1976a9c599308f27f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjcxNWJjNTk5YTU1ZjQyNzU1MTAxZjE5NzZhOWM1OTkzMDhmMjdmOQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-02T13:02:09Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-08-02T13:02:09Z"}, "message": "[multiple changes]\n\n2011-08-02  Gary Dismukes  <dismukes@adacore.com>\n\n\t* sem_ch3.adb (Complete_Private_Subtype): Don't append the private\n\tsubtype's list of rep items to the list on the full subtype in the case\n\twhere the lists are the same.\n\n2011-08-02  Geert Bosch  <bosch@adacore.com>\n\n\t* switch-c.adb (Free): New deallocation procedure to avoid implicitly\n\tusing the one from System.Strings, which also deallocates all strings.\n\nFrom-SVN: r177142", "tree": {"sha": "0794f8a1ad59378b34751b72f4f664705ecc3625", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0794f8a1ad59378b34751b72f4f664705ecc3625"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b715bc599a55f42755101f1976a9c599308f27f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b715bc599a55f42755101f1976a9c599308f27f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b715bc599a55f42755101f1976a9c599308f27f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b715bc599a55f42755101f1976a9c599308f27f9/comments", "author": null, "committer": null, "parents": [{"sha": "002bdd685cc819e9a1609c97d5f2281f6109b297", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/002bdd685cc819e9a1609c97d5f2281f6109b297", "html_url": "https://github.com/Rust-GCC/gccrs/commit/002bdd685cc819e9a1609c97d5f2281f6109b297"}], "stats": {"total": 23, "additions": 21, "deletions": 2}, "files": [{"sha": "7495e774ef737755cbadd2633af30d45b7a389d7", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b715bc599a55f42755101f1976a9c599308f27f9/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b715bc599a55f42755101f1976a9c599308f27f9/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b715bc599a55f42755101f1976a9c599308f27f9", "patch": "@@ -1,3 +1,14 @@\n+2011-08-02  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* sem_ch3.adb (Complete_Private_Subtype): Don't append the private\n+\tsubtype's list of rep items to the list on the full subtype in the case\n+\twhere the lists are the same.\n+\n+2011-08-02  Geert Bosch  <bosch@adacore.com>\n+\n+\t* switch-c.adb (Free): New deallocation procedure to avoid implicitly\n+\tusing the one from System.Strings, which also deallocates all strings.\n+\n 2011-08-02  Geert Bosch  <bosch@adacore.com>\n \n \t* gcc-interface/gigi.h, gcc-interface/misc.c (enumerate_modes): New"}, {"sha": "30fb8782d2e26598a7a51716242208f018107b00", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b715bc599a55f42755101f1976a9c599308f27f9/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b715bc599a55f42755101f1976a9c599308f27f9/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=b715bc599a55f42755101f1976a9c599308f27f9", "patch": "@@ -10167,9 +10167,12 @@ package body Sem_Ch3 is\n          if No (Item) then\n             Set_First_Rep_Item (Full, First_Rep_Item (Priv));\n \n-         --  Else search to end of items currently linked to the full subtype\n+         --  Otherwise, search to the end of items currently linked to the full\n+         --  subtype and append the private items to the end. However, if Priv\n+         --  and Full already have the same list of rep items, then the append\n+         --  is not done, as that would create a circularity.\n \n-         else\n+         elsif Item /= First_Rep_Item (Priv) then\n             loop\n                Next_Item := Next_Rep_Item (Item);\n                exit when No (Next_Item);"}, {"sha": "177f53687b605815993b384ff614b1f78093cbe3", "filename": "gcc/ada/switch-c.adb", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b715bc599a55f42755101f1976a9c599308f27f9/gcc%2Fada%2Fswitch-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b715bc599a55f42755101f1976a9c599308f27f9/gcc%2Fada%2Fswitch-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-c.adb?ref=b715bc599a55f42755101f1976a9c599308f27f9", "patch": "@@ -35,6 +35,7 @@ with Validsw;  use Validsw;\n with Stylesw;  use Stylesw;\n with Warnsw;   use Warnsw;\n \n+with Ada.Unchecked_Deallocation;\n with System.WCh_Con; use System.WCh_Con;\n \n package body Switch.C is\n@@ -45,6 +46,10 @@ package body Switch.C is\n    procedure Add_Symbol_Definition (Def : String);\n    --  Add a symbol definition from the command line\n \n+   procedure Free is\n+      new Ada.Unchecked_Deallocation (String_List, String_List_Access);\n+   --  Avoid using System.Strings.Free, which also frees the designated strings\n+\n    function Switch_Subsequently_Cancelled\n      (C        : String;\n       Args     : String_List;"}]}