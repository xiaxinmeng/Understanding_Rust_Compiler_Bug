{"sha": "67ce74926a1ca6d3711af868d3b48cf4022de498", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdjZTc0OTI2YTFjYTZkMzcxMWFmODY4ZDNiNDhjZjQwMjJkZTQ5OA==", "commit": {"author": {"name": "Keith Seitz", "email": "keiths@redhat.com", "date": "2006-10-28T18:36:16Z"}, "committer": {"name": "Keith Seitz", "email": "kseitz@gcc.gnu.org", "date": "2006-10-28T18:36:16Z"}, "message": "Makefile.am (nat_source_files): Add natBreakpoint.cc.\n\n        * Makefile.am (nat_source_files): Add natBreakpoint.cc.\n        * sources.am: Regenerated.\n        * Makefile.in: Regenerated.\n        * gnu/gcj/jvmti/Breakpoint.java: New file.\n        * gnu/gcj/jvmti/natBreakpoint.java: New file.\n\nFrom-SVN: r118108", "tree": {"sha": "85d1c21742147fab25bce911f97f22afe25c6b61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85d1c21742147fab25bce911f97f22afe25c6b61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67ce74926a1ca6d3711af868d3b48cf4022de498", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67ce74926a1ca6d3711af868d3b48cf4022de498", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67ce74926a1ca6d3711af868d3b48cf4022de498", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67ce74926a1ca6d3711af868d3b48cf4022de498/comments", "author": {"login": "shtiek", "id": 107581324, "node_id": "U_kgDOBmmPjA", "avatar_url": "https://avatars.githubusercontent.com/u/107581324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shtiek", "html_url": "https://github.com/shtiek", "followers_url": "https://api.github.com/users/shtiek/followers", "following_url": "https://api.github.com/users/shtiek/following{/other_user}", "gists_url": "https://api.github.com/users/shtiek/gists{/gist_id}", "starred_url": "https://api.github.com/users/shtiek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shtiek/subscriptions", "organizations_url": "https://api.github.com/users/shtiek/orgs", "repos_url": "https://api.github.com/users/shtiek/repos", "events_url": "https://api.github.com/users/shtiek/events{/privacy}", "received_events_url": "https://api.github.com/users/shtiek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "22ba88ef4b11703fc7a0bfacaae08f411570d48f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22ba88ef4b11703fc7a0bfacaae08f411570d48f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22ba88ef4b11703fc7a0bfacaae08f411570d48f"}], "stats": {"total": 184, "additions": 179, "deletions": 5}, "files": [{"sha": "2ab86a26528466914aa3406b35d747ac97d802b5", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=67ce74926a1ca6d3711af868d3b48cf4022de498", "patch": "@@ -1,3 +1,11 @@\n+2006-10-28  Keith Seitz  <keiths@redhat.com>\n+\n+\t* Makefile.am (nat_source_files): Add natBreakpoint.cc.\n+\t* sources.am: Regenerated.\n+\t* Makefile.in: Regenerated.\n+\t* gnu/gcj/jvmti/Breakpoint.java: New file.\n+\t* gnu/gcj/jvmti/natBreakpoint.java: New file.\n+\n 2006-10-27  Keith Seitz  <keiths@redhat.com>\n \n \t* include/java-stack.h (ncodeMap): Declare."}, {"sha": "a1c041a51b14afc13adb8b59b31baf7468ae591e", "filename": "libjava/Makefile.am", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=67ce74926a1ca6d3711af868d3b48cf4022de498", "patch": "@@ -818,6 +818,7 @@ gnu/gcj/convert/natOutput_EUCJIS.cc \\\n gnu/gcj/convert/natOutput_SJIS.cc \\\n gnu/gcj/io/natSimpleSHSStream.cc \\\n gnu/gcj/io/shs.cc \\\n+gnu/gcj/jvmti/natBreakpoint.cc \\\n gnu/gcj/runtime/natFinalizerThread.cc \\\n gnu/gcj/runtime/natSharedLibLoader.cc \\\n gnu/gcj/runtime/natSystemClassLoader.cc \\"}, {"sha": "b3d6cbc5af9bd24246eaa1573c97d251d2679b55", "filename": "libjava/Makefile.in", "status": "modified", "additions": 38, "deletions": 5, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=67ce74926a1ca6d3711af868d3b48cf4022de498", "patch": "@@ -149,9 +149,9 @@ am__DEPENDENCIES_1 = gnu/awt.lo gnu/awt/j2d.lo gnu/classpath.lo \\\n \tgnu/classpath/jdwp/exception.lo gnu/classpath/jdwp/id.lo \\\n \tgnu/classpath/jdwp/processor.lo \\\n \tgnu/classpath/jdwp/transport.lo gnu/classpath/jdwp/util.lo \\\n-\tgnu/gcj.lo gnu/gcj/convert.lo gnu/gcj/io.lo gnu/gcj/runtime.lo \\\n-\tgnu/gcj/util.lo gnu/java/awt.lo gnu/java/awt/color.lo \\\n-\tgnu/java/awt/dnd.lo gnu/java/awt/font.lo \\\n+\tgnu/gcj.lo gnu/gcj/convert.lo gnu/gcj/io.lo gnu/gcj/jvmti.lo \\\n+\tgnu/gcj/runtime.lo gnu/gcj/util.lo gnu/java/awt.lo \\\n+\tgnu/java/awt/color.lo gnu/java/awt/dnd.lo gnu/java/awt/font.lo \\\n \tgnu/java/awt/font/opentype.lo \\\n \tgnu/java/awt/font/opentype/truetype.lo gnu/java/awt/image.lo \\\n \tgnu/java/awt/java2d.lo gnu/java/awt/peer.lo \\\n@@ -275,6 +275,7 @@ am__libgcj_la_SOURCES_DIST = prims.cc jni.cc jvmti.cc exception.cc \\\n \tgnu/gcj/convert/natOutput_EUCJIS.cc \\\n \tgnu/gcj/convert/natOutput_SJIS.cc \\\n \tgnu/gcj/io/natSimpleSHSStream.cc gnu/gcj/io/shs.cc \\\n+\tgnu/gcj/jvmti/natBreakpoint.cc \\\n \tgnu/gcj/runtime/natFinalizerThread.cc \\\n \tgnu/gcj/runtime/natSharedLibLoader.cc \\\n \tgnu/gcj/runtime/natSystemClassLoader.cc \\\n@@ -322,6 +323,7 @@ am__objects_2 = gnu/classpath/natSystemProperties.lo \\\n \tgnu/gcj/convert/natOutput_EUCJIS.lo \\\n \tgnu/gcj/convert/natOutput_SJIS.lo \\\n \tgnu/gcj/io/natSimpleSHSStream.lo gnu/gcj/io/shs.lo \\\n+\tgnu/gcj/jvmti/natBreakpoint.lo \\\n \tgnu/gcj/runtime/natFinalizerThread.lo \\\n \tgnu/gcj/runtime/natSharedLibLoader.lo \\\n \tgnu/gcj/runtime/natSystemClassLoader.lo \\\n@@ -1213,6 +1215,10 @@ gnu/gcj/io/MimeTypes.java \\\n gnu/gcj/io/SimpleSHSStream.java\n \n gnu_gcj_io_header_files = $(patsubst %.java,%.h,$(gnu_gcj_io_source_files))\n+gnu_gcj_jvmti_source_files = \\\n+gnu/gcj/jvmti/Breakpoint.java\n+\n+gnu_gcj_jvmti_header_files = $(patsubst %.java,%.h,$(gnu_gcj_jvmti_source_files))\n gnu_gcj_runtime_source_files = \\\n gnu/gcj/runtime/BootClassLoader.java \\\n gnu/gcj/runtime/ExtensionClassLoader.java \\\n@@ -6772,6 +6778,7 @@ all_packages_source_files = \\\n   gnu/gcj.list \\\n   gnu/gcj/convert.list \\\n   gnu/gcj/io.list \\\n+  gnu/gcj/jvmti.list \\\n   gnu/gcj/runtime.list \\\n   gnu/gcj/util.list \\\n   gnu/java/awt.list \\\n@@ -7003,6 +7010,7 @@ ordinary_header_files = \\\n   $(gnu_gcj_header_files) \\\n   $(gnu_gcj_convert_header_files) \\\n   $(gnu_gcj_io_header_files) \\\n+  $(gnu_gcj_jvmti_header_files) \\\n   $(gnu_gcj_runtime_header_files) \\\n   $(gnu_gcj_util_header_files) \\\n   $(gnu_java_awt_header_files) \\\n@@ -7381,6 +7389,7 @@ gnu/gcj/convert/natOutput_EUCJIS.cc \\\n gnu/gcj/convert/natOutput_SJIS.cc \\\n gnu/gcj/io/natSimpleSHSStream.cc \\\n gnu/gcj/io/shs.cc \\\n+gnu/gcj/jvmti/natBreakpoint.cc \\\n gnu/gcj/runtime/natFinalizerThread.cc \\\n gnu/gcj/runtime/natSharedLibLoader.cc \\\n gnu/gcj/runtime/natSystemClassLoader.cc \\\n@@ -7759,6 +7768,14 @@ gnu/gcj/io/natSimpleSHSStream.lo: gnu/gcj/io/$(am__dirstamp) \\\n \tgnu/gcj/io/$(DEPDIR)/$(am__dirstamp)\n gnu/gcj/io/shs.lo: gnu/gcj/io/$(am__dirstamp) \\\n \tgnu/gcj/io/$(DEPDIR)/$(am__dirstamp)\n+gnu/gcj/jvmti/$(am__dirstamp):\n+\t@$(mkdir_p) gnu/gcj/jvmti\n+\t@: > gnu/gcj/jvmti/$(am__dirstamp)\n+gnu/gcj/jvmti/$(DEPDIR)/$(am__dirstamp):\n+\t@$(mkdir_p) gnu/gcj/jvmti/$(DEPDIR)\n+\t@: > gnu/gcj/jvmti/$(DEPDIR)/$(am__dirstamp)\n+gnu/gcj/jvmti/natBreakpoint.lo: gnu/gcj/jvmti/$(am__dirstamp) \\\n+\tgnu/gcj/jvmti/$(DEPDIR)/$(am__dirstamp)\n gnu/gcj/runtime/$(am__dirstamp):\n \t@$(mkdir_p) gnu/gcj/runtime\n \t@: > gnu/gcj/runtime/$(am__dirstamp)\n@@ -8116,6 +8133,8 @@ mostlyclean-compile:\n \t-rm -f gnu/gcj/io/natSimpleSHSStream.lo\n \t-rm -f gnu/gcj/io/shs.$(OBJEXT)\n \t-rm -f gnu/gcj/io/shs.lo\n+\t-rm -f gnu/gcj/jvmti/natBreakpoint.$(OBJEXT)\n+\t-rm -f gnu/gcj/jvmti/natBreakpoint.lo\n \t-rm -f gnu/gcj/natCore.$(OBJEXT)\n \t-rm -f gnu/gcj/natCore.lo\n \t-rm -f gnu/gcj/runtime/natFinalizerThread.$(OBJEXT)\n@@ -8308,6 +8327,7 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/convert/$(DEPDIR)/natOutput_SJIS.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/io/$(DEPDIR)/natSimpleSHSStream.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/io/$(DEPDIR)/shs.Plo@am__quote@\n+@AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/jvmti/$(DEPDIR)/natBreakpoint.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/runtime/$(DEPDIR)/natFinalizerThread.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/runtime/$(DEPDIR)/natSharedLibLoader.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@gnu/gcj/runtime/$(DEPDIR)/natStringBuffer.Plo@am__quote@\n@@ -8638,6 +8658,7 @@ clean-libtool:\n \t-rm -rf gnu/gcj/.libs gnu/gcj/_libs\n \t-rm -rf gnu/gcj/convert/.libs gnu/gcj/convert/_libs\n \t-rm -rf gnu/gcj/io/.libs gnu/gcj/io/_libs\n+\t-rm -rf gnu/gcj/jvmti/.libs gnu/gcj/jvmti/_libs\n \t-rm -rf gnu/gcj/runtime/.libs gnu/gcj/runtime/_libs\n \t-rm -rf gnu/gcj/util/.libs gnu/gcj/util/_libs\n \t-rm -rf gnu/gcj/xlib/.libs gnu/gcj/xlib/_libs\n@@ -9029,6 +9050,8 @@ distclean-generic:\n \t-rm -f gnu/gcj/convert/$(am__dirstamp)\n \t-rm -f gnu/gcj/io/$(DEPDIR)/$(am__dirstamp)\n \t-rm -f gnu/gcj/io/$(am__dirstamp)\n+\t-rm -f gnu/gcj/jvmti/$(DEPDIR)/$(am__dirstamp)\n+\t-rm -f gnu/gcj/jvmti/$(am__dirstamp)\n \t-rm -f gnu/gcj/runtime/$(DEPDIR)/$(am__dirstamp)\n \t-rm -f gnu/gcj/runtime/$(am__dirstamp)\n \t-rm -f gnu/gcj/tools/gcj_dbtool/$(DEPDIR)/$(am__dirstamp)\n@@ -9085,7 +9108,7 @@ clean-am: clean-binPROGRAMS clean-dbexecLTLIBRARIES clean-generic \\\n \n distclean: distclean-recursive\n \t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n-\t-rm -rf ./$(DEPDIR) classpath/tools/$(DEPDIR) gnu/classpath/$(DEPDIR) gnu/classpath/jdwp/$(DEPDIR) gnu/gcj/$(DEPDIR) gnu/gcj/convert/$(DEPDIR) gnu/gcj/io/$(DEPDIR) gnu/gcj/runtime/$(DEPDIR) gnu/gcj/tools/gcj_dbtool/$(DEPDIR) gnu/gcj/util/$(DEPDIR) gnu/gcj/xlib/$(DEPDIR) gnu/java/lang/$(DEPDIR) gnu/java/net/$(DEPDIR) gnu/java/net/protocol/core/$(DEPDIR) gnu/java/nio/$(DEPDIR) gnu/java/nio/channels/$(DEPDIR) java/io/$(DEPDIR) java/lang/$(DEPDIR) java/lang/ref/$(DEPDIR) java/lang/reflect/$(DEPDIR) java/net/$(DEPDIR) java/nio/$(DEPDIR) java/nio/channels/$(DEPDIR) java/security/$(DEPDIR) java/text/$(DEPDIR) java/util/$(DEPDIR) java/util/logging/$(DEPDIR) java/util/zip/$(DEPDIR)\n+\t-rm -rf ./$(DEPDIR) classpath/tools/$(DEPDIR) gnu/classpath/$(DEPDIR) gnu/classpath/jdwp/$(DEPDIR) gnu/gcj/$(DEPDIR) gnu/gcj/convert/$(DEPDIR) gnu/gcj/io/$(DEPDIR) gnu/gcj/jvmti/$(DEPDIR) gnu/gcj/runtime/$(DEPDIR) gnu/gcj/tools/gcj_dbtool/$(DEPDIR) gnu/gcj/util/$(DEPDIR) gnu/gcj/xlib/$(DEPDIR) gnu/java/lang/$(DEPDIR) gnu/java/net/$(DEPDIR) gnu/java/net/protocol/core/$(DEPDIR) gnu/java/nio/$(DEPDIR) gnu/java/nio/channels/$(DEPDIR) java/io/$(DEPDIR) java/lang/$(DEPDIR) java/lang/ref/$(DEPDIR) java/lang/reflect/$(DEPDIR) java/net/$(DEPDIR) java/nio/$(DEPDIR) java/nio/channels/$(DEPDIR) java/security/$(DEPDIR) java/text/$(DEPDIR) java/util/$(DEPDIR) java/util/logging/$(DEPDIR) java/util/zip/$(DEPDIR)\n \t-rm -f Makefile\n distclean-am: clean-am distclean-compile distclean-generic \\\n \tdistclean-libtool distclean-local distclean-tags\n@@ -9117,7 +9140,7 @@ installcheck-am:\n maintainer-clean: maintainer-clean-recursive\n \t-rm -f $(am__CONFIG_DISTCLEAN_FILES)\n \t-rm -rf $(top_srcdir)/autom4te.cache\n-\t-rm -rf ./$(DEPDIR) classpath/tools/$(DEPDIR) gnu/classpath/$(DEPDIR) gnu/classpath/jdwp/$(DEPDIR) gnu/gcj/$(DEPDIR) gnu/gcj/convert/$(DEPDIR) gnu/gcj/io/$(DEPDIR) gnu/gcj/runtime/$(DEPDIR) gnu/gcj/tools/gcj_dbtool/$(DEPDIR) gnu/gcj/util/$(DEPDIR) gnu/gcj/xlib/$(DEPDIR) gnu/java/lang/$(DEPDIR) gnu/java/net/$(DEPDIR) gnu/java/net/protocol/core/$(DEPDIR) gnu/java/nio/$(DEPDIR) gnu/java/nio/channels/$(DEPDIR) java/io/$(DEPDIR) java/lang/$(DEPDIR) java/lang/ref/$(DEPDIR) java/lang/reflect/$(DEPDIR) java/net/$(DEPDIR) java/nio/$(DEPDIR) java/nio/channels/$(DEPDIR) java/security/$(DEPDIR) java/text/$(DEPDIR) java/util/$(DEPDIR) java/util/logging/$(DEPDIR) java/util/zip/$(DEPDIR)\n+\t-rm -rf ./$(DEPDIR) classpath/tools/$(DEPDIR) gnu/classpath/$(DEPDIR) gnu/classpath/jdwp/$(DEPDIR) gnu/gcj/$(DEPDIR) gnu/gcj/convert/$(DEPDIR) gnu/gcj/io/$(DEPDIR) gnu/gcj/jvmti/$(DEPDIR) gnu/gcj/runtime/$(DEPDIR) gnu/gcj/tools/gcj_dbtool/$(DEPDIR) gnu/gcj/util/$(DEPDIR) gnu/gcj/xlib/$(DEPDIR) gnu/java/lang/$(DEPDIR) gnu/java/net/$(DEPDIR) gnu/java/net/protocol/core/$(DEPDIR) gnu/java/nio/$(DEPDIR) gnu/java/nio/channels/$(DEPDIR) java/io/$(DEPDIR) java/lang/$(DEPDIR) java/lang/ref/$(DEPDIR) java/lang/reflect/$(DEPDIR) java/net/$(DEPDIR) java/nio/$(DEPDIR) java/nio/channels/$(DEPDIR) java/security/$(DEPDIR) java/text/$(DEPDIR) java/util/$(DEPDIR) java/util/logging/$(DEPDIR) java/util/zip/$(DEPDIR)\n \t-rm -f Makefile\n maintainer-clean-am: distclean-am maintainer-clean-generic\n \n@@ -9377,6 +9400,16 @@ gnu/gcj/io.list: $(gnu_gcj_io_source_files)\n \n -include gnu/gcj/io.deps\n \n+gnu/gcj/jvmti.list: $(gnu_gcj_jvmti_source_files)\n+\t@$(mkinstalldirs) $(dir $@)\n+\t@for file in $(gnu_gcj_jvmti_source_files); do \\\n+\t  if test -f $(srcdir)/$$file; then \\\n+\t    echo $(srcdir)/$$file; \\\n+\t  else echo $$file; fi; \\\n+\tdone > gnu/gcj/jvmti.list\n+\n+-include gnu/gcj/jvmti.deps\n+\n gnu/gcj/runtime.list: $(gnu_gcj_runtime_source_files)\n \t@$(mkinstalldirs) $(dir $@)\n \t@for file in $(gnu_gcj_runtime_source_files); do \\"}, {"sha": "2d8fe1b249a74c417e16ac7e9b55526f4226dfb3", "filename": "libjava/gnu/gcj/jvmti/Breakpoint.java", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2Fgnu%2Fgcj%2Fjvmti%2FBreakpoint.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2Fgnu%2Fgcj%2Fjvmti%2FBreakpoint.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fjvmti%2FBreakpoint.java?ref=67ce74926a1ca6d3711af868d3b48cf4022de498", "patch": "@@ -0,0 +1,57 @@\n+// Breakpoint.java -  a breakpoint in the interpreter\n+\n+/* Copyright (C) 2006  Free Software Foundation\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+package gnu.gcj.jvmti;\n+\n+import gnu.gcj.RawDataManaged;\n+\n+/**\n+ * Class representing a Breakpoint.\n+ *\n+ * @author Keith Seitz (keiths@redhat.com)\n+ */\n+public class Breakpoint\n+{\n+  // Location of this breakpoint\n+  private long method;\n+  private long location;\n+\n+  // The original instruction that this breakpoint replaced\n+  private RawDataManaged data;\n+\n+  /**\n+   * Constructs a new Breakpoint. SetBreakpoint will verify the\n+   * validity of the arguments.\n+   *\n+   * @param method the method (a jmethodID)\n+   * @param location the jlocation of the breakpoint (a jlocation)\n+   */\n+  public Breakpoint (long method, long location)\n+  {\n+    this.method = method;\n+    this.location = location;\n+    initialize_native ();\n+  }\n+\n+  private native void initialize_native ();\n+\n+  public native void install ();\n+\n+  public native void remove ();\n+\n+  /**\n+   * Returns the original instruction at the location where\n+   * this breakpoint was set\n+   */\n+  public RawDataManaged getInsn ()\n+  {\n+    return data;\n+  }\n+}"}, {"sha": "ab9de417bb8c1c3705af0176d5f61c438f9dbf24", "filename": "libjava/gnu/gcj/jvmti/natBreakpoint.cc", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2Fgnu%2Fgcj%2Fjvmti%2FnatBreakpoint.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2Fgnu%2Fgcj%2Fjvmti%2FnatBreakpoint.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fjvmti%2FnatBreakpoint.cc?ref=67ce74926a1ca6d3711af868d3b48cf4022de498", "patch": "@@ -0,0 +1,57 @@\n+// natBreakpoint.cc - C++ side of Breakpoint\n+\n+/* Copyright (C) 2006  Free Software Foundation\n+\n+   This file is part of libgcj.\n+\n+This software is copyrighted work licensed under the terms of the\n+Libgcj License.  Please consult the file \"LIBGCJ_LICENSE\" for\n+details.  */\n+\n+#include <config.h>\n+#include <gcj/cni.h>\n+#include <gcj/method.h>\n+#include <java-interp.h>\n+#include <java-insns.h>\n+#include <java-assert.h>\n+#include <jvmti.h>\n+\n+#include <gnu/gcj/jvmti/Breakpoint.h>\n+\n+static _Jv_InterpMethod *\n+get_interp_method (jlong method)\n+{\n+  jmethodID id = reinterpret_cast<jmethodID> (method);\n+  jclass klass = _Jv_GetMethodDeclaringClass (id);\n+  JvAssert (_Jv_IsInterpretedClass (klass));\n+  _Jv_MethodBase *base\n+    = _Jv_FindInterpreterMethod (klass, id);\n+  JvAssert (base != NULL);\n+  return reinterpret_cast<_Jv_InterpMethod *> (base);\n+}\n+\n+void\n+gnu::gcj::jvmti::Breakpoint::initialize_native ()\n+{\n+  _Jv_InterpMethod *imeth = get_interp_method (method);\n+\n+  // copy contents of insn at location into data\n+  pc_t code = imeth->get_insn (location);\n+  data = (RawDataManaged *) JvAllocBytes (sizeof (*code));\n+  memcpy (data, code, sizeof (*code));\n+  install ();\n+}\n+\n+void\n+gnu::gcj::jvmti::Breakpoint::install ()\n+{\n+  _Jv_InterpMethod *imeth = get_interp_method (method);\n+  imeth->install_break (location);\n+}\n+\n+void\n+gnu::gcj::jvmti::Breakpoint::remove ()\n+{\n+  _Jv_InterpMethod *imeth = get_interp_method (method);\n+  imeth->set_insn (location, reinterpret_cast<pc_t> (data));\n+}"}, {"sha": "f23a0bd567063808861d306926d36d82d8751102", "filename": "libjava/sources.am", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2Fsources.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67ce74926a1ca6d3711af868d3b48cf4022de498/libjava%2Fsources.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fsources.am?ref=67ce74926a1ca6d3711af868d3b48cf4022de498", "patch": "@@ -565,6 +565,22 @@ gnu/gcj/io.list: $(gnu_gcj_io_source_files)\n -include gnu/gcj/io.deps\n \n \n+gnu_gcj_jvmti_source_files = \\\n+gnu/gcj/jvmti/Breakpoint.java\n+\n+gnu_gcj_jvmti_header_files = $(patsubst %.java,%.h,$(gnu_gcj_jvmti_source_files))\n+\n+gnu/gcj/jvmti.list: $(gnu_gcj_jvmti_source_files)\n+\t@$(mkinstalldirs) $(dir $@)\n+\t@for file in $(gnu_gcj_jvmti_source_files); do \\\n+\t  if test -f $(srcdir)/$$file; then \\\n+\t    echo $(srcdir)/$$file; \\\n+\t  else echo $$file; fi; \\\n+\tdone > gnu/gcj/jvmti.list\n+\n+-include gnu/gcj/jvmti.deps\n+\n+\n gnu_gcj_runtime_source_files = \\\n gnu/gcj/runtime/BootClassLoader.java \\\n gnu/gcj/runtime/ExtensionClassLoader.java \\\n@@ -8785,6 +8801,7 @@ all_packages_source_files = \\\n   gnu/gcj.list \\\n   gnu/gcj/convert.list \\\n   gnu/gcj/io.list \\\n+  gnu/gcj/jvmti.list \\\n   gnu/gcj/runtime.list \\\n   gnu/gcj/util.list \\\n   gnu/java/awt.list \\\n@@ -9016,6 +9033,7 @@ ordinary_header_files = \\\n   $(gnu_gcj_header_files) \\\n   $(gnu_gcj_convert_header_files) \\\n   $(gnu_gcj_io_header_files) \\\n+  $(gnu_gcj_jvmti_header_files) \\\n   $(gnu_gcj_runtime_header_files) \\\n   $(gnu_gcj_util_header_files) \\\n   $(gnu_java_awt_header_files) \\"}]}