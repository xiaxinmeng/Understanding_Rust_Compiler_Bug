{"sha": "aad98a61044276f322dbdb9876e83ead7d8a9e60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFkOThhNjEwNDQyNzZmMzIyZGJkYjk4NzZlODNlYWQ3ZDhhOWU2MA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel@linux.vnet.ibm.com", "date": "2018-04-06T07:45:42Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2018-04-06T07:45:42Z"}, "message": "IBM Z: Use the dedicated NOP instructions for \"nop\"\n\nWe still use lr r0,r0 as a NOP instruction although we have some kind\nof dedicated NOP instruction (nopr) which maps to a \"branch never\".\n\nAs a side-effect this fixes testcases scanning for NOPs\ne.g. patchable_function_entry-*.\n\nAs another side-effect this makes it difficult to distingiush NOPs\ngenerated for hotpatching from NOPs added when using -O0 to attach\nlocation information to it.  Hence I had to make sure that the hotpatch\ntestcases get skipped when compiling without optimization.\n\ngcc/ChangeLog:\n\n2018-04-06  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n\n\t* config/s390/s390.c (s390_z10_optimize_cmp): Expand dedicated NOP\n\tinstructions.\n\t* config/s390/s390.md (UNSPECV_NOP_LR_0, UNSPECV_NOP_LR_1): New\n\tconstant definitions.\n\t(\"nop\"): lr 0,0 -> nopr r0\n\t(\"nop_lr0\", \"nop_lr1\"): New insn definitions.\n\ngcc/testsuite/ChangeLog:\n\n2018-04-06  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n\n\t* gcc.target/s390/s390.exp: Remove -O0 from list of torture\n\toptions.\n\t* gcc.target/s390/hotpatch-1.c: Skip when building without\n\toptimization.\n\t* gcc.target/s390/hotpatch-10.c: Likewise.\n\t* gcc.target/s390/hotpatch-11.c: Likewise.\n\t* gcc.target/s390/hotpatch-12.c: Likewise.\n\t* gcc.target/s390/hotpatch-13.c: Likewise.\n\t* gcc.target/s390/hotpatch-14.c: Likewise.\n\t* gcc.target/s390/hotpatch-15.c: Likewise.\n\t* gcc.target/s390/hotpatch-16.c: Likewise.\n\t* gcc.target/s390/hotpatch-17.c: Likewise.\n\t* gcc.target/s390/hotpatch-18.c: Likewise.\n\t* gcc.target/s390/hotpatch-19.c: Likewise.\n\t* gcc.target/s390/hotpatch-2.c: Likewise.\n\t* gcc.target/s390/hotpatch-3.c: Likewise.\n\t* gcc.target/s390/hotpatch-4.c: Likewise.\n\t* gcc.target/s390/hotpatch-5.c: Likewise.\n\t* gcc.target/s390/hotpatch-6.c: Likewise.\n\t* gcc.target/s390/hotpatch-7.c: Likewise.\n\t* gcc.target/s390/hotpatch-8.c: Likewise.\n\t* gcc.target/s390/hotpatch-9.c: Likewise.\n\nFrom-SVN: r259164", "tree": {"sha": "a9298538dcca93788364c3e520d19d6cc4791028", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9298538dcca93788364c3e520d19d6cc4791028"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aad98a61044276f322dbdb9876e83ead7d8a9e60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aad98a61044276f322dbdb9876e83ead7d8a9e60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aad98a61044276f322dbdb9876e83ead7d8a9e60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aad98a61044276f322dbdb9876e83ead7d8a9e60/comments", "author": null, "committer": null, "parents": [{"sha": "bce89076ce03ff9bcf89362477cff548a585bcdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce89076ce03ff9bcf89362477cff548a585bcdd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bce89076ce03ff9bcf89362477cff548a585bcdd"}], "stats": {"total": 82, "additions": 77, "deletions": 5}, "files": [{"sha": "f96b375cc4240d03224b061775e0d38484962fc4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -1,3 +1,12 @@\n+2018-04-06  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n+\n+\t* config/s390/s390.c (s390_z10_optimize_cmp): Expand dedicated NOP\n+\tinstructions.\n+\t* config/s390/s390.md (UNSPECV_NOP_LR_0, UNSPECV_NOP_LR_1): New\n+\tconstant definitions.\n+\t(\"nop\"): lr 0,0 -> nopr r0\n+\t(\"nop_lr0\", \"nop_lr1\"): New insn definitions.\n+\n 2018-04-06  Chung-Ju Wu  <jasonwucj@gmail.com>\n \n \t* config/nds32/nds32.md (*stack_push, *stack_pop): Use"}, {"sha": "59f5de9bd7e261656e46aaf247bb9608774c36c2", "filename": "gcc/config/s390/s390.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Fconfig%2Fs390%2Fs390.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Fconfig%2Fs390%2Fs390.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -14376,9 +14376,9 @@ s390_z10_optimize_cmp (rtx_insn *insn)\n \t  && s390_non_addr_reg_read_p (*op0, prev_insn))\n \t{\n \t  if (REGNO (*op1) == 0)\n-\t    emit_insn_after (gen_nop1 (), insn);\n+\t    emit_insn_after (gen_nop_lr1 (), insn);\n \t  else\n-\t    emit_insn_after (gen_nop (), insn);\n+\t    emit_insn_after (gen_nop_lr0 (), insn);\n \t  insn_added_p = true;\n \t}\n       else"}, {"sha": "c4d391bc9b599621f879c082507ca6751d31acca", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -267,6 +267,10 @@\n    UNSPECV_CAS\n    UNSPECV_ATOMIC_OP\n \n+   ; Non-branch nops used for compare-and-branch adjustments on z10\n+   UNSPECV_NOP_LR_0\n+   UNSPECV_NOP_LR_1\n+\n    ; Hotpatching (unremovable NOPs)\n    UNSPECV_NOP_2_BYTE\n    UNSPECV_NOP_4_BYTE\n@@ -10998,12 +11002,21 @@\n (define_insn \"nop\"\n   [(const_int 0)]\n   \"\"\n+  \"nopr\\t%%r0\"\n+  [(set_attr \"op_type\" \"RR\")])\n+\n+; non-branch NOPs required for optimizing compare-and-branch patterns\n+; on z10\n+\n+(define_insn \"nop_lr0\"\n+  [(unspec_volatile [(const_int 0)] UNSPECV_NOP_LR_0)]\n+  \"\"\n   \"lr\\t0,0\"\n   [(set_attr \"op_type\" \"RR\")\n    (set_attr \"z10prop\"  \"z10_fr_E1\")])\n \n-(define_insn \"nop1\"\n-  [(const_int 1)]\n+(define_insn \"nop_lr1\"\n+  [(unspec_volatile [(const_int 0)] UNSPECV_NOP_LR_1)]\n   \"\"\n   \"lr\\t1,1\"\n   [(set_attr \"op_type\" \"RR\")])"}, {"sha": "9755321e3c18662d6c1a281ea174b254a31a5722", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -1,3 +1,28 @@\n+2018-04-06  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n+\n+\t* gcc.target/s390/s390.exp: Remove -O0 from list of torture\n+\toptions.\n+\t* gcc.target/s390/hotpatch-1.c: Skip when building without\n+\toptimization.\n+\t* gcc.target/s390/hotpatch-10.c: Likewise.\n+\t* gcc.target/s390/hotpatch-11.c: Likewise.\n+\t* gcc.target/s390/hotpatch-12.c: Likewise.\n+\t* gcc.target/s390/hotpatch-13.c: Likewise.\n+\t* gcc.target/s390/hotpatch-14.c: Likewise.\n+\t* gcc.target/s390/hotpatch-15.c: Likewise.\n+\t* gcc.target/s390/hotpatch-16.c: Likewise.\n+\t* gcc.target/s390/hotpatch-17.c: Likewise.\n+\t* gcc.target/s390/hotpatch-18.c: Likewise.\n+\t* gcc.target/s390/hotpatch-19.c: Likewise.\n+\t* gcc.target/s390/hotpatch-2.c: Likewise.\n+\t* gcc.target/s390/hotpatch-3.c: Likewise.\n+\t* gcc.target/s390/hotpatch-4.c: Likewise.\n+\t* gcc.target/s390/hotpatch-5.c: Likewise.\n+\t* gcc.target/s390/hotpatch-6.c: Likewise.\n+\t* gcc.target/s390/hotpatch-7.c: Likewise.\n+\t* gcc.target/s390/hotpatch-8.c: Likewise.\n+\t* gcc.target/s390/hotpatch-9.c: Likewise.\n+\n 2018-04-06  Andreas Krebbel  <krebbel@linux.vnet.ibm.com>\n \n \t* c-c++-common/Wattributes.c: Disable warning for s390* target and"}, {"sha": "67e101ee318c6e81e4899dbcafed74485c056cb0", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-1.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-1.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -3,6 +3,13 @@\n /* { dg-do compile } */\n /* { dg-options \"-mzarch\" } */\n \n+/* Without optimization extra NOPs will be added just to attach\n+   location info to it.  Don't run the test in that case.  The torture\n+   framework always appears to run the testcase without -O option\n+   first.  */\n+\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n+\n #include <stdio.h>\n \n void hp1(void)"}, {"sha": "21d499e6204763d834075cf7c7e3ba4cac3c1804", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-10.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-10.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,0\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "a37f3117c64b6c0c5931f0129e41425c48102ef5", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-11.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-11.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=1,0\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "cb8d1521bfa94742b429a0ce794f11fb35ac346c", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-12.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-12.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=999,0\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "fb037c2040f8354dec7fef9026f8cbef2c473d04", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-13.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-13.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "fd0368a55ae5c8b833209183a5d7e1db7d94f45e", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-14.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-14.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-14.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-14.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "a1c3e7c694b43efa9fef34c935fe7837fa9139d7", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-15.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-15.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-15.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-15.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "737c3a1c0719609a28644708b7db64119a36c700", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-16.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-16.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,0\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "6d8c40c65c03249be3276fe9ce15798a10a081ca", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-17.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-17.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-17.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-17.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=1,2\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "02807ff7b6ea1af3c7e994d96206715bc55f9d8d", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-18.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-18.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-18.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-18.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=1,2 -mhotpatch=0,0\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "71c2ed13d183f2af3055270ed885f268299fa7c4", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-19.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-19.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-19.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-19.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=1,2\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "ece6cb37e57d6e95590fba32083d0c0d8b474ecc", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-2.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,1\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "65ebe353688a9dcfa1f58a985c275a335663bb7e", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-3.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,2\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "d0956f14240e30cf1c93a86e364d0545e4978c38", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-4.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-4.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,3\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "64d49eecb135ee50f5391fff448728cdf79dd20f", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-5.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-5.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,4\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "e6753c8385d7355811a8025ed50dc8be0d298304", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-6.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-6.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,5\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "3f1c9f0e2948f71e35c2abfa1081db17b2941bb1", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-7.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-7.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-7.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-7.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile } */\n /* { dg-options \"-mzarch -mhotpatch=0,6\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "a2fb83f29777197dded99f6405c466f18f4b0b80", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-8.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-8.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile { target { ! lp64 } } } */\n /* { dg-options \"-mesa -march=g5 -Wno-deprecated -mhotpatch=0,3\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "34fae55d3ada7402865255db226aaf277e8139bf", "filename": "gcc/testsuite/gcc.target/s390/hotpatch-9.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fhotpatch-9.c?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -2,6 +2,7 @@\n \n /* { dg-do compile { target { ! lp64 } } } */\n /* { dg-options \"-mesa -march=g5 -Wno-deprecated -mhotpatch=0,4\" } */\n+/* { dg-skip-if \"\" { *-*-* } { \"*\" } { \"-O*\" } } */\n \n #include <stdio.h>\n "}, {"sha": "bb13bfd33d254789b5f3e343b3030a931b4329de", "filename": "gcc/testsuite/gcc.target/s390/s390.exp", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fs390.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aad98a61044276f322dbdb9876e83ead7d8a9e60/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fs390.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fs390%2Fs390.exp?ref=aad98a61044276f322dbdb9876e83ead7d8a9e60", "patch": "@@ -220,7 +220,7 @@ dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/md/*.{c,S,C}]] \\\n \n # Additional hotpatch torture tests.\n torture-init\n-set-torture-options [list -Os -O0 -O1 -O2 -O3]\n+set-torture-options [list -Os -O1 -O2 -O3]\n gcc-dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/hotpatch-\\[0-9\\]*.c]] \\\n \t\"\" $DEFAULT_CFLAGS\n torture-finish"}]}