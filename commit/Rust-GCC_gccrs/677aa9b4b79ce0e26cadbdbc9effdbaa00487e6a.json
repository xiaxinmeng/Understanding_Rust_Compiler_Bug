{"sha": "677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Njc3YWE5YjRiNzljZTBlMjZjYWRiZGJjOWVmZmRiYWEwMDQ4N2U2YQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-11-09T20:55:03Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-11-09T20:55:03Z"}, "message": "print-rtl-function.c: add (param) directive to dump\n\ngcc/ChangeLog:\n\t* print-rtl-function.c: Include varasm.h.\n\t(print_any_param_name): New function.\n\t(print_param): New function.\n\t(print_rtx_function): Call print_param for each argument.\n\t* print-rtl.c (rtx_writer::finish_directive): New function.\n\t* print-rtl.h (rtx_writer::finish_directive): New decl.\n\nFrom-SVN: r242023", "tree": {"sha": "1e612ec728999a697c3b1c9733cf121ba3eb3327", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e612ec728999a697c3b1c9733cf121ba3eb3327"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "410fe60d14642e03ba5b1658bff522d92fa4ca9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/410fe60d14642e03ba5b1658bff522d92fa4ca9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/410fe60d14642e03ba5b1658bff522d92fa4ca9f"}], "stats": {"total": 56, "additions": 56, "deletions": 0}, "files": [{"sha": "edf734fa9a6422c6e14e915e701cf114f6e80a00", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "patch": "@@ -1,3 +1,12 @@\n+2016-11-09  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* print-rtl-function.c: Include varasm.h.\n+\t(print_any_param_name): New function.\n+\t(print_param): New function.\n+\t(print_rtx_function): Call print_param for each argument.\n+\t* print-rtl.c (rtx_writer::finish_directive): New function.\n+\t* print-rtl.h (rtx_writer::finish_directive): New decl.\n+\n 2016-11-09  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/78262"}, {"sha": "88422263bbd16343ad70e144dd4a3097a9eb5a8f", "filename": "gcc/print-rtl-function.c", "status": "modified", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2Fprint-rtl-function.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2Fprint-rtl-function.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl-function.c?ref=677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "patch": "@@ -33,6 +33,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"langhooks.h\"\n #include \"memmodel.h\"\n #include \"emit-rtl.h\"\n+#include \"varasm.h\"\n \n /* Print an \"(edge-from)\" or \"(edge-to)\" directive describing E\n    to OUTFILE.  */\n@@ -127,6 +128,37 @@ can_have_basic_block_p (const rtx_insn *insn)\n   return true;\n }\n \n+/* Subroutine of print_param.  Write the name of ARG, if any, to OUTFILE.  */\n+\n+static void\n+print_any_param_name (FILE *outfile, tree arg)\n+{\n+  if (DECL_NAME (arg))\n+    fprintf (outfile, \" \\\"%s\\\"\", IDENTIFIER_POINTER (DECL_NAME (arg)));\n+}\n+\n+/* Print a \"(param)\" directive for ARG to OUTFILE.  */\n+\n+static void\n+print_param (FILE *outfile, rtx_writer &w, tree arg)\n+{\n+  fprintf (outfile, \"  (param\");\n+  print_any_param_name (outfile, arg);\n+  fprintf (outfile, \"\\n\");\n+\n+  /* Print the value of DECL_RTL (without lazy-evaluation).  */\n+  fprintf (outfile, \"    (DECL_RTL \");\n+  w.print_rtx (DECL_RTL_IF_SET (arg));\n+  w.finish_directive ();\n+\n+  /* Print DECL_INCOMING_RTL.  */\n+  fprintf (outfile, \"    (DECL_RTL_INCOMING \");\n+  w.print_rtx (DECL_INCOMING_RTL (arg));\n+  fprintf (outfile, \")\");\n+\n+  w.finish_directive ();\n+}\n+\n /* Write FN to OUTFILE in a form suitable for parsing, with indentation\n    and comments to make the structure easy for a human to grok.  Track\n    the basic blocks of insns in the chain, wrapping those that are within\n@@ -197,6 +229,10 @@ print_rtx_function (FILE *outfile, function *fn, bool compact)\n \n   fprintf (outfile, \"(function \\\"%s\\\"\\n\", dname);\n \n+  /* Params.  */\n+  for (tree arg = DECL_ARGUMENTS (fdecl); arg; arg = DECL_CHAIN (arg))\n+    print_param (outfile, w, arg);\n+\n   /* The instruction chain.  */\n   fprintf (outfile, \"  (insn-chain\\n\");\n   basic_block curr_bb = NULL;"}, {"sha": "e7368c73c42f3f71853b97acfe6292ac51f5cc4d", "filename": "gcc/print-rtl.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2Fprint-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2Fprint-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl.c?ref=677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "patch": "@@ -804,6 +804,15 @@ rtx_writer::print_rtx (const_rtx in_rtx)\n   m_sawclose = 1;\n }\n \n+/* Emit a closing parenthesis and newline.  */\n+\n+void\n+rtx_writer::finish_directive ()\n+{\n+  fprintf (m_outfile, \")\\n\");\n+  m_sawclose = 0;\n+}\n+\n /* Print an rtx on the current line of FILE.  Initially indent IND\n    characters.  */\n "}, {"sha": "e7220385e37e6b7a000eef4d5ecaabee8740125d", "filename": "gcc/print-rtl.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2Fprint-rtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a/gcc%2Fprint-rtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl.h?ref=677aa9b4b79ce0e26cadbdbc9effdbaa00487e6a", "patch": "@@ -31,6 +31,8 @@ class rtx_writer\n   void print_rtl (const_rtx rtx_first);\n   int print_rtl_single_with_indent (const_rtx x, int ind);\n \n+  void finish_directive ();\n+\n  private:\n   void print_rtx_operand_code_0 (const_rtx in_rtx, int idx);\n   void print_rtx_operand_code_e (const_rtx in_rtx, int idx);"}]}