{"sha": "00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBjNzE1MWNkZjFkNzM1MDRhNDE1NGJmM2U2MzAwMDhkZDFiYzdkMw==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2010-10-22T10:04:20Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-22T10:04:20Z"}, "message": "exp_ch5.adb, [...]: Minor reformatting.\n\n2010-10-22  Robert Dewar  <dewar@adacore.com>\n\n\t* exp_ch5.adb, par-ch4.adb, par-ch5.adb, sem_ch5.adb, sinfo.ads: Minor\n\treformatting.\n\nFrom-SVN: r165814", "tree": {"sha": "b6bc93213e84a172cc2f10ff4b4229bc8f9f3daa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6bc93213e84a172cc2f10ff4b4229bc8f9f3daa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/comments", "author": null, "committer": null, "parents": [{"sha": "c0f136cd17132ceeb25dadb4c97f474d37924cbd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0f136cd17132ceeb25dadb4c97f474d37924cbd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0f136cd17132ceeb25dadb4c97f474d37924cbd"}], "stats": {"total": 74, "additions": 38, "deletions": 36}, "files": [{"sha": "a640b46f0a63b78c80434fd46973ad846d854dfb", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "patch": "@@ -1,3 +1,8 @@\n+2010-10-22  Robert Dewar  <dewar@adacore.com>\n+\n+\t* exp_ch5.adb, par-ch4.adb, par-ch5.adb, sem_ch5.adb, sinfo.ads: Minor\n+\treformatting.\n+\n 2010-10-22  Arnaud Charlet  <charlet@adacore.com>\n \n \t* a-locale.adb: Minor code clean up."}, {"sha": "5fe2c484468c2e78855c22151bc734c7aa44f6d8", "filename": "gcc/ada/exp_ch5.adb", "status": "modified", "additions": 16, "deletions": 21, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fexp_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fexp_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch5.adb?ref=00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "patch": "@@ -2760,13 +2760,12 @@ package body Exp_Ch5 is\n       Isc        : constant Node_Id    := Iteration_Scheme (N);\n       I_Spec     : constant Node_Id    := Iterator_Specification (Isc);\n       Id         : constant Entity_Id  := Defining_Identifier (I_Spec);\n-      Container  : constant Entity_Id :=  Entity (Name (I_Spec));\n+      Container  : constant Entity_Id  :=  Entity (Name (I_Spec));\n+      Typ        : constant Entity_Id  := Etype (Container);\n \n-      Typ        : constant Entity_Id := Etype (Container);\n-\n-      Cursor     : Entity_Id;\n-      New_Loop   : Node_Id;\n-      Stats      : List_Id;\n+      Cursor   : Entity_Id;\n+      New_Loop : Node_Id;\n+      Stats    : List_Id;\n \n    begin\n       if Is_Array_Type (Typ) then\n@@ -2809,7 +2808,6 @@ package body Exp_Ch5 is\n             end;\n \n          else\n-\n             --  for Index in Array loop ...\n \n             --  The cursor (index into the array) is the source Id\n@@ -2832,31 +2830,29 @@ package body Exp_Ch5 is\n                 End_Label        => Empty);\n          end if;\n \n+      --  Iterators over containers\n+\n       else\n+         --  In both cases these require a cursor of the proper type\n \n-         --  Iterators over containers. In both cases these require a cursor of\n-         --  the proper type.\n+         --    Cursor : P.Cursor_Type := Container.First;\n+         --    while Cursor /= P.No_Element loop\n \n-         --  Cursor : P.Cursor_Type := Container.First;\n-         --  while Cursor /= P.No_Element loop\n+         --       Obj : P.Element_Type renames Element (Cursor);\n+         --       --  For the \"of\" form, the element name renames the element\n+         --       --  designated by the cursor.\n \n-         --     Obj : P.Element_Type renames Element (Cursor);\n-         --     --  For the \"of\" form, the element name renames the element\n-         --     --  designated by the cursor.\n+         --       Statements;\n+         --       P.Next (Cursor);\n+         --    end loop;\n \n-         --     Statements;\n-         --     P.Next (Cursor);\n-         --  end loop;\n-         --\n          --  with the obvious replacements if \"reverse\" is specified.\n \n          declare\n             Element_Type  : constant Entity_Id := Etype (Id);\n             Pack          : constant Entity_Id := Scope (Etype (Container));\n-\n             Name_Init     : Name_Id;\n             Name_Step     : Name_Id;\n-\n             Cond          : Node_Id;\n             Cursor_Decl   : Node_Id;\n             Renaming_Decl : Node_Id;\n@@ -2866,7 +2862,6 @@ package body Exp_Ch5 is\n \n             if Of_Present (I_Spec) then\n                Cursor := Make_Temporary (Loc, 'C');\n-\n             else\n                Cursor := Id;\n             end if;"}, {"sha": "5e26defd22ce146b47ca7a349c44aeadbec1588d", "filename": "gcc/ada/par-ch4.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fpar-ch4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fpar-ch4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch4.adb?ref=00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "patch": "@@ -2536,7 +2536,7 @@ package body Ch4 is\n          raise Error_Resync;\n       end if;\n \n-      Scan;\n+      Scan; -- past SOME\n       I_Spec := P_Loop_Parameter_Specification;\n \n       if Nkind (I_Spec) = N_Loop_Parameter_Specification then"}, {"sha": "400b3e1deb59df93b477e617758e269566aa3da5", "filename": "gcc/ada/par-ch5.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fpar-ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fpar-ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fpar-ch5.adb?ref=00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "patch": "@@ -1570,6 +1570,7 @@ package body Ch5 is\n       Scan; -- past FOR\n       Iter_Scheme_Node := New_Node (N_Iteration_Scheme, Token_Ptr);\n       Spec := P_Loop_Parameter_Specification;\n+\n       if Nkind (Spec) = N_Loop_Parameter_Specification then\n          Set_Loop_Parameter_Specification (Iter_Scheme_Node, Spec);\n       else\n@@ -1750,6 +1751,7 @@ package body Ch5 is\n \n    function P_Iterator_Specification (Def_Id : Node_Id) return Node_Id is\n       Node1 : Node_Id;\n+\n    begin\n       Node1 :=  New_Node (N_Iterator_Specification, Token_Ptr);\n       Set_Defining_Identifier (Node1, Def_Id);\n@@ -1776,7 +1778,6 @@ package body Ch5 is\n       end if;\n \n       Set_Name (Node1, P_Name);\n-\n       return Node1;\n    end P_Iterator_Specification;\n "}, {"sha": "e79da0ab9941afc9ae9f3a7624ef5d35531fe7d1", "filename": "gcc/ada/sem_ch5.adb", "status": "modified", "additions": 8, "deletions": 9, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fsem_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fsem_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch5.adb?ref=00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "patch": "@@ -1734,6 +1734,8 @@ package body Sem_Ch5 is\n    --  Start of processing for Analyze_Iteration_Scheme\n \n    begin\n+      --  Why is following check needed ???\n+\n       if Analyzed (N) then\n          return;\n       end if;\n@@ -1806,9 +1808,8 @@ package body Sem_Ch5 is\n                      if Nkind (DS) = N_Function_Call\n                        or else\n                          (Is_Entity_Name (DS)\n-                            and then not Is_Type (Entity (DS)))\n+                           and then not Is_Type (Entity (DS)))\n                      then\n-\n                         --  This is an iterator specification. Rewrite as such\n                         --  and analyze.\n \n@@ -1823,7 +1824,6 @@ package body Sem_Ch5 is\n                                           Empty,\n                                         Reverse_Present     =>\n                                           Reverse_Present (LP));\n-\n                         begin\n                            Set_Iterator_Specification (N, I_Spec);\n                            Set_Loop_Parameter_Specification (N, Empty);\n@@ -1981,8 +1981,8 @@ package body Sem_Ch5 is\n       Subt      : constant Node_Id := Subtype_Indication (N);\n       Container : constant Node_Id := Name (N);\n \n-      Ent       : Entity_Id;\n-      Typ       : Entity_Id;\n+      Ent : Entity_Id;\n+      Typ : Entity_Id;\n \n    begin\n       Enter_Name (Def_Id);\n@@ -1998,15 +1998,15 @@ package body Sem_Ch5 is\n       if Is_Array_Type (Typ) then\n          if Of_Present (N) then\n             Set_Etype (Def_Id, Component_Type (Typ));\n-\n          else\n             Set_Etype (Def_Id, Etype (First_Index (Typ)));\n          end if;\n \n-      else\n-         --  Iteration over a container\n+      --  Iteration over a container\n \n+      else\n          Set_Ekind (Def_Id, E_Loop_Parameter);\n+\n          if Of_Present (N) then\n \n             --  Find the Element_Type in the package instance that defines the\n@@ -2023,7 +2023,6 @@ package body Sem_Ch5 is\n             end loop;\n \n          else\n-\n             --  Find the Cursor type in similar fashion\n \n             Ent := First_Entity (Scope (Typ));"}, {"sha": "186b78978672055d544e40f59f29255faea69380", "filename": "gcc/ada/sinfo.ads", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fsinfo.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00c7151cdf1d73504a4154bf3e630008dd1bc7d3/gcc%2Fada%2Fsinfo.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsinfo.ads?ref=00c7151cdf1d73504a4154bf3e630008dd1bc7d3", "patch": "@@ -1544,10 +1544,6 @@ package Sinfo is\n    --    is used for properly setting out of range values for use by pragmas\n    --    Initialize_Scalars and Normalize_Scalars.\n \n-   --  Of_Present (Flag16)\n-   --  Present in N_Iterator_Specification nodes, to mark the Ada 2012 iterator\n-   --  form over arrays and containers.\n-\n    --  Original_Discriminant (Node2-Sem)\n    --    Present in identifiers. Used in references to discriminants that\n    --    appear in generic units. Because the names of the discriminants may be\n@@ -4220,6 +4216,8 @@ package Sinfo is\n       --  Of_Present (Flag16)\n       --  Subtype_Indication (Node5)\n \n+      --  Note: The Of_Present flag distinguishes the two forms\n+\n       --------------------------\n       -- 5.6  Block Statement --\n       --------------------------\n@@ -11758,6 +11756,7 @@ package Sinfo is\n    pragma Inline (Inherited_Discriminant);\n    pragma Inline (Instance_Spec);\n    pragma Inline (Intval);\n+   pragma Inline (Iterator_Specification);\n    pragma Inline (Is_Accessibility_Actual);\n    pragma Inline (Is_Asynchronous_Call_Block);\n    pragma Inline (Is_Component_Left_Opnd);\n@@ -11821,6 +11820,7 @@ package Sinfo is\n    pragma Inline (Null_Exclusion_In_Return_Present);\n    pragma Inline (Null_Record_Present);\n    pragma Inline (Object_Definition);\n+   pragma Inline (Of_Present);\n    pragma Inline (Original_Discriminant);\n    pragma Inline (Original_Entity);\n    pragma Inline (Others_Discrete_Choices);\n@@ -12072,6 +12072,7 @@ package Sinfo is\n    pragma Inline (Set_Inherited_Discriminant);\n    pragma Inline (Set_Instance_Spec);\n    pragma Inline (Set_Intval);\n+   pragma Inline (Set_Iterator_Specification);\n    pragma Inline (Set_Is_Accessibility_Actual);\n    pragma Inline (Set_Is_Asynchronous_Call_Block);\n    pragma Inline (Set_Is_Component_Left_Opnd);\n@@ -12136,6 +12137,7 @@ package Sinfo is\n    pragma Inline (Set_Null_Exclusion_In_Return_Present);\n    pragma Inline (Set_Null_Record_Present);\n    pragma Inline (Set_Object_Definition);\n+   pragma Inline (Set_Of_Present);\n    pragma Inline (Set_Original_Discriminant);\n    pragma Inline (Set_Original_Entity);\n    pragma Inline (Set_Others_Discrete_Choices);"}]}