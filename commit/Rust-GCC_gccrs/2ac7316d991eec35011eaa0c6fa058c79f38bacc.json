{"sha": "2ac7316d991eec35011eaa0c6fa058c79f38bacc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmFjNzMxNmQ5OTFlZWMzNTAxMWVhYTBjNmZhMDU4Yzc5ZjM4YmFjYw==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2009-04-08T17:06:34Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2009-04-08T17:06:34Z"}, "message": "open.c (already_open): Test for POSIX close return value.\n\n2009-04-08  Janne Blomqvist  <jb@gcc.gnu.org>\n\n        * io/open.c (already_open): Test for POSIX close return value.\n        * io/unit.c (close_unit_1): Likewise.\n        * io/unix.c (raw_close): Return 0 for success for preconnected units.\n\nFrom-SVN: r145761", "tree": {"sha": "f8e7980c4ddad3e03c0757bfe0e6a2bf6ede4863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f8e7980c4ddad3e03c0757bfe0e6a2bf6ede4863"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ac7316d991eec35011eaa0c6fa058c79f38bacc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ac7316d991eec35011eaa0c6fa058c79f38bacc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ac7316d991eec35011eaa0c6fa058c79f38bacc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ac7316d991eec35011eaa0c6fa058c79f38bacc/comments", "author": null, "committer": null, "parents": [{"sha": "557cc596c9084fc279b1cb2f1aa77c0d55f6aafe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/557cc596c9084fc279b1cb2f1aa77c0d55f6aafe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/557cc596c9084fc279b1cb2f1aa77c0d55f6aafe"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "49b00c7bf853d25c3384b00045cc6e4c85604e55", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=2ac7316d991eec35011eaa0c6fa058c79f38bacc", "patch": "@@ -1,3 +1,9 @@\n+2009-04-08  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+        * io/open.c (already_open): Test for POSIX close return value.\n+        * io/unit.c (close_unit_1): Likewise.\n+        * io/unix.c (raw_close): Return 0 for success for preconnected units.\n+\n 2009-04-08  Janne Blomqvist  <jb@gcc.gnu.org>\n \n         * runtime/string.c (compare0): Use gfc_charlen_type."}, {"sha": "e3709f72333f3177b4d24f384c24fe4070462057", "filename": "libgfortran/io/open.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2Fio%2Fopen.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2Fio%2Fopen.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fopen.c?ref=2ac7316d991eec35011eaa0c6fa058c79f38bacc", "patch": "@@ -682,7 +682,7 @@ already_open (st_parameter_open *opp, gfc_unit * u, unit_flags * flags)\n \t}\n #endif\n \n-      if (sclose (u->s) == FAILURE)\n+      if (sclose (u->s) == -1)\n \t{\n \t  unlock_unit (u);\n \t  generate_error (&opp->common, LIBERROR_OS,"}, {"sha": "00bea5a9b613f7b505b86b94c3e364b935d96626", "filename": "libgfortran/io/unit.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2Fio%2Funit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2Fio%2Funit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funit.c?ref=2ac7316d991eec35011eaa0c6fa058c79f38bacc", "patch": "@@ -626,7 +626,7 @@ close_unit_1 (gfc_unit *u, int locked)\n   if (u->previous_nonadvancing_write)\n     finish_last_advance_record (u);\n \n-  rc = (u->s == NULL) ? 0 : sclose (u->s) == FAILURE;\n+  rc = (u->s == NULL) ? 0 : sclose (u->s) == -1;\n \n   u->closed = 1;\n   if (!locked)"}, {"sha": "2fe73bbff1b928a834999a9d13566d44f38911b4", "filename": "libgfortran/io/unix.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2Fio%2Funix.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ac7316d991eec35011eaa0c6fa058c79f38bacc/libgfortran%2Fio%2Funix.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Funix.c?ref=2ac7316d991eec35011eaa0c6fa058c79f38bacc", "patch": "@@ -349,7 +349,7 @@ raw_close (unix_stream * s)\n       && s->fd != STDIN_FILENO)\n     retval = close (s->fd);\n   else\n-    retval = SUCCESS;\n+    retval = 0;\n   free_mem (s);\n   return retval;\n }"}]}