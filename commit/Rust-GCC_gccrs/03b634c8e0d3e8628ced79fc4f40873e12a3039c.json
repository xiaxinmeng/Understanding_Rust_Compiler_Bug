{"sha": "03b634c8e0d3e8628ced79fc4f40873e12a3039c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNiNjM0YzhlMGQzZTg2MjhjZWQ3OWZjNGY0MDg3M2UxMmEzMDM5Yw==", "commit": {"author": {"name": "Cl\u00e9ment Chigot", "email": "clement.chigot@atos.net", "date": "2021-07-05T15:19:44Z"}, "committer": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-07-06T19:30:52Z"}, "message": "fixincludes: AIX socket.h.\n\nAdd more context to aix_externcpp1 selection to ensure\nthat the fix is correctly applied even in future AIX versions.\n\nfixincludes/Changelog:\n2021-07-01  Cl\u00e9ment Chigot  <clement.chigot@atos.net>\n\n\t* inclhack.def (aix_externcpp1): Improve select regexp.\n\t* fixincl.x: Regenerate.\n\t* tests/base/sys/socket.h: Update.", "tree": {"sha": "fb56cf05022b57f184d31797a943de6b966a2f45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb56cf05022b57f184d31797a943de6b966a2f45"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03b634c8e0d3e8628ced79fc4f40873e12a3039c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b634c8e0d3e8628ced79fc4f40873e12a3039c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03b634c8e0d3e8628ced79fc4f40873e12a3039c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03b634c8e0d3e8628ced79fc4f40873e12a3039c/comments", "author": null, "committer": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f65878178ab05180a5937f11f8fdb755678a82ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f65878178ab05180a5937f11f8fdb755678a82ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f65878178ab05180a5937f11f8fdb755678a82ce"}], "stats": {"total": 20, "additions": 13, "deletions": 7}, "files": [{"sha": "6c50e9721651242e32085d665b05d89af945d3d6", "filename": "fixincludes/fixincl.x", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b634c8e0d3e8628ced79fc4f40873e12a3039c/fixincludes%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b634c8e0d3e8628ced79fc4f40873e12a3039c/fixincludes%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixincl.x?ref=03b634c8e0d3e8628ced79fc4f40873e12a3039c", "patch": "@@ -2,11 +2,11 @@\n  *\n  * DO NOT EDIT THIS FILE   (fixincl.x)\n  *\n- * It has been AutoGen-ed  December  9, 2020 at 11:16:08 AM by AutoGen 5.18.16\n+ * It has been AutoGen-ed  July  1, 2021 at 03:44:46 PM by AutoGen 5.18.7\n  * From the definitions    inclhack.def\n  * and the template file   fixincl\n  */\n-/* DO NOT SVN-MERGE THIS FILE, EITHER Wed Dec  9 11:16:08 EST 2020\n+/* DO NOT SVN-MERGE THIS FILE, EITHER Thu Jul  1 15:44:46 CEST 2021\n  *\n  * You must regenerate it.  Use the ./genfixes script.\n  *\n@@ -827,7 +827,8 @@ tSCC* apzAix_Externcpp1Machs[] = {\n  */\n tSCC zAix_Externcpp1Select0[] =\n        \"#ifndef _KERNEL\\n\\\n-#ifdef __cplusplus\";\n+#ifdef __cplusplus\\n\\\n+extern \\\"C\\\" int naccept\\\\(int, struct sockaddr \\\\*, socklen_t \\\\*\\\\);\";\n \n #define    AIX_EXTERNCPP1_TEST_CT  1\n static tTestDesc aAix_Externcpp1Tests[] = {\n@@ -840,7 +841,8 @@ static const char* apzAix_Externcpp1Patch[] = {\n     \"format\",\n     \"#ifndef _KERNEL\\n\\\n #ifdef __cplusplus\\n\\\n-extern \\\"C++\\\" {\",\n+extern \\\"C++\\\" {\\n\\\n+extern \\\"C\\\" int naccept(int, struct sockaddr *, socklen_t *);\",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *"}, {"sha": "b7ad6982e96a4a2aa548f025e211b42001b5c6d4", "filename": "fixincludes/inclhack.def", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b634c8e0d3e8628ced79fc4f40873e12a3039c/fixincludes%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b634c8e0d3e8628ced79fc4f40873e12a3039c/fixincludes%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Finclhack.def?ref=03b634c8e0d3e8628ced79fc4f40873e12a3039c", "patch": "@@ -554,13 +554,16 @@ fix = {\n   mach      = \"*-*-aix*\";\n   files     = \"sys/socket.h\";\n   select    = \"#ifndef _KERNEL\\n\"\n-\t      \"#ifdef __cplusplus\";\n+\t      \"#ifdef __cplusplus\\n\"\n+\t      \"extern \\\"C\\\" int naccept\\\\(int, struct sockaddr \\\\*, socklen_t \\\\*\\\\);\";\n   c_fix     = format;\n   c_fix_arg = \"#ifndef _KERNEL\\n\"\n \t      \"#ifdef __cplusplus\\n\"\n-              \"extern \\\"C++\\\" {\";\n+\t      \"extern \\\"C++\\\" {\\n\"\n+\t      \"extern \\\"C\\\" int naccept(int, struct sockaddr *, socklen_t *);\";\n   test_text = \"#ifndef _KERNEL\\n\"\n-\t      \"#ifdef __cplusplus\";\n+\t      \"#ifdef __cplusplus\\n\"\n+\t      \"extern \\\"C\\\" int naccept(int, struct sockaddr *, socklen_t *);\";\n };\n \n fix = {"}, {"sha": "588a378fe0abe5b542a89ee8a7e2bcee3bde106c", "filename": "fixincludes/tests/base/sys/socket.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03b634c8e0d3e8628ced79fc4f40873e12a3039c/fixincludes%2Ftests%2Fbase%2Fsys%2Fsocket.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03b634c8e0d3e8628ced79fc4f40873e12a3039c/fixincludes%2Ftests%2Fbase%2Fsys%2Fsocket.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fsys%2Fsocket.h?ref=03b634c8e0d3e8628ced79fc4f40873e12a3039c", "patch": "@@ -13,6 +13,7 @@\n #ifndef _KERNEL\n #ifdef __cplusplus\n extern \"C++\" {\n+extern \"C\" int naccept(int, struct sockaddr *, socklen_t *);\n #endif  /* AIX_EXTERNCPP1_CHECK */\n \n "}]}