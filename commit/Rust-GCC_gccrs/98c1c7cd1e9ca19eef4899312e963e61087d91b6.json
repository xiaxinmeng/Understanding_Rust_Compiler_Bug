{"sha": "98c1c7cd1e9ca19eef4899312e963e61087d91b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OThjMWM3Y2QxZTljYTE5ZWVmNDg5OTMxMmU5NjNlNjEwODdkOTFiNg==", "commit": {"author": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-11-29T16:52:41Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2010-11-29T16:52:41Z"}, "message": "strings-1.m: Move to...\n\n\ngcc/testsuite:\n\n\t* gcc/testsuite/objc.dg/strings-1.m: Move to...\n\t* gcc/testsuite/objc.dg/strings/strings-1.m: ... here. Update paths.\n\t* gcc/testsuite/objc.dg/strings-2.m: Move to ...\n\t* gcc/testsuite/objc.dg/strings/strings-2.m ... here, provide a \n\tconstructor and class reference for NeXT runtime.  Update paths.\n\t* gcc/testsuite/obj-c++.dg/strings-1.m: Move to...\n\t* gcc/testsuite/obj-c++.dg/strings/strings-1.m: ... here. Update paths.\n\t* gcc/testsuite/obj-c++.dg/strings-2.m: Move to ...\n\t* gcc/testsuite/obj-c__.dg/strings/strings-2.m ... here, provide a \n\tconstructor and class reference for NeXT runtime.  Update paths.\n\nFrom-SVN: r167253", "tree": {"sha": "29b53ac5fc814506a12a7bd3c596931c3da8b606", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29b53ac5fc814506a12a7bd3c596931c3da8b606"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/98c1c7cd1e9ca19eef4899312e963e61087d91b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98c1c7cd1e9ca19eef4899312e963e61087d91b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/98c1c7cd1e9ca19eef4899312e963e61087d91b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/98c1c7cd1e9ca19eef4899312e963e61087d91b6/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e12bcbf492904c2ead0b91a00e9eff35b2d67c94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e12bcbf492904c2ead0b91a00e9eff35b2d67c94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e12bcbf492904c2ead0b91a00e9eff35b2d67c94"}], "stats": {"total": 73, "additions": 63, "deletions": 10}, "files": [{"sha": "19080bcb038ba4b63fa6887fbbd9089c23b4015d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=98c1c7cd1e9ca19eef4899312e963e61087d91b6", "patch": "@@ -1,3 +1,16 @@\n+2010-11-29  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\t* gcc/testsuite/objc.dg/strings-1.m: Move to...\n+\t* gcc/testsuite/objc.dg/strings/strings-1.m: ... here. Update paths.\n+\t* gcc/testsuite/objc.dg/strings-2.m: Move to ...\n+\t* gcc/testsuite/objc.dg/strings/strings-2.m ... here, provide a \n+\tconstructor and class reference for NeXT runtime.  Update paths.\n+\t* gcc/testsuite/obj-c++.dg/strings-1.m: Move to...\n+\t* gcc/testsuite/obj-c++.dg/strings/strings-1.m: ... here. Update paths.\n+\t* gcc/testsuite/obj-c++.dg/strings-2.m: Move to ...\n+\t* gcc/testsuite/obj-c__.dg/strings/strings-2.m ... here, provide a \n+\tconstructor and class reference for NeXT runtime.  Update paths.\n+\t\n 2010-11-29  Dodji Seketeli  <dodji@redhat.com>\n \n \tPR c++/42260"}, {"sha": "fc3f211857aa223ea2cc3043e676ed7dae66ef57", "filename": "gcc/testsuite/obj-c++.dg/strings/strings-1.mm", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fstrings%2Fstrings-1.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fstrings%2Fstrings-1.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fstrings%2Fstrings-1.mm?ref=98c1c7cd1e9ca19eef4899312e963e61087d91b6", "patch": "@@ -1,8 +1,8 @@\n /* Contributed by Nicola Pero <nicola.pero@meta-innovation.com>, November 2010.  */\n /* { dg-do compile } */\n \n-#include \"../objc-obj-c++-shared/Object1.h\"\n-#include \"../objc-obj-c++-shared/next-mapping.h\"\n+#include \"../../objc-obj-c++-shared/Object1.h\"\n+#include \"../../objc-obj-c++-shared/next-mapping.h\"\n #ifndef __NEXT_RUNTIME__\n #include <objc/NXConstStr.h>\n #endif", "previous_filename": "gcc/testsuite/obj-c++.dg/strings-1.mm"}, {"sha": "09d7a7f1f3205d6cba490652a15d972b7aca6c2d", "filename": "gcc/testsuite/obj-c++.dg/strings/strings-2.mm", "status": "renamed", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fstrings%2Fstrings-2.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fstrings%2Fstrings-2.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fstrings%2Fstrings-2.mm?ref=98c1c7cd1e9ca19eef4899312e963e61087d91b6", "patch": "@@ -5,10 +5,10 @@\n /* { dg-options \"-fconstant-string-class=MyTestString\" } */\n /* { dg-options \"-mno-constant-cfstrings -fconstant-string-class=MyTestString\" { target *-*-darwin* } } */\n \n-/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.mm\" } */\n+/* { dg-additional-sources \"../../objc-obj-c++-shared/Object1.mm\" } */\n \n-#include \"../objc-obj-c++-shared/Object1.h\"\n-#include \"../objc-obj-c++-shared/next-mapping.h\"\n+#include \"../../objc-obj-c++-shared/Object1.h\"\n+#include \"../../objc-obj-c++-shared/next-mapping.h\"\n \n #include <stdlib.h> /* For abort() */\n \n@@ -31,6 +31,14 @@ - (void) check\n }\n @end\n \n+#ifdef __NEXT_RUNTIME__\n+#  ifdef NEXT_OBJC_USE_NEW_INTERFACE\n+struct fudge_objc_class _MyTestStringClassReference;\n+#  else\n+struct objc_class _MyTestStringClassReference;\n+#  endif\n+#endif\n+\n int main (void)\n {\n   MyTestString *test_valid1 = @\"test\";\n@@ -49,3 +57,15 @@ int main (void)\n \n   return 0;\n }\n+\n+#ifdef __NEXT_RUNTIME__\n+/* The MyTestString metaclass will need to be initialized before we can\n+   send messages to strings.  */\n+\n+void testsuite_mytest_string_init (void) __attribute__((constructor));\n+void testsuite_mytest_string_init (void) {\n+  memcpy (&_MyTestStringClassReference,\n+\t  objc_getClass (\"MyTestString\"),\n+\t  sizeof (_MyTestStringClassReference));\n+}\n+#endif\n\\ No newline at end of file", "previous_filename": "gcc/testsuite/obj-c++.dg/strings-2.mm"}, {"sha": "fc3f211857aa223ea2cc3043e676ed7dae66ef57", "filename": "gcc/testsuite/objc.dg/strings/strings-1.m", "status": "renamed", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobjc.dg%2Fstrings%2Fstrings-1.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobjc.dg%2Fstrings%2Fstrings-1.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fstrings%2Fstrings-1.m?ref=98c1c7cd1e9ca19eef4899312e963e61087d91b6", "patch": "@@ -1,8 +1,8 @@\n /* Contributed by Nicola Pero <nicola.pero@meta-innovation.com>, November 2010.  */\n /* { dg-do compile } */\n \n-#include \"../objc-obj-c++-shared/Object1.h\"\n-#include \"../objc-obj-c++-shared/next-mapping.h\"\n+#include \"../../objc-obj-c++-shared/Object1.h\"\n+#include \"../../objc-obj-c++-shared/next-mapping.h\"\n #ifndef __NEXT_RUNTIME__\n #include <objc/NXConstStr.h>\n #endif", "previous_filename": "gcc/testsuite/objc.dg/strings-1.m"}, {"sha": "29d9375bf7b1f9d98bd33bb1d8e46c854784aebc", "filename": "gcc/testsuite/objc.dg/strings/strings-2.m", "status": "renamed", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobjc.dg%2Fstrings%2Fstrings-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/98c1c7cd1e9ca19eef4899312e963e61087d91b6/gcc%2Ftestsuite%2Fobjc.dg%2Fstrings%2Fstrings-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fstrings%2Fstrings-2.m?ref=98c1c7cd1e9ca19eef4899312e963e61087d91b6", "patch": "@@ -5,10 +5,10 @@\n /* { dg-options \"-fconstant-string-class=MyTestString\" } */\n /* { dg-options \"-mno-constant-cfstrings -fconstant-string-class=MyTestString\" { target *-*-darwin* } } */\n \n-/* { dg-additional-sources \"../objc-obj-c++-shared/Object1.m\" } */\n+/* { dg-additional-sources \"../../objc-obj-c++-shared/Object1.m\" } */\n \n-#include \"../objc-obj-c++-shared/Object1.h\"\n-#include \"../objc-obj-c++-shared/next-mapping.h\"\n+#include \"../../objc-obj-c++-shared/Object1.h\"\n+#include \"../../objc-obj-c++-shared/next-mapping.h\"\n \n #include <stdlib.h> /* For abort() */\n \n@@ -31,6 +31,14 @@ - (void) check\n }\n @end\n \n+#ifdef __NEXT_RUNTIME__\n+#  ifdef NEXT_OBJC_USE_NEW_INTERFACE\n+struct fudge_objc_class _MyTestStringClassReference;\n+#  else\n+struct objc_class _MyTestStringClassReference;\n+#  endif\n+#endif\n+\n int main (void)\n {\n   MyTestString *test_valid1 = @\"test\";\n@@ -49,3 +57,15 @@ int main (void)\n \n   return 0;\n }\n+\n+#ifdef __NEXT_RUNTIME__\n+/* The MyTestString metaclass will need to be initialized before we can\n+   send messages to strings.  */\n+\n+void testsuite_mytest_string_init (void) __attribute__((constructor));\n+void testsuite_mytest_string_init (void) {\n+  memcpy (&_MyTestStringClassReference,\n+\t  objc_getClass (\"MyTestString\"),\n+\t  sizeof (_MyTestStringClassReference));\n+}\n+#endif\n\\ No newline at end of file", "previous_filename": "gcc/testsuite/objc.dg/strings-2.m"}]}