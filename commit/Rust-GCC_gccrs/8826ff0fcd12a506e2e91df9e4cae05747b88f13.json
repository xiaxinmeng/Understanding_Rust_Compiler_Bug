{"sha": "8826ff0fcd12a506e2e91df9e4cae05747b88f13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODgyNmZmMGZjZDEyYTUwNmUyZTkxZGY5ZTRjYWUwNTc0N2I4OGYxMw==", "commit": {"author": {"name": "Per Bothner", "email": "pbothner@apple.com", "date": "2003-03-20T16:43:19Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2003-03-20T16:43:19Z"}, "message": "Various cleanups to help compile server.\n\n\t* line-map.c (add_line_map):  Allow leaving the outermost file.\n\tAllowing entering an outermost-file after the initial time.\n\n\t* toplev.c (pop_srcloc):  Allow popping from initial file.\n\nFrom-SVN: r64616", "tree": {"sha": "bff4074818d1d2d8275592e02d37e804e47ed8c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bff4074818d1d2d8275592e02d37e804e47ed8c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8826ff0fcd12a506e2e91df9e4cae05747b88f13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8826ff0fcd12a506e2e91df9e4cae05747b88f13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8826ff0fcd12a506e2e91df9e4cae05747b88f13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8826ff0fcd12a506e2e91df9e4cae05747b88f13/comments", "author": null, "committer": null, "parents": [{"sha": "015c318662801cd61e48698362d3d11151fbfdfa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/015c318662801cd61e48698362d3d11151fbfdfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/015c318662801cd61e48698362d3d11151fbfdfa"}], "stats": {"total": 33, "additions": 24, "deletions": 9}, "files": [{"sha": "fe92cf9c872e4ccf4d3a2f832e8f98a274d28191", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8826ff0fcd12a506e2e91df9e4cae05747b88f13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8826ff0fcd12a506e2e91df9e4cae05747b88f13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8826ff0fcd12a506e2e91df9e4cae05747b88f13", "patch": "@@ -1,3 +1,12 @@\n+2003-03-20  Per Bothner  <pbothner@apple.com>\n+\n+\tVarious cleanups to help compile server.\n+\n+\t* line-map.c (add_line_map):  Allow leaving the outermost file.\n+\tAllowing entering an outermost-file after the initial time. \n+\n+\t* toplev.c (pop_srcloc):  Allow popping from initial file.\n+\n 2003-03-20  Kazu Hirata  <kazu at cs dot umass dot edu>\n \n \t* fold-const.c (fold): Fold A - (A & B) into ~B & A."}, {"sha": "442e314d03028c3631dc038a8ee6eebb9d94d0cb", "filename": "gcc/line-map.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8826ff0fcd12a506e2e91df9e4cae05747b88f13/gcc%2Fline-map.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8826ff0fcd12a506e2e91df9e4cae05747b88f13/gcc%2Fline-map.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fline-map.c?ref=8826ff0fcd12a506e2e91df9e4cae05747b88f13", "patch": "@@ -106,9 +106,9 @@ add_line_map (set, reason, sysp, from_line, to_file, to_line)\n \n       if (MAIN_FILE_P (map - 1))\n \t{\n-\t  error = true;\n-\t  reason = LC_RENAME;\n-\t  from = map - 1;\n+\t  set->depth--;\n+\t  set->used--;\n+\t  return NULL;\n \t}\n       else\n \t{\n@@ -139,8 +139,8 @@ add_line_map (set, reason, sysp, from_line, to_file, to_line)\n \n   if (reason == LC_ENTER)\n     {\n+      map->included_from = set->depth == 0 ? -1 : (int) (set->used - 2);\n       set->depth++;\n-      map->included_from = set->used - 2;\n       if (set->trace_includes)\n \ttrace_include (set, map);\n     }"}, {"sha": "eadcb36958f910b0fcfe079d374603877f2b1ffb", "filename": "gcc/toplev.c", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8826ff0fcd12a506e2e91df9e4cae05747b88f13/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8826ff0fcd12a506e2e91df9e4cae05747b88f13/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=8826ff0fcd12a506e2e91df9e4cae05747b88f13", "patch": "@@ -2166,11 +2166,17 @@ pop_srcloc ()\n   input_file_stack = fs->next;\n   free (fs);\n   input_file_stack_tick++;\n-  /* The initial source file is never popped.  */\n-  if (!input_file_stack)\n-    abort ();\n-  input_filename = input_file_stack->name;\n-  lineno = input_file_stack->line;\n+\n+  if (input_file_stack)\n+    {\n+      input_filename = input_file_stack->name;\n+      lineno = input_file_stack->line;\n+    }\n+  else\n+    {\n+      input_filename = NULL;\n+      lineno = 0;\n+    }\n }\n \n /* Compile an entire translation unit.  Write a file of assembly"}]}