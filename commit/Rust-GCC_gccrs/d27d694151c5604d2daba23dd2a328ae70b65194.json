{"sha": "d27d694151c5604d2daba23dd2a328ae70b65194", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI3ZDY5NDE1MWM1NjA0ZDJkYWJhMjNkZDJhMzI4YWU3MGI2NTE5NA==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2021-09-08T15:38:18Z"}, "committer": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2021-09-08T15:38:18Z"}, "message": "testsuite: Allow .sdata in more cases in gcc.dg/array-quals-1.c\n\nWhen testing for Nios II (gcc-testresults shows this for MIPS as\nwell), failures of gcc.dg/array-quals-1.c appear where a symbol was\nfound in .sdata rather than one of the expected sections.\n\nFAIL: gcc.dg/array-quals-1.c scan-assembler-symbol-section symbol ^_?a$ (found a) has section ^\\\\.(const|rodata|srodata)|\\\\[RO\\\\] (found .sdata)\nFAIL: gcc.dg/array-quals-1.c scan-assembler-symbol-section symbol ^_?b$ (found b) has section ^\\\\.(const|rodata|srodata)|\\\\[RO\\\\] (found .sdata)\nFAIL: gcc.dg/array-quals-1.c scan-assembler-symbol-section symbol ^_?c$ (found c) has section ^\\\\.(const|rodata|srodata)|\\\\[RO\\\\] (found .sdata)\nFAIL: gcc.dg/array-quals-1.c scan-assembler-symbol-section symbol ^_?d$ (found d) has section ^\\\\.(const|rodata|srodata)|\\\\[RO\\\\] (found .sdata)\n\nJakub's commit 0b34dbc0a24864b1674bff7a92fa3cf0f1cbcea1 allowed .sdata\nfor many variables in that test where use of .sdata caused a failure\non powerpc-linux.  I'm presuming the choice of which variables had\n.sdata allowed was based only on the code generated for powerpc-linux,\nnot on any reason it would be wrong to allow it for the other\nvariables; thus, this patch adjusts the test to allow .sdata for some\nmore variables where that is needed on Nios II (and in one case where\nit's not needed on Nios II, but the test results on gcc-testresults\nsuggest that it is needed on MIPS).\n\nTested with no regressions with cross to nios2-elf.\n\n\t* gcc.dg/array-quals-1.c: Allow .sdata section in more cases.", "tree": {"sha": "cf84fff264da72b8b5760579a69e4f7fe87e6b05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf84fff264da72b8b5760579a69e4f7fe87e6b05"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d27d694151c5604d2daba23dd2a328ae70b65194", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d27d694151c5604d2daba23dd2a328ae70b65194", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d27d694151c5604d2daba23dd2a328ae70b65194", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d27d694151c5604d2daba23dd2a328ae70b65194/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d081516ae1771984bfacb9f2c402a1973fa70d69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d081516ae1771984bfacb9f2c402a1973fa70d69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d081516ae1771984bfacb9f2c402a1973fa70d69"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "b9b55f774bc2dfebd5b22536a9a3023f5e0bf8f7", "filename": "gcc/testsuite/gcc.dg/array-quals-1.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d27d694151c5604d2daba23dd2a328ae70b65194/gcc%2Ftestsuite%2Fgcc.dg%2Farray-quals-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d27d694151c5604d2daba23dd2a328ae70b65194/gcc%2Ftestsuite%2Fgcc.dg%2Farray-quals-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Farray-quals-1.c?ref=d27d694151c5604d2daba23dd2a328ae70b65194", "patch": "@@ -7,26 +7,26 @@\n /* { dg-additional-options \"-fno-pie\" { target pie } } */\n /* The MMIX port always switches to the .data section at the end of a file.  */\n /* { dg-final { scan-assembler-not \"\\\\.data(?!\\\\.rel\\\\.ro)\" { xfail powerpc*-*-aix* mmix-*-* x86_64-*-mingw* } } } */\n-/* { dg-final { scan-assembler-symbol-section {^_?a$} {^\\.(const|rodata|srodata)|\\[RO\\]} } } */\n+/* { dg-final { scan-assembler-symbol-section {^_?a$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n static const int a[2] = { 1, 2 };\n /* { dg-final { scan-assembler-symbol-section {^_?a1$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n const int a1[2] = { 1, 2 };\n typedef const int ci;\n-/* { dg-final { scan-assembler-symbol-section {^_?b$} {^\\.(const|rodata|srodata)|\\[RO\\]} } } */\n+/* { dg-final { scan-assembler-symbol-section {^_?b$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n static ci b[2] = { 3, 4 };\n /* { dg-final { scan-assembler-symbol-section {^_?b1$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n ci b1[2] = { 3, 4 };\n typedef int ia[2];\n-/* { dg-final { scan-assembler-symbol-section {^_?c$} {^\\.(const|rodata|srodata)|\\[RO\\]} } } */\n+/* { dg-final { scan-assembler-symbol-section {^_?c$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n static const ia c = { 5, 6 };\n /* { dg-final { scan-assembler-symbol-section {^_?c1$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n const ia c1 = { 5, 6 };\n typedef const int cia[2];\n-/* { dg-final { scan-assembler-symbol-section {^_?d$} {^\\.(const|rodata|srodata)|\\[RO\\]} } } */\n+/* { dg-final { scan-assembler-symbol-section {^_?d$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n static cia d = { 7, 8 };\n /* { dg-final { scan-assembler-symbol-section {^_?d1$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n cia d1 = { 7, 8 };\n-/* { dg-final { scan-assembler-symbol-section {^_?e$} {^\\.(const|rodata|srodata)|\\[RO\\]} } } */\n+/* { dg-final { scan-assembler-symbol-section {^_?e$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n static cia e[2] = { { 1, 2 }, { 3, 4 } };\n /* { dg-final { scan-assembler-symbol-section {^_?e1$} {^\\.(const|rodata|srodata|sdata)|\\[RO\\]} } } */\n cia e1[2] = { { 1, 2 }, { 3, 4 } };"}]}