{"sha": "7c81527e48c72ac3409f3bf848eca64bf69015e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2M4MTUyN2U0OGM3MmFjMzQwOWYzYmY4NDhlY2E2NGJmNjkwMTVlNQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-01-31T19:44:24Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2013-01-31T19:44:24Z"}, "message": "runtime: Remove confusion about split stack functions in backtrace.\n\nFrom-SVN: r195627", "tree": {"sha": "f9951e5980f39941e3976bda28868e6036f21518", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f9951e5980f39941e3976bda28868e6036f21518"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7c81527e48c72ac3409f3bf848eca64bf69015e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c81527e48c72ac3409f3bf848eca64bf69015e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c81527e48c72ac3409f3bf848eca64bf69015e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c81527e48c72ac3409f3bf848eca64bf69015e5/comments", "author": null, "committer": null, "parents": [{"sha": "dbdbd982df2d044f3b43b2f41ef1ada5667160f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbdbd982df2d044f3b43b2f41ef1ada5667160f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbdbd982df2d044f3b43b2f41ef1ada5667160f9"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "b6c494cb3466b674a951245798fd6832414bd4aa", "filename": "libgo/runtime/go-callers.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7c81527e48c72ac3409f3bf848eca64bf69015e5/libgo%2Fruntime%2Fgo-callers.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7c81527e48c72ac3409f3bf848eca64bf69015e5/libgo%2Fruntime%2Fgo-callers.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-callers.c?ref=7c81527e48c72ac3409f3bf848eca64bf69015e5", "patch": "@@ -16,6 +16,7 @@\n struct callers_data\n {\n   Location *locbuf;\n+  int skip;\n   int index;\n   int max;\n };\n@@ -41,6 +42,12 @@ callback (void *data, uintptr_t pc, const char *filename, int lineno,\n \treturn 0;\n     }\n \n+  if (arg->skip > 0)\n+    {\n+      --arg->skip;\n+      return 0;\n+    }\n+\n   loc = &arg->locbuf[arg->index];\n   loc->pc = pc;\n \n@@ -75,10 +82,11 @@ runtime_callers (int32 skip, Location *locbuf, int32 m)\n   struct callers_data data;\n \n   data.locbuf = locbuf;\n+  data.skip = skip + 1;\n   data.index = 0;\n   data.max = m;\n-  backtrace_full (__go_get_backtrace_state (), skip + 1, callback,\n-\t\t  error_callback, &data);\n+  backtrace_full (__go_get_backtrace_state (), 0, callback, error_callback,\n+\t\t  &data);\n   return data.index;\n }\n "}]}