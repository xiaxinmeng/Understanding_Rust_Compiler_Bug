{"sha": "1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWE0ZmM0OWQ3ZmNjZDEwNDhlZWM3YzczMTUzZTVkZTRkYTBhNTg4NQ==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2010-07-02T11:48:30Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2010-07-02T11:48:30Z"}, "message": "re PR target/44707 (operand requires impossible reload)\n\nChangeLog:\n\n\tPR target/44707\n\t* config/rs6000/rs6000.c (rs6000_legitimize_reload_address): Recognize\n\t(lo_sum (high ...) ...) patterns generated by earlier passes.\n\ntestsuite/ChangeLog:\n\n\tPR target/44707\n\t* gcc.c-torture/compile/pr44707.c: New test.\n\nFrom-SVN: r161703", "tree": {"sha": "6f82b49dda63de30e711545eed096b715a9481f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6f82b49dda63de30e711545eed096b715a9481f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/comments", "author": null, "committer": null, "parents": [{"sha": "d1f736a2d7b21c9fcc19355e8dcd82c99051c107", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1f736a2d7b21c9fcc19355e8dcd82c99051c107", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1f736a2d7b21c9fcc19355e8dcd82c99051c107"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "4d05ea2757ab313ef0c7e7be48610901cbb9934d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "patch": "@@ -1,3 +1,9 @@\n+2010-07-02  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\tPR target/44707\n+\t* config/rs6000/rs6000.c (rs6000_legitimize_reload_address): Recognize\n+\t(lo_sum (high ...) ...) patterns generated by earlier passes.\n+\n 2010-07-02  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* doc/install.texi (Prerequisites): Document Perl requirement on"}, {"sha": "a98b4ddc8649e86120cdfb29b2d83a3f80fdb8be", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "patch": "@@ -5934,6 +5934,17 @@ rs6000_legitimize_reload_address (rtx x, enum machine_mode mode,\n       return x;\n     }\n \n+  /* Likewise for (lo_sum (high ...) ...) output we have generated.  */\n+  if (GET_CODE (x) == LO_SUM\n+      && GET_CODE (XEXP (x, 0)) == HIGH)\n+    {\n+      push_reload (XEXP (x, 0), NULL_RTX, &XEXP (x, 0), NULL,\n+\t\t   BASE_REG_CLASS, Pmode, VOIDmode, 0, 0,\n+\t\t   opnum, (enum reload_type)type);\n+      *win = 1;\n+      return x;\n+    }\n+\n #if TARGET_MACHO\n   if (DEFAULT_ABI == ABI_DARWIN && flag_pic\n       && GET_CODE (x) == LO_SUM"}, {"sha": "9fe76bc4ac59e73d9d321abc7f2943a74db4e15a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "patch": "@@ -1,3 +1,8 @@\n+2010-07-02  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\tPR target/44707\n+\t* gcc.c-torture/compile/pr44707.c: New test.\n+\n 2010-07-02  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/44039"}, {"sha": "9031f0042c9dbb9af0806bb687a0fd69abb2a036", "filename": "gcc/testsuite/gcc.c-torture/compile/pr44707.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr44707.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a4fc49d7fccd1048eec7c73153e5de4da0a5885/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr44707.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr44707.c?ref=1a4fc49d7fccd1048eec7c73153e5de4da0a5885", "patch": "@@ -0,0 +1,14 @@\n+extern struct { int a, b, c, d; } v;\n+extern int w;\n+\n+void\n+foo (void)\n+{\n+  int e1 = v.a;\n+  int e2 = w;\n+  int e3 = v.b;\n+  int e4 = v.c;\n+  int e5 = v.d;\n+  __asm__ volatile (\"/* %0 %1 %2 %3 %4 */\" : : \"nro\" (e1), \"nro\" (e2), \"nro\" (e3), \"nro\" (e4), \"nro\" (e5));\n+}\n+"}]}