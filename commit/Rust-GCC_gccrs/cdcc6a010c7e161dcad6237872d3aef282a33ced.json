{"sha": "cdcc6a010c7e161dcad6237872d3aef282a33ced", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2RjYzZhMDEwYzdlMTYxZGNhZDYyMzc4NzJkM2FlZjI4MmEzM2NlZA==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-07-19T02:51:45Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1997-07-19T02:51:45Z"}, "message": "configure.in: Invoke AC_CONFIG_HEADER.\n\n\t* configure.in: Invoke AC_CONFIG_HEADER.\n\tCheck for string.h, strings.h, stdlib.h, time.h, unistd.h.\n\tCheck for whether malloc/realloc/free need to be declared.\n\t(links): Rename config.h to config2.h.\n\t(AC_OUTPUT): Create stamp-h.\n\nFrom-SVN: r14488", "tree": {"sha": "7f43d00086bddbf7108a9729c1578450a3712caa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f43d00086bddbf7108a9729c1578450a3712caa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cdcc6a010c7e161dcad6237872d3aef282a33ced", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdcc6a010c7e161dcad6237872d3aef282a33ced", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdcc6a010c7e161dcad6237872d3aef282a33ced", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdcc6a010c7e161dcad6237872d3aef282a33ced/comments", "author": null, "committer": null, "parents": [{"sha": "d68b51efdbcc8a6732d109f984485c810a15f26d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d68b51efdbcc8a6732d109f984485c810a15f26d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d68b51efdbcc8a6732d109f984485c810a15f26d"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "63438a377be6e7427bf497e1710997823da4c2af", "filename": "gcc/configure.in", "status": "modified", "additions": 20, "deletions": 3, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdcc6a010c7e161dcad6237872d3aef282a33ced/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdcc6a010c7e161dcad6237872d3aef282a33ced/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=cdcc6a010c7e161dcad6237872d3aef282a33ced", "patch": "@@ -22,6 +22,8 @@\n \n # Initialization and defaults\n AC_INIT(tree.c)\n+AC_CONFIG_HEADER(config.h:config.in)\n+\n native_prefix=/usr\n remove=rm\n hard_link=ln\n@@ -123,6 +125,12 @@ AC_PROG_INSTALL\n AC_PROG_CC\n AC_PROG_MAKE_SET\n \n+AC_CHECK_HEADERS(stddef.h string.h strings.h stdlib.h time.h unistd.h)\n+\n+GCC_NEED_DECLARATION(malloc)\n+GCC_NEED_DECLARATION(realloc)\n+GCC_NEED_DECLARATION(free)\n+\n # File extensions\n manext='.1'\n objext='.o'\n@@ -2675,8 +2683,10 @@ fi\n # Set up the header files.\n # $links is the list of header files to create.\n # $vars is the list of shell variables with file names to include.\n+# config2.h is the old config.h.  It is included by the new config.h which\n+# created from config.in.  The goal is to simplify the transition to autoconf.\n vars=\"host_xm_file tm_file xm_file build_xm_file\"\n-links=\"config.h tm.h tconfig.h hconfig.h\"\n+links=\"config2.h tm.h tconfig.h hconfig.h\"\n \n rm -f config.bak\n if [[ -f config.status ]]; then mv -f config.status config.bak; fi\n@@ -3037,7 +3047,14 @@ fi\n # Create the Makefile\n # and configure language subdirectories\n AC_OUTPUT(Makefile,\n-. $srcdir/configure.lang,\n+[\n+. $srcdir/configure.lang\n+case x$CONFIG_HEADERS in\n+xconfig.h:config.in)\n+echo > stamp-h ;;\n+esac\n+],\n+[\n host='${host}'\n build='${build}'\n target='${target}'\n@@ -3065,4 +3082,4 @@ host_overrides='${host_overrides}'\n cross_defines='${cross_defines}'\n cross_overrides='${cross_overrides}'\n build_overrides='${build_overrides}'\n-)\n+])"}]}