{"sha": "83844a7d2a66a0c3b98687890419003980e4bf96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM4NDRhN2QyYTY2YTBjM2I5ODY4Nzg5MDQxOTAwMzk4MGU0YmY5Ng==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2015-05-22T16:34:35Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2015-05-22T16:34:35Z"}, "message": "advsimd-intrinsics.exp: Set dg-do-what-default to compile only on ARM targets without arm_neon_hw...\n\n2015-05-22  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/testsuite/\n\t* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp:\n\tSet dg-do-what-default to compile only on ARM targets without\n\tarm_neon_hw execution support.  Remove redundant c-torture-execute\n\tin loop over test cases.\n\nFrom-SVN: r223580", "tree": {"sha": "3741798912febf296ead1dc945690718dcdc56ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3741798912febf296ead1dc945690718dcdc56ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83844a7d2a66a0c3b98687890419003980e4bf96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83844a7d2a66a0c3b98687890419003980e4bf96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83844a7d2a66a0c3b98687890419003980e4bf96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83844a7d2a66a0c3b98687890419003980e4bf96/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "92d0b05816f5bd8f811177892459727097fe41a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92d0b05816f5bd8f811177892459727097fe41a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92d0b05816f5bd8f811177892459727097fe41a2"}], "stats": {"total": 26, "additions": 22, "deletions": 4}, "files": [{"sha": "b5b7b9f9a074781fc55ea03b7cf7bb2b0f1698c1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83844a7d2a66a0c3b98687890419003980e4bf96/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83844a7d2a66a0c3b98687890419003980e4bf96/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=83844a7d2a66a0c3b98687890419003980e4bf96", "patch": "@@ -1,3 +1,10 @@\n+2015-05-22  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp:\n+\tSet dg-do-what-default to compile only on ARM targets without\n+\tarm_neon_hw execution support.  Remove redundant c-torture-execute\n+\tin loop over test cases.\n+\n 2015-05-22  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \tPR target/65491"}, {"sha": "583832a07cfb71568adc1d2e9afdcb45705b4b2a", "filename": "gcc/testsuite/gcc.target/aarch64/advsimd-intrinsics/advsimd-intrinsics.exp", "status": "modified", "additions": 15, "deletions": 4, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83844a7d2a66a0c3b98687890419003980e4bf96/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fadvsimd-intrinsics.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83844a7d2a66a0c3b98687890419003980e4bf96/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fadvsimd-intrinsics.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fadvsimd-intrinsics%2Fadvsimd-intrinsics.exp?ref=83844a7d2a66a0c3b98687890419003980e4bf96", "patch": "@@ -32,9 +32,20 @@ load_lib torture-options.exp\n \n dg-init\n \n-if {[istarget arm*-*-*]\n-    && ![check_effective_target_arm_neon_ok]} then {\n-  return\n+# The default action for a test is 'run'.  Save current default.\n+global dg-do-what-default\n+set save-dg-do-what-default ${dg-do-what-default}\n+set dg-do-what-default run\n+\n+# For ARM, make sure that we have a target compatible with NEON, and do\n+# not attempt to run execution tests if the hardware doesn't support it.\n+if {[istarget arm*-*-*]} then {\n+    if {![check_effective_target_arm_neon_ok]} then {\n+      return\n+    }\n+    if {![is-effective-target arm_neon_hw]} then {\n+        set dg-do-what-default compile\n+    }\n }\n \n torture-init\n@@ -55,11 +66,11 @@ foreach src [lsort [glob -nocomplain $srcdir/$subdir/*.c]] {\n     # performed if the above runtest_file_p decided this runtest\n     # instance should execute the test\n     gcc_parallel_test_enable 0\n-    c-torture-execute $src $additional_flags\n     gcc-dg-runtest $src \"\" $additional_flags\n     gcc_parallel_test_enable 1\n }\n \n # All done.\n+set dg-do-what-default ${save-dg-do-what-default}\n torture-finish\n dg-finish"}]}