{"sha": "9a060b37a175859748dce4d4cb7265642b0ea848", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWEwNjBiMzdhMTc1ODU5NzQ4ZGNlNGQ0Y2I3MjY1NjQyYjBlYTg0OA==", "commit": {"author": {"name": "Bryce McKinlay", "email": "mckinlay@redhat.com", "date": "2005-01-02T03:35:57Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2005-01-02T03:35:57Z"}, "message": "boehm-gc.h: Include gc_ext_config.h, not gc_config.h.\n\n2005-01-01  Bryce McKinlay  <mckinlay@redhat.com>\n\n\t* include/boehm-gc.h: Include gc_ext_config.h, not gc_config.h.\n\n2005-01-01  Bryce McKinlay  <mckinlay@redhat.com>\n\n\t* configure.ac (AC_CONFIG_HEADERS): Build both include/gc_config.h\n\tand include/gc_ext_config.h.\n\t* include/gc_ext_config.h: New file. Define only THREAD_LOCAL_ALLOC.\n\t* include/gc.h: Undef PACKAGE_* before including gc_config.h.\n\nFrom-SVN: r92801", "tree": {"sha": "3d578519fc9cb151022d0814800672bd94732b72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d578519fc9cb151022d0814800672bd94732b72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9a060b37a175859748dce4d4cb7265642b0ea848", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a060b37a175859748dce4d4cb7265642b0ea848", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a060b37a175859748dce4d4cb7265642b0ea848", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a060b37a175859748dce4d4cb7265642b0ea848/comments", "author": null, "committer": null, "parents": [{"sha": "3ffd0339c74b0024a3a2a7c2713c85e100a82e56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ffd0339c74b0024a3a2a7c2713c85e100a82e56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ffd0339c74b0024a3a2a7c2713c85e100a82e56"}], "stats": {"total": 45, "additions": 42, "deletions": 3}, "files": [{"sha": "5bb9d45a43542261e167d40aae569b519ea98208", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -1,3 +1,10 @@\n+2005-01-01  Bryce McKinlay  <mckinlay@redhat.com>\n+\n+\t* configure.ac (AC_CONFIG_HEADERS): Build both include/gc_config.h \n+\tand include/gc_ext_config.h.\n+\t* include/gc_ext_config.h: New file. Define only THREAD_LOCAL_ALLOC.\n+\t* include/gc.h: Undef PACKAGE_* before including gc_config.h.\n+\n 2004-12-13  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* configure: Regenerate."}, {"sha": "36243d4c58b09fa2019d746d686d3976c33a6b54", "filename": "boehm-gc/configure", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fconfigure?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -6580,7 +6580,7 @@ else\n   multilib_arg=\n fi\n \n-          ac_config_headers=\"$ac_config_headers include/gc_config.h\"\n+                    ac_config_headers=\"$ac_config_headers include/gc_config.h include/gc_ext_config.h\"\n \n \n                     ac_config_files=\"$ac_config_files Makefile include/Makefile\"\n@@ -7178,6 +7178,7 @@ do\n   \"default-1\" ) CONFIG_COMMANDS=\"$CONFIG_COMMANDS default-1\" ;;\n   \"depfiles\" ) CONFIG_COMMANDS=\"$CONFIG_COMMANDS depfiles\" ;;\n   \"include/gc_config.h\" ) CONFIG_HEADERS=\"$CONFIG_HEADERS include/gc_config.h\" ;;\n+  \"include/gc_ext_config.h\" ) CONFIG_HEADERS=\"$CONFIG_HEADERS include/gc_ext_config.h\" ;;\n   *) { { echo \"$as_me:$LINENO: error: invalid argument: $ac_config_target\" >&5\n echo \"$as_me: error: invalid argument: $ac_config_target\" >&2;}\n    { (exit 1); exit 1; }; };;"}, {"sha": "208a916087219c02add8a0cfb32275363285d0d9", "filename": "boehm-gc/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fconfigure.ac?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -468,7 +468,7 @@ else\n   multilib_arg=\n fi\n \n-AC_CONFIG_HEADERS([include/gc_config.h])\n+AC_CONFIG_HEADERS([include/gc_config.h include/gc_ext_config.h])\n \n AC_CONFIG_FILES(Makefile include/Makefile)\n AC_OUTPUT"}, {"sha": "0781a611bb09290f5b39a8b11ecd23db58fd0fcc", "filename": "boehm-gc/include/gc.h", "status": "modified", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Finclude%2Fgc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Finclude%2Fgc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2Fgc.h?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -30,6 +30,28 @@\n \n # define _GC_H\n \n+/* \n+ * As this header includes gc_config.h, preprocessor conflicts can occur with \n+ * clients that include their own autoconf headers. The following #undef's \n+ * work around some likely conflicts.\n+ */\n+\n+# ifdef PACKAGE_NAME\n+#   undef PACKAGE_NAME\n+# endif\n+# ifdef PACKAGE_BUGREPORT\n+#  undef PACKAGE_BUGREPORT\n+# endif\n+# ifdef PACKAGE_STRING\n+#  undef PACKAGE_STRING\n+# endif\n+# ifdef PACKAGE_TARNAME\n+#  undef PACKAGE_TARNAME\n+# endif\n+# ifdef PACKAGE_VERSION\n+#  undef PACKAGE_VERSION\n+# endif\n+\n # include <gc_config.h>\n # include \"gc_config_macros.h\"\n "}, {"sha": "52a662dcf0bf8e7db148d975e87bdaa9cbb55d95", "filename": "boehm-gc/include/gc_ext_config.h.in", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Finclude%2Fgc_ext_config.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/boehm-gc%2Finclude%2Fgc_ext_config.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2Fgc_ext_config.h.in?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -0,0 +1,5 @@\n+/* include/gc_ext_config.h.in.  This contains definitions needed by\n+external clients that do not want to include the full gc.h.  Currently this\n+is used by libjava/include/boehm-gc.h. */\n+\n+#undef THREAD_LOCAL_ALLOC"}, {"sha": "8ad5dbfe0f6fa87e914ea1ea438dfc75a28b9b03", "filename": "libjava/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -1,3 +1,7 @@\n+2005-01-01  Bryce McKinlay  <mckinlay@redhat.com>\n+\n+\t* include/boehm-gc.h: Include gc_ext_config.h, not gc_config.h.\n+\n 2004-12-31  Andreas Jaeger  <aj@suse.de>\n \n \t* testsuite/lib/libjava.exp (libjava_find_gij): Handle multilibs."}, {"sha": "e7802b68035cc0e08df3f70171cdea7c3028fcc4", "filename": "libjava/include/boehm-gc.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9a060b37a175859748dce4d4cb7265642b0ea848/libjava%2Finclude%2Fboehm-gc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9a060b37a175859748dce4d4cb7265642b0ea848/libjava%2Finclude%2Fboehm-gc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fboehm-gc.h?ref=9a060b37a175859748dce4d4cb7265642b0ea848", "patch": "@@ -26,7 +26,7 @@ extern \"C\"\n #include <java/lang/Class.h>\n #include <string.h>\n \n-#include <gc_config.h>\n+#include <gc_ext_config.h> // for THREAD_LOCAL_ALLOC\n \n extern \"C\" void * GC_gcj_malloc(size_t, void *);\n extern \"C\" void * GC_malloc_atomic(size_t);"}]}