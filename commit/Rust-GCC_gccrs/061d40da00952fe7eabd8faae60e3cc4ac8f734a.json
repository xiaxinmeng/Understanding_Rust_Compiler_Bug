{"sha": "061d40da00952fe7eabd8faae60e3cc4ac8f734a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDYxZDQwZGEwMDk1MmZlN2VhYmQ4ZmFhZTYwZTNjYzRhYzhmNzM0YQ==", "commit": {"author": {"name": "Kugan Vivekanandarajah", "email": "kuganv@linaro.org", "date": "2018-07-13T05:25:47Z"}, "committer": {"name": "Kugan Vivekanandarajah", "email": "kugan@gcc.gnu.org", "date": "2018-07-13T05:25:47Z"}, "message": "re PR tree-optimization/86489 (ICE in gimple_phi_arg starting with r261682 when building 531.deepsjeng_r with FDO + LTO)\n\ngcc/ChangeLog:\n\n2018-07-13  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\t    Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/86489\n\t* tree-ssa-loop-niter.c (number_of_iterations_popcount): Check\n\tthat the loop latch destination where phi is defined.\n\ngcc/testsuite/ChangeLog:\n\n2018-07-13  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\tPR middle-end/86489\n\t* gcc.dg/pr86489.c: New test.\n\n\nCo-Authored-By: Richard Biener <rguenther@suse.de>\n\nFrom-SVN: r262622", "tree": {"sha": "cd8810be6cbfa003a055108252efa03a7b119ffb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd8810be6cbfa003a055108252efa03a7b119ffb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/061d40da00952fe7eabd8faae60e3cc4ac8f734a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/061d40da00952fe7eabd8faae60e3cc4ac8f734a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/061d40da00952fe7eabd8faae60e3cc4ac8f734a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/061d40da00952fe7eabd8faae60e3cc4ac8f734a/comments", "author": null, "committer": null, "parents": [{"sha": "b18bb376a1fa8c48645a7527720f756ae0bb6b87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b18bb376a1fa8c48645a7527720f756ae0bb6b87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b18bb376a1fa8c48645a7527720f756ae0bb6b87"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "0cfa2309c61d1835093ce9fe8bff51f4a218208e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=061d40da00952fe7eabd8faae60e3cc4ac8f734a", "patch": "@@ -1,3 +1,10 @@\n+2018-07-13  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\t    Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/86489\n+\t* tree-ssa-loop-niter.c (number_of_iterations_popcount): Check\n+\tthat the loop latch destination where phi is defined.\n+\n 2018-07-12  Kito Cheng  <kito.cheng@gmail.com>\n \n         * config/riscv/riscv.c (enum riscv_privilege_levels): Add UNKNOWN_MODE."}, {"sha": "9d6c7cc7d9978edfbd92a3936f5eb0ef68b60d6e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=061d40da00952fe7eabd8faae60e3cc4ac8f734a", "patch": "@@ -1,3 +1,8 @@\n+2018-07-13  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\tPR middle-end/86489\n+\t* gcc.dg/pr86489.c: New test.\n+\n 2018-07-12  Martin Sebor  <msebor@redhat.com>\n \n \tPR testsuite/86510"}, {"sha": "c7e5573ebc2e72c9f94101e6d689591468de2b57", "filename": "gcc/testsuite/gcc.dg/pr86489.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2Ftestsuite%2Fgcc.dg%2Fpr86489.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2Ftestsuite%2Fgcc.dg%2Fpr86489.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr86489.c?ref=061d40da00952fe7eabd8faae60e3cc4ac8f734a", "patch": "@@ -0,0 +1,12 @@\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+int a = 0, b = 0;\n+void fn1() {\n+    int c = 0;\n+    for (; a; a--)\n+      c += b;\n+    while ((c - 1) & c)\n+      ;\n+}"}, {"sha": "fbdf838496bc558b8b5df191bcc5416ed19d0176", "filename": "gcc/tree-ssa-loop-niter.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2Ftree-ssa-loop-niter.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/061d40da00952fe7eabd8faae60e3cc4ac8f734a/gcc%2Ftree-ssa-loop-niter.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-niter.c?ref=061d40da00952fe7eabd8faae60e3cc4ac8f734a", "patch": "@@ -2555,6 +2555,7 @@ number_of_iterations_popcount (loop_p loop, edge exit,\n    ... = PHI <b_5(2), b_6(3)>.  */\n   gimple *phi = SSA_NAME_DEF_STMT (b_11);\n   if (gimple_code (phi) != GIMPLE_PHI\n+      || (gimple_bb (phi) != loop_latch_edge (loop)->dest)\n       || (gimple_assign_lhs (and_stmt)\n \t  != gimple_phi_arg_def (phi, loop_latch_edge (loop)->dest_idx)))\n     return false;"}]}