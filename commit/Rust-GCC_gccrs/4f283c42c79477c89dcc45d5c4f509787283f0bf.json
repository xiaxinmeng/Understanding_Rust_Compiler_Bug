{"sha": "4f283c42c79477c89dcc45d5c4f509787283f0bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGYyODNjNDJjNzk0NzdjODlkY2M0NWQ1YzRmNTA5Nzg3MjgzZjBiZg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2015-09-26T17:52:24Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2015-09-26T17:52:24Z"}, "message": "re PR fortran/67567 (resolve.c: gfc_error called with iface->module == NULL)\n\n2013-09-26  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/67567\n\t* resolve.c (resolve_fl_procedure): For module procedures, take\n\tthe parent module name and the submodule name from the name of\n\tthe namespace.\n\nFrom-SVN: r228169", "tree": {"sha": "89f40dae225a9e34b6e615af47e825a3dc69353c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89f40dae225a9e34b6e615af47e825a3dc69353c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f283c42c79477c89dcc45d5c4f509787283f0bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f283c42c79477c89dcc45d5c4f509787283f0bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f283c42c79477c89dcc45d5c4f509787283f0bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f283c42c79477c89dcc45d5c4f509787283f0bf/comments", "author": null, "committer": null, "parents": [{"sha": "136429e2b7719fb3accd307327bd8816e251af66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/136429e2b7719fb3accd307327bd8816e251af66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/136429e2b7719fb3accd307327bd8816e251af66"}], "stats": {"total": 38, "additions": 21, "deletions": 17}, "files": [{"sha": "7d303e5a4c42a295fbe7acfd379d8c77a3b60fc9", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f283c42c79477c89dcc45d5c4f509787283f0bf/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f283c42c79477c89dcc45d5c4f509787283f0bf/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4f283c42c79477c89dcc45d5c4f509787283f0bf", "patch": "@@ -1,3 +1,10 @@\n+2013-09-26  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/67567\n+\t* resolve.c (resolve_fl_procedure): For module procedures, take\n+\tthe parent module name and the submodule name from the name of\n+\tthe namespace.\n+\n 2015-09-25  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/67614\n@@ -18,12 +25,12 @@\n 2015-09-21  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \t* resolve.c (nonscalar_typebound_assign): Fix typos in comment.\n- \n+\n \n 2015-09-21  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/67615\n-\t* resolve.c (gfc_resolve_code): Check for scalar expression in \n+\t* resolve.c (gfc_resolve_code): Check for scalar expression in\n \tarithmetic-if.\n \n 2015-09-17  Paul Thomas  <pault@gcc.gnu.org>"}, {"sha": "6ae086ad0f703f55b9a690e8f9c988c9200c3867", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 12, "deletions": 15, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f283c42c79477c89dcc45d5c4f509787283f0bf/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f283c42c79477c89dcc45d5c4f509787283f0bf/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=4f283c42c79477c89dcc45d5c4f509787283f0bf", "patch": "@@ -8635,7 +8635,7 @@ resolve_transfer (gfc_code *code)\n \t  return;\n \t}\n     }\n-   \n+\n   if (exp->expr_type == EXPR_STRUCTURE)\n     return;\n \n@@ -11733,6 +11733,12 @@ resolve_fl_procedure (gfc_symbol *sym, int mp_flag)\n       && sym->attr.if_source == IFSRC_DECL)\n     {\n       gfc_symbol *iface;\n+      char name[2*GFC_MAX_SYMBOL_LEN + 1];\n+      char *module_name;\n+      char *submodule_name;\n+      strcpy (name, sym->ns->proc_name->name);\n+      module_name = strtok (name, \".\");\n+      submodule_name = strtok (NULL, \".\");\n \n       /* Stop the dummy characteristics test from using the interface\n \t symbol instead of 'sym'.  */\n@@ -11747,29 +11753,23 @@ resolve_fl_procedure (gfc_symbol *sym, int mp_flag)\n \t{\n \t  gfc_error (\"Mismatch in PURE attribute between MODULE \"\n \t\t     \"PROCEDURE at %L and its interface in %s\",\n-\t\t     &sym->declared_at, \n-\t\t     /* FIXME: PR fortran/67567: iface->module should\n-\t\t\tnot be NULL !  */\n-\t\t     iface->module ? iface->module : \"\");\n+\t\t     &sym->declared_at, module_name);\n \t  return false;\n \t}\n \n       if (sym->attr.elemental != iface->attr.elemental)\n \t{\n \t  gfc_error (\"Mismatch in ELEMENTAL attribute between MODULE \"\n \t\t     \"PROCEDURE at %L and its interface in %s\",\n-\t\t     &sym->declared_at, iface->module);\n+\t\t     &sym->declared_at, module_name);\n \t  return false;\n \t}\n \n       if (sym->attr.recursive != iface->attr.recursive)\n \t{\n \t  gfc_error (\"Mismatch in RECURSIVE attribute between MODULE \"\n \t\t     \"PROCEDURE at %L and its interface in %s\",\n-\t\t     &sym->declared_at, \n-\t\t     /* FIXME: PR fortran/67567: iface->module should\n-\t\t\tnot be NULL !  */\n-\t\t     iface->module ? iface->module : \"\");\n+\t\t     &sym->declared_at, module_name);\n \t  return false;\n \t}\n \n@@ -11778,11 +11778,8 @@ resolve_fl_procedure (gfc_symbol *sym, int mp_flag)\n \t{\n \t  gfc_error (\"%s between the MODULE PROCEDURE declaration \"\n \t\t     \"in module %s and the declaration at %L in \"\n-\t\t     \"SUBMODULE %s\", errmsg, \n-\t\t     /* FIXME: PR fortran/67567: iface->module should\n-\t\t\tnot be NULL !  */\n-\t\t     iface->module ? iface->module : \"\",\n-\t\t     &sym->declared_at, sym->ns->proc_name->name);\n+\t\t     \"SUBMODULE %s\", errmsg, module_name,\n+\t\t     &sym->declared_at, submodule_name);\n \t  return false;\n \t}\n "}]}