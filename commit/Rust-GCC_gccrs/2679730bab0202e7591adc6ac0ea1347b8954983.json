{"sha": "2679730bab0202e7591adc6ac0ea1347b8954983", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY3OTczMGJhYjAyMDJlNzU5MWFkYzZhYzBlYTEzNDdiODk1NDk4Mw==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2019-12-02T10:50:45Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2019-12-02T10:50:45Z"}, "message": "re PR tree-optimization/92742 (ICE in info_for_reduction, at tree-vect-loop.c:4367)\n\n2019-12-02  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/92742\n\t* tree-vect-loop.c (vect_fixup_reduc_chain): Do not\n\ttouch the def-type but verify it is consistent with the\n\toriginal stmts.\n\n\t* gcc.dg/torture/pr92742.c: New testcase.\n\nFrom-SVN: r278896", "tree": {"sha": "c3aad6aba27d6cf0aab6744a87c069ec79ce806b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3aad6aba27d6cf0aab6744a87c069ec79ce806b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2679730bab0202e7591adc6ac0ea1347b8954983", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2679730bab0202e7591adc6ac0ea1347b8954983", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2679730bab0202e7591adc6ac0ea1347b8954983", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2679730bab0202e7591adc6ac0ea1347b8954983/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a213ab38560f0b95ec318b2a4795e66cc0518848", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a213ab38560f0b95ec318b2a4795e66cc0518848", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a213ab38560f0b95ec318b2a4795e66cc0518848"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "1d342f4cf1076b8bc1908cca387912377aa13de2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2679730bab0202e7591adc6ac0ea1347b8954983", "patch": "@@ -1,3 +1,10 @@\n+2019-12-02  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/92742\n+\t* tree-vect-loop.c (vect_fixup_reduc_chain): Do not\n+\ttouch the def-type but verify it is consistent with the\n+\toriginal stmts.\n+\n 2019-12-02  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/92712"}, {"sha": "03fb4d9ed80066e69ccdc25739e00444cc770efa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2679730bab0202e7591adc6ac0ea1347b8954983", "patch": "@@ -1,3 +1,8 @@\n+2019-12-02  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/92742\n+\t* gcc.dg/torture/pr92742.c: New testcase.\n+\n 2019-12-02  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/92712"}, {"sha": "59e74c0616b5696c4b0022fe201435ae923bdaec", "filename": "gcc/testsuite/gcc.dg/torture/pr92742.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr92742.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr92742.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr92742.c?ref=2679730bab0202e7591adc6ac0ea1347b8954983", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-ftree-vectorize\" } */\n+\n+unsigned int qw;\n+\n+int\n+rs (int iq, int wg)\n+{\n+  for (qw = 0; qw < 2; ++qw)\n+    {\n+    }\n+\n+  while (iq < 1)\n+    {\n+      wg *= qw * 2;\n+      ++iq;\n+    }\n+\n+  return wg;\n+}"}, {"sha": "83b0e0b8ce9c6c0979e64448ed9118587f0ae7a9", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2679730bab0202e7591adc6ac0ea1347b8954983/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=2679730bab0202e7591adc6ac0ea1347b8954983", "patch": "@@ -643,14 +643,15 @@ vect_fixup_reduc_chain (stmt_vec_info stmt_info)\n   do\n     {\n       stmtp = STMT_VINFO_RELATED_STMT (stmt_info);\n+      gcc_checking_assert (STMT_VINFO_DEF_TYPE (stmtp)\n+\t\t\t   == STMT_VINFO_DEF_TYPE (stmt_info));\n       REDUC_GROUP_FIRST_ELEMENT (stmtp) = firstp;\n       stmt_info = REDUC_GROUP_NEXT_ELEMENT (stmt_info);\n       if (stmt_info)\n \tREDUC_GROUP_NEXT_ELEMENT (stmtp)\n \t  = STMT_VINFO_RELATED_STMT (stmt_info);\n     }\n   while (stmt_info);\n-  STMT_VINFO_DEF_TYPE (stmtp) = vect_reduction_def;\n }\n \n /* Fixup scalar cycles that now have their stmts detected as patterns.  */"}]}