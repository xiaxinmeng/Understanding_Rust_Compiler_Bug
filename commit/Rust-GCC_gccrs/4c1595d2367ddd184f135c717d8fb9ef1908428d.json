{"sha": "4c1595d2367ddd184f135c717d8fb9ef1908428d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGMxNTk1ZDIzNjdkZGQxODRmMTM1YzcxN2Q4ZmI5ZWYxOTA4NDI4ZA==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2019-03-21T19:16:29Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2019-03-21T19:16:29Z"}, "message": "[testsuite, Fortran] Apply DejaGnu 1.4.4 work-around also to 'gfortran.dg/coarray/caf.exp:dg-compile-aux-modules'\n\nSee trunk r215293.  This unifies all 'dg-compile-aux-modules' instances.\n\n\tgcc/testsuite/\n\tPR fortran/56408\n\t* gfortran.dg/coarray/caf.exp (dg-compile-aux-modules): Workaround\n\tmissing nexted dg-test call support in dejaGNU 1.4.4.\n\nFrom-SVN: r269848", "tree": {"sha": "ffe7d021fce976b620e19c5bc6bb9ffa758be15b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffe7d021fce976b620e19c5bc6bb9ffa758be15b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4c1595d2367ddd184f135c717d8fb9ef1908428d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c1595d2367ddd184f135c717d8fb9ef1908428d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c1595d2367ddd184f135c717d8fb9ef1908428d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c1595d2367ddd184f135c717d8fb9ef1908428d/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bcb68daa54aeb40d2ec0d7c48633e2dc83870670", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bcb68daa54aeb40d2ec0d7c48633e2dc83870670", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bcb68daa54aeb40d2ec0d7c48633e2dc83870670"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "40446965212e839ddf30949d9882e5a08bc907d5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1595d2367ddd184f135c717d8fb9ef1908428d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1595d2367ddd184f135c717d8fb9ef1908428d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4c1595d2367ddd184f135c717d8fb9ef1908428d", "patch": "@@ -1,5 +1,9 @@\n 2019-03-21  Thomas Schwinge  <thomas@codesourcery.com>\n \n+\tPR fortran/56408\n+\t* gfortran.dg/coarray/caf.exp (dg-compile-aux-modules): Workaround\n+\tmissing nexted dg-test call support in dejaGNU 1.4.4.\n+\n \tPR fortran/29383\n \t* gfortran.dg/ieee/ieee.exp (DEFAULT_FFLAGS): Set the same as in\n \tother '*.exp' files."}, {"sha": "e3204c34779b83a75331ccb4a9f31d1f5cf32023", "filename": "gcc/testsuite/gfortran.dg/coarray/caf.exp", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4c1595d2367ddd184f135c717d8fb9ef1908428d/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcaf.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4c1595d2367ddd184f135c717d8fb9ef1908428d/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcaf.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray%2Fcaf.exp?ref=4c1595d2367ddd184f135c717d8fb9ef1908428d", "patch": "@@ -54,8 +54,18 @@ proc dg-compile-aux-modules { args } {\n \terror \"dg-set-target-env-var: needs one argument\"\n \treturn\n     }\n+\n+    set level [info level]\n+    if { [info procs dg-save-unknown] != [list] } {\n+\trename dg-save-unknown dg-save-unknown-level-$level\n+    }\n+\n     dg-test $gfortran_test_path/[lindex $args 1] \"\" $gfortran_aux_module_flags\n-    # cleanup-modules isn't intentionally invoked here.\n+    # cleanup-modules is intentionally not invoked here.\n+\n+    if { [info procs dg-save-unknown-level-$level] != [list] } {\n+\trename dg-save-unknown-level-$level dg-save-unknown\n+    }\n }\n \n # Add -latomic only where supported.  Assume built-in support elsewhere."}]}