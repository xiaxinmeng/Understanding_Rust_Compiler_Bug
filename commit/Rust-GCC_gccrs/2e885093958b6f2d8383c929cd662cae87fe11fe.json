{"sha": "2e885093958b6f2d8383c929cd662cae87fe11fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmU4ODUwOTM5NThiNmYyZDgzODNjOTI5Y2Q2NjJjYWU4N2ZlMTFmZQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@adacore.com", "date": "2015-10-23T10:25:57Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-10-23T10:25:57Z"}, "message": "sem_util.ads (Unique_Defining_Entity): Document the result for tasks and entries.\n\n2015-10-23  Arnaud Charlet  <charlet@adacore.com>\n\n\t* sem_util.ads (Unique_Defining_Entity): Document the result\n\tfor tasks and entries.\n\t* sem_util.adb (Unique_Entity): Return declaration entity for task and\n\tentry bodies\n\nFrom-SVN: r229222", "tree": {"sha": "d8cd8516aa31ea64927709516ce6f8d6743656e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d8cd8516aa31ea64927709516ce6f8d6743656e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2e885093958b6f2d8383c929cd662cae87fe11fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e885093958b6f2d8383c929cd662cae87fe11fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2e885093958b6f2d8383c929cd662cae87fe11fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2e885093958b6f2d8383c929cd662cae87fe11fe/comments", "author": {"login": "ArnaudCharlet", "id": 30291825, "node_id": "MDQ6VXNlcjMwMjkxODI1", "avatar_url": "https://avatars.githubusercontent.com/u/30291825?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ArnaudCharlet", "html_url": "https://github.com/ArnaudCharlet", "followers_url": "https://api.github.com/users/ArnaudCharlet/followers", "following_url": "https://api.github.com/users/ArnaudCharlet/following{/other_user}", "gists_url": "https://api.github.com/users/ArnaudCharlet/gists{/gist_id}", "starred_url": "https://api.github.com/users/ArnaudCharlet/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ArnaudCharlet/subscriptions", "organizations_url": "https://api.github.com/users/ArnaudCharlet/orgs", "repos_url": "https://api.github.com/users/ArnaudCharlet/repos", "events_url": "https://api.github.com/users/ArnaudCharlet/events{/privacy}", "received_events_url": "https://api.github.com/users/ArnaudCharlet/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "67dbe5829e2f9cac9deb756762cdaf5a8829cb31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67dbe5829e2f9cac9deb756762cdaf5a8829cb31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67dbe5829e2f9cac9deb756762cdaf5a8829cb31"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "513f3afe2190d1fbd747ee3058e41732d53f71b7", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e885093958b6f2d8383c929cd662cae87fe11fe/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e885093958b6f2d8383c929cd662cae87fe11fe/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2e885093958b6f2d8383c929cd662cae87fe11fe", "patch": "@@ -1,3 +1,10 @@\n+2015-10-23  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* sem_util.ads (Unique_Defining_Entity): Document the result\n+\tfor tasks and entries.\n+\t* sem_util.adb (Unique_Entity): Return declaration entity for task and\n+\tentry bodies\n+\n 2015-10-22  Mikhail Maltsev  <maltsevm@gmail.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity): Use gcc_checking_assert."}, {"sha": "f6c3ebd2f310abdd911ce53688798c5c29731ade", "filename": "gcc/ada/sem_util.adb", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e885093958b6f2d8383c929cd662cae87fe11fe/gcc%2Fada%2Fsem_util.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e885093958b6f2d8383c929cd662cae87fe11fe/gcc%2Fada%2Fsem_util.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.adb?ref=2e885093958b6f2d8383c929cd662cae87fe11fe", "patch": "@@ -19082,6 +19082,32 @@ package body Sem_Util is\n                U := Spec_Entity (E);\n             end if;\n \n+         when E_Task_Body =>\n+            P := Parent (E);\n+            U := Corresponding_Spec (P);\n+\n+         when E_Entry =>\n+            if Nkind (Parent (E)) = N_Entry_Body then\n+               declare\n+                  Decl : Entity_Id := First_Entity (Scope (E));\n+               begin\n+                  --  Traverse the entity list of the protected object\n+                  --  and locate an entry declaration with a matching\n+                  --  Corresponding_Body.\n+\n+                  while Present (Decl) loop\n+                     if Ekind (Decl) = E_Entry\n+                       and then Corresponding_Body (Parent (Decl)) = E\n+                     then\n+                        U := Decl;\n+                        exit;\n+                     end if;\n+                     Next_Entity (Decl);\n+                  end loop;\n+                  pragma Assert (Present (Decl));\n+               end;\n+            end if;\n+\n          when others =>\n             null;\n       end case;"}, {"sha": "9d77c7f10a97a7029eedfb12b91012e9ba389050", "filename": "gcc/ada/sem_util.ads", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2e885093958b6f2d8383c929cd662cae87fe11fe/gcc%2Fada%2Fsem_util.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2e885093958b6f2d8383c929cd662cae87fe11fe/gcc%2Fada%2Fsem_util.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_util.ads?ref=2e885093958b6f2d8383c929cd662cae87fe11fe", "patch": "@@ -2105,6 +2105,8 @@ package Sem_Util is\n    --  views of the same entity have the same unique defining entity:\n    --  * package spec and body;\n    --  * subprogram declaration, subprogram stub and subprogram body;\n+   --  * entry declaration and entry body;\n+   --  * task declaration, task body stub and task body;\n    --  * private view and full view of a type;\n    --  * private view and full view of a deferred constant.\n    --  In other cases, return the defining entity for N."}]}