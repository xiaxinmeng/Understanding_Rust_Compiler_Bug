{"sha": "2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmIzYzY3ODgyZWJhNzBlOWI4Y2E4ZTZjZTY0NjViNGQzMzYzYTQ5YQ==", "commit": {"author": {"name": "Keith Seitz", "email": "keiths@redhat.com", "date": "2007-01-23T01:06:10Z"}, "committer": {"name": "Keith Seitz", "email": "kseitz@gcc.gnu.org", "date": "2007-01-23T01:06:10Z"}, "message": "Class.h (_Jv_GetClassStatus): Declare.\n\n        * java/lang/Class.h (_Jv_GetClassStatus): Declare.\n        * java/lang/natClass.cc (_Jv_GetClassStatus): New function.\n        * jvmti.cc (_Jv_JVMTI_GetClassStatus): New function.\n        (_Jv_JVMTI_Interface): Define GetClassStatus.\n\nFrom-SVN: r121074", "tree": {"sha": "416f41361ca12878d762b9b6efc9c9c439ca26eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/416f41361ca12878d762b9b6efc9c9c439ca26eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/comments", "author": {"login": "shtiek", "id": 107581324, "node_id": "U_kgDOBmmPjA", "avatar_url": "https://avatars.githubusercontent.com/u/107581324?v=4", "gravatar_id": "", "url": "https://api.github.com/users/shtiek", "html_url": "https://github.com/shtiek", "followers_url": "https://api.github.com/users/shtiek/followers", "following_url": "https://api.github.com/users/shtiek/following{/other_user}", "gists_url": "https://api.github.com/users/shtiek/gists{/gist_id}", "starred_url": "https://api.github.com/users/shtiek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/shtiek/subscriptions", "organizations_url": "https://api.github.com/users/shtiek/orgs", "repos_url": "https://api.github.com/users/shtiek/repos", "events_url": "https://api.github.com/users/shtiek/events{/privacy}", "received_events_url": "https://api.github.com/users/shtiek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d374f56710cb81ae386b45693ca2fcefd072d355", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d374f56710cb81ae386b45693ca2fcefd072d355", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d374f56710cb81ae386b45693ca2fcefd072d355"}], "stats": {"total": 52, "additions": 49, "deletions": 3}, "files": [{"sha": "ff434f80d4c5d2e997bacdf6ca357f75fd5c8166", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "patch": "@@ -1,3 +1,10 @@\n+2007-01-22  Keith  Seitz  <keiths@redhat.com>\n+\n+\t* java/lang/Class.h (_Jv_GetClassStatus): Declare.\n+\t* java/lang/natClass.cc (_Jv_GetClassStatus): New function.\n+\t* jvmti.cc (_Jv_JVMTI_GetClassStatus): New function.\n+\t(_Jv_JVMTI_Interface): Define GetClassStatus.\n+\n 2007-01-22  Tom Tromey  <tromey@redhat.com>\n \n \t* configure: Rebuilt."}, {"sha": "77e60aa5ccc6ca3a49a1ff4c7bc741ecb84fce66", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "patch": "@@ -1,6 +1,6 @@\n // Class.h - Header file for java.lang.Class.  -*- c++ -*-\n \n-/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006  Free Software Foundation\n+/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -257,6 +257,8 @@ class _Jv_MethodBase;\n _Jv_MethodBase *_Jv_FindInterpreterMethod (jclass, jmethodID);\n #endif\n \n+jbyte _Jv_GetClassState (jclass);\n+\n // Friend classes and functions to implement the ClassLoader\n class java::lang::ClassLoader;\n class java::lang::VMClassLoader;\n@@ -552,6 +554,7 @@ class java::lang::Class : public java::lang::Object\n   friend _Jv_MethodBase *(::_Jv_FindInterpreterMethod) (jclass klass,\n \t\t\t\t\t\t\tjmethodID desired_method);\n #endif\n+  friend jbyte (::_Jv_GetClassState) (jclass klass);\n \n   // Friends classes and functions to implement the ClassLoader\n   friend class java::lang::ClassLoader;"}, {"sha": "8ac72a403a4be7e1d3b7a64c0bbbaf2976f88970", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "patch": "@@ -1,6 +1,6 @@\n // natClass.cc - Implementation of java.lang.Class native methods.\n \n-/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006\n+/* Copyright (C) 1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007\n    Free Software Foundation\n \n    This file is part of libgcj.\n@@ -2004,3 +2004,9 @@ _Jv_GetMethodDeclaringClass (jmethodID method)\n   return reinterpret_cast<jclass> (_Jv_StackTrace::ncodeMap->get (obj));\n }\n \n+jbyte\n+_Jv_GetClassState (jclass klass)\n+{\n+  return klass->state;\n+}\n+"}, {"sha": "69cfda5ae754af8c355d927b6095f5e214188f26", "filename": "libjava/jvmti.cc", "status": "modified", "additions": 31, "deletions": 1, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2Fjvmti.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a/libjava%2Fjvmti.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjvmti.cc?ref=2b3c67882eba70e9b8ca8e6ce6465b4d3363a49a", "patch": "@@ -419,6 +419,36 @@ _Jv_JVMTI_Deallocate (MAYBE_UNUSED jvmtiEnv *env, unsigned char *mem)\n   return JVMTI_ERROR_NONE;\n }\n \n+static jvmtiError JNICALL\n+_Jv_JVMTI_GetClassStatus (MAYBE_UNUSED jvmtiEnv *env, jclass klass,\n+\t\t\t  jint *status_ptr)\n+{\n+  REQUIRE_PHASE (env, JVMTI_PHASE_START | JVMTI_PHASE_LIVE);\n+  NULL_CHECK (status_ptr);\n+  if (klass == NULL)\n+    return JVMTI_ERROR_INVALID_CLASS;\n+\n+  if (klass->isArray ())\n+    *status_ptr = JVMTI_CLASS_STATUS_ARRAY;\n+  else if (klass->isPrimitive ())\n+    *status_ptr  = JVMTI_CLASS_STATUS_PRIMITIVE;\n+  else\n+    {\n+      jbyte state = _Jv_GetClassState (klass);\n+      *status_ptr = 0;\n+      if (state >= JV_STATE_LINKED)\n+\t(*status_ptr) |= JVMTI_CLASS_STATUS_VERIFIED;\n+      if (state >= JV_STATE_PREPARED)\n+\t(*status_ptr) |= JVMTI_CLASS_STATUS_PREPARED;\n+      if (state == JV_STATE_ERROR || state == JV_STATE_PHANTOM)\n+\t(*status_ptr) |= JVMTI_CLASS_STATUS_ERROR;\n+      else if (state == JV_STATE_DONE)\n+\t(*status_ptr) |= JVMTI_CLASS_STATUS_INITIALIZED;\n+    }\n+\n+  return JVMTI_ERROR_NONE;\n+}\n+\n static jvmtiError JNICALL\n _Jv_JVMTI_GetClassModifiers (MAYBE_UNUSED jvmtiEnv *env, jclass klass,\n \t\t\t     jint *mods)\n@@ -1452,7 +1482,7 @@ struct _Jv_jvmtiEnv _Jv_JVMTI_Interface =\n   _Jv_JVMTI_Allocate,\t\t// Allocate\n   _Jv_JVMTI_Deallocate,\t\t// Deallocate\n   UNIMPLEMENTED,\t\t// GetClassSignature\n-  UNIMPLEMENTED,\t\t// GetClassStatus\n+  _Jv_JVMTI_GetClassStatus,\t// GetClassStatus\n   UNIMPLEMENTED,\t\t// GetSourceFileName\n   _Jv_JVMTI_GetClassModifiers,\t// GetClassModifiers\n   _Jv_JVMTI_GetClassMethods,\t// GetClassMethods"}]}