{"sha": "46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZlNWIxNWVkNDcxY2M1MTZhOGMyMmViZTk1ZjVkZWE1YTg1ZGE0YQ==", "commit": {"author": {"name": "Devang Patel", "email": "dpatel@apple.com", "date": "2005-05-18T23:54:36Z"}, "committer": {"name": "Devang Patel", "email": "dpatel@gcc.gnu.org", "date": "2005-05-18T23:54:36Z"}, "message": "rs6000.md (insvsi_internal1): Subtract shift from the mask end.\n\n       * config/rs6000/rs6000.md (insvsi_internal1): Subtract shift from\n       the mask end.\n       * g++.dg/opt/20050511-1.C: New test.\n\nFrom-SVN: r99936", "tree": {"sha": "d73bd2da11bd61d6dfe37ab86318145eefbe5438", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d73bd2da11bd61d6dfe37ab86318145eefbe5438"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/comments", "author": null, "committer": null, "parents": [{"sha": "5bcd8644167353674cc9f44f321df15154311735", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bcd8644167353674cc9f44f321df15154311735", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bcd8644167353674cc9f44f321df15154311735"}], "stats": {"total": 75, "additions": 74, "deletions": 1}, "files": [{"sha": "c81681cc7964e3a5b26ab5d0640827e24cfe0803", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "patch": "@@ -1,3 +1,8 @@\n+2005-05-18  Devang Patel  <dpatel@apple.com>\n+\n+\t* config/rs6000/rs6000.md (insvsi_internal1): Subtract shift from\n+\tthe mask end.\n+\t\n 2005-05-18  Richard Henderson  <rth@redhat.com>\n \n         * tree-ssa-forwprop.c (cfg_changed): New."}, {"sha": "2c0b0491abeb4ddfb4186226f8340ac3fa8a0b6b", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "patch": "@@ -3014,7 +3014,7 @@\n   int size = INTVAL (operands[1]) & 31;\n \n   operands[4] = GEN_INT (shift - start - size);\n-  operands[1] = GEN_INT (start + size - 1);\n+  operands[1] = GEN_INT (start + size - 1 - shift);\n   return \\\"{rlimi|rlwimi} %0,%3,%h4,%h2,%h1\\\";\n }\"\n   [(set_attr \"type\" \"insert_word\")])"}, {"sha": "78580bc0933ed5501dc1bb736f4aee60cf21a70a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "patch": "@@ -1,3 +1,7 @@\n+2005-05-18  Devang Patel  <dpatel@apple.com>\n+\n+\t* g++.dg/opt/20050511-1.C: New test.\n+\t\n 2005-05-18  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR libfortran/21127"}, {"sha": "e04b2b863e9a7c1fb0508374d41ea0357937ec42", "filename": "gcc/testsuite/g++.dg/opt/20050511-1.C", "status": "added", "additions": 64, "deletions": 0, "changes": 64, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2F20050511-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46e5b15ed471cc516a8c22ebe95f5dea5a85da4a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2F20050511-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2F20050511-1.C?ref=46e5b15ed471cc516a8c22ebe95f5dea5a85da4a", "patch": "@@ -0,0 +1,64 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O3\" { target powerpc*-*-* } } */\n+#include <stdio.h>\n+#include <stdlib.h>\n+\n+typedef signed short SINT16 ;\n+typedef unsigned long UINT32 ;\n+typedef unsigned int UINT ;\n+\n+class A\n+{\n+public:\n+    union   \n+    {\n+      SINT16 xy[2];\n+      UINT32 abXY;\n+    };\n+  bool operator==(const A& other) const {return abXY == other.abXY;}\n+  bool operator!=(const A& other) const {return abXY != other.abXY;}\n+};\n+\n+template <int size> struct pArray { unsigned char u08[16*(((size*1)+15)/16)] __attribute__ ((aligned(16))); };\n+\n+struct B\n+{\n+  union {\n+    A mvL[2];\n+    pArray<1> xyz;\n+  };\n+} ;\n+\n+typedef struct\n+{\n+  UINT w;\n+  B b;\n+\n+}C;\n+\n+\n+UINT32 bar (const C * sPtr)\n+{\n+  UINT w = sPtr->w;\n+  A a;\n+\n+  a.xy[0] = sPtr->b.mvL[w].xy[0]<<2;\n+  a.xy[1] = sPtr->b.mvL[w].xy[1]<<2;\n+\n+  if (a.xy[0] != ((SINT16) 0xffff << 2))\n+\tabort ();\n+}\n+\n+int main()\n+{\n+\tA a;\n+\tC c;\n+\ta.xy[0] = 0xffff;\n+\ta.xy[1] = 0xffff;\n+\tc.w=0;\n+\tc.b.mvL[0].xy[0] = a.xy[0];\n+\tc.b.mvL[0].xy[1] = a.xy[1];\n+\n+\tbar (&c);\n+}\n+\t"}]}