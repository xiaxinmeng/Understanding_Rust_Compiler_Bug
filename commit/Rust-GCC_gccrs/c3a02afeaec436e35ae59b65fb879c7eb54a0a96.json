{"sha": "c3a02afeaec436e35ae59b65fb879c7eb54a0a96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzNhMDJhZmVhZWM0MzZlMzVhZTU5YjY1ZmI4NzljN2ViNTRhMGE5Ng==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-12-07T01:55:51Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1993-12-07T01:55:51Z"}, "message": "(move_block_{to,from}_reg): Check HAVE_{load,store}_multiple value;\n\ndon't just #idef the symbol.\n\nFrom-SVN: r6192", "tree": {"sha": "5c2d0d24ce633e21aadb01b2664664477a1cb804", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c2d0d24ce633e21aadb01b2664664477a1cb804"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3a02afeaec436e35ae59b65fb879c7eb54a0a96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a02afeaec436e35ae59b65fb879c7eb54a0a96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3a02afeaec436e35ae59b65fb879c7eb54a0a96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3a02afeaec436e35ae59b65fb879c7eb54a0a96/comments", "author": null, "committer": null, "parents": [{"sha": "77fc9313162a36f4936fcc3c81d6e68c27dd1500", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77fc9313162a36f4936fcc3c81d6e68c27dd1500", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77fc9313162a36f4936fcc3c81d6e68c27dd1500"}], "stats": {"total": 38, "additions": 22, "deletions": 16}, "files": [{"sha": "a6248be5049bb7aff135e17a988fe3aade62991d", "filename": "gcc/expr.c", "status": "modified", "additions": 22, "deletions": 16, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3a02afeaec436e35ae59b65fb879c7eb54a0a96/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3a02afeaec436e35ae59b65fb879c7eb54a0a96/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=c3a02afeaec436e35ae59b65fb879c7eb54a0a96", "patch": "@@ -1573,16 +1573,19 @@ move_block_to_reg (regno, x, nregs, mode)\n \n   /* See if the machine can do this with a load multiple insn.  */\n #ifdef HAVE_load_multiple\n-  last = get_last_insn ();\n-  pat = gen_load_multiple (gen_rtx (REG, word_mode, regno), x,\n-\t\t\t   GEN_INT (nregs));\n-  if (pat)\n+  if (HAVE_load_multiple)\n     {\n-      emit_insn (pat);\n-      return;\n+      last = get_last_insn ();\n+      pat = gen_load_multiple (gen_rtx (REG, word_mode, regno), x,\n+\t\t\t       GEN_INT (nregs));\n+      if (pat)\n+\t{\n+\t  emit_insn (pat);\n+\t  return;\n+\t}\n+      else\n+\tdelete_insns_since (last);\n     }\n-  else\n-    delete_insns_since (last);\n #endif\n \n   for (i = 0; i < nregs; i++)\n@@ -1625,16 +1628,19 @@ move_block_from_reg (regno, x, nregs, size)\n \n   /* See if the machine can do this with a store multiple insn.  */\n #ifdef HAVE_store_multiple\n-  last = get_last_insn ();\n-  pat = gen_store_multiple (x, gen_rtx (REG, word_mode, regno),\n-\t\t\t    GEN_INT (nregs));\n-  if (pat)\n+  if (HAVE_store_multiple)\n     {\n-      emit_insn (pat);\n-      return;\n+      last = get_last_insn ();\n+      pat = gen_store_multiple (x, gen_rtx (REG, word_mode, regno),\n+\t\t\t\tGEN_INT (nregs));\n+      if (pat)\n+\t{\n+\t  emit_insn (pat);\n+\t  return;\n+\t}\n+      else\n+\tdelete_insns_since (last);\n     }\n-  else\n-    delete_insns_since (last);\n #endif\n \n   for (i = 0; i < nregs; i++)"}]}