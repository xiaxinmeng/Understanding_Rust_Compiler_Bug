{"sha": "b83053bf4288fa0fe49eb55027174f9bc4600c43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjgzMDUzYmY0Mjg4ZmEwZmU0OWViNTUwMjcxNzRmOWJjNDYwMGM0Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-07-03T09:06:08Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-07-03T09:06:08Z"}, "message": "trans.c (Call_to_gnu): Robustify test for function case if the CICO mechanism is used.\n\n\t* gcc-interface/trans.c (Call_to_gnu): Robustify test for function case\n\tif the CICO mechanism is used.\n\nFrom-SVN: r189204", "tree": {"sha": "d28a2bb0690595e7ac949c57f5831fc94694588a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d28a2bb0690595e7ac949c57f5831fc94694588a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b83053bf4288fa0fe49eb55027174f9bc4600c43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b83053bf4288fa0fe49eb55027174f9bc4600c43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b83053bf4288fa0fe49eb55027174f9bc4600c43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b83053bf4288fa0fe49eb55027174f9bc4600c43/comments", "author": null, "committer": null, "parents": [{"sha": "4a147e4e048576fd75cec40797cca5a972c91c48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a147e4e048576fd75cec40797cca5a972c91c48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a147e4e048576fd75cec40797cca5a972c91c48"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "60f6ef8128f364a0951e37c9e182dba1d1f9950e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b83053bf4288fa0fe49eb55027174f9bc4600c43", "patch": "@@ -1,3 +1,8 @@\n+2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (Call_to_gnu): Robustify test for function case\n+\tif the CICO mechanism is used.\n+\n 2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/utils2.c (build_simple_component_ref): Do not look"}, {"sha": "08a263a8e8e1a52df61471a69dd1814659a8b0bd", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=b83053bf4288fa0fe49eb55027174f9bc4600c43", "patch": "@@ -4084,7 +4084,7 @@ Call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target,\n \n       /* The first entry is for the actual return value if this is a\n \t function, so skip it.  */\n-      if (TREE_VALUE (gnu_cico_list) == void_type_node)\n+      if (function_call)\n \tgnu_cico_list = TREE_CHAIN (gnu_cico_list);\n \n       if (Nkind (Name (gnat_node)) == N_Explicit_Dereference)\n@@ -4188,8 +4188,7 @@ Call_to_gnu (Node_Id gnat_node, tree *gnu_result_type_p, tree gnu_target,\n \t return value from it and update the return type.  */\n       if (TYPE_CI_CO_LIST (gnu_subprog_type))\n \t{\n-\t  tree gnu_elmt = value_member (void_type_node,\n-\t\t\t\t\tTYPE_CI_CO_LIST (gnu_subprog_type));\n+\t  tree gnu_elmt = TYPE_CI_CO_LIST (gnu_subprog_type);\n \t  gnu_call = build_component_ref (gnu_call, NULL_TREE,\n \t\t\t\t\t  TREE_PURPOSE (gnu_elmt), false);\n \t  gnu_result_type = TREE_TYPE (gnu_call);"}, {"sha": "1d7c75efde159230fa20b51eef762c35fe5d5d61", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b83053bf4288fa0fe49eb55027174f9bc4600c43", "patch": "@@ -1,3 +1,7 @@\n+2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/recursive_call.adb: New test.\n+\n 2012-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/discr37.ad[sb]: New test."}, {"sha": "ab60e4491bd84c55694a7226fdd43bb87fe0abc8", "filename": "gcc/testsuite/gnat.dg/recursive_call.adb", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Ftestsuite%2Fgnat.dg%2Frecursive_call.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b83053bf4288fa0fe49eb55027174f9bc4600c43/gcc%2Ftestsuite%2Fgnat.dg%2Frecursive_call.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Frecursive_call.adb?ref=b83053bf4288fa0fe49eb55027174f9bc4600c43", "patch": "@@ -0,0 +1,10 @@\n+-- { dg-do compile }\n+-- { dg-options \"-gnat2012\" }\n+\n+function Recursive_Call (File : String; Status : out Boolean) return Boolean is\n+begin\n+  if File /= \"/dev/null\" then\n+    return Recursive_Call (\"/dev/null\", Status);\n+  end if;\n+  return False;\n+end;"}]}