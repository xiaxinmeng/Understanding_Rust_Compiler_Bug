{"sha": "47069ecbe6cad05836dace19eefcfaf10cd10288", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDcwNjllY2JlNmNhZDA1ODM2ZGFjZTE5ZWVmY2ZhZjEwY2QxMDI4OA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-01-10T03:14:07Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-01-10T03:14:07Z"}, "message": "* recog.c (constrain_operands): Validate mem operands.\n\nFrom-SVN: r75624", "tree": {"sha": "e2c83b04f6f5ebff19d926c3fbd6032168c06ea7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e2c83b04f6f5ebff19d926c3fbd6032168c06ea7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/47069ecbe6cad05836dace19eefcfaf10cd10288", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47069ecbe6cad05836dace19eefcfaf10cd10288", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47069ecbe6cad05836dace19eefcfaf10cd10288", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47069ecbe6cad05836dace19eefcfaf10cd10288/comments", "author": null, "committer": null, "parents": [{"sha": "c31d56ed0619b8fc21e00b92fe6abe6268bd8094", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c31d56ed0619b8fc21e00b92fe6abe6268bd8094", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c31d56ed0619b8fc21e00b92fe6abe6268bd8094"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "64dcf0781ea7f570cdd9a71d243e8cd3509741bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47069ecbe6cad05836dace19eefcfaf10cd10288/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47069ecbe6cad05836dace19eefcfaf10cd10288/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=47069ecbe6cad05836dace19eefcfaf10cd10288", "patch": "@@ -1,3 +1,7 @@\n+2004-01-09  Richard Henderson  <rth@redhat.com>\n+\n+\t* recog.c (constrain_operands): Validate mem operands.\n+\n 2004-01-09   James E Wilson  <wilson@specifixinc.com>\n \n \t* gcc.c (init_spec): Remove -lunwind from shared case."}, {"sha": "d2338e6c9c2cee35a1537eb26e1af893d9a0a32b", "filename": "gcc/recog.c", "status": "modified", "additions": 19, "deletions": 6, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47069ecbe6cad05836dace19eefcfaf10cd10288/gcc%2Frecog.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47069ecbe6cad05836dace19eefcfaf10cd10288/gcc%2Frecog.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frecog.c?ref=47069ecbe6cad05836dace19eefcfaf10cd10288", "patch": "@@ -2445,12 +2445,25 @@ constrain_operands (int strict)\n \t\tbreak;\n \n \t      case 'm':\n-\t\tif (GET_CODE (op) == MEM\n-\t\t    /* Before reload, accept what reload can turn into mem.  */\n-\t\t    || (strict < 0 && CONSTANT_P (op))\n-\t\t    /* During reload, accept a pseudo  */\n-\t\t    || (reload_in_progress && GET_CODE (op) == REG\n-\t\t\t&& REGNO (op) >= FIRST_PSEUDO_REGISTER))\n+\t\t/* Memory operands must be valid, to the extent\n+\t\t   required by STRICT.  */\n+\t\tif (GET_CODE (op) == MEM)\n+\t\t  {\n+\t\t    if (strict > 0\n+\t\t\t&& !strict_memory_address_p (GET_MODE (op),\n+\t\t\t\t\t\t     XEXP (op, 0)))\n+\t\t      break;\n+\t\t    if (strict == 0\n+\t\t\t&& !memory_address_p (GET_MODE (op), XEXP (op, 0)))\n+\t\t      break;\n+\t\t    win = 1;\n+\t\t  }\n+\t\t/* Before reload, accept what reload can turn into mem.  */\n+\t\telse if (strict < 0 && CONSTANT_P (op))\n+\t\t  win = 1;\n+\t\t/* During reload, accept a pseudo  */\n+\t\telse if (reload_in_progress && GET_CODE (op) == REG\n+\t\t\t && REGNO (op) >= FIRST_PSEUDO_REGISTER)\n \t\t  win = 1;\n \t\tbreak;\n "}]}