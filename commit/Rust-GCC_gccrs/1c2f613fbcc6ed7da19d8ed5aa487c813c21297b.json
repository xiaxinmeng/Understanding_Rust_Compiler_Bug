{"sha": "1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWMyZjYxM2ZiY2M2ZWQ3ZGExOWQ4ZWQ1YWE0ODdjODEzYzIxMjk3Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-09-16T20:22:35Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-09-16T20:22:35Z"}, "message": "re PR c++/77338 (ICE on invalid C++11 code on x86_64-linux-gnu: Segmentation fault)\n\n\tPR c++/77338\n\t* constexpr.c (cxx_eval_constant_expression) <case PARM_DECL>: Only\n\tcall is_really_empty_class on complete types.\n\n\t* g++.dg/cpp0x/decltype-77338.C: New test.\n\nFrom-SVN: r240196", "tree": {"sha": "1aee74c97f309f743e628901ae1bc355d7d71cc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1aee74c97f309f743e628901ae1bc355d7d71cc1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e7d61178099e49835d84fba9c5bffbace0f26099", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7d61178099e49835d84fba9c5bffbace0f26099", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7d61178099e49835d84fba9c5bffbace0f26099"}], "stats": {"total": 17, "additions": 16, "deletions": 1}, "files": [{"sha": "0c7d35140bfb4745d50d8e7d820ae67b031f0a54", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "patch": "@@ -1,5 +1,9 @@\n 2016-09-16  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/77338\n+\t* constexpr.c (cxx_eval_constant_expression) <case PARM_DECL>: Only\n+\tcall is_really_empty_class on complete types.\n+\n \tPR c++/77375\n \t* class.c (check_bases): Set CLASSTYPE_HAS_MUTABLE if any\n \tTYPE_HAS_MUTABLE_P for any bases."}, {"sha": "9308c5486217e635b564f1089f6ae3f636649c49", "filename": "gcc/cp/constexpr.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Fcp%2Fconstexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Fcp%2Fconstexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fconstexpr.c?ref=1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "patch": "@@ -3744,7 +3744,8 @@ cxx_eval_constant_expression (const constexpr_ctx *ctx, tree t,\n \t/* Defer in case this is only used for its type.  */;\n       else if (TREE_CODE (TREE_TYPE (t)) == REFERENCE_TYPE)\n \t/* Defer, there's no lvalue->rvalue conversion.  */;\n-      else if (is_really_empty_class (TREE_TYPE (t)))\n+      else if (COMPLETE_TYPE_P (TREE_TYPE (t))\n+\t       && is_really_empty_class (TREE_TYPE (t)))\n \t{\n \t  /* If the class is empty, we aren't actually loading anything.  */\n \t  r = build_constructor (TREE_TYPE (t), NULL);"}, {"sha": "30d7615ef6894ce43549303a95ad00b313e0725d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "patch": "@@ -1,5 +1,8 @@\n 2016-09-16  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c++/77338\n+\t* g++.dg/cpp0x/decltype-77338.C: New test.\n+\n \tPR c++/77375\n \t* g++.dg/cpp0x/mutable1.C: New test.\n "}, {"sha": "4ba7c96d32c980caca29f4f46118fd30f34fe732", "filename": "gcc/testsuite/g++.dg/cpp0x/decltype-77338.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype-77338.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c2f613fbcc6ed7da19d8ed5aa487c813c21297b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype-77338.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fdecltype-77338.C?ref=1c2f613fbcc6ed7da19d8ed5aa487c813c21297b", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/77338\n+// { dg-do compile { target c++11 } }\n+\n+struct S;\n+\n+template <typename>\n+auto f (S s) -> decltype (s (s));\t// { dg-error \"no match for call to\" }"}]}