{"sha": "6096017ee3a043a7d813a9291196cd6838338c04", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA5NjAxN2VlM2EwNDNhN2Q4MTNhOTI5MTE5NmNkNjgzODMzOGMwNA==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2009-10-01T11:48:24Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2009-10-01T11:48:24Z"}, "message": "re PR middle-end/12392 (very long optimized compile)\n\n2009-10-01  Martin Jambor  <mjambor@suse.cz>\n\n\tPR middle-end/12392\n\t* tree-sra.c (convert_callers): Do not call\n\tcompute_inline_parameters on one caller more than once.\n\nFrom-SVN: r152368", "tree": {"sha": "8886f0e8934210d9bcc586890b5986c4b0124661", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8886f0e8934210d9bcc586890b5986c4b0124661"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6096017ee3a043a7d813a9291196cd6838338c04", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6096017ee3a043a7d813a9291196cd6838338c04", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6096017ee3a043a7d813a9291196cd6838338c04", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6096017ee3a043a7d813a9291196cd6838338c04/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "34f9cdb582eeec5c2f489d9ade0f00d03abc9db5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34f9cdb582eeec5c2f489d9ade0f00d03abc9db5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34f9cdb582eeec5c2f489d9ade0f00d03abc9db5"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "19a52e324bf691c441761663aff7fe522da56533", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6096017ee3a043a7d813a9291196cd6838338c04/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6096017ee3a043a7d813a9291196cd6838338c04/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6096017ee3a043a7d813a9291196cd6838338c04", "patch": "@@ -1,3 +1,9 @@\n+2009-10-01  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR middle-end/12392\n+\t* tree-sra.c (convert_callers): Do not call\n+\tcompute_inline_parameters on one caller more than once.\n+\n 2009-10-01  Nick Clifton  <nickc@redhat.com>\n \n \t* config/vax/netbsd-elf.h (NETBSD_CC1_AND_CC1PLUS_SPEC): Define as"}, {"sha": "3922c22d824b8bb2a7899d7788a81c4413f4a1f3", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6096017ee3a043a7d813a9291196cd6838338c04/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6096017ee3a043a7d813a9291196cd6838338c04/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=6096017ee3a043a7d813a9291196cd6838338c04", "patch": "@@ -3646,22 +3646,32 @@ convert_callers (struct cgraph_node *node, ipa_parm_adjustment_vec adjustments)\n   tree old_cur_fndecl = current_function_decl;\n   struct cgraph_edge *cs;\n   basic_block this_block;\n+  bitmap recomputed_callers = BITMAP_ALLOC (NULL);\n \n   for (cs = node->callers; cs; cs = cs->next_caller)\n     {\n       current_function_decl = cs->caller->decl;\n       push_cfun (DECL_STRUCT_FUNCTION (cs->caller->decl));\n \n       if (dump_file)\n-\tfprintf (dump_file, \"Adjusting call %s -> %s\\n\",\n+\tfprintf (dump_file, \"Adjusting call (%i -> %i) %s -> %s\\n\",\n+\t\t cs->caller->uid, cs->callee->uid,\n \t\t cgraph_node_name (cs->caller),\n \t\t cgraph_node_name (cs->callee));\n \n       ipa_modify_call_arguments (cs, cs->call_stmt, adjustments);\n-      compute_inline_parameters (cs->caller);\n \n       pop_cfun ();\n     }\n+\n+  for (cs = node->callers; cs; cs = cs->next_caller)\n+    if (!bitmap_bit_p (recomputed_callers, cs->caller->uid))\n+      {\n+\tcompute_inline_parameters (cs->caller);\n+\tbitmap_set_bit (recomputed_callers, cs->caller->uid);\n+      }\n+  BITMAP_FREE (recomputed_callers);\n+\n   current_function_decl = old_cur_fndecl;\n   FOR_EACH_BB (this_block)\n     {"}]}