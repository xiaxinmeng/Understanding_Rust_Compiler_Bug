{"sha": "b7cf894ffac8266691a362a7b24fd3f086a60e38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjdjZjg5NGZmYWM4MjY2NjkxYTM2MmE3YjI0ZmQzZjA4NmE2MGUzOA==", "commit": {"author": {"name": "Oleg Endo", "email": "oleg.endo@t-online.de", "date": "2011-09-22T00:41:38Z"}, "committer": {"name": "Kaz Kojima", "email": "kkojima@gcc.gnu.org", "date": "2011-09-22T00:41:38Z"}, "message": "sh.c (andcosts): Renamed to and_xor_ior_costs.\n\n\t* config/sh/sh.c (andcosts): Renamed to and_xor_ior_costs.\n\tAdded AND special case.  Adapted comments.\n\t(sh_rtx_costs): Added XOR and IOR case.\n\nFrom-SVN: r179073", "tree": {"sha": "0edb8e6594060fd5f59dedbf5f564d939ec21c4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0edb8e6594060fd5f59dedbf5f564d939ec21c4a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7cf894ffac8266691a362a7b24fd3f086a60e38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7cf894ffac8266691a362a7b24fd3f086a60e38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7cf894ffac8266691a362a7b24fd3f086a60e38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7cf894ffac8266691a362a7b24fd3f086a60e38/comments", "author": {"login": "olegendo", "id": 1380209, "node_id": "MDQ6VXNlcjEzODAyMDk=", "avatar_url": "https://avatars.githubusercontent.com/u/1380209?v=4", "gravatar_id": "", "url": "https://api.github.com/users/olegendo", "html_url": "https://github.com/olegendo", "followers_url": "https://api.github.com/users/olegendo/followers", "following_url": "https://api.github.com/users/olegendo/following{/other_user}", "gists_url": "https://api.github.com/users/olegendo/gists{/gist_id}", "starred_url": "https://api.github.com/users/olegendo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/olegendo/subscriptions", "organizations_url": "https://api.github.com/users/olegendo/orgs", "repos_url": "https://api.github.com/users/olegendo/repos", "events_url": "https://api.github.com/users/olegendo/events{/privacy}", "received_events_url": "https://api.github.com/users/olegendo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f4d7f828662ea47fd418a49e718122cb408002a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4d7f828662ea47fd418a49e718122cb408002a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4d7f828662ea47fd418a49e718122cb408002a6"}], "stats": {"total": 30, "additions": 20, "deletions": 10}, "files": [{"sha": "6442cb81d0a11c32073d8ebb68fa7d38be3664bb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7cf894ffac8266691a362a7b24fd3f086a60e38/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7cf894ffac8266691a362a7b24fd3f086a60e38/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b7cf894ffac8266691a362a7b24fd3f086a60e38", "patch": "@@ -1,3 +1,9 @@\n+2011-09-22  Oleg Endo  <oleg.endo@t-online.de>\n+\n+\t* config/sh/sh.c (andcosts): Renamed to and_xor_ior_costs.\n+\tAdded AND special case.  Adapted comments.\n+\t(sh_rtx_costs): Added XOR and IOR case.\n+\n 2011-09-21  Jan Hubicka  <jh@suse.cz>\n \n \t* ipa-inline-analsis.c (compute_inline_parameters): Set"}, {"sha": "c0bfdd3af49de017fd14b5fdfc5f613b82fb031f", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 14, "deletions": 10, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7cf894ffac8266691a362a7b24fd3f086a60e38/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7cf894ffac8266691a362a7b24fd3f086a60e38/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=b7cf894ffac8266691a362a7b24fd3f086a60e38", "patch": "@@ -242,7 +242,7 @@ static void sh_file_start (void);\n static int flow_dependent_p (rtx, rtx);\n static void flow_dependent_p_1 (rtx, const_rtx, void *);\n static int shiftcosts (rtx);\n-static int andcosts (rtx);\n+static int and_xor_ior_costs (rtx, int code);\n static int addsubcosts (rtx);\n static int multcosts (rtx);\n static bool unspec_caller_rtx_p (rtx);\n@@ -2830,14 +2830,15 @@ shiftcosts (rtx x)\n     return shift_insns[value];\n }\n \n-/* Return the cost of an AND operation.  */\n+/* Return the cost of an AND/XOR/IOR operation.  */\n \n static inline int\n-andcosts (rtx x)\n+and_xor_ior_costs (rtx x, int code)\n {\n   int i;\n \n-  /* Anding with a register is a single cycle and instruction.  */\n+  /* A logical operation with two registers is a single cycle\n+     instruction.  */\n   if (!CONST_INT_P (XEXP (x, 1)))\n     return 1;\n \n@@ -2853,17 +2854,18 @@ andcosts (rtx x)\n     }\n \n   /* These constants are single cycle extu.[bw] instructions.  */\n-  if (i == 0xff || i == 0xffff)\n+  if ((i == 0xff || i == 0xffff) && code == AND)\n     return 1;\n-  /* Constants that can be used in an and immediate instruction in a single\n-     cycle, but this requires r0, so make it a little more expensive.  */\n+  /* Constants that can be used in an instruction as an immediate are\n+     a single cycle, but this requires r0, so make it a little more\n+     expensive.  */\n   if (CONST_OK_FOR_K08 (i))\n     return 2;\n-  /* Constants that can be loaded with a mov immediate and an and.\n+  /* Constants that can be loaded with a mov immediate need one more cycle.\n      This case is probably unnecessary.  */\n   if (CONST_OK_FOR_I08 (i))\n     return 2;\n-  /* Any other constants requires a 2 cycle pc-relative load plus an and.\n+  /* Any other constant requires an additional 2 cycle pc-relative load.\n      This case is probably unnecessary.  */\n   return 3;\n }\n@@ -3032,7 +3034,9 @@ sh_rtx_costs (rtx x, int code, int outer_code, int opno ATTRIBUTE_UNUSED,\n       return true;\n \n     case AND:\n-      *total = COSTS_N_INSNS (andcosts (x));\n+    case XOR:\n+    case IOR:\n+      *total = COSTS_N_INSNS (and_xor_ior_costs (x, code));\n       return true;\n \n     case MULT:"}]}