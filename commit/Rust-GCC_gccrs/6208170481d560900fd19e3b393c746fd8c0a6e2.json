{"sha": "6208170481d560900fd19e3b393c746fd8c0a6e2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIwODE3MDQ4MWQ1NjA5MDBmZDE5ZTNiMzkzYzc0NmZkOGMwYTZlMg==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-09-27T09:20:59Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-09-27T09:20:59Z"}, "message": "re PR c++/33493 (Broken diagnostic: 'dl_expr' not supported by dump_expr)\n\n/cp\n2007-09-27  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33493\n\t* error.c (dump_expr): Deal with DELETE_EXPR and VEC_DELETE_EXPR.\n\t* cxx-pretty-print.c (pp_cxx_delete_expression): Add missing\n\tspaces in the formatting.\n\t* cxx-pretty-print.h (pp_cxx_delete_expression): Declare.\n\n/testsuite\n2007-09-27  Paolo Carlini  <pcarlini@suse.de>\n\n\tPR c++/33493\n\t* g++.dg/template/error31.C: New.\n\nFrom-SVN: r128831", "tree": {"sha": "0a7bcbefc643e188970ff9b523de63799fde6768", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a7bcbefc643e188970ff9b523de63799fde6768"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6208170481d560900fd19e3b393c746fd8c0a6e2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6208170481d560900fd19e3b393c746fd8c0a6e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6208170481d560900fd19e3b393c746fd8c0a6e2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6208170481d560900fd19e3b393c746fd8c0a6e2/comments", "author": null, "committer": null, "parents": [{"sha": "c94ed7a1ae35d90b76e04cc7d8a9d72a7aa1451c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c94ed7a1ae35d90b76e04cc7d8a9d72a7aa1451c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c94ed7a1ae35d90b76e04cc7d8a9d72a7aa1451c"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "f459c54ae59930a3c1a5cf18d26f795ef21301ec", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6208170481d560900fd19e3b393c746fd8c0a6e2", "patch": "@@ -1,3 +1,11 @@\n+2007-09-27  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33493\n+\t* error.c (dump_expr): Deal with DELETE_EXPR and VEC_DELETE_EXPR.\n+\t* cxx-pretty-print.c (pp_cxx_delete_expression): Add missing\n+\tspaces in the formatting.\n+\t* cxx-pretty-print.h (pp_cxx_delete_expression): Declare.\n+\n 2007-09-27  Jakub Jelinek  <jakub@redhat.com>\n \n \t* error.c (cxx_print_error_function): Add third argument, pass"}, {"sha": "6481273fd864d2811596c513cd52ab77c89fa0f4", "filename": "gcc/cp/cxx-pretty-print.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2Fcxx-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2Fcxx-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcxx-pretty-print.c?ref=6208170481d560900fd19e3b393c746fd8c0a6e2", "patch": "@@ -662,7 +662,7 @@ pp_cxx_new_expression (cxx_pretty_printer *pp, tree t)\n       ::(opt) delete cast-expression\n       ::(opt) delete [ ] cast-expression   */\n \n-static void\n+void\n pp_cxx_delete_expression (cxx_pretty_printer *pp, tree t)\n {\n   enum tree_code code = TREE_CODE (t);\n@@ -673,10 +673,13 @@ pp_cxx_delete_expression (cxx_pretty_printer *pp, tree t)\n       if (DELETE_EXPR_USE_GLOBAL (t))\n \tpp_cxx_colon_colon (pp);\n       pp_cxx_identifier (pp, \"delete\");\n-      if (code == VEC_DELETE_EXPR)\n+      pp_space (pp);\n+      if (code == VEC_DELETE_EXPR\n+\t  || DELETE_EXPR_USE_VEC (t))\n \t{\n \t  pp_left_bracket (pp);\n \t  pp_right_bracket (pp);\n+\t  pp_space (pp);\n \t}\n       pp_c_cast_expression (pp_c_base (pp), TREE_OPERAND (t, 0));\n       break;"}, {"sha": "66943ac0246d446bdb3028cac9713f7dcb92a106", "filename": "gcc/cp/cxx-pretty-print.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2Fcxx-pretty-print.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2Fcxx-pretty-print.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcxx-pretty-print.h?ref=6208170481d560900fd19e3b393c746fd8c0a6e2", "patch": "@@ -72,5 +72,6 @@ void pp_cxx_canonical_template_parameter (cxx_pretty_printer *, tree);\n void pp_cxx_trait_expression (cxx_pretty_printer *, tree);\n void pp_cxx_typeid_expression (cxx_pretty_printer *, tree);\n void pp_cxx_va_arg_expression (cxx_pretty_printer *, tree);\n+void pp_cxx_delete_expression (cxx_pretty_printer *, tree);\n \n #endif /* GCC_CXX_PRETTY_PRINT_H */"}, {"sha": "4337d4d2630f6c5ab5034763f96f0fc7597a86a9", "filename": "gcc/cp/error.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=6208170481d560900fd19e3b393c746fd8c0a6e2", "patch": "@@ -2066,6 +2066,11 @@ dump_expr (tree t, int flags)\n       pp_cxx_va_arg_expression (cxx_pp, t);\n       break;\n \n+    case DELETE_EXPR:\n+    case VEC_DELETE_EXPR:\n+      pp_cxx_delete_expression (cxx_pp, t);\n+      break;\n+\n       /*  This list is incomplete, but should suffice for now.\n \t  It is very important that `sorry' does not call\n \t  `report_error_function'.  That could cause an infinite loop.  */"}, {"sha": "c74f89998542f69cf91627fb813557e420a5a6a8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6208170481d560900fd19e3b393c746fd8c0a6e2", "patch": "@@ -1,3 +1,8 @@\n+2007-09-27  Paolo Carlini  <pcarlini@suse.de>\n+\n+\tPR c++/33493\n+\t* g++.dg/template/error31.C: New.\n+\n 2007-09-27  Jakub Jelinek  <jakub@redhat.com>\n \n \t* lib/prune.exp: Prune also \"^In function .*$\" lines and"}, {"sha": "4fd70262389a6b160953f4f25f0eba2f006f9021", "filename": "gcc/testsuite/g++.dg/template/error31.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror31.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6208170481d560900fd19e3b393c746fd8c0a6e2/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror31.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ferror31.C?ref=6208170481d560900fd19e3b393c746fd8c0a6e2", "patch": "@@ -0,0 +1,3 @@\n+// PR c++/33493\n+\n+template<int> void foo() { delete 0 ? 1 : 0; } // { dg-error \"delete 0\" }"}]}