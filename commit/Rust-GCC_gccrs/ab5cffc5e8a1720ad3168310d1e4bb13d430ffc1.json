{"sha": "ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI1Y2ZmYzVlOGExNzIwYWQzMTY4MzEwZDFlNGJiMTNkNDMwZmZjMQ==", "commit": {"author": {"name": "Anthony Green", "email": "green@redhat.com", "date": "2000-01-31T08:56:09Z"}, "committer": {"name": "Anthony Green", "email": "green@gcc.gnu.org", "date": "2000-01-31T08:56:09Z"}, "message": "natIconv.cc (read): Minor fixes.\n\n    * gnu/gcj/convert/natIconv.cc (read): Minor fixes.\n    (write): Ditto.\n\nFrom-SVN: r31712", "tree": {"sha": "0f3ed1e1568d3f064c4b84ca0b491b4dcc001b25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f3ed1e1568d3f064c4b84ca0b491b4dcc001b25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1/comments", "author": {"login": "atgreen", "id": 89993, "node_id": "MDQ6VXNlcjg5OTkz", "avatar_url": "https://avatars.githubusercontent.com/u/89993?v=4", "gravatar_id": "", "url": "https://api.github.com/users/atgreen", "html_url": "https://github.com/atgreen", "followers_url": "https://api.github.com/users/atgreen/followers", "following_url": "https://api.github.com/users/atgreen/following{/other_user}", "gists_url": "https://api.github.com/users/atgreen/gists{/gist_id}", "starred_url": "https://api.github.com/users/atgreen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/atgreen/subscriptions", "organizations_url": "https://api.github.com/users/atgreen/orgs", "repos_url": "https://api.github.com/users/atgreen/repos", "events_url": "https://api.github.com/users/atgreen/events{/privacy}", "received_events_url": "https://api.github.com/users/atgreen/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "cbea2acb2409b70e79b2e9d5143b9f02f72e6198", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbea2acb2409b70e79b2e9d5143b9f02f72e6198", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbea2acb2409b70e79b2e9d5143b9f02f72e6198"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "6a7ba363d5b1053cb998d53517f061d11490d3e7", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1", "patch": "@@ -1,3 +1,8 @@\n+Mon Jan 31 00:43:15 2000  Anthony Green  <green@redhat.com>\n+\n+\t* gnu/gcj/convert/natIconv.cc (read): Minor fixes.\n+\t(write): Ditto.\n+\n 2000-01-30  Tom Tromey  <tromey@cygnus.com>\n \n \t* include/config.h.in: Rebuilt."}, {"sha": "ee3490a99b72328e368458a92b32e510f0784a43", "filename": "libjava/gnu/gcj/convert/natIconv.cc", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1/libjava%2Fgnu%2Fgcj%2Fconvert%2FnatIconv.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1/libjava%2Fgnu%2Fgcj%2Fconvert%2FnatIconv.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fgnu%2Fgcj%2Fconvert%2FnatIconv.cc?ref=ab5cffc5e8a1720ad3168310d1e4bb13d430ffc1", "patch": "@@ -69,9 +69,12 @@ gnu::gcj::convert::Input_iconv::read (jcharArray outbuffer,\n   size_t outavail = count;\n   size_t old_out = outavail;\n \n+  const char *inbuf = (const char *) &bytes[inpos];\n+  char *outbuf = (char *) &out[outpos];\n+\n   size_t r = iconv ((iconv_t) handle,\n-\t\t    &bytes[inpos], &inavail,\n-\t\t    &out[outpos], &outavail);\n+\t\t    &inbuf, &inavail,\n+\t\t    &outbuf, &outavail);\n   // FIXME: what if R==-1?\n \n   inpos += old_in - inavail;\n@@ -118,7 +121,7 @@ gnu::gcj::convert::Output_iconv::write (jcharArray inbuffer,\n \t\t\t\t\tjint inpos, jint count)\n {\n #ifdef HAVE_ICONV\n-  jint origpos = outpos;\n+  jint origpos = inpos;\n \n   jchar *chars = elements (inbuffer);\n   jbyte *out = elements (buf);\n@@ -129,9 +132,12 @@ gnu::gcj::convert::Output_iconv::write (jcharArray inbuffer,\n   size_t outavail = buf->length - count;\n   size_t old_out = outavail;\n \n+  const char *inbuf = (const char *) &chars[inpos];\n+  char *outbuf = (char *) &out[count];\n+\n   size_t r = iconv ((iconv_t) handle,\n-\t\t    &chars[inpos], &inavail,\n-\t\t    &out[count], &outavail);\n+\t\t    &inbuf, &inavail,\n+\t\t    &outbuf, &outavail);\n   // FIXME: what if R==-1?\n \n   count += old_out - outavail;"}]}