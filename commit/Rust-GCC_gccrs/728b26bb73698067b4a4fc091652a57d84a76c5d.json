{"sha": "728b26bb73698067b4a4fc091652a57d84a76c5d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzI4YjI2YmI3MzY5ODA2N2I0YTRmYzA5MTY1MmE1N2Q4NGE3NmM1ZA==", "commit": {"author": {"name": "Diego Novillo", "email": "dnovillo@redhat.com", "date": "2006-02-02T12:27:02Z"}, "committer": {"name": "Diego Novillo", "email": "dnovillo@gcc.gnu.org", "date": "2006-02-02T12:27:02Z"}, "message": "re PR middle-end/25990 (gomp ICE with -fopenmp)\n\n\n\tPR 25990\n\t* tree-cfg.c (move_block_to_fn): Clear out the basic block\n\tarray after growing it.\n\ntestsuite/\n\n\tPR 25990\n\t* gcc.dg/gomp/pr25990.c: New test.\n\nFrom-SVN: r110511", "tree": {"sha": "2bcba9cef5577ba091207f589e26bac531808c6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2bcba9cef5577ba091207f589e26bac531808c6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/728b26bb73698067b4a4fc091652a57d84a76c5d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/728b26bb73698067b4a4fc091652a57d84a76c5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/728b26bb73698067b4a4fc091652a57d84a76c5d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/728b26bb73698067b4a4fc091652a57d84a76c5d/comments", "author": null, "committer": null, "parents": [{"sha": "c503a0c073ee24aa5069fecf4299ffd417722a6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c503a0c073ee24aa5069fecf4299ffd417722a6b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c503a0c073ee24aa5069fecf4299ffd417722a6b"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "d39dfc8f4fa6849018fac730ccfee1902f76d2cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/728b26bb73698067b4a4fc091652a57d84a76c5d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/728b26bb73698067b4a4fc091652a57d84a76c5d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=728b26bb73698067b4a4fc091652a57d84a76c5d", "patch": "@@ -1,3 +1,9 @@\n+2006-02-02  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR 25990\n+\t* tree-cfg.c (move_block_to_fn): Clear out the basic block\n+\tarray after growing it.\n+\n 2006-02-01  Steve Ellcey  <sje@cup.hp.com>\n \n \tPR middle-end/24901"}, {"sha": "5d4cff5ee9954deca2258cd5dfc3ba50cb644372", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/728b26bb73698067b4a4fc091652a57d84a76c5d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/728b26bb73698067b4a4fc091652a57d84a76c5d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=728b26bb73698067b4a4fc091652a57d84a76c5d", "patch": "@@ -1,3 +1,8 @@\n+2006-02-02  Diego Novillo  <dnovillo@redhat.com>\n+\n+\tPR 25990\n+\t* gcc.dg/gomp/pr25990.c: New test.\n+\n 2006-01-31  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/25342"}, {"sha": "9ba761dcf4a91259a01812fca72ef8f5e44a577b", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/728b26bb73698067b4a4fc091652a57d84a76c5d/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/728b26bb73698067b4a4fc091652a57d84a76c5d/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=728b26bb73698067b4a4fc091652a57d84a76c5d", "patch": "@@ -4656,7 +4656,8 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n   edge e;\n   block_stmt_iterator si;\n   struct move_stmt_d d;\n-  unsigned sz;\n+  unsigned old_len, new_len;\n+  basic_block *addr;\n \n   /* Link BB to the new linked list.  */\n   move_block_after (bb, after);\n@@ -4679,11 +4680,13 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n   if (bb->index > cfg->x_last_basic_block)\n     cfg->x_last_basic_block = bb->index;\n \n-  sz = VEC_length (basic_block, cfg->x_basic_block_info);\n-  if ((unsigned) cfg->x_last_basic_block >= sz)\n+  old_len = VEC_length (basic_block, cfg->x_basic_block_info);\n+  if ((unsigned) cfg->x_last_basic_block >= old_len)\n     {\n-      sz = cfg->x_last_basic_block + (cfg->x_last_basic_block + 3) / 4;\n-      VEC_safe_grow (basic_block, gc, cfg->x_basic_block_info, sz);\n+      new_len = cfg->x_last_basic_block + (cfg->x_last_basic_block + 3) / 4;\n+      VEC_safe_grow (basic_block, gc, cfg->x_basic_block_info, new_len);\n+      addr = VEC_address (basic_block, cfg->x_basic_block_info);\n+      memset (&addr[old_len], 0, sizeof (basic_block) * (new_len - old_len));\n     }\n \n   VEC_replace (basic_block, cfg->x_basic_block_info,\n@@ -4708,7 +4711,6 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n \n       if (TREE_CODE (stmt) == LABEL_EXPR)\n \t{\n-\t  unsigned old_len;\n \t  tree label = LABEL_EXPR_LABEL (stmt);\n \t  int uid = LABEL_DECL_UID (label);\n \n@@ -4717,8 +4719,7 @@ move_block_to_fn (struct function *dest_cfun, basic_block bb,\n \t  old_len = VEC_length (basic_block, cfg->x_label_to_block_map);\n \t  if (old_len <= (unsigned) uid)\n \t    {\n-\t      basic_block *addr;\n-\t      unsigned new_len = 3 * uid / 2;\n+\t      new_len = 3 * uid / 2;\n \t      VEC_safe_grow (basic_block, gc, cfg->x_label_to_block_map,\n \t\t\t     new_len);\n \t      addr = VEC_address (basic_block, cfg->x_label_to_block_map);"}]}