{"sha": "d2d74c9fc0cf46f66cd02698a52f5e5db109271d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDJkNzRjOWZjMGNmNDZmNjZjZDAyNjk4YTUyZjVlNWRiMTA5MjcxZA==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@linux.ibm.com", "date": "2021-06-02T20:03:40Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@linux.ibm.com", "date": "2021-06-02T20:07:28Z"}, "message": "Make sure link reg save MEM has frame alias set.\n\ngcc/ChangeLog:\n\n\t* config/rs6000/rs6000-logue.c (rs6000_emit_prologue): Use\n\tgen_frame_store.", "tree": {"sha": "5b58f62846bf6a3da2b51876784f51d515d80adb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b58f62846bf6a3da2b51876784f51d515d80adb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2d74c9fc0cf46f66cd02698a52f5e5db109271d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2d74c9fc0cf46f66cd02698a52f5e5db109271d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2d74c9fc0cf46f66cd02698a52f5e5db109271d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2d74c9fc0cf46f66cd02698a52f5e5db109271d/comments", "author": null, "committer": null, "parents": [{"sha": "63d182b29306e582bfb151cf762820211ea1cc7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63d182b29306e582bfb151cf762820211ea1cc7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63d182b29306e582bfb151cf762820211ea1cc7e"}], "stats": {"total": 11, "additions": 3, "deletions": 8}, "files": [{"sha": "07337c4836a3e262b4eee045247f12eaf39458e4", "filename": "gcc/config/rs6000/rs6000-logue.c", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2d74c9fc0cf46f66cd02698a52f5e5db109271d/gcc%2Fconfig%2Frs6000%2Frs6000-logue.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2d74c9fc0cf46f66cd02698a52f5e5db109271d/gcc%2Fconfig%2Frs6000%2Frs6000-logue.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-logue.c?ref=d2d74c9fc0cf46f66cd02698a52f5e5db109271d", "patch": "@@ -3257,7 +3257,7 @@ rs6000_emit_prologue (void)\n   if (!WORLD_SAVE_P (info) && info->lr_save_p\n       && !cfun->machine->lr_is_wrapped_separately)\n     {\n-      rtx addr, reg, mem;\n+      rtx reg;\n \n       reg = gen_rtx_REG (Pmode, 0);\n       START_USE (0);\n@@ -3267,13 +3267,8 @@ rs6000_emit_prologue (void)\n       if (!(strategy & (SAVE_NOINLINE_GPRS_SAVES_LR\n \t\t\t| SAVE_NOINLINE_FPRS_SAVES_LR)))\n \t{\n-\t  addr = gen_rtx_PLUS (Pmode, frame_reg_rtx,\n-\t\t\t       GEN_INT (info->lr_save_offset + frame_off));\n-\t  mem = gen_rtx_MEM (Pmode, addr);\n-\t  /* This should not be of rs6000_sr_alias_set, because of\n-\t     __builtin_return_address.  */\n-\n-\t  insn = emit_move_insn (mem, reg);\n+\t  insn = emit_insn (gen_frame_store (reg, frame_reg_rtx,\n+\t\t\t\t\t     info->lr_save_offset + frame_off));\n \t  rs6000_frame_related (insn, frame_reg_rtx, sp_off - frame_off,\n \t\t\t\tNULL_RTX, NULL_RTX);\n \t  END_USE (0);"}]}