{"sha": "463084746c84205b40c855f1612fcee978d25a4f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYzMDg0NzQ2Yzg0MjA1YjQwYzg1NWYxNjEyZmNlZTk3OGQyNWE0Zg==", "commit": {"author": {"name": "Luis Felipe Strano Moraes", "email": "luis.strano@gmail.com", "date": "2015-07-27T22:26:34Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2015-07-27T22:26:34Z"}, "message": "c-decl.c (get_parm_info): Remove static var.\n\ngcc/c/ChangeLog\n\n2015-07-28  Luis Felipe Strano Moraes  <luis.strano@gmail.com>\n\t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* c-decl.c (get_parm_info): Remove static var. Update warning\n\tmessage.\n\ngcc/testsuite/ChangeLog\n\n2015-07-28  Luis Felipe Strano Moraes  <luis.strano@gmail.com>\n\t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n\n\t* gcc.dg/parm-incomplete-1.c: Update.\n\t* gcc.dg/pr18809-1.c: Update.\n\t* gcc.dg/pr27953.c: Update.\n\t* gcc.dg/vla-11.c: Update.\n\nCo-Authored-By: Manuel L\u00f3pez-Ib\u00e1\u00f1ez <manu@gcc.gnu.org>\n\nFrom-SVN: r226274", "tree": {"sha": "f9ad9ba10d8ebce2eaecafbc8ad4e75c3e8bf664", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f9ad9ba10d8ebce2eaecafbc8ad4e75c3e8bf664"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/463084746c84205b40c855f1612fcee978d25a4f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/463084746c84205b40c855f1612fcee978d25a4f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/463084746c84205b40c855f1612fcee978d25a4f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/463084746c84205b40c855f1612fcee978d25a4f/comments", "author": {"login": "lfelipe", "id": 1640, "node_id": "MDQ6VXNlcjE2NDA=", "avatar_url": "https://avatars.githubusercontent.com/u/1640?v=4", "gravatar_id": "", "url": "https://api.github.com/users/lfelipe", "html_url": "https://github.com/lfelipe", "followers_url": "https://api.github.com/users/lfelipe/followers", "following_url": "https://api.github.com/users/lfelipe/following{/other_user}", "gists_url": "https://api.github.com/users/lfelipe/gists{/gist_id}", "starred_url": "https://api.github.com/users/lfelipe/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/lfelipe/subscriptions", "organizations_url": "https://api.github.com/users/lfelipe/orgs", "repos_url": "https://api.github.com/users/lfelipe/repos", "events_url": "https://api.github.com/users/lfelipe/events{/privacy}", "received_events_url": "https://api.github.com/users/lfelipe/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "160654a0b8108509f30cef9c3b726e330f8c5451", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/160654a0b8108509f30cef9c3b726e330f8c5451", "html_url": "https://github.com/Rust-GCC/gccrs/commit/160654a0b8108509f30cef9c3b726e330f8c5451"}], "stats": {"total": 38, "additions": 22, "deletions": 16}, "files": [{"sha": "708d3bf69be64c0d28deffd3e987875d5f8cffe7", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -1,3 +1,9 @@\n+2015-07-28  Luis Felipe Strano Moraes  <luis.strano@gmail.com>\n+\t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* c-decl.c (get_parm_info): Remove static var. Update warning\n+\tmessage.\n+\n 2015-07-27  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/66555"}, {"sha": "2669764cc0adf1568dcf3ed205a6e0b4f73c1b8a", "filename": "gcc/c/c-decl.c", "status": "modified", "additions": 8, "deletions": 12, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Fc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Fc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-decl.c?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -6897,7 +6897,6 @@ get_parm_info (bool ellipsis, tree expr)\n   tree types    = 0;\n   tree others   = 0;\n \n-  static bool explained_incomplete_types = false;\n   bool gave_void_only_once_err = false;\n \n   arg_info->had_vla_unspec = current_scope->had_vla_unspec;\n@@ -7000,19 +6999,16 @@ get_parm_info (bool ellipsis, tree expr)\n \t    {\n \t      if (b->id)\n \t\t/* The %s will be one of 'struct', 'union', or 'enum'.  */\n-\t\twarning (0, \"%<%s %E%> declared inside parameter list\",\n-\t\t\t keyword, b->id);\n+\t\twarning_at (input_location, 0,\n+\t\t\t    \"%<%s %E%> declared inside parameter list\"\n+\t\t\t    \" will not be visible outside of this definition or\"\n+\t\t\t    \" declaration\", keyword, b->id);\n \t      else\n \t\t/* The %s will be one of 'struct', 'union', or 'enum'.  */\n-\t\twarning (0, \"anonymous %s declared inside parameter list\",\n-\t\t\t keyword);\n-\n-\t      if (!explained_incomplete_types)\n-\t\t{\n-\t\t  warning (0, \"its scope is only this definition or declaration,\"\n-\t\t\t   \" which is probably not what you want\");\n-\t\t  explained_incomplete_types = true;\n-\t\t}\n+\t\twarning_at (input_location, 0,\n+\t\t\t    \"anonymous %s declared inside parameter list\"\n+\t\t\t    \" will not be visible outside of this definition or\"\n+\t\t\t    \" declaration\", keyword);\n \t    }\n \n \t  tag.id = b->id;"}, {"sha": "fcf7a549f22be5ebe25e7401c5e49dad2d375698", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -1,3 +1,11 @@\n+2015-07-28  Luis Felipe Strano Moraes  <luis.strano@gmail.com>\n+\t    Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n+\n+\t* gcc.dg/parm-incomplete-1.c: Update.\n+\t* gcc.dg/pr18809-1.c: Update.\n+\t* gcc.dg/pr27953.c: Update.\n+\t* gcc.dg/vla-11.c: Update.\n+\n 2015-07-27  Marek Polacek  <polacek@redhat.com>\n \n \t* c-c++-common/Wtautological-compare-2.c: Remove unused line."}, {"sha": "02d97b933f42df8455c6059e8b8e9f3dbf17988d", "filename": "gcc/testsuite/gcc.dg/parm-incomplete-1.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fparm-incomplete-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fparm-incomplete-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fparm-incomplete-1.c?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -17,7 +17,6 @@ struct s { int b; };\n void h (struct s x) { }\n \n void j(struct t2); /* { dg-warning \"'struct t2' declared inside parameter list\" } */\n-/* { dg-warning \"its scope is only\" \"explanation\" { target *-*-* } 19 } */\n \n union u;\n "}, {"sha": "a1f552b9f38b96b269941736ff655d2516d5ec3b", "filename": "gcc/testsuite/gcc.dg/pr18809-1.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr18809-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr18809-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr18809-1.c?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -5,6 +5,5 @@\n \n void foo(enum E e) {}   /* { dg-error \"forward ref\" \"forward\" } */\n \t\t\t/* { dg-warning \"declared\" \"declared\" { target *-*-* } 6 } */\n-\t\t\t/* { dg-warning \"scope\" \"scope\" { target *-*-* } 6 } */\n \t\t\t/* { dg-error \"incomplete\" \"incomplete\" { target *-*-* } 6 } */\n void bar() { foo(0); }"}, {"sha": "d4d559e54f74cb79e62403c1662fa07124d2c389", "filename": "gcc/testsuite/gcc.dg/pr27953.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27953.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27953.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr27953.c?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -1,7 +1,6 @@\n /* PR c/27953 */\n \n void foo(struct A a) {}  /* { dg-warning \"declared inside parameter list\" \"inside\" } */\n-/* { dg-warning \"its scope is only\" \"scope\" { target *-*-* } 3 } */\n /* { dg-error \"incomplete type\" \"incomplete\" { target *-*-* } 3 } */\n \n void foo() {}            /* { dg-error \"redefinition\" \"redef\" } */"}, {"sha": "7db34421ea019d16fa7eb64bc48bab00bd038c39", "filename": "gcc/testsuite/gcc.dg/vla-11.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fvla-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/463084746c84205b40c855f1612fcee978d25a4f/gcc%2Ftestsuite%2Fgcc.dg%2Fvla-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvla-11.c?ref=463084746c84205b40c855f1612fcee978d25a4f", "patch": "@@ -10,4 +10,3 @@ void foo11a(int x[sizeof(int *(*)[*])]);\t/* { dg-warning \"not in a declaration\"\n void foo11b(__SIZE_TYPE__ x, int y[(__UINTPTR_TYPE__)(int (*)[*])x]);\t/* { dg-warning \"not in a declaration\" } */\n void foo11c(struct s { int (*x)[*]; } *y);\t/* { dg-error \"a member of a structure or union cannot have a variably modified type\" \"variably modified\" } */\n /* { dg-warning \"'struct s' declared inside parameter list\" \"struct decl\" { target *-*-* } 11 } */\n-/* { dg-warning \"its scope is only this definition or declaration\" \"struct scope\" { target *-*-* } 11 } */"}]}