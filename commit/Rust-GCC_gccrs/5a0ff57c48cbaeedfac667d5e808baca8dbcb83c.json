{"sha": "5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWEwZmY1N2M0OGNiYWVlZGZhYzY2N2Q1ZTgwOGJhY2E4ZGJjYjgzYw==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2015-05-06T16:01:05Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2015-05-06T16:01:05Z"}, "message": "unknown-elf.h (STARTFILE_SPEC): Add conditional linking of crtfastmath.o.\n\n2015-05-06  Sandra Loosemore  <sandra@codesourcery.com>\n\t    Chris Jones  <chrisj@nvidia.com>\n\t    Joshua Conner  <jconner@nvidia.com>\n\n\tgcc/\n\t* config/arm/unknown-elf.h (STARTFILE_SPEC): Add conditional\n\tlinking of crtfastmath.o.\n\t* config/arm/linux-eabi.h (STARTFILE_SPEC): Likewise.\n\n\tlibgcc/\n\t* config.host (arm*-*-linux*): Add support for crtfastmath.o.\n\t(arm*-*-uclinux*): Likewise.\n\t(arm*-*-eabi* | arm*-*-rtems*): Likewise.\n\t* config/arm/crtfastmath.c: New file.\n\n\nCo-Authored-By: Chris Jones <chrisj@nvidia.com>\nCo-Authored-By: Joshua Conner <jconner@nvidia.com>\n\nFrom-SVN: r222857", "tree": {"sha": "a9fc9cd0a5bcc2c76ff3803079fb8a0b0254fb94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9fc9cd0a5bcc2c76ff3803079fb8a0b0254fb94"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "29e597d0e6c853b1487ee86357df704a5e0ab618", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29e597d0e6c853b1487ee86357df704a5e0ab618", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29e597d0e6c853b1487ee86357df704a5e0ab618"}], "stats": {"total": 69, "additions": 65, "deletions": 4}, "files": [{"sha": "a3ccaf63f43e0a53a7525e01a84a7b4cc979f907", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "patch": "@@ -1,3 +1,11 @@\n+2015-05-06  Sandra Loosemore  <sandra@codesourcery.com>\n+\t    Chris Jones  <chrisj@nvidia.com>\n+\t    Joshua Conner  <jconner@nvidia.com>\n+\n+\t* config/arm/unknown-elf.h (STARTFILE_SPEC): Add conditional\n+\tlinking of crtfastmath.o.\n+\t* config/arm/linux-eabi.h (STARTFILE_SPEC): Likewise.\n+\n 2015-05-06  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* config/rs6000/rs6000.md (cstore<mode>4_signed_imm): New expander."}, {"sha": "2cf3ca77170964918355962c652be7a863361adb", "filename": "gcc/config/arm/linux-eabi.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/gcc%2Fconfig%2Farm%2Flinux-eabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/gcc%2Fconfig%2Farm%2Flinux-eabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Flinux-eabi.h?ref=5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "patch": "@@ -107,6 +107,7 @@\n \n #undef\tENDFILE_SPEC\n #define ENDFILE_SPEC \\\n+  \"%{Ofast|ffast-math|funsafe-math-optimizations:crtfastmath.o%s} \"\t\\\n   LINUX_OR_ANDROID_LD (GNU_USER_TARGET_ENDFILE_SPEC, ANDROID_ENDFILE_SPEC)\n \n /* Use the default LIBGCC_SPEC, not the version in linux-elf.h, as we"}, {"sha": "d1d4f7a1c66172d68581c828f9355872803d5179", "filename": "gcc/config/arm/unknown-elf.h", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/gcc%2Fconfig%2Farm%2Funknown-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/gcc%2Fconfig%2Farm%2Funknown-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Funknown-elf.h?ref=5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "patch": "@@ -32,7 +32,9 @@\n #define UNKNOWN_ELF_STARTFILE_SPEC\t\" crti%O%s crtbegin%O%s crt0%O%s\"\n \n #undef  STARTFILE_SPEC\n-#define STARTFILE_SPEC\tUNKNOWN_ELF_STARTFILE_SPEC\n+#define STARTFILE_SPEC\t\\\n+  \"%{Ofast|ffast-math|funsafe-math-optimizations:crtfastmath.o%s} \"\t\\\n+  UNKNOWN_ELF_STARTFILE_SPEC\n \n #define UNKNOWN_ELF_ENDFILE_SPEC\t\"crtend%O%s crtn%O%s\"\n "}, {"sha": "a3f3962a8d3c9b6a0722e0fbdd5eecd780c153c3", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "patch": "@@ -1,3 +1,12 @@\n+2015-05-06  Sandra Loosemore  <sandra@codesourcery.com>\n+\t    Chris Jones  <chrisj@nvidia.com>\n+\t    Joshua Conner  <jconner@nvidia.com>\n+\n+\t* config.host (arm*-*-linux*): Add support for crtfastmath.o.\n+\t(arm*-*-uclinux*): Likewise.\n+\t(arm*-*-eabi* | arm*-*-rtems*): Likewise.\n+\t* config/arm/crtfastmath.c: New file.\n+\n 2014-04-29  Bernd Schmidt  <bernds@codesourcery.com>\n \n \t* Makefile.in (real_host_noncanonical): New variable."}, {"sha": "d558c383631db089c1aa0c6a7cfcdfdb25d1bf91", "filename": "libgcc/config.host", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "patch": "@@ -377,14 +377,15 @@ arm*-*-netbsdelf*)\n \ttmake_file=\"$tmake_file arm/t-arm arm/t-netbsd t-slibgcc-gld-nover\"\n \t;;\n arm*-*-linux*)\t\t\t# ARM GNU/Linux with ELF\n-\ttmake_file=\"${tmake_file} arm/t-arm t-fixedpoint-gnu-prefix\"\n+\ttmake_file=\"${tmake_file} arm/t-arm t-fixedpoint-gnu-prefix t-crtfm\"\n \ttmake_file=\"${tmake_file} arm/t-elf arm/t-bpabi arm/t-linux-eabi t-slibgcc-libgcc\"\n \ttm_file=\"$tm_file arm/bpabi-lib.h\"\n \tunwind_header=config/arm/unwind-arm.h\n \ttmake_file=\"$tmake_file t-softfp-sfdf t-softfp-excl arm/t-softfp t-softfp\"\n+\textra_parts=\"$extra_parts crtfastmath.o\"\n \t;;\n arm*-*-uclinux*)\t\t# ARM ucLinux\n-\ttmake_file=\"${tmake_file} t-fixedpoint-gnu-prefix\"\n+\ttmake_file=\"${tmake_file} t-fixedpoint-gnu-prefix t-crtfm\"\n \ttmake_file=\"$tmake_file arm/t-arm arm/t-elf t-softfp-sfdf t-softfp-excl arm/t-softfp t-softfp\"\n \ttmake_file=\"${tmake_file} arm/t-bpabi\"\n \ttm_file=\"$tm_file arm/bpabi-lib.h\"\n@@ -396,7 +397,7 @@ arm*-*-eabi* | arm*-*-symbianelf* | arm*-*-rtems*)\n \ttm_file=\"$tm_file arm/bpabi-lib.h\"\n \tcase ${host} in\n \tarm*-*-eabi* | arm*-*-rtems*)\n-\t  tmake_file=\"${tmake_file} arm/t-bpabi\"\n+\t  tmake_file=\"${tmake_file} arm/t-bpabi t-crtfm\"\n \t  extra_parts=\"crtbegin.o crtend.o crti.o crtn.o\"\n \t  ;;\n \tarm*-*-symbianelf*)"}, {"sha": "9573514961ee9237f2e290ea81755badb8055ef3", "filename": "libgcc/config/arm/crtfastmath.c", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/libgcc%2Fconfig%2Farm%2Fcrtfastmath.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a0ff57c48cbaeedfac667d5e808baca8dbcb83c/libgcc%2Fconfig%2Farm%2Fcrtfastmath.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Farm%2Fcrtfastmath.c?ref=5a0ff57c48cbaeedfac667d5e808baca8dbcb83c", "patch": "@@ -0,0 +1,40 @@\n+/*\n+ * Copyright (C) 2014 Free Software Foundation, Inc.\n+ *\n+ * This file is free software; you can redistribute it and/or modify it\n+ * under the terms of the GNU General Public License as published by the\n+ * Free Software Foundation; either version 3, or (at your option) any\n+ * later version.\n+ *\n+ * This file is distributed in the hope that it will be useful, but\n+ * WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n+ * General Public License for more details.\n+ *\n+ * Under Section 7 of GPL version 3, you are granted additional\n+ * permissions described in the GCC Runtime Library Exception, version\n+ * 3.1, as published by the Free Software Foundation.\n+ *\n+ * You should have received a copy of the GNU General Public License and\n+ * a copy of the GCC Runtime Library Exception along with this program;\n+ * see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+ * <http://www.gnu.org/licenses/>.\n+ */\n+\n+/* Enable flush-to-zero support for -ffast-math on VFP targets.  */\n+#ifndef __SOFTFP__\n+\n+#define FPSCR_FZ\t\t(1 << 24)\n+\n+static void __attribute__((constructor))\n+__arm_set_fast_math (void)\n+{\n+  unsigned int fpscr_save;\n+\n+  /* Set the FZ (flush-to-zero) bit in FPSCR.  */\n+  __asm__(\"vmrs %0, fpscr\" : \"=r\" (fpscr_save));\n+  fpscr_save |= FPSCR_FZ;\n+  __asm__(\"vmsr fpscr, %0\" : : \"r\" (fpscr_save));\n+}\n+\n+#endif /* __SOFTFP__  */"}]}