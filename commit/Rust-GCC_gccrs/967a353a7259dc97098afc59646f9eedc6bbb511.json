{"sha": "967a353a7259dc97098afc59646f9eedc6bbb511", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY3YTM1M2E3MjU5ZGM5NzA5OGFmYzU5NjQ2ZjllZWRjNmJiYjUxMQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-07-21T09:46:05Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-07-21T09:46:05Z"}, "message": "Add nvptx_override_options_after_change\n\n2017-07-21  Tom de Vries  <tom@codesourcery.com>\n\n\tPR lto/81430\n\t* config/nvptx/nvptx.c (nvptx_override_options_after_change): New\n\tfunction.\n\t(TARGET_OVERRIDE_OPTIONS_AFTER_CHANGE): Define to\n\tnvptx_override_options_after_change.\n\nFrom-SVN: r250421", "tree": {"sha": "64448bd5d9735b3e46f38c6f5ca8bc469e45e424", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64448bd5d9735b3e46f38c6f5ca8bc469e45e424"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/967a353a7259dc97098afc59646f9eedc6bbb511", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/967a353a7259dc97098afc59646f9eedc6bbb511", "html_url": "https://github.com/Rust-GCC/gccrs/commit/967a353a7259dc97098afc59646f9eedc6bbb511", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/967a353a7259dc97098afc59646f9eedc6bbb511/comments", "author": null, "committer": null, "parents": [{"sha": "4bb3f8b53f9a1f95e68cc80ec9054b66815b250a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4bb3f8b53f9a1f95e68cc80ec9054b66815b250a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4bb3f8b53f9a1f95e68cc80ec9054b66815b250a"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "7ff7f10a3fb6eff035c168fed1ec0164525832c7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/967a353a7259dc97098afc59646f9eedc6bbb511/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/967a353a7259dc97098afc59646f9eedc6bbb511/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=967a353a7259dc97098afc59646f9eedc6bbb511", "patch": "@@ -1,3 +1,11 @@\n+2017-07-21  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR lto/81430\n+\t* config/nvptx/nvptx.c (nvptx_override_options_after_change): New\n+\tfunction.\n+\t(TARGET_OVERRIDE_OPTIONS_AFTER_CHANGE): Define to\n+\tnvptx_override_options_after_change.\n+\n 2017-07-21  Ulrich Drepper  <drepper@redhat.com>\n \n \t* dwarf2out.c (output_file_names): Avoid double testing for"}, {"sha": "a718054745d28a7c8edd62fc4e621c8c10ec3e0f", "filename": "gcc/config/nvptx/nvptx.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/967a353a7259dc97098afc59646f9eedc6bbb511/gcc%2Fconfig%2Fnvptx%2Fnvptx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/967a353a7259dc97098afc59646f9eedc6bbb511/gcc%2Fconfig%2Fnvptx%2Fnvptx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.c?ref=967a353a7259dc97098afc59646f9eedc6bbb511", "patch": "@@ -207,6 +207,17 @@ nvptx_option_override (void)\n     target_flags |= MASK_SOFT_STACK | MASK_UNIFORM_SIMT;\n }\n \n+/* Implement TARGET_OVERRIDE_OPTIONS_AFTER_CHANGE.  */\n+\n+static void\n+nvptx_override_options_after_change (void)\n+{\n+  /* This is a workaround for PR81430 - nvptx acceleration compilation broken\n+     because of running pass_partition_blocks.  This should be dealt with in the\n+     common code, not in the target.  */\n+  flag_reorder_blocks_and_partition = 0;\n+}\n+\n /* Return a ptx type for MODE.  If PROMOTE, then use .u32 for QImode to\n    deal with ptx ideosyncracies.  */\n \n@@ -5505,6 +5516,9 @@ nvptx_data_alignment (const_tree type, unsigned int basic_align)\n #undef TARGET_OPTION_OVERRIDE\n #define TARGET_OPTION_OVERRIDE nvptx_option_override\n \n+#undef TARGET_OVERRIDE_OPTIONS_AFTER_CHANGE\n+#define TARGET_OVERRIDE_OPTIONS_AFTER_CHANGE nvptx_override_options_after_change\n+\n #undef TARGET_ATTRIBUTE_TABLE\n #define TARGET_ATTRIBUTE_TABLE nvptx_attribute_table\n "}]}