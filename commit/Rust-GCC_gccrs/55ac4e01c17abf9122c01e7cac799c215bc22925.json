{"sha": "55ac4e01c17abf9122c01e7cac799c215bc22925", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVhYzRlMDFjMTdhYmY5MTIyYzAxZTdjYWM3OTljMjE1YmMyMjkyNQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2019-01-25T13:36:37Z"}, "committer": {"name": "Christophe Lyon", "email": "clyon@gcc.gnu.org", "date": "2019-01-25T13:36:37Z"}, "message": "[testsuite] Add missing fenv effective target to fp-int-convert-timode* tests.\n\n2019-01-25  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/\n\t* doc/sourcebuild.texi (Environment attributes): Add fenv and\n\tfenv_exceptions description.\n\n2019-01-25  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tgcc/testsuite/\n\t* lib/target-supports.exp (check_effective_target_fenv): New.\n\t* gcc.dg/torture/fp-int-convert-float128-timode-3.c: Add missing\n\tfenv effective target.\n\t* gcc.dg/torture/fp-int-convert-timode-1.c: Likewise.\n\t* gcc.dg/torture/fp-int-convert-timode-2.c: Likewise.\n\t* gcc.dg/torture/fp-int-convert-timode-3.c: Likewise.\n\t* gcc.dg/torture/fp-int-convert-timode-4.c: Likewise.\n\nFrom-SVN: r268266", "tree": {"sha": "1237b0fd1eac84b20df6c5746107765035a08d87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1237b0fd1eac84b20df6c5746107765035a08d87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55ac4e01c17abf9122c01e7cac799c215bc22925", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55ac4e01c17abf9122c01e7cac799c215bc22925", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55ac4e01c17abf9122c01e7cac799c215bc22925", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55ac4e01c17abf9122c01e7cac799c215bc22925/comments", "author": null, "committer": null, "parents": [{"sha": "f73dc006049cd217fdd2fa943b861ad9f517aa66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f73dc006049cd217fdd2fa943b861ad9f517aa66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f73dc006049cd217fdd2fa943b861ad9f517aa66"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "ff46540a0857c0cca06454fa09bbaaadecdcd89f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -1,3 +1,8 @@\n+2019-01-25  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* doc/sourcebuild.texi (Environment attributes): Add fenv and\n+\tfenv_exceptions description.\n+\n 2019-01-25  Wilco Dijkstra  <wdijkstr@arm.com>\n \n \tPR rtl-optimization/87763"}, {"sha": "a6704569d505284eec2f31aa78dbd2d7d478e3c2", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -2128,6 +2128,13 @@ Target can truncate a file from a file descriptor, as used by\n @file{libgfortran/io/unix.c:fd_truncate}; i.e.@: @code{ftruncate} or\n @code{chsize}.\n \n+@item fenv\n+Target provides @file{fenv.h} include file.\n+\n+@item fenv_exceptions\n+Target supports @file{fenv.h} with all the standard IEEE exceptions\n+and floating-point exceptions are raised by arithmetic operations.\n+\n @item freestanding\n Target is @samp{freestanding} as defined in section 4 of the C99 standard.\n Effectively, it is a target which supports no extra headers or libraries"}, {"sha": "10536c9b2204b08bd90bebdf00bc78b661601b92", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -1,3 +1,13 @@\n+2019-01-25  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\t* lib/target-supports.exp (check_effective_target_fenv): New.\n+\t* gcc.dg/torture/fp-int-convert-float128-timode-3.c: Add missing\n+\tfenv effective target.\n+\t* gcc.dg/torture/fp-int-convert-timode-1.c: Likewise.\n+\t* gcc.dg/torture/fp-int-convert-timode-2.c: Likewise.\n+\t* gcc.dg/torture/fp-int-convert-timode-3.c: Likewise.\n+\t* gcc.dg/torture/fp-int-convert-timode-4.c: Likewise.\n+\n 2019-01-25  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/86865"}, {"sha": "c445d10522ef44940aaba94307dc9bdc0ab1adab", "filename": "gcc/testsuite/gcc.dg/torture/fp-int-convert-float128-timode-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-float128-timode-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-float128-timode-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-float128-timode-3.c?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -4,6 +4,7 @@\n /* { dg-require-effective-target __float128 } */\n /* { dg-require-effective-target base_quadfloat_support } */\n /* { dg-require-effective-target int128 } */\n+/* { dg-require-effective-target fenv } */\n /* { dg-options \"-frounding-math\" } */\n /* { dg-add-options __float128 } */\n "}, {"sha": "0c524a8c4782b6197bc0247a7f66340ca7d9579c", "filename": "gcc/testsuite/gcc.dg/torture/fp-int-convert-timode-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-1.c?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -2,6 +2,7 @@\n    float.  */\n /* { dg-do run } */\n /* { dg-require-effective-target int128 } */\n+/* { dg-require-effective-target fenv } */\n /* { dg-options \"-frounding-math\" } */\n \n #include <fenv.h>"}, {"sha": "a82f03d079cce2d01b7694eb068fca484f5cb649", "filename": "gcc/testsuite/gcc.dg/torture/fp-int-convert-timode-2.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-2.c?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -2,6 +2,7 @@\n    float.  */\n /* { dg-do run } */\n /* { dg-require-effective-target int128 } */\n+/* { dg-require-effective-target fenv } */\n /* { dg-options \"-frounding-math\" } */\n \n #include <fenv.h>"}, {"sha": "707d539335fe43788e9e6b4803f211b9ca4f4f58", "filename": "gcc/testsuite/gcc.dg/torture/fp-int-convert-timode-3.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-3.c?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -2,6 +2,7 @@\n    float.  */\n /* { dg-do run } */\n /* { dg-require-effective-target int128 } */\n+/* { dg-require-effective-target fenv } */\n /* { dg-options \"-frounding-math\" } */\n \n #include <fenv.h>"}, {"sha": "09600f9090312bb4690ba9dab24caac82897f98f", "filename": "gcc/testsuite/gcc.dg/torture/fp-int-convert-timode-4.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Ffp-int-convert-timode-4.c?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -2,6 +2,7 @@\n    float.  */\n /* { dg-do run } */\n /* { dg-require-effective-target int128 } */\n+/* { dg-require-effective-target fenv } */\n /* { dg-options \"-frounding-math\" } */\n \n #include <fenv.h>"}, {"sha": "92202ffcbf01e4ca0c0affadb46d6172744ce585", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55ac4e01c17abf9122c01e7cac799c215bc22925/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=55ac4e01c17abf9122c01e7cac799c215bc22925", "patch": "@@ -8536,6 +8536,14 @@ proc check_effective_target_avr_tiny { } {\n     }\n }\n \n+# Return 1 if <fenv.h> is available.\n+\n+proc check_effective_target_fenv {} {\n+    return [check_no_compiler_messages fenv object {\n+\t#include <fenv.h>\n+    } [add_options_for_ieee \"-std=gnu99\"]]\n+}\n+\n # Return 1 if <fenv.h> is available with all the standard IEEE\n # exceptions and floating-point exceptions are raised by arithmetic\n # operations.  (If the target requires special options for \"inexact\""}]}