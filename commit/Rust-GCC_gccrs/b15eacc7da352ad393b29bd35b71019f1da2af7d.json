{"sha": "b15eacc7da352ad393b29bd35b71019f1da2af7d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE1ZWFjYzdkYTM1MmFkMzkzYjI5YmQzNWI3MTAxOWYxZGEyYWY3ZA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-05-03T07:20:01Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2011-05-03T07:20:01Z"}, "message": "re PR target/48723 (ICE on function returning structure with -fstack-check on corei7-avx)\n\n\tPR target/48723\n\t* config/i386/i386.c (ix86_expand_prologue): Do not probe the stack\n\tfor -fstack-check if the size to allocate is negative.\n\nFrom-SVN: r173288", "tree": {"sha": "5eb7508945cfd6e043e9e8b59de4cb212e4d8841", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5eb7508945cfd6e043e9e8b59de4cb212e4d8841"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b15eacc7da352ad393b29bd35b71019f1da2af7d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b15eacc7da352ad393b29bd35b71019f1da2af7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b15eacc7da352ad393b29bd35b71019f1da2af7d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b15eacc7da352ad393b29bd35b71019f1da2af7d/comments", "author": null, "committer": null, "parents": [{"sha": "5a17346ae5b88f06d5e21ecb3bd490cd76e797a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a17346ae5b88f06d5e21ecb3bd490cd76e797a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a17346ae5b88f06d5e21ecb3bd490cd76e797a1"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "043f73aa7f23a792333b8bbe41168099813de088", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b15eacc7da352ad393b29bd35b71019f1da2af7d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b15eacc7da352ad393b29bd35b71019f1da2af7d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b15eacc7da352ad393b29bd35b71019f1da2af7d", "patch": "@@ -1,3 +1,9 @@\n+2011-05-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR target/48723\n+\t* config/i386/i386.c (ix86_expand_prologue): Do not probe the stack\n+\tfor -fstack-check if the size to allocate is negative.\n+\n 2011-05-02  Lawrence Crowl  <crowl@google.com>\n \n \t* timevar.h (timevar_cond_start): Remove unused POP_TIMEVAR_AND_RETURN.\n@@ -941,7 +947,7 @@\n \t* system.h (ENUM_BITFIELD): Remove.\n \n 2011-04-25  Maxim Kuvyrkov  <maxim@codesourcery.com>\n-\t    Eric Botcazou <ebotcazou@adacore.com>\n+\t    Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* combine.c (combine_simplify_rtx): Avoid mis-simplifying conditionals\n \tfor STORE_FLAG_VALUE==-1 case."}, {"sha": "c164c7074de67ef878c6d3491e68572b8508336a", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b15eacc7da352ad393b29bd35b71019f1da2af7d/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b15eacc7da352ad393b29bd35b71019f1da2af7d/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=b15eacc7da352ad393b29bd35b71019f1da2af7d", "patch": "@@ -10619,8 +10619,8 @@ ix86_expand_prologue (void)\n     }\n \n   /* The stack has already been decremented by the instruction calling us\n-     so we need to probe unconditionally to preserve the protection area.  */\n-  if (flag_stack_check == STATIC_BUILTIN_STACK_CHECK)\n+     so probe if the size is non-negative to preserve the protection area.  */\n+  if (allocate >= 0 && flag_stack_check == STATIC_BUILTIN_STACK_CHECK)\n     {\n       /* We expect the registers to be saved when probes are used.  */\n       gcc_assert (int_registers_saved);"}]}