{"sha": "5f8f47513fd565e41816b5419054b229878393a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWY4ZjQ3NTEzZmQ1NjVlNDE4MTZiNTQxOTA1NGIyMjk4NzgzOTNhOA==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2000-06-20T16:14:42Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2000-06-20T16:14:42Z"}, "message": "* g++.old-deja/g++.other/dyncast6.C: New test.\n\nFrom-SVN: r34620", "tree": {"sha": "cb9a4cd69d48c4c02b618dc9ba0fd0c5f08b6ed4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb9a4cd69d48c4c02b618dc9ba0fd0c5f08b6ed4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f8f47513fd565e41816b5419054b229878393a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f8f47513fd565e41816b5419054b229878393a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f8f47513fd565e41816b5419054b229878393a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f8f47513fd565e41816b5419054b229878393a8/comments", "author": null, "committer": null, "parents": [{"sha": "0f1e25b0d72e2ed1acda264536f5fa35df873bd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f1e25b0d72e2ed1acda264536f5fa35df873bd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f1e25b0d72e2ed1acda264536f5fa35df873bd2"}], "stats": {"total": 76, "additions": 76, "deletions": 0}, "files": [{"sha": "5c6534f4405a1db8037de30a7e8729fa68bdac03", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f8f47513fd565e41816b5419054b229878393a8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f8f47513fd565e41816b5419054b229878393a8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5f8f47513fd565e41816b5419054b229878393a8", "patch": "@@ -1,3 +1,7 @@\n+2000-06-20  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.old-deja/g++.other/dyncast6.C: New test.\n+\n 2000-06-15  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.c-torture/execute/loop-6.c: New test."}, {"sha": "6ff219b1fb26d7b7e2ac947f59877f5bd35f16b3", "filename": "gcc/testsuite/g++.old-deja/g++.other/dyncast6.C", "status": "added", "additions": 72, "deletions": 0, "changes": 72, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f8f47513fd565e41816b5419054b229878393a8/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdyncast6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f8f47513fd565e41816b5419054b229878393a8/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdyncast6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fdyncast6.C?ref=5f8f47513fd565e41816b5419054b229878393a8", "patch": "@@ -0,0 +1,72 @@\n+// Special g++ Options: -w -ansi -pedantic-errors\n+\n+// Copyright (C) 2000 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 20 June 2000 <nathan@codesourcery.com>\n+\n+// Origin GNATS bug report 143 from Carlo Wood <carlo@runaway.xs4all.nl>\n+// We were generating incorrect type_info structures, and hence breaking\n+// dynamic_cast.\n+\n+#include <stdio.h>\n+\n+class OBASE { public: virtual void bz () {}};\n+class IBASE { public: virtual void by () {}};\n+\n+class V {public:int m; };\n+\n+class A : public virtual V { };\n+class AA : public A {};\n+\n+class B : public OBASE, public A { public: virtual void foo(void) { } };\n+class B1 : public OBASE, public AA { public: virtual void foo(void) { } };\n+\n+class C : public IBASE, public virtual V { };\n+\n+class D : public B, public C { };\n+\n+class E : public B, public virtual V { };\n+\n+class E1 : public B1, public virtual V {};\n+\n+class E2 : public B1, public A, public virtual V {};\n+\n+int main(void)\n+{\n+  D d;\n+  E e;\n+  E1 e1;\n+  E2 e2;\n+  int code = 0;\n+\n+  OBASE* osd = &d;\n+  OBASE* ose = &e;\n+  OBASE* ose1 = &e1;\n+  OBASE* ose2 = &e2;\n+\n+\n+  if (!dynamic_cast<V*>(osd))\n+    {\n+      printf (\"fail osd\\n\");\n+      code++;\n+    }\n+  \n+  if (!dynamic_cast<V*>(ose))\n+    {\n+      printf (\"fail ose\\n\");\n+      code++;\n+    }\n+\n+  if (!dynamic_cast<V*>(ose1))\n+    {\n+      printf (\"fail ose1\\n\");\n+      code++;\n+    }\n+\n+  if (!dynamic_cast<V*>(ose2))\n+    {\n+      printf (\"fail ose2\\n\");\n+      code++;\n+    }\n+\n+  return code;\n+}"}]}