{"sha": "50a2de961ffa6022ac3084c94f76d1462be04845", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBhMmRlOTYxZmZhNjAyMmFjMzA4NGM5NGY3NmQxNDYyYmUwNDg0NQ==", "commit": {"author": {"name": "Danny Smith", "email": "dannysmith@users.sourceforge.net", "date": "2004-06-29T11:37:20Z"}, "committer": {"name": "Danny Smith", "email": "dannysmith@gcc.gnu.org", "date": "2004-06-29T11:37:20Z"}, "message": "* lrealpath.c (lrealpath): Add _WIN32 support.\n\nFrom-SVN: r83853", "tree": {"sha": "b5da2aaeee765d7fddc7920c266f1d75f1a0f0ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5da2aaeee765d7fddc7920c266f1d75f1a0f0ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50a2de961ffa6022ac3084c94f76d1462be04845", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50a2de961ffa6022ac3084c94f76d1462be04845", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50a2de961ffa6022ac3084c94f76d1462be04845", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50a2de961ffa6022ac3084c94f76d1462be04845/comments", "author": null, "committer": null, "parents": [{"sha": "fe88415f1b385b2dfc11f54422ff414f643df9e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe88415f1b385b2dfc11f54422ff414f643df9e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe88415f1b385b2dfc11f54422ff414f643df9e0"}], "stats": {"total": 34, "additions": 34, "deletions": 0}, "files": [{"sha": "f8e1c9c5bff4d996d9c215c204642e17d4477866", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50a2de961ffa6022ac3084c94f76d1462be04845/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50a2de961ffa6022ac3084c94f76d1462be04845/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=50a2de961ffa6022ac3084c94f76d1462be04845", "patch": "@@ -1,3 +1,7 @@\n+2004-06-29  Danny Smith  <dannysmith@users.sourceforge.net> \n+\n+\t* lrealpath.c (lrealpath): Add _WIN32 support.\n+\n 2004-06-28  Zack Weinberg  <zack@codesourcery.com>\n \n \t* cp-demangle.h: Declare cplus_demangle_operators,"}, {"sha": "4877753cd66fb7bfa99775c4c3d130c478768221", "filename": "libiberty/lrealpath.c", "status": "modified", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50a2de961ffa6022ac3084c94f76d1462be04845/libiberty%2Flrealpath.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50a2de961ffa6022ac3084c94f76d1462be04845/libiberty%2Flrealpath.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Flrealpath.c?ref=50a2de961ffa6022ac3084c94f76d1462be04845", "patch": "@@ -64,6 +64,12 @@ extern char *canonicalize_file_name (const char *);\n #   define REALPATH_LIMIT MAXPATHLEN\n #  endif\n # endif\n+#else\n+  /* cygwin has realpath, so it won't get here.  */ \n+# if defined (_WIN32)\n+#  define WIN32_LEAN_AND_MEAN\n+#  include <windows.h> /* for GetFullPathName */\n+# endif\n #endif\n \n char *\n@@ -123,6 +129,30 @@ lrealpath (filename)\n   }\n #endif\n \n+  /* The MS Windows method.  If we don't have realpath, we assume we\n+     don't have symlinks and just canonicalize to a Windows absolute\n+     path.  GetFullPath converts ../ and ./ in relative paths to\n+     absolute paths, filling in current drive if one is not given\n+     or using the current directory of a specified drive (eg, \"E:foo\").\n+     It also converts all forward slashes to back slashes.  */\n+#if defined (_WIN32)\n+  {\n+    char buf[MAX_PATH];\n+    char* basename;\n+    DWORD len = GetFullPathName (filename, MAX_PATH, buf, &basename);\n+    if (len == 0 || len > MAX_PATH - 1)\n+      return strdup (filename);\n+    else\n+      {\n+\t/* The file system is case-preserving but case-insensitive,\n+\t   Canonicalize to lowercase, using the codepage associated\n+\t   with the process locale.  */\n+        CharLowerBuff (buf, len);\n+        return strdup (buf);\n+      }\n+  }\n+#endif\n+\n   /* This system is a lost cause, just duplicate the filename.  */\n   return strdup (filename);\n }"}]}