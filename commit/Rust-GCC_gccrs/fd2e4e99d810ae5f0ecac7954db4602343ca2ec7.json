{"sha": "fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQyZTRlOTlkODEwYWU1ZjBlY2FjNzk1NGRiNDYwMjM0M2NhMmVjNw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-04-19T21:50:16Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-04-19T21:50:16Z"}, "message": "re PR middle-end/43337 (ICE: in lookup_decl_in_outer_ctx, at omp-low.c:2103)\n\n\tPR middle-end/43337\n\t* tree-nested.c (convert_nonlocal_omp_clauses): OMP_CLAUSE_PRIVATE\n\twith non-local decl doesn't need chain.\n\n\t* gfortran.dg/gomp/pr43337.f90: New test.\n\nFrom-SVN: r158527", "tree": {"sha": "cc054f1e30f29e5e180bacf780fd733c950e6c6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cc054f1e30f29e5e180bacf780fd733c950e6c6a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "74e27d0d561466b606359713380ad872e57fb2a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74e27d0d561466b606359713380ad872e57fb2a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74e27d0d561466b606359713380ad872e57fb2a3"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "e16fa0c2009007f0237c4640afc7bc0c93eccae7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "patch": "@@ -3,6 +3,10 @@\n \t* dwarf2out.c (lower_bound_default): For DW_LANG_Python return\n \t0 for -gdwarf-4.\n \n+\tPR middle-end/43337\n+\t* tree-nested.c (convert_nonlocal_omp_clauses): OMP_CLAUSE_PRIVATE\n+\twith non-local decl doesn't need chain.\n+\n 2010-04-19  Vladimir Makarov  <vmakarov@redhat.com>\n \n \t* ira-color.c (allocno_reload_assign): Avoid accumulating"}, {"sha": "d29867544e432c5acddf6a90169bb5de7799e46f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "patch": "@@ -1,3 +1,8 @@\n+2010-04-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/43337\n+\t* gfortran.dg/gomp/pr43337.f90: New test.\n+\n 2010-04-19  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/43796"}, {"sha": "f07ccb441bedb118830af040b8f5d1b589a2ce11", "filename": "gcc/testsuite/gfortran.dg/gomp/pr43337.f90", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr43337.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr43337.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr43337.f90?ref=fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "patch": "@@ -0,0 +1,30 @@\n+! PR middle-end/43337\n+! { dg-do compile }\n+! { dg-options \"-fopenmp -O2 -g\" }\n+\n+subroutine pr43337\n+  integer :: a, b(10)\n+  call foo (b)\n+  call bar (b)\n+contains\n+  subroutine foo (b)\n+    integer :: b(10)\n+!$omp parallel if (.false.)\n+!$omp task if (.false.) shared(b)\n+    do a = 1, 10\n+      b(a) = 1\n+    end do\n+!$omp end task\n+!$omp end parallel\n+  end subroutine foo\n+  subroutine bar (b)\n+    integer :: b(10)\n+!$omp parallel if (.false.)\n+!$omp parallel if (.false.)\n+    do a = 1, 10\n+      b(a) = 1\n+    end do\n+!$omp end parallel\n+!$omp end parallel\n+  end subroutine bar\n+end subroutine pr43337"}, {"sha": "a3aa6c4c384ac35d3fe9b1006dcb7cae49c7bbfa", "filename": "gcc/tree-nested.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2Ftree-nested.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd2e4e99d810ae5f0ecac7954db4602343ca2ec7/gcc%2Ftree-nested.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-nested.c?ref=fd2e4e99d810ae5f0ecac7954db4602343ca2ec7", "patch": "@@ -1,5 +1,5 @@\n /* Nested function decomposition for GIMPLE.\n-   Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009\n+   Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n \n    This file is part of GCC.\n@@ -1088,7 +1088,8 @@ convert_nonlocal_omp_clauses (tree *pclauses, struct walk_stmt_info *wi)\n \t    {\n \t      bitmap_set_bit (new_suppress, DECL_UID (decl));\n \t      OMP_CLAUSE_DECL (clause) = get_nonlocal_debug_decl (info, decl);\n-\t      need_chain = true;\n+\t      if (OMP_CLAUSE_CODE (clause) != OMP_CLAUSE_PRIVATE)\n+\t\tneed_chain = true;\n \t    }\n \t  break;\n "}]}