{"sha": "ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmE3MTY2NzczYmQ3YTRkMWUwZGE1YmFkMGE2MWMyMGZhYzNiZWY3OA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-09-17T22:13:07Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-09-17T22:13:07Z"}, "message": "tree.h (warn_about_unused_variables): Declare.\n\n\t* tree.h (warn_about_unused_variables): Declare.\n\t* stmt.c (warn_about_unused_variables): New function, split out\n\tfrom ...\n\t(expand_end_bindings): Here.\n\nFrom-SVN: r29486", "tree": {"sha": "eb5f3deca9fe795ca483b7f9c976536796c57c50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eb5f3deca9fe795ca483b7f9c976536796c57c50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/comments", "author": null, "committer": null, "parents": [{"sha": "086925d8cc71897027ae9407fcfd0def1d767b1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/086925d8cc71897027ae9407fcfd0def1d767b1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/086925d8cc71897027ae9407fcfd0def1d767b1e"}], "stats": {"total": 37, "additions": 30, "deletions": 7}, "files": [{"sha": "3a9d61aeefae0c025f1d73cbb9225e1796bbcf9b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "patch": "@@ -1,3 +1,10 @@\n+Fri Sep 17 15:11:20 1999  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* tree.h (warn_about_unused_variables): Declare.\n+\t* stmt.c (warn_about_unused_variables): New function, split out\n+\tfrom ...\n+\t(expand_end_bindings): Here.\n+\n Fri Sep 17 15:07:37 1999  Mark Mitchell  <mark@codesourcery.com>\n \n \t* stmt.c (preserve_subexpressions_p): Don't crash when"}, {"sha": "51110b8a78ddb475ecbf80e53df32f42a7cd3f19", "filename": "gcc/stmt.c", "status": "modified", "additions": 22, "deletions": 7, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "patch": "@@ -3492,6 +3492,25 @@ expand_nl_goto_receivers (thisblock)\n   emit_label (afterward);\n }\n \n+/* Warn about any unused VARS (which may contain nodes other than\n+   VAR_DECLs, but such nodes are ignored).  The nodes are connected\n+   via the TREE_CHAIN field.  */\n+\n+void\n+warn_about_unused_variables (vars)\n+     tree vars;\n+{\n+  tree decl;\n+\n+  if (warn_unused)\n+    for (decl = vars; decl; decl = TREE_CHAIN (decl))\n+      if (TREE_CODE (decl) == VAR_DECL \n+\t  && ! TREE_USED (decl)\n+\t  && ! DECL_IN_SYSTEM_HEADER (decl)\n+\t  && DECL_NAME (decl) && ! DECL_ARTIFICIAL (decl)) \n+\twarning_with_decl (decl, \"unused variable `%s'\");\n+}\n+\n /* Generate RTL code to terminate a binding contour.\n \n    VARS is the chain of VAR_DECL nodes for the variables bound in this\n@@ -3532,13 +3551,9 @@ expand_end_bindings (vars, mark_ends, dont_jump_in)\n      \n   thisblock = block_stack;\n \n-  if (warn_unused)\n-    for (decl = vars; decl; decl = TREE_CHAIN (decl))\n-      if (TREE_CODE (decl) == VAR_DECL \n-\t  && ! TREE_USED (decl)\n-\t  && ! DECL_IN_SYSTEM_HEADER (decl)\n-\t  && DECL_NAME (decl) && ! DECL_ARTIFICIAL (decl)) \n-\twarning_with_decl (decl, \"unused variable `%s'\");\n+  /* If any of the variables in this scope were not used, warn the\n+     user.  */\n+  warn_about_unused_variables (vars);\n \n   if (thisblock->exit_label)\n     {"}, {"sha": "e479f99a1bbebdb3d1cbbe76c0aa86d6fcbb22a5", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ba7166773bd7a4d1e0da5bad0a61c20fac3bef78/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=ba7166773bd7a4d1e0da5bad0a61c20fac3bef78", "patch": "@@ -2054,6 +2054,7 @@ extern void expand_return\t\t\tPROTO((tree));\n extern int optimize_tail_recursion\t\tPROTO((tree, struct rtx_def *));\n extern void expand_start_bindings\t\tPROTO((int));\n extern void expand_end_bindings\t\t\tPROTO((tree, int, int));\n+extern void warn_about_unused_variables         PROTO((tree));\n extern void start_cleanup_deferral\t\tPROTO((void));\n extern void end_cleanup_deferral\t\tPROTO((void));\n extern void mark_block_as_eh_region\t\tPROTO((void));"}]}