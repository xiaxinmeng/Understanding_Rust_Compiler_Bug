{"sha": "2c384ad87fc1963dbb9b2092dba08f99ddf32136", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmMzODRhZDg3ZmMxOTYzZGJiOWIyMDkyZGJhMDhmOTlkZGYzMjEzNg==", "commit": {"author": {"name": "Szabolcs Nagy", "email": "szabolcs.nagy@arm.com", "date": "2016-04-22T11:00:42Z"}, "committer": {"name": "Szabolcs Nagy", "email": "nsz@gcc.gnu.org", "date": "2016-04-22T11:00:42Z"}, "message": "[PATCH 2/2] (header usage fix) include c++ headers in system.h\n\n2016-04-22  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n\n\t* system.h (list, map, set, vector): Include conditionally.\n\t* auto-profile.c (INCLUDE_MAP, INCLUDE_SET): Define.\n\t* graphite-isl-ast-to-gimple.c (INCLUDE_MAP): Define.\n\t* ipa-icf.c (INCLUDE_LIST): Define.\n\t* config/aarch64/cortex-a57-fma-steering.c (INCLUDE_LIST): Define.\n\t* config/sh/sh.c (INCLUDE_VECTOR): Define.\n\t* config/sh/sh_treg_combine.cc (INCLUDE_ALGORITHM): Define.\n\t(INCLUDE_LIST, INCLUDE_VECTOR): Define.\n\t* cp/logic.cc (INCLUDE_LIST): Define.\n\t* fortran/trans-common.c (INCLUDE_MAP): Define.\n\nFrom-SVN: r235362", "tree": {"sha": "9794a2e25f47b38ce5b3e6e6050ff58eb1ff1167", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9794a2e25f47b38ce5b3e6e6050ff58eb1ff1167"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c384ad87fc1963dbb9b2092dba08f99ddf32136", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c384ad87fc1963dbb9b2092dba08f99ddf32136", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c384ad87fc1963dbb9b2092dba08f99ddf32136", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c384ad87fc1963dbb9b2092dba08f99ddf32136/comments", "author": {"login": "nsz-arm", "id": 30925343, "node_id": "MDQ6VXNlcjMwOTI1MzQz", "avatar_url": "https://avatars.githubusercontent.com/u/30925343?v=4", "gravatar_id": "", "url": "https://api.github.com/users/nsz-arm", "html_url": "https://github.com/nsz-arm", "followers_url": "https://api.github.com/users/nsz-arm/followers", "following_url": "https://api.github.com/users/nsz-arm/following{/other_user}", "gists_url": "https://api.github.com/users/nsz-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/nsz-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/nsz-arm/subscriptions", "organizations_url": "https://api.github.com/users/nsz-arm/orgs", "repos_url": "https://api.github.com/users/nsz-arm/repos", "events_url": "https://api.github.com/users/nsz-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/nsz-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e4ccecd5d0a991e22d34a631aff2792a41fff22a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e4ccecd5d0a991e22d34a631aff2792a41fff22a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e4ccecd5d0a991e22d34a631aff2792a41fff22a"}], "stats": {"total": 54, "additions": 36, "deletions": 18}, "files": [{"sha": "ff68ee80b484b7505911bdfdb920732dc8465470", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -1,3 +1,16 @@\n+2016-04-22  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n+\n+\t* system.h (list, map, set, vector): Include conditionally.\n+\t* auto-profile.c (INCLUDE_MAP, INCLUDE_SET): Define.\n+\t* graphite-isl-ast-to-gimple.c (INCLUDE_MAP): Define.\n+\t* ipa-icf.c (INCLUDE_LIST): Define.\n+\t* config/aarch64/cortex-a57-fma-steering.c (INCLUDE_LIST): Define.\n+\t* config/sh/sh.c (INCLUDE_VECTOR): Define.\n+\t* config/sh/sh_treg_combine.cc (INCLUDE_ALGORITHM): Define.\n+\t(INCLUDE_LIST, INCLUDE_VECTOR): Define.\n+\t* cp/logic.cc (INCLUDE_LIST): Define.\n+\t* fortran/trans-common.c (INCLUDE_MAP): Define.\n+\n 2016-04-22  Szabolcs Nagy  <szabolcs.nagy@arm.com>\n \n \t* auto-profile.c: Remove <string.h> include."}, {"sha": "cd82ab4932daccb77c943bccd429d74448c4db8a", "filename": "gcc/auto-profile.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fauto-profile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fauto-profile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fauto-profile.c?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -19,6 +19,8 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #include \"config.h\"\n+#define INCLUDE_MAP\n+#define INCLUDE_SET\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"backend.h\"\n@@ -31,10 +33,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"cgraph.h\"\n #include \"gcov-io.h\"\n #include \"diagnostic-core.h\"\n-\n-#include <map>\n-#include <set>\n-\n #include \"profile.h\"\n #include \"langhooks.h\"\n #include \"cfgloop.h\""}, {"sha": "1bf804b4873c6b32e0eb3d640a74c2e52843e796", "filename": "gcc/config/aarch64/cortex-a57-fma-steering.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fconfig%2Faarch64%2Fcortex-a57-fma-steering.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fconfig%2Faarch64%2Fcortex-a57-fma-steering.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Fcortex-a57-fma-steering.c?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -19,6 +19,7 @@\n    <http://www.gnu.org/licenses/>.  */\n \n #include \"config.h\"\n+#define INCLUDE_LIST\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"backend.h\"\n@@ -37,8 +38,6 @@\n #include \"cortex-a57-fma-steering.h\"\n #include \"aarch64-protos.h\"\n \n-#include <list>\n-\n /* For better performance, the destination of FMADD/FMSUB instructions should\n    have the same parity as their accumulator register if the accumulator\n    contains the result of a previous FMUL or FMADD/FMSUB instruction if"}, {"sha": "b18e59b14184174e7c8c9cbddb523d2f88dd9f24", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -20,9 +20,9 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #include <sstream>\n-#include <vector>\n \n #include \"config.h\"\n+#define INCLUDE_VECTOR\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"backend.h\""}, {"sha": "4d40715db7987d38b48fc40bdee2ed7f830e969d", "filename": "gcc/config/sh/sh_treg_combine.cc", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fconfig%2Fsh%2Fsh_treg_combine.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fconfig%2Fsh%2Fsh_treg_combine.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh_treg_combine.cc?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -19,6 +19,9 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #include \"config.h\"\n+#define INCLUDE_ALGORITHM\n+#define INCLUDE_LIST\n+#define INCLUDE_VECTOR\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"backend.h\"\n@@ -32,10 +35,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"tree-pass.h\"\n #include \"expr.h\"\n \n-#include <algorithm>\n-#include <list>\n-#include <vector>\n-\n /*\n This pass tries to optimize for example this:\n \tmov.l\t@(4,r4),r1"}, {"sha": "c12c381d85c01ae01300526509cf892707bd6156", "filename": "gcc/cp/logic.cc", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fcp%2Flogic.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fcp%2Flogic.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flogic.cc?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -19,6 +19,7 @@ along with GCC; see the file COPYING3.  If not see\n <http://www.gnu.org/licenses/>.  */\n \n #include \"config.h\"\n+#define INCLUDE_LIST\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"tm.h\"\n@@ -45,8 +46,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"toplev.h\"\n #include \"type-utils.h\"\n \n-#include <list>\n-\n namespace {\n \n // Helper algorithms"}, {"sha": "4fdccc9074717a4afba8feb153d7bbf969ccd48f", "filename": "gcc/fortran/trans-common.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Ffortran%2Ftrans-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Ffortran%2Ftrans-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-common.c?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -93,16 +93,14 @@ along with GCC; see the file COPYING3.  If not see\n    block for each merged equivalence list.  */\n \n #include \"config.h\"\n+#define INCLUDE_MAP\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"tm.h\"\n #include \"tree.h\"\n #include \"gfortran.h\"\n #include \"trans.h\"\n #include \"stringpool.h\"\n-\n-#include <map>\n-\n #include \"fold-const.h\"\n #include \"stor-layout.h\"\n #include \"varasm.h\""}, {"sha": "049a4c5ed3fa81c0951d6e2115b50b46f30f0010", "filename": "gcc/graphite-isl-ast-to-gimple.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fgraphite-isl-ast-to-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fgraphite-isl-ast-to-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-isl-ast-to-gimple.c?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -24,6 +24,7 @@ along with GCC; see the file COPYING3.  If not see\n \n #ifdef HAVE_isl\n \n+#define INCLUDE_MAP\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"backend.h\"\n@@ -54,7 +55,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"cfganal.h\"\n #include \"value-prof.h\"\n #include \"graphite.h\"\n-#include <map>\n \n /* We always try to use signed 128 bit types, but fall back to smaller types\n    in case a platform does not provide types of these sizes. In the future we"}, {"sha": "dda5cacc993070becfc869c9ce7cf3d829fa50df", "filename": "gcc/ipa-icf.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fipa-icf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fipa-icf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-icf.c?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -52,6 +52,7 @@ along with GCC; see the file COPYING3.  If not see\n */\n \n #include \"config.h\"\n+#define INCLUDE_LIST\n #include \"system.h\"\n #include \"coretypes.h\"\n #include \"backend.h\"\n@@ -66,7 +67,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"coverage.h\"\n #include \"gimple-pretty-print.h\"\n #include \"data-streamer.h\"\n-#include <list>\n #include \"fold-const.h\"\n #include \"calls.h\"\n #include \"varasm.h\""}, {"sha": "984f302fbc953ef41012c496a131c5029a5340b3", "filename": "gcc/system.h", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c384ad87fc1963dbb9b2092dba08f99ddf32136/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=2c384ad87fc1963dbb9b2092dba08f99ddf32136", "patch": "@@ -220,6 +220,18 @@ extern int errno;\n #if defined (INCLUDE_ALGORITHM) || !defined (HAVE_SWAP_IN_UTILITY)\n # include <algorithm>\n #endif\n+#ifdef INCLUDE_LIST\n+# include <list>\n+#endif\n+#ifdef INCLUDE_MAP\n+# include <map>\n+#endif\n+#ifdef INCLUDE_SET\n+# include <set>\n+#endif\n+#ifdef INCLUDE_VECTOR\n+# include <vector>\n+#endif\n # include <cstring>\n # include <new>\n # include <utility>"}]}