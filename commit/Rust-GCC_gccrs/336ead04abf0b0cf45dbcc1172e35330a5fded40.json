{"sha": "336ead04abf0b0cf45dbcc1172e35330a5fded40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzM2ZWFkMDRhYmYwYjBjZjQ1ZGJjYzExNzJlMzUzMzBhNWZkZWQ0MA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-11-30T21:59:04Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-11-30T21:59:04Z"}, "message": "re PR middle-end/51089 (internal compiler error: verify_flow_info failed)\n\n\tPR middle-end/51089\n\t* tree-eh.c (cleanup_empty_eh_merge_phis): Add check to\n\tavoid creating duplicate edges here.\n\t(cleanup_empty_eh_unsplit): And remove it in the caller.\n\n\t* gfortran.dg/gomp/pr51089.f90: New test.\n\nFrom-SVN: r181859", "tree": {"sha": "a216f979d556248ae6aaf835392bed7085a3b65d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a216f979d556248ae6aaf835392bed7085a3b65d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/336ead04abf0b0cf45dbcc1172e35330a5fded40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/336ead04abf0b0cf45dbcc1172e35330a5fded40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/336ead04abf0b0cf45dbcc1172e35330a5fded40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/336ead04abf0b0cf45dbcc1172e35330a5fded40/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9abfe98649d444d324f707d25071bcd8f31282e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9abfe98649d444d324f707d25071bcd8f31282e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9abfe98649d444d324f707d25071bcd8f31282e8"}], "stats": {"total": 62, "additions": 44, "deletions": 18}, "files": [{"sha": "a5262ab0531b11f2c794badab289c2e8c5e49f62", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=336ead04abf0b0cf45dbcc1172e35330a5fded40", "patch": "@@ -1,3 +1,10 @@\n+2011-11-30  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/51089\n+\t* tree-eh.c (cleanup_empty_eh_merge_phis): Add check to\n+\tavoid creating duplicate edges here.\n+\t(cleanup_empty_eh_unsplit): And remove it in the caller.\n+\n 2011-11-30  Andrew Pinski  <apinski@cavium.com>\n \n \tPR c/51321"}, {"sha": "1df8f77100cf4fe8035f8d176354aae7774b8f42", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=336ead04abf0b0cf45dbcc1172e35330a5fded40", "patch": "@@ -1,3 +1,8 @@\n+2011-11-30  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR middle-end/51089\n+\t* gfortran.dg/gomp/pr51089.f90: New test.\n+\n 2011-11-30  Andrew Pinski  <apinski@cavium.com>\n \n \t* gcc.dg/pr51321.c: New testcase."}, {"sha": "83b6dba7a76545fa97c23d918f5c86ebe3184046", "filename": "gcc/testsuite/gfortran.dg/gomp/pr51089.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr51089.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr51089.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Fpr51089.f90?ref=336ead04abf0b0cf45dbcc1172e35330a5fded40", "patch": "@@ -0,0 +1,16 @@\n+! PR middle-end/51089\n+! { dg-do compile }\n+! { dg-options \"-O -fexceptions -fopenmp\" }\n+\n+subroutine foo\n+  real, allocatable, dimension(:) :: s\n+  real, dimension(:, :, :), pointer :: t\n+  call fn1 (t, s)\n+  call fn2 ()\n+end subroutine foo\n+subroutine bar\n+  integer :: i\n+!$omp parallel do\n+  do i = 1, 10\n+  end do\n+end subroutine bar"}, {"sha": "57abca80e4ec4f514b7bd26d48dcf39df8b325eb", "filename": "gcc/tree-eh.c", "status": "modified", "additions": 16, "deletions": 18, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2Ftree-eh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/336ead04abf0b0cf45dbcc1172e35330a5fded40/gcc%2Ftree-eh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-eh.c?ref=336ead04abf0b0cf45dbcc1172e35330a5fded40", "patch": "@@ -3653,6 +3653,22 @@ cleanup_empty_eh_merge_phis (basic_block new_bb, basic_block old_bb,\n   bitmap rename_virts;\n   bitmap ophi_handled;\n \n+  /* The destination block must not be a regular successor for any\n+     of the preds of the landing pad.  Thus, avoid turning\n+        <..>\n+\t |  \\ EH\n+\t |  <..>\n+\t |  /\n+\t<..>\n+     into\n+        <..>\n+\t|  | EH\n+\t<..>\n+     which CFG verification would choke on.  See PR45172 and PR51089.  */\n+  FOR_EACH_EDGE (e, ei, old_bb->preds)\n+    if (find_edge (e->src, new_bb))\n+      return false;\n+\n   FOR_EACH_EDGE (e, ei, old_bb->preds)\n     redirect_edge_var_map_clear (e);\n \n@@ -3815,8 +3831,6 @@ cleanup_empty_eh_unsplit (basic_block bb, edge e_out, eh_landing_pad lp)\n {\n   gimple_stmt_iterator gsi;\n   tree lab;\n-  edge_iterator ei;\n-  edge e;\n \n   /* We really ought not have totally lost everything following\n      a landing pad label.  Given that BB is empty, there had better\n@@ -3839,22 +3853,6 @@ cleanup_empty_eh_unsplit (basic_block bb, edge e_out, eh_landing_pad lp)\n \treturn false;\n     }\n \n-  /* The destination block must not be a regular successor for any\n-     of the preds of the landing pad.  Thus, avoid turning\n-        <..>\n-\t |  \\ EH\n-\t |  <..>\n-\t |  /\n-\t<..>\n-     into\n-        <..>\n-\t|  | EH\n-\t<..>\n-     which CFG verification would choke on.  See PR45172.  */\n-  FOR_EACH_EDGE (e, ei, bb->preds)\n-    if (find_edge (e->src, e_out->dest))\n-      return false;\n-\n   /* Attempt to move the PHIs into the successor block.  */\n   if (cleanup_empty_eh_merge_phis (e_out->dest, bb, e_out, false))\n     {"}]}