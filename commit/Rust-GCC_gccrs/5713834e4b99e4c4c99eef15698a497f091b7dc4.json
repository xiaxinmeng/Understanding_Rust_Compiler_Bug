{"sha": "5713834e4b99e4c4c99eef15698a497f091b7dc4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcxMzgzNGU0Yjk5ZTRjNGM5OWVlZjE1Njk4YTQ5N2YwOTFiN2RjNA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-02-07T11:31:12Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-02-07T11:39:12Z"}, "message": "libstdc++: Enable three-way comparison for iota_view iterators\n\nThe declaration of operator<=> was disabled due to a typo in the macro.\nThe declaration was also ill-formed when three_way_comparable<_Winc> is\nnot satisfied, which is a defect in the C++20 draft.\n\n\t* include/std/ranges (iota_view::_Iterator): Fix typo in name of\n\t__cpp_lib_three_way_comparison macro and use deduced return type for\n\toperator<=>.\n\t* testsuite/std/ranges/iota/iterator.cc: New test.", "tree": {"sha": "d4a1c39fd7d1c54e158db18a6cfee065ce9721ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d4a1c39fd7d1c54e158db18a6cfee065ce9721ea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5713834e4b99e4c4c99eef15698a497f091b7dc4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5713834e4b99e4c4c99eef15698a497f091b7dc4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5713834e4b99e4c4c99eef15698a497f091b7dc4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5713834e4b99e4c4c99eef15698a497f091b7dc4/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ea5ca698dca15dc86b823661ac357a30b49dd0f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea5ca698dca15dc86b823661ac357a30b49dd0f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea5ca698dca15dc86b823661ac357a30b49dd0f6"}], "stats": {"total": 46, "additions": 44, "deletions": 2}, "files": [{"sha": "18d02cbfb40999be27d1accc363a36ec57aace26", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5713834e4b99e4c4c99eef15698a497f091b7dc4/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5713834e4b99e4c4c99eef15698a497f091b7dc4/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=5713834e4b99e4c4c99eef15698a497f091b7dc4", "patch": "@@ -1,3 +1,10 @@\n+2020-02-07  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* include/std/ranges (iota_view::_Iterator): Fix typo in name of\n+\t__cpp_lib_three_way_comparison macro and use deduced return type for\n+\toperator<=>.\n+\t* testsuite/std/ranges/iota/iterator.cc: New test.\n+\n 2020-02-07  Patrick Palka  <ppalka@redhat.com>\n \t    Jonathan Wakely  <jwakely@redhat.com>\n "}, {"sha": "dc277a74fb6d894834195737d9d5e9b5a413eff0", "filename": "libstdc++-v3/include/std/ranges", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5713834e4b99e4c4c99eef15698a497f091b7dc4/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5713834e4b99e4c4c99eef15698a497f091b7dc4/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Franges?ref=5713834e4b99e4c4c99eef15698a497f091b7dc4", "patch": "@@ -776,8 +776,8 @@ namespace ranges\n \t  requires totally_ordered<_Winc>\n \t{ return !(__x < __y); }\n \n-#ifdef __cpp_lib_threeway_comparison\n-\tfriend constexpr compare_three_way_result_t<_Winc>\n+#ifdef __cpp_lib_three_way_comparison\n+\tfriend constexpr auto\n \toperator<=>(const _Iterator& __x, const _Iterator& __y)\n \t  requires totally_ordered<_Winc> && three_way_comparable<_Winc>\n \t{ return __x._M_value <=> __y._M_value; }"}, {"sha": "4d471431eaef99a128be5e5badf618c0bbdb1a87", "filename": "libstdc++-v3/testsuite/std/ranges/iota/iterator.cc", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5713834e4b99e4c4c99eef15698a497f091b7dc4/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fiota%2Fiterator.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5713834e4b99e4c4c99eef15698a497f091b7dc4/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fiota%2Fiterator.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fstd%2Franges%2Fiota%2Fiterator.cc?ref=5713834e4b99e4c4c99eef15698a497f091b7dc4", "patch": "@@ -0,0 +1,35 @@\n+// Copyright (C) 2020 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++2a\" }\n+// { dg-do compile { target c++2a } }\n+\n+#include <ranges>\n+\n+auto i = std::ranges::iota_view<int>{}.begin();\n+static_assert( std::three_way_comparable<decltype(i)> );\n+\n+struct Inc {\n+  Inc& operator++();\n+  Inc operator++(int);\n+  friend long operator-(Inc, Inc);\n+};\n+static_assert( ! std::three_way_comparable<Inc> );\n+\n+// Instantiating iterator type must be valid despite !three_way_comparable<Inc>\n+auto j = std::ranges::iota_view<Inc>{}.begin();\n+static_assert( ! std::three_way_comparable<decltype(j)> );"}]}