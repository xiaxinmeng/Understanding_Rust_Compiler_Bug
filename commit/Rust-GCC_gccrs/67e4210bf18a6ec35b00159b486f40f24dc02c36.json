{"sha": "67e4210bf18a6ec35b00159b486f40f24dc02c36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdlNDIxMGJmMThhNmVjMzViMDAxNTliNDg2ZjQwZjI0ZGMwMmMzNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2012-10-18T18:47:23Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2012-10-18T18:47:23Z"}, "message": "c-ada-spec.c (LOCATION_COL): Delete.\n\n\t* c-ada-spec.c (LOCATION_COL): Delete.\n\t(compare_location): New function.\n\t(compare_node): Use it.\n\t(compare_comment): Likewise.\n\nFrom-SVN: r192574", "tree": {"sha": "3eaa7e6990105bcf9067c2c366f7d52001bb7487", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3eaa7e6990105bcf9067c2c366f7d52001bb7487"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67e4210bf18a6ec35b00159b486f40f24dc02c36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e4210bf18a6ec35b00159b486f40f24dc02c36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67e4210bf18a6ec35b00159b486f40f24dc02c36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e4210bf18a6ec35b00159b486f40f24dc02c36/comments", "author": null, "committer": null, "parents": [{"sha": "21a11667fc0e0bbca57511f778612bf8b1b280b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21a11667fc0e0bbca57511f778612bf8b1b280b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21a11667fc0e0bbca57511f778612bf8b1b280b6"}], "stats": {"total": 43, "additions": 29, "deletions": 14}, "files": [{"sha": "454196fb6326e961efbbaf90c8360a157ca43f44", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e4210bf18a6ec35b00159b486f40f24dc02c36/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e4210bf18a6ec35b00159b486f40f24dc02c36/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=67e4210bf18a6ec35b00159b486f40f24dc02c36", "patch": "@@ -1,3 +1,10 @@\n+2012-10-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* c-ada-spec.c (LOCATION_COL): Delete.\n+\t(compare_location): New function.\n+\t(compare_node): Use it.\n+\t(compare_comment): Likewise.\n+\n 2012-10-16  Manuel L\u00f3pez-Ib\u00e1\u00f1ez  <manu@gcc.gnu.org>\n \n \tPR c/53063"}, {"sha": "4c47ed44a549b244ffc9ac4f0ae13bb420aacf1a", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 22, "deletions": 14, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e4210bf18a6ec35b00159b486f40f24dc02c36/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e4210bf18a6ec35b00159b486f40f24dc02c36/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=67e4210bf18a6ec35b00159b486f40f24dc02c36", "patch": "@@ -67,8 +67,6 @@ static void dump_ads (const char *, void (*)(const char *),\n static char *to_ada_name (const char *, int *);\n static bool separate_class_package (tree);\n \n-#define LOCATION_COL(LOC) ((expand_location (LOC)).column)\n-\n #define INDENT(SPACE) do { \\\n   int i; for (i = 0; i<SPACE; i++) pp_space (buffer); } while (0)\n \n@@ -553,6 +551,26 @@ decl_sloc (const_tree decl, bool last)\n   return decl_sloc_common (decl, last, false);\n }\n \n+/* Compare two locations LHS and RHS.  */\n+\n+static int\n+compare_location (location_t lhs, location_t rhs)\n+{\n+  expanded_location xlhs = expand_location (lhs);\n+  expanded_location xrhs = expand_location (rhs);\n+\n+  if (xlhs.file != xrhs.file)\n+    return filename_cmp (xlhs.file, xrhs.file);\n+\n+  if (xlhs.line != xrhs.line)\n+    return xlhs.line - xrhs.line;\n+\n+  if (xlhs.column != xrhs.column)\n+    return xlhs.column - xrhs.column;\n+\n+  return 0;\n+}\n+\n /* Compare two declarations (LP and RP) by their source location.  */\n \n static int\n@@ -561,7 +579,7 @@ compare_node (const void *lp, const void *rp)\n   const_tree lhs = *((const tree *) lp);\n   const_tree rhs = *((const tree *) rp);\n \n-  return decl_sloc (lhs, true) - decl_sloc (rhs, true);\n+  return compare_location (decl_sloc (lhs, true), decl_sloc (rhs, true));\n }\n \n /* Compare two comments (LP and RP) by their source location.  */\n@@ -572,17 +590,7 @@ compare_comment (const void *lp, const void *rp)\n   const cpp_comment *lhs = (const cpp_comment *) lp;\n   const cpp_comment *rhs = (const cpp_comment *) rp;\n \n-  if (LOCATION_FILE (lhs->sloc) != LOCATION_FILE (rhs->sloc))\n-    return filename_cmp (LOCATION_FILE (lhs->sloc),\n-\t\t\t LOCATION_FILE (rhs->sloc));\n-\n-  if (LOCATION_LINE (lhs->sloc) != LOCATION_LINE (rhs->sloc))\n-    return LOCATION_LINE (lhs->sloc) - LOCATION_LINE (rhs->sloc);\n-\n-  if (LOCATION_COL (lhs->sloc) != LOCATION_COL (rhs->sloc))\n-    return LOCATION_COL (lhs->sloc) - LOCATION_COL (rhs->sloc);\n-\n-  return 0;\n+  return compare_location (lhs->sloc, rhs->sloc);\n }\n \n static tree *to_dump = NULL;"}]}