{"sha": "66286a53d5f325b1b396d0d590dfa1c6aa51cbca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjYyODZhNTNkNWYzMjViMWIzOTZkMGQ1OTBkZmExYzZhYTUxY2JjYQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-04-30T17:21:29Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-04-30T17:21:29Z"}, "message": "compiler: Mark non-escaping variables that aren't addressed.\n\nWhen optimizing allocations, only variables that had their address\ntaken somewhere in the program were marked as non-escaping.\nThere are several cases where non-addressed variables might cause\nextra allocations.\n\nFrom-SVN: r222640", "tree": {"sha": "d75fffab8c110857e1dcbf84a6bd5bd5aa9bf743", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d75fffab8c110857e1dcbf84a6bd5bd5aa9bf743"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/66286a53d5f325b1b396d0d590dfa1c6aa51cbca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66286a53d5f325b1b396d0d590dfa1c6aa51cbca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66286a53d5f325b1b396d0d590dfa1c6aa51cbca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66286a53d5f325b1b396d0d590dfa1c6aa51cbca/comments", "author": null, "committer": null, "parents": [{"sha": "fb0cb7fa67a4e267715129fc06185f631904cd86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb0cb7fa67a4e267715129fc06185f631904cd86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb0cb7fa67a4e267715129fc06185f631904cd86"}], "stats": {"total": 6, "additions": 1, "deletions": 5}, "files": [{"sha": "80f6ef6dd8353d88afe8e70add4cb30855c1d045", "filename": "gcc/go/gofrontend/escape.cc", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/66286a53d5f325b1b396d0d590dfa1c6aa51cbca/gcc%2Fgo%2Fgofrontend%2Fescape.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/66286a53d5f325b1b396d0d590dfa1c6aa51cbca/gcc%2Fgo%2Fgofrontend%2Fescape.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fescape.cc?ref=66286a53d5f325b1b396d0d590dfa1c6aa51cbca", "patch": "@@ -1560,8 +1560,7 @@ Optimize_allocations::variable(Named_object* var)\n \n   if (var->is_variable())\n     {\n-      if (var->var_value()->is_address_taken())\n-      \tvar->var_value()->set_does_not_escape();\n+      var->var_value()->set_does_not_escape();\n       if (var->var_value()->init() != NULL\n \t  && var->var_value()->init()->allocation_expression() != NULL)\n \t{\n@@ -1570,9 +1569,6 @@ Optimize_allocations::variable(Named_object* var)\n \t  alloc->set_allocate_on_stack();\n \t}\n     }\n-  else if (var->is_result_variable()\n-\t   && var->result_var_value()->is_address_taken())\n-    var->result_var_value()->set_does_not_escape();\n \n   return TRAVERSE_CONTINUE;\n }"}]}