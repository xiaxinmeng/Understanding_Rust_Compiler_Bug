{"sha": "a138247b54d4ef96223a66366845b03a9729d51f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTEzODI0N2I1NGQ0ZWY5NjIyM2E2NjM2Njg0NWIwM2E5NzI5ZDUxZg==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2002-02-09T03:58:50Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2002-02-09T03:58:50Z"}, "message": "sh.h (REGISTER_NATURAL_MODE): Save part-clobbered registers in SImode.\n\n* config/sh/sh.h (REGISTER_NATURAL_MODE): Save part-clobbered\nregisters in SImode.\n(HARD_REGNO_CALL_PART_CLOBBERED) [TARGET_SHMEDIA32]: Set r18 as\npart-clobbered.\n\nFrom-SVN: r49632", "tree": {"sha": "933e1d617f41e733bbff0de81fb12803f1243b3d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/933e1d617f41e733bbff0de81fb12803f1243b3d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a138247b54d4ef96223a66366845b03a9729d51f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a138247b54d4ef96223a66366845b03a9729d51f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a138247b54d4ef96223a66366845b03a9729d51f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a138247b54d4ef96223a66366845b03a9729d51f/comments", "author": null, "committer": null, "parents": [{"sha": "2b1fd83f6261143b75f815628aad7e69e1f4e94e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b1fd83f6261143b75f815628aad7e69e1f4e94e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b1fd83f6261143b75f815628aad7e69e1f4e94e"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "37381ddbcd329247886455fa96681cbfbd372829", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a138247b54d4ef96223a66366845b03a9729d51f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a138247b54d4ef96223a66366845b03a9729d51f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a138247b54d4ef96223a66366845b03a9729d51f", "patch": "@@ -1,5 +1,10 @@\n 2002-02-09  Alexandre Oliva  <aoliva@redhat.com>\n \n+\t* config/sh/sh.h (REGISTER_NATURAL_MODE): Save part-clobbered\n+\tregisters in SImode.\n+\t(HARD_REGNO_CALL_PART_CLOBBERED) [TARGET_SHMEDIA32]: Set r18 as\n+\tpart-clobbered.\n+\n \t* config/sh/sh.c (expand_prologue): Fix mis-applied 2001-11-09's\n \tpatch.\n \t"}, {"sha": "3f0cad291c2c25468d271aa5b4bcea70d7fde6ce", "filename": "gcc/config/sh/sh.h", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a138247b54d4ef96223a66366845b03a9729d51f/gcc%2Fconfig%2Fsh%2Fsh.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a138247b54d4ef96223a66366845b03a9729d51f/gcc%2Fconfig%2Fsh%2Fsh.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.h?ref=a138247b54d4ef96223a66366845b03a9729d51f", "patch": "@@ -720,7 +720,9 @@ extern char sh_additional_register_names[ADDREGNAMES_SIZE] \\\n #define REGISTER_NATURAL_MODE(REGNO) \\\n   (FP_REGISTER_P (REGNO) ? SFmode \\\n    : XD_REGISTER_P (REGNO) ? DFmode \\\n-   : TARGET_SHMEDIA ? DImode : SImode)\n+   : TARGET_SHMEDIA && ! HARD_REGNO_CALL_PART_CLOBBERED ((REGNO), DImode) \\\n+   ? DImode \\\n+   : SImode)\n \n #define FIRST_PSEUDO_REGISTER 153\n \n@@ -811,8 +813,9 @@ extern char sh_additional_register_names[ADDREGNAMES_SIZE] \\\n #define HARD_REGNO_CALL_PART_CLOBBERED(REGNO,MODE) \\\n   (TARGET_SHMEDIA32 \\\n    && GET_MODE_SIZE (MODE) > 4 \\\n-   && (REGNO) >= FIRST_GENERAL_REG + 10 \\\n-   && (REGNO) <= FIRST_GENERAL_REG + 14)\n+   && (((REGNO) >= FIRST_GENERAL_REG + 10 \\\n+        && (REGNO) <= FIRST_GENERAL_REG + 14) \\\n+       || (REGNO) == PR_MEDIA_REG))\n \n /* Return number of consecutive hard regs needed starting at reg REGNO\n    to hold something of mode MODE."}]}