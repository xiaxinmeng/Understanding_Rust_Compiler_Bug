{"sha": "30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzBmYTIwNjhhM2Q0MzE3YjViMjI4MmViMmUzN2U5OGFlZGZjYmY0ZQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-01-08T09:41:36Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-01-08T09:41:36Z"}, "message": "decl.c (start_decl): Improve permerror location.\n\n/cp\n2019-01-08  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* decl.c (start_decl): Improve permerror location.\n\n/testsuite\n2019-01-08  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/diagnostic/out-of-class-redeclaration.C: New.\n\nFrom-SVN: r267675", "tree": {"sha": "58729404710a899345234b2f3e6adf5af24eef53", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58729404710a899345234b2f3e6adf5af24eef53"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/comments", "author": null, "committer": null, "parents": [{"sha": "e32ba3f7abf2f2be6cac6d9785a5e8cf9f2a47c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e32ba3f7abf2f2be6cac6d9785a5e8cf9f2a47c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e32ba3f7abf2f2be6cac6d9785a5e8cf9f2a47c5"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "f8d3d93984858b32973da84eeff353c14ad1195b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "patch": "@@ -1,3 +1,7 @@\n+2019-01-08  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* decl.c (start_decl): Improve permerror location.\n+\n 2019-01-08  Jonathan Wakely  <jwakely@redhat.com>\n \t    Jakub Jelinek  <jakub@redhat.com>\n "}, {"sha": "7e4e93c420132de05960c09219f4476899a7adeb", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "patch": "@@ -5202,7 +5202,8 @@ start_decl (const cp_declarator *declarator,\n       if (DECL_EXTERNAL (decl) && ! DECL_TEMPLATE_SPECIALIZATION (decl)\n \t  /* Aliases are definitions. */\n \t  && !alias)\n-\tpermerror (input_location, \"declaration of %q#D outside of class is not definition\",\n+\tpermerror (declarator->id_loc,\n+\t\t   \"declaration of %q#D outside of class is not definition\",\n \t\t   decl);\n     }\n "}, {"sha": "bc940878b3f67963e0079de4dc52f3843fe98242", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "patch": "@@ -1,3 +1,7 @@\n+2019-01-08  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/diagnostic/out-of-class-redeclaration.C: New.\n+\n 2019-01-08  Iain Sandoe  <iain@sandoe.co.uk>\n \n \t* c-c++-common/builtin-has-attribute-3.c: Skip tests requiring symbol"}, {"sha": "9dba8eb47a423f443fd877d1c94c65f7217b8a84", "filename": "gcc/testsuite/g++.dg/diagnostic/out-of-class-redeclaration.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fout-of-class-redeclaration.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fout-of-class-redeclaration.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Fout-of-class-redeclaration.C?ref=30fa2068a3d4317b5b2282eb2e37e98aedfcbf4e", "patch": "@@ -0,0 +1,13 @@\n+// Adapted from g++.old-deja/g++.law/arm8.C\n+\n+struct K {\n+  void f(int);\n+};\n+\n+void K::f(int);  // { dg-error \"6:declaration of .void K::f\\\\(int\\\\). outside of class\" }\n+\n+struct L {\n+  void g(int) {}\n+};\n+\n+void L::g(int);  // { dg-error \"6:declaration of .void L::g\\\\(int\\\\). outside of class\" }"}]}