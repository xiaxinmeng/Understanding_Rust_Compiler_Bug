{"sha": "21002281e55cbe5b1c8fbacc9074629612dd1b4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEwMDIyODFlNTVjYmU1YjFjOGZiYWNjOTA3NDYyOTYxMmRkMWI0YQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1997-09-16T20:59:22Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-09-16T20:59:22Z"}, "message": "Fix H.J. Lu's alpha-linux bug with TImode constructors.\n\n\t* expr.c (expand_expr): Remove previous incorrect change.\n\tIf target and slot has no DECL_RTL, then call mark_addressable\n\tagain for the slot after we give it RTL.\n\nFrom-SVN: r15496", "tree": {"sha": "a5b5c80ce7c7eb18c2b823306cc1138c3b672c7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a5b5c80ce7c7eb18c2b823306cc1138c3b672c7a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21002281e55cbe5b1c8fbacc9074629612dd1b4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21002281e55cbe5b1c8fbacc9074629612dd1b4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21002281e55cbe5b1c8fbacc9074629612dd1b4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21002281e55cbe5b1c8fbacc9074629612dd1b4a/comments", "author": null, "committer": null, "parents": [{"sha": "7d9e0d333c7cff4c6deecef4a8fd2b407a5c3f2b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d9e0d333c7cff4c6deecef4a8fd2b407a5c3f2b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d9e0d333c7cff4c6deecef4a8fd2b407a5c3f2b"}], "stats": {"total": 24, "additions": 17, "deletions": 7}, "files": [{"sha": "53929a17ef15985a4e4bcfb20f9a92f6471091dd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21002281e55cbe5b1c8fbacc9074629612dd1b4a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21002281e55cbe5b1c8fbacc9074629612dd1b4a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=21002281e55cbe5b1c8fbacc9074629612dd1b4a", "patch": "@@ -1,3 +1,9 @@\n+Tue Sep 16 11:13:46 1997  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* expr.c (expand_expr): Remove previous incorrect change.\n+\tIf target and slot has no DECL_RTL, then call mark_addressable\n+\tagain for the slot after we give it RTL.\n+\n Tue Sep 16 10:14:55 1997  Jeffrey A Law  (law@cygnus.com)\n \n \t* version.c: Bump for snapshot."}, {"sha": "dd0050dd4745d077bec145eb9239bee99952e0f3", "filename": "gcc/expr.c", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21002281e55cbe5b1c8fbacc9074629612dd1b4a/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21002281e55cbe5b1c8fbacc9074629612dd1b4a/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=21002281e55cbe5b1c8fbacc9074629612dd1b4a", "patch": "@@ -6919,11 +6919,6 @@ expand_expr (exp, target, tmode, modifier)\n \t\t/* All temp slots at this level must not conflict.  */\n \t\tpreserve_temp_slots (target);\n \t\tDECL_RTL (slot) = target;\n-\t\tif (TREE_ADDRESSABLE (slot))\n-\t\t  {\n-\t\t    TREE_ADDRESSABLE (slot) = 0;\n-\t\t    mark_addressable (slot);\n-\t\t  }\n \n \t\t/* Since SLOT is not known to the called function\n \t\t   to belong to its stack frame, we must build an explicit\n@@ -6955,8 +6950,17 @@ expand_expr (exp, target, tmode, modifier)\n                 if (TREE_OPERAND (exp, 1) == NULL_TREE)\n                   return target;\n \t      }\n-\n-\t    DECL_RTL (slot) = target;\n+\t    else\n+\t      {\n+\t\tDECL_RTL (slot) = target;\n+\t\t/* If we must have an addressable slot, then make sure that\n+\t\t   the RTL that we just stored in slot is OK.  */\n+\t\tif (TREE_ADDRESSABLE (slot))\n+\t\t  {\n+\t\t    TREE_ADDRESSABLE (slot) = 0;\n+\t\t    mark_addressable (slot);\n+\t\t  }\n+\t      }\n \t  }\n \n \texp1 = TREE_OPERAND (exp, 3) = TREE_OPERAND (exp, 1);"}]}