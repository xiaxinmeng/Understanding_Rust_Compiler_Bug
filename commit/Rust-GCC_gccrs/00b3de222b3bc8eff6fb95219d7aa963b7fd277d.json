{"sha": "00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBiM2RlMjIyYjNiYzhlZmY2ZmI5NTIxOWQ3YWE5NjNiN2ZkMjc3ZA==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2017-11-08T16:22:37Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2017-11-08T16:22:37Z"}, "message": "spark_xrefs.ads (SPARK_File_Record): Remove string components.\n\n2017-11-08  Piotr Trojanek  <trojanek@adacore.com>\n\n\t* spark_xrefs.ads (SPARK_File_Record): Remove string components.\n\t* spark_xrefs.adb (dspark): Remove pretty-printing of removed\n\tSPARK_File_Record components.\n\t* lib-xref-spark_specific.adb (Add_SPARK_File): Do not store string\n\trepresentation of files/units.\n\nFrom-SVN: r254541", "tree": {"sha": "68e9d29437fbd16289d4635c8b95698feee21e93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68e9d29437fbd16289d4635c8b95698feee21e93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "784ef0fb7cd3e6bdf8cdba51a14cd884f365cb59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/784ef0fb7cd3e6bdf8cdba51a14cd884f365cb59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/784ef0fb7cd3e6bdf8cdba51a14cd884f365cb59"}], "stats": {"total": 52, "additions": 11, "deletions": 41}, "files": [{"sha": "2e5c0c48e0e6b763da63338c8f7181f9673972f0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "patch": "@@ -1,3 +1,11 @@\n+2017-11-08  Piotr Trojanek  <trojanek@adacore.com>\n+\n+\t* spark_xrefs.ads (SPARK_File_Record): Remove string components.\n+\t* spark_xrefs.adb (dspark): Remove pretty-printing of removed\n+\tSPARK_File_Record components.\n+\t* lib-xref-spark_specific.adb (Add_SPARK_File): Do not store string\n+\trepresentation of files/units.\n+\n 2017-11-08  Piotr Trojanek  <trojanek@adacore.com>\n \n \t* lib-xref.ads, lib-xref-spark_specific.adb (Traverse_Declarations):"}, {"sha": "300706a35c8fe2f7b5b89684009cfc71db3336cd", "filename": "gcc/ada/lib-xref-spark_specific.adb", "status": "modified", "additions": 3, "deletions": 27, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2Flib-xref-spark_specific.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2Flib-xref-spark_specific.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-xref-spark_specific.adb?ref=00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "patch": "@@ -208,11 +208,6 @@ package body SPARK_Specific is\n       procedure Traverse_Scopes is new\n         Traverse_Compilation_Unit (Detect_And_Add_SPARK_Scope);\n \n-      --  Local variables\n-\n-      File_Name      : String_Ptr;\n-      Unit_File_Name : String_Ptr;\n-\n    --  Start of processing for Add_SPARK_File\n \n    begin\n@@ -240,29 +235,10 @@ package body SPARK_Specific is\n          Traverse_Scopes (CU => Cunit (Ubody));\n       end if;\n \n-      --  Make entry for new file in file table\n-\n-      Get_Name_String (Reference_Name (File));\n-      File_Name := new String'(Name_Buffer (1 .. Name_Len));\n-\n-      --  For subunits, also retrieve the file name of the unit. Only do so if\n-      --  unit has an associated compilation unit.\n-\n-      if Present (Cunit (Unit (File)))\n-        and then Nkind (Unit (Cunit (Unit (File)))) = N_Subunit\n-      then\n-         Get_Name_String (Reference_Name (Main_Source_File));\n-         Unit_File_Name := new String'(Name_Buffer (1 .. Name_Len));\n-      else\n-         Unit_File_Name := null;\n-      end if;\n-\n       SPARK_File_Table.Append (\n-        (File_Name      => File_Name,\n-         Unit_File_Name => Unit_File_Name,\n-         File_Num       => Dspec,\n-         From_Scope     => From,\n-         To_Scope       => SPARK_Scope_Table.Last));\n+        (File_Num   => Dspec,\n+         From_Scope => From,\n+         To_Scope   => SPARK_Scope_Table.Last));\n    end Add_SPARK_File;\n \n    ---------------------"}, {"sha": "9461c968e1ca7fb1360005afab7077ad943c0bf3", "filename": "gcc/ada/spark_xrefs.adb", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2Fspark_xrefs.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2Fspark_xrefs.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fspark_xrefs.adb?ref=00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "patch": "@@ -48,13 +48,6 @@ package body SPARK_Xrefs is\n             Write_Int (Int (Index));\n             Write_Str (\".  File_Num = \");\n             Write_Int (Int (AFR.File_Num));\n-            Write_Str (\"  File_Name = \"\"\");\n-\n-            if AFR.File_Name /= null then\n-               Write_Str (AFR.File_Name.all);\n-            end if;\n-\n-            Write_Char ('\"');\n             Write_Str (\"  From = \");\n             Write_Int (Int (AFR.From_Scope));\n             Write_Str (\"  To = \");"}, {"sha": "7ac09012e48ed35c9862eb382de33232d26beca9", "filename": "gcc/ada/spark_xrefs.ads", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2Fspark_xrefs.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00b3de222b3bc8eff6fb95219d7aa963b7fd277d/gcc%2Fada%2Fspark_xrefs.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fspark_xrefs.ads?ref=00b3de222b3bc8eff6fb95219d7aa963b7fd277d", "patch": "@@ -154,13 +154,6 @@ package SPARK_Xrefs is\n    --  entries have been constructed.\n \n    type SPARK_File_Record is record\n-      File_Name : String_Ptr;\n-      --  Pointer to file name in ALI file\n-\n-      Unit_File_Name : String_Ptr;\n-      --  Pointer to file name for unit in ALI file, when File_Name refers to a\n-      --  subunit; otherwise null.\n-\n       File_Num : Nat;\n       --  Dependency number in ALI file\n "}]}