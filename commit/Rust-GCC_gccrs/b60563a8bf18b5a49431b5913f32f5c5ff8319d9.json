{"sha": "b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjYwNTYzYThiZjE4YjVhNDk0MzFiNTkxM2YzMmY1YzVmZjgzMTlkOQ==", "commit": {"author": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2020-01-13T18:20:13Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@arm.com", "date": "2020-01-13T18:26:18Z"}, "message": "contrib: Add in the default push rule which was overridden\n\nWhen we add a push rule, the default rule gets removed, so add that in\nexplicitly.  This needs to come last since otherwise it would match\nthe custom redirecting rules we have for personal and vendor\nsub-spaces.\n\nI also noticed that the push rule for the vendor subspace still had\na force push default.  We don't want that so remove it.\n\n\t* gcc-git-customization.sh: Add back the default rule that\n\tis lost by adding a custom push rule.\n\t* git-fetch-vendor.sh: Likewise, also remove '+' from push specs.", "tree": {"sha": "494f6f50c976d3e5d7726620c753f49c5aaaa67e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/494f6f50c976d3e5d7726620c753f49c5aaaa67e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/comments", "author": null, "committer": null, "parents": [{"sha": "8472660b98a31b32b7d030c2cdc4d41d326364d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8472660b98a31b32b7d030c2cdc4d41d326364d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8472660b98a31b32b7d030c2cdc4d41d326364d5"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "32ed283e08e162e774d5d44495b8537882f3416c", "filename": "contrib/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "patch": "@@ -1,3 +1,9 @@\n+2010-01-13  Richard Earnshaw  <rearnsha@arm.com>\n+\n+\t* gcc-git-customization.sh: Add back the default rule that\n+\tis lost by adding a custom push rule.\n+\t* git-fetch-vendor.sh: Likewise, also remove '+' from push specs.\n+\n 2010-01-13  Richard Earnshaw  <rearnsha@arm.com>\n \n \t* contrib/git-fetch-vendor.sh: New file."}, {"sha": "6665bddeb48c24069b1e4f615fdc64ee24b2e130", "filename": "contrib/gcc-git-customization.sh", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/contrib%2Fgcc-git-customization.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/contrib%2Fgcc-git-customization.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgcc-git-customization.sh?ref=b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "patch": "@@ -68,7 +68,11 @@ echo \"(local branches starting <prefix>/ can be pushed directly to your\"\n ask \"personal area on the gcc server)\" $old_pfx new_pfx\n git config \"gcc-config.userpfx\" \"$new_pfx\"\n \n+# This entry needs to come last, so unset it now, then reset it after the updates.\n+git config --unset \"remote.${upstream}.push\" \"refs/heads/\\\\*:refs/heads/\\\\*\"\n echo \"Setting up tracking for personal namespace $remote_id in remotes/$upstream/${new_pfx}\"\n git config --replace-all \"remote.${upstream}.fetch\" \"+refs/users/${remote_id}/heads/*:refs/remotes/${upstream}/${new_pfx}/*\" \":refs/remotes/${upstream}/${old_pfx}/\"\n git config --replace-all \"remote.${upstream}.fetch\" \"+refs/users/${remote_id}/tags/*:refs/tags/${new_pfx}/*\" \":refs/tags/${old_pfx}/\"\n git config --replace-all \"remote.${upstream}.push\" \"refs/heads/${new_pfx}/*:refs/users/${remote_id}/heads/*\" \"^\\+?refs/heads/${old_pfx}/\"\n+# Re-add the line deleted above.\n+git config --add \"remote.${upstream}.push\" \"refs/heads/*:refs/heads/*\""}, {"sha": "abb844dbc6a56b27f15c60c4bc101ffa626fa8b6", "filename": "contrib/git-fetch-vendor.sh", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/contrib%2Fgit-fetch-vendor.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b60563a8bf18b5a49431b5913f32f5c5ff8319d9/contrib%2Fgit-fetch-vendor.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fgit-fetch-vendor.sh?ref=b60563a8bf18b5a49431b5913f32f5c5ff8319d9", "patch": "@@ -14,9 +14,13 @@ then\n     exit 1\n fi\n \n-echo \"setting up git to fetch vendor ${vendor} to remotes/${upstream}/${vendor}\"\n+# This entry needs to come last, so unset it now, then reset it after the updates.\n+git config --unset \"remote.${upstream}.push\" \"refs/heads/\\\\*:refs/heads/\\\\*\"\n \n-git config --replace-all \"remote.${upstream}.fetch\" \"+refs/vendors/${vendor}/heads/*:refs/remotes/${upstream}/${vendor}/*\" \":refs/remotes/${upstream}/${vendor}/\"\n+echo \"setting up git to fetch vendor ${vendor} to remotes/${upstream}/${vendor}\"\n+git config --replace-all \"remote.${upstream}.fetch\" \"refs/vendors/${vendor}/heads/*:refs/remotes/${upstream}/${vendor}/*\" \":refs/remotes/${upstream}/${vendor}/\"\n git config --replace-all \"remote.${upstream}.fetch\" \"+refs/vendors/${vendor}/tags/*:refs/tags/${vendor}/*\" \":refs/tags/${vendor}/\"\n-git config --replace-all \"remote.${upstream}.push\" \"+refs/heads/${vendor}/*:refs/vendors/${vendor}/heads/*\" \"^\\+refs/heads/${vendor}/\"\n+git config --replace-all \"remote.${upstream}.push\" \"refs/heads/${vendor}/*:refs/vendors/${vendor}/heads/*\" \"^\\+?refs/heads/${vendor}/\"\n+# Re-add the line deleted above.\n+git config --add \"remote.${upstream}.push\" \"refs/heads/*:refs/heads/*\"\n git fetch"}]}