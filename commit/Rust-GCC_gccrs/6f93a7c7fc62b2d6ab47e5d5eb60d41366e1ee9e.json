{"sha": "6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmY5M2E3YzdmYzYyYjJkNmFiNDdlNWQ1ZWI2MGQ0MTM2NmUxZWU5ZQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-03-30T12:26:33Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-03-30T13:11:10Z"}, "message": "arm: Fix emission of Tag_ABI_VFP_args with MVE and -mfloat-abi=hard (PR target/99773)\n\nWhen compiling with -mfloat-abi=hard -march=armv8.1-m.main+mve, we\nwant to emit Tag_ABI_VFP_args even though we are not emitting\nfloating-point instructions (we need \"+mve.fp\" for that), because we\nuse MVE registers to pass FP arguments.\n\nThis patch removes the condition on (! TARGET_SOFT_FLOAT) because this\nis a case where TARGET_SOFT_FLOAT is true, and TARGET_HARD_FLOAT_ABI\nis true too.\n\n2021-03-30  Richard Earnshaw  <rearnsha@arm.com>\n\n\tgcc/\n\tPR target/99773\n\t* config/arm/arm.c (arm_file_start): Fix emission of\n\tTag_ABI_VFP_args attribute.", "tree": {"sha": "a18012171a5855ccb378db337be42f7972a22c7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a18012171a5855ccb378db337be42f7972a22c7c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e/comments", "author": null, "committer": null, "parents": [{"sha": "41d57b2a97c44ae7b0a5b01ae703a8f0d0495238", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41d57b2a97c44ae7b0a5b01ae703a8f0d0495238", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41d57b2a97c44ae7b0a5b01ae703a8f0d0495238"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "518bfed1c35ca6c2092feb3d641cd76e4035fa4d", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=6f93a7c7fc62b2d6ab47e5d5eb60d41366e1ee9e", "patch": "@@ -28150,14 +28150,11 @@ arm_file_start (void)\n       if (print_tune_info)\n \tarm_print_tune_info ();\n \n-      if (! TARGET_SOFT_FLOAT)\n-\t{\n-\t  if (TARGET_HARD_FLOAT && TARGET_VFP_SINGLE)\n-\t    arm_emit_eabi_attribute (\"Tag_ABI_HardFP_use\", 27, 1);\n+      if (TARGET_HARD_FLOAT && TARGET_VFP_SINGLE)\n+\tarm_emit_eabi_attribute (\"Tag_ABI_HardFP_use\", 27, 1);\n \n-\t  if (TARGET_HARD_FLOAT_ABI)\n-\t    arm_emit_eabi_attribute (\"Tag_ABI_VFP_args\", 28, 1);\n-\t}\n+      if (TARGET_HARD_FLOAT_ABI)\n+\tarm_emit_eabi_attribute (\"Tag_ABI_VFP_args\", 28, 1);\n \n       /* Some of these attributes only apply when the corresponding features\n \t are used.  However we don't have any easy way of figuring this out."}]}