{"sha": "709e9e509cdca723aec76fb1076b2feb1264192b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzA5ZTllNTA5Y2RjYTcyM2FlYzc2ZmIxMDc2YjJmZWIxMjY0MTkyYg==", "commit": {"author": {"name": "Neil Booth", "email": "neilb@earthling.net", "date": "2000-08-17T18:01:43Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2000-08-17T18:01:43Z"}, "message": "cppinit.c (cpp_cleanup): Free include dir chains.\n\n\t* cppinit.c (cpp_cleanup): Free include dir chains.\n\t* cpplib.c (do_undef): Let _cpp_free_definition make the node void.\n\t(do_unassert): Free the assert with _cpp_free_definition.\n\t* cppmacro.c (_cpp_free_definition): Free memory allocated for\n\tassertions.  Make the node a T_VOID node.\n\nFrom-SVN: r35765", "tree": {"sha": "08a55b2310020143695da9578d6843781f8dda0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08a55b2310020143695da9578d6843781f8dda0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/709e9e509cdca723aec76fb1076b2feb1264192b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/709e9e509cdca723aec76fb1076b2feb1264192b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/709e9e509cdca723aec76fb1076b2feb1264192b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/709e9e509cdca723aec76fb1076b2feb1264192b/comments", "author": null, "committer": null, "parents": [{"sha": "e33f6253857ef2e87ad037c0452c09db7a940b8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e33f6253857ef2e87ad037c0452c09db7a940b8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e33f6253857ef2e87ad037c0452c09db7a940b8c"}], "stats": {"total": 39, "additions": 30, "deletions": 9}, "files": [{"sha": "9b8739b6fc5b5ac4da9bfa7d0afc680a08f472be", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=709e9e509cdca723aec76fb1076b2feb1264192b", "patch": "@@ -1,3 +1,11 @@\n+2000-08-17  Neil Booth  <NeilB@earthling.net>\n+\n+\t* cppinit.c (cpp_cleanup): Free include dir chains.\n+\t* cpplib.c (do_undef): Let _cpp_free_definition make the node void.\n+\t(do_unassert): Free the assert with _cpp_free_definition.\n+\t* cppmacro.c (_cpp_free_definition): Free memory allocated for\n+\tassertions.  Make the node a T_VOID node.\n+\n 2000-08-17  Neil Booth  <NeilB@earthling.net>\n \n \t* cppinit.c (path_include, append_include_chain):"}, {"sha": "e91f1bea4c520993fe9ac7ae37473de723e11b61", "filename": "gcc/cppinit.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=709e9e509cdca723aec76fb1076b2feb1264192b", "patch": "@@ -467,6 +467,8 @@ void\n cpp_cleanup (pfile)\n      cpp_reader *pfile;\n {\n+  struct file_name_list *dir, *next;\n+\n   while (CPP_BUFFER (pfile) != NULL)\n     cpp_pop_buffer (pfile);\n \n@@ -480,6 +482,13 @@ cpp_cleanup (pfile)\n   _cpp_cleanup_includes (pfile);\n   _cpp_cleanup_stacks (pfile);\n   _cpp_cleanup_macros (pfile);\n+\n+  for (dir = CPP_OPTION (pfile, quote_include); dir; dir = next)\n+    {\n+      next = dir->next;\n+      free (dir->name);\n+      free (dir);\n+    }\n }\n \n "}, {"sha": "bc50452b561c5d30a2647f6e0cec0ab117d2bb36", "filename": "gcc/cpplib.c", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=709e9e509cdca723aec76fb1076b2feb1264192b", "patch": "@@ -298,7 +298,6 @@ do_undef (pfile)\n \tcpp_warning (pfile, \"undefining \\\"%s\\\"\", node->name);\n \n       _cpp_free_definition (node);\n-      node->type = T_VOID;\n     }\n }\n \n@@ -1369,14 +1368,7 @@ do_unassert (pfile)\n \t\tnode->type = T_VOID;\n \t    }\n \t  else\n-\t    {\n-\t      for (temp = node->value.answers; temp; temp = next)\n-\t\t{\n-\t\t  next = temp->next;\n-\t\t  FREE_ANSWER (temp);\n-\t\t}\n-\t      node->type = T_VOID;\n-\t    }\n+\t    _cpp_free_definition (node);\n \t}\n \n       if (answer)"}, {"sha": "3c9ffb974830addfb5904754aeb7c7c0532d579b", "filename": "gcc/cppmacro.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2Fcppmacro.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/709e9e509cdca723aec76fb1076b2feb1264192b/gcc%2Fcppmacro.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppmacro.c?ref=709e9e509cdca723aec76fb1076b2feb1264192b", "patch": "@@ -404,6 +404,18 @@ _cpp_free_definition (h)\n {\n   if (h->type == T_MACRO)\n     free ((PTR) h->value.expansion);\n+  else if (h->type == T_ASSERTION)\n+    {\n+      struct answer *temp, *next;\n+\n+      for (temp = h->value.answers; temp; temp = next)\n+\t{\n+\t  next = temp->next;\n+\t  FREE_ANSWER (temp);\n+\t}\n+    }\n+\n+  h->type = T_VOID;\n   h->value.expansion = NULL;\n }\n "}]}