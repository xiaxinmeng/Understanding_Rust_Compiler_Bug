{"sha": "1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWQ2Y2NjNWYyOTg0OTUyZWU3MWIwYmVhNTExY2ZmY2Q1YTMwNzI1ZA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-06-06T14:50:16Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2018-06-06T14:50:16Z"}, "message": "reflect: fix StructOf hash and string\n    \n    Adjust the hash and string fields computed by StructOf to match the\n    values that the compiler computes for a struct type with the same\n    field names and types.  This makes the reflect code match the\n    compiler's Type::hash_for_method and Type::reflection methods.\n    \n    Fixes golang/go#25284\n    \n    Reviewed-on: https://go-review.googlesource.com/116515\n\nFrom-SVN: r261235", "tree": {"sha": "cffc231c7ade9a8ba7e8070fec2ec552b4775e96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cffc231c7ade9a8ba7e8070fec2ec552b4775e96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/comments", "author": null, "committer": null, "parents": [{"sha": "1336795a5669b19722fdbc256a3bfe801b54eea7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1336795a5669b19722fdbc256a3bfe801b54eea7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1336795a5669b19722fdbc256a3bfe801b54eea7"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "eba9bd41c85beabae779356da50b8b4dba26899c", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "patch": "@@ -1,4 +1,4 @@\n-8b6c7f3f9762366bab96ea95b966e93e2593be13\n+baf289294a026ddd30c9e4341aff528084337763\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "96b57ef2cdaa375d4a9446f03f296ba573a85166", "filename": "libgo/go/reflect/all_test.go", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/libgo%2Fgo%2Freflect%2Fall_test.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/libgo%2Fgo%2Freflect%2Fall_test.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Freflect%2Fall_test.go?ref=1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "patch": "@@ -4411,6 +4411,17 @@ func TestStructOf(t *testing.T) {\n \t})\n \t// check that type already in binary is found\n \tcheckSameType(t, StructOf(fields[2:3]), struct{ Y uint64 }{})\n+\n+\t// gccgo used to fail this test.\n+\ttype structFieldType interface{}\n+\tcheckSameType(t,\n+\t\tStructOf([]StructField{\n+\t\t\tStructField{\n+\t\t\t\tName: \"F\",\n+\t\t\t\tType: TypeOf((*structFieldType)(nil)).Elem(),\n+\t\t\t},\n+\t\t}),\n+\t\tstruct{ F structFieldType }{})\n }\n \n func TestStructOfExportRules(t *testing.T) {"}, {"sha": "07fe4d001c0e5a1a32c0ab083927fbb1a53eb567", "filename": "libgo/go/reflect/type.go", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/libgo%2Fgo%2Freflect%2Ftype.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1d6ccc5f2984952ee71b0bea511cffcd5a30725d/libgo%2Fgo%2Freflect%2Ftype.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Freflect%2Ftype.go?ref=1d6ccc5f2984952ee71b0bea511cffcd5a30725d", "patch": "@@ -1912,7 +1912,7 @@ func isValidFieldName(fieldName string) bool {\n // This limitation may be lifted in a future version.\n func StructOf(fields []StructField) Type {\n \tvar (\n-\t\thash       = uint32(0)\n+\t\thash       = uint32(12)\n \t\tsize       uintptr\n \t\ttypalign   int8\n \t\tcomparable = true\n@@ -1997,7 +1997,7 @@ func StructOf(fields []StructField) Type {\n \t\t}\n \t\tfset[name] = struct{}{}\n \n-\t\trepr = append(repr, (\" \" + ft.String())...)\n+\t\trepr = append(repr, (\" \" + *ft.string)...)\n \t\tif f.tag != nil {\n \t\t\trepr = append(repr, (\" \" + strconv.Quote(*f.tag))...)\n \t\t}"}]}