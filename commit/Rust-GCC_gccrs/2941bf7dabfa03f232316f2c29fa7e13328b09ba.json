{"sha": "2941bf7dabfa03f232316f2c29fa7e13328b09ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjk0MWJmN2RhYmZhMDNmMjMyMzE2ZjJjMjlmYTdlMTMzMjhiMDliYQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-18T11:00:59Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2014-07-18T11:00:59Z"}, "message": "[multiple changes]\n\n2014-07-18  Robert Dewar  <dewar@adacore.com>\n\n\t* gnat_rm.texi: Remove mention of obsolete attributes\n\tMax[_Interrupt]_Priority, which have never been implemented\n\t(or at the very least were removed long ago if they ever were\n\timplemented.  Add documentation of Max[_Interrupt]_Priority\n\tconstants in package System.\n\t* ttypes.ads: Document actual handling of package System,\n\trather than a historical fantasy version.  Remove mention of\n\tnon-existent attributes Max[_Interrupt]_Priority.\n\n2014-07-18  Pascal Obry  <obry@adacore.com>\n\n\t* a-witeio.adb (Put): No 16-bit character output when text\n\ttranslation is disabled.\n\t* i-cstrea.ads: Code clean up.\n\nFrom-SVN: r212813", "tree": {"sha": "97bcadaec217cb1187312be1c2760b3a412b68ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97bcadaec217cb1187312be1c2760b3a412b68ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2941bf7dabfa03f232316f2c29fa7e13328b09ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2941bf7dabfa03f232316f2c29fa7e13328b09ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2941bf7dabfa03f232316f2c29fa7e13328b09ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2941bf7dabfa03f232316f2c29fa7e13328b09ba/comments", "author": null, "committer": null, "parents": [{"sha": "676fa39756b56648026fa383dfe89239c72fb7ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/676fa39756b56648026fa383dfe89239c72fb7ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/676fa39756b56648026fa383dfe89239c72fb7ea"}], "stats": {"total": 91, "additions": 47, "deletions": 44}, "files": [{"sha": "49cbaecbe77062ffae4b4a737fff59be7d03b6df", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2941bf7dabfa03f232316f2c29fa7e13328b09ba", "patch": "@@ -1,5 +1,21 @@\n 2014-07-18  Robert Dewar  <dewar@adacore.com>\n \n+\t* gnat_rm.texi: Remove mention of obsolete attributes\n+\tMax[_Interrupt]_Priority, which have never been implemented\n+\t(or at the very least were removed long ago if they ever were\n+\timplemented.  Add documentation of Max[_Interrupt]_Priority\n+\tconstants in package System.\n+\t* ttypes.ads: Document actual handling of package System,\n+\trather than a historical fantasy version.  Remove mention of\n+\tnon-existent attributes Max[_Interrupt]_Priority.\n+\n+2014-07-18  Pascal Obry  <obry@adacore.com>\n+\n+\t* a-witeio.adb (Put): No 16-bit character output when text\n+\ttranslation is disabled.\n+\t* i-cstrea.ads: Code clean up.\n+2014-07-18  Robert Dewar  <dewar@adacore.com>\n+\n \t* gnat_rm.texi: Document that Wchar_T_Size and Word_Size are\n \tstatic attributes.\n "}, {"sha": "59e06e261c7253a8199ddc981b3ef3a094b68ae6", "filename": "gcc/ada/a-witeio.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fa-witeio.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fa-witeio.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fa-witeio.adb?ref=2941bf7dabfa03f232316f2c29fa7e13328b09ba", "patch": "@@ -1257,7 +1257,7 @@ package body Ada.Wide_Text_IO is\n       FIO.Check_Write_Status (AP (File));\n \n       if wide_text_translation_required /= 0\n-        or else File.Text_Encoding /= Default_Text\n+        or else File.Text_Encoding in Non_Default_Text_Content_Encoding\n       then\n          set_mode (fileno (File.Stream), File.Text_Encoding);\n          Discard := fputwc (Wide_Character'Pos (Item), File.Stream);"}, {"sha": "ed78288279338382a29f8caab9eb484f6e490842", "filename": "gcc/ada/gnat_rm.texi", "status": "modified", "additions": 9, "deletions": 22, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fgnat_rm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fgnat_rm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_rm.texi?ref=2941bf7dabfa03f232316f2c29fa7e13328b09ba", "patch": "@@ -363,8 +363,6 @@ Implementation Defined Attributes\n * Attribute Loop_Entry::\n * Attribute Machine_Size::\n * Attribute Mantissa::\n-* Attribute Max_Interrupt_Priority::\n-* Attribute Max_Priority::\n * Attribute Maximum_Alignment::\n * Attribute Mechanism_Code::\n * Attribute Null_Parameter::\n@@ -8399,8 +8397,6 @@ consideration, you should minimize the use of these attributes.\n * Attribute Loop_Entry::\n * Attribute Machine_Size::\n * Attribute Mantissa::\n-* Attribute Max_Interrupt_Priority::\n-* Attribute Max_Priority::\n * Attribute Maximum_Alignment::\n * Attribute Mechanism_Code::\n * Attribute Null_Parameter::\n@@ -8965,23 +8961,6 @@ The @code{Mantissa} attribute is provided for compatibility with Ada 83.  See\n the Ada 83 reference manual for an exact description of the semantics of\n this attribute.\n \n-@node Attribute Max_Interrupt_Priority\n-@unnumberedsec Attribute Max_Interrupt_Priority\n-@cindex Interrupt priority, maximum\n-@findex Max_Interrupt_Priority\n-@noindent\n-@code{Standard'Max_Interrupt_Priority} (@code{Standard} is the only\n-permissible prefix), provides the same value as\n-@code{System.Max_Interrupt_Priority}.\n-\n-@node Attribute Max_Priority\n-@unnumberedsec Attribute Max_Priority\n-@cindex Priority, maximum\n-@findex Max_Priority\n-@noindent\n-@code{Standard'Max_Priority} (@code{Standard} is the only permissible\n-prefix) provides the same value as @code{System.Max_Priority}.\n-\n @node Attribute Maximum_Alignment\n @unnumberedsec Attribute Maximum_Alignment\n @cindex Alignment, maximum\n@@ -13056,7 +13035,15 @@ and its language-defined children.  See 13.7(2).\n @end cartouche\n @noindent\n See the definition of these packages in files @file{system.ads} and\n-@file{s-stoele.ads}.\n+@file{s-stoele.ads}. Note that two declarations are added to package\n+System.\n+\n+@smallexample @c ada\n+   Max_Priority           : constant Positive :=\n+     Priority'Last;\n+   Max_Interrupt_Priority : constant Positive :=\n+     Interrupt_Priority'Last;\n+@end smallexample\n \n @sp 1\n @item"}, {"sha": "48fbfc45bdc210d648f5816d5c953b71b92958c5", "filename": "gcc/ada/i-cstrea.ads", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fi-cstrea.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fi-cstrea.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fi-cstrea.ads?ref=2941bf7dabfa03f232316f2c29fa7e13328b09ba", "patch": "@@ -243,16 +243,18 @@ package Interfaces.C_Streams is\n    --\n    --  This encoding is system dependent and only used on Windows systems.\n    --\n-   --  Note that modifications to Content_Encoding must be synchronized\n-   --  with sysdep.c:__gnat_set_mode.\n+   --  Note that modifications to Content_Encoding must be synchronized with\n+   --  sysdep.c:__gnat_set_mode.\n \n    subtype Text_Content_Encoding\n      is Content_Encoding range Default_Text .. U16text;\n \n+   subtype Non_Default_Text_Content_Encoding\n+     is Content_Encoding range Text .. U16text;\n+\n    procedure set_mode (handle : int; Mode : Content_Encoding);\n-   --  As above but can set the handle to any mode.\n-   --  On Windows this can be used to have proper 16-bit wide-string output\n-   --  on the console for example.\n+   --  As above but can set the handle to any mode. On Windows this can be used\n+   --  to have proper 16-bit wide-string output on the console for example.\n \n    ----------------------------\n    -- Full Path Name support --"}, {"sha": "0aca903580b13a20604f8ce54af350e52dfd31ab", "filename": "gcc/ada/ttypes.ads", "status": "modified", "additions": 14, "deletions": 16, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fttypes.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2941bf7dabfa03f232316f2c29fa7e13328b09ba/gcc%2Fada%2Fttypes.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fttypes.ads?ref=2941bf7dabfa03f232316f2c29fa7e13328b09ba", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 1992-2013, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -64,21 +64,19 @@ package Ttypes is\n    --  values needed in Stand are obtained by direct reference to Ttypes\n    --  and Ttypef.\n \n-   --  For package System, the required constant values are obtained by\n-   --  referencing appropriate attributes. Ada 95 already defines most of\n-   --  the required attributes, and GNAT specific attributes have been\n-   --  defined to cover the remaining cases (such as Storage_Unit). The\n-   --  evaluation of these attributes obtains the required target dependent\n-   --  values from Ttypes and Ttypef. The additional attributes that have\n-   --  been added to GNAT (Address_Size, Storage_Unit, Word_Size, Max_Priority,\n-   --  and Max_Interrupt_Priority) are for almost all purposes redundant with\n-   --  respect to the corresponding references to System constants. For example\n-   --  in a program, System.Address_Size and Standard'Address_Size yield the\n-   --  same value. The critical use of the attribute is in writing the System\n-   --  declaration of Address_Size which of course cannot refer to itself. By\n-   --  this means we achieve complete target independence in the source code\n-   --  of package System, i.e. there is only one copy of the source of System\n-   --  for all targets.\n+   --  For package System, there is a separate version for each target, with\n+   --  explicit declarations of the required, constants.\n+\n+   --  Historical note: Originally we had in mind dealing with target dependent\n+   --  differences by referencing appropriate attributes. Ada 95 already\n+   --  defines most of the required attributes, and GNAT specific attributes\n+   --  were defined to cover the remaining cases (such as Storage_Unit).\n+   --  The additional attributes that have been added to GNAT (Address_Size,\n+   --  Storage_Unit, and Word_Size) are redundant with respect to the\n+   --  corresponding references to System constants. For example in a program,\n+   --  System.Address_Size and Standard'Address_Size yield the same value.\n+   --  These attributes have been retained for compatibility purposes, but\n+   --  serve no purpose at this stage.\n \n    --  Note that during compilation there are two versions of package System\n    --  around. The version that is directly with'ed by compiler packages"}]}