{"sha": "a3cbd1056018f77767c51169da39a6afe46bad11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNjYmQxMDU2MDE4Zjc3NzY3YzUxMTY5ZGEzOWE2YWZlNDZiYWQxMQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "1998-08-30T21:15:53Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-08-30T21:15:53Z"}, "message": "configure (gxx_include_dir): Changed to '${prefix}/include/g++'-${libstdcxx_interface}.\n\n        * configure (gxx_include_dir): Changed to\n        '${prefix}/include/g++'-${libstdcxx_interface}.\n        * config.if: New to determine the interfaces.\n\nFrom-SVN: r22109", "tree": {"sha": "8111a666148beaaa3b09fb822d566320e554160d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8111a666148beaaa3b09fb822d566320e554160d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3cbd1056018f77767c51169da39a6afe46bad11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3cbd1056018f77767c51169da39a6afe46bad11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3cbd1056018f77767c51169da39a6afe46bad11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3cbd1056018f77767c51169da39a6afe46bad11/comments", "author": null, "committer": null, "parents": [{"sha": "c4acd909d504a0b768162f3ba267e45730d1c3b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4acd909d504a0b768162f3ba267e45730d1c3b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4acd909d504a0b768162f3ba267e45730d1c3b3"}], "stats": {"total": 89, "additions": 88, "deletions": 1}, "files": [{"sha": "4e06a85514eadf490643a732239a5f4ae49d417f", "filename": "ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cbd1056018f77767c51169da39a6afe46bad11/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cbd1056018f77767c51169da39a6afe46bad11/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=a3cbd1056018f77767c51169da39a6afe46bad11", "patch": "@@ -1,3 +1,10 @@\n+Sun Aug 30 22:14:44 1998  H.J. Lu  (hjl@gnu.org)\n+\n+\t* configure (gxx_include_dir): Changed to\n+\t'${prefix}/include/g++'-${libstdcxx_interface}.\n+\n+\t* config.if: New to determine the interfaces.\n+\n Sun Aug 30 21:15:19 1998  Mark Klein (mklein@dis.com)\n \n \t* config.guess: Detect and handle MPE/IX."}, {"sha": "795119e65e63b4f00aa56ee54518c4e253ad4ece", "filename": "config.if", "status": "added", "additions": 79, "deletions": 0, "changes": 79, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cbd1056018f77767c51169da39a6afe46bad11/config.if", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cbd1056018f77767c51169da39a6afe46bad11/config.if", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config.if?ref=a3cbd1056018f77767c51169da39a6afe46bad11", "patch": "@@ -0,0 +1,79 @@\n+#! /dev/null\n+# Don't call it directly. This shell script fragment is called to\n+# determine:\n+#\n+#\t1. libstcxx_interface: the interface name for libstdc++.\n+#\t2. cxx_interface: the interface name for c++.\n+#\t3. libc_interface: the interface name for libc.\n+#\n+\n+# Get the top level src dir.\n+if [ -z \"${topsrcdir}\" -a -z \"${top_srcdir}\" ]\n+then\n+  echo \"Undefined top level src dir: topsrcdir and top_srcdir are empty\" >&2\n+  exit 1\n+fi\n+\n+if [ -n \"${topsrcdir}\" ]\n+then\n+  if_topsrcdir=${topsrcdir}\n+else\n+  if_topsrcdir=${top_srcdir}\n+fi\n+\n+# We check libstdc++ for libstdcxx_interface.\n+libstdcxx_interface=`grep \"^INTERFACE\" ${if_topsrcdir}/libstdc++/Makefile.in | sed 's/INTERFACE[ \t]*=[ \t]*\\(.*\\)/\\1/'`\n+\n+# We check gcc/cp for cxx_interface.\n+cxx_interface=`grep \"^INTERFACE\" ${if_topsrcdir}/gcc/cp/Makefile.in | sed 's/INTERFACE[ \t]*=[ \t]*\\(.*\\)/\\1/'`\n+\n+# The trickiest part is libc_interface.\n+if [ -z \"${libc_interface}\" ]\n+then\n+  case ${target_os} in\n+  *linux*libc1*|*linux*libc5*)\n+    case ${target_alias} in\n+    *alpha*|*powerpc*)\n+      libc_interface=-libc5.9-\n+      ;;\n+    *)\n+      libc_interface=-libc5-\n+      ;;\n+    esac\n+    ;;\n+  *linux*gnu*)\n+    # We have to work harder to figure it out.\n+    if [ ${target_alias} = ${build_alias} ]\n+    then\n+      dummy=if$$\n+      cat >$dummy.c <<EOF\n+#include <features.h>                      \n+main(argc, argv)\n+     int argc;          \n+     char *argv[];\n+{\n+  printf(\"%d\\n\", __GLIBC_MINOR__);\n+  return 0;\n+}\n+EOF\n+      ${CC-cc} $dummy.c -o $dummy 2>/dev/null\n+      if [ \"$?\" = 0 ]\n+      then\n+\tlibc_interface=-libc6.`./$dummy`-\n+\trm -f $dummy.c $dummy\n+      else\n+\t# It should never happen.\n+\techo \"Cannot find the GNU C library minor version number.\" >&2\n+\trm -f $dummy.c $dummy\n+\texit 1\n+      fi\n+    else\n+      # Cross compiling. Assume glibc 2.1.\n+      libc_interface=-libc6.1-\n+    fi\n+    ;;\n+  *)\n+    libc_interface=-\n+    ;;\n+  esac\n+fi"}, {"sha": "d194ff11737d2ccf1f5ba21600da49ce88e591d1", "filename": "configure", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3cbd1056018f77767c51169da39a6afe46bad11/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3cbd1056018f77767c51169da39a6afe46bad11/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=a3cbd1056018f77767c51169da39a6afe46bad11", "patch": "@@ -1259,7 +1259,8 @@ EOF\n \t        if test x${enable_version_specific_runtime_libs} = xyes; then\n \t\t    echo gxx_include_dir = '${libsubdir}/include/g++' >> ${Makefile}\n \t\telse\n-\t\t    echo gxx_include_dir = '${prefix}/include/g++' >> ${Makefile}\n+\t\t    . ${topsrcdir}/config.if\n+\t\t    echo gxx_include_dir = '${prefix}/include/g++'-${libstdcxx_interface} >> ${Makefile}\n \t\tfi\n \t    else\n \t\techo gxx_include_dir = ${gxx_include_dir} >> ${Makefile}"}]}