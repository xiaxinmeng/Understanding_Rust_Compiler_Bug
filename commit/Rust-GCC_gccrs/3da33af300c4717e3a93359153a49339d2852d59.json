{"sha": "3da33af300c4717e3a93359153a49339d2852d59", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2RhMzNhZjMwMGM0NzE3ZTNhOTMzNTkxNTNhNDkzMzlkMjg1MmQ1OQ==", "commit": {"author": {"name": "Matthias Klose", "email": "doko@gcc.gnu.org", "date": "2001-12-14T22:46:31Z"}, "committer": {"name": "Matthias Klose", "email": "doko@gcc.gnu.org", "date": "2001-12-14T22:46:31Z"}, "message": "texi2pod.pl: Merge changes from binutils' texi2pod.pl.\n\n2001-12-12  Matthias Klose  <doko@debian.org>\n\n\t* texi2pod.pl: Merge changes from binutils' texi2pod.pl. Allows\n\tgeneration of more than one man page from one source.\n\tAdd '-' to set of valid chars for an identifier.\n\tLet -D option accept flags of the form <flag>=<value>.\n\tUse \\s+ for whitespace detection in '@c man' lines.\n\tHandle @set and @clear independent of $output.\n\tSubstitute all @value{}'s in a line.\n\nFrom-SVN: r48015", "tree": {"sha": "49f0e3b0355de1a90e2f2c4b034ac8cbdd165d4d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/49f0e3b0355de1a90e2f2c4b034ac8cbdd165d4d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3da33af300c4717e3a93359153a49339d2852d59", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3da33af300c4717e3a93359153a49339d2852d59", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3da33af300c4717e3a93359153a49339d2852d59", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3da33af300c4717e3a93359153a49339d2852d59/comments", "author": null, "committer": null, "parents": [{"sha": "449d2be3bc8e017c4f4d8cd732d283b51c0819a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/449d2be3bc8e017c4f4d8cd732d283b51c0819a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/449d2be3bc8e017c4f4d8cd732d283b51c0819a2"}], "stats": {"total": 62, "additions": 49, "deletions": 13}, "files": [{"sha": "14ce2080fe02ed065ad2ae7bcb99638ea4158c0a", "filename": "contrib/ChangeLog", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3da33af300c4717e3a93359153a49339d2852d59/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3da33af300c4717e3a93359153a49339d2852d59/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=3da33af300c4717e3a93359153a49339d2852d59", "patch": "@@ -1,3 +1,13 @@\n+2001-12-12  Matthias Klose  <doko@debian.org>\n+\n+\t* texi2pod.pl: Merge changes from binutils' texi2pod.pl. Allows\n+\tgeneration of more than one man page from one source.\n+\tAdd '-' to set of valid chars for an identifier.\n+\tLet -D option accept flags of the form <flag>=<value>.\n+\tUse \\s+ for whitespace detection in '@c man' lines.\n+\tHandle @set and @clear independent of $output.\n+\tSubstitute all @value{}'s in a line.\n+\n 2001-11-14  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* texi2pod.pl: Handle @ifnottex, @iftex and @display.  Handle @var\n@@ -16,13 +26,13 @@\n 2001-09-07  Richard Sandiford  <rsandifo@redhat.com>\n \n \tRevert:\n-\t* gcc_update: (files_and_dependencies) Add gcc/java/parse.c \n+\t* gcc_update: (files_and_dependencies) Add gcc/java/parse.c\n \tgcc/java/parse-scan.c and gcc/java/keyword.h to list of files to\n \ttouch.\n \n 2001-09-04  David.Billinghurst <David.Billinghurst@riotinto.com>\n \n-\t* gcc_update: (files_and_dependencies) Add gcc/java/parse.c \n+\t* gcc_update: (files_and_dependencies) Add gcc/java/parse.c\n \tgcc/java/parse-scan.c and gcc/java/keyword.h to list of files to\n \ttouch.\n \n@@ -46,7 +56,7 @@ Fri Jul 27 18:01:21 CEST 2001  Jan Hubicka  <jh@suse.cz>\n \n \t* gcc_update: Dump timestamp in LAST_UPDATED.\n \n-2001-07-26  Andreas Jaeger  <aj@suse.de>, \n+2001-07-26  Andreas Jaeger  <aj@suse.de>,\n \t    Hans-Peter Nilsson <hp@bitrange.com>\n \n \t* analyze_brprob: Fix documentation."}, {"sha": "770671a17b5dd796a19930b851263aea9a8560e2", "filename": "contrib/texi2pod.pl", "status": "modified", "additions": 36, "deletions": 10, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3da33af300c4717e3a93359153a49339d2852d59/contrib%2Ftexi2pod.pl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3da33af300c4717e3a93359153a49339d2852d59/contrib%2Ftexi2pod.pl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Ftexi2pod.pl?ref=3da33af300c4717e3a93359153a49339d2852d59", "patch": "@@ -41,11 +41,13 @@\n \t} else {\n \t    $flag = shift;\n \t}\n+\t$value = \"\";\n+\t($flag, $value) = ($flag =~ /^([^=]+)(?:=(.+))?/);\n \tdie \"no flag specified for -D\\n\"\n \t    unless $flag ne \"\";\n-\tdie \"flags may only contain letters, digits, hyphens, and underscores\\n\"\n+\tdie \"flags may only contain letters, digits, hyphens, dashes and underscores\\n\"\n \t    unless $flag =~ /^[a-zA-Z0-9_-]+$/;\n-\t$defs{$flag} = \"\";\n+\t$defs{$flag} = $value;\n     } elsif (/^-/) {\n \tusage();\n     } else {\n@@ -73,24 +75,43 @@\n \t |node\t\t\t# @node: useful only in .info file\n \t |(?:end\\s+)?ifnottex   # @ifnottex .. @end ifnottex: use contents\n \t)\\b/x and next;\n-    \n+\n     chomp;\n \n     # Look for filename and title markers.\n     /^\\@setfilename\\s+([^.]+)/ and $fn = $1, next;\n-    /^\\@settitle\\s+([^.]+)/ and $tl = $1, next;\n+    /^\\@settitle\\s+([^.]+)/ and $tl = postprocess($1), next;\n+\n+    # Identify a man title but keep only the one we are interested in.\n+    /^\\@c\\s+man\\s+title\\s+([A-Za-z0-9-]+)\\s+(.+)/ and do {\n+\tif (exists $defs{$1}) {\n+\t    $fn = $1;\n+\t    $tl = postprocess($2);\n+\t}\n+\tnext;\n+    };\n \n     # Look for blocks surrounded by @c man begin SECTION ... @c man end.\n     # This really oughta be @ifman ... @end ifman and the like, but such\n     # would require rev'ing all other Texinfo translators.\n-    /^\\@c man begin ([A-Z]+)/ and $sect = $1, $output = 1, next;\n-    /^\\@c man end/ and do {\n+    /^\\@c\\s+man\\s+begin\\s+([A-Z]+)\\s+([A-Za-z0-9-]+)/ and do {\n+\t$output = 1 if exists $defs{$2};\n+        $sect = $1;\n+\tnext;\n+    };\n+    /^\\@c\\s+man\\s+begin\\s+([A-Z]+)/ and $sect = $1, $output = 1, next;\n+    /^\\@c\\s+man\\s+end/ and do {\n \t$sects{$sect} = \"\" unless exists $sects{$sect};\n \t$sects{$sect} .= postprocess($section);\n \t$section = \"\";\n \t$output = 0;\n \tnext;\n     };\n+\n+    # handle variables\n+    /^\\@set\\s+([a-zA-Z0-9_-]+)\\s*(.*)$/ and $defs{$1} = $2, next;\n+    /^\\@clear\\s+([a-zA-Z0-9_-]+)/ and delete $defs{$1}, next;\n+\n     next unless $output;\n \n     # Discard comments.  (Can't do it above, because then we'd never see\n@@ -188,8 +209,6 @@\n     }\n \n     # Single line command handlers.\n-    /^\\@set\\s+([a-zA-Z0-9_-]+)\\s*(.*)$/ and $defs{$1} = $2, next;\n-    /^\\@clear\\s+([a-zA-Z0-9_-]+)/ and delete $defs{$1}, next;\n \n     /^\\@(?:section|unnumbered|unnumberedsec|center)\\s+(.+)$/ and $_ = \"\\n=head2 $1\\n\";\n     /^\\@subsection\\s+(.+)$/ and $_ = \"\\n=head3 $1\\n\";\n@@ -274,7 +293,15 @@ sub postprocess\n     local $_ = $_[0];\n \n     # @value{foo} is replaced by whatever 'foo' is defined as.\n-    s/\\@value\\{([a-zA-Z0-9_-]+)\\}/$defs{$1}/g;\n+    while (m/(\\@value\\{([a-zA-Z0-9_-]+)\\})/g) {\n+\tif (! exists $defs{$2}) {\n+\t    print STDERR \"Option $2 not defined\\n\";\n+\t    s/\\Q$1\\E//;\n+\t} else {\n+\t    $value = $defs{$2};\n+\t    s/\\Q$1\\E/$value/;\n+\t}\n+    }\n \n     # Formatting commands.\n     # Temporary escape for @r.\n@@ -355,4 +382,3 @@ sub add_footnote\n     $sects{FOOTNOTES} .= $_[0];\n     $sects{FOOTNOTES} .= \"\\n\\n\";\n }\n-    "}]}