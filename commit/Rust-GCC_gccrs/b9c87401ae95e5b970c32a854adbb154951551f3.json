{"sha": "b9c87401ae95e5b970c32a854adbb154951551f3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjljODc0MDFhZTk1ZTViOTcwYzMyYTg1NGFkYmIxNTQ5NTE1NTFmMw==", "commit": {"author": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2003-09-06T15:44:34Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2003-09-06T15:44:34Z"}, "message": "re PR c++/11595 (crash on duplicate label definition)\n\n\tPR c++/11595\n\t* decl.c (define_label): Remove unreachable timevar pop.\n\tAlways return the decl, even if the definition is invalid.\n\nFrom-SVN: r71138", "tree": {"sha": "78a855038664b00d74ef9e6d943946875e5047f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78a855038664b00d74ef9e6d943946875e5047f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9c87401ae95e5b970c32a854adbb154951551f3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9c87401ae95e5b970c32a854adbb154951551f3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9c87401ae95e5b970c32a854adbb154951551f3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9c87401ae95e5b970c32a854adbb154951551f3/comments", "author": null, "committer": null, "parents": [{"sha": "d85a0aae6d490c98756dee915631a41cc3bab370", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d85a0aae6d490c98756dee915631a41cc3bab370", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d85a0aae6d490c98756dee915631a41cc3bab370"}], "stats": {"total": 17, "additions": 10, "deletions": 7}, "files": [{"sha": "49782e3f3b1bf2536f966bd5143632899f64be80", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9c87401ae95e5b970c32a854adbb154951551f3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9c87401ae95e5b970c32a854adbb154951551f3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b9c87401ae95e5b970c32a854adbb154951551f3", "patch": "@@ -1,3 +1,9 @@\n+2003-09-06  Steven Bosscher  <steven@gcc.gnu.org>\n+\n+\tPR c++/11595\n+\t* decl.c (define_label): Remove unreachable timevar pop.\n+\tAlways return the decl, even if the definition is invalid.\n+\n 2003-09-06  Nathan Sidwell  <nathan@codesourcery.com>\n \n \tPR c++/12167"}, {"sha": "c11a7c57404612fac4317145114784151336444e", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9c87401ae95e5b970c32a854adbb154951551f3/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9c87401ae95e5b970c32a854adbb154951551f3/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=b9c87401ae95e5b970c32a854adbb154951551f3", "patch": "@@ -4937,8 +4937,7 @@ check_goto (tree decl)\n }\n \n /* Define a label, specifying the location in the source file.\n-   Return the LABEL_DECL node for the label, if the definition is valid.\n-   Otherwise return 0.  */\n+   Return the LABEL_DECL node for the label.  */\n \n tree\n define_label (location_t location, tree name)\n@@ -4961,10 +4960,7 @@ define_label (location_t location, tree name)\n     pedwarn (\"label named wchar_t\");\n \n   if (DECL_INITIAL (decl) != NULL_TREE)\n-    {\n-      error (\"duplicate label `%D'\", decl);\n-      POP_TIMEVAR_AND_RETURN (TV_NAME_LOOKUP, NULL_TREE);\n-    }\n+    error (\"duplicate label `%D'\", decl);\n   else\n     {\n       /* Mark label as having been defined.  */\n@@ -4977,9 +4973,10 @@ define_label (location_t location, tree name)\n \t  ent->binding_level = current_binding_level;\n \t}\n       check_previous_gotos (decl);\n-      POP_TIMEVAR_AND_RETURN (TV_NAME_LOOKUP, decl);\n     }\n+\n   timevar_pop (TV_NAME_LOOKUP);\n+  return decl;\n }\n \n struct cp_switch"}]}