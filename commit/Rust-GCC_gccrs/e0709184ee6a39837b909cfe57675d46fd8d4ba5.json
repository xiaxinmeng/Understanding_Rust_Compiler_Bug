{"sha": "e0709184ee6a39837b909cfe57675d46fd8d4ba5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTA3MDkxODRlZTZhMzk4MzdiOTA5Y2ZlNTc2NzVkNDZmZDhkNGJhNQ==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2015-02-05T11:11:49Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-02-05T11:11:49Z"}, "message": "sem_prag.adb (Set_Elab_Unit_Name): New name for Set_Unit_Name\n\n2015-02-05  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_prag.adb (Set_Elab_Unit_Name): New name for Set_Unit_Name\n\t(Analyze_Pragma): Change Set_Unit_Name to Set_Elab_Unit_Name\n\t(Set_Elab_Unit_Name): Generate reference for Elaborate[_All]\n\t* sem_warn.adb (Warn_On_Unreferenced_Entity): Suppress warning\n\tfor exported entity.\n\nFrom-SVN: r220443", "tree": {"sha": "4b51ff08e463d608479520d9808b97c35a22a077", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4b51ff08e463d608479520d9808b97c35a22a077"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0709184ee6a39837b909cfe57675d46fd8d4ba5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0709184ee6a39837b909cfe57675d46fd8d4ba5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0709184ee6a39837b909cfe57675d46fd8d4ba5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0709184ee6a39837b909cfe57675d46fd8d4ba5/comments", "author": null, "committer": null, "parents": [{"sha": "57979da1a8af9ae176809eee99390d6401ec389e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57979da1a8af9ae176809eee99390d6401ec389e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57979da1a8af9ae176809eee99390d6401ec389e"}], "stats": {"total": 30, "additions": 20, "deletions": 10}, "files": [{"sha": "f6c096b1d48beb17b0a984f96f9bcd8cd54839fb", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0709184ee6a39837b909cfe57675d46fd8d4ba5/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0709184ee6a39837b909cfe57675d46fd8d4ba5/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e0709184ee6a39837b909cfe57675d46fd8d4ba5", "patch": "@@ -1,3 +1,11 @@\n+2015-02-05  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_prag.adb (Set_Elab_Unit_Name): New name for Set_Unit_Name\n+\t(Analyze_Pragma): Change Set_Unit_Name to Set_Elab_Unit_Name\n+\t(Set_Elab_Unit_Name): Generate reference for Elaborate[_All]\n+\t* sem_warn.adb (Warn_On_Unreferenced_Entity): Suppress warning\n+\tfor exported entity.\n+\n 2015-02-05  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* sem_prag.adb (Check_Pragma_Conformance): Add"}, {"sha": "108c99190c2a9753d86b354e161cfda8cd45622e", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0709184ee6a39837b909cfe57675d46fd8d4ba5/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0709184ee6a39837b909cfe57675d46fd8d4ba5/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=e0709184ee6a39837b909cfe57675d46fd8d4ba5", "patch": "@@ -279,7 +279,7 @@ package body Sem_Prag is\n    --  name _Pre, _Post, _Invariant, or _Type_Invariant. Used by pragmas\n    --  Check, Check_Policy.\n \n-   procedure Set_Unit_Name (N : Node_Id; With_Item : Node_Id);\n+   procedure Set_Elab_Unit_Name (N : Node_Id; With_Item : Node_Id);\n    --  Place semantic information on the argument of an Elaborate/Elaborate_All\n    --  pragma. Entity name for unit and its parents is taken from item in\n    --  previous with_clause that mentions the unit.\n@@ -13221,8 +13221,7 @@ package body Sem_Prag is\n                     and then Same_Name (Name (Citem), Get_Pragma_Arg (Arg))\n                   then\n                      Set_Elaborate_Present (Citem, True);\n-                     Set_Unit_Name (Get_Pragma_Arg (Arg), Name (Citem));\n-                     Generate_Reference (Entity (Name (Citem)), Citem);\n+                     Set_Elab_Unit_Name (Get_Pragma_Arg (Arg), Name (Citem));\n \n                      --  With the pragma present, elaboration calls on\n                      --  subprograms from the named unit need no further\n@@ -13319,7 +13318,7 @@ package body Sem_Prag is\n                     and then Same_Name (Name (Citem), Get_Pragma_Arg (Arg))\n                   then\n                      Set_Elaborate_All_Present (Citem, True);\n-                     Set_Unit_Name (Get_Pragma_Arg (Arg), Name (Citem));\n+                     Set_Elab_Unit_Name (Get_Pragma_Arg (Arg), Name (Citem));\n \n                      --  Suppress warnings and elaboration checks on the named\n                      --  unit if the pragma is in the current compilation, as\n@@ -21061,7 +21060,7 @@ package body Sem_Prag is\n                           (Cunit_Entity\n                              (Get_Source_Unit\n                                 (Library_Unit (Citem))));\n-                        Set_Unit_Name\n+                        Set_Elab_Unit_Name\n                           (Get_Pragma_Arg (Arg_Node), Name (Citem));\n                         exit;\n                      end if;\n@@ -26582,11 +26581,11 @@ package body Sem_Prag is\n       end if;\n    end Set_Encoded_Interface_Name;\n \n-   -------------------\n-   -- Set_Unit_Name --\n-   -------------------\n+   ------------------------\n+   -- Set_Elab_Unit_Name --\n+   ------------------------\n \n-   procedure Set_Unit_Name (N : Node_Id; With_Item : Node_Id) is\n+   procedure Set_Elab_Unit_Name (N : Node_Id; With_Item : Node_Id) is\n       Pref : Node_Id;\n       Scop : Entity_Id;\n \n@@ -26613,6 +26612,8 @@ package body Sem_Prag is\n \n          Set_Entity (Pref, Scop);\n       end if;\n-   end Set_Unit_Name;\n+\n+      Generate_Reference (Entity (With_Item), N, Set_Ref => False);\n+   end Set_Elab_Unit_Name;\n \n end Sem_Prag;"}, {"sha": "f0e0ec6ca1dd76fe91e3fa0ac325aac660ce4725", "filename": "gcc/ada/sem_warn.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0709184ee6a39837b909cfe57675d46fd8d4ba5/gcc%2Fada%2Fsem_warn.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0709184ee6a39837b909cfe57675d46fd8d4ba5/gcc%2Fada%2Fsem_warn.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.adb?ref=e0709184ee6a39837b909cfe57675d46fd8d4ba5", "patch": "@@ -4009,6 +4009,7 @@ package body Sem_Warn is\n         and then not Has_Pragma_Unreferenced_Check_Spec (E)\n         and then not Warnings_Off_Check_Spec (E)\n         and then not Has_Junk_Name (Spec_E)\n+        and then not Is_Exported (Spec_E)\n       then\n          case Ekind (E) is\n             when E_Variable =>"}]}