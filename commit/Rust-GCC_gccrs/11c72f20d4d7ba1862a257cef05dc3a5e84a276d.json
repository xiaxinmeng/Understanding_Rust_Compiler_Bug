{"sha": "11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "node_id": "C_kwDOANBUbNoAKDExYzcyZjIwZDRkN2JhMTg2MmEyNTdjZWYwNWRjM2E1ZTg0YTI3NmQ", "commit": {"author": {"name": "Cui,Lili", "email": "lili.cui@intel.com", "date": "2022-09-29T06:28:06Z"}, "committer": {"name": "Cui,Lili", "email": "lili.cui@intel.com", "date": "2022-10-12T09:31:23Z"}, "message": "Remove AVX512_VP2INTERSECT from PTA_SAPPHIRERAPIDS\n\ngcc/ChangeLog:\n\n\t* config/i386/driver-i386.cc (host_detect_local_cpu):\n\tMove sapphirerapids out of AVX512_VP2INTERSECT.\n\t* config/i386/i386.h: Remove AVX512_VP2INTERSECT from PTA_SAPPHIRERAPIDS\n\t* doc/invoke.texi: Remove AVX512_VP2INTERSECT from SAPPHIRERAPIDS", "tree": {"sha": "b99176b92bcf815c268d9d52ea75b748d3d50eaa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b99176b92bcf815c268d9d52ea75b748d3d50eaa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/comments", "author": {"login": "cuilili8868", "id": 54013017, "node_id": "MDQ6VXNlcjU0MDEzMDE3", "avatar_url": "https://avatars.githubusercontent.com/u/54013017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuilili8868", "html_url": "https://github.com/cuilili8868", "followers_url": "https://api.github.com/users/cuilili8868/followers", "following_url": "https://api.github.com/users/cuilili8868/following{/other_user}", "gists_url": "https://api.github.com/users/cuilili8868/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuilili8868/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuilili8868/subscriptions", "organizations_url": "https://api.github.com/users/cuilili8868/orgs", "repos_url": "https://api.github.com/users/cuilili8868/repos", "events_url": "https://api.github.com/users/cuilili8868/events{/privacy}", "received_events_url": "https://api.github.com/users/cuilili8868/received_events", "type": "User", "site_admin": false}, "committer": {"login": "cuilili8868", "id": 54013017, "node_id": "MDQ6VXNlcjU0MDEzMDE3", "avatar_url": "https://avatars.githubusercontent.com/u/54013017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cuilili8868", "html_url": "https://github.com/cuilili8868", "followers_url": "https://api.github.com/users/cuilili8868/followers", "following_url": "https://api.github.com/users/cuilili8868/following{/other_user}", "gists_url": "https://api.github.com/users/cuilili8868/gists{/gist_id}", "starred_url": "https://api.github.com/users/cuilili8868/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cuilili8868/subscriptions", "organizations_url": "https://api.github.com/users/cuilili8868/orgs", "repos_url": "https://api.github.com/users/cuilili8868/repos", "events_url": "https://api.github.com/users/cuilili8868/events{/privacy}", "received_events_url": "https://api.github.com/users/cuilili8868/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "80077aea452dcb9df2fc4274c7c45cca16076311", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80077aea452dcb9df2fc4274c7c45cca16076311", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80077aea452dcb9df2fc4274c7c45cca16076311"}], "stats": {"total": 28, "additions": 12, "deletions": 16}, "files": [{"sha": "ef567045c6796b408c9d82772300ccb26bf2fa47", "filename": "gcc/config/i386/driver-i386.cc", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/gcc%2Fconfig%2Fi386%2Fdriver-i386.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/gcc%2Fconfig%2Fi386%2Fdriver-i386.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fdriver-i386.cc?ref=11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "patch": "@@ -589,15 +589,12 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n \t      /* This is unknown family 0x6 CPU.  */\n \t      if (has_feature (FEATURE_AVX))\n \t\t{\n+\t\t  /* Assume Tiger Lake */\n \t\t  if (has_feature (FEATURE_AVX512VP2INTERSECT))\n-\t\t    {\n-\t\t      if (has_feature (FEATURE_TSXLDTRK))\n-\t\t\t/* Assume Sapphire Rapids.  */\n-\t\t\tcpu = \"sapphirerapids\";\n-\t\t      else\n-\t\t\t/* Assume Tiger Lake */\n-\t\t\tcpu = \"tigerlake\";\n-\t\t    }\n+\t\t    cpu = \"tigerlake\";\n+\t\t  /* Assume Sapphire Rapids.  */\n+\t\t  else if (has_feature (FEATURE_TSXLDTRK))\n+\t\t    cpu = \"sapphirerapids\";\n \t\t  /* Assume Cooper Lake */\n \t\t  else if (has_feature (FEATURE_AVX512BF16))\n \t\t    cpu = \"cooperlake\";"}, {"sha": "372a2cff8feb989799786d4a91dc53cad525d6ae", "filename": "gcc/config/i386/i386.h", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/gcc%2Fconfig%2Fi386%2Fi386.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/gcc%2Fconfig%2Fi386%2Fi386.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.h?ref=11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "patch": "@@ -2326,10 +2326,9 @@ constexpr wide_int_bitmask PTA_ICELAKE_SERVER = PTA_ICELAKE_CLIENT\n constexpr wide_int_bitmask PTA_TIGERLAKE = PTA_ICELAKE_CLIENT | PTA_MOVDIRI\n   | PTA_MOVDIR64B | PTA_CLWB | PTA_AVX512VP2INTERSECT | PTA_KL | PTA_WIDEKL;\n constexpr wide_int_bitmask PTA_SAPPHIRERAPIDS = PTA_ICELAKE_SERVER | PTA_MOVDIRI\n-  | PTA_MOVDIR64B | PTA_AVX512VP2INTERSECT | PTA_ENQCMD | PTA_CLDEMOTE\n-  | PTA_PTWRITE | PTA_WAITPKG | PTA_SERIALIZE | PTA_TSXLDTRK | PTA_AMX_TILE\n-  | PTA_AMX_INT8 | PTA_AMX_BF16 | PTA_UINTR | PTA_AVXVNNI | PTA_AVX512FP16\n-  | PTA_AVX512BF16;\n+  | PTA_MOVDIR64B | PTA_ENQCMD | PTA_CLDEMOTE | PTA_PTWRITE | PTA_WAITPKG\n+  | PTA_SERIALIZE | PTA_TSXLDTRK | PTA_AMX_TILE | PTA_AMX_INT8 | PTA_AMX_BF16\n+  | PTA_UINTR | PTA_AVXVNNI | PTA_AVX512FP16 | PTA_AVX512BF16;\n constexpr wide_int_bitmask PTA_KNL = PTA_BROADWELL | PTA_AVX512PF\n   | PTA_AVX512ER | PTA_AVX512F | PTA_AVX512CD | PTA_PREFETCHWT1;\n constexpr wide_int_bitmask PTA_BONNELL = PTA_CORE2 | PTA_MOVBE;"}, {"sha": "a9ecc4426a4f19f9cd145febaf1f300bad8cc437", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11c72f20d4d7ba1862a257cef05dc3a5e84a276d/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=11c72f20d4d7ba1862a257cef05dc3a5e84a276d", "patch": "@@ -32057,11 +32057,11 @@ Intel sapphirerapids CPU with 64-bit extensions, MOVBE, MMX, SSE, SSE2, SSE3,\n SSSE3, SSE4.1, SSE4.2, POPCNT, CX16, SAHF, FXSR, AVX, XSAVE, PCLMUL, FSGSBASE,\n RDRND, F16C, AVX2, BMI, BMI2, LZCNT, FMA, MOVBE, HLE, RDSEED, ADCX, PREFETCHW,\n AES, CLFLUSHOPT, XSAVEC, XSAVES, SGX, AVX512F, AVX512VL, AVX512BW, AVX512DQ,\n-AVX512CD, PKU, AVX512VBMI, AVX512IFMA, SHA, AVX512VNNI, GFNI, VAES, AVX512VBMI2\n+AVX512CD, PKU, AVX512VBMI, AVX512IFMA, SHA, AVX512VNNI, GFNI, VAES, AVX512VBMI2,\n VPCLMULQDQ, AVX512BITALG, RDPID, AVX512VPOPCNTDQ, PCONFIG, WBNOINVD, CLWB,\n-MOVDIRI, MOVDIR64B, AVX512VP2INTERSECT, ENQCMD, CLDEMOTE, PTWRITE, WAITPKG,\n-SERIALIZE, TSXLDTRK, UINTR, AMX-BF16, AMX-TILE, AMX-INT8, AVX-VNNI, AVX512FP16\n-and AVX512BF16 instruction set support.\n+MOVDIRI, MOVDIR64B, ENQCMD, CLDEMOTE, PTWRITE, WAITPKG, SERIALIZE, TSXLDTRK,\n+UINTR, AMX-BF16, AMX-TILE, AMX-INT8, AVX-VNNI, AVX512FP16 and AVX512BF16\n+instruction set support.\n \n @item alderlake\n Intel Alderlake CPU with 64-bit extensions, MOVBE, MMX, SSE, SSE2, SSE3, SSSE3,"}]}