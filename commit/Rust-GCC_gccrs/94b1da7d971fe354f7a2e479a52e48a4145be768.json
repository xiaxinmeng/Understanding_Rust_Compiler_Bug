{"sha": "94b1da7d971fe354f7a2e479a52e48a4145be768", "node_id": "C_kwDOANBUbNoAKDk0YjFkYTdkOTcxZmUzNTRmN2EyZTQ3OWE1MmU0OGE0MTQ1YmU3Njg", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-10-22T15:42:12Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-10-22T15:42:12Z"}, "message": "Merge #763\n\n763: Cleanup IR symbol names in gimple r=philberty a=philberty\n\nWhen we have generic code the full as_string is too verbose for symbol\r\nnames. This changes the ir_symbol_names to become the name of the types\r\nnot the full debug as_string version.\r\n\r\nFixes #745\n\nCo-authored-by: Philip Herron <philip.herron@embecosm.com>", "tree": {"sha": "d6b932d3bc229a020d16642f8c5cd1e16718dc54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6b932d3bc229a020d16642f8c5cd1e16718dc54"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94b1da7d971fe354f7a2e479a52e48a4145be768", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJhctvUCRBK7hj4Ov3rIwAAFocIADB5iEJ6LeFXiCOqH82ZrEfd\nSrfAlp1/Qkha5o9VraOG/BOxu241giDPhBD6w46APR3GNXZX9yxPh+OtSjUxY7v0\nNcHu88RTsx7h0FXdltZgSLOoyzc620p/SIJX3sJ2kNnYKj24UnyaIs5rM1OIN/m6\ngp+jNsTWyVHC1FGmwzYIefw+W2IC0A5onBz5YUQGBTe8iexprwlKiISaUrQSvFty\n8fNu8s4Sy9nGeCilL70ebruelzUoOHhSbniOtuaPaIPbs55DGlBGk/veWP6X2zz+\nRMMfy9DpqQypRE6GzcuXeRMLieKlnTRCrYFhXd3o1C6Ex6MUMqBH1hMJh6KuuHU=\n=xjbD\n-----END PGP SIGNATURE-----\n", "payload": "tree d6b932d3bc229a020d16642f8c5cd1e16718dc54\nparent 8e6c5a32b6e2c1ade6f1a835be2c2a26788db544\nparent fb1d2a2ef2e47ce0be934d008c6231e00c7d7f86\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1634917332 +0000\ncommitter GitHub <noreply@github.com> 1634917332 +0000\n\nMerge #763\n\n763: Cleanup IR symbol names in gimple r=philberty a=philberty\n\nWhen we have generic code the full as_string is too verbose for symbol\r\nnames. This changes the ir_symbol_names to become the name of the types\r\nnot the full debug as_string version.\r\n\r\nFixes #745\n\nCo-authored-by: Philip Herron <philip.herron@embecosm.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94b1da7d971fe354f7a2e479a52e48a4145be768", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94b1da7d971fe354f7a2e479a52e48a4145be768", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94b1da7d971fe354f7a2e479a52e48a4145be768/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8e6c5a32b6e2c1ade6f1a835be2c2a26788db544", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e6c5a32b6e2c1ade6f1a835be2c2a26788db544", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e6c5a32b6e2c1ade6f1a835be2c2a26788db544"}, {"sha": "fb1d2a2ef2e47ce0be934d008c6231e00c7d7f86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb1d2a2ef2e47ce0be934d008c6231e00c7d7f86", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb1d2a2ef2e47ce0be934d008c6231e00c7d7f86"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "96a06e69c23d202a8a73c09ae29a361f13d4b07c", "filename": "gcc/rust/typecheck/rust-tyty.cc", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b1da7d971fe354f7a2e479a52e48a4145be768/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b1da7d971fe354f7a2e479a52e48a4145be768/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.cc?ref=94b1da7d971fe354f7a2e479a52e48a4145be768", "patch": "@@ -1982,6 +1982,20 @@ ParamType::as_string () const\n   return lookup->as_string ();\n }\n \n+std::string\n+ParamType::get_name () const\n+{\n+  if (get_ref () == get_ty_ref ())\n+    return get_symbol ();\n+\n+  auto context = Resolver::TypeCheckContext::get ();\n+  BaseType *lookup = nullptr;\n+  bool ok = context->lookup_type (get_ty_ref (), &lookup);\n+  rust_assert (ok);\n+\n+  return lookup->get_name ();\n+}\n+\n BaseType *\n ParamType::unify (BaseType *other)\n {"}, {"sha": "be80f77ace42aaca8f17d2b831848907158add0b", "filename": "gcc/rust/typecheck/rust-tyty.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94b1da7d971fe354f7a2e479a52e48a4145be768/gcc%2Frust%2Ftypecheck%2Frust-tyty.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94b1da7d971fe354f7a2e479a52e48a4145be768/gcc%2Frust%2Ftypecheck%2Frust-tyty.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Ftypecheck%2Frust-tyty.h?ref=94b1da7d971fe354f7a2e479a52e48a4145be768", "patch": "@@ -545,7 +545,7 @@ class ParamType : public BaseType\n \n   BaseType *resolve () const;\n \n-  std::string get_name () const override final { return as_string (); }\n+  std::string get_name () const override final;\n \n   bool is_equal (const BaseType &other) const override;\n \n@@ -680,7 +680,7 @@ class SubstitutionParamMapping\n     : generic (other.generic), param (other.param)\n   {}\n \n-  std::string as_string () const { return param->as_string (); }\n+  std::string as_string () const { return param->get_name (); }\n \n   bool fill_param_ty (BaseType &type, Location locus);\n "}]}