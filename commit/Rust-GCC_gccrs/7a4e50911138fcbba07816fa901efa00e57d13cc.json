{"sha": "7a4e50911138fcbba07816fa901efa00e57d13cc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E0ZTUwOTExMTM4ZmNiYmEwNzgxNmZhOTAxZWZhMDBlNTdkMTNjYw==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-11-04T18:47:16Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-11-04T18:47:16Z"}, "message": "decl2.c (do_nonmember_using_decl): Allow `extern \"C\"' declarations from different namespaces to be combined.\n\n\t* decl2.c (do_nonmember_using_decl): Allow `extern \"C\"'\n\tdeclarations from different namespaces to be combined.\n\nFrom-SVN: r37254", "tree": {"sha": "13fb1de5579a98f4ca62dfa649ee101b5187ac41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/13fb1de5579a98f4ca62dfa649ee101b5187ac41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a4e50911138fcbba07816fa901efa00e57d13cc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a4e50911138fcbba07816fa901efa00e57d13cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a4e50911138fcbba07816fa901efa00e57d13cc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a4e50911138fcbba07816fa901efa00e57d13cc/comments", "author": null, "committer": null, "parents": [{"sha": "9cf11a478df93ab7640e207c7e73f53eba6e36c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9cf11a478df93ab7640e207c7e73f53eba6e36c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9cf11a478df93ab7640e207c7e73f53eba6e36c8"}], "stats": {"total": 30, "additions": 26, "deletions": 4}, "files": [{"sha": "a72b74c40a35c1db3834ffa89ff030bb27e34f0d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4e50911138fcbba07816fa901efa00e57d13cc/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4e50911138fcbba07816fa901efa00e57d13cc/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=7a4e50911138fcbba07816fa901efa00e57d13cc", "patch": "@@ -1,3 +1,8 @@\n+2000-11-04  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* decl2.c (do_nonmember_using_decl): Allow `extern \"C\"'\n+\tdeclarations from different namespaces to be combined.\n+\n 2000-11-03  Zack Weinberg  <zack@wolery.stanford.edu>\n \n \t* decl.c: Include tm_p.h."}, {"sha": "1af6d27b207a58e3bc1470e90f8978c616ab0e98", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4e50911138fcbba07816fa901efa00e57d13cc/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4e50911138fcbba07816fa901efa00e57d13cc/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=7a4e50911138fcbba07816fa901efa00e57d13cc", "patch": "@@ -5204,10 +5204,12 @@ do_nonmember_using_decl (scope, name, oldval, oldtype, newval, newtype)\n \t\t  && compparms (TYPE_ARG_TYPES (TREE_TYPE (new_fn)),\n \t\t\t\tTYPE_ARG_TYPES (TREE_TYPE (old_fn))))\n \t\t{\n-\t\t  /* There was already a non-using declaration in\n-\t\t     this scope with the same parameter types.  */\n-\t\t  cp_error (\"`%D' is already declared in this scope\",\n-\t\t\t    name);\n+\t\t  if (!(DECL_EXTERN_C_P (new_fn)\n+\t\t\t&& DECL_EXTERN_C_P (old_fn)))\n+\t\t    /* There was already a non-using declaration in\n+\t\t       this scope with the same parameter types.  */\n+\t\t    cp_error (\"`%D' is already declared in this scope\",\n+\t\t\t      name);\n \t\t  break;\n \t\t}\n \t      else if (duplicate_decls (new_fn, old_fn))"}, {"sha": "522f8aea59ab6d745aab1416c2212828ea7d414e", "filename": "gcc/testsuite/g++.old-deja/g++.ns/using14.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a4e50911138fcbba07816fa901efa00e57d13cc/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Fusing14.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a4e50911138fcbba07816fa901efa00e57d13cc/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Fusing14.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Fusing14.C?ref=7a4e50911138fcbba07816fa901efa00e57d13cc", "patch": "@@ -0,0 +1,15 @@\n+// Build don't link:\n+// Origin: Mark Mitchell <mark@codesourcery.com>\n+\n+extern \"C\" void f ();\n+\n+namespace N {\n+extern \"C\" void f ();\n+}\n+\n+using N::f;\n+\n+void g ()\n+{\n+  f ();\n+}"}]}