{"sha": "b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc1ZDFlMjEwN2QzN2ExYTZkMGZiM2IzYWRjNTZhMjc1ZWQ3MTFiZg==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2011-07-22T15:35:48Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2011-07-22T15:35:48Z"}, "message": "re PR lto/49796 (483.xalancbmk/447.dealII in SPEC CPU 2006 failed to build)\n\n2011-07-22  Martin Jambor  <mjambor@suse.cz>\n\n\tPR lto/49796\n\t* cgraphunit.c (verify_edge_corresponds_to_fndecl): Return false\n\tif decl node is in another partition, call cgraph_get_node only\n\tonce.\n\nFrom-SVN: r176630", "tree": {"sha": "a8fabfc4f373e5ae7182d4eb190354da6077e808", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a8fabfc4f373e5ae7182d4eb190354da6077e808"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e3c666fd0e44831a691ad915af34c21c326c44c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3c666fd0e44831a691ad915af34c21c326c44c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3c666fd0e44831a691ad915af34c21c326c44c3"}], "stats": {"total": 31, "additions": 22, "deletions": 9}, "files": [{"sha": "aae9d0840371b4a2284919ccfbb53d20365c8e2f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf", "patch": "@@ -1,3 +1,10 @@\n+2011-07-22  Martin Jambor  <mjambor@suse.cz>\n+\n+\tPR lto/49796\n+\t* cgraphunit.c (verify_edge_corresponds_to_fndecl): Return false\n+\tif decl node is in another partition, call cgraph_get_node only\n+\tonce.\n+\n 2011-07-22  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config.gcc (x86_64-*-linux*): Set"}, {"sha": "93664f9d8a49fef7c1919af6a5464cd8227304e7", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 15, "deletions": 9, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=b75d1e2107d37a1a6d0fb3b3adc56a275ed711bf", "patch": "@@ -456,17 +456,23 @@ cgraph_debug_gimple_stmt (struct function *this_cfun, gimple stmt)\n static bool\n verify_edge_corresponds_to_fndecl (struct cgraph_edge *e, tree decl)\n {\n-  if (!e->callee->global.inlined_to\n-      && decl\n-      && cgraph_get_node (decl)\n-      && (e->callee->former_clone_of\n-\t  != cgraph_function_or_thunk_node (cgraph_get_node (decl), NULL)->decl)\n+  struct cgraph_node *node;\n+\n+  if (!decl || e->callee->global.inlined_to)\n+    return false;\n+  node = cgraph_get_node (decl);\n+\n+  /* We do not know if a node from a different partition is an alias or what it\n+     aliases and therefore cannot do the former_clone_of check reliably.  */\n+  if (!node || node->in_other_partition)\n+    return false;\n+  node = cgraph_function_or_thunk_node (node, NULL);\n+\n+  if ((e->callee->former_clone_of != node->decl)\n       /* IPA-CP sometimes redirect edge to clone and then back to the former\n \t function.  This ping-pong has to go, eventaully.  */\n-      && (cgraph_function_or_thunk_node (cgraph_get_node (decl), NULL)\n-\t  != cgraph_function_or_thunk_node (e->callee, NULL))\n-      && !clone_of_p (cgraph_get_node (decl),\n-\t\t      e->callee))\n+      && (node != cgraph_function_or_thunk_node (e->callee, NULL))\n+      && !clone_of_p (node, e->callee))\n     return true;\n   else\n     return false;"}]}