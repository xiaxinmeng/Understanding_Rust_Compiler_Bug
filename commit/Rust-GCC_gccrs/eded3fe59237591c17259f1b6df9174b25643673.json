{"sha": "eded3fe59237591c17259f1b6df9174b25643673", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWRlZDNmZTU5MjM3NTkxYzE3MjU5ZjFiNmRmOTE3NGIyNTY0MzY3Mw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@libertysurf.fr", "date": "2017-06-23T17:33:43Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-06-23T17:33:43Z"}, "message": "os-unix-sysdep.c (__cilkrts_getticks): Adjust preprocessor test for SPARC/Linux.\n\n\t* runtime/config/sparc/os-unix-sysdep.c (__cilkrts_getticks): Adjust\n\tpreprocessor test for SPARC/Linux.\n\t* runtime/jmpbuf.h (CILK_[UN]ADJUST_SP): Likewise.\n\nFrom-SVN: r249601", "tree": {"sha": "9faa22bc0830ccca8ce01ec8f0abafdea8201fc5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9faa22bc0830ccca8ce01ec8f0abafdea8201fc5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eded3fe59237591c17259f1b6df9174b25643673", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eded3fe59237591c17259f1b6df9174b25643673", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eded3fe59237591c17259f1b6df9174b25643673", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eded3fe59237591c17259f1b6df9174b25643673/comments", "author": {"login": "ebotcazou", "id": 48091907, "node_id": "MDQ6VXNlcjQ4MDkxOTA3", "avatar_url": "https://avatars.githubusercontent.com/u/48091907?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ebotcazou", "html_url": "https://github.com/ebotcazou", "followers_url": "https://api.github.com/users/ebotcazou/followers", "following_url": "https://api.github.com/users/ebotcazou/following{/other_user}", "gists_url": "https://api.github.com/users/ebotcazou/gists{/gist_id}", "starred_url": "https://api.github.com/users/ebotcazou/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ebotcazou/subscriptions", "organizations_url": "https://api.github.com/users/ebotcazou/orgs", "repos_url": "https://api.github.com/users/ebotcazou/repos", "events_url": "https://api.github.com/users/ebotcazou/events{/privacy}", "received_events_url": "https://api.github.com/users/ebotcazou/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3c76bd9257081e6cbbaecf5bcb57cec64b0a6d31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c76bd9257081e6cbbaecf5bcb57cec64b0a6d31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c76bd9257081e6cbbaecf5bcb57cec64b0a6d31"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "2f81d09545a662609add0980f4ee975f72f1d1ea", "filename": "libcilkrts/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eded3fe59237591c17259f1b6df9174b25643673/libcilkrts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eded3fe59237591c17259f1b6df9174b25643673/libcilkrts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcilkrts%2FChangeLog?ref=eded3fe59237591c17259f1b6df9174b25643673", "patch": "@@ -1,3 +1,9 @@\n+2017-06-23  Eric Botcazou  <ebotcazou@libertysurf.fr>\n+\n+\t* runtime/config/sparc/os-unix-sysdep.c (__cilkrts_getticks): Adjust\n+\tpreprocessor test for SPARC/Linux.\n+\t* runtime/jmpbuf.h (CILK_[UN]ADJUST_SP): Likewise.\n+\n 2017-01-20  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR other/79046"}, {"sha": "a3ede6461a022f83a167457623de13e3289599c3", "filename": "libcilkrts/runtime/config/sparc/os-unix-sysdep.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eded3fe59237591c17259f1b6df9174b25643673/libcilkrts%2Fruntime%2Fconfig%2Fsparc%2Fos-unix-sysdep.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eded3fe59237591c17259f1b6df9174b25643673/libcilkrts%2Fruntime%2Fconfig%2Fsparc%2Fos-unix-sysdep.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcilkrts%2Fruntime%2Fconfig%2Fsparc%2Fos-unix-sysdep.c?ref=eded3fe59237591c17259f1b6df9174b25643673", "patch": "@@ -47,7 +47,7 @@\n  *  for your assistance in helping us improve Cilk Plus.\n  *************************************************************************\n  *\n- * This file contains system-specific code for sparc-based systems\n+ * This file contains system-specific code for SPARC-based systems\n  */\n \n #include \"os.h\"\n@@ -60,7 +60,7 @@\n COMMON_SYSDEP unsigned long long __cilkrts_getticks(void)\n {\n     unsigned long long tick;\n-#ifdef __sparcv9\n+#if defined(__sparcv9) || defined(__arch64__)\n     __asm__ volatile(\"rd %%tick, %0\" : \"=r\"(tick));\n #else\n     __asm__ volatile(\"rd %%tick, %L0\\n\""}, {"sha": "453d26913c4a741a2675b95395571e907fa82fa4", "filename": "libcilkrts/runtime/jmpbuf.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eded3fe59237591c17259f1b6df9174b25643673/libcilkrts%2Fruntime%2Fjmpbuf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eded3fe59237591c17259f1b6df9174b25643673/libcilkrts%2Fruntime%2Fjmpbuf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcilkrts%2Fruntime%2Fjmpbuf.h?ref=eded3fe59237591c17259f1b6df9174b25643673", "patch": "@@ -110,8 +110,8 @@\n /**\n  * @brief Some architecture-dependent stack adjustment.\n  */\n-#if defined(__sparcv9)\n-    // Subtract sparc v9 stack bias so the actual stack starts at the\n+#if defined(__sparcv9) || (defined(__sparc__) && defined(__arch64__))\n+    // Subtract SPARC V9 stack bias so the actual stack starts at the\n     // allocated area.\n #   define CILK_ADJUST_SP(SP) ((SP) - 2047)\n #   define CILK_UNADJUST_SP(SP) ((SP) + 2047)"}]}