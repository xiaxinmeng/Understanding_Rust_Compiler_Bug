{"sha": "83566abf9f4fd5d398c4622e9f40b747e92fa668", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODM1NjZhYmY5ZjRmZDVkMzk4YzQ2MjJlOWY0MGI3NDdlOTJmYTY2OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-03-18T02:30:09Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-03-18T02:30:09Z"}, "message": "* pt.c (push_template_decl): Only check primary templates.\n\nFrom-SVN: r18653", "tree": {"sha": "baebbbd94b6003c736321515284c285aa74848a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/baebbbd94b6003c736321515284c285aa74848a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/83566abf9f4fd5d398c4622e9f40b747e92fa668", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83566abf9f4fd5d398c4622e9f40b747e92fa668", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83566abf9f4fd5d398c4622e9f40b747e92fa668", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83566abf9f4fd5d398c4622e9f40b747e92fa668/comments", "author": null, "committer": null, "parents": [{"sha": "670960acd3003dcf252400039a5c0926b577d414", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/670960acd3003dcf252400039a5c0926b577d414", "html_url": "https://github.com/Rust-GCC/gccrs/commit/670960acd3003dcf252400039a5c0926b577d414"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "216ced7007bd7ceccafdfbade79f01746ea3b2cf", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83566abf9f4fd5d398c4622e9f40b747e92fa668/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83566abf9f4fd5d398c4622e9f40b747e92fa668/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=83566abf9f4fd5d398c4622e9f40b747e92fa668", "patch": "@@ -1,5 +1,7 @@\n Wed Mar 18 00:24:10 1998  Jason Merrill  <jason@yorick.cygnus.com>\n \n+\t* pt.c (push_template_decl): Only check primary templates.\n+\n \t* pt.c (check_explicit_specialization): Complain about default args\n \tin explicit specialization.\n "}, {"sha": "13fd811c785a2a9c333bd090396fbd35c5583fa4", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/83566abf9f4fd5d398c4622e9f40b747e92fa668/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/83566abf9f4fd5d398c4622e9f40b747e92fa668/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=83566abf9f4fd5d398c4622e9f40b747e92fa668", "patch": "@@ -1381,11 +1381,6 @@ push_template_decl (decl)\n   int is_friend = (TREE_CODE (decl) == FUNCTION_DECL\n \t\t   && DECL_FRIEND_P (decl));\n \n-  if (current_lang_name == lang_name_c)\n-    cp_error (\"template with C linkage\");\n-  if (TREE_CODE (decl) == TYPE_DECL && ANON_AGGRNAME_P (DECL_NAME (decl)))\n-    cp_error (\"template class without a name\");\n-\n   if (is_friend)\n     /* For a friend, we want the context of the friend function, not\n        the type of which it is a friend.  */\n@@ -1416,6 +1411,14 @@ push_template_decl (decl)\n   else\n     primary = 0;\n \n+  if (primary)\n+    {\n+      if (current_lang_name == lang_name_c)\n+\tcp_error (\"template with C linkage\");\n+      if (TREE_CODE (decl) == TYPE_DECL && ANON_AGGRNAME_P (DECL_NAME (decl)))\n+\tcp_error (\"template class without a name\");\n+    }\n+\n   /* Partial specialization.  */\n   if (TREE_CODE (decl) == TYPE_DECL && DECL_ARTIFICIAL (decl)\n       && CLASSTYPE_TEMPLATE_SPECIALIZATION (TREE_TYPE (decl)))"}]}