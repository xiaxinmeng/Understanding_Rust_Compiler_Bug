{"sha": "d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac", "node_id": "C_kwDOANBUbNoAKGQzZjdhMmZhNjRmODc3N2NiN2VhZTFiOTlmZjgwZmJlNzE3MDk1YWM", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2021-11-04T16:07:44Z"}, "committer": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2021-11-04T16:10:47Z"}, "message": "Workaround ICE in gimple_call_static_chain_flags\n\ngcc/ChangeLog:\n\n2021-11-04  Jan Hubicka  <hubicka@ucw.cz>\n\n\tPR ipa/103058\n\t* gimple.c (gimple_call_static_chain_flags): Handle case when\n\tnested function does not bind locally.", "tree": {"sha": "fd8ef783271f5692ad49229f2b3be417729adcbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd8ef783271f5692ad49229f2b3be417729adcbf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac/comments", "author": null, "committer": null, "parents": [{"sha": "fae00a0ac0e5687343a60ae02bf60352002ab9aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fae00a0ac0e5687343a60ae02bf60352002ab9aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fae00a0ac0e5687343a60ae02bf60352002ab9aa"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "7a578f5113e823e45363959d44958e8fe8ec3e25", "filename": "gcc/gimple.c", "status": "modified", "additions": 12, "deletions": 1, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac/gcc%2Fgimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac/gcc%2Fgimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple.c?ref=d3f7a2fa64f8777cb7eae1b99ff80fbe717095ac", "patch": "@@ -1666,7 +1666,18 @@ gimple_call_static_chain_flags (const gcall *stmt)\n \t  int modref_flags = summary->static_chain_flags;\n \n \t  /* We have possibly optimized out load.  Be conservative here.  */\n-\t  gcc_checking_assert (node->binds_to_current_def_p ());\n+\t  if (!node->binds_to_current_def_p ())\n+\t    {\n+\t      if ((modref_flags & EAF_UNUSED) && !(flags & EAF_UNUSED))\n+\t\t{\n+\t\t  modref_flags &= ~EAF_UNUSED;\n+\t\t  modref_flags |= EAF_NOESCAPE;\n+\t\t}\n+\t      if ((modref_flags & EAF_NOREAD) && !(flags & EAF_NOREAD))\n+\t\tmodref_flags &= ~EAF_NOREAD;\n+\t      if ((modref_flags & EAF_DIRECT) && !(flags & EAF_DIRECT))\n+\t\tmodref_flags &= ~EAF_DIRECT;\n+\t    }\n \t  if (dbg_cnt (ipa_mod_ref_pta))\n \t    flags |= modref_flags;\n \t}"}]}