{"sha": "7e6fecf5008038b466d350a0d7676f8d8ba59ff1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U2ZmVjZjUwMDgwMzhiNDY2ZDM1MGEwZDc2NzZmOGQ4YmE1OWZmMQ==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-09-17T20:26:21Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-09-17T20:26:21Z"}, "message": "runtime: for FFI, treat directIface types as pointers\n    \n    This only matters on systems that pass a struct with a single pointer\n    field differently than passing a single pointer.  I noticed it on\n    32-bit PPC, where the reflect package TestDirectIfaceMethod failed.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/195878\n\nFrom-SVN: r275814", "tree": {"sha": "a3536079b339f8dd68bb024a5a888f82bee3b328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3536079b339f8dd68bb024a5a888f82bee3b328"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e6fecf5008038b466d350a0d7676f8d8ba59ff1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e6fecf5008038b466d350a0d7676f8d8ba59ff1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e6fecf5008038b466d350a0d7676f8d8ba59ff1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e6fecf5008038b466d350a0d7676f8d8ba59ff1/comments", "author": null, "committer": null, "parents": [{"sha": "033425d0ed0092748fc919e5c40dc47421dcdd89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/033425d0ed0092748fc919e5c40dc47421dcdd89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/033425d0ed0092748fc919e5c40dc47421dcdd89"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "4b7a4b3073b45b3461d9ef1ca7428f8f29789e7c", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e6fecf5008038b466d350a0d7676f8d8ba59ff1/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e6fecf5008038b466d350a0d7676f8d8ba59ff1/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=7e6fecf5008038b466d350a0d7676f8d8ba59ff1", "patch": "@@ -1,4 +1,4 @@\n-7aabaf8623cf88e2378057476a034093abbe5aab\n+09ca3c1ea8a52b5d3d6c4331c59d44e0b6bfab57\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "cd8479ef55145bee54e718483fa437a08af58507", "filename": "libgo/go/runtime/ffi.go", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e6fecf5008038b466d350a0d7676f8d8ba59ff1/libgo%2Fgo%2Fruntime%2Fffi.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e6fecf5008038b466d350a0d7676f8d8ba59ff1/libgo%2Fgo%2Fruntime%2Fffi.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fruntime%2Fffi.go?ref=7e6fecf5008038b466d350a0d7676f8d8ba59ff1", "patch": "@@ -224,6 +224,9 @@ func structToFFI(typ *structtype) *__ffi_type {\n \tif c == 0 {\n \t\treturn emptyStructToFFI()\n \t}\n+\tif typ.typ.kind&kindDirectIface != 0 {\n+\t\treturn ffi_type_pointer()\n+\t}\n \n \tfields := make([]*__ffi_type, 0, c+1)\n \tcheckPad := false\n@@ -307,6 +310,9 @@ func arrayToFFI(typ *arraytype) *__ffi_type {\n \tif typ.len == 0 {\n \t\treturn emptyStructToFFI()\n \t}\n+\tif typ.typ.kind&kindDirectIface != 0 {\n+\t\treturn ffi_type_pointer()\n+\t}\n \telements := make([]*__ffi_type, typ.len+1)\n \tet := typeToFFI(typ.elem)\n \tfor i := uintptr(0); i < typ.len; i++ {"}]}