{"sha": "c0b00d37294a7ee398e99038d7fd6ec168a1461b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzBiMDBkMzcyOTRhN2VlMzk4ZTk5MDM4ZDdmZDZlYzE2OGExNDYxYg==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@cygnus.com", "date": "2001-02-01T10:35:50Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2001-02-01T10:35:50Z"}, "message": "jcf-parse.c (init_jcf_parse): Added cast to ggc_add_root's last argument.\n\n2001-01-30  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n\n\t* jcf-parse.c (init_jcf_parse): Added cast to ggc_add_root's last\n\targument.\n\t* parse.y (finish_method_declaration): Code accounting for WFLed\n\tmethod DECL_NAMEs deleted.\n\t(check_abstract_method_definitions): Likewise.\n\t(resolve_type_during_patch): Layout resolved type.\n\t* typeck.c (lookup_do): Removed unused local.\n\n(http://gcc.gnu.org/ml/gcc-patches/2001-02/msg00005.html)\n\nFrom-SVN: r39388", "tree": {"sha": "2698de4e91c9cba2d4f4eceab98dc97daa526412", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2698de4e91c9cba2d4f4eceab98dc97daa526412"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c0b00d37294a7ee398e99038d7fd6ec168a1461b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0b00d37294a7ee398e99038d7fd6ec168a1461b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c0b00d37294a7ee398e99038d7fd6ec168a1461b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c0b00d37294a7ee398e99038d7fd6ec168a1461b/comments", "author": null, "committer": null, "parents": [{"sha": "8557dc328f62f1ce9a1da833e5681b9a21e76361", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8557dc328f62f1ce9a1da833e5681b9a21e76361", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8557dc328f62f1ce9a1da833e5681b9a21e76361"}], "stats": {"total": 38, "additions": 18, "deletions": 20}, "files": [{"sha": "d4543db010e4465ff2b54586c61688aaddce11d2", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=c0b00d37294a7ee398e99038d7fd6ec168a1461b", "patch": "@@ -1,3 +1,13 @@\n+2001-01-30  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n+\n+\t* jcf-parse.c (init_jcf_parse): Added cast to ggc_add_root's last\n+\targument.\n+\t* parse.y (finish_method_declaration): Code accounting for WFLed\n+\tmethod DECL_NAMEs deleted.\n+\t(check_abstract_method_definitions): Likewise.\n+\t(resolve_type_during_patch): Layout resolved type.\n+\t* typeck.c (lookup_do): Removed unused local.\n+\n 2000-01-30  Bryce McKinlay  <bryce@albatross.co.nz>\n \n \t* java-tree.h: Remove JTI_INTEGER_NEGATIVE_ONE_NODE."}, {"sha": "24eb0a30d9d0470c9c354f180741b40f589e037b", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=c0b00d37294a7ee398e99038d7fd6ec168a1461b", "patch": "@@ -1135,5 +1135,5 @@ init_jcf_parse ()\n   /* Register roots with the garbage collector.  */\n   ggc_add_tree_root (parse_roots, sizeof (parse_roots) / sizeof(tree));\n \n-  ggc_add_root (&current_jcf, 1, sizeof (JCF), ggc_mark_jcf);\n+  ggc_add_root (&current_jcf, 1, sizeof (JCF), (void (*)(void *))ggc_mark_jcf);\n }"}, {"sha": "d56613365be4095fed66876f15b15987930f007f", "filename": "gcc/java/parse.y", "status": "modified", "additions": 7, "deletions": 17, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=c0b00d37294a7ee398e99038d7fd6ec168a1461b", "patch": "@@ -4572,21 +4572,21 @@ finish_method_declaration (method_body)\n   /* 8.4.5 Method Body */\n   if ((flags & ACC_ABSTRACT || flags & ACC_NATIVE) && method_body)\n     {\n-      tree wfl = DECL_NAME (current_function_decl);\n-      parse_error_context (wfl, \n+      tree name = DECL_NAME (current_function_decl);\n+      parse_error_context (DECL_FUNCTION_WFL (current_function_decl), \n \t\t\t   \"%s method `%s' can't have a body defined\",\n \t\t\t   (METHOD_NATIVE (current_function_decl) ?\n \t\t\t    \"Native\" : \"Abstract\"),\n-\t\t\t   IDENTIFIER_POINTER (EXPR_WFL_NODE (wfl)));\n+\t\t\t   IDENTIFIER_POINTER (name));\n       method_body = NULL_TREE;\n     }\n   else if (!(flags & ACC_ABSTRACT) && !(flags & ACC_NATIVE) && !method_body)\n     {\n-      tree wfl = DECL_NAME (current_function_decl);\n+      tree name = DECL_NAME (current_function_decl);\n       parse_error_context\n-\t(wfl, \n+\t(DECL_FUNCTION_WFL (current_function_decl), \n \t \"Non native and non abstract method `%s' must have a body defined\",\n-\t IDENTIFIER_POINTER (EXPR_WFL_NODE (wfl)));\n+\t IDENTIFIER_POINTER (name));\n       method_body = NULL_TREE;\n     }\n \n@@ -5904,13 +5904,6 @@ check_abstract_method_definitions (do_interface, class_decl, type)\n \t  char *t = xstrdup (lang_printable_name \n \t\t\t    (TREE_TYPE (TREE_TYPE (method)), 0));\n \t  tree ccn = DECL_NAME (TYPE_NAME (DECL_CONTEXT (method)));\n-\t  tree saved_wfl = NULL_TREE;\n-\t  \n-\t  if (TREE_CODE (DECL_NAME (method)) == EXPR_WITH_FILE_LOCATION)\n-\t    {\n-\t      saved_wfl = DECL_NAME (method);\n-\t      DECL_NAME (method) = EXPR_WFL_NODE (DECL_NAME (method));\n-\t    }\n \t  \n \t  parse_error_context \n \t    (lookup_cl (class_decl),\n@@ -5924,9 +5917,6 @@ check_abstract_method_definitions (do_interface, class_decl, type)\n \t     IDENTIFIER_POINTER (DECL_NAME (class_decl)));\n \t  ok = 0;\n \t  free (t);\n-\n-\t  if (saved_wfl)\n-\t    DECL_NAME (method) = saved_wfl;\n \t}\n     }\n \n@@ -13870,7 +13860,7 @@ resolve_type_during_patch (type)\n {\n   if (unresolved_type_p (type, NULL))\n     {\n-      tree type_decl = resolve_no_layout (EXPR_WFL_NODE (type), type);\n+      tree type_decl = resolve_and_layout (EXPR_WFL_NODE (type), type);\n       if (!type_decl)\n \t{\n \t  parse_error_context (type, "}, {"sha": "83be3262dc495a1f97e1091b8d1cdb8edd4d8ebf", "filename": "gcc/java/typeck.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c0b00d37294a7ee398e99038d7fd6ec168a1461b/gcc%2Fjava%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Ftypeck.c?ref=c0b00d37294a7ee398e99038d7fd6ec168a1461b", "patch": "@@ -834,8 +834,6 @@ lookup_do (searched_class, searched_interface, method_name, signature, signature\n \t   method != NULL_TREE;  method = TREE_CHAIN (method))\n \t{\n \t  tree method_sig = (*signature_builder) (TREE_TYPE (method));\n-\t  tree name = DECL_NAME (method);\n-\n \t  if (DECL_NAME (method) == method_name && method_sig == signature)\n \t    return method;\n \t}"}]}