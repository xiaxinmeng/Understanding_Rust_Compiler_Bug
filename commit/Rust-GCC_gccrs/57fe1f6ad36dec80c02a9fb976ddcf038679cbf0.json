{"sha": "57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "node_id": "C_kwDOANBUbNoAKDU3ZmUxZjZhZDM2ZGVjODBjMDJhOWZiOTc2ZGRjZjAzODY3OWNiZjA", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2022-01-09T06:02:13Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2022-01-09T06:17:18Z"}, "message": "Testsuite: Make dependence on -fdelete-null-pointer-checks explicit\n\nnios2-elf target defaults to -fno-delete-null-pointer-checks, breaking\ntests that implicitly depend on that optimization.  Add the option\nexplicitly on these tests.\n\n2022-01-08  Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/testsuite/\n\t* g++.dg/cpp0x/constexpr-compare1.C: Add explicit\n\t-fdelete-null-pointer-checks option.\n\t* g++.dg/cpp0x/constexpr-compare2.C: Likewise.\n\t* g++.dg/cpp0x/constexpr-typeid2.C: Likewise.\n\t* g++.dg/cpp1y/constexpr-94716.C: Likewise.\n\t* g++.dg/cpp1z/constexpr-compare1.C: Likewise.\n\t* g++.dg/cpp1z/constexpr-if36.C: Likewise.\n\t* gcc.dg/init-compare-1.c: Likewise.\n\n\tlibstdc++-v3/\n\t* testsuite/18_support/type_info/constexpr.cc: Add explicit\n\t-fdelete-null-pointer-checks option.", "tree": {"sha": "e7826858a363318b088316483ac211f633be5d67", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7826858a363318b088316483ac211f633be5d67"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2848ef14117d71d76a9d6810b581b5da30455004", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2848ef14117d71d76a9d6810b581b5da30455004", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2848ef14117d71d76a9d6810b581b5da30455004"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "603c6d5b2e6eb940652dae84a907ec24daaf6830", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-compare1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-compare1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-compare1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-compare1.C?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,4 +1,5 @@\n // { dg-do compile { target c++11 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n extern int a, b;\n static_assert (&a == &a, \"\");"}, {"sha": "5c08dbbd54fc3706f7d982191579a60f6011b708", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-compare2.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-compare2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-compare2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-compare2.C?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,5 +1,6 @@\n // PR c++/69681\n // { dg-do compile { target c++11 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n void f();\n void g();"}, {"sha": "8ab76f972d8271e6afd8e0448ef96f373cfb8828", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-typeid2.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-typeid2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-typeid2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-typeid2.C?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,5 +1,6 @@\n // PR c++/103600\n // { dg-do compile { target c++11 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n #include <typeinfo>\n "}, {"sha": "5ac8720e93aa569fc4f03702d79c9e50c4f4206e", "filename": "gcc/testsuite/g++.dg/cpp1y/constexpr-94716.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fconstexpr-94716.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fconstexpr-94716.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1y%2Fconstexpr-94716.C?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,5 +1,6 @@\n // PR c++/94716\n // { dg-do compile { target c++14 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n template <int> char v = 0;\n static_assert (&v<2> == &v<2>, \"\");"}, {"sha": "d40d5363b288739b140cdf29a5d77ef207a63a81", "filename": "gcc/testsuite/g++.dg/cpp1z/constexpr-compare1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-compare1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-compare1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-compare1.C?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,4 +1,5 @@\n // { dg-do compile { target c++17 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n inline int a = 0;\n inline int b = 0;"}, {"sha": "e425af291e3020c7deec3334f32f7bf84537e3b6", "filename": "gcc/testsuite/g++.dg/cpp1z/constexpr-if36.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-if36.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-if36.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp1z%2Fconstexpr-if36.C?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -3,6 +3,7 @@\n // weakness.\n \n // { dg-do compile { target c++17 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n extern void weakfn1 (void);\n extern void weakfn2 (void);"}, {"sha": "6737c85a840b6babf4d43e3ba59faef48dcc3937", "filename": "gcc/testsuite/gcc.dg/init-compare-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fgcc.dg%2Finit-compare-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/gcc%2Ftestsuite%2Fgcc.dg%2Finit-compare-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Finit-compare-1.c?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,4 +1,5 @@\n /* { dg-do compile } */\n+/* { dg-additional-options \"-fdelete-null-pointer-checks\" } */\n \n extern int a, b;\n int c = &a == &a;"}, {"sha": "6fb67b43f177bf970af6099dfa1f05293c289692", "filename": "libstdc++-v3/testsuite/18_support/type_info/constexpr.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/libstdc%2B%2B-v3%2Ftestsuite%2F18_support%2Ftype_info%2Fconstexpr.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/57fe1f6ad36dec80c02a9fb976ddcf038679cbf0/libstdc%2B%2B-v3%2Ftestsuite%2F18_support%2Ftype_info%2Fconstexpr.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F18_support%2Ftype_info%2Fconstexpr.cc?ref=57fe1f6ad36dec80c02a9fb976ddcf038679cbf0", "patch": "@@ -1,5 +1,6 @@\n // { dg-options \"-std=gnu++23 -frtti\" }\n // { dg-do compile { target c++23 } }\n+// { dg-additional-options \"-fdelete-null-pointer-checks\" }\n \n #include <typeinfo>\n "}]}