{"sha": "88957d5e1497d3e27e31f3513866e7d88904c08f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg5NTdkNWUxNDk3ZDNlMjdlMzFmMzUxMzg2NmU3ZDg4OTA0YzA4Zg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2014-12-12T21:50:12Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2014-12-12T21:50:12Z"}, "message": "re PR c++/59628 (ICE with invalid OpenMP \"declare reduction\" clause)\n\n/cp\n2014-12-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/59628\n\t* semantics.c (finish_omp_reduction_clause): Early return true\n\tif DECL_SAVED_TREE (id) is NULL_TREE.\n\n/testsuite\n2014-12-12  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/59628\n\t* g++.dg/gomp/pr59628.C: New.\n\nFrom-SVN: r218692", "tree": {"sha": "1f0a6098fda104214d7e0b892aa8b56fe5d198df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f0a6098fda104214d7e0b892aa8b56fe5d198df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88957d5e1497d3e27e31f3513866e7d88904c08f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88957d5e1497d3e27e31f3513866e7d88904c08f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88957d5e1497d3e27e31f3513866e7d88904c08f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88957d5e1497d3e27e31f3513866e7d88904c08f/comments", "author": null, "committer": null, "parents": [{"sha": "d95521b4118c83b23997a823b0682a385609fd84", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d95521b4118c83b23997a823b0682a385609fd84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d95521b4118c83b23997a823b0682a385609fd84"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "576610deed0d5c103cf3f82d5abd0d94d2eb5179", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=88957d5e1497d3e27e31f3513866e7d88904c08f", "patch": "@@ -1,3 +1,9 @@\n+2014-12-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/59628\n+\t* semantics.c (finish_omp_reduction_clause): Early return true\n+\tif DECL_SAVED_TREE (id) is NULL_TREE.\n+\n 2014-12-12  Jason Merrill  <jason@redhat.com>\n \n \tN3922"}, {"sha": "5ad391eda5beeedc42e16f5b51566152d93d215e", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=88957d5e1497d3e27e31f3513866e7d88904c08f", "patch": "@@ -5138,6 +5138,8 @@ finish_omp_reduction_clause (tree c, bool *need_default_ctor, bool *need_dtor)\n       id = OVL_CURRENT (id);\n       mark_used (id);\n       tree body = DECL_SAVED_TREE (id);\n+      if (!body)\n+\treturn true;\n       if (TREE_CODE (body) == STATEMENT_LIST)\n \t{\n \t  tree_stmt_iterator tsi;"}, {"sha": "767617798ab7ef7cd88f20ed0f30b3b5aba200ca", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=88957d5e1497d3e27e31f3513866e7d88904c08f", "patch": "@@ -1,3 +1,8 @@\n+2014-12-12  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/59628\n+\t* g++.dg/gomp/pr59628.C: New.\n+\n 2014-12-12  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/61924"}, {"sha": "518200b9c292f0e07f6f1c839d4152091889136a", "filename": "gcc/testsuite/g++.dg/gomp/pr59628.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr59628.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88957d5e1497d3e27e31f3513866e7d88904c08f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr59628.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr59628.C?ref=88957d5e1497d3e27e31f3513866e7d88904c08f", "patch": "@@ -0,0 +1,13 @@\n+// PR c++/59628\n+// { dg-do compile }\n+// { dg-options \"-fopenmp\" }\n+\n+struct A { int i; };\n+\n+void foo()\n+{\n+  A a;\n+  #pragma omp declare reduction (+: A: omp_out.i +: omp_in.i)  // { dg-error \"expected\" }\n+  #pragma omp parallel reduction (+: a)\n+  ;\n+}"}]}