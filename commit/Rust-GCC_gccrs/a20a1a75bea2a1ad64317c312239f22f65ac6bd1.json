{"sha": "a20a1a75bea2a1ad64317c312239f22f65ac6bd1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTIwYTFhNzViZWEyYTFhZDY0MzE3YzMxMjIzOWYyMmY2NWFjNmJkMQ==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2019-11-16T23:31:19Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2019-11-16T23:31:19Z"}, "message": "rs6000: Allow mode GPR in cceq_{ior,rev}_compare\n\nAlso make it a parmeterized name: @cceq_{ior,rev}_compare_<mode>.\n\n\n\t* config/rs6000/rs6000.md (cceq_ior_compare): Rename to...\n\t(@cceq_ior_compare_<mode> for GPR): ... this.  Allow GPR instead of\n\tjust SI.\n\t(cceq_rev_compare): Rename to...\n\t(@cceq_rev_compare_<mode> for GPR): ... this.  Allow GPR instead of\n\tjust SI.\n\t(define_split for <bd>tf_<mode>): Add SImode first argument to\n\tgen_cceq_ior_compare.\n\nFrom-SVN: r278366", "tree": {"sha": "c39725a3fadc59da15b4792012037d43e54b8195", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c39725a3fadc59da15b4792012037d43e54b8195"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a20a1a75bea2a1ad64317c312239f22f65ac6bd1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a20a1a75bea2a1ad64317c312239f22f65ac6bd1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a20a1a75bea2a1ad64317c312239f22f65ac6bd1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a20a1a75bea2a1ad64317c312239f22f65ac6bd1/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bac6632921d01d415c1378a43d0544d10ac976c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bac6632921d01d415c1378a43d0544d10ac976c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bac6632921d01d415c1378a43d0544d10ac976c3"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "14fefbc3338810fe2a9c3b4937bbe2e9722f0a54", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a20a1a75bea2a1ad64317c312239f22f65ac6bd1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a20a1a75bea2a1ad64317c312239f22f65ac6bd1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a20a1a75bea2a1ad64317c312239f22f65ac6bd1", "patch": "@@ -1,3 +1,14 @@\n+2019-11-16  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/rs6000.md (cceq_ior_compare): Rename to...\n+\t(@cceq_ior_compare_<mode> for GPR): ... this.  Allow GPR instead of\n+\tjust SI.\n+\t(cceq_rev_compare): Rename to...\n+\t(@cceq_rev_compare_<mode> for GPR): ... this.  Allow GPR instead of\n+\tjust SI.\n+\t(define_split for <bd>tf_<mode>): Add SImode first argument to\n+\tgen_cceq_ior_compare.\n+\n 2019-11-16  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \t* common/config/powerpcspe: Delete."}, {"sha": "8dc0a2917a0c5c29d619c98f2405913af3db689d", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a20a1a75bea2a1ad64317c312239f22f65ac6bd1/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a20a1a75bea2a1ad64317c312239f22f65ac6bd1/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=a20a1a75bea2a1ad64317c312239f22f65ac6bd1", "patch": "@@ -12420,15 +12420,15 @@\n ; which are generated by the branch logic.\n ; Prefer destructive operations where BT = BB (for crXX BT,BA,BB)\n \n-(define_insn \"cceq_ior_compare\"\n+(define_insn \"@cceq_ior_compare_<mode>\"\n   [(set (match_operand:CCEQ 0 \"cc_reg_operand\" \"=y,?y\")\n-        (compare:CCEQ (match_operator:SI 1 \"boolean_operator\"\n-\t                [(match_operator:SI 2\n+        (compare:CCEQ (match_operator:GPR 1 \"boolean_operator\"\n+\t                [(match_operator:GPR 2\n \t\t\t\t      \"branch_positive_comparison_operator\"\n \t\t\t\t      [(match_operand 3\n \t\t\t\t\t\t      \"cc_reg_operand\" \"y,y\")\n \t\t\t\t       (const_int 0)])\n-\t                 (match_operator:SI 4\n+\t                 (match_operator:GPR 4\n \t\t\t\t      \"branch_positive_comparison_operator\"\n \t\t\t\t      [(match_operand 5\n \t\t\t\t\t\t      \"cc_reg_operand\" \"0,y\")\n@@ -12460,9 +12460,9 @@\n   [(set_attr \"type\" \"cr_logical\")\n    (set_attr \"cr_logical_3op\" \"no,yes\")])\n \n-(define_insn \"*cceq_rev_compare\"\n+(define_insn \"@cceq_rev_compare_<mode>\"\n   [(set (match_operand:CCEQ 0 \"cc_reg_operand\" \"=y,?y\")\n-\t(compare:CCEQ (match_operator:SI 1\n+\t(compare:CCEQ (match_operator:GPR 1\n \t\t\t\t      \"branch_positive_comparison_operator\"\n \t\t\t\t      [(match_operand 2\n \t\t\t\t\t\t      \"cc_reg_operand\" \"0,y\")\n@@ -12897,7 +12897,7 @@\n \n   rtx andexpr = gen_rtx_AND (SImode, ctrcmpcc, cccmp);\n   if (ispos)\n-     emit_insn (gen_cceq_ior_compare (operands[9], andexpr, ctrcmpcc,\n+     emit_insn (gen_cceq_ior_compare (SImode, operands[9], andexpr, ctrcmpcc,\n \t\t\t\t      operands[8], cccmp, ccin));\n   else\n      emit_insn (gen_cceq_ior_compare_complement (operands[9], andexpr, ctrcmpcc,"}]}