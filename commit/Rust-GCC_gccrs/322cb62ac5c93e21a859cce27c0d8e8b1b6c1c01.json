{"sha": "322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIyY2I2MmFjNWM5M2UyMWE4NTljY2UyN2MwZDhlOGIxYjZjMWMwMQ==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2013-10-19T11:46:04Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2013-10-19T11:46:04Z"}, "message": "Makefile.in: Use canonical absolute path to refer to the top source directory and to the...\n\n\t* gcc-interface/Makefile.in: Use canonical absolute path to refer to\n\tthe top source directory and to the libgcc subidrectories.\n\nFrom-SVN: r203854", "tree": {"sha": "27d58c5c3921ab491983c57d1fa1c14b5ac658af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27d58c5c3921ab491983c57d1fa1c14b5ac658af"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01/comments", "author": null, "committer": null, "parents": [{"sha": "5c475ba98b74a9831f6c05fb39c816d406d7daad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c475ba98b74a9831f6c05fb39c816d406d7daad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c475ba98b74a9831f6c05fb39c816d406d7daad"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "cc462e9c4a7c3ebe5babdc1f765509733b10270a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01", "patch": "@@ -1,3 +1,8 @@\n+2013-10-19  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* gcc-interface/Makefile.in: Use canonical absolute path to refer to\n+\tthe top source directory and to the libgcc subidrectories.\n+\n 2013-10-19  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/utils.c (scale_by_factor_of): New function."}, {"sha": "91778c5fcf6318ee4a3a0cf52ca964e2befd9154", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 16, "deletions": 7, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=322cb62ac5c93e21a859cce27c0d8e8b1b6c1c01", "patch": "@@ -167,6 +167,13 @@ tmake_file = @tmake_file@\n # Directory where sources are, from where we are.\n VPATH = $(srcdir)/ada\n \n+# Full path to top source directory\n+# In particular this is used to access libgcc headers, so that references to\n+# these headers from GNAT runtime objects have path names in debugging info\n+# that are consistent with libgcc objects.  Also used for other references to\n+# the top source directory for consistency.\n+ftop_srcdir := $(shell cd $(srcdir)/..;${PWD_COMMAND})\n+\n fsrcdir := $(shell cd $(srcdir);${PWD_COMMAND})\n fsrcpfx := $(shell cd $(srcdir);${PWD_COMMAND})/\n fcurdir := $(shell ${PWD_COMMAND})\n@@ -262,7 +269,7 @@ TOOLS_LIBS = ../link.o ../targext.o ../../ggc-none.o ../../libcommon-target.a \\\n # Both . and srcdir are used, in that order,\n # so that tm.h and config.h will be found in the compilation\n # subdirectory rather than in the source directory.\n-INCLUDES = -I- -I. -I.. -I$(srcdir)/ada -I$(srcdir) -I$(srcdir)/../include $(GMPINC)\n+INCLUDES = -I- -I. -I.. -I$(srcdir)/ada -I$(srcdir) -I$(ftop_srcdir)/include $(GMPINC)\n \n ADA_INCLUDES = -I- -I. -I$(srcdir)/ada\n \n@@ -272,11 +279,11 @@ ADA_INCLUDES = -I- -I. -I$(srcdir)/ada\n ifneq ($(findstring vxworks,$(target_os)),)\n   INCLUDES_FOR_SUBDIR = -iquote . -iquote .. -iquote ../.. \\\n \t\t\t-iquote $(fsrcdir)/ada \\\n-\t\t\t-I$(fsrcdir)/../include $(GMPINC)\n+\t\t\t-I$(ftop_srcdir)/include $(GMPINC)\n else\n   INCLUDES_FOR_SUBDIR = -iquote . -iquote .. -iquote ../.. \\\n \t\t\t-iquote $(fsrcdir)/ada -iquote $(fsrcdir) \\\n-\t\t\t-I$(fsrcdir)/../include $(GMPINC)\n+\t\t\t-I$(ftop_srcdir)/include $(GMPINC)\n endif\n \n ADA_INCLUDES_FOR_SUBDIR = -I. -I$(fsrcdir)/ada\n@@ -496,7 +503,7 @@ endif\n # PowerPC and e500v2 VxWorks\n ifeq ($(strip $(filter-out powerpc% wrs vxworks,$(target_cpu) $(target_vendor) $(target_os))),)\n \n-  ifeq ($(strip $(filter-out e500%, $(arch))),)\n+  ifeq ($(strip $(filter-out e500%, $(target_alias))),)\n      ARCH_STR=e500\n   else\n      ARCH_STR=ppc\n@@ -993,7 +1000,7 @@ ifeq ($(strip $(filter-out mips% wrs vx%,$(target_cpu) $(target_vendor) $(target\n   EXTRA_LIBGNAT_OBJS+=vx_stack_info.o\n endif\n \n-# ARM linux, Android eabi\n+# ARM android\n ifeq ($(strip $(filter-out arm% linux-androideabi,$(target_cpu) $(target_os))),)\n   LIBGNAT_TARGET_PAIRS = \\\n   a-intnam.ads<a-intnam-linux.ads \\\n@@ -1210,6 +1217,7 @@ ifeq ($(strip $(filter-out %86 linux%,$(target_cpu) $(target_os))),)\n     indepsw.adb<indepsw-gnu.adb\n \n   GNATLIB_SHARED = gnatlib-shared-dual\n+  MISCLIB = -ldl\n   GMEM_LIB = gmemlib\n   LIBRARY_VERSION := $(LIB_VERSION)\n endif\n@@ -1597,7 +1605,7 @@ ifeq ($(strip $(filter-out powerpc% %86 sysgo pikeos,$(target_cpu) $(target_vend\n   indepsw.adb<indepsw-gnu.adb\n endif\n \n-# *-elf, *-eabi or *-eabispe\n+# *-elf, *-eabi, or *-eabispe\n ifeq ($(strip $(filter-out elf eabi eabispe,$(target_os))),)\n   TOOLS_TARGET_PAIRS=\\\n   mlib-tgt-specific.adb<mlib-tgt-specific-xi.adb \\\n@@ -2163,6 +2171,7 @@ ifeq ($(strip $(filter-out %x86_64 linux%,$(target_cpu) $(target_os))),)\n   EXTRA_GNATRTL_TASKING_OBJS=s-linux.o a-exetim.o\n   EH_MECHANISM=-gcc\n   THREADSLIB=-lpthread -lrt\n+  MISCLIB = -ldl\n   GNATLIB_SHARED=gnatlib-shared-dual\n   GMEM_LIB = gmemlib\n   LIBRARY_VERSION := $(LIB_VERSION)\n@@ -3015,7 +3024,7 @@ vx_stack_info.o : vx_stack_info.c\n \n raise-gcc.o : raise-gcc.c raise.h\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ADA_CFLAGS) \\\n-\t\t-iquote $(srcdir) -iquote $(srcdir)/../libgcc \\\n+\t\t-iquote $(srcdir) -iquote $(ftop_srcdir)/libgcc \\\n \t\t$(ALL_CPPFLAGS) $(INCLUDES) $< $(OUTPUT_OPTION)\n \n cio.o     : cio.c"}]}