{"sha": "40829cb8f55428914e5e548868785b7df86d7c02", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDA4MjljYjhmNTU0Mjg5MTRlNWU1NDg4Njg3ODViN2RmODZkN2MwMg==", "commit": {"author": {"name": "Alexander Monakov", "email": "amonakov@gcc.gnu.org", "date": "2016-12-21T14:20:09Z"}, "committer": {"name": "Alexander Monakov", "email": "amonakov@gcc.gnu.org", "date": "2016-12-21T14:20:09Z"}, "message": "nvptx: do not assume that crtl->is_leaf is unset\n\n\tPR target/78831\n\t* config/nvptx/nvptx.c (init_softstack_frame): Remove assert.  Compute\n\tcrtl->is_leaf only if unset.  Adjust comment.\n\nFrom-SVN: r243855", "tree": {"sha": "2c89c2bca6c1c92ea3784850a695c2532b80f66a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c89c2bca6c1c92ea3784850a695c2532b80f66a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40829cb8f55428914e5e548868785b7df86d7c02", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40829cb8f55428914e5e548868785b7df86d7c02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40829cb8f55428914e5e548868785b7df86d7c02", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40829cb8f55428914e5e548868785b7df86d7c02/comments", "author": null, "committer": null, "parents": [{"sha": "adc86fa52f4acec9cc8dc7243510d9c4eeee53d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adc86fa52f4acec9cc8dc7243510d9c4eeee53d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adc86fa52f4acec9cc8dc7243510d9c4eeee53d7"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "81d2165d8f91bbca19151b793abc2f2576ebecc7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40829cb8f55428914e5e548868785b7df86d7c02/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40829cb8f55428914e5e548868785b7df86d7c02/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=40829cb8f55428914e5e548868785b7df86d7c02", "patch": "@@ -1,6 +1,12 @@\n-2016-12-22  Andrew Pinski  <apinski@cavium.com>\n+2016-12-21  Alexander Monakov  <amonakov@ispras.ru>\n \n-        * match.pd (max:c @0 (plus@2 @0 INTEGER_CST@1)): New Pattern.\n+\tPR target/78831\n+\t* config/nvptx/nvptx.c (init_softstack_frame): Remove assert.  Compute\n+\tcrtl->is_leaf only if unset.  Adjust comment.\n+\n+2016-12-21  Andrew Pinski  <apinski@cavium.com>\n+\n+\t* match.pd (max:c @0 (plus@2 @0 INTEGER_CST@1)): New Pattern.\n \t(min:c @0 (plus@2 @0 INTEGER_CST@1)) : New Pattern.\n \n 2016-12-20  James Greenhalgh  <james.greenhalghj@arm.com>"}, {"sha": "b3f025f4e35856a5b51595602d16924c35abdbde", "filename": "gcc/config/nvptx/nvptx.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40829cb8f55428914e5e548868785b7df86d7c02/gcc%2Fconfig%2Fnvptx%2Fnvptx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40829cb8f55428914e5e548868785b7df86d7c02/gcc%2Fconfig%2Fnvptx%2Fnvptx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.c?ref=40829cb8f55428914e5e548868785b7df86d7c02", "patch": "@@ -1048,9 +1048,10 @@ init_softstack_frame (FILE *file, unsigned alignment, HOST_WIDE_INT size)\n \t   bits, reg_stack, reg_frame, size);\n \n   /* Usually 'crtl->is_leaf' is computed during register allocator\n-     initialization, which is not done on NVPTX.  Compute it now.  */\n-  gcc_assert (!crtl->is_leaf);\n-  crtl->is_leaf = leaf_function_p ();\n+     initialization (which is not done on NVPTX) or for pressure-sensitive\n+     optimizations.  Initialize it here, except if already set.  */\n+  if (!crtl->is_leaf)\n+    crtl->is_leaf = leaf_function_p ();\n   if (!crtl->is_leaf)\n     fprintf (file, \"\\t\\tst.shared.u%d [%s], %s;\\n\",\n \t     bits, reg_sspslot, reg_stack);"}]}