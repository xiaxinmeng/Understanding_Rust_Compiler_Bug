{"sha": "cb3790cb4e360256af0cfcd99a7933f1c172d40a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2IzNzkwY2I0ZTM2MDI1NmFmMGNmY2Q5OWE3OTMzZjFjMTcyZDQwYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-03-26T13:25:26Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-03-26T13:25:26Z"}, "message": "inclhack.def (glibc_c99_inline_1): Define __USE_EXTERN_INLINES if __extern_inline or __GNUC_GNU_INLINE__ is...\n\n\t* inclhack.def (glibc_c99_inline_1): Define __USE_EXTERN_INLINES\n\tif __extern_inline or __GNUC_GNU_INLINE__ is defined rather than\n\t__STDC_VERSION__ < 199901L.\n\t(glibc_c99_inline_2): Replace #if __STDC_VERSION__ < 199901L\n\twith #ifdef __GNUC_GNU_INLINE__.\n\t(glibc_c99_inline_3): Add select.  Replace __STDC_VERSION__ >= 199901L\n\twith defined(__GNUC_STDC_INLINE__).\n\t(glibc_c99_inline_4): Change select, add second c_fix_arg.\n\tReplace #if __STDC_VERSION__ < 199901L with\n\t#ifdef __GNUC_GNU_INLINE__.\n\t* fixincl.x: Regenerated.\n\t* tests/base/bits/string2.h: Update.\n\t* tests/base/sys/sysmacros.h: Update.\n\t* tests/base/sys/stat.h: Update.\n\nFrom-SVN: r123216", "tree": {"sha": "3feb17c59e9b13054c14d08bc1654ae951120a7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3feb17c59e9b13054c14d08bc1654ae951120a7d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb3790cb4e360256af0cfcd99a7933f1c172d40a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb3790cb4e360256af0cfcd99a7933f1c172d40a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb3790cb4e360256af0cfcd99a7933f1c172d40a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb3790cb4e360256af0cfcd99a7933f1c172d40a/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "85acef0e287df062aa1626e19661df734bd91dc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85acef0e287df062aa1626e19661df734bd91dc8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85acef0e287df062aa1626e19661df734bd91dc8"}], "stats": {"total": 75, "additions": 51, "deletions": 24}, "files": [{"sha": "69acbf49a7a1d2cabf77d129af1d582f75d8751a", "filename": "fixincludes/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2FChangeLog?ref=cb3790cb4e360256af0cfcd99a7933f1c172d40a", "patch": "@@ -1,3 +1,20 @@\n+2007-03-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* inclhack.def (glibc_c99_inline_1): Define __USE_EXTERN_INLINES\n+\tif __extern_inline or __GNUC_GNU_INLINE__ is defined rather than\n+\t__STDC_VERSION__ < 199901L.\n+\t(glibc_c99_inline_2): Replace #if __STDC_VERSION__ < 199901L\n+\twith #ifdef __GNUC_GNU_INLINE__.\n+\t(glibc_c99_inline_3): Add select.  Replace __STDC_VERSION__ >= 199901L\n+\twith defined(__GNUC_STDC_INLINE__).\n+\t(glibc_c99_inline_4): Change select, add second c_fix_arg.\n+\tReplace #if __STDC_VERSION__ < 199901L with\n+\t#ifdef __GNUC_GNU_INLINE__.\n+\t* fixincl.x: Regenerated.\n+\t* tests/base/bits/string2.h: Update.\n+\t* tests/base/sys/sysmacros.h: Update.\n+\t* tests/base/sys/stat.h: Update.\n+\n 2007-03-18  Krister Walfridsson  <cato@df.lth.se>\n \n \tPR target/30058"}, {"sha": "5239cbf05cb2652350df75aed86965505d10b090", "filename": "fixincludes/fixincl.x", "status": "modified", "additions": 20, "deletions": 12, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ffixincl.x?ref=cb3790cb4e360256af0cfcd99a7933f1c172d40a", "patch": "@@ -2,11 +2,11 @@\n  * \n  * DO NOT EDIT THIS FILE   (fixincl.x)\n  * \n- * It has been AutoGen-ed  Sunday March 18, 2007 at 05:06:12 PM CET\n+ * It has been AutoGen-ed  Wednesday March 21, 2007 at 05:39:23 PM CET\n  * From the definitions    inclhack.def\n  * and the template file   fixincl\n  */\n-/* DO NOT SVN-MERGE THIS FILE, EITHER Sun Mar 18 17:06:12 CET 2007\n+/* DO NOT SVN-MERGE THIS FILE, EITHER Wed Mar 21 17:39:23 CET 2007\n  *\n  * You must regenerate it.  Use the ./genfixes script.\n  *\n@@ -2215,7 +2215,7 @@ static tTestDesc aGlibc_C99_Inline_1Tests[] = {\n  */\n static const char* apzGlibc_C99_Inline_1Patch[] = {\n     \"format\",\n-    \"%0 && __STDC_VERSION__ < 199901L\",\n+    \"%0 && (defined __extern_inline || defined __GNUC_GNU_INLINE__)\",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n@@ -2249,15 +2249,15 @@ static tTestDesc aGlibc_C99_Inline_2Tests[] = {\n  *  Fix Command Arguments for Glibc_C99_Inline_2\n  */\n static const char* apzGlibc_C99_Inline_2Patch[] = { \"sed\",\n-    \"-e\", \"s/extern int \\\\(stat\\\\|lstat\\\\|fstat\\\\|mknod\\\\)/#if __STDC_VERSION__ < 199901L\\\\\\n\\\n+    \"-e\", \"s/extern int \\\\(stat\\\\|lstat\\\\|fstat\\\\|mknod\\\\)/#ifdef __GNUC_GNU_INLINE__\\\\\\n\\\n extern\\\\\\n\\\n #endif\\\\\\n\\\n __inline__ int \\\\1/\",\n-    \"-e\", \"s/extern int __REDIRECT\\\\(_NTH\\\\|\\\\) (\\\\(stat\\\\|lstat\\\\|fstat\\\\)/#if __STDC_VERSION__ < 199901L\\\\\\n\\\n+    \"-e\", \"s/extern int __REDIRECT\\\\(_NTH\\\\|\\\\) (\\\\(stat\\\\|lstat\\\\|fstat\\\\)/#ifdef __GNUC_GNU_INLINE__\\\\\\n\\\n extern\\\\\\n\\\n #endif\\\\\\n\\\n __inline__ int __REDIRECT\\\\1 (\\\\2/\",\n-    \"-e\", \"s/^extern __inline__ int/#if __STDC_VERSION__ < 199901L\\\\\\n\\\n+    \"-e\", \"s/^extern __inline__ int/#ifdef __GNUC_GNU_INLINE__\\\\\\n\\\n extern\\\\\\n\\\n #endif\\\\\\n\\\n __inline__ int/\",\n@@ -2280,22 +2280,29 @@ tSCC zGlibc_C99_Inline_3List[] =\n  */\n #define apzGlibc_C99_Inline_3Machs (const char**)NULL\n \n+/*\n+ *  content selection pattern - do fix if pattern found\n+ */\n+tSCC zGlibc_C99_Inline_3Select0[] =\n+       \"extern __inline\";\n+\n /*\n  *  content bypass pattern - skip fix if pattern found\n  */\n tSCC zGlibc_C99_Inline_3Bypass0[] =\n        \"__STDC_VERSION__\";\n \n-#define    GLIBC_C99_INLINE_3_TEST_CT  1\n+#define    GLIBC_C99_INLINE_3_TEST_CT  2\n static tTestDesc aGlibc_C99_Inline_3Tests[] = {\n-  { TT_NEGREP,   zGlibc_C99_Inline_3Bypass0, (regex_t*)NULL }, };\n+  { TT_NEGREP,   zGlibc_C99_Inline_3Bypass0, (regex_t*)NULL },\n+  { TT_EGREP,    zGlibc_C99_Inline_3Select0, (regex_t*)NULL }, };\n \n /*\n  *  Fix Command Arguments for Glibc_C99_Inline_3\n  */\n static const char* apzGlibc_C99_Inline_3Patch[] = {\n     \"format\",\n-    \"# if defined(__cplusplus) || __STDC_VERSION__ >= 19901L\",\n+    \"# if defined(__cplusplus) || defined(__GNUC_STDC_INLINE__)\",\n     \"^# ifdef __cplusplus$\",\n     (char*)NULL };\n \n@@ -2320,7 +2327,7 @@ tSCC zGlibc_C99_Inline_4List[] =\n  *  content selection pattern - do fix if pattern found\n  */\n tSCC zGlibc_C99_Inline_4Select0[] =\n-       \"(^| )extern \";\n+       \"extern __inline\";\n \n /*\n  *  content bypass pattern - skip fix if pattern found\n@@ -2339,9 +2346,10 @@ static tTestDesc aGlibc_C99_Inline_4Tests[] = {\n static const char* apzGlibc_C99_Inline_4Patch[] = {\n     \"format\",\n     \"\\n\\\n-#if __STDC_VERSION__ < 199901L\\n\\\n+#ifdef __GNUC_GNU_INLINE__\\n\\\n extern\\n\\\n #endif\\n\",\n+    \"(^| )extern \",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n@@ -8466,7 +8474,7 @@ static const char* apzX11_SprintfPatch[] = {\n  *\n  *  List of all fixes\n  */\n-#define REGEX_COUNT          252\n+#define REGEX_COUNT          253\n #define MACH_LIST_SIZE_LIMIT 261\n #define FIX_COUNT            208\n "}, {"sha": "b8a44589e74f03e86c3609bb993a34b00d7ca5dd", "filename": "fixincludes/inclhack.def", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Finclhack.def?ref=cb3790cb4e360256af0cfcd99a7933f1c172d40a", "patch": "@@ -1311,7 +1311,7 @@ fix = {\n     files     = features.h, '*/features.h';\n     select    = \"^ *&& !defined __OPTIMIZE_SIZE__ && !defined __NO_INLINE__$\";\n     c_fix     = format;\n-    c_fix_arg = \"%0 && __STDC_VERSION__ < 199901L\";\n+    c_fix_arg = \"%0 && (defined __extern_inline || defined __GNUC_GNU_INLINE__)\";\n     test_text = <<-EOT\n #if __GNUC_PREREQ (2, 7) && defined __OPTIMIZE__ \\\n     && !defined __OPTIMIZE_SIZE__ && !defined __NO_INLINE__\n@@ -1331,13 +1331,13 @@ fix = {\n     files     = sys/stat.h, '*/sys/stat.h';\n     select    = \"extern __inline__ int\";\n     sed     = \"s/extern int \\\\(stat\\\\|lstat\\\\|fstat\\\\|mknod\\\\)/\"\n-              \"#if __STDC_VERSION__ < 199901L\\\\\\nextern\\\\\\n#endif\\\\\\n\"\n+              \"#ifdef __GNUC_GNU_INLINE__\\\\\\nextern\\\\\\n#endif\\\\\\n\"\n               \"__inline__ int \\\\1/\";\n     sed     = \"s/extern int __REDIRECT\\\\(_NTH\\\\|\\\\) (\\\\(stat\\\\|lstat\\\\|fstat\\\\)/\"\n-              \"#if __STDC_VERSION__ < 199901L\\\\\\nextern\\\\\\n#endif\\\\\\n\"\n+              \"#ifdef __GNUC_GNU_INLINE__\\\\\\nextern\\\\\\n#endif\\\\\\n\"\n               \"__inline__ int __REDIRECT\\\\1 (\\\\2/\";\n     sed     = \"s/^extern __inline__ int/\"\n-              \"#if __STDC_VERSION__ < 199901L\\\\\\nextern\\\\\\n#endif\\\\\\n\"\n+              \"#ifdef __GNUC_GNU_INLINE__\\\\\\nextern\\\\\\n#endif\\\\\\n\"\n               \"__inline__ int/\";\n     test_text = <<-EOT\n \textern int fstat64 (int __fd, struct stat64 *__buf) __THROW __nonnull ((2));\n@@ -1351,9 +1351,10 @@ fix = {\n fix = {\n     hackname  = glibc_c99_inline_3;\n     files     = bits/string2.h, '*/bits/string2.h';\n+    select    = \"extern __inline\";\n     bypass    = \"__STDC_VERSION__\";\n     c_fix     = format;\n-    c_fix_arg = \"# if defined(__cplusplus) || __STDC_VERSION__ >= 19901L\";\n+    c_fix_arg = \"# if defined(__cplusplus) || defined(__GNUC_STDC_INLINE__)\";\n     c_fix_arg = \"^# ifdef __cplusplus$\";\n     test_text = <<-EOT\n \t# ifdef __cplusplus\n@@ -1369,9 +1370,10 @@ fix = {\n     hackname  = glibc_c99_inline_4;\n     files     = sys/sysmacros.h, '*/sys/sysmacros.h';\n     bypass    = \"__STDC_VERSION__\";\n-    select    = '(^| )extern ';\n+    select    = \"extern __inline\";\n     c_fix     = format;\n-    c_fix_arg = \"\\n#if __STDC_VERSION__ < 199901L\\nextern\\n#endif\\n\";\n+    c_fix_arg = \"\\n#ifdef __GNUC_GNU_INLINE__\\nextern\\n#endif\\n\";\n+    c_fix_arg = '(^| )extern ';\n     test_text = <<-EOT\n \t__extension__ extern __inline unsigned int\n \t__extension__ __extern_inline unsigned int"}, {"sha": "1da54fdec7065eb27b86677bb6b9d877e6e5eaef", "filename": "fixincludes/tests/base/bits/string2.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ftests%2Fbase%2Fbits%2Fstring2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ftests%2Fbase%2Fbits%2Fstring2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fbits%2Fstring2.h?ref=cb3790cb4e360256af0cfcd99a7933f1c172d40a", "patch": "@@ -10,7 +10,7 @@\n \n \n #if defined( GLIBC_C99_INLINE_3_CHECK )\n-# if defined(__cplusplus) || __STDC_VERSION__ >= 19901L\n+# if defined(__cplusplus) || defined(__GNUC_STDC_INLINE__)\n #  define __STRING_INLINE inline\n # else\n #  define __STRING_INLINE extern __inline"}, {"sha": "d677a13292fffed2078a87be0a6555057d8f5f4b", "filename": "fixincludes/tests/base/sys/stat.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ftests%2Fbase%2Fsys%2Fstat.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ftests%2Fbase%2Fsys%2Fstat.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fsys%2Fstat.h?ref=cb3790cb4e360256af0cfcd99a7933f1c172d40a", "patch": "@@ -15,11 +15,11 @@\n \n \n #if defined( GLIBC_C99_INLINE_2_CHECK )\n-#if __STDC_VERSION__ < 199901L\n+#ifdef __GNUC_GNU_INLINE__\n extern\n #endif\n __inline__ int fstat64 (int __fd, struct stat64 *__buf) __THROW __nonnull ((2));\n-#if __STDC_VERSION__ < 199901L\n+#ifdef __GNUC_GNU_INLINE__\n extern\n #endif\n __inline__ int"}, {"sha": "6fc19425e84cf24b1a27e3a34587c7ccfb624f3d", "filename": "fixincludes/tests/base/sys/sysmacros.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ftests%2Fbase%2Fsys%2Fsysmacros.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb3790cb4e360256af0cfcd99a7933f1c172d40a/fixincludes%2Ftests%2Fbase%2Fsys%2Fsysmacros.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/fixincludes%2Ftests%2Fbase%2Fsys%2Fsysmacros.h?ref=cb3790cb4e360256af0cfcd99a7933f1c172d40a", "patch": "@@ -11,13 +11,13 @@\n \n #if defined( GLIBC_C99_INLINE_4_CHECK )\n __extension__\n-#if __STDC_VERSION__ < 199901L\n+#ifdef __GNUC_GNU_INLINE__\n extern\n #endif\n __inline unsigned int\n __extension__ __extern_inline unsigned int\n \n-#if __STDC_VERSION__ < 199901L\n+#ifdef __GNUC_GNU_INLINE__\n extern\n #endif\n __inline unsigned int"}]}