{"sha": "638a085f5c16d6557ffa7f40b73ef80d354ed8bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM4YTA4NWY1YzE2ZDY1NTdmZmE3ZjQwYjczZWY4MGQzNTRlZDhiZA==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2012-06-13T18:45:17Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2012-06-13T18:45:17Z"}, "message": "re PR target/53568 (SH Target: Add support for bswap built-ins)\n\n\tPR target/53568\n\t* config/sh/sh.md (bswapsi2): New expander.\n\t(swapbsi2): New insn.\n\nFrom-SVN: r188524", "tree": {"sha": "884bba83d6c1b37c48b1dddd1026ed60cafbc25c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/884bba83d6c1b37c48b1dddd1026ed60cafbc25c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/638a085f5c16d6557ffa7f40b73ef80d354ed8bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/638a085f5c16d6557ffa7f40b73ef80d354ed8bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/638a085f5c16d6557ffa7f40b73ef80d354ed8bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/638a085f5c16d6557ffa7f40b73ef80d354ed8bd/comments", "author": null, "committer": null, "parents": [{"sha": "054121a40887206a4ecc0646fa645a6a94e3d2f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/054121a40887206a4ecc0646fa645a6a94e3d2f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/054121a40887206a4ecc0646fa645a6a94e3d2f9"}], "stats": {"total": 38, "additions": 38, "deletions": 0}, "files": [{"sha": "41a3e07a9532226dead927b13b10dd401b5c30fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638a085f5c16d6557ffa7f40b73ef80d354ed8bd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638a085f5c16d6557ffa7f40b73ef80d354ed8bd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=638a085f5c16d6557ffa7f40b73ef80d354ed8bd", "patch": "@@ -1,3 +1,9 @@\n+2012-06-13  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR target/53568\n+\t* config/sh/sh.md (bswapsi2): New expander.\n+\t(swapbsi2): New insn.\n+\n 2012-06-13  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/53647"}, {"sha": "05a4f38c1dcbaf8e4e0cc359654451a21507936f", "filename": "gcc/config/sh/sh.md", "status": "modified", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638a085f5c16d6557ffa7f40b73ef80d354ed8bd/gcc%2Fconfig%2Fsh%2Fsh.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638a085f5c16d6557ffa7f40b73ef80d354ed8bd/gcc%2Fconfig%2Fsh%2Fsh.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.md?ref=638a085f5c16d6557ffa7f40b73ef80d354ed8bd", "patch": "@@ -4529,6 +4529,38 @@ label:\n   emit_label_after (skip_neg_label, emit_insn (gen_negc (high_dst, high_src)));\n   DONE;\n })\n+\n+(define_expand \"bswapsi2\"\n+  [(set (match_operand:SI 0 \"arith_reg_dest\" \"\")\n+\t(bswap:SI (match_operand:SI 1 \"arith_reg_operand\" \"\")))]\n+  \"TARGET_SH1\"\n+{\n+  if (! can_create_pseudo_p ())\n+    FAIL;\n+  else\n+    {\n+      rtx tmp0 = gen_reg_rtx (SImode);\n+      rtx tmp1 = gen_reg_rtx (SImode);\n+\n+      emit_insn (gen_swapbsi2 (tmp0, operands[1]));\n+      emit_insn (gen_rotlsi3_16 (tmp1, tmp0));\n+      emit_insn (gen_swapbsi2 (operands[0], tmp1));\n+      DONE;\n+    }\n+})\n+\n+(define_insn \"swapbsi2\"\n+  [(set (match_operand:SI 0 \"arith_reg_dest\" \"=r\")\n+\t(ior:SI (and:SI (match_operand:SI 1 \"arith_reg_operand\" \"r\")\n+\t\t\t(const_int 4294901760))\n+\t\t(ior:SI (and:SI (ashift:SI (match_dup 1) (const_int 8))\n+\t\t\t\t(const_int 65280))\n+\t\t\t(and:SI (ashiftrt:SI (match_dup 1) (const_int 8))\n+\t\t\t\t(const_int 255)))))]\n+  \"TARGET_SH1\"\n+  \"swap.b\t%1,%0\"\n+  [(set_attr \"type\" \"arith\")])\n+\n \f\n ;; -------------------------------------------------------------------------\n ;; Zero extension instructions"}]}