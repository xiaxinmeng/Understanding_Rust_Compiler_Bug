{"sha": "1df918ac8ec140974275e1d976d6d828789bfaa0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRmOTE4YWM4ZWMxNDA5NzQyNzVlMWQ5NzZkNmQ4Mjg3ODliZmFhMA==", "commit": {"author": {"name": "Daniel Berlin", "email": "dberlin@dberlin.org", "date": "2007-04-07T00:19:46Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2007-04-07T00:19:46Z"}, "message": "in / 2007-04-06 Daniel Berlin <dberlin@dberlin.org>\n\nin /\n2007-04-06  Daniel Berlin  <dberlin@dberlin.org>\n\n\t* tree.c (staticp): No longer use staticp langhook.\n\t* langhooks.c (lhd_staticp): Removed.\n\t* langhooks.h (struct lang_hooks): Remove staticp.\n\t* c-common.c (c_staticp): Remove.\n\t* c-common.h (c_staticp): Ditto.\n\t* langhooks-defs.h (lhd_staticp): Ditto.\n\t(LHD_HOOKS_STATICP): Ditto\n\t* tree.h (gcc_assert_lowered): New macro.\n\nin cp/\t\t\t\t       \n\n2007-04-06  Daniel Berlin  <dberlin@dberlin.org>\n\n\t* cp-objcp-common.c (cxx_staticp): Remove.\n\t* cp-objcp-common.h (LANG_HOOKS_STATICP): Remove.\n\t* cp-tree.h (cxx_staticp):\n\nFrom-SVN: r123636", "tree": {"sha": "7fdd6d2fc0a5b2c2914e58ae503907b961d62cdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7fdd6d2fc0a5b2c2914e58ae503907b961d62cdd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1df918ac8ec140974275e1d976d6d828789bfaa0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1df918ac8ec140974275e1d976d6d828789bfaa0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1df918ac8ec140974275e1d976d6d828789bfaa0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1df918ac8ec140974275e1d976d6d828789bfaa0/comments", "author": {"login": "dberlin", "id": 324715, "node_id": "MDQ6VXNlcjMyNDcxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/324715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberlin", "html_url": "https://github.com/dberlin", "followers_url": "https://api.github.com/users/dberlin/followers", "following_url": "https://api.github.com/users/dberlin/following{/other_user}", "gists_url": "https://api.github.com/users/dberlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberlin/subscriptions", "organizations_url": "https://api.github.com/users/dberlin/orgs", "repos_url": "https://api.github.com/users/dberlin/repos", "events_url": "https://api.github.com/users/dberlin/events{/privacy}", "received_events_url": "https://api.github.com/users/dberlin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1bfe2e5fca9f4962aed93b1a1696784bf9cf1909", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bfe2e5fca9f4962aed93b1a1696784bf9cf1909", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bfe2e5fca9f4962aed93b1a1696784bf9cf1909"}], "stats": {"total": 77, "additions": 23, "deletions": 54}, "files": [{"sha": "e6e5b7abe8a3e385a70cfb3b1cb67e7db5f1b0f6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -1,3 +1,14 @@\n+2007-04-06  Daniel Berlin  <dberlin@dberlin.org>\n+\n+\t* tree.c (staticp): No longer use staticp langhook.\n+\t* langhooks.c (lhd_staticp): Removed.\n+\t* langhooks.h (struct lang_hooks): Remove staticp.\n+\t* c-common.c (c_staticp): Remove.\n+\t* c-common.h (c_staticp): Ditto.\n+\t* langhooks-defs.h (lhd_staticp): Ditto.\n+\t(LHD_HOOKS_STATICP): Ditto\n+\t* tree.h (gcc_assert_lowered): New macro.\n+\n 2007-04-06  Zdenek Dvorak  <dvorakz@suse.cz>\n \n \t* tree-ssa-loop-niter.c (idx_infer_loop_bounds): Add and use"}, {"sha": "af8b8aa075ae247522b4bef8c1c4bdb160411a03", "filename": "gcc/c-common.c", "status": "modified", "additions": 0, "deletions": 9, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -4294,15 +4294,6 @@ c_expand_body (tree fndecl)\n \t\t\t\tdecl_fini_priority_lookup (fndecl));\n }\n \n-/* Hook used by staticp to handle language-specific tree codes.  */\n-\n-tree\n-c_staticp (tree exp)\n-{\n-  return (TREE_CODE (exp) == COMPOUND_LITERAL_EXPR\n-\t  && TREE_STATIC (COMPOUND_LITERAL_EXPR_DECL (exp))\n-\t  ? exp : NULL);\n-}\n \f\n \n /* Given a boolean expression ARG, return a tree representing an increment"}, {"sha": "40025c33c34e8f4e84a8add110c3156120beb5d4", "filename": "gcc/c-common.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -825,8 +825,6 @@ extern bool vector_types_convertible_p (tree t1, tree t2, bool emit_lax_note);\n extern rtx c_expand_expr (tree, rtx, enum machine_mode, int, rtx *);\n extern void c_expand_body (tree);\n \n-extern tree c_staticp (tree);\n-\n extern void init_c_lex (void);\n \n extern void c_cpp_builtins (cpp_reader *);"}, {"sha": "00519c7c0eeeb1ceb021250f42361305b8e7dbb1", "filename": "gcc/c-objc-common.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fc-objc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fc-objc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-objc-common.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -56,8 +56,6 @@ extern void c_initialize_diagnostics (diagnostic_context *);\n #define LANG_HOOKS_FINISH_INCOMPLETE_DECL c_finish_incomplete_decl\n #undef LANG_HOOKS_REDUCE_BIT_FIELD_OPERATIONS\n #define LANG_HOOKS_REDUCE_BIT_FIELD_OPERATIONS true\n-#undef LANG_HOOKS_STATICP\n-#define LANG_HOOKS_STATICP c_staticp\n #undef LANG_HOOKS_NO_BODY_BLOCKS\n #define LANG_HOOKS_NO_BODY_BLOCKS true\n #undef LANG_HOOKS_WARN_UNUSED_GLOBAL_DECL"}, {"sha": "5d3491f3f10b7e5f92a114a1eb28f01204710071", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -1,3 +1,9 @@\n+2007-04-06  Daniel Berlin  <dberlin@dberlin.org>\n+\n+\t* cp-objcp-common.c (cxx_staticp): Remove.\n+\t* cp-objcp-common.h (LANG_HOOKS_STATICP): Remove.\n+\t* cp-tree.h (cxx_staticp): \t\n+\n 2007-04-04  Danny Smith  <dannysmith.users.sourceforge.net>\n \n \t* class.c (check_for_override): Don't remove dllmport attribute"}, {"sha": "f74c60ae52753cb1bf8d024a30a52b5c73281bb7", "filename": "gcc/cp/cp-objcp-common.c", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2Fcp-objcp-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2Fcp-objcp-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-objcp-common.c?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -200,21 +200,6 @@ cxx_types_compatible_p (tree x, tree y)\n   return 0;\n }\n \n-tree\n-cxx_staticp (tree arg)\n-{\n-  switch (TREE_CODE (arg))\n-    {\n-    case BASELINK:\n-      return staticp (BASELINK_FUNCTIONS (arg));\n-\n-    default:\n-      break;\n-    }\n-  \n-  return NULL_TREE;\n-}\n-\n /* Stubs to keep c-opts.c happy.  */\n void\n push_file_scope (void)"}, {"sha": "2d40e2227bbe3b16a11f9cd897acf83117ffc1e4", "filename": "gcc/cp/cp-objcp-common.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2Fcp-objcp-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2Fcp-objcp-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-objcp-common.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -59,8 +59,6 @@ extern tree objcp_tsubst_copy_and_build (tree, tree, tsubst_flags_t,\n #define LANG_HOOKS_EXPAND_DECL c_expand_decl\n #undef LANG_HOOKS_PARSE_FILE\n #define LANG_HOOKS_PARSE_FILE c_common_parse_file\n-#undef LANG_HOOKS_STATICP\n-#define LANG_HOOKS_STATICP cxx_staticp\n #undef LANG_HOOKS_DUP_LANG_SPECIFIC_DECL\n #define LANG_HOOKS_DUP_LANG_SPECIFIC_DECL cxx_dup_lang_specific_decl\n #undef LANG_HOOKS_SET_DECL_ASSEMBLER_NAME"}, {"sha": "32eb08477d0e31530d397f910643c822fbac1fd3", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -4816,7 +4816,6 @@ extern bool cp_var_mod_type_p\t\t\t(tree, tree);\n extern void cxx_initialize_diagnostics\t\t(struct diagnostic_context *);\n extern int cxx_types_compatible_p\t\t(tree, tree);\n extern void init_shadowed_var_for_decl\t\t(void);\n-extern tree cxx_staticp                         (tree);\n \n /* in cp-gimplify.c */\n extern int cp_gimplify_expr\t\t\t(tree *, tree *, tree *);"}, {"sha": "4416bb925a9803f621cd0678b21d2bddd94d222c", "filename": "gcc/langhooks-def.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Flanghooks-def.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Flanghooks-def.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks-def.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -49,7 +49,6 @@ extern tree lhd_return_tree (tree);\n extern tree lhd_return_null_tree_v (void);\n extern tree lhd_return_null_tree (tree);\n extern tree lhd_do_nothing_iii_return_null_tree (int, int, int);\n-extern tree lhd_staticp (tree);\n extern void lhd_print_tree_nothing (FILE *, tree, int);\n extern const char *lhd_decl_printable_name (tree, int);\n extern const char *lhd_dwarf_name (tree, int);\n@@ -110,7 +109,6 @@ extern void lhd_omp_firstprivatize_type_sizes (struct gimplify_omp_ctx *,\n #define LANG_HOOKS_EXPAND_EXPR\t\tlhd_expand_expr\n #define LANG_HOOKS_EXPAND_DECL\t\tlhd_expand_decl\n #define LANG_HOOKS_FINISH_INCOMPLETE_DECL lhd_do_nothing_t\n-#define LANG_HOOKS_STATICP\t\tlhd_staticp\n #define LANG_HOOKS_DUP_LANG_SPECIFIC_DECL lhd_do_nothing_t\n #define LANG_HOOKS_SET_DECL_ASSEMBLER_NAME lhd_set_decl_assembler_name\n #define LANG_HOOKS_REDUCE_BIT_FIELD_OPERATIONS false\n@@ -296,7 +294,6 @@ extern tree lhd_make_node (enum tree_code);\n   LANG_HOOKS_EXPAND_DECL, \\\n   LANG_HOOKS_FINISH_INCOMPLETE_DECL, \\\n   LANG_HOOKS_MARK_ADDRESSABLE, \\\n-  LANG_HOOKS_STATICP, \\\n   LANG_HOOKS_DUP_LANG_SPECIFIC_DECL, \\\n   LANG_HOOKS_SET_DECL_ASSEMBLER_NAME, \\\n   LANG_HOOKS_REDUCE_BIT_FIELD_OPERATIONS, \\"}, {"sha": "49a5a07c9b7928f80fd6eaee259d3b6e5b0be51c", "filename": "gcc/langhooks.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Flanghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Flanghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.c?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -117,14 +117,6 @@ lhd_print_tree_nothing (FILE * ARG_UNUSED (file),\n {\n }\n \n-/* Called from staticp.  */\n-\n-tree\n-lhd_staticp (tree ARG_UNUSED (exp))\n-{\n-  return NULL;\n-}\n-\n /* Called from check_global_declarations.  */\n \n bool"}, {"sha": "85dbec6bb4e4dd96fd8ba11b60dc6966f65eacea", "filename": "gcc/langhooks.h", "status": "modified", "additions": 0, "deletions": 3, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Flanghooks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Flanghooks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -324,9 +324,6 @@ struct lang_hooks\n      successful.  */\n   bool (*mark_addressable) (tree);\n \n-  /* Hook called by staticp for language-specific tree codes.  */\n-  tree (*staticp) (tree);\n-\n   /* Replace the DECL_LANG_SPECIFIC data, which may be NULL, of the\n      DECL_NODE with a newly GC-allocated copy.  */\n   void (*dup_lang_specific_decl) (tree);"}, {"sha": "816275c1f68dbfc8cb57b5b3fa3b9d71770119b9", "filename": "gcc/tree.c", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -1986,10 +1986,7 @@ staticp (tree arg)\n       return arg;\n \n     case COMPONENT_REF:\n-      /* If the thing being referenced is not a field, then it is\n-\t something language specific.  */\n-      if (TREE_CODE (TREE_OPERAND (arg, 1)) != FIELD_DECL)\n-\treturn (*lang_hooks.staticp) (arg);\n+      gcc_assert (TREE_CODE (TREE_OPERAND (arg, 1)) == FIELD_DECL);\n \n       /* If we are referencing a bitfield, we can't evaluate an\n \t ADDR_EXPR at compile time and so it isn't a constant.  */\n@@ -2015,11 +2012,10 @@ staticp (tree arg)\n \treturn false;\n \n     default:\n-      if ((unsigned int) TREE_CODE (arg)\n-\t  >= (unsigned int) LAST_AND_UNUSED_TREE_CODE)\n-\treturn lang_hooks.staticp (arg);\n-      else\n-\treturn NULL;\n+      /* All language specific tree codes should have been lowered by\n+\t now. */\n+      gcc_assert_lowered (arg);\n+      return NULL;\n     }\n }\n \f"}, {"sha": "e781e64dccf489bd5206bee6f76bea41d95c3675", "filename": "gcc/tree.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1df918ac8ec140974275e1d976d6d828789bfaa0/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=1df918ac8ec140974275e1d976d6d828789bfaa0", "patch": "@@ -921,6 +921,7 @@ extern void omp_clause_range_check_failed (const tree, const char *, int,\n \n #endif\n \n+#define gcc_assert_lowered(NODE) gcc_assert (TREE_CODE (NODE) <= LAST_AND_UNUSED_TREE_CODE)\n #define TREE_BLOCK(NODE)\t\t*(tree_block (NODE))\n \n #include \"tree-check.h\""}]}