{"sha": "1e7ef862ac809db0f6b9dfb746a12e27b7098194", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU3ZWY4NjJhYzgwOWRiMGY2YjlkZmI3NDZhMTJlMjdiNzA5ODE5NA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2017-02-01T12:47:25Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2017-02-01T12:47:25Z"}, "message": "re PR tree-optimization/79315 (ICE while building SPEC CPU 2006 FP with -Ofast -ftree-parallelize-loops)\n\n2017-02-01  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/79315\n\t* tree-cfg.c (move_stmt_op): Never set TREE_BLOCK when it\n\twas not set before.\n\n\t* gfortran.dg/pr79315.f90: New testcase.\n\nFrom-SVN: r245089", "tree": {"sha": "77929da05e27174ece26f2fdae72cad96f8f0b27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/77929da05e27174ece26f2fdae72cad96f8f0b27"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e7ef862ac809db0f6b9dfb746a12e27b7098194", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e7ef862ac809db0f6b9dfb746a12e27b7098194", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e7ef862ac809db0f6b9dfb746a12e27b7098194", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e7ef862ac809db0f6b9dfb746a12e27b7098194/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "11d10beb5762c48de90a004368df2c2863b33d7a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11d10beb5762c48de90a004368df2c2863b33d7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11d10beb5762c48de90a004368df2c2863b33d7a"}], "stats": {"total": 72, "additions": 68, "deletions": 4}, "files": [{"sha": "40a1a92d953c645f8a51de7f4452730d963ddb70", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e7ef862ac809db0f6b9dfb746a12e27b7098194", "patch": "@@ -1,3 +1,9 @@\n+2017-02-01  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/79315\n+\t* tree-cfg.c (move_stmt_op): Never set TREE_BLOCK when it\n+\twas not set before.\n+\n 2017-02-01  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/71824"}, {"sha": "489ecaf742d6bd0675c421a7718809efbda11845", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1e7ef862ac809db0f6b9dfb746a12e27b7098194", "patch": "@@ -1,3 +1,8 @@\n+2017-02-01  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/79315\n+\t* gfortran.dg/pr79315.f90: New testcase.\n+\n 2017-02-01  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/71824"}, {"sha": "8cd89691ce9af992fee88067ee6940bb630f96b5", "filename": "gcc/testsuite/gfortran.dg/pr79315.f90", "status": "added", "additions": 52, "deletions": 0, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr79315.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr79315.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr79315.f90?ref=1e7ef862ac809db0f6b9dfb746a12e27b7098194", "patch": "@@ -0,0 +1,52 @@\n+! { dg-do compile }\n+! { dg-require-effective-target pthread }\n+! { dg-options \"-Ofast -ftree-parallelize-loops=4\" }\n+\n+SUBROUTINE wsm32D(t, &\n+   w, &\n+   den, &\n+   p, &\n+   delz, &\n+                     its,&\n+   ite, &\n+   kts, &\n+   kte  &\n+                      )\n+  REAL, DIMENSION( its:ite , kts:kte ),                           &\n+        INTENT(INOUT) ::                                          &\n+                                                               t\n+  REAL, DIMENSION( ims:ime , kms:kme ),                           &\n+        INTENT(IN   ) ::                                       w, &\n+                                                             den, &\n+                                                               p, &\n+                                                            delz\n+  REAL, DIMENSION( its:ite , kts:kte ) ::                         &\n+        qs, &\n+        xl, &\n+        work1, &\n+        work2, &\n+        qs0, &\n+        n0sfac\n+      diffus(x,y) = 8.794e-5*x**1.81/y\n+      diffac(a,b,c,d,e) = d*a*a/(xka(c,d)*rv*c*c)+1./(e*diffus(c,b))\n+      venfac(a,b,c) = (viscos(b,c)/diffus(b,a))**(.3333333)       &\n+             /viscos(b,c)**(.5)*(den0/c)**0.25\n+      do loop = 1,loops\n+      xa=-dldt/rv\n+      do k = kts, kte\n+        do i = its, ite\n+          tr=ttp/t(i,k)\n+          if(t(i,k).lt.ttp) then\n+            qs(i,k) =psat*(tr**xa)*exp(xb*(1.-tr))\n+          endif\n+          qs0(i,k)  =psat*(tr**xa)*exp(xb*(1.-tr))\n+        enddo\n+        do i = its, ite\n+          if(t(i,k).ge.t0c) then\n+            work1(i,k) = diffac(xl(i,k),p(i,k),t(i,k),den(i,k),qs(i,k))\n+          endif\n+          work2(i,k) = venfac(p(i,k),t(i,k),den(i,k))\n+        enddo\n+      enddo\n+      enddo                  ! big loops\n+END SUBROUTINE wsm32D"}, {"sha": "a540416cbb5863bff18bbb4a1e9400e33e8d8d15", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e7ef862ac809db0f6b9dfb746a12e27b7098194/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=1e7ef862ac809db0f6b9dfb746a12e27b7098194", "patch": "@@ -6636,11 +6636,12 @@ move_stmt_op (tree *tp, int *walk_subtrees, void *data)\n   if (EXPR_P (t))\n     {\n       tree block = TREE_BLOCK (t);\n-      if (block == p->orig_block\n-\t  || (p->orig_block == NULL_TREE\n-\t      && block != NULL_TREE))\n+      if (block == NULL_TREE)\n+\t;\n+      else if (block == p->orig_block\n+\t       || p->orig_block == NULL_TREE)\n \tTREE_SET_BLOCK (t, p->new_block);\n-      else if (flag_checking && block != NULL_TREE)\n+      else if (flag_checking)\n \t{\n \t  while (block && TREE_CODE (block) == BLOCK && block != p->orig_block)\n \t    block = BLOCK_SUPERCONTEXT (block);"}]}