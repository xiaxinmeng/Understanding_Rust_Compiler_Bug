{"sha": "c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzE2YzQ3ZmJmMDRmYThmNGE4OWI3ODQ1MWM2YzFkYjY1ZmVlZmJhMQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-03-19T01:21:05Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-03-19T01:21:05Z"}, "message": "friend.c (make_friend_class): Avoid core dump when not-yet-defined friend type lacks TYPE_LANG_SPECIFIC().\n\n\t* friend.c (make_friend_class): Avoid core dump when\n\tnot-yet-defined friend type lacks TYPE_LANG_SPECIFIC().\n\t* decl.c (start_function): Suppress normal linkage heuristics\n\tfor #pragma interface under MULTIPLE_SYMBOL_SPACES.\n\nFrom-SVN: r25857", "tree": {"sha": "4848bb759d2f48031ec0df3b8a181910c50671f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4848bb759d2f48031ec0df3b8a181910c50671f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/comments", "author": null, "committer": null, "parents": [{"sha": "192babfd6b55504d299cbd7908ca32d7434b0985", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/192babfd6b55504d299cbd7908ca32d7434b0985", "html_url": "https://github.com/Rust-GCC/gccrs/commit/192babfd6b55504d299cbd7908ca32d7434b0985"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "18766012742d78aa8cc585f0f6ef2bc65ab5f015", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "patch": "@@ -1,3 +1,13 @@\n+1999-03-19  Chip Salzenberg  <chip@perlsupport.com>\n+\n+\t* friend.c (make_friend_class): Avoid core dump when\n+\tnot-yet-defined friend type lacks TYPE_LANG_SPECIFIC().\n+\n+1999-03-18  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* decl.c (start_function): Suppress normal linkage heuristics\n+\tfor #pragma interface under MULTIPLE_SYMBOL_SPACES.\n+\n 1999-03-19  Alexandre Oliva  <oliva@dcc.unicamp.br>\n \n \t* Make-lang.in: ($(INTL_TARGETS)): depend on cp/parse.c"}, {"sha": "200c8c4077243973342fd142ebf6317e0a091e9e", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "patch": "@@ -13133,6 +13133,20 @@ start_function (declspecs, declarator, attrs, pre_parsed_p)\n       DECL_NOT_REALLY_EXTERN (decl1) = 0;\n       DECL_INTERFACE_KNOWN (decl1) = 1;\n     }\n+  else if (interface_unknown && interface_only\n+\t   && (! DECL_TEMPLATE_INSTANTIATION (decl1)\n+\t       || flag_alt_external_templates))\n+    {\n+      /* If MULTIPLE_SYMBOL_SPACES is defined and we saw a #pragma\n+\t interface, we will have interface_only set but not\n+\t interface_known.  In that case, we don't want to use the normal\n+\t heuristics because someone will supply a #pragma implementation\n+\t elsewhere, and deducing it here would produce a conflict.  */\n+      comdat_linkage (decl1);\n+      DECL_EXTERNAL (decl1) = 0;\n+      DECL_INTERFACE_KNOWN (decl1) = 1;\n+      DECL_DEFER_OUTPUT (decl1) = 1;\n+    }\n   else\n     {\n       /* This is a definition, not a reference."}, {"sha": "30b3c510972757c61a070b8ed1601b9086b7a52a", "filename": "gcc/cp/friend.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/gcc%2Fcp%2Ffriend.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c16c47fbf04fa8f4a89b78451c6c1db65feefba1/gcc%2Fcp%2Ffriend.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ffriend.c?ref=c16c47fbf04fa8f4a89b78451c6c1db65feefba1", "patch": "@@ -263,7 +263,8 @@ make_friend_class (type, friend_type)\n       return;\n     }\n \n-  if (CLASSTYPE_TEMPLATE_SPECIALIZATION (friend_type)\n+  if (CLASS_TYPE_P (friend_type)\n+      && CLASSTYPE_TEMPLATE_SPECIALIZATION (friend_type)\n       && uses_template_parms (friend_type))\n     {\n       /* [temp.friend]"}]}