{"sha": "27624b9e21febe7d4842b2916aa23965a98ad3fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc2MjRiOWUyMWZlYmU3ZDQ4NDJiMjkxNmFhMjM5NjVhOThhZDNmYQ==", "commit": {"author": {"name": "Adam Nemet", "email": "nemet@gcc.gnu.org", "date": "2008-04-21T23:35:47Z"}, "committer": {"name": "Adam Nemet", "email": "nemet@gcc.gnu.org", "date": "2008-04-21T23:35:47Z"}, "message": "coverage.c: Include tree-pass.h.\n\n\t* coverage.c: Include tree-pass.h.\n\t(coverage_counter_alloc): Print da_file_name to the dump file.\n\ntestsuite/\n\t* gcc.dg/profile-dir-1.c, gcc.dg/profile-dir-2.c,\n\tgcc.dg/profile-dir-3.c: Generate tree_profile dump.  Check gcda\n\tfile name there instead of the assembly.  Cleanup tree_profile\n\tdump file.\n\nFrom-SVN: r134541", "tree": {"sha": "a30b48534fc2c68fb2d19c5bd58f2529bcf5d3f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a30b48534fc2c68fb2d19c5bd58f2529bcf5d3f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27624b9e21febe7d4842b2916aa23965a98ad3fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27624b9e21febe7d4842b2916aa23965a98ad3fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27624b9e21febe7d4842b2916aa23965a98ad3fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27624b9e21febe7d4842b2916aa23965a98ad3fa/comments", "author": null, "committer": null, "parents": [{"sha": "2cdfa19e36e75288b35678c28d60070cee41086e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2cdfa19e36e75288b35678c28d60070cee41086e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2cdfa19e36e75288b35678c28d60070cee41086e"}], "stats": {"total": 40, "additions": 29, "deletions": 11}, "files": [{"sha": "e7fc5ef03e8b747d360db0be80209b85658a6dcc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=27624b9e21febe7d4842b2916aa23965a98ad3fa", "patch": "@@ -1,10 +1,15 @@\n-2008-04-24  Kenneth Zadeck <zadeck@naturalbridge.com>\n+2008-04-21  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* coverage.c: Include tree-pass.h.\n+\t(coverage_counter_alloc): Print da_file_name to the dump file.\n+\n+2008-04-21  Kenneth Zadeck <zadeck@naturalbridge.com>\n+\n \t* sbitmap.c (sbitmap_range_empty_p): New function.\n \t* sbitmap.h (sbitmap_range_empty_p): New function.\n-\t* bitmap.h: Now includes obstack.h.  \n+\t* bitmap.h: Now includes obstack.h.\n \n-\n-2008-04-24  Richard Sandiford  <rsandifo@nildram.co.uk>\n+2008-04-21  Richard Sandiford  <rsandifo@nildram.co.uk>\n \t    Kenneth Zadeck <zadeck@naturalbridge.com>\n \n \t* dbgcnt.def (ra_byte_scan): Added.\n@@ -73,7 +78,6 @@\n \t(rtl_opt_pass pass_fast_rtl_byte_dce): New pass.\n \t* Makefile.in (df-byte-scan.o, debugcnt.o): Added dependencies.\n \n-\n 2008-04-21  Daniel Franke  <franke.daniel@gmail.com>\n \n \tPR fortran/35019"}, {"sha": "ec8d589539fdd97f590450d12c5756acf45d0857", "filename": "gcc/coverage.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Fcoverage.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Fcoverage.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.c?ref=27624b9e21febe7d4842b2916aa23965a98ad3fa", "patch": "@@ -43,6 +43,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"hashtab.h\"\n #include \"tree-iterator.h\"\n #include \"cgraph.h\"\n+#include \"tree-pass.h\"\n \n #include \"gcov-io.c\"\n \n@@ -421,6 +422,9 @@ coverage_counter_alloc (unsigned counter, unsigned num)\n       ASM_GENERATE_INTERNAL_LABEL (buf, \"LPBX\", counter + 1);\n       DECL_NAME (tree_ctr_tables[counter]) = get_identifier (buf);\n       DECL_ALIGN (tree_ctr_tables[counter]) = TYPE_ALIGN (gcov_type_node);\n+\n+      if (dump_file)\n+\tfprintf (dump_file, \"Using data file %s\\n\", da_file_name);\n     }\n   fn_b_ctrs[counter] = fn_n_ctrs[counter];\n   fn_n_ctrs[counter] += num;"}, {"sha": "4a86a03acafcab44fc2b0ad17d423dcc5adfc53c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=27624b9e21febe7d4842b2916aa23965a98ad3fa", "patch": "@@ -1,3 +1,10 @@\n+2008-04-21  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* gcc.dg/profile-dir-1.c, gcc.dg/profile-dir-2.c,\n+\tgcc.dg/profile-dir-3.c: Generate tree_profile dump.  Check gcda\n+\tfile name there instead of the assembly.  Cleanup tree_profile\n+\tdump file.\n+\n 2008-04-21  Steve Ellcey  <sje@cup.hp.com>\n \n \t* gcc.dg/vect/vect-vfa-slp.c: XFAIL if vect_no_align."}, {"sha": "a0a22ffb0b0a8c78c04d73ff906402e1806ea767", "filename": "gcc/testsuite/gcc.dg/profile-dir-1.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-1.c?ref=27624b9e21febe7d4842b2916aa23965a98ad3fa", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O -fprofile-generate=.\" } */\n-/* { dg-final { scan-assembler \"\\\"./profile-dir-1.gcda\\\"\" } } */\n+/* { dg-options \"-O -fprofile-generate=. -fdump-tree-tree_profile\" } */\n+/* { dg-final { scan-tree-dump \" ./profile-dir-1.gcda\" \"tree_profile\" } } */\n \n int\n main(void)\n@@ -9,3 +9,4 @@ main(void)\n }\n \n /* { dg-final { cleanup-coverage-files } } */\n+/* { dg-final { cleanup-tree-dump \"tree_profile\" } } */"}, {"sha": "454f0641aa295e6d52b1f21b632385b125010a0e", "filename": "gcc/testsuite/gcc.dg/profile-dir-2.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-2.c?ref=27624b9e21febe7d4842b2916aa23965a98ad3fa", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O -fprofile-generate\" } */\n-/* { dg-final { scan-assembler \"/profile-dir-2.gcda\" } } */\n+/* { dg-options \"-O -fprofile-generate -fdump-tree-tree_profile\" } */\n+/* { dg-final { scan-tree-dump \"/profile-dir-2.gcda\" \"tree_profile\" } } */\n \n int\n main(void)\n@@ -9,3 +9,4 @@ main(void)\n }\n \n /* { dg-final { cleanup-coverage-files } } */\n+/* { dg-final { cleanup-tree-dump \"tree_profile\" } } */"}, {"sha": "29b0a55871271b83011b588120bf9e3f07730f40", "filename": "gcc/testsuite/gcc.dg/profile-dir-3.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27624b9e21febe7d4842b2916aa23965a98ad3fa/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fprofile-dir-3.c?ref=27624b9e21febe7d4842b2916aa23965a98ad3fa", "patch": "@@ -1,6 +1,6 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O -fprofile-generate -fprofile-dir=.\" } */\n-/* { dg-final { scan-assembler \"\\\"./profile-dir-3.gcda\\\"\" } } */\n+/* { dg-options \"-O -fprofile-generate -fprofile-dir=. -fdump-tree-tree_profile\" } */\n+/* { dg-final { scan-tree-dump \" ./profile-dir-3.gcda\" \"tree_profile\" } } */\n \n int\n main(void)\n@@ -9,3 +9,4 @@ main(void)\n }\n \n /* { dg-final { cleanup-coverage-files } } */\n+/* { dg-final { cleanup-tree-dump \"tree_profile\" } } */"}]}