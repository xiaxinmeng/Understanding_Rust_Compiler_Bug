{"sha": "265b1d82bf8873b177f849d79509a90b3e753dc3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY1YjFkODJiZjg4NzNiMTc3Zjg0OWQ3OTUwOWE5MGIzZTc1M2RjMw==", "commit": {"author": {"name": "Stuart Henderson", "email": "shenders@gcc.gnu.org", "date": "2011-05-03T16:50:30Z"}, "committer": {"name": "Stuart Henderson", "email": "shenders@gcc.gnu.org", "date": "2011-05-03T16:50:30Z"}, "message": "2011-05-03  Stuart Henderson  <shenders@gcc.gnu.org>\n\n        From Bernd Schmidt:\n        * config/bfin/bfin.md (MOVCC): New mode_macro.\n        (mov<mode>cc_insn1, mov<mode>cc_insn2, mov<mode>cc): Renamed from\n        movsicc_insn1, movsicc_insn2 and movsicc and macroized.  Remove\n        comments from generated assembly.\n\nFrom-SVN: r173330", "tree": {"sha": "fd343e9de7cbbe00c76e8f963916550793fc82ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd343e9de7cbbe00c76e8f963916550793fc82ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/265b1d82bf8873b177f849d79509a90b3e753dc3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/265b1d82bf8873b177f849d79509a90b3e753dc3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/265b1d82bf8873b177f849d79509a90b3e753dc3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/265b1d82bf8873b177f849d79509a90b3e753dc3/comments", "author": null, "committer": null, "parents": [{"sha": "c1fd8753c5ebe34277fa7e75e4e92c1e8bc08277", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1fd8753c5ebe34277fa7e75e4e92c1e8bc08277", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1fd8753c5ebe34277fa7e75e4e92c1e8bc08277"}], "stats": {"total": 54, "additions": 32, "deletions": 22}, "files": [{"sha": "76908e52813cb798572ed39c4005d0db93db501e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/265b1d82bf8873b177f849d79509a90b3e753dc3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/265b1d82bf8873b177f849d79509a90b3e753dc3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=265b1d82bf8873b177f849d79509a90b3e753dc3", "patch": "@@ -1,3 +1,11 @@\n+2011-05-03  Stuart Henderson  <shenders@gcc.gnu.org>\n+\n+\tFrom Bernd Schmidt:\n+\t* config/bfin/bfin.md (MOVCC): New mode_macro.\n+\t(mov<mode>cc_insn1, mov<mode>cc_insn2, mov<mode>cc): Renamed from\n+\tmovsicc_insn1, movsicc_insn2 and movsicc and macroized.  Remove\n+\tcomments from generated assembly.\n+\n 2011-05-03  Stuart Henderson  <shenders@gcc.gnu.org>\n \n \tFrom Bernd Schmidt"}, {"sha": "c4722d4b132b60db542c4e29dfd8a4bb7c902eca", "filename": "gcc/config/bfin/bfin.md", "status": "modified", "additions": 24, "deletions": 22, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/265b1d82bf8873b177f849d79509a90b3e753dc3/gcc%2Fconfig%2Fbfin%2Fbfin.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/265b1d82bf8873b177f849d79509a90b3e753dc3/gcc%2Fconfig%2Fbfin%2Fbfin.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbfin%2Fbfin.md?ref=265b1d82bf8873b177f849d79509a90b3e753dc3", "patch": "@@ -415,44 +415,46 @@\n \n ;; Conditional moves\n \n-(define_expand \"movsicc\"\n-  [(set (match_operand:SI 0 \"register_operand\" \"\")\n-        (if_then_else:SI (match_operand 1 \"comparison_operator\" \"\")\n-                         (match_operand:SI 2 \"register_operand\" \"\")\n-                         (match_operand:SI 3 \"register_operand\" \"\")))]\n+(define_mode_iterator CCMOV [QI HI SI])\n+\n+(define_expand \"mov<mode>cc\"\n+  [(set (match_operand:CCMOV 0 \"register_operand\" \"\")\n+        (if_then_else:CCMOV (match_operand 1 \"comparison_operator\" \"\")\n+\t\t\t    (match_operand:CCMOV 2 \"register_operand\" \"\")\n+\t\t\t    (match_operand:CCMOV 3 \"register_operand\" \"\")))]\n   \"\"\n {\n-  operands[1] = bfin_gen_compare (operands[1], SImode);\n+  operands[1] = bfin_gen_compare (operands[1], <MODE>mode);\n })\n \n-(define_insn \"*movsicc_insn1\"\n-  [(set (match_operand:SI 0 \"register_operand\" \"=da,da,da\")\n-        (if_then_else:SI\n+(define_insn \"*mov<mode>cc_insn1\"\n+  [(set (match_operand:CCMOV 0 \"register_operand\" \"=da,da,da\")\n+        (if_then_else:CCMOV\n \t    (eq:BI (match_operand:BI 3 \"register_operand\" \"C,C,C\")\n \t\t(const_int 0))\n-\t    (match_operand:SI 1 \"register_operand\" \"da,0,da\")\n-\t    (match_operand:SI 2 \"register_operand\" \"0,da,da\")))]\n+\t    (match_operand:CCMOV 1 \"register_operand\" \"da,0,da\")\n+\t    (match_operand:CCMOV 2 \"register_operand\" \"0,da,da\")))]\n   \"\"\n   \"@\n-    if !cc %0 =%1; /* movsicc-1a */\n-    if cc %0 =%2; /* movsicc-1b */\n-    if !cc %0 =%1; if cc %0=%2; /* movsicc-1 */\"\n+    if !cc %0 = %1;\n+    if cc %0 = %2;\n+    if !cc %0 = %1; if cc %0 = %2;\"\n   [(set_attr \"length\" \"2,2,4\")\n    (set_attr \"type\" \"movcc\")\n    (set_attr \"seq_insns\" \"*,*,multi\")])\n \n-(define_insn \"*movsicc_insn2\"\n-  [(set (match_operand:SI 0 \"register_operand\" \"=da,da,da\")\n-        (if_then_else:SI\n+(define_insn \"*mov<mode>cc_insn2\"\n+  [(set (match_operand:CCMOV 0 \"register_operand\" \"=da,da,da\")\n+        (if_then_else:CCMOV\n \t    (ne:BI (match_operand:BI 3 \"register_operand\" \"C,C,C\")\n \t\t(const_int 0))\n-\t    (match_operand:SI 1 \"register_operand\" \"0,da,da\")\n-\t    (match_operand:SI 2 \"register_operand\" \"da,0,da\")))]\n+\t    (match_operand:CCMOV 1 \"register_operand\" \"0,da,da\")\n+\t    (match_operand:CCMOV 2 \"register_operand\" \"da,0,da\")))]\n   \"\"\n   \"@\n-   if !cc %0 =%2; /* movsicc-2b */\n-   if cc %0 =%1; /* movsicc-2a */\n-   if cc %0 =%1; if !cc %0=%2; /* movsicc-1 */\"\n+   if !cc %0 = %2;\n+   if cc %0 = %1;\n+   if cc %0 = %1; if !cc %0 = %2;\"\n   [(set_attr \"length\" \"2,2,4\")\n    (set_attr \"type\" \"movcc\")\n    (set_attr \"seq_insns\" \"*,*,multi\")])"}]}