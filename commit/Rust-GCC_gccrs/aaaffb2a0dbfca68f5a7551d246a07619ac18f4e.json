{"sha": "aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFhZmZiMmEwZGJmY2E2OGY1YTc1NTFkMjQ2YTA3NjE5YWMxOGY0ZQ==", "commit": {"author": {"name": "Andreas Krebbel", "email": "Andreas.Krebbel@de.ibm.com", "date": "2013-07-29T08:03:38Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2013-07-29T08:03:38Z"}, "message": "2013-07-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n\n\t* config/s390/target.h (htm_begin, htm_commit, htm_abort)\n\t(htm_transaction_active): Enable zEC12 instructions in the\n\tassembler.\n\t* configure.tgt: Remove -Wa,-march=zEC12 from XCFLAGS.\n\nFrom-SVN: r201301", "tree": {"sha": "a93a5af9999bdb5672913de89af5b23b583cd6da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a93a5af9999bdb5672913de89af5b23b583cd6da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/comments", "author": null, "committer": null, "parents": [{"sha": "a71f074979f6c12902ee08491e70c0f62fc6814e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a71f074979f6c12902ee08491e70c0f62fc6814e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a71f074979f6c12902ee08491e70c0f62fc6814e"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "dd558c00c14aae22873d7f7b9358e9ca9dc3a27d", "filename": "libitm/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/libitm%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/libitm%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2FChangeLog?ref=aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "patch": "@@ -1,3 +1,10 @@\n+2013-07-29  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n+\n+\t* config/s390/target.h (htm_begin, htm_commit, htm_abort)\n+\t(htm_transaction_active): Enable zEC12 instructions in the\n+\tassembler.\n+\t* configure.tgt: Remove -Wa,-march=zEC12 from XCFLAGS.\n+\n 2013-07-17  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* acinclude.m4: Add htm asm check for s390."}, {"sha": "cec49cf77745a2e3abddbf782a2da3ea27402657", "filename": "libitm/config/s390/target.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/libitm%2Fconfig%2Fs390%2Ftarget.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/libitm%2Fconfig%2Fs390%2Ftarget.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfig%2Fs390%2Ftarget.h?ref=aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "patch": "@@ -85,6 +85,7 @@ htm_init ()\n static inline uint32_t\n htm_begin ()\n {\n+  __asm volatile (\".machine \\\"all\\\"  \\n\\t\");\n   return __builtin_tbegin_nofloat (NULL);\n }\n \n@@ -97,12 +98,14 @@ htm_begin_success (uint32_t begin_ret)\n static inline void\n htm_commit ()\n {\n+  __asm volatile (\".machine \\\"all\\\"  \\n\\t\");\n   __builtin_tend ();\n }\n \n static inline void\n htm_abort ()\n {\n+  __asm volatile (\".machine \\\"all\\\"  \\n\\t\");\n   __builtin_tabort (_HTM_FIRST_USER_ABORT_CODE);\n }\n \n@@ -115,6 +118,7 @@ htm_abort_should_retry (uint32_t begin_ret)\n static inline bool\n htm_transaction_active ()\n {\n+  __asm volatile (\".machine \\\"all\\\"  \\n\\t\");\n   return __builtin_tx_nesting_depth() != 0;\n }\n "}, {"sha": "5078455975cd97793127724c01b767f842897737", "filename": "libitm/configure.tgt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/libitm%2Fconfigure.tgt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaaffb2a0dbfca68f5a7551d246a07619ac18f4e/libitm%2Fconfigure.tgt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libitm%2Fconfigure.tgt?ref=aaaffb2a0dbfca68f5a7551d246a07619ac18f4e", "patch": "@@ -109,7 +109,7 @@ case \"${target_cpu}\" in\n \tARCH=x86\n \t;;\n   s390|s390x)\n-\tXCFLAGS=\"${XCFLAGS} -mzarch -mhtm -Wa,-march=zEC12\"\n+\tXCFLAGS=\"${XCFLAGS} -mzarch -mhtm\"\n \tARCH=s390\n \t;;\n "}]}