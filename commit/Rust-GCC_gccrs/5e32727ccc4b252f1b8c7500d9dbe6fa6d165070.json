{"sha": "5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWUzMjcyN2NjYzRiMjUyZjFiOGM3NTAwZDlkYmU2ZmE2ZDE2NTA3MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-08-02T17:24:48Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-08-02T17:24:48Z"}, "message": "(hppa_builtin_saveregs): f -fcheck-memory-usage, set rights of saved\nregisters.\n\nFrom-SVN: r14623", "tree": {"sha": "c741165712a68c7781bebf24f81f3109e3645dd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c741165712a68c7781bebf24f81f3109e3645dd8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070/comments", "author": null, "committer": null, "parents": [{"sha": "4e264c3fbff6865864ef7067051241dda368eaf9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e264c3fbff6865864ef7067051241dda368eaf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e264c3fbff6865864ef7067051241dda368eaf9"}], "stats": {"total": 19, "additions": 12, "deletions": 7}, "files": [{"sha": "a9288fc1ff69ad102b957c12286fda30f9b69e1a", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 12, "deletions": 7, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e32727ccc4b252f1b8c7500d9dbe6fa6d165070/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=5e32727ccc4b252f1b8c7500d9dbe6fa6d165070", "patch": "@@ -1,5 +1,5 @@\n /* Subroutines for insn-output.c for HPPA.\n-   Copyright (C) 1992, 1993, 1994, 1995, 1996 Free Software Foundation, Inc.\n+   Copyright (C) 1992, , 1994, 95, 96, 1997 Free Software Foundation, Inc.\n    Contributed by Tim Moore (moore@cs.utah.edu), based on sparc.c\n \n This file is part of GNU CC.\n@@ -4269,7 +4269,7 @@ struct rtx_def *\n hppa_builtin_saveregs (arglist)\n      tree arglist;\n {\n-  rtx offset;\n+  rtx offset, dest;\n   tree fntype = TREE_TYPE (current_function_decl);\n   int argadj = ((!(TYPE_ARG_TYPES (fntype) != 0\n \t\t   && (TREE_VALUE (tree_last (TYPE_ARG_TYPES (fntype)))\n@@ -4282,11 +4282,16 @@ hppa_builtin_saveregs (arglist)\n     offset = current_function_arg_offset_rtx;\n \n   /* Store general registers on the stack. */\n-  move_block_from_reg (23,\n-\t\t       gen_rtx (MEM, BLKmode,\n-\t\t\t\tplus_constant\n-\t\t\t\t(current_function_internal_arg_pointer, -16)),\n-\t\t       4, 4 * UNITS_PER_WORD);\n+  dest = gen_rtx (MEM, BLKmode,\n+\t\t  plus_constant (current_function_internal_arg_pointer, -16));\n+  move_block_from_reg (23, dest, 4, 4 * UNITS_PER_WORD);\n+\n+  if (flag_check_memory_usage)\n+    emit_library_call (chkr_set_right_libfunc, 1, VOIDmode, 3,\n+\t\t       dest, ptr_mode,\n+\t\t       GEN_INT (4 * UNITS_PER_WORD), TYPE_MODE (sizetype),\n+\t\t       GEN_INT (MEMORY_USE_RW), QImode);\n+\n   return copy_to_reg (expand_binop (Pmode, add_optab,\n \t\t\t\t    current_function_internal_arg_pointer,\n \t\t\t\t    offset, 0, 0, OPTAB_LIB_WIDEN));"}]}