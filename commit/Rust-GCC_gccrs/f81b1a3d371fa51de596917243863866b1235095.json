{"sha": "f81b1a3d371fa51de596917243863866b1235095", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjgxYjFhM2QzNzFmYTUxZGU1OTY5MTcyNDM4NjM4NjZiMTIzNTA5NQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-05-04T14:58:51Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-05-04T14:58:51Z"}, "message": "coverage.c (tree_coverage_counter_ref): Use integer_type_node for array-ref indices.\n\n2011-05-04  Richard Guenther  <rguenther@suse.de>\n\n\t* coverage.c (tree_coverage_counter_ref): Use integer_type_node\n\tfor array-ref indices.\n\t(tree_coverage_counter_addr): Likewise.\n\t(build_fn_info_type): Use size_int for index types.\n\t(build_gcov_info): Likewise.\n\nFrom-SVN: r173379", "tree": {"sha": "86c3f2cafae4d25852df07bf3c1bc8d31f57d5d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86c3f2cafae4d25852df07bf3c1bc8d31f57d5d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f81b1a3d371fa51de596917243863866b1235095", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f81b1a3d371fa51de596917243863866b1235095", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f81b1a3d371fa51de596917243863866b1235095", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f81b1a3d371fa51de596917243863866b1235095/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c62c040f163cb557936e5b680dbb822d31c2e8e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c62c040f163cb557936e5b680dbb822d31c2e8e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c62c040f163cb557936e5b680dbb822d31c2e8e7"}], "stats": {"total": 23, "additions": 14, "deletions": 9}, "files": [{"sha": "58c35b397af4f8cdb96744daec909eaf8d501c6c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f81b1a3d371fa51de596917243863866b1235095/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f81b1a3d371fa51de596917243863866b1235095/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f81b1a3d371fa51de596917243863866b1235095", "patch": "@@ -1,3 +1,11 @@\n+2011-05-04  Richard Guenther  <rguenther@suse.de>\n+\n+\t* coverage.c (tree_coverage_counter_ref): Use integer_type_node\n+\tfor array-ref indices.\n+\t(tree_coverage_counter_addr): Likewise.\n+\t(build_fn_info_type): Use size_int for index types.\n+\t(build_gcov_info): Likewise.\n+\n 2011-05-04  Richard Guenther  <rguenther@suse.de>\n \n \t* c-decl.c (check_bitfield_type_and_width): Do not pass NULL"}, {"sha": "1a992973f7838aaae31d9585c80199af1d0309b7", "filename": "gcc/coverage.c", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f81b1a3d371fa51de596917243863866b1235095/gcc%2Fcoverage.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f81b1a3d371fa51de596917243863866b1235095/gcc%2Fcoverage.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.c?ref=f81b1a3d371fa51de596917243863866b1235095", "patch": "@@ -451,7 +451,7 @@ tree_coverage_counter_ref (unsigned counter, unsigned no)\n \n   /* \"no\" here is an array index, scaled to bytes later.  */\n   return build4 (ARRAY_REF, gcov_type_node, tree_ctr_tables[counter],\n-\t\t build_int_cst (NULL_TREE, no), NULL, NULL);\n+\t\t build_int_cst (integer_type_node, no), NULL, NULL);\n }\n \n /* Generate a tree to access the address of COUNTER NO.  */\n@@ -469,7 +469,7 @@ tree_coverage_counter_addr (unsigned counter, unsigned no)\n   /* \"no\" here is an array index, scaled to bytes later.  */\n   return build_fold_addr_expr (build4 (ARRAY_REF, gcov_type_node,\n \t\t\t\t       tree_ctr_tables[counter],\n-\t\t\t\t       build_int_cst (NULL_TREE, no),\n+\t\t\t\t       build_int_cst (integer_type_node, no),\n \t\t\t\t       NULL, NULL));\n }\n \f\n@@ -693,8 +693,7 @@ build_fn_info_type (unsigned int counters)\n   DECL_CHAIN (field) = fields;\n   fields = field;\n \n-  array_type = build_int_cst (NULL_TREE, counters - 1);\n-  array_type = build_index_type (array_type);\n+  array_type = build_index_type (size_int (counters - 1));\n   array_type = build_array_type (get_gcov_unsigned_t (), array_type);\n \n   /* counters */\n@@ -904,8 +903,7 @@ build_gcov_info (void)\n   da_file_name_len = strlen (da_file_name);\n   filename_string = build_string (da_file_name_len + 1, da_file_name);\n   TREE_TYPE (filename_string) = build_array_type\n-    (char_type_node, build_index_type\n-     (build_int_cst (NULL_TREE, da_file_name_len)));\n+    (char_type_node, build_index_type (size_int (da_file_name_len)));\n   CONSTRUCTOR_APPEND_ELT (v1, field,\n \t\t\t  build1 (ADDR_EXPR, string_type, filename_string));\n \n@@ -921,7 +919,7 @@ build_gcov_info (void)\n     {\n       tree array_type;\n \n-      array_type = build_index_type (build_int_cst (NULL_TREE, n_fns - 1));\n+      array_type = build_index_type (size_int (n_fns - 1));\n       array_type = build_array_type (fn_info_type, array_type);\n \n       fn_info_value = build_constructor (array_type, v2);\n@@ -956,8 +954,7 @@ build_gcov_info (void)\n \n   /* counters */\n   ctr_info_type = build_ctr_info_type ();\n-  ctr_info_ary_type = build_index_type (build_int_cst (NULL_TREE,\n-\t\t\t\t\t\t       n_ctr_types));\n+  ctr_info_ary_type = build_index_type (size_int (n_ctr_types));\n   ctr_info_ary_type = build_array_type (ctr_info_type, ctr_info_ary_type);\n   v2 = NULL;\n   for (ix = 0; ix != GCOV_COUNTERS; ix++)"}]}