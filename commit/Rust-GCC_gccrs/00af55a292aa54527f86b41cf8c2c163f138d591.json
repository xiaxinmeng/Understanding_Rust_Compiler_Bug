{"sha": "00af55a292aa54527f86b41cf8c2c163f138d591", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBhZjU1YTI5MmFhNTQ1MjdmODZiNDFjZjhjMmMxNjNmMTM4ZDU5MQ==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@albatross.co.nz", "date": "1999-06-14T17:20:35Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "1999-06-14T17:20:35Z"}, "message": "* posix-threads.cc (_Jv_CondWait): Fix currentTimeMillis() overflow.\n\nFrom-SVN: r27524", "tree": {"sha": "7b1441ff5919725010048028526b1eafa85f21c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b1441ff5919725010048028526b1eafa85f21c1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00af55a292aa54527f86b41cf8c2c163f138d591", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00af55a292aa54527f86b41cf8c2c163f138d591", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00af55a292aa54527f86b41cf8c2c163f138d591", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00af55a292aa54527f86b41cf8c2c163f138d591/comments", "author": null, "committer": null, "parents": [{"sha": "8576f0942e3b46cb72409e5a487230d9c8c5c5ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8576f0942e3b46cb72409e5a487230d9c8c5c5ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8576f0942e3b46cb72409e5a487230d9c8c5c5ec"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "42bec98ff0edb525fcf621f57cbc9b9d72a6d7e2", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00af55a292aa54527f86b41cf8c2c163f138d591/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00af55a292aa54527f86b41cf8c2c163f138d591/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=00af55a292aa54527f86b41cf8c2c163f138d591", "patch": "@@ -1,8 +1,13 @@\n+1999-06-14  Bryce McKinlay  <bryce@albatross.co.nz>\n+\n+\t* posix-threads.cc (_Jv_CondWait): Fix currentTimeMillis() overflow.\n+\n 1999-06-11  Warren Levy  <warrenl@cygnus.com>\n \n \t* mauve-libgcj: Activated java.net Mauve tests.\n \n 1999-06-10  Bryce McKinlay  <bryce@albatross.co.nz>\n+\n \t* java/net/natInetAddress.cc (aton): Fix typos.\n \t(lookup): Use a bigger buffer size for gethostbyname_r on all\n \tversions of glibc. Updated FIXME comment explaining this.\n@@ -22,7 +27,7 @@\n \t* java/text/DecimalFormat.java: Throw IllegalArgumentException\n \tthroughout rather than ParseException.\n \n-1999-06-09  Bryce McKinlay <bryce@albatross.co.nz>\n+1999-06-09  Bryce McKinlay  <bryce@albatross.co.nz>\n \n \t* java/lang/Runtime.java (exec): Convert prog name and arguments\n \tto string array."}, {"sha": "825b0206c1906f6ca51364a146c833965cf0c015", "filename": "libjava/posix-threads.cc", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00af55a292aa54527f86b41cf8c2c163f138d591/libjava%2Fposix-threads.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00af55a292aa54527f86b41cf8c2c163f138d591/libjava%2Fposix-threads.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fposix-threads.cc?ref=00af55a292aa54527f86b41cf8c2c163f138d591", "patch": "@@ -85,12 +85,11 @@ _Jv_CondWait (_Jv_ConditionVariable_t *cv, _Jv_Mutex_t *mu,\n     r = pthread_cond_wait (cv, pmu);\n   else\n     {\n-      struct timespec ts;\n-      unsigned long m = millis + java::lang::System::currentTimeMillis ();\n-\n-      ts.tv_sec = m / 1000;\n-      ts.tv_nsec = (m % 1000) * 1000 * 1000 + nanos;\n-\n+      struct timespec ts; \n+      jlong m = millis + java::lang::System::currentTimeMillis (); \n+      ts.tv_sec = m / 1000; \n+      ts.tv_nsec = ((m % 1000) * 1000000) + nanos; \n+             \n       r = pthread_cond_timedwait (cv, pmu, &ts);\n     }\n   return r;"}]}