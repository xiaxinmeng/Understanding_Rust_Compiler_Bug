{"sha": "bc3f0248ddfa498453e062df40b22459243d1b92", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMzZjAyNDhkZGZhNDk4NDUzZTA2MmRmNDBiMjI0NTkyNDNkMWI5Mg==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2008-11-12T21:35:46Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2008-11-12T21:35:46Z"}, "message": "re PR target/27880 (undefined reference to `_Unwind_GetIPInfo')\n\n\tPR  target/27880\n\t* config/unwind_ipinfo.m4 (GCC_CHECK_UNWIND_GETIPINFO): Change from\n\tlink test to target based test.\n\t* libstdc++/v3/configure.ac: Move call to GCC_CHECK_UNWIND_GETIPINFO.\n\t* libstdc++/v3/configure: Regenerate.\n\t* libjava/configure: Regenerate.\n\nFrom-SVN: r141804", "tree": {"sha": "7f3d326b8ade23a1bd72a9668461ef85e61bae50", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f3d326b8ade23a1bd72a9668461ef85e61bae50"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc3f0248ddfa498453e062df40b22459243d1b92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc3f0248ddfa498453e062df40b22459243d1b92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc3f0248ddfa498453e062df40b22459243d1b92", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc3f0248ddfa498453e062df40b22459243d1b92/comments", "author": null, "committer": null, "parents": [{"sha": "a3422e30366ba9a73de732b03176d86db795a1cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3422e30366ba9a73de732b03176d86db795a1cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3422e30366ba9a73de732b03176d86db795a1cc"}], "stats": {"total": 368, "additions": 140, "deletions": 228}, "files": [{"sha": "84cb7ff7e00213116b0b0832e7dc0620e3c1af6d", "filename": "config/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -1,3 +1,9 @@\n+2008-11-12  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR target/27880\n+\t* unwind_ipinfo.m4 (GCC_CHECK_UNWIND_GETIPINFO): Change from\n+\tlink test to target based test.\n+\n 2008-08-09  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* mt-mips16-compat: New file, taken from mt-mips-elfoabi."}, {"sha": "a1dc6352b6795423b7a8b3a428195195b966c23d", "filename": "config/unwind_ipinfo.m4", "status": "modified", "additions": 25, "deletions": 16, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/config%2Funwind_ipinfo.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/config%2Funwind_ipinfo.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Funwind_ipinfo.m4?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -1,22 +1,31 @@\n dnl\n-dnl Check whether _Unwind_GetIPInfo is available.\n+dnl Check whether _Unwind_GetIPInfo is available without doing a link\n+dnl test so we can use this with libstdc++-v3 and libjava.  Need to\n+dnl use $target to set defaults because automatic checking is not possible\n+dnl without a link test (and maybe even with a link test).\n dnl\n+\n AC_DEFUN([GCC_CHECK_UNWIND_GETIPINFO], [\n-  AC_LANG_SAVE\n-  AC_LANG_CPLUSPLUS\n-  ac_save_CXXFLAGS=\"$CXXFLAGS\"\n-  CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n-  AC_MSG_CHECKING([for _Unwind_GetIPInfo])\n-  AC_CACHE_VAL(gcc_cv_getipinfo, [\n-  AC_TRY_LINK([extern \"C\" { extern void _Unwind_GetIPInfo(); }],\n-      [_Unwind_GetIPInfo();],\n-      [gcc_cv_getipinfo=yes],\n-      [gcc_cv_getipinfo=no])\n-  ])\n-  if test $gcc_cv_getipinfo = yes; then\n+  AC_ARG_WITH(system-libunwind,\n+  [  --with-system-libunwind use installed libunwind])\n+  # If system-libunwind was not specifically set, pick a default setting.\n+  if test x$with_system_libunwind = x; then\n+    case ${target} in\n+      ia64-*-hpux*) with_system_libunwind=yes ;;\n+      *) with_system_libunwind=no ;;\n+    esac\n+  fi\n+  # Based on system-libunwind and target, do we have ipinfo?\n+  if  test x$with_system_libunwind = xyes; then\n+    case ${target} in\n+      ia64-*-*) have_unwind_getipinfo=no ;;\n+      *) have_unwind_getipinfo=yes ;;\n+    esac\n+  else\n+     have_unwind_getipinfo=yes\n+  fi\n+\n+  if test x$have_unwind_getipinfo = xyes; then\n     AC_DEFINE(HAVE_GETIPINFO, 1, [Define if _Unwind_GetIPInfo is available.])\n   fi\n-  AC_MSG_RESULT($gcc_cv_getipinfo)\n-  CXXFLAGS=\"$ac_save_CXXFLAGS\"\n-  AC_LANG_RESTORE\n ])"}, {"sha": "e6ec30e843e31f408479fea894eaf2a6d1474d0e", "filename": "libjava/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -1,3 +1,7 @@\n+2008-11-12  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* configure: Regenerate to get new GCC_CHECK_UNWIND_GETIPINFO.\n+\n 2008-11-12  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR libgcj/33764"}, {"sha": "ecaa36ce0468d412fca351fa3add87b7eda9030e", "filename": "libjava/configure", "status": "modified", "additions": 51, "deletions": 106, "changes": 157, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -1082,6 +1082,7 @@ Optional Packages:\n   --with-gnu-ld           assume the C compiler uses GNU ld default=no\n   --with-libiconv-prefix[=DIR]  search for libiconv in DIR/include and DIR/lib\n   --without-libiconv-prefix     don't search for libiconv in includedir and libdir\n+  --with-system-libunwind use installed libunwind\n   --with-python-dir       the location to install Python modules. This path\n                           should NOT include the prefix.\n   --with-gcc-suffix       the GCC tool suffix (defaults to empty string)\n@@ -6002,13 +6003,13 @@ if test \"${lt_cv_nm_interface+set}\" = set; then\n else\n   lt_cv_nm_interface=\"BSD nm\"\n   echo \"int some_variable = 0;\" > conftest.$ac_ext\n-  (eval echo \"\\\"\\$as_me:6005: $ac_compile\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:6006: $ac_compile\\\"\" >&5)\n   (eval \"$ac_compile\" 2>conftest.err)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:6008: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:6009: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n   (eval \"$NM \\\"conftest.$ac_objext\\\"\" 2>conftest.err > conftest.out)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:6011: output\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:6012: output\\\"\" >&5)\n   cat conftest.out >&5\n   if $GREP 'External.*some_variable' conftest.out > /dev/null; then\n     lt_cv_nm_interface=\"MS dumpbin\"\n@@ -7155,7 +7156,7 @@ ia64-*-hpux*)\n   ;;\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 7158 \"configure\"' > conftest.$ac_ext\n+  echo '#line 7159 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -9538,11 +9539,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:9541: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:9542: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:9545: \\$? = $ac_status\" >&5\n+   echo \"$as_me:9546: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -9877,11 +9878,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:9880: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:9881: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:9884: \\$? = $ac_status\" >&5\n+   echo \"$as_me:9885: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -9982,11 +9983,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:9985: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:9986: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:9989: \\$? = $ac_status\" >&5\n+   echo \"$as_me:9990: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -10037,11 +10038,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:10040: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:10041: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:10044: \\$? = $ac_status\" >&5\n+   echo \"$as_me:10045: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -12889,7 +12890,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12892 \"configure\"\n+#line 12893 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -12985,7 +12986,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 12988 \"configure\"\n+#line 12989 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -15011,11 +15012,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15014: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15015: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:15018: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15019: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -15110,11 +15111,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15113: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15114: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:15117: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15118: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -15162,11 +15163,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:15165: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:15166: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:15169: \\$? = $ac_status\" >&5\n+   echo \"$as_me:15170: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -16564,11 +16565,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:16567: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:16568: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:16571: \\$? = $ac_status\" >&5\n+   echo \"$as_me:16572: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -16897,11 +16898,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:16900: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:16901: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:16904: \\$? = $ac_status\" >&5\n+   echo \"$as_me:16905: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -16996,11 +16997,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:16999: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:17000: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:17003: \\$? = $ac_status\" >&5\n+   echo \"$as_me:17004: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -17048,11 +17049,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:17051: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:17052: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:17055: \\$? = $ac_status\" >&5\n+   echo \"$as_me:17056: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -18738,7 +18739,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then\n   :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 18741 \"configure\"\n+#line 18742 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -27856,91 +27857,35 @@ _ACEOF\n # For _Unwind_GetIPInfo.\n \n \n+# Check whether --with-system-libunwind or --without-system-libunwind was given.\n+if test \"${with_system_libunwind+set}\" = set; then\n+  withval=\"$with_system_libunwind\"\n \n-  ac_ext=cc\n-ac_cpp='$CXXCPP $CPPFLAGS'\n-ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n-\n-  ac_save_CXXFLAGS=\"$CXXFLAGS\"\n-  CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n-  echo \"$as_me:$LINENO: checking for _Unwind_GetIPInfo\" >&5\n-echo $ECHO_N \"checking for _Unwind_GetIPInfo... $ECHO_C\" >&6\n-  if test \"${gcc_cv_getipinfo+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-\n-  if test x$gcc_no_link = xyes; then\n-  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n-echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n-   { (exit 1); exit 1; }; }\n-fi\n-cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-extern \"C\" { extern void _Unwind_GetIPInfo(); }\n-int\n-main ()\n-{\n-_Unwind_GetIPInfo();\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext conftest$ac_exeext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n-  (eval $ac_link) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_cxx_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest$ac_exeext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  gcc_cv_getipinfo=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-gcc_cv_getipinfo=no\n-fi\n-rm -f conftest.err conftest.$ac_objext \\\n-      conftest$ac_exeext conftest.$ac_ext\n-\n-fi\n+fi;\n+  # If system-libunwind was not specifically set, pick a default setting.\n+  if test x$with_system_libunwind = x; then\n+    case ${target} in\n+      ia64-*-hpux*) with_system_libunwind=yes ;;\n+      *) with_system_libunwind=no ;;\n+    esac\n+  fi\n+  # Based on system-libunwind and target, do we have ipinfo?\n+  if  test x$with_system_libunwind = xyes; then\n+    case ${target} in\n+      ia64-*-*) have_unwind_getipinfo=no ;;\n+      *) have_unwind_getipinfo=yes ;;\n+    esac\n+  else\n+     have_unwind_getipinfo=yes\n+  fi\n \n-  if test $gcc_cv_getipinfo = yes; then\n+  if test x$have_unwind_getipinfo = xyes; then\n \n cat >>confdefs.h <<\\_ACEOF\n #define HAVE_GETIPINFO 1\n _ACEOF\n \n   fi\n-  echo \"$as_me:$LINENO: result: $gcc_cv_getipinfo\" >&5\n-echo \"${ECHO_T}$gcc_cv_getipinfo\" >&6\n-  CXXFLAGS=\"$ac_save_CXXFLAGS\"\n-  ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-\n \n \n # See if linker supports anonymous version scripts."}, {"sha": "52b121add777b2daac8d13288d6384f692cce70a", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -1,3 +1,8 @@\n+2008-11-12  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* configure.ac: Move call to GCC_CHECK_UNWIND_GETIPINFO.\n+\t* configure: Regenerate to get new GCC_CHECK_UNWIND_GETIPINFO.\n+\n 2008-11-12  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR libstdc++/37986 (cont)"}, {"sha": "c344b4c3b8ccdebea06c8de935e3e61156dfd107", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 45, "deletions": 100, "changes": 145, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -1075,6 +1075,7 @@ Optional Packages:\n   --with-pic              try to use only PIC/non-PIC objects [default=use\n                           both]\n   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]\n+  --with-system-libunwind use installed libunwind\n   --with-gnu-ld           assume the C compiler uses GNU ld default=no\n   --with-libiconv-prefix[=DIR]  search for libiconv in DIR/include and DIR/lib\n   --without-libiconv-prefix     don't search for libiconv in includedir and libdir\n@@ -4578,13 +4579,13 @@ if test \"${lt_cv_nm_interface+set}\" = set; then\n else\n   lt_cv_nm_interface=\"BSD nm\"\n   echo \"int some_variable = 0;\" > conftest.$ac_ext\n-  (eval echo \"\\\"\\$as_me:4581: $ac_compile\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:4582: $ac_compile\\\"\" >&5)\n   (eval \"$ac_compile\" 2>conftest.err)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:4584: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:4585: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n   (eval \"$NM \\\"conftest.$ac_objext\\\"\" 2>conftest.err > conftest.out)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:4587: output\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:4588: output\\\"\" >&5)\n   cat conftest.out >&5\n   if $GREP 'External.*some_variable' conftest.out > /dev/null; then\n     lt_cv_nm_interface=\"MS dumpbin\"\n@@ -5730,7 +5731,7 @@ ia64-*-hpux*)\n   ;;\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 5733 \"configure\"' > conftest.$ac_ext\n+  echo '#line 5734 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -7876,11 +7877,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:7879: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:7880: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:7883: \\$? = $ac_status\" >&5\n+   echo \"$as_me:7884: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -8215,11 +8216,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:8218: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:8219: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:8222: \\$? = $ac_status\" >&5\n+   echo \"$as_me:8223: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -8320,11 +8321,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:8323: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:8324: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:8327: \\$? = $ac_status\" >&5\n+   echo \"$as_me:8328: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -8375,11 +8376,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:8378: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:8379: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:8382: \\$? = $ac_status\" >&5\n+   echo \"$as_me:8383: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -11227,7 +11228,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11230 \"configure\"\n+#line 11231 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11323,7 +11324,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11326 \"configure\"\n+#line 11327 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -13349,11 +13350,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:13352: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:13353: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:13356: \\$? = $ac_status\" >&5\n+   echo \"$as_me:13357: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -13448,11 +13449,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:13451: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:13452: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:13455: \\$? = $ac_status\" >&5\n+   echo \"$as_me:13456: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -13500,11 +13501,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:13503: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:13504: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:13507: \\$? = $ac_status\" >&5\n+   echo \"$as_me:13508: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -14562,7 +14563,7 @@ fi;\n     #\n     # Fake what AC_TRY_COMPILE does.  XXX Look at redoing this new-style.\n     cat > conftest.$ac_ext << EOF\n-#line 14565 \"configure\"\n+#line 14566 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -14708,7 +14709,7 @@ ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n   # unnecessary for a builtins test.\n \n     cat > conftest.$ac_ext << EOF\n-#line 14711 \"configure\"\n+#line 14712 \"configure\"\n int main()\n {\n   // NB: _Atomic_word not necessarily int.\n@@ -14748,7 +14749,7 @@ echo \"${ECHO_T}$enable_atomic_builtinsi\" >&6\n     rm -f conftest*\n \n     cat > conftest.$ac_ext << EOF\n-#line 14751 \"configure\"\n+#line 14752 \"configure\"\n int main()\n {\n   typedef bool atomic_type;\n@@ -41963,91 +41964,35 @@ _ACEOF\n   # For _Unwind_GetIPInfo.\n \n \n+# Check whether --with-system-libunwind or --without-system-libunwind was given.\n+if test \"${with_system_libunwind+set}\" = set; then\n+  withval=\"$with_system_libunwind\"\n \n-  ac_ext=cc\n-ac_cpp='$CXXCPP $CPPFLAGS'\n-ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n-\n-  ac_save_CXXFLAGS=\"$CXXFLAGS\"\n-  CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n-  echo \"$as_me:$LINENO: checking for _Unwind_GetIPInfo\" >&5\n-echo $ECHO_N \"checking for _Unwind_GetIPInfo... $ECHO_C\" >&6\n-  if test \"${gcc_cv_getipinfo+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-\n-  if test x$gcc_no_link = xyes; then\n-  { { echo \"$as_me:$LINENO: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&5\n-echo \"$as_me: error: Link tests are not allowed after GCC_NO_EXECUTABLES.\" >&2;}\n-   { (exit 1); exit 1; }; }\n-fi\n-cat >conftest.$ac_ext <<_ACEOF\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-extern \"C\" { extern void _Unwind_GetIPInfo(); }\n-int\n-main ()\n-{\n-_Unwind_GetIPInfo();\n-  ;\n-  return 0;\n-}\n-_ACEOF\n-rm -f conftest.$ac_objext conftest$ac_exeext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_link\\\"\") >&5\n-  (eval $ac_link) 2>conftest.er1\n-  ac_status=$?\n-  grep -v '^ *+' conftest.er1 >conftest.err\n-  rm -f conftest.er1\n-  cat conftest.err >&5\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-\t { ac_try='test -z \"$ac_cxx_werror_flag\"\n-\t\t\t || test ! -s conftest.err'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; } &&\n-\t { ac_try='test -s conftest$ac_exeext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  gcc_cv_getipinfo=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-gcc_cv_getipinfo=no\n-fi\n-rm -f conftest.err conftest.$ac_objext \\\n-      conftest$ac_exeext conftest.$ac_ext\n-\n-fi\n+fi;\n+  # If system-libunwind was not specifically set, pick a default setting.\n+  if test x$with_system_libunwind = x; then\n+    case ${target} in\n+      ia64-*-hpux*) with_system_libunwind=yes ;;\n+      *) with_system_libunwind=no ;;\n+    esac\n+  fi\n+  # Based on system-libunwind and target, do we have ipinfo?\n+  if  test x$with_system_libunwind = xyes; then\n+    case ${target} in\n+      ia64-*-*) have_unwind_getipinfo=no ;;\n+      *) have_unwind_getipinfo=yes ;;\n+    esac\n+  else\n+     have_unwind_getipinfo=yes\n+  fi\n \n-  if test $gcc_cv_getipinfo = yes; then\n+  if test x$have_unwind_getipinfo = xyes; then\n \n cat >>confdefs.h <<\\_ACEOF\n #define HAVE_GETIPINFO 1\n _ACEOF\n \n   fi\n-  echo \"$as_me:$LINENO: result: $gcc_cv_getipinfo\" >&5\n-echo \"${ECHO_T}$gcc_cv_getipinfo\" >&6\n-  CXXFLAGS=\"$ac_save_CXXFLAGS\"\n-  ac_ext=c\n-ac_cpp='$CPP $CPPFLAGS'\n-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n-ac_compiler_gnu=$ac_cv_c_compiler_gnu\n-\n \n \n   # For iconv support."}, {"sha": "12dc1d5585cc92856c3b8eeccb81f0f65f3ed843", "filename": "libstdc++-v3/configure.ac", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3f0248ddfa498453e062df40b22459243d1b92/libstdc%2B%2B-v3%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3f0248ddfa498453e062df40b22459243d1b92/libstdc%2B%2B-v3%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure.ac?ref=bc3f0248ddfa498453e062df40b22459243d1b92", "patch": "@@ -182,9 +182,6 @@ if $GLIBCXX_IS_NATIVE; then\n   # For TLS support.\n   GCC_CHECK_TLS\n \n-  # For _Unwind_GetIPInfo.\n-  GCC_CHECK_UNWIND_GETIPINFO\n-\n   # For iconv support.\n   AM_ICONV\n \n@@ -286,11 +283,12 @@ else\n     AC_DEFINE(HAVE_TANL)\n     AC_DEFINE(HAVE_TANHL)\n   fi\n-\n-  # Assume we have _Unwind_GetIPInfo for cross-compiles.\n-  AC_DEFINE(HAVE_GETIPINFO)\n fi\n \n+# Check for _Unwind_GetIPInfo.\n+GCC_CHECK_UNWIND_GETIPINFO\n+\n+\n GCC_LINUX_FUTEX([AC_DEFINE(HAVE_LINUX_FUTEX, 1, [Define if futex syscall is available.])])\n \n GCC_HEADER_STDINT(include/gstdint.h)"}]}