{"sha": "da5fb46991c2b6af4cb7271841429d26a8d7d78a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE1ZmI0Njk5MWMyYjZhZjRjYjcyNzE4NDE0MjlkMjZhOGQ3ZDc4YQ==", "commit": {"author": {"name": "Kai Tietz", "email": "ktietz@redhat.com", "date": "2011-05-19T11:16:20Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2011-05-19T11:16:20Z"}, "message": "tree-cfg.c (verify_gimple_assign_binary): Barf on TRUTH_AND_EXPR, TRUTH_OR_EXPR, and TRUTH_XOR_EXPR.\n\n2011-05-19  Kai Tietz  <ktietz@redhat.com>\n\n\t* tree-cfg.c (verify_gimple_assign_binary): Barf on\n\tTRUTH_AND_EXPR, TRUTH_OR_EXPR, and TRUTH_XOR_EXPR.\n\t(gimplify_expr): Move TRUTH_AND|OR|XOR_EXPR to its binary form.\n\nFrom-SVN: r173903", "tree": {"sha": "59b15ab519b18f6a41e0da7f63f9ab0b90d5213b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/59b15ab519b18f6a41e0da7f63f9ab0b90d5213b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da5fb46991c2b6af4cb7271841429d26a8d7d78a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5fb46991c2b6af4cb7271841429d26a8d7d78a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da5fb46991c2b6af4cb7271841429d26a8d7d78a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da5fb46991c2b6af4cb7271841429d26a8d7d78a/comments", "author": null, "committer": null, "parents": [{"sha": "0967b2288935f9ed8030ba4750c6247aa7329a08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0967b2288935f9ed8030ba4750c6247aa7329a08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0967b2288935f9ed8030ba4750c6247aa7329a08"}], "stats": {"total": 44, "additions": 24, "deletions": 20}, "files": [{"sha": "3da31e700b44cc781f703b36290b74d98442b5d3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5fb46991c2b6af4cb7271841429d26a8d7d78a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5fb46991c2b6af4cb7271841429d26a8d7d78a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da5fb46991c2b6af4cb7271841429d26a8d7d78a", "patch": "@@ -1,3 +1,9 @@\n+2011-05-19  Kai Tietz  <ktietz@redhat.com>\n+\n+\t* tree-cfg.c (verify_gimple_assign_binary): Barf on\n+\tTRUTH_AND_EXPR, TRUTH_OR_EXPR, and TRUTH_XOR_EXPR.\n+\t(gimplify_expr): Move TRUTH_AND|OR|XOR_EXPR to its binary form.\n+\n 2011-05-19  Anatoly Sokolov <aesok@post.ru>\n \t    Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n "}, {"sha": "5fd22c011c20570017d286e4d66c67345a2863a4", "filename": "gcc/gimplify.c", "status": "modified", "additions": 17, "deletions": 1, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5fb46991c2b6af4cb7271841429d26a8d7d78a/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5fb46991c2b6af4cb7271841429d26a8d7d78a/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=da5fb46991c2b6af4cb7271841429d26a8d7d78a", "patch": "@@ -7210,7 +7210,23 @@ gimplify_expr (tree *expr_p, gimple_seq *pre_p, gimple_seq *post_p,\n \t\tbreak;\n \t      }\n \t  }\n-\t  \n+\n+\t  /* With two-valued operand types binary truth expressions are\n+\t     semantically equivalent to bitwise binary expressions.  Canonicalize\n+\t     them to the bitwise variant.  */\tswitch (TREE_CODE (*expr_p))\n+\t  {\n+\t  case TRUTH_AND_EXPR:\n+\t    TREE_SET_CODE (*expr_p, BIT_AND_EXPR);\n+\t    break;\n+\t  case TRUTH_OR_EXPR:\n+\t    TREE_SET_CODE (*expr_p, BIT_IOR_EXPR);\n+\t    break;\n+\t  case TRUTH_XOR_EXPR:\n+\t    TREE_SET_CODE (*expr_p, BIT_XOR_EXPR);\n+\t    break;\n+\t  default:\n+\t    break;\n+\t  }\n \t  /* Classified as tcc_expression.  */\n \t  goto expr_2;\n "}, {"sha": "f6b171024bd6d86ed5cd4697d083f2c31646ed9e", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 1, "deletions": 19, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da5fb46991c2b6af4cb7271841429d26a8d7d78a/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da5fb46991c2b6af4cb7271841429d26a8d7d78a/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=da5fb46991c2b6af4cb7271841429d26a8d7d78a", "patch": "@@ -3555,29 +3555,11 @@ verify_gimple_assign_binary (gimple stmt)\n \n     case TRUTH_ANDIF_EXPR:\n     case TRUTH_ORIF_EXPR:\n-      gcc_unreachable ();\n-\n     case TRUTH_AND_EXPR:\n     case TRUTH_OR_EXPR:\n     case TRUTH_XOR_EXPR:\n-      {\n-\t/* We require two-valued operand types.  */\n-\tif (!(TREE_CODE (rhs1_type) == BOOLEAN_TYPE\n-\t      || (INTEGRAL_TYPE_P (rhs1_type)\n-\t\t  && TYPE_PRECISION (rhs1_type) == 1))\n-\t    || !(TREE_CODE (rhs2_type) == BOOLEAN_TYPE\n-\t\t || (INTEGRAL_TYPE_P (rhs2_type)\n-\t\t     && TYPE_PRECISION (rhs2_type) == 1)))\n-\t  {\n-\t    error (\"type mismatch in binary truth expression\");\n-\t    debug_generic_expr (lhs_type);\n-\t    debug_generic_expr (rhs1_type);\n-\t    debug_generic_expr (rhs2_type);\n-\t    return true;\n-\t  }\n \n-\tbreak;\n-      }\n+      gcc_unreachable ();\n \n     case LT_EXPR:\n     case LE_EXPR:"}]}