{"sha": "289b57ee28d0deca5af21333eca23557245a7f08", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg5YjU3ZWUyOGQwZGVjYTVhZjIxMzMzZWNhMjM1NTcyNDVhN2YwOA==", "commit": {"author": {"name": "Per Bothner", "email": "per@bothner.com", "date": "2001-08-31T20:07:31Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2001-08-31T20:07:31Z"}, "message": "class.c (set_constant_value): When not emiting class files, then a String ConstantValue is a utf8const_ptr_type.\n\n\n\t* class.c (set_constant_value):  When not emiting class files, then a\n\tString ConstantValue is a utf8const_ptr_type.\n\nFrom-SVN: r45333", "tree": {"sha": "686b0d25fd6699154b89a2a544beddd51edb2fe2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/686b0d25fd6699154b89a2a544beddd51edb2fe2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/289b57ee28d0deca5af21333eca23557245a7f08", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/289b57ee28d0deca5af21333eca23557245a7f08", "html_url": "https://github.com/Rust-GCC/gccrs/commit/289b57ee28d0deca5af21333eca23557245a7f08", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/289b57ee28d0deca5af21333eca23557245a7f08/comments", "author": {"login": "PerBothner", "id": 10293361, "node_id": "MDQ6VXNlcjEwMjkzMzYx", "avatar_url": "https://avatars.githubusercontent.com/u/10293361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PerBothner", "html_url": "https://github.com/PerBothner", "followers_url": "https://api.github.com/users/PerBothner/followers", "following_url": "https://api.github.com/users/PerBothner/following{/other_user}", "gists_url": "https://api.github.com/users/PerBothner/gists{/gist_id}", "starred_url": "https://api.github.com/users/PerBothner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PerBothner/subscriptions", "organizations_url": "https://api.github.com/users/PerBothner/orgs", "repos_url": "https://api.github.com/users/PerBothner/repos", "events_url": "https://api.github.com/users/PerBothner/events{/privacy}", "received_events_url": "https://api.github.com/users/PerBothner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6268b92246a83813217648665eaf168eb02e19ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6268b92246a83813217648665eaf168eb02e19ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6268b92246a83813217648665eaf168eb02e19ba"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "2a89caeefdd09871ae655f494c0dd9b6dc3796a2", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/289b57ee28d0deca5af21333eca23557245a7f08/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/289b57ee28d0deca5af21333eca23557245a7f08/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=289b57ee28d0deca5af21333eca23557245a7f08", "patch": "@@ -1,3 +1,8 @@\n+2001-08-31  Per Bothner  <per@bothner.com>\n+\n+\t* class.c (set_constant_value):  When not emiting class files, then a\n+\tString ConstantValue is a utf8const_ptr_type.\n+\n 2001-08-30  Per Bothner  <per@bothner.com>\n \n \t* jcf-write.c (generate_classfile):  Check that field is primitive"}, {"sha": "6086fc0db76718a8194faf312d15bea5e6c4d937", "filename": "gcc/java/class.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/289b57ee28d0deca5af21333eca23557245a7f08/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/289b57ee28d0deca5af21333eca23557245a7f08/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=289b57ee28d0deca5af21333eca23557245a7f08", "patch": "@@ -780,8 +780,10 @@ set_constant_value (field, constant)\n       if (TREE_TYPE (constant) != TREE_TYPE (field)\n \t  && ! (TREE_TYPE (constant) == int_type_node\n \t\t&& INTEGRAL_TYPE_P (TREE_TYPE (field))\n-\t\t&& TYPE_PRECISION (TREE_TYPE (field)) <= 32))\n-\twarning (\"ConstantValue attribute of field '%s' has wrong type\",\n+\t\t&& TYPE_PRECISION (TREE_TYPE (field)) <= 32)\n+\t  && ! (TREE_TYPE (constant) == utf8const_ptr_type\n+\t\t&& TREE_TYPE (field) == string_ptr_type_node))\n+\terror (\"ConstantValue attribute of field '%s' has wrong type\",\n \t       IDENTIFIER_POINTER (DECL_NAME (field)));\n       if (FIELD_FINAL (field))\n \tDECL_FIELD_FINAL_IUD (field) = 1;"}]}