{"sha": "ee5426a488f8b28099c6f462aef34b157182d2ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWU1NDI2YTQ4OGY4YjI4MDk5YzZmNDYyYWVmMzRiMTU3MTgyZDJhYw==", "commit": {"author": {"name": "Francois-Xavier Coudert", "email": "coudert@clipper.ens.fr", "date": "2005-08-31T12:31:30Z"}, "committer": {"name": "Fran\u00e7ois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2005-08-31T12:31:30Z"}, "message": "re PR fortran/20592 (-fno-automatic (g77 option) is missing from gfortran.)\n\n\tPR fortran/20592\n\t* gfortran.h (gfc_option_t): Add flag_automatic.\n\t* invoke.texi: Document the -fno-automatic option.\n\t* lang.opt: Add a -fautomatic option.\n\t* options.c (gfc_init_options): Default for -fautomatic is on.\n\t(gfc_handle_option): Add handling of -fautomatic option.\n\t* resolve.c (gfc_resolve): When -fno-automatic is used, mark\n\tneeded variables as SAVE.\n\nFrom-SVN: r103671", "tree": {"sha": "fb8c8283c9af4e152ecf97cb2798af7f3abc4e79", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb8c8283c9af4e152ecf97cb2798af7f3abc4e79"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee5426a488f8b28099c6f462aef34b157182d2ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee5426a488f8b28099c6f462aef34b157182d2ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee5426a488f8b28099c6f462aef34b157182d2ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee5426a488f8b28099c6f462aef34b157182d2ac/comments", "author": null, "committer": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c52501398534057dfdd1bf212d43f351f62b69ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c52501398534057dfdd1bf212d43f351f62b69ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c52501398534057dfdd1bf212d43f351f62b69ab"}], "stats": {"total": 36, "additions": 33, "deletions": 3}, "files": [{"sha": "a03d3dff6fc618179f666e33f7253c499b5d724d", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ee5426a488f8b28099c6f462aef34b157182d2ac", "patch": "@@ -1,3 +1,14 @@\n+2005-08-31  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n+\n+\tPR fortran/20592\n+\t* gfortran.h (gfc_option_t): Add flag_automatic.\n+\t* invoke.texi: Document the -fno-automatic option.\n+\t* lang.opt: Add a -fautomatic option.\n+\t* options.c (gfc_init_options): Default for -fautomatic is on.\n+\t(gfc_handle_option): Add handling of -fautomatic option.\n+\t* resolve.c (gfc_resolve): When -fno-automatic is used, mark\n+\tneeded variables as SAVE.\n+\n 2005-08-27  Erik Edelmann  <erik.edelmann@iki.fi>\n \n \t* trans-array.c (gfc_trans_deferred_array): Fix comments."}, {"sha": "ed9fcba819f6ee885580320366873a062155b014", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=ee5426a488f8b28099c6f462aef34b157182d2ac", "patch": "@@ -1438,6 +1438,7 @@ typedef struct\n   int flag_pack_derived;\n   int flag_repack_arrays;\n   int flag_f2c;\n+  int flag_automatic;\n   int flag_backslash;\n   int flag_d_lines;\n "}, {"sha": "847ab29f70107e4cdc4870bf4c99ebcd02563029", "filename": "gcc/fortran/invoke.texi", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finvoke.texi?ref=ee5426a488f8b28099c6f462aef34b157182d2ac", "patch": "@@ -143,7 +143,7 @@ by type.  Explanations are in the following sections.\n @item Code Generation Options\n @xref{Code Gen Options,,Options for Code Generation Conventions}.\n @gccoptlist{\n--ff2c -fno-underscoring  -fsecond-underscore @gol\n+-fno-automatic -ff2c -fno-underscoring  -fsecond-underscore @gol\n -fbounds-check  -fmax-stack-var-size=@var{n} @gol\n -fpackderived  -frepack-arrays}\n @end table\n@@ -537,8 +537,17 @@ one of the forms is listed---the one which is not the default.  You\n can figure out the other form by either removing @option{no-} or adding\n it.\n \n-\n @table @gcctabopt\n+@cindex @option{-fno-automatic} option\n+@cindex options, @option{-fno-automatic}\n+@item -fno-automatic\n+@cindex SAVE statement\n+@cindex statements, SAVE\n+Treat each program unit as if the @code{SAVE} statement was specified for\n+every local variable and array referenced in it. Does not affect common\n+blocks. (Some Fortran compilers provide this option under the name\n+@option{-static}.)\n+\n @cindex @option{-ff2c} option\n @cindex options, @option{-ff2c}\n @item -ff2c"}, {"sha": "8cad2349b615306b88317a3439247fc2f8fd0d0a", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=ee5426a488f8b28099c6f462aef34b157182d2ac", "patch": "@@ -69,6 +69,10 @@ Wunused-labels\n F95\n Warn when a label is unused\n \n+fautomatic\n+F95\n+Do not treat local variables and COMMON blocks as if they were named in SAVE statements\n+\n fbackslash\n F95\n Specify that backslash in string introduces an escape character"}, {"sha": "8e8d6a889e017b267e55a09cca5648938e9b6bfe", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=ee5426a488f8b28099c6f462aef34b157182d2ac", "patch": "@@ -70,6 +70,7 @@ gfc_init_options (unsigned int argc ATTRIBUTE_UNUSED,\n   gfc_option.flag_no_backend = 0;\n   gfc_option.flag_pack_derived = 0;\n   gfc_option.flag_repack_arrays = 0;\n+  gfc_option.flag_automatic = 1;\n   gfc_option.flag_backslash = 1;\n   gfc_option.flag_d_lines = -1;\n \n@@ -331,6 +332,10 @@ gfc_handle_option (size_t scode, const char *arg, int value)\n       gfc_option.flag_dollar_ok = value;\n       break;\n \n+    case OPT_fautomatic:\n+      gfc_option.flag_automatic = value;\n+      break;\n+\n     case OPT_fbackslash:\n       gfc_option.flag_backslash = value;\n       break;"}, {"sha": "968d137c44087601e46e6a5f7cdc5f2a6ad7eafc", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee5426a488f8b28099c6f462aef34b157182d2ac/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=ee5426a488f8b28099c6f462aef34b157182d2ac", "patch": "@@ -5053,7 +5053,7 @@ gfc_resolve (gfc_namespace * ns)\n \n   gfc_traverse_ns (ns, resolve_values);\n \n-  if (ns->save_all)\n+  if (!gfc_option.flag_automatic || ns->save_all)\n     gfc_save_all (ns);\n \n   iter_stack = NULL;"}]}