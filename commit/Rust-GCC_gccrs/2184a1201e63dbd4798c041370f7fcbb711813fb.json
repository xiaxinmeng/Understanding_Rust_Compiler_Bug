{"sha": "2184a1201e63dbd4798c041370f7fcbb711813fb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE4NGExMjAxZTYzZGJkNDc5OGMwNDEzNzBmN2ZjYmI3MTE4MTNmYg==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2005-01-17T21:09:14Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2005-01-17T21:09:14Z"}, "message": "config.gcc (mips64*-*-linux*): Set the default abi to n32.\n\n\t* config.gcc (mips64*-*-linux*): Set the default abi to n32.  Remove\n\tredundant target_cpu_default and extra_parts lines.  Use the default\n\t\"from-abi\" ISA.\n\t* config/mips/linux64.h (DRIVER_DEFAULT_ABI_SELF_SPEC): Delete.\n\t(SUBTARGET_EXTRA_SPECS): Delete.\n\t(DRIVER_SELF_SPECS): Remove architecture lines.  Set the ABI directly.\n\t(SUBTARGET_ASM_SPEC): Remove -mabi=n32 and -mabi=64 mappings.\n\t* config/mips/t-linux64 (MULTILIB_DIRNAMES): Use \"32\" for -mabi=32\n\tand \"n32\" for -mabi=n32.\n\nFrom-SVN: r93777", "tree": {"sha": "d6d6df31013ab09511a3562841065de29d5f8380", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d6d6df31013ab09511a3562841065de29d5f8380"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2184a1201e63dbd4798c041370f7fcbb711813fb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2184a1201e63dbd4798c041370f7fcbb711813fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2184a1201e63dbd4798c041370f7fcbb711813fb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2184a1201e63dbd4798c041370f7fcbb711813fb/comments", "author": null, "committer": null, "parents": [{"sha": "5a6e9546a8e1024b33dcd2f8fd014453b02d3003", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a6e9546a8e1024b33dcd2f8fd014453b02d3003", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a6e9546a8e1024b33dcd2f8fd014453b02d3003"}], "stats": {"total": 41, "additions": 18, "deletions": 23}, "files": [{"sha": "0533ca3f4553f7a21675824809935ed62a9e8f8f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2184a1201e63dbd4798c041370f7fcbb711813fb", "patch": "@@ -1,3 +1,15 @@\n+2005-01-17  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config.gcc (mips64*-*-linux*): Set the default abi to n32.  Remove\n+\tredundant target_cpu_default and extra_parts lines.  Use the default\n+\t\"from-abi\" ISA.\n+\t* config/mips/linux64.h (DRIVER_DEFAULT_ABI_SELF_SPEC): Delete.\n+\t(SUBTARGET_EXTRA_SPECS): Delete.\n+\t(DRIVER_SELF_SPECS): Remove architecture lines.  Set the ABI directly.\n+\t(SUBTARGET_ASM_SPEC): Remove -mabi=n32 and -mabi=64 mappings.\n+\t* config/mips/t-linux64 (MULTILIB_DIRNAMES): Use \"32\" for -mabi=32\n+\tand \"n32\" for -mabi=n32.\n+\n 2005-01-17  Ian Lance Taylor  <ian@airs.com>\n \n \tPR c/5675"}, {"sha": "581c1060bb9558a318cda94dd061435d9e01a899", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=2184a1201e63dbd4798c041370f7fcbb711813fb", "patch": "@@ -1384,15 +1384,7 @@ mips*-*-netbsd*)\t\t\t# NetBSD/mips, either endian.\n mips64*-*-linux*)\n \ttm_file=\"dbxelf.h elfos.h svr4.h linux.h ${tm_file} mips/linux.h mips/linux64.h\"\n \ttmake_file=\"${tmake_file} mips/t-linux64\"\n-\n-\t# This default ABI is a partial lie: t-linux64 overrides the\n-\t# DRIVER_SELF_SPEC that sets the default abi, in the spec file\n-\t# that is installed.  What GCC thinks of as the default must\n-\t# remain as ABI_32 such that the SONAMEs of the libgcc shared\n-\t# libraries remain compatible with those of mips-linux-gnu.\n-\ttm_defines=\"MIPS_ISA_DEFAULT=1 MIPS_ABI_DEFAULT=ABI_32\"\n-\ttarget_cpu_default=\"MASK_ABICALLS|MASK_FLOAT64|MASK_64BIT\"\n-\textra_parts=\"crtbegin.o crtbeginS.o crtbeginT.o crtend.o crtendS.o\"\n+\ttm_defines=\"MIPS_ABI_DEFAULT=ABI_N32\"\n \tgnu_ld=yes\n \tgas=yes\n \t;;"}, {"sha": "6651fb011f5b831e2dc1d83beac0ba9513a2f25a", "filename": "gcc/config/mips/linux64.h", "status": "modified", "additions": 4, "deletions": 13, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2Fconfig%2Fmips%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2Fconfig%2Fmips%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux64.h?ref=2184a1201e63dbd4798c041370f7fcbb711813fb", "patch": "@@ -19,25 +19,16 @@ along with GCC; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-/* This sets the post-install default ABI to n32.  This must NOT be\n-   kept in sync with the default ABI in gcc/config.gcc; it's actually\n-   meant to override that.  However, for correct behavior at build\n-   time, we also need t-linux64 to get the build-time specs in line\n-   with the setting in config.gcc.  */\n-#define DRIVER_DEFAULT_ABI_SELF_SPEC \"%{!mabi=*:-mabi=n32}\"\n-#undef SUBTARGET_EXTRA_SPECS\n-#define SUBTARGET_EXTRA_SPECS \\\n-  { \"driver_default_abi_self_spec\", DRIVER_DEFAULT_ABI_SELF_SPEC },\n+/* Force the default endianness and ABI flags onto the command line\n+   in order to make the other specs easier to write.  */\n #define DRIVER_SELF_SPECS \\\n \"%{!EB:%{!EL:%(endian_spec)}}\", \\\n-\"%(driver_default_abi_self_spec)\", \\\n-\"%{!mips*:%{!march=*:%{mabi=32:-mips1}%{mabi=n32|mabi=64:-mips3}}}\"\n+\"%{!mabi=*: -mabi=n32}\"\n \n #undef SUBTARGET_ASM_SPEC\n #define SUBTARGET_ASM_SPEC \"\\\n %{!fno-PIC:%{!fno-pic:-KPIC}} \\\n-%{fno-PIC:-non_shared} %{fno-pic:-non_shared} \\\n-%{mabi=64:-64} %{mabi=n32:-n32}\"\n+%{fno-PIC:-non_shared} %{fno-pic:-non_shared}\"\n \n #undef LIB_SPEC\n #define LIB_SPEC \"\\"}, {"sha": "1896f491e936f673d7d382c947f76b4e81387b5b", "filename": "gcc/config/mips/t-linux64", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2Fconfig%2Fmips%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2184a1201e63dbd4798c041370f7fcbb711813fb/gcc%2Fconfig%2Fmips%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-linux64?ref=2184a1201e63dbd4798c041370f7fcbb711813fb", "patch": "@@ -1,5 +1,5 @@\n MULTILIB_OPTIONS = mabi=n32/mabi=32/mabi=64\n-MULTILIB_DIRNAMES = 32 o32 64\n+MULTILIB_DIRNAMES = n32 32 64\n MULTILIB_OSDIRNAMES = ../lib32 ../lib ../lib64\n \n EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o crtbeginT.o"}]}