{"sha": "3c2707f33af46ac145769872b65e25fd0b870903", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2MyNzA3ZjMzYWY0NmFjMTQ1NzY5ODcyYjY1ZTI1ZmQwYjg3MDkwMw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2020-01-06T13:00:04Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2020-01-06T13:00:04Z"}, "message": "[AArch64] Fix constraints for CPY /M\n\nThe constraints for CPY /M allowed p0-p15 instead of the intended p0-p7.\nThis looks like a pasto from the preceding constant pattern, where p0-p15\nis allowed.\n\n2020-01-06  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* config/aarch64/aarch64-sve.md (@aarch64_sel_dup<mode>): Use Upl\n\trather than Upa for CPY /M.\n\ngcc/testsuite/\n\t* gcc.target/aarch64/sve/acle/general/cpy_1.c: New test.\n\nFrom-SVN: r279899", "tree": {"sha": "bd94c4e46c475be1208574e7dc7df8f88ce61b59", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bd94c4e46c475be1208574e7dc7df8f88ce61b59"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c2707f33af46ac145769872b65e25fd0b870903", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c2707f33af46ac145769872b65e25fd0b870903", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c2707f33af46ac145769872b65e25fd0b870903", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c2707f33af46ac145769872b65e25fd0b870903/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5960de787f57b15dfbd76aa9fa40552a34ea9d9b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5960de787f57b15dfbd76aa9fa40552a34ea9d9b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5960de787f57b15dfbd76aa9fa40552a34ea9d9b"}], "stats": {"total": 53, "additions": 52, "deletions": 1}, "files": [{"sha": "520562a1fc892b7b936590836ec70f46eec4ab6d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3c2707f33af46ac145769872b65e25fd0b870903", "patch": "@@ -1,3 +1,8 @@\n+2020-01-06  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* config/aarch64/aarch64-sve.md (@aarch64_sel_dup<mode>): Use Upl\n+\trather than Upa for CPY /M.\n+\n 2020-01-06  Andrew Stubbs  <ams@codesourcery.com>\n \n \t* config/gcn/gcn.c (gcn_inline_constant_p): Allow 64 as an inline"}, {"sha": "59bf4a695077d0dea28dc841a186e650e671c68b", "filename": "gcc/config/aarch64/aarch64-sve.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2Fconfig%2Faarch64%2Faarch64-sve.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2Fconfig%2Faarch64%2Faarch64-sve.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-sve.md?ref=3c2707f33af46ac145769872b65e25fd0b870903", "patch": "@@ -6523,7 +6523,7 @@\n (define_insn \"@aarch64_sel_dup<mode>\"\n   [(set (match_operand:SVE_FULL 0 \"register_operand\" \"=?w, w, ??w, ?&w, ??&w, ?&w\")\n \t(unspec:SVE_FULL\n-\t  [(match_operand:<VPRED> 3 \"register_operand\" \"Upa, Upa, Upl, Upl, Upl, Upl\")\n+\t  [(match_operand:<VPRED> 3 \"register_operand\" \"Upl, Upl, Upl, Upl, Upl, Upl\")\n \t   (vec_duplicate:SVE_FULL\n \t     (match_operand:<VEL> 1 \"register_operand\" \"r, w, r, w, r, w\"))\n \t   (match_operand:SVE_FULL 2 \"aarch64_simd_reg_or_zero\" \"0, 0, Dz, Dz, w, w\")]"}, {"sha": "878ea3704803f63c052a2440230d6655feafc0a0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3c2707f33af46ac145769872b65e25fd0b870903", "patch": "@@ -1,3 +1,7 @@\n+2020-01-06  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* gcc.target/aarch64/sve/acle/general/cpy_1.c: New test.\n+\n 2020-01-05  Andrew Pinski  <apinski@marvell.com>\n \n \t* gcc.c-torture/compile/20200105-1.c: New testcase."}, {"sha": "1d8f429caeb66a97b6905d179324488f715e2890", "filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general/cpy_1.c", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral%2Fcpy_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c2707f33af46ac145769872b65e25fd0b870903/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral%2Fcpy_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral%2Fcpy_1.c?ref=3c2707f33af46ac145769872b65e25fd0b870903", "patch": "@@ -0,0 +1,42 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O\" } */\n+/* { dg-final { check-function-bodies \"**\" \"\" } } */\n+\n+#include <arm_sve.h>\n+\n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+\n+/*\n+** dup_x0_m:\n+**\tadd\t(x[0-9]+), x0, #?1\n+**\tmov\t(p[0-7])\\.b, p15\\.b\n+**\tmov\tz0\\.d, \\2/m, \\1\n+**\tret\n+*/\n+svuint64_t\n+dup_x0_m (svuint64_t z0, uint64_t x0)\n+{\n+  register svbool_t pg asm (\"p15\");\n+  asm volatile (\"\" : \"=Upa\" (pg));\n+  return svdup_u64_m (z0, pg, x0 + 1);\n+}\n+\n+/*\n+** dup_d1_z:\n+**\tmov\t(p[0-7])\\.b, p15\\.b\n+**\tmov\tz0\\.d, \\1/m, d1\n+**\tret\n+*/\n+svfloat64_t\n+dup_d1_z (svfloat64_t z0, float64_t d1)\n+{\n+  register svbool_t pg asm (\"p15\");\n+  asm volatile (\"\" : \"=Upa\" (pg));\n+  return svdup_f64_m (z0, pg, d1);\n+}\n+\n+#ifdef __cplusplus\n+}\n+#endif"}]}