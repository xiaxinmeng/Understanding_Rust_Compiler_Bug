{"sha": "f46e2bc9236de506841dca92414b217a1d90bbea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ2ZTJiYzkyMzZkZTUwNjg0MWRjYTkyNDE0YjIxN2ExZDkwYmJlYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-02-19T17:43:41Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-02-19T17:43:41Z"}, "message": "re PR c++/79380 (ICE on C++11 code with illegal alignas specifier on x86_64-linux-gnu: unexpected expression \u2018f\u2019 of kind overload)\n\n/cp\n2017-02-19  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/79380\n\t* typeck.c (cxx_alignas_expr): Reject a non-integral alignas\n\targument.\n\n/testsuite\n2017-02-19  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/79380\n\t* g++.dg/cpp0x/alignas8.C: New.\n\nFrom-SVN: r245578", "tree": {"sha": "58cdbaf6d9157a96f7b918a1f5e5359165442417", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/58cdbaf6d9157a96f7b918a1f5e5359165442417"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f46e2bc9236de506841dca92414b217a1d90bbea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f46e2bc9236de506841dca92414b217a1d90bbea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f46e2bc9236de506841dca92414b217a1d90bbea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f46e2bc9236de506841dca92414b217a1d90bbea/comments", "author": null, "committer": null, "parents": [{"sha": "74705cc6492f04d4d39d972322a57bd2e3a78f33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74705cc6492f04d4d39d972322a57bd2e3a78f33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74705cc6492f04d4d39d972322a57bd2e3a78f33"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "20c7eed3bcb72e027da37b99b13373f74fbbc42e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f46e2bc9236de506841dca92414b217a1d90bbea", "patch": "@@ -1,3 +1,9 @@\n+2017-02-19  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/79380\n+\t* typeck.c (cxx_alignas_expr): Reject a non-integral alignas\n+\targument.\n+\n 2017-02-19  Eric Fiselier  <eric@efcs.ca>\n \t    Jonathan Wakely  <jwakely@redhat.com>\n "}, {"sha": "9297a99add60763600bcb0c137acf28184858700", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=f46e2bc9236de506841dca92414b217a1d90bbea", "patch": "@@ -1795,6 +1795,12 @@ cxx_alignas_expr (tree e)\n \n          the assignment-expression shall be an integral constant\n \t expression.  */\n+\n+  if (!INTEGRAL_OR_UNSCOPED_ENUMERATION_TYPE_P (TREE_TYPE (e)))\n+    {\n+      error (\"%<alignas%> argument has non-integral type %qT\", TREE_TYPE (e));\n+      return error_mark_node;\n+    }\n   \n   return cxx_constant_value (e);\n }"}, {"sha": "097cab4b5b8f88b10bd0af6bf001202b3deb4360", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f46e2bc9236de506841dca92414b217a1d90bbea", "patch": "@@ -1,3 +1,8 @@\n+2017-02-19  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/79380\n+\t* g++.dg/cpp0x/alignas8.C: New.\n+\n 2017-02-19  Eric Fiselier  <eric@efcs.ca>\n \t    Jonathan Wakely  <jwakely@redhat.com>\n "}, {"sha": "bd76233f4ad5e66aa4d34bf6c759d381398a7f25", "filename": "gcc/testsuite/g++.dg/cpp0x/alignas8.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignas8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f46e2bc9236de506841dca92414b217a1d90bbea/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignas8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Falignas8.C?ref=f46e2bc9236de506841dca92414b217a1d90bbea", "patch": "@@ -0,0 +1,7 @@\n+// PR c++/79380\n+// { dg-do compile { target c++11 } }\n+\n+template < typename > constexpr int f () {  return 8;  }\n+\n+// should have been: struct alignas (f<int>()) S {};\n+struct alignas (f) S {};  // { dg-error \"17:'alignas' argument has non-integral type\" }"}]}