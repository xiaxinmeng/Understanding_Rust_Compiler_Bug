{"sha": "f26aca6db222608dad580009b47b21b5774d9baa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI2YWNhNmRiMjIyNjA4ZGFkNTgwMDA5YjQ3YjIxYjU3NzRkOWJhYQ==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2003-05-13T18:15:20Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2003-05-13T18:15:20Z"}, "message": "expr.c (move_by_pieces): Honor the alignment of TO and FROM.\n\n* expr.c (move_by_pieces): Honor the alignment of TO and FROM.\n(emit_push_insn): Don't use push when the source alignment is less\nthan the stack's push rounding.\n\nFrom-SVN: r66770", "tree": {"sha": "8f77d371215dca9f9a7b23006f61ba59789b83bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f77d371215dca9f9a7b23006f61ba59789b83bf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f26aca6db222608dad580009b47b21b5774d9baa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f26aca6db222608dad580009b47b21b5774d9baa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f26aca6db222608dad580009b47b21b5774d9baa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f26aca6db222608dad580009b47b21b5774d9baa/comments", "author": null, "committer": null, "parents": [{"sha": "fa6ef81367f0c24ec0b04e753313cdb023e10217", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa6ef81367f0c24ec0b04e753313cdb023e10217", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa6ef81367f0c24ec0b04e753313cdb023e10217"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "20a0fedd5d63cffa26911327246fbc723bde32f7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f26aca6db222608dad580009b47b21b5774d9baa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f26aca6db222608dad580009b47b21b5774d9baa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f26aca6db222608dad580009b47b21b5774d9baa", "patch": "@@ -1,3 +1,9 @@\n+2003-05-12  DJ Delorie  <dj@redhat.com>\n+\n+\t* expr.c (move_by_pieces): Honor the alignment of TO and FROM.\n+\t(emit_push_insn): Don't use push when the source alignment is less\n+\tthan the stack's push rounding.\n+\n 2003-05-13  Zack Weinberg  <zack@codesourcery.com>\n \n \t* diagnostic.c (output_format): Add support for %m."}, {"sha": "9c21ac9a3a7097aeaa3ed708189d05cf49a1d7a8", "filename": "gcc/expr.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f26aca6db222608dad580009b47b21b5774d9baa/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f26aca6db222608dad580009b47b21b5774d9baa/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=f26aca6db222608dad580009b47b21b5774d9baa", "patch": "@@ -1463,7 +1463,7 @@ convert_modes (mode, oldmode, x, unsignedp)\n    If PUSH_ROUNDING is defined and TO is NULL, emit_single_push_insn is\n    used to push FROM to the stack.\n \n-   ALIGN is maximum alignment we can assume.  */\n+   ALIGN is maximum stack alignment we can assume.  */\n \n void\n move_by_pieces (to, from, len, align)\n@@ -1477,6 +1477,8 @@ move_by_pieces (to, from, len, align)\n   enum machine_mode mode = VOIDmode, tmode;\n   enum insn_code icode;\n \n+  align = MIN (to ? MEM_ALIGN (to) : align, MEM_ALIGN (from));\n+\n   data.offset = 0;\n   data.from_addr = from_addr;\n   if (to)\n@@ -3849,6 +3851,7 @@ emit_push_insn (x, mode, type, size, align, partial, reg, extra,\n \t  && PUSH_ARGS\n \t  && GET_CODE (size) == CONST_INT\n \t  && skip == 0\n+\t  && MEM_ALIGN (xinner) >= align\n \t  && (MOVE_BY_PIECES_P ((unsigned) INTVAL (size) - used, align))\n \t  /* Here we avoid the case of a structure whose weak alignment\n \t     forces many pushes of a small amount of data,"}]}