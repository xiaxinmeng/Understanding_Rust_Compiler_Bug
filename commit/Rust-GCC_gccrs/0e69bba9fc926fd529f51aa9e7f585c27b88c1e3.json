{"sha": "0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU2OWJiYTlmYzkyNmZkNTI5ZjUxYWE5ZTdmNTg1YzI3Yjg4YzFlMw==", "commit": {"author": {"name": "Thomas Koenig", "email": "Thomas.Koenig@online.de", "date": "2005-01-23T02:18:33Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2005-01-23T02:18:33Z"}, "message": "re PR libfortran/19451 (Read after a write with a read only file)\n\n2005-01-22  Thomas Koenig  <Thomas.Koenig@online.de>\n\n\tPR libfortran/19451\n\t* io/transfer.c (finalize_transfer):  Don't do anything if\n\tthere is an error condition.\n\t* open_readonly_1.f90:  New test.\n\nFrom-SVN: r94101", "tree": {"sha": "cd9cbaee37fb9b2e5ac2977b499c8db30a3c44d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd9cbaee37fb9b2e5ac2977b499c8db30a3c44d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/comments", "author": null, "committer": null, "parents": [{"sha": "c2d8571d9189c836d8757d2e62c700f0b7f101cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2d8571d9189c836d8757d2e62c700f0b7f101cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2d8571d9189c836d8757d2e62c700f0b7f101cb"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "f63c8dba206014efd868c4e4b08d916de1e0bec5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "patch": "@@ -1,3 +1,8 @@\n+2005-01-22  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR libfortran/19451\n+\t* open_readonly_1.f90:  New test.\n+\n 2005-01-22  Thomas Koenig  <Thomas.Koenig@online.de>\n \n \tPR libfortran/18982"}, {"sha": "622a07d2aeeafeb039a35cad330f11590a0626d1", "filename": "gcc/testsuite/gfortran.dg/open_readonly_1.f90", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/gcc%2Ftestsuite%2Fgfortran.dg%2Fopen_readonly_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/gcc%2Ftestsuite%2Fgfortran.dg%2Fopen_readonly_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fopen_readonly_1.f90?ref=0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "patch": "@@ -0,0 +1,14 @@\n+! { dg-do run }\n+! PR19451\n+! Writing to a non-empty readonly file caused a segfault.\n+! We were still trying to write the EOR after an error ocurred\n+program prog\n+  open (unit=10, file='PR19451.dat')\n+  write (10,*) \"Hello World\"\n+  close (10)\n+  open (unit=10, file='PR19451.dat', action=\"read\")\n+  write (10,*,err=20) \"Hello World\"\n+  call abort()\n+  20 continue\n+end program\n+"}, {"sha": "1296ab2a2475e61b7bd2232b8868cb2cc15e3f6c", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "patch": "@@ -1,3 +1,9 @@\n+2005-01-22  Thomas Koenig  <Thomas.Koenig@online.de>\n+\n+\tPR libfortran/19451\n+\t* io/transfer.c (finalize_transfer):  Don't do anything if\n+\tthere is an error condition.\n+\n 2005-01-22  David Edelsohn  <edelsohn@gnu.org>\n \n \tPR libgfortran/19052"}, {"sha": "1dcbc7ff74c8941c3a1c634605ac2721c2a08588", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e69bba9fc926fd529f51aa9e7f585c27b88c1e3/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=0e69bba9fc926fd529f51aa9e7f585c27b88c1e3", "patch": "@@ -1389,6 +1389,9 @@ next_record (int done)\n static void\n finalize_transfer (void)\n {\n+  if (ioparm.library_return != LIBRARY_OK)\n+    return;\n+\n   if ((ionml != NULL) && (ioparm.namelist_name != NULL))\n     {\n        if (ioparm.namelist_read_mode)"}]}