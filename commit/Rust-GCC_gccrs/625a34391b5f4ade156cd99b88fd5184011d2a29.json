{"sha": "625a34391b5f4ade156cd99b88fd5184011d2a29", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjI1YTM0MzkxYjVmNGFkZTE1NmNkOTliODhmZDUxODQwMTFkMmEyOQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2005-12-01T02:31:49Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2005-12-01T02:31:49Z"}, "message": "re PR middle-end/25158 (FAIL: gcc.c-torture/execute/builtins/fprintf.c compilation)\n\n\tPR middle-end/25158\n\t* builtins.c (fold_builtin_fputs): Defer check for missing\n\treplacement functions.\n\nFrom-SVN: r107762", "tree": {"sha": "cdcde4f7780bd6812328a85c7bcd53f7041439a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cdcde4f7780bd6812328a85c7bcd53f7041439a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/625a34391b5f4ade156cd99b88fd5184011d2a29", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/625a34391b5f4ade156cd99b88fd5184011d2a29", "html_url": "https://github.com/Rust-GCC/gccrs/commit/625a34391b5f4ade156cd99b88fd5184011d2a29", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/625a34391b5f4ade156cd99b88fd5184011d2a29/comments", "author": null, "committer": null, "parents": [{"sha": "57fdce262e62bbaeb666e2c733c5f69486deb240", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57fdce262e62bbaeb666e2c733c5f69486deb240", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57fdce262e62bbaeb666e2c733c5f69486deb240"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "5832c4ecf2b9e6a86f473877f16c8a0a58c497e8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625a34391b5f4ade156cd99b88fd5184011d2a29/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625a34391b5f4ade156cd99b88fd5184011d2a29/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=625a34391b5f4ade156cd99b88fd5184011d2a29", "patch": "@@ -1,3 +1,9 @@\n+2005-11-30  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\tPR middle-end/25158\n+\t* builtins.c (fold_builtin_fputs): Defer check for missing\n+\treplacement functions.\n+\n 2005-11-30  Kean Johnston  <jkj@sco.com>\n \n \t* config/i386/i386.c: Check the value of SUPPORTS_ONE_ONLY, not"}, {"sha": "2e42f468e44ea382bae9d1af57a323afd27bb620", "filename": "gcc/builtins.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625a34391b5f4ade156cd99b88fd5184011d2a29/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625a34391b5f4ade156cd99b88fd5184011d2a29/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=625a34391b5f4ade156cd99b88fd5184011d2a29", "patch": "@@ -9327,9 +9327,8 @@ fold_builtin_fputs (tree arglist, bool ignore, bool unlocked, tree len)\n   tree const fn_fwrite = unlocked ? built_in_decls[BUILT_IN_FWRITE_UNLOCKED]\n     : implicit_built_in_decls[BUILT_IN_FWRITE];\n \n-  /* If the return value is used, or the replacement _DECL isn't\n-     initialized, don't do the transformation.  */\n-  if (!ignore || !fn_fputc || !fn_fwrite)\n+  /* If the return value is used, don't do the transformation.  */\n+  if (!ignore)\n     return 0;\n \n   /* Verify the arguments in the original call.  */\n@@ -9391,6 +9390,11 @@ fold_builtin_fputs (tree arglist, bool ignore, bool unlocked, tree len)\n       gcc_unreachable ();\n     }\n \n+  /* If the replacement _DECL isn't initialized, don't do the\n+     transformation.  */\n+  if (!fn)\n+    return 0;\n+\n   /* These optimizations are only performed when the result is ignored,\n      hence there's no need to cast the result to integer_type_node.  */\n   return build_function_call_expr (fn, arglist);"}]}