{"sha": "d974312d077aeccd53b6a042d40f6e1789b6efb7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk3NDMxMmQwNzdhZWNjZDUzYjZhMDQyZDQwZjZlMTc4OWI2ZWZiNw==", "commit": {"author": {"name": "Dale Johannesen", "email": "dalej@apple.com", "date": "2004-08-03T18:23:35Z"}, "committer": {"name": "Dale Johannesen", "email": "dalej@gcc.gnu.org", "date": "2004-08-03T18:23:35Z"}, "message": "rs6000.c (machopic_output_stub): Align Darwin stubs.\n\n\n2004-08-03  Dale Johannesen  <dalej@apple.com>\n\n\t* config/rs6000/rs6000.c (machopic_output_stub):  Align Darwin stubs.\n\t* c-common.c: Include opts.h.\n\t(c_common_get_alias_set): Fix check for a single input file.\n\t* toplev.c: Remove current_file_decl.\n\t* tree.h: Ditto.\n\nFrom-SVN: r85492", "tree": {"sha": "264e60950e1d973eccc0c1f4c8b76eb09c4d8306", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/264e60950e1d973eccc0c1f4c8b76eb09c4d8306"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d974312d077aeccd53b6a042d40f6e1789b6efb7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d974312d077aeccd53b6a042d40f6e1789b6efb7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d974312d077aeccd53b6a042d40f6e1789b6efb7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d974312d077aeccd53b6a042d40f6e1789b6efb7/comments", "author": null, "committer": null, "parents": [{"sha": "8e9031ec4da9923e18540f5b902e50fad27af977", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e9031ec4da9923e18540f5b902e50fad27af977", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e9031ec4da9923e18540f5b902e50fad27af977"}], "stats": {"total": 47, "additions": 26, "deletions": 21}, "files": [{"sha": "35d137afe42cad021f4b61549a746becc1c21276", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d974312d077aeccd53b6a042d40f6e1789b6efb7", "patch": "@@ -1,3 +1,11 @@\n+2004-08-03  Dale Johannesen  <dalej@apple.com>\n+\n+\t* config/rs6000/rs6000.c (machopic_output_stub):  Align Darwin stubs.\n+\t* c-common.c: Include opts.h.\n+\t(c_common_get_alias_set): Fix check for a single input file. \n+\t* toplev.c: Remove current_file_decl.\n+\t* tree.h: Ditto.\n+\n 2004-08-03  Mark Mitchell  <mark@codesourcery.com>\n \n \t* config.gcc (arm*-*-symbianelf*): New target."}, {"sha": "30d96e6223ba2f5f155eca08a68e4af6e6f05d24", "filename": "gcc/c-common.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=d974312d077aeccd53b6a042d40f6e1789b6efb7", "patch": "@@ -45,6 +45,7 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n #include \"tree-iterator.h\"\n #include \"hashtab.h\"\n #include \"tree-mudflap.h\"\n+#include \"opts.h\"\n \n cpp_reader *parse_in;\t\t/* Declared in c-pragma.h.  */\n \n@@ -2672,7 +2673,7 @@ c_common_get_alias_set (tree t)\n     return -1;\n \n   /* Save time if there's only one input file.  */\n-  if (!current_file_decl || TREE_CHAIN (current_file_decl) == NULL_TREE)\n+  if (num_in_fnames == 1)\n     return -1;\n \n   /* Pointers need special handling if they point to any type that"}, {"sha": "b5710946eb3f18b77afd211c3d0c143b605f8b23", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 16, "deletions": 10, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=d974312d077aeccd53b6a042d40f6e1789b6efb7", "patch": "@@ -16076,13 +16076,14 @@ machopic_output_stub (FILE *file, const char *symb, const char *stub)\n     machopic_picsymbol_stub1_section ();\n   else\n     machopic_symbol_stub1_section ();\n-  fprintf (file, \"\\t.align 2\\n\");\n-\n-  fprintf (file, \"%s:\\n\", stub);\n-  fprintf (file, \"\\t.indirect_symbol %s\\n\", symbol_name);\n \n   if (flag_pic == 2)\n     {\n+      fprintf (file, \"\\t.align 5\\n\");\n+\n+      fprintf (file, \"%s:\\n\", stub);\n+      fprintf (file, \"\\t.indirect_symbol %s\\n\", symbol_name);\n+\n       label++;\n       local_label_0 = alloca (sizeof(\"\\\"L0000000000$spb\\\"\"));\n       sprintf (local_label_0, \"\\\"L%011d$spb\\\"\", label);\n@@ -16099,12 +16100,17 @@ machopic_output_stub (FILE *file, const char *symb, const char *stub)\n       fprintf (file, \"\\tbctr\\n\");\n     }\n   else\n-   {\n-     fprintf (file, \"\\tlis r11,ha16(%s)\\n\", lazy_ptr_name);\n-     fprintf (file, \"\\tlwzu r12,lo16(%s)(r11)\\n\", lazy_ptr_name);\n-     fprintf (file, \"\\tmtctr r12\\n\");\n-     fprintf (file, \"\\tbctr\\n\");\n-   }\n+    {\n+      fprintf (file, \"\\t.align 4\\n\");\n+\n+      fprintf (file, \"%s:\\n\", stub);\n+      fprintf (file, \"\\t.indirect_symbol %s\\n\", symbol_name);\n+\n+      fprintf (file, \"\\tlis r11,ha16(%s)\\n\", lazy_ptr_name);\n+      fprintf (file, \"\\tlwzu r12,lo16(%s)(r11)\\n\", lazy_ptr_name);\n+      fprintf (file, \"\\tmtctr r12\\n\");\n+      fprintf (file, \"\\tbctr\\n\");\n+    }\n   \n   machopic_lazy_symbol_ptr_section ();\n   fprintf (file, \"%s:\\n\", lazy_ptr_name);"}, {"sha": "5df0155adc12e2829496844deb3d0dd86e9ad81a", "filename": "gcc/toplev.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=d974312d077aeccd53b6a042d40f6e1789b6efb7", "patch": "@@ -225,11 +225,6 @@ tree current_function_decl;\n    if none.  */\n tree current_function_func_begin_label;\n \n-/* A DECL for the current file-scope context.  When using IMA, this heads a\n-   chain of FILE_DECLs; currently only C uses it.  */\n-\n-tree current_file_decl;\n-\n /* Temporarily suppress certain warnings.\n    This is set while reading code from a system header file.  */\n "}, {"sha": "92e9a55d8025856c8da3aaf0e8a1e02b37d29621", "filename": "gcc/tree.h", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d974312d077aeccd53b6a042d40f6e1789b6efb7/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=d974312d077aeccd53b6a042d40f6e1789b6efb7", "patch": "@@ -3318,11 +3318,6 @@ extern GTY(()) tree current_function_decl;\n \n /* Nonzero means a FUNC_BEGIN label was emitted.  */\n extern GTY(()) tree current_function_func_begin_label;\n-\n-/* A DECL for the current file-scope context.  When using IMA, this heads a\n-   chain of FILE_DECLs; currently only C uses it.  */\n-\n-extern GTY(()) tree current_file_decl;\n \f\n /* In tree.c */\n extern unsigned crc32_string (unsigned, const char *);"}]}