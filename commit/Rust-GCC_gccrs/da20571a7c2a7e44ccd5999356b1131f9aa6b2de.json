{"sha": "da20571a7c2a7e44ccd5999356b1131f9aa6b2de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGEyMDU3MWE3YzJhN2U0NGNjZDU5OTkzNTZiMTEzMWY5YWE2YjJkZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-12-09T22:37:02Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-12-09T22:37:02Z"}, "message": "re PR lto/68811 (ICE: in get, at cgraph.h:1218)\n\n\tPR lto/68811\n\t* lto.c (lto_fixup_prevailing_decls): Do not check TREE_CHAIN of\n\tDECL.\n\t(LTO_NO_PREVAIL): Use gcc_checking_assert.\n\nFrom-SVN: r231477", "tree": {"sha": "7ae5f4e79f8d1151e586b20aae84f97cc9d7fc61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7ae5f4e79f8d1151e586b20aae84f97cc9d7fc61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da20571a7c2a7e44ccd5999356b1131f9aa6b2de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da20571a7c2a7e44ccd5999356b1131f9aa6b2de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da20571a7c2a7e44ccd5999356b1131f9aa6b2de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da20571a7c2a7e44ccd5999356b1131f9aa6b2de/comments", "author": null, "committer": null, "parents": [{"sha": "985f6c7969f7dd815c84f012486f17de978813b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/985f6c7969f7dd815c84f012486f17de978813b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/985f6c7969f7dd815c84f012486f17de978813b9"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "4fe2ebe1888006a985f1dec0126961af462355c1", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da20571a7c2a7e44ccd5999356b1131f9aa6b2de/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da20571a7c2a7e44ccd5999356b1131f9aa6b2de/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=da20571a7c2a7e44ccd5999356b1131f9aa6b2de", "patch": "@@ -1,3 +1,10 @@\n+2015-12-08  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\tPR lto/68811\n+\t* lto.c (lto_fixup_prevailing_decls): Do not check TREE_CHAIN of\n+\tDECL.\n+\t(LTO_NO_PREVAIL): Use gcc_checking_assert.\n+\n 2015-12-08  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR lto/68811"}, {"sha": "1b11439f04fc74583c91477f817757eae2e06c6e", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da20571a7c2a7e44ccd5999356b1131f9aa6b2de/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da20571a7c2a7e44ccd5999356b1131f9aa6b2de/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=da20571a7c2a7e44ccd5999356b1131f9aa6b2de", "patch": "@@ -2517,7 +2517,7 @@ lto_wpa_write_files (void)\n \n /* Ensure that TT isn't a replacable var of function decl.  */\n #define LTO_NO_PREVAIL(tt) \\\n-  gcc_assert (!(tt) || !VAR_OR_FUNCTION_DECL_P (tt))\n+  gcc_checking_assert (!(tt) || !VAR_OR_FUNCTION_DECL_P (tt))\n \n /* Given a tree T replace all fields referring to variables or functions\n    with their prevailing variant.  */\n@@ -2529,7 +2529,10 @@ lto_fixup_prevailing_decls (tree t)\n \n   gcc_checking_assert (code != TREE_BINFO);\n   LTO_NO_PREVAIL (TREE_TYPE (t));\n-  if (CODE_CONTAINS_STRUCT (code, TS_COMMON))\n+  if (CODE_CONTAINS_STRUCT (code, TS_COMMON)\n+      /* lto_symtab_prevail_decl use TREE_CHAIN to link to the prevailing decl.\n+\t in the case T is a prevailed declaration we would ICE here. */\n+      && !VAR_OR_FUNCTION_DECL_P (t))\n     LTO_NO_PREVAIL (TREE_CHAIN (t));\n   if (DECL_P (t))\n     {"}]}