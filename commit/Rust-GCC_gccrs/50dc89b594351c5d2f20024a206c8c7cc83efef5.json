{"sha": "50dc89b594351c5d2f20024a206c8c7cc83efef5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTBkYzg5YjU5NDM1MWM1ZDJmMjAwMjRhMjA2YzhjN2NjODNlZmVmNQ==", "commit": {"author": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1995-04-28T17:04:06Z"}, "committer": {"name": "Stan Cox", "email": "coxs@gnu.org", "date": "1995-04-28T17:04:06Z"}, "message": "(umulsidi3) Doesn't work for 88110 with mod/div changes\n,.\n\nFrom-SVN: r9538", "tree": {"sha": "fb3579f1cb722630d36b1b9b499b942023aafc97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fb3579f1cb722630d36b1b9b499b942023aafc97"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/50dc89b594351c5d2f20024a206c8c7cc83efef5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50dc89b594351c5d2f20024a206c8c7cc83efef5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50dc89b594351c5d2f20024a206c8c7cc83efef5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50dc89b594351c5d2f20024a206c8c7cc83efef5/comments", "author": null, "committer": null, "parents": [{"sha": "1dd4b7a8b1eff30db92d909df714905a09969619", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dd4b7a8b1eff30db92d909df714905a09969619", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dd4b7a8b1eff30db92d909df714905a09969619"}], "stats": {"total": 31, "additions": 20, "deletions": 11}, "files": [{"sha": "d102d11855a12c092ebfd95b4e7af0ed13465919", "filename": "gcc/config/m88k/m88k.md", "status": "modified", "additions": 20, "deletions": 11, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/50dc89b594351c5d2f20024a206c8c7cc83efef5/gcc%2Fconfig%2Fm88k%2Fm88k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/50dc89b594351c5d2f20024a206c8c7cc83efef5/gcc%2Fconfig%2Fm88k%2Fm88k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fm88k.md?ref=50dc89b594351c5d2f20024a206c8c7cc83efef5", "patch": "@@ -1,5 +1,5 @@\n ;;- Machine description for the Motorola 88000 for GNU C compiler\n-;;  Copyright (C) 1988, 89, 90, 91, 93, 1994 Free Software Foundation, Inc.\n+;;  Copyright (C) 1988, 92, 93, 94, 1995 Free Software Foundation, Inc.\n ;;  Contributed by Michael Tiemann (tiemann@mcc.com)\n ;;  Additional changes by Michael Meissner (meissner@osf.org)\n ;;  Version 2 port by Tom Wood (twood@pets.sps.mot.com)\n@@ -28,7 +28,7 @@\n (define_expand \"m88k_rcs_id\"\n   [(match_operand:SI 0 \"\" \"\")]\n   \"\"\n-  \"{ static char rcs_id[] = \\\"$What: <@(#) m88k.md,v\t1.5> $\\\";\n+  \"{ static char rcs_id[] = \\\"$What: <@(#) m88k.md,v\t1.1.1.2.2.2> $\\\";\n      FAIL; }\")\n \f\n ;; Attribute describing the processor.  This attribute must match exactly\n@@ -2728,13 +2728,14 @@\n   \"mul %0,%1,%2\"\n   [(set_attr \"type\" \"imul\")])\n \n-(define_insn \"umulsidi3\"\n-  [(set (match_operand:DI 0 \"register_operand\" \"=r\")\n-        (mult:DI (zero_extend:DI (match_operand:SI 1 \"register_operand\" \"%r\"))\n-                 (zero_extend:DI (match_operand:SI 2 \"register_operand\" \"r\"))))]\n-  \"TARGET_88110\"\n-  \"mulu.d %0,%1,%2\"\n-  [(set_attr \"type\" \"imul\")])\n+;; Loses for acvs/P60504.c (mod case) on 88110\n+;; (define_insn \"umulsidi3\"\n+;;   [(set (match_operand:DI 0 \"register_operand\" \"=r\")\n+;;         (mult:DI (zero_extend:DI (match_operand:SI 1 \"register_operand\" \"%r\"))\n+;;                  (zero_extend:DI (match_operand:SI 2 \"register_operand\" \"r\"))))]\n+;;   \"TARGET_88110\"\n+;;   \"mulu.d %0,%1,%2\"\n+;;   [(set_attr \"type\" \"imul\")])\n \n ;; patterns for mixed mode floating point\n ;; Do not define patterns that utilize mixed mode arithmetic that result\n@@ -3852,7 +3853,7 @@\n     emit_jump_insn (gen_casesi_enter (label, index_diff, operands[3]));\n   else\n     /* Load the table entry and jump to it.  */\n-    emit_jump_insn (gen_casesi_jump (gen_reg_rtx (SImode), base, index_diff));\n+    emit_jump_insn (gen_casesi_jump (gen_reg_rtx (SImode), base, index_diff, operands[3]));\n \n   /* Claim that flow drops into the table so it will be adjacent by not\n      emitting a barrier.  */\n@@ -3864,10 +3865,18 @@\n \t(mem:SI (plus:SI (match_operand:SI 1 \"\" \"\")\n \t\t\t (mult:SI (match_operand:SI 2 \"\" \"\")\n \t\t\t\t  (const_int 4)))))\n-   (set (pc) (match_dup 0))]\n+   (parallel [(set (pc) (match_dup 0))\n+              (use (label_ref (match_operand 3 \"\" \"\")))])]\n   \"\"\n   \"\")\n \n+(define_insn \"\"\n+  [(set (pc) (match_operand:SI 0 \"register_operand\" \"r\"))\n+   (use (label_ref (match_operand 1 \"\" \"\")))]\n+  \"\"\n+  \"jmp%. %0\"\n+  [(set_attr \"type\" \"jump\")])\n+\n ;; The bsr.n instruction is directed to the END of the table.  See\n ;; ASM_OUTPUT_CASE_END.\n "}]}