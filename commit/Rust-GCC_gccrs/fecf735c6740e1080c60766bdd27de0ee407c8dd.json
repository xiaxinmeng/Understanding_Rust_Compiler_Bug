{"sha": "fecf735c6740e1080c60766bdd27de0ee407c8dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmVjZjczNWM2NzQwZTEwODBjNjA3NjZiZGQyN2RlMGVlNDA3YzhkZA==", "commit": {"author": {"name": "Matt Kraai", "email": "kraai@alumni.cmu.edu", "date": "2004-02-26T02:09:35Z"}, "committer": {"name": "Matt Kraai", "email": "kraai@gcc.gnu.org", "date": "2004-02-26T02:09:35Z"}, "message": "ffi.c (ffi_prep_args_SYSV): Change ecif->cif->bytes to bytes.\n\n\t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Change\n\tecif->cif->bytes to bytes.\n\t(ffi_prep_cif_machdep): Add braces around nested if statement.\n\nFrom-SVN: r78477", "tree": {"sha": "8229ecf57a227e1ae63cc5a854d4c57a76f3dbb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8229ecf57a227e1ae63cc5a854d4c57a76f3dbb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fecf735c6740e1080c60766bdd27de0ee407c8dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fecf735c6740e1080c60766bdd27de0ee407c8dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fecf735c6740e1080c60766bdd27de0ee407c8dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fecf735c6740e1080c60766bdd27de0ee407c8dd/comments", "author": null, "committer": null, "parents": [{"sha": "4a4f95d919f9c8192b4f0b9fce30c5ebf5f8ffed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a4f95d919f9c8192b4f0b9fce30c5ebf5f8ffed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a4f95d919f9c8192b4f0b9fce30c5ebf5f8ffed"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "e4a674af9055051fbefbfbe8746a4081d695ef3f", "filename": "libffi/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fecf735c6740e1080c60766bdd27de0ee407c8dd/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fecf735c6740e1080c60766bdd27de0ee407c8dd/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=fecf735c6740e1080c60766bdd27de0ee407c8dd", "patch": "@@ -1,3 +1,9 @@\n+2004-02-25  Matt Kraai  <kraai@alumni.cmu.edu>\n+\n+\t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Change\n+\tecif->cif->bytes to bytes.\n+\t(ffi_prep_cif_machdep): Add braces around nested if statement.\n+\n 2004-02-09  Alan Modra  <amodra@bigpond.net.au>\n \n \t* src/types.c (pointer): POWERPC64 has 8 byte pointers."}, {"sha": "29f7dba382788364e876958ad2fa478a7a55fc4a", "filename": "libffi/src/powerpc/ffi.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fecf735c6740e1080c60766bdd27de0ee407c8dd/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fecf735c6740e1080c60766bdd27de0ee407c8dd/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fpowerpc%2Fffi.c?ref=fecf735c6740e1080c60766bdd27de0ee407c8dd", "patch": "@@ -94,7 +94,7 @@ void ffi_prep_args_SYSV(extended_cif *ecif, unsigned *const stack)\n   const unsigned flags = ecif->cif->flags;\n   \n   /* 'stacktop' points at the previous backchain pointer.  */\n-  unsigned *const stacktop = stack + (ecif->cif->bytes / sizeof(unsigned));\n+  unsigned *const stacktop = stack + (bytes / sizeof(unsigned));\n \n   /* 'gpr_base' points at the space for gpr3, and grows upwards as\n      we use GPR registers.  */\n@@ -521,13 +521,15 @@ ffi_status ffi_prep_cif_machdep(ffi_cif *cif)\n \n     case FFI_TYPE_STRUCT:\n       if (cif->abi != FFI_GCC_SYSV && cif->abi != FFI_LINUX64)\n-\tif (cif->rtype->size <= 4)\n-\t  break;\n-\telse if (cif->rtype->size <= 8)\n-\t  {\n-\t    flags |= FLAG_RETURNS_64BITS;\n+\t{\n+\t  if (cif->rtype->size <= 4)\n \t    break;\n-\t  }\n+\t  else if (cif->rtype->size <= 8)\n+\t    {\n+\t      flags |= FLAG_RETURNS_64BITS;\n+\t      break;\n+\t    }\n+\t}\n       /* else fall through.  */\n #if FFI_TYPE_LONGDOUBLE != FFI_TYPE_DOUBLE\n     case FFI_TYPE_LONGDOUBLE:"}]}