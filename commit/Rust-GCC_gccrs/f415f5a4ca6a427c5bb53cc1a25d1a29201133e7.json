{"sha": "f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQxNWY1YTRjYTZhNDI3YzViYjUzY2MxYTI1ZDFhMjkyMDExMzNlNw==", "commit": {"author": {"name": "Laurynas Biveinis", "email": "lauras@softhome.net", "date": "2000-12-03T17:30:16Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2000-12-03T17:30:16Z"}, "message": "pass canonical build name to mkfixinc.sh.  Use it for choosing the fix build method\n\nCo-Authored-By: Bruce Korb <bkorb@gnu.org>\n\nFrom-SVN: r37976", "tree": {"sha": "db39d16053bc62ffa63d04bd40e3b7ee0e488fab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db39d16053bc62ffa63d04bd40e3b7ee0e488fab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/comments", "author": null, "committer": null, "parents": [{"sha": "16f6ece6429c36ad89d4062c02f3af72168fdea9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16f6ece6429c36ad89d4062c02f3af72168fdea9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16f6ece6429c36ad89d4062c02f3af72168fdea9"}], "stats": {"total": 56, "additions": 37, "deletions": 19}, "files": [{"sha": "88fcd550ac2f6103bc2c946b92dd24b81a9ebf2a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "patch": "@@ -1,3 +1,11 @@\n+2000-12-03  Laurynas Biveinis  <lauras@softhome.net>\n+\t    Bruce Korb  <bkorb@gnu.org>\n+\n+        * Makefile.in: pass $(build_canonical) to mkfixinc.sh.\n+        * fixinc/mkfixinc.sh: accept build system name as an argument.\n+        Use it for choosing the fix build method.  Use the target for\n+\tselecting special fix rules.\n+\n 2000-12-03  Bernd Schmidt  <bernds@redhat.co.uk>\n \n \t* Makefile.in (OBJS): Add sched-deps.o."}, {"sha": "38720a6337d9457b500871803283436187b12c04", "filename": "gcc/Makefile.in", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "patch": "@@ -2035,8 +2035,8 @@ fixinc.sh: $(FIXINCSRCDIR)/mkfixinc.sh $(FIXINCSRCDIR)/fixincl.c \\\n \t$(FIXINCSRCDIR)/server.h $(FIXINCSRCDIR)/inclhack.def specs.ready\n \t(MAKE=\"$(MAKE)\"; srcdir=`cd $(srcdir)/fixinc && pwd` ; \\\n \tCC=\"$(CC)\"; CFLAGS=\"$(CFLAGS)\"; LDFLAGS=\"$(LDFLAGS)\"; \\\n-\texport MAKE srcdir CC CFLAGS LDFLAGS; \\\n-\tcd ./fixinc && $(SHELL) $${srcdir}/mkfixinc.sh $(target))\n+\texport MAKE srcdir CC CFLAGS LDFLAGS; cd ./fixinc && \\\n+\t$(SHELL) $${srcdir}/mkfixinc.sh $(canonical_build) $(target))\n \n # Build fixed copies of system files.\n stmp-fixinc: fixinc.sh gsyslimits.h"}, {"sha": "0129157f84a3c4984baa33f5f1908135d2eaa482", "filename": "gcc/fixinc/mkfixinc.sh", "status": "modified", "additions": 27, "deletions": 17, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/gcc%2Ffixinc%2Fmkfixinc.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f415f5a4ca6a427c5bb53cc1a25d1a29201133e7/gcc%2Ffixinc%2Fmkfixinc.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fmkfixinc.sh?ref=f415f5a4ca6a427c5bb53cc1a25d1a29201133e7", "patch": "@@ -1,6 +1,14 @@\n #! /bin/sh\n \n-machine=$1\n+build=$1\n+machine=$2\n+\n+if [ -z \"$build\" ]\n+then\n+       echo No build system name given\n+       exit 1\n+fi\n+\n if [ -z \"$machine\" ]\n then\n \techo No machine name given\n@@ -9,18 +17,30 @@ fi\n \n target=../fixinc.sh\n \n-echo constructing ${target} for $machine\n+echo constructing ${target} for $machine to run on $build\n fixincludes=\"${machine}\"\n \n-case $machine in\n-\t*-*-linux*)\n-\t\t:\n+# Choose fix build method by build system\n+case $build in\n+\ti?86-*-msdosdjgpp* )\n+\t\tMAKE=\"${MAKE} -f ${srcdir}/Makefile.DOS srcdir=${srcdir}\"\n \t\t;;\n \n-\t*-*-sysv4*)\n-\t\tfixincludes=fixinc.svr4\n+\t*-*-beos* )\n+\t\tMAKE=\"${MAKE} -f ${srcdir}/Makefile.BEOS srcdir=${srcdir}\"\n+\t\t# Remove the following line to enable fixincludes\n+\t\t# (Makefile.BEOS is empty until Monday 12/4/00 :)\n+\t\tfixincludes=\n+\t\t;;\n+\n+\t* )\n+\t\tMAKE=\"${MAKE} -f Makefile\"\n \t\t;;\n+esac\n \n+# Check for special fix rules for particular targets\n+case $machine in\n+\t*-*-sysv4* | \\\n \ti?86-*-sysv5* | \\\n \ti?86-*-udk*)\n \t\tfixincludes=fixinc.svr4\n@@ -45,16 +65,6 @@ case $machine in\n \t\tfixincludes=fixinc.ptx\n \t\t;;\n \n-\ti?86-*-msdosdjgpp* )\n-\t\tMAKE=\"${MAKE} -f ${srcdir}/Makefile.DOS srcdir=${srcdir}\"\n-\t\t;;\n-\n-\t*-*-beos* )\n-\t\tMAKE=\"${MAKE} -f ${srcdir}/Makefile.BEOS srcdir=${srcdir}\"\n-\t\t# Remove the following line to enable fixincludes\n-\t\tfixincludes=\n-\t\t;;\n-\n \talpha*-dec-vms* | \\\n \tarm-semi-aout | armel-semi-aout | \\\n \tarm-semi-aof | armel-semi-aof | \\"}]}