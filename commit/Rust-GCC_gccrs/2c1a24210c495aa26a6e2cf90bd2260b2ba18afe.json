{"sha": "2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmMxYTI0MjEwYzQ5NWFhMjZhNmUyY2Y5MGJkMjI2MGIyYmExOGFmZQ==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2001-06-12T12:15:46Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2001-06-12T12:15:46Z"}, "message": "c-decl.c (grokdeclarator): Use INTEGRAL_TYPE_P.\n\n\t* c-decl.c (grokdeclarator): Use INTEGRAL_TYPE_P.\n\n\t* c-typeck.c (c_start_case): Likewise.\n\ntestsuite:\n\t* gcc.c-torture/compile/20010610-1.c: New test.\n\nFrom-SVN: r43257", "tree": {"sha": "bfe239499189c6a61ac5e0b1e233ec9b6e2e2770", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bfe239499189c6a61ac5e0b1e233ec9b6e2e2770"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/comments", "author": null, "committer": null, "parents": [{"sha": "0ea834c1156305a0a2a64598ac610f4d0a232431", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ea834c1156305a0a2a64598ac610f4d0a232431", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ea834c1156305a0a2a64598ac610f4d0a232431"}], "stats": {"total": 35, "additions": 31, "deletions": 4}, "files": [{"sha": "9868b84b77ffeb253e6ccfb030c47e4a095073f4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "patch": "@@ -1,3 +1,9 @@\n+2001-06-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* c-decl.c (grokdeclarator): Use INTEGRAL_TYPE_P.\n+\n+\t* c-typeck.c (c_start_case): Likewise.\n+\n 2001-06-12  Mark Mitchell  <mark@codesourcery.com>\n \n \t* expr.c (store_field): Don't set MEM_ALIAS_SET for a field"}, {"sha": "2c16afb97a3a446408b082174840504ad6db7fda", "filename": "gcc/c-decl.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "patch": "@@ -4357,8 +4357,7 @@ grokdeclarator (declarator, declspecs, decl_context, initialized)\n \t      /* Strip NON_LVALUE_EXPRs since we aren't using as an lvalue.  */\n \t      STRIP_TYPE_NOPS (size);\n \n-\t      if (TREE_CODE (TREE_TYPE (size)) != INTEGER_TYPE\n-\t\t  && TREE_CODE (TREE_TYPE (size)) != ENUMERAL_TYPE)\n+\t      if (! INTEGRAL_TYPE_P (TREE_TYPE (size)))\n \t\t{\n \t\t  error (\"size of array `%s' has non-integer type\", name);\n \t\t  size = integer_one_node;"}, {"sha": "cf995334b9af80c407cd75bae96893a4a8b8613f", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "patch": "@@ -7077,8 +7077,7 @@ c_start_case (exp)\n       code = TREE_CODE (TREE_TYPE (exp));\n       type = TREE_TYPE (exp);\n \n-      if (code != INTEGER_TYPE \n-\t  && code != ENUMERAL_TYPE \n+      if (! INTEGRAL_TYPE_P (type)\n \t  && code != ERROR_MARK)\n \t{\n \t  error (\"switch quantity not an integer\");"}, {"sha": "dfc4b53d9d65acd90168d89cc4f1b7cb34d5c50e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "patch": "@@ -1,3 +1,7 @@\n+2001-06-12  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+\n+\t* gcc.c-torture/compile/20010610-1.c: New test.\n+\n 2001-06-12  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.old-deja/g++.abi/vbase4.C: New test."}, {"sha": "ee8e2431bbb5e6604c60babd0ffa2e174a4843f0", "filename": "gcc/testsuite/gcc.c-torture/compile/20010610-1.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20010610-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c1a24210c495aa26a6e2cf90bd2260b2ba18afe/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20010610-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20010610-1.c?ref=2c1a24210c495aa26a6e2cf90bd2260b2ba18afe", "patch": "@@ -0,0 +1,19 @@\n+/* Origin: Kaveh R. Ghazi <ghazi@caip.rutgers.edu>\n+\n+   Boolean types were not accepted as array sizes nor as switch\n+   quantities.  */\n+\n+#include <stdbool.h>\n+\n+int\n+main(void)\n+{\n+  bool arr[(bool)1];\n+  \n+  switch (arr[0])\n+    {\n+    default:;\n+    }\n+\n+  return 0;\n+}"}]}