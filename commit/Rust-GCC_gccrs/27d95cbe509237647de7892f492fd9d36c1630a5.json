{"sha": "27d95cbe509237647de7892f492fd9d36c1630a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjdkOTVjYmU1MDkyMzc2NDdkZTc4OTJmNDkyZmQ5ZDM2YzE2MzBhNQ==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2001-10-05T18:20:15Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2001-10-05T18:20:15Z"}, "message": "dwarf2out.c (FRAME_BEGIN_LABEL): New.\n\n        * dwarf2out.c (FRAME_BEGIN_LABEL): New.\n        (output_call_frame_info): Use it instead of __FRAME_BEGIN__ and\n        the gas section-name-as-label feature.\n\nFrom-SVN: r46037", "tree": {"sha": "5839cc7e37c182ae8d5fa30a0e58241dad0c4f1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5839cc7e37c182ae8d5fa30a0e58241dad0c4f1d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/27d95cbe509237647de7892f492fd9d36c1630a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27d95cbe509237647de7892f492fd9d36c1630a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/27d95cbe509237647de7892f492fd9d36c1630a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/27d95cbe509237647de7892f492fd9d36c1630a5/comments", "author": null, "committer": null, "parents": [{"sha": "2600825ee1369357da1315e92f9bca3fe69b9f0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2600825ee1369357da1315e92f9bca3fe69b9f0e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2600825ee1369357da1315e92f9bca3fe69b9f0e"}], "stats": {"total": 26, "additions": 13, "deletions": 13}, "files": [{"sha": "2b24a20936db4bea2a9b6fdad938f678a52e55d6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27d95cbe509237647de7892f492fd9d36c1630a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27d95cbe509237647de7892f492fd9d36c1630a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=27d95cbe509237647de7892f492fd9d36c1630a5", "patch": "@@ -1,3 +1,9 @@\n+2001-10-05  Richard Henderson  <rth@redhat.com>\n+\n+\t* dwarf2out.c (FRAME_BEGIN_LABEL): New.\n+\t(output_call_frame_info): Use it instead of __FRAME_BEGIN__ and\n+\tthe gas section-name-as-label feature.\n+\n 2001-10-05  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* doc/cppinternals.texi: Update."}, {"sha": "8857d9b365841bfa76290f1359b88a46f50be5de", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 7, "deletions": 13, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/27d95cbe509237647de7892f492fd9d36c1630a5/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/27d95cbe509237647de7892f492fd9d36c1630a5/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=27d95cbe509237647de7892f492fd9d36c1630a5", "patch": "@@ -288,6 +288,7 @@ static void def_cfa_1\t\t \tPARAMS ((const char *, dw_cfa_location *));\n #ifndef FUNC_END_LABEL\n #define FUNC_END_LABEL\t\t\"LFE\"\n #endif\n+#define FRAME_BEGIN_LABEL\t\"Lframe\"\n #define CIE_AFTER_SIZE_LABEL\t\"LSCIE\"\n #define CIE_END_LABEL\t\t\"LECIE\"\n #define CIE_LENGTH_LABEL\t\"LLCIE\"\n@@ -1708,7 +1709,7 @@ output_call_frame_info (for_eh)\n   register unsigned int i;\n   register dw_fde_ref fde;\n   register dw_cfi_ref cfi;\n-  char l1[20], l2[20];\n+  char l1[20], l2[20], section_start_label[20];\n   int any_lsda_needed = 0;\n   char augmentation[6];\n   int augmentation_size;\n@@ -1747,11 +1748,13 @@ output_call_frame_info (for_eh)\n       ASM_GLOBALIZE_LABEL (asm_out_file, IDENTIFIER_POINTER (label));\n       ASM_OUTPUT_LABEL (asm_out_file, IDENTIFIER_POINTER (label));\n #endif\n-      assemble_label (\"__FRAME_BEGIN__\");\n     }\n   else\n     named_section_flags (DEBUG_FRAME_SECTION, SECTION_DEBUG);\n \n+  ASM_GENERATE_INTERNAL_LABEL (section_start_label, FRAME_BEGIN_LABEL, for_eh);\n+  ASM_OUTPUT_LABEL (asm_out_file, section_start_label);\n+\n   /* Output the CIE.  */\n   ASM_GENERATE_INTERNAL_LABEL (l1, CIE_AFTER_SIZE_LABEL, for_eh);\n   ASM_GENERATE_INTERNAL_LABEL (l2, CIE_END_LABEL, for_eh);\n@@ -1882,19 +1885,10 @@ output_call_frame_info (for_eh)\n \t\t\t    \"FDE Length\");\n       ASM_OUTPUT_LABEL (asm_out_file, l1);\n \n-      /* ??? This always emits a 4 byte offset when for_eh is true, but it\n-\t emits a target dependent sized offset when for_eh is not true.\n-\t This inconsistency may confuse gdb.  The only case where we need a\n-\t non-4 byte offset is for the Irix6 N64 ABI, so we may lose SGI\n-\t compatibility if we emit a 4 byte offset.  We need a 4 byte offset\n-\t though in order to be compatible with the dwarf_fde struct in frame.c.\n-\t If the for_eh case is changed, then the struct in frame.c has\n-\t to be adjusted appropriately.  */\n       if (for_eh)\n-\tdw2_asm_output_delta (4, l1, \"__FRAME_BEGIN__\", \"FDE CIE offset\");\n+\tdw2_asm_output_delta (4, l1, section_start_label, \"FDE CIE offset\");\n       else\n-\tdw2_asm_output_offset (DWARF_OFFSET_SIZE,\n-\t\t\t       stripattributes (DEBUG_FRAME_SECTION),\n+\tdw2_asm_output_offset (DWARF_OFFSET_SIZE, section_start_label,\n \t\t\t       \"FDE CIE offset\");\n \n       if (for_eh)"}]}