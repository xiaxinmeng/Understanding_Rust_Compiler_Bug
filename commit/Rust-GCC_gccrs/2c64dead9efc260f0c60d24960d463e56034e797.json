{"sha": "2c64dead9efc260f0c60d24960d463e56034e797", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmM2NGRlYWQ5ZWZjMjYwZjBjNjBkMjQ5NjBkNDYzZTU2MDM0ZTc5Nw==", "commit": {"author": {"name": "Jeroen Frijters", "email": "jeroen@frijters.net", "date": "2004-08-30T14:19:57Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2004-08-30T14:19:57Z"}, "message": "File.java File (String,String): Fixed handling of empty path.\n\n2004-08-30  Jeroen Frijters  <jeroen@frijters.net>\n\n\t* java/io/File.java File(String,String): Fixed handling of empty\n\tpath.\n\nFrom-SVN: r86774", "tree": {"sha": "395f94b22565caec425ef043fad9455eb7a70d37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/395f94b22565caec425ef043fad9455eb7a70d37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2c64dead9efc260f0c60d24960d463e56034e797", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c64dead9efc260f0c60d24960d463e56034e797", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2c64dead9efc260f0c60d24960d463e56034e797", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2c64dead9efc260f0c60d24960d463e56034e797/comments", "author": {"login": "jfrijters", "id": 2994393, "node_id": "MDQ6VXNlcjI5OTQzOTM=", "avatar_url": "https://avatars.githubusercontent.com/u/2994393?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jfrijters", "html_url": "https://github.com/jfrijters", "followers_url": "https://api.github.com/users/jfrijters/followers", "following_url": "https://api.github.com/users/jfrijters/following{/other_user}", "gists_url": "https://api.github.com/users/jfrijters/gists{/gist_id}", "starred_url": "https://api.github.com/users/jfrijters/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jfrijters/subscriptions", "organizations_url": "https://api.github.com/users/jfrijters/orgs", "repos_url": "https://api.github.com/users/jfrijters/repos", "events_url": "https://api.github.com/users/jfrijters/events{/privacy}", "received_events_url": "https://api.github.com/users/jfrijters/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "89b8abbf7d1d832e0597def81e243e47fc662cee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89b8abbf7d1d832e0597def81e243e47fc662cee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89b8abbf7d1d832e0597def81e243e47fc662cee"}], "stats": {"total": 40, "additions": 34, "deletions": 6}, "files": [{"sha": "96b505b1641d60821ea2981039ccfe950ab33251", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c64dead9efc260f0c60d24960d463e56034e797/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c64dead9efc260f0c60d24960d463e56034e797/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=2c64dead9efc260f0c60d24960d463e56034e797", "patch": "@@ -1,3 +1,8 @@\n+2004-08-30  Jeroen Frijters  <jeroen@frijters.net>\n+\n+\t* java/io/File.java File(String,String): Fixed handling of empty\n+\tpath.\n+\n 2004-08-30  Casey Marshall  <csm@gnu.org>\n \n \tAuthor e-mail updated for all files."}, {"sha": "2626d47e9e14a61b8af5c36f21bfce4ce75b0256", "filename": "libjava/java/io/File.java", "status": "modified", "additions": 29, "deletions": 6, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2c64dead9efc260f0c60d24960d463e56034e797/libjava%2Fjava%2Fio%2FFile.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2c64dead9efc260f0c60d24960d463e56034e797/libjava%2Fjava%2Fio%2FFile.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Fio%2FFile.java?ref=2c64dead9efc260f0c60d24960d463e56034e797", "patch": "@@ -361,14 +361,37 @@ public File(String dirPath, String name)\n   {\n     if (name == null)\n       throw new NullPointerException();\n-    if (dirPath != null && dirPath.length() > 0)\n+    if (dirPath != null)\n       {\n-\t// Try to be smart about the number of separator characters.\n-\tif (dirPath.charAt(dirPath.length() - 1) == separatorChar\n-\t    || name.length() == 0)\n-\t  path = normalizePath(dirPath + name);\n+\tif (dirPath.length() > 0)\n+\t  {\n+\t    // Try to be smart about the number of separator characters.\n+\t    if (dirPath.charAt(dirPath.length() - 1) == separatorChar\n+\t\t|| name.length() == 0)\n+\t      path = normalizePath(dirPath + name);\n+\t    else\n+\t      path = normalizePath(dirPath + separatorChar + name);\n+\t  }\n \telse\n-\t  path = normalizePath(dirPath + separatorChar + name);\n+\t  {\n+\t    // If dirPath is empty, use a system dependant\n+\t    // default prefix.\n+\t    // Note that the leading separators in name have\n+\t    // to be chopped off, to prevent them forming\n+\t    // a UNC prefix on Windows.\n+\t    if (separatorChar == '\\\\' /* TODO use ON_WINDOWS */)\n+\t      {\n+\t\tint skip = 0;\n+\t\twhile(name.length() > skip\n+\t\t    && (name.charAt(skip) == separatorChar\n+\t\t    || name.charAt(skip) == '/'))\n+\t\t  {\n+\t\t    skip++;\n+\t\t  }\n+\t\tname = name.substring(skip);\n+\t      }\n+\t    path = normalizePath(separatorChar + name);\n+\t  }\n       }\n     else\n       path = normalizePath(name);"}]}