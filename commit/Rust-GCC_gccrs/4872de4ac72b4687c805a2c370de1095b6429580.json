{"sha": "4872de4ac72b4687c805a2c370de1095b6429580", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDg3MmRlNGFjNzJiNDY4N2M4MDVhMmMzNzBkZTEwOTViNjQyOTU4MA==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2019-08-23T21:04:33Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2019-08-23T21:04:33Z"}, "message": "Fix libstdc++ lstat missing return type for Windows target.\n\nBuilding for i686-mingw32 target (with some local changes) produced an\nerror\n\nerror: ISO C++ forbids declaration of 'lstat' with no type [-fpermissive]\n\nin libstdc++-v3/src/filesystem/ops-common.h.  This patch adds the\nmissing return type.  OK to commit (trunk and GCC 9 branch)?\n\nNote 1: I haven't run the testsuite with this patch, but it fixes the\nbuild failure I see (in sources with other local changes).\n\nNote 2: I don't know why this hasn't produced build failures for other\npeople, but the missing return type looks wrong in any case even if\nother local changes are for some reason needed for it to produce an\nerror.\n\n\t* src/filesystem/ops-common.h [_GLIBCXX_FILESYSTEM_IS_WINDOWS]\n\t(std::filesystem::__gnu_posix::lstat): Add return type.\n\nFrom-SVN: r274885", "tree": {"sha": "57455bd0e276af5fc5c0e92a0ca281118f31950a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57455bd0e276af5fc5c0e92a0ca281118f31950a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4872de4ac72b4687c805a2c370de1095b6429580", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4872de4ac72b4687c805a2c370de1095b6429580", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4872de4ac72b4687c805a2c370de1095b6429580", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4872de4ac72b4687c805a2c370de1095b6429580/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a0fae476721ccc4072d1289106b01ace17d2a2b0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a0fae476721ccc4072d1289106b01ace17d2a2b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a0fae476721ccc4072d1289106b01ace17d2a2b0"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "e1e109ce723b881d09f047e926e59da496e1aec8", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4872de4ac72b4687c805a2c370de1095b6429580/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4872de4ac72b4687c805a2c370de1095b6429580/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=4872de4ac72b4687c805a2c370de1095b6429580", "patch": "@@ -1,3 +1,8 @@\n+2019-08-23  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* src/filesystem/ops-common.h [_GLIBCXX_FILESYSTEM_IS_WINDOWS]\n+\t(std::filesystem::__gnu_posix::lstat): Add return type.\n+\n 2019-08-20  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* doc/doxygen/user.cfg.in (INPUT): Remove profile mode headers."}, {"sha": "21d0bbabb43bcba7503916c3a85e5288ebeaada5", "filename": "libstdc++-v3/src/filesystem/ops-common.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4872de4ac72b4687c805a2c370de1095b6429580/libstdc%2B%2B-v3%2Fsrc%2Ffilesystem%2Fops-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4872de4ac72b4687c805a2c370de1095b6429580/libstdc%2B%2B-v3%2Fsrc%2Ffilesystem%2Fops-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Ffilesystem%2Fops-common.h?ref=4872de4ac72b4687c805a2c370de1095b6429580", "patch": "@@ -76,7 +76,7 @@ namespace __gnu_posix\n   inline int stat(const wchar_t* path, stat_type* buffer)\n   { return ::_wstat(path, buffer); }\n \n-  inline lstat(const wchar_t* path, stat_type* buffer)\n+  inline int lstat(const wchar_t* path, stat_type* buffer)\n   {\n     // TODO symlinks not currently supported\n     return stat(path, buffer);"}]}