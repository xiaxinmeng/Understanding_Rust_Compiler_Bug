{"sha": "c1e39976c9610d2fcce9cb959db1f113d6a0402d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzFlMzk5NzZjOTYxMGQyZmNjZTljYjk1OWRiMWYxMTNkNmEwNDAyZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2004-01-12T13:18:13Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-01-12T13:18:13Z"}, "message": "pt.c (for_each_template_parm): Do not check for duplicates.\n\n\n\t* pt.c (for_each_template_parm): Do not check for duplicates.\n\t(for_each_template_parm): Use walk_tree duplicate checking code.\n\nFrom-SVN: r75718", "tree": {"sha": "9bed28685aff67769026ce197c982cd3996f0f5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9bed28685aff67769026ce197c982cd3996f0f5f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c1e39976c9610d2fcce9cb959db1f113d6a0402d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1e39976c9610d2fcce9cb959db1f113d6a0402d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c1e39976c9610d2fcce9cb959db1f113d6a0402d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c1e39976c9610d2fcce9cb959db1f113d6a0402d/comments", "author": null, "committer": null, "parents": [{"sha": "07d7d2f4d162b6afbca9f103f0af913e5d9956f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07d7d2f4d162b6afbca9f103f0af913e5d9956f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07d7d2f4d162b6afbca9f103f0af913e5d9956f9"}], "stats": {"total": 18, "additions": 6, "deletions": 12}, "files": [{"sha": "d721909963b4e13d4b1a62775af0d3713829eda4", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1e39976c9610d2fcce9cb959db1f113d6a0402d/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1e39976c9610d2fcce9cb959db1f113d6a0402d/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=c1e39976c9610d2fcce9cb959db1f113d6a0402d", "patch": "@@ -1,3 +1,8 @@\n+2004-01-12  Jan Hubicka  <jh@suse.cz>\n+\n+\t* pt.c (for_each_template_parm): Do not check for duplicates.\n+\t(for_each_template_parm): Use walk_tree duplicate checking code.\n+\n 2004-01-11  Ian Lance Taylor  <ian@wasabisystems.com>\n \n \tPR c++/3478"}, {"sha": "473b6fe03bdff0ceb0c4d9e340c488c4f17cb2dc", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 1, "deletions": 12, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c1e39976c9610d2fcce9cb959db1f113d6a0402d/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c1e39976c9610d2fcce9cb959db1f113d6a0402d/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=c1e39976c9610d2fcce9cb959db1f113d6a0402d", "patch": "@@ -4511,17 +4511,6 @@ for_each_template_parm_r (tree* tp, int* walk_subtrees, void* d)\n   struct pair_fn_data *pfd = (struct pair_fn_data *) d;\n   tree_fn_t fn = pfd->fn;\n   void *data = pfd->data;\n-  void **slot;\n-\n-  /* If we have already visited this tree, there's no need to walk\n-     subtrees.  Otherwise, add it to the visited table.  */\n-  slot = htab_find_slot (pfd->visited, *tp, INSERT);\n-  if (*slot)\n-    {\n-      *walk_subtrees = 0;\n-      return NULL_TREE;\n-    }\n-  *slot = *tp;\n \n   if (TYPE_P (t)\n       && for_each_template_parm (TYPE_CONTEXT (t), fn, data, pfd->visited))\n@@ -4714,7 +4703,7 @@ for_each_template_parm (tree t, tree_fn_t fn, void* data, htab_t visited)\n   result = walk_tree (&t, \n \t\t      for_each_template_parm_r, \n \t\t      &pfd,\n-\t\t      NULL) != NULL_TREE;\n+\t\t      pfd.visited) != NULL_TREE;\n \n   /* Clean up.  */\n   if (!visited)"}]}