{"sha": "a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a", "node_id": "C_kwDOANBUbNoAKGExNzRkYzFhN2YyYmYwYTcxNDc1ZmY2MzNiMTMwYTYwYzBjM2ZmNGE", "commit": {"author": {"name": "Haochen Gui", "email": "guihaoc@gcc.gnu.org", "date": "2022-05-11T01:19:52Z"}, "committer": {"name": "Haochen Gui", "email": "guihaoc@gcc.gnu.org", "date": "2022-05-18T05:21:29Z"}, "message": "This patch adds a combine pattern for \"CA minus one\". The SImode \"CA minus one\" can be converted to DImode as CA only has two values (0 or 1).\n\ngcc/\n\tPR target/95737\n\t* config/rs6000/rs6000.md (*subfsi3_carry_in_xx_64): New.\n\ngcc/testsuite/\n\tPR target/95737\n\t* gcc.target/powerpc/pr95737.c: New.", "tree": {"sha": "cf2fc0675ba4af800b52cd60c248cc2553630386", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf2fc0675ba4af800b52cd60c248cc2553630386"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a/comments", "author": null, "committer": null, "parents": [{"sha": "102237c9f2f2667eb73cb5473bd3a9a97296a414", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/102237c9f2f2667eb73cb5473bd3a9a97296a414", "html_url": "https://github.com/Rust-GCC/gccrs/commit/102237c9f2f2667eb73cb5473bd3a9a97296a414"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "3eca448a262208e47039e8d4dcd7469b0c7fe61c", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a", "patch": "@@ -2344,6 +2344,19 @@\n   \"subfe %0,%0,%0\"\n   [(set_attr \"type\" \"add\")])\n \n+(define_insn_and_split \"*subfsi3_carry_in_xx_64\"\n+  [(set (match_operand:DI 0 \"gpc_reg_operand\" \"=r\")\n+\t(sign_extend:DI (plus:SI (reg:SI CA_REGNO)\n+\t\t\t\t (const_int -1))))]\n+  \"TARGET_POWERPC64\"\n+  \"#\"\n+  \"&&1\"\n+  [(parallel [(set (match_dup 0)\n+\t\t   (plus:DI (reg:DI CA_REGNO)\n+\t\t\t    (const_int -1)))\n+\t      (clobber (reg:DI CA_REGNO))])]\n+  \"\"\n+)\n \n (define_insn \"@neg<mode>2\"\n   [(set (match_operand:GPR 0 \"gpc_reg_operand\" \"=r\")"}, {"sha": "324694fa9a1401129ba857e70bbdd323e025020a", "filename": "gcc/testsuite/gcc.target/powerpc/pr95737.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr95737.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr95737.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr95737.c?ref=a174dc1a7f2bf0a71475ff633b130a60c0c3ff4a", "patch": "@@ -0,0 +1,11 @@\n+/* PR target/95737 */\n+/* { dg-do compile } */\n+/* Disable isel for P9 and later.  */\n+/* { dg-options \"-O2 -mno-isel\" } */\n+/* { dg-final { scan-assembler-not {\\mextsw\\M} } } */\n+\n+\n+unsigned long negativeLessThan (unsigned long a, unsigned long b)\n+{\n+   return -(a < b);\n+}"}]}