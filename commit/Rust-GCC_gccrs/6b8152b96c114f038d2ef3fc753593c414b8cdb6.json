{"sha": "6b8152b96c114f038d2ef3fc753593c414b8cdb6", "node_id": "C_kwDOANBUbNoAKDZiODE1MmI5NmMxMTRmMDM4ZDJlZjNmYzc1MzU5M2M0MTRiOGNkYjY", "commit": {"author": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-11-06T00:33:45Z"}, "committer": {"name": "David Edelsohn", "email": "dje.gcc@gmail.com", "date": "2021-11-06T15:48:46Z"}, "message": "powerpc: Fix vsx_splat_v4si in 32 bit mode\n\nTamar's recent patch to teach CSE to perform vector extract exercises\nVSX splat more frequently, which exposed a constraint error for the\nvsx_splat patterns.  The pattern could be created for Power9, but\nthe \"we constraint only provided alternatives in 64 bit mode. The\ninstructions are valid in 32 bit mode and SImode is allowed in VSX\nregisters.  This patch updates the constraints from \"we\" to \"wa\" to\nallow the pattern and fix the failing testcases.\n\ngcc/ChangeLog:\n\n\t* config/rs6000/vsx.md (vsx_splat_v4si): Change constraints to \"wa\".\n\t(vsx_splat_v4si_di): Change constraint to \"wa\".", "tree": {"sha": "0ec35f4e32a7e933f8446943293edb06f704b91c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ec35f4e32a7e933f8446943293edb06f704b91c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b8152b96c114f038d2ef3fc753593c414b8cdb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b8152b96c114f038d2ef3fc753593c414b8cdb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b8152b96c114f038d2ef3fc753593c414b8cdb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b8152b96c114f038d2ef3fc753593c414b8cdb6/comments", "author": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "edelsohn", "id": 667700, "node_id": "MDQ6VXNlcjY2NzcwMA==", "avatar_url": "https://avatars.githubusercontent.com/u/667700?v=4", "gravatar_id": "", "url": "https://api.github.com/users/edelsohn", "html_url": "https://github.com/edelsohn", "followers_url": "https://api.github.com/users/edelsohn/followers", "following_url": "https://api.github.com/users/edelsohn/following{/other_user}", "gists_url": "https://api.github.com/users/edelsohn/gists{/gist_id}", "starred_url": "https://api.github.com/users/edelsohn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/edelsohn/subscriptions", "organizations_url": "https://api.github.com/users/edelsohn/orgs", "repos_url": "https://api.github.com/users/edelsohn/repos", "events_url": "https://api.github.com/users/edelsohn/events{/privacy}", "received_events_url": "https://api.github.com/users/edelsohn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4856699eeb2809c50930bafe341a96470877195d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4856699eeb2809c50930bafe341a96470877195d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4856699eeb2809c50930bafe341a96470877195d"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a97f7f2a680bf128f112a63fdf6a26a02879b240", "filename": "gcc/config/rs6000/vsx.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b8152b96c114f038d2ef3fc753593c414b8cdb6/gcc%2Fconfig%2Frs6000%2Fvsx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b8152b96c114f038d2ef3fc753593c414b8cdb6/gcc%2Fconfig%2Frs6000%2Fvsx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fvsx.md?ref=6b8152b96c114f038d2ef3fc753593c414b8cdb6", "patch": "@@ -4565,7 +4565,7 @@\n \n ;; V4SI splat support\n (define_insn \"vsx_splat_v4si\"\n-  [(set (match_operand:V4SI 0 \"vsx_register_operand\" \"=we,we\")\n+  [(set (match_operand:V4SI 0 \"vsx_register_operand\" \"=wa,wa\")\n \t(vec_duplicate:V4SI\n \t (match_operand:SI 1 \"splat_input_operand\" \"r,Z\")))]\n   \"TARGET_P9_VECTOR\"\n@@ -4578,7 +4578,7 @@\n ;; allows us to use direct move to get the value in a vector register\n ;; so that we can use XXSPLTW\n (define_insn \"vsx_splat_v4si_di\"\n-  [(set (match_operand:V4SI 0 \"vsx_register_operand\" \"=wa,we\")\n+  [(set (match_operand:V4SI 0 \"vsx_register_operand\" \"=wa,wa\")\n \t(vec_duplicate:V4SI\n \t (truncate:SI\n \t  (match_operand:DI 1 \"gpc_reg_operand\" \"wa,r\"))))]"}]}