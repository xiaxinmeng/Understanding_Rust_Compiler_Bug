{"sha": "ab7481394acffa43f5aac3fed042d83cc2eddd3f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI3NDgxMzk0YWNmZmE0M2Y1YWFjM2ZlZDA0MmQ4M2NjMmVkZGQzZg==", "commit": {"author": {"name": "Andy Hutchinson", "email": "hutchinsonandy@aim.com", "date": "2008-06-09T22:48:37Z"}, "committer": {"name": "Andy Hutchinson", "email": "hutchinsonandy@gcc.gnu.org", "date": "2008-06-09T22:48:37Z"}, "message": "re PR testsuite/36285 (gcc.dg/compat/struct-by-value-xxx improper test for AVR target)\n\nPR testsuite/36285\n* gcc.dg/compat/struct-return-10_y.c: Remove test_va.\n* gcc.dg/compat/vector-defs.h: Add check for availability of 8 byte double.\n* gcc.dg/compat/struct-layout-1_test.h: Change bitfield to match integer size.\n\nFrom-SVN: r136604", "tree": {"sha": "ffc7e3af94bc264937fe2e10bb68f188973b698a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffc7e3af94bc264937fe2e10bb68f188973b698a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab7481394acffa43f5aac3fed042d83cc2eddd3f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab7481394acffa43f5aac3fed042d83cc2eddd3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab7481394acffa43f5aac3fed042d83cc2eddd3f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab7481394acffa43f5aac3fed042d83cc2eddd3f/comments", "author": null, "committer": null, "parents": [{"sha": "3115c00d859324d044aa4cf0a150d9b47c3a82c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3115c00d859324d044aa4cf0a150d9b47c3a82c9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3115c00d859324d044aa4cf0a150d9b47c3a82c9"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "12fea9bb0a00ac0aca5ea1ecd82e0f9603f750bc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ab7481394acffa43f5aac3fed042d83cc2eddd3f", "patch": "@@ -1,3 +1,12 @@\n+2008-06-09  Andy Hutchinson  <hutchinsonandy@aim.com>\n+\n+\tPR testsuite/36285\n+\t* gcc.dg/compat/struct-return-10_y.c: Remove test_va.\n+\t* gcc.dg/compat/vector-defs.h: Add check for availability of 8 byte \n+\tdouble.\n+\t* gcc.dg/compat/struct-layout-1_test.h: Change bitfield to match \n+\tinteger size.\n+\n 2008-06-09  Joseph Myers  <joseph@codesourcery.com>\n \n \t* gcc.dg/pr34856.c: Condition use of -maltivec on"}, {"sha": "4a70dfd0601d9a561e1ce9dab60d6395c5737c98", "filename": "gcc/testsuite/gcc.dg/compat/struct-layout-1_test.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-layout-1_test.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-layout-1_test.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-layout-1_test.h?ref=ab7481394acffa43f5aac3fed042d83cc2eddd3f", "patch": "@@ -1 +1,5 @@\n+#if (__SIZEOF_INT__ >= 4) \n T(0,enum E2 a:31;,B(0,a,e2_m1,e2_0))\n+#else\n+T(0,enum E2 a:15;,B(0,a,e2_m1,e2_0))\n+#endif"}, {"sha": "dcc0b93c101bb5d07153e141d0d422f174ca29c8", "filename": "gcc/testsuite/gcc.dg/compat/struct-return-10_y.c", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-return-10_y.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-return-10_y.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fstruct-return-10_y.c?ref=ab7481394acffa43f5aac3fed042d83cc2eddd3f", "patch": "@@ -2,11 +2,6 @@\n \n #include \"compat-common.h\"\n \n-#ifdef SKIP_VA\n-const int test_va = 0;\n-#else\n-const int test_va = 1;\n-#endif\n \n #include \"fp2-struct-defs.h\"\n #include \"fp2-struct-init.h\"\n@@ -58,7 +53,7 @@ testva##TYPE (int n, ...)\t\t\t\t\t\\\n   int i;\t\t\t\t\t\t\t\\\n   TYPE rslt;\t\t\t\t\t\t\t\\\n   va_list ap;\t\t\t\t\t\t\t\\\n-  if (test_va)\t\t\t\t\t\t\t\\\n+  if (1)\t\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\t\t\\\n       va_start (ap, n);\t\t\t\t\t\t\\\n       for (i = 0; i < n; i++)\t\t\t\t\t\\"}, {"sha": "7574e28c53d530ebf4cb7cc4158d4849e00bf6f9", "filename": "gcc/testsuite/gcc.dg/compat/vector-defs.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fvector-defs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab7481394acffa43f5aac3fed042d83cc2eddd3f/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fvector-defs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcompat%2Fvector-defs.h?ref=ab7481394acffa43f5aac3fed042d83cc2eddd3f", "patch": "@@ -6,7 +6,11 @@ typedef int __attribute__((mode(HI))) hi;\n typedef int __attribute__((mode(SI))) si;\n typedef int __attribute__((mode(DI))) di;\n typedef float __attribute__((mode(SF))) sf;\n+#if ((__SIZEOF_DOUBLE__ >= 8) || (__SIZEOF_LONG_DOUBLE__ >= 8))\n typedef float __attribute__((mode(DF))) df;\n+#else\n+typedef float __attribute__((mode(SF))) df;\n+#endif\n \n #if __GNUC__ > 3 || (__GNUC__ == 3 && __GNUC_MINOR__ >= 5)\n "}]}