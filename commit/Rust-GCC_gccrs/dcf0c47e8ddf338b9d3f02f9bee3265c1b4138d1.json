{"sha": "dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNmMGM0N2U4ZGRmMzM4YjlkM2YwMmY5YmVlMzI2NWMxYjQxMzhkMQ==", "commit": {"author": {"name": "Nathan Froyd", "email": "froydnj@codesourcery.com", "date": "2011-04-08T17:05:23Z"}, "committer": {"name": "Nathan Froyd", "email": "froydnj@gcc.gnu.org", "date": "2011-04-08T17:05:23Z"}, "message": "utils.c (handle_sentinel_attribute): Don't use TYPE_ARG_TYPES\n\ngcc/ada/\n\t* gcc-interface/utils.c (handle_sentinel_attribute): Don't use\n\tTYPE_ARG_TYPES\n\t(handle_type_generic_attribute): Likewise.\n\ngcc/c-family/\n\t* c-common.c (handle_sentinel_attribute): Don't use TYPE_ARG_TYPES.\n\t(handle_type_generic_attribute): Likewise.\n\ngcc/lto/\n\t* lto-lang.c (handle_sentinel_attribute): Don't use TYPE_ARG_TYPES.\n\t(handle_type_generic_attribute): Likewise.\n\nFrom-SVN: r172200", "tree": {"sha": "e61a834b9d87f991a0510f3ef3272372cd473ce0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e61a834b9d87f991a0510f3ef3272372cd473ce0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/comments", "author": null, "committer": null, "parents": [{"sha": "44f370bf4c8ad5c0f780f28c88b7df396d9dd140", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44f370bf4c8ad5c0f780f28c88b7df396d9dd140", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44f370bf4c8ad5c0f780f28c88b7df396d9dd140"}], "stats": {"total": 62, "additions": 22, "deletions": 40}, "files": [{"sha": "155256e068cee43f69880f5be58279c6c89d5d1e", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "patch": "@@ -1,3 +1,9 @@\n+2011-04-08  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* gcc-interface/utils.c (handle_sentinel_attribute): Don't use\n+\tTYPE_ARG_TYPES\n+\t(handle_type_generic_attribute): Likewise.\n+\n 2011-04-04  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR ada/47163"}, {"sha": "8a787893074cf0eb30a11aed84d2bccc330739ab", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "patch": "@@ -5266,8 +5266,6 @@ static tree\n handle_sentinel_attribute (tree *node, tree name, tree args,\n \t\t\t   int ARG_UNUSED (flags), bool *no_add_attrs)\n {\n-  tree params = TYPE_ARG_TYPES (*node);\n-\n   if (!prototype_p (*node))\n     {\n       warning (OPT_Wattributes,\n@@ -5277,10 +5275,7 @@ handle_sentinel_attribute (tree *node, tree name, tree args,\n     }\n   else\n     {\n-      while (TREE_CHAIN (params))\n-\tparams = TREE_CHAIN (params);\n-\n-      if (VOID_TYPE_P (TREE_VALUE (params)))\n+      if (!stdarg_p (*node))\n         {\n \t  warning (OPT_Wattributes,\n \t\t   \"%qs attribute only applies to variadic functions\",\n@@ -5400,17 +5395,11 @@ handle_type_generic_attribute (tree *node, tree ARG_UNUSED (name),\n \t\t\t       tree ARG_UNUSED (args), int ARG_UNUSED (flags),\n \t\t\t       bool * ARG_UNUSED (no_add_attrs))\n {\n-  tree params;\n-\n   /* Ensure we have a function type.  */\n   gcc_assert (TREE_CODE (*node) == FUNCTION_TYPE);\n \n-  params = TYPE_ARG_TYPES (*node);\n-  while (params && ! VOID_TYPE_P (TREE_VALUE (params)))\n-    params = TREE_CHAIN (params);\n-\n   /* Ensure we have a variadic function.  */\n-  gcc_assert (!params);\n+  gcc_assert (!prototype_p (*node) || stdarg_p (*node));\n \n   return NULL_TREE;\n }"}, {"sha": "af66edaf103194d8bc6fd4cd5a76dff014269d17", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "patch": "@@ -1,3 +1,8 @@\n+2011-04-08  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* c-common.c (handle_sentinel_attribute): Don't use TYPE_ARG_TYPES.\n+\t(handle_type_generic_attribute): Likewise.\n+\n 2011-04-07  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/48450"}, {"sha": "63444b8d12980ad27d1d5328b482118771cdface", "filename": "gcc/c-family/c-common.c", "status": "modified", "additions": 2, "deletions": 13, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fc-family%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Fc-family%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.c?ref=dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "patch": "@@ -7662,8 +7662,6 @@ static tree\n handle_sentinel_attribute (tree *node, tree name, tree args,\n \t\t\t   int ARG_UNUSED (flags), bool *no_add_attrs)\n {\n-  tree params = TYPE_ARG_TYPES (*node);\n-\n   if (!prototype_p (*node))\n     {\n       warning (OPT_Wattributes,\n@@ -7672,10 +7670,7 @@ handle_sentinel_attribute (tree *node, tree name, tree args,\n     }\n   else\n     {\n-      while (TREE_CHAIN (params))\n-\tparams = TREE_CHAIN (params);\n-\n-      if (VOID_TYPE_P (TREE_VALUE (params)))\n+      if (!stdarg_p (*node))\n \t{\n \t  warning (OPT_Wattributes,\n \t\t   \"%qE attribute only applies to variadic functions\", name);\n@@ -7714,17 +7709,11 @@ handle_type_generic_attribute (tree *node, tree ARG_UNUSED (name),\n \t\t\t       tree ARG_UNUSED (args), int ARG_UNUSED (flags),\n \t\t\t       bool * ARG_UNUSED (no_add_attrs))\n {\n-  tree params;\n-\n   /* Ensure we have a function type.  */\n   gcc_assert (TREE_CODE (*node) == FUNCTION_TYPE);\n \n-  params = TYPE_ARG_TYPES (*node);\n-  while (params && ! VOID_TYPE_P (TREE_VALUE (params)))\n-    params = TREE_CHAIN (params);\n-\n   /* Ensure we have a variadic function.  */\n-  gcc_assert (!params);\n+  gcc_assert (!prototype_p (*node) || stdarg_p (*node));\n \n   return NULL_TREE;\n }"}, {"sha": "56bf3f5b4e1429bc463e566b2c59275c14496f69", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "patch": "@@ -1,3 +1,8 @@\n+2011-04-08  Nathan Froyd  <froydnj@codesourcery.com>\n+\n+\t* lto-lang.c (handle_sentinel_attribute): Don't use TYPE_ARG_TYPES.\n+\t(handle_type_generic_attribute): Likewise.\n+\n 2011-04-03  Michael Matz  <matz@suse.de>\n \n \t* lto.c (lto_materialize_function): Don't read and then discard"}, {"sha": "c65d916c14c8560cf38dddb4b67eb7879f91f107", "filename": "gcc/lto/lto-lang.c", "status": "modified", "additions": 2, "deletions": 14, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Flto%2Flto-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1/gcc%2Flto%2Flto-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto-lang.c?ref=dcf0c47e8ddf338b9d3f02f9bee3265c1b4138d1", "patch": "@@ -373,13 +373,7 @@ handle_sentinel_attribute (tree *node, tree ARG_UNUSED (name), tree args,\n \t\t\t   int ARG_UNUSED (flags),\n \t\t\t   bool * ARG_UNUSED (no_add_attrs))\n {\n-  tree params = TYPE_ARG_TYPES (*node);\n-  gcc_assert (params);\n-\n-  while (TREE_CHAIN (params))\n-    params = TREE_CHAIN (params);\n-\n-  gcc_assert (!VOID_TYPE_P (TREE_VALUE (params)));\n+  gcc_assert (stdarg_p (*node));\n \n   if (args)\n     {\n@@ -399,17 +393,11 @@ handle_type_generic_attribute (tree *node, tree ARG_UNUSED (name),\n \t\t\t       tree ARG_UNUSED (args), int ARG_UNUSED (flags),\n \t\t\t       bool * ARG_UNUSED (no_add_attrs))\n {\n-  tree params;\n-  \n   /* Ensure we have a function type.  */\n   gcc_assert (TREE_CODE (*node) == FUNCTION_TYPE);\n   \n-  params = TYPE_ARG_TYPES (*node);\n-  while (params && ! VOID_TYPE_P (TREE_VALUE (params)))\n-    params = TREE_CHAIN (params);\n-\n   /* Ensure we have a variadic function.  */\n-  gcc_assert (!params);\n+  gcc_assert (!prototype_p (*node) || stdarg_p (*node));\n \n   return NULL_TREE;\n }"}]}