{"sha": "d4d17e95f1b281a9db1c727870350206c77f0103", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRkMTdlOTVmMWIyODFhOWRiMWM3Mjc4NzAzNTAyMDZjNzdmMDEwMw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-06-18T22:14:06Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-06-18T22:14:06Z"}, "message": "re GNATS gcj/260 (\"Klass.class\" expression should cause Klass to be initialized)\n\n\t* java/lang/natClass.cc (forName): Removed dead code.  Initialize\n\treturned class.  For PR gcj/260.\n\nFrom-SVN: r34590", "tree": {"sha": "9ccdcb530d815d09f19c1ab07bfd54136d0b2e85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9ccdcb530d815d09f19c1ab07bfd54136d0b2e85"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4d17e95f1b281a9db1c727870350206c77f0103", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4d17e95f1b281a9db1c727870350206c77f0103", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4d17e95f1b281a9db1c727870350206c77f0103", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4d17e95f1b281a9db1c727870350206c77f0103/comments", "author": null, "committer": null, "parents": [{"sha": "3b572406c28259bb8dbc1767937bcd965a64b18e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b572406c28259bb8dbc1767937bcd965a64b18e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b572406c28259bb8dbc1767937bcd965a64b18e"}], "stats": {"total": 80, "additions": 24, "deletions": 56}, "files": [{"sha": "22917224758621633a38e55bec03fbd5651f36d7", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d17e95f1b281a9db1c727870350206c77f0103/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d17e95f1b281a9db1c727870350206c77f0103/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=d4d17e95f1b281a9db1c727870350206c77f0103", "patch": "@@ -1,3 +1,8 @@\n+2000-06-18  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* java/lang/natClass.cc (forName): Removed dead code.  Initialize\n+\treturned class.  For PR gcj/260.\n+\n 2000-06-16  Tom Tromey  <tromey@cygnus.com>\n \n \tFix for PR libgcj/261:"}, {"sha": "c7155e66a8611f5b166657dc3c43efc426006cc5", "filename": "libjava/Makefile.in", "status": "modified", "additions": 15, "deletions": 47, "changes": 62, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d17e95f1b281a9db1c727870350206c77f0103/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d17e95f1b281a9db1c727870350206c77f0103/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=d4d17e95f1b281a9db1c727870350206c77f0103", "patch": "@@ -920,9 +920,8 @@ LINK = $(LIBTOOL) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(LDFLAGS) -o $@\n DATA =  $(data_DATA) $(toolexeclib_DATA)\n \n DIST_COMMON =  README COPYING ChangeLog Makefile.am Makefile.in NEWS \\\n-THANKS acconfig.h acinclude.m4 aclocal.m4 configure configure.in \\\n-include/config.h.in include/stamp-h.in libgcj-test.spec.in \\\n-libgcj.spec.in\n+THANKS acinclude.m4 aclocal.m4 configure configure.in \\\n+libgcj-test.spec.in libgcj.spec.in\n \n \n DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)\n@@ -1308,34 +1307,6 @@ config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)\n \t$(SHELL) ./config.status --recheck\n $(srcdir)/configure: @MAINTAINER_MODE_TRUE@$(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)\n \tcd $(srcdir) && $(AUTOCONF)\n-\n-include/config.h: include/stamp-h\n-\t@if test ! -f $@; then \\\n-\t\trm -f include/stamp-h; \\\n-\t\t$(MAKE) include/stamp-h; \\\n-\telse :; fi\n-include/stamp-h: $(srcdir)/include/config.h.in $(top_builddir)/config.status\n-\tcd $(top_builddir) \\\n-\t  && CONFIG_FILES= CONFIG_HEADERS=include/config.h \\\n-\t     $(SHELL) ./config.status\n-\t@echo timestamp > include/stamp-h 2> /dev/null\n-$(srcdir)/include/config.h.in: @MAINTAINER_MODE_TRUE@$(srcdir)/include/stamp-h.in\n-\t@if test ! -f $@; then \\\n-\t\trm -f $(srcdir)/include/stamp-h.in; \\\n-\t\t$(MAKE) $(srcdir)/include/stamp-h.in; \\\n-\telse :; fi\n-$(srcdir)/include/stamp-h.in: $(top_srcdir)/configure.in $(ACLOCAL_M4) acconfig.h\n-\tcd $(top_srcdir) && $(AUTOHEADER)\n-\t@echo timestamp > $(srcdir)/include/stamp-h.in 2> /dev/null\n-\n-mostlyclean-hdr:\n-\n-clean-hdr:\n-\n-distclean-hdr:\n-\t-rm -f include/config.h\n-\n-maintainer-clean-hdr:\n libgcj.spec: $(top_builddir)/config.status libgcj.spec.in\n \tcd $(top_builddir) && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status\n libgcj-test.spec: $(top_builddir)/config.status libgcj-test.spec.in\n@@ -1798,33 +1769,31 @@ distclean-generic:\n \t-rm -f config.cache config.log stamp-h stamp-h[0-9]*\n \n maintainer-clean-generic:\n-mostlyclean-am:  mostlyclean-hdr mostlyclean-toolexeclibLIBRARIES \\\n-\t\tmostlyclean-compile mostlyclean-libtool \\\n-\t\tmostlyclean-toolexeclibLTLIBRARIES \\\n+mostlyclean-am:  mostlyclean-toolexeclibLIBRARIES mostlyclean-compile \\\n+\t\tmostlyclean-libtool mostlyclean-toolexeclibLTLIBRARIES \\\n \t\tmostlyclean-binPROGRAMS mostlyclean-noinstPROGRAMS \\\n \t\tmostlyclean-tags mostlyclean-depend mostlyclean-generic\n \n mostlyclean: mostlyclean-recursive\n \n-clean-am:  clean-hdr clean-toolexeclibLIBRARIES clean-compile \\\n-\t\tclean-libtool clean-toolexeclibLTLIBRARIES \\\n-\t\tclean-binPROGRAMS clean-noinstPROGRAMS clean-tags \\\n-\t\tclean-depend clean-generic mostlyclean-am clean-local\n+clean-am:  clean-toolexeclibLIBRARIES clean-compile clean-libtool \\\n+\t\tclean-toolexeclibLTLIBRARIES clean-binPROGRAMS \\\n+\t\tclean-noinstPROGRAMS clean-tags clean-depend \\\n+\t\tclean-generic mostlyclean-am clean-local\n \n clean: clean-recursive\n \n-distclean-am:  distclean-hdr distclean-toolexeclibLIBRARIES \\\n-\t\tdistclean-compile distclean-libtool \\\n-\t\tdistclean-toolexeclibLTLIBRARIES distclean-binPROGRAMS \\\n-\t\tdistclean-noinstPROGRAMS distclean-tags \\\n-\t\tdistclean-depend distclean-generic clean-am\n+distclean-am:  distclean-toolexeclibLIBRARIES distclean-compile \\\n+\t\tdistclean-libtool distclean-toolexeclibLTLIBRARIES \\\n+\t\tdistclean-binPROGRAMS distclean-noinstPROGRAMS \\\n+\t\tdistclean-tags distclean-depend distclean-generic \\\n+\t\tclean-am\n \t-rm -f libtool\n \n distclean: distclean-recursive\n \t-rm -f config.status\n \n-maintainer-clean-am:  maintainer-clean-hdr \\\n-\t\tmaintainer-clean-toolexeclibLIBRARIES \\\n+maintainer-clean-am:  maintainer-clean-toolexeclibLIBRARIES \\\n \t\tmaintainer-clean-compile maintainer-clean-libtool \\\n \t\tmaintainer-clean-toolexeclibLTLIBRARIES \\\n \t\tmaintainer-clean-binPROGRAMS \\\n@@ -1837,8 +1806,7 @@ maintainer-clean-am:  maintainer-clean-hdr \\\n maintainer-clean: maintainer-clean-recursive\n \t-rm -f config.status\n \n-.PHONY: mostlyclean-hdr distclean-hdr clean-hdr maintainer-clean-hdr \\\n-mostlyclean-toolexeclibLIBRARIES distclean-toolexeclibLIBRARIES \\\n+.PHONY: mostlyclean-toolexeclibLIBRARIES distclean-toolexeclibLIBRARIES \\\n clean-toolexeclibLIBRARIES maintainer-clean-toolexeclibLIBRARIES \\\n uninstall-toolexeclibLIBRARIES install-toolexeclibLIBRARIES \\\n mostlyclean-compile distclean-compile clean-compile \\"}, {"sha": "33ab1a353da070164d9314d936af3913e8304102", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 4, "deletions": 9, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4d17e95f1b281a9db1c727870350206c77f0103/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4d17e95f1b281a9db1c727870350206c77f0103/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=d4d17e95f1b281a9db1c727870350206c77f0103", "patch": "@@ -80,13 +80,6 @@ java::lang::Class::forName (jstring className)\n   if (! className)\n     JvThrow (new java::lang::NullPointerException);\n \n-#if 0\n-  // FIXME: should check syntax of CLASSNAME and throw\n-  // IllegalArgumentException on failure.\n-\n-  // FIXME: should use class loader from calling method.\n-  jclass klass = _Jv_FindClass (className, NULL);\n-#else\n   jsize length = _Jv_GetStringUTFLength (className);\n   char buffer[length];\n   _Jv_GetStringUTFRegion (className, 0, length, buffer);\n@@ -99,8 +92,10 @@ java::lang::Class::forName (jstring className)\n   jclass klass = (buffer[0] == '[' \n \t\t  ? _Jv_FindClassFromSignature (name->data, NULL)\n \t\t  : _Jv_FindClass (name, NULL));\n-#endif\n-  if (! klass)\n+\n+  if (klass)\n+    _Jv_InitClass (klass);\n+  else\n     JvThrow (new java::lang::ClassNotFoundException (className));\n \n   return klass;"}]}