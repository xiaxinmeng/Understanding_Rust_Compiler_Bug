{"sha": "1fcd0a2c503b9fd16cf52df248c92c387d0086f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWZjZDBhMmM1MDNiOWZkMTZjZjUyZGYyNDhjOTJjMzg3ZDAwODZmOQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@suse.de", "date": "2007-10-25T10:11:58Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2007-10-25T10:11:58Z"}, "message": "stl_algo.h (__lg<>(_Size)): Slightly tweak.\n\n2007-10-25  Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/stl_algo.h (__lg<>(_Size)): Slightly tweak.\n\t(__lg(int), __lg(long), __lg(long long)): Add, overloads\n\texploiting __builtin_clz*.\n\nFrom-SVN: r129624", "tree": {"sha": "8efb128e5310c8415d98d1187fdc6278b1416e37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8efb128e5310c8415d98d1187fdc6278b1416e37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1fcd0a2c503b9fd16cf52df248c92c387d0086f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fcd0a2c503b9fd16cf52df248c92c387d0086f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fcd0a2c503b9fd16cf52df248c92c387d0086f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fcd0a2c503b9fd16cf52df248c92c387d0086f9/comments", "author": null, "committer": null, "parents": [{"sha": "0bf2cf8907a382fd2223ac0975516ab99283eaa8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0bf2cf8907a382fd2223ac0975516ab99283eaa8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0bf2cf8907a382fd2223ac0975516ab99283eaa8"}], "stats": {"total": 24, "additions": 21, "deletions": 3}, "files": [{"sha": "fabbe8ace7a486b1e6825d5f8ff1ff123678ede9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1fcd0a2c503b9fd16cf52df248c92c387d0086f9/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1fcd0a2c503b9fd16cf52df248c92c387d0086f9/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=1fcd0a2c503b9fd16cf52df248c92c387d0086f9", "patch": "@@ -1,3 +1,9 @@\n+2007-10-25  Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/stl_algo.h (__lg<>(_Size)): Slightly tweak.\n+\t(__lg(int), __lg(long), __lg(long long)): Add, overloads\n+\texploiting __builtin_clz*.\n+\n 2007-10-24  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/tr1_impl/array (_M_instance): Align naturally."}, {"sha": "d254ec6dc6ec395acac8c7deec3192424a7c05d5", "filename": "libstdc++-v3/include/bits/stl_algo.h", "status": "modified", "additions": 15, "deletions": 3, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1fcd0a2c503b9fd16cf52df248c92c387d0086f9/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algo.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1fcd0a2c503b9fd16cf52df248c92c387d0086f9/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algo.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_algo.h?ref=1fcd0a2c503b9fd16cf52df248c92c387d0086f9", "patch": "@@ -2085,19 +2085,31 @@ _GLIBCXX_BEGIN_NAMESPACE(std)\n \n   /**\n    *  @if maint\n-   *  This is a helper function for the sort routines.\n+   *  This is a helper function for the sort routines.  Precondition: __n > 0.\n    *  @endif\n   */\n   template<typename _Size>\n     inline _Size\n     __lg(_Size __n)\n     {\n       _Size __k;\n-      for (__k = 0; __n != 1; __n >>= 1)\n+      for (__k = 0; __n != 0; __n >>= 1)\n \t++__k;\n-      return __k;\n+      return __k - 1;\n     }\n \n+  inline int\n+  __lg(int __n)\n+  { return sizeof(int) * __CHAR_BIT__  - 1 - __builtin_clz(__n); }\n+\n+  inline long\n+  __lg(long __n)\n+  { return sizeof(long) * __CHAR_BIT__ - 1 - __builtin_clzl(__n); }\n+\n+  inline long long\n+  __lg(long long __n)\n+  { return sizeof(long long) * __CHAR_BIT__ - 1 - __builtin_clzll(__n); }\n+\n   // sort\n \n   template<typename _RandomAccessIterator, typename _Size>"}]}