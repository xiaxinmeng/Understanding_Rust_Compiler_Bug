{"sha": "b2acf594606e2ad30b325e7dde4380285ed23fdb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjJhY2Y1OTQ2MDZlMmFkMzBiMzI1ZTdkZGU0MzgwMjg1ZWQyM2ZkYg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2009-09-05T14:20:51Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2009-09-05T14:20:51Z"}, "message": "re PR fortran/41258 (internal compiler error: in find_typebound_proc_uop, at fortran/symbol.c:4575)\n\n2009-09-05  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/41258\n\t* primary.c (gfc_match_varspec): Do not look for typebound\n\tprocedures unless the derived type has a f2k_derived namespace.\n\n2009-09-05  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/41258\n\t* gfortran.dg/typebound_proc_12.f90 : New test.\n\nFrom-SVN: r151451", "tree": {"sha": "42140c8a45a6377d974fed999e12f6737792497c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/42140c8a45a6377d974fed999e12f6737792497c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b2acf594606e2ad30b325e7dde4380285ed23fdb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2acf594606e2ad30b325e7dde4380285ed23fdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2acf594606e2ad30b325e7dde4380285ed23fdb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2acf594606e2ad30b325e7dde4380285ed23fdb/comments", "author": null, "committer": null, "parents": [{"sha": "896237cdcd1172e00b0b672ce846aa5c885f3c9e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/896237cdcd1172e00b0b672ce846aa5c885f3c9e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/896237cdcd1172e00b0b672ce846aa5c885f3c9e"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "c392d9d5666d22efe9492d55b2085e33b29fb013", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b2acf594606e2ad30b325e7dde4380285ed23fdb", "patch": "@@ -1,3 +1,9 @@\n+2009-09-05  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/41258\n+\t* primary.c (gfc_match_varspec): Do not look for typebound\n+\tprocedures unless the derived type has a f2k_derived namespace.\n+\n 2009-09-03  Diego Novillo  <dnovillo@google.com>\n \n \t* f95-lang.c (lang_hooks): Remove const qualifier."}, {"sha": "f25de2397bf6640edca6cdf31d991638f15fa62c", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=b2acf594606e2ad30b325e7dde4380285ed23fdb", "patch": "@@ -1783,7 +1783,11 @@ gfc_match_varspec (gfc_expr *primary, int equiv_flag, bool sub_flag,\n       if (m != MATCH_YES)\n \treturn MATCH_ERROR;\n \n-      tbp = gfc_find_typebound_proc (sym, &t, name, false, &gfc_current_locus);\n+      if (sym->f2k_derived)\n+\ttbp = gfc_find_typebound_proc (sym, &t, name, false, &gfc_current_locus);\n+      else\n+\ttbp = NULL;\n+\n       if (tbp)\n \t{\n \t  gfc_symbol* tbp_sym;"}, {"sha": "cd4617183bb7fb616336204ef2bda18c9a205dde", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b2acf594606e2ad30b325e7dde4380285ed23fdb", "patch": "@@ -1,3 +1,8 @@\n+2009-09-05  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/41258\n+\t* gfortran.dg/typebound_proc_12.f90 : New test.\n+\n 2009-09-04  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/41225"}, {"sha": "4612d4982f3bd49fcb8007b1edb59e7b3310fb2d", "filename": "gcc/testsuite/gfortran.dg/typebound_proc_12.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_proc_12.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b2acf594606e2ad30b325e7dde4380285ed23fdb/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_proc_12.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ftypebound_proc_12.f90?ref=b2acf594606e2ad30b325e7dde4380285ed23fdb", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do compile }\n+! Test the fix for PR41258, where an ICE was caused by a search\n+! for a typebound procedure to resolve d%c%e\n+!\n+! Contributed by Joost VandeVondele <jv244@cam.ac.uk>\n+!\n+  TYPE a\n+    TYPE(b), DIMENSION(:), POINTER :: c  ! { dg-error \"type that has not been declared\" }\n+  END TYPE\n+  TYPE(a), POINTER :: d\n+  CALL X(d%c%e)         ! { dg-error \"before it is defined\" }\n+end"}]}