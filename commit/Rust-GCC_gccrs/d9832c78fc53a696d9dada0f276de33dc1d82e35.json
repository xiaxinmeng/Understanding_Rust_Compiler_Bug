{"sha": "d9832c78fc53a696d9dada0f276de33dc1d82e35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDk4MzJjNzhmYzUzYTY5NmQ5ZGFkYTBmMjc2ZGUzM2RjMWQ4MmUzNQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-31T21:40:51Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-10-31T21:40:51Z"}, "message": "[4.3 net 2]: If _VA_LIST_, is undefined then va_list is already declared.\n\nUse _ANSI_STDARG_H_, not _ANSI_STDARG_H.\n\nFrom-SVN: r2670", "tree": {"sha": "4e1a2303520fd5bacc13727f05208238425027bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4e1a2303520fd5bacc13727f05208238425027bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9832c78fc53a696d9dada0f276de33dc1d82e35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9832c78fc53a696d9dada0f276de33dc1d82e35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9832c78fc53a696d9dada0f276de33dc1d82e35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9832c78fc53a696d9dada0f276de33dc1d82e35/comments", "author": null, "committer": null, "parents": [{"sha": "6be564d070dc48237f2fb43ac966538fb7b34464", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6be564d070dc48237f2fb43ac966538fb7b34464", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6be564d070dc48237f2fb43ac966538fb7b34464"}], "stats": {"total": 29, "additions": 22, "deletions": 7}, "files": [{"sha": "d44cf9e76e311959bd2c082844f5b45ea0fbc5fb", "filename": "gcc/ginclude/stdarg.h", "status": "modified", "additions": 22, "deletions": 7, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9832c78fc53a696d9dada0f276de33dc1d82e35/gcc%2Fginclude%2Fstdarg.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9832c78fc53a696d9dada0f276de33dc1d82e35/gcc%2Fginclude%2Fstdarg.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fginclude%2Fstdarg.h?ref=d9832c78fc53a696d9dada0f276de33dc1d82e35", "patch": "@@ -105,20 +105,35 @@ typedef __gnuc_va_list va_list;\n #endif /* _VA_LIST_ */\n #else /* not __SVR4_2__ */\n \n+/* On 4.3bsd-net2, make sure ansi.h is included, so we have\n+   one less case to deal with in the following.  */\n+#if defined (__BSD_NET2__) || defined (____386BSD____)\n+#include <ansi.h>\n+#endif\n+\n+/* In 4.3bsd-net2, machine/ansi.h defines these symbols, which remain\n+   defined as long as the corresponding type is *not* defined.  */\n+#ifdef _ANSI_H_\n+#ifndef _VA_LIST_\n+#define _VA_LIST\n+#endif\n+#undef _VA_LIST_\n+#endif /* _ANSI_H_ */\n+\n /* The macro _VA_LIST_ is the same thing used by this file in Ultrix.  */\n-/* However, 4.3bsd-net2 uses it in a completely different way.\n-   So if we are in 4.3bsd-net2, pay no attention to _VA_LIST_.  */\n-#if ! defined (_VA_LIST_) || defined (_ANSI_H_) || defined (__BSD_NET2__) || defined (____386BSD____)\n+#ifndef _VA_LIST_\n /* The macro _VA_LIST is used in SCO Unix 3.2.  */\n #ifndef _VA_LIST\n-#if !(defined (_ANSI_H_) || defined (__BSD_NET2__) || defined (____386BSD____))\n-   /* Don't mess with _VA_LIST_ at all, on 4.3bsd-net2.  */\n #define _VA_LIST_\n-#endif /* not net2 */\n #define _VA_LIST\n typedef __gnuc_va_list va_list;\n #endif /* not _VA_LIST */\n-#endif /* not _VA_LIST_ (or _ANSI_H_) */\n+#endif /* not _VA_LIST_ */\n+\n+/* On 4.3bsd-net2, leave _VA_LIST_ undef to indicate va_list is defined.  */\n+#ifdef _ANSI_H_\n+#undef _VA_LIST_\n+#endif\n \n #endif /* not __SVR4_2__ */\n "}]}