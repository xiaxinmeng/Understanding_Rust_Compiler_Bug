{"sha": "9449b700197b1d120d194cefe294f44460c0adab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTQ0OWI3MDAxOTdiMWQxMjBkMTk0Y2VmZTI5NGY0NDQ2MGMwYWRhYg==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2017-02-27T11:13:49Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2017-02-27T11:13:49Z"}, "message": "Don't try to use rand_s on CYGWIN\n\nCYGWIN seems to include _mingw.h and thus __MINGW64_VERSION_MAJOR is\ndefined even though rand_s is not available. Thus add an extra check\nfor __CYGWIN__.\n\n2017-02-27  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\t* intrinsics/random.c (getosrandom): Don't try to use rand_s on\n\tCYGWIN.\n\nFrom-SVN: r245755", "tree": {"sha": "a7433a4ff626cf6ecfe26b62ade74373c9bcc0d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7433a4ff626cf6ecfe26b62ade74373c9bcc0d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9449b700197b1d120d194cefe294f44460c0adab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9449b700197b1d120d194cefe294f44460c0adab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9449b700197b1d120d194cefe294f44460c0adab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9449b700197b1d120d194cefe294f44460c0adab/comments", "author": null, "committer": null, "parents": [{"sha": "57fa080bf6c0ae01bf1643a87e72ca636bde0454", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57fa080bf6c0ae01bf1643a87e72ca636bde0454", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57fa080bf6c0ae01bf1643a87e72ca636bde0454"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "0485e6f698bee1a4a2f872fdb7ac4c464f895b94", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9449b700197b1d120d194cefe294f44460c0adab/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9449b700197b1d120d194cefe294f44460c0adab/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=9449b700197b1d120d194cefe294f44460c0adab", "patch": "@@ -1,3 +1,8 @@\n+2017-02-27  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\t* intrinsics/random.c (getosrandom): Don't try to use rand_s on\n+\tCYGWIN.\n+\n 2017-02-16  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/79382"}, {"sha": "38036879362892e110266408b721e5c0833d5fca", "filename": "libgfortran/intrinsics/random.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9449b700197b1d120d194cefe294f44460c0adab/libgfortran%2Fintrinsics%2Frandom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9449b700197b1d120d194cefe294f44460c0adab/libgfortran%2Fintrinsics%2Frandom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Frandom.c?ref=9449b700197b1d120d194cefe294f44460c0adab", "patch": "@@ -304,7 +304,7 @@ static int\n getosrandom (void *buf, size_t buflen)\n {\n   /* rand_s is available in MinGW-w64 but not plain MinGW.  */\n-#ifdef __MINGW64_VERSION_MAJOR\n+#if defined(__MINGW64_VERSION_MAJOR) && !defined(__CYGWIN__)\n   unsigned int* b = buf;\n   for (unsigned i = 0; i < buflen / sizeof (unsigned int); i++)\n     rand_s (&b[i]);"}]}