{"sha": "8af266501795dd76d05faef498dbd3472a01b305", "node_id": "C_kwDOANBUbNoAKDhhZjI2NjUwMTc5NWRkNzZkMDVmYWVmNDk4ZGJkMzQ3MmEwMWIzMDU", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2022-05-27T11:12:45Z"}, "committer": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2022-05-27T12:37:54Z"}, "message": "Fortran: Fix OpenMP clause name in error message\n\ngcc/fortran/ChangeLog:\n\n\t* openmp.cc (gfc_check_omp_requires): Fix clause name in error.\n\ngcc/testsuite/ChangeLog:\n\n\t* gfortran.dg/gomp/requires-4.f90: Update dg-error.\n\t* gfortran.dg/gomp/requires-8.f90: Update dg-error.\n\nCo-authored-by: Chung-Lin Tang <cltang@codesourcery.com>", "tree": {"sha": "22b9d4b6c7c5ccfbaf3e7c8793567f2e18a1a614", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22b9d4b6c7c5ccfbaf3e7c8793567f2e18a1a614"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8af266501795dd76d05faef498dbd3472a01b305", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8af266501795dd76d05faef498dbd3472a01b305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8af266501795dd76d05faef498dbd3472a01b305", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8af266501795dd76d05faef498dbd3472a01b305/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "37c988bc1b22d1259a4d8e819fc33c65faa9debb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37c988bc1b22d1259a4d8e819fc33c65faa9debb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37c988bc1b22d1259a4d8e819fc33c65faa9debb"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "efa62b64f2beedd58d59bb0a0f363a3ff98b333c", "filename": "gcc/fortran/openmp.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8af266501795dd76d05faef498dbd3472a01b305/gcc%2Ffortran%2Fopenmp.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8af266501795dd76d05faef498dbd3472a01b305/gcc%2Ffortran%2Fopenmp.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.cc?ref=8af266501795dd76d05faef498dbd3472a01b305", "patch": "@@ -5272,7 +5272,7 @@ gfc_check_omp_requires (gfc_namespace *ns, int ref_omp_requires)\n       if ((ref_omp_requires & OMP_REQ_REVERSE_OFFLOAD)\n \t  && !(ns->omp_requires & OMP_REQ_REVERSE_OFFLOAD))\n \tgfc_error (\"Program unit at %L has OpenMP device constructs/routines \"\n-\t\t   \"but does not set !$OMP REQUIRES REVERSE_OFFSET but other \"\n+\t\t   \"but does not set !$OMP REQUIRES REVERSE_OFFLOAD but other \"\n \t\t   \"program units do\", &ns->proc_name->declared_at);\n       if ((ref_omp_requires & OMP_REQ_UNIFIED_ADDRESS)\n \t  && !(ns->omp_requires & OMP_REQ_UNIFIED_ADDRESS))"}, {"sha": "c870a2840d3ccc0ebb6dcc0b610097e00a47ee4b", "filename": "gcc/testsuite/gfortran.dg/gomp/requires-4.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8af266501795dd76d05faef498dbd3472a01b305/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Frequires-4.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8af266501795dd76d05faef498dbd3472a01b305/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Frequires-4.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Frequires-4.f90?ref=8af266501795dd76d05faef498dbd3472a01b305", "patch": "@@ -9,7 +9,7 @@ end module m\n subroutine foo\n   !$omp target\n   !$omp end target\n-! { dg-error \"OpenMP device constructs/routines but does not set !.OMP REQUIRES REVERSE_OFFSET but other program units do\" \"\" { target *-*-* } 9 }\n+! { dg-error \"OpenMP device constructs/routines but does not set !.OMP REQUIRES REVERSE_OFFLOAD but other program units do\" \"\" { target *-*-* } 9 }\n ! { dg-error \"OpenMP device constructs/routines but does not set !.OMP REQUIRES UNIFIED_ADDRESS but other program units do\" \"\" { target *-*-* } 9 }\n ! { dg-error \"OpenMP device constructs/routines but does not set !.OMP REQUIRES UNIFIED_SHARED_MEMORY but other program units do\" \"\" { target *-*-* } 9 }\n end"}, {"sha": "e84d609ad298cf79ce66e0284d66f61436bb7290", "filename": "gcc/testsuite/gfortran.dg/gomp/requires-8.f90", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8af266501795dd76d05faef498dbd3472a01b305/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Frequires-8.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8af266501795dd76d05faef498dbd3472a01b305/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Frequires-8.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgomp%2Frequires-8.f90?ref=8af266501795dd76d05faef498dbd3472a01b305", "patch": "@@ -13,7 +13,7 @@ subroutine bar2\n  end subroutine foo\n end module m\n \n-subroutine bar  ! { dg-error \"has OpenMP device constructs/routines but does not set !.OMP REQUIRES REVERSE_OFFSET but other program units do\" }\n+subroutine bar  ! { dg-error \"has OpenMP device constructs/routines but does not set !.OMP REQUIRES REVERSE_OFFLOAD but other program units do\" }\n   !use m\n   !$omp requires unified_shared_memory\n   !$omp declare target"}]}