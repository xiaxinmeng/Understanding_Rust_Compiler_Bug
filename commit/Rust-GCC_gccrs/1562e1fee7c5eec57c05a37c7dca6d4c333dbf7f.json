{"sha": "1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTU2MmUxZmVlN2M1ZWVjNTdjMDVhMzdjN2RjYTZkNGMzMzNkYmY3Zg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2006-04-26T08:23:12Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2006-04-26T08:23:12Z"}, "message": "re PR c/25996 ([gomp] ICE on undefined iteration variable)\n\n\tPR c/25996\n\t* c-parser.c (c_parser_omp_for_loop): Don't call c_finish_omp_for if\n\teither decl or init is error_mark_node.\n\n\t* gcc.dg/gomp/pr25996.c: New test.\n\t* g++.dg/gomp/pr25996.C: New test.\n\nFrom-SVN: r113269", "tree": {"sha": "aab43f6a1e168b21c80aab603cd23a16d448dce7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aab43f6a1e168b21c80aab603cd23a16d448dce7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "21a66e91d04c775dc4a022fb950c4163c593c090", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21a66e91d04c775dc4a022fb950c4163c593c090", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21a66e91d04c775dc4a022fb950c4163c593c090"}], "stats": {"total": 76, "additions": 75, "deletions": 1}, "files": [{"sha": "0a3504d15bfe24b2854c646eb48ed1cc587cf2e7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "patch": "@@ -1,5 +1,9 @@\n 2006-04-26  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR c/25996\n+\t* c-parser.c (c_parser_omp_for_loop): Don't call c_finish_omp_for if\n+\teither decl or init is error_mark_node.\n+\n \tPR middle-end/25989\n \t* tree-flow.h (struct omp_region): Add sched_kind.\n \t* omp-low.c (expand_parallel_call): Use region->inner->sched_kind"}, {"sha": "8cad3108243172a572ee12d9ba5363053f3e0f09", "filename": "gcc/c-parser.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parser.c?ref=1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "patch": "@@ -7379,7 +7379,7 @@ c_parser_omp_for_loop (c_parser *parser)\n \n   /* Only bother calling c_finish_omp_for if we havn't already generated\n      an error from the initialization parsing.  */\n-  if (decl != NULL)\n+  if (decl != NULL && decl != error_mark_node && init != error_mark_node)\n     return c_finish_omp_for (loc, decl, init, cond, incr, body, NULL);\n   return NULL;\n "}, {"sha": "c59270d4be8f4206403e53f9792513e6489ccdbd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "patch": "@@ -1,3 +1,9 @@\n+2006-04-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/25996\n+\t* gcc.dg/gomp/pr25996.c: New test.\n+\t* g++.dg/gomp/pr25996.C: New test.\n+\n 2006-04-25  Richard Sandiford  <richard@codesourcery.com>\n \n \tPR rtl-optimization/26725"}, {"sha": "6b50ff03032fb689e8fe762f9a84f3545c9a8e37", "filename": "gcc/testsuite/g++.dg/gomp/pr25996.C", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr25996.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr25996.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr25996.C?ref=1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "patch": "@@ -0,0 +1,32 @@\n+// PR c/25996\n+\n+void\n+test1 (void)\n+{\n+#pragma omp for\n+  for (i = 0; i < 1; ++i); // { dg-error \"not declared|expected iteration decl\" }\n+}\n+\n+void\n+test2 (void)\n+{\n+  int i;\n+#pragma omp for\n+  for (i = j; i < 1; ++i); // { dg-error \"not declared|expected iteration decl\" }\n+}\n+\n+void\n+test3 (void)\n+{\n+  int i;\n+#pragma omp for\n+  for (i = 0; i < j; ++i); // { dg-error \"not declared|invalid controlling predicate\" }\n+}\n+\n+void\n+test4 (void)\n+{\n+  int i;\n+#pragma omp for\n+  for (i = 0; i < 10; i += j); // { dg-error \"not declared|invalid increment expression\" }\n+}"}, {"sha": "d58c9a1c36da75e5f61dcb8c390ee7fbf89d3d40", "filename": "gcc/testsuite/gcc.dg/gomp/pr25996.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fpr25996.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fpr25996.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgomp%2Fpr25996.c?ref=1562e1fee7c5eec57c05a37c7dca6d4c333dbf7f", "patch": "@@ -0,0 +1,32 @@\n+/* PR c/25996 */\n+\n+void\n+test1 (void)\n+{\n+#pragma omp for\n+  for (i = 0; i < 1; ++i); /* { dg-error \"undeclared|for each function\" } */\n+}\n+\n+void\n+test2 (void)\n+{\n+  int i;\n+#pragma omp for\n+  for (i = j; i < 1; ++i); /* { dg-error \"undeclared\" } */\n+}\n+\n+void\n+test3 (void)\n+{\n+  int i;\n+#pragma omp for\n+  for (i = 0; i < j; ++i); /* { dg-error \"undeclared|invalid controlling predicate\" } */\n+}\n+\n+void\n+test4 (void)\n+{\n+  int i;\n+#pragma omp for\n+  for (i = 0; i < 10; i += j); /* { dg-error \"undeclared|invalid increment expression\" } */\n+}"}]}