{"sha": "08dca707dac5ecd13eb4c3db47907b39c940cba9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhkY2E3MDdkYWM1ZWNkMTNlYjRjM2RiNDc5MDdiMzljOTQwY2JhOQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2003-06-16T13:03:42Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2003-06-16T13:03:42Z"}, "message": "h8300.c (const_costs): Move this to ...\n\n\t* config/h8300/h8300.c (const_costs): Move this to ...\n\t(h8300_rtx_costs): ... here.\n\nFrom-SVN: r68014", "tree": {"sha": "ab39358bb34a42c0b238f5314ada7e40b82c8595", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab39358bb34a42c0b238f5314ada7e40b82c8595"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08dca707dac5ecd13eb4c3db47907b39c940cba9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08dca707dac5ecd13eb4c3db47907b39c940cba9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08dca707dac5ecd13eb4c3db47907b39c940cba9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08dca707dac5ecd13eb4c3db47907b39c940cba9/comments", "author": null, "committer": null, "parents": [{"sha": "82d397c79441ac025ab58fb8a5163f45dbcf4523", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/82d397c79441ac025ab58fb8a5163f45dbcf4523", "html_url": "https://github.com/Rust-GCC/gccrs/commit/82d397c79441ac025ab58fb8a5163f45dbcf4523"}], "stats": {"total": 97, "additions": 46, "deletions": 51}, "files": [{"sha": "bd5a99802cbbd788c36de8dfbdcc2516d963fdb2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08dca707dac5ecd13eb4c3db47907b39c940cba9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08dca707dac5ecd13eb4c3db47907b39c940cba9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08dca707dac5ecd13eb4c3db47907b39c940cba9", "patch": "@@ -1,3 +1,8 @@\n+2003-06-16  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* config/h8300/h8300.c (const_costs): Move this to ...\n+\t(h8300_rtx_costs): ... here.\n+\n 2003-06-16  Roger Sayle  <roger@eyesopen.com>\n \n \t* optabs.h (enum optab_index): Add new OTI_tan and OTI_atan."}, {"sha": "7c508f41cea6bbdd9c5244106654f6a1f14bcfdc", "filename": "gcc/config/h8300/h8300.c", "status": "modified", "additions": 41, "deletions": 51, "changes": 92, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08dca707dac5ecd13eb4c3db47907b39c940cba9/gcc%2Fconfig%2Fh8300%2Fh8300.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08dca707dac5ecd13eb4c3db47907b39c940cba9/gcc%2Fconfig%2Fh8300%2Fh8300.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fh8300%2Fh8300.c?ref=08dca707dac5ecd13eb4c3db47907b39c940cba9", "patch": "@@ -68,7 +68,6 @@ static void h8300_file_end PARAMS ((void));\n static void h8300_asm_named_section PARAMS ((const char *, unsigned int));\n #endif\n static void h8300_encode_section_info PARAMS ((tree, rtx, int));\n-static int const_costs PARAMS ((rtx, enum rtx_code, enum rtx_code));\n static int h8300_and_costs PARAMS ((rtx));\n static int h8300_shift_costs PARAMS ((rtx));\n static bool h8300_rtx_costs PARAMS ((rtx, int, int, int *));\n@@ -1090,55 +1089,6 @@ function_arg (cum, mode, type, named)\n   return result;\n }\n \f\n-/* Return the cost of the rtx R with code CODE.  */\n-\n-static int\n-const_costs (r, c, outer_code)\n-     rtx r;\n-     enum rtx_code c;\n-     enum rtx_code outer_code;\n-{\n-  switch (c)\n-    {\n-    case CONST_INT:\n-      {\n-\tHOST_WIDE_INT n = INTVAL (r);\n-\n-\tif (-4 <= n || n <= 4)\n-\t  {\n-\t    switch ((int) n)\n-\t      {\n-\t      case 0:\n-\t\treturn 0;\n-\t      case 1:\n-\t      case 2:\n-\t      case -1:\n-\t      case -2:\n-\t\treturn 0 + (outer_code == SET);\n-\t      case 4:\n-\t      case -4:\n-\t\tif (TARGET_H8300H || TARGET_H8300S)\n-\t\t  return 0 + (outer_code == SET);\n-\t\telse\n-\t\t  return 1;\n-\t      }\n-\t  }\n-\treturn 1;\n-      }\n-\n-    case CONST:\n-    case LABEL_REF:\n-    case SYMBOL_REF:\n-      return 3;\n-\n-    case CONST_DOUBLE:\n-      return 20;\n-\n-    default:\n-      return 4;\n-    }\n-}\n-\n static int\n h8300_and_costs (x)\n      rtx x;\n@@ -1185,6 +1135,46 @@ h8300_rtx_costs (x, code, outer_code, total)\n {\n   switch (code)\n     {\n+    case CONST_INT:\n+      {\n+\tHOST_WIDE_INT n = INTVAL (x);\n+\n+\tif (-4 <= n || n <= 4)\n+\t  {\n+\t    switch ((int) n)\n+\t      {\n+\t      case 0:\n+\t\t*total = 0;\n+\t\treturn true;\n+\t      case 1:\n+\t      case 2:\n+\t      case -1:\n+\t      case -2:\n+\t\t*total = 0 + (outer_code == SET);\n+\t\treturn true;\n+\t      case 4:\n+\t      case -4:\n+\t\tif (TARGET_H8300H || TARGET_H8300S)\n+\t\t  *total = 0 + (outer_code == SET);\n+\t\telse\n+\t\t  *total = 1;\n+\t\treturn true;\n+\t      }\n+\t  }\n+\t*total = 1;\n+\treturn true;\n+      }\n+\n+    case CONST:\n+    case LABEL_REF:\n+    case SYMBOL_REF:\n+      *total = 3;\n+      return true;\n+\n+    case CONST_DOUBLE:\n+      *total = 20;\n+      return true;\n+\n     case AND:\n       *total = COSTS_N_INSNS (h8300_and_costs (x));\n       return true;\n@@ -1215,7 +1205,7 @@ h8300_rtx_costs (x, code, outer_code, total)\n       return true;\n \n     default:\n-      *total = const_costs (x, code, outer_code);\n+      *total = 4;\n       return true;\n     }\n }"}]}