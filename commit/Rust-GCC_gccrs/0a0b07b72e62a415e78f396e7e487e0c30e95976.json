{"sha": "0a0b07b72e62a415e78f396e7e487e0c30e95976", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGEwYjA3YjcyZTYyYTQxNWU3OGYzOTZlN2U0ODdlMGMzMGU5NTk3Ng==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-05-11T16:27:31Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-05-11T16:27:31Z"}, "message": "lto.c (lto_fixup_decls): Remove global var decls freeing here.\n\n\n\t* lto.c (lto_fixup_decls): Remove global var decls freeing here.\n\t(materialize_cgraph): Add it here.\n\nFrom-SVN: r159281", "tree": {"sha": "24fea35c553471221593b873a2e951d0bc4f579a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/24fea35c553471221593b873a2e951d0bc4f579a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0a0b07b72e62a415e78f396e7e487e0c30e95976", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a0b07b72e62a415e78f396e7e487e0c30e95976", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0a0b07b72e62a415e78f396e7e487e0c30e95976", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0a0b07b72e62a415e78f396e7e487e0c30e95976/comments", "author": null, "committer": null, "parents": [{"sha": "9a8098970a84f2b1b7a1ef97dcd5fa7cd28d27fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a8098970a84f2b1b7a1ef97dcd5fa7cd28d27fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a8098970a84f2b1b7a1ef97dcd5fa7cd28d27fc"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "c8d8f006a18558b9d621515beb7c7c102365f92e", "filename": "gcc/lto/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a0b07b72e62a415e78f396e7e487e0c30e95976/gcc%2Flto%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a0b07b72e62a415e78f396e7e487e0c30e95976/gcc%2Flto%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2FChangeLog?ref=0a0b07b72e62a415e78f396e7e487e0c30e95976", "patch": "@@ -1,3 +1,8 @@\n+2010-05-11  Jan Hubicka  <jh@suse.cz>\n+\n+\t* lto.c (lto_fixup_decls): Remove global var decls freeing here.\n+\t(materialize_cgraph): Add it here.\n+\n 2010-05-11  Jan Hubicka  <jh@suse.cz>\n \n \t* lto.c (lto_fixup_decls): Free no longer needed lto_global_var_decls"}, {"sha": "a2a2b68c9daf62bced9412aba5c701a811908447", "filename": "gcc/lto/lto.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0a0b07b72e62a415e78f396e7e487e0c30e95976/gcc%2Flto%2Flto.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0a0b07b72e62a415e78f396e7e487e0c30e95976/gcc%2Flto%2Flto.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto%2Flto.c?ref=0a0b07b72e62a415e78f396e7e487e0c30e95976", "patch": "@@ -1454,8 +1454,6 @@ lto_fixup_decls (struct lto_file_decl_data **files)\n \tVEC_replace (tree, lto_global_var_decls, i, decl);\n     }\n \n-  VEC_free (tree, gc, lto_global_var_decls);\n-  lto_global_var_decls = NULL;\n   pointer_set_destroy (seen);\n }\n \n@@ -1710,6 +1708,9 @@ materialize_cgraph (void)\n   for (i = 0; VEC_iterate (tree, lto_global_var_decls, i, decl); i++)\n     rest_of_decl_compilation (decl, 1, 0);\n \n+  VEC_free (tree, gc, lto_global_var_decls);\n+  lto_global_var_decls = NULL;\n+\n   if (!quiet_flag)\n     fprintf (stderr, \"\\n\");\n "}]}