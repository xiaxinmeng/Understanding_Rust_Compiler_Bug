{"sha": "0ecb48d753005405f84876ed3032c4cda789e072", "node_id": "C_kwDOANBUbNoAKDBlY2I0OGQ3NTMwMDU0MDVmODQ4NzZlZDMwMzJjNGNkYTc4OWUwNzI", "commit": {"author": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2021-12-07T13:26:30Z"}, "committer": {"name": "Olivier Hainque", "email": "hainque@adacore.com", "date": "2021-12-13T17:59:54Z"}, "message": "Preserve cpu specific CRTSTUFF_T_CFLAGS on powerpc-vxworks7\n\nThe unconditional assignment performed in t-vxworks to handle\ninclude flags currently overrides what specific cpu ports had\nfor the regular (!vxworks) crtstuff objects.\n\nThis was not done on purpose and the proposed change adjusts the\nconfiguration bits to apply the vxworks specific flags on top of\nthe cpu ones instead.\n\n2021-12-07  Olivier Hainque  <hainque@adacore.com>\n\n\t* config.host (powerpc*-wrs-vxworks7*): Place t-crtstuff\n\tahead of the other files in tmake_files.\n\t* config/t-vxworks: Add to CRTSTUFF_T_CFLAGS instead of\n\toverriding it.", "tree": {"sha": "1bd9a6bf19ca967363e520a6f04df2e132f9959a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bd9a6bf19ca967363e520a6f04df2e132f9959a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ecb48d753005405f84876ed3032c4cda789e072", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ecb48d753005405f84876ed3032c4cda789e072", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ecb48d753005405f84876ed3032c4cda789e072", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ecb48d753005405f84876ed3032c4cda789e072/comments", "author": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hainque", "id": 18735142, "node_id": "MDQ6VXNlcjE4NzM1MTQy", "avatar_url": "https://avatars.githubusercontent.com/u/18735142?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hainque", "html_url": "https://github.com/hainque", "followers_url": "https://api.github.com/users/hainque/followers", "following_url": "https://api.github.com/users/hainque/following{/other_user}", "gists_url": "https://api.github.com/users/hainque/gists{/gist_id}", "starred_url": "https://api.github.com/users/hainque/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hainque/subscriptions", "organizations_url": "https://api.github.com/users/hainque/orgs", "repos_url": "https://api.github.com/users/hainque/repos", "events_url": "https://api.github.com/users/hainque/events{/privacy}", "received_events_url": "https://api.github.com/users/hainque/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "16c848090f237c2398930b8c0ef75acebf4fa44d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16c848090f237c2398930b8c0ef75acebf4fa44d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16c848090f237c2398930b8c0ef75acebf4fa44d"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "a94f4bf41dbca4d31f81401244d83e9476d07512", "filename": "libgcc/config.host", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ecb48d753005405f84876ed3032c4cda789e072/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ecb48d753005405f84876ed3032c4cda789e072/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=0ecb48d753005405f84876ed3032c4cda789e072", "patch": "@@ -1235,7 +1235,8 @@ powerpc*-*-linux*)\n \tmd_unwind_header=rs6000/linux-unwind.h\n \t;;\n powerpc*-wrs-vxworks7*)\n-        tmake_file=\"$tmake_file rs6000/t-vxworks rs6000/t-savresfgpr rs6000/t-crtstuff rs6000/t-linux t-dfprules rs6000/t-ppc64-fp t-slibgcc-libgcc\"\n+        tmake_file=\"$tmake_file rs6000/t-vxworks rs6000/t-savresfgpr rs6000/t-linux t-dfprules rs6000/t-ppc64-fp t-slibgcc-libgcc\"\n+        tmake_file=\"rs6000/t-crtstuff ${tmake_file}\"\n         case $ppc_fp_type in\n         64)\n                 ;;"}, {"sha": "18a0b1ee46967205ae7f08a53ede946563553b0e", "filename": "libgcc/config/t-vxworks", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ecb48d753005405f84876ed3032c4cda789e072/libgcc%2Fconfig%2Ft-vxworks", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ecb48d753005405f84876ed3032c4cda789e072/libgcc%2Fconfig%2Ft-vxworks", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Ft-vxworks?ref=0ecb48d753005405f84876ed3032c4cda789e072", "patch": "@@ -17,4 +17,6 @@ LIBGCC2_INCLUDES = -nostdinc -I. \\\n     -I$(VSB_DIR)/h -I$(VSB_DIR)/share/h -I=/system -I=/public, \\\n     -I=/ -I=/wrn/coreip)\n \n-CRTSTUFF_T_CFLAGS = $(LIBGCC2_INCLUDES)\n+# Use these also for the vxcrstuff objects (.e.g for version.h), on top of\n+# the options possibly already set specifically for the target:\n+CRTSTUFF_T_CFLAGS += $(LIBGCC2_INCLUDES)"}]}