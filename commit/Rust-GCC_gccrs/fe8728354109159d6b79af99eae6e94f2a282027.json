{"sha": "fe8728354109159d6b79af99eae6e94f2a282027", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU4NzI4MzU0MTA5MTU5ZDZiNzlhZjk5ZWFlNmU5NGYyYTI4MjAyNw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2004-12-13T20:12:33Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2004-12-13T20:12:33Z"}, "message": "tree-ssa-dom.c (thread_across_edge): Do not thread jumps if a PHI argument is set from a PHI_RESULT in the same...\n\n\n\t* tree-ssa-dom.c (thread_across_edge): Do not thread jumps if a\n\tPHI argument is set from a PHI_RESULT in the same block and the\n\tPHI argument is not the same as the PHI result.\n\nCo-Authored-By: Kazu Hirata <kazu@cs.umass.edu>\n\nFrom-SVN: r92102", "tree": {"sha": "f1f33fd9143d420f1272633b80a8e2b2bf0908f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f1f33fd9143d420f1272633b80a8e2b2bf0908f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe8728354109159d6b79af99eae6e94f2a282027", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe8728354109159d6b79af99eae6e94f2a282027", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe8728354109159d6b79af99eae6e94f2a282027", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe8728354109159d6b79af99eae6e94f2a282027/comments", "author": null, "committer": null, "parents": [{"sha": "143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/143b6bc3190ea8dfb60bdc611c207d0e15be1cdb"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "85e7719fc86d1a349e64dae9f66917cfccaa32fe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe8728354109159d6b79af99eae6e94f2a282027/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe8728354109159d6b79af99eae6e94f2a282027/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fe8728354109159d6b79af99eae6e94f2a282027", "patch": "@@ -1,3 +1,10 @@\n+2004-12-13  Jeff Law  <law@redhat.com>\n+            Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* tree-ssa-dom.c (thread_across_edge): Do not thread jumps if a\n+\tPHI argument is set from a PHI_RESULT in the same block and the\n+\tPHI argument is not the same as the PHI result.\n+\n 2004-12-13  David Edelsohn  <edelsohn@gnu.org>\n \n \t* xcoffout.c (xcoffout_declare_function): Always strip storage"}, {"sha": "81fdb0e8652eeaf51188f902659b56e684ef5424", "filename": "gcc/tree-ssa-dom.c", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe8728354109159d6b79af99eae6e94f2a282027/gcc%2Ftree-ssa-dom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe8728354109159d6b79af99eae6e94f2a282027/gcc%2Ftree-ssa-dom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dom.c?ref=fe8728354109159d6b79af99eae6e94f2a282027", "patch": "@@ -550,6 +550,16 @@ thread_across_edge (struct dom_walk_data *walk_data, edge e)\n     {\n       tree src = PHI_ARG_DEF_FROM_EDGE (phi, e);\n       tree dst = PHI_RESULT (phi);\n+\n+      /* If the desired argument is not the same as this PHI's result \n+\t and it is set by a PHI in this block, then we can not thread\n+\t through this block.  */\n+      if (src != dst\n+\t  && TREE_CODE (src) == SSA_NAME\n+\t  && TREE_CODE (SSA_NAME_DEF_STMT (src)) == PHI_NODE\n+\t  && bb_for_stmt (SSA_NAME_DEF_STMT (src)) == e->dest)\n+\treturn;\n+\n       record_const_or_copy (dst, src);\n       register_new_def (dst, &block_defs_stack);\n     }"}]}