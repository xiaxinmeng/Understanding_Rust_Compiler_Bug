{"sha": "f699e4541433ca9c8af8a4cad64d7a859b9fc782", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjY5OWU0NTQxNDMzY2E5YzhhZjhhNGNhZDY0ZDdhODU5YjlmYzc4Mg==", "commit": {"author": {"name": "Elliot Lee", "email": "sopwith@redhat.com", "date": "2004-08-16T11:49:22Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2004-08-16T11:49:22Z"}, "message": "re PR java/9677 (File not found if spaces in file name)\n\n2004-08-16  Elliot Lee <sopwith@redhat.com>\n\n        PR java/9677\n        * jcf-parse.c (java_parse_file): Handle filenames with embedded\n        spaces, and quoted filelists.\n\nFrom-SVN: r86051", "tree": {"sha": "40ca20d9d3e98bdb2b62f5475db240c6535ebef1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/40ca20d9d3e98bdb2b62f5475db240c6535ebef1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f699e4541433ca9c8af8a4cad64d7a859b9fc782", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f699e4541433ca9c8af8a4cad64d7a859b9fc782", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f699e4541433ca9c8af8a4cad64d7a859b9fc782", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f699e4541433ca9c8af8a4cad64d7a859b9fc782/comments", "author": null, "committer": null, "parents": [{"sha": "4c46b835dcf63e89868c9b1099693ea3b2906a62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c46b835dcf63e89868c9b1099693ea3b2906a62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c46b835dcf63e89868c9b1099693ea3b2906a62"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "4e0dc7e3de388ca5c5b4e57f8f547b20411345fd", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f699e4541433ca9c8af8a4cad64d7a859b9fc782/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f699e4541433ca9c8af8a4cad64d7a859b9fc782/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=f699e4541433ca9c8af8a4cad64d7a859b9fc782", "patch": "@@ -1,3 +1,9 @@\n+2004-08-16  Elliot Lee <sopwith@redhat.com>\n+\n+\tPR java/9677\n+\t* jcf-parse.c (java_parse_file): Handle filenames with embedded\n+\tspaces, and quoted filelists.\n+\n 2004-08-15  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* boehm.c (get_boehm_type_descriptor): Use build_int_cst."}, {"sha": "cb4853f412834b11b43cbd9071c920354160dd28", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f699e4541433ca9c8af8a4cad64d7a859b9fc782/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f699e4541433ca9c8af8a4cad64d7a859b9fc782/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=f699e4541433ca9c8af8a4cad64d7a859b9fc782", "patch": "@@ -897,7 +897,8 @@ java_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n   char *list, *next;\n   tree node;\n   FILE *finput = NULL;\n-\n+  int in_quotes = 0;\n+ \n   if (flag_filelist_file)\n     {\n       int avail = 2000;\n@@ -940,8 +941,9 @@ java_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n       for (next = list; ; )\n \t{\n \t  char ch = *next;\n-\t  if (ch == '\\n' || ch == '\\r' || ch == '\\t' || ch == ' '\n-\t      || ch == '&' /* FIXME */)\n+\t  if (flag_filelist_file && ! in_quotes\n+\t      && (ch == '\\n' || ch == '\\r' || ch == '\\t' || ch == ' '\n+\t\t  || ch == '&') /* FIXME */)\n \t    {\n \t      if (next == list)\n \t\t{\n@@ -955,6 +957,15 @@ java_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n \t\t  break;\n \t\t}\n \t    }\n+\t  if (flag_filelist_file && ch == '\"')\n+\t    {\n+\t      in_quotes = ! in_quotes;\n+\t      *next++ = '\\0';\n+\t      if (in_quotes) \n+\t\tlist = next;\n+\t      else \n+\t\tbreak;\n+\t    }\n \t  if (ch == '\\0')\n \t    {\n \t      next = NULL;"}]}