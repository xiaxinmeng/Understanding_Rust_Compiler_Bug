{"sha": "774b8a558c2fbfe0b472c814d582c8540102a17c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzc0YjhhNTU4YzJmYmZlMGI0NzJjODE0ZDU4MmM4NTQwMTAyYTE3Yw==", "commit": {"author": {"name": "Martin Jambor", "email": "mjambor@suse.cz", "date": "2012-11-08T16:41:06Z"}, "committer": {"name": "Martin Jambor", "email": "jamborm@gcc.gnu.org", "date": "2012-11-08T16:41:06Z"}, "message": "ipa-prop.c (determine_known_aggregate_parts): Skip writes to different declarations when tracking writes to a declaration.\n\n2012-11-08  Martin Jambor  <mjambor@suse.cz>\n\n\t* ipa-prop.c (determine_known_aggregate_parts): Skip writes to\n\tdifferent declarations when tracking writes to a declaration.\n\n\t* gfortran.dg/ipcp-array-1.f90: New test.\n\nFrom-SVN: r193330", "tree": {"sha": "7195db6d3d4f5d2e3d8fd6f1bd369c4a1cda222d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7195db6d3d4f5d2e3d8fd6f1bd369c4a1cda222d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/774b8a558c2fbfe0b472c814d582c8540102a17c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/774b8a558c2fbfe0b472c814d582c8540102a17c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/774b8a558c2fbfe0b472c814d582c8540102a17c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/774b8a558c2fbfe0b472c814d582c8540102a17c/comments", "author": {"login": "jamborm", "id": 2180070, "node_id": "MDQ6VXNlcjIxODAwNzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2180070?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jamborm", "html_url": "https://github.com/jamborm", "followers_url": "https://api.github.com/users/jamborm/followers", "following_url": "https://api.github.com/users/jamborm/following{/other_user}", "gists_url": "https://api.github.com/users/jamborm/gists{/gist_id}", "starred_url": "https://api.github.com/users/jamborm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jamborm/subscriptions", "organizations_url": "https://api.github.com/users/jamborm/orgs", "repos_url": "https://api.github.com/users/jamborm/repos", "events_url": "https://api.github.com/users/jamborm/events{/privacy}", "received_events_url": "https://api.github.com/users/jamborm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d476655d1d50448593b4099d0d6e7a4124ab6984", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d476655d1d50448593b4099d0d6e7a4124ab6984", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d476655d1d50448593b4099d0d6e7a4124ab6984"}], "stats": {"total": 35, "additions": 34, "deletions": 1}, "files": [{"sha": "2e98e1107c6d8b5dac524ca8506fdb3a6138f23f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=774b8a558c2fbfe0b472c814d582c8540102a17c", "patch": "@@ -1,3 +1,8 @@\n+2012-11-08  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* ipa-prop.c (determine_known_aggregate_parts): Skip writes to\n+\tdifferent declarations when tracking writes to a declaration.\n+\n 2012-11-07  David S. Miller  <davem@davemloft.net>\n \n \t* config/sparc/constraints.md (\"U\"): Document, in detail,"}, {"sha": "b78dc65dbc75406b21ff60cf74cd6c61dd4cbc6b", "filename": "gcc/ipa-prop.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2Fipa-prop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2Fipa-prop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-prop.c?ref=774b8a558c2fbfe0b472c814d582c8540102a17c", "patch": "@@ -1318,7 +1318,12 @@ determine_known_aggregate_parts (gimple call, tree arg,\n \t    break;\n \t}\n       else if (lhs_base != arg_base)\n-\tbreak;\n+\t{\n+\t  if (DECL_P (lhs_base))\n+\t    continue;\n+\t  else\n+\t    break;\n+\t}\n \n       if (lhs_offset + lhs_size < arg_offset\n \t  || lhs_offset >= (arg_offset + arg_size))"}, {"sha": "e545ea7e801521d6e17ef1aaaaf08b510da958a7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=774b8a558c2fbfe0b472c814d582c8540102a17c", "patch": "@@ -1,3 +1,7 @@\n+2012-11-08  Martin Jambor  <mjambor@suse.cz>\n+\n+\t* gfortran.dg/ipcp-array-1.f90: New test.\n+\n 2012-11-08  Florian Weimer  <fweimer@redhat.com>\n \n \t* g++.old-deja/g++.abi/cxa_vec.C: Fix typo in comment."}, {"sha": "e39109c976c0452eeb9775a58eb04456c3969be0", "filename": "gcc/testsuite/gfortran.dg/ipcp-array-1.f90", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2Ftestsuite%2Fgfortran.dg%2Fipcp-array-1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/774b8a558c2fbfe0b472c814d582c8540102a17c/gcc%2Ftestsuite%2Fgfortran.dg%2Fipcp-array-1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fipcp-array-1.f90?ref=774b8a558c2fbfe0b472c814d582c8540102a17c", "patch": "@@ -0,0 +1,19 @@\n+! { dg-do compile }\n+! { dg-options \"-O2 -fdump-ipa-cp-details -fno-inline -fdump-tree-optimized\" }\n+\n+subroutine bar (a, b, n)\n+  integer :: a(n), b(n)\n+  call foo (a, b)\n+contains\n+subroutine foo (a, b)\n+  integer :: a(:), b(:)\n+  a = b\n+end subroutine\n+end\n+\n+! { dg-final { scan-ipa-dump \"Creating a specialized node of foo\" \"cp\" } }\n+! { dg-final { scan-ipa-dump-times \"Aggregate replacements\\[^=\\]*=\\[^=\\]*=\\[^=\\]*=\\[^=\\]*=\\[^=\\]*=\\[^=\\]*=\\[^=\\]*=\\[^=\\]*=\" 2 \"cp\" } }\n+! { dg-final { cleanup-ipa-dump \"cp\" } }\n+! { dg-final { scan-tree-dump-not \"stride;\" \"optimized\" } }\n+! { dg-final { scan-tree-dump-not \"lbound;\" \"optimized\" } }\n+! { dg-final { cleanup-tree-dump \"optimized\" } }"}]}