{"sha": "f263917cbf18bbd28cf79cc6280c5a02e4667337", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI2MzkxN2NiZjE4YmJkMjhjZjc5Y2M2MjgwYzVhMDJlNDY2NzMzNw==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2009-08-15T07:10:20Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2009-08-15T07:10:20Z"}, "message": "Correct the use of ppl_Pointset_Powerset_C_Polyhedron_maximize.\n\n2009-08-15  Sebastian Pop  <sebastian.pop@amd.com>\n\n\tPR middle-end/40981\n\t* graphite-interchange.c (ppl_max_for_le): Moved...\n\t* graphite-poly.c (pbb_number_of_iterations): Call ppl_max_for_le.\n\t* graphite-ppl.c (ppl_max_for_le): ... here.  Correct the use of\n\tppl_Pointset_Powerset_C_Polyhedron_maximize.\n\t* graphite-ppl.h (ppl_max_for_le): Declared.\n\nFrom-SVN: r150789", "tree": {"sha": "3e08ed92479684ba002d8c7a8eaed82caf2a98c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e08ed92479684ba002d8c7a8eaed82caf2a98c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f263917cbf18bbd28cf79cc6280c5a02e4667337", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f263917cbf18bbd28cf79cc6280c5a02e4667337", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f263917cbf18bbd28cf79cc6280c5a02e4667337", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f263917cbf18bbd28cf79cc6280c5a02e4667337/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "ae66da3ba5136550245f96339e8d48d565903cd2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae66da3ba5136550245f96339e8d48d565903cd2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae66da3ba5136550245f96339e8d48d565903cd2"}], "stats": {"total": 123, "additions": 71, "deletions": 52}, "files": [{"sha": "fc097c3a2f33b91f64d921ee146db32a6d055ccb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f263917cbf18bbd28cf79cc6280c5a02e4667337", "patch": "@@ -1,3 +1,12 @@\n+2009-08-15  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\tPR middle-end/40981\n+\t* graphite-interchange.c (ppl_max_for_le): Moved...\n+\t* graphite-poly.c (pbb_number_of_iterations): Call ppl_max_for_le.\n+\t* graphite-ppl.c (ppl_max_for_le): ... here.  Correct the use of\n+\tppl_Pointset_Powerset_C_Polyhedron_maximize.\n+\t* graphite-ppl.h (ppl_max_for_le): Declared.\n+\n 2009-08-14  Olatunji Ruwase <tjruwase@google.com>\n \n \t* doc/extend.texi (Symbol-Renaming Pragmas): redefine_extname is"}, {"sha": "ec52e267e04d439f45210ea18a1196851fd35f19", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=f263917cbf18bbd28cf79cc6280c5a02e4667337", "patch": "@@ -1,3 +1,28 @@\n+2009-08-15  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\tPR middle-end/40981\n+\t* graphite-ppl.c (ppl_max_for_le): Correct the use of\n+\tppl_Pointset_Powerset_C_Polyhedron_maximize.\n+\n+2009-08-13  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-poly.c (print_pbb): Print PBB index.\n+\n+2009-08-13  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* Merge from mainline (r150672:150764).\n+\n+2009-08-13  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* graphite-interchange.c (ppl_max_for_le): Moved...\n+\t* graphite-poly.c (pbb_number_of_iterations): Call ppl_max_for_le.\n+\t* graphite-ppl.c (ppl_max_for_le): ... here.\n+\t* graphite-ppl.h (ppl_max_for_le): Declared.\n+\n+2009-08-12  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* Merge from mainline (r150372:150672).\n+\n 2009-08-11  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tPR middle-end/40980"}, {"sha": "314f17ca0c45e149a43c43dc8a76caec36960702", "filename": "gcc/graphite-interchange.c", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-interchange.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-interchange.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-interchange.c?ref=f263917cbf18bbd28cf79cc6280c5a02e4667337", "patch": "@@ -53,35 +53,6 @@ along with GCC; see the file COPYING3.  If not see\n #include \"graphite.h\"\n #include \"graphite-poly.h\"\n \n-/* Return in RES the maximum of the linear expression LE on polyhedron PS.  */\n-\n-static void\n-ppl_max_for_le (ppl_Pointset_Powerset_C_Polyhedron_t ps,\n-\t\tppl_Linear_Expression_t le, Value res)\n-{\n-  ppl_Coefficient_t num, denom;\n-  Value dv, nv;\n-  int maximum;\n-\n-  value_init (nv);\n-  value_init (dv);\n-  ppl_new_Coefficient (&num);\n-  ppl_new_Coefficient (&denom);\n-  ppl_Pointset_Powerset_C_Polyhedron_maximize (ps, le, num, denom, &maximum);\n-\n-  if (maximum)\n-    {\n-      ppl_Coefficient_to_mpz_t (num, nv);\n-      ppl_Coefficient_to_mpz_t (denom, dv);\n-      value_division (res, nv, dv);\n-    }\n-\n-  value_clear (nv);\n-  value_clear (dv);\n-  ppl_delete_Coefficient (num);\n-  ppl_delete_Coefficient (denom);\n-}\n-\n /* Builds a linear expression, of dimension DIM, representing PDR's\n    memory access:\n "}, {"sha": "f9b93e4ee4c4a51284f7454f45c39ad51277a1eb", "filename": "gcc/graphite-poly.c", "status": "modified", "additions": 3, "deletions": 23, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-poly.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-poly.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-poly.c?ref=f263917cbf18bbd28cf79cc6280c5a02e4667337", "patch": "@@ -711,35 +711,15 @@ pbb_number_of_iterations (poly_bb_p pbb,\n \t\t\t  graphite_dim_t loop_depth,\n \t\t\t  Value niter)\n {\n-  ppl_dimension_type loop_iter = pbb_iterator_dim (pbb, loop_depth);\n   ppl_Linear_Expression_t le;\n-  ppl_Coefficient_t num, denom;\n-  Value dv;\n-  int maximum;\n   ppl_dimension_type dim;\n \n-  value_init (dv);\n-  ppl_new_Coefficient (&num);\n-  ppl_new_Coefficient (&denom);\n   ppl_Pointset_Powerset_C_Polyhedron_space_dimension (PBB_DOMAIN (pbb), &dim);\n   ppl_new_Linear_Expression_with_dimension (&le, dim);\n-  ppl_set_coef (le, loop_iter, 1);\n-  ppl_Pointset_Powerset_C_Polyhedron_maximize (PBB_DOMAIN (pbb), le,\n-\t\t\t\t\t       num, denom, &maximum);\n-\n-  if (maximum == 1)\n-    {\n-      ppl_Coefficient_to_mpz_t (num, niter);\n-      ppl_Coefficient_to_mpz_t (denom, dv);\n-      value_division (niter, niter, dv);\n-    }\n-  else\n-    value_set_si (niter, -1);\n-\n-  value_clear (dv);\n+  ppl_set_coef (le, pbb_iterator_dim (pbb, loop_depth), 1);\n+  value_set_si (niter, -1);\n+  ppl_max_for_le (PBB_DOMAIN (pbb), le, niter);\n   ppl_delete_Linear_Expression (le);\n-  ppl_delete_Coefficient (num);\n-  ppl_delete_Coefficient (denom);\n }\n \n #endif"}, {"sha": "ca65c8534b8c5b28467e43977a0d6cbbba08f9ae", "filename": "gcc/graphite-ppl.c", "status": "modified", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-ppl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-ppl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-ppl.c?ref=f263917cbf18bbd28cf79cc6280c5a02e4667337", "patch": "@@ -613,4 +613,35 @@ ppl_read_polyhedron_matrix (ppl_Polyhedron_t *ph, FILE *file)\n   new_C_Polyhedron_from_Cloog_Matrix (ph, mat);\n   cloog_matrix_free (mat);\n }\n+\n+/* Return in RES the maximum of the linear expression LE on polyhedron PS.  */\n+\n+void\n+ppl_max_for_le (ppl_Pointset_Powerset_C_Polyhedron_t ps,\n+\t\tppl_Linear_Expression_t le, Value res)\n+{\n+  ppl_Coefficient_t num, denom;\n+  Value dv, nv;\n+  int maximum, err;\n+\n+  value_init (nv);\n+  value_init (dv);\n+  ppl_new_Coefficient (&num);\n+  ppl_new_Coefficient (&denom);\n+  err = ppl_Pointset_Powerset_C_Polyhedron_maximize (ps, le, num, denom, &maximum);\n+\n+  if (err > 0)\n+    {\n+      ppl_Coefficient_to_mpz_t (num, nv);\n+      ppl_Coefficient_to_mpz_t (denom, dv);\n+      gcc_assert (value_notzero_p (dv));\n+      value_division (res, nv, dv);\n+    }\n+\n+  value_clear (nv);\n+  value_clear (dv);\n+  ppl_delete_Coefficient (num);\n+  ppl_delete_Coefficient (denom);\n+}\n+\n #endif"}, {"sha": "0ed6b34126d0027f0e56de052577fc960689db44", "filename": "gcc/graphite-ppl.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-ppl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f263917cbf18bbd28cf79cc6280c5a02e4667337/gcc%2Fgraphite-ppl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgraphite-ppl.h?ref=f263917cbf18bbd28cf79cc6280c5a02e4667337", "patch": "@@ -44,6 +44,9 @@ void ppl_insert_dimensions_pointset (ppl_Pointset_Powerset_C_Polyhedron_t, int,\n \t\t\t\t     int);\n void ppl_set_inhomogeneous_gmp (ppl_Linear_Expression_t, Value);\n void ppl_set_coef_gmp (ppl_Linear_Expression_t, ppl_dimension_type, Value);\n+void ppl_max_for_le (ppl_Pointset_Powerset_C_Polyhedron_t,\n+\t\t     ppl_Linear_Expression_t, Value);\n+\n \n /* Assigns to RES the value of the INTEGER_CST T.  */\n "}]}