{"sha": "de2fc4db61d89e3ee9d6d764197c091761b71653", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGUyZmM0ZGI2MWQ4OWUzZWU5ZDZkNzY0MTk3YzA5MTc2MWI3MTY1Mw==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2004-11-27T05:19:33Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2004-11-27T05:19:33Z"}, "message": "target-libpath.exp (restore_ld_library_path_env_vars): Check existence of ld library path variables before unsetting.\n\n\t* lib/target-libpath.exp (restore_ld_library_path_env_vars):\n\tCheck existence of ld library path variables before unsetting.\n\nFrom-SVN: r91367", "tree": {"sha": "d0961d6ecaf5492d251309a9aa987b8f077030bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d0961d6ecaf5492d251309a9aa987b8f077030bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/de2fc4db61d89e3ee9d6d764197c091761b71653", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de2fc4db61d89e3ee9d6d764197c091761b71653", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de2fc4db61d89e3ee9d6d764197c091761b71653", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de2fc4db61d89e3ee9d6d764197c091761b71653/comments", "author": null, "committer": null, "parents": [{"sha": "ed986c8e6e46598aa15acb161ce9882653333dde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed986c8e6e46598aa15acb161ce9882653333dde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed986c8e6e46598aa15acb161ce9882653333dde"}], "stats": {"total": 21, "additions": 13, "deletions": 8}, "files": [{"sha": "912c9b36e778c8bb2abf46f072032b2906f49946", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de2fc4db61d89e3ee9d6d764197c091761b71653/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de2fc4db61d89e3ee9d6d764197c091761b71653/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=de2fc4db61d89e3ee9d6d764197c091761b71653", "patch": "@@ -1,3 +1,8 @@\n+2004-11-27  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\t* lib/target-libpath.exp (restore_ld_library_path_env_vars):\n+\tCheck existence of ld library path variables before unsetting.\n+\n 2004-11-26  Mark Mitchell  <mark@codesourcery.com>\n \n \t* g++.old-deja/g++.eh/badalloc1.C: Robustify."}, {"sha": "8635e7e3453af421386d6714a0b0348835ad5bfa", "filename": "gcc/testsuite/lib/target-libpath.exp", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de2fc4db61d89e3ee9d6d764197c091761b71653/gcc%2Ftestsuite%2Flib%2Ftarget-libpath.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de2fc4db61d89e3ee9d6d764197c091761b71653/gcc%2Ftestsuite%2Flib%2Ftarget-libpath.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-libpath.exp?ref=de2fc4db61d89e3ee9d6d764197c091761b71653", "patch": "@@ -196,42 +196,42 @@ proc restore_ld_library_path_env_vars { } {\n \n   if { $orig_ld_library_path_saved } {\n     setenv LD_LIBRARY_PATH \"$orig_ld_library_path\"\n-  } else {\n+  } elseif [info exists env(LD_LIBRARY_PATH)] {\n     unsetenv LD_LIBRARY_PATH\n   }\n   if { $orig_ld_run_path_saved } {\n     setenv LD_RUN_PATH \"$orig_ld_run_path\"\n-  } else {\n+  } elseif [info exists env(LD_RUN_PATH)] {\n     unsetenv LD_RUN_PATH\n   }\n   if { $orig_shlib_path_saved } {\n     setenv SHLIB_PATH \"$orig_shlib_path\"\n-  } else {\n+  } elseif [info exists env(SHLIB_PATH)] {\n     unsetenv SHLIB_PATH\n   }\n   if { $orig_ld_libraryn32_path_saved } {\n     setenv LD_LIBRARYN32_PATH \"$orig_ld_libraryn32_path\"\n-  } else {\n+  } elseif [info exists env(LD_LIBRARYN32_PATH)] {\n     unsetenv LD_LIBRARYN32_PATH\n   }\n   if { $orig_ld_library64_path_saved } {\n     setenv LD_LIBRARY64_PATH \"$orig_ld_library64_path\"\n-  } else {\n+  } elseif [info exists env(LD_LIBRARY64_PATH)] {\n     unsetenv LD_LIBRARY64_PATH\n   }\n   if { $orig_ld_library_path_32_saved } {\n     setenv LD_LIBRARY_PATH_32 \"$orig_ld_library_path_32\"\n-  } else {\n+  } elseif [info exists env(LD_LIBRARY_PATH_32)] {\n     unsetenv LD_LIBRARY_PATH_32\n   }\n   if { $orig_ld_library_path_64_saved } {\n     setenv LD_LIBRARY_PATH_64 \"$orig_ld_library_path_64\"\n-  } else {\n+  } elseif [info exists env(LD_LIBRARY_PATH_64)] {\n     unsetenv LD_LIBRARY_PATH_64\n   }\n   if { $orig_dyld_library_path_saved } {\n     setenv DYLD_LIBRARY_PATH \"$orig_dyld_library_path\"\n-  } else {\n+  } elseif [info exists env(DYLD_LIBRARY_PATH)] {\n     unsetenv DYLD_LIBRARY_PATH\n   }\n }"}]}