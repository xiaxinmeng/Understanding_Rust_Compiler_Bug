{"sha": "9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWVlZTVlNzI2ZGUxZTVkMTFiYzc3ZTBmMmFlMDVjOWMwYzA5MTZiNg==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.co.uk", "date": "2003-06-26T06:05:36Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2003-06-26T06:05:36Z"}, "message": "c-opts.c (missing_arg): Make non-static.\n\n\t* c-opts.c (missing_arg): Make non-static.\n\t(c_common_handle_option): Don't check for missing arguments.\n\t* opts.c (handle_option): Check for missing arguments.\nada:\n\t* misc.c (gnat_handle_option): Don't check for missing arguments.\nf:\n\t* top.c (ffe_handle_option): Don't check for missing arguments.\njava:\n\t* lang.c (java_handle_option): Don't check for missing arguments.\ntestsuite:\n\t* const-str-2.m: Update.\n\nFrom-SVN: r68517", "tree": {"sha": "a9ea757e9e1db36f41e321d59fa201fe81c41dee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9ea757e9e1db36f41e321d59fa201fe81c41dee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/comments", "author": {"login": "neilb-xx", "id": 160762, "node_id": "MDQ6VXNlcjE2MDc2Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/160762?v=4", "gravatar_id": "", "url": "https://api.github.com/users/neilb-xx", "html_url": "https://github.com/neilb-xx", "followers_url": "https://api.github.com/users/neilb-xx/followers", "following_url": "https://api.github.com/users/neilb-xx/following{/other_user}", "gists_url": "https://api.github.com/users/neilb-xx/gists{/gist_id}", "starred_url": "https://api.github.com/users/neilb-xx/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/neilb-xx/subscriptions", "organizations_url": "https://api.github.com/users/neilb-xx/orgs", "repos_url": "https://api.github.com/users/neilb-xx/repos", "events_url": "https://api.github.com/users/neilb-xx/events{/privacy}", "received_events_url": "https://api.github.com/users/neilb-xx/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "09ec461d3b3e2da96d39bbff6a9de0152a2798a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09ec461d3b3e2da96d39bbff6a9de0152a2798a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09ec461d3b3e2da96d39bbff6a9de0152a2798a0"}], "stats": {"total": 61, "additions": 31, "deletions": 30}, "files": [{"sha": "a27835d9ff6acbff4916f436eeffd5974b312afa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -1,3 +1,9 @@\n+2003-06-26  Neil Booth  <neil@daikokuya.co.uk>\n+\n+\t* c-opts.c (missing_arg): Make non-static.\n+\t(c_common_handle_option): Don't check for missing arguments.\n+\t* opts.c (handle_option): Check for missing arguments.\n+\n 2003-06-26  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/power4.md (power4-veccomplex): Correct latency."}, {"sha": "53ca9568be0b9d34ee5dad2c510a09057f6cbcde", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -1,3 +1,7 @@\n+2003-06-26  Neil Booth  <neil@daikokuya.co.uk>\n+\n+\t* misc.c (gnat_handle_option): Don't check for missing arguments.\n+\n 2003-06-20  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* utils.c (end_subprog_body): Adjust expand_function_end call."}, {"sha": "4884fe9c2685c9b8f792543e30d32f2b2e82eca8", "filename": "gcc/ada/misc.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fada%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fada%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmisc.c?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -220,7 +220,6 @@ gnat_parse_file (set_yydebug)\n static int\n gnat_handle_option (size_t scode, const char *arg, int value ATTRIBUTE_UNUSED)\n {\n-  const struct cl_option *option = &cl_options[scode];\n   enum opt_code code = (enum opt_code) scode;\n   char *q;\n   int i;\n@@ -229,12 +228,6 @@ gnat_handle_option (size_t scode, const char *arg, int value ATTRIBUTE_UNUSED)\n   if (code == N_OPTS)\n       return 1;\n \n-  if (arg == NULL && (option->flags & (CL_JOINED | CL_SEPARATE)))\n-    {\n-      error (\"missing argument to \\\"-%s\\\"\", option->opt_text);\n-      return 1;\n-    }\n-\n   switch (code)\n     {\n     default:"}, {"sha": "dbe7e903f0a9401bda8e6224e80504bfc1a86fd9", "filename": "gcc/c-opts.c", "status": "modified", "additions": 2, "deletions": 8, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -100,7 +100,7 @@ static size_t deferred_count, deferred_size;\n /* Number of deferred options scanned for -include.  */\n static size_t include_cursor;\n \n-static void missing_arg (enum opt_code);\n+void missing_arg (enum opt_code);\n static void set_Wimplicit (int);\n static void print_help (void);\n static void handle_OPT_d (const char *);\n@@ -130,7 +130,7 @@ static struct deferred_opt\n \n /* Complain that switch OPT_INDEX expects an argument but none was\n    provided.  */\n-static void\n+void\n missing_arg (enum opt_code code)\n {\n   const char *opt_text = cl_options[code].opt_text;\n@@ -257,12 +257,6 @@ c_common_handle_option (size_t scode, const char *arg, int value)\n       return 1;\n     }\n \n-  if (arg == NULL && (option->flags & (CL_JOINED | CL_SEPARATE)))\n-    {\n-      missing_arg (code);\n-      return 1;\n-    }\n-\n   switch (code)\n     {\n     default:"}, {"sha": "e1ac7ac5b914b1d56e42e573ef8c8f9b9509dbca", "filename": "gcc/f/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ff%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ff%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2FChangeLog?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -1,3 +1,7 @@\n+Thu Jun 26 07:06:29 2003  Neil Booth  <neil@daikokuya.co.uk>\n+\n+\t* top.c (ffe_handle_option): Don't check for missing arguments.\n+\n Wed Jun 25 06:52:12 2003  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* top.c (ffe_handle_option): Add missing break;."}, {"sha": "359dd2b8d32d7fabfdc431a98b93309930f38124", "filename": "gcc/f/top.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ff%2Ftop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ff%2Ftop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ff%2Ftop.c?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -175,19 +175,12 @@ ffe_init_options ()\n int\n ffe_handle_option (size_t scode, const char *arg, int value)\n {\n-  const struct cl_option *option = &cl_options[scode];\n   enum opt_code code = (enum opt_code) scode;\n \n   /* Ignore file names.  */\n   if (code == N_OPTS)\n     return 1;\n \n-  if (arg == NULL && (option->flags & (CL_JOINED | CL_SEPARATE)))\n-    {\n-      error (\"missing argument to \\\"-%s\\\"\", option->opt_text);\n-      return 1;\n-    }\n-\n   switch (code)\n     {\n     default:"}, {"sha": "591b230a136fda76e2cfea8acbd0e150ae1e06c7", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -1,3 +1,7 @@\n+2003-06-26  Neil Booth  <neil@daikokuya.co.uk>\n+\n+\t* lang.c (java_handle_option): Don't check for missing arguments.\n+\n 2003-06-20  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* class.c (push_class): Use a location_t to save place."}, {"sha": "b8fc498da3c200592d1e77f4ee9f642de112d1dc", "filename": "gcc/java/lang.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fjava%2Flang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fjava%2Flang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Flang.c?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -265,19 +265,12 @@ const struct lang_hooks lang_hooks = LANG_HOOKS_INITIALIZER;\n static int\n java_handle_option (size_t scode, const char *arg, int value)\n {\n-  const struct cl_option *option = &cl_options[scode];\n   enum opt_code code = (enum opt_code) scode;\n \n   /* Ignore file names.  */\n   if (code == N_OPTS)\n       return 1;\n \n-  if (arg == NULL && (option->flags & (CL_JOINED | CL_SEPARATE)))\n-    {\n-      error (\"missing argument to \\\"-%s\\\"\", option->opt_text);\n-      return 1;\n-    }\n-\n   switch (code)\n     {\n     default:"}, {"sha": "a5e8297d1e4e902e2a4858e92313bc482c05a406", "filename": "gcc/opts.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -368,6 +368,12 @@ handle_option (char **argv, unsigned int lang_mask)\n \t  goto done;\n \t}\n \n+      if (arg == NULL && (option->flags & (CL_JOINED | CL_SEPARATE)))\n+\t{\n+\t  error (\"missing argument to \\\"-%s\\\"\", argv[0]);\n+\t  goto done;\n+\t}\n+\n       /* If the switch takes an integer, convert it.  */\n       if (arg && (option->flags & CL_UINTEGER))\n \t{"}, {"sha": "e5f954145af693a9de9a6715cb2907b7870efc18", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -1,3 +1,7 @@\n+2003-06-26  Neil Booth  <neil@daikokuya.co.uk>\n+\n+\t* const-str-2.m: Update.\n+\n 2003-06-25  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/10990"}, {"sha": "c406665c57617aec1e68376c575876ffba2e9a5c", "filename": "gcc/testsuite/objc.dg/const-str-2.m", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fconst-str-2.m?ref=9eee5e726de1e5d11bc77e0f2ae05c9c0c0916b6", "patch": "@@ -2,6 +2,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-fconstant-string-class=\" } */\n \n-{ dg-error \"no class name specified\" \"\" { target *-*-* } 0 }\n+{ dg-error \"no class name specified|missing argument\" \"\" { target *-*-* } 0 }\n \n void foo () {}"}]}