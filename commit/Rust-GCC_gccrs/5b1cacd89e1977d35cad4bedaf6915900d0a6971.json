{"sha": "5b1cacd89e1977d35cad4bedaf6915900d0a6971", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIxY2FjZDg5ZTE5NzdkMzVjYWQ0YmVkYWY2OTE1OTAwZDBhNjk3MQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2002-02-04T16:03:14Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2002-02-04T16:03:14Z"}, "message": "cfgrtl.c (try_redirect_by_replacing_jump): Remove associated CODE_LABEL and jump table when...\n\n        * cfgrtl.c (try_redirect_by_replacing_jump): Remove associated\n        CODE_LABEL and jump table when replacing a table jump with a\n        simple jump.\n\nFrom-SVN: r49478", "tree": {"sha": "e8df6f9cdd391074172099255b71b5000ca7ade6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8df6f9cdd391074172099255b71b5000ca7ade6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b1cacd89e1977d35cad4bedaf6915900d0a6971", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1cacd89e1977d35cad4bedaf6915900d0a6971", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b1cacd89e1977d35cad4bedaf6915900d0a6971", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b1cacd89e1977d35cad4bedaf6915900d0a6971/comments", "author": null, "committer": null, "parents": [{"sha": "5987ca1c3806cf5e6d829ba2a92961499aea2da0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5987ca1c3806cf5e6d829ba2a92961499aea2da0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5987ca1c3806cf5e6d829ba2a92961499aea2da0"}], "stats": {"total": 21, "additions": 20, "deletions": 1}, "files": [{"sha": "63c0ce5302636a96674c12ba495e49bbb269c641", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cacd89e1977d35cad4bedaf6915900d0a6971/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cacd89e1977d35cad4bedaf6915900d0a6971/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5b1cacd89e1977d35cad4bedaf6915900d0a6971", "patch": "@@ -1,3 +1,9 @@\n+Mon Feb  4 09:05:58 2002  Jeffrey A Law  (law@redhat.com)\n+\n+\t* cfgrtl.c (try_redirect_by_replacing_jump): Remove associated\n+\tCODE_LABEL and jump table when replacing a table jump with a\n+\tsimple jump.\n+\n 2002-02-04  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390-protos.h (legitimize_la_operand,"}, {"sha": "9e8269b8479859d3572263e560bd3645a3548027", "filename": "gcc/cfgrtl.c", "status": "modified", "additions": 14, "deletions": 1, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b1cacd89e1977d35cad4bedaf6915900d0a6971/gcc%2Fcfgrtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b1cacd89e1977d35cad4bedaf6915900d0a6971/gcc%2Fcfgrtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.c?ref=5b1cacd89e1977d35cad4bedaf6915900d0a6971", "patch": "@@ -714,7 +714,7 @@ try_redirect_by_replacing_jump (e, target)\n   else\n     {\n       rtx target_label = block_label (target);\n-      rtx barrier;\n+      rtx barrier, tmp;\n \n       emit_jump_insn_after (gen_jump (target_label), insn);\n       JUMP_LABEL (src->end) = target_label;\n@@ -723,8 +723,21 @@ try_redirect_by_replacing_jump (e, target)\n \tfprintf (rtl_dump_file, \"Replacing insn %i by jump %i\\n\",\n \t\t INSN_UID (insn), INSN_UID (src->end));\n \n+\n       delete_insn_chain (kill_from, insn);\n \n+      /* Recognize a tablejump that we are converting to a\n+\t simple jump and remove its associated CODE_LABEL\n+\t and ADDR_VEC or ADDR_DIFF_VEC.  */\n+      if ((tmp = JUMP_LABEL (insn)) != NULL_RTX\n+\t  && (tmp = NEXT_INSN (tmp)) != NULL_RTX\n+\t  && GET_CODE (tmp) == JUMP_INSN\n+\t  && (GET_CODE (PATTERN (tmp)) == ADDR_VEC\n+\t      || GET_CODE (PATTERN (tmp)) == ADDR_DIFF_VEC))\n+\t{\n+\t  delete_insn_chain (JUMP_LABEL (insn), tmp);\n+\t}\n+\n       barrier = next_nonnote_insn (src->end);\n       if (!barrier || GET_CODE (barrier) != BARRIER)\n \temit_barrier_after (src->end);"}]}