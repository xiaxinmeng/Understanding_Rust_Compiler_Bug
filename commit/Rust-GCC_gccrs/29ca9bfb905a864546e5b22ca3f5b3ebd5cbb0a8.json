{"sha": "29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjljYTliZmI5MDVhODY0NTQ2ZTViMjJjYTNmNWIzZWJkNWNiYjBhOA==", "commit": {"author": {"name": "Dehao Chen", "email": "dehao@google.com", "date": "2014-12-18T00:19:24Z"}, "committer": {"name": "Dehao Chen", "email": "dehao@gcc.gnu.org", "date": "2014-12-18T00:19:24Z"}, "message": "auto-profile.c (afdo_annotate_cfg): Invoke update_ssa in the right place.\n\ngcc/ChangeLog:\n2014-12-17  Dehao Chen  <dehao@google.com>\n\n        * auto-profile.c (afdo_annotate_cfg): Invoke update_ssa in the right\n        place.\n        (auto_profile): Recompute inline summary after processing cgraph node.\n\nFrom-SVN: r218854", "tree": {"sha": "8c033ab092cac3cc5c4f5e81f6183cd47d5b07bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c033ab092cac3cc5c4f5e81f6183cd47d5b07bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8/comments", "author": {"login": "danielcdh", "id": 694263, "node_id": "MDQ6VXNlcjY5NDI2Mw==", "avatar_url": "https://avatars.githubusercontent.com/u/694263?v=4", "gravatar_id": "", "url": "https://api.github.com/users/danielcdh", "html_url": "https://github.com/danielcdh", "followers_url": "https://api.github.com/users/danielcdh/followers", "following_url": "https://api.github.com/users/danielcdh/following{/other_user}", "gists_url": "https://api.github.com/users/danielcdh/gists{/gist_id}", "starred_url": "https://api.github.com/users/danielcdh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/danielcdh/subscriptions", "organizations_url": "https://api.github.com/users/danielcdh/orgs", "repos_url": "https://api.github.com/users/danielcdh/repos", "events_url": "https://api.github.com/users/danielcdh/events{/privacy}", "received_events_url": "https://api.github.com/users/danielcdh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6fc5f22af3fcebe7661368370533887da261efb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fc5f22af3fcebe7661368370533887da261efb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fc5f22af3fcebe7661368370533887da261efb6"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "c315f63fc2c7127894f5c5976ad8053bd574a02d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8", "patch": "@@ -1,3 +1,9 @@\n+2014-12-17  Dehao Chen  <dehao@google.com>\n+\n+\t* auto-profile.c (afdo_annotate_cfg): Invoke update_ssa in the right\n+\tplace.\n+\t(auto_profile): Recompute inline summary after processing cgraph node.\n+\n 2014-12-17  Oleg Endo  <olegendo@gcc.gnu.org>\n \n \tPR target/51244"}, {"sha": "085bbd6ec549d1ca0627b9050e224bf3b127b3e4", "filename": "gcc/auto-profile.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8/gcc%2Fauto-profile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8/gcc%2Fauto-profile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fauto-profile.c?ref=29ca9bfb905a864546e5b22ca3f5b3ebd5cbb0a8", "patch": "@@ -1521,7 +1521,12 @@ afdo_annotate_cfg (const stmt_set &promoted_stmts)\n       profile_status_for_fn (cfun) = PROFILE_READ;\n     }\n   if (flag_value_profile_transformations)\n-    gimple_value_profile_transformations ();\n+    {\n+      gimple_value_profile_transformations ();\n+      free_dominance_info (CDI_DOMINATORS);\n+      free_dominance_info (CDI_POST_DOMINATORS);\n+      update_ssa (TODO_update_ssa);\n+    }\n }\n \n /* Wrapper function to invoke early inliner.  */\n@@ -1599,7 +1604,6 @@ auto_profile (void)\n     early_inline ();\n     autofdo::afdo_annotate_cfg (promoted_stmts);\n     compute_function_frequency ();\n-    update_ssa (TODO_update_ssa);\n \n     /* Local pure-const may imply need to fixup the cfg.  */\n     if (execute_fixup_cfg () & TODO_cleanup_cfg)\n@@ -1608,6 +1612,7 @@ auto_profile (void)\n     free_dominance_info (CDI_DOMINATORS);\n     free_dominance_info (CDI_POST_DOMINATORS);\n     cgraph_edge::rebuild_edges ();\n+    compute_inline_parameters (cgraph_node::get (current_function_decl), true);\n     pop_cfun ();\n   }\n "}]}