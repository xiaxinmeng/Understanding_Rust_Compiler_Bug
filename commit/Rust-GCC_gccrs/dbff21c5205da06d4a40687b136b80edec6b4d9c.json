{"sha": "dbff21c5205da06d4a40687b136b80edec6b4d9c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGJmZjIxYzUyMDVkYTA2ZDRhNDA2ODdiMTM2YjgwZWRlYzZiNGQ5Yw==", "commit": {"author": {"name": "Joseph Myers", "email": "jsm28@cam.ac.uk", "date": "2001-10-24T03:15:38Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2001-10-24T03:15:38Z"}, "message": "gcc_release: Build snapshots from mainline.\n\n\t* gcc_release: Build snapshots from mainline.  Generate Ada and\n\tChill tarballs.  Correct error check when building diffs.  Check\n\tfor errors when building bzip2 files.\n\t* crontab: Use /sourceware/snapshot-tmp for building snapshots.\n\nFrom-SVN: r46456", "tree": {"sha": "f177c4bd592f2ebf89f41cb38afb7330ee753e93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f177c4bd592f2ebf89f41cb38afb7330ee753e93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dbff21c5205da06d4a40687b136b80edec6b4d9c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbff21c5205da06d4a40687b136b80edec6b4d9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbff21c5205da06d4a40687b136b80edec6b4d9c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbff21c5205da06d4a40687b136b80edec6b4d9c/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "322821b9ad320f6f0104844d6442b02c57da1a94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322821b9ad320f6f0104844d6442b02c57da1a94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/322821b9ad320f6f0104844d6442b02c57da1a94"}], "stats": {"total": 28, "additions": 21, "deletions": 7}, "files": [{"sha": "c1b296aed02904a0dcfad10d33408e6cf37b50ed", "filename": "maintainer-scripts/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbff21c5205da06d4a40687b136b80edec6b4d9c/maintainer-scripts%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbff21c5205da06d4a40687b136b80edec6b4d9c/maintainer-scripts%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2FChangeLog?ref=dbff21c5205da06d4a40687b136b80edec6b4d9c", "patch": "@@ -1,3 +1,10 @@\n+2001-10-24  Joseph S. Myers  <jsm28@cam.ac.uk>\n+\n+\t* gcc_release: Build snapshots from mainline.  Generate Ada and\n+\tChill tarballs.  Correct error check when building diffs.  Check\n+\tfor errors when building bzip2 files.\n+\t* crontab: Use /sourceware/snapshot-tmp for building snapshots.\n+\n 2001-10-08  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* crontab: Build weekly snapshots."}, {"sha": "2d9655dcf2591de093314a8f6ec0b7958ac9b733", "filename": "maintainer-scripts/crontab", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbff21c5205da06d4a40687b136b80edec6b4d9c/maintainer-scripts%2Fcrontab", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbff21c5205da06d4a40687b136b80edec6b4d9c/maintainer-scripts%2Fcrontab", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fcrontab?ref=dbff21c5205da06d4a40687b136b80edec6b4d9c", "patch": "@@ -2,4 +2,4 @@\n 16 0 * * * sh /home/gccadmin/scripts/update_version -rgcc-3_0-branch\n 50 0 * * * sh /home/gccadmin/scripts/update_web_docs\n 55 0 * * * sh /home/gccadmin/scripts/update_web_docs_libstdcxx\n-40 16 * * 1 sh /home/gccadmin/scripts/gcc_release -s -l -d /var/tmp all\n+40 16 * * 1 sh /home/gccadmin/scripts/gcc_release -s -l -d /sourceware/snapshot-tmp all"}, {"sha": "260266b153d797e9a3432330eebd8ddfbf8362a1", "filename": "maintainer-scripts/gcc_release", "status": "modified", "additions": 13, "deletions": 6, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dbff21c5205da06d4a40687b136b80edec6b4d9c/maintainer-scripts%2Fgcc_release", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dbff21c5205da06d4a40687b136b80edec6b4d9c/maintainer-scripts%2Fgcc_release", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/maintainer-scripts%2Fgcc_release?ref=dbff21c5205da06d4a40687b136b80edec6b4d9c", "patch": "@@ -267,6 +267,8 @@ build_tarfiles() {\n   build_tarfile gcc-${RELEASE} `basename ${SOURCE_DIRECTORY}`\n \n   # Now, build one for each of the languages.\n+  build_tarfile gcc-ada-${RELEASE} ${ADA_DIRS}\n+  build_tarfile gcc-chill-${RELEASE} ${CHILL_DIRS}\n   build_tarfile gcc-g++-${RELEASE} ${CPLUSPLUS_DIRS}\n   build_tarfile gcc-g77-${RELEASE} ${FORTRAN_DIRS}\n   build_tarfile gcc-java-${RELEASE} ${JAVA_DIRS}\n@@ -275,8 +277,8 @@ build_tarfiles() {\n    \n   # The core is everything else.\n   EXCLUDES=\"\"\n-  for x in ${CPLUSPLUS_DIRS} ${FORTRAN_DIRS} ${JAVA_DIRS} \\\n-           ${OBJECTIVEC_DIRS} ${TESTSUITE_DIRS}; do\n+  for x in ${ADA_DIRS} ${CHILL_DIRS} ${CPLUSPLUS_DIRS} ${FORTRAN_DIRS} \\\n+\t   ${JAVA_DIRS} ${OBJECTIVEC_DIRS} ${TESTSUITE_DIRS}; do\n     EXCLUDES=\"${EXCLUDES} --exclude $x\"\n   done\n   build_tarfile gcc-core-${RELEASE} ${EXCLUDES} \\\n@@ -292,7 +294,7 @@ build_tarfiles() {\n   # Build .bz2 files.\n   for f in ${FILE_LIST}; do\n     bzfile=${f%.gz}.bz2\n-    zcat $f | ${BZIP2} > ${bzfile}\n+    (zcat $f | ${BZIP2} > ${bzfile}) || error \"Could not create ${bzfile}\"\n     FILE_LIST=\"${FILE_LIST} ${bzfile}\"\n   done\n }\n@@ -322,10 +324,11 @@ build_diff() {\n   changedir $tmpdir\n   tar xfz $1 || error \"Could not unpack $1 for diffs\"\n   tar xfz $3 || error \"Could not unpack $3 for diffs\"\n-  ${DIFF} $2 $4 | ${GZIP} > ../$5\n+  ${DIFF} $2 $4 > ../${5%.gz}\n   if [ $? -eq 2 ]; then\n     error \"Trouble making diffs from $1 to $3\"\n   fi\n+  ${GZIP} ../${5%.gz} || error \"Could not gzip ../${5%.gz}\"\n   changedir ..\n   rm -rf $tmpdir\n   FILE_LIST=\"${FILE_LIST} $5\"\n@@ -406,6 +409,8 @@ SOURCE_DIRECTORY=\"\"\n \n # The directories that should be part of the various language-specific\n # tar files.  These are all relative to the top of the source tree.\n+ADA_DIRS=\"gcc/ada\"\n+CHILL_DIRS=\"gcc/ch libchill\"\n CPLUSPLUS_DIRS=\"gcc/cp libstdc++-v3\"\n FORTRAN_DIRS=\"gcc/f libf2c\"\n JAVA_DIRS=\"gcc/java libjava libffi fastjar zlib boehm-gc\"\n@@ -507,8 +512,8 @@ if [ $SNAPSHOT -eq 0 ]; then\n   fi\n else\n   RELEASE=$DATE\n-  # For now snapshots come from the 3.0 branch.\n-  BRANCH=gcc-3_0-branch\n+  # For now snapshots come from the mainline.\n+  BRANCH=HEAD\n   FTP_PATH=\"${FTP_PATH}/snapshots/${LONG_DATE}\"\n   TAG=gcc_ss_${DATE}\n \n@@ -529,6 +534,8 @@ SOURCE_DIRECTORY=\"${WORKING_DIRECTORY}/gcc-${RELEASE}\"\n \n # Recompute the names of all the language-specific directories,\n # relative to the WORKING_DIRECTORY.\n+ADA_DIRS=`adjust_dirs ${ADA_DIRS}`\n+CHILL_DIRS=`adjust_dirs ${CHILL_DIRS}`\n CPLUSPLUS_DIRS=`adjust_dirs ${CPLUSPLUS_DIRS}`\n FORTRAN_DIRS=`adjust_dirs ${FORTRAN_DIRS}`\n JAVA_DIRS=`adjust_dirs ${JAVA_DIRS}`"}]}