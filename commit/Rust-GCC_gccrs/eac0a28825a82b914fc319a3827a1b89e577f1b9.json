{"sha": "eac0a28825a82b914fc319a3827a1b89e577f1b9", "node_id": "C_kwDOANBUbNoAKGVhYzBhMjg4MjVhODJiOTE0ZmMzMTlhMzgyN2ExYjg5ZTU3N2YxYjk", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2022-04-15T08:44:37Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-05-19T14:05:32Z"}, "message": "[Ada] Fix continuation message without a prior error\n\nWhen resolution of an expanded name fails, we call routine\nError_Missing_With_Of_Known_Unit which emits an error continuation\nmessage (i.e. an error string starting with \\\\). However, for error\ncontinuations to work properly there must be some prior error, because\ncontinuation itself doesn't set flags like Serious_Errors_Detected.\n\nWithout these flags the problematic statement is not marked with\nError_Posted, which in turn is needed to prevent cascaded errors.\n\nIn particular, when unresolved procedure call uses a direct name or an\nextended name with an unknown prefix, e.g.:\n\n  Unknown (1, 2, 3);\n  Unknown.Call (1, 2, 3);\n\nthen the N_Procedure_Call statements are marked with Error_Posted. But\nwhen a call uses an extended name with a known prefix we failed to flag\nthe N_Procedure_Call with Error_Posted.\n\nFound while improving the robustness of a feature that detects\nuninitialized scalar objects.\n\ngcc/ada/\n\n\t* sem_ch8.adb (Find_Expanded_Name): Emit a main error message\n\tbefore adding a continuation with the call to\n\tError_Missing_With_Of_Known_Unit.", "tree": {"sha": "05200ea2ad82395a01117007ba6afd7f82607128", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05200ea2ad82395a01117007ba6afd7f82607128"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eac0a28825a82b914fc319a3827a1b89e577f1b9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eac0a28825a82b914fc319a3827a1b89e577f1b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eac0a28825a82b914fc319a3827a1b89e577f1b9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eac0a28825a82b914fc319a3827a1b89e577f1b9/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "bd6c3f923686bb49e9fb9040781ae89aaf19d9e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd6c3f923686bb49e9fb9040781ae89aaf19d9e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd6c3f923686bb49e9fb9040781ae89aaf19d9e1"}], "stats": {"total": 2, "additions": 2, "deletions": 0}, "files": [{"sha": "35a9054e4a9d4d5d194a218929b35902e335938c", "filename": "gcc/ada/sem_ch8.adb", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eac0a28825a82b914fc319a3827a1b89e577f1b9/gcc%2Fada%2Fsem_ch8.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eac0a28825a82b914fc319a3827a1b89e577f1b9/gcc%2Fada%2Fsem_ch8.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch8.adb?ref=eac0a28825a82b914fc319a3827a1b89e577f1b9", "patch": "@@ -6995,6 +6995,8 @@ package body Sem_Ch8 is\n                                            Standard_Standard)\n                then\n                   if not Error_Posted (N) then\n+                     Error_Msg_NE\n+                       (\"& is not a visible entity of&\", Prefix (N), Selector);\n                      Error_Missing_With_Of_Known_Unit (Prefix (N));\n                   end if;\n "}]}