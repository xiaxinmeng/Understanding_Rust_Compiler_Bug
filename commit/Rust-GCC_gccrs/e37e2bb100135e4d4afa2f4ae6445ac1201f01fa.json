{"sha": "e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTM3ZTJiYjEwMDEzNWU0ZDRhZmEyZjRhZTY0NDVhYzEyMDFmMDFmYQ==", "commit": {"author": {"name": "Jozef Lawrynowicz", "email": "jozef.l@mittosystems.com", "date": "2019-08-13T10:05:53Z"}, "committer": {"name": "Jozef Lawrynowicz", "email": "jozefl@gcc.gnu.org", "date": "2019-08-13T10:05:53Z"}, "message": "MSP430: Consolidate handling of hard-coded MCU data\n\ngcc/ChangeLog:\n\n2019-08-13  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n\n\t* gcc/config.gcc (msp430*-*-*): Add msp430-devices.o to extra_objs and\n\textra_gcc_objs.\n\t* gcc/config/msp430/driver-msp430.c: Remove msp430_mcu_data.\n\t(msp430_select_cpu): New spec function.\n\t(msp430_select_hwmult_lib): Use msp430_extract_mcu_data to extract\n\tMCU data.\n\t* gcc/config/msp430/msp430-devices.c: New file.\n\t* gcc/config/msp430/msp430-devices.h: New file.\n\t* gcc/config/msp430/msp430.c: Remove msp430_mcu_data.\n\t(msp430_option_override): Use msp430_extract_mcu_data to extract\n\tMCU data.\n\t(msp430_use_f5_series_hwmult): Likewise.\n\t(use_32bit_hwmult): Likewise.\n\t(msp430_no_hwmult): Likewise.\n\t* gcc/config/msp430/msp430.h (ASM_SPEC): Don't pass -mmcu to the\n\tassembler.\n\t(DRIVER_SELF_SPECS): Call msp430_select_cpu if -mmcu is used without\n\tand -mcpu option.\n\t(EXTRA_SPEC_FUNCTIONS): Add msp430_select_cpu.\n\t* gcc/config/msp430/t-msp430: Add rule to build msp430-devices.o.\n\tRemove hard-coded MCU multilib data.\n\ngcc/testsuite/ChangeLog:\n\n2019-08-13  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n\n\t* gcc.target/msp430/msp430.exp\n\t(check_effective_target_msp430_430_selected): New.\n\t(check_effective_target_msp430_430x_selected): New.\n\t(check_effective_target_msp430_mlarge_selected): New.\n\t(check_effective_target_msp430_hwmul_not_none): New.\n\t(check_effective_target_msp430_hwmul_not_16bit): New.\n\t(check_effective_target_msp430_hwmul_not_32bit): New.\n\t(check_effective_target_msp430_hwmul_not_f5): New.\n\t(msp430_get_opts): New.\n\t(msp430_device_permutations_runtest): New.\n\t* gcc.target/msp430/devices/README: New file.\n\t* gcc.target/msp430/devices-main.c: New test.\n\t* gcc.target/msp430/devices/hard-cc430f5123.c: Likewise.\n\t* gcc.target/msp430/devices/hard-foo.c: Likewise.\n\t* gcc.target/msp430/devices/hard-msp430afe253.c: Likewise.\n\t* gcc.target/msp430/devices/hard-msp430cg4616.c: Likewise.\n\t* gcc.target/msp430/devices/hard-msp430f4783.c: Likewise.\n\t* gcc.target/msp430/devices/hard-rf430frl154h_rom.c: Likewise.\n\nFrom-SVN: r274370", "tree": {"sha": "c54af3eabb7667016b5ba28d390176b8454d7ae7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c54af3eabb7667016b5ba28d390176b8454d7ae7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/comments", "author": {"login": "jozefl-mitto", "id": 36524004, "node_id": "MDQ6VXNlcjM2NTI0MDA0", "avatar_url": "https://avatars.githubusercontent.com/u/36524004?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jozefl-mitto", "html_url": "https://github.com/jozefl-mitto", "followers_url": "https://api.github.com/users/jozefl-mitto/followers", "following_url": "https://api.github.com/users/jozefl-mitto/following{/other_user}", "gists_url": "https://api.github.com/users/jozefl-mitto/gists{/gist_id}", "starred_url": "https://api.github.com/users/jozefl-mitto/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jozefl-mitto/subscriptions", "organizations_url": "https://api.github.com/users/jozefl-mitto/orgs", "repos_url": "https://api.github.com/users/jozefl-mitto/repos", "events_url": "https://api.github.com/users/jozefl-mitto/events{/privacy}", "received_events_url": "https://api.github.com/users/jozefl-mitto/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "806f69cd68c18399e8e54b1a0913ae57beabbe69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/806f69cd68c18399e8e54b1a0913ae57beabbe69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/806f69cd68c18399e8e54b1a0913ae57beabbe69"}], "stats": {"total": 2499, "additions": 988, "deletions": 1511}, "files": [{"sha": "fcf1558bf18d2d506426c5bb2b9e7c8f6b4bf2c7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -1,3 +1,27 @@\n+2019-08-13  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n+\n+\t* gcc/config.gcc (msp430*-*-*): Add msp430-devices.o to extra_objs and\n+\textra_gcc_objs.\n+\t* gcc/config/msp430/driver-msp430.c: Remove msp430_mcu_data.\n+\t(msp430_select_cpu): New spec function.\n+\t(msp430_select_hwmult_lib): Use msp430_extract_mcu_data to extract\n+\tMCU data.\n+\t* gcc/config/msp430/msp430-devices.c: New file.\n+\t* gcc/config/msp430/msp430-devices.h: New file.\n+\t* gcc/config/msp430/msp430.c: Remove msp430_mcu_data.\n+\t(msp430_option_override): Use msp430_extract_mcu_data to extract\n+\tMCU data.\n+\t(msp430_use_f5_series_hwmult): Likewise.\n+\t(use_32bit_hwmult): Likewise.\n+\t(msp430_no_hwmult): Likewise.\n+\t* gcc/config/msp430/msp430.h (ASM_SPEC): Don't pass -mmcu to the\n+\tassembler.\n+\t(DRIVER_SELF_SPECS): Call msp430_select_cpu if -mmcu is used without\n+\tand -mcpu option.\n+\t(EXTRA_SPEC_FUNCTIONS): Add msp430_select_cpu.\n+\t* gcc/config/msp430/t-msp430: Add rule to build msp430-devices.o.\n+\tRemove hard-coded MCU multilib data.\n+\n 2019-08-13  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* config/aarch64/aarch64.c (aarch64_classify_vector_mode): Switch"}, {"sha": "40cbc52dc9940e66208f154c1fee7aa36cb52b7e", "filename": "gcc/config.gcc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -2519,7 +2519,8 @@ msp430*-*-*)\n \tc_target_objs=\"msp430-c.o\"\n \tcxx_target_objs=\"msp430-c.o\"\n \ttmake_file=\"${tmake_file} msp430/t-msp430\"\n-\textra_gcc_objs=\"driver-msp430.o\"\n+\textra_objs=\"${extra_objs} msp430-devices.o\"\n+\textra_gcc_objs=\"driver-msp430.o msp430-devices.o\"\n \t# Enable .init_array unless it has been explicitly disabled.\n \t# The MSP430 EABI mandates the use of .init_array, and the Newlib CRT\n \t# code since mid-2019 expects it."}, {"sha": "9ad05dca9571b10212cf25b0a0441866134df012", "filename": "gcc/config/msp430/driver-msp430.c", "status": "modified", "additions": 31, "deletions": 623, "changes": 654, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fdriver-msp430.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fdriver-msp430.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fdriver-msp430.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -25,627 +25,34 @@\n #include \"coretypes.h\"\n #include \"diagnostic.h\"\n #include \"tm.h\"\n+#include \"msp430-devices.h\"\n \n-/* This is a copy of the same data structure found in gas/config/tc-msp430.c\n-   Also another (sort-of) copy can be found in gcc/config/msp430/msp430.c\n-   Keep these three structures in sync.\n-   The data in this structure has been extracted from version 1.194 of the\n-   devices.csv file released by TI in September 2016.  */\n-\n-struct msp430_mcu_data\n+/* This spec function is called if the user has provided an -mmcu option without\n+   an -mcpu option.  It will place the correct -mcpu option for the given -mmcu\n+   onto the command line, to ensure the correct ISA multilib is selected.  */\n+const char *\n+msp430_select_cpu (int argc, const char ** argv)\n {\n-  const char * name;\n-  unsigned int revision; /* 0=> MSP430, 1=>MSP430X, 2=> MSP430Xv2.  */\n-  unsigned int hwmpy;    /* 0=>none, 1=>16-bit, 2=>16-bit w/sign extend, 4=>32-bit, 8=> 32-bit (5xx).  */\n+  if (argc == 0)\n+    {\n+      error (\"expected an argument to %<msp430_select_cpu>%\");\n+      return NULL;\n+    }\n+  msp430_extract_mcu_data (argv[0]);\n+  if (extracted_mcu_data.name != NULL)\n+    {\n+      switch (extracted_mcu_data.revision)\n+\t{\n+\tcase 0: return \"-mcpu=msp430\";\n+\tcase 1: return \"-mcpu=msp430x\";\n+\tcase 2: return \"-mcpu=msp430xv2\";\n+\tdefault:\n+\t\tgcc_unreachable ();\n+\t}\n+    }\n+  /* MCU wasn't found, the compiler proper will warn about this.  */\n+  return NULL;\n }\n-msp430_mcu_data [] =\n-{\n-  { \"cc430f5123\",2,8 },\n-  { \"cc430f5125\",2,8 },\n-  { \"cc430f5133\",2,8 },\n-  { \"cc430f5135\",2,8 },\n-  { \"cc430f5137\",2,8 },\n-  { \"cc430f5143\",2,8 },\n-  { \"cc430f5145\",2,8 },\n-  { \"cc430f5147\",2,8 },\n-  { \"cc430f6125\",2,8 },\n-  { \"cc430f6126\",2,8 },\n-  { \"cc430f6127\",2,8 },\n-  { \"cc430f6135\",2,8 },\n-  { \"cc430f6137\",2,8 },\n-  { \"cc430f6143\",2,8 },\n-  { \"cc430f6145\",2,8 },\n-  { \"cc430f6147\",2,8 },\n-  { \"msp430afe221\",0,2 },\n-  { \"msp430afe222\",0,2 },\n-  { \"msp430afe223\",0,2 },\n-  { \"msp430afe231\",0,2 },\n-  { \"msp430afe232\",0,2 },\n-  { \"msp430afe233\",0,2 },\n-  { \"msp430afe251\",0,2 },\n-  { \"msp430afe252\",0,2 },\n-  { \"msp430afe253\",0,2 },\n-  { \"msp430bt5190\",2,8 },\n-  { \"msp430c091\",0,0 },\n-  { \"msp430c092\",0,0 },\n-  { \"msp430c111\",0,0 },\n-  { \"msp430c1111\",0,0 },\n-  { \"msp430c112\",0,0 },\n-  { \"msp430c1121\",0,0 },\n-  { \"msp430c1331\",0,0 },\n-  { \"msp430c1351\",0,0 },\n-  { \"msp430c311s\",0,0 },\n-  { \"msp430c312\",0,0 },\n-  { \"msp430c313\",0,0 },\n-  { \"msp430c314\",0,0 },\n-  { \"msp430c315\",0,0 },\n-  { \"msp430c323\",0,0 },\n-  { \"msp430c325\",0,0 },\n-  { \"msp430c336\",0,1 },\n-  { \"msp430c337\",0,1 },\n-  { \"msp430c412\",0,0 },\n-  { \"msp430c413\",0,0 },\n-  { \"msp430cg4616\",1,1 },\n-  { \"msp430cg4617\",1,1 },\n-  { \"msp430cg4618\",1,1 },\n-  { \"msp430cg4619\",1,1 },\n-  { \"msp430e112\",0,0 },\n-  { \"msp430e313\",0,0 },\n-  { \"msp430e315\",0,0 },\n-  { \"msp430e325\",0,0 },\n-  { \"msp430e337\",0,1 },\n-  { \"msp430f110\",0,0 },\n-  { \"msp430f1101\",0,0 },\n-  { \"msp430f1101a\",0,0 },\n-  { \"msp430f1111\",0,0 },\n-  { \"msp430f1111a\",0,0 },\n-  { \"msp430f112\",0,0 },\n-  { \"msp430f1121\",0,0 },\n-  { \"msp430f1121a\",0,0 },\n-  { \"msp430f1122\",0,0 },\n-  { \"msp430f1132\",0,0 },\n-  { \"msp430f122\",0,0 },\n-  { \"msp430f1222\",0,0 },\n-  { \"msp430f123\",0,0 },\n-  { \"msp430f1232\",0,0 },\n-  { \"msp430f133\",0,0 },\n-  { \"msp430f135\",0,0 },\n-  { \"msp430f147\",0,1 },\n-  { \"msp430f1471\",0,1 },\n-  { \"msp430f148\",0,1 },\n-  { \"msp430f1481\",0,1 },\n-  { \"msp430f149\",0,1 },\n-  { \"msp430f1491\",0,1 },\n-  { \"msp430f155\",0,0 },\n-  { \"msp430f156\",0,0 },\n-  { \"msp430f157\",0,0 },\n-  { \"msp430f1610\",0,1 },\n-  { \"msp430f1611\",0,1 },\n-  { \"msp430f1612\",0,1 },\n-  { \"msp430f167\",0,1 },\n-  { \"msp430f168\",0,1 },\n-  { \"msp430f169\",0,1 },\n-  { \"msp430f2001\",0,0 },\n-  { \"msp430f2002\",0,0 },\n-  { \"msp430f2003\",0,0 },\n-  { \"msp430f2011\",0,0 },\n-  { \"msp430f2012\",0,0 },\n-  { \"msp430f2013\",0,0 },\n-  { \"msp430f2101\",0,0 },\n-  { \"msp430f2111\",0,0 },\n-  { \"msp430f2112\",0,0 },\n-  { \"msp430f2121\",0,0 },\n-  { \"msp430f2122\",0,0 },\n-  { \"msp430f2131\",0,0 },\n-  { \"msp430f2132\",0,0 },\n-  { \"msp430f2232\",0,0 },\n-  { \"msp430f2234\",0,0 },\n-  { \"msp430f2252\",0,0 },\n-  { \"msp430f2254\",0,0 },\n-  { \"msp430f2272\",0,0 },\n-  { \"msp430f2274\",0,0 },\n-  { \"msp430f233\",0,2 },\n-  { \"msp430f2330\",0,2 },\n-  { \"msp430f235\",0,2 },\n-  { \"msp430f2350\",0,2 },\n-  { \"msp430f2370\",0,2 },\n-  { \"msp430f2410\",0,2 },\n-  { \"msp430f2416\",1,2 },\n-  { \"msp430f2417\",1,2 },\n-  { \"msp430f2418\",1,2 },\n-  { \"msp430f2419\",1,2 },\n-  { \"msp430f247\",0,2 },\n-  { \"msp430f2471\",0,2 },\n-  { \"msp430f248\",0,2 },\n-  { \"msp430f2481\",0,2 },\n-  { \"msp430f249\",0,2 },\n-  { \"msp430f2491\",0,2 },\n-  { \"msp430f2616\",1,2 },\n-  { \"msp430f2617\",1,2 },\n-  { \"msp430f2618\",1,2 },\n-  { \"msp430f2619\",1,2 },\n-  { \"msp430f412\",0,0 },\n-  { \"msp430f413\",0,0 },\n-  { \"msp430f4132\",0,0 },\n-  { \"msp430f415\",0,0 },\n-  { \"msp430f4152\",0,0 },\n-  { \"msp430f417\",0,0 },\n-  { \"msp430f423\",0,1 },\n-  { \"msp430f423a\",0,1 },\n-  { \"msp430f425\",0,1 },\n-  { \"msp430f4250\",0,0 },\n-  { \"msp430f425a\",0,1 },\n-  { \"msp430f4260\",0,0 },\n-  { \"msp430f427\",0,1 },\n-  { \"msp430f4270\",0,0 },\n-  { \"msp430f427a\",0,1 },\n-  { \"msp430f435\",0,0 },\n-  { \"msp430f4351\",0,0 },\n-  { \"msp430f436\",0,0 },\n-  { \"msp430f4361\",0,0 },\n-  { \"msp430f437\",0,0 },\n-  { \"msp430f4371\",0,0 },\n-  { \"msp430f438\",0,0 },\n-  { \"msp430f439\",0,0 },\n-  { \"msp430f447\",0,1 },\n-  { \"msp430f448\",0,1 },\n-  { \"msp430f4481\",0,1 },\n-  { \"msp430f449\",0,1 },\n-  { \"msp430f4491\",0,1 },\n-  { \"msp430f4616\",1,1 },\n-  { \"msp430f46161\",1,1 },\n-  { \"msp430f4617\",1,1 },\n-  { \"msp430f46171\",1,1 },\n-  { \"msp430f4618\",1,1 },\n-  { \"msp430f46181\",1,1 },\n-  { \"msp430f4619\",1,1 },\n-  { \"msp430f46191\",1,1 },\n-  { \"msp430f47126\",1,4 },\n-  { \"msp430f47127\",1,4 },\n-  { \"msp430f47163\",1,4 },\n-  { \"msp430f47166\",1,4 },\n-  { \"msp430f47167\",1,4 },\n-  { \"msp430f47173\",1,4 },\n-  { \"msp430f47176\",1,4 },\n-  { \"msp430f47177\",1,4 },\n-  { \"msp430f47183\",1,4 },\n-  { \"msp430f47186\",1,4 },\n-  { \"msp430f47187\",1,4 },\n-  { \"msp430f47193\",1,4 },\n-  { \"msp430f47196\",1,4 },\n-  { \"msp430f47197\",1,4 },\n-  { \"msp430f477\",0,0 },\n-  { \"msp430f478\",0,0 },\n-  { \"msp430f4783\",0,4 },\n-  { \"msp430f4784\",0,4 },\n-  { \"msp430f479\",0,0 },\n-  { \"msp430f4793\",0,4 },\n-  { \"msp430f4794\",0,4 },\n-  { \"msp430f5131\",2,8 },\n-  { \"msp430f5132\",2,8 },\n-  { \"msp430f5151\",2,8 },\n-  { \"msp430f5152\",2,8 },\n-  { \"msp430f5171\",2,8 },\n-  { \"msp430f5172\",2,8 },\n-  { \"msp430f5212\",2,8 },\n-  { \"msp430f5213\",2,8 },\n-  { \"msp430f5214\",2,8 },\n-  { \"msp430f5217\",2,8 },\n-  { \"msp430f5218\",2,8 },\n-  { \"msp430f5219\",2,8 },\n-  { \"msp430f5222\",2,8 },\n-  { \"msp430f5223\",2,8 },\n-  { \"msp430f5224\",2,8 },\n-  { \"msp430f5227\",2,8 },\n-  { \"msp430f5228\",2,8 },\n-  { \"msp430f5229\",2,8 },\n-  { \"msp430f5232\",2,8 },\n-  { \"msp430f5234\",2,8 },\n-  { \"msp430f5237\",2,8 },\n-  { \"msp430f5239\",2,8 },\n-  { \"msp430f5242\",2,8 },\n-  { \"msp430f5244\",2,8 },\n-  { \"msp430f5247\",2,8 },\n-  { \"msp430f5249\",2,8 },\n-  { \"msp430f5252\",2,8 },\n-  { \"msp430f5253\",2,8 },\n-  { \"msp430f5254\",2,8 },\n-  { \"msp430f5255\",2,8 },\n-  { \"msp430f5256\",2,8 },\n-  { \"msp430f5257\",2,8 },\n-  { \"msp430f5258\",2,8 },\n-  { \"msp430f5259\",2,8 },\n-  { \"msp430f5304\",2,8 },\n-  { \"msp430f5308\",2,8 },\n-  { \"msp430f5309\",2,8 },\n-  { \"msp430f5310\",2,8 },\n-  { \"msp430f5324\",2,8 },\n-  { \"msp430f5325\",2,8 },\n-  { \"msp430f5326\",2,8 },\n-  { \"msp430f5327\",2,8 },\n-  { \"msp430f5328\",2,8 },\n-  { \"msp430f5329\",2,8 },\n-  { \"msp430f5333\",2,8 },\n-  { \"msp430f5335\",2,8 },\n-  { \"msp430f5336\",2,8 },\n-  { \"msp430f5338\",2,8 },\n-  { \"msp430f5340\",2,8 },\n-  { \"msp430f5341\",2,8 },\n-  { \"msp430f5342\",2,8 },\n-  { \"msp430f5358\",2,8 },\n-  { \"msp430f5359\",2,8 },\n-  { \"msp430f5418\",2,8 },\n-  { \"msp430f5418a\",2,8 },\n-  { \"msp430f5419\",2,8 },\n-  { \"msp430f5419a\",2,8 },\n-  { \"msp430f5435\",2,8 },\n-  { \"msp430f5435a\",2,8 },\n-  { \"msp430f5436\",2,8 },\n-  { \"msp430f5436a\",2,8 },\n-  { \"msp430f5437\",2,8 },\n-  { \"msp430f5437a\",2,8 },\n-  { \"msp430f5438\",2,8 },\n-  { \"msp430f5438a\",2,8 },\n-  { \"msp430f5500\",2,8 },\n-  { \"msp430f5501\",2,8 },\n-  { \"msp430f5502\",2,8 },\n-  { \"msp430f5503\",2,8 },\n-  { \"msp430f5504\",2,8 },\n-  { \"msp430f5505\",2,8 },\n-  { \"msp430f5506\",2,8 },\n-  { \"msp430f5507\",2,8 },\n-  { \"msp430f5508\",2,8 },\n-  { \"msp430f5509\",2,8 },\n-  { \"msp430f5510\",2,8 },\n-  { \"msp430f5513\",2,8 },\n-  { \"msp430f5514\",2,8 },\n-  { \"msp430f5515\",2,8 },\n-  { \"msp430f5517\",2,8 },\n-  { \"msp430f5519\",2,8 },\n-  { \"msp430f5521\",2,8 },\n-  { \"msp430f5522\",2,8 },\n-  { \"msp430f5524\",2,8 },\n-  { \"msp430f5525\",2,8 },\n-  { \"msp430f5526\",2,8 },\n-  { \"msp430f5527\",2,8 },\n-  { \"msp430f5528\",2,8 },\n-  { \"msp430f5529\",2,8 },\n-  { \"msp430f5630\",2,8 },\n-  { \"msp430f5631\",2,8 },\n-  { \"msp430f5632\",2,8 },\n-  { \"msp430f5633\",2,8 },\n-  { \"msp430f5634\",2,8 },\n-  { \"msp430f5635\",2,8 },\n-  { \"msp430f5636\",2,8 },\n-  { \"msp430f5637\",2,8 },\n-  { \"msp430f5638\",2,8 },\n-  { \"msp430f5658\",2,8 },\n-  { \"msp430f5659\",2,8 },\n-  { \"msp430f5xx_6xxgeneric\",2,8 },\n-  { \"msp430f6433\",2,8 },\n-  { \"msp430f6435\",2,8 },\n-  { \"msp430f6436\",2,8 },\n-  { \"msp430f6438\",2,8 },\n-  { \"msp430f6458\",2,8 },\n-  { \"msp430f6459\",2,8 },\n-  { \"msp430f6630\",2,8 },\n-  { \"msp430f6631\",2,8 },\n-  { \"msp430f6632\",2,8 },\n-  { \"msp430f6633\",2,8 },\n-  { \"msp430f6634\",2,8 },\n-  { \"msp430f6635\",2,8 },\n-  { \"msp430f6636\",2,8 },\n-  { \"msp430f6637\",2,8 },\n-  { \"msp430f6638\",2,8 },\n-  { \"msp430f6658\",2,8 },\n-  { \"msp430f6659\",2,8 },\n-  { \"msp430f6720\",2,8 },\n-  { \"msp430f6720a\",2,8 },\n-  { \"msp430f6721\",2,8 },\n-  { \"msp430f6721a\",2,8 },\n-  { \"msp430f6723\",2,8 },\n-  { \"msp430f6723a\",2,8 },\n-  { \"msp430f6724\",2,8 },\n-  { \"msp430f6724a\",2,8 },\n-  { \"msp430f6725\",2,8 },\n-  { \"msp430f6725a\",2,8 },\n-  { \"msp430f6726\",2,8 },\n-  { \"msp430f6726a\",2,8 },\n-  { \"msp430f6730\",2,8 },\n-  { \"msp430f6730a\",2,8 },\n-  { \"msp430f6731\",2,8 },\n-  { \"msp430f6731a\",2,8 },\n-  { \"msp430f6733\",2,8 },\n-  { \"msp430f6733a\",2,8 },\n-  { \"msp430f6734\",2,8 },\n-  { \"msp430f6734a\",2,8 },\n-  { \"msp430f6735\",2,8 },\n-  { \"msp430f6735a\",2,8 },\n-  { \"msp430f6736\",2,8 },\n-  { \"msp430f6736a\",2,8 },\n-  { \"msp430f6745\",2,8 },\n-  { \"msp430f67451\",2,8 },\n-  { \"msp430f67451a\",2,8 },\n-  { \"msp430f6745a\",2,8 },\n-  { \"msp430f6746\",2,8 },\n-  { \"msp430f67461\",2,8 },\n-  { \"msp430f67461a\",2,8 },\n-  { \"msp430f6746a\",2,8 },\n-  { \"msp430f6747\",2,8 },\n-  { \"msp430f67471\",2,8 },\n-  { \"msp430f67471a\",2,8 },\n-  { \"msp430f6747a\",2,8 },\n-  { \"msp430f6748\",2,8 },\n-  { \"msp430f67481\",2,8 },\n-  { \"msp430f67481a\",2,8 },\n-  { \"msp430f6748a\",2,8 },\n-  { \"msp430f6749\",2,8 },\n-  { \"msp430f67491\",2,8 },\n-  { \"msp430f67491a\",2,8 },\n-  { \"msp430f6749a\",2,8 },\n-  { \"msp430f67621\",2,8 },\n-  { \"msp430f67621a\",2,8 },\n-  { \"msp430f67641\",2,8 },\n-  { \"msp430f67641a\",2,8 },\n-  { \"msp430f6765\",2,8 },\n-  { \"msp430f67651\",2,8 },\n-  { \"msp430f67651a\",2,8 },\n-  { \"msp430f6765a\",2,8 },\n-  { \"msp430f6766\",2,8 },\n-  { \"msp430f67661\",2,8 },\n-  { \"msp430f67661a\",2,8 },\n-  { \"msp430f6766a\",2,8 },\n-  { \"msp430f6767\",2,8 },\n-  { \"msp430f67671\",2,8 },\n-  { \"msp430f67671a\",2,8 },\n-  { \"msp430f6767a\",2,8 },\n-  { \"msp430f6768\",2,8 },\n-  { \"msp430f67681\",2,8 },\n-  { \"msp430f67681a\",2,8 },\n-  { \"msp430f6768a\",2,8 },\n-  { \"msp430f6769\",2,8 },\n-  { \"msp430f67691\",2,8 },\n-  { \"msp430f67691a\",2,8 },\n-  { \"msp430f6769a\",2,8 },\n-  { \"msp430f6775\",2,8 },\n-  { \"msp430f67751\",2,8 },\n-  { \"msp430f67751a\",2,8 },\n-  { \"msp430f6775a\",2,8 },\n-  { \"msp430f6776\",2,8 },\n-  { \"msp430f67761\",2,8 },\n-  { \"msp430f67761a\",2,8 },\n-  { \"msp430f6776a\",2,8 },\n-  { \"msp430f6777\",2,8 },\n-  { \"msp430f67771\",2,8 },\n-  { \"msp430f67771a\",2,8 },\n-  { \"msp430f6777a\",2,8 },\n-  { \"msp430f6778\",2,8 },\n-  { \"msp430f67781\",2,8 },\n-  { \"msp430f67781a\",2,8 },\n-  { \"msp430f6778a\",2,8 },\n-  { \"msp430f6779\",2,8 },\n-  { \"msp430f67791\",2,8 },\n-  { \"msp430f67791a\",2,8 },\n-  { \"msp430f6779a\",2,8 },\n-  { \"msp430fe423\",0,0 },\n-  { \"msp430fe4232\",0,0 },\n-  { \"msp430fe423a\",0,0 },\n-  { \"msp430fe4242\",0,0 },\n-  { \"msp430fe425\",0,0 },\n-  { \"msp430fe4252\",0,0 },\n-  { \"msp430fe425a\",0,0 },\n-  { \"msp430fe427\",0,0 },\n-  { \"msp430fe4272\",0,0 },\n-  { \"msp430fe427a\",0,0 },\n-  { \"msp430fg4250\",0,0 },\n-  { \"msp430fg4260\",0,0 },\n-  { \"msp430fg4270\",0,0 },\n-  { \"msp430fg437\",0,0 },\n-  { \"msp430fg438\",0,0 },\n-  { \"msp430fg439\",0,0 },\n-  { \"msp430fg4616\",1,1 },\n-  { \"msp430fg4617\",1,1 },\n-  { \"msp430fg4618\",1,1 },\n-  { \"msp430fg4619\",1,1 },\n-  { \"msp430fg477\",0,0 },\n-  { \"msp430fg478\",0,0 },\n-  { \"msp430fg479\",0,0 },\n-  { \"msp430fg6425\",2,8 },\n-  { \"msp430fg6426\",2,8 },\n-  { \"msp430fg6625\",2,8 },\n-  { \"msp430fg6626\",2,8 },\n-  { \"msp430fr2032\",2,0 },\n-  { \"msp430fr2033\",2,0 },\n-  { \"msp430fr2110\",2,0 },\n-  { \"msp430fr2111\",2,0 },\n-  { \"msp430fr2310\",2,0 },\n-  { \"msp430fr2311\",2,0 },\n-  { \"msp430fr2433\",2,8 },\n-  { \"msp430fr2532\",2,8 },\n-  { \"msp430fr2533\",2,8 },\n-  { \"msp430fr2632\",2,8 },\n-  { \"msp430fr2633\",2,8 },\n-  { \"msp430fr2xx_4xxgeneric\",2,8 },\n-  { \"msp430fr4131\",2,0 },\n-  { \"msp430fr4132\",2,0 },\n-  { \"msp430fr4133\",2,0 },\n-  { \"msp430fr5720\",2,8 },\n-  { \"msp430fr5721\",2,8 },\n-  { \"msp430fr5722\",2,8 },\n-  { \"msp430fr5723\",2,8 },\n-  { \"msp430fr5724\",2,8 },\n-  { \"msp430fr5725\",2,8 },\n-  { \"msp430fr5726\",2,8 },\n-  { \"msp430fr5727\",2,8 },\n-  { \"msp430fr5728\",2,8 },\n-  { \"msp430fr5729\",2,8 },\n-  { \"msp430fr5730\",2,8 },\n-  { \"msp430fr5731\",2,8 },\n-  { \"msp430fr5732\",2,8 },\n-  { \"msp430fr5733\",2,8 },\n-  { \"msp430fr5734\",2,8 },\n-  { \"msp430fr5735\",2,8 },\n-  { \"msp430fr5736\",2,8 },\n-  { \"msp430fr5737\",2,8 },\n-  { \"msp430fr5738\",2,8 },\n-  { \"msp430fr5739\",2,8 },\n-  { \"msp430fr57xxgeneric\",2,8 },\n-  { \"msp430fr5847\",2,8 },\n-  { \"msp430fr58471\",2,8 },\n-  { \"msp430fr5848\",2,8 },\n-  { \"msp430fr5849\",2,8 },\n-  { \"msp430fr5857\",2,8 },\n-  { \"msp430fr5858\",2,8 },\n-  { \"msp430fr5859\",2,8 },\n-  { \"msp430fr5867\",2,8 },\n-  { \"msp430fr58671\",2,8 },\n-  { \"msp430fr5868\",2,8 },\n-  { \"msp430fr5869\",2,8 },\n-  { \"msp430fr5870\",2,8 },\n-  { \"msp430fr5872\",2,8 },\n-  { \"msp430fr58721\",2,8 },\n-  { \"msp430fr5887\",2,8 },\n-  { \"msp430fr5888\",2,8 },\n-  { \"msp430fr5889\",2,8 },\n-  { \"msp430fr58891\",2,8 },\n-  { \"msp430fr5922\",2,8 },\n-  { \"msp430fr59221\",2,8 },\n-  { \"msp430fr5947\",2,8 },\n-  { \"msp430fr59471\",2,8 },\n-  { \"msp430fr5948\",2,8 },\n-  { \"msp430fr5949\",2,8 },\n-  { \"msp430fr5957\",2,8 },\n-  { \"msp430fr5958\",2,8 },\n-  { \"msp430fr5959\",2,8 },\n-  { \"msp430fr5962\",2,8 },\n-  { \"msp430fr5964\",2,8 },\n-  { \"msp430fr5967\",2,8 },\n-  { \"msp430fr5968\",2,8 },\n-  { \"msp430fr5969\",2,8 },\n-  { \"msp430fr59691\",2,8 },\n-  { \"msp430fr5970\",2,8 },\n-  { \"msp430fr5972\",2,8 },\n-  { \"msp430fr59721\",2,8 },\n-  { \"msp430fr5986\",2,8 },\n-  { \"msp430fr5987\",2,8 },\n-  { \"msp430fr5988\",2,8 },\n-  { \"msp430fr5989\",2,8 },\n-  { \"msp430fr59891\",2,8 },\n-  { \"msp430fr5992\",2,8 },\n-  { \"msp430fr5994\",2,8 },\n-  { \"msp430fr59941\",2,8 },\n-  { \"msp430fr5xx_6xxgeneric\",2,8 },\n-  { \"msp430fr6820\",2,8 },\n-  { \"msp430fr6822\",2,8 },\n-  { \"msp430fr68221\",2,8 },\n-  { \"msp430fr6870\",2,8 },\n-  { \"msp430fr6872\",2,8 },\n-  { \"msp430fr68721\",2,8 },\n-  { \"msp430fr6877\",2,8 },\n-  { \"msp430fr6879\",2,8 },\n-  { \"msp430fr68791\",2,8 },\n-  { \"msp430fr6887\",2,8 },\n-  { \"msp430fr6888\",2,8 },\n-  { \"msp430fr6889\",2,8 },\n-  { \"msp430fr68891\",2,8 },\n-  { \"msp430fr6920\",2,8 },\n-  { \"msp430fr6922\",2,8 },\n-  { \"msp430fr69221\",2,8 },\n-  { \"msp430fr6927\",2,8 },\n-  { \"msp430fr69271\",2,8 },\n-  { \"msp430fr6928\",2,8 },\n-  { \"msp430fr6970\",2,8 },\n-  { \"msp430fr6972\",2,8 },\n-  { \"msp430fr69721\",2,8 },\n-  { \"msp430fr6977\",2,8 },\n-  { \"msp430fr6979\",2,8 },\n-  { \"msp430fr69791\",2,8 },\n-  { \"msp430fr6987\",2,8 },\n-  { \"msp430fr6988\",2,8 },\n-  { \"msp430fr6989\",2,8 },\n-  { \"msp430fr69891\",2,8 },\n-  { \"msp430fw423\",0,0 },\n-  { \"msp430fw425\",0,0 },\n-  { \"msp430fw427\",0,0 },\n-  { \"msp430fw428\",0,0 },\n-  { \"msp430fw429\",0,0 },\n-  { \"msp430g2001\",0,0 },\n-  { \"msp430g2101\",0,0 },\n-  { \"msp430g2102\",0,0 },\n-  { \"msp430g2111\",0,0 },\n-  { \"msp430g2112\",0,0 },\n-  { \"msp430g2113\",0,0 },\n-  { \"msp430g2121\",0,0 },\n-  { \"msp430g2131\",0,0 },\n-  { \"msp430g2132\",0,0 },\n-  { \"msp430g2152\",0,0 },\n-  { \"msp430g2153\",0,0 },\n-  { \"msp430g2201\",0,0 },\n-  { \"msp430g2202\",0,0 },\n-  { \"msp430g2203\",0,0 },\n-  { \"msp430g2210\",0,0 },\n-  { \"msp430g2211\",0,0 },\n-  { \"msp430g2212\",0,0 },\n-  { \"msp430g2213\",0,0 },\n-  { \"msp430g2221\",0,0 },\n-  { \"msp430g2230\",0,0 },\n-  { \"msp430g2231\",0,0 },\n-  { \"msp430g2232\",0,0 },\n-  { \"msp430g2233\",0,0 },\n-  { \"msp430g2252\",0,0 },\n-  { \"msp430g2253\",0,0 },\n-  { \"msp430g2302\",0,0 },\n-  { \"msp430g2303\",0,0 },\n-  { \"msp430g2312\",0,0 },\n-  { \"msp430g2313\",0,0 },\n-  { \"msp430g2332\",0,0 },\n-  { \"msp430g2333\",0,0 },\n-  { \"msp430g2352\",0,0 },\n-  { \"msp430g2353\",0,0 },\n-  { \"msp430g2402\",0,0 },\n-  { \"msp430g2403\",0,0 },\n-  { \"msp430g2412\",0,0 },\n-  { \"msp430g2413\",0,0 },\n-  { \"msp430g2432\",0,0 },\n-  { \"msp430g2433\",0,0 },\n-  { \"msp430g2444\",0,0 },\n-  { \"msp430g2452\",0,0 },\n-  { \"msp430g2453\",0,0 },\n-  { \"msp430g2513\",0,0 },\n-  { \"msp430g2533\",0,0 },\n-  { \"msp430g2544\",0,0 },\n-  { \"msp430g2553\",0,0 },\n-  { \"msp430g2744\",0,0 },\n-  { \"msp430g2755\",0,0 },\n-  { \"msp430g2855\",0,0 },\n-  { \"msp430g2955\",0,0 },\n-  { \"msp430i2020\",0,2 },\n-  { \"msp430i2021\",0,2 },\n-  { \"msp430i2030\",0,2 },\n-  { \"msp430i2031\",0,2 },\n-  { \"msp430i2040\",0,2 },\n-  { \"msp430i2041\",0,2 },\n-  { \"msp430i2xxgeneric\",0,2 },\n-  { \"msp430l092\",0,0 },\n-  { \"msp430p112\",0,0 },\n-  { \"msp430p313\",0,0 },\n-  { \"msp430p315\",0,0 },\n-  { \"msp430p315s\",0,0 },\n-  { \"msp430p325\",0,0 },\n-  { \"msp430p337\",0,1 },\n-  { \"msp430sl5438a\",2,8 },\n-  { \"msp430tch5e\",0,0 },\n-  { \"msp430xgeneric\",2,8 },\n-  { \"rf430f5144\",2,8 },\n-  { \"rf430f5155\",2,8 },\n-  { \"rf430f5175\",2,8 },\n-  { \"rf430frl152h\",0,0 },\n-  { \"rf430frl152h_rom\",0,0 },\n-  { \"rf430frl153h\",0,0 },\n-  { \"rf430frl153h_rom\",0,0 },\n-  { \"rf430frl154h\",0,0 },\n-  { \"rf430frl154h_rom\",0,0 }\n-};  \n \n /* Implement spec function `msp430_hwmult_lib\u00b4.  */\n \n@@ -688,19 +95,20 @@ msp430_select_hwmult_lib (int argc ATTRIBUTE_UNUSED, const char ** argv ATTRIBUT\n       }\n     else if (strcasecmp (argv[0], \"mcu\") == 0)\n       {\n-\tfor (i = ARRAY_SIZE (msp430_mcu_data); i--;)\n-\t  if (strcasecmp (argv[argc - 1], msp430_mcu_data[i].name) == 0)\n+\tmsp430_extract_mcu_data (argv[argc - 1]);\n+\tif (extracted_mcu_data.name != NULL)\n \t    {\n-\t      switch (msp430_mcu_data[i].hwmpy)\n+\t      switch (extracted_mcu_data.hwmpy)\n \t\t{\n \t\tcase 0: return \"-lmul_none\";\n \t\tcase 2:\n \t\tcase 1: return \"-lmul_16\";\n \t\tcase 4: return \"-lmul_32\";\n \t\tcase 8: return \"-lmul_f5\";\n \t\tdefault:\n-\t\t  error (\"unrecognized hwpy field in msp430_mcu_data[%d]: %d\",\n-\t\t\t i, msp430_mcu_data[i].hwmpy);\n+\t\t\t/* We have already checked the hwmpy values for\n+\t\t\t   validity in msp430_extract_mcu_data.  */\n+\t\t\tgcc_unreachable ();\n \t\t  break;\n \t\t}\n \t    }"}, {"sha": "c5faff804874d596346f7113882f1cca2f3ead89", "filename": "gcc/config/msp430/msp430-devices.c", "status": "added", "additions": 697, "deletions": 0, "changes": 697, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430-devices.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430-devices.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430-devices.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,697 @@\n+/* Subroutines used for reading MCU data on TI MSP430 processors.\n+   Copyright (C) 2019 Free Software Foundation, Inc.\n+   Contributed by Jozef Lawrynowicz  <jozef.l@mittosystems.com>.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   GCC is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING3.  If not see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+#include \"config.h\"\n+#include \"system.h\"\n+#include \"coretypes.h\"\n+#include \"backend.h\"\n+#include \"target.h\"\n+#include \"tree.h\"\n+#include \"memmodel.h\"\n+#include \"diagnostic-core.h\"\n+#include \"langhooks.h\"\n+#include \"builtins.h\"\n+#include \"intl.h\"\n+#include \"msp430-devices.h\"\n+\n+struct t_msp430_mcu_data extracted_mcu_data;\n+/* Initialized at the bottom of this file.  */\n+extern struct t_msp430_mcu_data hard_msp430_mcu_data[605];\n+\n+/* Main entry point to load the MCU data for the given -mmcu into\n+   extracted_mcu_data.  hard_msp430_mcu_data (initialized at the bottom of this\n+   file) is searched for the MCU name.\n+   This function only needs to be executed once, but it can be first called\n+   from a number of different locations.  */\n+void\n+msp430_extract_mcu_data (const char * mcu_name)\n+{\n+  static int executed = 0;\n+  int i;\n+  if (mcu_name == NULL || executed == 1)\n+    return;\n+  executed = 1;\n+  /* FIXME: This array is alpha sorted - we could use a binary search.  */\n+  for (i = ARRAY_SIZE (hard_msp430_mcu_data); i--;)\n+    if (strcasecmp (mcu_name, hard_msp430_mcu_data[i].name) == 0)\n+      {\n+\textracted_mcu_data = hard_msp430_mcu_data[i];\n+\tbreak;\n+      }\n+  /* Validation checks.  */\n+  if (extracted_mcu_data.name != NULL)\n+    {\n+      switch (extracted_mcu_data.hwmpy)\n+\t{\n+\tcase 0:\n+\tcase 1:\n+\tcase 2:\n+\tcase 4:\n+\tcase 8: break;\n+\tdefault:\n+\t\terror (\"unrecognized %<hwmpy%> field in \"\n+\t\t       \"%<hard_msp430_mcu_data[%d]%>: %qd\", i,\n+\t\t       hard_msp430_mcu_data[i].hwmpy);\n+\t\tbreak;\n+\t}\n+      switch (extracted_mcu_data.revision)\n+\t{\n+\tcase 0:\n+\tcase 1:\n+\tcase 2: break;\n+\tdefault:\n+\t\terror (\"unrecognized %<revision%> field in \"\n+\t\t       \"%<hard_msp430_mcu_data[%d]%>: %qd\", i,\n+\t\t       hard_msp430_mcu_data[i].revision);\n+\t}\n+    }\n+}\n+\n+/* The data in this structure has been extracted from version 1.194 of the\n+   devices.csv file released by TI in September 2016.  */\n+\n+struct t_msp430_mcu_data hard_msp430_mcu_data[605] =\n+{\n+  { \"cc430f5123\",2,8 },\n+  { \"cc430f5125\",2,8 },\n+  { \"cc430f5133\",2,8 },\n+  { \"cc430f5135\",2,8 },\n+  { \"cc430f5137\",2,8 },\n+  { \"cc430f5143\",2,8 },\n+  { \"cc430f5145\",2,8 },\n+  { \"cc430f5147\",2,8 },\n+  { \"cc430f6125\",2,8 },\n+  { \"cc430f6126\",2,8 },\n+  { \"cc430f6127\",2,8 },\n+  { \"cc430f6135\",2,8 },\n+  { \"cc430f6137\",2,8 },\n+  { \"cc430f6143\",2,8 },\n+  { \"cc430f6145\",2,8 },\n+  { \"cc430f6147\",2,8 },\n+  { \"msp430afe221\",0,2 },\n+  { \"msp430afe222\",0,2 },\n+  { \"msp430afe223\",0,2 },\n+  { \"msp430afe231\",0,2 },\n+  { \"msp430afe232\",0,2 },\n+  { \"msp430afe233\",0,2 },\n+  { \"msp430afe251\",0,2 },\n+  { \"msp430afe252\",0,2 },\n+  { \"msp430afe253\",0,2 },\n+  { \"msp430bt5190\",2,8 },\n+  { \"msp430c091\",0,0 },\n+  { \"msp430c092\",0,0 },\n+  { \"msp430c111\",0,0 },\n+  { \"msp430c1111\",0,0 },\n+  { \"msp430c112\",0,0 },\n+  { \"msp430c1121\",0,0 },\n+  { \"msp430c1331\",0,0 },\n+  { \"msp430c1351\",0,0 },\n+  { \"msp430c311s\",0,0 },\n+  { \"msp430c312\",0,0 },\n+  { \"msp430c313\",0,0 },\n+  { \"msp430c314\",0,0 },\n+  { \"msp430c315\",0,0 },\n+  { \"msp430c323\",0,0 },\n+  { \"msp430c325\",0,0 },\n+  { \"msp430c336\",0,1 },\n+  { \"msp430c337\",0,1 },\n+  { \"msp430c412\",0,0 },\n+  { \"msp430c413\",0,0 },\n+  { \"msp430cg4616\",1,1 },\n+  { \"msp430cg4617\",1,1 },\n+  { \"msp430cg4618\",1,1 },\n+  { \"msp430cg4619\",1,1 },\n+  { \"msp430e112\",0,0 },\n+  { \"msp430e313\",0,0 },\n+  { \"msp430e315\",0,0 },\n+  { \"msp430e325\",0,0 },\n+  { \"msp430e337\",0,1 },\n+  { \"msp430f110\",0,0 },\n+  { \"msp430f1101\",0,0 },\n+  { \"msp430f1101a\",0,0 },\n+  { \"msp430f1111\",0,0 },\n+  { \"msp430f1111a\",0,0 },\n+  { \"msp430f112\",0,0 },\n+  { \"msp430f1121\",0,0 },\n+  { \"msp430f1121a\",0,0 },\n+  { \"msp430f1122\",0,0 },\n+  { \"msp430f1132\",0,0 },\n+  { \"msp430f122\",0,0 },\n+  { \"msp430f1222\",0,0 },\n+  { \"msp430f123\",0,0 },\n+  { \"msp430f1232\",0,0 },\n+  { \"msp430f133\",0,0 },\n+  { \"msp430f135\",0,0 },\n+  { \"msp430f147\",0,1 },\n+  { \"msp430f1471\",0,1 },\n+  { \"msp430f148\",0,1 },\n+  { \"msp430f1481\",0,1 },\n+  { \"msp430f149\",0,1 },\n+  { \"msp430f1491\",0,1 },\n+  { \"msp430f155\",0,0 },\n+  { \"msp430f156\",0,0 },\n+  { \"msp430f157\",0,0 },\n+  { \"msp430f1610\",0,1 },\n+  { \"msp430f1611\",0,1 },\n+  { \"msp430f1612\",0,1 },\n+  { \"msp430f167\",0,1 },\n+  { \"msp430f168\",0,1 },\n+  { \"msp430f169\",0,1 },\n+  { \"msp430f2001\",0,0 },\n+  { \"msp430f2002\",0,0 },\n+  { \"msp430f2003\",0,0 },\n+  { \"msp430f2011\",0,0 },\n+  { \"msp430f2012\",0,0 },\n+  { \"msp430f2013\",0,0 },\n+  { \"msp430f2101\",0,0 },\n+  { \"msp430f2111\",0,0 },\n+  { \"msp430f2112\",0,0 },\n+  { \"msp430f2121\",0,0 },\n+  { \"msp430f2122\",0,0 },\n+  { \"msp430f2131\",0,0 },\n+  { \"msp430f2132\",0,0 },\n+  { \"msp430f2232\",0,0 },\n+  { \"msp430f2234\",0,0 },\n+  { \"msp430f2252\",0,0 },\n+  { \"msp430f2254\",0,0 },\n+  { \"msp430f2272\",0,0 },\n+  { \"msp430f2274\",0,0 },\n+  { \"msp430f233\",0,2 },\n+  { \"msp430f2330\",0,2 },\n+  { \"msp430f235\",0,2 },\n+  { \"msp430f2350\",0,2 },\n+  { \"msp430f2370\",0,2 },\n+  { \"msp430f2410\",0,2 },\n+  { \"msp430f2416\",1,2 },\n+  { \"msp430f2417\",1,2 },\n+  { \"msp430f2418\",1,2 },\n+  { \"msp430f2419\",1,2 },\n+  { \"msp430f247\",0,2 },\n+  { \"msp430f2471\",0,2 },\n+  { \"msp430f248\",0,2 },\n+  { \"msp430f2481\",0,2 },\n+  { \"msp430f249\",0,2 },\n+  { \"msp430f2491\",0,2 },\n+  { \"msp430f2616\",1,2 },\n+  { \"msp430f2617\",1,2 },\n+  { \"msp430f2618\",1,2 },\n+  { \"msp430f2619\",1,2 },\n+  { \"msp430f412\",0,0 },\n+  { \"msp430f413\",0,0 },\n+  { \"msp430f4132\",0,0 },\n+  { \"msp430f415\",0,0 },\n+  { \"msp430f4152\",0,0 },\n+  { \"msp430f417\",0,0 },\n+  { \"msp430f423\",0,1 },\n+  { \"msp430f423a\",0,1 },\n+  { \"msp430f425\",0,1 },\n+  { \"msp430f4250\",0,0 },\n+  { \"msp430f425a\",0,1 },\n+  { \"msp430f4260\",0,0 },\n+  { \"msp430f427\",0,1 },\n+  { \"msp430f4270\",0,0 },\n+  { \"msp430f427a\",0,1 },\n+  { \"msp430f435\",0,0 },\n+  { \"msp430f4351\",0,0 },\n+  { \"msp430f436\",0,0 },\n+  { \"msp430f4361\",0,0 },\n+  { \"msp430f437\",0,0 },\n+  { \"msp430f4371\",0,0 },\n+  { \"msp430f438\",0,0 },\n+  { \"msp430f439\",0,0 },\n+  { \"msp430f447\",0,1 },\n+  { \"msp430f448\",0,1 },\n+  { \"msp430f4481\",0,1 },\n+  { \"msp430f449\",0,1 },\n+  { \"msp430f4491\",0,1 },\n+  { \"msp430f4616\",1,1 },\n+  { \"msp430f46161\",1,1 },\n+  { \"msp430f4617\",1,1 },\n+  { \"msp430f46171\",1,1 },\n+  { \"msp430f4618\",1,1 },\n+  { \"msp430f46181\",1,1 },\n+  { \"msp430f4619\",1,1 },\n+  { \"msp430f46191\",1,1 },\n+  { \"msp430f47126\",1,4 },\n+  { \"msp430f47127\",1,4 },\n+  { \"msp430f47163\",1,4 },\n+  { \"msp430f47166\",1,4 },\n+  { \"msp430f47167\",1,4 },\n+  { \"msp430f47173\",1,4 },\n+  { \"msp430f47176\",1,4 },\n+  { \"msp430f47177\",1,4 },\n+  { \"msp430f47183\",1,4 },\n+  { \"msp430f47186\",1,4 },\n+  { \"msp430f47187\",1,4 },\n+  { \"msp430f47193\",1,4 },\n+  { \"msp430f47196\",1,4 },\n+  { \"msp430f47197\",1,4 },\n+  { \"msp430f477\",0,0 },\n+  { \"msp430f478\",0,0 },\n+  { \"msp430f4783\",0,4 },\n+  { \"msp430f4784\",0,4 },\n+  { \"msp430f479\",0,0 },\n+  { \"msp430f4793\",0,4 },\n+  { \"msp430f4794\",0,4 },\n+  { \"msp430f5131\",2,8 },\n+  { \"msp430f5132\",2,8 },\n+  { \"msp430f5151\",2,8 },\n+  { \"msp430f5152\",2,8 },\n+  { \"msp430f5171\",2,8 },\n+  { \"msp430f5172\",2,8 },\n+  { \"msp430f5212\",2,8 },\n+  { \"msp430f5213\",2,8 },\n+  { \"msp430f5214\",2,8 },\n+  { \"msp430f5217\",2,8 },\n+  { \"msp430f5218\",2,8 },\n+  { \"msp430f5219\",2,8 },\n+  { \"msp430f5222\",2,8 },\n+  { \"msp430f5223\",2,8 },\n+  { \"msp430f5224\",2,8 },\n+  { \"msp430f5227\",2,8 },\n+  { \"msp430f5228\",2,8 },\n+  { \"msp430f5229\",2,8 },\n+  { \"msp430f5232\",2,8 },\n+  { \"msp430f5234\",2,8 },\n+  { \"msp430f5237\",2,8 },\n+  { \"msp430f5239\",2,8 },\n+  { \"msp430f5242\",2,8 },\n+  { \"msp430f5244\",2,8 },\n+  { \"msp430f5247\",2,8 },\n+  { \"msp430f5249\",2,8 },\n+  { \"msp430f5252\",2,8 },\n+  { \"msp430f5253\",2,8 },\n+  { \"msp430f5254\",2,8 },\n+  { \"msp430f5255\",2,8 },\n+  { \"msp430f5256\",2,8 },\n+  { \"msp430f5257\",2,8 },\n+  { \"msp430f5258\",2,8 },\n+  { \"msp430f5259\",2,8 },\n+  { \"msp430f5304\",2,8 },\n+  { \"msp430f5308\",2,8 },\n+  { \"msp430f5309\",2,8 },\n+  { \"msp430f5310\",2,8 },\n+  { \"msp430f5324\",2,8 },\n+  { \"msp430f5325\",2,8 },\n+  { \"msp430f5326\",2,8 },\n+  { \"msp430f5327\",2,8 },\n+  { \"msp430f5328\",2,8 },\n+  { \"msp430f5329\",2,8 },\n+  { \"msp430f5333\",2,8 },\n+  { \"msp430f5335\",2,8 },\n+  { \"msp430f5336\",2,8 },\n+  { \"msp430f5338\",2,8 },\n+  { \"msp430f5340\",2,8 },\n+  { \"msp430f5341\",2,8 },\n+  { \"msp430f5342\",2,8 },\n+  { \"msp430f5358\",2,8 },\n+  { \"msp430f5359\",2,8 },\n+  { \"msp430f5418\",2,8 },\n+  { \"msp430f5418a\",2,8 },\n+  { \"msp430f5419\",2,8 },\n+  { \"msp430f5419a\",2,8 },\n+  { \"msp430f5435\",2,8 },\n+  { \"msp430f5435a\",2,8 },\n+  { \"msp430f5436\",2,8 },\n+  { \"msp430f5436a\",2,8 },\n+  { \"msp430f5437\",2,8 },\n+  { \"msp430f5437a\",2,8 },\n+  { \"msp430f5438\",2,8 },\n+  { \"msp430f5438a\",2,8 },\n+  { \"msp430f5500\",2,8 },\n+  { \"msp430f5501\",2,8 },\n+  { \"msp430f5502\",2,8 },\n+  { \"msp430f5503\",2,8 },\n+  { \"msp430f5504\",2,8 },\n+  { \"msp430f5505\",2,8 },\n+  { \"msp430f5506\",2,8 },\n+  { \"msp430f5507\",2,8 },\n+  { \"msp430f5508\",2,8 },\n+  { \"msp430f5509\",2,8 },\n+  { \"msp430f5510\",2,8 },\n+  { \"msp430f5513\",2,8 },\n+  { \"msp430f5514\",2,8 },\n+  { \"msp430f5515\",2,8 },\n+  { \"msp430f5517\",2,8 },\n+  { \"msp430f5519\",2,8 },\n+  { \"msp430f5521\",2,8 },\n+  { \"msp430f5522\",2,8 },\n+  { \"msp430f5524\",2,8 },\n+  { \"msp430f5525\",2,8 },\n+  { \"msp430f5526\",2,8 },\n+  { \"msp430f5527\",2,8 },\n+  { \"msp430f5528\",2,8 },\n+  { \"msp430f5529\",2,8 },\n+  { \"msp430f5630\",2,8 },\n+  { \"msp430f5631\",2,8 },\n+  { \"msp430f5632\",2,8 },\n+  { \"msp430f5633\",2,8 },\n+  { \"msp430f5634\",2,8 },\n+  { \"msp430f5635\",2,8 },\n+  { \"msp430f5636\",2,8 },\n+  { \"msp430f5637\",2,8 },\n+  { \"msp430f5638\",2,8 },\n+  { \"msp430f5658\",2,8 },\n+  { \"msp430f5659\",2,8 },\n+  { \"msp430f5xx_6xxgeneric\",2,8 },\n+  { \"msp430f6433\",2,8 },\n+  { \"msp430f6435\",2,8 },\n+  { \"msp430f6436\",2,8 },\n+  { \"msp430f6438\",2,8 },\n+  { \"msp430f6458\",2,8 },\n+  { \"msp430f6459\",2,8 },\n+  { \"msp430f6630\",2,8 },\n+  { \"msp430f6631\",2,8 },\n+  { \"msp430f6632\",2,8 },\n+  { \"msp430f6633\",2,8 },\n+  { \"msp430f6634\",2,8 },\n+  { \"msp430f6635\",2,8 },\n+  { \"msp430f6636\",2,8 },\n+  { \"msp430f6637\",2,8 },\n+  { \"msp430f6638\",2,8 },\n+  { \"msp430f6658\",2,8 },\n+  { \"msp430f6659\",2,8 },\n+  { \"msp430f6720\",2,8 },\n+  { \"msp430f6720a\",2,8 },\n+  { \"msp430f6721\",2,8 },\n+  { \"msp430f6721a\",2,8 },\n+  { \"msp430f6723\",2,8 },\n+  { \"msp430f6723a\",2,8 },\n+  { \"msp430f6724\",2,8 },\n+  { \"msp430f6724a\",2,8 },\n+  { \"msp430f6725\",2,8 },\n+  { \"msp430f6725a\",2,8 },\n+  { \"msp430f6726\",2,8 },\n+  { \"msp430f6726a\",2,8 },\n+  { \"msp430f6730\",2,8 },\n+  { \"msp430f6730a\",2,8 },\n+  { \"msp430f6731\",2,8 },\n+  { \"msp430f6731a\",2,8 },\n+  { \"msp430f6733\",2,8 },\n+  { \"msp430f6733a\",2,8 },\n+  { \"msp430f6734\",2,8 },\n+  { \"msp430f6734a\",2,8 },\n+  { \"msp430f6735\",2,8 },\n+  { \"msp430f6735a\",2,8 },\n+  { \"msp430f6736\",2,8 },\n+  { \"msp430f6736a\",2,8 },\n+  { \"msp430f6745\",2,8 },\n+  { \"msp430f67451\",2,8 },\n+  { \"msp430f67451a\",2,8 },\n+  { \"msp430f6745a\",2,8 },\n+  { \"msp430f6746\",2,8 },\n+  { \"msp430f67461\",2,8 },\n+  { \"msp430f67461a\",2,8 },\n+  { \"msp430f6746a\",2,8 },\n+  { \"msp430f6747\",2,8 },\n+  { \"msp430f67471\",2,8 },\n+  { \"msp430f67471a\",2,8 },\n+  { \"msp430f6747a\",2,8 },\n+  { \"msp430f6748\",2,8 },\n+  { \"msp430f67481\",2,8 },\n+  { \"msp430f67481a\",2,8 },\n+  { \"msp430f6748a\",2,8 },\n+  { \"msp430f6749\",2,8 },\n+  { \"msp430f67491\",2,8 },\n+  { \"msp430f67491a\",2,8 },\n+  { \"msp430f6749a\",2,8 },\n+  { \"msp430f67621\",2,8 },\n+  { \"msp430f67621a\",2,8 },\n+  { \"msp430f67641\",2,8 },\n+  { \"msp430f67641a\",2,8 },\n+  { \"msp430f6765\",2,8 },\n+  { \"msp430f67651\",2,8 },\n+  { \"msp430f67651a\",2,8 },\n+  { \"msp430f6765a\",2,8 },\n+  { \"msp430f6766\",2,8 },\n+  { \"msp430f67661\",2,8 },\n+  { \"msp430f67661a\",2,8 },\n+  { \"msp430f6766a\",2,8 },\n+  { \"msp430f6767\",2,8 },\n+  { \"msp430f67671\",2,8 },\n+  { \"msp430f67671a\",2,8 },\n+  { \"msp430f6767a\",2,8 },\n+  { \"msp430f6768\",2,8 },\n+  { \"msp430f67681\",2,8 },\n+  { \"msp430f67681a\",2,8 },\n+  { \"msp430f6768a\",2,8 },\n+  { \"msp430f6769\",2,8 },\n+  { \"msp430f67691\",2,8 },\n+  { \"msp430f67691a\",2,8 },\n+  { \"msp430f6769a\",2,8 },\n+  { \"msp430f6775\",2,8 },\n+  { \"msp430f67751\",2,8 },\n+  { \"msp430f67751a\",2,8 },\n+  { \"msp430f6775a\",2,8 },\n+  { \"msp430f6776\",2,8 },\n+  { \"msp430f67761\",2,8 },\n+  { \"msp430f67761a\",2,8 },\n+  { \"msp430f6776a\",2,8 },\n+  { \"msp430f6777\",2,8 },\n+  { \"msp430f67771\",2,8 },\n+  { \"msp430f67771a\",2,8 },\n+  { \"msp430f6777a\",2,8 },\n+  { \"msp430f6778\",2,8 },\n+  { \"msp430f67781\",2,8 },\n+  { \"msp430f67781a\",2,8 },\n+  { \"msp430f6778a\",2,8 },\n+  { \"msp430f6779\",2,8 },\n+  { \"msp430f67791\",2,8 },\n+  { \"msp430f67791a\",2,8 },\n+  { \"msp430f6779a\",2,8 },\n+  { \"msp430fe423\",0,0 },\n+  { \"msp430fe4232\",0,0 },\n+  { \"msp430fe423a\",0,0 },\n+  { \"msp430fe4242\",0,0 },\n+  { \"msp430fe425\",0,0 },\n+  { \"msp430fe4252\",0,0 },\n+  { \"msp430fe425a\",0,0 },\n+  { \"msp430fe427\",0,0 },\n+  { \"msp430fe4272\",0,0 },\n+  { \"msp430fe427a\",0,0 },\n+  { \"msp430fg4250\",0,0 },\n+  { \"msp430fg4260\",0,0 },\n+  { \"msp430fg4270\",0,0 },\n+  { \"msp430fg437\",0,0 },\n+  { \"msp430fg438\",0,0 },\n+  { \"msp430fg439\",0,0 },\n+  { \"msp430fg4616\",1,1 },\n+  { \"msp430fg4617\",1,1 },\n+  { \"msp430fg4618\",1,1 },\n+  { \"msp430fg4619\",1,1 },\n+  { \"msp430fg477\",0,0 },\n+  { \"msp430fg478\",0,0 },\n+  { \"msp430fg479\",0,0 },\n+  { \"msp430fg6425\",2,8 },\n+  { \"msp430fg6426\",2,8 },\n+  { \"msp430fg6625\",2,8 },\n+  { \"msp430fg6626\",2,8 },\n+  { \"msp430fr2032\",2,0 },\n+  { \"msp430fr2033\",2,0 },\n+  { \"msp430fr2110\",2,0 },\n+  { \"msp430fr2111\",2,0 },\n+  { \"msp430fr2310\",2,0 },\n+  { \"msp430fr2311\",2,0 },\n+  { \"msp430fr2433\",2,8 },\n+  { \"msp430fr2532\",2,8 },\n+  { \"msp430fr2533\",2,8 },\n+  { \"msp430fr2632\",2,8 },\n+  { \"msp430fr2633\",2,8 },\n+  { \"msp430fr2xx_4xxgeneric\",2,8 },\n+  { \"msp430fr4131\",2,0 },\n+  { \"msp430fr4132\",2,0 },\n+  { \"msp430fr4133\",2,0 },\n+  { \"msp430fr5720\",2,8 },\n+  { \"msp430fr5721\",2,8 },\n+  { \"msp430fr5722\",2,8 },\n+  { \"msp430fr5723\",2,8 },\n+  { \"msp430fr5724\",2,8 },\n+  { \"msp430fr5725\",2,8 },\n+  { \"msp430fr5726\",2,8 },\n+  { \"msp430fr5727\",2,8 },\n+  { \"msp430fr5728\",2,8 },\n+  { \"msp430fr5729\",2,8 },\n+  { \"msp430fr5730\",2,8 },\n+  { \"msp430fr5731\",2,8 },\n+  { \"msp430fr5732\",2,8 },\n+  { \"msp430fr5733\",2,8 },\n+  { \"msp430fr5734\",2,8 },\n+  { \"msp430fr5735\",2,8 },\n+  { \"msp430fr5736\",2,8 },\n+  { \"msp430fr5737\",2,8 },\n+  { \"msp430fr5738\",2,8 },\n+  { \"msp430fr5739\",2,8 },\n+  { \"msp430fr57xxgeneric\",2,8 },\n+  { \"msp430fr5847\",2,8 },\n+  { \"msp430fr58471\",2,8 },\n+  { \"msp430fr5848\",2,8 },\n+  { \"msp430fr5849\",2,8 },\n+  { \"msp430fr5857\",2,8 },\n+  { \"msp430fr5858\",2,8 },\n+  { \"msp430fr5859\",2,8 },\n+  { \"msp430fr5867\",2,8 },\n+  { \"msp430fr58671\",2,8 },\n+  { \"msp430fr5868\",2,8 },\n+  { \"msp430fr5869\",2,8 },\n+  { \"msp430fr5870\",2,8 },\n+  { \"msp430fr5872\",2,8 },\n+  { \"msp430fr58721\",2,8 },\n+  { \"msp430fr5887\",2,8 },\n+  { \"msp430fr5888\",2,8 },\n+  { \"msp430fr5889\",2,8 },\n+  { \"msp430fr58891\",2,8 },\n+  { \"msp430fr5922\",2,8 },\n+  { \"msp430fr59221\",2,8 },\n+  { \"msp430fr5947\",2,8 },\n+  { \"msp430fr59471\",2,8 },\n+  { \"msp430fr5948\",2,8 },\n+  { \"msp430fr5949\",2,8 },\n+  { \"msp430fr5957\",2,8 },\n+  { \"msp430fr5958\",2,8 },\n+  { \"msp430fr5959\",2,8 },\n+  { \"msp430fr5962\",2,8 },\n+  { \"msp430fr5964\",2,8 },\n+  { \"msp430fr5967\",2,8 },\n+  { \"msp430fr5968\",2,8 },\n+  { \"msp430fr5969\",2,8 },\n+  { \"msp430fr59691\",2,8 },\n+  { \"msp430fr5970\",2,8 },\n+  { \"msp430fr5972\",2,8 },\n+  { \"msp430fr59721\",2,8 },\n+  { \"msp430fr5986\",2,8 },\n+  { \"msp430fr5987\",2,8 },\n+  { \"msp430fr5988\",2,8 },\n+  { \"msp430fr5989\",2,8 },\n+  { \"msp430fr59891\",2,8 },\n+  { \"msp430fr5992\",2,8 },\n+  { \"msp430fr5994\",2,8 },\n+  { \"msp430fr59941\",2,8 },\n+  { \"msp430fr5xx_6xxgeneric\",2,8 },\n+  { \"msp430fr6820\",2,8 },\n+  { \"msp430fr6822\",2,8 },\n+  { \"msp430fr68221\",2,8 },\n+  { \"msp430fr6870\",2,8 },\n+  { \"msp430fr6872\",2,8 },\n+  { \"msp430fr68721\",2,8 },\n+  { \"msp430fr6877\",2,8 },\n+  { \"msp430fr6879\",2,8 },\n+  { \"msp430fr68791\",2,8 },\n+  { \"msp430fr6887\",2,8 },\n+  { \"msp430fr6888\",2,8 },\n+  { \"msp430fr6889\",2,8 },\n+  { \"msp430fr68891\",2,8 },\n+  { \"msp430fr6920\",2,8 },\n+  { \"msp430fr6922\",2,8 },\n+  { \"msp430fr69221\",2,8 },\n+  { \"msp430fr6927\",2,8 },\n+  { \"msp430fr69271\",2,8 },\n+  { \"msp430fr6928\",2,8 },\n+  { \"msp430fr6970\",2,8 },\n+  { \"msp430fr6972\",2,8 },\n+  { \"msp430fr69721\",2,8 },\n+  { \"msp430fr6977\",2,8 },\n+  { \"msp430fr6979\",2,8 },\n+  { \"msp430fr69791\",2,8 },\n+  { \"msp430fr6987\",2,8 },\n+  { \"msp430fr6988\",2,8 },\n+  { \"msp430fr6989\",2,8 },\n+  { \"msp430fr69891\",2,8 },\n+  { \"msp430fw423\",0,0 },\n+  { \"msp430fw425\",0,0 },\n+  { \"msp430fw427\",0,0 },\n+  { \"msp430fw428\",0,0 },\n+  { \"msp430fw429\",0,0 },\n+  { \"msp430g2001\",0,0 },\n+  { \"msp430g2101\",0,0 },\n+  { \"msp430g2102\",0,0 },\n+  { \"msp430g2111\",0,0 },\n+  { \"msp430g2112\",0,0 },\n+  { \"msp430g2113\",0,0 },\n+  { \"msp430g2121\",0,0 },\n+  { \"msp430g2131\",0,0 },\n+  { \"msp430g2132\",0,0 },\n+  { \"msp430g2152\",0,0 },\n+  { \"msp430g2153\",0,0 },\n+  { \"msp430g2201\",0,0 },\n+  { \"msp430g2202\",0,0 },\n+  { \"msp430g2203\",0,0 },\n+  { \"msp430g2210\",0,0 },\n+  { \"msp430g2211\",0,0 },\n+  { \"msp430g2212\",0,0 },\n+  { \"msp430g2213\",0,0 },\n+  { \"msp430g2221\",0,0 },\n+  { \"msp430g2230\",0,0 },\n+  { \"msp430g2231\",0,0 },\n+  { \"msp430g2232\",0,0 },\n+  { \"msp430g2233\",0,0 },\n+  { \"msp430g2252\",0,0 },\n+  { \"msp430g2253\",0,0 },\n+  { \"msp430g2302\",0,0 },\n+  { \"msp430g2303\",0,0 },\n+  { \"msp430g2312\",0,0 },\n+  { \"msp430g2313\",0,0 },\n+  { \"msp430g2332\",0,0 },\n+  { \"msp430g2333\",0,0 },\n+  { \"msp430g2352\",0,0 },\n+  { \"msp430g2353\",0,0 },\n+  { \"msp430g2402\",0,0 },\n+  { \"msp430g2403\",0,0 },\n+  { \"msp430g2412\",0,0 },\n+  { \"msp430g2413\",0,0 },\n+  { \"msp430g2432\",0,0 },\n+  { \"msp430g2433\",0,0 },\n+  { \"msp430g2444\",0,0 },\n+  { \"msp430g2452\",0,0 },\n+  { \"msp430g2453\",0,0 },\n+  { \"msp430g2513\",0,0 },\n+  { \"msp430g2533\",0,0 },\n+  { \"msp430g2544\",0,0 },\n+  { \"msp430g2553\",0,0 },\n+  { \"msp430g2744\",0,0 },\n+  { \"msp430g2755\",0,0 },\n+  { \"msp430g2855\",0,0 },\n+  { \"msp430g2955\",0,0 },\n+  { \"msp430i2020\",0,2 },\n+  { \"msp430i2021\",0,2 },\n+  { \"msp430i2030\",0,2 },\n+  { \"msp430i2031\",0,2 },\n+  { \"msp430i2040\",0,2 },\n+  { \"msp430i2041\",0,2 },\n+  { \"msp430i2xxgeneric\",0,2 },\n+  { \"msp430l092\",0,0 },\n+  { \"msp430p112\",0,0 },\n+  { \"msp430p313\",0,0 },\n+  { \"msp430p315\",0,0 },\n+  { \"msp430p315s\",0,0 },\n+  { \"msp430p325\",0,0 },\n+  { \"msp430p337\",0,1 },\n+  { \"msp430sl5438a\",2,8 },\n+  { \"msp430tch5e\",0,0 },\n+  { \"msp430xgeneric\",2,8 },\n+  { \"rf430f5144\",2,8 },\n+  { \"rf430f5155\",2,8 },\n+  { \"rf430f5175\",2,8 },\n+  { \"rf430frl152h\",0,0 },\n+  { \"rf430frl152h_rom\",0,0 },\n+  { \"rf430frl153h\",0,0 },\n+  { \"rf430frl153h_rom\",0,0 },\n+  { \"rf430frl154h\",0,0 },\n+  { \"rf430frl154h_rom\",0,0 }\n+};"}, {"sha": "08ae1adf4edaf96ca2b871fa31fd9c4be8177a1b", "filename": "gcc/config/msp430/msp430-devices.h", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430-devices.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430-devices.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430-devices.h?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,31 @@\n+/* Definitions of subroutines used for reading MCU data on TI MSP430 processors.\n+   Copyright (C) 2019 Free Software Foundation, Inc.\n+   Contributed by Jozef Lawrynowicz  <jozef.l@mittosystems.com>.\n+\n+   This file is part of GCC.\n+\n+   GCC is free software; you can redistribute it and/or modify\n+   it under the terms of the GNU General Public License as published by\n+   the Free Software Foundation; either version 3, or (at your option)\n+   any later version.\n+\n+   GCC is distributed in the hope that it will be useful,\n+   but WITHOUT ANY WARRANTY; without even the implied warranty of\n+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+   GNU General Public License for more details.\n+\n+   You should have received a copy of the GNU General Public License\n+   along with GCC; see the file COPYING3.  If not see\n+   <http://www.gnu.org/licenses/>.  */\n+\n+struct t_msp430_mcu_data\n+{\n+  const char * name;\n+  unsigned int revision; /* 0=> MSP430, 1=>MSP430X, 2=> MSP430Xv2.  */\n+  unsigned int hwmpy;    /* 0=>none, 1=>16-bit, 2=>16-bit w/sign extend.  */\n+\t\t\t /* 4=>32-bit, 8=> 32-bit (5xx).  */\n+};\n+\n+extern struct t_msp430_mcu_data extracted_mcu_data;\n+\n+void msp430_extract_mcu_data (const char * mcu_name);"}, {"sha": "49fc26238a520ddc3e2448498b74f1aca4c01ad0", "filename": "gcc/config/msp430/msp430.c", "status": "modified", "additions": 26, "deletions": 654, "changes": 680, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -45,6 +45,7 @@\n #include \"langhooks.h\"\n #include \"builtins.h\"\n #include \"intl.h\"\n+#include \"msp430-devices.h\"\n \n /* This file should be included last.  */\n #include \"target-def.h\"\n@@ -95,627 +96,6 @@ msp430_init_machine_status (void)\n #undef  TARGET_OPTION_OVERRIDE\n #define TARGET_OPTION_OVERRIDE\t\tmsp430_option_override\n \n-/* This is a copy of the same data structure found in gas/config/tc-msp430.c\n-   Also another (sort-of) copy can be found in gcc/config/msp430/t-msp430\n-   Keep these three structures in sync.\n-   The data in this structure has been extracted from version 1.194 of the\n-   devices.csv file released by TI in September 2016.  */\n-\n-struct msp430_mcu_data\n-{\n-  const char * name;\n-  unsigned int revision; /* 0=> MSP430, 1=>MSP430X, 2=> MSP430Xv2.  */\n-  unsigned int hwmpy;    /* 0=>none, 1=>16-bit, 2=>16-bit w/sign extend, 4=>32-bit, 8=> 32-bit (5xx).  */\n-}\n-msp430_mcu_data [] =\n-{\n-  { \"cc430f5123\",2,8 },\n-  { \"cc430f5125\",2,8 },\n-  { \"cc430f5133\",2,8 },\n-  { \"cc430f5135\",2,8 },\n-  { \"cc430f5137\",2,8 },\n-  { \"cc430f5143\",2,8 },\n-  { \"cc430f5145\",2,8 },\n-  { \"cc430f5147\",2,8 },\n-  { \"cc430f6125\",2,8 },\n-  { \"cc430f6126\",2,8 },\n-  { \"cc430f6127\",2,8 },\n-  { \"cc430f6135\",2,8 },\n-  { \"cc430f6137\",2,8 },\n-  { \"cc430f6143\",2,8 },\n-  { \"cc430f6145\",2,8 },\n-  { \"cc430f6147\",2,8 },\n-  { \"msp430afe221\",0,2 },\n-  { \"msp430afe222\",0,2 },\n-  { \"msp430afe223\",0,2 },\n-  { \"msp430afe231\",0,2 },\n-  { \"msp430afe232\",0,2 },\n-  { \"msp430afe233\",0,2 },\n-  { \"msp430afe251\",0,2 },\n-  { \"msp430afe252\",0,2 },\n-  { \"msp430afe253\",0,2 },\n-  { \"msp430bt5190\",2,8 },\n-  { \"msp430c091\",0,0 },\n-  { \"msp430c092\",0,0 },\n-  { \"msp430c111\",0,0 },\n-  { \"msp430c1111\",0,0 },\n-  { \"msp430c112\",0,0 },\n-  { \"msp430c1121\",0,0 },\n-  { \"msp430c1331\",0,0 },\n-  { \"msp430c1351\",0,0 },\n-  { \"msp430c311s\",0,0 },\n-  { \"msp430c312\",0,0 },\n-  { \"msp430c313\",0,0 },\n-  { \"msp430c314\",0,0 },\n-  { \"msp430c315\",0,0 },\n-  { \"msp430c323\",0,0 },\n-  { \"msp430c325\",0,0 },\n-  { \"msp430c336\",0,1 },\n-  { \"msp430c337\",0,1 },\n-  { \"msp430c412\",0,0 },\n-  { \"msp430c413\",0,0 },\n-  { \"msp430cg4616\",1,1 },\n-  { \"msp430cg4617\",1,1 },\n-  { \"msp430cg4618\",1,1 },\n-  { \"msp430cg4619\",1,1 },\n-  { \"msp430e112\",0,0 },\n-  { \"msp430e313\",0,0 },\n-  { \"msp430e315\",0,0 },\n-  { \"msp430e325\",0,0 },\n-  { \"msp430e337\",0,1 },\n-  { \"msp430f110\",0,0 },\n-  { \"msp430f1101\",0,0 },\n-  { \"msp430f1101a\",0,0 },\n-  { \"msp430f1111\",0,0 },\n-  { \"msp430f1111a\",0,0 },\n-  { \"msp430f112\",0,0 },\n-  { \"msp430f1121\",0,0 },\n-  { \"msp430f1121a\",0,0 },\n-  { \"msp430f1122\",0,0 },\n-  { \"msp430f1132\",0,0 },\n-  { \"msp430f122\",0,0 },\n-  { \"msp430f1222\",0,0 },\n-  { \"msp430f123\",0,0 },\n-  { \"msp430f1232\",0,0 },\n-  { \"msp430f133\",0,0 },\n-  { \"msp430f135\",0,0 },\n-  { \"msp430f147\",0,1 },\n-  { \"msp430f1471\",0,1 },\n-  { \"msp430f148\",0,1 },\n-  { \"msp430f1481\",0,1 },\n-  { \"msp430f149\",0,1 },\n-  { \"msp430f1491\",0,1 },\n-  { \"msp430f155\",0,0 },\n-  { \"msp430f156\",0,0 },\n-  { \"msp430f157\",0,0 },\n-  { \"msp430f1610\",0,1 },\n-  { \"msp430f1611\",0,1 },\n-  { \"msp430f1612\",0,1 },\n-  { \"msp430f167\",0,1 },\n-  { \"msp430f168\",0,1 },\n-  { \"msp430f169\",0,1 },\n-  { \"msp430f2001\",0,0 },\n-  { \"msp430f2002\",0,0 },\n-  { \"msp430f2003\",0,0 },\n-  { \"msp430f2011\",0,0 },\n-  { \"msp430f2012\",0,0 },\n-  { \"msp430f2013\",0,0 },\n-  { \"msp430f2101\",0,0 },\n-  { \"msp430f2111\",0,0 },\n-  { \"msp430f2112\",0,0 },\n-  { \"msp430f2121\",0,0 },\n-  { \"msp430f2122\",0,0 },\n-  { \"msp430f2131\",0,0 },\n-  { \"msp430f2132\",0,0 },\n-  { \"msp430f2232\",0,0 },\n-  { \"msp430f2234\",0,0 },\n-  { \"msp430f2252\",0,0 },\n-  { \"msp430f2254\",0,0 },\n-  { \"msp430f2272\",0,0 },\n-  { \"msp430f2274\",0,0 },\n-  { \"msp430f233\",0,2 },\n-  { \"msp430f2330\",0,2 },\n-  { \"msp430f235\",0,2 },\n-  { \"msp430f2350\",0,2 },\n-  { \"msp430f2370\",0,2 },\n-  { \"msp430f2410\",0,2 },\n-  { \"msp430f2416\",1,2 },\n-  { \"msp430f2417\",1,2 },\n-  { \"msp430f2418\",1,2 },\n-  { \"msp430f2419\",1,2 },\n-  { \"msp430f247\",0,2 },\n-  { \"msp430f2471\",0,2 },\n-  { \"msp430f248\",0,2 },\n-  { \"msp430f2481\",0,2 },\n-  { \"msp430f249\",0,2 },\n-  { \"msp430f2491\",0,2 },\n-  { \"msp430f2616\",1,2 },\n-  { \"msp430f2617\",1,2 },\n-  { \"msp430f2618\",1,2 },\n-  { \"msp430f2619\",1,2 },\n-  { \"msp430f412\",0,0 },\n-  { \"msp430f413\",0,0 },\n-  { \"msp430f4132\",0,0 },\n-  { \"msp430f415\",0,0 },\n-  { \"msp430f4152\",0,0 },\n-  { \"msp430f417\",0,0 },\n-  { \"msp430f423\",0,1 },\n-  { \"msp430f423a\",0,1 },\n-  { \"msp430f425\",0,1 },\n-  { \"msp430f4250\",0,0 },\n-  { \"msp430f425a\",0,1 },\n-  { \"msp430f4260\",0,0 },\n-  { \"msp430f427\",0,1 },\n-  { \"msp430f4270\",0,0 },\n-  { \"msp430f427a\",0,1 },\n-  { \"msp430f435\",0,0 },\n-  { \"msp430f4351\",0,0 },\n-  { \"msp430f436\",0,0 },\n-  { \"msp430f4361\",0,0 },\n-  { \"msp430f437\",0,0 },\n-  { \"msp430f4371\",0,0 },\n-  { \"msp430f438\",0,0 },\n-  { \"msp430f439\",0,0 },\n-  { \"msp430f447\",0,1 },\n-  { \"msp430f448\",0,1 },\n-  { \"msp430f4481\",0,1 },\n-  { \"msp430f449\",0,1 },\n-  { \"msp430f4491\",0,1 },\n-  { \"msp430f4616\",1,1 },\n-  { \"msp430f46161\",1,1 },\n-  { \"msp430f4617\",1,1 },\n-  { \"msp430f46171\",1,1 },\n-  { \"msp430f4618\",1,1 },\n-  { \"msp430f46181\",1,1 },\n-  { \"msp430f4619\",1,1 },\n-  { \"msp430f46191\",1,1 },\n-  { \"msp430f47126\",1,4 },\n-  { \"msp430f47127\",1,4 },\n-  { \"msp430f47163\",1,4 },\n-  { \"msp430f47166\",1,4 },\n-  { \"msp430f47167\",1,4 },\n-  { \"msp430f47173\",1,4 },\n-  { \"msp430f47176\",1,4 },\n-  { \"msp430f47177\",1,4 },\n-  { \"msp430f47183\",1,4 },\n-  { \"msp430f47186\",1,4 },\n-  { \"msp430f47187\",1,4 },\n-  { \"msp430f47193\",1,4 },\n-  { \"msp430f47196\",1,4 },\n-  { \"msp430f47197\",1,4 },\n-  { \"msp430f477\",0,0 },\n-  { \"msp430f478\",0,0 },\n-  { \"msp430f4783\",0,4 },\n-  { \"msp430f4784\",0,4 },\n-  { \"msp430f479\",0,0 },\n-  { \"msp430f4793\",0,4 },\n-  { \"msp430f4794\",0,4 },\n-  { \"msp430f5131\",2,8 },\n-  { \"msp430f5132\",2,8 },\n-  { \"msp430f5151\",2,8 },\n-  { \"msp430f5152\",2,8 },\n-  { \"msp430f5171\",2,8 },\n-  { \"msp430f5172\",2,8 },\n-  { \"msp430f5212\",2,8 },\n-  { \"msp430f5213\",2,8 },\n-  { \"msp430f5214\",2,8 },\n-  { \"msp430f5217\",2,8 },\n-  { \"msp430f5218\",2,8 },\n-  { \"msp430f5219\",2,8 },\n-  { \"msp430f5222\",2,8 },\n-  { \"msp430f5223\",2,8 },\n-  { \"msp430f5224\",2,8 },\n-  { \"msp430f5227\",2,8 },\n-  { \"msp430f5228\",2,8 },\n-  { \"msp430f5229\",2,8 },\n-  { \"msp430f5232\",2,8 },\n-  { \"msp430f5234\",2,8 },\n-  { \"msp430f5237\",2,8 },\n-  { \"msp430f5239\",2,8 },\n-  { \"msp430f5242\",2,8 },\n-  { \"msp430f5244\",2,8 },\n-  { \"msp430f5247\",2,8 },\n-  { \"msp430f5249\",2,8 },\n-  { \"msp430f5252\",2,8 },\n-  { \"msp430f5253\",2,8 },\n-  { \"msp430f5254\",2,8 },\n-  { \"msp430f5255\",2,8 },\n-  { \"msp430f5256\",2,8 },\n-  { \"msp430f5257\",2,8 },\n-  { \"msp430f5258\",2,8 },\n-  { \"msp430f5259\",2,8 },\n-  { \"msp430f5304\",2,8 },\n-  { \"msp430f5308\",2,8 },\n-  { \"msp430f5309\",2,8 },\n-  { \"msp430f5310\",2,8 },\n-  { \"msp430f5324\",2,8 },\n-  { \"msp430f5325\",2,8 },\n-  { \"msp430f5326\",2,8 },\n-  { \"msp430f5327\",2,8 },\n-  { \"msp430f5328\",2,8 },\n-  { \"msp430f5329\",2,8 },\n-  { \"msp430f5333\",2,8 },\n-  { \"msp430f5335\",2,8 },\n-  { \"msp430f5336\",2,8 },\n-  { \"msp430f5338\",2,8 },\n-  { \"msp430f5340\",2,8 },\n-  { \"msp430f5341\",2,8 },\n-  { \"msp430f5342\",2,8 },\n-  { \"msp430f5358\",2,8 },\n-  { \"msp430f5359\",2,8 },\n-  { \"msp430f5418\",2,8 },\n-  { \"msp430f5418a\",2,8 },\n-  { \"msp430f5419\",2,8 },\n-  { \"msp430f5419a\",2,8 },\n-  { \"msp430f5435\",2,8 },\n-  { \"msp430f5435a\",2,8 },\n-  { \"msp430f5436\",2,8 },\n-  { \"msp430f5436a\",2,8 },\n-  { \"msp430f5437\",2,8 },\n-  { \"msp430f5437a\",2,8 },\n-  { \"msp430f5438\",2,8 },\n-  { \"msp430f5438a\",2,8 },\n-  { \"msp430f5500\",2,8 },\n-  { \"msp430f5501\",2,8 },\n-  { \"msp430f5502\",2,8 },\n-  { \"msp430f5503\",2,8 },\n-  { \"msp430f5504\",2,8 },\n-  { \"msp430f5505\",2,8 },\n-  { \"msp430f5506\",2,8 },\n-  { \"msp430f5507\",2,8 },\n-  { \"msp430f5508\",2,8 },\n-  { \"msp430f5509\",2,8 },\n-  { \"msp430f5510\",2,8 },\n-  { \"msp430f5513\",2,8 },\n-  { \"msp430f5514\",2,8 },\n-  { \"msp430f5515\",2,8 },\n-  { \"msp430f5517\",2,8 },\n-  { \"msp430f5519\",2,8 },\n-  { \"msp430f5521\",2,8 },\n-  { \"msp430f5522\",2,8 },\n-  { \"msp430f5524\",2,8 },\n-  { \"msp430f5525\",2,8 },\n-  { \"msp430f5526\",2,8 },\n-  { \"msp430f5527\",2,8 },\n-  { \"msp430f5528\",2,8 },\n-  { \"msp430f5529\",2,8 },\n-  { \"msp430f5630\",2,8 },\n-  { \"msp430f5631\",2,8 },\n-  { \"msp430f5632\",2,8 },\n-  { \"msp430f5633\",2,8 },\n-  { \"msp430f5634\",2,8 },\n-  { \"msp430f5635\",2,8 },\n-  { \"msp430f5636\",2,8 },\n-  { \"msp430f5637\",2,8 },\n-  { \"msp430f5638\",2,8 },\n-  { \"msp430f5658\",2,8 },\n-  { \"msp430f5659\",2,8 },\n-  { \"msp430f5xx_6xxgeneric\",2,8 },\n-  { \"msp430f6433\",2,8 },\n-  { \"msp430f6435\",2,8 },\n-  { \"msp430f6436\",2,8 },\n-  { \"msp430f6438\",2,8 },\n-  { \"msp430f6458\",2,8 },\n-  { \"msp430f6459\",2,8 },\n-  { \"msp430f6630\",2,8 },\n-  { \"msp430f6631\",2,8 },\n-  { \"msp430f6632\",2,8 },\n-  { \"msp430f6633\",2,8 },\n-  { \"msp430f6634\",2,8 },\n-  { \"msp430f6635\",2,8 },\n-  { \"msp430f6636\",2,8 },\n-  { \"msp430f6637\",2,8 },\n-  { \"msp430f6638\",2,8 },\n-  { \"msp430f6658\",2,8 },\n-  { \"msp430f6659\",2,8 },\n-  { \"msp430f6720\",2,8 },\n-  { \"msp430f6720a\",2,8 },\n-  { \"msp430f6721\",2,8 },\n-  { \"msp430f6721a\",2,8 },\n-  { \"msp430f6723\",2,8 },\n-  { \"msp430f6723a\",2,8 },\n-  { \"msp430f6724\",2,8 },\n-  { \"msp430f6724a\",2,8 },\n-  { \"msp430f6725\",2,8 },\n-  { \"msp430f6725a\",2,8 },\n-  { \"msp430f6726\",2,8 },\n-  { \"msp430f6726a\",2,8 },\n-  { \"msp430f6730\",2,8 },\n-  { \"msp430f6730a\",2,8 },\n-  { \"msp430f6731\",2,8 },\n-  { \"msp430f6731a\",2,8 },\n-  { \"msp430f6733\",2,8 },\n-  { \"msp430f6733a\",2,8 },\n-  { \"msp430f6734\",2,8 },\n-  { \"msp430f6734a\",2,8 },\n-  { \"msp430f6735\",2,8 },\n-  { \"msp430f6735a\",2,8 },\n-  { \"msp430f6736\",2,8 },\n-  { \"msp430f6736a\",2,8 },\n-  { \"msp430f6745\",2,8 },\n-  { \"msp430f67451\",2,8 },\n-  { \"msp430f67451a\",2,8 },\n-  { \"msp430f6745a\",2,8 },\n-  { \"msp430f6746\",2,8 },\n-  { \"msp430f67461\",2,8 },\n-  { \"msp430f67461a\",2,8 },\n-  { \"msp430f6746a\",2,8 },\n-  { \"msp430f6747\",2,8 },\n-  { \"msp430f67471\",2,8 },\n-  { \"msp430f67471a\",2,8 },\n-  { \"msp430f6747a\",2,8 },\n-  { \"msp430f6748\",2,8 },\n-  { \"msp430f67481\",2,8 },\n-  { \"msp430f67481a\",2,8 },\n-  { \"msp430f6748a\",2,8 },\n-  { \"msp430f6749\",2,8 },\n-  { \"msp430f67491\",2,8 },\n-  { \"msp430f67491a\",2,8 },\n-  { \"msp430f6749a\",2,8 },\n-  { \"msp430f67621\",2,8 },\n-  { \"msp430f67621a\",2,8 },\n-  { \"msp430f67641\",2,8 },\n-  { \"msp430f67641a\",2,8 },\n-  { \"msp430f6765\",2,8 },\n-  { \"msp430f67651\",2,8 },\n-  { \"msp430f67651a\",2,8 },\n-  { \"msp430f6765a\",2,8 },\n-  { \"msp430f6766\",2,8 },\n-  { \"msp430f67661\",2,8 },\n-  { \"msp430f67661a\",2,8 },\n-  { \"msp430f6766a\",2,8 },\n-  { \"msp430f6767\",2,8 },\n-  { \"msp430f67671\",2,8 },\n-  { \"msp430f67671a\",2,8 },\n-  { \"msp430f6767a\",2,8 },\n-  { \"msp430f6768\",2,8 },\n-  { \"msp430f67681\",2,8 },\n-  { \"msp430f67681a\",2,8 },\n-  { \"msp430f6768a\",2,8 },\n-  { \"msp430f6769\",2,8 },\n-  { \"msp430f67691\",2,8 },\n-  { \"msp430f67691a\",2,8 },\n-  { \"msp430f6769a\",2,8 },\n-  { \"msp430f6775\",2,8 },\n-  { \"msp430f67751\",2,8 },\n-  { \"msp430f67751a\",2,8 },\n-  { \"msp430f6775a\",2,8 },\n-  { \"msp430f6776\",2,8 },\n-  { \"msp430f67761\",2,8 },\n-  { \"msp430f67761a\",2,8 },\n-  { \"msp430f6776a\",2,8 },\n-  { \"msp430f6777\",2,8 },\n-  { \"msp430f67771\",2,8 },\n-  { \"msp430f67771a\",2,8 },\n-  { \"msp430f6777a\",2,8 },\n-  { \"msp430f6778\",2,8 },\n-  { \"msp430f67781\",2,8 },\n-  { \"msp430f67781a\",2,8 },\n-  { \"msp430f6778a\",2,8 },\n-  { \"msp430f6779\",2,8 },\n-  { \"msp430f67791\",2,8 },\n-  { \"msp430f67791a\",2,8 },\n-  { \"msp430f6779a\",2,8 },\n-  { \"msp430fe423\",0,0 },\n-  { \"msp430fe4232\",0,0 },\n-  { \"msp430fe423a\",0,0 },\n-  { \"msp430fe4242\",0,0 },\n-  { \"msp430fe425\",0,0 },\n-  { \"msp430fe4252\",0,0 },\n-  { \"msp430fe425a\",0,0 },\n-  { \"msp430fe427\",0,0 },\n-  { \"msp430fe4272\",0,0 },\n-  { \"msp430fe427a\",0,0 },\n-  { \"msp430fg4250\",0,0 },\n-  { \"msp430fg4260\",0,0 },\n-  { \"msp430fg4270\",0,0 },\n-  { \"msp430fg437\",0,0 },\n-  { \"msp430fg438\",0,0 },\n-  { \"msp430fg439\",0,0 },\n-  { \"msp430fg4616\",1,1 },\n-  { \"msp430fg4617\",1,1 },\n-  { \"msp430fg4618\",1,1 },\n-  { \"msp430fg4619\",1,1 },\n-  { \"msp430fg477\",0,0 },\n-  { \"msp430fg478\",0,0 },\n-  { \"msp430fg479\",0,0 },\n-  { \"msp430fg6425\",2,8 },\n-  { \"msp430fg6426\",2,8 },\n-  { \"msp430fg6625\",2,8 },\n-  { \"msp430fg6626\",2,8 },\n-  { \"msp430fr2032\",2,0 },\n-  { \"msp430fr2033\",2,0 },\n-  { \"msp430fr2110\",2,0 },\n-  { \"msp430fr2111\",2,0 },\n-  { \"msp430fr2310\",2,0 },\n-  { \"msp430fr2311\",2,0 },\n-  { \"msp430fr2433\",2,8 },\n-  { \"msp430fr2532\",2,8 },\n-  { \"msp430fr2533\",2,8 },\n-  { \"msp430fr2632\",2,8 },\n-  { \"msp430fr2633\",2,8 },\n-  { \"msp430fr2xx_4xxgeneric\",2,8 },\n-  { \"msp430fr4131\",2,0 },\n-  { \"msp430fr4132\",2,0 },\n-  { \"msp430fr4133\",2,0 },\n-  { \"msp430fr5720\",2,8 },\n-  { \"msp430fr5721\",2,8 },\n-  { \"msp430fr5722\",2,8 },\n-  { \"msp430fr5723\",2,8 },\n-  { \"msp430fr5724\",2,8 },\n-  { \"msp430fr5725\",2,8 },\n-  { \"msp430fr5726\",2,8 },\n-  { \"msp430fr5727\",2,8 },\n-  { \"msp430fr5728\",2,8 },\n-  { \"msp430fr5729\",2,8 },\n-  { \"msp430fr5730\",2,8 },\n-  { \"msp430fr5731\",2,8 },\n-  { \"msp430fr5732\",2,8 },\n-  { \"msp430fr5733\",2,8 },\n-  { \"msp430fr5734\",2,8 },\n-  { \"msp430fr5735\",2,8 },\n-  { \"msp430fr5736\",2,8 },\n-  { \"msp430fr5737\",2,8 },\n-  { \"msp430fr5738\",2,8 },\n-  { \"msp430fr5739\",2,8 },\n-  { \"msp430fr57xxgeneric\",2,8 },\n-  { \"msp430fr5847\",2,8 },\n-  { \"msp430fr58471\",2,8 },\n-  { \"msp430fr5848\",2,8 },\n-  { \"msp430fr5849\",2,8 },\n-  { \"msp430fr5857\",2,8 },\n-  { \"msp430fr5858\",2,8 },\n-  { \"msp430fr5859\",2,8 },\n-  { \"msp430fr5867\",2,8 },\n-  { \"msp430fr58671\",2,8 },\n-  { \"msp430fr5868\",2,8 },\n-  { \"msp430fr5869\",2,8 },\n-  { \"msp430fr5870\",2,8 },\n-  { \"msp430fr5872\",2,8 },\n-  { \"msp430fr58721\",2,8 },\n-  { \"msp430fr5887\",2,8 },\n-  { \"msp430fr5888\",2,8 },\n-  { \"msp430fr5889\",2,8 },\n-  { \"msp430fr58891\",2,8 },\n-  { \"msp430fr5922\",2,8 },\n-  { \"msp430fr59221\",2,8 },\n-  { \"msp430fr5947\",2,8 },\n-  { \"msp430fr59471\",2,8 },\n-  { \"msp430fr5948\",2,8 },\n-  { \"msp430fr5949\",2,8 },\n-  { \"msp430fr5957\",2,8 },\n-  { \"msp430fr5958\",2,8 },\n-  { \"msp430fr5959\",2,8 },\n-  { \"msp430fr5962\",2,8 },\n-  { \"msp430fr5964\",2,8 },\n-  { \"msp430fr5967\",2,8 },\n-  { \"msp430fr5968\",2,8 },\n-  { \"msp430fr5969\",2,8 },\n-  { \"msp430fr59691\",2,8 },\n-  { \"msp430fr5970\",2,8 },\n-  { \"msp430fr5972\",2,8 },\n-  { \"msp430fr59721\",2,8 },\n-  { \"msp430fr5986\",2,8 },\n-  { \"msp430fr5987\",2,8 },\n-  { \"msp430fr5988\",2,8 },\n-  { \"msp430fr5989\",2,8 },\n-  { \"msp430fr59891\",2,8 },\n-  { \"msp430fr5992\",2,8 },\n-  { \"msp430fr5994\",2,8 },\n-  { \"msp430fr59941\",2,8 },\n-  { \"msp430fr5xx_6xxgeneric\",2,8 },\n-  { \"msp430fr6820\",2,8 },\n-  { \"msp430fr6822\",2,8 },\n-  { \"msp430fr68221\",2,8 },\n-  { \"msp430fr6870\",2,8 },\n-  { \"msp430fr6872\",2,8 },\n-  { \"msp430fr68721\",2,8 },\n-  { \"msp430fr6877\",2,8 },\n-  { \"msp430fr6879\",2,8 },\n-  { \"msp430fr68791\",2,8 },\n-  { \"msp430fr6887\",2,8 },\n-  { \"msp430fr6888\",2,8 },\n-  { \"msp430fr6889\",2,8 },\n-  { \"msp430fr68891\",2,8 },\n-  { \"msp430fr6920\",2,8 },\n-  { \"msp430fr6922\",2,8 },\n-  { \"msp430fr69221\",2,8 },\n-  { \"msp430fr6927\",2,8 },\n-  { \"msp430fr69271\",2,8 },\n-  { \"msp430fr6928\",2,8 },\n-  { \"msp430fr6970\",2,8 },\n-  { \"msp430fr6972\",2,8 },\n-  { \"msp430fr69721\",2,8 },\n-  { \"msp430fr6977\",2,8 },\n-  { \"msp430fr6979\",2,8 },\n-  { \"msp430fr69791\",2,8 },\n-  { \"msp430fr6987\",2,8 },\n-  { \"msp430fr6988\",2,8 },\n-  { \"msp430fr6989\",2,8 },\n-  { \"msp430fr69891\",2,8 },\n-  { \"msp430fw423\",0,0 },\n-  { \"msp430fw425\",0,0 },\n-  { \"msp430fw427\",0,0 },\n-  { \"msp430fw428\",0,0 },\n-  { \"msp430fw429\",0,0 },\n-  { \"msp430g2001\",0,0 },\n-  { \"msp430g2101\",0,0 },\n-  { \"msp430g2102\",0,0 },\n-  { \"msp430g2111\",0,0 },\n-  { \"msp430g2112\",0,0 },\n-  { \"msp430g2113\",0,0 },\n-  { \"msp430g2121\",0,0 },\n-  { \"msp430g2131\",0,0 },\n-  { \"msp430g2132\",0,0 },\n-  { \"msp430g2152\",0,0 },\n-  { \"msp430g2153\",0,0 },\n-  { \"msp430g2201\",0,0 },\n-  { \"msp430g2202\",0,0 },\n-  { \"msp430g2203\",0,0 },\n-  { \"msp430g2210\",0,0 },\n-  { \"msp430g2211\",0,0 },\n-  { \"msp430g2212\",0,0 },\n-  { \"msp430g2213\",0,0 },\n-  { \"msp430g2221\",0,0 },\n-  { \"msp430g2230\",0,0 },\n-  { \"msp430g2231\",0,0 },\n-  { \"msp430g2232\",0,0 },\n-  { \"msp430g2233\",0,0 },\n-  { \"msp430g2252\",0,0 },\n-  { \"msp430g2253\",0,0 },\n-  { \"msp430g2302\",0,0 },\n-  { \"msp430g2303\",0,0 },\n-  { \"msp430g2312\",0,0 },\n-  { \"msp430g2313\",0,0 },\n-  { \"msp430g2332\",0,0 },\n-  { \"msp430g2333\",0,0 },\n-  { \"msp430g2352\",0,0 },\n-  { \"msp430g2353\",0,0 },\n-  { \"msp430g2402\",0,0 },\n-  { \"msp430g2403\",0,0 },\n-  { \"msp430g2412\",0,0 },\n-  { \"msp430g2413\",0,0 },\n-  { \"msp430g2432\",0,0 },\n-  { \"msp430g2433\",0,0 },\n-  { \"msp430g2444\",0,0 },\n-  { \"msp430g2452\",0,0 },\n-  { \"msp430g2453\",0,0 },\n-  { \"msp430g2513\",0,0 },\n-  { \"msp430g2533\",0,0 },\n-  { \"msp430g2544\",0,0 },\n-  { \"msp430g2553\",0,0 },\n-  { \"msp430g2744\",0,0 },\n-  { \"msp430g2755\",0,0 },\n-  { \"msp430g2855\",0,0 },\n-  { \"msp430g2955\",0,0 },\n-  { \"msp430i2020\",0,2 },\n-  { \"msp430i2021\",0,2 },\n-  { \"msp430i2030\",0,2 },\n-  { \"msp430i2031\",0,2 },\n-  { \"msp430i2040\",0,2 },\n-  { \"msp430i2041\",0,2 },\n-  { \"msp430i2xxgeneric\",0,2 },\n-  { \"msp430l092\",0,0 },\n-  { \"msp430p112\",0,0 },\n-  { \"msp430p313\",0,0 },\n-  { \"msp430p315\",0,0 },\n-  { \"msp430p315s\",0,0 },\n-  { \"msp430p325\",0,0 },\n-  { \"msp430p337\",0,1 },\n-  { \"msp430sl5438a\",2,8 },\n-  { \"msp430tch5e\",0,0 },\n-  { \"msp430xgeneric\",2,8 },\n-  { \"rf430f5144\",2,8 },\n-  { \"rf430f5155\",2,8 },\n-  { \"rf430f5175\",2,8 },\n-  { \"rf430frl152h\",0,0 },\n-  { \"rf430frl152h_rom\",0,0 },\n-  { \"rf430frl153h\",0,0 },\n-  { \"rf430frl153h_rom\",0,0 },\n-  { \"rf430frl154h\",0,0 },\n-  { \"rf430frl154h_rom\",0,0 }\n-};  \n-\n /* Generate a C preprocessor symbol based upon the MCU selected by the user.\n    If a specific MCU has not been selected then return a generic symbol instead.  */\n \n@@ -724,6 +104,7 @@ msp430_mcu_name (void)\n {\n   if (target_mcu)\n     {\n+      msp430_extract_mcu_data (target_mcu);\n       unsigned int i;\n       unsigned int start_upper;\n       unsigned int end_upper;\n@@ -786,22 +167,20 @@ msp430_option_override (void)\n \n   if (target_mcu)\n     {\n-      int i;\n+      msp430_extract_mcu_data (target_mcu);\n \n-      /* FIXME: If the array were alpha sorted, we could use a binary search.  */\n-      for (i = ARRAY_SIZE (msp430_mcu_data); i--;)\n-\tif (strcasecmp (msp430_mcu_data[i].name, target_mcu) == 0)\n+\tif (extracted_mcu_data.name != NULL)\n \t  {\n-\t    bool xisa = msp430_mcu_data[i].revision >= 1; \n+\t    bool xisa = extracted_mcu_data.revision >= 1;\n \n \t    if (msp430_warn_mcu)\n \t      {\n-\t\tif (target_cpu&& msp430x != xisa)\n+\t\tif (target_cpu && msp430x != xisa)\n \t\t  warning (0, \"MCU %qs supports %s ISA but %<-mcpu%> option \"\n \t\t\t   \"is set to %s\",\n \t\t\t   target_mcu, xisa ? \"430X\" : \"430\", msp430x ? \"430X\" : \"430\");\n \n-\t\tif (msp430_mcu_data[i].hwmpy == 0\n+\t\tif (extracted_mcu_data.hwmpy == 0\n \t\t    && msp430_hwmult_type != MSP430_HWMULT_AUTO\n \t\t    && msp430_hwmult_type != MSP430_HWMULT_NONE)\n \t\t  warning (0, \"MCU %qs does not have hardware multiply \"\n@@ -810,26 +189,25 @@ msp430_option_override (void)\n \t\t\t   msp430_hwmult_type == MSP430_HWMULT_SMALL ? \"16-bit\"\n \t\t\t   : msp430_hwmult_type == MSP430_HWMULT_LARGE ? \"32-bit\" : \"f5series\");\n \t\telse if (msp430_hwmult_type == MSP430_HWMULT_SMALL\n-\t\t    && msp430_mcu_data[i].hwmpy != 1\n-\t\t    && msp430_mcu_data[i].hwmpy != 2 )\n+\t\t    && extracted_mcu_data.hwmpy != 1\n+\t\t    && extracted_mcu_data.hwmpy != 2)\n \t\t  warning (0, \"MCU %qs supports %s hardware multiply, \"\n \t\t\t   \"but %<-mhwmult%> is set to 16-bit\",\n-\t\t\t   target_mcu, hwmult_name (msp430_mcu_data[i].hwmpy));\n-\t\telse if (msp430_hwmult_type == MSP430_HWMULT_LARGE && msp430_mcu_data[i].hwmpy != 4)\n+\t\t\t   target_mcu, hwmult_name (extracted_mcu_data.hwmpy));\n+\t\telse if (msp430_hwmult_type == MSP430_HWMULT_LARGE\n+\t\t\t && extracted_mcu_data.hwmpy != 4)\n \t\t  warning (0, \"MCU %qs supports %s hardware multiply, \"\n \t\t\t   \"but %<-mhwmult%> is set to 32-bit\",\n-\t\t\t   target_mcu, hwmult_name (msp430_mcu_data[i].hwmpy));\n-\t\telse if (msp430_hwmult_type == MSP430_HWMULT_F5SERIES && msp430_mcu_data[i].hwmpy != 8)\n+\t\t\t   target_mcu, hwmult_name (extracted_mcu_data.hwmpy));\n+\t\telse if (msp430_hwmult_type == MSP430_HWMULT_F5SERIES\n+\t\t\t && extracted_mcu_data.hwmpy != 8)\n \t\t  warning (0, \"MCU %qs supports %s hardware multiply, \"\n \t\t\t   \"but %<-mhwmult%> is set to f5series\",\n-\t\t\t   target_mcu, hwmult_name (msp430_mcu_data[i].hwmpy));\n+\t\t\t   target_mcu, hwmult_name (extracted_mcu_data.hwmpy));\n \t      }\n-\n \t    msp430x = xisa;\n-\t    break;\n \t  }\n-\n-      if (i < 0)\n+      else\n \t{\n \t  if (msp430_hwmult_type == MSP430_HWMULT_AUTO)\n \t    {\n@@ -3376,12 +2754,10 @@ msp430_use_f5_series_hwmult (void)\n   if (strncasecmp (target_mcu, \"msp430f6\", 8) == 0)\n     return cached_result = true;\n \n-  int i;\n+  msp430_extract_mcu_data (target_mcu);\n \n-  /* FIXME: This array is alpha sorted - we could use a binary search.  */\n-  for (i = ARRAY_SIZE (msp430_mcu_data); i--;)\n-    if (strcasecmp (target_mcu, msp430_mcu_data[i].name) == 0)\n-      return cached_result = msp430_mcu_data[i].hwmpy == 8;\n+  if (extracted_mcu_data.name != NULL)\n+    return cached_result = extracted_mcu_data.hwmpy == 8;\n \n   return cached_result = false;\n }\n@@ -3394,7 +2770,6 @@ use_32bit_hwmult (void)\n {\n   static const char * cached_match = NULL;\n   static bool         cached_result;\n-  int i;\n \n   if (msp430_hwmult_type == MSP430_HWMULT_LARGE)\n     return true;\n@@ -3407,10 +2782,9 @@ use_32bit_hwmult (void)\n \n   cached_match = target_mcu;\n \n-  /* FIXME: This array is alpha sorted - we could use a binary search.  */\n-  for (i = ARRAY_SIZE (msp430_mcu_data); i--;)\n-    if (strcasecmp (target_mcu, msp430_mcu_data[i].name) == 0)\n-      return cached_result = msp430_mcu_data[i].hwmpy == 4;\n+  msp430_extract_mcu_data (target_mcu);\n+  if (extracted_mcu_data.name != NULL)\n+    return cached_result = extracted_mcu_data.hwmpy == 4;\n \n   return cached_result = false;\n }\n@@ -3423,7 +2797,6 @@ msp430_no_hwmult (void)\n {\n   static const char * cached_match = NULL;\n   static bool         cached_result;\n-  int i;\n \n   if (msp430_hwmult_type == MSP430_HWMULT_NONE)\n     return true;\n@@ -3439,10 +2812,9 @@ msp430_no_hwmult (void)\n \n   cached_match = target_mcu;\n \n-  /* FIXME: This array is alpha sorted - we could use a binary search.  */\n-  for (i = ARRAY_SIZE (msp430_mcu_data); i--;)\n-    if (strcasecmp (target_mcu, msp430_mcu_data[i].name) == 0)\n-      return cached_result = msp430_mcu_data[i].hwmpy == 0;\n+  msp430_extract_mcu_data (target_mcu);\n+  if (extracted_mcu_data.name != NULL)\n+    return cached_result = extracted_mcu_data.hwmpy == 0;\n \n   /* If we do not recognise the MCU name, we assume that it does not support\n      any kind of hardware multiply - this is the safest assumption to make.  */"}, {"sha": "b080dfbaca19fac67128477adbef7bae916ffb75", "filename": "gcc/config/msp430/msp430.h", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Fmsp430.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.h?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -53,7 +53,7 @@ extern bool msp430x;\n   \"%{minrt:%:if-exists(crtn-minrt.o%s)}%{!minrt:%:if-exists(crtn.o%s)} -lgcc\"\n \n #define ASM_SPEC \"-mP \" /* Enable polymorphic instructions.  */ \\\n-  \"%{mcpu=*:-mcpu=%*}%{!mcpu=*:%{mmcu=*:-mmcu=%*}} \" /* Pass the CPU type on to the assembler.  */ \\\n+  \"%{mcpu=*:-mcpu=%*} \" /* Pass the CPU type on to the assembler.  */ \\\n   \"%{mrelax=-mQ} \" /* Pass the relax option on to the assembler.  */ \\\n   \"%{mlarge:-ml} \" /* Tell the assembler if we are building for the LARGE pointer model.  */ \\\n   \"%{!msim:-md} %{msim:%{mlarge:-md}} \" /* Copy data from ROM to RAM if necessary.  */ \\\n@@ -74,11 +74,15 @@ extern bool msp430x;\n   \" %{!mlarge:%{mcode-region=*:\"\t\\\n     \"%e-mcode-region requires the large memory model (-mlarge)}}\"\t\\\n   \" %{!mlarge:%{mdata-region=*:\"\t\\\n-    \"%e-mdata-region requires the large memory model (-mlarge)}}\"\n+    \"%e-mdata-region requires the large memory model (-mlarge)}}\"\t\\\n+  \" %{!mcpu=*:%{mmcu=*:%:msp430_select_cpu(%{mmcu=*:%*})}}\"\n \n extern const char * msp430_select_hwmult_lib (int, const char **);\n+extern const char * msp430_select_cpu (int, const char **);\n+\n # define EXTRA_SPEC_FUNCTIONS\t\t\t\t\\\n-  { \"msp430_hwmult_lib\", msp430_select_hwmult_lib },\n+  { \"msp430_hwmult_lib\", msp430_select_hwmult_lib },\t\\\n+  { \"msp430_select_cpu\", msp430_select_cpu },\n \n /* Specify the libraries to include on the linker command line.\n "}, {"sha": "b9565103e9a7a01a7a910c7075b18c462903d8d6", "filename": "gcc/config/msp430/t-msp430", "status": "modified", "additions": 7, "deletions": 229, "changes": 236, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Ft-msp430", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Fconfig%2Fmsp430%2Ft-msp430", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Ft-msp430?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -22,6 +22,10 @@ driver-msp430.o: $(srcdir)/config/msp430/driver-msp430.c \\\n   $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H)\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $<\n \n+msp430-devices.o: $(srcdir)/config/msp430/msp430-devices.c \\\n+\t$(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H)\n+\t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) $<\n+\n # Enable multilibs:\n \n MULTILIB_OPTIONS    = mcpu=msp430 mlarge \n@@ -30,235 +34,9 @@ MULTILIB_DIRNAMES   = 430          large\n # Match -mcpu=430\n MULTILIB_MATCHES    = mcpu?msp430=mcpu?430\n \n-# Match the known 430 ISA mcu names.\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c091\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c092\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c111\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c1111\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c112\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c1121\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c1331\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c1351\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c311s\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c312\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c313\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c314\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c315\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c323\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c325\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c412\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c413\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430e112\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430e313\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430e315\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430e325\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f110\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1101\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1101a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1111\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1111a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f112\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1121\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1121a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1122\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1132\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f122\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1222\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f123\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1232\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f133\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f135\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f155\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f156\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f157\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2001\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2002\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2003\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2011\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2012\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2013\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2101\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2111\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2112\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2121\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2122\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2131\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2132\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2232\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2234\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2252\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2254\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2272\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2274\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f412\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f413\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4132\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f415\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4152\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f417\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4250\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4260\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4270\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f435\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4351\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f436\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4361\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f437\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4371\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f438\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f439\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f477\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f478\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f479\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe423\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe4232\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe423a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe4242\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe425\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe4252\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe425a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe427\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe4272\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fe427a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg4250\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg4260\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg4270\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg437\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg438\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg439\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg477\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg478\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fg479\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fw423\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fw425\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fw427\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fw428\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430fw429\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2001\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2101\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2102\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2111\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2112\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2113\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2121\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2131\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2132\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2152\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2153\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2201\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2202\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2203\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2210\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2211\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2212\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2213\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2221\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2230\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2231\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2232\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2233\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2252\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2253\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2302\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2303\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2312\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2313\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2332\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2333\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2352\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2353\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2402\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2403\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2412\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2413\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2432\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2433\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2444\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2452\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2453\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2513\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2533\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2544\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2553\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2744\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2755\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2855\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430g2955\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430l092\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430p112\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430p313\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430p315\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430p315s\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430p325\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430tch5e\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?rf430frl152h\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?rf430frl152h_rom\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?rf430frl153h\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?rf430frl153h_rom\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?rf430frl154h\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?rf430frl154h_rom\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c336\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430c337\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430e337\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f147\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1471\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f148\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1481\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f149\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1491\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1610\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1611\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f1612\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f167\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f168\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f169\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f423\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f423a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f425\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f425a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f427\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f427a\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f447\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f448\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4481\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f449\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4491\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430p337\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe221\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe222\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe223\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe231\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe232\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe233\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe251\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe252\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430afe253\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f233\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2330\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f235\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2350\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2370\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2410\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f247\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2471\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f248\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2481\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f249\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f2491\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2020\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2021\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2030\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2031\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2040\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2041\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430i2xxgeneric\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4783\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4784\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4793\n-MULTILIB_MATCHES += mcpu?msp430=mmcu?msp430f4794\n-\n-# Add additional MCU matches like this:\n-# MULTILIB_MATCHES += mcpu?msp430x=mmcu?xxxxxxxxxx\n+# The correct multilib for a given mmcu is selected without the need for\n+# hard-coded data here, because DRIVER_SELF_SPECS will place the correct\n+# -mcpu option for a given mcu onto the command line.\n \n MULTILIB_EXCEPTIONS = mcpu=msp430/mlarge\n "}, {"sha": "1d1283709af02e334e7708dfda580b3d026d9eb0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -1,3 +1,24 @@\n+2019-08-13  Jozef Lawrynowicz  <jozef.l@mittosystems.com>\n+\n+\t* gcc.target/msp430/msp430.exp\n+\t(check_effective_target_msp430_430_selected): New.\n+\t(check_effective_target_msp430_430x_selected): New.\n+\t(check_effective_target_msp430_mlarge_selected): New.\n+\t(check_effective_target_msp430_hwmul_not_none): New.\n+\t(check_effective_target_msp430_hwmul_not_16bit): New.\n+\t(check_effective_target_msp430_hwmul_not_32bit): New.\n+\t(check_effective_target_msp430_hwmul_not_f5): New.\n+\t(msp430_get_opts): New.\n+\t(msp430_device_permutations_runtest): New.\n+\t* gcc.target/msp430/devices/README: New file.\n+\t* gcc.target/msp430/devices-main.c: New test.\n+\t* gcc.target/msp430/devices/hard-cc430f5123.c: Likewise.\n+\t* gcc.target/msp430/devices/hard-foo.c: Likewise.\n+\t* gcc.target/msp430/devices/hard-msp430afe253.c: Likewise.\n+\t* gcc.target/msp430/devices/hard-msp430cg4616.c: Likewise.\n+\t* gcc.target/msp430/devices/hard-msp430f4783.c: Likewise.\n+\t* gcc.target/msp430/devices/hard-rf430frl154h_rom.c: Likewise.\n+\n 2019-08-13  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* gcc.target/aarch64/asm-x-constraint-1.c: New test."}, {"sha": "20448f4f03dd6377e329236a445f0ff8537df1a5", "filename": "gcc/testsuite/gcc.target/msp430/devices-main.c", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices-main.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices-main.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices-main.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,6 @@\n+int\n+main (void)\n+{\n+  while (1);\n+  return 0;\n+}"}, {"sha": "8d8c8f26db8a073bc48a239bb9ea80c16b1eeb9f", "filename": "gcc/testsuite/gcc.target/msp430/devices/README", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2FREADME", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2FREADME", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2FREADME?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,12 @@\n+Some tests in this directory are run in a msp430-specific \"torture\" style,\n+where all target specific options (that change code generation) are each used\n+on each test source file in turn.\n+\n+The criteria for this torture style of testing is:\n+  - The source file has a .c suffix\n+  - The source file is in this \"devices\" subdirectory of the msp430 tests\n+  - Somewhere in the test file name matches the regex:\n+    [a-z0-9]+430[a-z0-9_]+(?=\\.c).\n+\n+Some of the options used to run the tests will produce warnings/errors for the\n+mcus, so ensure the test has dg-warning and dg-error directives as appropriate."}, {"sha": "15a4ae1a584255e907a677946b6a6dd1c8faf31b", "filename": "gcc/testsuite/gcc.target/msp430/devices/hard-cc430f5123.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-cc430f5123.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-cc430f5123.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-cc430f5123.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mmcu=cc430f5123\" } */\n+/* { dg-warning \"supports 430X ISA but '-mcpu' option is set to 430\" \"\" { target msp430_430_selected } 0 } */\n+/* { dg-warning \"supports 32-bit .5xx. hardware multiply\" \"\" { target msp430_hwmul_not_f5 } 0 } */\n+\n+/* revision=2, hwmpy=8 */\n+#include \"../devices-main.c\""}, {"sha": "802b0413452c9cd6f503092d91e0c0b2f1bbc030", "filename": "gcc/testsuite/gcc.target/msp430/devices/hard-foo.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-foo.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-foo.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-foo.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,5 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mmcu=msp430foo\" } */\n+/* { dg-warning \"Unrecognized MCU name 'msp430foo'.*\\n.*Use the\" \"\" { target *-*-* } 0 } */\n+\n+#include \"../devices-main.c\""}, {"sha": "9edf6eb02a7571eab90d37289bf6e8973016eca5", "filename": "gcc/testsuite/gcc.target/msp430/devices/hard-msp430afe253.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430afe253.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430afe253.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430afe253.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mmcu=msp430afe253\" } */\n+/* { dg-warning \"supports 16-bit hardware multiply\" \"\" { target msp430_hwmul_not_16bit } 0 } */\n+/* { dg-warning \"supports 430 ISA but\" \"\" { target msp430_430x_selected } 0 } */\n+/* { dg-error \"'-mlarge' requires a 430X-compatible '-mmcu='\" \"\" { target msp430_mlarge_selected } 0 } */\n+\n+/* revision=0, hwmpy=2  */\n+#include \"../devices-main.c\""}, {"sha": "493d02258f2949529e4c1fb5a80b8c8eb396e42d", "filename": "gcc/testsuite/gcc.target/msp430/devices/hard-msp430cg4616.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430cg4616.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430cg4616.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430cg4616.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,7 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mmcu=msp430cg4616\" } */\n+/* { dg-warning \"supports 430X ISA but '-mcpu' option is set to 430\" \"\" { target msp430_430_selected } 0 } */\n+/* { dg-warning \"supports 16-bit hardware multiply\" \"\" { target msp430_hwmul_not_16bit } 0 } */\n+\n+/* revision=1, hwmpy=1 */\n+#include \"../devices-main.c\""}, {"sha": "af918c3e516be11e5258aa6b3f6ee40fe3e28b88", "filename": "gcc/testsuite/gcc.target/msp430/devices/hard-msp430f4783.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430f4783.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430f4783.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-msp430f4783.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mmcu=msp430f4783\" } */\n+/* { dg-warning \"supports 32-bit hardware multiply\" \"\" { target msp430_hwmul_not_32bit } 0 } */\n+/* { dg-warning \"supports 430 ISA but\" \"\" { target msp430_430x_selected } 0 } */\n+/* { dg-error \"'-mlarge' requires a 430X-compatible '-mmcu='\" \"\" { target msp430_mlarge_selected } 0 } */\n+\n+/* revision=0, hwmpy=4  */\n+#include \"../devices-main.c\""}, {"sha": "ad0c33d39b3fc126a2f6d692f883e4e4e9b52207", "filename": "gcc/testsuite/gcc.target/msp430/devices/hard-rf430frl154h_rom.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-rf430frl154h_rom.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-rf430frl154h_rom.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fdevices%2Fhard-rf430frl154h_rom.c?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mmcu=rf430frl154h_rom\" } */\n+/* { dg-warning \"does not have hardware multiply\" \"\" { target msp430_hwmul_not_none } 0 } */\n+/* { dg-warning \"supports 430 ISA but\" \"\" { target msp430_430x_selected } 0 } */\n+/* { dg-error \"'-mlarge' requires a 430X-compatible '-mmcu='\" \"\" { target msp430_mlarge_selected } 0 } */\n+\n+/* revision=0, hwmpy=0  */\n+#include \"../devices-main.c\""}, {"sha": "20bfc149bd78016da38fff64341f4c51434ee7fe", "filename": "gcc/testsuite/gcc.target/msp430/msp430.exp", "status": "modified", "additions": 81, "deletions": 1, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fmsp430.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e37e2bb100135e4d4afa2f4ae6445ac1201f01fa/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fmsp430.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fmsp430.exp?ref=e37e2bb100135e4d4afa2f4ae6445ac1201f01fa", "patch": "@@ -18,7 +18,85 @@\n \n # Exit immediately if this isn't the right target.\n if { ![istarget msp430-*-*] } then {\n-  return\n+    return\n+}\n+\n+# Below are msp430-specific effective target keywords, required for checking\n+# device related warnings/errors\n+proc check_effective_target_msp430_430_selected { } {\n+    return [check-flags [list \"\" { *-*-* } { \"-mcpu=msp430\" } { \"\" } ]]\n+}\n+\n+proc check_effective_target_msp430_430x_selected { } {\n+    return [check-flags [list \"\" { *-*-* } \\\n+    { \"-mcpu=msp430x\" \"-mcpu=msp430xv2\" } { \"\" } ]]\n+}\n+\n+proc check_effective_target_msp430_mlarge_selected { } {\n+    return [check-flags [list \"\" { *-*-* } { \"-mlarge\" } { \"\" } ]]\n+}\n+\n+proc check_effective_target_msp430_hwmul_not_none { } {\n+    return [check-flags [list \"\" { *-*-* } \\\n+    { \"-mhwmult=16bit\" \"-mhwmult=32bit\" \"-mhwmult=f5series\" } { \"\" } ]]\n+}\n+\n+proc check_effective_target_msp430_hwmul_not_16bit { } {\n+    return [check-flags [list \"\" { *-*-* } \\\n+    { \"-mhwmult=f5series\" \"-mhwmult=32bit\" } { \"\" } ]]\n+}\n+\n+proc check_effective_target_msp430_hwmul_not_32bit { } {\n+    return [check-flags [list \"\" { *-*-* } \\\n+    { \"-mhwmult=16bit\" \"-mhwmult=f5series\" } { \"\" } ]]\n+}\n+\n+proc check_effective_target_msp430_hwmul_not_f5 { } {\n+    return [check-flags [list \"\" { *-*-* } \\\n+    { \"-mhwmult=16bit\" \"-mhwmult=32bit\" } { \"\" } ]]\n+}\n+\n+# Return a list of msp430-specific options we can run the test with.\n+# The mcu name is extracted from the file name, not from the -mmcu option\n+# specified in the test file.\n+proc msp430_get_opts { test_file } {\n+    global board_info\n+    # If the mcu name is not recognized, run the test as normal without\n+    # additional options.\n+    if { ![regexp {[a-z0-9]+430[a-z0-9_]+(?=\\.c)} $test_file mcu_name] } {\n+\treturn { \"\" }\n+    }\n+    # If the testsuite has been invoked with specific MSP430 options, don't run\n+    # in this torture style.\n+    set multi_flags [board_info [target_info name] multilib_flags]\n+    if { [string match \"*mlarge*\" $multi_flags]\n+\t|| [string match \"*msmall*\" $multi_flags]\n+\t|| [string match \"*mcpu*\" $multi_flags]\n+\t|| [string match \"*mmcu*\" $multi_flags]\n+\t|| [string match \"*mhwmult*\" $multi_flags] } {\n+\treturn { \"\" }\n+    }\n+    # Test all device related options. The compiler will warn about\n+    # incompatibilities, so ensure dg-warning or dg-error directives are set up\n+    # in the test sources.\n+    return {\"\" -mhwmult=none -mhwmult=16bit -mhwmult=32bit -mhwmult=f5series \\\n+        -mcpu=msp430 -mcpu=msp430x -mcpu=msp430xv2 -mlarge}\n+}\n+\n+# Run each test file in 'tests' with every possible value for -mcpu and\n+# -mhwmult, and with -mlarge.\n+proc msp430_device_permutations_runtest { tests } {\n+    # The specific tests being run\n+    global runtests\n+    global MSP430_DEFAULT_CFLAGS\n+    foreach { test_file } $tests {\n+\tif { ![runtest_file_p $runtests $test_file] } {\n+\t    continue\n+\t}\n+\tforeach { mcu_flags } [msp430_get_opts $test_file] {\n+\t    dg-runtest $test_file \"$mcu_flags\" \"$MSP430_DEFAULT_CFLAGS\"\n+\t}\n+    }\n }\n \n # Load support procs.\n@@ -42,5 +120,7 @@ dg-init\n dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/*.\\[cCS\\]]] \\\n \t\"\" $MSP430_DEFAULT_CFLAGS\n \n+msp430_device_permutations_runtest [lsort [glob -nocomplain $srcdir/$subdir/devices/*.\\[cCS\\]]]\n+\n # All done.\n dg-finish"}]}