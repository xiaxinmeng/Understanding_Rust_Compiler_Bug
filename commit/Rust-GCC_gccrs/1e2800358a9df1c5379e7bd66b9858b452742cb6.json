{"sha": "1e2800358a9df1c5379e7bd66b9858b452742cb6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWUyODAwMzU4YTlkZjFjNTM3OWU3YmQ2NmI5ODU4YjQ1Mjc0MmNiNg==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1998-10-29T12:40:21Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1998-10-29T12:40:21Z"}, "message": "Fix for sparc va_arg macro aliasing problem.\n\n\t* c-common.c (c_get_alias_set): Handle ARRAY_REF of union field.\n\nFrom-SVN: r23427", "tree": {"sha": "0d5b5580e33ba64992935ec77074119a7e004988", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d5b5580e33ba64992935ec77074119a7e004988"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e2800358a9df1c5379e7bd66b9858b452742cb6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e2800358a9df1c5379e7bd66b9858b452742cb6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e2800358a9df1c5379e7bd66b9858b452742cb6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e2800358a9df1c5379e7bd66b9858b452742cb6/comments", "author": null, "committer": null, "parents": [{"sha": "7140b0dba6389942f7dd33e4629fe85a5df7db52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7140b0dba6389942f7dd33e4629fe85a5df7db52", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7140b0dba6389942f7dd33e4629fe85a5df7db52"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "9670a1be0a32a64a73020036cdc9574c3d73c96b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e2800358a9df1c5379e7bd66b9858b452742cb6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e2800358a9df1c5379e7bd66b9858b452742cb6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e2800358a9df1c5379e7bd66b9858b452742cb6", "patch": "@@ -1,3 +1,7 @@\n+Thu Oct 29 12:39:35 1998  Jim Wilson  <wilson@cygnus.com>\n+\n+\t* c-common.c (c_get_alias_set): Handle ARRAY_REF of union field.\n+\n Thu Oct 29 14:10:22 EST 1998  Andrew MacLeod  <amacleod@cygnus.com>\n \n \t* except.c (emit_eh_context): Make the EH context register stay alive"}, {"sha": "ddb87cd4a004370f0bb3f7312df72698f3b85f7b", "filename": "gcc/c-common.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e2800358a9df1c5379e7bd66b9858b452742cb6/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e2800358a9df1c5379e7bd66b9858b452742cb6/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=1e2800358a9df1c5379e7bd66b9858b452742cb6", "patch": "@@ -3155,8 +3155,15 @@ c_get_alias_set (t)\n        the conservative assumption.  */\n     return 0;\n \n-  if (TREE_CODE (t) == COMPONENT_REF\n-      && TREE_CODE (TREE_TYPE (TREE_OPERAND (t, 0))) == UNION_TYPE)\n+  if ((TREE_CODE (t) == COMPONENT_REF\n+       && TREE_CODE (TREE_TYPE (TREE_OPERAND (t, 0))) == UNION_TYPE)\n+      /* Also permit punning when accessing an array which is a union\n+\t member.  This makes the current sparc va_arg macro work, but may\n+\t not be otherwise necessary.  */\n+      || (TREE_CODE (t) == ARRAY_REF\n+\t  && TREE_CODE (TREE_OPERAND (t, 0)) == COMPONENT_REF\n+\t  && (TREE_CODE (TREE_TYPE (TREE_OPERAND (TREE_OPERAND (t, 0), 0)))\n+\t      == UNION_TYPE)))\n     /* Permit type-punning when accessing a union, provided the\n        access is directly through the union.  For example, this code does\n        not permit taking the address of a union member and then"}]}