{"sha": "cba2d79f3eb821eca3e1052e5421247c1c4e2f5a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JhMmQ3OWYzZWI4MjFlY2EzZTEwNTJlNTQyMTI0N2MxYzRlMmY1YQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "andrew_pinski@playstation.sony.com", "date": "2008-06-24T22:42:10Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2008-06-24T22:42:10Z"}, "message": "re PR middle-end/36594 (multiple regressions on powerpc at rev.136976)\n\n2008-06-24  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n\n        PR middle-end/36594\n        * builtins.c (expand_builtin_nonlocal_goto): Stabilize the address of\n        the memory instead of the memory itself for the save area.\n\nFrom-SVN: r137089", "tree": {"sha": "30abbb651fd78f0fe5a53a428889c619f8135859", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/30abbb651fd78f0fe5a53a428889c619f8135859"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a/comments", "author": null, "committer": null, "parents": [{"sha": "c4e3543d047ac58fa0c989d036ce8f3bbc0392a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c4e3543d047ac58fa0c989d036ce8f3bbc0392a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c4e3543d047ac58fa0c989d036ce8f3bbc0392a7"}], "stats": {"total": 10, "additions": 9, "deletions": 1}, "files": [{"sha": "c68706eeb9b350aa58c62dc8f087f2730df2affc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cba2d79f3eb821eca3e1052e5421247c1c4e2f5a", "patch": "@@ -1,3 +1,9 @@\n+2008-06-24  Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR middle-end/36594\n+\t* builtins.c (expand_builtin_nonlocal_goto): Stabilize the address of\n+\tthe memory instead of the memory itself for the save area.\n+\n 2008-06-24  Olivier Hainque  <hainque@adacore.com>\n             Nicolas Roche  <roche@adacore.com>\n "}, {"sha": "06ae07adaa97104fd4392e6ee21ce61f5cc1a408", "filename": "gcc/builtins.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cba2d79f3eb821eca3e1052e5421247c1c4e2f5a/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=cba2d79f3eb821eca3e1052e5421247c1c4e2f5a", "patch": "@@ -873,6 +873,9 @@ expand_builtin_nonlocal_goto (tree exp)\n   r_label = convert_memory_address (Pmode, r_label);\n   r_save_area = expand_normal (t_save_area);\n   r_save_area = convert_memory_address (Pmode, r_save_area);\n+  /* Copy the address of the save location to a register just in case it was based\n+    on the frame pointer.   */\n+  r_save_area = copy_to_reg (r_save_area);\n   r_fp = gen_rtx_MEM (Pmode, r_save_area);\n   r_sp = gen_rtx_MEM (STACK_SAVEAREA_MODE (SAVE_NONLOCAL),\n \t\t      plus_constant (r_save_area, GET_MODE_SIZE (Pmode)));\n@@ -887,7 +890,6 @@ expand_builtin_nonlocal_goto (tree exp)\n #endif\n     {\n       r_label = copy_to_reg (r_label);\n-      r_sp = copy_to_reg (r_sp);\n \n       emit_clobber (gen_rtx_MEM (BLKmode, gen_rtx_SCRATCH (VOIDmode)));\n       emit_clobber (gen_rtx_MEM (BLKmode, hard_frame_pointer_rtx));"}]}