{"sha": "34d6007ae0d0bc36beaef2da55c9324adacbc476", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzRkNjAwN2FlMGQwYmMzNmJlYWVmMmRhNTVjOTMyNGFkYWNiYzQ3Ng==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-10-23T02:45:07Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "1996-10-23T02:45:07Z"}, "message": "Fix minor bugs in float_to_usi and dp_to_sf\n\nFrom-SVN: r13000", "tree": {"sha": "96985767cf4ff073660604ee9f572547e8a83ab4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/96985767cf4ff073660604ee9f572547e8a83ab4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/34d6007ae0d0bc36beaef2da55c9324adacbc476", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34d6007ae0d0bc36beaef2da55c9324adacbc476", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34d6007ae0d0bc36beaef2da55c9324adacbc476", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34d6007ae0d0bc36beaef2da55c9324adacbc476/comments", "author": null, "committer": null, "parents": [{"sha": "d1b9c52c2f9ac1fd43e44a42c179ad503d281cce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1b9c52c2f9ac1fd43e44a42c179ad503d281cce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1b9c52c2f9ac1fd43e44a42c179ad503d281cce"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "b8bf9cd3d027e6f5f9a68fd0491344eb28ba193a", "filename": "gcc/config/fp-bit.c", "status": "modified", "additions": 11, "deletions": 3, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34d6007ae0d0bc36beaef2da55c9324adacbc476/gcc%2Fconfig%2Ffp-bit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34d6007ae0d0bc36beaef2da55c9324adacbc476/gcc%2Fconfig%2Ffp-bit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffp-bit.c?ref=34d6007ae0d0bc36beaef2da55c9324adacbc476", "patch": "@@ -1313,7 +1313,7 @@ float_to_usi (FLO_type arg_a)\n   if (a.normal_exp > 31)\n     return MAX_USI_INT;\n   else if (a.normal_exp > (FRACBITS + NGARDS))\n-    return a.fraction.ll << ((FRACBITS + NGARDS) - a.normal_exp);\n+    return a.fraction.ll << (a.normal_exp - (FRACBITS + NGARDS));\n   else\n     return a.fraction.ll >> ((FRACBITS + NGARDS) - a.normal_exp);\n }\n@@ -1388,10 +1388,18 @@ SFtype\n df_to_sf (DFtype arg_a)\n {\n   fp_number_type in;\n+  USItype sffrac;\n \n   unpack_d ((FLO_union_type *) & arg_a, &in);\n-  return __make_fp (in.class, in.sign, in.normal_exp,\n-\t\t    in.fraction.ll >> F_D_BITOFF);\n+\n+  sffrac = in.fraction.ll >> F_D_BITOFF;\n+\n+  /* We set the lowest guard bit in SFFRAC if we discarded any non\n+     zero bits.  */\n+  if ((in.fraction.ll & (((USItype) 1 << F_D_BITOFF) - 1)) != 0)\n+    sffrac |= 1;\n+\n+  return __make_fp (in.class, in.sign, in.normal_exp, sffrac);\n }\n \n #endif"}]}