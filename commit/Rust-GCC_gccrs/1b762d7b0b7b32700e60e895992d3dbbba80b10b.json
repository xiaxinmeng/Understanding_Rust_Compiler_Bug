{"sha": "1b762d7b0b7b32700e60e895992d3dbbba80b10b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWI3NjJkN2IwYjdiMzI3MDBlNjBlODk1OTkyZDNkYmJiYTgwYjEwYg==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2008-05-26T09:40:31Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-05-26T09:40:31Z"}, "message": "2008-05-26  Ed Schonberg  <schonberg@adacore.com>\n\n\t* inline.adb:\n\t(Cleanup_Scopes): For a protected operation, transfer finalization list\n\tto protected body subprogram, to force cleanup actions when needed.\n\nFrom-SVN: r135900", "tree": {"sha": "4d9294303cc6fa17fcdfc14d6422540b55788648", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d9294303cc6fa17fcdfc14d6422540b55788648"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b762d7b0b7b32700e60e895992d3dbbba80b10b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b762d7b0b7b32700e60e895992d3dbbba80b10b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b762d7b0b7b32700e60e895992d3dbbba80b10b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b762d7b0b7b32700e60e895992d3dbbba80b10b/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0359c57c615ea92fce5934a4b066cb6d9b9377ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0359c57c615ea92fce5934a4b066cb6d9b9377ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0359c57c615ea92fce5934a4b066cb6d9b9377ae"}], "stats": {"total": 6, "additions": 5, "deletions": 1}, "files": [{"sha": "296ff6b1df579ccb1ea5b526ce7590f46a5927e5", "filename": "gcc/ada/inline.adb", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b762d7b0b7b32700e60e895992d3dbbba80b10b/gcc%2Fada%2Finline.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b762d7b0b7b32700e60e895992d3dbbba80b10b/gcc%2Fada%2Finline.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finline.adb?ref=1b762d7b0b7b32700e60e895992d3dbbba80b10b", "patch": "@@ -847,11 +847,15 @@ package body Inline is\n             --  cleanup operations have been delayed, and the subprogram\n             --  has been rewritten in the expansion of the enclosing\n             --  protected body. It is the corresponding subprogram that\n-            --  may require the cleanup operations.\n+            --  may require the cleanup operations, so propagate the\n+            --  information that triggers cleanup activity.\n \n             Set_Uses_Sec_Stack\n               (Protected_Body_Subprogram (Scop),\n                 Uses_Sec_Stack (Scop));\n+            Set_Finalization_Chain_Entity\n+              (Protected_Body_Subprogram (Scop),\n+                Finalization_Chain_Entity (Scop));\n             Scop := Protected_Body_Subprogram (Scop);\n          end if;\n "}]}