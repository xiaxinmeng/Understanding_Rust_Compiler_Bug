{"sha": "6176c2a993ffb40b937e30bbce1f7cce171c92ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjE3NmMyYTk5M2ZmYjQwYjkzN2UzMGJiY2UxZjdjY2UxNzFjOTJlYw==", "commit": {"author": {"name": "Nicola Pero", "email": "nicola.pero@meta-innovation.com", "date": "2010-10-09T20:11:02Z"}, "committer": {"name": "Nicola Pero", "email": "nicola@gcc.gnu.org", "date": "2010-10-09T20:11:02Z"}, "message": "In libobjc/: 2010-10-09 Nicola Pero <nicola.pero@meta-innovation.com>\n\nIn libobjc/:\n2010-10-09  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n        * objc/objc-api.h (struct objc_super, Super, Super_t,\n        objc_msg_lookup_super, objc_msg_sendv, objc_msg_forward,\n        objc_msg_forward2): Declarations moved to objc/message.h.  Include\n        message.h here.\n        * objc/message.h: Added such declarations; updated comments.\n\nFrom-SVN: r165236", "tree": {"sha": "0c429c12b12d0a09da825834eb01fa1e1dd730ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c429c12b12d0a09da825834eb01fa1e1dd730ef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6176c2a993ffb40b937e30bbce1f7cce171c92ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6176c2a993ffb40b937e30bbce1f7cce171c92ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6176c2a993ffb40b937e30bbce1f7cce171c92ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6176c2a993ffb40b937e30bbce1f7cce171c92ec/comments", "author": {"login": "Nico-31415", "id": 94470564, "node_id": "U_kgDOBaGBpA", "avatar_url": "https://avatars.githubusercontent.com/u/94470564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nico-31415", "html_url": "https://github.com/Nico-31415", "followers_url": "https://api.github.com/users/Nico-31415/followers", "following_url": "https://api.github.com/users/Nico-31415/following{/other_user}", "gists_url": "https://api.github.com/users/Nico-31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nico-31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nico-31415/subscriptions", "organizations_url": "https://api.github.com/users/Nico-31415/orgs", "repos_url": "https://api.github.com/users/Nico-31415/repos", "events_url": "https://api.github.com/users/Nico-31415/events{/privacy}", "received_events_url": "https://api.github.com/users/Nico-31415/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5074d72c59a2d98e1c5162b1144d060d319bd519", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5074d72c59a2d98e1c5162b1144d060d319bd519", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5074d72c59a2d98e1c5162b1144d060d319bd519"}], "stats": {"total": 87, "additions": 55, "deletions": 32}, "files": [{"sha": "63c2a6410b156bdb74e75ac87109443025812e4f", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6176c2a993ffb40b937e30bbce1f7cce171c92ec/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6176c2a993ffb40b937e30bbce1f7cce171c92ec/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=6176c2a993ffb40b937e30bbce1f7cce171c92ec", "patch": "@@ -1,3 +1,11 @@\n+2010-10-09  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* objc/objc-api.h (struct objc_super, Super, Super_t,\n+\tobjc_msg_lookup_super, objc_msg_sendv, objc_msg_forward,\n+\tobjc_msg_forward2): Declarations moved to objc/message.h.  Include\n+\tmessage.h here.\n+\t* objc/message.h: Added such declarations; updated comments.\n+\n 2010-10-06  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tImplemented fast enumeration for Objective-C."}, {"sha": "f0038e714acec7774a13c8935c8deed857264cf0", "filename": "libobjc/objc/message.h", "status": "modified", "additions": 41, "deletions": 2, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6176c2a993ffb40b937e30bbce1f7cce171c92ec/libobjc%2Fobjc%2Fmessage.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6176c2a993ffb40b937e30bbce1f7cce171c92ec/libobjc%2Fobjc%2Fmessage.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fobjc%2Fmessage.h?ref=6176c2a993ffb40b937e30bbce1f7cce171c92ec", "patch": "@@ -33,7 +33,16 @@ extern \"C\" {\n #include \"objc.h\"\n #include \"objc-decls.h\"\n \n-/* This file includes declarations of the messaging functions and types.  */\n+/* This file includes declarations of the messaging functions and\n+   types.\n+*/\n+\n+/* Compatibility note: the messaging function is one area where the\n+   GNU runtime and the Apple/NeXT runtime differ significantly.  If\n+   you can, it is recommended that you use higher-level facilities\n+   (provided by a Foundation library such as GNUstep Base) to perform\n+   forwarding or other advanced messaging tricks.\n+*/\n \n typedef void* retval_t;\t\t/* return value */\n typedef void(*apply_t)(void);\t/* function pointer */\n@@ -44,7 +53,37 @@ typedef union arglist {\n \n objc_EXPORT IMP objc_msg_lookup(id receiver, SEL op);\n \n-/* TODO: Add the remaining messaging declarations from objc-api.h.  */\n+/*\n+ * Structure used when a message is send to a class's super class.\n+ * The compiler generates one of these structures and passes it to\n+ * objc_msg_lookup_super.\n+ */\n+typedef struct objc_super {\n+  id      self;       /* Id of the object sending the message. */\n+#ifdef __cplusplus\n+  /* The new version of the API will always use 'super_class'.  */\n+  Class super_class;\n+#else\n+  Class class;        /* Object's super class. */\n+#endif\n+} Super, *Super_t;\n+\n+objc_EXPORT IMP objc_msg_lookup_super(Super_t super, SEL sel);\n+\n+objc_EXPORT retval_t objc_msg_sendv(id, SEL, arglist_t);\n+\n+/*\n+ * Hooks for method forwarding. This makes it easy to substitute a\n+ * library, such as ffcall, that implements closures, thereby avoiding\n+ * gcc's __builtin_apply problems.  __objc_msg_forward2's result will\n+ * be preferred over that of __objc_msg_forward if both are set and\n+ * return non-NULL.\n+ *\n+ * TODO: The API should define objc_set_msg_forward_handler () or\n+ * similar instead of these hooks.\n+ */\n+objc_EXPORT IMP (*__objc_msg_forward)(SEL);\n+objc_EXPORT IMP (*__objc_msg_forward2)(id, SEL);\n \n #ifdef __cplusplus\n }"}, {"sha": "ff457f2cec7c6a048ae37e15f679ed0b06d35729", "filename": "libobjc/objc/objc-api.h", "status": "modified", "additions": 6, "deletions": 30, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6176c2a993ffb40b937e30bbce1f7cce171c92ec/libobjc%2Fobjc%2Fobjc-api.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6176c2a993ffb40b937e30bbce1f7cce171c92ec/libobjc%2Fobjc%2Fobjc-api.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fobjc%2Fobjc-api.h?ref=6176c2a993ffb40b937e30bbce1f7cce171c92ec", "patch": "@@ -289,26 +289,12 @@ typedef struct objc_category {\n \t\t\t\t\t         conformed to */\n } Category, *Category_t;\n \n-/*\n-** Structure used when a message is send to a class's super class.  The\n-** compiler generates one of these structures and passes it to\n-** objc_msg_super.\n-*/\n-typedef struct objc_super {\n-  id      self;                           /* Id of the object sending\n-                                                the message. */\n-#ifdef __cplusplus\n-  Class super_class;\n-#else\n-  Class class;                              /* Object's super class. */\n-#endif\n-} Super, *Super_t;\n-\n-objc_EXPORT IMP objc_msg_lookup_super(Super_t super, SEL sel);\n-\n-objc_EXPORT retval_t objc_msg_sendv(id, SEL, arglist_t);\n-\n-\n+/* We include message.h for compatibility with the old objc-api.h\n+   which included the declarations currently in message.h.  The\n+   Apple/NeXT runtime does not do this and only include message.h in\n+   objc-runtime.h.  It does not matter that much since most of the\n+   definitions in message.h are runtime-specific.  */\n+#include \"message.h\"\n \n /*\n ** This is a hook which is called by objc_lookup_class and\n@@ -359,16 +345,6 @@ objc_free(void *mem);\n #include \"deprecated/objc_valloc.h\"\n #include \"deprecated/objc_malloc.h\"\n \n-/*\n-**  Hooks for method forwarding. This makes it easy to substitute a\n-**  library, such as ffcall, that implements closures, thereby avoiding\n-**  gcc's __builtin_apply problems.  __objc_msg_forward2's result will\n-**  be preferred over that of __objc_msg_forward if both are set and\n-**  return non-NULL.\n-*/\n-objc_EXPORT IMP (*__objc_msg_forward)(SEL);\n-objc_EXPORT IMP (*__objc_msg_forward2)(id, SEL);\n-\n #include \"deprecated/objc_unexpected_exception.h\"\n \n objc_EXPORT Method_t class_get_class_method(MetaClass _class, SEL aSel);"}]}