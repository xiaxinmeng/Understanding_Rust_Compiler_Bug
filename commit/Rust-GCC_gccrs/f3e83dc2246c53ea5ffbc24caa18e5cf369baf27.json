{"sha": "f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjNlODNkYzIyNDZjNTNlYTVmZmJjMjRjYWExOGU1Y2YzNjliYWYyNw==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "2002-06-10T17:10:21Z"}, "committer": {"name": "Hans Boehm", "email": "hboehm@gcc.gnu.org", "date": "2002-06-10T17:10:21Z"}, "message": "gc_locks.h (GC_test_and_set): Support Linux/mips.\n\n\t* include/private/gc_locks.h (GC_test_and_set): Support\n\tLinux/mips.\n\t(GC_TEST_AND_SET_DEFINED): Likewise.\n\n\t* include/private/gcconfig.h (DYNAMIC_LOADING): Defined for\n\tLinux/mips.\n\t(DATAEND): Likewise.\n\t(LINUX_STACKBOTTOM): Likewise.\n\t(STACKBOTTOM): Removed for Linux/mips.\n\nFrom-SVN: r54444", "tree": {"sha": "d5b4434c00202857399323f0c5395a934fbe5a9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d5b4434c00202857399323f0c5395a934fbe5a9d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/comments", "author": null, "committer": null, "parents": [{"sha": "ad854f24ef49da1ee1b878db4ac6bd17bb4ae04c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ad854f24ef49da1ee1b878db4ac6bd17bb4ae04c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ad854f24ef49da1ee1b878db4ac6bd17bb4ae04c"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "2c8ab1a7a05d32303c871b481de076db011bebe3", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "patch": "@@ -1,3 +1,15 @@\n+2002-06-09  H.J. Lu  (hjl@gnu.org)\n+\n+\t* include/private/gc_locks.h (GC_test_and_set): Support\n+\tLinux/mips.\n+\t(GC_TEST_AND_SET_DEFINED): Likewise.\n+\n+\t* include/private/gcconfig.h (DYNAMIC_LOADING): Defined for\n+\tLinux/mips.\n+\t(DATAEND): Likewise.\n+\t(LINUX_STACKBOTTOM): Likewise.\n+\t(STACKBOTTOM): Removed for Linux/mips.\n+\n Sun May 19 11:32:03 2002  Mark P Mitchell  <mark@codesourcery.com>\n \n \t* irix_threads.cc (GC_pthread_detach): Do not use REAL_FUNC."}, {"sha": "04d3af986c039a7f6003c4e57e4fc84eaf2ae307", "filename": "boehm-gc/include/private/gc_locks.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/boehm-gc%2Finclude%2Fprivate%2Fgc_locks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/boehm-gc%2Finclude%2Fprivate%2Fgc_locks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2Fprivate%2Fgc_locks.h?ref=f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "patch": "@@ -219,7 +219,11 @@\n #    define GC_TEST_AND_SET_DEFINED\n #  endif\n #  ifdef MIPS\n-#    if __mips < 3 || !(defined (_ABIN32) || defined(_ABI64)) \\\n+#    ifdef LINUX\n+#      include <sys/tas.h>\n+#      define GC_test_and_set(addr) _test_and_set((int *) addr,1)\n+#      define GC_TEST_AND_SET_DEFINED\n+#    elif __mips < 3 || !(defined (_ABIN32) || defined(_ABI64)) \\\n \t|| !defined(_COMPILER_VERSION) || _COMPILER_VERSION < 700\n #        define GC_test_and_set(addr) test_and_set(addr, 1)\n #    else"}, {"sha": "106cbf82bd0fe6ed12be59d45a05b91d05cbf373", "filename": "boehm-gc/include/private/gcconfig.h", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/boehm-gc%2Finclude%2Fprivate%2Fgcconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3e83dc2246c53ea5ffbc24caa18e5cf369baf27/boehm-gc%2Finclude%2Fprivate%2Fgcconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2Fprivate%2Fgcconfig.h?ref=f3e83dc2246c53ea5ffbc24caa18e5cf369baf27", "patch": "@@ -1141,15 +1141,14 @@\n       /* This was developed for a linuxce style platform.  Probably\t*/\n       /* needs to be tweaked for workstation class machines.\t\t*/\n #     define OS_TYPE \"LINUX\"\n+#     define DYNAMIC_LOADING\n+      extern int _end[];\n+#     define DATAEND (_end)\n       extern int __data_start[];\n #     define DATASTART ((ptr_t)(__data_start))\n #     define ALIGNMENT 4\n #     define USE_GENERIC_PUSH_REGS\n-#     define STACKBOTTOM ((ptr_t)0x7fff8000)\n-        /* Older toolchains may need 0x80000000.\t*/\n-\t/* In many cases, this should probably use LINUX_STACKBOTTOM \t*/\n-\t/* instead. But some kernel versions seem to give the wrong\t*/\n-\t/* value from /proc.\t\t\t\t\t\t*/\n+#     define LINUX_STACKBOTTOM\n #   endif /* Linux */\n #   ifdef EWS4800\n #      define HEURISTIC2"}]}