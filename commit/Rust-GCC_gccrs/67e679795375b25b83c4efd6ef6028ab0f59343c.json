{"sha": "67e679795375b25b83c4efd6ef6028ab0f59343c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdlNjc5Nzk1Mzc1YjI1YjgzYzRlZmQ2ZWY2MDI4YWIwZjU5MzQzYw==", "commit": {"author": {"name": "David Ung", "email": "davidu@mips.com", "date": "2010-05-03T20:43:19Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2010-05-03T20:43:19Z"}, "message": "mips.c (mips_output_division): When GENERATE_DIVIDE_TRAPS...\n\n* config/mips/mips.c (mips_output_division): When GENERATE_DIVIDE_TRAPS,\nemit the trap instruction before the divide for TUNE_74K.\n\nCo-Authored-By: James E. Wilson <wilson@codesourcery.com>\n\nFrom-SVN: r159004", "tree": {"sha": "02a65c73b7cecdd86eda43be32cc1c778ebfc653", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/02a65c73b7cecdd86eda43be32cc1c778ebfc653"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67e679795375b25b83c4efd6ef6028ab0f59343c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e679795375b25b83c4efd6ef6028ab0f59343c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67e679795375b25b83c4efd6ef6028ab0f59343c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e679795375b25b83c4efd6ef6028ab0f59343c/comments", "author": null, "committer": null, "parents": [{"sha": "35ad90d5103613ec6a4839bfea1d790ecb671469", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35ad90d5103613ec6a4839bfea1d790ecb671469", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35ad90d5103613ec6a4839bfea1d790ecb671469"}], "stats": {"total": 23, "additions": 18, "deletions": 5}, "files": [{"sha": "a3b1c94c4e669fd0984088fb04d26858be213402", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e679795375b25b83c4efd6ef6028ab0f59343c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e679795375b25b83c4efd6ef6028ab0f59343c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=67e679795375b25b83c4efd6ef6028ab0f59343c", "patch": "@@ -1,3 +1,9 @@\n+2010-05-03  David Ung <davidu@mips.com>\n+\t    James E. Wilson  <wilson@codesourcery.com>\n+\n+\t* config/mip/mips.c (mips_output_division): When GENERATE_DIVIDE_TRAPS,\n+\temit the trap instruction before the divide for TUNE_74K.\n+\n 2010-05-03  Steven Bosscher  <steven@gcc.gnu.org>\n \n \t* doc/tm.texi (defmac SMALL_REGISTER_CLASSES): Remove."}, {"sha": "345645dbb2546d6e6d83322f2faa5f0b4a703467", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 12, "deletions": 5, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e679795375b25b83c4efd6ef6028ab0f59343c/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e679795375b25b83c4efd6ef6028ab0f59343c/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=67e679795375b25b83c4efd6ef6028ab0f59343c", "patch": "@@ -1,6 +1,6 @@\n /* Subroutines used for MIPS code generation.\n    Copyright (C) 1989, 1990, 1991, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009\n+   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n    Free Software Foundation, Inc.\n    Contributed by A. Lichnewsky, lich@inria.inria.fr.\n    Changes by Michael Meissner, meissner@osf.org.\n@@ -11817,10 +11817,17 @@ mips_output_division (const char *division, rtx *operands)\n \t  s = \"bnez\\t%2,1f\\n\\tbreak\\t7\\n1:\";\n \t}\n       else if (GENERATE_DIVIDE_TRAPS)\n-        {\n-\t  output_asm_insn (s, operands);\n-\t  s = \"teq\\t%2,%.,7\";\n-        }\n+\t{\n+\t  /* Avoid long replay penalty on load miss by putting the trap before\n+\t     the divide.  */\n+\t  if (TUNE_74K)\n+\t    output_asm_insn (\"teq\\t%2,%.,7\", operands);\n+\t  else\n+\t    {\n+\t      output_asm_insn (s, operands);\n+\t      s = \"teq\\t%2,%.,7\";\n+\t    }\n+\t}\n       else\n \t{\n \t  output_asm_insn (\"%(bne\\t%2,%.,1f\", operands);"}]}