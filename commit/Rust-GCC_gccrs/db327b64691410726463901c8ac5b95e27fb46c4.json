{"sha": "db327b64691410726463901c8ac5b95e27fb46c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGIzMjdiNjQ2OTE0MTA3MjY0NjM5MDFjOGFjNWI5NWUyN2ZiNDZjNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2012-05-04T22:43:33Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-05-04T22:43:33Z"}, "message": "semantics.c (cxx_eval_constant_expression, [...]): Tidy.\n\n2012-05-04  Paolo Carlini  <paolo.carlini@oracle.com>\n\n    \t* semantics.c (cxx_eval_constant_expression, case CONVERT_EXPR): Tidy.\n\nFrom-SVN: r187184", "tree": {"sha": "e4d3e47ba00ad6cf104a4fb065dff4fc844891bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4d3e47ba00ad6cf104a4fb065dff4fc844891bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db327b64691410726463901c8ac5b95e27fb46c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db327b64691410726463901c8ac5b95e27fb46c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db327b64691410726463901c8ac5b95e27fb46c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db327b64691410726463901c8ac5b95e27fb46c4/comments", "author": null, "committer": null, "parents": [{"sha": "683c600b1fb53494c3cdcde83da5b3cb518cfa70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/683c600b1fb53494c3cdcde83da5b3cb518cfa70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/683c600b1fb53494c3cdcde83da5b3cb518cfa70"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "4a5c36fdca890f79a2444d5d3d55fad9618c5264", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db327b64691410726463901c8ac5b95e27fb46c4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db327b64691410726463901c8ac5b95e27fb46c4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=db327b64691410726463901c8ac5b95e27fb46c4", "patch": "@@ -1,3 +1,7 @@\n+2012-05-04  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* semantics.c (cxx_eval_constant_expression, case CONVERT_EXPR): Tidy.\n+\n 2012-05-04  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/53166"}, {"sha": "fbb26b223755510808031c08ecf32f0b5a77b950", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db327b64691410726463901c8ac5b95e27fb46c4/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db327b64691410726463901c8ac5b95e27fb46c4/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=db327b64691410726463901c8ac5b95e27fb46c4", "patch": "@@ -7757,18 +7757,16 @@ cxx_eval_constant_expression (const constexpr_call *call, tree t,\n     case NOP_EXPR:\n       {\n \ttree oldop = TREE_OPERAND (t, 0);\n-\ttree op = oldop;\n-\ttree to = TREE_TYPE (t);\n-\top = cxx_eval_constant_expression (call, TREE_OPERAND (t, 0),\n-\t\t\t\t\t   allow_non_constant, addr,\n-\t\t\t\t\t   non_constant_p);\n+\ttree op = cxx_eval_constant_expression (call, oldop,\n+\t\t\t\t\t\tallow_non_constant, addr,\n+\t\t\t\t\t\tnon_constant_p);\n \tif (*non_constant_p)\n \t  return t;\n \tif (op == oldop)\n \t  /* We didn't fold at the top so we could check for ptr-int\n \t     conversion.  */\n \t  return fold (t);\n-\tr = fold_build1 (TREE_CODE (t), to, op);\n+\tr = fold_build1 (TREE_CODE (t), TREE_TYPE (t), op);\n \t/* Conversion of an out-of-range value has implementation-defined\n \t   behavior; the language considers it different from arithmetic\n \t   overflow, which is undefined.  */"}]}