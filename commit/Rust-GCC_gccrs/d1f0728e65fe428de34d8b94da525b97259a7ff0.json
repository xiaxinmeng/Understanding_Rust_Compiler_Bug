{"sha": "d1f0728e65fe428de34d8b94da525b97259a7ff0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFmMDcyOGU2NWZlNDI4ZGUzNGQ4Yjk0ZGE1MjViOTcyNTlhN2ZmMA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-01-25T10:25:21Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-01-25T10:25:21Z"}, "message": "re PR target/34856 (ICE with some constant vectors)\n\n\tPR target/34856\n\t* simplifx-rtx.c (simplify_const_binary_operation) [VEC_CONCAT]:\n\tConsider only CONST_INT, CONST_DOUBLE and CONST_FIXED as constant\n\tvector elements.\n\ntestsuite/ChangeLog:\n\n\tPR target/34856\n\t* gcc.dg/pr34856.c: Use pointer mode for \"pin\".\n\nFrom-SVN: r131821", "tree": {"sha": "c3fc2a21f03a244f3c80d3dd22acea05c273d0d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3fc2a21f03a244f3c80d3dd22acea05c273d0d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1f0728e65fe428de34d8b94da525b97259a7ff0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1f0728e65fe428de34d8b94da525b97259a7ff0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1f0728e65fe428de34d8b94da525b97259a7ff0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1f0728e65fe428de34d8b94da525b97259a7ff0/comments", "author": null, "committer": null, "parents": [{"sha": "80e67011e309ed891ee8a5e736311b61be446895", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80e67011e309ed891ee8a5e736311b61be446895", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80e67011e309ed891ee8a5e736311b61be446895"}], "stats": {"total": 32, "additions": 26, "deletions": 6}, "files": [{"sha": "4e065f4cde7a0d0edbd317817e0a7f34a134f59b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d1f0728e65fe428de34d8b94da525b97259a7ff0", "patch": "@@ -1,3 +1,10 @@\n+2008-01-25  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/34856\n+\t* simplifx-rtx.c (simplify_const_binary_operation) [VEC_CONCAT]:\n+\tConsider only CONST_INT, CONST_DOUBLE and CONST_FIXED as constant\n+\tvector elements.\n+\n 2008-01-25  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/33333"}, {"sha": "f8756040ce0f17d6e6162ecf474f5a08d5268d6e", "filename": "gcc/simplify-rtx.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2Fsimplify-rtx.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2Fsimplify-rtx.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsimplify-rtx.c?ref=d1f0728e65fe428de34d8b94da525b97259a7ff0", "patch": "@@ -2916,7 +2916,12 @@ simplify_const_binary_operation (enum rtx_code code, enum machine_mode mode,\n \n   if (VECTOR_MODE_P (mode)\n       && code == VEC_CONCAT\n-      && CONSTANT_P (op0) && CONSTANT_P (op1))\n+      && (CONST_INT_P (op0)\n+\t  || GET_CODE (op0) == CONST_DOUBLE\n+\t  || GET_CODE (op0) == CONST_FIXED)\n+      && (CONST_INT_P (op1)\n+\t  || GET_CODE (op1) == CONST_DOUBLE\n+\t  || GET_CODE (op1) == CONST_FIXED))\n     {\n       unsigned n_elts = GET_MODE_NUNITS (mode);\n       rtvec v = rtvec_alloc (n_elts);"}, {"sha": "007bb71c1ca966a05b202d5be4698f6776bfece9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d1f0728e65fe428de34d8b94da525b97259a7ff0", "patch": "@@ -1,3 +1,8 @@\n+2008-01-25  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/34856\n+\t* gcc.dg/pr34856.c: Use pointer mode for \"pin\".\n+\n 2008-01-25  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/33333\n@@ -9,7 +14,7 @@\n \n 2008-01-25  Olga Golovanevsky  <olga@il.ibm.com>\n \n-        * gcc.dg/struct/wo_prof_malloc_size_var.c: UnXFAIL.\n+\t* gcc.dg/struct/wo_prof_malloc_size_var.c: UnXFAIL.\n \n 2008-01-24  Daniel Franke  <franke.daniel@gmail.com>\n "}, {"sha": "786639b3575a40019d4da8488894fbc623e14160", "filename": "gcc/testsuite/gcc.dg/pr34856.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34856.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1f0728e65fe428de34d8b94da525b97259a7ff0/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34856.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34856.c?ref=d1f0728e65fe428de34d8b94da525b97259a7ff0", "patch": "@@ -2,20 +2,23 @@\n /* { dg-options \"-O2\" } */\n /* { dg-options \"-O2 -msse2\" { target { i?86-*-* x86_64-*-* } } } */\n \n+typedef unsigned __attribute__ ((__mode__ (__pointer__))) uintptr_t;\n+\n #undef __vector\n-#define __vector __attribute__((vector_size(16) ))\n+#define __vector __attribute__ ((__vector_size__ (16)))\n \n typedef __vector signed char qword;\n-typedef __vector unsigned int VU32;\n+typedef __vector uintptr_t VU;\n \n extern short g[192 + 16];\n \n void f (qword);\n \n void f1 (unsigned ctr)\n {\n-  VU32 pin;\n-  pin = (VU32){(unsigned int) &g[16]};\n+  VU pin;\n+\n+  pin = (VU){(uintptr_t) &g[16]};\n   do\n     {\n       f ((qword) pin);"}]}