{"sha": "269b75261a0652b4c1d3a495ba0071941e344604", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY5Yjc1MjYxYTA2NTJiNGMxZDNhNDk1YmEwMDcxOTQxZTM0NDYwNA==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2004-11-03T19:55:30Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-11-03T19:55:30Z"}, "message": "re PR middle-end/18231 (Nested inline function not inlined)\n\n2004-11-03  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR tree-opt/18231\n        * tree.c (staticp) <case FUNCTION_DECL>: Nested functions are static\n        also.\n\nFrom-SVN: r90033", "tree": {"sha": "72ffe654f75f3c4c1d92b5e65f99d4e8e71bb917", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72ffe654f75f3c4c1d92b5e65f99d4e8e71bb917"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/269b75261a0652b4c1d3a495ba0071941e344604", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/269b75261a0652b4c1d3a495ba0071941e344604", "html_url": "https://github.com/Rust-GCC/gccrs/commit/269b75261a0652b4c1d3a495ba0071941e344604", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/269b75261a0652b4c1d3a495ba0071941e344604/comments", "author": null, "committer": null, "parents": [{"sha": "b00e4c238b56689ec1e81a647a0147bf9ff79306", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b00e4c238b56689ec1e81a647a0147bf9ff79306", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b00e4c238b56689ec1e81a647a0147bf9ff79306"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "5511a4bf95cd67bbccaed88f3421214dcb4cb946", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b75261a0652b4c1d3a495ba0071941e344604/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b75261a0652b4c1d3a495ba0071941e344604/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=269b75261a0652b4c1d3a495ba0071941e344604", "patch": "@@ -1,3 +1,9 @@\n+2004-11-03  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR tree-opt/18231\n+\t* tree.c (staticp) <case FUNCTION_DECL>: Nested functions are static\n+\talso.\n+\n 2004-11-03  Andrew MacLeod  <amacleod@redhat.com>\n \n \tPR tree-optimization/18270"}, {"sha": "3e40c2e7ad04eec14aad34e3d817427f04817c4f", "filename": "gcc/tree.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/269b75261a0652b4c1d3a495ba0071941e344604/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/269b75261a0652b4c1d3a495ba0071941e344604/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=269b75261a0652b4c1d3a495ba0071941e344604", "patch": "@@ -1573,11 +1573,10 @@ staticp (tree arg)\n   switch (TREE_CODE (arg))\n     {\n     case FUNCTION_DECL:\n-      /* Nested functions aren't static, since taking their address\n-\t involves a trampoline.  */\n-      return ((decl_function_context (arg) == 0 || DECL_NO_STATIC_CHAIN (arg))\n-\t      && ! DECL_NON_ADDR_CONST_P (arg)\n-\t      ? arg : NULL);\n+      /* Nested functions are static, even though taking their address will\n+\t involve a trampoline as we unnest the nested function and create\n+\t the trampoline on the tree level.  */\n+      return arg;\n \n     case VAR_DECL:\n       return ((TREE_STATIC (arg) || DECL_EXTERNAL (arg))"}]}