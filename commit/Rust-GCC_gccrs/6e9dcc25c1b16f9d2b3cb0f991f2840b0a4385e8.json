{"sha": "6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmU5ZGNjMjVjMWIxNmY5ZDJiM2NiMGY5OTFmMjg0MGIwYTQzODVlOA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@casey.cygnus.com", "date": "2000-04-20T05:53:58Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-04-20T05:53:58Z"}, "message": "typeck.c (build_x_function_call): Resolve an OFFSET_REF.\n\n        * typeck.c (build_x_function_call): Resolve an OFFSET_REF.\n\n        * call.c (joust): Exit early if we get the same function, too.\n\n        * decl2.c (key_method): Return NULL_TREE for template classes.\n        (import_export_class): Don't need to check for template classes.\n\nFrom-SVN: r33273", "tree": {"sha": "5c00cfe370fd1a8509cf66030a91d8fa23d2eb8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c00cfe370fd1a8509cf66030a91d8fa23d2eb8c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/comments", "author": null, "committer": null, "parents": [{"sha": "af98124ef9a698e8b82e4e794fd421ea0ccb3054", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af98124ef9a698e8b82e4e794fd421ea0ccb3054", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af98124ef9a698e8b82e4e794fd421ea0ccb3054"}], "stats": {"total": 23, "additions": 17, "deletions": 6}, "files": [{"sha": "9096b120a2e854b0753fd3b29b468ffdfc184058", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "patch": "@@ -1,3 +1,12 @@\n+2000-04-20  Jason Merrill  <jason@casey.cygnus.com>\n+\n+\t* typeck.c (build_x_function_call): Resolve an OFFSET_REF.\n+\n+\t* call.c (joust): Exit early if we get the same function, too.\n+\n+\t* decl2.c (key_method): Return NULL_TREE for template classes.\n+\t(import_export_class): Don't need to check for template classes.\n+\n 2000-04-18  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* lex.c: Remove references to cccp.c."}, {"sha": "085e264e4851058348149e7fc128d9198bc537f8", "filename": "gcc/cp/call.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "patch": "@@ -4923,8 +4923,9 @@ joust (cand1, cand2, warn)\n     return -1;\n \n   /* If we have two pseudo-candidates for conversions to the same type,\n-     arbitrarily pick one.  */\n-  if (TYPE_P (cand1->fn) && cand1->fn == cand2->fn)\n+     or two candidates for the same function, arbitrarily pick one.  */\n+  if (cand1->fn == cand2->fn\n+      && (TYPE_P (cand1->fn) || DECL_P (cand1->fn)))\n     return 1;\n \n   /* a viable function F1"}, {"sha": "444b8a794687b7107cc3a4397734b1c0beed0fe2", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "patch": "@@ -2422,6 +2422,7 @@ key_method (type)\n   tree method;\n \n   if (TYPE_FOR_JAVA (type)\n+      || CLASSTYPE_TEMPLATE_INSTANTIATION (type)\n       || CLASSTYPE_INTERFACE_KNOWN (type))\n     return NULL_TREE;\n \n@@ -2528,8 +2529,7 @@ import_export_class (ctype)\n   /* Base our import/export status on that of the first non-inline,\n      non-pure virtual function, if any.  */\n   if (import_export == 0\n-      && TYPE_POLYMORPHIC_P (ctype)\n-      && ! CLASSTYPE_TEMPLATE_INSTANTIATION (ctype))\n+      && TYPE_POLYMORPHIC_P (ctype))\n     {\n       tree method = key_method (ctype);\n       if (method)"}, {"sha": "7d12d950880b818a2c5481e719e700a1b488870f", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=6e9dcc25c1b16f9d2b3cb0f991f2840b0a4385e8", "patch": "@@ -2574,6 +2574,9 @@ build_x_function_call (function, params, decl)\n \t\t\t\tTYPE_BINFO (type), LOOKUP_NORMAL);\n     }\n     \n+  if (TREE_CODE (function) == OFFSET_REF)\n+    function = resolve_offset_ref (function);\n+\n   if ((TREE_CODE (function) == FUNCTION_DECL\n        && DECL_STATIC_FUNCTION_P (function))\n       || (TREE_CODE (function) == TEMPLATE_DECL\n@@ -2669,8 +2672,6 @@ build_x_function_call (function, params, decl)\n       return build_method_call (decl, function, params,\n \t\t\t\tNULL_TREE, LOOKUP_NORMAL);\n     }\n-  else if (TREE_CODE (function) == OFFSET_REF)\n-    my_friendly_abort (20000406);\n   else if (TREE_CODE (function) == COMPONENT_REF\n \t   && type == unknown_type_node)\n     {"}]}