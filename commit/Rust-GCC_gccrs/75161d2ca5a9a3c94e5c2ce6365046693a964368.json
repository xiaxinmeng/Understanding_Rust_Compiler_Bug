{"sha": "75161d2ca5a9a3c94e5c2ce6365046693a964368", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzUxNjFkMmNhNWE5YTNjOTRlNWMyY2U2MzY1MDQ2NjkzYTk2NDM2OA==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2011-08-19T15:01:41Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2011-08-19T15:01:41Z"}, "message": "tree-ssa-math-opts.c (convert_plusminus_to_widen): Convert add_rhs to the correct type.\n\n2011-08-19  Andrew Stubbs  <ams@codesourcery.com>\n\n\tgcc/\n\t* tree-ssa-math-opts.c (convert_plusminus_to_widen): Convert add_rhs\n\tto the correct type.\n\n\tgcc/testsuite/\n\t* gcc.target/arm/wmul-10.c: New file.\n\nFrom-SVN: r177909", "tree": {"sha": "9b1018774c7a62489a737ecc1f5a3e86d81f5bef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b1018774c7a62489a737ecc1f5a3e86d81f5bef"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75161d2ca5a9a3c94e5c2ce6365046693a964368", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75161d2ca5a9a3c94e5c2ce6365046693a964368", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75161d2ca5a9a3c94e5c2ce6365046693a964368", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75161d2ca5a9a3c94e5c2ce6365046693a964368/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6a228c2c0e38da47c08d70a90f41301b1278357a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a228c2c0e38da47c08d70a90f41301b1278357a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a228c2c0e38da47c08d70a90f41301b1278357a"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "ed79f12c910fe25421c5dcbd28f152edd25c564c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75161d2ca5a9a3c94e5c2ce6365046693a964368", "patch": "@@ -1,3 +1,8 @@\n+2011-08-19  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* tree-ssa-math-opts.c (convert_plusminus_to_widen): Convert add_rhs\n+\tto the correct type.\n+\n 2011-08-19  Andrew Stubbs  <ams@codesourcery.com>\n \n \t* tree-ssa-math-opts.c (convert_mult_to_widen): Better handle"}, {"sha": "a711cc355a41cb7a771ccd632c3d49c04580ca48", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=75161d2ca5a9a3c94e5c2ce6365046693a964368", "patch": "@@ -1,3 +1,7 @@\n+2011-08-19  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* gcc.target/arm/wmul-10.c: New file.\n+\n 2011-08-19  Andrew Stubbs  <ams@codesourcery.com>\n \n \t* gcc.target/arm/wmul-9.c: New file."}, {"sha": "5ffd169ba954aa9cb11adec6e55fe8162fe908d4", "filename": "gcc/testsuite/gcc.target/arm/wmul-10.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fwmul-10.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fwmul-10.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fwmul-10.c?ref=75161d2ca5a9a3c94e5c2ce6365046693a964368", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-require-effective-target arm_dsp } */\n+\n+\n+unsigned long long\n+foo (unsigned short a, unsigned short *b, unsigned short *c)\n+{\n+  return (unsigned)a + (unsigned long long)*b * (unsigned long long)*c;\n+}\n+\n+/* { dg-final { scan-assembler \"umlal\" } } */"}, {"sha": "73206adceba31e63bd7b7ea2101b8494ee1db64f", "filename": "gcc/tree-ssa-math-opts.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2Ftree-ssa-math-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75161d2ca5a9a3c94e5c2ce6365046693a964368/gcc%2Ftree-ssa-math-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-math-opts.c?ref=75161d2ca5a9a3c94e5c2ce6365046693a964368", "patch": "@@ -2369,6 +2369,10 @@ convert_plusminus_to_widen (gimple_stmt_iterator *gsi, gimple stmt,\n       mult_rhs2 = build_and_insert_cast (gsi, loc, tmp, mult_rhs2);\n     }\n \n+  if (!useless_type_conversion_p (type, TREE_TYPE (add_rhs)))\n+    add_rhs = build_and_insert_cast (gsi, loc, create_tmp_var (type, NULL),\n+\t\t\t\t     add_rhs);\n+\n   gimple_assign_set_rhs_with_ops_1 (gsi, wmult_code, mult_rhs1, mult_rhs2,\n \t\t\t\t    add_rhs);\n   update_stmt (gsi_stmt (*gsi));"}]}