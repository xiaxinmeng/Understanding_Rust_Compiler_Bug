{"sha": "9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWU1MWRkYWE2ZTQ5MDJlNzM0YjgwM2I5ZWRlODYxZWI0OTliM2JkMA==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2006-03-25T00:54:40Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2006-03-25T00:54:40Z"}, "message": "dwarf2out.c (is_c_family): Understand new DWARF3 language types.\n\n2006-03-24  Geoffrey Keating  <geoffk@apple.com>\n\n\t* dwarf2out.c (is_c_family): Understand new DWARF3 language types.\n\t(is_cxx): Likewise.\n\t(gen_compile_unit_die): Use new language types for Objective-C and\n\tObjective-C++.\n\t(dwarf2out_decl): Use is_cxx rather than testing explicitly against\n\tDW_LANG_C_plus_plus.\n\nIndex: testsuite/ChangeLog\n2006-03-24  Geoffrey Keating  <geoffk@apple.com>\n\n\t* objc.dg/dwarf-2.m: New.\n\t* obj-c++.dg/dwarf-2.mm: New.\n\nFrom-SVN: r112372", "tree": {"sha": "742a1c15b58d44e56a4d44fbc55e5d25ed059610", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/742a1c15b58d44e56a4d44fbc55e5d25ed059610"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "affceb31323ae15961f9327ad1f6006a6933b328", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/affceb31323ae15961f9327ad1f6006a6933b328", "html_url": "https://github.com/Rust-GCC/gccrs/commit/affceb31323ae15961f9327ad1f6006a6933b328"}], "stats": {"total": 33, "additions": 27, "deletions": 6}, "files": [{"sha": "6ef0675e6b5d50aef7b2cb66e1e490aed34405cb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "patch": "@@ -5,6 +5,13 @@\n \n 2006-03-24  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* dwarf2out.c (is_c_family): Understand new DWARF3 language types.\n+\t(is_cxx): Likewise.\n+\t(gen_compile_unit_die): Use new language types for Objective-C and\n+\tObjective-C++.\n+\t(dwarf2out_decl): Use is_cxx rather than testing explicitly against\n+\tDW_LANG_C_plus_plus.\n+\n \tPR 26793\n \t* config/t-darwin (crt3.o): Work around bug 26840.\n \t* config/darwin-crt3.c: Rewrite."}, {"sha": "6255c40208f4f4b2fa369475a734ece388437f51", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "patch": "@@ -5326,17 +5326,19 @@ is_c_family (void)\n {\n   unsigned int lang = get_AT_unsigned (comp_unit_die, DW_AT_language);\n \n-  return (lang == DW_LANG_C || lang == DW_LANG_C89\n-\t  || lang == DW_LANG_C_plus_plus);\n+  return (lang == DW_LANG_C || lang == DW_LANG_C89 || lang == DW_LANG_ObjC\n+\t  || lang == DW_LANG_C99\n+\t  || lang == DW_LANG_C_plus_plus || lang == DW_LANG_ObjC_plus_plus);\n }\n \n /* Return TRUE if the language is C++.  */\n \n static inline bool\n is_cxx (void)\n {\n-  return (get_AT_unsigned (comp_unit_die, DW_AT_language)\n-\t  == DW_LANG_C_plus_plus);\n+  unsigned int lang = get_AT_unsigned (comp_unit_die, DW_AT_language);\n+  \n+  return lang == DW_LANG_C_plus_plus || lang == DW_LANG_ObjC_plus_plus;\n }\n \n /* Return TRUE if the language is Fortran.  */\n@@ -12204,6 +12206,10 @@ gen_compile_unit_die (const char *filename)\n     language = DW_LANG_Pascal83;\n   else if (strcmp (language_string, \"GNU Java\") == 0)\n     language = DW_LANG_Java;\n+  else if (strcmp (language_string, \"GNU Objective-C\") == 0)\n+    language = DW_LANG_ObjC;\n+  else if (strcmp (language_string, \"GNU Objective-C++\") == 0)\n+    language = DW_LANG_ObjC_plus_plus;\n   else\n     language = DW_LANG_C89;\n \n@@ -13314,8 +13320,7 @@ dwarf2out_decl (tree decl)\n \t{\n \t  /* OK, we need to generate one for `bool' so GDB knows what type\n \t     comparisons have.  */\n-\t  if ((get_AT_unsigned (comp_unit_die, DW_AT_language)\n-\t       == DW_LANG_C_plus_plus)\n+\t  if (is_cxx ()\n \t      && TREE_CODE (TREE_TYPE (decl)) == BOOLEAN_TYPE\n \t      && ! DECL_IGNORED_P (decl))\n \t    modified_type_die (TREE_TYPE (decl), 0, 0, NULL);"}, {"sha": "f85f232bf8ae6cfcb47de368151e0db66f293c0c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "patch": "@@ -4,6 +4,9 @@\n \n 2006-03-24  Geoffrey Keating  <geoffk@apple.com>\n \n+\t* objc.dg/dwarf-2.m: New.\n+\t* obj-c++.dg/dwarf-2.mm: New.\n+\n \t* g++.old-deja/g++.other/init19.C: New.\n \n 2006-03-24  David Edelsohn  <edelsohn@gnu.org>"}, {"sha": "46ab5bb428fd17f189771d094f9b417d051a367c", "filename": "gcc/testsuite/obj-c++.dg/dwarf-2.mm", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fdwarf-2.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fdwarf-2.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fdwarf-2.mm?ref=9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "patch": "@@ -0,0 +1,3 @@\n+/* { dg-options \"-gdwarf-2 -dA\" } */\n+/* { dg-final { scan-assembler \"0x11\\[^0-9a-f\\].*DW_AT_language\" } } */\n+int x;"}, {"sha": "444ed23939f273dd3b2ea08e8586f70860303dad", "filename": "gcc/testsuite/objc.dg/dwarf-2.m", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Ftestsuite%2Fobjc.dg%2Fdwarf-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e51ddaa6e4902e734b803b9ede861eb499b3bd0/gcc%2Ftestsuite%2Fobjc.dg%2Fdwarf-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fdwarf-2.m?ref=9e51ddaa6e4902e734b803b9ede861eb499b3bd0", "patch": "@@ -0,0 +1,3 @@\n+/* { dg-options \"-gdwarf-2 -dA\" } */\n+/* { dg-final { scan-assembler \"0x10\\[^0-9a-f\\].*DW_AT_language\" } } */\n+int x;"}]}