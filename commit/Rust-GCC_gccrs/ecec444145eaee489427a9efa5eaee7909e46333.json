{"sha": "ecec444145eaee489427a9efa5eaee7909e46333", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWNlYzQ0NDE0NWVhZWU0ODk0MjdhOWVmYTVlYWVlNzkwOWU0NjMzMw==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1996-11-09T01:37:54Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1996-11-09T01:37:54Z"}, "message": "(expand_function_end): Handle BLKmode structures returned\nin registers.\n\nFrom-SVN: r13117", "tree": {"sha": "ce4fb418239f59dc821fbf2c01fb9317331defac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ce4fb418239f59dc821fbf2c01fb9317331defac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ecec444145eaee489427a9efa5eaee7909e46333", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecec444145eaee489427a9efa5eaee7909e46333", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ecec444145eaee489427a9efa5eaee7909e46333", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ecec444145eaee489427a9efa5eaee7909e46333/comments", "author": null, "committer": null, "parents": [{"sha": "a082c85a4365cc2a9b73ecc6547075d3c352d46c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a082c85a4365cc2a9b73ecc6547075d3c352d46c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a082c85a4365cc2a9b73ecc6547075d3c352d46c"}], "stats": {"total": 5, "additions": 5, "deletions": 0}, "files": [{"sha": "6fa9811a085a4309a8f54b5768f342413032faf6", "filename": "gcc/function.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ecec444145eaee489427a9efa5eaee7909e46333/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ecec444145eaee489427a9efa5eaee7909e46333/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=ecec444145eaee489427a9efa5eaee7909e46333", "patch": "@@ -5549,6 +5549,11 @@ expand_function_end (filename, line, end_bindings)\n \t\t\t  current_function_decl);\n #endif\n       REG_FUNCTION_VALUE_P (real_decl_result) = 1;\n+      /* If this is a BLKmode structure being returned in registers, then use\n+\t the mode computed in expand_return.  */\n+      if (GET_MODE (real_decl_result) == BLKmode)\n+\tPUT_MODE (real_decl_result,\n+\t\t  GET_MODE (DECL_RTL (DECL_RESULT (current_function_decl))));\n       emit_move_insn (real_decl_result,\n \t\t      DECL_RTL (DECL_RESULT (current_function_decl)));\n       emit_insn (gen_rtx (USE, VOIDmode, real_decl_result));"}]}