{"sha": "f46285d16269a2407e380d25c323ef99ef4ca2f8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQ2Mjg1ZDE2MjY5YTI0MDdlMzgwZDI1YzMyM2VmOTllZjRjYTJmOA==", "commit": {"author": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1996-07-28T20:57:40Z"}, "committer": {"name": "Karl Berry", "email": "karl@gnu.org", "date": "1996-07-28T20:57:40Z"}, "message": "(paragraphindent): Move to more reasonable place in the source file.\n\n(chapfonts, secfonts, subsecfonts, indexfonts): Call \\setleading.\n(\\chfplain, \\secheading, \\plainsecheading, \\subsecheading,\n \\subsubheading): Rewrite to properly \\hangindent the title.\n(\\sectionheading): New generic macro to print section titles.\n\nFrom-SVN: r12571", "tree": {"sha": "ad3364f04836a5ee6873110c4aecdc8eaeb4f60a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad3364f04836a5ee6873110c4aecdc8eaeb4f60a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f46285d16269a2407e380d25c323ef99ef4ca2f8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f46285d16269a2407e380d25c323ef99ef4ca2f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f46285d16269a2407e380d25c323ef99ef4ca2f8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f46285d16269a2407e380d25c323ef99ef4ca2f8/comments", "author": null, "committer": null, "parents": [{"sha": "57e23b2929a257ee962c34471c5360d2c681f84d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57e23b2929a257ee962c34471c5360d2c681f84d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57e23b2929a257ee962c34471c5360d2c681f84d"}], "stats": {"total": 104, "additions": 53, "deletions": 51}, "files": [{"sha": "5c781fd8da2802a2b947276a7df069f63d890a13", "filename": "gcc/texinfo.tex", "status": "modified", "additions": 53, "deletions": 51, "changes": 104, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f46285d16269a2407e380d25c323ef99ef4ca2f8/gcc%2Ftexinfo.tex", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f46285d16269a2407e380d25c323ef99ef4ca2f8/gcc%2Ftexinfo.tex", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftexinfo.tex?ref=f46285d16269a2407e380d25c323ef99ef4ca2f8", "patch": "@@ -35,7 +35,7 @@\n \n % This automatically updates the version number based on RCS.\n \\def\\deftexinfoversion$#1: #2 ${\\def\\texinfoversion{#2}}\n-\\deftexinfoversion$Revision: 2.174 $\n+\\deftexinfoversion$Revision: 1.1 $\n \\message{Loading texinfo package [Version \\texinfoversion]:}\n \n % If in a .fmt file, print the version number\n@@ -592,6 +592,9 @@\n \n \\let\\c=\\comment\n \n+% @paragraphindent  is defined for the Info formatting commands only.\n+\\let\\paragraphindent=\\comment\n+\n % Prevent errors for section commands.\n % Used in @ignore and in failing conditionals.\n \\def\\ignoresections{%\n@@ -1028,7 +1031,7 @@\n \\setfont\\deftt\\ttshape{10}{\\magstep1}\n \\def\\df{\\let\\tentt=\\deftt \\let\\tenbf = \\defbf \\bf}\n \n-% Fonts for indices and small examples.\n+% Fonts for indices and small examples (9pt).\n % We actually use the slanted font rather than the italic,\n % because texinfo normally uses the slanted fonts for that.\n % Do not make many font distinctions in general in the index, since they\n@@ -1045,7 +1048,7 @@\n \\font\\indi=cmmi9\n \\font\\indsy=cmsy9\n \n-% Fonts for headings\n+% Chapter (and unnumbered) fonts (17.28pt).\n \\setfont\\chaprm\\rmbshape{12}{\\magstep2}\n \\setfont\\chapit\\itbshape{10}{\\magstep3}\n \\setfont\\chapsl\\slbshape{10}{\\magstep3}\n@@ -1057,6 +1060,7 @@\n \\font\\chapi=cmmi12 scaled \\magstep2\n \\font\\chapsy=cmsy10 scaled \\magstep3\n \n+% Section fonts (14.4pt).\n \\setfont\\secrm\\rmbshape{12}{\\magstep1}\n \\setfont\\secit\\itbshape{10}{\\magstep2}\n \\setfont\\secsl\\slbshape{10}{\\magstep2}\n@@ -1082,6 +1086,7 @@\n \n %\\let\\ssecbf=\\ssecrm\n \n+% Subsection fonts (13.15pt).\n \\setfont\\ssecrm\\rmbshape{12}{\\magstephalf}\n \\setfont\\ssecit\\itbshape{10}{1315}\n \\setfont\\ssecsl\\slbshape{10}{1315}\n@@ -1127,22 +1132,23 @@\n   \\let\\tenrm=\\chaprm \\let\\tenit=\\chapit \\let\\tensl=\\chapsl\n   \\let\\tenbf=\\chapbf \\let\\tentt=\\chaptt \\let\\smallcaps=\\chapsc\n   \\let\\tensf=\\chapsf \\let\\teni=\\chapi \\let\\tensy=\\chapsy \\let\\tenttsl=\\chapttsl\n-  \\resetmathfonts}\n+  \\resetmathfonts \\setleading{19pt}}\n \\def\\secfonts{%\n   \\let\\tenrm=\\secrm \\let\\tenit=\\secit \\let\\tensl=\\secsl\n   \\let\\tenbf=\\secbf \\let\\tentt=\\sectt \\let\\smallcaps=\\secsc\n   \\let\\tensf=\\secsf \\let\\teni=\\seci \\let\\tensy=\\secsy \\let\\tenttsl=\\secttsl\n-  \\resetmathfonts}\n+  \\resetmathfonts \\setleading{16pt}}\n \\def\\subsecfonts{%\n   \\let\\tenrm=\\ssecrm \\let\\tenit=\\ssecit \\let\\tensl=\\ssecsl\n   \\let\\tenbf=\\ssecbf \\let\\tentt=\\ssectt \\let\\smallcaps=\\ssecsc\n   \\let\\tensf=\\ssecsf \\let\\teni=\\sseci \\let\\tensy=\\ssecsy \\let\\tenttsl=\\ssecttsl\n-  \\resetmathfonts}\n+  \\resetmathfonts \\setleading{15pt}}\n+\\let\\subsubsecfonts = \\subsecfonts % Maybe make sssec fonts scaled magstephalf?\n \\def\\indexfonts{%\n   \\let\\tenrm=\\indrm \\let\\tenit=\\indit \\let\\tensl=\\indsl\n   \\let\\tenbf=\\indbf \\let\\tentt=\\indtt \\let\\smallcaps=\\indsc\n   \\let\\tensf=\\indsf \\let\\teni=\\indi \\let\\tensy=\\indsy \\let\\tenttsl=\\indttsl\n-  \\resetmathfonts}\n+  \\resetmathfonts \\setleading{10pt}}\n \n % Set up the default fonts, so we can use them for creating boxes.\n %\n@@ -2932,15 +2938,18 @@\n \\global\\let\\unnumbchapmacro=\\unnchfplain\n \\global\\let\\centerchapmacro=\\centerchfplain}\n \n+% #1 is the text, #2 the chapter number.\n \\def\\chfplain #1#2{%\n   \\pchapsepmacro\n   {%\n-    \\chapfonts \\vbox{\\hyphenpenalty=10000\\tolerance=5000\n-                     \\parindent=0pt\\raggedright\n-                     \\rm #2\\enspace #1}%\n+    \\chapfonts \\rm\n+    \\setbox0 = \\hbox{#2\\enspace}%\n+    \\vbox{\\hyphenpenalty=10000 \\tolerance=5000 \\parindent=0pt \\raggedright\n+          \\hangindent = \\wd0\n+          \\unhbox0 #1}%\n   }%\n-  \\bigskip\n-  \\penalty5000\n+  \\nobreak\\bigskip % no page break after a chapter title\n+  \\nobreak\n }\n \n \\def\\unnchfplain #1{%\n@@ -2981,51 +2990,44 @@\n \\global\\let\\unnumbchapmacro=\\unnchfopen\n \\global\\let\\centerchapmacro=\\centerchfopen}\n \n-% Parameter controlling skip before section headings.\n \n+% Section titles.\n+\\newskip \\secheadingskip  \\secheadingskip = 21pt plus 8pt minus 4pt\n+\\def\\secheadingbreak{\\dobreak \\secheadingskip {-1000}}\n+\\def\\secheading#1#2#3{\\sectionheading{sec}{#2.#3}{#1}}\n+\\def\\plainsecheading#1{\\sectionheading{sec}{}{#1}}\n+\n+% Subsection titles.\n \\newskip \\subsecheadingskip  \\subsecheadingskip = 17pt plus 8pt minus 4pt\n \\def\\subsecheadingbreak{\\dobreak \\subsecheadingskip {-500}}\n+\\def\\subsecheading#1#2#3#4{\\sectionheading{subsec}{#2.#3.#4}{#1}}\n \n-\\newskip \\secheadingskip  \\secheadingskip = 21pt plus 8pt minus 4pt\n-\\def\\secheadingbreak{\\dobreak \\secheadingskip {-1000}}\n+% Subsubsection titles.\n+\\let\\subsubsecheadingskip = \\subsecheadingskip\n+\\let\\subsubsecheadingbreak = \\subsecheadingbreak\n+\\def\\subsubsecheading#1#2#3#4#5{\\sectionheading{subsubsec}{#2.#3.#4.#5}{#1}}\n \n-% @paragraphindent  is defined for the Info formatting commands only.\n-\\let\\paragraphindent=\\comment\n \n-% Section fonts are the base font at magstep2, which produces\n-% a size a bit more than 14 points in the default situation.\n-\n-\\def\\secheading #1#2#3{\\secheadingi {#2.#3\\enspace #1}}\n-\\def\\plainsecheading #1{\\secheadingi {#1}}\n-\\def\\secheadingi #1{{\\advance \\secheadingskip by \\parskip %\n-\\secheadingbreak}%\n-{\\secfonts \\vbox{\\hyphenpenalty=10000\\tolerance=5000\n-                 \\parindent=0pt\\raggedright\n-                 \\rm #1\\hfill}}%\n-\\ifdim \\parskip<10pt \\kern 10pt\\kern -\\parskip\\fi \\penalty 10000 }\n-\n-\n-% Subsection fonts are the base font at magstep1,\n-% which produces a size of 12 points.\n-\n-\\def\\subsecheading #1#2#3#4{\\subsecheadingi {#2.#3.#4\\enspace #1}}\n-\\def\\subsecheadingi #1{{\\advance \\subsecheadingskip by \\parskip %\n-\\subsecheadingbreak}%\n-{\\subsecfonts \\vbox{\\hyphenpenalty=10000\\tolerance=5000\n-                     \\parindent=0pt\\raggedright\n-                     \\rm #1\\hfill}}%\n-\\ifdim \\parskip<10pt \\kern 10pt\\kern -\\parskip\\fi \\penalty 10000 }\n-\n-\\def\\subsubsecfonts{\\subsecfonts} % Maybe this should change:\n-\t\t\t\t  % Perhaps make sssec fonts scaled\n-\t\t\t\t  % magstep half\n-\\def\\subsubsecheading #1#2#3#4#5{\\subsubsecheadingi {#2.#3.#4.#5\\enspace #1}}\n-\\def\\subsubsecheadingi #1{{\\advance \\subsecheadingskip by \\parskip %\n-\\subsecheadingbreak}%\n-{\\subsubsecfonts \\vbox{\\hyphenpenalty=10000\\tolerance=5000\n-                       \\parindent=0pt\\raggedright\n-                       \\rm #1\\hfill}}%\n-\\ifdim \\parskip<10pt \\kern 10pt\\kern -\\parskip\\fi \\penalty 10000}\n+% Print any size section title.\n+% \n+% #1 is the section type (sec/subsec/subsubsec), #2 is the section\n+% number (maybe empty), #3 the text.\n+\\def\\sectionheading#1#2#3{%\n+  {%\n+    \\expandafter\\advance\\csname #1headingskip\\endcsname by \\parskip\n+    \\csname #1headingbreak\\endcsname\n+  }%\n+  {%\n+    \\csname #1fonts\\endcsname \\rm\n+    \\def\\secnum{#2}%\n+    % Only insert the separating space if we have a section number.\n+    \\setbox0 = \\hbox{#2\\ifx\\secnum\\empty\\else \\enspace \\fi}%\n+    \\vbox{\\hyphenpenalty=10000 \\tolerance=5000 \\parindent=0pt \\raggedright\n+          \\hangindent = \\wd0 % zero if no section number\n+          \\unhbox0 #3}%\n+  }%\n+  \\ifdim\\parskip<10pt \\nobreak\\kern10pt\\nobreak\\kern-\\parskip\\fi \\nobreak\n+}\n \n \n \\message{toc printing,}"}]}