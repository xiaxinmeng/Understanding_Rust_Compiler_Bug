{"sha": "a9657ce816a9bce45c727a36ce2f23e25699ac56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk2NTdjZTgxNmE5YmNlNDVjNzI3YTM2Y2UyZjIzZTI1Njk5YWM1Ng==", "commit": {"author": {"name": "Douglas B Rupp", "email": "rupp@gnat.com", "date": "2001-12-10T23:46:00Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-12-10T23:46:00Z"}, "message": "gcc.c (convert_filename): Add do_obj parameter.\n\n\t* gcc.c (convert_filename): Add do_obj parameter. Don't convert\n\tunless do_obj true.\n\t(process_command): Modify calls to convert_filename.\n\nFrom-SVN: r47857", "tree": {"sha": "247214c460bd7b5149211f6082b6aff7647c0fb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/247214c460bd7b5149211f6082b6aff7647c0fb8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9657ce816a9bce45c727a36ce2f23e25699ac56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9657ce816a9bce45c727a36ce2f23e25699ac56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9657ce816a9bce45c727a36ce2f23e25699ac56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9657ce816a9bce45c727a36ce2f23e25699ac56/comments", "author": null, "committer": null, "parents": [{"sha": "cb375790f58556386ea304c9adec1ff127988a44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb375790f58556386ea304c9adec1ff127988a44", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb375790f58556386ea304c9adec1ff127988a44"}], "stats": {"total": 22, "additions": 15, "deletions": 7}, "files": [{"sha": "c0360aef3b013e2ff1b97f9349f93a0f2b260255", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9657ce816a9bce45c727a36ce2f23e25699ac56/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9657ce816a9bce45c727a36ce2f23e25699ac56/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9657ce816a9bce45c727a36ce2f23e25699ac56", "patch": "@@ -1,3 +1,9 @@\n+Mon Dec 10 18:37:31 2001  Douglas B. Rupp  <rupp@gnat.com>\n+\n+\t* gcc.c (convert_filename): Add do_obj parameter. Don't convert\n+\tunless do_obj true.\n+\t(process_command): Modify calls to convert_filename.\n+\n 2001-12-11  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n \n \t* config/sparc/sol2-sld-64.h: Include dbxelf.h again."}, {"sha": "a6e36bcc7c85f01182687b33dbc3a878dcec9f12", "filename": "gcc/gcc.c", "status": "modified", "additions": 9, "deletions": 7, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9657ce816a9bce45c727a36ce2f23e25699ac56/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9657ce816a9bce45c727a36ce2f23e25699ac56/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=a9657ce816a9bce45c727a36ce2f23e25699ac56", "patch": "@@ -320,7 +320,7 @@ static void init_gcc_specs              PARAMS ((struct obstack *,\n \t\t\t\t\t\t const char *));\n #endif\n #if defined(HAVE_TARGET_OBJECT_SUFFIX) || defined(HAVE_TARGET_EXECUTABLE_SUFFIX)\n-static const char *convert_filename\tPARAMS ((const char *, int));\n+static const char *convert_filename\tPARAMS ((const char *, int, int));\n #endif\n \f\n /* The Specs Language\n@@ -2927,12 +2927,14 @@ static int *warn_std_ptr = 0;\n #if defined(HAVE_TARGET_OBJECT_SUFFIX) || defined(HAVE_TARGET_EXECUTABLE_SUFFIX)\n \n /* Convert NAME to a new name if it is the standard suffix.  DO_EXE\n-   is true if we should look for an executable suffix as well.  */\n+   is true if we should look for an executable suffix.  DO_OBJ\n+   is true if we should look for an object suffix.  */\n \n static const char *\n-convert_filename (name, do_exe)\n+convert_filename (name, do_exe, do_obj)\n      const char *name;\n      int do_exe ATTRIBUTE_UNUSED;\n+     int do_obj ATTRIBUTE_UNUSED;\n {\n #if defined(HAVE_TARGET_EXECUTABLE_SUFFIX)\n   int i;\n@@ -2946,7 +2948,7 @@ convert_filename (name, do_exe)\n \n #ifdef HAVE_TARGET_OBJECT_SUFFIX\n   /* Convert x.o to x.obj if TARGET_OBJECT_SUFFIX is \".obj\".  */\n-  if (len > 2\n+  if (do_obj && len > 2\n       && name[len - 2] == '.'\n       && name[len - 1] == 'o')\n     {\n@@ -3627,9 +3629,9 @@ process_command (argc, argv)\n #endif\n #if defined(HAVE_TARGET_EXECUTABLE_SUFFIX) || defined(HAVE_TARGET_OBJECT_SUFFIX)\n \t      if (p[1] == 0)\n-\t\targv[i + 1] = convert_filename (argv[i + 1], ! have_c);\n+\t\targv[i + 1] = convert_filename (argv[i + 1], ! have_c, 0);\n \t      else\n-\t\targv[i] = convert_filename (argv[i], ! have_c);\n+\t\targv[i] = convert_filename (argv[i], ! have_c, 0);\n #endif\n \t      goto normal_switch;\n \n@@ -3948,7 +3950,7 @@ process_command (argc, argv)\n       else\n \t{\n #ifdef HAVE_TARGET_OBJECT_SUFFIX\n-\t  argv[i] = convert_filename (argv[i], 0);\n+\t  argv[i] = convert_filename (argv[i], 0, access (argv[i], F_OK));\n #endif\n \n \t  if (strcmp (argv[i], \"-\") != 0 && access (argv[i], F_OK) < 0)"}]}