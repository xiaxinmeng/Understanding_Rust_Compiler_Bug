{"sha": "f637f07220f3c6d2a5eda7b6f8987372a49f8bbc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjYzN2YwNzIyMGYzYzZkMmE1ZWRhN2I2Zjg5ODczNzJhNDlmOGJiYw==", "commit": {"author": {"name": "Rafael \u00c1vila de Esp\u00edndola", "email": "rafael.espindola@gmail.com", "date": "2005-12-07T11:24:48Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2005-12-07T11:24:48Z"}, "message": "Makefile.in: Document the use of stamps.\n\n\t* Makefile.in: Document the use of stamps.\n\nFrom-SVN: r108156", "tree": {"sha": "3ee7eb30ccded9051670c9748c56081d772d83bb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ee7eb30ccded9051670c9748c56081d772d83bb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc/comments", "author": {"login": "espindola", "id": 42633, "node_id": "MDQ6VXNlcjQyNjMz", "avatar_url": "https://avatars.githubusercontent.com/u/42633?v=4", "gravatar_id": "", "url": "https://api.github.com/users/espindola", "html_url": "https://github.com/espindola", "followers_url": "https://api.github.com/users/espindola/followers", "following_url": "https://api.github.com/users/espindola/following{/other_user}", "gists_url": "https://api.github.com/users/espindola/gists{/gist_id}", "starred_url": "https://api.github.com/users/espindola/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/espindola/subscriptions", "organizations_url": "https://api.github.com/users/espindola/orgs", "repos_url": "https://api.github.com/users/espindola/repos", "events_url": "https://api.github.com/users/espindola/events{/privacy}", "received_events_url": "https://api.github.com/users/espindola/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2f4d2d181afce802331a81954122c1d0bc37c3ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f4d2d181afce802331a81954122c1d0bc37c3ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f4d2d181afce802331a81954122c1d0bc37c3ba"}], "stats": {"total": 44, "additions": 41, "deletions": 3}, "files": [{"sha": "366a6053d187b57f8c0c7d17cb8d6bb03037f4fa", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f637f07220f3c6d2a5eda7b6f8987372a49f8bbc", "patch": "@@ -1,3 +1,7 @@\n+2005-12-07  Rafael \ufffdvila de Esp\ufffdndola  <rafael.espindola@gmail.com>\n+\n+\t* Makefile.in: Document the use of stamps.\n+\n 2005-12-07  Rafael \ufffdvila de Esp\ufffdndola  <rafael.espindola@gmail.com>\n \n \t* doc/gty.texi: Remove instructions for adding a dependency on s-gtype."}, {"sha": "0f6e82aac2bc48bd15c3748e66ad62e807bb835a", "filename": "gcc/Makefile.in", "status": "modified", "additions": 37, "deletions": 3, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f637f07220f3c6d2a5eda7b6f8987372a49f8bbc/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=f637f07220f3c6d2a5eda7b6f8987372a49f8bbc", "patch": "@@ -1095,6 +1095,42 @@ endif\n # Rebuilding this configuration\n # -----------------------------\n \n+# On the use of stamps:\n+# Consider the example of tree-check.h. It is constructed with build/gencheck.\n+# A simple rule to build tree-check.h would be\n+# tree-check.h: build/gencheck$(build_exeext)\n+#\t$(RUN_GEN) build/gencheck$(build_exeext) > tree-check.h\n+#\n+# but tree-check.h doesn't change every time gencheck changes. It would the\n+# nice if targets that depend on tree-check.h wouldn't be rebuild\n+# unnecessarily when tree-check.h is unchanged. To make this, tree-check.h\n+# must not be overwritten with a identical copy. One solution is to use a\n+# temporary file\n+# tree-check.h: build/gencheck$(build_exeext)\n+#\t$(RUN_GEN) build/gencheck$(build_exeext) > tree-check.h\n+#\t$(SHELL) $(srcdir)/../move-if-change tmp-check.h tree-check.h\n+#\n+# This solution has a different problem. Since the time stamp of tree-check.h\n+# is unchanged, make will try to update tree-check.h every time it runs.\n+# To prevent this, one can add a stamp\n+# tree-check.h: s-check\n+# s-check : build/gencheck$(build_exeext)\n+#\t$(RUN_GEN) build/gencheck$(build_exeext) > tree-check.h\n+#\t$(SHELL) $(srcdir)/../move-if-change tmp-check.h tree-check.h\n+#\t$(STAMP) s-check\n+#\n+# The problem with this solution is that make thinks that tree-check.h is\n+# always unchanged. Make must be deceived into thinking that tree-check.h is\n+# rebuild by the \"a: s-a\" rule. To do this, add a dummy command:\n+# tree-check.h: s-check; @true\n+# s-check : build/gencheck$(build_exeext)\n+#\t$(RUN_GEN) build/gencheck$(build_exeext) > tree-check.h\n+#\t$(SHELL) $(srcdir)/../move-if-change tmp-check.h tree-check.h\n+#\t$(STAMP) s-check\n+#\n+# This is what is done in this makefile. Note that mkconfig.sh has a\n+# move-if-change built-in\n+\n Makefile: config.status $(srcdir)/Makefile.in $(LANG_MAKEFRAGS)\n \tLANGUAGES=\"$(CONFIG_LANGUAGES)\" \\\n \tCONFIG_HEADERS= \\\n@@ -2700,9 +2736,7 @@ s-output : $(MD_DEPS) build/genoutput$(build_exeext)\n \n genrtl.o : genrtl.c $(CONFIG_H) $(SYSTEM_H) coretypes.h $(TM_H) $(RTL_H) \\\n   $(GGC_H)\n-genrtl.c genrtl.h : s-genrtl\n-\t@true\t# force gnu make to recheck modification times.\n-\n+genrtl.c genrtl.h : s-genrtl; @true\n s-genrtl: build/gengenrtl$(build_exeext)\n \t$(RUN_GEN) build/gengenrtl$(build_exeext) -h > tmp-genrtl.h\n \t$(SHELL) $(srcdir)/../move-if-change tmp-genrtl.h genrtl.h"}]}