{"sha": "25a1fcb433c7e1aef52102292a77483753418e32", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjVhMWZjYjQzM2M3ZTFhZWY1MjEwMjI5MmE3NzQ4Mzc1MzQxOGUzMg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2000-03-23T22:12:22Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2000-03-23T22:12:22Z"}, "message": "calls.c (expand_call): If TARGET is passed by reference and is readonly, write a CLOBBER.\n\n\t* calls.c (expand_call): If TARGET is passed by reference and\n\tis readonly, write a CLOBBER.\n\nFrom-SVN: r32716", "tree": {"sha": "dd25ec5db7e8a967668ec09dccd7b3a54a0c1657", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd25ec5db7e8a967668ec09dccd7b3a54a0c1657"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25a1fcb433c7e1aef52102292a77483753418e32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25a1fcb433c7e1aef52102292a77483753418e32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25a1fcb433c7e1aef52102292a77483753418e32", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25a1fcb433c7e1aef52102292a77483753418e32/comments", "author": null, "committer": null, "parents": [{"sha": "4b2a62db33607b4e900ff793150ee996e9281420", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b2a62db33607b4e900ff793150ee996e9281420", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b2a62db33607b4e900ff793150ee996e9281420"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "45bfc374131a5ece7b9b29c7a2278853c1bcf7c2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25a1fcb433c7e1aef52102292a77483753418e32/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25a1fcb433c7e1aef52102292a77483753418e32/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=25a1fcb433c7e1aef52102292a77483753418e32", "patch": "@@ -1,3 +1,8 @@\n+Thu Mar 23 17:10:48 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* calls.c (expand_call): If TARGET is passed by reference and\n+\tis readonly, write a CLOBBER.\n+\n 2000-03-23  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* builtins.c (expand_builtin): Handle bcmp."}, {"sha": "dfb38ee6d7e6cd7f96d013f039ca20ca266af943", "filename": "gcc/calls.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25a1fcb433c7e1aef52102292a77483753418e32/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25a1fcb433c7e1aef52102292a77483753418e32/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=25a1fcb433c7e1aef52102292a77483753418e32", "patch": "@@ -2776,6 +2776,14 @@ expand_call (exp, target, ignore)\n       if (is_longjmp)\n \tcurrent_function_calls_longjmp = 1, sibcall_failure = 1;\n \n+      /* If this function is returning into a memory location marked as\n+\t readonly, it means it is initializing that location.  But we normally\n+\t treat functions as not clobbering such locations, so we need to\n+\t specify that this one does.  */\n+      if (target != 0 && GET_CODE (target) == MEM\n+\t  && structure_value_addr != 0 && RTX_UNCHANGING_P (target))\n+\temit_insn (gen_rtx_CLOBBER (VOIDmode, target));\n+\n       /* If value type not void, return an rtx for the value.  */\n \n       /* If there are cleanups to be called, don't use a hard reg as target."}]}