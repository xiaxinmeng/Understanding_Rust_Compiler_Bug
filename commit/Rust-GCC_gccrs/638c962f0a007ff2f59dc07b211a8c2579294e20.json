{"sha": "638c962f0a007ff2f59dc07b211a8c2579294e20", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjM4Yzk2MmYwYTAwN2ZmMmY1OWRjMDdiMjExYThjMjU3OTI5NGUyMA==", "commit": {"author": {"name": "Jack Howarth", "email": "howarth@bromo.med.uc.edu", "date": "2012-05-29T23:44:09Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2012-05-29T23:44:09Z"}, "message": "re PR debug/53453 (darwin linker expects both AT_name and AT_comp_dir debug notes)\n\n2012-05-29  Jack Howarth  <howarth@bromo.med.uc.edu>\n\n\tPR debug/53453\n\t* doc/tm.texi: Update.\n\t* doc/tm.texi.in (SDB and DWARF) <TARGET_FORCE_AT_COMP_DIR>: Add @hook.\n\t* target.def (force_at_comp_dir): New hook.\n\t* config/darwin.h (TARGET_FORCE_AT_COMP_DIR): Define.\n\t* dwarf2out.c (dwarf2out_finish): Check targetm.force_at_comp_dir.\n\nFrom-SVN: r187994", "tree": {"sha": "aa5b999c7d1d082b0e5c439e18b126cac9ddb7dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa5b999c7d1d082b0e5c439e18b126cac9ddb7dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/638c962f0a007ff2f59dc07b211a8c2579294e20", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/638c962f0a007ff2f59dc07b211a8c2579294e20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/638c962f0a007ff2f59dc07b211a8c2579294e20", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/638c962f0a007ff2f59dc07b211a8c2579294e20/comments", "author": null, "committer": null, "parents": [{"sha": "a8b4175ce40f6fd96d2b7ed3868f34b7a4a8a1cc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8b4175ce40f6fd96d2b7ed3868f34b7a4a8a1cc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8b4175ce40f6fd96d2b7ed3868f34b7a4a8a1cc"}], "stats": {"total": 26, "additions": 25, "deletions": 1}, "files": [{"sha": "68b37a07bf9ec10c6f33ae675f902a918905c55f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=638c962f0a007ff2f59dc07b211a8c2579294e20", "patch": "@@ -1,3 +1,12 @@\n+2012-05-29  Jack Howarth  <howarth@bromo.med.uc.edu>\n+\n+\tPR debug/53453\n+\t* doc/tm.texi: Update.\n+\t* doc/tm.texi.in (SDB and DWARF) <TARGET_FORCE_AT_COMP_DIR>: Add @hook.\n+\t* target.def (force_at_comp_dir): New hook.\n+\t* config/darwin.h (TARGET_FORCE_AT_COMP_DIR): Define.\n+\t* dwarf2out.c (dwarf2out_finish): Check targetm.force_at_comp_dir.\n+\n 2012-05-29  Jack Howarth  <howarth@bromo.med.uc.edu>\n \n \t* config/darwin.h (STARTFILE_SPEC): Do not use -lbundle1.o when"}, {"sha": "5855778109d0321e2fcf0ee0cd7bad7bdbd26fc0", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=638c962f0a007ff2f59dc07b211a8c2579294e20", "patch": "@@ -416,6 +416,8 @@ extern GTY(()) int darwin_ms_struct;\n \n #define TARGET_WANT_DEBUG_PUB_SECTIONS true\n \n+#define TARGET_FORCE_AT_COMP_DIR true\n+\n /* When generating stabs debugging, use N_BINCL entries.  */\n \n #define DBX_USE_BINCL"}, {"sha": "aeccc79f39f936ea0c01ad2e88d65b4acc1eed2a", "filename": "gcc/doc/tm.texi", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fdoc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fdoc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi?ref=638c962f0a007ff2f59dc07b211a8c2579294e20", "patch": "@@ -9493,6 +9493,10 @@ tables, and hence is desirable if it works.\n True if the @code{.debug_pubtypes} and @code{.debug_pubnames} sections should be emitted.  These sections are not used on most platforms, and in particular GDB does not use them.\n @end deftypevr\n \n+@deftypevr {Target Hook} bool TARGET_FORCE_AT_COMP_DIR\n+True if the @code{DW_AT_comp_dir} attribute should be emitted for each  compilation unit.  This attribute is required for the darwin linker  to emit debug information.\n+@end deftypevr\n+\n @deftypevr {Target Hook} bool TARGET_DELAY_SCHED2\n True if sched2 is not to be run at its normal place.  This usually means it will be run as part of machine-specific reorg.\n @end deftypevr"}, {"sha": "31dedad8a228e7e5ece059e0cfffc1e5ccfec582", "filename": "gcc/doc/tm.texi.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fdoc%2Ftm.texi.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fdoc%2Ftm.texi.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi.in?ref=638c962f0a007ff2f59dc07b211a8c2579294e20", "patch": "@@ -9392,6 +9392,8 @@ tables, and hence is desirable if it works.\n \n @hook TARGET_WANT_DEBUG_PUB_SECTIONS\n \n+@hook TARGET_FORCE_AT_COMP_DIR\n+\n @hook TARGET_DELAY_SCHED2\n \n @hook TARGET_DELAY_VARTRACK"}, {"sha": "6085a947541be2d260f12aa5d653256c10c64561", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=638c962f0a007ff2f59dc07b211a8c2579294e20", "patch": "@@ -22078,7 +22078,7 @@ dwarf2out_finish (const char *filename)\n   /* Add the name for the main input file now.  We delayed this from\n      dwarf2out_init to avoid complications with PCH.  */\n   add_name_attribute (comp_unit_die (), remap_debug_filename (filename));\n-  if (!IS_ABSOLUTE_PATH (filename))\n+  if (!IS_ABSOLUTE_PATH (filename) || targetm.force_at_comp_dir)\n     add_comp_dir_attribute (comp_unit_die ());\n   else if (get_AT (comp_unit_die (), DW_AT_comp_dir) == NULL)\n     {"}, {"sha": "3463600f99ac930126fb38d6be702a68317e080a", "filename": "gcc/target.def", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Ftarget.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/638c962f0a007ff2f59dc07b211a8c2579294e20/gcc%2Ftarget.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftarget.def?ref=638c962f0a007ff2f59dc07b211a8c2579294e20", "patch": "@@ -2748,6 +2748,13 @@ DEFHOOKPOD\n  in particular GDB does not use them.\",\n  bool, false)\n \n+DEFHOOKPOD\n+(force_at_comp_dir,\n+ \"True if the @code{DW_AT_comp_dir} attribute should be emitted for each \\\n+ compilation unit.  This attribute is required for the darwin linker \\\n+ to emit debug information.\",\n+ bool, false)\n+\n DEFHOOKPOD\n (delay_sched2, \"True if sched2 is not to be run at its normal place.  \\\n This usually means it will be run as part of machine-specific reorg.\","}]}