{"sha": "4593483f15ca2a82049500b9434e736996bb0891", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDU5MzQ4M2YxNWNhMmE4MjA0OTUwMGI5NDM0ZTczNjk5NmJiMDg5MQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-05-14T11:43:55Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-05-14T11:43:55Z"}, "message": "Reapply r270597.\n\n2019-05-14  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR preprocessor/90382\n\t* decl.c (grokdeclarator): Fix value assigned to typespec_loc, use\n\tmin_location.\n2019-05-14  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR preprocessor/90382\n\t* g++.dg/diagnostic/trailing1.C: New test.\n\nFrom-SVN: r271164", "tree": {"sha": "1db41e29d9b2779229d2b18744399e2df7b9f898", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1db41e29d9b2779229d2b18744399e2df7b9f898"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4593483f15ca2a82049500b9434e736996bb0891", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4593483f15ca2a82049500b9434e736996bb0891", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4593483f15ca2a82049500b9434e736996bb0891", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4593483f15ca2a82049500b9434e736996bb0891/comments", "author": null, "committer": null, "parents": [{"sha": "19eda56db6c7a6aff1064efb49c18734e82eb382", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19eda56db6c7a6aff1064efb49c18734e82eb382", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19eda56db6c7a6aff1064efb49c18734e82eb382"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "d896e5d572a6df859e1b8a312a5e121f6ffeb191", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=4593483f15ca2a82049500b9434e736996bb0891", "patch": "@@ -1,3 +1,9 @@\n+2019-05-14  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR preprocessor/90382\n+\t* decl.c (grokdeclarator): Fix value assigned to typespec_loc, use\n+\tmin_location.\n+\n 2019-05-13  Jason Merrill  <jason@redhat.com>\n \n \tUse releasing_vec more broadly."}, {"sha": "66dc4c4a2ce358bb6c41ce006754076780aaa1a8", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=4593483f15ca2a82049500b9434e736996bb0891", "patch": "@@ -10424,8 +10424,8 @@ grokdeclarator (const cp_declarator *declarator,\n \n   location_t typespec_loc = smallest_type_quals_location (type_quals,\n \t\t\t\t\t\t      declspecs->locations);\n-  if (typespec_loc == UNKNOWN_LOCATION)\n-    typespec_loc = declspecs->locations[ds_type_spec];\n+  typespec_loc = min_location (typespec_loc,\n+\t\t\t       declspecs->locations[ds_type_spec]);\n   if (typespec_loc == UNKNOWN_LOCATION)\n     typespec_loc = input_location;\n "}, {"sha": "bec2168b75b8565b092407682d2fcf902b26aeaa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4593483f15ca2a82049500b9434e736996bb0891", "patch": "@@ -1,3 +1,8 @@\n+2019-05-14  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR preprocessor/90382\n+\t* g++.dg/diagnostic/trailing1.C: New test.\n+\n 2019-05-14  marxin  <mliska@suse.cz>\n \n \tPR middle-end/90340"}, {"sha": "369781e56d5baae91e9ce7e9c1c028de4eb7895c", "filename": "gcc/testsuite/g++.dg/diagnostic/trailing1.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Ftrailing1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4593483f15ca2a82049500b9434e736996bb0891/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Ftrailing1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Ftrailing1.C?ref=4593483f15ca2a82049500b9434e736996bb0891", "patch": "@@ -0,0 +1,5 @@\n+// { dg-do compile { target c++11 } }\n+\n+int const foo1() -> double;  // { dg-error \"1:.foo1. function with trailing return type\" }\n+int volatile foo2() -> double;  // { dg-error \"1:.foo2. function with trailing return type\" }\n+int const volatile foo3() -> double;  // { dg-error \"1:.foo3. function with trailing return type\" }"}]}