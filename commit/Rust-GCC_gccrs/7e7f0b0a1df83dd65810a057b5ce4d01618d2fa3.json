{"sha": "7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2U3ZjBiMGExZGY4M2RkNjU4MTBhMDU3YjVjZTRkMDE2MThkMmZhMw==", "commit": {"author": {"name": "Bob Duff", "email": "duff@adacore.com", "date": "2019-08-20T09:49:32Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-08-20T09:49:32Z"}, "message": "[Ada] Improve generated code for initialization of atomics\n\nThis patch makes the temp for initialization of an atomic variable be\nconstant.\n\nNo change in behavior; no test.\n\n2019-08-20  Bob Duff  <duff@adacore.com>\n\ngcc/ada/\n\n\t* freeze.adb (Is_Atomic_VFA_Aggregate): Make the temp for\n\tinitialization of the atomic variable be constant. This is\n\tcleaner, and might improve efficiency.\n\nFrom-SVN: r274728", "tree": {"sha": "ca2c536050580d7137170f4a1d37b9e1f2a0ce96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ca2c536050580d7137170f4a1d37b9e1f2a0ce96"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3/comments", "author": {"login": "bobduff", "id": 29099567, "node_id": "MDQ6VXNlcjI5MDk5NTY3", "avatar_url": "https://avatars.githubusercontent.com/u/29099567?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bobduff", "html_url": "https://github.com/bobduff", "followers_url": "https://api.github.com/users/bobduff/followers", "following_url": "https://api.github.com/users/bobduff/following{/other_user}", "gists_url": "https://api.github.com/users/bobduff/gists{/gist_id}", "starred_url": "https://api.github.com/users/bobduff/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bobduff/subscriptions", "organizations_url": "https://api.github.com/users/bobduff/orgs", "repos_url": "https://api.github.com/users/bobduff/repos", "events_url": "https://api.github.com/users/bobduff/events{/privacy}", "received_events_url": "https://api.github.com/users/bobduff/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "76ccee8fc7a60a19578e1901d431d628eb0214a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76ccee8fc7a60a19578e1901d431d628eb0214a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76ccee8fc7a60a19578e1901d431d628eb0214a9"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "7affa92a7f67a56e621ab68eb032a753cc87052b", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3", "patch": "@@ -1,3 +1,9 @@\n+2019-08-20  Bob Duff  <duff@adacore.com>\n+\n+\t* freeze.adb (Is_Atomic_VFA_Aggregate): Make the temp for\n+\tinitialization of the atomic variable be constant. This is\n+\tcleaner, and might improve efficiency.\n+\n 2019-08-20  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* repinfo.adb (List_Record_Info): In -gnatR4 mode, set the"}, {"sha": "bb17e429020950ae20e16471f9f42e0a2858e24e", "filename": "gcc/ada/freeze.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3/gcc%2Fada%2Ffreeze.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3/gcc%2Fada%2Ffreeze.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffreeze.adb?ref=7e7f0b0a1df83dd65810a057b5ce4d01618d2fa3", "patch": "@@ -1771,6 +1771,7 @@ package body Freeze is\n       New_N :=\n         Make_Object_Declaration (Loc,\n           Defining_Identifier => Temp,\n+          Constant_Present    => True,\n           Object_Definition   => New_Occurrence_Of (Typ, Loc),\n           Expression          => Relocate_Node (N));\n       Insert_Before (Par, New_N);"}]}