{"sha": "07f521fc064351fb67625b483461db5b0a452e25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdmNTIxZmMwNjQzNTFmYjY3NjI1YjQ4MzQ2MWRiNWIwYTQ1MmUyNQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2002-02-28T15:32:38Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2002-02-28T15:32:38Z"}, "message": "search.c (lookup_base_r): Don't clear is_non_public just because we found a friendly scope.\n\n        * search.c (lookup_base_r): Don't clear is_non_public just because\n        we found a friendly scope.\n\nFrom-SVN: r50140", "tree": {"sha": "1fca790a59ac55c84f2791b592dd172e3f0ece9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1fca790a59ac55c84f2791b592dd172e3f0ece9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07f521fc064351fb67625b483461db5b0a452e25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07f521fc064351fb67625b483461db5b0a452e25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07f521fc064351fb67625b483461db5b0a452e25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07f521fc064351fb67625b483461db5b0a452e25/comments", "author": null, "committer": null, "parents": [{"sha": "b96c434c39312a059e6a062b29993ec7d0a7da57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b96c434c39312a059e6a062b29993ec7d0a7da57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b96c434c39312a059e6a062b29993ec7d0a7da57"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "85f254704ec7a1405f25bea5b99691aa221183e2", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07f521fc064351fb67625b483461db5b0a452e25/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07f521fc064351fb67625b483461db5b0a452e25/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=07f521fc064351fb67625b483461db5b0a452e25", "patch": "@@ -1,5 +1,8 @@\n 2002-02-28  Jason Merrill  <jason@redhat.com>\n \n+\t* search.c (lookup_base_r): Don't clear is_non_public just because\n+\twe found a friendly scope.\n+\n \t* decl.c (finish_function): Only warn about missing return\n \tstatement with -Wreturn-type.\n \n@@ -1182,7 +1185,7 @@ Tue Nov 27 09:03:47 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \t* search.c (get_vbase_1): Remove.\n \t(get_vbase): Remove.\n \t(convert_pointer_to_vbase): Remove.\n-\t(lookup_base_recursive): New function.\n+\t(lookup_base_r): New function.\n \t(lookup_base): New function.\n \t* typeck.c (require_complete_type): Use lookup_base &\n \tbuild_base_path instead of convert_pointer_to."}, {"sha": "018dfaaec575759ba47c130fcbbcf2efeef07531", "filename": "gcc/cp/search.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07f521fc064351fb67625b483461db5b0a452e25/gcc%2Fcp%2Fsearch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07f521fc064351fb67625b483461db5b0a452e25/gcc%2Fcp%2Fsearch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsearch.c?ref=07f521fc064351fb67625b483461db5b0a452e25", "patch": "@@ -201,8 +201,9 @@ lookup_base_r (binfo, base, access, within_current_scope,\n       && !within_current_scope\n       && is_friend (BINFO_TYPE (binfo), current_scope ()))\n     {\n+      /* Do not clear is_non_public here.  If A is a private base of B, A\n+\t is not allowed to convert a B* to an A*.  */\n       within_current_scope = 1;\n-      is_non_public = 0;\n     }\n   \n   if (same_type_p (BINFO_TYPE (binfo), base))"}]}