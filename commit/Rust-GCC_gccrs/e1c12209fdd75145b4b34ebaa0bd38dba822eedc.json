{"sha": "e1c12209fdd75145b4b34ebaa0bd38dba822eedc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTFjMTIyMDlmZGQ3NTE0NWI0YjM0ZWJhYTBiZDM4ZGJhODIyZWVkYw==", "commit": {"author": {"name": "Douglas B Rupp", "email": "rupp@gnat.com", "date": "2001-11-24T22:17:58Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2001-11-24T22:17:58Z"}, "message": "fix-header.c (main): Move inf_buffer termination and inf_limit calculation to after read.\n\n\t* fix-header.c (main): Move inf_buffer termination and inf_limit\n\tcalculation to after read.\n\nFrom-SVN: r47307", "tree": {"sha": "c3b740aa1c23a1b4c2f8a1904669710f78b7ee73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3b740aa1c23a1b4c2f8a1904669710f78b7ee73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e1c12209fdd75145b4b34ebaa0bd38dba822eedc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1c12209fdd75145b4b34ebaa0bd38dba822eedc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1c12209fdd75145b4b34ebaa0bd38dba822eedc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1c12209fdd75145b4b34ebaa0bd38dba822eedc/comments", "author": null, "committer": null, "parents": [{"sha": "1dfc53859fcf91234f677869b0e0e10f709444a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dfc53859fcf91234f677869b0e0e10f709444a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dfc53859fcf91234f677869b0e0e10f709444a4"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "d5ca26c35d9c02e0d551dd2a8bb1f7ebac72f9c1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1c12209fdd75145b4b34ebaa0bd38dba822eedc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1c12209fdd75145b4b34ebaa0bd38dba822eedc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e1c12209fdd75145b4b34ebaa0bd38dba822eedc", "patch": "@@ -1,5 +1,8 @@\n Sat Nov 24 17:04:10 2001  Douglas B. Rupp  <rupp@gnat.com>\n \n+\t* fix-header.c (main): Move inf_buffer termination and inf_limit\n+\tcalculation to after read.\n+\n \t* config/alpha/xm-vms.h (FILE_TYPE): Remove undef and baggage.\n \t(__UNIX_FOPEN): Define.\n "}, {"sha": "e96b6bb0fecf3ca1307289f5887c588840949950", "filename": "gcc/fix-header.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e1c12209fdd75145b4b34ebaa0bd38dba822eedc/gcc%2Ffix-header.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e1c12209fdd75145b4b34ebaa0bd38dba822eedc/gcc%2Ffix-header.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffix-header.c?ref=e1c12209fdd75145b4b34ebaa0bd38dba822eedc", "patch": "@@ -1184,9 +1184,6 @@ main (argc, argv)\n     }\n   inf_size = sbuf.st_size;\n   inf_buffer = (char *) xmalloc (inf_size + 2);\n-  inf_buffer[inf_size] = '\\n';\n-  inf_buffer[inf_size + 1] = '\\0';\n-  inf_limit = inf_buffer + inf_size;\n   inf_ptr = inf_buffer;\n \n   to_read = inf_size;\n@@ -1209,6 +1206,11 @@ main (argc, argv)\n \n   close (inf_fd);\n \n+  /* Inf_size may have changed if read was short (as on VMS) */\n+  inf_buffer[inf_size] = '\\n';\n+  inf_buffer[inf_size + 1] = '\\0';\n+  inf_limit = inf_buffer + inf_size;\n+\n   /* If file doesn't end with '\\n', add one.  */\n   if (inf_limit > inf_buffer && inf_limit[-1] != '\\n')\n     inf_limit++;"}]}