{"sha": "34ef07452f53c7e283f2999625393c550c1b98ba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzRlZjA3NDUyZjUzYzdlMjgzZjI5OTk2MjUzOTNjNTUwYzFiOThiYQ==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2018-01-15T23:02:03Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2018-01-15T23:02:03Z"}, "message": "rs6000: Delete \"delayed_cr\" insn type\n\n\"delayed_cr\" is just \"cr_logical\" with the second source operand not\nequal to the destination operand.  This patch changes it to be\nexpressed as type \"cr_logical\", with a new boolean attribute\n\"cr_logical_3op\" added.  This simplifies code.\n\n\n\t* config/rs6000/rs6000.md (define_attr \"type\"): Remove delayed_cr.\n\t(define_attr \"cr_logical_3op\"): New.\n\t(cceq_ior_compare): Adjust.\n\t(cceq_ior_compare_complement): Adjust.\n\t(*cceq_rev_compare): Adjust.\n\t* config/rs6000/rs6000.c (rs6000_adjust_cost): Adjust.\n\t(is_cracked_insn): Adjust.\n\t(insn_must_be_first_in_group): Adjust.\n\t* config/rs6000/40x.md: Adjust.\n\t* config/rs6000/440.md: Adjust.\n\t* config/rs6000/476.md: Adjust.\n\t* config/rs6000/601.md: Adjust.\n\t* config/rs6000/603.md: Adjust.\n\t* config/rs6000/6xx.md: Adjust.\n\t* config/rs6000/7450.md: Adjust.\n\t* config/rs6000/7xx.md: Adjust.\n\t* config/rs6000/8540.md: Adjust.\n\t* config/rs6000/cell.md: Adjust.\n\t* config/rs6000/e300c2c3.md: Adjust.\n\t* config/rs6000/e500mc.md: Adjust.\n\t* config/rs6000/e500mc64.md: Adjust.\n\t* config/rs6000/e5500.md: Adjust.\n\t* config/rs6000/e6500.md: Adjust.\n\t* config/rs6000/mpc.md: Adjust.\n\t* config/rs6000/power4.md: Adjust.\n\t* config/rs6000/power5.md: Adjust.\n\t* config/rs6000/power6.md: Adjust.\n\t* config/rs6000/power7.md: Adjust.\n\t* config/rs6000/power8.md: Adjust.\n\t* config/rs6000/power9.md: Adjust.\n\t* config/rs6000/rs64.md: Adjust.\n\t* config/rs6000/titan.md: Adjust.\n\nFrom-SVN: r256716", "tree": {"sha": "9df8fe4ce3f0e841719f717d5f1245862cdb1f34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9df8fe4ce3f0e841719f717d5f1245862cdb1f34"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/34ef07452f53c7e283f2999625393c550c1b98ba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34ef07452f53c7e283f2999625393c550c1b98ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34ef07452f53c7e283f2999625393c550c1b98ba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34ef07452f53c7e283f2999625393c550c1b98ba/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "894c144ca2ebad231fcd9a42abaf2a12bb629142", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/894c144ca2ebad231fcd9a42abaf2a12bb629142", "html_url": "https://github.com/Rust-GCC/gccrs/commit/894c144ca2ebad231fcd9a42abaf2a12bb629142"}], "stats": {"total": 117, "additions": 75, "deletions": 42}, "files": [{"sha": "b2acae1c1e15150badfbdfc04cf2111b4701a685", "filename": "gcc/ChangeLog", "status": "modified", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -1,3 +1,38 @@\n+2018-01-15  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\t* config/rs6000/rs6000.md (define_attr \"type\"): Remove delayed_cr.\n+\t(define_attr \"cr_logical_3op\"): New.\n+\t(cceq_ior_compare): Adjust.\n+\t(cceq_ior_compare_complement): Adjust.\n+\t(*cceq_rev_compare): Adjust.\n+\t* config/rs6000/rs6000.c (rs6000_adjust_cost): Adjust.\n+\t(is_cracked_insn): Adjust.\n+\t(insn_must_be_first_in_group): Adjust.\n+\t* config/rs6000/40x.md: Adjust.\n+\t* config/rs6000/440.md: Adjust.\n+\t* config/rs6000/476.md: Adjust.\n+\t* config/rs6000/601.md: Adjust.\n+\t* config/rs6000/603.md: Adjust.\n+\t* config/rs6000/6xx.md: Adjust.\n+\t* config/rs6000/7450.md: Adjust.\n+\t* config/rs6000/7xx.md: Adjust.\n+\t* config/rs6000/8540.md: Adjust.\n+\t* config/rs6000/cell.md: Adjust.\n+\t* config/rs6000/e300c2c3.md: Adjust.\n+\t* config/rs6000/e500mc.md: Adjust.\n+\t* config/rs6000/e500mc64.md: Adjust.\n+\t* config/rs6000/e5500.md: Adjust.\n+\t* config/rs6000/e6500.md: Adjust.\n+\t* config/rs6000/mpc.md: Adjust.\n+\t* config/rs6000/power4.md: Adjust.\n+\t* config/rs6000/power5.md: Adjust.\n+\t* config/rs6000/power6.md: Adjust.\n+\t* config/rs6000/power7.md: Adjust.\n+\t* config/rs6000/power8.md: Adjust.\n+\t* config/rs6000/power9.md: Adjust.\n+\t* config/rs6000/rs64.md: Adjust.\n+\t* config/rs6000/titan.md: Adjust.\n+\n 2018-01-15  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/predicates.md (indirect_branch_operand): Rewrite"}, {"sha": "5a36bd244f1ed438e8c23a2889815c59919ce31f", "filename": "gcc/config/rs6000/40x.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F40x.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F40x.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F40x.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -114,7 +114,7 @@\n   \"bpu_40x\")\n \n (define_insn_reservation \"ppc403-cr\" 2\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc403,ppc405\"))\n   \"bpu_40x\")\n "}, {"sha": "fb5c3725f2633f5e026f7dc45966790fe5042135", "filename": "gcc/config/rs6000/440.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F440.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F440.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F440.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -95,7 +95,7 @@\n   \"ppc440_issue,ppc440_i_pipe\")\n \n (define_insn_reservation \"ppc440-compare\" 2\n-  (and (ior (eq_attr \"type\" \"cmp,cr_logical,delayed_cr,mfcr\")\n+  (and (ior (eq_attr \"type\" \"cmp,cr_logical,mfcr\")\n \t    (and (eq_attr \"type\" \"add,logical,shift,exts\")\n \t\t (eq_attr \"dot\" \"yes\")))\n        (eq_attr \"cpu\" \"ppc440\"))"}, {"sha": "3ee92b83388ce80da0928e596c79ab935f52f87d", "filename": "gcc/config/rs6000/476.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F476.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F476.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F476.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -71,7 +71,7 @@\n    ppc476_i_pipe|ppc476_lj_pipe\")\n \n (define_insn_reservation \"ppc476-complex-integer\" 1\n-  (and (eq_attr \"type\" \"cmp,cr_logical,delayed_cr,cntlz,isel,isync,sync,trap,popcnt\")\n+  (and (eq_attr \"type\" \"cmp,cr_logical,cntlz,isel,isync,sync,trap,popcnt\")\n        (eq_attr \"cpu\" \"ppc476\"))\n   \"ppc476_issue,\\\n    ppc476_i_pipe\")"}, {"sha": "0e386e3c5574638bb6751d5e16368ac7e04510b0", "filename": "gcc/config/rs6000/601.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F601.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F601.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F601.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -116,7 +116,7 @@\n   \"iu_ppc601,bpu_ppc601\")\n \n (define_insn_reservation \"ppc601-crlogical\" 4\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc601\"))\n   \"bpu_ppc601\")\n "}, {"sha": "b27c31c9b63bff98915bf3b43c047188dc27ed52", "filename": "gcc/config/rs6000/603.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F603.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F603.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F603.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -126,7 +126,7 @@\n   \"fpu_603*33\")\n \n (define_insn_reservation \"ppc603-crlogical\" 2\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr,mfcr,mtcr\")\n+  (and (eq_attr \"type\" \"cr_logical,mfcr,mtcr\")\n        (eq_attr \"cpu\" \"ppc603\"))\n   \"sru_603\")\n "}, {"sha": "527356b5425f75344033db9937b81879ae546d39", "filename": "gcc/config/rs6000/6xx.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F6xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F6xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F6xx.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -233,12 +233,12 @@\n   \"iu1_6xx|iu2_6xx\")\n \n (define_insn_reservation \"ppc604-crlogical\" 2\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc604\"))\n   \"bpu_6xx\")\n \n (define_insn_reservation \"ppc604e-crlogical\" 2\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc604e,ppc620,ppc630\"))\n   \"cru_6xx\")\n "}, {"sha": "f4177b483694ada4ba5b20b5fa54c13aafdfe2a9", "filename": "gcc/config/rs6000/7450.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F7450.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F7450.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7450.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -141,7 +141,7 @@\n   \"ppc7450_du,mciu_7450\")\n \n (define_insn_reservation \"ppc7450-crlogical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc7450\"))\n   \"ppc7450_du,mciu_7450\")\n "}, {"sha": "10032490d3409c1ecbad6c69d753978c18726859", "filename": "gcc/config/rs6000/7xx.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F7xx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F7xx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F7xx.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -144,7 +144,7 @@\n   \"ppc750_du,iu1_7xx\")\n \n (define_insn_reservation \"ppc750-crlogical\" 3\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc750,ppc7400\"))\n   \"nothing,sru_7xx*2\")\n "}, {"sha": "e26553009a950a21b52331955f9ef50dd88f5986", "filename": "gcc/config/rs6000/8540.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F8540.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2F8540.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2F8540.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -127,7 +127,7 @@\n \n ;; CR logical\n (define_insn_reservation \"ppc8540_cr_logical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppc8540,ppc8548\"))\n   \"ppc8540_decode,ppc8540_bu,ppc8540_retire\")\n "}, {"sha": "9ea1f5c7f2ee86ce969eecde0f6ab5585916563e", "filename": "gcc/config/rs6000/cell.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fcell.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fcell.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fcell.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -288,7 +288,7 @@\n ;; page 90, special cases for CR hazard, only one instr can access cr per cycle\n ;; if insn reads CR following a stwcx, pipeline stall till stwcx finish\n (define_insn_reservation \"cell-crlogical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"cell\"))\n   \"bru_cell+slot01\")\n "}, {"sha": "cef19c6db756f48a30db45b5270375ae257f1e17", "filename": "gcc/config/rs6000/e300c2c3.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe300c2c3.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -121,7 +121,7 @@\n \n ;; CR logical\n (define_insn_reservation \"ppce300c3_cr_logical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (ior (eq_attr \"cpu\" \"ppce300c2\") (eq_attr \"cpu\" \"ppce300c3\")))\n   \"ppce300c3_decode,ppce300c3_issue+ppce300c3_sru_stage0+ppce300c3_retire\")\n "}, {"sha": "fde6ed7885aef76151cd3baf445b630b90b7c767", "filename": "gcc/config/rs6000/e500mc.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe500mc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -110,7 +110,7 @@\n \n ;; CR logical.\n (define_insn_reservation \"e500mc_cr_logical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppce500mc\"))\n   \"e500mc_decode,e500mc_bu,e500mc_retire\")\n "}, {"sha": "be0033e00f4304bd2959271eb398670f94f259ab", "filename": "gcc/config/rs6000/e500mc64.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe500mc64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe500mc64.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -129,7 +129,7 @@\n \n ;; CR logical.\n (define_insn_reservation \"e500mc64_cr_logical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppce500mc64\"))\n   \"e500mc64_decode,e500mc64_bu,e500mc64_retire\")\n "}, {"sha": "fe9b5540088be46d3a640a4bcdda82002d4b0839", "filename": "gcc/config/rs6000/e5500.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe5500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe5500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe5500.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -185,6 +185,6 @@\n \n ;; BU - CR logical.\n (define_insn_reservation \"e5500_cr_logical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppce5500\"))\n   \"e5500_decode,e5500_bu\")"}, {"sha": "a11663e62d5f38bb2a35399cb07a930b0f810b19", "filename": "gcc/config/rs6000/e6500.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe6500.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fe6500.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fe6500.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -199,7 +199,7 @@\n \n ;; BU - CR logical.\n (define_insn_reservation \"e6500_cr_logical\" 1\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"ppce6500\"))\n   \"e6500_decode,e6500_bu\")\n "}, {"sha": "93247908fc297eadf0c65035e3e7219923b7b9fd", "filename": "gcc/config/rs6000/mpc.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fmpc.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fmpc.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fmpc.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -106,7 +106,7 @@\n   \"bpu_mpc\")\n \n (define_insn_reservation \"mpccore-jmpreg\" 1\n-  (and (eq_attr \"type\" \"jmpreg,branch,cr_logical,delayed_cr,mfcr,mtcr,isync\")\n+  (and (eq_attr \"type\" \"jmpreg,branch,cr_logical,mfcr,mtcr,isync\")\n        (eq_attr \"cpu\" \"mpccore\"))\n   \"bpu_mpc\")\n "}, {"sha": "4070fd11eda0c0602307a42460d63ccf5db070a6", "filename": "gcc/config/rs6000/power4.md", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower4.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -351,11 +351,13 @@\n ; Condition Register logical ops are split if non-destructive (RT != RB)\n (define_insn_reservation \"power4-crlogical\" 2\n   (and (eq_attr \"type\" \"cr_logical\")\n+       (eq_attr \"cr_logical_3op\" \"no\")\n        (eq_attr \"cpu\" \"power4\"))\n   \"du1_power4,cru_power4\")\n \n (define_insn_reservation \"power4-delayedcr\" 4\n-  (and (eq_attr \"type\" \"delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n+       (eq_attr \"cr_logical_3op\" \"yes\")\n        (eq_attr \"cpu\" \"power4\"))\n   \"du1_power4+du2_power4,cru_power4,cru_power4\")\n "}, {"sha": "af1e5ce313195fe4cb2d5232a4d6112ebe641f64", "filename": "gcc/config/rs6000/power5.md", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower5.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower5.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower5.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -292,11 +292,13 @@\n ; Condition Register logical ops are split if non-destructive (RT != RB)\n (define_insn_reservation \"power5-crlogical\" 2\n   (and (eq_attr \"type\" \"cr_logical\")\n+       (eq_attr \"cr_logical_3op\" \"no\")\n        (eq_attr \"cpu\" \"power5\"))\n   \"du1_power5,cru_power5\")\n \n (define_insn_reservation \"power5-delayedcr\" 4\n-  (and (eq_attr \"type\" \"delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n+       (eq_attr \"cr_logical_3op\" \"yes\")\n        (eq_attr \"cpu\" \"power5\"))\n   \"du1_power5+du2_power5,cru_power5,cru_power5\")\n "}, {"sha": "4b19c04e507ecbf70b196dde136c33d1dde509a7", "filename": "gcc/config/rs6000/power6.md", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower6.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower6.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower6.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -475,11 +475,6 @@\n \n (define_bypass 3 \"power6-crlogical\" \"power6-branch\")\n \n-(define_insn_reservation \"power6-delayedcr\" 3\n-  (and (eq_attr \"type\" \"delayed_cr\")\n-       (eq_attr \"cpu\" \"power6\"))\n-  \"BRU_power6\")\n-\n (define_insn_reservation \"power6-mfcr\" 6 ; N/A\n   (and (eq_attr \"type\" \"mfcr\")\n        (eq_attr \"cpu\" \"power6\"))"}, {"sha": "a9381c6c99ec4606423149878d0320bda6af9df5", "filename": "gcc/config/rs6000/power7.md", "status": "modified", "additions": 1, "deletions": 6, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower7.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower7.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower7.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -208,7 +208,7 @@\n        (eq_attr \"cpu\" \"power7\"))\n   \"DU2F_power7,FXU_power7,FXU_power7\")\n \n-(define_bypass 3 \"power7-cmp,power7-compare\" \"power7-crlogical,power7-delayedcr\")\n+(define_bypass 3 \"power7-cmp,power7-compare\" \"power7-crlogical\")\n \n (define_insn_reservation \"power7-mul\" 4\n   (and (eq_attr \"type\" \"mul\")\n@@ -256,11 +256,6 @@\n        (eq_attr \"cpu\" \"power7\"))\n   \"du1_power7,cru_power7\")\n \n-(define_insn_reservation \"power7-delayedcr\" 3\n-  (and (eq_attr \"type\" \"delayed_cr\")\n-       (eq_attr \"cpu\" \"power7\"))\n-  \"du1_power7,cru_power7\")\n-\n (define_insn_reservation \"power7-mfcr\" 6\n   (and (eq_attr \"type\" \"mfcr\")\n        (eq_attr \"cpu\" \"power7\"))"}, {"sha": "71b7ae4f3ed0fff4733d7ece6b803db6ae04b115", "filename": "gcc/config/rs6000/power8.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower8.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower8.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower8.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -281,7 +281,7 @@\n   \"DU_first_power8,cru_power8+FXU_power8\")\n \n (define_insn_reservation \"power8-crlogical\" 3\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"power8\"))\n   \"DU_first_power8,cru_power8\")\n "}, {"sha": "79ebbe47e08dc4e8d8fff6a67beaad2d571cab16", "filename": "gcc/config/rs6000/power9.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower9.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Fpower9.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower9.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -336,7 +336,7 @@\n   \"DU_even_power9,fx_div0_power9*8|fx_div1_power9*8\")\n \n (define_insn_reservation \"power9-crlogical\" 2\n-  (and (eq_attr \"type\" \"cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"cr_logical\")\n        (eq_attr \"cpu\" \"power9\"))\n   \"DU_any_power9,VSU_power9\")\n "}, {"sha": "8cda17febc9f821d7d2d6f3c191565b4d4717ec6", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -30654,7 +30654,6 @@ rs6000_adjust_cost (rtx_insn *insn, int dep_type, rtx_insn *dep_insn, int cost,\n                 case TYPE_CMP:\n                 case TYPE_FPCOMPARE:\n                 case TYPE_CR_LOGICAL:\n-                case TYPE_DELAYED_CR:\n \t\t  return cost + 2;\n                 case TYPE_EXTS:\n                 case TYPE_MUL:\n@@ -30950,7 +30949,8 @@ is_cracked_insn (rtx_insn *insn)\n \t      && get_attr_indexed (insn) == INDEXED_NO)\n \t  || ((type == TYPE_FPLOAD || type == TYPE_FPSTORE)\n \t      && get_attr_update (insn) == UPDATE_YES)\n-\t  || type == TYPE_DELAYED_CR\n+\t  || (type == TYPE_CR_LOGICAL\n+\t      && get_attr_cr_logical_3op (insn) == CR_LOGICAL_3OP_YES)\n \t  || (type == TYPE_EXTS\n \t      && get_attr_dot (insn) == DOT_YES)\n \t  || (type == TYPE_SHIFT\n@@ -31941,7 +31941,6 @@ insn_must_be_first_in_group (rtx_insn *insn)\n         case TYPE_MFCR:\n         case TYPE_MFCRF:\n         case TYPE_MTCR:\n-        case TYPE_DELAYED_CR:\n         case TYPE_CR_LOGICAL:\n         case TYPE_MTJMPR:\n         case TYPE_MFJMPR:\n@@ -32044,7 +32043,6 @@ insn_must_be_first_in_group (rtx_insn *insn)\n       switch (type)\n         {\n         case TYPE_CR_LOGICAL:\n-        case TYPE_DELAYED_CR:\n         case TYPE_MFCR:\n         case TYPE_MFCRF:\n         case TYPE_MTCR:"}, {"sha": "dc8745ca038eaabb05d2190136e8bf5a57f45319", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -182,7 +182,7 @@\n    load,store,fpload,fpstore,vecload,vecstore,\n    cmp,\n    branch,jmpreg,mfjmpr,mtjmpr,trap,isync,sync,load_l,store_c,\n-   cr_logical,delayed_cr,mfcr,mfcrf,mtcr,\n+   cr_logical,mfcr,mfcrf,mtcr,\n    fpcompare,fp,fpsimple,dmul,qmul,sdiv,ddiv,ssqrt,dsqrt,\n    vecsimple,veccomplex,vecdiv,veccmp,veccmpsimple,vecperm,\n    vecfloat,vecfdiv,vecdouble,mffgpr,mftgpr,crypto,\n@@ -206,6 +206,9 @@\n ;; This is used for load insns.\n (define_attr \"sign_extend\" \"no,yes\" (const_string \"no\"))\n \n+;; Does this cr_logical instruction have three operands?  That is, BT != BB.\n+(define_attr \"cr_logical_3op\" \"no,yes\" (const_string \"no\"))\n+\n ;; Does this instruction use indexed (that is, reg+reg) addressing?\n ;; This is used for load and store insns.  If operand 0 or 1 is a MEM\n ;; it is automatically set based on that.  If a load or store instruction\n@@ -12283,7 +12286,8 @@\n \t\t      (const_int 1)))]\n   \"\"\n   \"cr%q1 %E0,%j2,%j4\"\n-  [(set_attr \"type\" \"cr_logical,delayed_cr\")])\n+  [(set_attr \"type\" \"cr_logical\")\n+   (set_attr \"cr_logical_3op\" \"no,yes\")])\n \n ; Why is the constant -1 here, but 1 in the previous pattern?\n ; Because ~1 has all but the low bit set.\n@@ -12303,7 +12307,8 @@\n \t\t      (const_int -1)))]\n   \"\"\n   \"cr%q1 %E0,%j2,%j4\"\n-  [(set_attr \"type\" \"cr_logical,delayed_cr\")])\n+  [(set_attr \"type\" \"cr_logical\")\n+   (set_attr \"cr_logical_3op\" \"no,yes\")])\n \n (define_insn \"*cceq_rev_compare\"\n   [(set (match_operand:CCEQ 0 \"cc_reg_operand\" \"=y,?y\")\n@@ -12315,7 +12320,8 @@\n \t\t      (const_int 0)))]\n   \"\"\n   \"crnot %E0,%j1\"\n-  [(set_attr \"type\" \"cr_logical,delayed_cr\")])\n+  [(set_attr \"type\" \"cr_logical\")\n+   (set_attr \"cr_logical_3op\" \"no,yes\")])\n \n ;; If we are comparing the result of two comparisons, this can be done\n ;; using creqv or crxor."}, {"sha": "62582e3b9fe6ee9029f2ed6c3755f2a12032c282", "filename": "gcc/config/rs6000/rs64.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Frs64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Frs64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs64.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -146,7 +146,7 @@\n   \"lsu_rs64\")\n \n (define_insn_reservation \"rs64a-jmpreg\" 1\n-  (and (eq_attr \"type\" \"jmpreg,branch,cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"jmpreg,branch,cr_logical\")\n        (eq_attr \"cpu\" \"rs64a\"))\n   \"bpu_rs64\")\n "}, {"sha": "4242a3984e1f50f0d00655994bb8c5b78fc01f64", "filename": "gcc/config/rs6000/titan.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Ftitan.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/34ef07452f53c7e283f2999625393c550c1b98ba/gcc%2Fconfig%2Frs6000%2Ftitan.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ftitan.md?ref=34ef07452f53c7e283f2999625393c550c1b98ba", "patch": "@@ -85,7 +85,7 @@\n (define_cpu_unit \"titan_bpu_sh\" \"titan_bpu\")\n \n (define_insn_reservation \"titan_bpu\" 2\n-  (and (eq_attr \"type\" \"branch,jmpreg,cr_logical,delayed_cr\")\n+  (and (eq_attr \"type\" \"branch,jmpreg,cr_logical\")\n        (eq_attr \"cpu\" \"titan\"))\n   \"titan_issue,titan_bpu_sh\")\n "}]}