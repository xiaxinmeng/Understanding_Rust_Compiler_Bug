{"sha": "b322cdb21a83d2e7ef89058ee56e5a814f916617", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjMyMmNkYjIxYTgzZDJlN2VmODkwNThlZTU2ZTVhODE0ZjkxNjYxNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2018-10-26T07:21:04Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2018-10-26T07:21:04Z"}, "message": "* tree.c (free_lang_data_in_type): Only check main variants.\n\nFrom-SVN: r265520", "tree": {"sha": "c1511680ea85eb957e27984a1282c9e4f9e91413", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1511680ea85eb957e27984a1282c9e4f9e91413"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b322cdb21a83d2e7ef89058ee56e5a814f916617", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b322cdb21a83d2e7ef89058ee56e5a814f916617", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b322cdb21a83d2e7ef89058ee56e5a814f916617", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b322cdb21a83d2e7ef89058ee56e5a814f916617/comments", "author": null, "committer": null, "parents": [{"sha": "420672bc92e560bcebf12bdd1f3423362c93bf2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/420672bc92e560bcebf12bdd1f3423362c93bf2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/420672bc92e560bcebf12bdd1f3423362c93bf2e"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "6a2ba3aa7a5a523eac04ab5059c660667eb7530b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b322cdb21a83d2e7ef89058ee56e5a814f916617/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b322cdb21a83d2e7ef89058ee56e5a814f916617/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b322cdb21a83d2e7ef89058ee56e5a814f916617", "patch": "@@ -1,5 +1,6 @@\n 2018-10-26  Jan Hubicka  <jh@suse.cz>\n \n+\t* tree.c (free_lang_data_in_type): Only check main variants.\n \t* ipa-devirt.c (warn_odr): Make static.\n \t(types_same_for_odr): Drop strict variant.\n \t(types_odr_comparable): Likewise."}, {"sha": "593ef1ae293f0c73567a518ea5c5c76785cbd600", "filename": "gcc/tree.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b322cdb21a83d2e7ef89058ee56e5a814f916617/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b322cdb21a83d2e7ef89058ee56e5a814f916617/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=b322cdb21a83d2e7ef89058ee56e5a814f916617", "patch": "@@ -5174,7 +5174,7 @@ free_lang_data_in_type (tree type)\n \n   /* Drop TYPE_DECLs in TYPE_NAME in favor of the identifier in the\n      TYPE_DECL if the type doesn't have linkage.  */\n-  if (! type_with_linkage_p (type))\n+  if (type != TYPE_MAIN_VARIANT (type) || ! type_with_linkage_p (type))\n     {\n       TYPE_NAME (type) = TYPE_IDENTIFIER (type);\n       TYPE_STUB_DECL (type) = NULL;"}]}