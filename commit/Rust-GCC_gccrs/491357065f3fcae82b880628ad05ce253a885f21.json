{"sha": "491357065f3fcae82b880628ad05ce253a885f21", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDkxMzU3MDY1ZjNmY2FlODJiODgwNjI4YWQwNWNlMjUzYTg4NWYyMQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-08-29T10:01:28Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-08-29T10:01:28Z"}, "message": "mips.md (UNSPEC_MOVE_TF_PS): New.\n\n\t* config/mips/mips.md (UNSPEC_MOVE_TF_PS): New.\n\t* config/mips/mips-ps-3d.md (mips_cond_move_tf_ps): Express as an\n\tUNSPEC rather than an IF_THEN_ELSE.\n\t* config/mips/mips.c (mips_expand_ps_cond_move_builtin): Emit\n\tmips_cond_move_tf_ps by name.\n\nFrom-SVN: r86714", "tree": {"sha": "e1c772bbe6bb1b4e2c79f4d3dac073a2ebc30b3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e1c772bbe6bb1b4e2c79f4d3dac073a2ebc30b3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/491357065f3fcae82b880628ad05ce253a885f21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/491357065f3fcae82b880628ad05ce253a885f21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/491357065f3fcae82b880628ad05ce253a885f21", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/491357065f3fcae82b880628ad05ce253a885f21/comments", "author": null, "committer": null, "parents": [{"sha": "06a4ab70225ea3867373d64be6a13576cf7e9e2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/06a4ab70225ea3867373d64be6a13576cf7e9e2d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/06a4ab70225ea3867373d64be6a13576cf7e9e2d"}], "stats": {"total": 38, "additions": 20, "deletions": 18}, "files": [{"sha": "903555b7fc7a855734dd2c848af41be6a6139859", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/491357065f3fcae82b880628ad05ce253a885f21/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/491357065f3fcae82b880628ad05ce253a885f21/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=491357065f3fcae82b880628ad05ce253a885f21", "patch": "@@ -1,3 +1,11 @@\n+2004-08-29  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/mips.md (UNSPEC_MOVE_TF_PS): New.\n+\t* config/mips/mips-ps-3d.md (mips_cond_move_tf_ps): Express as an\n+\tUNSPEC rather than an IF_THEN_ELSE.\n+\t* config/mips/mips.c (mips_expand_ps_cond_move_builtin): Emit\n+\tmips_cond_move_tf_ps by name.\n+\n 2004-08-29  Chao-ying Fu  <fu@mips.com>\n \t    James E Wilson  <wilson@specifixinc.com>\n \t"}, {"sha": "0f7a76fc6982fc153ee0f69dfd8aca6cda02e559", "filename": "gcc/config/mips/mips-ps-3d.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/491357065f3fcae82b880628ad05ce253a885f21/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/491357065f3fcae82b880628ad05ce253a885f21/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md?ref=491357065f3fcae82b880628ad05ce253a885f21", "patch": "@@ -50,10 +50,10 @@\n \n (define_insn \"mips_cond_move_tf_ps\"\n   [(set (match_operand:V2SF 0 \"register_operand\" \"=f,f\")\n-\t(if_then_else:V2SF\n-\t (eq:CCV2 (match_operand:CCV2 3 \"register_operand\" \"z,z\") (const_int 0))\n-\t (match_operand:V2SF 1 \"register_operand\" \"f,0\")\n-\t (match_operand:V2SF 2 \"register_operand\" \"0,f\")))]\n+\t(unspec:V2SF [(match_operand:V2SF 1 \"register_operand\" \"f,0\")\n+\t\t      (match_operand:V2SF 2 \"register_operand\" \"0,f\")\n+\t\t      (match_operand:CCV2 3 \"register_operand\" \"z,z\")]\n+\t\t     UNSPEC_MOVE_TF_PS))]\n   \"TARGET_PAIRED_SINGLE_FLOAT\"\n   \"@\n     movt.ps\\t%0,%1,%y3"}, {"sha": "b2410a0d86e626a8ca5587815be3f77537697e1e", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 7, "deletions": 14, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/491357065f3fcae82b880628ad05ce253a885f21/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/491357065f3fcae82b880628ad05ce253a885f21/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=491357065f3fcae82b880628ad05ce253a885f21", "patch": "@@ -10688,7 +10688,8 @@ mips_expand_ps_cond_move_builtin (enum mips_cmp_choice cmp_choice,\n   enum machine_mode mode0;\n   enum machine_mode mode1;\n   rtx temp_target;\n-  rtx if_then_else;\n+  rtx src1;\n+  rtx src2;\n   enum rtx_code test_code;\n   int compare_value;\n \n@@ -10745,28 +10746,20 @@ mips_expand_ps_cond_move_builtin (enum mips_cmp_choice cmp_choice,\n   switch (cmp_choice)\n     {\n     case MIPS_CMP_MOVT:\n-      if_then_else \n-\t= gen_rtx_IF_THEN_ELSE (tmode,\n-\t\t\t\tgen_rtx_fmt_ee (test_code, CCV2mode, \n-\t\t\t\t\t\ttemp_target,\n-\t\t\t\t\t        GEN_INT (compare_value)),\n-\t\t\t\top3, target);\n+      src1 = op3;\n+      src2 = target;\n       break;\n \n     case MIPS_CMP_MOVF:\n-      if_then_else \n-\t= gen_rtx_IF_THEN_ELSE (tmode,\n-\t\t\t\tgen_rtx_fmt_ee (test_code, CCV2mode, \n-\t\t\t\t\t\ttemp_target,\n-\t\t\t\t\t        GEN_INT (compare_value)), \n-\t\t\t\ttarget, op3);\n+      src1 = target;\n+      src2 = op3;\n       break;\n \n     default:\n       return 0;\n     }\n \n-  emit_insn (gen_rtx_SET (VOIDmode, target, if_then_else)); \n+  emit_insn (gen_mips_cond_move_tf_ps (target, src1, src2, temp_target));\n \n   return target;\n }"}, {"sha": "5f5d7e4fce0df514f7b5abf19c18fc90a3bd9855", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/491357065f3fcae82b880628ad05ce253a885f21/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/491357065f3fcae82b880628ad05ce253a885f21/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=491357065f3fcae82b880628ad05ce253a885f21", "patch": "@@ -110,6 +110,7 @@\n    (UNSPEC_RSQRT2_D\t\t248)\n    (UNSPEC_RSQRT2_PS\t\t249)\n \n+   (UNSPEC_MOVE_TF_PS\t\t250)\n   ]\n )\n "}]}