{"sha": "c28aa98278aefa2e6828f1500dacb9810289a4ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzI4YWE5ODI3OGFlZmEyZTY4MjhmMTUwMGRhY2I5ODEwMjg5YTRlZQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-09-30T18:25:06Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-09-30T18:25:06Z"}, "message": "sparc.opt (mimpure-text): Move ...\n\n\t* config/sparc/sparc.opt (mimpure-text): Move ...\n\t* config/sol2.opt: ... here.\n\tCorrect description.\n\t* config.gcc (*-*-solaris2*): Add sol2.opt to extra_options.\n\t* doc/invoke.texi (Option Summary, SPARC Options): Move\n\t-mimpure-text, -mno-impure-text, -threads, -pthreads, -pthread ...\n\t(Option Summary, Solaris 2 Options): ... here.\n\t(Submodel Options, Solaris 2 Options): New menu entry.\n\t(SPARC Options): Move -mimpure-text, -threads, -pthreads, -pthread ...\n\t(Solaris 2 Options): ... here.\n\nFrom-SVN: r164757", "tree": {"sha": "f6b1b9f6c75dd5d8e2af3467b559ccca990e6be1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f6b1b9f6c75dd5d8e2af3467b559ccca990e6be1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c28aa98278aefa2e6828f1500dacb9810289a4ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c28aa98278aefa2e6828f1500dacb9810289a4ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c28aa98278aefa2e6828f1500dacb9810289a4ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c28aa98278aefa2e6828f1500dacb9810289a4ee/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "809201325afb3d70e517d30a483b39251b1b6e27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/809201325afb3d70e517d30a483b39251b1b6e27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/809201325afb3d70e517d30a483b39251b1b6e27"}], "stats": {"total": 136, "additions": 91, "deletions": 45}, "files": [{"sha": "87a86c4ff10d6630499adea06c04a7372c8dad45", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c28aa98278aefa2e6828f1500dacb9810289a4ee", "patch": "@@ -1,3 +1,16 @@\n+2010-09-30  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* config/sparc/sparc.opt (mimpure-text): Move ...\n+\t* config/sol2.opt: ... here.\n+\tCorrect description.\n+\t* config.gcc (*-*-solaris2*): Add sol2.opt to extra_options.\n+\t* doc/invoke.texi (Option Summary, SPARC Options): Move\n+\t-mimpure-text, -mno-impure-text, -threads, -pthreads, -pthread ...\n+\t(Option Summary, Solaris 2 Options): ... here.\n+\t(Submodel Options, Solaris 2 Options): New menu entry.\n+\t(SPARC Options): Move -mimpure-text, -threads, -pthreads, -pthread ...\n+\t(Solaris 2 Options): ... here.\n+\n 2010-09-30  Michael Eager  <eager@eagercon.com>\n \n \t* extend.texi (interrupt_handler): Add MicroBlaze to list."}, {"sha": "e30c06ef4a159abf4ffc0cfafdb269addd9b7e0b", "filename": "gcc/config.gcc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=c28aa98278aefa2e6828f1500dacb9810289a4ee", "patch": "@@ -653,6 +653,9 @@ case ${target} in\n *-*-uclinux*)\n   use_gcc_stdint=wrap\n   ;;\n+*-*-solaris2*)\n+  extra_options=\"${extra_options} sol2.opt\"\n+  ;;\n *-*-vxworks*)\n   tmake_file=t-vxworks\n   xm_defines=POSIX"}, {"sha": "2da2ab5774cd493b2d95f1a3690cb515bb991e0f", "filename": "gcc/config/sol2.opt", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fconfig%2Fsol2.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fconfig%2Fsol2.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2.opt?ref=c28aa98278aefa2e6828f1500dacb9810289a4ee", "patch": "@@ -0,0 +1,23 @@\n+; Options for the Solaris 2 port of the compiler\n+;\n+; Copyright (C) 2010 Free Software Foundation, Inc.\n+;\n+; This file is part of GCC.\n+;\n+; GCC is free software; you can redistribute it and/or modify it under\n+; the terms of the GNU General Public License as published by the Free\n+; Software Foundation; either version 3, or (at your option) any later\n+; version.\n+;\n+; GCC is distributed in the hope that it will be useful, but WITHOUT\n+; ANY WARRANTY; without even the implied warranty of MERCHANTABILITY\n+; or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public\n+; License for more details.\n+;\n+; You should have received a copy of the GNU General Public License\n+; along with GCC; see the file COPYING3.  If not see\n+; <http://www.gnu.org/licenses/>.\n+\n+mimpure-text\n+Target Report\n+Pass -z text to linker"}, {"sha": "17de80da06facb2629656fcef50e09e8655149e9", "filename": "gcc/config/sparc/sparc.opt", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fconfig%2Fsparc%2Fsparc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fconfig%2Fsparc%2Fsparc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Fsparc.opt?ref=c28aa98278aefa2e6828f1500dacb9810289a4ee", "patch": "@@ -34,10 +34,6 @@ munaligned-doubles\n Target Report Mask(UNALIGNED_DOUBLES)\n Assume possible double misalignment\n \n-mimpure-text\n-Target Report\n-Pass -assert pure-text to linker\n-\n mapp-regs\n Target Report Mask(APP_REGS)\n Use ABI reserved registers"}, {"sha": "7d364184b0baad8253de3e317bf2dd2383eb5b9f", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 52, "deletions": 41, "changes": 93, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c28aa98278aefa2e6828f1500dacb9810289a4ee/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=c28aa98278aefa2e6828f1500dacb9810289a4ee", "patch": "@@ -848,6 +848,10 @@ See RS/6000 and PowerPC Options.\n -madjust-unroll -mindexed-addressing -mgettrcost=@var{number} -mpt-fixed @gol\n -maccumulate-outgoing-args -minvalid-symbols}\n \n+@emph{Solaris 2 Options}\n+@gccoptlist{-mimpure-text  -mno-impure-text @gol\n+-threads -pthreads -pthread}\n+\n @emph{SPARC Options}\n @gccoptlist{-mcpu=@var{cpu-type} @gol\n -mtune=@var{cpu-type} @gol\n@@ -856,11 +860,10 @@ See RS/6000 and PowerPC Options.\n -mfaster-structs  -mno-faster-structs @gol\n -mfpu  -mno-fpu  -mhard-float  -msoft-float @gol\n -mhard-quad-float  -msoft-quad-float @gol\n--mimpure-text  -mno-impure-text  -mlittle-endian @gol\n+-mlittle-endian @gol\n -mstack-bias  -mno-stack-bias @gol\n -munaligned-doubles  -mno-unaligned-doubles @gol\n--mv8plus  -mno-v8plus  -mvis  -mno-vis\n--threads -pthreads -pthread}\n+-mv8plus  -mno-v8plus  -mvis  -mno-vis}\n \n @emph{SPU Options}\n @gccoptlist{-mwarn-reloc -merror-reloc @gol\n@@ -9847,6 +9850,7 @@ platform.\n * S/390 and zSeries Options::\n * Score Options::\n * SH Options::\n+* Solaris 2 Options::\n * SPARC Options::\n * SPU Options::\n * System V Options::\n@@ -16705,6 +16709,51 @@ It will then prevent cross-basic-block cse, hoisting and most scheduling\n of symbol loads.  The default is @option{-mno-invalid-symbols}.\n @end table\n \n+@node Solaris 2 Options\n+@subsection Solaris 2 Options\n+@cindex Solaris 2 options\n+\n+These @samp{-m} options are supported on Solaris 2:\n+\n+@table @gcctabopt\n+@item -mimpure-text\n+@opindex mimpure-text\n+@option{-mimpure-text}, used in addition to @option{-shared}, tells\n+the compiler to not pass @option{-z text} to the linker when linking a\n+shared object.  Using this option, you can link position-dependent\n+code into a shared object.\n+\n+@option{-mimpure-text} suppresses the ``relocations remain against\n+allocatable but non-writable sections'' linker error message.\n+However, the necessary relocations will trigger copy-on-write, and the\n+shared object is not actually shared across processes.  Instead of\n+using @option{-mimpure-text}, you should compile all source code with\n+@option{-fpic} or @option{-fPIC}.\n+\n+@end table\n+\n+These switches are supported in addition to the above on Solaris 2:\n+\n+@table @gcctabopt\n+@item -threads\n+@opindex threads\n+Add support for multithreading using the Solaris threads library.  This\n+option sets flags for both the preprocessor and linker.  This option does\n+not affect the thread safety of object code produced by the compiler or\n+that of libraries supplied with it.\n+\n+@item -pthreads\n+@opindex pthreads\n+Add support for multithreading using the POSIX threads library.  This\n+option sets flags for both the preprocessor and linker.  This option does\n+not affect the thread safety of object code produced  by the compiler or\n+that of libraries supplied with it.\n+\n+@item -pthread\n+@opindex pthread\n+This is a synonym for @option{-pthreads}.\n+@end table\n+\n @node SPARC Options\n @subsection SPARC Options\n @cindex SPARC options\n@@ -16793,22 +16842,6 @@ ABI@.  Thus, it's intended only for use on targets where the developer\n acknowledges that their resulting code will not be directly in line with\n the rules of the ABI@.\n \n-@item -mimpure-text\n-@opindex mimpure-text\n-@option{-mimpure-text}, used in addition to @option{-shared}, tells\n-the compiler to not pass @option{-z text} to the linker when linking a\n-shared object.  Using this option, you can link position-dependent\n-code into a shared object.\n-\n-@option{-mimpure-text} suppresses the ``relocations remain against\n-allocatable but non-writable sections'' linker error message.\n-However, the necessary relocations will trigger copy-on-write, and the\n-shared object is not actually shared across processes.  Instead of\n-using @option{-mimpure-text}, you should compile all source code with\n-@option{-fpic} or @option{-fPIC}.\n-\n-This option is only available on SunOS and Solaris.\n-\n @item -mcpu=@var{cpu_type}\n @opindex mcpu\n Set the instruction set, register set, and instruction scheduling parameters\n@@ -16957,28 +16990,6 @@ when making stack frame references.  This is the default in 64-bit mode.\n Otherwise, assume no such offset is present.\n @end table\n \n-These switches are supported in addition to the above on Solaris:\n-\n-@table @gcctabopt\n-@item -threads\n-@opindex threads\n-Add support for multithreading using the Solaris threads library.  This\n-option sets flags for both the preprocessor and linker.  This option does\n-not affect the thread safety of object code produced by the compiler or\n-that of libraries supplied with it.\n-\n-@item -pthreads\n-@opindex pthreads\n-Add support for multithreading using the POSIX threads library.  This\n-option sets flags for both the preprocessor and linker.  This option does\n-not affect the thread safety of object code produced  by the compiler or\n-that of libraries supplied with it.\n-\n-@item -pthread\n-@opindex pthread\n-This is a synonym for @option{-pthreads}.\n-@end table\n-\n @node SPU Options\n @subsection SPU Options\n @cindex SPU options"}]}