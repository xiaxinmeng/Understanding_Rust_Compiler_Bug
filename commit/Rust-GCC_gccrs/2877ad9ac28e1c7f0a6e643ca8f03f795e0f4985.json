{"sha": "2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg3N2FkOWFjMjhlMWM3ZjBhNmU2NDNjYThmMDNmNzk1ZTBmNDk4NQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2020-02-25T11:34:00Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2020-02-25T11:39:14Z"}, "message": "Fix link failure with debug info in LTO mode\n\nThis fixes a regression whereby the program fails to link with debug\ninfo in LTO mode because of an undefined reference to a symbol coming\nfrom the object files containing the early debug info.\n\n\t* dwarf2out.c (dwarf2out_size_function): Run in early-DWARF mode.", "tree": {"sha": "ab11b11c923f8fedf71528054fa87a769c656971", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab11b11c923f8fedf71528054fa87a769c656971"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/comments", "author": null, "committer": null, "parents": [{"sha": "81ef67c10a3db7d789c7be653dba0a6e6a3e9958", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81ef67c10a3db7d789c7be653dba0a6e6a3e9958", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81ef67c10a3db7d789c7be653dba0a6e6a3e9958"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "78191a6b8c365ecb910a7a59ac7bb85d26ae1a3f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -1,3 +1,7 @@\n+2019-02-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* dwarf2out.c (dwarf2out_size_function): Run in early-DWARF mode.\n+\n 2020-02-25  Roman Zhuykov  <zhroma@ispras.ru>\n \n \t* doc/install.texi (--enable-checking): Adjust wording."}, {"sha": "1fcb19a0489c1a09684e665d1663d8312fd75857", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -27610,6 +27610,7 @@ dwarf2out_inline_entry (tree block)\n static void\n dwarf2out_size_function (tree decl)\n {\n+  set_early_dwarf s;\n   function_to_dwarf_procedure (decl);\n }\n "}, {"sha": "3a22e8608df00faf171e3e5654e3673f9b2310ec", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -1,3 +1,9 @@\n+2019-02-25  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/lto24.adb: New test.\n+\t* gnat.dg/lto24_pkg1.ads: New helper.\n+\t* gnat.dg/lto24_pkg2.ad[sb]: Likewise.\n+\n 2020-02-25  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/tree-ssa/ssa-fre-86.c: New testcase."}, {"sha": "998b44782548429590b8d8c60506de19701781a7", "filename": "gcc/testsuite/gnat.dg/lto24.adb", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto24.adb?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -0,0 +1,10 @@\n+-- { dg-do link }\n+-- { dg-options \"-O -g -flto\" { target lto } }\n+\n+with Lto24_Pkg1;\n+\n+procedure Lto24 is\n+  R : Lto24_Pkg1.Rec (False);\n+begin\n+  R.Empty := True;\n+end;"}, {"sha": "abe7e9117872fbb291a0c1e5f2fa9adf2c72a9e0", "filename": "gcc/testsuite/gnat.dg/lto24_pkg1.ads", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg1.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg1.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg1.ads?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -0,0 +1,17 @@\n+with Lto24_Pkg2;\n+\n+package Lto24_Pkg1 is\n+\n+  Max_Elem : constant Natural := Lto24_Pkg2.Get;\n+\n+  type Arr is array (Natural range <>) of Boolean;\n+\n+  type Rec (B : Boolean) is record\n+     I : Integer;\n+     case B is\n+       when True => A : Arr (1 .. Max_Elem);\n+       when False => Empty : Boolean;\n+     end case;\n+  end record;\n+\n+end Lto24_Pkg1;"}, {"sha": "12fb34e5750184c6a8c03c51d50ebd7a6ee531d5", "filename": "gcc/testsuite/gnat.dg/lto24_pkg2.adb", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg2.adb?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -0,0 +1,8 @@\n+package body Lto24_Pkg2 is\n+\n+  function Get return Natural is\n+  begin\n+    return 16;\n+  end;\n+\n+end Lto24_Pkg2;"}, {"sha": "79a916ea0b7dd3ef86b09b01f7948e31a1cc6ef8", "filename": "gcc/testsuite/gnat.dg/lto24_pkg2.ads", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg2.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg2.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Flto24_pkg2.ads?ref=2877ad9ac28e1c7f0a6e643ca8f03f795e0f4985", "patch": "@@ -0,0 +1,5 @@\n+package Lto24_Pkg2 is\n+\n+  function Get return Natural;\n+\n+end Lto24_Pkg2;"}]}