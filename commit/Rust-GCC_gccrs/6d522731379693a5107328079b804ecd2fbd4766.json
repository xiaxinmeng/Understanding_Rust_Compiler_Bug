{"sha": "6d522731379693a5107328079b804ecd2fbd4766", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ1MjI3MzEzNzk2OTNhNTEwNzMyODA3OWI4MDRlY2QyZmJkNDc2Ng==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-06-21T10:59:12Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-06-21T10:59:12Z"}, "message": "line-map.c (location_adhoc_data_update): Perform addition in uintptr_t type rather than char * type.\n\n\t* line-map.c (location_adhoc_data_update): Perform addition in\n\tuintptr_t type rather than char * type.  Read *data using\n\tptrdiff_t type instead of int64_t.\n\t(get_combined_adhoc_loc): Change offset type to ptrdiff_t from\n\tint64_t.\n\nFrom-SVN: r249446", "tree": {"sha": "cf6543870e2daf6ed7988acd197536ef1d848eb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf6543870e2daf6ed7988acd197536ef1d848eb1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d522731379693a5107328079b804ecd2fbd4766", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d522731379693a5107328079b804ecd2fbd4766", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d522731379693a5107328079b804ecd2fbd4766", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d522731379693a5107328079b804ecd2fbd4766/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d54d1fc3bcd2d3dda563f9bd95b60299bc892041", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54d1fc3bcd2d3dda563f9bd95b60299bc892041", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d54d1fc3bcd2d3dda563f9bd95b60299bc892041"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "526b8023b3886fe679fd7c63be9f355719438db4", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d522731379693a5107328079b804ecd2fbd4766/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d522731379693a5107328079b804ecd2fbd4766/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=6d522731379693a5107328079b804ecd2fbd4766", "patch": "@@ -1,3 +1,11 @@\n+2017-06-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* line-map.c (location_adhoc_data_update): Perform addition in\n+\tuintptr_t type rather than char * type.  Read *data using\n+\tptrdiff_t type instead of int64_t.\n+\t(get_combined_adhoc_loc): Change offset type to ptrdiff_t from\n+\tint64_t.\n+\n 2017-06-20  David Malcolm  <dmalcolm@redhat.com>\n \n \t* include/line-map.h (class rich_location): Document that attempts"}, {"sha": "476a465efa08675ef3a9a76275cad284ef7464ee", "filename": "libcpp/line-map.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d522731379693a5107328079b804ecd2fbd4766/libcpp%2Fline-map.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d522731379693a5107328079b804ecd2fbd4766/libcpp%2Fline-map.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fline-map.c?ref=6d522731379693a5107328079b804ecd2fbd4766", "patch": "@@ -99,7 +99,8 @@ location_adhoc_data_eq (const void *l1, const void *l2)\n static int\n location_adhoc_data_update (void **slot, void *data)\n {\n-  *((char **) slot) += *((int64_t *) data);\n+  *((char **) slot)\n+    = (char *) ((uintptr_t) *((char **) slot) + *((ptrdiff_t *) data));\n   return 1;\n }\n \n@@ -221,7 +222,7 @@ get_combined_adhoc_loc (struct line_maps *set,\n \t  set->location_adhoc_data_map.allocated)\n \t{\n \t  char *orig_data = (char *) set->location_adhoc_data_map.data;\n-\t  int64_t offset;\n+\t  ptrdiff_t offset;\n \t  /* Cast away extern \"C\" from the type of xrealloc.  */\n \t  line_map_realloc reallocator = (set->reallocator\n \t\t\t\t\t  ? set->reallocator"}]}