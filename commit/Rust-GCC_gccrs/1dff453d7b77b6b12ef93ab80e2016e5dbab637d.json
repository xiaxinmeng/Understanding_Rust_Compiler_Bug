{"sha": "1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRmZjQ1M2Q3Yjc3YjZiMTJlZjkzYWI4MGUyMDE2ZTVkYmFiNjM3ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-10-20T21:15:49Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-10-20T21:15:49Z"}, "message": "re PR tree-optimization/46066 (ICE: in create_parallel_loop, at tree-parloops.c:1455 with -ftree-parallelize-loops -g)\n\n\tPR tree-optimization/46066\n\t* tree-parloops.c (create_parallel_loop): Use gsi_last_nondebug_bb\n\tinstead of gsi_last_bb.\n\n\t* gcc.dg/autopar/pr46066.c: New test.\n\nFrom-SVN: r165739", "tree": {"sha": "252ff1cf456d46d3773cfded068b143931621919", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/252ff1cf456d46d3773cfded068b143931621919"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/comments", "author": null, "committer": null, "parents": [{"sha": "d123bf41c91c7eeb4672ad126317dfbb2930b034", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d123bf41c91c7eeb4672ad126317dfbb2930b034", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d123bf41c91c7eeb4672ad126317dfbb2930b034"}], "stats": {"total": 37, "additions": 33, "deletions": 4}, "files": [{"sha": "352be15761a6c6fbae5872102188defd5b71819d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "patch": "@@ -1,3 +1,9 @@\n+2010-10-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/46066\n+\t* tree-parloops.c (create_parallel_loop): Use gsi_last_nondebug_bb\n+\tinstead of gsi_last_bb.\n+\n 2010-10-20  DJ Delorie  <dj@redhat.com>\n \n \t* config/m32c/m32c.c (m32c_option_override): Always disable"}, {"sha": "665f8a5df4a97913ce80845d505c18d07f08312a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "patch": "@@ -1,9 +1,14 @@\n+2010-10-20  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/46066\n+\t* gcc.dg/autopar/pr46066.c: New test.\n+\n 2010-10-20  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \tPR c++/46024\n \t* g++.dg/warn/miss-format-1.C: Enclose dg-error target list in braces.\n \n-2010-10-20  Rodrigo Rivas Costa <rodrigorivascosta@gmail.com>\n+2010-10-20  Rodrigo Rivas Costa  <rodrigorivascosta@gmail.com>\n \n \tPR c++/46056\n \t* g++.dg/cpp0x/range-for7.C: New.\n@@ -1900,7 +1905,7 @@\n \n \t* gfortran.dg/promotion.f90: Fix options.\n \n-2010-09-11  Rodrigo Rivas <rodrigorivascosta@gmail.com>\n+2010-09-11  Rodrigo Rivas  <rodrigorivascosta@gmail.com>\n \n \t* g++.dg/cpp0x/range-for1.C: New.\n \t* g++.dg/cpp0x/range-for2.C: New.\n@@ -1915,7 +1920,7 @@\n \tand counts. Check that transpose is not called.\n \t* gfortran.dg/transpose_2.f90: Update error message.\n \n-2010-09-10  Rodrigo Rivas Costa <rodrigorivascosta@gmail.com>\n+2010-09-10  Rodrigo Rivas Costa  <rodrigorivascosta@gmail.com>\n \n \tPR c++/43824\n \t* g++.dg/lookup/strong-using-1.C: Set dg-options to \"\"."}, {"sha": "e9bf6c59e319d3747cfa874beb030d17b1716b18", "filename": "gcc/testsuite/gcc.dg/autopar/pr46066.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr46066.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr46066.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fautopar%2Fpr46066.c?ref=1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "patch": "@@ -0,0 +1,18 @@\n+/* PR tree-optimization/46066 */\n+/* { dg-do compile } */\n+/* { dg-options \"-fcompare-debug -O -ftree-parallelize-loops=4\" } */\n+\n+void\n+parloop (int N)\n+{\n+  int i, j, ii;\n+  int x[400][10][400];\n+  for (ii = 0; ii < N; ii++)\n+    for (i = 0; i < N; i++)\n+      for (j = 0; j < N; j++)\n+\tx[i][j][ii] = 3;\n+  for (i = 0; i < N; i++)\n+    for (j = 0; j < N; j++)\n+      if (x[i][j][0] != 3)\n+\t__builtin_abort ();\n+}"}, {"sha": "b25b2082922c94f2301d29be6c8f4747954094c4", "filename": "gcc/tree-parloops.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2Ftree-parloops.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dff453d7b77b6b12ef93ab80e2016e5dbab637d/gcc%2Ftree-parloops.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-parloops.c?ref=1dff453d7b77b6b12ef93ab80e2016e5dbab637d", "patch": "@@ -1451,7 +1451,7 @@ create_parallel_loop (struct loop *loop, tree loop_fn, tree data,\n \t   initvar);\n   cvar_next = PHI_ARG_DEF_FROM_EDGE (phi, loop_latch_edge (loop));\n \n-  gsi = gsi_last_bb (loop->latch);\n+  gsi = gsi_last_nondebug_bb (loop->latch);\n   gcc_assert (gsi_stmt (gsi) == SSA_NAME_DEF_STMT (cvar_next));\n   gsi_remove (&gsi, true);\n "}]}