{"sha": "803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODAzY2IwYjVjOWZmODFiYTBiNGVjMDE4ZmZmNTI5YTliN2NmNDNmMg==", "commit": {"author": {"name": "Richard B. Kreckel", "email": "richard.kreckel@framatome-anp.com", "date": "2004-05-29T14:40:59Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2004-05-29T14:40:59Z"}, "message": "re PR libstdc++/14600 (__gnu_cxx::stdio_sync_filebuf should expose internal FILE*)\n\n\n2004-05-29  Richard B. Kreckel  <Richard.Kreckel@Framatome-ANP.com>\n            Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/14600\n\t* include/ext/stdio_sync_filebuf.h (stdio_sync_filebuf::file): New.\n\t* include/ext/stdio_filebuf.h (stdio_filebuf::file): New.\n\t* config/io/basic_file_stdio.cc (__basic_file::file): New.\n\t* config/io/basic_file_stdio.h: Define.\n\nCo-Authored-By: Benjamin Kosnik <bkoz@redhat.com>\n\nFrom-SVN: r82419", "tree": {"sha": "b396c782c93385052fe88b5f37ebe56e4b012f64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b396c782c93385052fe88b5f37ebe56e4b012f64"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/comments", "author": null, "committer": null, "parents": [{"sha": "e73c80ae862805f76cb4c45de0b1109f5d3e14d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e73c80ae862805f76cb4c45de0b1109f5d3e14d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e73c80ae862805f76cb4c45de0b1109f5d3e14d5"}], "stats": {"total": 48, "additions": 44, "deletions": 4}, "files": [{"sha": "e60fd323ae0c32abd379a84638e49ae1bf3a2852", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "patch": "@@ -1,3 +1,12 @@\n+2004-05-29  Richard B. Kreckel  <Richard.Kreckel@Framatome-ANP.com>\n+            Benjamin Kosnik  <bkoz@redhat.com>\n+\t\n+\tPR libstdc++/14600\n+\t* include/ext/stdio_sync_filebuf.h (stdio_sync_filebuf::file): New.\n+\t* include/ext/stdio_filebuf.h (stdio_filebuf::file): New.\n+\t* config/io/basic_file_stdio.cc (__basic_file::file): New.\n+\t* config/io/basic_file_stdio.h: Define.\n+\n 2004-05-27  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tPR libstdc++/15675"}, {"sha": "a3ed8391bfffa194bd2aee22e00e2450850832be", "filename": "libstdc++-v3/config/io/basic_file_stdio.cc", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.cc?ref=803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "patch": "@@ -240,7 +240,11 @@ namespace std\n   \n   int \n   __basic_file<char>::fd() \n-  { return fileno(_M_cfile) ; }\n+  { return fileno(_M_cfile); }\n+  \n+  __c_file*\n+  __basic_file<char>::file() \n+  { return _M_cfile; }\n   \n   __basic_file<char>* \n   __basic_file<char>::close()"}, {"sha": "6aa031b507d57d514b40437c68612d3734d405b1", "filename": "libstdc++-v3/config/io/basic_file_stdio.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fio%2Fbasic_file_stdio.h?ref=803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "patch": "@@ -81,6 +81,9 @@ namespace std\n       int \n       fd();\n \n+      __c_file*\n+      file();\n+\n       ~__basic_file();\n \n       streamsize "}, {"sha": "cc229728fa8ab95e94ba7a35f719997471c56727", "filename": "libstdc++-v3/include/ext/stdio_filebuf.h", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstdio_filebuf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstdio_filebuf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstdio_filebuf.h?ref=803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "patch": "@@ -1,6 +1,6 @@\n // File descriptor layer for filebuf -*- C++ -*-\n \n-// Copyright (C) 2002, 2003 Free Software Foundation, Inc.\n+// Copyright (C) 2002, 2003, 2004 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -62,6 +62,11 @@ namespace __gnu_cxx\n       typedef std::size_t                               size_t;\n \n     public:\n+      /**\n+       * deferred initialization\n+      */\n+      stdio_filebuf() : std::basic_filebuf<_CharT, _Traits>() {}\n+\n       /**\n        *  @param  fd  An open file descriptor.\n        *  @param  mode  Same meaning as in a standard filebuf.\n@@ -103,8 +108,17 @@ namespace __gnu_cxx\n        *  descriptor, so be careful.\n       */\n       int\n-      fd()\n-      { return this->_M_file.fd(); }\n+      fd() { return this->_M_file.fd(); }\n+\n+      /**\n+       *  @return  The underlying FILE*.\n+       *\n+       *  This function can be used to access the underlying \"C\" file pointer.\n+       *  Note that there is no way for the library to track what you do\n+       *  with the file, so be careful.\n+       */\n+      std::__c_file*\n+      file() { return this->_M_file.file(); }\n     };\n \n   template<typename _CharT, typename _Traits>"}, {"sha": "367d310b4b0406bd6e9494694e0a95a7898b09e8", "filename": "libstdc++-v3/include/ext/stdio_sync_filebuf.h", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstdio_sync_filebuf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstdio_sync_filebuf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fstdio_sync_filebuf.h?ref=803cb0b5c9ff81ba0b4ec018fff529a9b7cf43f2", "patch": "@@ -71,6 +71,16 @@ namespace __gnu_cxx\n       : _M_file(__f), _M_unget_buf(traits_type::eof())\n       { }\n \n+      /**\n+       *  @return  The underlying FILE*.\n+       *\n+       *  This function can be used to access the underlying \"C\" file pointer.\n+       *  Note that there is no way for the library to track what you do\n+       *  with the file, so be careful.\n+       */\n+      std::__c_file* const\n+      file() { return this->_M_file; }\n+\n     protected:\n       int_type\n       syncgetc();"}]}