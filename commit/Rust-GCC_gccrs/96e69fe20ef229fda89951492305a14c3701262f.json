{"sha": "96e69fe20ef229fda89951492305a14c3701262f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZlNjlmZTIwZWYyMjlmZGE4OTk1MTQ5MjMwNWExNGMzNzAxMjYyZg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2011-12-21T00:35:41Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2011-12-21T00:35:41Z"}, "message": "arm: Split xorsi with constant after reload.\n\nThis puts xorsi3 in the same format as andsi3 and iorsi3.\nThis similarity fixes code generation issues with splitting\natomic_fetch_xor post-reload.\n\n        * config/arm/arm.md (*arm_xorsi3): Match iorsi3 and perform\n        post-reload splitting.\n\nFrom-SVN: r182562", "tree": {"sha": "0afa5581ca85d266dafc9554bd6642d32130adeb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0afa5581ca85d266dafc9554bd6642d32130adeb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96e69fe20ef229fda89951492305a14c3701262f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96e69fe20ef229fda89951492305a14c3701262f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96e69fe20ef229fda89951492305a14c3701262f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96e69fe20ef229fda89951492305a14c3701262f/comments", "author": null, "committer": null, "parents": [{"sha": "6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6cb2b9646d8daf773d1e8a02c9988dbbc9af1d8c"}], "stats": {"total": 27, "additions": 21, "deletions": 6}, "files": [{"sha": "4304d6eefc363453a706d8a2bb95abe18029b65e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96e69fe20ef229fda89951492305a14c3701262f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96e69fe20ef229fda89951492305a14c3701262f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=96e69fe20ef229fda89951492305a14c3701262f", "patch": "@@ -1,5 +1,8 @@\n 2011-12-20  Richard Henderson  <rth@redhat.com>\n \n+\t* config/arm/arm.md (*arm_xorsi3): Match iorsi3 and perform\n+\tpost-reload splitting.\n+\n \t* config/arm/arm.md (*arm_cmpdi_unsigned): Enable for thumb2.\n \t* config/arm/arm.c (arm_select_cc_mode): Use it.\n "}, {"sha": "751997f289b92b72422eca19092ca120ce45e36a", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96e69fe20ef229fda89951492305a14c3701262f/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96e69fe20ef229fda89951492305a14c3701262f/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=96e69fe20ef229fda89951492305a14c3701262f", "patch": "@@ -3061,13 +3061,25 @@\n     }\"\n )\n \n-(define_insn \"*arm_xorsi3\"\n-  [(set (match_operand:SI         0 \"s_register_operand\" \"=r\")\n-\t(xor:SI (match_operand:SI 1 \"s_register_operand\" \"r\")\n-\t\t(match_operand:SI 2 \"arm_rhs_operand\" \"rI\")))]\n+(define_insn_and_split \"*arm_xorsi3\"\n+  [(set (match_operand:SI         0 \"s_register_operand\" \"=r,r\")\n+\t(xor:SI (match_operand:SI 1 \"s_register_operand\" \"%r,r\")\n+\t\t(match_operand:SI 2 \"reg_or_int_operand\" \"rI,?n\")))]\n   \"TARGET_32BIT\"\n-  \"eor%?\\\\t%0, %1, %2\"\n-  [(set_attr \"predicable\" \"yes\")]\n+  \"@\n+   eor%?\\\\t%0, %1, %2\n+   #\"\n+  \"TARGET_32BIT\n+   && GET_CODE (operands[2]) == CONST_INT\n+   && !const_ok_for_arm (INTVAL (operands[2]))\"\n+  [(clobber (const_int 0))]\n+{\n+  arm_split_constant (XOR, SImode, curr_insn,\n+                      INTVAL (operands[2]), operands[0], operands[1], 0);\n+  DONE;\n+}\n+  [(set_attr \"length\" \"4,16\")\n+   (set_attr \"predicable\" \"yes\")]\n )\n \n (define_insn \"*thumb1_xorsi3_insn\""}]}