{"sha": "6aab794614d26007d6886d7440f2e8124a08416a", "node_id": "C_kwDOANBUbNoAKDZhYWI3OTQ2MTRkMjYwMDdkNjg4NmQ3NDQwZjJlODEyNGEwODQxNmE", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2021-10-06T21:12:02Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2021-10-06T21:14:33Z"}, "message": "c++: One more spaceship test.\n\nJakub suggested adding a variant where we actually try to call the\nimplicitly deleted operator.\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/cpp2a/spaceship-synth8a.C: New test.", "tree": {"sha": "0a89e4394ebf1ffd8148297c9e0f094ec4f0f4d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a89e4394ebf1ffd8148297c9e0f094ec4f0f4d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6aab794614d26007d6886d7440f2e8124a08416a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aab794614d26007d6886d7440f2e8124a08416a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6aab794614d26007d6886d7440f2e8124a08416a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6aab794614d26007d6886d7440f2e8124a08416a/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "929cb75e4299cb950dd4ac325535662229e37f5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/929cb75e4299cb950dd4ac325535662229e37f5c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/929cb75e4299cb950dd4ac325535662229e37f5c"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "42a32da77f9dbdef77b9d02b8ff75effec2892ad", "filename": "gcc/testsuite/g++.dg/cpp2a/spaceship-synth8a.C", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6aab794614d26007d6886d7440f2e8124a08416a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fspaceship-synth8a.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6aab794614d26007d6886d7440f2e8124a08416a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fspaceship-synth8a.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp2a%2Fspaceship-synth8a.C?ref=6aab794614d26007d6886d7440f2e8124a08416a", "patch": "@@ -0,0 +1,25 @@\n+// PR c++/94907\n+// { dg-do compile { target c++20 } }\n+\n+namespace std { struct strong_ordering {\n+  int _v;\n+  constexpr strong_ordering (int v) :_v(v) {}\n+  constexpr operator int (void) const { return _v; }\n+  static const strong_ordering less;\n+  static const strong_ordering equal;\n+  static const strong_ordering greater;\n+};\n+constexpr strong_ordering strong_ordering::less = -1;\n+constexpr strong_ordering strong_ordering::equal = 0;\n+constexpr strong_ordering strong_ordering::greater = 1;\n+}\n+\n+struct E;\n+struct D {\n+  virtual std::strong_ordering operator<=>(const struct E&) const = 0;\n+};\n+struct E : D {\t\t\t\t\t\t\t       // { dg-error \"no match\" }\n+  std::strong_ordering operator<=>(const E&) const override = default; // { dg-message \"default\" }\n+};\n+\n+auto x = E() <=> E();\t\t// { dg-error \"deleted\" }"}]}