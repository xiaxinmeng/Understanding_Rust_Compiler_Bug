{"sha": "bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "node_id": "C_kwDOANBUbNoAKGJkNzNkOGRkMzEyYzc1OWVlNTA1YjQwMWQ2YjRmZDdiZTA3YTNmMWE", "commit": {"author": {"name": "Tobias Burnus", "email": "tobias@codesourcery.com", "date": "2022-02-19T23:25:33Z"}, "committer": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-02-22T14:38:55Z"}, "message": "nvptx: Add -misa=sm_70\n\nAdd -misa=sm_70, and use it to specify the misa value in test-case\ngcc.target/nvptx/atomic-store-2.c.\n\nTested on nvptx.\n\ngcc/ChangeLog:\n\n\t* config/nvptx/nvptx-c.cc (nvptx_cpu_cpp_builtins): Handle SM70.\n\t* config/nvptx/nvptx.cc (first_ptx_version_supporting_sm):\n\tLikewise.\n\t* config/nvptx/nvptx.opt (misa): Add sm_70 alias PTX_ISA_SM70.\n\ngcc/testsuite/ChangeLog:\n\n2022-02-22  Tom de Vries  <tdevries@suse.de>\n\n\t* gcc.target/nvptx/atomic-store-2.c: Use -misa=sm_70.\n\t* gcc.target/nvptx/uniform-simt-3.c: Same.\n\nCo-Authored-By: Tom de Vries <tdevries@suse.de>", "tree": {"sha": "4939cddb9d3fb2d4e15800d5a04a8c9e8f07a615", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4939cddb9d3fb2d4e15800d5a04a8c9e8f07a615"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5e1b17f038671df1a6580ece4cd58ef91cc1e234", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e1b17f038671df1a6580ece4cd58ef91cc1e234", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e1b17f038671df1a6580ece4cd58ef91cc1e234"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "b2375fb5b163a6cabb71bc634c5b19bec4c2ab71", "filename": "gcc/config/nvptx/nvptx-c.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Fconfig%2Fnvptx%2Fnvptx-c.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Fconfig%2Fnvptx%2Fnvptx-c.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx-c.cc?ref=bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "patch": "@@ -43,6 +43,8 @@ nvptx_cpu_cpp_builtins (void)\n     cpp_define (parse_in, \"__PTX_SM__=800\");\n   else if (TARGET_SM75)\n     cpp_define (parse_in, \"__PTX_SM__=750\");\n+  else if (TARGET_SM70)\n+    cpp_define (parse_in, \"__PTX_SM__=700\");\n   else if (TARGET_SM53)\n     cpp_define (parse_in, \"__PTX_SM__=530\");\n   else if (TARGET_SM35)"}, {"sha": "858789e6df7675d4cd618fa21ce7b1229faba626", "filename": "gcc/config/nvptx/nvptx.cc", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Fconfig%2Fnvptx%2Fnvptx.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Fconfig%2Fnvptx%2Fnvptx.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.cc?ref=bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "patch": "@@ -217,6 +217,8 @@ first_ptx_version_supporting_sm (enum ptx_isa sm)\n       return PTX_VERSION_3_1;\n     case PTX_ISA_SM53:\n       return PTX_VERSION_4_2;\n+    case PTX_ISA_SM70:\n+      return PTX_VERSION_6_0;\n     case PTX_ISA_SM75:\n       return PTX_VERSION_6_3;\n     case PTX_ISA_SM80:"}, {"sha": "9776c3b9a1f43fde5c2af9937074f32147489a69", "filename": "gcc/config/nvptx/nvptx.opt", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Fconfig%2Fnvptx%2Fnvptx.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Fconfig%2Fnvptx%2Fnvptx.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.opt?ref=bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "patch": "@@ -64,6 +64,9 @@ Enum(ptx_isa) String(sm_35) Value(PTX_ISA_SM35)\n EnumValue\n Enum(ptx_isa) String(sm_53) Value(PTX_ISA_SM53)\n \n+EnumValue\n+Enum(ptx_isa) String(sm_70) Value(PTX_ISA_SM70)\n+\n EnumValue\n Enum(ptx_isa) String(sm_75) Value(PTX_ISA_SM75)\n "}, {"sha": "b58f33f2abdf586d7838fbefecf0c5d73a225083", "filename": "gcc/testsuite/gcc.target/nvptx/atomic-store-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Fatomic-store-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Fatomic-store-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Fatomic-store-2.c?ref=bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "patch": "@@ -2,7 +2,7 @@\n    shared state space.  */\n \n /* { dg-do compile } */\n-/* { dg-options \"-misa=sm_75\" } */\n+/* { dg-options \"-misa=sm_70\" } */\n \n enum memmodel\n {"}, {"sha": "b61b8ba9d5b98b79bd7ef83c3695dfbe71799225", "filename": "gcc/testsuite/gcc.target/nvptx/uniform-simt-3.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Funiform-simt-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd73d8dd312c759ee505b401d6b4fd7be07a3f1a/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Funiform-simt-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Funiform-simt-3.c?ref=bd73d8dd312c759ee505b401d6b4fd7be07a3f1a", "patch": "@@ -1,4 +1,4 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -muniform-simt -misa=sm_75\" } */\n+/* { dg-options \"-O2 -muniform-simt -misa=sm_70\" } */\n \n #include \"atomic-store-2.c\""}]}