{"sha": "c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzkyNzEyZDE3YTE4MGFiNTVjNGYzY2I3NWI0NGU0ODU2ZjQwY2U5YQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-02-27T17:29:58Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2008-02-27T17:29:58Z"}, "message": "re PR target/25477 (builtin functions should use $LDBL128 suffix on darwin when appropriate)\n\n        PR target/25477\n        * config/darwin-ppc-ldouble-patch.def (BUILT_IN_NANL): Add.\n        (BUILT_IN_NEXTTOWARD): Remove.\n        (BUILT_IN_NEXTTOWARDF): Ditto.\n        * config/darwin.c (darwin_patch_builtin): Use ACONCAT instead of\n        alloca/strcpy/strcat.  Remove commented-out code.  Fix whitespace.\n\nFrom-SVN: r132723", "tree": {"sha": "ec78261e34e333fcc51cf441a827cbcd2bbe14ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec78261e34e333fcc51cf441a827cbcd2bbe14ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/comments", "author": null, "committer": null, "parents": [{"sha": "a8bafc433ca3957e3388b51ad340c6dffdda68f5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8bafc433ca3957e3388b51ad340c6dffdda68f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8bafc433ca3957e3388b51ad340c6dffdda68f5"}], "stats": {"total": 33, "additions": 18, "deletions": 15}, "files": [{"sha": "b58929382d966bc5f80fcfb9b6d5a0376258bad8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "patch": "@@ -1,3 +1,12 @@\n+2008-02-27  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/25477\n+\t* config/darwin-ppc-ldouble-patch.def (BUILT_IN_NANL): Add.\n+\t(BUILT_IN_NEXTTOWARD): Remove.\n+\t(BUILT_IN_NEXTTOWARDF): Ditto.\n+\t* config/darwin.c (darwin_patch_builtin): Use ACONCAT instead of\n+\talloca/strcpy/strcat.  Remove commented-out code.  Fix whitespace.\n+\n 2008-02-27  Tom Tromey  <tromey@redhat.com>\n \n \t* tree-dump.c (dequeue_and_dump) <FUNCTION_DECL>: Check\n@@ -463,8 +472,7 @@\n \n 2008-02-25  Jan Beulich  <jbeulich@novell.com>\n \n-\t* Makefile.in: Also prefix uses of crt0.o and mcrt0.o with\n-\t$(T).\n+\t* Makefile.in: Also prefix uses of crt0.o and mcrt0.o with $(T).\n \t* config/i386/netware-libgcc.exp: Add __bswap?i2,\n \t__emultls_get_address, __emultls_register_common,\n \t__floatundi?f, and _Unwind_GetIPInfo."}, {"sha": "b532328408a223e4ab1f81634c5887f5b4bc4069", "filename": "gcc/config/darwin-ppc-ldouble-patch.def", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/gcc%2Fconfig%2Fdarwin-ppc-ldouble-patch.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/gcc%2Fconfig%2Fdarwin-ppc-ldouble-patch.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-ppc-ldouble-patch.def?ref=c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "patch": "@@ -59,10 +59,9 @@ PATCH_BUILTIN (BUILT_IN_LOGL)\n PATCH_BUILTIN (BUILT_IN_LRINTL)\n PATCH_BUILTIN (BUILT_IN_LROUNDL)\n PATCH_BUILTIN (BUILT_IN_MODFL)\n+PATCH_BUILTIN (BUILT_IN_NANL)\n PATCH_BUILTIN (BUILT_IN_NEARBYINTL)\n PATCH_BUILTIN (BUILT_IN_NEXTAFTERL)\n-PATCH_BUILTIN (BUILT_IN_NEXTTOWARD)\n-PATCH_BUILTIN (BUILT_IN_NEXTTOWARDF)\n PATCH_BUILTIN (BUILT_IN_NEXTTOWARDL)\n PATCH_BUILTIN (BUILT_IN_POWL)\n PATCH_BUILTIN (BUILT_IN_REMAINDERL)\n@@ -78,6 +77,7 @@ PATCH_BUILTIN (BUILT_IN_TANHL)\n PATCH_BUILTIN (BUILT_IN_TANL)\n PATCH_BUILTIN (BUILT_IN_TGAMMAL)\n PATCH_BUILTIN (BUILT_IN_TRUNCL)\n+\n PATCH_BUILTIN_NO64 (BUILT_IN_VFPRINTF)\n PATCH_BUILTIN_NO64 (BUILT_IN_VFSCANF)\n PATCH_BUILTIN_NO64 (BUILT_IN_VPRINTF)"}, {"sha": "6c2de252fe3de62307d70f1f43f1f071d6555e21", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c92712d17a180ab55c4f3cb75b44e4856f40ce9a/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=c92712d17a180ab55c4f3cb75b44e4856f40ce9a", "patch": "@@ -1748,18 +1748,13 @@ darwin_patch_builtin (int fncode)\n     return;\n \n   sym = DECL_ASSEMBLER_NAME (fn);\n-  newname = alloca (IDENTIFIER_LENGTH (sym) + 10);\n-  strcpy (newname, \"_\");\n-  strcat (newname, IDENTIFIER_POINTER (sym));\n-  strcat (newname, \"$LDBL128\");\n+  newname = ACONCAT ((\"_\", IDENTIFIER_POINTER (sym), \"$LDBL128\", NULL));\n+\n   set_user_assembler_name (fn, newname);\n-  /*sym = get_identifier (newname);\n-  SET_DECL_ASSEMBLER_NAME (fn, sym);*/\n \n   fn = implicit_built_in_decls[fncode];\n   if (fn)\n     set_user_assembler_name (fn, newname);\n-    /*SET_DECL_ASSEMBLER_NAME (fn, sym);*/\n }\n \n void\n@@ -1769,11 +1764,11 @@ darwin_patch_builtins (void)\n     return;\n \n #define PATCH_BUILTIN(fncode) darwin_patch_builtin (fncode);\n-#define PATCH_BUILTIN_NO64(fncode) \\\n-  if (!TARGET_64BIT) \\\n+#define PATCH_BUILTIN_NO64(fncode)\t\t\\\n+  if (!TARGET_64BIT)\t\t\t\t\\\n     darwin_patch_builtin (fncode);\n-#define PATCH_BUILTIN_VARIADIC(fncode) \\\n-  if (!TARGET_64BIT \\\n+#define PATCH_BUILTIN_VARIADIC(fncode)\t\t\t\t  \\\n+  if (!TARGET_64BIT\t\t\t\t\t\t  \\\n       && (strverscmp (darwin_macosx_version_min, \"10.3.9\") >= 0)) \\\n     darwin_patch_builtin (fncode);\n #include \"darwin-ppc-ldouble-patch.def\""}]}