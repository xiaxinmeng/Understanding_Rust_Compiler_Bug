{"sha": "881466d851f3c806692bda4569a4534d89848104", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODgxNDY2ZDg1MWYzYzgwNjY5MmJkYTQ1NjlhNDUzNGQ4OTg0ODEwNA==", "commit": {"author": {"name": "John David Anglin", "email": "dave.anglin@nrc-cnrc.gc.ca", "date": "2007-12-31T15:02:59Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2007-12-31T15:02:59Z"}, "message": "re PR driver/33772 (collect2 doesn't strip .sl version)\n\n\tPR driver/33772\n\t* collect2.c (SHLIB_SUFFIX): Define if not defined.\n\t(write_c_file_stat): Use SHLIB_SUFFIX.\n\t* som.h (SHLIB_SUFFIX): Define.\n\t* doc/tm.texi (SHLIB_SUFFIX): Document.\n\nFrom-SVN: r131235", "tree": {"sha": "85fdd38f176305106cbb90d88435a6728e14145d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/85fdd38f176305106cbb90d88435a6728e14145d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/881466d851f3c806692bda4569a4534d89848104", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/881466d851f3c806692bda4569a4534d89848104", "html_url": "https://github.com/Rust-GCC/gccrs/commit/881466d851f3c806692bda4569a4534d89848104", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/881466d851f3c806692bda4569a4534d89848104/comments", "author": null, "committer": null, "parents": [{"sha": "64aba73899621ddfa72986f82753b3513a9e8462", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64aba73899621ddfa72986f82753b3513a9e8462", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64aba73899621ddfa72986f82753b3513a9e8462"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "f951aa10e5e62495c1a8551edef2164c1e9da1d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/881466d851f3c806692bda4569a4534d89848104/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/881466d851f3c806692bda4569a4534d89848104/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=881466d851f3c806692bda4569a4534d89848104", "patch": "@@ -1,3 +1,11 @@\n+2007-12-31  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n+\n+\tPR driver/33772\n+\t* collect2.c (SHLIB_SUFFIX): Define if not defined.\n+\t(write_c_file_stat): Use SHLIB_SUFFIX.\n+\t* som.h (SHLIB_SUFFIX): Define.\n+\t* doc/tm.texi (SHLIB_SUFFIX): Document.\n+\n 2007-12-29  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/sse.md (\"*divv4sf3\"): Rename to \"sse_divv4sf3\"."}, {"sha": "bba108d27491d895e72f4a23b57e7e726806c789", "filename": "gcc/collect2.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/881466d851f3c806692bda4569a4534d89848104/gcc%2Fcollect2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/881466d851f3c806692bda4569a4534d89848104/gcc%2Fcollect2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcollect2.c?ref=881466d851f3c806692bda4569a4534d89848104", "patch": "@@ -129,6 +129,10 @@ along with GCC; see the file COPYING3.  If not see\n #define SCAN_LIBRARIES\n #endif\n \n+#ifndef SHLIB_SUFFIX\n+#define SHLIB_SUFFIX \".so\"\n+#endif\n+\n #ifdef USE_COLLECT2\n int do_collecting = 1;\n #else\n@@ -1868,9 +1872,9 @@ write_c_file_stat (FILE *stream, const char *name ATTRIBUTE_UNUSED)\n \t}\n       else\n \t{\n-\t  if (strncmp (q, \".so\", 3) == 0)\n+\t  if (strncmp (q, SHLIB_SUFFIX, strlen (SHLIB_SUFFIX)) == 0)\n \t    {\n-\t      q += 3;\n+\t      q += strlen (SHLIB_SUFFIX);\n \t      break;\n \t    }\n \t  else"}, {"sha": "5d1c054a3eb7c51dd373b46c2445bbb86f4c5b42", "filename": "gcc/config/pa/som.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/881466d851f3c806692bda4569a4534d89848104/gcc%2Fconfig%2Fpa%2Fsom.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/881466d851f3c806692bda4569a4534d89848104/gcc%2Fconfig%2Fpa%2Fsom.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fsom.h?ref=881466d851f3c806692bda4569a4534d89848104", "patch": "@@ -335,3 +335,7 @@ do {\t\t\t\t\t\t\\\n /* We can't handle weak aliases, and therefore can't support pragma weak.\n    Suppress the use of pragma weak in gthr-dce.h and gthr-posix.h.  */\n #define GTHREAD_USE_WEAK 0\n+\n+/* Shared library suffix.  Collect2 strips the version string after\n+   this suffix when generating constructor/destructor names.  */ \n+#define SHLIB_SUFFIX \".sl\""}, {"sha": "00dde97ad25e7f20f218c90fb12a09ac991815c8", "filename": "gcc/doc/tm.texi", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/881466d851f3c806692bda4569a4534d89848104/gcc%2Fdoc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/881466d851f3c806692bda4569a4534d89848104/gcc%2Fdoc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi?ref=881466d851f3c806692bda4569a4534d89848104", "patch": "@@ -7931,6 +7931,14 @@ code must advance @var{ptr} to the beginning of the filename on that\n line.  Otherwise, it must set @var{ptr} to @code{NULL}.\n @end defmac\n \n+@defmac SHLIB_SUFFIX\n+Define this macro to a C string constant containing the default shared\n+library extension of the target (e.g., @samp{\".so\"}).  @command{collect2}\n+strips version information after this suffix when generating global\n+constructor and destructor names.  This define is only needed on targets\n+that use @command{collect2} to process constructors and destructors.\n+@end defmac\n+\n @node Instruction Output\n @subsection Output of Assembler Instructions\n "}]}