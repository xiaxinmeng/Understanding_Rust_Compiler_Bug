{"sha": "85ca20c9516879edf92356ee5d8a5c567db085a0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODVjYTIwYzk1MTY4NzllZGY5MjM1NmVlNWQ4YTVjNTY3ZGIwODVhMA==", "commit": {"author": {"name": "Segher Boessenkool", "email": "segher@kernel.crashing.org", "date": "2016-05-13T23:01:40Z"}, "committer": {"name": "Segher Boessenkool", "email": "segher@gcc.gnu.org", "date": "2016-05-13T23:01:40Z"}, "message": "combine: Don't call extract_left_shift with count < 0 (PR67483)\n\nIf the compiled program does a shift by a negative amount, combine will\nhappily work with that, but it shouldn't then do an undefined operation\nin GCC itself.  This patch fixes the first case mentioned in the bug\nreport (I haven't been able to reproduce the second case, on trunk at\nleast).\n\n\n\tPR rtl-optimization/67483\n\t* combine.c (make_compound_operation): Don't call extract_left_shift\n\twith negative shift amounts.\n\nFrom-SVN: r236232", "tree": {"sha": "310b3ae6402e5929bff678da27c70f03f786eb77", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/310b3ae6402e5929bff678da27c70f03f786eb77"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/85ca20c9516879edf92356ee5d8a5c567db085a0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85ca20c9516879edf92356ee5d8a5c567db085a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85ca20c9516879edf92356ee5d8a5c567db085a0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85ca20c9516879edf92356ee5d8a5c567db085a0/comments", "author": {"login": "segher", "id": 417629, "node_id": "MDQ6VXNlcjQxNzYyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/417629?v=4", "gravatar_id": "", "url": "https://api.github.com/users/segher", "html_url": "https://github.com/segher", "followers_url": "https://api.github.com/users/segher/followers", "following_url": "https://api.github.com/users/segher/following{/other_user}", "gists_url": "https://api.github.com/users/segher/gists{/gist_id}", "starred_url": "https://api.github.com/users/segher/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/segher/subscriptions", "organizations_url": "https://api.github.com/users/segher/orgs", "repos_url": "https://api.github.com/users/segher/repos", "events_url": "https://api.github.com/users/segher/events{/privacy}", "received_events_url": "https://api.github.com/users/segher/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "aa4b467b680f230ab11922d1e29695e1eaba12af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa4b467b680f230ab11922d1e29695e1eaba12af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa4b467b680f230ab11922d1e29695e1eaba12af"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "7178c7c849a78c4e1a2b3d5566fded440e09d7bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85ca20c9516879edf92356ee5d8a5c567db085a0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85ca20c9516879edf92356ee5d8a5c567db085a0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=85ca20c9516879edf92356ee5d8a5c567db085a0", "patch": "@@ -1,3 +1,9 @@\n+2016-05-13  Segher Boessenkool  <segher@kernel.crashing.org>\n+\n+\tPR rtl-optimization/67483\n+\t* combine.c (make_compound_operation): Don't call extract_left_shift\n+\twith negative shift amounts.\n+\n 2016-05-13  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR bootstrap/71071"}, {"sha": "cd864ccb0d4f203aad27f267bbd2e1b1b2981d21", "filename": "gcc/combine.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85ca20c9516879edf92356ee5d8a5c567db085a0/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85ca20c9516879edf92356ee5d8a5c567db085a0/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=85ca20c9516879edf92356ee5d8a5c567db085a0", "patch": "@@ -8037,6 +8037,7 @@ make_compound_operation (rtx x, enum rtx_code in_code)\n \t  && ! (GET_CODE (lhs) == SUBREG\n \t\t&& (OBJECT_P (SUBREG_REG (lhs))))\n \t  && CONST_INT_P (rhs)\n+\t  && INTVAL (rhs) >= 0\n \t  && INTVAL (rhs) < HOST_BITS_PER_WIDE_INT\n \t  && INTVAL (rhs) < mode_width\n \t  && (new_rtx = extract_left_shift (lhs, INTVAL (rhs))) != 0)"}]}