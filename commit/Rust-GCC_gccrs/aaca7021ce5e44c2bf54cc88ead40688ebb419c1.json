{"sha": "aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWFjYTcwMjFjZTVlNDRjMmJmNTRjYzg4ZWFkNDA2ODhlYmI0MTljMQ==", "commit": {"author": {"name": "Roman Zippel", "email": "zippel@linux-m68k.org", "date": "2007-09-24T21:07:08Z"}, "committer": {"name": "Roman Zippel", "email": "zippel@gcc.gnu.org", "date": "2007-09-24T21:07:08Z"}, "message": "m68k.h (ASM_OUTPUT_ALIGN_WITH_NOP): New, use \"move.l %a4,%a4\" to produce nops.\n\n\t* config/m68k/m68k.h (ASM_OUTPUT_ALIGN_WITH_NOP): New, use\n\t\"move.l %a4,%a4\" to produce nops.\n\t* config/m68k/m68k.c (override_options): Reset align options,\n\tif neccessary align macro isn't avaible.\n\nFrom-SVN: r128730", "tree": {"sha": "4223d4af7a00301e6d6188fee4d95a8a2699e069", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4223d4af7a00301e6d6188fee4d95a8a2699e069"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/comments", "author": null, "committer": null, "parents": [{"sha": "bd7993c83c1716e191b5788e8fa54454c49ef1bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd7993c83c1716e191b5788e8fa54454c49ef1bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd7993c83c1716e191b5788e8fa54454c49ef1bf"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "c1376d44472ece5e7f15649710d1f0d3b0414053", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "patch": "@@ -1,3 +1,10 @@\n+2007-09-24  Roman Zippel <zippel@linux-m68k.org> \n+\n+\t* config/m68k/m68k.h (ASM_OUTPUT_ALIGN_WITH_NOP): New, use\n+\t\"move.l %a4,%a4\" to produce nops.\n+\t* config/m68k/m68k.c (override_options): Reset align options,\n+\tif neccessary align macro isn't avaible.\n+\n 2007-09-24  Roman Zippel <zippel@linux-m68k.org> \n \n \tconfig/m68k/linux.h (PREFERRED_STACK_BOUNDARY): New."}, {"sha": "2eb4641c9c59c5b0ecd73e6820c552f18fdf971a", "filename": "gcc/config/m68k/linux.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/gcc%2Fconfig%2Fm68k%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/gcc%2Fconfig%2Fm68k%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Flinux.h?ref=aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "patch": "@@ -126,6 +126,13 @@ along with GCC; see the file COPYING3.  If not see\n   if ((LOG) > 0)\t\t\t\t\t\t\\\n     fprintf ((FILE), \"%s%u\\n\", ALIGN_ASM_OP, 1 << (LOG));\n \n+#ifdef HAVE_GAS_BALIGN_AND_P2ALIGN\n+/* Use \"move.l %a4,%a4\" to advance within code.  */\n+#define ASM_OUTPUT_ALIGN_WITH_NOP(FILE,LOG)\t\t\t\\\n+  if ((LOG) > 0)\t\t\t\t\t\t\\\n+    fprintf ((FILE), \"\\t.balignw %u,0x284c\\n\", 1 << (LOG));\n+#endif\n+\n /* If defined, a C expression whose value is a string containing the\n    assembler operation to identify the following data as uninitialized global\n    data.  */"}, {"sha": "d2b023f416064e6fbe379e6ee4896945cf99a040", "filename": "gcc/config/m68k/m68k.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/gcc%2Fconfig%2Fm68k%2Fm68k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aaca7021ce5e44c2bf54cc88ead40688ebb419c1/gcc%2Fconfig%2Fm68k%2Fm68k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.c?ref=aaca7021ce5e44c2bf54cc88ead40688ebb419c1", "patch": "@@ -618,6 +618,19 @@ override_options (void)\n       gcc_unreachable ();\n     }\n \n+#ifndef ASM_OUTPUT_ALIGN_WITH_NOP\n+  if (align_labels > 2)\n+    {\n+      warning (0, \"-falign-labels=%d is not supported\", align_labels);\n+      align_labels = 0;\n+    }\n+  if (align_loops > 2)\n+    {\n+      warning (0, \"-falign-loops=%d is not supported\", align_loops);\n+      align_loops = 0;\n+    }\n+#endif\n+\n   SUBTARGET_OVERRIDE_OPTIONS;\n \n   /* Setup scheduling options.  */"}]}