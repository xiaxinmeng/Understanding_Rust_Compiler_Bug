{"sha": "a9d8c4de571ce876a21a8cd2a6435c708d955049", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTlkOGM0ZGU1NzFjZTg3NmEyMWE4Y2QyYTY0MzVjNzA4ZDk1NTA0OQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-06T10:42:38Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-06T10:42:38Z"}, "message": "(update_headers): Copy stStatic symbols from the old local symbol table to the...\n\n(update_headers): Copy stStatic symbols from the old local symbol\ntable to the new local symbol table if they did not get added via\ndebugging psuedo ops.\n\nFrom-SVN: r6971", "tree": {"sha": "fc424b2e7ac02e2cb964afbd2434149a6a3152b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fc424b2e7ac02e2cb964afbd2434149a6a3152b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9d8c4de571ce876a21a8cd2a6435c708d955049", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9d8c4de571ce876a21a8cd2a6435c708d955049", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9d8c4de571ce876a21a8cd2a6435c708d955049", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9d8c4de571ce876a21a8cd2a6435c708d955049/comments", "author": null, "committer": null, "parents": [{"sha": "2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d0933a2523e8f6ce0fc5115b550b778a549fbcc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d0933a2523e8f6ce0fc5115b550b778a549fbcc"}], "stats": {"total": 33, "additions": 33, "deletions": 0}, "files": [{"sha": "efe3354966e011885a65c2cd241665c35fa7b8f4", "filename": "gcc/mips-tfile.c", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9d8c4de571ce876a21a8cd2a6435c708d955049/gcc%2Fmips-tfile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9d8c4de571ce876a21a8cd2a6435c708d955049/gcc%2Fmips-tfile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmips-tfile.c?ref=a9d8c4de571ce876a21a8cd2a6435c708d955049", "patch": "@@ -3990,7 +3990,40 @@ update_headers __proto((void))\n        file_ptr != (efdr_t *)0;\n        file_ptr = file_ptr->next_file)\n     {\n+      register SYMR *sym_start;\n+      register SYMR *sym;\n+      register SYMR *sym_end_p1;\n+      register FDR *fd_ptr = file_ptr->orig_fdr;\n+\n       cur_file_ptr = file_ptr;\n+\n+      /* Copy st_Static symbols from the original local symbol table if\n+\t they did not get added to the new local symbol table.\n+\t This happens with stabs-in-ecoff or if the source file is\n+\t compiled without debugging.  */\n+      sym_start = ORIG_LSYMS (fd_ptr->isymBase);\n+      sym_end_p1 = sym_start + fd_ptr->csym;\n+      for (sym = sym_start; sym < sym_end_p1; sym++)\n+\t{\n+\t  if ((st_t)sym->st == st_Static)\n+\t    {\n+\t      register char *str = ORIG_LSTRS (fd_ptr->issBase + sym->iss);\n+\t      register Size_t len = strlen (str);\n+\t      register shash_t *hash_ptr;\n+\n+\t      hash_ptr = hash_string (str,\n+\t\t\t\t      (Ptrdiff_t)len,\n+\t\t\t\t      &file_ptr->shash_head[0],\n+\t\t\t  \t      (symint_t *)0);\n+\t      if (hash_ptr == (shash_t *)0)\n+\t\t{\n+\t\t  (void) add_local_symbol (str, str + len,\n+\t\t\t\t\t   (st_t)sym->st, (sc_t)sym->sc,\n+\t\t\t\t\t   (symint_t)sym->value,\n+\t\t\t\t\t   (symint_t)indexNil);\n+\t\t}\n+\t    }\n+\t}\n       (void) add_local_symbol ((const char *)0, (const char *)0,\n \t\t\t       st_End, sc_Text,\n \t\t\t       (symint_t)0,"}]}