{"sha": "21750c78c4afdc2ca2baa639bfc19365a8487e22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjE3NTBjNzhjNGFmZGMyY2EyYmFhNjM5YmZjMTkzNjVhODQ4N2UyMg==", "commit": {"author": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-10-19T15:11:35Z"}, "committer": {"name": "Rafael Espindola", "email": "espindola@gcc.gnu.org", "date": "2009-10-19T15:11:35Z"}, "message": "re PR lto/40790 (plugin-api.h unconditionally includes stdint.h)\n\ninclude/\n2009-10-09  Rafael Avila de Espindola  <espindola@google.com>\n\n\tPR40790\n\t* plugin-api.h: Don't include stdint.h unconditionally.\n\nlto-plugin/\n2009-10-09  Rafael Avila de Espindola  <espindola@google.com>\n\n\tPR40790\n\t* configure: Regenerate.\n\t* configure.ac: Add AC_TYPE_UINT64_T.\n\nFrom-SVN: r152976", "tree": {"sha": "60330d895ace37454866261b664568c0eee97403", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60330d895ace37454866261b664568c0eee97403"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21750c78c4afdc2ca2baa639bfc19365a8487e22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21750c78c4afdc2ca2baa639bfc19365a8487e22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21750c78c4afdc2ca2baa639bfc19365a8487e22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21750c78c4afdc2ca2baa639bfc19365a8487e22/comments", "author": null, "committer": null, "parents": [{"sha": "d23a77342cab5085c3ad62185a63119d29a73b36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d23a77342cab5085c3ad62185a63119d29a73b36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d23a77342cab5085c3ad62185a63119d29a73b36"}], "stats": {"total": 103, "additions": 89, "deletions": 14}, "files": [{"sha": "572621fc374a3605cfc2591d570360f72295fb6d", "filename": "include/plugin-api.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21750c78c4afdc2ca2baa639bfc19365a8487e22/include%2Fplugin-api.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21750c78c4afdc2ca2baa639bfc19365a8487e22/include%2Fplugin-api.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Fplugin-api.h?ref=21750c78c4afdc2ca2baa639bfc19365a8487e22", "patch": "@@ -26,8 +26,16 @@\n #ifndef PLUGIN_API_H\n #define PLUGIN_API_H\n \n+#ifdef HAVE_STDINT_H\n #include <stdint.h>\n+#elif defined(HAVE_INTTYPES_H)\n+#include <inttypes.h>\n+#endif\n #include <sys/types.h>\n+#if !defined(HAVE_STDINT_H) && !defined(HAVE_INTTYPES_H) && \\\n+    !defined(UINT64_MAX) && !defined(uint64_t)\n+#error can not find uint64_t type\n+#endif\n \n #ifdef __cplusplus\n extern \"C\""}, {"sha": "c7ecf3e85fe1c618a1476853859914da40fe1b0d", "filename": "lto-plugin/configure", "status": "modified", "additions": 80, "deletions": 14, "changes": 94, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21750c78c4afdc2ca2baa639bfc19365a8487e22/lto-plugin%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21750c78c4afdc2ca2baa639bfc19365a8487e22/lto-plugin%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Fconfigure?ref=21750c78c4afdc2ca2baa639bfc19365a8487e22", "patch": "@@ -1864,6 +1864,58 @@ $as_echo \"$ac_res\" >&6; }\n   eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n \n } # ac_fn_c_check_func\n+\n+# ac_fn_c_find_uintX_t LINENO BITS VAR\n+# ------------------------------------\n+# Finds an unsigned integer type with width BITS, setting cache variable VAR\n+# accordingly.\n+ac_fn_c_find_uintX_t ()\n+{\n+  as_lineno=${as_lineno-\"$1\"} as_lineno_stack=as_lineno_stack=$as_lineno_stack\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for uint$2_t\" >&5\n+$as_echo_n \"checking for uint$2_t... \" >&6; }\n+if { as_var=$3; eval \"test \\\"\\${$as_var+set}\\\" = set\"; }; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  eval \"$3=no\"\n+     for ac_type in uint$2_t 'unsigned int' 'unsigned long int' \\\n+\t 'unsigned long long int' 'unsigned short int' 'unsigned char'; do\n+       cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n+/* end confdefs.h.  */\n+$ac_includes_default\n+int\n+main ()\n+{\n+static int test_array [1 - 2 * !(($ac_type) -1 >> ($2 - 1) == 1)];\n+test_array [0] = 0\n+\n+  ;\n+  return 0;\n+}\n+_ACEOF\n+if ac_fn_c_try_compile \"$LINENO\"; then :\n+  case $ac_type in #(\n+  uint$2_t) :\n+    eval \"$3=yes\" ;; #(\n+  *) :\n+    eval \"$3=\\$ac_type\" ;;\n+esac\n+fi\n+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext\n+       eval as_val=\\$$3\n+   if test \"x$as_val\" = x\"\"no; then :\n+\n+else\n+  break\n+fi\n+     done\n+fi\n+eval ac_res=\\$$3\n+\t       { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $ac_res\" >&5\n+$as_echo \"$ac_res\" >&6; }\n+  eval $as_lineno_stack; test \"x$as_lineno_stack\" = x && { as_lineno=; unset as_lineno;}\n+\n+} # ac_fn_c_find_uintX_t\n cat >config.log <<_ACEOF\n This file contains any messages produced by compilers while\n running configure, to aid debugging if configure makes a mistake.\n@@ -4400,13 +4452,13 @@ if test \"${lt_cv_nm_interface+set}\" = set; then :\n else\n   lt_cv_nm_interface=\"BSD nm\"\n   echo \"int some_variable = 0;\" > conftest.$ac_ext\n-  (eval echo \"\\\"\\$as_me:4403: $ac_compile\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:4455: $ac_compile\\\"\" >&5)\n   (eval \"$ac_compile\" 2>conftest.err)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:4406: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:4458: $NM \\\\\\\"conftest.$ac_objext\\\\\\\"\\\"\" >&5)\n   (eval \"$NM \\\"conftest.$ac_objext\\\"\" 2>conftest.err > conftest.out)\n   cat conftest.err >&5\n-  (eval echo \"\\\"\\$as_me:4409: output\\\"\" >&5)\n+  (eval echo \"\\\"\\$as_me:4461: output\\\"\" >&5)\n   cat conftest.out >&5\n   if $GREP 'External.*some_variable' conftest.out > /dev/null; then\n     lt_cv_nm_interface=\"MS dumpbin\"\n@@ -5612,7 +5664,7 @@ ia64-*-hpux*)\n   ;;\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 5615 \"configure\"' > conftest.$ac_ext\n+  echo '#line 5667 \"configure\"' > conftest.$ac_ext\n   if { { eval echo \"\\\"\\$as_me\\\":${as_lineno-$LINENO}: \\\"$ac_compile\\\"\"; } >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -7142,11 +7194,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:7145: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:7197: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:7149: \\$? = $ac_status\" >&5\n+   echo \"$as_me:7201: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -7481,11 +7533,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:7484: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:7536: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>conftest.err)\n    ac_status=$?\n    cat conftest.err >&5\n-   echo \"$as_me:7488: \\$? = $ac_status\" >&5\n+   echo \"$as_me:7540: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s \"$ac_outfile\"; then\n      # The compiler can only warn and ignore the option if not recognized\n      # So say no if there are warnings other than the usual output.\n@@ -7586,11 +7638,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:7589: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:7641: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:7593: \\$? = $ac_status\" >&5\n+   echo \"$as_me:7645: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -7641,11 +7693,11 @@ else\n    -e 's:.*FLAGS}\\{0,1\\} :&$lt_compiler_flag :; t' \\\n    -e 's: [^ ]*conftest\\.: $lt_compiler_flag&:; t' \\\n    -e 's:$: $lt_compiler_flag:'`\n-   (eval echo \"\\\"\\$as_me:7644: $lt_compile\\\"\" >&5)\n+   (eval echo \"\\\"\\$as_me:7696: $lt_compile\\\"\" >&5)\n    (eval \"$lt_compile\" 2>out/conftest.err)\n    ac_status=$?\n    cat out/conftest.err >&5\n-   echo \"$as_me:7648: \\$? = $ac_status\" >&5\n+   echo \"$as_me:7700: \\$? = $ac_status\" >&5\n    if (exit $ac_status) && test -s out/conftest2.$ac_objext\n    then\n      # The compiler can only warn and ignore the option if not recognized\n@@ -10023,7 +10075,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10026 \"configure\"\n+#line 10078 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10119,7 +10171,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 10122 \"configure\"\n+#line 10174 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -10347,6 +10399,20 @@ CC=\"$lt_save_CC\"\n \n \n \n+ac_fn_c_find_uintX_t \"$LINENO\" \"64\" \"ac_cv_c_uint64_t\"\n+case $ac_cv_c_uint64_t in #(\n+  no|yes) ;; #(\n+  *)\n+\n+$as_echo \"#define _UINT64_T 1\" >>confdefs.h\n+\n+\n+cat >>confdefs.h <<_ACEOF\n+#define uint64_t $ac_cv_c_uint64_t\n+_ACEOF\n+;;\n+  esac\n+\n ac_config_files=\"$ac_config_files Makefile\"\n \n cat >confcache <<\\_ACEOF"}, {"sha": "2956ed06c5f659ac99196f1072811ba9802151b2", "filename": "lto-plugin/configure.ac", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21750c78c4afdc2ca2baa639bfc19365a8487e22/lto-plugin%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21750c78c4afdc2ca2baa639bfc19365a8487e22/lto-plugin%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2Fconfigure.ac?ref=21750c78c4afdc2ca2baa639bfc19365a8487e22", "patch": "@@ -7,6 +7,7 @@ AC_ARG_VAR(LIBELFLIBS,[How to link libelf])\n AC_ARG_VAR(LIBELFINC,[How to find libelf include files])\n AM_PROG_LIBTOOL\n AC_SUBST(target_noncanonical)\n+AC_TYPE_UINT64_T\n AC_CONFIG_FILES(Makefile)\n AC_OUTPUT\n AC_SYS_LARGEFILE"}]}