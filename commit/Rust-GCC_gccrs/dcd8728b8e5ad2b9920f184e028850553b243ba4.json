{"sha": "dcd8728b8e5ad2b9920f184e028850553b243ba4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGNkODcyOGI4ZTVhZDJiOTkyMGYxODRlMDI4ODUwNTUzYjI0M2JhNA==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2009-04-07T14:52:29Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-07T14:52:29Z"}, "message": "gnat_ugn.texi: Document -gnatDnn/-gnatGnn\n\n2009-04-07  Robert Dewar  <dewar@adacore.com>\n\n\t* gnat_ugn.texi: Document -gnatDnn/-gnatGnn\n\n\t* opt.ads (Sprint_Line_Limit): New parameter\n\t\n\t* sprint.adb: Usa Sprint_Line_Limit instead of Line_Limit throughout\n\t\n\t* switch-c.adb: Recognize -gnatDnnn and -gnatGnnn switches\n\t\n\t* usage.adb: Output information for -gnatGnn -gnatDnn\n\n\t* make.adb: Minor reformatting\n\n\t* mlib-tgt-specific-vms-alpha.adb: Minor reformatting\n\n\t* mlib-tgt-specific-vms-ia64.adb: Minor reformatting\n\nFrom-SVN: r145677", "tree": {"sha": "9f06a3c5b8275f9577f39b3bdb7771fd3f574e8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f06a3c5b8275f9577f39b3bdb7771fd3f574e8f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dcd8728b8e5ad2b9920f184e028850553b243ba4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcd8728b8e5ad2b9920f184e028850553b243ba4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcd8728b8e5ad2b9920f184e028850553b243ba4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcd8728b8e5ad2b9920f184e028850553b243ba4/comments", "author": null, "committer": null, "parents": [{"sha": "0609b35537e3c1c5677632064635e24bc257ee25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0609b35537e3c1c5677632064635e24bc257ee25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0609b35537e3c1c5677632064635e24bc257ee25"}], "stats": {"total": 91, "additions": 72, "deletions": 19}, "files": [{"sha": "ea28b0e30aa7cb1f969e1d997ce88ea81a8a67b4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -1,3 +1,27 @@\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnat_ugn.texi: Document -gnatDnn/-gnatGnn\n+\n+\t* opt.ads (Sprint_Line_Limit): New parameter\n+\t\n+\t* sprint.adb: Usa Sprint_Line_Limit instead of Line_Limit throughout\n+\t\n+\t* switch-c.adb: Recognize -gnatDnnn and -gnatGnnn switches\n+\t\n+\t* usage.adb: Output information for -gnatGnn -gnatDnn\n+\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* make.adb: Minor reformatting\n+\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* mlib-tgt-specific-vms-alpha.adb: Minor reformatting\n+\n+2009-04-07  Robert Dewar  <dewar@adacore.com>\n+\n+\t* mlib-tgt-specific-vms-ia64.adb: Minor reformatting\n+\n 2009-04-07  Robert Dewar  <dewar@adacore.com>\n \n \t* checks.adb:"}, {"sha": "50ccad47a2195f4cee4f0e7809a00c1cb7359aad", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 15, "deletions": 5, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -3886,7 +3886,7 @@ programmers, and these are documented at appropriate points in this\n users guide.\n \n @item -gnatD\n-@cindex @option{-gnatD} (@command{gcc})\n+@cindex @option{-gnatD[nn]} (@command{gcc})\n Create expanded source files for source level debugging. This switch\n also suppress generation of cross-reference information\n (see @option{-gnatx}).\n@@ -3952,8 +3952,8 @@ Note that @option{^-gnatg^/GNAT_INTERNAL^} implies\n so that all standard warnings and all standard style options are turned on.\n All warnings and style error messages are treated as errors.\n \n-@item -gnatG\n-@cindex @option{-gnatG} (@command{gcc})\n+@item -gnatGnn\n+@cindex @option{-gnatG[nn]} (@command{gcc})\n List generated expanded code in source form.\n \n @item ^-gnath^/HELP^\n@@ -6781,7 +6781,7 @@ switches in the body of the @code{Debug} unit in the compiler source\n file @file{debug.adb}.\n @end ifclear\n \n-@item -gnatG\n+@item -gnatG[nn]\n @cindex @option{-gnatG} (@command{gcc})\n This switch causes the compiler to generate auxiliary output containing\n a pseudo-source listing of the generated expanded code. Like most Ada\n@@ -6796,6 +6796,11 @@ generate a lot of run-time code. By using @option{-gnatG} you can identify\n these cases, and consider whether it may be desirable to modify the coding\n approach to improve efficiency.\n \n+The optional parameter @code{nn} if present after -gnatG specifies an\n+alternative maximum line length that overrides the normal default of 72.\n+This value is in the range 40-999999, values less than 40 being silently\n+reset to 40.\n+\n The format of the output is very similar to standard Ada source, and is\n easily understood by an Ada programmer. The following special syntactic\n additions correspond to low level features used in the generated code that\n@@ -6879,7 +6884,7 @@ representation in base 2-16 (for example, the result of compile time\n evaluation of the expression 1.0/27.0).\n @end table\n \n-@item -gnatD\n+@item -gnatD[nn]\n @cindex @option{-gnatD} (@command{gcc})\n When used in conjunction with @option{-gnatG}, this switch causes\n the expanded source, as described above for\n@@ -6907,6 +6912,11 @@ If the switch @option{-gnatL} is used in conjunction with\n @option{-gnatDG}, then the original source lines are interspersed\n in the expanded source (as comment lines with the original line number).\n \n+The optional parameter @code{nn} if present after -gnatD specifies an\n+alternative maximum line length that overrides the normal default of 72.\n+This value is in the range 40-999999, values less than 40 being silently\n+reset to 40.\n+\n @item -gnatr\n @cindex @option{-gnatr} (@command{gcc})\n @cindex pragma Restrictions"}, {"sha": "3df5482f28ebb509f71e81226015954d1a6d9939", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -1888,7 +1888,7 @@ package body Make is\n                         return;\n                      end if;\n \n-                     --  Do the same check for each of the withed units.\n+                     --  Do the same check for each of the withed units\n \n                      W_Check :\n                      for W in Units.Table (U).First_With"}, {"sha": "0c4ab953f33177b8888c3956704f83c107eed862", "filename": "gcc/ada/mlib-tgt-specific-vms-alpha.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fmlib-tgt-specific-vms-alpha.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fmlib-tgt-specific-vms-alpha.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-specific-vms-alpha.adb?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -46,7 +46,7 @@ with System.CRTL;      use System.CRTL;\n \n package body MLib.Tgt.Specific is\n \n-   --  Non default subprogram. See comment in mlib-tgt.ads.\n+   --  Non default subprogram. See comment in mlib-tgt.ads\n \n    procedure Build_Dynamic_Library\n      (Ofiles       : Argument_List;"}, {"sha": "c133ef0d4b5d1bcac423e6b7fa2b5818b9798cb5", "filename": "gcc/ada/mlib-tgt-specific-vms-ia64.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fmlib-tgt-specific-vms-ia64.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fmlib-tgt-specific-vms-ia64.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-tgt-specific-vms-ia64.adb?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -46,7 +46,7 @@ with System.CRTL;      use System.CRTL;\n \n package body MLib.Tgt.Specific is\n \n-   --  Non default subprogram. See comment in mlib-tgt.ads.\n+   --  Non default subprogram, see comment in mlib-tgt.ads\n \n    procedure Build_Dynamic_Library\n      (Ofiles       : Argument_List;"}, {"sha": "1aba6eb0d538ffe1e5f8cf0d452295b21c9b7fb0", "filename": "gcc/ada/opt.ads", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fopt.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fopt.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fopt.ads?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -1024,6 +1024,10 @@ package Opt is\n    --  option for GNATBIND and to False when using the -static option. The\n    --  value of this flag is set by Gnatbind.Scan_Bind_Arg.\n \n+   Sprint_Line_Limit : Nat := 72;\n+   --  Limit values for chopping long lines in Sprint output, can be reset\n+   --  by use of NNN parameter with -gnatG or -gnatD switches.\n+\n    Stack_Checking_Enabled : Boolean;\n    --  GNAT\n    --  Set to indicate if -fstack-check switch is set for the compilation. True"}, {"sha": "1ea8bac1e486f3cb7b05d6e1b03d409a2c36109b", "filename": "gcc/ada/sprint.adb", "status": "modified", "additions": 5, "deletions": 8, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fsprint.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fsprint.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsprint.adb?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -87,9 +87,6 @@ package body Sprint is\n    --  This keeps track of the physical line number of the last source line\n    --  that has been output. The value is only valid in Dump_Source_Text mode.\n \n-   Line_Limit : constant := 72;\n-   --  Limit value for chopping long lines\n-\n    -------------------------------\n    -- Operator Precedence Table --\n    -------------------------------\n@@ -355,7 +352,7 @@ package body Sprint is\n \n    procedure Col_Check (N : Nat) is\n    begin\n-      if N + Column > Line_Limit then\n+      if N + Column > Sprint_Line_Limit then\n          Write_Indent_Str (\"  \");\n       end if;\n    end Col_Check;\n@@ -1119,7 +1116,7 @@ package body Sprint is\n             Sprint_Indented_List (Statements (Node));\n \n          when N_Character_Literal =>\n-            if Column > 70 then\n+            if Column > Sprint_Line_Limit - 2 then\n                Write_Indent_Str (\"  \");\n             end if;\n \n@@ -2723,7 +2720,7 @@ package body Sprint is\n             Write_Char (')');\n \n          when N_String_Literal =>\n-            if String_Length (Strval (Node)) + Column > 75 then\n+            if String_Length (Strval (Node)) + Column > Sprint_Line_Limit then\n                Write_Indent_Str (\"  \");\n             end if;\n \n@@ -4216,7 +4213,7 @@ package body Sprint is\n \n    procedure Write_Str_With_Col_Check (S : String) is\n    begin\n-      if Int (S'Last) + Column > Line_Limit then\n+      if Int (S'Last) + Column > Sprint_Line_Limit then\n          Write_Indent_Str (\"  \");\n \n          if S (S'First) = ' ' then\n@@ -4236,7 +4233,7 @@ package body Sprint is\n \n    procedure Write_Str_With_Col_Check_Sloc (S : String) is\n    begin\n-      if Int (S'Last) + Column > Line_Limit then\n+      if Int (S'Last) + Column > Sprint_Line_Limit then\n          Write_Indent_Str (\"  \");\n \n          if S (S'First) = ' ' then"}, {"sha": "a7299ab29fa247a00e1436d53e7ca763311dc0be", "filename": "gcc/ada/switch-c.adb", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fswitch-c.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fswitch-c.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-c.adb?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -279,6 +279,13 @@ package body Switch.C is\n             when 'D' =>\n                Ptr := Ptr + 1;\n \n+               --  Scan option integer line limit value\n+\n+               if Ptr <= Max and then Switch_Chars (Ptr) in '0' .. '9' then\n+                  Scan_Nat (Switch_Chars, Max, Ptr, Sprint_Line_Limit, 'D');\n+                  Sprint_Line_Limit := Nat'Max (Sprint_Line_Limit, 40);\n+               end if;\n+\n                --  Note: -gnatD also sets -gnatx (to turn off cross-reference\n                --  generation in the ali file) since otherwise this generation\n                --  gets confused by the \"wrong\" Sloc values put in the tree.\n@@ -522,6 +529,13 @@ package body Switch.C is\n                Ptr := Ptr + 1;\n                Print_Generated_Code := True;\n \n+               --  Scan option integer line limit value\n+\n+               if Ptr <= Max and then Switch_Chars (Ptr) in '0' .. '9' then\n+                  Scan_Nat (Switch_Chars, Max, Ptr, Sprint_Line_Limit, 'G');\n+                  Sprint_Line_Limit := Nat'Max (Sprint_Line_Limit, 40);\n+               end if;\n+\n             --  Processing for h switch\n \n             when 'h' =>"}, {"sha": "de3d57931dd5121b530131852ecfbb864617eef5", "filename": "gcc/ada/usage.adb", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fusage.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dcd8728b8e5ad2b9920f184e028850553b243ba4/gcc%2Fada%2Fusage.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fusage.adb?ref=dcd8728b8e5ad2b9920f184e028850553b243ba4", "patch": "@@ -155,7 +155,9 @@ begin\n    --  Line for -gnatD switch\n \n    Write_Switch_Char (\"D\");\n-   Write_Line (\"Debug expanded generated code rather than source code\");\n+   Write_Line (\"Debug expanded generated code (max line length = 72)\");\n+   Write_Switch_Char (\"Dnn\");\n+   Write_Line (\"Debug expanded generated code (max line length = nnn)\");\n \n    --  Line for -gnatec switch\n \n@@ -212,10 +214,12 @@ begin\n    Write_Switch_Char (\"g\");\n    Write_Line (\"GNAT implementation mode (used for compiling GNAT units)\");\n \n-   --  Line for -gnatG switch\n+   --  Lines for -gnatG switch\n \n    Write_Switch_Char (\"G\");\n-   Write_Line (\"Output generated expanded code in source form\");\n+   Write_Line (\"Output generated expanded code (max line length = 72)\");\n+   Write_Switch_Char (\"Gnn\");\n+   Write_Line (\"Output generated expanded code (max line length = nn)\");\n \n    --  Line for -gnath switch\n "}]}