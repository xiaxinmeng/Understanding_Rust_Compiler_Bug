{"sha": "12a27dfc4e83a8e450b98063efc0b38207050000", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJhMjdkZmM0ZTgzYThlNDUwYjk4MDYzZWZjMGIzODIwNzA1MDAwMA==", "commit": {"author": {"name": "Theodore Papadopoulo", "email": "Theodore.Papadopoulo@sophia.inria.fr", "date": "1998-10-04T21:12:11Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-10-04T21:12:11Z"}, "message": "errfn.c (cp_thing): Print buf as a string not as a printf format to avoid problems with the operator%.\n\n\t* errfn.c (cp_thing): Print buf as a string not as a printf format\n\tto avoid problems with the operator%. Consequently, `%%' sequences\n\tin format are copied as `%' in buf.\n\nFrom-SVN: r22825", "tree": {"sha": "070461b4877d38e24b59eca0483262dac74a5609", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/070461b4877d38e24b59eca0483262dac74a5609"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12a27dfc4e83a8e450b98063efc0b38207050000", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12a27dfc4e83a8e450b98063efc0b38207050000", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12a27dfc4e83a8e450b98063efc0b38207050000", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12a27dfc4e83a8e450b98063efc0b38207050000/comments", "author": {"login": "papadop", "id": 1387516, "node_id": "MDQ6VXNlcjEzODc1MTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1387516?v=4", "gravatar_id": "", "url": "https://api.github.com/users/papadop", "html_url": "https://github.com/papadop", "followers_url": "https://api.github.com/users/papadop/followers", "following_url": "https://api.github.com/users/papadop/following{/other_user}", "gists_url": "https://api.github.com/users/papadop/gists{/gist_id}", "starred_url": "https://api.github.com/users/papadop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/papadop/subscriptions", "organizations_url": "https://api.github.com/users/papadop/orgs", "repos_url": "https://api.github.com/users/papadop/repos", "events_url": "https://api.github.com/users/papadop/events{/privacy}", "received_events_url": "https://api.github.com/users/papadop/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5f2c99c43b76e7d4bc46e445eaa04201c827ffe2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f2c99c43b76e7d4bc46e445eaa04201c827ffe2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f2c99c43b76e7d4bc46e445eaa04201c827ffe2"}], "stats": {"total": 21, "additions": 12, "deletions": 9}, "files": [{"sha": "86bd8c9472491bca7d6dd6f0d3cb27eb3d75cabb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12a27dfc4e83a8e450b98063efc0b38207050000/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12a27dfc4e83a8e450b98063efc0b38207050000/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=12a27dfc4e83a8e450b98063efc0b38207050000", "patch": "@@ -1,3 +1,9 @@\n+1998-10-04  Theodore Papadopoulo <Theodore.Papadopoulo@sophia.inria.fr>\n+\n+\t* errfn.c (cp_thing): Print buf as a string not as a printf format\n+\tto avoid problems with the operator%. Consequently, `%%' sequences\n+\tin format are copied as `%' in buf.\n+\n 1998-10-04  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* pt.c (pop_tinst_level): Call extract_interface_info."}, {"sha": "a43bcf3f0e1105b5120b04ee950bbbd022f529e6", "filename": "gcc/cp/errfn.c", "status": "modified", "additions": 6, "deletions": 9, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12a27dfc4e83a8e450b98063efc0b38207050000/gcc%2Fcp%2Ferrfn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12a27dfc4e83a8e450b98063efc0b38207050000/gcc%2Fcp%2Ferrfn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferrfn.c?ref=12a27dfc4e83a8e450b98063efc0b38207050000", "patch": "@@ -149,18 +149,15 @@ cp_thing (errfn, atarg1, format, ap)\n \t}\n       else if (*f == '%')\n \t{\n-\t  /* A `%%' has occurred in the input string.  Since the\n-\t     string we produce here will be passed to vprintf we must\n-\t     preserve both `%' characters.  */\n+\t  /* A `%%' has occurred in the input string. Replace it with\n+\t     a `%' in the formatted message buf. */\n \n-\t  len += 2;\n-\t  if (len > buflen)\n+\t  if (++len > buflen)\n \t    {\n \t      buflen = len;\n \t      buf = xrealloc (buf, len);\n \t    }\n-\t  strcpy (buf + offset, \"%%\");\n-\t  offset += 2;\n+\t  buf[offset++] = '%';\n \t}\n       else\n \t{\n@@ -190,10 +187,10 @@ cp_thing (errfn, atarg1, format, ap)\n     {\n       char *file = cp_file_of (atarg);\n       int   line = cp_line_of (atarg);\n-      (*errfn) (file, line, buf);\n+      (*errfn) (file, line, \"%s\", buf);\n     }\n   else\n-    (*errfn) (buf);\n+    (*errfn) (\"%s\", buf);\n \n }\n "}]}