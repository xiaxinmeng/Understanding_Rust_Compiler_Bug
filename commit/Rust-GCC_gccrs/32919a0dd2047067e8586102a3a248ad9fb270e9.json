{"sha": "32919a0dd2047067e8586102a3a248ad9fb270e9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzI5MTlhMGRkMjA0NzA2N2U4NTg2MTAyYTNhMjQ4YWQ5ZmIyNzBlOQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2000-05-03T13:20:48Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2000-05-03T13:20:48Z"}, "message": "expr.c (expand_expr, [...]): Don't check for checking memory usage if not in a function.\n\n\t* expr.c (expand_expr, case COMPONENT_REF): Don't check for checking\n\tmemory usage if not in a function.\n\t* varasm.c (initializer_constant_valid_p, case ADDR_EXPR): Only\n\treturn address if static.\n\nFrom-SVN: r33629", "tree": {"sha": "879c3daef7db43b2e7148d743dbf149b4b800c6b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/879c3daef7db43b2e7148d743dbf149b4b800c6b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32919a0dd2047067e8586102a3a248ad9fb270e9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32919a0dd2047067e8586102a3a248ad9fb270e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32919a0dd2047067e8586102a3a248ad9fb270e9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32919a0dd2047067e8586102a3a248ad9fb270e9/comments", "author": null, "committer": null, "parents": [{"sha": "d9a7d592ed00c2fa2f5973231fed2d729c71faf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9a7d592ed00c2fa2f5973231fed2d729c71faf0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9a7d592ed00c2fa2f5973231fed2d729c71faf0"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "67994290774bdfd2147c1f8ce1928974cba70770", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32919a0dd2047067e8586102a3a248ad9fb270e9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32919a0dd2047067e8586102a3a248ad9fb270e9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=32919a0dd2047067e8586102a3a248ad9fb270e9", "patch": "@@ -1,3 +1,10 @@\n+Wed May  3 09:29:17 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* expr.c (expand_expr, case COMPONENT_REF): Don't check for checking\n+\tmemory usage if not in a function.\n+\t* varasm.c (initializer_constant_valid_p, case ADDR_EXPR): Only\n+\treturn address if static.\n+\n Wed May  3 13:14:49 MET DST 2000  Jan Hubicka  <jh@suse.cz>\n \n \t* ifcvt.c (noce_try_cmove_arith):  Use may_trap_p to thest"}, {"sha": "ce4ecc7eaa93f53cde322fcfd07b5b757d2ef061", "filename": "gcc/expr.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32919a0dd2047067e8586102a3a248ad9fb270e9/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32919a0dd2047067e8586102a3a248ad9fb270e9/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=32919a0dd2047067e8586102a3a248ad9fb270e9", "patch": "@@ -6734,7 +6734,8 @@ expand_expr (exp, target, tmode, modifier)\n \t  }\n \n \t/* Check the access.  */\n-\tif (current_function_check_memory_usage && GET_CODE (op0) == MEM)\n+\tif (cfun != 0 && current_function_check_memory_usage\n+\t    && GET_CODE (op0) == MEM)\n           {\n \t    enum memory_use_mode memory_usage;\n \t    memory_usage = get_memory_usage_from_modifier (modifier);"}, {"sha": "898b17b6a991029017ce5673ddc9cea3c1bc16ea", "filename": "gcc/varasm.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32919a0dd2047067e8586102a3a248ad9fb270e9/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32919a0dd2047067e8586102a3a248ad9fb270e9/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=32919a0dd2047067e8586102a3a248ad9fb270e9", "patch": "@@ -4068,7 +4068,7 @@ initializer_constant_valid_p (value, endtype)\n       return null_pointer_node;\n \n     case ADDR_EXPR:\n-      return TREE_OPERAND (value, 0);\n+      return staticp (TREE_OPERAND (value, 0) ? TREE_OPERAND (value, 0) : 0);\n \n     case NON_LVALUE_EXPR:\n       return initializer_constant_valid_p (TREE_OPERAND (value, 0), endtype);"}]}