{"sha": "4033e62c978ce5bdbdc9bd637a7b08f38cc95a09", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAzM2U2MmM5NzhjZTViZGJkYzliZDYzN2E3YjA4ZjM4Y2M5NWEwOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@linaro.org", "date": "2017-08-22T09:17:16Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2017-08-22T09:17:16Z"}, "message": "[AArch64] Fix label mode\n\nThis patch fixes a case where we tried to force a VOIDmode label\ninto a DImode register, which led to invalid rtl that was previously\nundiagnosed.\n\n2017-08-22  Richard Sandiford  <richard.sandiford@linaro.org>\n\t    Alan Hayward  <alan.hayward@arm.com>\n\t    David Sherwood  <david.sherwood@arm.com>\n\ngcc/\n\t* config/aarch64/aarch64.md (casesi): Use DImode rather than\n\tVOIDmode for the LABEL_REF.\n\nCo-Authored-By: Alan Hayward <alan.hayward@arm.com>\nCo-Authored-By: David Sherwood <david.sherwood@arm.com>\n\nFrom-SVN: r251266", "tree": {"sha": "74ac081dae4705e59d98eb38ed96e3c38b7cb9c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74ac081dae4705e59d98eb38ed96e3c38b7cb9c8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09/comments", "author": null, "committer": null, "parents": [{"sha": "7f1bf27a0a82043ce50693cb6f9faf019765dd8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f1bf27a0a82043ce50693cb6f9faf019765dd8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f1bf27a0a82043ce50693cb6f9faf019765dd8b"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "6ecd62601a1d38844b01ebc81ff9d0e7a1e15907", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4033e62c978ce5bdbdc9bd637a7b08f38cc95a09", "patch": "@@ -1,3 +1,10 @@\n+2017-08-22  Richard Sandiford  <richard.sandiford@linaro.org>\n+\t    Alan Hayward  <alan.hayward@arm.com>\n+\t    David Sherwood  <david.sherwood@arm.com>\n+\n+\t* config/aarch64/aarch64.md (casesi): Use DImode rather than\n+\tVOIDmode for the LABEL_REF.\n+\n 2017-08-22  Richard Biener  <rguenther@suse.de>\n \n \t* tree-cfg.c (gimple_split_edge): Avoid reallocating target"}, {"sha": "c1bca07308d84f50a6fa5af116f0fa20589882db", "filename": "gcc/config/aarch64/aarch64.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09/gcc%2Fconfig%2Faarch64%2Faarch64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4033e62c978ce5bdbdc9bd637a7b08f38cc95a09/gcc%2Fconfig%2Faarch64%2Faarch64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.md?ref=4033e62c978ce5bdbdc9bd637a7b08f38cc95a09", "patch": "@@ -495,7 +495,7 @@\n \t\t\t\t\t\t const0_rtx),\n \t\t\t\t    operands[0], operands[2], operands[4]));\n \n-    operands[2] = force_reg (DImode, gen_rtx_LABEL_REF (VOIDmode, operands[3]));\n+    operands[2] = force_reg (DImode, gen_rtx_LABEL_REF (DImode, operands[3]));\n     emit_jump_insn (gen_casesi_dispatch (operands[2], operands[0],\n \t\t\t\t\t operands[3]));\n     DONE;"}]}