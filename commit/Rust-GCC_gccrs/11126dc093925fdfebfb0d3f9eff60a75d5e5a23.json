{"sha": "11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTExMjZkYzA5MzkyNWZkZmViZmIwZDNmOWVmZjYwYTc1ZDVlNWEyMw==", "commit": {"author": {"name": "Asher Langton", "email": "langton2@llnl.gov", "date": "2011-06-02T21:36:02Z"}, "committer": {"name": "Asher Langton", "email": "langton@gcc.gnu.org", "date": "2011-06-02T21:36:02Z"}, "message": "re PR fortran/37039 (Cray pointer with pointee DIMENSION statement after POINTER statement)\n\n    * decl.c (variable_decl): Merge current_as before copying to cp_as.\n\n    * gfortran.dg/PR37039.f90: New test.\n\nFrom-SVN: r174582", "tree": {"sha": "108be54edb097760783968d1949c5b72848873eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/108be54edb097760783968d1949c5b72848873eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "html_url": "https://github.com/Rust-GCC/gccrs/commit/11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/comments", "author": null, "committer": null, "parents": [{"sha": "4e76acd2f045e5a196a0351b1b445ce7ce18f4ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e76acd2f045e5a196a0351b1b445ce7ce18f4ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e76acd2f045e5a196a0351b1b445ce7ce18f4ca"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "fec047ed63b2389227e93e81595404ba5791bae6", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "patch": "@@ -1,3 +1,8 @@\n+2011-06-02  Asher Langton  <langton2@llnl.gov>\n+\n+\tPR fortran/37039\n+\t* decl.c (variable_decl): Merge current_as before copying to cp_as.\n+\n 2011-06-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n \n \tPR fortran/49265"}, {"sha": "7098368e56efab9511f13de86055fb46926885a2", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "patch": "@@ -1763,16 +1763,17 @@ variable_decl (int elem)\n \n   /* Now we could see the optional array spec. or character length.  */\n   m = gfc_match_array_spec (&as, true, true);\n-  if (gfc_option.flag_cray_pointer && m == MATCH_YES)\n-    cp_as = gfc_copy_array_spec (as);\n-  else if (m == MATCH_ERROR)\n+  if (m == MATCH_ERROR)\n     goto cleanup;\n \n   if (m == MATCH_NO)\n     as = gfc_copy_array_spec (current_as);\n   else if (current_as)\n     merge_array_spec (current_as, as, true);\n \n+  if (gfc_option.flag_cray_pointer)\n+    cp_as = gfc_copy_array_spec (as);\n+\n   /* At this point, we know for sure if the symbol is PARAMETER and can thus\n      determine (and check) whether it can be implied-shape.  If it\n      was parsed as assumed-size, change it because PARAMETERs can not"}, {"sha": "2a45ec1c57ad929872ab52c98d61a460037d4432", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "patch": "@@ -1,3 +1,8 @@\n+2011-06-02  Asher Langton  <langton2@llnl.gov>\n+\n+\tPR fortran/37039\n+\t* gfortran.dg/PR37039.f90: New test.\n+\n 2011-06-02  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \tPR objc/48539"}, {"sha": "6311f274c8ae0128a63ccdd1de9c98f0b5d2165a", "filename": "gcc/testsuite/gfortran.dg/PR37039.f90", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ftestsuite%2Fgfortran.dg%2FPR37039.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/11126dc093925fdfebfb0d3f9eff60a75d5e5a23/gcc%2Ftestsuite%2Fgfortran.dg%2FPR37039.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2FPR37039.f90?ref=11126dc093925fdfebfb0d3f9eff60a75d5e5a23", "patch": "@@ -0,0 +1,15 @@\n+! { dg-do compile }\n+! { dg-options \"-fcray-pointer\" }\n+!\n+! Test for PR37039, from an issue on comp.lang.fortran\n+! http://groups.google.com/group/comp.lang.fortran/msg/8cfa06f222721386\n+\n+      subroutine test(nnode) \n+      implicit none \n+      integer n,nnode \n+      pointer(ip_tab, tab) \n+      integer , dimension(1:nnode) :: tab \n+      do n=1,nnode \n+         tab(n) = 0 \n+      enddo \n+      end subroutine test "}]}