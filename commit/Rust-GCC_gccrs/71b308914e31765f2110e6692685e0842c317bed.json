{"sha": "71b308914e31765f2110e6692685e0842c317bed", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzFiMzA4OTE0ZTMxNzY1ZjIxMTBlNjY5MjY4NWUwODQyYzMxN2JlZA==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-08-30T21:21:42Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-08-30T21:21:42Z"}, "message": "C++: add fixit for '>>' template error\n\ngcc/cp/ChangeLog:\n\t* parser.c (cp_parser_enclosed_template_argument_list): Add fix-it\n\thint to \">>\" within nested template argument list error.\n\ngcc/testsuite/ChangeLog:\n\t* g++.dg/template/double-greater-than-fixit.C: New test case.\n\nFrom-SVN: r239873", "tree": {"sha": "8c4de93c8c6aaf35474d2b10310efa9ce40c1421", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8c4de93c8c6aaf35474d2b10310efa9ce40c1421"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71b308914e31765f2110e6692685e0842c317bed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71b308914e31765f2110e6692685e0842c317bed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71b308914e31765f2110e6692685e0842c317bed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71b308914e31765f2110e6692685e0842c317bed/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "75791bab05ec4a45a5c6a4dccd7f824ea8f4487c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75791bab05ec4a45a5c6a4dccd7f824ea8f4487c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75791bab05ec4a45a5c6a4dccd7f824ea8f4487c"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "c553796d7bf75237c03e95eb249f179d351b6652", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71b308914e31765f2110e6692685e0842c317bed/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71b308914e31765f2110e6692685e0842c317bed/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=71b308914e31765f2110e6692685e0842c317bed", "patch": "@@ -1,3 +1,8 @@\n+2016-08-30  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* parser.c (cp_parser_enclosed_template_argument_list): Add fix-it\n+\thint to \">>\" within nested template argument list error.\n+\n 2016-08-30  David Malcolm  <dmalcolm@redhat.com>\n \n \t* name-lookup.c (suggest_alternatives_for): Use add_fixit_replace"}, {"sha": "ca9f8b9761a5aaf829f81f21e8166078466bd270", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71b308914e31765f2110e6692685e0842c317bed/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71b308914e31765f2110e6692685e0842c317bed/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=71b308914e31765f2110e6692685e0842c317bed", "patch": "@@ -26342,8 +26342,10 @@ cp_parser_enclosed_template_argument_list (cp_parser* parser)\n \t    global source location is still on the token before the\n \t    '>>', so we need to say explicitly where we want it.  */\n \t  cp_token *token = cp_lexer_peek_token (parser->lexer);\n-\t  error_at (token->location, \"%<>>%> should be %<> >%> \"\n-\t\t    \"within a nested template argument list\");\n+\t  gcc_rich_location richloc (token->location);\n+\t  richloc.add_fixit_replace (\"> >\");\n+\t  error_at_rich_loc (&richloc, \"%<>>%> should be %<> >%> \"\n+\t\t\t     \"within a nested template argument list\");\n \n \t  token->type = CPP_GREATER;\n \t}"}, {"sha": "6e3b70662d098e123f43b83fe6a8e2d6f94b347f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71b308914e31765f2110e6692685e0842c317bed/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71b308914e31765f2110e6692685e0842c317bed/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=71b308914e31765f2110e6692685e0842c317bed", "patch": "@@ -1,3 +1,7 @@\n+2016-08-30  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* g++.dg/template/double-greater-than-fixit.C: New test case.\n+\n 2016-08-30  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/opt57.ad[sb]: New test."}, {"sha": "f0de4ec35b5477ab4ee2c5f62d39b4fe6de2a9fe", "filename": "gcc/testsuite/g++.dg/template/double-greater-than-fixit.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71b308914e31765f2110e6692685e0842c317bed/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdouble-greater-than-fixit.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71b308914e31765f2110e6692685e0842c317bed/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdouble-greater-than-fixit.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fdouble-greater-than-fixit.C?ref=71b308914e31765f2110e6692685e0842c317bed", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-options \"-fdiagnostics-show-caret -std=c++98\" } */\n+template <typename T>\n+struct foo {};\n+\n+foo<foo<int>> i; // { dg-error \"12: .>>. should be .> >. within a nested template argument list\" }\n+/* { dg-begin-multiline-output \"\" }\n+ foo<foo<int>> i;\n+            ^~\n+            > >\n+   { dg-end-multiline-output \"\" } */"}]}