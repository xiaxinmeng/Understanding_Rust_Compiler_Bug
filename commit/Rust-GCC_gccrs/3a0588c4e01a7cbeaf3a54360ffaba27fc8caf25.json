{"sha": "3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2EwNTg4YzRlMDFhN2NiZWFmM2E1NDM2MGZmYWJhMjdmYzhjYWYyNQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2005-11-03T01:25:13Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2005-11-03T01:25:13Z"}, "message": "re PR c++/22434 (ICE in simplify_{,gen_}subreg)\n\n\tPR c++/22434\n\t* call.c (build_conditional_expr): Do bad conversions, if there's\n\tno other choice.\n\tPR c++/22434\n\t* g++.dg/expr/cond8.C: New test.\n\nFrom-SVN: r106418", "tree": {"sha": "661d0838f488e6d552b82cd1954a06b88e0521ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/661d0838f488e6d552b82cd1954a06b88e0521ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/comments", "author": null, "committer": null, "parents": [{"sha": "85ffcaf2920a5e4af5754ec5a1735c5d6b47f037", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85ffcaf2920a5e4af5754ec5a1735c5d6b47f037", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85ffcaf2920a5e4af5754ec5a1735c5d6b47f037"}], "stats": {"total": 24, "additions": 22, "deletions": 2}, "files": [{"sha": "eb52015cab77de5c72bc08067729697a4d7ebc57", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "patch": "@@ -1,5 +1,9 @@\n 2005-11-02  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/22434\n+\t* call.c (build_conditional_expr): Do bad conversions, if there's\n+\tno other choice.\n+\n \tPR c++/24560\n \t* parser.c (cp_parser_postfix_dot_deref_expression): Improve error\n \tmessage for use of overloaded functions on LHS of \".\" operator."}, {"sha": "99b8bcbee1556fd1dd76dbef71a23c4b5996e93d", "filename": "gcc/cp/call.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Fcp%2Fcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Fcp%2Fcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcall.c?ref=3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "patch": "@@ -3281,13 +3281,13 @@ build_conditional_expr (tree arg1, tree arg2, tree arg3)\n \t  error (\"operands to ?: have different types\");\n \t  result = error_mark_node;\n \t}\n-      else if (conv2 && !conv2->bad_p)\n+      else if (conv2 && (!conv2->bad_p || !conv3))\n \t{\n \t  arg2 = convert_like (conv2, arg2);\n \t  arg2 = convert_from_reference (arg2);\n \t  arg2_type = TREE_TYPE (arg2);\n \t}\n-      else if (conv3 && !conv3->bad_p)\n+      else if (conv3 && (!conv3->bad_p || !conv2))\n \t{\n \t  arg3 = convert_like (conv3, arg3);\n \t  arg3 = convert_from_reference (arg3);"}, {"sha": "b52603ba2ccfb82e7a400b4c586fcb84016b1529", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "patch": "@@ -1,5 +1,8 @@\n 2005-11-02  Mark Mitchell  <mark@codesourcery.com>\n \n+\tPR c++/22434\n+\t* g++.dg/expr/cond8.C: New test.\n+\n \tPR c++/24560\n \t* g++.dg/parse/dot1.C: New test.\n "}, {"sha": "f05c81a26ce7bb30e2a7422e9a09d1b615eb56bc", "filename": "gcc/testsuite/g++.dg/expr/cond8.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcond8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcond8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fexpr%2Fcond8.C?ref=3a0588c4e01a7cbeaf3a54360ffaba27fc8caf25", "patch": "@@ -0,0 +1,13 @@\n+// PR c++/22434\n+// { dg-options \"\" }\n+\n+struct A\n+{\n+  A(void*);\n+  ~A();\n+};\n+\n+void foo(const int i, bool b)\n+{\n+  b ? A(0) : i; // { dg-error \"conversion|initializing\" } \n+}"}]}