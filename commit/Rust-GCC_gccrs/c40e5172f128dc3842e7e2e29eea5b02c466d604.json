{"sha": "c40e5172f128dc3842e7e2e29eea5b02c466d604", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQwZTUxNzJmMTI4ZGMzODQyZTdlMmUyOWVlYTViMDJjNDY2ZDYwNA==", "commit": {"author": {"name": "Jeff Sturm", "email": "jsturm@one-point.com", "date": "2003-01-09T01:10:43Z"}, "committer": {"name": "Jeff Sturm", "email": "jsturm@gcc.gnu.org", "date": "2003-01-09T01:10:43Z"}, "message": "re PR target/9210 ([gcc-3.3] bootstrap error in libffi building nof libs)\n\nPR target/9210\n* config/rs6000/rs6000.c (rs6000_elf_encode_section_info):\nSet SYMBOL_REF_FLAG on local data sym_ref.\n\nFrom-SVN: r61064", "tree": {"sha": "0777b3ebc18e8d6f5e7d1c2f261f2022014b6085", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0777b3ebc18e8d6f5e7d1c2f261f2022014b6085"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c40e5172f128dc3842e7e2e29eea5b02c466d604", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c40e5172f128dc3842e7e2e29eea5b02c466d604", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c40e5172f128dc3842e7e2e29eea5b02c466d604", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c40e5172f128dc3842e7e2e29eea5b02c466d604/comments", "author": null, "committer": null, "parents": [{"sha": "de62b72ce74de2f505af7c4918ba26ff470658a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de62b72ce74de2f505af7c4918ba26ff470658a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de62b72ce74de2f505af7c4918ba26ff470658a2"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "8a7cf40d977b9761df8d6a1693d8247d5f531b87", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c40e5172f128dc3842e7e2e29eea5b02c466d604/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c40e5172f128dc3842e7e2e29eea5b02c466d604/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c40e5172f128dc3842e7e2e29eea5b02c466d604", "patch": "@@ -1,3 +1,9 @@\n+2003-01-08  Jeff Sturm  <jsturm@one-point.com>\n+\n+\tPR target/9210\n+\t* config/rs6000/rs6000.c (rs6000_elf_encode_section_info):\n+\tSet SYMBOL_REF_FLAG on local data sym_ref.\n+\n 2003-01-08  Dale Johannesen  <dalej@apple.com>\n  \n         * function.c (assign_parms):  Don't set pretend_args_size if "}, {"sha": "6112737d5b17283ea2b9bca85aa1c0ff72b604ae", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c40e5172f128dc3842e7e2e29eea5b02c466d604/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c40e5172f128dc3842e7e2e29eea5b02c466d604/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=c40e5172f128dc3842e7e2e29eea5b02c466d604", "patch": "@@ -12562,11 +12562,15 @@ rs6000_elf_encode_section_info (decl, first)\n \t   && DEFAULT_ABI == ABI_V4\n \t   && TREE_CODE (decl) == VAR_DECL)\n     {\n+      rtx sym_ref = XEXP (DECL_RTL (decl), 0);\n       int size = int_size_in_bytes (TREE_TYPE (decl));\n       tree section_name = DECL_SECTION_NAME (decl);\n       const char *name = (char *)0;\n       int len = 0;\n \n+      if ((*targetm.binds_local_p) (decl))\n+\tSYMBOL_REF_FLAG (sym_ref) = 1;\n+\n       if (section_name)\n \t{\n \t  if (TREE_CODE (section_name) == STRING_CST)\n@@ -12593,7 +12597,6 @@ rs6000_elf_encode_section_info (decl, first)\n \t\t  || (len == sizeof (\".PPC.EMB.sbss0\") - 1\n \t\t      && strcmp (name, \".PPC.EMB.sbss0\") == 0))))\n \t{\n-\t  rtx sym_ref = XEXP (DECL_RTL (decl), 0);\n \t  size_t len = strlen (XSTR (sym_ref, 0));\n \t  char *str = alloca (len + 2);\n "}]}