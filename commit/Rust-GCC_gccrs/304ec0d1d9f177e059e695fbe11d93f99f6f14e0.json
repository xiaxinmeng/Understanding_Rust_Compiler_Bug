{"sha": "304ec0d1d9f177e059e695fbe11d93f99f6f14e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzA0ZWMwZDFkOWYxNzdlMDU5ZTY5NWZiZTExZDkzZjk5ZjZmMTRlMA==", "commit": {"author": {"name": "Dragan Mladjenovic", "email": "OT_Dragan.Mladjenovic@mediatek.com", "date": "2018-07-24T18:05:08Z"}, "committer": {"name": "Dragan Mladjenovic", "email": "Dragan.Mladjenovic@syrmia.com", "date": "2021-08-21T17:41:40Z"}, "message": "[MIPS] Remove TARGET_ASM_FUNCTION_RODATA_SECTION\n\nSince 'Remove obsolete IRIX 6.5 support' [1] we only use\ngp-relative jump-tables for PIC code. We can fall back to\ndefault behaviour for asm_function_rodata_section.\n\n[1] https://gcc.gnu.org/ml/libstdc++/2012-03/msg00067.html\n\n2018-06-04 Dragan Mladjenovic <dragan.mladjenovic@rt-rk.com>\ngcc/\n\n\t* config/mips/mips.c (mips_function_rodata_section,\n\tTARGET_ASM_FUNCTION_RODATA_SECTION): Removed.", "tree": {"sha": "b6ff0b0d52f70961b2fca7c590626a71bf5f515f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6ff0b0d52f70961b2fca7c590626a71bf5f515f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/304ec0d1d9f177e059e695fbe11d93f99f6f14e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/304ec0d1d9f177e059e695fbe11d93f99f6f14e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/304ec0d1d9f177e059e695fbe11d93f99f6f14e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/304ec0d1d9f177e059e695fbe11d93f99f6f14e0/comments", "author": null, "committer": {"login": "draganmladjenovic", "id": 37329008, "node_id": "MDQ6VXNlcjM3MzI5MDA4", "avatar_url": "https://avatars.githubusercontent.com/u/37329008?v=4", "gravatar_id": "", "url": "https://api.github.com/users/draganmladjenovic", "html_url": "https://github.com/draganmladjenovic", "followers_url": "https://api.github.com/users/draganmladjenovic/followers", "following_url": "https://api.github.com/users/draganmladjenovic/following{/other_user}", "gists_url": "https://api.github.com/users/draganmladjenovic/gists{/gist_id}", "starred_url": "https://api.github.com/users/draganmladjenovic/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/draganmladjenovic/subscriptions", "organizations_url": "https://api.github.com/users/draganmladjenovic/orgs", "repos_url": "https://api.github.com/users/draganmladjenovic/repos", "events_url": "https://api.github.com/users/draganmladjenovic/events{/privacy}", "received_events_url": "https://api.github.com/users/draganmladjenovic/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "5aae6fd9f4bd61030c79762b9474f52e8fa00dd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5aae6fd9f4bd61030c79762b9474f52e8fa00dd8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5aae6fd9f4bd61030c79762b9474f52e8fa00dd8"}], "stats": {"total": 38, "additions": 0, "deletions": 38}, "files": [{"sha": "39666d6973fc91886f91b8f66394087adcbd5c9f", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 0, "deletions": 38, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/304ec0d1d9f177e059e695fbe11d93f99f6f14e0/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/304ec0d1d9f177e059e695fbe11d93f99f6f14e0/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=304ec0d1d9f177e059e695fbe11d93f99f6f14e0", "patch": "@@ -9306,42 +9306,6 @@ mips_select_rtx_section (machine_mode mode, rtx x,\n   return default_elf_select_rtx_section (mode, x, align);\n }\n \n-/* Implement TARGET_ASM_FUNCTION_RODATA_SECTION.\n-\n-   The complication here is that, with the combination TARGET_ABICALLS\n-   && !TARGET_ABSOLUTE_ABICALLS && !TARGET_GPWORD, jump tables will use\n-   absolute addresses, and should therefore not be included in the\n-   read-only part of a DSO.  Handle such cases by selecting a normal\n-   data section instead of a read-only one.  The logic apes that in\n-   default_function_rodata_section.  */\n-\n-static section *\n-mips_function_rodata_section (tree decl, bool)\n-{\n-  if (!TARGET_ABICALLS || TARGET_ABSOLUTE_ABICALLS || TARGET_GPWORD)\n-    return default_function_rodata_section (decl, false);\n-\n-  if (decl && DECL_SECTION_NAME (decl))\n-    {\n-      const char *name = DECL_SECTION_NAME (decl);\n-      if (DECL_COMDAT_GROUP (decl) && startswith (name, \".gnu.linkonce.t.\"))\n-\t{\n-\t  char *rname = ASTRDUP (name);\n-\t  rname[14] = 'd';\n-\t  return get_section (rname, SECTION_LINKONCE | SECTION_WRITE, decl);\n-\t}\n-      else if (flag_function_sections\n-\t       && flag_data_sections\n-\t       && startswith (name, \".text.\"))\n-\t{\n-\t  char *rname = ASTRDUP (name);\n-\t  memcpy (rname + 1, \"data\", 4);\n-\t  return get_section (rname, SECTION_WRITE, decl);\n-\t}\n-    }\n-  return data_section;\n-}\n-\n /* Implement TARGET_IN_SMALL_DATA_P.  */\n \n static bool\n@@ -22606,8 +22570,6 @@ mips_asm_file_end (void)\n #define TARGET_ASM_FUNCTION_EPILOGUE mips_output_function_epilogue\n #undef TARGET_ASM_SELECT_RTX_SECTION\n #define TARGET_ASM_SELECT_RTX_SECTION mips_select_rtx_section\n-#undef TARGET_ASM_FUNCTION_RODATA_SECTION\n-#define TARGET_ASM_FUNCTION_RODATA_SECTION mips_function_rodata_section\n \n #undef TARGET_SCHED_INIT\n #define TARGET_SCHED_INIT mips_sched_init"}]}