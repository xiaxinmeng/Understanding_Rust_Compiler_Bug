{"sha": "90dcfecb47a75e10277dcdd44aeb39267d251f36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBkY2ZlY2I0N2E3NWUxMDI3N2RjZGQ0NGFlYjM5MjY3ZDI1MWYzNg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-11-26T17:47:48Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-11-26T17:47:48Z"}, "message": "utils.c (copy_type): Unshare the language-specific data and the contents of the language-specific...\n\n\t* gcc-interface/utils.c (copy_type): Unshare the language-specific data\n\tand the contents of the language-specific slot if needed.\n\nFrom-SVN: r154678", "tree": {"sha": "f723e62fba44367868ca69c568eb0c1239b6f03e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f723e62fba44367868ca69c568eb0c1239b6f03e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90dcfecb47a75e10277dcdd44aeb39267d251f36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90dcfecb47a75e10277dcdd44aeb39267d251f36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90dcfecb47a75e10277dcdd44aeb39267d251f36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90dcfecb47a75e10277dcdd44aeb39267d251f36/comments", "author": null, "committer": null, "parents": [{"sha": "da49a7837ae5c1aba8ff5768efb4834ceefdea47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da49a7837ae5c1aba8ff5768efb4834ceefdea47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da49a7837ae5c1aba8ff5768efb4834ceefdea47"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "298dda2473686cad33e3a2e2387498ec208309bf", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90dcfecb47a75e10277dcdd44aeb39267d251f36/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90dcfecb47a75e10277dcdd44aeb39267d251f36/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=90dcfecb47a75e10277dcdd44aeb39267d251f36", "patch": "@@ -1,3 +1,8 @@\n+2009-11-26  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/utils.c (copy_type): Unshare the language-specific data\n+\tand the contents of the language-specific slot if needed.\n+\n 2009-11-26  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (gnat_to_gnu) <N_In>: Set the source location"}, {"sha": "38795a0cea60bd13e64f61ddeab7dfd85cc07d7d", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90dcfecb47a75e10277dcdd44aeb39267d251f36/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90dcfecb47a75e10277dcdd44aeb39267d251f36/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=90dcfecb47a75e10277dcdd44aeb39267d251f36", "patch": "@@ -1157,6 +1157,23 @@ copy_type (tree type)\n {\n   tree new_type = copy_node (type);\n \n+  /* Unshare the language-specific data.  */\n+  if (TYPE_LANG_SPECIFIC (type))\n+    {\n+      TYPE_LANG_SPECIFIC (new_type) = NULL;\n+      SET_TYPE_LANG_SPECIFIC (new_type, GET_TYPE_LANG_SPECIFIC (type));\n+    }\n+\n+  /* And the contents of the language-specific slot if needed.  */\n+  if ((INTEGRAL_TYPE_P (type) || TREE_CODE (type) == REAL_TYPE)\n+      && TYPE_RM_VALUES (type))\n+    {\n+      TYPE_RM_VALUES (new_type) = NULL_TREE;\n+      SET_TYPE_RM_SIZE (new_type, TYPE_RM_SIZE (type));\n+      SET_TYPE_RM_MIN_VALUE (new_type, TYPE_RM_MIN_VALUE (type));\n+      SET_TYPE_RM_MAX_VALUE (new_type, TYPE_RM_MAX_VALUE (type));\n+    }\n+\n   /* copy_node clears this field instead of copying it, because it is\n      aliased with TREE_CHAIN.  */\n   TYPE_STUB_DECL (new_type) = TYPE_STUB_DECL (type);"}]}