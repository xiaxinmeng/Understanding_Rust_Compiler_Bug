{"sha": "51a904c9e6cbce9225c8b584eff328e71afb049b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTFhOTA0YzllNmNiY2U5MjI1YzhiNTg0ZWZmMzI4ZTcxYWZiMDQ5Yg==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@codesourcery.com", "date": "2004-08-25T07:25:06Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2004-08-25T07:25:06Z"}, "message": "basic-block.h (BB_SET_PARTITION): Clear old value first.\n\n\t* basic-block.h (BB_SET_PARTITION): Clear old value first.\n\t* cfg.c (clear_bb_flags): Don't clear partition setting.\n\nFrom-SVN: r86537", "tree": {"sha": "8f400171281f1971daae0f4f3bac980e43bf1e0e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f400171281f1971daae0f4f3bac980e43bf1e0e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/51a904c9e6cbce9225c8b584eff328e71afb049b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51a904c9e6cbce9225c8b584eff328e71afb049b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51a904c9e6cbce9225c8b584eff328e71afb049b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51a904c9e6cbce9225c8b584eff328e71afb049b/comments", "author": null, "committer": null, "parents": [{"sha": "4c5f37d5682d0798751272b132b36dcd77f8ff9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c5f37d5682d0798751272b132b36dcd77f8ff9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c5f37d5682d0798751272b132b36dcd77f8ff9c"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "12e36f5b370577f6a366918330808afdc2e362ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51a904c9e6cbce9225c8b584eff328e71afb049b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51a904c9e6cbce9225c8b584eff328e71afb049b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=51a904c9e6cbce9225c8b584eff328e71afb049b", "patch": "@@ -1,3 +1,8 @@\n+2004-08-25  Zack Weinberg  <zack@codesourcery.com>\n+\n+\t* basic-block.h (BB_SET_PARTITION): Clear old value first.\n+\t* cfg.c (clear_bb_flags): Don't clear partition setting.\n+\n 2004-08-25  Alan Modra  <amodra@bigpond.net.au>\n \n \tPR target/17052"}, {"sha": "19ed577fe553d2fb770947717aba75c206112479", "filename": "gcc/basic-block.h", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51a904c9e6cbce9225c8b584eff328e71afb049b/gcc%2Fbasic-block.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51a904c9e6cbce9225c8b584eff328e71afb049b/gcc%2Fbasic-block.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbasic-block.h?ref=51a904c9e6cbce9225c8b584eff328e71afb049b", "patch": "@@ -318,7 +318,12 @@ typedef struct reorder_block_def\n /* Partitions, to be used when partitioning hot and cold basic blocks into\n    separate sections.  */\n #define BB_PARTITION(bb) ((bb)->flags & (BB_HOT_PARTITION|BB_COLD_PARTITION))\n-#define BB_SET_PARTITION(bb, part) ((bb)->flags |= (part))\n+#define BB_SET_PARTITION(bb, part) do {\t\t\t\t\t\\\n+  basic_block bb_ = (bb);\t\t\t\t\t\t\\\n+  bb_->flags = ((bb_->flags & ~(BB_HOT_PARTITION|BB_COLD_PARTITION))\t\\\n+\t\t| (part));\t\t\t\t\t\t\\\n+} while (0)\n+\n #define BB_COPY_PARTITION(dstbb, srcbb) \\\n   BB_SET_PARTITION (dstbb, BB_PARTITION (srcbb))\n "}, {"sha": "003d09e05ff28a5e5641c969bb74e90e4a12a203", "filename": "gcc/cfg.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/51a904c9e6cbce9225c8b584eff328e71afb049b/gcc%2Fcfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/51a904c9e6cbce9225c8b584eff328e71afb049b/gcc%2Fcfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfg.c?ref=51a904c9e6cbce9225c8b584eff328e71afb049b", "patch": "@@ -462,13 +462,14 @@ redirect_edge_pred (edge e, basic_block new_pred)\n   e->src = new_pred;\n }\n \n+/* Clear all basic block flags, with the exception of partitioning.  */\n void\n clear_bb_flags (void)\n {\n   basic_block bb;\n \n   FOR_BB_BETWEEN (bb, ENTRY_BLOCK_PTR, NULL, next_bb)\n-    bb->flags = 0;\n+    bb->flags = BB_PARTITION (bb);\n }\n \f\n /* Check the consistency of profile information.  We can't do that"}]}