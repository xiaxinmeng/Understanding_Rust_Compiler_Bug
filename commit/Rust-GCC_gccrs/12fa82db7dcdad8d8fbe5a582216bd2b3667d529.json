{"sha": "12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTJmYTgyZGI3ZGNkYWQ4ZDhmYmU1YTU4MjIxNmJkMmIzNjY3ZDUyOQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-02-18T05:59:45Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-02-18T05:59:45Z"}, "message": "init.c (build_new): Allow enumeration types for the array-bounds in a direct-new-declarator.\n\n\t* init.c (build_new): Allow enumeration types for the array-bounds\n\tin a direct-new-declarator.\n\n\t* semantics.c (finish_typeof): Resolve OFFSET_REFs.\n\nFrom-SVN: r39817", "tree": {"sha": "cd5f8c6c3cf53abb223c76d5f99be70b621c9371", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd5f8c6c3cf53abb223c76d5f99be70b621c9371"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/comments", "author": null, "committer": null, "parents": [{"sha": "7afe8c419bb43051d7b9aa8a5be0de2c1bd83bfc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7afe8c419bb43051d7b9aa8a5be0de2c1bd83bfc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7afe8c419bb43051d7b9aa8a5be0de2c1bd83bfc"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "99dfb5052f87b2d645d5a4bc0cb38181cf580156", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "patch": "@@ -1,5 +1,10 @@\n 2001-02-17  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* init.c (build_new): Allow enumeration types for the array-bounds\n+\tin a direct-new-declarator.\n+\n+\t* semantics.c (finish_typeof): Resolve OFFSET_REFs.\n+\n \t* pt.c (check_explicit_specialization): Copy TREE_PRIVATE and\n \tTREE_PROTECTED from the template being specialized.\n "}, {"sha": "68139d8d577d798224562333e937aeba87d50e55", "filename": "gcc/cp/init.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "patch": "@@ -2081,8 +2081,8 @@ build_new (placement, decl, init, use_global_new)\n \t\t}\n \t      else\n \t\t{\n-\t\t  int flags = pedantic ? WANT_INT : (WANT_INT | WANT_ENUM);\n-\t\t  if (build_expr_type_conversion (flags, this_nelts, 0)\n+\t\t  if (build_expr_type_conversion (WANT_INT | WANT_ENUM, \n+\t\t\t\t\t\t  this_nelts, 0)\n \t\t      == NULL_TREE)\n \t\t    pedwarn (\"size in array new must have integral type\");\n "}, {"sha": "c186b975ccd7336399475a37a19f03bdf1af7034", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "patch": "@@ -2152,6 +2152,9 @@ finish_typeof (expr)\n       return t;\n     }\n \n+  if (TREE_CODE (expr) == OFFSET_REF)\n+    expr = resolve_offset_ref (expr);\n+\n   return TREE_TYPE (expr);\n }\n "}, {"sha": "139048c41284a2ebaa7634e86b0a816ba3814499", "filename": "gcc/testsuite/g++.old-deja/g++.ext/typeof2.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ext%2Ftypeof2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ext%2Ftypeof2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ext%2Ftypeof2.C?ref=12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "patch": "@@ -0,0 +1,8 @@\n+// Build don't link:\n+// Origin: Mark Mitchell <mark@codesourcery.com>\n+\n+struct S\n+{\n+  int i; // ERROR - non-static data member\n+  __typeof( S::i ) f (); // ERROR - referenced here\n+};"}, {"sha": "797197a42d6c908b67dec5b82d74ca25da1a7470", "filename": "gcc/testsuite/g++.old-deja/g++.other/array4.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Farray4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12fa82db7dcdad8d8fbe5a582216bd2b3667d529/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Farray4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Farray4.C?ref=12fa82db7dcdad8d8fbe5a582216bd2b3667d529", "patch": "@@ -0,0 +1,5 @@\n+// Build don't link:\n+// Origin: j_bouis@hotmail.com\n+\n+enum { FOO = 3 };\n+int* arr = new int[FOO];"}]}