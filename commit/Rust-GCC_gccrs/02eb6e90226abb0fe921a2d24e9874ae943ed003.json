{"sha": "02eb6e90226abb0fe921a2d24e9874ae943ed003", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDJlYjZlOTAyMjZhYmIwZmU5MjFhMmQyNGU5ODc0YWU5NDNlZDAwMw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-06-03T11:57:03Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-06-03T11:57:03Z"}, "message": "(start_struct): Set TYPE_PACKED from flag_pack_struct.\n\n(start_enum): Likewise but from flag_short_enums.\n(finish_enum): Test TYPE_PACKED, not flag_short_enums.\n\nFrom-SVN: r12140", "tree": {"sha": "5db635f0ad67c6d7c433ff6a72e1071ed618ac81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5db635f0ad67c6d7c433ff6a72e1071ed618ac81"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/02eb6e90226abb0fe921a2d24e9874ae943ed003", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02eb6e90226abb0fe921a2d24e9874ae943ed003", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02eb6e90226abb0fe921a2d24e9874ae943ed003", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02eb6e90226abb0fe921a2d24e9874ae943ed003/comments", "author": null, "committer": null, "parents": [{"sha": "9fa0af71f68c9f248755d9d9d1f72cf64ec29479", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fa0af71f68c9f248755d9d9d1f72cf64ec29479", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fa0af71f68c9f248755d9d9d1f72cf64ec29479"}], "stats": {"total": 7, "additions": 5, "deletions": 2}, "files": [{"sha": "c89ee1d9fac3b094919feaee64aa78e703e1b466", "filename": "gcc/c-decl.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/02eb6e90226abb0fe921a2d24e9874ae943ed003/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/02eb6e90226abb0fe921a2d24e9874ae943ed003/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=02eb6e90226abb0fe921a2d24e9874ae943ed003", "patch": "@@ -5435,6 +5435,7 @@ start_struct (code, name)\n   ref = make_node (code);\n   pushtag (name, ref);\n   C_TYPE_BEING_DEFINED (ref) = 1;\n+  TYPE_PACKED (ref) = flag_pack_struct;\n   return ref;\n }\n \n@@ -5862,6 +5863,9 @@ start_enum (name)\n   enum_next_value = integer_zero_node;\n   enum_overflow = 0;\n \n+  if (flag_short_enums)\n+    TYPE_PACKED (enumtype) = 1;\n+\n   return enumtype;\n }\n \n@@ -5918,8 +5922,7 @@ finish_enum (enumtype, values, attributes)\n   highprec = min_precision (maxnode, TREE_UNSIGNED (enumtype));\n   precision = MAX (lowprec, highprec);\n \n-  if (flag_short_enums || TYPE_PACKED (enumtype)\n-      || precision > TYPE_PRECISION (integer_type_node))\n+  if (TYPE_PACKED (enumtype) || precision > TYPE_PRECISION (integer_type_node))\n     {\n       tree narrowest = type_for_size (precision, 1);\n       if (narrowest == 0)"}]}