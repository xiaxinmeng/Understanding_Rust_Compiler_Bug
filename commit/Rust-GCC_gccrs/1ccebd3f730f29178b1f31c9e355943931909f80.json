{"sha": "1ccebd3f730f29178b1f31c9e355943931909f80", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWNjZWJkM2Y3MzBmMjkxNzhiMWYzMWM5ZTM1NTk0MzkzMTkwOWY4MA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2019-05-09T10:18:23Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2019-05-09T10:18:23Z"}, "message": "re PR preprocessor/90382 (ICE in linemap_macro_map_loc_to_exp_point, at libcpp/line-map.c:1061)\n\n/cp\n2019-05-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/90382\n\tRevert:\n\t2018-04-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* decl.c (grokdeclarator): Fix value assigned to typespec_loc, use\n\tmin_location.\n\n/testsuite\n2019-05-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/90382\n\t2018-04-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\t* g++.dg/diagnostic/trailing1.C: New.\n\nFrom-SVN: r271032", "tree": {"sha": "9d73c066ac3a5a9ece2d7c4b6854aa4aee7c021f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9d73c066ac3a5a9ece2d7c4b6854aa4aee7c021f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ccebd3f730f29178b1f31c9e355943931909f80", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ccebd3f730f29178b1f31c9e355943931909f80", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ccebd3f730f29178b1f31c9e355943931909f80", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ccebd3f730f29178b1f31c9e355943931909f80/comments", "author": null, "committer": null, "parents": [{"sha": "362e280d10c61bec13c1d02c11a1c4ac0846db7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/362e280d10c61bec13c1d02c11a1c4ac0846db7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/362e280d10c61bec13c1d02c11a1c4ac0846db7e"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "2544e48c7d2352c66fb17c1502606496b2cf199c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ccebd3f730f29178b1f31c9e355943931909f80/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ccebd3f730f29178b1f31c9e355943931909f80/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1ccebd3f730f29178b1f31c9e355943931909f80", "patch": "@@ -1,3 +1,12 @@\n+2019-05-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/90382\n+\tRevert:\n+\t2018-04-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* decl.c (grokdeclarator): Fix value assigned to typespec_loc, use\n+\tmin_location.\n+\n 2019-05-08  Nathan Sidwell  <nathan@acm.org>\n \n \tKill DECL_SAVED_FUNCTION_DATA ."}, {"sha": "36014dc628eddb5b78e89da1fa6b32dc64fe94a7", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ccebd3f730f29178b1f31c9e355943931909f80/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ccebd3f730f29178b1f31c9e355943931909f80/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=1ccebd3f730f29178b1f31c9e355943931909f80", "patch": "@@ -10423,8 +10423,8 @@ grokdeclarator (const cp_declarator *declarator,\n \n   location_t typespec_loc = smallest_type_quals_location (type_quals,\n \t\t\t\t\t\t      declspecs->locations);\n-  typespec_loc = min_location (typespec_loc,\n-\t\t\t       declspecs->locations[ds_type_spec]);\n+  if (typespec_loc == UNKNOWN_LOCATION)\n+    typespec_loc = declspecs->locations[ds_type_spec];\n   if (typespec_loc == UNKNOWN_LOCATION)\n     typespec_loc = input_location;\n "}, {"sha": "98e102b0d669b4e36bbbf04707159a4a0e8e1ada", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ccebd3f730f29178b1f31c9e355943931909f80/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ccebd3f730f29178b1f31c9e355943931909f80/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1ccebd3f730f29178b1f31c9e355943931909f80", "patch": "@@ -1,3 +1,10 @@\n+2019-05-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/90382\n+\t2018-04-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\t* g++.dg/diagnostic/trailing1.C: New.\n+\n 2019-05-09  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/90395"}, {"sha": "369781e56d5baae91e9ce7e9c1c028de4eb7895c", "filename": "gcc/testsuite/g++.dg/diagnostic/trailing1.C", "status": "removed", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/362e280d10c61bec13c1d02c11a1c4ac0846db7e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Ftrailing1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/362e280d10c61bec13c1d02c11a1c4ac0846db7e/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Ftrailing1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fdiagnostic%2Ftrailing1.C?ref=362e280d10c61bec13c1d02c11a1c4ac0846db7e", "patch": "@@ -1,5 +0,0 @@\n-// { dg-do compile { target c++11 } }\n-\n-int const foo1() -> double;  // { dg-error \"1:.foo1. function with trailing return type\" }\n-int volatile foo2() -> double;  // { dg-error \"1:.foo2. function with trailing return type\" }\n-int const volatile foo3() -> double;  // { dg-error \"1:.foo3. function with trailing return type\" }"}]}