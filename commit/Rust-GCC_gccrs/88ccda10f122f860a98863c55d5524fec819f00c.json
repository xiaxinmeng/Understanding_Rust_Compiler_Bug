{"sha": "88ccda10f122f860a98863c55d5524fec819f00c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODhjY2RhMTBmMTIyZjg2MGE5ODg2M2M1NWQ1NTI0ZmVjODE5ZjAwYw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2009-08-12T17:55:40Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2009-08-12T17:55:40Z"}, "message": "re PR tree-optimization/41011 (ICE in ipcp_lattice_from_jfunc, at ipa-cp.c:328)\n\n2009-08-12  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/41011\n\t* ipa-cp.c (ipcp_lattice_from_jfunc): Deal with failing fold\n\tand reference constructing.\n\n\t* gfortran.dg/pr41011.f: New testcase.\n\nFrom-SVN: r150705", "tree": {"sha": "02177c03b81a087298a7b2263003b285c76e716a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/02177c03b81a087298a7b2263003b285c76e716a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88ccda10f122f860a98863c55d5524fec819f00c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88ccda10f122f860a98863c55d5524fec819f00c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88ccda10f122f860a98863c55d5524fec819f00c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88ccda10f122f860a98863c55d5524fec819f00c/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f3ecb732f35b7a6478fa27002fc0502fcb3e10cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3ecb732f35b7a6478fa27002fc0502fcb3e10cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3ecb732f35b7a6478fa27002fc0502fcb3e10cd"}], "stats": {"total": 46, "additions": 43, "deletions": 3}, "files": [{"sha": "a76a3727d5b52f6a60e7ca288bd62bfae3cb7eaf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=88ccda10f122f860a98863c55d5524fec819f00c", "patch": "@@ -1,3 +1,9 @@\n+2009-08-12  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/41011\n+\t* ipa-cp.c (ipcp_lattice_from_jfunc): Deal with failing fold\n+\tand reference constructing.\n+\n 2009-08-12  Xinliang David Li  <davidxl@google.com>\n \n \tPR tree-optimization/41012"}, {"sha": "f7782cbbf83194a3c6215f4ef586f8d9845dee85", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=88ccda10f122f860a98863c55d5524fec819f00c", "patch": "@@ -302,7 +302,8 @@ ipcp_lattice_from_jfunc (struct ipa_node_params *info, struct ipcp_lattice *lat,\n \tcst = fold_binary (jfunc->value.pass_through.operation,\n \t\t\t   TREE_TYPE (cst), cst,\n \t\t\t   jfunc->value.pass_through.operand);\n-      gcc_assert (cst && is_gimple_ip_invariant (cst));\n+      if (!cst || !is_gimple_ip_invariant (cst))\n+\tlat->type = IPA_BOTTOM;\n       lat->constant = cst;\n     }\n   else if (jfunc->type == IPA_JF_ANCESTOR)\n@@ -325,8 +326,13 @@ ipcp_lattice_from_jfunc (struct ipa_node_params *info, struct ipcp_lattice *lat,\n       ok = build_ref_for_offset (&t, TREE_TYPE (t),\n \t\t\t\t jfunc->value.ancestor.offset,\n \t\t\t\t jfunc->value.ancestor.type, false);\n-      gcc_assert (ok);\n-      lat->constant = build_fold_addr_expr (t);\n+      if (!ok)\n+\t{\n+\t  lat->type = IPA_BOTTOM;\n+\t  lat->constant = NULL_TREE;\n+\t}\n+      else\n+\tlat->constant = build_fold_addr_expr (t);\n     }\n   else\n     lat->type = IPA_BOTTOM;"}, {"sha": "fd1aa264cea479b81ab34817e336fe39104b6ce2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=88ccda10f122f860a98863c55d5524fec819f00c", "patch": "@@ -1,3 +1,8 @@\n+2009-08-12  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/41011\n+\t* gfortran.dg/pr41011.f: New testcase.\n+\n 2009-08-11  Andrew Haley  <aph@redhat.com>\n \n \t* gcc.target/arm/synchronize.c: New file."}, {"sha": "4ad4a8fc582bb9019d3d71baeaa3530221df9b45", "filename": "gcc/testsuite/gfortran.dg/pr41011.f", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr41011.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88ccda10f122f860a98863c55d5524fec819f00c/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr41011.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr41011.f?ref=88ccda10f122f860a98863c55d5524fec819f00c", "patch": "@@ -0,0 +1,23 @@\n+! { dg-do compile }\n+! { dg-options \"-O3 -fwhole-file\" }\n+      CALL UVSET(NX,NY,NZ,HVAR,ZET,NP,DZ,DKM,UM,VM,UG,VG,TM,DCDX, ! { dg-warning \"Rank mismatch\" }\n+     *ITY,ISH,NSMT,F)\n+         CALL DCTDX(NX,NY,NX1,NFILT,C(MLAG),DCDX(MLAG),HELP,HELPA,\n+     *   HELP,HELPA,FY,FYC,SAVEY)\n+      END\n+      SUBROUTINE PADEC(DKS,DKDS,HVAR,WM,WG,FN,NS,AN,BN,CN,IT)\n+      COMPLEX*16 WM(*),WG(*),FN(*),AN(*),BN(*),CN(*)\n+         BN(J)=F4+AS+GAMMA*F2\n+         CN(J)=F4-AS+GAMMA*F2\n+         FN(J)=(AS+F4-GAMMA*F2)*H2+(F4-AS-GAMMA*F2)*H0+\n+     *   H1*(F3-GAMMA/3.D0)+GAMMA*WG(J)-CONST\n+      END\n+      SUBROUTINE UVSET(NX,NY,NZ,HVAR,ZET,NP,DZ,DKM,UM,VM,UG,VG,TM,\n+     *WORK,ITY,IH,NSMT,F)\n+      DIMENSION HVAR(*),ZET(*),TM(*),DKM(*),UM(*),VM(*),UG(*),VG(*),\n+     *WORK(*)\n+      IF(IH.EQ.0) THEN\n+         CALL PADEC(DKM,VM,HVAR,WORK(LWM),WORK(LWG), ! { dg-warning \"Rank mismatch\" }\n+     *   WORK(LF),NZ,WORK(LA),WORK(LB),WORK(LC),ITY)\n+      ENDIF\n+      END"}]}