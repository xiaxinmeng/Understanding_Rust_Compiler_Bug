{"sha": "652466353b681ca7d7d6e04095a41c638ef794cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjUyNDY2MzUzYjY4MWNhN2Q3ZDZlMDQwOTVhNDFjNjM4ZWY3OTRjZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2004-04-06T18:05:05Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2004-04-06T18:05:05Z"}, "message": "gcconfig.h (PREFETCH): Use __builtin_prefetch for gcc >= 3.0.\n\n2004-04-06  H.J. Lu  <hongjiu.lu@intel.com>\n\n\t* include/private/gcconfig.h (PREFETCH): Use __builtin_prefetch\n\tfor gcc >= 3.0.\n\t(PREFETCH_FOR_WRITE): Likewise.\n\nFrom-SVN: r80459", "tree": {"sha": "c5f025a9cb7182caa6ea50a3b0a159295b43adb4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5f025a9cb7182caa6ea50a3b0a159295b43adb4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/652466353b681ca7d7d6e04095a41c638ef794cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/652466353b681ca7d7d6e04095a41c638ef794cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/652466353b681ca7d7d6e04095a41c638ef794cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/652466353b681ca7d7d6e04095a41c638ef794cf/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bef1d7003fb08e9422ead524d0b749e5b03b7ff8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bef1d7003fb08e9422ead524d0b749e5b03b7ff8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bef1d7003fb08e9422ead524d0b749e5b03b7ff8"}], "stats": {"total": 14, "additions": 10, "deletions": 4}, "files": [{"sha": "182fef1cab35022f291a42b3ac7140322654cd4f", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/652466353b681ca7d7d6e04095a41c638ef794cf/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/652466353b681ca7d7d6e04095a41c638ef794cf/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=652466353b681ca7d7d6e04095a41c638ef794cf", "patch": "@@ -1,3 +1,9 @@\n+2004-04-06  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* include/private/gcconfig.h (PREFETCH): Use __builtin_prefetch\n+\tfor gcc >= 3.0.\n+\t(PREFETCH_FOR_WRITE): Likewise.\n+\n 2004-03-10  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* configure.ac: Bump AC_PREREQ to 2.59."}, {"sha": "32b6e482cfe95bac6b9912919c6729dfaccaca1f", "filename": "boehm-gc/include/private/gcconfig.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/652466353b681ca7d7d6e04095a41c638ef794cf/boehm-gc%2Finclude%2Fprivate%2Fgcconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/652466353b681ca7d7d6e04095a41c638ef794cf/boehm-gc%2Finclude%2Fprivate%2Fgcconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Finclude%2Fprivate%2Fgcconfig.h?ref=652466353b681ca7d7d6e04095a41c638ef794cf", "patch": "@@ -1801,10 +1801,10 @@\n \t     extern int etext[];\n #            define DATASTART ((ptr_t)((((word) (etext)) + 0xfff) & ~0xfff))\n #       endif\n-#\tdefine PREFETCH(x) \\\n-\t  __asm__ __volatile__ (\"\tprefetch\t%0\": : \"m\"(*(char *)(x)))\n-#\tdefine PREFETCH_FOR_WRITE(x) \\\n-\t  __asm__ __volatile__ (\"\tprefetchw\t%0\": : \"m\"(*(char *)(x)))\n+#\tif defined(__GNUC__) && __GNUC__ >= 3\n+#\t    define PREFETCH(x) __builtin_prefetch ((x), 0, 0)\n+#\t    define PREFETCH_FOR_WRITE(x) __builtin_prefetch ((x), 1)\n+#\tendif\n #   endif\n # endif\n "}]}