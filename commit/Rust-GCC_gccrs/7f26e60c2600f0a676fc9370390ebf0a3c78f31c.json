{"sha": "7f26e60c2600f0a676fc9370390ebf0a3c78f31c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YyNmU2MGMyNjAwZjBhNjc2ZmM5MzcwMzkwZWJmMGEzYzc4ZjMxYw==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2020-04-03T23:47:18Z"}, "committer": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2020-04-03T23:47:18Z"}, "message": "Fix stdarg-3 regression on xstormy16 port\n\n\tPR rtl-optimization/92264\n\t* config/stormy16/stormy16.c (xstormy16_preferred_reload_class): Handle\n\treloading of auto-increment addressing modes.", "tree": {"sha": "683bf1102e1ebe31604c8eecb58bdd0ed86d25c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/683bf1102e1ebe31604c8eecb58bdd0ed86d25c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f26e60c2600f0a676fc9370390ebf0a3c78f31c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f26e60c2600f0a676fc9370390ebf0a3c78f31c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f26e60c2600f0a676fc9370390ebf0a3c78f31c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f26e60c2600f0a676fc9370390ebf0a3c78f31c/comments", "author": null, "committer": null, "parents": [{"sha": "0c809f727cd2a6c70c307d9dd53d26dc84bf292a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c809f727cd2a6c70c307d9dd53d26dc84bf292a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c809f727cd2a6c70c307d9dd53d26dc84bf292a"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "25d1c5d1c381dbfb4f6f637c04d7708d65734096", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f26e60c2600f0a676fc9370390ebf0a3c78f31c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f26e60c2600f0a676fc9370390ebf0a3c78f31c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7f26e60c2600f0a676fc9370390ebf0a3c78f31c", "patch": "@@ -1,3 +1,9 @@\n+2020-04-03  Jeff Law  <law@redhat.com>\n+\n+\tPR rtl-optimization/92264\n+\t* config/stormy16/stormy16.c (xstormy16_preferred_reload_class): Handle\n+\treloading of auto-increment addressing modes.\n+\n 2020-04-03  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/94467"}, {"sha": "2141531e262845065e1bf676e753365750af4582", "filename": "gcc/config/stormy16/stormy16.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f26e60c2600f0a676fc9370390ebf0a3c78f31c/gcc%2Fconfig%2Fstormy16%2Fstormy16.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f26e60c2600f0a676fc9370390ebf0a3c78f31c/gcc%2Fconfig%2Fstormy16%2Fstormy16.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fstormy16%2Fstormy16.c?ref=7f26e60c2600f0a676fc9370390ebf0a3c78f31c", "patch": "@@ -497,7 +497,17 @@ xstormy16_secondary_reload_class (enum reg_class rclass,\n static reg_class_t\n xstormy16_preferred_reload_class (rtx x, reg_class_t rclass)\n {\n-  if (rclass == GENERAL_REGS && MEM_P (x))\n+  /* Only the first eight registers can be moved to/from memory.\n+     So those prefer EIGHT_REGS.\n+\n+     Similarly reloading an auto-increment address is going to\n+     require loads and stores, so we must use EIGHT_REGS for those\n+     too.  */\n+  if (rclass == GENERAL_REGS\n+      && (MEM_P (x)\n+\t  || GET_CODE (x) == POST_INC\n+\t  || GET_CODE (x) == PRE_DEC\n+\t  || GET_CODE (x) == PRE_MODIFY))\n     return EIGHT_REGS;\n \n   return rclass;"}]}