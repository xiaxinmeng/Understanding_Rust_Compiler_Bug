{"sha": "75a398647e3a8b166ce63c62ca5231e0e86c3e70", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzVhMzk4NjQ3ZTNhOGIxNjZjZTYzYzYyY2E1MjMxZTBlODZjM2U3MA==", "commit": {"author": {"name": "Jeffrey A Law", "email": "law@cygnus.com", "date": "1998-09-07T22:39:41Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-09-07T22:39:41Z"}, "message": "configure.in: Check for bogus GCC_EXEC_PREFIX and LIBRARY_PATH.\n\n        * configure.in: Check for bogus GCC_EXEC_PREFIX and LIBRARY_PATH.\n        * configure: Rebuilt.\n\nFrom-SVN: r22320", "tree": {"sha": "a7a9ae291554002e0ab7353b575838b310b4ef22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7a9ae291554002e0ab7353b575838b310b4ef22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75a398647e3a8b166ce63c62ca5231e0e86c3e70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75a398647e3a8b166ce63c62ca5231e0e86c3e70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75a398647e3a8b166ce63c62ca5231e0e86c3e70", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75a398647e3a8b166ce63c62ca5231e0e86c3e70/comments", "author": null, "committer": null, "parents": [{"sha": "b5370a88951834220a26d4fa926bd2086d795dd3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5370a88951834220a26d4fa926bd2086d795dd3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5370a88951834220a26d4fa926bd2086d795dd3"}], "stats": {"total": 275, "additions": 192, "deletions": 83}, "files": [{"sha": "f106ddb594c872f606fa3ee7cf5140686854d62d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75a398647e3a8b166ce63c62ca5231e0e86c3e70/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75a398647e3a8b166ce63c62ca5231e0e86c3e70/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75a398647e3a8b166ce63c62ca5231e0e86c3e70", "patch": "@@ -1,3 +1,8 @@\n+Mon Sep  7 23:38:01 1998  Jeffrey A Law  (law@cygnus.com)\n+\n+\t* configure.in: Check for bogus GCC_EXEC_PREFIX and LIBRARY_PATH.\n+\t* configure: Rebuilt.\n+\n Mon Sep  7 22:41:46 1998  Michael Meissner  <meissner@cygnus.com>\n \n \t* rs6000.c (rs6000_override_options): Fix name for ec603e, to add"}, {"sha": "51b8fdafa30e028d96a5389f4aa8c2f397d4e667", "filename": "gcc/configure", "status": "modified", "additions": 134, "deletions": 83, "changes": 217, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75a398647e3a8b166ce63c62ca5231e0e86c3e70/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75a398647e3a8b166ce63c62ca5231e0e86c3e70/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=75a398647e3a8b166ce63c62ca5231e0e86c3e70", "patch": "@@ -562,6 +562,57 @@ hard_link=ln\n symbolic_link='ln -s'\n copy=cp\n \n+# Check for bogus environment variables.\n+# Test if LIBRARY_PATH contains the notation for the current directory\n+# since this would lead to problems installing/building glibc.\n+# LIBRARY_PATH contains the current directory if one of the following\n+# is true:\n+# - one of the terminals (\":\" and \";\") is the first or last sign\n+# - two terminals occur directly after each other\n+# - the path contains an element with a dot in it\n+echo $ac_n \"checking LIBRARY_PATH variable\"\"... $ac_c\" 1>&6\n+echo \"configure:575: checking LIBRARY_PATH variable\" >&5\n+case ${LIBRARY_PATH} in\n+  [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n+    library_path_setting=\"contains current directory\"\n+    ;;\n+  *)\n+    library_path_setting=\"ok\"\n+    ;;\n+esac\n+echo \"$ac_t\"\"$library_path_setting\" 1>&6\n+if test \"$library_path_setting\" != \"ok\"; then\n+{ echo \"configure: error: \n+*** LIBRARY_PATH shouldn't contain the current directory when\n+*** building egcs. Please change the environment variable\n+*** and run configure again.\" 1>&2; exit 1; }\n+fi\n+\n+# Test if GCC_EXEC_PREFIX contains the notation for the current directory\n+# since this would lead to problems installing/building glibc.\n+# GCC_EXEC_PREFIX contains the current directory if one of the following\n+# is true:\n+# - one of the terminals (\":\" and \";\") is the first or last sign\n+# - two terminals occur directly after each other\n+# - the path contains an element with a dot in it\n+echo $ac_n \"checking GCC_EXEC_PREFIX variable\"\"... $ac_c\" 1>&6\n+echo \"configure:600: checking GCC_EXEC_PREFIX variable\" >&5\n+case ${GCC_EXEC_PREFIX} in\n+  [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n+    gcc_exec_prefix_setting=\"contains current directory\"\n+    ;;\n+  *)\n+    gcc_exec_prefix_setting=\"ok\"\n+    ;;\n+esac\n+echo \"$ac_t\"\"$gcc_exec_prefix_setting\" 1>&6\n+if test \"$gcc_exec_prefix_setting\" != \"ok\"; then\n+{ echo \"configure: error: \n+*** GCC_EXEC_PREFIX shouldn't contain the current directory when\n+*** building egcs. Please change the environment variable\n+*** and run configure again.\" 1>&2; exit 1; }\n+fi\n+\n # Check for additional parameters\n \n # With GNU ld\n@@ -809,7 +860,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:813: checking host system type\" >&5\n+echo \"configure:864: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -830,7 +881,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:834: checking target system type\" >&5\n+echo \"configure:885: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -848,7 +899,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:852: checking build system type\" >&5\n+echo \"configure:903: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -875,7 +926,7 @@ test \"$host_alias\" != \"$target_alias\" &&\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:879: checking for $ac_word\" >&5\n+echo \"configure:930: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -904,7 +955,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:908: checking for $ac_word\" >&5\n+echo \"configure:959: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -952,7 +1003,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:956: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1007: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -962,11 +1013,11 @@ ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS\n cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext <<EOF\n-#line 966 \"configure\"\n+#line 1017 \"configure\"\n #include \"confdefs.h\"\n main(){return(0);}\n EOF\n-if { (eval echo configure:970: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1021: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -986,12 +1037,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:990: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1041: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:995: checking whether we are using GNU C\" >&5\n+echo \"configure:1046: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1000,7 +1051,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1004: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1055: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1015,7 +1066,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1019: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1070: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1054,7 +1105,7 @@ fi\n \n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:1058: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:1109: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1087,7 +1138,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1091: checking for $ac_word\" >&5\n+echo \"configure:1142: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AWK'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1118,7 +1169,7 @@ done\n # Extract the first word of \"flex\", so it can be a program name with args.\n set dummy flex; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1122: checking for $ac_word\" >&5\n+echo \"configure:1173: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1151,15 +1202,15 @@ then\n   *) ac_lib=l ;;\n   esac\n   echo $ac_n \"checking for yywrap in -l$ac_lib\"\"... $ac_c\" 1>&6\n-echo \"configure:1155: checking for yywrap in -l$ac_lib\" >&5\n+echo \"configure:1206: checking for yywrap in -l$ac_lib\" >&5\n ac_lib_var=`echo $ac_lib'_'yywrap | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-l$ac_lib  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1163 \"configure\"\n+#line 1214 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1170,7 +1221,7 @@ int main() {\n yywrap()\n ; return 0; }\n EOF\n-if { (eval echo configure:1174: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1225: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1193,7 +1244,7 @@ fi\n fi\n \n echo $ac_n \"checking whether ln works\"\"... $ac_c\" 1>&6\n-echo \"configure:1197: checking whether ln works\" >&5\n+echo \"configure:1248: checking whether ln works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1225,7 +1276,7 @@ else\n fi\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1229: checking whether ln -s works\" >&5\n+echo \"configure:1280: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1257,19 +1308,19 @@ else\n fi\n \n echo $ac_n \"checking for volatile\"\"... $ac_c\" 1>&6\n-echo \"configure:1261: checking for volatile\" >&5\n+echo \"configure:1312: checking for volatile\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_volatile'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1266 \"configure\"\n+#line 1317 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n volatile int foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:1273: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1324: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_volatile=yes\n else\n@@ -1292,7 +1343,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1296: checking for $ac_word\" >&5\n+echo \"configure:1347: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1323,7 +1374,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1327: checking for $ac_word\" >&5\n+echo \"configure:1378: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_YACC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1363,7 +1414,7 @@ test -n \"$YACC\" || YACC=\"yacc\"\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1367: checking for a BSD compatible install\" >&5\n+echo \"configure:1418: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1414,7 +1465,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1418: checking how to run the C preprocessor\" >&5\n+echo \"configure:1469: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1429,13 +1480,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1433 \"configure\"\n+#line 1484 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1439: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1490: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1446,13 +1497,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1450 \"configure\"\n+#line 1501 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1456: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1507: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   :\n@@ -1475,20 +1526,20 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1479: checking for ANSI C header files\" >&5\n+echo \"configure:1530: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1484 \"configure\"\n+#line 1535 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1492: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1543: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1505,7 +1556,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1509 \"configure\"\n+#line 1560 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1523,7 +1574,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1527 \"configure\"\n+#line 1578 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1544,7 +1595,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1548 \"configure\"\n+#line 1599 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1555,7 +1606,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1559: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1610: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1579,12 +1630,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1583: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:1634: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1588 \"configure\"\n+#line 1639 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -1593,7 +1644,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:1597: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1648: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -1614,20 +1665,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether string.h and strings.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1618: checking whether string.h and strings.h may both be included\" >&5\n+echo \"configure:1669: checking whether string.h and strings.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_string'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1623 \"configure\"\n+#line 1674 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n #include <strings.h>\n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1631: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1682: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_header_string=yes\n else\n@@ -1651,17 +1702,17 @@ for ac_hdr in limits.h stddef.h string.h strings.h stdlib.h time.h fcntl.h unist\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1655: checking for $ac_hdr\" >&5\n+echo \"configure:1706: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1660 \"configure\"\n+#line 1711 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1665: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1716: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1691,17 +1742,17 @@ done\n # Check for thread headers.\n ac_safe=`echo \"thread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for thread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1695: checking for thread.h\" >&5\n+echo \"configure:1746: checking for thread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1700 \"configure\"\n+#line 1751 \"configure\"\n #include \"confdefs.h\"\n #include <thread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1705: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1756: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1725,17 +1776,17 @@ fi\n \n ac_safe=`echo \"pthread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for pthread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1729: checking for pthread.h\" >&5\n+echo \"configure:1780: checking for pthread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1734 \"configure\"\n+#line 1785 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1739: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1790: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1762,7 +1813,7 @@ fi\n # Extract the first word of \"gnatbind\", so it can be a program name with args.\n set dummy gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1766: checking for $ac_word\" >&5\n+echo \"configure:1817: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnat'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1792,20 +1843,20 @@ fi\n # See if the system preprocessor understands the ANSI C preprocessor\n # stringification operator.\n echo $ac_n \"checking whether cpp understands the stringify operator\"\"... $ac_c\" 1>&6\n-echo \"configure:1796: checking whether cpp understands the stringify operator\" >&5\n+echo \"configure:1847: checking whether cpp understands the stringify operator\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_have_stringify'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1801 \"configure\"\n+#line 1852 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n #define S(x)   #x\n char *test = S(foo);\n ; return 0; }\n EOF\n-if { (eval echo configure:1809: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1860: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_have_stringify=yes\n else\n@@ -1828,20 +1879,20 @@ fi\n # Use <inttypes.h> only if it exists,\n # doesn't clash with <sys/types.h>, and declares intmax_t.\n echo $ac_n \"checking for inttypes.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1832: checking for inttypes.h\" >&5\n+echo \"configure:1883: checking for inttypes.h\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_inttypes_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1837 \"configure\"\n+#line 1888 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <inttypes.h>\n int main() {\n intmax_t i = -1;\n ; return 0; }\n EOF\n-if { (eval echo configure:1845: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1896: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<EOF\n #define HAVE_INTTYPES_H 1\n@@ -1864,12 +1915,12 @@ for ac_func in strtoul bsearch strerror putenv popen bcopy bzero bcmp \\\n \tsysconf isascii gettimeofday\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1868: checking for $ac_func\" >&5\n+echo \"configure:1919: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1873 \"configure\"\n+#line 1924 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1892,7 +1943,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1896: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1947: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1921,12 +1972,12 @@ done\n #AC_CHECK_TYPE(wchar_t, unsigned int)\n \n echo $ac_n \"checking for vprintf\"\"... $ac_c\" 1>&6\n-echo \"configure:1925: checking for vprintf\" >&5\n+echo \"configure:1976: checking for vprintf\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vprintf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1930 \"configure\"\n+#line 1981 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vprintf(); below.  */\n@@ -1949,7 +2000,7 @@ vprintf();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1953: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2004: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vprintf=yes\"\n else\n@@ -1973,12 +2024,12 @@ fi\n \n if test \"$ac_cv_func_vprintf\" != yes; then\n echo $ac_n \"checking for _doprnt\"\"... $ac_c\" 1>&6\n-echo \"configure:1977: checking for _doprnt\" >&5\n+echo \"configure:2028: checking for _doprnt\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func__doprnt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1982 \"configure\"\n+#line 2033 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char _doprnt(); below.  */\n@@ -2001,7 +2052,7 @@ _doprnt();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2005: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2056: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n   rm -rf conftest*\n   eval \"ac_cv_func__doprnt=yes\"\n else\n@@ -2037,15 +2088,15 @@ fi\n \n \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:2041: checking whether the printf functions support %p\" >&5\n+echo \"configure:2092: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2049 \"configure\"\n+#line 2100 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -2058,7 +2109,7 @@ main()\n   exit (p != q);\n }\n EOF\n-if { (eval echo configure:2062: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2113: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -2086,12 +2137,12 @@ for ac_func in malloc realloc calloc free bcopy bzero bcmp \\\n \tindex rindex getenv atol sbrk abort atof strerror getcwd getwd\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2090: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2141: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2095 \"configure\"\n+#line 2146 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2124,7 +2175,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2128: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2179: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2153,12 +2204,12 @@ done\n for ac_func in getrlimit setrlimit\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2157: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2208: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2162 \"configure\"\n+#line 2213 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2195,7 +2246,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2199: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2250: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2222,12 +2273,12 @@ done\n \n \n echo $ac_n \"checking for sys_siglist declaration in signal.h or unistd.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2226: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n+echo \"configure:2277: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2231 \"configure\"\n+#line 2282 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -2239,7 +2290,7 @@ int main() {\n char *msg = *(sys_siglist + 1);\n ; return 0; }\n EOF\n-if { (eval echo configure:2243: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2294: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_decl_sys_siglist=yes\n else\n@@ -5391,7 +5442,7 @@ fi\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:5395: checking assembler alignment features\" >&5\n+echo \"configure:5446: checking assembler alignment features\" >&5\n gcc_cv_as=\n gcc_cv_as_alignment_features=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,gcc$,gas,'`\n@@ -5656,7 +5707,7 @@ fi\n \n # Warn if using init_priority.\n echo $ac_n \"checking whether to enable init_priority by default\"\"... $ac_c\" 1>&6\n-echo \"configure:5660: checking whether to enable init_priority by default\" >&5\n+echo \"configure:5711: checking whether to enable init_priority by default\" >&5\n if test x$enable_init_priority != xyes; then\n   enable_init_priority=no\n fi"}, {"sha": "1923d24643043ab0cf0cd75228dd12fc92b2d9d8", "filename": "gcc/configure.in", "status": "modified", "additions": 53, "deletions": 0, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75a398647e3a8b166ce63c62ca5231e0e86c3e70/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75a398647e3a8b166ce63c62ca5231e0e86c3e70/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=75a398647e3a8b166ce63c62ca5231e0e86c3e70", "patch": "@@ -29,6 +29,59 @@ hard_link=ln\n symbolic_link='ln -s'\n copy=cp\n \n+# Check for bogus environment variables.\n+# Test if LIBRARY_PATH contains the notation for the current directory\n+# since this would lead to problems installing/building glibc.\n+# LIBRARY_PATH contains the current directory if one of the following\n+# is true:\n+# - one of the terminals (\":\" and \";\") is the first or last sign\n+# - two terminals occur directly after each other\n+# - the path contains an element with a dot in it\n+AC_MSG_CHECKING(LIBRARY_PATH variable)\n+changequote(,)dnl\n+case ${LIBRARY_PATH} in\n+  [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n+    library_path_setting=\"contains current directory\"\n+    ;;\n+  *)\n+    library_path_setting=\"ok\"\n+    ;;\n+esac\n+changequote([,])dnl\n+AC_MSG_RESULT($library_path_setting)\n+if test \"$library_path_setting\" != \"ok\"; then\n+AC_MSG_ERROR([\n+*** LIBRARY_PATH shouldn't contain the current directory when\n+*** building egcs. Please change the environment variable\n+*** and run configure again.])\n+fi\n+\n+# Test if GCC_EXEC_PREFIX contains the notation for the current directory\n+# since this would lead to problems installing/building glibc.\n+# GCC_EXEC_PREFIX contains the current directory if one of the following\n+# is true:\n+# - one of the terminals (\":\" and \";\") is the first or last sign\n+# - two terminals occur directly after each other\n+# - the path contains an element with a dot in it\n+AC_MSG_CHECKING(GCC_EXEC_PREFIX variable)\n+changequote(,)dnl\n+case ${GCC_EXEC_PREFIX} in\n+  [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n+    gcc_exec_prefix_setting=\"contains current directory\"\n+    ;;\n+  *)\n+    gcc_exec_prefix_setting=\"ok\"\n+    ;;\n+esac\n+changequote([,])dnl\n+AC_MSG_RESULT($gcc_exec_prefix_setting)\n+if test \"$gcc_exec_prefix_setting\" != \"ok\"; then\n+AC_MSG_ERROR([\n+*** GCC_EXEC_PREFIX shouldn't contain the current directory when\n+*** building egcs. Please change the environment variable\n+*** and run configure again.])\n+fi\n+\n # Check for additional parameters\n \n # With GNU ld"}]}