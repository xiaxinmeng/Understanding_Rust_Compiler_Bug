{"sha": "d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDM0MTNlNWZlZmNlYTRjYjVjZDRhNTA1ZmFkYTJmNWVlNGYwMmVlMQ==", "commit": {"author": {"name": "Dominique d'Humieres", "email": "dominiq@lps.ens.fr", "date": "2014-03-24T00:29:43Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2014-03-24T00:29:43Z"}, "message": "re PR fortran/60128 (Wrong ouput using en edit descriptor)\n\n2014-03-23  Dominique d'Humieres  <dominiq@lps.ens.fr>\n\n\tPR libfortran/60128\n\t* gfortran.dg/fmt_en.f90: Update test. XFAIL for\n\ti?86-*-solaris2.9*.\n\nFrom-SVN: r208780", "tree": {"sha": "fdc349612a0e25d139130faf4221ab5fb61f7b23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fdc349612a0e25d139130faf4221ab5fb61f7b23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1/comments", "author": {"login": "DominiquedHumieres", "id": 18394944, "node_id": "MDQ6VXNlcjE4Mzk0OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/18394944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DominiquedHumieres", "html_url": "https://github.com/DominiquedHumieres", "followers_url": "https://api.github.com/users/DominiquedHumieres/followers", "following_url": "https://api.github.com/users/DominiquedHumieres/following{/other_user}", "gists_url": "https://api.github.com/users/DominiquedHumieres/gists{/gist_id}", "starred_url": "https://api.github.com/users/DominiquedHumieres/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DominiquedHumieres/subscriptions", "organizations_url": "https://api.github.com/users/DominiquedHumieres/orgs", "repos_url": "https://api.github.com/users/DominiquedHumieres/repos", "events_url": "https://api.github.com/users/DominiquedHumieres/events{/privacy}", "received_events_url": "https://api.github.com/users/DominiquedHumieres/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "297b651822a041c54edaba5a58af9f0b4430c0af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/297b651822a041c54edaba5a58af9f0b4430c0af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/297b651822a041c54edaba5a58af9f0b4430c0af"}], "stats": {"total": 48, "additions": 44, "deletions": 4}, "files": [{"sha": "af54373287c2ab760fd68a1e8cc71769c07c5b42", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1", "patch": "@@ -1,3 +1,9 @@\n+2014-03-23  Dominique d'Humieres  <dominiq@lps.ens.fr>\n+\n+\tPR libfortran/60128\n+\t* gfortran.dg/fmt_en.f90: Update test. XFAIL for\n+\ti?86-*-solaris2.9*.\n+\n 2014-03-22  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR sanitizer/60613"}, {"sha": "7d9c8aa61a564a70d1eeb09ae00db0b1bd3dfd1c", "filename": "gcc/testsuite/gfortran.dg/fmt_en.f90", "status": "modified", "additions": 38, "deletions": 4, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1/gcc%2Ftestsuite%2Fgfortran.dg%2Ffmt_en.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1/gcc%2Ftestsuite%2Fgfortran.dg%2Ffmt_en.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffmt_en.f90?ref=d3413e5fefcea4cb5cd4a505fada2f5ee4f02ee1", "patch": "@@ -2,8 +2,40 @@\n ! PR60128 Invalid outputs with EN descriptors\n ! Test case provided by Walt Brainerd.\n program pr60128\n-implicit none\n+use ISO_FORTRAN_ENV\n+    implicit none\n+    integer, parameter :: j(size(real_kinds)+4)=[REAL_KINDS, [4, 4, 4, 4]]\n+    logical :: l_skip(4) = .false.\n+    integer :: i\n     integer :: n_tst = 0, n_cnt = 0\n+    character(len=20) :: s\n+\n+    open (unit = 10, file = 'fmt_en.res')\n+!   Check that the default rounding mode is to nearest and to even on tie.\n+    do i=1,size(real_kinds)\n+      if (i == 1) then\n+        write(s, '(2F4.1,2F4.0)') real(-9.49999905,kind=j(1)), &\n+                                  real(9.49999905,kind=j(1)),  &\n+                                  real(9.5,kind=j(1)), real(8.5,kind=j(1))\n+      else if (i == 2) then\n+        write(s, '(2F4.1,2F4.0)') real(-9.49999905,kind=j(2)), &\n+                                  real(9.49999905,kind=j(2)),  &\n+                                  real(9.5,kind=j(2)), real(8.5,kind=j(2))\n+      else if (i == 3) then\n+        write(s, '(2F4.1,2F4.0)') real(-9.49999905,kind=j(3)), &\n+                                  real(9.49999905,kind=j(3)),  &\n+                                  real(9.5,kind=j(3)), real(8.5,kind=j(3))\n+      else if (i == 4) then\n+        write(s, '(2F4.1,2F4.0)') real(-9.49999905,kind=j(4)), &\n+                                  real(9.49999905,kind=j(4)),  &\n+                                  real(9.5,kind=j(4)), real(8.5,kind=j(4))\n+      end if\n+      if (s /= '-9.5 9.5 10.  8.') then\n+        l_skip(i) = .true.\n+        print \"('Unsupported rounding for real(',i0,')')\", j(i)\n+      end if\n+    end do\n+        \n \n ! Original test.\n     call checkfmt(\"(en15.2)\", -.44444,    \"    -444.44E-03\")\n@@ -109,18 +141,18 @@ program pr60128\n \n     !print *, n_tst, n_cnt\n     if (n_cnt /= 0) call abort\n+    if (all(.not. l_skip)) write (10, *) \"All kinds rounded to nearest\"\n+    close (10)\n \n contains\n     subroutine checkfmt(fmt, x, cmp)\n-        use ISO_FORTRAN_ENV\n         implicit none\n-        integer, parameter :: j(size(real_kinds)+4)=[REAL_KINDS, [4, 4, 4, 4]]\n         integer :: i\n         character(len=*), intent(in) :: fmt\n         real, intent(in) :: x\n         character(len=*), intent(in) :: cmp\n-        character(len=20) :: s\n         do i=1,size(real_kinds)\n+          if (l_skip(i)) cycle\n           if (i == 1) then\n             write(s, fmt) real(x,kind=j(1))\n           else if (i == 2) then\n@@ -139,3 +171,5 @@ subroutine checkfmt(fmt, x, cmp)\n         \n     end subroutine\n end program\n+! { dg-final { scan-file fmt_en.res \"All kinds rounded to nearest\" { xfail i?86-*-solaris2.9* } } }\n+! { dg-final { cleanup-saved-temps } }"}]}