{"sha": "b086849e7c7d11523c5f99695e6f7e949019c263", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA4Njg0OWU3YzdkMTE1MjNjNWY5OTY5NWU2ZjdlOTQ5MDE5YzI2Mw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-22T12:32:34Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-06-22T12:32:34Z"}, "message": "[multiple changes]\n\n2010-06-22  Vincent Celier  <celier@adacore.com>\n\n\t* mlib-prj.adb (Display): In non verbose mode, truncate after fourth\n\targument.\n\t* mlib-utl.adb (Gcc): In non verbose mode, truncate the display of the\n\tgcc command if it is too long.\n\n2010-06-22  Robert Dewar  <dewar@adacore.com>\n\n\t* errout.adb (Set_Msg_Node): Fix incorrect reference to node.\n\n2010-06-22  Arnaud Charlet  <charlet@adacore.com>\n\n\t* exp_ch6.adb (Expand_Actuals): Use Actual as the related node when\n\tcalling Make_Temporary.\n\nFrom-SVN: r161170", "tree": {"sha": "3e6d22bb9aa6931a065310c76b938652a0d23638", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e6d22bb9aa6931a065310c76b938652a0d23638"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b086849e7c7d11523c5f99695e6f7e949019c263", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b086849e7c7d11523c5f99695e6f7e949019c263", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b086849e7c7d11523c5f99695e6f7e949019c263", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b086849e7c7d11523c5f99695e6f7e949019c263/comments", "author": null, "committer": null, "parents": [{"sha": "9e64a2c19dd0e4020f5e2c7f735f29b7fb187fef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e64a2c19dd0e4020f5e2c7f735f29b7fb187fef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e64a2c19dd0e4020f5e2c7f735f29b7fb187fef"}], "stats": {"total": 62, "additions": 53, "deletions": 9}, "files": [{"sha": "91d571e3f2116885278c2fd29c22050cb761e5e5", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b086849e7c7d11523c5f99695e6f7e949019c263", "patch": "@@ -1,3 +1,19 @@\n+2010-06-22  Vincent Celier  <celier@adacore.com>\n+\n+\t* mlib-prj.adb (Display): In non verbose mode, truncate after fourth\n+\targument.\n+\t* mlib-utl.adb (Gcc): In non verbose mode, truncate the display of the\n+\tgcc command if it is too long.\n+\n+2010-06-22  Robert Dewar  <dewar@adacore.com>\n+\n+\t* errout.adb (Set_Msg_Node): Fix incorrect reference to node.\n+\n+2010-06-22  Arnaud Charlet  <charlet@adacore.com>\n+\n+\t* exp_ch6.adb (Expand_Actuals): Use Actual as the related node when\n+\tcalling Make_Temporary.\n+\n 2010-06-22  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_res.adb, sem_aux.adb, errout.adb: Minor reformatting."}, {"sha": "ff99f5098a90a7d8308291b78099226cd444e746", "filename": "gcc/ada/errout.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Ferrout.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Ferrout.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ferrout.adb?ref=b086849e7c7d11523c5f99695e6f7e949019c263", "patch": "@@ -2499,7 +2499,7 @@ package body Errout is\n       --  in case, which is the case when we can copy from the source.\n \n       declare\n-         Src_Loc : constant Source_Ptr := Sloc (Error_Msg_Node_1);\n+         Src_Loc : constant Source_Ptr := Sloc (Node);\n          Sbuffer : Source_Buffer_Ptr;\n          Ref_Ptr : Integer;\n          Src_Ptr : Source_Ptr;"}, {"sha": "b8659aa07f2df4759b5e6ca9ebf468aa437dfd48", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=b086849e7c7d11523c5f99695e6f7e949019c263", "patch": "@@ -964,7 +964,7 @@ package body Exp_Ch6 is\n             return;\n          end if;\n \n-         Temp := Make_Temporary (Loc, 'T');\n+         Temp := Make_Temporary (Loc, 'T', Actual);\n \n          --  Use formal type for temp, unless formal type is an unconstrained\n          --  array, in which case we don't have to worry about bounds checks,\n@@ -1216,7 +1216,7 @@ package body Exp_Ch6 is\n \n          Reset_Packed_Prefix;\n \n-         Temp := Make_Temporary (Loc, 'T');\n+         Temp := Make_Temporary (Loc, 'T', Actual);\n          Incod  := Relocate_Node (Actual);\n          Outcod := New_Copy_Tree (Incod);\n \n@@ -1381,7 +1381,7 @@ package body Exp_Ch6 is\n             return Entity (Actual);\n \n          else\n-            Var := Make_Temporary (Loc, 'T');\n+            Var := Make_Temporary (Loc, 'T', Actual);\n \n             N_Node :=\n               Make_Object_Renaming_Declaration (Loc,"}, {"sha": "97a4c16180fc7a55b578f8975967f1a9e7e62d82", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=b086849e7c7d11523c5f99695e6f7e949019c263", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                     Copyright (C) 2001-2009, AdaCore                     --\n+--                     Copyright (C) 2001-2010, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -2285,6 +2285,11 @@ package body MLib.Prj is\n          for Index in 1 .. Argument_Number loop\n             Write_Char (' ');\n             Write_Str (Arguments (Index).all);\n+\n+            if not Opt.Verbose_Mode and then Index > 4 then\n+               Write_Str (\" ...\");\n+               exit;\n+            end if;\n          end loop;\n \n          Write_Eol;"}, {"sha": "67e03097ed62c36aa5a8e75af66874213a8b9c19", "filename": "gcc/ada/mlib-utl.adb", "status": "modified", "additions": 27, "deletions": 4, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Fmlib-utl.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b086849e7c7d11523c5f99695e6f7e949019c263/gcc%2Fada%2Fmlib-utl.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-utl.adb?ref=b086849e7c7d11523c5f99695e6f7e949019c263", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---                     Copyright (C) 2002-2008, AdaCore                     --\n+--                     Copyright (C) 2002-2010, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -460,11 +460,25 @@ package body MLib.Utl is\n       end loop;\n \n       if not Opt.Quiet_Output then\n-         Write_Str (Driver.all);\n+         if Opt.Verbose_Mode then\n+            Write_Str (Driver.all);\n+\n+         elsif Driver_Name /= No_Name then\n+            Write_Str (Get_Name_String (Driver_Name));\n+\n+         else\n+            Write_Str (Gcc_Name.all);\n+         end if;\n \n          for J in 1 .. A loop\n-            Write_Char (' ');\n-            Write_Str  (Arguments (J).all);\n+            if Opt.Verbose_Mode or else J < 4 then\n+               Write_Char (' ');\n+               Write_Str  (Arguments (J).all);\n+\n+            else\n+               Write_Str (\" ...\");\n+               exit;\n+            end if;\n          end loop;\n \n          --  Do not display all the object files if not in verbose mode, only\n@@ -480,10 +494,19 @@ package body MLib.Utl is\n             elsif Position = Second then\n                Write_Str (\" ...\");\n                Position := Last;\n+               exit;\n             end if;\n          end loop;\n \n          for J in Options_2'Range loop\n+            if not Opt.Verbose_Mode then\n+               if Position = Second then\n+                  Write_Str (\" ...\");\n+               end if;\n+\n+               exit;\n+            end if;\n+\n             Write_Char (' ');\n             Write_Str (Options_2 (J).all);\n          end loop;"}]}