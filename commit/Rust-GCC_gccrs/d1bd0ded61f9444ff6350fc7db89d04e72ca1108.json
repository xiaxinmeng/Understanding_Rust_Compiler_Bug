{"sha": "d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDFiZDBkZWQ2MWY5NDQ0ZmY2MzUwZmM3ZGI4OWQwNGU3MmNhMTEwOA==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2003-07-11T08:33:21Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2003-07-11T08:33:21Z"}, "message": "Index: ChangeLog\n2003-07-10  Geoffrey Keating  <geoffk@apple.com>\n\n\t* c-decl.c (finish_decl): Handle 'used' here...\n\t* cgraphunit.c (cgraph_finalize_function): ... and here ...\n\t* c-common.c: (handle_used_attribute): ... not here.\n\n\t* configure.in (onstep): Support --enable-intermodule.\n\t* Makefile.in (OBJS-common): New.\n\t(OBJS-md): New.\n\t(OBJS-archive): New.\n\t(OBJS): Build from OBJS-common, OBJS-md, OBJS-archive.\n\t(OBJS-onestep): New.\n\t(libbackend.a): Support @onestep@.\n\t(libbackend.o): New.\n\t* configure: Regenerate.\n\n\t* c-common.h (c_reset_state): New prototype.\n\t(c_parse_file): New prototype.\n\t(finish_file): Move prototype from c-tree.h.\n\t* c-decl.c: Include <hashtab.h>.\n\t(builtin_decls): New.\n\t(current_file_decl): New.\n\t(duplicate_decls): Add extra parameter. Change all callers.  Don't\n\toutput duplicate common symbols.\n\t(link_hash_hash): New.\n\t(link_hash_eq): New.\n\t(poplevel): Handle popping of the top level.\n\t(warn_if_shadowing): Handle TRANSLATION_UNIT_DECL.\n\t(pushdecl): Set DECL_CONTEXT to TRANSLATION_UNIT_DECL if appropriate.\n\t(pushdecl_top_level): Likewise.\n\t(redeclaration_error_message): Handle TRANSLATION_UNIT_DECL.\n\t(c_init_decl_processing): Create TRANSLATION_UNIT_DECL.\n\t(finish_decl): Handle TRANSLATION_UNIT_DECL.\n\t(merge_translation_unit_decls): New.\n\t(c_write_global_declarations): New.\n\t(c_reset_state): New.\n\t(implicitly_declare): Handle TRANSLATION_UNIT_DECL.\n\t* c-lang.c (LANG_HOOKS_WRITE_GLOBALS): New.\n\t* c-objc-common.c (c_cannot_inline_tree_fn): Handle\n\tTRANSLATION_UNIT_DECL.\n\t(c_objc_common_finish_file): Call merge_translation_unit_decls.\n\t* c-opts.c (in_fnames): Rename from in_fname.\n\t(c_common_decode_option): Handle multiple input filenames.\n\t(c_common_post_options): Likewise.\n\t(c_common_parse_file): Likewise; also, call c_parse_file rather than\n\tyyparse.\n\t* c-parse.in: Move cleanup code to c_parse_file.\n\t(free_parser_stacks): Move contents to c_parse_file.\n\t(c_parse_file): New.\n\t* c-tree.h (union lang_tree_node): Chain along TYPE_NEXT_VARIANT\n\tfor integer types.\n\t(C_DECL_FILE_SCOPE): New.\n\t(finish_file): Move prototype to c-common.h.\n\t(merge_translation_unit_decls): New prototype.\n\t(comptypes): Add extra parameter to prototype.\n\t(c_write_global_declarations): New prototype.\n\t* c-typeck.c (tagged_types_tu_compatible_p): New.\n\t(function_types_compatible_p): Add extra parameter, change all callers.\n\t(type_lists_compatible_p): Likewise.\n\t(comptypes): Likewise.\n\t(struct tagged_tu_seen): New.\n\t(tagged_tu_seen_base): New.\n\t(build_unary_op): Handle TRANSLATION_UNIT_DECL.\n\t(c_mark_addressable): Remove #if 0 code.\n\t* calls.c (special_function_p): Handle TRANSLATION_UNIT_DECL, add\n\tcomment explaining why it shouldn't have to.\n\t* cgraph.h (struct cgraph_node): Add chain_next and chain_prev GTY\n\toptions.\n\t* cppinit.c (cpp_read_next_file): New.\n\t(cpp_read_main_file): Use it.\n\t* cpplib.c (undefine_macros): New.\n\t(cpp_undef_all): New.\n\t* cpplib.h (cpp_read_next_file): Prototype.\n\t(cpp_undef_all): Prototype.\n\t* langhooks-def.h (write_global_declarations): Remove prototype.\n\t* toplev.h (write_global_declarations): Add prototype.\n\t* tree.c (decl_type_context): Use switch statement, handle\n\tTRANSLATION_UNIT_DECL.\n\t* tree.def: Update documentation for TRANSLATION_UNIT_DECL.\n\t(TRANSLATION_UNIT_DECL): New kind of tree.\n\t* tree.h: Update documentation for TRANSLATION_UNIT_DECL.\n\t* Makefile.in (c-decl.o): Add $(HASHTAB_H) to dependencies.\n\t* doc/invoke.texi: Make attempt to document new functionality.\n\n\t2003-05-19  Per Bothner <bothner@apple.com>\n\n\t* gcc.c (combine_inputs): New.\n\t(process_command): Set combine_inputs.\n\t(do_spec_1): Handle combine_inputs.\n\t(main): Likewise.\n\nIndex: cp/ChangeLog\n2003-07-10  Geoffrey Keating  <geoffk@apple.com>\n\n\t* decl.c (cp_finish_decl): Handle 'used' attribute.\n\n\t* cp-lang.c (c_reset_state): New dummy routine.\n\t* cp-tree.h (finish_file): Move prototype to c-common.h.\n\t* parser.c (c_parse_file): Rename from yyparse; don't call finish_file.\n\nFrom-SVN: r69224", "tree": {"sha": "9b4a93a8c6ef46d7812bac262156dcddbbcf0593", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b4a93a8c6ef46d7812bac262156dcddbbcf0593"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6eeba0cc4337f356d68974b8341e84879ec6cd93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6eeba0cc4337f356d68974b8341e84879ec6cd93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6eeba0cc4337f356d68974b8341e84879ec6cd93"}], "stats": {"total": 1598, "additions": 1150, "deletions": 448}, "files": [{"sha": "c6b09e7d29b85a2040c4a1708f294539bdd3f7cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 91, "deletions": 0, "changes": 91, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -1,3 +1,94 @@\n+2003-07-11  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* c-decl.c (finish_decl): Handle 'used' here...\n+\t* cgraphunit.c (cgraph_finalize_function): ... and here ...\n+\t* c-common.c: (handle_used_attribute): ... not here.\n+\t\n+\t* configure.in (onstep): Support --enable-intermodule.\n+\t* Makefile.in (OBJS-common): New.\n+\t(OBJS-md): New.\n+\t(OBJS-archive): New.\n+\t(OBJS): Build from OBJS-common, OBJS-md, OBJS-archive.\n+\t(OBJS-onestep): New.\n+\t(libbackend.a): Support @onestep@.\n+\t(libbackend.o): New.\n+\t* configure: Regenerate.\n+\t\n+\t* c-common.h (c_reset_state): New prototype.\n+\t(c_parse_file): New prototype.\n+\t(finish_file): Move prototype from c-tree.h.\n+\t* c-decl.c: Include <hashtab.h>.\n+\t(builtin_decls): New.\n+\t(current_file_decl): New.\n+\t(duplicate_decls): Add extra parameter. Change all callers.  Don't\n+\toutput duplicate common symbols.\n+\t(link_hash_hash): New.\n+\t(link_hash_eq): New.\n+\t(poplevel): Handle popping of the top level.\n+\t(warn_if_shadowing): Handle TRANSLATION_UNIT_DECL.\n+\t(pushdecl): Set DECL_CONTEXT to TRANSLATION_UNIT_DECL if appropriate.\n+\t(pushdecl_top_level): Likewise.\n+\t(redeclaration_error_message): Handle TRANSLATION_UNIT_DECL.\n+\t(c_init_decl_processing): Create TRANSLATION_UNIT_DECL.\n+\t(finish_decl): Handle TRANSLATION_UNIT_DECL.\n+\t(merge_translation_unit_decls): New.\n+\t(c_write_global_declarations): New.\n+\t(c_reset_state): New.\n+\t(implicitly_declare): Handle TRANSLATION_UNIT_DECL.\n+\t* c-lang.c (LANG_HOOKS_WRITE_GLOBALS): New.\n+\t* c-objc-common.c (c_cannot_inline_tree_fn): Handle\n+\tTRANSLATION_UNIT_DECL.\n+\t(c_objc_common_finish_file): Call merge_translation_unit_decls.\n+\t* c-opts.c (in_fnames): Rename from in_fname.\n+\t(c_common_decode_option): Handle multiple input filenames.\n+\t(c_common_post_options): Likewise.\n+\t(c_common_parse_file): Likewise; also, call c_parse_file rather than\n+\tyyparse.\n+\t* c-parse.in: Move cleanup code to c_parse_file.\n+\t(free_parser_stacks): Move contents to c_parse_file.\n+\t(c_parse_file): New.\n+\t* c-tree.h (union lang_tree_node): Chain along TYPE_NEXT_VARIANT\n+\tfor integer types.\n+\t(C_DECL_FILE_SCOPE): New.\n+\t(finish_file): Move prototype to c-common.h.\n+\t(merge_translation_unit_decls): New prototype.\n+\t(comptypes): Add extra parameter to prototype.\n+\t(c_write_global_declarations): New prototype.\n+\t* c-typeck.c (tagged_types_tu_compatible_p): New.\n+\t(function_types_compatible_p): Add extra parameter, change all callers.\n+\t(type_lists_compatible_p): Likewise.\n+\t(comptypes): Likewise.\n+\t(struct tagged_tu_seen): New.\n+\t(tagged_tu_seen_base): New.\n+\t(build_unary_op): Handle TRANSLATION_UNIT_DECL.\n+\t(c_mark_addressable): Remove #if 0 code.\n+\t* calls.c (special_function_p): Handle TRANSLATION_UNIT_DECL, add\n+\tcomment explaining why it shouldn't have to.\n+\t* cgraph.h (struct cgraph_node): Add chain_next and chain_prev GTY\n+\toptions.\n+\t* cppinit.c (cpp_read_next_file): New.\n+\t(cpp_read_main_file): Use it.\n+\t* cpplib.c (undefine_macros): New.\n+\t(cpp_undef_all): New.\n+\t* cpplib.h (cpp_read_next_file): Prototype.\n+\t(cpp_undef_all): Prototype.\n+\t* langhooks-def.h (write_global_declarations): Remove prototype.\n+\t* toplev.h (write_global_declarations): Add prototype.\n+\t* tree.c (decl_type_context): Use switch statement, handle\n+\tTRANSLATION_UNIT_DECL.\n+\t* tree.def: Update documentation for TRANSLATION_UNIT_DECL.\n+\t(TRANSLATION_UNIT_DECL): New kind of tree.\n+\t* tree.h: Update documentation for TRANSLATION_UNIT_DECL.\n+\t* Makefile.in (c-decl.o): Add $(HASHTAB_H) to dependencies.\n+\t* doc/invoke.texi: Make attempt to document new functionality.\n+\n+\t2003-05-19  Per Bothner <bothner@apple.com>\n+\n+\t* gcc.c (combine_inputs): New.\n+\t(process_command): Set combine_inputs.\n+\t(do_spec_1): Handle combine_inputs.\n+\t(main): Likewise.\n+\n 2003-07-10  James E Wilson  <wilson@tuliptree.org>\n \n \tPR optimization/9745"}, {"sha": "83d6788c4a6bda7c122be7c0e4ff4f91f0b1092d", "filename": "gcc/Makefile.in", "status": "modified", "additions": 24, "deletions": 7, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -801,15 +801,16 @@ C_OBJS = c-parse.o c-lang.o c-pretty-print.o $(C_AND_OBJC_OBJS)\n \n # Language-independent object files.\n \n-OBJS = alias.o bb-reorder.o bitmap.o builtins.o caller-save.o calls.o\t   \\\n+OBJS-common = \\\n+ alias.o bb-reorder.o bitmap.o builtins.o caller-save.o calls.o\t  \t   \\\n  cfg.o cfganal.o cfgbuild.o cfgcleanup.o cfglayout.o cfgloop.o\t\t   \\\n  cfgloopanal.o cfgloopmanip.o loop-init.o loop-unswitch.o loop-unroll.o\t   \\\n  cfgrtl.o combine.o conflict.o convert.o coverage.o cse.o cselib.o \t   \\\n  dbxout.o debug.o df.o diagnostic.o dojump.o doloop.o dominance.o\t   \\\n  dwarf2asm.o dwarf2out.o dwarfout.o emit-rtl.o except.o explow.o\t   \\\n  expmed.o expr.o final.o flow.o fold-const.o function.o gcse.o\t\t   \\\n  genrtl.o ggc-common.o global.o graph.o gtype-desc.o\t\t\t   \\\n- haifa-sched.o hashtable.o hooks.o ifcvt.o insn-attrtab.o insn-emit.o\t   \\\n+ haifa-sched.o hooks.o ifcvt.o insn-attrtab.o insn-emit.o\t\t   \\\n  insn-extract.o insn-opinit.o insn-output.o insn-peep.o insn-recog.o\t   \\\n  integrate.o intl.o jump.o  langhooks.o lcm.o lists.o local-alloc.o  \t   \\\n  loop.o optabs.o options.o opts.o params.o postreload.o predict.o\t   \\\n@@ -820,9 +821,16 @@ OBJS = alias.o bb-reorder.o bitmap.o builtins.o caller-save.o calls.o\t   \\\n  sbitmap.o sched-deps.o sched-ebb.o sched-rgn.o sched-vis.o sdbout.o\t   \\\n  sibcall.o simplify-rtx.o sreal.o ssa.o ssa-ccp.o ssa-dce.o stmt.o\t   \\\n  stor-layout.o stringpool.o timevar.o toplev.o tracer.o tree.o tree-dump.o \\\n- tree-inline.o unroll.o varasm.o varray.o version.o vmsdbgout.o xcoffout.o \\\n- alloc-pool.o et-forest.o cgraph.o cgraphunit.o cfghooks.o bt-load.o\t   \\\n- $(GGC) $(out_object_file) $(EXTRA_OBJS) $(host_hook_obj)\n+ unroll.o varasm.o varray.o version.o vmsdbgout.o xcoffout.o\t\t   \\\n+ alloc-pool.o et-forest.o cfghooks.o bt-load.o $(GGC)\n+\n+OBJS-md = $(out_object_file)\n+OBJS-archive = $(EXTRA_OBJS) $(host_hook_obj) hashtable.o tree-inline.o\t   \\\n+  cgraph.o cgraphunit.o\n+\n+OBJS = $(OBJS-common) $(out_object_file) $(OBJS-archive)\n+\n+OBJS-onestep = libbackend.o $(OBJS-archive)\n \n BACKEND = main.o libbackend.a\n \n@@ -1026,9 +1034,9 @@ rest.cross: $(LIBGCC) specs\n compilations: $(BACKEND)\n \n # Like libcpp.a, this archive is strictly for the host.\n-libbackend.a: $(OBJS)\n+libbackend.a: $(OBJS@onestep@)\n \t-rm -rf libbackend.a\n-\t$(AR) $(AR_FLAGS) libbackend.a $(OBJS)\n+\t$(AR) $(AR_FLAGS) libbackend.a $(OBJS@onestep@)\n \t-$(RANLIB) libbackend.a\n \n # We call this executable `xgcc' rather than `gcc'\n@@ -1817,6 +1825,15 @@ mips-tdump: mips-tdump.o version.o $(LIBDEPS)\n \n mips-tdump.o : mips-tdump.c $(CONFIG_H) $(RTL_H) $(SYSTEM_H) coretypes.h $(TM_H) version.h\n \n+# FIXME: writing proper dependencies for this is a *LOT* of work.\n+libbackend.o : $(OBJS-common:.o=.c) $(out_file) \\\n+  insn-config.h insn-flags.h insn-codes.h insn-constants.h \\\n+  insn-attr.h options_.h\n+\t$(CC) $(ALL_CFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n+\t  -DTARGET_NAME=\\\"$(target_alias)\\\" \\\n+\t  -DLOCALEDIR=\\\"$(localedir)\\\" \\\n+\t  -c $(filter %.c,$^) -o $@\n+\n #\f\n # Generate header and source files from the machine description,\n # and compile them."}, {"sha": "3fc6a861036fb9df6b1b613542525d2a0536fdb9", "filename": "gcc/c-common.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -4680,7 +4680,6 @@ handle_used_attribute (tree *pnode, tree name, tree args ATTRIBUTE_UNUSED,\n   if (TREE_CODE (node) == FUNCTION_DECL\n       || (TREE_CODE (node) == VAR_DECL && TREE_STATIC (node)))\n     {\n-      mark_referenced (DECL_ASSEMBLER_NAME (node));\n       TREE_USED (node) = 1;\n     }\n   else"}, {"sha": "94cf6d2dc866d132854c7e7a30761df772037de2", "filename": "gcc/c-common.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-common.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-common.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -963,6 +963,14 @@ extern bool c_promoting_integer_type_p (tree);\n extern int self_promoting_args_p (tree);\n extern tree strip_array_types (tree);\n \n+/* This function resets the parsers' state in preparation for parsing\n+   a new file.  */\n+extern void c_reset_state (void);\n+/* This is the basic parsing function.  */\n+extern void c_parse_file (void);\n+/* This is misnamed, it actually performs end-of-compilation processing.  */\n+extern void finish_file\t(void);\n+\n /* These macros provide convenient access to the various _STMT nodes.  */\n \n /* Nonzero if this statement should be considered a full-expression,"}, {"sha": "24f4637105611aef75b71bb2e1f1c3cb09d08418", "filename": "gcc/c-decl.c", "status": "modified", "additions": 244, "deletions": 36, "changes": 280, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -127,6 +127,14 @@ static GTY(()) tree shadowed_labels;\n    some other global meaning for that identifier.  */\n static GTY(()) tree truly_local_externals;\n \n+/* A list of the builtin file-scope DECLs.  */\n+\n+static GTY(()) tree builtin_decls;\n+\n+/* A DECL for the current file-scope context.  */\n+\n+static GTY(()) tree current_file_decl;\n+\n /* Set to 0 at beginning of a function definition, set to 1 if\n    a return statement that specifies a return value is seen.  */\n \n@@ -265,7 +273,7 @@ tree static_ctors, static_dtors;\n \n static struct binding_level *make_binding_level (void);\n static void pop_binding_level (struct binding_level **);\n-static int duplicate_decls (tree, tree, int);\n+static int duplicate_decls (tree, tree, int, int);\n static int redeclaration_error_message (tree, tree);\n static void implicit_decl_warning (tree);\n static void storedecls (tree);\n@@ -282,6 +290,8 @@ static void record_external_decl (tree);\n static void warn_if_shadowing (tree, tree);\n static void clone_underlying_type (tree);\n static bool flexible_array_type_p (tree);\n+static hashval_t link_hash_hash\t(const void *);\n+static int link_hash_eq (const void *, const void *);\n \f\n /* States indicating how grokdeclarator() should handle declspecs marked\n    with __attribute__((deprecated)).  An object declared as\n@@ -482,8 +492,12 @@ poplevel (int keep, int reverse, int functionbody)\n   /* We used to warn about unused variables in expand_end_bindings,\n      i.e. while generating RTL.  But in function-at-a-time mode we may\n      choose to never expand a function at all (e.g. auto inlining), so\n-     we do this explicitly now.  */\n-  warn_about_unused_variables (decls);\n+     we do this explicitly now.\n+     No warnings when the global scope is popped because the global\n+     scope isn't popped for the last translation unit, so the warnings\n+     are done in c_write_global_declaration.  */\n+  if (current_binding_level != global_binding_level)\n+    warn_about_unused_variables (decls);\n \n   /* Clear out the name-meanings declared on this level.\n      Propagate TREE_ADDRESSABLE from nested functions to their\n@@ -492,7 +506,8 @@ poplevel (int keep, int reverse, int functionbody)\n     {\n       if (DECL_NAME (link) != 0)\n \t{\n-\t  if (DECL_EXTERNAL (link))\n+\t  if (DECL_EXTERNAL (link) \n+\t      && current_binding_level != global_binding_level)\n \t    /* External decls stay in the symbol-value slot but are\n \t       inaccessible.  */\n \t    C_DECL_INVISIBLE (link) = 1;\n@@ -626,15 +641,15 @@ poplevel (int keep, int reverse, int functionbody)\n   /* Dispose of the block that we just made inside some higher level.  */\n   if (functionbody)\n     DECL_INITIAL (current_function_decl) = block;\n-  else if (block)\n+  else if (block && current_binding_level)\n     current_binding_level->blocks\n       = chainon (current_binding_level->blocks, block);\n   /* If we did not make a block for the level just exited,\n      any blocks made for inner levels\n      (since they cannot be recorded as subblocks in that level)\n      must be carried forward so they will later become subblocks\n      of something else.  */\n-  else if (subblocks)\n+  else if (! block && subblocks)\n     current_binding_level->blocks\n       = chainon (current_binding_level->blocks, subblocks);\n \n@@ -784,9 +799,13 @@ pushtag (tree name, tree type)\n    and OLDDECL is in an outer binding level and should thus not be changed.  */\n \n static int\n-duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n+duplicate_decls (tree newdecl, tree olddecl, int different_binding_level,\n+\t\t int different_tu)\n {\n-  int types_match = comptypes (TREE_TYPE (newdecl), TREE_TYPE (olddecl));\n+  int comptype_flags = (different_tu ? COMPARE_DIFFERENT_TU\n+\t\t\t: COMPARE_STRICT);\n+  int types_match = comptypes (TREE_TYPE (newdecl), TREE_TYPE (olddecl),\n+\t\t\t       comptype_flags);\n   int new_is_definition = (TREE_CODE (newdecl) == FUNCTION_DECL\n \t\t\t   && DECL_INITIAL (newdecl) != 0);\n   tree oldtype = TREE_TYPE (olddecl);\n@@ -908,7 +927,7 @@ duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n \t      trytype = build_type_attribute_variant (trytype,\n \t\t\t\t\t\t      TYPE_ATTRIBUTES (oldtype));\n \n-              types_match = comptypes (newtype, trytype);\n+              types_match = comptypes (newtype, trytype, comptype_flags);\n \t      if (types_match)\n \t\toldtype = trytype;\n \t    }\n@@ -931,7 +950,7 @@ duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n \t      trytype = build_type_attribute_variant (trytype,\n \t\t\t\t\t\t      TYPE_ATTRIBUTES (oldtype));\n \n-\t      types_match = comptypes (newtype, trytype);\n+\t      types_match = comptypes (newtype, trytype, comptype_flags);\n \t      if (types_match)\n \t\toldtype = trytype;\n \t    }\n@@ -1030,15 +1049,15 @@ duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n \t\t && ! pedantic\n \t\t /* Return types must still match.  */\n \t\t && comptypes (TREE_TYPE (oldtype),\n-\t\t\t       TREE_TYPE (newtype))\n+\t\t\t       TREE_TYPE (newtype), comptype_flags)\n \t\t && TYPE_ARG_TYPES (newtype) == 0))\n     {\n       error_with_decl (newdecl, \"conflicting types for `%s'\");\n       /* Check for function type mismatch\n \t involving an empty arglist vs a nonempty one.  */\n       if (TREE_CODE (olddecl) == FUNCTION_DECL\n \t  && comptypes (TREE_TYPE (oldtype),\n-\t\t\tTREE_TYPE (newtype))\n+\t\t\tTREE_TYPE (newtype), comptype_flags)\n \t  && ((TYPE_ARG_TYPES (oldtype) == 0\n \t       && DECL_INITIAL (olddecl) == 0)\n \t      ||\n@@ -1166,7 +1185,8 @@ duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n \t\t}\n \t      /* Type for passing arg must be consistent\n \t\t with that declared for the arg.  */\n-\t      if (! comptypes (TREE_VALUE (parm), TREE_VALUE (type)))\n+\t      if (! comptypes (TREE_VALUE (parm), TREE_VALUE (type),\n+\t\t\t       comptype_flags))\n \t\t{\n \t\t  error_with_decl (newdecl,\n \t\t\t\t   \"prototype for `%s' follows and argument %d doesn't match\",\n@@ -1393,7 +1413,7 @@ duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n     }\n   if (DECL_EXTERNAL (newdecl))\n     {\n-      if (! different_binding_level)\n+      if (! different_binding_level || different_tu)\n \t{\n \t  /* Don't mess with these flags on local externs; they remain\n \t     external even if there's a declaration at file scope which\n@@ -1404,7 +1424,13 @@ duplicate_decls (tree newdecl, tree olddecl, int different_binding_level)\n       /* An extern decl does not override previous storage class.  */\n       TREE_PUBLIC (newdecl) = TREE_PUBLIC (olddecl);\n       if (! DECL_EXTERNAL (newdecl))\n-\tDECL_CONTEXT (newdecl) = DECL_CONTEXT (olddecl);\n+\t{\n+\t  DECL_CONTEXT (newdecl) = DECL_CONTEXT (olddecl);\n+\t  /* If we have two non-EXTERNAL file-scope decls that are\n+\t     the same, only one of them should be written out.  */\n+\t  if (different_tu)\n+\t    TREE_ASM_WRITTEN (newdecl) = 1;\n+\t}\n     }\n   else\n     {\n@@ -1586,7 +1612,7 @@ warn_if_shadowing (tree x, tree old)\n \n   if (TREE_CODE (old) == PARM_DECL)\n     shadow_warning (SW_PARAM, name, old);\n-  else if (DECL_CONTEXT (old) == 0)\n+  else if (C_DECL_FILE_SCOPE (old))\n     shadow_warning (SW_GLOBAL, name, old);\n   else\n     shadow_warning (SW_LOCAL, name, old);\n@@ -1685,12 +1711,13 @@ pushdecl (tree x)\n   /* A local extern declaration for a function doesn't constitute nesting.\n      A local auto declaration does, since it's a forward decl\n      for a nested function coming later.  */\n-  if ((TREE_CODE (x) == FUNCTION_DECL || TREE_CODE (x) == VAR_DECL)\n-      && DECL_INITIAL (x) == 0 && DECL_EXTERNAL (x))\n-    DECL_CONTEXT (x) = 0;\n+  if (current_function_decl == NULL\n+      || ((TREE_CODE (x) == FUNCTION_DECL || TREE_CODE (x) == VAR_DECL)\n+\t  && DECL_INITIAL (x) == 0 && DECL_EXTERNAL (x)))\n+    DECL_CONTEXT (x) = current_file_decl;\n   else\n     DECL_CONTEXT (x) = current_function_decl;\n-\n+  \n   if (name)\n     {\n       tree old;\n@@ -1703,7 +1730,7 @@ pushdecl (tree x)\n \t\t IDENTIFIER_POINTER (name));\n \n       old = lookup_name_current_level (name);\n-      if (old && duplicate_decls (x, old, 0))\n+      if (old && duplicate_decls (x, old, 0, false))\n \treturn old;\n       if (DECL_EXTERNAL (x) || scope == global_binding_level)\n \t{\n@@ -1714,7 +1741,8 @@ pushdecl (tree x)\n \t  tree ext = any_external_decl (name);\n \t  if (ext)\n \t    {\n-\t      if (duplicate_decls (x, ext, scope != global_binding_level))\n+\t      if (duplicate_decls (x, ext, scope != global_binding_level, \n+\t\t\t\t   false))\n \t\tx = copy_node (ext);\n \t    }\n \t  else\n@@ -1788,13 +1816,13 @@ pushdecl_top_level (tree x)\n       if (DECL_CONTEXT (old))\n \tabort ();\n \n-      if (!duplicate_decls (x, old, 0))\n+      if (!duplicate_decls (x, old, 0, false))\n \tabort ();\n \n       return old;\n     }\n \n-  DECL_CONTEXT (x) = 0;\n+  DECL_CONTEXT (x) = current_file_decl;\n   IDENTIFIER_SYMBOL_VALUE (name) = x;\n   TREE_CHAIN (x) = global_binding_level->names;\n   global_binding_level->names = x;\n@@ -1855,7 +1883,7 @@ implicitly_declare (tree functionid)\n       if (!C_DECL_IMPLICIT (decl))\n \t{\n \t  implicit_decl_warning (DECL_NAME (decl));\n-\t  if (DECL_CONTEXT (decl))\n+\t  if (! C_DECL_FILE_SCOPE (decl))\n \t    warning_with_decl (decl, \"previous declaration of `%s'\");\n \t  C_DECL_IMPLICIT (decl) = 1;\n \t}\n@@ -1935,7 +1963,7 @@ redeclaration_error_message (tree newdecl, tree olddecl)\n \treturn 1;\n       return 0;\n     }\n-  else if (DECL_CONTEXT (newdecl) == NULL_TREE)\n+  else if (C_DECL_FILE_SCOPE (newdecl))\n     {\n       /* Objects declared at top level:  */\n       /* If at least one is a reference, it's ok.  */\n@@ -2245,6 +2273,9 @@ c_init_decl_processing (void)\n   input_location.file = \"<internal>\";\n   input_location.line = 0;\n \n+  /* Make the DECL for the toplevel file scope.  */\n+  current_file_decl = build_decl (TRANSLATION_UNIT_DECL, NULL, NULL);\n+\n   build_common_tree_nodes (flag_signed_char);\n \n   c_common_nodes_and_builtins ();\n@@ -2277,6 +2308,8 @@ c_init_decl_processing (void)\n \n   make_fname_decl = c_make_fname_decl;\n   start_fname_decls ();\n+\n+  builtin_decls = global_binding_level->names;\n }\n \n /* Create the VAR_DECL for __FUNCTION__ etc. ID is the name to give the\n@@ -2692,7 +2725,7 @@ start_decl (tree declarator, tree declspecs, int initialized, tree attributes)\n \t and we preserved the rtl from the previous one\n \t (which may or may not happen).  */\n       && !DECL_RTL_SET_P (tem)\n-      && !DECL_CONTEXT (tem))\n+      && C_DECL_FILE_SCOPE (tem))\n     {\n       if (TREE_TYPE (tem) != error_mark_node\n \t  && COMPLETE_TYPE_P (TREE_TYPE (tem)))\n@@ -2795,7 +2828,7 @@ finish_decl (tree decl, tree init, tree asmspec_tree)\n \t\t   Otherwise, let it through, but if it is not `extern'\n \t\t   then it may cause an error message later.  */\n \t\t(DECL_INITIAL (decl) != 0\n-\t\t || DECL_CONTEXT (decl) != 0)\n+\t\t || !C_DECL_FILE_SCOPE (decl))\n \t      :\n \t\t/* An automatic variable with an incomplete type\n \t\t   is an error.  */\n@@ -2860,17 +2893,15 @@ finish_decl (tree decl, tree init, tree asmspec_tree)\n       if (c_dialect_objc ())\n \tobjc_check_decl (decl);\n \n-      if (!DECL_CONTEXT (decl))\n+      if (C_DECL_FILE_SCOPE (decl))\n \t{\n \t  if (DECL_INITIAL (decl) == NULL_TREE\n \t      || DECL_INITIAL (decl) == error_mark_node)\n \t    /* Don't output anything\n \t       when a tentative file-scope definition is seen.\n \t       But at end of compilation, do output code for them.  */\n \t    DECL_DEFER_OUTPUT (decl) = 1;\n-\t  rest_of_decl_compilation (decl, asmspec,\n-\t\t\t\t    (DECL_CONTEXT (decl) == 0\n-\t\t\t\t     || TREE_ASM_WRITTEN (decl)), 0);\n+\t  rest_of_decl_compilation (decl, asmspec, true, 0);\n \t}\n       else\n \t{\n@@ -2902,7 +2933,7 @@ finish_decl (tree decl, tree init, tree asmspec_tree)\n \t    add_decl_stmt (decl);\n \t}\n \n-      if (DECL_CONTEXT (decl) != 0)\n+      if (!C_DECL_FILE_SCOPE (decl))\n \t{\n \t  /* Recompute the RTL of a local array now\n \t     if it used to be an incomplete type.  */\n@@ -2918,12 +2949,16 @@ finish_decl (tree decl, tree init, tree asmspec_tree)\n \t}\n     }\n \n+  /* If this was marked 'used', be sure it will be output.  */\n+  if (lookup_attribute (\"used\", DECL_ATTRIBUTES (decl)))\n+    mark_referenced (DECL_ASSEMBLER_NAME (decl));\n+\n   if (TREE_CODE (decl) == TYPE_DECL)\n     {\n       /* This is a no-op in c-lang.c or something real in objc-act.c.  */\n       if (c_dialect_objc ())\n \tobjc_check_decl (decl);\n-      rest_of_decl_compilation (decl, NULL, DECL_CONTEXT (decl) == 0, 0);\n+      rest_of_decl_compilation (decl, NULL, C_DECL_FILE_SCOPE (decl), 0);\n     }\n \n   /* At the end of a declaration, throw away any variable type sizes\n@@ -5970,7 +6005,8 @@ store_parm_decls (void)\n \t\t declared for the arg.  ISO C says we take the unqualified\n \t\t type for parameters declared with qualified type.  */\n \t      if (! comptypes (TYPE_MAIN_VARIANT (DECL_ARG_TYPE (parm)),\n-\t\t\t       TYPE_MAIN_VARIANT (TREE_VALUE (type))))\n+\t\t\t       TYPE_MAIN_VARIANT (TREE_VALUE (type)),\n+\t\t\t       COMPARE_STRICT))\n \t\t{\n \t\t  if (TYPE_MAIN_VARIANT (TREE_TYPE (parm))\n \t\t      == TYPE_MAIN_VARIANT (TREE_VALUE (type)))\n@@ -6697,7 +6733,7 @@ tree\n identifier_global_value\t(tree t)\n {\n   tree decl = IDENTIFIER_SYMBOL_VALUE (t);\n-  if (decl == 0 || DECL_CONTEXT (decl) == 0)\n+  if (decl == 0 || C_DECL_FILE_SCOPE (decl))\n     return decl;\n \n   /* Shadowed by something else; find the true global value.  */\n@@ -6751,4 +6787,176 @@ make_pointer_declarator (tree type_quals_attrs, tree target)\n   return build1 (INDIRECT_REF, quals, itarget);\n }\n \n+/* Hash and equality functions for link_hash_table: key off\n+   DECL_ASSEMBLER_NAME.  */\n+\n+static hashval_t\n+link_hash_hash (const void *x_p)\n+{\n+  tree x = (tree)x_p;\n+  return (hashval_t) DECL_ASSEMBLER_NAME (x);\n+}\n+\n+static int\n+link_hash_eq (const void *x1_p, const void *x2_p)\n+{\n+  tree x1 = (tree)x1_p;\n+  tree x2 = (tree)x2_p;\n+  return DECL_ASSEMBLER_NAME (x1) == DECL_ASSEMBLER_NAME (x2);\n+}\n+\n+/* Propagate information between definitions and uses between multiple\n+   translation units in TU_LIST based on linkage rules.  */\n+\n+void\n+merge_translation_unit_decls (void)\n+{\n+  const tree tu_list = current_file_decl;\n+  tree tu;\n+  tree decl;\n+  htab_t link_hash_table;\n+  tree block;\n+  \n+  /* Create the BLOCK that poplevel would have created, but don't\n+     actually call poplevel since that's expensive.  */\n+  block = make_node (BLOCK);\n+  BLOCK_VARS (block) = current_binding_level->names;\n+  TREE_USED (block) = 1;\n+  DECL_INITIAL (current_file_decl) = block;\n+\n+  /* If only one translation unit seen, no copying necessary.  */\n+  if (TREE_CHAIN (tu_list) == NULL_TREE)\n+    return;\n+\n+  link_hash_table = htab_create (1021, link_hash_hash, link_hash_eq, NULL);\n+\n+  /* Enter any actual definitions into the hash table.  */\n+  for (tu = tu_list; tu; tu = TREE_CHAIN (tu))\n+    for (decl = BLOCK_VARS (DECL_INITIAL (tu)); decl; decl = TREE_CHAIN (decl))\n+      if (TREE_PUBLIC (decl) && ! DECL_EXTERNAL (decl))\n+\t{\n+\t  PTR *slot;\n+\t  slot = htab_find_slot (link_hash_table, decl, INSERT);\n+\n+\t  /* If we've already got a definition, work out which one is\n+\t     the real one, put it into the hash table, and make the\n+\t     other one DECL_EXTERNAL.  This is important to avoid\n+\t     putting out two definitions of the same symbol in the\n+\t     assembly output.  */\n+\t  if (*slot != NULL)\n+\t    {\n+\t      tree old_decl = (tree) *slot;\n+\n+\t      /* If this is weak or common or whatever, suppress it\n+\t\t in favour of the other definition.  */\n+\t      if (DECL_WEAK (decl))\n+\t\tDECL_EXTERNAL (decl) = 1;\n+\t      else if (DECL_WEAK (old_decl) && ! DECL_WEAK (decl))\n+\t\tDECL_EXTERNAL (old_decl) = 1;\n+\t      else if (DECL_COMMON (decl) || DECL_ONE_ONLY (decl))\n+\t\tDECL_EXTERNAL (decl) = 1;\n+\t      else if (DECL_COMMON (old_decl) || DECL_ONE_ONLY (old_decl))\n+\t\tDECL_EXTERNAL (old_decl) = 1;\n+\t      \n+\t      if (DECL_EXTERNAL (decl))\n+\t\t{\n+\t\t  DECL_INITIAL (decl) = NULL_TREE;\n+\t\t  DECL_COMMON (decl) = 0;\n+\t\t  DECL_ONE_ONLY (decl) = 0;\n+\t\t  DECL_WEAK (decl) = 0;\n+\t\t}\n+\t      else if (DECL_EXTERNAL (old_decl))\n+\t\t{\n+\t\t  DECL_INITIAL (old_decl) = NULL_TREE;\n+\t\t  DECL_COMMON (old_decl) = 0;\n+\t\t  DECL_ONE_ONLY (old_decl) = 0;\n+\t\t  DECL_WEAK (old_decl) = 0;\n+\t\t  *slot = decl;\n+\t\t}\n+\t      else\n+\t\t{\n+\t\t  error_with_decl (decl, \"redefinition of global `%s'\");\n+\t\t  error_with_decl (old_decl, \"`%s' previously defined here\");\n+\t\t}\n+\t    }\n+\t  else\n+\t    *slot = decl;\n+\t}\n+\n+  /* Now insert the desired information from all the definitions\n+     into any plain declarations.  */\n+  for (tu = tu_list; tu; tu = TREE_CHAIN (tu))\n+    for (decl = BLOCK_VARS (DECL_INITIAL (tu)); decl; decl = TREE_CHAIN (decl))\n+      if (TREE_PUBLIC (decl) && DECL_EXTERNAL (decl))\n+\t{\n+\t  tree global_decl;\n+\t  global_decl = (tree) htab_find (link_hash_table, decl);\n+\t  \n+\t  if (! global_decl)\n+\t    continue;\n+\t  \n+\t  /* Print any appropriate error messages, and partially merge\n+\t     the decls.  */\n+\t  (void) duplicate_decls (decl, global_decl, true, true);\n+\t}\n+\n+  htab_delete (link_hash_table);\n+}\n+\n+/* Perform final processing on file-scope data.  */\n+\n+void\n+c_write_global_declarations(void)\n+{\n+  tree link;\n+  \n+  for (link = current_file_decl; link; link = TREE_CHAIN (link))\n+    {\n+      tree globals = BLOCK_VARS (DECL_INITIAL (link));\n+      int len = list_length (globals);\n+      tree *vec = (tree *) xmalloc (sizeof (tree) * len);\n+      int i;\n+      tree decl;\n+      \n+      /* Process the decls in reverse order--earliest first.\n+\t Put them into VEC from back to front, then take out from front.  */\n+      \n+      for (i = 0, decl = globals; i < len; i++, decl = TREE_CHAIN (decl))\n+\tvec[len - i - 1] = decl;\n+      \n+      wrapup_global_declarations (vec, len);\n+      \n+      check_global_declarations (vec, len);\n+      \n+      /* Clean up.  */\n+      free (vec);\n+    }\n+}\n+\n+/* Reset the parser's state in preparation for a new file.  */\n+\n+void\n+c_reset_state (void)\n+{\n+  tree link;\n+  tree file_scope_decl;\n+  \n+  /* Pop the global binding level.  */\n+  if (current_binding_level != global_binding_level)\n+      current_binding_level = global_binding_level;\n+  file_scope_decl = current_file_decl;\n+  DECL_INITIAL (file_scope_decl) = poplevel (1, 0, 0);\n+  truly_local_externals = NULL_TREE;\n+\n+  /* Start a new global binding level.  */\n+  pushlevel (0);\n+  global_binding_level = current_binding_level;\n+  current_file_decl = build_decl (TRANSLATION_UNIT_DECL, NULL, NULL);\n+  TREE_CHAIN (current_file_decl) = file_scope_decl;\n+\n+  /* Reintroduce the global declarations.  */\n+  for (link = builtin_decls; link; link = TREE_CHAIN (link))\n+    pushdecl (copy_node (link));\n+}\n+\n #include \"gt-c-decl.h\""}, {"sha": "fcf03dfba998045adceb1422a8ca96ea61789dff", "filename": "gcc/c-lang.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-lang.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -125,6 +125,9 @@ enum c_language_kind c_language = clk_c;\n #undef LANG_HOOKS_TYPE_PROMOTES_TO\n #define LANG_HOOKS_TYPE_PROMOTES_TO c_type_promotes_to\n \n+#undef LANG_HOOKS_WRITE_GLOBALS\n+#define LANG_HOOKS_WRITE_GLOBALS c_write_global_declarations\n+\n /* ### When changing hooks, consider if ObjC needs changing too!! ### */\n \n /* Each front end provides its own.  */"}, {"sha": "eacc719bdeca51f87b216863584d22f0c6f0ed23", "filename": "gcc/c-objc-common.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-objc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-objc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-objc-common.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -127,7 +127,7 @@ inline_forbidden_p (tree *nodep, int *walk_subtrees ATTRIBUTE_UNUSED,\n       /* We cannot inline a nested function that jumps to a nonlocal\n          label.  */\n       if (TREE_CODE (t) == LABEL_DECL\n-\t  && DECL_CONTEXT (t) && DECL_CONTEXT (t) != fn)\n+\t  && !C_DECL_FILE_SCOPE (t) && DECL_CONTEXT (t) != fn)\n \treturn node;\n \n       break;\n@@ -184,7 +184,7 @@ c_cannot_inline_tree_fn (tree *fnp)\n \tgoto cannot_inline;\n     }\n \n-  if (DECL_CONTEXT (fn))\n+  if (! C_DECL_FILE_SCOPE (fn))\n     {\n       /* If a nested function has pending sizes, we may have already\n          saved them.  */\n@@ -357,6 +357,10 @@ c_objc_common_finish_file (void)\n   if (pch_file)\n     c_common_write_pch ();\n \n+  /* If multiple translation units were built, copy information between\n+     them based on linkage rules.  */\n+  merge_translation_unit_decls ();\n+\n   if (flag_unit_at_a_time)\n     {\n       cgraph_finalize_compilation_unit ();"}, {"sha": "bf60504bab790dcdee376c11d884895f0b762e3f", "filename": "gcc/c-opts.c", "status": "modified", "additions": 44, "deletions": 17, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -52,7 +52,8 @@ static int saved_lineno;\n static cpp_options *cpp_opts;\n \n /* Input filename.  */\n-static const char *in_fname;\n+static const char **in_fnames;\n+static unsigned num_in_fnames;\n \n /* Filename and stream for preprocessed output.  */\n static const char *out_fname;\n@@ -1039,21 +1040,23 @@ c_common_handle_option (size_t scode, const char *arg, int value)\n void\n c_common_handle_filename (const char *filename)\n {\n-  if (!in_fname)\n-    in_fname = filename;\n-  else if (!out_fname)\n-    out_fname = filename;\n-  else\n-    error (\"output filename specified twice\");\n+  num_in_fnames++;\n+  in_fnames = xrealloc (in_fnames, num_in_fnames * sizeof (in_fnames[0]));\n+  in_fnames[num_in_fnames - 1] = filename;\n }\n \n /* Post-switch processing.  */\n bool\n c_common_post_options (const char **pfilename)\n {\n   /* Canonicalize the input and output filenames.  */\n-  if (in_fname == NULL || !strcmp (in_fname, \"-\"))\n-    in_fname = \"\";\n+  if (in_fnames == NULL)\n+    {\n+      in_fnames = xmalloc (sizeof (in_fnames[0]));\n+      in_fnames[0] = \"\";\n+    }\n+  else if (strcmp (in_fnames[0], \"-\") == 0)\n+    in_fnames[0] = \"\";\n \n   if (out_fname == NULL || !strcmp (out_fname, \"-\"))\n     out_fname = \"\";\n@@ -1119,6 +1122,10 @@ c_common_post_options (const char **pfilename)\n \t  return false;\n \t}\n \n+      if (num_in_fnames > 1)\n+\terror (\"too many filenames given.  Type %s --help for usage\",\n+\t       progname);\n+\n       init_pp_output (out_stream);\n     }\n   else\n@@ -1132,7 +1139,7 @@ c_common_post_options (const char **pfilename)\n   cpp_get_callbacks (parse_in)->file_change = cb_file_change;\n \n   /* NOTE: we use in_fname here, not the one supplied.  */\n-  *pfilename = cpp_read_main_file (parse_in, in_fname);\n+  *pfilename = cpp_read_main_file (parse_in, in_fnames[0]);\n \n   saved_lineno = input_line;\n   input_line = 0;\n@@ -1176,23 +1183,43 @@ c_common_init (void)\n   return true;\n }\n \n-/* A thin wrapper around the real parser that initializes the\n-   integrated preprocessor after debug output has been initialized.\n-   Also, make sure the start_source_file debug hook gets called for\n-   the primary source file.  */\n+/* Initialize the integrated preprocessor after debug output has been\n+   initialized; loop over each input file.  */\n void\n c_common_parse_file (int set_yydebug ATTRIBUTE_UNUSED)\n {\n+  unsigned file_index;\n+  \n #if YYDEBUG != 0\n   yydebug = set_yydebug;\n #else\n   warning (\"YYDEBUG not defined\");\n #endif\n \n-  finish_options();\n-  pch_init();\n-  yyparse ();\n+  file_index = 0;\n+  \n+  do\n+    {\n+      if (file_index > 0)\n+\t{\n+\t  /* Reset the state of the parser.  */\n+\t  c_reset_state();\n+\n+\t  /* Reset cpplib's macros and start a new file.  */\n+\t  cpp_undef_all (parse_in);\n+\t  cpp_read_next_file (parse_in, in_fnames[file_index]);\n+\t}\n+\n+      finish_options();\n+      if (file_index == 0)\n+\tpch_init();\n+      c_parse_file ();\n+\n+      file_index++;\n+    } while (file_index < num_in_fnames);\n+  \n   free_parser_stacks ();\n+  finish_file ();\n }\n \n /* Common finish hook for the C, ObjC and C++ front ends.  */"}, {"sha": "bd26489f7c8ceef99e1ecaa7f4efffc802011114", "filename": "gcc/c-parse.in", "status": "modified", "additions": 18, "deletions": 13, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-parse.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-parse.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-parse.in?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -352,20 +352,8 @@ c_parse_init (void)\n program: /* empty */\n \t\t{ if (pedantic)\n \t\t    pedwarn (\"ISO C forbids an empty source file\");\n-\t\t  finish_file ();\n \t\t}\n \t| extdefs\n-\t\t{\n-\t\t  /* In case there were missing closebraces,\n-\t\t     get us back to the global binding level.  */\n-\t\t  while (! global_bindings_p ())\n-\t\t    poplevel (0, 0, 0);\n-\t\t  /* __FUNCTION__ is defined at file scope (\"\").  This\n-\t\t     call may not be necessary as my tests indicate it\n-\t\t     still works without it.  */\n-\t\t  finish_fname_decls ();\n-                  finish_file ();\n-\t\t}\n \t;\n \n /* the reason for the strange actions in this rule\n@@ -718,7 +706,7 @@ primary:\n \t\t  e1 = TYPE_MAIN_VARIANT (groktypename ($3));\n \t\t  e2 = TYPE_MAIN_VARIANT (groktypename ($5));\n \n-\t\t  $$ = comptypes (e1, e2)\n+\t\t  $$ = comptypes (e1, e2, COMPARE_STRICT)\n \t\t    ? build_int_2 (1, 0) : build_int_2 (0, 0);\n \t\t}\n \t| primary '[' expr ']'   %prec '.'\n@@ -3795,10 +3783,27 @@ yyprint (FILE *file, int yychar, YYSTYPE yyl)\n void\n free_parser_stacks (void)\n {\n+}\n+\n+/* Parse the file.  */\n+void\n+c_parse_file (void)\n+{\n+  yyparse ();\n+  /* In case there were missing closebraces, get us back to the global\n+     binding level.  */\n+  while (! global_bindings_p ())\n+    poplevel (0, 0, 0);\n+  /* __FUNCTION__ is defined at file scope (\"\").  This\n+     call may not be necessary as my tests indicate it\n+     still works without it.  */\n+  finish_fname_decls ();\n+\n   if (malloced_yyss)\n     {\n       free (malloced_yyss);\n       free (malloced_yyvs);\n+      malloced_yyss = 0;\n     }\n }\n "}, {"sha": "adfea88924b21ea0d736b7e2dbfe327b51d6f0eb", "filename": "gcc/c-tree.h", "status": "modified", "additions": 17, "deletions": 3, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-tree.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -46,7 +46,7 @@ struct lang_identifier GTY(())\n \n union lang_tree_node \n   GTY((desc (\"TREE_CODE (&%h.generic) == IDENTIFIER_NODE\"),\n-       chain_next (\"(union lang_tree_node *)TREE_CHAIN (&%h.generic)\")))\n+       chain_next (\"TREE_CODE (&%h.generic) == INTEGER_TYPE ? (union lang_tree_node *)TYPE_NEXT_VARIANT (&%h.generic) : (union lang_tree_node *)TREE_CHAIN (&%h.generic)\")))\n {\n   union tree_node GTY ((tag (\"0\"), \n \t\t\tdesc (\"tree_node_structure (&%h)\"))) \n@@ -146,6 +146,11 @@ struct lang_type GTY(())\n \t|| (TYPE_ARG_TYPES (TREE_TYPE (EXP)) == 0\t\\\n \t    && !DECL_BUILT_IN (EXP)))\n \n+/* Nonzero for a decl which is at file scope.  */\n+#define C_DECL_FILE_SCOPE(EXP) \t\t\t\t\t\\\n+  (! DECL_CONTEXT (EXP)\t\t\t\t\t\t\\\n+   || TREE_CODE (DECL_CONTEXT (EXP)) == TRANSLATION_UNIT_DECL)\n+\n /* For FUNCTION_TYPE, a hidden list of types of arguments.  The same as\n    TYPE_ARG_TYPES for functions with prototypes, but created for functions\n    without prototypes.  */\n@@ -157,7 +162,6 @@ extern tree lookup_interface (tree);\n extern tree is_class_name (tree);\n extern tree objc_is_id (tree);\n extern void objc_check_decl (tree);\n-extern void finish_file (void);\n extern int objc_comptypes (tree, tree, int);\n extern tree objc_message_selector (void);\n extern tree lookup_objc_ivar (tree);\n@@ -226,6 +230,7 @@ extern tree c_begin_compound_stmt (void);\n extern void c_expand_deferred_function (tree);\n extern void c_expand_decl_stmt (tree);\n extern tree make_pointer_declarator (tree, tree);\n+extern void merge_translation_unit_decls (void);\n \n /* in c-objc-common.c */\n extern int c_disregard_inline_limits (tree);\n@@ -242,9 +247,17 @@ extern bool c_warn_unused_global_decl (tree);\n \t\t\t  ((VOLATILE_P) ? TYPE_QUAL_VOLATILE : 0))\n \n #define c_sizeof_nowarn(T)  c_sizeof_or_alignof_type (T, SIZEOF_EXPR, 0)\n+\n /* in c-typeck.c */\n+\n+/* For use with comptypes.  */\n+enum {\n+  COMPARE_STRICT = 0,\n+  COMPARE_DIFFERENT_TU = 1\n+};\n+\n extern tree require_complete_type (tree);\n-extern int comptypes (tree, tree);\n+extern int comptypes (tree, tree, int);\n extern tree c_size_in_bytes (tree);\n extern bool c_mark_addressable (tree);\n extern void c_incomplete_type_error (tree, tree);\n@@ -301,6 +314,7 @@ extern int system_header_p;\n \n /* In c-decl.c */\n extern void c_finish_incomplete_decl (tree);\n+extern void c_write_global_declarations (void);\n \n extern GTY(()) tree static_ctors;\n extern GTY(()) tree static_dtors;"}, {"sha": "3228d044506653bdbe3232c31a15fa5d2451f073", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 201, "deletions": 32, "changes": 233, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -53,9 +53,10 @@ static int missing_braces_mentioned;\n static int undeclared_variable_notice;\n \n static tree qualify_type (tree, tree);\n+static int tagged_types_tu_compatible_p (tree, tree, int);\n static int comp_target_types (tree, tree, int);\n-static int function_types_compatible_p (tree, tree);\n-static int type_lists_compatible_p (tree, tree);\n+static int function_types_compatible_p (tree, tree, int);\n+static int type_lists_compatible_p (tree, tree, int);\n static tree decl_constant_value_for_broken_optimization (tree);\n static tree default_function_array_conversion (tree);\n static tree lookup_field (tree, tree);\n@@ -409,7 +410,8 @@ common_type (tree t1, tree t2)\n \t\ttree memb;\n \t\tfor (memb = TYPE_FIELDS (TREE_VALUE (p1));\n \t\t     memb; memb = TREE_CHAIN (memb))\n-\t\t  if (comptypes (TREE_TYPE (memb), TREE_VALUE (p2)))\n+\t\t  if (comptypes (TREE_TYPE (memb), TREE_VALUE (p2), \n+\t\t\t\t COMPARE_STRICT))\n \t\t    {\n \t\t      TREE_VALUE (n) = TREE_VALUE (p2);\n \t\t      if (pedantic)\n@@ -423,7 +425,8 @@ common_type (tree t1, tree t2)\n \t\ttree memb;\n \t\tfor (memb = TYPE_FIELDS (TREE_VALUE (p2));\n \t\t     memb; memb = TREE_CHAIN (memb))\n-\t\t  if (comptypes (TREE_TYPE (memb), TREE_VALUE (p1)))\n+\t\t  if (comptypes (TREE_TYPE (memb), TREE_VALUE (p1), \n+\t\t\t\t COMPARE_STRICT))\n \t\t    {\n \t\t      TREE_VALUE (n) = TREE_VALUE (p1);\n \t\t      if (pedantic)\n@@ -452,7 +455,7 @@ common_type (tree t1, tree t2)\n    but a warning may be needed if you use them together.  */\n \n int\n-comptypes (tree type1, tree type2)\n+comptypes (tree type1, tree type2, int flags)\n {\n   tree t1 = type1;\n   tree t2 = type2;\n@@ -512,11 +515,11 @@ comptypes (tree type1, tree type2)\n     {\n     case POINTER_TYPE:\n       val = (TREE_TYPE (t1) == TREE_TYPE (t2)\n-\t      ? 1 : comptypes (TREE_TYPE (t1), TREE_TYPE (t2)));\n+\t      ? 1 : comptypes (TREE_TYPE (t1), TREE_TYPE (t2), flags));\n       break;\n \n     case FUNCTION_TYPE:\n-      val = function_types_compatible_p (t1, t2);\n+      val = function_types_compatible_p (t1, t2, flags);\n       break;\n \n     case ARRAY_TYPE:\n@@ -529,7 +532,8 @@ comptypes (tree type1, tree type2)\n \n \t/* Target types must match incl. qualifiers.  */\n \tif (TREE_TYPE (t1) != TREE_TYPE (t2)\n-\t    && 0 == (val = comptypes (TREE_TYPE (t1), TREE_TYPE (t2))))\n+\t    && 0 == (val = comptypes (TREE_TYPE (t1), TREE_TYPE (t2),\n+\t\t\t\t      flags)))\n \t  return 0;\n \n \t/* Sizes must match unless one is missing or variable.  */\n@@ -561,6 +565,11 @@ comptypes (tree type1, tree type2)\n     case RECORD_TYPE:\n       if (c_dialect_objc () && objc_comptypes (t1, t2, 0) == 1)\n \tval = 1;\n+\n+    case ENUMERAL_TYPE:\n+    case UNION_TYPE:\n+      if (val != 1 && (flags & COMPARE_DIFFERENT_TU))\n+\tval = tagged_types_tu_compatible_p (t1, t2, flags);\n       break;\n \n     case VECTOR_TYPE:\n@@ -592,7 +601,7 @@ comp_target_types (tree ttl, tree ttr, int reflexive)\n     return val;\n \n   val = comptypes (TYPE_MAIN_VARIANT (TREE_TYPE (ttl)),\n-\t\t   TYPE_MAIN_VARIANT (TREE_TYPE (ttr)));\n+\t\t   TYPE_MAIN_VARIANT (TREE_TYPE (ttr)), COMPARE_STRICT);\n \n   if (val == 2 && pedantic)\n     pedwarn (\"types are not quite compatible\");\n@@ -601,6 +610,159 @@ comp_target_types (tree ttl, tree ttr, int reflexive)\n \f\n /* Subroutines of `comptypes'.  */\n \n+/* The C standard says that two structures in different translation\n+   units are compatible with each other only if the types of their\n+   fields are compatible (among other things).  So, consider two copies\n+   of this structure:  */\n+\n+struct tagged_tu_seen {\n+  const struct tagged_tu_seen * next;\n+  tree t1;\n+  tree t2;\n+};\n+\n+/* Can they be compatible with each other?  We choose to break the\n+   recursion by allowing those types to be compatible.  */\n+\n+static const struct tagged_tu_seen * tagged_tu_seen_base;\n+\n+/* Return 1 if two 'struct', 'union', or 'enum' types T1 and T2 are\n+   compatible.  If the two types are not the same (which has been\n+   checked earlier), this can only happen when multiple translation\n+   units are being compiled.  See C99 6.2.7 paragraph 1 for the exact\n+   rules.  */\n+\n+static int\n+tagged_types_tu_compatible_p (tree t1, tree t2, int flags)\n+{\n+  tree s1, s2;\n+  bool needs_warning = false;\n+  \n+  /* We have to verify that the tags of the types are the same.  This\n+     is harder than it looks because this may be a typedef, so we have\n+     to go look at the original type.  It may even be a typedef of a\n+     typedef... */\n+  while (TYPE_NAME (t1) && TREE_CODE (TYPE_NAME (t1)) == TYPE_DECL)\n+    t1 = DECL_ORIGINAL_TYPE (TYPE_NAME (t1));\n+\n+  while (TYPE_NAME (t2) && TREE_CODE (TYPE_NAME (t2)) == TYPE_DECL)\n+    t2 = DECL_ORIGINAL_TYPE (TYPE_NAME (t2));\n+\n+  /* C90 didn't have the requirement that the two tags be the same.  */\n+  if (flag_isoc99 && TYPE_NAME (t1) != TYPE_NAME (t2))\n+    return 0;\n+  \n+  /* C90 didn't say what happened if one or both of the types were\n+     incomplete; we choose to follow C99 rules here, which is that they\n+     are compatible.  */\n+  if (TYPE_SIZE (t1) == NULL\n+      || TYPE_SIZE (t2) == NULL)\n+    return 1;\n+  \n+  {\n+    const struct tagged_tu_seen * tts_i;\n+    for (tts_i = tagged_tu_seen_base; tts_i != NULL; tts_i = tts_i->next)\n+      if (tts_i->t1 == t1 && tts_i->t2 == t2)\n+\treturn 1;\n+  }\n+  \n+  switch (TREE_CODE (t1))\n+    {\n+    case ENUMERAL_TYPE:\n+      {\n+\tif (list_length (TYPE_VALUES (t1)) != list_length (TYPE_VALUES (t2)))\n+\t  return 0;\n+\t\n+\tfor (s1 = TYPE_VALUES (t1); s1; s1 = TREE_CHAIN (s1))\n+\t  {\n+\t    s2 = purpose_member (TREE_PURPOSE (s1), TYPE_VALUES (t2));\n+\t    if (s2 == NULL\n+\t\t|| simple_cst_equal (TREE_VALUE (s1), TREE_VALUE (s2)) != 1)\n+\t      return 0;\n+\t  }\n+\treturn 1;\n+      }\n+\n+    case UNION_TYPE:\n+      {\n+\tif (list_length (TYPE_FIELDS (t1)) != list_length (TYPE_FIELDS (t2)))\n+\t  return 0;\n+\n+\tfor (s1 = TYPE_FIELDS (t1); s1; s1 = TREE_CHAIN (s1))\n+\t  {\n+\t    bool ok = false;\n+\t    struct tagged_tu_seen tts;\n+\n+\t    tts.next = tagged_tu_seen_base;\n+\t    tts.t1 = t1;\n+\t    tts.t2 = t2;\n+\t    tagged_tu_seen_base = &tts;\n+\t\n+\t    if (DECL_NAME (s1) != NULL)\n+\t      for (s2 = TYPE_VALUES (t2); s2; s2 = TREE_CHAIN (s2))\n+\t\tif (DECL_NAME (s1) == DECL_NAME (s2))\n+\t\t  {\n+\t\t    int result;\n+\t\t    result = comptypes (TREE_TYPE (s1), TREE_TYPE (s2), flags);\n+\t\t    if (result == 0)\n+\t\t      break;\n+\t\t    if (result == 2)\n+\t\t      needs_warning = true;\n+\t\t    \n+\t\t    if (TREE_CODE (s1) == FIELD_DECL\n+\t\t\t&& simple_cst_equal (DECL_FIELD_BIT_OFFSET (s1),\n+\t\t\t\t\t     DECL_FIELD_BIT_OFFSET (s2)) != 1)\n+\t\t      break;\n+\n+\t\t    ok = true;\n+\t\t    break;\n+\t\t  }\n+\t    tagged_tu_seen_base = tts.next;\n+\t    if (! ok)\n+\t      return 0;\n+\t  }\n+\treturn needs_warning ? 2 : 1;\n+      }\n+\n+    case RECORD_TYPE:\n+      {\n+\tstruct tagged_tu_seen tts;\n+\t\n+\ttts.next = tagged_tu_seen_base;\n+\ttts.t1 = t1;\n+\ttts.t2 = t2;\n+\ttagged_tu_seen_base = &tts;\n+\t  \n+\tfor (s1 = TYPE_FIELDS (t1), s2 = TYPE_FIELDS (t2); \n+\t     s1 && s2;\n+\t     s1 = TREE_CHAIN (s1), s2 = TREE_CHAIN (s2))\n+\t  {\n+\t    int result;\n+\t    if (TREE_CODE (s1) != TREE_CODE (s2)\n+\t\t|| DECL_NAME (s1) != DECL_NAME (s2))\n+\t      break;\n+\t    result = comptypes (TREE_TYPE (s1), TREE_TYPE (s2), flags);\n+\t    if (result == 0)\n+\t      break;\n+\t    if (result == 2)\n+\t      needs_warning = true;\n+\t    \n+\t    if (TREE_CODE (s1) == FIELD_DECL\n+\t\t&& simple_cst_equal (DECL_FIELD_BIT_OFFSET (s1),\n+\t\t\t\t     DECL_FIELD_BIT_OFFSET (s2)) != 1)\n+\t      break;\n+\t  }\n+\ttagged_tu_seen_base = tts.next;\n+\tif (s1 && s2)\n+\t  return 0;\n+\treturn needs_warning ? 2 : 1;\n+      }\n+\n+    default:\n+      abort ();\n+    }\n+}\n+\n /* Return 1 if two function types F1 and F2 are compatible.\n    If either type specifies no argument types,\n    the other must specify a fixed number of self-promoting arg types.\n@@ -609,7 +771,7 @@ comp_target_types (tree ttl, tree ttr, int reflexive)\n    Otherwise, the argument types must match.  */\n \n static int\n-function_types_compatible_p (tree f1, tree f2)\n+function_types_compatible_p (tree f1, tree f2, int flags)\n {\n   tree args1, args2;\n   /* 1 if no need for warning yet, 2 if warning cause has been seen.  */\n@@ -630,7 +792,7 @@ function_types_compatible_p (tree f1, tree f2)\n   if (TYPE_VOLATILE (ret2))\n     ret2 = build_qualified_type (TYPE_MAIN_VARIANT (ret2),\n \t\t\t\t TYPE_QUALS (ret2) & ~TYPE_QUAL_VOLATILE);\n-  val = comptypes (ret1, ret2);\n+  val = comptypes (ret1, ret2, flags);\n   if (val == 0)\n     return 0;\n \n@@ -648,7 +810,8 @@ function_types_compatible_p (tree f1, tree f2)\n \t compare that with the other type's arglist.\n \t If they don't match, ask for a warning (but no error).  */\n       if (TYPE_ACTUAL_ARG_TYPES (f1)\n-\t  && 1 != type_lists_compatible_p (args2, TYPE_ACTUAL_ARG_TYPES (f1)))\n+\t  && 1 != type_lists_compatible_p (args2, TYPE_ACTUAL_ARG_TYPES (f1),\n+\t\t\t\t\t   flags))\n \tval = 2;\n       return val;\n     }\n@@ -657,13 +820,14 @@ function_types_compatible_p (tree f1, tree f2)\n       if (!self_promoting_args_p (args1))\n \treturn 0;\n       if (TYPE_ACTUAL_ARG_TYPES (f2)\n-\t  && 1 != type_lists_compatible_p (args1, TYPE_ACTUAL_ARG_TYPES (f2)))\n+\t  && 1 != type_lists_compatible_p (args1, TYPE_ACTUAL_ARG_TYPES (f2),\n+\t\t\t\t\t   flags))\n \tval = 2;\n       return val;\n     }\n \n   /* Both types have argument lists: compare them and propagate results.  */\n-  val1 = type_lists_compatible_p (args1, args2);\n+  val1 = type_lists_compatible_p (args1, args2, flags);\n   return val1 != 1 ? val1 : val;\n }\n \n@@ -672,7 +836,7 @@ function_types_compatible_p (tree f1, tree f2)\n    or 2 for compatible with warning.  */\n \n static int\n-type_lists_compatible_p (tree args1, tree args2)\n+type_lists_compatible_p (tree args1, tree args2, int flags)\n {\n   /* 1 if no need for warning yet, 2 if warning cause has been seen.  */\n   int val = 1;\n@@ -701,7 +865,8 @@ type_lists_compatible_p (tree args1, tree args2)\n \t    return 0;\n \t}\n       else if (! (newval = comptypes (TYPE_MAIN_VARIANT (TREE_VALUE (args1)),\n-\t\t\t\t      TYPE_MAIN_VARIANT (TREE_VALUE (args2)))))\n+\t\t\t\t      TYPE_MAIN_VARIANT (TREE_VALUE (args2)),\n+\t\t\t\t      flags)))\n \t{\n \t  /* Allow  wait (union {union wait *u; int *i} *)\n \t     and  wait (union wait *)  to be compatible.  */\n@@ -715,7 +880,8 @@ type_lists_compatible_p (tree args1, tree args2)\n \t      tree memb;\n \t      for (memb = TYPE_FIELDS (TREE_VALUE (args1));\n \t\t   memb; memb = TREE_CHAIN (memb))\n-\t\tif (comptypes (TREE_TYPE (memb), TREE_VALUE (args2)))\n+\t\tif (comptypes (TREE_TYPE (memb), TREE_VALUE (args2),\n+\t\t\t       flags))\n \t\t  break;\n \t      if (memb == 0)\n \t\treturn 0;\n@@ -730,7 +896,8 @@ type_lists_compatible_p (tree args1, tree args2)\n \t      tree memb;\n \t      for (memb = TYPE_FIELDS (TREE_VALUE (args2));\n \t\t   memb; memb = TREE_CHAIN (memb))\n-\t\tif (comptypes (TREE_TYPE (memb), TREE_VALUE (args1)))\n+\t\tif (comptypes (TREE_TYPE (memb), TREE_VALUE (args1),\n+\t\t\t       flags))\n \t\t  break;\n \t      if (memb == 0)\n \t\treturn 0;\n@@ -1409,7 +1576,7 @@ build_external_ref (tree id, int fun)\n       /* Properly declared variable or function reference.  */\n       if (!objc_ivar)\n \tref = decl;\n-      else if (decl != objc_ivar && DECL_CONTEXT (decl) != 0)\n+      else if (decl != objc_ivar && !C_DECL_FILE_SCOPE (decl))\n \t{\n \t  warning (\"local declaration of `%s' hides instance variable\",\n \t\t   IDENTIFIER_POINTER (id));\n@@ -1449,7 +1616,7 @@ build_external_ref (tree id, int fun)\n       TREE_CONSTANT (ref) = 1;\n     }\n   else if (current_function_decl != 0\n-\t   && DECL_CONTEXT (current_function_decl) != 0\n+\t   && !C_DECL_FILE_SCOPE (current_function_decl)\n \t   && (TREE_CODE (ref) == VAR_DECL\n \t       || TREE_CODE (ref) == PARM_DECL\n \t       || TREE_CODE (ref) == FUNCTION_DECL))\n@@ -3031,7 +3198,7 @@ build_unary_op (enum tree_code code, tree xarg, int flag)\n \t   file-scope function counts as a constant.  */\n \tif (staticp (arg)\n \t    && ! (TREE_CODE (arg) == FUNCTION_DECL\n-\t\t  && DECL_CONTEXT (arg) != 0))\n+\t\t  && !C_DECL_FILE_SCOPE (arg)))\n \t  TREE_CONSTANT (addr) = 1;\n \treturn addr;\n       }\n@@ -3258,6 +3425,7 @@ c_mark_addressable (tree exp)\n \t/* drops in */\n       case FUNCTION_DECL:\n \tTREE_ADDRESSABLE (x) = 1;\n+\t/* drops out */\n       default:\n \treturn true;\n     }\n@@ -3523,7 +3691,7 @@ build_c_cast (tree type, tree expr)\n \n       for (field = TYPE_FIELDS (type); field; field = TREE_CHAIN (field))\n \tif (comptypes (TYPE_MAIN_VARIANT (TREE_TYPE (field)),\n-\t\t       TYPE_MAIN_VARIANT (TREE_TYPE (value))))\n+\t\t       TYPE_MAIN_VARIANT (TREE_TYPE (value)), COMPARE_STRICT))\n \t  break;\n \n       if (field)\n@@ -3917,7 +4085,7 @@ convert_for_assignment (tree type, tree rhs, const char *errtype,\n      This code doesn't fully support references, it's just for the\n      special case of va_start and va_copy.  */\n   if (codel == REFERENCE_TYPE\n-      && comptypes (TREE_TYPE (type), TREE_TYPE (rhs)) == 1)\n+      && comptypes (TREE_TYPE (type), TREE_TYPE (rhs), COMPARE_STRICT) == 1)\n     {\n       if (!lvalue_p (rhs))\n \t{\n@@ -3966,7 +4134,7 @@ convert_for_assignment (tree type, tree rhs, const char *errtype,\n \t  tree memb_type = TREE_TYPE (memb_types);\n \n \t  if (comptypes (TYPE_MAIN_VARIANT (memb_type),\n-\t\t\t TYPE_MAIN_VARIANT (rhstype)))\n+\t\t\t TYPE_MAIN_VARIANT (rhstype), COMPARE_STRICT))\n \t    break;\n \n \t  if (TREE_CODE (memb_type) != POINTER_TYPE)\n@@ -4543,7 +4711,7 @@ digest_init (tree type, tree init, int require_constant)\n \t  && ((inside_init && TREE_CODE (inside_init) == STRING_CST)))\n \t{\n \t  if (comptypes (TYPE_MAIN_VARIANT (TREE_TYPE (inside_init)),\n-\t\t\t TYPE_MAIN_VARIANT (type)))\n+\t\t\t TYPE_MAIN_VARIANT (type), COMPARE_STRICT))\n \t    return inside_init;\n \n \t  if ((TYPE_MAIN_VARIANT (TREE_TYPE (TREE_TYPE (inside_init)))\n@@ -4585,12 +4753,13 @@ digest_init (tree type, tree init, int require_constant)\n      vector constructor is not constant (e.g. {1,2,3,foo()}) then punt\n      below and handle as a constructor.  */\n     if (code == VECTOR_TYPE\n-        && comptypes (TREE_TYPE (inside_init), type)\n+        && comptypes (TREE_TYPE (inside_init), type, COMPARE_STRICT)\n         && TREE_CONSTANT (inside_init))\n       {\n \tif (TREE_CODE (inside_init) == VECTOR_CST\n \t    && comptypes (TYPE_MAIN_VARIANT (TREE_TYPE (inside_init)),\n-\t\t\t  TYPE_MAIN_VARIANT (type)))\n+\t\t\t  TYPE_MAIN_VARIANT (type),\n+\t\t\t  COMPARE_STRICT))\n \t  return inside_init;\n \telse\n \t  return build_vector (type, CONSTRUCTOR_ELTS (inside_init));\n@@ -4601,16 +4770,16 @@ digest_init (tree type, tree init, int require_constant)\n \n   if (inside_init && TREE_TYPE (inside_init) != 0\n       && (comptypes (TYPE_MAIN_VARIANT (TREE_TYPE (inside_init)),\n-\t\t     TYPE_MAIN_VARIANT (type))\n+\t\t     TYPE_MAIN_VARIANT (type), COMPARE_STRICT)\n \t  || (code == ARRAY_TYPE\n-\t      && comptypes (TREE_TYPE (inside_init), type))\n+\t      && comptypes (TREE_TYPE (inside_init), type, COMPARE_STRICT))\n \t  || (code == VECTOR_TYPE\n-\t      && comptypes (TREE_TYPE (inside_init), type))\n+\t      && comptypes (TREE_TYPE (inside_init), type, COMPARE_STRICT))\n \t  || (code == POINTER_TYPE\n \t      && (TREE_CODE (TREE_TYPE (inside_init)) == ARRAY_TYPE\n \t\t  || TREE_CODE (TREE_TYPE (inside_init)) == FUNCTION_TYPE)\n \t      && comptypes (TREE_TYPE (TREE_TYPE (inside_init)),\n-\t\t\t    TREE_TYPE (type)))))\n+\t\t\t    TREE_TYPE (type), COMPARE_STRICT))))\n     {\n       if (code == POINTER_TYPE)\n \tinside_init = default_function_array_conversion (inside_init);\n@@ -6039,7 +6208,7 @@ output_init_element (tree value, tree type, tree field, int pending)\n \t       && TREE_CODE (type) == ARRAY_TYPE\n \t       && TREE_CODE (TREE_TYPE (type)) == INTEGER_TYPE)\n \t  && !comptypes (TYPE_MAIN_VARIANT (TREE_TYPE (value)),\n-\t\t\t TYPE_MAIN_VARIANT (type))))\n+\t\t\t TYPE_MAIN_VARIANT (type), COMPARE_STRICT)))\n     value = default_conversion (value);\n \n   if (TREE_CODE (value) == COMPOUND_LITERAL_EXPR"}, {"sha": "d66ebd93d1c747c391dfbbaa260262c25511bcda", "filename": "gcc/calls.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -600,8 +600,14 @@ special_function_p (tree fndecl, int flags)\n       && IDENTIFIER_LENGTH (DECL_NAME (fndecl)) <= 17\n       /* Exclude functions not at the file scope, or not `extern',\n \t since they are not the magic functions we would otherwise\n-\t think they are.  */\n-      && DECL_CONTEXT (fndecl) == NULL_TREE && TREE_PUBLIC (fndecl))\n+\t think they are.\n+         FIXME: this should be handled with attributes, not with this\n+         hacky imitation of DECL_ASSEMBLER_NAME.  It's (also) wrong\n+         because you can declare fork() inside a function if you\n+         wish.  */\n+      && (DECL_CONTEXT (fndecl) == NULL_TREE \n+\t  || TREE_CODE (DECL_CONTEXT (fndecl)) == TRANSLATION_UNIT_DECL)\n+      && TREE_PUBLIC (fndecl))\n     {\n       const char *name = IDENTIFIER_POINTER (DECL_NAME (fndecl));\n       const char *tname = name;"}, {"sha": "7650326d7dd25d197fac0870d4bb64ad10623c92", "filename": "gcc/cgraph.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -62,7 +62,7 @@ struct cgraph_rtl_info GTY(())\n /* The cgraph data strutcture.\n    Each function decl has assigned cgraph_node listing callees and callers.  */\n \n-struct cgraph_node GTY(())\n+struct cgraph_node GTY((chain_next (\"%h.next\"), chain_prev (\"%h.previous\")))\n {\n   tree decl;\n   struct cgraph_edge *callees;"}, {"sha": "0a3ae487f356246d97f58db5a10fdcc37c4b3f2e", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -71,7 +71,8 @@ cgraph_finalize_function (decl, body)\n \t It is possible to assemble the name later after finalizing the function\n \t and the fact is noticed in assemble_name then.  */\n       || (DECL_ASSEMBLER_NAME_SET_P (decl)\n-\t  && TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (decl))))\n+\t  && TREE_SYMBOL_REFERENCED (DECL_ASSEMBLER_NAME (decl)))\n+      || lookup_attribute (\"used\", DECL_ATTRIBUTES (decl)))\n     {\n       cgraph_mark_needed_node (node, 1);\n     }"}, {"sha": "3120ae3080512b0a0b249959beec72548184ff5d", "filename": "gcc/configure", "status": "modified", "additions": 282, "deletions": 266, "changes": 548, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -63,6 +63,8 @@ ac_help=\"$ac_help\n   --disable-shared        don't provide a shared libgcc\"\n ac_help=\"$ac_help\n   --with-sysroot[=DIR] Search for usr/lib, usr/include, et al, within DIR.\"\n+ac_help=\"$ac_help\n+  --enable-intermodule    build the compiler in one step\"\n ac_help=\"$ac_help\n   --with-libiconv-prefix=DIR  search for libiconv in DIR/include and DIR/lib\"\n ac_help=\"$ac_help\n@@ -655,7 +657,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:659: checking host system type\" >&5\n+echo \"configure:661: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -676,7 +678,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:680: checking target system type\" >&5\n+echo \"configure:682: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -694,7 +696,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:698: checking build system type\" >&5\n+echo \"configure:700: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -771,7 +773,7 @@ test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n # - two terminals occur directly after each other\n # - the path contains an element with a dot in it\n echo $ac_n \"checking LIBRARY_PATH variable\"\"... $ac_c\" 1>&6\n-echo \"configure:775: checking LIBRARY_PATH variable\" >&5\n+echo \"configure:777: checking LIBRARY_PATH variable\" >&5\n case ${LIBRARY_PATH} in\n   [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n     library_path_setting=\"contains current directory\"\n@@ -796,7 +798,7 @@ fi\n # - two terminals occur directly after each other\n # - the path contains an element with a dot in it\n echo $ac_n \"checking GCC_EXEC_PREFIX variable\"\"... $ac_c\" 1>&6\n-echo \"configure:800: checking GCC_EXEC_PREFIX variable\" >&5\n+echo \"configure:802: checking GCC_EXEC_PREFIX variable\" >&5\n case ${GCC_EXEC_PREFIX} in\n   [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n     gcc_exec_prefix_setting=\"contains current directory\"\n@@ -905,7 +907,7 @@ EOF\n fi\n \n echo $ac_n \"checking whether a default linker was specified\"\"... $ac_c\" 1>&6\n-echo \"configure:909: checking whether a default linker was specified\" >&5\n+echo \"configure:911: checking whether a default linker was specified\" >&5\n if test x\"${DEFAULT_LINKER+set}\" = x\"set\"; then\n   if test x\"$gnu_ld_flag\" = x\"no\"; then\n     echo \"$ac_t\"\"yes ($DEFAULT_LINKER)\" 1>&6\n@@ -949,7 +951,7 @@ EOF\n fi\n \n echo $ac_n \"checking whether a default assembler was specified\"\"... $ac_c\" 1>&6\n-echo \"configure:953: checking whether a default assembler was specified\" >&5\n+echo \"configure:955: checking whether a default assembler was specified\" >&5\n if test x\"${DEFAULT_ASSEMBLER+set}\" = x\"set\"; then\n   if test x\"$gas_flag\" = x\"no\"; then\n     echo \"$ac_t\"\"yes ($DEFAULT_ASSEMBLER)\" 1>&6\n@@ -968,7 +970,7 @@ fi\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:972: checking for $ac_word\" >&5\n+echo \"configure:974: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -998,7 +1000,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1002: checking for $ac_word\" >&5\n+echo \"configure:1004: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1049,7 +1051,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1053: checking for $ac_word\" >&5\n+echo \"configure:1055: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1081,7 +1083,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1085: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1087: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1092,12 +1094,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1096 \"configure\"\n+#line 1098 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1101: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1103: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1123,12 +1125,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1127: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1129: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1132: checking whether we are using GNU C\" >&5\n+echo \"configure:1134: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1137,7 +1139,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1141: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1143: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1156,7 +1158,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1160: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1162: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1189,10 +1191,10 @@ fi\n \n if test \"x$CC\" != xcc; then\n   echo $ac_n \"checking whether $CC and cc understand -c and -o together\"\"... $ac_c\" 1>&6\n-echo \"configure:1193: checking whether $CC and cc understand -c and -o together\" >&5\n+echo \"configure:1195: checking whether $CC and cc understand -c and -o together\" >&5\n else\n   echo $ac_n \"checking whether cc understands -c and -o together\"\"... $ac_c\" 1>&6\n-echo \"configure:1196: checking whether cc understands -c and -o together\" >&5\n+echo \"configure:1198: checking whether cc understands -c and -o together\" >&5\n fi\n set dummy $CC; ac_cc=\"`echo $2 |\n \t\t       sed -e 's/[^a-zA-Z0-9_]/_/g' -e 's/^[0-9]/_/'`\"\n@@ -1204,16 +1206,16 @@ else\n # We do the test twice because some compilers refuse to overwrite an\n # existing .o file with -o, though they will create one.\n ac_try='${CC-cc} -c conftest.c -o conftest.o 1>&5'\n-if { (eval echo configure:1208: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; } &&\n-   test -f conftest.o && { (eval echo configure:1209: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; };\n+if { (eval echo configure:1210: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; } &&\n+   test -f conftest.o && { (eval echo configure:1211: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; };\n then\n   eval ac_cv_prog_cc_${ac_cc}_c_o=yes\n   if test \"x$CC\" != xcc; then\n     # Test first that cc exists at all.\n-    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:1214: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; }; then\n+    if { ac_try='cc -c conftest.c 1>&5'; { (eval echo configure:1216: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; }; then\n       ac_try='cc -c conftest.c -o conftest.o 1>&5'\n-      if { (eval echo configure:1216: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; } &&\n-\t test -f conftest.o && { (eval echo configure:1217: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; };\n+      if { (eval echo configure:1218: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; } &&\n+\t test -f conftest.o && { (eval echo configure:1219: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; };\n       then\n         # cc works too.\n         :\n@@ -1253,21 +1255,21 @@ fi\n # -------------------------\n \n echo $ac_n \"checking whether ${CC-cc} accepts -Wno-long-long\"\"... $ac_c\" 1>&6\n-echo \"configure:1257: checking whether ${CC-cc} accepts -Wno-long-long\" >&5\n+echo \"configure:1259: checking whether ${CC-cc} accepts -Wno-long-long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_no_long_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\"-Wno-long-long\"\n cat > conftest.$ac_ext <<EOF\n-#line 1264 \"configure\"\n+#line 1266 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1271: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1273: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_prog_cc_no_long_long=yes\n else\n@@ -1283,7 +1285,7 @@ fi\n echo \"$ac_t\"\"$ac_cv_prog_cc_no_long_long\" 1>&6\n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1287: checking how to run the C preprocessor\" >&5\n+echo \"configure:1289: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1298,13 +1300,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1302 \"configure\"\n+#line 1304 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1308: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1310: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1315,13 +1317,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1319 \"configure\"\n+#line 1321 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1325: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1327: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1332,13 +1334,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1336 \"configure\"\n+#line 1338 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1342: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1344: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1363,21 +1365,21 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for inline\"\"... $ac_c\" 1>&6\n-echo \"configure:1367: checking for inline\" >&5\n+echo \"configure:1369: checking for inline\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_inline'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_cv_c_inline=no\n for ac_kw in inline __inline__ __inline; do\n   cat > conftest.$ac_ext <<EOF\n-#line 1374 \"configure\"\n+#line 1376 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n } $ac_kw foo() {\n ; return 0; }\n EOF\n-if { (eval echo configure:1381: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1383: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_inline=$ac_kw; break\n else\n@@ -1404,19 +1406,19 @@ esac\n \n \n echo $ac_n \"checking for long long int\"\"... $ac_c\" 1>&6\n-echo \"configure:1408: checking for long long int\" >&5\n+echo \"configure:1410: checking for long long int\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_long_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1413 \"configure\"\n+#line 1415 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n long long int i;\n ; return 0; }\n EOF\n-if { (eval echo configure:1420: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1422: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_long_long=yes\n else\n@@ -1436,19 +1438,19 @@ EOF\n \n   fi\n echo $ac_n \"checking for __int64\"\"... $ac_c\" 1>&6\n-echo \"configure:1440: checking for __int64\" >&5\n+echo \"configure:1442: checking for __int64\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c___int64'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1445 \"configure\"\n+#line 1447 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n __int64 i;\n ; return 0; }\n EOF\n-if { (eval echo configure:1452: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1454: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c___int64=yes\n else\n@@ -1469,19 +1471,19 @@ EOF\n   fi\n \n echo $ac_n \"checking for built-in _Bool\"\"... $ac_c\" 1>&6\n-echo \"configure:1473: checking for built-in _Bool\" >&5\n+echo \"configure:1475: checking for built-in _Bool\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c__bool'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1478 \"configure\"\n+#line 1480 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n _Bool foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:1485: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1487: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c__bool=yes\n else\n@@ -1505,13 +1507,13 @@ fi\n \n # sizeof(char) is 1 by definition.\n echo $ac_n \"checking size of void *\"\"... $ac_c\" 1>&6\n-echo \"configure:1509: checking size of void *\" >&5\n+echo \"configure:1511: checking size of void *\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_void_p'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1515 \"configure\"\n+#line 1517 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -1521,7 +1523,7 @@ int main() {\n switch (0) case 0: case (sizeof (void *) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:1525: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1527: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_void_p=$ac_size\n else\n@@ -1544,13 +1546,13 @@ EOF\n \n \n echo $ac_n \"checking size of short\"\"... $ac_c\" 1>&6\n-echo \"configure:1548: checking size of short\" >&5\n+echo \"configure:1550: checking size of short\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_short'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1554 \"configure\"\n+#line 1556 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -1560,7 +1562,7 @@ int main() {\n switch (0) case 0: case (sizeof (short) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:1564: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1566: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_short=$ac_size\n else\n@@ -1583,13 +1585,13 @@ EOF\n \n \n echo $ac_n \"checking size of int\"\"... $ac_c\" 1>&6\n-echo \"configure:1587: checking size of int\" >&5\n+echo \"configure:1589: checking size of int\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_int'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1593 \"configure\"\n+#line 1595 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -1599,7 +1601,7 @@ int main() {\n switch (0) case 0: case (sizeof (int) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:1603: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1605: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_int=$ac_size\n else\n@@ -1622,13 +1624,13 @@ EOF\n \n \n echo $ac_n \"checking size of long\"\"... $ac_c\" 1>&6\n-echo \"configure:1626: checking size of long\" >&5\n+echo \"configure:1628: checking size of long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1632 \"configure\"\n+#line 1634 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -1638,7 +1640,7 @@ int main() {\n switch (0) case 0: case (sizeof (long) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:1642: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1644: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_long=$ac_size\n else\n@@ -1662,13 +1664,13 @@ EOF\n \n if test $ac_cv_c_long_long = yes; then\n   echo $ac_n \"checking size of long long\"\"... $ac_c\" 1>&6\n-echo \"configure:1666: checking size of long long\" >&5\n+echo \"configure:1668: checking size of long long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1672 \"configure\"\n+#line 1674 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -1678,7 +1680,7 @@ int main() {\n switch (0) case 0: case (sizeof (long long) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:1682: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1684: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof_long_long=$ac_size\n else\n@@ -1703,13 +1705,13 @@ EOF\n fi\n if test $ac_cv_c___int64 = yes; then\n   echo $ac_n \"checking size of __int64\"\"... $ac_c\" 1>&6\n-echo \"configure:1707: checking size of __int64\" >&5\n+echo \"configure:1709: checking size of __int64\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_sizeof___int64'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   for ac_size in 4 8 1 2 16 12  ; do # List sizes in rough order of prevalence.\n   cat > conftest.$ac_ext <<EOF\n-#line 1713 \"configure\"\n+#line 1715 \"configure\"\n #include \"confdefs.h\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n@@ -1719,7 +1721,7 @@ int main() {\n switch (0) case 0: case (sizeof (__int64) == $ac_size):;\n ; return 0; }\n EOF\n-if { (eval echo configure:1723: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1725: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_sizeof___int64=$ac_size\n else\n@@ -1758,7 +1760,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}gnatbind\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1762: checking for $ac_word\" >&5\n+echo \"configure:1764: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GNATBIND'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1790,7 +1792,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"gnatbind\", so it can be a program name with args.\n set dummy gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1794: checking for $ac_word\" >&5\n+echo \"configure:1796: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GNATBIND'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1823,7 +1825,7 @@ fi\n fi\n \n echo $ac_n \"checking for compiler driver that understands Ada\"\"... $ac_c\" 1>&6\n-echo \"configure:1827: checking for compiler driver that understands Ada\" >&5\n+echo \"configure:1829: checking for compiler driver that understands Ada\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_adac'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1866,7 +1868,7 @@ fi\n \n if test x$have_gnat != xno ; then \n echo $ac_n \"checking whether ${ADAC} accepts -Wno-long-long\"\"... $ac_c\" 1>&6\n-echo \"configure:1870: checking whether ${ADAC} accepts -Wno-long-long\" >&5\n+echo \"configure:1872: checking whether ${ADAC} accepts -Wno-long-long\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_adac_no_long_long'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2004,17 +2006,17 @@ if test x$ac_checking_valgrind != x ; then\n   # It is certainly possible that there's valgrind but no valgrind.h.\n   # GCC relies on making annotations so we must have both.\n   echo $ac_n \"checking for VALGRIND_DISCARD in <memcheck.h>\"\"... $ac_c\" 1>&6\n-echo \"configure:2008: checking for VALGRIND_DISCARD in <memcheck.h>\" >&5\n+echo \"configure:2010: checking for VALGRIND_DISCARD in <memcheck.h>\" >&5\n   cat > conftest.$ac_ext <<EOF\n-#line 2010 \"configure\"\n+#line 2012 \"configure\"\n #include \"confdefs.h\"\n #include <memcheck.h>\n #ifndef VALGRIND_DISCARD\n #error VALGRIND_DISCARD not defined\n #endif\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2018: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2020: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2030,17 +2032,17 @@ rm -f conftest*\n   echo \"$ac_t\"\"$gcc_cv_header_memcheck_h\" 1>&6\n   ac_safe=`echo \"valgrind.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for valgrind.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2034: checking for valgrind.h\" >&5\n+echo \"configure:2036: checking for valgrind.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2039 \"configure\"\n+#line 2041 \"configure\"\n #include \"confdefs.h\"\n #include <valgrind.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2044: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2046: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2094,7 +2096,7 @@ rm -f conf$$.file\n # Extract the first word of \"valgrind\", so it can be a program name with args.\n set dummy valgrind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2098: checking for $ac_word\" >&5\n+echo \"configure:2100: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_valgrind_path'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2330,12 +2332,25 @@ fi\n \n \n \n+# Build with intermodule optimisations\n+local_prefix=\n+# Check whether --enable-intermodule or --disable-intermodule was given.\n+if test \"${enable_intermodule+set}\" = set; then\n+  enableval=\"$enable_intermodule\"\n+  case \"${enable_intermodule}\" in\n+  yes) onestep=-onestep : ;;\n+  *) onestep= : ;;\n+esac\n+fi\n+\n+\n+\n # -------------------------\n # Checks for other programs\n # -------------------------\n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:2339: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:2354: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -2368,7 +2383,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2372: checking for $ac_word\" >&5\n+echo \"configure:2387: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AWK'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2398,7 +2413,7 @@ test -n \"$AWK\" && break\n done\n \n echo $ac_n \"checking whether ln works\"\"... $ac_c\" 1>&6\n-echo \"configure:2402: checking whether ln works\" >&5\n+echo \"configure:2417: checking whether ln works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2430,7 +2445,7 @@ else\n fi\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:2434: checking whether ln -s works\" >&5\n+echo \"configure:2449: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2464,7 +2479,7 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2468: checking for $ac_word\" >&5\n+echo \"configure:2483: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2502,7 +2517,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:2506: checking for a BSD compatible install\" >&5\n+echo \"configure:2521: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -2556,7 +2571,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n # Extract the first word of \"mktemp\", so it can be a program name with args.\n set dummy mktemp; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2560: checking for $ac_word\" >&5\n+echo \"configure:2575: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_have_mktemp_command'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2595,7 +2610,7 @@ else\n   # Extract the first word of \"makeinfo\", so it can be a program name with args.\n set dummy makeinfo; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2599: checking for $ac_word\" >&5\n+echo \"configure:2614: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_MAKEINFO'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2624,13 +2639,13 @@ fi\n if test -n \"$MAKEINFO\"; then\n   # Found it, now check the version.\n   echo $ac_n \"checking for modern makeinfo\"\"... $ac_c\" 1>&6\n-echo \"configure:2628: checking for modern makeinfo\" >&5\n+echo \"configure:2643: checking for modern makeinfo\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_makeinfo_modern'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:2634: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:2649: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -2658,7 +2673,7 @@ fi\n \n # Is pod2man recent enough to regenerate manpages?\n echo $ac_n \"checking for recent Pod::Man\"\"... $ac_c\" 1>&6\n-echo \"configure:2662: checking for recent Pod::Man\" >&5\n+echo \"configure:2677: checking for recent Pod::Man\" >&5\n if (perl -e 'use 1.10 Pod::Man') >/dev/null 2>&1; then\n   echo \"$ac_t\"\"yes\" 1>&6\n   GENERATED_MANPAGES=generated-manpages\t\t\n@@ -2672,7 +2687,7 @@ fi\n # \"if cmp --ignore-initial=2 t1 t2 && ! cmp --ignore-initial=1 t1 t2\"\n # but we need to sink errors and handle broken shells.\n echo $ac_n \"checking for cmp's capabilities\"\"... $ac_c\" 1>&6\n-echo \"configure:2676: checking for cmp's capabilities\" >&5\n+echo \"configure:2691: checking for cmp's capabilities\" >&5\n echo abfoo >t1\n echo cdfoo >t2\n if cmp --ignore-initial=2 t1 t2 > /dev/null 2>&1; then\n@@ -2695,7 +2710,7 @@ else\n   # Extract the first word of \"flex\", so it can be a program name with args.\n set dummy flex; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2699: checking for $ac_word\" >&5\n+echo \"configure:2714: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_FLEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2732,7 +2747,7 @@ else\n   # Extract the first word of \"bison\", so it can be a program name with args.\n set dummy bison; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2736: checking for $ac_word\" >&5\n+echo \"configure:2751: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_BISON'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2766,12 +2781,12 @@ fi\n # --------------------\n \n echo $ac_n \"checking for GNU C library\"\"... $ac_c\" 1>&6\n-echo \"configure:2770: checking for GNU C library\" >&5\n+echo \"configure:2785: checking for GNU C library\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_glibc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2775 \"configure\"\n+#line 2790 \"configure\"\n #include \"confdefs.h\"\n #include <features.h>\n int main() {\n@@ -2781,7 +2796,7 @@ int main() {\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:2785: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2800: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_glibc=yes\n else\n@@ -2802,20 +2817,20 @@ EOF\n fi\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:2806: checking for ANSI C header files\" >&5\n+echo \"configure:2821: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2811 \"configure\"\n+#line 2826 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2819: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2834: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2832,7 +2847,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2836 \"configure\"\n+#line 2851 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -2850,7 +2865,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2854 \"configure\"\n+#line 2869 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -2871,7 +2886,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2875 \"configure\"\n+#line 2890 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -2882,7 +2897,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:2886: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2901: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2906,12 +2921,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:2910: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:2925: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2915 \"configure\"\n+#line 2930 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -2920,7 +2935,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:2924: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2939: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -2941,19 +2956,19 @@ EOF\n fi\n \n echo $ac_n \"checking for working stdbool.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2945: checking for working stdbool.h\" >&5\n+echo \"configure:2960: checking for working stdbool.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdbool_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2950 \"configure\"\n+#line 2965 \"configure\"\n #include \"confdefs.h\"\n #include <stdbool.h>\n int main() {\n bool foo = false;\n ; return 0; }\n EOF\n-if { (eval echo configure:2957: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2972: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_stdbool_h=yes\n else\n@@ -2974,20 +2989,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether string.h and strings.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:2978: checking whether string.h and strings.h may both be included\" >&5\n+echo \"configure:2993: checking whether string.h and strings.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_string'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2983 \"configure\"\n+#line 2998 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n #include <strings.h>\n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2991: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3006: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_header_string=yes\n else\n@@ -3008,12 +3023,12 @@ EOF\n fi\n \n echo $ac_n \"checking for sys/wait.h that is POSIX.1 compatible\"\"... $ac_c\" 1>&6\n-echo \"configure:3012: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n+echo \"configure:3027: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3017 \"configure\"\n+#line 3032 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/wait.h>\n@@ -3029,7 +3044,7 @@ wait (&s);\n s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;\n ; return 0; }\n EOF\n-if { (eval echo configure:3033: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3048: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_sys_wait_h=yes\n else\n@@ -3056,17 +3071,17 @@ for ac_hdr in limits.h stddef.h string.h strings.h stdlib.h time.h \\\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:3060: checking for $ac_hdr\" >&5\n+echo \"configure:3075: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3065 \"configure\"\n+#line 3080 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3070: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3085: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3096,17 +3111,17 @@ done\n # Check for thread headers.\n ac_safe=`echo \"thread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for thread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3100: checking for thread.h\" >&5\n+echo \"configure:3115: checking for thread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3105 \"configure\"\n+#line 3120 \"configure\"\n #include \"confdefs.h\"\n #include <thread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3110: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3125: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3130,17 +3145,17 @@ fi\n \n ac_safe=`echo \"pthread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for pthread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3134: checking for pthread.h\" >&5\n+echo \"configure:3149: checking for pthread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3139 \"configure\"\n+#line 3154 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:3144: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:3159: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -3165,12 +3180,12 @@ fi\n \n # These tests can't be done till we know if we have limits.h.\n echo $ac_n \"checking for CHAR_BIT\"\"... $ac_c\" 1>&6\n-echo \"configure:3169: checking for CHAR_BIT\" >&5\n+echo \"configure:3184: checking for CHAR_BIT\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_char_bit'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3174 \"configure\"\n+#line 3189 \"configure\"\n #include \"confdefs.h\"\n #ifdef HAVE_LIMITS_H\n #include <limits.h>\n@@ -3195,15 +3210,15 @@ fi\n echo \"$ac_t\"\"$gcc_cv_decl_char_bit\" 1>&6\n if test $gcc_cv_decl_char_bit = no; then\n   echo $ac_n \"checking number of bits in a byte\"\"... $ac_c\" 1>&6\n-echo \"configure:3199: checking number of bits in a byte\" >&5\n+echo \"configure:3214: checking number of bits in a byte\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_nbby'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   i=8\n  gcc_cv_c_nbby=\n  while test $i -lt 65; do\n    cat > conftest.$ac_ext <<EOF\n-#line 3207 \"configure\"\n+#line 3222 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n@@ -3213,7 +3228,7 @@ switch(0) {\n   ; }\n ; return 0; }\n EOF\n-if { (eval echo configure:3217: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3232: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_nbby=$i; break\n else\n@@ -3238,14 +3253,14 @@ EOF\n fi\n fi\n echo $ac_n \"checking whether byte ordering is bigendian\"\"... $ac_c\" 1>&6\n-echo \"configure:3242: checking whether byte ordering is bigendian\" >&5\n+echo \"configure:3257: checking whether byte ordering is bigendian\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_bigendian'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_cv_c_bigendian=unknown\n # See if sys/param.h defines the BYTE_ORDER macro.\n cat > conftest.$ac_ext <<EOF\n-#line 3249 \"configure\"\n+#line 3264 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/param.h>\n@@ -3256,11 +3271,11 @@ int main() {\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:3260: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3275: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   # It does; now see whether it defined to BIG_ENDIAN or not.\n cat > conftest.$ac_ext <<EOF\n-#line 3264 \"configure\"\n+#line 3279 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/param.h>\n@@ -3271,7 +3286,7 @@ int main() {\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:3275: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3290: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_bigendian=yes\n else\n@@ -3291,7 +3306,7 @@ if test \"$cross_compiling\" = yes; then\n    echo $ac_n \"cross-compiling... \" 2>&6 \n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3295 \"configure\"\n+#line 3310 \"configure\"\n #include \"confdefs.h\"\n main () {\n   /* Are we little or big endian?  From Harbison&Steele.  */\n@@ -3304,7 +3319,7 @@ main () {\n   exit (u.c[sizeof (long) - 1] == 1);\n }\n EOF\n-if { (eval echo configure:3308: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3323: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_bigendian=no\n else\n@@ -3322,7 +3337,7 @@ fi\n echo \"$ac_t\"\"$ac_cv_c_bigendian\" 1>&6\n if test $ac_cv_c_bigendian = unknown; then\n echo $ac_n \"checking to probe for byte ordering\"\"... $ac_c\" 1>&6\n-echo \"configure:3326: checking to probe for byte ordering\" >&5\n+echo \"configure:3341: checking to probe for byte ordering\" >&5\n \n cat >conftest.c <<EOF\n short ascii_mm[] = { 0x4249, 0x4765, 0x6E44, 0x6961, 0x6E53, 0x7953, 0 };\n@@ -3402,7 +3417,7 @@ esac\n # These libraries may be used by collect2.\n # We may need a special search path to get them linked.\n echo $ac_n \"checking for collect2 libraries\"\"... $ac_c\" 1>&6\n-echo \"configure:3406: checking for collect2 libraries\" >&5\n+echo \"configure:3421: checking for collect2 libraries\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_collect2_libs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3413,7 +3428,7 @@ for libs in '' -lld -lmld \\\n do\n \tLIBS=\"$libs\"\n \tcat > conftest.$ac_ext <<EOF\n-#line 3417 \"configure\"\n+#line 3432 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3424,7 +3439,7 @@ int main() {\n ldopen()\n ; return 0; }\n EOF\n-if { (eval echo configure:3428: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3443: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   gcc_cv_collect2_libs=\"$libs\"; break\n else\n@@ -3450,14 +3465,14 @@ save_LIBS=\"$LIBS\"\n LIBS=\n \n echo $ac_n \"checking for library containing exc_resume\"\"... $ac_c\" 1>&6\n-echo \"configure:3454: checking for library containing exc_resume\" >&5\n+echo \"configure:3469: checking for library containing exc_resume\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_search_exc_resume'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_func_search_save_LIBS=\"$LIBS\"\n ac_cv_search_exc_resume=\"no\"\n cat > conftest.$ac_ext <<EOF\n-#line 3461 \"configure\"\n+#line 3476 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3468,7 +3483,7 @@ int main() {\n exc_resume()\n ; return 0; }\n EOF\n-if { (eval echo configure:3472: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3487: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_exc_resume=\"none required\"\n else\n@@ -3479,7 +3494,7 @@ rm -f conftest*\n test \"$ac_cv_search_exc_resume\" = \"no\" && for i in exc; do\n LIBS=\"-l$i  $ac_func_search_save_LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3483 \"configure\"\n+#line 3498 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3490,7 +3505,7 @@ int main() {\n exc_resume()\n ; return 0; }\n EOF\n-if { (eval echo configure:3494: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3509: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_exc_resume=\"-l$i\"\n break\n@@ -3520,14 +3535,14 @@ save_LIBS=\"$LIBS\"\n LIBS=\n \n echo $ac_n \"checking for library containing ldexp\"\"... $ac_c\" 1>&6\n-echo \"configure:3524: checking for library containing ldexp\" >&5\n+echo \"configure:3539: checking for library containing ldexp\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_search_ldexp'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_func_search_save_LIBS=\"$LIBS\"\n ac_cv_search_ldexp=\"no\"\n cat > conftest.$ac_ext <<EOF\n-#line 3531 \"configure\"\n+#line 3546 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3538,7 +3553,7 @@ int main() {\n ldexp()\n ; return 0; }\n EOF\n-if { (eval echo configure:3542: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3557: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_ldexp=\"none required\"\n else\n@@ -3549,7 +3564,7 @@ rm -f conftest*\n test \"$ac_cv_search_ldexp\" = \"no\" && for i in m; do\n LIBS=\"-l$i  $ac_func_search_save_LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 3553 \"configure\"\n+#line 3568 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -3560,7 +3575,7 @@ int main() {\n ldexp()\n ; return 0; }\n EOF\n-if { (eval echo configure:3564: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3579: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_ldexp=\"-l$i\"\n break\n@@ -3587,20 +3602,20 @@ LIBS=\"$save_LIBS\"\n # Use <inttypes.h> only if it exists,\n # doesn't clash with <sys/types.h>, and declares intmax_t.\n echo $ac_n \"checking for inttypes.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3591: checking for inttypes.h\" >&5\n+echo \"configure:3606: checking for inttypes.h\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_inttypes_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3596 \"configure\"\n+#line 3611 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <inttypes.h>\n int main() {\n intmax_t i = -1;\n ; return 0; }\n EOF\n-if { (eval echo configure:3604: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3619: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_header_inttypes_h=yes\n else\n@@ -3628,12 +3643,12 @@ for ac_func in times clock dup2 kill getrlimit setrlimit atoll atoq \\\n         setlocale\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:3632: checking for $ac_func\" >&5\n+echo \"configure:3647: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3637 \"configure\"\n+#line 3652 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -3656,7 +3671,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:3660: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:3675: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -3683,15 +3698,15 @@ done\n \n if test x$ac_cv_func_mbstowcs = xyes; then\n   echo $ac_n \"checking whether mbstowcs works\"\"... $ac_c\" 1>&6\n-echo \"configure:3687: checking whether mbstowcs works\" >&5\n+echo \"configure:3702: checking whether mbstowcs works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_mbstowcs_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n       if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_mbstowcs_works=yes\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3695 \"configure\"\n+#line 3710 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n int main()\n@@ -3700,7 +3715,7 @@ int main()\n   return 0;\n }\n EOF\n-if { (eval echo configure:3704: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3719: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_mbstowcs_works=yes\n else\n@@ -3724,12 +3739,12 @@ EOF\n fi\n \n echo $ac_n \"checking for ssize_t\"\"... $ac_c\" 1>&6\n-echo \"configure:3728: checking for ssize_t\" >&5\n+echo \"configure:3743: checking for ssize_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_ssize_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3733 \"configure\"\n+#line 3748 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -3760,12 +3775,12 @@ fi\n # Try to determine the array type of the second argument of getgroups\n # for the target system (int or gid_t).\n echo $ac_n \"checking for uid_t in sys/types.h\"\"... $ac_c\" 1>&6\n-echo \"configure:3764: checking for uid_t in sys/types.h\" >&5\n+echo \"configure:3779: checking for uid_t in sys/types.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_uid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3769 \"configure\"\n+#line 3784 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n EOF\n@@ -3794,15 +3809,15 @@ EOF\n fi\n \n echo $ac_n \"checking type of array argument to getgroups\"\"... $ac_c\" 1>&6\n-echo \"configure:3798: checking type of array argument to getgroups\" >&5\n+echo \"configure:3813: checking type of array argument to getgroups\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_getgroups'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_type_getgroups=cross\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3806 \"configure\"\n+#line 3821 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Rendell for this test.  */\n@@ -3827,7 +3842,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:3831: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3846: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n     ac_cv_type_getgroups=gid_t\n else\n@@ -3841,7 +3856,7 @@ fi\n \n if test $ac_cv_type_getgroups = cross; then\n         cat > conftest.$ac_ext <<EOF\n-#line 3845 \"configure\"\n+#line 3860 \"configure\"\n #include \"confdefs.h\"\n #include <unistd.h>\n EOF\n@@ -3882,15 +3897,15 @@ fi\n \n \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:3886: checking whether the printf functions support %p\" >&5\n+echo \"configure:3901: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3894 \"configure\"\n+#line 3909 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -3903,7 +3918,7 @@ int main()\n   return (p != q);\n }\n EOF\n-if { (eval echo configure:3907: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3922: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -3933,7 +3948,7 @@ if test $ac_cv_header_sys_mman_h != yes \\\n    gcc_cv_func_mmap_anon=no\n else\n    echo $ac_n \"checking whether read-only mmap of a plain file works\"\"... $ac_c\" 1>&6\n-echo \"configure:3937: checking whether read-only mmap of a plain file works\" >&5\n+echo \"configure:3952: checking whether read-only mmap of a plain file works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_mmap_file'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3952,7 +3967,7 @@ fi\n \n echo \"$ac_t\"\"$gcc_cv_func_mmap_file\" 1>&6\n    echo $ac_n \"checking whether mmap from /dev/zero works\"\"... $ac_c\" 1>&6\n-echo \"configure:3956: checking whether mmap from /dev/zero works\" >&5\n+echo \"configure:3971: checking whether mmap from /dev/zero works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_mmap_dev_zero'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3978,12 +3993,12 @@ echo \"$ac_t\"\"$gcc_cv_func_mmap_dev_zero\" 1>&6\n \n    # Unlike /dev/zero, the MAP_ANON(YMOUS) defines can be probed for.\n    echo $ac_n \"checking for MAP_ANON(YMOUS)\"\"... $ac_c\" 1>&6\n-echo \"configure:3982: checking for MAP_ANON(YMOUS)\" >&5\n+echo \"configure:3997: checking for MAP_ANON(YMOUS)\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_map_anon'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3987 \"configure\"\n+#line 4002 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/mman.h>\n@@ -3997,7 +4012,7 @@ int main() {\n int n = MAP_ANONYMOUS;\n ; return 0; }\n EOF\n-if { (eval echo configure:4001: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4016: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_decl_map_anon=yes\n else\n@@ -4015,7 +4030,7 @@ echo \"$ac_t\"\"$gcc_cv_decl_map_anon\" 1>&6\n      gcc_cv_func_mmap_anon=no\n    else\n      echo $ac_n \"checking whether mmap with MAP_ANON(YMOUS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:4019: checking whether mmap with MAP_ANON(YMOUS) works\" >&5\n+echo \"configure:4034: checking whether mmap with MAP_ANON(YMOUS) works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_mmap_anon'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4070,12 +4085,12 @@ case \"${host}\" in\n   ;;\n esac\n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4074: checking for pid_t\" >&5\n+echo \"configure:4089: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4079 \"configure\"\n+#line 4094 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -4104,17 +4119,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:4108: checking for vfork.h\" >&5\n+echo \"configure:4123: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4113 \"configure\"\n+#line 4128 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:4118: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:4133: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -4139,18 +4154,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:4143: checking for working vfork\" >&5\n+echo \"configure:4158: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:4149: checking for vfork\" >&5\n+echo \"configure:4164: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4154 \"configure\"\n+#line 4169 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -4173,7 +4188,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4177: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4192: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -4195,7 +4210,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4199 \"configure\"\n+#line 4214 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -4290,7 +4305,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:4294: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4309: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -4329,15 +4344,15 @@ fi\n \n \n   echo $ac_n \"checking for iconv\"\"... $ac_c\" 1>&6\n-echo \"configure:4333: checking for iconv\" >&5\n+echo \"configure:4348: checking for iconv\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_func_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n     am_cv_func_iconv=\"no, consider installing GNU libiconv\"\n     am_cv_lib_iconv=no\n     cat > conftest.$ac_ext <<EOF\n-#line 4341 \"configure\"\n+#line 4356 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -4347,7 +4362,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n        iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:4351: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4366: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_func_iconv=yes\n else\n@@ -4359,7 +4374,7 @@ rm -f conftest*\n       am_save_LIBS=\"$LIBS\"\n       LIBS=\"$LIBS $am_cv_libiconv_ldpath -liconv\"\n       cat > conftest.$ac_ext <<EOF\n-#line 4363 \"configure\"\n+#line 4378 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <iconv.h>\n@@ -4369,7 +4384,7 @@ iconv_t cd = iconv_open(\"\",\"\");\n          iconv_close(cd);\n ; return 0; }\n EOF\n-if { (eval echo configure:4373: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4388: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_lib_iconv=yes\n         am_cv_func_iconv=yes\n@@ -4390,13 +4405,13 @@ echo \"$ac_t\"\"$am_cv_func_iconv\" 1>&6\n EOF\n \n     echo $ac_n \"checking for iconv declaration\"\"... $ac_c\" 1>&6\n-echo \"configure:4394: checking for iconv declaration\" >&5\n+echo \"configure:4409: checking for iconv declaration\" >&5\n     if eval \"test \\\"`echo '$''{'am_cv_proto_iconv'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n       cat > conftest.$ac_ext <<EOF\n-#line 4400 \"configure\"\n+#line 4415 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdlib.h>\n@@ -4415,7 +4430,7 @@ int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:4419: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4434: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   am_cv_proto_iconv_arg1=\"\"\n else\n@@ -4448,19 +4463,19 @@ LIBICONV_DEP=\n \n \n   echo $ac_n \"checking for LC_MESSAGES\"\"... $ac_c\" 1>&6\n-echo \"configure:4452: checking for LC_MESSAGES\" >&5\n+echo \"configure:4467: checking for LC_MESSAGES\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4457 \"configure\"\n+#line 4472 \"configure\"\n #include \"confdefs.h\"\n #include <locale.h>\n int main() {\n return LC_MESSAGES\n ; return 0; }\n EOF\n-if { (eval echo configure:4464: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:4479: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_val_LC_MESSAGES=yes\n else\n@@ -4491,12 +4506,12 @@ for ac_func in getenv atol sbrk abort atof getcwd getwd \\\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4495: checking whether $ac_func is declared\" >&5\n+echo \"configure:4510: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4500 \"configure\"\n+#line 4515 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4510,7 +4525,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4514: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4529: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4612,12 +4627,12 @@ for ac_func in getrlimit setrlimit getrusage\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4616: checking whether $ac_func is declared\" >&5\n+echo \"configure:4631: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4621 \"configure\"\n+#line 4636 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4635,7 +4650,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4639: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4654: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4674,7 +4689,7 @@ fi\n \n \n cat > conftest.$ac_ext <<EOF\n-#line 4678 \"configure\"\n+#line 4693 \"configure\"\n #include \"confdefs.h\"\n \n #include \"ansidecl.h\"\n@@ -4687,7 +4702,7 @@ int main() {\n rlim_t l = 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:4691: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4706: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   :\n else\n   echo \"configure: failed program was:\" >&5\n@@ -4704,12 +4719,12 @@ for ac_func in ldgetname\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4708: checking whether $ac_func is declared\" >&5\n+echo \"configure:4723: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4713 \"configure\"\n+#line 4728 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4727,7 +4742,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4731: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4746: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4763,12 +4778,12 @@ for ac_func in times\n do\n   ac_tr_decl=HAVE_DECL_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n echo $ac_n \"checking whether $ac_func is declared\"\"... $ac_c\" 1>&6\n-echo \"configure:4767: checking whether $ac_func is declared\" >&5\n+echo \"configure:4782: checking whether $ac_func is declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_have_decl_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4772 \"configure\"\n+#line 4787 \"configure\"\n #include \"confdefs.h\"\n #undef $ac_tr_decl\n #define $ac_tr_decl 1\n@@ -4786,7 +4801,7 @@ char *(*pfn) = (char *(*)) $ac_func ;\n #endif\n ; return 0; }\n EOF\n-if { (eval echo configure:4790: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4805: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_have_decl_$ac_func=yes\"\n else\n@@ -4820,13 +4835,13 @@ fi\n \n # More time-related stuff.\n echo $ac_n \"checking for struct tms\"\"... $ac_c\" 1>&6\n-echo \"configure:4824: checking for struct tms\" >&5\n+echo \"configure:4839: checking for struct tms\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_struct_tms'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n cat > conftest.$ac_ext <<EOF\n-#line 4830 \"configure\"\n+#line 4845 \"configure\"\n #include \"confdefs.h\"\n \n #include \"ansidecl.h\"\n@@ -4839,7 +4854,7 @@ int main() {\n struct tms tms;\n ; return 0; }\n EOF\n-if { (eval echo configure:4843: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4858: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_struct_tms=yes\n else\n@@ -4862,13 +4877,13 @@ fi\n # use gcc_cv_* here because this doesn't match the behavior of AC_CHECK_TYPE.\n # revisit after autoconf 2.50.\n echo $ac_n \"checking for clock_t\"\"... $ac_c\" 1>&6\n-echo \"configure:4866: checking for clock_t\" >&5\n+echo \"configure:4881: checking for clock_t\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_type_clock_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   \n cat > conftest.$ac_ext <<EOF\n-#line 4872 \"configure\"\n+#line 4887 \"configure\"\n #include \"confdefs.h\"\n \n #include \"ansidecl.h\"\n@@ -4878,7 +4893,7 @@ int main() {\n clock_t x;\n ; return 0; }\n EOF\n-if { (eval echo configure:4882: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4897: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_type_clock_t=yes\n else\n@@ -4899,12 +4914,12 @@ EOF\n fi\n \n echo $ac_n \"checking for uchar\"\"... $ac_c\" 1>&6\n-echo \"configure:4903: checking for uchar\" >&5\n+echo \"configure:4918: checking for uchar\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_type_uchar'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4908 \"configure\"\n+#line 4923 \"configure\"\n #include \"confdefs.h\"\n \n #include \"ansidecl.h\"\n@@ -4915,7 +4930,7 @@ if ((uchar *)0) return 0;\n  if (sizeof(uchar)) return 0;\n ; return 0; }\n EOF\n-if { (eval echo configure:4919: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:4934: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_type_uchar=yes\n else\n@@ -4945,23 +4960,23 @@ if test \"${enable_initfini_array+set}\" = set; then\n else\n   \n echo $ac_n \"checking for .preinit_array/.init_array/.fini_array support\"\"... $ac_c\" 1>&6\n-echo \"configure:4949: checking for .preinit_array/.init_array/.fini_array support\" >&5\n+echo \"configure:4964: checking for .preinit_array/.init_array/.fini_array support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_initfini_array'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n     if test \"$cross_compiling\" = yes; then\n   gcc_cv_initfini_array=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4957 \"configure\"\n+#line 4972 \"configure\"\n #include \"confdefs.h\"\n \n static int x = -1;\n int main (void) { return x; }\n int foo (void) { x = 0; }\n int (*fp) (void) __attribute__ ((section (\".init_array\"))) = foo;\n EOF\n-if { (eval echo configure:4965: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:4980: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_initfini_array=yes\n else\n@@ -4989,12 +5004,12 @@ fi\n \n # mkdir takes a single argument on some systems. \n echo $ac_n \"checking if mkdir takes one argument\"\"... $ac_c\" 1>&6\n-echo \"configure:4993: checking if mkdir takes one argument\" >&5\n+echo \"configure:5008: checking if mkdir takes one argument\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_mkdir_takes_one_arg'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 4998 \"configure\"\n+#line 5013 \"configure\"\n #include \"confdefs.h\"\n \n #include <sys/types.h>\n@@ -5011,7 +5026,7 @@ int main() {\n mkdir (\"foo\", 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:5015: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:5030: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_mkdir_takes_one_arg=no\n else\n@@ -5051,22 +5066,22 @@ fi\n \n \n echo $ac_n \"checking for main in -lunwind\"\"... $ac_c\" 1>&6\n-echo \"configure:5055: checking for main in -lunwind\" >&5\n+echo \"configure:5070: checking for main in -lunwind\" >&5\n ac_lib_var=`echo unwind'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lunwind  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5063 \"configure\"\n+#line 5078 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:5070: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5085: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -5361,7 +5376,7 @@ if test -f ../intl/config.intl; then\n   . ../intl/config.intl\n fi\n echo $ac_n \"checking whether NLS is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:5365: checking whether NLS is requested\" >&5\n+echo \"configure:5380: checking whether NLS is requested\" >&5\n if test x\"$USE_NLS\" != xyes; then\n   echo \"$ac_t\"\"no\" 1>&6\n else\n@@ -5372,7 +5387,7 @@ EOF\n \n \n   echo $ac_n \"checking for catalogs to be installed\"\"... $ac_c\" 1>&6\n-echo \"configure:5376: checking for catalogs to be installed\" >&5\n+echo \"configure:5391: checking for catalogs to be installed\" >&5\n   # Look for .po and .gmo files in the source directory.\n   CATALOGS=  \n   XLINGUAS=\n@@ -5422,7 +5437,7 @@ fi\n case $host_os in\n \twin32 | pe | cygwin* | mingw32* | uwin*)\n echo $ac_n \"checking whether windows registry support is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:5426: checking whether windows registry support is requested\" >&5\n+echo \"configure:5441: checking whether windows registry support is requested\" >&5\n if test \"x$enable_win32_registry\" != xno; then\n   cat >> confdefs.h <<\\EOF\n #define ENABLE_WIN32_REGISTRY 1\n@@ -5431,14 +5446,14 @@ EOF\n   echo \"$ac_t\"\"yes\" 1>&6\n   \n echo $ac_n \"checking for library containing RegOpenKeyExA\"\"... $ac_c\" 1>&6\n-echo \"configure:5435: checking for library containing RegOpenKeyExA\" >&5\n+echo \"configure:5450: checking for library containing RegOpenKeyExA\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_search_RegOpenKeyExA'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_func_search_save_LIBS=\"$LIBS\"\n ac_cv_search_RegOpenKeyExA=\"no\"\n cat > conftest.$ac_ext <<EOF\n-#line 5442 \"configure\"\n+#line 5457 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5449,7 +5464,7 @@ int main() {\n RegOpenKeyExA()\n ; return 0; }\n EOF\n-if { (eval echo configure:5453: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5468: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_RegOpenKeyExA=\"none required\"\n else\n@@ -5460,7 +5475,7 @@ rm -f conftest*\n test \"$ac_cv_search_RegOpenKeyExA\" = \"no\" && for i in advapi32; do\n LIBS=\"-l$i  $ac_func_search_save_LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 5464 \"configure\"\n+#line 5479 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -5471,7 +5486,7 @@ int main() {\n RegOpenKeyExA()\n ; return 0; }\n EOF\n-if { (eval echo configure:5475: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:5490: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_search_RegOpenKeyExA=\"-l$i\"\n break\n@@ -5513,7 +5528,7 @@ esac\n \n if test \"x$enable_win32_registry\" != xno; then\n   echo $ac_n \"checking registry key on windows hosts\"\"... $ac_c\" 1>&6\n-echo \"configure:5517: checking registry key on windows hosts\" >&5\n+echo \"configure:5532: checking registry key on windows hosts\" >&5\n   cat >> confdefs.h <<EOF\n #define WIN32_REGISTRY_KEY \"$gcc_cv_win32_registry_key\"\n EOF\n@@ -5723,7 +5738,7 @@ esac\n # build->target assembler and hope that it will have the same features\n # as the host->target assembler we'll be using.\n echo $ac_n \"checking what assembler to use\"\"... $ac_c\" 1>&6\n-echo \"configure:5727: checking what assembler to use\" >&5\n+echo \"configure:5742: checking what assembler to use\" >&5\n in_tree_gas=no\n gcc_cv_as=\n gcc_cv_gas_major_version=\n@@ -5841,7 +5856,7 @@ esac\n # build->target linker and hope that it will have the same features\n # as the host->target linker we'll be using.\n echo $ac_n \"checking what linker to use\"\"... $ac_c\" 1>&6\n-echo \"configure:5845: checking what linker to use\" >&5\n+echo \"configure:5860: checking what linker to use\" >&5\n in_tree_ld=no\n gcc_cv_ld=\n gcc_cv_gld_major_version=\n@@ -5949,7 +5964,7 @@ esac\n # Figure out what nm we will be using.\n gcc_cv_binutils_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/binutils\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:5953: checking what nm to use\" >&5\n+echo \"configure:5968: checking what nm to use\" >&5\n in_tree_nm=no\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n@@ -5972,7 +5987,7 @@ esac\n \n # Figure out what objdump we will be using.\n echo $ac_n \"checking what objdump to use\"\"... $ac_c\" 1>&6\n-echo \"configure:5976: checking what objdump to use\" >&5\n+echo \"configure:5991: checking what objdump to use\" >&5\n in_tree_objdump=no\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n@@ -5997,7 +6012,7 @@ esac\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:6001: checking assembler alignment features\" >&5\n+echo \"configure:6016: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test $in_tree_gas = yes; then\n   # Gas version 2.6 and later support for .balign and .p2align.\n@@ -6058,7 +6073,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:6062: checking assembler subsection support\" >&5\n+echo \"configure:6077: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6106,7 +6121,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:6110: checking assembler weak support\" >&5\n+echo \"configure:6125: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6136,7 +6151,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:6140: checking assembler hidden support\" >&5\n+echo \"configure:6155: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6221,7 +6236,7 @@ libgcc_visibility=$gcc_cv_as_hidden\n \n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n-echo \"configure:6225: checking assembler leb128 support\" >&5\n+echo \"configure:6240: checking assembler leb128 support\" >&5\n gcc_cv_as_leb128=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6273,7 +6288,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_leb128\" 1>&6\n \n echo $ac_n \"checking assembler eh_frame optimization\"\"... $ac_c\" 1>&6\n-echo \"configure:6277: checking assembler eh_frame optimization\" >&5\n+echo \"configure:6292: checking assembler eh_frame optimization\" >&5\n gcc_cv_as_eh_frame=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6361,7 +6376,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_eh_frame\" 1>&6\n \n echo $ac_n \"checking assembler section merging support\"\"... $ac_c\" 1>&6\n-echo \"configure:6365: checking assembler section merging support\" >&5\n+echo \"configure:6380: checking assembler section merging support\" >&5\n gcc_cv_as_shf_merge=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6391,7 +6406,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_shf_merge\" 1>&6\n \n echo $ac_n \"checking assembler thread-local storage support\"\"... $ac_c\" 1>&6\n-echo \"configure:6395: checking assembler thread-local storage support\" >&5\n+echo \"configure:6410: checking assembler thread-local storage support\" >&5\n gcc_cv_as_tls=no\n conftest_s=\n tls_first_major=\n@@ -6601,7 +6616,7 @@ case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)\n     echo $ac_n \"checking assembler supports explicit relocations\"\"... $ac_c\" 1>&6\n-echo \"configure:6605: checking assembler supports explicit relocations\" >&5\n+echo \"configure:6620: checking assembler supports explicit relocations\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_explicit_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6654,7 +6669,7 @@ EOF\n     ;;\n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:6658: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:6673: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6682,7 +6697,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:6686: checking assembler supports -relax\" >&5\n+echo \"configure:6701: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6710,7 +6725,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs\"\"... $ac_c\" 1>&6\n-echo \"configure:6714: checking assembler and linker support unaligned pc related relocs\" >&5\n+echo \"configure:6729: checking assembler and linker support unaligned pc related relocs\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6737,7 +6752,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs against hidden symbols\"\"... $ac_c\" 1>&6\n-echo \"configure:6741: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n+echo \"configure:6756: checking assembler and linker support unaligned pc related relocs against hidden symbols\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel_hidden'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6777,7 +6792,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:6781: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:6796: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6816,7 +6831,7 @@ EOF\n \n   i[34567]86-*-* | x86_64-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:6820: checking assembler instructions\" >&5\n+echo \"configure:6835: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test $in_tree_gas = yes ; then \n        if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6850,7 +6865,7 @@ EOF\n     echo \"$ac_t\"\"$gcc_cv_as_instructions\" 1>&6\n \n     echo $ac_n \"checking assembler GOTOFF in data directives\"\"... $ac_c\" 1>&6\n-echo \"configure:6854: checking assembler GOTOFF in data directives\" >&5\n+echo \"configure:6869: checking assembler GOTOFF in data directives\" >&5\n     gcc_cv_as_gotoff_in_data=no\n     if test $in_tree_gas = yes ; then\n        if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -6884,7 +6899,7 @@ EOF\n \n   ia64*-*-*)\n     echo $ac_n \"checking assembler supports ltoffx and ldxmov\"\"... $ac_c\" 1>&6\n-echo \"configure:6888: checking assembler supports ltoffx and ldxmov\" >&5\n+echo \"configure:6903: checking assembler supports ltoffx and ldxmov\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_ltoffx_ldxmov_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6928,7 +6943,7 @@ EOF\n     ;;\n   powerpc*-*-*)\n     echo $ac_n \"checking assembler supports mfcr field\"\"... $ac_c\" 1>&6\n-echo \"configure:6932: checking assembler supports mfcr field\" >&5\n+echo \"configure:6947: checking assembler supports mfcr field\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_mfcrf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6978,7 +6993,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:6982: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:6997: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -7042,7 +7057,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_dwarf2_debug_line\" 1>&6\n \n echo $ac_n \"checking assembler --gdwarf2 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7046: checking assembler --gdwarf2 support\" >&5\n+echo \"configure:7061: checking assembler --gdwarf2 support\" >&5\n gcc_cv_as_gdwarf2_flag=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -7074,7 +7089,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gdwarf2_flag\" 1>&6\n \n echo $ac_n \"checking assembler --gstabs support\"\"... $ac_c\" 1>&6\n-echo \"configure:7078: checking assembler --gstabs support\" >&5\n+echo \"configure:7093: checking assembler --gstabs support\" >&5\n gcc_cv_as_gstabs_flag=no\n if test $in_tree_gas = yes ; then\n    if test $gcc_cv_gas_major_version -eq 2 \\\n@@ -7112,7 +7127,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gstabs_flag\" 1>&6\n \n echo $ac_n \"checking linker read-only and read-write section mixing\"\"... $ac_c\" 1>&6\n-echo \"configure:7116: checking linker read-only and read-write section mixing\" >&5\n+echo \"configure:7131: checking linker read-only and read-write section mixing\" >&5\n gcc_cv_ld_ro_rw_mix=unknown\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 10 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n@@ -7151,7 +7166,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_ld_ro_rw_mix\" 1>&6\n \n echo $ac_n \"checking linker PT_GNU_EH_FRAME support\"\"... $ac_c\" 1>&6\n-echo \"configure:7155: checking linker PT_GNU_EH_FRAME support\" >&5\n+echo \"configure:7170: checking linker PT_GNU_EH_FRAME support\" >&5\n gcc_cv_ld_eh_frame_hdr=no\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 12 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n@@ -7173,7 +7188,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_ld_eh_frame_hdr\" 1>&6\n \n echo $ac_n \"checking linker position independent executable support\"\"... $ac_c\" 1>&6\n-echo \"configure:7177: checking linker position independent executable support\" >&5\n+echo \"configure:7192: checking linker position independent executable support\" >&5\n gcc_cv_ld_pie=no\n if test $in_tree_ld = yes ; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 15 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n@@ -7198,7 +7213,7 @@ echo \"$ac_t\"\"$gcc_cv_ld_pie\" 1>&6\n case \"$target\" in\n   mips*-*-*)\n     echo $ac_n \"checking whether libgloss uses STARTUP directives consistently\"\"... $ac_c\" 1>&6\n-echo \"configure:7202: checking whether libgloss uses STARTUP directives consistently\" >&5\n+echo \"configure:7217: checking whether libgloss uses STARTUP directives consistently\" >&5\n     gcc_cv_mips_libgloss_startup=no\n     gcc_cv_libgloss_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/libgloss\n     if test \"x$exec_prefix\" = xNONE; then\n@@ -7226,7 +7241,7 @@ EOF\n     echo \"$ac_t\"\"$gcc_cv_mips_libgloss_startup\" 1>&6\n \n     echo $ac_n \"checking whether the assembler has explicit relocation support\"\"... $ac_c\" 1>&6\n-echo \"configure:7230: checking whether the assembler has explicit relocation support\" >&5\n+echo \"configure:7245: checking whether the assembler has explicit relocation support\" >&5\n     if test x$gcc_cv_mips_explicit_relocs = x; then\n       gcc_cv_mips_explicit_relocs=no\n       if test $in_tree_gas = yes; then\n@@ -7432,7 +7447,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:7436: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:7451: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -7939,6 +7954,7 @@ s%@enable_shared@%$enable_shared%g\n s%@TARGET_SYSTEM_ROOT@%$TARGET_SYSTEM_ROOT%g\n s%@TARGET_SYSTEM_ROOT_DEFINE@%$TARGET_SYSTEM_ROOT_DEFINE%g\n s%@CROSS_SYSTEM_HEADER_DIR@%$CROSS_SYSTEM_HEADER_DIR%g\n+s%@onestep@%$onestep%g\n s%@SET_MAKE@%$SET_MAKE%g\n s%@AWK@%$AWK%g\n s%@LN@%$LN%g"}, {"sha": "5207e4cf49f165722fff1e5a6da83e8fd19fee2d", "filename": "gcc/configure.in", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -569,6 +569,16 @@ AC_SUBST(TARGET_SYSTEM_ROOT)\n AC_SUBST(TARGET_SYSTEM_ROOT_DEFINE)\n AC_SUBST(CROSS_SYSTEM_HEADER_DIR)\n \n+# Build with intermodule optimisations\n+local_prefix=\n+AC_ARG_ENABLE(intermodule,\n+[  --enable-intermodule    build the compiler in one step],\n+[case \"${enable_intermodule}\" in\n+  yes) onestep=-onestep : ;;\n+  *) onestep= : ;;\n+esac])\n+AC_SUBST(onestep)\n+\n # -------------------------\n # Checks for other programs\n # -------------------------"}, {"sha": "dfeaa4ac27f03a0b382e143c7cf501b7fb50bf1c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -1,3 +1,11 @@\n+2003-07-11  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* decl.c (cp_finish_decl): Handle 'used' attribute.\n+\n+\t* cp-lang.c (c_reset_state): New dummy routine.\n+\t* cp-tree.h (finish_file): Move prototype to c-common.h.\n+\t* parser.c (c_parse_file): Rename from yyparse; don't call finish_file.\n+\n 2003-07-11  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/8327"}, {"sha": "3c687113b951c5365f1c624b5a4468ecf1147d78", "filename": "gcc/cp/cp-lang.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fcp-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fcp-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-lang.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -372,3 +372,9 @@ cp_var_mod_type_p (tree type)\n   return false;\n }\n \n+/* Stub routine to tell people that this doesn't work yet.  */\n+void\n+c_reset_state (void)\n+{\n+  sorry (\"inter-module optimisations not implemented yet\");\n+}"}, {"sha": "c713191360eff811eb8776733672869e3032d7f4", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -3773,7 +3773,6 @@ extern void comdat_linkage (tree);\n extern void import_export_vtable (tree, tree, int);\n extern void import_export_decl (tree);\n extern void import_export_tinfo\t(tree, tree, bool);\n-extern void finish_file\t\t\t\t(void);\n extern tree build_cleanup\t\t\t(tree);\n extern tree build_offset_ref_call_from_tree     (tree, tree);\n extern void set_decl_namespace (tree, tree, bool);"}, {"sha": "be2846b7d07ba9e67da3191ac5bfdbce61ca1ba2", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -8259,6 +8259,10 @@ cp_finish_decl (tree decl, tree init, tree asmspec_tree, int flags)\n \n   if (was_readonly)\n     TREE_READONLY (decl) = 1;\n+\n+  /* If this was marked 'used', be sure it will be output.  */\n+  if (lookup_attribute (\"used\", DECL_ATTRIBUTES (decl)))\n+    mark_referenced (DECL_ASSEMBLER_NAME (decl));\n }\n \n /* This is here for a midend callback from c-common.c */"}, {"sha": "da8eb085096187b637adfd60684527029938503b", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 7, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -14617,10 +14617,10 @@ static GTY (()) cp_parser *the_parser;\n \n /* External interface.  */\n \n-/* Parse the entire translation unit.  */\n+/* Parse one entire translation unit.  */\n \n-int\n-yyparse (void)\n+void\n+c_parse_file (void)\n {\n   bool error_occurred;\n \n@@ -14629,10 +14629,6 @@ yyparse (void)\n \t\t\t\t? dk_no_deferred : dk_no_check);\n   error_occurred = cp_parser_translation_unit (the_parser);\n   the_parser = NULL;\n-  \n-  finish_file ();\n-\n-  return error_occurred;\n }\n \n /* Clean up after parsing the entire translation unit.  */"}, {"sha": "f12cf1cc3472923e989654ff6fb5238d64e428dc", "filename": "gcc/cppinit.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcppinit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcppinit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppinit.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -427,6 +427,15 @@ cpp_add_dependency_target (cpp_reader *pfile, const char *target, int quote)\n   deps_add_target (pfile->deps, target, quote);\n }\n \n+/* This sets up for processing input from the file FNAME.  \n+   It returns false on error.  */\n+bool\n+cpp_read_next_file (cpp_reader *pfile, const char *fname)\n+{\n+  /* Open the main input file.  */\n+  return _cpp_read_file (pfile, fname);\n+}\n+\n /* This is called after options have been parsed, and partially\n    processed.  Setup for processing input from the file named FNAME,\n    or stdin if it is the empty string.  Return the original filename\n@@ -451,9 +460,8 @@ cpp_read_main_file (cpp_reader *pfile, const char *fname)\n       deps_add_default_target (pfile->deps, fname);\n     }\n \n-  /* Open the main input file.  */\n   pfile->line = 1;\n-  if (!_cpp_read_file (pfile, fname))\n+  if (!cpp_read_next_file (pfile, fname))\n     return NULL;\n \n   /* Set this here so the client can change the option if it wishes,"}, {"sha": "f0096812c08e87925e3ee3087c5393a678670a34", "filename": "gcc/cpplib.c", "status": "modified", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -109,6 +109,7 @@ static unsigned int read_flag (cpp_reader *, unsigned int);\n static int strtoul_for_line (const uchar *, unsigned int, unsigned long *);\n static void do_diagnostic (cpp_reader *, int, int);\n static cpp_hashnode *lex_macro_node (cpp_reader *);\n+static int undefine_macros (cpp_reader *, cpp_hashnode *, void *);\n static void do_include_common (cpp_reader *, enum include_type);\n static struct pragma_entry *lookup_pragma_entry (struct pragma_entry *,\n                                                  const cpp_hashnode *);\n@@ -540,6 +541,45 @@ do_undef (cpp_reader *pfile)\n   check_eol (pfile);\n }\n \n+/* Undefine a single macro/assertion/whatever.  */\n+\n+static int\n+undefine_macros (cpp_reader *pfile, cpp_hashnode *h, \n+\t\t void *data_p ATTRIBUTE_UNUSED)\n+{\n+  switch (h->type)\n+    {\n+    case NT_VOID:\n+      break;\n+      \n+    case NT_MACRO:\n+      if (pfile->cb.undef)\n+        (*pfile->cb.undef) (pfile, pfile->directive_line, h);\n+\n+      if (CPP_OPTION (pfile, warn_unused_macros))\n+        _cpp_warn_if_unused_macro (pfile, h, NULL);\n+\n+      /* and fall through... */\n+    case NT_ASSERTION:\n+      _cpp_free_definition (h);\n+      break;\n+\n+    default:\n+      abort ();\n+    }\n+  h->flags &= ~NODE_POISONED;\n+  return 1;\n+}\n+\n+/* Undefine all macros and assertions.  */\n+\n+void\n+cpp_undef_all (cpp_reader *pfile)\n+{\n+  cpp_forall_identifiers (pfile, undefine_macros, NULL);\n+}\n+\n+\n /* Helper routine used by parse_include.  Reinterpret the current line\n    as an h-char-sequence (< ... >); we are looking at the first token\n    after the <.  Returns a malloced filename.  */"}, {"sha": "661bbe5467d47e2bed79fca7ae593d23ed1fcee8", "filename": "gcc/cpplib.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcpplib.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fcpplib.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -535,6 +535,10 @@ extern void cpp_set_callbacks (cpp_reader *, cpp_callbacks *);\n    too.  If there was an error opening the file, it returns NULL.  */\n extern const char *cpp_read_main_file (cpp_reader *, const char *);\n \n+/* This continues processing to a new file.  It will return false if\n+   there was an error opening the file.  */\n+extern bool cpp_read_next_file (cpp_reader *, const char *);\n+\n /* Set up built-ins like __FILE__.  */\n extern void cpp_init_builtins (cpp_reader *, int);\n \n@@ -584,6 +588,9 @@ extern void cpp_assert (cpp_reader *, const char *);\n extern void cpp_undef (cpp_reader *, const char *);\n extern void cpp_unassert (cpp_reader *, const char *);\n \n+/* Undefine all macros and assertions.  */\n+extern void cpp_undef_all (cpp_reader *);\n+\n extern cpp_buffer *cpp_push_buffer (cpp_reader *, const unsigned char *,\n \t\t\t\t    size_t, int, int);\n extern int cpp_defined (cpp_reader *, const unsigned char *, int);"}, {"sha": "022050494d43f9dbc4d0410c5c6259673ade62a3", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 20, "deletions": 9, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -710,10 +710,12 @@ in the following sections.\n @section Options Controlling the Kind of Output\n \n Compilation can involve up to four stages: preprocessing, compilation\n-proper, assembly and linking, always in that order.  The first three\n-stages apply to an individual source file, and end by producing an\n-object file; linking combines all the object files (those newly\n-compiled, and those specified as input) into an executable file.\n+proper, assembly and linking, always in that order.  GCC is capable of\n+preprocessing and compiling several files either into several\n+assembler input files, or into one assembler input file; then each\n+assembler input file produces an object file, and linking combines all\n+the object files (those newly compiled, and those specified as input)\n+into an executable file.\n \n @cindex file name suffix\n For any given input file, the file name suffix determines what kind of\n@@ -885,9 +887,9 @@ Place output in file @var{file}.  This applies regardless to whatever\n sort of output is being produced, whether it be an executable file,\n an object file, an assembler file or preprocessed C code.\n \n-Since only one output file can be specified, it does not make sense to\n-use @option{-o} when compiling more than one input file, unless you are\n-producing an executable file as output.\n+If you specify @option{-o} when compiling more than one input file, or\n+you are producing an executable file as output, all the source files\n+on the command line will be compiled at once.\n \n If @option{-o} is not specified, the default is to put an executable file\n in @file{a.out}, the object file for @file{@var{source}.@var{suffix}} in\n@@ -3471,6 +3473,14 @@ Turning on optimization flags makes the compiler attempt to improve\n the performance and/or code size at the expense of compilation time\n and possibly the ability to debug the program.\n \n+The compiler performs optimisation based on the knowledge it has of\n+the program.  Using the @option{-funit-at-a-time} flag will allow the\n+compiler to consider information gained from later functions in the\n+file when compiling a function.  Compiling multiple files at once to a\n+single output file (and using @option{-funit-at-a-time}) will allow\n+the compiler to use information gained from all of the files when\n+compiling each of them.\n+\n Not all optimizations are controlled directly by a flag.  Only\n optimizations that have a flag are listed.\n \n@@ -4362,8 +4372,9 @@ better job.\n \n @item -funit-at-a-time\n @opindex funit-at-a-time\n-Parse the whole compilation unit before starting to produce code.  This allows some\n-extra optimizations to take place but consumes more memory.\n+Parse the whole compilation unit before starting to produce code.\n+This allows some extra optimizations to take place but consumes more\n+memory.\n \n @item -funroll-loops\n @opindex funroll-loops"}, {"sha": "cd6a3f59b7313e5c33b7059257c160e27d7f7bac", "filename": "gcc/gcc.c", "status": "modified", "additions": 42, "deletions": 8, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -2891,6 +2891,11 @@ static struct infile *infiles;\n \n int n_infiles;\n \n+/* True if multiple input files are being compiled to a single\n+   assembly file.  */\n+\n+static bool combine_inputs;\n+\n /* This counts the number of libraries added by lang_specific_driver, so that\n    we can tell if there were any user supplied any files or libraries.  */\n \n@@ -3715,8 +3720,7 @@ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\\n\\n\"\n \t}\n     }\n \n-  if (have_c && have_o && lang_n_infiles > 1)\n-    fatal (\"cannot specify -o with -c or -S and multiple compilations\");\n+  combine_inputs = (have_c && have_o && lang_n_infiles > 1);\n \n   if ((save_temps_flag || report_times) && use_pipes)\n     {\n@@ -4760,8 +4764,16 @@ do_spec_1 (const char *spec, int inswitch, const char *soft_matched_part)\n \t    break;\n \n \t  case 'i':\n-\t    obstack_grow (&obstack, input_filename, input_filename_length);\n-\t    arg_going = 1;\n+\t    if (combine_inputs)\n+\t      {\n+\t\tfor (i = 0; (int) i < n_infiles; i++)\n+\t\t  store_arg (infiles[i].name, 0, 0);\n+\t      }\n+\t    else\n+\t      {\n+\t\tobstack_grow (&obstack, input_filename, input_filename_length);\n+\t\targ_going = 1;\n+\t      }\n \t    break;\n \n \t  case 'I':\n@@ -6291,7 +6303,28 @@ main (int argc, const char *const *argv)\n \n   explicit_link_files = xcalloc (1, n_infiles);\n \n-  for (i = 0; (int) i < n_infiles; i++)\n+  if (combine_inputs)\n+    {\n+       int lang_n_infiles = 0;\n+       for (i = 0; (int) i < n_infiles; i++)\n+\t {\n+\t   const char *name = infiles[i].name;\n+\t   struct compiler *compiler\n+\t     = lookup_compiler (name, strlen (name), infiles[i].language);\n+\t   if (compiler == NULL)\n+\t     error (\"%s: linker input file unused because linking not done\",\n+\t\t    name);\n+\t   else if (lang_n_infiles > 0 && compiler != input_file_compiler)\n+\t     fatal (\"cannot specify -o with -c or -S and multiple languages\");\n+\t   else\n+\t     {\n+\t       lang_n_infiles++;\n+\t       input_file_compiler = compiler;\n+\t     }\n+\t }\n+    }\n+  \n+  for (i = 0; (int) i < (combine_inputs ? 1 : n_infiles); i++)\n     {\n       int this_file_error = 0;\n \n@@ -6306,9 +6339,10 @@ main (int argc, const char *const *argv)\n \n       /* Figure out which compiler from the file's suffix.  */\n \n-      input_file_compiler\n-\t= lookup_compiler (infiles[i].name, input_filename_length,\n-\t\t\t   infiles[i].language);\n+      if (! combine_inputs)\n+\tinput_file_compiler\n+\t  = lookup_compiler (infiles[i].name, input_filename_length,\n+\t\t\t     infiles[i].language);\n \n       if (input_file_compiler)\n \t{"}, {"sha": "864cff9e150908c91c023bd16aa36cd0bede37ed", "filename": "gcc/langhooks-def.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Flanghooks-def.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Flanghooks-def.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks-def.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -80,8 +80,6 @@ extern int lhd_tree_inlining_start_inlining (tree);\n extern void lhd_tree_inlining_end_inlining (tree);\n extern tree lhd_tree_inlining_convert_parm_for_inlining (tree, tree, tree);\n \n-extern void write_global_declarations (void);\n-\n #define LANG_HOOKS_NAME\t\t\t\"GNU unknown\"\n #define LANG_HOOKS_IDENTIFIER_SIZE\tsizeof (struct lang_identifier)\n #define LANG_HOOKS_INIT\t\t\thook_bool_void_false"}, {"sha": "f7f07f9d102c72971d3eacd83b36db7cbea459c0", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -3521,7 +3521,7 @@ check_ivars (inter, imp)\n \n       t1 = TREE_TYPE (intdecls); t2 = TREE_TYPE (impdecls);\n \n-      if (!comptypes (t1, t2))\n+      if (!comptypes (t1, t2, false))\n \t{\n \t  if (DECL_NAME (intdecls) == DECL_NAME (impdecls))\n \t    {\n@@ -4905,7 +4905,7 @@ finish_message_expr (receiver, sel_name, method_params)\n \t;\n       else if (! IS_ID (rtype)\n \t       /* Allow any type that matches objc_class_type.  */\n-\t       && ! comptypes (rtype, objc_class_type))\n+\t       && ! comptypes (rtype, objc_class_type, false))\n \t{\n \t  warning (\"invalid receiver type `%s'\",\n \t\t   gen_declaration (rtype, errbuf));\n@@ -7064,7 +7064,8 @@ comp_method_with_proto (method, proto)\n   /* install return type */\n   TREE_TYPE (function1_template) = groktypename (TREE_TYPE (proto));\n \n-  return comptypes (TREE_TYPE (METHOD_DEFINITION (method)), function1_template);\n+  return comptypes (TREE_TYPE (METHOD_DEFINITION (method)), function1_template,\n+\t\t    false);\n }\n \n /* Return 1 if PROTO1 is consistent with PROTO2.  */\n@@ -7087,7 +7088,7 @@ comp_proto_with_proto (proto0, proto1)\n   TREE_TYPE (function1_template) = groktypename (TREE_TYPE (proto0));\n   TREE_TYPE (function2_template) = groktypename (TREE_TYPE (proto1));\n \n-  return comptypes (function1_template, function2_template);\n+  return comptypes (function1_template, function2_template, false);\n }\n \n /* - Generate an identifier for the function. the format is \"_n_cls\","}, {"sha": "a5d0c532e3aacbc4467e2bf9057653b9ef03a5b9", "filename": "gcc/toplev.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftoplev.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftoplev.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -91,6 +91,7 @@ extern void fnotice\t\t\t(FILE *, const char *, ...)\n \n extern int wrapup_global_declarations (tree *, int);\n extern void check_global_declarations (tree *, int);\n+extern void write_global_declarations (void);\n \n /* A unique local time stamp, might be zero if none is available.  */\n extern unsigned local_tick;"}, {"sha": "2f870337428b81a46dbde5b2f5a9f3cac39ff0fb", "filename": "gcc/tree.c", "status": "modified", "additions": 18, "deletions": 14, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -4370,26 +4370,30 @@ decl_type_context (tree decl)\n   tree context = DECL_CONTEXT (decl);\n \n   while (context)\n-    {\n-      if (TREE_CODE (context) == NAMESPACE_DECL)\n+    switch (TREE_CODE (context))\n+      {\n+      case NAMESPACE_DECL:\n+      case TRANSLATION_UNIT_DECL:\n \treturn NULL_TREE;\n \n-      if (TREE_CODE (context) == RECORD_TYPE\n-\t  || TREE_CODE (context) == UNION_TYPE\n-\t  || TREE_CODE (context) == QUAL_UNION_TYPE)\n+      case RECORD_TYPE:\n+      case UNION_TYPE:\n+      case QUAL_UNION_TYPE:\n \treturn context;\n-\n-      if (TREE_CODE (context) == TYPE_DECL\n-\t  || TREE_CODE (context) == FUNCTION_DECL)\n+\t\n+      case TYPE_DECL:\n+      case FUNCTION_DECL:\n \tcontext = DECL_CONTEXT (context);\n-\n-      else if (TREE_CODE (context) == BLOCK)\n+\tbreak;\n+\t\n+      case BLOCK:\n \tcontext = BLOCK_SUPERCONTEXT (context);\n-\n-      else\n-\t/* Unhandled CONTEXT!?  */\n+\tbreak;\n+\t\n+      default:\n \tabort ();\n-    }\n+      }\n+\n   return NULL_TREE;\n }\n "}, {"sha": "a62206f33fbaca6f5495c062c0e64751497b31fa", "filename": "gcc/tree.def", "status": "modified", "additions": 19, "deletions": 14, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftree.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftree.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.def?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -277,17 +277,18 @@ DEFTREECODE (VECTOR_CST, \"vector_cst\", 'c', 0)\n /* Contents are TREE_STRING_LENGTH and TREE_STRING_POINTER fields. */\n DEFTREECODE (STRING_CST, \"string_cst\", 'c', 0)\n \n-/* Declarations.  All references to names are represented as ..._DECL nodes.\n-   The decls in one binding context are chained through the TREE_CHAIN field.\n-   Each DECL has a DECL_NAME field which contains an IDENTIFIER_NODE.\n-    (Some decls, most often labels, may have zero as the DECL_NAME).\n-   DECL_CONTEXT points to the node representing the context in which\n-    this declaration has its scope.  For FIELD_DECLs, this is the\n-    RECORD_TYPE, UNION_TYPE, or QUAL_UNION_TYPE node that the field\n-    is a member of.  For VAR_DECL, PARM_DECL, FUNCTION_DECL, LABEL_DECL,\n-    and CONST_DECL nodes, this points to either the FUNCTION_DECL for the\n-    containing function, the RECORD_TYPE or UNION_TYPE for the containing\n-    type, or NULL_TREE if the given decl has \"file scope\".\n+/* Declarations.  All references to names are represented as ..._DECL\n+   nodes.  The decls in one binding context are chained through the\n+   TREE_CHAIN field.  Each DECL has a DECL_NAME field which contains\n+   an IDENTIFIER_NODE.  (Some decls, most often labels, may have zero\n+   as the DECL_NAME).  DECL_CONTEXT points to the node representing\n+   the context in which this declaration has its scope.  For\n+   FIELD_DECLs, this is the RECORD_TYPE, UNION_TYPE, or\n+   QUAL_UNION_TYPE node that the field is a member of.  For VAR_DECL,\n+   PARM_DECL, FUNCTION_DECL, LABEL_DECL, and CONST_DECL nodes, this\n+   points to either the FUNCTION_DECL for the containing function, the\n+   RECORD_TYPE or UNION_TYPE for the containing type, or NULL_TREE or\n+   a TRANSLATION_UNIT_DECL if the given decl has \"file scope\".\n    DECL_ABSTRACT_ORIGIN, if non-NULL, points to the original (abstract)\n     ..._DECL node of which this decl is an (inlined or template expanded)\n     instance.\n@@ -298,9 +299,9 @@ DEFTREECODE (STRING_CST, \"string_cst\", 'c', 0)\n     and DECL_MODE fields exist in decl nodes just as in type nodes.\n     They are unused in LABEL_DECL, TYPE_DECL and CONST_DECL nodes.\n \n-   DECL_OFFSET holds an integer number of bits offset for the location.\n-   DECL_VOFFSET holds an expression for a variable offset; it is\n-   to be multiplied by DECL_VOFFSET_UNIT (an integer).\n+   DECL_FIELD_BIT_OFFSET holds an integer number of bits offset for\n+   the location.  DECL_VOFFSET holds an expression for a variable\n+   offset; it is to be multiplied by DECL_VOFFSET_UNIT (an integer).\n    These fields are relevant only in FIELD_DECLs and PARM_DECLs.\n \n    DECL_INITIAL holds the value to initialize a variable to,\n@@ -346,6 +347,10 @@ DEFTREECODE (FIELD_DECL, \"field_decl\", 'd', 0)\n /* A namespace declaration.  Namespaces appear in DECL_CONTEXT of other\n    _DECLs, providing a hierarchy of names.  */\n DEFTREECODE (NAMESPACE_DECL, \"namespace_decl\", 'd', 0)\n+\n+/* A translation unit.  This is not technically a declaration, since it\n+   can't be looked up, but it's close enough.  */\n+DEFTREECODE (TRANSLATION_UNIT_DECL, \"translation_unit_decl\", 'd', 0)\n \f\n /* References to storage.  */\n "}, {"sha": "803004cb90c00d9a8af730a88643ce7ad5855f2b", "filename": "gcc/tree.h", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1bd0ded61f9444ff6350fc7db89d04e72ca1108/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=d1bd0ded61f9444ff6350fc7db89d04e72ca1108", "patch": "@@ -1253,12 +1253,13 @@ struct tree_type GTY(())\n    the name from decl_attributes to make_function_rtl and make_decl_rtl.  */\n #define DECL_SECTION_NAME(NODE) (DECL_CHECK (NODE)->decl.section_name)\n \n-/*  For FIELD_DECLs, this is the\n-    RECORD_TYPE, UNION_TYPE, or QUAL_UNION_TYPE node that the field is\n-    a member of.  For VAR_DECL, PARM_DECL, FUNCTION_DECL, LABEL_DECL,\n-    and CONST_DECL nodes, this points to either the FUNCTION_DECL for the\n-    containing function, the RECORD_TYPE or UNION_TYPE for the containing\n-    type, or NULL_TREE if the given decl has \"file scope\".  */\n+/*  For FIELD_DECLs, this is the RECORD_TYPE, UNION_TYPE, or\n+    QUAL_UNION_TYPE node that the field is a member of.  For VAR_DECL,\n+    PARM_DECL, FUNCTION_DECL, LABEL_DECL, and CONST_DECL nodes, this\n+    points to either the FUNCTION_DECL for the containing function,\n+    the RECORD_TYPE or UNION_TYPE for the containing type, or\n+    NULL_TREE or a TRANSLATION_UNIT_DECL if the given decl has \"file\n+    scope\".  */\n #define DECL_CONTEXT(NODE) (DECL_CHECK (NODE)->decl.context)\n #define DECL_FIELD_CONTEXT(NODE) (FIELD_DECL_CHECK (NODE)->decl.context)\n /* In a DECL this is the field where attributes are stored.  */\n@@ -1287,6 +1288,7 @@ struct tree_type GTY(())\n /* In PARM_DECL, holds the type as written (perhaps a function or array).  */\n #define DECL_ARG_TYPE_AS_WRITTEN(NODE) (PARM_DECL_CHECK (NODE)->decl.result)\n /* For a FUNCTION_DECL, holds the tree of BINDINGs.\n+   For a TRANSLATION_UNIT_DECL, holds the namespace's BLOCK.\n    For a VAR_DECL, holds the initial value.\n    For a PARM_DECL, not used--default\n    values for parameters are encoded in the type of the function,"}]}