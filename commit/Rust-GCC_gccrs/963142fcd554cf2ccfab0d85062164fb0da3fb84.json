{"sha": "963142fcd554cf2ccfab0d85062164fb0da3fb84", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTYzMTQyZmNkNTU0Y2YyY2NmYWIwZDg1MDYyMTY0ZmIwZGEzZmI4NA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2003-03-21T07:04:07Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2003-03-21T07:04:07Z"}, "message": "decl2.c (arg_assoc_class): Correct check for namespace-scope friends.\n\n\t* cp/decl2.c (arg_assoc_class): Correct check for namespace-scope\n\tfriends.\n\t* cp/pt.c (instantiate_class_template): Fix formatting.\n\n\t* g++.dg/template/friend17.C: New test.\n\nFrom-SVN: r64645", "tree": {"sha": "a469b17f94bb3b43828f058644f21f564345c6fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a469b17f94bb3b43828f058644f21f564345c6fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/963142fcd554cf2ccfab0d85062164fb0da3fb84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/963142fcd554cf2ccfab0d85062164fb0da3fb84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/963142fcd554cf2ccfab0d85062164fb0da3fb84", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/963142fcd554cf2ccfab0d85062164fb0da3fb84/comments", "author": null, "committer": null, "parents": [{"sha": "f3cd0185705330987114d311f0c3d9a172c543fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3cd0185705330987114d311f0c3d9a172c543fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3cd0185705330987114d311f0c3d9a172c543fb"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "9b0eaf1b39ce1b749bf9058a21a8e977efb029aa", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=963142fcd554cf2ccfab0d85062164fb0da3fb84", "patch": "@@ -1,3 +1,9 @@\n+2003-03-20  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* cp/decl2.c (arg_assoc_class): Correct check for namespace-scope\n+\tfriends.\n+\t* cp/pt.c (instantiate_class_template): Fix formatting.\n+\n 2003-03-14  Matt Austern  <austern@apple.com>\n \n \t* cp-tree.h (unemitted_tinfo_decls): Declaration of a new varray."}, {"sha": "751d0f6534f9c529cac410e4dc920d71cc0f524d", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=963142fcd554cf2ccfab0d85062164fb0da3fb84", "patch": "@@ -3963,7 +3963,7 @@ arg_assoc_class (struct arg_lookup *k, tree type)\n \t   friends = TREE_CHAIN (friends))\n \t/* Only interested in global functions with potentially hidden\n            (i.e. unqualified) declarations.  */\n-\tif (decl_namespace (TREE_VALUE (friends)) == context)\n+\tif (CP_DECL_CONTEXT (TREE_VALUE (friends)) == context)\n \t  if (add_function (k, TREE_VALUE (friends)))\n \t    return true;\n "}, {"sha": "8523c9671cc180735d6b91818065b8f9a6105bec", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=963142fcd554cf2ccfab0d85062164fb0da3fb84", "patch": "@@ -5548,12 +5548,8 @@ instantiate_class_template (type)\n \t\t--processing_template_decl;\n \t    }\n \t  else\n-\t    {\n-\t      /* Build new DECL_FRIENDLIST.  */\n-\n-\t      add_friend (type, \n-\t\t\t  tsubst_friend_function (t, args));\n-\t    }\n+\t    /* Build new DECL_FRIENDLIST.  */\n+\t    add_friend (type, tsubst_friend_function (t, args));\n \t}\n     }\n "}, {"sha": "a76454bb1c3186d63e2a8787ec196466366f8a27", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=963142fcd554cf2ccfab0d85062164fb0da3fb84", "patch": "@@ -1,3 +1,7 @@\n+2003-03-20  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* g++.dg/template/friend17.C: New test.\n+\n 2003-03-21  Alan Modra  <amodra@bigpond.net.au>\n \n \t* gcc.c-torture/compile/20030320-1.c: New."}, {"sha": "50d6024415067a181ab0a61ef9d6a38ac56d4be8", "filename": "gcc/testsuite/g++.dg/template/friend17.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ffriend17.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/963142fcd554cf2ccfab0d85062164fb0da3fb84/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ffriend17.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Ffriend17.C?ref=963142fcd554cf2ccfab0d85062164fb0da3fb84", "patch": "@@ -0,0 +1,12 @@\n+template <class T>\n+struct X {\n+  template <class U> void operator+=(U);\n+  \n+  template <class V>\n+  template <class U>\n+  friend void X<V>::operator+=(U);\n+};\n+\n+int main() {   \n+  X<int>() += 1.0;\n+}"}]}