{"sha": "8853373c4e042132909d083602beb51fde2ab17a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg1MzM3M2M0ZTA0MjEzMjkwOWQwODM2MDJiZWI1MWZkZTJhYjE3YQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-02-16T08:03:23Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-02-16T08:03:23Z"}, "message": "pt.c (push_template_decl_real): Don't remangle the name of a class template.\n\n\t* pt.c (push_template_decl_real): Don't remangle the name of a\n\tclass template.\n\nFrom-SVN: r39753", "tree": {"sha": "015f3f8aa9dd20334fd261fe2ef8dac89f382b87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/015f3f8aa9dd20334fd261fe2ef8dac89f382b87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8853373c4e042132909d083602beb51fde2ab17a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8853373c4e042132909d083602beb51fde2ab17a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8853373c4e042132909d083602beb51fde2ab17a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8853373c4e042132909d083602beb51fde2ab17a/comments", "author": null, "committer": null, "parents": [{"sha": "b60ecc04e87b9ca4aaa6c79f46800cc3cf49d3d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b60ecc04e87b9ca4aaa6c79f46800cc3cf49d3d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b60ecc04e87b9ca4aaa6c79f46800cc3cf49d3d7"}], "stats": {"total": 33, "additions": 32, "deletions": 1}, "files": [{"sha": "2a8d7a56335866dd791f4603719a421e5127875f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8853373c4e042132909d083602beb51fde2ab17a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8853373c4e042132909d083602beb51fde2ab17a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=8853373c4e042132909d083602beb51fde2ab17a", "patch": "@@ -1,3 +1,7 @@\n+2001-02-16  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* semantics.c (finish_asm_stmt): Robustify.\n+\n 2001-02-15  Mark Mitchell  <mark@codesourcery.com>\n \n \t* pt.c (push_template_decl_real): Don't remangle the name of a"}, {"sha": "9bd7ff71d67f8285de383c5aad4c37b14f4919f3", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8853373c4e042132909d083602beb51fde2ab17a/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8853373c4e042132909d083602beb51fde2ab17a/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=8853373c4e042132909d083602beb51fde2ab17a", "patch": "@@ -912,7 +912,22 @@ finish_asm_stmt (cv_qualifier, string, output_operands,\n \n   if (!processing_template_decl)\n     for (t = input_operands; t; t = TREE_CHAIN (t))\n-      TREE_VALUE (t) = decay_conversion (TREE_VALUE (t));\n+      {\n+\ttree converted_operand \n+\t  = decay_conversion (TREE_VALUE (t)); \n+\n+\t/* If the type of the operand hasn't been determined (e.g.,\n+\t   because it involves an overloaded function), then issue an\n+\t   error message.  There's no context available to resolve the\n+\t   overloading.  */\n+\tif (TREE_TYPE (converted_operand) == unknown_type_node)\n+\t  {\n+\t    cp_error (\"type of asm operand `%E' could not be determined\", \n+\t\t      TREE_VALUE (t));\n+\t    converted_operand = error_mark_node;\n+\t  }\n+\tTREE_VALUE (t) = converted_operand;\n+      }\n \n   r = build_stmt (ASM_STMT, cv_qualifier, string,\n \t\t  output_operands, input_operands,"}, {"sha": "6a9650470c19166e5a8b88037774c8ba9e07d9e8", "filename": "gcc/testsuite/g++.old-deja/g++.other/asm2.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8853373c4e042132909d083602beb51fde2ab17a/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fasm2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8853373c4e042132909d083602beb51fde2ab17a/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fasm2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fasm2.C?ref=8853373c4e042132909d083602beb51fde2ab17a", "patch": "@@ -0,0 +1,12 @@\n+// Build don't link:\n+// Origin: Mark Mitchell <mark@codesourcery.com>\n+\n+struct C\n+{\n+  void f ();\n+};\n+\n+void C::f ()\n+{\n+  asm (\"\" : : \"m\" (f)); // ERROR - type could not be determined\n+}"}]}