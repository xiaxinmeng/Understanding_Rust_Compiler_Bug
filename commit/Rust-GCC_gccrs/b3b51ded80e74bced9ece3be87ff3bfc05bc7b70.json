{"sha": "b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNiNTFkZWQ4MGU3NGJjZWQ5ZWNlM2JlODdmZjNiZmMwNWJjN2I3MA==", "commit": {"author": {"name": "Caroline Tice", "email": "ctice@apple.com", "date": "2005-04-12T22:38:06Z"}, "committer": {"name": "Caroline Tice", "email": "ctice@gcc.gnu.org", "date": "2005-04-12T22:38:06Z"}, "message": "Temporary fix for partitioning problems; real fix coming soon.\n\nFrom-SVN: r98051", "tree": {"sha": "56cdf484a252e0eedc8fc6a0c0c10394585edb68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56cdf484a252e0eedc8fc6a0c0c10394585edb68"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/comments", "author": null, "committer": null, "parents": [{"sha": "997de8ed6b50b6e24573e6bf562f2845b1660088", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/997de8ed6b50b6e24573e6bf562f2845b1660088", "html_url": "https://github.com/Rust-GCC/gccrs/commit/997de8ed6b50b6e24573e6bf562f2845b1660088"}], "stats": {"total": 33, "additions": 23, "deletions": 10}, "files": [{"sha": "bbc317e25273b06a89254bb1477dd2e2a1064d66", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "patch": "@@ -1,3 +1,13 @@\n+2005-04-12  Caroline Tice  <ctice@apple.com>\n+\n+\tTemporary fix for partitioning problems.\n+\t* passes.c (rest_of_handle_final): Remove code that \n+\tfrees unlikely_text_section_name,\n+\t* varasm.c (assemble_start_function): Test for partitioning\n+\tflag before writing out section labels.\n+\t(assemble_end_function): Test for partitioning flag before\n+\twriting out section labels.\n+\t\n 2005-04-12  Steven Bosscher  <stevenb@suse.de>\n \t    Stuart Hastings <stuart@apple.com>\n \t    Jan Hubicka  <jh@suse.cz>"}, {"sha": "c2cbefb0fa217b5f4b5b3b9e14bf8aeb7dad7e2f", "filename": "gcc/passes.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "patch": "@@ -328,8 +328,7 @@ rest_of_handle_final (void)\n \n   timevar_push (TV_SYMOUT);\n   (*debug_hooks->function_decl) (current_function_decl);\n-  if (unlikely_text_section_name)\n-    free (unlikely_text_section_name);\n+\n   timevar_pop (TV_SYMOUT);\n \n   ggc_collect ();"}, {"sha": "16f6d3b33c764d1cf7785862f0f0123adc15c7ef", "filename": "gcc/varasm.c", "status": "modified", "additions": 12, "deletions": 8, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3b51ded80e74bced9ece3be87ff3bfc05bc7b70/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=b3b51ded80e74bced9ece3be87ff3bfc05bc7b70", "patch": "@@ -1303,7 +1303,8 @@ assemble_start_function (tree decl, const char *fnname)\n   /* Switch to the correct text section for the start of the function.  */\n \n   function_section (decl);\n-  if (!hot_label_written)\n+  if (flag_reorder_blocks_and_partition \n+      && !hot_label_written)\n     ASM_OUTPUT_LABEL (asm_out_file, hot_section_label);\n \n   /* Tell assembler to move to target machine's alignment for functions.  */\n@@ -1377,13 +1378,16 @@ assemble_end_function (tree decl, const char *fnname)\n     }\n   /* Output labels for end of hot/cold text sections (to be used by\n      debug info.)  */\n-  save_text_section = in_section;\n-  unlikely_text_section ();\n-  ASM_OUTPUT_LABEL (asm_out_file, cold_section_end_label);\n-  text_section ();\n-  ASM_OUTPUT_LABEL (asm_out_file, hot_section_end_label);\n-  if (save_text_section == in_unlikely_executed_text)\n-    unlikely_text_section ();\n+  if (flag_reorder_blocks_and_partition)\n+    {\n+      save_text_section = in_section;\n+      unlikely_text_section ();\n+      ASM_OUTPUT_LABEL (asm_out_file, cold_section_end_label);\n+      text_section ();\n+      ASM_OUTPUT_LABEL (asm_out_file, hot_section_end_label);\n+      if (save_text_section == in_unlikely_executed_text)\n+\tunlikely_text_section ();\n+    }\n }\n \f\n /* Assemble code to leave SIZE bytes of zeros.  */"}]}