{"sha": "406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDA2ZjlkNWUzYmRlNGIxM2QzZGQ2N2I2MzVmN2U5OWQwZjU1MGZiOQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-02-20T17:47:34Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2006-02-20T17:47:34Z"}, "message": "re PR tree-optimization/25879 (TDF_CHAIN makes -fdump-tree-all-all useless)\n\n2006-02-20  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR tree-opt/25879\n        * tree-pretty-print.c (debug_tree_chain): Walk the chains.\n        (dump_decl_name): Do not walk the decl tree chains.\n        * tree-pass.h (TDF_CHAIN): Remove.\n\nFrom-SVN: r111308", "tree": {"sha": "460eae0ba294ac76b2ed5c9affaacc31d7cf1cff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/460eae0ba294ac76b2ed5c9affaacc31d7cf1cff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/comments", "author": null, "committer": null, "parents": [{"sha": "9d29a5b7791c7521dddef17fe8d00c4f0f090509", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d29a5b7791c7521dddef17fe8d00c4f0f090509", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d29a5b7791c7521dddef17fe8d00c4f0f090509"}], "stats": {"total": 53, "additions": 26, "deletions": 27}, "files": [{"sha": "d469dedd321095c2d5113ec39db636556b8bd8e0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "patch": "@@ -1,4 +1,12 @@\n-2006-02-20 Rafael \ufffdvila de Esp\ufffdndola <rafael.espindola@gmail.com>\n+2006-02-20  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR tree-opt/25879\n+\t* tree-pretty-print.c (debug_tree_chain): Walk the chains.\n+\t(dump_decl_name): Do not walk the decl tree chains.\n+\t* tree-pass.h (TDF_CHAIN): Remove.\n+\n+2006-02-20  Rafael \ufffdvila de Esp\ufffdndola  <rafael.espindola@gmail.com>\n+\n \t* Makefile.in (C): Remove\n \t(PROTO): Remove\n \t(.PHONY): Remove C and PROTO"}, {"sha": "a538d5baab4419ceab360e2296cb4fe68fa110f7", "filename": "gcc/tree-pass.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/gcc%2Ftree-pass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/gcc%2Ftree-pass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pass.h?ref=406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "patch": "@@ -68,8 +68,6 @@ enum tree_dump_index\n #define TDF_STMTADDR\t(1 << 12)\t/* Address of stmt.  */\n \n #define TDF_GRAPH\t(1 << 13)\t/* a graph dump is being emitted */\n-#define TDF_CHAIN\t(1 << 14)\t/* Follow TREE_CHAIN when\n-\t\t\t\t\t   dumping *_DECLs.  */\n \n extern char *get_dump_file_name (enum tree_dump_index);\n extern int dump_enabled_p (enum tree_dump_index);"}, {"sha": "03f9753bbf7986a77d65f8862e8c9fb2ffc5f64e", "filename": "gcc/tree-pretty-print.c", "status": "modified", "additions": 17, "deletions": 24, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/gcc%2Ftree-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9/gcc%2Ftree-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pretty-print.c?ref=406f9d5e3bde4b13d3dd67b635f7e99d0f550fb9", "patch": "@@ -101,7 +101,12 @@ debug_generic_stmt (tree t)\n void\n debug_tree_chain (tree t)\n {\n-  print_generic_expr (stderr, t, TDF_VOPS|TDF_UID|TDF_CHAIN);\n+  while (t)\n+  {\n+    print_generic_expr (stderr, t, TDF_VOPS|TDF_UID);\n+    fprintf(stderr, \" \");\n+    t = TREE_CHAIN (t);\n+  }\n   fprintf (stderr, \"\\n\");\n }\n \n@@ -160,32 +165,20 @@ dump_decl_name (pretty_printer *buffer, tree node, int flags)\n {\n   tree t = node;\n \n-  while (t)\n+  if (DECL_NAME (t))\n+    pp_tree_identifier (buffer, DECL_NAME (t));\n+  if ((flags & TDF_UID)\n+      || DECL_NAME (t) == NULL_TREE)\n     {\n-      if (DECL_NAME (t))\n-\tpp_tree_identifier (buffer, DECL_NAME (t));\n-\n-      if ((flags & TDF_UID)\n-\t  || DECL_NAME (t) == NULL_TREE)\n-\t{\n-\t  if (TREE_CODE (t) == LABEL_DECL\n-\t      && LABEL_DECL_UID (t) != -1)\n-\t    pp_printf (buffer, \"L.\" HOST_WIDE_INT_PRINT_DEC,\n-\t\tLABEL_DECL_UID (t));\n-\t  else\n-\t    {\n-\t      char c = TREE_CODE (t) == CONST_DECL ? 'C' : 'D';\n-\t      pp_printf (buffer, \"%c.%u\", c, DECL_UID (t));\n-\t    }\n-\t}\n-\n-      if (flags & TDF_CHAIN)\n+      if (TREE_CODE (t) == LABEL_DECL\n+          && LABEL_DECL_UID (t) != -1)\n+        pp_printf (buffer, \"L.\" HOST_WIDE_INT_PRINT_DEC,\n+\t\t   LABEL_DECL_UID (t));\n+      else\n \t{\n-\t  t = TREE_CHAIN (t);\n-\t  pp_string (buffer, \" \");\n+\t  char c = TREE_CODE (t) == CONST_DECL ? 'C' : 'D';\n+\t  pp_printf (buffer, \"%c.%u\", c, DECL_UID (t));\n \t}\n-      else\n-\tt = NULL_TREE;\n     }\n }\n "}]}