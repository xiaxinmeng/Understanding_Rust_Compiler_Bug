{"sha": "d4f8225ab778ea7989d56fdede19e8fc25f8026b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRmODIyNWFiNzc4ZWE3OTg5ZDU2ZmRlZGUxOWU4ZmMyNWY4MDI2Yg==", "commit": {"author": {"name": "John Hassey", "email": "hassey@gnu.org", "date": "1993-02-23T02:10:03Z"}, "committer": {"name": "John Hassey", "email": "hassey@gnu.org", "date": "1993-02-23T02:10:03Z"}, "message": "(output_call): Don't use the delay slot of a bsr.n\nto modify the return address, unless -O2 specified.\n\nFrom-SVN: r3513", "tree": {"sha": "0c38155c1db654631f13fadd65a50f412b00e1a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c38155c1db654631f13fadd65a50f412b00e1a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4f8225ab778ea7989d56fdede19e8fc25f8026b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4f8225ab778ea7989d56fdede19e8fc25f8026b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4f8225ab778ea7989d56fdede19e8fc25f8026b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4f8225ab778ea7989d56fdede19e8fc25f8026b/comments", "author": null, "committer": null, "parents": [{"sha": "0ef08a071a3d6a5bf36afd8e0e181322a8b89eaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ef08a071a3d6a5bf36afd8e0e181322a8b89eaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ef08a071a3d6a5bf36afd8e0e181322a8b89eaf"}], "stats": {"total": 12, "additions": 9, "deletions": 3}, "files": [{"sha": "e2465e323c27d92408e60207a80f382e82ef7e87", "filename": "gcc/config/m88k/m88k.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4f8225ab778ea7989d56fdede19e8fc25f8026b/gcc%2Fconfig%2Fm88k%2Fm88k.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4f8225ab778ea7989d56fdede19e8fc25f8026b/gcc%2Fconfig%2Fm88k%2Fm88k.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm88k%2Fm88k.c?ref=d4f8225ab778ea7989d56fdede19e8fc25f8026b", "patch": "@@ -861,14 +861,20 @@ output_call (operands, addr)\n \t  NOTE_LINE_NUMBER (jump) = NOTE_INSN_DELETED;\n \t  NOTE_SOURCE_FILE (jump) = 0;\n \n-\t  /* If we loose, we must use the non-delay form.  This is unlikely\n+\t  /* We only do this optimization if -O2, modifying the value of\n+\t     r1 in the delay slot confuses debuggers and profilers on some\n+\t     systems.\n+\n+\t     If we loose, we must use the non-delay form.  This is unlikely\n \t     to ever happen.  If it becomes a problem, claim that a call\n \t     has two delay slots and only the second can be filled with\n \t     a jump.  */\n #ifdef AS_BUG_IMMEDIATE_LABEL /* The assembler restricts immediate values.  */\n-\t  if (! ADD_INTVAL (delta * 2))\n+\t  if (optimize < 2\n+\t      || ! ADD_INTVAL (delta * 2))\n #else\n-\t  if (! ADD_INTVAL (delta))\n+\t  if (optimize < 2\n+\t      || ! ADD_INTVAL (delta))\n #endif\n \t    {\n \t      operands[1] = dest;"}]}