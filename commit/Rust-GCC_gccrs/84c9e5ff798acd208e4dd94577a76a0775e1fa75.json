{"sha": "84c9e5ff798acd208e4dd94577a76a0775e1fa75", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODRjOWU1ZmY3OThhY2QyMDhlNGRkOTQ1NzdhNzZhMDc3NWUxZmE3NQ==", "commit": {"author": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2016-12-11T19:08:47Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2016-12-11T19:08:47Z"}, "message": "pa.c (pa_callee_copies): New function.\n\n\t* config/pa/pa.c (pa_callee_copies): New function.\n\t* config/pa/pa.opt (mcaller-copies): New option.\n\t* doc/invoke.texi (mcaller-copies): Document option.\n\nFrom-SVN: r243531", "tree": {"sha": "ae1ba7515b25dbdd8e8bc6483f074a8e6640ec2d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae1ba7515b25dbdd8e8bc6483f074a8e6640ec2d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/84c9e5ff798acd208e4dd94577a76a0775e1fa75", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84c9e5ff798acd208e4dd94577a76a0775e1fa75", "html_url": "https://github.com/Rust-GCC/gccrs/commit/84c9e5ff798acd208e4dd94577a76a0775e1fa75", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/84c9e5ff798acd208e4dd94577a76a0775e1fa75/comments", "author": null, "committer": null, "parents": [{"sha": "8c7cc1a98ff3834ac2e0a57533c08d123aeebd81", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c7cc1a98ff3834ac2e0a57533c08d123aeebd81", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c7cc1a98ff3834ac2e0a57533c08d123aeebd81"}], "stats": {"total": 39, "additions": 37, "deletions": 2}, "files": [{"sha": "54558cdffd9a5de4b83a6f7a7a7548fff79feb96", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=84c9e5ff798acd208e4dd94577a76a0775e1fa75", "patch": "@@ -1,3 +1,9 @@\n+2012-12-11  John David Anglin  <danglin@gcc.gnu.org>\n+\n+\t* config/pa/pa.c (pa_callee_copies): New function.\n+\t* config/pa/pa.opt (mcaller-copies): New option.\n+\t* doc/invoke.texi (mcaller-copies): Document option.\n+\n 2016-12-11  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/70799"}, {"sha": "6d18dfe37aeab2c14b976377ded4a9c996706b7b", "filename": "gcc/config/pa/pa.c", "status": "modified", "additions": 18, "deletions": 1, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2Fconfig%2Fpa%2Fpa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2Fconfig%2Fpa%2Fpa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.c?ref=84c9e5ff798acd208e4dd94577a76a0775e1fa75", "patch": "@@ -195,6 +195,8 @@ static bool pa_cannot_force_const_mem (machine_mode, rtx);\n static bool pa_legitimate_constant_p (machine_mode, rtx);\n static unsigned int pa_section_type_flags (tree, const char *, int);\n static bool pa_legitimate_address_p (machine_mode, rtx, bool);\n+static bool pa_callee_copies (cumulative_args_t, machine_mode,\n+\t\t\t      const_tree, bool);\n \n /* The following extra sections are only used for SOM.  */\n static GTY(()) section *som_readonly_data_section;\n@@ -343,7 +345,7 @@ static size_t n_deferred_plabels = 0;\n #undef TARGET_PASS_BY_REFERENCE\n #define TARGET_PASS_BY_REFERENCE pa_pass_by_reference\n #undef TARGET_CALLEE_COPIES\n-#define TARGET_CALLEE_COPIES hook_bool_CUMULATIVE_ARGS_mode_tree_bool_true\n+#define TARGET_CALLEE_COPIES pa_callee_copies\n #undef TARGET_ARG_PARTIAL_BYTES\n #define TARGET_ARG_PARTIAL_BYTES pa_arg_partial_bytes\n #undef TARGET_FUNCTION_ARG\n@@ -10720,4 +10722,19 @@ pa_maybe_emit_compare_and_swap_exchange_loop (rtx target, rtx mem, rtx val)\n   return NULL_RTX;\n }\n \n+/* Implement TARGET_CALLEE_COPIES.  The callee is responsible for copying\n+   arguments passed by hidden reference in the 32-bit HP runtime.  Users\n+   can override this behavior for better compatibility with openmp at the\n+   risk of library incompatibilities.  Arguments are always passed by value\n+   in the 64-bit HP runtime.  */\n+\n+static bool\n+pa_callee_copies (cumulative_args_t cum ATTRIBUTE_UNUSED,\n+\t\t  machine_mode mode ATTRIBUTE_UNUSED,\n+\t\t  const_tree type ATTRIBUTE_UNUSED,\n+\t\t  bool named ATTRIBUTE_UNUSED)\n+{\n+  return !TARGET_CALLER_COPIES;\n+}\n+\n #include \"gt-pa.h\""}, {"sha": "c15353de353bffe17e3449b210459f88e4293e33", "filename": "gcc/config/pa/pa.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2Fconfig%2Fpa%2Fpa.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2Fconfig%2Fpa%2Fpa.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.opt?ref=84c9e5ff798acd208e4dd94577a76a0775e1fa75", "patch": "@@ -41,6 +41,10 @@ mbig-switch\n Target Ignore\n Does nothing.  Preserved for backward compatibility.\n \n+mcaller-copies\n+Target Report Mask(CALLER_COPIES)\n+Caller copies function arguments passed by hidden reference.\n+\n mdisable-fpregs\n Target Report Mask(DISABLE_FPREGS)\n Disable FP regs."}, {"sha": "b211667d8fd8cda768d77cf17ea2c154b3411869", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/84c9e5ff798acd208e4dd94577a76a0775e1fa75/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=84c9e5ff798acd208e4dd94577a76a0775e1fa75", "patch": "@@ -763,7 +763,7 @@ Objective-C and Objective-C++ Dialects}.\n \n @emph{HPPA Options}\n @gccoptlist{-march=@var{architecture-type} @gol\n--mdisable-fpregs  -mdisable-indexing @gol\n+-mcaller-copies  -mdisable-fpregs  -mdisable-indexing @gol\n -mfast-indirect-calls  -mgas  -mgnu-ld   -mhp-ld @gol\n -mfixed-range=@var{register-range} @gol\n -mjump-in-delay -mlinker-opt -mlong-calls @gol\n@@ -17465,6 +17465,14 @@ other way around.\n @opindex mpa-risc-2-0\n Synonyms for @option{-march=1.0}, @option{-march=1.1}, and @option{-march=2.0} respectively.\n \n+@item -mcaller-copies\n+@opindex mcaller-copies\n+The caller copies function arguments passed by hidden reference.  This\n+option should be used with care as it is not compatible with the default\n+32-bit runtime.  However, only aggregates larger than eight bytes are\n+passed by hidden reference and the option provides better compatibility\n+with openmp.\n+\n @item -mjump-in-delay\n @opindex mjump-in-delay\n This option is ignored and provided for compatibility purposes only."}]}