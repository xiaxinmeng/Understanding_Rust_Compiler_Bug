{"sha": "c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzkzNTdkYzEzYmRjMTBkZjFlYmE5NWQ3Yjc5ZWUyZDNhZTRmYmJjNg==", "commit": {"author": {"name": "Kyrylo Tkachov", "email": "kyrylo.tkachov@arm.com", "date": "2019-07-25T11:04:21Z"}, "committer": {"name": "Kyrylo Tkachov", "email": "ktkachov@gcc.gnu.org", "date": "2019-07-25T11:04:21Z"}, "message": "[arm][committed] Clean up code iterator usage in satsi* patterns\n\n\nGCC 10 now supports having RTL codes being code attributes (thanks\nRichard) allowing us to map smax to smin and vice versa.\nThis means we can clean up their use in the saturation patterns that do\nthe cross product of [smin, smax] and use the pattern\npredicate to cancel out the nonsense ones.\n\n\t* config/arm/arm.md (SATrev): Change to code attribute.\n\t(*satsi_<SAT:code>): Adjust for the above.\n\t(*satsi_<SAT:code>_shift): Likewise.\n\nFrom-SVN: r273796", "tree": {"sha": "da7d8a82739ef3c998f69a22167e33627879881b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/da7d8a82739ef3c998f69a22167e33627879881b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6/comments", "author": {"login": "ktkachov-arm", "id": 74917949, "node_id": "MDQ6VXNlcjc0OTE3OTQ5", "avatar_url": "https://avatars.githubusercontent.com/u/74917949?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ktkachov-arm", "html_url": "https://github.com/ktkachov-arm", "followers_url": "https://api.github.com/users/ktkachov-arm/followers", "following_url": "https://api.github.com/users/ktkachov-arm/following{/other_user}", "gists_url": "https://api.github.com/users/ktkachov-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/ktkachov-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ktkachov-arm/subscriptions", "organizations_url": "https://api.github.com/users/ktkachov-arm/orgs", "repos_url": "https://api.github.com/users/ktkachov-arm/repos", "events_url": "https://api.github.com/users/ktkachov-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/ktkachov-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0982acbe282ded53440acdc8b6475f5bc5fb6a9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0982acbe282ded53440acdc8b6475f5bc5fb6a9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0982acbe282ded53440acdc8b6475f5bc5fb6a9d"}], "stats": {"total": 16, "additions": 11, "deletions": 5}, "files": [{"sha": "05c8263630688c15ce01322403d087fda9fbb355", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6", "patch": "@@ -1,3 +1,9 @@\n+2019-07-25  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n+\n+\t* config/arm/arm.md (SATrev): Change to code attribute.\n+\t(*satsi_<SAT:code>): Adjust for the above.\n+\t(*satsi_<SAT:code>_shift): Likewise.\n+\n 2019-07-25  Richard Biener  <rguenther@suse.de>\n \n \t* gimple-loop-versioning.cc (loop_versioning::prune_loop_conditions):"}, {"sha": "7ab939a35f5058f0cacb2824940c71c616e61b4b", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=c9357dc13bdc10df1eba95d7b79ee2d3ae4fbbc6", "patch": "@@ -3981,16 +3981,16 @@\n )\n \n (define_code_iterator SAT [smin smax])\n-(define_code_iterator SATrev [smin smax])\n+(define_code_attr SATrev [(smin \"smax\") (smax \"smin\")])\n (define_code_attr SATlo [(smin \"1\") (smax \"2\")])\n (define_code_attr SAThi [(smin \"2\") (smax \"1\")])\n \n (define_insn \"*satsi_<SAT:code>\"\n   [(set (match_operand:SI 0 \"s_register_operand\" \"=r\")\n-        (SAT:SI (SATrev:SI (match_operand:SI 3 \"s_register_operand\" \"r\")\n+        (SAT:SI (<SATrev>:SI (match_operand:SI 3 \"s_register_operand\" \"r\")\n                            (match_operand:SI 1 \"const_int_operand\" \"i\"))\n                 (match_operand:SI 2 \"const_int_operand\" \"i\")))]\n-  \"TARGET_32BIT && arm_arch6 && <SAT:CODE> != <SATrev:CODE>\n+  \"TARGET_32BIT && arm_arch6\n    && arm_sat_operator_match (operands[<SAT:SATlo>], operands[<SAT:SAThi>], NULL, NULL)\"\n {\n   int mask;\n@@ -4011,12 +4011,12 @@\n \n (define_insn \"*satsi_<SAT:code>_shift\"\n   [(set (match_operand:SI 0 \"s_register_operand\" \"=r\")\n-        (SAT:SI (SATrev:SI (match_operator:SI 3 \"sat_shift_operator\"\n+        (SAT:SI (<SATrev>:SI (match_operator:SI 3 \"sat_shift_operator\"\n                              [(match_operand:SI 4 \"s_register_operand\" \"r\")\n                               (match_operand:SI 5 \"const_int_operand\" \"i\")])\n                            (match_operand:SI 1 \"const_int_operand\" \"i\"))\n                 (match_operand:SI 2 \"const_int_operand\" \"i\")))]\n-  \"TARGET_32BIT && arm_arch6 && <SAT:CODE> != <SATrev:CODE>\n+  \"TARGET_32BIT && arm_arch6\n    && arm_sat_operator_match (operands[<SAT:SATlo>], operands[<SAT:SAThi>], NULL, NULL)\"\n {\n   int mask;"}]}