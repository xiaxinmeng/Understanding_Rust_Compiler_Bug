{"sha": "91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTExMDZlODQzNWM2ODk2M2Y3ZjBhOGU2YmY0NWFjYjBiMmE0MzJhYg==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2016-03-17T15:07:54Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2016-03-17T15:07:54Z"}, "message": "Rename GOMP_MAP_FORCE_DEALLOC to GOMP_MAP_DELETE\n\nAlso rename the Fortran OMP_MAP_FORCE_DEALLOC to OMP_MAP_DELETE.\n\n\tinclude/\n\t* gomp-constants.h (enum gomp_map_kind): Rename\n\tGOMP_MAP_FORCE_DEALLOC to GOMP_MAP_DELETE.  Adjust all users.\n\n\tgcc/fortran/\n\t* gfortran.h (enum gfc_omp_map_op): Rename OMP_MAP_FORCE_DEALLOC\n\tto OMP_MAP_DELETE.  Adjust all users.\n\nFrom-SVN: r234294", "tree": {"sha": "34546c9e023cfcd4b03b3aec5fd46fa8dae2a8c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/34546c9e023cfcd4b03b3aec5fd46fa8dae2a8c3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b38ba58bde4cdb7ffd47b56a79d1de819cfe9cea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b38ba58bde4cdb7ffd47b56a79d1de819cfe9cea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b38ba58bde4cdb7ffd47b56a79d1de819cfe9cea"}], "stats": {"total": 42, "additions": 25, "deletions": 17}, "files": [{"sha": "82d6eca06fc3ae8487bc24f8e6da30728dd39cfb", "filename": "gcc/c/c-parser.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-parser.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -10715,7 +10715,7 @@ c_parser_oacc_data_clause (c_parser *parser, pragma_omp_clause c_kind,\n       kind = GOMP_MAP_FORCE_ALLOC;\n       break;\n     case PRAGMA_OACC_CLAUSE_DELETE:\n-      kind = GOMP_MAP_FORCE_DEALLOC;\n+      kind = GOMP_MAP_DELETE;\n       break;\n     case PRAGMA_OACC_CLAUSE_DEVICE:\n       kind = GOMP_MAP_FORCE_TO;"}, {"sha": "8ba4ffecdc2b88f1647ea0bad449481aa6c9fb07", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -30086,7 +30086,7 @@ cp_parser_oacc_data_clause (cp_parser *parser, pragma_omp_clause c_kind,\n       kind = GOMP_MAP_FORCE_ALLOC;\n       break;\n     case PRAGMA_OACC_CLAUSE_DELETE:\n-      kind = GOMP_MAP_FORCE_DEALLOC;\n+      kind = GOMP_MAP_DELETE;\n       break;\n     case PRAGMA_OACC_CLAUSE_DEVICE:\n       kind = GOMP_MAP_FORCE_TO;"}, {"sha": "105e7b4e680d37d9a8259dbd8d6521de4e0cb1ff", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -1,3 +1,8 @@\n+2016-03-17  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* gfortran.h (enum gfc_omp_map_op): Rename OMP_MAP_FORCE_DEALLOC\n+\tto OMP_MAP_DELETE.  Adjust all users.\n+\n 2016-03-13  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \t    Jim MacArthur  <jim.macarthur@codethink.co.uk>\n "}, {"sha": "a0fb5fda9e579a01959e04dc6d735145a8450eab", "filename": "gcc/fortran/gfortran.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2Fgfortran.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2Fgfortran.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fgfortran.h?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -1112,8 +1112,8 @@ enum gfc_omp_map_op\n   OMP_MAP_TO,\n   OMP_MAP_FROM,\n   OMP_MAP_TOFROM,\n+  OMP_MAP_DELETE,\n   OMP_MAP_FORCE_ALLOC,\n-  OMP_MAP_FORCE_DEALLOC,\n   OMP_MAP_FORCE_TO,\n   OMP_MAP_FORCE_FROM,\n   OMP_MAP_FORCE_TOFROM,"}, {"sha": "a6c39cda6942614e4a6f5d2d464d196797380291", "filename": "gcc/fortran/openmp.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2Fopenmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2Fopenmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fopenmp.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -764,7 +764,7 @@ gfc_match_omp_clauses (gfc_omp_clauses **cp, uint64_t mask,\n       if ((mask & OMP_CLAUSE_DELETE)\n \t  && gfc_match (\"delete ( \") == MATCH_YES\n \t  && gfc_match_omp_map_clause (&c->lists[OMP_LIST_MAP],\n-\t\t\t\t       OMP_MAP_FORCE_DEALLOC))\n+\t\t\t\t       OMP_MAP_DELETE))\n \tcontinue;\n       if ((mask & OMP_CLAUSE_PRESENT)\n \t  && gfc_match (\"present ( \") == MATCH_YES"}, {"sha": "a905ca607aeeaead114d7ded1d08f05c509f98ab", "filename": "gcc/fortran/trans-openmp.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2Ftrans-openmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ffortran%2Ftrans-openmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-openmp.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -2119,12 +2119,12 @@ gfc_trans_omp_clauses (stmtblock_t *block, gfc_omp_clauses *clauses,\n \t\tcase OMP_MAP_TOFROM:\n \t\t  OMP_CLAUSE_SET_MAP_KIND (node, GOMP_MAP_TOFROM);\n \t\t  break;\n+\t\tcase OMP_MAP_DELETE:\n+\t\t  OMP_CLAUSE_SET_MAP_KIND (node, GOMP_MAP_DELETE);\n+\t\t  break;\n \t\tcase OMP_MAP_FORCE_ALLOC:\n \t\t  OMP_CLAUSE_SET_MAP_KIND (node, GOMP_MAP_FORCE_ALLOC);\n \t\t  break;\n-\t\tcase OMP_MAP_FORCE_DEALLOC:\n-\t\t  OMP_CLAUSE_SET_MAP_KIND (node, GOMP_MAP_FORCE_DEALLOC);\n-\t\t  break;\n \t\tcase OMP_MAP_FORCE_TO:\n \t\t  OMP_CLAUSE_SET_MAP_KIND (node, GOMP_MAP_FORCE_TO);\n \t\t  break;"}, {"sha": "3687e7aa1833d4513808163e7efcf42179cf019e", "filename": "gcc/gimplify.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -8194,7 +8194,7 @@ gimplify_oacc_declare_1 (tree clause)\n       case GOMP_MAP_ALLOC:\n       case GOMP_MAP_FORCE_ALLOC:\n       case GOMP_MAP_FORCE_TO:\n-\tnew_op = GOMP_MAP_FORCE_DEALLOC;\n+\tnew_op = GOMP_MAP_DELETE;\n \tret = true;\n \tbreak;\n "}, {"sha": "3fd6eb304b662705dab4047d354f3c11d6b4014e", "filename": "gcc/omp-low.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fomp-low.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Fomp-low.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fomp-low.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -15746,7 +15746,7 @@ lower_omp_target (gimple_stmt_iterator *gsi_p, omp_context *ctx)\n \t  case GOMP_MAP_TOFROM:\n \t  case GOMP_MAP_POINTER:\n \t  case GOMP_MAP_TO_PSET:\n-\t  case GOMP_MAP_FORCE_DEALLOC:\n+\t  case GOMP_MAP_DELETE:\n \t  case GOMP_MAP_RELEASE:\n \t  case GOMP_MAP_ALWAYS_TO:\n \t  case GOMP_MAP_ALWAYS_FROM:"}, {"sha": "39e3691a48f79ffae52446fc920b45284605466f", "filename": "gcc/tree-pretty-print.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ftree-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/gcc%2Ftree-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pretty-print.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -621,7 +621,7 @@ dump_omp_clause (pretty_printer *pp, tree clause, int spc, int flags)\n \tcase GOMP_MAP_FORCE_PRESENT:\n \t  pp_string (pp, \"force_present\");\n \t  break;\n-\tcase GOMP_MAP_FORCE_DEALLOC:\n+\tcase GOMP_MAP_DELETE:\n \t  pp_string (pp, \"delete\");\n \t  break;\n \tcase GOMP_MAP_FORCE_DEVICEPTR:"}, {"sha": "d09d54835dbc21deebfe1aa3ebc31d903e98efb9", "filename": "include/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -1,3 +1,8 @@\n+2016-03-17  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* gomp-constants.h (enum gomp_map_kind): Rename\n+\tGOMP_MAP_FORCE_DEALLOC to GOMP_MAP_DELETE.  Adjust all users.\n+\n 2016-03-03  Than McIntosh <thanm@google.com>\n \n \t* plugin-api.h: Add new hooks to the plugin transfer vector to"}, {"sha": "e31c2e00364b8a74218797ad0edbd8485a10d74d", "filename": "include/gomp-constants.h", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/include%2Fgomp-constants.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/include%2Fgomp-constants.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Fgomp-constants.h?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -67,7 +67,7 @@ enum gomp_map_kind\n     /* Must already be present.  */\n     GOMP_MAP_FORCE_PRESENT =\t\t(GOMP_MAP_FLAG_SPECIAL_0 | 2),\n     /* Deallocate a mapping, without copying from device.  */\n-    GOMP_MAP_FORCE_DEALLOC =\t\t(GOMP_MAP_FLAG_SPECIAL_0 | 3),\n+    GOMP_MAP_DELETE =\t\t\t(GOMP_MAP_FLAG_SPECIAL_0 | 3),\n     /* Is a device pointer.  OMP_CLAUSE_SIZE for these is unused; is implicitly\n        POINTER_SIZE_UNITS.  */\n     GOMP_MAP_FORCE_DEVICEPTR =\t\t(GOMP_MAP_FLAG_SPECIAL_1 | 0),\n@@ -125,11 +125,9 @@ enum gomp_map_kind\n     GOMP_MAP_DELETE_ZERO_LEN_ARRAY_SECTION\n       =\t\t\t\t\t(GOMP_MAP_FLAG_SPECIAL_2\n \t\t\t\t\t | GOMP_MAP_FLAG_SPECIAL | 3),\n-    /* OpenMP 4.5 alias for forced deallocation.  */\n-    GOMP_MAP_DELETE =\t\t\tGOMP_MAP_FORCE_DEALLOC,\n     /* Decrement usage count and deallocate if zero.  */\n     GOMP_MAP_RELEASE =\t\t\t(GOMP_MAP_FLAG_SPECIAL_2\n-\t\t\t\t\t | GOMP_MAP_FORCE_DEALLOC),\n+\t\t\t\t\t | GOMP_MAP_DELETE),\n \n     /* Internal to GCC, not used in libgomp.  */\n     /* Do not map, but pointer assign a pointer instead.  */"}, {"sha": "1fdb01d927b8dd4f91c5972d2086671be9900db2", "filename": "libgomp/oacc-parallel.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/libgomp%2Foacc-parallel.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/91106e8435c68963f7f0a8e6bf45acb0b2a432ab/libgomp%2Foacc-parallel.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Foacc-parallel.c?ref=91106e8435c68963f7f0a8e6bf45acb0b2a432ab", "patch": "@@ -307,7 +307,7 @@ GOACC_enter_exit_data (int device, size_t mapnum,\n \t  break;\n \t}\n \n-      if (kind == GOMP_MAP_FORCE_DEALLOC\n+      if (kind == GOMP_MAP_DELETE\n \t  || kind == GOMP_MAP_FORCE_FROM)\n \tbreak;\n \n@@ -374,7 +374,7 @@ GOACC_enter_exit_data (int device, size_t mapnum,\n \t\t\t\t\t == GOMP_MAP_FORCE_FROM,\n \t\t\t\t\t async, 1);\n \t\tbreak;\n-\t      case GOMP_MAP_FORCE_DEALLOC:\n+\t      case GOMP_MAP_DELETE:\n \t\tacc_delete (hostaddrs[i], sizes[i]);\n \t\tbreak;\n \t      case GOMP_MAP_FORCE_FROM:\n@@ -522,10 +522,10 @@ GOACC_declare (int device, size_t mapnum,\n       switch (kind)\n \t{\n \t  case GOMP_MAP_FORCE_ALLOC:\n-\t  case GOMP_MAP_FORCE_DEALLOC:\n \t  case GOMP_MAP_FORCE_FROM:\n \t  case GOMP_MAP_FORCE_TO:\n \t  case GOMP_MAP_POINTER:\n+\t  case GOMP_MAP_DELETE:\n \t    GOACC_enter_exit_data (device, 1, &hostaddrs[i], &sizes[i],\n \t\t\t\t   &kinds[i], 0, 0);\n \t    break;"}]}