{"sha": "dd4b238a77c34f2ef1109623da2200793fa45d45", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ0YjIzOGE3N2MzNGYyZWYxMTA5NjIzZGEyMjAwNzkzZmE0NWQ0NQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-09-29T19:01:41Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-09-29T19:01:41Z"}, "message": "Machine-readable RTL dumps: print_rtx_function\n\ngcc/ChangeLog:\n\t* Makefile.in (OBJS): Add print-rtl-function.o.\n\t* print-rtl-function.c: New file.\n\t* print-rtl.h (print_rtx_function): New decl.\n\nFrom-SVN: r240634", "tree": {"sha": "7b354d0e0956a3ed2d3287bc55dbaf772a106290", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7b354d0e0956a3ed2d3287bc55dbaf772a106290"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd4b238a77c34f2ef1109623da2200793fa45d45", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd4b238a77c34f2ef1109623da2200793fa45d45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd4b238a77c34f2ef1109623da2200793fa45d45", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd4b238a77c34f2ef1109623da2200793fa45d45/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4ab76933d107db95323b83e33d89bced11fa7e09", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ab76933d107db95323b83e33d89bced11fa7e09", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ab76933d107db95323b83e33d89bced11fa7e09"}], "stats": {"total": 140, "additions": 140, "deletions": 0}, "files": [{"sha": "7264cfffcfb2f94b9364af4b9c9802829f6262c4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=dd4b238a77c34f2ef1109623da2200793fa45d45", "patch": "@@ -1,3 +1,9 @@\n+2016-09-29  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* Makefile.in (OBJS): Add print-rtl-function.o.\n+\t* print-rtl-function.c: New file.\n+\t* print-rtl.h (print_rtx_function): New decl.\n+\n 2016-09-29  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/77756"}, {"sha": "15c48bcd7e58aa4f160681fe13440705e3df6a42", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=dd4b238a77c34f2ef1109623da2200793fa45d45", "patch": "@@ -1405,6 +1405,7 @@ OBJS = \\\n \tpostreload.o \\\n \tpredict.o \\\n \tprint-rtl.o \\\n+\tprint-rtl-function.o \\\n \tprint-tree.o \\\n \tprofile.o \\\n \treal.o \\"}, {"sha": "c4b99c03a37f82f2a0243dd667bede1627ede420", "filename": "gcc/print-rtl-function.c", "status": "added", "additions": 131, "deletions": 0, "changes": 131, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2Fprint-rtl-function.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2Fprint-rtl-function.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl-function.c?ref=dd4b238a77c34f2ef1109623da2200793fa45d45", "patch": "@@ -0,0 +1,131 @@\n+/* Print RTL functions for GCC.\n+   Copyright (C) 2016 Free Software Foundation, Inc.\n+\n+This file is part of GCC.\n+\n+GCC is free software; you can redistribute it and/or modify it under\n+the terms of the GNU General Public License as published by the Free\n+Software Foundation; either version 3, or (at your option) any later\n+version.\n+\n+GCC is distributed in the hope that it will be useful, but WITHOUT ANY\n+WARRANTY; without even the implied warranty of MERCHANTABILITY or\n+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License\n+for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GCC; see the file COPYING3.  If not see\n+<http://www.gnu.org/licenses/>.  */\n+\n+#include \"config.h\"\n+#include \"system.h\"\n+#include \"coretypes.h\"\n+#include \"tm.h\"\n+#include \"rtl.h\"\n+#include \"alias.h\"\n+#include \"tree.h\"\n+#include \"cfg.h\"\n+#include \"flags.h\"\n+#include \"predict.h\"\n+#include \"function.h\"\n+#include \"basic-block.h\"\n+#include \"print-rtl.h\"\n+#include \"langhooks.h\"\n+#include \"emit-rtl.h\"\n+\n+/* Write FN to OUTFILE in a form suitable for parsing, with indentation\n+   and comments to make the structure easy for a human to grok.\n+\n+   Example output:\n+\n+     (function \"times_two\"\n+       (insn-chain\n+\t (note 1 0 4 (nil) NOTE_INSN_DELETED)\n+\t (note 4 1 2 2 [bb 2] NOTE_INSN_BASIC_BLOCK)\n+\t (insn 2 4 3 2 (set (mem/c:SI (plus:DI (reg/f:DI 82 virtual-stack-vars)\n+\t\t\t     (const_int -4 [0xfffffffffffffffc])) [1 i+0 S4 A32])\n+\t\t     (reg:SI 5 di [ i ])) t.c:2 -1\n+\t\t  (nil))\n+\t (note 3 2 6 2 NOTE_INSN_FUNCTION_BEG)\n+\t (insn 6 3 7 2 (set (reg:SI 89)\n+\t\t     (mem/c:SI (plus:DI (reg/f:DI 82 virtual-stack-vars)\n+\t\t\t     (const_int -4 [0xfffffffffffffffc])) [1 i+0 S4 A32])) t.c:3 -1\n+\t\t  (nil))\n+\t (insn 7 6 10 2 (parallel [\n+\t\t\t (set (reg:SI 87 [ _2 ])\n+\t\t\t     (ashift:SI (reg:SI 89)\n+\t\t\t\t (const_int 1 [0x1])))\n+\t\t\t (clobber (reg:CC 17 flags))\n+\t\t     ]) t.c:3 -1\n+\t\t  (expr_list:REG_EQUAL (ashift:SI (mem/c:SI (plus:DI (reg/f:DI 82 virtual-stack-vars)\n+\t\t\t\t (const_int -4 [0xfffffffffffffffc])) [1 i+0 S4 A32])\n+\t\t\t (const_int 1 [0x1]))\n+\t\t     (nil)))\n+\t (insn 10 7 14 2 (set (reg:SI 88 [ <retval> ])\n+\t\t     (reg:SI 87 [ _2 ])) t.c:3 -1\n+\t\t  (nil))\n+\t (insn 14 10 15 2 (set (reg/i:SI 0 ax)\n+\t\t     (reg:SI 88 [ <retval> ])) t.c:4 -1\n+\t\t  (nil))\n+\t (insn 15 14 0 2 (use (reg/i:SI 0 ax)) t.c:4 -1\n+\t\t  (nil))\n+       ) ;; insn-chain\n+       (cfg\n+\t (bb 0\n+\t   (edge 0 2 (flags 0x1))\n+\t ) ;; bb\n+\t (bb 2\n+\t   (edge 2 1 (flags 0x1))\n+\t ) ;; bb\n+\t (bb 1\n+\t ) ;; bb\n+       ) ;; cfg\n+       (crtl\n+\t (return_rtx\n+\t   (reg/i:SI 0 ax)\n+\t ) ;; return_rtx\n+       ) ;; crtl\n+     ) ;; function \"times_two\"\n+*/\n+\n+DEBUG_FUNCTION void\n+print_rtx_function (FILE *outfile, function *fn)\n+{\n+  tree fdecl = fn->decl;\n+\n+  const char *dname = lang_hooks.decl_printable_name (fdecl, 2);\n+\n+  fprintf (outfile, \"(function \\\"%s\\\"\\n\", dname);\n+\n+  /* The instruction chain.  */\n+  fprintf (outfile, \"  (insn-chain\\n\");\n+  for (rtx_insn *insn = get_insns (); insn; insn = NEXT_INSN (insn))\n+    print_rtl_single_with_indent (outfile, insn, 4);\n+  fprintf (outfile, \"  ) ;; insn-chain\\n\");\n+\n+  /* The CFG.  */\n+  fprintf (outfile, \"  (cfg\\n\");\n+  {\n+    basic_block bb;\n+    FOR_ALL_BB_FN (bb, fn)\n+      {\n+\tfprintf (outfile, \"    (bb %i\\n\", bb->index);\n+\tedge e;\n+\tedge_iterator ei;\n+\tFOR_EACH_EDGE (e, ei, bb->succs)\n+\t  fprintf (outfile, \"      (edge %i %i (flags 0x%x))\\n\",\n+\t\t   e->src->index, e->dest->index, e->flags);\n+\tfprintf (outfile, \"    ) ;; bb\\n\");\n+      }\n+  }\n+  fprintf (outfile, \"  ) ;; cfg\\n\");\n+\n+  /* Additional RTL state.  */\n+  fprintf (outfile, \"  (crtl\\n\");\n+  fprintf (outfile, \"    (return_rtx \\n\");\n+  print_rtl_single_with_indent (outfile, crtl->return_rtx, 6);\n+  fprintf (outfile, \"    ) ;; return_rtx\\n\");\n+  fprintf (outfile, \"  ) ;; crtl\\n\");\n+\n+  fprintf (outfile, \") ;; function \\\"%s\\\"\\n\", dname);\n+}"}, {"sha": "9cad683ed897da43318c6e397dd275e243e8d02a", "filename": "gcc/print-rtl.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2Fprint-rtl.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd4b238a77c34f2ef1109623da2200793fa45d45/gcc%2Fprint-rtl.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-rtl.h?ref=dd4b238a77c34f2ef1109623da2200793fa45d45", "patch": "@@ -36,4 +36,6 @@ extern void print_insn (pretty_printer *pp, const rtx_insn *x, int verbose);\n extern void rtl_dump_bb_for_graph (pretty_printer *, basic_block);\n extern const char *str_pattern_slim (const_rtx);\n \n+extern void print_rtx_function (FILE *file, function *fn);\n+\n #endif  // GCC_PRINT_RTL_H"}]}