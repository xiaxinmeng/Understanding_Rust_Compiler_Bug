{"sha": "c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzAyZDJkMGFkYjE1M2Y4MTllNzViMGQ5ZjYyZmNkZjQzZmYxOTU0ZA==", "commit": {"author": {"name": "Prathamesh Kulkarni", "email": "prathamesh.kulkarni@linaro.org", "date": "2017-05-05T13:21:28Z"}, "committer": {"name": "Prathamesh Kulkarni", "email": "prathamesh3492@gcc.gnu.org", "date": "2017-05-05T13:21:28Z"}, "message": "re PR tree-optimization/80613 (ICE in is_gimple_reg_type with -O2)\n\n2017-05-05  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n\n\tPR tree-optimization/80613\n\t* tree-ssa-dce.c (propagate_necessity): Remove cases for\n\tBUILT_IN_STRDUP and BUILT_IN_STRNDUP.\n\ntestsuite/\n\t* gcc.dg/tree-ssa/pr79697.c (k): Remove.\n\nFrom-SVN: r247635", "tree": {"sha": "f60034e357bc1a5cb91a34e1a56ed0864207ebcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f60034e357bc1a5cb91a34e1a56ed0864207ebcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/comments", "author": null, "committer": null, "parents": [{"sha": "79bed25b2337df900dfa4d145883777112a0ee58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79bed25b2337df900dfa4d145883777112a0ee58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79bed25b2337df900dfa4d145883777112a0ee58"}], "stats": {"total": 27, "additions": 12, "deletions": 15}, "files": [{"sha": "5aa46fc0fd198ebfd953f4c7fe78ce97110f608b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "patch": "@@ -1,3 +1,9 @@\n+2017-05-05  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR tree-optimization/80613\n+\t* tree-ssa-dce.c (propagate_necessity): Remove cases for\n+\tBUILT_IN_STRDUP and BUILT_IN_STRNDUP.\n+\n 2017-05-05  Richard Biener  <rguenther@suse.de>\n \n \t* tree-ssa-pre.c (get_or_alloc_expr_for): Simplify."}, {"sha": "a3012e82f3c0d20b3d1ef801a8b7db591e76784c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "patch": "@@ -1,3 +1,8 @@\n+2017-05-05  Prathamesh Kulkarni  <prathamesh.kulkarni@linaro.org>\n+\n+\tPR tree-optimization/80613\n+\t* gcc.dg/tree-ssa/pr79697.c (k): Remove.\n+\n 2017-05-05  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/71577"}, {"sha": "fc3580e3ce34d867488470e25ac4efdc3578fee2", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr79697.c", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr79697.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr79697.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr79697.c?ref=c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "patch": "@@ -16,18 +16,6 @@ void h(void)\n   __builtin_realloc (0, 10);\n }\n \n-void k(void)\n-{\n-  char *p = __builtin_strdup (\"abc\");\n-  __builtin_free (p);\n-\n-  char *q = __builtin_strndup (\"abc\", 3);\n-  __builtin_free (q);\n-}\n-\n /* { dg-final { scan-tree-dump \"Deleting : __builtin_strdup\" \"cddce1\" } } */\n /* { dg-final { scan-tree-dump \"Deleting : __builtin_strndup\" \"cddce1\" } } */\n /* { dg-final { scan-tree-dump \"__builtin_malloc\" \"gimple\" } } */\n-/* { dg-final { scan-tree-dump-not \"__builtin_strdup\" \"optimized\" } } */\n-/* { dg-final { scan-tree-dump-not \"__builtin_strndup\" \"optimized\" } } */\n-/* { dg-final { scan-tree-dump-not \"__builtin_free\" \"optimized\" } } */"}, {"sha": "4225c3cc1a11d9e954fe29cb55449a5f8cdab127", "filename": "gcc/tree-ssa-dce.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2Ftree-ssa-dce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c02d2d0adb153f819e75b0d9f62fcdf43ff1954d/gcc%2Ftree-ssa-dce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-dce.c?ref=c02d2d0adb153f819e75b0d9f62fcdf43ff1954d", "patch": "@@ -782,9 +782,7 @@ propagate_necessity (bool aggressive)\n \t\t  && DECL_BUILT_IN_CLASS (def_callee) == BUILT_IN_NORMAL\n \t\t  && (DECL_FUNCTION_CODE (def_callee) == BUILT_IN_ALIGNED_ALLOC\n \t\t      || DECL_FUNCTION_CODE (def_callee) == BUILT_IN_MALLOC\n-\t\t      || DECL_FUNCTION_CODE (def_callee) == BUILT_IN_CALLOC\n-\t\t      || DECL_FUNCTION_CODE (def_callee) == BUILT_IN_STRDUP\n-\t\t      || DECL_FUNCTION_CODE (def_callee) == BUILT_IN_STRNDUP))\n+\t\t      || DECL_FUNCTION_CODE (def_callee) == BUILT_IN_CALLOC))\n \t\t{\n \t\t  gimple *bounds_def_stmt;\n \t\t  tree bounds;"}]}