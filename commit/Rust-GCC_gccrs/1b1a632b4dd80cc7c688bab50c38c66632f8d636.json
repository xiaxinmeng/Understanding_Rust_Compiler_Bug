{"sha": "1b1a632b4dd80cc7c688bab50c38c66632f8d636", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWIxYTYzMmI0ZGQ4MGNjN2M2ODhiYWI1MGMzOGM2NjYzMmY4ZDYzNg==", "commit": {"author": {"name": "Michael Eager", "email": "eager@mvista.com", "date": "2004-03-19T23:12:10Z"}, "committer": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2004-03-19T23:12:10Z"}, "message": "atomicity.h: Prevent reg loads between LL and SC instructions.\n\n2004-03-19  Michael Eager  <eager@mvista.com>\n\n\t* config/cpu/mips/atomicity.h:  Prevent reg loads between LL and\n\tSC instructions.\n\nFrom-SVN: r79711", "tree": {"sha": "591c1089cf1b5ffd761d1b3b15fb7d9ca5da1492", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/591c1089cf1b5ffd761d1b3b15fb7d9ca5da1492"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1b1a632b4dd80cc7c688bab50c38c66632f8d636", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b1a632b4dd80cc7c688bab50c38c66632f8d636", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b1a632b4dd80cc7c688bab50c38c66632f8d636", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b1a632b4dd80cc7c688bab50c38c66632f8d636/comments", "author": null, "committer": null, "parents": [{"sha": "24d82bce7ab29c1616b961d79f676bb08d339719", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/24d82bce7ab29c1616b961d79f676bb08d339719", "html_url": "https://github.com/Rust-GCC/gccrs/commit/24d82bce7ab29c1616b961d79f676bb08d339719"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "fe893b043dcaebf8dc79df0e2c834ade0e5f04ac", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b1a632b4dd80cc7c688bab50c38c66632f8d636/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b1a632b4dd80cc7c688bab50c38c66632f8d636/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=1b1a632b4dd80cc7c688bab50c38c66632f8d636", "patch": "@@ -1,3 +1,8 @@\n+2004-03-19  Michael Eager  <eager@mvista.com>\n+\n+\t* config/cpu/mips/atomicity.h:  Prevent reg loads between LL and\n+\tSC instructions.\n+\n 2004-03-19  Paolo Carlini  <pcarlini@suse.de>\n \n \t* testsuite/22_locale/num_get/get/char/11.cc: Remove redundant"}, {"sha": "ecfb69685947e7a73df73c317589c74c762fdef9", "filename": "libstdc++-v3/config/cpu/mips/atomicity.h", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1b1a632b4dd80cc7c688bab50c38c66632f8d636/libstdc%2B%2B-v3%2Fconfig%2Fcpu%2Fmips%2Fatomicity.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1b1a632b4dd80cc7c688bab50c38c66632f8d636/libstdc%2B%2B-v3%2Fconfig%2Fcpu%2Fmips%2Fatomicity.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fcpu%2Fmips%2Fatomicity.h?ref=1b1a632b4dd80cc7c688bab50c38c66632f8d636", "patch": "@@ -44,14 +44,15 @@ namespace __gnu_cxx\n #if _MIPS_SIM == _ABIO32\n        \".set\tmips2\\n\\t\"\n #endif\n-       \"ll\t%0,%3\\n\\t\"\n-       \"addu\t%1,%4,%0\\n\\t\"\n-       \"sc\t%1,%2\\n\\t\"\n+       \"ll\t%0,0(%2)\\n\\t\"\n+       \"addu\t%1,%3,%0\\n\\t\"\n+       \"sc\t%1,0(%2)\\n\\t\"\n        \".set\tpop\\n\\t\"\n        \"beqz\t%1,1b\\n\\t\"\n        \"/* End exchange & add */\"\n-       : \"=&r\"(__result), \"=&r\"(__tmp), \"=m\"(*__mem)\n-       : \"m\" (*__mem), \"r\"(__val));\n+       : \"=&r\"(__result), \"=&r\"(__tmp)\n+       : \"r\"(__mem), \"r\"(__val)\n+       :  \"memory\" );\n     \n     return __result;\n   }\n@@ -69,13 +70,14 @@ namespace __gnu_cxx\n #if _MIPS_SIM == _ABIO32\n        \".set\tmips2\\n\\t\"\n #endif\n-       \"ll\t%0,%2\\n\\t\"\n-       \"addu\t%0,%3,%0\\n\\t\"\n-       \"sc\t%0,%1\\n\\t\"\n+       \"ll\t%0,0(%1)\\n\\t\"\n+       \"addu\t%0,%2,%0\\n\\t\"\n+       \"sc\t%0,0(%1)\\n\\t\"\n        \".set\tpop\\n\\t\"\n        \"beqz\t%0,1b\\n\\t\"\n        \"/* End atomic add */\"\n-       : \"=&r\"(__result), \"=m\"(*__mem)\n-     : \"m\" (*__mem), \"r\"(__val));\n+       : \"=&r\"(__result)\n+       : \"r\"(__mem), \"r\"(__val)\n+       : \"memory\" );\n   }\n } // namespace __gnu_cxx"}]}