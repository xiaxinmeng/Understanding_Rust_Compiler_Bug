{"sha": "01e127b1dd90a951a602832070047e2723f072f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDFlMTI3YjFkZDkwYTk1MWE2MDI4MzIwNzAwNDdlMjcyM2YwNzJmNQ==", "commit": {"author": {"name": "Jeff Law", "email": "law@redhat.com", "date": "2013-10-18T15:50:04Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2013-10-18T15:50:04Z"}, "message": "tree-ssa-threadupdate.c: Do not include \"tm.h\" or \"tm_p.h\".\n\n       * tree-ssa-threadupdate.c: Do not include \"tm.h\" or \"tm_p.h\".\n\n        * tree-ssa-threadupdate.c: Include \"dbgcnt.h\".\n        (register_jump_thread): Add \"registered_jump_thread\" debug counter support.\n        * dbgcnt.def (registered_jump_thread): New debug counter.\n\nFrom-SVN: r203825", "tree": {"sha": "52ff49e4a70e3ffe4c9e607ad11edd87067575eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/52ff49e4a70e3ffe4c9e607ad11edd87067575eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01e127b1dd90a951a602832070047e2723f072f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01e127b1dd90a951a602832070047e2723f072f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01e127b1dd90a951a602832070047e2723f072f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01e127b1dd90a951a602832070047e2723f072f5/comments", "author": null, "committer": null, "parents": [{"sha": "f41b884853851173c255640a0786ef3f56dfa813", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f41b884853851173c255640a0786ef3f56dfa813", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f41b884853851173c255640a0786ef3f56dfa813"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "e18ad6f70c80b324bdfb37b906e502e3e58094d2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e127b1dd90a951a602832070047e2723f072f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e127b1dd90a951a602832070047e2723f072f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=01e127b1dd90a951a602832070047e2723f072f5", "patch": "@@ -1,3 +1,11 @@\n+2013-10-18  Jeff Law  <law@redhat.com>\n+\n+\t* tree-ssa-threadupdate.c: Do not include \"tm.h\" or \"tm_p.h\".\n+\n+\t* tree-ssa-threadupdate.c: Include \"dbgcnt.h\".\n+\t(register_jump_thread): Add \"registered_jump_thread\" debug counter support.\n+\t* dbgcnt.def (registered_jump_thread): New debug counter.\n+\n 2013-10-18  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* config/rs6000/rs6000.c: Include cgraph.h."}, {"sha": "6f86253a6ed71e08f07621ff991c84eeec086b06", "filename": "gcc/dbgcnt.def", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e127b1dd90a951a602832070047e2723f072f5/gcc%2Fdbgcnt.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e127b1dd90a951a602832070047e2723f072f5/gcc%2Fdbgcnt.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbgcnt.def?ref=01e127b1dd90a951a602832070047e2723f072f5", "patch": "@@ -188,3 +188,4 @@ DEBUG_COUNTER (store_motion)\n DEBUG_COUNTER (split_for_sched2)\n DEBUG_COUNTER (tail_call)\n DEBUG_COUNTER (ira_move)\n+DEBUG_COUNTER (registered_jump_thread)"}, {"sha": "e791269ebacaaa337a7c823858449d7931a40e2c", "filename": "gcc/tree-ssa-threadupdate.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01e127b1dd90a951a602832070047e2723f072f5/gcc%2Ftree-ssa-threadupdate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01e127b1dd90a951a602832070047e2723f072f5/gcc%2Ftree-ssa-threadupdate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-threadupdate.c?ref=01e127b1dd90a951a602832070047e2723f072f5", "patch": "@@ -20,17 +20,16 @@ along with GCC; see the file COPYING3.  If not see\n #include \"config.h\"\n #include \"system.h\"\n #include \"coretypes.h\"\n-#include \"tm.h\"\n #include \"tree.h\"\n #include \"flags.h\"\n-#include \"tm_p.h\"\n #include \"basic-block.h\"\n #include \"function.h\"\n #include \"tree-ssa.h\"\n #include \"tree-ssa-threadupdate.h\"\n #include \"dumpfile.h\"\n #include \"cfgloop.h\"\n #include \"hash-table.h\"\n+#include \"dbgcnt.h\"\n \n /* Given a block B, update the CFG and SSA graph to reflect redirecting\n    one or more in-edges to B to instead reach the destination of an\n@@ -1534,6 +1533,14 @@ dump_jump_thread_path (FILE *dump_file, vec<jump_thread_edge *> path)\n void\n register_jump_thread (vec<jump_thread_edge *> *path)\n {\n+  if (!dbg_cnt (registered_jump_thread))\n+    {\n+      for (unsigned int i = 0; i < path->length (); i++)\n+\tdelete (*path)[i];\n+      path->release ();\n+      return;\n+    }\n+\n   /* First make sure there are no NULL outgoing edges on the jump threading\n      path.  That can happen for jumping to a constant address.  */\n   for (unsigned int i = 0; i < path->length (); i++)"}]}