{"sha": "5418fe84c2377f7bff650c946fe8d667947b5984", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQxOGZlODRjMjM3N2Y3YmZmNjUwYzk0NmZlOGQ2Njc5NDdiNTk4NA==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2010-02-10T16:52:07Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2010-02-10T16:52:07Z"}, "message": "re PR tree-optimization/43017 (VRP miscompiles python with -fwrapv, II)\n\n2010-02-10  Richard Guenther  <rguenther@suse.de>\n\n\tPR tree-optimization/43017\n\t* tree-vrp.c (vrp_int_const_binop): Trust int_const_binop\n\tfor wrapping signed arithmetic.\n\n\t* gcc.dg/torture/pr43017.c: New testcase.\n\nFrom-SVN: r156666", "tree": {"sha": "c306e590d9ae4d96f7840c95f63704607326082f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c306e590d9ae4d96f7840c95f63704607326082f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5418fe84c2377f7bff650c946fe8d667947b5984", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5418fe84c2377f7bff650c946fe8d667947b5984", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5418fe84c2377f7bff650c946fe8d667947b5984", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5418fe84c2377f7bff650c946fe8d667947b5984/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7fcd5ad54c243aa68714f9d9dad96c428b50f266", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7fcd5ad54c243aa68714f9d9dad96c428b50f266", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7fcd5ad54c243aa68714f9d9dad96c428b50f266"}], "stats": {"total": 114, "additions": 114, "deletions": 0}, "files": [{"sha": "e080d10b4e8c3cb7dcdf47d7bea91843458b84ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5418fe84c2377f7bff650c946fe8d667947b5984", "patch": "@@ -1,3 +1,9 @@\n+2010-02-10  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/43017\n+\t* tree-vrp.c (vrp_int_const_binop): Trust int_const_binop\n+\tfor wrapping signed arithmetic.\n+\n 2010-02-10  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR debug/43010"}, {"sha": "d599f15a07cc38a8084baa8f0f2d59a00294124e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5418fe84c2377f7bff650c946fe8d667947b5984", "patch": "@@ -1,3 +1,8 @@\n+2010-02-10  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR tree-optimization/43017\n+\t* gcc.dg/torture/pr43017.c: New testcase.\n+\n 2010-02-10  Tobias Burnus <burnus@net-b.de>\n \n \tPR fortran/40823"}, {"sha": "257945290e116251ac78a97b0f65afabdb8355bb", "filename": "gcc/testsuite/gcc.dg/torture/pr43017.c", "status": "added", "additions": 99, "deletions": 0, "changes": 99, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr43017.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr43017.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr43017.c?ref=5418fe84c2377f7bff650c946fe8d667947b5984", "patch": "@@ -0,0 +1,99 @@\n+/* { dg-do run } */\n+/* { dg-options \"-fwrapv\" } */\n+\n+signed char foo(unsigned char c2)\n+{\n+  signed char c2_22;\n+\n+  if (c2 <= 63 || c2 == 127)\n+    goto bb43;\n+  else\n+    goto bb20;\n+\n+bb20:\n+  if (c2 > 252)\n+    goto bb43;\n+  else\n+    goto bb21;\n+\n+bb21:\n+  /*...*/;\n+\n+bb24:\n+  c2_22 = (signed char)c2;\n+  if (c2_22 >= 0)\n+    goto bb25;\n+  else\n+    goto bb26;\n+\n+bb25:\n+  c2 = (unsigned char)(c2_22 - 64);\n+  goto bb27;\n+\n+bb26:\n+  c2 = (unsigned char)(c2_22 - 65);\n+\n+bb27:\n+  if (c2 <= 93)\n+    goto bb28;\n+  else\n+    goto bb29;\n+\n+bb28:\n+  c2 = c2 + 33;\n+  goto bb30;\n+\n+bb29:\n+  c2 = (unsigned char)((signed char)c2 - 61);\n+\n+bb30:\n+  return c2;\n+\n+bb43:\n+  return -1;\n+}\n+extern void abort (void);\n+int main()\n+{\n+  signed char res[256] = {\n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      -1, -1, -1, -1, -1, -1, -1, -1, \n+      33, 34, 35, 36, 37, 38, 39, 40, \n+      41, 42, 43, 44, 45, 46, 47, 48, \n+      49, 50, 51, 52, 53, 54, 55, 56, \n+      57, 58, 59, 60, 61, 62, 63, 64, \n+      65, 66, 67, 68, 69, 70, 71, 72, \n+      73, 74, 75, 76, 77, 78, 79, 80, \n+      81, 82, 83, 84, 85, 86, 87, 88, \n+      89, 90, 91, 92, 93, 94, 95, -1, \n+      96, 97, 98, 99, 100, 101, 102, 103, \n+      104, 105, 106, 107, 108, 109, 110, 111, \n+      112, 113, 114, 115, 116, 117, 118, 119, \n+      120, 121, 122, 123, 124, 125, 126, 33, \n+      34, 35, 36, 37, 38, 39, 40, 41, \n+      42, 43, 44, 45, 46, 47, 48, 49, \n+      50, 51, 52, 53, 54, 55, 56, 57, \n+      58, 59, 60, 61, 62, 63, 64, 65, \n+      66, 67, 68, 69, 70, 71, 72, 73, \n+      74, 75, 76, 77, 78, 79, 80, 81, \n+      82, 83, 84, 85, 86, 87, 88, 89, \n+      90, 91, 92, 93, 94, 95, 96, 97, \n+      98, 99, 100, 101, 102, 103, 104, 105, \n+      106, 107, 108, 109, 110, 111, 112, 113, \n+      114, 115, 116, 117, 118, 119, 120, 121, \n+      122, 123, 124, 125, 126, -1, -1, -1\n+  };\n+  unsigned int c;\n+  for (c = 0; c <= 255; ++c)\n+    {\n+      if (foo (c) != res[c])\n+\tabort ();\n+    }\n+  return 0;\n+}"}, {"sha": "81645485f8b2dd65da83e8e356d57a2855d0a89e", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5418fe84c2377f7bff650c946fe8d667947b5984/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=5418fe84c2377f7bff650c946fe8d667947b5984", "patch": "@@ -1937,6 +1937,10 @@ vrp_int_const_binop (enum tree_code code, tree val1, tree val2)\n \t}\n \n     }\n+  else if (TYPE_OVERFLOW_WRAPS (TREE_TYPE (val1)))\n+    /* If the singed operation wraps then int_const_binop has done\n+       everything we want.  */\n+    ;\n   else if ((TREE_OVERFLOW (res)\n \t    && !TREE_OVERFLOW (val1)\n \t    && !TREE_OVERFLOW (val2))"}]}