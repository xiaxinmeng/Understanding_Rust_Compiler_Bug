{"sha": "c9dfc4144a464f1ee0306ff388ee85e2c178f18c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzlkZmM0MTQ0YTQ2NGYxZWUwMzA2ZmYzODhlZTg1ZTJjMTc4ZjE4Yw==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2010-07-04T14:40:34Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2010-07-04T14:40:34Z"}, "message": "re PR fortran/44596 ([OOP] Dynamic dispatch uses broken types)\n\n2010-07-04  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/44596\n\tPR fortran/44745\n\t* trans-types.c (gfc_get_derived_type): Derived type fields\n\twith the vtype attribute must have TYPE_REF_CAN_ALIAS_ALL set.\n\nFrom-SVN: r161801", "tree": {"sha": "096f9841645f1ba083ccf0998dcc00297a52d38e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/096f9841645f1ba083ccf0998dcc00297a52d38e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c9dfc4144a464f1ee0306ff388ee85e2c178f18c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9dfc4144a464f1ee0306ff388ee85e2c178f18c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9dfc4144a464f1ee0306ff388ee85e2c178f18c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9dfc4144a464f1ee0306ff388ee85e2c178f18c/comments", "author": null, "committer": null, "parents": [{"sha": "72aa3dcaf5e9aacc00c9ba56e05a750bcbd46415", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72aa3dcaf5e9aacc00c9ba56e05a750bcbd46415", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72aa3dcaf5e9aacc00c9ba56e05a750bcbd46415"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "3dcb42489bbbd69e2fedbf38b4927fdb6366393e", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9dfc4144a464f1ee0306ff388ee85e2c178f18c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9dfc4144a464f1ee0306ff388ee85e2c178f18c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c9dfc4144a464f1ee0306ff388ee85e2c178f18c", "patch": "@@ -1,3 +1,10 @@\n+2010-07-04  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/44596\n+\tPR fortran/44745\n+\t* trans-types.c (gfc_get_derived_type): Derived type fields\n+\twith the vtype attribute must have TYPE_REF_CAN_ALIAS_ALL set.\n+\n 2010-07-02  Mikael Morin  <mikael@gcc.gnu.org>\n \n \tPR fortran/44662"}, {"sha": "1de624fb8195f5c3918a6611c1b9040ade30adfb", "filename": "gcc/fortran/trans-types.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c9dfc4144a464f1ee0306ff388ee85e2c178f18c/gcc%2Ffortran%2Ftrans-types.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c9dfc4144a464f1ee0306ff388ee85e2c178f18c/gcc%2Ffortran%2Ftrans-types.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-types.c?ref=c9dfc4144a464f1ee0306ff388ee85e2c178f18c", "patch": "@@ -2152,6 +2152,10 @@ gfc_get_derived_type (gfc_symbol * derived)\n \t       && !c->attr.proc_pointer)\n \tfield_type = build_pointer_type (field_type);\n \n+      /* vtype fields can point to different types to the base type.  */\n+      if (c->ts.type == BT_DERIVED && c->ts.u.derived->attr.vtype)\n+\tTYPE_REF_CAN_ALIAS_ALL (field_type) = true;\n+\n       field = gfc_add_field_to_struct (&fieldlist, typenode,\n \t\t\t\t       get_identifier (c->name),\n \t\t\t\t       field_type, &chain);"}]}