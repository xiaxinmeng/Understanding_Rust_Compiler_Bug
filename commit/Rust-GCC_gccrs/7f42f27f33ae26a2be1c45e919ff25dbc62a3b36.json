{"sha": "7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2Y0MmYyN2YzM2FlMjZhMmJlMWM0NWU5MTlmZjI1ZGJjNjJhM2IzNg==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-05-09T18:26:20Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-05-09T18:26:20Z"}, "message": "match.c (gfc_match_return): Only require space after keyword when it is obligatory.\n\nfortran/\n\t* match.c (gfc_match_return): Only require space after keyword when\n\tit is obligatory.  Only give stdwarn to after matching is successful.\n\t* dump-parse-tree.c (gfc_show_symbol): Deal with alternate returns.\ntestsuite/\n\t* gfortran.dg/return_1.f90: New test.\n\nFrom-SVN: r99467", "tree": {"sha": "6cbc92e1a470f9ed0e5cfee87f772eefa3d3c7a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6cbc92e1a470f9ed0e5cfee87f772eefa3d3c7a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8d933e3147616e970f36e1b01d2b389ecc87b15c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d933e3147616e970f36e1b01d2b389ecc87b15c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d933e3147616e970f36e1b01d2b389ecc87b15c"}], "stats": {"total": 51, "additions": 42, "deletions": 9}, "files": [{"sha": "1210aabecdadfaa71dce76945e085eaf9585bbf3", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "patch": "@@ -1,3 +1,9 @@\n+2005-05-09  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* match.c (gfc_match_return): Only require space after keyword when\n+\tit is obligatory.  Only give stdwarn to after matching is successful.\n+\t* dump-parse-tree.c (gfc_show_symbol): Deal with alternate returns.\n+\n 2005-05-08  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* intrinsic.texi: Fix typos."}, {"sha": "70f91e4a52826e2197c74bdc3ff901fda408abf7", "filename": "gcc/fortran/dump-parse-tree.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ffortran%2Fdump-parse-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ffortran%2Fdump-parse-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdump-parse-tree.c?ref=7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "patch": "@@ -665,7 +665,12 @@ gfc_show_symbol (gfc_symbol * sym)\n       gfc_status (\"Formal arglist:\");\n \n       for (formal = sym->formal; formal; formal = formal->next)\n-\tgfc_status (\" %s\", formal->sym->name);\n+        {\n+          if (formal->sym != NULL)\n+            gfc_status (\" %s\", formal->sym->name);\n+          else\n+            gfc_status (\" [Alt Return]\");\n+        }\n     }\n \n   if (sym->formal_ns)"}, {"sha": "741e1a306070ebb6933346102112b04e97566e5e", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 19, "deletions": 7, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "patch": "@@ -1983,12 +1983,7 @@ gfc_match_return (void)\n   gfc_expr *e;\n   match m;\n   gfc_compile_state s;\n-\n-  gfc_enclosing_unit (&s);\n-  if (s == COMP_PROGRAM\n-      && gfc_notify_std (GFC_STD_GNU, \"Extension: RETURN statement in \"\n-\t\t\t \"main program at %C\") == FAILURE)\n-      return MATCH_ERROR;\n+  int c;\n \n   e = NULL;\n   if (gfc_match_eos () == MATCH_YES)\n@@ -2001,7 +1996,18 @@ gfc_match_return (void)\n       goto cleanup;\n     }\n \n-  m = gfc_match (\"% %e%t\", &e);\n+  if (gfc_current_form == FORM_FREE)\n+    {\n+      /* The following are valid, so we can't require a blank after the\n+        RETURN keyword:\n+          return+1\n+          return(1)  */\n+      c = gfc_peek_char ();\n+      if (ISALPHA (c) || ISDIGIT (c))\n+       return MATCH_NO;\n+    }\n+\n+  m = gfc_match (\" %e%t\", &e);\n   if (m == MATCH_YES)\n     goto done;\n   if (m == MATCH_ERROR)\n@@ -2014,6 +2020,12 @@ gfc_match_return (void)\n   return MATCH_ERROR;\n \n done:\n+  gfc_enclosing_unit (&s);\n+  if (s == COMP_PROGRAM\n+      && gfc_notify_std (GFC_STD_GNU, \"Extension: RETURN statement in \"\n+                        \"main program at %C\") == FAILURE)\n+      return MATCH_ERROR;\n+\n   new_st.op = EXEC_RETURN;\n   new_st.expr = e;\n "}, {"sha": "4bd364585bfb258e437a9e0575a942bd1710d22e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "patch": "@@ -1,4 +1,8 @@\n-2005-05-06  J\"orn Rennecke <joern.rennecke@st.com>\n+2005-05-09  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* gfortran.dg/return_1.f90: New test.\n+\n+2005-05-09  J\"orn Rennecke  <joern.rennecke@st.com>\n \n \t* gcc.dg/pr15784-3.c: Add -fno-finite-math-only option.\n "}, {"sha": "1358af28dc23c0db648e5020279f9154123df311", "filename": "gcc/testsuite/gfortran.dg/return_1.f90", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ftestsuite%2Fgfortran.dg%2Freturn_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f42f27f33ae26a2be1c45e919ff25dbc62a3b36/gcc%2Ftestsuite%2Fgfortran.dg%2Freturn_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Freturn_1.f90?ref=7f42f27f33ae26a2be1c45e919ff25dbc62a3b36", "patch": "@@ -0,0 +1,6 @@\n+! { dg-do compile }\n+! Test cases where no blank is required after RETURN\n+subroutine sub(*)\n+return(1)\n+return1 ! { dg-error }\n+end subroutine"}]}