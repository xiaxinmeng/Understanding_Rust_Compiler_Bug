{"sha": "2d3fc6aafc3730a15e3facad442695ced8b22925", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQzZmM2YWFmYzM3MzBhMTVlM2ZhY2FkNDQyNjk1Y2VkOGIyMjkyNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-10-19T07:39:43Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-10-19T07:39:43Z"}, "message": "cfgexpand.c (expand_debug_expr): Fail if bitpos < 0 for non-MEM op0.\n\n\t* cfgexpand.c (expand_debug_expr): Fail if bitpos < 0 for non-MEM\n\top0.\n\n\t* gcc.dg/debug/vta-3.c: New test.\n\nFrom-SVN: r152972", "tree": {"sha": "06314543c91eececa6bcd3808dfbc85a49ff743d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/06314543c91eececa6bcd3808dfbc85a49ff743d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d3fc6aafc3730a15e3facad442695ced8b22925", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d3fc6aafc3730a15e3facad442695ced8b22925", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d3fc6aafc3730a15e3facad442695ced8b22925", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d3fc6aafc3730a15e3facad442695ced8b22925/comments", "author": null, "committer": null, "parents": [{"sha": "69925f6ce8bf646a4a8fcf50b0deb77b207fb693", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69925f6ce8bf646a4a8fcf50b0deb77b207fb693", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69925f6ce8bf646a4a8fcf50b0deb77b207fb693"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "a8f7148419aadd82c4e698339f4cf8375bac4a71", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2d3fc6aafc3730a15e3facad442695ced8b22925", "patch": "@@ -1,4 +1,9 @@\n-2009-10-17  Andy Hutchinson <hutchinsonandy@gcc.gnu.org>\n+2009-10-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* cfgexpand.c (expand_debug_expr): Fail if bitpos < 0 for non-MEM\n+\top0.\n+\n+2009-10-17  Andy Hutchinson  <hutchinsonandy@gcc.gnu.org>\n \n \tPR middle-end/41738\n \t* optabs.c (expand_binop): Make mode of shift count expression mode"}, {"sha": "8c7c881ea6c83d3200e2f3f39473b733cc001e81", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=2d3fc6aafc3730a15e3facad442695ced8b22925", "patch": "@@ -2593,6 +2593,9 @@ expand_debug_expr (tree exp)\n \tif (bitpos == 0 && mode == GET_MODE (op0))\n \t  return op0;\n \n+        if (bitpos < 0)\n+          return NULL;\n+\n \tif ((bitpos % BITS_PER_UNIT) == 0\n \t    && bitsize == GET_MODE_BITSIZE (mode1))\n \t  {"}, {"sha": "d4d46529f5c42da943ae13e233070c6a7b7b8945", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2d3fc6aafc3730a15e3facad442695ced8b22925", "patch": "@@ -1,3 +1,7 @@\n+2009-10-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc.dg/debug/vta-3.c: New test.\n+\n 2009-10-17  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/nested_proc.adb: Rename into..."}, {"sha": "7d014f1bc1e21663143cef76d0759f84fba8d297", "filename": "gcc/testsuite/gcc.dg/debug/vta-3.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d3fc6aafc3730a15e3facad442695ced8b22925/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-3.c?ref=2d3fc6aafc3730a15e3facad442695ced8b22925", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do compile } */\n+\n+int\n+foo (void)\n+{\n+  union { char e[8]; int i; } a, b;\n+  char *c, *d;\n+  unsigned int i;\n+  c = a.e;\n+  d = &b.e[sizeof (int) - 1];\n+  for (i = 0; i < sizeof (int); i++)\n+    {\n+      *d = *c++;\n+      --d;\n+    }\n+  return b.i;\n+}"}]}