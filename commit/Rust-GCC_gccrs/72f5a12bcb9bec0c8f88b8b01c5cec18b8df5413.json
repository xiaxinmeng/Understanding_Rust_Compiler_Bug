{"sha": "72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJmNWExMmJjYjliZWMwYzhmODhiOGIwMWM1Y2VjMThiOGRmNTQxMw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-25T20:47:30Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-04-25T20:47:30Z"}, "message": "(finish_decl): Redo last change.\n\nFrom-SVN: r7156", "tree": {"sha": "5ee9d04e43448022c128ab88527d85ade59b1b65", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5ee9d04e43448022c128ab88527d85ade59b1b65"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413/comments", "author": null, "committer": null, "parents": [{"sha": "094ecbb0cee9eec4627f8ecbe2baca1f3fbbbf8d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/094ecbb0cee9eec4627f8ecbe2baca1f3fbbbf8d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/094ecbb0cee9eec4627f8ecbe2baca1f3fbbbf8d"}], "stats": {"total": 16, "additions": 8, "deletions": 8}, "files": [{"sha": "7dd5fbc08bffacafe963b44b38d1209dfd5c4297", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=72f5a12bcb9bec0c8f88b8b01c5cec18b8df5413", "patch": "@@ -3412,13 +3412,9 @@ finish_decl (decl, init, asmspec_tree)\n   int temporary = allocation_temporary_p ();\n   char *asmspec = 0;\n \n-  /* If a name was specified, get the string.  Then reset DECL_RTL\n-     so that we will remake it with the new name.  */\n+  /* If a name was specified, get the string.   */\n   if (asmspec_tree)\n-    {\n-      asmspec = TREE_STRING_POINTER (asmspec_tree);\n-      DECL_RTL (decl) = 0;\n-    }\n+    asmspec = TREE_STRING_POINTER (asmspec_tree);\n \n   /* If `start_decl' didn't like having an initialization, ignore it now.  */\n \n@@ -3539,9 +3535,13 @@ finish_decl (decl, init, asmspec_tree)\n     }\n \n   /* If this is a function and an assembler name is specified, it isn't\n-     builtin any more.  */\n+     builtin any more.  Also reset DECL_RTL so we can give it its new\n+     name.  */\n   if (TREE_CODE (decl) == FUNCTION_DECL && asmspec)\n-    DECL_BUILT_IN (decl) = 0;\n+      {\n+\tDECL_BUILT_IN (decl) = 0;\n+\tDECL_RTL (decl) = 0;\n+      }\n \n   /* Output the assembler code and/or RTL code for variables and functions,\n      unless the type is an undefined structure or union."}]}