{"sha": "be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmUxYWQwNGMzODVmYTAyZmYxMjRmZmUzOGM2Yjg1YjdkZmJkMmMzMw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-03-01T23:33:22Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-03-01T23:33:22Z"}, "message": "(output_constant): Strip off some NOP_EXPRs before further processing.\n\nFrom-SVN: r6683", "tree": {"sha": "3cebe1786de1fa19fdfc1350f89f369cb020005c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3cebe1786de1fa19fdfc1350f89f369cb020005c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33/comments", "author": null, "committer": null, "parents": [{"sha": "2d57146b6ee86f1cbff948b98eecdc940c2f0412", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d57146b6ee86f1cbff948b98eecdc940c2f0412", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d57146b6ee86f1cbff948b98eecdc940c2f0412"}], "stats": {"total": 17, "additions": 11, "deletions": 6}, "files": [{"sha": "89c1bbadc9cb3e4427dafa40dd5a2504607828fd", "filename": "gcc/varasm.c", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=be1ad04c385fa02ff124ffe38c6b85b7dfbd2c33", "patch": "@@ -3323,6 +3323,17 @@ output_constant (exp, size)\n   if (size == 0)\n     return;\n \n+  /* Eliminate the NON_LVALUE_EXPR_EXPR that makes a cast not be an lvalue.\n+     That way we get the constant (we hope) inside it.  Also, strip\n+     off any NOP_EXPR that converts between two record or union types.  */\n+  while ((TREE_CODE (exp) == NOP_EXPR \n+\t  && (TREE_TYPE (exp) == TREE_TYPE (TREE_OPERAND (exp, 0))\n+\t      || TREE_CODE (TREE_TYPE (exp)) == RECORD_TYPE\n+\t      || TREE_CODE (TREE_TYPE (exp)) == UNION_TYPE\n+\t      || TREE_CODE (TREE_TYPE (exp)) == QUAL_UNION_TYPE))\n+\t || TREE_CODE (exp) == NON_LVALUE_EXPR)\n+    exp = TREE_OPERAND (exp, 0);\n+\n   /* Allow a constructor with no elements for any data type.\n      This means to fill the space with zeros.  */\n   if (TREE_CODE (exp) == CONSTRUCTOR && CONSTRUCTOR_ELTS (exp) == 0)\n@@ -3334,12 +3345,6 @@ output_constant (exp, size)\n       return;\n     }\n \n-  /* Eliminate the NOP_EXPR that makes a cast not be an lvalue.\n-     That way we get the constant (we hope) inside it.  */\n-  if (TREE_CODE (exp) == NOP_EXPR\n-      && TREE_TYPE (exp) == TREE_TYPE (TREE_OPERAND (exp, 0)))\n-    exp = TREE_OPERAND (exp, 0);\n-\n   switch (code)\n     {\n     case CHAR_TYPE:"}]}