{"sha": "249555b0af353de199f224a21a88143e375e8183", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQ5NTU1YjBhZjM1M2RlMTk5ZjIyNGEyMWE4ODE0M2UzNzVlODE4Mw==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@rhino.cygnus.com", "date": "1997-12-05T00:48:46Z"}, "committer": {"name": "Brendan Kehoe", "email": "brendan@gcc.gnu.org", "date": "1997-12-05T00:48:46Z"}, "message": "missing part of Sept 22 change brought over:\n\n\t* decl.c (cp_finish_decl): Mark decls used if type has TREE_USED\n\tset,don't clear TREE_USED wholesale.\n\nFrom-SVN: r16953", "tree": {"sha": "15dcae23f86e458e00f5f7abfb050406cb3d0a9a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15dcae23f86e458e00f5f7abfb050406cb3d0a9a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/249555b0af353de199f224a21a88143e375e8183", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/249555b0af353de199f224a21a88143e375e8183", "html_url": "https://github.com/Rust-GCC/gccrs/commit/249555b0af353de199f224a21a88143e375e8183", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/249555b0af353de199f224a21a88143e375e8183/comments", "author": null, "committer": null, "parents": [{"sha": "e7757d691986cb364eab8f8a6968ff385d4d3a61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7757d691986cb364eab8f8a6968ff385d4d3a61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7757d691986cb364eab8f8a6968ff385d4d3a61"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "dfe51214ca0ed1db2d337977fd4d5b5a35f20650", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/249555b0af353de199f224a21a88143e375e8183/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/249555b0af353de199f224a21a88143e375e8183/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=249555b0af353de199f224a21a88143e375e8183", "patch": "@@ -788,6 +788,12 @@ Thu Sep 25 11:11:13 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \t* decl.c (start_function): Up warning of no return type to be a\n \tpedwarn.\n \n+Mon Sep 22 14:15:34 1997  Benjamin Kosnik  <bkoz@rhino.cygnus.com>\n+\n+\t* init.c (expand_member_init): Don't set TREE_USED.\n+\t* decl.c (cp_finish_decl): Mark decls used if type has TREE_USED\n+\tset,don't clear TREE_USED wholesale.\n+\n Sat Sep 20 15:31:00 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* call.c (build_over_call): Do require_complete_type before"}, {"sha": "23307e9a9061d12641049cf2b2791589276e5673", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/249555b0af353de199f224a21a88143e375e8183/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/249555b0af353de199f224a21a88143e375e8183/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=249555b0af353de199f224a21a88143e375e8183", "patch": "@@ -6956,6 +6956,10 @@ cp_finish_decl (decl, init, asmspec_tree, need_pop, flags)\n \t\t was initialized was ever used.  Don't do this if it has a\n \t\t destructor, so we don't complain about the 'resource\n \t\t allocation is initialization' idiom.  */\n+\t      /* Now set attribute((unused)) on types so decls of\n+\t\t of that type will be marked used. (see TREE_USED, above.) \n+\t\t This avoids the warning problems this particular code\n+\t\t tried to work around. */\n \n \t      if (TYPE_NEEDS_CONSTRUCTING (type)\n \t\t  && ! already_used\n@@ -7797,6 +7801,9 @@ grokdeclarator (declarator, declspecs, decl_context, initialized, attrlist)\n \t\tinit = TREE_OPERAND (decl, 1);\n \n \t\tdecl = start_decl (declarator, declspecs, 1);\n+\t\t/* Look for __unused__ attribute */\n+\t\tif (TREE_USED (TREE_TYPE (decl)))\n+\t\t  TREE_USED (decl) = 1;\n \t\tfinish_decl (decl, init, NULL_TREE);\n \t\treturn 0;\n \t      }"}]}