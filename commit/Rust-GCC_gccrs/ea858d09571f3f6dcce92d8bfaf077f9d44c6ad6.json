{"sha": "ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWE4NThkMDk1NzFmM2Y2ZGNjZTkyZDhiZmFmMDc3ZjlkNDRjNmFkNg==", "commit": {"author": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2020-08-05T07:50:49Z"}, "committer": {"name": "Kewen Lin", "email": "linkw@linux.ibm.com", "date": "2020-08-06T05:56:51Z"}, "message": "vect: Skip epilogue loops for dbgcnt check [PR96451]\n\nAs the PR shows, commit r11-2453 exposed one issue that vectorizer\nwants to vectorize the epilogue loop and leaves the if-cvt body there,\nbut later dbgcnt check disables it, the left scalar mask_store\nstatement causes ICE.\n\nAs Richard pointed out in that PR, the dbgcnt is to count original\nscalar loops, so this fix is to make it skip the epilogue loops.\n\ngcc/ChangeLog:\n\n\t* tree-vectorizer.c (try_vectorize_loop_1): Skip the epilogue loops\n\tfor dbgcnt check.", "tree": {"sha": "fd0a7d9e00e0220097912024950673ae2b8960a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fd0a7d9e00e0220097912024950673ae2b8960a7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6/comments", "author": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jedilyn", "id": 38515402, "node_id": "MDQ6VXNlcjM4NTE1NDAy", "avatar_url": "https://avatars.githubusercontent.com/u/38515402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jedilyn", "html_url": "https://github.com/jedilyn", "followers_url": "https://api.github.com/users/jedilyn/followers", "following_url": "https://api.github.com/users/jedilyn/following{/other_user}", "gists_url": "https://api.github.com/users/jedilyn/gists{/gist_id}", "starred_url": "https://api.github.com/users/jedilyn/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jedilyn/subscriptions", "organizations_url": "https://api.github.com/users/jedilyn/orgs", "repos_url": "https://api.github.com/users/jedilyn/repos", "events_url": "https://api.github.com/users/jedilyn/events{/privacy}", "received_events_url": "https://api.github.com/users/jedilyn/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "aa5ea20c2bf5f730acb3d161978d70559705400c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa5ea20c2bf5f730acb3d161978d70559705400c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa5ea20c2bf5f730acb3d161978d70559705400c"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "3c60f30ed8fe6425b77e1e40deb51ec66c247e5f", "filename": "gcc/tree-vectorizer.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6/gcc%2Ftree-vectorizer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6/gcc%2Ftree-vectorizer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.c?ref=ea858d09571f3f6dcce92d8bfaf077f9d44c6ad6", "patch": "@@ -1066,7 +1066,8 @@ try_vectorize_loop_1 (hash_table<simduid_to_vf> *&simduid_to_vf_htab,\n       return ret;\n     }\n \n-  if (!dbg_cnt (vect_loop))\n+  /* Only count the original scalar loops.  */\n+  if (!LOOP_VINFO_EPILOGUE_P (loop_vinfo) && !dbg_cnt (vect_loop))\n     {\n       /* Free existing information if loop is analyzed with some\n \t assumptions.  */"}]}