{"sha": "26c3229c0b2ddc4de07fae0e344746a109d3e40a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjZjMzIyOWMwYjJkZGM0ZGUwN2ZhZTBlMzQ0NzQ2YTEwOWQzZTQwYQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-02-15T07:53:11Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-02-15T07:53:11Z"}, "message": "re GNATS gcj/150 (System.loadLibrary() semantics arn't the same as in the JDK)\n\n\t* java/lang/natRuntime.cc (_load): On Unix, prefix library name\n\twith `lib' for loadLibrary.  Fixes PR gcj/150.\n\nFrom-SVN: r31976", "tree": {"sha": "590b5bba0580a628e32ef9cf74a30c2744e0c4d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/590b5bba0580a628e32ef9cf74a30c2744e0c4d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26c3229c0b2ddc4de07fae0e344746a109d3e40a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26c3229c0b2ddc4de07fae0e344746a109d3e40a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26c3229c0b2ddc4de07fae0e344746a109d3e40a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26c3229c0b2ddc4de07fae0e344746a109d3e40a/comments", "author": null, "committer": null, "parents": [{"sha": "789a3090f3b31428e04e21b9df1070c57b0cde55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/789a3090f3b31428e04e21b9df1070c57b0cde55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/789a3090f3b31428e04e21b9df1070c57b0cde55"}], "stats": {"total": 20, "additions": 17, "deletions": 3}, "files": [{"sha": "3623bf7d8860bd99de92da794d95cc7694573e50", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26c3229c0b2ddc4de07fae0e344746a109d3e40a/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26c3229c0b2ddc4de07fae0e344746a109d3e40a/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=26c3229c0b2ddc4de07fae0e344746a109d3e40a", "patch": "@@ -1,3 +1,8 @@\n+2000-02-15  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* java/lang/natRuntime.cc (_load): On Unix, prefix library name\n+\twith `lib' for loadLibrary.  Fixes PR gcj/150.\n+\n 2000-02-14  Warren Levy  <warrenl@cygnus.com>\n \n \t* gnu/gcj/math/MPN.java(findLowestBit): Made methods public."}, {"sha": "cc693858d2d4a74770f8aeef05bddd5e99a05a4b", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 12, "deletions": 3, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26c3229c0b2ddc4de07fae0e344746a109d3e40a/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26c3229c0b2ddc4de07fae0e344746a109d3e40a/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=26c3229c0b2ddc4de07fae0e344746a109d3e40a", "patch": "@@ -108,9 +108,18 @@ java::lang::Runtime::_load (jstring path, jboolean do_search)\n   using namespace java::lang;\n #ifdef USE_LTDL\n   jint len = _Jv_GetStringUTFLength (path);\n-  char buf[len + 1];\n-  jsize total = JvGetStringUTFRegion (path, 0, path->length(), buf);\n-  buf[total] = '\\0';\n+  char buf[len + 1 + 3];\n+  int offset = 0;\n+#ifndef WIN32\n+  // On Unix boxes, prefix library name with `lib', for loadLibrary.\n+  if (do_search)\n+    {\n+      strcpy (buf, \"lib\");\n+      offset = 3;\n+    }\n+#endif\n+  jsize total = JvGetStringUTFRegion (path, 0, path->length(), &buf[offset]);\n+  buf[offset + total] = '\\0';\n   // FIXME: make sure path is absolute.\n   lt_dlhandle h = do_search ? lt_dlopenext (buf) : lt_dlopen (buf);\n   if (h == NULL)"}]}