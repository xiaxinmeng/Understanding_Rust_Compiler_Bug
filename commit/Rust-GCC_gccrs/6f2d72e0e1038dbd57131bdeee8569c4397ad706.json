{"sha": "6f2d72e0e1038dbd57131bdeee8569c4397ad706", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmYyZDcyZTBlMTAzOGRiZDU3MTMxYmRlZWU4NTY5YzQzOTdhZDcwNg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2015-05-24T23:17:58Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2015-05-24T23:17:58Z"}, "message": "re PR c++/66243 (enum class value is allowed to be initialized by value from other enum class)\n\n\tcp/\n\tPR c++/66243\n\t* decl.c (build_enumerator): Don't silently convert scoped enums.\n\n\ttestsuite/\n\tPR c++/66243\n\t* g++.dg/cpp0x/pr66243.C: New.\n\nFrom-SVN: r223636", "tree": {"sha": "31c442197b0ab466c1ed27cd1a65f1b98830d743", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/31c442197b0ab466c1ed27cd1a65f1b98830d743"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f2d72e0e1038dbd57131bdeee8569c4397ad706", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f2d72e0e1038dbd57131bdeee8569c4397ad706", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f2d72e0e1038dbd57131bdeee8569c4397ad706", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f2d72e0e1038dbd57131bdeee8569c4397ad706/comments", "author": null, "committer": null, "parents": [{"sha": "bce0e38df986d827d49928f0021e4e995e605ad7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce0e38df986d827d49928f0021e4e995e605ad7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bce0e38df986d827d49928f0021e4e995e605ad7"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "92c47388f74a1b97b64e8474f2413691d5acf354", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6f2d72e0e1038dbd57131bdeee8569c4397ad706", "patch": "@@ -1,4 +1,9 @@\n-2015-05-22  Jan Hubicka  <hubicka@ucw.cz>\n+2015-05-24  Nathan Sidwell  <nathan@acm.org>\n+\n+\tPR c++/66243\n+\t* decl.c (build_enumerator): Don't silently convert scoped enums.\n+\n+2015-05-24  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR lto/66180\n \t* mangle.c (mangle_decl): Mangle anonymous namespace types as"}, {"sha": "41530c12947791c3ff6139c19e7237229889fb7d", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=6f2d72e0e1038dbd57131bdeee8569c4397ad706", "patch": "@@ -13097,7 +13097,8 @@ build_enumerator (tree name, tree value, tree enumtype, tree attributes,\n \t      if (tmp_value)\n \t\tvalue = tmp_value;\n \t    }\n-\t  else if (! INTEGRAL_OR_ENUMERATION_TYPE_P (TREE_TYPE (value)))\n+\t  else if (! INTEGRAL_OR_UNSCOPED_ENUMERATION_TYPE_P\n+\t\t   (TREE_TYPE (value)))\n \t    value = perform_implicit_conversion_flags\n \t      (ENUM_UNDERLYING_TYPE (enumtype), value, tf_warning_or_error,\n \t       LOOKUP_IMPLICIT | LOOKUP_NO_NARROWING);"}, {"sha": "e41d7e89fcce5373aa4550422a85bc9601abb741", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f2d72e0e1038dbd57131bdeee8569c4397ad706", "patch": "@@ -1,4 +1,9 @@\n-2015-05-22  Jan Hubicka  <hubicka@ucw.cz>\n+2015-05-23  Nathan Sidwell  <nathan@acm.org>\n+\n+\tPR c++/66243\n+\t* g++.dg/cpp0x/pr66243.C: New.\n+\n+2015-05-24  Jan Hubicka  <hubicka@ucw.cz>\n \n \tPR lto/66180\n \t* g++.dg/lto/pr66180_0.C: New testcase."}, {"sha": "41465a039265a3f30c4b4c46fdfe177c575fbabe", "filename": "gcc/testsuite/g++.dg/cpp0x/pr66243.C", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr66243.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f2d72e0e1038dbd57131bdeee8569c4397ad706/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr66243.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr66243.C?ref=6f2d72e0e1038dbd57131bdeee8569c4397ad706", "patch": "@@ -0,0 +1,12 @@\n+// { dg-do compile { target c++11 } }\n+\n+enum class A\n+{\n+  X\n+};\n+\n+enum class B\n+{\n+  X = A::X // { dg-error \"could not convert\" }\n+};\n+"}]}