{"sha": "71cf7c0a0e929550f82b4ac70ac1fd068253039e", "node_id": "C_kwDOANBUbNoAKDcxY2Y3YzBhMGU5Mjk1NTBmODJiNGFjNzBhYzFmZDA2ODI1MzAzOWU", "commit": {"author": {"name": "Bill Schmidt", "email": "wschmidt@linux.ibm.com", "date": "2021-11-08T14:17:53Z"}, "committer": {"name": "Bill Schmidt", "email": "wschmidt@linux.ibm.com", "date": "2021-11-08T14:49:37Z"}, "message": "rs6000: Update rs6000_builtin_decl\n\nCreate a new version of this function that uses the new infrastructure,\nand particularly checks for supported builtins the new way.\n\n2021-11-08  Bill Schmidt  <wschmidt@linux.ibm.com>\n\ngcc/\n\t* config/rs6000/rs6000-call.c (rs6000_new_builtin_decl): New function.\n\t(rs6000_builtin_decl): Call it.", "tree": {"sha": "aa22f672f52a26cb6c8d88c288123fb5eec27fcd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa22f672f52a26cb6c8d88c288123fb5eec27fcd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/71cf7c0a0e929550f82b4ac70ac1fd068253039e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cf7c0a0e929550f82b4ac70ac1fd068253039e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71cf7c0a0e929550f82b4ac70ac1fd068253039e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71cf7c0a0e929550f82b4ac70ac1fd068253039e/comments", "author": null, "committer": null, "parents": [{"sha": "355eb60b6672220642fae853021599afaa87dfd6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/355eb60b6672220642fae853021599afaa87dfd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/355eb60b6672220642fae853021599afaa87dfd6"}], "stats": {"total": 20, "additions": 20, "deletions": 0}, "files": [{"sha": "9ddc34151bfc4e490ced7c900449a295218950d2", "filename": "gcc/config/rs6000/rs6000-call.c", "status": "modified", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/71cf7c0a0e929550f82b4ac70ac1fd068253039e/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/71cf7c0a0e929550f82b4ac70ac1fd068253039e/gcc%2Fconfig%2Frs6000%2Frs6000-call.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000-call.c?ref=71cf7c0a0e929550f82b4ac70ac1fd068253039e", "patch": "@@ -16411,11 +16411,31 @@ rs6000_init_builtins (void)\n     }\n }\n \n+static tree\n+rs6000_new_builtin_decl (unsigned code, bool /* initialize_p */)\n+{\n+  rs6000_gen_builtins fcode = (rs6000_gen_builtins) code;\n+\n+  if (fcode >= RS6000_OVLD_MAX)\n+    return error_mark_node;\n+\n+  if (!rs6000_new_builtin_is_supported (fcode))\n+    {\n+      rs6000_invalid_new_builtin (fcode);\n+      return error_mark_node;\n+    }\n+\n+  return rs6000_builtin_decls_x[code];\n+}\n+\n /* Returns the rs6000 builtin decl for CODE.  */\n \n tree\n rs6000_builtin_decl (unsigned code, bool initialize_p ATTRIBUTE_UNUSED)\n {\n+  if (new_builtins_are_live)\n+    return rs6000_new_builtin_decl (code, initialize_p);\n+\n   HOST_WIDE_INT fnmask;\n \n   if (code >= RS6000_BUILTIN_COUNT)"}]}