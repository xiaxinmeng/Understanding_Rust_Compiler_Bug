{"sha": "036aadfc777a9b86ae65394c7cc1116688fc90a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM2YWFkZmM3NzdhOWI4NmFlNjUzOTRjN2NjMTExNjY4OGZjOTBhOQ==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2006-03-26T22:48:22Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2006-03-26T22:48:22Z"}, "message": "re PR target/26459 (gcc fails to build on powerpc e500-double targets)\n\n\tPR target/26459\n\t* config/rs6000/rs6000.md (DF reg move peephole): Prevent\n\tpeephole removing spe frob_di_df_2.\n\nFrom-SVN: r112400", "tree": {"sha": "a3a49f08e12d44fed2660a8823c3f8ea14373434", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a3a49f08e12d44fed2660a8823c3f8ea14373434"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/036aadfc777a9b86ae65394c7cc1116688fc90a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/036aadfc777a9b86ae65394c7cc1116688fc90a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/036aadfc777a9b86ae65394c7cc1116688fc90a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/036aadfc777a9b86ae65394c7cc1116688fc90a9/comments", "author": null, "committer": null, "parents": [{"sha": "ba42e045f7da0362ac1ff19ce0a2210999f7f1f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba42e045f7da0362ac1ff19ce0a2210999f7f1f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba42e045f7da0362ac1ff19ce0a2210999f7f1f8"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "0f50ac3d6b79518f337c65b2fc2f5c22a6972dc8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/036aadfc777a9b86ae65394c7cc1116688fc90a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/036aadfc777a9b86ae65394c7cc1116688fc90a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=036aadfc777a9b86ae65394c7cc1116688fc90a9", "patch": "@@ -1,3 +1,9 @@\n+2006-03-27  Alan Modra  <amodra@bigpond.net.au>\n+\n+\tPR target/26459\n+\t* config/rs6000/rs6000.md (DF reg move peephole): Prevent\n+\tpeephole removing spe frob_di_df_2.\n+\n 2006-03-26  Sebastian Pop  <pop@cri.ensmp.fr>\n \n \t* tree-data-ref.c: Rename DDR_SIZE_VECT to DDR_NB_LOOPS."}, {"sha": "06670d2ac36c68810006196f3eadc11362532680", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/036aadfc777a9b86ae65394c7cc1116688fc90a9/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/036aadfc777a9b86ae65394c7cc1116688fc90a9/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=036aadfc777a9b86ae65394c7cc1116688fc90a9", "patch": "@@ -9765,18 +9765,20 @@\n   \"operands[0] = widen_memory_access (operands[0], V2DFmode, 0);\n    operands[1] = gen_rtx_REG (V2DFmode, REGNO (operands[1]));\")\n \n-;; after inserting conditional returns we can sometimes have\n+;; After inserting conditional returns we can sometimes have\n ;; unnecessary register moves.  Unfortunately we cannot have a\n ;; modeless peephole here, because some single SImode sets have early\n ;; clobber outputs.  Although those sets expand to multi-ppc-insn\n ;; sequences, using get_attr_length here will smash the operands\n ;; array.  Neither is there an early_cobbler_p predicate.\n+;; Disallow subregs for E500 so we don't munge frob_di_df_2.\n (define_peephole2\n   [(set (match_operand:DF 0 \"gpc_reg_operand\" \"\")\n \t(match_operand:DF 1 \"any_operand\" \"\"))\n    (set (match_operand:DF 2 \"gpc_reg_operand\" \"\")\n \t(match_dup 0))]\n-  \"peep2_reg_dead_p (2, operands[0])\"\n+  \"!(TARGET_E500_DOUBLE && GET_CODE (operands[2]) == SUBREG)\n+   && peep2_reg_dead_p (2, operands[0])\"\n   [(set (match_dup 2) (match_dup 1))])\n \n (define_peephole2"}]}