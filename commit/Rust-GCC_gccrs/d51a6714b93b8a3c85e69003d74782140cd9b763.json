{"sha": "d51a6714b93b8a3c85e69003d74782140cd9b763", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUxYTY3MTRiOTNiOGEzYzg1ZTY5MDAzZDc0NzgyMTQwY2Q5Yjc2Mw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2015-05-21T19:17:28Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2015-05-21T19:17:28Z"}, "message": "re PR tree-optimization/66233 (internal compiler error: in expand_fix, at optabs.c:5358)\n\n\tPR tree-optimization/66233\n\t* match.pd (ocvt (icvt@1 @0)): Don't handle vector types.\n\tSimplify.\n\n\t* gcc.c-torture/execute/pr66233.c: New test.\n\nFrom-SVN: r223500", "tree": {"sha": "1e657edfce1ba3c213edcb45377647ad24b46861", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e657edfce1ba3c213edcb45377647ad24b46861"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d51a6714b93b8a3c85e69003d74782140cd9b763", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d51a6714b93b8a3c85e69003d74782140cd9b763", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d51a6714b93b8a3c85e69003d74782140cd9b763", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d51a6714b93b8a3c85e69003d74782140cd9b763/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c39d5e4a6a900227a279e5cadfb52168eb2397c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c39d5e4a6a900227a279e5cadfb52168eb2397c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c39d5e4a6a900227a279e5cadfb52168eb2397c0"}], "stats": {"total": 47, "additions": 38, "deletions": 9}, "files": [{"sha": "a74a7ad8c2cb99bacc4a544741f7baa1b0fc294d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d51a6714b93b8a3c85e69003d74782140cd9b763", "patch": "@@ -1,3 +1,9 @@\n+2015-05-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/66233\n+\t* match.pd (ocvt (icvt@1 @0)): Don't handle vector types.\n+\tSimplify.\n+\n 2015-05-21  Jeff Law  <law@redhat.com>\n \n \t* config/pa/pa.md (add-with-constant splitter): Use ASHIFT rather"}, {"sha": "73ccfbd4b00e7e5054bd9c1ce327c702338f4803", "filename": "gcc/match.pd", "status": "modified", "additions": 5, "deletions": 9, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2Fmatch.pd", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2Fmatch.pd", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmatch.pd?ref=d51a6714b93b8a3c85e69003d74782140cd9b763", "patch": "@@ -730,16 +730,12 @@ along with GCC; see the file COPYING3.  If not see\n       (for integers).  Avoid this if the final type is a pointer since\n       then we sometimes need the middle conversion.  Likewise if the\n       final type has a precision not equal to the size of its mode.  */\n-   (if (((inter_int && inside_int)\n-\t || (inter_float && inside_float)\n-\t || (inter_vec && inside_vec))\n+   (if (((inter_int && inside_int) || (inter_float && inside_float))\n+\t&& (final_int || final_float)\n \t&& inter_prec >= inside_prec\n-\t&& (inter_float || inter_vec\n-\t    || inter_unsignedp == inside_unsignedp)\n-\t&& ! (final_prec != GET_MODE_PRECISION (element_mode (type))\n-\t      && element_mode (type) == element_mode (inter_type))\n-\t&& ! final_ptr\n-\t&& (! final_vec || inter_prec == inside_prec))\n+\t&& (inter_float || inter_unsignedp == inside_unsignedp)\n+\t&& ! (final_prec != GET_MODE_PRECISION (TYPE_MODE (type))\n+\t      && TYPE_MODE (type) == TYPE_MODE (inter_type)))\n     (ocvt @0))\n \n    /* If we have a sign-extension of a zero-extended value, we can"}, {"sha": "e5083f65bf13a8fbff96041afef45cfbdc955c8c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d51a6714b93b8a3c85e69003d74782140cd9b763", "patch": "@@ -1,3 +1,8 @@\n+2015-05-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/66233\n+\t* gcc.c-torture/execute/pr66233.c: New test.\n+\n 2015-05-21  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/66176"}, {"sha": "b0d63b685849fb3664d6e68cf2981934a902c6b9", "filename": "gcc/testsuite/gcc.c-torture/execute/pr66233.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr66233.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d51a6714b93b8a3c85e69003d74782140cd9b763/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr66233.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr66233.c?ref=d51a6714b93b8a3c85e69003d74782140cd9b763", "patch": "@@ -0,0 +1,22 @@\n+/* PR tree-optimization/66233 */\n+\n+unsigned int v[8];\n+\n+__attribute__((noinline, noclone)) void\n+foo (void)\n+{\n+  int i;\n+  for (i = 0; i < 8; i++)\n+    v[i] = (float) i;\n+}\n+\n+int\n+main ()\n+{\n+  unsigned int i;\n+  foo ();\n+  for (i = 0; i < 8; i++)\n+    if (v[i] != i)\n+      __builtin_abort ();\n+  return 0;\n+}"}]}