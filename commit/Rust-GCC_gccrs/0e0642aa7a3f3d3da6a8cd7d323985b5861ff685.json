{"sha": "0e0642aa7a3f3d3da6a8cd7d323985b5861ff685", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGUwNjQyYWE3YTNmM2QzZGE2YThjZDdkMzIzOTg1YjU4NjFmZjY4NQ==", "commit": {"author": {"name": "Rask Ingemann Lambertsen", "email": "rask@gcc.gnu.org", "date": "2007-06-20T19:57:32Z"}, "committer": {"name": "Rask Ingemann Lambertsen", "email": "rask@gcc.gnu.org", "date": "2007-06-20T19:57:32Z"}, "message": "re PR target/32335 (libgcc build failure, ICE in cselib_record_set, at cselib.c:1508)\n\n2007-06-20  Rask Ingemann Lambertsen  <rask@sygehus.dk>\n\n\tPR target/32335\n\t* config/m32c/m32c.c (m32c_emit_epilogue): Use new HImode epilogue\n\tfor TARGET_A16.\n\t* config/m32c/prologue.md (epilogue_exitd_16): New.\n\t(epilogue_reit_16): New.\n\t(epilogue_exitd): Rename to epilogue_exitd_24.\n\t(epilogue_reit): Rename to epilogue_reit_24.\n\nFrom-SVN: r125892", "tree": {"sha": "0d5f5987a4bc7f7bc3e555475062f5d7f03b578d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d5f5987a4bc7f7bc3e555475062f5d7f03b578d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685/comments", "author": null, "committer": null, "parents": [{"sha": "b631c5f74230c5d6ee970227136fa4280911e6ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b631c5f74230c5d6ee970227136fa4280911e6ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b631c5f74230c5d6ee970227136fa4280911e6ca"}], "stats": {"total": 45, "additions": 37, "deletions": 8}, "files": [{"sha": "161d5edd282c0bf949d00b55aeba058aa1f45489", "filename": "gcc/config/m32c/m32c.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685/gcc%2Fconfig%2Fm32c%2Fm32c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685/gcc%2Fconfig%2Fm32c%2Fm32c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fm32c.c?ref=0e0642aa7a3f3d3da6a8cd7d323985b5861ff685", "patch": "@@ -4026,12 +4026,17 @@ m32c_emit_epilogue (void)\n       else\n \temit_insn (gen_poppsi (gen_rtx_REG (PSImode, FP_REGNO)));\n       emit_insn (gen_popm (GEN_INT (cfun->machine->intr_pushm)));\n-      emit_jump_insn (gen_epilogue_reit (GEN_INT (TARGET_A16 ? 4 : 6)));\n+      if (TARGET_A16)\n+\temit_jump_insn (gen_epilogue_reit_16 ());\n+      else\n+\temit_jump_insn (gen_epilogue_reit_24 ());\n     }\n   else if (cfun->machine->use_rts)\n     emit_jump_insn (gen_epilogue_rts ());\n+  else if (TARGET_A16)\n+    emit_jump_insn (gen_epilogue_exitd_16 ());\n   else\n-    emit_jump_insn (gen_epilogue_exitd (GEN_INT (TARGET_A16 ? 2 : 4)));\n+    emit_jump_insn (gen_epilogue_exitd_24 ());\n   emit_barrier ();\n }\n "}, {"sha": "23a38f0a22877b6ed953a8b7e52127e31fb20309", "filename": "gcc/config/m32c/prologue.md", "status": "modified", "additions": 30, "deletions": 6, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685/gcc%2Fconfig%2Fm32c%2Fprologue.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e0642aa7a3f3d3da6a8cd7d323985b5861ff685/gcc%2Fconfig%2Fm32c%2Fprologue.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fprologue.md?ref=0e0642aa7a3f3d3da6a8cd7d323985b5861ff685", "patch": "@@ -102,26 +102,50 @@\n   [(set_attr \"flags\" \"x\")]\n   )\n \n-(define_insn \"epilogue_exitd\"\n+(define_insn \"epilogue_exitd_16\"\n+  [(set (reg:HI SP_REGNO)\n+\t(plus:HI (reg:HI FB_REGNO)\n+\t      (const_int 2)))\n+   (set (reg:HI FB_REGNO)\n+\t(mem:HI (reg:HI FB_REGNO)))\n+   (return)\n+   ]\n+  \"TARGET_A16\"\n+  \"exitd\"\n+  [(set_attr \"flags\" \"x\")]\n+  )\n+\n+(define_insn \"epilogue_reit_16\"\n+  [(set (reg:HI SP_REGNO)\n+\t(plus:HI (reg:HI SP_REGNO)\n+\t      (const_int 4)))\n+   (return)\n+   ]\n+  \"TARGET_A16\"\n+  \"reit\"\n+  [(set_attr \"flags\" \"x\")]\n+  )\n+\n+(define_insn \"epilogue_exitd_24\"\n   [(set (reg:PSI SP_REGNO)\n \t(plus:PSI (reg:PSI FB_REGNO)\n-\t      (match_operand 0 \"const_int_operand\" \"i\")))\n+\t      (const_int 4)))\n    (set (reg:PSI FB_REGNO)\n \t(mem:PSI (reg:PSI FB_REGNO)))\n    (return)\n    ]\n-  \"\"\n+  \"TARGET_A24\"\n   \"exitd\"\n   [(set_attr \"flags\" \"x\")]\n   )\n \n-(define_insn \"epilogue_reit\"\n+(define_insn \"epilogue_reit_24\"\n   [(set (reg:PSI SP_REGNO)\n \t(plus:PSI (reg:PSI SP_REGNO)\n-\t      (match_operand 0 \"const_int_operand\" \"i\")))\n+\t      (const_int 6)))\n    (return)\n    ]\n-  \"\"\n+  \"TARGET_A24\"\n   \"reit\"\n   [(set_attr \"flags\" \"x\")]\n   )"}]}