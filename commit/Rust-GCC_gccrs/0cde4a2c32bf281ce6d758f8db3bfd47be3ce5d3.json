{"sha": "0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNkZTRhMmMzMmJmMjgxY2U2ZDc1OGY4ZGIzYmZkNDdiZTNjZTVkMw==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2004-11-05T10:56:01Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2004-11-05T10:56:01Z"}, "message": "re PR tree-optimization/18307 (merge_pointed_to_info called incorrectly)\n\n\tPR tree-optimization/18307\n\t* tree-ssa-alias.c (merge_pointed_to_info): Protected against DEST\n\tand ORIG being the same node.\n\nFrom-SVN: r90120", "tree": {"sha": "c205d65c8eaae723466d51eded56f2fe8582c111", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c205d65c8eaae723466d51eded56f2fe8582c111"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3/comments", "author": null, "committer": null, "parents": [{"sha": "6866abb8152498e8fd6b0337de5e0e332db1115c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6866abb8152498e8fd6b0337de5e0e332db1115c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6866abb8152498e8fd6b0337de5e0e332db1115c"}], "stats": {"total": 19, "additions": 17, "deletions": 2}, "files": [{"sha": "7ad955160b82a5612faafe1586150a8dc0f0f58f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3", "patch": "@@ -1,3 +1,9 @@\n+2004-11-05  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR tree-optimization/18307\n+\t* tree-ssa-alias.c (merge_pointed_to_info): Protected against DEST\n+\tand ORIG being the same node.\n+\n 2004-11-04  Geoffrey Keating  <geoffk@apple.com>\n \n \t* Makefile.in (distclean): Don't delete nonexistent fixinc/ directory."}, {"sha": "8e424275b173267366151922645836bae404b3c8", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=0cde4a2c32bf281ce6d758f8db3bfd47be3ce5d3", "patch": "@@ -1687,14 +1687,21 @@ set_pt_malloc (tree ptr)\n }\n \n \n-/* Given two pointers DEST and ORIG.  Merge the points-to information in\n-   ORIG into DEST.  AI is as in collect_points_to_info.  */\n+/* Given two different pointers DEST and ORIG.  Merge the points-to\n+   information in ORIG into DEST.  AI is as in\n+   collect_points_to_info.  */\n \n static void\n merge_pointed_to_info (struct alias_info *ai, tree dest, tree orig)\n {\n   struct ptr_info_def *dest_pi, *orig_pi;\n \n+  /* FIXME: It is erroneous to call this function with identical\n+     nodes, however that currently occurs during bootstrap.  This check\n+     stops further breakage.  PR 18307 documents the issue.  */\n+  if (dest == orig)\n+    return;\n+  \n   /* Make sure we have points-to information for ORIG.  */\n   collect_points_to_info_for (ai, orig);\n \n@@ -1725,6 +1732,8 @@ merge_pointed_to_info (struct alias_info *ai, tree dest, tree orig)\n \t smart enough to determine that the two come from the same\n \t malloc call.  Copy propagation before aliasing should cure\n \t this.  */\n+      gcc_assert (orig_pi != dest_pi);\n+      \n       dest_pi->pt_malloc = 0;\n \n       if (orig_pi->pt_malloc || orig_pi->pt_anything)"}]}