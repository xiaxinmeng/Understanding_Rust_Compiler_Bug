{"sha": "dfb7f9c123ad930734aaa2befbbf40163f115920", "node_id": "C_kwDOANBUbNoAKGRmYjdmOWMxMjNhZDkzMDczNGFhYTJiZWZiYmY0MDE2M2YxMTU5MjA", "commit": {"author": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-01-21T20:00:20Z"}, "committer": {"name": "Philip Herron", "email": "philip.herron@embecosm.com", "date": "2022-01-21T20:06:21Z"}, "message": "Add Mappings::iterate_trait_items helper", "tree": {"sha": "9225975221fd80eea36c855b0cc8625394598c69", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9225975221fd80eea36c855b0cc8625394598c69"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfb7f9c123ad930734aaa2befbbf40163f115920", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb7f9c123ad930734aaa2befbbf40163f115920", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfb7f9c123ad930734aaa2befbbf40163f115920", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfb7f9c123ad930734aaa2befbbf40163f115920/comments", "author": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "committer": {"login": "philberty", "id": 84585, "node_id": "MDQ6VXNlcjg0NTg1", "avatar_url": "https://avatars.githubusercontent.com/u/84585?v=4", "gravatar_id": "", "url": "https://api.github.com/users/philberty", "html_url": "https://github.com/philberty", "followers_url": "https://api.github.com/users/philberty/followers", "following_url": "https://api.github.com/users/philberty/following{/other_user}", "gists_url": "https://api.github.com/users/philberty/gists{/gist_id}", "starred_url": "https://api.github.com/users/philberty/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/philberty/subscriptions", "organizations_url": "https://api.github.com/users/philberty/orgs", "repos_url": "https://api.github.com/users/philberty/repos", "events_url": "https://api.github.com/users/philberty/events{/privacy}", "received_events_url": "https://api.github.com/users/philberty/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "a6c5dbadc3c9023821244bd4af4e78ad9d8f63f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6c5dbadc3c9023821244bd4af4e78ad9d8f63f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6c5dbadc3c9023821244bd4af4e78ad9d8f63f2"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "786fc5a627e91562d8809ed8c2dbccf3f46df98c", "filename": "gcc/rust/util/rust-hir-map.cc", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb7f9c123ad930734aaa2befbbf40163f115920/gcc%2Frust%2Futil%2Frust-hir-map.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb7f9c123ad930734aaa2befbbf40163f115920/gcc%2Frust%2Futil%2Frust-hir-map.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Futil%2Frust-hir-map.cc?ref=dfb7f9c123ad930734aaa2befbbf40163f115920", "patch": "@@ -719,5 +719,24 @@ Mappings::iterate_impl_blocks (std::function<bool (HirId, HIR::ImplBlock *)> cb)\n     }\n }\n \n+void\n+Mappings::iterate_trait_items (\n+  std::function<bool (HIR::TraitItem *, HIR::Trait *)> cb)\n+{\n+  for (auto it = hirTraitItemMappings.begin ();\n+       it != hirTraitItemMappings.end (); it++)\n+    {\n+      for (auto iy = it->second.begin (); iy != it->second.end (); iy++)\n+\t{\n+\t  HirId trait_item_id = iy->first;\n+\t  HIR::TraitItem *trait_item = iy->second;\n+\t  HIR::Trait *trait = lookup_trait_item_mapping (trait_item_id);\n+\n+\t  if (!cb (trait_item, trait))\n+\t    return;\n+\t}\n+    }\n+}\n+\n } // namespace Analysis\n } // namespace Rust"}, {"sha": "ec08170af83c5789763c6a139d84b681093a9daf", "filename": "gcc/rust/util/rust-hir-map.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfb7f9c123ad930734aaa2befbbf40163f115920/gcc%2Frust%2Futil%2Frust-hir-map.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfb7f9c123ad930734aaa2befbbf40163f115920/gcc%2Frust%2Futil%2Frust-hir-map.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Futil%2Frust-hir-map.h?ref=dfb7f9c123ad930734aaa2befbbf40163f115920", "patch": "@@ -474,6 +474,9 @@ class Mappings\n \n   void iterate_impl_blocks (std::function<bool (HirId, HIR::ImplBlock *)> cb);\n \n+  void iterate_trait_items (\n+    std::function<bool (HIR::TraitItem *item, HIR::Trait *)> cb);\n+\n   bool is_impl_item (HirId id)\n   {\n     HirId parent_impl_block_id = UNKNOWN_HIRID;"}]}