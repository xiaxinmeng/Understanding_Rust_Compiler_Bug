{"sha": "3e6011cfebedfb66b92c87e6d2add9237188819e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2U2MDExY2ZlYmVkZmI2NmI5MmM4N2U2ZDJhZGQ5MjM3MTg4ODE5ZQ==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2012-08-07T16:08:49Z"}, "committer": {"name": "Sandra Loosemore", "email": "sandra@gcc.gnu.org", "date": "2012-08-07T16:08:49Z"}, "message": "except.c (switch_to_exception_section): Place tables for DECL_ONE_ONLY functions in comdat groups.\n\n2012-08-07  Paul Brook  <paul@codesourcery.com>\n\t    Sandra Loosemore  <sandra@codesourcery.com>\n\n\tgcc/\n\t* except.c (switch_to_exception_section): Place tables for\n\tDECL_ONE_ONLY functions in comdat groups.\n\nCo-Authored-By: Sandra Loosemore <sandra@codesourcery.com>\n\nFrom-SVN: r190206", "tree": {"sha": "ac5f1054288e8389349f643548ad266bf0455668", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac5f1054288e8389349f643548ad266bf0455668"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3e6011cfebedfb66b92c87e6d2add9237188819e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e6011cfebedfb66b92c87e6d2add9237188819e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3e6011cfebedfb66b92c87e6d2add9237188819e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3e6011cfebedfb66b92c87e6d2add9237188819e/comments", "author": null, "committer": null, "parents": [{"sha": "070ecdfd0300a9aebdaaff78f8e10184e9152042", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/070ecdfd0300a9aebdaaff78f8e10184e9152042", "html_url": "https://github.com/Rust-GCC/gccrs/commit/070ecdfd0300a9aebdaaff78f8e10184e9152042"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "5896e0b7f11301c2a755d7ad539256864a723ca7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6011cfebedfb66b92c87e6d2add9237188819e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6011cfebedfb66b92c87e6d2add9237188819e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3e6011cfebedfb66b92c87e6d2add9237188819e", "patch": "@@ -1,3 +1,9 @@\n+2012-08-07  Paul Brook  <paul@codesourcery.com>\n+\t    Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* except.c (switch_to_exception_section): Place tables for\n+\tDECL_ONE_ONLY functions in comdat groups.\n+\n 2012-08-07  Richard Guenther  <rguenther@suse.de>\n \n \t* tree-flow.h (copy_ssa_name_fn): New function."}, {"sha": "605d8d7b829d9257f7eafe9b68367bce724dca47", "filename": "gcc/except.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3e6011cfebedfb66b92c87e6d2add9237188819e/gcc%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3e6011cfebedfb66b92c87e6d2add9237188819e/gcc%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexcept.c?ref=3e6011cfebedfb66b92c87e6d2add9237188819e", "patch": "@@ -2777,11 +2777,16 @@ switch_to_exception_section (const char * ARG_UNUSED (fnname))\n \t    flags = SECTION_WRITE;\n \n #ifdef HAVE_LD_EH_GC_SECTIONS\n-\t  if (flag_function_sections)\n+\t  if (flag_function_sections\n+\t      || (DECL_ONE_ONLY (current_function_decl) && HAVE_COMDAT_GROUP))\n \t    {\n \t      char *section_name = XNEWVEC (char, strlen (fnname) + 32);\n+\t      /* The EH table must match the code section, so only mark\n+\t\t it linkonce if we have COMDAT groups to tie them together.  */\n+\t      if (DECL_ONE_ONLY (current_function_decl) && HAVE_COMDAT_GROUP)\n+\t\tflags |= SECTION_LINKONCE;\n \t      sprintf (section_name, \".gcc_except_table.%s\", fnname);\n-\t      s = get_section (section_name, flags, NULL);\n+\t      s = get_section (section_name, flags, current_function_decl);\n \t      free (section_name);\n \t    }\n \t  else"}]}