{"sha": "592c90ff9f036e09f1f566ebd2433faefb17d50f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTkyYzkwZmY5ZjAzNmUwOWYxZjU2NmViZDI0MzNmYWVmYjE3ZDUwZg==", "commit": {"author": {"name": "Kaveh R. Ghazi", "email": "ghazi@caip.rutgers.edu", "date": "2010-01-07T21:58:23Z"}, "committer": {"name": "Kaveh Ghazi", "email": "ghazi@gcc.gnu.org", "date": "2010-01-07T21:58:23Z"}, "message": "re PR bootstrap/42424 (in-tree GMP/MPFR/MPC bootstrap fails)\n\n\tPR bootstrap/42424\n\t* configure.ac: Include libtool m4 files.\n        (_LT_CHECK_OBJDIR): Call it.\n\t(extra_mpc_mpfr_configure_flags, extra_mpc_gmp_configure_flags,\n\tgmplibs, ppllibs, clooglibs): Use $lt_cv_objdir.\n\t\n\t* configure: Regenerate.\n\n\n\nCo-Authored-By: Francois-Xavier Coudert <fxcoudert@gcc.gnu.org>\n\nFrom-SVN: r155712", "tree": {"sha": "89a770926c4b2ee0c5f3c30d16d3367fd54c6a24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89a770926c4b2ee0c5f3c30d16d3367fd54c6a24"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/592c90ff9f036e09f1f566ebd2433faefb17d50f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/592c90ff9f036e09f1f566ebd2433faefb17d50f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/592c90ff9f036e09f1f566ebd2433faefb17d50f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/592c90ff9f036e09f1f566ebd2433faefb17d50f/comments", "author": null, "committer": null, "parents": [{"sha": "d91ae0ab0f7f1cae9f0276ec95a24e24cbca8acd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d91ae0ab0f7f1cae9f0276ec95a24e24cbca8acd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d91ae0ab0f7f1cae9f0276ec95a24e24cbca8acd"}], "stats": {"total": 77, "additions": 63, "deletions": 14}, "files": [{"sha": "b31cdaffad7bdcee8163a26ca2e97b7732b30fab", "filename": "ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/592c90ff9f036e09f1f566ebd2433faefb17d50f/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/592c90ff9f036e09f1f566ebd2433faefb17d50f/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=592c90ff9f036e09f1f566ebd2433faefb17d50f", "patch": "@@ -1,3 +1,14 @@\n+2010-01-07  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n+            Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n+\n+\tPR bootstrap/42424\n+\t* configure.ac: Include libtool m4 files.\n+        (_LT_CHECK_OBJDIR): Call it.\n+\t(extra_mpc_mpfr_configure_flags, extra_mpc_gmp_configure_flags,\n+\tgmplibs, ppllibs, clooglibs): Use $lt_cv_objdir.\n+\t\n+\t* configure: Regenerate.\n+\n 2010-01-07  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>\n \n \tPR bootstrap/41818"}, {"sha": "f99b05c7643f97517f2db5a94f63debb9d7e61ea", "filename": "configure", "status": "modified", "additions": 37, "deletions": 7, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/592c90ff9f036e09f1f566ebd2433faefb17d50f/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/592c90ff9f036e09f1f566ebd2433faefb17d50f/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=592c90ff9f036e09f1f566ebd2433faefb17d50f", "patch": "@@ -5284,6 +5284,36 @@ else\n fi\n \n \n+# Used for setting $lt_cv_objdir\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: checking for objdir\" >&5\n+$as_echo_n \"checking for objdir... \" >&6; }\n+if test \"${lt_cv_objdir+set}\" = set; then :\n+  $as_echo_n \"(cached) \" >&6\n+else\n+  rm -f .libs 2>/dev/null\n+mkdir .libs 2>/dev/null\n+if test -d .libs; then\n+  lt_cv_objdir=.libs\n+else\n+  # MS-DOS does not allow filenames that begin with a dot.\n+  lt_cv_objdir=_libs\n+fi\n+rmdir .libs 2>/dev/null\n+fi\n+{ $as_echo \"$as_me:${as_lineno-$LINENO}: result: $lt_cv_objdir\" >&5\n+$as_echo \"$lt_cv_objdir\" >&6; }\n+objdir=$lt_cv_objdir\n+\n+\n+\n+\n+\n+cat >>confdefs.h <<_ACEOF\n+#define LT_OBJDIR \"$lt_cv_objdir/\"\n+_ACEOF\n+\n+\n+\n # Check for GMP, MPFR and MPC\n gmplibs=\"-lmpc -lmpfr -lgmp\"\n gmpinc=\n@@ -5321,7 +5351,7 @@ if test \"x$with_mpc_lib\" != x; then\n   gmplibs=\"-L$with_mpc_lib $gmplibs\"\n fi\n if test \"x$with_mpc$with_mpc_include$with_mpc_lib\" = x && test -d ${srcdir}/mpc; then\n-  gmplibs='-L$$r/$(HOST_SUBDIR)/mpc/src/.libs -L$$r/$(HOST_SUBDIR)/mpc/src/_libs '\"$gmplibs\"\n+  gmplibs='-L$$r/$(HOST_SUBDIR)/mpc/src/'\"$lt_cv_objdir $gmplibs\"\n   gmpinc='-I$$s/mpc/src '\"$gmpinc\"\n   # Do not test the mpc version.  Assume that it is sufficient, since\n   # it is in the source tree, and the library has not been built yet\n@@ -5370,9 +5400,9 @@ if test \"x$with_mpfr_lib\" != x; then\n   gmplibs=\"-L$with_mpfr_lib $gmplibs\"\n fi\n if test \"x$with_mpfr$with_mpfr_include$with_mpfr_lib\" = x && test -d ${srcdir}/mpfr; then\n-  gmplibs='-L$$r/$(HOST_SUBDIR)/mpfr/.libs -L$$r/$(HOST_SUBDIR)/mpfr/_libs '\"$gmplibs\"\n+  gmplibs='-L$$r/$(HOST_SUBDIR)/mpfr/'\"$lt_cv_objdir $gmplibs\"\n   gmpinc='-I$$r/$(HOST_SUBDIR)/mpfr -I$$s/mpfr '\"$gmpinc\"\n-  extra_mpc_mpfr_configure_flags='--with-mpfr-include=$$s/mpfr'\n+  extra_mpc_mpfr_configure_flags='--with-mpfr-include=$$s/mpfr --with-mpfr-lib=$$r/$(HOST_SUBDIR)/mpfr/'\"$lt_cv_objdir\"\n   # Do not test the mpfr version.  Assume that it is sufficient, since\n   # it is in the source tree, and the library has not been built yet\n   # but it would be included on the link line in the version check below\n@@ -5420,10 +5450,10 @@ if test \"x$with_gmp_lib\" != x; then\n   gmplibs=\"-L$with_gmp_lib $gmplibs\"\n fi\n if test \"x$with_gmp$with_gmp_include$with_gmp_lib\" = x && test -d ${srcdir}/gmp; then\n-  gmplibs='-L$$r/$(HOST_SUBDIR)/gmp/.libs -L$$r/$(HOST_SUBDIR)/gmp/_libs '\"$gmplibs\"\n+  gmplibs='-L$$r/$(HOST_SUBDIR)/gmp/'\"$lt_cv_objdir $gmplibs\"\n   gmpinc='-I$$r/$(HOST_SUBDIR)/gmp -I$$s/gmp '\"$gmpinc\"\n   extra_mpfr_configure_flags='--with-gmp-build=$$r/$(HOST_SUBDIR)/gmp'\n-  extra_mpc_gmp_configure_flags='--with-gmp-include=$$r/$(HOST_SUBDIR)/gmp'\n+  extra_mpc_gmp_configure_flags='--with-gmp-include=$$r/$(HOST_SUBDIR)/gmp --with-gmp-lib=$$r/$(HOST_SUBDIR)/gmp/'\"$lt_cv_objdir\"\n   # Do not test the gmp version.  Assume that it is sufficient, since\n   # it is in the source tree, and the library has not been built yet\n   # but it would be included on the link line in the version check below\n@@ -5737,7 +5767,7 @@ if test \"x$with_ppl_lib\" != x; then\n   ppllibs=\"-L$with_ppl_lib -lppl_c -lppl -lgmpxx\"\n fi\n if test \"x$with_ppl$with_ppl_include$with_ppl_lib\" = x && test -d ${srcdir}/ppl; then\n-  ppllibs='-L$$r/$(HOST_SUBDIR)/ppl/interfaces/C/.libs -L$$r/$(HOST_SUBDIR)/ppl/interfaces/C/_libs -L$$r/$(HOST_SUBDIR)/ppl/src/.libs -L$$r/$(HOST_SUBDIR)/ppl/src/_libs -lppl_c -lppl -lgmpxx '\n+  ppllibs='-L$$r/$(HOST_SUBDIR)/ppl/interfaces/C/'\"$lt_cv_objdir\"' -L$$r/$(HOST_SUBDIR)/ppl/src/'\"$lt_cv_objdir\"' -lppl_c -lppl -lgmpxx '\n   pplinc='-I$$r/$(HOST_SUBDIR)/ppl/src -I$$r/$(HOST_SUBDIR)/ppl/interfaces/C '\n   enable_ppl_version_check=no\n fi\n@@ -5832,7 +5862,7 @@ if test \"x$with_cloog_lib\" != x; then\n   clooglibs=\"-L$with_cloog_lib -lcloog\"\n fi\n if test \"x$with_cloog$with_cloog_include$with_cloog_lib\" = x && test -d ${srcdir}/cloog; then\n-  clooglibs='-L$$r/$(HOST_SUBDIR)/cloog/.libs -L$$r/$(HOST_SUBDIR)/cloog/_libs -lcloog '\n+  clooglibs='-L$$r/$(HOST_SUBDIR)/cloog/'\"$lt_cv_objdir\"' -lcloog '\n   clooginc='-I$$r/$(HOST_SUBDIR)/cloog/include -I$$s/cloog/include -DCLOOG_PPL_BACKEND '\n   enable_cloog_version_check=no\n fi"}, {"sha": "9e5f8881310312015740291285bbdf765e305244", "filename": "configure.ac", "status": "modified", "additions": 15, "deletions": 7, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/592c90ff9f036e09f1f566ebd2433faefb17d50f/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/592c90ff9f036e09f1f566ebd2433faefb17d50f/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=592c90ff9f036e09f1f566ebd2433faefb17d50f", "patch": "@@ -23,6 +23,11 @@ m4_include(config/acx.m4)\n m4_include(config/override.m4)\n m4_include(config/proginstall.m4)\n m4_include(config/elf.m4)\n+m4_include([libtool.m4])\n+m4_include([ltoptions.m4])\n+m4_include([ltsugar.m4])\n+m4_include([ltversion.m4])\n+m4_include([lt~obsolete.m4])\n \n AC_INIT(move-if-change)\n AC_PREREQ(2.64)\n@@ -1228,6 +1233,9 @@ AC_ARG_ENABLE(build-with-cxx,\n ENABLE_BUILD_WITH_CXX=$enableval,\n ENABLE_BUILD_WITH_CXX=no)\n \n+# Used for setting $lt_cv_objdir\n+_LT_CHECK_OBJDIR\n+\n # Check for GMP, MPFR and MPC\n gmplibs=\"-lmpc -lmpfr -lgmp\"\n gmpinc=\n@@ -1253,7 +1261,7 @@ if test \"x$with_mpc_lib\" != x; then\n   gmplibs=\"-L$with_mpc_lib $gmplibs\"\n fi\n if test \"x$with_mpc$with_mpc_include$with_mpc_lib\" = x && test -d ${srcdir}/mpc; then\n-  gmplibs='-L$$r/$(HOST_SUBDIR)/mpc/src/.libs -L$$r/$(HOST_SUBDIR)/mpc/src/_libs '\"$gmplibs\"\n+  gmplibs='-L$$r/$(HOST_SUBDIR)/mpc/src/'\"$lt_cv_objdir $gmplibs\"\n   gmpinc='-I$$s/mpc/src '\"$gmpinc\"\n   # Do not test the mpc version.  Assume that it is sufficient, since\n   # it is in the source tree, and the library has not been built yet\n@@ -1286,9 +1294,9 @@ if test \"x$with_mpfr_lib\" != x; then\n   gmplibs=\"-L$with_mpfr_lib $gmplibs\"\n fi\n if test \"x$with_mpfr$with_mpfr_include$with_mpfr_lib\" = x && test -d ${srcdir}/mpfr; then\n-  gmplibs='-L$$r/$(HOST_SUBDIR)/mpfr/.libs -L$$r/$(HOST_SUBDIR)/mpfr/_libs '\"$gmplibs\"\n+  gmplibs='-L$$r/$(HOST_SUBDIR)/mpfr/'\"$lt_cv_objdir $gmplibs\"\n   gmpinc='-I$$r/$(HOST_SUBDIR)/mpfr -I$$s/mpfr '\"$gmpinc\"\n-  extra_mpc_mpfr_configure_flags='--with-mpfr-include=$$s/mpfr'\n+  extra_mpc_mpfr_configure_flags='--with-mpfr-include=$$s/mpfr --with-mpfr-lib=$$r/$(HOST_SUBDIR)/mpfr/'\"$lt_cv_objdir\"\n   # Do not test the mpfr version.  Assume that it is sufficient, since\n   # it is in the source tree, and the library has not been built yet\n   # but it would be included on the link line in the version check below\n@@ -1319,10 +1327,10 @@ if test \"x$with_gmp_lib\" != x; then\n   gmplibs=\"-L$with_gmp_lib $gmplibs\"\n fi\n if test \"x$with_gmp$with_gmp_include$with_gmp_lib\" = x && test -d ${srcdir}/gmp; then\n-  gmplibs='-L$$r/$(HOST_SUBDIR)/gmp/.libs -L$$r/$(HOST_SUBDIR)/gmp/_libs '\"$gmplibs\"\n+  gmplibs='-L$$r/$(HOST_SUBDIR)/gmp/'\"$lt_cv_objdir $gmplibs\"\n   gmpinc='-I$$r/$(HOST_SUBDIR)/gmp -I$$s/gmp '\"$gmpinc\"\n   extra_mpfr_configure_flags='--with-gmp-build=$$r/$(HOST_SUBDIR)/gmp'\n-  extra_mpc_gmp_configure_flags='--with-gmp-include=$$r/$(HOST_SUBDIR)/gmp'\n+  extra_mpc_gmp_configure_flags='--with-gmp-include=$$r/$(HOST_SUBDIR)/gmp --with-gmp-lib=$$r/$(HOST_SUBDIR)/gmp/'\"$lt_cv_objdir\"\n   # Do not test the gmp version.  Assume that it is sufficient, since\n   # it is in the source tree, and the library has not been built yet\n   # but it would be included on the link line in the version check below\n@@ -1510,7 +1518,7 @@ if test \"x$with_ppl_lib\" != x; then\n   ppllibs=\"-L$with_ppl_lib -lppl_c -lppl -lgmpxx\"\n fi\n if test \"x$with_ppl$with_ppl_include$with_ppl_lib\" = x && test -d ${srcdir}/ppl; then\n-  ppllibs='-L$$r/$(HOST_SUBDIR)/ppl/interfaces/C/.libs -L$$r/$(HOST_SUBDIR)/ppl/interfaces/C/_libs -L$$r/$(HOST_SUBDIR)/ppl/src/.libs -L$$r/$(HOST_SUBDIR)/ppl/src/_libs -lppl_c -lppl -lgmpxx '\n+  ppllibs='-L$$r/$(HOST_SUBDIR)/ppl/interfaces/C/'\"$lt_cv_objdir\"' -L$$r/$(HOST_SUBDIR)/ppl/src/'\"$lt_cv_objdir\"' -lppl_c -lppl -lgmpxx '\n   pplinc='-I$$r/$(HOST_SUBDIR)/ppl/src -I$$r/$(HOST_SUBDIR)/ppl/interfaces/C '\n   enable_ppl_version_check=no\n fi\n@@ -1570,7 +1578,7 @@ if test \"x$with_cloog_lib\" != x; then\n   clooglibs=\"-L$with_cloog_lib -lcloog\"\n fi\n if test \"x$with_cloog$with_cloog_include$with_cloog_lib\" = x && test -d ${srcdir}/cloog; then\n-  clooglibs='-L$$r/$(HOST_SUBDIR)/cloog/.libs -L$$r/$(HOST_SUBDIR)/cloog/_libs -lcloog '\n+  clooglibs='-L$$r/$(HOST_SUBDIR)/cloog/'\"$lt_cv_objdir\"' -lcloog '\n   clooginc='-I$$r/$(HOST_SUBDIR)/cloog/include -I$$s/cloog/include -DCLOOG_PPL_BACKEND '\n   enable_cloog_version_check=no\n fi"}]}