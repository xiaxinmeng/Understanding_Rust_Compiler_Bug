{"sha": "c431e4997fcca052667b780341ddf4df5f6eb55c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzQzMWU0OTk3ZmNjYTA1MjY2N2I3ODAzNDFkZGY0ZGY1ZjZlYjU1Yw==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-12-12T03:05:20Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-12-12T03:05:20Z"}, "message": "lcm.c (optimize_mode_switching): Free ptr even when mode_set is NULL_RTX.\n\n\t* lcm.c (optimize_mode_switching): Free ptr even when mode_set\n\tis NULL_RTX.\n\nFrom-SVN: r92044", "tree": {"sha": "9f2ee440767bb3cd740aecbb2cc28f4fd9dfb61d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f2ee440767bb3cd740aecbb2cc28f4fd9dfb61d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c431e4997fcca052667b780341ddf4df5f6eb55c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c431e4997fcca052667b780341ddf4df5f6eb55c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c431e4997fcca052667b780341ddf4df5f6eb55c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c431e4997fcca052667b780341ddf4df5f6eb55c/comments", "author": null, "committer": null, "parents": [{"sha": "00fc055e0580c479a325b6f6c11324d12ec6b557", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00fc055e0580c479a325b6f6c11324d12ec6b557", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00fc055e0580c479a325b6f6c11324d12ec6b557"}], "stats": {"total": 29, "additions": 17, "deletions": 12}, "files": [{"sha": "66b47081c140291ecc47dd660897bbf664dd2a54", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c431e4997fcca052667b780341ddf4df5f6eb55c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c431e4997fcca052667b780341ddf4df5f6eb55c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c431e4997fcca052667b780341ddf4df5f6eb55c", "patch": "@@ -1,4 +1,9 @@\n-2004-12-11  Roger Sayle  <roger@eyesopen.com>\n+2004-12-12  Kazu Hirata  <kazu@cs.umass.edu>\n+\n+\t* lcm.c (optimize_mode_switching): Free ptr even when mode_set\n+\tis NULL_RTX.\n+\n+2004-12-12  Roger Sayle  <roger@eyesopen.com>\n \n \t* reg-stack.c (change_stack): Avoid placing the new top-of-stack in\n \tits correct location during popping if we need to permute the stack"}, {"sha": "25df2e63cb67bdc5f5653de72ffc9624a5a6ce90", "filename": "gcc/lcm.c", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c431e4997fcca052667b780341ddf4df5f6eb55c/gcc%2Flcm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c431e4997fcca052667b780341ddf4df5f6eb55c/gcc%2Flcm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flcm.c?ref=c431e4997fcca052667b780341ddf4df5f6eb55c", "patch": "@@ -1274,17 +1274,17 @@ optimize_mode_switching (FILE *file)\n \t\t  mode_set = get_insns ();\n \t\t  end_sequence ();\n \n-\t\t  /* Do not bother to insert empty sequence.  */\n-\t\t  if (mode_set == NULL_RTX)\n-\t\t    continue;\n-\n-\t\t  emited = true;\n-\t\t  if (NOTE_P (ptr->insn_ptr)\n-\t\t      && (NOTE_LINE_NUMBER (ptr->insn_ptr)\n-\t\t\t  == NOTE_INSN_BASIC_BLOCK))\n-\t\t    emit_insn_after (mode_set, ptr->insn_ptr);\n-\t\t  else\n-\t\t    emit_insn_before (mode_set, ptr->insn_ptr);\n+\t\t  /* Insert MODE_SET only if it is nonempty.  */\n+\t\t  if (mode_set != NULL_RTX)\n+\t\t    {\n+\t\t      emited = true;\n+\t\t      if (NOTE_P (ptr->insn_ptr)\n+\t\t\t  && (NOTE_LINE_NUMBER (ptr->insn_ptr)\n+\t\t\t      == NOTE_INSN_BASIC_BLOCK))\n+\t\t\temit_insn_after (mode_set, ptr->insn_ptr);\n+\t\t      else\n+\t\t\temit_insn_before (mode_set, ptr->insn_ptr);\n+\t\t    }\n \t\t}\n \n \t      free (ptr);"}]}