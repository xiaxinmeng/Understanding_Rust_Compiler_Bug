{"sha": "5b918b20d18b9ccea43d80d563986b7e7696e1cd", "node_id": "C_kwDOANBUbNoAKDViOTE4YjIwZDE4YjljY2VhNDNkODBkNTYzOTg2YjdlNzY5NmUxY2Q", "commit": {"author": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-01-10T17:25:49Z"}, "committer": {"name": "Gaius Mulley", "email": "gaiusmod2@gmail.com", "date": "2023-01-10T17:25:49Z"}, "message": "[PATCH, Modula2] PR-108142 Many empty directories created in the build directory\n\nPR-108142 Modula-2 configure generates many subdirectories in the top\nbuild directory.  This patch dynamically creates subdirectories under\ngcc/m2 if and when required.\n\nBootstrapped on x86_64 gnu/linux, ok for master?\n\ngcc/m2/ChangeLog:\n\n\t* Make-lang.in (GM2_1): Change -B path to m2/stage1.\n\t($(objdir)/m2/images/gnu.eps): Check and create dest dir\n\tif necessary.\n\t(gm2-libs.texi-check): Check and create dir m2/gm2-libs-pim,\n\tm2/gm2-libs-iso and m2/gm2-libs if necessary.\n\t($(objdir)/m2/gm2-compiler-boot): Remove.\n\t($(objdir)/m2/gm2-libs-boot): Remove.\n\t($(objdir)/m2/gm2-libs-libiberty): Remove.\n\t($(objdir)/m2/gm2-libiberty): Remove.\n\t($(objdir)/m2/gm2-gcc): Remove.\n\t($(objdir)/m2/gm2-compiler): Remove.\n\t($(objdir)/m2/gm2-libs): Remove.\n\t($(objdir)/m2/gm2-libs-iso): Remove.\n\t($(objdir)/m2/gm2-libs-min): Remove.\n\t($(objdir)/m2/gm2-compiler-paranoid): Remove.\n\t($(objdir)/m2/gm2-libs-paranoid): Remove.\n\t($(objdir)/m2/gm2-compiler-verify): Remove.\n\t($(objdir)/m2/boot-bin): Remove.\n\t($(objdir)/m2/gm2-libs-pim): Remove.\n\t($(objdir)/m2/gm2-libs-coroutines): Remove.\n\t(stage1/m2): Remove.\n\t(stage2/m2): Remove.\n\t(stage3/m2): Remove.\n\t(m2.stageprofile): New rule.\n\t(m2.stagefeedback): New rule.\n\t(cc1gm2$(exeext)): Change dependent name.\n\t(m2/stage2/cc1gm2$(exeext)): Change dependent name.\n\tCheck and create dest dir.\n\t(m2/stage1/cc1gm2$(exeext)): Check and create dest dir\n\tif necessary.\n\t(m2/gm2-gcc/%.o): Ditto.\n\t(m2/gm2-gcc/rtegraph.o): Ditto.\n\t(m2/gm2-gcc/$(SRC_PREFIX)%.h): Ditto.\n\t(m2/gm2-gcc/$(SRC_PREFIX)%.h): Ditto.\n\t(m2/mc-boot): Ditto.\n\t(m2/mc-boot-ch): Ditto.\n\t(m2/gm2-libs-boot): Ditto.\n\t(m2/gm2-compiler-boot): Ditto.\n\t(m2/gm2-compiler): Ditto.\n\t(m2/gm2-libiberty): Ditto.\n\t(m2/gm2-compiler): Ditto.\n\t(m2/gm2-libs-iso): Ditto.\n\t(m2/gm2-libs): Ditto.\n\t(m2/gm2-libs-min): Ditto.\n\t(m2/gm2-libs-coroutines): Ditto.\n\t(m2/boot-bin): Ditto.\n\t(m2/pge-boot): Ditto.\n\t(m2/pge-boot): Ditto.\n\t* Make-maintainer.in (m2/gm2-ppg-boot): Check and create\n\tdest dir if necessary.\n\t(m2): Ditto.\n\t(m2/gm2-ppg-boot): Ditto.\n\t(m2/gm2-pg-boot): Ditto.\n\t(m2/gm2-auto): Ditto.\n\t(m2/gm2-pg-boot): Ditto.\n\t(m2/gm2-pge-boot): Ditto.\n\t($(objdir)/plugin): Ditto.\n\t($(objdir)/m2/mc-boot-ch): Ditto.\n\t($(objdir)/m2/mc-boot-gen): Ditto.\n\t(m2/boot-bin): Ditto.\n\t(m2/mc): Ditto.\n\t(m2/mc-obj): Ditto.\n\t($(objdir)/m2/gm2-ppg-boot): Ditto.\n\t($(objdir)/m2/gm2-pg-boot): Ditto.\n\t($(objdir)/m2/gm2-pge-boot): Ditto.\n\t(m2/mc-boot-gen): Ditto.\n\t(m2/m2obj3): Ditto.\n\t(m2/gm2-libs-paranoid): Ditto.\n\t(m2/gm2-compiler-paranoid): Ditto.\n\t(m2/gm2-libs-paranoid): Ditto.\n\t(m2/gm2-compiler-paranoid): Ditto.\n\t(m2/gm2-libs-paranoid): Ditto.\n\t(m2/gm2-compiler-paranoid): Ditto.\n\t* config-lang.in (m2/gm2-compiler-boot): Remove mkdir.\n\t(m2/gm2-libs-boot): Ditto.\n\t(m2/gm2-ici-boot): Ditto.\n\t(m2/gm2-libiberty): Ditto.\n\t(m2/gm2-gcc): Ditto.\n\t(m2/gm2-compiler): Ditto.\n\t(m2/gm2-libs): Ditto.\n\t(m2/gm2-libs-iso): Ditto.\n\t(m2/gm2-compiler-paranoid): Ditto.\n\t(m2/gm2-libs-paranoid): Ditto.\n\t(m2/gm2-compiler-verify): Ditto.\n\t(m2/boot-bin): Ditto.\n\t(m2/gm2-libs-pim): Ditto.\n\t(m2/gm2-libs-coroutines): Ditto.\n\t(m2/gm2-libs-min): Ditto.\n\t(m2/pge-boot): Ditto.\n\t(plugin): Ditto.\n\t(stage1/m2): Ditto.\n\t(stage2/m2): Ditto.\n\t(stage3/m2): Ditto.\n\t(stage4/m2): Ditto.\n\t(m2/gm2-auto): Ditto.\n\t(m2/gm2-pg-boot): Ditto.\n\t(m2/gm2-pge-boot): Ditto.\n\t(m2/gm2-ppg-boot): Ditto.\n\t(m2/mc-boot): Ditto.\n\t(m2/mc-boot-ch): Ditto.\n\t(m2/mc-boot-gen): Ditto.\n\nSigned-off-by: Gaius Mulley <gaiusmod2@gmail.com>", "tree": {"sha": "054ff6c429f037f787e9784b168c7932f0f5e27f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/054ff6c429f037f787e9784b168c7932f0f5e27f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b918b20d18b9ccea43d80d563986b7e7696e1cd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b918b20d18b9ccea43d80d563986b7e7696e1cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b918b20d18b9ccea43d80d563986b7e7696e1cd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b918b20d18b9ccea43d80d563986b7e7696e1cd/comments", "author": null, "committer": null, "parents": [{"sha": "4e0b504f26f78ff02e80ad98ebbf8ded3aa6ffa1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e0b504f26f78ff02e80ad98ebbf8ded3aa6ffa1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e0b504f26f78ff02e80ad98ebbf8ded3aa6ffa1"}], "stats": {"total": 299, "additions": 174, "deletions": 125}, "files": [{"sha": "a3751109481ef6cb1d8dcd3246e58ad5d3d0780d", "filename": "gcc/m2/Make-lang.in", "status": "modified", "additions": 75, "deletions": 73, "changes": 148, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b918b20d18b9ccea43d80d563986b7e7696e1cd/gcc%2Fm2%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b918b20d18b9ccea43d80d563986b7e7696e1cd/gcc%2Fm2%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2FMake-lang.in?ref=5b918b20d18b9ccea43d80d563986b7e7696e1cd", "patch": "@@ -27,7 +27,7 @@ GM2_CROSS_NAME = `echo gm2|sed '$(program_transform_cross_name)'`\n \n M2_MAINTAINER = no\n \n-GM2_1 = ./gm2 -B./stage1/m2 -g -fm2-g\n+GM2_1 = ./gm2 -B./m2/stage1 -g -fm2-g\n \n GM2_FOR_TARGET = $(STAGE_CC_WRAPPER) ./gm2 -B./ -B$(build_tooldir)/bin/ -L$(objdir)/../ld $(TFLAGS)\n \n@@ -71,7 +71,6 @@ m2.srcextra: m2/SYSTEM-pim.texi m2/SYSTEM-iso.texi m2/gm2-libs.texi m2/gm2-ebnf.\n \t-cp -p m2/SYSTEM-iso.texi $(srcdir)/m2\n \t-cp -p m2/gm2-libs.texi $(srcdir)/m2\n \t-cp -p m2/gm2-ebnf.texi $(srcdir)/m2\n-\tfind . -name '*.texi' -print\n else\n m2.srcextra:\n endif\n@@ -167,7 +166,7 @@ doc/m2.info: $(TEXISRC)\n \telse true; fi\n \n $(objdir)/m2/images/gnu.eps: $(srcdir)/m2/images/gnupng\n-\ttest -d m2/images || mkdir -p m2/images\n+\t-test -d m2/images || $(mkinstalldirs) m2/images\n \tcp $(srcdir)/m2/images/gnu.eps $@\n \n # gm2-libs.texi\n@@ -177,6 +176,9 @@ m2/gm2-libs.texi: gm2-libs.texi-check; @true\n ifeq ($(HAVE_PYTHON),yes)\n gm2-libs.texi-check: m2/SYSTEM-pim.texi m2/SYSTEM-iso.texi m2/Builtins.texi \\\n                      $(objdir)/m2/gm2-libs-coroutines/SYSTEM.def\n+\ttest -d m2/gm2-libs-pim || $(mkinstalldirs) m2/gm2-libs-pim\n+\ttest -d m2/gm2-libs-iso || $(mkinstalldirs) m2/gm2-libs-iso\n+\ttest -d m2/gm2-libs || $(mkinstalldirs) m2/gm2-libs\n \t$(PYTHON) $(srcdir)/m2/tools-src/def2doc.py -t -uLibraries -s$(srcdir)/m2 -b$(objdir)/m2 -o $(objdir)/m2/gm2-libs.texi\n else\n gm2-libs.texi-check:\n@@ -293,59 +295,21 @@ Builtins.rst-check:  m2/gm2-libs/Builtins.def\n endif\n \t$(STAMP) Builtins.rst-check\n \n-$(objdir)/m2/gm2-compiler-boot:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs-boot:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libiberty:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-gcc:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-compiler:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs-iso:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs-min:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-compiler-paranoid:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs-paranoid:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-compiler-verify:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/boot-bin:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs-pim:\n-\ttest -d $@ || mkdir $@\n-\n-$(objdir)/m2/gm2-libs-coroutines:\n-\ttest -d $@ || mkdir $@\n-\n-stage1/m2:\n-\t-test -d $@ || mkdir -p stage1/m2\n-\n-stage2/m2:\n-\t-test -d $@ || mkdir -p stage2/m2\n-\n-stage3/m2:\n-\t-test -d $@ || mkdir -p stage3/m2\n+# Stage hooks:\n+# The toplevel makefile has already created stage?/m2 at this point.\n \n-stage4/m2:\n-\t-test -d $@ || mkdir -p stage4/m2\n+m2.stage1: stage1-start\n+\t-mv m2/*$(objext) stage1/m2\n+m2.stage2: stage2-start\n+\t-mv m2/*$(objext) stage2/m2\n+m2.stage3: stage3-start\n+\t-mv m2/*$(objext) stage3/m2\n+m2.stage4: stage4-start\n+\t-mv m2/*$(objext) stage4/m2\n+m2.stageprofile: stageprofile-start\n+\t-mv m2/*$(objext) stageprofile/m2\n+m2.stagefeedback: stageprofile-start\n+\t-mv m2/*$(objext) stagefeedback/m2\n \n # No gm2-specific selftests\n selftest-m2:\n@@ -424,7 +388,7 @@ override PLUGINCFLAGS := $(filter-out -mdynamic-no-pic,$(PLUGINCFLAGS))\n \n plugin/m2rte$(soext): $(srcdir)/m2/plugin/m2rte.cc $(GCC_HEADER_DEPENDENCIES_FOR_M2) \\\n         insn-attr-common.h insn-flags.h $(generated_files)\n-\ttest -d plugin || mkdir plugin\n+\t-test -d plugin || $(mkinstalldirs) plugin\n \t$(PLUGINCC) $(PLUGINCFLAGS) -fno-rtti -I. -I$(srcdir) $(INCINTL) -I$(srcdir)/m2 -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/../include -I$(srcdir)/../libcpp/include -Wall $(GMPINC) -Wno-literal-suffix -fPIC -c -o plugin/m2rte.o $(srcdir)/m2/plugin/m2rte.cc\n \t$(PLUGINCC) $(PLUGINCFLAGS) $(PLUGINLDFLAGS) $(PLUGINLIBS) $(LIBINTL) -fno-rtti plugin/m2rte.o -shared -o $@\n \n@@ -444,20 +408,6 @@ m2.clean:\n m2.extraclean:\n m2.realclean:\n \n-# Stage hooks:\n-\n-m2.stage1: stage1-start\n-\t-mv m2/*$(objext) stage1/m2\n-\n-m2.stage2: stage2-start\n-\t-mv m2/*$(objext) stage2/m2\n-\n-m2.stage3: stage3-start\n-\t-mv m2/*$(objext) stage3/m2\n-\n-m2.stage4: stage4-start\n-\t-mv m2/*$(objext) stage4/m2\n-\n quit: force\n \techo \"calling exit\"\n \texit 1\n@@ -537,12 +487,13 @@ GM2_LIBS_BOOT     = m2/gm2-compiler-boot/gm2.a \\\n                     m2/gm2-libs-boot/libgm2.a \\\n                     $(GM2-BOOT-O)\n \n-cc1gm2$(exeext): stage1/m2/cc1gm2$(exeext) $(m2.prev)\n+cc1gm2$(exeext): m2/stage1/cc1gm2$(exeext) $(m2.prev)\n \tcp -p $< $@\n \n-stage2/m2/cc1gm2$(exeext): stage1/m2/cc1gm2$(exeext) m2/gm2-compiler/m2flex.o $(P) \\\n+m2/stage2/cc1gm2$(exeext): m2/stage1/cc1gm2$(exeext) m2/gm2-compiler/m2flex.o $(P) \\\n                             $(GM2_C_OBJS) $(BACKEND) $(LIBDEPS) $(GM2_LIBS) \\\n                             m2/gm2-gcc/rtegraph.o plugin/m2rte$(soext) m2/gm2-libs-boot/M2LINK.o\n+\t-test -d m2/stage2 || $(mkinstalldirs) m2/stage2\n \t@$(call LINK_PROGRESS,$(INDEX.m2),start)\n \t+$(LLINKER) $(ALL_CFLAGS) $(LDFLAGS) -o $@ $(GM2_C_OBJS) m2/gm2-compiler/m2flex.o \\\n                             attribs.o \\\n@@ -551,12 +502,13 @@ stage2/m2/cc1gm2$(exeext): stage1/m2/cc1gm2$(exeext) m2/gm2-compiler/m2flex.o $(\n                               $(BACKENDLIBS) $(LIBSTDCXX) -lm\n \t@$(call LINK_PROGRESS,$(INDEX.m2),end)\n \n-stage1/m2/cc1gm2$(exeext): gm2$(exeext) m2/gm2-compiler-boot/m2flex.o \\\n+m2/stage1/cc1gm2$(exeext): gm2$(exeext) m2/gm2-compiler-boot/m2flex.o \\\n                             $(P) $(GM2_C_OBJS) $(BACKEND) $(LIBDEPS) \\\n                             $(GM2_LIBS_BOOT) $(MC_LIBS) \\\n                             m2/gm2-gcc/rtegraph.o plugin/m2rte$(soext) \\\n                             m2/gm2-libs-boot/M2LINK.o \\\n                             $(m2.prev)\n+\t-test -d m2/stage1 || $(mkinstalldirs) m2/stage1\n \t@$(call LINK_PROGRESS,$(INDEX.m2),start)\n \t+$(LLINKER) $(ALL_CFLAGS) $(LDFLAGS) -o $@ $(GM2_C_OBJS) m2/gm2-compiler-boot/m2flex.o \\\n                             attribs.o \\\n@@ -574,13 +526,15 @@ GCC_HEADER_DEPENDENCIES_FOR_M2 = $(BUILD-BOOT-H) $(TIMEVAR_H) m2/gm2config.h $(C\n         $(generated_files) insn-attr-common.h\n \n m2/gm2-gcc/%.o: $(srcdir)/m2/gm2-gcc/%.cc $(GCC_HEADER_DEPENDENCIES_FOR_M2)\n+\t-test -d m2/gm2-gcc || $(mkinstalldirs) m2/gm2-gcc\n \t$(COMPILER) -c -g $(ALL_COMPILERFLAGS) \\\n              $(ALL_CPPFLAGS) $(INCLUDES) $< $(OUTPUT_OPTION)\n \n m2/gm2-gcc/m2configure.o: $(srcdir)/m2/gm2-gcc/m2configure.cc \\\n                $(SYSTEM_H) $(GCC_H) $(CONFIG_H) \\\n                m2/gm2config.h $(TARGET_H) $(PLUGIN_HEADERS) \\\n                $(generated_files) $(C_TREE_H) insn-attr-common.h\n+\t-test -d m2/gm2-gcc || $(mkinstalldirs) m2/gm2-gcc\n \t$(COMPILER) $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n          $(DRIVER_DEFINES) \\\n \t\t-DLIBSUBDIR=\\\"$(libsubdir)\\\" \\\n@@ -601,6 +555,7 @@ m2/m2pp.o : $(srcdir)/m2/m2pp.cc $(GCC_HEADER_DEPENDENCIES_FOR_M2)\n \n m2/gm2-gcc/rtegraph.o: $(srcdir)/m2/gm2-gcc/rtegraph.cc $(GCC_HEADER_DEPENDENCIES_FOR_M2) \\\n                        gt-m2-rtegraph.h\n+\t-test -d m2/gm2-gcc || $(mkinstalldirs) m2/gm2-gcc\n \t$(COMPILER) -c -g $(GM2GCC) $(ALL_COMPILERFLAGS) \\\n             $(ALL_CPPFLAGS) $(INCLUDES) $< $(OUTPUT_OPTION)\n \n@@ -609,6 +564,7 @@ c-family/m2pp.o : $(srcdir)/m2/m2pp.cc $(GCC_HEADER_DEPENDENCIES_FOR_M2)\n             $(ALL_CPPFLAGS) $(INCLUDES) $< $(OUTPUT_OPTION)\n \n m2/gm2-gcc/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-gcc/%.def $(MCDEPS)\n+\t-test -d m2/gm2-gcc || $(mkinstalldirs) m2/gm2-gcc\n \t$(MC) -o=$@ $(srcdir)/m2/gm2-gcc/$*.def\n \n # The following tables define the source files which are translated into C using mc\n@@ -1361,15 +1317,19 @@ m2/boot-bin/mc$(exeext): $(BUILD-MC-BOOT-O) $(BUILD-MC-INTERFACE-O) \\\n          mcflex.o m2/gm2-libs-boot/RTcodummy.o -lm\n \n m2/mc-boot/$(SRC_PREFIX)%.o: m2/mc-boot/$(SRC_PREFIX)%.c\n+\t-test -d m2/mc-boot || $(mkinstalldirs) m2/mc-boot\n \t$(CXX) -g -c -I. -I$(srcdir)/m2/mc-boot-ch -I$(srcdir)/m2/mc-boot -I$(srcdir)/../include -I$(srcdir) $(INCLUDES) $< -o $@\n \n m2/mc-boot-ch/$(SRC_PREFIX)%.o: m2/mc-boot-ch/$(SRC_PREFIX)%.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/mc-boot-ch || $(mkinstalldirs) m2/mc-boot-ch\n \t$(CXX) -DHAVE_CONFIG_H -g -c -I. -Im2/gm2-libs -I$(srcdir)/../include -I$(srcdir) $(INCLUDES) -Im2/gm2-libs $< -o $@\n \n m2/mc-boot-ch/$(SRC_PREFIX)%.o: m2/mc-boot-ch/$(SRC_PREFIX)%.cc m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/mc-boot-ch || $(mkinstalldirs) m2/mc-boot-ch\n \t$(CXX) -DHAVE_CONFIG_H -g -c -I. -Im2/gm2-libs -I$(srcdir)/../include -I$(srcdir) $(INCLUDES) -Im2/gm2-libs $< -o $@\n \n m2/mc-boot/main.o: $(M2LINK) $(srcdir)/m2/init/mcinit\n+\t-test -d m2/mc-boot || $(mkinstalldirs) m2/mc-boot\n \tunset CC ; $(M2LINK) -s --langc++ --exit --name m2/mc-boot/main.c $(srcdir)/m2/init/mcinit\n \t$(CXX) -g -c -I. -I$(srcdir)/../include -I$(srcdir) $(INCLUDES) m2/mc-boot/main.c -o $@\n \n@@ -1380,123 +1340,152 @@ mcflex.c: $(srcdir)/m2/mc/mc.flex\n \tflex -t $< > $@\n \n m2/gm2-libs-boot/%.o: $(srcdir)/m2/gm2-libs-boot/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(MC) -o=m2/gm2-libs-boot/$*.c $(srcdir)/m2/gm2-libs-boot/$*.mod\n \t$(COMPILER) -c -DIN_GCC $(CFLAGS) $(MCINCLUDES) m2/gm2-libs-boot/$*.c -o $@\n \n m2/gm2-libs-boot/%.o: $(srcdir)/m2/gm2-libs/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(MC) -o=m2/gm2-libs-boot/$*.c $(srcdir)/m2/gm2-libs/$*.mod\n \t$(COMPILER) -c -DIN_GCC $(CFLAGS) -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(MCINCLUDES) $(INCLUDES) m2/gm2-libs-boot/$*.c -o $@\n \n m2/gm2-libs-boot/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libs/%.def $(MCDEPS)\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(MC) -o=$@ $(srcdir)/m2/gm2-libs/$*.def\n \n m2/gm2-libs-boot/RTcodummy.o: $(srcdir)/m2/gm2-libs-ch/RTcodummy.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c -DIN_GCC $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/RTintdummy.o: $(srcdir)/m2/gm2-libs-ch/RTintdummy.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c -DIN_GCC $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/wrapc.o: $(srcdir)/m2/gm2-libs-ch/wrapc.c m2/gm2-libs-boot/$(SRC_PREFIX)wrapc.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c -DHAVE_CONFIG_H $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot -Im2/gm2-libs $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/M2LINK.o: $(srcdir)/m2/gm2-libs-ch/M2LINK.c m2/gm2-libs-boot/$(SRC_PREFIX)M2LINK.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c -DHAVE_CONFIG_H $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot -Im2/gm2-libs $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/UnixArgs.o: $(srcdir)/m2/gm2-libs-ch/UnixArgs.cc m2/gm2-libs-boot/$(SRC_PREFIX)UnixArgs.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c -DIN_GCC $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/choosetemp.o: m2/gm2-libs-ch/choosetemp.c m2/gm2-libiberty/Gchoosetemp.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot -Im2/gm2-libiberty -I$(srcdir)/m2/gm2-libiberty/ $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/errno.o: $(srcdir)/m2/gm2-libs-ch/errno.c m2/gm2-libs-boot/$(SRC_PREFIX)errno.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/dtoa.o: $(srcdir)/m2/gm2-libs-ch/dtoa.cc m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/ldtoa.o: $(srcdir)/m2/gm2-libs-ch/ldtoa.cc m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/termios.o: $(srcdir)/m2/gm2-libs-ch/termios.c $(BUILD-LIBS-BOOT-H) m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/SysExceptions.o: $(srcdir)/m2/gm2-libs-ch/SysExceptions.c \\\n                                   m2/gm2-libs-boot/$(SRC_PREFIX)SysExceptions.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(CXX) -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-boot/SysStorage.o: $(srcdir)/m2/gm2-libs/SysStorage.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(MC) -o=m2/gm2-libs-boot/SysStorage.c $(srcdir)/m2/gm2-libs/SysStorage.mod\n \t$(COMPILER) -DIN_GCC -c $(CFLAGS) \\\n           -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(MCINCLUDES) $(INCLUDES) \\\n           m2/gm2-libs-boot/SysStorage.c -o m2/gm2-libs-boot/SysStorage.o\n \n m2/gm2-compiler-boot/M2GCCDeclare.o: $(srcdir)/m2/gm2-compiler/M2GCCDeclare.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(MC) --extended-opaque -o=m2/gm2-compiler-boot/M2GCCDeclare.c $<\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(GM2GCC) \\\n             -I. -I$(srcdir)/../include -I$(srcdir) \\\n             -I. -Im2/gm2-libs-boot -Im2/gm2-compiler-boot \\\n             -I$(srcdir)/m2/gm2-libiberty $(MCINCLUDES) $(INCLUDES) m2/gm2-compiler-boot/M2GCCDeclare.c -o $@\n \n m2/gm2-compiler-boot/M2Error.o: $(srcdir)/m2/gm2-compiler/M2Error.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(MC) --extended-opaque -o=m2/gm2-compiler-boot/M2Error.c $<\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(GM2GCC) \\\n             -I. -I$(srcdir)/../include -I$(srcdir) \\\n             -I. -Im2/gm2-libs-boot -Im2/gm2-compiler-boot \\\n             -I$(srcdir)/m2/gm2-libiberty $(MCINCLUDES) $(INCLUDES) m2/gm2-compiler-boot/M2Error.c -o $@\n \n m2/gm2-compiler-boot/%.o: $(srcdir)/m2/gm2-compiler/%.mod $(BUILD-BOOT-H) $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(MC) -o=m2/gm2-compiler-boot/$*.c $(srcdir)/m2/gm2-compiler/$*.mod\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(GM2GCC) \\\n             -I. -I$(srcdir)/../include -I$(srcdir) \\\n             -I. -Im2/gm2-libs-boot -Im2/gm2-compiler-boot -Im2/gm2-libiberty \\\n             -I$(srcdir)/m2/gm2-libiberty $(MCINCLUDES) $(INCLUDES) m2/gm2-compiler-boot/$*.c -o $@\n \n m2/gm2-compiler-boot/%.o: m2/gm2-compiler-boot/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(MC) -o=m2/gm2-compiler-boot/$*.c m2/gm2-compiler-boot/$*.mod\n \t$(COMPILER) -c $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(GM2GCC) \\\n             -I. -I$(srcdir)/../include -I$(srcdir) \\\n             -I. -Im2/gm2-libs-boot -Im2/gm2-compiler-boot \\\n             -I$(srcdir)/m2/gm2-libiberty $(MCINCLUDES) $(INCLUDES) m2/gm2-compiler-boot/$*.c -o $@\n \n m2/gm2-compiler-boot/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-compiler/%.def $(MCDEPS)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(MC) -o=$@ $(srcdir)/m2/gm2-compiler/$*.def\n \n m2/gm2-compiler-boot/m2flex.o: m2/gm2-compiler/m2flex.c $(BUILD-BOOT-H) $(TIMEVAR_H) \\\n         $(BUILD-LIBS-BOOT-H)  m2/gm2-compiler-boot/$(SRC_PREFIX)NameKey.h \\\n         $(CONFIG_H) m2/gm2config.h $(TARGET_H) $(PLUGIN_HEADERS)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(COMPILER) -c -g $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n           $(GM2GCC) $(INCLUDES) -I$(srcdir)/m2 \\\n           -Im2 -Im2/gm2-compiler-boot -Im2/gm2-libs-boot $< -o $@\n \n m2/gm2-compiler/m2flex.c: $(srcdir)/m2/m2.flex $(TIMEVAR_H) insn-attr-common.h\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \tflex -t $< | sed -e 's/ malloc/ xmalloc/' | sed -e 's/ realloc/ xrealloc/' > $@\n \n m2/gm2-libiberty/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libiberty/%.def $(MCDEPS)\n+\t-test -d m2/gm2-libiberty || $(mkinstalldirs) m2/gm2-libiberty\n \t$(MC) -o=$@ $(srcdir)/m2/gm2-libiberty/$*.def\n \n # The rules to build objects in gm2-compiler and gm2-libs directories.\n \n m2/gm2-compiler/%.o: $(srcdir)/m2/gm2-compiler/%.mod\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \t$(GM2_1) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler/m2flex.o: m2/gm2-compiler/m2flex.c m2/gm2-libs/gm2-libs-host.h $(TIMEVAR_H)\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \t$(COMPILER) -c -g $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n           $(GM2GCC) -Im2/gm2-compiler-boot -Im2/gm2-libs-boot $< -o $@\n \n m2/gm2-compiler/%.o: m2/gm2-compiler/%.mod\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \t$(GM2_1) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-libs-iso/%.o: $(srcdir)/m2/gm2-libs-iso/%.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-iso || $(mkinstalldirs) m2/gm2-libs-iso\n \t$(CXX) -DBUILD_GM2_LIBS_TARGET -DBUILD_GM2_LIBS -c $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-iso/%.o: $(srcdir)/m2/gm2-libs-iso/%.mod\n+\t-test -d m2/gm2-libs-iso || $(mkinstalldirs) m2/gm2-libs-iso\n \t$(GM2_1) $(GM2_ISO_FLAGS) -c -B./ -Im2/gm2-libs-iso:$(srcdir)/m2/gm2-libs-iso -I$(srcdir)/m2/gm2-libs $< -o $@\n \n \n # We build the cc1gm2$(exeext) from the boot stage and then proceed to build it\n # again using itself.\n \n m2/gm2-libs/gm2-libs-host.h:\n+\t-test -d m2/gm2-libs || $(mkinstalldirs) m2/gm2-libs\n \techo \"Configuring to build libraries using native compiler\" ; \\\n         NEW_SRCDIR=`${srcdir}/m2/tools-src/calcpath ../../ ${srcdir} m2/gm2-libs` ; \\\n         export NEW_SRCDIR ; \\\n@@ -1528,13 +1517,15 @@ m2/gm2config.h:\n         fi\n \n $(objdir)/m2/gm2-libs-min/SYSTEM.def: $(GM2_PROG_DEP)\n+\t-test -d m2/gm2-libs-min || $(mkinstalldirs) m2/gm2-libs-min\n \t$(SHELL) $(srcdir)/m2/tools-src/makeSystem -fpim \\\n              $(srcdir)/m2/gm2-libs-min/SYSTEM.def \\\n              $(srcdir)/m2/gm2-libs-min/SYSTEM.mod \\\n              -I$(srcdir)/m2/gm2-libs-min:$(srcdir)/m2/gm2-libs \\\n              \"$(GM2_FOR_TARGET)\" $@\n \n $(objdir)/m2/gm2-libs/SYSTEM.def: $(GM2_PROG_DEP)\n+\t-test -d m2/gm2-libs || $(mkinstalldirs) m2/gm2-libs\n \techo \"GM2_FOR_TARGET $(GM2_FOR_TARGET)\"\n \techo \"GCC_FOR_TARGET $(GCC_FOR_TARGET)\"\n \t$(SHELL) $(srcdir)/m2/tools-src/makeSystem -fpim \\\n@@ -1544,13 +1535,15 @@ $(objdir)/m2/gm2-libs/SYSTEM.def: $(GM2_PROG_DEP)\n              \"$(GM2_FOR_TARGET)\" $@\n \n $(objdir)/m2/gm2-libs-iso/SYSTEM.def: $(GM2_PROG_DEP)\n+\t-test -d m2/gm2-libs-iso || $(mkinstalldirs) m2/gm2-libs-iso\n \t$(SHELL) $(srcdir)/m2/tools-src/makeSystem -fiso \\\n              $(srcdir)/m2/gm2-libs-iso/SYSTEM.def \\\n              $(srcdir)/m2/gm2-libs-iso/SYSTEM.mod \\\n              -I$(srcdir)/m2/gm2-libs-iso:$(srcdir)/m2/gm2-libs \\\n              \"$(GM2_FOR_TARGET)\" $@\n \n $(objdir)/m2/gm2-libs-coroutines/SYSTEM.def: $(GM2_PROG_DEP)\n+\t-test -d m2/gm2-libs-coroutines || $(mkinstalldirs) m2/gm2-libs-coroutines\n \t$(SHELL) $(srcdir)/m2/tools-src/makeSystem -fpim \\\n              $(srcdir)/m2/gm2-libs-coroutines/SYSTEM.def \\\n              $(srcdir)/m2/gm2-libs-coroutines/SYSTEM.mod \\\n@@ -1562,34 +1555,41 @@ build-compiler: $(GM2-COMP-MODS:%.mod=m2/gm2-compiler/%.o) \\\n                 m2/gm2-compiler/m2flex.o\n \n m2/gm2-compiler/gm2.a: build-compiler gm2$(exeext)\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \t$(AR_FOR_TARGET) cr $@ $(GM2-COMP-MODS:%.mod=m2/gm2-compiler/%.o) \\\n                     $(GM2-AUTO-MODS:%.mod=m2/gm2-compiler/%.o)\n \t$(RANLIB) $@\n \n m2/gm2-libs-boot/libgm2.a: m2/boot-bin/mc$(exeext) $(BUILD-LIBS-BOOT)\n+\t-test -d m2/gm2-libs-boot || $(mkinstalldirs) m2/gm2-libs-boot\n \t$(AR) cr $@ $(GM2-LIBS-BOOT-MODS:%.mod=m2/gm2-libs-boot/%.o) \\\n                     $(GM2-LIBS-BOOT-CC:%.cc=m2/gm2-libs-boot/%.o) \\\n                     $(GM2-LIBS-BOOT-C:%.c=m2/gm2-libs-boot/%.o)\n \t$(RANLIB) $@\n \n m2/gm2-compiler-boot/gm2.a: m2/boot-bin/mc$(exeext) m2/boot-bin/mklink$(exeext) \\\n                          $(BUILD-LIBS-BOOT) $(BUILD-COMPILER-BOOT)\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \t$(AR) cr $@ $(GM2-COMP-BOOT-MODS:%.mod=m2/gm2-compiler-boot/%.o) \\\n                     $(GM2-AUTO-MODS:%.mod=m2/gm2-compiler-boot/%.o)\n \t$(RANLIB) $@\n \n m2/gm2-compiler-boot/gm2.a: m2/boot-bin/mc$(exeext)\n \n m2/boot-bin/mklink$(exeext): $(srcdir)/m2/tools-src/mklink.c\n+\t-test -d m2/boot-bin || $(mkinstalldirs) m2/boot-bin\n \t$(CXX) $(CFLAGS) -I$(srcdir)/m2 -Im2/gm2-libs-boot -Im2/gm2-compiler-boot -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) $< -o $@\n \n m2/gm2-compiler-boot/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-compiler-boot/%.def $(MCDEPS)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(MC) --quiet -o=$@ $(srcdir)/m2/gm2-compiler-boot/$*.def\n \n m2/gm2-compiler/%.mod: $(srcdir)/m2/gm2-compiler/%.bnf $(PGE)\n+\t-test -d m2/gm2-compiler || $(mkinstalldirs) m2/gm2-compiler\n \t$(PGE) -k -l $< -o $@\n \n m2/gm2-compiler-boot/%.mod: $(srcdir)/m2/gm2-compiler/%.bnf $(PGE)\n+\t-test -d m2/gm2-compiler-boot || $(mkinstalldirs) m2/gm2-compiler-boot\n \t$(PGE) -k -l $< -o $@\n \n check-m2: check-gm2\n@@ -1658,9 +1658,11 @@ ifeq ($(M2_MAINTAINER),yes)\n include m2/Make-maintainer\n else\n m2/pge-boot/%.o: m2/pge-boot/%.c m2/gm2-libs/gm2-libs-host.h m2/gm2config.h\n+\t-test -d m2/pge-boot ||$(mkinstalldirs) m2/pge-boot\n \t$(CXX) $(INCLUDES) -I$(srcdir)/m2/pge-boot -Im2/gm2-libs -g -c $< -o $@\n \n m2/pge-boot/%.o: m2/pge-boot/%.cc m2/gm2-libs/gm2-libs-host.h m2/gm2config.h\n+\t-test -d m2/pge-boot || $(mkinstalldirs) m2/pge-boot\n \t$(CXX) $(INCLUDES) -I$(srcdir)/m2/pge-boot -Im2/gm2-libs -g -c $< -o $@\n \n $(PGE): $(BUILD-PGE-O)"}, {"sha": "b41f5858e177717d84799f8ff35e848081449957", "filename": "gcc/m2/Make-maintainer.in", "status": "modified", "additions": 99, "deletions": 23, "changes": 122, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b918b20d18b9ccea43d80d563986b7e7696e1cd/gcc%2Fm2%2FMake-maintainer.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b918b20d18b9ccea43d80d563986b7e7696e1cd/gcc%2Fm2%2FMake-maintainer.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2FMake-maintainer.in?ref=5b918b20d18b9ccea43d80d563986b7e7696e1cd", "patch": "@@ -20,7 +20,7 @@\n \n # QUIAT=@\n XGCC = ./xgcc -B./\n-GM2_2 = ./gm2 -B./stage2/m2 -g -fm2-g\n+GM2_2 = ./gm2 -B./m2/m2obj2 -g -fm2-g\n \n # m2/ppg$(exeext)  is the recursive descent parser generator.\n \n@@ -96,21 +96,26 @@ BUILD-PPG-LIBS-H = $(PPG-LIB-DEFS:%.def=m2/gm2-ppg-boot/$(SRC_PREFIX)%.h)\n BUILD-PPG-H = m2/boot-bin/mc$(exeext) $(BUILD-PPG-LIBS-H)\n \n m2/gm2-ppg-boot/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libs/%.def $(MCDEPS)\n+\t-test -d m2/gm2-ppg-boot || $(mkinstalldirs) m2/gm2-ppg-boot\n \t$(MCC) -o=$@ $(srcdir)/m2/gm2-libs/$*.def\n \n m2/gm2-ppg-boot/$(SRC_PREFIX)%.o: m2/mc-boot-ch/$(SRC_PREFIX)%.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-ppg-boot || $(mkinstalldirs) m2/gm2-ppg-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-ppg-boot/$(SRC_PREFIX)%.o: m2/mc-boot-ch/$(SRC_PREFIX)%.cc m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-ppg-boot || $(mkinstalldirs) m2/gm2-ppg-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-ppg-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-libs/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-ppg-boot || $(mkinstalldirs) m2/gm2-ppg-boot\n \t$(MCC) -o=m2/gm2-ppg-boot/$(SRC_PREFIX)$*.c $(srcdir)/m2/gm2-libs/$*.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) \\\n               -Im2/gm2-ppg-boot -I$(srcdir)/m2/mc-boot -Im2/gm2-libs-boot \\\n               -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c m2/gm2-ppg-boot/$(SRC_PREFIX)$*.c -o $@\n \n m2/gm2-ppg-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-compiler/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-ppg-boot || $(mkinstalldirs) m2/gm2-ppg-boot\n \t$(MCC) -o=m2/gm2-ppg-boot/$(SRC_PREFIX)$*.c $(srcdir)/m2/gm2-compiler/$*.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) \\\n               -Im2/mc-boot -Im2/gm2-compiler-boot -Im2/gm2-libs-boot \\\n@@ -119,17 +124,19 @@ m2/gm2-ppg-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-compiler/%.mod $(MCDEPS) $(BU\n m2/ppg$(exeext): m2/boot-bin/mc $(BUILD-PPG-O) $(BUILD-MC-INTERFACE-O) m2/gm2-ppg-boot/main.o \\\n                  m2/gm2-libs-boot/RTcodummy.o m2/mc-boot-ch/$(SRC_PREFIX)abort.o \\\n                  m2/gm2-libs-boot/M2LINK.o\n+\t-test -d m2 || $(mkinstalldirs) m2\n \t+$(LINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) -o $@ $(BUILD-PPG-O) m2/gm2-ppg-boot/main.o \\\n                  m2/gm2-libs-boot/RTcodummy.o m2/mc-boot-ch/$(SRC_PREFIX)abort.o \\\n                  m2/gm2-libs-boot/M2LINK.o -lm\n \n m2/gm2-ppg-boot/main.o: $(M2LINK) $(srcdir)/m2/init/mcinit\n+\t-test -d m2/gm2-ppg-boot || $(mkinstalldirs) m2/gm2-ppg-boot\n \tunset CC ; $(M2LINK) -s --langc++ --exit --name mainppginit.c $(srcdir)/m2/init/ppginit\n \tmv mainppginit.c m2/gm2-ppg-boot/main.c\n \t$(CXX) $(INCLUDES) -g -c -o $@ m2/gm2-ppg-boot/main.c\n \n m2/gm2-auto:\n-\ttest -d $@ || mkdir -p $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n # m2/pg$(exext) is the 2nd generation parser generator built from ebnf\n # without error recovery\n@@ -143,27 +150,33 @@ BUILD-PG-O = $(PPG-INTERFACE-C:%.c=m2/gm2-pg-boot/$(SRC_PREFIX)%.o) \\\n              $(PG-SRC:%.mod=m2/gm2-pg-boot/$(SRC_PREFIX)%.o)\n \n m2/gm2-pg-boot/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libs/%.def $(MCDEPS)\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \t$(MCC) -o=$@ $(srcdir)/m2/gm2-libs/$*.def\n \n m2/gm2-pg-boot/$(SRC_PREFIX)%.o: m2/mc-boot-ch/$(SRC_PREFIX)%.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pg-boot/$(SRC_PREFIX)%.o: m2/mc-boot-ch/$(SRC_PREFIX)%.cc m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pg-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-libs/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \t$(MCC) -o=m2/gm2-pg-boot/$(SRC_PREFIX)$*.c $(srcdir)/m2/gm2-libs/$*.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -Im2/gm2-pg-boot\t-I$(srcdir)/m2/mc-boot \\\n                -I$(srcdir)/m2/mc-boot-ch \\\n                -Im2/gm2-libs-boot $(INCLUDES) \\\n               -g -c m2/gm2-pg-boot/$(SRC_PREFIX)$*.c -o $@\n \n m2/gm2-pg-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-compiler/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \t$(MCC) -o=m2/gm2-pg-boot/$(SRC_PREFIX)$*.c $(srcdir)/m2/gm2-compiler/$*.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -Im2/mc-boot -Im2/gm2-compiler-boot -Im2/gm2-libs-boot \\\n               -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c m2/gm2-pg-boot/$(SRC_PREFIX)$*.c -o $@\n \n m2/gm2-pg-boot/$(SRC_PREFIX)pg.o:  m2/gm2-auto/pg.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \t$(MCC) -o=m2/gm2-pg-boot/$(SRC_PREFIX)pg.c m2/gm2-auto/pg.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -Im2/mc-boot -Im2/gm2-compiler-boot -Im2/gm2-libs-boot \\\n               -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c m2/gm2-pg-boot/$(SRC_PREFIX)pg.c -o $@\n@@ -172,20 +185,24 @@ m2/pg$(exeext): m2/boot-bin/mc \\\n     $(BUILD-PG-O) $(GM2-PPG-MODS:%.mod=m2/gm2-pg-boot/%.o) \\\n     $(BUILD-MC-INTERFACE-O) m2/gm2-pg-boot/main.o m2/gm2-libs-boot/RTcodummy.o \\\n     m2/mc-boot-ch/$(SRC_PREFIX)abort.o m2/gm2-libs-boot/M2LINK.o\n+\t-test -d m2 || $(mkinstalldirs) m2\n \t+$(LINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) -o $@ $(BUILD-PG-O) \\\n          m2/gm2-pg-boot/main.o m2/gm2-libs-boot/RTcodummy.o \\\n          m2/gm2-libs-boot/M2LINK.o \\\n          m2/mc-boot-ch/$(SRC_PREFIX)abort.o -lm\n \n m2/gm2-auto/pginit:\n+\t-test -d m2/gm2-auto || $(mkinstalldirs) m2/gm2-auto\n \tsed -e 's/ppg/pg/' < $(srcdir)/m2/init/ppginit > $@\n \n m2/gm2-pg-boot/main.o: m2/gm2-auto/pginit $(M2LINK)\n+\t-test -d m2/gm2-pg-boot || $(mkinstalldirs) m2/gm2-pg-boot\n \tunset CC ; $(M2LINK) -s --langc++ --exit --name mainpginit.c m2/gm2-auto/pginit\n \tmv mainpginit.c m2/gm2-pg-boot/main.c\n \t$(CXX) $(INCLUDES) -g -c -o $@ m2/gm2-pg-boot/main.c\n \n m2/pg-e$(exeext): m2/pg$(exeext)\n+\t-test -d m2 || $(mkinstalldirs) m2\n \t$(CP) m2/pg$(exeext) m2/pg-e$(exeext)\n \t$(SHELL) $(srcdir)/m2/tools-src/buildpg $(srcdir)/m2/gm2-compiler/ppg.mod pg -e > m2/gm2-auto/t.bnf\n \t./m2/pg-e$(exeext) -e -l m2/gm2-auto/t.bnf | sed -e 's/t\\.bnf/pg\\.bnf/' > m2/gm2-auto/t.mod\n@@ -196,6 +213,7 @@ m2/pg-e$(exeext): m2/pg$(exeext)\n \t$(RM) m2/gm2-auto/t.bnf m2/gm2-auto/t.mod\n \n m2/gm2-auto/pg.mod: m2/ppg$(exeext)\n+\t-test -d m2/gm2-auto || $(mkinstalldirs) m2/gm2-auto\n \t$(SHELL) $(srcdir)/m2/tools-src/buildpg $(srcdir)/m2/gm2-compiler/ppg.mod pg -e > m2/gm2-auto/pg.bnf\n \t./m2/ppg$(exeext) -e -l m2/gm2-auto/pg.bnf > m2/gm2-auto/pg.mod\n \n@@ -210,58 +228,74 @@ BUILD-PGE-O = $(PPG-INTERFACE-C:%.c=m2/gm2-pge-boot/$(SRC_PREFIX)%.o) \\\n               $(PGE-SRC:%.mod=m2/gm2-pge-boot/$(SRC_PREFIX)%.o)\n \n m2/gm2-auto/pge.mod: m2/pg$(exeext)\n+\t-test -d m2/gm2-auto || $(mkinstalldirs) m2/gm2-auto\n \t$(SHELL) $(srcdir)/m2/tools-src/buildpg $(srcdir)/m2/gm2-compiler/ppg.mod pge > m2/gm2-auto/pge.bnf\n \t./m2/pg$(exeext) -l m2/gm2-auto/pge.bnf -o m2/gm2-auto/pge.mod\n \n m2/gm2-pge-boot/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libs/%.def $(MCDEPS)\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(MCC) -o=$@ $(srcdir)/m2/gm2-libs/$*.def\n \n m2/gm2-pge-boot/$(SRC_PREFIX)libc.o: $(srcdir)/m2/mc-boot-ch/Glibc.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) $(INCLUDES) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)mcrts.o:  $(srcdir)/m2/mc-boot-ch/Gmcrts.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) $(INCLUDES) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)UnixArgs.o:  $(srcdir)/m2/mc-boot-ch/GUnixArgs.cc\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)Selective.o:  $(srcdir)/m2/mc-boot-ch/GSelective.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -Im2/gm2-libs -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)termios.o:  $(srcdir)/m2/mc-boot-ch/Gtermios.cc m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)SysExceptions.o:  $(srcdir)/m2/mc-boot-ch/GSysExceptions.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)ldtoa.o:  $(srcdir)/m2/mc-boot-ch/Gldtoa.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)dtoa.o:  $(srcdir)/m2/mc-boot-ch/Gdtoa.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)wrapc.o:  $(srcdir)/m2/mc-boot-ch/Gwrapc.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)SYSTEM.o:  $(srcdir)/m2/mc-boot-ch/GSYSTEM.c\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)errno.o:  $(srcdir)/m2/mc-boot-ch/Gerrno.c\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c $< -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-libs/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(MCC) -o=m2/gm2-pge-boot/$(SRC_PREFIX)$*.c $(srcdir)/m2/gm2-libs/$*.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -Im2/gm2-pge-boot -I$(srcdir)/m2/mc-boot \\\n               -I$(srcdir)/m2/mc-boot-ch -Im2/gm2-libs-boot \\\n               $(INCLUDES) -g -c m2/gm2-pge-boot/$(SRC_PREFIX)$*.c -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)%.o: $(srcdir)/m2/gm2-compiler/%.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(MCC) -o=m2/gm2-pge-boot/$(SRC_PREFIX)$*.c $(srcdir)/m2/gm2-compiler/$*.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) -Im2/mc-boot -Im2/gm2-compiler-boot \\\n               -Im2/gm2-libs-boot \\\n               -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) -g -c m2/gm2-pge-boot/$(SRC_PREFIX)$*.c -o $@\n \n m2/gm2-pge-boot/$(SRC_PREFIX)pge.o:  m2/gm2-auto/pge.mod $(MCDEPS) $(BUILD-BOOT-H)\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(MCC) -o=m2/gm2-pge-boot/$(SRC_PREFIX)pge.c m2/gm2-auto/pge.mod\n \t$(CXX) -I. -I$(srcdir)/../include -I$(srcdir) \\\n               -Im2/mc-boot -Im2/gm2-compiler-boot -Im2/gm2-libs-boot \\\n@@ -271,6 +305,7 @@ m2/pge$(exeext): m2/boot-bin/mc \\\n     $(BUILD-PGE-O) $(GM2-PPG-MODS:%.mod=m2/gm2-pge-boot/%.o) \\\n     $(BUILD-MC-INTERFACE-O) m2/gm2-pge-boot/main.o m2/gm2-libs-boot/RTcodummy.o \\\n     m2/mc-boot-ch/$(SRC_PREFIX)abort.o m2/gm2-libs-boot/M2LINK.o\n+\t-test -d m2 || $(mkinstalldirs) m2\n \t+$(LINKER) $(ALL_LINKERFLAGS) $(LDFLAGS) -o $@ $(BUILD-PGE-O) \\\n          m2/gm2-pge-boot/main.o m2/gm2-libs-boot/RTcodummy.o \\\n          m2/mc-boot-ch/$(SRC_PREFIX)abort.o m2/gm2-libs-boot/M2LINK.o -lm\n@@ -285,27 +320,31 @@ m2/pge$(exeext): m2/boot-bin/mc \\\n \t$(RM) m2/gm2-auto/t.mod m2/gm2-auto/t1.mod m2/gm2-auto/t2.mod\n \n m2/gm2-auto/pgeinit:\n+\t-test -d m2/gm2-auto || $(mkinstalldirs) m2/gm2-auto\n \tsed -e 's/ppg/pge/' < $(srcdir)/m2/init/ppginit > $@\n \n m2/gm2-pge-boot/main.o: m2/gm2-auto/pgeinit $(M2LINK)\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \tunset CC ; $(M2LINK) -s --langc++ --exit --name mainpgeinit.c m2/gm2-auto/pgeinit\n \tmv mainpgeinit.c m2/gm2-pge-boot/main.c\n \t$(CXX) $(INCLUDES) -g -c -o $@ m2/gm2-pge-boot/main.c\n \n $(objdir)/m2/gm2-ppg-boot:\n-\ttest -d $@ || mkdir $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n $(objdir)/m2/gm2-pg-boot:\n-\ttest -d $@ || mkdir $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n $(objdir)/m2/gm2-pge-boot:\n-\ttest -d $@ || mkdir $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n m2/gm2-auto/pg.o: m2/gm2-auto/pg.mod $(MCDEPS)\n+\t-test -d m2/gm2-pge-boot || $(mkinstalldirs) m2/gm2-pge-boot\n \t$(MC) --quiet -o=m2/gm2-auto/pg.c m2/gm2-auto/pg.mod\n \t$(COMPILER) -c $(CFLAGS) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2 -Im2/gm2-libs-boot -Im2/gm2-compiler-boot -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) m2/gm2-auto/pg.c -o $@\n \n m2/gm2-auto/pge.o: m2/gm2-auto/pge.mod $(MCDEPS)\n+\t-test -d m2/gm2-auto || $(mkinstalldirs) m2/gm2-auto\n \t$(MC) --quiet -o=m2/gm2-auto/pge.c m2/gm2-auto/pge.mod\n \t$(COMPILER) -c $(CFLAGS) -I. -I$(srcdir)/../include -I$(srcdir) -I$(srcdir)/m2 -Im2/gm2-libs-boot -Im2/gm2-compiler-boot -I$(srcdir)/m2/mc-boot-ch $(INCLUDES) m2/gm2-auto/pge.c -o $@\n \n@@ -400,7 +439,7 @@ mc-help:  force\n \t@echo \"m2/pge          build the parser generator (needed by mc-maintainer)\"\n \n m2/mc-obj:\n-\tmkdir $@\n+\t$(mkinstalldirs) $@\n \n mc-verify:  mc-clean mc-bootstrap mc\n \tmv mc m2/boot-bin/mc.m2\n@@ -442,7 +481,7 @@ m2/boot-bin/mc-devel$(exeext): m2/mc-obj/mcp1.mod \\\n                                mcflex.c \\\n                                m2/mc-boot-ch/Gabort.o\n \t$(RM) -rf mc-obj\n-\tmkdir mc-obj\n+\t$(mkinstalldirs) mc-obj\n \t$(CC) -I$(srcdir)/m2/mc -c -g mcflex.c -o mc-obj/mcflex.o\n \t$(BOOTGM2) $(MCOPTIONS) -I$(GM2PATH) $(srcdir)/m2/mc/decl.mod -o mc-obj/decl.o\n \t$(BOOTGM2) $(MCOPTIONS) -I$(GM2PATH) $(srcdir)/m2/mc/mcStream.mod -o mc-obj/mcStream.o\n@@ -484,13 +523,16 @@ m2/boot-bin/mc-opt$(exeext): m2/mc-obj/mcp1.mod \\\n                              m2/mc-obj/mcp4.mod \\\n                              m2/mc-obj/mcp5.mod \\\n                              mcflex.c\n+\t-test -d m2/boot-bin || $(mkinstalldirs) m2/boot-bin\n \tg++ -I$(srcdir)/m2/mc -c -g mcflex.c\n \t$(BOOTGM2) -fsources -fm2-whole-program -g -I$(srcdir)/m2/mc:$(objdir)/m2/mc-obj:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/mc $(srcdir)/m2/mc/top.mod\n \n m2/mc/decl.o:  $(srcdir)/m2/mc/decl.mod\n+\t-test -d m2/mc || $(mkinstalldirs) m2/mc\n \t$(BOOTGM2) $(MCOPTIONS) -I$(GM2PATH) -o $@ $(srcdir)/m2/mc/decl.mod\n \n m2/mc-obj/%.mod: $(srcdir)/m2/mc/%.bnf $(PGE)\n+\t-test -d m2/mc-obj || $(mkinstalldirs) m2/mc-obj\n \t$(PGE) -l $< -o $@\n \n gm2-bootstrap: mc-devel\n@@ -500,16 +542,16 @@ gm2-bootstrap: mc-devel\n \n \n $(objdir)/plugin:\n-\ttest -d $@ || mkdir -p $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n $(objdir)/m2/mc-boot:\n-\ttest -d $@ || mkdir -p $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n $(objdir)/m2/mc-boot-ch:\n-\ttest -d $@ || mkdir -p $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n $(objdir)/m2/mc-boot-gen:\n-\ttest -d $@ || mkdir -p $@\n+\t-test -d $@ || $(mkinstalldirs) $@\n \n mc-autogen: mc-clean mc-devel \\\n             $(BUILD-MC-BOOT-H) $(BUILD-MC-BOOT-C) \\\n@@ -528,24 +570,31 @@ EXTENDED_OPAQUE =\n MC_OPTIONS = $(MC_COPYRIGHT) --gcc-config-system --olang=c++\n \n m2/mc-boot-gen/$(SRC_PREFIX)%.h: $(srcdir)/m2/mc/%.def\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso $(EXTENDED_OPAQUE) --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n m2/mc-boot-gen/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libs/%.def\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso $(EXTENDED_OPAQUE) --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n m2/mc-boot-gen/$(SRC_PREFIX)decl.c: $(srcdir)/m2/mc/decl.mod\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) --extended-opaque -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n m2/mc-boot-gen/$(SRC_PREFIX)%.c: $(srcdir)/m2/mc/%.mod\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso $(EXTENDED_OPAQUE) --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n m2/mc-boot-gen/$(SRC_PREFIX)%.c: $(srcdir)/m2/gm2-libs/%.mod\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso $(EXTENDED_OPAQUE) --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n m2/mc-boot-gen/$(SRC_PREFIX)%.h: $(srcdir)/m2/gm2-libs-iso/%.def\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso $(EXTENDED_OPAQUE) --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n m2/mc-boot-gen/$(SRC_PREFIX)%.c: m2/mc-obj/%.mod\n+\t-test -d m2/mc-boot-gen || $(mkinstalldirs) m2/mc-boot-gen\n \t./mc $(MC_OPTIONS) -I$(srcdir)/m2/mc:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-libs-iso $(EXTENDED_OPAQUE) --h-file-prefix=$(SRC_PREFIX) -o=$@ $<\n \n # mc-bootstrap compiles mc using the C version previously generated by mc-autogen.\n@@ -574,9 +623,11 @@ gm2.maintainer-help: force\n \n #\n #  verify the compiler can be built across three generations of cc1gm2 diffing assembly output.\n-#  stage1/m2/cc1gm2 built by translating M2 into C++.\n-#  stage2/m2/cc1gm2 built from stage1/m2/cc1gm2.\n-#  stage3/m2/cc1gm2 built from stage2/m2/cc1gm2.\n+#  m2/stage1/cc1gm2 built by translating all M2 sources into C++.\n+#  m2/m2obj2/cc1gm2 built from m2/stage1/cc1gm2.\n+#  m2/m2obj3/cc1gm2 built from m2/m2obj2/cc1gm2.\n+#\n+#  This test only makes sense if host = target = build\n #\n \n # GM2-VERIFY-MODS is a list of modules which have no __DATE__ stamp inside them\n@@ -608,11 +659,12 @@ GM2-VERIFY-AUTO    = P1Build.mod       P2Build.mod     PCBuild.mod     P3Build.m\n GM2_LIBS_PARANOID = m2/gm2-compiler-paranoid/gm2.a \\\n                     m2/gm2-libs-paranoid/libgm2.a                       # build it again using GM2_LIBS\n \n-gm2.paranoid: stage3/m2/cc1gm2$(exeext) gm2.verifyparanoid\n+gm2.paranoid: m2/m2obj3/cc1gm2$(exeext) gm2.verifyparanoid\n \n-stage3/m2/cc1gm2$(exeext): stage2/m2/cc1gm2$(exeext) m2/gm2-compiler-paranoid/m2flex.o \\\n+m2/m2obj3/cc1gm2$(exeext): m2/m2obj2/cc1gm2$(exeext) m2/gm2-compiler-paranoid/m2flex.o \\\n                             $(P) $(GM2_C_OBJS) $(BACKEND) $(LIBDEPS) $(GM2_LIBS_PARANOID) \\\n                             m2/gm2-gcc/rtegraph.o plugin/m2rte$(exeext).so m2/gm2-libs-boot/M2LINK.o\n+\t-test -d m2/m2obj3 || $(mkinstalldirs) m2/m2obj3\n \t@$(call LINK_PROGRESS,$(INDEX.m2),start)\n \t+$(LLINKER) $(ALL_CFLAGS) $(LDFLAGS) -o $@ $(GM2_C_OBJS) m2/gm2-compiler-paranoid/m2flex.o \\\n                             attribs.o \\\n@@ -624,7 +676,7 @@ stage3/m2/cc1gm2$(exeext): stage2/m2/cc1gm2$(exeext) m2/gm2-compiler-paranoid/m2\n \n # gm2.verifyparanoid diffs the output of all three compilers with the compiler source code\n \n-gm2.verifyparanoid: stage1/m2/cc1gm2$(exeext) stage2/m2/cc1gm2$(exeext) stage3/m2/cc1gm2$(exeext) force\n+gm2.verifyparanoid: m2/stage1/cc1gm2$(exeext) m2/m2obj2/cc1gm2$(exeext) m2/m2obj3/cc1gm2$(exeext) force\n \t@echo \"verifying the three generations of GNU Modula-2 compilers - it may take some time..\"\n \t$(QUIAT)for i in $(GM2-VERIFY-MODS) ; do \\\n            echo -n \"$$i \" ; \\\n@@ -652,11 +704,11 @@ gm2.verifyparanoid: stage1/m2/cc1gm2$(exeext) stage2/m2/cc1gm2$(exeext) stage3/m\n \t$(QUIAT)for i in x $(GM2-VERIFY-AUTO) ; do \\\n            if [ -f m2/gm2-auto/$$i ] ; then \\\n               echo -n \"$$i \" ; \\\n-              ./gm2 -S $(GM2_FLAGS) -c -B./stage1/m2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/1.s ; \\\n+              ./gm2 -S $(GM2_FLAGS) -c -B./m2/stage1 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/1.s ; \\\n               echo -n \"[1]\" ; \\\n-              ./gm2 -S $(GM2_FLAGS) -c -B./stage2/m2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/2.s ; \\\n+              ./gm2 -S $(GM2_FLAGS) -c -B./m2/m2obj2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/2.s ; \\\n               echo -n \"[2]\" ; \\\n-              ./gm2 -S $(GM2_FLAGS) -c -B./stage3/m2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/3.s ; \\\n+              ./gm2 -S $(GM2_FLAGS) -c -B./m2/m2obj3 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/3.s ; \\\n               echo -n \"[3]\" ; \\\n               if ! diff m2/gm2-compiler-verify/1.s m2/gm2-compiler-verify/2.s > m2/gm2-compiler-verify/1_2.diff 2>&1 ; then \\\n                   echo -n \" [stage 1 and stage 2 differ]\" ; \\\n@@ -678,7 +730,7 @@ gm2.verifyparanoid: stage1/m2/cc1gm2$(exeext) stage2/m2/cc1gm2$(exeext) stage3/m\n \n # gm2.verifystage12 diffs the output of the stage1 and stage2 compilers with the compiler source code\n \n-gm2.verifystage12: force stage1/m2/cc1gm2$(exeext) stage2/m2/cc1gm2$(exeext)\n+gm2.verifystage12: force m2/stage1/cc1gm2$(exeext) m2/m2obj2/cc1gm2$(exeext)\n \t@echo \"verifying stage1 and stage2 generations of GNU Modula-2 compilers - it may take some time..\"\n \t$(QUIAT)for i in $(GM2-VERIFY-MODS) ; do \\\n            echo -n \"$$i \" ; \\\n@@ -698,9 +750,9 @@ gm2.verifystage12: force stage1/m2/cc1gm2$(exeext) stage2/m2/cc1gm2$(exeext)\n \t$(QUIAT)for i in x $(GM2-VERIFY-AUTO) ; do \\\n            if [ -f m2/gm2-auto/$$i ] ; then \\\n               echo -n \"$$i \" ; \\\n-              ./gm2 -S $(GM2_FLAGS) -c -B./stage1/m2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/1.s ; \\\n+              ./gm2 -S $(GM2_FLAGS) -c -B./m2/stage1 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/1.s ; \\\n               echo -n \"[1]\" ; \\\n-              ./gm2 -S $(GM2_FLAGS) -c -B./stage2/m2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/2.s ; \\\n+              ./gm2 -S $(GM2_FLAGS) -c -B./m2/m2obj2 -I$(srcdir)/m2/gm2-compiler:$(srcdir)/m2/gm2-libs:$(srcdir)/m2/gm2-gcc:$(srcdir)/m2/gm2-libiberty m2/gm2-auto/$$i -o m2/gm2-compiler-verify/2.s ; \\\n               echo -n \"[2]\" ; \\\n               if ! diff m2/gm2-compiler-verify/1.s m2/gm2-compiler-verify/2.s > m2/gm2-compiler-verify/1_2.diff 2>&1 ; then \\\n                   echo -n \" [stage 1 and stage 2 differ]\" ; \\\n@@ -717,78 +769,99 @@ gm2.verifystage12: force stage1/m2/cc1gm2$(exeext) stage2/m2/cc1gm2$(exeext)\n # The rules which build objects in the gm2-compiler-paranoid gm2-libs-paranoid directories.\n \n m2/gm2-libs-paranoid/%.o: m2/gm2-libs-ch/%.c\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(XGCC) -c -g $(GM2_O_S3) $(GM2_O) -I./ -Im2/gm2-libs -Wall $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/%.o: $(srcdir)/m2/gm2-libs/%.mod\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-libs-iso -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/%.o: $(srcdir)/m2/gm2-compiler/%.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/%.o: m2/gm2-compiler-paranoid/%.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/P0SyntaxCheck.o: m2/gm2-compiler-paranoid/P0SyntaxCheck.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/P1Build.o: m2/gm2-compiler-paranoid/P1Build.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/P2Build.o: m2/gm2-compiler-paranoid/P2Build.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/P3Build.o: m2/gm2-compiler-paranoid/P3Build.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/PHBuild.o: m2/gm2-compiler-paranoid/PHBuild.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-compiler-paranoid/PCBuild.o: m2/gm2-compiler-paranoid/PCBuild.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_O_S3) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc -I$(srcdir)/m2/gm2-libiberty $< -o $@\n \n m2/gm2-libs-paranoid/host.o: $(srcdir)/m2/gm2-libs-ch/host.c m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/wrapc.o: $(srcdir)/m2/gm2-libs-ch/wrapc.c m2/gm2-libs-boot/$(SRC_PREFIX)wrapc.h m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c -DIN_GCC $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/UnixArgs.o: $(srcdir)/m2/gm2-libs-ch/UnixArgs.cc \\\n                                   m2/gm2-libs-boot/$(SRC_PREFIX)UnixArgs.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c -DIN_GCC $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/errno.o: $(srcdir)/m2/gm2-libs-ch/errno.c \\\n                                    m2/gm2-libs-boot/$(SRC_PREFIX)errno.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c -DIN_GCC $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/Selective.o: $(srcdir)/m2/gm2-libs-ch/Selective.c \\\n                                    m2/gm2-libs-boot/$(SRC_PREFIX)Selective.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(COMPILER) -c -DIN_GCC $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/choosetemp.o: $(srcdir)/m2/gm2-libs-ch/choosetemp.c \\\n                                     m2/gm2-libiberty/$(SRC_PREFIX)choosetemp.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c -DIN_GCC $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot -Im2/gm2-libiberty $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/SysExceptions.o: $(srcdir)/m2/gm2-libs-ch/SysExceptions.c \\\n                                   m2/gm2-libs-boot/$(SRC_PREFIX)SysExceptions.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c -DIN_GCC $(GM2_O_S3) $(CFLAGS) -Im2/gm2-libs -I$(srcdir)/m2 -Im2 -I. -Im2/gm2-libs-boot $(INCLUDES) $< -o $@\n \n m2/gm2-compiler-paranoid/m2flex.o: m2/gm2-compiler/m2flex.c $(TIMEVAR_H)\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(COMPILER) -c $(GM2_O_S3) -g $(ALL_COMPILERFLAGS) $(ALL_CPPFLAGS) $(INCLUDES) \\\n           $(GM2GCC) -Im2/gm2-compiler-boot -Im2/gm2-libs-boot $< -o $@\n \n m2/gm2-libs-paranoid/dtoa.o: $(srcdir)/m2/gm2-libs-ch/dtoa.cc \\\n                               m2/gm2-libs-boot/$(SRC_PREFIX)dtoa.h \\\n                               m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c $(GM2_O_S3) $(CFLAGS) -I$(srcdir)/m2 -Im2/gm2-libs-boot -Im2/gm2-libs $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/ldtoa.o: $(srcdir)/m2/gm2-libs-ch/ldtoa.cc \\\n                                m2/gm2-libs-boot/$(SRC_PREFIX)ldtoa.h \\\n                                m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c $(GM2_O_S3) $(CFLAGS) -I$(srcdir)/m2 -Im2/gm2-libs-boot -Im2/gm2-libs $(INCLUDES) $< -o $@\n \n m2/gm2-libs-paranoid/termios.o: $(srcdir)/m2/gm2-libs-ch/termios.c \\\n                                m2/gm2-libs-boot/$(SRC_PREFIX)termios.h \\\n                                m2/gm2-libs/gm2-libs-host.h\n+\t-test -d m2/gm2-libs-paranoid || $(mkinstalldirs) m2/gm2-libs-paranoid\n \t$(CXX) -c $(GM2_O_S3) $(CFLAGS) -I$(srcdir)/m2 -Im2/gm2-libs-boot -Im2/gm2-libs $(INCLUDES) $< -o $@\n \n \n@@ -818,12 +891,15 @@ m2/gm2-compiler-paranoid/gm2.a: \\\n \t$(RANLIB) $@\n \n m2/gm2-compiler-paranoid/M2Version.mod:\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(SHELL) $(srcdir)/m2/tools-src/makeversion -m $(srcdir) m2/gm2-compiler-paranoid\n \n m2/gm2-compiler-paranoid/M2Version.o: m2/gm2-compiler-paranoid/M2Version.mod\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(GM2_2) $(GM2_FLAGS) -c -I$(srcdir)/m2/gm2-compiler -I$(srcdir)/m2/gm2-libs -I$(srcdir)/m2/gm2-gcc $< -o $@\n \n m2/gm2-compiler-paranoid/%.mod: $(srcdir)/m2/gm2-compiler/%.bnf $(PGE)\n+\t-test -d m2/gm2-compiler-paranoid || $(mkinstalldirs) m2/gm2-compiler-paranoid\n \t$(PGE) -k -l $< -o $@\n \n # Recreate the target independent copies of the documentation which is"}, {"sha": "d2afff2f23f1cdf442381beea88f3daf8dd89ccf", "filename": "gcc/m2/config-lang.in", "status": "modified", "additions": 0, "deletions": 29, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b918b20d18b9ccea43d80d563986b7e7696e1cd/gcc%2Fm2%2Fconfig-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b918b20d18b9ccea43d80d563986b7e7696e1cd/gcc%2Fm2%2Fconfig-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fm2%2Fconfig-lang.in?ref=5b918b20d18b9ccea43d80d563986b7e7696e1cd", "patch": "@@ -52,32 +52,3 @@ gtfiles=\"\\$(srcdir)/m2/gm2-lang.cc \\\n outputs=\"m2/config-make \\\n          m2/Make-maintainer \\\n         \"\n-\n-mkdir -p m2/gm2-compiler-boot\n-mkdir -p m2/gm2-libs-boot\n-mkdir -p m2/gm2-ici-boot\n-mkdir -p m2/gm2-libiberty\n-mkdir -p m2/gm2-gcc\n-mkdir -p m2/gm2-compiler\n-mkdir -p m2/gm2-libs\n-mkdir -p m2/gm2-libs-iso\n-mkdir -p m2/gm2-compiler-paranoid\n-mkdir -p m2/gm2-libs-paranoid\n-mkdir -p m2/gm2-compiler-verify\n-mkdir -p m2/boot-bin\n-mkdir -p m2/gm2-libs-pim\n-mkdir -p m2/gm2-libs-coroutines\n-mkdir -p m2/gm2-libs-min\n-mkdir -p m2/pge-boot\n-mkdir -p plugin\n-mkdir -p stage1/m2 stage2/m2 stage3/m2 stage4/m2\n-\n-# directories used by Make-maintainer\n-\n-mkdir -p m2/gm2-auto\n-mkdir -p m2/gm2-pg-boot\n-mkdir -p m2/gm2-pge-boot\n-mkdir -p m2/gm2-ppg-boot\n-mkdir -p m2/mc-boot\n-mkdir -p m2/mc-boot-ch\n-mkdir -p m2/mc-boot-gen"}]}