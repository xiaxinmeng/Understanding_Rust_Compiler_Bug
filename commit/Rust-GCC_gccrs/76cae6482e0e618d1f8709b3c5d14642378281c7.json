{"sha": "76cae6482e0e618d1f8709b3c5d14642378281c7", "node_id": "C_kwDOANBUbNoAKDc2Y2FlNjQ4MmUwZTYxOGQxZjg3MDliM2M1ZDE0NjQyMzc4MjgxYzc", "commit": {"author": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2022-03-30T19:54:36Z"}, "committer": {"name": "Sebastian Huber", "email": "sebastian.huber@embedded-brains.de", "date": "2022-04-28T18:46:49Z"}, "message": "gcov: Move prepend to list to read_gcda_file()\n\nThis helps to reuse read_gcda_file().\n\nlibgcc/\n\n\t* libgcov-util.c (read_gcda_file): Prepend new info object to global\n\tlist.\n\t(ftw_read_file): Remove list append here.", "tree": {"sha": "d930c6aa4a363a976021e495856603e4c0c21eb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d930c6aa4a363a976021e495856603e4c0c21eb1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76cae6482e0e618d1f8709b3c5d14642378281c7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76cae6482e0e618d1f8709b3c5d14642378281c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76cae6482e0e618d1f8709b3c5d14642378281c7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76cae6482e0e618d1f8709b3c5d14642378281c7/comments", "author": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "committer": {"login": "sebhub", "id": 932056, "node_id": "MDQ6VXNlcjkzMjA1Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/932056?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebhub", "html_url": "https://github.com/sebhub", "followers_url": "https://api.github.com/users/sebhub/followers", "following_url": "https://api.github.com/users/sebhub/following{/other_user}", "gists_url": "https://api.github.com/users/sebhub/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebhub/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebhub/subscriptions", "organizations_url": "https://api.github.com/users/sebhub/orgs", "repos_url": "https://api.github.com/users/sebhub/repos", "events_url": "https://api.github.com/users/sebhub/events{/privacy}", "received_events_url": "https://api.github.com/users/sebhub/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f9b59dd8e5586862cd3c2fa53901ee2e90226a3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9b59dd8e5586862cd3c2fa53901ee2e90226a3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9b59dd8e5586862cd3c2fa53901ee2e90226a3c"}], "stats": {"total": 11, "additions": 4, "deletions": 7}, "files": [{"sha": "906ea645547e6b4e7238637848aaea7e92e828f4", "filename": "libgcc/libgcov-util.c", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76cae6482e0e618d1f8709b3c5d14642378281c7/libgcc%2Flibgcov-util.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76cae6482e0e618d1f8709b3c5d14642378281c7/libgcc%2Flibgcov-util.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Flibgcov-util.c?ref=76cae6482e0e618d1f8709b3c5d14642378281c7", "patch": "@@ -301,6 +301,9 @@ read_gcda_file (const char *filename)\n   num_fn_info = 0;\n   curr_fn_info = 0;\n \n+  /* Prepend to global gcov info list.  */\n+  obj_info->next = gcov_info_head;\n+  gcov_info_head = obj_info;\n \n   /* Read stamp.  */\n   obj_info->stamp = gcov_read_unsigned ();\n@@ -392,7 +395,6 @@ ftw_read_file (const char *filename,\n {\n   int filename_len;\n   int suffix_len;\n-  struct gcov_info *obj_info;\n \n   /* Only read regular files.  */\n   if (type != FTW_F)\n@@ -410,12 +412,7 @@ ftw_read_file (const char *filename,\n   if (verbose)\n     fnotice (stderr, \"reading file: %s\\n\", filename);\n \n-  obj_info = read_gcda_file (xstrdup (filename));\n-  if (!obj_info)\n-    return 0;\n-\n-  obj_info->next = gcov_info_head;\n-  gcov_info_head = obj_info;\n+  (void)read_gcda_file (xstrdup (filename));\n \n   return 0;\n }"}]}