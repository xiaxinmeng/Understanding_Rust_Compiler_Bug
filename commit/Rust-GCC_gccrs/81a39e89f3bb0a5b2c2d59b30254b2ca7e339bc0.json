{"sha": "81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODFhMzllODlmM2JiMGE1YjJjMmQ1OWIzMDI1NGIyY2E3ZTMzOWJjMA==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2008-10-29T19:46:16Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2008-10-29T19:46:16Z"}, "message": "re PR target/32277 (indir-call-prof fails on ia64-linux-gnu)\n\n\tPR target/32277\n\t* libgcov.c ( __gcov_indirect_call_profiler): Check\n\tTARGET_VTABLE_USES_DESCRIPTORS.\n\nFrom-SVN: r141442", "tree": {"sha": "1bcb50fc008f9e630f337be271e925d4dc509c22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bcb50fc008f9e630f337be271e925d4dc509c22"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0/comments", "author": null, "committer": null, "parents": [{"sha": "f9f658c800a345c0efc14cef30978ba1aa63e572", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9f658c800a345c0efc14cef30978ba1aa63e572", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9f658c800a345c0efc14cef30978ba1aa63e572"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "c064c103b0ab739e4ad20ddad80506135c7d4a9f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0", "patch": "@@ -1,3 +1,9 @@\n+2008-10-29  Steve Ellcey  <sje@cup.hp.com>\n+\n+\tPR target/32277\n+\t* libgcov.c ( __gcov_indirect_call_profiler): Check\n+\tTARGET_VTABLE_USES_DESCRIPTORS.\n+\n 2008-10-29  Stefan Schulze Frielinghaus  <xxschulz@de.ibm.com>\n \n \t* config/spu/spu.h (FRAME_GROWS_DOWNWARD): Define."}, {"sha": "5abceae6d62e07219e2bbff0d222fdace44f726c", "filename": "gcc/libgcov.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0/gcc%2Flibgcov.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0/gcc%2Flibgcov.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flibgcov.c?ref=81a39e89f3bb0a5b2c2d59b30254b2ca7e339bc0", "patch": "@@ -777,7 +777,12 @@ void\n __gcov_indirect_call_profiler (gcov_type* counter, gcov_type value, \n \t\t\t       void* cur_func, void* callee_func)\n {\n-  if (cur_func == callee_func)\n+  /* If the C++ virtual tables contain function descriptors then one\n+     function may have multiple descriptors and we need to dereference\n+     the descriptors to see if they point to the same function.  */\n+  if (cur_func == callee_func\n+      || (TARGET_VTABLE_USES_DESCRIPTORS && callee_func\n+\t  && *(void **) cur_func == *(void **) callee_func))\n     __gcov_one_value_profiler_body (counter, value);\n }\n #endif"}]}