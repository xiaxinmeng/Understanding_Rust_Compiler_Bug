{"sha": "65c6f1b45f6440d1e245aaf2a97639c7dc4314c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjVjNmYxYjQ1ZjY0NDBkMWUyNDVhYWYyYTk3NjM5YzdkYzQzMTRjMw==", "commit": {"author": {"name": "Zdenek Dvorak", "email": "rakdver@atrey.karlin.mff.cuni.cz", "date": "2003-07-05T14:40:59Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-07-05T14:40:59Z"}, "message": "Sat Jul  5 16:18:53 CEST 2003  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n\n\tBlame to Jan Hubicka  <jh@suse.cz>\n\t* cfglayout.c (record_effective_endpoints): Split insns before\n\tfirst basic block correctly.\n\nFrom-SVN: r68973", "tree": {"sha": "b51b498c5ca943b9565eaefb10b25dbe1c28556e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b51b498c5ca943b9565eaefb10b25dbe1c28556e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3/comments", "author": null, "committer": null, "parents": [{"sha": "e865267810dd2f02d40f4e30307611cf51df344f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e865267810dd2f02d40f4e30307611cf51df344f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e865267810dd2f02d40f4e30307611cf51df344f"}], "stats": {"total": 27, "additions": 15, "deletions": 12}, "files": [{"sha": "bb80f8f2d5e9241dcf530c1300469ad99975d48f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=65c6f1b45f6440d1e245aaf2a97639c7dc4314c3", "patch": "@@ -1,3 +1,9 @@\n+Sat Jul  5 16:18:53 CEST 2003  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n+\n+\tBlame to Jan Hubicka  <jh@suse.cz>\n+\t* cfglayout.c (record_effective_endpoints): Split insns before\n+\tfirst basic block correctly.\n+\n 2003-07-05  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* expr.c (expand_expr, case COMPONENT_REF): When seeing if should use "}, {"sha": "08d20e1357af18282e563e29e72f753325f41d00", "filename": "gcc/cfglayout.c", "status": "modified", "additions": 9, "deletions": 12, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3/gcc%2Fcfglayout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65c6f1b45f6440d1e245aaf2a97639c7dc4314c3/gcc%2Fcfglayout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfglayout.c?ref=65c6f1b45f6440d1e245aaf2a97639c7dc4314c3", "patch": "@@ -196,19 +196,16 @@ record_effective_endpoints (void)\n   rtx insn;\n \n   for (insn = get_insns ();\n-       NEXT_INSN (insn) && GET_CODE (insn) == NOTE;\n+       insn\n+       && GET_CODE (insn) == NOTE\n+       && NOTE_LINE_NUMBER (insn) != NOTE_INSN_BASIC_BLOCK;\n        insn = NEXT_INSN (insn))\n-    {\n-      if (NOTE_LINE_NUMBER (insn) == NOTE_INSN_BASIC_BLOCK)\n-\t{\n-\t  insn = NULL;\n-\t  break;\n-\t }\n-      if (NOTE_LINE_NUMBER (insn) == NOTE_INSN_FUNCTION_BEG)\n-\tbreak;\n-    }\n-  if (insn)\n-    cfg_layout_function_header = unlink_insn_chain (get_insns (), insn);\n+    continue;\n+  if (!insn)\n+    abort ();  /* No basic blocks at all?  */\n+  if (PREV_INSN (insn))\n+    cfg_layout_function_header =\n+\t    unlink_insn_chain (get_insns (), PREV_INSN (insn));\n   else\n     cfg_layout_function_header = NULL_RTX;\n "}]}