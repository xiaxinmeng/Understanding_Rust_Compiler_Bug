{"sha": "d45c2a1bd60be302395493a7891bba5656611b6e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ1YzJhMWJkNjBiZTMwMjM5NTQ5M2E3ODkxYmJhNTY1NjYxMWI2ZQ==", "commit": {"author": {"name": "Bin Cheng", "email": "bin.cheng@arm.com", "date": "2015-03-25T05:58:19Z"}, "committer": {"name": "Bin Cheng", "email": "amker@gcc.gnu.org", "date": "2015-03-25T05:58:19Z"}, "message": "sourcebuild.texi (arm_tune_string_ops_prefer_neon): New.\n\n\n\t* doc/sourcebuild.texi (arm_tune_string_ops_prefer_neon): New.\n\n\tgcc/testsuite/ChangeLog\n\t* lib/target-supports.exp (arm_tune_string_ops_prefer_neon): New.\n\t* gcc.target/arm/memset-inline-4.c: Skip for\n\tarm_tune_string_ops_prefer_neon.\n\t* gcc.target/arm/memset-inline-5.c: Ditto.\n\t* gcc.target/arm/memset-inline-6.c: Ditto.\n\t* gcc.target/arm/memset-inline-8.c: Ditto.\n\t* gcc.target/arm/memset-inline-9.c: Ditto.\n\nFrom-SVN: r221651", "tree": {"sha": "7e5ec618cbaa2dcadb8ccf67c20a6555c57e517b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e5ec618cbaa2dcadb8ccf67c20a6555c57e517b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d45c2a1bd60be302395493a7891bba5656611b6e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d45c2a1bd60be302395493a7891bba5656611b6e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d45c2a1bd60be302395493a7891bba5656611b6e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d45c2a1bd60be302395493a7891bba5656611b6e/comments", "author": null, "committer": null, "parents": [{"sha": "2301ca745e4332fce8abcd7bc790d69fabf1a423", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2301ca745e4332fce8abcd7bc790d69fabf1a423", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2301ca745e4332fce8abcd7bc790d69fabf1a423"}], "stats": {"total": 40, "additions": 30, "deletions": 10}, "files": [{"sha": "e04cf2fb3f095782a7022217ded4ef0790a87968", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,3 +1,7 @@\n+2015-03-25  Bin Cheng  <bin.cheng@arm.com>\n+\n+\t* doc/sourcebuild.texi (arm_tune_string_ops_prefer_neon): New.\n+\n 2015-03-25  Bin Cheng  <bin.cheng@arm.com>\n \n \t* config/arm/arm.opt (print_tune_info): New option."}, {"sha": "c6ef40e5db78f57d5b91341b8d2e0af68cac3a28", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1527,6 +1527,9 @@ Some multilibs may be incompatible with this option.\n @item arm_neon\n ARM target supports generating NEON instructions.\n \n+@item arm_tune_string_ops_prefer_neon\n+Test CPU tune supports inlining string operations with NEON instructions.\n+\n @item arm_neon_hw\n Test system supports executing NEON instructions.\n "}, {"sha": "a93a880bc91dca423a3be6ecc6fb6f65b9117cfb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,3 +1,13 @@\n+2015-03-25  Bin Cheng  <bin.cheng@arm.com>\n+\n+\t* lib/target-supports.exp (arm_tune_string_ops_prefer_neon): New.\n+\t* gcc.target/arm/memset-inline-4.c: Skip for\n+\tarm_tune_string_ops_prefer_neon.\n+\t* gcc.target/arm/memset-inline-5.c: Ditto.\n+\t* gcc.target/arm/memset-inline-6.c: Ditto.\n+\t* gcc.target/arm/memset-inline-8.c: Ditto.\n+\t* gcc.target/arm/memset-inline-9.c: Ditto.\n+\n 2015-03-24  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/58923"}, {"sha": "c1db2ee9123d8f891e5c4526512b04ae2354f340", "filename": "gcc/testsuite/gcc.target/arm/memset-inline-4.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-4.c?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,6 +1,5 @@\n /* { dg-do run } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mcpu=cortex-a9\" } { \"\" } } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mtune=cortex-a9\" } { \"\" } } */\n+/* { dg-skip-if \"Don't inline memset using neon instructions\" { ! arm_tune_string_ops_prefer_neon } } */\n /* { dg-options \"-save-temps -O2 -fno-inline\" } */\n /* { dg-add-options \"arm_neon\" } */\n "}, {"sha": "b9391f59edfb6567d62b991462de00897059f9a7", "filename": "gcc/testsuite/gcc.target/arm/memset-inline-5.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-5.c?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,6 +1,5 @@\n /* { dg-do run } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mcpu=cortex-a9\" } { \"\" } } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mtune=cortex-a9\" } { \"\" } } */\n+/* { dg-skip-if \"Don't inline memset using neon instructions\" { ! arm_tune_string_ops_prefer_neon } } */\n /* { dg-options \"-save-temps -O2 -fno-inline\" } */\n /* { dg-add-options \"arm_neon\" } */\n "}, {"sha": "0050af1b13bfc816817df5ccbe1b9a56e95c2bf9", "filename": "gcc/testsuite/gcc.target/arm/memset-inline-6.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-6.c?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,6 +1,5 @@\n /* { dg-do run } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mcpu=cortex-a9\" } { \"\" } } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mtune=cortex-a9\" } { \"\" } } */\n+/* { dg-skip-if \"Don't inline memset using neon instructions\" { ! arm_tune_string_ops_prefer_neon } } */\n /* { dg-options \"-save-temps -O2 -fno-inline\" } */\n /* { dg-add-options \"arm_neon\" } */\n "}, {"sha": "780e449aa3a6a795ccec3055cc4e23fd4c33509c", "filename": "gcc/testsuite/gcc.target/arm/memset-inline-8.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-8.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-8.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-8.c?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,6 +1,5 @@\n /* { dg-do run } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mcpu=cortex-a9\" } { \"\" } } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mtune=cortex-a9\" } { \"\" } } */\n+/* { dg-skip-if \"Don't inline memset using neon instructions\" { ! arm_tune_string_ops_prefer_neon } } */\n /* { dg-options \"-save-temps -O2 -fno-inline\"  } */\n /* { dg-add-options \"arm_neon\" } */\n "}, {"sha": "66e18b31c2e9d14279d5b9acb2544442695b9282", "filename": "gcc/testsuite/gcc.target/arm/memset-inline-9.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fmemset-inline-9.c?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -1,6 +1,5 @@\n /* { dg-do run } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mcpu=cortex-a9\" } { \"\" } } */\n-/* { dg-skip-if \"Don't inline memset using neon instructions on cortex-a9\" { *-*-* } { \"-mtune=cortex-a9\" } { \"\" } } */\n+/* { dg-skip-if \"Don't inline memset using neon instructions\" { ! arm_tune_string_ops_prefer_neon } } */\n /* { dg-options \"-save-temps -Os -fno-inline\" } */\n /* { dg-add-options \"arm_neon\" } */\n "}, {"sha": "b57f545fce55a6d825388e761fe46b174e28170a", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d45c2a1bd60be302395493a7891bba5656611b6e/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=d45c2a1bd60be302395493a7891bba5656611b6e", "patch": "@@ -2954,6 +2954,14 @@ proc check_effective_target_arm_cortex_m { } {\n     } \"-mthumb\"]\n }\n \n+# Return 1 if this compilation turns on string_ops_prefer_neon on.\n+\n+proc check_effective_target_arm_tune_string_ops_prefer_neon { } {\n+    return [check_no_messages_and_pattern arm_tune_string_ops_prefer_neon \"@string_ops_prefer_neon:\\t1\" assembly {\n+\tint foo (void) { return 0; }\n+    } \"-O2 -mprint-tune-info\" ]\n+}\n+\n # Return 1 if the target supports executing NEON instructions, 0\n # otherwise.  Cache the result.\n "}]}