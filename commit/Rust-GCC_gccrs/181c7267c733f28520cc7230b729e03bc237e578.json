{"sha": "181c7267c733f28520cc7230b729e03bc237e578", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTgxYzcyNjdjNzMzZjI4NTIwY2M3MjMwYjcyOWUwM2JjMjM3ZTU3OA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-26T04:25:56Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-26T04:25:56Z"}, "message": "mksysinfo, net: Always define syscall.SO_REUSEPORT.\n\nFrom-SVN: r186857", "tree": {"sha": "10ebba1f59e1c1d7beab57c399d2bf0e218e05a4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/10ebba1f59e1c1d7beab57c399d2bf0e218e05a4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/181c7267c733f28520cc7230b729e03bc237e578", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/181c7267c733f28520cc7230b729e03bc237e578", "html_url": "https://github.com/Rust-GCC/gccrs/commit/181c7267c733f28520cc7230b729e03bc237e578", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/181c7267c733f28520cc7230b729e03bc237e578/comments", "author": null, "committer": null, "parents": [{"sha": "af6204cc29a1a02f41a7a3f5d2b6a6b1dd098075", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af6204cc29a1a02f41a7a3f5d2b6a6b1dd098075", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af6204cc29a1a02f41a7a3f5d2b6a6b1dd098075"}], "stats": {"total": 10, "additions": 6, "deletions": 4}, "files": [{"sha": "af88814b4b9ed918b66041f13e1aa2c5ace68864", "filename": "libgo/go/net/sockopt_bsd.go", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/181c7267c733f28520cc7230b729e03bc237e578/libgo%2Fgo%2Fnet%2Fsockopt_bsd.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/181c7267c733f28520cc7230b729e03bc237e578/libgo%2Fgo%2Fnet%2Fsockopt_bsd.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fnet%2Fsockopt_bsd.go?ref=181c7267c733f28520cc7230b729e03bc237e578", "patch": "@@ -53,9 +53,11 @@ func setDefaultMulticastSockopts(s int) error {\n \t// This option is supported only in descendants of 4.4BSD,\n \t// to make an effective multicast application that requires\n \t// quick draw possible.\n-\terr = syscall.SetsockoptInt(s, syscall.SOL_SOCKET, syscall.SO_REUSEPORT, 1)\n-\tif err != nil {\n-\t\treturn os.NewSyscallError(\"setsockopt\", err)\n+\tif syscall.SO_REUSEPORT != 0 {\n+\t\terr = syscall.SetsockoptInt(s, syscall.SOL_SOCKET, syscall.SO_REUSEPORT, 1)\n+\t\tif err != nil {\n+\t\t\treturn os.NewSyscallError(\"setsockopt\", err)\n+\t\t}\n \t}\n \treturn nil\n }"}, {"sha": "db61a73c0ac9f7628c72a7e5335fc76238728f5f", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/181c7267c733f28520cc7230b729e03bc237e578/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/181c7267c733f28520cc7230b729e03bc237e578/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=181c7267c733f28520cc7230b729e03bc237e578", "patch": "@@ -264,7 +264,7 @@ grep '^const _SHUT_' gen-sysinfo.go |\n   sed -e 's/^\\(const \\)_\\(SHUT[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n # The net package requires some const definitions.\n-for m in IP_PKTINFO IPV6_V6ONLY IPPROTO_IPV6 IPV6_JOIN_GROUP IPV6_LEAVE_GROUP IPV6_TCLASS; do\n+for m in IP_PKTINFO IPV6_V6ONLY IPPROTO_IPV6 IPV6_JOIN_GROUP IPV6_LEAVE_GROUP IPV6_TCLASS SO_REUSEPORT; do\n   if ! grep \"^const $m \" ${OUT} >/dev/null 2>&1; then\n     echo \"const $m = 0\" >> ${OUT}\n   fi"}]}