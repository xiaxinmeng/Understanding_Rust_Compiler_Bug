{"sha": "975147a4a4a970261d30905dcf7e3fd683ce119f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTc1MTQ3YTRhNGE5NzAyNjFkMzA5MDVkY2Y3ZTNmZDY4M2NlMTE5Zg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2006-09-14T18:06:04Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2006-09-14T18:06:04Z"}, "message": "re PR boehm-gc/29068 (Bootstrap fails building libjava on SPARC/Solaris)\n\nlibjava\n\tPR boehm-gc/29068:\n\t* boehm.cc (_Jv_GCAttachThread): Disable on Solaris.\n\t(_Jv_GCDetachThread): Likewise.\nboehm-gc\n\tPR boehm-gc/29068.\n\t* misc.c (GC_init_inner): Don't use GC_get_thread_stack_base on\n\tSolaris.\n\nFrom-SVN: r116948", "tree": {"sha": "e8f3771fa5de2790b3ddfc21a771278d9f7d803c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8f3771fa5de2790b3ddfc21a771278d9f7d803c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/975147a4a4a970261d30905dcf7e3fd683ce119f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/975147a4a4a970261d30905dcf7e3fd683ce119f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/975147a4a4a970261d30905dcf7e3fd683ce119f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/975147a4a4a970261d30905dcf7e3fd683ce119f/comments", "author": null, "committer": null, "parents": [{"sha": "351272b977fe8cbc4a94ced4b7d05a604a754a42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/351272b977fe8cbc4a94ced4b7d05a604a754a42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/351272b977fe8cbc4a94ced4b7d05a604a754a42"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "bf4f0cd1a6cea124f6039fd1530a1668025488bb", "filename": "boehm-gc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/975147a4a4a970261d30905dcf7e3fd683ce119f/boehm-gc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/975147a4a4a970261d30905dcf7e3fd683ce119f/boehm-gc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2FChangeLog?ref=975147a4a4a970261d30905dcf7e3fd683ce119f", "patch": "@@ -1,3 +1,9 @@\n+2006-09-14  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR boehm-gc/29068.\n+\t* misc.c (GC_init_inner): Don't use GC_get_thread_stack_base on\n+\tSolaris.\n+\n 2006-08-21  Bryce McKinlay  <mckinlay@redhat.com>\n \t\n \tPR libgcj/13212:"}, {"sha": "069c7d57ad0086e7c4b413dc157a62f67aa1ae40", "filename": "boehm-gc/misc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/975147a4a4a970261d30905dcf7e3fd683ce119f/boehm-gc%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/975147a4a4a970261d30905dcf7e3fd683ce119f/boehm-gc%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/boehm-gc%2Fmisc.c?ref=975147a4a4a970261d30905dcf7e3fd683ce119f", "patch": "@@ -674,7 +674,7 @@ void GC_init_inner()\n #   if !defined(THREADS) || defined(GC_PTHREADS) || defined(GC_WIN32_THREADS) \\\n \t|| defined(GC_SOLARIS_THREADS)\n       if (GC_stackbottom == 0) {\n-        # ifdef GC_PTHREADS\n+        # if defined(GC_PTHREADS) && ! defined(GC_SOLARIS_THREADS)\n \t/* Use thread_stack_base if available, as GC could be initialized from\n \t   a thread that is not the \"main\" thread.  */\n \tGC_stackbottom = GC_get_thread_stack_base();"}, {"sha": "a4c80c9c3d25da3d95d425cd83a8918407045c50", "filename": "libjava/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/975147a4a4a970261d30905dcf7e3fd683ce119f/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/975147a4a4a970261d30905dcf7e3fd683ce119f/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=975147a4a4a970261d30905dcf7e3fd683ce119f", "patch": "@@ -1,3 +1,9 @@\n+2006-09-14  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR boehm-gc/29068:\n+\t* boehm.cc (_Jv_GCAttachThread): Disable on Solaris.\n+\t(_Jv_GCDetachThread): Likewise.\n+\n 2006-09-14  Andreas Schwab  <schwab@suse.de>\n \n \t* posix-threads.cc: Include \"posix.h\"."}, {"sha": "2e382959ee40d64b4bb9becd12ea81f55b0f1ca8", "filename": "libjava/boehm.cc", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/975147a4a4a970261d30905dcf7e3fd683ce119f/libjava%2Fboehm.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/975147a4a4a970261d30905dcf7e3fd683ce119f/libjava%2Fboehm.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fboehm.cc?ref=975147a4a4a970261d30905dcf7e3fd683ce119f", "patch": "@@ -701,15 +701,16 @@ _Jv_GCAttachThread ()\n {\n   // The registration interface is only defined on posixy systems and\n   // only actually works if pthread_getattr_np is defined.\n-#ifdef HAVE_PTHREAD_GETATTR_NP\n+  // FIXME: until gc7 it is simpler to disable this on solaris.\n+#if defined(HAVE_PTHREAD_GETATTR_NP) && !defined(GC_SOLARIS_THREADS)\n   GC_register_my_thread ();\n #endif\n }\n \n void\n _Jv_GCDetachThread ()\n {\n-#ifdef HAVE_PTHREAD_GETATTR_NP\n+#if defined(HAVE_PTHREAD_GETATTR_NP) && !defined(GC_SOLARIS_THREADS)\n   GC_unregister_my_thread ();\n #endif\n }"}]}