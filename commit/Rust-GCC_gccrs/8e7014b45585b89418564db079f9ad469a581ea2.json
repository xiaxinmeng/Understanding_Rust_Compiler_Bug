{"sha": "8e7014b45585b89418564db079f9ad469a581ea2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGU3MDE0YjQ1NTg1Yjg5NDE4NTY0ZGIwNzlmOWFkNDY5YTU4MWVhMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-10-17T20:11:00Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-10-17T20:11:00Z"}, "message": "langhooks.h (struct lang_hooks): Document that tree_size langhook may be also called on tcc_type nodes.\n\n\t* langhooks.h (struct lang_hooks): Document that tree_size langhook\n\tmay be also called on tcc_type nodes.\n\t* langhooks.c (lhd_tree_size): Likewise.\n\n\t* gcc-interface/misc.c (gnat_tree_size): New function.\n\t(LANG_HOOKS_TREE_SIZE): Redefine.\n\nFrom-SVN: r253829", "tree": {"sha": "288005a9e12bb983c162c9ab78066db8227ce818", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/288005a9e12bb983c162c9ab78066db8227ce818"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8e7014b45585b89418564db079f9ad469a581ea2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e7014b45585b89418564db079f9ad469a581ea2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e7014b45585b89418564db079f9ad469a581ea2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e7014b45585b89418564db079f9ad469a581ea2/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "eaf95345d33a727885761fa48d7481405614351a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eaf95345d33a727885761fa48d7481405614351a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eaf95345d33a727885761fa48d7481405614351a"}], "stats": {"total": 42, "additions": 36, "deletions": 6}, "files": [{"sha": "f7de68489c8af4575fdcc381494971fa1f3f5536", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8e7014b45585b89418564db079f9ad469a581ea2", "patch": "@@ -1,3 +1,9 @@\n+2017-10-17  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* langhooks.h (struct lang_hooks): Document that tree_size langhook\n+\tmay be also called on tcc_type nodes.\n+\t* langhooks.c (lhd_tree_size): Likewise.\n+\n 2017-10-17  David Malcolm  <dmalcolm@redhat.com>\n \n \t* gimple-ssa-sprintf.c (fmtwarn): Update for changed signature of"}, {"sha": "7d50dbba1eca9c57fcafb8b3024f4496e41611bd", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8e7014b45585b89418564db079f9ad469a581ea2", "patch": "@@ -1,3 +1,8 @@\n+2017-10-17  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcc-interface/misc.c (gnat_tree_size): New function.\n+\t(LANG_HOOKS_TREE_SIZE): Redefine.\n+\n 2017-10-14  Hristian Kirtchev  <kirtchev@adacore.com>\n \n \t* sem_elab.adb (In_Preelaborated_Context): A generic package subject to"}, {"sha": "5083c71db77a4706441db3fc655dc2f0e8c92f01", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=8e7014b45585b89418564db079f9ad469a581ea2", "patch": "@@ -343,6 +343,23 @@ internal_error_function (diagnostic_context *context, const char *msgid,\n   Compiler_Abort (sp, sp_loc, true);\n }\n \n+/* lang_hooks.tree_size: Determine the size of a tree with code C,\n+   which is a language-specific tree code in category tcc_constant,\n+   tcc_exceptional or tcc_type.  The default expects never to be called.  */\n+\n+static size_t\n+gnat_tree_size (enum tree_code code)\n+{\n+  gcc_checking_assert (code >= NUM_TREE_CODES);\n+  switch (code)\n+    {\n+    case UNCONSTRAINED_ARRAY_TYPE:\n+      return sizeof (tree_type_non_common);\n+    default:\n+      gcc_unreachable ();\n+    }\n+}\n+\n /* Perform all the initialization steps that are language-specific.  */\n \n static bool\n@@ -1387,6 +1404,8 @@ get_lang_specific (tree node)\n #define LANG_HOOKS_NAME\t\t\t\"GNU Ada\"\n #undef  LANG_HOOKS_IDENTIFIER_SIZE\n #define LANG_HOOKS_IDENTIFIER_SIZE\tsizeof (struct tree_identifier)\n+#undef  LANG_HOOKS_TREE_SIZE\n+#define LANG_HOOKS_TREE_SIZE\t\tgnat_tree_size\n #undef  LANG_HOOKS_INIT\n #define LANG_HOOKS_INIT\t\t\tgnat_init\n #undef  LANG_HOOKS_OPTION_LANG_MASK"}, {"sha": "9b3212b90cf19eba1f714d502374a5c038616115", "filename": "gcc/langhooks.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Flanghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Flanghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.c?ref=8e7014b45585b89418564db079f9ad469a581ea2", "patch": "@@ -266,8 +266,8 @@ lhd_gimplify_expr (tree *expr_p ATTRIBUTE_UNUSED,\n }\n \n /* lang_hooks.tree_size: Determine the size of a tree with code C,\n-   which is a language-specific tree code in category tcc_constant or\n-   tcc_exceptional.  The default expects never to be called.  */\n+   which is a language-specific tree code in category tcc_constant,\n+   tcc_exceptional or tcc_type.  The default expects never to be called.  */\n size_t\n lhd_tree_size (enum tree_code c ATTRIBUTE_UNUSED)\n {"}, {"sha": "d1288f1965d19c02bba9daf035467c2591a9d7d4", "filename": "gcc/langhooks.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Flanghooks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e7014b45585b89418564db079f9ad469a581ea2/gcc%2Flanghooks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.h?ref=8e7014b45585b89418564db079f9ad469a581ea2", "patch": "@@ -307,10 +307,10 @@ struct lang_hooks\n   /* Remove any parts of the tree that are used only by the FE. */\n   void (*free_lang_data) (tree);\n \n-  /* Determines the size of any language-specific tcc_constant or\n-     tcc_exceptional nodes.  Since it is called from make_node, the\n-     only information available is the tree code.  Expected to die\n-     on unrecognized codes.  */\n+  /* Determines the size of any language-specific tcc_constant,\n+     tcc_exceptional or tcc_type nodes.  Since it is called from\n+     make_node, the only information available is the tree code.\n+     Expected to die on unrecognized codes.  */\n   size_t (*tree_size) (enum tree_code);\n \n   /* Return the language mask used for converting argv into a sequence"}]}