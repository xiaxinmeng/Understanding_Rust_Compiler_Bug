{"sha": "5e9a538594761b93843b4285c06bcd871fa0335f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU5YTUzODU5NDc2MWI5Mzg0M2I0Mjg1YzA2YmNkODcxZmEwMzM1Zg==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-05-19T18:10:30Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-05-19T18:10:30Z"}, "message": "PR c++/71184: Fix NULL dereference in cp_parser_operator\n\nThe source-range handling for the array form of operator\nnew/delete erroneously assumed that the \"]\" was present,\nleading to a dereference of NULL when it's absent.\n\nFix it thusly.\n\ngcc/cp/ChangeLog:\n\tPR c++/71184\n\t* parser.c (cp_parser_operator): For array new/delete, check that\n\tcp_parser_require returned a non-NULL token before dereferencing\n\tit.\n\ngcc/testsuite/ChangeLog:\n\tPR c++/71184\n\t* g++.dg/pr71184.C: New test case.\n\nFrom-SVN: r236483", "tree": {"sha": "400ffed166e4c228ca8195177c6d22df759aff75", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/400ffed166e4c228ca8195177c6d22df759aff75"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e9a538594761b93843b4285c06bcd871fa0335f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e9a538594761b93843b4285c06bcd871fa0335f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e9a538594761b93843b4285c06bcd871fa0335f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e9a538594761b93843b4285c06bcd871fa0335f/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1478c897bff210b8ea875f5aa58da68ee6264c45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1478c897bff210b8ea875f5aa58da68ee6264c45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1478c897bff210b8ea875f5aa58da68ee6264c45"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "70dbcb3e7159d0f73f326ff758ba8afce77d796a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=5e9a538594761b93843b4285c06bcd871fa0335f", "patch": "@@ -1,3 +1,10 @@\n+2016-05-19  David Malcolm  <dmalcolm@redhat.com>\n+\n+\tPR c++/71184\n+\t* parser.c (cp_parser_operator): For array new/delete, check that\n+\tcp_parser_require returned a non-NULL token before dereferencing\n+\tit.\n+\n 2016-05-19  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* decl.c (finish_enum_value_list): Use the specified mode."}, {"sha": "076e7f368476e6fd9a3d099d0080f641acb3df7f", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=5e9a538594761b93843b4285c06bcd871fa0335f", "patch": "@@ -13791,8 +13791,9 @@ cp_parser_operator (cp_parser* parser)\n \t    /* Consume the `[' token.  */\n \t    cp_lexer_consume_token (parser->lexer);\n \t    /* Look for the `]' token.  */\n-\t    end_loc = cp_parser_require (parser, CPP_CLOSE_SQUARE,\n-                                         RT_CLOSE_SQUARE)->location;\n+\t    if (cp_token *close_token\n+\t\t= cp_parser_require (parser, CPP_CLOSE_SQUARE, RT_CLOSE_SQUARE))\n+\t      end_loc = close_token->location;\n \t    id = ansi_opname (op == NEW_EXPR\n \t\t\t      ? VEC_NEW_EXPR : VEC_DELETE_EXPR);\n \t  }"}, {"sha": "1630598fe3124b14a510c180c226a8016cc81780", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5e9a538594761b93843b4285c06bcd871fa0335f", "patch": "@@ -1,3 +1,8 @@\n+2016-05-19  David Malcolm  <dmalcolm@redhat.com>\n+\n+\tPR c++/71184\n+\t* g++.dg/pr71184.C: New test case.\n+\n 2016-05-19  Kelvin Nilsen  <kelvin@gcc.gnu.org>\n \n \t* gcc.target/powerpc/darn-0.c: New test."}, {"sha": "452303e47a11a69b3f43d2fe1affe9e0909d2c91", "filename": "gcc/testsuite/g++.dg/pr71184.C", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr71184.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9a538594761b93843b4285c06bcd871fa0335f/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr71184.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr71184.C?ref=5e9a538594761b93843b4285c06bcd871fa0335f", "patch": "@@ -0,0 +1 @@\n+operator new[ // { dg-error \"expected type-specifier before 'new'\" }"}]}