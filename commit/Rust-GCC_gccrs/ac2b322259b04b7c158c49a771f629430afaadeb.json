{"sha": "ac2b322259b04b7c158c49a771f629430afaadeb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWMyYjMyMjI1OWIwNGI3YzE1OGM0OWE3NzFmNjI5NDMwYWZhYWRlYg==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2003-12-25T16:28:50Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2003-12-25T16:28:50Z"}, "message": "PR c++/13268, c++/13339\n\n        PR c++/13268, c++/13339\n        * class.c (add_method): Return early when method is error_mark_node.\n        * pt.c (tsubst_friend_function): Return early when new_friend is\n        error_mark_node.\n\nFrom-SVN: r75022", "tree": {"sha": "9e63c348c0242d549efe192d37ce056146844149", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e63c348c0242d549efe192d37ce056146844149"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac2b322259b04b7c158c49a771f629430afaadeb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2b322259b04b7c158c49a771f629430afaadeb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac2b322259b04b7c158c49a771f629430afaadeb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac2b322259b04b7c158c49a771f629430afaadeb/comments", "author": null, "committer": null, "parents": [{"sha": "5a6159ddb9f1c5a0bf70ae1535023f8a19870251", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a6159ddb9f1c5a0bf70ae1535023f8a19870251", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a6159ddb9f1c5a0bf70ae1535023f8a19870251"}], "stats": {"total": 22, "additions": 19, "deletions": 3}, "files": [{"sha": "4adb918f355ffa46b405994a74c5dce8be3071ee", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2b322259b04b7c158c49a771f629430afaadeb/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2b322259b04b7c158c49a771f629430afaadeb/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=ac2b322259b04b7c158c49a771f629430afaadeb", "patch": "@@ -1,3 +1,10 @@\n+2003-12-25  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR c++/13268, c++/13339\n+\t* class.c (add_method): Return early when method is error_mark_node.\n+\t* pt.c (tsubst_friend_function): Return early when new_friend is\n+\terror_mark_node.\n+\n 2003-12-23  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cp-lang.c (cp_expr_size): Return zero for empty classes."}, {"sha": "2928dd330710452d9bc02b230904db187ad40fd3", "filename": "gcc/cp/class.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2b322259b04b7c158c49a771f629430afaadeb/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2b322259b04b7c158c49a771f629430afaadeb/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=ac2b322259b04b7c158c49a771f629430afaadeb", "patch": "@@ -725,12 +725,18 @@ modify_vtable_entry (tree t,\n void\n add_method (tree type, tree method, int error_p)\n {\n-  int using = (DECL_CONTEXT (method) != type);\n+  int using;\n   int len;\n   int slot;\n   tree method_vec;\n-  int template_conv_p = (TREE_CODE (method) == TEMPLATE_DECL\n-\t\t\t && DECL_TEMPLATE_CONV_FN_P (method));\n+  int template_conv_p;\n+\n+  if (method == error_mark_node)\n+    return;\n+  \n+  using = (DECL_CONTEXT (method) != type);\n+  template_conv_p = (TREE_CODE (method) == TEMPLATE_DECL\n+                     && DECL_TEMPLATE_CONV_FN_P (method));\n \n   if (!CLASSTYPE_METHOD_VEC (type))\n     /* Make a new method vector.  We start with 8 entries.  We must"}, {"sha": "3c0e7d802137befd80b5f230ec47c1b0a915448c", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac2b322259b04b7c158c49a771f629430afaadeb/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac2b322259b04b7c158c49a771f629430afaadeb/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=ac2b322259b04b7c158c49a771f629430afaadeb", "patch": "@@ -4897,6 +4897,9 @@ tsubst_friend_function (tree decl, tree args)\n      \n      Then, in S<int>, template <class U> void f(int, U) is not an\n      instantiation of anything.  */\n+  if (new_friend == error_mark_node)\n+    return error_mark_node;\n+  \n   DECL_USE_TEMPLATE (new_friend) = 0;\n   if (TREE_CODE (decl) == TEMPLATE_DECL)\n     {"}]}