{"sha": "92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJkY2Y0Yzg1MTNiYjZkZDE2MDJlN2VmNTVhOWM1NTBkZjU5ZmZlNw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@cygnus.com", "date": "1997-11-26T19:29:38Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1997-11-26T19:29:38Z"}, "message": "Pass 9th fp argument correctly on System V/eabi; Add @plt for -fPIC/-mrelocatable\n\nFrom-SVN: r16746", "tree": {"sha": "93f432007f4c11aaefd2eb76ca16c011effa38fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/93f432007f4c11aaefd2eb76ca16c011effa38fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/comments", "author": null, "committer": null, "parents": [{"sha": "33e5c8c3ae37650ed69acf8e671d0500ab4d9f5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33e5c8c3ae37650ed69acf8e671d0500ab4d9f5a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33e5c8c3ae37650ed69acf8e671d0500ab4d9f5a"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "608cb73af5473a2df6d4d15c5091ffa7b8e907e2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "patch": "@@ -2,6 +2,17 @@ Wed Nov 26 11:12:26 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* toplev.c (main): Complain about -gdwarfn.\n \n+Tue Nov 25 20:32:24 1997  Michael Meissner  <meissner@cygnus.com>\n+\n+\t(patches originally from Geoffrey Keating)\n+\t* rs6000.c (function_arg): Excess floating point arguments don't\n+\tgo into GPR registers after exhausting FP registers under the\n+\tSystem V.4 ABI.\n+\t(function_arg_partial_nregs): Ditto.\n+\n+\t* rs6000.md (call insns): If -fPIC or -mrelocatable, add @plt\n+\tsuffix to calls.\n+\n Tue Nov 25 23:37:27 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* integrate.c (output_inline_function): Just unset DECL_INLINE."}, {"sha": "4af7a75f803dae73429a0fb2a01948b4b79e1f9b", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "patch": "@@ -1349,9 +1349,11 @@ function_arg (cum, mode, type, named)\n \t\t\t\tconst0_rtx)));\n     }\n \n-  /* Long longs won't be split between register and stack */\n+  /* Long longs won't be split between register and stack;\n+     FP arguments get passed on the stack if they didn't get a register.  */\n   else if ((DEFAULT_ABI == ABI_V4 || DEFAULT_ABI == ABI_SOLARIS) &&\n-\t   align_words + RS6000_ARG_SIZE (mode, type, named) > GP_ARG_NUM_REG)\n+\t   (align_words + RS6000_ARG_SIZE (mode, type, named) > GP_ARG_NUM_REG\n+\t    || (GET_MODE_CLASS (mode) == MODE_FLOAT && TARGET_HARD_FLOAT)))\n     {\n       return NULL_RTX;\n     }\n@@ -1385,6 +1387,9 @@ function_arg_partial_nregs (cum, mode, type, named)\n \treturn 0;\n     }\n \n+  if (GET_MODE_CLASS (mode) == MODE_FLOAT && TARGET_HARD_FLOAT)\n+    return 0;\n+\n   if (cum->words < GP_ARG_NUM_REG\n       && GP_ARG_NUM_REG < (cum->words + RS6000_ARG_SIZE (mode, type, named)))\n     {"}, {"sha": "26ea2b4a0b3687f95762d705473c45faa9745be4", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=92dcf4c8513bb6dd1602e7ef55a9c550df59ffe7", "patch": "@@ -7580,7 +7580,7 @@\n   else if (INTVAL (operands[2]) & CALL_V4_CLEAR_FP_ARGS)\n     output_asm_insn (\\\"creqv 6,6,6\\\", operands);\n \n-  return (flag_pic == 1) ? \\\"bl %z0@plt\\\" : \\\"bl %z0\\\";\n+  return flag_pic ? \\\"bl %z0@plt\\\" : \\\"bl %z0\\\";\n }\"\n   [(set_attr \"type\" \"branch\")\n    (set_attr \"length\" \"4,8\")])\n@@ -7650,7 +7650,7 @@\n   else if (INTVAL (operands[3]) & CALL_V4_CLEAR_FP_ARGS)\n     output_asm_insn (\\\"creqv 6,6,6\\\", operands);\n \n-  return (flag_pic == 1) ? \\\"bl %z1@plt\\\" : \\\"bl %z1\\\";\n+  return flag_pic ? \\\"bl %z1@plt\\\" : \\\"bl %z1\\\";\n }\"\n   [(set_attr \"type\" \"branch\")\n    (set_attr \"length\" \"4,8\")])"}]}