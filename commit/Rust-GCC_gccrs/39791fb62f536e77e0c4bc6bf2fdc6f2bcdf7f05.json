{"sha": "39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzk3OTFmYjYyZjUzNmU3N2UwYzRiYzZiZjJmZGM2ZjJiY2RmN2YwNQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2019-01-23T11:07:56Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2019-01-23T11:07:56Z"}, "message": "cgraphunit.c (cgraph_node::expand_thunk): When expanding a GIMPLE thunk that returns by reference...\n\n\t* cgraphunit.c (cgraph_node::expand_thunk): When expanding a GIMPLE\n\tthunk that returns by reference, use the type of the return object\n\tof the thunk instead of that of the alias to build the dereference.\n\nFrom-SVN: r268182", "tree": {"sha": "5febf9df2afc9efe3f7010a454a9c820322a53c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5febf9df2afc9efe3f7010a454a9c820322a53c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/comments", "author": null, "committer": null, "parents": [{"sha": "b3e5901b625df90e3618b2e5a06cccc36cd84b6a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e5901b625df90e3618b2e5a06cccc36cd84b6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e5901b625df90e3618b2e5a06cccc36cd84b6a"}], "stats": {"total": 40, "additions": 37, "deletions": 3}, "files": [{"sha": "ef29cb0f30a7185b2f2570c9269f4d229e7ac7c8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "patch": "@@ -1,3 +1,9 @@\n+2019-01-23  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* cgraphunit.c (cgraph_node::expand_thunk): When expanding a GIMPLE\n+\tthunk that returns by reference, use the type of the return object\n+\tof the thunk instead of that of the alias to build the dereference.\n+\n 2019-01-23  Vineet Gupta  <vgupta@synopsys.com>\n \n \t* config/arc/atomic.md: Add operand to DMB instruction."}, {"sha": "a7c9b9ac249acbd78372a14d3ed21ced826a0857", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "patch": "@@ -1916,10 +1916,9 @@ cgraph_node::expand_thunk (bool output_asm_thunks, bool force_gimple_thunk)\n \t      restmp = gimple_fold_indirect_ref (resdecl);\n \t      if (!restmp)\n \t\trestmp = build2 (MEM_REF,\n-\t\t\t\t TREE_TYPE (TREE_TYPE (DECL_RESULT (alias))),\n+\t\t\t\t TREE_TYPE (TREE_TYPE (resdecl)),\n \t\t\t\t resdecl,\n-\t\t\t\t build_int_cst (TREE_TYPE\n-\t\t\t\t   (DECL_RESULT (alias)), 0));\n+\t\t\t\t build_int_cst (TREE_TYPE (resdecl), 0));\n \t    }\n \t  else if (!is_gimple_reg_type (restype))\n \t    {"}, {"sha": "b1ad37201af58a561204ecafa237677a6763f18a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "patch": "@@ -1,3 +1,7 @@\n+2019-01-23  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/specs/opt4.ads: New test.\n+\n 2019-01-23  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/88964"}, {"sha": "b391950b372f81e58206654a59f61b2a2c78589b", "filename": "gcc/testsuite/gnat.dg/specs/opt4.ads", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fopt4.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fopt4.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fopt4.ads?ref=39791fb62f536e77e0c4bc6bf2fdc6f2bcdf7f05", "patch": "@@ -0,0 +1,25 @@\n+-- { dg-do compile }\n+-- { dg-options \"-O\" }\n+\n+package Opt4 is\n+\n+   type Rec (D : Boolean := False) is record\n+      case D is\n+         when False => null;\n+         when True => I : Integer;\n+      end case;\n+   end record;\n+\n+   Null_Rec : constant Rec := (D => False);\n+\n+   type I1 is limited interface;\n+\n+   type I2 is limited interface;\n+\n+   function Func (Data : I2) return Rec is abstract;\n+\n+   type Ext is limited new I1 and I2 with null record;\n+\n+   overriding function Func (Data : Ext) return Rec is (Null_Rec);\n+\n+end Opt4;"}]}