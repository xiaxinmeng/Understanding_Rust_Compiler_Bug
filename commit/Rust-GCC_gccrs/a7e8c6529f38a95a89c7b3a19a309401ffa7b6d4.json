{"sha": "a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTdlOGM2NTI5ZjM4YTk1YTg5YzdiM2ExOWEzMDk0MDFmZmE3YjZkNA==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2008-10-08T13:38:15Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2008-10-08T13:38:15Z"}, "message": "bpabi.h (ARM_FUNCTION_PROFILER): Define new EABI compatible profiler (__gnu_mcount_nc).\n\n2008-10-08  Paul Brook  <paul@codesourcery.com>\n\n\tgcc/\n\t* config/arm/bpabi.h (ARM_FUNCTION_PROFILER): Define new EABI\n\tcompatible profiler (__gnu_mcount_nc).\n\t(SUBTARGET_FRAME_POINTER_REQUIRED): Define.\n\nFrom-SVN: r140974", "tree": {"sha": "ab282aadee2694c7693ec8730d9cbec55529c22a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab282aadee2694c7693ec8730d9cbec55529c22a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4/comments", "author": null, "committer": null, "parents": [{"sha": "54723b46231868447f68ed5322d916bd05bffae3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54723b46231868447f68ed5322d916bd05bffae3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54723b46231868447f68ed5322d916bd05bffae3"}], "stats": {"total": 23, "additions": 23, "deletions": 0}, "files": [{"sha": "f3ce56fa5701d05dfa62a339ca68c43929092f24", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4", "patch": "@@ -1,3 +1,9 @@\n+2008-10-08  Paul Brook  <paul@codesourcery.com>\n+\n+\t* config/arm/bpabi.h (ARM_FUNCTION_PROFILER): Define new EABI\n+\tcompatible profiler (__gnu_mcount_nc).\n+\t(SUBTARGET_FRAME_POINTER_REQUIRED): Define.\n+\n 2008-10-08  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/i386.c (initial_ix86_tune_features): Add"}, {"sha": "c8cdc3db087a59d5ef296352110adf514df8a0c4", "filename": "gcc/config/arm/bpabi.h", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4/gcc%2Fconfig%2Farm%2Fbpabi.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4/gcc%2Fconfig%2Farm%2Fbpabi.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fbpabi.h?ref=a7e8c6529f38a95a89c7b3a19a309401ffa7b6d4", "patch": "@@ -147,3 +147,20 @@\n #undef FINI_SECTION_ASM_OP\n #define INIT_ARRAY_SECTION_ASM_OP ARM_EABI_CTORS_SECTION_OP\n #define FINI_ARRAY_SECTION_ASM_OP ARM_EABI_DTORS_SECTION_OP\n+\n+/* The legacy _mcount implementation assumes r11 points to a\n+    4-word APCS frame.  This is generally not true for EABI targets,\n+    particularly not in Thumb mode.  We assume the mcount\n+    implementation does not require a counter variable (No Counter).\n+    Note that __gnu_mcount_nc will be entered with a misaligned stack.\n+    This is OK because it uses a special calling convention anyway.  */\n+\n+#undef  ARM_FUNCTION_PROFILER\n+#define ARM_FUNCTION_PROFILER(STREAM, LABELNO)  \t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  fprintf (STREAM, \"\\tpush\\t{lr}\\n\");\t\t\t\t\t\\\n+  fprintf (STREAM, \"\\tbl\\t__gnu_mcount_nc\\n\");\t\t\t\t\\\n+}\n+\n+#undef SUBTARGET_FRAME_POINTER_REQUIRED\n+#define SUBTARGET_FRAME_POINTER_REQUIRED 0"}]}