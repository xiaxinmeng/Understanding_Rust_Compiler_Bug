{"sha": "e54675bbabc2ed8100b7055008818b391cbbabbb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTU0Njc1YmJhYmMyZWQ4MTAwYjcwNTUwMDg4MThiMzkxY2JiYWJiYg==", "commit": {"author": {"name": "Marc Glisse", "email": "marc.glisse@inria.fr", "date": "2017-11-22T16:44:46Z"}, "committer": {"name": "Marc Glisse", "email": "glisse@gcc.gnu.org", "date": "2017-11-22T16:44:46Z"}, "message": "Avoid two_valued_val_range_p for pointers.\n\n2017-11-22  Marc Glisse  <marc.glisse@inria.fr>\n\n\tPR tree-optimization/83104\ngcc/\n\t* vr-values.c (simplify_stmt_using_ranges): Check integral argument,\n\tnot result.\n\ngcc/testsuite/\n\t* gcc.c-torture/compile/pr83104.c: New file.\n\nFrom-SVN: r255068", "tree": {"sha": "1cdd03c02cad8253ed2031494bfcbe9d9cb2070d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1cdd03c02cad8253ed2031494bfcbe9d9cb2070d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e54675bbabc2ed8100b7055008818b391cbbabbb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e54675bbabc2ed8100b7055008818b391cbbabbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e54675bbabc2ed8100b7055008818b391cbbabbb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e54675bbabc2ed8100b7055008818b391cbbabbb/comments", "author": {"login": "mglisse", "id": 10097863, "node_id": "MDQ6VXNlcjEwMDk3ODYz", "avatar_url": "https://avatars.githubusercontent.com/u/10097863?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mglisse", "html_url": "https://github.com/mglisse", "followers_url": "https://api.github.com/users/mglisse/followers", "following_url": "https://api.github.com/users/mglisse/following{/other_user}", "gists_url": "https://api.github.com/users/mglisse/gists{/gist_id}", "starred_url": "https://api.github.com/users/mglisse/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mglisse/subscriptions", "organizations_url": "https://api.github.com/users/mglisse/orgs", "repos_url": "https://api.github.com/users/mglisse/repos", "events_url": "https://api.github.com/users/mglisse/events{/privacy}", "received_events_url": "https://api.github.com/users/mglisse/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "29a3136e6d0be33b962675abe4e13a5d4e58a126", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29a3136e6d0be33b962675abe4e13a5d4e58a126", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29a3136e6d0be33b962675abe4e13a5d4e58a126"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "f80012097ca888e08d500e5946904aa2f75ba4dc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e54675bbabc2ed8100b7055008818b391cbbabbb", "patch": "@@ -1,3 +1,9 @@\n+2017-11-22  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR tree-optimization/83104\n+\t* vr-values.c (simplify_stmt_using_ranges): Check integral argument,\n+\tnot result.\n+\n 2017-11-22  Marek Polacek  <polacek@redhat.com>\n \t    H.J. Lu  <hongjiu.lu@intel.com>\n \t    Jason Merrill  <jason@redhat.com>"}, {"sha": "737424b1fd9ab33dba821f53a068ef38f033c333", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e54675bbabc2ed8100b7055008818b391cbbabbb", "patch": "@@ -1,3 +1,8 @@\n+2017-11-22  Marc Glisse  <marc.glisse@inria.fr>\n+\n+\tPR tree-optimization/83104\n+\t* gcc.c-torture/compile/pr83104.c: New file.\n+\n 2017-11-22  Christophe Lyon  <christophe.lyon@linaro.org>\n \n \t* gcc.target/arm/pr56184.C: Add -Wno-return-type to dg-options."}, {"sha": "40dc3d4da43e85a03cd88ce582a5f89f61f7317e", "filename": "gcc/testsuite/gcc.c-torture/compile/pr83104.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr83104.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr83104.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr83104.c?ref=e54675bbabc2ed8100b7055008818b391cbbabbb", "patch": "@@ -0,0 +1,5 @@\n+int *a;\n+int foo() {\n+  if (a && a - (int *)0 > 0)\n+    return 0;\n+}"}, {"sha": "0150f59d53dc9f685bb4dba71f3ac4751e06bf02", "filename": "gcc/vr-values.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2Fvr-values.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e54675bbabc2ed8100b7055008818b391cbbabbb/gcc%2Fvr-values.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvr-values.c?ref=e54675bbabc2ed8100b7055008818b391cbbabbb", "patch": "@@ -4091,7 +4091,7 @@ vr_values::simplify_stmt_using_ranges (gimple_stmt_iterator *gsi)\n \t LHS = VAR == VAL1 ? (VAL1 BINOP CST) : (VAL2 BINOP CST) */\n \n       if (TREE_CODE_CLASS (rhs_code) == tcc_binary\n-\t  && INTEGRAL_TYPE_P (TREE_TYPE (lhs))\n+\t  && INTEGRAL_TYPE_P (TREE_TYPE (rhs1))\n \t  && ((TREE_CODE (rhs1) == INTEGER_CST\n \t       && TREE_CODE (rhs2) == SSA_NAME)\n \t      || (TREE_CODE (rhs2) == INTEGER_CST"}]}