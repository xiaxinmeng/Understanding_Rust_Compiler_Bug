{"sha": "36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzYzNjNlYmI4ODk1MGRjNWI0MTFjZWIxZmE1M2Q3ZWUyZWRkMGEzOA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-01-05T20:18:15Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-01-05T20:18:15Z"}, "message": "re PR middle-end/51768 (ICE with invalid asm goto)\n\n\tPR middle-end/51768\n\t* stmt.c (check_unique_operand_names): Don't ICE during error\n\treporting if i is from labels chain.\n\n\t* c-c++-common/pr51768.c: New test.\n\nFrom-SVN: r182921", "tree": {"sha": "755789193a6cfe1960b7d20642b601f382015bd8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/755789193a6cfe1960b7d20642b601f382015bd8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1e69d24e61a1fc7a3133ca82bcef2a5a437da992", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e69d24e61a1fc7a3133ca82bcef2a5a437da992", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e69d24e61a1fc7a3133ca82bcef2a5a437da992"}], "stats": {"total": 45, "additions": 38, "deletions": 7}, "files": [{"sha": "2e59648f2fa74a791cee6749cb683d8e9e109c23", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "patch": "@@ -1,5 +1,9 @@\n 2012-01-05  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/51768\n+\t* stmt.c (check_unique_operand_names): Don't ICE during error\n+\treporting if i is from labels chain.\n+\n \tPR middle-end/44777\n \t* profile.c (branch_prob): Split bbs that have exit edge\n \tand need a fake entry edge too."}, {"sha": "93d643a7bf0a8bdfa53fc627cad0c4c58ffc266a", "filename": "gcc/stmt.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2Fstmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2Fstmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstmt.c?ref=36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "patch": "@@ -1,7 +1,7 @@\n /* Expands front end tree to back end RTL for GCC\n    Copyright (C) 1987, 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997,\n    1998, 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009,\n-   2010 Free Software Foundation, Inc.\n+   2010, 2011, 2012 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -1253,11 +1253,11 @@ check_operand_nalternatives (tree outputs, tree inputs)\n static bool\n check_unique_operand_names (tree outputs, tree inputs, tree labels)\n {\n-  tree i, j;\n+  tree i, j, i_name = NULL_TREE;\n \n   for (i = outputs; i ; i = TREE_CHAIN (i))\n     {\n-      tree i_name = TREE_PURPOSE (TREE_PURPOSE (i));\n+      i_name = TREE_PURPOSE (TREE_PURPOSE (i));\n       if (! i_name)\n \tcontinue;\n \n@@ -1268,7 +1268,7 @@ check_unique_operand_names (tree outputs, tree inputs, tree labels)\n \n   for (i = inputs; i ; i = TREE_CHAIN (i))\n     {\n-      tree i_name = TREE_PURPOSE (TREE_PURPOSE (i));\n+      i_name = TREE_PURPOSE (TREE_PURPOSE (i));\n       if (! i_name)\n \tcontinue;\n \n@@ -1282,7 +1282,7 @@ check_unique_operand_names (tree outputs, tree inputs, tree labels)\n \n   for (i = labels; i ; i = TREE_CHAIN (i))\n     {\n-      tree i_name = TREE_PURPOSE (i);\n+      i_name = TREE_PURPOSE (i);\n       if (! i_name)\n \tcontinue;\n \n@@ -1297,8 +1297,7 @@ check_unique_operand_names (tree outputs, tree inputs, tree labels)\n   return true;\n \n  failure:\n-  error (\"duplicate asm operand name %qs\",\n-\t TREE_STRING_POINTER (TREE_PURPOSE (TREE_PURPOSE (i))));\n+  error (\"duplicate asm operand name %qs\", TREE_STRING_POINTER (i_name));\n   return false;\n }\n "}, {"sha": "5341574befe099b904ccba1a545271e3098cceb6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "patch": "@@ -1,5 +1,8 @@\n 2012-01-05  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR middle-end/51768\n+\t* c-c++-common/pr51768.c: New test.\n+\n \tPR middle-end/44777\n \t* gcc.dg/tree-prof/pr44777.c: New test.\n "}, {"sha": "082594ccad7a1aac9b67eba4cecb1bcfc3370fb9", "filename": "gcc/testsuite/c-c++-common/pr51768.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr51768.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/36363ebb88950dc5b411ceb1fa53d7ee2edd0a38/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr51768.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr51768.c?ref=36363ebb88950dc5b411ceb1fa53d7ee2edd0a38", "patch": "@@ -0,0 +1,25 @@\n+/* PR middle-end/51768 */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+void\n+foo (void)\n+{\n+  asm goto (\"\" : : : : lab, lab, lab2, lab);\t/* { dg-error \"duplicate asm operand name\" } */\n+lab:;\n+lab2:;\n+}\n+\n+void\n+bar (void)\n+{\n+  asm goto (\"\" : : [lab] \"i\" (0) : : lab);\t/* { dg-error \"duplicate asm operand name\" } */\n+lab:;\n+}\n+\n+void\n+baz (void)\n+{\n+  int x;\n+  asm (\"\" : [lab] \"=r\" (x) : [lab] \"r\" (x));\t/* { dg-error \"duplicate asm operand name\" } */\n+}"}]}