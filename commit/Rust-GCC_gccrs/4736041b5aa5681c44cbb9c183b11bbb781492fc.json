{"sha": "4736041b5aa5681c44cbb9c183b11bbb781492fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDczNjA0MWI1YWE1NjgxYzQ0Y2JiOWMxODNiMTFiYmI3ODE0OTJmYw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@adacore.com", "date": "2019-09-19T08:14:57Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2019-09-19T08:14:57Z"}, "message": "[Ada] Emit DW_AT_GNU_bias with -fgnat-encodings=gdb\n\nEmit DW_AT_GNU_bias with -fgnat-encodings=gdb.  gdb implements this,\nbut not the encoded variant.\n\n2019-09-19  Tom Tromey  <tromey@adacore.com>\n\ngcc/ada/\n\n\t* gcc-interface/misc.c (gnat_get_type_bias): Return the bias\n\twhen -fgnat-encodings=gdb.\n\ngcc/testsuite/\n\n\t* gnat.dg/bias1.adb: New testcase.\n\nFrom-SVN: r275958", "tree": {"sha": "6457e5e7f50b252680c6f30eb9964ea84d219248", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6457e5e7f50b252680c6f30eb9964ea84d219248"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4736041b5aa5681c44cbb9c183b11bbb781492fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4736041b5aa5681c44cbb9c183b11bbb781492fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4736041b5aa5681c44cbb9c183b11bbb781492fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4736041b5aa5681c44cbb9c183b11bbb781492fc/comments", "author": {"login": "tromey", "id": 1557670, "node_id": "MDQ6VXNlcjE1NTc2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tromey", "html_url": "https://github.com/tromey", "followers_url": "https://api.github.com/users/tromey/followers", "following_url": "https://api.github.com/users/tromey/following{/other_user}", "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}", "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tromey/subscriptions", "organizations_url": "https://api.github.com/users/tromey/orgs", "repos_url": "https://api.github.com/users/tromey/repos", "events_url": "https://api.github.com/users/tromey/events{/privacy}", "received_events_url": "https://api.github.com/users/tromey/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0c27222c60b26cd21588576f140abd04f1d8a853", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c27222c60b26cd21588576f140abd04f1d8a853", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c27222c60b26cd21588576f140abd04f1d8a853"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "94b32fba566a4ef4395f714fea6ddeb699c852c4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=4736041b5aa5681c44cbb9c183b11bbb781492fc", "patch": "@@ -1,3 +1,8 @@\n+2019-09-19  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gcc-interface/misc.c (gnat_get_type_bias): Return the bias\n+\twhen -fgnat-encodings=gdb.\n+\n 2019-09-19  Steve Baird  <baird@adacore.com>\n \n \t* sem_prag.adb (Preferred_String_Type): A new function. Given an"}, {"sha": "4abd4d5708a540eb66d04b230da5a9df9e7125a8", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=4736041b5aa5681c44cbb9c183b11bbb781492fc", "patch": "@@ -1111,7 +1111,7 @@ gnat_get_type_bias (const_tree gnu_type)\n {\n   if (TREE_CODE (gnu_type) == INTEGER_TYPE\n       && TYPE_BIASED_REPRESENTATION_P (gnu_type)\n-      && gnat_encodings == DWARF_GNAT_ENCODINGS_MINIMAL)\n+      && gnat_encodings != DWARF_GNAT_ENCODINGS_ALL)\n     return TYPE_RM_MIN_VALUE (gnu_type);\n \n   return NULL_TREE;"}, {"sha": "07adb119850ba0d9d85833ad7993f272b7216629", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4736041b5aa5681c44cbb9c183b11bbb781492fc", "patch": "@@ -1,3 +1,7 @@\n+2019-09-19  Tom Tromey  <tromey@adacore.com>\n+\n+\t* gnat.dg/bias1.adb: New testcase.\n+\n 2019-09-19  Steve Baird  <baird@adacore.com>\n \n \t* gnat.dg/annotation1.adb: New testcase."}, {"sha": "016a159b692da3df98d6c1bd8f3e94a6aa8f8525", "filename": "gcc/testsuite/gnat.dg/bias1.adb", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Ftestsuite%2Fgnat.dg%2Fbias1.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4736041b5aa5681c44cbb9c183b11bbb781492fc/gcc%2Ftestsuite%2Fgnat.dg%2Fbias1.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fbias1.adb?ref=4736041b5aa5681c44cbb9c183b11bbb781492fc", "patch": "@@ -0,0 +1,34 @@\n+--  { dg-do compile }\n+--  { dg-options \"-cargs -g -dA -gnatws -fgnat-encodings=gdb -margs\" }\n+--  { dg-final { scan-assembler \"DW_AT_GNU_bias\" } }\n+\n+procedure Bias1 is\n+   type Small is range -7 .. -4;\n+   for Small'Size use 2;\n+   Y : Small := -5;\n+   Y1 : Small := -7;\n+\n+   type Byte is mod 256;\n+   type Repeat_Count_T is new Byte range 1 .. 2 ** 6;\n+   for Repeat_Count_T'Size use 6;\n+   X : Repeat_Count_T := 64;\n+   X1 : Repeat_Count_T := 1;\n+\n+   type Char_Range is range 65 .. 68;\n+   for Char_Range'Size use 2;\n+   Cval : Char_Range := 65;\n+\n+   type SomePackedRecord is record\n+      R: Small;\n+      S: Small;\n+   end record;\n+   pragma Pack (SomePackedRecord);\n+   SPR : SomePackedRecord := (R => -4, S => -5);\n+\n+   type Packed_Array is array (1 .. 3) of Small;\n+   pragma pack (Packed_Array);\n+   A : Packed_Array := (-7, -5, -4);\n+\n+begin\n+   null;\n+end Bias1;\n\\ No newline at end of file"}]}