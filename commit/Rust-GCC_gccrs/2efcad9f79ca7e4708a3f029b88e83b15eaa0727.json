{"sha": "2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmVmY2FkOWY3OWNhN2U0NzA4YTNmMDI5Yjg4ZTgzYjE1ZWFhMDcyNw==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2008-04-14T16:38:16Z"}, "committer": {"name": "Samuel Tardieu", "email": "sam@gcc.gnu.org", "date": "2008-04-14T16:38:16Z"}, "message": "sem_prag.adb (Analyze_Pragma, [...]): Extend error to every non-object and change error message.\n\n2008-04-14  Robert Dewar  <dewar@adacore.com>\n\n    gcc/ada/\n\t* sem_prag.adb (Analyze_Pragma, Linker_Section case): Extend error\n\tto every non-object and change error message.\n\n    gcc/testsuite/\n\t* gnat.dg/specs/linker_section.ads: Check for more error conditions.\n\nFrom-SVN: r134280", "tree": {"sha": "a12a22906f62e38b164533479a2e897810f89e73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a12a22906f62e38b164533479a2e897810f89e73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/comments", "author": null, "committer": null, "parents": [{"sha": "96a791f748bc139f02aa8f874738370ca00632e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96a791f748bc139f02aa8f874738370ca00632e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96a791f748bc139f02aa8f874738370ca00632e5"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "fe278db8a5adca926469c772135c810b5da4c9a6", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "patch": "@@ -1,3 +1,8 @@\n+2008-04-14  Robert Dewar  <dewar@adacore.com>\n+\n+\t* sem_prag.adb (Analyze_Pragma, Linker_Section case): Extend error\n+\tto every non-object and change error message.\n+\n 2008-04-14  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_util.ads, sem_util.adb (In_Subprogram): Remove."}, {"sha": "6b8198037053f3e85d36600487d316450dfd74a4", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "patch": "@@ -8450,10 +8450,10 @@ package body Sem_Prag is\n             Check_Arg_Is_Library_Level_Local_Name (Arg1);\n             Check_Arg_Is_Static_Expression (Arg2, Standard_String);\n \n-            --  This pragma does not apply to types\n+            --  This pragma applies only to objects\n \n-            if Is_Type (Entity (Expression (Arg1))) then\n-               Error_Pragma_Arg (\"pragma% cannot apply to type\", Arg1);\n+            if not Is_Object (Entity (Expression (Arg1))) then\n+               Error_Pragma_Arg (\"pragma% applies only to objects\", Arg1);\n             end if;\n \n             --  The only processing required is to link this item on to the"}, {"sha": "5bf5cab06dc2a2577b1f137311ad0a1412b76396", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "patch": "@@ -1,3 +1,7 @@\n+2008-04-14  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnat.dg/specs/linker_section.ads: Check for more error conditions.\n+\n 2008-04-14  Samuel Tardieu  <sam@rfc1149.net>\n \n \tPR ada/18680"}, {"sha": "73e89aa48e10279ba838c8f3d56a2c7dde67ec32", "filename": "gcc/testsuite/gnat.dg/specs/linker_section.ads", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Flinker_section.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2efcad9f79ca7e4708a3f029b88e83b15eaa0727/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Flinker_section.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Flinker_section.ads?ref=2efcad9f79ca7e4708a3f029b88e83b15eaa0727", "patch": "@@ -3,8 +3,11 @@ package Linker_Section is\n    pragma Linker_Section (Entity  => Data1,\n                           Section => \".eeprom\");\n    type EEPROM_String is new String;\n-   pragma Linker_Section (Entity  => EEPROM_String, -- { dg-error \"type\" }\n+   pragma Linker_Section (Entity  => EEPROM_String, -- { dg-error \"objects\" }\n                           Section => \".eeprom\");\n    Data2 : constant EEPROM_String := \"12345678901234567\";\n+   package Inner is end;\n+   pragma Linker_Section (Entity  => Inner,        -- { dg-error \"objects\" }\n+                          Section => \".eeprom\");\n end Linker_Section;\n "}]}