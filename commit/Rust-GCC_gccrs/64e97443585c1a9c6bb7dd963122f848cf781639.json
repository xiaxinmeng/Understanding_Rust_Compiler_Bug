{"sha": "64e97443585c1a9c6bb7dd963122f848cf781639", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRlOTc0NDM1ODVjMWE5YzZiYjdkZDk2MzEyMmY4NDhjZjc4MTYzOQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2003-06-29T21:16:13Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2003-06-29T21:16:13Z"}, "message": "builtins.c (expand_builtin_mathfn, [...]): Avoid busy work when builtin is not supported by the backend.\n\n\t* builtins.c (expand_builtin_mathfn, expand_builtin_mathfn_2): Avoid\n\tbusy work when builtin is not supported by the backend.\n\nFrom-SVN: r68681", "tree": {"sha": "095854ed9337b2a1aeb49405293e67dad5685e37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/095854ed9337b2a1aeb49405293e67dad5685e37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64e97443585c1a9c6bb7dd963122f848cf781639", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64e97443585c1a9c6bb7dd963122f848cf781639", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64e97443585c1a9c6bb7dd963122f848cf781639", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64e97443585c1a9c6bb7dd963122f848cf781639/comments", "author": null, "committer": null, "parents": [{"sha": "51a7f2053aff54ea60592d8105860b7c30867a38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/51a7f2053aff54ea60592d8105860b7c30867a38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/51a7f2053aff54ea60592d8105860b7c30867a38"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "621e59c393fc3eae0a5c312fc5e93bcfc22923d3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64e97443585c1a9c6bb7dd963122f848cf781639/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64e97443585c1a9c6bb7dd963122f848cf781639/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=64e97443585c1a9c6bb7dd963122f848cf781639", "patch": "@@ -1,3 +1,8 @@\n+Sun Jun 29 23:06:32 CEST 2003  Jan Hubicka  <jh@suse.cz>\n+\n+\t* builtins.c (expand_builtin_mathfn, expand_builtin_mathfn_2): Avoid\n+\tbusy work when builtin is not supported by the backend.\n+\n 2003-06-29  Zdenek Dvorak  <rakdver@atrey.karlin.mff.cuni.cz>\n \n \t* loop.c (count_one_set): Fix detection of registers set in more"}, {"sha": "e8ab4d5740d6c3a1ef50764e7b1c214047f6dfdf", "filename": "gcc/builtins.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64e97443585c1a9c6bb7dd963122f848cf781639/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64e97443585c1a9c6bb7dd963122f848cf781639/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=64e97443585c1a9c6bb7dd963122f848cf781639", "patch": "@@ -1789,6 +1789,10 @@ expand_builtin_mathfn (tree exp, rtx target, rtx subtarget)\n \n   /* Make a suitable register to place result in.  */\n   mode = TYPE_MODE (TREE_TYPE (exp));\n+\n+  /* Before working hard, check whether the instruction is available.  */\n+  if (builtin_optab->handlers[(int) mode].insn_code == CODE_FOR_nothing)\n+    return 0;\n   target = gen_reg_rtx (mode);\n \n   if (! flag_errno_math || ! HONOR_NANS (mode))\n@@ -1874,6 +1878,11 @@ expand_builtin_mathfn_2 (tree exp, rtx target, rtx subtarget)\n \n   /* Make a suitable register to place result in.  */\n   mode = TYPE_MODE (TREE_TYPE (exp));\n+\n+  /* Before working hard, check whether the instruction is available.  */\n+  if (builtin_optab->handlers[(int) mode].insn_code == CODE_FOR_nothing)\n+    return 0;\n+\n   target = gen_reg_rtx (mode);\n \n   if (! flag_errno_math || ! HONOR_NANS (mode))"}]}