{"sha": "56f02b88c17ac5e93b999eb556d75a7c2f95d232", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTZmMDJiODhjMTdhYzVlOTNiOTk5ZWI1NTZkNzVhN2MyZjk1ZDIzMg==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-04-17T17:25:57Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-04-17T17:25:57Z"}, "message": "aclocal.m4 (AM_GNU_GETTEXT): Don't AC_REQUIRE([AC_FUNC_MMAP]).\n\n\t* aclocal.m4 (AM_GNU_GETTEXT): Don't AC_REQUIRE([AC_FUNC_MMAP]).\n\t(AC_FUNC_MMAP_FILE): New macro, tests read-only private map of\n\ta plain file.\n\t* configure.in: Call AC_FUNC_MMAP_FILE.\n\t* configure: Regenerate.\n\t* config.in: Regenerate.\n\n\t* intl/loadmsgcat.c: Test HAVE_MMAP_FILE not HAVE_MMAP.\n\t* fixinc/fixincl.c: Likewise.\n\nFrom-SVN: r33212", "tree": {"sha": "f937ac865b7e421b193a33b4b32088ee5560ba72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f937ac865b7e421b193a33b4b32088ee5560ba72"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/56f02b88c17ac5e93b999eb556d75a7c2f95d232", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56f02b88c17ac5e93b999eb556d75a7c2f95d232", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56f02b88c17ac5e93b999eb556d75a7c2f95d232", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56f02b88c17ac5e93b999eb556d75a7c2f95d232/comments", "author": null, "committer": null, "parents": [{"sha": "994a57cd287e37aaaf909fc1ae671e54b1b360c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/994a57cd287e37aaaf909fc1ae671e54b1b360c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/994a57cd287e37aaaf909fc1ae671e54b1b360c4"}], "stats": {"total": 647, "additions": 260, "deletions": 387}, "files": [{"sha": "b87c03088f75f6d0cc03904baa3b8a5b925f7398", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -1,3 +1,15 @@\n+2000-04-17  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* aclocal.m4 (AM_GNU_GETTEXT): Don't AC_REQUIRE([AC_FUNC_MMAP]).\n+\t(AC_FUNC_MMAP_FILE): New macro, tests read-only private map of\n+\ta plain file.\n+\t* configure.in: Call AC_FUNC_MMAP_FILE.\n+\t* configure: Regenerate.\n+\t* config.in: Regenerate.\n+\n+\t* intl/loadmsgcat.c: Test HAVE_MMAP_FILE not HAVE_MMAP.\n+\t* fixinc/fixincl.c: Likewise.\n+\n 2000-04-17  Richard Henderson  <rth@cygnus.com>\n \n \t* builtins.c (expand_builtin_expect): New."}, {"sha": "a0c1c3be7dc4fb4f2d93859d26b0362cbf75f714", "filename": "gcc/aclocal.m4", "status": "modified", "additions": 52, "deletions": 1, "changes": 53, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Faclocal.m4?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -503,7 +503,6 @@ AC_DEFUN(AM_GNU_GETTEXT,\n    AC_REQUIRE([AC_TYPE_OFF_T])dnl\n    AC_REQUIRE([AC_TYPE_SIZE_T])dnl\n    AC_REQUIRE([AC_FUNC_ALLOCA])dnl\n-   AC_REQUIRE([AC_FUNC_MMAP])dnl\n \n    AC_CHECK_HEADERS([argz.h limits.h locale.h nl_types.h malloc.h string.h \\\n unistd.h sys/param.h])\n@@ -762,3 +761,55 @@ if test $ac_cv_func_mmap_anywhere = yes; then\n \t    [Define if mmap can get us zeroed pages from /dev/zero.])\n fi\n ])\n+\n+# Check whether mmap can map a plain file, without MAP_FIXED.\n+AC_DEFUN([AC_FUNC_MMAP_FILE], \n+[AC_REQUIRE([AC_FUNC_MMAP_ANYWHERE])dnl\n+AC_CACHE_CHECK(for working mmap of a file, ac_cv_func_mmap_file,\n+[# Create a file one thousand bytes long.\n+for i in 1 2 3 4 5 6 7 8 9 0\n+do for j in 1 2 3 4 5 6 7 8 9 0\n+do echo $i $j xxxxx\n+done\n+done > conftestdata$$\n+\n+AC_TRY_RUN([\n+/* Test by Zack Weinberg.  Modified from MMAP_ANYWHERE test by\n+   Richard Henderson and Alexandre Oliva.\n+   Check whether read-only mmap of a plain file works. */\n+#include <sys/types.h>\n+#include <sys/stat.h>\n+#include <fcntl.h>\n+#include <sys/mman.h>\n+\n+int main()\n+{\n+  char *x;\n+  int fd;\n+  struct stat st;\n+\n+  fd = open(\"conftestdata$$\", O_RDONLY);\n+  if (fd < 0)\n+    exit(1);\n+\n+  if (fstat (fd, &st))\n+    exit(2);\n+\n+  x = (char*)mmap(0, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0);\n+  if (x == (char *) -1)\n+    exit(3);\n+\n+  if (x[0] != '1' || x[1] != ' ' || x[2] != '1' || x[3] != ' ')\n+    exit(4);\n+\n+  if (munmap(x, st.st_size) < 0)\n+    exit(5);\n+\n+  exit(0);\n+}], ac_cv_func_mmap_file=yes, ac_cv_func_mmap_file=no,\n+ac_cv_func_mmap_file=no)])\n+if test $ac_cv_func_mmap_file = yes; then\n+  AC_DEFINE(HAVE_MMAP_FILE, 1,\n+\t    [Define if read-only mmap of a plain file works.])\n+fi\n+])"}, {"sha": "275fbc5a2f125076e27b993d7cc10a23dac67785", "filename": "gcc/config.in", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.in?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -203,9 +203,6 @@\n /* Define if the `long double' type works.  */\n #undef HAVE_LONG_DOUBLE\n \n-/* Define if you have a working `mmap' system call.  */\n-#undef HAVE_MMAP\n-\n /* Define if you have the ANSI # stringizing operator in cpp. */\n #undef HAVE_STRINGIZE\n \n@@ -425,3 +422,6 @@\n /* Define if mmap can get us zeroed pages from /dev/zero. */\n #undef HAVE_MMAP_ANYWHERE\n \n+/* Define if read-only mmap of a plain file works. */\n+#undef HAVE_MMAP_FILE\n+"}, {"sha": "1d70fa359cb938840fe5fd40e00d8051891873cf", "filename": "gcc/configure", "status": "modified", "additions": 183, "deletions": 374, "changes": 557, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -1357,7 +1357,7 @@ else\n fi\n \n # Find some useful tools\n-for ac_prog in gawk mawk nawk awk\n+for ac_prog in mawk gawk nawk awk\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n@@ -2882,18 +2882,93 @@ EOF\n \n fi\n \n+echo $ac_n \"checking for working mmap of a file\"\"... $ac_c\" 1>&6\n+echo \"configure:2887: checking for working mmap of a file\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_file'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  # Create a file one thousand bytes long.\n+for i in 1 2 3 4 5 6 7 8 9 0\n+do for j in 1 2 3 4 5 6 7 8 9 0\n+do echo $i $j xxxxx\n+done\n+done > conftestdata$$\n+\n+if test \"$cross_compiling\" = yes; then\n+  ac_cv_func_mmap_file=no\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 2902 \"configure\"\n+#include \"confdefs.h\"\n+\n+/* Test by Zack Weinberg.  Modified from MMAP_ANYWHERE test by\n+   Richard Henderson and Alexandre Oliva.\n+   Check whether read-only mmap of a plain file works. */\n+#include <sys/types.h>\n+#include <sys/stat.h>\n+#include <fcntl.h>\n+#include <sys/mman.h>\n+\n+int main()\n+{\n+  char *x;\n+  int fd;\n+  struct stat st;\n+\n+  fd = open(\"conftestdata$$\", O_RDONLY);\n+  if (fd < 0)\n+    exit(1);\n+\n+  if (fstat (fd, &st))\n+    exit(2);\n+\n+  x = (char*)mmap(0, st.st_size, PROT_READ, MAP_PRIVATE, fd, 0);\n+  if (x == (char *) -1)\n+    exit(3);\n+\n+  if (x[0] != '1' || x[1] != ' ' || x[2] != '1' || x[3] != ' ')\n+    exit(4);\n+\n+  if (munmap(x, st.st_size) < 0)\n+    exit(5);\n+\n+  exit(0);\n+}\n+EOF\n+if { (eval echo configure:2939: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+then\n+  ac_cv_func_mmap_file=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -fr conftest*\n+  ac_cv_func_mmap_file=no\n+fi\n+rm -fr conftest*\n+fi\n+\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_func_mmap_file\" 1>&6\n+if test $ac_cv_func_mmap_file = yes; then\n+  cat >> confdefs.h <<\\EOF\n+#define HAVE_MMAP_FILE 1\n+EOF\n+\n+fi\n+\n \n for ac_func in bcopy bzero bcmp \\\n \tindex rindex getenv atol sbrk abort atof getcwd getwd \\\n \tstrsignal putc_unlocked fputs_unlocked strstr environ\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2892: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2967: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2897 \"configure\"\n+#line 2972 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2930,7 +3005,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2934: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3009: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2959,12 +3034,12 @@ done\n for ac_func in malloc realloc calloc free\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2963: checking whether $ac_func must be declared\" >&5\n+echo \"configure:3038: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2968 \"configure\"\n+#line 3043 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -3004,7 +3079,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:3008: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3083: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -3033,12 +3108,12 @@ done\n for ac_func in getrlimit setrlimit getrusage\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:3037: checking whether $ac_func must be declared\" >&5\n+echo \"configure:3112: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3042 \"configure\"\n+#line 3117 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -3079,7 +3154,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:3083: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3158: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -3107,12 +3182,12 @@ done\n \n # mkdir takes a single argument on some systems. \n echo $ac_n \"checking if mkdir takes one argument\"\"... $ac_c\" 1>&6\n-echo \"configure:3111: checking if mkdir takes one argument\" >&5\n+echo \"configure:3186: checking if mkdir takes one argument\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_mkdir_takes_one_arg'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 3116 \"configure\"\n+#line 3191 \"configure\"\n #include \"confdefs.h\"\n \n #include <sys/types.h>\n@@ -3129,7 +3204,7 @@ int main() {\n mkdir (\"foo\", 0);\n ; return 0; }\n EOF\n-if { (eval echo configure:3133: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:3208: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_mkdir_takes_one_arg=no\n else\n@@ -6570,15 +6645,15 @@ fi\n \n \n         echo $ac_n \"checking for strerror in -lcposix\"\"... $ac_c\" 1>&6\n-echo \"configure:6574: checking for strerror in -lcposix\" >&5\n+echo \"configure:6649: checking for strerror in -lcposix\" >&5\n ac_lib_var=`echo cposix'_'strerror | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lcposix  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 6582 \"configure\"\n+#line 6657 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -6589,7 +6664,7 @@ int main() {\n strerror()\n ; return 0; }\n EOF\n-if { (eval echo configure:6593: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6668: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -6612,18 +6687,18 @@ fi\n   \n \n echo $ac_n \"checking for working const\"\"... $ac_c\" 1>&6\n-echo \"configure:6616: checking for working const\" >&5\n+echo \"configure:6691: checking for working const\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_const'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6621 \"configure\"\n+#line 6696 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n \n /* Ultrix mips cc rejects this.  */\n-typedef int charset[2]; const charset x;\n+typedef int charset[2]; const charset x = {0,0};\n /* SunOS 4.1.1 cc rejects this.  */\n char const *const *ccp;\n char **p;\n@@ -6666,7 +6741,7 @@ ccp = (char const *const *) p;\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6670: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6745: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_const=yes\n else\n@@ -6687,21 +6762,21 @@ EOF\n fi\n \n echo $ac_n \"checking for inline\"\"... $ac_c\" 1>&6\n-echo \"configure:6691: checking for inline\" >&5\n+echo \"configure:6766: checking for inline\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_inline'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_cv_c_inline=no\n for ac_kw in inline __inline__ __inline; do\n   cat > conftest.$ac_ext <<EOF\n-#line 6698 \"configure\"\n+#line 6773 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n-} $ac_kw foo() {\n+} int $ac_kw foo() {\n ; return 0; }\n EOF\n-if { (eval echo configure:6705: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:6780: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_c_inline=$ac_kw; break\n else\n@@ -6727,12 +6802,12 @@ EOF\n esac\n \n echo $ac_n \"checking for off_t\"\"... $ac_c\" 1>&6\n-echo \"configure:6731: checking for off_t\" >&5\n+echo \"configure:6806: checking for off_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_off_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6736 \"configure\"\n+#line 6811 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -6760,12 +6835,12 @@ EOF\n fi\n \n echo $ac_n \"checking for size_t\"\"... $ac_c\" 1>&6\n-echo \"configure:6764: checking for size_t\" >&5\n+echo \"configure:6839: checking for size_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_size_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6769 \"configure\"\n+#line 6844 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -6795,19 +6870,19 @@ fi\n # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:6799: checking for working alloca.h\" >&5\n+echo \"configure:6874: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6804 \"configure\"\n+#line 6879 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n-char *p = alloca(2 * sizeof(int));\n+void *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:6811: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6886: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -6828,12 +6903,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:6832: checking for alloca\" >&5\n+echo \"configure:6907: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6837 \"configure\"\n+#line 6912 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -6861,7 +6936,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:6865: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:6940: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -6893,12 +6968,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:6897: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:6972: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6902 \"configure\"\n+#line 6977 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -6923,12 +6998,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:6927: checking for $ac_func\" >&5\n+echo \"configure:7002: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6932 \"configure\"\n+#line 7007 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -6951,7 +7026,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:6955: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7030: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -6978,15 +7053,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:6982: checking stack direction for C alloca\" >&5\n+echo \"configure:7057: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 6990 \"configure\"\n+#line 7065 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -7005,7 +7080,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:7009: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:7084: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -7026,289 +7101,23 @@ EOF\n \n fi\n \n-for ac_hdr in unistd.h\n-do\n-ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n-echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:7034: checking for $ac_hdr\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  cat > conftest.$ac_ext <<EOF\n-#line 7039 \"configure\"\n-#include \"confdefs.h\"\n-#include <$ac_hdr>\n-EOF\n-ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:7044: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n-if test -z \"$ac_err\"; then\n-  rm -rf conftest*\n-  eval \"ac_cv_header_$ac_safe=yes\"\n-else\n-  echo \"$ac_err\" >&5\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.$ac_ext >&5\n-  rm -rf conftest*\n-  eval \"ac_cv_header_$ac_safe=no\"\n-fi\n-rm -f conftest*\n-fi\n-if eval \"test \\\"`echo '$ac_cv_header_'$ac_safe`\\\" = yes\"; then\n-  echo \"$ac_t\"\"yes\" 1>&6\n-    ac_tr_hdr=HAVE_`echo $ac_hdr | sed 'y%abcdefghijklmnopqrstuvwxyz./-%ABCDEFGHIJKLMNOPQRSTUVWXYZ___%'`\n-  cat >> confdefs.h <<EOF\n-#define $ac_tr_hdr 1\n-EOF\n- \n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-done\n-\n-for ac_func in getpagesize\n-do\n-echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:7073: checking for $ac_func\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  cat > conftest.$ac_ext <<EOF\n-#line 7078 \"configure\"\n-#include \"confdefs.h\"\n-/* System header to define __stub macros and hopefully few prototypes,\n-    which can conflict with char $ac_func(); below.  */\n-#include <assert.h>\n-/* Override any gcc2 internal prototype to avoid an error.  */\n-/* We use char because int might match the return type of a gcc2\n-    builtin and then its argument prototype would still apply.  */\n-char $ac_func();\n-\n-int main() {\n-\n-/* The GNU C library defines this for functions which it implements\n-    to always fail with ENOSYS.  Some functions are actually named\n-    something starting with __ and the normal name is an alias.  */\n-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)\n-choke me\n-#else\n-$ac_func();\n-#endif\n-\n-; return 0; }\n-EOF\n-if { (eval echo configure:7101: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n-  rm -rf conftest*\n-  eval \"ac_cv_func_$ac_func=yes\"\n-else\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.$ac_ext >&5\n-  rm -rf conftest*\n-  eval \"ac_cv_func_$ac_func=no\"\n-fi\n-rm -f conftest*\n-fi\n-\n-if eval \"test \\\"`echo '$ac_cv_func_'$ac_func`\\\" = yes\"; then\n-  echo \"$ac_t\"\"yes\" 1>&6\n-    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`\n-  cat >> confdefs.h <<EOF\n-#define $ac_tr_func 1\n-EOF\n- \n-else\n-  echo \"$ac_t\"\"no\" 1>&6\n-fi\n-done\n-\n-echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:7126: checking for working mmap\" >&5\n-if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n-  echo $ac_n \"(cached) $ac_c\" 1>&6\n-else\n-  if test \"$cross_compiling\" = yes; then\n-  ac_cv_func_mmap_fixed_mapped=no\n-else\n-  cat > conftest.$ac_ext <<EOF\n-#line 7134 \"configure\"\n-#include \"confdefs.h\"\n-\n-/* Thanks to Mike Haertel and Jim Avera for this test.\n-   Here is a matrix of mmap possibilities:\n-\tmmap private not fixed\n-\tmmap private fixed at somewhere currently unmapped\n-\tmmap private fixed at somewhere already mapped\n-\tmmap shared not fixed\n-\tmmap shared fixed at somewhere currently unmapped\n-\tmmap shared fixed at somewhere already mapped\n-   For private mappings, we should verify that changes cannot be read()\n-   back from the file, nor mmap's back from the file at a different\n-   address.  (There have been systems where private was not correctly\n-   implemented like the infamous i386 svr4.0, and systems where the\n-   VM page cache was not coherent with the filesystem buffer cache\n-   like early versions of FreeBSD and possibly contemporary NetBSD.)\n-   For shared mappings, we should conversely verify that changes get\n-   propogated back to all the places they're supposed to be.\n-\n-   Grep wants private fixed already mapped.\n-   The main things grep needs to know about mmap are:\n-   * does it exist and is it safe to write into the mmap'd area\n-   * how to use it (BSD variants)  */\n-#include <sys/types.h>\n-#include <fcntl.h>\n-#include <sys/mman.h>\n-\n-/* This mess was copied from the GNU getpagesize.h.  */\n-#ifndef HAVE_GETPAGESIZE\n-# ifdef HAVE_UNISTD_H\n-#  include <unistd.h>\n-# endif\n-\n-/* Assume that all systems that can run configure have sys/param.h.  */\n-# ifndef HAVE_SYS_PARAM_H\n-#  define HAVE_SYS_PARAM_H 1\n-# endif\n-\n-# ifdef _SC_PAGESIZE\n-#  define getpagesize() sysconf(_SC_PAGESIZE)\n-# else /* no _SC_PAGESIZE */\n-#  ifdef HAVE_SYS_PARAM_H\n-#   include <sys/param.h>\n-#   ifdef EXEC_PAGESIZE\n-#    define getpagesize() EXEC_PAGESIZE\n-#   else /* no EXEC_PAGESIZE */\n-#    ifdef NBPG\n-#     define getpagesize() NBPG * CLSIZE\n-#     ifndef CLSIZE\n-#      define CLSIZE 1\n-#     endif /* no CLSIZE */\n-#    else /* no NBPG */\n-#     ifdef NBPC\n-#      define getpagesize() NBPC\n-#     else /* no NBPC */\n-#      ifdef PAGESIZE\n-#       define getpagesize() PAGESIZE\n-#      endif /* PAGESIZE */\n-#     endif /* no NBPC */\n-#    endif /* no NBPG */\n-#   endif /* no EXEC_PAGESIZE */\n-#  else /* no HAVE_SYS_PARAM_H */\n-#   define getpagesize() 8192\t/* punt totally */\n-#  endif /* no HAVE_SYS_PARAM_H */\n-# endif /* no _SC_PAGESIZE */\n-\n-#endif /* no HAVE_GETPAGESIZE */\n-\n-#ifdef __cplusplus\n-extern \"C\" { void *malloc(unsigned); }\n-#else\n-char *malloc();\n-#endif\n-\n-int\n-main()\n-{\n-\tchar *data, *data2, *data3;\n-\tint i, pagesize;\n-\tint fd;\n-\n-\tpagesize = getpagesize();\n-\n-\t/*\n-\t * First, make a file with some known garbage in it.\n-\t */\n-\tdata = malloc(pagesize);\n-\tif (!data)\n-\t\texit(1);\n-\tfor (i = 0; i < pagesize; ++i)\n-\t\t*(data + i) = rand();\n-\tumask(0);\n-\tfd = creat(\"conftestmmap\", 0600);\n-\tif (fd < 0)\n-\t\texit(1);\n-\tif (write(fd, data, pagesize) != pagesize)\n-\t\texit(1);\n-\tclose(fd);\n-\n-\t/*\n-\t * Next, try to mmap the file at a fixed address which\n-\t * already has something else allocated at it.  If we can,\n-\t * also make sure that we see the same garbage.\n-\t */\n-\tfd = open(\"conftestmmap\", O_RDWR);\n-\tif (fd < 0)\n-\t\texit(1);\n-\tdata2 = malloc(2 * pagesize);\n-\tif (!data2)\n-\t\texit(1);\n-\tdata2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);\n-\tif (data2 != mmap(data2, pagesize, PROT_READ | PROT_WRITE,\n-\t    MAP_PRIVATE | MAP_FIXED, fd, 0L))\n-\t\texit(1);\n-\tfor (i = 0; i < pagesize; ++i)\n-\t\tif (*(data + i) != *(data2 + i))\n-\t\t\texit(1);\n-\n-\t/*\n-\t * Finally, make sure that changes to the mapped area\n-\t * do not percolate back to the file as seen by read().\n-\t * (This is a bug on some variants of i386 svr4.0.)\n-\t */\n-\tfor (i = 0; i < pagesize; ++i)\n-\t\t*(data2 + i) = *(data2 + i) + 1;\n-\tdata3 = malloc(pagesize);\n-\tif (!data3)\n-\t\texit(1);\n-\tif (read(fd, data3, pagesize) != pagesize)\n-\t\texit(1);\n-\tfor (i = 0; i < pagesize; ++i)\n-\t\tif (*(data + i) != *(data3 + i))\n-\t\t\texit(1);\n-\tclose(fd);\n-\tunlink(\"conftestmmap\");\n-\texit(0);\n-}\n-\n-EOF\n-if { (eval echo configure:7274: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n-then\n-  ac_cv_func_mmap_fixed_mapped=yes\n-else\n-  echo \"configure: failed program was:\" >&5\n-  cat conftest.$ac_ext >&5\n-  rm -fr conftest*\n-  ac_cv_func_mmap_fixed_mapped=no\n-fi\n-rm -fr conftest*\n-fi\n-\n-fi\n-\n-echo \"$ac_t\"\"$ac_cv_func_mmap_fixed_mapped\" 1>&6\n-if test $ac_cv_func_mmap_fixed_mapped = yes; then\n-  cat >> confdefs.h <<\\EOF\n-#define HAVE_MMAP 1\n-EOF\n-\n-fi\n-\n-                              \n+                           \n    for ac_hdr in argz.h limits.h locale.h nl_types.h malloc.h string.h \\\n unistd.h sys/param.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:7302: checking for $ac_hdr\" >&5\n+echo \"configure:7111: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7307 \"configure\"\n+#line 7116 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:7312: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:7121: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -7338,12 +7147,12 @@ done\n strdup __argz_count __argz_stringify __argz_next\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:7342: checking for $ac_func\" >&5\n+echo \"configure:7151: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7347 \"configure\"\n+#line 7156 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -7366,7 +7175,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7370: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7179: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -7395,12 +7204,12 @@ done\n      for ac_func in stpcpy\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:7399: checking for $ac_func\" >&5\n+echo \"configure:7208: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7404 \"configure\"\n+#line 7213 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -7423,7 +7232,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7427: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7236: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -7457,19 +7266,19 @@ EOF\n \n    if test $ac_cv_header_locale_h = yes; then\n     echo $ac_n \"checking for LC_MESSAGES\"\"... $ac_c\" 1>&6\n-echo \"configure:7461: checking for LC_MESSAGES\" >&5\n+echo \"configure:7270: checking for LC_MESSAGES\" >&5\n if eval \"test \\\"`echo '$''{'am_cv_val_LC_MESSAGES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7466 \"configure\"\n+#line 7275 \"configure\"\n #include \"confdefs.h\"\n #include <locale.h>\n int main() {\n return LC_MESSAGES\n ; return 0; }\n EOF\n-if { (eval echo configure:7473: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7282: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   am_cv_val_LC_MESSAGES=yes\n else\n@@ -7490,7 +7299,7 @@ EOF\n     fi\n   fi\n    echo $ac_n \"checking whether NLS is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:7494: checking whether NLS is requested\" >&5\n+echo \"configure:7303: checking whether NLS is requested\" >&5\n         # Check whether --enable-nls or --disable-nls was given.\n if test \"${enable_nls+set}\" = set; then\n   enableval=\"$enable_nls\"\n@@ -7510,7 +7319,7 @@ fi\n EOF\n \n       echo $ac_n \"checking whether included gettext is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:7514: checking whether included gettext is requested\" >&5\n+echo \"configure:7323: checking whether included gettext is requested\" >&5\n       # Check whether --with-included-gettext or --without-included-gettext was given.\n if test \"${with_included_gettext+set}\" = set; then\n   withval=\"$with_included_gettext\"\n@@ -7529,17 +7338,17 @@ fi\n \n \tac_safe=`echo \"libintl.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for libintl.h\"\"... $ac_c\" 1>&6\n-echo \"configure:7533: checking for libintl.h\" >&5\n+echo \"configure:7342: checking for libintl.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7538 \"configure\"\n+#line 7347 \"configure\"\n #include \"confdefs.h\"\n #include <libintl.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:7543: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:7352: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -7556,19 +7365,19 @@ fi\n if eval \"test \\\"`echo '$ac_cv_header_'$ac_safe`\\\" = yes\"; then\n   echo \"$ac_t\"\"yes\" 1>&6\n   echo $ac_n \"checking for gettext in libc\"\"... $ac_c\" 1>&6\n-echo \"configure:7560: checking for gettext in libc\" >&5\n+echo \"configure:7369: checking for gettext in libc\" >&5\n if eval \"test \\\"`echo '$''{'gt_cv_func_gettext_libc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7565 \"configure\"\n+#line 7374 \"configure\"\n #include \"confdefs.h\"\n #include <libintl.h>\n int main() {\n return (int) gettext (\"\")\n ; return 0; }\n EOF\n-if { (eval echo configure:7572: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7381: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   gt_cv_func_gettext_libc=yes\n else\n@@ -7584,15 +7393,15 @@ echo \"$ac_t\"\"$gt_cv_func_gettext_libc\" 1>&6\n \n \t   if test \"$gt_cv_func_gettext_libc\" != \"yes\"; then\n \t     echo $ac_n \"checking for bindtextdomain in -lintl\"\"... $ac_c\" 1>&6\n-echo \"configure:7588: checking for bindtextdomain in -lintl\" >&5\n+echo \"configure:7397: checking for bindtextdomain in -lintl\" >&5\n ac_lib_var=`echo intl'_'bindtextdomain | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lintl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7596 \"configure\"\n+#line 7405 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7603,7 +7412,7 @@ int main() {\n bindtextdomain()\n ; return 0; }\n EOF\n-if { (eval echo configure:7607: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7416: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7619,20 +7428,20 @@ fi\n if eval \"test \\\"`echo '$ac_cv_lib_'$ac_lib_var`\\\" = yes\"; then\n   echo \"$ac_t\"\"yes\" 1>&6\n   echo $ac_n \"checking for gettext in libintl\"\"... $ac_c\" 1>&6\n-echo \"configure:7623: checking for gettext in libintl\" >&5\n+echo \"configure:7432: checking for gettext in libintl\" >&5\n if eval \"test \\\"`echo '$''{'gt_cv_func_gettext_libintl'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   echo $ac_n \"checking for gettext in -lintl\"\"... $ac_c\" 1>&6\n-echo \"configure:7628: checking for gettext in -lintl\" >&5\n+echo \"configure:7437: checking for gettext in -lintl\" >&5\n ac_lib_var=`echo intl'_'gettext | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-lintl  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7636 \"configure\"\n+#line 7445 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -7643,7 +7452,7 @@ int main() {\n gettext()\n ; return 0; }\n EOF\n-if { (eval echo configure:7647: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7456: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7682,7 +7491,7 @@ EOF\n \t      # Extract the first word of \"msgfmt\", so it can be a program name with args.\n set dummy msgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:7686: checking for $ac_word\" >&5\n+echo \"configure:7495: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7716,12 +7525,12 @@ fi\n \t\tfor ac_func in dcgettext\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:7720: checking for $ac_func\" >&5\n+echo \"configure:7529: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7725 \"configure\"\n+#line 7534 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -7744,7 +7553,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7748: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7557: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -7771,7 +7580,7 @@ done\n \t\t# Extract the first word of \"gmsgfmt\", so it can be a program name with args.\n set dummy gmsgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:7775: checking for $ac_word\" >&5\n+echo \"configure:7584: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7807,7 +7616,7 @@ fi\n \t\t# Extract the first word of \"xgettext\", so it can be a program name with args.\n set dummy xgettext; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:7811: checking for $ac_word\" >&5\n+echo \"configure:7620: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7839,15 +7648,15 @@ else\n fi\n \n \t\tcat > conftest.$ac_ext <<EOF\n-#line 7843 \"configure\"\n+#line 7652 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n extern int _nl_msg_cat_cntr;\n \t\t\t       return _nl_msg_cat_cntr\n ; return 0; }\n EOF\n-if { (eval echo configure:7851: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7660: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   CATOBJEXT=.gmo\n \t\t   DATADIRNAME=share\n@@ -7870,7 +7679,7 @@ fi\n \n         if test \"$CATOBJEXT\" = \"NONE\"; then\n \t  echo $ac_n \"checking whether catgets can be used\"\"... $ac_c\" 1>&6\n-echo \"configure:7874: checking whether catgets can be used\" >&5\n+echo \"configure:7683: checking whether catgets can be used\" >&5\n \t  # Check whether --with-catgets or --without-catgets was given.\n if test \"${with_catgets+set}\" = set; then\n   withval=\"$with_catgets\"\n@@ -7883,22 +7692,22 @@ fi\n \n \t  if test \"$nls_cv_use_catgets\" = \"yes\"; then\n \t    \t    echo $ac_n \"checking for main in -li\"\"... $ac_c\" 1>&6\n-echo \"configure:7887: checking for main in -li\" >&5\n+echo \"configure:7696: checking for main in -li\" >&5\n ac_lib_var=`echo i'_'main | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-li  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 7895 \"configure\"\n+#line 7704 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n main()\n ; return 0; }\n EOF\n-if { (eval echo configure:7902: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7711: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -7926,12 +7735,12 @@ else\n fi\n \n \t    echo $ac_n \"checking for catgets\"\"... $ac_c\" 1>&6\n-echo \"configure:7930: checking for catgets\" >&5\n+echo \"configure:7739: checking for catgets\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_catgets'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 7935 \"configure\"\n+#line 7744 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char catgets(); below.  */\n@@ -7954,7 +7763,7 @@ catgets();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:7958: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:7767: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_catgets=yes\"\n else\n@@ -7976,7 +7785,7 @@ EOF\n \t       # Extract the first word of \"gencat\", so it can be a program name with args.\n set dummy gencat; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:7980: checking for $ac_word\" >&5\n+echo \"configure:7789: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_GENCAT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8012,7 +7821,7 @@ fi\n \t\t # Extract the first word of \"gmsgfmt\", so it can be a program name with args.\n set dummy gmsgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:8016: checking for $ac_word\" >&5\n+echo \"configure:7825: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8049,7 +7858,7 @@ fi\n \t\t   # Extract the first word of \"msgfmt\", so it can be a program name with args.\n set dummy msgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:8053: checking for $ac_word\" >&5\n+echo \"configure:7862: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8084,7 +7893,7 @@ fi\n \t\t # Extract the first word of \"xgettext\", so it can be a program name with args.\n set dummy xgettext; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:8088: checking for $ac_word\" >&5\n+echo \"configure:7897: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8142,7 +7951,7 @@ fi\n         # Extract the first word of \"msgfmt\", so it can be a program name with args.\n set dummy msgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:8146: checking for $ac_word\" >&5\n+echo \"configure:7955: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_MSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8176,7 +7985,7 @@ fi\n         # Extract the first word of \"gmsgfmt\", so it can be a program name with args.\n set dummy gmsgfmt; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:8180: checking for $ac_word\" >&5\n+echo \"configure:7989: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_GMSGFMT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8212,7 +8021,7 @@ fi\n         # Extract the first word of \"xgettext\", so it can be a program name with args.\n set dummy xgettext; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:8216: checking for $ac_word\" >&5\n+echo \"configure:8025: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_path_XGETTEXT'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8305,7 +8114,7 @@ fi\n        LINGUAS=\n      else\n        echo $ac_n \"checking for catalogs to be installed\"\"... $ac_c\" 1>&6\n-echo \"configure:8309: checking for catalogs to be installed\" >&5\n+echo \"configure:8118: checking for catalogs to be installed\" >&5\n        NEW_LINGUAS=\n        for lang in ${LINGUAS=$ALL_LINGUAS}; do\n          case \"$ALL_LINGUAS\" in\n@@ -8333,17 +8142,17 @@ echo \"configure:8309: checking for catalogs to be installed\" >&5\n    if test \"$CATOBJEXT\" = \".cat\"; then\n      ac_safe=`echo \"linux/version.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for linux/version.h\"\"... $ac_c\" 1>&6\n-echo \"configure:8337: checking for linux/version.h\" >&5\n+echo \"configure:8146: checking for linux/version.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 8342 \"configure\"\n+#line 8151 \"configure\"\n #include \"confdefs.h\"\n #include <linux/version.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:8347: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:8156: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -8418,7 +8227,7 @@ fi\n \n \n echo $ac_n \"checking whether windows registry support is requested\"\"... $ac_c\" 1>&6\n-echo \"configure:8422: checking whether windows registry support is requested\" >&5\n+echo \"configure:8231: checking whether windows registry support is requested\" >&5\n if test x$enable_win32_registry != xno; then\n   cat >> confdefs.h <<\\EOF\n #define ENABLE_WIN32_REGISTRY 1\n@@ -8447,7 +8256,7 @@ esac\n \n if test x$enable_win32_registry != xno; then\n   echo $ac_n \"checking registry key on windows hosts\"\"... $ac_c\" 1>&6\n-echo \"configure:8451: checking registry key on windows hosts\" >&5\n+echo \"configure:8260: checking registry key on windows hosts\" >&5\n   cat >> confdefs.h <<EOF\n #define WIN32_REGISTRY_KEY \"$gcc_cv_win32_registry_key\"\n EOF\n@@ -8623,7 +8432,7 @@ fi\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:8627: checking assembler alignment features\" >&5\n+echo \"configure:8436: checking assembler alignment features\" >&5\n gcc_cv_as=\n gcc_cv_as_alignment_features=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n@@ -8744,7 +8553,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:8748: checking assembler subsection support\" >&5\n+echo \"configure:8557: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=\n if test x$gcc_cv_as != x; then\n \t# Check if we have .subsection\n@@ -8784,7 +8593,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:8788: checking assembler weak support\" >&5\n+echo \"configure:8597: checking assembler weak support\" >&5\n gcc_cv_as_weak=\n if test x$gcc_cv_as != x; then\n \t# Check if we have .weak\n@@ -8801,7 +8610,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:8805: checking assembler hidden support\" >&5\n+echo \"configure:8614: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=\n if test x$gcc_cv_as != x; then\n \t# Check if we have .hidden\n@@ -8821,7 +8630,7 @@ echo \"$ac_t\"\"$gcc_cv_as_hidden\" 1>&6\n case \"$target\" in \n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:8825: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:8634: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8851,7 +8660,7 @@ EOF\n     case \"$tm_file\" in\n     *64*)\n \techo $ac_n \"checking for 64 bit support in assembler ($gcc_cv_as)\"\"... $ac_c\" 1>&6\n-echo \"configure:8855: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n+echo \"configure:8664: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_flags64'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8896,7 +8705,7 @@ EOF\n \n     if test \"x$gcc_cv_as_flags64\" != xno; then\n \techo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:8900: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:8709: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -8935,7 +8744,7 @@ EOF\n \n   i[34567]86-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:8939: checking assembler instructions\" >&5\n+echo \"configure:8748: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test x$gcc_cv_as != x; then\n \tset \"filds fists\" \"filds mem; fists mem\"\n@@ -9061,7 +8870,7 @@ fi\n \n # Build a new-libstdc++ system (ie libstdc++-v3)\n echo $ac_n \"checking for libstdc++ to install\"\"... $ac_c\" 1>&6\n-echo \"configure:9065: checking for libstdc++ to install\" >&5\n+echo \"configure:8874: checking for libstdc++ to install\" >&5\n # Check whether --enable-libstdcxx-v3 or --disable-libstdcxx-v3 was given.\n if test \"${enable_libstdcxx_v3+set}\" = set; then\n   enableval=\"$enable_libstdcxx_v3\""}, {"sha": "986b403780a21cae46b49b507e0a31b9eac3cb76", "filename": "gcc/configure.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -398,6 +398,7 @@ case \"${host}\" in\n esac\n AC_FUNC_VFORK\n AC_FUNC_MMAP_ANYWHERE\n+AC_FUNC_MMAP_FILE\n \n GCC_NEED_DECLARATIONS(bcopy bzero bcmp \\\n \tindex rindex getenv atol sbrk abort atof getcwd getwd \\"}, {"sha": "a43ae3bd90fddc96074eefd223f7095158d2a805", "filename": "gcc/fixinc/fixincl.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Ffixinc%2Ffixincl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Ffixinc%2Ffixincl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.c?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -24,7 +24,7 @@ Boston, MA 02111-1307, USA.  */\n \n #include \"fixlib.h\"\n \n-#if HAVE_MMAP\n+#if HAVE_MMAP_FILE\n #include <sys/mman.h>\n #define  BAD_ADDR ((void*)-1)\n #endif\n@@ -136,7 +136,7 @@ int fixed_ct = 0;\n int altered_ct = 0;\n #endif /* DO_STATS */\n \n-#ifdef HAVE_MMAP\n+#ifdef HAVE_MMAP_FILE\n #define UNLOAD_DATA() do { if (curr_data_mapped) { \\\n   munmap ((void*)pz_curr_data, data_map_size); close (data_map_fd); } \\\n   else free ((void*)pz_curr_data); } while(0)\n@@ -510,7 +510,7 @@ load_file ( fname )\n       return (char*)NULL;\n     }\n \n-#ifdef HAVE_MMAP\n+#ifdef HAVE_MMAP_FILE\n   curr_data_mapped = BOOL_TRUE;\n   res = (char*)mmap ((void*)NULL, data_map_size, PROT_READ, MAP_PRIVATE,\n                      data_map_fd, 0);"}, {"sha": "4dfb687b9f071e328467367334b5f12e993ccc6b", "filename": "gcc/intl/loadmsgcat.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fintl%2Floadmsgcat.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/56f02b88c17ac5e93b999eb556d75a7c2f95d232/gcc%2Fintl%2Floadmsgcat.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintl%2Floadmsgcat.c?ref=56f02b88c17ac5e93b999eb556d75a7c2f95d232", "patch": "@@ -31,7 +31,7 @@\n # include <unistd.h>\n #endif\n \n-#if (defined HAVE_MMAP && defined HAVE_MUNMAP) || defined _LIBC\n+#if defined HAVE_MMAP_FILE || defined _LIBC\n # include <sys/mman.h>\n #endif\n \n@@ -68,7 +68,7 @@ _nl_load_domain (domain_file)\n   size_t size;\n   struct stat st;\n   struct mo_file_header *data = (struct mo_file_header *) -1;\n-#if (defined HAVE_MMAP && defined HAVE_MUNMAP && !defined DISALLOW_MMAP) \\\n+#if (defined HAVE_MMAP_FILE && !defined DISALLOW_MMAP) \\\n     || defined _LIBC\n   int use_mmap = 0;\n #endif\n@@ -99,7 +99,7 @@ _nl_load_domain (domain_file)\n       return;\n     }\n \n-#if (defined HAVE_MMAP && defined HAVE_MUNMAP && !defined DISALLOW_MMAP) \\\n+#if (defined HAVE_MMAP_FILE && !defined DISALLOW_MMAP) \\\n     || defined _LIBC\n   /* Now we are ready to load the file.  If mmap() is available we try\n      this first.  If not available or it failed we try to load it.  */\n@@ -149,7 +149,7 @@ _nl_load_domain (domain_file)\n   if (data->magic != _MAGIC && data->magic != _MAGIC_SWAPPED)\n     {\n       /* The magic number is wrong: not a message catalog file.  */\n-#if (defined HAVE_MMAP && defined HAVE_MUNMAP && !defined DISALLOW_MMAP) \\\n+#if (defined HAVE_MMAP_FILE && !defined DISALLOW_MMAP) \\\n     || defined _LIBC\n       if (use_mmap)\n \tmunmap ((caddr_t) data, size);\n@@ -166,7 +166,7 @@ _nl_load_domain (domain_file)\n \n   domain = (struct loaded_domain *) domain_file->data;\n   domain->data = (char *) data;\n-#if (defined HAVE_MMAP && defined HAVE_MUNMAP && !defined DISALLOW_MMAP) \\\n+#if (defined HAVE_MMAP_FILE && !defined DISALLOW_MMAP) \\\n     || defined _LIBC\n   domain->use_mmap = use_mmap;\n #endif\n@@ -188,7 +188,7 @@ _nl_load_domain (domain_file)\n       break;\n     default:\n       /* This is an illegal revision.  */\n-#if (defined HAVE_MMAP && defined HAVE_MUNMAP && !defined DISALLOW_MMAP) \\\n+#if (defined HAVE_MMAP_FILE && !defined DISALLOW_MMAP) \\\n     || defined _LIBC\n       if (use_mmap)\n \tmunmap ((caddr_t) data, size);"}]}