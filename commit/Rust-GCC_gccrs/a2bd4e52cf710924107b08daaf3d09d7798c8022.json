{"sha": "a2bd4e52cf710924107b08daaf3d09d7798c8022", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTJiZDRlNTJjZjcxMDkyNDEwN2IwOGRhYWYzZDA5ZDc3OThjODAyMg==", "commit": {"author": {"name": "Maciej W. Rozycki", "email": "macro@linux-mips.org", "date": "2020-12-05T18:26:24Z"}, "committer": {"name": "Maciej W. Rozycki", "email": "macro@linux-mips.org", "date": "2020-12-05T18:26:24Z"}, "message": "loop-iv: Add missing calls to `onlyjump_p'\n\nIgnore jumps that have side effects in loop processing as pasting the\nbody of a loop multiple times within is semantically equivalent to jump\ndeletion (between the iterations unrolled) even if we do not physically\ndelete the jump RTL insn.\n\n\tgcc/\n\t* loop-iv.c (simplify_using_initial_values): Only process jumps\n\tthat match `onlyjump_p'.\n\t(check_simple_exit): Likewise.", "tree": {"sha": "81b3e6a6362ec4d8f335f321493c0e1daad39c08", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/81b3e6a6362ec4d8f335f321493c0e1daad39c08"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2bd4e52cf710924107b08daaf3d09d7798c8022", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2bd4e52cf710924107b08daaf3d09d7798c8022", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2bd4e52cf710924107b08daaf3d09d7798c8022", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2bd4e52cf710924107b08daaf3d09d7798c8022/comments", "author": null, "committer": null, "parents": [{"sha": "94f336768e199bc268c30446a63b49a53b02f648", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94f336768e199bc268c30446a63b49a53b02f648", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94f336768e199bc268c30446a63b49a53b02f648"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "9d401d29b951781c208b5766e27143b6fd77ceb4", "filename": "gcc/loop-iv.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2bd4e52cf710924107b08daaf3d09d7798c8022/gcc%2Floop-iv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2bd4e52cf710924107b08daaf3d09d7798c8022/gcc%2Floop-iv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Floop-iv.c?ref=a2bd4e52cf710924107b08daaf3d09d7798c8022", "patch": "@@ -1936,7 +1936,7 @@ simplify_using_initial_values (class loop *loop, enum rtx_code op, rtx *expr)\n   while (1)\n     {\n       insn = BB_END (e->src);\n-      if (any_condjump_p (insn))\n+      if (any_condjump_p (insn) && onlyjump_p (insn))\n \t{\n \t  rtx cond = get_condition (BB_END (e->src), NULL, false, true);\n \n@@ -2887,7 +2887,7 @@ check_simple_exit (class loop *loop, edge e, class niter_desc *desc)\n     return;\n \n   /* It must end in a simple conditional jump.  */\n-  if (!any_condjump_p (BB_END (exit_bb)))\n+  if (!any_condjump_p (BB_END (exit_bb)) || !onlyjump_p (BB_END (exit_bb)))\n     return;\n \n   ein = EDGE_SUCC (exit_bb, 0);"}]}