{"sha": "08e1fe9e0fa2f57f7a783d5859581b2d28973683", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhlMWZlOWUwZmEyZjU3ZjdhNzgzZDU4NTk1ODFiMmQyODk3MzY4Mw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-09-04T12:08:53Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2005-09-04T12:08:53Z"}, "message": "re PR fortran/23661 ('print fmt' is unclassifiable statement in gfortran)\n\nfortran/\n\tPR fortran/23661\n\t* io.c (match_io): Correctly backup if PRINT followed by\n\tsymbol which is not a namelist.  Force blank between PRINT\n\tand namelist in free form.\ntestsuite/\n\tPR fortran/23661\n\t* gfortran.dg/print_fmt_1.f90, gfortran.dg/print_fmt_2.f90\n\tgfortran.dg/print_fmt_3.f90: New test.\n\nFrom-SVN: r103824", "tree": {"sha": "eef1595ad0678fac27350ee479d689cdf5007036", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eef1595ad0678fac27350ee479d689cdf5007036"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08e1fe9e0fa2f57f7a783d5859581b2d28973683", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08e1fe9e0fa2f57f7a783d5859581b2d28973683", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08e1fe9e0fa2f57f7a783d5859581b2d28973683", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08e1fe9e0fa2f57f7a783d5859581b2d28973683/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b3e7378af3e92af6807e4d410a182ea7547dd1d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3e7378af3e92af6807e4d410a182ea7547dd1d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3e7378af3e92af6807e4d410a182ea7547dd1d5"}], "stats": {"total": 92, "additions": 70, "deletions": 22}, "files": [{"sha": "e88f468c6aff295121da4af674a80ebb7deaec32", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=08e1fe9e0fa2f57f7a783d5859581b2d28973683", "patch": "@@ -1,3 +1,10 @@\n+2005-09-04  Tobias Schl\"uter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/23661\n+\t* io.c (match_io): Correctly backup if PRINT followed by\n+\tsymbol which is not a namelist.  Force blank between PRINT\n+\tand namelist in free form.\n+\n 2005-08-31  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR fortran/20592"}, {"sha": "37a7493f786770eb7ea1acc4ccadfb5299a9a5b8", "filename": "gcc/fortran/io.c", "status": "modified", "additions": 28, "deletions": 22, "changes": 50, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ffortran%2Fio.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ffortran%2Fio.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fio.c?ref=08e1fe9e0fa2f57f7a783d5859581b2d28973683", "patch": "@@ -2133,33 +2133,39 @@ match_io (io_kind k)\n \n   if (gfc_match_char ('(') == MATCH_NO)\n     {\n-      /* Treat the non-standard case of PRINT namelist.  */\n-      if (k == M_PRINT && (gfc_match_name (name) == MATCH_YES)\n-\t    && !gfc_find_symbol (name, NULL, 1, &sym)\n-\t    && (sym->attr.flavor == FL_NAMELIST))\n+      if (k == M_WRITE)\n+\tgoto syntax;\n+      else if (k == M_PRINT \n+\t       && (gfc_current_form == FORM_FIXED\n+\t\t   || gfc_peek_char () == ' '))\n \t{\n-\t  if (gfc_notify_std (GFC_STD_GNU, \"PRINT namelist at \"\n-\t\t\t      \"%C is an extension\") == FAILURE)\n-\t    {\n- \t      m = MATCH_ERROR;\n-\t      goto cleanup;\n-\t    }\n-\t  if (gfc_match_eos () == MATCH_NO)\n+\t  /* Treat the non-standard case of PRINT namelist.  */\n+\t  where = gfc_current_locus;\n+\t  if ((gfc_match_name (name) == MATCH_YES)\n+\t      && !gfc_find_symbol (name, NULL, 1, &sym)\n+\t      && sym->attr.flavor == FL_NAMELIST)\n \t    {\n-\t      gfc_error (\"Namelist followed by I/O list at %C\");\n-\t      m = MATCH_ERROR;\n-\t      goto cleanup;\n-\t    }\n+\t      if (gfc_notify_std (GFC_STD_GNU, \"PRINT namelist at \"\n+\t\t\t\t  \"%C is an extension\") == FAILURE)\n+\t\t{\n+\t\t  m = MATCH_ERROR;\n+\t\t  goto cleanup;\n+\t\t}\n+\t      if (gfc_match_eos () == MATCH_NO)\n+\t\t{\n+\t\t  gfc_error (\"Namelist followed by I/O list at %C\");\n+\t\t  m = MATCH_ERROR;\n+\t\t  goto cleanup;\n+\t\t}\n \n-\t  dt->io_unit = default_unit (k);\n-\t  dt->namelist = sym;\n-\t  goto get_io_list;\n+\t      dt->io_unit = default_unit (k);\n+\t      dt->namelist = sym;\n+\t      goto get_io_list;\n+\t    }\n+\t  else\n+\t    gfc_current_locus = where;\n \t}\n \n-\n-      if (k == M_WRITE)\n-\tgoto syntax;\n-\n       if (gfc_current_form == FORM_FREE)\n        {\n          c = gfc_peek_char();"}, {"sha": "c849daaa6b87ef5f234eaf5f81f297652b0c5169", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=08e1fe9e0fa2f57f7a783d5859581b2d28973683", "patch": "@@ -1,3 +1,9 @@\n+2005-09-04  Tobias Schl\"uter  <tobias.shclueter@physik.uni-muenchen.de>\n+\n+\tPR fortran/23661\n+\t* gfortran.dg/print_fmt_1.f90, gfortran.dg/print_fmt_2.f90\n+\tgfortran.dg/print_fmt_3.f90: New test.\n+\n 2005-09-03  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gfortran.dg/fmt_t_1.f90: New test."}, {"sha": "f7622b57d80ffdf2587980f3d6e8a5121f356309", "filename": "gcc/testsuite/gfortran.dg/print_fmt_1.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_1.f90?ref=08e1fe9e0fa2f57f7a783d5859581b2d28973683", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do run }\n+! PR 23661\n+! PRINT with a character format was broken\n+character(5) :: f = \"(a)\"\n+! { dg-output \"check\" }\n+print f, \"check\"\n+end"}, {"sha": "c7a5cc146140e7f4355919df311fd0844a6383b0", "filename": "gcc/testsuite/gfortran.dg/print_fmt_2.f90", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_2.f90?ref=08e1fe9e0fa2f57f7a783d5859581b2d28973683", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! PR 23661 Make sure space between PRINT and variable name is enforced in\n+! free form.\n+! Also tests the namelist case\n+character(5) :: f = \"(a)\"\n+real  x\n+namelist /mynml/ x\n+printf, \"check\" ! { dg-error \"Unclassifiable\" }\n+x = 1\n+printmynml ! { dg-error \"\" }\n+end"}, {"sha": "c46b756f0f004bcad5df956a7de8c5c8510995f0", "filename": "gcc/testsuite/gfortran.dg/print_fmt_3.f", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_3.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08e1fe9e0fa2f57f7a783d5859581b2d28973683/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_3.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fprint_fmt_3.f?ref=08e1fe9e0fa2f57f7a783d5859581b2d28973683", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! PR 23661 Make sure space between PRINT and variable name is not enforced in\n+! fixed form.\n+! Also tests the namelist case\n+      character(5) :: f = \"(a)\"\n+      real  x\n+      namelist /mynml/ x\n+      printf, \"check\"\n+      x = 1\n+      printmynml ! { dg-warning \"extension\" }\n+      end"}]}