{"sha": "88702c45a68e768f8d5537f2c6c77c9c7b7e6d58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODg3MDJjNDVhNjhlNzY4ZjhkNTUzN2YyYzZjNzdjOWM3YjdlNmQ1OA==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-04-15T02:11:43Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-04-15T02:11:43Z"}, "message": "* strdup.c (strdup): Tweak implementation to use memcpy.\n\nFrom-SVN: r65616", "tree": {"sha": "0d692d5314c2000f34e52fe72ce53d5cb41a9b1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0d692d5314c2000f34e52fe72ce53d5cb41a9b1e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58/comments", "author": null, "committer": null, "parents": [{"sha": "f4e929877c7e155de2f729c3330353762ce1b0ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f4e929877c7e155de2f729c3330353762ce1b0ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f4e929877c7e155de2f729c3330353762ce1b0ed"}], "stats": {"total": 25, "additions": 20, "deletions": 5}, "files": [{"sha": "679b382e051fa5391146e8054457bcd072c6fa47", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=88702c45a68e768f8d5537f2c6c77c9c7b7e6d58", "patch": "@@ -1,3 +1,7 @@\n+2003-04-14  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* strdup.c (strdup): Tweak implementation to use memcpy.\n+\n 2003-04-14  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* configure.in (HAVE_UINTPTR_T): Always define."}, {"sha": "071a4a401af754fb847734f54bc7fc60e3204744", "filename": "libiberty/strdup.c", "status": "modified", "additions": 16, "deletions": 5, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58/libiberty%2Fstrdup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88702c45a68e768f8d5537f2c6c77c9c7b7e6d58/libiberty%2Fstrdup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fstrdup.c?ref=88702c45a68e768f8d5537f2c6c77c9c7b7e6d58", "patch": "@@ -9,13 +9,24 @@ Returns a pointer to a copy of @var{s} in memory obtained from\n \n */\n \n+#include <ansidecl.h>\n+#ifdef ANSI_PROTOTYPES\n+#include <stddef.h>\n+#else\n+#define size_t unsigned long\n+#endif\n+\n+extern size_t\tstrlen PARAMS ((const char*));\n+extern PTR\tmalloc PARAMS ((size_t));\n+extern PTR\tmemcpy PARAMS ((PTR, const PTR, size_t));\n+\n char *\n strdup(s)\n      char *s;\n {\n-    char *result = (char*)malloc(strlen(s) + 1);\n-    if (result == (char*)0)\n-\treturn (char*)0;\n-    strcpy(result, s);\n-    return result;\n+  size_t len = strlen (s) + 1;\n+  char *result = (char*) malloc (len);\n+  if (result == (char*) 0)\n+    return (char*) 0;\n+  return (char*) memcpy (result, s, len);\n }"}]}