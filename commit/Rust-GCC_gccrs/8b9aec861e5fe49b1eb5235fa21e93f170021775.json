{"sha": "8b9aec861e5fe49b1eb5235fa21e93f170021775", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI5YWVjODYxZTVmZTQ5YjFlYjUyMzVmYTIxZTkzZjE3MDAyMTc3NQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "r.sandiford@uk.ibm.com", "date": "2014-05-14T15:42:25Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-05-14T15:42:25Z"}, "message": "decl.c (gnat_to_gnu_entity): Convert integer_one_node to the appropriate type.\n\ngcc/ada/\n\t* gcc-interface/decl.c (gnat_to_gnu_entity): Convert\n\tinteger_one_node to the appropriate type.\n\t* gcc-interface/trans.c (gnat_to_gnu): Likewise.\n\t(pos_to_constructor): Likewise.\n\nFrom-SVN: r210427", "tree": {"sha": "57496b08bab371d587ae0941d0da6eb416e3ef25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57496b08bab371d587ae0941d0da6eb416e3ef25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b9aec861e5fe49b1eb5235fa21e93f170021775", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b9aec861e5fe49b1eb5235fa21e93f170021775", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b9aec861e5fe49b1eb5235fa21e93f170021775", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b9aec861e5fe49b1eb5235fa21e93f170021775/comments", "author": null, "committer": null, "parents": [{"sha": "70d6d5c1d32999ec004a0d9c24cc26eff4df6a95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/70d6d5c1d32999ec004a0d9c24cc26eff4df6a95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/70d6d5c1d32999ec004a0d9c24cc26eff4df6a95"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "e84ca9098093521ee1cdb606dff4ff59980972e7", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b9aec861e5fe49b1eb5235fa21e93f170021775/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b9aec861e5fe49b1eb5235fa21e93f170021775/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=8b9aec861e5fe49b1eb5235fa21e93f170021775", "patch": "@@ -1,3 +1,10 @@\n+2014-05-14  Richard Sandiford  <r.sandiford@uk.ibm.com>\n+\n+\t* gcc-interface/decl.c (gnat_to_gnu_entity): Convert\n+\tinteger_one_node to the appropriate type.\n+\t* gcc-interface/trans.c (gnat_to_gnu): Likewise.\n+\t(pos_to_constructor): Likewise.\n+\n 2014-05-13  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (annotate_value): Fix thinko in latest change."}, {"sha": "e18583cb06a9d215abfc9d23e2d67179e6e106f4", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b9aec861e5fe49b1eb5235fa21e93f170021775/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b9aec861e5fe49b1eb5235fa21e93f170021775/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=8b9aec861e5fe49b1eb5235fa21e93f170021775", "patch": "@@ -2840,7 +2840,8 @@ gnat_to_gnu_entity (Entity_Id gnat_entity, tree gnu_expr, int definition)\n \t  = build_binary_op (PLUS_EXPR, gnu_string_index_type,\n \t\t\t     gnu_lower_bound,\n \t\t\t     int_const_binop (MINUS_EXPR, gnu_length,\n-\t\t\t\t\t      integer_one_node));\n+\t\t\t\t\t      convert (gnu_string_index_type,\n+\t\t\t\t\t\t       integer_one_node)));\n \ttree gnu_index_type\n \t  = create_index_type (convert (sizetype, gnu_lower_bound),\n \t\t\t       convert (sizetype, gnu_upper_bound),"}, {"sha": "26194b64d23248380bdb6390b0d96d871127897f", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b9aec861e5fe49b1eb5235fa21e93f170021775/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b9aec861e5fe49b1eb5235fa21e93f170021775/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=8b9aec861e5fe49b1eb5235fa21e93f170021775", "patch": "@@ -5597,6 +5597,7 @@ gnat_to_gnu (Node_Id gnat_node)\n \t  int length = String_Length (gnat_string);\n \t  int i;\n \t  tree gnu_idx = TYPE_MIN_VALUE (TYPE_DOMAIN (gnu_result_type));\n+\t  tree gnu_one_node = convert (TREE_TYPE (gnu_idx), integer_one_node);\n \t  vec<constructor_elt, va_gc> *gnu_vec;\n \t  vec_alloc (gnu_vec, length);\n \n@@ -5606,7 +5607,7 @@ gnat_to_gnu (Node_Id gnat_node)\n \t\t\t\t      Get_String_Char (gnat_string, i + 1));\n \n \t      CONSTRUCTOR_APPEND_ELT (gnu_vec, gnu_idx, t);\n-\t      gnu_idx = int_const_binop (PLUS_EXPR, gnu_idx, integer_one_node);\n+\t      gnu_idx = int_const_binop (PLUS_EXPR, gnu_idx, gnu_one_node);\n \t    }\n \n \t  gnu_result = gnat_build_constructor (gnu_result_type, gnu_vec);\n@@ -9092,7 +9093,9 @@ pos_to_constructor (Node_Id gnat_expr, tree gnu_array_type,\n       CONSTRUCTOR_APPEND_ELT (gnu_expr_vec, gnu_index,\n \t\t\t      convert (TREE_TYPE (gnu_array_type), gnu_expr));\n \n-      gnu_index = int_const_binop (PLUS_EXPR, gnu_index, integer_one_node);\n+      gnu_index = int_const_binop (PLUS_EXPR, gnu_index,\n+\t\t\t\t   convert (TREE_TYPE (gnu_index),\n+\t\t\t\t\t    integer_one_node));\n     }\n \n   return gnat_build_constructor (gnu_array_type, gnu_expr_vec);"}]}