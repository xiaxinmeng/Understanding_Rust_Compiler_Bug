{"sha": "55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTUxNjViZjZiNDhlZDI2Y2QxN2U2NmFjNDQ3ZGNmZWFhZjExMGZjYQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-10-19T19:10:20Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-10-19T19:10:20Z"}, "message": "Port from redhat/gcc-4_4-branch:\n\n\t2009-10-08  Jakub Jelinek  <jakub@redhat.com>\n\t* gcc.dg/debug/vta-2.c: New test.\n\n\t2009-09-30  Alexandre Oliva  <aoliva@redhat.com>\n\t* gcc.dg/debug/vta-1.c: New.\n\nFrom-SVN: r152986", "tree": {"sha": "adc392106ea8e0639d01151dd01919f2defa7866", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/adc392106ea8e0639d01151dd01919f2defa7866"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a141816c42c1133579974b0f834721dda1996241", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a141816c42c1133579974b0f834721dda1996241", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a141816c42c1133579974b0f834721dda1996241"}], "stats": {"total": 64, "additions": 64, "deletions": 0}, "files": [{"sha": "cddfb3968e35013c3b874df47c7f50f3b2820f8e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "patch": "@@ -1,3 +1,12 @@\n+2009-10-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPort from redhat/gcc-4_4-branch:\n+\t2009-10-08  Jakub Jelinek  <jakub@redhat.com>\n+\t* gcc.dg/debug/vta-2.c: New test.\n+\n+\t2009-09-30  Alexandre Oliva  <aoliva@redhat.com>\n+\t* gcc.dg/debug/vta-1.c: New.\n+\n 2009-10-19  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/noreturn2.ad[sb]: New test."}, {"sha": "414083a09c019702636585142b6422c62e225d08", "filename": "gcc/testsuite/gcc.dg/debug/vta-1.c", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-1.c?ref=55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "patch": "@@ -0,0 +1,34 @@\n+/* https://bugzilla.redhat.com/show_bug.cgi?id=521991#c5\n+\n+   Distilled from Linux XFS source code.  foo, inlined into bar, ends\n+   up with debug stmts referencing the addressable variable b.\n+   Optimization made it non-addressable, and then completely optimized\n+   away, before we got a chance to rename (and discard) the occurrence\n+   in the debug stmt.  When we did, we crashed, attempting to rename\n+   an unreference variable.  */\n+\n+/* { dg-do compile } */\n+\n+static inline int\n+foo (void *x, unsigned y)\n+{\n+  unsigned z = *(unsigned long *) x % y;\n+  *(unsigned long *) x = *(unsigned long *) x / y;\n+  return z;\n+}\n+\n+struct S\n+{\n+  unsigned t;\n+};\n+\n+void\n+bar (struct S *x, int *y)\n+{\n+  int a = 0;\n+  unsigned long b = x->t;\n+  foo (&b, x->t);\n+  for (;; a++)\n+    if (b)\n+      *y = 1;\n+}"}, {"sha": "5d44262ec76fbe803beb5d24ff01f7be0f18a91b", "filename": "gcc/testsuite/gcc.dg/debug/vta-2.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55165bf6b48ed26cd17e66ac447dcfeaaf110fca/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fvta-2.c?ref=55165bf6b48ed26cd17e66ac447dcfeaaf110fca", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do compile } */\n+\n+static int\n+bar (void *a, unsigned int b, int n)\n+{\n+  int c = *(unsigned long *) a % b;\n+  *(unsigned long *) a = (int) (*(unsigned long *) a) / b;\n+  return c;\n+}\n+\n+int\n+foo (unsigned long x, int *y, int z)\n+{\n+  int level;\n+  for (level = 0; level < *y; level++)\n+    {\n+      bar (&x, z, sizeof (x));\n+      if (x)\n+\treturn *y - 1;\n+    }\n+}"}]}