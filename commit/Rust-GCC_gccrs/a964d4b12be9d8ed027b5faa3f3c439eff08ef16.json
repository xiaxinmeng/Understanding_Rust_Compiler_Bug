{"sha": "a964d4b12be9d8ed027b5faa3f3c439eff08ef16", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk2NGQ0YjEyYmU5ZDhlZDAyN2I1ZmFhM2YzYzQzOWVmZjA4ZWYxNg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2017-11-28T15:13:42Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2017-11-28T15:13:42Z"}, "message": "re PR fortran/83021 (gfortran segfault in polymorphic assignment)\n\n2017-11-28  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/83021\n\t* resolve.c (resolve_component): Only escape for use assciated\n\tvtypes if the current namespace has no proc_name and is most\n\tparticularly block data.\n\nFrom-SVN: r255202", "tree": {"sha": "76ffa20a6271857fe987307da7b440cc60b024c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76ffa20a6271857fe987307da7b440cc60b024c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a964d4b12be9d8ed027b5faa3f3c439eff08ef16", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a964d4b12be9d8ed027b5faa3f3c439eff08ef16", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a964d4b12be9d8ed027b5faa3f3c439eff08ef16", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a964d4b12be9d8ed027b5faa3f3c439eff08ef16/comments", "author": null, "committer": null, "parents": [{"sha": "4aa458f2ac11aef044a08fcb32dc2c2401cf6561", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4aa458f2ac11aef044a08fcb32dc2c2401cf6561", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4aa458f2ac11aef044a08fcb32dc2c2401cf6561"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "91c57e0d43dc921be6b45e8998d2ea9a5a8aa60a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a964d4b12be9d8ed027b5faa3f3c439eff08ef16/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a964d4b12be9d8ed027b5faa3f3c439eff08ef16/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a964d4b12be9d8ed027b5faa3f3c439eff08ef16", "patch": "@@ -1,3 +1,10 @@\n+2017-11-28  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/83021\n+\t* resolve.c (resolve_component): Only escape for use assciated\n+\tvtypes if the current namespace has no proc_name and is most\n+\tparticularly block data.\n+\n 2017-11-28  Jakub Jelinek  <jakub@redhat.com>\n \n \t* trans-decl.c (gfc_trans_entry_master_switch): Build SWITCH_EXPR"}, {"sha": "fe2f43a1e577ba6bbbbed37f28ba504185e277ea", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a964d4b12be9d8ed027b5faa3f3c439eff08ef16/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a964d4b12be9d8ed027b5faa3f3c439eff08ef16/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=a964d4b12be9d8ed027b5faa3f3c439eff08ef16", "patch": "@@ -13502,7 +13502,11 @@ resolve_component (gfc_component *c, gfc_symbol *sym)\n   if (c->attr.artificial)\n     return true;\n \n-  if (sym->attr.vtype && sym->attr.use_assoc)\n+  /* Do not allow vtype components to be resolved in nameless namespaces\n+     such as block data because the procedure pointers will cause ICEs\n+     and vtables are not needed in these contexts.  */\n+  if (sym->attr.vtype && sym->attr.use_assoc\n+      && sym->ns->proc_name == NULL)\n     return true;\n \n   /* F2008, C442.  */"}]}