{"sha": "bbba68dd6b2959722a4d6057475c3a7ef319682d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmJiYTY4ZGQ2YjI5NTk3MjJhNGQ2MDU3NDc1YzNhN2VmMzE5NjgyZA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2007-01-20T11:24:06Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2007-01-20T11:24:06Z"}, "message": "tree-tailcall.c (adjust_return_value): Do not use RESULT_DECL as temporary.\n\n\t* tree-tailcall.c (adjust_return_value): Do not use RESULT_DECL\n\tas temporary.\n\nFrom-SVN: r120999", "tree": {"sha": "4ea00e1f1ac9edfc42829aaaaaed0d9b6ed30dfa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4ea00e1f1ac9edfc42829aaaaaed0d9b6ed30dfa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bbba68dd6b2959722a4d6057475c3a7ef319682d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbba68dd6b2959722a4d6057475c3a7ef319682d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbba68dd6b2959722a4d6057475c3a7ef319682d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbba68dd6b2959722a4d6057475c3a7ef319682d/comments", "author": null, "committer": null, "parents": [{"sha": "3a53e16539952155bef788660ea6f623de9f025d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a53e16539952155bef788660ea6f623de9f025d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a53e16539952155bef788660ea6f623de9f025d"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "a3693d9f616af1418dc60bdddc7bf5ee11fa7b34", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbba68dd6b2959722a4d6057475c3a7ef319682d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbba68dd6b2959722a4d6057475c3a7ef319682d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bbba68dd6b2959722a4d6057475c3a7ef319682d", "patch": "@@ -1,3 +1,8 @@\n+2007-01-20  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-tailcall.c (adjust_return_value): Do not use RESULT_DECL\n+\tas temporary.\n+\n 2007-01-19  Ian Lance Taylor  <iant@google.com>\n \n \t* expmed.c (expand_divmod) [TRUNC_MOD_EXPR, TRUNC_DIV_EXPR]: Cast"}, {"sha": "c1ca78a3f00a45469e9bcc930490f7fb53377333", "filename": "gcc/tree-tailcall.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bbba68dd6b2959722a4d6057475c3a7ef319682d/gcc%2Ftree-tailcall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bbba68dd6b2959722a4d6057475c3a7ef319682d/gcc%2Ftree-tailcall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-tailcall.c?ref=bbba68dd6b2959722a4d6057475c3a7ef319682d", "patch": "@@ -617,6 +617,7 @@ adjust_return_value (basic_block bb, tree m, tree a)\n {\n   tree ret_stmt = last_stmt (bb), ret_var, var, stmt, tmp;\n   tree ret_type = TREE_TYPE (DECL_RESULT (current_function_decl));\n+  tree *ret_op;\n   block_stmt_iterator bsi = bsi_last (bb);\n \n   gcc_assert (TREE_CODE (ret_stmt) == RETURN_EXPR);\n@@ -627,13 +628,11 @@ adjust_return_value (basic_block bb, tree m, tree a)\n \n   if (TREE_CODE (ret_var) == GIMPLE_MODIFY_STMT)\n     {\n-      ret_var->base.ann = (tree_ann_t) stmt_ann (ret_stmt);\n-      bsi_replace (&bsi, ret_var, true);\n-      SSA_NAME_DEF_STMT (GIMPLE_STMT_OPERAND (ret_var, 0)) = ret_var;\n-      ret_var = GIMPLE_STMT_OPERAND (ret_var, 0);\n-      ret_stmt = build1 (RETURN_EXPR, TREE_TYPE (ret_stmt), ret_var);\n-      bsi_insert_after (&bsi, ret_stmt, BSI_NEW_STMT);\n+      ret_op = &GIMPLE_STMT_OPERAND (ret_var, 1);\n+      ret_var = *ret_op;\n     }\n+  else\n+    ret_op = &TREE_OPERAND (ret_stmt, 0);\n \n   if (m)\n     {\n@@ -663,7 +662,7 @@ adjust_return_value (basic_block bb, tree m, tree a)\n       bsi_insert_before (&bsi, stmt, BSI_SAME_STMT);\n     }\n \n-  TREE_OPERAND (ret_stmt, 0) = var;\n+  *ret_op = var;\n   update_stmt (ret_stmt);\n }\n "}]}