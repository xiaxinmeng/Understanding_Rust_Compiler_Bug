{"sha": "6524f6537cc038c96af638a6e5a319f18d583023", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjUyNGY2NTM3Y2MwMzhjOTZhZjYzOGE2ZTVhMzE5ZjE4ZDU4MzAyMw==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-04-17T18:27:45Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1996-04-17T18:27:45Z"}, "message": "Don't include sys/file.h ifdef NO_SYS_FILE_H.\n\n(choose_temp_base): Make tmp,usrtmp static locals.\n\nFrom-SVN: r11835", "tree": {"sha": "9fa7f87beb0a329cdf2b52d436a60c808077db10", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9fa7f87beb0a329cdf2b52d436a60c808077db10"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6524f6537cc038c96af638a6e5a319f18d583023", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6524f6537cc038c96af638a6e5a319f18d583023", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6524f6537cc038c96af638a6e5a319f18d583023", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6524f6537cc038c96af638a6e5a319f18d583023/comments", "author": null, "committer": null, "parents": [{"sha": "1ad2a62d1c61d5ca4f6f2a836cc743a5fbb0f8ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ad2a62d1c61d5ca4f6f2a836cc743a5fbb0f8ba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ad2a62d1c61d5ca4f6f2a836cc743a5fbb0f8ba"}], "stats": {"total": 7, "additions": 3, "deletions": 4}, "files": [{"sha": "009147fbc414c94bdd5cbdeb53a33dcf8c27e5a5", "filename": "gcc/choose-temp.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6524f6537cc038c96af638a6e5a319f18d583023/gcc%2Fchoose-temp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6524f6537cc038c96af638a6e5a319f18d583023/gcc%2Fchoose-temp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fchoose-temp.c?ref=6524f6537cc038c96af638a6e5a319f18d583023", "patch": "@@ -19,7 +19,7 @@ Boston, MA 02111-1307, USA.  */\n \n /* This file exports one function: choose_temp_base.  */\n \n-#ifndef _WIN32\n+#if ! defined (_WIN32) && ! defined (NO_SYS_FILE_H)\n #include <sys/file.h>   /* May get R_OK, etc. on some systems.  */\n #endif\n \n@@ -90,7 +90,8 @@ choose_temp_base ()\n   char *base = 0;\n   char *temp_filename;\n   int len;\n-  char usrtmp[sizeof (\"/usr/tmp\")],tmp[sizeof (\"/tmp\")];\n+  static char tmp[] = { DIR_SEPARATOR, 't', 'm', 'p', 0 };\n+  static char usrtmp[] = { DIR_SEPARATOR, 'u', 's', 'r', DIR_SEPARATOR, 't', 'm', 'p', 0 };\n \n #ifndef MPW\n   base = try (getenv (\"TMPDIR\"), base);\n@@ -102,9 +103,7 @@ choose_temp_base ()\n #endif\n \n   /* Try /usr/tmp, then /tmp.  */\n-  sprintf (usrtmp, \"%cusr%ctmp\", DIR_SEPARATOR, DIR_SEPARATOR);\n   base = try (usrtmp, base);\n-  sprintf (tmp, \"%ctmp\", DIR_SEPARATOR);\n   base = try (tmp, base);\n  \n   /* If all else fails, use the current directory!  */"}]}