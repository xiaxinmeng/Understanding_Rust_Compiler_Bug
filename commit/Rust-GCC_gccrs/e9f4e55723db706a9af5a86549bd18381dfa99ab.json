{"sha": "e9f4e55723db706a9af5a86549bd18381dfa99ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTlmNGU1NTcyM2RiNzA2YTlhZjVhODY1NDliZDE4MzgxZGZhOTlhYg==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-04-24T01:28:02Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-04-24T01:28:02Z"}, "message": "Makefile.in: Revert most of Arnaud's last change.\n\n\t* Makefile.in: Revert most of Arnaud's last change.  Prefer anything\n\tover error-prone Make abuse.  Remove temporary debug code.\n\t(gnatlib-zcx): New target.\n\t(gnattools): Split into gnattools-native, gnattools-cross, to fix\n\tprevious bug; select which on the basis of default_gnattools_target.\n\t(ada.all.cross): Merged with gnattools-cross target.\n\t* configure.ac: Set default_gnattools_target.\n\t* configure: Regenerate.\n\nFrom-SVN: r81128", "tree": {"sha": "07b4833abf43ecb488823ed0a121943ced4d2ba7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/07b4833abf43ecb488823ed0a121943ced4d2ba7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9f4e55723db706a9af5a86549bd18381dfa99ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9f4e55723db706a9af5a86549bd18381dfa99ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9f4e55723db706a9af5a86549bd18381dfa99ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9f4e55723db706a9af5a86549bd18381dfa99ab/comments", "author": null, "committer": null, "parents": [{"sha": "77278891d14e6ff888fee7dcb9ae47a9ec33422b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77278891d14e6ff888fee7dcb9ae47a9ec33422b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77278891d14e6ff888fee7dcb9ae47a9ec33422b"}], "stats": {"total": 102, "additions": 75, "deletions": 27}, "files": [{"sha": "796a3e4ba8f90dbed6954d487f19d0ad07d6279f", "filename": "libada/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=e9f4e55723db706a9af5a86549bd18381dfa99ab", "patch": "@@ -1,3 +1,14 @@\n+2004-04-19  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* Makefile.in: Revert most of Arnaud's last change.  Prefer anything\n+\tover error-prone Make abuse.  Remove temporary debug code.\n+\t(gnatlib-zcx): New target.\n+\t(gnattools): Split into gnattools-native, gnattools-cross, to fix\n+\tprevious bug; select which on the basis of default_gnattools_target.\n+\t(ada.all.cross): Merged with gnattools-cross target.\n+\t* configure.ac: Set default_gnattools_target.\n+\t* configure: Regenerate.\n+\n 2004-04-19  Arnaud Charlet  <charlet@act-europe.fr>\n \n \t* Makefile.in: Fix errors introduced in previous change (in particular,"}, {"sha": "7f0ce61f5957156dd4b43b7920b6bf697f5c2ed8", "filename": "libada/Makefile.in", "status": "modified", "additions": 56, "deletions": 26, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=e9f4e55723db706a9af5a86549bd18381dfa99ab", "patch": "@@ -121,55 +121,80 @@ ADA_TOOLS_FLAGS_TO_PASS=\\\n .PHONY: gnatlib gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared\n gnatlib: @default_gnatlib_target@\n \n-gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared:\n+gnatlib-plain:\n \t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n \t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n \t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n \t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n \t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n-\t  TRACE=\"$(TRACE)\" $@\n+\t  TRACE=\"$(TRACE)\" \\\n+\t  gnatlib\n \n-.PHONY: rts-zfp rts-ravenscar\n-rts-zfp rts-ravenscar:\n+gnatlib-sjlj:\n \t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n-\t  GNATMAKE=../gnatmake-cross $@\n+\t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n+\t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n+\t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n+\t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n+\t  TRACE=\"$(TRACE)\" \\\n+\t  gnatlib-sjlj\n \n-# Rules to build gnattools.\n-# For cross builds of gnattools,\n-# put the host RTS dir first in the PATH to hide the default runtime\n-# files that are among the sources\n-RTS_DIR:=$(strip $(subst \\,/,$(shell gnatls -v | grep adalib )))\n+gnatlib-zcx:\n+\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n+\t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n+\t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n+\t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n+\t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n+\t  TRACE=\"$(TRACE)\" \\\n+\t  gnatlib-zcx\n \n-ifeq ($(build),$(target))\n-  GNATTOOLS = gnattools-native\n-else\n-  GNATTOOLS = gnattools-cross\n-endif\n+gnatlib-shared:\n+\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n+\t  GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n+\t  GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\\n+\t  GNATLIBLDFLAGS=\"$(GNATLIBLDFLAGS)\" \\\n+\t  TARGET_LIBGCC2_CFLAGS=\"$(TARGET_LIBGCC2_CFLAGS)\" \\\n+\t  THREAD_KIND=\"$(THREAD_KIND)\" \\\n+\t  TRACE=\"$(TRACE)\" \\\n+\t  gnatlib-shared\n \n-.PHONY: gnattools regnattools\n-gnattools: $(GNATTOOLS)\n+.PHONY: rts-zfp rts-ravenscar\n+rts-zfp:\n+\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n+\t  GNATMAKE=../gnatmake-cross \\\n+\t  rts-zfp\n+\n+rts-ravenscar:\n+\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) \\\n+\t  GNATMAKE=../gnatmake-cross \\\n+\t  rts-ravenscar\n+\n+# Rules to build gnattools.\n+.PHONY: gnattools gnattools-native gnattools-cross regnattools\n+gnattools: @default_gnattools_target@\n \n gnattools-native: gnatlib\n \t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n \t  ADA_INCLUDES=\"-I- -I../rts\" \\\n-\t  CC=\"../../xgcc -B../../\" STAGE_PREFIX=../../ gnattools1\n-\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n-\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools3\n-\n-regnattools:\n-\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools1-re\n+\t  CC=\"../../xgcc -B../../\" STAGE_PREFIX=../../  gnattools1\n \t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n \t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools3\n \n+# For cross builds of gnattools,\n+# put the host RTS dir first in the PATH to hide the default runtime\n+# files that are among the sources\n+# FIXME: This should be done in configure.\n+RTS_DIR:=$(strip $(subst \\,/,$(shell gnatls -v | grep adalib )))\n gnattools-cross: gnatlib\n-\t$(MAKE) -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n+\t$(MAKE)  -C $(GCC_DIR)/ada $(FLAGS_TO_PASS) $(ADA_FLAGS_TO_PASS) \\\n \t  ADA_INCLUDES=\"-I$(RTS_DIR)../adainclude -I$(RTS_DIR)\" \\\n \t  GNATMAKE=\"gnatmake\" \\\n \t  GNATBIND=\"gnatbind\" \\\n \t  GNATLINK=\"gnatlink\" \\\n \t  LIBGNAT=\"\" \\\n \t  gnattools1-re gnattools2 gnattools4\n-\t# rename cross tools, as expected by the GCC makefile when installing\n+\t# Rename cross tools to where the GCC makefile wants them when\n+\t# installing.  FIXME: installation should be done elsewhere.\n \tif [ -f $(GCC_DIR)/gnatbind$(exeext) ] ; then \\\n \t  mv $(GCC_DIR)/gnatbind$(exeext) $(GCC_DIR)/gnatbind-cross$(exeext); \\\n \tfi\n@@ -222,6 +247,11 @@ gnattools-cross: gnatlib\n \t  mv $(GCC_DIR)/gprcmd$(exeext) $(GCC_DIR)/gprcmd-cross$(exeext); \\\n \tfi\n \n+regnattools:\n+\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools1-re\n+\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n+\t$(MAKE) -C $(GCC_DIR)/ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools3\n+\n # Check uninstalled version.\n check:\n \n@@ -261,5 +291,5 @@ Makefile: $(srcdir)/Makefile.in config.status\n config.status: $(srcdir)/configure\n \t$(SHELL) ./config.status --recheck\n \n-$(srcdir)/configure: @MAINT@ $(srcdir)/configure.in\n+$(srcdir)/configure: @MAINT@ $(srcdir)/configure.ac\n \tcd $(srcdir) && autoconf"}, {"sha": "b5e1827717ecb6f34a185237ec5dc61f8126e0cc", "filename": "libada/configure", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2Fconfigure?ref=e9f4e55723db706a9af5a86549bd18381dfa99ab", "patch": "@@ -272,7 +272,7 @@ PACKAGE_STRING=\n PACKAGE_BUGREPORT=\n \n ac_unique_file=\"Makefile.in\"\n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS MAINT enable_shared INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S x_ada_cflags default_gnatlib_target LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS MAINT enable_shared INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical LN_S x_ada_cflags default_gnatlib_target default_gnattools_target LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -1556,11 +1556,14 @@ if test $build = $target \\\n    && test ${enable_shared} = yes ; then\n   # Note that build=target is almost certainly the wrong test; FIXME\n   default_gnatlib_target=\"gnatlib-shared\"\n+  default_gnattools_target=\"gnattools-cross\"\n else\n   default_gnatlib_target=\"gnatlib-plain\"\n+  default_gnattools_target=\"gnattools-native\"\n fi\n \n \n+\n # Output: create a Makefile.\n           ac_config_files=\"$ac_config_files Makefile\"\n \n@@ -2221,6 +2224,7 @@ s,@target_noncanonical@,$target_noncanonical,;t t\n s,@LN_S@,$LN_S,;t t\n s,@x_ada_cflags@,$x_ada_cflags,;t t\n s,@default_gnatlib_target@,$default_gnatlib_target,;t t\n+s,@default_gnattools_target@,$default_gnattools_target,;t t\n s,@LIBOBJS@,$LIBOBJS,;t t\n s,@LTLIBOBJS@,$LTLIBOBJS,;t t\n CEOF"}, {"sha": "eaa50b8644182050132a5bdb8b1b983bd0b8e696", "filename": "libada/configure.ac", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f4e55723db706a9af5a86549bd18381dfa99ab/libada%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2Fconfigure.ac?ref=e9f4e55723db706a9af5a86549bd18381dfa99ab", "patch": "@@ -81,10 +81,13 @@ if test $build = $target \\\n    && test ${enable_shared} = yes ; then\n   # Note that build=target is almost certainly the wrong test; FIXME\n   default_gnatlib_target=\"gnatlib-shared\"\n+  default_gnattools_target=\"gnattools-cross\"\n else\n   default_gnatlib_target=\"gnatlib-plain\"\n+  default_gnattools_target=\"gnattools-native\"\n fi\n AC_SUBST([default_gnatlib_target])\n+AC_SUBST([default_gnattools_target])\n \n # Output: create a Makefile.\n AC_CONFIG_FILES([Makefile])"}]}