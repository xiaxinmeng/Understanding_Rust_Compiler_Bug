{"sha": "4f8bdef92960bb0cf1268f57e4560834eb775882", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGY4YmRlZjkyOTYwYmIwY2YxMjY4ZjU3ZTQ1NjA4MzRlYjc3NTg4Mg==", "commit": {"author": {"name": "Eric Christopher", "email": "echristo@apple.com", "date": "2006-04-28T20:52:01Z"}, "committer": {"name": "Eric Christopher", "email": "echristo@gcc.gnu.org", "date": "2006-04-28T20:52:01Z"}, "message": "darwin-c.c (darwin_ms_struct): Move this\n\n2006-04-28  Eric Christopher  <echristo@apple.com>\n\n        * config/darwin-c.c (darwin_ms_struct): Move this\n        (darwin_set_default_type_attributes): and this...\n        * config/darwin.c: ... here.\n        * config/darwin.h (darwin_ms_struct): Declare.\n\nFrom-SVN: r113358", "tree": {"sha": "0e065145d4fc18d16bffa4723df2c37825f1f762", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e065145d4fc18d16bffa4723df2c37825f1f762"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4f8bdef92960bb0cf1268f57e4560834eb775882", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f8bdef92960bb0cf1268f57e4560834eb775882", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f8bdef92960bb0cf1268f57e4560834eb775882", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f8bdef92960bb0cf1268f57e4560834eb775882/comments", "author": {"login": "echristo", "id": 327308, "node_id": "MDQ6VXNlcjMyNzMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/327308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/echristo", "html_url": "https://github.com/echristo", "followers_url": "https://api.github.com/users/echristo/followers", "following_url": "https://api.github.com/users/echristo/following{/other_user}", "gists_url": "https://api.github.com/users/echristo/gists{/gist_id}", "starred_url": "https://api.github.com/users/echristo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/echristo/subscriptions", "organizations_url": "https://api.github.com/users/echristo/orgs", "repos_url": "https://api.github.com/users/echristo/repos", "events_url": "https://api.github.com/users/echristo/events{/privacy}", "received_events_url": "https://api.github.com/users/echristo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a5f844647be0134e5a3e0a16572308f0de57c15d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5f844647be0134e5a3e0a16572308f0de57c15d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5f844647be0134e5a3e0a16572308f0de57c15d"}], "stats": {"total": 46, "additions": 28, "deletions": 18}, "files": [{"sha": "8eca71bbc4fb35218ec95ea49cab02451edac018", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4f8bdef92960bb0cf1268f57e4560834eb775882", "patch": "@@ -1,3 +1,10 @@\n+2006-04-28  Eric Christopher  <echristo@apple.com>\n+\n+\t* config/darwin-c.c (darwin_ms_struct): Move this\n+\t(darwin_set_default_type_attributes): and this...\n+\t* config/darwin.c: ... here.\n+\t* config/darwin.h (darwin_ms_struct): Declare.\n+\n 2006-04-28  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* tree-ssa-dom.c (propagate_rhs_into_lhs): Fix assert clause."}, {"sha": "531715344b2e4bcf4d67fcb308c31c38c82e423d", "filename": "gcc/config/darwin-c.c", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2Fconfig%2Fdarwin-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2Fconfig%2Fdarwin-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin-c.c?ref=4f8bdef92960bb0cf1268f57e4560834eb775882", "patch": "@@ -41,9 +41,6 @@ Boston, MA 02110-1301, USA.  */\n \n static bool using_frameworks = false;\n \n-/* True if we're setting __attribute__ ((ms_struct)).  */\n-static bool darwin_ms_struct = false;\n-\n /* Maintain a small stack of alignments.  This is similar to pragma\n    pack's stack, but simpler.  */\n \n@@ -184,17 +181,6 @@ darwin_pragma_ms_struct (cpp_reader *pfile ATTRIBUTE_UNUSED)\n     warning (OPT_Wpragmas, \"junk at end of '#pragma ms_struct'\");\n }\n \n-/* Set the darwin specific attributes on TYPE.  */\n-void\n-darwin_set_default_type_attributes (tree type)\n-{\n-  if (darwin_ms_struct\n-      && TREE_CODE (type) == RECORD_TYPE)\n-    TYPE_ATTRIBUTES (type) = tree_cons (get_identifier (\"ms_struct\"),\n-                                        NULL_TREE,\n-                                        TYPE_ATTRIBUTES (type));\n-}\n-\n static struct {\n   size_t len;\n   const char *name;"}, {"sha": "5ffe744ef78ec6e21203037ca4fb88e59102d781", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 18, "deletions": 4, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=4f8bdef92960bb0cf1268f57e4560834eb775882", "patch": "@@ -79,6 +79,9 @@ Boston, MA 02110-1301, USA.  */\n /* Section names.  */\n section * darwin_sections[NUM_DARWIN_SECTIONS];\n \n+/* True if we're setting __attribute__ ((ms_struct)).  */\n+int darwin_ms_struct = false;\n+\n /* A get_unnamed_section callback used to switch to an ObjC section.\n    DIRECTIVE is as for output_section_asm_op.  */\n \n@@ -1448,7 +1451,7 @@ darwin_file_start (void)\n {\n   if (write_symbols == DWARF2_DEBUG)\n     {\n-      static const char * const debugnames[] = \n+      static const char * const debugnames[] =\n \t{\n \t  DEBUG_FRAME_SECTION,\n \t  DEBUG_INFO_SECTION,\n@@ -1468,10 +1471,10 @@ darwin_file_start (void)\n \t  int namelen;\n \n \t  switch_to_section (get_section (debugnames[i], SECTION_DEBUG, NULL));\n-\t  \n+\n \t  gcc_assert (strncmp (debugnames[i], \"__DWARF,\", 8) == 0);\n \t  gcc_assert (strchr (debugnames[i] + 8, ','));\n-\t  \n+\n \t  namelen = strchr (debugnames[i] + 8, ',') - (debugnames[i] + 8);\n \t  fprintf (asm_out_file, \"Lsection%.*s:\\n\", namelen, debugnames[i] + 8);\n \t}\n@@ -1489,7 +1492,7 @@ darwin_asm_output_dwarf_offset (FILE *file, int size, const char * lab,\n {\n   char sname[64];\n   int namelen;\n-  \n+\n   gcc_assert (base->common.flags & SECTION_NAMED);\n   gcc_assert (strncmp (base->named.name, \"__DWARF,\", 8) == 0);\n   gcc_assert (strchr (base->named.name + 8, ','));\n@@ -1534,4 +1537,15 @@ darwin_asm_output_anchor (rtx symbol)\n \t   SYMBOL_REF_BLOCK_OFFSET (symbol));\n }\n \n+/* Set the darwin specific attributes on TYPE.  */\n+void\n+darwin_set_default_type_attributes (tree type)\n+{\n+  if (darwin_ms_struct\n+      && TREE_CODE (type) == RECORD_TYPE)\n+    TYPE_ATTRIBUTES (type) = tree_cons (get_identifier (\"ms_struct\"),\n+                                        NULL_TREE,\n+                                        TYPE_ATTRIBUTES (type));\n+}\n+\n #include \"gt-darwin.h\""}, {"sha": "dcfab427bdc090913eba3cc0b8104712a8b0d7bc", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4f8bdef92960bb0cf1268f57e4560834eb775882/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=4f8bdef92960bb0cf1268f57e4560834eb775882", "patch": "@@ -80,6 +80,9 @@ Boston, MA 02110-1301, USA.  */\n #undef\tDEFAULT_PCC_STRUCT_RETURN\n #define DEFAULT_PCC_STRUCT_RETURN 0\n \n+/* True if pragma ms_struct is in effect.  */\n+extern GTY(()) int darwin_ms_struct;\n+\n /* This table intercepts weirdo options whose names would interfere\n    with normal driver conventions, and either translates them into\n    standardly-named options, or adds a 'Z' so that they can get to"}]}