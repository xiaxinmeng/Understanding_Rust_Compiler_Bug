{"sha": "a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTgwODM0MzFiYTJlY2YyZTQ1OTJhYjhmOWM2MDhkNjkxNmQzZmRiZQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2001-02-13T21:04:57Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2001-02-13T21:04:57Z"}, "message": "i386.md (sqrt?f2): Change to expander.\n\n\t* i386.md (sqrt?f2): Change to expander.\n\t(sqrt?f2_1, sqrt?f2_sse_only, sqrt?f2_i387): New.\n\nFrom-SVN: r39645", "tree": {"sha": "68414dc5a2a857132e02b3911a20b68699241b71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68414dc5a2a857132e02b3911a20b68699241b71"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe/comments", "author": null, "committer": null, "parents": [{"sha": "d9c695fff183dd61b20b19160b2743d9a9286ce3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9c695fff183dd61b20b19160b2743d9a9286ce3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9c695fff183dd61b20b19160b2743d9a9286ce3"}], "stats": {"total": 76, "additions": 72, "deletions": 4}, "files": [{"sha": "d66d3704deaff062b17d9246dd38a115f5f004bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe", "patch": "@@ -1,3 +1,8 @@\n+Tue Feb 13 22:03:07 CET 2001  Jan Hubicka  <jh@suse.cz>\n+\n+\t* i386.md (sqrt?f2): Change to expander.\n+\t(sqrt?f2_1, sqrt?f2_sse_only, sqrt?f2_i387): New.\n+\n Tue Feb 13 15:42:05 2001  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* rtlanal.c (find_reg_equal_equiv_note): New function."}, {"sha": "65a3313f64523eb5518862dbba94e6c5df7a5c45", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 67, "deletions": 4, "changes": 71, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=a8083431ba2ecf2e4592ab8f9c608d6916d3fdbe", "patch": "@@ -10766,20 +10766,83 @@\n \f\n ;; FPU special functions.\n \n-(define_insn \"sqrtsf2\"\n+(define_expand \"sqrtsf2\"\n+  [(set (match_operand:SF 0 \"register_operand\" \"\")\n+\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"\")))]\n+  \"(! TARGET_NO_FANCY_MATH_387 && TARGET_80387) || TARGET_SSE2\"\n+  \"\n+{\n+  if (!TARGET_SSE)\n+    operands[1] = force_reg (SFmode, operands[1]);\n+}\")\n+\n+(define_insn \"sqrtsf2_1\"\n+  [(set (match_operand:SF 0 \"register_operand\" \"=f#Y,Y#f\")\n+\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"0#Y,Ym#f\")))]\n+  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+   && (TARGET_SSE && TARGET_MIX_SSE_I387)\"\n+  \"@\n+   fsqrt\n+   sqrtss\\\\t{%1, %0|%0, %1}\"\n+  [(set_attr \"type\" \"fpspc,sse\")\n+   (set_attr \"mode\" \"SF,SF\")\n+   (set_attr \"athlon_decode\" \"direct,*\")])\n+\n+(define_insn \"sqrtsf2_1_sse_only\"\n+  [(set (match_operand:SF 0 \"register_operand\" \"=Y\")\n+\t(sqrt:SF (match_operand:SF 1 \"nonimmediate_operand\" \"Ym\")))]\n+  \"TARGET_SSE && (!TARGET_80387 || !TARGET_MIX_SSE_I387)\"\n+  \"sqrtss\\\\t{%1, %0|%0, %1}\"\n+  [(set_attr \"type\" \"sse\")\n+   (set_attr \"mode\" \"SF\")\n+   (set_attr \"athlon_decode\" \"*\")])\n+\n+(define_insn \"sqrtsf2_i387\"\n   [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n \t(sqrt:SF (match_operand:SF 1 \"register_operand\" \"0\")))]\n-  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\"\n+  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+   && (!TARGET_SSE && !TARGET_MIX_SSE_I387)\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"SF\")\n    (set_attr \"athlon_decode\" \"direct\")])\n \n-(define_insn \"sqrtdf2\"\n+(define_expand \"sqrtdf2\"\n+  [(set (match_operand:DF 0 \"register_operand\" \"\")\n+\t(sqrt:DF (match_operand:DF 1 \"nonimmediate_operand\" \"\")))]\n+  \"(! TARGET_NO_FANCY_MATH_387 && TARGET_80387) || TARGET_SSE2\"\n+  \"\n+{\n+  if (!TARGET_SSE2)\n+    operands[1] = force_reg (SFmode, operands[1]);\n+}\")\n+\n+(define_insn \"sqrtdf2_1\"\n+  [(set (match_operand:DF 0 \"register_operand\" \"=f#Y,Y#f\")\n+\t(sqrt:DF (match_operand:DF 1 \"nonimmediate_operand\" \"0#Y,Ym#f\")))]\n+  \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n+   && (TARGET_SSE2 && TARGET_MIX_SSE_I387)\"\n+  \"@\n+   fsqrt\n+   sqrtsd\\\\t{%1, %0|%0, %1}\"\n+  [(set_attr \"type\" \"fpspc,sse\")\n+   (set_attr \"mode\" \"DF,DF\")\n+   (set_attr \"athlon_decode\" \"direct,*\")])\n+\n+(define_insn \"sqrtdf2_1_sse_only\"\n+  [(set (match_operand:DF 0 \"register_operand\" \"=Y\")\n+\t(sqrt:DF (match_operand:DF 1 \"nonimmediate_operand\" \"Ym\")))]\n+  \"TARGET_SSE2 && (!TARGET_80387 || !TARGET_MIX_SSE_I387)\"\n+  \"sqrtsd\\\\t{%1, %0|%0, %1}\"\n+  [(set_attr \"type\" \"sse\")\n+   (set_attr \"mode\" \"DF\")\n+   (set_attr \"athlon_decode\" \"*\")])\n+\n+(define_insn \"sqrtdf2_i387\"\n   [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n \t(sqrt:DF (match_operand:DF 1 \"register_operand\" \"0\")))]\n   \"! TARGET_NO_FANCY_MATH_387 && TARGET_80387\n-   && (TARGET_IEEE_FP || flag_fast_math) \"\n+   && (!TARGET_SSE2 && !TARGET_MIX_SSE_I387)\"\n   \"fsqrt\"\n   [(set_attr \"type\" \"fpspc\")\n    (set_attr \"mode\" \"DF\")"}]}