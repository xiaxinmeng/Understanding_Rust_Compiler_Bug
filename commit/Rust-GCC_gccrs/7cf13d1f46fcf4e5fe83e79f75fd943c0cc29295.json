{"sha": "7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NmMTNkMWY0NmZjZjRlNWZlODNlNzlmNzVmZDk0M2MwY2MyOTI5NQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2011-06-22T17:01:17Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2011-06-22T17:01:17Z"}, "message": "arm.h (OPTION_DEFAULT_SPECS): Fix -mtls-dialect typo.\n\n\t* config/arm/arm.h (OPTION_DEFAULT_SPECS): Fix -mtls-dialect\n\ttypo.\n\t* config.gcc (arm*-*-linux*): Default to gnu tls.\n\t(arm*-*-*): Add --with-tls option.\n\t(all_defaults): Add 'tls'.\n\nFrom-SVN: r175298", "tree": {"sha": "2bd17bf2c356648adc28a7f7a0f92887dc93226f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2bd17bf2c356648adc28a7f7a0f92887dc93226f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/comments", "author": null, "committer": null, "parents": [{"sha": "78a8eb4edcc2352b7af778d2a3563825d8d72b36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78a8eb4edcc2352b7af778d2a3563825d8d72b36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78a8eb4edcc2352b7af778d2a3563825d8d72b36"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "ea2042157aef2df15144358dfa5fe84f00422463", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 3, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "patch": "@@ -1,3 +1,11 @@\n+2011-06-22  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* config/arm/arm.h (OPTION_DEFAULT_SPECS): Fix -mtls-dialect\n+\ttypo.\n+\t* config.gcc (arm*-*-linux*): Default to gnu tls.\n+\t(arm*-*-*): Add --with-tls option.\n+\t(all_defaults): Add 'tls'.\n+\n 2011-06-22  Richard Henderson  <rth@redhat.com>\n \n \t* reg-notes.def (REG_CFA_WINDOW_SAVE): New.\n@@ -152,9 +160,6 @@\n \n \t* doc/invoke.texi (ARM Options): Document -mtls-dialect option.\n \t* doc/install.texi (Configuration): Document --with-tls.\n-\t* config.gcc (arm*-*-linux*): Default to gnu tls.\n-\t(arm*-*-*): Add --with-tls option.\n-\t(all_defaults): Add 'tls'.\n \t* config/arm/arm.c (enum tls_reloc): Add TLS_DESCSEQ.\n \t(arm_call_tls_get_addr): Clean up. Assert not tls descriptor.\n \t(arm_tls_descseq_addr): New."}, {"sha": "a1dbd1a8139bea5cb89535ac2b6f3a7d4b29e11f", "filename": "gcc/config.gcc", "status": "modified", "additions": 14, "deletions": 2, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "patch": "@@ -863,6 +863,7 @@ arm*-*-linux*)\t\t\t# ARM GNU/Linux with ELF\n \t    tmake_file=\"$tmake_file arm/t-linux\"\n \t    ;;\n \tesac\n+\twith_tls=${with_tls:-gnu}\n \ttm_file=\"$tm_file arm/aout.h arm/arm.h\"\n \ttmake_file=\"${tmake_file} arm/t-arm-softfp soft-fp/t-softfp\"\n \t;;\n@@ -3039,7 +3040,7 @@ case \"${target}\" in\n \t\t;;\n \n \tarm*-*-*)\n-\t\tsupported_defaults=\"arch cpu float tune fpu abi mode\"\n+\t\tsupported_defaults=\"arch cpu float tune fpu abi mode tls\"\n \t\tfor which in cpu tune; do\n \t\t\t# See if it matches any of the entries in arm-cores.def\n \t\t\teval \"val=\\$with_$which\"\n@@ -3122,6 +3123,17 @@ case \"${target}\" in\n \t\t\t;;\n \t\tesac\n \n+\t\tcase \"$with_tls\" in\n+\t\t\"\" \\\n+\t\t| gnu | gnu2)\n+\t\t\t# OK\n+\t\t\t;;\n+\t\t*)\n+\t\t\techo \"Unknown TLS method used in --with-tls=$with_tls\" 1>&2\n+\t\t\texit 1\n+\t\t\t;;\n+\t\tesac\n+\n \t\tif test \"x$with_arch\" != x && test \"x$with_cpu\" != x; then\n \t\t\techo \"Warning: --with-arch overrides --with-cpu=$with_cpu\" 1>&2\n \t\tfi\n@@ -3601,7 +3613,7 @@ case ${target} in\n esac\n \n t=\n-all_defaults=\"abi cpu cpu_32 cpu_64 arch arch_32 arch_64 tune tune_32 tune_64 schedule float mode fpu divide llsc mips-plt synci\"\n+all_defaults=\"abi cpu cpu_32 cpu_64 arch arch_32 arch_64 tune tune_32 tune_64 schedule float mode fpu divide llsc mips-plt synci tls\"\n for option in $all_defaults\n do\n \teval \"val=\\$with_\"`echo $option | sed s/-/_/g`"}, {"sha": "b0d26259a08752187b0d0165c7dbf894f9556bf8", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=7cf13d1f46fcf4e5fe83e79f75fd943c0cc29295", "patch": "@@ -324,7 +324,7 @@ extern void (*arm_lang_output_object_attributes_hook)(void);\n   {\"fpu\", \"%{!mfpu=*:-mfpu=%(VALUE)}\"}, \\\n   {\"abi\", \"%{!mabi=*:-mabi=%(VALUE)}\"}, \\\n   {\"mode\", \"%{!marm:%{!mthumb:-m%(VALUE)}}\"}, \\\n-  {\"tls\", \"%{!mtls-dialect:-mtls-dialect=%(VALUE)}\"},\n+  {\"tls\", \"%{!mtls-dialect=*:-mtls-dialect=%(VALUE)}\"},\n \n /* Which floating point model to use.  */\n enum arm_fp_model"}]}