{"sha": "f30cfcb12fbf2c92212ac3e1e144328743244d95", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjMwY2ZjYjEyZmJmMmM5MjIxMmFjM2UxZTE0NDMyODc0MzI0NGQ5NQ==", "commit": {"author": {"name": "Bernhard Reutner-Fischer", "email": "aldot@gcc.gnu.org", "date": "2008-06-19T08:59:19Z"}, "committer": {"name": "Bernhard Reutner-Fischer", "email": "aldot@gcc.gnu.org", "date": "2008-06-19T08:59:19Z"}, "message": "cgraphunit.c (cgraph_finalize_function): Remove redundant setting of node->decl.\n\n2008-06-19  Bernhard Fischer  <aldot@gcc.gnu.org>\n\n\t* cgraphunit.c (cgraph_finalize_function): Remove redundant setting of\n\tnode->decl.\n\t(cgraph_expand_function): Use local copy of decl.\n\t(cgraph_expand_all_functions): Remove redundant initialization of \n\torder_pos.\n\t(cgraph_optimize): Reword internal_error message.\n\nFrom-SVN: r136941", "tree": {"sha": "bf30153eb865eaff6e234c12ee1610d56da25094", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bf30153eb865eaff6e234c12ee1610d56da25094"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f30cfcb12fbf2c92212ac3e1e144328743244d95", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f30cfcb12fbf2c92212ac3e1e144328743244d95", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f30cfcb12fbf2c92212ac3e1e144328743244d95", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f30cfcb12fbf2c92212ac3e1e144328743244d95/comments", "author": null, "committer": null, "parents": [{"sha": "23668cf768bd439b04610ead2d124fcaa73f1828", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/23668cf768bd439b04610ead2d124fcaa73f1828", "html_url": "https://github.com/Rust-GCC/gccrs/commit/23668cf768bd439b04610ead2d124fcaa73f1828"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "315155af5b73e3897ba69518fdbe30b4c7c195b8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 2, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f30cfcb12fbf2c92212ac3e1e144328743244d95/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f30cfcb12fbf2c92212ac3e1e144328743244d95/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f30cfcb12fbf2c92212ac3e1e144328743244d95", "patch": "@@ -1,4 +1,13 @@\n-2008-06-16  Chung-Lin Tang  <ctang@marvell.com>\n+2008-06-19  Bernhard Fischer  <aldot@gcc.gnu.org>\n+\n+\t* cgraphunit.c (cgraph_finalize_function): Remove redundant setting of\n+\tnode->decl.\n+\t(cgraph_expand_function): Use local copy of decl.\n+\t(cgraph_expand_all_functions): Remove redundant initialization of\n+\torder_pos.\n+\t(cgraph_optimize): Reword internal_error message.\n+\n+2008-06-19  Chung-Lin Tang  <ctang@marvell.com>\n \n \t* arm-protos.h (arm_return_in_memory): Remove public\n \tarm_return_in_memory() prototype.\n@@ -54,7 +63,7 @@\n \t(spu_split_load): Use regno_aligned_for_load instead of reg_align.\n \t(spu_split_store): Likewise.\n \n-2006-06-18  Bernhard Fischer  <aldot@gcc.gnu.org>\n+2008-06-18  Bernhard Fischer  <aldot@gcc.gnu.org>\n \n \t* gcc/tree-vn.c: Fix typo in comment.\n "}, {"sha": "6b00bd59c41061991ed71aa354043f5aced99080", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 5, "deletions": 6, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f30cfcb12fbf2c92212ac3e1e144328743244d95/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f30cfcb12fbf2c92212ac3e1e144328743244d95/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=f30cfcb12fbf2c92212ac3e1e144328743244d95", "patch": "@@ -603,7 +603,6 @@ cgraph_finalize_function (tree decl, bool nested)\n \n   node->pid = cgraph_max_pid ++;\n   notice_global_symbol (decl);\n-  node->decl = decl;\n   node->local.finalized = true;\n   node->lowered = DECL_STRUCT_FUNCTION (decl)->cfg != NULL;\n   record_cdtor_fn (node->decl);\n@@ -1161,10 +1160,10 @@ cgraph_expand_function (struct cgraph_node *node)\n \n   /* Make sure that BE didn't give up on compiling.  */\n   /* ??? Can happen with nested function of extern inline.  */\n-  gcc_assert (TREE_ASM_WRITTEN (node->decl));\n+  gcc_assert (TREE_ASM_WRITTEN (decl));\n \n   current_function_decl = NULL;\n-  if (!cgraph_preserve_function_body_p (node->decl))\n+  if (!cgraph_preserve_function_body_p (decl))\n     {\n       cgraph_release_function_body (node);\n       /* Eliminate all call edges.  This is important so the call_expr no longer\n@@ -1201,7 +1200,7 @@ cgraph_expand_all_functions (void)\n {\n   struct cgraph_node *node;\n   struct cgraph_node **order = XCNEWVEC (struct cgraph_node *, cgraph_n_nodes);\n-  int order_pos = 0, new_order_pos = 0;\n+  int order_pos, new_order_pos = 0;\n   int i;\n \n   order_pos = cgraph_postorder (order);\n@@ -1389,7 +1388,7 @@ cgraph_optimize (void)\n   if (!quiet_flag)\n     fprintf (stderr, \"Performing interprocedural optimizations\\n\");\n   cgraph_state = CGRAPH_STATE_IPA;\n-    \n+\n   /* Don't run the IPA passes if there was any error or sorry messages.  */\n   if (errorcount == 0 && sorrycount == 0)\n     ipa_passes ();\n@@ -1460,7 +1459,7 @@ cgraph_optimize (void)\n \t    dump_cgraph_node (stderr, node);\n \t  }\n       if (error_found)\n-\tinternal_error (\"nodes with no released memory found\");\n+\tinternal_error (\"nodes with unreleased memory found\");\n     }\n #endif\n }"}]}