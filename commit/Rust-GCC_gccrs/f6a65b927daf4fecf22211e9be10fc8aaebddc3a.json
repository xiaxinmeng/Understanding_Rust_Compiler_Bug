{"sha": "f6a65b927daf4fecf22211e9be10fc8aaebddc3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZhNjViOTI3ZGFmNGZlY2YyMjIxMWU5YmUxMGZjOGFhZWJkZGMzYQ==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "1999-05-07T08:42:27Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "1999-05-07T08:42:27Z"}, "message": "don't \\\\-escape the cd command + format fix\n\nFrom-SVN: r26813", "tree": {"sha": "83a303ac3e57071f72dd34c4f65c8163ab669934", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83a303ac3e57071f72dd34c4f65c8163ab669934"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6a65b927daf4fecf22211e9be10fc8aaebddc3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6a65b927daf4fecf22211e9be10fc8aaebddc3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6a65b927daf4fecf22211e9be10fc8aaebddc3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6a65b927daf4fecf22211e9be10fc8aaebddc3a/comments", "author": null, "committer": null, "parents": [{"sha": "02c325c4ce2e5caf61831576897c416d97691b13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02c325c4ce2e5caf61831576897c416d97691b13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02c325c4ce2e5caf61831576897c416d97691b13"}], "stats": {"total": 15, "additions": 11, "deletions": 4}, "files": [{"sha": "e803e0a29ce6e9527765529a30d2f6d5096b30b9", "filename": "gcc/fixinc/server.c", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6a65b927daf4fecf22211e9be10fc8aaebddc3a/gcc%2Ffixinc%2Fserver.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6a65b927daf4fecf22211e9be10fc8aaebddc3a/gcc%2Ffixinc%2Fserver.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fserver.c?ref=f6a65b927daf4fecf22211e9be10fc8aaebddc3a", "patch": "@@ -86,9 +86,9 @@\n #define NUL '\\0'\n #endif\n \n-STATIC bool read_pipe_timeout;\n+STATIC volatile bool read_pipe_timeout;\n \n-STATIC t_pchar def_args[] =\n+static t_pchar def_args[] =\n { (char *) NULL, (char *) NULL };\n STATIC t_pf_pair server_pair =\n { (FILE *) NULL, (FILE *) NULL };\n@@ -149,7 +149,8 @@ load_data (fp)\n           p = realloc ((void *) pz_text, text_size);\n           if (p == (void *) NULL)\n             {\n-              fprintf (stderr, \"Failed to get 0x%08X bytes\\n\", text_size);\n+              fprintf (stderr, \"Failed to get 0x%08lX bytes\\n\",\n+                      (long) text_size);\n               free ((void *) pz_text);\n               return (char *) NULL;\n             }\n@@ -201,6 +202,12 @@ static void\n sig_handler (signo)\n      int signo;\n {\n+#ifdef DEBUG\n+  /* FIXME: this is illegal to do in a signal handler.  */\n+  fprintf (stderr,\n+          \"fixincl ERROR:  sig_handler: killed pid %ld due to %s\\n\",\n+          (long) server_id, signo == SIGPIPE ? \"SIGPIPE\" : \"SIGALRM\");\n+#endif\n   close_server ();\n   read_pipe_timeout = BOOL_TRUE;\n }\n@@ -273,7 +280,7 @@ run_shell (pz_cmd)\n   /*  Make sure the process will pay attention to us, send the\n      supplied command, and then have it output a special marker that\n      we can find.  */\n-  fprintf (server_pair.pf_write, \"\\\\cd %s\\n%s\\n\\necho\\necho %s\\n\",\n+  fprintf (server_pair.pf_write, \"cd %s\\n%s\\n\\necho\\necho %s\\n\",\n            p_cur_dir, pz_cmd, z_done);\n   fflush (server_pair.pf_write);\n "}]}