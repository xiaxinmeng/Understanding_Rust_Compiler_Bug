{"sha": "4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDk4NmE5NTY4YWZlNDc4NDVlM2JkNTFmYjdkMmM1YzFkZDA2NWJhMg==", "commit": {"author": {"name": "Andrew Stubbs", "email": "ams@codesourcery.com", "date": "2018-09-12T13:53:32Z"}, "committer": {"name": "Andrew Stubbs", "email": "ams@gcc.gnu.org", "date": "2018-09-12T13:53:32Z"}, "message": "Fix Fortran STOP.\n\nThe minimal libgfortran setup was created for NVPTX, but will also be used by\nAMD GCN.\n\nThis patch simply removes an assumption that NVPTX is the only user.\nSpecifically, NVPTX exit is broken, but AMD GCN exit works just fine.\n\n2018-09-12  Andrew Stubbs  <ams@codesourcery.com>\n\n\tlibgfortran/\n\t* runtime/minimal.c (exit): Only work around nvptx bugs on nvptx.\n\nFrom-SVN: r264238", "tree": {"sha": "ed04a88ab1106260ab083397525b09131b3e54e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed04a88ab1106260ab083397525b09131b3e54e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2/comments", "author": {"login": "ams-cs", "id": 2235130, "node_id": "MDQ6VXNlcjIyMzUxMzA=", "avatar_url": "https://avatars.githubusercontent.com/u/2235130?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ams-cs", "html_url": "https://github.com/ams-cs", "followers_url": "https://api.github.com/users/ams-cs/followers", "following_url": "https://api.github.com/users/ams-cs/following{/other_user}", "gists_url": "https://api.github.com/users/ams-cs/gists{/gist_id}", "starred_url": "https://api.github.com/users/ams-cs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ams-cs/subscriptions", "organizations_url": "https://api.github.com/users/ams-cs/orgs", "repos_url": "https://api.github.com/users/ams-cs/repos", "events_url": "https://api.github.com/users/ams-cs/events{/privacy}", "received_events_url": "https://api.github.com/users/ams-cs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28c4b740a64ccc3412ef4c01e3012e9013ad5bcb"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "00a07b19255bdddc6b20b13108e4e6193c07e786", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "patch": "@@ -1,3 +1,7 @@\n+2018-09-12  Andrew Stubbs  <ams@codesourcery.com>\n+\n+\t* runtime/minimal.c (exit): Only work around nvptx bugs on nvptx.\n+\n 2018-09-07  Janne Blomqvist  <jb@gcc.gnu.org>\n \n \t* runtime/environ.c (init_unsigned_integer): Remove."}, {"sha": "8940f975160cce369bfac2d810ef4eb292168c4a", "filename": "libgfortran/runtime/minimal.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2/libgfortran%2Fruntime%2Fminimal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4986a9568afe47845e3bd51fb7d2c5c1dd065ba2/libgfortran%2Fruntime%2Fminimal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fruntime%2Fminimal.c?ref=4986a9568afe47845e3bd51fb7d2c5c1dd065ba2", "patch": "@@ -197,10 +197,12 @@ sys_abort (void)\n #define st_printf printf\n #undef estr_write\n #define estr_write printf\n+#if __nvptx__\n /* Map \"exit\" to \"abort\"; see PR85463 '[nvptx] \"exit\" in offloaded region\n    doesn't terminate process'.  */\n #undef exit\n #define exit(...) do { abort (); } while (0)\n+#endif\n #undef exit_error\n #define exit_error(...) do { abort (); } while (0)\n "}]}