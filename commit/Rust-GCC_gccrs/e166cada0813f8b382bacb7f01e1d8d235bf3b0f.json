{"sha": "e166cada0813f8b382bacb7f01e1d8d235bf3b0f", "node_id": "C_kwDOANBUbNoAKGUxNjZjYWRhMDgxM2Y4YjM4MmJhY2I3ZjAxZTFkOGQyMzViZjNiMGY", "commit": {"author": {"name": "liuhongt", "email": "hongtao.liu@intel.com", "date": "2021-11-10T04:53:43Z"}, "committer": {"name": "liuhongt", "email": "hongtao.liu@intel.com", "date": "2021-11-11T01:25:53Z"}, "message": "Extend vpcmov to handle V8HF/V16HFmode under TARGET_XOP.\n\ngcc/ChangeLog:\n\n\tPR target/103151\n\t* config/i386/sse.md (V_128_256): Extend to V8HF/V16HF.\n\t(avxsizesuffix): Ditto.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/i386/pr103151.c: New test.", "tree": {"sha": "1dc69a8a05db68a75fe207ed203ba677a3488667", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1dc69a8a05db68a75fe207ed203ba677a3488667"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e166cada0813f8b382bacb7f01e1d8d235bf3b0f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e166cada0813f8b382bacb7f01e1d8d235bf3b0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e166cada0813f8b382bacb7f01e1d8d235bf3b0f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e166cada0813f8b382bacb7f01e1d8d235bf3b0f/comments", "author": {"login": "algebra84", "id": 22926165, "node_id": "MDQ6VXNlcjIyOTI2MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algebra84", "html_url": "https://github.com/algebra84", "followers_url": "https://api.github.com/users/algebra84/followers", "following_url": "https://api.github.com/users/algebra84/following{/other_user}", "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}", "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions", "organizations_url": "https://api.github.com/users/algebra84/orgs", "repos_url": "https://api.github.com/users/algebra84/repos", "events_url": "https://api.github.com/users/algebra84/events{/privacy}", "received_events_url": "https://api.github.com/users/algebra84/received_events", "type": "User", "site_admin": false}, "committer": {"login": "algebra84", "id": 22926165, "node_id": "MDQ6VXNlcjIyOTI2MTY1", "avatar_url": "https://avatars.githubusercontent.com/u/22926165?v=4", "gravatar_id": "", "url": "https://api.github.com/users/algebra84", "html_url": "https://github.com/algebra84", "followers_url": "https://api.github.com/users/algebra84/followers", "following_url": "https://api.github.com/users/algebra84/following{/other_user}", "gists_url": "https://api.github.com/users/algebra84/gists{/gist_id}", "starred_url": "https://api.github.com/users/algebra84/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/algebra84/subscriptions", "organizations_url": "https://api.github.com/users/algebra84/orgs", "repos_url": "https://api.github.com/users/algebra84/repos", "events_url": "https://api.github.com/users/algebra84/events{/privacy}", "received_events_url": "https://api.github.com/users/algebra84/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "402d28998fa35d9ffc47aa084f66f9381491eeca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/402d28998fa35d9ffc47aa084f66f9381491eeca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/402d28998fa35d9ffc47aa084f66f9381491eeca"}], "stats": {"total": 26, "additions": 22, "deletions": 4}, "files": [{"sha": "b109c2aa8fad073189882559a4083ae6a9e22863", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e166cada0813f8b382bacb7f01e1d8d235bf3b0f/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e166cada0813f8b382bacb7f01e1d8d235bf3b0f/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=e166cada0813f8b382bacb7f01e1d8d235bf3b0f", "patch": "@@ -304,7 +304,7 @@\n \n ;; All 128bit and 256bit vector modes\n (define_mode_iterator V_128_256\n-  [V32QI V16QI V16HI V8HI V8SI V4SI V4DI V2DI V8SF V4SF V4DF V2DF])\n+  [V32QI V16QI V16HI V8HI V8SI V4SI V4DI V2DI V16HF V8HF V8SF V4SF V4DF V2DF])\n \n ;; All 512bit vector modes\n (define_mode_iterator V_512 [V64QI V32HI V16SI V8DI V16SF V8DF])\n@@ -905,9 +905,9 @@\n   [(V64QI \"512\") (V32HI \"512\") (V16SI \"512\") (V8DI \"512\")\n    (V32QI \"256\") (V16HI \"256\") (V8SI \"256\") (V4DI \"256\")\n    (V16QI \"\") (V8HI \"\") (V4SI \"\") (V2DI \"\")\n-   (V16SF \"512\") (V8DF \"512\")\n-   (V8SF \"256\") (V4DF \"256\")\n-   (V4SF \"\") (V2DF \"\")])\n+   (V32HF \"512\") (V16SF \"512\") (V8DF \"512\")\n+   (V16HF \"256\") (V8SF \"256\") (V4DF \"256\")\n+   (V8HF \"\") (V4SF \"\") (V2DF \"\")])\n \n ;; SSE instruction mode\n (define_mode_attr sseinsnmode"}, {"sha": "d7db255ddcda1280b22165a19613e815ff8fac6e", "filename": "gcc/testsuite/gcc.target/i386/pr103151.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e166cada0813f8b382bacb7f01e1d8d235bf3b0f/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr103151.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e166cada0813f8b382bacb7f01e1d8d235bf3b0f/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr103151.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr103151.c?ref=e166cada0813f8b382bacb7f01e1d8d235bf3b0f", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-mavx512fp16 -O1 -mxop\" } */\n+\n+typedef _Float16 v16hf __attribute__((vector_size(32)));\n+typedef _Float16 v8hf __attribute__((vector_size(16)));\n+v8hf f1() {\n+  int i;\n+  v8hf z;\n+  z[i] = i;\n+  return z;\n+}\n+\n+v16hf f2() {\n+  int i;\n+  v16hf z;\n+  z[i] = i;\n+  return z;\n+}"}]}