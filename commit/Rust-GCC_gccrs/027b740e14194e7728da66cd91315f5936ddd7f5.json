{"sha": "027b740e14194e7728da66cd91315f5936ddd7f5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDI3Yjc0MGUxNDE5NGU3NzI4ZGE2NmNkOTEzMTVmNTkzNmRkZDdmNQ==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-01-22T14:11:44Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2008-01-22T14:11:44Z"}, "message": "re PR c/32102 (-Wall stomps on -Wstrict-overflow)\n\n2008-01-22  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n        PR 32102\n        * doc/invoke.texi (-Wall): -Wall enables -Wstrict-overflow=1.\n        * flags.h (warn_strict_aliasing): Remove.\n        (warn_strict_overflow): Remove.\n        * opts.c (warn_strict_aliasing): Remove.\n        (warn_strict_overflow): Remove.\n        * c-opts.c (c_common_handle_option): -Wall only sets\n        -Wstrict-aliasing or -Wstrict-overflow if they are uninitialized.\n        (c_common_post_options): Give default values to -Wstrict-aliasing\n        and -Wstrict-overflow if they are uninitialized.\n        * common.opt (Wstrict-aliasing): Specify Var and Init.\n        (Wstrict-overflow): Likewise.\n\ntestsuite/\n        * gcc.dg/Wstrict-overflow-21.c: New.\n        * g++.dg/warn/Wstrict-aliasing-8.C: New.\n\nFrom-SVN: r131720", "tree": {"sha": "bb2483418bbf2754d717a1b449693c17c0eae2ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bb2483418bbf2754d717a1b449693c17c0eae2ce"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/027b740e14194e7728da66cd91315f5936ddd7f5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/027b740e14194e7728da66cd91315f5936ddd7f5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/027b740e14194e7728da66cd91315f5936ddd7f5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/027b740e14194e7728da66cd91315f5936ddd7f5/comments", "author": null, "committer": null, "parents": [{"sha": "963acd6f89ae458cfbddcba67bd0d7530a71feec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/963acd6f89ae458cfbddcba67bd0d7530a71feec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/963acd6f89ae458cfbddcba67bd0d7530a71feec"}], "stats": {"total": 56, "additions": 33, "deletions": 23}, "files": [{"sha": "bc76be76da41992e02bedbe1da43bf6260102d2e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -1,3 +1,18 @@\n+2008-01-22  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR 32102\n+\t* doc/invoke.texi (-Wall): -Wall enables -Wstrict-overflow=1.\n+\t* flags.h (warn_strict_aliasing): Remove.\n+\t(warn_strict_overflow): Remove.\n+\t* opts.c (warn_strict_aliasing): Remove.\n+\t(warn_strict_overflow): Remove.\n+\t* c-opts.c (c_common_handle_option): -Wall only sets\n+\t-Wstrict-aliasing or -Wstrict-overflow if they are uninitialized.\n+\t(c_common_post_options): Give default values to -Wstrict-aliasing\n+\tand -Wstrict-overflow if they are uninitialized.\n+\t* common.opt (Wstrict-aliasing): Specify Var and Init.\n+\t(Wstrict-overflow): Likewise.\n+\n 2008-01-22  Kenneth Zadeck <zadeck@naturalbridge.com>\n \n \tPR rtl-optimization/26854"}, {"sha": "4cb76872be3f98e63ea0f49011cf4581c3e65b84", "filename": "gcc/c-opts.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -401,9 +401,11 @@ c_common_handle_option (size_t scode, const char *arg, int value)\n       warn_return_type = value;\n       warn_sequence_point = value;\t/* Was C only.  */\n       warn_switch = value;\n-      set_Wstrict_aliasing (value);\n+      if (warn_strict_aliasing == -1)\n+\tset_Wstrict_aliasing (value);\n       warn_address = value;\n-      warn_strict_overflow = value;\n+      if (warn_strict_overflow == -1)\n+\twarn_strict_overflow = value;\n       warn_array_bounds = value;\n \n       /* Only warn about unknown pragmas that are not in system\n@@ -1090,6 +1092,11 @@ c_common_post_options (const char **pfilename)\n   if (warn_pointer_sign == -1)\n     warn_pointer_sign = 0;\n \n+  if (warn_strict_aliasing == -1)\n+    warn_strict_aliasing = 0;\n+  if (warn_strict_overflow == -1)\n+    warn_strict_overflow = 0;\n+\n   /* -Woverlength-strings is off by default, but is enabled by -pedantic.\n      It is never enabled in C++, as the minimum limit is not normative\n      in that standard.  */"}, {"sha": "810f879fe48a5a70bc6a23c81d430f474c31e467", "filename": "gcc/common.opt", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -155,15 +155,15 @@ Common Warning\n Warn about code which might break strict aliasing rules\n \n Wstrict-aliasing=\n-Common Joined UInteger Warning\n+Common Joined UInteger Var(warn_strict_aliasing) Init(-1) Warning\n Warn about code which might break strict aliasing rules\n \n Wstrict-overflow\n Common Warning\n Warn about optimizations that assume that signed overflow is undefined\n \n Wstrict-overflow=\n-Common Joined UInteger Warning\n+Common Joined UInteger Var(warn_strict_overflow) Init(-1) Warning\n Warn about optimizations that assume that signed overflow is undefined\n \n Wswitch"}, {"sha": "6b145532ff4caab41e56b17829bf30de2af0e7e3", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -2649,7 +2649,7 @@ Options} and @ref{Objective-C and Objective-C++ Dialect Options}.\n -Wsequence-point  @gol\n -Wsign-compare @r{(only in C++)}  @gol\n -Wstrict-aliasing  @gol\n--Wstrict-overflow  @gol\n+-Wstrict-overflow=1  @gol\n -Wswitch  @gol\n -Wtrigraphs  @gol\n -Wuninitialized @r{(only with} @option{-O1} @r{and above)}  @gol"}, {"sha": "e3174732995912204f6efd8bccd791ec13e83ede", "filename": "gcc/flags.h", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fflags.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fflags.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflags.h?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -137,16 +137,6 @@ extern void set_Wstrict_aliasing (int onoff);\n extern bool warn_larger_than;\n extern HOST_WIDE_INT larger_than_size;\n \n-/* Nonzero means warn about constructs which might not be strict\n-   aliasing safe.  */\n-\n-extern int warn_strict_aliasing;\n-\n-/* Nonzero means warn about optimizations which rely on undefined\n-   signed overflow.  */\n-\n-extern int warn_strict_overflow;\n-\n /* Temporarily suppress certain warnings.\n    This is set while reading code from a system header file.  */\n "}, {"sha": "16ca6bf81ab8c3bad3f1142de68875973b118c90", "filename": "gcc/opts.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Fopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts.c?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -58,14 +58,6 @@ bool extra_warnings;\n bool warn_larger_than;\n HOST_WIDE_INT larger_than_size;\n \n-/* Nonzero means warn about constructs which might not be\n-   strict-aliasing safe.  */\n-int warn_strict_aliasing;\n-\n-/* Nonzero means warn about optimizations which rely on undefined\n-   signed overflow.  */\n-int warn_strict_overflow;\n-\n /* Hack for cooperation between set_Wunused and set_Wextra.  */\n static bool maybe_warn_unused_parameter;\n "}, {"sha": "9a6eb68daab25da7a914c054d45cb4221cdde38a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/027b740e14194e7728da66cd91315f5936ddd7f5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=027b740e14194e7728da66cd91315f5936ddd7f5", "patch": "@@ -1,3 +1,9 @@\n+2008-01-22  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR 32102\n+\t* gcc.dg/Wstrict-overflow-21.c: New.\n+\t* g++.dg/warn/Wstrict-aliasing-8.C: New.\n+\n 2008-01-22  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n \n \tPR middle-end/33092"}]}