{"sha": "db24bdc743cf23ea12d2dcf8254d86ab366bb46d", "node_id": "C_kwDOANBUbNoAKGRiMjRiZGM3NDNjZjIzZWExMmQyZGNmODI1NGQ4NmFiMzY2YmI0NmQ", "commit": {"author": {"name": "Jeff Law", "email": "jeffreyalaw@gmail.com", "date": "2022-10-11T04:44:26Z"}, "committer": {"name": "Jeff Law", "email": "jeffreyalaw@gmail.com", "date": "2022-10-11T04:44:26Z"}, "message": "[PR rtl-optimization/107182] Clear EDGE_CROSSING for jump->ret optimization\n\nWhen turning a jump to a return into a return, we need to clear EDGE_CROSSING\nof the fallthru edge to prevent a checking failure.\n\nI considered not applying the transformation when the edge has EDGE_CROSSING\nset, but it still seems like we ought to eliminate the unnecessary jump in\nthat case.\n\ngcc/\n\tPR rtl-optimization/107182\n\t* cfgrtl.cc (fixup_reorder_chain): When optimizing a jump to a\n\treturn, clear EDGE_CROSSING on the appropriate edge.", "tree": {"sha": "0072665445eb9625ef4438c5d5ddc575ca0ec584", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0072665445eb9625ef4438c5d5ddc575ca0ec584"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db24bdc743cf23ea12d2dcf8254d86ab366bb46d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db24bdc743cf23ea12d2dcf8254d86ab366bb46d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db24bdc743cf23ea12d2dcf8254d86ab366bb46d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db24bdc743cf23ea12d2dcf8254d86ab366bb46d/comments", "author": {"login": "JeffreyALaw", "id": 14062506, "node_id": "MDQ6VXNlcjE0MDYyNTA2", "avatar_url": "https://avatars.githubusercontent.com/u/14062506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffreyALaw", "html_url": "https://github.com/JeffreyALaw", "followers_url": "https://api.github.com/users/JeffreyALaw/followers", "following_url": "https://api.github.com/users/JeffreyALaw/following{/other_user}", "gists_url": "https://api.github.com/users/JeffreyALaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffreyALaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffreyALaw/subscriptions", "organizations_url": "https://api.github.com/users/JeffreyALaw/orgs", "repos_url": "https://api.github.com/users/JeffreyALaw/repos", "events_url": "https://api.github.com/users/JeffreyALaw/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffreyALaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "JeffreyALaw", "id": 14062506, "node_id": "MDQ6VXNlcjE0MDYyNTA2", "avatar_url": "https://avatars.githubusercontent.com/u/14062506?v=4", "gravatar_id": "", "url": "https://api.github.com/users/JeffreyALaw", "html_url": "https://github.com/JeffreyALaw", "followers_url": "https://api.github.com/users/JeffreyALaw/followers", "following_url": "https://api.github.com/users/JeffreyALaw/following{/other_user}", "gists_url": "https://api.github.com/users/JeffreyALaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/JeffreyALaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/JeffreyALaw/subscriptions", "organizations_url": "https://api.github.com/users/JeffreyALaw/orgs", "repos_url": "https://api.github.com/users/JeffreyALaw/repos", "events_url": "https://api.github.com/users/JeffreyALaw/events{/privacy}", "received_events_url": "https://api.github.com/users/JeffreyALaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d2efb10a19b3948e48a2d9273b294db4e1d65296", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2efb10a19b3948e48a2d9273b294db4e1d65296", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2efb10a19b3948e48a2d9273b294db4e1d65296"}], "stats": {"total": 1, "additions": 1, "deletions": 0}, "files": [{"sha": "f31941a61f97dce69d0ce1c42d8f2d6cf0fe58a4", "filename": "gcc/cfgrtl.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db24bdc743cf23ea12d2dcf8254d86ab366bb46d/gcc%2Fcfgrtl.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db24bdc743cf23ea12d2dcf8254d86ab366bb46d/gcc%2Fcfgrtl.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgrtl.cc?ref=db24bdc743cf23ea12d2dcf8254d86ab366bb46d", "patch": "@@ -4055,6 +4055,7 @@ fixup_reorder_chain (void)\n \t  ret_label = PATTERN (ret);\n \t  dest = EXIT_BLOCK_PTR_FOR_FN (cfun);\n \n+\t  e_fall->flags &= ~EDGE_CROSSING;\n \t  /* E_FALL->dest might become unreachable as a result of\n \t     replacing the jump with a return.  So arrange to remove\n \t     unreachable blocks.  */"}]}