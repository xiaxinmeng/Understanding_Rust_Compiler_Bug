{"sha": "242747e538d40a168e112975e3298cac5eca21d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQyNzQ3ZTUzOGQ0MGExNjhlMTEyOTc1ZTMyOThjYWM1ZWNhMjFkNQ==", "commit": {"author": {"name": "Alexandre Petit-Bianco", "email": "apbianco@redhat.com", "date": "2002-03-28T23:40:21Z"}, "committer": {"name": "Alexandre Petit-Bianco", "email": "apbianco@gcc.gnu.org", "date": "2002-03-28T23:40:21Z"}, "message": "re PR java/4715 (Tree check failure in check_inner_circular_reference)\n\n2002-03-28  Alexandre Petit-Bianco  <apbianco@redhat.com>\n\n\tFix for PR java/4715:\n\t* jcf-parse.c (parse_source_file_3): New function.\n\t(read_class): Call it.\n\t(java_parse_file): Likewise.\n\n(http://gcc.gnu.org/ml/gcc-patches/2002-03/msg01917.html)\n\nFrom-SVN: r51534", "tree": {"sha": "cfaef23a5b6e8fcba2ebb770074ebff39db32149", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfaef23a5b6e8fcba2ebb770074ebff39db32149"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/242747e538d40a168e112975e3298cac5eca21d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/242747e538d40a168e112975e3298cac5eca21d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/242747e538d40a168e112975e3298cac5eca21d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/242747e538d40a168e112975e3298cac5eca21d5/comments", "author": null, "committer": null, "parents": [{"sha": "8bc528064fedba642b6246c38b8c48e029321766", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bc528064fedba642b6246c38b8c48e029321766", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bc528064fedba642b6246c38b8c48e029321766"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "c1206c46c122b278d85bc87304f8b68f63a8e94a", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/242747e538d40a168e112975e3298cac5eca21d5/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/242747e538d40a168e112975e3298cac5eca21d5/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=242747e538d40a168e112975e3298cac5eca21d5", "patch": "@@ -1,3 +1,10 @@\n+2002-03-28  Alexandre Petit-Bianco  <apbianco@redhat.com>\n+\n+\tFix for PR java/4715:\n+\t* jcf-parse.c (parse_source_file_3): New function.\n+\t(read_class): Call it.\n+\t(java_parse_file): Likewise.\n+\n Thu Mar 28 13:22:22 CET 2002  Jan Hubicka  <jh@suse.cz>\n \n \t* java/lang.c (java_init_options): Set flag_trapping_math to 0."}, {"sha": "53e647cb2c6313114a5e652a439f990752ce9b7b", "filename": "gcc/java/jcf-parse.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/242747e538d40a168e112975e3298cac5eca21d5/gcc%2Fjava%2Fjcf-parse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/242747e538d40a168e112975e3298cac5eca21d5/gcc%2Fjava%2Fjcf-parse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjcf-parse.c?ref=242747e538d40a168e112975e3298cac5eca21d5", "patch": "@@ -96,6 +96,7 @@ static void parse_zip_file_entries PARAMS ((void));\n static void process_zip_dir PARAMS ((FILE *));\n static void parse_source_file_1 PARAMS ((tree, FILE *));\n static void parse_source_file_2 PARAMS ((void));\n+static void parse_source_file_3 PARAMS ((void));\n static void parse_class_file PARAMS ((void));\n static void set_source_filename PARAMS ((JCF *, int));\n static void ggc_mark_jcf PARAMS ((void**));\n@@ -550,6 +551,7 @@ read_class (name)\n \t    fatal_io_error (\"can't reopen %s\", input_filename);\n \t  parse_source_file_1 (file, finput);\n \t  parse_source_file_2 ();\n+\t  parse_source_file_3 ();\n \t  if (fclose (finput))\n \t    fatal_io_error (\"can't close %s\", input_filename);\n \t}\n@@ -883,6 +885,12 @@ parse_source_file_2 ()\n   int save_error_count = java_error_count;\n   java_complete_class ();\t    /* Parse unsatisfied class decl. */\n   java_parse_abort_on_error ();\n+}\n+\n+static void\n+parse_source_file_3 ()\n+{\n+  int save_error_count = java_error_count;\n   java_check_circular_reference (); /* Check on circular references */\n   java_parse_abort_on_error ();\n   java_fix_constructors ();\t    /* Fix the constructors */\n@@ -1132,6 +1140,13 @@ java_parse_file ()\n       input_filename = ctxp->filename;\n       parse_source_file_2 ();\n     }\n+\n+  for (ctxp = ctxp_for_generation; ctxp; ctxp = ctxp->next)\n+    {\n+      input_filename = ctxp->filename;\n+      parse_source_file_3 ();\n+    }\n+\n   for (node = current_file_list; node; node = TREE_CHAIN (node))\n     {\n       input_filename = IDENTIFIER_POINTER (TREE_VALUE (node));"}]}