{"sha": "b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjAyZWY1NmQ4ZDc5MjA1OWYzOWJlZjFkOWI4NTNkOWEyYWYwYWEzYg==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-10-25T16:26:10Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-10-25T16:26:10Z"}, "message": "re PR c++/58878 (Template parameter name can be hidden in a template member function defined inside the class specifier)\n\n/cp\n2013-10-25  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58878\n\t* pt.c (check_template_shadow): Don't skip declarations in inline\n\tmember templates.\n\n/testsuite\n2013-10-25  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/58878\n\t* g++.dg/template/pr58878.C: New.\n\nFrom-SVN: r204071", "tree": {"sha": "5df10956abfcc99ccbea7d543e1f2f6ec16fd939", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5df10956abfcc99ccbea7d543e1f2f6ec16fd939"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/comments", "author": null, "committer": null, "parents": [{"sha": "347593705483c3f425942501ae1a20485fa66ac6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/347593705483c3f425942501ae1a20485fa66ac6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/347593705483c3f425942501ae1a20485fa66ac6"}], "stats": {"total": 75, "additions": 74, "deletions": 1}, "files": [{"sha": "297d015a86691df941898e3a62683f022e5f4652", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "patch": "@@ -1,3 +1,9 @@\n+2013-10-25  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58878\n+\t* pt.c (check_template_shadow): Don't skip declarations in inline\n+\tmember templates.\n+\n 2013-10-25  Tobias Burnus  <burnus@net-b.de>\n \n \tPR other/33426"}, {"sha": "224be8b988d015a2d272256e85d6d3cf5975ebf7", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "patch": "@@ -3511,7 +3511,8 @@ check_template_shadow (tree decl)\n      name inside a class.  We check TPFI to avoid duplicate errors for\n      inline member templates.  */\n   if (decl == olddecl\n-      || TEMPLATE_PARMS_FOR_INLINE (current_template_parms))\n+      || (DECL_TEMPLATE_PARM_P (decl)\n+\t  && TEMPLATE_PARMS_FOR_INLINE (current_template_parms)))\n     return true;\n \n   error (\"declaration of %q+#D\", decl);"}, {"sha": "ac5ab6d06488398bea3497fe1bff7955460d71ee", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "patch": "@@ -1,3 +1,8 @@\n+2013-10-25  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/58878\n+\t* g++.dg/template/pr58878.C: New.\n+\n 2013-10-25  Marc Glisse  <marc.glisse@inria.fr>\n \n \t* gcc.dg/tree-ssa/alias-23.c: New file."}, {"sha": "adad9fe5b07cfb2af8b2e4d36f52c1dde06e6d1f", "filename": "gcc/testsuite/g++.dg/template/pr58878.C", "status": "added", "additions": 61, "deletions": 0, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr58878.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b02ef56d8d792059f39bef1d9b853d9a2af0aa3b/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr58878.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr58878.C?ref=b02ef56d8d792059f39bef1d9b853d9a2af0aa3b", "patch": "@@ -0,0 +1,61 @@\n+// PR c++/58878\n+\n+// Template-members of non-template class\n+struct A\n+{\n+    template <typename t>    // { dg-error \"shadows\" }\n+        void f()\n+        {\n+            int t = 1;       // { dg-error \"declaration\" }\n+        }\n+\n+    template <typename t>\n+        void g();\n+};\n+\n+template <typename t>        // { dg-error \"shadows\" }\n+void A::g()\n+{\n+    int t = 2;               // { dg-error \"declaration\" }\n+}\n+\n+// (Non-template) Members of template class\n+template <typename t>        // { dg-error \"shadows\" }\n+struct B\n+{\n+    void f()\n+    {\n+        int t = 3;           // { dg-error \"declaration\" }\n+    }\n+\n+    void g();\n+};\n+\n+template <typename t>        // { dg-error \"shadows\" }\n+void B<t>::g()\n+{\n+    int t = 4;               // { dg-error \"declaration\" }\n+}\n+\n+// Template members of template class\n+template <typename t>        // { dg-error \"shadows\" }\n+struct C\n+{\n+    template <typename s>    // { dg-error \"shadows\" }\n+    void f()\n+    {\n+        int t = 5;           // { dg-error \"declaration\" }\n+        int s = 6;           // { dg-error \"declaration\" }\n+    }\n+\n+    template <typename s>\n+    void g();\n+};\n+\n+template <typename t>        // { dg-error \"shadows\" }\n+template <typename s>        // { dg-error \"shadows\" }\n+void C<t>::g()\n+{\n+    int t = 7;               // { dg-error \"declaration\" }\n+    int s = 8;               // { dg-error \"declaration\" }\n+}"}]}