{"sha": "d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDRmYzY3MDI5NGYwMzdlMGE4ZThmNGJkYmI3ZWE4MDY0MGY0NjNlNQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2016-10-30T22:14:01Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2016-10-30T22:14:01Z"}, "message": "re PR libfortran/78123 (Short reads with T edit descriptor not padding correctly)\n\n2016-10-30  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\n\tPR fortran/78123\n\t* io/transfer.c (formatted_transfer_scalar_read): Clear seen_eor\n\tonly if we have tabbed to left of current position.\n\n\t* gfortran.dg/fmt_t_9.f: New test.\n\nFrom-SVN: r241691", "tree": {"sha": "ad49bed54951ceabdcb4409b96fed44a089970a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ad49bed54951ceabdcb4409b96fed44a089970a1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/comments", "author": null, "committer": null, "parents": [{"sha": "396e56d2da7935f96f4ca133c359668cc6c98eaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/396e56d2da7935f96f4ca133c359668cc6c98eaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/396e56d2da7935f96f4ca133c359668cc6c98eaf"}], "stats": {"total": 55, "additions": 54, "deletions": 1}, "files": [{"sha": "c8d3650c41ca94dbbbae8b48d75ac7d903da41c5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "patch": "@@ -1,3 +1,8 @@\n+2016-10-30  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/78123\n+\t* gfortran.dg/fmt_t_9.f: New test.\n+\n 2016-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR fortran/67219"}, {"sha": "bfe0361d0e12aab0688168acd7ff251222b67737", "filename": "gcc/testsuite/gfortran.dg/fmt_t_9.f", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/gcc%2Ftestsuite%2Fgfortran.dg%2Ffmt_t_9.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/gcc%2Ftestsuite%2Fgfortran.dg%2Ffmt_t_9.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Ffmt_t_9.f?ref=d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "patch": "@@ -0,0 +1,41 @@\n+! { dg-options \"-ffixed-line-length-none -std=gnu\" }\n+! { dg-do run }\n+! PR78123 Short reads with T edit descriptor not padding correctly\n+      PROGRAM tformat\n+C\n+      INTEGER  MXFLTL\n+      PARAMETER (MXFLTL = 99999)\n+      INTEGER   IFLGHT, NFLCYC, IFLTSQ(MXFLTL), IDXBLK, LMAX, LMIN, I\n+C\n+      OPEN(29, status='scratch')\n+      WRITE(29, '(a)') \"   1   1   1  TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT      72  122     4\"\n+      WRITE(29, '(a)') \"\"\n+      WRITE(29, '(a)') \"  451   402012011201120112011200120112011201120112011201120111971201120112011201120112011201\"\n+      WRITE(29, '(a)') \"  451   4020 866 866 866 866 866 866 866 866 865 866 865 866 866 866 866 866 866 866 865 866\"\n+      REWIND(29)\n+C     The error occurs in the following loop:\n+ 10   CONTINUE\n+         READ(29,1010   )  IDXBLK, LMAX, LMIN\n+1010     FORMAT(8X,I4,T51,2I5) ! wrong if this format is used\n+c         write(6,fmt='(\"IDXBLK,LMAX,LMIN=\",3I5)')IDXBLK,LMAX,LMIN\n+         IF (IDXBLK .EQ. 0)  GO TO 20\n+      GO TO 10\n+C\n+ 20   CONTINUE\n+      READ(29,1040,END=100)  IFLGHT, NFLCYC,\n+     &              (IFLTSQ(I), I=1,NFLCYC)\n+1040  FORMAT(I5,I5,2X,(T13,20I4))\n+c      write(6,fmt='(2i6)') IFLGHT,NFLCYC\n+c      write(6,fmt='(20I4)') (IFLTSQ(I), I=1,NFLCYC)\n+c      write(6,*) \"Program is correct\"\n+      close(29)\n+      if (IFLGHT.ne.451) call abort\n+      if (NFLCYC.ne.40) call abort\n+      stop\n+C\n+ 100  CONTINUE\n+C      write(6,*) \"End of file encountered (wrong)\"\n+      close (29)\n+      call abort\n+      STOP\n+      END"}, {"sha": "78d3949240b600a866a4591cf65a106b822515c7", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "patch": "@@ -1,3 +1,9 @@\n+2016-10-30  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\n+\tPR fortran/78123\n+\t* io/transfer.c (formatted_transfer_scalar_read): Clear seen_eor\n+\tonly if we have tabbed to left of current position.\n+\n 2016-10-26  Fritz Reese  <fritzoreese@gmail.com>\n \n \t* libgfortran.h (IOPARM_OPEN_HAS_READONLY, IOPARM_OPEN_HAS_SHARE,"}, {"sha": "583036292f98d12dd30139d5105e474359b76090", "filename": "libgfortran/io/transfer.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/libgfortran%2Fio%2Ftransfer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d4fc670294f037e0a8e8f4bdbb7ea80640f463e5/libgfortran%2Fio%2Ftransfer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Ftransfer.c?ref=d4fc670294f037e0a8e8f4bdbb7ea80640f463e5", "patch": "@@ -1579,7 +1579,8 @@ formatted_transfer_scalar_read (st_parameter_dt *dtp, bt type, void *p, int kind\n               dtp->u.p.current_unit->bytes_left -= dtp->u.p.sf_seen_eor;\n               dtp->u.p.skips -= dtp->u.p.sf_seen_eor;\n \t      bytes_used = pos;\n-\t      dtp->u.p.sf_seen_eor = 0;\n+\t      if (dtp->u.p.pending_spaces == 0)\n+\t\tdtp->u.p.sf_seen_eor = 0;\n \t    }\n \t  if (dtp->u.p.skips < 0)\n \t    {"}]}