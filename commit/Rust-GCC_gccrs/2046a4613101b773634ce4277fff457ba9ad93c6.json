{"sha": "2046a4613101b773634ce4277fff457ba9ad93c6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjA0NmE0NjEzMTAxYjc3MzYzNGNlNDI3N2ZmZjQ1N2JhOWFkOTNjNg==", "commit": {"author": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1995-08-15T02:33:42Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "1995-08-15T02:33:42Z"}, "message": "Changes for Linux and LynxOS.\n\nFrom-SVN: r10239", "tree": {"sha": "b2354f62995c9907322b68dbbb7a11a075af9c04", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2354f62995c9907322b68dbbb7a11a075af9c04"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2046a4613101b773634ce4277fff457ba9ad93c6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2046a4613101b773634ce4277fff457ba9ad93c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2046a4613101b773634ce4277fff457ba9ad93c6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2046a4613101b773634ce4277fff457ba9ad93c6/comments", "author": null, "committer": null, "parents": [{"sha": "9b3b5e8d97f31eedab198e904d5ca055626e98fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b3b5e8d97f31eedab198e904d5ca055626e98fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b3b5e8d97f31eedab198e904d5ca055626e98fb"}], "stats": {"total": 40, "additions": 25, "deletions": 15}, "files": [{"sha": "0b039f5923003e263f247c4b38411da20bd56a13", "filename": "gcc/config.guess", "status": "modified", "additions": 25, "deletions": 15, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2046a4613101b773634ce4277fff457ba9ad93c6/gcc%2Fconfig.guess", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2046a4613101b773634ce4277fff457ba9ad93c6/gcc%2Fconfig.guess", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.guess?ref=2046a4613101b773634ce4277fff457ba9ad93c6", "patch": "@@ -14,7 +14,7 @@\n #\n # You should have received a copy of the GNU General Public License\n # along with this program; if not, write to the Free Software\n-# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n+# Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.\n #\n # As a special exception to the GNU General Public License, if you\n # distribute this file as part of a program that contains a\n@@ -316,15 +316,24 @@ EOF\n \techo `echo ${UNAME_MACHINE}|sed -e 's,/.*$,,'`-unknown-gnu`echo ${UNAME_RELEASE}|sed -e 's,/.*$,,'`\n \texit 0 ;;\n     *:Linux:*:*)\n-\t# Systems without a BFD linker\n-\tif test -d /usr/lib/ldscripts/. ; then\n-\t  :\n+\t# The BFD linker knows what the default object file format is, so\n+\t# first see if it will tell us.\n+\tld_help_string=`ld --help 2>&1`\n+\tif echo $ld_help_string | grep >/dev/null 2>&1 \"supported emulations: elf_i[345]86\"; then\n+\t  echo \"${UNAME_MACHINE}-unknown-linux\" ; exit 0\n+\telif echo $ld_help_string | grep >/dev/null 2>&1 \"supported emulations: i[345]86linux\"; then\n+\t  echo \"${UNAME_MACHINE}-unknown-linuxaout\" ; exit 0\n+\telif echo $ld_help_string | grep >/dev/null 2>&1 \"supported emulations: i[345]86coff\"; then\n+\t  echo \"${UNAME_MACHINE}-unknown-linuxcoff\" ; exit 0\n+\telif test \"${UNAME_MACHINE}\" = \"alpha\" ; then\n+\t  echo alpha-unknown-linux ; exit 0\n \telse\n-\t  echo \"${UNAME_MACHINE}-unknown-linuxoldld\"\n-\t  exit 0\n-\tfi\n- \t# Determine whether the default compiler is a.out or elf\n-\tcat >dummy.c <<EOF\n+\t  # Either a pre-BFD a.out linker (linuxoldld) or one that does not give us\n+\t  # useful --help.  Gcc wants to distinguish between linuxoldld and linuxaout.\n+\t  test ! -d /usr/lib/ldscripts/. \\\n+\t    && echo \"${UNAME_MACHINE}-unknown-linuxoldld\" && exit 0\n+\t  # Determine whether the default compiler is a.out or elf\n+\t  cat >dummy.c <<EOF\n main(argc, argv)\n int argc;\n char *argv[];\n@@ -337,8 +346,9 @@ char *argv[];\n   return 0;\n }\n EOF\n-\t${CC-cc} dummy.c -o dummy 2>/dev/null && ./dummy \"${UNAME_MACHINE}\" && rm dummy.c dummy && exit 0\n-\trm -f dummy.c dummy;;\n+\t  ${CC-cc} dummy.c -o dummy 2>/dev/null && ./dummy \"${UNAME_MACHINE}\" && rm dummy.c dummy && exit 0\n+\t  rm -f dummy.c dummy\n+\tfi ;;\n # ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.  earlier versions\n # are messed up and put the nodename in both sysname and nodename.\n     i[34]86:DYNIX/ptx:4*:*)\n@@ -388,19 +398,19 @@ EOF\n     3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)\n         uname -p 2>/dev/null | grep 86 >/dev/null \\\n           && echo i486-ncr-sysv4 && exit 0 ;;\n-    m680[234]0:LynxOS:2.2*:*)\n+    m680[234]0:LynxOS:2.[23]*:*)\n \techo m68k-lynx-lynxos${UNAME_RELEASE}\n \texit 0 ;;\n     mc68030:UNIX_System_V:4.*:*)\n \techo m68k-atari-sysv4\n \texit 0 ;;\n-    i[34]86:LynxOS:2.2*:*)\n+    i[34]86:LynxOS:2.[23]*:*)\n \techo i386-lynx-lynxos${UNAME_RELEASE}\n \texit 0 ;;\n-    TSUNAMI:LynxOS:2.2*:*)\n+    TSUNAMI:LynxOS:2.[23]*:*)\n \techo sparc-lynx-lynxos${UNAME_RELEASE}\n \texit 0 ;;\n-    rs6000:LynxOS:2.2*:*)\n+    rs6000:LynxOS:2.[23]*:*)\n \techo rs6000-lynx-lynxos${UNAME_RELEASE}\n \texit 0 ;;\n     RM*:SINIX-*:*:*)"}]}