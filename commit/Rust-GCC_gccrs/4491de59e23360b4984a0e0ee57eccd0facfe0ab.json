{"sha": "4491de59e23360b4984a0e0ee57eccd0facfe0ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQ5MWRlNTllMjMzNjBiNDk4NGEwZTBlZTU3ZWNjZDBmYWNmZTBhYg==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-08-13T21:29:09Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1992-08-13T21:29:09Z"}, "message": "Rename vms to vax-vms; split long lines.\n\nFrom-SVN: r1818", "tree": {"sha": "42fe9824d2c37ffebdff639e2a1bc081829a96ed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/42fe9824d2c37ffebdff639e2a1bc081829a96ed"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4491de59e23360b4984a0e0ee57eccd0facfe0ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4491de59e23360b4984a0e0ee57eccd0facfe0ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4491de59e23360b4984a0e0ee57eccd0facfe0ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4491de59e23360b4984a0e0ee57eccd0facfe0ab/comments", "author": null, "committer": null, "parents": [{"sha": "b47bae4114286468ee0b0bbb5b709d6c26d8a870", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b47bae4114286468ee0b0bbb5b709d6c26d8a870", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b47bae4114286468ee0b0bbb5b709d6c26d8a870"}], "stats": {"total": 47, "additions": 30, "deletions": 17}, "files": [{"sha": "da7847960575c39ddcde46f55d8b903142f02ba8", "filename": "gcc/vmsconfig.com", "status": "modified", "additions": 30, "deletions": 17, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4491de59e23360b4984a0e0ee57eccd0facfe0ab/gcc%2Fvmsconfig.com", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4491de59e23360b4984a0e0ee57eccd0facfe0ab/gcc%2Fvmsconfig.com", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvmsconfig.com?ref=4491de59e23360b4984a0e0ee57eccd0facfe0ab", "patch": "@@ -1,5 +1,5 @@\n $ !\n-$ !\tSet up to compile GCC on VMS\n+$ !\tSet up to compile GCC on VAX/VMS\n $ !\n $! Set the def dir to proper place for use in batch. Works for interactive too.\n $flnm = f$enviroment(\"PROCEDURE\")     ! get current procedure name\n@@ -10,12 +10,20 @@ $ !\n $ echo = \"write sys$output\"\n $ !\n $ if f$search(\"config.h\") .nes. \"\" then delete config.h.*\n-$ copy [.config]xm-vms.h []config.h\n-$ echo \"Linked `config.h' to `[.config]xm-vms.h'.\n+$ copy [.config]xm-vax-vms.h []config.h\n+$ echo \"Linked `config.h' to `[.config]xm-vax-vms.h'.\n+$ !\n+$ if f$search(\"tconfig.h\") .nes. \"\" then delete tconfig.h.*\n+$ create []tconfig.h\n+$DECK\n+/* tconfig.h == config.h :: target and host configurations are the same */\n+#include \"config.h\"\n+$EOD\n+$ echo \"Created `tconfig.h'.\n $ !\n $ if f$search(\"tm.h\") .nes. \"\" then delete tm.h.*\n-$ copy [.config]vms.h []tm.h\n-$ echo \"Linked `tm.h' to `[.config]vms.h'.\n+$ copy [.config]vax-vms.h []tm.h\n+$ echo \"Linked `tm.h' to `[.config]vax-vms.h'.\n $ !\n $ if f$search(\"md.\") .nes. \"\" then delete md..*\n $ copy [.config]vax.md []md.\n@@ -33,7 +41,7 @@ $search version.c version_string,\"=\"/match=and/output=t.tmp\n $open ifile$ t.tmp\n $read ifile$ line\n $close ifile$\n-$delete/nolog t.tmp;\n+$delete t.tmp;\n $ijk=f$locate(\"\"\"\",line)+1\n $line=f$extract(ijk,f$length(line)-ijk,line)\n $ijk=f$locate(\"\"\"\",line)\n@@ -57,7 +65,7 @@ $write_ident:\n $open ifile$ version.opt/write\n $write ifile$ \"ident=\"+\"\"\"\"+elm+\"\"\"\"\n $close ifile$\n-$pur version.opt/nolog\n+$purge version.opt\n $!\n $!\n $! create linker options files that lists all of the components for all\n@@ -86,7 +94,8 @@ $edit/tpu/nojournal/nosection/nodisplay/command=sys$input\n !\n \tposition (beginning_of (newbuffer));\n \tLOOP\n-\t  range1:=search_quietly(\",\" & ((SPAN(\" \") & LINE_END) | LINE_END), FORWARD, EXACT);\n+\t  range1 := search_quietly(\",\" & ((SPAN(\" \") & LINE_END) | LINE_END),\n+\t\t\t\t   FORWARD, EXACT);\n \t  exitif range1 = 0;\n \t  position (beginning_of (range1));\n \t  erase(range1);\n@@ -119,8 +128,9 @@ $edit/tpu/nojournal/nosection/nodisplay/command=sys$input\n !\n         position (beginning_of (current_buffer)) ;\n \tLOOP\n-          range1 := search_quietly (\"$(\" &  \n-\t     SPAN(\"abcdefghijklmnopqrstuvwxyz_ABCDEFGHIJKLMNOPQRSTUVWXYZ#~0123456789\") & \")\", FORWARD, EXACT) ;\n+\t  range1 := search_quietly (\"$(\" &  \n+      SPAN(\"abcdefghijklmnopqrstuvwxyz_ABCDEFGHIJKLMNOPQRSTUVWXYZ#~0123456789\")\n+\t\t\t\t    & \")\", FORWARD, EXACT) ;\n \t  EXITIF range1 = 0;\n \t  position (beginning_of (range1));\n \t  move_horizontal(2);\n@@ -229,14 +239,17 @@ $edit/tpu/nojournal/nosection/nodisplay/command=sys$input\n !\n \tSET(OUTPUT_FILE, compiler_list, \"compilers.list\");\n       write_file (compiler_list);\n-   generate_option_file(LINE_BEGIN & \"OBJS\" & ((SPAN(\" \") & \"=\") | \"=\"),\"independent.opt\");\n-   generate_option_file(LINE_BEGIN & \"LIB2FUNCS\" & ((SPAN(\" \") & \"=\") | \"=\"),\"libgcc2.list\");\n+   generate_option_file(LINE_BEGIN & \"OBJS\" & ((SPAN(\" \") & \"=\") | \"=\"),\n+\t\t\t\"independent.opt\");\n+   generate_option_file(LINE_BEGIN & \"LIB2FUNCS\" & ((SPAN(\" \") & \"=\") | \"=\"),\n+\t\t\t\"libgcc2.list\");\n !\n ! Now change OBJS in the Makefile, so each language specific options file \n ! does not pick up all of the language independent files.\n !\n    position (beginning_of (mainbuffer));\n-   range1 := search_quietly (LINE_BEGIN & \"OBJS\" & ((SPAN(\" \") & \"=\") | \"=\"), FORWARD, EXACT) ;\n+   range1 := search_quietly (LINE_BEGIN & \"OBJS\" & ((SPAN(\" \") & \"=\") | \"=\"),\n+\t\t\t     FORWARD, EXACT) ;\n    position (end_of (range1));\n    split_line;\n    position (beginning_of (compiler_list));\n@@ -245,17 +258,17 @@ $edit/tpu/nojournal/nosection/nodisplay/command=sys$input\n      exitif cmark = end_of(compiler_list);\n      message(current_line);\n      generate_option_file(LINE_BEGIN & Current_line & ((SPAN(\" \") & \":\") | \":\"),\n-\tcurrent_line+\"-objs.opt\");\n+\t\t\t  current_line+\"-objs.opt\");\n      position (cmark);\n      move_vertical(1);\n    ENDLOOP ;\n    quit ;\n $ echo \"\"\n $!\n-$! Remove excessive versions of the options file...\n+$! Remove excessive versions of the option files...\n $!\n-$purge/nolog *.opt\n-$purge/nolog compilers.list\n+$ purge *.opt\n+$ purge compilers.list,libgcc2.list\n $!\n $!\n $!"}]}