{"sha": "37f30285a934bf6eaf08e102658e3070030556ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdmMzAyODVhOTM0YmY2ZWFmMDhlMTAyNjU4ZTMwNzAwMzA1NTZhYg==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2017-06-09T13:11:52Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2017-06-09T13:11:52Z"}, "message": "Add \"sorry, target cannot support label values\" for nvptx\n\n2017-06-09  Tom de Vries  <tom@codesourcery.com>\n\n\tPR target/80855\n\t* config/nvptx/nvptx.md (define_expand \"mov<QHSDISDFM>\"): Error out with\n\t\"target cannot support label values\" when encountering LABEL_REF.\n\n\t* gcc.target/nvptx/label-values.c: New test.\n\nFrom-SVN: r249060", "tree": {"sha": "bbd3f216baaee1fda79637b290ef9bc32ddc70f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bbd3f216baaee1fda79637b290ef9bc32ddc70f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37f30285a934bf6eaf08e102658e3070030556ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37f30285a934bf6eaf08e102658e3070030556ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37f30285a934bf6eaf08e102658e3070030556ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37f30285a934bf6eaf08e102658e3070030556ab/comments", "author": null, "committer": null, "parents": [{"sha": "051508d769162f11d48b185a253408ffd849ee07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/051508d769162f11d48b185a253408ffd849ee07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/051508d769162f11d48b185a253408ffd849ee07"}], "stats": {"total": 28, "additions": 28, "deletions": 0}, "files": [{"sha": "c61cba39f95e863783f6fa7d64b8a1cb14ec1bd9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37f30285a934bf6eaf08e102658e3070030556ab", "patch": "@@ -1,3 +1,9 @@\n+2017-06-09  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR target/80855\n+\t* config/nvptx/nvptx.md (define_expand \"mov<QHSDISDFM>\"): Error out with\n+\t\"target cannot support label values\" when encountering LABEL_REF.\n+\n 2017-06-09  Martin Liska  <mliska@suse.cz>\n \n \t* tree-profile.c (gimple_gen_ic_profiler): Update comment."}, {"sha": "f2b090594e37caf752491ce4c912b82e0ff44833", "filename": "gcc/config/nvptx/nvptx.md", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2Fconfig%2Fnvptx%2Fnvptx.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2Fconfig%2Fnvptx%2Fnvptx.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.md?ref=37f30285a934bf6eaf08e102658e3070030556ab", "patch": "@@ -254,6 +254,9 @@\n       emit_move_insn (operands[0], tmp);\n       DONE;\n     }\n+\n+  if (GET_CODE (operands[1]) == LABEL_REF)\n+    sorry (\"target cannot support label values\");\n })\n \n (define_insn \"zero_extendqihi2\""}, {"sha": "431e2e8368f606bea2b19f2d8a576a968839bdd4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=37f30285a934bf6eaf08e102658e3070030556ab", "patch": "@@ -1,3 +1,8 @@\n+2017-06-09  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR target/80855\n+\t* gcc.target/nvptx/label-values.c: New test.\n+\n 2017-06-09  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n \n \t* lib/target-supports.exp (check_effective_target_arm_arch_FUNC_ok):"}, {"sha": "350510e961e7c07b1e6c5ad46320a39f00d2be51", "filename": "gcc/testsuite/gcc.target/nvptx/label-values.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Flabel-values.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f30285a934bf6eaf08e102658e3070030556ab/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Flabel-values.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fnvptx%2Flabel-values.c?ref=37f30285a934bf6eaf08e102658e3070030556ab", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-Wno-pedantic\" } */\n+\n+int\n+main (void)\n+{\n+  goto L2;\n+ L1:\n+  return 0;\n+ L2:\n+  {\n+    void *ptr = &&L1; /* { dg-message \"sorry, unimplemented: target cannot support label values\" \"\" } */\n+  }\n+}"}]}