{"sha": "87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODdkMTFjY2M4MjBiNzc5NWM3OTE5YzViMmNhNmEyMDAxYTZjMDQ0Yw==", "commit": {"author": {"name": "Loren J. Rittle", "email": "ljrittle@acm.org", "date": "2004-01-20T01:30:03Z"}, "committer": {"name": "Loren J. Rittle", "email": "ljrittle@gcc.gnu.org", "date": "2004-01-20T01:30:03Z"}, "message": "10063-2.cc: Treat unbuffered.\n\n\t* testsuite/ext/stdio_filebuf/char/10063-2.cc: Treat unbuffered.\n\t* testsuite/ext/stdio_filebuf/char/10063-3.cc: New test.  Like -2 but\n\tuse __gnu_cxx::stdio_sync_filebuf<char> instead; allow buffered stream.\n\nFrom-SVN: r76191", "tree": {"sha": "ee269f938f5886634dbc1786b523101a0602ee17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ee269f938f5886634dbc1786b523101a0602ee17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/comments", "author": null, "committer": null, "parents": [{"sha": "ee395405c57aed41065330c52cd2c85fcc11a1af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee395405c57aed41065330c52cd2c85fcc11a1af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee395405c57aed41065330c52cd2c85fcc11a1af"}], "stats": {"total": 68, "additions": 68, "deletions": 0}, "files": [{"sha": "37889725a597d98a1885d9a99f79f13a7d703c28", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "patch": "@@ -1,3 +1,9 @@\n+2004-01-19  Loren J. Rittle  <ljrittle@acm.org>\n+\n+\t* testsuite/ext/stdio_filebuf/char/10063-2.cc: Treat unbuffered.\n+\t* testsuite/ext/stdio_filebuf/char/10063-3.cc: New test.  Like -2 but\n+\tuse __gnu_cxx::stdio_sync_filebuf<char> instead; allow buffered stream.\n+\n 2004-01-19  Paolo Carlini  <pcarlini@suse.de>\n \n \t* src/debug.cc: Make sure all the names are prefixed with"}, {"sha": "0b6cf9214217cf1d1c86a283bacc3d89fcdbcc17", "filename": "libstdc++-v3/testsuite/ext/stdio_filebuf/char/10063-2.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/libstdc%2B%2B-v3%2Ftestsuite%2Fext%2Fstdio_filebuf%2Fchar%2F10063-2.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/libstdc%2B%2B-v3%2Ftestsuite%2Fext%2Fstdio_filebuf%2Fchar%2F10063-2.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fext%2Fstdio_filebuf%2Fchar%2F10063-2.cc?ref=87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "patch": "@@ -36,6 +36,7 @@ void test2()\n   fbuf.close();\n \n   FILE* file = fopen(\"tmp_10063-2\", \"r\");\n+  setbuf(file, NULL);\n   int c = getc(file);\n   VERIFY(c == '0');\n   c = getc(file);"}, {"sha": "a590898303e29bf4d39092f8257ce4360763c8de", "filename": "libstdc++-v3/testsuite/ext/stdio_filebuf/char/10063-3.cc", "status": "added", "additions": 61, "deletions": 0, "changes": 61, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/libstdc%2B%2B-v3%2Ftestsuite%2Fext%2Fstdio_filebuf%2Fchar%2F10063-3.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87d11ccc820b7795c7919c5b2ca6a2001a6c044c/libstdc%2B%2B-v3%2Ftestsuite%2Fext%2Fstdio_filebuf%2Fchar%2F10063-3.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Fext%2Fstdio_filebuf%2Fchar%2F10063-3.cc?ref=87d11ccc820b7795c7919c5b2ca6a2001a6c044c", "patch": "@@ -0,0 +1,61 @@\n+// Copyright (C) 2004 Free Software Foundation\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 2, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING.  If not, write to the Free\n+// Software Foundation, 59 Temple Place - Suite 330, Boston, MA 02111-1307,\n+// USA.\n+\n+// The ARM simulator does not provide support for \"fstat\", which\n+// causes \"sbumpc\" to return an incorrect value.\n+// { dg-do run { xfail arm-none-elf } }\n+\n+#include <cstdio>\n+#include <fstream>\n+#include <ext/stdio_sync_filebuf.h>\n+#include <testsuite_hooks.h>\n+\n+void test3()\n+{\n+  using namespace std;\n+  bool test __attribute__((unused)) = true;\n+\n+  filebuf fbuf;\n+  fbuf.open(\"tmp_10063-3\", ios_base::out | ios_base::trunc);\n+  fbuf.sputn(\"01234\", 5);\n+  fbuf.close();\n+\n+  FILE* file = fopen(\"tmp_10063-3\", \"r\");\n+  int c = getc(file);\n+  VERIFY(c == '0');\n+  c = getc(file);\n+  VERIFY(c == '1');\n+  {\n+    __gnu_cxx::stdio_sync_filebuf<char> sbuf(file);\n+    c = sbuf.sbumpc();\n+    VERIFY(c == '2');\n+    c = sbuf.sbumpc();\n+    VERIFY(c == '3');\n+    c = sbuf.sbumpc();\n+    VERIFY(c == '4');\n+    c = sbuf.sgetc();\n+    VERIFY(c == EOF);\n+  }\n+  fclose(file);\n+}\n+\n+int main()\n+{\n+  test3();\n+  return 0;\n+}"}]}