{"sha": "788e5f06d4e804dcc9e255fa448ba0c3db1586c4", "node_id": "C_kwDOANBUbNoAKDc4OGU1ZjA2ZDRlODA0ZGNjOWUyNTVmYTQ0OGJhMGMzZGIxNTg2YzQ", "commit": {"author": {"name": "Ronan Desplanques", "email": "desplanques@adacore.com", "date": "2022-10-17T10:00:09Z"}, "committer": {"name": "Marc Poulhi\u00e8s", "email": "poulhies@adacore.com", "date": "2022-11-08T08:34:59Z"}, "message": "ada: Preanalyze classwide contracts as spec expressions\n\nClasswide contracts are \"spec expressions\" as defined in the\ndocumentation in sem.ads. Before this patch, the instances of\nclasswide contracts that are destined to class conditions merging\nwere not preanalyzed as spec expressions. That caused preanalysis to\nemit spurious errors in some cases.\n\ngcc/ada/\n\n\t* contracts.adb (Preanalyze_Condition): Use\n\tPreanalyze_Spec_Expression.", "tree": {"sha": "c22a53c565ffd37dabff388459d5926c29ed7104", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c22a53c565ffd37dabff388459d5926c29ed7104"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/788e5f06d4e804dcc9e255fa448ba0c3db1586c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/788e5f06d4e804dcc9e255fa448ba0c3db1586c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/788e5f06d4e804dcc9e255fa448ba0c3db1586c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/788e5f06d4e804dcc9e255fa448ba0c3db1586c4/comments", "author": {"login": "ronan-d", "id": 14870758, "node_id": "MDQ6VXNlcjE0ODcwNzU4", "avatar_url": "https://avatars.githubusercontent.com/u/14870758?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ronan-d", "html_url": "https://github.com/ronan-d", "followers_url": "https://api.github.com/users/ronan-d/followers", "following_url": "https://api.github.com/users/ronan-d/following{/other_user}", "gists_url": "https://api.github.com/users/ronan-d/gists{/gist_id}", "starred_url": "https://api.github.com/users/ronan-d/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ronan-d/subscriptions", "organizations_url": "https://api.github.com/users/ronan-d/orgs", "repos_url": "https://api.github.com/users/ronan-d/repos", "events_url": "https://api.github.com/users/ronan-d/events{/privacy}", "received_events_url": "https://api.github.com/users/ronan-d/received_events", "type": "User", "site_admin": false}, "committer": {"login": "dkm", "id": 87603, "node_id": "MDQ6VXNlcjg3NjAz", "avatar_url": "https://avatars.githubusercontent.com/u/87603?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dkm", "html_url": "https://github.com/dkm", "followers_url": "https://api.github.com/users/dkm/followers", "following_url": "https://api.github.com/users/dkm/following{/other_user}", "gists_url": "https://api.github.com/users/dkm/gists{/gist_id}", "starred_url": "https://api.github.com/users/dkm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dkm/subscriptions", "organizations_url": "https://api.github.com/users/dkm/orgs", "repos_url": "https://api.github.com/users/dkm/repos", "events_url": "https://api.github.com/users/dkm/events{/privacy}", "received_events_url": "https://api.github.com/users/dkm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c2596d4533389b8898516b444f8464a1720711af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c2596d4533389b8898516b444f8464a1720711af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c2596d4533389b8898516b444f8464a1720711af"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "21f438f90f370b950e89c3cdf736579302703c99", "filename": "gcc/ada/contracts.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/788e5f06d4e804dcc9e255fa448ba0c3db1586c4/gcc%2Fada%2Fcontracts.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/788e5f06d4e804dcc9e255fa448ba0c3db1586c4/gcc%2Fada%2Fcontracts.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fcontracts.adb?ref=788e5f06d4e804dcc9e255fa448ba0c3db1586c4", "patch": "@@ -42,13 +42,13 @@ with Nmake;          use Nmake;\n with Opt;            use Opt;\n with Sem;            use Sem;\n with Sem_Aux;        use Sem_Aux;\n+with Sem_Ch3;        use Sem_Ch3;\n with Sem_Ch6;        use Sem_Ch6;\n with Sem_Ch8;        use Sem_Ch8;\n with Sem_Ch12;       use Sem_Ch12;\n with Sem_Ch13;       use Sem_Ch13;\n with Sem_Disp;       use Sem_Disp;\n with Sem_Prag;       use Sem_Prag;\n-with Sem_Res;        use Sem_Res;\n with Sem_Type;       use Sem_Type;\n with Sem_Util;       use Sem_Util;\n with Sinfo;          use Sinfo;\n@@ -4755,7 +4755,7 @@ package body Contracts is\n          Install_Formals (Subp);\n          Inside_Class_Condition_Preanalysis := True;\n \n-         Preanalyze_And_Resolve (Expr, Standard_Boolean);\n+         Preanalyze_Spec_Expression (Expr, Standard_Boolean);\n \n          Inside_Class_Condition_Preanalysis := False;\n          Remove_Formals (Subp);"}]}