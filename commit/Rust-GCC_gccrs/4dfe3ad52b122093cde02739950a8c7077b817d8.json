{"sha": "4dfe3ad52b122093cde02739950a8c7077b817d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGRmZTNhZDUyYjEyMjA5M2NkZTAyNzM5OTUwYThjNzA3N2I4MTdkOA==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2011-07-13T19:19:35Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2011-07-13T19:19:35Z"}, "message": "spu.c (spu_init_libfuncs): Install __clrsbdi2.\n\n\t* config/spu/spu.c (spu_init_libfuncs): Install __clrsbdi2.\n\t* config/spu/spu.md (\"clrsb<mode>2\"): New expander.\n\nFrom-SVN: r176249", "tree": {"sha": "0721be8077e2a408794af4290c038b455ca94b7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0721be8077e2a408794af4290c038b455ca94b7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4dfe3ad52b122093cde02739950a8c7077b817d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4dfe3ad52b122093cde02739950a8c7077b817d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4dfe3ad52b122093cde02739950a8c7077b817d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4dfe3ad52b122093cde02739950a8c7077b817d8/comments", "author": null, "committer": null, "parents": [{"sha": "dddc67624e835dc20f82346b7a624ea47df88495", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dddc67624e835dc20f82346b7a624ea47df88495", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dddc67624e835dc20f82346b7a624ea47df88495"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "46df27b65027d12abb8cae29500d60ffa49eeb6a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4dfe3ad52b122093cde02739950a8c7077b817d8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4dfe3ad52b122093cde02739950a8c7077b817d8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4dfe3ad52b122093cde02739950a8c7077b817d8", "patch": "@@ -1,3 +1,8 @@\n+2011-07-13  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\t* config/spu/spu.c (spu_init_libfuncs): Install __clrsbdi2.\n+\t* config/spu/spu.md (\"clrsb<mode>2\"): New expander.\n+\n 2011-07-13  Thomas Schwinge  <thomas@schwinge.name>\n \n \t* acinclude.m4 (gcc_GAS_CHECK_FEATURE): Use AS_ECHO instead of echo."}, {"sha": "7d9be5e32369f7d9ce92643ae841581b24b98a02", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4dfe3ad52b122093cde02739950a8c7077b817d8/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4dfe3ad52b122093cde02739950a8c7077b817d8/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=4dfe3ad52b122093cde02739950a8c7077b817d8", "patch": "@@ -5630,6 +5630,7 @@ spu_init_libfuncs (void)\n   set_optab_libfunc (ffs_optab, DImode, \"__ffsdi2\");\n   set_optab_libfunc (clz_optab, DImode, \"__clzdi2\");\n   set_optab_libfunc (ctz_optab, DImode, \"__ctzdi2\");\n+  set_optab_libfunc (clrsb_optab, DImode, \"__clrsbdi2\");\n   set_optab_libfunc (popcount_optab, DImode, \"__popcountdi2\");\n   set_optab_libfunc (parity_optab, DImode, \"__paritydi2\");\n "}, {"sha": "426437ac873a23125e46b160a357b70913553992", "filename": "gcc/config/spu/spu.md", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4dfe3ad52b122093cde02739950a8c7077b817d8/gcc%2Fconfig%2Fspu%2Fspu.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4dfe3ad52b122093cde02739950a8c7077b817d8/gcc%2Fconfig%2Fspu%2Fspu.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.md?ref=4dfe3ad52b122093cde02739950a8c7077b817d8", "patch": "@@ -2232,6 +2232,21 @@\n      operands[5] = spu_const(<MODE>mode, 31);\n   })\n \n+(define_expand \"clrsb<mode>2\"\n+  [(set (match_dup 2)\n+        (gt:VSI (match_operand:VSI 1 \"spu_reg_operand\" \"\") (match_dup 5)))\n+   (set (match_dup 3) (not:VSI (xor:VSI (match_dup 1) (match_dup 2))))\n+   (set (match_dup 4) (clz:VSI (match_dup 3)))\n+   (set (match_operand:VSI 0 \"spu_reg_operand\")\n+        (plus:VSI (match_dup 4) (match_dup 5)))]\n+  \"\"\n+  {\n+     operands[2] = gen_reg_rtx (<MODE>mode);\n+     operands[3] = gen_reg_rtx (<MODE>mode);\n+     operands[4] = gen_reg_rtx (<MODE>mode);\n+     operands[5] = spu_const(<MODE>mode, -1);\n+  })\n+\n (define_expand \"ffs<mode>2\"\n   [(set (match_dup 2)\n \t(neg:VSI (match_operand:VSI 1 \"spu_reg_operand\" \"\")))"}]}