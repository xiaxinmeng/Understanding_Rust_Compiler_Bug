{"sha": "3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2ZlODI0MTRmZTA5Y2UzMGQ1ZGFjMTUzNGI5M2E5OWIzMWUzZTU5YQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-01-24T19:54:11Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2008-01-24T19:54:11Z"}, "message": "re PR c++/34603 (ICE with broken template declaration)\n\n/cp\n2008-01-24  Paolo Carlini  <pcarlini@suse.de>\n\n        PR c++/34603\n        * pt.c (push_template_decl_real): Return error_mark_node in case\n\tof template definition of non-template.\n\n/testsuite\n2008-01-24  Paolo Carlini  <pcarlini@suse.de>\n\n        PR c++/34603\n        * g++.dg/template/crash77.C: New.\n\nFrom-SVN: r131804", "tree": {"sha": "72fbe70357bd20c54af731af390f266897a835c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72fbe70357bd20c54af731af390f266897a835c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/comments", "author": null, "committer": null, "parents": [{"sha": "3371362cb0da76cbc80c8b96a9fb08ed7da34dbf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3371362cb0da76cbc80c8b96a9fb08ed7da34dbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3371362cb0da76cbc80c8b96a9fb08ed7da34dbf"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "d842f7703e342ce520761f044c0dc2b6b35195fe", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "patch": "@@ -1,10 +1,17 @@\n+2008-01-24  Paolo Carlini  <pcarlini@suse.de>\n+\n+        PR c++/34603\n+        * pt.c (push_template_decl_real): Return error_mark_node in case\n+\tof template definition of non-template.\n+\n 2008-01-24  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/34913\n \t* decl2.c (is_late_template_attribute): Defer any attribute with \n \tdependent args.  Also defer type attributes if the type is dependent.\n \n-2008-01-22  Jakub Jelinek  <jakub@redhat.com>, Alexandre Oliva  <aoliva@redhat.com>\n+2008-01-22  Jakub Jelinek  <jakub@redhat.com>\n+\t    Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR c++/33984\n \t* call.c (reference_binding): For bitfields use the declared bitfield"}, {"sha": "56fcd4db47dd9ec25b3ca239b0fda5fb0974b645", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "patch": "@@ -1,6 +1,6 @@\n /* Handle parameterized types (templates) for GNU C++.\n    Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-   2001, 2002, 2003, 2004, 2005, 2007  Free Software Foundation, Inc.\n+   2001, 2002, 2003, 2004, 2005, 2007, 2008  Free Software Foundation, Inc.\n    Written by Ken Raeburn (raeburn@cygnus.com) while at Watchmaker Computing.\n    Rewritten by Jason Merrill (jason@cygnus.com).\n \n@@ -3977,7 +3977,7 @@ push_template_decl_real (tree decl, bool is_friend)\n       if (!tinfo)\n \t{\n \t  error (\"template definition of non-template %q#D\", decl);\n-\t  return decl;\n+\t  return error_mark_node;\n \t}\n \n       tmpl = TI_TEMPLATE (tinfo);"}, {"sha": "70f1e0d5c1d9b88ebb5eaa78646f46158fb9fa10", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "patch": "@@ -1,3 +1,8 @@\n+2008-01-24  Paolo Carlini  <pcarlini@suse.de>\n+\n+        PR c++/34603\n+        * g++.dg/template/crash77.C: New.\n+\n 2008-01-24  Uros Bizjak  <ubizjak@gmail.com>\n \n \tPR target/34856"}, {"sha": "b4d6e8f4a673aa5509c9da5df84e3894c4077be9", "filename": "gcc/testsuite/g++.dg/template/crash77.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash77.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3fe82414fe09ce30d5dac1534b93a99b31e3e59a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash77.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash77.C?ref=3fe82414fe09ce30d5dac1534b93a99b31e3e59a", "patch": "@@ -0,0 +1,5 @@\n+// PR c++/34603\n+\n+template<typename> struct A; // { dg-error \"declaration\" }\n+\n+template<typename T> A<T>::A( struct A; // { dg-error \"definition|expected|incomplete\" }"}]}