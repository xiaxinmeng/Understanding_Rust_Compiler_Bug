{"sha": "46ab5b6edea83d9eb67a83572171493a8e2283b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZhYjViNmVkZWE4M2Q5ZWI2N2E4MzU3MjE3MTQ5M2E4ZTIyODNiNQ==", "commit": {"author": {"name": "Kugan Vivekanandarajah", "email": "kuganv@linaro.org", "date": "2016-06-06T23:41:26Z"}, "committer": {"name": "Kugan Vivekanandarajah", "email": "kugan@gcc.gnu.org", "date": "2016-06-06T23:41:26Z"}, "message": "re PR target/71281 (ICE on gcc trunk on knl, wsm, ivb and bdw targets (tree-ssa-reassoc))\n\ngcc/ChangeLog:\n\n2016-06-07  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\tPR middle-end/71281\n\t* tree-ssa-reassoc.c (reassociate_bb): Set uid for negate stmt.\n\n\ngcc/testsuite/ChangeLog:\n\n2016-06-07  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\tPR middle-end/71281\n\t* g++.dg/torture/pr71281.C: New test.\n\nFrom-SVN: r237157", "tree": {"sha": "a14b0c7e01c7004c5b9a1f779c038c1b2f341de7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a14b0c7e01c7004c5b9a1f779c038c1b2f341de7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46ab5b6edea83d9eb67a83572171493a8e2283b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46ab5b6edea83d9eb67a83572171493a8e2283b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46ab5b6edea83d9eb67a83572171493a8e2283b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46ab5b6edea83d9eb67a83572171493a8e2283b5/comments", "author": null, "committer": null, "parents": [{"sha": "c7ca8ef875201d4eaa685edbb31fc97eaaa903d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7ca8ef875201d4eaa685edbb31fc97eaaa903d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7ca8ef875201d4eaa685edbb31fc97eaaa903d8"}], "stats": {"total": 74, "additions": 74, "deletions": 0}, "files": [{"sha": "d586f9b3cf1c32e11ec7c3de4ec71dd43f3fba76", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46ab5b6edea83d9eb67a83572171493a8e2283b5", "patch": "@@ -1,3 +1,8 @@\n+2016-06-07  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\tPR middle-end/71281\n+\t* tree-ssa-reassoc.c (reassociate_bb): Set uid for negate stmt.\n+\n 2016-06-07  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/i386.h (enum ix86_enitity): Add X86_DIRFLAG."}, {"sha": "81d2fd52f1a2dfb2b334edd7bc791b222dfbf834", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=46ab5b6edea83d9eb67a83572171493a8e2283b5", "patch": "@@ -1,3 +1,8 @@\n+2016-06-07  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\tPR middle-end/71281\n+\t* g++.dg/torture/pr71281.C: New test.\n+\n 2016-06-06  Marek Polacek  <polacek@redhat.com>\n \n \tPR c/71362"}, {"sha": "7d429a95b1ba6c57ef7a2426a98bae52629c3145", "filename": "gcc/testsuite/g++.dg/torture/pr71281.C", "status": "added", "additions": 63, "deletions": 0, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr71281.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr71281.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fpr71281.C?ref=46ab5b6edea83d9eb67a83572171493a8e2283b5", "patch": "@@ -0,0 +1,63 @@\n+// PR middle-end/71281\n+// { dg-do compile }\n+// { dg-additional-options \"-std=c++11 -Ofast\" }\n+\n+\n+template <typename> struct A;\n+template <typename _Tp> struct A<_Tp *> { typedef _Tp reference; };\n+\n+template <typename _Iterator> class B {\n+public:\n+  typename A<_Iterator>::reference operator*();\n+};\n+\n+template <typename> class C;\n+template <typename> struct D;\n+\n+template <typename _Tp> struct D<C<_Tp>> {\n+    using value_type = _Tp;\n+    using const_pointer = _Tp *;\n+    template <typename _Up> using rebind_alloc = C<_Up>;\n+};\n+\n+template <typename _Alloc> struct __alloc_traits : D<_Alloc> {\n+    typedef D<_Alloc> _Base_type;\n+    typedef typename _Base_type::value_type &reference;\n+    template <typename _Tp> struct F {\n+\ttypedef typename _Base_type::template rebind_alloc<_Tp> other;\n+    };\n+};\n+\n+template <typename _Tp, typename _Alloc> struct G {\n+    typedef typename __alloc_traits<_Alloc>::template F<_Tp>::other\n+      _Tp_alloc_type;\n+};\n+\n+int a, b;\n+long d[1][1][1];\n+void fn1() __attribute__((__noreturn__));\n+template <typename _Tp, typename _Alloc = C<_Tp>> class H {\n+    typedef __alloc_traits<typename G<_Tp, _Alloc>::_Tp_alloc_type> _Alloc_traits;\n+    typedef typename _Alloc_traits::reference reference;\n+\n+public:\n+    B<typename _Alloc_traits::const_pointer> m_fn1();\n+    long m_fn2();\n+    reference operator[](unsigned);\n+    reference m_fn3(unsigned){\n+\tif (m_fn2())\n+\t  fn1();\n+    }\n+};\n+\n+H<H<H<unsigned>>> c;\n+void fn2() {\n+    H<unsigned, C<int>> e;\n+    for (int f = 1;;)\n+      for (int g = 0;;)\n+\tfor (int h = 0;;)\n+\t  {\n+\t    *d[0][h] =\n+\t      c.m_fn3(f)[0][g] * a + -*(e).m_fn1() * b + (*c[f].m_fn1()).m_fn3(g);\n+\t  }\n+}"}, {"sha": "096b24dc1d37d45cc9925b08f9fe38bff49309ec", "filename": "gcc/tree-ssa-reassoc.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2Ftree-ssa-reassoc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46ab5b6edea83d9eb67a83572171493a8e2283b5/gcc%2Ftree-ssa-reassoc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-reassoc.c?ref=46ab5b6edea83d9eb67a83572171493a8e2283b5", "patch": "@@ -5387,6 +5387,7 @@ reassociate_bb (basic_block bb)\n \t\t  gimple_set_lhs (stmt, tmp);\n \t\t  gassign *neg_stmt = gimple_build_assign (lhs, NEGATE_EXPR,\n \t\t\t\t\t\t\t   tmp);\n+\t\t  gimple_set_uid (neg_stmt, gimple_uid (stmt));\n \t\t  gimple_stmt_iterator gsi = gsi_for_stmt (stmt);\n \t\t  gsi_insert_after (&gsi, neg_stmt, GSI_NEW_STMT);\n \t\t  update_stmt (stmt);"}]}