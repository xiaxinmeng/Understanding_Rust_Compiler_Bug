{"sha": "d61ed91ece9664bb57afe5766fef573a9a2d9944", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDYxZWQ5MWVjZTk2NjRiYjU3YWZlNTc2NmZlZjU3M2E5YTJkOTk0NA==", "commit": {"author": {"name": "Maxim Ostapenko", "email": "m.ostapenko@samsung.com", "date": "2016-11-30T12:31:07Z"}, "committer": {"name": "Maxim Ostapenko", "email": "chefmax@gcc.gnu.org", "date": "2016-11-30T12:31:07Z"}, "message": "re PR sanitizer/78532 (libsanitizer fails to build on sparc64-linux-gnu)\n\n\tPR sanitizer/78532\n\t* sanitizer_common/sanitizer_platform_limits_posix.h\n\t(__sanitizer_sigaction): Adjust for sparc targets and various Glibc\n\tversions.\n\nFrom-SVN: r243014", "tree": {"sha": "323edd1bfb815b67cb95e72a525b4632fc550776", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/323edd1bfb815b67cb95e72a525b4632fc550776"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d61ed91ece9664bb57afe5766fef573a9a2d9944", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d61ed91ece9664bb57afe5766fef573a9a2d9944", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d61ed91ece9664bb57afe5766fef573a9a2d9944", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d61ed91ece9664bb57afe5766fef573a9a2d9944/comments", "author": null, "committer": null, "parents": [{"sha": "8fef5ca9ed26884e99240897ae54cca25c170438", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8fef5ca9ed26884e99240897ae54cca25c170438", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8fef5ca9ed26884e99240897ae54cca25c170438"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "e691f67b483e6f5809f0a0711cc25266a078c4e5", "filename": "libsanitizer/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d61ed91ece9664bb57afe5766fef573a9a2d9944/libsanitizer%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d61ed91ece9664bb57afe5766fef573a9a2d9944/libsanitizer%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2FChangeLog?ref=d61ed91ece9664bb57afe5766fef573a9a2d9944", "patch": "@@ -1,3 +1,10 @@\n+2016-11-30  Maxim Ostapenko  <m.ostapenko@samsung.com>\n+\n+\tPR sanitizer/78532\n+\t* sanitizer_common/sanitizer_platform_limits_posix.h\n+\t(__sanitizer_sigaction): Adjust for sparc targets and various Glibc\n+\tversions.\n+\n 2016-11-29  Markus Trippelsdorf  <markus@trippelsdorf.de>\n \n \t* LOCAL_PATCHES: Remove r242480."}, {"sha": "066bf41ffef7979111732da137253874b91de6c2", "filename": "libsanitizer/sanitizer_common/sanitizer_platform_limits_posix.h", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d61ed91ece9664bb57afe5766fef573a9a2d9944/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d61ed91ece9664bb57afe5766fef573a9a2d9944/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libsanitizer%2Fsanitizer_common%2Fsanitizer_platform_limits_posix.h?ref=d61ed91ece9664bb57afe5766fef573a9a2d9944", "patch": "@@ -25,6 +25,10 @@\n # define GET_LINK_MAP_BY_DLOPEN_HANDLE(handle) ((link_map*)(handle))\n #endif  // !SANITIZER_FREEBSD\n \n+#ifndef __GLIBC_PREREQ\n+#define __GLIBC_PREREQ(x, y) 0\n+#endif\n+\n namespace __sanitizer {\n   extern unsigned struct_utsname_sz;\n   extern unsigned struct_stat_sz;\n@@ -628,7 +632,14 @@ namespace __sanitizer {\n #endif\n #ifndef __mips__\n #if defined(__sparc__)\n+#if __GLIBC_PREREQ (2, 20)\n+    // On sparc glibc 2.19 and earlier sa_flags was unsigned long, and\n+    // __glibc_reserved0 didn't exist.\n+    int __glibc_reserved0;\n+    int sa_flags;\n+#else\n     unsigned long sa_flags;\n+#endif\n #else\n     int sa_flags;\n #endif"}]}