{"sha": "77d455ee81ec3a23f8b20259a31ab963716f8e82", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdkNDU1ZWU4MWVjM2EyM2Y4YjIwMjU5YTMxYWI5NjM3MTZmOGU4Mg==", "commit": {"author": {"name": "Harald Anlauf", "email": "anlauf@gmx.de", "date": "2020-06-25T18:34:48Z"}, "committer": {"name": "Harald Anlauf", "email": "anlauf@gmx.de", "date": "2020-06-25T18:34:48Z"}, "message": "PR fortran/95828 - Buffer overflows with SELECT RANK\n\nWith SELECT RANK, name mangling results in long internal symbols that\noverflows internal buffers.  Fix that.\n\ngcc/fortran/\n\tPR fortran/95828\n\t* match.c (select_rank_set_tmp): Enlarge internal buffer used in\n\tgenerating a mangled name.\n\t* resolve.c (resolve_select_rank): Likewise.", "tree": {"sha": "f037fd0dd26fa855ca2af282c2ea47a534cf3a06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f037fd0dd26fa855ca2af282c2ea47a534cf3a06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77d455ee81ec3a23f8b20259a31ab963716f8e82", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77d455ee81ec3a23f8b20259a31ab963716f8e82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77d455ee81ec3a23f8b20259a31ab963716f8e82", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77d455ee81ec3a23f8b20259a31ab963716f8e82/comments", "author": {"login": "harald-anlauf", "id": 90786862, "node_id": "MDQ6VXNlcjkwNzg2ODYy", "avatar_url": "https://avatars.githubusercontent.com/u/90786862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harald-anlauf", "html_url": "https://github.com/harald-anlauf", "followers_url": "https://api.github.com/users/harald-anlauf/followers", "following_url": "https://api.github.com/users/harald-anlauf/following{/other_user}", "gists_url": "https://api.github.com/users/harald-anlauf/gists{/gist_id}", "starred_url": "https://api.github.com/users/harald-anlauf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harald-anlauf/subscriptions", "organizations_url": "https://api.github.com/users/harald-anlauf/orgs", "repos_url": "https://api.github.com/users/harald-anlauf/repos", "events_url": "https://api.github.com/users/harald-anlauf/events{/privacy}", "received_events_url": "https://api.github.com/users/harald-anlauf/received_events", "type": "User", "site_admin": false}, "committer": {"login": "harald-anlauf", "id": 90786862, "node_id": "MDQ6VXNlcjkwNzg2ODYy", "avatar_url": "https://avatars.githubusercontent.com/u/90786862?v=4", "gravatar_id": "", "url": "https://api.github.com/users/harald-anlauf", "html_url": "https://github.com/harald-anlauf", "followers_url": "https://api.github.com/users/harald-anlauf/followers", "following_url": "https://api.github.com/users/harald-anlauf/following{/other_user}", "gists_url": "https://api.github.com/users/harald-anlauf/gists{/gist_id}", "starred_url": "https://api.github.com/users/harald-anlauf/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/harald-anlauf/subscriptions", "organizations_url": "https://api.github.com/users/harald-anlauf/orgs", "repos_url": "https://api.github.com/users/harald-anlauf/repos", "events_url": "https://api.github.com/users/harald-anlauf/events{/privacy}", "received_events_url": "https://api.github.com/users/harald-anlauf/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "35a335a159216548fc77263ac5df71ff29d3f448", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35a335a159216548fc77263ac5df71ff29d3f448", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35a335a159216548fc77263ac5df71ff29d3f448"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "b011634792e5c6b00d5bce5f29835c8b4ac19f7d", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d455ee81ec3a23f8b20259a31ab963716f8e82/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d455ee81ec3a23f8b20259a31ab963716f8e82/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=77d455ee81ec3a23f8b20259a31ab963716f8e82", "patch": "@@ -6496,7 +6496,7 @@ static void\n select_rank_set_tmp (gfc_typespec *ts, int *case_value)\n {\n   char name[2 * GFC_MAX_SYMBOL_LEN];\n-  char tname[GFC_MAX_SYMBOL_LEN];\n+  char tname[GFC_MAX_SYMBOL_LEN + 7];\n   gfc_symtree *tmp;\n   gfc_symbol *selector = select_type_stack->selector;\n   gfc_symbol *sym;"}, {"sha": "6fa34caec5499ff514df9e93a8ffa22092b589d1", "filename": "gcc/fortran/resolve.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d455ee81ec3a23f8b20259a31ab963716f8e82/gcc%2Ffortran%2Fresolve.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d455ee81ec3a23f8b20259a31ab963716f8e82/gcc%2Ffortran%2Fresolve.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fresolve.c?ref=77d455ee81ec3a23f8b20259a31ab963716f8e82", "patch": "@@ -9635,7 +9635,7 @@ resolve_select_rank (gfc_code *code, gfc_namespace *old_ns)\n   gfc_namespace *ns;\n   gfc_code *body, *new_st, *tail;\n   gfc_case *c;\n-  char tname[GFC_MAX_SYMBOL_LEN];\n+  char tname[GFC_MAX_SYMBOL_LEN + 7];\n   char name[2 * GFC_MAX_SYMBOL_LEN];\n   gfc_symtree *st;\n   gfc_expr *selector_expr = NULL;"}, {"sha": "e85b2f11869c7dea3b51ccc8e612bec9d6f7e3f5", "filename": "gcc/testsuite/gfortran.dg/pr95828.f90", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77d455ee81ec3a23f8b20259a31ab963716f8e82/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95828.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77d455ee81ec3a23f8b20259a31ab963716f8e82/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95828.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95828.f90?ref=77d455ee81ec3a23f8b20259a31ab963716f8e82", "patch": "@@ -0,0 +1,21 @@\n+! { dg-do compile }\n+! { dg-options \"-fsecond-underscore\" }\n+! PR fortran/95828 - ICE in resolve_select_rank, at fortran/resolve.c:9774\n+\n+module m2345678901234567890123456789012345678901234567890123456789_123\n+  type t2345678901234567890123456789012345678901234567890123456789_123\n+  end type\n+contains\n+  subroutine s2345678901234567890123456789012345678901234567890123456789_123 &\n+            (x2345678901234567890123456789012345678901234567890123456789_123)\n+    type    (t2345678901234567890123456789012345678901234567890123456789_123) :: &\n+             x2345678901234567890123456789012345678901234567890123456789_123(..)\n+\n+    select rank (y2345678901234567890123456789012345678901234567890123456789_123 &\n+              => x2345678901234567890123456789012345678901234567890123456789_123)\n+    rank (2)\n+    rank (3)\n+    rank default\n+    end select\n+  end\n+end"}]}