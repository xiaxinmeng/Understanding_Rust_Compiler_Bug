{"sha": "e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTUxNTQ2ZjhiZjM2MGQzZTRmOWVjMzFlYmM5OThhNGRlZGUzMGY5NA==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2004-11-22T22:06:16Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2004-11-22T22:06:16Z"}, "message": "tree-cfg.c (tree_execute_on_shrinking_pred): New.\n\n\t* tree-cfg.c (tree_execute_on_shrinking_pred): New.\n\t(tree_cfg_hooks): Use it.\n\t* tree-ssa.c (ssa_remove_edge): Don't call remove_phi_args.\n\t(ssa_redirect_edge): Don't call remove_phi_arg_num.\n\nFrom-SVN: r91036", "tree": {"sha": "5631d03c9b72d04b8e2de7a6ae285c500d9cb104", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5631d03c9b72d04b8e2de7a6ae285c500d9cb104"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/comments", "author": null, "committer": null, "parents": [{"sha": "d9d4706fa5e5e9db60e0d6a4ad742928f07042dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9d4706fa5e5e9db60e0d6a4ad742928f07042dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9d4706fa5e5e9db60e0d6a4ad742928f07042dc"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "440e813d32bd5cc64557b7f3e75b3926be9324dd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "patch": "@@ -24,6 +24,11 @@\n \t(cfg_layout_rtl_cfg_hook): Likewise.\n \t* tree-cfg.c (tree_cfg_hooks): Likewise.\n \n+\t* tree-cfg.c (tree_execute_on_shrinking_pred): New.\n+\t(tree_cfg_hooks): Use it.\n+\t* tree-ssa.c (ssa_remove_edge): Don't call remove_phi_args.\n+\t(ssa_redirect_edge): Don't call remove_phi_arg_num.\n+\n 2004-11-23  Ben Elliston  <bje@au.ibm.com>\n \n \t* doc/cfg.texi (Maintaining the CFG): Use @ftable instead of"}, {"sha": "b7097ebce0773a75ec2c7c4fc84005c042ce7cea", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "patch": "@@ -5339,6 +5339,16 @@ tree_purge_all_dead_eh_edges (bitmap blocks)\n   return changed;\n }\n \n+/* This function is called immediately before edge E is removed from\n+   the edge vector E->dest->preds.  */\n+\n+static void\n+tree_execute_on_shrinking_pred (edge e)\n+{\n+  if (phi_nodes (e->dest))\n+    remove_phi_args (e);\n+}\n+\n struct cfg_hooks tree_cfg_hooks = {\n   \"tree\",\n   tree_verify_flow_info,\n@@ -5362,7 +5372,7 @@ struct cfg_hooks tree_cfg_hooks = {\n   tree_block_ends_with_condjump_p, /* block_ends_with_condjump_p */\n   tree_flow_call_edges_add,     /* flow_call_edges_add */\n   NULL,\t/* execute_on_growing_pred */\n-  NULL, /* execute_on_shrinking_pred */\n+  tree_execute_on_shrinking_pred, /* execute_on_shrinking_pred */\n };\n \n "}, {"sha": "14a8b90398175d6bb94625a56dd94a866882fce2", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 0, "deletions": 5, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e51546f8bf360d3e4f9ec31ebc998a4dede30f94/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=e51546f8bf360d3e4f9ec31ebc998a4dede30f94", "patch": "@@ -53,9 +53,6 @@ Boston, MA 02111-1307, USA.  */\n void\n ssa_remove_edge (edge e)\n {\n-  /* Remove all PHI arguments for E.  */\n-  remove_phi_args (e);\n-\n   remove_edge (e);\n }\n \n@@ -85,8 +82,6 @@ ssa_redirect_edge (edge e, basic_block dest)\n       node = build_tree_list (dst, src);\n       *last = node;\n       last = &TREE_CHAIN (node);\n-\n-      remove_phi_arg_num (phi, i);\n     }\n \n   e = redirect_edge_succ_nodup (e, dest);"}]}