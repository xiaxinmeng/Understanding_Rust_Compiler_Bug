{"sha": "94a98e801a6889e791aee63fcdbb6ee173d0259e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTRhOThlODAxYTY4ODllNzkxYWVlNjNmY2RiYjZlZTE3M2QwMjU5ZQ==", "commit": {"author": {"name": "Ed Schonberg", "email": "schonberg@adacore.com", "date": "2018-10-09T15:04:58Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-10-09T15:04:58Z"}, "message": "[Ada] Preserve Do_Range_Check flags in SPARK mode\n\n2018-10-09  Ed Schonberg  <schonberg@adacore.com>\n\ngcc/ada/\n\n\t* checks.adb (Apply_Type_Conversion_Checks): Use GNATprove_Mode\n\trather than SPARK_mode in order to preserve the Do_Range_Check\n\tflag for verification purposes.\n\nFrom-SVN: r264961", "tree": {"sha": "e8b3ed61cd25937d2f439f3e254621e48d2d3756", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8b3ed61cd25937d2f439f3e254621e48d2d3756"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/94a98e801a6889e791aee63fcdbb6ee173d0259e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94a98e801a6889e791aee63fcdbb6ee173d0259e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/94a98e801a6889e791aee63fcdbb6ee173d0259e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/94a98e801a6889e791aee63fcdbb6ee173d0259e/comments", "author": {"login": "Edschonberg", "id": 6352375, "node_id": "MDQ6VXNlcjYzNTIzNzU=", "avatar_url": "https://avatars.githubusercontent.com/u/6352375?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Edschonberg", "html_url": "https://github.com/Edschonberg", "followers_url": "https://api.github.com/users/Edschonberg/followers", "following_url": "https://api.github.com/users/Edschonberg/following{/other_user}", "gists_url": "https://api.github.com/users/Edschonberg/gists{/gist_id}", "starred_url": "https://api.github.com/users/Edschonberg/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Edschonberg/subscriptions", "organizations_url": "https://api.github.com/users/Edschonberg/orgs", "repos_url": "https://api.github.com/users/Edschonberg/repos", "events_url": "https://api.github.com/users/Edschonberg/events{/privacy}", "received_events_url": "https://api.github.com/users/Edschonberg/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0ffbef9f3553b6f9841f01ac5ff61850af63b219", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ffbef9f3553b6f9841f01ac5ff61850af63b219", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ffbef9f3553b6f9841f01ac5ff61850af63b219"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "54da439d226d7c69b9645688313b84b791e53ede", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94a98e801a6889e791aee63fcdbb6ee173d0259e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94a98e801a6889e791aee63fcdbb6ee173d0259e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=94a98e801a6889e791aee63fcdbb6ee173d0259e", "patch": "@@ -1,3 +1,9 @@\n+2018-10-09  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* checks.adb (Apply_Type_Conversion_Checks): Use GNATprove_Mode\n+\trather than SPARK_mode in order to preserve the Do_Range_Check\n+\tflag for verification purposes.\n+\n 2018-10-09  Ed Schonberg  <schonberg@adacore.com>\n \n \t* exp_aggr.adb (Expand_Array_Aggregate): If it is not possible"}, {"sha": "61768865ce140e55d42433508e8598f401d1e542", "filename": "gcc/ada/checks.adb", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/94a98e801a6889e791aee63fcdbb6ee173d0259e/gcc%2Fada%2Fchecks.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/94a98e801a6889e791aee63fcdbb6ee173d0259e/gcc%2Fada%2Fchecks.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fchecks.adb?ref=94a98e801a6889e791aee63fcdbb6ee173d0259e", "patch": "@@ -3555,9 +3555,8 @@ package body Checks is\n                   --  in SPARK_Mode, where the explicit constraint check will\n                   --  not be generated.\n \n-                  if SPARK_Mode = On\n-                    or else (not Is_Fixed_Point_Type (Expr_Type)\n-                              and then not Is_Fixed_Point_Type (Target_Type))\n+                  if GNATprove_Mode\n+                    or else not Is_Fixed_Point_Type (Expr_Type)\n                   then\n                      Apply_Scalar_Range_Check\n                        (Expr, Target_Type, Fixed_Int => Conv_OK);"}]}