{"sha": "625afa230c955936b243d17d23ead4be25c07c3a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjI1YWZhMjMwYzk1NTkzNmIyNDNkMTdkMjNlYWQ0YmUyNWMwN2MzYQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2012-09-03T14:40:17Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2012-09-03T14:40:17Z"}, "message": "re PR bootstrap/54138 (configuring --without-cloog but executable links against system cloog)\n\n2012-09-03  Richard Guenther  <rguenther@suse.de>\n\n\tPR bootstrap/54138\n\t* configure.ac: Re-organize ISL / CLOOG checks to allow\n\tdisabling with either --without-isl or --without-cloog.\n\t* configure: Regenerated.\n\t* config/cloog.m4: Adjust.\n\t* config/isl.m4: Adjust.\n\nFrom-SVN: r190895", "tree": {"sha": "3a5a65ed5fc1c1e9168d27f41dd6aa3d87677120", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3a5a65ed5fc1c1e9168d27f41dd6aa3d87677120"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/625afa230c955936b243d17d23ead4be25c07c3a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/625afa230c955936b243d17d23ead4be25c07c3a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/625afa230c955936b243d17d23ead4be25c07c3a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/625afa230c955936b243d17d23ead4be25c07c3a/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bda2b772170fcafd0adbcc1c022373f8247a7be7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bda2b772170fcafd0adbcc1c022373f8247a7be7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bda2b772170fcafd0adbcc1c022373f8247a7be7"}], "stats": {"total": 184, "additions": 104, "deletions": 80}, "files": [{"sha": "4e1a2a0b6f6b61e2214ff13edf9d151b084c5f19", "filename": "ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625afa230c955936b243d17d23ead4be25c07c3a/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625afa230c955936b243d17d23ead4be25c07c3a/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=625afa230c955936b243d17d23ead4be25c07c3a", "patch": "@@ -1,3 +1,10 @@\n+2012-09-03  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR bootstrap/54138\n+\t* configure.ac: Re-organize ISL / CLOOG checks to allow\n+\tdisabling with either --without-isl or --without-cloog.\n+\t* configure: Regenerated.\n+\n 2012-09-03  Georg-Johann Lay  <avr@gjlay.de>\n \n \t* configure.ac (noconfigdirs,target=avr): Add target-libquadmath."}, {"sha": "90008a5bca90aa583110738e0f2e99132fd36efc", "filename": "config/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625afa230c955936b243d17d23ead4be25c07c3a/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625afa230c955936b243d17d23ead4be25c07c3a/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=625afa230c955936b243d17d23ead4be25c07c3a", "patch": "@@ -1,3 +1,9 @@\n+2012-09-03  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR bootstrap/54138\n+\t* config/cloog.m4: Adjust for toplevel reorg.\n+\t* config/isl.m4: Adjust.\n+\n 2012-08-26  Art Haas <ahaas@impactweather.com>\n \n \t* cloog.m4 (CLOOG_INIT_FLAGS): Use = instead of == in test."}, {"sha": "a92ef2ea7bd7e615fd8e86e73eeb861ec8550e2c", "filename": "config/cloog.m4", "status": "modified", "additions": 1, "deletions": 11, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625afa230c955936b243d17d23ead4be25c07c3a/config%2Fcloog.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625afa230c955936b243d17d23ead4be25c07c3a/config%2Fcloog.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fcloog.m4?ref=625afa230c955936b243d17d23ead4be25c07c3a", "patch": "@@ -22,12 +22,6 @@\n # Initialize clooglibs/clooginc according to the user input.\n AC_DEFUN([CLOOG_INIT_FLAGS],\n [\n-  AC_ARG_WITH(cloog,\n-    [AS_HELP_STRING(\n-      [--with-cloog=PATH],\n-      [Specify prefix directory for the installed CLooG-PPL package.\n-       Equivalent to --with-cloog-include=PATH/include\n-       plus --with-cloog-lib=PATH/lib])])\n   AC_ARG_WITH([cloog-include],\n     [AS_HELP_STRING(\n       [--with-cloog-include=PATH],\n@@ -72,11 +66,7 @@ AC_DEFUN([CLOOG_INIT_FLAGS],\n   fi\n \n   clooginc=\"-DCLOOG_INT_GMP ${clooginc}\"\n-  clooglibs=\"${clooglibs} -lcloog-isl ${isllibs}\"\n-\n-  dnl Flags needed for CLOOG\n-  AC_SUBST(clooglibs)\n-  AC_SUBST(clooginc)\n+  clooglibs=\"${clooglibs} -lcloog-isl ${isllibs} -lisl\"\n ]\n )\n "}, {"sha": "ba3fa1b7f83c2d2c2d8eb0038ec0426c1fda343f", "filename": "config/isl.m4", "status": "modified", "additions": 0, "deletions": 12, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625afa230c955936b243d17d23ead4be25c07c3a/config%2Fisl.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625afa230c955936b243d17d23ead4be25c07c3a/config%2Fisl.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fisl.m4?ref=625afa230c955936b243d17d23ead4be25c07c3a", "patch": "@@ -23,12 +23,6 @@\n # Initialize isllibs/islinc according to the user input.\n AC_DEFUN([ISL_INIT_FLAGS],\n [\n-  AC_ARG_WITH(isl,\n-    [AS_HELP_STRING(\n-      [--with-isl=PATH],\n-      [Specify prefix directory for the installed ISL package.\n-       Equivalent to --with-isl-include=PATH/include\n-       plus --with-isl-lib=PATH/lib])])\n   AC_ARG_WITH([isl-include],\n     [AS_HELP_STRING(\n       [--with-isl-include=PATH],\n@@ -73,12 +67,6 @@ AC_DEFUN([ISL_INIT_FLAGS],\n     islinc='-I$$r/$(HOST_SUBDIR)/isl/include -I$$s/isl/include'\n     ENABLE_ISL_CHECK=no\n   fi\n-\n-  isllibs=\"${isllibs} -lisl\"\n-\n-  dnl Flags needed for ISL\n-  AC_SUBST(isllibs)\n-  AC_SUBST(islinc)\n ]\n )\n "}, {"sha": "0f655b8640b77f53080ec249f4a059fb15bd0625", "filename": "configure", "status": "modified", "additions": 38, "deletions": 32, "changes": 70, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625afa230c955936b243d17d23ead4be25c07c3a/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625afa230c955936b243d17d23ead4be25c07c3a/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=625afa230c955936b243d17d23ead4be25c07c3a", "patch": "@@ -646,7 +646,6 @@ extra_host_libiberty_configure_flags\n clooginc\n clooglibs\n islinc\n-isllibs\n poststage1_ldflags\n poststage1_libs\n stage1_libs\n@@ -768,11 +767,11 @@ with_stage1_ldflags\n with_stage1_libs\n with_boot_libs\n with_boot_ldflags\n+with_cloog\n with_isl\n with_isl_include\n with_isl_lib\n enable_isl_version_check\n-with_cloog\n with_cloog_include\n with_cloog_lib\n enable_cloog_version_check\n@@ -1521,16 +1520,16 @@ Optional Packages:\n   --with-boot-libs=LIBS   libraries for stage2 and later\n   --with-boot-ldflags=FLAGS\n                           linker flags for stage2 and later\n+  --with-cloog=PATH       Specify prefix directory for the installed CLooG-ISL\n+                          package. Equivalent to\n+                          --with-cloog-include=PATH/include plus\n+                          --with-cloog-lib=PATH/lib\n   --with-isl=PATH         Specify prefix directory for the installed ISL\n                           package. Equivalent to\n                           --with-isl-include=PATH/include plus\n                           --with-isl-lib=PATH/lib\n   --with-isl-include=PATH Specify directory for installed ISL include files\n   --with-isl-lib=PATH     Specify the directory for the installed ISL library\n-  --with-cloog=PATH       Specify prefix directory for the installed CLooG-PPL\n-                          package. Equivalent to\n-                          --with-cloog-include=PATH/include plus\n-                          --with-cloog-lib=PATH/lib\n   --with-cloog-include=PATH\n                           Specify directory for installed CLooG include files\n   --with-cloog-lib=PATH   Specify the directory for the installed CLooG\n@@ -5609,7 +5608,15 @@ fi\n \n \n \n-# Check for ISL\n+# GCC GRAPHITE dependences, ISL and CLOOG which in turn requires ISL.\n+# Basic setup is inlined here, actual checks are in config/cloog.m4 and\n+# config/isl.m4\n+\n+\n+# Check whether --with-cloog was given.\n+if test \"${with_cloog+set}\" = set; then :\n+  withval=$with_cloog;\n+fi\n \n \n # Check whether --with-isl was given.\n@@ -5618,6 +5625,13 @@ if test \"${with_isl+set}\" = set; then :\n fi\n \n \n+# Treat either --without-cloog or --without-isl as a request to disable\n+# GRAPHITE support and skip all following checks.\n+if test \"x$with_isl\" != \"xno\" &&\n+   test \"x$with_cloog\" != \"xno\"; then\n+  # Check for ISL\n+\n+\n # Check whether --with-isl-include was given.\n if test \"${with_isl_include+set}\" = set; then :\n   withval=$with_isl_include;\n@@ -5664,14 +5678,8 @@ fi\n     ENABLE_ISL_CHECK=no\n   fi\n \n-  isllibs=\"${isllibs} -lisl\"\n \n \n-\n-\n-\n-if test \"x$with_isl\" != \"xno\"; then\n-\n   if test \"${ENABLE_ISL_CHECK}\" = yes ; then\n     _isl_saved_CFLAGS=$CFLAGS\n     _isl_saved_LDFLAGS=$LDFLAGS\n@@ -5727,7 +5735,6 @@ $as_echo \"$gcc_cv_isl\" >&6; }\n \n \n \n-\n   if test \"x${with_isl}\" = xno; then\n     graphite_requested=no\n   elif test \"x${with_isl}\" != x \\\n@@ -5753,15 +5760,9 @@ $as_echo \"$gcc_cv_isl\" >&6; }\n   fi\n \n \n-fi\n-\n-# Check for CLOOG\n-\n \n-# Check whether --with-cloog was given.\n-if test \"${with_cloog+set}\" = set; then :\n-  withval=$with_cloog;\n-fi\n+  if test \"x$gcc_cv_isl\" != \"xno\"; then\n+    # Check for CLOOG\n \n \n # Check whether --with-cloog-include was given.\n@@ -5810,16 +5811,9 @@ fi\n   fi\n \n   clooginc=\"-DCLOOG_INT_GMP ${clooginc}\"\n-  clooglibs=\"${clooglibs} -lcloog-isl ${isllibs}\"\n-\n-\n-\n+  clooglibs=\"${clooglibs} -lcloog-isl ${isllibs} -lisl\"\n \n \n-if test \"x$isllibs\" = x && test \"x$islinc\" = x; then\n-  clooglibs=\n-  clooginc=\n-elif test \"x$with_cloog\" != \"xno\"; then\n \n \n \n@@ -5891,18 +5885,30 @@ $as_echo \"$gcc_cv_cloog\" >&6; }\n     && test \"x${clooglibs}\" = x \\\n     && test \"x${clooginc}\" = x ; then\n \n-    as_fn_error \"Unable to find a usable CLooG.  See config.log for details.\" \"$LINENO\" 5\n+      as_fn_error \"Unable to find a usable CLooG.  See config.log for details.\" \"$LINENO\" 5\n   fi\n \n \n+  fi\n fi\n \n # If either the ISL or the CLooG check failed, disable builds of in-tree\n # variants of both\n-if test \"x$clooglibs\" = x && test \"x$clooginc\" = x; then\n+if test \"x$with_isl\" = xno ||\n+   test \"x$with_cloog\" = xno ||\n+   test \"x$gcc_cv_cloog\" = xno ||\n+   test \"x$gcc_cv_isl\" = xno; then\n   noconfigdirs=\"$noconfigdirs cloog isl\"\n+  islinc=\n+  clooginc=\n+  clooglibs=\n fi\n \n+\n+\n+\n+\n+\n # Check for LTO support.\n # Check whether --enable-lto was given.\n if test \"${enable_lto+set}\" = set; then :"}, {"sha": "02174b387bc4de41884cbc1567867e60c2b69818", "filename": "configure.ac", "status": "modified", "additions": 52, "deletions": 25, "changes": 77, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/625afa230c955936b243d17d23ead4be25c07c3a/configure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/625afa230c955936b243d17d23ead4be25c07c3a/configure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.ac?ref=625afa230c955936b243d17d23ead4be25c07c3a", "patch": "@@ -1513,44 +1513,71 @@ AC_ARG_WITH(boot-ldflags,\n  fi])\n AC_SUBST(poststage1_ldflags)\n \n-# Check for ISL\n-dnl Provide configure switches and initialize islinc & isllibs\n-dnl with user input.\n-ISL_INIT_FLAGS\n-if test \"x$with_isl\" != \"xno\"; then\n+# GCC GRAPHITE dependences, ISL and CLOOG which in turn requires ISL.\n+# Basic setup is inlined here, actual checks are in config/cloog.m4 and\n+# config/isl.m4\n+\n+AC_ARG_WITH(cloog,\n+  [AS_HELP_STRING(\n+    [--with-cloog=PATH],\n+    [Specify prefix directory for the installed CLooG-ISL package.\n+     Equivalent to --with-cloog-include=PATH/include\n+     plus --with-cloog-lib=PATH/lib])])\n+AC_ARG_WITH(isl,\n+  [AS_HELP_STRING(\n+   [--with-isl=PATH],\n+   [Specify prefix directory for the installed ISL package.\n+    Equivalent to --with-isl-include=PATH/include\n+    plus --with-isl-lib=PATH/lib])])\n+\n+# Treat either --without-cloog or --without-isl as a request to disable\n+# GRAPHITE support and skip all following checks.\n+if test \"x$with_isl\" != \"xno\" &&\n+   test \"x$with_cloog\" != \"xno\"; then\n+  # Check for ISL\n+  dnl Provide configure switches and initialize islinc & isllibs\n+  dnl with user input.\n+  ISL_INIT_FLAGS\n   dnl The minimal version of ISL required for Graphite.\n   ISL_CHECK_VERSION(0,10)\n-\n   dnl Only execute fail-action, if ISL has been requested.\n   ISL_IF_FAILED([\n     AC_MSG_ERROR([Unable to find a usable ISL.  See config.log for details.])])\n-fi\n \n-# Check for CLOOG\n-dnl Provide configure switches and initialize clooginc & clooglibs\n-dnl with user input.\n-CLOOG_INIT_FLAGS\n-if test \"x$isllibs\" = x && test \"x$islinc\" = x; then\n-  clooglibs=\n-  clooginc=\n-elif test \"x$with_cloog\" != \"xno\"; then\n-  dnl The minimal version of CLooG required for Graphite.\n-  dnl\n-  dnl If we use CLooG-Legacy, the provided version information is\n-  dnl ignored.\n-  CLOOG_CHECK_VERSION(0,17,0)\n-\n-  dnl Only execute fail-action, if CLooG has been requested.\n-  CLOOG_IF_FAILED([\n-    AC_MSG_ERROR([Unable to find a usable CLooG.  See config.log for details.])])\n+  if test \"x$gcc_cv_isl\" != \"xno\"; then\n+    # Check for CLOOG\n+    dnl Provide configure switches and initialize clooginc & clooglibs\n+    dnl with user input.\n+    CLOOG_INIT_FLAGS\n+    dnl The minimal version of CLooG required for Graphite.\n+    dnl\n+    dnl If we use CLooG-Legacy, the provided version information is\n+    dnl ignored.\n+    CLOOG_CHECK_VERSION(0,17,0)\n+\n+    dnl Only execute fail-action, if CLooG has been requested.\n+    CLOOG_IF_FAILED([\n+      AC_MSG_ERROR([Unable to find a usable CLooG.  See config.log for details.])])\n+  fi\n fi\n \n # If either the ISL or the CLooG check failed, disable builds of in-tree\n # variants of both\n-if test \"x$clooglibs\" = x && test \"x$clooginc\" = x; then\n+if test \"x$with_isl\" = xno ||\n+   test \"x$with_cloog\" = xno ||\n+   test \"x$gcc_cv_cloog\" = xno ||\n+   test \"x$gcc_cv_isl\" = xno; then\n   noconfigdirs=\"$noconfigdirs cloog isl\"\n+  islinc=\n+  clooginc=\n+  clooglibs=\n fi\n \n+AC_SUBST(islinc)\n+AC_SUBST(clooglibs)\n+AC_SUBST(clooginc)\n+\n+\n # Check for LTO support.\n AC_ARG_ENABLE(lto,\n [AS_HELP_STRING([--enable-lto], [enable link time optimization support])],"}]}