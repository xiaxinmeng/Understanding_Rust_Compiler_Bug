{"sha": "376f73bd08b12bd698f2af7b26a349feba47cd46", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzc2ZjczYmQwOGIxMmJkNjk4ZjJhZjdiMjZhMzQ5ZmViYTQ3Y2Q0Ng==", "commit": {"author": {"name": "Mark Mitchell", "email": "mitchell@dumbledore.codesourcery.com", "date": "2000-01-11T06:50:19Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-01-11T06:50:19Z"}, "message": "class.c (dfs_modify_vtables_queue_p): Remove.\n\n\t* class.c (dfs_modify_vtables_queue_p): Remove.\n\t(modify_all_vtables): Use dfs_unmarked_real_bases_queue_p\n\tand dfs_marked_real_bases_queue_p instead of\n\tdfs_modify_vtables_queue_p.\n\nFrom-SVN: r31319", "tree": {"sha": "a7daf5063ae7c9a24c0eaf30edbe11be36db79eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7daf5063ae7c9a24c0eaf30edbe11be36db79eb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/376f73bd08b12bd698f2af7b26a349feba47cd46", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/376f73bd08b12bd698f2af7b26a349feba47cd46", "html_url": "https://github.com/Rust-GCC/gccrs/commit/376f73bd08b12bd698f2af7b26a349feba47cd46", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/376f73bd08b12bd698f2af7b26a349feba47cd46/comments", "author": null, "committer": null, "parents": [{"sha": "1e57ec753335e0787315fe296f3a4e9d0ab95ef1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e57ec753335e0787315fe296f3a4e9d0ab95ef1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e57ec753335e0787315fe296f3a4e9d0ab95ef1"}], "stats": {"total": 33, "additions": 8, "deletions": 25}, "files": [{"sha": "310ca2f5fd9ad4a179d6d4c27947b8653641186c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/376f73bd08b12bd698f2af7b26a349feba47cd46/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/376f73bd08b12bd698f2af7b26a349feba47cd46/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=376f73bd08b12bd698f2af7b26a349feba47cd46", "patch": "@@ -1,5 +1,10 @@\n 2000-01-10  Mark Mitchell  <mitchell@dumbledore.codesourcery.com>\n \n+\t* class.c (dfs_modify_vtables_queue_p): Remove.\n+\t(modify_all_vtables): Use dfs_unmarked_real_bases_queue_p\n+\tand dfs_marked_real_bases_queue_p instead of\n+\tdfs_modify_vtables_queue_p.\n+\n \t* class.c (build_vbase_path): Simplify.\n \t(dfs_propagate_binfo_offsets): New function.\n \t(propagate_binfo_offsets): Use it."}, {"sha": "023cf1a27c4e7377ea1073ff1217569d3deb4d5d", "filename": "gcc/cp/class.c", "status": "modified", "additions": 3, "deletions": 25, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/376f73bd08b12bd698f2af7b26a349feba47cd46/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/376f73bd08b12bd698f2af7b26a349feba47cd46/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=376f73bd08b12bd698f2af7b26a349feba47cd46", "patch": "@@ -103,7 +103,6 @@ static void check_for_override PROTO((tree, tree));\n static tree get_class_offset_1 PROTO((tree, tree, tree, tree, tree));\n static tree get_class_offset PROTO((tree, tree, tree, tree));\n static void modify_one_vtable PROTO((tree, tree, tree));\n-static tree dfs_modify_vtables_queue_p PROTO((tree, void *));\n static tree dfs_modify_vtables PROTO((tree, void *));\n static void modify_all_vtables PROTO((tree, tree));\n static void determine_primary_base PROTO((tree, int *));\n@@ -2462,23 +2461,6 @@ modify_one_vtable (binfo, t, fndecl)\n \n /* Called from modify_all_vtables via dfs_walk.  */\n \n-static tree\n-dfs_modify_vtables_queue_p (binfo, data)\n-     tree binfo;\n-     void *data;\n-{\n-  tree list = (tree) data;\n-\n-  if (TREE_VIA_VIRTUAL (binfo))\n-    binfo = BINFO_FOR_VBASE (BINFO_TYPE (binfo), TREE_PURPOSE (list));\n-\n-  return (TREE_ADDRESSABLE (list) \n-\t  ? markedp (binfo, NULL) \n-\t  : unmarkedp (binfo, NULL));\n-}\n-\n-/* Called from modify_all_vtables via dfs_walk.  */\n-\n static tree\n dfs_modify_vtables (binfo, data)\n      tree binfo;\n@@ -2510,13 +2492,9 @@ modify_all_vtables (t, fndecl)\n   tree list;\n \n   list = build_tree_list (t, fndecl);\n-  dfs_walk (TYPE_BINFO (t), dfs_modify_vtables, dfs_modify_vtables_queue_p,\n-\t    list);\n-  /* Let dfs_modify_vtables_queue_p know to check that the mark is\n-     present before queueing a base, rather than checking to see that\n-     it is *not* present.  */\n-  TREE_ADDRESSABLE (list) = 1;\n-  dfs_walk (TYPE_BINFO (t), dfs_unmark, dfs_modify_vtables_queue_p, list);\n+  dfs_walk (TYPE_BINFO (t), dfs_modify_vtables, \n+\t    dfs_unmarked_real_bases_queue_p, list);\n+  dfs_walk (TYPE_BINFO (t), dfs_unmark, dfs_marked_real_bases_queue_p, t);\n }\n \n /* Fixup all the delta entries in this one vtable that need updating.  */"}]}