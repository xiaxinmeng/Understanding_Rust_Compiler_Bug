{"sha": "ca9bc441e4c9480b10883e7811312b6b4deb4b89", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2E5YmM0NDFlNGM5NDgwYjEwODgzZTc4MTEzMTJiNmI0ZGViNGI4OQ==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-01-05T03:21:24Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-01-05T03:21:24Z"}, "message": "configure.ac: Use AC_PROG_CPP_WERROR.\n\n\t* configure.ac: Use AC_PROG_CPP_WERROR.\n\t* configure: Regenerate.\n\nFrom-SVN: r75411", "tree": {"sha": "7e0f7d9aa0d6a688d88fc7beaf7a48024ec09c46", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7e0f7d9aa0d6a688d88fc7beaf7a48024ec09c46"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ca9bc441e4c9480b10883e7811312b6b4deb4b89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca9bc441e4c9480b10883e7811312b6b4deb4b89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ca9bc441e4c9480b10883e7811312b6b4deb4b89", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ca9bc441e4c9480b10883e7811312b6b4deb4b89/comments", "author": null, "committer": null, "parents": [{"sha": "955d023464779c437ce4e573682ace01d6d6c9fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/955d023464779c437ce4e573682ace01d6d6c9fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/955d023464779c437ce4e573682ace01d6d6c9fb"}], "stats": {"total": 498, "additions": 36, "deletions": 462}, "files": [{"sha": "7d15a24147328d19143c9e45059bfe54a976f60b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca9bc441e4c9480b10883e7811312b6b4deb4b89/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca9bc441e4c9480b10883e7811312b6b4deb4b89/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ca9bc441e4c9480b10883e7811312b6b4deb4b89", "patch": "@@ -1,3 +1,8 @@\n+2004-01-04  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* configure.ac: Use AC_PROG_CPP_WERROR.\n+\t* configure: Regenerate.\n+\n 2004-01-04  Zack Weinberg  <zack@codesourcery.com>\n \n \t* .cvsignore: Add autom4te.cache."}, {"sha": "f59b6fb2cb402bd9da0e31e9bc26bf5cf6048aa4", "filename": "gcc/configure", "status": "modified", "additions": 25, "deletions": 460, "changes": 485, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca9bc441e4c9480b10883e7811312b6b4deb4b89/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca9bc441e4c9480b10883e7811312b6b4deb4b89/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=ca9bc441e4c9480b10883e7811312b6b4deb4b89", "patch": "@@ -5171,6 +5171,11 @@ _ACEOF\n \n fi\n \n+# Need to reject headers which give warnings, so that the -Werror bootstrap\n+# works later. *sigh*  This needs to come before all header checks.\n+\n+ac_c_preproc_warn_flag=yes\n+\n echo \"$as_me:$LINENO: checking for ANSI C header files\" >&5\n echo $ECHO_N \"checking for ANSI C header files... $ECHO_C\" >&6\n if test \"${ac_cv_header_stdc+set}\" = set; then\n@@ -5581,55 +5586,12 @@ for ac_header in limits.h stddef.h string.h strings.h stdlib.h time.h \\\n \t\t direct.h malloc.h langinfo.h ldfcn.h locale.h wchar.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-fi\n-echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n-echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-else\n-  # Is the header compilable?\n-echo \"$as_me:$LINENO: checking $ac_header usability\" >&5\n-echo $ECHO_N \"checking $ac_header usability... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n-#line $LINENO \"configure\"\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-$ac_includes_default\n-#include <$ac_header>\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-         { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_header_compiler=yes\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_header_compiler=no\n-fi\n-rm -f conftest.$ac_objext conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n-echo \"${ECHO_T}$ac_header_compiler\" >&6\n-\n-# Is the header present?\n-echo \"$as_me:$LINENO: checking $ac_header presence\" >&5\n-echo $ECHO_N \"checking $ac_header presence... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n+  cat >conftest.$ac_ext <<_ACEOF\n #line $LINENO \"configure\"\n /* confdefs.h.  */\n _ACEOF\n@@ -5655,121 +5617,33 @@ else\n   ac_cpp_err=yes\n fi\n if test -z \"$ac_cpp_err\"; then\n-  ac_header_preproc=yes\n+  eval \"$as_ac_Header=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-  ac_header_preproc=no\n+  eval \"$as_ac_Header=no\"\n fi\n rm -f conftest.err conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n-echo \"${ECHO_T}$ac_header_preproc\" >&6\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc in\n-  yes:no )\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&5\n-echo \"$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-  no:yes )\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled\" >&5\n-echo \"$as_me: WARNING: $ac_header: present but cannot be compiled\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?\" >&5\n-echo \"$as_me: WARNING: $ac_header: check for missing prerequisite headers?\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-esac\n-echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n-echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  eval \"$as_ac_Header=$ac_header_preproc\"\n fi\n echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-\n-fi\n if test `eval echo '${'$as_ac_Header'}'` = yes; then\n   cat >>confdefs.h <<_ACEOF\n #define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n _ACEOF\n \n fi\n-\n done\n \n \n # Check for thread headers.\n-if test \"${ac_cv_header_thread_h+set}\" = set; then\n-  echo \"$as_me:$LINENO: checking for thread.h\" >&5\n+echo \"$as_me:$LINENO: checking for thread.h\" >&5\n echo $ECHO_N \"checking for thread.h... $ECHO_C\" >&6\n if test \"${ac_cv_header_thread_h+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_header_thread_h\" >&5\n-echo \"${ECHO_T}$ac_cv_header_thread_h\" >&6\n-else\n-  # Is the header compilable?\n-echo \"$as_me:$LINENO: checking thread.h usability\" >&5\n-echo $ECHO_N \"checking thread.h usability... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n-#line $LINENO \"configure\"\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-$ac_includes_default\n-#include <thread.h>\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-         { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_header_compiler=yes\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_header_compiler=no\n-fi\n-rm -f conftest.$ac_objext conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n-echo \"${ECHO_T}$ac_header_compiler\" >&6\n-\n-# Is the header present?\n-echo \"$as_me:$LINENO: checking thread.h presence\" >&5\n-echo $ECHO_N \"checking thread.h presence... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n+  cat >conftest.$ac_ext <<_ACEOF\n #line $LINENO \"configure\"\n /* confdefs.h.  */\n _ACEOF\n@@ -5795,117 +5669,29 @@ else\n   ac_cpp_err=yes\n fi\n if test -z \"$ac_cpp_err\"; then\n-  ac_header_preproc=yes\n+  ac_cv_header_thread_h=yes\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-  ac_header_preproc=no\n+  ac_cv_header_thread_h=no\n fi\n rm -f conftest.err conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n-echo \"${ECHO_T}$ac_header_preproc\" >&6\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc in\n-  yes:no )\n-    { echo \"$as_me:$LINENO: WARNING: thread.h: accepted by the compiler, rejected by the preprocessor!\" >&5\n-echo \"$as_me: WARNING: thread.h: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: thread.h: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: thread.h: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-  no:yes )\n-    { echo \"$as_me:$LINENO: WARNING: thread.h: present but cannot be compiled\" >&5\n-echo \"$as_me: WARNING: thread.h: present but cannot be compiled\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: thread.h: check for missing prerequisite headers?\" >&5\n-echo \"$as_me: WARNING: thread.h: check for missing prerequisite headers?\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: thread.h: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: thread.h: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-esac\n-echo \"$as_me:$LINENO: checking for thread.h\" >&5\n-echo $ECHO_N \"checking for thread.h... $ECHO_C\" >&6\n-if test \"${ac_cv_header_thread_h+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  ac_cv_header_thread_h=$ac_header_preproc\n fi\n echo \"$as_me:$LINENO: result: $ac_cv_header_thread_h\" >&5\n echo \"${ECHO_T}$ac_cv_header_thread_h\" >&6\n-\n-fi\n if test $ac_cv_header_thread_h = yes; then\n   have_thread_h=yes\n else\n   have_thread_h=\n fi\n \n-\n-if test \"${ac_cv_header_pthread_h+set}\" = set; then\n-  echo \"$as_me:$LINENO: checking for pthread.h\" >&5\n+echo \"$as_me:$LINENO: checking for pthread.h\" >&5\n echo $ECHO_N \"checking for pthread.h... $ECHO_C\" >&6\n if test \"${ac_cv_header_pthread_h+set}\" = set; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-fi\n-echo \"$as_me:$LINENO: result: $ac_cv_header_pthread_h\" >&5\n-echo \"${ECHO_T}$ac_cv_header_pthread_h\" >&6\n else\n-  # Is the header compilable?\n-echo \"$as_me:$LINENO: checking pthread.h usability\" >&5\n-echo $ECHO_N \"checking pthread.h usability... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n-#line $LINENO \"configure\"\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-$ac_includes_default\n-#include <pthread.h>\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-         { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_header_compiler=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_header_compiler=no\n-fi\n-rm -f conftest.$ac_objext conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n-echo \"${ECHO_T}$ac_header_compiler\" >&6\n-\n-# Is the header present?\n-echo \"$as_me:$LINENO: checking pthread.h presence\" >&5\n-echo $ECHO_N \"checking pthread.h presence... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n+  cat >conftest.$ac_ext <<_ACEOF\n #line $LINENO \"configure\"\n /* confdefs.h.  */\n _ACEOF\n@@ -5931,69 +5717,24 @@ else\n   ac_cpp_err=yes\n fi\n if test -z \"$ac_cpp_err\"; then\n-  ac_header_preproc=yes\n+  ac_cv_header_pthread_h=yes\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-  ac_header_preproc=no\n+  ac_cv_header_pthread_h=no\n fi\n rm -f conftest.err conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n-echo \"${ECHO_T}$ac_header_preproc\" >&6\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc in\n-  yes:no )\n-    { echo \"$as_me:$LINENO: WARNING: pthread.h: accepted by the compiler, rejected by the preprocessor!\" >&5\n-echo \"$as_me: WARNING: pthread.h: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: pthread.h: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: pthread.h: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-  no:yes )\n-    { echo \"$as_me:$LINENO: WARNING: pthread.h: present but cannot be compiled\" >&5\n-echo \"$as_me: WARNING: pthread.h: present but cannot be compiled\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: pthread.h: check for missing prerequisite headers?\" >&5\n-echo \"$as_me: WARNING: pthread.h: check for missing prerequisite headers?\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: pthread.h: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: pthread.h: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-esac\n-echo \"$as_me:$LINENO: checking for pthread.h\" >&5\n-echo $ECHO_N \"checking for pthread.h... $ECHO_C\" >&6\n-if test \"${ac_cv_header_pthread_h+set}\" = set; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  ac_cv_header_pthread_h=$ac_header_preproc\n fi\n echo \"$as_me:$LINENO: result: $ac_cv_header_pthread_h\" >&5\n echo \"${ECHO_T}$ac_cv_header_pthread_h\" >&6\n-\n-fi\n if test $ac_cv_header_pthread_h = yes; then\n   have_pthread_h=yes\n else\n   have_pthread_h=\n fi\n \n \n-\n # These tests can't be done till we know if we have limits.h.\n echo \"$as_me:$LINENO: checking for CHAR_BIT\" >&5\n echo $ECHO_N \"checking for CHAR_BIT... $ECHO_C\" >&6\n@@ -7319,55 +7060,12 @@ fi\n for ac_header in unistd.h vfork.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-fi\n-echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n-echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n else\n-  # Is the header compilable?\n-echo \"$as_me:$LINENO: checking $ac_header usability\" >&5\n-echo $ECHO_N \"checking $ac_header usability... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n-#line $LINENO \"configure\"\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-$ac_includes_default\n-#include <$ac_header>\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-         { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_header_compiler=yes\n-else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_header_compiler=no\n-fi\n-rm -f conftest.$ac_objext conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n-echo \"${ECHO_T}$ac_header_compiler\" >&6\n-\n-# Is the header present?\n-echo \"$as_me:$LINENO: checking $ac_header presence\" >&5\n-echo $ECHO_N \"checking $ac_header presence... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n+  cat >conftest.$ac_ext <<_ACEOF\n #line $LINENO \"configure\"\n /* confdefs.h.  */\n _ACEOF\n@@ -7393,68 +7091,23 @@ else\n   ac_cpp_err=yes\n fi\n if test -z \"$ac_cpp_err\"; then\n-  ac_header_preproc=yes\n+  eval \"$as_ac_Header=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-  ac_header_preproc=no\n+  eval \"$as_ac_Header=no\"\n fi\n rm -f conftest.err conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n-echo \"${ECHO_T}$ac_header_preproc\" >&6\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc in\n-  yes:no )\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&5\n-echo \"$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-  no:yes )\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled\" >&5\n-echo \"$as_me: WARNING: $ac_header: present but cannot be compiled\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?\" >&5\n-echo \"$as_me: WARNING: $ac_header: check for missing prerequisite headers?\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-esac\n-echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n-echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  eval \"$as_ac_Header=$ac_header_preproc\"\n fi\n echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-\n-fi\n if test `eval echo '${'$as_ac_Header'}'` = yes; then\n   cat >>confdefs.h <<_ACEOF\n #define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n _ACEOF\n \n fi\n-\n done\n \n \n@@ -7794,55 +7447,12 @@ fi;\n for ac_header in iconv.h\n do\n as_ac_Header=`echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n+echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n   echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-fi\n-echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n-echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-else\n-  # Is the header compilable?\n-echo \"$as_me:$LINENO: checking $ac_header usability\" >&5\n-echo $ECHO_N \"checking $ac_header usability... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n-#line $LINENO \"configure\"\n-/* confdefs.h.  */\n-_ACEOF\n-cat confdefs.h >>conftest.$ac_ext\n-cat >>conftest.$ac_ext <<_ACEOF\n-/* end confdefs.h.  */\n-$ac_includes_default\n-#include <$ac_header>\n-_ACEOF\n-rm -f conftest.$ac_objext\n-if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n-  (eval $ac_compile) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); } &&\n-         { ac_try='test -s conftest.$ac_objext'\n-  { (eval echo \"$as_me:$LINENO: \\\"$ac_try\\\"\") >&5\n-  (eval $ac_try) 2>&5\n-  ac_status=$?\n-  echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n-  (exit $ac_status); }; }; then\n-  ac_header_compiler=yes\n else\n-  echo \"$as_me: failed program was:\" >&5\n-sed 's/^/| /' conftest.$ac_ext >&5\n-\n-ac_header_compiler=no\n-fi\n-rm -f conftest.$ac_objext conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_compiler\" >&5\n-echo \"${ECHO_T}$ac_header_compiler\" >&6\n-\n-# Is the header present?\n-echo \"$as_me:$LINENO: checking $ac_header presence\" >&5\n-echo $ECHO_N \"checking $ac_header presence... $ECHO_C\" >&6\n-cat >conftest.$ac_ext <<_ACEOF\n+  cat >conftest.$ac_ext <<_ACEOF\n #line $LINENO \"configure\"\n /* confdefs.h.  */\n _ACEOF\n@@ -7868,68 +7478,23 @@ else\n   ac_cpp_err=yes\n fi\n if test -z \"$ac_cpp_err\"; then\n-  ac_header_preproc=yes\n+  eval \"$as_ac_Header=yes\"\n else\n   echo \"$as_me: failed program was:\" >&5\n sed 's/^/| /' conftest.$ac_ext >&5\n \n-  ac_header_preproc=no\n+  eval \"$as_ac_Header=no\"\n fi\n rm -f conftest.err conftest.$ac_ext\n-echo \"$as_me:$LINENO: result: $ac_header_preproc\" >&5\n-echo \"${ECHO_T}$ac_header_preproc\" >&6\n-\n-# So?  What about this header?\n-case $ac_header_compiler:$ac_header_preproc in\n-  yes:no )\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&5\n-echo \"$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-  no:yes )\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled\" >&5\n-echo \"$as_me: WARNING: $ac_header: present but cannot be compiled\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: check for missing prerequisite headers?\" >&5\n-echo \"$as_me: WARNING: $ac_header: check for missing prerequisite headers?\" >&2;}\n-    { echo \"$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result\" >&5\n-echo \"$as_me: WARNING: $ac_header: proceeding with the preprocessor's result\" >&2;}\n-    (\n-      cat <<\\_ASBOX\n-## ------------------------------------ ##\n-## Report this to bug-autoconf@gnu.org. ##\n-## ------------------------------------ ##\n-_ASBOX\n-    ) |\n-      sed \"s/^/$as_me: WARNING:     /\" >&2\n-    ;;\n-esac\n-echo \"$as_me:$LINENO: checking for $ac_header\" >&5\n-echo $ECHO_N \"checking for $ac_header... $ECHO_C\" >&6\n-if eval \"test \\\"\\${$as_ac_Header+set}\\\" = set\"; then\n-  echo $ECHO_N \"(cached) $ECHO_C\" >&6\n-else\n-  eval \"$as_ac_Header=$ac_header_preproc\"\n fi\n echo \"$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`\" >&5\n echo \"${ECHO_T}`eval echo '${'$as_ac_Header'}'`\" >&6\n-\n-fi\n if test `eval echo '${'$as_ac_Header'}'` = yes; then\n   cat >>confdefs.h <<_ACEOF\n #define `echo \"HAVE_$ac_header\" | $as_tr_cpp` 1\n _ACEOF\n \n fi\n-\n done\n \n "}, {"sha": "a04a59da5ff5c1dc92960dfca773c44f35000221", "filename": "gcc/configure.ac", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ca9bc441e4c9480b10883e7811312b6b4deb4b89/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ca9bc441e4c9480b10883e7811312b6b4deb4b89/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=ca9bc441e4c9480b10883e7811312b6b4deb4b89", "patch": "@@ -1,7 +1,7 @@\n-# configure.in for GCC\n+# configure.ac for GCC\n # Process this file with autoconf to generate a configuration script.\n \n-# Copyright 1997, 1998, 1999, 2000, 2001, 2002, 2003\n+# Copyright 1997, 1998, 1999, 2000, 2001, 2002, 2003, 2004\n # Free Software Foundation, Inc.\n \n #This file is part of GCC.\n@@ -685,6 +685,10 @@ if test $gcc_cv_glibc = yes; then\n   AC_DEFINE(_GNU_SOURCE, 1, [Always define this when using the GNU C Library])\n fi\n \n+# Need to reject headers which give warnings, so that the -Werror bootstrap\n+# works later. *sigh*  This needs to come before all header checks.\n+AC_PROG_CPP_WERROR\n+\n AC_HEADER_STDC\n AC_HEADER_TIME\n gcc_AC_HEADER_STDBOOL"}]}