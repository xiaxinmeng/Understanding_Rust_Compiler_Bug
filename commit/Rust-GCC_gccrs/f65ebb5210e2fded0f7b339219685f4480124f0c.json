{"sha": "f65ebb5210e2fded0f7b339219685f4480124f0c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjY1ZWJiNTIxMGUyZmRlZDBmN2IzMzkyMTk2ODVmNDQ4MDEyNGYwYw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-09-23T15:18:43Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-09-23T17:27:48Z"}, "message": "analyzer: fix member call on null seen with ubsan [PR97178]\n\ngcc/analyzer/ChangeLog:\n\tPR analyzer/97178\n\t* engine.cc (impl_run_checkers): Update for change to ext_state\n\tctor.\n\t* program-state.cc (selftest::test_sm_state_map): Pass an engine\n\tinstance to ext_state ctor.\n\t(selftest::test_program_state_1): Likewise.\n\t(selftest::test_program_state_2): Likewise.\n\t(selftest::test_program_state_merging): Likewise.\n\t(selftest::test_program_state_merging_2): Likewise.\n\t* program-state.h (extrinsic_state::extrinsic_state): Remove NULL\n\tdefault value for \"eng\" param.", "tree": {"sha": "cd10f995a2f072130320123fb13ec6015bc7bc3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd10f995a2f072130320123fb13ec6015bc7bc3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f65ebb5210e2fded0f7b339219685f4480124f0c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f65ebb5210e2fded0f7b339219685f4480124f0c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f65ebb5210e2fded0f7b339219685f4480124f0c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f65ebb5210e2fded0f7b339219685f4480124f0c/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "65c9878641cbe0ed898aa7047b7b994e9d4a5bb1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65c9878641cbe0ed898aa7047b7b994e9d4a5bb1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65c9878641cbe0ed898aa7047b7b994e9d4a5bb1"}], "stats": {"total": 18, "additions": 10, "deletions": 8}, "files": [{"sha": "b36c1988406a614de621d791a2b05b00aed60ada", "filename": "gcc/analyzer/engine.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65ebb5210e2fded0f7b339219685f4480124f0c/gcc%2Fanalyzer%2Fengine.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65ebb5210e2fded0f7b339219685f4480124f0c/gcc%2Fanalyzer%2Fengine.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fengine.cc?ref=f65ebb5210e2fded0f7b339219685f4480124f0c", "patch": "@@ -4464,7 +4464,7 @@ impl_run_checkers (logger *logger)\n     }\n \n   /* Extrinsic state shared by nodes in the graph.  */\n-  const extrinsic_state ext_state (checkers, logger, &eng);\n+  const extrinsic_state ext_state (checkers, &eng, logger);\n \n   const analysis_plan plan (sg, logger);\n "}, {"sha": "188fec0241861b5e41b537a53f57e1f9ef16e556", "filename": "gcc/analyzer/program-state.cc", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65ebb5210e2fded0f7b339219685f4480124f0c/gcc%2Fanalyzer%2Fprogram-state.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65ebb5210e2fded0f7b339219685f4480124f0c/gcc%2Fanalyzer%2Fprogram-state.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fprogram-state.cc?ref=f65ebb5210e2fded0f7b339219685f4480124f0c", "patch": "@@ -1140,7 +1140,8 @@ test_sm_state_map ()\n   state_machine *sm = make_malloc_state_machine (NULL);\n   auto_delete_vec <state_machine> checkers;\n   checkers.safe_push (sm);\n-  extrinsic_state ext_state (checkers);\n+  engine eng;\n+  extrinsic_state ext_state (checkers, &eng);\n   state_machine::state_t start = sm->get_start_state ();\n \n   /* Test setting states on svalue_id instances directly.  */\n@@ -1272,7 +1273,7 @@ test_program_state_1 ()\n   checkers.safe_push (sm);\n \n   engine eng;\n-  extrinsic_state ext_state (checkers, NULL, &eng);\n+  extrinsic_state ext_state (checkers, &eng);\n   region_model_manager *mgr = eng.get_model_manager ();\n   program_state s (ext_state);\n   region_model *model = s.m_region_model;\n@@ -1301,7 +1302,7 @@ test_program_state_2 ()\n \n   auto_delete_vec <state_machine> checkers;\n   engine eng;\n-  extrinsic_state ext_state (checkers, NULL, &eng);\n+  extrinsic_state ext_state (checkers, &eng);\n \n   program_state s (ext_state);\n   region_model *model = s.m_region_model;\n@@ -1324,7 +1325,7 @@ test_program_state_merging ()\n   auto_delete_vec <state_machine> checkers;\n   checkers.safe_push (make_malloc_state_machine (NULL));\n   engine eng;\n-  extrinsic_state ext_state (checkers, NULL, &eng);\n+  extrinsic_state ext_state (checkers, &eng);\n   region_model_manager *mgr = eng.get_model_manager ();\n \n   program_state s0 (ext_state);\n@@ -1389,7 +1390,8 @@ test_program_state_merging_2 ()\n   program_point point (program_point::origin ());\n   auto_delete_vec <state_machine> checkers;\n   checkers.safe_push (make_signal_state_machine (NULL));\n-  extrinsic_state ext_state (checkers);\n+  engine eng;\n+  extrinsic_state ext_state (checkers, &eng);\n \n   const state_machine::state test_state_0 (\"test state 0\", 0);\n   const state_machine::state test_state_1 (\"test state 1\", 1);"}, {"sha": "094d25626568500af97bc31d4e0e1f1f19142121", "filename": "gcc/analyzer/program-state.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f65ebb5210e2fded0f7b339219685f4480124f0c/gcc%2Fanalyzer%2Fprogram-state.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f65ebb5210e2fded0f7b339219685f4480124f0c/gcc%2Fanalyzer%2Fprogram-state.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fprogram-state.h?ref=f65ebb5210e2fded0f7b339219685f4480124f0c", "patch": "@@ -29,8 +29,8 @@ class extrinsic_state\n {\n public:\n   extrinsic_state (auto_delete_vec <state_machine> &checkers,\n-\t\t   logger *logger = NULL,\n-\t\t   engine *eng = NULL)\n+\t\t   engine *eng,\n+\t\t   logger *logger = NULL)\n   : m_checkers (checkers), m_logger (logger), m_engine (eng)\n   {\n   }"}]}