{"sha": "1410c222604e2182f74242026fd924c717ced000", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQxMGMyMjI2MDRlMjE4MmY3NDI0MjAyNmZkOTI0YzcxN2NlZDAwMA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-21T18:49:58Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-21T18:49:58Z"}, "message": "syscall: Additional constants, some type corrections.\n\nFrom-SVN: r186655", "tree": {"sha": "16d4cd6ed67073d4e8d17f68667db246b6bf05ca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/16d4cd6ed67073d4e8d17f68667db246b6bf05ca"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1410c222604e2182f74242026fd924c717ced000", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1410c222604e2182f74242026fd924c717ced000", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1410c222604e2182f74242026fd924c717ced000", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1410c222604e2182f74242026fd924c717ced000/comments", "author": null, "committer": null, "parents": [{"sha": "b753247977fe81985ce485ab7f8a95f29f0c25a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b753247977fe81985ce485ab7f8a95f29f0c25a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b753247977fe81985ce485ab7f8a95f29f0c25a2"}], "stats": {"total": 102, "additions": 95, "deletions": 7}, "files": [{"sha": "2aea3a423e8d022fca19942dfb54800629dd2063", "filename": "libgo/config.h.in", "status": "modified", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1410c222604e2182f74242026fd924c717ced000/libgo%2Fconfig.h.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1410c222604e2182f74242026fd924c717ced000/libgo%2Fconfig.h.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfig.h.in?ref=1410c222604e2182f74242026fd924c717ced000", "patch": "@@ -48,6 +48,15 @@\n /* Define to 1 if you have the <linux/filter.h> header file. */\n #undef HAVE_LINUX_FILTER_H\n \n+/* Define to 1 if you have the <linux/if_addr.h> header file. */\n+#undef HAVE_LINUX_IF_ADDR_H\n+\n+/* Define to 1 if you have the <linux/if_ether.h> header file. */\n+#undef HAVE_LINUX_IF_ETHER_H\n+\n+/* Define to 1 if you have the <linux/if_tun.h> header file. */\n+#undef HAVE_LINUX_IF_TUN_H\n+\n /* Define to 1 if you have the <linux/netlink.h> header file. */\n #undef HAVE_LINUX_NETLINK_H\n \n@@ -75,12 +84,30 @@\n /* Define to 1 if you have the `mknodat' function. */\n #undef HAVE_MKNODAT\n \n+/* Define to 1 if you have the <netinet/if_ether.h> header file. */\n+#undef HAVE_NETINET_IF_ETHER_H\n+\n+/* Define to 1 if you have the <netinet/in_syst.h> header file. */\n+#undef HAVE_NETINET_IN_SYST_H\n+\n+/* Define to 1 if you have the <netinet/ip.h> header file. */\n+#undef HAVE_NETINET_IP_H\n+\n+/* Define to 1 if you have the <netinet/ip_mroute.h> header file. */\n+#undef HAVE_NETINET_IP_MROUTE_H\n+\n+/* Define to 1 if you have the <netpacket/packet.h> header file. */\n+#undef HAVE_NETPACKET_PACKET_H\n+\n /* Define to 1 if you have the <net/if_arp.h> header file. */\n #undef HAVE_NET_IF_ARP_H\n \n /* Define to 1 if you have the <net/if.h> header file. */\n #undef HAVE_NET_IF_H\n \n+/* Define to 1 if you have the <net/route.h> header file. */\n+#undef HAVE_NET_ROUTE_H\n+\n /* Define to 1 if the system has the type `off64_t'. */\n #undef HAVE_OFF64_T\n \n@@ -145,6 +172,12 @@\n /* Define to 1 if you have the <sys/epoll.h> header file. */\n #undef HAVE_SYS_EPOLL_H\n \n+/* Define to 1 if you have the <sys/file.h> header file. */\n+#undef HAVE_SYS_FILE_H\n+\n+/* Define to 1 if you have the <sys/inotify.h> header file. */\n+#undef HAVE_SYS_INOTIFY_H\n+\n /* Define to 1 if you have the <sys/mman.h> header file. */\n #undef HAVE_SYS_MMAN_H\n "}, {"sha": "ae9dd8fa5f345a524e513c2072948342256d7d36", "filename": "libgo/configure", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1410c222604e2182f74242026fd924c717ced000/libgo%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1410c222604e2182f74242026fd924c717ced000/libgo%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure?ref=1410c222604e2182f74242026fd924c717ced000", "patch": "@@ -14508,7 +14508,7 @@ no)\n   ;;\n esac\n \n-for ac_header in sys/mman.h syscall.h sys/epoll.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/reboot.h\n+for ac_header in sys/file.h sys/mman.h syscall.h sys/epoll.h sys/inotify.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h net/route.h netpacket/packet.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/reboot.h netinet/in_syst.h netinet/ip.h netinet/ip_mroute.h netinet/if_ether.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_mongrel \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"$ac_includes_default\"\n@@ -14523,7 +14523,7 @@ fi\n done\n \n \n-for ac_header in linux/filter.h linux/netlink.h linux/rtnetlink.h\n+for ac_header in linux/filter.h linux/if_addr.h linux/if_ether.h linux/if_tun.h linux/netlink.h linux/rtnetlink.h\n do :\n   as_ac_Header=`$as_echo \"ac_cv_header_$ac_header\" | $as_tr_sh`\n ac_fn_c_check_header_compile \"$LINENO\" \"$ac_header\" \"$as_ac_Header\" \"#ifdef HAVE_SYS_SOCKET_H"}, {"sha": "c6ce24771cdddd6a9801f8585d720df791674349", "filename": "libgo/configure.ac", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1410c222604e2182f74242026fd924c717ced000/libgo%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1410c222604e2182f74242026fd924c717ced000/libgo%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fconfigure.ac?ref=1410c222604e2182f74242026fd924c717ced000", "patch": "@@ -453,9 +453,9 @@ no)\n   ;;\n esac\n \n-AC_CHECK_HEADERS(sys/mman.h syscall.h sys/epoll.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/reboot.h)\n+AC_CHECK_HEADERS(sys/file.h sys/mman.h syscall.h sys/epoll.h sys/inotify.h sys/ptrace.h sys/syscall.h sys/user.h sys/utsname.h sys/select.h sys/socket.h net/if.h net/if_arp.h net/route.h netpacket/packet.h sys/prctl.h sys/mount.h sys/vfs.h sys/statfs.h sys/timex.h sys/sysinfo.h utime.h linux/ether.h linux/reboot.h netinet/in_syst.h netinet/ip.h netinet/ip_mroute.h netinet/if_ether.h)\n \n-AC_CHECK_HEADERS([linux/filter.h linux/netlink.h linux/rtnetlink.h], [], [],\n+AC_CHECK_HEADERS([linux/filter.h linux/if_addr.h linux/if_ether.h linux/if_tun.h linux/netlink.h linux/rtnetlink.h], [], [],\n [#ifdef HAVE_SYS_SOCKET_H\n #include <sys/socket.h>\n #endif"}, {"sha": "b91018a32cf59df0c418288ca494f3ec97e04bf7", "filename": "libgo/go/syscall/libcall_linux.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1410c222604e2182f74242026fd924c717ced000/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1410c222604e2182f74242026fd924c717ced000/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_linux.go?ref=1410c222604e2182f74242026fd924c717ced000", "patch": "@@ -335,7 +335,7 @@ func Splice(rfd int, roff *int64, wfd int, woff *int64, len int, flags int) (n i\n //sys\tTee(rfd int, wfd int, len int, flags int) (n int64, err error)\n //tee(rfd int, wfd int, len Size_t, flags uint) Ssize_t\n \n-func Tgkill(tgid, tid, sig Signal) error {\n+func Tgkill(tgid, tid int, sig Signal) error {\n \tr1, _, errno := Syscall(SYS_TGKILL, uintptr(tgid), uintptr(tid), uintptr(sig))\n \tif r1 < 0 {\n \t\treturn errno"}, {"sha": "4f25b82649ab3d2bcb7f6073677cc3967d410c7b", "filename": "libgo/go/syscall/libcall_posix.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1410c222604e2182f74242026fd924c717ced000/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1410c222604e2182f74242026fd924c717ced000/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Flibcall_posix.go?ref=1410c222604e2182f74242026fd924c717ced000", "patch": "@@ -268,7 +268,7 @@ func Gettimeofday(tv *Timeval) (err error) {\n //sys\tMknod(path string, mode uint32, dev int) (err error)\n //mknod(path *byte, mode Mode_t, dev _dev_t) int\n \n-//sys\tMount(source string, target string, fstype string, flags int, data string) (err error)\n+//sys\tMount(source string, target string, fstype string, flags uintptr, data string) (err error)\n //mount(source *byte, target *byte, fstype *byte, flags _C_long, data *byte) int\n \n //sys\tNanosleep(time *Timespec, leftover *Timespec) (err error)"}, {"sha": "41ef968c58c50917c897c14a7f4ddaacf2ec1ec3", "filename": "libgo/mksysinfo.sh", "status": "modified", "additions": 56, "deletions": 1, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1410c222604e2182f74242026fd924c717ced000/libgo%2Fmksysinfo.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1410c222604e2182f74242026fd924c717ced000/libgo%2Fmksysinfo.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fmksysinfo.sh?ref=1410c222604e2182f74242026fd924c717ced000", "patch": "@@ -40,6 +40,18 @@ cat > sysinfo.c <<EOF\n #include <sys/ttold.h>\n #endif\n #include <netinet/tcp.h>\n+#if defined(HAVE_NETINET_IN_SYSTM_H)\n+#include <netinet/in_systm.h>\n+#endif\n+#if defined(HAVE_NETINET_IP_H)\n+#include <netinet/ip.h>\n+#endif\n+#if defined(HAVE_NETINET_IP_MROUTE_H)\n+#include <netinet/ip_mroute.h>\n+#endif\n+#if defined(HAVE_NETINET_IF_ETHER_H)\n+#include <netinet/if_ether.h>\n+#endif\n #include <signal.h>\n #include <sys/ioctl.h>\n #include <termios.h>\n@@ -52,6 +64,9 @@ cat > sysinfo.c <<EOF\n #if defined(HAVE_SYS_EPOLL_H)\n #include <sys/epoll.h>\n #endif\n+#if defined(HAVE_SYS_FILE_H)\n+#include <sys/file.h>\n+#endif\n #if defined(HAVE_SYS_MMAN_H)\n #include <sys/mman.h>\n #endif\n@@ -85,6 +100,15 @@ cat > sysinfo.c <<EOF\n #if defined(HAVE_LINUX_FILTER_H)\n #include <linux/filter.h>\n #endif\n+#if defined(HAVE_LINUX_IF_ADDR_H)\n+#include <linux/if_addr.h>\n+#endif\n+#if defined(HAVE_LINUX_IF_ETHER_H)\n+#include <linux/if_ether.h>\n+#endif\n+#if defined(HAVE_LINUX_IF_TUN_H)\n+#include <linux/if_tun.h>\n+#endif\n #if defined(HAVE_LINUX_NETLINK_H)\n #include <linux/netlink.h>\n #endif\n@@ -97,6 +121,12 @@ cat > sysinfo.c <<EOF\n #if defined(HAVE_NET_IF_ARP_H)\n #include <net/if_arp.h>\n #endif\n+#if defined(HAVE_NET_ROUTE_H)\n+#include <net/route.h>\n+#endif\n+#if defined (HAVE_NETPACKET_PACKET_H)\n+#include <netpacket/packet.h>\n+#endif\n #if defined(HAVE_SYS_MOUNT_H)\n #include <sys/mount.h>\n #endif\n@@ -124,6 +154,9 @@ cat > sysinfo.c <<EOF\n #if defined(HAVE_LINUX_REBOOT_H)\n #include <linux/reboot.h>\n #endif\n+#if defined(HAVE_SYS_INOTIFY_H)\n+#include <sys/inotify.h>\n+#endif\n \n /* Constants that may only be defined as expressions on some systems,\n    expressions too complex for -fdump-go-spec to handle.  These are\n@@ -199,6 +232,8 @@ grep '^const _MAP_' gen-sysinfo.go | \\\n   sed -e 's/^\\(const \\)_\\(MAP_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n grep '^const _MADV_' gen-sysinfo.go | \\\n   sed -e 's/^\\(const \\)_\\(MADV_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+grep '^const _MCL_' gen-sysinfo.go | \\\n+  sed -e 's/^\\(const \\)_\\(MCL_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n # Process status constants.\n grep '^const _W' gen-sysinfo.go |\n@@ -700,7 +735,7 @@ grep '^type _rtmsg ' gen-sysinfo.go | \\\n       -e 's/rtm_src_len/Src_len/' \\\n       -e 's/rtm_tos/Tos/' \\\n       -e 's/rtm_table/Table/' \\\n-      -e 's/rtm_protocol/Procotol/' \\\n+      -e 's/rtm_protocol/Protocol/' \\\n       -e 's/rtm_scope/Scope/' \\\n       -e 's/rtm_type/Type/' \\\n       -e 's/rtm_flags/Flags/' \\\n@@ -718,6 +753,8 @@ grep '^type _rtgenmsg ' gen-sysinfo.go | \\\n     >> ${OUT}\n \n # The routing message flags.\n+grep '^const _RT_' gen-sysinfo.go | \\\n+    sed -e 's/^\\(const \\)_\\(RT_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n grep '^const _RTA' gen-sysinfo.go | \\\n     sed -e 's/^\\(const \\)_\\(RTA[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n grep '^const _RTF' gen-sysinfo.go | \\\n@@ -726,6 +763,10 @@ grep '^const _RTCF' gen-sysinfo.go | \\\n     sed -e 's/^\\(const \\)_\\(RTCF[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n grep '^const _RTM' gen-sysinfo.go | \\\n     sed -e 's/^\\(const \\)_\\(RTM[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+grep '^const _RTN' gen-sysinfo.go | \\\n+    sed -e 's/^\\(const \\)_\\(RTN[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+grep '^const _RTPROT' gen-sysinfo.go | \\\n+    sed -e 's/^\\(const \\)_\\(RTPROT[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n # The size of the rtgenmsg struct.\n if grep 'type RtGenmsg ' ${OUT} > /dev/null 2>&1; then\n@@ -818,6 +859,8 @@ for n in IGNBRK BRKINT IGNPAR PARMRK INPCK ISTRIP INLCR IGNCR ICRNL IUCLC \\\n done\n \n # The mount flags\n+grep '^const _MNT_' gen-sysinfo.go |\n+    sed -e 's/^\\(const \\)_\\(MNT_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n grep '^const _MS_' gen-sysinfo.go |\n     sed -e 's/^\\(const \\)_\\(MS_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n@@ -932,6 +975,10 @@ grep '^type _utimbuf ' gen-sysinfo.go | \\\n       -e 's/modtime/Modtime/' \\\n     >> ${OUT}\n \n+# The LOCK flags for flock.\n+grep '^const _LOCK_' gen-sysinfo.go |\n+    sed -e 's/^\\(const \\)_\\(LOCK_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+\n # The GNU/Linux LINUX_REBOOT flags.\n grep '^const _LINUX_REBOOT_' gen-sysinfo.go |\n     sed -e 's/^\\(const \\)_\\(LINUX_REBOOT_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n@@ -957,6 +1004,14 @@ grep '^type _sock_fprog ' gen-sysinfo.go | \\\n grep '^const _BPF_' gen-sysinfo.go | \\\n   sed -e 's/^\\(const \\)_\\(BPF_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n \n+# The GNU/Linux netlink flags.\n+grep '^const _NETLINK_' gen-sysinfo.go | \\\n+  sed -e 's/^\\(const \\)_\\(NETLINK_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+\n+# The GNU/Linux packet socket flags.\n+grep '^const _PACKET_' gen-sysinfo.go | \\\n+  sed -e 's/^\\(const \\)_\\(PACKET_[^= ]*\\)\\(.*\\)$/\\1\\2 = _\\2/' >> ${OUT}\n+\n # The Solaris 11 Update 1 _zone_net_addr_t struct.\n grep '^type _zone_net_addr_t ' gen-sysinfo.go | \\\n     sed -e 's/_in6_addr/[16]byte/' \\"}]}