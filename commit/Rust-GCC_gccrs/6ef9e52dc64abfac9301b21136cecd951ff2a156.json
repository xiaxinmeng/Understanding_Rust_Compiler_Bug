{"sha": "6ef9e52dc64abfac9301b21136cecd951ff2a156", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmVmOWU1MmRjNjRhYmZhYzkzMDFiMjExMzZjZWNkOTUxZmYyYTE1Ng==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2010-06-09T14:02:03Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2010-06-09T14:02:03Z"}, "message": "re PR libstdc++/44413 (inefficient code for std::string::compare on x86-64)\n\n2010-06-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tRevert:    \n\t2010-06-09  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR libstdc++/44413\n\t* include/ext/vstring_util.h (__vstring_utility<>::_S_compare):\n\tSimplify, just return -1, 0, 1.\n\nFrom-SVN: r160476", "tree": {"sha": "8df0c69c4b77b7d3ed16eafe6ee56850101141df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8df0c69c4b77b7d3ed16eafe6ee56850101141df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ef9e52dc64abfac9301b21136cecd951ff2a156", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef9e52dc64abfac9301b21136cecd951ff2a156", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ef9e52dc64abfac9301b21136cecd951ff2a156", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ef9e52dc64abfac9301b21136cecd951ff2a156/comments", "author": null, "committer": null, "parents": [{"sha": "1d5360463f2a76e89383318f1596bf1efe2040f8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1d5360463f2a76e89383318f1596bf1efe2040f8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1d5360463f2a76e89383318f1596bf1efe2040f8"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "84eb5148a18f44e75f17f7afdb61e270b8175407", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef9e52dc64abfac9301b21136cecd951ff2a156/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef9e52dc64abfac9301b21136cecd951ff2a156/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=6ef9e52dc64abfac9301b21136cecd951ff2a156", "patch": "@@ -1,3 +1,12 @@\n+2010-06-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tRevert:\n+\t2010-06-09  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR libstdc++/44413\n+\t* include/ext/vstring_util.h (__vstring_utility<>::_S_compare):\n+\tSimplify, just return -1, 0, 1.\n+\n 2010-06-09  Iain Sandoe  <iains@gcc.gnu.org>\n \n \tPR bootstrap/43170"}, {"sha": "4042f70692ed0d5ac02e2ef7587db66b653cc893", "filename": "libstdc++-v3/include/ext/vstring_util.h", "status": "modified", "additions": 11, "deletions": 6, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ef9e52dc64abfac9301b21136cecd951ff2a156/libstdc%2B%2B-v3%2Finclude%2Fext%2Fvstring_util.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ef9e52dc64abfac9301b21136cecd951ff2a156/libstdc%2B%2B-v3%2Finclude%2Fext%2Fvstring_util.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fext%2Fvstring_util.h?ref=6ef9e52dc64abfac9301b21136cecd951ff2a156", "patch": "@@ -1,7 +1,6 @@\n // Versatile string utility -*- C++ -*-\n \n-// Copyright (C) 2005, 2006, 2007, 2008, 2009, 2010\n-// Free Software Foundation, Inc.\n+// Copyright (C) 2005, 2006, 2007, 2008, 2009 Free Software Foundation, Inc.\n //\n // This file is part of the GNU ISO C++ Library.  This library is free\n // software; you can redistribute it and/or modify it under the\n@@ -51,10 +50,10 @@ _GLIBCXX_BEGIN_NAMESPACE(__gnu_cxx)\n     {\n       typedef typename _Alloc::template rebind<_CharT>::other _CharT_alloc_type;\n \n-      typedef _Traits\t\t\t\t\t    traits_type;\n+      typedef _Traits\t\t\t\t\t    traits_type;      \n       typedef typename _Traits::char_type\t\t    value_type;\n       typedef typename _CharT_alloc_type::size_type\t    size_type;\n-      typedef typename _CharT_alloc_type::difference_type   difference_type;\n+      typedef typename _CharT_alloc_type::difference_type   difference_type;      \n       typedef typename _CharT_alloc_type::pointer\t    pointer;\n       typedef typename _CharT_alloc_type::const_pointer\t    const_pointer;\n \n@@ -165,8 +164,14 @@ _GLIBCXX_BEGIN_NAMESPACE(__gnu_cxx)\n       static int\n       _S_compare(size_type __n1, size_type __n2)\n       {\n-\tconst difference_type __d = __n1 - __n2;\n-\treturn __d == 0 ? 0 : (__d > 0 ? 1 : -1);\n+\tconst difference_type __d = difference_type(__n1 - __n2);\n+\n+\tif (__d > __numeric_traits_integer<int>::__max)\n+\t  return __numeric_traits_integer<int>::__max;\n+\telse if (__d < __numeric_traits_integer<int>::__min)\n+\t  return __numeric_traits_integer<int>::__min;\n+\telse\n+\t  return int(__d);\n       }\n     };\n "}]}