{"sha": "08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhlYmMxYzU5NGY2ZWQwYWFhNGE1NWU4NjU4MjNjNGNlZTg4NWQ0Yw==", "commit": {"author": {"name": "Neil Booth", "email": "neilb@earthling.net", "date": "2000-09-16T07:18:06Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2000-09-16T07:18:06Z"}, "message": "cpplex.c (push_macro_context): Set an argument's level after calling parse_args.\n\n\t* cpplex.c (push_macro_context): Set an argument's level after\n\tcalling parse_args.  We could loop infinitely otherwise.\n\t* gcc.dg/cpp/macro2.c: New testcase.\n\nFrom-SVN: r36452", "tree": {"sha": "00ba9b3bf0ea085e6567ae8757f031718f05cf5b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/00ba9b3bf0ea085e6567ae8757f031718f05cf5b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/comments", "author": null, "committer": null, "parents": [{"sha": "d9fbca261ef44d0d58573baff8719a6a01ed0bca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9fbca261ef44d0d58573baff8719a6a01ed0bca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9fbca261ef44d0d58573baff8719a6a01ed0bca"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "f218aa13f29813af6a85593925f5c6eda7d95946", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "patch": "@@ -1,3 +1,8 @@\n+Sat 16-Sep-2000 08:13:45 BST  Neil Booth  <NeilB@earthling.net>\n+\n+\t* cpplex.c (push_macro_context): Set an argument's level after\n+\tcalling parse_args.  We could loop infinitely otherwise.\n+\n 2000-09-15  Tom Tromey  <tromey@cygnus.com>\n \n \t* configure, config.in: Rebuilt."}, {"sha": "970b35ff7165399717acebccbb41fe5533b17300", "filename": "gcc/cpplex.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2Fcpplex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2Fcpplex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplex.c?ref=08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "patch": "@@ -2972,7 +2972,6 @@ push_macro_context (pfile, token)\n       args->tokens = 0;\n       args->capacity = 0;\n       args->used = 0;\n-      args->level = pfile->cur_context;\n \n       prev_nme = prevent_macro_expansion (pfile);\n       pfile->args = args;\n@@ -2984,6 +2983,8 @@ push_macro_context (pfile, token)\n \t  free_macro_args (args);\n \t  return 1;\n \t}\n+      /* Set the level after the call to parse_args.  */\n+      args->level = pfile->cur_context;\n     }\n \n   /* Now push its context.  */"}, {"sha": "510c0333be1deca00c90c8c3ed77f886c3194a57", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "patch": "@@ -1,3 +1,8 @@\n+Sat 16-Sep-2000 08:14:58 BST  Neil Booth  <NeilB@earthling.net>\n+\n+\t* gcc.dg/cpp/macro2.c: Testcase for multi-context arguments\n+\tin nested macro bug.\n+\n Fri 15-Sep-2000 06:50:11 BST  Neil Booth  <NeilB@earthling.net>\n \n \t* gcc.dg/cpp/paste10.c: Testcase for PASTE_LEFT buglet."}, {"sha": "2265a2b4cb07f7f1469f708f91de99a1f427e18d", "filename": "gcc/testsuite/gcc.dg/cpp/macro2.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmacro2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08ebc1c594f6ed0aaa4a55e865823c4cee885d4c/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmacro2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Fmacro2.c?ref=08ebc1c594f6ed0aaa4a55e865823c4cee885d4c", "patch": "@@ -0,0 +1,14 @@\n+/* Copyright (C) 2000 Free Software Foundation, Inc.  */\n+\n+/* { dg-do preprocess } */\n+\n+/* Tests the argument context get set at the lower level if we drop\n+   contexts whilst parsing arguments.  This would enter an infinite\n+   loop in is_macro_disabled previously.  */\n+\n+#define A Something\n+#define B C\n+#define C K(\n+#define K(S) S  \n+#define T B A )\n+T\t\t\t\t/* Expands to <Something>.  */"}]}