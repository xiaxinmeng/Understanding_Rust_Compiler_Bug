{"sha": "dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGZhZTkwNDhhMGNlMDZhOGYyNDBkZDE3YzI4MmNiMWUxZWFmMjA5Nw==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-05-05T09:02:22Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-05-05T09:02:22Z"}, "message": "re PR c++/71577 (ICE on invalid C++11 code (with extra struct initializer): in digest_init_r, at cp/typeck2.c:1117)\n\n/cp\n2017-05-05  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71577\n\t* decl.c (reshape_init): Unconditionally return error_mark_node\n\tupon error about too many initializers.\n\n/testsuite\n2017-05-05  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71577\n\t* g++.dg/cpp0x/pr71577.C: New.\n\nFrom-SVN: r247630", "tree": {"sha": "cfad746ae0831c36a6a5d19661cae366088ed52d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cfad746ae0831c36a6a5d19661cae366088ed52d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/comments", "author": null, "committer": null, "parents": [{"sha": "56871768b4cf5c2fd82456e03ae2f83a9789d2fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/56871768b4cf5c2fd82456e03ae2f83a9789d2fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/56871768b4cf5c2fd82456e03ae2f83a9789d2fb"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "768f5a3614fd9ba555a56a9576ac6338a4418e04", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "patch": "@@ -1,3 +1,9 @@\n+2017-05-05  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71577\n+\t* decl.c (reshape_init): Unconditionally return error_mark_node\n+\tupon error about too many initializers.\n+\n 2017-05-04  Nathan Sidwell  <nathan@acm.org>\n \n \t* constraint.cc (diagnose_check_constraint): Fix %E thinko."}, {"sha": "38ba0b0abd2afb762be00f2ecb236694d386020c", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "patch": "@@ -6116,8 +6116,7 @@ reshape_init (tree type, tree init, tsubst_flags_t complain)\n     {\n       if (complain & tf_error)\n \terror (\"too many initializers for %qT\", type);\n-      else\n-\treturn error_mark_node;\n+      return error_mark_node;\n     }\n \n   if (CONSTRUCTOR_IS_DIRECT_INIT (init)"}, {"sha": "f9ac3346a7a147d1d11c3762dfcacf62a40251ab", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "patch": "@@ -1,3 +1,8 @@\n+2017-05-05  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71577\n+\t* g++.dg/cpp0x/pr71577.C: New.\n+\n 2017-05-04  Martin Sebor  <msebor@redhat.com>\n \n \tPR middle-end/79234"}, {"sha": "15794ad62cb6c2fc231dadcc4635e22f40be286d", "filename": "gcc/testsuite/g++.dg/cpp0x/pr71577.C", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71577.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dfae9048a0ce06a8f240dd17c282cb1e1eaf2097/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71577.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71577.C?ref=dfae9048a0ce06a8f240dd17c282cb1e1eaf2097", "patch": "@@ -0,0 +1,4 @@\n+// PR c++/71577\n+// { dg-do compile { target c++11 } }\n+\n+struct { int a; } s1, s2 = { s1, 0 };  // { dg-error \"too many initializers\" }"}]}