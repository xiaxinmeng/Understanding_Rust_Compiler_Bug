{"sha": "4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGExMGZiOTQxNmNlZmUwNTBjODA0MDA2YWE3N2NhNGZkNmE4ZThhYg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2010-12-12T19:12:08Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2010-12-12T19:12:08Z"}, "message": "varasm.c (default_function_section): Check flag_reorder_functions and targetm.have_named_sections.\n\n\n\n\t* varasm.c (default_function_section): Check flag_reorder_functions\n\tand targetm.have_named_sections.\n\t* config/darwin.c (darwin_function_section): Check\n\tflag_reorder_functions.\n\nCo-Authored-By: Rainer Orth <ro@CeBiTec.Uni-Bielefeld.DE>\n\nFrom-SVN: r167727", "tree": {"sha": "224d943744c0280beb3d5ed43a18df98b06231cf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/224d943744c0280beb3d5ed43a18df98b06231cf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/comments", "author": null, "committer": null, "parents": [{"sha": "dcac2e64b306166f78fd8484009268916148a19d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dcac2e64b306166f78fd8484009268916148a19d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dcac2e64b306166f78fd8484009268916148a19d"}], "stats": {"total": 13, "additions": 13, "deletions": 0}, "files": [{"sha": "73329a8c3abcd9a387204f12e9e2c12e367c4d2b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "patch": "@@ -1,3 +1,11 @@\n+2010-12-12  Jan Hubicka  <jh@suse.cz>\n+\t    Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* varasm.c (default_function_section): Check flag_reorder_functions\n+\tand targetm.have_named_sections.\n+\t* config/darwin.c (darwin_function_section): Check\n+\tflag_reorder_functions.\n+\n 2010-12-12  Finn Thain  <fthain@telegraphics.com.au>\n \n \tPR target/46179"}, {"sha": "8ae6409bcee74255cfb6fea3ebe0f5c8c883950c", "filename": "gcc/config/darwin.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/gcc%2Fconfig%2Fdarwin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/gcc%2Fconfig%2Fdarwin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.c?ref=4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "patch": "@@ -2968,6 +2968,8 @@ section *\n darwin_function_section (tree decl, enum node_frequency freq,\n \t\t\t  bool startup, bool exit)\n {\n+  if (!flag_reorder_functions)\n+    return NULL;\n   /* Startup code should go to startup subsection unless it is\n      unlikely executed (this happens especially with function splitting\n      where we can split away unnecesary parts of static constructors.  */"}, {"sha": "891d4e06e572738a0006c8f62edd0d1ed2e83274", "filename": "gcc/varasm.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4a10fb9416cefe050c804006aa77ca4fd6a8e8ab/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=4a10fb9416cefe050c804006aa77ca4fd6a8e8ab", "patch": "@@ -533,6 +533,9 @@ section *\n default_function_section (tree decl, enum node_frequency freq,\n \t\t\t  bool startup, bool exit)\n {\n+  if (!flag_reorder_functions\n+      || !targetm.have_named_sections)\n+    return NULL;\n   /* Startup code should go to startup subsection unless it is\n      unlikely executed (this happens especially with function splitting\n      where we can split away unnecesary parts of static constructors.  */"}]}