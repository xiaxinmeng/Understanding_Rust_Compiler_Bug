{"sha": "49071ddced0d0e0e3425fa7dc054744ca1f3e491", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDkwNzFkZGNlZDBkMGUwZTM0MjVmYTdkYzA1NDc0NGNhMWYzZTQ5MQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1999-03-08T17:50:37Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1999-03-08T17:50:37Z"}, "message": "Fix performance problem on SH with unnecessary move instructions.\n\n\t* local-alloc.c (combine_regs): Don't combine if we have a hard reg\n\tfor which CLASS_LIKELY_SPILLED_P is true.\n\nFrom-SVN: r25644", "tree": {"sha": "1a1b10b8f474423521688b3622cb9fc89a44b410", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a1b10b8f474423521688b3622cb9fc89a44b410"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/49071ddced0d0e0e3425fa7dc054744ca1f3e491", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49071ddced0d0e0e3425fa7dc054744ca1f3e491", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49071ddced0d0e0e3425fa7dc054744ca1f3e491", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49071ddced0d0e0e3425fa7dc054744ca1f3e491/comments", "author": null, "committer": null, "parents": [{"sha": "66830675f2c2820222585b4a84b3f2ab7912dfbb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/66830675f2c2820222585b4a84b3f2ab7912dfbb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/66830675f2c2820222585b4a84b3f2ab7912dfbb"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "4f83b46e2dd99e1aa980f0bc809442580b97bbeb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49071ddced0d0e0e3425fa7dc054744ca1f3e491/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49071ddced0d0e0e3425fa7dc054744ca1f3e491/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=49071ddced0d0e0e3425fa7dc054744ca1f3e491", "patch": "@@ -1,5 +1,8 @@\n Mon Mar  8 16:04:44 1999  Jim Wilson  <wilson@cygnus.com>\n \n+\t* local-alloc.c (combine_regs): Don't combine if we have a hard reg\n+\tfor which CLASS_LIKELY_SPILLED_P is true.\n+\n \t* unroll.c (loop_iterations): Only call loop_find_equiv_value if we\n \thave a REG or SUBREG.\n "}, {"sha": "d3dde6b75558cf0b1c7c9d5b602afd18b48d37e2", "filename": "gcc/local-alloc.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/49071ddced0d0e0e3425fa7dc054744ca1f3e491/gcc%2Flocal-alloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/49071ddced0d0e0e3425fa7dc054744ca1f3e491/gcc%2Flocal-alloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flocal-alloc.c?ref=49071ddced0d0e0e3425fa7dc054744ca1f3e491", "patch": "@@ -1648,6 +1648,11 @@ combine_regs (usedreg, setreg, may_save_copy, insn_number, insn, already_dead)\n       || ureg == sreg\n       /* Don't try to connect two different hardware registers.  */\n       || (ureg < FIRST_PSEUDO_REGISTER && sreg < FIRST_PSEUDO_REGISTER)\n+      /* Don't use a hard reg that might be spilled.  */\n+      || (ureg < FIRST_PSEUDO_REGISTER\n+\t  && CLASS_LIKELY_SPILLED_P (REGNO_REG_CLASS (ureg)))\n+      || (sreg < FIRST_PSEUDO_REGISTER\n+\t  && CLASS_LIKELY_SPILLED_P (REGNO_REG_CLASS (sreg)))\n       /* Don't connect two different machine modes if they have different\n \t implications as to which registers may be used.  */\n       || !MODES_TIEABLE_P (GET_MODE (usedreg), GET_MODE (setreg)))"}]}