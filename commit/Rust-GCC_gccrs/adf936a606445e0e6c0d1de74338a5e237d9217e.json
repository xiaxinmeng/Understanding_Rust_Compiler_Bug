{"sha": "adf936a606445e0e6c0d1de74338a5e237d9217e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWRmOTM2YTYwNjQ0NWUwZTZjMGQxZGU3NDMzOGE1ZTIzN2Q5MjE3ZQ==", "commit": {"author": {"name": "Hans Boehm", "email": "Hans_Boehm@hp.com", "date": "2003-03-15T01:04:08Z"}, "committer": {"name": "Hans Boehm", "email": "hboehm@gcc.gnu.org", "date": "2003-03-15T01:04:08Z"}, "message": "* java/lang/natObject.cc (JV_SYNC_HASH): replace signed % by &.\n\nFrom-SVN: r64386", "tree": {"sha": "8a261cf216a113001d3cf5b6a34e913b55d44e86", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a261cf216a113001d3cf5b6a34e913b55d44e86"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/adf936a606445e0e6c0d1de74338a5e237d9217e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adf936a606445e0e6c0d1de74338a5e237d9217e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adf936a606445e0e6c0d1de74338a5e237d9217e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adf936a606445e0e6c0d1de74338a5e237d9217e/comments", "author": null, "committer": null, "parents": [{"sha": "af2e51f395c787456d1aa70ae60dde6e6f2fb068", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af2e51f395c787456d1aa70ae60dde6e6f2fb068", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af2e51f395c787456d1aa70ae60dde6e6f2fb068"}], "stats": {"total": 10, "additions": 7, "deletions": 3}, "files": [{"sha": "afa56a7b2113d065a97974cd8a84865a10880f09", "filename": "libjava/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adf936a606445e0e6c0d1de74338a5e237d9217e/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adf936a606445e0e6c0d1de74338a5e237d9217e/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=adf936a606445e0e6c0d1de74338a5e237d9217e", "patch": "@@ -1,3 +1,7 @@\n+2003-03-14  Hans Boehm  <Hans.Boehm@hp.com>\n+\n+\t* java/lang/natObject.cc (JV_SYNC_HASH): replace signed % by &.\n+\n 2003-02-14  Jeroen Frijters  <jeroen@sumatra.nl>\n \n \t* java/io/ObjectInputStream.java (readObject): Cleaned up the class"}, {"sha": "24faf29e51e165679c8d6915d245e28235e014b3", "filename": "libjava/java/lang/natObject.cc", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adf936a606445e0e6c0d1de74338a5e237d9217e/libjava%2Fjava%2Flang%2FnatObject.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adf936a606445e0e6c0d1de74338a5e237d9217e/libjava%2Fjava%2Flang%2FnatObject.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatObject.cc?ref=adf936a606445e0e6c0d1de74338a5e237d9217e", "patch": "@@ -351,7 +351,7 @@ struct heavy_lock {\n   obj_addr_t address;\t\t// Object to which this lock corresponds.\n \t\t\t\t// Should not be traced by GC.\n   \t\t\t\t// Cleared as heavy_lock is destroyed.\n-  \t\t\t\t// Together with the rest of the hevy lock\n+  \t\t\t\t// Together with the rest of the heavy lock\n   \t\t\t\t// chain, this is protected by the lock\n   \t\t\t\t// bit in the hash table entry to which\n   \t\t\t\t// the chain is attached.\n@@ -457,12 +457,12 @@ struct hash_entry {\n };\n \n #ifndef JV_SYNC_TABLE_SZ\n-# define JV_SYNC_TABLE_SZ 2048\n+# define JV_SYNC_TABLE_SZ 2048\t// Must be power of 2.\n #endif\n \n hash_entry light_locks[JV_SYNC_TABLE_SZ];\n \n-#define JV_SYNC_HASH(p) (((long)p ^ ((long)p >> 10)) % JV_SYNC_TABLE_SZ)\n+#define JV_SYNC_HASH(p) (((long)p ^ ((long)p >> 10)) & (JV_SYNC_TABLE_SZ-1))\n \n // Note that the light_locks table is scanned conservatively by the\n // collector.  It is essential the the heavy_locks field is scanned."}]}