{"sha": "0be4693a48dfdb376dcb42fad36b286c6f10e178", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGJlNDY5M2E0OGRmZGIzNzZkY2I0MmZhZDM2YjI4NmM2ZjEwZTE3OA==", "commit": {"author": {"name": "Kazuhiro Inaoka", "email": "inaoka.kazuhiro@renesas.com", "date": "2005-05-24T07:45:24Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "2005-05-24T07:45:24Z"}, "message": "m32r.c (m32r_expand_block_move): Return 0 if nothing was done.\n\n* config/m32r/m32r.c (m32r_expand_block_move):  Return 0 if nothing was done.\n* config/m32r/m32r.md (movmemsi):  If m32r_expand_block_move did nothing then FAIL.\n* config/m32r/m32r/m32r-protos.h  (m32r_expand_block_move): Update prototype.\n\nFrom-SVN: r100095", "tree": {"sha": "aa8ed62f6fd0c8570038b5f7bb692f58f03067f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa8ed62f6fd0c8570038b5f7bb692f58f03067f2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0be4693a48dfdb376dcb42fad36b286c6f10e178", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0be4693a48dfdb376dcb42fad36b286c6f10e178", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0be4693a48dfdb376dcb42fad36b286c6f10e178", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0be4693a48dfdb376dcb42fad36b286c6f10e178/comments", "author": null, "committer": null, "parents": [{"sha": "37495922d7e87afab5e5dad3a54639064a4b5d68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37495922d7e87afab5e5dad3a54639064a4b5d68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37495922d7e87afab5e5dad3a54639064a4b5d68"}], "stats": {"total": 30, "additions": 22, "deletions": 8}, "files": [{"sha": "7202609ab5c2500feaaa72cee3fc26f9b73e744d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0be4693a48dfdb376dcb42fad36b286c6f10e178", "patch": "@@ -1,3 +1,12 @@\n+2005-05-24  Kazuhiro Inaoka <inaoka.kazuhiro@renesas.com>\n+\n+\t* config/m32r/m32r.c (m32r_expand_block_move):  Return 0 if\n+\tnothing was done.\n+\t* config/m32r/m32r.md (movmemsi):  If m32r_expand_block_move did\n+\tnothing then FAIL.\n+\t* config/m32r/m32r/m32r-protos.h  (m32r_expand_block_move): Update\n+\tprototype.\n+\n 2005-05-23  Jeff Law  <law@redhat.com>\n \n \t* tree-ssa-dom.c (cprop_into_stmt): Do not call"}, {"sha": "0030f75b147db8427bc4ff6805b452bec3f735c9", "filename": "gcc/config/m32r/m32r-protos.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2Fconfig%2Fm32r%2Fm32r-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2Fconfig%2Fm32r%2Fm32r-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32r%2Fm32r-protos.h?ref=0be4693a48dfdb376dcb42fad36b286c6f10e178", "patch": "@@ -47,7 +47,7 @@ extern void   m32r_initialize_trampoline (rtx, rtx, rtx);\n extern int    zero_and_one (rtx, rtx);\n extern char * emit_cond_move (rtx *, rtx);\n extern void   m32r_output_block_move (rtx, rtx *);\n-extern void   m32r_expand_block_move (rtx *);\n+extern int    m32r_expand_block_move (rtx *);\n extern void   m32r_print_operand (FILE *, rtx, int);\n extern void   m32r_print_operand_address (FILE *, rtx);\n extern int    m32r_not_same_reg (rtx, rtx);"}, {"sha": "6e0820321766d4de40cb7d5bbb79ebc6773b0274", "filename": "gcc/config/m32r/m32r.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2Fconfig%2Fm32r%2Fm32r.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2Fconfig%2Fm32r%2Fm32r.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32r%2Fm32r.c?ref=0be4693a48dfdb376dcb42fad36b286c6f10e178", "patch": "@@ -2201,9 +2201,11 @@ block_move_call (rtx dest_reg, rtx src_reg, rtx bytes_rtx)\n    operands[0] is the pointer to the destination.\n    operands[1] is the pointer to the source.\n    operands[2] is the number of bytes to move.\n-   operands[3] is the alignment.  */\n+   operands[3] is the alignment.\n \n-void\n+   Returns 1 upon success, 0 otherwise.  */\n+\n+int\n m32r_expand_block_move (rtx operands[])\n {\n   rtx           orig_dst  = operands[0];\n@@ -2218,7 +2220,7 @@ m32r_expand_block_move (rtx operands[])\n   rtx           dst_reg;\n \n   if (constp && bytes <= 0)\n-    return;\n+    return 1;\n \n   /* Move the address into scratch registers.  */\n   dst_reg = copy_addr_to_reg (XEXP (orig_dst, 0));\n@@ -2233,7 +2235,7 @@ m32r_expand_block_move (rtx operands[])\n   if (optimize_size || ! constp || align != UNITS_PER_WORD)\n     {\n       block_move_call (dst_reg, src_reg, bytes_rtx);\n-      return;\n+      return 0;\n     }\n \n   leftover = bytes % MAX_MOVE_BYTES;\n@@ -2290,6 +2292,7 @@ m32r_expand_block_move (rtx operands[])\n     emit_insn (gen_movmemsi_internal (dst_reg, src_reg, GEN_INT (leftover),\n \t\t\t\t      gen_reg_rtx (SImode),\n \t\t\t\t      gen_reg_rtx (SImode)));\n+  return 1;\n }\n \n \f"}, {"sha": "817c3c0287af01877ddbe5502341c227b0cc0036", "filename": "gcc/config/m32r/m32r.md", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2Fconfig%2Fm32r%2Fm32r.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0be4693a48dfdb376dcb42fad36b286c6f10e178/gcc%2Fconfig%2Fm32r%2Fm32r.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32r%2Fm32r.md?ref=0be4693a48dfdb376dcb42fad36b286c6f10e178", "patch": "@@ -2542,10 +2542,12 @@\n   \"\"\n   \"\n {\n-  if (operands[0])\t\t/* avoid unused code messages */\n+  if (operands[0])\t\t/* Avoid unused code messages.  */\n     {\n-      m32r_expand_block_move (operands);\n-      DONE;\n+     if (m32r_expand_block_move (operands))\n+       DONE;\n+     else\n+       FAIL;\n     }\n }\")\n "}]}