{"sha": "f9f7f4c9f849c7c767265eb20d152d7fb27232a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjlmN2Y0YzlmODQ5YzdjNzY3MjY1ZWIyMGQxNTJkN2ZiMjcyMzJhOA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-08-25T23:10:36Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-08-25T23:10:36Z"}, "message": "Added peephole definitions for Load/Store Base insns and eliminating redundant...\n\nAdded peephole definitions for Load/Store Base insns and eliminating\nredundant load in an equivalent store/load sequence.\n\nFrom-SVN: r10278", "tree": {"sha": "a26da90c0b8406d5f255d18ea20927bcc29f9008", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a26da90c0b8406d5f255d18ea20927bcc29f9008"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f9f7f4c9f849c7c767265eb20d152d7fb27232a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9f7f4c9f849c7c767265eb20d152d7fb27232a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f9f7f4c9f849c7c767265eb20d152d7fb27232a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f9f7f4c9f849c7c767265eb20d152d7fb27232a8/comments", "author": null, "committer": null, "parents": [{"sha": "fb409a19b2c9244fb32d6c215ec782fcbe6600d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb409a19b2c9244fb32d6c215ec782fcbe6600d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb409a19b2c9244fb32d6c215ec782fcbe6600d9"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "2032e23322859f86bf467776b0fd48e71d200f77", "filename": "gcc/config/1750a/1750a.md", "status": "modified", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f9f7f4c9f849c7c767265eb20d152d7fb27232a8/gcc%2Fconfig%2F1750a%2F1750a.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f9f7f4c9f849c7c767265eb20d152d7fb27232a8/gcc%2Fconfig%2F1750a%2F1750a.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2F1750a%2F1750a.md?ref=f9f7f4c9f849c7c767265eb20d152d7fb27232a8", "patch": "@@ -1275,5 +1275,59 @@\n   \"INTVAL(operands[2]) == -1\"\n   \"soj r%0,%3\")\n \n+;; Load Base\n+(define_peephole \n+  [(set (match_operand:QI 0 \"register_operand\" \"=r\")\n+        (mem:QI (plus:QI (match_operand:QI 1 \"register_operand\" \"x\")\n+                         (match_operand:QI 2 \"immediate_operand\" \"L\"))))\n+   ]\n+  \"REGNO(operands[0]) == 2 && REGNO(operands[1]) >= 12\n+    && INTVAL(operands[2]) <= 255\"\n+  \"lb r%1,%2\")\n+\n+;; Double Load Base\n+(define_peephole \n+  [(set (match_operand:HI 0 \"register_operand\" \"=r\")\n+        (mem:HI (plus:QI (match_operand:QI 1 \"register_operand\" \"x\")\n+                         (match_operand:QI 2 \"immediate_operand\" \"L\"))))\n+   ]\n+  \"REGNO(operands[0]) == 0 && REGNO(operands[1]) >= 12\n+    && INTVAL(operands[2]) <= 255\"\n+  \"dlb r%1,%2\")\n+\n+;; Store Base\n+(define_peephole \n+  [(set (mem:QI (plus:QI (match_operand:QI 0 \"register_operand\" \"x\")\n+                         (match_operand:QI 1 \"immediate_operand\" \"L\")))\n+\t(match_operand:QI 2 \"register_operand\" \"r\"))\n+   ]\n+  \"REGNO(operands[2]) == 2 && REGNO(operands[0]) >= 12\n+    && INTVAL(operands[1]) <= 255\"\n+  \"stb r%0,%1\")\n+\n+;; Double Store Base\n+(define_peephole \n+  [(set (mem:HI (plus:QI (match_operand:QI 0 \"register_operand\" \"x\")\n+                         (match_operand:QI 1 \"immediate_operand\" \"L\")))\n+\t(match_operand:HI 2 \"register_operand\" \"r\"))\n+   ]\n+  \"REGNO(operands[2]) == 0 && REGNO(operands[0]) >= 12\n+    && INTVAL(operands[1]) <= 255\"\n+  \"stb r%0,%1\")\n+\n+;; Eliminate the redundant load in a store/load sequence\n+(define_peephole \n+  [(set (mem:QI (plus:QI (match_operand:QI 0 \"register_operand\" \"r\")\n+                         (match_operand:QI 1 \"immediate_operand\" \"i\")))\n+\t(match_operand:QI 2 \"register_operand\" \"r\"))\n+   (set (match_operand:QI 3 \"register_operand\" \"=r\")\n+\t(mem:QI (plus:QI (match_operand:QI 4 \"register_operand\" \"r\")\n+\t\t\t (match_operand:QI 5 \"immediate_operand\" \"i\"))))\n+   ]\n+  \"REGNO(operands[2]) == REGNO(operands[3]) &&\n+   REGNO(operands[0]) == REGNO(operands[4]) &&\n+   INTVAL(operands[1]) == INTVAL(operands[5])\"\n+  \"st r%2,%1,r%0  ; eliminated previous redundant load\")\n+\n ;;;End.\n "}]}