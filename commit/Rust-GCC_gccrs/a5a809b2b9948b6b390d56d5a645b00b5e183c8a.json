{"sha": "a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVhODA5YjJiOTk0OGI2YjM5MGQ1NmQ1YTY0NWIwMGI1ZTE4M2M4YQ==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-29T11:03:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2012-10-29T11:03:27Z"}, "message": "[multiple changes]\n\n2012-10-29  Robert Dewar  <dewar@adacore.com>\n\n\t* xr_tabls.adb, xr_tabls.ads, exp_ch9.adb, snames.adb-tmpl,\n\tsnames.ads-tmpl, exp_ch3.adb: Minor reformatting.\n\n2012-10-29  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch6.adb: Call Build_Subprogrm_Instance_Renamings only when\n\tgenerating code.\n\n2012-10-29  Robert Dewar  <dewar@adacore.com>\n\n\t* gnat_ugn.texi: Add documentation for -gnatw.k/-gnatw.K.\n\t* ug_words: Add entries for -gnatw.k/.K for [NO]STANDARD_REDEFINITION.\n\t* vms_data.ads: Add entries for [NO]STANDARD_REDEFINITION.\n\nFrom-SVN: r192929", "tree": {"sha": "6616e736e6245bfa07207817435e403b4e13eb41", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6616e736e6245bfa07207817435e403b4e13eb41"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/comments", "author": null, "committer": null, "parents": [{"sha": "54f471f02471d0e135ad1d9683b89afe92ff3a15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54f471f02471d0e135ad1d9683b89afe92ff3a15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54f471f02471d0e135ad1d9683b89afe92ff3a15"}], "stats": {"total": 99, "additions": 73, "deletions": 26}, "files": [{"sha": "0793113072e8dd426bcd8bb393074cd3424e0ee1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -1,3 +1,19 @@\n+2012-10-29  Robert Dewar  <dewar@adacore.com>\n+\n+\t* xr_tabls.adb, xr_tabls.ads, exp_ch9.adb, snames.adb-tmpl,\n+\tsnames.ads-tmpl, exp_ch3.adb: Minor reformatting.\n+\n+2012-10-29  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch6.adb: Call Build_Subprogrm_Instance_Renamings only when\n+\tgenerating code.\n+\n+2012-10-29  Robert Dewar  <dewar@adacore.com>\n+\n+\t* gnat_ugn.texi: Add documentation for -gnatw.k/-gnatw.K.\n+\t* ug_words: Add entries for -gnatw.k/.K for [NO]STANDARD_REDEFINITION.\n+\t* vms_data.ads: Add entries for [NO]STANDARD_REDEFINITION.\n+\n 2012-10-29  Tristan Gingold  <gingold@adacore.com>\n \n \t* exp_ch9.adb, s-tarest.ads, exp_ch3.adb: Update comments."}, {"sha": "0e703da2237c4fdabf83855be2f554d99f9a9bdb", "filename": "gcc/ada/exp_ch3.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fexp_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fexp_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch3.adb?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -1538,7 +1538,7 @@ package body Exp_Ch3 is\n          end if;\n \n          --  Add _Chain (not done in the restricted profile because not used,\n-         --  see comment of Create_Restricted_Task in s-tarest.ads).\n+         --  see comment for Create_Restricted_Task in s-tarest.ads).\n \n          if not Restricted_Profile then\n             Append_To (Args, Make_Identifier (Loc, Name_uChain));\n@@ -7809,7 +7809,7 @@ package body Exp_Ch3 is\n          if not Restricted_Profile then\n \n             --  No _Chain for the restricted profile because not used, see\n-            --  comment of Create_Restricted_Task in s-tarest.ads.\n+            --  comment for Create_Restricted_Task in s-tarest.ads.\n \n             Append_To (Formals,\n               Make_Parameter_Specification (Loc,"}, {"sha": "8ce3870f00239cebe73b8640ca87788dc164b4fd", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -912,7 +912,7 @@ package body Exp_Ch9 is\n \n    begin\n       --  Activation chain is never used in restricted profile, see comment\n-      --  of Create_Restricted_Task in s-tarest.ads.\n+      --  for Create_Restricted_Task in s-tarest.ads.\n \n       if Restricted_Profile then\n          return;"}, {"sha": "1a38806f8c048318baddfe12e5cdfe340646d6a4", "filename": "gcc/ada/gnat_ugn.texi", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fgnat_ugn.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fgnat_ugn.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat_ugn.texi?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -5159,6 +5159,7 @@ switch are\n @option{-gnatwh} (hiding),\n @option{-gnatw.h} (holes (gaps) in record layouts)\n @option{-gnatw.i} (overlapping actuals),\n+@option{-gnatw.k} (redefinition of names in standard),\n @option{-gnatwl} (elaboration warnings),\n @option{-gnatw.l} (inherited aspects),\n @option{-gnatw.o} (warn on values set by out parameters ignored),\n@@ -5469,6 +5470,24 @@ This warning can also be turned on using @option{-gnatwa}.\n @cindex @option{-gnatwK} (@command{gcc})\n This switch disables warnings on variables that could be declared constants.\n \n+@item -gnatw.k\n+@emph{Activate warnings on redefinition of names in standard.}\n+@cindex @option{-gnatw.k} (@command{gcc})\n+This switch activates warnings for declarations that declare a name that\n+is defined in package Standard. Such declarations can be confusing,\n+especially since the names in package Standard continue to be directly\n+visible, meaning that use visibiliy on such redeclared names does not\n+work as expected. Names of discriminants and components in records are\n+not included in this check.\n+This warning is not part of the warnings activated by @option{-gnatwa}.\n+It must be explicitly activated.\n+\n+@item -gnatw.K\n+@emph{Suppress warnings on variables that could be constants.}\n+@cindex @option{-gnatwK} (@command{gcc})\n+This switch activates warnings for declarations that declare a name that\n+is defined in package Standard.\n+\n @item -gnatwl\n @emph{Activate warnings for elaboration pragmas.}\n @cindex @option{-gnatwl} (@command{gcc})"}, {"sha": "37dc5befbcf095af55f056750877c40dc56e881c", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -2726,10 +2726,14 @@ package body Sem_Ch6 is\n             Last_Real_Spec_Entity := Last_Entity (Spec_Id);\n \n             --  Within an instance, add local renaming declarations so that\n-            --  gdb can retrieve the values of actuals more easily.\n+            --  gdb can retrieve the values of actuals more easily. This is\n+            --  only relevant if generating code (and indeed we definitely\n+            --  do not want these definitions -gnatc mode, because that would\n+            --  confuse ASIS).\n \n             if Is_Generic_Instance (Spec_Id)\n               and then Is_Wrapper_Package (Current_Scope)\n+              and then Expander_Active\n             then\n                Build_Subprogram_Instance_Renamings (N, Current_Scope);\n             end if;"}, {"sha": "9255395ffe4d67f239e4312bc160645a4d34b6b6", "filename": "gcc/ada/snames.adb-tmpl", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fsnames.adb-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fsnames.adb-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.adb-tmpl?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -423,11 +423,12 @@ package body Snames is\n    -- Is_Partition_Elaboration_Policy --\n    -------------------------------------\n \n-   function Is_Partition_Elaboration_Policy_Name (N : Name_Id)\n-      return Boolean is\n+   function Is_Partition_Elaboration_Policy_Name\n+     (N : Name_Id) return Boolean\n+   is\n    begin\n-      return N in First_Partition_Elaboration_Policy_Name\n-           ..  Last_Partition_Elaboration_Policy_Name;\n+      return N in First_Partition_Elaboration_Policy_Name ..\n+                  Last_Partition_Elaboration_Policy_Name;\n    end Is_Partition_Elaboration_Policy_Name;\n \n    -----------------------------"}, {"sha": "7987c8a41fd8db034890fd8ea7bf4f9e2fd74b60", "filename": "gcc/ada/snames.ads-tmpl", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fsnames.ads-tmpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fsnames.ads-tmpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsnames.ads-tmpl?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -1915,7 +1915,8 @@ package Snames is\n    function Is_Locking_Policy_Name (N : Name_Id) return Boolean;\n    --  Test to see if the name N is the name of a recognized locking policy\n \n-   function Is_Partition_Elaboration_Policy_Name (N : Name_Id) return Boolean;\n+   function Is_Partition_Elaboration_Policy_Name\n+     (N : Name_Id) return Boolean;\n    --  Test to see if the name N is the name of a recognized partition\n    --  elaboration policy.\n "}, {"sha": "b1b45c407cba77e797a30582f750dc03d1d52fa4", "filename": "gcc/ada/ug_words", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fug_words", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fug_words", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fug_words?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -170,6 +170,8 @@ gcc -c          ^ GNAT COMPILE\n -gnatw.P        ^ /WARNINGS=NO_PARAMETER_ORDER\n -gnatw.h        ^ /WARNINGS=OVERRIDING_SIZE\n -gnatw.H        ^ /WARNINGS=NOOVERRIDING_SIZE\n+-gnatw.k        ^ /WARNINGS=STANDARD_REDEFINITION\n+-gnatw.K        ^ /WARNINGS=NOSTANDARD_REDEFINITION\n -gnatwq         ^ /WARNINGS=MISSING_PARENS\n -gnatwQ         ^ /WARNINGS=NOMISSING_PARENS\n -gnatwr         ^ /WARNINGS=REDUNDANT"}, {"sha": "8c1c1eb73ec920285100da9ae1634f2e524b543c", "filename": "gcc/ada/vms_data.ads", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fvms_data.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fvms_data.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fvms_data.ads?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -3070,6 +3070,10 @@ package VMS_Data is\n                                                \"-gnatwk \"                  &\n                                             \"NOCONSTANT_VARIABLES \"        &\n                                                \"-gnatwK \"                  &\n+                                            \"STANDARD_REDEFINITION \"       &\n+                                               \"-gnatw.k \"                 &\n+                                            \"NOSTANDARD_REDEFINITION \"     &\n+                                               \"-gnatw.K \"                 &\n                                             \"ELABORATION \"                 &\n                                                \"-gnatwl \"                  &\n                                             \"NOELABORATION \"               &"}, {"sha": "61ac67523b0b77059dea53ae6c48f3e4ff4629a8", "filename": "gcc/ada/xr_tabls.adb", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fxr_tabls.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fxr_tabls.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxr_tabls.adb?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -295,10 +295,10 @@ package body Xr_Tabls is\n       then\n          New_Decl.Match := Default_Match\n            or else Match (File_Ref, Line, Column);\n-         New_Decl.Is_Parameter := New_Decl.Is_Parameter or else Is_Param;\n+         New_Decl.Is_Parameter := New_Decl.Is_Parameter or Is_Param;\n \n       elsif New_Decl /= null then\n-         New_Decl.Is_Parameter := New_Decl.Is_Parameter or else Is_Param;\n+         New_Decl.Is_Parameter := New_Decl.Is_Parameter or Is_Param;\n       end if;\n \n       return New_Decl;\n@@ -413,22 +413,23 @@ package body Xr_Tabls is\n \n          when '=' | '<' | '>' | '^' =>\n \n-            --  Create a dummy declaration in the table to report it as a\n-            --  parameter.\n+            --  Create dummy declaration in table to report it as a parameter\n+\n             --  In a given ALI file, the declaration of the subprogram comes\n             --  before the declaration of the parameter. However, it is\n             --  possible that another ALI file has been parsed that also\n-            --  references the parameter (for instance a named parameter in a\n-            --  call), so we need to check whether there already exists a\n+            --  references the parameter (for instance a named parameter in\n+            --  a call), so we need to check whether there already exists a\n             --  declaration for the parameter.\n \n-            New_Decl := Add_Declaration\n-              (File_Ref  => File_Ref,\n-               Symbol    => \"\",\n-               Line      => Line,\n-               Column    => Column,\n-               Decl_Type => ' ',\n-               Is_Parameter => True);\n+            New_Decl :=\n+              Add_Declaration\n+                (File_Ref     => File_Ref,\n+                 Symbol       => \"\",\n+                 Line         => Line,\n+                 Column       => Column,\n+                 Decl_Type    => ' ',\n+                 Is_Parameter => True);\n \n          when 'e' | 'z' | 't' | 'p' | 'P' | 'k' | 'd' =>\n             return;"}, {"sha": "b328b82b9034b3e7ca61ea94157d108c338dc305", "filename": "gcc/ada/xr_tabls.ads", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fxr_tabls.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5a809b2b9948b6b390d56d5a645b00b5e183c8a/gcc%2Fada%2Fxr_tabls.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fxr_tabls.ads?ref=a5a809b2b9948b6b390d56d5a645b00b5e183c8a", "patch": "@@ -88,10 +88,9 @@ package Xr_Tabls is\n    --  removed, but the new entity is never inserted. Symbol_Match should be\n    --  set to False if the name of the symbol doesn't match the pattern from\n    --  the command line. In that case, the entity will not be output by\n-   --  gnatfind. If Symbol_Match is True, the entity will only be output if the\n-   --  file name itself matches.\n-   --  Is_Parameter should be set to True if the entity is known to be a\n-   --  subprogram parameter.\n+   --  gnatfind. If Symbol_Match is True, the entity will only be output if\n+   --  the file name itself matches. Is_Parameter should be set to True if\n+   --  the entity is known to be a subprogram parameter.\n \n    procedure Add_Parent\n      (Declaration : in out Declaration_Reference;"}]}