{"sha": "beeb01541ae845b445837b873126a7f968b8f654", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmVlYjAxNTQxYWU4NDViNDQ1ODM3Yjg3MzEyNmE3Zjk2OGI4ZjY1NA==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-05-19T14:45:54Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2021-05-19T14:45:54Z"}, "message": "arm/testsuite: Fix testcase for PR99977\n\nSome targets (eg arm-none-uclinuxfdpiceabi) do not support Thumb-1,\nand since the testcase forces -march=armv8-m.base, we need to check\nwhether this option is actually supported.\n\nUsing dg-add-options arm_arch_v8m_base ensure that we pass -mthumb as\nneeded too.\n\n2021-05-19  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tPR target/99977\n\tgcc/testsuite/\n\t* gcc.target/arm/pr99977.c: Require arm_arch_v8m_base.", "tree": {"sha": "9b2e45f2b3fd7b671874966a629a0393f7fa72c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b2e45f2b3fd7b671874966a629a0393f7fa72c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/beeb01541ae845b445837b873126a7f968b8f654", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/beeb01541ae845b445837b873126a7f968b8f654", "html_url": "https://github.com/Rust-GCC/gccrs/commit/beeb01541ae845b445837b873126a7f968b8f654", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/beeb01541ae845b445837b873126a7f968b8f654/comments", "author": null, "committer": null, "parents": [{"sha": "1e6648076498a4644aabbfe3ec74b3b2a5b67772", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e6648076498a4644aabbfe3ec74b3b2a5b67772", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e6648076498a4644aabbfe3ec74b3b2a5b67772"}], "stats": {"total": 4, "additions": 3, "deletions": 1}, "files": [{"sha": "db330e4a4a3b120bbc9d67de2edd8a1f9f25d70b", "filename": "gcc/testsuite/gcc.target/arm/pr99977.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/beeb01541ae845b445837b873126a7f968b8f654/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr99977.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/beeb01541ae845b445837b873126a7f968b8f654/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr99977.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr99977.c?ref=beeb01541ae845b445837b873126a7f968b8f654", "patch": "@@ -1,5 +1,7 @@\n /* { dg-do compile } */\n-/* { dg-options \"-march=armv8-m.base -mfloat-abi=soft -O2\" } */\n+/* { dg-require-effective-target arm_arch_v8m_base_ok } */\n+/* { dg-options \"-O2\" } */\n+/* { dg-add-options arm_arch_v8m_base } */\n _Bool f1(int *p) { return __sync_bool_compare_and_swap (p, -1, 2); }\n _Bool f2(int *p) { return __sync_bool_compare_and_swap (p, -8, 2); }\n int g1(int *p) { return __sync_val_compare_and_swap (p, -1, 2); }"}]}