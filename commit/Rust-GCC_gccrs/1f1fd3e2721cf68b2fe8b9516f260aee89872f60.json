{"sha": "1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWYxZmQzZTI3MjFjZjY4YjJmZThiOTUxNmYyNjBhZWU4OTg3MmY2MA==", "commit": {"author": {"name": "Toma Tabacu", "email": "toma.tabacu@imgtec.com", "date": "2017-03-09T15:04:31Z"}, "committer": {"name": "Toma Tabacu", "email": "tomtab@gcc.gnu.org", "date": "2017-03-09T15:04:31Z"}, "message": "Add check_effective_target_rdynamic and use it in g++.dg/lto/pr69589_0.C.\n\ngcc/\n\t* doc/sourcebuild.texi (Effective-Target Keywords, Other attributes):\n\tDocument rdynamic.\n\ngcc/testsuite/\n\n\t* g++.dg/lto/pr69589_0.C: Add dg-require-effective-target for\n\trdynamic.  Remove dg-skip-if for targets which don't support -rdynamic.\n\t* lib/target-supports.exp (check_effective_target_rdynamic):\n\tNew proc.\n\nFrom-SVN: r246004", "tree": {"sha": "364a4eb26046fb29a3d4f50af876bf2651568315", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/364a4eb26046fb29a3d4f50af876bf2651568315"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/comments", "author": null, "committer": null, "parents": [{"sha": "9125b9fc80f832228067dfabb6282a321b8844a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9125b9fc80f832228067dfabb6282a321b8844a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9125b9fc80f832228067dfabb6282a321b8844a8"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "901d0a45033211f612d16190b00318d70b5fd4a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "patch": "@@ -1,3 +1,8 @@\n+2017-03-09  Toma Tabacu  <toma.tabacu@imgtec.com>\n+\n+\t* doc/sourcebuild.texi (Effective-Target Keywords, Other attributes):\n+\tDocument rdynamic.\n+\n 2017-03-09  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/79949"}, {"sha": "84d9a22ccf7b092ddbfe15194bc4fc8a84cb5477", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "patch": "@@ -2068,6 +2068,9 @@ Target supports @option{-mpe-aligned-commons}.\n @item pie\n Target supports @option{-pie}, @option{-fpie} and @option{-fPIE}.\n \n+@item rdynamic\n+Target supports @option{-rdynamic}.\n+\n @item section_anchors\n Target supports section anchors.\n "}, {"sha": "deb6f6392592bd34338714dd996be6fc189e99f3", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "patch": "@@ -1,3 +1,10 @@\n+2017-03-09  Toma Tabacu  <toma.tabacu@imgtec.com>\n+\n+\t* g++.dg/lto/pr69589_0.C: Add dg-require-effective-target for\n+\trdynamic.  Remove dg-skip-if for targets which don't support -rdynamic.\n+\t* lib/target-supports.exp (check_effective_target_rdynamic):\n+\tNew proc.\n+\n 2017-03-09  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/79971"}, {"sha": "599d5d44960cd21c55746f4c5c7837539ac8b168", "filename": "gcc/testsuite/g++.dg/lto/pr69589_0.C", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr69589_0.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr69589_0.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flto%2Fpr69589_0.C?ref=1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "patch": "@@ -1,7 +1,7 @@\n // { dg-lto-do link }\n // { dg-lto-options \"-O2 -rdynamic\" }\n // { dg-extra-ld-options \"-r -nostdlib\" }\n-// { dg-skip-if \"Skip targets without -rdynamic support\" { arm*-none-eabi aarch64*-*-elf nios2-*-elf } { \"*\" } { \"\" } }\n+// { dg-require-effective-target rdynamic }\n \n #pragma GCC visibility push(hidden)\n struct A { int &operator[] (long); };"}, {"sha": "43e497b4a8c677e8043ef2fe552481cdfbae6f69", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1f1fd3e2721cf68b2fe8b9516f260aee89872f60/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=1f1fd3e2721cf68b2fe8b9516f260aee89872f60", "patch": "@@ -1489,6 +1489,14 @@ proc check_effective_target_static_libgfortran { } {\n     } \"-static\"]\n }\n \n+# Return 1 if we can use the -rdynamic option, 0 otherwise.\n+\n+proc check_effective_target_rdynamic { } {\n+  return [check_no_compiler_messages rdynamic executable {\n+     int main() { return 0; }\n+  } \"-rdynamic\"]\n+}\n+\n # Return 1 if cilk-plus is supported by the target, 0 otherwise.\n  \n proc check_effective_target_cilkplus { } {"}]}