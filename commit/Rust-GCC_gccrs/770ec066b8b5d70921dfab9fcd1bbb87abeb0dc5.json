{"sha": "770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzcwZWMwNjZiOGI1ZDcwOTIxZGZhYjlmY2QxYmJiODdhYmViMGRjNQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-11-03T16:35:53Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2020-11-03T16:49:26Z"}, "message": "c++: Make extern-C mismatch an error\n\nduplicate_decls was being lenient about extern-c mismatches, allowing\nyou to have two declarations in the symbol table after emitting an\nerror.  This resulted in duplicate error messages in modules, when we\nfind the same problem multiple times.  Let's just not let that happen.\n\n\tgcc/cp/\n\t* decl.c (duplicate_decls): Return error_mark_node fo extern-c\n\tmismatch.", "tree": {"sha": "6a77dd4e5833dca8b806912e1d0a906b9fbd1129", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6a77dd4e5833dca8b806912e1d0a906b9fbd1129"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "082a7b239096caf422f7ef138e2729b2730c0d70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/082a7b239096caf422f7ef138e2729b2730c0d70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/082a7b239096caf422f7ef138e2729b2730c0d70"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "9428fa052586f0f4f768ae6aea130938bcbcff5f", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=770ec066b8b5d70921dfab9fcd1bbb87abeb0dc5", "patch": "@@ -1776,7 +1776,7 @@ duplicate_decls (tree newdecl, tree olddecl, bool hiding, bool was_hidden)\n \t\t\tnewdecl);\n \t      inform (olddecl_loc,\n \t\t      \"previous declaration %q#D\", olddecl);\n-\t      return NULL_TREE;\n+\t      return error_mark_node;\n \t    }\n \t  /* For function versions, params and types match, but they\n \t     are not ambiguous.  */"}]}