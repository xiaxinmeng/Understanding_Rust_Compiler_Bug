{"sha": "43052d458619645b576eff628bedcd02cdad2a2e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDMwNTJkNDU4NjE5NjQ1YjU3NmVmZjYyOGJlZGNkMDJjZGFkMmEyZQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@codesourcery.com", "date": "2011-09-13T20:40:53Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2011-09-13T20:40:53Z"}, "message": "cfgcleanup.c (try_head_merge_bb): If get_condition returns NULL for a jump that is a cc0 insn...\n\n\t* cfgcleanup.c (try_head_merge_bb): If get_condition returns\n\tNULL for a jump that is a cc0 insn, pick the previous insn for\n\tmove_before.\n\n\t* gcc.c-torture/compile/20110913-1.c: New test.\n\nFrom-SVN: r178834", "tree": {"sha": "d7f07a98f652d9df0af95a74a6a37c347bbe58d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7f07a98f652d9df0af95a74a6a37c347bbe58d7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/43052d458619645b576eff628bedcd02cdad2a2e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43052d458619645b576eff628bedcd02cdad2a2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43052d458619645b576eff628bedcd02cdad2a2e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43052d458619645b576eff628bedcd02cdad2a2e/comments", "author": null, "committer": null, "parents": [{"sha": "a5baf3b8ced93d9a633f3994bc649f0892f0d306", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5baf3b8ced93d9a633f3994bc649f0892f0d306", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5baf3b8ced93d9a633f3994bc649f0892f0d306"}], "stats": {"total": 54, "additions": 52, "deletions": 2}, "files": [{"sha": "74b187a8eff4b5729c2bde59b3fcf1a2ab5a98e9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=43052d458619645b576eff628bedcd02cdad2a2e", "patch": "@@ -1,3 +1,9 @@\n+2011-09-13  Bernd Schmidt  <bernds@codesourcery.com>\n+\n+\t* cfgcleanup.c (try_head_merge_bb): If get_condition returns\n+\tNULL for a jump that is a cc0 insn, pick the previous insn for\n+\tmove_before.\n+\n 2011-09-13  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* config/v850/v850.md: Use match_test rather than eq/ne symbol_ref"}, {"sha": "20a409c4faeee35cb7613f20766808285991c2e6", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=43052d458619645b576eff628bedcd02cdad2a2e", "patch": "@@ -2214,7 +2214,14 @@ try_head_merge_bb (basic_block bb)\n \n   cond = get_condition (jump, &move_before, true, false);\n   if (cond == NULL_RTX)\n-    move_before = jump;\n+    {\n+#ifdef HAVE_cc0\n+      if (reg_mentioned_p (cc0_rtx, jump))\n+\tmove_before = prev_nonnote_nondebug_insn (jump);\n+      else\n+#endif\n+\tmove_before = jump;\n+    }\n \n   for (ix = 0; ix < nedges; ix++)\n     if (EDGE_SUCC (bb, ix)->dest == EXIT_BLOCK_PTR)\n@@ -2376,7 +2383,14 @@ try_head_merge_bb (basic_block bb)\n       jump = BB_END (final_dest_bb);\n       cond = get_condition (jump, &move_before, true, false);\n       if (cond == NULL_RTX)\n-\tmove_before = jump;\n+\t{\n+#ifdef HAVE_cc0\n+\t  if (reg_mentioned_p (cc0_rtx, jump))\n+\t    move_before = prev_nonnote_nondebug_insn (jump);\n+\t  else\n+#endif\n+\t    move_before = jump;\n+\t}\n     }\n \n   do"}, {"sha": "95a064337cb1ab54d3f1dde78ed786c9393c97db", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=43052d458619645b576eff628bedcd02cdad2a2e", "patch": "@@ -1,3 +1,7 @@\n+2011-09-13  Bernd Schmidt  <bernds@codesourcery.com>\n+\n+\t* gcc.c-torture/compile/20110913-1.c: New test.\n+\n 2011-09-13  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/50379"}, {"sha": "e435a14b2ce4be81cb12c2947877b603db5ac22c", "filename": "gcc/testsuite/gcc.c-torture/compile/20110913-1.c", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20110913-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43052d458619645b576eff628bedcd02cdad2a2e/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20110913-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20110913-1.c?ref=43052d458619645b576eff628bedcd02cdad2a2e", "patch": "@@ -0,0 +1,26 @@\n+struct ieee754_double {\n+  double d;\n+};\n+extern const float __exp_deltatable[178];\n+float __ieee754_expf (float x)\n+{\n+  static const float himark = 88.72283935546875;\n+  static const float lomark = -103.972084045410;\n+  if (__builtin_isless(x, himark) && __builtin_isgreater(x, lomark))\n+    {\n+      int tval;\n+      double x22, t, result, dx;\n+      float delta;\n+      struct ieee754_double ex2_u;\n+      dx -= t;\n+      tval = (int) (t * 512.0);\n+      if (t >= 0)\n+\tdelta = - __exp_deltatable[tval];\n+      else\n+\tdelta = __exp_deltatable[-tval];\n+      x22 = (0.5000000496709180453 * dx + 1.0000001192102037084) * dx + delta;\n+      result = x22 * ex2_u.d + ex2_u.d;\n+      return (float) result;\n+    }\n+  return x;\n+}"}]}