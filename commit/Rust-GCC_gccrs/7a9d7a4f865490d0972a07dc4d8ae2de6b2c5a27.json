{"sha": "7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E5ZDdhNGY4NjU0OTBkMDk3MmEwN2RjNGQ4YWUyZGU2YjJjNWEyNw==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2011-03-04T17:52:10Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2011-03-04T17:52:10Z"}, "message": "PR 47802 Hack to work around draft POSIX localtime_r\n\nFrom-SVN: r170680", "tree": {"sha": "386f797f246906d22c61b0b7efb07cdcff08a569", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/386f797f246906d22c61b0b7efb07cdcff08a569"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27/comments", "author": null, "committer": null, "parents": [{"sha": "d9d114ecd0a494f9fabee9eada8ca2814eb10e68", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9d114ecd0a494f9fabee9eada8ca2814eb10e68", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9d114ecd0a494f9fabee9eada8ca2814eb10e68"}], "stats": {"total": 16, "additions": 13, "deletions": 3}, "files": [{"sha": "73e2bb2ad1318a26ad8053e5bb65805851cf2c96", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "patch": "@@ -1,3 +1,9 @@\n+2011-03-04  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR libfortran/47802\n+\t* intrinsics/ctime.c (strctime): Don't use return value of\n+\tlocaltime_r.\n+\n 2011-02-28  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libgfortran/47567"}, {"sha": "29a0e6f00f2fda37344d59e997023df988da4149", "filename": "libgfortran/intrinsics/ctime.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27/libgfortran%2Fintrinsics%2Fctime.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27/libgfortran%2Fintrinsics%2Fctime.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Fctime.c?ref=7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "patch": "@@ -39,9 +39,13 @@ static size_t\n strctime (char *s, size_t max, const time_t *timep)\n {\n #ifdef HAVE_STRFTIME\n-  struct tm res;\n-  struct tm *ltm = localtime_r (timep, &res);\n-  return strftime (s, max, \"%c\", ltm);\n+  struct tm ltm;\n+  /* Note: We can't use the return value of localtime_r, as some\n+     targets provide localtime_r based on a draft of the POSIX\n+     standard where the return type is int rather than the\n+     standardized struct tm*.  */\n+  localtime_r (timep, &ltm);\n+  return strftime (s, max, \"%c\", &ltm);\n #else\n   return 0;\n #endif"}]}