{"sha": "b220923f96344397c584245c09234a700b0ca243", "node_id": "C_kwDOANBUbNoAKGIyMjA5MjNmOTYzNDQzOTdjNTg0MjQ1YzA5MjM0YTcwMGIwY2EyNDM", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2022-09-28T13:33:41Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2022-09-30T21:53:26Z"}, "message": "rust: Reintroduce TARGET_RUST_OS_INFO hook\n\ngcc/ChangeLog:\n\n\t* doc/tm.texi: Regenerate.\n\t* doc/tm.texi.in: Document TARGET_RUST_OS_INFO.\n\ngcc/rust/ChangeLog:\n\n\t* rust/rust-session-manager.cc (Session::init): Call\n\ttargetrustm.rust_os_info.\n\t* rust/rust-target.def (rust_os_info): New hook.", "tree": {"sha": "7d380bc0f1a49ccb29acaf0098a19aff523238ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7d380bc0f1a49ccb29acaf0098a19aff523238ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b220923f96344397c584245c09234a700b0ca243", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b220923f96344397c584245c09234a700b0ca243", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b220923f96344397c584245c09234a700b0ca243", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b220923f96344397c584245c09234a700b0ca243/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f97e0ca6e4e5efb33a47f8a1f0a49375fd1197f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f97e0ca6e4e5efb33a47f8a1f0a49375fd1197f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f97e0ca6e4e5efb33a47f8a1f0a49375fd1197f9"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "75ae4b2aebe66d6f794811e8a9a1fbb0f88dede1", "filename": "gcc/doc/tm.texi", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b220923f96344397c584245c09234a700b0ca243/gcc%2Fdoc%2Ftm.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b220923f96344397c584245c09234a700b0ca243/gcc%2Fdoc%2Ftm.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi?ref=b220923f96344397c584245c09234a700b0ca243", "patch": "@@ -10895,6 +10895,11 @@ Configuration pairs predefined by this hook apply to all files that are being\n compiled.\n @end deftypefn\n \n+@deftypefn {Rust Target Hook} void TARGET_RUST_OS_INFO (void)\n+Similar to @code{TARGET_RUST_CPU_INFO}, but is used for configuration info\n+relating to the target operating system.\n+@end deftypefn\n+\n @node Named Address Spaces\n @section Adding support for named address spaces\n @cindex named address spaces"}, {"sha": "c8c2b8bd83ccb314e37f93cd27ea5f32f673174e", "filename": "gcc/doc/tm.texi.in", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b220923f96344397c584245c09234a700b0ca243/gcc%2Fdoc%2Ftm.texi.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b220923f96344397c584245c09234a700b0ca243/gcc%2Fdoc%2Ftm.texi.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Ftm.texi.in?ref=b220923f96344397c584245c09234a700b0ca243", "patch": "@@ -7134,6 +7134,8 @@ floating-point support; they are not included in this mechanism.\n \n @hook TARGET_RUST_CPU_INFO\n \n+@hook TARGET_RUST_OS_INFO\n+\n @node Named Address Spaces\n @section Adding support for named address spaces\n @cindex named address spaces"}, {"sha": "ef1a85d9a5667ec9d08bcdb2d9368d77ffa26325", "filename": "gcc/rust/rust-session-manager.cc", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b220923f96344397c584245c09234a700b0ca243/gcc%2Frust%2Frust-session-manager.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b220923f96344397c584245c09234a700b0ca243/gcc%2Frust%2Frust-session-manager.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-session-manager.cc?ref=b220923f96344397c584245c09234a700b0ca243", "patch": "@@ -138,6 +138,7 @@ Session::init ()\n {\n   // initialize target hooks\n   targetrustm.rust_cpu_info ();\n+  targetrustm.rust_os_info ();\n \n   // target-independent values that should exist in all targets\n   options.target_data.insert_key_value_pair (\"target_pointer_width\","}, {"sha": "9c72c1c86d3a89714ce26fc01f09610a796fa644", "filename": "gcc/rust/rust-target.def", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b220923f96344397c584245c09234a700b0ca243/gcc%2Frust%2Frust-target.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b220923f96344397c584245c09234a700b0ca243/gcc%2Frust%2Frust-target.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frust%2Frust-target.def?ref=b220923f96344397c584245c09234a700b0ca243", "patch": "@@ -40,5 +40,13 @@ compiled.\",\n  void, (void),\n  hook_void_void)\n \n+/* Environmental OS info relating to the target OS.  */\n+DEFHOOK\n+(rust_os_info,\n+ \"Similar to @code{TARGET_RUST_CPU_INFO}, but is used for configuration info\\n\\\n+relating to the target operating system.\",\n+ void, (void),\n+ hook_void_void)\n+\n /* Close the 'struct gcc_targetrustm' definition.  */\n HOOK_VECTOR_END (C90_EMPTY_HACK)"}]}