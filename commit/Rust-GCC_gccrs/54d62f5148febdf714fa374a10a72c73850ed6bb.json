{"sha": "54d62f5148febdf714fa374a10a72c73850ed6bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRkNjJmNTE0OGZlYmRmNzE0ZmEzNzRhMTBhNzJjNzM4NTBlZDZiYg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2015-12-14T16:59:05Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2015-12-14T16:59:05Z"}, "message": "re PR c/68833 (-Werror=format issues an error now)\n\n\tPR c/68833\n\t* common.opt (Wmissing-noreturn): Add Warning option.\n\t* opts-common.c (control_warning_option): If opt is\n\talias_target with alias_arg, set arg to it.\n\n\t* c.opt (Wmissing-format-attribute, Wnormalized): Add Warning option.\n\n\t* c-c++-common/pr68833-1.c: New test.\n\t* c-c++-common/pr68833-2.c: New test.\n\nFrom-SVN: r231624", "tree": {"sha": "107d66ef4eb8cce1efee494ba91a5442b067d48a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/107d66ef4eb8cce1efee494ba91a5442b067d48a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54d62f5148febdf714fa374a10a72c73850ed6bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54d62f5148febdf714fa374a10a72c73850ed6bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54d62f5148febdf714fa374a10a72c73850ed6bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54d62f5148febdf714fa374a10a72c73850ed6bb/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d84ffc0a56d84a02929fa67d2edb52d4b81fab37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d84ffc0a56d84a02929fa67d2edb52d4b81fab37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d84ffc0a56d84a02929fa67d2edb52d4b81fab37"}], "stats": {"total": 77, "additions": 73, "deletions": 4}, "files": [{"sha": "31c79d87c19403469908e4398e2f3525acb2a92f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -1,3 +1,10 @@\n+2015-12-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/68833\n+\t* common.opt (Wmissing-noreturn): Add Warning option.\n+\t* opts-common.c (control_warning_option): If opt is\n+\talias_target with alias_arg, set arg to it.\n+\n 2015-12-14  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \tPR target/68865"}, {"sha": "db9a279c20f27ae9783f03196ee7e81ce1171dfc", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -1,3 +1,8 @@\n+2015-12-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/68833\n+\t* c.opt (Wmissing-format-attribute, Wnormalized): Add Warning option.\n+\n 2014-12-12  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/68815"}, {"sha": "70dc91614b92fa77ac7c2f921965d542e3bb5549", "filename": "gcc/c-family/c.opt", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fc-family%2Fc.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fc-family%2Fc.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc.opt?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -627,7 +627,7 @@ C++ ObjC++ Var(warn_templates) Warning\n Warn on primary template declaration.\n \n Wmissing-format-attribute\n-C ObjC C++ ObjC++ Alias(Wsuggest-attribute=format)\n+C ObjC C++ ObjC++ Warning Alias(Wsuggest-attribute=format)\n ;\n \n Wmissing-include-dirs\n@@ -678,7 +678,7 @@ C ObjC C++ ObjC++ LangEnabledBy(C ObjC C++ ObjC++,Wall)\n ;\n \n Wnormalized\n-C ObjC C++ ObjC++ Alias(Wnormalized=,nfc,none)\n+C ObjC C++ ObjC++ Warning Alias(Wnormalized=,nfc,none)\n ;\n \n Wnormalized="}, {"sha": "6264bc03bcabdd45193466029a891e8913d439ab", "filename": "gcc/common.opt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -612,7 +612,7 @@ Common Var(warn_unsafe_loop_optimizations) Warning\n Warn if the loop cannot be optimized due to nontrivial assumptions.\n \n Wmissing-noreturn\n-Common Alias(Wsuggest-attribute=noreturn)\n+Common Warning Alias(Wsuggest-attribute=noreturn)\n \n Wodr\n Common Var(warn_odr_violations) Init(1) Warning"}, {"sha": "55b631586b5412781513fce89ca010eafba1250d", "filename": "gcc/opts-common.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fopts-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Fopts-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fopts-common.c?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -1361,7 +1361,13 @@ control_warning_option (unsigned int opt_index, int kind, const char *arg,\n \t\t\tdiagnostic_context *dc)\n {\n   if (cl_options[opt_index].alias_target != N_OPTS)\n-    opt_index = cl_options[opt_index].alias_target;\n+    {\n+      gcc_assert (!cl_options[opt_index].cl_separate_alias\n+\t\t  && !cl_options[opt_index].cl_negative_alias);\n+      if (cl_options[opt_index].alias_arg)\n+\targ = cl_options[opt_index].alias_arg;\n+      opt_index = cl_options[opt_index].alias_target;\n+    }\n   if (opt_index == OPT_SPECIAL_ignore)\n     return;\n   if (dc)"}, {"sha": "2bbd9dcc2dd2cb02bd5316a91ea1abb1cb09e947", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -1,3 +1,9 @@\n+2015-12-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c/68833\n+\t* c-c++-common/pr68833-1.c: New test.\n+\t* c-c++-common/pr68833-2.c: New test.\n+\n 2015-12-14  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/68852"}, {"sha": "e0601b39ec44246c9e1e805b6c3f1beb2610b5a4", "filename": "gcc/testsuite/c-c++-common/pr68833-1.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-1.c?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -0,0 +1,22 @@\n+/* PR c/68833 */\n+/* { dg-do compile } */\n+/* { dg-options \"-Werror=larger-than-65536 -Werror=format -Werror=missing-noreturn\" } */\n+\n+int a[131072];\t/* { dg-error \"size of 'a' is \\[1-9]\\[0-9]* bytes\" } */\n+int b[1024];\t/* { dg-bogus \"size of 'b' is \\[1-9]\\[0-9]* bytes\" } */\n+\n+void\n+f1 (const char *fmt)\n+{\n+  __builtin_printf (\"%d\\n\", 1.2);\t/* { dg-error \"expects argument of type\" } */\n+  __builtin_printf (fmt, 1.2);\t\t/* { dg-bogus \"format not a string literal, argument types not checked\" } */\n+}\n+\n+extern void f2 (void);\n+void\n+f2 (void) /* { dg-error \"candidate for attribute 'noreturn'\" \"detect noreturn candidate\" } */\n+{\n+  __builtin_exit (0);\n+}\n+\n+/* { dg-prune-output \"treated as errors\" } */"}, {"sha": "c991b7a13c204eaf8e3489d7611fde8a5c185b19", "filename": "gcc/testsuite/c-c++-common/pr68833-2.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-2.c?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -0,0 +1,16 @@\n+/* PR c/68833 */\n+/* { dg-do compile } */\n+/* { dg-options \"-Werror=missing-format-attribute\" } */\n+\n+#include <stdarg.h>\n+\n+void\n+foo (const char *fmt, ...)\n+{\n+  va_list ap;\n+  va_start (ap, fmt);\n+  __builtin_vprintf (fmt, ap); /* { dg-error \"candidate\" \"printf attribute warning\" } */\n+  va_end (ap);\n+}\n+\n+/* { dg-prune-output \"treated as errors\" } */"}, {"sha": "c99a2c605a880bcadefc96baf6beae555d4a7aa9", "filename": "gcc/testsuite/c-c++-common/pr68833-3.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54d62f5148febdf714fa374a10a72c73850ed6bb/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fpr68833-3.c?ref=54d62f5148febdf714fa374a10a72c73850ed6bb", "patch": "@@ -0,0 +1,7 @@\n+/* PR c/68833 */\n+/* { dg-do preprocess } */\n+/* { dg-options \"-Werror=normalized\" } */\n+\n+\\u0F43  // { dg-error \"`.U00000f43' is not in NFC .-Werror=normalized=.\" }\n+\n+/* { dg-prune-output \"treated as errors\" } */"}]}