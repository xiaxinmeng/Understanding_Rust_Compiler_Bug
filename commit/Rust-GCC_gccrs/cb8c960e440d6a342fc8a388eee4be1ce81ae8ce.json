{"sha": "cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2I4Yzk2MGU0NDBkNmEzNDJmYzhhMzg4ZWVlNGJlMWNlODFhZThjZQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@adacore.com", "date": "2018-10-01T00:27:45Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2018-10-01T00:27:45Z"}, "message": "[Ada] use -gnatd_A to disable .ali on -fcompare-debug recompile\n\nfor  gcc/ada/ChangeLog\n\n\t* gcc-interface/lang-specs.h (default_compilers): When given\n\tfcompare-debug-second, adjust auxbase like cc1, and pass\n\tgnatd_A.\n\t* gcc-interface/misc.c (flag_compare_debug): Remove variable.\n\t(gnat_post_options): Do not set it.\n\t* lib-writ.adb (flag_compare_debug): Remove import.\n\t(Write_ALI): Do not test it.\n\nFrom-SVN: r264732", "tree": {"sha": "ec5ca9f294429f60c252776f2bf84f0c17b28d3a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec5ca9f294429f60c252776f2bf84f0c17b28d3a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/comments", "author": null, "committer": null, "parents": [{"sha": "f89d27f2c38cba7183fb8fbacbf7790a65187f47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f89d27f2c38cba7183fb8fbacbf7790a65187f47", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f89d27f2c38cba7183fb8fbacbf7790a65187f47"}], "stats": {"total": 25, "additions": 13, "deletions": 12}, "files": [{"sha": "d63cc5a927e92e637df348e381962ce533317e95", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "patch": "@@ -1,3 +1,13 @@\n+2018-09-30  Alexandre Oliva <oliva@adacore.com>\n+\n+\t* gcc-interface/lang-specs.h (default_compilers): When given\n+\tfcompare-debug-second, adjust auxbase like cc1, and pass\n+\tgnatd_A.\n+\t* gcc-interface/misc.c (flag_compare_debug): Remove variable.\n+\t(gnat_post_options): Do not set it.\n+\t* lib-writ.adb (flag_compare_debug): Remove import.\n+\t(Write_ALI): Do not test it.\n+\n 2018-09-28  Eric Botcazou  <ebotcazou@adacore.com>\n             Pierre-Marie de Rodat  <derodat@adacore.com>\n "}, {"sha": "c7bf32c03905d5937fe98bfad1734aecfc14a70e", "filename": "gcc/ada/gcc-interface/lang-specs.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2Fgcc-interface%2Flang-specs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2Fgcc-interface%2Flang-specs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Flang-specs.h?ref=cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "patch": "@@ -35,7 +35,8 @@\n  gnat1 %{I*} %{k8:-gnatk8} %{Wall:-gnatwa} %{w:-gnatws} %{!Q:-quiet}\\\n     %{nostdinc*} %{nostdlib*}\\\n     -dumpbase %{.adb:%b.adb}%{.ads:%b.ads}%{!.adb:%{!.ads:%b.ada}}\\\n-    %{c|S:%{o*:-auxbase-strip %*}%{!o*:-auxbase %b}}%{!c:%{!S:-auxbase %b}} \\\n+    %{fcompare-debug-second:%:compare-debug-auxbase-opt(%b) -gnatd_A} \\\n+    %{!fcompare-debug-second:%{c|S:%{o*:-auxbase-strip %*}%{!o*:-auxbase %b}}%{!c:%{!S:-auxbase %b}}} \\\n     %{O*} %{W*} %{w} %{p} %{pg:-p} %{d*} \\\n     %{coverage:-fprofile-arcs -ftest-coverage} \"\n #if defined(TARGET_VXWORKS_RTP)"}, {"sha": "98ec2778d56d79b1cefab72ac59f8763f5e71d59", "filename": "gcc/ada/gcc-interface/misc.c", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2Fgcc-interface%2Fmisc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fmisc.c?ref=cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "patch": "@@ -77,9 +77,6 @@ int optimize;\n #undef optimize_size\n int optimize_size;\n \n-#undef flag_compare_debug\n-int flag_compare_debug;\n-\n #undef flag_short_enums\n int flag_short_enums;\n \n@@ -284,7 +281,6 @@ gnat_post_options (const char **pfilename ATTRIBUTE_UNUSED)\n   gnat_encodings = global_options.x_gnat_encodings;\n   optimize = global_options.x_optimize;\n   optimize_size = global_options.x_optimize_size;\n-  flag_compare_debug = global_options.x_flag_compare_debug;\n   flag_stack_check = global_options.x_flag_stack_check;\n   flag_short_enums = global_options.x_flag_short_enums;\n "}, {"sha": "ce35c9e8fa58ce92a355dbd6433a0b47a72f23bb", "filename": "gcc/ada/lib-writ.adb", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2Flib-writ.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cb8c960e440d6a342fc8a388eee4be1ce81ae8ce/gcc%2Fada%2Flib-writ.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flib-writ.adb?ref=cb8c960e440d6a342fc8a388eee4be1ce81ae8ce", "patch": "@@ -226,10 +226,6 @@ package body Lib.Writ is\n       Num_Sdep : Nat := 0;\n       --  Number of active entries in Sdep_Table\n \n-      flag_compare_debug : Int;\n-      pragma Import (C, flag_compare_debug);\n-      --  Import from toplev.c\n-\n       -----------------------\n       -- Local Subprograms --\n       -----------------------\n@@ -1079,9 +1075,7 @@ package body Lib.Writ is\n       --  We never write an ALI file if the original operating mode was\n       --  syntax-only (-gnats switch used in compiler invocation line)\n \n-      if Original_Operating_Mode = Check_Syntax\n-        or flag_compare_debug /= 0\n-      then\n+      if Original_Operating_Mode = Check_Syntax then\n          return;\n       end if;\n "}]}