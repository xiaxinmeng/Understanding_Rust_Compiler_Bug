{"sha": "623c65f1732d0ee0fc163921272d152b50211710", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjIzYzY1ZjE3MzJkMGVlMGZjMTYzOTIxMjcyZDE1MmI1MDIxMTcxMA==", "commit": {"author": {"name": "Lee Millward", "email": "lee.millward@codesourcery.com", "date": "2006-08-21T17:34:44Z"}, "committer": {"name": "Lee Millward", "email": "lmillward@gcc.gnu.org", "date": "2006-08-21T17:34:44Z"}, "message": "re PR c++/28505 (ICE with invalid constructors)\n\n        PR c++/28505\n        * decl.c (grokdeclarator): Return early after\n        issuing diagnostic about an incomplete type.\n\n        * g++.dg/parse/ctor7.C: New test.\n        * g++.dg/parse/ctor8.C: Likewise.\n\nFrom-SVN: r116302", "tree": {"sha": "e3efba4f1de1ad3d07c448a7f2b11f92a2d02e31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3efba4f1de1ad3d07c448a7f2b11f92a2d02e31"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/623c65f1732d0ee0fc163921272d152b50211710", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/623c65f1732d0ee0fc163921272d152b50211710", "html_url": "https://github.com/Rust-GCC/gccrs/commit/623c65f1732d0ee0fc163921272d152b50211710", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/623c65f1732d0ee0fc163921272d152b50211710/comments", "author": null, "committer": null, "parents": [{"sha": "18ff35c669b4721876e3883e8c97b22683239a2e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18ff35c669b4721876e3883e8c97b22683239a2e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18ff35c669b4721876e3883e8c97b22683239a2e"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "10d0538f80b62f67bd0417c02554e142f524ae8b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=623c65f1732d0ee0fc163921272d152b50211710", "patch": "@@ -3,6 +3,10 @@\n \tPR c++/26269\n         * decl.c (duplicate_decls): Return early if either\n         newdecl or olddecl is error_mark_node.\n+\n+\t PR c++/28505\n+        * decl.c (grokdeclarator): Return early after\n+        issuing diagnostic about an incomplete type.\n \t\n 2006-08-20  Mark Mitchell  <mark@codesourcery.com>\n "}, {"sha": "b5b417fc6688d43afab7832b20d42048ce5f7452", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=623c65f1732d0ee0fc163921272d152b50211710", "patch": "@@ -8354,8 +8354,7 @@ grokdeclarator (const cp_declarator *declarator,\n \t      error (\"  in instantiation of template %qT\",\n \t\t     current_class_type);\n \n-\t    type = error_mark_node;\n-\t    decl = NULL_TREE;\n+\t    return error_mark_node;\n \t  }\n \telse\n \t  {"}, {"sha": "a277501ab34a1d5d29308ca98cb879c76925d9a2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=623c65f1732d0ee0fc163921272d152b50211710", "patch": "@@ -2,6 +2,10 @@\n \n         PR c++/26269\n         * g++.dg/other/error14.C: New test.\n+\n+        PR c++/28505\n+        * g++.dg/parse/ctor7.C: New test.\n+        * g++.dg/parse/ctor8.C: Likewise.\n \t\n 2006-08-21  Olivier Hainque  <hainque@adacore.com>\n "}, {"sha": "9fa051b79812dcd0bc9c67d185f0c775bbd534ab", "filename": "gcc/testsuite/g++.dg/parse/ctor7.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fctor7.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fctor7.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fctor7.C?ref=623c65f1732d0ee0fc163921272d152b50211710", "patch": "@@ -0,0 +1,15 @@\n+//PR c++/28505\n+\n+struct A\n+{\n+    A : ();     // { dg-error \"primary-expression|incomplete type\" }\n+    A : (int);  // { dg-error \"primary-expression|incomplete type|'int'\" }\n+};\n+\n+struct B\n+{\n+    char c;\n+    A a;\n+};\n+\n+B b = (B){0};   // { dg-error \"compound-literals\" }"}, {"sha": "e43ce4023a4ac3e44facf493324ecf9809f97a2a", "filename": "gcc/testsuite/g++.dg/parse/ctor8.C", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fctor8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/623c65f1732d0ee0fc163921272d152b50211710/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fctor8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fctor8.C?ref=623c65f1732d0ee0fc163921272d152b50211710", "patch": "@@ -0,0 +1,9 @@\n+//PR c++/28505\n+\n+struct A\n+{\n+    A : ();     // { dg-error \"primary-expression|incomplete type\" }\n+    A : (int);  // { dg-error \"primary-expression|incomplete type|'int'\" }\n+};\n+\n+A a = (A){0};   // { dg-error \"too many initializers|compound-literals\" }"}]}