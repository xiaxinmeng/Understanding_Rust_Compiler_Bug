{"sha": "016996861c7333f42772c84a5a2a4e52e0bd07c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDE2OTk2ODYxYzczMzNmNDI3NzJjODRhNWEyYTRlNTJlMGJkMDdjNQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-09-30T16:20:12Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-09-30T16:20:12Z"}, "message": "Remove global call sets: cfgcleanup.c\n\nold_insns_match_p just tests whether two instructions are\nsimilar enough to merge.  With insn_callee_abi it makes more\nsense to compare the ABIs directly.\n\n2019-09-30  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* cfgcleanup.c (old_insns_match_p): Compare the ABIs of calls\n\tinstead of the call-clobbered sets.\n\nFrom-SVN: r276314", "tree": {"sha": "5bf8aef888cc343864b239c4422ff9982fb64299", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5bf8aef888cc343864b239c4422ff9982fb64299"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/016996861c7333f42772c84a5a2a4e52e0bd07c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/016996861c7333f42772c84a5a2a4e52e0bd07c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/016996861c7333f42772c84a5a2a4e52e0bd07c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/016996861c7333f42772c84a5a2a4e52e0bd07c5/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7392e5d8888462610b5536c2894d2923b826faed", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7392e5d8888462610b5536c2894d2923b826faed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7392e5d8888462610b5536c2894d2923b826faed"}], "stats": {"total": 13, "additions": 6, "deletions": 7}, "files": [{"sha": "a3e4ff24c8d6c461c09f812a9f31b28588c7c5ed", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/016996861c7333f42772c84a5a2a4e52e0bd07c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/016996861c7333f42772c84a5a2a4e52e0bd07c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=016996861c7333f42772c84a5a2a4e52e0bd07c5", "patch": "@@ -1,3 +1,8 @@\n+2019-09-30  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* cfgcleanup.c (old_insns_match_p): Compare the ABIs of calls\n+\tinstead of the call-clobbered sets.\n+\n 2019-09-30  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* caller-save.c (setup_save_areas): Remove redundant |s of"}, {"sha": "ced7e0a4283c65b0e72008c14673623fe6310f64", "filename": "gcc/cfgcleanup.c", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/016996861c7333f42772c84a5a2a4e52e0bd07c5/gcc%2Fcfgcleanup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/016996861c7333f42772c84a5a2a4e52e0bd07c5/gcc%2Fcfgcleanup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgcleanup.c?ref=016996861c7333f42772c84a5a2a4e52e0bd07c5", "patch": "@@ -1227,13 +1227,7 @@ old_insns_match_p (int mode ATTRIBUTE_UNUSED, rtx_insn *i1, rtx_insn *i2)\n \t    }\n \t}\n \n-      HARD_REG_SET i1_used = insn_callee_abi (i1).full_reg_clobbers ();\n-      HARD_REG_SET i2_used = insn_callee_abi (i2).full_reg_clobbers ();\n-      /* ??? This preserves traditional behavior; it might not be needed.  */\n-      i1_used |= fixed_reg_set;\n-      i2_used |= fixed_reg_set;\n-\n-      if (i1_used != i2_used)\n+      if (insn_callee_abi (i1) != insn_callee_abi (i2))\n         return dir_none;\n     }\n "}]}