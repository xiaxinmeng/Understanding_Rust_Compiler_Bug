{"sha": "978cf2fcf5d4858bb326ad7d8e84be1d51c2a593", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTc4Y2YyZmNmNWQ0ODU4YmIzMjZhZDdkOGU4NGJlMWQ1MWMyYTU5Mw==", "commit": {"author": {"name": "Daniel Berlin", "email": "dan@cgsoftware.com", "date": "2001-07-16T16:23:40Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2001-07-16T16:23:40Z"}, "message": "ssa-ccp.c: (optimize_unexecutable_edges): Add note about removal of edge...\n\n        * ssa-ccp.c: (optimize_unexecutable_edges): Add note about removal\n        of edge, and removal of phi alternative to dump file.\n        (ssa_ccp_substitute_constants): Add note about register now being\n        constant, and which uses were replaced in what insns to dump file.\n\nFrom-SVN: r44042", "tree": {"sha": "fe9d83649fcc4a227ca081ec6707d857d59492bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe9d83649fcc4a227ca081ec6707d857d59492bd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593", "html_url": "https://github.com/Rust-GCC/gccrs/commit/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593/comments", "author": null, "committer": null, "parents": [{"sha": "55680aef7f48adcd37a1624288d4dc164f44e105", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55680aef7f48adcd37a1624288d4dc164f44e105", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55680aef7f48adcd37a1624288d4dc164f44e105"}], "stats": {"total": 41, "additions": 33, "deletions": 8}, "files": [{"sha": "e22f06fcae42e685b11da378ff41c0849904ab6a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=978cf2fcf5d4858bb326ad7d8e84be1d51c2a593", "patch": "@@ -1,3 +1,10 @@\n+2001-07-16  Daniel Berlin  <dan@cgsoftware.com>\n+\n+\t* ssa-ccp.c: (optimize_unexecutable_edges): Add note about removal\n+\tof edge, and removal of phi alternative to dump file. \n+\t(ssa_ccp_substitute_constants): Add note about register now being\n+\tconstant, and which uses were replaced in what insns to dump file.\n+\n 2001-07-16  Andreas Jaeger  <aj@suse.de>\n \n \t* gcov.c (output_data): Use HOST_WIDEST_INT_PRINT_DEC to output"}, {"sha": "851445f7bc4ada35274a9f9b243a54c5ea8327dd", "filename": "gcc/ssa-ccp.c", "status": "modified", "additions": 26, "deletions": 8, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593/gcc%2Fssa-ccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/978cf2fcf5d4858bb326ad7d8e84be1d51c2a593/gcc%2Fssa-ccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fssa-ccp.c?ref=978cf2fcf5d4858bb326ad7d8e84be1d51c2a593", "patch": "@@ -732,10 +732,17 @@ optimize_unexecutable_edges (edges, executable_edges)\n \t      while (PHI_NODE_P (insn))\n \t\t{\n \t\t  remove_phi_alternative (PATTERN (insn), edge->src);\n+\t\t  if (rtl_dump_file)\n+\t\t    fprintf (rtl_dump_file,\n+\t\t\t     \"Removing alternative for bb %d of phi %d\\n\", \n+\t\t\t     edge->src->index, SSA_NAME (PATTERN (insn)));\n \t\t  insn = NEXT_INSN (insn);\n \t\t}\n \t    }\n-\n+\t  if (rtl_dump_file)\n+\t    fprintf (rtl_dump_file,\n+\t\t     \"Removing unexecutable edge from %d to %d\\n\",\n+\t\t     edge->src->index, edge->dest->index);\n \t  /* Since the edge was not executable, remove it from the CFG.  */\n \t  remove_edge (edge);\n \t}\n@@ -835,6 +842,10 @@ ssa_ccp_substitute_constants ()\n \t     are consecutive at the start of the basic block.  */\n \t  if (! PHI_NODE_P (def))\n \t    {\n+\t      if (rtl_dump_file)\n+\t\tfprintf (rtl_dump_file,\n+\t\t\t \"Register %d is now set to a constant\\n\",\n+\t\t\t SSA_NAME (PATTERN (def)));\n \t      SET_SRC (set) = values[i].const_value;\n \t      INSN_CODE (def) = -1;\n \t      df_insn_modify (df_analyzer, BLOCK_FOR_INSN (def), def);\n@@ -858,15 +869,22 @@ ssa_ccp_substitute_constants ()\n \t\t  && (GET_CODE (useinsn) == INSN\n \t\t      || GET_CODE (useinsn) == JUMP_INSN))\n \t\t{\n-\t\t  validate_replace_src (regno_reg_rtx [i],\n+\t\t  \n+\t\t  if (validate_replace_src (regno_reg_rtx [i],\n \t\t\t\t\tvalues[i].const_value,\n-\t\t\t\t\tuseinsn);\n-\t\t  INSN_CODE (useinsn) = -1;\n-\t\t  df_insn_modify (df_analyzer,\n-\t\t\t\t  BLOCK_FOR_INSN (useinsn),\n-\t\t\t\t  useinsn);\n+\t\t\t\t\t    useinsn))\n+\t\t    {\n+\t\t      if (rtl_dump_file)\n+\t\t\tfprintf (rtl_dump_file, \n+\t\t\t\t \"Register %d in insn %d replaced with constant\\n\",\n+\t\t\t\t i, INSN_UID (useinsn));\n+\t\t      INSN_CODE (useinsn) = -1;\n+\t\t      df_insn_modify (df_analyzer,\n+\t\t\t\t      BLOCK_FOR_INSN (useinsn),\n+\t\t\t\t      useinsn);\n+\t\t    }\n+\t\t  \n \t\t}\n-\n \t    }\n \t}\n     }"}]}