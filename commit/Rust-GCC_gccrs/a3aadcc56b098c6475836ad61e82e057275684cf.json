{"sha": "a3aadcc56b098c6475836ad61e82e057275684cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNhYWRjYzU2YjA5OGM2NDc1ODM2YWQ2MWU4MmUwNTcyNzU2ODRjZg==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2009-03-01T11:05:00Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2009-03-01T11:05:00Z"}, "message": "* tree-inline.c (tree_function_versioning): Output debug info.\n\nFrom-SVN: r144516", "tree": {"sha": "366a59d3cc39917816f5e2e383390b2f84bbf41c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/366a59d3cc39917816f5e2e383390b2f84bbf41c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3aadcc56b098c6475836ad61e82e057275684cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3aadcc56b098c6475836ad61e82e057275684cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3aadcc56b098c6475836ad61e82e057275684cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3aadcc56b098c6475836ad61e82e057275684cf/comments", "author": null, "committer": null, "parents": [{"sha": "1cf5abb382f9dab7203ae6a8d9f2f4421190d1ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1cf5abb382f9dab7203ae6a8d9f2f4421190d1ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1cf5abb382f9dab7203ae6a8d9f2f4421190d1ff"}], "stats": {"total": 44, "additions": 44, "deletions": 0}, "files": [{"sha": "15618084f2a0dec16bf39558ed44191a47639000", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a3aadcc56b098c6475836ad61e82e057275684cf", "patch": "@@ -1,3 +1,7 @@\n+2009-02-28  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-inline.c (tree_function_versioning): Output debug info.\n+\n 2009-02-28  Jan Hubicka  <jh@suse.cz>\n \n \tPR debug/39267"}, {"sha": "b1afa603960b9dfde9610306c3d14dc45dc6d9e4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a3aadcc56b098c6475836ad61e82e057275684cf", "patch": "@@ -1,3 +1,7 @@\n+2009-03-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* gcc.dg/debug/dwarf2/ipa-cp1.c: New testcase.\n+\n 2009-03-01  Jan Hubicka  <jh@suse.cz>\n \n \tPR debug/39267"}, {"sha": "7442dab19f9a5e852d6d563cff9d91355d08716e", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/ipa-cp1.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fipa-cp1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fipa-cp1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fipa-cp1.c?ref=a3aadcc56b098c6475836ad61e82e057275684cf", "patch": "@@ -0,0 +1,30 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -gdwarf-2 -dA\" } */\n+void q(int p);\n+static void\n+t(int constant_propagated_par)\n+{\n+  int local_var = constant_propagated_par + 1;\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+  q(local_var);\n+}\n+main()\n+{\n+  t(5);\n+  t(5);\n+  t(5);\n+  t(5);\n+  t(5);\n+  t(5);\n+  t(5);\n+}\n+/* { dg-final { scan-assembler \"local_var\" } } */"}, {"sha": "8ff784abd484879667d2e5a40ec916695e7cde88", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3aadcc56b098c6475836ad61e82e057275684cf/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=a3aadcc56b098c6475836ad61e82e057275684cf", "patch": "@@ -4226,6 +4226,12 @@ tree_function_versioning (tree old_decl, tree new_decl, varray_type tree_map,\n   old_version_node = cgraph_node (old_decl);\n   new_version_node = cgraph_node (new_decl);\n \n+  /* Output the inlining info for this abstract function, since it has been\n+     inlined.  If we don't do this now, we can lose the information about the\n+     variables in the function when the blocks get blown away as soon as we\n+     remove the cgraph node.  */\n+  (*debug_hooks->outlining_inline_function) (old_decl);\n+\n   DECL_ARTIFICIAL (new_decl) = 1;\n   DECL_ABSTRACT_ORIGIN (new_decl) = DECL_ORIGIN (old_decl);\n "}]}