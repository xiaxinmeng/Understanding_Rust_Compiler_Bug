{"sha": "bc9cc2868de3c70ef195eee59f792ca4b1ea7080", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmM5Y2MyODY4ZGUzYzcwZWYxOTVlZWU1OWY3OTJjYTRiMWVhNzA4MA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-15T12:13:50Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-15T12:13:50Z"}, "message": "Construct options.h and specs.h to #include all\n\"*/lang-{options|specs}.h\" files found.\n\nFrom-SVN: r9686", "tree": {"sha": "0588157278b9810d4f0cc21409db58bc290cf59d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0588157278b9810d4f0cc21409db58bc290cf59d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc9cc2868de3c70ef195eee59f792ca4b1ea7080", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc9cc2868de3c70ef195eee59f792ca4b1ea7080", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc9cc2868de3c70ef195eee59f792ca4b1ea7080", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc9cc2868de3c70ef195eee59f792ca4b1ea7080/comments", "author": null, "committer": null, "parents": [{"sha": "b10ed55576e7a0e0f861eb5e8b8e34e1d194cb13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b10ed55576e7a0e0f861eb5e8b8e34e1d194cb13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b10ed55576e7a0e0f861eb5e8b8e34e1d194cb13"}], "stats": {"total": 35, "additions": 32, "deletions": 3}, "files": [{"sha": "eac32851bca3ebf1e04ad962cedad9b6bfa12ea7", "filename": "gcc/vmsconfig.com", "status": "modified", "additions": 32, "deletions": 3, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc9cc2868de3c70ef195eee59f792ca4b1ea7080/gcc%2Fvmsconfig.com", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc9cc2868de3c70ef195eee59f792ca4b1ea7080/gcc%2Fvmsconfig.com", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvmsconfig.com?ref=bc9cc2868de3c70ef195eee59f792ca4b1ea7080", "patch": "@@ -6,6 +6,7 @@ $flnm = f$enviroment(\"PROCEDURE\")     ! get current procedure name\n $set default 'f$parse(flnm,,,\"DEVICE\")''f$parse(flnm,,,\"DIRECTORY\")'\n $ !\n $set symbol/scope=(nolocal,noglobal)\n+$if f$trnlnm(\"IFILE$\").nes.\"\" then close/noLog ifile$\n $ !\n $ echo = \"write sys$output\"\n $ !\n@@ -61,6 +62,10 @@ $ if f$search(\"config-vax.h\") .nes. \"\" then delete config-vax.h;*\n $ copy [.config.vax]vax.h []config-vax.h\n $ echo \"Linked `config-vax.h' to `[.config.vax]vax.h' for `tm.h'.\"\n $ !\n+$ call make_lang_incl \"options.h\"\n+$ !\n+$ call make_lang_incl \"specs.h\"\n+$ !\n $ if f$search(\"md.\") .nes. \"\" then delete md..*\n $ copy [.config.vax]vax.md []md.\n $ echo \"Linked `md' to `[.config.vax]vax.md'.\n@@ -396,8 +401,32 @@ $!\n $!\n $!\n $ if f$search(\"config.status\") .nes. \"\" then delete config.status.*\n-$ open/write file config.status\n-$ write file \"Links are now set up for use with a vax running VMS.\"\n-$ close file\n+$ create config.status\n+Links are now set up for use with a vax running VMS.\n $ type config.status\n $ echo \"\"\n+$!\n+$ exit\n+$\n+$!\n+$! Constuct a header file based on subdirectory contents\n+$!\n+$make_lang_incl: subroutine\n+$  if f$search(p1).nes.\"\" then delete 'p1';*\n+$  create 'p1'\t!empty file with ordinary text-file attributes\n+$  open/Append ifile$ 'p1'\n+$  write ifile$ \"/* ''p1' */\"\n+$  hfile = f$search(\"[]''p1'\")\n+$  topdir = f$parse(hfile,,,\"DIRECTORY\") - \"]\"\n+$lang_incl_loop:\n+$  hfile = f$search(\"[.*]lang-''p1'\")\n+$  if hfile.eqs.\"\" then goto lang_incl_done\n+$  dir = f$parse(hfile,,,\"DIRECTORY\") - \"]\"\n+$! convert absolute path to relative one, yielding \"[.subdir]\"\n+$  dir = \"[\" + f$edit(dir - topdir,\"LOWERCASE\") + \"]\"\n+$  write ifile$ \"#include \"\"''dir'lang-''p1'\"\"\"\n+$  goto lang_incl_loop\n+$lang_incl_done:\n+$  close ifile$\n+$  echo \"Created `''p1''.\"\n+$ endsubroutine !make_lang_incl"}]}