{"sha": "eb5abb3944f7f65f527cd2acbde984608cf54305", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWI1YWJiMzk0NGY3ZjY1ZjUyN2NkMmFjYmRlOTg0NjA4Y2Y1NDMwNQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2003-07-23T13:02:34Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2003-07-23T13:02:34Z"}, "message": "parser.c (cp_parser_nested_name_specifier): Reset scope on failure.\n\ncp:\n\t* parser.c (cp_parser_nested_name_specifier): Reset scope on\n\tfailure.\n\t(cp_parser_elaborated_type_specifier): Likewise.\ntestsuite:\n\t* g++.dg/parse/crash10: New test.\n\nFrom-SVN: r69702", "tree": {"sha": "235391fad97f06533d06f5c69db9ab720c42b930", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/235391fad97f06533d06f5c69db9ab720c42b930"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb5abb3944f7f65f527cd2acbde984608cf54305", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb5abb3944f7f65f527cd2acbde984608cf54305", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb5abb3944f7f65f527cd2acbde984608cf54305", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb5abb3944f7f65f527cd2acbde984608cf54305/comments", "author": null, "committer": null, "parents": [{"sha": "e1a4d10fc073997cf9d6abc835d295e50e92f770", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1a4d10fc073997cf9d6abc835d295e50e92f770", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1a4d10fc073997cf9d6abc835d295e50e92f770"}], "stats": {"total": 28, "additions": 27, "deletions": 1}, "files": [{"sha": "45f17513aeec9c05b371ed2ad77548e9bbb0e127", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=eb5abb3944f7f65f527cd2acbde984608cf54305", "patch": "@@ -1,3 +1,10 @@\n+2003-07-23  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\tPR c++/10953\n+\t* parser.c (cp_parser_nested_name_specifier): Reset scope on\n+\tfailure.\n+\t(cp_parser_elaborated_type_specifier): Likewise.\n+\n 2003-07-22  Mark Mitchell  <mark@codesourcery.com>\n \n \tEliminate use of POINTER_TYPE for pointers-to-members."}, {"sha": "5a7dc875bb9e55b045bd86bc8363380a8be50373", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=eb5abb3944f7f65f527cd2acbde984608cf54305", "patch": "@@ -3052,6 +3052,7 @@ cp_parser_nested_name_specifier (cp_parser *parser,\n   if (!scope)\n     {\n       cp_parser_error (parser, \"expected nested-name-specifier\");\n+      parser->scope = NULL_TREE;\n       return error_mark_node;\n     }\n \n@@ -8439,7 +8440,10 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n       identifier = cp_parser_identifier (parser);\n \n       if (identifier == error_mark_node)\n-\treturn error_mark_node;\n+\t{\n+\t  parser->scope = NULL_TREE;\n+\t  return error_mark_node;\n+\t}\n \n       /* For a `typename', we needn't call xref_tag.  */\n       if (tag_type == typename_type)"}, {"sha": "1667deac5e0bb0a21d547ef642be81e55e7df465", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=eb5abb3944f7f65f527cd2acbde984608cf54305", "patch": "@@ -1,3 +1,7 @@\n+2003-07-23  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.dg/parse/crash10: New test.\n+\n 2003-07-22  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* g++.dg/ext/flexary1.C: New test."}, {"sha": "878139fa0deb94e4a3a4bb8ab316e3c77c9c6b74", "filename": "gcc/testsuite/g++.dg/parse/crash10.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb5abb3944f7f65f527cd2acbde984608cf54305/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fcrash10.C?ref=eb5abb3944f7f65f527cd2acbde984608cf54305", "patch": "@@ -0,0 +1,11 @@\n+// { dg-do compile }\n+\n+// Copyright (C) 2003 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 22 Jul 2003 <nathan@codesourcery.com>\n+\n+// PR c++ 10953. ICE\n+\n+class \n+{\n+  typename::  // { dg-error \"\" \"\" }\n+; // { dg-error \"\" \"\" }"}]}