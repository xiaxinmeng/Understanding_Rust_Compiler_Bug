{"sha": "a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTJjMGExOTQyYzE2YzU4YjM5MDI0YWFlY2JhNDQzYjg0YjNhZDhmNg==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2017-04-21T13:08:51Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2017-04-21T13:08:51Z"}, "message": "Avoid deprecated warnings about std::auto_ptr in library headers\n\n\t* include/backward/auto_ptr.h: Ignore deprecated warnings from use\n\tof auto_ptr.\n\t* include/bits/shared_ptr.h: Likewise.\n\t* include/bits/shared_ptr_base.h: Likewise.\n\t* include/bits/unique_ptr.h: Likewise.\n\t* libstdc++-v3/testsuite/20_util/default_delete/48631_neg.cc: Adjust\n\tdg-error lineno.\n\t* libstdc++-v3/testsuite/20_util/default_delete/void_neg.cc: Likewise.\n\t* libstdc++-v3/testsuite/20_util/unique_ptr/assign/48635_neg.cc:\n\tLikewise.\n\t* libstdc++-v3/testsuite/20_util/unique_ptr/cons/cv_qual_neg.cc:\n\tLikewise.\n\nFrom-SVN: r247063", "tree": {"sha": "98cc5ef81715dbbb0ab702b455a08d5d56871520", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98cc5ef81715dbbb0ab702b455a08d5d56871520"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2fd30fbe0d3a9525ec14e0102f3ebb0e80a2736e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fd30fbe0d3a9525ec14e0102f3ebb0e80a2736e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fd30fbe0d3a9525ec14e0102f3ebb0e80a2736e"}], "stats": {"total": 53, "additions": 48, "deletions": 5}, "files": [{"sha": "2e587737e8f0dff5a7c890263b33e82fa753b2cb", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -1,3 +1,18 @@\n+2017-04-21  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\t* include/backward/auto_ptr.h: Ignore deprecated warnings from use\n+\tof auto_ptr.\n+\t* include/bits/shared_ptr.h: Likewise.\n+\t* include/bits/shared_ptr_base.h: Likewise.\n+\t* include/bits/unique_ptr.h: Likewise.\n+\t* libstdc++-v3/testsuite/20_util/default_delete/48631_neg.cc: Adjust\n+\tdg-error lineno.\n+\t* libstdc++-v3/testsuite/20_util/default_delete/void_neg.cc: Likewise.\n+\t* libstdc++-v3/testsuite/20_util/unique_ptr/assign/48635_neg.cc:\n+\tLikewise.\n+\t* libstdc++-v3/testsuite/20_util/unique_ptr/cons/cv_qual_neg.cc:\n+\tLikewise.\n+\n 2017-04-20  Edward Smith-Rowland  <3dw4rd@verizon.net>\n \n \tPR libstdc++/68397 std::tr1::expint fails ... long double arguments."}, {"sha": "e8aadf2d446f5af061c91cdbefd008f4ed62c544", "filename": "libstdc++-v3/include/backward/auto_ptr.h", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbackward%2Fauto_ptr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbackward%2Fauto_ptr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbackward%2Fauto_ptr.h?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -53,6 +53,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       auto_ptr_ref(_Tp1* __p): _M_ptr(__p) { }\n     } _GLIBCXX_DEPRECATED;\n \n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n \n   /**\n    *  @brief  A simple smart pointer providing strict ownership semantics.\n@@ -327,6 +329,8 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     : _M_t(__u.release(), deleter_type()) { }\n #endif\n \n+#pragma GCC diagnostic pop\n+\n _GLIBCXX_END_NAMESPACE_VERSION\n } // namespace\n "}, {"sha": "2ddb221e2fe1e36d1ac452e9fbdce0ae12f25646", "filename": "libstdc++-v3/include/bits/shared_ptr.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fshared_ptr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fshared_ptr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fshared_ptr.h?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -266,8 +266,11 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t: __shared_ptr<_Tp>(__r) { }\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n       template<typename _Yp, typename = _Constructible<auto_ptr<_Yp>>>\n \tshared_ptr(auto_ptr<_Yp>&& __r);\n+#pragma GCC diagnostic pop\n #endif\n \n       // _GLIBCXX_RESOLVE_LIB_DEFECTS\n@@ -304,13 +307,16 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t}\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n       template<typename _Yp>\n \t_Assignable<auto_ptr<_Yp>>\n \toperator=(auto_ptr<_Yp>&& __r)\n \t{\n \t  this->__shared_ptr<_Tp>::operator=(std::move(__r));\n \t  return *this;\n \t}\n+#pragma GCC diagnostic pop\n #endif\n \n       shared_ptr&"}, {"sha": "c32cd0f3cf09b725f6f62f94566c76c190b4cb6d", "filename": "libstdc++-v3/include/bits/shared_ptr_base.h", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fshared_ptr_base.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fshared_ptr_base.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fshared_ptr_base.h?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -62,7 +62,10 @@ namespace std _GLIBCXX_VISIBILITY(default)\n _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n   template<typename> class auto_ptr;\n+#pragma GCC diagnostic pop\n #endif\n \n  /**\n@@ -639,10 +642,13 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t}\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n       // Special case for auto_ptr<_Tp> to provide the strong guarantee.\n       template<typename _Tp>\n         explicit\n \t__shared_count(std::auto_ptr<_Tp>&& __r);\n+#pragma GCC diagnostic pop\n #endif\n \n       // Special case for unique_ptr<_Tp,_Del> to provide the strong guarantee.\n@@ -1179,9 +1185,12 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n #endif\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n       // Postcondition: use_count() == 1 and __r.get() == 0\n       template<typename _Yp, typename = _Compatible<_Yp>>\n \t__shared_ptr(auto_ptr<_Yp>&& __r);\n+#pragma GCC diagnostic pop\n #endif\n \n       constexpr __shared_ptr(nullptr_t) noexcept : __shared_ptr() { }\n@@ -1196,13 +1205,16 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t}\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n       template<typename _Yp>\n \t_Assignable<_Yp>\n \toperator=(auto_ptr<_Yp>&& __r)\n \t{\n \t  __shared_ptr(std::move(__r)).swap(*this);\n \t  return *this;\n \t}\n+#pragma GCC diagnostic pop\n #endif\n \n       __shared_ptr&"}, {"sha": "92029c25ab5a760ad0a2eb796375f7767c25333e", "filename": "libstdc++-v3/include/bits/unique_ptr.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funique_ptr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funique_ptr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Funique_ptr.h?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -48,7 +48,10 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n    */\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n   template<typename> class auto_ptr;\n+#pragma GCC diagnostic pop\n #endif\n \n   /// Primary template of default_delete, used by unique_ptr\n@@ -254,10 +257,13 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n \t{ }\n \n #if _GLIBCXX_USE_DEPRECATED\n+#pragma GCC diagnostic push\n+#pragma GCC diagnostic ignored \"-Wdeprecated-declarations\"\n       /// Converting constructor from @c auto_ptr\n       template<typename _Up, typename = _Require<\n \t       is_convertible<_Up*, _Tp*>, is_same<_Dp, default_delete<_Tp>>>>\n \tunique_ptr(auto_ptr<_Up>&& __u) noexcept;\n+#pragma GCC diagnostic pop\n #endif\n \n       /// Destructor, invokes the deleter if the stored pointer is not null."}, {"sha": "33850d5a5453f7715ee3720021c4601ebc153550", "filename": "libstdc++-v3/testsuite/20_util/default_delete/48631_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fdefault_delete%2F48631_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fdefault_delete%2F48631_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fdefault_delete%2F48631_neg.cc?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -26,4 +26,4 @@ struct D : B { };\n D d;\n std::default_delete<B[]> db;\n typedef decltype(db(&d)) type; // { dg-error \"no match\" }\n-// { dg-error \"no type\" \"\" { target *-*-* } 108 }\n+// { dg-error \"no type\" \"\" { target *-*-* } 111 }"}, {"sha": "7709f0c22d5bb91d2936babb6e678121ddd5e9cb", "filename": "libstdc++-v3/testsuite/20_util/default_delete/void_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fdefault_delete%2Fvoid_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fdefault_delete%2Fvoid_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fdefault_delete%2Fvoid_neg.cc?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -25,5 +25,5 @@ void test01()\n {\n   std::default_delete<void> d;\n   d(nullptr);   // { dg-error \"here\" }\n-  // { dg-error \"incomplete\" \"\" { target *-*-* } 74 }\n+  // { dg-error \"incomplete\" \"\" { target *-*-* } 77 }\n }"}, {"sha": "259282aad06903b20e4d7bb82e6248f7072d0010", "filename": "libstdc++-v3/testsuite/20_util/unique_ptr/assign/48635_neg.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funique_ptr%2Fassign%2F48635_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funique_ptr%2Fassign%2F48635_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funique_ptr%2Fassign%2F48635_neg.cc?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -42,10 +42,10 @@ void f()\n   std::unique_ptr<int, D&> ud(nullptr, d);\n   ub = std::move(ud); // { dg-error \"no match\" }\n   ub2 = ud; // { dg-error \"no match\" }\n-// { dg-error \"no type\" \"\" { target *-*-* } 301 }\n+// { dg-error \"no type\" \"\" { target *-*-* } 307 }\n \n   std::unique_ptr<int[], B&> uba(nullptr, b);\n   std::unique_ptr<int[], D&> uda(nullptr, d);\n   uba = std::move(uda); // { dg-error \"no match\" }\n-// { dg-error \"no type\" \"\" { target *-*-* } 560 }\n+// { dg-error \"no type\" \"\" { target *-*-* } 566 }\n }"}, {"sha": "3ef7878ecbed1b266a86c40fbca4084b859796b6", "filename": "libstdc++-v3/testsuite/20_util/unique_ptr/cons/cv_qual_neg.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funique_ptr%2Fcons%2Fcv_qual_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2c0a1942c16c58b39024aaecba443b84b3ad8f6/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funique_ptr%2Fcons%2Fcv_qual_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Funique_ptr%2Fcons%2Fcv_qual_neg.cc?ref=a2c0a1942c16c58b39024aaecba443b84b3ad8f6", "patch": "@@ -39,7 +39,7 @@ test07()\n   std::unique_ptr<const A[]> cA3(p); // { dg-error \"no matching function\" }\n   std::unique_ptr<volatile A[]> vA3(p); // { dg-error \"no matching function\" }\n   std::unique_ptr<const volatile A[]> cvA3(p); // { dg-error \"no matching function\" }\n-  // { dg-error \"no type\" \"\" { target *-*-* } 467 }\n+  // { dg-error \"no type\" \"\" { target *-*-* } 473 }\n }\n \n template<typename T>"}]}