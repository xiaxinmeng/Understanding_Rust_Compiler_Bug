{"sha": "7f167be6acfb2114b23adabe91e489a2d651eefe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2YxNjdiZTZhY2ZiMjExNGIyM2FkYWJlOTFlNDg5YTJkNjUxZWVmZQ==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2015-05-12T16:23:19Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2015-05-12T16:23:19Z"}, "message": "check_GNU_style.sh: Read either from stdin, or from files\n\n2015-05-12  Tom de Vries  <tom@codesourcery.com>\n\n\t* check_GNU_style.sh: Read either from stdin, or from files.\n\nFrom-SVN: r223086", "tree": {"sha": "0e3d24b6b0f65ef93e7dde2b42e35f4386277d20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0e3d24b6b0f65ef93e7dde2b42e35f4386277d20"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7f167be6acfb2114b23adabe91e489a2d651eefe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f167be6acfb2114b23adabe91e489a2d651eefe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7f167be6acfb2114b23adabe91e489a2d651eefe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7f167be6acfb2114b23adabe91e489a2d651eefe/comments", "author": null, "committer": null, "parents": [{"sha": "0648b80726f03dd0b9ed3dbb56832dbb909502f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0648b80726f03dd0b9ed3dbb56832dbb909502f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0648b80726f03dd0b9ed3dbb56832dbb909502f7"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "da374975417d4f4869a62209e211911326754f76", "filename": "contrib/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f167be6acfb2114b23adabe91e489a2d651eefe/contrib%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f167be6acfb2114b23adabe91e489a2d651eefe/contrib%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2FChangeLog?ref=7f167be6acfb2114b23adabe91e489a2d651eefe", "patch": "@@ -1,3 +1,7 @@\n+2015-05-12  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* check_GNU_style.sh: Read either from stdin, or from files.\n+\n 2015-05-12  Tom de Vries  <tom@codesourcery.com>\n \n \t* check_GNU_style.sh: Check if files exists."}, {"sha": "f00b3d54096cea9b12043e2a4db361d992d83c5a", "filename": "contrib/check_GNU_style.sh", "status": "modified", "additions": 16, "deletions": 6, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7f167be6acfb2114b23adabe91e489a2d651eefe/contrib%2Fcheck_GNU_style.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7f167be6acfb2114b23adabe91e489a2d651eefe/contrib%2Fcheck_GNU_style.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/contrib%2Fcheck_GNU_style.sh?ref=7f167be6acfb2114b23adabe91e489a2d651eefe", "patch": "@@ -39,12 +39,22 @@ test $# -eq 0 && usage\n nfiles=$#\n files=\"$*\"\n \n-for f in $files; do\n-    if [ \"$f\" != \"-\" ] && [ ! -f \"$f\" ]; then\n-\techo \"error: could not read file: $f\"\n-\texit 1\n-    fi\n-done\n+stdin=false\n+if [ $nfiles -eq 1 ] && [ \"$files\" = \"-\" ]; then\n+    stdin=true\n+else\n+    for f in $files; do\n+\tif [ \"$f\" = \"-\" ]; then\n+\t    # Let's keep things simple.  Either we read from stdin, or we read\n+\t    # from files specified on the command line, not both.\n+\t    usage\n+\tfi\n+\tif [ ! -f \"$f\" ]; then\n+\t    echo \"error: could not read file: $f\"\n+\t    exit 1\n+\tfi\n+    done\n+fi\n \n inp=check_GNU_style.inp\n tmp=check_GNU_style.tmp"}]}