{"sha": "0c478921bdadb374b8c4b062c4812c659564b9cb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGM0Nzg5MjFiZGFkYjM3NGI4YzRiMDYyYzQ4MTJjNjU5NTY0YjljYg==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.co.uk", "date": "2000-11-10T11:43:43Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2000-11-10T11:43:43Z"}, "message": "Fix ia64 float extend splitter crash.\n\nFrom-SVN: r37365", "tree": {"sha": "c859b1859843b9c3c1592f38690e2b4e0ef02343", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c859b1859843b9c3c1592f38690e2b4e0ef02343"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0c478921bdadb374b8c4b062c4812c659564b9cb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c478921bdadb374b8c4b062c4812c659564b9cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c478921bdadb374b8c4b062c4812c659564b9cb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c478921bdadb374b8c4b062c4812c659564b9cb/comments", "author": null, "committer": null, "parents": [{"sha": "6fb85418122c9a3bde93c7db8e185c2d0f53413a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fb85418122c9a3bde93c7db8e185c2d0f53413a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fb85418122c9a3bde93c7db8e185c2d0f53413a"}], "stats": {"total": 34, "additions": 30, "deletions": 4}, "files": [{"sha": "9625f27804b60ca2f29ab7497249c736b9e37b8c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c478921bdadb374b8c4b062c4812c659564b9cb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c478921bdadb374b8c4b062c4812c659564b9cb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0c478921bdadb374b8c4b062c4812c659564b9cb", "patch": "@@ -3,6 +3,11 @@\n \t* regrename.c (build_def_use): Mark contents of REG_INC notes as\n \tneeding replacement.\n \n+\t* config/ia64/ia64.md (extendsfdf2, extendsftf2, extenddftf2): Emit\n+\ta no-op move if regs are equal.\n+\t* toplev.c (rest_of_compilation): Do the noop moves elimination pass\n+\twhen calling jump after post-reload splitting. \n+\n 2000-11-09  Jan van Male  <jan.vanmale@fenk.wau.nl>\n \n         * c-tree.texi: Fix typos."}, {"sha": "77418f217acbf4959abc4488b05b968337e71c2a", "filename": "gcc/config/ia64/ia64.md", "status": "modified", "additions": 24, "deletions": 3, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c478921bdadb374b8c4b062c4812c659564b9cb/gcc%2Fconfig%2Fia64%2Fia64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c478921bdadb374b8c4b062c4812c659564b9cb/gcc%2Fconfig%2Fia64%2Fia64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.md?ref=0c478921bdadb374b8c4b062c4812c659564b9cb", "patch": "@@ -1073,7 +1073,14 @@\n    getf.d %0 = %1\"\n   \"reload_completed\"\n   [(set (match_dup 0) (float_extend:DF (match_dup 1)))]\n-  \"if (true_regnum (operands[0]) == true_regnum (operands[1])) DONE;\"\n+  \"\n+{\n+  if (true_regnum (operands[0]) == true_regnum (operands[1]))\n+    {\n+      emit_insn (gen_movdi (pic_offset_table_rtx, pic_offset_table_rtx));\n+      DONE;\n+    }\n+}\"\n   [(set_attr \"type\" \"F,F,M,M,M,M\")])\n \n (define_insn_and_split \"extendsftf2\"\n@@ -1089,7 +1096,14 @@\n    stfe %0 = %1%P0\"\n   \"reload_completed\"\n   [(set (match_dup 0) (float_extend:TF (match_dup 1)))]\n-  \"if (true_regnum (operands[0]) == true_regnum (operands[1])) DONE;\"\n+  \"\n+{\n+  if (true_regnum (operands[0]) == true_regnum (operands[1]))\n+    {\n+      emit_insn (gen_movdi (pic_offset_table_rtx, pic_offset_table_rtx));\n+      DONE;\n+    }\n+}\"\n   [(set_attr \"type\" \"F,F,M,M,M\")])\n \n (define_insn_and_split \"extenddftf2\"\n@@ -1105,7 +1119,14 @@\n    stfe %0 = %1%P0\"\n   \"reload_completed\"\n   [(set (match_dup 0) (float_extend:TF (match_dup 1)))]\n-  \"if (true_regnum (operands[0]) == true_regnum (operands[1])) DONE;\"\n+  \"\n+{\n+  if (true_regnum (operands[0]) == true_regnum (operands[1]))\n+    {\n+      emit_insn (gen_movdi (pic_offset_table_rtx, pic_offset_table_rtx));\n+      DONE;\n+    }\n+}\"\n   [(set_attr \"type\" \"F,F,M,M,M\")])\n \n (define_insn \"truncdfsf2\""}, {"sha": "1f46f35ee744a3a89800b57dc898b33d9072c0d0", "filename": "gcc/toplev.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0c478921bdadb374b8c4b062c4812c659564b9cb/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0c478921bdadb374b8c4b062c4812c659564b9cb/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=0c478921bdadb374b8c4b062c4812c659564b9cb", "patch": "@@ -3484,7 +3484,7 @@ rest_of_compilation (decl)\n   open_dump_file (DFI_flow2, decl);\n \n   jump_optimize (insns, !JUMP_CROSS_JUMP,\n-\t\t !JUMP_NOOP_MOVES, !JUMP_AFTER_REGSCAN);\n+\t\t JUMP_NOOP_MOVES, !JUMP_AFTER_REGSCAN);\n   find_basic_blocks (insns, max_reg_num (), rtl_dump_file);\n \n   /* On some machines, the prologue and epilogue code, or parts thereof,"}]}