{"sha": "c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "node_id": "C_kwDOANBUbNoAKGM5MWJiN2I5ZmM4NzI4NGY1MzgyZDlmYjA0ZGIwY2IxMGY2YzFmZTk", "commit": {"author": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2021-12-06T10:38:32Z"}, "committer": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2023-01-23T10:20:09Z"}, "message": "[PATCH 2/15] arm: Add Armv8.1-M Mainline target feature +pacbti\n\nThis patch adds the -march feature +pacbti to Armv8.1-M Mainline.\nThis feature enables pointer signing and authentication instructions\non M-class architectures.\n\nPre-approved here\n<https://gcc.gnu.org/pipermail/gcc-patches/2021-December/586144.html>.\n\ngcc/Changelog:\n\n\t* config/arm/arm.h (TARGET_HAVE_PACBTI): New macro.\n\t* config/arm/arm-cpus.in (pacbti): New feature.\n\t* doc/invoke.texi (Arm Options): Document it.\n\nCo-Authored-By: Tejas Belagod  <tbelagod@arm.com>", "tree": {"sha": "e7bea3f5f4aa2335242bb411bbd4c59f88b07822", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7bea3f5f4aa2335242bb411bbd4c59f88b07822"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/comments", "author": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "d8dadbc9a5199bf7bac1ab7376b0f84f45e94350", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8dadbc9a5199bf7bac1ab7376b0f84f45e94350", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8dadbc9a5199bf7bac1ab7376b0f84f45e94350"}], "stats": {"total": 14, "additions": 14, "deletions": 0}, "files": [{"sha": "4685599a42603a144a0202573760d17690094193", "filename": "gcc/config/arm/arm-cpus.in", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/gcc%2Fconfig%2Farm%2Farm-cpus.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/gcc%2Fconfig%2Farm%2Farm-cpus.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-cpus.in?ref=c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "patch": "@@ -229,6 +229,10 @@ define feature cdecp5\n define feature cdecp6\n define feature cdecp7\n \n+# M-profile control flow integrity extensions (PAC/AUT/BTI).\n+# Optional from Armv8.1-M Mainline.\n+define feature pacbti\n+\n # Feature groups.  Conventionally all (or mostly) upper case.\n # ALL_FPU lists all the feature bits associated with the floating-point\n # unit; these will all be removed if the floating-point unit is disabled\n@@ -743,6 +747,7 @@ begin arch armv8.1-m.main\n  isa ARMv8_1m_main\n # fp => FPv5-sp-d16; fp.dp => FPv5-d16\n  option dsp add armv7em\n+ option pacbti add pacbti\n  option fp add FPv5 fp16\n  option fp.dp add FPv5 FP_DBL fp16\n  option nofp remove ALL_FP"}, {"sha": "79b9f44e5c9ebd2304ab80feb31af40a3a228c7f", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "patch": "@@ -331,6 +331,12 @@ emission of floating point pcs attributes.  */\n \t\t\t\t\t\tisa_bit_mve_float) \\\n \t\t\t       && !TARGET_GENERAL_REGS_ONLY)\n \n+/* Non-zero if this target supports Armv8.1-M Mainline pointer-signing\n+   extension.  */\n+#define TARGET_HAVE_PACBTI (arm_arch8_1m_main \\\n+\t\t\t    && bitmap_bit_p (arm_active_target.isa, \\\n+\t\t\t\t\t     isa_bit_pacbti))\n+\n /* MVE have few common instructions as VFP, like VLDM alias VPOP, VLDR, VSTM\n    alia VPUSH, VSTR and VMOV, VMSR and VMRS.  In the same manner it updates few\n    registers such as FPCAR, FPCCR, FPDSCR, FPSCR, MVFR0, MVFR1 and MVFR2.  All"}, {"sha": "e37e92fe241d25b011117f2ab595615b4c5e1013", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=c91bb7b9fc87284f5382d9fb04db0cb10f6c1fe9", "patch": "@@ -22020,6 +22020,9 @@ Disable the floating-point extension.\n @item +cdecp0, +cdecp1, ... , +cdecp7\n Enable the Custom Datapath Extension (CDE) on selected coprocessors according\n to the numbers given in the options in the range 0 to 7.\n+\n+@item +pacbti\n+Enable the Pointer Authentication and Branch Target Identification Extension.\n @end table\n \n @item  armv8-m.main"}]}