{"sha": "6fc7c517d571f4c666b9b1a8764759ea4a2d3496", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZjN2M1MTdkNTcxZjRjNjY2YjliMWE4NzY0NzU5ZWE0YTJkMzQ5Ng==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-07-21T21:55:22Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-07-21T21:55:22Z"}, "message": "(start_function): If old_decl is NULL, then set it to the implicit decl if any.\n\n(start_function): If old_decl is NULL, then set it to\nthe implicit decl if any.  Delete superfluous test from warn missing\nprototypes code.  For warn missing declarations code, only warn if\nprevious decl is implicit.\n\nFrom-SVN: r7787", "tree": {"sha": "437d6f5e728cb8f2673248f9924ed96896ac244c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/437d6f5e728cb8f2673248f9924ed96896ac244c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6fc7c517d571f4c666b9b1a8764759ea4a2d3496", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fc7c517d571f4c666b9b1a8764759ea4a2d3496", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fc7c517d571f4c666b9b1a8764759ea4a2d3496", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fc7c517d571f4c666b9b1a8764759ea4a2d3496/comments", "author": null, "committer": null, "parents": [{"sha": "59d9021293ae8e85286df22390eb5e154f6ae207", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59d9021293ae8e85286df22390eb5e154f6ae207", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59d9021293ae8e85286df22390eb5e154f6ae207"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "3c0dea04bada2c12c7592a3cdc9cf73df3f51cf0", "filename": "gcc/c-decl.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fc7c517d571f4c666b9b1a8764759ea4a2d3496/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fc7c517d571f4c666b9b1a8764759ea4a2d3496/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=6fc7c517d571f4c666b9b1a8764759ea4a2d3496", "patch": "@@ -5922,6 +5922,11 @@ start_function (declspecs, declarator, nested)\n       current_function_prototype_line = DECL_SOURCE_LINE (old_decl);\n     }\n \n+  /* If there is no explicit declaration, look for any out-of-scope implicit\n+     declarations.  */\n+  if (old_decl == 0)\n+    old_decl = IDENTIFIER_IMPLICIT_DECL (DECL_NAME (decl1));\n+\n   /* Optionally warn of old-fashioned def with no previous prototype.  */\n   if (warn_strict_prototypes\n       && TYPE_ARG_TYPES (TREE_TYPE (decl1)) == 0\n@@ -5937,7 +5942,7 @@ start_function (declspecs, declarator, nested)\n      if the function has already been used.  */\n   else if (warn_missing_prototypes\n \t   && old_decl != 0 && TREE_USED (old_decl)\n-\t   && !(old_decl != 0 && TYPE_ARG_TYPES (TREE_TYPE (old_decl)) != 0))\n+\t   && TYPE_ARG_TYPES (TREE_TYPE (old_decl)) == 0)\n     warning_with_decl (decl1,\n \t\t      \"`%s' was used with no prototype before its definition\");\n   /* Optionally warn of any global def with no previous declaration.  */\n@@ -5949,7 +5954,8 @@ start_function (declspecs, declarator, nested)\n   /* Optionally warn of any def with no previous declaration\n      if the function has already been used.  */\n   else if (warn_missing_declarations\n-\t   && old_decl != 0 && TREE_USED (old_decl))\n+\t   && old_decl != 0 && TREE_USED (old_decl)\n+\t   && old_decl == IDENTIFIER_IMPLICIT_DECL (DECL_NAME (decl1)))\n     warning_with_decl (decl1,\n \t\t    \"`%s' was used with no declaration before its definition\");\n "}]}