{"sha": "cfa01aaba5f17c815e1349bb9cd1db13ad024b69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2ZhMDFhYWJhNWYxN2M4MTVlMTM0OWJiOWNkMWRiMTNhZDAyNGI2OQ==", "commit": {"author": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-11-11T01:24:07Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-11-11T01:24:07Z"}, "message": "arm.c (arm_compute_save_reg0_reg12_mask): Save PIC register if current_function_uses_pic_offset_table is set.\n\n\t* config/arm/arm.c (arm_compute_save_reg0_reg12_mask): Save PIC\n\tregister if current_function_uses_pic_offset_table is set.\n\nFrom-SVN: r90465", "tree": {"sha": "daa8fbb1727f005f09d672a6924f743eb955a29f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/daa8fbb1727f005f09d672a6924f743eb955a29f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cfa01aaba5f17c815e1349bb9cd1db13ad024b69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfa01aaba5f17c815e1349bb9cd1db13ad024b69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cfa01aaba5f17c815e1349bb9cd1db13ad024b69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfa01aaba5f17c815e1349bb9cd1db13ad024b69/comments", "author": null, "committer": null, "parents": [{"sha": "ed50f1785b9c17eb092cb3b2a022ab4dba5ce801", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed50f1785b9c17eb092cb3b2a022ab4dba5ce801", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed50f1785b9c17eb092cb3b2a022ab4dba5ce801"}], "stats": {"total": 18, "additions": 15, "deletions": 3}, "files": [{"sha": "1c32849215f3197b660d7f44c0acd87ab91b6d89", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa01aaba5f17c815e1349bb9cd1db13ad024b69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa01aaba5f17c815e1349bb9cd1db13ad024b69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cfa01aaba5f17c815e1349bb9cd1db13ad024b69", "patch": "@@ -1,3 +1,8 @@\n+2004-11-11  Paul Brook  <paul@codesourcery.com>\n+\n+\t* config/arm/arm.c (arm_compute_save_reg0_reg12_mask): Save PIC\n+\tregister if current_function_uses_pic_offset_table is set.\n+\n 2004-11-10  David Edelsohn  <edelsohn@gnu.org>\n \n \t* config/rs6000/rs6000.md (define_attr \"type\"): Add two and three.\n@@ -47,7 +52,7 @@\n 2004-11-10  Fariborz Jahanian <fjahanian@apple.com>\n \n \tPR tree-optimization/17892\n-    \t* tree-ssa-dom.c (unsafe_associative_fp_binop): Add test for\n+\t* tree-ssa-dom.c (unsafe_associative_fp_binop): Add test for\n \tMINUS_EXPR operator.\n \n 2004-11-10  James A. Morrison  <phython@gcc.gnu.org>"}, {"sha": "24474e98b1498fbaec2b2af15383a4231b672bc3", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cfa01aaba5f17c815e1349bb9cd1db13ad024b69/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cfa01aaba5f17c815e1349bb9cd1db13ad024b69/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=cfa01aaba5f17c815e1349bb9cd1db13ad024b69", "patch": "@@ -8630,6 +8630,12 @@ arm_compute_save_reg0_reg12_mask (void)\n \tif (regs_ever_live[reg]\n \t    || (! current_function_is_leaf && call_used_regs [reg]))\n \t  save_reg_mask |= (1 << reg);\n+\n+      /* Also save the pic base register if neccessary.  */\n+      if (flag_pic\n+\t  && !TARGET_SINGLE_PIC_BASE\n+\t  && current_function_uses_pic_offset_table)\n+\tsave_reg_mask |= 1 << PIC_OFFSET_TABLE_REGNUM;\n     }\n   else\n     {\n@@ -8649,8 +8655,9 @@ arm_compute_save_reg0_reg12_mask (void)\n       /* If we aren't loading the PIC register,\n \t don't stack it even though it may be live.  */\n       if (flag_pic\n-\t  && ! TARGET_SINGLE_PIC_BASE\n-\t  && regs_ever_live[PIC_OFFSET_TABLE_REGNUM])\n+\t  && !TARGET_SINGLE_PIC_BASE \n+\t  && (regs_ever_live[PIC_OFFSET_TABLE_REGNUM]\n+\t      || current_function_uses_pic_offset_table))\n \tsave_reg_mask |= 1 << PIC_OFFSET_TABLE_REGNUM;\n     }\n "}]}