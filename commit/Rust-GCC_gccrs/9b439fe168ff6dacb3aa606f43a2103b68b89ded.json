{"sha": "9b439fe168ff6dacb3aa606f43a2103b68b89ded", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWI0MzlmZTE2OGZmNmRhY2IzYWE2MDZmNDNhMjEwM2I2OGI4OWRlZA==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-03-15T22:24:42Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-03-15T22:24:42Z"}, "message": "re PR c++/24924 (front end and preprocessor pedantic_errors settings should agree)\n\n2007-03-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR c++/24924\n\t* c-opts.c (c_common_post_options): Handle C++ post-processing here.\n\tSet also -pedantic-errors by default for the  preprocessor unless\n\t-fpermissive is given.\ncp/\n\t* decl.c (cxx_init_decl_processing): Move command-line options\n\tprocessing to c-opts.c.\ntestsuite/\n\t* g++.dg/cpp/pedantic-errors.C: New.\n\t* g++.dg/cpp/permissive.C: New.\n\nFrom-SVN: r122961", "tree": {"sha": "ddc17625766b95f07512a991f379768feb496ed3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ddc17625766b95f07512a991f379768feb496ed3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b439fe168ff6dacb3aa606f43a2103b68b89ded", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b439fe168ff6dacb3aa606f43a2103b68b89ded", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b439fe168ff6dacb3aa606f43a2103b68b89ded", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b439fe168ff6dacb3aa606f43a2103b68b89ded/comments", "author": null, "committer": null, "parents": [{"sha": "71afac1da36c39729b20b4a1051fb58fd3d64419", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71afac1da36c39729b20b4a1051fb58fd3d64419", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71afac1da36c39729b20b4a1051fb58fd3d64419"}], "stats": {"total": 57, "additions": 46, "deletions": 11}, "files": [{"sha": "9dfece9fa612dcc52fe76ac846d3330d5964f790", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -1,3 +1,10 @@\n+2007-03-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/24924\n+\t* c-opts.c (c_common_post_options): Handle C++ post-processing here.\n+\tSet also -pedantic-errors by default for the  preprocessor unless\n+\t-fpermissive is given.\n+\t\n 2007-03-15  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/29719"}, {"sha": "b3878ea1b55f7f0905da26167d1747a815524bec", "filename": "gcc/c-opts.c", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Fc-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Fc-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-opts.c?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -1077,6 +1077,23 @@ c_common_post_options (const char **pfilename)\n   if (warn_overlength_strings == -1 || c_dialect_cxx ())\n     warn_overlength_strings = 0;\n \n+  /* Adjust various flags for C++ based on command-line settings.  */\n+  if (c_dialect_cxx ())\n+    {\n+      if (!flag_permissive)\n+\t{\n+\t  flag_pedantic_errors = 1;\n+\t  cpp_opts->pedantic_errors = 1;\n+\t}\n+      if (!flag_no_inline)\n+\t{\n+\t  flag_inline_trees = 1;\n+\t  flag_no_inline = 1;\n+\t}\n+      if (flag_inline_functions)\n+\tflag_inline_trees = 2;\n+    }\n+\n   /* Special format checking options don't work without -Wformat; warn if\n      they are used.  */\n   if (!warn_format)"}, {"sha": "f48aa6bd091f2f9dfa501ef8b7cd70faaf38a07d", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -1,3 +1,9 @@\n+2007-03-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/24924\n+\t* decl.c (cxx_init_decl_processing): Move command-line options\n+\tprocessing to c-opts.c.\n+\t\n 2007-03-15  Douglas Gregor  <doug.gregor@gmail.com>\n \n \t* ptree.c (cxx_print_type): Use formatting markup for integers"}, {"sha": "eefbba30c5d23d7e083b4144a6ff518ce945dba2", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -3143,17 +3143,6 @@ cxx_init_decl_processing (void)\n \n   current_lang_name = NULL_TREE;\n \n-  /* Adjust various flags based on command-line settings.  */\n-  if (!flag_permissive)\n-    flag_pedantic_errors = 1;\n-  if (!flag_no_inline)\n-    {\n-      flag_inline_trees = 1;\n-      flag_no_inline = 1;\n-    }\n-  if (flag_inline_functions)\n-    flag_inline_trees = 2;\n-\n   /* Force minimum function alignment if using the least significant\n      bit of function pointers to store the virtual bit.  */\n   if (TARGET_PTRMEMFUNC_VBIT_LOCATION == ptrmemfunc_vbit_in_pfn"}, {"sha": "3a043c1c21aa2e07feaee8fee4b7e9bf08d6268d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -1,3 +1,9 @@\n+2007-03-15  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR c++/24924\n+\t* g++.dg/cpp/pedantic-errors.C: New.\n+\t* g++.dg/cpp/permissive.C: New.\n+\t\n 2007-03-15  Richard Sandiford  <richard@codesourcery.com>\n \n \t* g++.dg/opt/mmx1.C: Only use the PIC options for fpic targets."}, {"sha": "45382b4b9d345ac0aa324ed95cb23dfa3f34f58c", "filename": "gcc/testsuite/g++.dg/cpp/pedantic-errors.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpedantic-errors.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpedantic-errors.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpedantic-errors.C?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -0,0 +1,5 @@\n+/* { dg-do preprocess } */\n+/* { dg-options \"-std=c++98\" } */\n+\n+#if 1   \n+#endif 1 /* { dg-error \"error: extra tokens at end of #endif directive\" } */"}, {"sha": "cca1a5d4e5f0ad202e765d9b1445d78c88df33d6", "filename": "gcc/testsuite/g++.dg/cpp/permissive.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpermissive.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b439fe168ff6dacb3aa606f43a2103b68b89ded/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpermissive.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpermissive.C?ref=9b439fe168ff6dacb3aa606f43a2103b68b89ded", "patch": "@@ -0,0 +1,5 @@\n+/* { dg-do preprocess } */\n+/* { dg-options \"-std=c++98 -fpermissive\" } */\n+\n+#if 1   \n+#endif 1 /* { dg-warning \"warning: extra tokens at end of #endif directive\" } */"}]}