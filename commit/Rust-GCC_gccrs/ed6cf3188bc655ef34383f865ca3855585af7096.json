{"sha": "ed6cf3188bc655ef34383f865ca3855585af7096", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ2Y2YzMTg4YmM2NTVlZjM0MzgzZjg2NWNhMzg1NTU4NWFmNzA5Ng==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2012-01-24T17:33:41Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2012-01-24T17:33:41Z"}, "message": "re PR target/51968 (gcc trunk (ARM) ICEs in final_scan_insn in final.c:2716, with \"could not split insn\" error msg)\n\nPR target/51968\n        * config/arm/arm.c (neon_split_vcombine): Emit deleted note\n        to effect no-op split.\n\nFrom-SVN: r183480", "tree": {"sha": "c0ad0d8e10a1bb95783ec59820570b1989f11b7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0ad0d8e10a1bb95783ec59820570b1989f11b7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed6cf3188bc655ef34383f865ca3855585af7096", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed6cf3188bc655ef34383f865ca3855585af7096", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed6cf3188bc655ef34383f865ca3855585af7096", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed6cf3188bc655ef34383f865ca3855585af7096/comments", "author": null, "committer": null, "parents": [{"sha": "d4157849c94e274569eff099ff97e51b440219a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4157849c94e274569eff099ff97e51b440219a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4157849c94e274569eff099ff97e51b440219a3"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "4197c182ed47628d1d3941fcd047cd32276c64a3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed6cf3188bc655ef34383f865ca3855585af7096/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed6cf3188bc655ef34383f865ca3855585af7096/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed6cf3188bc655ef34383f865ca3855585af7096", "patch": "@@ -1,3 +1,9 @@\n+2012-01-25  Richard Henderson  <rth@redhat.com>\n+\n+\tPR target/51968\n+\t* config/arm/arm.c (neon_split_vcombine): Emit deleted note\n+\tto effect no-op split.\n+\n 2012-01-24  Aldy Hernandez  <aldyh@redhat.com>\n \t    Patrick Marlier  <patrick.marlier@gmail.com>\n "}, {"sha": "4a94145d4aa8ee4c52f17c93a150dc6ee9338182", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed6cf3188bc655ef34383f865ca3855585af7096/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed6cf3188bc655ef34383f865ca3855585af7096/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=ed6cf3188bc655ef34383f865ca3855585af7096", "patch": "@@ -20928,7 +20928,11 @@ neon_split_vcombine (rtx operands[3])\n   rtx destlo, desthi;\n \n   if (src1 == dest && src2 == dest + halfregs)\n-    return;\n+    {\n+      /* No-op move.  Can't split to nothing; emit something.  */\n+      emit_note (NOTE_INSN_DELETED);\n+      return;\n+    }\n \n   /* Preserve register attributes for variable tracking.  */\n   destlo = gen_rtx_REG_offset (operands[0], halfmode, dest, 0);"}, {"sha": "f0506c267fe7f6654b47d8a89091a646b7cbe247", "filename": "gcc/testsuite/gcc.target/arm/pr51968.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed6cf3188bc655ef34383f865ca3855585af7096/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr51968.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed6cf3188bc655ef34383f865ca3855585af7096/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr51968.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fpr51968.c?ref=ed6cf3188bc655ef34383f865ca3855585af7096", "patch": "@@ -0,0 +1,32 @@\n+/* PR target/51968 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -march=armv7-a -mfloat-abi=softfp -mfpu=neon\" } */\n+/* { dg-require-effective-target arm_neon_ok } */\n+\n+typedef __builtin_neon_qi int8x8_t __attribute__ ((__vector_size__ (8)));\n+typedef __builtin_neon_uqi uint8x8_t __attribute__ ((__vector_size__ (8)));\n+typedef __builtin_neon_qi int8x16_t __attribute__ ((__vector_size__ (16)));\n+typedef __builtin_neon_hi int16x8_t __attribute__ ((__vector_size__ (16)));\n+typedef __builtin_neon_si int32x4_t __attribute__ ((__vector_size__ (16)));\n+struct T { int8x8_t val[2]; };\n+int y;\n+\n+void\n+foo (int8x8_t z, int8x8_t x, int16x8_t b, int8x8_t n)\n+{\n+  if (y)\n+    {\n+      struct T m;\n+      __builtin_neon_vuzpv8qi (&m.val[0], z, x);\n+    }\n+  for (;;)\n+    {\n+      int8x16_t g;\n+      int8x8_t h, j, k;\n+      struct T m;\n+      j = __builtin_neon_vqmovunv8hi (b, 1);\n+      g = __builtin_neon_vcombinev8qi (j, h);\n+      k = __builtin_neon_vget_lowv16qi (g);\n+      __builtin_neon_vuzpv8qi (&m.val[0], k, n);\n+    }\n+}"}]}