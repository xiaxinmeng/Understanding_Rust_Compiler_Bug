{"sha": "5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU4OWEzODFmOWJkZTZiMzk1OWQxZGRiNmViYWEwNGRmMmZiMmRiOA==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2004-07-12T22:45:14Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2004-07-12T22:45:14Z"}, "message": "function.c (expand_function_start): Ensure r_save is in Pmode.\n\n        * function.c (expand_function_start): Ensure r_save is in Pmode.\n\t* calls.c (prepare_call_address): Ensure static_chain_value is\n\t  in Pmode.\n\t* builtins.c (expand_builtin_nonlocal_goto): Ensure r_label and\n          r_save_area are in Pmode.\n\t* config/ia64/ia64.c (ia64_initialize_trampoline): Ensure addr,\n\t  fnaddr, and static_chain are in Pmode.\n\nFrom-SVN: r84584", "tree": {"sha": "87705223af3ed1f7b2d93aaaa0ed8fa416ed4b73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/87705223af3ed1f7b2d93aaaa0ed8fa416ed4b73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/comments", "author": null, "committer": null, "parents": [{"sha": "494d9016318068319677dd1ff501dd2d84820ddc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/494d9016318068319677dd1ff501dd2d84820ddc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/494d9016318068319677dd1ff501dd2d84820ddc"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "1dd10f2f1b4702b5f3a9782c3500feec3f93174f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "patch": "@@ -1,3 +1,13 @@\n+2004-07-12  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* function.c (expand_function_start): Ensure r_save is in Pmode.\n+\t* calls.c (prepare_call_address): Ensure static_chain_value is\n+\tin Pmode.\n+\t* builtins.c (expand_builtin_nonlocal_goto): Ensure r_label and\n+\tr_save_area are in Pmode.\n+\t* config/ia64/ia64.c (ia64_initialize_trampoline): Ensure addr,\n+\tfnaddr, and static_chain are in Pmode.\n+\n 2004-07-12  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR target/16445"}, {"sha": "147cefcfe44308f0f8017263b2dc8e3afc80b803", "filename": "gcc/builtins.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "patch": "@@ -794,7 +794,9 @@ expand_builtin_nonlocal_goto (tree arglist)\n   t_save_area = TREE_VALUE (arglist);\n \n   r_label = expand_expr (t_label, NULL_RTX, VOIDmode, 0);\n+  r_label = convert_memory_address (Pmode, r_label);\n   r_save_area = expand_expr (t_save_area, NULL_RTX, VOIDmode, 0);\n+  r_save_area = convert_memory_address (Pmode, r_save_area);\n   r_fp = gen_rtx_MEM (Pmode, r_save_area);\n   r_sp = gen_rtx_MEM (STACK_SAVEAREA_MODE (SAVE_NONLOCAL),\n \t\t      plus_constant (r_save_area, GET_MODE_SIZE (Pmode)));"}, {"sha": "c54ab48a7d85cb0168ad3a63e289eb2e2fb8e8b5", "filename": "gcc/calls.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Fcalls.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Fcalls.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcalls.c?ref=5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "patch": "@@ -183,6 +183,7 @@ prepare_call_address (rtx funexp, rtx static_chain_value,\n \n   if (static_chain_value != 0)\n     {\n+      static_chain_value = convert_memory_address (Pmode, static_chain_value);\n       emit_move_insn (static_chain_rtx, static_chain_value);\n \n       if (REG_P (static_chain_rtx))"}, {"sha": "3f03cab969773eab26199ea68e1591d3c1334249", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "patch": "@@ -3474,6 +3474,11 @@ ia64_initialize_trampoline (rtx addr, rtx fnaddr, rtx static_chain)\n \t}\n     }\n \n+  /* Make sure addresses are Pmode even if we are in ILP32 mode. */\n+  addr = convert_memory_address (Pmode, addr);\n+  fnaddr = convert_memory_address (Pmode, fnaddr);\n+  static_chain = convert_memory_address (Pmode, static_chain);\n+\n   /* Load up our iterator.  */\n   addr_reg = gen_reg_rtx (Pmode);\n   emit_move_insn (addr_reg, addr);"}, {"sha": "19549b1b800a0c50103b8def30234f0add267949", "filename": "gcc/function.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=5e89a381f9bde6b3959d1ddb6ebaa04df2fb2db8", "patch": "@@ -4190,6 +4190,7 @@ expand_function_start (tree subr)\n       t_save = build (ARRAY_REF, ptr_type_node, cfun->nonlocal_goto_save_area,\n \t\t      integer_zero_node, NULL_TREE, NULL_TREE);\n       r_save = expand_expr (t_save, NULL_RTX, VOIDmode, EXPAND_WRITE);\n+      r_save = convert_memory_address (Pmode, r_save);\n \n       emit_move_insn (r_save, virtual_stack_vars_rtx);\n       update_nonlocal_goto_save_area ();"}]}