{"sha": "47db37ed477f29ac52c4484c260138d15e44a36b", "node_id": "C_kwDOANBUbNoAKDQ3ZGIzN2VkNDc3ZjI5YWM1MmM0NDg0YzI2MDEzOGQxNWU0NGEzNmI", "commit": {"author": {"name": "Torbj\u00f6rn SVENSSON", "email": "torbjorn.svensson@foss.st.com", "date": "2022-10-21T10:29:13Z"}, "committer": {"name": "Torbj\u00f6rn SVENSSON", "email": "torbjorn.svensson@foss.st.com", "date": "2022-10-24T08:20:34Z"}, "message": "lto: Always quote path to touch\n\nWhen generating the makefile, make sure that the paths are quoted so\nthat a native Windows path works within Cygwin.\n\nWithout this patch, this error is reported by the DejaGNU test suite:\n\nmake: [T:\\ccMf0kI3.mk:3: T:\\ccGEvdDp.ltrans0.ltrans.o] Error 1 (ignored)\n\nThe generated makefile fragment without the patch:\n\nT:\\ccGEvdDp.ltrans0.ltrans.o:\n  @T:\\build\\bin\\arm-none-eabi-g++.exe '-xlto' ... '-o' 'T:\\ccGEvdDp.ltrans0.ltrans.o' 'T:\\ccGEvdDp.ltrans0.o'\n  @-touch -r T:\\ccGEvdDp.ltrans0.o T:\\ccGEvdDp.ltrans0.o.tem > /dev/null 2>&1 && mv T:\\ccGEvdDp.ltrans0.o.tem T:\\ccGEvdDp.ltrans0.o\n.PHONY: all\nall: \\\n  T:\\ccGEvdDp.ltrans0.ltrans.o\n\nWith the patch, the touch line would be replace with:\n\n  @-touch -r \"T:\\ccGEvdDp.ltrans0.o\" \"T:\\ccGEvdDp.ltrans0.o.tem\" > /dev/null 2>&1 && mv \"T:\\ccGEvdDp.ltrans0.o.tem\" \"T:\\ccGEvdDp.ltrans0.o\"\n\ngcc/ChangeLog:\n\n\t* lto-wrapper.cc: Quote paths in makefile.\n\nCo-Authored-By: Yvan ROUX <yvan.roux@foss.st.com>\nSigned-off-by: Torbj\u00f6rn SVENSSON <torbjorn.svensson@foss.st.com>", "tree": {"sha": "6b8dfb0b14e1a8e976f1feca15c03bdc6404a6d5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6b8dfb0b14e1a8e976f1feca15c03bdc6404a6d5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/47db37ed477f29ac52c4484c260138d15e44a36b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47db37ed477f29ac52c4484c260138d15e44a36b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47db37ed477f29ac52c4484c260138d15e44a36b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47db37ed477f29ac52c4484c260138d15e44a36b/comments", "author": null, "committer": null, "parents": [{"sha": "6bfea64164c3f1989d34656ab96d03a7cda2143e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6bfea64164c3f1989d34656ab96d03a7cda2143e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6bfea64164c3f1989d34656ab96d03a7cda2143e"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "b12bcc1ad273249f7f67dda122389cfea5d1e8df", "filename": "gcc/lto-wrapper.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47db37ed477f29ac52c4484c260138d15e44a36b/gcc%2Flto-wrapper.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47db37ed477f29ac52c4484c260138d15e44a36b/gcc%2Flto-wrapper.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-wrapper.cc?ref=47db37ed477f29ac52c4484c260138d15e44a36b", "patch": "@@ -2010,8 +2010,8 @@ run_gcc (unsigned argc, char *argv[])\n \t         truncate them as soon as we have processed it.  This\n \t\t reduces temporary disk-space usage.  */\n \t      if (! save_temps)\n-\t\tfprintf (mstream, \"\\t@-touch -r %s %s.tem > /dev/null 2>&1 \"\n-\t\t\t \"&& mv %s.tem %s\\n\",\n+\t\tfprintf (mstream, \"\\t@-touch -r \\\"%s\\\" \\\"%s.tem\\\" > /dev/null \"\n+\t\t\t \"2>&1 && mv \\\"%s.tem\\\" \\\"%s\\\"\\n\",\n \t\t\t input_name, input_name, input_name, input_name); \n \t    }\n \t  else"}]}