{"sha": "def72bd2e9c6d7b92791b19a249256e1ede33c32", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGVmNzJiZDJlOWM2ZDdiOTI3OTFiMTlhMjQ5MjU2ZTFlZGUzM2MzMg==", "commit": {"author": {"name": "Gavin Romig-Koch", "email": "gavin@cygnus.com", "date": "1999-02-03T13:04:22Z"}, "committer": {"name": "Gavin Romig-Koch", "email": "gavin@gcc.gnu.org", "date": "1999-02-03T13:04:22Z"}, "message": "mips.c (true_reg_or_0_operand): New function.\n\n\t* config/mips/mips.c (true_reg_or_0_operand) : New function.\n\t* config/mips/mips.h (PREDICATE_CODES): Add true_reg_or_0_operand.\n\t* config/mips/mips.md (div_trap,div_trap_normal,div_trap_mips16):\n\tUse true_reg_or_0_operand for div_trap.\n\nFrom-SVN: r25008", "tree": {"sha": "3e5a49269bfcd327ecac89a44f251f403d61dd1c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e5a49269bfcd327ecac89a44f251f403d61dd1c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/def72bd2e9c6d7b92791b19a249256e1ede33c32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/def72bd2e9c6d7b92791b19a249256e1ede33c32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/def72bd2e9c6d7b92791b19a249256e1ede33c32", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/def72bd2e9c6d7b92791b19a249256e1ede33c32/comments", "author": null, "committer": null, "parents": [{"sha": "4d87f7a77cbb3865e5cc0aca0a900b324012254d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4d87f7a77cbb3865e5cc0aca0a900b324012254d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4d87f7a77cbb3865e5cc0aca0a900b324012254d"}], "stats": {"total": 46, "additions": 41, "deletions": 5}, "files": [{"sha": "15187853b2e8a00869c700a86a1e06722bd24a76", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=def72bd2e9c6d7b92791b19a249256e1ede33c32", "patch": "@@ -1,3 +1,10 @@\n+Wed Feb  3 15:51:04 1999  Gavin Romig-Koch  <gavin@cygnus.com>\n+\n+\t* config/mips/mips.c (true_reg_or_0_operand) : New function.\n+\t* config/mips/mips.h (PREDICATE_CODES): Add true_reg_or_0_operand.\n+\t* config/mips/mips.md (div_trap,div_trap_normal,div_trap_mips16): \n+\tUse true_reg_or_0_operand for div_trap.\n+\n Wed Feb  3 20:44:59 1999  J\"orn Rennecke <amylaar@cygnus.co.uk>\n \n \t* loop.h (express_from): Declare."}, {"sha": "e569c3608a8c70d78ab2609d6f0364fc3f1cf7b2", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 27, "deletions": 0, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=def72bd2e9c6d7b92791b19a249256e1ede33c32", "patch": "@@ -543,6 +543,33 @@ reg_or_0_operand (op, mode)\n   return 0;\n }\n \n+/* Return truth value of whether OP is a register or the constant 0,\n+   even in mips16 mode. */\n+\n+int\n+true_reg_or_0_operand (op, mode)\n+     rtx op;\n+     enum machine_mode mode;\n+{\n+  switch (GET_CODE (op))\n+    {\n+    case CONST_INT:\n+      return INTVAL (op) == 0;\n+\n+    case CONST_DOUBLE:\n+      return op == CONST0_RTX (mode);\n+\n+    case REG:\n+    case SUBREG:\n+      return register_operand (op, mode);\n+\n+    default:\n+      break;\n+    }\n+\n+  return 0;\n+}\n+\n /* Return truth value if a CONST_DOUBLE is ok to be a legitimate constant.  */\n \n int"}, {"sha": "0fd87c73e483e36023a0dec1c8ce473681e08cd2", "filename": "gcc/config/mips/mips.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2Fconfig%2Fmips%2Fmips.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2Fconfig%2Fmips%2Fmips.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.h?ref=def72bd2e9c6d7b92791b19a249256e1ede33c32", "patch": "@@ -226,6 +226,7 @@ extern void\t\tprint_operand_address ();\n extern void\t\tprint_operand ();\n extern void\t\tprint_options ();\n extern int\t\treg_or_0_operand ();\n+extern int\t\ttrue_reg_or_0_operand ();\n extern int\t\tsimple_epilogue_p ();\n extern int\t\tsimple_memory_operand ();\n extern int\t\tdouble_memory_operand ();\n@@ -3697,7 +3698,8 @@ while (0)\n   {\"uns_arith_operand\",\t\t{ REG, CONST_INT, SUBREG }},\t\t\\\n   {\"arith_operand\",\t\t{ REG, CONST_INT, SUBREG }},\t\t\\\n   {\"arith32_operand\",\t\t{ REG, CONST_INT, SUBREG }},\t\t\\\n-  {\"reg_or_0_operand\",\t\t{ REG, CONST_INT, SUBREG }},\t\t\\\n+  {\"reg_or_0_operand\",\t\t{ REG, CONST_INT, CONST_DOUBLE, SUBREG }}, \\\n+  {\"true_reg_or_0_operand\",\t{ REG, CONST_INT, CONST_DOUBLE, SUBREG }}, \\\n   {\"small_int\",\t\t\t{ CONST_INT }},\t\t\t\t\\\n   {\"large_int\",\t\t\t{ CONST_INT }},\t\t\t\t\\\n   {\"mips_const_double_ok\",\t{ CONST_DOUBLE }},\t\t\t\\\n@@ -3715,7 +3717,7 @@ while (0)\n \t\t\t\t  SYMBOL_REF, LABEL_REF, SUBREG, REG,\t\\\n \t\t\t\t  MEM, SIGN_EXTEND }},\t\t\t\\\n   {\"se_register_operand\",\t{ SUBREG, REG, SIGN_EXTEND }},\t\t\\\n-  {\"se_reg_or_0_operand\",\t{ REG, CONST_INT, SUBREG,\t\t\\\n+  {\"se_reg_or_0_operand\",\t{ REG, CONST_INT, CONST_DOUBLE, SUBREG,\t\\\n \t\t\t\t  SIGN_EXTEND }},\t\t\t\\\n   {\"se_uns_arith_operand\",\t{ REG, CONST_INT, SUBREG,\t\t\\\n \t\t\t\t  SIGN_EXTEND }},\t\t\t\\"}, {"sha": "40e741975b012e4645b323f0a644b1d0a0d974e3", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/def72bd2e9c6d7b92791b19a249256e1ede33c32/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=def72bd2e9c6d7b92791b19a249256e1ede33c32", "patch": "@@ -2414,7 +2414,7 @@\n \n (define_expand \"div_trap\"\n   [(trap_if (eq (match_operand 0 \"register_operand\" \"d\")\n-\t\t(match_operand 1 \"reg_or_0_operand\" \"dJ\"))\n+\t\t(match_operand 1 \"true_reg_or_0_operand\" \"dJ\"))\n             (match_operand 2 \"immediate_operand\" \"\"))]\n   \"\"\n   \"\n@@ -2428,7 +2428,7 @@\n \n (define_insn \"div_trap_normal\"\n   [(trap_if (eq (match_operand 0 \"register_operand\" \"d\")\n-\t\t(match_operand 1 \"reg_or_0_operand\" \"dJ\"))\n+\t\t(match_operand 1 \"true_reg_or_0_operand\" \"dJ\"))\n             (match_operand 2 \"immediate_operand\" \"\"))]\n   \"!TARGET_MIPS16\"\n   \"*\n@@ -2471,7 +2471,7 @@\n \n (define_insn \"div_trap_mips16\"\n   [(trap_if (eq (match_operand 0 \"register_operand\" \"d\")\n-\t\t(match_operand 1 \"reg_or_0_operand\" \"dJ\"))\n+\t\t(match_operand 1 \"true_reg_or_0_operand\" \"dJ\"))\n             (match_operand 2 \"immediate_operand\" \"\"))\n    (clobber (reg:SI 24))]\n   \"TARGET_MIPS16\""}]}