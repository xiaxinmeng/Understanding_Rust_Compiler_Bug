{"sha": "37a8ccfcdcfe73378717101f82767760ae35f5a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdhOGNjZmNkY2ZlNzMzNzg3MTcxMDFmODI3Njc3NjBhZTM1ZjVhNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-04-18T21:55:07Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-04-18T21:55:07Z"}, "message": "re PR c++/48632 (Internal compiler error when using OpenMP with template)\n\n\tPR c++/48632\n\t* parser.c (cp_parser_omp_for_loop): Don't use cp_parser_omp_for_incr\n\tfor type dependent pointers.\n\n\t* g++.dg/gomp/pr48632.C: New test.\n\nFrom-SVN: r172674", "tree": {"sha": "08707682b4a0ad3746166fcad4fc319964e578d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/08707682b4a0ad3746166fcad4fc319964e578d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37a8ccfcdcfe73378717101f82767760ae35f5a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37a8ccfcdcfe73378717101f82767760ae35f5a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37a8ccfcdcfe73378717101f82767760ae35f5a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37a8ccfcdcfe73378717101f82767760ae35f5a5/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7254cb57152a417a648f2217d5f8695e636d7cde", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7254cb57152a417a648f2217d5f8695e636d7cde", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7254cb57152a417a648f2217d5f8695e636d7cde"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "e7d75e881fe30287396d26f2064057f2f6c0fb1e", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=37a8ccfcdcfe73378717101f82767760ae35f5a5", "patch": "@@ -1,3 +1,9 @@\n+2011-04-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/48632\n+\t* parser.c (cp_parser_omp_for_loop): Don't use cp_parser_omp_for_incr\n+\tfor type dependent pointers.\n+\n 2011-04-18  Jim Meyering  <meyering@redhat.com>\n \n \t* pt.c (type_unification_real): Fix typo in comment: s/in in/in/."}, {"sha": "7d3121c1b57950f61efb1cb0a1d69b555651bf63", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=37a8ccfcdcfe73378717101f82767760ae35f5a5", "patch": "@@ -24496,7 +24496,8 @@ cp_parser_omp_for_loop (cp_parser *parser, tree clauses, tree *par_clauses)\n \t  /* If decl is an iterator, preserve the operator on decl\n \t     until finish_omp_for.  */\n \t  if (decl\n-\t      && (type_dependent_expression_p (decl)\n+\t      && ((type_dependent_expression_p (decl)\n+\t\t   && !POINTER_TYPE_P (TREE_TYPE (decl)))\n \t\t  || CLASS_TYPE_P (TREE_TYPE (decl))))\n \t    incr = cp_parser_omp_for_incr (parser, decl);\n \t  else"}, {"sha": "7f1ff5872e4bd8946ecfbef0f39686b383bf4f04", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=37a8ccfcdcfe73378717101f82767760ae35f5a5", "patch": "@@ -1,3 +1,8 @@\n+2011-04-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/48632\n+\t* g++.dg/gomp/pr48632.C: New test.\n+\n 2011-04-18  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.target/i386/sse2-maskmovdqu.c: New test."}, {"sha": "afa8b18933668e845aaff5eca26320df76ccc188", "filename": "gcc/testsuite/g++.dg/gomp/pr48632.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr48632.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37a8ccfcdcfe73378717101f82767760ae35f5a5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr48632.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgomp%2Fpr48632.C?ref=37a8ccfcdcfe73378717101f82767760ae35f5a5", "patch": "@@ -0,0 +1,22 @@\n+// PR c++/48632\n+// { dg-do compile }\n+// { dg-options \"-fopenmp\" }\n+\n+template<typename T>\n+void\n+foo (T *x, T *y, unsigned z)\n+{\n+#pragma omp parallel for\n+  for (T *p = x; p < y; p += z)\n+    ;\n+#pragma omp parallel for\n+  for (T *p = y; p > x; p -= z)\n+    ;\n+}\n+\n+int\n+main ()\n+{\n+  char buf[10];\n+  foo (&buf[0], &buf[9], 1);\n+}"}]}