{"sha": "372db67b4de04e6fe86a44fdad34c7d0ec14fe6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzcyZGI2N2I0ZGUwNGU2ZmU4NmE0NGZkYWQzNGM3ZDBlYzE0ZmU2YQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2017-02-01T20:36:23Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2017-02-01T20:36:23Z"}, "message": "re PR ada/79309 (incorrectly bounded calls to strncat in adaint.c)\n\n\tPR ada/79309\n\t* adaint.c (__gnat_killprocesstree): Fix broken string handling.\n\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r245103", "tree": {"sha": "421bbefb89474fb4f95af741b1c63d736e807737", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/421bbefb89474fb4f95af741b1c63d736e807737"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a/comments", "author": null, "committer": null, "parents": [{"sha": "cd8ae5edfe8587fb39227ddcbb359f05649a14c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd8ae5edfe8587fb39227ddcbb359f05649a14c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd8ae5edfe8587fb39227ddcbb359f05649a14c6"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "387cfbfc559bf0e38aff89754abf96e9a7822d1c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=372db67b4de04e6fe86a44fdad34c7d0ec14fe6a", "patch": "@@ -1,3 +1,9 @@\n+2017-02-01  Eric Botcazou  <ebotcazou@adacore.com>\n+            Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR ada/79309\n+\t* adaint.c (__gnat_killprocesstree): Fix broken string handling.\n+\n 2017-01-25  Maxim Ostapenko  <m.ostapenko@samsung.com>\n \n \tPR lto/79061"}, {"sha": "e5fea3eefe086cd556bea7dc2d25f4f3ea3270ab", "filename": "gcc/ada/adaint.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a/gcc%2Fada%2Fadaint.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/372db67b4de04e6fe86a44fdad34c7d0ec14fe6a/gcc%2Fada%2Fadaint.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fadaint.c?ref=372db67b4de04e6fe86a44fdad34c7d0ec14fe6a", "patch": "@@ -3396,14 +3396,16 @@ void __gnat_killprocesstree (int pid, int sig_num)\n     {\n       if ((d->d_type & DT_DIR) == DT_DIR)\n         {\n-          char statfile[64] = { 0 };\n+          char statfile[64];\n           int _pid, _ppid;\n \n           /* read /proc/<PID>/stat */\n \n-          strncpy (statfile, \"/proc/\", sizeof(statfile));\n-          strncat (statfile, d->d_name, sizeof(statfile));\n-          strncat (statfile, \"/stat\", sizeof(statfile));\n+          if (strlen (d->d_name) >= sizeof (statfile) - sizeof (\"/proc//stat\"))\n+            continue;\n+          strcpy (statfile, \"/proc/\");\n+          strcat (statfile, d->d_name);\n+          strcat (statfile, \"/stat\");\n \n           FILE *fd = fopen (statfile, \"r\");\n "}]}