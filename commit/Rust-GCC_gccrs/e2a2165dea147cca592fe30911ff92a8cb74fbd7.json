{"sha": "e2a2165dea147cca592fe30911ff92a8cb74fbd7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTJhMjE2NWRlYTE0N2NjYTU5MmZlMzA5MTFmZjkyYThjYjc0ZmJkNw==", "commit": {"author": {"name": "Alexander Ivchenko", "email": "alexander.ivchenko@intel.com", "date": "2014-09-25T08:25:56Z"}, "committer": {"name": "Kirill Yukhin", "email": "kyukhin@gcc.gnu.org", "date": "2014-09-25T08:25:56Z"}, "message": "AVX-512. Extend `perm' insn patterns.\n\ngcc/\n\t* config/i386/sse.md\n\t(define_expand \"<avx2_avx512f>_perm<mode>\"): Rename to ...\n\t(define_expand \"<avx2_avx512>_perm<mode>\"): ... this.\n\t(define_expand \"avx512f_perm<mode>_mask\"): Rename to ...\n\t(define_expand \"<avx512>_perm<mode>_mask\"): ... this.\n\tUse VI8F_256_512 mode iterator.\n\t(define_insn \"<avx2_avx512f>_perm<mode>_1<mask_name>\"): Rename to ...\n\t(define_insn \"<avx2_avx512>_perm<mode>_1<mask_name>\"): ... this.\n\n\nCo-Authored-By: Andrey Turetskiy <andrey.turetskiy@intel.com>\nCo-Authored-By: Anna Tikhonova <anna.tikhonova@intel.com>\nCo-Authored-By: Ilya Tocar <ilya.tocar@intel.com>\nCo-Authored-By: Ilya Verbin <ilya.verbin@intel.com>\nCo-Authored-By: Kirill Yukhin <kirill.yukhin@intel.com>\nCo-Authored-By: Maxim Kuznetsov <maxim.kuznetsov@intel.com>\nCo-Authored-By: Michael Zolotukhin <michael.v.zolotukhin@intel.com>\n\nFrom-SVN: r215590", "tree": {"sha": "9d343c0cd10166fd3645aa8f71eb0683df678e8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9d343c0cd10166fd3645aa8f71eb0683df678e8b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e2a2165dea147cca592fe30911ff92a8cb74fbd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2a2165dea147cca592fe30911ff92a8cb74fbd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e2a2165dea147cca592fe30911ff92a8cb74fbd7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e2a2165dea147cca592fe30911ff92a8cb74fbd7/comments", "author": null, "committer": null, "parents": [{"sha": "6eacd27c13582f51cc42088ffd1734953b2ce8ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6eacd27c13582f51cc42088ffd1734953b2ce8ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6eacd27c13582f51cc42088ffd1734953b2ce8ef"}], "stats": {"total": 34, "additions": 26, "deletions": 8}, "files": [{"sha": "06c4f0a451999369ecee16ace4bc693ec4d2ad9d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a2165dea147cca592fe30911ff92a8cb74fbd7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a2165dea147cca592fe30911ff92a8cb74fbd7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e2a2165dea147cca592fe30911ff92a8cb74fbd7", "patch": "@@ -1,3 +1,21 @@\n+2014-09-25  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n+\t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n+\t    Anna Tikhonova  <anna.tikhonova@intel.com>\n+\t    Ilya Tocar  <ilya.tocar@intel.com>\n+\t    Andrey Turetskiy  <andrey.turetskiy@intel.com>\n+\t    Ilya Verbin  <ilya.verbin@intel.com>\n+\t    Kirill Yukhin  <kirill.yukhin@intel.com>\n+\t    Michael Zolotukhin  <michael.v.zolotukhin@intel.com>\n+\n+\t* config/i386/sse.md\n+\t(define_expand \"<avx2_avx512f>_perm<mode>\"): Rename to ...\n+\t(define_expand \"<avx2_avx512>_perm<mode>\"): ... this.\n+\t(define_expand \"avx512f_perm<mode>_mask\"): Rename to ...\n+\t(define_expand \"<avx512>_perm<mode>_mask\"): ... this.\n+\tUse VI8F_256_512 mode iterator.\n+\t(define_insn \"<avx2_avx512f>_perm<mode>_1<mask_name>\"): Rename to ...\n+\t(define_insn \"<avx2_avx512bw>_perm<mode>_1<mask_name>\"): ... this.\n+\n 2014-09-25  Alexander Ivchenko  <alexander.ivchenko@intel.com>\n \t    Maxim Kuznetsov  <maxim.kuznetsov@intel.com>\n \t    Anna Tikhonova  <anna.tikhonova@intel.com>"}, {"sha": "e7646d7775374b7e9f6c02bcd8750af6f4236274", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 8, "deletions": 8, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e2a2165dea147cca592fe30911ff92a8cb74fbd7/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e2a2165dea147cca592fe30911ff92a8cb74fbd7/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=e2a2165dea147cca592fe30911ff92a8cb74fbd7", "patch": "@@ -15921,31 +15921,31 @@\n    (set_attr \"prefix\" \"<mask_prefix2>\")\n    (set_attr \"mode\" \"<sseinsnmode>\")])\n \n-(define_expand \"<avx2_avx512f>_perm<mode>\"\n+(define_expand \"<avx2_avx512>_perm<mode>\"\n   [(match_operand:VI8F_256_512 0 \"register_operand\")\n    (match_operand:VI8F_256_512 1 \"nonimmediate_operand\")\n    (match_operand:SI 2 \"const_0_to_255_operand\")]\n   \"TARGET_AVX2\"\n {\n   int mask = INTVAL (operands[2]);\n-  emit_insn (gen_<avx2_avx512f>_perm<mode>_1 (operands[0], operands[1],\n+  emit_insn (gen_<avx2_avx512>_perm<mode>_1 (operands[0], operands[1],\n \t\t\t\t\t      GEN_INT ((mask >> 0) & 3),\n \t\t\t\t\t      GEN_INT ((mask >> 2) & 3),\n \t\t\t\t\t      GEN_INT ((mask >> 4) & 3),\n \t\t\t\t\t      GEN_INT ((mask >> 6) & 3)));\n   DONE;\n })\n \n-(define_expand \"avx512f_perm<mode>_mask\"\n-  [(match_operand:V8FI 0 \"register_operand\")\n-   (match_operand:V8FI 1 \"nonimmediate_operand\")\n+(define_expand \"<avx512>_perm<mode>_mask\"\n+  [(match_operand:VI8F_256_512 0 \"register_operand\")\n+   (match_operand:VI8F_256_512 1 \"nonimmediate_operand\")\n    (match_operand:SI 2 \"const_0_to_255_operand\")\n-   (match_operand:V8FI 3 \"vector_move_operand\")\n+   (match_operand:VI8F_256_512 3 \"vector_move_operand\")\n    (match_operand:<avx512fmaskmode> 4 \"register_operand\")]\n   \"TARGET_AVX512F\"\n {\n   int mask = INTVAL (operands[2]);\n-  emit_insn (gen_<avx2_avx512f>_perm<mode>_1_mask (operands[0], operands[1],\n+  emit_insn (gen_<avx2_avx512>_perm<mode>_1_mask (operands[0], operands[1],\n \t\t\t\t\t\t   GEN_INT ((mask >> 0) & 3),\n \t\t\t\t\t\t   GEN_INT ((mask >> 2) & 3),\n \t\t\t\t\t\t   GEN_INT ((mask >> 4) & 3),\n@@ -15954,7 +15954,7 @@\n   DONE;\n })\n \n-(define_insn \"<avx2_avx512f>_perm<mode>_1<mask_name>\"\n+(define_insn \"<avx2_avx512>_perm<mode>_1<mask_name>\"\n   [(set (match_operand:VI8F_256_512 0 \"register_operand\" \"=v\")\n \t(vec_select:VI8F_256_512\n \t  (match_operand:VI8F_256_512 1 \"nonimmediate_operand\" \"vm\")"}]}