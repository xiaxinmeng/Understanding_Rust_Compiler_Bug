{"sha": "e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTIwMGI4OWMwZjYyZGYxYjFkZDc2Yzc1Y2NmYjkwZWE4MmZiYjdlNQ==", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2021-06-18T19:18:01Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2021-06-18T19:18:01Z"}, "message": "Merge #503\n\n503: Use DW_LANG_Rust in DWARF r=philberty a=tromey\n\nThis changes the GCC DWARF emitterto use DW_LANG_Rust or\r\nDW_LANG_Rust_old as appropriate.\r\n\n\nCo-authored-by: Tom Tromey <tom@tromey.com>", "tree": {"sha": "c01c1c974d7a652ee63e3438bda958676badfddb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c01c1c974d7a652ee63e3438bda958676badfddb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJgzPFpCRBK7hj4Ov3rIwAAtsIIAA+IHBpRBdPHjSwKG2Xkt0l8\nS1ghmFBQpQqxSquWfUYg63+eWNMn55IH095lNfG8I5wBLDwh7beLQAjXkWB70yZr\n+769Lj9dTaQ3hyFtMB+j/Z20dfDKEO/5LIBOy1zaZugqAtZbbxDNpbKyCqLXvpEE\n5SOLrAGXFvKVYIRaQXRn0jvqkKUVZQ2e1AaY64oyW/Pv0b+aPCSAyscevHr6h31u\n1tnYDnKvTqm11+5KfiaGC3mRUCzSLgrEHkZlh59XNlTjq/ToapYTiwawUGysMYQE\nev0KRROHCFsBmL/6VRq9LeuMY1zqqMXwVaAQtfhgCUSpPS54aNB+ViRWs56QQzA=\n=eMAM\n-----END PGP SIGNATURE-----\n", "payload": "tree c01c1c974d7a652ee63e3438bda958676badfddb\nparent 7a47eb66a2553e52cd444b4b9e9f57ec593dd89b\nparent c16652f3e43726f62dc0a1f70f8cfcab9f5bc117\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1624043881 +0000\ncommitter GitHub <noreply@github.com> 1624043881 +0000\n\nMerge #503\n\n503: Use DW_LANG_Rust in DWARF r=philberty a=tromey\n\nThis changes the GCC DWARF emitterto use DW_LANG_Rust or\r\nDW_LANG_Rust_old as appropriate.\r\n\n\nCo-authored-by: Tom Tromey <tom@tromey.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7a47eb66a2553e52cd444b4b9e9f57ec593dd89b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a47eb66a2553e52cd444b4b9e9f57ec593dd89b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a47eb66a2553e52cd444b4b9e9f57ec593dd89b"}, {"sha": "c16652f3e43726f62dc0a1f70f8cfcab9f5bc117", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c16652f3e43726f62dc0a1f70f8cfcab9f5bc117", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c16652f3e43726f62dc0a1f70f8cfcab9f5bc117"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "725288797237e0ea799a1f364b2804edb346d344", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "patch": "@@ -24634,6 +24634,13 @@ gen_compile_unit_die (const char *filename)\n     }\n   else if (strcmp (language_string, \"GNU F77\") == 0)\n     language = DW_LANG_Fortran77;\n+  else if (strcmp (language_string, \"GNU Rust\") == 0)\n+    {\n+      if (dwarf_version >= 5 || !dwarf_strict)\n+\tlanguage = DW_LANG_Rust;\n+      else\n+\tlanguage = DW_LANG_Rust_old;\n+    }\n   else if (dwarf_version >= 3 || !dwarf_strict)\n     {\n       if (strcmp (language_string, \"GNU Ada\") == 0)"}, {"sha": "7de43e64e36b6b3b96b7a027d4a695cac819d7cd", "filename": "gcc/testsuite/rust/debug/debug.exp", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Ftestsuite%2Frust%2Fdebug%2Fdebug.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Ftestsuite%2Frust%2Fdebug%2Fdebug.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Fdebug.exp?ref=e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "patch": "@@ -0,0 +1,33 @@\n+# Copyright (C) 2021 Free Software Foundation, Inc.\n+\n+# This program is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3 of the License, or\n+# (at your option) any later version.\n+# \n+# This program is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+# \n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# Debugging tests.\n+\n+# Load support procs.\n+load_lib rust-dg.exp\n+\n+# Initialize `dg'.\n+dg-init\n+\n+# Main loop.\n+set saved-dg-do-what-default ${dg-do-what-default}\n+\n+set dg-do-what-default \"compile\"\n+dg-runtest [lsort [glob -nocomplain $srcdir/$subdir/*.rs]] \"\" \"\"\n+set dg-do-what-default ${saved-dg-do-what-default}\n+\n+# All done.\n+dg-finish"}, {"sha": "eec5264e557de9d6bb3c3a98b03296ff8e353a4b", "filename": "gcc/testsuite/rust/debug/lang.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs?ref=e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "patch": "@@ -0,0 +1,6 @@\n+fn main () {\n+// { dg-do compile }\n+// { dg-options \"-gdwarf-5 -dA\" }\n+// DW_LANG_Rust is 0x1c\n+// { dg-final { scan-assembler \"0x1c\\[^\\n\\r]* DW_AT_language\" } } */\n+}"}, {"sha": "d80a5db7e61f72100ff68f19264680ed7b2ff70b", "filename": "gcc/testsuite/rust/debug/oldlang.rs", "status": "added", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs?ref=e200b89c0f62df1b1dd76c75ccfb90ea82fbb7e5", "patch": "@@ -0,0 +1,6 @@\n+fn main () {\n+// { dg-do compile }\n+// { dg-options \"-gstrict-dwarf -gdwarf-3 -dA\" }\n+// DW_LANG_Rust_old is 0x9000\n+// { dg-final { scan-assembler \"0x9000\\[^\\n\\r]* DW_AT_language\" } } */\n+}"}]}