{"sha": "6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmI5NThjZWNhYTBhOWQ4Y2I3YjA0ZWUwYjRhMmUzNmVmZDhkMDQ1MA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2010-10-18T09:55:41Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2010-10-18T09:55:41Z"}, "message": "exp_ch6.adb (Expand_N_Subprogram_Declaration): Use Freeze_Before.\n\n2010-10-18  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* exp_ch6.adb (Expand_N_Subprogram_Declaration): Use Freeze_Before.\n\t(Expand_Protected_Object_Reference): Likewise.\n\t* sem_attr.adb (Resolve_Attribute): Likewise.\n\t* sem_ch3.adb (Analyze_Subtype_Declaration): Likewise.\n\t* sem_ch6.adb (Analyze_Subprogram_Body_Helper): Likewise.\n\nFrom-SVN: r165616", "tree": {"sha": "3e2d1250cb2ab78d46473421f04f124875d8234d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e2d1250cb2ab78d46473421f04f124875d8234d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/comments", "author": null, "committer": null, "parents": [{"sha": "0877856b4ea175fe9d5339752124a2b4faf929ea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0877856b4ea175fe9d5339752124a2b4faf929ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0877856b4ea175fe9d5339752124a2b4faf929ea"}], "stats": {"total": 20, "additions": 14, "deletions": 6}, "files": [{"sha": "37b23e926caf177d40b8a0fa79df7e96b97e077c", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "patch": "@@ -1,3 +1,11 @@\n+2010-10-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* exp_ch6.adb (Expand_N_Subprogram_Declaration): Use Freeze_Before.\n+\t(Expand_Protected_Object_Reference): Likewise.\n+\t* sem_attr.adb (Resolve_Attribute): Likewise.\n+\t* sem_ch3.adb (Analyze_Subtype_Declaration): Likewise.\n+\t* sem_ch6.adb (Analyze_Subprogram_Body_Helper): Likewise.\n+\n 2010-10-18  Arnaud Charlet  <charlet@adacore.com>\n \n \t* g-comlin.adb (Get_Switches): Prevent dereferencing null Config."}, {"sha": "82a11d321ce7685f1f353339a358a857c108b4d2", "filename": "gcc/ada/exp_ch6.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fexp_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fexp_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch6.adb?ref=6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "patch": "@@ -5459,7 +5459,7 @@ package body Exp_Ch6 is\n \n             Push_Scope (Scope (Scop));\n             Analyze (Prot_Decl);\n-            Insert_Actions (N, Freeze_Entity (Prot_Id, N));\n+            Freeze_Before (N, Prot_Id);\n             Set_Protected_Body_Subprogram (Subp, Prot_Id);\n \n             --  Create protected operation as well. Even though the operation\n@@ -5699,7 +5699,7 @@ package body Exp_Ch6 is\n                            (Corresponding_Record_Type (Scop), Loc))));\n \n             Insert_Actions (N, Decls);\n-            Insert_Actions (N, Freeze_Entity (Obj_Ptr, N));\n+            Freeze_Before (N, Obj_Ptr);\n \n             Rec :=\n               Make_Explicit_Dereference (Loc,"}, {"sha": "1691fab37f3da9798464f297c4390c69ea34a188", "filename": "gcc/ada/sem_attr.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fsem_attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fsem_attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_attr.adb?ref=6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "patch": "@@ -7921,7 +7921,7 @@ package body Sem_Attr is\n                   --  Avoid insertion of freeze actions in spec expression mode\n \n                   if not In_Spec_Expression then\n-                     Insert_Actions (N, Freeze_Entity (Entity (P), N));\n+                     Freeze_Before (N, Entity (P));\n                   end if;\n \n                elsif Is_Type (Entity (P)) then"}, {"sha": "d99db5204d689218d2fd2d8ed6eae89f826b971e", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "patch": "@@ -4180,7 +4180,7 @@ package body Sem_Ch3 is\n          end if;\n       end if;\n \n-      --  Make sure that generic actual types are properly frozen The subtype\n+      --  Make sure that generic actual types are properly frozen. The subtype\n       --  is marked as a generic actual type when the enclosing instance is\n       --  analyzed, so here we identify the subtype from the tree structure.\n \n@@ -4191,7 +4191,7 @@ package body Sem_Ch3 is\n         and then Nkind (Subtype_Indication (N)) /= N_Subtype_Indication\n         and then Is_Frozen (T)\n       then\n-         Insert_Actions (N, Freeze_Entity (Id, N));\n+         Freeze_Before (N, Id);\n       end if;\n \n       Set_Optimize_Alignment_Flags (Id);"}, {"sha": "a23aac9bb260617876d6bff5a6d0e29fe773d5d6", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=6b958cecaa0a9d8cb7b04ee0b4a2e36efd8d0450", "patch": "@@ -2167,7 +2167,7 @@ package body Sem_Ch6 is\n             --  why, to be investigated further???\n \n             Set_Has_Delayed_Freeze (Spec_Id);\n-            Insert_Actions (N, Freeze_Entity (Spec_Id, N));\n+            Freeze_Before (N, Spec_Id);\n          end if;\n       end if;\n "}]}