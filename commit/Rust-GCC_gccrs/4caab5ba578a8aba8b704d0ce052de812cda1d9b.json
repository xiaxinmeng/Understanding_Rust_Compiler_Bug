{"sha": "4caab5ba578a8aba8b704d0ce052de812cda1d9b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NGNhYWI1YmE1NzhhOGFiYThiNzA0ZDBjZTA1MmRlODEyY2RhMWQ5Yg==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2009-03-12T14:00:21Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2009-03-12T14:00:21Z"}, "message": "re PR target/39181 (complex int arguments cause ICE)\n\n\tPR target/39181\n\t* config/spu/spu.c (spu_expand_mov): Handle invalid subregs\n\tof non-integer mode as well.\n\nFrom-SVN: r144811", "tree": {"sha": "1446ff6b7f0c54a9ead36b744a4de5a8d8a61941", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1446ff6b7f0c54a9ead36b744a4de5a8d8a61941"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4caab5ba578a8aba8b704d0ce052de812cda1d9b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4caab5ba578a8aba8b704d0ce052de812cda1d9b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4caab5ba578a8aba8b704d0ce052de812cda1d9b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4caab5ba578a8aba8b704d0ce052de812cda1d9b/comments", "author": null, "committer": null, "parents": [{"sha": "fec7f2457f1a5171b62dcffb486994f945150d8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fec7f2457f1a5171b62dcffb486994f945150d8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fec7f2457f1a5171b62dcffb486994f945150d8f"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "79aff5dd9e48969d3c989efb4776270875f2a447", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4caab5ba578a8aba8b704d0ce052de812cda1d9b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4caab5ba578a8aba8b704d0ce052de812cda1d9b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=4caab5ba578a8aba8b704d0ce052de812cda1d9b", "patch": "@@ -1,3 +1,9 @@\n+2009-03-11  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\tPR target/39181\n+\t* config/spu/spu.c (spu_expand_mov): Handle invalid subregs\n+\tof non-integer mode as well.\n+\n 2009-03-11  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* gimplify.c (gimplify_call_expr): Don't set CALL_CANNOT_INLINE_P"}, {"sha": "6e0001b0a05a6c0a39215f20728b3f67b2d3e659", "filename": "gcc/config/spu/spu.c", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4caab5ba578a8aba8b704d0ce052de812cda1d9b/gcc%2Fconfig%2Fspu%2Fspu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4caab5ba578a8aba8b704d0ce052de812cda1d9b/gcc%2Fconfig%2Fspu%2Fspu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fspu%2Fspu.c?ref=4caab5ba578a8aba8b704d0ce052de812cda1d9b", "patch": "@@ -4114,17 +4114,16 @@ spu_expand_mov (rtx * ops, enum machine_mode mode)\n   if (GET_CODE (ops[1]) == SUBREG && !valid_subreg (ops[1]))\n     {\n       rtx from = SUBREG_REG (ops[1]);\n-      enum machine_mode imode = GET_MODE (from);\n+      enum machine_mode imode = int_mode_for_mode (GET_MODE (from));\n \n       gcc_assert (GET_MODE_CLASS (mode) == MODE_INT\n \t\t  && GET_MODE_CLASS (imode) == MODE_INT\n \t\t  && subreg_lowpart_p (ops[1]));\n \n       if (GET_MODE_SIZE (imode) < 4)\n-\t{\n-\t  from = gen_rtx_SUBREG (SImode, from, 0);\n-\t  imode = SImode;\n-\t}\n+\timode = SImode;\n+      if (imode != GET_MODE (from))\n+\tfrom = gen_rtx_SUBREG (imode, from, 0);\n \n       if (GET_MODE_SIZE (mode) < GET_MODE_SIZE (imode))\n \t{"}]}