{"sha": "034c1be0fdf231cecab4424e638060370b0cd7a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM0YzFiZTBmZGYyMzFjZWNhYjQ0MjRlNjM4MDYwMzcwYjBjZDdhMQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1995-05-20T21:22:28Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1995-05-20T21:22:28Z"}, "message": "Do not do insv/extz on 1/2 byte structures\n\nFrom-SVN: r9758", "tree": {"sha": "4d1a03dd1663b5b46539f3f7e410aca9bfb9e7b4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4d1a03dd1663b5b46539f3f7e410aca9bfb9e7b4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/034c1be0fdf231cecab4424e638060370b0cd7a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/034c1be0fdf231cecab4424e638060370b0cd7a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/034c1be0fdf231cecab4424e638060370b0cd7a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/034c1be0fdf231cecab4424e638060370b0cd7a1/comments", "author": null, "committer": null, "parents": [{"sha": "d030f4b2d7c66c17ebf516b22d01cce27427670e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d030f4b2d7c66c17ebf516b22d01cce27427670e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d030f4b2d7c66c17ebf516b22d01cce27427670e"}], "stats": {"total": 36, "additions": 34, "deletions": 2}, "files": [{"sha": "7e5f3745a1adfadd64e0e0eaccdfa187cc3272f0", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 34, "deletions": 2, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/034c1be0fdf231cecab4424e638060370b0cd7a1/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/034c1be0fdf231cecab4424e638060370b0cd7a1/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=034c1be0fdf231cecab4424e638060370b0cd7a1", "patch": "@@ -1929,7 +1929,23 @@\n \f\n ;; Rotate and shift insns, in all their variants.  These support shifts,\n ;; field inserts and extracts, and various combinations thereof.\n-(define_insn \"insv\"\n+(define_expand \"insv\"\n+  [(set (zero_extract:SI (match_operand:SI 0 \"gpc_reg_operand\" \"+r\")\n+\t\t\t (match_operand:SI 1 \"const_int_operand\" \"i\")\n+\t\t\t (match_operand:SI 2 \"const_int_operand\" \"i\"))\n+\t(match_operand:SI 3 \"gpc_reg_operand\" \"r\"))]\n+  \"\"\n+  \"\n+{\n+  /* Do not handle 16/8 bit structures that fit in HI/QI modes directly, since\n+     the (SUBREG:SI (REG:HI xxx)) that is otherwise generated can confuse the\n+     compiler if the address of the structure is taken later.  */\n+  if (GET_CODE (operands[0]) == SUBREG\n+      && (GET_MODE_SIZE (GET_MODE (SUBREG_REG (operands[0]))) < UNITS_PER_WORD))\n+    FAIL;\n+}\")\n+\n+(define_insn \"\"\n   [(set (zero_extract:SI (match_operand:SI 0 \"gpc_reg_operand\" \"+r\")\n \t\t\t (match_operand:SI 1 \"const_int_operand\" \"i\")\n \t\t\t (match_operand:SI 2 \"const_int_operand\" \"i\"))\n@@ -2021,7 +2037,23 @@\n   return \\\"{rlimi|rlwimi} %0,%3,%5,%h2,%h1\\\";\n }\")\n \n-(define_insn \"extzv\"\n+(define_expand \"extzv\"\n+  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n+\t(zero_extract:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n+\t\t\t (match_operand:SI 2 \"const_int_operand\" \"i\")\n+\t\t\t (match_operand:SI 3 \"const_int_operand\" \"i\")))]\n+  \"\"\n+  \"\n+{\n+  /* Do not handle 16/8 bit structures that fit in HI/QI modes directly, since\n+     the (SUBREG:SI (REG:HI xxx)) that is otherwise generated can confuse the\n+     compiler if the address of the structure is taken later.  */\n+  if (GET_CODE (operands[0]) == SUBREG\n+      && (GET_MODE_SIZE (GET_MODE (SUBREG_REG (operands[0]))) < UNITS_PER_WORD))\n+    FAIL;\n+}\")\n+\n+(define_insn \"\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n \t(zero_extract:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n \t\t\t (match_operand:SI 2 \"const_int_operand\" \"i\")"}]}