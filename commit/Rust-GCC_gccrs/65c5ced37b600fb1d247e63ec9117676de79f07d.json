{"sha": "65c5ced37b600fb1d247e63ec9117676de79f07d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjVjNWNlZDM3YjYwMGZiMWQyNDdlNjNlYzkxMTc2NzZkZTc5ZjA3ZA==", "commit": {"author": {"name": "David S. Miller", "email": "davem@davemloft.net", "date": "2011-11-09T05:23:02Z"}, "committer": {"name": "David S. Miller", "email": "davem@gcc.gnu.org", "date": "2011-11-09T05:23:02Z"}, "message": "Implement vect_cmdline_needed properly on sparc.\n\n\t* lib/target-supports.exp (check_effective_target_sparc_vis): New.\n\t(check_effective_target_vect_cmdline_needed): Use it when sparc*-*-*\n\nFrom-SVN: r181190", "tree": {"sha": "1ac831c8e83bfdef37f9ab6ab8acf69c53035efa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1ac831c8e83bfdef37f9ab6ab8acf69c53035efa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/65c5ced37b600fb1d247e63ec9117676de79f07d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65c5ced37b600fb1d247e63ec9117676de79f07d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65c5ced37b600fb1d247e63ec9117676de79f07d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65c5ced37b600fb1d247e63ec9117676de79f07d/comments", "author": {"login": "davem330", "id": 1053866, "node_id": "MDQ6VXNlcjEwNTM4NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/1053866?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davem330", "html_url": "https://github.com/davem330", "followers_url": "https://api.github.com/users/davem330/followers", "following_url": "https://api.github.com/users/davem330/following{/other_user}", "gists_url": "https://api.github.com/users/davem330/gists{/gist_id}", "starred_url": "https://api.github.com/users/davem330/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davem330/subscriptions", "organizations_url": "https://api.github.com/users/davem330/orgs", "repos_url": "https://api.github.com/users/davem330/repos", "events_url": "https://api.github.com/users/davem330/events{/privacy}", "received_events_url": "https://api.github.com/users/davem330/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "425006751bbedc2928d0bddac0de2e5953075ac9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/425006751bbedc2928d0bddac0de2e5953075ac9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/425006751bbedc2928d0bddac0de2e5953075ac9"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "0b7167b0dd49de1ea1daf09ff9150d0395d1ded9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65c5ced37b600fb1d247e63ec9117676de79f07d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65c5ced37b600fb1d247e63ec9117676de79f07d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=65c5ced37b600fb1d247e63ec9117676de79f07d", "patch": "@@ -1,3 +1,8 @@\n+2011-11-08  David S. Miller  <davem@davemloft.net>\n+\n+\t* lib/target-supports.exp (check_effective_target_sparc_vis): New.\n+\t(check_effective_target_vect_cmdline_needed): Use it when sparc*-*-*\n+\n 2011-11-08  Francois-Xavier Coudert  <fxcoudert@gcc.gnu.org>\n \n \tPR fortran/50404"}, {"sha": "6e3023339ad69aa2a1ee7edabe7def71fd501c00", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65c5ced37b600fb1d247e63ec9117676de79f07d/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65c5ced37b600fb1d247e63ec9117676de79f07d/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=65c5ced37b600fb1d247e63ec9117676de79f07d", "patch": "@@ -1775,6 +1775,7 @@ proc check_effective_target_vect_cmdline_needed { } {\n \t     || ([istarget powerpc*-*-*]\n \t\t && ([check_effective_target_powerpc_spe]\n \t\t     || [check_effective_target_powerpc_altivec]))\n+\t     || ([istarget sparc*-*-*] && [check_effective_target_sparc_vis])\n              || [istarget spu-*-*]\n \t     || ([istarget arm*-*-*] && [check_effective_target_arm_neon]) } {\n \t   set et_vect_cmdline_needed_saved 0\n@@ -2489,6 +2490,22 @@ proc check_effective_target_ultrasparc_vis3_hw { } {\n     } \"-mcpu=niagara3\"]\n }\n \n+# Return 1 if this is a Sparc target with VIS enabled.\n+\n+proc check_effective_target_sparc_vis { } {\n+    if { [istarget sparc*-*-*] } {\n+\treturn [check_no_compiler_messages sparc_vis object {\n+\t    #ifndef __VIS__\n+\t    #error not VIS\n+\t    #else\n+\t    int dummy;\n+\t    #endif\n+\t}]\n+    } else {\n+\treturn 0\n+    }\n+}\n+\n # Return 1 if the target supports hardware vector shift operation.\n \n proc check_effective_target_vect_shift { } {"}]}