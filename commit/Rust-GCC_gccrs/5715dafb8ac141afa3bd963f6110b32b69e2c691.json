{"sha": "5715dafb8ac141afa3bd963f6110b32b69e2c691", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTcxNWRhZmI4YWMxNDFhZmEzYmQ5NjNmNjExMGIzMmI2OWUyYzY5MQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2010-11-26T04:27:04Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2010-11-26T04:27:04Z"}, "message": "toplev.c (finalize): Add no_backend parameter.\n\n* toplev.c (finalize): Add no_backend parameter.  Don't finish\npasses when preprocessing only.  Adjust...\n(do_compile): ... caller.\n\nFrom-SVN: r167161", "tree": {"sha": "f59cceb5b4e7e250db4a0a681c093ab8254683ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f59cceb5b4e7e250db4a0a681c093ab8254683ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5715dafb8ac141afa3bd963f6110b32b69e2c691", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5715dafb8ac141afa3bd963f6110b32b69e2c691", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5715dafb8ac141afa3bd963f6110b32b69e2c691", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5715dafb8ac141afa3bd963f6110b32b69e2c691/comments", "author": null, "committer": null, "parents": [{"sha": "9aff220f248c386bc645db3a40bdeee88baea5ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9aff220f248c386bc645db3a40bdeee88baea5ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9aff220f248c386bc645db3a40bdeee88baea5ff"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "222af4d77157bf08cb8aec10390bfbb27b4fb8a2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5715dafb8ac141afa3bd963f6110b32b69e2c691/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5715dafb8ac141afa3bd963f6110b32b69e2c691/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5715dafb8ac141afa3bd963f6110b32b69e2c691", "patch": "@@ -1,3 +1,9 @@\n+2010-11-26  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* toplev.c (finalize): Add no_backend parameter.  Don't finish\n+\tpasses when preprocessing only.  Adjust...\n+\t(do_compile): ... caller.\n+\n 2010-11-25  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \t* config/pa/pa.md (negdf2): Condition on !flag_signed_zeros instead of"}, {"sha": "1bfdbe22986f2b4efe1823e5f4688c80231fd152", "filename": "gcc/toplev.c", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5715dafb8ac141afa3bd963f6110b32b69e2c691/gcc%2Ftoplev.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5715dafb8ac141afa3bd963f6110b32b69e2c691/gcc%2Ftoplev.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftoplev.c?ref=5715dafb8ac141afa3bd963f6110b32b69e2c691", "patch": "@@ -107,7 +107,7 @@ static void process_options (void);\n static void backend_init (void);\n static int lang_dependent_init (const char *);\n static void init_asm_output (const char *);\n-static void finalize (void);\n+static void finalize (bool);\n \n static void crash_signal (int) ATTRIBUTE_NORETURN;\n static void compile_file (void);\n@@ -2139,7 +2139,7 @@ dump_memory_report (bool final)\n /* Clean up: close opened files, etc.  */\n \n static void\n-finalize (void)\n+finalize (bool no_backend)\n {\n   /* Close the dump files.  */\n   if (flag_gen_aux_info)\n@@ -2166,10 +2166,14 @@ finalize (void)\n   if (stack_usage_file)\n     fclose (stack_usage_file);\n \n-  statistics_fini ();\n-  finish_optimization_passes ();\n+  if (!no_backend)\n+    {\n+      statistics_fini ();\n+\n+      finish_optimization_passes ();\n \n-  ira_finish_once ();\n+      ira_finish_once ();\n+    }\n \n   if (mem_report)\n     dump_memory_report (true);\n@@ -2206,7 +2210,7 @@ do_compile (void)\n       if (lang_dependent_init (main_input_filename))\n \tcompile_file ();\n \n-      finalize ();\n+      finalize (no_backend);\n     }\n \n   /* Stop timing and print the times.  */"}]}