{"sha": "f6a7cfd28d7b04e17f42d20bd420031838b53a7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZhN2NmZDI4ZDdiMDRlMTdmNDJkMjBiZDQyMDAzMTgzOGI1M2E3YQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-05-30T21:50:51Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-05-30T21:50:51Z"}, "message": "lex.c (make_lang_type): Create TYPE_BINFO for TEMPLATE_TYPE_PARMs just like for non-template types.\n\n\t* lex.c (make_lang_type): Create TYPE_BINFO for\n\tTEMPLATE_TYPE_PARMs just like for non-template types.\n\nFrom-SVN: r27259", "tree": {"sha": "1e1b40ca0a51389466120f45c1e95e5416d19f48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1e1b40ca0a51389466120f45c1e95e5416d19f48"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6a7cfd28d7b04e17f42d20bd420031838b53a7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6a7cfd28d7b04e17f42d20bd420031838b53a7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6a7cfd28d7b04e17f42d20bd420031838b53a7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6a7cfd28d7b04e17f42d20bd420031838b53a7a/comments", "author": null, "committer": null, "parents": [{"sha": "fcd3f0bc88435980d669c4dc4e21c683354b58f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fcd3f0bc88435980d669c4dc4e21c683354b58f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fcd3f0bc88435980d669c4dc4e21c683354b58f0"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "fd820e23d9ce190d1938b10af4303c68dabb4417", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6a7cfd28d7b04e17f42d20bd420031838b53a7a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6a7cfd28d7b04e17f42d20bd420031838b53a7a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f6a7cfd28d7b04e17f42d20bd420031838b53a7a", "patch": "@@ -1,5 +1,8 @@\n 1999-05-30  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* lex.c (make_lang_type): Create TYPE_BINFO for\n+\tTEMPLATE_TYPE_PARMs just like for non-template types.\n+\n \t* decl.c (start_decl): Move checks on initialization to ...\n \t(cp_finish_decl): Here.  Tidy formatting slightly.\n "}, {"sha": "80f855ede3bc17d4e798b12be724a2255c8511ee", "filename": "gcc/cp/lex.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6a7cfd28d7b04e17f42d20bd420031838b53a7a/gcc%2Fcp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6a7cfd28d7b04e17f42d20bd420031838b53a7a/gcc%2Fcp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Flex.c?ref=f6a7cfd28d7b04e17f42d20bd420031838b53a7a", "patch": "@@ -4680,7 +4680,6 @@ make_lang_type (code)\n       TYPE_LANG_SPECIFIC (t) = pi;\n       SET_CLASSTYPE_INTERFACE_UNKNOWN_X (t, interface_unknown);\n       CLASSTYPE_INTERFACE_ONLY (t) = interface_only;\n-      TYPE_BINFO (t) = make_binfo (integer_zero_node, t, NULL_TREE, NULL_TREE);\n \n       /* Make sure this is laid out, for ease of use later.  In the\n \t presence of parse errors, the normal was of assuring this\n@@ -4698,6 +4697,13 @@ make_lang_type (code)\n        clear it here.  */\n     TYPE_ALIAS_SET (t) = 0;\n \n+  /* We need to allocate a TYPE_BINFO even for TEMPALTE_TYPE_PARMs\n+     since they can be virtual base types, and we then need a\n+     canonical binfo for them.  Ideally, this would be done lazily for\n+     all types.  */\n+  if (IS_AGGR_TYPE_CODE (code) || code == TEMPLATE_TYPE_PARM)\n+    TYPE_BINFO (t) = make_binfo (integer_zero_node, t, NULL_TREE, NULL_TREE);\n+\n   return t;\n }\n "}]}