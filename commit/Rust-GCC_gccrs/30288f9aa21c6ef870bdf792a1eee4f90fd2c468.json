{"sha": "30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzAyODhmOWFhMjFjNmVmODcwYmRmNzkyYTFlZWU0ZjkwZmQyYzQ2OA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2011-09-07T17:11:37Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2011-09-07T17:11:37Z"}, "message": "pt.c (type_unification_real): Correct complain arg for tsubsting default template args.\n\n\t* pt.c (type_unification_real): Correct complain arg for tsubsting\n\tdefault template args.\n\nFrom-SVN: r178651", "tree": {"sha": "22d6ae8519d8931bc1071d38e7e5836299a2105f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/22d6ae8519d8931bc1071d38e7e5836299a2105f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "html_url": "https://github.com/Rust-GCC/gccrs/commit/30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "10e8dd82753c1b5a864bc5a28c77ddd037528578", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10e8dd82753c1b5a864bc5a28c77ddd037528578", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10e8dd82753c1b5a864bc5a28c77ddd037528578"}], "stats": {"total": 32, "additions": 23, "deletions": 9}, "files": [{"sha": "ea67d2d5d5a0f31541c7984c06c81a68326e8095", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -1,5 +1,8 @@\n 2011-09-07  Jason Merrill  <jason@redhat.com>\n \n+\t* pt.c (type_unification_real): Correct complain arg for tsubsting\n+\tdefault template args.\n+\n \t* pt.c (tsubst_aggr_type): Check TYPE_P before tsubsting.\n \n 2011-09-06  Jason Merrill  <jason@redhat.com>"}, {"sha": "d326c842c701a091faf8c8e06350970c5d48f6b7", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -14804,6 +14804,10 @@ type_unification_real (tree tparms,\n \n   if (!subr)\n     {\n+      tsubst_flags_t complain = (explain_p\n+\t\t\t\t ? tf_warning_or_error\n+\t\t\t\t : tf_none);\n+\n       /* Check to see if we need another pass before we start clearing\n \t ARGUMENT_PACK_INCOMPLETE_P.  */\n       for (i = 0; i < ntparms; i++)\n@@ -14854,11 +14858,8 @@ type_unification_real (tree tparms,\n \t    {\n \t      tree parm = TREE_VALUE (TREE_VEC_ELT (tparms, i));\n \t      tree arg = TREE_PURPOSE (TREE_VEC_ELT (tparms, i));\n-\t      arg = tsubst_template_arg (arg, targs, tf_none, NULL_TREE);\n-\t      arg = convert_template_argument (parm, arg, targs,\n-\t\t\t\t\t       (explain_p\n-\t\t\t\t\t\t? tf_warning_or_error\n-\t\t\t\t\t\t: tf_none),\n+\t      arg = tsubst_template_arg (arg, targs, complain, NULL_TREE);\n+\t      arg = convert_template_argument (parm, arg, targs, complain,\n \t\t\t\t\t       i, NULL_TREE);\n \t      if (arg == error_mark_node)\n \t\treturn 1;"}, {"sha": "5247ac6b98499b4d738d39f9dca63540f3e0c806", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -1,3 +1,7 @@\n+2011-09-07  Jason Merrill  <jason@redhat.com>\n+\n+\t* g++.dg/cpp0x/sfinae11.C: Check for explanatory diagnostic.\n+\n 2011-09-07  Georg-Johann Lay  <avr@gjlay.de>\n \t\n \t* gcc.dg/section1.c: Don't xfail for avr."}, {"sha": "25902cbd65e813ebf06a1ef94a613d7749f17766", "filename": "gcc/testsuite/g++.dg/cpp0x/sfinae11.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae11.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae11.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fsfinae11.C?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -52,5 +52,6 @@ int main()\n \n   noexcept( f1(z) );\t\t// { dg-message \"required\" }\n   static_assert(  noexcept( f2(z) ), \"shall be ill-formed.\" ); // { dg-error \"no match|could not convert\" }\n+  // { dg-error \"no member\" \"\" { target *-*-* } 54 }\n   noexcept( f3(z) );\t\t// { dg-message \"required\" }\n }"}, {"sha": "b3d4dbb00b5b372fb1de28167a80f233e9b8fa78", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -1,3 +1,8 @@\n+2011-09-07  Jason Merrill  <jason@redhat.com>\n+\n+\t* testsuite/20_util/bind/ref_neg.cc: Adjust errors.\n+\t* testsuite/20_util/duration/cons/1_neg.cc: Adjust errors.\n+\n 2011-09-06  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/std/tuple (_Tuple_impl::_M_head, _M_tail): Mark constexpr."}, {"sha": "f5a08c2630a9d388947f3700da5af041e413fb42", "filename": "libstdc++-v3/testsuite/20_util/bind/ref_neg.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbind%2Fref_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbind%2Fref_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fbind%2Fref_neg.cc?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -29,8 +29,8 @@ int inc(int& i) { return ++i; }\n void test01()\n {\n   const int dummy = 0;\n-  std::bind(&inc, _1)(0);               // { dg-error  \"no match\" }\n-  std::bind(&inc, std::ref(dummy))();\t// { dg-error  \"no match\" }\n+  std::bind(&inc, _1)(0);               // { dg-error  \"no match|rvalue\" }\n+  std::bind(&inc, std::ref(dummy))();\t// { dg-error  \"no match|const\" }\n }\n \n struct Inc"}, {"sha": "97f4ef14002ab3fcf7e2fa18f25fde9b1d4a7858", "filename": "libstdc++-v3/testsuite/20_util/duration/cons/1_neg.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2F1_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/30288f9aa21c6ef870bdf792a1eee4f90fd2c468/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2F1_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F20_util%2Fduration%2Fcons%2F1_neg.cc?ref=30288f9aa21c6ef870bdf792a1eee4f90fd2c468", "patch": "@@ -26,7 +26,7 @@\n void\n test01()\n {\n-  std::chrono::duration<int> d1(1.0); // { dg-error \"no matching\" }\n+  std::chrono::duration<int> d1(1.0); // { dg-error \"no matching|no type\" }\n }\n \n void\n@@ -35,6 +35,6 @@ test02()\n   using namespace std::chrono;\n   \n   duration<int, std::micro> d2(8);\n-  duration<int, std::milli> d2_copy(d2); // { dg-error \"no matching\" }\n+  duration<int, std::milli> d2_copy(d2); // { dg-error \"no matching|no type\" }\n }\n "}]}