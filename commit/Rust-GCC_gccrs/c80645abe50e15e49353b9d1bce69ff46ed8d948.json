{"sha": "c80645abe50e15e49353b9d1bce69ff46ed8d948", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzgwNjQ1YWJlNTBlMTVlNDkzNTNiOWQxYmNlNjlmZjQ2ZWQ4ZDk0OA==", "commit": {"author": {"name": "Thomas Quinot", "email": "quinot@adacore.com", "date": "2008-08-05T14:37:01Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-05T14:37:01Z"}, "message": "gsocket.h: Make this file includable in a Nucleus environment, which does not support sockets.\n\n2008-08-05  Thomas Quinot  <quinot@adacore.com>\n\n\t* gsocket.h: Make this file includable in a Nucleus environment, which\n\tdoes not support sockets.\n\n\t* socket.c: Remove Nucleus-specific hack.\n\nFrom-SVN: r138720", "tree": {"sha": "b2e200e02cc243fe04a3644e74e6c1787c48babb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2e200e02cc243fe04a3644e74e6c1787c48babb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c80645abe50e15e49353b9d1bce69ff46ed8d948", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c80645abe50e15e49353b9d1bce69ff46ed8d948", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c80645abe50e15e49353b9d1bce69ff46ed8d948", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c80645abe50e15e49353b9d1bce69ff46ed8d948/comments", "author": null, "committer": null, "parents": [{"sha": "1a6587c86fc4b571ea5d825400d48b6aa85230cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a6587c86fc4b571ea5d825400d48b6aa85230cb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a6587c86fc4b571ea5d825400d48b6aa85230cb"}], "stats": {"total": 24, "additions": 19, "deletions": 5}, "files": [{"sha": "b98da05f9a78bb994ec20f0a6c7f0364fbae5efd", "filename": "gcc/ada/gsocket.h", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c80645abe50e15e49353b9d1bce69ff46ed8d948/gcc%2Fada%2Fgsocket.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c80645abe50e15e49353b9d1bce69ff46ed8d948/gcc%2Fada%2Fgsocket.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgsocket.h?ref=c80645abe50e15e49353b9d1bce69ff46ed8d948", "patch": "@@ -30,6 +30,15 @@\n  *                                                                          *\n  ****************************************************************************/\n \n+#if defined(__nucleus__)\n+\n+#warning Sockets not supported on this platform\n+#undef HAVE_SOCKETS\n+\n+#else\n+\n+#define HAVE_SOCKETS\n+\n #ifndef _XOPEN_SOURCE_EXTENDED\n #define _XOPEN_SOURCE_EXTENDED 1\n /* For HP-UX */\n@@ -190,3 +199,5 @@\n #else\n # define Has_Sockaddr_Len 0\n #endif\n+\n+#endif /* defined(__nucleus__) */"}, {"sha": "9653aae1dfad287e2f98e8467c982e6aa8727630", "filename": "gcc/ada/socket.c", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c80645abe50e15e49353b9d1bce69ff46ed8d948/gcc%2Fada%2Fsocket.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c80645abe50e15e49353b9d1bce69ff46ed8d948/gcc%2Fada%2Fsocket.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsocket.c?ref=c80645abe50e15e49353b9d1bce69ff46ed8d948", "patch": "@@ -31,11 +31,11 @@\n  ****************************************************************************/\n \n /*  This file provides a portable binding to the sockets API                */\n-#if defined (__nucleus__)\n-/* ??? Need proper implementation */\n-#warning Sockets not yet supported on Nucleus\n-#else\n+\n #include \"gsocket.h\"\n+\n+#if defined(HAVE_SOCKETS)\n+\n /* Include all the necessary system-specific headers and define the\n  * necessary macros (shared with gen-oscons).\n  */\n@@ -417,4 +417,7 @@ __gnat_get_h_errno (void) {\n   return h_errno;\n #endif\n }\n-#endif /* __nucleus__ */\n+\n+#else\n+#warning Sockets are not supported on this platform\n+#endif /* defined(HAVE_SOCKETS) */"}]}