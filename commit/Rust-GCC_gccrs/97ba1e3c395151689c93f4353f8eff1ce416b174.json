{"sha": "97ba1e3c395151689c93f4353f8eff1ce416b174", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTdiYTFlM2MzOTUxNTE2ODljOTNmNDM1M2Y4ZWZmMWNlNDE2YjE3NA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-10-19T17:57:49Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-10-19T17:57:49Z"}, "message": "cp-tree.h (DECL_ANTICIPATED): Don't require a FUNCTION_DECL.\n\n\t* cp-tree.h (DECL_ANTICIPATED): Don't require a FUNCTION_DECL.\n\t* decl.c (select_decl): Don't return declarations that are\n\tDECL_ANTICIPATED.\n\nFrom-SVN: r36953", "tree": {"sha": "929f1bcc60169cb9378db8caf2492f5c8e6dcf2c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/929f1bcc60169cb9378db8caf2492f5c8e6dcf2c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97ba1e3c395151689c93f4353f8eff1ce416b174", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ba1e3c395151689c93f4353f8eff1ce416b174", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97ba1e3c395151689c93f4353f8eff1ce416b174", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ba1e3c395151689c93f4353f8eff1ce416b174/comments", "author": null, "committer": null, "parents": [{"sha": "3cf3728197c7419f0b710a2cd7e8756fa7a15a22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3cf3728197c7419f0b710a2cd7e8756fa7a15a22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3cf3728197c7419f0b710a2cd7e8756fa7a15a22"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "8c39273c6c8097ae9f3771439824bfe430cd659f", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=97ba1e3c395151689c93f4353f8eff1ce416b174", "patch": "@@ -1,3 +1,9 @@\n+2000-10-19  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* cp-tree.h (DECL_ANTICIPATED): Don't require a FUNCTION_DECL.\n+\t* decl.c (select_decl): Don't return declarations that are\n+\tDECL_ANTICIPATED.\n+\n 2000-10-18  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cp-tree.h (cp_tree_index): Add CPTI_FAKE_STD."}, {"sha": "54dbaa34da5ecb894069fa9b28e4cad834d00102", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=97ba1e3c395151689c93f4353f8eff1ce416b174", "patch": "@@ -2481,7 +2481,7 @@ extern int flag_new_for_scope;\n /* Nonzero if NODE is a FUNCTION_DECL for a built-in function, and we have\n    not yet seen a prototype for that function.  */\n #define DECL_ANTICIPATED(NODE) \\\n-  (DECL_LANG_SPECIFIC (FUNCTION_DECL_CHECK (NODE))->decl_flags.anticipated_p)\n+  (DECL_LANG_SPECIFIC (DECL_CHECK (NODE))->decl_flags.anticipated_p)\n \n /* Record whether a typedef for type `int' was actually `signed int'.  */\n #define C_TYPEDEF_EXPLICITLY_SIGNED(exp) DECL_LANG_FLAG_1 ((exp))"}, {"sha": "0dc17c13de24a7494458d453ef5c29fb3f75ab99", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=97ba1e3c395151689c93f4353f8eff1ce416b174", "patch": "@@ -5693,6 +5693,15 @@ select_decl (binding, flags)\n {\n   tree val;\n   val = BINDING_VALUE (binding);\n+\n+  /* When we implicitly declare some builtin entity, we mark it\n+     DECL_ANTICIPATED, so that we know to ignore it until it is\n+     really declared.  */\n+  if (val && DECL_P (val) \n+      && DECL_LANG_SPECIFIC (val) \n+      && DECL_ANTICIPATED (val))\n+    return NULL_TREE;\n+\n   if (LOOKUP_NAMESPACES_ONLY (flags))\n     {\n       /* We are not interested in types. */"}, {"sha": "21a232a0879bf65b2afb2d0d09e41615f31e5df3", "filename": "gcc/testsuite/g++.old-deja/g++.other/std1.C", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fstd1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ba1e3c395151689c93f4353f8eff1ce416b174/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fstd1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fstd1.C?ref=97ba1e3c395151689c93f4353f8eff1ce416b174", "patch": "@@ -0,0 +1,13 @@\n+// Build don't link:\n+// Special g++ Options: -fhonor-std\n+// Origin: Mark Mitchell <mark@codesourcery.com>\n+\n+extern \"C\" int memcmp (const void * __s1,\n+\t\t       const void * __s2,\n+\t\t       __SIZE_TYPE__ __n) throw ();\n+\n+namespace std {\n+void f () {\n+  memcmp (0, 0, 0);\n+}\n+};"}]}