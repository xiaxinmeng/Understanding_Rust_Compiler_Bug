{"sha": "fe84628425a9b784688e5e7fbbd081acd6261e90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmU4NDYyODQyNWE5Yjc4NDY4OGU1ZTdmYmJkMDgxYWNkNjI2MWU5MA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2011-04-06T11:49:59Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2011-04-06T11:49:59Z"}, "message": "re PR debug/48466 (Wrong variable locations at -O0 on i686)\n\n\tPR debug/48466\n\t* dwarf2out.c (based_loc_descr): If drap_reg is INVALID_REGNUM, use\n\tas base_reg whatever register reg has been eliminated to, instead\n\tof hardcoding STACK_POINTER_REGNUM.\n\n\t* gcc.dg/guality/pr36977.c: New test.\n\t* gcc.dg/guality/pr48466.c: New test.\n\nFrom-SVN: r172039", "tree": {"sha": "48e1b21d04a80c8e8bbbed2129f5f2722bd854bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48e1b21d04a80c8e8bbbed2129f5f2722bd854bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe84628425a9b784688e5e7fbbd081acd6261e90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe84628425a9b784688e5e7fbbd081acd6261e90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe84628425a9b784688e5e7fbbd081acd6261e90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe84628425a9b784688e5e7fbbd081acd6261e90/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "acce4e77382b198a70f1044724bda19b01997657", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/acce4e77382b198a70f1044724bda19b01997657", "html_url": "https://github.com/Rust-GCC/gccrs/commit/acce4e77382b198a70f1044724bda19b01997657"}], "stats": {"total": 88, "additions": 87, "deletions": 1}, "files": [{"sha": "e593f56ff8a81528d8aa2d615062b3e467cb8dd4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fe84628425a9b784688e5e7fbbd081acd6261e90", "patch": "@@ -1,3 +1,10 @@\n+2011-04-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/48466\n+\t* dwarf2out.c (based_loc_descr): If drap_reg is INVALID_REGNUM, use\n+\tas base_reg whatever register reg has been eliminated to, instead\n+\tof hardcoding STACK_POINTER_REGNUM.\n+\n 2011-04-06  Joseph Myers  <joseph@codesourcery.com>\n \n \t* doc/tm.texi.in: Document C target hooks as separate from general"}, {"sha": "753424ac5794766d6b7c31af88be5e3f0437ae6e", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=fe84628425a9b784688e5e7fbbd081acd6261e90", "patch": "@@ -13395,7 +13395,7 @@ based_loc_descr (rtx reg, HOST_WIDE_INT offset,\n \t      int base_reg\n \t\t= DWARF_FRAME_REGNUM ((fde && fde->drap_reg != INVALID_REGNUM)\n \t\t\t\t      ? HARD_FRAME_POINTER_REGNUM\n-\t\t\t\t      : STACK_POINTER_REGNUM);\n+\t\t\t\t      : REGNO (elim));\n \t      return new_reg_loc_descr (base_reg, offset);\n \t    }\n "}, {"sha": "caacb0cef2616a76acc7df092df9ef737da12764", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fe84628425a9b784688e5e7fbbd081acd6261e90", "patch": "@@ -1,3 +1,9 @@\n+2011-04-06  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/48466\n+\t* gcc.dg/guality/pr36977.c: New test.\n+\t* gcc.dg/guality/pr48466.c: New test.\n+\n 2011-04-06  Ramana Radhakrishnan  <ramana.radhakrishnan@linaro.org>\n \n \t* gcc.target/arm/pr43920-1.c: Fix accidental duplication."}, {"sha": "3689fae8c43b35bdd5d6f840bb0128520fd3e35c", "filename": "gcc/testsuite/gcc.dg/guality/pr36977.c", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Ftestsuite%2Fgcc.dg%2Fguality%2Fpr36977.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Ftestsuite%2Fgcc.dg%2Fguality%2Fpr36977.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fguality%2Fpr36977.c?ref=fe84628425a9b784688e5e7fbbd081acd6261e90", "patch": "@@ -0,0 +1,32 @@\n+/* PR debug/36977 */\n+/* { dg-do run } */\n+/* { dg-options \"-g\" } */\n+/* { dg-skip-if \"\" { *-*-* }  { \"*\" } { \"-O0\" } } */\n+\n+void\n+foo ()\n+{\n+}\n+\n+int\n+main ()\n+{\n+  struct { char c[100]; } cbig;\n+  struct { int i[800]; } ibig;\n+  struct { long l[900]; } lbig;\n+  struct { float f[200]; } fbig;\n+  struct { double d[300]; } dbig;\n+  struct { short s[400]; } sbig;\n+\n+  ibig.i[0] = 55;\t\t/* { dg-final { gdb-test 30 \"ibig.i\\[0\\]\" \"55\" } } */\n+  ibig.i[100] = 5;\t\t/* { dg-final { gdb-test 30 \"ibig.i\\[100\\]\" \"5\" } } */\n+  cbig.c[0] = '\\0';\t\t/* { dg-final { gdb-test 30 \"cbig.c\\[0\\]\" \"'\\\\0'\" } } */\n+  cbig.c[99] = 'A';\t\t/* { dg-final { gdb-test 30 \"cbig.c\\[99\\]\" \"'A'\" } } */\n+  fbig.f[100] = 11.0;\t\t/* { dg-final { gdb-test 30 \"fbig.f\\[100\\]\" \"11\" } } */\n+  dbig.d[202] = 9.0;\t\t/* { dg-final { gdb-test 30 \"dbig.d\\[202\\]\" \"9\" } } */\n+  sbig.s[90] = 255;\t\t/* { dg-final { gdb-test 30 \"sbig.s\\[90\\]\" \"255\" } } */\n+  lbig.l[333] = 999;\t\t/* { dg-final { gdb-test 30 \"lbig.l\\[333\\]\" \"999\" } } */\n+\n+  foo ();\n+  return 0;\n+}"}, {"sha": "8d5426a99894c7363e8dbe4ac0d96c7e600a7e33", "filename": "gcc/testsuite/gcc.dg/guality/pr48466.c", "status": "added", "additions": 41, "deletions": 0, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Ftestsuite%2Fgcc.dg%2Fguality%2Fpr48466.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe84628425a9b784688e5e7fbbd081acd6261e90/gcc%2Ftestsuite%2Fgcc.dg%2Fguality%2Fpr48466.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fguality%2Fpr48466.c?ref=fe84628425a9b784688e5e7fbbd081acd6261e90", "patch": "@@ -0,0 +1,41 @@\n+/* PR debug/48466 */\n+/* { dg-do run } */\n+/* { dg-options \"-g\" } */\n+/* { dg-skip-if \"\" { *-*-* }  { \"*\" } { \"-O0\" } } */\n+\n+struct S { unsigned int a; unsigned int *b; };\n+struct T { struct S a; struct S b; };\n+struct U { const char *u; };\n+int n[10];\n+volatile int v;\n+\n+struct U\n+foo (const char *s)\n+{\n+  struct U r;\n+  r.u = s;\n+  return r;\n+}\n+\n+void\n+bar (struct T *s, int a, int b)\n+{\n+  s->a.a = a;\n+  s->a.b = &s->a.a;\n+  s->b.a = b;\n+  s->b.b = &s->b.a;\n+}\n+\n+int\n+main ()\n+{\n+  struct T t;\n+  struct U x = foo (\"this is x\");\n+  struct S y, z;\n+  y.b = n;\t\t/* { dg-final { gdb-test 38 \"t.a.a\" \"17\" } } */\n+  y.a = 0;\t\t/* { dg-final { gdb-test 38 \"*t.a.b\" \"17\" } } */\n+  bar (&t, 17, 21);\t/* { dg-final { gdb-test 38 \"t.b.a\" \"21\" } } */\n+  v++;\t\t\t/* { dg-final { gdb-test 38 \"*t.b.b\" \"21\" } } */\n+  z = y;\n+  return 0;\n+}"}]}