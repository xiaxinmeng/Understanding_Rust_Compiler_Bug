{"sha": "9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWUwNTRmMWIyNGZiNjMxZWU5YzRiMjQ0MWFkOTgxZWNlZGIwMTFiZg==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-09-30T21:16:34Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-09-30T21:16:34Z"}, "message": "Add testcase for PR43423.\n\n2010-07-29  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* gcc.dg/graphite/graphite.exp: Add compile rules for vect-* files.\n\t* gfortran.dg/graphite/graphite.exp: Same.\n\t* gcc.dg/graphite/vect-pr43423.c: New.\n\nFrom-SVN: r164773", "tree": {"sha": "d7aa01180bd3cf60c95eae3918d1089352e91d07", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7aa01180bd3cf60c95eae3918d1089352e91d07"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "c606063947f1651fea14bdd558c216737e1f85b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c606063947f1651fea14bdd558c216737e1f85b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c606063947f1651fea14bdd558c216737e1f85b5"}], "stats": {"total": 40, "additions": 38, "deletions": 2}, "files": [{"sha": "7083e7bbaddf2e81d3078bfa728bc63ea2a60011", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "patch": "@@ -1,3 +1,9 @@\n+2010-07-29  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* gcc.dg/graphite/graphite.exp: Add compile rules for vect-* files.\n+\t* gfortran.dg/graphite/graphite.exp: Same.\n+\t* gcc.dg/graphite/vect-pr43423.c: New.\n+\n 2010-07-29  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-clast-to-gimple.c (gcc_type_for_interval): Generate in"}, {"sha": "f5b2a74a09d9bfee3360c40d1319f5cce8931dcf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "patch": "@@ -1,3 +1,9 @@\n+2010-09-30  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* gcc.dg/graphite/graphite.exp: Add compile rules for vect-* files.\n+\t* gfortran.dg/graphite/graphite.exp: Same.\n+\t* gcc.dg/graphite/vect-pr43423.c: New.\n+\n 2010-09-30  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/45843"}, {"sha": "e6cdf12ed95d00636b0eb69f75802d70381e3f84", "filename": "gcc/testsuite/gcc.dg/graphite/graphite.exp", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fgraphite.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fgraphite.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fgraphite.exp?ref=9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "patch": "@@ -43,11 +43,13 @@ set id_files          [lsort [glob -nocomplain $srcdir/$subdir/id-*.c ] ]\n set run_id_files      [lsort [glob -nocomplain $srcdir/$subdir/run-id-*.c ] ]\n set interchange_files [lsort [glob -nocomplain $srcdir/$subdir/interchange-*.c ] ]\n set block_files       [lsort [glob -nocomplain $srcdir/$subdir/block-*.c ] ]\n+set vect_files        [lsort [glob -nocomplain $srcdir/$subdir/vect-*.c ] ]\n \n # Tests to be compiled.\n set dg-do-what-default compile\n dg-runtest $scop_files        \"\" \"-O2 -fgraphite -fdump-tree-graphite-all\"\n dg-runtest $id_files          \"\" \"-O2 -fgraphite-identity -ffast-math\"\n+dg-runtest $vect_files        \"\" \"-O2 -fgraphite-identity -ftree-vectorize -fno-vect-cost-model -fdump-tree-vect-details\"\n \n # Tests to be run.\n set dg-do-what-default run\n@@ -62,6 +64,7 @@ foreach f $id_files          {lremove wait_to_run_files $f}\n foreach f $run_id_files      {lremove wait_to_run_files $f}\n foreach f $interchange_files {lremove wait_to_run_files $f}\n foreach f $block_files       {lremove wait_to_run_files $f}\n+foreach f $vect_files        {lremove wait_to_run_files $f}\n dg-runtest $wait_to_run_files \"\" \"-ansi -pedantic-errors\"\n \n # Clean up."}, {"sha": "5589167fbd3802588455f1866aa266386d4352b8", "filename": "gcc/testsuite/gcc.dg/graphite/vect-pr43423.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fvect-pr43423.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fvect-pr43423.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fvect-pr43423.c?ref=9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-require-effective-target vect_int } */\n+\n+int a[100], b[100], c[100];\n+\n+void foo(int n, int mid)\n+{\n+  int i;\n+  for(i=0; i<n; i++)\n+    {\n+      if (i < mid)\n+        a[i] = a[i] + b[i];\n+      else\n+        a[i] = a[i] + c[i];\n+    }\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 2 loops\" 1 \"vect\" } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "4ca881ded79acac5b4c270ecbf7dd4055f8553c5", "filename": "gcc/testsuite/gfortran.dg/graphite/graphite.exp", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fgraphite.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e054f1b24fb631ee9c4b2441ad981ecedb011bf/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fgraphite.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fgraphite%2Fgraphite.exp?ref=9e054f1b24fb631ee9c4b2441ad981ecedb011bf", "patch": "@@ -41,15 +41,17 @@ set wait_to_run_files [lsort [glob -nocomplain $srcdir/$subdir/*.\\[fF\\]{,90,95,0\n set block_files       [lsort [glob -nocomplain $srcdir/$subdir/block-*.\\[fF\\]{,90,95,03,08} ] ]\n set id_files          [lsort [glob -nocomplain $srcdir/$subdir/id-*.\\[fF\\]{,90,95,03,08} ] ]\n set interchange_files [lsort [glob -nocomplain $srcdir/$subdir/interchange-*.\\[fF\\]{,90,95,03,08} ] ]\n-set scop_files [lsort [glob -nocomplain $srcdir/$subdir/scop-*.\\[fF\\]{,90,95,03,08} ] ]\n-set run_id_files [lsort [glob -nocomplain $srcdir/$subdir/run-id-*.\\[fF\\]{,90,95,03,08} ] ]\n+set scop_files        [lsort [glob -nocomplain $srcdir/$subdir/scop-*.\\[fF\\]{,90,95,03,08} ] ]\n+set run_id_files      [lsort [glob -nocomplain $srcdir/$subdir/run-id-*.\\[fF\\]{,90,95,03,08} ] ]\n+set vect_files        [lsort [glob -nocomplain $srcdir/$subdir/vect-*.\\[fF\\]{,90,95,03,08} ] ]\n \n # Tests to be compiled.\n set dg-do-what-default compile\n gfortran-dg-runtest $scop_files        \"-O2 -fgraphite -fdump-tree-graphite-all\"\n gfortran-dg-runtest $id_files          \"-O2 -fgraphite-identity -ffast-math\"\n gfortran-dg-runtest $interchange_files \"-O2 -floop-interchange -fno-loop-block -fno-loop-strip-mine -ffast-math -fdump-tree-graphite-all\"\n gfortran-dg-runtest $block_files       \"-O2 -floop-block -fno-loop-strip-mine -fno-loop-interchange -ffast-math -fdump-tree-graphite-all\"\n+gfortran-dg-runtest $vect_files        \"-O2 -fgraphite-identity -ftree-vectorize -fno-vect-cost-model -fdump-tree-vect-details\"\n \n # Tests to be run.\n set dg-do-what-default run\n@@ -62,6 +64,7 @@ foreach f $id_files          {lremove wait_to_run_files $f}\n foreach f $interchange_files {lremove wait_to_run_files $f}\n foreach f $scop_files        {lremove wait_to_run_files $f}\n foreach f $run_id_files      {lremove wait_to_run_files $f}\n+foreach f $vect_files        {lremove wait_to_run_files $f}\n gfortran-dg-runtest $wait_to_run_files \"\"\n \n # Clean up."}]}