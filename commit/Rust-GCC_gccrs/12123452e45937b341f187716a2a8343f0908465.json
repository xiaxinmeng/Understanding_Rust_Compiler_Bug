{"sha": "12123452e45937b341f187716a2a8343f0908465", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTIxMjM0NTJlNDU5MzdiMzQxZjE4NzcxNmEyYTgzNDNmMDkwODQ2NQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2013-08-01T15:41:10Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-08-01T15:41:10Z"}, "message": "cgraph.h (release_function_body): Declare.\n\n\t* cgraph.h (release_function_body): Declare.\n\t* tree.c (free_lang_data_in_decl): Free, parameters and return values\n\tof unused delcarations.\n\nFrom-SVN: r201413", "tree": {"sha": "2f02d6eeb6482da3c4542d6a466374959b925ead", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f02d6eeb6482da3c4542d6a466374959b925ead"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/12123452e45937b341f187716a2a8343f0908465", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12123452e45937b341f187716a2a8343f0908465", "html_url": "https://github.com/Rust-GCC/gccrs/commit/12123452e45937b341f187716a2a8343f0908465", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/12123452e45937b341f187716a2a8343f0908465/comments", "author": null, "committer": null, "parents": [{"sha": "ce852f9c3afff56097da5c352aba32e6191cdd3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce852f9c3afff56097da5c352aba32e6191cdd3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce852f9c3afff56097da5c352aba32e6191cdd3e"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "bd846a00abad22a403d2e967deb9fa1fcfa1b38f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12123452e45937b341f187716a2a8343f0908465/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12123452e45937b341f187716a2a8343f0908465/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=12123452e45937b341f187716a2a8343f0908465", "patch": "@@ -1,3 +1,9 @@\n+2013-08-01  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraph.h (release_function_body): Declare.\n+\t* tree.c (free_lang_data_in_decl): Free, parameters and return values\n+\tof unused delcarations.\n+\n 2013-08-01  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* config/arm/arm.md (minmax_arithsi_non_canon): Emit canonical RTL form"}, {"sha": "9b76b67d2f4d05a4225503ff999e229505b41fc1", "filename": "gcc/cgraph.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12123452e45937b341f187716a2a8343f0908465/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12123452e45937b341f187716a2a8343f0908465/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=12123452e45937b341f187716a2a8343f0908465", "patch": "@@ -606,6 +606,7 @@ void debug_cgraph_node (struct cgraph_node *);\n void cgraph_remove_edge (struct cgraph_edge *);\n void cgraph_remove_node (struct cgraph_node *);\n void cgraph_release_function_body (struct cgraph_node *);\n+void release_function_body (tree);\n void cgraph_node_remove_callees (struct cgraph_node *node);\n struct cgraph_edge *cgraph_create_edge (struct cgraph_node *,\n \t\t\t\t\tstruct cgraph_node *,"}, {"sha": "c9f47d26260d1f3e5de4c24ac717f1ee84e27e9c", "filename": "gcc/tree.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/12123452e45937b341f187716a2a8343f0908465/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/12123452e45937b341f187716a2a8343f0908465/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=12123452e45937b341f187716a2a8343f0908465", "patch": "@@ -4886,6 +4886,20 @@ free_lang_data_in_decl (tree decl)\n \n  if (TREE_CODE (decl) == FUNCTION_DECL)\n     {\n+      struct cgraph_node *node;\n+      if (!(node = cgraph_get_node (decl))\n+\t  || (!node->symbol.definition && !node->clones))\n+\t{\n+\t  if (node)\n+\t    cgraph_release_function_body (node);\n+\t  else\n+\t    {\n+\t      release_function_body (decl);\n+\t      DECL_ARGUMENTS (decl) = NULL;\n+\t      DECL_RESULT (decl) = NULL;\n+\t      DECL_INITIAL (decl) = error_mark_node;\n+\t    }\n+\t}\n       if (gimple_has_body_p (decl))\n \t{\n \t  tree t;"}]}