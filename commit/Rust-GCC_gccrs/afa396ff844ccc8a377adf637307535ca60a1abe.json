{"sha": "afa396ff844ccc8a377adf637307535ca60a1abe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZhMzk2ZmY4NDRjY2M4YTM3N2FkZjYzNzMwNzUzNWNhNjBhMWFiZQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-08-30T07:15:50Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-08-30T07:15:50Z"}, "message": "mips.md (UNSPEC_{RSQRT,RECIP}[12]_{S,D,PS}): Delete.\n\n\t* config/mips/mips.md (UNSPEC_{RSQRT,RECIP}[12]_{S,D,PS}): Delete.\n\t(UNSPEC_{RSQRT,RECIP}[12]): New constants.\n\t(UNSPEC_MOVE_TF_PS): Renumber to avoid gaps.\n\t* config/mips/mips-ps-3d.md (*movcc_v2sf_[sd]i): Use :GPR.\n\t(mips_{rsqrt,recip}[12]_{s,d,ps}): Use :ANYF.\n\nFrom-SVN: r86752", "tree": {"sha": "ed69d55c015b0f1b38e219ac3c35bd434e806296", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ed69d55c015b0f1b38e219ac3c35bd434e806296"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/afa396ff844ccc8a377adf637307535ca60a1abe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afa396ff844ccc8a377adf637307535ca60a1abe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/afa396ff844ccc8a377adf637307535ca60a1abe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/afa396ff844ccc8a377adf637307535ca60a1abe/comments", "author": null, "committer": null, "parents": [{"sha": "ef6379fdedd18f97b54ef2787974e997e1df0ac0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef6379fdedd18f97b54ef2787974e997e1df0ac0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef6379fdedd18f97b54ef2787974e997e1df0ac0"}], "stats": {"total": 197, "additions": 42, "deletions": 155}, "files": [{"sha": "d2ccd28eff8657e73f4c2a4215c0aade163967f2", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afa396ff844ccc8a377adf637307535ca60a1abe/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afa396ff844ccc8a377adf637307535ca60a1abe/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=afa396ff844ccc8a377adf637307535ca60a1abe", "patch": "@@ -1,3 +1,11 @@\n+2004-08-30  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/mips.md (UNSPEC_{RSQRT,RECIP}[12]_{S,D,PS}): Delete.\n+\t(UNSPEC_{RSQRT,RECIP}[12]): New constants.\n+\t(UNSPEC_MOVE_TF_PS): Renumber to avoid gaps.\n+\t* config/mips/mips-ps-3d.md (*movcc_v2sf_[sd]i): Use :GPR.\n+\t(mips_{rsqrt,recip}[12]_{s,d,ps}): Use :ANYF.\n+\n 2004-08-30  Diego Novillo  <dnovillo@redhat.com>\n \n \t* tree-pretty-print.c (dump_generic_node): Handle VALUE_HANDLE"}, {"sha": "0c0bf343492a013885db0b4c6939c2ce79a38a46", "filename": "gcc/config/mips/mips-ps-3d.md", "status": "modified", "additions": 29, "deletions": 140, "changes": 169, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afa396ff844ccc8a377adf637307535ca60a1abe/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afa396ff844ccc8a377adf637307535ca60a1abe/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips-ps-3d.md?ref=afa396ff844ccc8a377adf637307535ca60a1abe", "patch": "@@ -18,26 +18,11 @@\n ;; the Free Software Foundation, 59 Temple Place - Suite 330,\n ;; Boston, MA 02111-1307, USA.\n \n-(define_insn \"*movcc_v2sf_di\"\n+(define_insn \"*movcc_v2sf_<mode>\"\n   [(set (match_operand:V2SF 0 \"register_operand\" \"=f,f\")\n \t(if_then_else:V2SF\n-\t (match_operator:DI 4 \"equality_operator\"\n-\t\t\t [(match_operand:DI 1 \"register_operand\" \"d,d\")\n-\t\t\t  (const_int 0)])\n-\t (match_operand:V2SF 2 \"register_operand\" \"f,0\")\n-\t (match_operand:V2SF 3 \"register_operand\" \"0,f\")))]\n-  \"TARGET_PAIRED_SINGLE_FLOAT\"\n-  \"@\n-    mov%T4.ps\\t%0,%2,%1\n-    mov%t4.ps\\t%0,%3,%1\"\n-  [(set_attr \"type\" \"condmove\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-(define_insn \"*movcc_v2sf_si\"\n-  [(set (match_operand:V2SF 0 \"register_operand\" \"=f,f\")\n-\t(if_then_else:V2SF\n-\t (match_operator:SI 4 \"equality_operator\"\n-\t\t\t [(match_operand:SI 1 \"register_operand\" \"d,d\")\n+\t (match_operator:GPR 4 \"equality_operator\"\n+\t\t\t [(match_operand:GPR 1 \"register_operand\" \"d,d\")\n \t\t\t  (const_int 0)])\n \t (match_operand:V2SF 2 \"register_operand\" \"f,0\")\n \t (match_operand:V2SF 3 \"register_operand\" \"0,f\")))]\n@@ -1423,136 +1408,40 @@\n ; Floating Point Reduced Precision Reciprocal Square Root Instructions.\n ;----------------------------------------------------------------------------\n \n-; Floating Point Reduced Precision Reciprocal Square Root\n-; for Single (Sequence Step 1)\n-(define_insn \"mips_rsqrt1_s\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-\t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RSQRT1_S))]\n-  \"TARGET_MIPS3D\"\n-  \"rsqrt1.s\\t%0,%1\"\n-  [(set_attr \"type\" \"frsqrt\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-; Floating Point Reduced Precision Reciprocal Square Root\n-; for Double (Sequence Step 1)\n-(define_insn \"mips_rsqrt1_d\"\n-  [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n-\t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RSQRT1_D))]\n-  \"TARGET_MIPS3D\"\n-  \"rsqrt1.d\\t%0,%1\"\n-  [(set_attr \"type\" \"frsqrt\")\n-   (set_attr \"mode\" \"DF\")])\n-\n-; Floating Point Reduced Precision Reciprocal Square Root\n-; for Paired Singles (Sequence Step 1)\n-(define_insn \"mips_rsqrt1_ps\"\n-  [(set (match_operand:V2SF 0 \"register_operand\" \"=f\")\n-\t(unspec:V2SF [(match_operand:V2SF 1 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RSQRT1_PS))]\n-  \"TARGET_MIPS3D\"\n-  \"rsqrt1.ps\\t%0,%1\"\n-  [(set_attr \"type\" \"frsqrt\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-; Floating Point Reduced Precision Reciprocal Square Root\n-; for Single (Sequence Step 2)\n-(define_insn \"mips_rsqrt2_s\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-\t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"f\")\n-\t\t    (match_operand:SF 2 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RSQRT2_S))]\n-  \"TARGET_MIPS3D\"\n-  \"rsqrt2.s\\t%0,%1,%2\"\n-  [(set_attr \"type\" \"frsqrt\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-; Floating Point Reduced Precision Reciprocal Square Root\n-; for Double (Sequence Step 2)\n-(define_insn \"mips_rsqrt2_d\"\n-  [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n-\t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"f\")\n-\t\t    (match_operand:DF 2 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RSQRT2_D))]\n+(define_insn \"mips_rsqrt1_<fmt>\"\n+  [(set (match_operand:ANYF 0 \"register_operand\" \"=f\")\n+\t(unspec:ANYF [(match_operand:ANYF 1 \"register_operand\" \"f\")]\n+\t\t     UNSPEC_RSQRT1))]\n   \"TARGET_MIPS3D\"\n-  \"rsqrt2.d\\t%0,%1,%2\"\n+  \"rsqrt1.<fmt>\\t%0,%1\"\n   [(set_attr \"type\" \"frsqrt\")\n-   (set_attr \"mode\" \"DF\")])\n+   (set_attr \"mode\" \"<UNITMODE>\")])\n \n-; Floating Point Reduced Precision Reciprocal Square Root \n-; for Paired Singles (Sequence Step 2)\n-(define_insn \"mips_rsqrt2_ps\"\n-  [(set (match_operand:V2SF 0 \"register_operand\" \"=f\")\n-\t(unspec:V2SF [(match_operand:V2SF 1 \"register_operand\" \"f\")\n-\t\t      (match_operand:V2SF 2 \"register_operand\" \"f\")]\n-\t\t     UNSPEC_RSQRT2_PS))]\n+(define_insn \"mips_rsqrt2_<fmt>\"\n+  [(set (match_operand:ANYF 0 \"register_operand\" \"=f\")\n+\t(unspec:ANYF [(match_operand:ANYF 1 \"register_operand\" \"f\")\n+\t\t      (match_operand:ANYF 2 \"register_operand\" \"f\")]\n+\t\t     UNSPEC_RSQRT2))]\n   \"TARGET_MIPS3D\"\n-  \"rsqrt2.ps\\t%0,%1,%2\"\n+  \"rsqrt2.<fmt>\\t%0,%1,%2\"\n   [(set_attr \"type\" \"frsqrt\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-; Floating Point Reduced Precision Reciprocal for Single (Sequence Step 1)\n-(define_insn \"mips_recip1_s\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-\t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RECIP1_S))]\n-  \"TARGET_MIPS3D\"\n-  \"recip1.s\\t%0,%1\"\n-  [(set_attr \"type\" \"frdiv\")\n-   (set_attr \"mode\" \"SF\")])\n+   (set_attr \"mode\" \"<UNITMODE>\")])\n \n-; Floating Point Reduced Precision Reciprocal for Double (Sequence Step 1)\n-(define_insn \"mips_recip1_d\"\n-  [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n-\t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RECIP1_D))]\n+(define_insn \"mips_recip1_<fmt>\"\n+  [(set (match_operand:ANYF 0 \"register_operand\" \"=f\")\n+\t(unspec:ANYF [(match_operand:ANYF 1 \"register_operand\" \"f\")]\n+\t\t     UNSPEC_RECIP1))]\n   \"TARGET_MIPS3D\"\n-  \"recip1.d\\t%0,%1\"\n+  \"recip1.<fmt>\\t%0,%1\"\n   [(set_attr \"type\" \"frdiv\")\n-   (set_attr \"mode\" \"DF\")])\n+   (set_attr \"mode\" \"<UNITMODE>\")])\n \n-; Floating Point Reduced Precision Reciprocal for Paired Singles \n-; (Sequence Step 1)\n-(define_insn \"mips_recip1_ps\"\n-  [(set (match_operand:V2SF 0 \"register_operand\" \"=f\")\n-\t(unspec:V2SF [(match_operand:V2SF 1 \"register_operand\" \"f\")]\n-\t\t     UNSPEC_RECIP1_PS))]\n+(define_insn \"mips_recip2_<fmt>\"\n+  [(set (match_operand:ANYF 0 \"register_operand\" \"=f\")\n+\t(unspec:ANYF [(match_operand:ANYF 1 \"register_operand\" \"f\")\n+\t\t      (match_operand:ANYF 2 \"register_operand\" \"f\")]\n+\t\t     UNSPEC_RECIP2))]\n   \"TARGET_MIPS3D\"\n-  \"recip1.ps\\t%0,%1\"\n+  \"recip2.<fmt>\\t%0,%1,%2\"\n   [(set_attr \"type\" \"frdiv\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-; Floating Point Reduced Precision Reciprocal for Single (Sequence Step 2)\n-(define_insn \"mips_recip2_s\"\n-  [(set (match_operand:SF 0 \"register_operand\" \"=f\")\n-\t(unspec:SF [(match_operand:SF 1 \"register_operand\" \"f\")\n-\t\t    (match_operand:SF 2 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RECIP2_S))]\n-  \"TARGET_MIPS3D\"\n-  \"recip2.s\\t%0,%1,%2\"\n-  [(set_attr \"type\" \"frdiv\")\n-   (set_attr \"mode\" \"SF\")])\n-\n-; Floating Point Reduced Precision Reciprocal for Double (Sequence Step 2)\n-(define_insn \"mips_recip2_d\"\n-  [(set (match_operand:DF 0 \"register_operand\" \"=f\")\n-\t(unspec:DF [(match_operand:DF 1 \"register_operand\" \"f\")\n-\t\t    (match_operand:DF 2 \"register_operand\" \"f\")]\n-\t\t   UNSPEC_RECIP2_D))]\n-  \"TARGET_MIPS3D\"\n-  \"recip2.d\\t%0,%1,%2\"\n-  [(set_attr \"type\" \"frdiv\")\n-   (set_attr \"mode\" \"DF\")])\n-\n-; Floating Point Reduced Precision Reciprocal for Paired Singles \n-; (Sequence Step 2)\n-(define_insn \"mips_recip2_ps\"\n-  [(set (match_operand:V2SF 0 \"register_operand\" \"=f\")\n-\t(unspec:V2SF [(match_operand:V2SF 1 \"register_operand\" \"f\")\n-\t\t      (match_operand:V2SF 2 \"register_operand\" \"f\")]\n-\t\t     UNSPEC_RECIP2_PS))]\n-  \"TARGET_MIPS3D\"\n-  \"recip2.ps\\t%0,%1,%2\"\n-  [(set_attr \"type\" \"frdiv\")\n-   (set_attr \"mode\" \"SF\")])\n+   (set_attr \"mode\" \"<UNITMODE>\")])"}, {"sha": "4256a5bb7880ba35214ed8e75d8cc2af7a63b71e", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 5, "deletions": 15, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/afa396ff844ccc8a377adf637307535ca60a1abe/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/afa396ff844ccc8a377adf637307535ca60a1abe/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=afa396ff844ccc8a377adf637307535ca60a1abe", "patch": "@@ -52,6 +52,7 @@\n \n    ;; For MIPS Paired-Singled Floating Point Instructions.\n \n+   (UNSPEC_MOVE_TF_PS\t\t200)\n    (UNSPEC_C_F\t\t\t201)\n    (UNSPEC_C_UN\t\t\t202)\n    (UNSPEC_C_EQ\t\t\t203)\n@@ -96,21 +97,10 @@\n    (UNSPEC_CVT_PS_PW\t\t236)\n    (UNSPEC_MULR_PS\t\t237)\n \n-   (UNSPEC_RECIP1_S\t\t238)\n-   (UNSPEC_RECIP1_D\t\t239)\n-   (UNSPEC_RECIP1_PS\t\t240)\n-   (UNSPEC_RECIP2_S\t\t241)\n-   (UNSPEC_RECIP2_D\t\t242)\n-   (UNSPEC_RECIP2_PS\t\t243)\n-\n-   (UNSPEC_RSQRT1_S\t\t244)\n-   (UNSPEC_RSQRT1_D\t\t245)\n-   (UNSPEC_RSQRT1_PS\t\t246)\n-   (UNSPEC_RSQRT2_S\t\t247)\n-   (UNSPEC_RSQRT2_D\t\t248)\n-   (UNSPEC_RSQRT2_PS\t\t249)\n-\n-   (UNSPEC_MOVE_TF_PS\t\t250)\n+   (UNSPEC_RSQRT1\t\t238)\n+   (UNSPEC_RSQRT2\t\t239)\n+   (UNSPEC_RECIP1\t\t240)\n+   (UNSPEC_RECIP2\t\t241)\n   ]\n )\n "}]}