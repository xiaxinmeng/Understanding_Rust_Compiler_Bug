{"sha": "e0dd989a1b6c9bd473ea875a2daad0af050279a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBkZDk4OWExYjZjOWJkNDczZWE4NzVhMmRhYWQwYWYwNTAyNzlhMw==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2009-04-28T15:27:09Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2009-04-28T15:27:09Z"}, "message": "re PR middle-end/39937 (Revision 146831 failed SPEC CPU 2006)\n\n2009-04-28  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/39937\n\t* fold-const.c (fold_binary): Use distribute_real_division only\n\ton float types.\n\n\t* gfortran.fortran-torture/compile/pr39937.f: New testcase.\n\nFrom-SVN: r146901", "tree": {"sha": "fa262efe84407fece3d549d15fd03850cbe16f8b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa262efe84407fece3d549d15fd03850cbe16f8b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0dd989a1b6c9bd473ea875a2daad0af050279a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0dd989a1b6c9bd473ea875a2daad0af050279a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0dd989a1b6c9bd473ea875a2daad0af050279a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0dd989a1b6c9bd473ea875a2daad0af050279a3/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9a17c91defe42bdd966dd30b33b171dd07f8cd00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a17c91defe42bdd966dd30b33b171dd07f8cd00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a17c91defe42bdd966dd30b33b171dd07f8cd00"}], "stats": {"total": 44, "additions": 42, "deletions": 2}, "files": [{"sha": "72766c4d85bcdbca82dd4c73a34bec312559d28c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e0dd989a1b6c9bd473ea875a2daad0af050279a3", "patch": "@@ -1,3 +1,9 @@\n+2009-04-28  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/39937\n+\t* fold-const.c (fold_binary): Use distribute_real_division only\n+\ton float types.\n+\n 2009-04-28  Steve Ellcey  <sje@cup.hp.com>\n \n \t* config.gcc (hppa*64*-*-hpux11*): Set use_gcc_stdint and"}, {"sha": "14b9f100b517281536c8e82bf54b209dd9cc3182", "filename": "gcc/fold-const.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=e0dd989a1b6c9bd473ea875a2daad0af050279a3", "patch": "@@ -10102,7 +10102,7 @@ fold_binary (enum tree_code code, tree type, tree op0, tree op1)\n \t\t}\n \t    }\n \n-          if (flag_unsafe_math_optimizations\n+\t  if (flag_unsafe_math_optimizations\n \t      && (TREE_CODE (arg0) == RDIV_EXPR || TREE_CODE (arg0) == MULT_EXPR)\n \t      && (TREE_CODE (arg1) == RDIV_EXPR || TREE_CODE (arg1) == MULT_EXPR)\n \t      && (tem = distribute_real_division (code, type, arg0, arg1)))\n@@ -10542,7 +10542,8 @@ fold_binary (enum tree_code code, tree type, tree op0, tree op1)\n \t    }\n \t}\n \n-      if (flag_unsafe_math_optimizations\n+      if (FLOAT_TYPE_P (type)\n+\t  && flag_unsafe_math_optimizations\n \t  && (TREE_CODE (arg0) == RDIV_EXPR || TREE_CODE (arg0) == MULT_EXPR)\n \t  && (TREE_CODE (arg1) == RDIV_EXPR || TREE_CODE (arg1) == MULT_EXPR)\n \t  && (tem = distribute_real_division (code, type, arg0, arg1)))"}, {"sha": "6c91769246125ad9c38c6b68a23f860d4504cac5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e0dd989a1b6c9bd473ea875a2daad0af050279a3", "patch": "@@ -1,3 +1,8 @@\n+2009-04-28  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/39937\n+\t* gfortran.fortran-torture/compile/pr39937.f: New testcase.\n+\n 2009-04-28  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tg++.dg/warn/pr35652.C: Removed."}, {"sha": "5ead135d8070fff67c135aaac7883792442ff197", "filename": "gcc/testsuite/gfortran.fortran-torture/compile/pr39937.f", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr39937.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0dd989a1b6c9bd473ea875a2daad0af050279a3/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr39937.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fcompile%2Fpr39937.f?ref=e0dd989a1b6c9bd473ea875a2daad0af050279a3", "patch": "@@ -0,0 +1,28 @@\n+      SUBROUTINE DTREVC( SIDE, HOWMNY, SELECT, N, T, LDT, VL, LDVL, VR,\n+     $                   LDVR, MM, M, WORK, INFO )\n+      DOUBLE PRECISION   T( LDT, * ), VL( LDVL, * ), VR( LDVR, * ),\n+     $                   WORK( * )\n+      DOUBLE PRECISION   X( 2, 2 )\n+      CALL DLALN2( .FALSE., 1, 1, SMIN, ONE, T( J, J ),\n+     $                            ZERO, X, 2, SCALE, XNORM, IERR )\n+      CALL DSCAL( KI, SCALE, WORK( 1+N ), 1 )\n+      DO 90 J = KI - 2, 1, -1\n+      IF( J.GT.JNXT )\n+     $               GO TO 90\n+      JNXT = J - 1\n+      IF( J.GT.1 ) THEN\n+          IF( T( J, J-1 ).NE.ZERO ) THEN\n+              IF( WORK( J ).GT.BIGNUM / XNORM ) THEN\n+                  X( 1, 1 ) = X( 1, 1 ) / XNORM\n+              END IF\n+          END IF\n+          CALL DLALN2( .FALSE., 2, 2, SMIN, ONE,\n+     $                            T( J-1, J-1 ), LDT, ONE, ONE,\n+     $                            XNORM, IERR )\n+          CALL DAXPY( J-2, -X( 1, 1 ), T( 1, J-1 ), 1,\n+     $                           WORK( 1+N ), 1 )\n+          CALL DAXPY( J-2, -X( 2, 2 ), T( 1, J ), 1,\n+     $                           WORK( 1+N2 ), 1 )\n+      END IF\n+   90          CONTINUE\n+      END"}]}