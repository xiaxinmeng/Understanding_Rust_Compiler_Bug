{"sha": "a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTNjMWNlN2JiOWMwOWJlMGJhODdlMzNkODg2OGVlOTUxMTJkY2EzYg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-12T18:39:32Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1995-05-12T18:39:32Z"}, "message": "(bc_loop): Process comma-separated list rather than space-separated one;\n\nrestore .h suffix stripped by vmsconfig;\n(loop1): More robust handling of directory prefix on file names.\n\nFrom-SVN: r9654", "tree": {"sha": "721f6a284ceed40576ca260f8b5033bae3c9d67c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/721f6a284ceed40576ca260f8b5033bae3c9d67c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b/comments", "author": null, "committer": null, "parents": [{"sha": "e7c3cc847fe3af3560ca3ea3a0759fccf2010554", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7c3cc847fe3af3560ca3ea3a0759fccf2010554", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7c3cc847fe3af3560ca3ea3a0759fccf2010554"}], "stats": {"total": 26, "additions": 17, "deletions": 9}, "files": [{"sha": "80eb488ef1285ab00a9968944e209b5a4bf7f3f7", "filename": "gcc/make-cc1.com", "status": "modified", "additions": 17, "deletions": 9, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b/gcc%2Fmake-cc1.com", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b/gcc%2Fmake-cc1.com", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmake-cc1.com?ref=a3c1ce7bb9c09be0ba87e33d8868ee95112dca3b", "patch": "@@ -24,6 +24,7 @@ $ RENAME=\t\"rename/New_Version\"\n $ LINK\t=\t\"link\"\n $ EDIT\t=\t\"edit\"\n $ SEARCH=\t\"search\"\n+$ ABORT\t=\t\"exit %x002C\"\n $ echo\t=\t\"write sys$output\"\n $!\n $!\tCompiler options\n@@ -192,8 +193,9 @@ $\tread ifile$ bc_line\n $\tclose ifile$\n $\tbc_index = 0\n $bc_loop:\n-$\ttfile = f$element(bc_index, \" \", bc_line)\n-$\tif tfile.eqs.\" \" then goto bc_done\n+$\ttfile = f$element(bc_index, \",\", bc_line)\n+$\tif tfile.eqs.\",\" then goto bc_done\n+$\tif f$locate(\".\",tfile).eq.f$length(tfile) then tfile = tfile + \".h\"\n $\tcall bc_generate 'tfile' \"bi_all.opt/opt,\"\n $\tbc_index = bc_index + 1\n $\tgoto bc_loop\n@@ -341,9 +343,15 @@ $if f$locate(flnm,p2).lt.f$length(p2) then goto loop1\n $! check for front-end subdirectory: \"[.prfx]flnm\"\n $prfx = \"\"\n $k = f$locate(\"]\",flnm)\n-$if k.eq.1 then  goto loop1\t![]c-common for [.cp]\n-$if k.lt.f$length(flnm) then  prfx = f$extract(2,k-2,flnm)\n-$if k.lt.f$length(flnm) then  flnm = f$extract(k+1,99,flnm)\n+$if k.eq.1\t![]c-common for [.cp]\n+$then\n+$ if f$search(f$parse(\".obj\",flnm)).nes.\"\" then  goto loop1\n+$ flnm = f$extract(2,999,flnm)\n+$else if k.lt.f$length(flnm)\n+$ then\tprfx = f$extract(2,k-2,flnm)\n+$\tflnm = f$extract(k+1,99,flnm)\n+$ endif\n+$endif\n $ if prfx.nes.\"\"\n $ then\tset default [.'prfx']\t!push\n $\tsave_cflags = CFLAGS\n@@ -389,7 +397,7 @@ $! In case of error or abort, go here (In order to close file).\n $!\n $c_err: !'f$verify(0)\n $close ifile$\n-$exit %x2c\n+$ABORT\n $!\n $c_done:\n $close ifile$\n@@ -405,7 +413,7 @@ $subroutine\n $if f$extract(0,5,p1).nes.\"INSN-\"\n $\tthen\n $\twrite sys$error \"Unknown file passed to generate.\"\n-$\texit 1\n+$\tABORT\n $\tendif\n $root1=f$parse(f$extract(5,255,p1),,,\"NAME\")\n $\tset verify\n@@ -429,8 +437,8 @@ $bc_generate:\n $subroutine\n $if f$extract(0,3,p1).nes.\"BC-\"\n $\tthen\n-$\twrite sys$error \"Unknown file passed to generate.\"\n-$\texit 1\n+$\twrite sys$error \"Unknown file passed to bc_generate.\"\n+$\tABORT\n $\tendif\n $root1=f$parse(f$extract(3,255,p1),,,\"NAME\")\n $\tset verify"}]}