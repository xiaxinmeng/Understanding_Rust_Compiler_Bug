{"sha": "e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTBlYzRjM2I2YmQxOTFiYzkyZmRhYjYwYmQ0NjM2NDgwZDY4Zjg3MA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2004-07-05T06:37:10Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2004-07-05T06:37:10Z"}, "message": "re PR target/16357 (ICE copying 7 bytes between extern char[]s)\n\n\tPR target/16357\n\t* config/mips/mips.c (mips_block_move_straight): Pass BLKmode memrefs\n\tto mips_expand_unaligned_load, mips_expand_unaligned_store, and\n\tmove_by_pieces.\n\nFrom-SVN: r84108", "tree": {"sha": "487eeb5fb0ac361eb3308ed35c0aa455700de2d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/487eeb5fb0ac361eb3308ed35c0aa455700de2d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/comments", "author": null, "committer": null, "parents": [{"sha": "feb61729c969ac0198f0fdb9027f75d781ccba56", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/feb61729c969ac0198f0fdb9027f75d781ccba56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/feb61729c969ac0198f0fdb9027f75d781ccba56"}], "stats": {"total": 49, "additions": 31, "deletions": 18}, "files": [{"sha": "5d77ac0fc1e5e7057349af915f1eaba75b66c4cd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "patch": "@@ -1,3 +1,10 @@\n+2004-07-05  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\tPR target/16357\n+\t* config/mips/mips.c (mips_block_move_straight): Pass BLKmode memrefs\n+\tto mips_expand_unaligned_load, mips_expand_unaligned_store, and\n+\tmove_by_pieces.\n+\n 2004-07-05  Josef Zlomek  <zlomekj@suse.cz>\n \n \t* var-tracking.c: Fix some comments."}, {"sha": "8382b026818df5e24fe7e8b32da8cd6a8d2253fc", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 18, "deletions": 18, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "patch": "@@ -3402,33 +3402,33 @@ mips_block_move_straight (rtx dest, rtx src, HOST_WIDE_INT length)\n      the source has enough alignment, otherwise use left/right pairs.  */\n   for (offset = 0, i = 0; offset + delta <= length; offset += delta, i++)\n     {\n-      rtx part;\n-\n       regs[i] = gen_reg_rtx (mode);\n-      part = adjust_address (src, mode, offset);\n-      if (MEM_ALIGN (part) >= bits)\n-\temit_move_insn (regs[i], part);\n-      else if (!mips_expand_unaligned_load (regs[i], part, bits, 0))\n-\tabort ();\n+      if (MEM_ALIGN (src) >= bits)\n+\temit_move_insn (regs[i], adjust_address (src, mode, offset));\n+      else\n+\t{\n+\t  rtx part = adjust_address (src, BLKmode, offset);\n+\t  if (!mips_expand_unaligned_load (regs[i], part, bits, 0))\n+\t    abort ();\n+\t}\n     }\n \n   /* Copy the chunks to the destination.  */\n   for (offset = 0, i = 0; offset + delta <= length; offset += delta, i++)\n-    {\n-      rtx part;\n-\n-      part = adjust_address (dest, mode, offset);\n-      if (MEM_ALIGN (part) >= bits)\n-\temit_move_insn (part, regs[i]);\n-      else if (!mips_expand_unaligned_store (part, regs[i], bits, 0))\n-\tabort ();\n-    }\n+    if (MEM_ALIGN (dest) >= bits)\n+      emit_move_insn (adjust_address (dest, mode, offset), regs[i]);\n+    else\n+      {\n+\trtx part = adjust_address (dest, BLKmode, offset);\n+\tif (!mips_expand_unaligned_store (part, regs[i], bits, 0))\n+\t  abort ();\n+      }\n \n   /* Mop up any left-over bytes.  */\n   if (offset < length)\n     {\n-      src = adjust_address (src, mode, offset);\n-      dest = adjust_address (dest, mode, offset);\n+      src = adjust_address (src, BLKmode, offset);\n+      dest = adjust_address (dest, BLKmode, offset);\n       move_by_pieces (dest, src, length - offset,\n \t\t      MIN (MEM_ALIGN (src), MEM_ALIGN (dest)), 0);\n     }"}, {"sha": "82c559d4341c8317a5c35c1c0ca408fc2cd0c4d2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "patch": "@@ -1,3 +1,7 @@\n+2004-07-05  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* gcc.c-torture/compile/20040705-1.c: New test.\n+\n 2004-07-04  Bud Davis  <bdavis9659@comcast.net>\n \n \t* gfortran.fortran-torture/execute/seq_io.f90: New test."}, {"sha": "1e45ee289bf4a97c27bd4192aaeaa086d2a798e9", "filename": "gcc/testsuite/gcc.c-torture/compile/20040705-1.c", "status": "added", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040705-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e0ec4c3b6bd191bc92fdab60bd4636480d68f870/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040705-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20040705-1.c?ref=e0ec4c3b6bd191bc92fdab60bd4636480d68f870", "patch": "@@ -0,0 +1,2 @@\n+extern char foo[], bar[];\n+void f (void) { memcpy (foo, bar, 7); }"}]}