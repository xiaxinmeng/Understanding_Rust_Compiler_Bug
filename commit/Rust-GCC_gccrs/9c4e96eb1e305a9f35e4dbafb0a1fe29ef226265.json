{"sha": "9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWM0ZTk2ZWIxZTMwNWE5ZjM1ZTRkYmFmYjBhMWZlMjllZjIyNjI2NQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2016-12-07T18:16:32Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2016-12-07T18:16:32Z"}, "message": "Add some functions for use by the RTL frontend.\n\ngcc/ChangeLog:\n\t* read-md.c (rtx_reader::require_char): New method.\n\t(require_char_ws): Convert from function to...\n\t(rtx_reader::require_char_ws): ...method.\n\t(rtx_reader::require_word_ws): New method.\n\t* read-md.h (rtx_reader::require_char): New method decl.\n\t(require_char_ws): Remove global decl in favor of...\n\t(rtx_reader::require_char_ws): ...new method decl.\n\t(rtx_reader::require_word_ws): New method decl.\n\t(rtx_reader::peek_char): New method decl.\n\nFrom-SVN: r243376", "tree": {"sha": "f630779522d438dada81b844779c84d2ca6d302d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f630779522d438dada81b844779c84d2ca6d302d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8e1d640fcdf694fe1d83818b123b550e0da96705", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e1d640fcdf694fe1d83818b123b550e0da96705", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e1d640fcdf694fe1d83818b123b550e0da96705"}], "stats": {"total": 52, "additions": 50, "deletions": 2}, "files": [{"sha": "c4055dc1501ede01915ee760e6199923f91db364", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "patch": "@@ -1,3 +1,15 @@\n+2016-12-07  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* read-md.c (rtx_reader::require_char): New method.\n+\t(require_char_ws): Convert from function to...\n+\t(rtx_reader::require_char_ws): ...method.\n+\t(rtx_reader::require_word_ws): New method.\n+\t* read-md.h (rtx_reader::require_char): New method decl.\n+\t(require_char_ws): Remove global decl in favor of...\n+\t(rtx_reader::require_char_ws): ...new method decl.\n+\t(rtx_reader::require_word_ws): New method decl.\n+\t(rtx_reader::peek_char): New method decl.\n+\n 2016-12-07  Thomas Preud'homme  <thomas.preudhomme@arm.com>\n \n \tPR rtl-optimization/78617"}, {"sha": "095075f37d41a7419a64ebd3a389425c9f52e27e", "filename": "gcc/read-md.c", "status": "modified", "additions": 34, "deletions": 1, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/gcc%2Fread-md.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/gcc%2Fread-md.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fread-md.c?ref=9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "patch": "@@ -340,17 +340,40 @@ read_skip_spaces (void)\n     }\n }\n \n+/* Consume the next character, issuing a fatal error if it is not\n+   EXPECTED.  */\n+\n+void\n+rtx_reader::require_char (char expected)\n+{\n+  int ch = read_char ();\n+  if (ch != expected)\n+    fatal_expected_char (expected, ch);\n+}\n+\n /* Consume any whitespace, then consume the next non-whitespace\n    character, issuing a fatal error if it is not EXPECTED.  */\n \n void\n-require_char_ws (char expected)\n+rtx_reader::require_char_ws (char expected)\n {\n   int ch = read_skip_spaces ();\n   if (ch != expected)\n     fatal_expected_char (expected, ch);\n }\n \n+/* Consume any whitespace, then consume the next word (as per read_name),\n+   issuing a fatal error if it is not EXPECTED.  */\n+\n+void\n+rtx_reader::require_word_ws (const char *expected)\n+{\n+  struct md_name name;\n+  read_name (&name);\n+  if (strcmp (name.string, expected))\n+    fatal_with_file_and_line (\"missing '%s'\", expected);\n+}\n+\n /* Read the next character from the file.  */\n \n int\n@@ -386,6 +409,16 @@ rtx_reader::unread_char (int ch)\n   ungetc (ch, m_read_md_file);\n }\n \n+/* Peek at the next character from the file without consuming it.  */\n+\n+int\n+rtx_reader::peek_char (void)\n+{\n+  int ch = read_char ();\n+  unread_char (ch);\n+  return ch;\n+}\n+\n /* Read an rtx code name into NAME.  It is terminated by any of the\n    punctuation chars of rtx printed syntax.  */\n "}, {"sha": "06b89b4c04f01df9b9e9a8ebdaf9ef6fa93ca901", "filename": "gcc/read-md.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/gcc%2Fread-md.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265/gcc%2Fread-md.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fread-md.h?ref=9c4e96eb1e305a9f35e4dbafb0a1fe29ef226265", "patch": "@@ -116,6 +116,10 @@ class rtx_reader\n   char *read_braced_string ();\n   char *read_string (int star_if_braced);\n   void read_skip_construct (int depth, file_location loc);\n+  void require_char (char expected);\n+  void require_char_ws (char expected);\n+  void require_word_ws (const char *expected);\n+  int peek_char (void);\n \n   void set_md_ptr_loc (const void *ptr, const char *filename, int lineno);\n   const struct ptr_loc *get_md_ptr_loc (const void *ptr);\n@@ -269,7 +273,6 @@ extern void fatal_with_file_and_line (const char *, ...)\n   ATTRIBUTE_PRINTF_1 ATTRIBUTE_NORETURN;\n extern void fatal_expected_char (int, int) ATTRIBUTE_NORETURN;\n extern int read_skip_spaces (void);\n-extern void require_char_ws (char expected);\n extern int n_comma_elts (const char *);\n extern const char *scan_comma_elt (const char **);\n extern void upcase_string (char *);"}]}