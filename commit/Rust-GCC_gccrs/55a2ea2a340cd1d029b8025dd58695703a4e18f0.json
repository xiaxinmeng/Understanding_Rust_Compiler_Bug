{"sha": "55a2ea2a340cd1d029b8025dd58695703a4e18f0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTVhMmVhMmEzNDBjZDFkMDI5YjgwMjVkZDU4Njk1NzAzYTRlMThmMA==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2002-03-28T00:19:56Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2002-03-28T00:19:56Z"}, "message": "configure.in (gcc_cv_as): Use $target_alias in directory searchs rather than $target.\n\n\t* configure.in (gcc_cv_as): Use $target_alias in directory searchs\n\trather than $target.  Heed program_prefix and\n\tprogram_transform_name.  Search for gas in cross-compiler case too.\n\t\"test -x\" rather than \"test -f\".\n\t(gcc_cv_ld): Likewise.\n\t(gcc_cv_nm): Heed program_prefix and program_transform_name.\n\t(gcc_cv_objdump): Likewise.\n\t* configure: Regenerate.\n\nFrom-SVN: r51489", "tree": {"sha": "fbb10633327beff9e7bdc98feaaa6659f4e06fa0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fbb10633327beff9e7bdc98feaaa6659f4e06fa0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/55a2ea2a340cd1d029b8025dd58695703a4e18f0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55a2ea2a340cd1d029b8025dd58695703a4e18f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55a2ea2a340cd1d029b8025dd58695703a4e18f0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55a2ea2a340cd1d029b8025dd58695703a4e18f0/comments", "author": null, "committer": null, "parents": [{"sha": "7ffb4fd2da169e19ace71babd1916e2ec6e6eae2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ffb4fd2da169e19ace71babd1916e2ec6e6eae2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ffb4fd2da169e19ace71babd1916e2ec6e6eae2"}], "stats": {"total": 209, "additions": 130, "deletions": 79}, "files": [{"sha": "7dac70f89f3a7f9183500a2719c57848becd3ad9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55a2ea2a340cd1d029b8025dd58695703a4e18f0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55a2ea2a340cd1d029b8025dd58695703a4e18f0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=55a2ea2a340cd1d029b8025dd58695703a4e18f0", "patch": "@@ -1,3 +1,14 @@\n+2002-03-28  Alan Modra  <amodra@bigpond.net.au>\n+\n+\t* configure.in (gcc_cv_as): Use $target_alias in directory searchs\n+\trather than $target.  Heed program_prefix and\n+\tprogram_transform_name.  Search for gas in cross-compiler case too.\n+\t\"test -x\" rather than \"test -f\".\n+\t(gcc_cv_ld): Likewise.\n+\t(gcc_cv_nm): Heed program_prefix and program_transform_name.\n+\t(gcc_cv_objdump): Likewise.\n+\t* configure: Regenerate.\n+\n 2002-03-27  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* Makefile.in (attribs.o): Update."}, {"sha": "9220430457ee2db34e753d737cbb8e311d84f378", "filename": "gcc/configure", "status": "modified", "additions": 71, "deletions": 51, "changes": 122, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55a2ea2a340cd1d029b8025dd58695703a4e18f0/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55a2ea2a340cd1d029b8025dd58695703a4e18f0/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=55a2ea2a340cd1d029b8025dd58695703a4e18f0", "patch": "@@ -6870,8 +6870,7 @@ elif test -f $gcc_cv_as_gas_srcdir/configure.in -a -f ../gas/Makefile; then\n \tgcc_cv_gas_minor_version=`expr \"$gcc_cv_gas_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n fi\n \n-if test \"x$gcc_cv_as\" = x -a x$host = x$target; then\n-\t# Native build.\n+if test \"x$gcc_cv_as\" = x -a x$build = x$host; then\n \t# Search the same directories that the installed compiler will\n \t# search.  Else we may find the wrong assembler and lose.  If we\n \t# do not find a suitable assembler binary, then try the user's\n@@ -6896,14 +6895,21 @@ if test \"x$gcc_cv_as\" = x -a x$host = x$target; then\n \t# If the loop below does not find an assembler, then use whatever\n \t# one we can find in the users's path.\n \t# user's path.\n-\tgcc_cv_as=as$host_exeext\n-\n-\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target/$gcc_version \\\n-\t\t   $test_prefix/lib/gcc-lib/$target \\\n-\t\t   /usr/lib/gcc/$target/$gcc_version \\\n-\t\t   /usr/lib/gcc/$target \\\n-\t\t   $test_prefix/$target/bin/$target/$gcc_version \\\n-\t\t   $test_prefix/$target/bin \\\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_as=${program_prefix}as$host_exeext\n+\telse\n+\t\tgcc_cv_as=`echo as | sed ${program_transform_name}`$host_exeext\n+\tfi\n+\n+\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/lib/gcc-lib/$target_alias \\\n+\t\t   /usr/lib/gcc/$target_alias/$gcc_version \\\n+\t\t   /usr/lib/gcc/$target_alias \\\n+\t\t   $test_prefix/$target_alias/bin/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/$target_alias/bin\"\n+\n+\tif test x$host = x$target; then\n+\t    test_dirs=\"$test_dirs \\\n \t\t   /usr/libexec \\\n \t\t   /usr/ccs/gcc \\\n \t\t   /usr/ccs/bin \\\n@@ -6914,9 +6920,10 @@ if test \"x$gcc_cv_as\" = x -a x$host = x$target; then\n \t\t   /sysv/usr/lib/cmplrs/cc \\\n \t\t   /svr4/usr/lib/cmplrs/cc \\\n \t\t   /usr/bin\"\n+\tfi\n \n \tfor dir in $test_dirs; do\n-\t\tif test -f $dir/as$host_exeext; then\n+\t\tif test -x $dir/as$host_exeext; then\n \t\t\tgcc_cv_as=$dir/as$host_exeext\n \t\t\tbreak;\n \t\tfi\n@@ -6930,7 +6937,7 @@ fi\n \n # Figure out what linker we will be using.\n echo $ac_n \"checking what linker to use\"\"... $ac_c\" 1>&6\n-echo \"configure:6934: checking what linker to use\" >&5\n+echo \"configure:6941: checking what linker to use\" >&5\n gcc_cv_ld=\n gcc_cv_gld_major_version=\n gcc_cv_gld_minor_version=\n@@ -6956,8 +6963,7 @@ elif test -f $gcc_cv_ld_gld_srcdir/configure.in -a -f ../ld/Makefile; then\n \tgcc_cv_gld_minor_version=`expr \"$gcc_cv_gld_version\" : \"VERSION=[0-9]*\\.\\([0-9]*\\)\"`\n fi\n \n-if test \"x$gcc_cv_ld\" = x -a x$host = x$target; then\n-\t# Native build.\n+if test \"x$gcc_cv_ld\" = x -a x$build = x$host; then\n \t# Search the same directories that the installed compiler will\n \t# search.  Else we may find the wrong linker and lose.  If we\n \t# do not find a suitable linker binary, then try the user's\n@@ -6982,14 +6988,21 @@ if test \"x$gcc_cv_ld\" = x -a x$host = x$target; then\n \t# If the loop below does not find an linker, then use whatever\n \t# one we can find in the users's path.\n \t# user's path.\n-\tgcc_cv_ld=ld$host_exeext\n-\n-\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target/$gcc_version \\\n-\t\t   $test_prefix/lib/gcc-lib/$target \\\n-\t\t   /usr/lib/gcc/$target/$gcc_version \\\n-\t\t   /usr/lib/gcc/$target \\\n-\t\t   $test_prefix/$target/bin/$target/$gcc_version \\\n-\t\t   $test_prefix/$target/bin \\\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_ld=${program_prefix}ld$host_exeext\n+\telse\n+\t\tgcc_cv_ld=`echo ld | sed ${program_transform_name}`$host_exeext\n+\tfi\n+\n+\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/lib/gcc-lib/$target_alias \\\n+\t\t   /usr/lib/gcc/$target_alias/$gcc_version \\\n+\t\t   /usr/lib/gcc/$target_alias \\\n+\t\t   $test_prefix/$target_alias/bin/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/$target_alias/bin\"\n+\n+\tif test x$host = x$target; then\n+\t    test_dirs=\"$test_dirs \\\n \t\t   /usr/libexec \\\n \t\t   /usr/ccs/gcc \\\n \t\t   /usr/ccs/bin \\\n@@ -7000,9 +7013,10 @@ if test \"x$gcc_cv_ld\" = x -a x$host = x$target; then\n \t\t   /sysv/usr/lib/cmplrs/cc \\\n \t\t   /svr4/usr/lib/cmplrs/cc \\\n \t\t   /usr/bin\"\n+\tfi\n \n \tfor dir in $test_dirs; do\n-\t\tif test -f $dir/ld$host_exeext; then\n+\t\tif test -x $dir/ld$host_exeext; then\n \t\t\tgcc_cv_ld=$dir/ld$host_exeext\n \t\t\tbreak;\n \t\tfi\n@@ -7016,29 +7030,35 @@ fi\n \n # Figure out what nm we will be using.\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7020: checking what nm to use\" >&5\n+echo \"configure:7034: checking what nm to use\" >&5\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n-elif test x$host = x$target; then\n-\t# Native build.\n-\tgcc_cv_nm=nm$host_exeext\n+elif test x$build = x$host; then\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_nm=${program_prefix}nm$host_exeext\n+\telse\n+\t\tgcc_cv_nm=`echo nm | sed ${program_transform_name}`$host_exeext\n+\tfi\n fi\n echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6\n \n # Figure out what objdump we will be using.\n echo $ac_n \"checking what objdump to use\"\"... $ac_c\" 1>&6\n-echo \"configure:7031: checking what objdump to use\" >&5\n+echo \"configure:7048: checking what objdump to use\" >&5\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n-elif test x$host = x$target; then\n-\t# Native build.\n-\tgcc_cv_objdump=objdump$host_exeext\n+elif test x$build = x$host; then\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_objdump=${program_prefix}objdump$host_exeext\n+\telse\n+\t\tgcc_cv_objdump=`echo objdump | sed ${program_transform_name}`$host_exeext\n+\tfi\n fi\n echo \"$ac_t\"\"$gcc_cv_objdump\" 1>&6\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:7042: checking assembler alignment features\" >&5\n+echo \"configure:7062: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n \t# Gas version 2.6 and later support for .balign and .p2align.\n@@ -7086,7 +7106,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:7090: checking assembler subsection support\" >&5\n+echo \"configure:7110: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7126,7 +7146,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:7130: checking assembler weak support\" >&5\n+echo \"configure:7150: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -7149,7 +7169,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:7153: checking assembler hidden support\" >&5\n+echo \"configure:7173: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 10 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7175,7 +7195,7 @@ libgcc_visibility=$gcc_cv_as_hidden\n \n \n echo $ac_n \"checking assembler leb128 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7179: checking assembler leb128 support\" >&5\n+echo \"configure:7199: checking assembler leb128 support\" >&5\n gcc_cv_as_leb128=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 11 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7220,7 +7240,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_leb128\" 1>&6\n \n echo $ac_n \"checking assembler eh_frame optimization\"\"... $ac_c\" 1>&6\n-echo \"configure:7224: checking assembler eh_frame optimization\" >&5\n+echo \"configure:7244: checking assembler eh_frame optimization\" >&5\n gcc_cv_as_eh_frame=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7301,7 +7321,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_eh_frame\" 1>&6\n \n echo $ac_n \"checking assembler section merging support\"\"... $ac_c\" 1>&6\n-echo \"configure:7305: checking assembler section merging support\" >&5\n+echo \"configure:7325: checking assembler section merging support\" >&5\n gcc_cv_as_shf_merge=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 12 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -7327,7 +7347,7 @@ case \"$target\" in\n   # All TARGET_ABI_OSF targets.\n   alpha*-*-osf* | alpha*-*-linux* | alpha*-*-*bsd*)\n     echo $ac_n \"checking assembler supports explicit relocations\"\"... $ac_c\" 1>&6\n-echo \"configure:7331: checking assembler supports explicit relocations\" >&5\n+echo \"configure:7351: checking assembler supports explicit relocations\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_explicit_relocs'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7377,7 +7397,7 @@ EOF\n     ;;\n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:7381: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:7401: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7405,7 +7425,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:7409: checking assembler supports -relax\" >&5\n+echo \"configure:7429: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7433,7 +7453,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler and linker support unaligned pc related relocs\"\"... $ac_c\" 1>&6\n-echo \"configure:7437: checking assembler and linker support unaligned pc related relocs\" >&5\n+echo \"configure:7457: checking assembler and linker support unaligned pc related relocs\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_sparc_ua_pcrel'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7463,7 +7483,7 @@ EOF\n     case \"$tm_file\" in\n     *64*)\n \techo $ac_n \"checking for 64 bit support in assembler ($gcc_cv_as)\"\"... $ac_c\" 1>&6\n-echo \"configure:7467: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n+echo \"configure:7487: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_flags64'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7508,7 +7528,7 @@ EOF\n \n     if test \"x$gcc_cv_as_flags64\" != xno; then\n \techo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:7512: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:7532: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -7548,7 +7568,7 @@ EOF\n \n   i[34567]86-*-* | x86_64-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:7552: checking assembler instructions\" >&5\n+echo \"configure:7572: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n       if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -7575,7 +7595,7 @@ EOF\n     echo \"$ac_t\"\"$gcc_cv_as_instructions\" 1>&6\n \n     echo $ac_n \"checking assembler GOTOFF in data directives\"\"... $ac_c\" 1>&6\n-echo \"configure:7579: checking assembler GOTOFF in data directives\" >&5\n+echo \"configure:7599: checking assembler GOTOFF in data directives\" >&5\n     gcc_cv_as_gotoff_in_data=no\n     if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x\n     then\n@@ -7605,7 +7625,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:7609: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:7629: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -7661,7 +7681,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_dwarf2_debug_line\" 1>&6\n \n echo $ac_n \"checking assembler --gdwarf2 support\"\"... $ac_c\" 1>&6\n-echo \"configure:7665: checking assembler --gdwarf2 support\" >&5\n+echo \"configure:7685: checking assembler --gdwarf2 support\" >&5\n gcc_cv_as_gdwarf2_flag=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n then\n@@ -7690,7 +7710,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gdwarf2_flag\" 1>&6\n \n echo $ac_n \"checking assembler --gstabs support\"\"... $ac_c\" 1>&6\n-echo \"configure:7694: checking assembler --gstabs support\" >&5\n+echo \"configure:7714: checking assembler --gstabs support\" >&5\n gcc_cv_as_gstabs_flag=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x;\n then\n@@ -7718,7 +7738,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_gstabs_flag\" 1>&6\n \n echo $ac_n \"checking linker PT_GNU_EH_FRAME support\"\"... $ac_c\" 1>&6\n-echo \"configure:7722: checking linker PT_GNU_EH_FRAME support\" >&5\n+echo \"configure:7742: checking linker PT_GNU_EH_FRAME support\" >&5\n gcc_cv_ld_eh_frame_hdr=no\n if test x$gcc_cv_gld_major_version != x -a x$gcc_cv_gld_minor_version != x; then\n   if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 12 -o \"$gcc_cv_gld_major_version\" -gt 2 && grep 'EMUL = elf' ../ld/Makefile > /dev/null; then\n@@ -7881,7 +7901,7 @@ fi\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:7885: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:7905: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "3952de65ace263f6c02b1fc074de7d5abd0caa6a", "filename": "gcc/configure.in", "status": "modified", "additions": 48, "deletions": 28, "changes": 76, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/55a2ea2a340cd1d029b8025dd58695703a4e18f0/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/55a2ea2a340cd1d029b8025dd58695703a4e18f0/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=55a2ea2a340cd1d029b8025dd58695703a4e18f0", "patch": "@@ -1222,8 +1222,7 @@ changequote(,)dnl\n changequote([,])dnl\n fi\n \n-if test \"x$gcc_cv_as\" = x -a x$host = x$target; then\n-\t# Native build.\n+if test \"x$gcc_cv_as\" = x -a x$build = x$host; then\n \t# Search the same directories that the installed compiler will\n \t# search.  Else we may find the wrong assembler and lose.  If we\n \t# do not find a suitable assembler binary, then try the user's\n@@ -1248,14 +1247,21 @@ if test \"x$gcc_cv_as\" = x -a x$host = x$target; then\n \t# If the loop below does not find an assembler, then use whatever\n \t# one we can find in the users's path.\n \t# user's path.\n-\tgcc_cv_as=as$host_exeext\n-\n-\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target/$gcc_version \\\n-\t\t   $test_prefix/lib/gcc-lib/$target \\\n-\t\t   /usr/lib/gcc/$target/$gcc_version \\\n-\t\t   /usr/lib/gcc/$target \\\n-\t\t   $test_prefix/$target/bin/$target/$gcc_version \\\n-\t\t   $test_prefix/$target/bin \\\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_as=${program_prefix}as$host_exeext\n+\telse\n+\t\tgcc_cv_as=`echo as | sed ${program_transform_name}`$host_exeext\n+\tfi\n+\n+\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/lib/gcc-lib/$target_alias \\\n+\t\t   /usr/lib/gcc/$target_alias/$gcc_version \\\n+\t\t   /usr/lib/gcc/$target_alias \\\n+\t\t   $test_prefix/$target_alias/bin/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/$target_alias/bin\"\n+\n+\tif test x$host = x$target; then\n+\t    test_dirs=\"$test_dirs \\\n \t\t   /usr/libexec \\\n \t\t   /usr/ccs/gcc \\\n \t\t   /usr/ccs/bin \\\n@@ -1266,9 +1272,10 @@ if test \"x$gcc_cv_as\" = x -a x$host = x$target; then\n \t\t   /sysv/usr/lib/cmplrs/cc \\\n \t\t   /svr4/usr/lib/cmplrs/cc \\\n \t\t   /usr/bin\"\n+\tfi\n \n \tfor dir in $test_dirs; do\n-\t\tif test -f $dir/as$host_exeext; then\n+\t\tif test -x $dir/as$host_exeext; then\n \t\t\tgcc_cv_as=$dir/as$host_exeext\n \t\t\tbreak;\n \t\tfi\n@@ -1311,8 +1318,7 @@ changequote(,)dnl\n changequote([,])dnl\n fi\n \n-if test \"x$gcc_cv_ld\" = x -a x$host = x$target; then\n-\t# Native build.\n+if test \"x$gcc_cv_ld\" = x -a x$build = x$host; then\n \t# Search the same directories that the installed compiler will\n \t# search.  Else we may find the wrong linker and lose.  If we\n \t# do not find a suitable linker binary, then try the user's\n@@ -1337,14 +1343,21 @@ if test \"x$gcc_cv_ld\" = x -a x$host = x$target; then\n \t# If the loop below does not find an linker, then use whatever\n \t# one we can find in the users's path.\n \t# user's path.\n-\tgcc_cv_ld=ld$host_exeext\n-\n-\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target/$gcc_version \\\n-\t\t   $test_prefix/lib/gcc-lib/$target \\\n-\t\t   /usr/lib/gcc/$target/$gcc_version \\\n-\t\t   /usr/lib/gcc/$target \\\n-\t\t   $test_prefix/$target/bin/$target/$gcc_version \\\n-\t\t   $test_prefix/$target/bin \\\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_ld=${program_prefix}ld$host_exeext\n+\telse\n+\t\tgcc_cv_ld=`echo ld | sed ${program_transform_name}`$host_exeext\n+\tfi\n+\n+\ttest_dirs=\"$test_prefix/lib/gcc-lib/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/lib/gcc-lib/$target_alias \\\n+\t\t   /usr/lib/gcc/$target_alias/$gcc_version \\\n+\t\t   /usr/lib/gcc/$target_alias \\\n+\t\t   $test_prefix/$target_alias/bin/$target_alias/$gcc_version \\\n+\t\t   $test_prefix/$target_alias/bin\"\n+\n+\tif test x$host = x$target; then\n+\t    test_dirs=\"$test_dirs \\\n \t\t   /usr/libexec \\\n \t\t   /usr/ccs/gcc \\\n \t\t   /usr/ccs/bin \\\n@@ -1355,9 +1368,10 @@ if test \"x$gcc_cv_ld\" = x -a x$host = x$target; then\n \t\t   /sysv/usr/lib/cmplrs/cc \\\n \t\t   /svr4/usr/lib/cmplrs/cc \\\n \t\t   /usr/bin\"\n+\tfi\n \n \tfor dir in $test_dirs; do\n-\t\tif test -f $dir/ld$host_exeext; then\n+\t\tif test -x $dir/ld$host_exeext; then\n \t\t\tgcc_cv_ld=$dir/ld$host_exeext\n \t\t\tbreak;\n \t\tfi\n@@ -1373,19 +1387,25 @@ fi\n AC_MSG_CHECKING(what nm to use)\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n-elif test x$host = x$target; then\n-\t# Native build.\n-\tgcc_cv_nm=nm$host_exeext\n+elif test x$build = x$host; then\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_nm=${program_prefix}nm$host_exeext\n+\telse\n+\t\tgcc_cv_nm=`echo nm | sed ${program_transform_name}`$host_exeext\n+\tfi\n fi\n AC_MSG_RESULT($gcc_cv_nm)\n \n # Figure out what objdump we will be using.\n AC_MSG_CHECKING(what objdump to use)\n if test -x objdump$host_exeext; then\n \tgcc_cv_objdump=./objdump$host_exeext\n-elif test x$host = x$target; then\n-\t# Native build.\n-\tgcc_cv_objdump=objdump$host_exeext\n+elif test x$build = x$host; then\n+\tif test \"x$program_prefix\" != xNONE; then\n+\t\tgcc_cv_objdump=${program_prefix}objdump$host_exeext\n+\telse\n+\t\tgcc_cv_objdump=`echo objdump | sed ${program_transform_name}`$host_exeext\n+\tfi\n fi\n AC_MSG_RESULT($gcc_cv_objdump)\n "}]}