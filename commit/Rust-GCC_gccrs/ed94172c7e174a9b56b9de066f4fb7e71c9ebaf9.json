{"sha": "ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ5NDE3MmM3ZTE3NGE5YjU2YjlkZTA2NmY0ZmI3ZTcxYzllYmFmOQ==", "commit": {"author": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2021-06-28T21:13:17Z"}, "committer": {"name": "Martin Sebor", "email": "msebor@redhat.com", "date": "2021-06-28T21:13:17Z"}, "message": "objc: Add support for per-location warning groups.\n\ngcc/objc/ChangeLog:\n\n\t* objc-act.c (objc_maybe_build_modify_expr): Replace direct uses\n\tof TREE_NO_WARNING with warning_suppressed_p, and suppress_warning.\n\t(objc_build_incr_expr_for_property_ref): Same.\n\t(objc_build_struct): Same.\n\t(synth_module_prologue): Same.\n\t* objc-gnu-runtime-abi-01.c (gnu_runtime_01_initialize): Same.\n\t* objc-next-runtime-abi-01.c (next_runtime_01_initialize): Same.\n\t* objc-next-runtime-abi-02.c (next_runtime_02_initialize): Same.", "tree": {"sha": "2b24a3c79d9858af9625b7a28b893483ed4edf90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2b24a3c79d9858af9625b7a28b893483ed4edf90"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/comments", "author": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "committer": {"login": "msebor", "id": 381149, "node_id": "MDQ6VXNlcjM4MTE0OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/381149?v=4", "gravatar_id": "", "url": "https://api.github.com/users/msebor", "html_url": "https://github.com/msebor", "followers_url": "https://api.github.com/users/msebor/followers", "following_url": "https://api.github.com/users/msebor/following{/other_user}", "gists_url": "https://api.github.com/users/msebor/gists{/gist_id}", "starred_url": "https://api.github.com/users/msebor/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/msebor/subscriptions", "organizations_url": "https://api.github.com/users/msebor/orgs", "repos_url": "https://api.github.com/users/msebor/repos", "events_url": "https://api.github.com/users/msebor/events{/privacy}", "received_events_url": "https://api.github.com/users/msebor/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "3f448890764fd75311b50cda667286dc2416e384", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f448890764fd75311b50cda667286dc2416e384", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f448890764fd75311b50cda667286dc2416e384"}], "stats": {"total": 21, "additions": 11, "deletions": 10}, "files": [{"sha": "ec20891152b1fbe25f148e0ac2bd7d8518715cbb", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 8, "deletions": 7, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "patch": "@@ -2007,7 +2007,7 @@ objc_maybe_build_modify_expr (tree lhs, tree rhs)\n \t correct (maybe a more sophisticated implementation could\n \t avoid generating the compound expression if not needed), but\n \t we need to turn it off.  */\n-      TREE_NO_WARNING (compound_expr) = 1;\n+      suppress_warning (compound_expr, OPT_Wunused);\n       return compound_expr;\n     }\n   else\n@@ -2129,7 +2129,7 @@ objc_build_incr_expr_for_property_ref (location_t location,\n \n   /* Prevent C++ from warning with -Wall that \"right operand of comma\n      operator has no effect\".  */\n-  TREE_NO_WARNING (compound_expr) = 1;\n+  suppress_warning (compound_expr, OPT_Wunused);\n   return compound_expr;\n }\n \n@@ -2262,8 +2262,9 @@ objc_build_struct (tree klass, tree fields, tree super_name)\n       DECL_FIELD_IS_BASE (base) = 1;\n \n       if (fields)\n-\tTREE_NO_WARNING (fields) = 1;\t/* Suppress C++ ABI warnings -- we   */\n-#endif\t\t\t\t\t/* are following the ObjC ABI here.  */\n+\t/* Suppress C++ ABI warnings: we are following the ObjC ABI here.  */\n+\tsuppress_warning (fields, OPT_Wabi);\n+#endif\n       DECL_CHAIN (base) = fields;\n       fields = base;\n     }\n@@ -3112,19 +3113,19 @@ synth_module_prologue (void)\n \t\t\t\t\t\tTYPE_DECL,\n \t\t\t\t\t\tobjc_object_name,\n \t\t\t\t\t\tobjc_object_type));\n-  TREE_NO_WARNING (type) = 1;\n+  suppress_warning (type);\n \n   type = lang_hooks.decls.pushdecl (build_decl (input_location,\n \t\t\t\t\t\tTYPE_DECL,\n \t\t\t\t\t\tobjc_instancetype_name,\n \t\t\t\t\t\tobjc_instancetype_type));\n-  TREE_NO_WARNING (type) = 1;\n+  suppress_warning (type);\n \n   type = lang_hooks.decls.pushdecl (build_decl (input_location,\n \t\t\t\t\t\tTYPE_DECL,\n \t\t\t\t\t\tobjc_class_name,\n \t\t\t\t\t\tobjc_class_type));\n-  TREE_NO_WARNING (type) = 1;\n+  suppress_warning (type);\n \n   /* Forward-declare '@interface Protocol'.  */\n   type = get_identifier (PROTOCOL_OBJECT_CLASS_NAME);"}, {"sha": "976fa1e36cbda7720a791c2af12ba0a16f9c791e", "filename": "gcc/objc/objc-gnu-runtime-abi-01.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-gnu-runtime-abi-01.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-gnu-runtime-abi-01.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-gnu-runtime-abi-01.c?ref=ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "patch": "@@ -213,7 +213,7 @@ static void gnu_runtime_01_initialize (void)\n \t\t\t\t\t\tTYPE_DECL,\n \t\t\t\t\t\tobjc_selector_name,\n \t\t\t\t\t\tobjc_selector_type));\n-  TREE_NO_WARNING (type) = 1;\n+  suppress_warning (type);\n \n   /* typedef id (*IMP)(id, SEL, ...); */\n   ftype = build_varargs_function_type_list (objc_object_type,"}, {"sha": "183fc01abb2888c894df971dd1ceb8a0d53b6b63", "filename": "gcc/objc/objc-next-runtime-abi-01.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-next-runtime-abi-01.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-next-runtime-abi-01.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-next-runtime-abi-01.c?ref=ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "patch": "@@ -282,7 +282,7 @@ static void next_runtime_01_initialize (void)\n \t\t\t\t\t\tTYPE_DECL,\n \t\t\t\t\t\tobjc_selector_name,\n \t\t\t\t\t\tobjc_selector_type));\n-  TREE_NO_WARNING (type) = 1;\n+  suppress_warning (type);\n \n   build_v1_class_template ();\n   build_super_template ();"}, {"sha": "963d1bf1ad871aab57a9bcc0aad8f211b0f16cb0", "filename": "gcc/objc/objc-next-runtime-abi-02.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-next-runtime-abi-02.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9/gcc%2Fobjc%2Fobjc-next-runtime-abi-02.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-next-runtime-abi-02.c?ref=ed94172c7e174a9b56b9de066f4fb7e71c9ebaf9", "patch": "@@ -379,7 +379,7 @@ static void next_runtime_02_initialize (void)\n \t\t\t\t\t\tTYPE_DECL,\n \t\t\t\t\t\tobjc_selector_name,\n \t\t\t\t\t\tobjc_selector_type));\n-  TREE_NO_WARNING (type) = 1;\n+  suppress_warning (type);\n \n   /* IMP : id (*) (id, _message_ref_t*, ...)\n      SUPER_IMP : id (*) ( super_t*, _super_message_ref_t*, ...)"}]}