{"sha": "d3079c44fc5087b8e6f39379062a4b50e42bf49d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMwNzljNDRmYzUwODdiOGU2ZjM5Mzc5MDYyYTRiNTBlNDJiZjQ5ZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2007-09-04T23:29:58Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2007-09-04T23:29:58Z"}, "message": "re PR tree-optimization/33017 (tree check fail for legal code)\n\n\tPR tree-optimization/33017\n\t* tree-data-ref.c (split_constant_offset) <case SSA_NAME>: Don't\n\trecurse for pure or const function calls.\n\n\t* gcc.dg/pr33017.c: New test.\n\nFrom-SVN: r128107", "tree": {"sha": "47fa3e7b4caef2ebb6aed121cfd5527f9d330763", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/47fa3e7b4caef2ebb6aed121cfd5527f9d330763"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3079c44fc5087b8e6f39379062a4b50e42bf49d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3079c44fc5087b8e6f39379062a4b50e42bf49d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3079c44fc5087b8e6f39379062a4b50e42bf49d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3079c44fc5087b8e6f39379062a4b50e42bf49d/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ce629d4d9819052db871ac510c010d7321ad1b30", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce629d4d9819052db871ac510c010d7321ad1b30", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce629d4d9819052db871ac510c010d7321ad1b30"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "7f83513aeb5b7f56a90fefe1195ef300367dabe4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d3079c44fc5087b8e6f39379062a4b50e42bf49d", "patch": "@@ -3,6 +3,10 @@\n \t* config/rs6000/tramp.asm: Include config.h.\n \tCheck __PIC__ or __pic__ macro instead of SHARED.\n \n+\tPR tree-optimization/33017\n+\t* tree-data-ref.c (split_constant_offset) <case SSA_NAME>: Don't\n+\trecurse for pure or const function calls.\n+\n 2007-09-04  Laurynas Biveinis  <laurynas.biveinis@gmail.com>\n \n \t* c-format.c: Include alloc-pool.h."}, {"sha": "b191442349e69035421dc327154525f7d1407c44", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d3079c44fc5087b8e6f39379062a4b50e42bf49d", "patch": "@@ -1,3 +1,8 @@\n+2007-09-05  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/33017\n+\t* gcc.dg/pr33017.c: New test.\n+\n 2007-09-05  Ben Elliston  <bje@au.ibm.com>\n \n \t* gcc.target/powerpc/ppu-intrinsics.c: Add test cases for the"}, {"sha": "851fe71f8607a2f266f2370cc17b720ec71cc3d3", "filename": "gcc/testsuite/gcc.dg/pr33017.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2Ftestsuite%2Fgcc.dg%2Fpr33017.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2Ftestsuite%2Fgcc.dg%2Fpr33017.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr33017.c?ref=d3079c44fc5087b8e6f39379062a4b50e42bf49d", "patch": "@@ -0,0 +1,30 @@\n+/* PR tree-optimization/33017 */\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -ftree-vectorize\" } */\n+\n+extern __SIZE_TYPE__ strlen (const char *);\n+extern void abort (void);\n+\n+char *\n+__attribute__((noinline))\n+foo (const char *string)\n+{\n+  int len;\n+  static char var[0x104];\n+  int off;\n+  len = strlen (string);\n+  for (off = 0; off < 64; off++)\n+    var[len + off + 2] = 0x57;\n+  return var;\n+}\n+\n+int\n+main (void)\n+{\n+  char *p = foo (\"abcd\");\n+  int i;\n+  for (i = 0; i < 0x104; i++)\n+    if (p[i] != ((i >= 6 && i < 70) ? 0x57 : 0))\n+      abort ();\n+  return 0;\n+}"}, {"sha": "720c94d599812c7da1455fa01e048446e896ec62", "filename": "gcc/tree-data-ref.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2Ftree-data-ref.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3079c44fc5087b8e6f39379062a4b50e42bf49d/gcc%2Ftree-data-ref.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-data-ref.c?ref=d3079c44fc5087b8e6f39379062a4b50e42bf49d", "patch": "@@ -574,7 +574,8 @@ split_constant_offset (tree exp, tree *var, tree *off)\n \n \t    if (!TREE_SIDE_EFFECTS (def_stmt_rhs) \n \t\t&& EXPR_P (def_stmt_rhs)\n-\t\t&& !REFERENCE_CLASS_P (def_stmt_rhs))\n+\t\t&& !REFERENCE_CLASS_P (def_stmt_rhs)\n+\t\t&& !get_call_expr_in (def_stmt_rhs))\n \t      {\n \t\tsplit_constant_offset (def_stmt_rhs, &var0, &off0);\n \t\tvar0 = fold_convert (type, var0);"}]}