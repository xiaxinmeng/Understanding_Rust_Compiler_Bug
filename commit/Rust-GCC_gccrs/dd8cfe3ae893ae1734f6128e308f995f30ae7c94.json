{"sha": "dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGQ4Y2ZlM2FlODkzYWUxNzM0ZjYxMjhlMzA4Zjk5NWYzMGFlN2M5NA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-09T13:11:10Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-09T13:11:10Z"}, "message": "[multiple changes]\n\n2009-04-09  Nicolas Setton  <setton@adacore.com>\n\n\t* s-osinte-darwin.ads: Fix wrong binding to struc timeval.\n\n\t* s-osinte-darwin.adb (To_Timeval): Adapt to fixed implementation of\n\tstruct_timeval.\n\n2009-04-09  Bob Duff  <duff@adacore.com>\n\n\t* exp_ch5.adb, exp_ch9.adb: Correct miscellaneous Slocs in\n\tinternally-generated nodes related to select statements to avoid\n\tconfusing the debugger.\n\n2009-04-09  Pascal Obry  <obry@adacore.com>\n\n\t* make.adb: Ensure that all linker arguments are duplicated.\n\nFrom-SVN: r145838", "tree": {"sha": "e094eb8cc06e7ff52241dd85c1d764ccfe75cb47", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e094eb8cc06e7ff52241dd85c1d764ccfe75cb47"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/comments", "author": null, "committer": null, "parents": [{"sha": "59f3dd0a14fa4d4ce7ee142068cf9c5e376efc27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/59f3dd0a14fa4d4ce7ee142068cf9c5e376efc27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/59f3dd0a14fa4d4ce7ee142068cf9c5e376efc27"}], "stats": {"total": 79, "additions": 49, "deletions": 30}, "files": [{"sha": "12633e79b14a66762b37cd3f3f7558826bf1d614", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "patch": "@@ -1,3 +1,20 @@\n+2009-04-09  Nicolas Setton  <setton@adacore.com>\n+\n+\t* s-osinte-darwin.ads: Fix wrong binding to struc timeval.\n+\n+\t* s-osinte-darwin.adb (To_Timeval): Adapt to fixed implementation of\n+\tstruct_timeval.\n+\n+2009-04-09  Bob Duff  <duff@adacore.com>\n+\n+\t* exp_ch5.adb, exp_ch9.adb: Correct miscellaneous Slocs in\n+\tinternally-generated nodes related to select statements to avoid\n+\tconfusing the debugger.\n+\n+2009-04-09  Pascal Obry  <obry@adacore.com>\n+\n+\t* make.adb: Ensure that all linker arguments are duplicated.\n+\n 2009-04-09  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch5.adb: Minor reformatting"}, {"sha": "83f20774cb0ea9ba9f093dfc521ff5d08ff6fe13", "filename": "gcc/ada/exp_ch5.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fexp_ch5.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fexp_ch5.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch5.adb?ref=dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "patch": "@@ -3631,7 +3631,7 @@ package body Exp_Ch5 is\n          Call :=\n            Make_Procedure_Call_Statement (Loc,\n              Name => New_Reference_To\n-                       (RTE (RE_Complete_Rendezvous), Loc));\n+                       (RTE (RE_Complete_Rendezvous), No_Location));\n          Insert_Before (N, Call);\n          --  why not insert actions here???\n          Analyze (Call);"}, {"sha": "bff65b361d6fe082c6ba168ee9575e1979c63cee", "filename": "gcc/ada/exp_ch9.adb", "status": "modified", "additions": 25, "deletions": 24, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fexp_ch9.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fexp_ch9.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch9.adb?ref=dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "patch": "@@ -740,7 +740,7 @@ package body Exp_Ch9 is\n       --  processing, has already been added for the expansion of requeue\n       --  statements.\n \n-      Call := Build_Runtime_Call (Loc, RE_Complete_Rendezvous);\n+      Call := Build_Runtime_Call (No_Location, RE_Complete_Rendezvous);\n       Insert_Before (Last (Statements (Stats)), Call);\n       Analyze (Call);\n \n@@ -751,7 +751,7 @@ package body Exp_Ch9 is\n          Hand := First (Exception_Handlers (Stats));\n \n          while Present (Hand) loop\n-            Call := Build_Runtime_Call (Loc, RE_Complete_Rendezvous);\n+            Call := Build_Runtime_Call (No_Location, RE_Complete_Rendezvous);\n             Append (Call, Statements (Hand));\n             Analyze (Call);\n             Next (Hand);\n@@ -786,13 +786,13 @@ package body Exp_Ch9 is\n             Exception_Choices => New_List (Ohandle),\n \n             Statements =>  New_List (\n-              Make_Procedure_Call_Statement (Loc,\n+              Make_Procedure_Call_Statement (No_Location,\n                 Name => New_Reference_To (\n-                  RTE (RE_Exceptional_Complete_Rendezvous), Loc),\n+                  RTE (RE_Exceptional_Complete_Rendezvous), No_Location),\n                 Parameter_Associations => New_List (\n-                  Make_Function_Call (Loc,\n+                  Make_Function_Call (No_Location,\n                     Name => New_Reference_To (\n-                      RTE (RE_Get_GNAT_Exception), Loc))))))));\n+                      RTE (RE_Get_GNAT_Exception), No_Location))))))));\n \n       Set_Parent (New_S, Astat); -- temp parent for Analyze call\n       Analyze_Exception_Handlers (Exception_Handlers (New_S));\n@@ -4663,14 +4663,14 @@ package body Exp_Ch9 is\n                while Present (Formal) loop\n                   Comp  := Entry_Component (Formal);\n                   New_F :=\n-                    Make_Defining_Identifier (Sloc (Formal), Chars (Formal));\n+                    Make_Defining_Identifier (Loc, Chars (Formal));\n \n                   Set_Etype (New_F, Etype (Formal));\n                   Set_Scope (New_F, Ent);\n \n-               --  Now we set debug info needed on New_F even though it does\n-               --  not come from source, so that the debugger will get the\n-               --  right information for these generated names.\n+                  --  Now we set debug info needed on New_F even though it does\n+                  --  not come from source, so that the debugger will get the\n+                  --  right information for these generated names.\n \n                   Set_Debug_Info_Needed (New_F);\n \n@@ -8561,6 +8561,7 @@ package body Exp_Ch9 is\n       procedure Add_Accept (Alt : Node_Id) is\n          Acc_Stm   : constant Node_Id    := Accept_Statement (Alt);\n          Ename     : constant Node_Id    := Entry_Direct_Name (Acc_Stm);\n+         Eloc      : constant Source_Ptr := Sloc (Ename);\n          Eent      : constant Entity_Id  := Entity (Ename);\n          Index     : constant Node_Id    := Entry_Index (Acc_Stm);\n          Null_Body : Node_Id;\n@@ -8576,39 +8577,39 @@ package body Exp_Ch9 is\n \n          if Present (Condition (Alt)) then\n             Expr :=\n-              Make_Conditional_Expression (Loc, New_List (\n+              Make_Conditional_Expression (Eloc, New_List (\n                 Condition (Alt),\n-                Entry_Index_Expression (Loc, Eent, Index, Scope (Eent)),\n-                New_Reference_To (RTE (RE_Null_Task_Entry), Loc)));\n+                Entry_Index_Expression (Eloc, Eent, Index, Scope (Eent)),\n+                New_Reference_To (RTE (RE_Null_Task_Entry), Eloc)));\n          else\n             Expr :=\n               Entry_Index_Expression\n-                (Loc, Eent, Index, Scope (Eent));\n+                (Eloc, Eent, Index, Scope (Eent));\n          end if;\n \n          if Present (Handled_Statement_Sequence (Accept_Statement (Alt))) then\n-            Null_Body := New_Reference_To (Standard_False, Loc);\n+            Null_Body := New_Reference_To (Standard_False, Eloc);\n \n             if Abort_Allowed then\n-               Call := Make_Procedure_Call_Statement (Loc,\n-                 Name => New_Reference_To (RTE (RE_Abort_Undefer), Loc));\n+               Call := Make_Procedure_Call_Statement (Eloc,\n+                 Name => New_Reference_To (RTE (RE_Abort_Undefer), Eloc));\n                Insert_Before (First (Statements (Handled_Statement_Sequence (\n                  Accept_Statement (Alt)))), Call);\n                Analyze (Call);\n             end if;\n \n             PB_Ent :=\n-              Make_Defining_Identifier (Sloc (Ename),\n+              Make_Defining_Identifier (Eloc,\n                 New_External_Name (Chars (Ename), 'A', Num_Accept));\n \n             if Comes_From_Source (Alt) then\n                Set_Debug_Info_Needed (PB_Ent);\n             end if;\n \n             Proc_Body :=\n-              Make_Subprogram_Body (Loc,\n+              Make_Subprogram_Body (Eloc,\n                 Specification =>\n-                  Make_Procedure_Specification (Loc,\n+                  Make_Procedure_Specification (Eloc,\n                     Defining_Unit_Name => PB_Ent),\n                Declarations => Declarations (Acc_Stm),\n                Handled_Statement_Sequence =>\n@@ -8624,7 +8625,7 @@ package body Exp_Ch9 is\n             Append (Proc_Body, Body_List);\n \n          else\n-            Null_Body := New_Reference_To (Standard_True,  Loc);\n+            Null_Body := New_Reference_To (Standard_True,  Eloc);\n \n             --  if accept statement has declarations, insert above, given that\n             --  we are not creating a body for the accept.\n@@ -8635,7 +8636,7 @@ package body Exp_Ch9 is\n          end if;\n \n          Append_To (Accept_List,\n-           Make_Aggregate (Loc, Expressions => New_List (Null_Body, Expr)));\n+           Make_Aggregate (Eloc, Expressions => New_List (Null_Body, Expr)));\n \n          Num_Accept := Num_Accept + 1;\n       end Add_Accept;\n@@ -8705,9 +8706,9 @@ package body Exp_Ch9 is\n               Make_Integer_Literal (Loc, Index));\n \n             Alt_Stats := New_List (\n-              Make_Procedure_Call_Statement (Loc,\n+              Make_Procedure_Call_Statement (Sloc (Proc),\n                 Name => New_Reference_To (\n-                  Defining_Unit_Name (Specification (Proc)), Loc)));\n+                  Defining_Unit_Name (Specification (Proc)), Sloc (Proc))));\n          end if;\n \n          if Statements (Alt) /= Empty_List then"}, {"sha": "57f0cfb50feb5d3019811e47da960eaaae5af0f8", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "patch": "@@ -6453,7 +6453,8 @@ package body Make is\n \n                      else\n                         Last_Arg := Last_Arg + 1;\n-                        Args (Last_Arg) := Linker_Switches.Table (J);\n+                        Args (Last_Arg) :=\n+                          new String'(Linker_Switches.Table (J).all);\n                      end if;\n                   end loop;\n "}, {"sha": "40a125c747f3c88953382f90597a0bc484e6c76b", "filename": "gcc/ada/s-osinte-darwin.adb", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fs-osinte-darwin.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fs-osinte-darwin.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-darwin.adb?ref=dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  B o d y                                 --\n --                                                                          --\n---           Copyright (C) 1999-2006 Free Software Foundation, Inc.         --\n+--          Copyright (C) 1999-2008, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -95,11 +95,11 @@ package body System.OS_Interface is\n    ----------------\n \n    function To_Timeval (D : Duration) return struct_timeval is\n-      S : int32_t;\n+      S : time_t;\n       F : Duration;\n \n    begin\n-      S := int32_t (D);\n+      S := time_t (D);\n       F := D - Duration (S);\n \n       --  If F has negative value due to a round-up, adjust for positive F"}, {"sha": "93dfc6b96df2aa51b3c0660debc8e124e52d98cd", "filename": "gcc/ada/s-osinte-darwin.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fs-osinte-darwin.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/dd8cfe3ae893ae1734f6128e308f995f30ae7c94/gcc%2Fada%2Fs-osinte-darwin.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-darwin.ads?ref=dd8cfe3ae893ae1734f6128e308f995f30ae7c94", "patch": "@@ -525,7 +525,7 @@ private\n    CLOCK_REALTIME : constant clockid_t := 0;\n \n    type struct_timeval is record\n-      tv_sec  : int32_t;\n+      tv_sec  : time_t;\n       tv_usec : int32_t;\n    end record;\n    pragma Convention (C, struct_timeval);"}]}