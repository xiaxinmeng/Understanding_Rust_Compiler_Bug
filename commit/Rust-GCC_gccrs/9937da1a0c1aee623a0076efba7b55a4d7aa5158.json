{"sha": "9937da1a0c1aee623a0076efba7b55a4d7aa5158", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTkzN2RhMWEwYzFhZWU2MjNhMDA3NmVmYmE3YjU1YTRkN2FhNTE1OA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-11T08:56:16Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-02-11T08:56:16Z"}, "message": "(expand_builtin): Move memory_address calls\nout of arglist of emit_block_move.\n\nFrom-SVN: r3460", "tree": {"sha": "f8f04302894dbb9ab7da66586fb48c701de8500c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f8f04302894dbb9ab7da66586fb48c701de8500c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9937da1a0c1aee623a0076efba7b55a4d7aa5158", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9937da1a0c1aee623a0076efba7b55a4d7aa5158", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9937da1a0c1aee623a0076efba7b55a4d7aa5158", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9937da1a0c1aee623a0076efba7b55a4d7aa5158/comments", "author": null, "committer": null, "parents": [{"sha": "0f33506ca7bfc727f2fbb05084c0403c628d9c5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0f33506ca7bfc727f2fbb05084c0403c628d9c5d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0f33506ca7bfc727f2fbb05084c0403c628d9c5d"}], "stats": {"total": 17, "additions": 9, "deletions": 8}, "files": [{"sha": "12fbe7634bacf53b197939c46ec8d6f29fc6ca0e", "filename": "gcc/expr.c", "status": "modified", "additions": 9, "deletions": 8, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9937da1a0c1aee623a0076efba7b55a4d7aa5158/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9937da1a0c1aee623a0076efba7b55a4d7aa5158/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=9937da1a0c1aee623a0076efba7b55a4d7aa5158", "patch": "@@ -6419,7 +6419,7 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n \t    = get_pointer_alignment (src, BIGGEST_ALIGNMENT) / BITS_PER_UNIT;\n \t  int dest_align\n \t    = get_pointer_alignment (dest, BIGGEST_ALIGNMENT) / BITS_PER_UNIT;\n-\t  rtx dest_rtx;\n+\t  rtx dest_rtx, dest_mem, src_mem;\n \n \t  /* If either SRC or DEST is not a pointer type, don't do\n \t     this operation in-line.  */\n@@ -6431,15 +6431,16 @@ expand_builtin (exp, target, subtarget, mode, ignore)\n \t    }\n \n \t  dest_rtx = expand_expr (dest, NULL_RTX, Pmode, EXPAND_NORMAL);\n+\t  dest_mem = gen_rtx (MEM, BLKmode,\n+\t\t\t      memory_address (BLKmode, dest_rtx));\n+\t  src_mem = gen_rtx (MEM, BLKmode,\n+\t\t\t     memory_address (BLKmode,\n+\t\t\t\t\t     expand_expr (src, NULL_RTX,\n+\t\t\t\t\t\t\t  Pmode,\n+\t\t\t\t\t\t\t  EXPAND_NORMAL)));\n \n \t  /* Copy word part most expediently.  */\n-\t  emit_block_move (gen_rtx (MEM, BLKmode,\n-\t\t\t\t    memory_address (BLKmode, dest_rtx)),\n-\t\t\t   gen_rtx (MEM, BLKmode,\n-\t\t\t\t    memory_address (BLKmode,\n-\t\t\t\t\t\t    expand_expr (src, NULL_RTX,\n-\t\t\t\t\t\t\t\t Pmode,\n-\t\t\t\t\t\t\t\t EXPAND_NORMAL))),\n+\t  emit_block_move (dest_mem, src_mem,\n \t\t\t   expand_expr (len, NULL_RTX, VOIDmode, 0),\n \t\t\t   MIN (src_align, dest_align));\n \t  return dest_rtx;"}]}