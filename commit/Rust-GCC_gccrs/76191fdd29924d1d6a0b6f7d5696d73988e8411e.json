{"sha": "76191fdd29924d1d6a0b6f7d5696d73988e8411e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzYxOTFmZGQyOTkyNGQxZDZhMGI2ZjdkNTY5NmQ3Mzk4OGU4NDExZQ==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@acm.org", "date": "2001-01-08T11:30:22Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-01-08T11:30:22Z"}, "message": "decl.c (struct binding_level): Adjust class_shadowed comments to reflect reality.\n\ncp:\n\t* decl.c (struct binding_level): Adjust class_shadowed comments\n\tto reflect reality.\n\t(push_class_level_binding): Ajust comments to reflect reality.\n\tSet IDENTIFIER_CLASS_VALUE when replacing an existing binding.\n\tDon't set TREE_VALUE on the class_shadowed list.\ntestsuite:\n\t* g++.old-deja/g++.other/lookup16.C: Remove XFAIL.\n\nFrom-SVN: r38796", "tree": {"sha": "085c7755570eb2bcb0344272c189c84fd6fb9733", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/085c7755570eb2bcb0344272c189c84fd6fb9733"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/76191fdd29924d1d6a0b6f7d5696d73988e8411e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76191fdd29924d1d6a0b6f7d5696d73988e8411e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76191fdd29924d1d6a0b6f7d5696d73988e8411e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76191fdd29924d1d6a0b6f7d5696d73988e8411e/comments", "author": {"login": "urnathan", "id": 13103001, "node_id": "MDQ6VXNlcjEzMTAzMDAx", "avatar_url": "https://avatars.githubusercontent.com/u/13103001?v=4", "gravatar_id": "", "url": "https://api.github.com/users/urnathan", "html_url": "https://github.com/urnathan", "followers_url": "https://api.github.com/users/urnathan/followers", "following_url": "https://api.github.com/users/urnathan/following{/other_user}", "gists_url": "https://api.github.com/users/urnathan/gists{/gist_id}", "starred_url": "https://api.github.com/users/urnathan/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/urnathan/subscriptions", "organizations_url": "https://api.github.com/users/urnathan/orgs", "repos_url": "https://api.github.com/users/urnathan/repos", "events_url": "https://api.github.com/users/urnathan/events{/privacy}", "received_events_url": "https://api.github.com/users/urnathan/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "02fbf2d20d1d37ec75b3d6759fe001732e6595bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02fbf2d20d1d37ec75b3d6759fe001732e6595bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02fbf2d20d1d37ec75b3d6759fe001732e6595bc"}], "stats": {"total": 34, "additions": 21, "deletions": 13}, "files": [{"sha": "9e4b99edcb98a745c5f3f2e82cb900e78394b8b7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=76191fdd29924d1d6a0b6f7d5696d73988e8411e", "patch": "@@ -1,3 +1,11 @@\n+2001-01-08  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* decl.c (struct binding_level): Adjust class_shadowed comments\n+\tto reflect reality.\n+\t(push_class_level_binding): Ajust comments to reflect reality.\n+\tSet IDENTIFIER_CLASS_VALUE when replacing an existing binding.\n+\tDon't set TREE_VALUE on the class_shadowed list.\n+\n 2001-01-07  Mark Mitchell  <mark@codesourcery.com>\n \n \t* decl2.c (grokfield): Don't accept `asm' specifiers for"}, {"sha": "e15e77c479b95266752eac98ac32aa22445a846a", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 8, "deletions": 11, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=76191fdd29924d1d6a0b6f7d5696d73988e8411e", "patch": "@@ -391,15 +391,13 @@ struct binding_level\n \n     /* If this binding level is the binding level for a class, then\n        class_shadowed is a TREE_LIST.  The TREE_PURPOSE of each node\n-       is the name of an entity bound in the class; the TREE_VALUE is\n-       the IDENTIFIER_CLASS_VALUE before we entered the class.  Thus,\n-       when leaving class scope, we can restore the\n-       IDENTIFIER_CLASS_VALUE by walking this list.  The TREE_TYPE is\n+       is the name of an entity bound in the class.  The TREE_TYPE is\n        the DECL bound by this name in the class.  */\n     tree class_shadowed;\n \n     /* Similar to class_shadowed, but for IDENTIFIER_TYPE_VALUE, and\n-       is used for all binding levels.  */\n+       is used for all binding levels. In addition the TREE_VALUE is the\n+       IDENTIFIER_TYPE_VALUE before we entered the class.  */\n     tree type_shadowed;\n \n     /* A TREE_LIST.  Each TREE_VALUE is the LABEL_DECL for a local\n@@ -4408,9 +4406,8 @@ push_class_level_binding (name, x)\n       else\n \told_decl = BINDING_VALUE (binding);\n \n-      /* There was already a binding for X containing fewer\n-\t functions than are named in X.  Find the previous\n-\t declaration of X on the class-shadowed list, and update it.  */\n+      /* Find the previous binding of name on the class-shadowed\n+         list, and update it.  */\n       for (shadow = class_binding_level->class_shadowed;\n \t   shadow;\n \t   shadow = TREE_CHAIN (shadow))\n@@ -4420,17 +4417,17 @@ push_class_level_binding (name, x)\n \t    BINDING_VALUE (binding) = x;\n \t    INHERITED_VALUE_BINDING_P (binding) = 0;\n \t    TREE_TYPE (shadow) = x;\n+\t    IDENTIFIER_CLASS_VALUE (name) = x;\n \t    return;\n \t  }\n     }\n \n   /* If we didn't replace an existing binding, put the binding on the\n-     stack of bindings for the identifier, and update\n-     IDENTIFIER_CLASS_VALUE.  */\n+     stack of bindings for the identifier, and update the shadowed list.  */\n   if (push_class_binding (name, x))\n     {\n       class_binding_level->class_shadowed\n-\t= tree_cons (name, IDENTIFIER_CLASS_VALUE (name),\n+\t= tree_cons (name, NULL,\n \t\t     class_binding_level->class_shadowed);\n       /* Record the value we are binding NAME to so that we can know\n \t what to pop later.  */"}, {"sha": "0e7dd5ac5aa14631bba09209d98bf15358467d59", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=76191fdd29924d1d6a0b6f7d5696d73988e8411e", "patch": "@@ -1,3 +1,7 @@\n+2001-01-08  Nathan Sidwell  <nathan@acm.org>\n+\n+\t* g++.old-deja/g++.other/lookup16.C: Remove XFAIL.\n+\n 2001-01-07  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.c-torture/execute/stdio-opt-3.c: New test."}, {"sha": "150eb07aa0d0b17611d57913752dbdaed2c8c0b1", "filename": "gcc/testsuite/g++.old-deja/g++.other/lookup16.C", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Flookup16.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/76191fdd29924d1d6a0b6f7d5696d73988e8411e/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Flookup16.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Flookup16.C?ref=76191fdd29924d1d6a0b6f7d5696d73988e8411e", "patch": "@@ -2,11 +2,10 @@\n // Copyright (C) 1999 Free Software Foundation, Inc.\n // Contributed by Nathan Sidwell 25 Aug 1999 <nathan@acm.org>\n \n+// Bug 3\n // typenames are not injected early enough, [basic.scope.pdecl]3.3.1/4\n // indicates this should compile.\n \n-// excess errors test - XFAIL\n-\n struct A {\n };\n "}]}