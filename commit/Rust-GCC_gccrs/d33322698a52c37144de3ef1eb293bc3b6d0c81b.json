{"sha": "d33322698a52c37144de3ef1eb293bc3b6d0c81b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDMzMzIyNjk4YTUyYzM3MTQ0ZGUzZWYxZWIyOTNiYzNiNmQwYzgxYg==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-01-31T12:42:50Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1996-01-31T12:42:50Z"}, "message": "(sys/mc_param.h): Remove embedded asm.\n\nFrom-SVN: r11129", "tree": {"sha": "dcbf90a1bb482959319e5d46728a85d226932461", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dcbf90a1bb482959319e5d46728a85d226932461"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d33322698a52c37144de3ef1eb293bc3b6d0c81b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d33322698a52c37144de3ef1eb293bc3b6d0c81b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d33322698a52c37144de3ef1eb293bc3b6d0c81b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d33322698a52c37144de3ef1eb293bc3b6d0c81b/comments", "author": null, "committer": null, "parents": [{"sha": "b27804a87663e6fa09dd2d56cda678c3abf93dd9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b27804a87663e6fa09dd2d56cda678c3abf93dd9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b27804a87663e6fa09dd2d56cda678c3abf93dd9"}], "stats": {"total": 60, "additions": 59, "deletions": 1}, "files": [{"sha": "d66998dd17a19d65241f6e3f46f4941bd4a5d4ee", "filename": "gcc/fixinc.ptx", "status": "modified", "additions": 59, "deletions": 1, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d33322698a52c37144de3ef1eb293bc3b6d0c81b/gcc%2Ffixinc.ptx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d33322698a52c37144de3ef1eb293bc3b6d0c81b/gcc%2Ffixinc.ptx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc.ptx?ref=d33322698a52c37144de3ef1eb293bc3b6d0c81b", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n # Install modified versions of certain ANSI-incompatible\n # native Sequent DYNIX/ptx System V Release 3.2 system include files.\n-# Copyright (C) 1994 Free Software Foundation, Inc.\n+# Copyright (C) 1994, 1996 Free Software Foundation, Inc.\n # Contributed by Bill Burton <billb@progress.com>\n # Portions adapted from fixinc.svr4 and fixincludes.\n #\n@@ -193,5 +193,63 @@ if [ \\! -z \"$file_to_fix\" ]; then\n   fi\n fi\n \n+# /usr/include/sys/mc_param.h has an embedded asm for the cpuid intruction\n+# on the P5. This is not used by anything else so we ifdef it out.\n+file=sys/mc_param.h\n+if [ -r ${LIB}/$file ]; then\n+  file_to_fix=${LIB}/$file\n+else\n+  if [ -r ${INPUT}/$file ]; then\n+    file_to_fix=${INPUT}/$file\n+  else\n+    file_to_fix=\"\"\n+  fi\n+fi\n+if [ \\! -z \"$file_to_fix\" ]; then\n+  echo Checking $file_to_fix\n+  if grep __GNUC__ $file_to_fix > /dev/null; then\n+    true\n+  else\n+    sed -e '/__asm/,/}/{\n+/__asm/i\\\n+#if !defined (__GNUC__) && !defined (__GNUG__)\n+/}/a\\\n+#endif\n+}' \\\n+    $file_to_fix > ${LIB}/${file}.sed\n+    rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+    echo Fixed $file_to_fix\n+  fi\n+fi\n+\n+# /usr/include/sys/mc_param.h has an embedded asm for the cpuid intruction\n+# on the P5. This is not used by anything else so we ifdef it out.\n+file=sys/mc_param.h\n+if [ -r ${LIB}/$file ]; then\n+  file_to_fix=${LIB}/$file\n+else\n+  if [ -r ${INPUT}/$file ]; then\n+    file_to_fix=${INPUT}/$file\n+  else\n+    file_to_fix=\"\"\n+  fi\n+fi\n+if [ \\! -z \"$file_to_fix\" ]; then\n+  echo Checking $file_to_fix\n+  if grep __GNUC__ $file_to_fix > /dev/null; then\n+    true\n+  else\n+    sed -e '/__asm/,/}/{\n+/__asm/i\\\n+#if !defined (__GNUC__) && !defined (__GNUG__)\n+/}/a\\\n+#endif\n+}' \\\n+    $file_to_fix > ${LIB}/${file}.sed\n+    rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+    echo Fixed $file_to_fix\n+  fi\n+fi\n+\n exit 0\n "}]}