{"sha": "33dde1e155b86aa684a75b0820f6af368f046507", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNkZGUxZTE1NWI4NmFhNjg0YTc1YjA4MjBmNmFmMzY4ZjA0NjUwNw==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2006-12-20T22:45:42Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2006-12-20T22:45:42Z"}, "message": "tree-dfa.c (add_referenced_var): Walk initializers of non-constant/readonly static vars.\n\n\t* tree-dfa.c (add_referenced_var): Walk initializers of\n\tnon-constant/readonly static vars.\n\nFrom-SVN: r120090", "tree": {"sha": "a2fec6c9ebf71881ab6fe59d10b7f82e28154a37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2fec6c9ebf71881ab6fe59d10b7f82e28154a37"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33dde1e155b86aa684a75b0820f6af368f046507", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33dde1e155b86aa684a75b0820f6af368f046507", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33dde1e155b86aa684a75b0820f6af368f046507", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33dde1e155b86aa684a75b0820f6af368f046507/comments", "author": null, "committer": null, "parents": [{"sha": "adb6509f4b75e929a237ded6d182f8524697fedf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb6509f4b75e929a237ded6d182f8524697fedf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adb6509f4b75e929a237ded6d182f8524697fedf"}], "stats": {"total": 15, "additions": 9, "deletions": 6}, "files": [{"sha": "066065427ad14ceb1776730e55727306d4e5a2de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33dde1e155b86aa684a75b0820f6af368f046507/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33dde1e155b86aa684a75b0820f6af368f046507/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33dde1e155b86aa684a75b0820f6af368f046507", "patch": "@@ -1,3 +1,8 @@\n+2006-12-20  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-dfa.c (add_referenced_var): Walk initializers of\n+\tnon-constant/readonly static vars.\n+\n 2006-12-20  Jan Hubicka  <jh@suse.cz>\n \n \t* tree-flow-inline.h (gimple_var_anns): New function."}, {"sha": "9c30eb53e1914463a16dadad1fb8267a0cd433d0", "filename": "gcc/tree-dfa.c", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33dde1e155b86aa684a75b0820f6af368f046507/gcc%2Ftree-dfa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33dde1e155b86aa684a75b0820f6af368f046507/gcc%2Ftree-dfa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dfa.c?ref=33dde1e155b86aa684a75b0820f6af368f046507", "patch": "@@ -741,15 +741,13 @@ add_referenced_var (tree var)\n \n       /* Scan DECL_INITIAL for pointer variables as they may contain\n \t address arithmetic referencing the address of other\n-\t variables.  */\n+\t variables.  \n+\t Even non-constant intializers need to be walked, because\n+\t IPA passes might prove that their are invariant later on.  */\n       if (DECL_INITIAL (var)\n \t  /* Initializers of external variables are not useful to the\n \t     optimizers.  */\n-          && !DECL_EXTERNAL (var)\n-\t  /* It's not necessary to walk the initial value of non-constant\n-\t     variables because it cannot be propagated by the\n-\t     optimizers.  */\n-\t  && (TREE_CONSTANT (var) || TREE_READONLY (var)))\n+          && !DECL_EXTERNAL (var))\n       \twalk_tree (&DECL_INITIAL (var), find_vars_r, NULL, 0);\n     }\n }"}]}