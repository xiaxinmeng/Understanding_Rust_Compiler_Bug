{"sha": "8e6dce3de77bcb858920d02e0f4e00159658d555", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGU2ZGNlM2RlNzdiY2I4NTg5MjBkMDJlMGY0ZTAwMTU5NjU4ZDU1NQ==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2015-06-15T16:34:53Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2015-06-15T16:34:53Z"}, "message": "re PR debug/66535 (segfault in gen_subprogram_die after debug-early merge)\n\n\tPR debug/66535\n\t* dwarf2out.c (gen_subprogram_die): Do not check a parent's tag if\n\tthere is no parent.\n\nFrom-SVN: r224486", "tree": {"sha": "be9d1723f1337dc4aa9bdc5c56ce111f2bb5937a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be9d1723f1337dc4aa9bdc5c56ce111f2bb5937a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8e6dce3de77bcb858920d02e0f4e00159658d555", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e6dce3de77bcb858920d02e0f4e00159658d555", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e6dce3de77bcb858920d02e0f4e00159658d555", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e6dce3de77bcb858920d02e0f4e00159658d555/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fb5b53524691063bc8dd9014b5f1b05ce3d1c0aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fb5b53524691063bc8dd9014b5f1b05ce3d1c0aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fb5b53524691063bc8dd9014b5f1b05ce3d1c0aa"}], "stats": {"total": 70, "additions": 69, "deletions": 1}, "files": [{"sha": "48b9ca72059124147d720853c7b6bc768fdbfbf3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8e6dce3de77bcb858920d02e0f4e00159658d555", "patch": "@@ -1,3 +1,9 @@\n+2015-06-15  Aldy Hernandez  <aldyh@redhat.com>\n+\n+\tPR debug/66535\n+\t* dwarf2out.c (gen_subprogram_die): Do not check a parent's tag if\n+\tthere is no parent.\n+\n 2015-06-14  Shiva Chen  <shiva0217@gmail.com>\n \n \t* aarch64.c (aarch64_simd_lane_bounds): Change %ld to %wd for"}, {"sha": "4fe33f8a8b99aa827853b470a8a0fa8a943c5f6e", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=8e6dce3de77bcb858920d02e0f4e00159658d555", "patch": "@@ -18790,7 +18790,8 @@ gen_subprogram_die (tree decl, dw_die_ref context_die)\n \t\t   end function\n \t\t end module\n \t   */\n-\t   || old_die->die_parent->die_tag == DW_TAG_module\n+\t   || (old_die->die_parent\n+\t       && old_die->die_parent->die_tag == DW_TAG_module)\n \t   || context_die == NULL)\n \t   && (DECL_ARTIFICIAL (decl)\n \t       || (get_AT_file (old_die, DW_AT_decl_file) == file_index"}, {"sha": "1ec37c2aa3b0d8b64e743d1d32c30de549966fdd", "filename": "gcc/testsuite/gnat.dg/debug4.adb", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4.adb?ref=8e6dce3de77bcb858920d02e0f4e00159658d555", "patch": "@@ -0,0 +1,10 @@\n+-- { dg-compile }\n+-- { dg-options \"-g\" }\n+\n+with Debug4_Pkg;\n+\n+procedure Debug4 is\n+   package P is new Debug4_Pkg (Natural);\n+begin\n+   null;\n+end;"}, {"sha": "18ba0c02e739742e826765565d9093211ff3a806", "filename": "gcc/testsuite/gnat.dg/debug4_pkg.adb", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4_pkg.adb?ref=8e6dce3de77bcb858920d02e0f4e00159658d555", "patch": "@@ -0,0 +1,23 @@\n+package body Debug4_Pkg is\n+\n+   type Vertex_To_Vertex_T is array (Vertex_Id range <>) of Vertex_Id;\n+\n+   function Dominator_Tree_Internal (G : T'Class) return Vertex_To_Vertex_T is\n+      subtype V_To_V is Vertex_To_Vertex_T (0 .. G.Vertices.Last_Index);\n+      type V_To_VIL is array\n+        (Valid_Vertex_Id range 1 .. G.Vertices.Last_Index)\n+        of Vertex_Index_List;\n+      Bucket : V_To_VIL := (others => VIL.Empty_Vector);\n+      Dom    : V_To_V   := (others => 0);\n+   begin\n+      return Dom;\n+   end;\n+\n+   function Dominator_Tree (G : T'Class) return T is\n+      Dom : constant Vertex_To_Vertex_T := Dominator_Tree_Internal (G);\n+      DT  : T := (Vertices => VL.Empty_Vector);\n+   begin\n+      return DT;\n+   end;\n+\n+end Debug4_Pkg;"}, {"sha": "bac4953f6bc53d7e67e74c9acce3272ad6319124", "filename": "gcc/testsuite/gnat.dg/debug4_pkg.ads", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8e6dce3de77bcb858920d02e0f4e00159658d555/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fdebug4_pkg.ads?ref=8e6dce3de77bcb858920d02e0f4e00159658d555", "patch": "@@ -0,0 +1,28 @@\n+with Ada.Containers.Vectors;\n+\n+generic\n+   type Vertex_Key is private;\n+package Debug4_Pkg is\n+\n+   type Vertex_Id is new Natural;\n+   subtype Valid_Vertex_Id is Vertex_Id range 1 .. Vertex_Id'Last;\n+\n+   package VIL is new Ada.Containers.Vectors\n+     (Index_Type   => Positive,\n+      Element_Type => Valid_Vertex_Id);\n+   use VIL;\n+   subtype Vertex_Index_List is VIL.Vector;\n+\n+   package VL is new Ada.Containers.Vectors\n+     (Index_Type   => Valid_Vertex_Id,\n+      Element_Type => Vertex_Key);\n+   use VL;\n+   subtype Vertex_List is VL.Vector;\n+\n+   type T is tagged record\n+      Vertices : Vertex_List;\n+   end record;\n+\n+   function Dominator_Tree (G : T'Class) return T;\n+\n+end Debug4_Pkg;"}]}