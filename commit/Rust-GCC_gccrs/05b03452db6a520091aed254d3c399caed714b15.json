{"sha": "05b03452db6a520091aed254d3c399caed714b15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDViMDM0NTJkYjZhNTIwMDkxYWVkMjU0ZDNjMzk5Y2FlZDcxNGIxNQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2020-11-07T01:41:54Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2020-11-09T20:16:38Z"}, "message": "c++: Improve error location for class using-decl.\n\nWe should use the location of the using-declaration, not the location of the\nclass.\n\ngcc/cp/ChangeLog:\n\n\t* class.c (handle_using_decl): Add an iloc_sentinel.\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/lookup/using26.C: Adjust location.\n\t* g++.old-deja/g++.other/using1.C: Adjust location.", "tree": {"sha": "282e4a45f1682c051cda8ed71b257c7564135375", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/282e4a45f1682c051cda8ed71b257c7564135375"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/05b03452db6a520091aed254d3c399caed714b15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05b03452db6a520091aed254d3c399caed714b15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05b03452db6a520091aed254d3c399caed714b15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05b03452db6a520091aed254d3c399caed714b15/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "38b17c27ce5a8e0cc5baa14697d4b5542b91b9d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38b17c27ce5a8e0cc5baa14697d4b5542b91b9d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38b17c27ce5a8e0cc5baa14697d4b5542b91b9d1"}], "stats": {"total": 12, "additions": 7, "deletions": 5}, "files": [{"sha": "7c34d9466fcc5f7a00098a5f4199d7ec317ed163", "filename": "gcc/cp/class.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05b03452db6a520091aed254d3c399caed714b15/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05b03452db6a520091aed254d3c399caed714b15/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=05b03452db6a520091aed254d3c399caed714b15", "patch": "@@ -1,4 +1,4 @@\n-/* Functions related to building classes and their related objects.\n+/* Functions related to building -*- C++ -*- classes and their related objects.\n    Copyright (C) 1987-2020 Free Software Foundation, Inc.\n    Contributed by Michael Tiemann (tiemann@cygnus.com)\n \n@@ -1322,6 +1322,8 @@ handle_using_decl (tree using_decl, tree t)\n       return;\n     }\n \n+  iloc_sentinel ils (DECL_SOURCE_LOCATION (using_decl));\n+\n   /* Make type T see field decl FDECL with access ACCESS.  */\n   if (flist)\n     for (ovl_iterator iter (flist); iter; ++iter)"}, {"sha": "dd4e13039d74a42cefed687247494a38732d10a2", "filename": "gcc/testsuite/g++.dg/lookup/using26.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05b03452db6a520091aed254d3c399caed714b15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing26.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05b03452db6a520091aed254d3c399caed714b15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing26.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Flookup%2Fusing26.C?ref=05b03452db6a520091aed254d3c399caed714b15", "patch": "@@ -17,9 +17,9 @@ struct C\n     int next;\n };\n \n-struct D : A, B, C // { dg-error \"context\" }\n+struct D : A, B, C\n {\n-    using B::next;\n+    using B::next; // { dg-error \"context\" }\n     void f()\n     {\n \tnext = 12;"}, {"sha": "89100918a1ecaf11ccf916bed64f093e3e1eb59d", "filename": "gcc/testsuite/g++.old-deja/g++.other/using1.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/05b03452db6a520091aed254d3c399caed714b15/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fusing1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/05b03452db6a520091aed254d3c399caed714b15/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fusing1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fusing1.C?ref=05b03452db6a520091aed254d3c399caed714b15", "patch": "@@ -10,9 +10,9 @@ protected:\n   friend class D2;\n };\n \n-class D : public B { // { dg-error \"\" } within this context\n+class D : public B {\n public:\n-  using B::a;\n+  using B::a; // { dg-error \"\" } within this context\n   using B::b;\n };\n "}]}