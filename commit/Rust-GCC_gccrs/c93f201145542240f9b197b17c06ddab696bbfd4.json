{"sha": "c93f201145542240f9b197b17c06ddab696bbfd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzkzZjIwMTE0NTU0MjI0MGY5YjE5N2IxN2MwNmRkYWI2OTZiYmZkNA==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2015-02-05T11:17:25Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2015-02-05T11:17:25Z"}, "message": "g-rannum.adb, [...]: Minor reformatting.\n\n2015-02-05  Robert Dewar  <dewar@adacore.com>\n\n\t* g-rannum.adb, g-rannum.ads, s-rannum.adb, s-rannum.ads,\n\tsem_warn.ads: Minor reformatting.\n\t* exp_ch13.adb (Expand_N_Freeze_Entity): Add guard for aspect\n\tdeleted by -gnatI.\n\t* sem_prag.adb (Analyze_Pragma, case Type_Invariant): Give\n\terror for abstract type.\n\nFrom-SVN: r220445", "tree": {"sha": "ac9371e2bf91d0005b7f52c36eb36a0184fe05d6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac9371e2bf91d0005b7f52c36eb36a0184fe05d6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c93f201145542240f9b197b17c06ddab696bbfd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c93f201145542240f9b197b17c06ddab696bbfd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c93f201145542240f9b197b17c06ddab696bbfd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c93f201145542240f9b197b17c06ddab696bbfd4/comments", "author": null, "committer": null, "parents": [{"sha": "71140fc6ca792f3666e126b5eec4640193741ae2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71140fc6ca792f3666e126b5eec4640193741ae2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71140fc6ca792f3666e126b5eec4640193741ae2"}], "stats": {"total": 34, "additions": 27, "deletions": 7}, "files": [{"sha": "acadafe214c6681620e64e2260f7dcbacb461916", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -1,3 +1,12 @@\n+2015-02-05  Robert Dewar  <dewar@adacore.com>\n+\n+\t* g-rannum.adb, g-rannum.ads, s-rannum.adb, s-rannum.ads,\n+\tsem_warn.ads: Minor reformatting.\n+\t* exp_ch13.adb (Expand_N_Freeze_Entity): Add guard for aspect\n+\tdeleted by -gnatI.\n+\t* sem_prag.adb (Analyze_Pragma, case Type_Invariant): Give\n+\terror for abstract type.\n+\n 2015-02-05  Yannick Moy  <moy@adacore.com>\n \n \t* opt.ads (Warn_On_Suspicious_Contract): Update comment"}, {"sha": "65fa3238a4934cecab7d44adbb9fb96ef372e39d", "filename": "gcc/ada/exp_ch13.adb", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fexp_ch13.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fexp_ch13.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fexp_ch13.adb?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 1992-2014, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1992-2015, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -400,7 +400,14 @@ package body Exp_Ch13 is\n                   --  Skip this for aspects (e.g. Current_Value) for which\n                   --  there is no corresponding pragma or attribute.\n \n-                  if Present (Aitem) then\n+                  if Present (Aitem)\n+\n+                    --  Also skip if we have a null statement rather than a\n+                    --  delayed aspect (this happens when we are ignoring rep\n+                    --  items from use of the -gnatI switch).\n+\n+                    and then Nkind (Aitem) /= N_Null_Statement\n+                  then\n                      pragma Assert (Is_Delayed_Aspect (Aitem));\n                      Insert_Before (N, Aitem);\n                   end if;"}, {"sha": "3e802eeeaa91b48b75ba7a4ad5c330e3a27bba03", "filename": "gcc/ada/g-rannum.adb", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fg-rannum.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fg-rannum.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-rannum.adb?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -38,7 +38,6 @@ with System.Random_Numbers; use System.Random_Numbers;\n package body GNAT.Random_Numbers with\n   SPARK_Mode => Off\n is\n-\n    Sys_Max_Image_Width : constant := System.Random_Numbers.Max_Image_Width;\n \n    subtype Image_String is String (1 .. Max_Image_Width);"}, {"sha": "cf2889c45816ea74f6aeade2732666d439fe3cd5", "filename": "gcc/ada/g-rannum.ads", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fg-rannum.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fg-rannum.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fg-rannum.ads?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -57,7 +57,6 @@ with Interfaces; use Interfaces;\n package GNAT.Random_Numbers with\n   SPARK_Mode => Off\n is\n-\n    type Generator is limited private;\n    subtype Initialization_Vector is\n      System.Random_Numbers.Initialization_Vector;"}, {"sha": "f722f6c0254fdfedc3526d1b643e6502bdca2b76", "filename": "gcc/ada/s-rannum.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fs-rannum.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fs-rannum.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-rannum.adb?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -97,8 +97,8 @@ use Ada;\n package body System.Random_Numbers with\n   SPARK_Mode => Off\n is\n-\n    Image_Numeral_Length : constant := Max_Image_Width / N;\n+\n    subtype Image_String is String (1 .. Max_Image_Width);\n \n    ----------------------------"}, {"sha": "a98631158e851950f954ec8023c403f4f31544b1", "filename": "gcc/ada/s-rannum.ads", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fs-rannum.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fs-rannum.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-rannum.ads?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -60,7 +60,6 @@ with Interfaces;\n package System.Random_Numbers with\n   SPARK_Mode => Off\n is\n-\n    type Generator is limited private;\n    --  Generator encodes the current state of a random number stream, it is\n    --  provided as input to produce the next random number, and updated so"}, {"sha": "8951059c98b889f4e4d319cee9552a54a07fa4fb", "filename": "gcc/ada/sem_prag.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fsem_prag.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fsem_prag.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_prag.adb?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -15704,6 +15704,13 @@ package body Sem_Prag is\n                  (\"pragma% only allowed for private type\", Arg1);\n             end if;\n \n+            --  Not allowed for abstract type\n+\n+            if Is_Abstract_Type (Typ) then\n+               Error_Pragma_Arg\n+                 (\"pragma% not allowed for abstract type\", Arg1);\n+            end if;\n+\n             --  Note that the type has at least one invariant, and also that\n             --  it has inheritable invariants if we have Invariant'Class\n             --  or Type_Invariant'Class. Build the corresponding invariant"}, {"sha": "b1f2af22da11e8fed9f4083529f5cddc51bd4ebb", "filename": "gcc/ada/sem_warn.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fsem_warn.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c93f201145542240f9b197b17c06ddab696bbfd4/gcc%2Fada%2Fsem_warn.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_warn.ads?ref=c93f201145542240f9b197b17c06ddab696bbfd4", "patch": "@@ -217,7 +217,7 @@ package Sem_Warn is\n    procedure Warn_On_Suspicious_Update (N : Node_Id);\n    --  N is a semantically analyzed attribute reference Prefix'Update. Issue\n    --  a warning if Warn_On_Suspicious_Contract is set, and N is the left-hand\n-   --  side or right-hand side of an equality or disequality of the form:\n+   --  side or right-hand side of an equality or inequality of the form:\n    --    Prefix = Prefix'Update(...)\n    --  or\n    --    Prefix'Update(...) = Prefix"}]}