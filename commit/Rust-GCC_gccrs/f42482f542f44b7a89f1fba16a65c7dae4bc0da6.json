{"sha": "f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjQyNDgyZjU0MmY0NGI3YTg5ZjFmYmExNmE2NWM3ZGFlNGJjMGRhNg==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2006-07-10T19:32:51Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2006-07-10T19:32:51Z"}, "message": "re PR libstdc++/15448 (libstdc++ does not rebuild PCH)\n\n2006-07-10  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/15448\n\t* include/Makefile.am: Clean up pch rules.\n\t* include/Makefile.in: Regenerate.\n\nFrom-SVN: r115312", "tree": {"sha": "03f10585bdf1ef7d6d866435ed1c2e5469dee2ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/03f10585bdf1ef7d6d866435ed1c2e5469dee2ad"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/comments", "author": null, "committer": null, "parents": [{"sha": "b24f7f6b322aa46f91b1424a50085274a6762395", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b24f7f6b322aa46f91b1424a50085274a6762395", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b24f7f6b322aa46f91b1424a50085274a6762395"}], "stats": {"total": 115, "additions": 66, "deletions": 49}, "files": [{"sha": "153eb82065795c47df280e5a4f18365e0ee75303", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "patch": "@@ -1,3 +1,9 @@\n+2006-07-10  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/15448\n+\t* include/Makefile.am: Clean up pch rules.\n+\t* include/Makefile.in: Regenerate.\n+\n 2006-07-09  Paolo Carlini  <pcarlini@suse.de>\n \n \t* include/bits/locale_facets.tcc (__int_to_char<>(_CharT*,"}, {"sha": "2f9ee2ef58870944e53562d2a58a92797e0ed8a4", "filename": "libstdc++-v3/include/Makefile.am", "status": "modified", "additions": 30, "deletions": 25, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/libstdc%2B%2B-v3%2Finclude%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/libstdc%2B%2B-v3%2Finclude%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2FMakefile.am?ref=f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "patch": "@@ -763,26 +763,31 @@ thread_host_headers = \\\n \t${host_builddir}/gthr-tpf.h \\\n \t${host_builddir}/gthr-default.h\n \n-pch1_input = ${host_builddir}/stdc++.h\n+\n+pch1_source = ${glibcxx_srcdir}/include/precompiled/stdc++.h\n pch1_output_builddir = ${host_builddir}/stdc++.h.gch\n pch1_output_installdir = ${host_installdir}/stdc++.h.gch\n-pch1_source = ${glibcxx_srcdir}/include/precompiled/stdc++.h\n+pch1a_output = ${pch1_output_builddir}/O0g.gch\n+pch1b_output = ${pch1_output_builddir}/O2g.gch\n+pch1_output = ${pch1a_output} ${pch1b_output}\n \n-pch2_input = ${host_builddir}/stdtr1c++.h\n+pch2_source = ${glibcxx_srcdir}/include/precompiled/stdtr1c++.h\n pch2_output_builddir = ${host_builddir}/stdtr1c++.h.gch\n pch2_output_installdir = ${host_installdir}/stdtr1c++.h.gch\n-pch2_source = ${glibcxx_srcdir}/include/precompiled/stdtr1c++.h\n+pch2_output = ${pch2_output_builddir}/O2g.gch\n \n-pch3_input = ${host_builddir}/extc++.h\n+pch3_source = ${glibcxx_srcdir}/include/precompiled/extc++.h\n pch3_output_builddir = ${host_builddir}/extc++.h.gch\n pch3_output_installdir = ${host_installdir}/extc++.h.gch\n-pch3_source = ${glibcxx_srcdir}/include/precompiled/extc++.h\n+pch3_output = ${pch3_output_builddir}/O2g.gch\n+\n \n-pch_input = ${pch1_input} ${pch2_input} ${pch3_input}\n-pch_output = ${pch1_output_builddir} ${pch2_output_builddir} ${pch3_output_builddir}\n+pch_output = ${pch1_output} ${pch2_output} ${pch3_output}\n+pch_output_dirs = \\\n+\t${pch1_output_builddir} ${pch2_output_builddir} ${pch3_output_builddir}\n PCHFLAGS=-Winvalid-pch -Wno-deprecated -x c++-header $(CXXFLAGS)\n if GLIBCXX_BUILD_PCH\n-pch_build = ${pch_input}\n+pch_build = ${pch_output}\n pch_install = install-pch\n else\n pch_build =\n@@ -1038,32 +1043,32 @@ ${host_builddir}/gthr-default.h: ${toplevel_srcdir}/gcc/${glibcxx_thread_h} \\\n \t    -e 's,^#include \"\\(.*\\)\",#include <bits/\\1>,g' \\\n \t    < ${toplevel_srcdir}/gcc/${glibcxx_thread_h} > $@\n \n-# Build a precompiled C++ include, stdc++.h.gch.\n-${pch1_input}: ${allstamped} ${host_builddir}/c++config.h ${pch1_source}\n-\ttouch ${pch1_input}; \\\n+# Build two precompiled C++ includes, stdc++.h.gch/*.gch\n+${pch1a_output}: ${allstamped} ${host_builddir}/c++config.h ${pch1_source}\n \tif [ ! -d \"${pch1_output_builddir}\" ]; then \\\n \t  mkdir -p ${pch1_output_builddir}; \\\n \tfi; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch1_source} -O0 -g -o ${pch1_output_builddir}/O0g.gch; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch1_source} -O2 -g -o ${pch1_output_builddir}/O2g.gch;\n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O0 -g ${pch1_source} -o $@\n \n+${pch1b_output}: ${allstamped} ${host_builddir}/c++config.h ${pch1_source}\n+\tif [ ! -d \"${pch1_output_builddir}\" ]; then \\\n+\t  mkdir -p ${pch1_output_builddir}; \\\n+\tfi; \\\n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O2 -g ${pch1_source} -o $@\n \n-# Build a precompiled TR1 include, stdtr1c++.h.gch.\n-${pch2_input}: ${allstamped} ${host_builddir}/c++config.h ${pch2_source} ${pch1_input}\n-\ttouch ${pch2_input}; \\\n+# Build a precompiled TR1 include, stdtr1c++.h.gch/O2.gch\n+${pch2_output}: ${pch2_source} ${pch1_output}\n \tif [ ! -d \"${pch2_output_builddir}\" ]; then \\\n \t  mkdir -p ${pch2_output_builddir}; \\\n \tfi; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch2_source} -O2 -g -o ${pch2_output_builddir}/O2g.gch; \n-\n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O2 -g ${pch2_source} -o $@\n \n-# Build a precompiled extension include, extc++.h.gch.\n-${pch3_input}: ${allstamped} ${host_builddir}/c++config.h ${pch3_source} ${pch2_input}\n-\ttouch ${pch3_input}; \\\n+# Build a precompiled extension include, extc++.h.gch/O2.gch\n+${pch3_output}: ${pch3_source} ${pch2_output}\n \tif [ ! -d \"${pch3_output_builddir}\" ]; then \\\n \t  mkdir -p ${pch3_output_builddir}; \\\n \tfi; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch3_source} -O2 -g -o ${pch3_output_builddir}/O2g.gch; \n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O2 -g ${pch3_source} -o $@\n \n \n # For robustness sake (in light of junk files or in-source\n@@ -1172,11 +1177,11 @@ install-pch:\n \t  $(INSTALL_DATA) $$file $(DESTDIR)${pch2_output_installdir}; done\n \n # By adding these files here, automake will remove them for 'make clean'\n-CLEANFILES = ${pch_input} \n+CLEANFILES = ${pch_output} \n \n # To remove directories.\n clean-local:\n-\trm -rf ${pch_output}\n+\trm -rf ${pch_output_dirs}\n \n # Stop implicit '.o' make rules from ever stomping on extensionless\n # headers, in the improbable case where some foolish, crack-addled"}, {"sha": "9c6e532ea425a16686543e299076bb8c5a6dd328", "filename": "libstdc++-v3/include/Makefile.in", "status": "modified", "additions": 30, "deletions": 24, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/libstdc%2B%2B-v3%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f42482f542f44b7a89f1fba16a65c7dae4bc0da6/libstdc%2B%2B-v3%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2FMakefile.in?ref=f42482f542f44b7a89f1fba16a65c7dae4bc0da6", "patch": "@@ -978,23 +978,27 @@ thread_host_headers = \\\n \t${host_builddir}/gthr-tpf.h \\\n \t${host_builddir}/gthr-default.h\n \n-pch1_input = ${host_builddir}/stdc++.h\n+pch1_source = ${glibcxx_srcdir}/include/precompiled/stdc++.h\n pch1_output_builddir = ${host_builddir}/stdc++.h.gch\n pch1_output_installdir = ${host_installdir}/stdc++.h.gch\n-pch1_source = ${glibcxx_srcdir}/include/precompiled/stdc++.h\n-pch2_input = ${host_builddir}/stdtr1c++.h\n+pch1a_output = ${pch1_output_builddir}/O0g.gch\n+pch1b_output = ${pch1_output_builddir}/O2g.gch\n+pch1_output = ${pch1a_output} ${pch1b_output}\n+pch2_source = ${glibcxx_srcdir}/include/precompiled/stdtr1c++.h\n pch2_output_builddir = ${host_builddir}/stdtr1c++.h.gch\n pch2_output_installdir = ${host_installdir}/stdtr1c++.h.gch\n-pch2_source = ${glibcxx_srcdir}/include/precompiled/stdtr1c++.h\n-pch3_input = ${host_builddir}/extc++.h\n+pch2_output = ${pch2_output_builddir}/O2g.gch\n+pch3_source = ${glibcxx_srcdir}/include/precompiled/extc++.h\n pch3_output_builddir = ${host_builddir}/extc++.h.gch\n pch3_output_installdir = ${host_installdir}/extc++.h.gch\n-pch3_source = ${glibcxx_srcdir}/include/precompiled/extc++.h\n-pch_input = ${pch1_input} ${pch2_input} ${pch3_input}\n-pch_output = ${pch1_output_builddir} ${pch2_output_builddir} ${pch3_output_builddir}\n+pch3_output = ${pch3_output_builddir}/O2g.gch\n+pch_output = ${pch1_output} ${pch2_output} ${pch3_output}\n+pch_output_dirs = \\\n+\t${pch1_output_builddir} ${pch2_output_builddir} ${pch3_output_builddir}\n+\n PCHFLAGS = -Winvalid-pch -Wno-deprecated -x c++-header $(CXXFLAGS)\n @GLIBCXX_BUILD_PCH_FALSE@pch_build = \n-@GLIBCXX_BUILD_PCH_TRUE@pch_build = ${pch_input}\n+@GLIBCXX_BUILD_PCH_TRUE@pch_build = ${pch_output}\n @GLIBCXX_BUILD_PCH_FALSE@pch_install = \n @GLIBCXX_BUILD_PCH_TRUE@pch_install = install-pch\n \n@@ -1017,7 +1021,7 @@ allcreated = \\\n uppercase = [ABCDEFGHIJKLMNOPQRSTUVWXYZ_]\n \n # By adding these files here, automake will remove them for 'make clean'\n-CLEANFILES = ${pch_input} \n+CLEANFILES = ${pch_output} \n all: all-am\n \n .SUFFIXES:\n@@ -1411,30 +1415,32 @@ ${host_builddir}/gthr-default.h: ${toplevel_srcdir}/gcc/${glibcxx_thread_h} \\\n \t    -e 's,^#include \"\\(.*\\)\",#include <bits/\\1>,g' \\\n \t    < ${toplevel_srcdir}/gcc/${glibcxx_thread_h} > $@\n \n-# Build a precompiled C++ include, stdc++.h.gch.\n-${pch1_input}: ${allstamped} ${host_builddir}/c++config.h ${pch1_source}\n-\ttouch ${pch1_input}; \\\n+# Build two precompiled C++ includes, stdc++.h.gch/*.gch\n+${pch1a_output}: ${allstamped} ${host_builddir}/c++config.h ${pch1_source}\n+\tif [ ! -d \"${pch1_output_builddir}\" ]; then \\\n+\t  mkdir -p ${pch1_output_builddir}; \\\n+\tfi; \\\n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O0 -g ${pch1_source} -o $@\n+\n+${pch1b_output}: ${allstamped} ${host_builddir}/c++config.h ${pch1_source}\n \tif [ ! -d \"${pch1_output_builddir}\" ]; then \\\n \t  mkdir -p ${pch1_output_builddir}; \\\n \tfi; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch1_source} -O0 -g -o ${pch1_output_builddir}/O0g.gch; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch1_source} -O2 -g -o ${pch1_output_builddir}/O2g.gch;\n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O2 -g ${pch1_source} -o $@\n \n-# Build a precompiled TR1 include, stdtr1c++.h.gch.\n-${pch2_input}: ${allstamped} ${host_builddir}/c++config.h ${pch2_source} ${pch1_input}\n-\ttouch ${pch2_input}; \\\n+# Build a precompiled TR1 include, stdtr1c++.h.gch/O2.gch\n+${pch2_output}: ${pch2_source} ${pch1_output}\n \tif [ ! -d \"${pch2_output_builddir}\" ]; then \\\n \t  mkdir -p ${pch2_output_builddir}; \\\n \tfi; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch2_source} -O2 -g -o ${pch2_output_builddir}/O2g.gch; \n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O2 -g ${pch2_source} -o $@\n \n-# Build a precompiled extension include, extc++.h.gch.\n-${pch3_input}: ${allstamped} ${host_builddir}/c++config.h ${pch3_source} ${pch2_input}\n-\ttouch ${pch3_input}; \\\n+# Build a precompiled extension include, extc++.h.gch/O2.gch\n+${pch3_output}: ${pch3_source} ${pch2_output}\n \tif [ ! -d \"${pch3_output_builddir}\" ]; then \\\n \t  mkdir -p ${pch3_output_builddir}; \\\n \tfi; \\\n-\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) ${pch3_source} -O2 -g -o ${pch3_output_builddir}/O2g.gch; \n+\t$(CXX) $(PCHFLAGS) $(AM_CPPFLAGS) -O2 -g ${pch3_source} -o $@\n \n # For robustness sake (in light of junk files or in-source\n # configuration), copy from the build or source tree to the install\n@@ -1540,7 +1546,7 @@ install-pch:\n \n # To remove directories.\n clean-local:\n-\trm -rf ${pch_output}\n+\trm -rf ${pch_output_dirs}\n \n # Stop implicit '.o' make rules from ever stomping on extensionless\n # headers, in the improbable case where some foolish, crack-addled"}]}