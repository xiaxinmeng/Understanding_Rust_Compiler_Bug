{"sha": "f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjFiYzZjYWVjNWZkYzFhZmZkMjA0N2Q1MTgxMzdmN2RlMzJjZDVkNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-07-10T08:04:14Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-07-10T08:04:14Z"}, "message": "re PR sanitizer/86406 ([UBSAN] -fcompare-debug failure with -fsanitize=undefined)\n\n\tPR sanitizer/86406\n\t* cp-gimplify.c (cp_maybe_instrument_return): Skip trailing\n\tDEBUG_BEGIN_STMTs.\n\n\t* g++.dg/ubsan/pr86406.C: New test.\n\nFrom-SVN: r262536", "tree": {"sha": "904c3855dc1228a36524cd48b32036d50eb601e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/904c3855dc1228a36524cd48b32036d50eb601e2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "100291de48d70d56f8ec31e8ba8d9edd1ee95b45", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/100291de48d70d56f8ec31e8ba8d9edd1ee95b45", "html_url": "https://github.com/Rust-GCC/gccrs/commit/100291de48d70d56f8ec31e8ba8d9edd1ee95b45"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "5fc7f05d3d05c5b102ef0ad10fb3b2e734b50195", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "patch": "@@ -1,5 +1,9 @@\n 2018-07-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR sanitizer/86406\n+\t* cp-gimplify.c (cp_maybe_instrument_return): Skip trailing\n+\tDEBUG_BEGIN_STMTs.\n+\n \tPR c++/86443\n \t* semantics.c (handle_omp_for_class_iterator): Remove lastp argument,\n \tinstead of setting *lastp turn orig_declv elt into a TREE_LIST."}, {"sha": "145af26f18db6b36a4ed3d2d39d49d48816be2f1", "filename": "gcc/cp/cp-gimplify.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Fcp%2Fcp-gimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Fcp%2Fcp-gimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-gimplify.c?ref=f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "patch": "@@ -1621,6 +1621,13 @@ cp_maybe_instrument_return (tree fndecl)\n \tcase STATEMENT_LIST:\n \t  {\n \t    tree_stmt_iterator i = tsi_last (t);\n+\t    while (!tsi_end_p (i))\n+\t      {\n+\t\ttree p = tsi_stmt (i);\n+\t\tif (TREE_CODE (p) != DEBUG_BEGIN_STMT)\n+\t\t  break;\n+\t\ttsi_prev (&i);\n+\t      }\n \t    if (!tsi_end_p (i))\n \t      {\n \t\tt = tsi_stmt (i);"}, {"sha": "da079abfd5b6a2488fbb5abbc76c8f2477ee2b37", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "patch": "@@ -1,5 +1,8 @@\n 2018-07-10  Jakub Jelinek  <jakub@redhat.com>\n \n+\tPR sanitizer/86406\n+\t* g++.dg/ubsan/pr86406.C: New test.\n+\n \tPR fortran/86421\n \t* gfortran.dg/vect/pr86421.f90: New test.\n "}, {"sha": "1a0f4786a0f5737375429a0560313629e4774c95", "filename": "gcc/testsuite/g++.dg/ubsan/pr86406.C", "status": "added", "additions": 33, "deletions": 0, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr86406.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f1bc6caec5fdc1affd2047d518137f7de32cd5d6/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr86406.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fubsan%2Fpr86406.C?ref=f1bc6caec5fdc1affd2047d518137f7de32cd5d6", "patch": "@@ -0,0 +1,33 @@\n+// PR sanitizer/86406\n+// { dg-do compile }\n+// { dg-options \"-fcompare-debug -fsanitize=undefined -g -O1\" }\n+\n+typedef enum { } cmd_status;\n+class ECell;\n+class ECell_const_ptr { };\n+class ECell_ptr\n+{\n+  ECell *mp_element;\n+  ECell *getPointer () const { return mp_element; }\n+public:\n+  operator  ECell_const_ptr () const { return ECell_const_ptr(); }\n+};\n+\n+extern ECell_ptr NULL_CELL;\n+class VwUI_2DCellLayerView;\n+class view_cell_layoutImpl\n+{\n+  cmd_status handleChangeFlags (VwUI_2DCellLayerView *\n+                                      p_ui_celllayerview,\n+                                      ECell_const_ptr p_peekCell);\n+  cmd_status openCellLayoutView ();\n+};\n+\n+cmd_status\n+view_cell_layoutImpl::openCellLayoutView ()\n+{\n+  ECell_const_ptr pcell = NULL_CELL;\n+  VwUI_2DCellLayerView *p_user_interface;\n+  return handleChangeFlags (p_user_interface, pcell);\n+  ;\n+}"}]}