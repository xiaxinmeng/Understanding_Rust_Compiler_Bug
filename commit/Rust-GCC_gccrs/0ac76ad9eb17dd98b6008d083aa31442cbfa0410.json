{"sha": "0ac76ad9eb17dd98b6008d083aa31442cbfa0410", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGFjNzZhZDllYjE3ZGQ5OGI2MDA4ZDA4M2FhMzE0NDJjYmZhMDQxMA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-07-08T21:17:51Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-07-08T21:17:51Z"}, "message": "final.c (final): Do not abort when reg-stack introduces a new insn.\n\n        * final.c (final): Do not abort when reg-stack introduces\n        a new insn.\n\nFrom-SVN: r34927", "tree": {"sha": "2a4f85145da2b66955f3fdbbb4bc25085518d1b1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a4f85145da2b66955f3fdbbb4bc25085518d1b1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ac76ad9eb17dd98b6008d083aa31442cbfa0410", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ac76ad9eb17dd98b6008d083aa31442cbfa0410", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ac76ad9eb17dd98b6008d083aa31442cbfa0410", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ac76ad9eb17dd98b6008d083aa31442cbfa0410/comments", "author": null, "committer": null, "parents": [{"sha": "bfb9dc7faa9330d05c109e8a40710b752dddea14", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bfb9dc7faa9330d05c109e8a40710b752dddea14", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bfb9dc7faa9330d05c109e8a40710b752dddea14"}], "stats": {"total": 26, "additions": 20, "deletions": 6}, "files": [{"sha": "7bc499e2461cf903278d3a9cee8f8722267bdca4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ac76ad9eb17dd98b6008d083aa31442cbfa0410/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ac76ad9eb17dd98b6008d083aa31442cbfa0410/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ac76ad9eb17dd98b6008d083aa31442cbfa0410", "patch": "@@ -1,3 +1,8 @@\n+2000-07-08  Richard Henderson  <rth@cygnus.com>\n+\n+        * final.c (final): Do not abort when reg-stack introduces\n+\ta new insn.\n+\n 2000-07-08  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* cpplib.h (struct cpp_name): Now struct cpp_string."}, {"sha": "be4a01e0bc3e9746d7969b220dd77f3fc357095f", "filename": "gcc/final.c", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ac76ad9eb17dd98b6008d083aa31442cbfa0410/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ac76ad9eb17dd98b6008d083aa31442cbfa0410/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=0ac76ad9eb17dd98b6008d083aa31442cbfa0410", "patch": "@@ -2014,14 +2014,23 @@ final (first, file, optimize, prescan)\n   for (insn = NEXT_INSN (first); insn;)\n     {\n #ifdef HAVE_ATTR_length\n-#ifdef ENABLE_CHECKING\n-      /* This can be triggered by bugs elsewhere in the compiler if\n-\t new insns are created after init_insn_lengths is called.  */\n       if (INSN_UID (insn) >= insn_lengths_max_uid)\n-\tabort ();\n-#endif\n-      insn_current_address = insn_addresses[INSN_UID (insn)];\n+\t{\n+#ifdef STACK_REGS\n+\t  /* Irritatingly, the reg-stack pass is creating new instructions\n+\t     and because of REG_DEAD note abuse it has to run after\n+\t     shorten_branches.  Fake address of -1 then.  */\n+\t  insn_current_address = -1;\n+#else\n+\t  /* This can be triggered by bugs elsewhere in the compiler if\n+\t     new insns are created after init_insn_lengths is called.  */\n+\t  abort ();\n #endif\n+\t}\n+      else\n+\tinsn_current_address = insn_addresses[INSN_UID (insn)];\n+#endif /* HAVE_ATTR_length */\n+\n       insn = final_scan_insn (insn, file, optimize, prescan, 0);\n     }\n "}]}