{"sha": "9dd791c86c770caf0b6a12a0dfae7cf0e0469f89", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRkNzkxYzg2Yzc3MGNhZjBiNmExMmEwZGZhZTdjZjBlMDQ2OWY4OQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2002-02-21T19:21:35Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2002-02-21T19:21:35Z"}, "message": "rtlanal.c (replace_rtx): Don't make a CONST_INT the operand of SUBREG or ZERO_EXTEND.\n\n* rtlanal.c (replace_rtx): Don't make a CONST_INT the operand of\nSUBREG or ZERO_EXTEND.\n\nFrom-SVN: r49935", "tree": {"sha": "fe34e2b2c1ebf766d03406df39c4a33246595dfd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe34e2b2c1ebf766d03406df39c4a33246595dfd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89/comments", "author": null, "committer": null, "parents": [{"sha": "287dd527bdaedd75aaccec7722a2b509c7a6a06c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/287dd527bdaedd75aaccec7722a2b509c7a6a06c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/287dd527bdaedd75aaccec7722a2b509c7a6a06c"}], "stats": {"total": 39, "additions": 39, "deletions": 0}, "files": [{"sha": "e1984f4d1106d269ab48e00d3d882691f559dfdd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9dd791c86c770caf0b6a12a0dfae7cf0e0469f89", "patch": "@@ -1,3 +1,8 @@\n+Thu Feb 21 16:20:46 2002  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* rtlanal.c (replace_rtx): Don't make a CONST_INT the operand of\n+\tSUBREG or ZERO_EXTEND.\n+\n Thu Feb 21 15:35:46 2002  J\"orn Rennecke <joern.rennecke@superh.com>\n \n \t* sh.h (current_function_anonymous_args): Remove."}, {"sha": "5f338e86e2f91d03149987ba91c135ca9c0a784b", "filename": "gcc/rtlanal.c", "status": "modified", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89/gcc%2Frtlanal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dd791c86c770caf0b6a12a0dfae7cf0e0469f89/gcc%2Frtlanal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Frtlanal.c?ref=9dd791c86c770caf0b6a12a0dfae7cf0e0469f89", "patch": "@@ -2417,6 +2417,40 @@ replace_rtx (x, from, to)\n   if (x == 0)\n     return 0;\n \n+  if (GET_CODE (x) == SUBREG)\n+    {\n+      rtx new = replace_rtx (SUBREG_REG (x), from, to);\n+\n+      if (GET_CODE (new) == CONST_INT)\n+\t{\n+\t  x = simplify_subreg (GET_MODE (x), new,\n+\t\t\t       GET_MODE (SUBREG_REG (x)),\n+\t\t\t       SUBREG_BYTE (x));\n+\t  if (! x)\n+\t    abort ();\n+\t}\n+      else\n+\tSUBREG_REG (x) = new;\n+\n+      return x;\n+    }\n+  else if (GET_CODE (x) == ZERO_EXTEND)\n+    {\n+      rtx new = replace_rtx (XEXP (x, 0), from, to);\n+\n+      if (GET_CODE (new) == CONST_INT)\n+\t{\n+\t  x = simplify_unary_operation (ZERO_EXTEND, GET_MODE (x),\n+\t\t\t\t\tnew, GET_MODE (XEXP (x, 0)));\n+\t  if (! x)\n+\t    abort ();\n+\t}\n+      else\n+\tXEXP (x, 0) = new;\n+\n+      return x;\n+    }\n+\n   fmt = GET_RTX_FORMAT (GET_CODE (x));\n   for (i = GET_RTX_LENGTH (GET_CODE (x)) - 1; i >= 0; i--)\n     {"}]}