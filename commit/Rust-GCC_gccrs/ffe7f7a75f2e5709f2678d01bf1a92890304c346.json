{"sha": "ffe7f7a75f2e5709f2678d01bf1a92890304c346", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZlN2Y3YTc1ZjJlNTcwOWYyNjc4ZDAxYmYxYTkyODkwMzA0YzM0Ng==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2014-04-17T12:23:28Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-04-17T12:23:28Z"}, "message": "re PR sanitizer/56781 (boostrap-asan failure: fixincl fails to link (missing -lasan))\n\n\tPR sanitizer/56781\n\t* libtool-ldflags: Also prefix -static-lib*, -shared-lib*\n\tand -B* options with -Xcompiler.\nlto-plugin/\n\t* Makefile.am (LTLDFLAGS, liblto_plugin_la_LINK): New variables.\n\t* Makefile.in: Regenerated.\n\nFrom-SVN: r209475", "tree": {"sha": "939f1ccdf6369001e5600ee2c4b597483c98bc23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/939f1ccdf6369001e5600ee2c4b597483c98bc23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffe7f7a75f2e5709f2678d01bf1a92890304c346", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffe7f7a75f2e5709f2678d01bf1a92890304c346", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffe7f7a75f2e5709f2678d01bf1a92890304c346", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffe7f7a75f2e5709f2678d01bf1a92890304c346/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "79896351cbd1ba94a66b867694b335127ee72449", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/79896351cbd1ba94a66b867694b335127ee72449", "html_url": "https://github.com/Rust-GCC/gccrs/commit/79896351cbd1ba94a66b867694b335127ee72449"}], "stats": {"total": 31, "additions": 25, "deletions": 6}, "files": [{"sha": "3fadbd3899067b87190c495590677c2167e8d21c", "filename": "ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe7f7a75f2e5709f2678d01bf1a92890304c346/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe7f7a75f2e5709f2678d01bf1a92890304c346/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=ffe7f7a75f2e5709f2678d01bf1a92890304c346", "patch": "@@ -1,3 +1,9 @@\n+2014-04-17  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR sanitizer/56781\n+\t* libtool-ldflags: Also prefix -static-lib*, -shared-lib*\n+\tand -B* options with -Xcompiler.\n+\n 2014-04-04  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR bootstrap/60620"}, {"sha": "5de9e2978d4047f550f37baf89cb44d0b74f0313", "filename": "libtool-ldflags", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe7f7a75f2e5709f2678d01bf1a92890304c346/libtool-ldflags", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe7f7a75f2e5709f2678d01bf1a92890304c346/libtool-ldflags", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libtool-ldflags?ref=ffe7f7a75f2e5709f2678d01bf1a92890304c346", "patch": "@@ -2,7 +2,7 @@\n \n # Script to translate LDFLAGS into a form suitable for use with libtool.\n \n-# Copyright (C) 2005 Free Software Foundation, Inc.\n+# Copyright (C) 2005-2014 Free Software Foundation, Inc.\n #\n # This file is free software; you can redistribute it and/or modify\n # it under the terms of the GNU General Public License as published by\n@@ -36,14 +36,15 @@ prev_arg=\n for arg\n do\n     case $arg in\n-\t-f*|--*)\n+\t-f*|--*|-static-lib*|-shared-lib*|-B*)\n \t    # Libtool does not ascribe any special meaning options\n \t    # that begin with -f or with a double-dash.  So, it will\n \t    # think these options are linker options, and prefix them\n \t    # with \"-Wl,\".  Then, the compiler driver will ignore the\n \t    # options.  So, we prefix these options with -Xcompiler to\n \t    # make clear to libtool that they are in fact compiler\n-\t    # options.\n+\t    # options.  Similarly for e.g. -static-libstdc++, or\n+\t    # -B/some/path.\n \t    case $prev_arg in\n \t\t-Xpreprocessor|-Xcompiler|-Xlinker)\n \t\t    # This option is already prefixed; don't prefix it again."}, {"sha": "a8015423b30833fa0f9f5ab4b84507e52ece3db6", "filename": "lto-plugin/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe7f7a75f2e5709f2678d01bf1a92890304c346/lto-plugin%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe7f7a75f2e5709f2678d01bf1a92890304c346/lto-plugin%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2FChangeLog?ref=ffe7f7a75f2e5709f2678d01bf1a92890304c346", "patch": "@@ -1,3 +1,9 @@\n+2014-04-17  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR sanitizer/56781\n+\t* Makefile.am (LTLDFLAGS, liblto_plugin_la_LINK): New variables.\n+\t* Makefile.in: Regenerated.\n+\n 2014-04-02  Richard Biener  <rguenther@suse.de>\n \n \t* lto-plugin.c (onload): Fail to load if -fno-use-linker-plugin"}, {"sha": "507e0273fb44630231bb34a2fe5021939228baa9", "filename": "lto-plugin/Makefile.am", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe7f7a75f2e5709f2678d01bf1a92890304c346/lto-plugin%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe7f7a75f2e5709f2678d01bf1a92890304c346/lto-plugin%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2FMakefile.am?ref=ffe7f7a75f2e5709f2678d01bf1a92890304c346", "patch": "@@ -18,6 +18,7 @@ in_gcc_libs = $(foreach lib, $(libexecsub_LTLIBRARIES), $(gcc_build_dir)/$(lib))\n \n # Can be removed when libiberty becomes a normal convenience library\n Wc=-Wc,\n+LTLDFLAGS = $(shell $(SHELL) $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n \n liblto_plugin_la_SOURCES = lto-plugin.c\n liblto_plugin_la_LIBADD = \\\n@@ -28,6 +29,9 @@ liblto_plugin_la_LDFLAGS = $(AM_LDFLAGS) \\\n \t$(if $(wildcard ../libiberty/pic/libiberty.a),,-Wc,../libiberty/libiberty.a)\n liblto_plugin_la_DEPENDENCIES = $(if $(wildcard \\\n \t../libiberty/pic/libiberty.a),../libiberty/pic/libiberty.a,)\n+liblto_plugin_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \\\n+\t$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \\\n+\t$(liblto_plugin_la_LDFLAGS) $(LTLDFLAGS) -o $@\n \n all-local: $(in_gcc_libs)\n "}, {"sha": "3739866d7a145803ab38e90964147452da324a1d", "filename": "lto-plugin/Makefile.in", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe7f7a75f2e5709f2678d01bf1a92890304c346/lto-plugin%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe7f7a75f2e5709f2678d01bf1a92890304c346/lto-plugin%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/lto-plugin%2FMakefile.in?ref=ffe7f7a75f2e5709f2678d01bf1a92890304c346", "patch": "@@ -84,9 +84,6 @@ am__installdirs = \"$(DESTDIR)$(libexecsubdir)\"\n LTLIBRARIES = $(libexecsub_LTLIBRARIES)\n am_liblto_plugin_la_OBJECTS = lto-plugin.lo\n liblto_plugin_la_OBJECTS = $(am_liblto_plugin_la_OBJECTS)\n-liblto_plugin_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \\\n-\t$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \\\n-\t$(liblto_plugin_la_LDFLAGS) $(LDFLAGS) -o $@\n DEFAULT_INCLUDES = -I.@am__isrc@\n depcomp =\n am__depfiles_maybe =\n@@ -239,6 +236,7 @@ in_gcc_libs = $(foreach lib, $(libexecsub_LTLIBRARIES), $(gcc_build_dir)/$(lib))\n \n # Can be removed when libiberty becomes a normal convenience library\n Wc = -Wc,\n+LTLDFLAGS = $(shell $(SHELL) $(top_srcdir)/../libtool-ldflags $(LDFLAGS))\n liblto_plugin_la_SOURCES = lto-plugin.c\n liblto_plugin_la_LIBADD = \\\n \t$(if $(wildcard ../libiberty/pic/libiberty.a),$(Wc)../libiberty/pic/libiberty.a,)\n@@ -251,6 +249,10 @@ liblto_plugin_la_LDFLAGS = $(AM_LDFLAGS) \\\n liblto_plugin_la_DEPENDENCIES = $(if $(wildcard \\\n \t../libiberty/pic/libiberty.a),../libiberty/pic/libiberty.a,)\n \n+liblto_plugin_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \\\n+\t$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \\\n+\t$(liblto_plugin_la_LDFLAGS) $(LTLDFLAGS) -o $@\n+\n all: config.h\n \t$(MAKE) $(AM_MAKEFLAGS) all-am\n "}]}