{"sha": "29ae93642d81acf4bba804d2929de1527d319b13", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjlhZTkzNjQyZDgxYWNmNGJiYTgwNGQyOTI5ZGUxNTI3ZDMxOWIxMw==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2003-03-26T16:04:08Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2003-03-26T16:04:08Z"}, "message": "power4.md: Allow delay between dispatch and function units for simple instructions.\n\n        * config/rs6000/power4.md: Allow delay between dispatch and\n        function units for simple instructions.  Correct store units.\n        Allow branch to occupy as many dispatch slots as necessary.\n\nFrom-SVN: r64896", "tree": {"sha": "853cfda3ad07f11b37ecd60ec348c05b4a02fdc5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/853cfda3ad07f11b37ecd60ec348c05b4a02fdc5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/29ae93642d81acf4bba804d2929de1527d319b13", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29ae93642d81acf4bba804d2929de1527d319b13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/29ae93642d81acf4bba804d2929de1527d319b13", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/29ae93642d81acf4bba804d2929de1527d319b13/comments", "author": null, "committer": null, "parents": [{"sha": "be565ad7dfb253836b579f666b230fd261a19913", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/be565ad7dfb253836b579f666b230fd261a19913", "html_url": "https://github.com/Rust-GCC/gccrs/commit/be565ad7dfb253836b579f666b230fd261a19913"}], "stats": {"total": 49, "additions": 33, "deletions": 16}, "files": [{"sha": "3726073ab26a6044b984ede8ae39fee0a00f7e33", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ae93642d81acf4bba804d2929de1527d319b13/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ae93642d81acf4bba804d2929de1527d319b13/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=29ae93642d81acf4bba804d2929de1527d319b13", "patch": "@@ -1,3 +1,9 @@\n+2003-03-26  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* config/rs6000/power4.md: Allow delay between dispatch and\n+\tfunction units for simple instructions.  Correct store units.\n+\tAllow branch to occupy as many dispatch slots as necessary.\n+\n 2003-03-26  Jakub Jelinek  <jakub@redhat.com>\n \n \t* config/ia64/ia64.c (ia64_expand_op_and_fetch): Fix comment."}, {"sha": "35f1ba216fe46964b64f3ba6942da461e3dd883f", "filename": "gcc/config/rs6000/power4.md", "status": "modified", "additions": 27, "deletions": 16, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/29ae93642d81acf4bba804d2929de1527d319b13/gcc%2Fconfig%2Frs6000%2Fpower4.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/29ae93642d81acf4bba804d2929de1527d319b13/gcc%2Fconfig%2Frs6000%2Fpower4.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpower4.md?ref=29ae93642d81acf4bba804d2929de1527d319b13", "patch": "@@ -37,9 +37,12 @@\n \n (define_reservation \"q1_power4\" \"du1_power4|du4_power4\")\n (define_reservation \"q2_power4\" \"du2_power4|du3_power4\")\n+(define_reservation \"q4_power4\" \"du1_power4|du2_power4|du3_power4|du4_power4\")\n \n-(define_reservation \"lsq_power4\" \"((du1_power4|du4_power4),lsu1_power4)\\\n-\t\t\t\t |((du2_power4|du3_power4),lsu2_power4)\")\n+(define_reservation \"lsq_power4\" \"(q1_power4,lsu1_power4)\\\n+\t\t\t\t |(q2_power4,lsu2_power4)\\\n+\t\t\t\t |(du3_power4,nothing,lsu2_power4)\\\n+\t\t\t\t |(du4_power4,nothing,lsu1_power4)\")\n \n (define_reservation \"lsuq_power4\"\n \t\t    \"((du1_power4+du2_power4),lsu1_power4+iu2_power4)\\\n@@ -51,17 +54,21 @@\n \t\t    \"(du1_power4+du2_power4+du3_power4+du4_power4),\\\n \t\t     iu1_power4,(lsu2_power4+iu2_power4)\")\n \n-(define_reservation \"iq_power4\" \"((du1_power4|du4_power4),iu1_power4)\\\n-\t\t\t\t|((du2_power4|du3_power4),iu2_power4)\")\n+(define_reservation \"iq_power4\" \"(q1_power4,iu1_power4)\\\n+\t\t\t\t|(q2_power4,iu2_power4)\\\n+\t\t\t\t|(du3_power4,nothing,iu2_power4)\\\n+\t\t\t\t|(du4_power4,nothing,iu1_power4)\")\n \n-(define_reservation \"fpq_power4\" \"((du1_power4|du4_power4),fpu1_power4)\\\n-\t\t\t\t |((du2_power4|du3_power4),fpu2_power4)\")\n+(define_reservation \"fpq_power4\" \"(q1_power4,fpu1_power4)\\\n+\t\t\t\t |(q2_power4,fpu2_power4)\\\n+\t\t\t\t |(du3_power4,nothing,fpu2_power4)\\\n+\t\t\t\t |(du4_power4,nothing,fpu1_power4)\")\n \n (define_reservation \"vq_power4\"\n-\t\t    \"(du1_power4|du2_power4|du3_power4|du4_power4),vec_power4\")\n+\t\t    \"(q4_power4,vec_power4)|(q4_power4,nothing,vec_power4)\")\n (define_reservation \"vpq_power4\"\n-\t\t    \"(du1_power4|du2_power4|du3_power4|du4_power4),\\\n-\t\t     vecperm_power4\")\n+\t\t    \"(q4_power4,vecperm_power4)\\\n+\t\t    |(q4_power4,nothing,vecperm_power4)\")\n \n \n ; Dispatch slots are allocated in order conforming to program order.\n@@ -129,8 +136,8 @@\n (define_insn_reservation \"power4-store\" 1\n   (and (eq_attr \"type\" \"store\")\n        (eq_attr \"cpu\" \"power4\"))\n-  \"((du1_power4|du4_power4),lsu1_power4,iu2_power4)\\\n-  |((du2_power4|du3_power4),lsu2_power4,iu1_power4)\")\n+  \"(q1_power4,lsu1_power4,iu1_power4)\\\n+  |(q2_power4,lsu2_power4,iu2_power4)\")\n \n (define_insn_reservation \"power4-store-update\" 1\n   (and (eq_attr \"type\" \"store_u\")\n@@ -145,8 +152,8 @@\n (define_insn_reservation \"power4-fpstore\" 1\n   (and (eq_attr \"type\" \"fpstore\")\n        (eq_attr \"cpu\" \"power4\"))\n-  \"((du1_power4|du4_power4),lsu1_power4,fpu1_power4)\\\n-  |((du2_power4|du3_power4),lsu2_power4,fpu2_power4)\")\n+  \"(q1_power4,lsu1_power4,fpu1_power4)\\\n+  |(q2_power4,lsu2_power4,fpu2_power4)\")\n \n (define_insn_reservation \"power4-fpstore-update\" 1\n   (and (eq_attr \"type\" \"fpstore_u\")\n@@ -165,8 +172,8 @@\n (define_insn_reservation \"power4-vecstore\" 1\n   (and (eq_attr \"type\" \"vecstore\")\n        (eq_attr \"cpu\" \"power4\"))\n-  \"((du1_power4|du4_power4),lsu1_power4,vec_power4)\\\n-  |((du2_power4|du3_power4),lsu2_power4,vec_power4)\")\n+  \"(q1_power4,lsu1_power4,vec_power4)\\\n+  |(q2_power4,lsu2_power4,vec_power4)\")\n \n \n ; Integer latency is 2 cycles\n@@ -228,7 +235,11 @@\n (define_insn_reservation \"power4-branch\" 2\n   (and (eq_attr \"type\" \"jmpreg,branch\")\n        (eq_attr \"cpu\" \"power4\"))\n-  \"du5_power4,bpu_power4\")\n+  \"(du5_power4\\\n+   |du4_power4+du5_power4\\\n+   |du3_power4+du4_power4+du5_power4\\\n+   |du2_power4+du3_power4+du4_power4+du5_power4\\\n+   |du1_power4+du2_power4+du3_power4+du4_power4+du5_power4),bpu_power4\")\n \n \n ; Condition Register logical ops are split if non-destructive (RT != RB)"}]}