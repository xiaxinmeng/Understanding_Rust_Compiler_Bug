{"sha": "6e03fa931c3264b82681e0f7894e161e148dbfc5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmUwM2ZhOTMxYzMyNjRiODI2ODFlMGY3ODk0ZTE2MWUxNDhkYmZjNQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-04-26T12:11:14Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-04-26T12:11:14Z"}, "message": "re PR c++/55708 (g++ crashes: constexpr function with reference parameters.)\n\n2013-04-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/55708\n\t* g++.dg/cpp0x/constexpr-55708.C: New.\n\nFrom-SVN: r198337", "tree": {"sha": "142519b02cac74dc13014b3368613d7e6c906185", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/142519b02cac74dc13014b3368613d7e6c906185"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6e03fa931c3264b82681e0f7894e161e148dbfc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e03fa931c3264b82681e0f7894e161e148dbfc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e03fa931c3264b82681e0f7894e161e148dbfc5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e03fa931c3264b82681e0f7894e161e148dbfc5/comments", "author": null, "committer": null, "parents": [{"sha": "df93505e2e566e1f99e2d26b2d8471c8b0f84bef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df93505e2e566e1f99e2d26b2d8471c8b0f84bef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df93505e2e566e1f99e2d26b2d8471c8b0f84bef"}], "stats": {"total": 37, "additions": 36, "deletions": 1}, "files": [{"sha": "1081ef992519b58d0ca8b8cdb167544b9e7aaf1b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e03fa931c3264b82681e0f7894e161e148dbfc5/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e03fa931c3264b82681e0f7894e161e148dbfc5/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6e03fa931c3264b82681e0f7894e161e148dbfc5", "patch": "@@ -1,4 +1,9 @@\n-2013-03-26  Richard Biener  <rguenther@suse.de>\n+2013-04-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/55708\n+\t* g++.dg/cpp0x/constexpr-55708.C: New.\n+\n+2013-04-26  Richard Biener  <rguenther@suse.de>\n \n \t* gcc.dg/tree-prof/update-loopch.c: Revert last change.\n \t* gcc.dg/graphite/pr33766.c: Fix undefined behavior."}, {"sha": "ffbefbbac46919fb3faef3babad244679055fc6a", "filename": "gcc/testsuite/g++.dg/cpp0x/constexpr-55708.C", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6e03fa931c3264b82681e0f7894e161e148dbfc5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-55708.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6e03fa931c3264b82681e0f7894e161e148dbfc5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-55708.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fconstexpr-55708.C?ref=6e03fa931c3264b82681e0f7894e161e148dbfc5", "patch": "@@ -0,0 +1,30 @@\n+// PR c++/55708\n+// { dg-do compile { target c++11 } }\n+\n+template<int N,int NNN>\n+struct AA { static constexpr int val = N; };\n+\n+template<typename A,typename B>\n+//constexpr unsigned long long mymax(A a,B b){ // <-- compiles \n+constexpr unsigned long long mymax(A && a,const B& b){\n+  return a<b?b:a;\n+}\n+\n+template<char... List>\n+constexpr long long operator\"\" _y() noexcept\n+{\n+  return AA<1, mymax(1,2)>::val; // <-- crashes gcc\n+  // return mymax(1,2);   // <-- compiles\n+  // return AA<1,2>::val; // <-- compiles\n+}\n+\n+template<char... List>\n+constexpr unsigned long long do_y() noexcept\n+{\n+  return AA<1, mymax(1,2)>::val; // <-- crashes gcc\n+}\n+\n+int main()\n+{\n+  return 1_y + do_y();\n+}"}]}