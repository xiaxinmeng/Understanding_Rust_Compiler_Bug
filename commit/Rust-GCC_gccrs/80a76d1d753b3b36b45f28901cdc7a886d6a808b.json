{"sha": "80a76d1d753b3b36b45f28901cdc7a886d6a808b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODBhNzZkMWQ3NTNiM2IzNmI0NWYyODkwMWNkYzdhODg2ZDZhODA4Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2009-09-09T18:39:52Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-09-09T18:39:52Z"}, "message": "t-slibgcc-elf-ver (SHLIB_MAKE_SOLINK, [...]): New variables.\n\n\t* config/t-slibgcc-elf-ver (SHLIB_MAKE_SOLINK, SHLIB_INSTALL_SOLINK):\n\tNew variables.\n\t(SHLIB_LINK, SHLIB_INSTALL): Use them.\n\t* config/t-slibgcc-libgcc: New file.\n\t* config.gcc (powerpc*-*-linux*, powerpc*-*-gnu*): Use it.\n\nFrom-SVN: r151568", "tree": {"sha": "3b25620527718a5a9e6b323b02d56f5246a8d4a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3b25620527718a5a9e6b323b02d56f5246a8d4a2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80a76d1d753b3b36b45f28901cdc7a886d6a808b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80a76d1d753b3b36b45f28901cdc7a886d6a808b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80a76d1d753b3b36b45f28901cdc7a886d6a808b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80a76d1d753b3b36b45f28901cdc7a886d6a808b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d72a3ac17b950fee12b51903c901af28386969cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d72a3ac17b950fee12b51903c901af28386969cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d72a3ac17b950fee12b51903c901af28386969cd"}], "stats": {"total": 56, "additions": 49, "deletions": 7}, "files": [{"sha": "668caa2ac6f52beb45b8fa0a554ee2ebaa71ad05", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=80a76d1d753b3b36b45f28901cdc7a886d6a808b", "patch": "@@ -1,3 +1,11 @@\n+2009-09-09  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* config/t-slibgcc-elf-ver (SHLIB_MAKE_SOLINK, SHLIB_INSTALL_SOLINK):\n+\tNew variables.\n+\t(SHLIB_LINK, SHLIB_INSTALL): Use them.\n+\t* config/t-slibgcc-libgcc: New file.\n+\t* config.gcc (powerpc*-*-linux*, powerpc*-*-gnu*): Use it.\n+\n 2009-09-09  Martin Jambor  <mjambor@suse.cz>\n \n \tPR tree-optimization/41089"}, {"sha": "6a680a0b094a38a3a2c781699dc49f83cd693ec3", "filename": "gcc/config.gcc", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=80a76d1d753b3b36b45f28901cdc7a886d6a808b", "patch": "@@ -1927,7 +1927,7 @@ powerpc-*-linux* | powerpc64-*-linux*)\n \t\ttm_file=\"${tm_file} rs6000/linux.h glibc-stdint.h\"\n \t\t;;\n \tesac\n-\ttmake_file=\"${tmake_file} rs6000/t-fprules-softfp soft-fp/t-softfp\"\n+\ttmake_file=\"${tmake_file} t-slibgcc-libgcc rs6000/t-fprules-softfp soft-fp/t-softfp\"\n \tcase ${target} in\n \t    powerpc*-*-linux*altivec*)\n \t\ttm_file=\"${tm_file} rs6000/linuxaltivec.h\" ;;\n@@ -1943,19 +1943,19 @@ powerpc-*-linux* | powerpc64-*-linux*)\n powerpc64-*-gnu*)\n \ttm_file=\"${tm_file} elfos.h svr4.h freebsd-spec.h gnu.h rs6000/sysv4.h rs6000/default64.h rs6000/linux64.h rs6000/gnu.h glibc-stdint.h\"\n \textra_options=\"${extra_options} rs6000/sysv4.opt rs6000/linux64.opt\"\n-\ttmake_file=\"t-slibgcc-elf-ver t-gnu\"\n+\ttmake_file=\"t-slibgcc-elf-ver t-slibgcc-libgcc t-gnu\"\n \t;;\n powerpc-*-gnu-gnualtivec*)\n \ttm_file=\"${cpu_type}/${cpu_type}.h elfos.h svr4.h freebsd-spec.h gnu.h rs6000/sysv4.h rs6000/linux.h rs6000/linuxaltivec.h rs6000/gnu.h glibc-stdint.h\"\n \textra_options=\"${extra_options} rs6000/sysv4.opt\"\n-\ttmake_file=\"rs6000/t-fprules rs6000/t-fprules-fpbit rs6000/t-ppcos t-slibgcc-elf-ver t-gnu rs6000/t-ppccomm\"\n+\ttmake_file=\"rs6000/t-fprules rs6000/t-fprules-fpbit rs6000/t-ppcos t-slibgcc-elf-ver t-slibgcc-libgcc t-gnu rs6000/t-ppccomm\"\n \tif test x$enable_threads = xyes; then\n \t\tthread_file='posix'\n \tfi\n \t;;\n powerpc-*-gnu*)\n \ttm_file=\"${cpu_type}/${cpu_type}.h elfos.h svr4.h freebsd-spec.h gnu.h rs6000/sysv4.h rs6000/linux.h rs6000/gnu.h glibc-stdint.h\"\n-\ttmake_file=\"rs6000/t-fprules rs6000/t-fprules-fpbit rs6000/t-ppcos t-slibgcc-elf-ver t-gnu rs6000/t-ppccomm\"\n+\ttmake_file=\"rs6000/t-fprules rs6000/t-fprules-fpbit rs6000/t-ppcos t-slibgcc-elf-ver t-slibgcc-libgcc t-gnu rs6000/t-ppccomm\"\n \textra_options=\"${extra_options} rs6000/sysv4.opt\"\n \tif test x$enable_threads = xyes; then\n \t\tthread_file='posix'"}, {"sha": "d5ef9ca163f8ae87e7f3e6caa610e7cf102815c6", "filename": "gcc/config/t-slibgcc-elf-ver", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-elf-ver?ref=80a76d1d753b3b36b45f28901cdc7a886d6a808b", "patch": "@@ -28,6 +28,9 @@ SHLIB_OBJS = @shlib_objs@\n SHLIB_DIR = @multilib_dir@\n SHLIB_SLIBDIR_QUAL = @shlib_slibdir_qual@\n SHLIB_LC = -lc\n+SHLIB_MAKE_SOLINK = $(LN_S) $(SHLIB_SONAME) $(SHLIB_DIR)/$(SHLIB_SOLINK)\n+SHLIB_INSTALL_SOLINK = $(LN_S) $(SHLIB_SONAME) \\\n+\t$$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK)\n \n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-Wl,--soname=$(SHLIB_SONAME) \\\n@@ -40,15 +43,14 @@ SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t\t$(SHLIB_DIR)/$(SHLIB_SONAME).backup; \\\n \telse true; fi && \\\n \tmv $(SHLIB_DIR)/$(SHLIB_SONAME).tmp $(SHLIB_DIR)/$(SHLIB_SONAME) && \\\n-\t$(LN_S) $(SHLIB_SONAME) $(SHLIB_DIR)/$(SHLIB_SOLINK)\n+\t$(SHLIB_MAKE_SOLINK)\n # $(slibdir) double quoted to protect it from expansion while building\n # libgcc.mk.  We want this delayed until actual install time.\n SHLIB_INSTALL = \\\n \t$$(mkinstalldirs) $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL); \\\n \t$(INSTALL_DATA) $(SHLIB_DIR)/$(SHLIB_SONAME) \\\n \t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SONAME); \\\n \trm -f $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK); \\\n-\t$(LN_S) $(SHLIB_SONAME) \\\n-\t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK)\n+\t$(SHLIB_INSTALL_SOLINK)\n SHLIB_MKMAP = $(srcdir)/mkmap-symver.awk\n SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver"}, {"sha": "df004a5e9648e8536bfc8f2a5f3fcb2b844ed16a", "filename": "gcc/config/t-slibgcc-libgcc", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2Fconfig%2Ft-slibgcc-libgcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80a76d1d753b3b36b45f28901cdc7a886d6a808b/gcc%2Fconfig%2Ft-slibgcc-libgcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-libgcc?ref=80a76d1d753b3b36b45f28901cdc7a886d6a808b", "patch": "@@ -0,0 +1,32 @@\n+# Copyright (C) 2009 Free Software Foundation, Inc.\n+#\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# Instead of creating $(SHLIB_SOLINK) symlink create a GNU ld\n+# linker script which sources in both $(SHLIB_SONAME) and libgcc.a.\n+# This is needed on targets where libgcc.a contains routines that aren't in\n+# $(SHLIB_SONAME) and are needed for shared libraries.\n+\n+SHLIB_MAKE_SOLINK = \\\n+\t(echo \"/* GNU ld script\"; \\\n+\t echo \"   Use the shared library, but some functions are only in\"; \\\n+\t echo \"   the static library.  */\"; \\\n+\t echo \"GROUP ( $(SHLIB_SONAME) libgcc.a )\" \\\n+\t) > $(SHLIB_DIR)/$(SHLIB_SOLINK)\n+SHLIB_INSTALL_SOLINK = \\\n+\t$(INSTALL_DATA) $(SHLIB_DIR)/$(SHLIB_SOLINK) \\\n+\t  $$(DESTDIR)$$(slibdir)$(SHLIB_SLIBDIR_QUAL)/$(SHLIB_SOLINK)"}]}