{"sha": "3d8a8aade36871c292e4f374262e9946cb6aa83c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Q4YThhYWRlMzY4NzFjMjkyZTRmMzc0MjYyZTk5NDZjYjZhYTgzYw==", "commit": {"author": {"name": "Mike Stump", "email": "mrs@apple.com", "date": "2005-01-31T22:05:07Z"}, "committer": {"name": "Mike Stump", "email": "mrs@gcc.gnu.org", "date": "2005-01-31T22:05:07Z"}, "message": "parser.c (cp_lexer_new_main): Get the first token, first, before doing anything.\n\n        * parser.c (cp_lexer_new_main): Get the first token, first, before\n        doing anything.\nRadar 3929334\n\nFrom-SVN: r94494", "tree": {"sha": "23e04a3713ff8c299809b404d62cb8c9b197e1c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23e04a3713ff8c299809b404d62cb8c9b197e1c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d8a8aade36871c292e4f374262e9946cb6aa83c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d8a8aade36871c292e4f374262e9946cb6aa83c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d8a8aade36871c292e4f374262e9946cb6aa83c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d8a8aade36871c292e4f374262e9946cb6aa83c/comments", "author": null, "committer": null, "parents": [{"sha": "9ea888348fda5bbe3f33ec2b241d7adb1c94383b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9ea888348fda5bbe3f33ec2b241d7adb1c94383b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9ea888348fda5bbe3f33ec2b241d7adb1c94383b"}], "stats": {"total": 24, "additions": 20, "deletions": 4}, "files": [{"sha": "1baaf0b5849d93ae3ce71dd1cb457ec7c9c7629b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3d8a8aade36871c292e4f374262e9946cb6aa83c", "patch": "@@ -1,3 +1,8 @@\n+2005-01-31  Mike Stump  <mrs@apple.com>\n+\n+\t* parser.c (cp_lexer_new_main): Get the first token, first, before\n+\tdoing anything.\n+\n 2005-01-31  Mark Mitchell  <mark@codesourcery.com>\n \n \t* decl.c (start_decl): Add missing parentheses."}, {"sha": "ab2a103acec9c46ad56ece38b3ca94733c45309f", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=3d8a8aade36871c292e4f374262e9946cb6aa83c", "patch": "@@ -238,16 +238,19 @@ cp_lexer_new_main (void)\n   size_t space;\n   cp_token *buffer;\n \n+  /* It's possible that lexing the first token will load a PCH file,\n+     which is a GC collection point.  So we have to grab the first\n+     token before allocating any memory.  Pragmas must not be deferred\n+     as -fpch-preprocess can generate a pragma to load the PCH file in\n+     the preprocessed output used by -save-temps.  */\n+  cp_lexer_get_preprocessor_token (NULL, &first_token);\n+\n   /* Tell cpplib we want CPP_PRAGMA tokens.  */\n   cpp_get_options (parse_in)->defer_pragmas = true;\n \n   /* Tell c_lex not to merge string constants.  */\n   c_lex_return_raw_strings = true;\n \n-  /* It's possible that lexing the first token will load a PCH file,\n-     which is a GC collection point.  So we have to grab the first\n-     token before allocating any memory.  */\n-  cp_lexer_get_preprocessor_token (NULL, &first_token);\n   c_common_no_more_pch ();\n \n   /* Allocate the memory.  */"}, {"sha": "4539396176bcaed493beb94f7e54153c893db799", "filename": "gcc/testsuite/g++.dg/pch/pch.C", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.C?ref=3d8a8aade36871c292e4f374262e9946cb6aa83c", "patch": "@@ -0,0 +1,7 @@\n+// { dg-options \"-save-temps -fpch-preprocess -I.\" }\n+\n+#include \"pch.H\"\n+int main() \n+{\n+  return 0;\n+}"}, {"sha": "4bd8276f349276147c911ae2c08b37e7b8811544", "filename": "gcc/testsuite/g++.dg/pch/pch.Hs", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.Hs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d8a8aade36871c292e4f374262e9946cb6aa83c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.Hs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpch%2Fpch.Hs?ref=3d8a8aade36871c292e4f374262e9946cb6aa83c", "patch": "@@ -0,0 +1 @@\n+// empty file"}]}