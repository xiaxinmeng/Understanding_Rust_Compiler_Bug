{"sha": "d601d5da25d86c23d3dcb9359addcc8330e2f868", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDYwMWQ1ZGEyNWQ4NmMyM2QzZGNiOTM1OWFkZGNjODMzMGUyZjg2OA==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-11-21T19:37:26Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-11-21T19:37:26Z"}, "message": "(reload): When decrement max_groups of superclass, can\nonly do so if the group_size is smaller than the current group.\n\nFrom-SVN: r8539", "tree": {"sha": "0ccca13bc2282f4bc4bd12a15fc13a00ceb240bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0ccca13bc2282f4bc4bd12a15fc13a00ceb240bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d601d5da25d86c23d3dcb9359addcc8330e2f868", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d601d5da25d86c23d3dcb9359addcc8330e2f868", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d601d5da25d86c23d3dcb9359addcc8330e2f868", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d601d5da25d86c23d3dcb9359addcc8330e2f868/comments", "author": null, "committer": null, "parents": [{"sha": "e0bf6b33d8c20f0ecfa9e9e5040538170893a172", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0bf6b33d8c20f0ecfa9e9e5040538170893a172", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0bf6b33d8c20f0ecfa9e9e5040538170893a172"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "13dd43b95c8736bfe41d4ad241e73f4c4b2ab5b6", "filename": "gcc/reload1.c", "status": "modified", "additions": 16, "deletions": 4, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d601d5da25d86c23d3dcb9359addcc8330e2f868/gcc%2Freload1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d601d5da25d86c23d3dcb9359addcc8330e2f868/gcc%2Freload1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Freload1.c?ref=d601d5da25d86c23d3dcb9359addcc8330e2f868", "patch": "@@ -1653,7 +1653,11 @@ reload (first, global, dumpfile)\n \t\t\t  max_groups[class]--;\n \t\t\t  p = reg_class_superclasses[class];\n \t\t\t  while (*p != LIM_REG_CLASSES)\n-\t\t\t    max_groups[(int) *p++]--;\n+\t\t\t    {\n+\t\t\t      if (group_size [(int) *p] <= group_size [class])\n+\t\t\t\tmax_groups[(int) *p]--;\n+\t\t\t      p++;\n+\t\t\t    }\n \n \t\t\t  /* Indicate both these regs are part of a group.  */\n \t\t\t  SET_HARD_REG_BIT (counted_for_groups, j);\n@@ -1768,8 +1772,12 @@ reload (first, global, dumpfile)\n \t\t\t      max_groups[class]--;\n \t\t\t      p = reg_class_superclasses[class];\n \t\t\t      while (*p != LIM_REG_CLASSES)\n-\t\t\t\tmax_groups[(int) *p++]--;\n-\n+\t\t\t\t{\n+\t\t\t\t  if (group_size [(int) *p]\n+\t\t\t\t      <= group_size [class])\n+\t\t\t\t    max_groups[(int) *p]--;\n+\t\t\t\t  p++;\n+\t\t\t\t}\n \t\t\t      break;\n \t\t\t    }\n \t\t\t}\n@@ -2117,7 +2125,11 @@ count_possible_groups (group_size, group_mode, max_groups, class)\n \t    max_groups[class]--;\n \t    p = reg_class_superclasses[class];\n \t    while (*p != LIM_REG_CLASSES)\n-\t      max_groups[(int) *p++]--;\n+\t      {\n+\t\tif (group_size [(int) *p] <= group_size [class])\n+\t\t  max_groups[(int) *p]--;\n+\t\tp++;\n+\t      }\n \n \t    /* Don't count these registers again.  */\n \t    for (j = 0; j < group_size[class]; j++)"}]}