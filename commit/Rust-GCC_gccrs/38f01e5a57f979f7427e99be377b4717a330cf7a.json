{"sha": "38f01e5a57f979f7427e99be377b4717a330cf7a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhmMDFlNWE1N2Y5NzlmNzQyN2U5OWJlMzc3YjQ3MTdhMzMwY2Y3YQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1998-10-01T12:31:22Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-10-01T12:31:22Z"}, "message": "cp-tree.h (FORMAT_VBASE_NAME): New macro.\n\n\t* cp-tree.h (FORMAT_VBASE_NAME): New macro.\n\t* class.c (build_vbase_pointer): Use it.\n\t* rtti.c (expand_class_desc): Likewise.\n\t* tree.c (build_vbase_pointer_fields): Likewise.\n\nFrom-SVN: r22713", "tree": {"sha": "cd6ba427351ab942ae84801955a4b69eb55427f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cd6ba427351ab942ae84801955a4b69eb55427f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38f01e5a57f979f7427e99be377b4717a330cf7a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38f01e5a57f979f7427e99be377b4717a330cf7a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38f01e5a57f979f7427e99be377b4717a330cf7a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38f01e5a57f979f7427e99be377b4717a330cf7a/comments", "author": null, "committer": null, "parents": [{"sha": "43cab252f98671186dc5aae755081c183a8f4595", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43cab252f98671186dc5aae755081c183a8f4595", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43cab252f98671186dc5aae755081c183a8f4595"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "bb2a13bcc64d75be78e6b09ebd591906d97a4333", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=38f01e5a57f979f7427e99be377b4717a330cf7a", "patch": "@@ -1,3 +1,10 @@\n+1998-10-01  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* cp-tree.h (FORMAT_VBASE_NAME): New macro.\n+\t* class.c (build_vbase_pointer): Use it.\n+\t* rtti.c (expand_class_desc): Likewise.\n+\t* tree.c (build_vbase_pointer_fields): Likewise.\n+\n Thu Oct  1 10:43:45 1998  Nick Clifton  <nickc@cygnus.com>\n \n \t* decl.c (start_decl): Add invocation of"}, {"sha": "8e7d715eb89674b6087aeb568f76687555a2b501", "filename": "gcc/cp/class.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=38f01e5a57f979f7427e99be377b4717a330cf7a", "patch": "@@ -146,9 +146,8 @@ build_vbase_pointer (exp, type)\n      tree exp, type;\n {\n   char *name;\n+  FORMAT_VBASE_NAME (name, type);\n \n-  name = (char *) alloca (TYPE_NAME_LENGTH (type) + sizeof (VBASE_NAME) + 1);\n-  sprintf (name, VBASE_NAME_FORMAT, TYPE_NAME_STRING (type));\n   return build_component_ref (exp, get_identifier (name), NULL_TREE, 0);\n }\n "}, {"sha": "8fe0bd45b1fbd4f070bff0bb99d2911dd45bff16", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=38f01e5a57f979f7427e99be377b4717a330cf7a", "patch": "@@ -2140,6 +2140,13 @@ extern int current_function_parms_stored;\n   && IDENTIFIER_POINTER (ID_NODE)[2] == 'b' \\\n   && IDENTIFIER_POINTER (ID_NODE)[3] == JOINER)\n \n+/* Store the vbase pointer field name for type TYPE into pointer BUF.  */\n+#define FORMAT_VBASE_NAME(BUF,TYPE) do {\t\t\t\t\\\n+  BUF = (char *) alloca (TYPE_ASSEMBLER_NAME_LENGTH (TYPE)\t\t\\\n+\t\t\t + sizeof (VBASE_NAME) + 1);\t\t\t\\\n+  sprintf (BUF, VBASE_NAME_FORMAT, TYPE_ASSEMBLER_NAME_STRING (TYPE));\t\\\n+} while (0)\n+\n #define TEMP_NAME_P(ID_NODE) (!strncmp (IDENTIFIER_POINTER (ID_NODE), AUTO_TEMP_NAME, sizeof (AUTO_TEMP_NAME)-1))\n #define VFIELD_NAME_P(ID_NODE) (!strncmp (IDENTIFIER_POINTER (ID_NODE), VFIELD_NAME, sizeof(VFIELD_NAME)-1))\n "}, {"sha": "63a734db399949704ef6bd55c042b8c1ea030a6c", "filename": "gcc/cp/rtti.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Frtti.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Frtti.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Frtti.c?ref=38f01e5a57f979f7427e99be377b4717a330cf7a", "patch": "@@ -801,8 +801,7 @@ expand_class_desc (tdecl, type)\n \t  char *name;\n \t  tree field;\n \n-\t  name = (char *) alloca (TYPE_NAME_LENGTH (t)+sizeof (VBASE_NAME)+1);\n-\t  sprintf (name, VBASE_NAME_FORMAT, TYPE_NAME_STRING (t));\n+\t  FORMAT_VBASE_NAME (name, t);\n \t  field = lookup_field (type, get_identifier (name), 0, 0);\n \t  offset = size_binop (FLOOR_DIV_EXPR, \n \t\tDECL_FIELD_BITPOS (field), size_int (BITS_PER_UNIT));"}, {"sha": "e66cbff5b603fa0d1f7ebacc3270f6bd28ecc0c3", "filename": "gcc/cp/tree.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38f01e5a57f979f7427e99be377b4717a330cf7a/gcc%2Fcp%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftree.c?ref=38f01e5a57f979f7427e99be377b4717a330cf7a", "patch": "@@ -882,8 +882,7 @@ build_vbase_pointer_fields (rec)\n       if (TREE_VIA_VIRTUAL (base_binfo))\n \t{\n \t  int j;\n-\t  char *name = (char *)alloca (TYPE_NAME_LENGTH (basetype)\n-\t\t\t\t       + sizeof (VBASE_NAME) + 1);\n+\t  char *name;\n \n \t  /* The offset for a virtual base class is only used in computing\n \t     virtual function tables and for initializing virtual base\n@@ -903,7 +902,7 @@ build_vbase_pointer_fields (rec)\n \t\t\t\t   ))\n \t\tgoto got_it;\n \t    }\n-\t  sprintf (name, VBASE_NAME_FORMAT, TYPE_NAME_STRING (basetype));\n+\t  FORMAT_VBASE_NAME (name, basetype);\n \t  decl = build_lang_field_decl (FIELD_DECL, get_identifier (name),\n \t\t\t\t\tbuild_pointer_type (basetype));\n \t  /* If you change any of the below, take a look at all the"}]}