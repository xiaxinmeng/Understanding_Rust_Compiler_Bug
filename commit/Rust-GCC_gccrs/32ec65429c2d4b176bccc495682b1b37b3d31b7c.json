{"sha": "32ec65429c2d4b176bccc495682b1b37b3d31b7c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzJlYzY1NDI5YzJkNGIxNzZiY2NjNDk1NjgyYjFiMzdiM2QzMWI3Yw==", "commit": {"author": {"name": "Geoffrey Keating", "email": "geoffk@apple.com", "date": "2007-02-20T16:45:38Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2007-02-20T16:45:38Z"}, "message": "Index: gcc/ChangeLog\n2007-02-20  Geoffrey Keating  <geoffk@apple.com>\n\n\t* config/darwin.h (LINK_SPEC): Default -mmacosx-version-min only\n\tif user didn't pass it.\n\t* config/i386/darwin.h (CC1_SPEC): Likewise.\n\t* config/rs6000/darwin.h (CC1_SPEC): Likewise.\n\t(DARWIN_MINVERSION_SPEC): Don't depend on user's setting of\n\t-mmacosx-version-min.\n\nIndex: gcc/testsuite/ChangeLog\n2007-02-20  Geoffrey Keating  <geoffk@apple.com>\n\n\t* gcc.dg/darwin-minversion-1.c: New.\n\t* gcc.dg/darwin-minversion-2.c: New.\n\nFrom-SVN: r122166", "tree": {"sha": "e5332ce984509491d26f7b19e8e97225f98a4843", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5332ce984509491d26f7b19e8e97225f98a4843"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/32ec65429c2d4b176bccc495682b1b37b3d31b7c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32ec65429c2d4b176bccc495682b1b37b3d31b7c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/32ec65429c2d4b176bccc495682b1b37b3d31b7c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/32ec65429c2d4b176bccc495682b1b37b3d31b7c/comments", "author": {"login": "geoffk01", "id": 31905243, "node_id": "MDQ6VXNlcjMxOTA1MjQz", "avatar_url": "https://avatars.githubusercontent.com/u/31905243?v=4", "gravatar_id": "", "url": "https://api.github.com/users/geoffk01", "html_url": "https://github.com/geoffk01", "followers_url": "https://api.github.com/users/geoffk01/followers", "following_url": "https://api.github.com/users/geoffk01/following{/other_user}", "gists_url": "https://api.github.com/users/geoffk01/gists{/gist_id}", "starred_url": "https://api.github.com/users/geoffk01/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/geoffk01/subscriptions", "organizations_url": "https://api.github.com/users/geoffk01/orgs", "repos_url": "https://api.github.com/users/geoffk01/repos", "events_url": "https://api.github.com/users/geoffk01/events{/privacy}", "received_events_url": "https://api.github.com/users/geoffk01/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c7e576cf1547b62332291d719985655c85cbbc6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7e576cf1547b62332291d719985655c85cbbc6d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7e576cf1547b62332291d719985655c85cbbc6d"}], "stats": {"total": 46, "additions": 41, "deletions": 5}, "files": [{"sha": "61e247bde305ca47437d975410eebb652ea7564f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -1,3 +1,12 @@\n+2007-02-20  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* config/darwin.h (LINK_SPEC): Default -mmacosx-version-min only\n+\tif user didn't pass it.\n+\t* config/i386/darwin.h (CC1_SPEC): Likewise.\n+\t* config/rs6000/darwin.h (CC1_SPEC): Likewise.\n+\t(DARWIN_MINVERSION_SPEC): Don't depend on user's setting of\n+\t-mmacosx-version-min.\n+\n 2007-02-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \t    Uros Bizjak  <ubizjak@gmail.com>\n "}, {"sha": "43c7937b7b65e30c21d8848d8f7554dc18b07534", "filename": "gcc/config/darwin.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Fconfig%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Fconfig%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fdarwin.h?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -297,7 +297,8 @@ extern GTY(()) int darwin_ms_struct;\n    %{headerpad_max_install_names*} \\\n    %{Zimage_base*:-image_base %*} \\\n    %{Zinit*:-init %*} \\\n-   -macosx_version_min %(darwin_minversion) \\\n+   %{!mmacosx-version-min=*:-macosx_version_min %(darwin_minversion)} \\\n+   %{mmacosx-version-min=*:-macosx_version_min %*} \\\n    %{nomultidefs} \\\n    %{Zmulti_module:-multi_module} %{Zsingle_module:-single_module} \\\n    %{Zmultiply_defined*:-multiply_defined %*} \\"}, {"sha": "e507d59f6ec1096ea03fcd573911d901b532246a", "filename": "gcc/config/i386/darwin.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Fconfig%2Fi386%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Fconfig%2Fi386%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fdarwin.h?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -74,7 +74,7 @@ Boston, MA 02110-1301, USA.  */\n \n #undef CC1_SPEC\n #define CC1_SPEC \"%{!mkernel:%{!static:%{!mdynamic-no-pic:-fPIC}}} \\\n-  -mmacosx-version-min=%(darwin_minversion) \\\n+  %{!mmacosx-version-min=*:-mmacosx-version-min=%(darwin_minversion)} \\\n   %{g: %{!fno-eliminate-unused-debug-symbols: -feliminate-unused-debug-symbols }}\"\n \n #undef ASM_SPEC"}, {"sha": "6aa7d65a40ba4d455f4ae7b528876a06a48dc85a", "filename": "gcc/config/rs6000/darwin.h", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Fconfig%2Frs6000%2Fdarwin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Fconfig%2Frs6000%2Fdarwin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fdarwin.h?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -93,7 +93,7 @@\n #define CC1_SPEC \"\\\n   %{g: %{!fno-eliminate-unused-debug-symbols: -feliminate-unused-debug-symbols }} \\\n   %{static: %{Zdynamic: %e conflicting code gen style switches are used}}\\\n-  -mmacosx-version-min=%(darwin_minversion) \\\n+  %{!mmacosx-version-min=*:-mmacosx-version-min=%(darwin_minversion)} \\\n   %{!mkernel:%{!static:%{!mdynamic-no-pic:-fPIC}}}\"\n \n #define DARWIN_ARCH_SPEC \"%{m64:ppc64;:ppc}\"\n@@ -123,8 +123,7 @@\n \n /* Determine a minimum version based on compiler options.  */\n #define DARWIN_MINVERSION_SPEC\t\\\n-  \"%{mmacosx-version-min=*:%*;\t\\\n-     m64:10.4;\t\t\t\\\n+  \"%{m64:10.4;\t\t\t\\\n      shared-libgcc:10.3;\t\\\n      :10.1}\"\n "}, {"sha": "d1e67da965fda0bdcca94448c93de7ffa2de5705", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -1,3 +1,8 @@\n+2007-02-20  Geoffrey Keating  <geoffk@apple.com>\n+\n+\t* gcc.dg/darwin-minversion-1.c: New.\n+\t* gcc.dg/darwin-minversion-2.c: New.\n+\n 2007-02-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* gcc.dg/builtins-34.c: Add scalb/scalbn/scalbln cases."}, {"sha": "d8a3243bb5509d718123125f2216809f3f5b260d", "filename": "gcc/testsuite/gcc.dg/darwin-minversion-1.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-minversion-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-minversion-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-minversion-1.c?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -0,0 +1,11 @@\n+/* Basic test for -mmacosx-version-min switch on Darwin.  */\n+/* { dg-options \"-mmacosx-version-min=10.1\" } */\n+/* { dg-do run { target *-*-darwin* } } */\n+\n+int main(void)\n+{\n+#if __ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__ != 1010\n+  fail me;\n+#endif\n+  return 0;\n+}"}, {"sha": "fd4975a529266a49dc80ded6b0ffbab55ed4a085", "filename": "gcc/testsuite/gcc.dg/darwin-minversion-2.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-minversion-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/32ec65429c2d4b176bccc495682b1b37b3d31b7c/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-minversion-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdarwin-minversion-2.c?ref=32ec65429c2d4b176bccc495682b1b37b3d31b7c", "patch": "@@ -0,0 +1,11 @@\n+/* Basic test for -mmacosx-version-min switch on Darwin.  */\n+/* { dg-options \"-mmacosx-version-min=10.1 -mmacosx-version-min=10.3\" } */\n+/* { dg-do run { target *-*-darwin* } } */\n+\n+int main(void)\n+{\n+#if __ENVIRONMENT_MAC_OS_X_VERSION_MIN_REQUIRED__ != 1030\n+  fail me;\n+#endif\n+  return 0;\n+}"}]}