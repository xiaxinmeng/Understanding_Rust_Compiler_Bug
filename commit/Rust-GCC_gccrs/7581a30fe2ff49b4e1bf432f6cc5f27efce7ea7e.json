{"sha": "7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU4MWEzMGZlMmZmNDliNGUxYmY0MzJmNmNjNWYyN2VmY2U3ZWE3ZQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@cygnus.com", "date": "1997-10-26T20:33:27Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1997-10-26T20:33:27Z"}, "message": "expr.c (expand_expr, [...]): Optimize a reference to an element in a constant string.\n\n        * expr.c (expand_expr, case INDIRECT_REF): Optimize a reference\n        to an element in a constant string.\n\nFrom-SVN: r16195", "tree": {"sha": "88ec44b5f1866a21232e71ea7a665d891e885af5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/88ec44b5f1866a21232e71ea7a665d891e885af5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e/comments", "author": null, "committer": null, "parents": [{"sha": "edaa4ee0621bfd1747c56e0f77edc72c29510bfe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/edaa4ee0621bfd1747c56e0f77edc72c29510bfe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/edaa4ee0621bfd1747c56e0f77edc72c29510bfe"}], "stats": {"total": 17, "additions": 17, "deletions": 0}, "files": [{"sha": "5cb05f8aaabad750cce25e25cea494699fbc7e3a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e", "patch": "@@ -1,3 +1,8 @@\n+Sun Oct 26 13:31:47 1997  Jim Wilson  (wilson@cygnus.com)\n+\n+\t* expr.c (expand_expr, case INDIRECT_REF): Optimize a reference\n+\tto an element in a constant string.\n+\n Sun Oct 26 11:41:49 1997  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* dwarf2out.c (output_call_frame_info): The CIE pointer is now a 32"}, {"sha": "5cd1b435780ea1460c1b452345cba5abca2ca5af", "filename": "gcc/expr.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=7581a30fe2ff49b4e1bf432f6cc5f27efce7ea7e", "patch": "@@ -5406,6 +5406,18 @@ expand_expr (exp, target, tmode, modifier)\n       {\n \ttree exp1 = TREE_OPERAND (exp, 0);\n \ttree exp2;\n+\ttree index;\n+ \ttree string = string_constant (exp1, &index);\n+ \tint i;\n+ \n+ \tif (string\n+ \t    && TREE_CODE (string) == STRING_CST\n+ \t    && TREE_CODE (index) == INTEGER_CST\n+ \t    && !TREE_INT_CST_HIGH (index)\n+ \t    && (i = TREE_INT_CST_LOW (index)) < TREE_STRING_LENGTH (string)\n+ \t    && GET_MODE_CLASS (mode) == MODE_INT\n+ \t    && GET_MODE_SIZE (mode) == 1)\n+ \t  return GEN_INT (TREE_STRING_POINTER (string)[i]);\n \n \top0 = expand_expr (exp1, NULL_RTX, VOIDmode, EXPAND_SUM);\n \top0 = memory_address (mode, op0);"}]}