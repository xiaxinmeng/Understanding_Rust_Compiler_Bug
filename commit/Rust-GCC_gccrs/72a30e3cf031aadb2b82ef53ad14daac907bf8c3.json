{"sha": "72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJhMzBlM2NmMDMxYWFkYjJiODJlZjUzYWQxNGRhYWM5MDdiZjhjMw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-03-01T12:40:38Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-03-01T12:40:38Z"}, "message": "target-supports.exp (check_effective_target_ucn_nocache): New function.\n\n\t* lib/target-supports.exp (check_effective_target_ucn_nocache):\n\tNew function.\n\t(check_effective_target_ucn): Likewise.\n\n\t* g++.dg/other/ucnid-1.C: Don't XFAIL on *-*-solaris2.*, but skip\n\tif !ucn.\n\t* gcc.dg/ucnid-2.c: Likewise.\n\t* gcc.dg/ucnid-3.c: Likewise.\n\t* gcc.dg/ucnid-4.c: Likewise.\n\t* gcc.dg/ucnid-11.c: Likewise.\n\t* gcc.dg/ucnid-12.c: Likewise.\n\t* gcc.dg/ucnid-6.c: Skip if !ucn.\n\t* gcc.dg/ucnid-9.c: Likewise.\n\nFrom-SVN: r157140", "tree": {"sha": "611cc87c8dcf96fb716620d95aa92fefe1fa868a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/611cc87c8dcf96fb716620d95aa92fefe1fa868a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "48f8763ff42494e0fb7489e3285bfea422b2d153", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/48f8763ff42494e0fb7489e3285bfea422b2d153", "html_url": "https://github.com/Rust-GCC/gccrs/commit/48f8763ff42494e0fb7489e3285bfea422b2d153"}], "stats": {"total": 66, "additions": 58, "deletions": 8}, "files": [{"sha": "c399e8030c7e20e2e3c5e6c7c080ade5d21799bb", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,3 +1,19 @@\n+2010-03-01  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\t* lib/target-supports.exp (check_effective_target_ucn_nocache):\n+\tNew function.\n+\t(check_effective_target_ucn): Likewise.\n+\n+\t* g++.dg/other/ucnid-1.C: Don't XFAIL on *-*-solaris2.*, but skip\n+\tif !ucn.\n+\t* gcc.dg/ucnid-2.c: Likewise.\n+\t* gcc.dg/ucnid-3.c: Likewise.\n+\t* gcc.dg/ucnid-4.c: Likewise.\n+\t* gcc.dg/ucnid-11.c: Likewise.\n+\t* gcc.dg/ucnid-12.c: Likewise.\n+\t* gcc.dg/ucnid-6.c: Skip if !ucn.\n+\t* gcc.dg/ucnid-9.c: Likewise.\n+\n 2010-03-01  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* gcc.target/i386/pr32000-2.c: Add missing include and exclude"}, {"sha": "9a2728f25bb85c0fa74eb68c40d7832fbc1f1412", "filename": "gcc/testsuite/g++.dg/other/ucnid-1.C", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fucnid-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fucnid-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fother%2Fucnid-1.C?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,6 +1,7 @@\n /* { dg-do run } */\n /* { dg-options \"-fextended-identifiers\" } */\n-/* { dg-xfail-if \"\" { powerpc-ibm-aix* *-*-solaris2.* } { \"*\" } { \"\" } } */\n+/* { dg-xfail-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n #include <cstdlib>\n \n int \\u00C0(void) { return 1; }"}, {"sha": "3faa4927a6f81ee9ebb75703bbc8480027a524e4", "filename": "gcc/testsuite/gcc.dg/ucnid-11.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-11.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-11.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-11.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n-/* { dg-xfail-if \"\" { powerpc-ibm-aix* *-*-solaris2.* } { \"*\" } { \"\" } } */\n+/* { dg-xfail-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-skip-if \"-fdata-sections not supported\" { { hppa*-*-hpux* } && { ! hppa*64*-*-* } } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers -fdata-sections\" } */\n "}, {"sha": "9ea2836b795480d2c843f0e7e760737756074ec6", "filename": "gcc/testsuite/gcc.dg/ucnid-12.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-12.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n-/* { dg-xfail-if \"\" { powerpc-ibm-aix* *-*-solaris2.* } { \"*\" } { \"\" } } */\n+/* { dg-xfail-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-skip-if \"-ffunction-sections not supported\" { { hppa*-*-hpux* } && { ! hppa*64*-*-* } } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers -ffunction-sections\" } */\n "}, {"sha": "9cbc7504cec88ba025ddfcd35750793f17734d65", "filename": "gcc/testsuite/gcc.dg/ucnid-2.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-2.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n-/* { dg-xfail-if \"\" { powerpc-ibm-aix* *-*-solaris2.* } { \"*\" } { \"\" } } */\n+/* { dg-xfail-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers\" } */\n void abort (void);\n "}, {"sha": "5ea0d03bca150dc5c4f24d8e06ce556944171a17", "filename": "gcc/testsuite/gcc.dg/ucnid-3.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-3.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n-/* { dg-xfail-if \"\" { powerpc-ibm-aix* *-*-solaris2.* } { \"*\" } { \"\" } } */\n+/* { dg-xfail-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers\" } */\n void abort (void);\n "}, {"sha": "a18e6e302a6a333d3026c26dd3e79ef0b4a5ebe6", "filename": "gcc/testsuite/gcc.dg/ucnid-4.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-4.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n-/* { dg-xfail-if \"\" { powerpc-ibm-aix* *-*-solaris2.* } { \"*\" } { \"\" } } */\n+/* { dg-xfail-if \"\" { powerpc-ibm-aix* } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers\" } */\n void abort (void);\n "}, {"sha": "5713a84f265f4282fe354fc01dcc5da0fc1a058f", "filename": "gcc/testsuite/gcc.dg/ucnid-6.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-6.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-6.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-6.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do run } */\n /* { dg-xfail-if \"\" { \"powerpc-ibm-aix*\" } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers -save-temps\" } */\n void abort (void);\n "}, {"sha": "a6f91184a987f8aba02125cd9cd8f1d2bd8b44f9", "filename": "gcc/testsuite/gcc.dg/ucnid-9.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fucnid-9.c?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -2,6 +2,7 @@\n    conversions.  */\n /* { dg-do run } */\n /* { dg-xfail-if \"\" { \"powerpc-ibm-aix*\" } { \"*\" } { \"\" } } */\n+/* { dg-skip-if \"\" { ! ucn } { \"*\" } { \"\" } } */\n /* { dg-options \"-std=c99 -fextended-identifiers -fexec-charset=ISO-8859-1\" } */\n /* { dg-require-iconv \"ISO-8859-1\" } */\n "}, {"sha": "924a595d1d8df7733e73804fc37d84bd629a1a10", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 28, "deletions": 2, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72a30e3cf031aadb2b82ef53ad14daac907bf8c3/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=72a30e3cf031aadb2b82ef53ad14daac907bf8c3", "patch": "@@ -1,4 +1,4 @@\n-#   Copyright (C) 1999, 2001, 2003, 2004, 2005, 2006, 2007, 2008, 2009\n+#   Copyright (C) 1999, 2001, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010\n #    Free Software Foundation, Inc.\n \n # This program is free software; you can redistribute it and/or modify\n@@ -1336,7 +1336,7 @@ proc check_effective_target_dfp { } {\n }\n \n # Return 1 if the target supports linking and executing Decimal Floating\n-# Point, # 0 otherwise.\n+# Point, 0 otherwise.\n #\n # This won't change for different subtargets so cache the result.\n \n@@ -1346,6 +1346,32 @@ proc check_effective_target_dfprt { } {\n     }]\n }\n \n+# Return 1 if the target supports compiling and assembling UCN, 0 otherwise.\n+\n+proc check_effective_target_ucn_nocache { } {\n+    # -std=c99 is only valid for C\n+    if [check_effective_target_c] {\n+\tset ucnopts \"-std=c99\"\n+    }\n+    append ucnopts \" -fextended-identifiers\"\n+    verbose \"check_effective_target_ucn_nocache: compiling source\" 2\n+    set ret [check_no_compiler_messages_nocache ucn object {\n+\tint \\u00C0;\n+    } $ucnopts]\n+    verbose \"check_effective_target_ucn_nocache: returning $ret\" 2\n+    return $ret\n+}\n+\n+# Return 1 if the target supports compiling and assembling UCN, 0 otherwise.\n+#\n+# This won't change for different subtargets, so cache the result.\n+\n+proc check_effective_target_ucn { } {\n+    return [check_cached_effective_target ucn {\n+\tcheck_effective_target_ucn_nocache\n+    }]\n+}\n+\n # Return 1 if the target needs a command line argument to enable a SIMD\n # instruction set.\n "}]}