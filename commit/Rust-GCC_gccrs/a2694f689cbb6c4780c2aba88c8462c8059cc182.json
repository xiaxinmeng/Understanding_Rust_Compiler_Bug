{"sha": "a2694f689cbb6c4780c2aba88c8462c8059cc182", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI2OTRmNjg5Y2JiNmM0NzgwYzJhYmE4OGM4NDYyYzgwNTljYzE4Mg==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2005-10-11T23:35:27Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-10-11T23:35:27Z"}, "message": "re PR libfortran/24313 (complex sqrt function does not return principal value)\n\n PR libgfortran/24313\n* c99_functions.c (csqrtf, csqrt): Fix choice of branch cut.  Note\n  csqrt{f} were imported from glibc, and this bug is still present\n  there. glibc PR is 1146.\n\nFrom-SVN: r105274", "tree": {"sha": "3f30663653c6b162b724455b8cf3773c387ba347", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3f30663653c6b162b724455b8cf3773c387ba347"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a2694f689cbb6c4780c2aba88c8462c8059cc182", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2694f689cbb6c4780c2aba88c8462c8059cc182", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a2694f689cbb6c4780c2aba88c8462c8059cc182", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a2694f689cbb6c4780c2aba88c8462c8059cc182/comments", "author": null, "committer": null, "parents": [{"sha": "55792875db8332861380d621fc5a2877c5cc2617", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/55792875db8332861380d621fc5a2877c5cc2617", "html_url": "https://github.com/Rust-GCC/gccrs/commit/55792875db8332861380d621fc5a2877c5cc2617"}], "stats": {"total": 35, "additions": 33, "deletions": 2}, "files": [{"sha": "d21780a7726399a8bc424ac7d34c88f8d9805d5b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2694f689cbb6c4780c2aba88c8462c8059cc182/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2694f689cbb6c4780c2aba88c8462c8059cc182/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a2694f689cbb6c4780c2aba88c8462c8059cc182", "patch": "@@ -1,3 +1,8 @@\n+2005-10-11  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR libgfortran/24313\n+\tgfortran.dg/csqrt.f: New test.\n+\n 2005-10-11  Ian Lance Taylor  <ian@airs.com>\n \n \tPR c++/8057"}, {"sha": "66e08424e3ae0cf2487fbd15ad78bca81202362d", "filename": "gcc/testsuite/gfortran.dg/csqrt_2.f", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2694f689cbb6c4780c2aba88c8462c8059cc182/gcc%2Ftestsuite%2Fgfortran.dg%2Fcsqrt_2.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2694f689cbb6c4780c2aba88c8462c8059cc182/gcc%2Ftestsuite%2Fgfortran.dg%2Fcsqrt_2.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcsqrt_2.f?ref=a2694f689cbb6c4780c2aba88c8462c8059cc182", "patch": "@@ -0,0 +1,19 @@\n+c { dg-do run { xfail *-*-linux-gnu } }\n+c Fix PR libgfortran/24313\n+      complex x, y\n+      complex z\n+      z = cmplx(0.707106, -0.707106)\n+      x = cmplx(0.0,-1.0)\n+      y = sqrt(x)\n+      if (abs(y - z) / abs(z) > 1.e-4) call abort\n+\n+      x = cmplx(tiny(1.),-1.0)\n+      y = sqrt(x)\n+      if (abs(y - z) / abs(z) > 1.e-4) call abort\n+\n+      x = cmplx(-tiny(1.),-1.0)\n+      y = sqrt(x)\n+      if (abs(y - z) / abs(z) > 1.e-4) call abort\n+\n+      end\n+"}, {"sha": "cca3bbe90807bef629b53a3dcdf6c58576458033", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2694f689cbb6c4780c2aba88c8462c8059cc182/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2694f689cbb6c4780c2aba88c8462c8059cc182/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=a2694f689cbb6c4780c2aba88c8462c8059cc182", "patch": "@@ -1,3 +1,10 @@\n+2005-10-11  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR libgfortran/24313\n+\t*  c99_functions.c (csqrtf, csqrt): Fix choice of branch cut.  Note\n+\tcsqrt{f} were imported from glibc, and this bug is still present \n+\tthere. glibc PR is 1146.\n+\n 2005-10-07  Janne Blomqvist <jblomqvi@cc.hut.fi>\n \n \tPR fortran/16339"}, {"sha": "906a85abfef023184b62ee5197763526384a6382", "filename": "libgfortran/intrinsics/c99_functions.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a2694f689cbb6c4780c2aba88c8462c8059cc182/libgfortran%2Fintrinsics%2Fc99_functions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a2694f689cbb6c4780c2aba88c8462c8059cc182/libgfortran%2Fintrinsics%2Fc99_functions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fintrinsics%2Fc99_functions.c?ref=a2694f689cbb6c4780c2aba88c8462c8059cc182", "patch": "@@ -669,7 +669,7 @@ csqrtf (float complex z)\n \n       r = sqrtf (0.5 * fabsf (im));\n \n-      COMPLEX_ASSIGN (v, copysignf (r, im), r);\n+      COMPLEX_ASSIGN (v, r, copysignf (r, im));\n     }\n   else\n     {\n@@ -722,7 +722,7 @@ csqrt (double complex z)\n \n       r = sqrt (0.5 * fabs (im));\n \n-      COMPLEX_ASSIGN (v, copysign (r, im), r);\n+      COMPLEX_ASSIGN (v, r, copysign (r, im));\n     }\n   else\n     {"}]}