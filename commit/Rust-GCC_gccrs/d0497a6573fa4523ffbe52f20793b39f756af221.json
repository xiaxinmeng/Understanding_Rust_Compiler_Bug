{"sha": "d0497a6573fa4523ffbe52f20793b39f756af221", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDA0OTdhNjU3M2ZhNDUyM2ZmYmU1MmYyMDc5M2IzOWY3NTZhZjIyMQ==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargls@comcast.net", "date": "2005-12-12T20:13:37Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2005-12-12T20:13:37Z"}, "message": "re PR fortran/25078 (EQUILALENCE requires two or more objects)\n\n        PR fortran/25078\n        * match.c (gfc_match_equivalence):  Count number of objects.\n\n        gfortran.dg/equiv_5.f90:  New test.\n\nFrom-SVN: r108426", "tree": {"sha": "7f8296ae7a013335025b997f4562e35e7a9461d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7f8296ae7a013335025b997f4562e35e7a9461d9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d0497a6573fa4523ffbe52f20793b39f756af221", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0497a6573fa4523ffbe52f20793b39f756af221", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d0497a6573fa4523ffbe52f20793b39f756af221", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d0497a6573fa4523ffbe52f20793b39f756af221/comments", "author": null, "committer": null, "parents": [{"sha": "0e0ed594114997686efba9a45b8782ce87c465c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e0ed594114997686efba9a45b8782ce87c465c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e0ed594114997686efba9a45b8782ce87c465c3"}], "stats": {"total": 29, "additions": 29, "deletions": 0}, "files": [{"sha": "d480b6ff5338b9b447a0e71d05839472181f4541", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=d0497a6573fa4523ffbe52f20793b39f756af221", "patch": "@@ -1,3 +1,8 @@\n+2005-12-12  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR fortran/25078\n+\t* match.c (gfc_match_equivalence):  Count number of objects.\n+\n 2005-12-11  Aldy Hernandez  <aldyh@redhat.com>\n \n         * lang.opt: Add RejectNegative to ffixed-form and ffree-form."}, {"sha": "fd4fe33cf129236bb06916fbc089ec14c2247af0", "filename": "gcc/fortran/match.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ffortran%2Fmatch.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ffortran%2Fmatch.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fmatch.c?ref=d0497a6573fa4523ffbe52f20793b39f756af221", "patch": "@@ -2599,6 +2599,7 @@ gfc_match_equivalence (void)\n   match m;\n   gfc_common_head *common_head = NULL;\n   bool common_flag;\n+  int cnt;\n \n   tail = NULL;\n \n@@ -2616,6 +2617,7 @@ gfc_match_equivalence (void)\n \n       set = eq;\n       common_flag = FALSE;\n+      cnt = 0;\n \n       for (;;)\n \t{\n@@ -2625,6 +2627,9 @@ gfc_match_equivalence (void)\n \t  if (m == MATCH_NO)\n \t    goto syntax;\n \n+\t  /*  count the number of objects.  */\n+\t  cnt++;\n+\n \t  if (gfc_match_char ('%') == MATCH_YES)\n \t    {\n \t      gfc_error (\"Derived type component %C is not a \"\n@@ -2655,13 +2660,20 @@ gfc_match_equivalence (void)\n \n \t  if (gfc_match_char (')') == MATCH_YES)\n \t    break;\n+\n \t  if (gfc_match_char (',') != MATCH_YES)\n \t    goto syntax;\n \n \t  set->eq = gfc_get_equiv ();\n \t  set = set->eq;\n \t}\n \n+      if (cnt < 2)\n+\t{\n+\t  gfc_error (\"EQUIVALENCE at %C requires two or more objects\");\n+\t  goto cleanup;\n+\t}\n+\n       /* If one of the members of an equivalence is in common, then\n \t mark them all as being in common.  Before doing this, check\n \t that members of the equivalence group are not in different"}, {"sha": "370065ddfa425fa891fe4af004b0c7bc99df4f3a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d0497a6573fa4523ffbe52f20793b39f756af221", "patch": "@@ -1,3 +1,8 @@\n+2005-12-12  Steven G. Kargl  <kargls@comcast.net>\n+\n+\tPR fortran/25078\n+\tgfortran.dg/equiv_5.f90:  New test.\n+\n 2005-12-12  Daniel Berlin  <dberlin@dberlin.org>\n \n \t* gcc.dg/tree-ssa/ssa-pre-2.c: Update due to reassociation changes."}, {"sha": "70b458bea61379edeac43af4f0f112bb83c2f2dc", "filename": "gcc/testsuite/gfortran.dg/equiv_5.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ftestsuite%2Fgfortran.dg%2Fequiv_5.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d0497a6573fa4523ffbe52f20793b39f756af221/gcc%2Ftestsuite%2Fgfortran.dg%2Fequiv_5.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fequiv_5.f90?ref=d0497a6573fa4523ffbe52f20793b39f756af221", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do compile }\n+! PR fortran/25078\n+! An equivalence statement requires two or more objcets.\n+program a\n+  real x\n+  equivalence(x) ! { dg-error \"two or more objects\" }\n+end program a"}]}