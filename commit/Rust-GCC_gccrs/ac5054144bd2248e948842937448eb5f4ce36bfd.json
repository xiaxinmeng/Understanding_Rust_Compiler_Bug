{"sha": "ac5054144bd2248e948842937448eb5f4ce36bfd", "node_id": "C_kwDOANBUbNoAKGFjNTA1NDE0NGJkMjI0OGU5NDg4NDI5Mzc0NDhlYjVmNGNlMzZiZmQ", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2022-11-21T22:42:14Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2022-11-22T14:27:02Z"}, "message": "c++: don't use strchrnul [PR107781]\n\nThe contracts implementation was using strchrnul, which is a glibc\nextension, so bootstrap broke on non-glibc targets.  Use C89 strcspn\ninstead.\n\n\tPR c++/107781\n\ngcc/cp/ChangeLog:\n\n\t* contracts.cc (role_name_equal): Use strcspn instead\n\tof strchrnul.", "tree": {"sha": "707b6dfbb8916e2df26f9141684e0193e1ffef49", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/707b6dfbb8916e2df26f9141684e0193e1ffef49"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ac5054144bd2248e948842937448eb5f4ce36bfd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac5054144bd2248e948842937448eb5f4ce36bfd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ac5054144bd2248e948842937448eb5f4ce36bfd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ac5054144bd2248e948842937448eb5f4ce36bfd/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "4eb3a48698b2ca43967a4e7e7cfc0408192e85b2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4eb3a48698b2ca43967a4e7e7cfc0408192e85b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4eb3a48698b2ca43967a4e7e7cfc0408192e85b2"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "a90970167686ba8461be3a6c794da44a4be1203c", "filename": "gcc/cp/contracts.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ac5054144bd2248e948842937448eb5f4ce36bfd/gcc%2Fcp%2Fcontracts.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ac5054144bd2248e948842937448eb5f4ce36bfd/gcc%2Fcp%2Fcontracts.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcontracts.cc?ref=ac5054144bd2248e948842937448eb5f4ce36bfd", "patch": "@@ -210,8 +210,8 @@ lookup_concrete_semantic (const char *name)\n static bool\n role_name_equal (const char *role, const char *name)\n {\n-  size_t role_len = strchrnul (role, ':') - role;\n-  size_t name_len = strchrnul (name, ':') - name;\n+  size_t role_len = strcspn (role, \":\");\n+  size_t name_len = strcspn (name, \":\");\n   if (role_len != name_len)\n     return false;\n   return strncmp (role, name, role_len) == 0;"}]}