{"sha": "648a09eed9f2b429e36353da9f603e79caa6c18e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjQ4YTA5ZWVkOWYyYjQyOWUzNjM1M2RhOWY2MDNlNzljYWE2YzE4ZQ==", "commit": {"author": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-01-25T00:19:48Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1994-01-25T00:19:48Z"}, "message": "(copy_loop_body): When delete simplified condjump,\n\nprotect the label, so that it doesn't get deleted also.\n\nFrom-SVN: r6428", "tree": {"sha": "fcc71d7992c3fc7785843860802b39d47c341db8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fcc71d7992c3fc7785843860802b39d47c341db8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/648a09eed9f2b429e36353da9f603e79caa6c18e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/648a09eed9f2b429e36353da9f603e79caa6c18e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/648a09eed9f2b429e36353da9f603e79caa6c18e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/648a09eed9f2b429e36353da9f603e79caa6c18e/comments", "author": null, "committer": null, "parents": [{"sha": "453dfc7887f0558aa1c79c91d412a4d35271dece", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/453dfc7887f0558aa1c79c91d412a4d35271dece", "html_url": "https://github.com/Rust-GCC/gccrs/commit/453dfc7887f0558aa1c79c91d412a4d35271dece"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "20ab17b0dfc9c4fa3478b1be8a2d44ff43eed71b", "filename": "gcc/unroll.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/648a09eed9f2b429e36353da9f603e79caa6c18e/gcc%2Funroll.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/648a09eed9f2b429e36353da9f603e79caa6c18e/gcc%2Funroll.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funroll.c?ref=648a09eed9f2b429e36353da9f603e79caa6c18e", "patch": "@@ -1830,7 +1830,14 @@ copy_loop_body (copy_start, copy_end, map, exit_label, last_iteration,\n \t      /* If this is now a no-op, delete it.  */\n \t      if (map->last_pc_value == pc_rtx)\n \t\t{\n+\t\t  /* Don't let delete_insn delete the label referenced here,\n+\t\t     because we might possibly need it later for some other\n+\t\t     instruction in the loop.  */\n+\t\t  if (JUMP_LABEL (copy))\n+\t\t    LABEL_NUSES (JUMP_LABEL (copy))++;\n \t\t  delete_insn (copy);\n+\t\t  if (JUMP_LABEL (copy))\n+\t\t    LABEL_NUSES (JUMP_LABEL (copy))--;\n \t\t  copy = 0;\n \t\t}\n \t      else"}]}