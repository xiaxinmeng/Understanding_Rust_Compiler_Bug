{"sha": "c37b68d42af9dfe0561541be06879f6cdb0f0532", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM3YjY4ZDQyYWY5ZGZlMDU2MTU0MWJlMDY4NzlmNmNkYjBmMDUzMg==", "commit": {"author": {"name": "Roger Sayle", "email": "roger@eyesopen.com", "date": "2003-10-06T23:11:21Z"}, "committer": {"name": "Roger Sayle", "email": "sayle@gcc.gnu.org", "date": "2003-10-06T23:11:21Z"}, "message": "expr.c (expand_expr <COND_EXPR>): Handle the void type semantics of COND_EXPR when expanding the \"A op 0 ? FOO ...\n\n\n\t* expr.c (expand_expr <COND_EXPR>): Handle the void type semantics\n\tof COND_EXPR when expanding the \"A op 0 ? FOO : A\" optimizations.\n\nFrom-SVN: r72172", "tree": {"sha": "ace214380ff13e173e7c33913c705ff6975fa7a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ace214380ff13e173e7c33913c705ff6975fa7a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c37b68d42af9dfe0561541be06879f6cdb0f0532", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c37b68d42af9dfe0561541be06879f6cdb0f0532", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c37b68d42af9dfe0561541be06879f6cdb0f0532", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c37b68d42af9dfe0561541be06879f6cdb0f0532/comments", "author": null, "committer": null, "parents": [{"sha": "37bf20eeb00f4cb848b2533b037c101964ac3c4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37bf20eeb00f4cb848b2533b037c101964ac3c4b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37bf20eeb00f4cb848b2533b037c101964ac3c4b"}], "stats": {"total": 21, "additions": 17, "deletions": 4}, "files": [{"sha": "b0a81bc511bb50c622422f7cf007edb8f3042298", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37b68d42af9dfe0561541be06879f6cdb0f0532/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37b68d42af9dfe0561541be06879f6cdb0f0532/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c37b68d42af9dfe0561541be06879f6cdb0f0532", "patch": "@@ -1,3 +1,8 @@\n+2003-10-06  Roger Sayle  <roger@eyesopen.com>\n+\n+\t* expr.c (expand_expr <COND_EXPR>): Handle the void type semantics\n+\tof COND_EXPR when expanding the \"A op 0 ? FOO : A\" optimizations.\n+\n 2003-10-06  Roger Sayle  <roger@eyesopen.com>\n \t    Zack Weinberg  <zack@codesourcery.com>\n "}, {"sha": "edc42908bf08826b429f348782fd47a0cc99f9bb", "filename": "gcc/expr.c", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37b68d42af9dfe0561541be06879f6cdb0f0532/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37b68d42af9dfe0561541be06879f6cdb0f0532/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=c37b68d42af9dfe0561541be06879f6cdb0f0532", "patch": "@@ -8910,8 +8910,12 @@ expand_expr (tree exp, rtx target, enum machine_mode tmode,\n \t    jumpif (TREE_OPERAND (exp, 0), op0);\n \n \t    start_cleanup_deferral ();\n-\t    store_expr (TREE_OPERAND (exp, 2), temp,\n-\t\t\tmodifier == EXPAND_STACK_PARM ? 2 : 0);\n+\t    if (TREE_TYPE (TREE_OPERAND (exp, 2)) != void_type_node)\n+\t      store_expr (TREE_OPERAND (exp, 2), temp,\n+\t\t\t  modifier == EXPAND_STACK_PARM ? 2 : 0);\n+\t    else\n+\t      expand_expr (TREE_OPERAND (exp, 2),\n+\t\t\t   ignore ? const0_rtx : NULL_RTX, VOIDmode, 0);\n \t    op1 = op0;\n \t  }\n \telse if (temp\n@@ -8931,8 +8935,12 @@ expand_expr (tree exp, rtx target, enum machine_mode tmode,\n \t    jumpifnot (TREE_OPERAND (exp, 0), op0);\n \n \t    start_cleanup_deferral ();\n-\t    store_expr (TREE_OPERAND (exp, 1), temp,\n-\t\t\tmodifier == EXPAND_STACK_PARM ? 2 : 0);\n+\t    if (TREE_TYPE (TREE_OPERAND (exp, 1)) != void_type_node)\n+\t      store_expr (TREE_OPERAND (exp, 1), temp,\n+\t\t\t  modifier == EXPAND_STACK_PARM ? 2 : 0);\n+\t    else\n+\t      expand_expr (TREE_OPERAND (exp, 1),\n+\t\t\t   ignore ? const0_rtx : NULL_RTX, VOIDmode, 0);\n \t    op1 = op0;\n \t  }\n \telse"}]}