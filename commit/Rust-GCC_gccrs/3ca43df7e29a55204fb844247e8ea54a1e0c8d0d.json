{"sha": "3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2NhNDNkZjdlMjlhNTUyMDRmYjg0NDI0N2U4ZWE1NGExZTBjOGQwZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-03-06T09:06:35Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-03-06T09:06:35Z"}, "message": "configure.ac: Allow tm_file to contain build-directory files.\n\ngcc/\n\t* configure.ac: Allow tm_file to contain build-directory files.\n\t* configure: Regenerate.\n\t* config.gcc (m68k-*-uclinux*): Add ./sysroot-suffix.h to tm_file.\n\t* config/m68k/t-uclinux (sysroot-suffix.h): New target.\n\t* config/m68k/print-sysroot-suffix.sh: New file.\n\nFrom-SVN: r122613", "tree": {"sha": "fa567fbbc441d903bfb15b0ab0bddc883ac070a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa567fbbc441d903bfb15b0ab0bddc883ac070a9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/comments", "author": null, "committer": null, "parents": [{"sha": "4ab870f5c3a98ca14e851597546eca367eae9dc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ab870f5c3a98ca14e851597546eca367eae9dc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ab870f5c3a98ca14e851597546eca367eae9dc1"}], "stats": {"total": 109, "additions": 108, "deletions": 1}, "files": [{"sha": "60b953038fa638cf02d3582dc8f176014247dcd7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "patch": "@@ -1,3 +1,11 @@\n+2007-03-06  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* configure.ac: Allow tm_file to contain build-directory files.\n+\t* configure: Regenerate.\n+\t* config.gcc (m68k-*-uclinux*): Add ./sysroot-suffix.h to tm_file.\n+\t* config/m68k/t-uclinux (sysroot-suffix.h): New target.\n+\t* config/m68k/print-sysroot-suffix.sh: New file.\n+\n 2007-03-06  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config/m68k/m68k.h (PIC_OFFSET_TABLE_REGNUM): Use the REGNO"}, {"sha": "ab33d1b4244343712c7794629e19c5211d43dbe7", "filename": "gcc/config.gcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "patch": "@@ -1548,7 +1548,7 @@ m68k-*-uclinux*)\t\t# Motorola m68k/ColdFire running uClinux\n \t\t\t\t# ABI.\n \tdefault_m68k_cpu=68020\n \tdefault_cf_cpu=5206\n-\ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h linux.h flat.h m68k/linux.h m68k/uclinux.h\"\n+\ttm_file=\"${tm_file} dbxelf.h elfos.h svr4.h linux.h flat.h m68k/linux.h m68k/uclinux.h ./sysroot-suffix.h\"\n  \ttm_defines=\"${tm_defines} MOTOROLA=1 USE_GAS UCLIBC_DEFAULT=1\"\n \textra_options=\"${extra_options} linux.opt\"\n \ttmake_file=\"m68k/t-floatlib m68k/t-uclinux m68k/t-mlibs\""}, {"sha": "ff83ddd107f30fb7a851c8d907f203e528cf64ba", "filename": "gcc/config/m68k/print-sysroot-suffix.sh", "status": "added", "additions": 82, "deletions": 0, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfig%2Fm68k%2Fprint-sysroot-suffix.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfig%2Fm68k%2Fprint-sysroot-suffix.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fprint-sysroot-suffix.sh?ref=3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "patch": "@@ -0,0 +1,82 @@\n+#!/bin/sh\n+# Copyright (C) 2006 Free Software Foundation, Inc.\n+# This file is part of GCC.\n+\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 2, or (at your option)\n+# any later version.\n+\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING.  If not, write to\n+# the Free Software Foundation, 51 Franklin Street, Fifth Floor,\n+# Boston MA 02110-1301, USA.\n+\n+# This script takes the following arguments:\n+#\n+#    - the target sysroot\n+#    - the value of $(MULTILIB_MATCHES)\n+#    - the value of $(MULTILIB_OPTIONS)\n+#\n+# It uses these arguments to construct a definition of SYSROOT_SUFFIX_SPEC,\n+# which it prints to the standard output.  For each multilib directory FOO,\n+# the script checks whether $sysroot has a subdirectory FOO, and if so will\n+# use /FOO for all compatible command-line options.  It will not add a\n+# suffix for /FOO's options otherwise.  These suffixes are concatenated,\n+# with one subspec for each space-separated entry in $(MULTILIB_OPTIONS).\n+set -e\n+sysroot=$1\n+matches=$2\n+options=$3\n+\n+# For each multilib option OPT, add to $substs a sed command of the\n+# form \"-e 's/OPT/OPT/'\".\n+substs=\"\"\n+for option in `echo \"$options\" | tr '/' ' '`\n+do\n+  substs=\"$substs -e 's/$option/$option/g'\"\n+done\n+\n+# For each ALIAS=CANONICAL entry in $MULTILIB_MATCHES, look for sed\n+# arguments in $substs of the form \"-e 's/CANONICAL/.../'\".  Replace\n+# such entries with \"-e 's/CANONICAL/ALIAS|.../'\".  Both the ALIAS and\n+# CANONICAL parts of $MULTILIB_MATCHES use '?' to stand for '='.\n+#\n+# After this loop, a command of the form \"echo FOO | eval sed $substs\"\n+# will replace a canonical option FOO with a %{...}-style spec pattern.\n+for match in $matches\n+do\n+  canonical=`echo \"$match\" | sed -e 's/=.*//' -e 's/?/=/g'`\n+  alias=`echo \"$match\" | sed -e 's/.*=//' -e 's/?/=/g'`\n+  substs=`echo \"$substs\" | sed -e \"s,s/$canonical/,&$alias|,\"`\n+done\n+\n+# Build up the final SYSROOT_SUFFIX_SPEC in $spec.\n+spec=\n+for combo in $options\n+do\n+  # See which option alternatives in $combo have their own sysroot\n+  # directory.  Create a subspec of the form \"%{PAT1:/DIR1;...;PATn:DIRn}\"\n+  # from each such option OPTi, where DIRi is the directory associated\n+  # with OPTi and PATi is the result of passing OPTi through $substs.\n+  subspec=\n+  for option in `echo \"$combo\" | tr '/' ' '`\n+  do\n+    dir=`echo \"$option\" | sed 's/cpu=//'`\n+    if test -d \"$sysroot/$dir\"; then\n+      test -z \"$subspec\" || subspec=\"$subspec;\"\n+      subspec=\"$subspec\"`echo \"$option\" | eval sed $substs`\":/$dir\"\n+    fi\n+  done\n+  # Concatenate all the subspecs.\n+  test -z \"$subspec\" || spec=\"$spec%{$subspec}\"\n+done\n+if test -n \"$spec\"; then\n+  echo \"#undef SYSROOT_SUFFIX_SPEC\"\n+  echo \"#define SYSROOT_SUFFIX_SPEC \\\"$spec\\\"\"\n+fi"}, {"sha": "3ee359d790f7689b89648cc855317ef9293e0055", "filename": "gcc/config/m68k/t-uclinux", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfig%2Fm68k%2Ft-uclinux", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfig%2Fm68k%2Ft-uclinux", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Ft-uclinux?ref=3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "patch": "@@ -7,3 +7,10 @@ M68K_MLIB_CPU += && (MLIB == \"68020\" || !match(FLAGS, \"FL_MMU\"))\n # Add multilibs for execute-in-place and shared-library code.\n M68K_MLIB_OPTIONS += msep-data/mid-shared-library\n M68K_MLIB_DIRNAMES += msep-data mid-shared-library\n+\n+# This rule uses MULTILIB_MATCHES to generate a definition of\n+# SYSROOT_SUFFIX_SPEC.\n+sysroot-suffix.h: $(srcdir)/config/m68k/print-sysroot-suffix.sh\n+\t$(SHELL) $(srcdir)/config/m68k/print-sysroot-suffix.sh \\\n+\t  \"$(SYSTEM_HEADER_DIR)/../..\" \"$(MULTILIB_MATCHES)\" \\\n+\t  \"$(MULTILIB_OPTIONS)\" > $@"}, {"sha": "fcbcb4f8dc7eb40bbc646f7d78a1d0d9dc8ed54e", "filename": "gcc/configure", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "patch": "@@ -13027,6 +13027,11 @@ tm_file_list=\"options.h\"\n tm_include_list=\"options.h\"\n for f in $tm_file; do\n   case $f in\n+    ./* )\n+       f=`echo $f | sed 's/^..//'`\n+       tm_file_list=\"${tm_file_list} $f\"\n+       tm_include_list=\"${tm_include_list} $f\"\n+       ;;\n     defaults.h )\n        tm_file_list=\"${tm_file_list} \\$(srcdir)/$f\"\n        tm_include_list=\"${tm_include_list} $f\""}, {"sha": "0d30652393bd95dd5626b97f568ec836097bcd80", "filename": "gcc/configure.ac", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3ca43df7e29a55204fb844247e8ea54a1e0c8d0d/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=3ca43df7e29a55204fb844247e8ea54a1e0c8d0d", "patch": "@@ -1610,6 +1610,11 @@ tm_file_list=\"options.h\"\n tm_include_list=\"options.h\"\n for f in $tm_file; do\n   case $f in\n+    ./* )\n+       f=`echo $f | sed 's/^..//'`\n+       tm_file_list=\"${tm_file_list} $f\"\n+       tm_include_list=\"${tm_include_list} $f\"\n+       ;;\n     defaults.h )\n        tm_file_list=\"${tm_file_list} \\$(srcdir)/$f\"\n        tm_include_list=\"${tm_include_list} $f\""}]}