{"sha": "67e644395802294de723b8cafcf01cf153e47684", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjdlNjQ0Mzk1ODAyMjk0ZGU3MjNiOGNhZmNmMDFjZjE1M2U0NzY4NA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2007-01-30T15:50:00Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2007-01-30T15:50:00Z"}, "message": "re PR preprocessor/30468 (-M not fully chops dirname)\n\n\tPR preprocessor/30468:\n\t* mkdeps.c (apply_vpath): Strip successive '/'s if we stripped\n\t'./'.\n\nFrom-SVN: r121341", "tree": {"sha": "d004a8fed5cf4b25dc5fa0fe8282aa85830423f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d004a8fed5cf4b25dc5fa0fe8282aa85830423f0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67e644395802294de723b8cafcf01cf153e47684", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e644395802294de723b8cafcf01cf153e47684", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67e644395802294de723b8cafcf01cf153e47684", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67e644395802294de723b8cafcf01cf153e47684/comments", "author": null, "committer": null, "parents": [{"sha": "ee380365ef32d718116976cc15eebbe7624cc267", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee380365ef32d718116976cc15eebbe7624cc267", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee380365ef32d718116976cc15eebbe7624cc267"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "ea5f1ff98064d48e6526687d15a1882fef8539c3", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e644395802294de723b8cafcf01cf153e47684/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e644395802294de723b8cafcf01cf153e47684/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=67e644395802294de723b8cafcf01cf153e47684", "patch": "@@ -1,3 +1,9 @@\n+2007-01-30  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR preprocessor/30468:\n+\t* mkdeps.c (apply_vpath): Strip successive '/'s if we stripped\n+\t'./'.\n+\n 2007-01-30  Tom Tromey  <tromey@redhat.com>\n \n \tPR preprocessor/29966:"}, {"sha": "8aa96c529e3371065eb0b9bb730dbe21b414ce9f", "filename": "libcpp/mkdeps.c", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67e644395802294de723b8cafcf01cf153e47684/libcpp%2Fmkdeps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67e644395802294de723b8cafcf01cf153e47684/libcpp%2Fmkdeps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Fmkdeps.c?ref=67e644395802294de723b8cafcf01cf153e47684", "patch": "@@ -1,5 +1,5 @@\n /* Dependency generator for Makefile fragments.\n-   Copyright (C) 2000, 2001, 2003 Free Software Foundation, Inc.\n+   Copyright (C) 2000, 2001, 2003, 2007 Free Software Foundation, Inc.\n    Contributed by Zack Weinberg, Mar 2000\n \n This program is free software; you can redistribute it and/or modify it\n@@ -141,7 +141,13 @@ apply_vpath (struct deps *d, const char *t)\n \n   /* Remove leading ./ in any case.  */\n   while (t[0] == '.' && IS_DIR_SEPARATOR (t[1]))\n-    t += 2;\n+    {\n+      t += 2;\n+      /* If we removed a leading ./, then also remove any /s after the\n+\t first.  */\n+      while (IS_DIR_SEPARATOR (t[0]))\n+\t++t;\n+    }\n \n   return t;\n }"}]}