{"sha": "e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTgxYmYyY2UzYjM0YTFmYTBiODNkZjc5MmY1ZTg2NjFkZDFhNjFjYQ==", "commit": {"author": {"name": "Julian Brown", "email": "julian@codesourcery.com", "date": "2012-10-22T11:32:37Z"}, "committer": {"name": "Julian Brown", "email": "jules@gcc.gnu.org", "date": "2012-10-22T11:32:37Z"}, "message": "arm.h (CANNOT_CHANGE_MODE_CLASS): Avoid subreg'ing VFP D registers in big-endian mode.\n\n\t* config/arm/arm.h (CANNOT_CHANGE_MODE_CLASS): Avoid subreg'ing\n\tVFP D registers in big-endian mode.\n\nFrom-SVN: r192687", "tree": {"sha": "82abc10d5191bb04020cfb416cc6d69d04bded73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/82abc10d5191bb04020cfb416cc6d69d04bded73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca/comments", "author": {"login": "jtb20", "id": 6094880, "node_id": "MDQ6VXNlcjYwOTQ4ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/6094880?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jtb20", "html_url": "https://github.com/jtb20", "followers_url": "https://api.github.com/users/jtb20/followers", "following_url": "https://api.github.com/users/jtb20/following{/other_user}", "gists_url": "https://api.github.com/users/jtb20/gists{/gist_id}", "starred_url": "https://api.github.com/users/jtb20/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jtb20/subscriptions", "organizations_url": "https://api.github.com/users/jtb20/orgs", "repos_url": "https://api.github.com/users/jtb20/repos", "events_url": "https://api.github.com/users/jtb20/events{/privacy}", "received_events_url": "https://api.github.com/users/jtb20/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "09246494b3591c1ad5170170945bdb3a89ad7d70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09246494b3591c1ad5170170945bdb3a89ad7d70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09246494b3591c1ad5170170945bdb3a89ad7d70"}], "stats": {"total": 16, "additions": 14, "deletions": 2}, "files": [{"sha": "d8db9c9f0ba1129170084e171d9f118b493bfb04", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca", "patch": "@@ -1,3 +1,8 @@\n+2012-10-22  Julian Brown  <julian@codesourcery.com>\n+\n+\t* config/arm/arm.h (CANNOT_CHANGE_MODE_CLASS): Avoid subreg'ing\n+\tVFP D registers in big-endian mode.\n+\n 2012-10-22  Georg-Johann Lay  <avr@gjlay.de>\n \n \t* doc/invoke.texi (AVR Options): Document __AVR_ARCH__."}, {"sha": "08eeff5c8d3cc55c94e5d881eed3c4f663d0f929", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=e81bf2ce3b34a1fa0b83df792f5e8661dd1a61ca", "patch": "@@ -1205,8 +1205,15 @@ enum reg_class\n /* In VFPv1, VFP registers could only be accessed in the mode they\n    were set, so subregs would be invalid there.  However, we don't\n    support VFPv1 at the moment, and the restriction was lifted in\n-   VFPv2.  */\n-#define CANNOT_CHANGE_MODE_CLASS(FROM, TO, CLASS) 0\n+   VFPv2.\n+   In big-endian mode, modes greater than word size (i.e. DFmode) are stored in\n+   VFP registers in little-endian order.  We can't describe that accurately to\n+   GCC, so avoid taking subregs of such values.  */\n+#define CANNOT_CHANGE_MODE_CLASS(FROM, TO, CLASS)\t\\\n+  (TARGET_VFP && TARGET_BIG_END\t\t\t\t\\\n+   && (GET_MODE_SIZE (FROM) > UNITS_PER_WORD\t\t\\\n+       || GET_MODE_SIZE (TO) > UNITS_PER_WORD)\t\t\\\n+   && reg_classes_intersect_p (VFP_REGS, (CLASS)))\n \n /* The class value for index registers, and the one for base regs.  */\n #define INDEX_REG_CLASS  (TARGET_THUMB1 ? LO_REGS : GENERAL_REGS)"}]}