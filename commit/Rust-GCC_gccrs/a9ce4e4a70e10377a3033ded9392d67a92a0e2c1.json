{"sha": "a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTljZTRlNGE3MGUxMDM3N2EzMDMzZGVkOTM5MmQ2N2E5MmEwZTJjMQ==", "commit": {"author": {"name": "Chung-Lin Tang", "email": "cltang@codesourcery.com", "date": "2015-01-20T14:49:51Z"}, "committer": {"name": "Chung-Lin Tang", "email": "cltang@gcc.gnu.org", "date": "2015-01-20T14:49:51Z"}, "message": "nios2.c (nios2_asm_file_end): Implement TARGET_ASM_FILE_END hook for adding .note.GNU-stack section when needed.\n\n2015-01-20  Chung-Lin Tang  <cltang@codesourcery.com>\n\n\tgcc/\n\t* config/nios2/nios2.c (nios2_asm_file_end): Implement\n\tTARGET_ASM_FILE_END hook for adding .note.GNU-stack section when\n\tneeded.\n\t(TARGET_ASM_FILE_END): Define.\n\n\tlibgcc/\n\t* config/nios2/linux-unwind.h (nios2_fallback_frame_state):\n\tUpdate rt_sigframe format and address for current Nios II\n\tLinux conventions.\n\nFrom-SVN: r219898", "tree": {"sha": "f52044c174fb3d9f216f4b1f50a3a749b46669cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f52044c174fb3d9f216f4b1f50a3a749b46669cd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/comments", "author": {"login": "cltang", "id": 4055966, "node_id": "MDQ6VXNlcjQwNTU5NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4055966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cltang", "html_url": "https://github.com/cltang", "followers_url": "https://api.github.com/users/cltang/followers", "following_url": "https://api.github.com/users/cltang/following{/other_user}", "gists_url": "https://api.github.com/users/cltang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cltang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cltang/subscriptions", "organizations_url": "https://api.github.com/users/cltang/orgs", "repos_url": "https://api.github.com/users/cltang/repos", "events_url": "https://api.github.com/users/cltang/events{/privacy}", "received_events_url": "https://api.github.com/users/cltang/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3b6444f0aa353487b263e444f2cc5e7ff7b3571a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b6444f0aa353487b263e444f2cc5e7ff7b3571a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b6444f0aa353487b263e444f2cc5e7ff7b3571a"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "68c8f7499c87fda7ef322c78270410fc364da744", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "patch": "@@ -1,3 +1,10 @@\n+2015-01-20  Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\t* config/nios2/nios2.c (nios2_asm_file_end): Implement\n+\tTARGET_ASM_FILE_END hook for adding .note.GNU-stack section when\n+\tneeded.\n+\t(TARGET_ASM_FILE_END): Define.\n+\n 2015-01-20  Maxim Kuvyrkov  <maxim.kuvyrkov@linaro.org>\n \n \t* config/arm/arm-protos.h (enum arm_sched_autopref): New constants."}, {"sha": "a7a140ee8d66378a7219f3bc8c22bbd206ec5c46", "filename": "gcc/config/nios2/nios2.c", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/gcc%2Fconfig%2Fnios2%2Fnios2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/gcc%2Fconfig%2Fnios2%2Fnios2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnios2%2Fnios2.c?ref=a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "patch": "@@ -2223,6 +2223,18 @@ nios2_output_dwarf_dtprel (FILE *file, int size, rtx x)\n   fprintf (file, \")\");\n }\n \n+/* Implemet TARGET_ASM_FILE_END.  */\n+\n+static void\n+nios2_asm_file_end (void)\n+{\n+  /* The Nios II Linux stack is mapped non-executable by default, so add a\n+     .note.GNU-stack section for switching to executable stacks only when\n+     trampolines are generated.  */\n+  if (TARGET_LINUX_ABI && trampolines_created)\n+    file_end_indicate_exec_stack ();\n+}\n+\n /* Implement TARGET_ASM_FUNCTION_PROLOGUE.  */\n static void\n nios2_asm_function_prologue (FILE *file, HOST_WIDE_INT size ATTRIBUTE_UNUSED)\n@@ -3401,6 +3413,9 @@ nios2_merge_decl_attributes (tree olddecl, tree newdecl)\n #undef TARGET_ASM_OUTPUT_ADDR_CONST_EXTRA\n #define TARGET_ASM_OUTPUT_ADDR_CONST_EXTRA nios2_output_addr_const_extra\n \n+#undef TARGET_ASM_FILE_END\n+#define TARGET_ASM_FILE_END nios2_asm_file_end\n+\n #undef TARGET_OPTION_OVERRIDE\n #define TARGET_OPTION_OVERRIDE nios2_option_override\n "}, {"sha": "e7837d7e9a88699c09f9c0f2ace372dfe7eee88c", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "patch": "@@ -1,3 +1,9 @@\n+2015-01-20  Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\t* config/nios2/linux-unwind.h (nios2_fallback_frame_state):\n+\tUpdate rt_sigframe format and address for current Nios II\n+\tLinux conventions.\n+\n 2015-01-09  Andreas Tobler  <andreast@gcc.gnu.org>\n \n \t* config.host (arm*-*-freebsd*): Add new configuration for"}, {"sha": "dff1c20076ee947592b30ecb6e37dc60c8e6dbc0", "filename": "libgcc/config/nios2/linux-unwind.h", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/libgcc%2Fconfig%2Fnios2%2Flinux-unwind.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a9ce4e4a70e10377a3033ded9392d67a92a0e2c1/libgcc%2Fconfig%2Fnios2%2Flinux-unwind.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fnios2%2Flinux-unwind.h?ref=a9ce4e4a70e10377a3033ded9392d67a92a0e2c1", "patch": "@@ -67,10 +67,9 @@ nios2_fallback_frame_state (struct _Unwind_Context *context,\n   if (pc[0] == (0x00800004 | (__NR_rt_sigreturn << 6)))\n     {\n       struct rt_sigframe {\n-\tchar retcode[12];\n \tsiginfo_t info;\n \tstruct nios2_ucontext uc;\n-      } *rt_ = context->ra;\n+      } *rt_ = context->cfa;\n       struct nios2_mcontext *regs = &rt_->uc.uc_mcontext;\n       int i;\n "}]}