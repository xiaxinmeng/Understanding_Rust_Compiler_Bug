{"sha": "bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmY2ZjI3NmIwMWQzNjRkMWZlMzAwNzMyZDM5YTU2ZjRhNmY0ZWUzNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "pcarlini@unitus.it", "date": "2002-05-15T10:27:29Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2002-05-15T10:27:29Z"}, "message": "re PR libstdc++/6648 (Problems with cin.getline (interactive))\n\n2002-05-15  Paolo Carlini  <pcarlini@unitus.it>\n\n\tPR libstdc++/6648\n\t* include/bits/istream.tcc (istream::getline, ignore):\n\tUpon __idelim (__delim) call sbumpc() not snextc().\n\t* testsuite/27_io/narrow_stream_objects.cc:\n\tAdd test08 and test09.\n\nFrom-SVN: r53481", "tree": {"sha": "6edc1cfd9b3577f9997f505281994c1aeec7b9fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6edc1cfd9b3577f9997f505281994c1aeec7b9fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/comments", "author": null, "committer": null, "parents": [{"sha": "194734e9e5501f9a295212b91978eee396879cda", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/194734e9e5501f9a295212b91978eee396879cda", "html_url": "https://github.com/Rust-GCC/gccrs/commit/194734e9e5501f9a295212b91978eee396879cda"}], "stats": {"total": 31, "additions": 29, "deletions": 2}, "files": [{"sha": "d6fc09814d2931ebe40359944a42dfebefdeca21", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "patch": "@@ -1,3 +1,11 @@\n+2002-05-15  Paolo Carlini  <pcarlini@unitus.it>\n+\n+\tPR libstdc++/6648\n+\t* include/bits/istream.tcc (istream::getline, ignore):\n+\tUpon __idelim (__delim) call sbumpc() not snextc().\n+\t* testsuite/27_io/narrow_stream_objects.cc:\n+\tAdd test08 and test09.\n+\n 2002-05-13  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* testsuite/22_locale/ctype_scan_char.cc: Tweak."}, {"sha": "f7f8d6977891880e4aedf38b8d2833c95216c7df", "filename": "libstdc++-v3/include/bits/istream.tcc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fistream.tcc?ref=bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "patch": "@@ -679,7 +679,7 @@ namespace std\n \t\t{\n \t\t  if (__c == __idelim)\n \t\t    {\n-\t\t      __sb->snextc();\n+\t\t      __sb->sbumpc();\n \t\t      ++_M_gcount;\n \t\t    }\n \t\t  else\n@@ -726,7 +726,7 @@ namespace std\n \t\tthis->setstate(ios_base::eofbit);\n \t      else if (__c == __delim)\n \t\t{\n-\t\t  __sb->snextc();\n+\t\t  __sb->sbumpc();\n \t\t  ++_M_gcount;\n \t\t}\n \t    }"}, {"sha": "f767b7248713a6f0016c62d78d69034855b05549", "filename": "libstdc++-v3/testsuite/27_io/narrow_stream_objects.cc", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fnarrow_stream_objects.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bf6f276b01d364d1fe300732d39a56f4a6f4ee34/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fnarrow_stream_objects.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fnarrow_stream_objects.cc?ref=bf6f276b01d364d1fe300732d39a56f4a6f4ee34", "patch": "@@ -175,6 +175,23 @@ void test07()\n   VERIFY( s == \"test\" );\n }\n \n+// libstdc++/6648\n+// Interactive tests: each one (run alone) must terminate upon a single '\\n'.\n+void test08()\n+{\n+  bool test = true;\n+  char buff[2048];\n+  std::cout << \"Enter name: \";\n+  std::cin.getline(buff, 2048);\n+}\n+\n+void test09()\n+{\n+  bool test = true;\n+  std::cout << \"Enter name: \";\n+  std::cin.ignore(2048, '\\n');\n+}\n+\n int \n main()\n {\n@@ -186,5 +203,7 @@ main()\n   // test05();\n   // test06();\n   // test07();\n+  // test08();\n+  // test09();\n   return 0;\n }"}]}