{"sha": "f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjgwZjdlOGNkOGUyYjg4ZmMyZTljODAyNWYyZTJjMjI4ZjFiNjhlYw==", "commit": {"author": {"name": "Neil Booth", "email": "neil@daikokuya.demon.co.uk", "date": "2001-08-11T08:02:54Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2001-08-11T08:02:54Z"}, "message": "cpphash.h, cpplib.c: Correct erroneous previous checkin.\n\n\t* cpphash.h, cpplib.c: Correct erroneous previous checkin.\n\nCo-Authored-By: Franz Sirl <Franz.Sirl-kernel@lauterbach.com>\n\nFrom-SVN: r44790", "tree": {"sha": "dfc3479970901e5fe830c8e6d7d22f9e647049c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dfc3479970901e5fe830c8e6d7d22f9e647049c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/comments", "author": null, "committer": null, "parents": [{"sha": "47d89cf3e65223298aef15f371a4e59511e0ad31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47d89cf3e65223298aef15f371a4e59511e0ad31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47d89cf3e65223298aef15f371a4e59511e0ad31"}], "stats": {"total": 47, "additions": 42, "deletions": 5}, "files": [{"sha": "825bd12356688a9c2bbe69c368fa847286caf78a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "patch": "@@ -1,3 +1,42 @@\n+2001-08-11  Neil Booth  <neil@daikokuya.demon.co.uk>\n+\t    Franz Sirl  <Franz.Sirl-kernel@lauterbach.com>\n+\n+\t* c-lex.c (map): Make const.\n+\t(cb_file_change): Update for callback passing a line map.\n+\tDon't assume we have a previous map.  Remove sanity check\n+\tabout popping too many files.\n+\t* cpperror.c (print_location): Make map const.\n+\t* cppfiles.c (stack_include_file): Update; line maps now hold sysp.\n+\t(cpp_make_system_header): Similarly.\n+\t(search_from): Similarly.\n+\t(_cpp_execute_include): Don't remember where we came from.\n+\t* cpphash.h (struct cpp_buffer): Remove return_to_line, sysp.\n+\t(struct cpp_reader): Make map const.\n+\t(CPP_IN_SYSTEM_HEADER, _cpp_do_file_change): Update.\n+\t* cpplib.c (do_line): Update; line maps now hold sysp.\n+\t(cpp_push_buffer): Similarly.\n+\t(_cpp_do_file_change): Similarly; callback with map instead.\n+\t(cpp_get_line_maps): Constify return value.\n+\t(_cpp_pop_buffer): Update.\n+\t* cpplib.h (struct cpp_file_change): Remove.\n+\t(struct cpp_callbacks): Update.\n+\t(cpp_get_line_maps): Constify return value.\n+\t* cppmacro.c (_cpp_create_definition): Update.\n+\t* cppmain.c (struct printer): Constify map.\n+\t(maybe_print_line): Similarly.\n+\t(print_line): Similarly.  Deduce flags 1 and 2 here.\n+\t(cb_file_change): Update.\n+\t* line-map.c (free_line_maps): Warn regardless.\n+\t(add_line_map): Return pointer to const.  When passed NULL to_file\n+\twith LC_LEAVE, use the obvious values for the return point so the\n+\tcaller doesn't have to figure them out.\n+\t(lookup_line): Return pointer to const.\n+\t(print_containing_files): Take pointer to const.\n+\t* line-map.h (struct line_map): New members reason, sysp.\n+\t(add_line_map): Return pointer to const.\n+\t(lookup_line): Similarly.\n+\t(print_containing_files): Take pointer to const.\n+\n 2001-08-10  Roman Zippel  <zippel@linux-m68k.org>\n \t    Richard Henderson  <rth@redhat.com>\n "}, {"sha": "cbca913f70a050e088667a7aca539cb73fb56435", "filename": "gcc/cpphash.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/gcc%2Fcpphash.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/gcc%2Fcpphash.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpphash.h?ref=f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "patch": "@@ -66,7 +66,7 @@ struct cpp_chunk\n typedef struct cpp_pool cpp_pool;\n struct cpp_pool\n {\n-  struct cpp_chunk *cur, *locked, *first;\n+  struct cpp_chunk *cur, *locked;\n   unsigned char *pos;\t\t/* Current position.  */\n   unsigned int align;\n   unsigned int locks;"}, {"sha": "719daaa99dd54ca1bec15450b76f397dd8e2f585", "filename": "gcc/cpplib.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/gcc%2Fcpplib.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec/gcc%2Fcpplib.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplib.c?ref=f80f7e8cd8e2b88fc2e9c8025f2e2c228f1b68ec", "patch": "@@ -901,8 +901,7 @@ cpp_register_pragma (pfile, space, name, handler)\n     }\n \n  found:\n-  new = (struct pragma_entry *)\n-    _cpp_pool_alloc (&pfile->macro_pool, sizeof (struct pragma_entry));\n+  new = xnew (struct pragma_entry);\n   new->name = name;\n   new->len = strlen (name);\n   new->isnspace = 0;\n@@ -930,8 +929,7 @@ cpp_register_pragma_space (pfile, space)\n       p = p->next;\n     }\n \n-  new = (struct pragma_entry *)\n-    _cpp_pool_alloc (&pfile->macro_pool, sizeof (struct pragma_entry));\n+  new = xnew (struct pragma_entry);\n   new->name = space;\n   new->len = len;\n   new->isnspace = 1;"}]}