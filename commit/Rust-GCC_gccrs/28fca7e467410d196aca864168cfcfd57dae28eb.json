{"sha": "28fca7e467410d196aca864168cfcfd57dae28eb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhmY2E3ZTQ2NzQxMGQxOTZhY2E4NjQxNjhjZmNmZDU3ZGFlMjhlYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-03-11T00:45:37Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-03-11T00:45:37Z"}, "message": "re PR c/14517 (change in behaviour wrt duplicate qualifiers)\n\n        PR c/14517\n        * c-decl.c (grokdeclarator): Don't warn for duplicate qualifiers\n        except for pedantic c90 mode.\n\nFrom-SVN: r79286", "tree": {"sha": "26f4e3c863b37caa9087dacc7142426e458ede8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/26f4e3c863b37caa9087dacc7142426e458ede8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28fca7e467410d196aca864168cfcfd57dae28eb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28fca7e467410d196aca864168cfcfd57dae28eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28fca7e467410d196aca864168cfcfd57dae28eb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28fca7e467410d196aca864168cfcfd57dae28eb/comments", "author": null, "committer": null, "parents": [{"sha": "8ab705be38fcd3b386cd78fa6a400573bec3ad9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ab705be38fcd3b386cd78fa6a400573bec3ad9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ab705be38fcd3b386cd78fa6a400573bec3ad9c"}], "stats": {"total": 74, "additions": 61, "deletions": 13}, "files": [{"sha": "49ecfe6861f7f6f78160d898f2f71a59981b871e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=28fca7e467410d196aca864168cfcfd57dae28eb", "patch": "@@ -1,3 +1,9 @@\n+2004-03-10  Richard Henderson  <rth@redhat.com>\n+\n+\tPR c/14517\n+\t* c-decl.c (grokdeclarator): Don't warn for duplicate qualifiers\n+\texcept for pedantic c90 mode.\n+\n 2004-03-10  Kelley Cook  <kcook@gcc.gnu.org>\n \n \t* configure.ac: Bump AC_PREREQ to 2.59."}, {"sha": "e59789b73868184e1f2924711401083429b4b35f", "filename": "gcc/c-decl.c", "status": "modified", "additions": 19, "deletions": 13, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=28fca7e467410d196aca864168cfcfd57dae28eb", "patch": "@@ -3372,7 +3372,7 @@ grokdeclarator (tree declarator, tree declspecs,\n \t\t{\n \t\t  if (i == RID_CONST || i == RID_VOLATILE || i == RID_RESTRICT)\n \t\t    {\n-\t\t      if (!flag_isoc99)\n+\t\t      if (pedantic && !flag_isoc99)\n \t\t\tpedwarn (\"duplicate `%s'\", IDENTIFIER_POINTER (id));\n \t\t    }\n \t\t  else\n@@ -3629,12 +3629,15 @@ grokdeclarator (tree declarator, tree declspecs,\n   volatilep\n     = !! (specbits & 1 << (int) RID_VOLATILE) + TYPE_VOLATILE (element_type);\n   inlinep = !! (specbits & (1 << (int) RID_INLINE));\n-  if (constp > 1 && ! flag_isoc99)\n-    pedwarn (\"duplicate `const'\");\n-  if (restrictp > 1 && ! flag_isoc99)\n-    pedwarn (\"duplicate `restrict'\");\n-  if (volatilep > 1 && ! flag_isoc99)\n-    pedwarn (\"duplicate `volatile'\");\n+  if (pedantic && !flag_isoc99)\n+    {\n+      if (constp > 1)\n+\tpedwarn (\"duplicate `const'\");\n+      if (restrictp > 1)\n+\tpedwarn (\"duplicate `restrict'\");\n+      if (volatilep > 1)\n+\tpedwarn (\"duplicate `volatile'\");\n+    }\n   if (! flag_gen_aux_info && (TYPE_QUALS (type)))\n     type = TYPE_MAIN_VARIANT (type);\n   type_quals = ((constp ? TYPE_QUAL_CONST : 0)\n@@ -4087,12 +4090,15 @@ grokdeclarator (tree declarator, tree declspecs,\n \n \t      if (erred)\n \t\terror (\"invalid type modifier within pointer declarator\");\n-\t      if (constp > 1 && ! flag_isoc99)\n-\t\tpedwarn (\"duplicate `const'\");\n-\t      if (volatilep > 1 && ! flag_isoc99)\n-\t\tpedwarn (\"duplicate `volatile'\");\n-\t      if (restrictp > 1 && ! flag_isoc99)\n-\t\tpedwarn (\"duplicate `restrict'\");\n+\t      if (pedantic && !flag_isoc99)\n+\t\t{\n+\t\t  if (constp > 1)\n+\t\t    pedwarn (\"duplicate `const'\");\n+\t\t  if (volatilep > 1)\n+\t\t    pedwarn (\"duplicate `volatile'\");\n+\t\t  if (restrictp > 1)\n+\t\t    pedwarn (\"duplicate `restrict'\");\n+\t\t}\n \n \t      type_quals = ((constp ? TYPE_QUAL_CONST : 0)\n \t\t\t    | (restrictp ? TYPE_QUAL_RESTRICT : 0)"}, {"sha": "14838c7367f17eefcd9d053ef9e5883ec161e8c8", "filename": "gcc/testsuite/gcc.dg/c90-dupqual-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-dupqual-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-dupqual-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc90-dupqual-1.c?ref=28fca7e467410d196aca864168cfcfd57dae28eb", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:1990 -pedantic-errors\" } */\n+\n+typedef const int CI;\n+const const int c1;\t\t/* { dg-error \"duplicate\" } */\n+const CI c2;\t\t\t/* { dg-error \"duplicate\" } */\n+const CI *c3;\t\t\t/* { dg-error \"duplicate\" } */\n+\n+typedef volatile int VI;\n+volatile volatile int v1;\t/* { dg-error \"duplicate\" } */\n+volatile VI v2;\t\t\t/* { dg-error \"duplicate\" } */\n+volatile VI *v3;\t\t/* { dg-error \"duplicate\" } */"}, {"sha": "2e6d7e1bc5a2734df6f76c376fb5721b6380100d", "filename": "gcc/testsuite/gcc.dg/c99-dupqual-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-dupqual-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-dupqual-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc99-dupqual-1.c?ref=28fca7e467410d196aca864168cfcfd57dae28eb", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=iso9899:1999 -pedantic-errors\" } */\n+\n+typedef const int CI;\n+const const int c1;\t\t/* { dg-bogus \"duplicate\" } */\n+const CI c2;\t\t\t/* { dg-bogus \"duplicate\" } */\n+const CI *c3;\t\t\t/* { dg-bogus \"duplicate\" } */\n+\n+typedef volatile int VI;\n+volatile volatile int v1;\t/* { dg-bogus \"duplicate\" } */\n+volatile VI v2;\t\t\t/* { dg-bogus \"duplicate\" } */\n+volatile VI *v3;\t\t/* { dg-bogus \"duplicate\" } */"}, {"sha": "9bd1db01569a1b44e0eb9d38f44a1094dfca7c39", "filename": "gcc/testsuite/gcc.dg/gnu89-dupqual-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Ftestsuite%2Fgcc.dg%2Fgnu89-dupqual-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28fca7e467410d196aca864168cfcfd57dae28eb/gcc%2Ftestsuite%2Fgcc.dg%2Fgnu89-dupqual-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgnu89-dupqual-1.c?ref=28fca7e467410d196aca864168cfcfd57dae28eb", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-std=gnu89 -Werror\" } */\n+\n+typedef const int CI;\n+const const int c1;\t\t/* { dg-bogus \"duplicate\" } */\n+const CI c2;\t\t\t/* { dg-bogus \"duplicate\" } */\n+const CI *c3;\t\t\t/* { dg-bogus \"duplicate\" } */\n+\n+typedef volatile int VI;\n+volatile volatile int v1;\t/* { dg-bogus \"duplicate\" } */\n+volatile VI v2;\t\t\t/* { dg-bogus \"duplicate\" } */\n+volatile VI *v3;\t\t/* { dg-bogus \"duplicate\" } */"}]}