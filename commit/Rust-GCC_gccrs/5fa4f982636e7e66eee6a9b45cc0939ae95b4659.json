{"sha": "5fa4f982636e7e66eee6a9b45cc0939ae95b4659", "node_id": "C_kwDOANBUbNoAKDVmYTRmOTgyNjM2ZTdlNjZlZWU2YTliNDVjYzA5MzlhZTk1YjQ2NTk", "commit": {"author": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2022-01-01T08:44:48Z"}, "committer": {"name": "Andrew Pinski", "email": "apinski@marvell.com", "date": "2022-01-01T08:47:25Z"}, "message": "Committed: Add testcases for a few PRs\n\nThese were fixed as part of the fix for PR 99766,\nI thought it would be useful to add a few testcases\nfor the other cases that were failing.\n\nCommitted as obvious after running the tests to make\nsure they work.\n\n\tPR rtl-optimization/100241\n\tPR rtl-optimization/99787\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.c-torture/compile/pr100241-1.c: New test.\n\t* gcc.c-torture/compile/pr99787-1.c: New test.", "tree": {"sha": "a7ad7fca9fd695ae0fb06639cd6b98af126906ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7ad7fca9fd695ae0fb06639cd6b98af126906ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5fa4f982636e7e66eee6a9b45cc0939ae95b4659", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fa4f982636e7e66eee6a9b45cc0939ae95b4659", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5fa4f982636e7e66eee6a9b45cc0939ae95b4659", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5fa4f982636e7e66eee6a9b45cc0939ae95b4659/comments", "author": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "committer": {"login": "apinski-cavium", "id": 6335315, "node_id": "MDQ6VXNlcjYzMzUzMTU=", "avatar_url": "https://avatars.githubusercontent.com/u/6335315?v=4", "gravatar_id": "", "url": "https://api.github.com/users/apinski-cavium", "html_url": "https://github.com/apinski-cavium", "followers_url": "https://api.github.com/users/apinski-cavium/followers", "following_url": "https://api.github.com/users/apinski-cavium/following{/other_user}", "gists_url": "https://api.github.com/users/apinski-cavium/gists{/gist_id}", "starred_url": "https://api.github.com/users/apinski-cavium/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/apinski-cavium/subscriptions", "organizations_url": "https://api.github.com/users/apinski-cavium/orgs", "repos_url": "https://api.github.com/users/apinski-cavium/repos", "events_url": "https://api.github.com/users/apinski-cavium/events{/privacy}", "received_events_url": "https://api.github.com/users/apinski-cavium/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7918d8270a43e42b0cba902ec17ce87b6a3c74a9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7918d8270a43e42b0cba902ec17ce87b6a3c74a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7918d8270a43e42b0cba902ec17ce87b6a3c74a9"}], "stats": {"total": 66, "additions": 66, "deletions": 0}, "files": [{"sha": "593ef96bdb7cf17af5c73822aca5b5d9ad72d182", "filename": "gcc/testsuite/gcc.c-torture/compile/pr100241-1.c", "status": "added", "additions": 48, "deletions": 0, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fa4f982636e7e66eee6a9b45cc0939ae95b4659/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr100241-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fa4f982636e7e66eee6a9b45cc0939ae95b4659/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr100241-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr100241-1.c?ref=5fa4f982636e7e66eee6a9b45cc0939ae95b4659", "patch": "@@ -0,0 +1,48 @@\n+/* { dg-require-visibility \"\" } */\n+/* { dg-options \"-fvisibility=internal -fPIC\" { target fpic } } */\n+\n+extern char num_4x4_blocks_high_lookup, num_4x4_blocks_wide_lookup,\n+    vp9_foreach_transformed_block_in_plane_xd_0_0_0;\n+int vp9_first_pass_encode_tile_mb_row_cpi_0,\n+    vp9_first_pass_encode_tile_mb_row_tile_data_0_0, vp9_encode_sby_pass1_x;\n+typedef void foreach_transformed_block_visitor();\n+void vp9_encode_sby_pass1();\n+typedef struct {\n+  long coded_error;\n+  long sr_coded_error;\n+  long frame_noise_energy;\n+  long intra_error;\n+} FIRSTPASS_DATA;\n+typedef struct {\n+  FIRSTPASS_DATA fp_data;\n+} TileDataEnc;\n+TileDataEnc accumulate_fp_mb_row_stat_this_tile;\n+void vp9_first_pass_encode_tile_mb_row(FIRSTPASS_DATA *fp_acc_data) {\n+  int mb_col_end = vp9_first_pass_encode_tile_mb_row_tile_data_0_0;\n+  for (; mb_col_end;) {\n+    vp9_encode_sby_pass1();\n+    if (vp9_first_pass_encode_tile_mb_row_cpi_0) {\n+      FIRSTPASS_DATA __trans_tmp_1 = *fp_acc_data;\n+      accumulate_fp_mb_row_stat_this_tile.fp_data.coded_error +=\n+          accumulate_fp_mb_row_stat_this_tile.fp_data.sr_coded_error +=\n+          __trans_tmp_1.sr_coded_error;\n+      accumulate_fp_mb_row_stat_this_tile.fp_data.frame_noise_energy +=\n+          __trans_tmp_1.frame_noise_energy;\n+      accumulate_fp_mb_row_stat_this_tile.fp_data.intra_error +=\n+          __trans_tmp_1.intra_error;\n+    }\n+  }\n+}\n+foreach_transformed_block_visitor vp9_foreach_transformed_block_in_plane_visit;\n+void vp9_foreach_transformed_block_in_plane(void *arg) {\n+  int c, max_blocks_wide = num_4x4_blocks_wide_lookup;\n+  for (; num_4x4_blocks_high_lookup;) {\n+    c = 0;\n+    for (; c < max_blocks_wide;\n+         c += vp9_foreach_transformed_block_in_plane_xd_0_0_0)\n+      vp9_foreach_transformed_block_in_plane_visit(arg);\n+  }\n+}\n+void vp9_encode_sby_pass1() {\n+  vp9_foreach_transformed_block_in_plane(&vp9_encode_sby_pass1_x);\n+}"}, {"sha": "d98b7e746be397142052463a48df8024d62b655a", "filename": "gcc/testsuite/gcc.c-torture/compile/pr99787-1.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5fa4f982636e7e66eee6a9b45cc0939ae95b4659/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr99787-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5fa4f982636e7e66eee6a9b45cc0939ae95b4659/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr99787-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr99787-1.c?ref=5fa4f982636e7e66eee6a9b45cc0939ae95b4659", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-options \"-ftree-slp-vectorize -ffp-contract=on -ffloat-store\"  }  */\n+\n+_Complex foo_x_0;\n+int foo_n11, foo_i, foo_l;\n+_Complex float foo_s;\n+_Complex *foo_f_0_0_0;\n+\n+void\n+foo() {\n+  _Complex f[foo_l];\n+  for (; foo_i; foo_i++) {\n+    int n9;\n+    for (; n9 < foo_l; n9++)\n+      for (; foo_n11; foo_n11++)\n+        foo_s += foo_f_0_0_0[n9] * 0 * foo_f_0_0_0[foo_n11];\n+    foo_x_0 += foo_s;\n+  }\n+}"}]}