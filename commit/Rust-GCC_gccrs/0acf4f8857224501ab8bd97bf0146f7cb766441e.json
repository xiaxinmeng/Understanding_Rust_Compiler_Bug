{"sha": "0acf4f8857224501ab8bd97bf0146f7cb766441e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGFjZjRmODg1NzIyNDUwMWFiOGJkOTdiZjAxNDZmN2NiNzY2NDQxZQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2003-07-13T17:12:28Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2003-07-13T17:12:28Z"}, "message": "stor-layout.c (compute_record_mode): Remove very obsolete test that forces BLKmode for records with fields crossing...\n\n\t* stor-layout.c (compute_record_mode): Remove very obsolete test\n\tthat forces BLKmode for records with fields crossing word boundary.\n\nFrom-SVN: r69297", "tree": {"sha": "ab64df6753f797969f539df8f1f5ffaeb9644feb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ab64df6753f797969f539df8f1f5ffaeb9644feb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0acf4f8857224501ab8bd97bf0146f7cb766441e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0acf4f8857224501ab8bd97bf0146f7cb766441e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0acf4f8857224501ab8bd97bf0146f7cb766441e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0acf4f8857224501ab8bd97bf0146f7cb766441e/comments", "author": null, "committer": null, "parents": [{"sha": "ae26c8e25f9bad8b4d26f10d091d6342330f3cfb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae26c8e25f9bad8b4d26f10d091d6342330f3cfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae26c8e25f9bad8b4d26f10d091d6342330f3cfb"}], "stats": {"total": 20, "additions": 5, "deletions": 15}, "files": [{"sha": "c9cda02600ac27bb279ce644fcb75300e51bfc77", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0acf4f8857224501ab8bd97bf0146f7cb766441e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0acf4f8857224501ab8bd97bf0146f7cb766441e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0acf4f8857224501ab8bd97bf0146f7cb766441e", "patch": "@@ -1,3 +1,8 @@\n+2003-07-13  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* stor-layout.c (compute_record_mode): Remove very obsolete test\n+\tthat forces BLKmode for records with fields crossing word boundary.\n+\n 2003-07-13  Zack Weinberg  <zack@codesourcery.com>\n \n \t* Makefile.in: Remove orphan reference to acconfig.h."}, {"sha": "061eec4c4340c19cbee8a8ef6e925132a4bbb718", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 0, "deletions": 15, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0acf4f8857224501ab8bd97bf0146f7cb766441e/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0acf4f8857224501ab8bd97bf0146f7cb766441e/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=0acf4f8857224501ab8bd97bf0146f7cb766441e", "patch": "@@ -1310,8 +1310,6 @@ compute_record_mode (tree type)\n      BLKmode only because it isn't aligned.  */\n   for (field = TYPE_FIELDS (type); field; field = TREE_CHAIN (field))\n     {\n-      unsigned HOST_WIDE_INT bitpos;\n-\n       if (TREE_CODE (field) != FIELD_DECL)\n \tcontinue;\n \n@@ -1323,19 +1321,6 @@ compute_record_mode (tree type)\n \t  || ! host_integerp (DECL_SIZE (field), 1))\n \treturn;\n \n-      bitpos = int_bit_position (field);\n-\n-      /* Must be BLKmode if any field crosses a word boundary,\n-\t since extract_bit_field can't handle that in registers.  */\n-      if (bitpos / BITS_PER_WORD\n-\t  != ((tree_low_cst (DECL_SIZE (field), 1) + bitpos - 1)\n-\t      / BITS_PER_WORD)\n-\t  /* But there is no problem if the field is entire words\n-\t     or bigger than a word.  */\n-\t  && ! (tree_low_cst (DECL_SIZE (field), 1) % BITS_PER_WORD == 0\n-\t\t|| compare_tree_int (DECL_SIZE (field), BITS_PER_WORD) > 0))\n-\treturn;\n-\n       /* If this field is the whole struct, remember its mode so\n \t that, say, we can put a double in a class into a DF\n \t register instead of forcing it to live in the stack.  */"}]}