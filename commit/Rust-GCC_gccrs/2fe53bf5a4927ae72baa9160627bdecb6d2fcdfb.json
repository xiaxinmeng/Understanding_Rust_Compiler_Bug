{"sha": "2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmZlNTNiZjVhNDkyN2FlNzJiYWE5MTYwNjI3YmRlY2I2ZDJmY2RmYg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-04-08T06:57:27Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-04-08T06:57:27Z"}, "message": "ctrl_c.c: Improve handling of ctrl-c on LynxOS and Windows.\n\n2008-04-08  Eric Botcazou  <ebotcazou@adacore.com>\n\n\t* ctrl_c.c: Improve handling of ctrl-c on LynxOS and Windows.\n\tMinor reformatting.\n\nFrom-SVN: r134062", "tree": {"sha": "4966eb7b6af6427612884afd25afd19131257f60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4966eb7b6af6427612884afd25afd19131257f60"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb/comments", "author": null, "committer": null, "parents": [{"sha": "189e353b3020886bb4cb60cbaa42045f966f9a13", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/189e353b3020886bb4cb60cbaa42045f966f9a13", "html_url": "https://github.com/Rust-GCC/gccrs/commit/189e353b3020886bb4cb60cbaa42045f966f9a13"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "e9ec88de711b611fdf28a0017ec4836fd07f03e9", "filename": "gcc/ada/ctrl_c.c", "status": "modified", "additions": 14, "deletions": 3, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb/gcc%2Fada%2Fctrl_c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb/gcc%2Fada%2Fctrl_c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fctrl_c.c?ref=2fe53bf5a4927ae72baa9160627bdecb6d2fcdfb", "patch": "@@ -6,7 +6,7 @@\n  *                                                                          *\n  *                          C Implementation File                           *\n  *                                                                          *\n- *        Copyright (C) 2002-2003, Free Software Foundation, Inc.           *\n+ *        Copyright (C) 2002-2008, Free Software Foundation, Inc.           *\n  *                                                                          *\n  * GNAT is free software;  you can  redistribute it  and/or modify it under *\n  * terms of the  GNU General Public License as published  by the Free Soft- *\n@@ -50,7 +50,8 @@ void __gnat_uninstall_int_handler (void);\n \n /* POSIX implementation */\n \n-#if (defined (_AIX) || defined (unix)) && !defined (__vxworks)\n+#if (defined (__unix__) || defined (_AIX) || defined (__APPLE__)) \\\n+ && !defined (__vxworks)\n \n #include <signal.h>\n \n@@ -75,7 +76,12 @@ __gnat_install_int_handler (void (*proc) (void))\n   if (sigint_intercepted == 0)\n     {\n       act.sa_handler = __gnat_int_handler;\n+#if defined (__Lynx__)\n+      /* LynxOS does not support SA_RESTART. */\n+      act.sa_flags = 0;\n+#else\n       act.sa_flags = SA_RESTART;\n+#endif\n       sigemptyset (&act.sa_mask);\n       sigaction (SIGINT, &act, &original_act);\n     }\n@@ -112,14 +118,19 @@ __gnat_int_handler  (DWORD dwCtrlType)\n     case CTRL_C_EVENT:\n     case CTRL_BREAK_EVENT:\n       if (sigint_intercepted != 0)\n-        sigint_intercepted ();\n+        {\n+          sigint_intercepted ();\n+          return TRUE;\n+        }\n       break;\n \n     case CTRL_CLOSE_EVENT:\n     case CTRL_LOGOFF_EVENT:\n     case CTRL_SHUTDOWN_EVENT:\n       break;\n     }\n+\n+  return FALSE;\n }\n \n void"}]}