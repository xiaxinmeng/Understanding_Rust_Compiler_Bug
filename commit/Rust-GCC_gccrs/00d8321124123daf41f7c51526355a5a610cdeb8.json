{"sha": "00d8321124123daf41f7c51526355a5a610cdeb8", "node_id": "C_kwDOANBUbNoAKDAwZDgzMjExMjQxMjNkYWY0MWY3YzUxNTI2MzU1YTVhNjEwY2RlYjg", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2022-01-26T15:40:42Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2022-01-26T16:39:40Z"}, "message": "c++: ->template and using-decl [PR104235]\n\ncp_parser_template_id wasn't prepared to handle getting a USING_DECL back\nfrom cp_parser_template_name.  Let's defer that case to instantiation time,\nas well.\n\n\tPR c++/104235\n\ngcc/cp/ChangeLog:\n\n\t* parser.cc (cp_parser_template_name): Repeat lookup of USING_DECL.\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/parse/template-keyword2.C: New test.", "tree": {"sha": "9f0e89b6661f1a045f06227d17bbbde07a4939c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f0e89b6661f1a045f06227d17bbbde07a4939c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00d8321124123daf41f7c51526355a5a610cdeb8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00d8321124123daf41f7c51526355a5a610cdeb8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00d8321124123daf41f7c51526355a5a610cdeb8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00d8321124123daf41f7c51526355a5a610cdeb8/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1bc00a489086b0bdde89ccb11dfa4f50b6c4e8f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1bc00a489086b0bdde89ccb11dfa4f50b6c4e8f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1bc00a489086b0bdde89ccb11dfa4f50b6c4e8f0"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "8b38165020f96a94a4cb7cae1b7f9876f8ef9775", "filename": "gcc/cp/parser.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00d8321124123daf41f7c51526355a5a610cdeb8/gcc%2Fcp%2Fparser.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00d8321124123daf41f7c51526355a5a610cdeb8/gcc%2Fcp%2Fparser.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.cc?ref=00d8321124123daf41f7c51526355a5a610cdeb8", "patch": "@@ -18680,7 +18680,8 @@ cp_parser_template_name (cp_parser* parser,\n \t  cp_parser_error (parser, \"expected template-name\");\n \t  return error_mark_node;\n \t}\n-      else if (!DECL_P (decl) && !is_overloaded_fn (decl))\n+      else if ((!DECL_P (decl) && !is_overloaded_fn (decl))\n+\t       || TREE_CODE (decl) == USING_DECL)\n \t/* Repeat the lookup at instantiation time.  */\n \tdecl = identifier;\n     }"}, {"sha": "ecd066787bc8e39f9e322b89cd45dadc9d996178", "filename": "gcc/testsuite/g++.dg/parse/template-keyword2.C", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00d8321124123daf41f7c51526355a5a610cdeb8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ftemplate-keyword2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00d8321124123daf41f7c51526355a5a610cdeb8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ftemplate-keyword2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Ftemplate-keyword2.C?ref=00d8321124123daf41f7c51526355a5a610cdeb8", "patch": "@@ -0,0 +1,8 @@\n+// PR c++/104235\n+\n+template <class M>\n+struct L: M {\n+  using M::a;\n+  void a();\n+  void p() { this->template a<>(); }\n+};"}]}