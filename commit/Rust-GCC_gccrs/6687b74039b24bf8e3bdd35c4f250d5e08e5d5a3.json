{"sha": "6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjY4N2I3NDAzOWIyNGJmOGUzYmRkMzVjNGYyNTBkNWUwOGU1ZDVhMw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-07-03T13:14:48Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2010-07-03T13:14:48Z"}, "message": "* gimplify.c (mostly_copy_tree_r): Deal with BIND_EXPR.\n\nFrom-SVN: r161774", "tree": {"sha": "b55774ea0747b870b4a0a61bdf00cc381966a112", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b55774ea0747b870b4a0a61bdf00cc381966a112"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/comments", "author": null, "committer": null, "parents": [{"sha": "21ffc3f7092a49cff26ebf6762f4098540539fa6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21ffc3f7092a49cff26ebf6762f4098540539fa6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21ffc3f7092a49cff26ebf6762f4098540539fa6"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "8ef121a9dcf6270f397de7a1e4012137d22af2ae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "patch": "@@ -1,4 +1,8 @@\n-2010-07-02  Jan Hubicka  <jh@suse.cz>\n+2010-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gimplify.c (mostly_copy_tree_r): Deal with BIND_EXPR.\n+\n+2010-07-03  Jan Hubicka  <jh@suse.cz>\n \n \t* config/i386/i386.c (override_options): Revert accidental commit.\n "}, {"sha": "9eb8fa70d3e7924adf725735e421bcd6c737cab2", "filename": "gcc/gimplify.c", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "patch": "@@ -868,9 +868,9 @@ mostly_copy_tree_r (tree *tp, int *walk_subtrees, void *data)\n   tree t = *tp;\n   enum tree_code code = TREE_CODE (t);\n \n-  /* Do not copy SAVE_EXPR or TARGET_EXPR nodes themselves, but copy\n-     their subtrees if we can make sure to do it only once.  */\n-  if (code == SAVE_EXPR || code == TARGET_EXPR)\n+  /* Do not copy SAVE_EXPR, TARGET_EXPR or BIND_EXPR nodes themselves, but\n+     copy their subtrees if we can make sure to do it only once.  */\n+  if (code == SAVE_EXPR || code == TARGET_EXPR || code == BIND_EXPR)\n     {\n       if (data && !pointer_set_insert ((struct pointer_set_t *)data, t))\n \t;\n@@ -895,10 +895,7 @@ mostly_copy_tree_r (tree *tp, int *walk_subtrees, void *data)\n \n   /* Leave the bulk of the work to copy_tree_r itself.  */\n   else\n-    {\n-      gcc_assert (code != BIND_EXPR);\n-      copy_tree_r (tp, walk_subtrees, NULL);\n-    }\n+    copy_tree_r (tp, walk_subtrees, NULL);\n \n   return NULL_TREE;\n }"}, {"sha": "d64f5054b31fcce80fd794dec966877a2f0508c1", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "patch": "@@ -1,3 +1,7 @@\n+2010-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/cond_expr1.adb: New test.\n+\n 2010-07-03  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gnat.dg/modular3.adb: New test."}, {"sha": "e1a87a36ab533c32e0169520f43386b16224cbef", "filename": "gcc/testsuite/gnat.dg/cond_expr1.adb", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2Ftestsuite%2Fgnat.dg%2Fcond_expr1.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3/gcc%2Ftestsuite%2Fgnat.dg%2Fcond_expr1.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fcond_expr1.adb?ref=6687b74039b24bf8e3bdd35c4f250d5e08e5d5a3", "patch": "@@ -0,0 +1,7 @@\n+-- { dg-do compile }\n+-- { dg-options \"-gnat12\" }\n+\n+function Cond_Expr1 (Dir : in String) return String is\n+begin\n+   return (if Dir (Dir'Last) = '\\' then Dir else Dir & '\\');\n+end;"}]}