{"sha": "19ee20654bba5b0a516043366f26730db6738643", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTllZTIwNjU0YmJhNWIwYTUxNjA0MzM2NmYyNjczMGRiNjczODY0Mw==", "commit": {"author": {"name": "Francois-Xavier Coudert", "email": "coudert@clipper.ens.fr", "date": "2007-03-14T13:31:09Z"}, "committer": {"name": "Fran\u00e7ois-Xavier Coudert", "email": "fxcoudert@gcc.gnu.org", "date": "2007-03-14T13:31:09Z"}, "message": "trans-array.c (gfc_trans_auto_array_allocation): Replace fold(convert()) by fold_convert().\n\n\t* trans-array.c (gfc_trans_auto_array_allocation): Replace\n\tfold(convert()) by fold_convert().\n\t(gfc_duplicate_allocatable): Likewise.\n\t* trans-intrinsic.c (gfc_conv_intrinsic_dot_product): Use\n\tbuild_int_cst instead of converting an integer_zero_node\n\tto the final type.\n\nFrom-SVN: r122921", "tree": {"sha": "be951ee1c126585609d28e42f8a474143527bfa8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be951ee1c126585609d28e42f8a474143527bfa8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19ee20654bba5b0a516043366f26730db6738643", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19ee20654bba5b0a516043366f26730db6738643", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19ee20654bba5b0a516043366f26730db6738643", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19ee20654bba5b0a516043366f26730db6738643/comments", "author": null, "committer": {"login": "fxcoudert", "id": 1980544, "node_id": "MDQ6VXNlcjE5ODA1NDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/1980544?v=4", "gravatar_id": "", "url": "https://api.github.com/users/fxcoudert", "html_url": "https://github.com/fxcoudert", "followers_url": "https://api.github.com/users/fxcoudert/followers", "following_url": "https://api.github.com/users/fxcoudert/following{/other_user}", "gists_url": "https://api.github.com/users/fxcoudert/gists{/gist_id}", "starred_url": "https://api.github.com/users/fxcoudert/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/fxcoudert/subscriptions", "organizations_url": "https://api.github.com/users/fxcoudert/orgs", "repos_url": "https://api.github.com/users/fxcoudert/repos", "events_url": "https://api.github.com/users/fxcoudert/events{/privacy}", "received_events_url": "https://api.github.com/users/fxcoudert/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "28c3de64878cd96057a68625461f05fa796e8c0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28c3de64878cd96057a68625461f05fa796e8c0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28c3de64878cd96057a68625461f05fa796e8c0f"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "48d433494672ceeb7a262e3e710537a53769ad51", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19ee20654bba5b0a516043366f26730db6738643/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19ee20654bba5b0a516043366f26730db6738643/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=19ee20654bba5b0a516043366f26730db6738643", "patch": "@@ -1,3 +1,12 @@\n+2007-03-14  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n+\n+\t* trans-array.c (gfc_trans_auto_array_allocation): Replace\n+\tfold(convert()) by fold_convert().\n+\t(gfc_duplicate_allocatable): Likewise.\n+\t* trans-intrinsic.c (gfc_conv_intrinsic_dot_product): Use\n+\tbuild_int_cst instead of converting an integer_zero_node\n+\tto the final type.\n+\n 2007-03-14  Jakub Jelinek  <jakub@redhat.com>\n \n \t* module.c (mio_typespec): Don't look at ts->cl if not BT_CHARACTER."}, {"sha": "5d4133107359f61ec0a1ffd1f3459d39d200e86f", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19ee20654bba5b0a516043366f26730db6738643/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19ee20654bba5b0a516043366f26730db6738643/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=19ee20654bba5b0a516043366f26730db6738643", "patch": "@@ -3862,7 +3862,7 @@ gfc_trans_auto_array_allocation (tree decl, gfc_symbol * sym, tree fnbody)\n   else\n     gcc_unreachable ();\n   tmp = build_call_expr (fndecl, 1, size);\n-  tmp = fold (convert (TREE_TYPE (decl), tmp));\n+  tmp = fold_convert (TREE_TYPE (decl), tmp);\n   gfc_add_modify_expr (&block, decl, tmp);\n \n   /* Set offset of the array.  */\n@@ -4918,8 +4918,7 @@ gfc_duplicate_allocatable(tree dest, tree src, tree type, int rank)\n     tmp = build_call_expr (gfor_fndecl_internal_malloc64, 1, size);\n   else\n     gcc_unreachable ();\n-  tmp = fold (convert (TREE_TYPE (gfc_conv_descriptor_data_get (src)),\n-\t      tmp));\n+  tmp = fold_convert (TREE_TYPE (gfc_conv_descriptor_data_get (src)), tmp);\n   gfc_conv_descriptor_data_set (&block, dest, tmp);\n \n   /* We know the temporary and the value will be the same length,"}, {"sha": "58c4131eea702362eeedc3692971e5ebee6a68fb", "filename": "gcc/fortran/trans-intrinsic.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19ee20654bba5b0a516043366f26730db6738643/gcc%2Ffortran%2Ftrans-intrinsic.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19ee20654bba5b0a516043366f26730db6738643/gcc%2Ffortran%2Ftrans-intrinsic.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-intrinsic.c?ref=19ee20654bba5b0a516043366f26730db6738643", "patch": "@@ -1840,7 +1840,7 @@ gfc_conv_intrinsic_dot_product (gfc_se * se, gfc_expr * expr)\n   /* Initialize the result.  */\n   resvar = gfc_create_var (type, \"val\");\n   if (expr->ts.type == BT_LOGICAL)\n-    tmp = convert (type, integer_zero_node);\n+    tmp = build_int_cst (type, 0);\n   else\n     tmp = gfc_build_const (type, integer_zero_node);\n "}]}