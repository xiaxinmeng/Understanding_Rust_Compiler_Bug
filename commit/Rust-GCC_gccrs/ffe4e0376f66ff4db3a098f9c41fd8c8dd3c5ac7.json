{"sha": "ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmZlNGUwMzc2ZjY2ZmY0ZGIzYTA5OGY5YzQxZmQ4YzhkZDNjNWFjNw==", "commit": {"author": {"name": "Bryce McKinlay", "email": "mckinlay@redhat.com", "date": "2004-07-24T01:17:29Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2004-07-24T01:17:29Z"}, "message": "prims.cc (_Jv_InitPrimClass): Don't create an array class.\n\n2004-07-23  Bryce McKinlay  <mckinlay@redhat.com>\n\n\t* prims.cc (_Jv_InitPrimClass): Don't create an array class.\n\t(_Jv_CreateJavaVM): Don't pass array vtable parameter to\n\t_Jv_InitPrimClass.\n\t(DECLARE_PRIM_TYPE): Don't declare array vtables.\n\t* include/jvm.h (struct _Jv_ArrayVTable): Removed.\n\t* java/lang/Class.h (_Jv_InitPrimClass): Update friend declaration.\n\nFrom-SVN: r85109", "tree": {"sha": "2a0020f7a0787de7e1df677eb515c257dc704d33", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a0020f7a0787de7e1df677eb515c257dc704d33"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/comments", "author": null, "committer": null, "parents": [{"sha": "bbc630f5d95b858bcea31cec1ce2f1d25c6b6fc6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bbc630f5d95b858bcea31cec1ce2f1d25c6b6fc6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bbc630f5d95b858bcea31cec1ce2f1d25c6b6fc6"}], "stats": {"total": 41, "additions": 20, "deletions": 21}, "files": [{"sha": "bcb9db2da93e72787c97f8bbcad94d6f5a075cd3", "filename": "libjava/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "patch": "@@ -1,3 +1,12 @@\n+2004-07-23  Bryce McKinlay  <mckinlay@redhat.com>\n+\n+\t* prims.cc (_Jv_InitPrimClass): Don't create an array class.\n+\t(_Jv_CreateJavaVM): Don't pass array vtable parameter to\n+\t_Jv_InitPrimClass.\n+\t(DECLARE_PRIM_TYPE): Don't declare array vtables.\n+\t* include/jvm.h (struct _Jv_ArrayVTable): Removed.\n+\t* java/lang/Class.h (_Jv_InitPrimClass): Update friend declaration.\n+\n 2004-07-23  Thomas Fitzsimmons  <fitzsim@redhat.com>\n \n \t* Makefile.am: Replace jar, rmic and rmiregistry references with"}, {"sha": "b85927729231b754a72e076eaca3efc802e26966", "filename": "libjava/include/jvm.h", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2Finclude%2Fjvm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2Finclude%2Fjvm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Finclude%2Fjvm.h?ref=ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "patch": "@@ -79,12 +79,6 @@ struct _Jv_VTable\n // to keep this up to date by hand.\n #define NUM_OBJECT_METHODS 5\n \n-// This structure is the type of an array's vtable.\n-struct _Jv_ArrayVTable : public _Jv_VTable\n-{\n-  vtable_elt extra_method[NUM_OBJECT_METHODS - 1];\n-};\n-\n union _Jv_word\n {\n   jobject o;"}, {"sha": "8d2b4a0cf24e8d34cc7e6477c4706c3b6c79fa9a", "filename": "libjava/java/lang/Class.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2Fjava%2Flang%2FClass.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2Fjava%2Flang%2FClass.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.h?ref=ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "patch": "@@ -328,7 +328,7 @@ class java::lang::Class : public java::lang::Object\n   friend void _Jv_InitNewClassFields (jclass klass);\n \n   // in prims.cc\n-  friend void _Jv_InitPrimClass (jclass, char *, char, int, _Jv_ArrayVTable *);\n+  friend void _Jv_InitPrimClass (jclass, char *, char, int);\n \n   friend void _Jv_PrepareCompiledClass (jclass);\n   friend void _Jv_PrepareConstantTimeTables (jclass);"}, {"sha": "0346b02371b9adcdb02ac5ee247413e52a271b87", "filename": "libjava/prims.cc", "status": "modified", "additions": 10, "deletions": 14, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2Fprims.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7/libjava%2Fprims.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fprims.cc?ref=ffe4e0376f66ff4db3a098f9c41fd8c8dd3c5ac7", "patch": "@@ -670,7 +670,6 @@ _Jv_NewMultiArray (jclass array_type, jint dimensions, ...)\n \n // Ensure 8-byte alignment, for hash synchronization.\n #define DECLARE_PRIM_TYPE(NAME)\t\t\t\\\n-  _Jv_ArrayVTable _Jv_##NAME##VTable;\t\t\\\n   java::lang::Class _Jv_##NAME##Class __attribute__ ((aligned (8)));\n \n DECLARE_PRIM_TYPE(byte)\n@@ -684,8 +683,7 @@ DECLARE_PRIM_TYPE(double)\n DECLARE_PRIM_TYPE(void)\n \n void\n-_Jv_InitPrimClass (jclass cl, char *cname, char sig, int len, \n-                   _Jv_ArrayVTable *array_vtable)\n+_Jv_InitPrimClass (jclass cl, char *cname, char sig, int len)\n {    \n   using namespace java::lang::reflect;\n \n@@ -702,8 +700,6 @@ _Jv_InitPrimClass (jclass cl, char *cname, char sig, int len,\n   cl->vtable = JV_PRIMITIVE_VTABLE;\n   cl->state = JV_STATE_DONE;\n   cl->depth = -1;\n-  if (sig != 'V')\n-    _Jv_NewArrayClass (cl, NULL, (_Jv_VTable *) array_vtable);\n }\n \n jclass\n@@ -976,15 +972,15 @@ _Jv_CreateJavaVM (void* /*vm_args*/)\n   finit_name = _Jv_makeUtf8Const (\"finit$\", 6);\n \n   /* Initialize built-in classes to represent primitive TYPEs. */\n-  _Jv_InitPrimClass (&_Jv_byteClass,    \"byte\",    'B', 1, &_Jv_byteVTable);\n-  _Jv_InitPrimClass (&_Jv_shortClass,   \"short\",   'S', 2, &_Jv_shortVTable);\n-  _Jv_InitPrimClass (&_Jv_intClass,     \"int\",     'I', 4, &_Jv_intVTable);\n-  _Jv_InitPrimClass (&_Jv_longClass,    \"long\",    'J', 8, &_Jv_longVTable);\n-  _Jv_InitPrimClass (&_Jv_booleanClass, \"boolean\", 'Z', 1, &_Jv_booleanVTable);\n-  _Jv_InitPrimClass (&_Jv_charClass,    \"char\",    'C', 2, &_Jv_charVTable);\n-  _Jv_InitPrimClass (&_Jv_floatClass,   \"float\",   'F', 4, &_Jv_floatVTable);\n-  _Jv_InitPrimClass (&_Jv_doubleClass,  \"double\",  'D', 8, &_Jv_doubleVTable);\n-  _Jv_InitPrimClass (&_Jv_voidClass,    \"void\",    'V', 0, &_Jv_voidVTable);\n+  _Jv_InitPrimClass (&_Jv_byteClass,    \"byte\",    'B', 1);\n+  _Jv_InitPrimClass (&_Jv_shortClass,   \"short\",   'S', 2);\n+  _Jv_InitPrimClass (&_Jv_intClass,     \"int\",     'I', 4);\n+  _Jv_InitPrimClass (&_Jv_longClass,    \"long\",    'J', 8);\n+  _Jv_InitPrimClass (&_Jv_booleanClass, \"boolean\", 'Z', 1);\n+  _Jv_InitPrimClass (&_Jv_charClass,    \"char\",    'C', 2);\n+  _Jv_InitPrimClass (&_Jv_floatClass,   \"float\",   'F', 4);\n+  _Jv_InitPrimClass (&_Jv_doubleClass,  \"double\",  'D', 8);\n+  _Jv_InitPrimClass (&_Jv_voidClass,    \"void\",    'V', 0);\n \n   // Turn stack trace generation off while creating exception objects.\n   _Jv_InitClass (&java::lang::VMThrowable::class$);"}]}