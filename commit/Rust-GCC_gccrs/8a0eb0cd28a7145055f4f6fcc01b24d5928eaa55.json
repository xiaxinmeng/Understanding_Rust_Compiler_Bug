{"sha": "8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGEwZWIwY2QyOGE3MTQ1MDU1ZjRmNmZjYzAxYjI0ZDU5MjhlYWE1NQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2019-08-14T18:43:16Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2019-08-14T18:43:16Z"}, "message": "i386-expand.c (ix86_expand_vector_init_one_nonzero): Use vector_set path for TARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n\n\t* config/i386/i386-expand.c (ix86_expand_vector_init_one_nonzero)\n\t<case E_V8QImode>: Use vector_set path for\n\tTARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n\t(ix86_expand_vector_init_one_nonzero) <case E_V8QImode>:\n\tDo not widen for TARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n\nFrom-SVN: r274490", "tree": {"sha": "40c82feb5998841d9bf2ad5b509880c6d27123c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/40c82feb5998841d9bf2ad5b509880c6d27123c6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55/comments", "author": null, "committer": null, "parents": [{"sha": "8069cc6b410f66ab9ff54c8fe90b5217cddff227", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8069cc6b410f66ab9ff54c8fe90b5217cddff227", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8069cc6b410f66ab9ff54c8fe90b5217cddff227"}], "stats": {"total": 28, "additions": 22, "deletions": 6}, "files": [{"sha": "8e98678a2aec1e568c2c7ae8b30eccbc7599483d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 17, "deletions": 6, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55", "patch": "@@ -1,3 +1,11 @@\n+2019-08-14  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n+\n+\t* config/i386/i386-expand.c (ix86_expand_vector_init_one_nonzero)\n+\t<case E_V8QImode>: Use vector_set path for\n+\tTARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n+\t(ix86_expand_vector_init_one_nonzero) <case E_V8QImode>:\n+\tDo not widen for TARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n+\n 2019-08-14  Bernd Edlinger  <bernd.edlinger@hotmail.de>\n \n \t* builtins.c (expand_builtin_init_descriptor): Set memory alignment.\n@@ -15,10 +23,11 @@\n \t* varasm.c (default_section_type_flags): Add support for \"noinit\"\n \tsection.\n \t(default_elf_select_section): Add support for \"noinit\" attribute.\n-\t* config/msp430/msp430.c (msp430_attribute_table): Remove \"noinit\" entry.\n+\t* config/msp430/msp430.c (msp430_attribute_table): Remove\n+\t\"noinit\" entry.\n \n 2019-08-14  Richard Biener  <rguenther@suse.de>\n-\tUro\u0161 Bizjak  <ubizjak@gmail.com>\n+\t    Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n \tPR target/91154\n \t* config/i386/i386-features.h (scalar_chain::scalar_chain): Add\n@@ -644,8 +653,9 @@\n \n 2019-08-13  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n-\t* config/i386/i386.md (ix86_expand_vector_extract) <case E_V2SImode>:\n-\tUse vec_extr path for TARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n+\t* config/i386/i386-expand.c (ix86_expand_vector_extract)\n+\t<case E_V2SImode>: Use vec_extr path for\n+\tTARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n \t<case E_V8QImode>: Ditto.\n \t* config/i386/mmx.md (*mmx_pextrw_zext): Rename from mmx_pextrw.\n \tUse SWI48 mode iterator.  Use %k to output operand 0.\n@@ -842,8 +852,9 @@\n \n 2019-08-13  Uro\u0161 Bizjak  <ubizjak@gmail.com>\n \n-\t* config/i386/i386.md (ix86_expand_vector_set) <case E_V2SImode>:\n-\tUse vec_merge path for TARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n+\t* config/i386/i386-expand.c (ix86_expand_vector_set)\n+\t<case E_V2SImode>: Use vec_merge path for\n+\tTARGET_MMX_WITH_SSE && TARGET_SSE4_1.\n \t<case E_V8QImode>: Ditto.\n \t* config/i386/mmx.md (*mmx_pinsrd): New insn pattern.\n \t(*mmx_pinsrb): Ditto."}, {"sha": "b6a2dbf402a196a3bf19d31a353918f9056a2bb8", "filename": "gcc/config/i386/i386-expand.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55/gcc%2Fconfig%2Fi386%2Fi386-expand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55/gcc%2Fconfig%2Fi386%2Fi386-expand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-expand.c?ref=8a0eb0cd28a7145055f4f6fcc01b24d5928eaa55", "patch": "@@ -13383,6 +13383,9 @@ ix86_expand_vector_init_one_nonzero (bool mmx_ok, machine_mode mode,\n     case E_V8HImode:\n       use_vector_set = TARGET_SSE2;\n       break;\n+    case E_V8QImode:\n+      use_vector_set = TARGET_MMX_WITH_SSE && TARGET_SSE4_1;\n+      break;\n     case E_V4HImode:\n       use_vector_set = TARGET_SSE || TARGET_3DNOW_A;\n       break;\n@@ -13590,6 +13593,8 @@ ix86_expand_vector_init_one_var (bool mmx_ok, machine_mode mode,\n       wmode = V8HImode;\n       goto widen;\n     case E_V8QImode:\n+      if (TARGET_MMX_WITH_SSE && TARGET_SSE4_1)\n+\tbreak;\n       wmode = V4HImode;\n       goto widen;\n     widen:"}]}