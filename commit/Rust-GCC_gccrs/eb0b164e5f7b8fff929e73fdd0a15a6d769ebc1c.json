{"sha": "eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWIwYjE2NGU1ZjdiOGZmZjkyOWU3M2ZkZDBhMTVhNmQ3NjllYmMxYw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2015-11-07T10:00:31Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2015-11-07T10:00:31Z"}, "message": "Don't treat rint as setting errno\n\nbuiltins.def says that rint sets errno, but it looks like this might\nbe a mistake.  C99 says that rint doesn't set errno and the builtins.c\nexpansion code doesn't try to keep errno up to date.\n\nPerhaps this was because earlier versions of POSIX said that\nrint sets errno on overflow:\n\n        http://pubs.opengroup.org/onlinepubs/009695399/functions/rintf.html\n\nHowever, this is another instance of the observation that \"rounding\nfunctions could never overflow\" (because anything using exponents\nthat large is already integral).  The page above also says that\ndifferences with C99 are unintentional and the ERANGE clause has\nbeen removed from later versions of POSIX:\n\n        http://pubs.opengroup.org/onlinepubs/9699919799/functions/rint.html\n\nAlso, the version of POSIX that lists ERANGE for rint does the same\nfor nearbyint:\n\n        http://pubs.opengroup.org/onlinepubs/009695399/functions/nearbyintf.html\n\nand we already treat nearbyint as not setting errno.  This too has been\nclarified in later versions of POSIX:\n\n        http://pubs.opengroup.org/onlinepubs/9699919799/functions/nearbyint.html\n\nTested on x86_64-linux-gnu, aarch64-linux-gnu and arm-linux-gnueabi.\n\ngcc/\n\t* builtins.def (BUILTIN_RINT, BUILTIN_RINTF, BUILTIN_RINTL): Use\n\tATTR_MATHFN_FPROUNDING rather than ATTR_MATHFN_FPROUNDING_ERRNO.\n\nFrom-SVN: r229918", "tree": {"sha": "eef9290cacb79e93abde57c6839883342556a4e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/eef9290cacb79e93abde57c6839883342556a4e9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "02b7230d3cbfb2208dd723dcd3fd84ba74678004", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02b7230d3cbfb2208dd723dcd3fd84ba74678004", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02b7230d3cbfb2208dd723dcd3fd84ba74678004"}], "stats": {"total": 11, "additions": 8, "deletions": 3}, "files": [{"sha": "41ed6307a37204d8243d31a6294d02b3c6e5b3ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c", "patch": "@@ -1,3 +1,8 @@\n+2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* builtins.def (BUILTIN_RINT, BUILTIN_RINTF, BUILTIN_RINTL): Use\n+\tATTR_MATHFN_FPROUNDING rather than ATTR_MATHFN_FPROUNDING_ERRNO.\n+\n 2015-11-07  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* tree-call-cdce.c (shrink_wrap_one_built_in_call): Try to update"}, {"sha": "076da406e1febeea6291fe51e67436fd3594ae45", "filename": "gcc/builtins.def", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c/gcc%2Fbuiltins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c/gcc%2Fbuiltins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.def?ref=eb0b164e5f7b8fff929e73fdd0a15a6d769ebc1c", "patch": "@@ -475,9 +475,9 @@ DEF_C99_BUILTIN        (BUILT_IN_REMAINDERL, \"remainderl\", BT_FN_LONGDOUBLE_LONG\n DEF_C99_BUILTIN        (BUILT_IN_REMQUO, \"remquo\", BT_FN_DOUBLE_DOUBLE_DOUBLE_INTPTR, ATTR_MATHFN_FPROUNDING_STORE)\n DEF_C99_BUILTIN        (BUILT_IN_REMQUOF, \"remquof\", BT_FN_FLOAT_FLOAT_FLOAT_INTPTR, ATTR_MATHFN_FPROUNDING_STORE)\n DEF_C99_BUILTIN        (BUILT_IN_REMQUOL, \"remquol\", BT_FN_LONGDOUBLE_LONGDOUBLE_LONGDOUBLE_INTPTR, ATTR_MATHFN_FPROUNDING_STORE)\n-DEF_C99_BUILTIN        (BUILT_IN_RINT, \"rint\", BT_FN_DOUBLE_DOUBLE, ATTR_MATHFN_FPROUNDING_ERRNO)\n-DEF_C99_BUILTIN        (BUILT_IN_RINTF, \"rintf\", BT_FN_FLOAT_FLOAT, ATTR_MATHFN_FPROUNDING_ERRNO)\n-DEF_C99_BUILTIN        (BUILT_IN_RINTL, \"rintl\", BT_FN_LONGDOUBLE_LONGDOUBLE, ATTR_MATHFN_FPROUNDING_ERRNO)\n+DEF_C99_BUILTIN        (BUILT_IN_RINT, \"rint\", BT_FN_DOUBLE_DOUBLE, ATTR_MATHFN_FPROUNDING)\n+DEF_C99_BUILTIN        (BUILT_IN_RINTF, \"rintf\", BT_FN_FLOAT_FLOAT, ATTR_MATHFN_FPROUNDING)\n+DEF_C99_BUILTIN        (BUILT_IN_RINTL, \"rintl\", BT_FN_LONGDOUBLE_LONGDOUBLE, ATTR_MATHFN_FPROUNDING)\n DEF_C99_BUILTIN        (BUILT_IN_ROUND, \"round\", BT_FN_DOUBLE_DOUBLE, ATTR_CONST_NOTHROW_LEAF_LIST)\n DEF_C99_BUILTIN        (BUILT_IN_ROUNDF, \"roundf\", BT_FN_FLOAT_FLOAT, ATTR_CONST_NOTHROW_LEAF_LIST)\n DEF_C99_BUILTIN        (BUILT_IN_ROUNDL, \"roundl\", BT_FN_LONGDOUBLE_LONGDOUBLE, ATTR_CONST_NOTHROW_LEAF_LIST)"}]}