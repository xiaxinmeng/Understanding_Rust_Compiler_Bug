{"sha": "60cdabab22144d92f227338dea26bcbc81f93dbc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjBjZGFiYWIyMjE0NGQ5MmYyMjczMzhkZWEyNmJjYmM4MWY5M2RiYw==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2004-06-27T15:56:34Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2004-06-27T15:56:34Z"}, "message": "rs6000.c (rs6000_legitimate_offset_address_p): Accept TOC addresses.\n\n        * config/rs6000/rs6000.c (rs6000_legitimate_offset_address_p):\n        Accept TOC addresses.\n\nFrom-SVN: r83736", "tree": {"sha": "48f29909fe85c9a9f107bea3315ccbbe2b60638d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/48f29909fe85c9a9f107bea3315ccbbe2b60638d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60cdabab22144d92f227338dea26bcbc81f93dbc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60cdabab22144d92f227338dea26bcbc81f93dbc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60cdabab22144d92f227338dea26bcbc81f93dbc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60cdabab22144d92f227338dea26bcbc81f93dbc/comments", "author": null, "committer": null, "parents": [{"sha": "585539a1e97f752a0c49edd62e9f244700f38f58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/585539a1e97f752a0c49edd62e9f244700f38f58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/585539a1e97f752a0c49edd62e9f244700f38f58"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "1fe1b439e319e51ed6c1321d51370b71b4f307ba", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60cdabab22144d92f227338dea26bcbc81f93dbc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60cdabab22144d92f227338dea26bcbc81f93dbc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=60cdabab22144d92f227338dea26bcbc81f93dbc", "patch": "@@ -1,3 +1,8 @@\n+2004-06-27  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* config/rs6000/rs6000.c (rs6000_legitimate_offset_address_p):\n+\tAccept TOC addresses.\n+\n 2004-06-27  Ulrich Weigand  <uweigand@de.ibm.com>\n \n \t* config/s390/s390-protos.h (s390_load_got): Update prototype."}, {"sha": "0aa96b99ff66893c836a316f9db3233518cf5cb2", "filename": "gcc/config/rs6000/rs6000.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60cdabab22144d92f227338dea26bcbc81f93dbc/gcc%2Fconfig%2Frs6000%2Frs6000.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60cdabab22144d92f227338dea26bcbc81f93dbc/gcc%2Fconfig%2Frs6000%2Frs6000.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.c?ref=60cdabab22144d92f227338dea26bcbc81f93dbc", "patch": "@@ -2625,9 +2625,6 @@ toc_relative_expr_p (rtx op)\n   return constant_pool_expr_1 (op, &have_sym, &have_toc) && have_toc;\n }\n \n-/* SPE offset addressing is limited to 5-bits worth of double words.  */\n-#define SPE_CONST_OFFSET_OK(x) (((x) & ~0xf8) == 0)\n-\n bool\n legitimate_constant_pool_address_p (rtx x)\n {\n@@ -2647,6 +2644,9 @@ legitimate_small_data_p (enum machine_mode mode, rtx x)\n \t  && small_data_operand (x, mode));\n }\n \n+/* SPE offset addressing is limited to 5-bits worth of double words.  */\n+#define SPE_CONST_OFFSET_OK(x) (((x) & ~0xf8) == 0)\n+\n bool\n rs6000_legitimate_offset_address_p (enum machine_mode mode, rtx x, int strict)\n {\n@@ -2658,6 +2658,8 @@ rs6000_legitimate_offset_address_p (enum machine_mode mode, rtx x, int strict)\n     return false;\n   if (!INT_REG_OK_FOR_BASE_P (XEXP (x, 0), strict))\n     return false;\n+  if (legitimate_constant_pool_address_p (x))\n+    return true;\n   if (GET_CODE (XEXP (x, 1)) != CONST_INT)\n     return false;\n "}]}