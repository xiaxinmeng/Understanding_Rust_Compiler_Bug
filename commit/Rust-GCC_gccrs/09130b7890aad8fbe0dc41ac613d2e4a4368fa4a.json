{"sha": "09130b7890aad8fbe0dc41ac613d2e4a4368fa4a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDkxMzBiNzg5MGFhZDhmYmUwZGM0MWFjNjEzZDJlNGE0MzY4ZmE0YQ==", "commit": {"author": {"name": "Bill Cox", "email": "bill@gnu.org", "date": "1994-05-12T22:51:00Z"}, "committer": {"name": "Bill Cox", "email": "bill@gnu.org", "date": "1994-05-12T22:51:00Z"}, "message": "Various Lynx-related fixups.  To math.h, string.h and curses.h.\n\nFrom-SVN: r7286", "tree": {"sha": "61c1367f5c196bdc9bb3cac225c7b294092b852c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61c1367f5c196bdc9bb3cac225c7b294092b852c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09130b7890aad8fbe0dc41ac613d2e4a4368fa4a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09130b7890aad8fbe0dc41ac613d2e4a4368fa4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09130b7890aad8fbe0dc41ac613d2e4a4368fa4a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09130b7890aad8fbe0dc41ac613d2e4a4368fa4a/comments", "author": null, "committer": null, "parents": [{"sha": "c92d992a818973ef3395557f9bf5f2bd9a9ee598", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c92d992a818973ef3395557f9bf5f2bd9a9ee598", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c92d992a818973ef3395557f9bf5f2bd9a9ee598"}], "stats": {"total": 51, "additions": 51, "deletions": 0}, "files": [{"sha": "512cc7c51c488a7db86bb2bcedc19af864ad1bf2", "filename": "gcc/fixincludes", "status": "modified", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09130b7890aad8fbe0dc41ac613d2e4a4368fa4a/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09130b7890aad8fbe0dc41ac613d2e4a4368fa4a/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=09130b7890aad8fbe0dc41ac613d2e4a4368fa4a", "patch": "@@ -1398,6 +1398,21 @@ if [ -r ${LIB}/$file ]; then\n '\\\n     ${LIB}/$file > ${LIB}/${file}.sed\n   rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+\n+  # In addition, copy the definition of DBL_MAX from float.h\n+  # if math.h requires one.  The Lynx math.h requires it.\n+  if egrep '#define[ \t]*HUGE_VAL[ \t]+DBL_MAX' $file >/dev/null 2>&1; then\n+    if egrep '#define[ \t]+DBL_MAX[ \t]+' $file >/dev/null 2>&1; then\n+      true;\n+    else\n+      dbl_max_def=`egrep 'define[ \t]+DBL_MAX[ \t]+.*' float.h 2>/dev/null`\n+      if [ \"$dbl_max_def\" != \"\" ]; then\n+        dbl_max_def=`echo $dbl_max_def | sed 's/.*define[ \t]*DBL_MAX[ \t]*//'`\n+        sed -e \"/define[ \t]HUGE_VAL[ \t]DBL_MAX/s/DBL_MAX/$dbl_max_def/\" \\\n+          ${LIB}/$file > ${LIB}/${file}.sed\n+      fi\n+    fi\n+  fi\n   if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n     echo Deleting ${LIB}/$file\\; no fixes were needed.\n     rm -f ${LIB}/$file\n@@ -1422,6 +1437,42 @@ if [ -r ${LIB}/$file ]; then\n   fi\n fi\n \n+# Correct the return type for strlen in string.h on Lynx.\n+file=string.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file\n+  sed -e 's/extern[ \t]*int[ \t]*strlen();/extern unsigned int strlen();/' \\\n+    ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+    rm -f ${LIB}/$file\n+  fi\n+fi\n+\n+# Delete the '#define void int' line from curses.h on Lynx\n+file=curses.h\n+if [ -r $file ] && [ ! -r ${LIB}/$file ]; then\n+  cp $file ${LIB}/$file >/dev/null 2>&1 || echo \"Can't copy $file\"\n+  chmod +w ${LIB}/$file 2>/dev/null\n+  chmod a+r ${LIB}/$file 2>/dev/null\n+fi\n+\n+if [ -r ${LIB}/$file ]; then\n+  echo Fixing $file\n+  sed -e '/#define[ \t][ \t]*void[ \t]int/d' \\\n+     ${LIB}/$file > ${LIB}/${file}.sed\n+  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n+    if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n+      rm -f ${LIB}/$file\n+  fi\n+fi\n+\n # Fix incorrect S_IF* definitions on m88k-sysv3.\n file=sys/stat.h\n if [ -r $file ] && [ ! -r ${LIB}/$file ]; then"}]}