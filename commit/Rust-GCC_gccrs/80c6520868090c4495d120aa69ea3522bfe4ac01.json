{"sha": "80c6520868090c4495d120aa69ea3522bfe4ac01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODBjNjUyMDg2ODA5MGM0NDk1ZDEyMGFhNjllYTM1MjJiZmU0YWMwMQ==", "commit": {"author": {"name": "Jing Yu", "email": "jingyu@google.com", "date": "2009-03-18T21:58:15Z"}, "committer": {"name": "Doug Kwan", "email": "dougkwan@gcc.gnu.org", "date": "2009-03-18T21:58:15Z"}, "message": "Fix missing file and ChangeLog error in previous check-in\n\nFrom-SVN: r144945", "tree": {"sha": "c647081bc2673b179dadf7f9722a7398c9319284", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c647081bc2673b179dadf7f9722a7398c9319284"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/80c6520868090c4495d120aa69ea3522bfe4ac01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80c6520868090c4495d120aa69ea3522bfe4ac01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/80c6520868090c4495d120aa69ea3522bfe4ac01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/80c6520868090c4495d120aa69ea3522bfe4ac01/comments", "author": null, "committer": null, "parents": [{"sha": "d680e79da863dc83716cd76acb20967c0a8076e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d680e79da863dc83716cd76acb20967c0a8076e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d680e79da863dc83716cd76acb20967c0a8076e6"}], "stats": {"total": 76, "additions": 71, "deletions": 5}, "files": [{"sha": "adc0ba30ceb189ee73e41b43f1b496d9ee9bb0cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 5, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80c6520868090c4495d120aa69ea3522bfe4ac01/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80c6520868090c4495d120aa69ea3522bfe4ac01/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=80c6520868090c4495d120aa69ea3522bfe4ac01", "patch": "@@ -69,13 +69,19 @@\n 2009-03-17  Jing Yu  <jingyu@google.com>\n \n \tPR middle-end/39378\n-\t* function.h: Move is_thunk from rtl_data structure to function\n-\tstructure.\n+\t* function.h (struct rtl_data): Move is_thunk from here...\n+\t(struct function): ...to here.\n+\t* cp/method.c (use_thunk): Change is_thunk from crtl to cfun.\n \t* varasm.c (assemble_start_function): Change is_thunk from crtl to\n \tcfun.\n-\t* config/alpha/alpha.c: Change is_thunk from crtl to cfun.\n-\t* config/rs6000/rs6000.c: Change is_thunk from crtl to cfun.\n-\t* config/arm/arm.h: Change is_thunk from crtl to cfun.\n+\t* config/alpha/alpha.c (alpha_sa_mask): Change is_thunk from crtl to\n+\tcfun.\n+\t(alpha_does_function_need_gp, alpha_start_function): Likewise.\n+\t(alpha_output_function_end_prologue): Likewise.\n+\t(alpha_end_function, alpha_output_mi_thunk_osf): Likewise.\n+\t* config/rs6000/rs6000.c (rs6000_ra_ever_killed): Likewise.\n+\t(rs6000_output_function_epilogue): Likewise.\n+\t* config/arm/arm.h (ARM_DECLARE_FUNCTION_NAME): Likewise.\n \n 2009-03-17  Uros Bizjak  <ubizjak@gmail.com>\n "}, {"sha": "702067749fa28731034c88a222fb4c2b81c8398e", "filename": "gcc/testsuite/g++.dg/inherit/thunk10.C", "status": "added", "additions": 60, "deletions": 0, "changes": 60, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/80c6520868090c4495d120aa69ea3522bfe4ac01/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Fthunk10.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/80c6520868090c4495d120aa69ea3522bfe4ac01/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Fthunk10.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Finherit%2Fthunk10.C?ref=80c6520868090c4495d120aa69ea3522bfe4ac01", "patch": "@@ -0,0 +1,60 @@\n+/* { dg-options \"-mthumb\" { target arm*-*-* } } */\n+/* { dg-do run } */\n+/* { dg-timeout 100 } */\n+\n+/* PR middle-end/39378 */\n+/* Check if the thunk target function is emitted correctly. */\n+class B1\n+{\n+public:\n+  virtual int foo1(void);\n+  int b1;\n+};\n+\n+class B2\n+{\n+public:\n+  virtual int foo2 (void);\n+  int b2;\n+};\n+\n+class D : public B1, public B2\n+{\n+  int foo1(void);\n+  int foo2(void);\n+  int d;\n+};\n+\n+int B1::foo1(void)\n+{\n+  return 3;\n+}\n+\n+int B2::foo2(void)\n+{\n+  return 4;\n+}\n+\n+int D::foo1(void)\n+{\n+  return 1;\n+}\n+\n+int D::foo2(void)\n+{\n+  return 2;\n+}\n+\n+__attribute__((noinline)) int test(B2* bp)\n+{\n+  return bp->foo2();\n+}\n+\n+int main()\n+{\n+  B2 *bp = new D();\n+  if (test(bp) == 2)\n+    return 0;\n+  else\n+    return 1;\n+}"}]}