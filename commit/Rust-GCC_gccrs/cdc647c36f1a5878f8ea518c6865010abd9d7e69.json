{"sha": "cdc647c36f1a5878f8ea518c6865010abd9d7e69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2RjNjQ3YzM2ZjFhNTg3OGY4ZWE1MThjNjg2NTAxMGFiZDlkN2U2OQ==", "commit": {"author": {"name": "Venkataramanan Kumar", "email": "venkataramanan.kumar@amd.com", "date": "2016-02-14T07:11:16Z"}, "committer": {"name": "Venkataramanan Kumar", "email": "vekumar@gcc.gnu.org", "date": "2016-02-14T07:11:16Z"}, "message": "Fix some pipe reservations in znver1.md\n\nFix some pipe reservations in znver1.md\n\t*  config/i386/znver1.md\n\t(znver1_pop, znver1_pop_mem,\n\tznver1_load_imov_double_store,\n\tznver1_load_imov_direct_store,\n\tznver1_load_imov_direct_load,\n\tznver1_load_imov_double_load): Add new.\n\t(znver1_insn, znver1_insn_load): Add icmov type.\n\t(znver1_sseavx_fma,\n\tznver1_sseavx_fma_load,\n\tznver1_avx256_fma,\n\tznver1_avx256_fma_load): Fix pipe usage.\n\nFrom-SVN: r233409", "tree": {"sha": "5c2421ccba2ad251dcec31b2b2698f112d8bf5de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c2421ccba2ad251dcec31b2b2698f112d8bf5de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cdc647c36f1a5878f8ea518c6865010abd9d7e69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdc647c36f1a5878f8ea518c6865010abd9d7e69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdc647c36f1a5878f8ea518c6865010abd9d7e69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdc647c36f1a5878f8ea518c6865010abd9d7e69/comments", "author": null, "committer": null, "parents": [{"sha": "1a8849d11b962017f06e94ff784b6386e84de9b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a8849d11b962017f06e94ff784b6386e84de9b9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a8849d11b962017f06e94ff784b6386e84de9b9"}], "stats": {"total": 69, "additions": 60, "deletions": 9}, "files": [{"sha": "e81d1feeb980d15c9e517711b6226ca40ab6ffe1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc647c36f1a5878f8ea518c6865010abd9d7e69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc647c36f1a5878f8ea518c6865010abd9d7e69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cdc647c36f1a5878f8ea518c6865010abd9d7e69", "patch": "@@ -1,3 +1,17 @@\n+2016-02-14  Venkataramanan Kumar  <venkataramanan.kumar@amd.com>\n+\n+\t*  config/i386/znver1.md\n+\t(znver1_pop, znver1_pop_mem,\n+\tznver1_load_imov_double_store,\n+\tznver1_load_imov_direct_store,\n+\tznver1_load_imov_direct_load,\n+\tznver1_load_imov_double_load): Add new.\n+\t(znver1_insn, znver1_insn_load): Add icmov type.\n+\t(znver1_sseavx_fma,\n+\tznver1_sseavx_fma_load,\n+\tznver1_avx256_fma,\n+\tznver1_avx256_fma_load): Fix pipe usage.\n+\n 2016-02-14  Alan Modra  <amodra@gmail.com>\n \n \tPR target/68973"}, {"sha": "3db3bed5bb790497380bdbfe3b018d002d1ec1c9", "filename": "gcc/config/i386/znver1.md", "status": "modified", "additions": 46, "deletions": 9, "changes": 55, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdc647c36f1a5878f8ea518c6865010abd9d7e69/gcc%2Fconfig%2Fi386%2Fznver1.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdc647c36f1a5878f8ea518c6865010abd9d7e69/gcc%2Fconfig%2Fi386%2Fznver1.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fznver1.md?ref=cdc647c36f1a5878f8ea518c6865010abd9d7e69", "patch": "@@ -102,6 +102,18 @@\n \t\t\t\t   (eq_attr \"memory\" \"both\")))\n \t\t\t \"znver1-direct,znver1-load,znver1-store\")\n \n+(define_insn_reservation \"znver1_pop\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver1\")\n+\t\t\t      (and (eq_attr \"type\" \"pop\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver1-direct,znver1-load\")\n+\n+(define_insn_reservation \"znver1_pop_mem\" 4\n+\t\t\t (and (eq_attr \"cpu\" \"znver1\")\n+\t\t\t      (and (eq_attr \"type\" \"pop\")\n+\t\t\t\t   (eq_attr \"memory\" \"both\")))\n+\t\t\t \"znver1-direct,znver1-load,znver1-store\")\n+\n ;; Leave\n (define_insn_reservation \"znver1_leave\" 1\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n@@ -194,26 +206,52 @@\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n \t\t\t      (and (eq_attr \"znver1_decode\" \"double\")\n \t\t\t\t   (and (eq_attr \"type\" \"imovx\")\n-\t\t\t\t\t(eq_attr \"memory\" \"none,load\"))))\n+\t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n \t\t\t \"znver1-double,znver1-ieu\")\n \n (define_insn_reservation \"znver1_load_imov_direct\" 1\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n \t\t\t      (and (eq_attr \"type\" \"imov,imovx\")\n-\t\t\t\t   (eq_attr \"memory\" \"none,load\")))\n+\t\t\t\t   (eq_attr \"memory\" \"none\")))\n \t\t\t \"znver1-direct,znver1-ieu\")\n \n+(define_insn_reservation \"znver1_load_imov_double_store\" 2\n+\t\t\t (and (eq_attr \"cpu\" \"znver1\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t   (and (eq_attr \"type\" \"imovx\")\n+\t\t\t\t\t(eq_attr \"memory\" \"store\"))))\n+\t\t\t \"znver1-double,znver1-ieu,znver1-store\")\n+\n+(define_insn_reservation \"znver1_load_imov_direct_store\" 1\n+\t\t\t (and (eq_attr \"cpu\" \"znver1\")\n+\t\t\t      (and (eq_attr \"type\" \"imov,imovx\")\n+\t\t\t\t   (eq_attr \"memory\" \"store\")))\n+\t\t\t\t   \"znver1-direct,znver1-ieu,znver1-store\")\n+\n+(define_insn_reservation \"znver1_load_imov_double_load\" 6\n+\t\t\t (and (eq_attr \"cpu\" \"znver1\")\n+\t\t\t      (and (eq_attr \"znver1_decode\" \"double\")\n+\t\t\t\t   (and (eq_attr \"type\" \"imovx\")\n+\t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n+\t\t\t \"znver1-double,znver1-load,znver1-ieu\")\n+\n+(define_insn_reservation \"znver1_load_imov_direct_load\" 5\n+\t\t\t (and (eq_attr \"cpu\" \"znver1\")\n+\t\t\t      (and (eq_attr \"type\" \"imov,imovx\")\n+\t\t\t\t   (eq_attr \"memory\" \"load\")))\n+\t\t\t \"znver1-direct,znver1-load,znver1-ieu\")\n+\n ;; INTEGER/GENERAL instructions\n ;; register/imm operands only: ALU, ICMP, NEG, NOT, ROTATE, ISHIFT, TEST\n (define_insn_reservation \"znver1_insn\" 1\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n-\t\t\t      (and (eq_attr \"type\" \"alu,icmp,negnot,rotate,rotate1,ishift,ishift1,test,setcc,incdec\")\n+\t\t\t      (and (eq_attr \"type\" \"alu,icmp,negnot,rotate,rotate1,ishift,ishift1,test,setcc,incdec,icmov\")\n \t\t\t\t   (eq_attr \"memory\" \"none,unknown\")))\n \t\t\t \"znver1-direct,znver1-ieu\")\n \n (define_insn_reservation \"znver1_insn_load\" 5\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n-\t\t\t      (and (eq_attr \"type\" \"alu,icmp,negnot,rotate,rotate1,ishift,ishift1,test,setcc,incdec\")\n+\t\t\t      (and (eq_attr \"type\" \"alu,icmp,negnot,rotate,rotate1,ishift,ishift1,test,setcc,incdec,icmov\")\n \t\t\t\t   (eq_attr \"memory\" \"load\")))\n \t\t\t \"znver1-direct,znver1-load,znver1-ieu\")\n \n@@ -666,28 +704,28 @@\n \t\t\t      (and (eq_attr \"mode\" \"SF,DF,V4SF,V2DF\")\n \t\t\t\t   (and (eq_attr \"type\" \"ssemuladd\")\n \t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n-\t\t\t \"znver1-direct,(znver1-fp0+znver1-fp3)|(znver1-fp1+znver1-fp3)\")\n+\t\t\t \"znver1-direct,znver1-fp0|znver1-fp1\")\n \n (define_insn_reservation \"znver1_sseavx_fma_load\" 9\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n \t\t\t      (and (eq_attr \"mode\" \"SF,DF,V4SF,V2DF\")\n \t\t\t\t   (and (eq_attr \"type\" \"ssemuladd\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n-\t\t\t\"znver1-direct,znver1-load,(znver1-fp0+znver1-fp3)|(znver1-fp1+znver1-fp3)\")\n+\t\t\t\"znver1-direct,znver1-load,znver1-fp0|znver1-fp1\")\n \n (define_insn_reservation \"znver1_avx256_fma\" 5\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n \t\t\t      (and (eq_attr \"mode\" \"V8SF,V4DF\")\n \t\t\t\t   (and (eq_attr \"type\" \"ssemuladd\")\n \t\t\t\t\t(eq_attr \"memory\" \"none\"))))\n-\t\t\t \"znver1-double,(znver1-fp0+znver1-fp3)|(znver1-fp1+znver1-fp3)\")\n+\t\t\t \"znver1-double,znver1-fp0|znver1-fp1\")\n \n (define_insn_reservation \"znver1_avx256_fma_load\" 9\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n \t\t\t      (and (eq_attr \"mode\" \"V8SF,V4DF\")\n \t\t\t\t   (and (eq_attr \"type\" \"ssemuladd\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n-\t\t\t \"znver1-double,znver1-load,(znver1-fp0+znver1-fp3)|(znver1-fp1+znver1-fp3)\")\n+\t\t\t \"znver1-double,znver1-load,znver1-fp0|znver1-fp1\")\n \n (define_insn_reservation \"znver1_sseavx_iadd\" 1\n \t\t\t (and (eq_attr \"cpu\" \"znver1\")\n@@ -970,4 +1008,3 @@\n \t\t\t\t   (and (eq_attr \"type\" \"ssecmp\")\n \t\t\t\t\t(eq_attr \"memory\" \"load\"))))\n \t\t\t \"znver1-double,znver1-load,znver1-fp0|znver1-fp3\")\n-"}]}