{"sha": "1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWM4MGZiNjVjZTZhZDYzZTg0OTllOWM1Y2ZkMWFjZTM0OGQ4MzFkZg==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-09-10T11:20:43Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-09-10T11:20:43Z"}, "message": "decl.c (pushdecl): Don't copy types if the DECL_ABSTRACT_ORIGIN of the new decl matches the...\n\n\t* decl.c (pushdecl): Don't copy types if the\n\tDECL_ABSTRACT_ORIGIN of the new decl matches the TYPE_NAME of the\n\ttype.\n\nFrom-SVN: r22381", "tree": {"sha": "40c2065d805fdb2bc7a4864ebb0e31fafc2f7c52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/40c2065d805fdb2bc7a4864ebb0e31fafc2f7c52"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/comments", "author": null, "committer": null, "parents": [{"sha": "02e24c7ab0cc632fefb621ae3dbce2a2a05dbc3c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/02e24c7ab0cc632fefb621ae3dbce2a2a05dbc3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/02e24c7ab0cc632fefb621ae3dbce2a2a05dbc3c"}], "stats": {"total": 27, "additions": 26, "deletions": 1}, "files": [{"sha": "5c3d2a77ba6b66870fa46ef6953adb08ca540c6a", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "patch": "@@ -1,3 +1,9 @@\n+1998-09-10  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* decl.c (pushdecl): Don't copy types if the\n+\tDECL_ABSTRACT_ORIGIN of the new decl matches the TYPE_NAME of the\n+\ttype. \n+\n 1998-09-09  Kriang Lerdsuwanakij <lerdsuwa@scf-fs.usc.edu>\n \n \t* class.c (get_enclosing_class): New function."}, {"sha": "98f933607b7daf7d3651779a683262d4c2254648", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "patch": "@@ -3479,7 +3479,12 @@ pushdecl (x)\n \t      if (TYPE_NAME (type) == 0)\n \t        TYPE_NAME (type) = x;\n             }\n-          else if (type != error_mark_node && TYPE_NAME (type) != x)\n+          else if (type != error_mark_node && TYPE_NAME (type) != x\n+\t\t   /* We don't want to copy the type when all we're\n+\t\t      doing is making a TYPE_DECL for the purposes of\n+\t\t      inlining.  */\n+\t\t   && (!TYPE_NAME (type) \n+\t\t       || TYPE_NAME (type) != DECL_ABSTRACT_ORIGIN (x)))\n             {\n \t      push_obstacks (TYPE_OBSTACK (type), TYPE_OBSTACK (type));\n "}, {"sha": "01148434535fb1e0abd83a1b5ab349616b85a12e", "filename": "gcc/testsuite/g++.old-deja/g++.other/crash3.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c80fb65ce6ad63e8499e9c5cfd1ace348d831df/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcrash3.C?ref=1c80fb65ce6ad63e8499e9c5cfd1ace348d831df", "patch": "@@ -0,0 +1,14 @@\n+// Build don't link:\n+// Special g++ Options: -g -O2\n+\n+inline void f() {\n+  struct S {};\n+  S s;\n+}\n+\n+int g()\n+{\n+  for (int i = 0; i < 2; ++i)\n+    f();\n+}\n+"}]}