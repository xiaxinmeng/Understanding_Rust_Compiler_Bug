{"sha": "8f8470e01fd60067c058acd8789875013add9796", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGY4NDcwZTAxZmQ2MDA2N2MwNThhY2Q4Nzg5ODc1MDEzYWRkOTc5Ng==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-11-11T08:20:12Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-11-11T08:20:12Z"}, "message": "Copy files needed for other files at the very end.\n\nFrom-SVN: r6067", "tree": {"sha": "558408aeaaff050f5c86e174104bb2f430fc9ed8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/558408aeaaff050f5c86e174104bb2f430fc9ed8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8f8470e01fd60067c058acd8789875013add9796", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f8470e01fd60067c058acd8789875013add9796", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8f8470e01fd60067c058acd8789875013add9796", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8f8470e01fd60067c058acd8789875013add9796/comments", "author": null, "committer": null, "parents": [{"sha": "fa27d320291cfa133977affdb9786f4320ac74fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa27d320291cfa133977affdb9786f4320ac74fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa27d320291cfa133977affdb9786f4320ac74fe"}], "stats": {"total": 56, "additions": 29, "deletions": 27}, "files": [{"sha": "f4ae5e68354577be3687418106422e7535647114", "filename": "gcc/fixincludes", "status": "modified", "additions": 29, "deletions": 27, "changes": 56, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8f8470e01fd60067c058acd8789875013add9796/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8f8470e01fd60067c058acd8789875013add9796/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=8f8470e01fd60067c058acd8789875013add9796", "patch": "@@ -337,33 +337,6 @@ while [ $# != 0 ]; do\n   shift; shift\n done\n \n-# Make sure that any include files referenced using double quotes\n-# exist in the fixed directory.\n-while [ -n \"$required\" ]; do\n-  newreq=\n-  set x $required\n-  shift\n-  while [ $# != 0 ]; do\n-    # $1 is the directory to copy from, $2 is the unfixed file,\n-    # $3 is the fixed file name.\n-    cd ${INPUT}\n-    cd $1\n-    if [ -r $2 ] && [ ! -r $3 ]; then\n-      cp $2 $3 >/dev/null 2>&1 || echo \"Can't copy $2\"\n-      chmod +w $3 2>/dev/null\n-      chmod a+r $3 2>/dev/null\n-      echo Copied $2\n-      for include in `egrep '^[ \t]*#[ \t]*include[ \t]*\"[^/]' $3 | sed -e 's/^[ \t]*#[ \t]*include[ \t]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n-\tdir=`echo $2 | sed -e s'|/[^/]*$||'`\n-\tdir2=`echo $3 | sed -e s'|/[^/]*$||'`\n-\tnewreq=\"$newreq $1 $dir/$include $dir2/$include\"\n-      done\n-    fi\n-    shift; shift; shift\n-  done\n-  required=$newreq\n-done\n-\n cd ${INPUT}\n \n # Install the proper definition of size_t in header files that it comes from.\n@@ -1376,6 +1349,35 @@ if $LINKS; then\n   done\n fi\n \n+# Make sure that any include files referenced using double quotes\n+# exist in the fixed directory.  This comes last since otherwise\n+# we might end up deleting some of these files \"because they don't\n+# need any change.\"\n+while [ -n \"$required\" ]; do\n+  newreq=\n+  set x $required\n+  shift\n+  while [ $# != 0 ]; do\n+    # $1 is the directory to copy from, $2 is the unfixed file,\n+    # $3 is the fixed file name.\n+    cd ${INPUT}\n+    cd $1\n+    if [ -r $2 ] && [ ! -r $3 ]; then\n+      cp $2 $3 >/dev/null 2>&1 || echo \"Can't copy $2\"\n+      chmod +w $3 2>/dev/null\n+      chmod a+r $3 2>/dev/null\n+      echo Copied $2\n+      for include in `egrep '^[ \t]*#[ \t]*include[ \t]*\"[^/]' $3 | sed -e 's/^[ \t]*#[ \t]*include[ \t]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+\tdir=`echo $2 | sed -e s'|/[^/]*$||'`\n+\tdir2=`echo $3 | sed -e s'|/[^/]*$||'`\n+\tnewreq=\"$newreq $1 $dir/$include $dir2/$include\"\n+      done\n+    fi\n+    shift; shift; shift\n+  done\n+  required=$newreq\n+done\n+\n echo 'Cleaning up DONE files.'\n cd $LIB\n find . -name DONE -exec rm -f '{}' ';'"}]}