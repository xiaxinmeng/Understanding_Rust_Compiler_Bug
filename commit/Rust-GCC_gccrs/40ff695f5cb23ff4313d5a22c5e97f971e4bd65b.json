{"sha": "40ff695f5cb23ff4313d5a22c5e97f971e4bd65b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBmZjY5NWY1Y2IyM2ZmNDMxM2Q1YTIyYzVlOTdmOTcxZTRiZDY1Yg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-11-24T20:46:59Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-11-24T20:46:59Z"}, "message": "syscall: Fix handling of Unix domain @ addresses.\n\nFrom-SVN: r193783", "tree": {"sha": "8df09f3b05096fb584b8cc8c7919a404fbb3db1a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8df09f3b05096fb584b8cc8c7919a404fbb3db1a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b/comments", "author": null, "committer": null, "parents": [{"sha": "f246eadc0acadb23e08a86f71177cff7596cfc87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f246eadc0acadb23e08a86f71177cff7596cfc87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f246eadc0acadb23e08a86f71177cff7596cfc87"}], "stats": {"total": 8, "additions": 6, "deletions": 2}, "files": [{"sha": "3aa92012f08db0480571769b7ca88fa4b9321df5", "filename": "libgo/go/syscall/socket.go", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b/libgo%2Fgo%2Fsyscall%2Fsocket.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b/libgo%2Fgo%2Fsyscall%2Fsocket.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsocket.go?ref=40ff695f5cb23ff4313d5a22c5e97f971e4bd65b", "patch": "@@ -87,12 +87,16 @@ func (sa *SockaddrUnix) sockaddr() (*RawSockaddrAny, Socklen_t, error) {\n \tfor i := 0; i < n; i++ {\n \t\tsa.raw.Path[i] = int8(name[i])\n \t}\n+\t// length is family (uint16), name, NUL.\n+\tsl := 2 + Socklen_t(n) + 1\n \tif sa.raw.Path[0] == '@' {\n \t\tsa.raw.Path[0] = 0\n+\t\t// Don't count trailing NUL for abstract address.\n+\t\tsl--\n \t}\n \n \t// length is family (uint16), name, NUL.\n-\treturn (*RawSockaddrAny)(unsafe.Pointer(&sa.raw)), 2 + Socklen_t(n) + 1, nil\n+\treturn (*RawSockaddrAny)(unsafe.Pointer(&sa.raw)), sl, nil\n }\n \n func anyToSockaddr(rsa *RawSockaddrAny) (Sockaddr, error) {"}, {"sha": "49a1625d08dc0ad37b84474acebd5060d1950d86", "filename": "libgo/go/syscall/socket_linux.go", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b/libgo%2Fgo%2Fsyscall%2Fsocket_linux.go", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40ff695f5cb23ff4313d5a22c5e97f971e4bd65b/libgo%2Fgo%2Fsyscall%2Fsocket_linux.go", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fgo%2Fsyscall%2Fsocket_linux.go?ref=40ff695f5cb23ff4313d5a22c5e97f971e4bd65b", "patch": "@@ -103,7 +103,7 @@ func (sa *RawSockaddrUnix) getLen() (int, error) {\n \t// to be uninterpreted fixed-size binary blobs--but\n \t// everyone uses this convention.\n \tn := 0\n-\tfor n < len(sa.Path)-3 && sa.Path[n] != 0 {\n+\tfor n < len(sa.Path) && sa.Path[n] != 0 {\n \t\tn++\n \t}\n "}]}