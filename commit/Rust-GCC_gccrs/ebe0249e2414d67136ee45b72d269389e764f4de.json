{"sha": "ebe0249e2414d67136ee45b72d269389e764f4de", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWJlMDI0OWUyNDE0ZDY3MTM2ZWU0NWI3MmQyNjkzODllNzY0ZjRkZQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2014-04-09T14:54:29Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-04-09T14:54:29Z"}, "message": "re PR ada/54040 ([x32] Incorrect timeval and timespec)\n\n\tPR ada/54040\n\tPR ada/59346\n\t* s-osinte-x32.adb: New file.\n\t* s-linux.ads (Time): New section.\n\t* s-linux-alpha.ads (Time): Likewise.\n\t* s-linux-android.ads (Time: Likewise.\n\t* s-linux-hppa.ads (Time): Likewise.\n\t* s-linux-mipsel.ads (Time): Likewise.\n\t* s-linux-sparc.ads (Time): Likewise.\n\t* s-linux-x32.ads (Time): Likewise.\n\t* s-osprim-x32.ads (timespec): Adjust.\n\t* s-osinte-linux.ads (Time): Define local subtypes for those defined\n\tin System.Linux.\n\t* s-taprop-linux.adb (Monotonic_Clock): Do not define timeval.\n\t* s-osinte-hpux.ads (timespec): Revert POSIX breakage.\n\t* s-osinte-kfreebsd-gnu.ads (timespec): Likewise.\n\t* s-osinte-solaris-posix.ads (timespec): Likewise.\n\t* s-osinte-posix.adb (To_Timespec): Likewise.\n\t* gcc-interface/Makefile.in (x32/Linux): Use s-osinte-x32.adb.\n\nFrom-SVN: r209244", "tree": {"sha": "84d7407f6ee7eb8701b437be3631cc15a607af29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84d7407f6ee7eb8701b437be3631cc15a607af29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ebe0249e2414d67136ee45b72d269389e764f4de", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebe0249e2414d67136ee45b72d269389e764f4de", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ebe0249e2414d67136ee45b72d269389e764f4de", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ebe0249e2414d67136ee45b72d269389e764f4de/comments", "author": null, "committer": null, "parents": [{"sha": "5e1f630ae8b479db169fac18f181ed5ad6dd2a31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e1f630ae8b479db169fac18f181ed5ad6dd2a31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e1f630ae8b479db169fac18f181ed5ad6dd2a31"}], "stats": {"total": 355, "additions": 293, "deletions": 62}, "files": [{"sha": "a43ad50d58aaf338fea6ad53f24e09d171657fb9", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -1,3 +1,25 @@\n+2014-04-09  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\tPR ada/54040\n+\tPR ada/59346\n+\t* s-osinte-x32.adb: New file.\n+\t* s-linux.ads (Time): New section.\n+\t* s-linux-alpha.ads (Time): Likewise.\n+\t* s-linux-android.ads (Time: Likewise.\n+\t* s-linux-hppa.ads (Time): Likewise.\n+\t* s-linux-mipsel.ads (Time): Likewise.\n+\t* s-linux-sparc.ads (Time): Likewise.\n+\t* s-linux-x32.ads (Time): Likewise.\n+\t* s-osprim-x32.ads (timespec): Adjust.\n+\t* s-osinte-linux.ads (Time): Define local subtypes for those defined\n+\tin System.Linux.\n+\t* s-taprop-linux.adb (Monotonic_Clock): Do not define timeval.\n+\t* s-osinte-hpux.ads (timespec): Revert POSIX breakage.\n+\t* s-osinte-kfreebsd-gnu.ads (timespec): Likewise.\n+\t* s-osinte-solaris-posix.ads (timespec): Likewise.\n+\t* s-osinte-posix.adb (To_Timespec): Likewise.\n+\t* gcc-interface/Makefile.in (x32/Linux): Use s-osinte-x32.adb.\n+\n 2014-04-08  Eric Botcazou  <ebotcazou@adacore.com>\n \n \tPR ada/60411\n@@ -6,6 +28,7 @@\n \t* s-intman-android.adb: Likewise.\n \t* sigtramp-armdroid.c: Likewise.\n \t* sigtramp.h: Add Android support.\n+\t* s-osinte-android.ads: Adjust.\n \n 2014-04-07  Eric Botcazou  <ebotcazou@adacore.com>\n "}, {"sha": "9af1967ce9f4b775d5056bb9cd9c769b08fe77c9", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -2239,7 +2239,7 @@ ifeq ($(strip $(filter-out %x32 linux%,$(target_cpu) $(target_os))),)\n   s-linux.ads<s-linux-x32.ads \\\n   s-mudido.adb<s-mudido-affinity.adb \\\n   s-osinte.ads<s-osinte-linux.ads \\\n-  s-osinte.adb<s-osinte-posix.adb \\\n+  s-osinte.adb<s-osinte-x32.adb \\\n   s-osprim.adb<s-osprim-x32.adb \\\n   s-taprop.adb<s-taprop-linux.adb \\\n   s-tasinf.ads<s-tasinf-linux.ads \\"}, {"sha": "e1c97ad9a335a9340745b0b8793be2d8e379af6b", "filename": "gcc/ada/s-linux-alpha.ads", "status": "modified", "additions": 22, "deletions": 6, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-alpha.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-alpha.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux-alpha.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---          Copyright (C) 2009-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2009-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -35,14 +35,30 @@\n --  PLEASE DO NOT add any with-clauses to this package or remove the pragma\n --  Preelaborate. This package is designed to be a bottom-level (leaf) package.\n \n+with Interfaces.C;\n+\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n-\n-   type time_t is new Long_Integer;\n+   ----------\n+   -- Time --\n+   ----------\n+\n+   subtype long        is Interfaces.C.long;\n+   subtype suseconds_t is Interfaces.C.long;\n+   subtype time_t      is Interfaces.C.long;\n+\n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : long;\n+   end record;\n+   pragma Convention (C, timespec);\n+\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : suseconds_t;\n+   end record;\n+   pragma Convention (C, timeval);\n \n    -----------\n    -- Errno --"}, {"sha": "85c421039b10aab992b8f0df36ead8d11e9609c3", "filename": "gcc/ada/s-linux-android.ads", "status": "modified", "additions": 20, "deletions": 4, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-android.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-android.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux-android.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -35,14 +35,30 @@\n --  PLEASE DO NOT add any with-clauses to this package or remove the pragma\n --  Preelaborate. This package is designed to be a bottom-level (leaf) package\n \n+with Interfaces.C;\n+\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n+   ----------\n+   -- Time --\n+   ----------\n+\n+   subtype long        is Interfaces.C.long;\n+   subtype suseconds_t is Interfaces.C.long;\n+   subtype time_t      is Interfaces.C.long;\n+\n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : long;\n+   end record;\n+   pragma Convention (C, timespec);\n \n-   type time_t is new Long_Integer;\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : suseconds_t;\n+   end record;\n+   pragma Convention (C, timeval);\n \n    -----------\n    -- Errno --"}, {"sha": "8f7d811757654c0bf71d79f67e5f3a675d526cc3", "filename": "gcc/ada/s-linux-hppa.ads", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-hppa.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-hppa.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux-hppa.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---          Copyright (C) 2008-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2008-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -35,14 +35,30 @@\n --  PLEASE DO NOT add any with-clauses to this package or remove the pragma\n --  Preelaborate. This package is designed to be a bottom-level (leaf) package.\n \n+with Interfaces.C;\n+\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n+   ----------\n+   -- Time --\n+   ----------\n+\n+   subtype long        is Interfaces.C.long;\n+   subtype suseconds_t is Interfaces.C.long;\n+   subtype time_t      is Interfaces.C.long;\n+\n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : long;\n+   end record;\n+   pragma Convention (C, timespec);\n \n-   type time_t is new Long_Integer;\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : suseconds_t;\n+   end record;\n+   pragma Convention (C, timeval);\n \n    -----------\n    -- Errno --"}, {"sha": "1799a557ac6627477eea895ec2f57d7d0f3089dd", "filename": "gcc/ada/s-linux-mipsel.ads", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-mipsel.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-mipsel.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux-mipsel.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---             Copyright (C) 2009-2011, Free Software Foundation, Inc.      --\n+--             Copyright (C) 2009-2014, Free Software Foundation, Inc.      --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -34,14 +34,30 @@\n --  PLEASE DO NOT add any with-clauses to this package or remove the pragma\n --  Preelaborate. This package is designed to be a bottom-level (leaf) package\n \n+with Interfaces.C;\n+\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n+   ----------\n+   -- Time --\n+   ----------\n+\n+   subtype long        is Interfaces.C.long;\n+   subtype suseconds_t is Interfaces.C.long;\n+   subtype time_t      is Interfaces.C.long;\n+\n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : long;\n+   end record;\n+   pragma Convention (C, timespec);\n \n-   type time_t is new Long_Integer;\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : suseconds_t;\n+   end record;\n+   pragma Convention (C, timeval);\n \n    -----------\n    -- Errno --"}, {"sha": "ae813e6b3b4358da2f53c182c1b750d901b6db3e", "filename": "gcc/ada/s-linux-sparc.ads", "status": "modified", "additions": 22, "deletions": 6, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-sparc.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-sparc.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux-sparc.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---             Copyright (C) 2009-2011, Free Software Foundation, Inc.      --\n+--             Copyright (C) 2009-2014, Free Software Foundation, Inc.      --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -35,14 +35,30 @@\n --  PLEASE DO NOT add any with-clauses to this package or remove the pragma\n --  Preelaborate. This package is designed to be a bottom-level (leaf) package\n \n+with Interfaces.C;\n+\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n-\n-   type time_t is new Long_Integer;\n+   ----------\n+   -- Time --\n+   ----------\n+\n+   subtype long        is Interfaces.C.long;\n+   subtype suseconds_t is Interfaces.C.long;\n+   subtype time_t      is Interfaces.C.long;\n+\n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : long;\n+   end record;\n+   pragma Convention (C, timespec);\n+\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : suseconds_t;\n+   end record;\n+   pragma Convention (C, timeval);\n \n    -----------\n    -- Errno --"}, {"sha": "1b2d46eddd2c24684de02867a3f0721659128aa3", "filename": "gcc/ada/s-linux-x32.ads", "status": "modified", "additions": 17, "deletions": 4, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-x32.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux-x32.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux-x32.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,8 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---          Copyright (C) 2013, Free Software Foundation, Inc.              --\n+--             Copyright (C) 2013-2014, Free Software Foundation, Inc.      --\n+--\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -38,12 +39,24 @@\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n+   ----------\n+   -- Time --\n+   ----------\n \n    type time_t is new Long_Long_Integer;\n \n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : Long_Long_Integer;\n+   end record;\n+   pragma Convention (C, timespec);\n+\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : Long_Long_Integer;\n+   end record;\n+   pragma Convention (C, timeval);\n+\n    -----------\n    -- Errno --\n    -----------"}, {"sha": "8a49e8c891edea839a8849abca217a2e8597e2c9", "filename": "gcc/ada/s-linux.ads", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-linux.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-linux.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  S p e c                                 --\n --                                                                          --\n---          Copyright (C) 2008-2011, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2008-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -35,14 +35,30 @@\n --  PLEASE DO NOT add any with-clauses to this package or remove the pragma\n --  Preelaborate. This package is designed to be a bottom-level (leaf) package\n \n+with Interfaces.C;\n+\n package System.Linux is\n    pragma Preelaborate;\n \n-   ------------\n-   -- time_t --\n-   ------------\n+   ----------\n+   -- Time --\n+   ----------\n+\n+   subtype long        is Interfaces.C.long;\n+   subtype suseconds_t is Interfaces.C.long;\n+   subtype time_t      is Interfaces.C.long;\n+\n+   type timespec is record\n+      tv_sec  : time_t;\n+      tv_nsec : long;\n+   end record;\n+   pragma Convention (C, timespec);\n \n-   type time_t is new Long_Integer;\n+   type timeval is record\n+      tv_sec  : time_t;\n+      tv_usec : suseconds_t;\n+   end record;\n+   pragma Convention (C, timeval);\n \n    -----------\n    -- Errno --"}, {"sha": "6beb0501899692daaaf45662915469e42bab7b67", "filename": "gcc/ada/s-osinte-hpux.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-hpux.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-hpux.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-hpux.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --               Copyright (C) 1991-1994, Florida State University          --\n---            Copyright (C) 1995-2013, Free Software Foundation, Inc.       --\n+--            Copyright (C) 1995-2014, Free Software Foundation, Inc.       --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -522,7 +522,7 @@ private\n \n    type timespec is record\n       tv_sec  : time_t;\n-      tv_nsec : time_t;\n+      tv_nsec : long;\n    end record;\n    pragma Convention (C, timespec);\n "}, {"sha": "be46c2e531e7828532676a7af348c65af98227da", "filename": "gcc/ada/s-osinte-kfreebsd-gnu.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-kfreebsd-gnu.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-kfreebsd-gnu.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-kfreebsd-gnu.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --               Copyright (C) 1991-1994, Florida State University          --\n---            Copyright (C) 1995-2013, Free Software Foundation, Inc.       --\n+--            Copyright (C) 1995-2014, Free Software Foundation, Inc.       --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -492,7 +492,7 @@ private\n \n    type timespec is record\n       tv_sec  : time_t;\n-      tv_nsec : time_t;\n+      tv_nsec : long;\n    end record;\n    pragma Convention (C, timespec);\n "}, {"sha": "15a351ac1c05931c52d50af06fdb4978bcb7637d", "filename": "gcc/ada/s-osinte-linux.ads", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-linux.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-linux.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-linux.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---          Copyright (C) 1995-2013, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1995-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -217,8 +217,9 @@ package System.OS_Interface is\n    -- Time --\n    ----------\n \n-   type timespec is private;\n-   type time_t is private;\n+   subtype time_t   is System.Linux.time_t;\n+   subtype timespec is System.Linux.timespec;\n+   subtype timeval  is System.Linux.timeval;\n \n    function To_Duration (TS : timespec) return Duration;\n    pragma Inline (To_Duration);\n@@ -598,14 +599,6 @@ private\n \n    type pid_t is new int;\n \n-   type time_t is new System.Linux.time_t;\n-\n-   type timespec is record\n-      tv_sec  : time_t;\n-      tv_nsec : time_t;\n-   end record;\n-   pragma Convention (C, timespec);\n-\n    type unsigned_long_long_t is mod 2 ** 64;\n    --  Local type only used to get the alignment of this type below\n "}, {"sha": "6bcc7223564861ebaad388ef6868938d96c4464a", "filename": "gcc/ada/s-osinte-posix.adb", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-posix.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-posix.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-posix.adb?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -7,7 +7,7 @@\n --                                   B o d y                                --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---                     Copyright (C) 1995-2010, AdaCore                     --\n+--                     Copyright (C) 1995-2014, AdaCore                     --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -30,8 +30,7 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n---  This is a GNU/LinuxThreads, Solaris pthread and HP-UX pthread version\n---  of this package.\n+--  This version is for POSIX-like operating systems\n \n pragma Polling (Off);\n --  Turn off polling, we do not want ATC polling to take place during\n@@ -104,7 +103,7 @@ package body System.OS_Interface is\n       end if;\n \n       return timespec'(tv_sec => S,\n-                       tv_nsec => time_t (Long_Long_Integer (F * 10#1#E9)));\n+                       tv_nsec => long (Long_Long_Integer (F * 10#1#E9)));\n    end To_Timespec;\n \n end System.OS_Interface;"}, {"sha": "0859b8d7b82fe746afa33425e43c1530d8bcc0ca", "filename": "gcc/ada/s-osinte-solaris-posix.ads", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-solaris-posix.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-solaris-posix.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-solaris-posix.ads?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -7,7 +7,7 @@\n --                                  S p e c                                 --\n --                                                                          --\n --             Copyright (C) 1991-1994, Florida State University            --\n---          Copyright (C) 1995-2013, Free Software Foundation, Inc.         --\n+--          Copyright (C) 1995-2014, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -513,7 +513,7 @@ private\n \n    type timespec is record\n       tv_sec  : time_t;\n-      tv_nsec : time_t;\n+      tv_nsec : long;\n    end record;\n    pragma Convention (C, timespec);\n "}, {"sha": "17989cdaf5a68857d90faf7e114c1fb693a9b911", "filename": "gcc/ada/s-osinte-x32.adb", "status": "added", "additions": 109, "deletions": 0, "changes": 109, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-x32.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osinte-x32.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osinte-x32.adb?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -0,0 +1,109 @@\n+------------------------------------------------------------------------------\n+--                                                                          --\n+--                 GNAT RUN-TIME LIBRARY (GNARL) COMPONENTS                 --\n+--                                                                          --\n+--                   S Y S T E M . O S _ I N T E R F A C E                  --\n+--                                                                          --\n+--                                   B o d y                                --\n+--                                                                          --\n+--             Copyright (C) 1991-1994, Florida State University            --\n+--                     Copyright (C) 1995-2014, AdaCore                     --\n+--                                                                          --\n+-- GNAT is free software;  you can  redistribute it  and/or modify it under --\n+-- terms of the  GNU General Public License as published  by the Free Soft- --\n+-- ware  Foundation;  either version 3,  or (at your option) any later ver- --\n+-- sion.  GNAT is distributed in the hope that it will be useful, but WITH- --\n+-- OUT ANY WARRANTY;  without even the  implied warranty of MERCHANTABILITY --\n+-- or FITNESS FOR A PARTICULAR PURPOSE.                                     --\n+--                                                                          --\n+-- As a special exception under Section 7 of GPL version 3, you are granted --\n+-- additional permissions described in the GCC Runtime Library Exception,   --\n+-- version 3.1, as published by the Free Software Foundation.               --\n+--                                                                          --\n+-- You should have received a copy of the GNU General Public License and    --\n+-- a copy of the GCC Runtime Library Exception along with this program;     --\n+-- see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see    --\n+-- <http://www.gnu.org/licenses/>.                                          --\n+--                                                                          --\n+-- GNARL was developed by the GNARL team at Florida State University.       --\n+-- Extensive contributions were provided by Ada Core Technologies, Inc.     --\n+--                                                                          --\n+------------------------------------------------------------------------------\n+\n+--  This version is for Linux/x32\n+\n+pragma Polling (Off);\n+--  Turn off polling, we do not want ATC polling to take place during\n+--  tasking operations. It causes infinite loops and other problems.\n+\n+--  This package encapsulates all direct interfaces to OS services\n+--  that are needed by children of System.\n+\n+with Interfaces.C; use Interfaces.C;\n+package body System.OS_Interface is\n+\n+   --------------------\n+   -- Get_Stack_Base --\n+   --------------------\n+\n+   function Get_Stack_Base (thread : pthread_t) return Address is\n+      pragma Warnings (Off, thread);\n+\n+   begin\n+      return Null_Address;\n+   end Get_Stack_Base;\n+\n+   ------------------\n+   -- pthread_init --\n+   ------------------\n+\n+   procedure pthread_init is\n+   begin\n+      null;\n+   end pthread_init;\n+\n+   -----------------\n+   -- To_Duration --\n+   -----------------\n+\n+   function To_Duration (TS : timespec) return Duration is\n+   begin\n+      return Duration (TS.tv_sec) + Duration (TS.tv_nsec) / 10#1#E9;\n+   end To_Duration;\n+\n+   ------------------------\n+   -- To_Target_Priority --\n+   ------------------------\n+\n+   function To_Target_Priority\n+     (Prio : System.Any_Priority) return Interfaces.C.int\n+   is\n+   begin\n+      return Interfaces.C.int (Prio);\n+   end To_Target_Priority;\n+\n+   -----------------\n+   -- To_Timespec --\n+   -----------------\n+\n+   function To_Timespec (D : Duration) return timespec is\n+      S : time_t;\n+      F : Duration;\n+\n+   begin\n+      S := time_t (Long_Long_Integer (D));\n+      F := D - Duration (S);\n+\n+      --  If F has negative value due to a round-up, adjust for positive F\n+      --  value.\n+\n+      if F < 0.0 then\n+         S := S - 1;\n+         F := F + 1.0;\n+      end if;\n+\n+      return timespec'(tv_sec => S,\n+                       tv_nsec => Long_Long_Integer (F * 10#1#E9));\n+   end To_Timespec;\n+\n+end System.OS_Interface;"}, {"sha": "fb00e780fa61f218190378b20689c5bc92e94111", "filename": "gcc/ada/s-osprim-x32.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osprim-x32.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-osprim-x32.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-osprim-x32.adb?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  B o d y                                 --\n --                                                                          --\n---          Copyright (C) 2013, Free Software Foundation, Inc.              --\n+--             Copyright (C) 2013-2014, Free Software Foundation, Inc.      --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -42,7 +42,7 @@ package body System.OS_Primitives is\n \n    type timespec is record\n       tv_sec  : time_t;\n-      tv_nsec : time_t;\n+      tv_nsec : Long_Long_Integer;\n    end record;\n    pragma Convention (C, timespec);\n "}, {"sha": "5aa384ba126d0c0f2443fbd159131bcc3fb91238", "filename": "gcc/ada/s-taprop-linux.adb", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-taprop-linux.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ebe0249e2414d67136ee45b72d269389e764f4de/gcc%2Fada%2Fs-taprop-linux.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fs-taprop-linux.adb?ref=ebe0249e2414d67136ee45b72d269389e764f4de", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                  B o d y                                 --\n --                                                                          --\n---         Copyright (C) 1992-2012, Free Software Foundation, Inc.          --\n+--         Copyright (C) 1992-2014, Free Software Foundation, Inc.          --\n --                                                                          --\n -- GNARL is free software; you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -627,8 +627,6 @@ package body System.Task_Primitives.Operations is\n    function Monotonic_Clock return Duration is\n       use Interfaces;\n \n-      type timeval is array (1 .. 2) of System.OS_Interface.time_t;\n-\n       procedure timeval_to_duration\n         (T    : not null access timeval;\n          sec  : not null access C.long;"}]}