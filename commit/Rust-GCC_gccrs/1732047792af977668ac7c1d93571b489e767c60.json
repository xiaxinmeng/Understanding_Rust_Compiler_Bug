{"sha": "1732047792af977668ac7c1d93571b489e767c60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTczMjA0Nzc5MmFmOTc3NjY4YWM3YzFkOTM1NzFiNDg5ZTc2N2M2MA==", "commit": {"author": {"name": "Adam Nemet", "email": "anemet@caviumnetworks.com", "date": "2009-07-31T15:47:20Z"}, "committer": {"name": "Adam Nemet", "email": "nemet@gcc.gnu.org", "date": "2009-07-31T15:47:20Z"}, "message": "mips.md (*clear_upper32_dext): New pattern.\n\n\t* config/mips/mips.md (*clear_upper32_dext): New pattern.\n\ntestsuite/\n\t* gcc.target/mips/ext-4.c: New test.\n\nFrom-SVN: r150316", "tree": {"sha": "d38f6929c1d93bf59c410902f1ff98120bd9226a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d38f6929c1d93bf59c410902f1ff98120bd9226a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1732047792af977668ac7c1d93571b489e767c60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1732047792af977668ac7c1d93571b489e767c60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1732047792af977668ac7c1d93571b489e767c60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1732047792af977668ac7c1d93571b489e767c60/comments", "author": null, "committer": null, "parents": [{"sha": "e61c65627303b0e086a5347df3cb0d7e658e3a97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e61c65627303b0e086a5347df3cb0d7e658e3a97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e61c65627303b0e086a5347df3cb0d7e658e3a97"}], "stats": {"total": 36, "additions": 35, "deletions": 1}, "files": [{"sha": "17a3e969c9fc89bd9f1391d3ffbfef02f4eb1900", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1732047792af977668ac7c1d93571b489e767c60/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1732047792af977668ac7c1d93571b489e767c60/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1732047792af977668ac7c1d93571b489e767c60", "patch": "@@ -1,3 +1,7 @@\n+2009-07-31  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* config/mips/mips.md (*clear_upper32_dext): New pattern.\n+\n 2009-07-31  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* config/i386/bsd.h (ASM_BYTE): New define."}, {"sha": "02e99375195c299e0737f9db6d1884777764bd95", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1732047792af977668ac7c1d93571b489e767c60/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1732047792af977668ac7c1d93571b489e767c60/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=1732047792af977668ac7c1d93571b489e767c60", "patch": "@@ -2785,7 +2785,7 @@\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n         (and:DI (match_operand:DI 1 \"nonimmediate_operand\" \"d,W\")\n \t\t(const_int 4294967295)))]\n-  \"TARGET_64BIT\"\n+  \"TARGET_64BIT && !ISA_HAS_EXT_INS\"\n {\n   if (which_alternative == 0)\n     return \"#\";\n@@ -2802,6 +2802,21 @@\n   [(set_attr \"move_type\" \"shift_shift,load\")\n    (set_attr \"mode\" \"DI\")])\n \n+(define_insn \"*clear_upper32_dext\"\n+  [(set (match_operand:DI 0 \"register_operand\" \"=d,d\")\n+        (and:DI (match_operand:DI 1 \"nonimmediate_operand\" \"d,W\")\n+\t\t(const_int 4294967295)))]\n+  \"TARGET_64BIT && ISA_HAS_EXT_INS\"\n+{\n+  if (which_alternative == 0)\n+    return \"dext\\t%0,%1,0,32\";\n+\n+  operands[1] = gen_lowpart (SImode, operands[1]);\n+  return \"lwu\\t%0,%1\";\n+}\n+  [(set_attr \"move_type\" \"arith,load\")\n+   (set_attr \"mode\" \"DI\")])\n+\n (define_expand \"zero_extend<SHORT:mode><GPR:mode>2\"\n   [(set (match_operand:GPR 0 \"register_operand\")\n         (zero_extend:GPR (match_operand:SHORT 1 \"nonimmediate_operand\")))]"}, {"sha": "2cfe47bff1b3bbc4f5bf330021300899f4fc37c4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1732047792af977668ac7c1d93571b489e767c60/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1732047792af977668ac7c1d93571b489e767c60/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1732047792af977668ac7c1d93571b489e767c60", "patch": "@@ -1,3 +1,7 @@\n+2009-07-31  Adam Nemet  <anemet@caviumnetworks.com>\n+\n+\t* gcc.target/mips/ext-4.c: New test.\n+\n 2009-07-30  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* g++.dg/tree-ssa/pr33615.C: Fix pattern for lim."}, {"sha": "15e20292b1b3ef865fc4216f376e7c1ab30ec4c5", "filename": "gcc/testsuite/gcc.target/mips/ext-4.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1732047792af977668ac7c1d93571b489e767c60/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fext-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1732047792af977668ac7c1d93571b489e767c60/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fext-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmips%2Fext-4.c?ref=1732047792af977668ac7c1d93571b489e767c60", "patch": "@@ -0,0 +1,11 @@\n+/* For MIPS64r2 use DEXT rather than DSLL/DSRL for clear_upper32.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-O isa_rev>=2 -mgp64\" } */\n+/* { dg-final { scan-assembler \"\\tdext\\t\" } } */\n+/* { dg-final { scan-assembler-not \"sll\" } } */\n+\n+unsigned long long\n+f (unsigned long long i)\n+{\n+  return i & 0xffffffffull;\n+}"}]}