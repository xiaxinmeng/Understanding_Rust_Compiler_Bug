{"sha": "6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmYyM2RkOTFjYmU0OWU2ZDM5NDU0NDBiMGYwMzExMGVmM2QyOWZkNA==", "commit": {"author": {"name": "Sebastian Pop", "email": "sebastian.pop@amd.com", "date": "2010-08-11T20:28:38Z"}, "committer": {"name": "Sebastian Pop", "email": "spop@gcc.gnu.org", "date": "2010-08-11T20:28:38Z"}, "message": "Unshare the scev before code generating it.\n\n2010-07-15  Sebastian Pop  <sebastian.pop@amd.com>\n\n\t* sese.c (rename_uses): Call unshare_expr before force_gimple_operand.\n\n\t* gcc.dg/graphite/id-23.c: New.\n\nFrom-SVN: r163149", "tree": {"sha": "943a6e6e68769096938b7f7b49644ffa1ad23161", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/943a6e6e68769096938b7f7b49644ffa1ad23161"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/comments", "author": null, "committer": {"login": "sebpop", "id": 568397, "node_id": "MDQ6VXNlcjU2ODM5Nw==", "avatar_url": "https://avatars.githubusercontent.com/u/568397?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sebpop", "html_url": "https://github.com/sebpop", "followers_url": "https://api.github.com/users/sebpop/followers", "following_url": "https://api.github.com/users/sebpop/following{/other_user}", "gists_url": "https://api.github.com/users/sebpop/gists{/gist_id}", "starred_url": "https://api.github.com/users/sebpop/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sebpop/subscriptions", "organizations_url": "https://api.github.com/users/sebpop/orgs", "repos_url": "https://api.github.com/users/sebpop/repos", "events_url": "https://api.github.com/users/sebpop/events{/privacy}", "received_events_url": "https://api.github.com/users/sebpop/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "87b28340fd2de93c135ec1529227ca77722be056", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87b28340fd2de93c135ec1529227ca77722be056", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87b28340fd2de93c135ec1529227ca77722be056"}], "stats": {"total": 39, "additions": 38, "deletions": 1}, "files": [{"sha": "0e363faa00b0d9001a4b591120f4a052a47ff478", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "patch": "@@ -1,3 +1,7 @@\n+2010-08-02  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* sese.c (rename_uses): Call unshare_expr before force_gimple_operand.\n+\n 2010-08-02  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-sese-to-poly.c (reduction_phi_p): Do not rewrite out of"}, {"sha": "d929c9a9f4b9b274a9b4cb0efff33959945ec5d6", "filename": "gcc/ChangeLog.graphite", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2FChangeLog.graphite", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2FChangeLog.graphite", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog.graphite?ref=6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "patch": "@@ -1,3 +1,9 @@\n+2010-07-15  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* sese.c (rename_uses): Call unshare_expr before force_gimple_operand.\n+\n+\t* gcc.dg/graphite/id-23.c: New.\n+\n 2010-07-15  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* graphite-sese-to-poly.c (reduction_phi_p): Do not rewrite out of"}, {"sha": "5ac7a2fc5b90ab047cee831a7710ebb1259273f4", "filename": "gcc/sese.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2Fsese.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2Fsese.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsese.c?ref=6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "patch": "@@ -543,7 +543,8 @@ rename_uses (gimple copy, htab_t rename_map, gimple_stmt_iterator *gsi_tgt,\n \t\t  && !tree_contains_chrecs (new_expr, NULL));\n \n       /* Replace the old_name with the new_expr.  */\n-      new_expr = force_gimple_operand (new_expr, &stmts, true, NULL);\n+      new_expr = force_gimple_operand (unshare_expr (new_expr), &stmts,\n+\t\t\t\t       true, NULL);\n       gsi_insert_seq_before (gsi_tgt, stmts, GSI_SAME_STMT);\n       replace_exp (use_p, new_expr);\n       set_rename (rename_map, old_name, new_expr);"}, {"sha": "46cf6464a5c31abdbbd331ccb94644823c35381f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "patch": "@@ -1,3 +1,7 @@\n+2010-08-02  Sebastian Pop  <sebastian.pop@amd.com>\n+\n+\t* gcc.dg/graphite/id-23.c: New.\n+\n 2010-08-02  Sebastian Pop  <sebastian.pop@amd.com>\n \n \t* gfortran.dg/graphite/id-20.f: Adjust testcase."}, {"sha": "0f8a1f32f6e91f2e699eacb3d2c93f6f624d3054", "filename": "gcc/testsuite/gcc.dg/graphite/id-23.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fid-23.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6f23dd91cbe49e6d3945440b0f03110ef3d29fd4/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fid-23.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fgraphite%2Fid-23.c?ref=6f23dd91cbe49e6d3945440b0f03110ef3d29fd4", "patch": "@@ -0,0 +1,22 @@\n+double *ZV_entries (void);\n+void SubMtx_fillRowZV (int irow)\n+{\n+  double *rowvec = ZV_entries ();\n+  double *entries;\n+  int ii, ipivot, jrow, kk, m;\n+  int *pivotsizes;\n+\n+  SubMtx_blockDiagonalInfo (&pivotsizes);\n+\n+  for (jrow = ipivot = kk = 0; jrow <= irow; ipivot++)\n+    {\n+      m = pivotsizes[ipivot];\n+      if (jrow <= irow && irow < jrow + m)\n+\tfor (ii = jrow; ii < irow; ii++)\n+\t  {\n+\t    rowvec[2*ii] = entries[2*kk];\n+\t    rowvec[2*ii+1] = entries[2*kk+1];\n+\t  }\n+      jrow += m;\n+    }\n+}"}]}