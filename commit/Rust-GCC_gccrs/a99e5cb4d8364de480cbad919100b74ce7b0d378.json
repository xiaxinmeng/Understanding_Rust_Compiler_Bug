{"sha": "a99e5cb4d8364de480cbad919100b74ce7b0d378", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTk5ZTVjYjRkODM2NGRlNDgwY2JhZDkxOTEwMGI3NGNlN2IwZDM3OA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2007-01-23T21:46:51Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-01-23T21:46:51Z"}, "message": "typeck.c (convert_for_assignment): Only warn about a = b = c when converting to bool.\n\ncp/:\n\t* typeck.c (convert_for_assignment): Only warn about a = b = c\n\twhen converting to bool.\ntestsuite/:\n\t* g++.dg/warn/Wparentheses-24.C: New test.\n\nFrom-SVN: r121087", "tree": {"sha": "15e3da15ba1cd60e0a23fb47dab5b5cfbd247c17", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/15e3da15ba1cd60e0a23fb47dab5b5cfbd247c17"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a99e5cb4d8364de480cbad919100b74ce7b0d378", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a99e5cb4d8364de480cbad919100b74ce7b0d378", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a99e5cb4d8364de480cbad919100b74ce7b0d378", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a99e5cb4d8364de480cbad919100b74ce7b0d378/comments", "author": null, "committer": null, "parents": [{"sha": "38fbab2a179ffa334abe76d60771662d7e07287f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38fbab2a179ffa334abe76d60771662d7e07287f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38fbab2a179ffa334abe76d60771662d7e07287f"}], "stats": {"total": 29, "additions": 27, "deletions": 2}, "files": [{"sha": "65366bb4025e38085f93d87ee73dd35b2a8ad06b", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=a99e5cb4d8364de480cbad919100b74ce7b0d378", "patch": "@@ -1,3 +1,8 @@\n+2007-01-23  Ian Lance Taylor  <iant@google.com>\n+\n+\t* typeck.c (convert_for_assignment): Only warn about a = b = c\n+\twhen converting to bool.\n+\n 2007-01-23  Roger Sayle  <roger@eyesopen.com>\n \n \t* call.c (null_ptr_cst_p): Replace use of TREE_CONSTANT_OVERFLOW with"}, {"sha": "709d25b4dd200b9ecafcc21e7e23908010c91e2d", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=a99e5cb4d8364de480cbad919100b74ce7b0d378", "patch": "@@ -6380,11 +6380,13 @@ convert_for_assignment (tree type, tree rhs,\n \t\t errtype);\n     }\n \n-  /* If -Wparentheses, warn about a = b = c when a has type bool.  */\n+  /* If -Wparentheses, warn about a = b = c when a has type bool and b\n+     does not.  */\n   if (warn_parentheses\n       && type == boolean_type_node\n       && TREE_CODE (rhs) == MODIFY_EXPR\n-      && !TREE_NO_WARNING (rhs))\n+      && !TREE_NO_WARNING (rhs)\n+      && TREE_TYPE (rhs) != boolean_type_node)\n     {\n       warning (OPT_Wparentheses,\n \t       \"suggest parentheses around assignment used as truth value\");"}, {"sha": "81f1370986c9efee4a35f9abc64d01e64a2b51be", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a99e5cb4d8364de480cbad919100b74ce7b0d378", "patch": "@@ -1,3 +1,7 @@\n+2007-01-23  Ian Lance Taylor  <iant@google.com>\n+\n+\t* g++.dg/warn/Wparentheses-24.C: New test.\n+\n 2007-01-23  Richard Guenther  <rguenther@suse.de>\n \n \tPR testsuite/30560"}, {"sha": "4019d3d828620cfe0b9b24b9103763aa7ac96c16", "filename": "gcc/testsuite/g++.dg/warn/Wparentheses-24.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWparentheses-24.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a99e5cb4d8364de480cbad919100b74ce7b0d378/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWparentheses-24.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWparentheses-24.C?ref=a99e5cb4d8364de480cbad919100b74ce7b0d378", "patch": "@@ -0,0 +1,14 @@\n+// { dg-do compile }\n+// { dg-options \"-Wparentheses\" }\n+\n+extern int foo (int);\n+\n+bool a, b, c;\n+\n+bool\n+bar ()\n+{\n+  c = a = b;\n+  foo (0);\n+  return a = b;\n+}"}]}