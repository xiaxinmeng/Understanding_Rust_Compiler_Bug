{"sha": "b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjNkYTdiYjFjZmQ2MmUwYWQ2MWU2NjFlNDI4ZjBhZjIxMjRlZTVlMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "1999-10-01T17:25:05Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-10-01T17:25:05Z"}, "message": "pt.c (tsubst_decl): If the type of a template instantiation is bogus, so is the whole instantiation.\n\n\t* pt.c (tsubst_decl): If the type of a template instantiation is\n\tbogus, so is the whole instantiation.\n\nFrom-SVN: r29757", "tree": {"sha": "694d7ced2e4915115bb5bcf49f7941a944c10e7e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/694d7ced2e4915115bb5bcf49f7941a944c10e7e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/comments", "author": null, "committer": null, "parents": [{"sha": "2816d1644f17de74f9065f2a2f2af48555e13b11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2816d1644f17de74f9065f2a2f2af48555e13b11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2816d1644f17de74f9065f2a2f2af48555e13b11"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "bef91e9492c8cefd01d079eb1ec56830a628dd1c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "patch": "@@ -1,3 +1,8 @@\n+1999-10-01  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* pt.c (tsubst_decl): If the type of a template instantiation is\n+\tbogus, so is the whole instantiation.\n+\n 1999-09-30  Mark Mitchell  <mark@codesourcery.com>\n \n \t* decl.c (initialize_local_var): Handle static variables here."}, {"sha": "fca18cce70db4130ea070880222d582128e3924f", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "patch": "@@ -5778,6 +5778,8 @@ tsubst_decl (t, args, type, in_decl)\n \t    ctx = NULL_TREE;\n \t  }\n \ttype = tsubst (type, args, /*complain=*/1, in_decl);\n+\tif (type == error_mark_node)\n+\t  return error_mark_node;\n \n \t/* We do NOT check for matching decls pushed separately at this\n            point, as they may not represent instantiations of this"}, {"sha": "21518aac525166038a49e831d6164502ddf9fbf2", "filename": "gcc/testsuite/g++.old-deja/g++.pt/error2.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ferror2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ferror2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ferror2.C?ref=b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "patch": "@@ -0,0 +1,15 @@\n+// Build don't link:\n+// Origin: Carl Nygard <cnygard@bellatlantic.net>\n+\n+template <class RT>\n+class Test { // ERROR - in instantiation\n+public:\n+  Test(const RT& c = RT()) {} // ERROR - reference to void\n+};\n+\n+void f ()\n+{\n+  Test<void> c; // ERROR - instantiated from here\n+}\n+\n+"}, {"sha": "5e5f2f07505b25f04385250d3a9ca880921dc9a7", "filename": "gcc/testsuite/g++.old-deja/g++.pt/typename8.C", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypename8.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypename8.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Ftypename8.C?ref=b3da7bb1cfd62e0ad61e661e428f0af2124ee5e1", "patch": "@@ -11,7 +11,7 @@ public:\n     t=_t;\n   }\n \n-  anotherT getT() {\n+  anotherT getT() { // ERROR - undefined type\n     return t;\n   }\n };\n@@ -20,8 +20,8 @@ class B : public A< B > // ERROR - forward declaration\n {\n public:\n   typedef int myT;\n-};\n+}; // ERROR - base with non-default constructor\n \n int main() {\n-  B b;\n+  B b; // ERROR - no constructor\n }"}]}