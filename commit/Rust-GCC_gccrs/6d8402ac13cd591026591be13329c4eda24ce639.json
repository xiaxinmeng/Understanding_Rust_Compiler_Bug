{"sha": "6d8402ac13cd591026591be13329c4eda24ce639", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmQ4NDAyYWMxM2NkNTkxMDI2NTkxYmUxMzMyOWM0ZWRhMjRjZTYzOQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2011-06-06T13:24:55Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2011-06-06T13:24:55Z"}, "message": "tree-pretty-print.c (dump_function_header): Add flags.\n\n* tree-pretty-print.c (dump_function_header): Add flags.\nDon't dump decl_uid with nouid.\n* tree-pretty-print.h (dump_function_header): Adjust.\n* final.c (rest_of_clean_state): Pass dump_flags on, with nouid.\n* passes.c (pass_init_dump_file): Pass dump_flags on.\n* tree-cfg.c (gimple_dump_cfg): Pass flags on.\n\nFrom-SVN: r174698", "tree": {"sha": "17c8c5596a02cb936bbd251b4cf84ef3d841da0a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17c8c5596a02cb936bbd251b4cf84ef3d841da0a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6d8402ac13cd591026591be13329c4eda24ce639", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d8402ac13cd591026591be13329c4eda24ce639", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d8402ac13cd591026591be13329c4eda24ce639", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d8402ac13cd591026591be13329c4eda24ce639/comments", "author": null, "committer": null, "parents": [{"sha": "f75e1f1ee358b9beae2ec796930280fdd47a4eae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f75e1f1ee358b9beae2ec796930280fdd47a4eae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f75e1f1ee358b9beae2ec796930280fdd47a4eae"}], "stats": {"total": 31, "additions": 21, "deletions": 10}, "files": [{"sha": "59bf1fc2c998e8601b78f8c0fd7ddb06275ea2de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6d8402ac13cd591026591be13329c4eda24ce639", "patch": "@@ -1,3 +1,12 @@\n+2011-06-06  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\t* tree-pretty-print.c (dump_function_header): Add flags.\n+\tDon't dump decl_uid with nouid.\n+\t* tree-pretty-print.h (dump_function_header): Adjust.\n+\t* final.c (rest_of_clean_state): Pass dump_flags on, with nouid.\n+\t* passes.c (pass_init_dump_file): Pass dump_flags on.\n+\t* tree-cfg.c (gimple_dump_cfg): Pass flags on.\n+\n 2011-06-06  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR bootstrap/49270"}, {"sha": "748042abf1038558675fe94747517b2933708a7c", "filename": "gcc/final.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ffinal.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ffinal.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffinal.c?ref=6d8402ac13cd591026591be13329c4eda24ce639", "patch": "@@ -4361,10 +4361,11 @@ rest_of_clean_state (void)\n \t}\n       else\n \t{\n-\t  dump_function_header (final_output, current_function_decl);\n \t  flag_dump_noaddr = flag_dump_unnumbered = 1;\n \t  if (flag_compare_debug_opt || flag_compare_debug)\n \t    dump_flags |= TDF_NOUID;\n+\t  dump_function_header (final_output, current_function_decl,\n+\t\t\t\tdump_flags);\n \t  final_insns_dump_p = true;\n \n \t  for (insn = get_insns (); insn; insn = NEXT_INSN (insn))"}, {"sha": "9f328cd2fc5901ec9f186e9d218ed560707bcbc8", "filename": "gcc/passes.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=6d8402ac13cd591026591be13329c4eda24ce639", "patch": "@@ -1638,7 +1638,7 @@ pass_init_dump_file (struct opt_pass *pass)\n       dump_file_name = get_dump_file_name (pass->static_pass_number);\n       dump_file = dump_begin (pass->static_pass_number, &dump_flags);\n       if (dump_file && current_function_decl)\n-        dump_function_header (dump_file, current_function_decl);\n+        dump_function_header (dump_file, current_function_decl, dump_flags);\n       return initializing_dump;\n     }\n   else"}, {"sha": "85fece45d43ec9f3cf24e32ab92c4769dd67be1a", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=6d8402ac13cd591026591be13329c4eda24ce639", "patch": "@@ -2052,7 +2052,7 @@ gimple_dump_cfg (FILE *file, int flags)\n {\n   if (flags & TDF_DETAILS)\n     {\n-      dump_function_header (file, current_function_decl);\n+      dump_function_header (file, current_function_decl, flags);\n       fprintf (file, \";; \\n%d basic blocks, %d edges, last basic block %d.\\n\\n\",\n \t       n_basic_blocks, n_edges, last_basic_block);\n "}, {"sha": "2102aaa37f3c1a3c89417e8f367603403db36017", "filename": "gcc/tree-pretty-print.c", "status": "modified", "additions": 7, "deletions": 6, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ftree-pretty-print.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ftree-pretty-print.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pretty-print.c?ref=6d8402ac13cd591026591be13329c4eda24ce639", "patch": "@@ -3018,7 +3018,7 @@ pp_base_tree_identifier (pretty_printer *pp, tree id)\n    function dump.  */\n \n void\n-dump_function_header (FILE *dump_file, tree fdecl)\n+dump_function_header (FILE *dump_file, tree fdecl, int flags)\n {\n   const char *dname, *aname;\n   struct cgraph_node *node = cgraph_get_node (fdecl);\n@@ -3032,11 +3032,13 @@ dump_function_header (FILE *dump_file, tree fdecl)\n   else\n     aname = \"<unset-asm-name>\";\n \n+  fprintf (dump_file, \"\\n;; Function %s (%s, funcdef_no=%d\",\n+\t   dname, aname, fun->funcdef_no);\n+  if (!(flags & TDF_NOUID))\n+    fprintf (dump_file, \", decl_uid=%d\", DECL_UID (fdecl));\n   if (node)\n     {\n-      fprintf (dump_file, \"\\n;; Function %s (%s, funcdef_no=%d, decl_uid=%d, cgraph_uid=%d)\",\n-               dname, aname, fun->funcdef_no, DECL_UID(fdecl), node->uid);\n-      fprintf (dump_file, \"%s\\n\\n\",\n+      fprintf (dump_file, \", cgraph_uid=%d)%s\\n\\n\", node->uid,\n                node->frequency == NODE_FREQUENCY_HOT\n                ? \" (hot)\"\n                : node->frequency == NODE_FREQUENCY_UNLIKELY_EXECUTED\n@@ -3046,6 +3048,5 @@ dump_function_header (FILE *dump_file, tree fdecl)\n                : \"\");\n     }\n   else\n-    fprintf (dump_file, \"\\n;; Function %s (%s, funcdef_no=%d, decl_uid = %d)\",\n-             dname, aname, fun->funcdef_no, DECL_UID(fdecl));\n+    fprintf (dump_file, \")\\n\\n\");\n }"}, {"sha": "0de18ca7a144232fb10ed624d31a045d6928aff4", "filename": "gcc/tree-pretty-print.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ftree-pretty-print.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6d8402ac13cd591026591be13329c4eda24ce639/gcc%2Ftree-pretty-print.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-pretty-print.h?ref=6d8402ac13cd591026591be13329c4eda24ce639", "patch": "@@ -50,7 +50,7 @@ extern void debug_generic_expr (tree);\n extern void debug_generic_stmt (tree);\n extern void debug_tree_chain (tree);\n extern void percent_K_format (text_info *);\n-extern void dump_function_header (FILE *, tree);\n+extern void dump_function_header (FILE *, tree, int);\n \n /* In toplev.c  */\n extern bool default_tree_printer (pretty_printer *, text_info *, const char *,"}]}