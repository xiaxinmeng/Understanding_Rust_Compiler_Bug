{"sha": "adb04511e38c5ce6929a7e539c6d014464b5aa03", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWRiMDQ1MTFlMzhjNWNlNjkyOWE3ZTUzOWM2ZDAxNDQ2NGI1YWEwMw==", "commit": {"author": {"name": "David Daney", "email": "ddaney@avtrex.com", "date": "2007-06-02T04:27:40Z"}, "committer": {"name": "David Daney", "email": "daney@gcc.gnu.org", "date": "2007-06-02T04:27:40Z"}, "message": "mips.c (mips_output_mi_thunk): Only load gp if not LOADGP_ABSOLUTE and not binds_local_p.\n\n\t* config/mips/mips.c (mips_output_mi_thunk): Only load gp if not\n\tLOADGP_ABSOLUTE and not binds_local_p.\n\nFrom-SVN: r125276", "tree": {"sha": "1f5af0bdd412240edf4f951e9256a810d731b589", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1f5af0bdd412240edf4f951e9256a810d731b589"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/adb04511e38c5ce6929a7e539c6d014464b5aa03", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb04511e38c5ce6929a7e539c6d014464b5aa03", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adb04511e38c5ce6929a7e539c6d014464b5aa03", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb04511e38c5ce6929a7e539c6d014464b5aa03/comments", "author": null, "committer": null, "parents": [{"sha": "45d5f86c4138fda531097de5bf658c396038c9bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/45d5f86c4138fda531097de5bf658c396038c9bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/45d5f86c4138fda531097de5bf658c396038c9bc"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "904fe7d7a34aadb397084fea774c6e89bcb2ac41", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adb04511e38c5ce6929a7e539c6d014464b5aa03/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adb04511e38c5ce6929a7e539c6d014464b5aa03/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=adb04511e38c5ce6929a7e539c6d014464b5aa03", "patch": "@@ -1,3 +1,8 @@\n+2007-06-01  David Daney  <ddaney@avtrex.com>\n+\n+\t* config/mips/mips.c (mips_output_mi_thunk): Only load gp if not\n+\tLOADGP_ABSOLUTE and not binds_local_p.\n+\t\n 2007-06-01  Geoffrey Keating  <geoffk@apple.com>\n \n \t* config/darwin.h (LINK_SPEC): Pass -fpie through to the linker."}, {"sha": "0e860b6d3cc7ebfd1e061734ba420a74a44ad096", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/adb04511e38c5ce6929a7e539c6d014464b5aa03/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/adb04511e38c5ce6929a7e539c6d014464b5aa03/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=adb04511e38c5ce6929a7e539c6d014464b5aa03", "patch": "@@ -7335,8 +7335,12 @@ mips_output_mi_thunk (FILE *file, tree thunk_fndecl ATTRIBUTE_UNUSED,\n       = REGNO (pic_offset_table_rtx)\n       = TARGET_CALL_SAVED_GP ? 15 : GLOBAL_POINTER_REGNUM;\n \n-  /* Set up the global pointer for n32 or n64 abicalls.  */\n-  mips_emit_loadgp ();\n+  /* Set up the global pointer for n32 or n64 abicalls.  If\n+     LOADGP_ABSOLUTE then the thunk does not use the gp and there is\n+     no need to load it.*/\n+  if (mips_current_loadgp_style () != LOADGP_ABSOLUTE\n+      || !targetm.binds_local_p (function))\n+    mips_emit_loadgp ();\n \n   /* We need two temporary registers in some cases.  */\n   temp1 = gen_rtx_REG (Pmode, 2);"}]}