{"sha": "d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDllOTUzMmJiM2JmNWRiNGNkNmFmZDQ5ZDM0M2VkZTViMjdjM2M5Zg==", "commit": {"author": {"name": "Indu Bhagat", "email": "indu.bhagat@oracle.com", "date": "2021-07-06T23:11:47Z"}, "committer": {"name": "Indu Bhagat", "email": "indu.bhagat@oracle.com", "date": "2021-07-06T23:13:29Z"}, "message": "BTF testsuite: Remove explicit check on btm_type\n\nThe value of btm_type is the BTF type ID of the referred type.  The order in\nwhich the BTF types are added can change across platforms and also as the code\nevolves, hence changing the BTF type ID. As there is no direct and portable\nmethod of testing that a BTF type refers to another BTF type of a specific\nkind, remove the explicit check on btm_type.\n\nThis patch adjusts the testcase without affecting the test coverage as other\ntestcases already have similar constructs. It also fixes a subset of failures\nas seen on Darwin.\n\n2021-07-06  Indu Bhagat  <indu.bhagat@oracle.com>\n\ngcc/testsuite/ChangeLog:\n\n\tPR debug/101283\n\t* gcc.dg/debug/btf/btf-bitfields-3.c: Remove the check on btm_type.", "tree": {"sha": "8bb1c1718bfd52223faff60c3cacb93f8248abf8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8bb1c1718bfd52223faff60c3cacb93f8248abf8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f/comments", "author": {"login": "ibhagatgnu", "id": 51812649, "node_id": "MDQ6VXNlcjUxODEyNjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/51812649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibhagatgnu", "html_url": "https://github.com/ibhagatgnu", "followers_url": "https://api.github.com/users/ibhagatgnu/followers", "following_url": "https://api.github.com/users/ibhagatgnu/following{/other_user}", "gists_url": "https://api.github.com/users/ibhagatgnu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibhagatgnu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibhagatgnu/subscriptions", "organizations_url": "https://api.github.com/users/ibhagatgnu/orgs", "repos_url": "https://api.github.com/users/ibhagatgnu/repos", "events_url": "https://api.github.com/users/ibhagatgnu/events{/privacy}", "received_events_url": "https://api.github.com/users/ibhagatgnu/received_events", "type": "User", "site_admin": false}, "committer": {"login": "ibhagatgnu", "id": 51812649, "node_id": "MDQ6VXNlcjUxODEyNjQ5", "avatar_url": "https://avatars.githubusercontent.com/u/51812649?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibhagatgnu", "html_url": "https://github.com/ibhagatgnu", "followers_url": "https://api.github.com/users/ibhagatgnu/followers", "following_url": "https://api.github.com/users/ibhagatgnu/following{/other_user}", "gists_url": "https://api.github.com/users/ibhagatgnu/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibhagatgnu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibhagatgnu/subscriptions", "organizations_url": "https://api.github.com/users/ibhagatgnu/orgs", "repos_url": "https://api.github.com/users/ibhagatgnu/repos", "events_url": "https://api.github.com/users/ibhagatgnu/events{/privacy}", "received_events_url": "https://api.github.com/users/ibhagatgnu/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "97bcacfb5ac49afa4e305489dd110cc446451549", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97bcacfb5ac49afa4e305489dd110cc446451549", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97bcacfb5ac49afa4e305489dd110cc446451549"}], "stats": {"total": 9, "additions": 2, "deletions": 7}, "files": [{"sha": "0e00f2b81fb7786c3f15b82356ed958d5928f2d1", "filename": "gcc/testsuite/gcc.dg/debug/btf/btf-bitfields-3.c", "status": "modified", "additions": 2, "deletions": 7, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fbtf%2Fbtf-bitfields-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fbtf%2Fbtf-bitfields-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fbtf%2Fbtf-bitfields-3.c?ref=d9e9532bb3bf5db4cd6afd49d343ede5b27c3c9f", "patch": "@@ -11,23 +11,19 @@\n      [2] int 'unsigned int' size=4 offset=0 bits=32\n      [3] struct 'bitt' size=4\n          member 'f' type=1 bitfield_size=2 bit_offset=0\n-         member 'data' type=2 bitfield_size=14 bit_offset=2\n    */\n \n /* { dg-do compile } */\n /* { dg-options \"-O0 -gbtf -dA -fno-short-enums\" } */\n \n /* Enum with 4 members.  */\n /* { dg-final { scan-assembler-times \"\\[\\t \\]0x6000004\\[\\t \\]+\\[^\\n\\]*btt_info\" 1 } } */\n-/* Struct with bitfield members, and 2 members.  */\n-/* { dg-final { scan-assembler-times \"\\[\\t \\]0x84000002\\[\\t \\]+\\[^\\n\\]*btt_info\" 1 } } */\n+/* Struct with 1 bitfield member.  */\n+/* { dg-final { scan-assembler-times \"\\[\\t \\]0x84000001\\[\\t \\]+\\[^\\n\\]*btt_info\" 1 } } */\n \n /* Bitfield \"f\" points to type ID 1.  */\n /* { dg-final { scan-assembler-times \"\\[\\t \\]0x1\\[\\t \\]+\\[^\\n\\]*btm_type\" 1 } } */\n \n-/* Bitfield \"data\" points to type ID 2.  */\n-/* { dg-final { scan-assembler-times \"\\[\\t \\]0x2\\[\\t \\]+\\[^\\n\\]*btm_type\" 1 } } */\n-\n enum foo\n {\n   BAR = 0,\n@@ -39,5 +35,4 @@ enum foo\n struct bitt\n {\n   enum foo f : 2;\n-  unsigned data : 14;\n } bitty;"}]}