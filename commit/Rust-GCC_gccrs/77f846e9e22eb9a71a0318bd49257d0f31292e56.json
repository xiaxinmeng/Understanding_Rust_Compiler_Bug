{"sha": "77f846e9e22eb9a71a0318bd49257d0f31292e56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdmODQ2ZTllMjJlYjlhNzFhMDMxOGJkNDkyNTdkMGYzMTI5MmU1Ng==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-02-20T17:15:53Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-02-20T17:15:53Z"}, "message": "re PR target/47822 (Multiple test suite failures due to revision 170321)\n\n2011-02-20  Richard Guenther  <rguenther@suse.de>\n\n\tPR lto/47822\n\t* tree.c (free_lang_data_in_decl): Clean builtins from\n\tthe TU decl BLOCK_VARS.\n\nFrom-SVN: r170339", "tree": {"sha": "7292429daee4c43eb678339ca47cb4c5fd2dd891", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7292429daee4c43eb678339ca47cb4c5fd2dd891"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77f846e9e22eb9a71a0318bd49257d0f31292e56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77f846e9e22eb9a71a0318bd49257d0f31292e56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77f846e9e22eb9a71a0318bd49257d0f31292e56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77f846e9e22eb9a71a0318bd49257d0f31292e56/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6e549dd2e521e4deab694808be9d349aea892418", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e549dd2e521e4deab694808be9d349aea892418", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e549dd2e521e4deab694808be9d349aea892418"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "cfed6bdff2215b820e5b9ab4596a2e3384505c1c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77f846e9e22eb9a71a0318bd49257d0f31292e56/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77f846e9e22eb9a71a0318bd49257d0f31292e56/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=77f846e9e22eb9a71a0318bd49257d0f31292e56", "patch": "@@ -1,3 +1,9 @@\n+2011-02-20  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR lto/47822\n+\t* tree.c (free_lang_data_in_decl): Clean builtins from\n+\tthe TU decl BLOCK_VARS.\n+ \n 2011-02-19  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/47620"}, {"sha": "c947072b215ccd80ff86c1a646277d438b2712d0", "filename": "gcc/tree.c", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77f846e9e22eb9a71a0318bd49257d0f31292e56/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77f846e9e22eb9a71a0318bd49257d0f31292e56/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=77f846e9e22eb9a71a0318bd49257d0f31292e56", "patch": "@@ -4577,6 +4577,25 @@ free_lang_data_in_decl (tree decl)\n     }\n   else if (TREE_CODE (decl) == TYPE_DECL)\n     DECL_INITIAL (decl) = NULL_TREE;\n+  else if (TREE_CODE (decl) == TRANSLATION_UNIT_DECL\n+           && DECL_INITIAL (decl)\n+           && TREE_CODE (DECL_INITIAL (decl)) == BLOCK)\n+    {\n+      /* Strip builtins from the translation-unit BLOCK.  We still have\n+\t targets without builtin_decl support and also builtins are\n+\t shared nodes and thus we can't use TREE_CHAIN in multiple\n+\t lists.  */\n+      tree *nextp = &BLOCK_VARS (DECL_INITIAL (decl));\n+      while (*nextp)\n+        {\n+          tree var = *nextp;\n+          if (TREE_CODE (var) == FUNCTION_DECL\n+              && DECL_BUILT_IN (var))\n+\t    *nextp = TREE_CHAIN (var);\n+\t  else\n+\t    nextp = &TREE_CHAIN (var);\n+        }\n+    }\n }\n \n "}]}