{"sha": "7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2RkMWFiODQ5N2JkYjE0ZTMwYmNlOGQ5NDIxNGJlN2FmYzZlOWE5MA==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-05-06T08:29:29Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-05-06T08:29:29Z"}, "message": "[multiple changes]\n\n2009-05-06  Thomas Quinot  <quinot@adacore.com>\n\n\t* sem_ch3.adb (Access_Type_Declaration): An access type whose\n\tdesignated type is a limited view from a limited with clause (flagged\n\tFrom_With_Type) is not itself such a limited view.\n\n2009-05-06  Emmanuel Briot  <briot@adacore.com>\n\n\t* prj-nmsc.adb: Remove unused variable.\n\n\t* clean.adb, gnatcmd.adb, makeutl.ads, prj-pars.adb, prj-pars.ads,\n\tprj-proc.ads, prj.ads, switch-m.adb (Subdirs_Option): Moved to\n\tmakeutl.ads, since not all users of prj.ads need this.\n\nFrom-SVN: r147152", "tree": {"sha": "92e562ce450f003b116a2eac024ad66f8c5d5ce8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/92e562ce450f003b116a2eac024ad66f8c5d5ce8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/comments", "author": null, "committer": null, "parents": [{"sha": "28541488914f27ad9763a02c2cc786cf786399d2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28541488914f27ad9763a02c2cc786cf786399d2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28541488914f27ad9763a02c2cc786cf786399d2"}], "stats": {"total": 172, "additions": 91, "deletions": 81}, "files": [{"sha": "fa0b62579b803f5cb8d2dd8812d264ac97452adf", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -1,3 +1,17 @@\n+2009-05-06  Thomas Quinot  <quinot@adacore.com>\n+\n+\t* sem_ch3.adb (Access_Type_Declaration): An access type whose\n+\tdesignated type is a limited view from a limited with clause (flagged\n+\tFrom_With_Type) is not itself such a limited view.\n+\n+2009-05-06  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* prj-nmsc.adb: Remove unused variable.\n+\n+\t* clean.adb, gnatcmd.adb, makeutl.ads, prj-pars.adb, prj-pars.ads,\n+\tprj-proc.ads, prj.ads, switch-m.adb (Subdirs_Option): Moved to\n+\tmakeutl.ads, since not all users of prj.ads need this.\n+\n 2009-05-06  Javier Miranda  <miranda@adacore.com>\n \n \t* exp_aggr.adb (Build_Record_Aggr_Code): Add implicit call to the C++"}, {"sha": "2c08d49daafaf31b84001a1010d3dee65b272745", "filename": "gcc/ada/clean.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fclean.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fclean.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fclean.adb?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -25,7 +25,7 @@\n \n with ALI;      use ALI;\n with Csets;\n-with Makeutl;\n+with Makeutl;  use Makeutl;\n with MLib.Tgt; use MLib.Tgt;\n with Namet;    use Namet;\n with Opt;      use Opt;"}, {"sha": "8194a42ed8d35840626c981abc582dec17651a10", "filename": "gcc/ada/gnatcmd.adb", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fgnatcmd.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fgnatcmd.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnatcmd.adb?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -987,7 +987,7 @@ procedure GNATCmd is\n                         Last_Switches.Table (Index).all);\n                   end loop;\n \n-                  --  One switch for the standard GNAT library dir.\n+                  --  One switch for the standard GNAT library dir\n \n                   Last_Switches.Increment_Last;\n                   Last_Switches.Table\n@@ -1660,15 +1660,17 @@ begin\n \n                   --  --subdirs=... Specify Subdirs\n \n-                  if Argv'Length > Subdirs_Option'Length and then\n+                  if Argv'Length > Makeutl.Subdirs_Option'Length and then\n                     Argv\n-                      (Argv'First .. Argv'First + Subdirs_Option'Length - 1) =\n-                      Subdirs_Option\n+                     (Argv'First ..\n+                      Argv'First + Makeutl.Subdirs_Option'Length - 1) =\n+                        Makeutl.Subdirs_Option\n                   then\n                      Subdirs :=\n                        new String'\n                          (Argv\n-                            (Argv'First + Subdirs_Option'Length .. Argv'Last));\n+                           (Argv'First + Makeutl.Subdirs_Option'Length ..\n+                            Argv'Last));\n \n                      Remove_Switch (Arg_Num);\n "}, {"sha": "c0dc9f162921c2b449ec056c967118ee16dc3c2c", "filename": "gcc/ada/makeutl.ads", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fmakeutl.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fmakeutl.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmakeutl.ads?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -40,6 +40,10 @@ package Makeutl is\n    Project_Tree : constant Project_Tree_Ref := new Project_Tree_Data;\n    --  The project tree\n \n+   Subdirs_Option : constant String := \"--subdirs=\";\n+   --  Switch used to indicate that the real directories (object, exec,\n+   --  library, ...) are subdirectories of those in the project file.\n+\n    procedure Add\n      (Option : String_Access;\n       To     : in out String_List_Access;"}, {"sha": "bb3ce48b87bc9b7f738b15532757bdc71c48b602", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 1, "deletions": 7, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -410,7 +410,6 @@ package body Prj.Nmsc is\n       File_Name             : File_Name_Type;\n       Alternate_Languages   : out Language_List;\n       Language              : out Language_Ptr;\n-      Language_Name         : out Name_Id;\n       Display_Language_Name : out Name_Id;\n       Unit                  : out Name_Id;\n       Lang_Kind             : out Language_Kind;\n@@ -7270,7 +7269,6 @@ package body Prj.Nmsc is\n       File_Name             : File_Name_Type;\n       Alternate_Languages   : out Language_List;\n       Language              : out Language_Ptr;\n-      Language_Name         : out Name_Id;\n       Display_Language_Name : out Name_Id;\n       Unit                  : out Name_Id;\n       Lang_Kind             : out Language_Kind;\n@@ -7346,12 +7344,10 @@ package body Prj.Nmsc is\n \n       Tmp_Lang := Project.Languages;\n       while Tmp_Lang /= No_Language_Index loop\n-         Language_Name := Tmp_Lang.Name;\n-\n          if Current_Verbosity = High then\n             Write_Line\n               (\"     Testing language \"\n-               & Get_Name_String (Language_Name)\n+               & Get_Name_String (Tmp_Lang.Name)\n                & \" Header_File=\" & Header_File'Img);\n          end if;\n \n@@ -7424,7 +7420,6 @@ package body Prj.Nmsc is\n       Src_Ind               : Source_File_Index;\n       Unit                  : Name_Id;\n       Source_To_Replace     : Source_Id := No_Source;\n-      Language_Name         : Name_Id;\n       Display_Language_Name : Name_Id;\n       Lang_Kind             : Language_Kind;\n       Kind                  : Source_Kind := Spec;\n@@ -7489,7 +7484,6 @@ package body Prj.Nmsc is\n             File_Name             => File_Name,\n             Alternate_Languages   => Alternate_Languages,\n             Language              => Language,\n-            Language_Name         => Language_Name,\n             Display_Language_Name => Display_Language_Name,\n             Unit                  => Unit,\n             Lang_Kind             => Lang_Kind,"}, {"sha": "92010bf7cfac4322934590e473278dfed989ee7d", "filename": "gcc/ada/prj-pars.adb", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-pars.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-pars.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-pars.adb?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -45,17 +45,18 @@ package body Prj.Pars is\n       Project_File_Name : String;\n       Packages_To_Check : String_List_Access := All_Packages;\n       When_No_Sources   : Error_Warning := Error;\n+      Report_Error      : Put_Line_Access := null;\n       Reset_Tree        : Boolean := True;\n-      Is_Config_File    : Boolean)\n+      Is_Config_File    : Boolean := False)\n    is\n-      Project_Node_Tree : constant Project_Node_Tree_Ref :=\n-                            new Project_Node_Tree_Data;\n       Project_Node      : Project_Node_Id := Empty_Node;\n       The_Project       : Project_Id      := No_Project;\n       Success           : Boolean         := True;\n       Current_Dir       : constant String := Get_Current_Dir;\n+      Project_Node_Tree : Prj.Tree.Project_Node_Tree_Ref;\n \n    begin\n+      Project_Node_Tree := new Project_Node_Tree_Data;\n       Prj.Tree.Initialize (Project_Node_Tree);\n \n       --  Parse the main project file into a tree\n@@ -72,18 +73,19 @@ package body Prj.Pars is\n \n       --  If there were no error, process the tree\n \n-      if Present (Project_Node) then\n+      if Project_Node /= Empty_Node then\n          Prj.Proc.Process\n            (In_Tree                => In_Tree,\n             Project                => The_Project,\n             Success                => Success,\n             From_Project_Node      => Project_Node,\n             From_Project_Node_Tree => Project_Node_Tree,\n-            Report_Error           => null,\n-            When_No_Sources        => When_No_Sources,\n+            Report_Error           => Report_Error,\n             Reset_Tree             => Reset_Tree,\n+            When_No_Sources        => When_No_Sources,\n             Current_Dir            => Current_Dir,\n             Is_Config_File         => Is_Config_File);\n+\n          Prj.Err.Finalize;\n \n          if not Success then\n@@ -93,6 +95,8 @@ package body Prj.Pars is\n \n       Project := The_Project;\n \n+      --  ??? Should free the project_node_tree, no longer useful\n+\n    exception\n       when X : others =>\n "}, {"sha": "2c439ad115f81de49bd786e1377f5a7e693765dc", "filename": "gcc/ada/prj-pars.ads", "status": "modified", "additions": 19, "deletions": 11, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-pars.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-pars.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-pars.ads?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -23,7 +23,7 @@\n --                                                                          --\n ------------------------------------------------------------------------------\n \n---  Implements the parsing of project files\n+--  General wrapper for the parsing of project files\n \n package Prj.Pars is\n \n@@ -36,21 +36,29 @@ package Prj.Pars is\n       Project_File_Name : String;\n       Packages_To_Check : String_List_Access := All_Packages;\n       When_No_Sources   : Error_Warning := Error;\n+      Report_Error      : Prj.Put_Line_Access := null;\n       Reset_Tree        : Boolean := True;\n-      Is_Config_File    : Boolean);\n-   --  Parse a project files and all its imported project files, in the\n-   --  project tree In_Tree.\n+      Is_Config_File    : Boolean := False);\n+   --  Parse and process a project files and all its imported project files, in\n+   --  the project tree In_Tree.\n+   --  All the project files are parsed (through Prj.Tree) to create a tree in\n+   --  memory. That tree is then processed (through Prj.Proc) to create a\n+   --  expanded representation of the tree based on the current scenario\n+   --  variables. This function is only a convenient wrapper over other\n+   --  services provided in the Prj.* package hierarchy.\n    --\n-   --  If parsing is successful, Project_Id is the project ID\n-   --  of the main project file; otherwise, Project_Id is set\n-   --  to No_Project.\n+   --  If parsing is successful, Project is the project ID of the root project\n+   --  file; otherwise, Project_Id is set to No_Project. Project_Node_Tree is\n+   --  set to the tree (unprocessed) representation of the project file. This\n+   --  tree is permanently correct, whereas Project will need to be recomputed\n+   --  if the scenario variables change.\n    --\n    --  Packages_To_Check indicates the packages where any unknown attribute\n-   --  produces an error. For other packages, an unknown attribute produces\n-   --  a warning.\n+   --  produces an error. For other packages, an unknown attribute produces a\n+   --  warning.\n    --\n-   --  When_No_Sources indicates what should be done when no sources\n-   --  are found in a project for a specified or implied language.\n+   --  When_No_Sources indicates what should be done when no sources are found\n+   --  in a project for a specified or implied language.\n    --\n    --  When Reset_Tree is True, all the project data are removed from the\n    --  project table before processing."}, {"sha": "e15c8efd283e4de42e8a291b99a141cc9e3f4b42", "filename": "gcc/ada/prj-proc.ads", "status": "modified", "additions": 33, "deletions": 26, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-proc.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj-proc.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-proc.ads?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 S p e c                                  --\n --                                                                          --\n---          Copyright (C) 2001-2007, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -31,57 +31,64 @@ with Prj.Tree;  use Prj.Tree;\n \n package Prj.Proc is\n \n-   procedure Process\n+   procedure Process_Project_Tree_Phase_1\n      (In_Tree                : Project_Tree_Ref;\n       Project                : out Project_Id;\n       Success                : out Boolean;\n       From_Project_Node      : Project_Node_Id;\n       From_Project_Node_Tree : Project_Node_Tree_Ref;\n       Report_Error           : Put_Line_Access;\n-      When_No_Sources        : Error_Warning := Error;\n-      Reset_Tree             : Boolean := True;\n-      Current_Dir            : String := \"\";\n-      Is_Config_File         : Boolean);\n-   --  Process a project file tree into project file data structures. If\n-   --  Report_Error is null, use the error reporting mechanism. Otherwise,\n-   --  report errors using Report_Error.\n+      Reset_Tree             : Boolean := True);\n+   --  Process a project tree (ie the direct resulting of parsing a .gpr file)\n+   --  based on the current scenario variables.\n    --\n-   --  Current_Dir is for optimization purposes, avoiding extra system calls.\n+   --  The result of this phase_1 is a partial project tree (Project) where\n+   --  only a few fields have been initialized (in particular the list of\n+   --  languages). These are the fields that are necessary to run gprconfig if\n+   --  needed to automatically generate a configuration file. This first phase\n+   --  of the processing does not require a configuration file.\n+   --\n+   --  If Report_Error is null, use the error reporting mechanism. Otherwise,\n+   --  report errors using Report_Error.\n    --\n    --  When_No_Sources indicates what should be done when no sources are found\n    --  in a project for a specified or implied language.\n    --\n    --  When Reset_Tree is True, all the project data are removed from the\n    --  project table before processing.\n-   --\n-   --  Process is a bit of a junk name, how about Process_Project_Tree???\n-   --\n-   --  The two procedures that follow are implementing procedure Process in\n-   --  two successive phases. They are used by gprbuild/gprclean to add the\n-   --  configuration attributes between the two phases.\n-   --\n-   --  Is_Config_File should be true if Project is a config file (.cgpr)\n \n-   procedure Process_Project_Tree_Phase_1\n+   procedure Process_Project_Tree_Phase_2\n      (In_Tree                : Project_Tree_Ref;\n-      Project                : out Project_Id;\n+      Project                : Project_Id;\n       Success                : out Boolean;\n       From_Project_Node      : Project_Node_Id;\n       From_Project_Node_Tree : Project_Node_Tree_Ref;\n       Report_Error           : Put_Line_Access;\n-      Reset_Tree             : Boolean := True);\n-   --  See documentation of parameters in procedure Process above\n+      When_No_Sources        : Error_Warning := Error;\n+      Current_Dir            : String;\n+      Is_Config_File         : Boolean);\n+   --  Perform the second phase of the processing, filling the rest of the\n+   --  project with the information extracted from the project tree. This phase\n+   --  requires that the configuration file has already been parsed (in fact\n+   --  we currently assume that the contents of the configuration file has\n+   --  been included in Project through Confgpr.Apply_Config_File). The\n+   --  parameters are the same as for phase_1, with the addition of:\n+   --\n+   --  Current_Dir is for optimization purposes, avoiding extra system calls.\n+   --\n+   --  Is_Config_File should be true if Project is a config file (.cgpr)\n \n-   procedure Process_Project_Tree_Phase_2\n+   procedure Process\n      (In_Tree                : Project_Tree_Ref;\n-      Project                : Project_Id;\n+      Project                : out Project_Id;\n       Success                : out Boolean;\n       From_Project_Node      : Project_Node_Id;\n       From_Project_Node_Tree : Project_Node_Tree_Ref;\n       Report_Error           : Put_Line_Access;\n       When_No_Sources        : Error_Warning := Error;\n-      Current_Dir            : String;\n+      Reset_Tree             : Boolean := True;\n+      Current_Dir            : String := \"\";\n       Is_Config_File         : Boolean);\n-   --  See documentation of parameters in procedure Process above\n+   --  Performs the two phases of the processing\n \n end Prj.Proc;"}, {"sha": "09b65f84376d8026b8dcbea3d33f68924916a84b", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -44,10 +44,6 @@ package Prj is\n    --  Name used to replace others as an index of an associative array\n    --  attribute in situations where this is allowed.\n \n-   Subdirs_Option : constant String := \"--subdirs=\";\n-   --  Switch used to indicate that the real directories (object, exec,\n-   --  library, ...) are subdirectories of those in the project file.\n-\n    Subdirs : String_Ptr := null;\n    --  The value after the equal sign in switch --subdirs=...\n    --  Contains the relative subdirectory."}, {"sha": "cb66334fc4505f108c92fa353b936d4a15d963a7", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 0, "deletions": 20, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -1276,10 +1276,6 @@ package body Sem_Ch3 is\n    procedure Access_Type_Declaration (T : Entity_Id; Def : Node_Id) is\n       S : constant Node_Id := Subtype_Indication (Def);\n       P : constant Node_Id := Parent (Def);\n-\n-      Desig : Entity_Id;\n-      --  Designated type\n-\n    begin\n       --  Check for permissible use of incomplete type\n \n@@ -1331,22 +1327,6 @@ package body Sem_Ch3 is\n          Init_Size_Align (T);\n       end if;\n \n-      Desig := Designated_Type (T);\n-\n-      --  If designated type is an imported tagged type, indicate that the\n-      --  access type is also imported, and therefore restricted in its use.\n-      --  The access type may already be imported, so keep setting otherwise.\n-\n-      --  Ada 2005 (AI-50217): If the non-limited view of the designated type\n-      --  is available, use it as the designated type of the access type, so\n-      --  that the back-end gets a usable entity.\n-\n-      if From_With_Type (Desig)\n-        and then Ekind (Desig) /= E_Access_Type\n-      then\n-         Set_From_With_Type (T);\n-      end if;\n-\n       --  Note that Has_Task is always false, since the access type itself\n       --  is not a task type. See Einfo for more description on this point.\n       --  Exactly the same consideration applies to Has_Controlled_Component."}, {"sha": "d7ed40da0d2888b65ef799deaeb62d9ea82c0af6", "filename": "gcc/ada/switch-m.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fswitch-m.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7dd1ab8497bdb14e30bce8d94214be7afc6e9a90/gcc%2Fada%2Fswitch-m.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fswitch-m.adb?ref=7dd1ab8497bdb14e30bce8d94214be7afc6e9a90", "patch": "@@ -6,7 +6,7 @@\n --                                                                          --\n --                                 B o d y                                  --\n --                                                                          --\n---          Copyright (C) 2001-2008, Free Software Foundation, Inc.         --\n+--          Copyright (C) 2001-2009, Free Software Foundation, Inc.         --\n --                                                                          --\n -- GNAT is free software;  you can  redistribute it  and/or modify it under --\n -- terms of the  GNU General Public License as published  by the Free Soft- --\n@@ -24,6 +24,7 @@\n ------------------------------------------------------------------------------\n \n with Debug;    use Debug;\n+with Makeutl;  use Makeutl;\n with Osint;    use Osint;\n with Opt;      use Opt;\n with Prj;      use Prj;"}]}