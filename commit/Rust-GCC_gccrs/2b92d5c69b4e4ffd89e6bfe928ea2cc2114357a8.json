{"sha": "2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmI5MmQ1YzY5YjRlNGZmZDg5ZTZiZmU5MjhlYTJjYzIxMTQzNTdhOA==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-06-24T16:54:22Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-06-24T16:54:22Z"}, "message": "compiler: use builtin memcmp directly\n    \n    Instead of going through a C function __go_memcmp, we can just\n    use __builtin_memcmp directly. This allows more optimizations in\n    the compiler backend.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/183537\n\nFrom-SVN: r272620", "tree": {"sha": "318ef6fa71679125858dacabc9a1992333294ccc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/318ef6fa71679125858dacabc9a1992333294ccc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/comments", "author": null, "committer": null, "parents": [{"sha": "1e3d475ea16e89332e07651d61b60b408e0a0932", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e3d475ea16e89332e07651d61b60b408e0a0932", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e3d475ea16e89332e07651d61b60b408e0a0932"}], "stats": {"total": 29, "additions": 6, "deletions": 23}, "files": [{"sha": "89d401b6a3edd17ff00d97cf3b54bd590c608d54", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "patch": "@@ -1,4 +1,4 @@\n-1232eef628227ef855c5fa6d94b31778b2e74a85\n+338e4baf88a4ae676205dff601dbef2d31b19d2d\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "050da32c02f44be7099922588c6b5b6057cd64d7", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "patch": "@@ -6199,7 +6199,8 @@ Binary_expression::lower_compare_to_memcmp(Gogo*, Statement_inserter* inserter)\n \t\t\t\t\t       TYPE_INFO_SIZE);\n \n   Expression* call = Runtime::make_call(Runtime::MEMCMP, loc, 3, a1, a2, len);\n-  Expression* zero = Expression::make_integer_ul(0, NULL, loc);\n+  Type* int32_type = Type::lookup_integer_type(\"int32\");\n+  Expression* zero = Expression::make_integer_ul(0, int32_type, loc);\n   return Expression::make_binary(this->op_, call, zero, loc);\n }\n "}, {"sha": "7b66b166b77035e823900b29b04f0d02b16e095f", "filename": "gcc/go/gofrontend/runtime.def", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/gcc%2Fgo%2Fgofrontend%2Fruntime.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/gcc%2Fgo%2Fgofrontend%2Fruntime.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fruntime.def?ref=2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "patch": "@@ -29,7 +29,7 @@\n // result types.\n \n // The standard C memcmp function, used for struct comparisons.\n-DEF_GO_RUNTIME(MEMCMP, \"__go_memcmp\", P3(POINTER, POINTER, UINTPTR), R1(INT))\n+DEF_GO_RUNTIME(MEMCMP, \"__builtin_memcmp\", P3(POINTER, POINTER, UINTPTR), R1(INT32))\n \n // Decode a non-ASCII rune from a string.\n DEF_GO_RUNTIME(DECODERUNE, \"runtime.decoderune\", P2(STRING, INT),"}, {"sha": "88f885b6675127614a67df8312d79619d803dde0", "filename": "libgo/Makefile.am", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "patch": "@@ -459,7 +459,6 @@ runtime_files = \\\n \truntime/go-fieldtrack.c \\\n \truntime/go-matherr.c \\\n \truntime/go-memclr.c \\\n-\truntime/go-memcmp.c \\\n \truntime/go-memequal.c \\\n \truntime/go-nanotime.c \\\n \truntime/go-now.c \\"}, {"sha": "f53ca3f4b12810cf1aa46eefc1f24d8e802067e0", "filename": "libgo/Makefile.in", "status": "modified", "additions": 2, "deletions": 6, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=2b92d5c69b4e4ffd89e6bfe928ea2cc2114357a8", "patch": "@@ -244,8 +244,8 @@ am__objects_3 = runtime/aeshash.lo runtime/go-assert.lo \\\n \truntime/go-cgo.lo runtime/go-construct-map.lo \\\n \truntime/go-ffi.lo runtime/go-fieldtrack.lo \\\n \truntime/go-matherr.lo runtime/go-memclr.lo \\\n-\truntime/go-memcmp.lo runtime/go-memequal.lo \\\n-\truntime/go-nanotime.lo runtime/go-now.lo runtime/go-nosys.lo \\\n+\truntime/go-memequal.lo runtime/go-nanotime.lo \\\n+\truntime/go-now.lo runtime/go-nosys.lo \\\n \truntime/go-reflect-call.lo runtime/go-runtime-error.lo \\\n \truntime/go-setenv.lo runtime/go-signal.lo \\\n \truntime/go-unsafe-pointer.lo runtime/go-unsetenv.lo \\\n@@ -892,7 +892,6 @@ runtime_files = \\\n \truntime/go-fieldtrack.c \\\n \truntime/go-matherr.c \\\n \truntime/go-memclr.c \\\n-\truntime/go-memcmp.c \\\n \truntime/go-memequal.c \\\n \truntime/go-nanotime.c \\\n \truntime/go-now.c \\\n@@ -1343,8 +1342,6 @@ runtime/go-matherr.lo: runtime/$(am__dirstamp) \\\n \truntime/$(DEPDIR)/$(am__dirstamp)\n runtime/go-memclr.lo: runtime/$(am__dirstamp) \\\n \truntime/$(DEPDIR)/$(am__dirstamp)\n-runtime/go-memcmp.lo: runtime/$(am__dirstamp) \\\n-\truntime/$(DEPDIR)/$(am__dirstamp)\n runtime/go-memequal.lo: runtime/$(am__dirstamp) \\\n \truntime/$(DEPDIR)/$(am__dirstamp)\n runtime/go-nanotime.lo: runtime/$(am__dirstamp) \\\n@@ -1436,7 +1433,6 @@ distclean-compile:\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-fieldtrack.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-matherr.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-memclr.Plo@am__quote@\n-@AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-memcmp.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-memequal.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-nanotime.Plo@am__quote@\n @AMDEP_TRUE@@am__include@ @am__quote@runtime/$(DEPDIR)/go-nosys.Plo@am__quote@"}, {"sha": "78a356b08d0f1262a8695434886a8a5a665a7748", "filename": "libgo/runtime/go-memcmp.c", "status": "removed", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e3d475ea16e89332e07651d61b60b408e0a0932/libgo%2Fruntime%2Fgo-memcmp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e3d475ea16e89332e07651d61b60b408e0a0932/libgo%2Fruntime%2Fgo-memcmp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-memcmp.c?ref=1e3d475ea16e89332e07651d61b60b408e0a0932", "patch": "@@ -1,13 +0,0 @@\n-/* go-memcmp.c -- the go memory comparison function.\n-\n-   Copyright 2012 The Go Authors. All rights reserved.\n-   Use of this source code is governed by a BSD-style\n-   license that can be found in the LICENSE file.  */\n-\n-#include \"runtime.h\"\n-\n-intgo\n-__go_memcmp (const void *p1, const void *p2, uintptr len)\n-{\n-  return __builtin_memcmp (p1, p2, len);\n-}"}]}