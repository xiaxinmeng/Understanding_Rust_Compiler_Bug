{"sha": "322dce453ac05ed5da517eb09acef12196f87ecc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIyZGNlNDUzYWMwNWVkNWRhNTE3ZWIwOWFjZWYxMjE5NmY4N2VjYw==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-09T16:41:47Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-05-09T16:41:47Z"}, "message": "(call_internal1, call_value_internal1): Use call_insn_operand.\n\n(call, call_value): Copy fn address to safe reg if necessary.\n\nFrom-SVN: r4399", "tree": {"sha": "faa17aa5129165a679af356877b936c09d2a9e8a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/faa17aa5129165a679af356877b936c09d2a9e8a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/322dce453ac05ed5da517eb09acef12196f87ecc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322dce453ac05ed5da517eb09acef12196f87ecc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/322dce453ac05ed5da517eb09acef12196f87ecc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/322dce453ac05ed5da517eb09acef12196f87ecc/comments", "author": null, "committer": null, "parents": [{"sha": "50c0000cab7ccd3ab9d80db214e7e8b1986c39db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/50c0000cab7ccd3ab9d80db214e7e8b1986c39db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/50c0000cab7ccd3ab9d80db214e7e8b1986c39db"}], "stats": {"total": 14, "additions": 8, "deletions": 6}, "files": [{"sha": "2da9db7dbaa9f8724b96c9d15e59cd6875e530a3", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 8, "deletions": 6, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/322dce453ac05ed5da517eb09acef12196f87ecc/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/322dce453ac05ed5da517eb09acef12196f87ecc/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=322dce453ac05ed5da517eb09acef12196f87ecc", "patch": "@@ -4054,8 +4054,9 @@ move\\\\t%0,%z4\\\\n\\\\\n   if (operands[0])\t\t/* eliminate unused code warnings */\n     {\n       addr = XEXP (operands[0], 0);\n-      if (GET_CODE (addr) != REG && (!CONSTANT_ADDRESS_P (addr) || TARGET_LONG_CALLS))\n-\tXEXP (operands[0], 0) = force_reg (FUNCTION_MODE, addr);\n+      if ((GET_CODE (addr) != REG && (!CONSTANT_ADDRESS_P (addr) || TARGET_LONG_CALLS))\n+\t  || ! call_insn_operand (operands[0], VOIDmode))\n+\tXEXP (operands[0], 0) = copy_to_mode_reg (Pmode, addr);\n \n       /* In order to pass small structures by value in registers\n \t compatibly with the MIPS compiler, we need to shift the value\n@@ -4081,7 +4082,7 @@ move\\\\t%0,%z4\\\\n\\\\\n }\")\n \n (define_insn \"call_internal1\"\n-  [(call (match_operand 0 \"memory_operand\" \"m\")\n+  [(call (match_operand 0 \"call_insn_operand\" \"m\")\n \t (match_operand 1 \"\" \"i\"))\n    (clobber (match_operand:SI 2 \"register_operand\" \"=d\"))]\n   \"!TARGET_LONG_CALLS\"\n@@ -4135,8 +4136,9 @@ move\\\\t%0,%z4\\\\n\\\\\n   if (operands[0])\t\t/* eliminate unused code warning */\n     {\n       addr = XEXP (operands[1], 0);\n-      if (GET_CODE (addr) != REG && (!CONSTANT_ADDRESS_P (addr) || TARGET_LONG_CALLS))\n-\tXEXP (operands[1], 0) = force_reg (FUNCTION_MODE, addr);\n+      if ((GET_CODE (addr) != REG && (!CONSTANT_ADDRESS_P (addr) || TARGET_LONG_CALLS))\n+\t  || ! call_insn_operand (operands[1], VOIDmode))\n+\tXEXP (operands[1], 0) = copy_to_mode_reg (Pmode, addr);\n \n       /* In order to pass small structures by value in registers\n \t compatibly with the MIPS compiler, we need to shift the value\n@@ -4165,7 +4167,7 @@ move\\\\t%0,%z4\\\\n\\\\\n \n (define_insn \"call_value_internal1\"\n   [(set (match_operand 0 \"register_operand\" \"=df\")\n-        (call (match_operand 1 \"memory_operand\" \"m\")\n+        (call (match_operand 1 \"call_insn_operand\" \"m\")\n               (match_operand 2 \"\" \"i\")))\n    (clobber (match_operand:SI 3 \"register_operand\" \"=d\"))]\n   \"!TARGET_LONG_CALLS\""}]}