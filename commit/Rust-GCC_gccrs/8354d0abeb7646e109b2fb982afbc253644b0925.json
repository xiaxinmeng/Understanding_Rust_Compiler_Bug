{"sha": "8354d0abeb7646e109b2fb982afbc253644b0925", "node_id": "C_kwDOANBUbNoAKDgzNTRkMGFiZWI3NjQ2ZTEwOWIyZmI5ODJhZmJjMjUzNjQ0YjA5MjU", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-06-28T10:07:14Z"}, "committer": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2022-06-28T11:13:34Z"}, "message": "Speedup loop splitting SSA update\n\nSince we never process loops with inner loops that have been split\nwe can delay SSA update until after the pass is done with the whole\nloop, avoiding the O(function-size) work associated with it.\n\n2022-06-28  Richard Biener  <rguenther@suse.de>\n\n\t* tree-ssa-loop-split.cc (fix_loop_bb_probability): Do not\n\tcall update_ssa.", "tree": {"sha": "d7c2e6130e2d3182977ff613c6a22d8fd3c823c2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d7c2e6130e2d3182977ff613c6a22d8fd3c823c2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8354d0abeb7646e109b2fb982afbc253644b0925", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8354d0abeb7646e109b2fb982afbc253644b0925", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8354d0abeb7646e109b2fb982afbc253644b0925", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8354d0abeb7646e109b2fb982afbc253644b0925/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "07f49e855b50d06181b08aa2498e631be27e8055", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07f49e855b50d06181b08aa2498e631be27e8055", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07f49e855b50d06181b08aa2498e631be27e8055"}], "stats": {"total": 5, "additions": 2, "deletions": 3}, "files": [{"sha": "bccf621493b00d693fb72c962dd7f09da07e9a1a", "filename": "gcc/tree-ssa-loop-split.cc", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8354d0abeb7646e109b2fb982afbc253644b0925/gcc%2Ftree-ssa-loop-split.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8354d0abeb7646e109b2fb982afbc253644b0925/gcc%2Ftree-ssa-loop-split.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-split.cc?ref=8354d0abeb7646e109b2fb982afbc253644b0925", "patch": "@@ -491,8 +491,6 @@ static void\n fix_loop_bb_probability (class loop *loop1, class loop *loop2, edge true_edge,\n \t\t\t edge false_edge)\n {\n-  update_ssa (TODO_update_ssa);\n-\n   /* Proportion first loop's bb counts except those dominated by true\n      branch to avoid drop 1s down.  */\n   basic_block *bbs1, *bbs2;\n@@ -1668,7 +1666,8 @@ tree_ssa_split_loops (void)\n       if (loop->aux)\n \t{\n \t  /* If any of our inner loops was split, don't split us,\n-\t     and mark our containing loop as having had splits as well.  */\n+\t     and mark our containing loop as having had splits as well.\n+\t     This allows for delaying SSA update.  */\n \t  loop_outer (loop)->aux = loop;\n \t  continue;\n \t}"}]}