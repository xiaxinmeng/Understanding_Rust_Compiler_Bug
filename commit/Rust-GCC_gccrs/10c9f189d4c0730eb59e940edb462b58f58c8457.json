{"sha": "10c9f189d4c0730eb59e940edb462b58f58c8457", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTBjOWYxODlkNGMwNzMwZWI1OWU5NDBlZGI0NjJiNThmNThjODQ1Nw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2000-10-27T21:27:10Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-10-27T21:27:10Z"}, "message": "ia64.c: Revert 10-23 patch.\n\n        * config/ia64/ia64.c: Revert 10-23 patch.\n        (ia64_hard_regno_rename_ok): New.\n        * config/ia64/ia64-protos.h: Declare it.\n        * config/ia64/ia64.h (HARD_REGNO_RENAME_OK): Use it.\n\nFrom-SVN: r37090", "tree": {"sha": "653b97d9dd6fa7d029140cffb94e861a57d7291c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/653b97d9dd6fa7d029140cffb94e861a57d7291c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/10c9f189d4c0730eb59e940edb462b58f58c8457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10c9f189d4c0730eb59e940edb462b58f58c8457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10c9f189d4c0730eb59e940edb462b58f58c8457", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10c9f189d4c0730eb59e940edb462b58f58c8457/comments", "author": null, "committer": null, "parents": [{"sha": "541f7d56299fdc8028f38413dce2fd70bc5a3709", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/541f7d56299fdc8028f38413dce2fd70bc5a3709", "html_url": "https://github.com/Rust-GCC/gccrs/commit/541f7d56299fdc8028f38413dce2fd70bc5a3709"}], "stats": {"total": 48, "additions": 34, "deletions": 14}, "files": [{"sha": "39e1ff39ac8c43ae53411f1dc4477ca1c3677d02", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=10c9f189d4c0730eb59e940edb462b58f58c8457", "patch": "@@ -1,3 +1,10 @@\n+2000-10-27  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/ia64/ia64.c: Revert 10-23 patch.\n+\t(ia64_hard_regno_rename_ok): New.\n+\t* config/ia64/ia64-protos.h: Declare it.\n+\t* config/ia64/ia64.h (HARD_REGNO_RENAME_OK): Use it.\n+\n 2000-10-27  Bernd Schmidt  <bernds@redhat.co.uk>\n \t    Richard Henderson  <rth@redhat.com>\n "}, {"sha": "fc1dff1091f8e7b2308a657f16ec1b6f0a786652", "filename": "gcc/config/ia64/ia64-protos.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2Fconfig%2Fia64%2Fia64-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2Fconfig%2Fia64%2Fia64-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64-protos.h?ref=10c9f189d4c0730eb59e940edb462b58f58c8457", "patch": "@@ -82,6 +82,7 @@ extern void ia64_function_epilogue PARAMS((FILE *, int));\n \n extern int ia64_direct_return PARAMS((void));\n extern void ia64_expand_load_address PARAMS((rtx, rtx));\n+extern int ia64_hard_regno_rename_ok PARAMS((int, int));\n \n extern void ia64_initialize_trampoline PARAMS((rtx, rtx, rtx));\n extern void ia64_print_operand_address PARAMS((FILE *, rtx));"}, {"sha": "6790d3f3ab4bb00bfbf3c76472c72b1f07a3f921", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 25, "deletions": 9, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=10c9f189d4c0730eb59e940edb462b58f58c8457", "patch": "@@ -1852,12 +1852,6 @@ ia64_expand_prologue ()\n \treg_names[OUT_REG (i)] = ia64_reg_numbers[inputs + locals + i];\n     }\n \n-  /* ??? Temporarily mark the remaining output registers fixed, so\n-     that the register renaming pass does not try to used them after\n-     we've fixed the size of the register frame.  */\n-  for (i = current_frame_info.n_output_regs; i < 8; ++i)\n-    fixed_regs[OUT_REG (i)] = 1;\n-\n   /* Set the frame pointer register name.  The regnum is logically loc79,\n      but of course we'll not have allocated that many locals.  Rather than\n      worrying about renumbering the existing rtxs, we adjust the name.  */\n@@ -2393,6 +2387,31 @@ ia64_direct_return ()\n   return 0;\n }\n \n+int\n+ia64_hard_regno_rename_ok (from, to)\n+     int from;\n+     int to;\n+{\n+  /* Don't clobber any of the registers we reserved for the prologue.  */\n+  if (to == current_frame_info.reg_fp\n+      || to == current_frame_info.reg_save_b0\n+      || to == current_frame_info.reg_save_pr\n+      || to == current_frame_info.reg_save_ar_pfs\n+      || to == current_frame_info.reg_save_ar_unat\n+      || to == current_frame_info.reg_save_ar_lc)\n+    return 0;\n+\n+  /* Don't use output registers outside the register frame.  */\n+  if (OUT_REGNO_P (to) && to >= OUT_REG (current_frame_info.n_output_regs))\n+    return 0;\n+\n+  /* Retain even/oddness on predicate register pairs.  */\n+  if (PR_REGNO_P (from) && PR_REGNO_P (to))\n+    return (from & 1) == (to & 1);\n+\n+  return 1;\n+}\n+\n /* Emit the function prologue.  */\n \n void\n@@ -2503,9 +2522,6 @@ ia64_function_epilogue (file, size)\n \treg_names[OUT_REG (i)] = ia64_output_reg_names[i];\n     }\n \n-  for (i = 0; i < 8; ++i)\n-    fixed_regs[OUT_REG (i)] = 0;\n-\n   current_frame_info.initialized = 0;\n }\n "}, {"sha": "7802e3905507dacb49bca8df67343ac9d2c45fdf", "filename": "gcc/config/ia64/ia64.h", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2Fconfig%2Fia64%2Fia64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10c9f189d4c0730eb59e940edb462b58f58c8457/gcc%2Fconfig%2Fia64%2Fia64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.h?ref=10c9f189d4c0730eb59e940edb462b58f58c8457", "patch": "@@ -2643,11 +2643,7 @@ do {\t\t\t\t\t\t\t\t\t\\\n    considered for use as a rename register for REGNO1 */\n \n #define HARD_REGNO_RENAME_OK(REGNO1,REGNO2) \\\n-  ((! PR_REGNO_P (REGNO1) && ! PR_REGNO_P (REGNO2)) \t\t\t\\\n-    ? (!call_fixed_regs [REGNO1] && !call_fixed_regs [REGNO2])\t\t\\\n-      ? 1 : 0    \t\t\t\t\t\t\t\\\n-    : ((REGNO2) > 256 && ((REGNO2 & 1) == 0))\t\t\t\t\\\n-      ? 1 : 0)\n+  ia64_hard_regno_rename_ok((REGNO1), (REGNO2))\n \n /* Define this macro if the compiler should use extended basic blocks\n    when renaming registers.  Define this macro if the target has predicate"}]}