{"sha": "a75c63e02ab97abaaaf3508a25f8d87362ea238a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc1YzYzZTAyYWI5N2FiYWFhZjM1MDhhMjVmOGQ4NzM2MmVhMjM4YQ==", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@linaro.org", "date": "2017-09-15T13:12:33Z"}, "committer": {"name": "Christophe Lyon", "email": "clyon@gcc.gnu.org", "date": "2017-09-15T13:12:33Z"}, "message": "[PR target/67591] ARM v8 Thumb IT blocks are deprecated\n\n2017-09-15  Christophe Lyon  <christophe.lyon@linaro.org>\n\n\tPR target/67591\n\t* config/arm/arm.md (*cmp_and): Add enabled_for_depr_it attribute.\n\t(*cmp_ior): Likewise.\n\t(*ior_scc_scc): Add alternative for enabled_for_depr_it attribute.\n\t(*ior_scc_scc_cmp): Likewise.\n\t(*and_scc_scc): Likewise.\n\t(*and_scc_scc_cmp): Likewise.\n\nFrom-SVN: r252817", "tree": {"sha": "468b18f979b2bab0016a7f32c245ef7e6b7b8249", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/468b18f979b2bab0016a7f32c245ef7e6b7b8249"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a75c63e02ab97abaaaf3508a25f8d87362ea238a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a75c63e02ab97abaaaf3508a25f8d87362ea238a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a75c63e02ab97abaaaf3508a25f8d87362ea238a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a75c63e02ab97abaaaf3508a25f8d87362ea238a/comments", "author": null, "committer": null, "parents": [{"sha": "0d803030650a6c671b295d3e7d5161e64b59b2f6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d803030650a6c671b295d3e7d5161e64b59b2f6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d803030650a6c671b295d3e7d5161e64b59b2f6"}], "stats": {"total": 56, "additions": 36, "deletions": 20}, "files": [{"sha": "47913475d5acee7a51ec8190b1727fcd97311bd1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a75c63e02ab97abaaaf3508a25f8d87362ea238a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a75c63e02ab97abaaaf3508a25f8d87362ea238a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a75c63e02ab97abaaaf3508a25f8d87362ea238a", "patch": "@@ -1,3 +1,13 @@\n+2017-09-15  Christophe Lyon  <christophe.lyon@linaro.org>\n+\n+\tPR target/67591\n+\t* config/arm/arm.md (*cmp_and): Add enabled_for_depr_it attribute.\n+\t(*cmp_ior): Likewise.\n+\t(*ior_scc_scc): Add alternative for enabled_for_depr_it attribute.\n+\t(*ior_scc_scc_cmp): Likewise.\n+\t(*and_scc_scc): Likewise.\n+\t(*and_scc_scc_cmp): Likewise.\n+\n 2017-09-15  Richard Sandiford  <richard.sandiford@linaro.org>\n \t    Alan Hayard  <alan.hayward@arm.com>\n \t    David Sherwood  <david.sherwood@arm.com>"}, {"sha": "f241f9d0b7d24bd3414960c79420ab5e03a247f5", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 26, "deletions": 20, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a75c63e02ab97abaaaf3508a25f8d87362ea238a/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a75c63e02ab97abaaaf3508a25f8d87362ea238a/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=a75c63e02ab97abaaaf3508a25f8d87362ea238a", "patch": "@@ -9563,6 +9563,7 @@\n   [(set_attr \"conds\" \"set\")\n    (set_attr \"predicable\" \"no\")\n    (set_attr \"arch\" \"t2,t2,t2,t2,t2,any,any,any,any\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,no,no,no,no,no,no,no,no\")\n    (set_attr_alternative \"length\"\n       [(const_int 6)\n        (const_int 8)\n@@ -9645,6 +9646,7 @@\n   \"\n   [(set_attr \"conds\" \"set\")\n    (set_attr \"arch\" \"t2,t2,t2,t2,t2,any,any,any,any\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,no,no,no,no,no,no,no,no\")\n    (set_attr_alternative \"length\"\n       [(const_int 6)\n        (const_int 8)\n@@ -9667,13 +9669,13 @@\n )\n \n (define_insn_and_split \"*ior_scc_scc\"\n-  [(set (match_operand:SI 0 \"s_register_operand\" \"=Ts\")\n+  [(set (match_operand:SI 0 \"s_register_operand\" \"=Ts,Ts\")\n \t(ior:SI (match_operator:SI 3 \"arm_comparison_operator\"\n-\t\t [(match_operand:SI 1 \"s_register_operand\" \"r\")\n-\t\t  (match_operand:SI 2 \"arm_add_operand\" \"rIL\")])\n+\t\t [(match_operand:SI 1 \"s_register_operand\" \"l,r\")\n+\t\t  (match_operand:SI 2 \"arm_add_operand\" \"lPy,rIL\")])\n \t\t(match_operator:SI 6 \"arm_comparison_operator\"\n-\t\t [(match_operand:SI 4 \"s_register_operand\" \"r\")\n-\t\t  (match_operand:SI 5 \"arm_add_operand\" \"rIL\")])))\n+\t\t [(match_operand:SI 4 \"s_register_operand\" \"l,r\")\n+\t\t  (match_operand:SI 5 \"arm_add_operand\" \"lPy,rIL\")])))\n    (clobber (reg:CC CC_REGNUM))]\n   \"TARGET_32BIT\n    && (arm_select_dominance_cc_mode (operands[3], operands[6], DOM_CC_X_OR_Y)\n@@ -9692,6 +9694,7 @@\n \t\t\t\t\t\t  DOM_CC_X_OR_Y),\n \t\t    CC_REGNUM);\"\n   [(set_attr \"conds\" \"clob\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,no\")\n    (set_attr \"length\" \"16\")\n    (set_attr \"type\" \"multiple\")]\n )\n@@ -9701,13 +9704,13 @@\n (define_insn_and_split \"*ior_scc_scc_cmp\"\n   [(set (match_operand 0 \"dominant_cc_register\" \"\")\n \t(compare (ior:SI (match_operator:SI 3 \"arm_comparison_operator\"\n-\t\t\t  [(match_operand:SI 1 \"s_register_operand\" \"r\")\n-\t\t\t   (match_operand:SI 2 \"arm_add_operand\" \"rIL\")])\n+\t\t\t  [(match_operand:SI 1 \"s_register_operand\" \"l,r\")\n+\t\t\t   (match_operand:SI 2 \"arm_add_operand\" \"lPy,rIL\")])\n \t\t\t (match_operator:SI 6 \"arm_comparison_operator\"\n-\t\t\t  [(match_operand:SI 4 \"s_register_operand\" \"r\")\n-\t\t\t   (match_operand:SI 5 \"arm_add_operand\" \"rIL\")]))\n+\t\t\t  [(match_operand:SI 4 \"s_register_operand\" \"l,r\")\n+\t\t\t   (match_operand:SI 5 \"arm_add_operand\" \"lPy,rIL\")]))\n \t\t (const_int 0)))\n-   (set (match_operand:SI 7 \"s_register_operand\" \"=Ts\")\n+   (set (match_operand:SI 7 \"s_register_operand\" \"=Ts,Ts\")\n \t(ior:SI (match_op_dup 3 [(match_dup 1) (match_dup 2)])\n \t\t(match_op_dup 6 [(match_dup 4) (match_dup 5)])))]\n   \"TARGET_32BIT\"\n@@ -9722,18 +9725,19 @@\n    (set (match_dup 7) (ne:SI (match_dup 0) (const_int 0)))]\n   \"\"\n   [(set_attr \"conds\" \"set\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,no\")\n    (set_attr \"length\" \"16\")\n    (set_attr \"type\" \"multiple\")]\n )\n \n (define_insn_and_split \"*and_scc_scc\"\n-  [(set (match_operand:SI 0 \"s_register_operand\" \"=Ts\")\n+  [(set (match_operand:SI 0 \"s_register_operand\" \"=Ts,Ts\")\n \t(and:SI (match_operator:SI 3 \"arm_comparison_operator\"\n-\t\t [(match_operand:SI 1 \"s_register_operand\" \"r\")\n-\t\t  (match_operand:SI 2 \"arm_add_operand\" \"rIL\")])\n+\t\t [(match_operand:SI 1 \"s_register_operand\" \"l,r\")\n+\t\t  (match_operand:SI 2 \"arm_add_operand\" \"lPy,rIL\")])\n \t\t(match_operator:SI 6 \"arm_comparison_operator\"\n-\t\t [(match_operand:SI 4 \"s_register_operand\" \"r\")\n-\t\t  (match_operand:SI 5 \"arm_add_operand\" \"rIL\")])))\n+\t\t [(match_operand:SI 4 \"s_register_operand\" \"l,r\")\n+\t\t  (match_operand:SI 5 \"arm_add_operand\" \"lPy,rIL\")])))\n    (clobber (reg:CC CC_REGNUM))]\n   \"TARGET_32BIT\n    && (arm_select_dominance_cc_mode (operands[3], operands[6], DOM_CC_X_AND_Y)\n@@ -9754,6 +9758,7 @@\n \t\t\t\t\t\t  DOM_CC_X_AND_Y),\n \t\t    CC_REGNUM);\"\n   [(set_attr \"conds\" \"clob\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,no\")\n    (set_attr \"length\" \"16\")\n    (set_attr \"type\" \"multiple\")]\n )\n@@ -9763,13 +9768,13 @@\n (define_insn_and_split \"*and_scc_scc_cmp\"\n   [(set (match_operand 0 \"dominant_cc_register\" \"\")\n \t(compare (and:SI (match_operator:SI 3 \"arm_comparison_operator\"\n-\t\t\t  [(match_operand:SI 1 \"s_register_operand\" \"r\")\n-\t\t\t   (match_operand:SI 2 \"arm_add_operand\" \"rIL\")])\n+\t\t\t  [(match_operand:SI 1 \"s_register_operand\" \"l,r\")\n+\t\t\t   (match_operand:SI 2 \"arm_add_operand\" \"lPy,rIL\")])\n \t\t\t (match_operator:SI 6 \"arm_comparison_operator\"\n-\t\t\t  [(match_operand:SI 4 \"s_register_operand\" \"r\")\n-\t\t\t   (match_operand:SI 5 \"arm_add_operand\" \"rIL\")]))\n+\t\t\t  [(match_operand:SI 4 \"s_register_operand\" \"l,r\")\n+\t\t\t   (match_operand:SI 5 \"arm_add_operand\" \"lPy,rIL\")]))\n \t\t (const_int 0)))\n-   (set (match_operand:SI 7 \"s_register_operand\" \"=Ts\")\n+   (set (match_operand:SI 7 \"s_register_operand\" \"=Ts,Ts\")\n \t(and:SI (match_op_dup 3 [(match_dup 1) (match_dup 2)])\n \t\t(match_op_dup 6 [(match_dup 4) (match_dup 5)])))]\n   \"TARGET_32BIT\"\n@@ -9784,6 +9789,7 @@\n    (set (match_dup 7) (ne:SI (match_dup 0) (const_int 0)))]\n   \"\"\n   [(set_attr \"conds\" \"set\")\n+   (set_attr \"enabled_for_depr_it\" \"yes,no\")\n    (set_attr \"length\" \"16\")\n    (set_attr \"type\" \"multiple\")]\n )"}]}