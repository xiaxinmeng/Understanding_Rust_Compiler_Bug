{"sha": "7ea082bbb514fb2b9afbb8f081e21f287ba86431", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2VhMDgyYmJiNTE0ZmIyYjlhZmJiOGYwODFlMjFmMjg3YmE4NjQzMQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2002-09-25T20:14:37Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2002-09-25T20:14:37Z"}, "message": "boehm.cc (_Jv_MarkObj): Don't fail if class object has been allocated but not initialized.\n\n\t* boehm.cc (_Jv_MarkObj): Don't fail if class object has been\n\tallocated but not initialized.\n\nFrom-SVN: r57514", "tree": {"sha": "95368d48d4cdd29791c619b4f3431674de247d8e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95368d48d4cdd29791c619b4f3431674de247d8e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7ea082bbb514fb2b9afbb8f081e21f287ba86431", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ea082bbb514fb2b9afbb8f081e21f287ba86431", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ea082bbb514fb2b9afbb8f081e21f287ba86431", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ea082bbb514fb2b9afbb8f081e21f287ba86431/comments", "author": null, "committer": null, "parents": [{"sha": "941b08f2734f6a5cbeaeb9e82fe931fd3badc1ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/941b08f2734f6a5cbeaeb9e82fe931fd3badc1ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/941b08f2734f6a5cbeaeb9e82fe931fd3badc1ae"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "d4a611bbbf5ad8710180b8252aad0b841372cf8c", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ea082bbb514fb2b9afbb8f081e21f287ba86431/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ea082bbb514fb2b9afbb8f081e21f287ba86431/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=7ea082bbb514fb2b9afbb8f081e21f287ba86431", "patch": "@@ -1,3 +1,8 @@\n+2002-09-25  Tom Tromey  <tromey@redhat.com>\n+\n+\t* boehm.cc (_Jv_MarkObj): Don't fail if class object has been\n+\tallocated but not initialized.\n+\n 2002-09-25  Jesse Rosenstock  <jmr@ugcs.caltech.edu>\n \n \tFix for PR libgcj/7766:"}, {"sha": "466c9223ac81f422bf7c2ad2b9c8bc966f963583", "filename": "libjava/boehm.cc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7ea082bbb514fb2b9afbb8f081e21f287ba86431/libjava%2Fboehm.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7ea082bbb514fb2b9afbb8f081e21f287ba86431/libjava%2Fboehm.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fboehm.cc?ref=7ea082bbb514fb2b9afbb8f081e21f287ba86431", "patch": "@@ -1,6 +1,6 @@\n // boehm.cc - interface between libjava and Boehm GC.\n \n-/* Copyright (C) 1998, 1999, 2000, 2001  Free Software Foundation\n+/* Copyright (C) 1998, 1999, 2000, 2001, 2002  Free Software Foundation\n \n    This file is part of libgcj.\n \n@@ -134,6 +134,12 @@ _Jv_MarkObj (void *addr, void *msp, void *msl, void * /* env */)\n       p = (ptr_t) c->methods;\n       MAYBE_MARK (p, mark_stack_ptr, mark_stack_limit, c, c6label);\n \n+      // The vtable might have been set, but the rest of the class\n+      // could still be uninitialized.  If this is the case, then\n+      // c.isArray will SEGV.  We check for this, and if it is the\n+      // case we just return.\n+      if (__builtin_expect (c->name == NULL, false))\n+\treturn mark_stack_ptr;\n \n       if (! c->isArray() && ! c->isPrimitive())\n \t{"}]}