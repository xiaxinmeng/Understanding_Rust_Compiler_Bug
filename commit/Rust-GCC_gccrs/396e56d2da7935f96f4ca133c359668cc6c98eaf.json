{"sha": "396e56d2da7935f96f4ca133c359668cc6c98eaf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mzk2ZTU2ZDJkYTc5MzVmOTZmNGNhMTMzYzM1OTY2OGNjNmM5OGVhZg==", "commit": {"author": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2016-10-30T17:48:27Z"}, "committer": {"name": "Thomas Koenig", "email": "tkoenig@gcc.gnu.org", "date": "2016-10-30T17:48:27Z"}, "message": "re PR fortran/67219 (Incorrect conversion warning)\n\n2016-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/67219\n\t* arith.c (gfc_int2real):  Change gfc_warning_now\n\tto gfc_warning.\n\t* primary.c (match_complex_constant):  If there\n\tis no comma, throw away any warning which might have\n\tbeen issued by gfc_int2real.\n\n2016-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n\n\tPR fortran/67219\n\t* gfortran.dg/pr67219.f90:  New test.\n\nFrom-SVN: r241689", "tree": {"sha": "9f87be3a5ce110418b89e042a1508d940257fa15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9f87be3a5ce110418b89e042a1508d940257fa15"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/396e56d2da7935f96f4ca133c359668cc6c98eaf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/396e56d2da7935f96f4ca133c359668cc6c98eaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/396e56d2da7935f96f4ca133c359668cc6c98eaf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/396e56d2da7935f96f4ca133c359668cc6c98eaf/comments", "author": null, "committer": null, "parents": [{"sha": "e9d33505a09b5503ff8816ae970c47ce30684447", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9d33505a09b5503ff8816ae970c47ce30684447", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9d33505a09b5503ff8816ae970c47ce30684447"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "be4f1b8f03fd028326688d28cd5b4d5acb363507", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=396e56d2da7935f96f4ca133c359668cc6c98eaf", "patch": "@@ -1,3 +1,12 @@\n+2016-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/67219\n+\t* arith.c (gfc_int2real):  Change gfc_warning_now\n+\tto gfc_warning.\n+\t* primary.c (match_complex_constant):  If there\n+\tis no comma, throw away any warning which might have\n+\tbeen issued by gfc_int2real.\n+\n 2016-10-28  Steven G. Kargl <kargl@gcc.gnu.org>\n \n \tPR fortran/71891"}, {"sha": "d566faa29cd889870ba02537e0764f7a7a5f6a11", "filename": "gcc/fortran/arith.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ffortran%2Farith.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ffortran%2Farith.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Farith.c?ref=396e56d2da7935f96f4ca133c359668cc6c98eaf", "patch": "@@ -2072,11 +2072,11 @@ gfc_int2real (gfc_expr *src, int kind)\n \n   if (warn_conversion\n       && wprecision_int_real (src->value.integer, result->value.real))\n-    gfc_warning_now (OPT_Wconversion, \"Change of value in conversion \"\n-\t\t     \"from %qs to %qs at %L\",\n-\t\t     gfc_typename (&src->ts),\n-\t\t     gfc_typename (&result->ts),\n-\t\t     &src->where);\n+    gfc_warning (OPT_Wconversion, \"Change of value in conversion \"\n+\t\t \"from %qs to %qs at %L\",\n+\t\t gfc_typename (&src->ts),\n+\t\t gfc_typename (&result->ts),\n+\t\t &src->where);\n \n   return result;\n }"}, {"sha": "2101644fcdc2649377b5c70517b6d98bd87b3212", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=396e56d2da7935f96f4ca133c359668cc6c98eaf", "patch": "@@ -1353,6 +1353,10 @@ match_complex_constant (gfc_expr **result)\n \n   if (gfc_match_char (',') == MATCH_NO)\n     {\n+      /* It is possible that gfc_int2real issued a warning when\n+\t converting an integer to real.  Throw this away here.  */\n+\n+      gfc_clear_warning ();\n       gfc_pop_error (&old_error);\n       m = MATCH_NO;\n       goto cleanup;"}, {"sha": "d65ebb4a8cef3afa8018bdf69703f1d2218d3906", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=396e56d2da7935f96f4ca133c359668cc6c98eaf", "patch": "@@ -1,3 +1,8 @@\n+2016-10-30  Thomas Koenig  <tkoenig@gcc.gnu.org>\n+\n+\tPR fortran/67219\n+\t* gfortran.dg/pr67219.f90:  New test.\n+\n 2016-10-29  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/77919"}, {"sha": "26d5f3f5caed248e805ac301e2530fc8fd2c71a1", "filename": "gcc/testsuite/gfortran.dg/pr67219.f90", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67219.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/396e56d2da7935f96f4ca133c359668cc6c98eaf/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67219.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr67219.f90?ref=396e56d2da7935f96f4ca133c359668cc6c98eaf", "patch": "@@ -0,0 +1,8 @@\n+! { dg-do compile }\n+! PR 67149 - this used to throw a spurious error.\n+function foo(bar)\n+   integer(8)             :: foo\n+   integer(4), intent(in) :: bar\n+   integer(4), parameter  :: huge_4 = huge(0_4)\n+   foo = (huge_4 - int(bar,kind=8))\n+end function"}]}