{"sha": "7e0d34b56110216f0c7344a00a7fa3b22c4813aa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2UwZDM0YjU2MTEwMjE2ZjBjNzM0NGEwMGE3ZmEzYjIyYzQ4MTNhYQ==", "commit": {"author": {"name": "Andrew Dixie", "email": "andrewd@gentrack.com", "date": "2015-09-19T22:57:47Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2015-09-19T22:57:47Z"}, "message": "xcoff.h (EH_FRAME_IN_DATA_SECTION): Delete.\n\n2015-09-19  Andrew Dixie  <andrewd@gentrack.com>\n            David Edelsohn  <dje.gcc@gmail.com>\n\n        * config/rs6000/xcoff.h (EH_FRAME_IN_DATA_SECTION): Delete.\n        (ASM_PREFERRED_EH_DATA_FORMAT): Define.\n        (EH_FRAME_THROUGH_COLLECT2): Define.\n        (EH_TABLES_CAN_BE_READ_ONLY): Define.\n        (ASM_OUTPUT_DWARF_PCREL): Define.\n        (ASM_OUTPUT_DWARF_DATAREL): Define.\n\nCo-Authored-By: David Edelsohn <dje.gcc@gmail.com>\n\nFrom-SVN: r227937", "tree": {"sha": "e786ef8ae2075471d4ffd9b698aa6829b8330203", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e786ef8ae2075471d4ffd9b698aa6829b8330203"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e0d34b56110216f0c7344a00a7fa3b22c4813aa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e0d34b56110216f0c7344a00a7fa3b22c4813aa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e0d34b56110216f0c7344a00a7fa3b22c4813aa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e0d34b56110216f0c7344a00a7fa3b22c4813aa/comments", "author": {"login": "andrewdixie", "id": 5185985, "node_id": "MDQ6VXNlcjUxODU5ODU=", "avatar_url": "https://avatars.githubusercontent.com/u/5185985?v=4", "gravatar_id": "", "url": "https://api.github.com/users/andrewdixie", "html_url": "https://github.com/andrewdixie", "followers_url": "https://api.github.com/users/andrewdixie/followers", "following_url": "https://api.github.com/users/andrewdixie/following{/other_user}", "gists_url": "https://api.github.com/users/andrewdixie/gists{/gist_id}", "starred_url": "https://api.github.com/users/andrewdixie/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/andrewdixie/subscriptions", "organizations_url": "https://api.github.com/users/andrewdixie/orgs", "repos_url": "https://api.github.com/users/andrewdixie/repos", "events_url": "https://api.github.com/users/andrewdixie/events{/privacy}", "received_events_url": "https://api.github.com/users/andrewdixie/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "236d76c4a9d180ad90cbba30d34236e19f37d609", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/236d76c4a9d180ad90cbba30d34236e19f37d609", "html_url": "https://github.com/Rust-GCC/gccrs/commit/236d76c4a9d180ad90cbba30d34236e19f37d609"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "49c959be355af197970011efc43aaf95e7ece558", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0d34b56110216f0c7344a00a7fa3b22c4813aa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0d34b56110216f0c7344a00a7fa3b22c4813aa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7e0d34b56110216f0c7344a00a7fa3b22c4813aa", "patch": "@@ -1,3 +1,13 @@\n+2015-09-19  Andrew Dixie  <andrewd@gentrack.com>\n+\t    David Edelsohn  <dje.gcc@gmail.com>\n+\n+\t* config/rs6000/xcoff.h (EH_FRAME_IN_DATA_SECTION): Delete.\n+\t(ASM_PREFERRED_EH_DATA_FORMAT): Define.\n+\t(EH_FRAME_THROUGH_COLLECT2): Define.\n+\t(EH_TABLES_CAN_BE_READ_ONLY): Define.\n+\t(ASM_OUTPUT_DWARF_PCREL): Define.\n+\t(ASM_OUTPUT_DWARF_DATAREL): Define.\n+\n 2015-09-19  John David Anglin  <danglin@gcc.gnu.org>\n \n \t* config/pa/pa.c (pa_function_ok_for_sibcall): Remove special treatment"}, {"sha": "be1f708b857f1f81fd3b0a059420609e0d860085", "filename": "gcc/config/rs6000/xcoff.h", "status": "modified", "additions": 21, "deletions": 5, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e0d34b56110216f0c7344a00a7fa3b22c4813aa/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e0d34b56110216f0c7344a00a7fa3b22c4813aa/gcc%2Fconfig%2Frs6000%2Fxcoff.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fxcoff.h?ref=7e0d34b56110216f0c7344a00a7fa3b22c4813aa", "patch": "@@ -264,7 +264,7 @@\n \n #ifdef HAVE_AS_TLS\n #define ASM_OUTPUT_TLS_COMMON(FILE, DECL, NAME, SIZE)\t\\\n-  do { fputs(COMMON_ASM_OP, (FILE));\t\t\t\\\n+  do { fputs (COMMON_ASM_OP, (FILE));\t\t\t\\\n        RS6000_OUTPUT_BASENAME ((FILE), (NAME));\t\t\\\n        fprintf ((FILE), \"[UL],\" HOST_WIDE_INT_PRINT_UNSIGNED\"\\n\", \\\n        (SIZE));\t\t\t\t\t\t\\\n@@ -296,10 +296,26 @@\n   \"\\t.csect .data[RW],\" XCOFF_CSECT_DEFAULT_ALIGNMENT_STR\n \n \n-/* Define to prevent DWARF2 unwind info in the data section rather\n-   than in the .eh_frame section.  We do this because the AIX linker\n-   would otherwise garbage collect these sections.  */\n-#define EH_FRAME_IN_DATA_SECTION 1\n+/* The eh_frames are put in the read-only text segment.\n+   Local code labels/function will also be in the local text segment so use\n+   PC relative addressing.\n+   Global symbols must be in the data segment to allow loader relocations.\n+   So use DW_EH_PE_indirect to allocate a slot in the local data segment.\n+   There is no constant offset to this data segment from the text segment,\n+   so use addressing relative to the data segment.\n+ */\n+#define ASM_PREFERRED_EH_DATA_FORMAT(CODE,GLOBAL) \\\n+  ((GLOBAL) ? (DW_EH_PE_indirect | DW_EH_PE_datarel | DW_EH_PE_sdata4) \\\n+\t    : (DW_EH_PE_pcrel | DW_EH_PE_sdata4))\n+\n+#define EH_FRAME_THROUGH_COLLECT2 1\n+#define EH_TABLES_CAN_BE_READ_ONLY 1\n+\n+#define ASM_OUTPUT_DWARF_PCREL(FILE,SIZE,LABEL) \\\n+  rs6000_asm_output_dwarf_pcrel ((FILE), (SIZE), (LABEL));\n+\n+#define ASM_OUTPUT_DWARF_DATAREL(FILE,SIZE,LABEL) \\\n+  rs6000_asm_output_dwarf_datarel ((FILE), (SIZE), (LABEL));\n \n #define MAKE_DECL_ONE_ONLY(DECL) (DECL_WEAK (DECL) = 1)\n "}]}