{"sha": "b178461a93752916e0ff817e7db879aa638ab956", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE3ODQ2MWE5Mzc1MjkxNmUwZmY4MTdlN2RiODc5YWE2MzhhYjk1Ng==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2009-04-24T14:56:55Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-24T14:56:55Z"}, "message": "mlib-prj.adb, [...]: Minor reformatting.\n\n2009-04-24  Robert Dewar  <dewar@adacore.com>\n\n\t* mlib-prj.adb, prj-env.adb, prj-nmsc.adb, prj-proc.adb, make.adb,\n\tclean.adb: Minor reformatting.\n\tMinor code reorganization and message improvement.\n\nFrom-SVN: r146732", "tree": {"sha": "56b4938ef0298b639d0365d40d1e615bffb7c12e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/56b4938ef0298b639d0365d40d1e615bffb7c12e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b178461a93752916e0ff817e7db879aa638ab956", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b178461a93752916e0ff817e7db879aa638ab956", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b178461a93752916e0ff817e7db879aa638ab956", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b178461a93752916e0ff817e7db879aa638ab956/comments", "author": null, "committer": null, "parents": [{"sha": "e1c9f239f3b3a5cea97c38f8b46a0a308bc4e9dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e1c9f239f3b3a5cea97c38f8b46a0a308bc4e9dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e1c9f239f3b3a5cea97c38f8b46a0a308bc4e9dc"}], "stats": {"total": 86, "additions": 46, "deletions": 40}, "files": [{"sha": "e1beacc2a34904838342293d8c042afb0a163fc4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -1,3 +1,9 @@\n+2009-04-24  Robert Dewar  <dewar@adacore.com>\n+\n+\t* mlib-prj.adb, prj-env.adb, prj-nmsc.adb, prj-proc.adb, make.adb,\n+\tclean.adb: Minor reformatting.\n+\tMinor code reorganization and message improvement.\n+\n 2009-04-24  Emmanuel Briot  <briot@adacore.com>\n \n \t* prj-proc.adb, prj.adb, prj.ads, prj-nmsc.adb, prj-nmsc.ads"}, {"sha": "ce77b60577e7de1f49ca67aecb2fea45c32cf703", "filename": "gcc/ada/clean.adb", "status": "modified", "additions": 9, "deletions": 9, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fclean.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fclean.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fclean.adb?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -1078,13 +1078,14 @@ package body Clean is\n \n       if All_Projects then\n          declare\n-            Imported : Project_List := Data.Imported_Projects;\n+            Imported : Project_List;\n             Process  : Boolean;\n \n          begin\n             --  For each imported project, call Clean_Project if the project\n             --  has not been processed already.\n \n+            Imported := Data.Imported_Projects;\n             while Imported /= null loop\n                Process := True;\n \n@@ -1249,8 +1250,8 @@ package body Clean is\n      (Dir    : String;\n       Source : File_Name_Type)\n    is\n-      Source_Name : constant String := Get_Name_String (Source);\n-      Current     : constant String := Get_Current_Dir;\n+      Source_Name : constant String   := Get_Name_String (Source);\n+      Current     : constant String   := Get_Current_Dir;\n       Last        : constant Positive := B_Start'Length + Source_Name'Length;\n       File_Name   : String (1 .. Last + 4);\n \n@@ -1415,8 +1416,8 @@ package body Clean is\n          end;\n       end if;\n \n-      --  If neither a project file nor an executable were specified,\n-      --  output the usage and exit.\n+      --  If neither a project file nor an executable were specified, output\n+      --  the usage and exit.\n \n       if Main_Project = No_Project and then Osint.Number_Of_Files = 0 then\n          Usage;\n@@ -1443,8 +1444,8 @@ package body Clean is\n          Clean_Executables;\n       end if;\n \n-      --  In verbose mode, if Delete has not been called, indicate that\n-      --  no file needs to be deleted.\n+      --  In verbose mode, if Delete has not been called, indicate that no file\n+      --  needs to be deleted.\n \n       if Verbose_Mode and (not File_Deleted) then\n          New_Line;\n@@ -1889,8 +1890,7 @@ package body Clean is\n       Src : constant String := Get_Name_String (Source);\n \n    begin\n-      --  If the source name has an extension, then replace it with\n-      --  the tree suffix.\n+      --  If source name has an extension, then replace it with the tree suffix\n \n       for Index in reverse Src'First + 1 .. Src'Last loop\n          if Src (Index) = '.' then"}, {"sha": "bc40cbab067138d1f3df1f14038c54a889e7c235", "filename": "gcc/ada/make.adb", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fmake.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fmake.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmake.adb?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -7136,8 +7136,7 @@ package body Make is\n                Init_Q;\n             end if;\n \n-            --  And of course, we only insert in the Q if the source is not\n-            --  marked.\n+            --  And of course, only insert in the Q if the source is not marked\n \n             if Sfile /= No_File and then not Is_Marked (Sfile, Index) then\n                if Verbose_Mode then\n@@ -7253,8 +7252,8 @@ package body Make is\n       Full_Lib_File : File_Name_Type) return Boolean\n    is\n    begin\n-      --  There is something to check only when using project files.\n-      --  Otherwise, this function returns True (last line of the function).\n+      --  There is something to check only when using project files. Otherwise,\n+      --  this function returns True (last line of the function).\n \n       if Main_Project /= No_Project then\n          declare\n@@ -7280,9 +7279,9 @@ package body Make is\n                Path             => Path_Name);\n             Current_Verbosity := Saved_Verbosity;\n \n-            --  If this source is in a project, check that the ALI file is\n-            --  in its object directory. If it is not, return False, so that\n-            --  the ALI file will not be skipped.\n+            --  If this source is in a project, check that the ALI file is in\n+            --  its object directory. If it is not, return False, so that the\n+            --  ALI file will not be skipped.\n \n             if Project /= No_Project then\n                Data := Project_Tree.Projects.Table (Project);\n@@ -7548,10 +7547,9 @@ package body Make is\n \n          Data.Depth := Depth;\n \n-         List := Data.Imported_Projects;\n-\n          --  Visit each imported project\n \n+         List := Data.Imported_Projects;\n          while List /= null loop\n             Proj := List.Project;\n             List := List.Next;"}, {"sha": "a1309d716ae6a3727ff9e7e2f2a826ceae1cbd45", "filename": "gcc/ada/mlib-prj.adb", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fmlib-prj.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fmlib-prj.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fmlib-prj.adb?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -679,7 +679,7 @@ package body MLib.Prj is\n \n          procedure Process_Project (Project : Project_Id) is\n             Data     : Project_Data := In_Tree.Projects.Table (Project);\n-            Imported : Project_List := Data.Imported_Projects;\n+            Imported : Project_List;\n \n          begin\n             --  Nothing to do if process has already been processed\n@@ -691,6 +691,7 @@ package body MLib.Prj is\n                --  We first process the imported projects to guarantee that\n                --  we have a proper reverse order for the libraries.\n \n+               Imported := Data.Imported_Projects;\n                while Imported /= null loop\n                   if Imported.Project /= No_Project then\n                      Process_Project (Imported.Project);\n@@ -776,7 +777,6 @@ package body MLib.Prj is\n                      end if;\n                   end if;\n                end if;\n-\n             end if;\n          end Process_Project;\n "}, {"sha": "778db9d89b2b6e33d3eeebc8c869fa868d22fa37", "filename": "gcc/ada/prj-env.adb", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fprj-env.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fprj-env.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-env.adb?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -549,7 +549,6 @@ package body Prj.Env is\n \n             declare\n                Current : Project_List := Data.Imported_Projects;\n-\n             begin\n                while Current /= null loop\n                   Check (Current.Project);"}, {"sha": "9c1914371d7cc9e8d0a28d8cb723b8864ebc8f55", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 4, "deletions": 5, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -907,7 +907,6 @@ package body Prj.Nmsc is\n                           or else Source.Language = Language;\n \n                         Alt_Lang := Source.Alternate_Languages;\n-\n                         while Alt_Lang /= null loop\n                            exit Source_Loop when Alt_Lang.Language = Language;\n                            Alt_Lang := Alt_Lang.Next;\n@@ -5890,7 +5889,7 @@ package body Prj.Nmsc is\n                     File_Name_Type (Object_Dir.Value);\n                   Error_Msg\n                     (Project, In_Tree,\n-                     \"the object directory { cannot be found\",\n+                     \"object directory { not found\",\n                      Data.Location);\n                end if;\n \n@@ -5968,7 +5967,7 @@ package body Prj.Nmsc is\n                Err_Vars.Error_Msg_File_1 := File_Name_Type (Exec_Dir.Value);\n                Error_Msg\n                  (Project, In_Tree,\n-                  \"the exec directory { cannot be found\",\n+                  \"exec directory { not found\",\n                   Data.Location);\n             end if;\n          end if;\n@@ -8607,7 +8606,7 @@ package body Prj.Nmsc is\n                   Error_Msg\n                     (Project, In_Tree,\n                      \"?source of spec of unit %% (%%)\" &\n-                     \" cannot be found in this project\",\n+                     \" not found in this project\",\n                      Location);\n                end if;\n \n@@ -8619,7 +8618,7 @@ package body Prj.Nmsc is\n                   Error_Msg\n                     (Project, In_Tree,\n                      \"?source of body of unit %% (%%)\" &\n-                     \" cannot be found in this project\",\n+                     \" not found in this project\",\n                      Location);\n                end if;\n             end if;"}, {"sha": "a10d7fe72359f2af01f35b1d016ea3f7e7818b5b", "filename": "gcc/ada/prj-proc.adb", "status": "modified", "additions": 18, "deletions": 14, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fprj-proc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b178461a93752916e0ff817e7db879aa638ab956/gcc%2Fada%2Fprj-proc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-proc.adb?ref=b178461a93752916e0ff817e7db879aa638ab956", "patch": "@@ -63,6 +63,10 @@ package body Prj.Proc is\n    --  Concatenate two strings and returns another string if both\n    --  arguments are not null string.\n \n+   --  In the following procedures, we are expected to guess the meaning of\n+   --  the parameters from their names, this is never a good idea, comments\n+   --  should be added precisely defining every formal ???\n+\n    procedure Add_Attributes\n      (Project       : Project_Id;\n       Project_Name  : Name_Id;\n@@ -71,8 +75,8 @@ package body Prj.Proc is\n       Decl          : in out Declarations;\n       First         : Attribute_Node_Id;\n       Project_Level : Boolean);\n-   --  Add all attributes, starting with First, with their default\n-   --  values to the package or project with declarations Decl.\n+   --  Add all attributes, starting with First, with their default values to\n+   --  the package or project with declarations Decl.\n \n    procedure Check\n      (In_Tree         : Project_Tree_Ref;\n@@ -134,12 +138,12 @@ package body Prj.Proc is\n       From_Project_Node      : Project_Node_Id;\n       From_Project_Node_Tree : Project_Node_Tree_Ref;\n       Extended_By            : Project_Id);\n-   --  Process project with node From_Project_Node in the tree.\n-   --  Do nothing if From_Project_Node is Empty_Node.\n-   --  If project has already been processed, simply return its project id.\n-   --  Otherwise create a new project id, mark it as processed, call itself\n-   --  recursively for all imported projects and a extended project, if any.\n-   --  Then process the declarative items of the project.\n+   --  Process project with node From_Project_Node in the tree. Do nothing if\n+   --  From_Project_Node is Empty_Node. If project has already been processed,\n+   --  simply return its project id. Otherwise create a new project id, mark it\n+   --  as processed, call itself recursively for all imported projects and a\n+   --  extended project, if any. Then process the declarative items of the\n+   --  project.\n \n    type Recursive_Check_Data is record\n       In_Tree         : Project_Tree_Ref;\n@@ -151,8 +155,8 @@ package body Prj.Proc is\n    --  Current_Dir is for optimization purposes, avoiding extra system calls.\n \n    procedure Recursive_Check\n-     (Project   : Project_Id;\n-      Data      : in out Recursive_Check_Data);\n+     (Project : Project_Id;\n+      Data    : in out Recursive_Check_Data);\n    --  Check_Naming_Scheme for the project\n \n    ---------\n@@ -1608,12 +1612,12 @@ package body Prj.Proc is\n                      if Orig_Array = No_Array then\n                         if Error_Report = null then\n                            Error_Msg\n-                             (\"associative array value cannot be found\",\n+                             (\"associative array value not found\",\n                               Location_Of\n                                 (Current_Item, From_Project_Node_Tree));\n                         else\n                            Error_Report\n-                             (\"associative array value cannot be found\",\n+                             (\"associative array value not found\",\n                               Project, In_Tree);\n                         end if;\n \n@@ -2469,8 +2473,8 @@ package body Prj.Proc is\n    ---------------------\n \n    procedure Recursive_Check\n-     (Project   : Project_Id;\n-      Data      : in out Recursive_Check_Data)\n+     (Project : Project_Id;\n+      Data    : in out Recursive_Check_Data)\n    is\n    begin\n       if Verbose_Mode then"}]}