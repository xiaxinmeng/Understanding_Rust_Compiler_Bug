{"sha": "d534bf561ec589dc0b55e382bd75dcc7fed178bd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDUzNGJmNTYxZWM1ODlkYzBiNTVlMzgyYmQ3NWRjYzdmZWQxNzhiZA==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@redhat.com", "date": "2015-11-17T21:20:20Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2015-11-17T21:20:20Z"}, "message": "re PR target/66785 (internal compiler error in record_operand_use)\n\n\tPR target/66785\n\t* regrename.c (record_operand_use): Keep track of failed operands\n\tand stop appending if we see any.\n\t* regrename.h (struct operand_rr_info): Add a failed field and shrink\n\tn_chains to short.\n\nFrom-SVN: r230499", "tree": {"sha": "61d46e5bda78dd754da2636648d6443514972bea", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61d46e5bda78dd754da2636648d6443514972bea"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d534bf561ec589dc0b55e382bd75dcc7fed178bd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d534bf561ec589dc0b55e382bd75dcc7fed178bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d534bf561ec589dc0b55e382bd75dcc7fed178bd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d534bf561ec589dc0b55e382bd75dcc7fed178bd/comments", "author": null, "committer": null, "parents": [{"sha": "9f50f67c0bcb8b0a1723c6ce132e9f3b93a9134e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f50f67c0bcb8b0a1723c6ce132e9f3b93a9134e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f50f67c0bcb8b0a1723c6ce132e9f3b93a9134e"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "cdd7036a7fb328d1a9f4196a0386a355ba6b4966", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d534bf561ec589dc0b55e382bd75dcc7fed178bd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d534bf561ec589dc0b55e382bd75dcc7fed178bd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d534bf561ec589dc0b55e382bd75dcc7fed178bd", "patch": "@@ -1,3 +1,11 @@\n+2015-11-17  Bernd Schmidt  <bschmidt@redhat.com>\n+\n+\tPR target/66785\n+\t* regrename.c (record_operand_use): Keep track of failed operands\n+\tand stop appending if we see any.\n+\t* regrename.h (struct operand_rr_info): Add a failed field and shrink\n+\tn_chains to short.\n+\n 2015-11-17  Sandra Loosemore  <sandra@codesourcery.com>\n \n \tPR 48568"}, {"sha": "e126fcc74039ca0467411bdd15c2b1bd3ee9489a", "filename": "gcc/regrename.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d534bf561ec589dc0b55e382bd75dcc7fed178bd/gcc%2Fregrename.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d534bf561ec589dc0b55e382bd75dcc7fed178bd/gcc%2Fregrename.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregrename.c?ref=d534bf561ec589dc0b55e382bd75dcc7fed178bd", "patch": "@@ -203,8 +203,13 @@ mark_conflict (struct du_head *chains, unsigned id)\n static void\n record_operand_use (struct du_head *head, struct du_chain *this_du)\n {\n-  if (cur_operand == NULL)\n+  if (cur_operand == NULL || cur_operand->failed)\n     return;\n+  if (head->cannot_rename)\n+    {\n+      cur_operand->failed = true;\n+      return;\n+    }\n   gcc_assert (cur_operand->n_chains < MAX_REGS_PER_ADDRESS);\n   cur_operand->heads[cur_operand->n_chains] = head;\n   cur_operand->chains[cur_operand->n_chains++] = this_du;"}, {"sha": "801e0d25278bbfb4e3fe96e92fbf1b38f8a4684d", "filename": "gcc/regrename.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d534bf561ec589dc0b55e382bd75dcc7fed178bd/gcc%2Fregrename.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d534bf561ec589dc0b55e382bd75dcc7fed178bd/gcc%2Fregrename.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fregrename.h?ref=d534bf561ec589dc0b55e382bd75dcc7fed178bd", "patch": "@@ -72,7 +72,8 @@ struct du_chain\n struct operand_rr_info\n {\n   /* The number of chains recorded for this operand.  */\n-  int n_chains;\n+  short n_chains;\n+  bool failed;\n   /* Holds either the chain for the operand itself, or for the registers in\n      a memory operand.  */\n   struct du_chain *chains[MAX_REGS_PER_ADDRESS];"}]}