{"sha": "43e034308853a13ba3117b38a959268404210f15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDNlMDM0MzA4ODUzYTEzYmEzMTE3YjM4YTk1OTI2ODQwNDIxMGYxNQ==", "commit": {"author": {"name": "Hans-Peter Nilsson", "email": "hp@axis.com", "date": "2007-03-15T09:14:37Z"}, "committer": {"name": "Hans-Peter Nilsson", "email": "hp@gcc.gnu.org", "date": "2007-03-15T09:14:37Z"}, "message": "libstdc++.exp (v3-build_support): If it exists, use env(AR_FOR_TARGET).\n\n\t* testsuite/lib/libstdc++.exp (v3-build_support) <ar>: If it\n\texists, use env(AR_FOR_TARGET).  Log the command.\n\t<ranlib>: Similar.\n\nFrom-SVN: r122950", "tree": {"sha": "b85004d0dc6d44dd1adbdd51d74981640d2a93cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b85004d0dc6d44dd1adbdd51d74981640d2a93cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/43e034308853a13ba3117b38a959268404210f15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43e034308853a13ba3117b38a959268404210f15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43e034308853a13ba3117b38a959268404210f15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43e034308853a13ba3117b38a959268404210f15/comments", "author": {"login": "hpataxisdotcom", "id": 80339731, "node_id": "MDQ6VXNlcjgwMzM5NzMx", "avatar_url": "https://avatars.githubusercontent.com/u/80339731?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hpataxisdotcom", "html_url": "https://github.com/hpataxisdotcom", "followers_url": "https://api.github.com/users/hpataxisdotcom/followers", "following_url": "https://api.github.com/users/hpataxisdotcom/following{/other_user}", "gists_url": "https://api.github.com/users/hpataxisdotcom/gists{/gist_id}", "starred_url": "https://api.github.com/users/hpataxisdotcom/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hpataxisdotcom/subscriptions", "organizations_url": "https://api.github.com/users/hpataxisdotcom/orgs", "repos_url": "https://api.github.com/users/hpataxisdotcom/repos", "events_url": "https://api.github.com/users/hpataxisdotcom/events{/privacy}", "received_events_url": "https://api.github.com/users/hpataxisdotcom/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "c123d98fc605569d999ca1e6a9266419e8607ae6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c123d98fc605569d999ca1e6a9266419e8607ae6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c123d98fc605569d999ca1e6a9266419e8607ae6"}], "stats": {"total": 21, "additions": 19, "deletions": 2}, "files": [{"sha": "e042e395628dbe56b67ba6a075154c61c9ae57ba", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43e034308853a13ba3117b38a959268404210f15/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43e034308853a13ba3117b38a959268404210f15/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=43e034308853a13ba3117b38a959268404210f15", "patch": "@@ -1,3 +1,9 @@\n+2007-03-15  Hans-Peter Nilsson  <hp@axis.com>\n+\n+\t* testsuite/lib/libstdc++.exp (v3-build_support) <ar>: If it\n+\texists, use env(AR_FOR_TARGET).  Log the command.\n+\t<ranlib>: Similar.\n+\n 2007-03-14  Nathan Sidwell  <nathan@codesourcery.com>\n \t    Joseph Myers  <joseph@codesourcery.com>::\n "}, {"sha": "79cbd9b1e882aa0625f30402843f7ea605773387", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 13, "deletions": 2, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43e034308853a13ba3117b38a959268404210f15/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43e034308853a13ba3117b38a959268404210f15/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=43e034308853a13ba3117b38a959268404210f15", "patch": "@@ -401,6 +401,7 @@ proc v3_target_compile_as_c { source dest type options } {\n # Build the support objects linked in with the libstdc++ tests.  In\n # addition, set v3-wchar_t, v3-threads, and v3-symver appropriately.\n proc v3-build_support { } {\n+    global env\n     global srcdir\n     global v3-wchar_t\n     global v3-threads\n@@ -466,13 +467,23 @@ proc v3-build_support { } {\n     }\n \n     # Collect into libtestc++.a\n-    set ar [transform \"ar\"]\n+    if  [info exists env(AR_FOR_TARGET)] {\n+\tset ar $env(AR_FOR_TARGET)\n+    } else {\n+\tset ar [transform \"ar\"]\n+    }\n     set arcommand \"$ar -rc ./libtestc++.a ${libtest_objs}\"\n+    verbose -log \"$arcommand\"\n     set result [lindex [local_exec \"$arcommand\" \"\" \"\" 300] 0]\n     verbose \"link result is $result\"\n     if { $result == 0 } {\n-\tset ranlib [transform \"ranlib\"]\n+\tif  [info exists env(RANLIB_FOR_TARGET)] {\n+\t    set ranlib $env(RANLIB_FOR_TARGET)\n+\t} else {\n+\t    set ranlib [transform \"ranlib\"]\n+\t}\n \tset ranlibcommand \"$ranlib ./libtestc++.a\"\n+\tverbose -log \"$ranlibcommand\"\n \tset result [lindex [local_exec \"$ranlibcommand\" \"\" \"\" 300] 0]\n \tif { $result != 0 } {\n \t    error \"could not link libtestc++.a\""}]}