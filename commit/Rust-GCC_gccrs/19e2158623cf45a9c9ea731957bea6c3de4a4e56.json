{"sha": "19e2158623cf45a9c9ea731957bea6c3de4a4e56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTllMjE1ODYyM2NmNDVhOWM5ZWE3MzE5NTdiZWE2YzNkZTRhNGU1Ng==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-02-19T16:01:50Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-02-19T16:01:50Z"}, "message": "re PR c++/67767 (-Wsuggest-attribute=noreturn suggests noreturn for function which already has noreturn and cold.)\n\n\tPR c++/67767\n\t* parser.c (cp_parser_std_attribute_spec_seq): Don't assume\n\tattr_spec is always single element chain, chain all the attributes\n\tproperly together in the right order.\n\n\t* g++.dg/cpp0x/pr67767.C: New test.\n\nFrom-SVN: r233560", "tree": {"sha": "e5a018c85eb5153fd7dee63c69b092e027fefa0c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5a018c85eb5153fd7dee63c69b092e027fefa0c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19e2158623cf45a9c9ea731957bea6c3de4a4e56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19e2158623cf45a9c9ea731957bea6c3de4a4e56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19e2158623cf45a9c9ea731957bea6c3de4a4e56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19e2158623cf45a9c9ea731957bea6c3de4a4e56/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "2db16594fe8bebd0ea784d4b3004a8f0c1af7869", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2db16594fe8bebd0ea784d4b3004a8f0c1af7869", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2db16594fe8bebd0ea784d4b3004a8f0c1af7869"}], "stats": {"total": 33, "additions": 29, "deletions": 4}, "files": [{"sha": "12a3967114aba5f193afa8bdd63ff95ca8988e64", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=19e2158623cf45a9c9ea731957bea6c3de4a4e56", "patch": "@@ -1,3 +1,10 @@\n+2016-02-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/67767\n+\t* parser.c (cp_parser_std_attribute_spec_seq): Don't assume\n+\tattr_spec is always single element chain, chain all the attributes\n+\tproperly together in the right order.\n+\n 2016-02-18  Jason Merrill  <jason@redhat.com>\n \n \t* mangle.c (maybe_check_abi_tags): Add for_decl parm.  Call"}, {"sha": "53decdc16170d4fc47f0f4d37d318385ec249dbe", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=19e2158623cf45a9c9ea731957bea6c3de4a4e56", "patch": "@@ -24104,7 +24104,8 @@ cp_parser_std_attribute_spec (cp_parser *parser)\n static tree\n cp_parser_std_attribute_spec_seq (cp_parser *parser)\n {\n-  tree attr_specs = NULL;\n+  tree attr_specs = NULL_TREE;\n+  tree attr_last = NULL_TREE;\n \n   while (true)\n     {\n@@ -24114,11 +24115,13 @@ cp_parser_std_attribute_spec_seq (cp_parser *parser)\n       if (attr_spec == error_mark_node)\n \treturn error_mark_node;\n \n-      TREE_CHAIN (attr_spec) = attr_specs;\n-      attr_specs = attr_spec;\n+      if (attr_last)\n+\tTREE_CHAIN (attr_last) = attr_spec;\n+      else\n+\tattr_specs = attr_last = attr_spec;\n+      attr_last = tree_last (attr_last);\n     }\n \n-  attr_specs = nreverse (attr_specs);\n   return attr_specs;\n }\n "}, {"sha": "f916c9c7cdec010e02589056b7dd853ab2461853", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=19e2158623cf45a9c9ea731957bea6c3de4a4e56", "patch": "@@ -1,3 +1,8 @@\n+2016-02-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR c++/67767\n+\t* g++.dg/cpp0x/pr67767.C: New test.\n+\n 2016-02-19  Kyrylo Tkachov  <kyrylo.tkachov@arm.com>\n \n \t* lib/target-supports.exp: Define aarch64_asm_FUNC_ok checks"}, {"sha": "fd4ae2d3f3505f69561a686c83f32ac1ca68d9d8", "filename": "gcc/testsuite/g++.dg/cpp0x/pr67767.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr67767.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19e2158623cf45a9c9ea731957bea6c3de4a4e56/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr67767.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr67767.C?ref=19e2158623cf45a9c9ea731957bea6c3de4a4e56", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/67767\n+// { dg-do compile { target c++11 } }\n+// { dg-options \"-Wsuggest-attribute=noreturn\" }\n+\n+void foo [[gnu::cold, gnu::noreturn]] ();\n+\n+void foo ()\t// { dg-bogus \"function might be candidate for attribute\" }\n+{\n+  throw 1;\n+}"}]}