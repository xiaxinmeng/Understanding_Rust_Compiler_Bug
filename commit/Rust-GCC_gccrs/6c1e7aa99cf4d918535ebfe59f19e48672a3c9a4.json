{"sha": "6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmMxZTdhYTk5Y2Y0ZDkxODUzNWViZmU1OWYxOWU0ODY3MmEzYzlhNA==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2012-01-27T00:12:41Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-01-27T00:12:41Z"}, "message": "re PR c++/51370 (ICE with invalid template parameter)\n\n/cp\n2012-01-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51370\n\t* error.c (dump_decl, [TEMPLATE_ID_EXPR]): Handle error_mark_node\n\tas TREE_OPERAND (t, 1).\n\n/testsuite\n2012-01-26  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/51370\n\t* g++.dg/template/crash112.C: New.\n\nFrom-SVN: r183593", "tree": {"sha": "70ae8a313c996c6f87189a828815f740e18f5732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/70ae8a313c996c6f87189a828815f740e18f5732"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/comments", "author": null, "committer": null, "parents": [{"sha": "2fda54bd153102ac40092ac4f38a7d885257de37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2fda54bd153102ac40092ac4f38a7d885257de37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2fda54bd153102ac40092ac4f38a7d885257de37"}], "stats": {"total": 37, "additions": 33, "deletions": 4}, "files": [{"sha": "3df6d1102fc7a08713e45014ec24639b3d8f54cc", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "patch": "@@ -1,3 +1,9 @@\n+2012-01-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51370\n+\t* error.c (dump_decl, [TEMPLATE_ID_EXPR]): Handle error_mark_node\n+\tas TREE_OPERAND (t, 1).\n+\n 2012-01-24  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/51917"}, {"sha": "09c6caec9a42060854bba0f158eca6ce7359c34e", "filename": "gcc/cp/error.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "patch": "@@ -1,7 +1,7 @@\n /* Call-backs for C++ error reporting.\n    This code is non-reentrant.\n    Copyright (C) 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2002, 2003,\n-   2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011\n+   2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012\n    Free Software Foundation, Inc.\n    This file is part of GCC.\n \n@@ -1118,14 +1118,17 @@ dump_decl (tree t, int flags)\n     case TEMPLATE_ID_EXPR:\n       {\n \ttree name = TREE_OPERAND (t, 0);\n+\ttree args = TREE_OPERAND (t, 1);\n \n \tif (is_overloaded_fn (name))\n \t  name = DECL_NAME (get_first_fn (name));\n \tdump_decl (name, flags);\n \tpp_cxx_begin_template_argument_list (cxx_pp);\n-\tif (TREE_OPERAND (t, 1))\n-\t  dump_template_argument_list (TREE_OPERAND (t, 1), flags);\n-\tpp_cxx_end_template_argument_list (cxx_pp);\n+\tif (args == error_mark_node)\n+\t  pp_string (cxx_pp, M_(\"<template arguments error>\"));\n+\telse if (args)\n+\t  dump_template_argument_list (args, flags);\n+      \tpp_cxx_end_template_argument_list (cxx_pp);\n       }\n       break;\n "}, {"sha": "f24d26feb9e5fafbf926010a31dbb3ba0a630ac6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "patch": "@@ -1,3 +1,8 @@\n+2012-01-26  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/51370\n+\t* g++.dg/template/crash112.C: New.\n+\n 2012-01-27  Richard Henderson  <rth@redhat.com>\n \n \t* gcc.dg/atomic-flag.c: Adjust for __GCC_ATOMIC_TEST_AND_SET_TRUEVAL."}, {"sha": "919c887fd90534aad354a82f10365fe8caea4f32", "filename": "gcc/testsuite/g++.dg/template/crash112.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash112.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash112.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fcrash112.C?ref=6c1e7aa99cf4d918535ebfe59f19e48672a3c9a4", "patch": "@@ -0,0 +1,15 @@\n+// PR c++/51370\n+\n+struct A\n+{\n+  template<typename> void foo() {}\n+};\n+\n+template<void (A::*)()> struct B {}; // { dg-error \"declaration\" }\n+\n+template<int> struct C\n+{\n+  B<&A::foo<int int> > b; // { dg-error \"declaration|type\" }\n+};\n+\n+C<0> c;"}]}