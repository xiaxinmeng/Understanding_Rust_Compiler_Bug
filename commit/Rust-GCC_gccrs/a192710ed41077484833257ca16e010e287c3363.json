{"sha": "a192710ed41077484833257ca16e010e287c3363", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE5MjcxMGVkNDEwNzc0ODQ4MzMyNTdjYTE2ZTAxMGUyODdjMzM2Mw==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@TechFak.Uni-Bielefeld.DE", "date": "2003-09-17T17:40:05Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2003-09-17T17:40:05Z"}, "message": "re PR target/10190 ([IRIX] building gcc 3.2.2 on irix 5.3 fails)\n\n\t* config/mips/iris5.h (TARGET_OS_CPP_BUILTINS): Define _LONGLONG.\n\tDefine _ABIO32.\n\tUse it for _MIPS_SIM.\n\t* config/mips/iris6-o32.h (TARGET_OS_CPP_BUILTINS): Removed.\n\n\t* config/mips/iris6-o32-as.h (SUBTARGET_ASM_OPTIMIZING_SPEC):\n\tMoved ...\n\t* config/mips/iris5.h (SUBTARGET_ASM_OPTIMIZING_SPEC): ... here,\n\tupdating comment.\n\tFixes PR target/10190.\n\nFrom-SVN: r71465", "tree": {"sha": "d9edc00ca6901c0934b44f8fcc70822411c8da06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d9edc00ca6901c0934b44f8fcc70822411c8da06"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a192710ed41077484833257ca16e010e287c3363", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a192710ed41077484833257ca16e010e287c3363", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a192710ed41077484833257ca16e010e287c3363", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a192710ed41077484833257ca16e010e287c3363/comments", "author": null, "committer": null, "parents": [{"sha": "bdc225df147891d7b7d25248965c287e03f259f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdc225df147891d7b7d25248965c287e03f259f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdc225df147891d7b7d25248965c287e03f259f0"}], "stats": {"total": 87, "additions": 33, "deletions": 54}, "files": [{"sha": "517a876b2c6e2e03a47f07734ffc2fd931552527", "filename": "gcc/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a192710ed41077484833257ca16e010e287c3363/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a192710ed41077484833257ca16e010e287c3363/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a192710ed41077484833257ca16e010e287c3363", "patch": "@@ -1,3 +1,16 @@\n+2003-09-17  Rainer Orth  <ro@TechFak.Uni-Bielefeld.DE>\n+\n+\t* config/mips/iris5.h (TARGET_OS_CPP_BUILTINS): Define _LONGLONG.\n+\tDefine _ABIO32.\n+\tUse it for _MIPS_SIM.\n+\t* config/mips/iris6-o32.h (TARGET_OS_CPP_BUILTINS): Removed.\n+\n+\t* config/mips/iris6-o32-as.h (SUBTARGET_ASM_OPTIMIZING_SPEC):\n+\tMoved ...\n+\t* config/mips/iris5.h (SUBTARGET_ASM_OPTIMIZING_SPEC): ... here,\n+\tupdating comment.\n+\tFixes PR target/10190.\n+\n 2003-09-17  Daniel Jacobowitz  <drow@mvista.com>\n \n \t* config/rs6000/sysv4.h (LIB_LINUX_SPEC): Make -pthread apply"}, {"sha": "51f80dcac8777112f64bb43ea4fac7334d1b1b7a", "filename": "gcc/config/mips/iris5.h", "status": "modified", "additions": 20, "deletions": 1, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a192710ed41077484833257ca16e010e287c3363/gcc%2Fconfig%2Fmips%2Firis5.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a192710ed41077484833257ca16e010e287c3363/gcc%2Fconfig%2Fmips%2Firis5.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis5.h?ref=a192710ed41077484833257ca16e010e287c3363", "patch": "@@ -56,16 +56,23 @@ Boston, MA 02111-1307, USA.  */\n  (DEFAULT_WORD_SWITCH_TAKES_ARG (STR)\t\t\t\\\n   || !strcmp (STR, \"rpath\"))\n \n+/* We must pass -D_LONGLONG always, even when -ansi is used, because IRIX 5\n+   system header files require it.  This is OK, because gcc never warns\n+   when long long is used in system header files.  Alternatively, we can\n+   add support for the SGI builtin type __long_long.  */\n+\n #define TARGET_OS_CPP_BUILTINS()\t\t\t\\\n     do {\t\t\t\t\t\t\\\n \tbuiltin_define_std (\"host_mips\");\t\t\\\n \tbuiltin_define_std (\"sgi\");\t\t\t\\\n \tbuiltin_define_std (\"unix\");\t\t\t\\\n \tbuiltin_define_std (\"SYSTYPE_SVR4\");\t\t\\\n+\tbuiltin_define (\"_LONGLONG\");\t\t\t\\\n \tbuiltin_define (\"_MODERN_C\");\t\t\t\\\n \tbuiltin_define (\"_SVR4_SOURCE\");\t\t\\\n \tbuiltin_define (\"__DSO__\");\t\t\t\\\n-\tbuiltin_define (\"_MIPS_SIM=_MIPS_SIM_ABI32\");\t\\\n+\tbuiltin_define (\"_ABIO32=1\");\t\t\t\\\n+\tbuiltin_define (\"_MIPS_SIM=_ABIO32\");\t\t\\\n \tbuiltin_define (\"_MIPS_SZPTR=32\");\t\t\\\n \tbuiltin_assert (\"system=unix\");\t\t\t\\\n \tbuiltin_assert (\"system=svr4\");\t\t\t\\\n@@ -96,6 +103,18 @@ Boston, MA 02111-1307, USA.  */\n #undef SUBTARGET_CC1_SPEC\n #define SUBTARGET_CC1_SPEC \"%{static: -mno-abicalls}\"\n \n+/* Override mips.h default: the IRIX 5 assembler warns about -O3:\n+\n+   as1: Warning: <file>.s, line 1: Binasm file dictates -pic: 2\n+   uld:\n+   No ucode object file linked -- please use -O2 or lower.\n+   \n+   So avoid passing it in the first place.  */\n+#undef SUBTARGET_ASM_OPTIMIZING_SPEC\n+#define SUBTARGET_ASM_OPTIMIZING_SPEC \"\\\n+%{noasmopt:-O0} \\\n+%{!noasmopt:%{O|O1|O2|O3:-O2}}\"\n+\n #undef LINK_SPEC\n #define LINK_SPEC \"\\\n %{G*} %{EB} %{EL} %{mips1} %{mips2} %{mips3} \\"}, {"sha": "5cda89e13cf3e96dc6ceb4d3450d841c62199be2", "filename": "gcc/config/mips/iris6-o32-as.h", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a192710ed41077484833257ca16e010e287c3363/gcc%2Fconfig%2Fmips%2Firis6-o32-as.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a192710ed41077484833257ca16e010e287c3363/gcc%2Fconfig%2Fmips%2Firis6-o32-as.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6-o32-as.h?ref=a192710ed41077484833257ca16e010e287c3363", "patch": "@@ -1,17 +1,6 @@\n /* Definitions of target machine for GNU compiler, for MIPS running IRIX 6\n    (O32 ABI) using the SGI assembler.  */\n \n-/* Override mips.h default: the IRIX 6 O32 assembler warns about -O3:\n-\n-   as: Warning: -O3 is not supported for assembly compiles for ucode\n-   compilers; changing to -O2.\n-   \n-   So avoid passing it in the first place.  */\n-#undef SUBTARGET_ASM_OPTIMIZING_SPEC\n-#define SUBTARGET_ASM_OPTIMIZING_SPEC \"\\\n-%{noasmopt:-O0} \\\n-%{!noasmopt:%{O|O1|O2|O3:-O2}}\"\n-\n /* Enforce use of O32 linker, irrespective of SGI_ABI environment variable\n    and machine type (e.g., R8000 systems default to -64).  Copied from\n    iris5.h, only adding -32.  The default options -call_shared -no_unresolved"}, {"sha": "a525db163ae656da7af93af11ca97f2876e10d7d", "filename": "gcc/config/mips/iris6-o32.h", "status": "modified", "additions": 0, "deletions": 42, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a192710ed41077484833257ca16e010e287c3363/gcc%2Fconfig%2Fmips%2Firis6-o32.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a192710ed41077484833257ca16e010e287c3363/gcc%2Fconfig%2Fmips%2Firis6-o32.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Firis6-o32.h?ref=a192710ed41077484833257ca16e010e287c3363", "patch": "@@ -18,48 +18,6 @@\n #undef WINT_TYPE_SIZE\n #define WINT_TYPE_SIZE 32\n \n-/* Copied from iris5.h, with _MIPS_SIM definition adapted to SGI cc usage\n-   and -D_LONGLONG added as in iris6.h.  */\n-#undef TARGET_OS_CPP_BUILTINS\n-#define TARGET_OS_CPP_BUILTINS()\t\t\t\\\n-    do {\t\t\t\t\t\t\\\n-\tbuiltin_define_std (\"host_mips\");\t\t\\\n-\tbuiltin_define_std (\"sgi\");\t\t\t\\\n-\tbuiltin_define_std (\"unix\");\t\t\t\\\n-\tbuiltin_define_std (\"SYSTYPE_SVR4\");\t\t\\\n-\tbuiltin_define (\"_LONGLONG\");\t\t\t\\\n-\tbuiltin_define (\"_MODERN_C\");\t\t\t\\\n-\tbuiltin_define (\"_SVR4_SOURCE\");\t\t\\\n-\tbuiltin_define (\"__DSO__\");\t\t\t\\\n-\tbuiltin_define (\"_ABIO32=1\");\t\t\t\\\n-\tbuiltin_define (\"_MIPS_SIM=_ABIO32\");\t\t\\\n-\tbuiltin_define (\"_MIPS_SZPTR=32\");\t\t\\\n-\tbuiltin_assert (\"system=unix\");\t\t\t\\\n-\tbuiltin_assert (\"system=svr4\");\t\t\t\\\n-\tbuiltin_assert (\"machine=sgi\");\t\t\t\\\n-\t\t\t\t\t\t\t\\\n-     if (!TARGET_FLOAT64)                               \\\n-        builtin_define (\"_MIPS_FPSET=16\");              \\\n-     else                                               \\\n-        builtin_define (\"_MIPS_FPSET=32\");              \\\n-\t\t\t\t\t\t\t\\\n-     if (!TARGET_INT64)                                 \\\n-        builtin_define (\"_MIPS_SZINT=32\");              \\\n-     else                                               \\\n-        builtin_define (\"_MIPS_SZINT=64\");              \\\n-\t\t\t\t\t\t\t\\\n-     if (!TARGET_LONG64)\t\t\t\t\\\n-\tbuiltin_define (\"_MIPS_SZLONG=32\");\t\t\\\n-     else\t\t\t\t\t\t\\\n-\tbuiltin_define (\"_MIPS_SZLONG=64\");\t\t\\\n-\t\t\t\t\t\t\t\\\n-     if (!flag_iso)\t\t\t\t\t\\\n-       {\t\t\t\t\t\t\\\n-\t builtin_define (\"__EXTENSIONS__\");\t\t\\\n-\t builtin_define (\"_SGI_SOURCE\");\t\t\\\n-       }\t\t\t\t\t\t\\\n-} while (0);\n-\n /* Enforce use of O32 assembler, irrespective of SGI_ABI environment variable\n    and machine type (e.g., R8000 systems default to -64).  Gas doesn't need\n    this, but doesn't hurt either.  Need to pass -mips2 to gas which defaults"}]}