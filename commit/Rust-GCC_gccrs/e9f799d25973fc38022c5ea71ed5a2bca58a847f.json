{"sha": "e9f799d25973fc38022c5ea71ed5a2bca58a847f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTlmNzk5ZDI1OTczZmMzODAyMmM1ZWE3MWVkNWEyYmNhNThhODQ3Zg==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-04-17T07:22:51Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-04-17T07:22:51Z"}, "message": "Do not use HAVE_DOS_BASED_FILE_SYSTEM for Cygwin.\n\n\tPR gcov-profile/94570\n\t* ltmain.sh: Do not define HAVE_DOS_BASED_FILE_SYSTEM\n\tfor CYGWIN.\n\n\tPR gcov-profile/94570\n\t* coverage.c (coverage_init): Use separator properly.\n\n\tPR gcov-profile/94570\n\t* filenames.h (defined): Do not define HAVE_DOS_BASED_FILE_SYSTEM\n\tfor CYGWIN.\n\nCo-Authored-By: Jonathan Yong <10walls@gmail.com>", "tree": {"sha": "45d891055925f87dfb3bb0fd48d29cf1241e29c3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45d891055925f87dfb3bb0fd48d29cf1241e29c3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e9f799d25973fc38022c5ea71ed5a2bca58a847f", "comment_count": 0, "verification": {"verified": false, "reason": "unknown_key", "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEE6I4wzqqylQBfXaRhTcGC3A+nN4UFAl6ZWUsACgkQTcGC3A+n\nN4Uhkgf/Sf5Z+Mv9XcktsQnScTke/zixWKmtL532PS9Nht4k03Ks2ixJ2Mw75SIZ\nbglXHQSlXlmUmWYRpj+AgRZrmHu8mZCh/eAivV9gOhV39/HznBxzLrMsp9+zA4cN\nY5yfxRkPAvaFVAA7zvX4P7mLmjg3QNBQMyuNuo4vCrAWWkLEE9WWWO+VLwSIn74b\nx/gAIVygpxQ71/10aN+VT7oMXNzznYyoOUr0/B/t8KbQ6YfAn7PnaAK2T1CUpEjX\nEcyQ89zqCOx4AlOaAjpRueWMRsfdRxuFlb+V+VkO2JYsZaMfR4gU6DuzfuYG/OHq\nEVrWxNS1EzO5LBtXOOw/DY635nba5Q==\n=NhfU\n-----END PGP SIGNATURE-----", "payload": "tree 45d891055925f87dfb3bb0fd48d29cf1241e29c3\nparent 61b58e7fa5aea3ef0c7db2d9f75d17d65dff56a3\nauthor Martin Liska <mliska@suse.cz> 1587108171 +0200\ncommitter Martin Liska <mliska@suse.cz> 1587108171 +0200\n\nDo not use HAVE_DOS_BASED_FILE_SYSTEM for Cygwin.\n\n\tPR gcov-profile/94570\n\t* ltmain.sh: Do not define HAVE_DOS_BASED_FILE_SYSTEM\n\tfor CYGWIN.\n\n\tPR gcov-profile/94570\n\t* coverage.c (coverage_init): Use separator properly.\n\n\tPR gcov-profile/94570\n\t* filenames.h (defined): Do not define HAVE_DOS_BASED_FILE_SYSTEM\n\tfor CYGWIN.\n\nCo-Authored-By: Jonathan Yong <10walls@gmail.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9f799d25973fc38022c5ea71ed5a2bca58a847f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9f799d25973fc38022c5ea71ed5a2bca58a847f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9f799d25973fc38022c5ea71ed5a2bca58a847f/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "61b58e7fa5aea3ef0c7db2d9f75d17d65dff56a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61b58e7fa5aea3ef0c7db2d9f75d17d65dff56a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61b58e7fa5aea3ef0c7db2d9f75d17d65dff56a3"}], "stats": {"total": 39, "additions": 30, "deletions": 9}, "files": [{"sha": "6cbf28a7f2985eb74dae30d183035ba8798ba377", "filename": "ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f799d25973fc38022c5ea71ed5a2bca58a847f/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f799d25973fc38022c5ea71ed5a2bca58a847f/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=e9f799d25973fc38022c5ea71ed5a2bca58a847f", "patch": "@@ -1,3 +1,10 @@\n+2020-04-17  Martin Liska  <mliska@suse.cz>\n+\t    Jonathan Yong <10walls@gmail.com>\n+\n+\tPR gcov-profile/94570\n+\t* ltmain.sh: Do not define HAVE_DOS_BASED_FILE_SYSTEM\n+\tfor CYGWIN.\n+\n 2020-04-14  Martin Jambor  <mjambor@suse.cz>\n \n \t* MAINTAINERS (Reviewers): Add myself as callgraph (IPA) reviewer."}, {"sha": "80a37618d75346943c6a85ac84143aab8cd262d0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f799d25973fc38022c5ea71ed5a2bca58a847f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f799d25973fc38022c5ea71ed5a2bca58a847f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e9f799d25973fc38022c5ea71ed5a2bca58a847f", "patch": "@@ -1,3 +1,9 @@\n+2020-04-17  Martin Liska  <mliska@suse.cz>\n+\t    Jonathan Yong <10walls@gmail.com>\n+\n+\tPR gcov-profile/94570\n+\t* coverage.c (coverage_init): Use separator properly.\n+\n 2020-04-16  Peter Bergner  <bergner@linux.ibm.com>\n \n \tPR rtl-optimization/93974"}, {"sha": "7d82e44c1524c001b670574a814d387d6c4ea889", "filename": "gcc/coverage.c", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f799d25973fc38022c5ea71ed5a2bca58a847f/gcc%2Fcoverage.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f799d25973fc38022c5ea71ed5a2bca58a847f/gcc%2Fcoverage.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoverage.c?ref=e9f799d25973fc38022c5ea71ed5a2bca58a847f", "patch": "@@ -1200,6 +1200,11 @@ coverage_obj_finish (vec<constructor_elt, va_gc> *ctor)\n void\n coverage_init (const char *filename)\n {\n+#if HAVE_DOS_BASED_FILE_SYSTEM\n+  const char *separator = \"\\\\\";\n+#else\n+  const char *separator = \"/\";\n+#endif\n   int len = strlen (filename);\n   int prefix_len = 0;\n \n@@ -1216,11 +1221,6 @@ coverage_init (const char *filename)\n \t of filename in order to prevent file path clashing.  */\n       if (profile_data_prefix)\n \t{\n-#if HAVE_DOS_BASED_FILE_SYSTEM\n-\t  const char *separator = \"\\\\\";\n-#else\n-\t  const char *separator = \"/\";\n-#endif\n \t  filename = concat (getpwd (), separator, filename, NULL);\n \t  if (profile_prefix_path)\n \t    {\n@@ -1252,7 +1252,7 @@ coverage_init (const char *filename)\n   if (profile_data_prefix)\n     {\n       memcpy (da_file_name, profile_data_prefix, prefix_len);\n-      da_file_name[prefix_len++] = '/';\n+      da_file_name[prefix_len++] = *separator;\n     }\n   memcpy (da_file_name + prefix_len, filename, len);\n   strcpy (da_file_name + prefix_len + len, GCOV_DATA_SUFFIX);"}, {"sha": "bbfd6a674cfed4efffd946e72e9e7e20aab9aa17", "filename": "include/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f799d25973fc38022c5ea71ed5a2bca58a847f/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f799d25973fc38022c5ea71ed5a2bca58a847f/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=e9f799d25973fc38022c5ea71ed5a2bca58a847f", "patch": "@@ -1,3 +1,10 @@\n+2020-04-17  Martin Liska  <mliska@suse.cz>\n+\t    Jonathan Yong <10walls@gmail.com>\n+\n+\tPR gcov-profile/94570\n+\t* filenames.h (defined): Do not define HAVE_DOS_BASED_FILE_SYSTEM\n+\tfor CYGWIN.\n+\n 2020-04-01 Maciej W. Rozycki <macro@linux-mips.org>\n \n \tPR lto/94249"}, {"sha": "fcde22767de2a8aa57b5e89e5d799a524674e860", "filename": "include/filenames.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f799d25973fc38022c5ea71ed5a2bca58a847f/include%2Ffilenames.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f799d25973fc38022c5ea71ed5a2bca58a847f/include%2Ffilenames.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Ffilenames.h?ref=e9f799d25973fc38022c5ea71ed5a2bca58a847f", "patch": "@@ -32,7 +32,8 @@ Foundation, Inc., 51 Franklin Street - Fifth Floor, Boston, MA 02110-1301, USA.\n extern \"C\" {\n #endif\n \n-#if defined(__MSDOS__) || defined(_WIN32) || defined(__OS2__) || defined (__CYGWIN__)\n+#if defined(__MSDOS__) || (defined(_WIN32) && ! defined(__CYGWIN__)) || \\\n+    defined(__OS2__)\n #  ifndef HAVE_DOS_BASED_FILE_SYSTEM\n #    define HAVE_DOS_BASED_FILE_SYSTEM 1\n #  endif"}, {"sha": "70990740b6c4719bc9393036ed2e94196daff86f", "filename": "ltmain.sh", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e9f799d25973fc38022c5ea71ed5a2bca58a847f/ltmain.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e9f799d25973fc38022c5ea71ed5a2bca58a847f/ltmain.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ltmain.sh?ref=e9f799d25973fc38022c5ea71ed5a2bca58a847f", "patch": "@@ -3425,8 +3425,8 @@ int setenv (const char *, const char *, int);\n # define PATH_SEPARATOR ':'\n #endif\n \n-#if defined (_WIN32) || defined (__MSDOS__) || defined (__DJGPP__) || \\\n-  defined (__OS2__)\n+#if (defined (_WIN32) && ! defined(__CYGWIN__)) || defined (__MSDOS__) || \\\n+  defined (__DJGPP__) || defined (__OS2__)\n # define HAVE_DOS_BASED_FILE_SYSTEM\n # define FOPEN_WB \"wb\"\n # ifndef DIR_SEPARATOR_2"}]}