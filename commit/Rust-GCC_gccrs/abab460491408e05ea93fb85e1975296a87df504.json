{"sha": "abab460491408e05ea93fb85e1975296a87df504", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWJhYjQ2MDQ5MTQwOGUwNWVhOTNmYjg1ZTE5NzUyOTZhODdkZjUwNA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2006-08-14T21:25:03Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2006-08-14T21:25:03Z"}, "message": "re PR c++/28559 (ICE with friend and __attribute__)\n\n        PR c++/28559\n        * parser.c (cp_parser_elaborated_type_specifier): Also ignore\n        attributes applied to a TYPENAME_TYPE.\n\nFrom-SVN: r116137", "tree": {"sha": "8b0000f42607a1b7c2cce7d1b4ee05aff25755f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b0000f42607a1b7c2cce7d1b4ee05aff25755f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/abab460491408e05ea93fb85e1975296a87df504", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abab460491408e05ea93fb85e1975296a87df504", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abab460491408e05ea93fb85e1975296a87df504", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abab460491408e05ea93fb85e1975296a87df504/comments", "author": null, "committer": null, "parents": [{"sha": "96ff6c8cc015ce042ecfe95e84cfda69fd159e58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96ff6c8cc015ce042ecfe95e84cfda69fd159e58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96ff6c8cc015ce042ecfe95e84cfda69fd159e58"}], "stats": {"total": 54, "additions": 37, "deletions": 17}, "files": [{"sha": "5737a628211b6dcfb3847ff6a928f031a66c8040", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 21, "deletions": 15, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abab460491408e05ea93fb85e1975296a87df504/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abab460491408e05ea93fb85e1975296a87df504/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=abab460491408e05ea93fb85e1975296a87df504", "patch": "@@ -1,27 +1,33 @@\n+2006-08-11  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/28559\n+\t* parser.c (cp_parser_elaborated_type_specifier): Also ignore\n+\tattributes applied to a TYPENAME_TYPE.\n+\n 2006-08-09  Lee Millward  <lee.millward@codesourcery.com>\n \n-       PR c++/28637\n-       * pt.c (coerce_template_parms): Copy across the\n-       invalid template arguments to the new template inner arguments.\n-       (retrieve_specialization): Robustify.\n+\tPR c++/28637\n+\t* pt.c (coerce_template_parms): Copy across the\n+\tinvalid template arguments to the new template inner arguments.\n+\t(retrieve_specialization): Robustify.\n \n-       PR c++/28638\n-       * pt.c (coerce_template_template_parms): Robustify.\n+\tPR c++/28638\n+\t* pt.c (coerce_template_template_parms): Robustify.\n \n-       PR c++/28639\n-       * error.c (dump_template_parms): Robustify.\n+\tPR c++/28639\n+\t* error.c (dump_template_parms): Robustify.\n \n-       PR c++/28640\n-       * pt.c (redeclare_class_template): Robustify.\n+\tPR c++/28640\n+\t* pt.c (redeclare_class_template): Robustify.\n \n-       PR c++/28641\n-       * pt.c (type_unification_real): Robustify.\n+\tPR c++/28641\n+\t* pt.c (type_unification_real): Robustify.\n \t\n 2006-08-03  Lee Millward  <lee.millward@codesourcery.com>\n \n-       PR c++/28347\n-       * decl.c (start_decl): Return error_mark_node if a\n-       diagnostic was issed for an invalid typedef initialization.\n+\tPR c++/28347\n+\t* decl.c (start_decl): Return error_mark_node if a\n+\tdiagnostic was issed for an invalid typedef initialization.\n \t\n 2006-08-03  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n "}, {"sha": "35ce410e38f6462ffd66585c421566e2cc20436d", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abab460491408e05ea93fb85e1975296a87df504/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abab460491408e05ea93fb85e1975296a87df504/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=abab460491408e05ea93fb85e1975296a87df504", "patch": "@@ -10268,8 +10268,11 @@ cp_parser_elaborated_type_specifier (cp_parser* parser,\n   /* Allow attributes on forward declarations of classes.  */\n   if (attributes)\n     {\n-      if (tag_type != enum_type && CLASSTYPE_TEMPLATE_INSTANTIATION (type)\n-\t  && ! processing_explicit_instantiation)\n+      if (TREE_CODE (type) == TYPENAME_TYPE)\n+\twarning (OPT_Wattributes,\n+\t\t \"attributes ignored on uninstantiated type\");\n+      else if (tag_type != enum_type && CLASSTYPE_TEMPLATE_INSTANTIATION (type)\n+\t       && ! processing_explicit_instantiation)\n \twarning (OPT_Wattributes,\n \t\t \"attributes ignored on template instantiation\");\n       else if (is_declaration && cp_parser_declares_only_class_p (parser))"}, {"sha": "aeffdffe30a7ff4fe6c7b099366c01cc0e4abd32", "filename": "gcc/testsuite/g++.dg/ext/attrib25.C", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abab460491408e05ea93fb85e1975296a87df504/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib25.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abab460491408e05ea93fb85e1975296a87df504/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib25.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fext%2Fattrib25.C?ref=abab460491408e05ea93fb85e1975296a87df504", "patch": "@@ -0,0 +1,11 @@\n+// PR c++/28559\n+\n+template<typename T> struct A\n+{\n+  struct B;\n+};\n+\n+struct C\n+{\n+  template<typename T> friend struct __attribute__((packed)) A<T>::B; // { dg-warning \"uninstantiated\" }\n+};"}]}