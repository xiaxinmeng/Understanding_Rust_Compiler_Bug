{"sha": "a53c50249f684027ef6ca3957b0811e4ecb233e7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTUzYzUwMjQ5ZjY4NDAyN2VmNmNhMzk1N2IwODExZTRlY2IyMzNlNw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2011-05-19T08:49:28Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2011-05-19T08:49:28Z"}, "message": "re PR middle-end/45098 (Missed induction variable optimization)\n\n2011-05-19  Tom de Vries  <tom@codesourcery.com>\n\n\tPR target/45098\n\t* tree-ssa-loop-ivopts.c (determine_iv_cost): Prevent\n\tcost_base.cost == 0.\n\nFrom-SVN: r173893", "tree": {"sha": "f13f50496860123c6188318e07c9afc090ed8d7c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f13f50496860123c6188318e07c9afc090ed8d7c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a53c50249f684027ef6ca3957b0811e4ecb233e7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a53c50249f684027ef6ca3957b0811e4ecb233e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a53c50249f684027ef6ca3957b0811e4ecb233e7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a53c50249f684027ef6ca3957b0811e4ecb233e7/comments", "author": null, "committer": null, "parents": [{"sha": "5bbe9958e05e80c215373311963ec9c31751ebca", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bbe9958e05e80c215373311963ec9c31751ebca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bbe9958e05e80c215373311963ec9c31751ebca"}], "stats": {"total": 11, "additions": 11, "deletions": 0}, "files": [{"sha": "a3ce4ef982d6749fa00f2c16e70df7902a4d1283", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a53c50249f684027ef6ca3957b0811e4ecb233e7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a53c50249f684027ef6ca3957b0811e4ecb233e7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a53c50249f684027ef6ca3957b0811e4ecb233e7", "patch": "@@ -1,3 +1,9 @@\n+2011-05-19  Tom de Vries  <tom@codesourcery.com>\n+\n+\tPR target/45098\n+\t* tree-ssa-loop-ivopts.c (determine_iv_cost): Prevent\n+\tcost_base.cost == 0.\n+\n 2011-05-18  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR target/49002"}, {"sha": "1580aec006a3945df657f1d0047d1d43ff089d5d", "filename": "gcc/tree-ssa-loop-ivopts.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a53c50249f684027ef6ca3957b0811e4ecb233e7/gcc%2Ftree-ssa-loop-ivopts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a53c50249f684027ef6ca3957b0811e4ecb233e7/gcc%2Ftree-ssa-loop-ivopts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-loop-ivopts.c?ref=a53c50249f684027ef6ca3957b0811e4ecb233e7", "patch": "@@ -4690,6 +4690,11 @@ determine_iv_cost (struct ivopts_data *data, struct iv_cand *cand)\n \n   base = cand->iv->base;\n   cost_base = force_var_cost (data, base, NULL);\n+  /* It will be exceptional that the iv register happens to be initialized with\n+     the proper value at no cost.  In general, there will at least be a regcopy\n+     or a const set.  */\n+  if (cost_base.cost == 0)\n+    cost_base.cost = COSTS_N_INSNS (1);\n   cost_step = add_cost (TYPE_MODE (TREE_TYPE (base)), data->speed);\n \n   cost = cost_step + adjust_setup_cost (data, cost_base.cost);"}]}