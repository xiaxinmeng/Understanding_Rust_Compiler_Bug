{"sha": "b73f64948e86b6003bbfe5691b5c45ef6347eb00", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjczZjY0OTQ4ZTg2YjYwMDNiYmZlNTY5MWI1YzQ1ZWY2MzQ3ZWIwMA==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2001-11-20T00:38:56Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@gcc.gnu.org", "date": "2001-11-20T00:38:56Z"}, "message": "* gcc.c-dg/altivec.c: New.\n\nFrom-SVN: r47191", "tree": {"sha": "17ab20efb7daa6af25d1e2abb5c32ac0eb4fa3c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17ab20efb7daa6af25d1e2abb5c32ac0eb4fa3c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b73f64948e86b6003bbfe5691b5c45ef6347eb00", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b73f64948e86b6003bbfe5691b5c45ef6347eb00", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b73f64948e86b6003bbfe5691b5c45ef6347eb00", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b73f64948e86b6003bbfe5691b5c45ef6347eb00/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1578fa9545eb2ddfa81f70f56a0088d9b7078b0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1578fa9545eb2ddfa81f70f56a0088d9b7078b0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1578fa9545eb2ddfa81f70f56a0088d9b7078b0d"}], "stats": {"total": 86, "additions": 86, "deletions": 0}, "files": [{"sha": "8372ca2d9320bc5480ff86ab05ac9724a2e74edf", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b73f64948e86b6003bbfe5691b5c45ef6347eb00/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b73f64948e86b6003bbfe5691b5c45ef6347eb00/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b73f64948e86b6003bbfe5691b5c45ef6347eb00", "patch": "@@ -1,3 +1,7 @@\n+2001-11-19  Aldy Hernandez  <aldyh@redhat.com>\n+\n+        * gcc.dg/altivec-1.c: New.\n+\n 2001-11-19  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* gcc.dg/cpp/fpreprocessed.c: New test case."}, {"sha": "e68757e2095538ad59e70cdc8e0130a38772c20a", "filename": "gcc/testsuite/gcc.dg/altivec-1.c", "status": "added", "additions": 82, "deletions": 0, "changes": 82, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b73f64948e86b6003bbfe5691b5c45ef6347eb00/gcc%2Ftestsuite%2Fgcc.dg%2Faltivec-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b73f64948e86b6003bbfe5691b5c45ef6347eb00/gcc%2Ftestsuite%2Fgcc.dg%2Faltivec-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Faltivec-1.c?ref=b73f64948e86b6003bbfe5691b5c45ef6347eb00", "patch": "@@ -0,0 +1,82 @@\n+/* { dg-do run { target powerpc-*altivec powerpc-*-*-*altivec } } */\n+/* { dg-options \"-maltivec\" } */\n+\n+/* Program to test PowerPC AltiVec instructions.  */\n+\n+/* These macros are not analogous to the overloaded functions\n+   described in Motorola's AltiVec Programming Interface Manual.\n+   These are just here for readability.  Eventually we'll get the\n+   overloaded functions implemented in an <altivec.h>.  */\n+\n+#define vec_load(src) \\\n+  __builtin_altivec_ld_internal ((int *) src)\n+\n+#define vec_store(dst, src) \\\n+  __builtin_altivec_st_internal ((int *) dst, (int4) src)\n+\n+#define vec_add_int4(x, y) \\\n+  __builtin_altivec_vaddsws (x, y)\n+\n+#define vec_add_float4(x, y) \\\n+  __builtin_altivec_vaddfp (x, y)\n+\n+#define vec_average_int4(x, y) \\\n+  __builtin_altivec_vavgsw (x, y)\n+\n+typedef int int4 __attribute__ ((mode(V4SI)));\n+typedef float float4 __attribute__ ((mode(V4SF)));\n+\n+int a1[4] __attribute__((aligned(16))) = { 100, 200, 300, 400 };\n+int a2[4] __attribute__((aligned(16))) = { 500, 600, 700, 800 };\n+int a3[4] __attribute__((aligned(16)));\n+int addi[4] = { 600, 800, 1000, 1200 };\n+int avgi[4] = { 300, 400, 500, 600 };\n+\n+float f1[4] __attribute__((aligned(16))) = { 1.0, 2.0, 3.0, 4.0 };  \n+float f2[4] __attribute__((aligned(16))) = { 5.0, 6.0, 7.0, 8.0 };\n+float f3[4] __attribute__((aligned(16)));\n+float addf[4] = { 6.0, 8.0, 10.0, 12.0 };\n+\n+int4 i, j, k;\n+float4 f, g, h;\n+\n+void\n+compare_int4 (int *a, int *b)\n+{\n+  int i;\n+\n+  for (i = 0; i < 4; ++i)\n+    if (a[i] != b[i])\n+      exit (1);\n+}\n+\n+void\n+compare_float4 (float *a, float *b)\n+{\n+  int i;\n+\n+  for (i = 0; i < 4; ++i)\n+    if (a[i] != b[i])\n+      exit (1);\n+}\n+\n+main ()\n+{\n+  i = vec_load (a1);\n+  j = vec_load (a2);\n+  k = vec_add_int4 (i, j);\n+  vec_store (a3, k);\n+  compare_int4 (a3, addi);\n+\n+  k = vec_average_int4 (i, j);\n+  vec_store (a3, k);\n+  compare_int4 (a3, avgi);\n+\n+  f = (float4) vec_load (f1);\n+  g = (float4) vec_load (f2);\n+  h = vec_add_float4 (f, g);\n+  vec_store (f3, h);\n+  compare_float4 (f3, addf);\n+\n+  exit (0);\n+}"}]}