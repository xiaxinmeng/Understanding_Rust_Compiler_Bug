{"sha": "210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjEwZmVmMmQxYzdiNDdjMDU4NzM3NWQ4N2Q0ZjRhNjVmMjhjYTU3ZQ==", "commit": {"author": {"name": "Piotr Trojanek", "email": "trojanek@adacore.com", "date": "2018-01-11T08:52:43Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-01-11T08:52:43Z"}, "message": "[Ada] Annotate standard File_Type with Default_Initial_Condition (for SPARK)\n\nGNATprove was emitting spurious checks about objects of the File_Type being\nuninitialized and there was no easy to fix that (those checks could only be\nsilenced by pragma Annotate or by hiding File_Type behind as SPARK wrapper).\n\nNow the full view of File_Type is annotated with Default_Initial_Condition\nand GNATprove knows that objects of that type are default-initialized. The\ndefault initialization is implicitly defined in the Ada RM (as indeed\nthere is no procedure that would take an IN OUT parameter of that type).\n\nSemantics of Ada programs shall not be affected by these annotations,\nso no frontend test is provided. It only affects GNATprove.\n\n2018-01-11  Piotr Trojanek  <trojanek@adacore.com>\n\ngcc/ada/\n\n\t* libgnat/a-direio.ads, libgnat/a-sequio.ads, libgnat/a-ststio.ads,\n\tlibgnat/a-textio.ads, libgnat/a-witeio.ads, libgnat/a-ztexio.ads\n\t(File_Type): Add Default_Initial_Condition aspect.\n\nFrom-SVN: r256502", "tree": {"sha": "438021dd8743590fef0f8530f4733004adeeef89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/438021dd8743590fef0f8530f4733004adeeef89"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/comments", "author": {"login": "ptroja", "id": 161602, "node_id": "MDQ6VXNlcjE2MTYwMg==", "avatar_url": "https://avatars.githubusercontent.com/u/161602?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ptroja", "html_url": "https://github.com/ptroja", "followers_url": "https://api.github.com/users/ptroja/followers", "following_url": "https://api.github.com/users/ptroja/following{/other_user}", "gists_url": "https://api.github.com/users/ptroja/gists{/gist_id}", "starred_url": "https://api.github.com/users/ptroja/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ptroja/subscriptions", "organizations_url": "https://api.github.com/users/ptroja/orgs", "repos_url": "https://api.github.com/users/ptroja/repos", "events_url": "https://api.github.com/users/ptroja/events{/privacy}", "received_events_url": "https://api.github.com/users/ptroja/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7d1553e2b65506288b554e948856e9330cee3e5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d1553e2b65506288b554e948856e9330cee3e5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d1553e2b65506288b554e948856e9330cee3e5f"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "9c104eceabd6abd996bfcff590e37dcb6fadda87", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -1,3 +1,9 @@\n+2018-01-11  Piotr Trojanek  <trojanek@adacore.com>\n+\n+\t* libgnat/a-direio.ads, libgnat/a-sequio.ads, libgnat/a-ststio.ads,\n+\tlibgnat/a-textio.ads, libgnat/a-witeio.ads, libgnat/a-ztexio.ads\n+\t(File_Type): Add Default_Initial_Condition aspect.\n+\n 2018-01-11  Pascal Obry  <obry@adacore.com>\n \n \t* libgnat/s-os_lib.adb (Normalize_Pathname): New implementation."}, {"sha": "fced84c01bddf10bd8dac608636ba40da239539f", "filename": "gcc/ada/libgnat/a-direio.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-direio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-direio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-direio.ads?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -50,7 +50,7 @@ package Ada.Direct_IO is\n      (Element_Type'Has_Tagged_Values,\n       \"Element_Type for Direct_IO instance has tagged values\");\n \n-   type File_Type is limited private;\n+   type File_Type is limited private with Default_Initial_Condition;\n \n    type File_Mode is (In_File, Inout_File, Out_File);\n "}, {"sha": "6877367539726232ed39de3d2cfbfba25695899b", "filename": "gcc/ada/libgnat/a-sequio.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-sequio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-sequio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-sequio.ads?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -50,7 +50,7 @@ package Ada.Sequential_IO is\n      (Element_Type'Has_Tagged_Values,\n       \"Element_Type for Sequential_IO instance has tagged values\");\n \n-   type File_Type is limited private;\n+   type File_Type is limited private with Default_Initial_Condition;\n \n    type File_Mode is (In_File, Out_File, Append_File);\n "}, {"sha": "7349aea87af5e230e819905c07372d324177d6c5", "filename": "gcc/ada/libgnat/a-ststio.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-ststio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-ststio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-ststio.ads?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -41,7 +41,7 @@ package Ada.Streams.Stream_IO is\n \n    type Stream_Access is access all Root_Stream_Type'Class;\n \n-   type File_Type is limited private;\n+   type File_Type is limited private with Default_Initial_Condition;\n \n    type File_Mode is (In_File, Out_File, Append_File);\n "}, {"sha": "33ba5fca5a110b0e2760f6896d045a13f324a1f4", "filename": "gcc/ada/libgnat/a-textio.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-textio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-textio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-textio.ads?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -49,7 +49,7 @@ with System.WCh_Con;\n package Ada.Text_IO is\n    pragma Elaborate_Body;\n \n-   type File_Type is limited private;\n+   type File_Type is limited private with Default_Initial_Condition;\n    type File_Mode is (In_File, Out_File, Append_File);\n \n    --  The following representation clause allows the use of unchecked"}, {"sha": "578149bfa7e42330c0a0500e538b458ef360f155", "filename": "gcc/ada/libgnat/a-witeio.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-witeio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-witeio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-witeio.ads?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -51,7 +51,7 @@ with System.WCh_Con;\n \n package Ada.Wide_Text_IO is\n \n-   type File_Type is limited private;\n+   type File_Type is limited private with Default_Initial_Condition;\n    type File_Mode is (In_File, Out_File, Append_File);\n \n    --  The following representation clause allows the use of unchecked"}, {"sha": "efcd5028dd93d00a80611caf138278056d398a4a", "filename": "gcc/ada/libgnat/a-ztexio.ads", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-ztexio.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/210fef2d1c7b47c0587375d87d4f4a65f28ca57e/gcc%2Fada%2Flibgnat%2Fa-ztexio.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Flibgnat%2Fa-ztexio.ads?ref=210fef2d1c7b47c0587375d87d4f4a65f28ca57e", "patch": "@@ -51,7 +51,7 @@ with System.WCh_Con;\n \n package Ada.Wide_Wide_Text_IO is\n \n-   type File_Type is limited private;\n+   type File_Type is limited private with Default_Initial_Condition;\n    type File_Mode is (In_File, Out_File, Append_File);\n \n    --  The following representation clause allows the use of unchecked"}]}