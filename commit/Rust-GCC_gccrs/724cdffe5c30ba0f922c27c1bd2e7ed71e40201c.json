{"sha": "724cdffe5c30ba0f922c27c1bd2e7ed71e40201c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzI0Y2RmZmU1YzMwYmEwZjkyMmMyN2MxYmQyZTdlZDcxZTQwMjAxYw==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-10-14T01:49:51Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-10-14T01:49:51Z"}, "message": "re PR fortran/37083 (Formatted read of line without trailing new-line fails)\n\n2008-10-13  Jerry DeLisle  <jvdelisle@gcc.gnu.org\n\n\tPR libfortran/37083\n\t* io/list_read.c (next_char): Simplify EOF tests and set endfile flag.\n\t(finish_list_read): Add EOF check.\n\nFrom-SVN: r141101", "tree": {"sha": "98ce6c33b70a0f91ec650b18a08e95344f3c7190", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/98ce6c33b70a0f91ec650b18a08e95344f3c7190"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c/comments", "author": null, "committer": null, "parents": [{"sha": "f3fd447c9c2b74e03b8555b3b4cc9a6db85ff8f0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3fd447c9c2b74e03b8555b3b4cc9a6db85ff8f0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3fd447c9c2b74e03b8555b3b4cc9a6db85ff8f0"}], "stats": {"total": 24, "additions": 16, "deletions": 8}, "files": [{"sha": "4e72cb8bfc7f814d885572d113410a5cfeb8839f", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=724cdffe5c30ba0f922c27c1bd2e7ed71e40201c", "patch": "@@ -1,3 +1,9 @@\n+2008-10-13  Jerry DeLisle  <jvdelisle@gcc.gnu.org\n+\n+\tPR libfortran/37083\n+\t* io/list_read.c (next_char): Simplify EOF tests and set endfile flag.\n+\t(finish_list_read): Add EOF check.\n+\n 2008-10-09  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/37753"}, {"sha": "00cd841df245029977517903ee48ea5b78bdd66e", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 10, "deletions": 8, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/724cdffe5c30ba0f922c27c1bd2e7ed71e40201c/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=724cdffe5c30ba0f922c27c1bd2e7ed71e40201c", "patch": "@@ -242,15 +242,10 @@ next_char (st_parameter_dt *dtp)\n     {\n       if (length == 0)\n \t{\n-\t  if (dtp->u.p.advance_status == ADVANCE_NO)\n-\t    {\n-\t      if (dtp->u.p.current_unit->endfile == AT_ENDFILE)\n-\t\tlongjmp (*dtp->u.p.eof_jump, 1);\n-\t      dtp->u.p.current_unit->endfile = AT_ENDFILE;\n-\t      c = '\\n';\n-\t    }\n-\t  else\n+\t  if (dtp->u.p.current_unit->endfile == AT_ENDFILE)\n \t    longjmp (*dtp->u.p.eof_jump, 1);\n+\t  dtp->u.p.current_unit->endfile = AT_ENDFILE;\n+\t  c = '\\n';\n \t}\n     }\n done:\n@@ -1913,6 +1908,13 @@ finish_list_read (st_parameter_dt *dtp)\n       c = next_char (dtp);\n     }\n   while (c != '\\n');\n+\n+  if (dtp->u.p.current_unit->endfile != NO_ENDFILE)\n+    {\n+      generate_error (&dtp->common, LIBERROR_END, NULL);\n+      dtp->u.p.current_unit->endfile = AFTER_ENDFILE;\n+      dtp->u.p.current_unit->current_record = 0;\n+    }\n }\n \n /*\t\t\tNAMELIST INPUT"}]}