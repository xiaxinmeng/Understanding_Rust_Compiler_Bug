{"sha": "ae36de91537f1568e0f50bd55b5b976b8289cdc1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWUzNmRlOTE1MzdmMTU2OGUwZjUwYmQ1NWI1Yjk3NmI4Mjg5Y2RjMQ==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2018-10-05T11:29:44Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2018-10-05T11:29:44Z"}, "message": "i386: Don't pass -msse2avx to assembler for -mavx\n\nWith\n\ngcc -O2 -fPIC -flto -g -c -o a.o a.c\ngcc -O2 -fPIC -flto -g -mavx   -c -o b.o b.c\ngcc -shared -O2 -fPIC -flto -g -o lib1.so a.o b.o\n\nLTO correctly generates AVX for b.o and SSE for a.o.  But the GCC driver\npasses -msse2avx to assembler, which encodes SSE instructions as AVX\ninstructions.  We shouldn't pass -msse2avx to assembler for -mavx.\n\n\tPR target/87522\n\t* config/i386/gnu-user.h (ASM_SPEC): Don't pass -msse2avx to\n\tassembler for -mavx.\n\t* config/i386/gnu-user64.h (ASM_SPEC): Likewise.\n\nFrom-SVN: r264864", "tree": {"sha": "e4482cf1bd396baa0cd4c01523b536a34acf5280", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e4482cf1bd396baa0cd4c01523b536a34acf5280"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ae36de91537f1568e0f50bd55b5b976b8289cdc1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae36de91537f1568e0f50bd55b5b976b8289cdc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ae36de91537f1568e0f50bd55b5b976b8289cdc1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ae36de91537f1568e0f50bd55b5b976b8289cdc1/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "49022a8b837e77020b0e03ce8b9c70e67bd59872", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49022a8b837e77020b0e03ce8b9c70e67bd59872", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49022a8b837e77020b0e03ce8b9c70e67bd59872"}], "stats": {"total": 11, "additions": 9, "deletions": 2}, "files": [{"sha": "e9edd10d8b9acd171c98578c27e4fac259e62514", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae36de91537f1568e0f50bd55b5b976b8289cdc1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae36de91537f1568e0f50bd55b5b976b8289cdc1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ae36de91537f1568e0f50bd55b5b976b8289cdc1", "patch": "@@ -1,3 +1,10 @@\n+2018-10-05  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/87522\n+\t* config/i386/gnu-user.h (ASM_SPEC): Don't pass -msse2avx to\n+\tassembler for -mavx.\n+\t* config/i386/gnu-user64.h (ASM_SPEC): Likewise.\n+\n 2018-10-05  Segher Boessenkool  <segher@kernel.crashing.org>\n \n \tPR target/87509"}, {"sha": "baed87aa54fc073034255f141498755336c9314c", "filename": "gcc/config/i386/gnu-user.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae36de91537f1568e0f50bd55b5b976b8289cdc1/gcc%2Fconfig%2Fi386%2Fgnu-user.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae36de91537f1568e0f50bd55b5b976b8289cdc1/gcc%2Fconfig%2Fi386%2Fgnu-user.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fgnu-user.h?ref=ae36de91537f1568e0f50bd55b5b976b8289cdc1", "patch": "@@ -67,7 +67,7 @@ along with GCC; see the file COPYING3.  If not see\n \n #undef  ASM_SPEC\n #define ASM_SPEC \\\n-  \"--32 %{!mno-sse2avx:%{mavx:-msse2avx}} %{msse2avx:%{!mavx:-msse2avx}}\"\n+  \"--32 %{msse2avx:%{!mavx:-msse2avx}}\"\n \n #undef  SUBTARGET_EXTRA_SPECS\n #define SUBTARGET_EXTRA_SPECS \\"}, {"sha": "09141ce3508e7fc8e649e60cb6c8f15933e4bc1b", "filename": "gcc/config/i386/gnu-user64.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ae36de91537f1568e0f50bd55b5b976b8289cdc1/gcc%2Fconfig%2Fi386%2Fgnu-user64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ae36de91537f1568e0f50bd55b5b976b8289cdc1/gcc%2Fconfig%2Fi386%2Fgnu-user64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fgnu-user64.h?ref=ae36de91537f1568e0f50bd55b5b976b8289cdc1", "patch": "@@ -50,7 +50,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #define ASM_SPEC \"%{\" SPEC_32 \":--32} \\\n  %{\" SPEC_64 \":--64} \\\n  %{\" SPEC_X32 \":--x32} \\\n- %{!mno-sse2avx:%{mavx:-msse2avx}} %{msse2avx:%{!mavx:-msse2avx}}\"\n+ %{msse2avx:%{!mavx:-msse2avx}}\"\n \n #define GNU_USER_TARGET_LINK_SPEC\t\t\t\t   \\\n                   \"%{\" SPEC_64 \":-m \" GNU_USER_LINK_EMULATION64 \"} \\"}]}