{"sha": "199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTk5ZDFkNDg4ZjVkZTVjOTQwZjkwMTBhOWZkZmQxZTRkMWYyNGZlMQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-09-23T09:43:09Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-09-23T09:43:09Z"}, "message": "ipa-cp.c (ipcp_store_vr_results): Avoid static local var zero.\n\n\t* ipa-cp.c (ipcp_store_vr_results): Avoid static local\n\tvar zero.\n\t* sreal.h (sreal::min, sreal::max): Avoid static local vars,\n\tconstruct values without normalization.\n\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Don't initialize\n\tstatic local lhs_ops to vNULL.\ncp/\n\t* name-lookup.c (store_bindings, store_class_bindings): Don't\n\tinitialize static local bindings_need_stored to vNULL.\n\nFrom-SVN: r240408", "tree": {"sha": "bd250b365b5dc30fe887a842bf71518aa456145f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bd250b365b5dc30fe887a842bf71518aa456145f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4ffc8099a7587030c1331e53dd9feba27f21b633", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ffc8099a7587030c1331e53dd9feba27f21b633", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ffc8099a7587030c1331e53dd9feba27f21b633"}], "stats": {"total": 33, "additions": 24, "deletions": 9}, "files": [{"sha": "36795f41211401ba958bb2e192118ca07ef3197e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "patch": "@@ -1,3 +1,12 @@\n+2016-09-23  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* ipa-cp.c (ipcp_store_vr_results): Avoid static local\n+\tvar zero.\n+\t* sreal.h (sreal::min, sreal::max): Avoid static local vars,\n+\tconstruct values without normalization.\n+\t* tree-ssa-sccvn.c (vn_reference_lookup_3): Don't initialize\n+\tstatic local lhs_ops to vNULL.\n+\n 2016-09-23  Matthew Wahab  <matthew.wahab@arm.com>\n \t    Jiong Wang <jiong.wang@arm.com>\n "}, {"sha": "9f5eba8500edd8cbe12e3f3c5a8fd9ace4e269fb", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "patch": "@@ -1,5 +1,8 @@\n 2016-09-23  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* name-lookup.c (store_bindings, store_class_bindings): Don't\n+\tinitialize static local bindings_need_stored to vNULL.\n+\n \t* typeck2.c (process_init_constructor_record): Use\n \tCONSTRUCTOR_NELTS (...) instead of\n \tvec_safe_length (CONSTRUCTOR_ELTS (...))."}, {"sha": "ce16d57b5d7f18b21a56a023dc6355d98ab4acf1", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "patch": "@@ -6197,7 +6197,7 @@ store_binding (tree id, vec<cxx_saved_binding, va_gc> **old_bindings)\n static void\n store_bindings (tree names, vec<cxx_saved_binding, va_gc> **old_bindings)\n {\n-  static vec<tree> bindings_need_stored = vNULL;\n+  static vec<tree> bindings_need_stored;\n   tree t, id;\n   size_t i;\n \n@@ -6233,7 +6233,7 @@ static void\n store_class_bindings (vec<cp_class_binding, va_gc> *names,\n \t\t      vec<cxx_saved_binding, va_gc> **old_bindings)\n {\n-  static vec<tree> bindings_need_stored = vNULL;\n+  static vec<tree> bindings_need_stored;\n   size_t i;\n   cp_class_binding *cb;\n "}, {"sha": "fdcce16f412eebe5f8dbcd4a3219f1604376e968", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "patch": "@@ -5204,11 +5204,9 @@ ipcp_store_vr_results (void)\n \t }\n        else\n \t {\n-\t   static wide_int zero = integer_zero_node;\n \t   vr.known = false;\n \t   vr.type = VR_VARYING;\n-\t   vr.min = zero;\n-\t   vr.max = zero;\n+\t   vr.min = vr.max = wi::zero (INT_TYPE_SIZE);\n \t }\n        ts->m_vr->quick_push (vr);\n      }"}, {"sha": "ce9cdbbfded8e938106c72f5d5c548356641cd99", "filename": "gcc/sreal.h", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fsreal.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Fsreal.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsreal.h?ref=199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "patch": "@@ -104,14 +104,20 @@ class sreal\n   /* Global minimum sreal can hold.  */\n   inline static sreal min ()\n   {\n-    static sreal min = sreal (-SREAL_MAX_SIG, SREAL_MAX_EXP);\n+    sreal min;\n+    /* This never needs normalization.  */\n+    min.m_sig = -SREAL_MAX_SIG;\n+    min.m_exp = SREAL_MAX_EXP;\n     return min;\n   }\n \n   /* Global minimum sreal can hold.  */\n   inline static sreal max ()\n   {\n-    static sreal max = sreal (SREAL_MAX_SIG, SREAL_MAX_EXP);\n+    sreal max;\n+    /* This never needs normalization.  */\n+    max.m_sig = SREAL_MAX_SIG;\n+    max.m_exp = SREAL_MAX_EXP;\n     return max;\n   }\n "}, {"sha": "21cc54e60b62573ca42c3f18662d1db126aebb6c", "filename": "gcc/tree-ssa-sccvn.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Ftree-ssa-sccvn.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1/gcc%2Ftree-ssa-sccvn.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-sccvn.c?ref=199d1d488f5de5c940f9010a9fdfd1e4d1f24fe1", "patch": "@@ -1786,8 +1786,7 @@ vn_reference_lookup_3 (ao_ref *ref, tree vuse, void *vr_,\n   gimple *def_stmt = SSA_NAME_DEF_STMT (vuse);\n   tree base = ao_ref_base (ref);\n   HOST_WIDE_INT offset, maxsize;\n-  static vec<vn_reference_op_s>\n-    lhs_ops = vNULL;\n+  static vec<vn_reference_op_s> lhs_ops;\n   ao_ref lhs_ref;\n   bool lhs_ref_ok = false;\n "}]}