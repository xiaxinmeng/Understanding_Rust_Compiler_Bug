{"sha": "e68287df88d7afcf7f25049f45de9ae614912157", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTY4Mjg3ZGY4OGQ3YWZjZjdmMjUwNDlmNDVkZTlhZTYxNDkxMjE1Nw==", "commit": {"author": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2015-03-19T17:35:52Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2015-03-19T17:35:52Z"}, "message": "re PR ipa/65465 (Internal compiler error: in build2_stIat)\n\nFix for PR ipa/65465.\n\n\tPR ipa/65465\n\t* cgraphunit.c (cgraph_node::create_wrapper): Correctly reset\n\tall fields of cgraph_thunk_info.\n\t* g++.dg/ipa/pr65465.C: New test.\n\nFrom-SVN: r221518", "tree": {"sha": "8e1dc19a95064f435093c7338fbedb158000e6e5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8e1dc19a95064f435093c7338fbedb158000e6e5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e68287df88d7afcf7f25049f45de9ae614912157", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e68287df88d7afcf7f25049f45de9ae614912157", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e68287df88d7afcf7f25049f45de9ae614912157", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e68287df88d7afcf7f25049f45de9ae614912157/comments", "author": null, "committer": null, "parents": [{"sha": "5cdd35db59ff0a28e8d62001e9042080e2323d3f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5cdd35db59ff0a28e8d62001e9042080e2323d3f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5cdd35db59ff0a28e8d62001e9042080e2323d3f"}], "stats": {"total": 23, "additions": 22, "deletions": 1}, "files": [{"sha": "86527011cea7c13d499e5a2e6c1c229fcf597fc6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e68287df88d7afcf7f25049f45de9ae614912157", "patch": "@@ -1,3 +1,9 @@\n+2015-03-19  Martin Liska  <mliska@suse.cz>\n+\n+\tPR ipa/65465\n+\t* cgraphunit.c (cgraph_node::create_wrapper): Correctly reset\n+\tall fields of cgraph_thunk_info.\n+\n 2015-03-19  Ilya Enkovich  <ilya.enkovich@intel.com>\n \n \t* ipa-chkp.c (chkp_maybe_create_clone): Don't try to"}, {"sha": "8ac92e1c0c866052de77b5195a17685b5f6367e1", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=e68287df88d7afcf7f25049f45de9ae614912157", "patch": "@@ -2484,8 +2484,9 @@ cgraph_node::create_wrapper (cgraph_node *target)\n \n   /* Turn alias into thunk and expand it into GIMPLE representation.  */\n   definition = true;\n+\n+  memset (&thunk, 0, sizeof (cgraph_thunk_info));\n   thunk.thunk_p = true;\n-  thunk.this_adjusting = false;\n   create_edge (target, NULL, count, CGRAPH_FREQ_BASE);\n \n   tree arguments = DECL_ARGUMENTS (decl);"}, {"sha": "92835db1f58a614b4e7b99f8a903bdff5d54c8d5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e68287df88d7afcf7f25049f45de9ae614912157", "patch": "@@ -1,3 +1,7 @@\n+2015-03-19  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* g++.dg/ipa/pr65465.C: New test.\n+\n 2015-03-19  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/52659"}, {"sha": "436d88f743fd8c0f28b9eac79f8fbbb00b40e6f6", "filename": "gcc/testsuite/g++.dg/ipa/pr65465.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr65465.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e68287df88d7afcf7f25049f45de9ae614912157/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr65465.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fipa%2Fpr65465.C?ref=e68287df88d7afcf7f25049f45de9ae614912157", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2\" } */\n+\n+struct A {};\n+struct B { virtual A foo () const; };\n+struct C { A foo () const; };\n+struct D : virtual B { A foo () const {} };\n+struct F : D { virtual int bar () const; };\n+int F::bar () const { return 0; }\n+A C::foo () const { return A (); }"}]}