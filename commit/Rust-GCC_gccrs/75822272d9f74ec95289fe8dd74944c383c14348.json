{"sha": "75822272d9f74ec95289fe8dd74944c383c14348", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzU4MjIyNzJkOWY3NGVjOTUyODlmZThkZDc0OTQ0YzM4M2MxNDM0OA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2004-06-25T18:30:09Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2004-06-25T18:30:09Z"}, "message": "tree-dfa.c (get_virtual_var): Merge real/imaginary parts with handled_component_p handling.\n\n\t* tree-dfa.c (get_virtual_var): Merge real/imaginary parts with\n\thandled_component_p handling.\n\t* tree-gimple.c (get_base_address): Likewise and fix typo that\n\tcaused both recursion and looping.\n\nFrom-SVN: r83669", "tree": {"sha": "7c8cf6d03b810dc8e85375f82476d9c4c4b891b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7c8cf6d03b810dc8e85375f82476d9c4c4b891b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75822272d9f74ec95289fe8dd74944c383c14348", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75822272d9f74ec95289fe8dd74944c383c14348", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75822272d9f74ec95289fe8dd74944c383c14348", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75822272d9f74ec95289fe8dd74944c383c14348/comments", "author": null, "committer": null, "parents": [{"sha": "f1526aaae77c8082ef42691d03254926f5104b64", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f1526aaae77c8082ef42691d03254926f5104b64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f1526aaae77c8082ef42691d03254926f5104b64"}], "stats": {"total": 41, "additions": 18, "deletions": 23}, "files": [{"sha": "93329f92785270daea15e929edd405d0ad6a8942", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75822272d9f74ec95289fe8dd74944c383c14348/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75822272d9f74ec95289fe8dd74944c383c14348/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75822272d9f74ec95289fe8dd74944c383c14348", "patch": "@@ -6,6 +6,11 @@\n \n 2004-06-25  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n+\t* tree-dfa.c (get_virtual_var): Merge real/imaginary parts with\n+\thandled_component_p handling.\n+\t* tree-gimple.c (get_base_address): Likewise and fix typo that\n+\tcaused both recursion and looping.\n+\n \t* tree-cfg.c (verify_expr): Add macro CHECK_OK.\n \tProperly test for nest of handled_components in LHS context.\n "}, {"sha": "99f998f9c1dd519179a890ff736d22d868579b78", "filename": "gcc/tree-dfa.c", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75822272d9f74ec95289fe8dd74944c383c14348/gcc%2Ftree-dfa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75822272d9f74ec95289fe8dd74944c383c14348/gcc%2Ftree-dfa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-dfa.c?ref=75822272d9f74ec95289fe8dd74944c383c14348", "patch": "@@ -922,11 +922,9 @@ get_virtual_var (tree var)\n   if (TREE_CODE (var) == SSA_NAME)\n     var = SSA_NAME_VAR (var);\n \n-  if (TREE_CODE (var) == REALPART_EXPR || TREE_CODE (var) == IMAGPART_EXPR)\n+  while (TREE_CODE (var) == REALPART_EXPR || TREE_CODE (var) == IMAGPART_EXPR\n+\t || handled_component_p (var))\n     var = TREE_OPERAND (var, 0);\n-  else\n-    while (handled_component_p (var))\n-      var = TREE_OPERAND (var, 0);\n     \n #ifdef ENABLE_CHECKING\n   /* Treating GIMPLE registers as virtual variables makes no sense."}, {"sha": "b1f08dfee4a2958e7322262b1634664f4716805f", "filename": "gcc/tree-gimple.c", "status": "modified", "additions": 11, "deletions": 19, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75822272d9f74ec95289fe8dd74944c383c14348/gcc%2Ftree-gimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75822272d9f74ec95289fe8dd74944c383c14348/gcc%2Ftree-gimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-gimple.c?ref=75822272d9f74ec95289fe8dd74944c383c14348", "patch": "@@ -602,27 +602,19 @@ rationalize_compound_expr (tree top)\n tree\n get_base_address (tree t)\n {\n-  do\n-    {\n-      if (SSA_VAR_P (t)\n-\t  || TREE_CODE (t) == STRING_CST\n-\t  || TREE_CODE (t) == CONSTRUCTOR\n-\t  || TREE_CODE (t) == INDIRECT_REF)\n-\treturn t;\n-\n-      if (TREE_CODE (t) == REALPART_EXPR || TREE_CODE (t) == IMAGPART_EXPR)\n-\tt = TREE_OPERAND (t, 0);\n-      else if (handled_component_p (t))\n-\tt = get_base_address (TREE_OPERAND (t, 0));\n-      else\n-\treturn NULL_TREE;\n-    }\n-  while (t);\n-\n-  return t;\n+  while (TREE_CODE (t) == REALPART_EXPR || TREE_CODE (t) == IMAGPART_EXPR\n+\t || handled_component_p (t))\n+    t = TREE_OPERAND (t, 0);\n+  \n+  if (SSA_VAR_P (t)\n+      || TREE_CODE (t) == STRING_CST\n+      || TREE_CODE (t) == CONSTRUCTOR\n+      || TREE_CODE (t) == INDIRECT_REF)\n+    return t;\n+  else\n+    return NULL_TREE;\n }\n \n-\n void\n recalculate_side_effects (tree t)\n {"}]}