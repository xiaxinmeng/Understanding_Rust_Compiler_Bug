{"sha": "bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmViZjgyOWQ4OGQxYmM1N2YyMTUzY2ViNGY0NWZiMmNlMTAwYjFkOQ==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2004-08-03T21:11:29Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2004-08-03T21:11:29Z"}, "message": "configure.in: Check for MPFR as well as GMP.\n\n\t* configure.in: Check for MPFR as well as GMP.\n\t* configure: Regenerate.\n\t* gcc/doc/install.texi: Document MPFR requirement.\n\nFrom-SVN: r85503", "tree": {"sha": "be3b88be8ac1ec9e4d16cb1847fbe7579b0cb697", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be3b88be8ac1ec9e4d16cb1847fbe7579b0cb697"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/comments", "author": null, "committer": null, "parents": [{"sha": "bf7d3350b95942c74f53588476c2a76b52c9dfa6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf7d3350b95942c74f53588476c2a76b52c9dfa6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf7d3350b95942c74f53588476c2a76b52c9dfa6"}], "stats": {"total": 271, "additions": 170, "deletions": 101}, "files": [{"sha": "c740d19aeefbffd83ec8a06fd2814009026ecc97", "filename": "ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/ChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/ChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/ChangeLog?ref=bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "patch": "@@ -1,3 +1,8 @@\n+2004-08-03  Paul Brook  <paul@codesourcery.com>\n+\n+\t* configure.in: Check for MPFR as well as GMP.\n+\t* configure: Regenerate.\n+\n 2004-08-01  Robert Millan  <robertmh@gnu.org>\n \n \t* configure.in: Turn mt-linux into mt-gnu. Use mt-gnu and enable"}, {"sha": "54424bf9ed29b8711ce6e10fc76d5f8b36348002", "filename": "configure", "status": "modified", "additions": 112, "deletions": 81, "changes": 193, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/configure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/configure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure?ref=bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "patch": "@@ -15,6 +15,10 @@ ac_help=\"$ac_help\n   --without-libbanshee   Don't build with libbanshee\"\n ac_help=\"$ac_help\n   --enable-libada        Builds libada directory\"\n+ac_help=\"$ac_help\n+  --with-mpfr-dir=PATH    Specify source directory for MPFR library\"\n+ac_help=\"$ac_help\n+  --with-mpfr=PATH        Specify directory for installed MPFR library\"\n ac_help=\"$ac_help\n   --with-gmp-dir=PATH     Specify source directory for GMP library\"\n ac_help=\"$ac_help\n@@ -589,7 +593,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:593: checking host system type\" >&5\n+echo \"configure:597: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -610,7 +614,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:614: checking target system type\" >&5\n+echo \"configure:618: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -628,7 +632,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:632: checking build system type\" >&5\n+echo \"configure:636: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -683,7 +687,7 @@ test \"$program_transform_name\" = \"\" && program_transform_name=\"s,x,x,\"\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:687: checking for a BSD compatible install\" >&5\n+echo \"configure:691: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -736,7 +740,7 @@ test -z \"$INSTALL_SCRIPT\" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'\n test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n echo $ac_n \"checking whether ln works\"\"... $ac_c\" 1>&6\n-echo \"configure:740: checking whether ln works\" >&5\n+echo \"configure:744: checking whether ln works\" >&5\n if eval \"test \\\"`echo '$''{'acx_cv_prog_LN'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -760,7 +764,7 @@ else\n fi\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:764: checking whether ln -s works\" >&5\n+echo \"configure:768: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1784,7 +1788,7 @@ else\n   # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1788: checking for $ac_word\" >&5\n+echo \"configure:1792: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1814,7 +1818,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1818: checking for $ac_word\" >&5\n+echo \"configure:1822: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1865,7 +1869,7 @@ fi\n       # Extract the first word of \"cl\", so it can be a program name with args.\n set dummy cl; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1869: checking for $ac_word\" >&5\n+echo \"configure:1873: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1897,7 +1901,7 @@ fi\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1901: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1905: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1908,12 +1912,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1912 \"configure\"\n+#line 1916 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1917: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1921: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1939,12 +1943,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1943: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1947: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1948: checking whether we are using GNU C\" >&5\n+echo \"configure:1952: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1953,7 +1957,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1957: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1961: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1972,7 +1976,7 @@ ac_test_CFLAGS=\"${CFLAGS+set}\"\n ac_save_CFLAGS=\"$CFLAGS\"\n CFLAGS=\n echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1976: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:1980: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2039,7 +2043,7 @@ fi\n # Extract the first word of \"${ac_tool_prefix}gnatbind\", so it can be a program name with args.\n set dummy ${ac_tool_prefix}gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2043: checking for $ac_word\" >&5\n+echo \"configure:2047: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GNATBIND'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2071,7 +2075,7 @@ if test -n \"$ac_tool_prefix\"; then\n   # Extract the first word of \"gnatbind\", so it can be a program name with args.\n set dummy gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2075: checking for $ac_word\" >&5\n+echo \"configure:2079: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_GNATBIND'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2104,7 +2108,7 @@ fi\n fi\n \n echo $ac_n \"checking whether compiler driver understands Ada\"\"... $ac_c\" 1>&6\n-echo \"configure:2108: checking whether compiler driver understands Ada\" >&5\n+echo \"configure:2112: checking whether compiler driver understands Ada\" >&5\n if eval \"test \\\"`echo '$''{'acx_cv_cc_gcc_supports_ada'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2137,7 +2141,7 @@ else\n fi\n \n echo $ac_n \"checking how to compare bootstrapped objects\"\"... $ac_c\" 1>&6\n-echo \"configure:2141: checking how to compare bootstrapped objects\" >&5\n+echo \"configure:2145: checking how to compare bootstrapped objects\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_cmp_skip'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2167,10 +2171,38 @@ do_compare=\"$gcc_cv_prog_cmp_skip\"\n \n \n \n-# Check for GMP\n+# Check for GMP and MPFR\n gmplibs=\n gmpinc=\n have_gmp=yes\n+# Specify a location for mpfr\n+# check for this first so it ends up on the link line before gmp.\n+# Check whether --with-mpfr-dir or --without-mpfr-dir was given.\n+if test \"${with_mpfr_dir+set}\" = set; then\n+  withval=\"$with_mpfr_dir\"\n+  :\n+fi\n+\n+\n+if test \"x$with_mpfr_dir\" != x; then\n+  gmpinc=\"-I$with_mpfr_dir/mpfr\"\n+  gmplibs=\"$with_mpfr_dir/libmpfr.a\"\n+else\n+  gmplibs=\"-lmpfr\"\n+fi\n+\n+# Check whether --with-mpfr or --without-mpfr was given.\n+if test \"${with_mpfr+set}\" = set; then\n+  withval=\"$with_mpfr\"\n+  :\n+fi\n+\n+\n+if test \"x$with_mpfr\" != x; then\n+  gmplibs=\"-L$with_mpfr/lib $gmplibs\"\n+  gmpinc=\"-I$with_mpfr/include\"\n+fi\n+\n # Specify a location for gmp\n # Check whether --with-gmp-dir or --without-gmp-dir was given.\n if test \"${with_gmp_dir+set}\" = set; then\n@@ -2179,14 +2211,16 @@ if test \"${with_gmp_dir+set}\" = set; then\n fi\n \n \n-if test \"x$with_gmp_dir\" != x && test -f \"$with_gmp_dir/gmp.h\"; then\n-  gmpinc=\"-I$with_gmp_dir\"\n+if test \"x$with_gmp_dir\" != x; then\n+  gmpinc=\"$gmpinc -I$with_gmp_dir\"\n   if test -f \"$with_gmp_dir/.libs/libgmp.a\"; then\n-    gmplibs=\"$with_gmp_dir/.libs/libgmp.a\"\n+    gmplibs=\"$gmplibs $with_gmp_dir/.libs/libgmp.a\"\n   elif test -f \"$with_gmp_dir/_libs/libgmp.a\"; then\n-    gmplibs=\"$with_gmp_dir/_libs/libgmp.a\"\n+    gmplibs=\"$gmplibs $with_gmp_dir/_libs/libgmp.a\"\n   fi\n   # One of the later tests will catch the error if neither library is present.\n+else\n+  gmplibs=\"$gmplibs -lgmp\"\n fi\n \n # Check whether --with-gmp or --without-gmp was given.\n@@ -2196,23 +2230,18 @@ if test \"${with_gmp+set}\" = set; then\n fi\n \n \n-if test \"x$with_gmp\" != x && test -d \"$with_gmp\"; then\n-  gmplibs=\"-L$with_gmp/lib -lgmp\"\n-  gmpinc=\"-I$with_gmp/include\"\n-fi\n-\n-# Use system gmp if nothing else specified\n-if test \"x$gmplibs\" = x; then\n-  gmplibs=\"-lgmp\"\n+if test \"x$with_gmp\" != x; then\n+  gmplibs=\"-L$with_gmp/lib $gmplibs\"\n+  gmpinc=\"-I$with_gmp/include $gmpinc\"\n fi\n \n saved_CFLAGS=\"$CFLAGS\"\n CFLAGS=\"$CFLAGS $gmpinc\"\n # Check GMP actually works\n echo $ac_n \"checking for correct version of gmp.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2214: checking for correct version of gmp.h\" >&5\n+echo \"configure:2243: checking for correct version of gmp.h\" >&5\n cat > conftest.$ac_ext <<EOF\n-#line 2216 \"configure\"\n+#line 2245 \"configure\"\n #include \"confdefs.h\"\n #include \"gmp.h\"\n int main() {\n@@ -2223,7 +2252,7 @@ choke me\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2227: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2256: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   echo \"$ac_t\"\"yes\" 1>&6\n else\n@@ -2235,20 +2264,21 @@ fi\n rm -f conftest*\n \n if test x\"$have_gmp\" = xyes; then\n-  echo $ac_n \"checking for mpf_init in -lgmp\"\"... $ac_c\" 1>&6\n-echo \"configure:2240: checking for mpf_init in -lgmp\" >&5\n+  echo $ac_n \"checking for MPFR\"\"... $ac_c\" 1>&6\n+echo \"configure:2269: checking for MPFR\" >&5\n \n   saved_LIBS=\"$LIBS\"\n   LIBS=\"$LIBS $gmplibs\"\n   cat > conftest.$ac_ext <<EOF\n-#line 2245 \"configure\"\n+#line 2274 \"configure\"\n #include \"confdefs.h\"\n #include <gmp.h>\n+#include <mpfr.h>\n int main() {\n-mpf_t n; mpf_init(n);\n+mpfr_t n; mpfr_init(n);\n ; return 0; }\n EOF\n-if { (eval echo configure:2252: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2282: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   echo \"$ac_t\"\"yes\" 1>&6\n else\n@@ -2262,6 +2292,7 @@ rm -f conftest*\n   CFLAGS=\"$saved_CFLAGS\"\n fi\n \n+# Flags needed for both GMP and/or MPFR\n \n \n \n@@ -2721,7 +2752,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2725: checking for $ac_word\" >&5\n+echo \"configure:2756: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_BISON'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2756,7 +2787,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2760: checking for $ac_word\" >&5\n+echo \"configure:2791: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_YACC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2791,7 +2822,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2795: checking for $ac_word\" >&5\n+echo \"configure:2826: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_M4'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2826,7 +2857,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2830: checking for $ac_word\" >&5\n+echo \"configure:2861: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_FLEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2861,7 +2892,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2865: checking for $ac_word\" >&5\n+echo \"configure:2896: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_LEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -2896,7 +2927,7 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:2900: checking for $ac_word\" >&5\n+echo \"configure:2931: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_MAKEINFO'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3497,7 +3528,7 @@ test -n \"$target_alias\" && ncn_target_tool_prefix=$target_alias-\n   # Extract the first word of \"${ncn_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3501: checking for $ac_word\" >&5\n+echo \"configure:3532: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3530,7 +3561,7 @@ if test -z \"$ac_cv_prog_AR\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3534: checking for $ac_word\" >&5\n+echo \"configure:3565: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AR'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3569,7 +3600,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3573: checking for $ac_word\" >&5\n+echo \"configure:3604: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3602,7 +3633,7 @@ if test -z \"$ac_cv_prog_AS\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3606: checking for $ac_word\" >&5\n+echo \"configure:3637: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_AS'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3641,7 +3672,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3645: checking for $ac_word\" >&5\n+echo \"configure:3676: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3674,7 +3705,7 @@ if test -z \"$ac_cv_prog_DLLTOOL\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3678: checking for $ac_word\" >&5\n+echo \"configure:3709: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_DLLTOOL'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3713,7 +3744,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3717: checking for $ac_word\" >&5\n+echo \"configure:3748: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3746,7 +3777,7 @@ if test -z \"$ac_cv_prog_LD\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3750: checking for $ac_word\" >&5\n+echo \"configure:3781: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_LD'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3785,7 +3816,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3789: checking for $ac_word\" >&5\n+echo \"configure:3820: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3818,7 +3849,7 @@ if test -z \"$ac_cv_prog_NM\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3822: checking for $ac_word\" >&5\n+echo \"configure:3853: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_NM'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3857,7 +3888,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3861: checking for $ac_word\" >&5\n+echo \"configure:3892: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3890,7 +3921,7 @@ if test -z \"$ac_cv_prog_RANLIB\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3894: checking for $ac_word\" >&5\n+echo \"configure:3925: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3929,7 +3960,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3933: checking for $ac_word\" >&5\n+echo \"configure:3964: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -3962,7 +3993,7 @@ if test -z \"$ac_cv_prog_WINDRES\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:3966: checking for $ac_word\" >&5\n+echo \"configure:3997: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_WINDRES'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4001,7 +4032,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objcopy\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4005: checking for $ac_word\" >&5\n+echo \"configure:4036: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4034,7 +4065,7 @@ if test -z \"$ac_cv_prog_OBJCOPY\" ; then\n     # Extract the first word of \"objcopy\", so it can be a program name with args.\n set dummy objcopy; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4038: checking for $ac_word\" >&5\n+echo \"configure:4069: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJCOPY'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4073,7 +4104,7 @@ fi\n   # Extract the first word of \"${ncn_tool_prefix}objdump\", so it can be a program name with args.\n set dummy ${ncn_tool_prefix}objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4077: checking for $ac_word\" >&5\n+echo \"configure:4108: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4106,7 +4137,7 @@ if test -z \"$ac_cv_prog_OBJDUMP\" ; then\n     # Extract the first word of \"objdump\", so it can be a program name with args.\n set dummy objdump; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4110: checking for $ac_word\" >&5\n+echo \"configure:4141: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_OBJDUMP'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4152,7 +4183,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ar\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4156: checking for $ac_word\" >&5\n+echo \"configure:4187: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4185,7 +4216,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_AR_FOR_TARGET\" ; then\n     # Extract the first word of \"ar\", so it can be a program name with args.\n set dummy ar; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4189: checking for $ac_word\" >&5\n+echo \"configure:4220: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_AR_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4224,7 +4255,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}as\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4228: checking for $ac_word\" >&5\n+echo \"configure:4259: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4257,7 +4288,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_AS_FOR_TARGET\" ; then\n     # Extract the first word of \"as\", so it can be a program name with args.\n set dummy as; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4261: checking for $ac_word\" >&5\n+echo \"configure:4292: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_AS_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4296,7 +4327,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}dlltool\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4300: checking for $ac_word\" >&5\n+echo \"configure:4331: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4329,7 +4360,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_DLLTOOL_FOR_TARGET\" ; then\n     # Extract the first word of \"dlltool\", so it can be a program name with args.\n set dummy dlltool; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4333: checking for $ac_word\" >&5\n+echo \"configure:4364: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_DLLTOOL_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4368,7 +4399,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ld\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4372: checking for $ac_word\" >&5\n+echo \"configure:4403: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4401,7 +4432,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_LD_FOR_TARGET\" ; then\n     # Extract the first word of \"ld\", so it can be a program name with args.\n set dummy ld; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4405: checking for $ac_word\" >&5\n+echo \"configure:4436: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_LD_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4440,7 +4471,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}nm\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4444: checking for $ac_word\" >&5\n+echo \"configure:4475: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4473,7 +4504,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_NM_FOR_TARGET\" ; then\n     # Extract the first word of \"nm\", so it can be a program name with args.\n set dummy nm; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4477: checking for $ac_word\" >&5\n+echo \"configure:4508: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_NM_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4512,7 +4543,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}ranlib\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4516: checking for $ac_word\" >&5\n+echo \"configure:4547: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4545,7 +4576,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_RANLIB_FOR_TARGET\" ; then\n     # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4549: checking for $ac_word\" >&5\n+echo \"configure:4580: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_RANLIB_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4584,7 +4615,7 @@ fi\n   # Extract the first word of \"${ncn_target_tool_prefix}windres\", so it can be a program name with args.\n set dummy ${ncn_target_tool_prefix}windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4588: checking for $ac_word\" >&5\n+echo \"configure:4619: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CONFIGURED_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4617,7 +4648,7 @@ if test -z \"$ac_cv_prog_CONFIGURED_WINDRES_FOR_TARGET\" ; then\n     # Extract the first word of \"windres\", so it can be a program name with args.\n set dummy windres; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:4621: checking for $ac_word\" >&5\n+echo \"configure:4652: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_ncn_cv_CONFIGURED_WINDRES_FOR_TARGET'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -4702,7 +4733,7 @@ RANLIB_FOR_TARGET=${RANLIB_FOR_TARGET}${extra_ranlibflags_for_target}\n NM_FOR_TARGET=${NM_FOR_TARGET}${extra_nmflags_for_target}\n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:4706: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:4737: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\"\n@@ -4749,7 +4780,7 @@ esac\n # gcc for stageN-gcc and stage-prev for stage(N-1).  In case this is not\n # possible, however, we can resort to mv.\n echo $ac_n \"checking if symbolic links between directories work\"\"... $ac_c\" 1>&6\n-echo \"configure:4753: checking if symbolic links between directories work\" >&5\n+echo \"configure:4784: checking if symbolic links between directories work\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_ln_s_dir'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else"}, {"sha": "833711230821ecb218f16b81303cb94f5b269444", "filename": "configure.in", "status": "modified", "additions": 32, "deletions": 15, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/configure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/configure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/configure.in?ref=bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "patch": "@@ -1030,33 +1030,48 @@ fi\n ACX_PROG_GNAT\n ACX_PROG_CMP_IGNORE_INITIAL\n \n-# Check for GMP\n+# Check for GMP and MPFR\n gmplibs=\n gmpinc=\n have_gmp=yes\n+# Specify a location for mpfr\n+# check for this first so it ends up on the link line before gmp.\n+AC_ARG_WITH(mpfr-dir, [  --with-mpfr-dir=PATH    Specify source directory for MPFR library])\n+\n+if test \"x$with_mpfr_dir\" != x; then\n+  gmpinc=\"-I$with_mpfr_dir/mpfr\"\n+  gmplibs=\"$with_mpfr_dir/libmpfr.a\"\n+else\n+  gmplibs=\"-lmpfr\"\n+fi\n+\n+AC_ARG_WITH(mpfr, [  --with-mpfr=PATH        Specify directory for installed MPFR library])\n+\n+if test \"x$with_mpfr\" != x; then\n+  gmplibs=\"-L$with_mpfr/lib $gmplibs\"\n+  gmpinc=\"-I$with_mpfr/include\"\n+fi\n+\n # Specify a location for gmp\n AC_ARG_WITH(gmp-dir, [  --with-gmp-dir=PATH     Specify source directory for GMP library])\n \n-if test \"x$with_gmp_dir\" != x && test -f \"$with_gmp_dir/gmp.h\"; then\n-  gmpinc=\"-I$with_gmp_dir\"\n+if test \"x$with_gmp_dir\" != x; then\n+  gmpinc=\"$gmpinc -I$with_gmp_dir\"\n   if test -f \"$with_gmp_dir/.libs/libgmp.a\"; then\n-    gmplibs=\"$with_gmp_dir/.libs/libgmp.a\"\n+    gmplibs=\"$gmplibs $with_gmp_dir/.libs/libgmp.a\"\n   elif test -f \"$with_gmp_dir/_libs/libgmp.a\"; then\n-    gmplibs=\"$with_gmp_dir/_libs/libgmp.a\"\n+    gmplibs=\"$gmplibs $with_gmp_dir/_libs/libgmp.a\"\n   fi\n   # One of the later tests will catch the error if neither library is present.\n+else\n+  gmplibs=\"$gmplibs -lgmp\"\n fi\n \n AC_ARG_WITH(gmp, [  --with-gmp=PATH         Specify directory for installed GMP library])\n \n-if test \"x$with_gmp\" != x && test -d \"$with_gmp\"; then\n-  gmplibs=\"-L$with_gmp/lib -lgmp\"\n-  gmpinc=\"-I$with_gmp/include\"\n-fi\n-\n-# Use system gmp if nothing else specified\n-if test \"x$gmplibs\" = x; then\n-  gmplibs=\"-lgmp\"\n+if test \"x$with_gmp\" != x; then\n+  gmplibs=\"-L$with_gmp/lib $gmplibs\"\n+  gmpinc=\"-I$with_gmp/include $gmpinc\"\n fi\n \n saved_CFLAGS=\"$CFLAGS\"\n@@ -1071,16 +1086,18 @@ choke me\n   [AC_MSG_RESULT([no]); have_gmp=no])\n \n if test x\"$have_gmp\" = xyes; then\n-  AC_MSG_CHECKING([for mpf_init in -lgmp])\n+  AC_MSG_CHECKING([for MPFR])\n \n   saved_LIBS=\"$LIBS\"\n   LIBS=\"$LIBS $gmplibs\"\n-  AC_TRY_LINK([#include <gmp.h>], [mpf_t n; mpf_init(n);],\n+  AC_TRY_LINK([#include <gmp.h>\n+#include <mpfr.h>], [mpfr_t n; mpfr_init(n);],\n     [AC_MSG_RESULT([yes])],  [AC_MSG_RESULT([no]); have_gmp=no])\n   LIBS=\"$saved_LIBS\"\n   CFLAGS=\"$saved_CFLAGS\"\n fi\n \n+# Flags needed for both GMP and/or MPFR\n AC_SUBST(gmplibs)\n AC_SUBST(gmpinc)\n "}, {"sha": "a0af7f6c361e1ad8a98739aa2a4a0f8920de76ee", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "patch": "@@ -1,3 +1,7 @@\n+2004-08-03  Paul Brook  <paul@codesourcery.com>\n+\n+\t* gcc/doc/install.texi: Document MPFR requirement.\n+\n 2004-07-30  Maciej W. Rozycki  <macro@linux-mips.org>\n \n \t* aclocal.m4 (gcc_AC_FUNC_MMAP_BLACKLIST): Check for <sys/mman.h> "}, {"sha": "d941d216a49e9863e8be0e9696d182f9701de842", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 17, "deletions": 5, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=bebf829d88d1bc57f2153ceb4f45fb2ce100b1d9", "patch": "@@ -291,6 +291,15 @@ Necessary to build the Fortran frontend. If you don't have it\n installed in your library search path, you will have to configure with\n the @option{--with-gmp} or @option{--with-gmp-dir} configure option.\n \n+@item MPFR Library\n+\n+Necessary to build the Fortran frontend.  It can be downloaded from\n+@uref{http://http://www.mpfr.org/}.  It is also included in the current GMP\n+release (4.1.3) when configured with @option{--enable-mpfr}.\n+\n+The @option{--with-mpfr} or @option{--with-mpfr-dir} configure option should\n+be used if your MPFR Library is not installed in your library search path.\n+\n @end table\n \n \n@@ -1204,12 +1213,15 @@ The following options apply to the build of the Fortran front end.\n @table @code\n \n @item --with-gmp=@var{pathname}\n+@itemx --with-mpfr=@var{pathname}\n @itemx --with-gmp-dir=@var{pathname}\n-If you don't have GMP (the GNU Multiple Precision library) installed\n-in a standard location and you want to build the Fortran front-end,\n-you can explicitly specify the directory where GMP is installed\n-(@samp{--with-gmp=gmpinstalldir}) or where you built the GMP library without\n-installing (@samp{--with-gmp-dir=gmpbuilddir}).\n+@itemx --with-mpfr-dir=@var{pathname}\n+If you don't have GMP (the GNU Multiple Precision library) and the MPFR \n+Libraries installed in a standard location and you want to build the Fortran\n+front-end, you can explicitly specify the directory where they are installed\n+(@samp{--with-gmp=gmpinstalldir}, @samp{--with-mpfr=mpfrinstalldir}) or where\n+you built them without installing (@samp{--with-gmp-dir=gmpbuilddir},\n+@samp{--with-mpfr-dir=gmpbuilddir}).\n \n @end table\n "}]}