{"sha": "7e3b6e312a9f2060a707ab279e236fc464d9f518", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2UzYjZlMzEyYTlmMjA2MGE3MDdhYjI3OWUyMzZmYzQ2NGQ5ZjUxOA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "2000-02-10T00:17:10Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2000-02-10T00:17:10Z"}, "message": "natRuntime.cc (_load): Call add_library.\n\n\t* java/lang/natRuntime.cc (_load): Call add_library.\n\t(loadLibraryInternal): Likewise.\n\nFrom-SVN: r31877", "tree": {"sha": "8824435a02a448b3bd1c961029b40e7eef6802a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8824435a02a448b3bd1c961029b40e7eef6802a0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7e3b6e312a9f2060a707ab279e236fc464d9f518", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e3b6e312a9f2060a707ab279e236fc464d9f518", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7e3b6e312a9f2060a707ab279e236fc464d9f518", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7e3b6e312a9f2060a707ab279e236fc464d9f518/comments", "author": null, "committer": null, "parents": [{"sha": "c56c8c43b98902958bc2bf00dc793f1ce23c8536", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c56c8c43b98902958bc2bf00dc793f1ce23c8536", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c56c8c43b98902958bc2bf00dc793f1ce23c8536"}], "stats": {"total": 7, "additions": 7, "deletions": 0}, "files": [{"sha": "353e6298418a9a0c3f7ecd46620be0c5b69bc740", "filename": "libjava/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e3b6e312a9f2060a707ab279e236fc464d9f518/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e3b6e312a9f2060a707ab279e236fc464d9f518/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=7e3b6e312a9f2060a707ab279e236fc464d9f518", "patch": "@@ -1,5 +1,8 @@\n 2000-02-09  Tom Tromey  <tromey@cygnus.com>\n \n+\t* java/lang/natRuntime.cc (_load): Call add_library.\n+\t(loadLibraryInternal): Likewise.\n+\n \t* gnu/gcj/convert/natIconv.cc (Input_iconv::finalize): Call\n \ticonv_close when handle is not NULL.  Thanks to Andrew Haley.\n \t(Output_iconv::finalize): Likewise."}, {"sha": "f21a81f10502cbe74251a53091995be58718630b", "filename": "libjava/java/lang/natRuntime.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7e3b6e312a9f2060a707ab279e236fc464d9f518/libjava%2Fjava%2Flang%2FnatRuntime.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7e3b6e312a9f2060a707ab279e236fc464d9f518/libjava%2Fjava%2Flang%2FnatRuntime.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatRuntime.cc?ref=7e3b6e312a9f2060a707ab279e236fc464d9f518", "patch": "@@ -119,6 +119,8 @@ java::lang::Runtime::_load (jstring path, jboolean do_search)\n       _Jv_Throw (new UnsatisfiedLinkError (JvNewStringLatin1 (msg)));\n     }\n \n+  add_library (h);\n+\n   void *onload = lt_dlsym (h, \"JNI_OnLoad\");\n   if (onload != NULL)\n     {\n@@ -150,6 +152,8 @@ java::lang::Runtime::loadLibraryInternal (jstring lib)\n   buf[total] = '\\0';\n   // FIXME: make sure path is absolute.\n   lt_dlhandle h = lt_dlopenext (buf);\n+  if (h != NULL)\n+    add_library (h);\n   return h != NULL;\n #else\n   return false;"}]}