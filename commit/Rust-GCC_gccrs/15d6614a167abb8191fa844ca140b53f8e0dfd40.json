{"sha": "15d6614a167abb8191fa844ca140b53f8e0dfd40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVkNjYxNGExNjdhYmI4MTkxZmE4NDRjYTE0MGI1M2Y4ZTBkZmQ0MA==", "commit": {"author": {"name": "Patrick Palka", "email": "ppalka@gcc.gnu.org", "date": "2015-07-13T20:35:53Z"}, "committer": {"name": "Patrick Palka", "email": "ppalka@gcc.gnu.org", "date": "2015-07-13T20:35:53Z"}, "message": "re PR c++/65186 (internal compiler error: in tsubst, at cp/pt.c:11738)\n\nFix PR c++/65186\n\ngcc/cp/ChangeLog: \n\tPR c++/65186\n\t* pt.c (invalid_nontype_parm_type_p): Accept a bound template\n\ttemplate parm type under C++11 and later.\n\ngcc/testsuite/ChangeLog:\n\n\tPR c++/65186\n\t* g++.dg/template/pr65186.C: New test.\n\nFrom-SVN: r225749", "tree": {"sha": "f528942805d52eec8337aad96e9a5e3bc41b2e95", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f528942805d52eec8337aad96e9a5e3bc41b2e95"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15d6614a167abb8191fa844ca140b53f8e0dfd40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15d6614a167abb8191fa844ca140b53f8e0dfd40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15d6614a167abb8191fa844ca140b53f8e0dfd40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15d6614a167abb8191fa844ca140b53f8e0dfd40/comments", "author": null, "committer": null, "parents": [{"sha": "795038b72255040a9e62cc5da08bd6a6b5d11286", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/795038b72255040a9e62cc5da08bd6a6b5d11286", "html_url": "https://github.com/Rust-GCC/gccrs/commit/795038b72255040a9e62cc5da08bd6a6b5d11286"}], "stats": {"total": 42, "additions": 42, "deletions": 0}, "files": [{"sha": "df2e0b2fabf7ef881b93f6f84b2007141f087041", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=15d6614a167abb8191fa844ca140b53f8e0dfd40", "patch": "@@ -1,3 +1,9 @@\n+2015-07-13  Patrick Palka  <ppalka@gcc.gnu.org>\n+\n+\tPR c++/65186\n+\t* pt.c (invalid_nontype_parm_type_p): Accept a bound template\n+\ttemplate parm type under C++11 and later.\n+\n 2015-07-12  Aldy Hernandez  <aldyh@redhat.com>\n \n \t* call.c: Fix double word typos."}, {"sha": "2097963ed693eaa8873809805f21e9056e51d46c", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=15d6614a167abb8191fa844ca140b53f8e0dfd40", "patch": "@@ -20996,6 +20996,11 @@ invalid_nontype_parm_type_p (tree type, tsubst_flags_t complain)\n     return 0;\n   else if (TREE_CODE (type) == NULLPTR_TYPE)\n     return 0;\n+  /* A bound template template parm could later be instantiated to have a valid\n+     nontype parm type via an alias template.  */\n+  else if (cxx_dialect >= cxx11\n+\t   && TREE_CODE (type) == BOUND_TEMPLATE_TEMPLATE_PARM)\n+    return 0;\n \n   if (complain & tf_error)\n     {"}, {"sha": "2e32e14527e5b753a5401771dd806c335f724aa7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=15d6614a167abb8191fa844ca140b53f8e0dfd40", "patch": "@@ -1,3 +1,8 @@\n+2015-07-13  Patrick Palka  <ppalka@gcc.gnu.org>\n+\n+\tPR c++/65186\n+\t* g++.dg/template/pr65186.C: New test.\n+\n 2015-07-13  Mantas Mikaitis  <mantas.mikaitis@arm.com>\n \n \t* gcc.target/arm/macro_defs0.c: Add directive to skip"}, {"sha": "f5e81e37ebab51756dddebec87f17bc5d3876437", "filename": "gcc/testsuite/g++.dg/template/pr65186.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr65186.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15d6614a167abb8191fa844ca140b53f8e0dfd40/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr65186.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Fpr65186.C?ref=15d6614a167abb8191fa844ca140b53f8e0dfd40", "patch": "@@ -0,0 +1,26 @@\n+// { dg-do compile { target c++11 } }\n+// PR c++/65186\n+\n+template<typename A, A x, A y>\n+using Id = int;\n+\n+template<\n+  typename A,\n+  A x,\n+  A y,\n+  Id<A, x, y> p,\n+  template<A a, A b, Id<A, a, b>> class C,\n+  C<x, x, x> // { dg-bogus \"not a valid type\" }\n+> using J = C<x, y, p>;\n+\n+\n+template<class A>\n+using Z = A;\n+\n+template<\n+  template <class> class A,\n+  A<int> B // { dg-bogus \"not a valid type\" }\n+>\n+struct C { };\n+\n+C<Z, 5> a;"}]}