{"sha": "40f1c86ccabe8abfca33d8b86bce6a793d9ff025", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBmMWM4NmNjYWJlOGFiZmNhMzNkOGI4NmJjZTZhNzkzZDlmZjAyNQ==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-12T19:51:26Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-10-12T19:51:26Z"}, "message": "If a file is referenced with double quotes from\na fixed file, make sure it is copied into the fixed include directory.\n\nRemove DPS/XDPSlib.h special-case code.\n\nFrom-SVN: r5753", "tree": {"sha": "1a5dd8d6f8a94d7a922e85fa8f129f942756931e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1a5dd8d6f8a94d7a922e85fa8f129f942756931e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40f1c86ccabe8abfca33d8b86bce6a793d9ff025", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40f1c86ccabe8abfca33d8b86bce6a793d9ff025", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40f1c86ccabe8abfca33d8b86bce6a793d9ff025", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40f1c86ccabe8abfca33d8b86bce6a793d9ff025/comments", "author": null, "committer": null, "parents": [{"sha": "64791b18b89002e1abd71d9a7d4d37c2f5612ce1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64791b18b89002e1abd71d9a7d4d37c2f5612ce1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64791b18b89002e1abd71d9a7d4d37c2f5612ce1"}], "stats": {"total": 38, "additions": 24, "deletions": 14}, "files": [{"sha": "626dbf85d707966e868605f8e25d036d94b53ce4", "filename": "gcc/fixincludes", "status": "modified", "additions": 24, "deletions": 14, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40f1c86ccabe8abfca33d8b86bce6a793d9ff025/gcc%2Ffixincludes", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40f1c86ccabe8abfca33d8b86bce6a793d9ff025/gcc%2Ffixincludes", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixincludes?ref=40f1c86ccabe8abfca33d8b86bce6a793d9ff025", "patch": "@@ -223,6 +223,7 @@ if $LINKS; then\n   done\n fi\n \n+required=\n set x $treetops\n shift\n while [ $# != 0 ]; do\n@@ -324,13 +325,36 @@ while [ $# != 0 ]; do\n \t   rm $2/$file\n \telse\n \t   echo Fixed $file\n+\t   # Find any include directives that use \"file\".\n+\t   for include in `egrep '^[ \t]*#[ \t]*include[ \t]*\"[^/]' $2/$file | sed -e 's/^[ \t]*#[ \t]*include[ \t]*\"\\([^\"]*\\)\".*$/\\1/'`; do\n+\t      dir=`echo $file | sed -e s'|/[^/]*$||'`\n+\t      required=\"$required $1 $dir/$include $2/$dir/$include\"\n+\t   done\n \tfi\n       fi\n     fi\n   done\n   shift; shift\n done\n \n+# Make sure that any include files referenced using double quotes\n+# exist in the fixed directory.\n+set x $required\n+shift\n+while [ $# != 0 ]; do\n+  # $1 is the directory to copy from, $2 is the unfixed file,\n+  # $3 is the fixed file name.\n+  cd ${INPUT}\n+  cd $1\n+  if [ -r $2 ] && [ ! -r $3 ]; then\n+    cp $2 $3 >/dev/null 2>&1 || echo \"Can't copy $2\"\n+    chmod +w $3 2>/dev/null\n+    chmod a+r $3 2>/dev/null\n+    echo Copied $2\n+  fi\n+  shift; shift; shift\n+done\n+\n cd ${INPUT}\n \n # Install the proper definition of size_t in header files that it comes from.\n@@ -476,20 +500,6 @@ if [ -r ${LIB}/$file ] ; then\n   fi\n fi\n \n-# Fix AIX use of \"XDPS.h\" to refer to <DPS/XDPS.h>\n-file=DPS/XDPSlib.h\n-if [ -r $file ] && [ ! -r ${LIB}/$file ] ; then\n-  cp $file ${LIB}/$file\n-fi\n-if [ -r ${LIB}/$file ] ; then\n-  echo Fixing $file\n-  sed -e 's,\"XDPS.h\",<DPS/XDPS.h>,' ${LIB}/$file > ${LIB}/${file}.sed\n-  rm -f ${LIB}/$file; mv ${LIB}/${file}.sed ${LIB}/$file\n-  if cmp $file ${LIB}/$file >/dev/null 2>&1; then\n-    rm ${LIB}/$file\n-  fi\n-fi\n-\n # Fix an error in this file: the #if says _cplusplus, not the double\n # underscore __cplusplus that it should be\n file=tinfo.h"}]}