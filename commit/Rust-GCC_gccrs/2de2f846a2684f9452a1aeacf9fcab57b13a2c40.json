{"sha": "2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRlMmY4NDZhMjY4NGY5NDUyYTFhZWFjZjlmY2FiNTdiMTNhMmM0MA==", "commit": {"author": {"name": "David O'Brien", "email": "obrien@FreeBSD.org", "date": "2004-03-02T16:50:05Z"}, "committer": {"name": "David O'Brien", "email": "obrien@gcc.gnu.org", "date": "2004-03-02T16:50:05Z"}, "message": "freebsd-spec.h (FBSD_DYNAMIC_LINKER): Add.\n\n2004-03-02  David O'Brien  <obrien@FreeBSD.org>\n\t* config/freebsd-spec.h (FBSD_DYNAMIC_LINKER): Add.\n\t* config/alpha/freebsd.h (SUBTARGET_EXTRA_SPECS): Define\n\t%(fbsd_dynamic_linker),\n\t(LINK_SPEC): Use %(fbsd_dynamic_linker), and sync style with\n\tconfig/i386/freebsd.h\n\t* config/arm/freebsd.h: Ditto.\n\t* config/i386/freebsd.h: Ditto.\n\t* config/i386/freebsd64.h: Ditto.\n\t* config/ia64/freebsd.h: Ditto.\n\t* config/rs6000/sysv4.h: Ditto.\n\t* config/sparc/freebsd.h: Ditto.\n\nFrom-SVN: r78766", "tree": {"sha": "cff0e7e23ec58d6730a3436048e9c241b295b454", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cff0e7e23ec58d6730a3436048e9c241b295b454"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/comments", "author": null, "committer": null, "parents": [{"sha": "21a32e081980b7465099f50eb0266183d9941377", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21a32e081980b7465099f50eb0266183d9941377", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21a32e081980b7465099f50eb0266183d9941377"}], "stats": {"total": 92, "additions": 73, "deletions": 19}, "files": [{"sha": "0a6a908ce64cf3c585834765fefe252fcc1b05ed", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -1,3 +1,17 @@\n+2004-03-02  David O'Brien  <obrien@FreeBSD.org>\n+\n+\t* config/freebsd-spec.h (FBSD_DYNAMIC_LINKER): Add.\n+\t* config/alpha/freebsd.h (SUBTARGET_EXTRA_SPECS): Define\n+\t%(fbsd_dynamic_linker),\n+\t(LINK_SPEC): Use %(fbsd_dynamic_linker), and sync style with\n+\tconfig/i386/freebsd.h\n+\t* config/arm/freebsd.h: Ditto.\n+\t* config/i386/freebsd.h: Ditto.\n+\t* config/i386/freebsd64.h: Ditto.\n+\t* config/ia64/freebsd.h: Ditto.\n+\t* config/rs6000/sysv4.h: Ditto.\n+\t* config/sparc/freebsd.h: Ditto.\n+\n 2004-03-02  Loren James Rittle  <ljrittle@acm.org>\n \n \t* gcc/doc/install.texi (*-*-freebsd*): Update target information."}, {"sha": "6bbd617d96d73ce7a63c68dd89978e5b3d2e9f62", "filename": "gcc/config/alpha/freebsd.h", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Falpha%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Falpha%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Falpha%2Ffreebsd.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -20,12 +20,15 @@ the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n \n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n+\n /* Provide a FBSD_TARGET_CPU_CPP_BUILTINS and CPP_SPEC appropriate for\n    FreeBSD/alpha.  Besides the dealing with\n    the GCC option `-posix', and PIC issues as on all FreeBSD platforms, we must\n    deal with the Alpha's FP issues.  */\n \n-#undef FBSD_TARGET_CPU_CPP_BUILTINS\n+#undef  FBSD_TARGET_CPU_CPP_BUILTINS\n #define FBSD_TARGET_CPU_CPP_BUILTINS()\t\t\\\n   do\t\t\t\t\t\t\\\n     {\t\t\t\t\t\t\\\n@@ -45,12 +48,12 @@ Boston, MA 02111-1307, USA.  */\n   %{Wl,*:%*}\t\t\t\t\t\t\t\t\\\n   %{assert*} %{R*} %{rpath*} %{defsym*}\t\t\t\t\t\\\n   %{shared:-Bshareable %{h*} %{soname*}}\t\t\t\t\\\n-  %{symbolic:-Bsymbolic}\t\t\t\t\t\t\\\n   %{!shared:\t\t\t\t\t\t\t\t\\\n     %{!static:\t\t\t\t\t\t\t\t\\\n       %{rdynamic:-export-dynamic}\t\t\t\t\t\\\n-      %{!dynamic-linker:-dynamic-linker /usr/libexec/ld-elf.so.1}}\t\\\n-    %{static:-Bstatic}}\"\n+      %{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }}\t\\\n+    %{static:-Bstatic}}\t\t\t\t\t\t\t\\\n+  %{symbolic:-Bsymbolic}\"\n \n \n /************************[  Target stuff  ]***********************************/"}, {"sha": "3aea2f8697903db4eefc0ae7db516b80863f14b0", "filename": "gcc/config/arm/freebsd.h", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Farm%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Farm%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ffreebsd.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -20,9 +20,26 @@\n    Boston, MA 02111-1307, USA.  */\n \n \n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n+\n #undef  SUBTARGET_CPP_SPEC\n #define SUBTARGET_CPP_SPEC FBSD_CPP_SPEC\n \n+#undef\tLINK_SPEC\n+#define LINK_SPEC \"\t\t\t\t\t\t\t\\\n+  %{p:%nconsider using `-pg' instead of `-p' with gprof(1) }\t\t\\\n+  %{Wl,*:%*}\t\t\t\t\t\t\t\t\\\n+  %{v:-V}\t\t\t\t\t\t\t\t\\\n+  %{assert*} %{R*} %{rpath*} %{defsym*}\t\t\t\t\t\\\n+  %{shared:-Bshareable %{h*} %{soname*}}\t\t\t\t\\\n+  %{!shared:\t\t\t\t\t\t\t\t\\\n+    %{!static:\t\t\t\t\t\t\t\t\\\n+      %{rdynamic:-export-dynamic}\t\t\t\t\t\\\n+      %{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }}\t\\\n+    %{static:-Bstatic}}\t\t\t\t\t\t\t\\\n+  %{symbolic:-Bsymbolic}\"\n+\n \n /************************[  Target stuff  ]***********************************/\n "}, {"sha": "7370547727e1527223b4118d65c1b84b0e34847d", "filename": "gcc/config/freebsd-spec.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Ffreebsd-spec.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Ffreebsd-spec.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ffreebsd-spec.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -147,3 +147,9 @@ is built with the --enable-threads configure-time option.}\t\t\\\n   }\"\n #endif\n #endif\n+\n+#if FBSD_MAJOR < 6\n+#define FBSD_DYNAMIC_LINKER \"/usr/libexec/ld-elf.so.1\"\n+#else\n+#define FBSD_DYNAMIC_LINKER \"/libexec/ld-elf.so.1\"\n+#endif"}, {"sha": "9e538e916a27f29f3ee483f958929e0b79abf5a2", "filename": "gcc/config/i386/freebsd.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fi386%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -57,6 +57,10 @@ Boston, MA 02111-1307, USA.  */\n   \n #undef  WCHAR_TYPE_SIZE\n #define WCHAR_TYPE_SIZE\t(TARGET_64BIT ? 32 : BITS_PER_WORD)\n+\n+#undef  SUBTARGET_EXTRA_SPECS\t/* i386.h bogusly defines it.  */\n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n     \n /* Provide a STARTFILE_SPEC appropriate for FreeBSD.  Here we add\n    the magical crtbegin.o file (see crtstuff.c) which provides part \n@@ -105,7 +109,7 @@ Boston, MA 02111-1307, USA.  */\n     %{!shared: \\\n       %{!static: \\\n         %{rdynamic:-export-dynamic} \\\n-\t%{!dynamic-linker:-dynamic-linker /usr/libexec/ld-elf.so.1}} \\\n+        %{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }} \\\n     %{static:-Bstatic}} \\\n   %{symbolic:-Bsymbolic}\"\n "}, {"sha": "19e9bc25adba305dd639d0d264f58e8c453207e2", "filename": "gcc/config/i386/freebsd64.h", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fi386%2Ffreebsd64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fi386%2Ffreebsd64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Ffreebsd64.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -23,6 +23,9 @@ Boston, MA 02111-1307, USA.  */\n #undef  TARGET_VERSION\n #define TARGET_VERSION fprintf (stderr, \" (FreeBSD/x86-64 ELF)\");\n \n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n+\n /* Provide a LINK_SPEC appropriate for the FreeBSD/x86-64 ELF target.\n    This is a copy of LINK_SPEC from <i386/freebsd.h> tweaked for\n    the x86-64 target.  */\n@@ -37,6 +40,6 @@ Boston, MA 02111-1307, USA.  */\n     %{!shared: \\\n       %{!static: \\\n         %{rdynamic:-export-dynamic} \\\n-\t%{!dynamic-linker:-dynamic-linker /usr/libexec/ld-elf.so.1}} \\\n+\t%{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }} \\\n     %{static:-Bstatic}} \\\n   %{symbolic:-Bsymbolic}\""}, {"sha": "c375ae9d540f51178e6a6b9b070594fe96d4c66b", "filename": "gcc/config/ia64/freebsd.h", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fia64%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fia64%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Ffreebsd.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -18,17 +18,19 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING.  If not, write to\n the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n \n #define LINK_SPEC \"\t\t\t\t\t\t\t\\\n-  %{p:%nconsider using `-pg' instead of `-p' with gprof(1)}\t\t\t\t\\\n+  %{p:%nconsider using `-pg' instead of `-p' with gprof(1)}\t\t\\\n   %{Wl,*:%*}\t\t\t\t\t\t\t\t\\\n   %{assert*} %{R*} %{rpath*} %{defsym*}\t\t\t\t\t\\\n   %{shared:-Bshareable %{h*} %{soname*}}\t\t\t\t\\\n   %{symbolic:-Bsymbolic}\t\t\t\t\t\t\\\n   %{!shared:\t\t\t\t\t\t\t\t\\\n     %{!static:\t\t\t\t\t\t\t\t\\\n       %{rdynamic:-export-dynamic}\t\t\t\t\t\\\n-      %{!dynamic-linker:-dynamic-linker /usr/libexec/ld-elf.so.1}}\t\\\n+      %{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }}\t\\\n     %{static:-Bstatic}}\"\n \n "}, {"sha": "1e0ac3707f6d3d1d2d152f6ed294dad559bdad2a", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 11, "deletions": 10, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -1092,16 +1092,16 @@ extern int fixuplabelno;\n \n #define LINK_OS_FREEBSD_SPEC \"\\\n   %{p:%e`-p' not supported; use `-pg' and gprof(1)} \\\n-    %{Wl,*:%*} \\\n-    %{v:-V} \\\n-    %{assert*} %{R*} %{rpath*} %{defsym*} \\\n-    %{shared:-Bshareable %{h*} %{soname*}} \\\n-    %{!shared: \\\n-      %{!static: \\\n-\t%{rdynamic: -export-dynamic} \\\n-\t%{!dynamic-linker: -dynamic-linker /usr/libexec/ld-elf.so.1}} \\\n-      %{static:-Bstatic}} \\\n-    %{symbolic:-Bsymbolic}\"\n+  %{Wl,*:%*} \\\n+  %{v:-V} \\\n+  %{assert*} %{R*} %{rpath*} %{defsym*} \\\n+  %{shared:-Bshareable %{h*} %{soname*}} \\\n+  %{!shared: \\\n+    %{!static: \\\n+      %{rdynamic: -export-dynamic} \\\n+      %{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }} \\\n+    %{static:-Bstatic}} \\\n+  %{symbolic:-Bsymbolic}\"\n \n /* GNU/Linux support.  */\n #define LIB_LINUX_SPEC \"%{mnewlib: --start-group -llinux -lc --end-group } \\\n@@ -1314,6 +1314,7 @@ ncrtn.o%s\"\n   { \"cpp_os_openbsd\",\t\tCPP_OS_OPENBSD_SPEC },\t\t\t\\\n   { \"cpp_os_windiss\",           CPP_OS_WINDISS_SPEC },                  \\\n   { \"cpp_os_default\",\t\tCPP_OS_DEFAULT_SPEC },\t\t\t\\\n+  { \"fbsd_dynamic_linker\",\tFBSD_DYNAMIC_LINKER },\t\t\t\\\n   SUBSUBTARGET_EXTRA_SPECS\n \n #define\tSUBSUBTARGET_EXTRA_SPECS"}, {"sha": "691b10e0b9b38c064e326f7fbcd3714af85388dd", "filename": "gcc/config/sparc/freebsd.h", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fsparc%2Ffreebsd.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de2f846a2684f9452a1aeacf9fcab57b13a2c40/gcc%2Fconfig%2Fsparc%2Ffreebsd.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsparc%2Ffreebsd.h?ref=2de2f846a2684f9452a1aeacf9fcab57b13a2c40", "patch": "@@ -18,6 +18,10 @@ You should have received a copy of the GNU General Public License\n along with GCC; see the file COPYING.  If not, write to\n the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n \n+\n+#define SUBTARGET_EXTRA_SPECS \\\n+  { \"fbsd_dynamic_linker\", FBSD_DYNAMIC_LINKER }\n+\n /* FreeBSD needs the platform name (sparc64) defined.\n    Emacs needs to know if the arch is 64 or 32-bits.  */\n \n@@ -35,7 +39,7 @@ the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.  */\n   %{!shared:\t\t\t\t\t\t\t\t\\\n     %{!static:\t\t\t\t\t\t\t\t\\\n       %{rdynamic:-export-dynamic}\t\t\t\t\t\\\n-      %{!dynamic-linker:-dynamic-linker /usr/libexec/ld-elf.so.1}}\t\\\n+      %{!dynamic-linker:-dynamic-linker %(fbsd_dynamic_linker) }}\t\\\n     %{static:-Bstatic}}\"\n \n "}]}