{"sha": "0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDQ1NmNiZjY2NTg4MDhmZmMyMGJiZDIwODBiN2MzYmRjNTU1ZDU3ZA==", "commit": {"author": {"name": "Devang Patel", "email": "dpatel@apple.com", "date": "2004-09-17T18:47:19Z"}, "committer": {"name": "Devang Patel", "email": "dpatel@gcc.gnu.org", "date": "2004-09-17T18:47:19Z"}, "message": "dbxout.c (get_lang_number): New.\n\n       * dbxout.c (get_lang_number): New.\n       (dbxout_init): Include lang number in N_SO  stab.\n       * dbxout.h (N_SO_AS, N_SO_C, N_SO_ANSI_C, N_SO_CC, N_SO_FORTRAN,\n       N_SO_PASCAL, N_SO_FORTRAN90, N_SO_OBJC, N_SO_OBJCPLUS): New #define.\n\ntestsuite\n       * gcc.dg/20040813-1.c: New test.\n\nFrom-SVN: r87663", "tree": {"sha": "3e4dbb0e879325eb0d0cdf3028153f26ee13af5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e4dbb0e879325eb0d0cdf3028153f26ee13af5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/comments", "author": null, "committer": null, "parents": [{"sha": "7eae8eb2b14e45981c040b77fcdbb477572c0403", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7eae8eb2b14e45981c040b77fcdbb477572c0403", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7eae8eb2b14e45981c040b77fcdbb477572c0403"}], "stats": {"total": 65, "additions": 63, "deletions": 2}, "files": [{"sha": "9b11e42c71c8376cf6d1c63fc3ef1dab4543d744", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "patch": "@@ -1,3 +1,10 @@\n+2004-09-17  Devang Patel  <dpatel@apple.com>\n+\n+\t* dbxout.c (get_lang_number): New.\n+\t(dbxout_init): Include lang number in N_SO  stab.\n+\t* dbxout.h (N_SO_AS, N_SO_C, N_SO_ANSI_C, N_SO_CC, N_SO_FORTRAN,\n+\tN_SO_PASCAL, N_SO_FORTRAN90, N_SO_OBJC, N_SO_OBJCPLUS): New #define.\n+\t\n 2004-09-17  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR tree-optimization/17273"}, {"sha": "452a62d8cb7d17124e488756542cb15365e84eb1", "filename": "gcc/dbxout.c", "status": "modified", "additions": 27, "deletions": 2, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Fdbxout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Fdbxout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbxout.c?ref=0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "patch": "@@ -343,6 +343,7 @@ static void emit_pending_bincls         (void);\n static inline void emit_pending_bincls_if_required (void);\n \n static void dbxout_init (const char *);\n+static unsigned int get_lang_number (void);\n static void dbxout_finish (const char *);\n static void dbxout_start_source_file (unsigned, const char *);\n static void dbxout_end_source_file (unsigned);\n@@ -489,6 +490,30 @@ dbxout_function_end (void)\n }\n #endif /* DBX_DEBUGGING_INFO */\n \n+/* Get lang description for N_SO stab.  */\n+\n+static unsigned int\n+get_lang_number (void)\n+{\n+  const char *language_string = lang_hooks.name;\n+\n+  if (strcmp (language_string, \"GNU C\") == 0)\n+    return N_SO_C;\n+  else if (strcmp (language_string, \"GNU C++\") == 0)\n+    return N_SO_CC;\n+  else if (strcmp (language_string, \"GNU F77\") == 0)\n+    return N_SO_FORTRAN;\n+  else if (strcmp (language_string, \"GNU F95\") == 0)\n+    return N_SO_FORTRAN90; /* CHECKME */\n+  else if (strcmp (language_string, \"GNU Pascal\") == 0)\n+    return N_SO_PASCAL;\n+  else if (strcmp (language_string, \"GNU Objective-C\") == 0)\n+    return N_SO_OBJC;\n+  else\n+    return 0;\n+\n+}\n+\n /* At the beginning of compilation, start writing the symbol table.\n    Initialize `typevec' and output the standard data types of C.  */\n \n@@ -521,7 +546,7 @@ dbxout_init (const char *input_file_name)\n #else /* no DBX_OUTPUT_MAIN_SOURCE_DIRECTORY */\n \t  fprintf (asmfile, \"%s\", ASM_STABS_OP);\n \t  output_quoted_string (asmfile, cwd);\n-\t  fprintf (asmfile, \",%d,0,0,\", N_SO);\n+\t  fprintf (asmfile, \",%d,0,%d,\", N_SO, get_lang_number ());\n \t  assemble_name (asmfile, ltext_label_name);\n \t  fputc ('\\n', asmfile);\n #endif /* no DBX_OUTPUT_MAIN_SOURCE_DIRECTORY */\n@@ -536,7 +561,7 @@ dbxout_init (const char *input_file_name)\n   /* Used to put `Ltext:' before the reference, but that loses on sun 4.  */\n   fprintf (asmfile, \"%s\", ASM_STABS_OP);\n   output_quoted_string (asmfile, input_file_name);\n-  fprintf (asmfile, \",%d,0,0,\", N_SO);\n+  fprintf (asmfile, \",%d,0,%d,\", N_SO, get_lang_number ());\n   assemble_name (asmfile, ltext_label_name);\n   fputc ('\\n', asmfile);\n   text_section ();"}, {"sha": "dcbd01112bff7093275ed56c2f5c1e0f3e772c0c", "filename": "gcc/dbxout.h", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Fdbxout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Fdbxout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdbxout.h?ref=0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "patch": "@@ -27,4 +27,15 @@ extern void dbxout_parms (tree);\n extern void dbxout_reg_parms (tree);\n extern int dbxout_syms (tree);\n \n+/* Language description for N_SO stabs.  */\n+#define N_SO_AS          1\n+#define N_SO_C           2\n+#define N_SO_ANSI_C      3\n+#define N_SO_CC          4 /* c++*/\n+#define N_SO_FORTRAN     5\n+#define N_SO_PASCAL      6\n+#define N_SO_FORTRAN90   7\n+#define N_SO_OBJC        50\n+#define N_SO_OBJCPLUS    51\n+\n #endif /* GCC_DBXOUT_H */"}, {"sha": "db4d92d86da31b8350932dabcb737e58709b211d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "patch": "@@ -1,3 +1,7 @@\n+2004-09-17  Devang Patel  <dpatel@apple.com>\n+\n+\t* gcc.dg/20040813-1.c: New test.\n+\t\n 2004-09-17  Diego Novillo  <dnovillo@redhat.com>\n \n \tPR tree-optimization/17273"}, {"sha": "c866d4cfeb00dd0339a3dab700fea924c6e905ee", "filename": "gcc/testsuite/gcc.dg/20040813-1.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Ftestsuite%2Fgcc.dg%2F20040813-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0456cbf6658808ffc20bbd2080b7c3bdc555d57d/gcc%2Ftestsuite%2Fgcc.dg%2F20040813-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2F20040813-1.c?ref=0456cbf6658808ffc20bbd2080b7c3bdc555d57d", "patch": "@@ -0,0 +1,14 @@\n+/* Test lang in N_SO stab.  */\n+/* Contributed by Devang Patel  <dpatel@apple.com>  */\n+\n+/* { dg-do compile } */\n+/* { dg-options \"-gstabs\" } */\n+\n+int\n+main ()\n+{\n+  return 0;\n+}\n+\n+/* { dg-final { scan-assembler \".stabs*100,0,2\" } } */\n+"}]}