{"sha": "7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2E2NTI1ZDY4MGFkZWNmNDhhMDMwMmNiMTNjYzlkY2M5M2ZlNzhkMw==", "commit": {"author": {"name": "Sandra Loosemore", "email": "sandra@codesourcery.com", "date": "2007-01-19T13:34:59Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-01-19T13:34:59Z"}, "message": "200x-xx-xx Sandra Loosemore <sandra@codesourcery.com>\n\ngcc/\n200x-xx-xx  Sandra Loosemore  <sandra@codesourcery.com>\n\n\t* longlong.h (count_leading_zeros, COUNT_LEADING_ZEROS_0): Add\n\tColdFire alternatives.\n\t* config/m68k/m68k.h (CLZ_DEFINED_VALUE_AT_ZERO): New macro.\n\t* config/m68k/m68k.md (clzsi2):  Define for ColdFire\n\tarchitectures that support ff1 instruction.\n\nFrom-SVN: r120959", "tree": {"sha": "2d282a29fb31bb7a9465bb7f14d848ea31f9af9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2d282a29fb31bb7a9465bb7f14d848ea31f9af9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/comments", "author": {"login": "SandraLoosemore", "id": 104087111, "node_id": "U_kgDOBjQ-Rw", "avatar_url": "https://avatars.githubusercontent.com/u/104087111?v=4", "gravatar_id": "", "url": "https://api.github.com/users/SandraLoosemore", "html_url": "https://github.com/SandraLoosemore", "followers_url": "https://api.github.com/users/SandraLoosemore/followers", "following_url": "https://api.github.com/users/SandraLoosemore/following{/other_user}", "gists_url": "https://api.github.com/users/SandraLoosemore/gists{/gist_id}", "starred_url": "https://api.github.com/users/SandraLoosemore/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/SandraLoosemore/subscriptions", "organizations_url": "https://api.github.com/users/SandraLoosemore/orgs", "repos_url": "https://api.github.com/users/SandraLoosemore/repos", "events_url": "https://api.github.com/users/SandraLoosemore/events{/privacy}", "received_events_url": "https://api.github.com/users/SandraLoosemore/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f233b84c1759b8b3f5392c1b195a7866418a8590", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f233b84c1759b8b3f5392c1b195a7866418a8590", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f233b84c1759b8b3f5392c1b195a7866418a8590"}], "stats": {"total": 25, "additions": 25, "deletions": 0}, "files": [{"sha": "ee405910c1952c815c4be36e5b77b4d65a6b2cd9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "patch": "@@ -1,3 +1,11 @@\n+2007-01-19  Sandra Loosemore  <sandra@codesourcery.com>\n+\n+\t* longlong.h (count_leading_zeros, COUNT_LEADING_ZEROS_0): Add\n+\tColdFire alternatives.\n+\t* config/m68k/m68k.h (CLZ_DEFINED_VALUE_AT_ZERO): New macro.\n+\t* config/m68k/m68k.md (clzsi2):  Define for ColdFire\n+\tarchitectures that support ff1 instruction.\n+\n 2007-01-19  Richard Sandiford  <richard@codesourcery.com>\n \t    Julian Brown  <julian@codesourcery.com>\n "}, {"sha": "e85c1d9b5fab1f7b8ebe7f0d2c69be8ef64a3bd5", "filename": "gcc/config/m68k/m68k.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2Fconfig%2Fm68k%2Fm68k.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2Fconfig%2Fm68k%2Fm68k.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.h?ref=7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "patch": "@@ -1006,6 +1006,9 @@ __transfer_from_trampoline ()\t\t\t\t\t\\\n \n #define TRULY_NOOP_TRUNCATION(OUTPREC, INPREC) 1\n \n+/* The ColdFire FF1 instruction returns 32 for zero. */\n+#define CLZ_DEFINED_VALUE_AT_ZERO(MODE, VALUE) ((VALUE) = 32, 1)\n+\n #define STORE_FLAG_VALUE (-1)\n \n #define Pmode SImode"}, {"sha": "b3e72e78a407adfd8254952b0535d388dd7348bb", "filename": "gcc/config/m68k/m68k.md", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2Fconfig%2Fm68k%2Fm68k.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2Fconfig%2Fm68k%2Fm68k.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm68k%2Fm68k.md?ref=7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "patch": "@@ -3961,6 +3961,15 @@\n   return \"f<FP:prec>abs%.<FP:prec> %1,%0\";\n })\n \f\n+;; bit indexing instructions\n+\n+;; ColdFire ff1 instruction implements clz.\n+(define_insn \"clzsi2\"\n+  [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n+ \t(clz:SI (match_operand:SI 1 \"register_operand\" \"0\")))]\n+  \"TARGET_ISAAPLUS || TARGET_ISAC\"\n+  \"ff1 %0\")\n+\f\n ;; one complement instructions\n \n ;; \"one_cmpldi2\" is mainly here to help combine()."}, {"sha": "8b512d2f2844102063573d3185e812c5fab1aeb0", "filename": "gcc/longlong.h", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2Flonglong.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7a6525d680adecf48a0302cb13cc9dcc93fe78d3/gcc%2Flonglong.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flonglong.h?ref=7a6525d680adecf48a0302cb13cc9dcc93fe78d3", "patch": "@@ -521,6 +521,11 @@ UDItype __umulsidi3 (USItype, USItype);\n   __asm__ (\"bfffo %1{%b2:%b2},%0\"\t\t\t\t\t\\\n \t   : \"=d\" ((USItype) (count))\t\t\t\t\t\\\n \t   : \"od\" ((USItype) (x)), \"n\" (0))\n+/* Some ColdFire architectures have a ff1 instruction supported via\n+   __builtin_clz. */\n+#elif defined (__mcfisaaplus__) || defined (__mcfisac__)\n+#define count_leading_zeros(count,x) ((count) = __builtin_clz (x))\n+#define COUNT_LEADING_ZEROS_0 32\n #endif\n #endif /* mc68000 */\n "}]}