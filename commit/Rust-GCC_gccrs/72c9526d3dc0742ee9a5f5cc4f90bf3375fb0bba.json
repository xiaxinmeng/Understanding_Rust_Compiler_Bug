{"sha": "72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzJjOTUyNmQzZGMwNzQyZWU5YTVmNWNjNGY5MGJmMzM3NWZiMGJiYQ==", "commit": {"author": {"name": "Ilya Enkovich", "email": "enkovich.gnu@gmail.com", "date": "2016-03-22T19:00:14Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "2016-03-22T19:00:14Z"}, "message": "re PR target/70302 (crash on valid code at -O2 and -O3 in 32-bit mode on x86_64-linux-gnu (in convert_op, at config/i386/i386.c:3414))\n\n2016-03-22  Ilya Enkovich  <enkovich.gnu@gmail.com>\n\n\tPR target/70302\n\t* config/i386/i386.c (scalar_chain::convert_op): Support\n\tuninitialized register usage case.\n\n\tPR target/70302\n\t* gcc.target/i386/pr70302.c: New test.\n\nFrom-SVN: r234406", "tree": {"sha": "9b91738600d49a50c9ab537dfc5b418c67172fdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9b91738600d49a50c9ab537dfc5b418c67172fdd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/comments", "author": null, "committer": null, "parents": [{"sha": "a3ca1bc5bd6bdded34df1040fdb595c4de032071", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3ca1bc5bd6bdded34df1040fdb595c4de032071", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3ca1bc5bd6bdded34df1040fdb595c4de032071"}], "stats": {"total": 47, "additions": 47, "deletions": 0}, "files": [{"sha": "68484965cd7cdede3c22cf5b23eebc56b8d2bfb1", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "patch": "@@ -1,3 +1,9 @@\n+2016-03-22  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR target/70302\n+\t* config/i386/i386.c (scalar_chain::convert_op): Support\n+\tuninitialized register usage case.\n+\n 2016-03-22  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/70251"}, {"sha": "1639704835b6cab0c4c62ee58fb5fc881367036b", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "patch": "@@ -3409,6 +3409,20 @@ scalar_chain::convert_op (rtx *op, rtx_insn *insn)\n \tfprintf (dump_file, \"  Preloading operand for insn %d into r%d\\n\",\n \t\t INSN_UID (insn), REGNO (tmp));\n     }\n+  else if (REG_P (*op))\n+    {\n+      /* We may have not converted register usage in case\n+\t this register has no definition.  Otherwise it\n+\t should be converted in convert_reg.  */\n+      df_ref ref;\n+      FOR_EACH_INSN_USE (ref, insn)\n+\tif (DF_REF_REGNO (ref) == REGNO (*op))\n+\t  {\n+\t    gcc_assert (!DF_REF_CHAIN (ref));\n+\t    break;\n+\t  }\n+      *op = gen_rtx_SUBREG (V2DImode, *op, 0);\n+    }\n   else\n     {\n       gcc_assert (SUBREG_P (*op));"}, {"sha": "43217b8c476cc7caa452d94e81a3b1a6edca007a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "patch": "@@ -1,3 +1,8 @@\n+2016-03-22  Ilya Enkovich  <enkovich.gnu@gmail.com>\n+\n+\tPR target/70302\n+\t* gcc.target/i386/pr70302.c: New test.\n+\n 2016-03-22  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/70251"}, {"sha": "9b82a0c45097aeefded8eb77b069b90a32b42ad8", "filename": "gcc/testsuite/gcc.target/i386/pr70302.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70302.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70302.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70302.c?ref=72c9526d3dc0742ee9a5f5cc4f90bf3375fb0bba", "patch": "@@ -0,0 +1,22 @@\n+/* { dg-do compile { target { ia32 } } } */\n+/* { dg-options \"-O2 -msse2\" } */\n+\n+long a, c, e;\n+int b, d;\n+unsigned long long f;\n+\n+extern void fn2 (const char *, int, int, int);\n+\n+void\n+fn1(long long p1)\n+{\n+  unsigned long long g;\n+  int i;\n+  for (; i;)\n+    if (e)\n+      g = c;\n+  if (a)\n+    f = p1;\n+  if (!f && !g)\n+    fn2(\"\", b, d, d);\n+}"}]}