{"sha": "1332e9512747ebcbc667d52dd5720fe9aaf483f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMzMmU5NTEyNzQ3ZWJjYmM2NjdkNTJkZDU3MjBmZTlhYWY0ODNmNw==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2003-10-06T07:53:16Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2003-10-06T07:53:16Z"}, "message": "* config/mips/mips.md: Merge mips16 lw/srl pattern with its splitter\n\nFrom-SVN: r72134", "tree": {"sha": "b214b332bd428895ee07df9f98403bc3a5266329", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b214b332bd428895ee07df9f98403bc3a5266329"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1332e9512747ebcbc667d52dd5720fe9aaf483f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1332e9512747ebcbc667d52dd5720fe9aaf483f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1332e9512747ebcbc667d52dd5720fe9aaf483f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1332e9512747ebcbc667d52dd5720fe9aaf483f7/comments", "author": null, "committer": null, "parents": [{"sha": "96d053de318bb527a76f3ae3e632299ab7c5cc36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96d053de318bb527a76f3ae3e632299ab7c5cc36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96d053de318bb527a76f3ae3e632299ab7c5cc36"}], "stats": {"total": 34, "additions": 16, "deletions": 18}, "files": [{"sha": "9594eb68c1f96c7d956d49754e6dee0286544e2c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1332e9512747ebcbc667d52dd5720fe9aaf483f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1332e9512747ebcbc667d52dd5720fe9aaf483f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1332e9512747ebcbc667d52dd5720fe9aaf483f7", "patch": "@@ -1,4 +1,9 @@\n+2003-10-06  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/mips/mips.md: Merge mips16 lw/srl pattern with its splitter.\n+\n 2003-10-05  Andrew Pinski  <apinski@apple.com>\n+\n \t* config/darwin.c (machopic_non_lazy_ptr_name): Fix off by one\n \terrors in memcpy destinations.\n \t(machopic_stub_name): Likewise."}, {"sha": "18664397084641052a9e7e0002f51a82909e067a", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 11, "deletions": 18, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1332e9512747ebcbc667d52dd5720fe9aaf483f7/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1332e9512747ebcbc667d52dd5720fe9aaf483f7/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=1332e9512747ebcbc667d52dd5720fe9aaf483f7", "patch": "@@ -5867,29 +5867,22 @@ sra\\t%M0,%M1,%2\\n\\\n ;; register, and an and (the key problem here is that the mips16 does\n ;; not have and immediate).  We recognize a shift of a load in order\n ;; to make it simple enough for combine to understand.\n-\n-;; ??? FIXME: turn into a define_insn_and_split\n-(define_insn \"\"\n+;;\n+;; The length here is the worst case: the length of the split version\n+;; will be more accurate. \n+(define_insn_and_split \"\"\n   [(set (match_operand:SI 0 \"register_operand\" \"=d\")\n \t(lshiftrt:SI (match_operand:SI 1 \"memory_operand\" \"m\")\n \t\t     (match_operand:SI 2 \"immediate_operand\" \"I\")))]\n-  \"0 && TARGET_MIPS16\"\n-  \"lw\\t%0,%1\\;srl\\t%0,%2\"\n-  [(set_attr \"type\"\t\"load\")\n-   (set_attr \"mode\"\t\"SI\")\n-   (set_attr_alternative \"length\"\n-\t\t[(if_then_else (match_operand:VOID 2 \"m16_uimm3_b\" \"\")\n-\t\t\t       (const_int 12)\n-\t\t\t       (const_int 16))])])\n-\n-(define_split\n-  [(set (match_operand:SI 0 \"register_operand\" \"\")\n-\t(lshiftrt:SI (match_operand:SI 1 \"memory_operand\" \"\")\n-\t\t     (match_operand:SI 2 \"immediate_operand\" \"\")))]\n-  \"TARGET_MIPS16 && !TARGET_DEBUG_D_MODE\"\n+  \"TARGET_MIPS16\"\n+  \"#\"\n+  \"\"\n   [(set (match_dup 0) (match_dup 1))\n    (set (match_dup 0) (lshiftrt:SI (match_dup 0) (match_dup 2)))]\n-  \"\")\n+  \"\"\n+  [(set_attr \"type\"\t\"load\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"16\")])\n \n (define_expand \"lshrdi3\"\n   [(parallel [(set (match_operand:DI 0 \"register_operand\" \"\")"}]}