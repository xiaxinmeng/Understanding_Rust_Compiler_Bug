{"sha": "3af8e996ef185f4282b99951a03fe99e8cc48848", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2FmOGU5OTZlZjE4NWY0MjgyYjk5OTUxYTAzZmU5OWU4Y2M0ODg0OA==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2008-05-27T11:48:14Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2008-05-27T11:48:14Z"}, "message": "s390.md (\"cpu_facility\", \"enabled\"): Attribute definitions added.\n\n2008-05-27  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* config/s390/s390.md (\"cpu_facility\", \"enabled\"): Attribute\n\tdefinitions added.\n\t(\"*movdi_64dfp\", \"*movdi_64extimm\", \"*movdi_64\"): Merged into\n\t\"*movdi_64\".\n\t(\"*anddi3_extimm\", \"*anddi3\"): Merged into \"*anddi3\".\n\t(\"*iordi3_extimm\", \"*iordi3\"): Merged into \"*iordi3\".\n\t(\"*xordi3_extimm\", \"*xordi3\"): Merged into \"*xordi3\".\n\nFrom-SVN: r136013", "tree": {"sha": "84b46ba3a56560d17e9d171b167f720457279c25", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84b46ba3a56560d17e9d171b167f720457279c25"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3af8e996ef185f4282b99951a03fe99e8cc48848", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3af8e996ef185f4282b99951a03fe99e8cc48848", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3af8e996ef185f4282b99951a03fe99e8cc48848", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3af8e996ef185f4282b99951a03fe99e8cc48848/comments", "author": null, "committer": null, "parents": [{"sha": "7ac28727fb6149d6e9301e501a94080cb80be27a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ac28727fb6149d6e9301e501a94080cb80be27a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ac28727fb6149d6e9301e501a94080cb80be27a"}], "stats": {"total": 184, "additions": 55, "deletions": 129}, "files": [{"sha": "42457ba2c08a70f7957962016b845b2c8ba7f272", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3af8e996ef185f4282b99951a03fe99e8cc48848/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3af8e996ef185f4282b99951a03fe99e8cc48848/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3af8e996ef185f4282b99951a03fe99e8cc48848", "patch": "@@ -1,3 +1,13 @@\n+2008-05-27  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* config/s390/s390.md (\"cpu_facility\", \"enabled\"): Attribute\n+\tdefinitions added.\n+\t(\"*movdi_64dfp\", \"*movdi_64extimm\", \"*movdi_64\"): Merged into\n+\t\"*movdi_64\".\n+\t(\"*anddi3_extimm\", \"*anddi3\"): Merged into \"*anddi3\".\n+\t(\"*iordi3_extimm\", \"*iordi3\"): Merged into \"*iordi3\".\n+\t(\"*xordi3_extimm\", \"*xordi3\"): Merged into \"*xordi3\".\n+\n 2008-05-27  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* reload.c: (find_reloads): Skip alternatives according to the"}, {"sha": "c6a4e05292be8311836891cccb5652a14f73999b", "filename": "gcc/config/s390/s390.md", "status": "modified", "additions": 45, "deletions": 129, "changes": 174, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3af8e996ef185f4282b99951a03fe99e8cc48848/gcc%2Fconfig%2Fs390%2Fs390.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3af8e996ef185f4282b99951a03fe99e8cc48848/gcc%2Fconfig%2Fs390%2Fs390.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fs390%2Fs390.md?ref=3af8e996ef185f4282b99951a03fe99e8cc48848", "patch": "@@ -231,6 +231,34 @@\n (define_attr \"cpu\" \"g5,g6,z900,z990,z9_109\"\n   (const (symbol_ref \"s390_tune\")))\n \n+(define_attr \"cpu_facility\" \"standard,ieee,zarch,longdisp,extimm,dfp\"\n+  (const_string \"standard\"))\n+\n+(define_attr \"enabled\" \"\"\n+  (cond [(eq_attr \"cpu_facility\" \"standard\")\n+\t (const_int 1)\n+\n+         (and (eq_attr \"cpu_facility\" \"ieee\")\n+\t      (ne (symbol_ref \"TARGET_CPU_IEEE_FLOAT\") (const_int 0)))\n+\t (const_int 1)\n+\n+\t (and (eq_attr \"cpu_facility\" \"zarch\")\n+\t      (ne (symbol_ref \"TARGET_ZARCH\") (const_int 0)))\n+\t (const_int 1)\n+\n+\t (and (eq_attr \"cpu_facility\" \"longdisp\")\n+\t      (ne (symbol_ref \"TARGET_LONG_DISPLACEMENT\") (const_int 0)))\n+\t (const_int 1)\n+\n+         (and (eq_attr \"cpu_facility\" \"extimm\")\n+\t      (ne (symbol_ref \"TARGET_EXTIMM\") (const_int 0)))\n+\t (const_int 1)\n+\n+         (and (eq_attr \"cpu_facility\" \"dfp\")\n+\t      (ne (symbol_ref \"TARGET_DFP\") (const_int 0)))\n+\t (const_int 1)]\n+\t(const_int 0)))\n+\n ;; Pipeline description for z900.  For lack of anything better,\n ;; this description is also used for the g5 and g6.\n (include \"2064.md\")\n@@ -986,14 +1014,14 @@\n    [(set_attr \"op_type\" \"RIL\")\n     (set_attr \"type\"    \"larl\")])\n \n-(define_insn \"*movdi_64dfp\"\n+(define_insn \"*movdi_64\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\"\n                             \"=d,d,d,d,d,d,d,d,f,d,d,d,d,\n                              m,!*f,!*f,!*f,!R,!T,d,t,Q,t,?Q\")\n         (match_operand:DI 1 \"general_operand\"\n                             \"K,N0HD0,N1HD0,N2HD0,N3HD0,Os,N0SD0,N1SD0,d,f,L,d,m,\n                              d,*f,R,T,*f,*f,t,d,t,Q,?Q\"))]\n-  \"TARGET_64BIT && TARGET_DFP\"\n+  \"TARGET_64BIT\"\n   \"@\n    lghi\\t%0,%h1\n    llihh\\t%0,%i1\n@@ -1022,72 +1050,9 @@\n   [(set_attr \"op_type\" \"RI,RI,RI,RI,RI,RIL,RIL,RIL,RRE,RRE,RXY,RRE,RXY,RXY,\n                         RR,RX,RXY,RX,RXY,*,*,RS,RS,SS\")\n    (set_attr \"type\" \"*,*,*,*,*,*,*,*,floaddf,floaddf,la,lr,load,store,\n-                     floaddf,floaddf,floaddf,fstoredf,fstoredf,*,*,*,*,*\")])\n-\n-(define_insn \"*movdi_64extimm\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-                            \"=d,d,d,d,d,d,d,d,d,d,d,m,!*f,!*f,!*f,!R,!T,d,t,Q,t,?Q\")\n-        (match_operand:DI 1 \"general_operand\"\n-                            \"K,N0HD0,N1HD0,N2HD0,N3HD0,Os,N0SD0,N1SD0,L,d,m,d,*f,R,T,*f,*f,t,d,t,Q,?Q\"))]\n-  \"TARGET_64BIT && TARGET_EXTIMM\"\n-  \"@\n-   lghi\\t%0,%h1\n-   llihh\\t%0,%i1\n-   llihl\\t%0,%i1\n-   llilh\\t%0,%i1\n-   llill\\t%0,%i1\n-   lgfi\\t%0,%1\n-   llihf\\t%0,%k1\n-   llilf\\t%0,%k1\n-   lay\\t%0,%a1\n-   lgr\\t%0,%1\n-   lg\\t%0,%1\n-   stg\\t%1,%0\n-   ldr\\t%0,%1\n-   ld\\t%0,%1\n-   ldy\\t%0,%1\n-   std\\t%1,%0\n-   stdy\\t%1,%0\n-   #\n-   #\n-   stam\\t%1,%N1,%S0\n-   lam\\t%0,%N0,%S1\n-   #\"\n-  [(set_attr \"op_type\" \"RI,RI,RI,RI,RI,RIL,RIL,RIL,RXY,RRE,RXY,RXY,\n-                        RR,RX,RXY,RX,RXY,*,*,RS,RS,SS\")\n-   (set_attr \"type\" \"*,*,*,*,*,*,*,*,la,lr,load,store,\n-                     floaddf,floaddf,floaddf,fstoredf,fstoredf,*,*,*,*,*\")])\n-\n-(define_insn \"*movdi_64\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\"\n-                            \"=d,d,d,d,d,d,d,d,m,!*f,!*f,!*f,!R,!T,d,t,Q,t,?Q\")\n-        (match_operand:DI 1 \"general_operand\"\n-                            \"K,N0HD0,N1HD0,N2HD0,N3HD0,L,d,m,d,*f,R,T,*f,*f,t,d,t,Q,?Q\"))]\n-  \"TARGET_64BIT && !TARGET_EXTIMM\"\n-  \"@\n-   lghi\\t%0,%h1\n-   llihh\\t%0,%i1\n-   llihl\\t%0,%i1\n-   llilh\\t%0,%i1\n-   llill\\t%0,%i1\n-   lay\\t%0,%a1\n-   lgr\\t%0,%1\n-   lg\\t%0,%1\n-   stg\\t%1,%0\n-   ldr\\t%0,%1\n-   ld\\t%0,%1\n-   ldy\\t%0,%1\n-   std\\t%1,%0\n-   stdy\\t%1,%0\n-   #\n-   #\n-   stam\\t%1,%N1,%S0\n-   lam\\t%0,%N0,%S1\n-   #\"\n-  [(set_attr \"op_type\" \"RI,RI,RI,RI,RI,RXY,RRE,RXY,RXY,\n-                        RR,RX,RXY,RX,RXY,*,*,RS,RS,SS\")\n-   (set_attr \"type\" \"*,*,*,*,*,la,lr,load,store,\n-                     floaddf,floaddf,floaddf,fstoredf,fstoredf,*,*,*,*,*\")])\n+                     floaddf,floaddf,floaddf,fstoredf,fstoredf,*,*,*,*,*\")\n+   (set_attr \"cpu_facility\" \"*,*,*,*,*,extimm,extimm,extimm,dfp,dfp,longdisp,\n+                             *,*,*,*,*,longdisp,*,longdisp,*,*,*,*,*\")])\n \n (define_split\n   [(set (match_operand:DI 0 \"register_operand\" \"\")\n@@ -5135,14 +5100,14 @@\n    ng\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RXY\")])\n \n-(define_insn \"*anddi3_extimm\"\n+(define_insn \"*anddi3\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=d,d,d,d,d,d,d,d,d,d,AQ,Q\")\n         (and:DI (match_operand:DI 1 \"nonimmediate_operand\"\n                                     \"%d,o,0,0,0,0,0,0,0,0,0,0\")\n                 (match_operand:DI 2 \"general_operand\"\n                                     \"M,M,N0HDF,N1HDF,N2HDF,N3HDF,N0SDF,N1SDF,d,m,NxQDF,Q\")))\n    (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_64BIT && TARGET_EXTIMM && s390_logical_operator_ok_p (operands)\"\n+  \"TARGET_64BIT && s390_logical_operator_ok_p (operands)\"\n   \"@\n    #\n    #\n@@ -5156,28 +5121,8 @@\n    ng\\t%0,%2\n    #\n    #\"\n-  [(set_attr \"op_type\" \"RRE,RXE,RI,RI,RI,RI,RIL,RIL,RRE,RXY,SI,SS\")])\n-\n-(define_insn \"*anddi3\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=d,d,d,d,d,d,d,d,AQ,Q\")\n-        (and:DI (match_operand:DI 1 \"nonimmediate_operand\"\n-                                    \"%d,o,0,0,0,0,0,0,0,0\")\n-                (match_operand:DI 2 \"general_operand\"\n-                                    \"M,M,N0HDF,N1HDF,N2HDF,N3HDF,d,m,NxQDF,Q\")))\n-   (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_64BIT && !TARGET_EXTIMM && s390_logical_operator_ok_p (operands)\"\n-  \"@\n-   #\n-   #\n-   nihh\\t%0,%j2\n-   nihl\\t%0,%j2\n-   nilh\\t%0,%j2\n-   nill\\t%0,%j2\n-   ngr\\t%0,%2\n-   ng\\t%0,%2\n-   #\n-   #\"\n-  [(set_attr \"op_type\" \"RRE,RXE,RI,RI,RI,RI,RRE,RXY,SI,SS\")])\n+  [(set_attr \"op_type\" \"RRE,RXE,RI,RI,RI,RI,RIL,RIL,RRE,RXY,SI,SS\")\n+   (set_attr \"cpu_facility\" \"*,*,*,*,*,*,extimm,extimm,*,*,*,*\")])\n \n (define_split\n   [(set (match_operand:DI 0 \"s_operand\" \"\")\n@@ -5438,13 +5383,13 @@\n    og\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RXY\")])\n \n-(define_insn \"*iordi3_extimm\"\n+(define_insn \"*iordi3\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=d,d,d,d,d,d,d,d,AQ,Q\")\n         (ior:DI (match_operand:DI 1 \"nonimmediate_operand\" \"%0,0,0,0,0,0,0,0,0,0\")\n                 (match_operand:DI 2 \"general_operand\"\n                                     \"N0HD0,N1HD0,N2HD0,N3HD0,N0SD0,N1SD0,d,m,NxQD0,Q\")))\n    (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_64BIT && TARGET_EXTIMM && s390_logical_operator_ok_p (operands)\"\n+  \"TARGET_64BIT && s390_logical_operator_ok_p (operands)\"\n   \"@\n    oihh\\t%0,%i2\n    oihl\\t%0,%i2\n@@ -5456,25 +5401,8 @@\n    og\\t%0,%2\n    #\n    #\"\n-  [(set_attr \"op_type\"  \"RI,RI,RI,RI,RIL,RIL,RRE,RXY,SI,SS\")])\n-\n-(define_insn \"*iordi3\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=d,d,d,d,d,d,AQ,Q\")\n-        (ior:DI (match_operand:DI 1 \"nonimmediate_operand\" \"%0,0,0,0,0,0,0,0\")\n-                (match_operand:DI 2 \"general_operand\"\n-                                    \"N0HD0,N1HD0,N2HD0,N3HD0,d,m,NxQD0,Q\")))\n-   (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_64BIT && !TARGET_EXTIMM && s390_logical_operator_ok_p (operands)\"\n-  \"@\n-   oihh\\t%0,%i2\n-   oihl\\t%0,%i2\n-   oilh\\t%0,%i2\n-   oill\\t%0,%i2\n-   ogr\\t%0,%2\n-   og\\t%0,%2\n-   #\n-   #\"\n-  [(set_attr \"op_type\"  \"RI,RI,RI,RI,RRE,RXY,SI,SS\")])\n+  [(set_attr \"op_type\"  \"RI,RI,RI,RI,RIL,RIL,RRE,RXY,SI,SS\")\n+   (set_attr \"cpu_facility\" \"*,*,*,*,extimm,extimm,*,*,*,*\")])\n \n (define_split\n   [(set (match_operand:DI 0 \"s_operand\" \"\")\n@@ -5728,33 +5656,21 @@\n    xg\\t%0,%2\"\n   [(set_attr \"op_type\"  \"RRE,RXY\")])\n \n-(define_insn \"*xordi3_extimm\"\n+(define_insn \"*xordi3\"\n   [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=d,d,d,d,AQ,Q\")\n         (xor:DI (match_operand:DI 1 \"nonimmediate_operand\" \"%0,0,0,0,0,0\")\n                 (match_operand:DI 2 \"general_operand\" \"N0SD0,N1SD0,d,m,NxQD0,Q\")))\n    (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_64BIT && TARGET_EXTIMM && s390_logical_operator_ok_p (operands)\"\n+  \"TARGET_64BIT && s390_logical_operator_ok_p (operands)\"\n   \"@\n    xihf\\t%0,%k2\n    xilf\\t%0,%k2\n    xgr\\t%0,%2\n    xg\\t%0,%2\n    #\n    #\"\n-  [(set_attr \"op_type\"  \"RIL,RIL,RRE,RXY,SI,SS\")])\n-\n-(define_insn \"*xordi3\"\n-  [(set (match_operand:DI 0 \"nonimmediate_operand\" \"=d,d,AQ,Q\")\n-        (xor:DI (match_operand:DI 1 \"nonimmediate_operand\" \"%0,0,0,0\")\n-                (match_operand:DI 2 \"general_operand\" \"d,m,NxQD0,Q\")))\n-   (clobber (reg:CC CC_REGNUM))]\n-  \"TARGET_64BIT && !TARGET_EXTIMM && s390_logical_operator_ok_p (operands)\"\n-  \"@\n-   xgr\\t%0,%2\n-   xg\\t%0,%2\n-   #\n-   #\"\n-  [(set_attr \"op_type\"  \"RRE,RXY,SI,SS\")])\n+  [(set_attr \"op_type\"  \"RIL,RIL,RRE,RXY,SI,SS\")\n+   (set_attr \"cpu_facility\" \"extimm,extimm,*,*,*,*\")])\n \n (define_split\n   [(set (match_operand:DI 0 \"s_operand\" \"\")"}]}