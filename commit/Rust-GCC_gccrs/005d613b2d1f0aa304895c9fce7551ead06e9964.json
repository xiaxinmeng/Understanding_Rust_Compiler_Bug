{"sha": "005d613b2d1f0aa304895c9fce7551ead06e9964", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDA1ZDYxM2IyZDFmMGFhMzA0ODk1YzlmY2U3NTUxZWFkMDZlOTk2NA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-05-28T13:35:56Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-05-28T13:35:56Z"}, "message": "re PR target/43636 (ICE in extract_insn, at recog.c:2103)\n\n\tPR target/43636\n\t* builtins.c (expand_movstr): Use a temporary pseudo instead\n\tof target even when target is not NULL and not const0_rtx, but\n\tfails movstr predicate.\n\t* config/m32c/blkmov.md (movstr): Add predicate to first operand.\n\n\t* gcc.c-torture/compile/pr43636.c: New test.\n\nFrom-SVN: r159972", "tree": {"sha": "aef948112082031f151b429a6974d2d490c0650b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aef948112082031f151b429a6974d2d490c0650b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/005d613b2d1f0aa304895c9fce7551ead06e9964", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005d613b2d1f0aa304895c9fce7551ead06e9964", "html_url": "https://github.com/Rust-GCC/gccrs/commit/005d613b2d1f0aa304895c9fce7551ead06e9964", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/005d613b2d1f0aa304895c9fce7551ead06e9964/comments", "author": null, "committer": null, "parents": [{"sha": "773c1c8d20959a8e2d1e6bece62490292e29c559", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/773c1c8d20959a8e2d1e6bece62490292e29c559", "html_url": "https://github.com/Rust-GCC/gccrs/commit/773c1c8d20959a8e2d1e6bece62490292e29c559"}], "stats": {"total": 44, "additions": 34, "deletions": 10}, "files": [{"sha": "f347f7aaeab88e82068e108f81d5287229cfe30a", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=005d613b2d1f0aa304895c9fce7551ead06e9964", "patch": "@@ -1,3 +1,11 @@\n+2010-05-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/43636\n+\t* builtins.c (expand_movstr): Use a temporary pseudo instead\n+\tof target even when target is not NULL and not const0_rtx, but\n+\tfails movstr predicate.\n+\t* config/m32c/blkmov.md (movstr): Add predicate to first operand.\n+\n 2010-05-28  Joseph Myers  <joseph@codesourcery.com>\n \n \t* final.c (rest_of_clean_state): Use %m in errors instead of"}, {"sha": "e57449ddcaecf139b4c3491a913159854409ee9e", "filename": "gcc/builtins.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbuiltins.c?ref=005d613b2d1f0aa304895c9fce7551ead06e9964", "patch": "@@ -3560,6 +3560,7 @@ expand_movstr (tree dest, tree src, rtx target, int endp)\n \n   dest_mem = get_memory_rtx (dest, NULL);\n   src_mem = get_memory_rtx (src, NULL);\n+  data = insn_data + CODE_FOR_movstr;\n   if (!endp)\n     {\n       target = force_reg (Pmode, XEXP (dest_mem, 0));\n@@ -3568,18 +3569,18 @@ expand_movstr (tree dest, tree src, rtx target, int endp)\n     }\n   else\n     {\n-      if (target == 0 || target == const0_rtx)\n+      if (target == 0\n+\t  || target == const0_rtx\n+\t  || ! (*data->operand[0].predicate) (target, Pmode))\n \t{\n \t  end = gen_reg_rtx (Pmode);\n-\t  if (target == 0)\n+\t  if (target != const0_rtx)\n \t    target = end;\n \t}\n       else\n \tend = target;\n     }\n \n-  data = insn_data + CODE_FOR_movstr;\n-\n   if (data->operand[0].mode != VOIDmode)\n     end = gen_lowpart (data->operand[0].mode, end);\n "}, {"sha": "e384d3c52b5fef069899120485294d6ae8d05ae7", "filename": "gcc/config/m32c/blkmov.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Fconfig%2Fm32c%2Fblkmov.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Fconfig%2Fm32c%2Fblkmov.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fm32c%2Fblkmov.md?ref=005d613b2d1f0aa304895c9fce7551ead06e9964", "patch": "@@ -1,5 +1,5 @@\n ;; Machine Descriptions for R8C/M16C/M32C\n-;; Copyright (C) 2006, 2007\n+;; Copyright (C) 2006, 2007, 2010\n ;; Free Software Foundation, Inc.\n ;; Contributed by Red Hat.\n ;;\n@@ -214,7 +214,7 @@\n ;; 2 = source (mem:BLK ...)\n \n (define_expand \"movstr\"\n-  [(match_operand 0 \"\" \"\")\n+  [(match_operand 0 \"m32c_nonimmediate_operand\" \"\")\n    (match_operand 1 \"ap_operand\" \"\")\n    (match_operand 2 \"ap_operand\" \"\")\n    ]"}, {"sha": "ae8d2c001a489495c38b062e235883f938d8a445", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=005d613b2d1f0aa304895c9fce7551ead06e9964", "patch": "@@ -1,6 +1,11 @@\n+2010-05-28  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/43636\n+\t* gcc.c-torture/compile/pr43636.c: New test.\n+\n 2010-05-28  Iain Sandoe  <iains@gcc.gnu.org>\n \n-\tPR ObjC++/23616\n+\tPR objc++/23616\n \t* obj-c++.dg/try-catch-2.mm: Adjust xfail.\n \t* obj-c++.dg/try-catch-9.mm: Ditto.\n \n@@ -21,7 +26,7 @@\n \n 2010-05-27  Iain Sandoe  <iains@gcc.gnu.org>\n \n-\tPR ObjC/44140\n+\tPR objc/44140\n \t* objc.dg/torture/tls/thr-init-2.m: Skip for -flto, -fwhopr.\n \t* objc.dg/torture/tls/thr-init-3.m: Ditto.\n \t* objc.dg/torture/tls/thr-init.m: Ditto.\n@@ -152,7 +157,7 @@\n \n 2010-05-25  Iain Sandoe  <iains@gcc.gnu.org>\n \n-\tPR ObjC/44140\n+\tPR objc/44140\n \t* objc.dg/torture/tls/thr-init-3.m: XFAIL lto/whopr for all.\n \n 2010-05-25  Iain Sandoe  <iains@gcc.gnu.org>\n@@ -182,7 +187,7 @@\n \n 2010-05-24  Iain Sandoe  <iains@gcc.gnu.org>\n \n-\tPR ObjC++/43689\n+\tPR objc++/43689\n \t* obj-c++.dg/const-str-5.mm: Name pointer equivalence union.\n \t* obj-c++.dg/const-str-6.mm: Ditto.\n "}, {"sha": "ebf50edf31216f7eecb9bda20826dfc399f1ba20", "filename": "gcc/testsuite/gcc.c-torture/compile/pr43636.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr43636.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/005d613b2d1f0aa304895c9fce7551ead06e9964/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr43636.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr43636.c?ref=005d613b2d1f0aa304895c9fce7551ead06e9964", "patch": "@@ -0,0 +1,10 @@\n+/* PR target/43636 */\n+\n+extern char a[], *b[];\n+\n+char *\n+foo (char *x, int y)\n+{\n+  x = __builtin_stpcpy (x, b[a[y]]);\n+  return x;\n+}"}]}