{"sha": "14683174753fa37a67840c453ff758da3b873474", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTQ2ODMxNzQ3NTNmYTM3YTY3ODQwYzQ1M2ZmNzU4ZGEzYjg3MzQ3NA==", "commit": {"author": {"name": "Anatoly Sokolov", "email": "aesok@post.ru", "date": "2007-04-16T17:50:26Z"}, "committer": {"name": "Anatoly Sokolov", "email": "aesok@gcc.gnu.org", "date": "2007-04-16T17:50:26Z"}, "message": "avr.c (avr_arch_types): Rearranging array.\n\n\t* config/avr/avr.c (avr_arch_types): Rearranging  array.\n\t(enum avr_arch): Add.\n\t(avr_mcu_types): Use avr_arch enumeration constants instead of \n\tnumbers.\n\t* config/avr/avr.h (LINK_SPEC): Simplify.\n\nFrom-SVN: r123882", "tree": {"sha": "4c56eb353f44e52ed39e29526d1a1d307b5dac21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4c56eb353f44e52ed39e29526d1a1d307b5dac21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14683174753fa37a67840c453ff758da3b873474", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14683174753fa37a67840c453ff758da3b873474", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14683174753fa37a67840c453ff758da3b873474", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14683174753fa37a67840c453ff758da3b873474/comments", "author": null, "committer": null, "parents": [{"sha": "f8b45d4f5425d9fae598b8a09a29a1ed46db7145", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8b45d4f5425d9fae598b8a09a29a1ed46db7145", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8b45d4f5425d9fae598b8a09a29a1ed46db7145"}], "stats": {"total": 222, "additions": 119, "deletions": 103}, "files": [{"sha": "f94cf97baaf9101feabc4810da4d449c5415fc1f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14683174753fa37a67840c453ff758da3b873474/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14683174753fa37a67840c453ff758da3b873474/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=14683174753fa37a67840c453ff758da3b873474", "patch": "@@ -1,3 +1,11 @@\n+2007-04-16  Anatoly Sokolov <aesok@post.ru>\n+\n+\t* config/avr/avr.c (avr_arch_types): Rearranging  array.\n+\t(enum avr_arch): Add.\n+\t(avr_mcu_types): Use avr_arch enumeration constants instead of \n+\tnumbers.\n+\t* config/avr/avr.h (LINK_SPEC): Simplify.\n+\n 2007-04-16  Kazu Hirata  <kazu@codesourcery.com>\n \n \t* config/m68k/m68k.c (m68k_libcall_value,"}, {"sha": "3980ca98d47a1264a5dc6cb126844ab09273f81a", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 108, "deletions": 94, "changes": 202, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14683174753fa37a67840c453ff758da3b873474/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14683174753fa37a67840c453ff758da3b873474/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=14683174753fa37a67840c453ff758da3b873474", "patch": "@@ -141,10 +141,24 @@ static const struct base_arch_s avr_arch_types[] = {\n   { 1, 0, 0, 0,  NULL },  /* unknown device specified */\n   { 1, 0, 0, 0, \"__AVR_ARCH__=1\" },\n   { 0, 0, 0, 0, \"__AVR_ARCH__=2\" },\n+  { 0, 0, 0, 1, \"__AVR_ARCH__=25\"},\n   { 0, 0, 1, 0, \"__AVR_ARCH__=3\" },\n   { 0, 1, 0, 1, \"__AVR_ARCH__=4\" },\n-  { 0, 1, 1, 1, \"__AVR_ARCH__=5\" },\n-  { 0, 0, 0, 1, \"__AVR_ARCH__=25\"}\n+  { 0, 1, 1, 1, \"__AVR_ARCH__=5\" }\n+};\n+\n+/* These names are used as the index into the avr_arch_types[] table \n+   above.  */\n+\n+enum avr_arch\n+{\n+  ARCH_UNKNOWN,\n+  ARCH_AVR1,\n+  ARCH_AVR2,\n+  ARCH_AVR25,\n+  ARCH_AVR3,\n+  ARCH_AVR4,\n+  ARCH_AVR5\n };\n \n struct mcu_type_s {\n@@ -164,103 +178,103 @@ struct mcu_type_s {\n \n static const struct mcu_type_s avr_mcu_types[] = {\n     /* Classic, <= 8K.  */\n-  { \"avr2\",      2, NULL },\n-  { \"at90s2313\", 2, \"__AVR_AT90S2313__\" },\n-  { \"at90s2323\", 2, \"__AVR_AT90S2323__\" },\n-  { \"at90s2333\", 2, \"__AVR_AT90S2333__\" },\n-  { \"at90s2343\", 2, \"__AVR_AT90S2343__\" },\n-  { \"attiny22\",  2, \"__AVR_ATtiny22__\" },\n-  { \"attiny26\",  2, \"__AVR_ATtiny26__\" },\n-  { \"at90s4414\", 2, \"__AVR_AT90S4414__\" },\n-  { \"at90s4433\", 2, \"__AVR_AT90S4433__\" },\n-  { \"at90s4434\", 2, \"__AVR_AT90S4434__\" },\n-  { \"at90s8515\", 2, \"__AVR_AT90S8515__\" },\n-  { \"at90c8534\", 2, \"__AVR_AT90C8534__\" },\n-  { \"at90s8535\", 2, \"__AVR_AT90S8535__\" },\n+  { \"avr2\",         ARCH_AVR2, NULL },\n+  { \"at90s2313\",    ARCH_AVR2, \"__AVR_AT90S2313__\" },\n+  { \"at90s2323\",    ARCH_AVR2, \"__AVR_AT90S2323__\" },\n+  { \"at90s2333\",    ARCH_AVR2, \"__AVR_AT90S2333__\" },\n+  { \"at90s2343\",    ARCH_AVR2, \"__AVR_AT90S2343__\" },\n+  { \"attiny22\",     ARCH_AVR2, \"__AVR_ATtiny22__\" },\n+  { \"attiny26\",     ARCH_AVR2, \"__AVR_ATtiny26__\" },\n+  { \"at90s4414\",    ARCH_AVR2, \"__AVR_AT90S4414__\" },\n+  { \"at90s4433\",    ARCH_AVR2, \"__AVR_AT90S4433__\" },\n+  { \"at90s4434\",    ARCH_AVR2, \"__AVR_AT90S4434__\" },\n+  { \"at90s8515\",    ARCH_AVR2, \"__AVR_AT90S8515__\" },\n+  { \"at90c8534\",    ARCH_AVR2, \"__AVR_AT90C8534__\" },\n+  { \"at90s8535\",    ARCH_AVR2, \"__AVR_AT90S8535__\" },\n     /* Classic + MOVW, <= 8K.  */\n-  { \"avr25\",      6, NULL },\n-  { \"attiny13\",   6, \"__AVR_ATtiny13__\" },\n-  { \"attiny2313\", 6, \"__AVR_ATtiny2313__\" },\n-  { \"attiny24\",   6, \"__AVR_ATtiny24__\" },\n-  { \"attiny44\",   6, \"__AVR_ATtiny44__\" },\n-  { \"attiny84\",   6, \"__AVR_ATtiny84__\" },\n-  { \"attiny25\",   6, \"__AVR_ATtiny25__\" },\n-  { \"attiny45\",   6, \"__AVR_ATtiny45__\" },\n-  { \"attiny85\",   6, \"__AVR_ATtiny85__\" },\n-  { \"attiny261\",  6, \"__AVR_ATtiny261__\" },\n-  { \"attiny461\",  6, \"__AVR_ATtiny461__\" },\n-  { \"attiny861\",  6, \"__AVR_ATtiny861__\" },\n-  { \"at86rf401\",  6, \"__AVR_AT86RF401__\" },\n+  { \"avr25\",        ARCH_AVR25, NULL },\n+  { \"attiny13\",     ARCH_AVR25, \"__AVR_ATtiny13__\" },\n+  { \"attiny2313\",   ARCH_AVR25, \"__AVR_ATtiny2313__\" },\n+  { \"attiny24\",     ARCH_AVR25, \"__AVR_ATtiny24__\" },\n+  { \"attiny44\",     ARCH_AVR25, \"__AVR_ATtiny44__\" },\n+  { \"attiny84\",     ARCH_AVR25, \"__AVR_ATtiny84__\" },\n+  { \"attiny25\",     ARCH_AVR25, \"__AVR_ATtiny25__\" },\n+  { \"attiny45\",     ARCH_AVR25, \"__AVR_ATtiny45__\" },\n+  { \"attiny85\",     ARCH_AVR25, \"__AVR_ATtiny85__\" },\n+  { \"attiny261\",    ARCH_AVR25, \"__AVR_ATtiny261__\" },\n+  { \"attiny461\",    ARCH_AVR25, \"__AVR_ATtiny461__\" },\n+  { \"attiny861\",    ARCH_AVR25, \"__AVR_ATtiny861__\" },\n+  { \"at86rf401\",    ARCH_AVR25, \"__AVR_AT86RF401__\" },\n     /* Classic, > 8K.  */\n-  { \"avr3\",      3, NULL },\n-  { \"atmega103\", 3, \"__AVR_ATmega103__\" },\n-  { \"atmega603\", 3, \"__AVR_ATmega603__\" },\n-  { \"at43usb320\", 3, \"__AVR_AT43USB320__\" },\n-  { \"at43usb355\", 3, \"__AVR_AT43USB355__\" },\n-  { \"at76c711\",  3, \"__AVR_AT76C711__\" },\n+  { \"avr3\",         ARCH_AVR3, NULL },\n+  { \"atmega103\",    ARCH_AVR3, \"__AVR_ATmega103__\" },\n+  { \"atmega603\",    ARCH_AVR3, \"__AVR_ATmega603__\" },\n+  { \"at43usb320\",   ARCH_AVR3, \"__AVR_AT43USB320__\" },\n+  { \"at43usb355\",   ARCH_AVR3, \"__AVR_AT43USB355__\" },\n+  { \"at76c711\",     ARCH_AVR3, \"__AVR_AT76C711__\" },\n     /* Enhanced, <= 8K.  */\n-  { \"avr4\",      4, NULL },\n-  { \"atmega8\",   4, \"__AVR_ATmega8__\" },\n-  { \"atmega48\",   4, \"__AVR_ATmega48__\" },\n-  { \"atmega88\",   4, \"__AVR_ATmega88__\" },\n-  { \"atmega8515\", 4, \"__AVR_ATmega8515__\" },\n-  { \"atmega8535\", 4, \"__AVR_ATmega8535__\" },\n-  { \"at90pwm1\",  4, \"__AVR_AT90PWM1__\" },\n-  { \"at90pwm2\",  4, \"__AVR_AT90PWM2__\" },\n-  { \"at90pwm3\",  4, \"__AVR_AT90PWM3__\" },\n-  { \"at90usb82\",   4, \"__AVR_AT90USB82__\" },\n+  { \"avr4\",         ARCH_AVR4, NULL },\n+  { \"atmega8\",      ARCH_AVR4, \"__AVR_ATmega8__\" },\n+  { \"atmega48\",     ARCH_AVR4, \"__AVR_ATmega48__\" },\n+  { \"atmega88\",     ARCH_AVR4, \"__AVR_ATmega88__\" },\n+  { \"atmega8515\",   ARCH_AVR4, \"__AVR_ATmega8515__\" },\n+  { \"atmega8535\",   ARCH_AVR4, \"__AVR_ATmega8535__\" },\n+  { \"at90pwm1\",     ARCH_AVR4, \"__AVR_AT90PWM1__\" },\n+  { \"at90pwm2\",     ARCH_AVR4, \"__AVR_AT90PWM2__\" },\n+  { \"at90pwm3\",     ARCH_AVR4, \"__AVR_AT90PWM3__\" },\n+  { \"at90usb82\",    ARCH_AVR4, \"__AVR_AT90USB82__\" },\n     /* Enhanced, > 8K.  */\n-  { \"avr5\",      5, NULL },\n-  { \"atmega16\",  5, \"__AVR_ATmega16__\" },\n-  { \"atmega161\", 5, \"__AVR_ATmega161__\" },\n-  { \"atmega162\", 5, \"__AVR_ATmega162__\" },\n-  { \"atmega163\", 5, \"__AVR_ATmega163__\" },\n-  { \"atmega164p\",5, \"__AVR_ATmega164P__\" },\n-  { \"atmega165\", 5, \"__AVR_ATmega165__\" },\n-  { \"atmega165p\",5, \"__AVR_ATmega165P__\" },\n-  { \"atmega168\", 5, \"__AVR_ATmega168__\" },\n-  { \"atmega169\", 5, \"__AVR_ATmega169__\" },\n-  { \"atmega169p\",5, \"__AVR_ATmega169P__\" },\n-  { \"atmega32\",  5, \"__AVR_ATmega32__\" },\n-  { \"atmega323\", 5, \"__AVR_ATmega323__\" },\n-  { \"atmega324p\",5, \"__AVR_ATmega324P__\" },\n-  { \"atmega325\", 5, \"__AVR_ATmega325__\" },\n-  { \"atmega325p\",  5, \"__AVR_ATmega325P__\" },\n-  { \"atmega3250\", 5, \"__AVR_ATmega3250__\" },\n-  { \"atmega3250p\", 5, \"__AVR_ATmega3250P__\" },\n-  { \"atmega329\", 5, \"__AVR_ATmega329__\" },\n-  { \"atmega329p\",  5, \"__AVR_ATmega329P__\" },\n-  { \"atmega3290\", 5, \"__AVR_ATmega3290__\" },\n-  { \"atmega3290p\", 5, \"__AVR_ATmega3290P__\" },\n-  { \"atmega406\", 5, \"__AVR_ATmega406__\" },\n-  { \"atmega64\",  5, \"__AVR_ATmega64__\" },\n-  { \"atmega640\", 5, \"__AVR_ATmega640__\" },\n-  { \"atmega644\", 5, \"__AVR_ATmega644__\" },\n-  { \"atmega644p\",5, \"__AVR_ATmega644P__\" },\n-  { \"atmega645\", 5, \"__AVR_ATmega645__\" },\n-  { \"atmega6450\", 5, \"__AVR_ATmega6450__\" },\n-  { \"atmega649\", 5, \"__AVR_ATmega649__\" },\n-  { \"atmega6490\", 5, \"__AVR_ATmega6490__\" },\n-  { \"atmega128\", 5, \"__AVR_ATmega128__\" },\n-  { \"atmega1280\",5, \"__AVR_ATmega1280__\" },\n-  { \"atmega1281\",5, \"__AVR_ATmega1281__\" },\n-  { \"at90can32\", 5, \"__AVR_AT90CAN32__\" },\n-  { \"at90can64\", 5, \"__AVR_AT90CAN64__\" },\n-  { \"at90can128\", 5, \"__AVR_AT90CAN128__\" },\n-  { \"at90usb162\",  5, \"__AVR_AT90USB162__\" },\n-  { \"at90usb646\", 5, \"__AVR_AT90USB646__\" },\n-  { \"at90usb647\", 5, \"__AVR_AT90USB647__\" },\n-  { \"at90usb1286\", 5, \"__AVR_AT90USB1286__\" },\n-  { \"at90usb1287\", 5, \"__AVR_AT90USB1287__\" },\n-  { \"at94k\",     5, \"__AVR_AT94K__\" },\n+  { \"avr5\",         ARCH_AVR5, NULL },\n+  { \"atmega16\",     ARCH_AVR5, \"__AVR_ATmega16__\" },\n+  { \"atmega161\",    ARCH_AVR5, \"__AVR_ATmega161__\" },\n+  { \"atmega162\",    ARCH_AVR5, \"__AVR_ATmega162__\" },\n+  { \"atmega163\",    ARCH_AVR5, \"__AVR_ATmega163__\" },\n+  { \"atmega164p\",   ARCH_AVR5, \"__AVR_ATmega164P__\" },\n+  { \"atmega165\",    ARCH_AVR5, \"__AVR_ATmega165__\" },\n+  { \"atmega165p\",   ARCH_AVR5, \"__AVR_ATmega165P__\" },\n+  { \"atmega168\",    ARCH_AVR5, \"__AVR_ATmega168__\" },\n+  { \"atmega169\",    ARCH_AVR5, \"__AVR_ATmega169__\" },\n+  { \"atmega169p\",   ARCH_AVR5, \"__AVR_ATmega169P__\" },\n+  { \"atmega32\",     ARCH_AVR5, \"__AVR_ATmega32__\" },\n+  { \"atmega323\",    ARCH_AVR5, \"__AVR_ATmega323__\" },\n+  { \"atmega324p\",   ARCH_AVR5, \"__AVR_ATmega324P__\" },\n+  { \"atmega325\",    ARCH_AVR5, \"__AVR_ATmega325__\" },\n+  { \"atmega325p\",   ARCH_AVR5, \"__AVR_ATmega325P__\" },\n+  { \"atmega3250\",   ARCH_AVR5, \"__AVR_ATmega3250__\" },\n+  { \"atmega3250p\",  ARCH_AVR5, \"__AVR_ATmega3250P__\" },\n+  { \"atmega329\",    ARCH_AVR5, \"__AVR_ATmega329__\" },\n+  { \"atmega329p\",   ARCH_AVR5, \"__AVR_ATmega329P__\" },\n+  { \"atmega3290\",   ARCH_AVR5, \"__AVR_ATmega3290__\" },\n+  { \"atmega3290p\",  ARCH_AVR5, \"__AVR_ATmega3290P__\" },\n+  { \"atmega406\",    ARCH_AVR5, \"__AVR_ATmega406__\" },\n+  { \"atmega64\",     ARCH_AVR5, \"__AVR_ATmega64__\" },\n+  { \"atmega640\",    ARCH_AVR5, \"__AVR_ATmega640__\" },\n+  { \"atmega644\",    ARCH_AVR5, \"__AVR_ATmega644__\" },\n+  { \"atmega644p\",   ARCH_AVR5, \"__AVR_ATmega644P__\" },\n+  { \"atmega645\",    ARCH_AVR5, \"__AVR_ATmega645__\" },\n+  { \"atmega6450\",   ARCH_AVR5, \"__AVR_ATmega6450__\" },\n+  { \"atmega649\",    ARCH_AVR5, \"__AVR_ATmega649__\" },\n+  { \"atmega6490\",   ARCH_AVR5, \"__AVR_ATmega6490__\" },\n+  { \"atmega128\",    ARCH_AVR5, \"__AVR_ATmega128__\" },\n+  { \"atmega1280\",   ARCH_AVR5, \"__AVR_ATmega1280__\" },\n+  { \"atmega1281\",   ARCH_AVR5, \"__AVR_ATmega1281__\" },\n+  { \"at90can32\",    ARCH_AVR5, \"__AVR_AT90CAN32__\" },\n+  { \"at90can64\",    ARCH_AVR5, \"__AVR_AT90CAN64__\" },\n+  { \"at90can128\",   ARCH_AVR5, \"__AVR_AT90CAN128__\" },\n+  { \"at90usb162\",   ARCH_AVR5, \"__AVR_AT90USB162__\" },\n+  { \"at90usb646\",   ARCH_AVR5, \"__AVR_AT90USB646__\" },\n+  { \"at90usb647\",   ARCH_AVR5, \"__AVR_AT90USB647__\" },\n+  { \"at90usb1286\",  ARCH_AVR5, \"__AVR_AT90USB1286__\" },\n+  { \"at90usb1287\",  ARCH_AVR5, \"__AVR_AT90USB1287__\" },\n+  { \"at94k\",        ARCH_AVR5, \"__AVR_AT94K__\" },\n     /* Assembler only.  */\n-  { \"avr1\",      1, NULL },\n-  { \"at90s1200\", 1, \"__AVR_AT90S1200__\" },\n-  { \"attiny11\",  1, \"__AVR_ATtiny11__\" },\n-  { \"attiny12\",  1, \"__AVR_ATtiny12__\" },\n-  { \"attiny15\",  1, \"__AVR_ATtiny15__\" },\n-  { \"attiny28\",  1, \"__AVR_ATtiny28__\" },\n-  { NULL,        0, NULL }\n+  { \"avr1\",         ARCH_AVR1, NULL },\n+  { \"at90s1200\",    ARCH_AVR1, \"__AVR_AT90S1200__\" },\n+  { \"attiny11\",     ARCH_AVR1, \"__AVR_ATtiny11__\" },\n+  { \"attiny12\",     ARCH_AVR1, \"__AVR_ATtiny12__\" },\n+  { \"attiny15\",     ARCH_AVR1, \"__AVR_ATtiny15__\" },\n+  { \"attiny28\",     ARCH_AVR1, \"__AVR_ATtiny28__\" },\n+  { NULL,           ARCH_UNKNOWN, NULL }\n };\n \n int avr_case_values_threshold = 30000;"}, {"sha": "640adadac46076c3bd4a91a029ce56e6f3908160", "filename": "gcc/config/avr/avr.h", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14683174753fa37a67840c453ff758da3b873474/gcc%2Fconfig%2Favr%2Favr.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14683174753fa37a67840c453ff758da3b873474/gcc%2Fconfig%2Favr%2Favr.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.h?ref=14683174753fa37a67840c453ff758da3b873474", "patch": "@@ -757,9 +757,7 @@ mmcu=*:-mmcu=%*}\"\n   mmcu=at76*:-m avr3}\\\n %{mmcu=atmega8*|\\\n   mmcu=atmega48|\\\n-  mmcu=at90pwm1|\\\n-  mmcu=at90pwm2|\\\n-  mmcu=at90pwm3:-m avr4}\\\n+  mmcu=at90pwm*:-m avr4}\\\n %{mmcu=atmega16*|\\\n   mmcu=atmega32*|\\\n   mmcu=atmega406|\\\n@@ -770,18 +768,14 @@ mmcu=*:-mmcu=%*}\"\n   mmcu=at94k:-m avr5}\\\n %{mmcu=atmega324*|\\\n   mmcu=atmega325*|\\\n-  mmcu=atmega3250*|\\\n   mmcu=atmega329*|\\\n-  mmcu=atmega3290*|\\\n   mmcu=atmega406|\\\n   mmcu=atmega48|\\\n   mmcu=atmega88|\\\n   mmcu=atmega64|\\\n   mmcu=atmega644*|\\\n-  mmcu=atmega645|\\\n-  mmcu=atmega6450|\\\n-  mmcu=atmega649|\\\n-  mmcu=atmega6490|\\\n+  mmcu=atmega645*|\\\n+  mmcu=atmega649*|\\\n   mmcu=atmega128|\\\n   mmcu=atmega162|\\\n   mmcu=atmega164*|\\"}]}