{"sha": "b6bee398d7a1f1268eea07a3d33617d916d962a1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjZiZWUzOThkN2ExZjEyNjhlZWEwN2EzZDMzNjE3ZDkxNmQ5NjJhMQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "oliva@dcc.unicamp.br", "date": "1998-09-15T14:28:07Z"}, "committer": {"name": "Alexandre Oliva", "email": "oliva@gcc.gnu.org", "date": "1998-09-15T14:28:07Z"}, "message": "typeck.c (comptypes): when comparing pointer types...\n\n\t* typeck.c (comptypes): when comparing pointer types, check\n\twhether referred types match even in strictest modes\n\nFrom-SVN: r22429", "tree": {"sha": "68c8d02d935887306abcefd7c4578fb904f16ca7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68c8d02d935887306abcefd7c4578fb904f16ca7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b6bee398d7a1f1268eea07a3d33617d916d962a1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6bee398d7a1f1268eea07a3d33617d916d962a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b6bee398d7a1f1268eea07a3d33617d916d962a1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b6bee398d7a1f1268eea07a3d33617d916d962a1/comments", "author": null, "committer": null, "parents": [{"sha": "3d821ea145fe2073e552e48cec4f35c8441e507c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d821ea145fe2073e552e48cec4f35c8441e507c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d821ea145fe2073e552e48cec4f35c8441e507c"}], "stats": {"total": 18, "additions": 11, "deletions": 7}, "files": [{"sha": "6311f9433d9df289fa24893d2642a1e82debac9c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6bee398d7a1f1268eea07a3d33617d916d962a1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6bee398d7a1f1268eea07a3d33617d916d962a1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b6bee398d7a1f1268eea07a3d33617d916d962a1", "patch": "@@ -1,3 +1,8 @@\n+1998-09-15  Alexandre Oliva  <oliva@dcc.unicamp.br>\n+\n+\t* typeck.c (comptypes): when comparing pointer types, check\n+\twhether referred types match even in strictest modes\n+\n 1998-09-15  Mark Mitchell  <mark@markmitchell.com>\n \n \t* cp-tree.h: Revert previous change."}, {"sha": "6fc3707160e31dd0aa9682bd9a9ef86b29949194", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 6, "deletions": 7, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b6bee398d7a1f1268eea07a3d33617d916d962a1/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b6bee398d7a1f1268eea07a3d33617d916d962a1/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=b6bee398d7a1f1268eea07a3d33617d916d962a1", "patch": "@@ -853,11 +853,12 @@ comptypes (type1, type2, strict)\n     case REFERENCE_TYPE:\n       t1 = TREE_TYPE (t1);\n       t2 = TREE_TYPE (t2);\n-      if (t1 == t2)\n-\t{\n-\t  val = 1;\n-\t  break;\n-\t}\n+      /* first, check whether the referred types match with the\n+         required level of strictness */\n+      val = comptypes (t1, t2, strict);\n+      if (val)\n+\tbreak;\n+      /* if they do not, try more relaxed alternatives */\n       if (strict <= 0)\n \t{\n \t  if (TREE_CODE (t1) == RECORD_TYPE && TREE_CODE (t2) == RECORD_TYPE)\n@@ -879,8 +880,6 @@ comptypes (type1, type2, strict)\n \t    }\n \t  return 0;\n \t}\n-      else\n-\tval = comptypes (t1, t2, strict);\n       break;\n \n     case FUNCTION_TYPE:"}]}