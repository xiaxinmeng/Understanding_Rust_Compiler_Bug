{"sha": "9b6fb97c99abe64147f82a3ea6e6ed598e387482", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWI2ZmI5N2M5OWFiZTY0MTQ3ZjgyYTNlYTZlNmVkNTk4ZTM4NzQ4Mg==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-08-07T19:15:58Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-08-07T19:15:58Z"}, "message": "[AArch64] Fix INSR for zero floats\n\nWe used INSR to handle zero integers but not zero floats.\n\n2019-08-07  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* config/aarch64/constraints.md (Z): Handle floating-point zeros too.\n\t* config/aarch64/predicates.md (aarch64_reg_or_zero): Likewise.\n\ngcc/testsuite/\n\t* gcc.target/aarch64/sve/init_13.c: New test.\n\nFrom-SVN: r274193", "tree": {"sha": "a17e8c78f837d27323e987efa07cd86a13a484aa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a17e8c78f837d27323e987efa07cd86a13a484aa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b6fb97c99abe64147f82a3ea6e6ed598e387482", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b6fb97c99abe64147f82a3ea6e6ed598e387482", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b6fb97c99abe64147f82a3ea6e6ed598e387482", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b6fb97c99abe64147f82a3ea6e6ed598e387482/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "61ee25b9e7d84fbb18218887d1fecfb10f72993a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/61ee25b9e7d84fbb18218887d1fecfb10f72993a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/61ee25b9e7d84fbb18218887d1fecfb10f72993a"}], "stats": {"total": 34, "additions": 30, "deletions": 4}, "files": [{"sha": "45050ed2f7bdc10b18354f7027dd4611e5f79632", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9b6fb97c99abe64147f82a3ea6e6ed598e387482", "patch": "@@ -1,3 +1,8 @@\n+2019-08-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* config/aarch64/constraints.md (Z): Handle floating-point zeros too.\n+\t* config/aarch64/predicates.md (aarch64_reg_or_zero): Likewise.\n+\n 2019-08-07  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* config/aarch64/aarch64-sve.md (vec_shl_insert_<mode>): Add"}, {"sha": "824000a842364e5ee2116ad63422d2a815efb119", "filename": "gcc/config/aarch64/constraints.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Fconfig%2Faarch64%2Fconstraints.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Fconfig%2Faarch64%2Fconstraints.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Fconstraints.md?ref=9b6fb97c99abe64147f82a3ea6e6ed598e387482", "patch": "@@ -114,8 +114,8 @@\n        (match_test \"aarch64_float_const_zero_rtx_p (op)\")))\n \n (define_constraint \"Z\"\n-  \"Integer constant zero.\"\n-  (match_test \"op == const0_rtx\"))\n+  \"Integer or floating-point constant zero.\"\n+  (match_test \"op == CONST0_RTX (GET_MODE (op))\"))\n \n (define_constraint \"Ush\"\n   \"A constraint that matches an absolute symbolic address high part.\""}, {"sha": "2cd0b87b28750fc6440a68c9f523ddf567bb5eb5", "filename": "gcc/config/aarch64/predicates.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Fconfig%2Faarch64%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Fconfig%2Faarch64%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Fpredicates.md?ref=9b6fb97c99abe64147f82a3ea6e6ed598e387482", "patch": "@@ -57,9 +57,9 @@\n             (match_test \"REGNO_REG_CLASS (REGNO (op)) == FP_REGS\"))))\n \n (define_predicate \"aarch64_reg_or_zero\"\n-  (and (match_code \"reg,subreg,const_int\")\n+  (and (match_code \"reg,subreg,const_int,const_double\")\n        (ior (match_operand 0 \"register_operand\")\n-\t    (match_test \"op == const0_rtx\"))))\n+\t    (match_test \"op == CONST0_RTX (GET_MODE (op))\"))))\n \n (define_predicate \"aarch64_reg_or_fp_zero\"\n   (ior (match_operand 0 \"register_operand\")"}, {"sha": "cf4cbabca69d304abad459c6c8d1147e4d0aeed9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9b6fb97c99abe64147f82a3ea6e6ed598e387482", "patch": "@@ -1,3 +1,7 @@\n+2019-08-07  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* gcc.target/aarch64/sve/init_13.c: New test.\n+\n 2019-08-07  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* gcc.target/aarch64/sve/init_12.c: Expect w1 to be moved into"}, {"sha": "eea417063052684eea0fa32fd8e5f8d3e01286c2", "filename": "gcc/testsuite/gcc.target/aarch64/sve/init_13.c", "status": "added", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Finit_13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b6fb97c99abe64147f82a3ea6e6ed598e387482/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Finit_13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Finit_13.c?ref=9b6fb97c99abe64147f82a3ea6e6ed598e387482", "patch": "@@ -0,0 +1,17 @@\n+/* { dg-do assemble { target aarch64_asm_sve_ok } } */\n+/* { dg-options \"-O -msve-vector-bits=256 --save-temps\" } */\n+/* { dg-final { check-function-bodies \"**\" \"\" } } */\n+\n+typedef float vnx4sf __attribute__((vector_size (32)));\n+\n+/*\n+** foo:\n+**\tmov\t(z[0-9]+\\.s), s0\n+**\tinsr\t\\1, wzr\n+**\t...\n+*/\n+vnx4sf\n+foo (float a)\n+{\n+  return (vnx4sf) { 0.0f, a, a, a, a, a, a, a };\n+}"}]}