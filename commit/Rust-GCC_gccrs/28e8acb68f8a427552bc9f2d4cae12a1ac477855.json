{"sha": "28e8acb68f8a427552bc9f2d4cae12a1ac477855", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhlOGFjYjY4ZjhhNDI3NTUyYmM5ZjJkNGNhZTEyYTFhYzQ3Nzg1NQ==", "commit": {"author": {"name": "Angela Marie Thomas", "email": "angela@cygnus.com", "date": "2001-05-18T18:55:44Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-05-18T18:55:44Z"}, "message": "libstdc++-v3-dg.exp (libstdc++-v3-init): Set flags appropriately for remote testing and testing installed files without...\n\n\n2001-05-18  Angela Marie Thomas <angela@cygnus.com>\n\n        * testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-init): Set flags\n        appropriately for remote testing and testing installed files without\n        a build dir.\n\nFrom-SVN: r42272", "tree": {"sha": "5c8859f4e7f61240d9795ca69b3031ac09e3efc6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5c8859f4e7f61240d9795ca69b3031ac09e3efc6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28e8acb68f8a427552bc9f2d4cae12a1ac477855", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28e8acb68f8a427552bc9f2d4cae12a1ac477855", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28e8acb68f8a427552bc9f2d4cae12a1ac477855", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28e8acb68f8a427552bc9f2d4cae12a1ac477855/comments", "author": null, "committer": null, "parents": [{"sha": "9d2896044874f318d09f171ef5a8581f50ca8d7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9d2896044874f318d09f171ef5a8581f50ca8d7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9d2896044874f318d09f171ef5a8581f50ca8d7b"}], "stats": {"total": 32, "additions": 29, "deletions": 3}, "files": [{"sha": "b18874ca46322ef691975452d995747872a934e9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28e8acb68f8a427552bc9f2d4cae12a1ac477855/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28e8acb68f8a427552bc9f2d4cae12a1ac477855/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=28e8acb68f8a427552bc9f2d4cae12a1ac477855", "patch": "@@ -1,3 +1,9 @@\n+2001-05-18  Angela Marie Thomas <angela@cygnus.com>\n+\n+        * testsuite/lib/libstdc++-v3-dg.exp (libstdc++-v3-init): Set flags\n+        appropriately for remote testing and testing installed files without\n+        a build dir.\n+\n 2001-05-18  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* acinclude.m4 (GLIBCPP_EXPORT_INSTALL_INFO): Set glibcpp_srcdir"}, {"sha": "a2df3ed4e562b5f07bba822c4c61d03a3358a9a5", "filename": "libstdc++-v3/testsuite/lib/libstdc++-v3-dg.exp", "status": "modified", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28e8acb68f8a427552bc9f2d4cae12a1ac477855/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28e8acb68f8a427552bc9f2d4cae12a1ac477855/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B-v3-dg.exp?ref=28e8acb68f8a427552bc9f2d4cae12a1ac477855", "patch": "@@ -30,9 +30,29 @@ proc libstdc++-v3-init { args } {\n     global gluefile wrap_flags\n \n     set blddir   [lookfor_file $outdir libstdc++-v3]\n-    set cxx \t [exec sh ${blddir}/testsuite_flags --build-cxx]\n-    set cxxflags [exec sh ${blddir}/testsuite_flags --cxxflags]\n-    set includes [exec sh ${blddir}/testsuite_flags --build-includes]\n+\n+    if [is_remote host] {\n+        set header [remote_download host ${srcdir}/debug_assert.h]\n+        if { $header == \"\" } {\n+            verbose -log \"Unable to download ${srcdir}/debug_assert.h to host.\"\n+            return \"untested\"\n+        }\n+      set cxx [transform \"g++\"]\n+      set cxxflags \"-ggdb3 -DDEBUG_ASSERT\"\n+        set includes \"-I./\"\n+    } else {\n+        # If we find a testsuite_flags file, we're testing in the build dir.\n+        set flags_file \"${blddir}/testsuite_flags\"\n+        if { [file exists $flags_file] } {\n+            set cxx [exec sh $flags_file --build-cxx]\n+            set cxxflags [exec sh $flags_file --cxxflags]\n+            set includes [exec sh $flags_file --build-includes]\n+        } else {\n+            set cxx [transform \"g++\"]\n+            set cxxflags \"-ggdb3 -DDEBUG_ASSERT\"\n+            set includes \"-I${srcdir}\"\n+        }\n+    }\n \n     # By default, we assume we want to run program images.\n     global dg-do-what-default"}]}