{"sha": "ff0a4409da5157eb7542b43f1dfc73b9384b90e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmYwYTQ0MDlkYTUxNTdlYjc1NDJiNDNmMWRmYzczYjkzODRiOTBlMw==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1995-05-12T20:51:46Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1995-05-12T20:51:46Z"}, "message": "pa.md (bb patterns): Fix bugs in length computation exposed by recent branch shortening and...\n\n\t* pa.md (bb patterns): Fix bugs in length computation exposed by\n\trecent branch shortening and genattrtab changes.\n\nFrom-SVN: r9665", "tree": {"sha": "680cf7b9f986cebb18cd64c8598d63643f7ecc80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/680cf7b9f986cebb18cd64c8598d63643f7ecc80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff0a4409da5157eb7542b43f1dfc73b9384b90e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff0a4409da5157eb7542b43f1dfc73b9384b90e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff0a4409da5157eb7542b43f1dfc73b9384b90e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff0a4409da5157eb7542b43f1dfc73b9384b90e3/comments", "author": null, "committer": null, "parents": [{"sha": "71380ac6922a4329c3d7f28213e1ca9c63ae0720", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71380ac6922a4329c3d7f28213e1ca9c63ae0720", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71380ac6922a4329c3d7f28213e1ca9c63ae0720"}], "stats": {"total": 64, "additions": 52, "deletions": 12}, "files": [{"sha": "7587865c0b6aa69010e7f93ce14c8730acf19f0f", "filename": "gcc/config/pa/pa.md", "status": "modified", "additions": 52, "deletions": 12, "changes": 64, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff0a4409da5157eb7542b43f1dfc73b9384b90e3/gcc%2Fconfig%2Fpa%2Fpa.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff0a4409da5157eb7542b43f1dfc73b9384b90e3/gcc%2Fconfig%2Fpa%2Fpa.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.md?ref=ff0a4409da5157eb7542b43f1dfc73b9384b90e3", "patch": "@@ -1051,19 +1051,39 @@\n \t\t\t      (const_int 1)\n \t\t\t      (match_operand:SI 1 \"uint5_operand\" \"\"))\n \t     (const_int 0))\n-\t (match_operand 2 \"pc_or_label_operand\" \"\")\n-\t (match_operand 3 \"pc_or_label_operand\" \"\")))]\n+\t (label_ref (match_operand 2 \"\" \"\"))\n+\t (pc)))]\n   \"\"\n   \"*\n {\n   return output_bb (operands, INSN_ANNULLED_BRANCH_P (insn),\n-\t\t\t get_attr_length (insn),\n-\t\t\t (operands[3] != pc_rtx),\n-\t\t\t insn, 0);\n+\t\t\t get_attr_length (insn), 0, insn, 0);\n }\"\n [(set_attr \"type\" \"cbranch\")\n  (set (attr \"length\")\n-    (if_then_else (lt (abs (minus (match_dup 0) (plus (pc) (const_int 8))))\n+    (if_then_else (lt (abs (minus (match_dup 2) (plus (pc) (const_int 8))))\n+\t\t      (const_int 8188))\n+           (const_int 4)\n+\t   (const_int 8)))])\n+\n+(define_insn \"\"\n+  [(set (pc)\n+\t(if_then_else\n+\t (ne (zero_extract:SI (match_operand:SI 0 \"register_operand\" \"r\")\n+\t\t\t      (const_int 1)\n+\t\t\t      (match_operand:SI 1 \"uint5_operand\" \"\"))\n+\t     (const_int 0))\n+\t (pc)\n+\t (label_ref (match_operand 2 \"\" \"\"))))]\n+  \"\"\n+  \"*\n+{\n+  return output_bb (operands, INSN_ANNULLED_BRANCH_P (insn),\n+\t\t\t get_attr_length (insn), 1, insn, 0);\n+}\"\n+[(set_attr \"type\" \"cbranch\")\n+ (set (attr \"length\")\n+    (if_then_else (lt (abs (minus (match_dup 2) (plus (pc) (const_int 8))))\n \t\t      (const_int 8188))\n            (const_int 4)\n \t   (const_int 8)))])\n@@ -1075,19 +1095,39 @@\n \t\t\t      (const_int 1)\n \t\t\t      (match_operand:SI 1 \"uint5_operand\" \"\"))\n \t     (const_int 0))\n-\t (match_operand 2 \"pc_or_label_operand\" \"\")\n-\t (match_operand 3 \"pc_or_label_operand\" \"\")))]\n+\t (label_ref (match_operand 2 \"\" \"\"))\n+\t (pc)))]\n   \"\"\n   \"*\n {\n   return output_bb (operands, INSN_ANNULLED_BRANCH_P (insn),\n-\t\t\t get_attr_length (insn),\n-\t\t\t (operands[3] != pc_rtx),\n-\t\t\t insn, 1);\n+\t\t\t get_attr_length (insn), 0, insn, 1);\n }\"\n [(set_attr \"type\" \"cbranch\")\n  (set (attr \"length\")\n-    (if_then_else (lt (abs (minus (match_dup 0) (plus (pc) (const_int 8))))\n+    (if_then_else (lt (abs (minus (match_dup 2) (plus (pc) (const_int 8))))\n+\t\t      (const_int 8188))\n+           (const_int 4)\n+\t   (const_int 8)))])\n+\n+(define_insn \"\"\n+  [(set (pc)\n+\t(if_then_else\n+\t (eq (zero_extract:SI (match_operand:SI 0 \"register_operand\" \"r\")\n+\t\t\t      (const_int 1)\n+\t\t\t      (match_operand:SI 1 \"uint5_operand\" \"\"))\n+\t     (const_int 0))\n+\t (pc)\n+\t (label_ref (match_operand 2 \"\" \"\"))))]\n+  \"\"\n+  \"*\n+{\n+  return output_bb (operands, INSN_ANNULLED_BRANCH_P (insn),\n+\t\t\t get_attr_length (insn), 1, insn, 1);\n+}\"\n+[(set_attr \"type\" \"cbranch\")\n+ (set (attr \"length\")\n+    (if_then_else (lt (abs (minus (match_dup 2) (plus (pc) (const_int 8))))\n \t\t      (const_int 8188))\n            (const_int 4)\n \t   (const_int 8)))])"}]}