{"sha": "9f8e4e845ba0240f599fd541c5cee10cf8654cc5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWY4ZTRlODQ1YmEwMjQwZjU5OWZkNTQxYzVjZWUxMGNmODY1NGNjNQ==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@redhat.com", "date": "2008-05-22T16:20:55Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "2008-05-22T16:20:55Z"}, "message": "re PR libgcj/35020 (Class.getSimpleName() differs from Sun Java)\n\n2008-05-22  Andrew Haley  <aph@redhat.com>\n\n        PR libgcj/35020\n        * java/lang/Class.java (getSimpleName): Import from GNU Classpath.\n\nFrom-SVN: r135771", "tree": {"sha": "74bb902e22e1765a9f3eb9e9c8e239af478de42b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74bb902e22e1765a9f3eb9e9c8e239af478de42b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f8e4e845ba0240f599fd541c5cee10cf8654cc5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f8e4e845ba0240f599fd541c5cee10cf8654cc5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f8e4e845ba0240f599fd541c5cee10cf8654cc5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/comments", "author": {"login": "theRealAph", "id": 254637, "node_id": "MDQ6VXNlcjI1NDYzNw==", "avatar_url": "https://avatars.githubusercontent.com/u/254637?v=4", "gravatar_id": "", "url": "https://api.github.com/users/theRealAph", "html_url": "https://github.com/theRealAph", "followers_url": "https://api.github.com/users/theRealAph/followers", "following_url": "https://api.github.com/users/theRealAph/following{/other_user}", "gists_url": "https://api.github.com/users/theRealAph/gists{/gist_id}", "starred_url": "https://api.github.com/users/theRealAph/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/theRealAph/subscriptions", "organizations_url": "https://api.github.com/users/theRealAph/orgs", "repos_url": "https://api.github.com/users/theRealAph/repos", "events_url": "https://api.github.com/users/theRealAph/events{/privacy}", "received_events_url": "https://api.github.com/users/theRealAph/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4799e6aa58eab27112b27c9ca328f57430f8d1ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4799e6aa58eab27112b27c9ca328f57430f8d1ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4799e6aa58eab27112b27c9ca328f57430f8d1ab"}], "stats": {"total": 34, "additions": 22, "deletions": 12}, "files": [{"sha": "52061d2c1edaa7cd82ab33a88d31895a42fce69b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=9f8e4e845ba0240f599fd541c5cee10cf8654cc5", "patch": "@@ -1,3 +1,8 @@\n+2008-05-22  Andrew Haley  <aph@redhat.com>\n+\n+\tPR libgcj/35020\n+\t* java/lang/Class.java (getSimpleName): Import from GNU Classpath.\n+\n 2008-05-20  David Daney  <ddaney@avtrex.com>\n \n \tPR libgcj/36252"}, {"sha": "09e3e86f9954b60f48813dff60c6349d9a59a6f1", "filename": "libjava/classpath/lib/java/lang/Class$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2Fclasspath%2Flib%2Fjava%2Flang%2FClass%241.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2Fclasspath%2Flib%2Fjava%2Flang%2FClass%241.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fjava%2Flang%2FClass%241.class?ref=9f8e4e845ba0240f599fd541c5cee10cf8654cc5"}, {"sha": "bdcfcfe83bda48e1ab9fce5acf4427d4f3df4cc3", "filename": "libjava/classpath/lib/java/lang/Class.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2Fclasspath%2Flib%2Fjava%2Flang%2FClass.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2Fclasspath%2Flib%2Fjava%2Flang%2FClass.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fjava%2Flang%2FClass.class?ref=9f8e4e845ba0240f599fd541c5cee10cf8654cc5"}, {"sha": "d59e83ea4ec336c19f96d4c79090eb7ac1ee4dc5", "filename": "libjava/java/lang/Class.java", "status": "modified", "additions": 17, "deletions": 12, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2Fjava%2Flang%2FClass.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f8e4e845ba0240f599fd541c5cee10cf8654cc5/libjava%2Fjava%2Flang%2FClass.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FClass.java?ref=9f8e4e845ba0240f599fd541c5cee10cf8654cc5", "patch": "@@ -1075,22 +1075,27 @@ public T[] getEnumConstants()\n    */\n   public String getSimpleName()\n   {\n-    StringBuffer sb = new StringBuffer();\n-    Class klass = this;\n-    int arrayCount = 0;\n-    while (klass.isArray())\n+    if (isAnonymousClass())\n+      return \"\";\n+    if (isArray())\n       {\n-\tklass = klass.getComponentType();\n-\t++arrayCount;\n+\treturn getComponentType().getSimpleName() + \"[]\";\n       }\n-    if (! klass.isAnonymousClass())\n+    String fullName = getName();\n+    int pos = fullName.lastIndexOf(\"$\");\n+    if (pos == -1)\n+      pos = 0;\n+    else\n       {\n-\tString fullName = klass.getName();\n-\tsb.append(fullName, fullName.lastIndexOf(\".\") + 1, fullName.length());\n+\t++pos;\n+\twhile (Character.isDigit(fullName.charAt(pos)))\n+\t  ++pos;\n       }\n-    while (arrayCount-- > 0)\n-      sb.append(\"[]\");\n-    return sb.toString();\n+    int packagePos = fullName.lastIndexOf(\".\", pos);\n+    if (packagePos == -1)\n+      return fullName.substring(pos);\n+    else\n+      return fullName.substring(packagePos + 1);\n   }\n \n   /**"}]}