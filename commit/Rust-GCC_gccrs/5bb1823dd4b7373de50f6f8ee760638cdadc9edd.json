{"sha": "5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWJiMTgyM2RkNGI3MzczZGU1MGY2ZjhlZTc2MDYzOGNkYWRjOWVkZA==", "commit": {"author": {"name": "Dorit Nuzman", "email": "dorit@il.ibm.com", "date": "2005-07-28T15:12:49Z"}, "committer": {"name": "Dorit Nuzman", "email": "dorit@gcc.gnu.org", "date": "2005-07-28T15:12:49Z"}, "message": "re PR tree-optimization/22506 (ICE with -ftree-vectorize in var_ann, at tree-flow-inline.h:115)\n\n        PR tree-optimization/22506\n        * tree-vectorizer.c (update_phi_nodes_for_guard2): Skip loop-closed\n        phis whose argument is constant.\n\nFrom-SVN: r102487", "tree": {"sha": "fdb8de2cbf7dd17ca5af05ea3b9e411ebaaebcac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fdb8de2cbf7dd17ca5af05ea3b9e411ebaaebcac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/comments", "author": null, "committer": null, "parents": [{"sha": "0d9f15f1a0d3f990c81781af2f065206650b81ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d9f15f1a0d3f990c81781af2f065206650b81ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d9f15f1a0d3f990c81781af2f065206650b81ec"}], "stats": {"total": 27, "additions": 27, "deletions": 0}, "files": [{"sha": "404286c0b4f40fd7198c2b43226e2f4301115dca", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "patch": "@@ -1,3 +1,9 @@\n+2005-07-28  Dorit Nuzman  <dorit@il.ibm.com>\n+\n+\tPR tree-optimization/22506\n+\t* tree-vectorizer.c (update_phi_nodes_for_guard2): Skip loop-closed\n+\tphis whose argument is constant.\n+\n 2005-07-28  J\"orn Rennecke <joern.rennecke@st.com>\n \n \tPR rtl-optimization/18992"}, {"sha": "c97938347a461de96eda0380970df7bb5d2848cc", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "patch": "@@ -1,3 +1,8 @@\n+2005-07-28  Dorit Nuzman  <dorit@il.ibm.com>\n+\n+\tPR tree-optimization/22506\n+\t* gcc.dg/vect/ps22506.c: New test.\n+\n 2005-07-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/21149"}, {"sha": "fa221182e2cf6d2a3a4a4eaff37380be2c2651aa", "filename": "gcc/testsuite/gcc.dg/vect/pr22506.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr22506.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr22506.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr22506.c?ref=5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-require-effective-target vect_int } */\n+\n+float x[3];\n+\n+void foo()\n+{\n+    int i;\n+\n+    for (i=0; i<5; ++i) x[i]=0;\n+    for (i=0; i<4; ++i) ;\n+}"}, {"sha": "b38156aab1a06dc2a6bda139b8bbd1cf4665549c", "filename": "gcc/tree-vectorizer.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2Ftree-vectorizer.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5bb1823dd4b7373de50f6f8ee760638cdadc9edd/gcc%2Ftree-vectorizer.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.c?ref=5bb1823dd4b7373de50f6f8ee760638cdadc9edd", "patch": "@@ -640,6 +640,10 @@ slpeel_update_phi_nodes_for_guard2 (edge guard_edge, struct loop *loop,\n     {\n       orig_phi = update_phi;\n       orig_def = PHI_ARG_DEF_FROM_EDGE (orig_phi, e);\n+      /* This loop-closed-phi actually doesn't represent a use\n+         out of the loop - the phi arg is a constant.  */ \n+      if (TREE_CODE (orig_def) != SSA_NAME)\n+        continue;\n       orig_def_new_name = get_current_def (orig_def);\n       arg = NULL_TREE;\n "}]}