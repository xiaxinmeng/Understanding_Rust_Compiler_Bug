{"sha": "fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQzYmZlZmJkOTMyNTljYTRhZjY0ZTgyMTM4OGE2ZWM4MjRmYTBkZA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2019-09-11T11:37:39Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2019-09-11T11:37:39Z"}, "message": "re PR rtl-optimization/89435 (wrong code with -O1 -march=armv4 -fno-forward-propagate with __builtin_sub_overflow())\n\n\tPR rtl-optimization/89435\n\tPR rtl-optimization/89795\n\tPR rtl-optimization/91720\n\t* gcc.dg/pr89435.c: New test.\n\t* gcc.dg/pr89795.c: New test.\n\t* gcc.dg/pr91720.c: New test.\n\nFrom-SVN: r275642", "tree": {"sha": "20f8222cf0240714f29d8546f73fbe2da346df80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/20f8222cf0240714f29d8546f73fbe2da346df80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7994803c00a3aba210f76d3b61c53300c549969d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7994803c00a3aba210f76d3b61c53300c549969d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7994803c00a3aba210f76d3b61c53300c549969d"}], "stats": {"total": 77, "additions": 77, "deletions": 0}, "files": [{"sha": "aa3127cf3fdb9b3071fefe27d6123fd31ff96f24", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "patch": "@@ -1,3 +1,12 @@\n+2019-09-11  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR rtl-optimization/89435\n+\tPR rtl-optimization/89795\n+\tPR rtl-optimization/91720\n+\t* gcc.dg/pr89435.c: New test.\n+\t* gcc.dg/pr89795.c: New test.\n+\t* gcc.dg/pr91720.c: New test.\n+\n 2019-09-11  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/90387"}, {"sha": "d72d087f5ce3fe5a4fcf5d860f98cd837e22df52", "filename": "gcc/testsuite/gcc.dg/pr89435.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89435.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89435.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89435.c?ref=fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "patch": "@@ -0,0 +1,21 @@\n+/* PR rtl-optimization/89435 */\n+/* { dg-do run } */\n+/* { dg-options \"-O1 -fno-forward-propagate -fno-tree-forwprop -fno-tree-ccp\" } */\n+\n+unsigned short a;\n+unsigned int b, c, d, e, f;\n+\n+int\n+main ()\n+{\n+#if __CHAR_BIT__ == 8 && __SIZEOF_INT__ == 4\n+  unsigned char g = e = __builtin_mul_overflow_p (5, 542624702, 0);\n+  d = __builtin_bswap64 (a);\n+  b = __builtin_sub_overflow ((unsigned char) -e, (unsigned int) d, &g);\n+  e = __builtin_mul_overflow (b, c, &a);\n+  f = g + e;\n+  if (f != 0xff)\n+    __builtin_abort ();\n+#endif\n+  return 0;\n+}"}, {"sha": "4ceaa433f3cc83cde321cb5e59a71a5412a08d1b", "filename": "gcc/testsuite/gcc.dg/pr89795.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89795.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89795.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr89795.c?ref=fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "patch": "@@ -0,0 +1,25 @@\n+/* PR rtl-optimization/89795 */\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -fno-dce -fno-forward-propagate -fno-sched-pressure\" } */\n+\n+unsigned char a;\n+unsigned b, c, d;\n+\n+int\n+main ()\n+{\n+#if __CHAR_BIT__ == 8\n+  unsigned x;\n+  int e, f;\n+  unsigned char g;\n+  e = __builtin_bswap32 (a);\n+  f = __builtin_ffs (~(unsigned short) e);\n+  a = __builtin_mul_overflow ((unsigned char) 0xf7, f, &g);\n+  a |= __builtin_sub_overflow_p (c, 0, (unsigned char) 0);\n+  d = g + b;\n+  x = d;\n+  if (x != 0xf7)\n+    __builtin_abort ();\n+#endif\n+  return 0;\n+}"}, {"sha": "4abdace94da1f2288448a42373b360f4f28e72cd", "filename": "gcc/testsuite/gcc.dg/pr91720.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr91720.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd3bfefbd93259ca4af64e821388a6ec824fa0dd/gcc%2Ftestsuite%2Fgcc.dg%2Fpr91720.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr91720.c?ref=fd3bfefbd93259ca4af64e821388a6ec824fa0dd", "patch": "@@ -0,0 +1,22 @@\n+/* PR rtl-optimization/91720 */\n+/* { dg-do run } */\n+/* { dg-options \"-Og -fno-forward-propagate -frerun-cse-after-loop -fno-tree-fre\" } */\n+\n+unsigned a, b;\n+\n+int\n+main ()\n+{\n+#if __CHAR_BIT__ == 8\n+  unsigned c = 1;\n+  unsigned long long d = 0;\n+  unsigned char e = 0;\n+  e = __builtin_sub_overflow (d, e, &a) ? 0 : 0x80;\n+  e = e << 7 | e >> c;\n+  __builtin_memmove (&d, &a, 2);\n+  b = e;\n+  if (b != 0x40)\n+    __builtin_abort ();\n+#endif\n+  return 0;\n+}"}]}