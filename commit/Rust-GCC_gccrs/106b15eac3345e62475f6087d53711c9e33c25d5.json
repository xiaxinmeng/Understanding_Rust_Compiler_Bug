{"sha": "106b15eac3345e62475f6087d53711c9e33c25d5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTA2YjE1ZWFjMzM0NWU2MjQ3NWY2MDg3ZDUzNzExYzllMzNjMjVkNQ==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2018-02-26T19:04:42Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2018-02-26T19:04:42Z"}, "message": "PR c++/84551 - ICE with concepts and -g.\n\n\t* parser.c (add_debug_begin_stmt): Do nothing in a concept.\n\nFrom-SVN: r258009", "tree": {"sha": "a7775f1b176a83add2a7063bcc89305e521aad5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a7775f1b176a83add2a7063bcc89305e521aad5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/106b15eac3345e62475f6087d53711c9e33c25d5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/106b15eac3345e62475f6087d53711c9e33c25d5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/106b15eac3345e62475f6087d53711c9e33c25d5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/106b15eac3345e62475f6087d53711c9e33c25d5/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "b671df813a16a75345cceb35030333ccc36c39f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b671df813a16a75345cceb35030333ccc36c39f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b671df813a16a75345cceb35030333ccc36c39f9"}], "stats": {"total": 18, "additions": 18, "deletions": 0}, "files": [{"sha": "bf995f0e8ef54cab5346373223b896ed144aca62", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/106b15eac3345e62475f6087d53711c9e33c25d5/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/106b15eac3345e62475f6087d53711c9e33c25d5/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=106b15eac3345e62475f6087d53711c9e33c25d5", "patch": "@@ -1,3 +1,8 @@\n+2018-02-26  Jason Merrill  <jason@redhat.com>\n+\n+\tPR c++/84551 - ICE with concepts and -g.\n+\t* parser.c (add_debug_begin_stmt): Do nothing in a concept.\n+\n 2018-02-26  Marek Polacek  <polacek@redhat.com>\n \n \tPR c++/84325"}, {"sha": "f305c9c7eba48e30807f889abc500d21385436aa", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/106b15eac3345e62475f6087d53711c9e33c25d5/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/106b15eac3345e62475f6087d53711c9e33c25d5/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=106b15eac3345e62475f6087d53711c9e33c25d5", "patch": "@@ -10699,6 +10699,9 @@ add_debug_begin_stmt (location_t loc)\n {\n   if (!MAY_HAVE_DEBUG_MARKER_STMTS)\n     return;\n+  if (DECL_DECLARED_CONCEPT_P (current_function_decl))\n+    /* A concept is never expanded normally.  */\n+    return;\n \n   tree stmt = build0 (DEBUG_BEGIN_STMT, void_type_node);\n   SET_EXPR_LOCATION (stmt, loc);"}, {"sha": "eeb63654243c018780a008ff99a6fac6d5ba1869", "filename": "gcc/testsuite/g++.dg/concepts/debug1.C", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/106b15eac3345e62475f6087d53711c9e33c25d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fdebug1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/106b15eac3345e62475f6087d53711c9e33c25d5/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fdebug1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fconcepts%2Fdebug1.C?ref=106b15eac3345e62475f6087d53711c9e33c25d5", "patch": "@@ -0,0 +1,10 @@\n+// PR c++/84551\n+// { dg-options \"-g -O -std=c++17 -fconcepts\" }\n+\n+template<typename> concept bool C() { return true; }\n+\n+template<template<typename T> requires C<T>() class> struct A {};\n+\n+template<typename> requires true struct B {};\n+\n+A<B> a;"}]}