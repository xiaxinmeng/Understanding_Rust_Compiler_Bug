{"sha": "7cff41e8917d88a6a56b151edc71cb5be689e423", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NmZjQxZTg5MTdkODhhNmE1NmIxNTFlZGM3MWNiNWJlNjg5ZTQyMw==", "commit": {"author": {"name": "Joseph Myers", "email": "joseph@codesourcery.com", "date": "2007-09-09T01:10:17Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2007-09-09T01:10:17Z"}, "message": "file-format.exp (gcc_target_object_format): Use remote_exec to call objdump.\n\ngcc/testsuite:\n\t* lib/file-format.exp (gcc_target_object_format): Use remote_exec\n\tto call objdump.\n\t* lib/scanasm.exp (scan-assembler-dem, scan-assembler-dem-not):\n\tUse remote_exec to call c++filt.\n\t* lib/target-supports-dg.exp (dg-require-host-local): New.\n\t* gcc.misc-tests/options.exp: Allow .exe in command paths.\n\t* g++.dg/parse/repo1.C: Use dg-require-host-local.\n\t* g++.dg/rtti/repo1.C: Likewise.\n\t* g++.dg/template/repo1.C: Likewise.\n\t* g++.dg/template/repo2.C: Likewise.\n\t* g++.dg/template/repo3.C: Likewise.\n\t* g++.dg/template/repo4.C: Likewise.\n\t* g++.dg/template/repo5.C: Likewise.\n\t* g++.old-deja/g++.pt/instantiate4.C: Likewise.\n\t* g++.old-deja/g++.pt/instantiate6.C: Likewise.\n\t* g++.old-deja/g++.pt/repo1.C: Likewise.\n\t* g++.old-deja/g++.pt/repo2.C: Likewise.\n\t* g++.old-deja/g++.pt/repo3.C: Likewise.\n\t* g++.old-deja/g++.pt/repo4.C: Likewise.\n\t* gcc.dg/cpp/trad/builtins.c: Likewise.\n\nlibstdc++-v3:\n\t* testsuite/lib/libstdc++.exp (v3-build-support): Specify output\n\tfile for preprocessing.  Use remote_exec to call ar and ranlib.\n\nFrom-SVN: r128283", "tree": {"sha": "db72951219f2be67e80dccf6ba1f940d1a3c9dc8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/db72951219f2be67e80dccf6ba1f940d1a3c9dc8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cff41e8917d88a6a56b151edc71cb5be689e423", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cff41e8917d88a6a56b151edc71cb5be689e423", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cff41e8917d88a6a56b151edc71cb5be689e423", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cff41e8917d88a6a56b151edc71cb5be689e423/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "37da0c95d4934fe5322b8ba4935ea691838171d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37da0c95d4934fe5322b8ba4935ea691838171d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37da0c95d4934fe5322b8ba4935ea691838171d7"}], "stats": {"total": 95, "additions": 75, "deletions": 20}, "files": [{"sha": "06d1e728f1f2e16e70164ec8ae44d9a75b134fde", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,3 +1,26 @@\n+2007-09-09  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* lib/file-format.exp (gcc_target_object_format): Use remote_exec\n+\tto call objdump.\n+\t* lib/scanasm.exp (scan-assembler-dem, scan-assembler-dem-not):\n+\tUse remote_exec to call c++filt.\n+\t* lib/target-supports-dg.exp (dg-require-host-local): New.\n+\t* gcc.misc-tests/options.exp: Allow .exe in command paths.\n+\t* g++.dg/parse/repo1.C: Use dg-require-host-local.\n+\t* g++.dg/rtti/repo1.C: Likewise.\n+\t* g++.dg/template/repo1.C: Likewise.\n+\t* g++.dg/template/repo2.C: Likewise.\n+\t* g++.dg/template/repo3.C: Likewise.\n+\t* g++.dg/template/repo4.C: Likewise.\n+\t* g++.dg/template/repo5.C: Likewise.\n+\t* g++.old-deja/g++.pt/instantiate4.C: Likewise.\n+\t* g++.old-deja/g++.pt/instantiate6.C: Likewise.\n+\t* g++.old-deja/g++.pt/repo1.C: Likewise.\n+\t* g++.old-deja/g++.pt/repo2.C: Likewise.\n+\t* g++.old-deja/g++.pt/repo3.C: Likewise.\n+\t* g++.old-deja/g++.pt/repo4.C: Likewise.\n+\t* gcc.dg/cpp/trad/builtins.c: Likewise.\n+\n 2007-09-08  Zdenek Dvorak  <ook@ucw.cz>\n \n \tPR tree-optimization/32283"}, {"sha": "efadd58723eb1473694b1a9b889c439a94cff351", "filename": "gcc/testsuite/g++.dg/parse/repo1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Frepo1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Frepo1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Frepo1.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,4 +1,5 @@\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n \n extern \"C\" inline void f() {}\n "}, {"sha": "7ff813bcdfeb93ed3b2d090c7a1640c65c5b123a", "filename": "gcc/testsuite/g++.dg/rtti/repo1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Frtti%2Frepo1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Frtti%2Frepo1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Frtti%2Frepo1.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // PR c++/22204\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n \n #include <typeinfo>\n template<int>"}, {"sha": "cb4c5a1eb243703ff58c2abf75452ec896dc45e0", "filename": "gcc/testsuite/g++.dg/template/repo1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo1.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,4 +1,5 @@\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n \n struct A {\n   A();"}, {"sha": "3618997dc2a8ba021ec7bd66b7081fccde4f4fde", "filename": "gcc/testsuite/g++.dg/template/repo2.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo2.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // PR c++/17163\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n \n template <int __inst>\n struct __Atomicity_lock"}, {"sha": "49a8fa5bfe4f0b39d5fec6df375f9d68cf06c171", "filename": "gcc/testsuite/g++.dg/template/repo3.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo3.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,4 +1,5 @@\n // { dg-options \"-frepo -DF='a'\" }\n+// { dg-require-host-local \"\" }\n \n template <typename A, typename B> void f () {}\n template <typename A, typename B> void g () { f<int,int>(); }"}, {"sha": "27714b5f1157b98efe23e358b373e6ad54905a6a", "filename": "gcc/testsuite/g++.dg/template/repo4.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo4.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,6 +1,7 @@\n // PR c++/17775\n // { dg-options \"-frepo\" }\n // { dg-final { cleanup-repo-files } }\n+// { dg-require-host-local \"\" }\n \n namespace { \n   struct Foo {}; "}, {"sha": "0d2893eee9114a3e4610e60fdb99dce05148aff7", "filename": "gcc/testsuite/g++.dg/template/repo5.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftemplate%2Frepo5.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,6 +1,7 @@\n // PR c++/25625\n // { dg-options \"-frepo\" } \n // { dg-final { cleanup-repo-files } }\n+// { dg-require-host-local \"\" }\n \n template< typename T, T N > struct integral_c {\n   static const T value = N;"}, {"sha": "9c1aaf58f3ed95edb3f39644819e68a5d3cc2927", "filename": "gcc/testsuite/g++.old-deja/g++.pt/instantiate4.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finstantiate4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finstantiate4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finstantiate4.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // { dg-do link }\n // { dg-options \"-frepo -Werror\" }\n+// { dg-require-host-local \"\" }\n // Build then link:\n \n "}, {"sha": "a1223fc5d8581a9c8a2ffdff2933bdeb0a7c0840", "filename": "gcc/testsuite/g++.old-deja/g++.pt/instantiate6.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finstantiate6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finstantiate6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finstantiate6.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // { dg-do link }\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n // Build then link:\n \n // Simplified from testcase by Erez Louidor Lior <s3824888@techst02.technion.ac.il>"}, {"sha": "f3fdddc7f52270f99f7870a10192e389c9862c33", "filename": "gcc/testsuite/g++.old-deja/g++.pt/repo1.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo1.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // { dg-do link }\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n \n // Bug: g++ complains about duplicate explicit instantiations with -frepo.\n // From Jason Merrill <jason@cygnus.com>"}, {"sha": "b40961c1558a0ed5cb9ba71da7a14c5ad8714d84", "filename": "gcc/testsuite/g++.old-deja/g++.pt/repo2.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo2.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // { dg-do link  }\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n // Test that collect2 isn't confused by GNU ld's \"In function `foo':\" message.\n // Contributed by Jason Merrill <jason@cygnus.com>\n "}, {"sha": "7995030fe035929b7ebb255918902bef894e4bb7", "filename": "gcc/testsuite/g++.old-deja/g++.pt/repo3.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo3.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // { dg-do link }\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n // Test that we properly generate the vtable and such for C.\n // Contributed by scott snyder <snyder@fnal.gov>\n "}, {"sha": "6a0a55aba5557ecfb4d01bc081b72e1b90da11d8", "filename": "gcc/testsuite/g++.old-deja/g++.pt/repo4.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Frepo4.C?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,5 +1,6 @@\n // { dg-do link }\n // { dg-options \"-frepo\" }\n+// { dg-require-host-local \"\" }\n // Build then link:\n \n template <class T>"}, {"sha": "74798bbb47f55cf4789e7005a27896b94184752e", "filename": "gcc/testsuite/gcc.dg/cpp/trad/builtins.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Ftrad%2Fbuiltins.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Ftrad%2Fbuiltins.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcpp%2Ftrad%2Fbuiltins.c?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -50,3 +50,5 @@ int main ()\n \n   return 0;\n }\n+\n+/* { dg-require-host-local \"\" } */"}, {"sha": "1d4b779fe118294ce0928c93b74e6103156ea3c8", "filename": "gcc/testsuite/gcc.misc-tests/options.exp", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.misc-tests%2Foptions.exp?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -36,15 +36,15 @@ proc check_for_options {language gcc_options compiler_pattern as_pattern ld_patt\n     set gcc_output [gcc_target_compile $filename.c $filename.x executable $gcc_options]\n     remote_file build delete $filename.c $filename.x $filename.gcno\n \n-    if {![regexp -- \"/$compiler -quiet.*$compiler_pattern\" $gcc_output]} {\n+    if {![regexp -- \"/${compiler}(\\\\.exe)? -quiet.*$compiler_pattern\" $gcc_output]} {\n \tfail \"$test (compiler options)\"\n \treturn\n     }\n-    if {![regexp -- \" *as .*$as_pattern\" $gcc_output]} {\n+    if {![regexp -- \" *as(\\\\.exe)? .*$as_pattern\" $gcc_output]} {\n \tfail \"$test (assembler options)\"\n \treturn\n     }\n-    if {![regexp -- \"/collect2 .*$ld_pattern\" $gcc_output]} {\n+    if {![regexp -- \"/collect2(\\\\.exe)? .*$ld_pattern\" $gcc_output]} {\n \tfail \"$test (linker options)\"\n \treturn\n     }"}, {"sha": "491cf1274d969469fc3dd4215471f2f8116d42d7", "filename": "gcc/testsuite/lib/file-format.exp", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Flib%2Ffile-format.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Flib%2Ffile-format.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ffile-format.exp?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -48,9 +48,8 @@ proc gcc_target_object_format { } {\n         ${tool}_target_compile objfmtst.c objfmtst.o object \"\"\n \tfile delete objfmtst.c       \n         \n-\tcatch {\n-          set output [exec $objdump_name --file-headers objfmtst.o ]\n-        } output\n+\tset output [remote_exec host \"$objdump_name\" \"--file-headers objfmtst.o\"]\n+\tset output [lindex $output 1]\n \n         file delete objfmtst.o\n         "}, {"sha": "0621e7d075b3df54bcc4826ca38507cd2a70b7e0", "filename": "gcc/testsuite/lib/scanasm.exp", "status": "modified", "additions": 4, "deletions": 6, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Flib%2Fscanasm.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Fscanasm.exp?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -217,9 +217,8 @@ proc scan-assembler-dem { args } {\n     upvar 2 name testcase\n     set output_file \"[file rootname [file tail $testcase]].s\"\n \n-    set fd [open \"| $cxxfilt < $output_file\" r]\n-    set text [read $fd]\n-    close $fd\n+    set output [remote_exec host \"$cxxfilt\" \"\" \"$output_file\"]\n+    set text [lindex $output 1]\n \n     if [regexp -- [lindex $args 0] $text] {\n \tpass \"$testcase scan-assembler-dem [lindex $args 0]\"\n@@ -263,9 +262,8 @@ proc scan-assembler-dem-not { args } {\n     upvar 2 name testcase\n     set output_file \"[file rootname [file tail $testcase]].s\"\n \n-    set fd [open \"| $cxxfilt < $output_file\" r]\n-    set text [read $fd]\n-    close $fd\n+    set output [remote_exec host \"$cxxfilt\" \"\" \"$output_file\"]\n+    set text [lindex $output 1]\n \n     if ![regexp -- [lindex $args 0] $text] {\n \tpass \"$testcase scan-assembler-dem-not [lindex $args 0]\""}, {"sha": "e7f9175fa6f378e2a8ed0623e052750431de6012", "filename": "gcc/testsuite/lib/target-supports-dg.exp", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports-dg.exp?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -150,6 +150,18 @@ proc dg-require-cxa-atexit { args } {\n     }\n }\n \n+# If the host is remote rather than the same as the build system, skip\n+# this test.  Some tests are incompatible with DejaGnu's handling of\n+# remote hosts, which involves copying the source file to the host and\n+# compiling it with a relative path and \"-o a.out\".\n+\n+proc dg-require-host-local { args } {\n+    if [ is_remote host ] {\n+        upvar dg-do-what dg-do-what\n+        set dg-do-what [list [lindex ${dg-do-what} 0] \"N\" \"P\"]\n+    }\n+}\n+\n # Check the flags with which the test will be run against options in\n # a test directive that will skip or xfail that test.  The DejaGnu proc\n # check_conditional_xfail will look at the options in compiler_flags, so"}, {"sha": "3faf3ff83b0911a12fffa4a0676982b47bad981b", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -1,3 +1,8 @@\n+2007-09-09  Joseph Myers  <joseph@codesourcery.com>\n+\n+\t* testsuite/lib/libstdc++.exp (v3-build-support): Specify output\n+\tfile for preprocessing.  Use remote_exec to call ar and ranlib.\n+\n 2007-09-08  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* include/bits/functional_hash.h: Add ext/numeric_traits.h."}, {"sha": "cc24fc9afbd6ca26b7d0036104ba31190abb0cbe", "filename": "libstdc++-v3/testsuite/lib/libstdc++.exp", "status": "modified", "additions": 11, "deletions": 8, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cff41e8917d88a6a56b151edc71cb5be689e423/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cff41e8917d88a6a56b151edc71cb5be689e423/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Flib%2Flibstdc%2B%2B.exp?ref=7cff41e8917d88a6a56b151edc71cb5be689e423", "patch": "@@ -452,12 +452,15 @@ proc v3-build_support { } {\n     set libtest_objs \"\"\n \n     set config_src \"config.cc\"\n+    set config_out \"config.ii\"\n     set f [open $config_src \"w\"]\n     puts $f \"#include <bits/c++config.h>\"\n     puts $f \"#include <bits/gthr.h>\"\n     close $f\n-    set preprocessed [v3_target_compile $config_src \"\" \\\n-\t    \t       preprocess \"additional_flags=-dN\"]\n+    v3_target_compile $config_src $config_out preprocess \"additional_flags=-dN\"\n+    set file [open $config_out r]\n+    set preprocessed [read $file]\n+    close $file\n     if { [string first \"_GLIBCXX_USE_WCHAR_T\" $preprocessed] != -1 } {\n \tverbose -log \"wchar_t support detected\"\n \tset v3-wchar_t 1\n@@ -509,19 +512,19 @@ proc v3-build_support { } {\n     } else {\n \tset ar [transform \"ar\"]\n     }\n-    set arcommand \"$ar -rc ./libtestc++.a ${libtest_objs}\"\n-    verbose -log \"$arcommand\"\n-    set result [lindex [local_exec \"$arcommand\" \"\" \"\" 300] 0]\n+    set arargs \"-rc ./libtestc++.a ${libtest_objs}\"\n+    verbose -log \"$ar $arargs\"\n+    set result [lindex [remote_exec host \"$ar\" \"$arargs\"] 0]\n     verbose \"link result is $result\"\n     if { $result == 0 } {\n \tif  [info exists env(RANLIB)] {\n \t    set ranlib $env(RANLIB)\n \t} else {\n \t    set ranlib [transform \"ranlib\"]\n \t}\n-\tset ranlibcommand \"$ranlib ./libtestc++.a\"\n-\tverbose -log \"$ranlibcommand\"\n-\tset result [lindex [local_exec \"$ranlibcommand\" \"\" \"\" 300] 0]\n+\tset ranlibargs \"./libtestc++.a\"\n+\tverbose -log \"$ranlib $ranlibargs\"\n+\tset result [lindex [remote_exec host \"$ranlib\" \"$ranlibargs\"] 0]\n \tif { $result != 0 } {\n \t    error \"could not link libtestc++.a\"\n \t}"}]}