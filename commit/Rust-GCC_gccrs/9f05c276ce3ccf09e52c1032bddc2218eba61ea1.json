{"sha": "9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWYwNWMyNzZjZTNjY2YwOWU1MmMxMDMyYmRkYzIyMThlYmE2MWVhMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-03-09T15:20:53Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2021-03-09T15:22:55Z"}, "message": "Assorted testsuite fixes\n\nFirst, gcc.dg/array-quals-1.c does not pass if the compiler is configured\nwith --enable-default-pie because the sections change, so force -fno-pie.\nSecond, replace *-*-solaris* with sparc*-*-* for gfortran.dg/pr95690.f90\nbecause this depends on the architecture rather than the OS.  Third force\nSRA to trigger on Aarch64 (like PowerPC) for gnat.dg/opt39.adb.\n\ngcc/testsuite/\n\t* gcc.dg/array-quals-1.c: Pass -fno-pie if supported.\n\t* gcc.dg/loop-9.c: Likewise.\n\t* gfortran.dg/pr95690.f90: Replace *-*-solaris* with sparc*-*-*.\n\t* gnat.dg/opt39.adb: Pass --param option for Aarch64 too.", "tree": {"sha": "edd89380c9885c875cf47436c76d298014d97a01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/edd89380c9885c875cf47436c76d298014d97a01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/comments", "author": null, "committer": null, "parents": [{"sha": "defafb78cbcb7e2d5abd40379afdecee8b1a0d06", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/defafb78cbcb7e2d5abd40379afdecee8b1a0d06", "html_url": "https://github.com/Rust-GCC/gccrs/commit/defafb78cbcb7e2d5abd40379afdecee8b1a0d06"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "2c04164927963c58ae56f8c4326a1fb378ef55e0", "filename": "gcc/testsuite/gcc.dg/array-quals-1.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgcc.dg%2Farray-quals-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgcc.dg%2Farray-quals-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Farray-quals-1.c?ref=9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "patch": "@@ -4,6 +4,7 @@\n /* Origin: Joseph Myers <jsm@polyomino.org.uk> */\n /* { dg-do compile } */\n /* { dg-options \"-Wno-discarded-array-qualifiers\" } */\n+/* { dg-additional-options \"-fno-pie\" { target pie } } */\n /* The MMIX port always switches to the .data section at the end of a file.  */\n /* { dg-final { scan-assembler-not \"\\\\.data(?!\\\\.rel\\\\.ro)\" { xfail powerpc*-*-aix* mmix-*-* x86_64-*-mingw* } } } */\n /* { dg-final { scan-assembler-symbol-section {^_?a$} {^\\.(const|rodata|srodata)|\\[RO\\]} } } */"}, {"sha": "44f720653f28a5afde851a670d100c583c35556a", "filename": "gcc/testsuite/gcc.dg/loop-9.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgcc.dg%2Floop-9.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgcc.dg%2Floop-9.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Floop-9.c?ref=9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "patch": "@@ -1,5 +1,6 @@\n /* { dg-do compile } */\n /* { dg-options \"-O1 -fdump-rtl-loop2_invariant\" } */\n+/* { dg-additional-options \"-fno-pie\" { target pie } } */\n \n void\n f (double *a)"}, {"sha": "47a5df9e894f4beef309f79cb486bb2d18c9cd3d", "filename": "gcc/testsuite/gfortran.dg/pr95690.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95690.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95690.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr95690.f90?ref=9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "patch": "@@ -2,8 +2,8 @@\n module m\n contains\n    subroutine s\n-      print *, (erfc) ! { dg-error \"not a floating constant\" \"\" { target i?86-*-* x86_64-*-* *-*-solaris* cris-*-* } }\n-   end ! { dg-error \"not a floating constant\" \"\" { target { ! \"i?86-*-* x86_64-*-* *-*-solaris* cris-*-*\" } } }\n+      print *, (erfc) ! { dg-error \"not a floating constant\" \"\" { target i?86-*-* x86_64-*-* sparc*-*-* cris-*-* } }\n+   end ! { dg-error \"not a floating constant\" \"\" { target { ! \"i?86-*-* x86_64-*-* sparc*-*-* cris-*-*\" } } }\n    function erfc()\n    end\n end"}, {"sha": "70f198617ce1cdf85cf8c77179ed8fc8e3b2aae3", "filename": "gcc/testsuite/gnat.dg/opt39.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgnat.dg%2Fopt39.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9f05c276ce3ccf09e52c1032bddc2218eba61ea1/gcc%2Ftestsuite%2Fgnat.dg%2Fopt39.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fopt39.adb?ref=9f05c276ce3ccf09e52c1032bddc2218eba61ea1", "patch": "@@ -1,6 +1,6 @@\n -- { dg-do compile }\n -- { dg-options \"-O2 -fno-inline -fdump-tree-optimized\" }\n--- { dg-additional-options \"-cargs --param=sra-max-scalarization-size-Ospeed=32 -margs\" { target powerpc*-*-* } }\n+-- { dg-additional-options \"-cargs --param=sra-max-scalarization-size-Ospeed=32 -margs\" { target aarch64-*-* powerpc*-*-* } }\n \n procedure Opt39 (I : Integer) is\n "}]}