{"sha": "60d1d296b42b22b08d4eaa38bea02100c07261ac", "node_id": "C_kwDOANBUbNoAKDYwZDFkMjk2YjQyYjIyYjA4ZDRlYWEzOGJlYTAyMTAwYzA3MjYxYWM", "commit": {"author": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2022-08-26T17:26:06Z"}, "committer": {"name": "H.J. Lu", "email": "hjl.tools@gmail.com", "date": "2022-08-29T14:45:39Z"}, "message": "x86: Handle V16BF in ix86_avx256_split_vector_move_misalign\n\nHandle E_V16BFmode in ix86_avx256_split_vector_move_misalign and add\nV16BF to V_256H iterator.\n\ngcc/\n\n\tPR target/106748\n\t* config/i386/i386-expand.cc\n\t(ix86_avx256_split_vector_move_misalign): Handle E_V16BFmode.\n\t* config/i386/sse.md (V_256H): Add V16BF.\n\ngcc/testsuite/\n\n\tPR target/106748\n\t* gcc.target/i386/pr106748.c: New test.", "tree": {"sha": "4acb0ed8deaf36d019c59b7dfacee29fcd1faef2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4acb0ed8deaf36d019c59b7dfacee29fcd1faef2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/60d1d296b42b22b08d4eaa38bea02100c07261ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60d1d296b42b22b08d4eaa38bea02100c07261ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60d1d296b42b22b08d4eaa38bea02100c07261ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60d1d296b42b22b08d4eaa38bea02100c07261ac/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "feeb9314002a5e304dc552781ed93f06d7f51c93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/feeb9314002a5e304dc552781ed93f06d7f51c93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/feeb9314002a5e304dc552781ed93f06d7f51c93"}], "stats": {"total": 28, "additions": 26, "deletions": 2}, "files": [{"sha": "836ebc82d670035524cfda427d671bc6c29e89a2", "filename": "gcc/config/i386/i386-expand.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d1d296b42b22b08d4eaa38bea02100c07261ac/gcc%2Fconfig%2Fi386%2Fi386-expand.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d1d296b42b22b08d4eaa38bea02100c07261ac/gcc%2Fconfig%2Fi386%2Fi386-expand.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-expand.cc?ref=60d1d296b42b22b08d4eaa38bea02100c07261ac", "patch": "@@ -745,6 +745,10 @@ ix86_avx256_split_vector_move_misalign (rtx op0, rtx op1)\n       extract = gen_avx_vextractf128v32qi;\n       mode = V16QImode;\n       break;\n+    case E_V16BFmode:\n+      extract = gen_avx_vextractf128v16bf;\n+      mode = V8BFmode;\n+      break;\n     case E_V16HFmode:\n       extract = gen_avx_vextractf128v16hf;\n       mode = V8HFmode;"}, {"sha": "259048481b63ea18cc58084feb7786ba0b1b8bfe", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d1d296b42b22b08d4eaa38bea02100c07261ac/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d1d296b42b22b08d4eaa38bea02100c07261ac/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=60d1d296b42b22b08d4eaa38bea02100c07261ac", "patch": "@@ -297,9 +297,9 @@\n (define_mode_iterator V_256\n   [V32QI V16HI V8SI V4DI V8SF V4DF])\n \n-;; All 256bit vector modes including HF vector mode\n+;; All 256bit vector modes including HF/BF vector modes\n (define_mode_iterator V_256H\n-  [V32QI V16HI V8SI V4DI V8SF V4DF V16HF])\n+  [V32QI V16HI V8SI V4DI V8SF V4DF V16HF V16BF])\n \n ;; All 128bit and 256bit vector modes\n (define_mode_iterator V_128_256"}, {"sha": "6388b1deb23d48a7d098ebc05d8716ae023bb86d", "filename": "gcc/testsuite/gcc.target/i386/pr106748.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/60d1d296b42b22b08d4eaa38bea02100c07261ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr106748.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/60d1d296b42b22b08d4eaa38bea02100c07261ac/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr106748.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr106748.c?ref=60d1d296b42b22b08d4eaa38bea02100c07261ac", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O0 -mavx256-split-unaligned-store -mavx -fpack-struct\" } */\n+\n+typedef __bf16 __m256bf16 __attribute__((__vector_size__(32)));\n+typedef struct {\n+  __m256bf16 _m256bf16[1];\n+} YMM_T;\n+\n+struct {\n+  YMM_T ymm0;\n+} fregs;\n+\n+__m256bf16 do_test_u3b_0_0;\n+int do_test_i;\n+\n+void\n+do_test()\n+{\n+  (&fregs.ymm0)[do_test_i]._m256bf16[0] = do_test_u3b_0_0;\n+}"}]}