{"sha": "5a99796b85c93fe9d61ee52fc3a38b8698709479", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWE5OTc5NmI4NWM5M2ZlOWQ2MWVlNTJmYzNhMzhiODY5ODcwOTQ3OQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-05-15T12:51:24Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-10-22T08:06:06Z"}, "message": "Come up with stack_protector enum.\n\ngcc/ChangeLog:\n\n2020-05-15  Martin Liska  <mliska@suse.cz>\n\n\t* cfgexpand.c: Move the enum to ...\n\t* coretypes.h (enum stack_protector): ... here.\n\t* function.c (assign_parm_adjust_stack_rtl): Use the stack_protector\n\tenum.\n\ngcc/c-family/ChangeLog:\n\n2020-05-15  Martin Liska  <mliska@suse.cz>\n\n\t* c-cppbuiltin.c (c_cpp_builtins): Use the stack_protector enum.", "tree": {"sha": "e651cd8b76a30ec463c31855993fe437a2bbe520", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e651cd8b76a30ec463c31855993fe437a2bbe520"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5a99796b85c93fe9d61ee52fc3a38b8698709479", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a99796b85c93fe9d61ee52fc3a38b8698709479", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5a99796b85c93fe9d61ee52fc3a38b8698709479", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5a99796b85c93fe9d61ee52fc3a38b8698709479/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "df7f0a3a21418f8e06bb4710f09587e54225da93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/df7f0a3a21418f8e06bb4710f09587e54225da93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/df7f0a3a21418f8e06bb4710f09587e54225da93"}], "stats": {"total": 25, "additions": 13, "deletions": 12}, "files": [{"sha": "e5ebb79e22a2635c1540e598e295026c1bb7d73a", "filename": "gcc/c-family/c-cppbuiltin.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Fc-family%2Fc-cppbuiltin.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Fc-family%2Fc-cppbuiltin.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-cppbuiltin.c?ref=5a99796b85c93fe9d61ee52fc3a38b8698709479", "patch": "@@ -1427,13 +1427,13 @@ c_cpp_builtins (cpp_reader *pfile)\n   /* Make the choice of the stack protector runtime visible to source code.\n      The macro names and values here were chosen for compatibility with an\n      earlier implementation, i.e. ProPolice.  */\n-  if (flag_stack_protect == 4)\n+  if (flag_stack_protect == SPCT_FLAG_EXPLICIT)\n     cpp_define (pfile, \"__SSP_EXPLICIT__=4\");\n-  if (flag_stack_protect == 3)\n+  if (flag_stack_protect == SPCT_FLAG_STRONG)\n     cpp_define (pfile, \"__SSP_STRONG__=3\");\n-  if (flag_stack_protect == 2)\n+  if (flag_stack_protect == SPCT_FLAG_ALL)\n     cpp_define (pfile, \"__SSP_ALL__=2\");\n-  else if (flag_stack_protect == 1)\n+  else if (flag_stack_protect == SPCT_FLAG_DEFAULT)\n     cpp_define (pfile, \"__SSP__=1\");\n \n   if (flag_openacc)"}, {"sha": "2ac9aef389aacfda8637796f3b6980d21a1a151b", "filename": "gcc/cfgexpand.c", "status": "modified", "additions": 0, "deletions": 7, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Fcfgexpand.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Fcfgexpand.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcfgexpand.c?ref=5a99796b85c93fe9d61ee52fc3a38b8698709479", "patch": "@@ -1762,13 +1762,6 @@ clear_tree_used (tree block)\n     clear_tree_used (t);\n }\n \n-enum {\n-  SPCT_FLAG_DEFAULT = 1,\n-  SPCT_FLAG_ALL = 2,\n-  SPCT_FLAG_STRONG = 3,\n-  SPCT_FLAG_EXPLICIT = 4\n-};\n-\n /* Examine TYPE and determine a bit mask of the following features.  */\n \n #define SPCT_HAS_LARGE_CHAR_ARRAY\t1"}, {"sha": "81a1b594dcd52d8eacb96826c185be3aae0dfce7", "filename": "gcc/coretypes.h", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Fcoretypes.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Fcoretypes.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcoretypes.h?ref=5a99796b85c93fe9d61ee52fc3a38b8698709479", "patch": "@@ -219,6 +219,14 @@ enum profile_reproducibility {\n     PROFILE_REPRODUCIBILITY_MULTITHREADED\n };\n \n+/* Type of -fstack-protector-*.  */\n+enum stack_protector {\n+  SPCT_FLAG_DEFAULT = 1,\n+  SPCT_FLAG_ALL = 2,\n+  SPCT_FLAG_STRONG = 3,\n+  SPCT_FLAG_EXPLICIT = 4\n+};\n+\n /* Types of unwind/exception handling info that can be generated.  */\n \n enum unwind_info_type"}, {"sha": "f903a1e2474d5b40a5ec9745c73e0ce3c0a667a1", "filename": "gcc/function.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Ffunction.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5a99796b85c93fe9d61ee52fc3a38b8698709479/gcc%2Ffunction.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffunction.c?ref=5a99796b85c93fe9d61ee52fc3a38b8698709479", "patch": "@@ -2846,7 +2846,7 @@ assign_parm_adjust_stack_rtl (struct assign_parm_data_one *data)\n   /* If stack protection is in effect for this function, don't leave any\n      pointers in their passed stack slots.  */\n   else if (crtl->stack_protect_guard\n-\t   && (flag_stack_protect == 2\n+\t   && (flag_stack_protect == SPCT_FLAG_ALL\n \t       || data->arg.pass_by_reference\n \t       || POINTER_TYPE_P (data->nominal_type)))\n     stack_parm = NULL;"}]}