{"sha": "e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTdmMTBiYTljZjgyZWM4NDA0MGI2ZWIzNzhlNTVjYThiYjNiNjQ3Nw==", "commit": {"author": {"name": "Emmanuel Briot", "email": "briot@adacore.com", "date": "2009-07-27T14:39:51Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-07-27T14:39:51Z"}, "message": "prj.ads, [...] (Override_Kind): add debug trace Add comments.\n\n2009-07-27  Emmanuel Briot  <briot@adacore.com>\n\n\t* prj.ads, prj-nmsc.adb (Override_Kind): add debug trace\n\tAdd comments.\n\nFrom-SVN: r150121", "tree": {"sha": "9eea548b2a80f8f69ae59587cd6b3db14a41e773", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9eea548b2a80f8f69ae59587cd6b3db14a41e773"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477/comments", "author": {"login": "briot", "id": 42402, "node_id": "MDQ6VXNlcjQyNDAy", "avatar_url": "https://avatars.githubusercontent.com/u/42402?v=4", "gravatar_id": "", "url": "https://api.github.com/users/briot", "html_url": "https://github.com/briot", "followers_url": "https://api.github.com/users/briot/followers", "following_url": "https://api.github.com/users/briot/following{/other_user}", "gists_url": "https://api.github.com/users/briot/gists{/gist_id}", "starred_url": "https://api.github.com/users/briot/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/briot/subscriptions", "organizations_url": "https://api.github.com/users/briot/orgs", "repos_url": "https://api.github.com/users/briot/repos", "events_url": "https://api.github.com/users/briot/events{/privacy}", "received_events_url": "https://api.github.com/users/briot/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fc53fe76ccbb60528aeb790474c3ac0c20e14680", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc53fe76ccbb60528aeb790474c3ac0c20e14680", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc53fe76ccbb60528aeb790474c3ac0c20e14680"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "bf78d8c825f31c9b37737fd60d8446d9c1b1ab9a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477", "patch": "@@ -1,3 +1,8 @@\n+2009-07-27  Emmanuel Briot  <briot@adacore.com>\n+\n+\t* prj.ads, prj-nmsc.adb (Override_Kind): add debug trace\n+\tAdd comments.\n+\n 2009-07-27  Sergey Rybin  <rybin@adacore.com>\n \n \t* gnat_ugn.texi: gnatcheck Unconstrained_Array_Returns rule: Add to the"}, {"sha": "ee74ad7a3a28fe7741351d966d060ba97a54897b", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 24, "deletions": 7, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=e7f10ba9cf82ec84040b6eb378e55ca8bb3b6477", "patch": "@@ -726,11 +726,27 @@ package body Prj.Nmsc is\n       Id.Kind                := Kind;\n       Id.Alternate_Languages := Alternate_Languages;\n       Id.Locally_Removed     := Locally_Removed;\n+      Id.Index               := Index;\n+      Id.File                := File_Name;\n+      Id.Display_File        := Display_File;\n+      Id.Dep_Name            := Dependency_Name\n+                               (File_Name, Lang_Id.Config.Dependency_Kind);\n+      Id.Naming_Exception    := Naming_Exception;\n \n       --  Add the source id to the Unit_Sources_HT hash table, if the unit name\n       --  is not null.\n \n       if Unit /= No_Name then\n+         --  Note: we might be creating a dummy unit here, when we in fact have\n+         --  a separate. For instance, file file-bar.adb will initially be\n+         --  assumed to be the IMPL of unit \"file.bar\". Only later on (in\n+         --  Check_Object_Files) will we parse those units that only have an\n+         --  impl and no spec to make sure whether we have a Separate in fact\n+         --  (that significantly reduces the number of times we need to parse\n+         --  the files, since we are then only interested in those with no\n+         --  spec). We still need those dummy units in the table, since that's\n+         --  the name we find in the ALI file\n+\n          UData := Units_Htable.Get (Data.Tree.Units_HT, Unit);\n \n          if UData = No_Unit_Index then\n@@ -746,13 +762,6 @@ package body Prj.Nmsc is\n          Override_Kind (Id, Kind);\n       end if;\n \n-      Id.Index            := Index;\n-      Id.File             := File_Name;\n-      Id.Display_File     := Display_File;\n-      Id.Dep_Name         := Dependency_Name\n-                               (File_Name, Lang_Id.Config.Dependency_Kind);\n-      Id.Naming_Exception := Naming_Exception;\n-\n       if Is_Compilable (Id) and then Config.Object_Generated then\n          Id.Object   := Object_Name (File_Name, Config.Object_File_Suffix);\n          Id.Switches := Switches_Name (File_Name);\n@@ -6541,6 +6550,14 @@ package body Prj.Nmsc is\n \n       Source.Kind := Kind;\n \n+      if Current_Verbosity = High\n+        and then Source.File /= No_File\n+      then\n+         Write_Line (\"Override kind for \"\n+                     & Get_Name_String (Source.File)\n+                     & \" kind=\" & Source.Kind'Img);\n+      end if;\n+\n       if Source.Kind in Spec_Or_Body and then Source.Unit /= null then\n          Source.Unit.File_Names (Source.Kind) := Source;\n       end if;"}]}