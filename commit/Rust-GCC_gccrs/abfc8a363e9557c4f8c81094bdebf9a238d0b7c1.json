{"sha": "abfc8a363e9557c4f8c81094bdebf9a238d0b7c1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWJmYzhhMzYzZTk1NTdjNGY4YzgxMDk0YmRlYmY5YTIzOGQwYjdjMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2000-06-30T19:04:35Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2000-06-30T19:04:35Z"}, "message": "semantics.c (genrtl_asm_stmt): Don't decay input operands here.\n\n\t* semantics.c (genrtl_asm_stmt): Don't decay input operands here.\n\t(finish_asm_stmt): Do it here, instead.\n\nFrom-SVN: r34816", "tree": {"sha": "45cb202033fb49d2ddbdd01582ded1bb4bdfc628", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/45cb202033fb49d2ddbdd01582ded1bb4bdfc628"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1/comments", "author": null, "committer": null, "parents": [{"sha": "f09f1de5cf126e1f5f41fd5043121e162103460d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f09f1de5cf126e1f5f41fd5043121e162103460d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f09f1de5cf126e1f5f41fd5043121e162103460d"}], "stats": {"total": 26, "additions": 14, "deletions": 12}, "files": [{"sha": "e79e132b6da08b29dcadfec31e0f9a6fb9e300da", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=abfc8a363e9557c4f8c81094bdebf9a238d0b7c1", "patch": "@@ -1,5 +1,8 @@\n 2000-06-30  Mark Mitchell  <mark@codesourcery.com>\n \n+\t* semantics.c (genrtl_asm_stmt): Don't decay input operands here.\n+\t(finish_asm_stmt): Do it here, instead.\n+\n \t* cp-tree.h (ridpointers): Don't declare.\n \t* decl.c (record_builtin_type): Use CP_RID_MAX instead of RID_MAX.\n \t(record_builtin_java_type): Likewise."}, {"sha": "d93ddd893f8e41d3a2cc0af271cfeb0d588ea895", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 11, "deletions": 12, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/abfc8a363e9557c4f8c81094bdebf9a238d0b7c1/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=abfc8a363e9557c4f8c81094bdebf9a238d0b7c1", "patch": "@@ -1341,18 +1341,11 @@ genrtl_asm_stmt (cv_qualifier, string, output_operands,\n   emit_line_note (input_filename, lineno);\n   if (output_operands != NULL_TREE || input_operands != NULL_TREE\n       || clobbers != NULL_TREE)\n-    {\n-      tree t;\n-      \n-      for (t = input_operands; t; t = TREE_CHAIN (t))\n-\tTREE_VALUE (t) = decay_conversion (TREE_VALUE (t));\n-      \n-      c_expand_asm_operands (string, output_operands,\n-\t\t\t     input_operands, \n-\t\t\t     clobbers,\n-\t\t\t     cv_qualifier != NULL_TREE,\n-\t\t\t     input_filename, lineno);\n-    }\n+    c_expand_asm_operands (string, output_operands,\n+\t\t\t   input_operands, \n+\t\t\t   clobbers,\n+\t\t\t   cv_qualifier != NULL_TREE,\n+\t\t\t   input_filename, lineno);\n   else\n     expand_asm (string);\n   \n@@ -1373,6 +1366,8 @@ finish_asm_stmt (cv_qualifier, string, output_operands,\n      tree clobbers;\n {\n   tree r;\n+  tree t;\n+\n   if (TREE_CHAIN (string))\n     string = combine_strings (string);\n \n@@ -1384,6 +1379,10 @@ finish_asm_stmt (cv_qualifier, string, output_operands,\n       cv_qualifier = NULL_TREE;\n     }\n \n+  if (!processing_template_decl)\n+    for (t = input_operands; t; t = TREE_CHAIN (t))\n+      TREE_VALUE (t) = decay_conversion (TREE_VALUE (t));\n+\n   r = build_min_nt (ASM_STMT, cv_qualifier, string,\n \t\t    output_operands, input_operands,\n \t\t    clobbers);"}]}