{"sha": "35c91e0571501b3d876e4e0c5b4cf33da758f1da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzVjOTFlMDU3MTUwMWIzZDg3NmU0ZTBjNWI0Y2YzM2RhNzU4ZjFkYQ==", "commit": {"author": {"name": "Samuel Tardieu", "email": "sam@rfc1149.net", "date": "2008-04-16T12:37:38Z"}, "committer": {"name": "Samuel Tardieu", "email": "sam@gcc.gnu.org", "date": "2008-04-16T12:37:38Z"}, "message": "re PR ada/29015 (Ada 2005 observer pattern with mutually dependent packages and containers produces compiler error)\n\n    gcc/ada/\n\tPR ada/29015\n\t* sem_ch12.adb (Instantiate_Type): Check whether the full view of\n\tthe type is known instead of the underlying type.\n\n    gcc/testsuite/\n\tPR ada/29015\n\t* gnat.dg/incomplete1.ads, gnat.dg/incomplete2.ads,\n\tgnat.dg/incomplete2.adb: New.\n\nFrom-SVN: r134345", "tree": {"sha": "7129d76c3d30754954850039ec1009c661d0f75a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7129d76c3d30754954850039ec1009c661d0f75a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/35c91e0571501b3d876e4e0c5b4cf33da758f1da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35c91e0571501b3d876e4e0c5b4cf33da758f1da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/35c91e0571501b3d876e4e0c5b4cf33da758f1da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/35c91e0571501b3d876e4e0c5b4cf33da758f1da/comments", "author": {"login": "samueltardieu", "id": 44656, "node_id": "MDQ6VXNlcjQ0NjU2", "avatar_url": "https://avatars.githubusercontent.com/u/44656?v=4", "gravatar_id": "", "url": "https://api.github.com/users/samueltardieu", "html_url": "https://github.com/samueltardieu", "followers_url": "https://api.github.com/users/samueltardieu/followers", "following_url": "https://api.github.com/users/samueltardieu/following{/other_user}", "gists_url": "https://api.github.com/users/samueltardieu/gists{/gist_id}", "starred_url": "https://api.github.com/users/samueltardieu/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/samueltardieu/subscriptions", "organizations_url": "https://api.github.com/users/samueltardieu/orgs", "repos_url": "https://api.github.com/users/samueltardieu/repos", "events_url": "https://api.github.com/users/samueltardieu/events{/privacy}", "received_events_url": "https://api.github.com/users/samueltardieu/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "78347d72334be8ae1db5adc1c7b258cd8b98fad0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78347d72334be8ae1db5adc1c7b258cd8b98fad0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78347d72334be8ae1db5adc1c7b258cd8b98fad0"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "346866e9215e058527ee5a90fb6e4f1530cffd77", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=35c91e0571501b3d876e4e0c5b4cf33da758f1da", "patch": "@@ -1,3 +1,9 @@\n+2008-04-16  Samuel Tardieu  <sam@rfc1149.net>\n+\n+\tPR ada/29015\n+\t* sem_ch12.adb (Instantiate_Type): Check whether the full view of\n+\tthe type is known instead of the underlying type.\n+\n 2008-04-15  Ed Schonberg  <schonberg@adacore.com>\n \n \tPR ada/22387"}, {"sha": "60833fc2bdb84ced3b156cada543e81303b41c18", "filename": "gcc/ada/sem_ch12.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Fada%2Fsem_ch12.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Fada%2Fsem_ch12.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch12.adb?ref=35c91e0571501b3d876e4e0c5b4cf33da758f1da", "patch": "@@ -9990,7 +9990,7 @@ package body Sem_Ch12 is\n                          Ekind (Root_Type (Act_T)) = E_Incomplete_Type)\n          then\n             if Is_Class_Wide_Type (Act_T)\n-              or else No (Underlying_Type (Act_T))\n+              or else No (Full_View (Act_T))\n             then\n                Error_Msg_N (\"premature use of incomplete type\", Actual);\n                Abandon_Instantiation (Actual);"}, {"sha": "13167d6ef188f30356f021891444b6ad32900726", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=35c91e0571501b3d876e4e0c5b4cf33da758f1da", "patch": "@@ -1,3 +1,9 @@\n+2008-04-16  Samuel Tardieu  <sam@rfc1149.net>\n+\n+\tPR ada/29015\n+\t* gnat.dg/incomplete1.ads, gnat.dg/incomplete2.ads,\n+\tgnat.dg/incomplete2.adb: New.\n+\n 2008-04-16  Hans-Peter Nilsson  <hp@axis.com>\n \n \tPR tree-optimization/35629"}, {"sha": "34900335d8a85b81ad18c7ee3f54ae5de178f8a4", "filename": "gcc/testsuite/gnat.dg/incomplete1.ads", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete1.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete1.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete1.ads?ref=35c91e0571501b3d876e4e0c5b4cf33da758f1da", "patch": "@@ -0,0 +1,3 @@\n+package Incomplete1 is\n+   type T is null record;\n+end Incomplete1;"}, {"sha": "19c83609b01c01393f67bacc4c7ab0505bfe9606", "filename": "gcc/testsuite/gnat.dg/incomplete2.adb", "status": "added", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete2.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete2.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete2.adb?ref=35c91e0571501b3d876e4e0c5b4cf33da758f1da", "patch": "@@ -0,0 +1,4 @@\n+-- { dg-do compile }\n+-- { dg-excess-errors \"instantiation abandoned\" }\n+with Incomplete1;\n+package body Incomplete2 is end Incomplete2;"}, {"sha": "21f2d2bb1bd3a2f3adf01bb21079524f7ccc84e5", "filename": "gcc/testsuite/gnat.dg/incomplete2.ads", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete2.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/35c91e0571501b3d876e4e0c5b4cf33da758f1da/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete2.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fincomplete2.ads?ref=35c91e0571501b3d876e4e0c5b4cf33da758f1da", "patch": "@@ -0,0 +1,8 @@\n+limited with Incomplete1;\n+package Incomplete2 is\n+   pragma Elaborate_Body;\n+   generic\n+      type T is private;\n+   package G is end G;\n+   package I1 is new G (Incomplete1.T); -- { dg-error \"premature use\" }\n+end Incomplete2;"}]}