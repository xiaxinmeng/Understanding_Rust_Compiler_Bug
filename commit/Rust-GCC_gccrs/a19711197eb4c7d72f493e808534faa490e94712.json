{"sha": "a19711197eb4c7d72f493e808534faa490e94712", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE5NzExMTk3ZWI0YzdkNzJmNDkzZTgwODUzNGZhYTQ5MGU5NDcxMg==", "commit": {"author": {"name": "Yannick Moy", "email": "moy@adacore.com", "date": "2018-06-11T09:18:12Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "pmderodat@gcc.gnu.org", "date": "2018-06-11T09:18:12Z"}, "message": "[Ada] Do not query the representation information in CodePeer/GNATprove\n\nRepresentation information generated when user calls the compiler with -gnatR\nswitch is not available when running the frontend inside CodePeer or GNATprove.\nDo not query such information in that case, as this leads to spurious messages\nthat it is not available.\n\nThere is no impact on compilation.\n\n2018-06-11  Yannick Moy  <moy@adacore.com>\n\ngcc/ada/\n\n\t* gnat1drv.adb: Do not check representation information in CodePeer and\n\tGNATprove modes, as these modes call a special backend instead of gigi,\n\tso do not have the information.\n\nFrom-SVN: r261414", "tree": {"sha": "b8bc7e9ef6f1a93a56e0f7ea7da3d26212f48432", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b8bc7e9ef6f1a93a56e0f7ea7da3d26212f48432"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a19711197eb4c7d72f493e808534faa490e94712", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a19711197eb4c7d72f493e808534faa490e94712", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a19711197eb4c7d72f493e808534faa490e94712", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a19711197eb4c7d72f493e808534faa490e94712/comments", "author": {"login": "yannickmoy", "id": 859440, "node_id": "MDQ6VXNlcjg1OTQ0MA==", "avatar_url": "https://avatars.githubusercontent.com/u/859440?v=4", "gravatar_id": "", "url": "https://api.github.com/users/yannickmoy", "html_url": "https://github.com/yannickmoy", "followers_url": "https://api.github.com/users/yannickmoy/followers", "following_url": "https://api.github.com/users/yannickmoy/following{/other_user}", "gists_url": "https://api.github.com/users/yannickmoy/gists{/gist_id}", "starred_url": "https://api.github.com/users/yannickmoy/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/yannickmoy/subscriptions", "organizations_url": "https://api.github.com/users/yannickmoy/orgs", "repos_url": "https://api.github.com/users/yannickmoy/repos", "events_url": "https://api.github.com/users/yannickmoy/events{/privacy}", "received_events_url": "https://api.github.com/users/yannickmoy/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d42dc0ade04ceb5b186fec9cdbc2554251753583", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d42dc0ade04ceb5b186fec9cdbc2554251753583", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d42dc0ade04ceb5b186fec9cdbc2554251753583"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "b9bb4791dacf74e76ec9fb519b32e04d271d8ee1", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a19711197eb4c7d72f493e808534faa490e94712/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a19711197eb4c7d72f493e808534faa490e94712/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=a19711197eb4c7d72f493e808534faa490e94712", "patch": "@@ -1,3 +1,9 @@\n+2018-06-11  Yannick Moy  <moy@adacore.com>\n+\n+\t* gnat1drv.adb: Do not check representation information in CodePeer and\n+\tGNATprove modes, as these modes call a special backend instead of gigi,\n+\tso do not have the information.\n+\n 2018-06-11  Yannick Moy  <moy@adacore.com>\n \n \t* inline.adb (Build_Body_To_Inline): Consider case of extended return"}, {"sha": "4325cf35e7d8b0b9fd43aef9cc9506a1cea4bff2", "filename": "gcc/ada/gnat1drv.adb", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a19711197eb4c7d72f493e808534faa490e94712/gcc%2Fada%2Fgnat1drv.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a19711197eb4c7d72f493e808534faa490e94712/gcc%2Fada%2Fgnat1drv.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgnat1drv.adb?ref=a19711197eb4c7d72f493e808534faa490e94712", "patch": "@@ -1455,6 +1455,9 @@ begin\n       --  representation information will be provided by the GNSA back end, not\n       --  gigi.\n \n+      --  A special back end is always called in CodePeer and GNATprove modes,\n+      --  unless this is a subunit.\n+\n       if Back_End_Mode = Declarations_Only\n         and then\n           (not (Back_Annotate_Rep_Info or Generate_SCIL or GNATprove_Mode)\n@@ -1468,7 +1471,11 @@ begin\n          Tree_Dump;\n          Tree_Gen;\n          Namet.Finalize;\n-         Check_Rep_Info;\n+\n+         if not (Generate_SCIL or GNATprove_Mode) then\n+            Check_Rep_Info;\n+         end if;\n+\n          return;\n       end if;\n "}]}