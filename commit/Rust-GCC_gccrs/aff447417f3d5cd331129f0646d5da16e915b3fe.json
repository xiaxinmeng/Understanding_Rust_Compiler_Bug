{"sha": "aff447417f3d5cd331129f0646d5da16e915b3fe", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWZmNDQ3NDE3ZjNkNWNkMzMxMTI5ZjA2NDZkNWRhMTZlOTE1YjNmZQ==", "commit": {"author": {"name": "Kazu Hirata", "email": "kazu@cs.umass.edu", "date": "2005-05-02T20:49:16Z"}, "committer": {"name": "Kazu Hirata", "email": "kazu@gcc.gnu.org", "date": "2005-05-02T20:49:16Z"}, "message": "class.c (current_lang_depth, [...]): Use VEC instead of VARRAY.\n\n\t* class.c (current_lang_depth, push_lang_context,\n\tpop_lang_context): Use VEC instead of VARRAY.\n\t* cp-tree.h (saved_scope): Use VEC for lang_base instead of\n\tVARRAY.\n\t* name-lookup.c (push_to_top_level): Use VEC instead of\n\tVARRAY.\n\nFrom-SVN: r99121", "tree": {"sha": "8f5237cf0617ac2ff64933da95c37fa5dde1cba2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8f5237cf0617ac2ff64933da95c37fa5dde1cba2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aff447417f3d5cd331129f0646d5da16e915b3fe", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aff447417f3d5cd331129f0646d5da16e915b3fe", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aff447417f3d5cd331129f0646d5da16e915b3fe", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aff447417f3d5cd331129f0646d5da16e915b3fe/comments", "author": null, "committer": null, "parents": [{"sha": "6fb58bba49ae8e0afaf502975e6fa30cbc288ed0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fb58bba49ae8e0afaf502975e6fa30cbc288ed0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fb58bba49ae8e0afaf502975e6fa30cbc288ed0"}], "stats": {"total": 18, "additions": 12, "deletions": 6}, "files": [{"sha": "ee526e2ec1398fb56849ebe12a45987fbf3556d1", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=aff447417f3d5cd331129f0646d5da16e915b3fe", "patch": "@@ -6,6 +6,13 @@\n \t* mangle.c (discriminator_for_local_entity): Likewise.\n \t* name-lookup.c (pushtag): Likewise.\n \n+\t* class.c (current_lang_depth, push_lang_context,\n+\tpop_lang_context): Use VEC instead of VARRAY.\n+\t* cp-tree.h (saved_scope): Use VEC for lang_base instead of\n+\tVARRAY.\n+\t* name-lookup.c (push_to_top_level): Use VEC instead of\n+\tVARRAY.\n+\n 2005-05-02  Paolo Bonzini  <bonzini@gnu.org>\n \n         * semantics.c (finish_call_expr): Call resolve_overloaded_builtin"}, {"sha": "6217a2cce7f793c8d03db08f8af8d0fd868c5061", "filename": "gcc/cp/class.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fclass.c?ref=aff447417f3d5cd331129f0646d5da16e915b3fe", "patch": "@@ -5523,7 +5523,7 @@ pop_nested_class (void)\n int\n current_lang_depth (void)\n {\n-  return VARRAY_ACTIVE_SIZE (current_lang_base);\n+  return VEC_length (tree, current_lang_base);\n }\n \n /* Set global variables CURRENT_LANG_NAME to appropriate value\n@@ -5532,7 +5532,7 @@ current_lang_depth (void)\n void\n push_lang_context (tree name)\n {\n-  VARRAY_PUSH_TREE (current_lang_base, current_lang_name);\n+  VEC_safe_push (tree, gc, current_lang_base, current_lang_name);\n \n   if (name == lang_name_cplusplus)\n     {\n@@ -5567,8 +5567,7 @@ push_lang_context (tree name)\n void\n pop_lang_context (void)\n {\n-  current_lang_name = VARRAY_TOP_TREE (current_lang_base);\n-  VARRAY_POP (current_lang_base);\n+  current_lang_name = VEC_pop (tree, current_lang_base);\n }\n \f\n /* Type instantiation routines.  */"}, {"sha": "b057581b0340d78bb5b453653afae7b3c2ba7c84", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=aff447417f3d5cd331129f0646d5da16e915b3fe", "patch": "@@ -659,7 +659,7 @@ struct saved_scope GTY(())\n   tree class_type;\n   tree access_specifier;\n   tree function_decl;\n-  varray_type lang_base;\n+  VEC(tree,gc) *lang_base;\n   tree lang_name;\n   tree template_parms;\n   struct cp_binding_level *x_previous_class_level;"}, {"sha": "78f83253390c5fae1b17a8f954c5abc03c954ae3", "filename": "gcc/cp/name-lookup.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2Fname-lookup.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aff447417f3d5cd331129f0646d5da16e915b3fe/gcc%2Fcp%2Fname-lookup.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fname-lookup.c?ref=aff447417f3d5cd331129f0646d5da16e915b3fe", "patch": "@@ -4864,7 +4864,7 @@ push_to_top_level (void)\n \n   scope_chain = s;\n   current_function_decl = NULL_TREE;\n-  VARRAY_TREE_INIT (current_lang_base, 10, \"current_lang_base\");\n+  current_lang_base = VEC_alloc (tree, gc, 10);\n   current_lang_name = lang_name_cplusplus;\n   current_namespace = global_namespace;\n   timevar_pop (TV_NAME_LOOKUP);"}]}