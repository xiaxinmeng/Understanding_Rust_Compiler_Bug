{"sha": "9fa33291c780a0d1d3bef0c0aa4650fa6829ade3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWZhMzMyOTFjNzgwYTBkMWQzYmVmMGMwYWE0NjUwZmE2ODI5YWRlMw==", "commit": {"author": {"name": "Robert Dewar", "email": "dewar@adacore.com", "date": "2008-08-04T12:51:00Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2008-08-04T12:51:00Z"}, "message": "2008-08-04  Robert Dewar  <dewar@adacore.com>\n\n\t* sem_res.adb:\n\t(Valid_Conversion): Catch case of designated types having different\n\tsizes, even though they statically match.\n\nFrom-SVN: r138615", "tree": {"sha": "33ff3310a71a557b34d9aa121030ffefc9ccd204", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/33ff3310a71a557b34d9aa121030ffefc9ccd204"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9fa33291c780a0d1d3bef0c0aa4650fa6829ade3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fa33291c780a0d1d3bef0c0aa4650fa6829ade3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9fa33291c780a0d1d3bef0c0aa4650fa6829ade3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9fa33291c780a0d1d3bef0c0aa4650fa6829ade3/comments", "author": null, "committer": null, "parents": [{"sha": "31e845120a7e947a0430e1b745b5873311ac9ab9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/31e845120a7e947a0430e1b745b5873311ac9ab9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/31e845120a7e947a0430e1b745b5873311ac9ab9"}], "stats": {"total": 22, "additions": 21, "deletions": 1}, "files": [{"sha": "4e0e0dedfcd97f6cd38c236e4049237838304569", "filename": "gcc/ada/sem_res.adb", "status": "modified", "additions": 21, "deletions": 1, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9fa33291c780a0d1d3bef0c0aa4650fa6829ade3/gcc%2Fada%2Fsem_res.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9fa33291c780a0d1d3bef0c0aa4650fa6829ade3/gcc%2Fada%2Fsem_res.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_res.adb?ref=9fa33291c780a0d1d3bef0c0aa4650fa6829ade3", "patch": "@@ -9519,7 +9519,27 @@ package body Sem_Res is\n                       (not Is_Constrained (Opnd)\n                         or else not Is_Constrained (Target)))\n                then\n-                  return True;\n+                  --  Special case, if Value_Size has been used to make the\n+                  --  sizes different, the conversion is not allowed even\n+                  --  though the subtypes statically match.\n+\n+                  if Known_Static_RM_Size (Target)\n+                    and then Known_Static_RM_Size (Opnd)\n+                    and then RM_Size (Target) /= RM_Size (Opnd)\n+                  then\n+                     Error_Msg_NE\n+                       (\"target designated subtype not compatible with }\",\n+                        N, Opnd);\n+                     Error_Msg_NE\n+                       (\"\\because sizes of the two designated subtypes differ\",\n+                        N, Opnd);\n+                     return False;\n+\n+                  --  Normal case where conversion is allowed\n+\n+                  else\n+                     return True;\n+                  end if;\n \n                else\n                   Error_Msg_NE"}]}