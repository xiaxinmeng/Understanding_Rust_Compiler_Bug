{"sha": "64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjRkM2ExYjQ4ZTRhM2I0NmJmZGZjZDQ0YjlkMTQxZGViMGJmM2I4Nw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2001-12-04T06:37:53Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2001-12-04T06:37:53Z"}, "message": "defineclass.cc (handleMethodsEnd): Invoke verifier here...\n\n\t* defineclass.cc (handleMethodsEnd): Invoke verifier here...\n\t(handleCodeAttribute): ... not here.\n\t* verify.cc (_Jv_BytecodeVerifier::state::state): Use `copy', not\n\tstructure assignment.\n\nFrom-SVN: r47591", "tree": {"sha": "032cf042fe4b123003d1e37679a4281f05c4c8d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/032cf042fe4b123003d1e37679a4281f05c4c8d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "html_url": "https://github.com/Rust-GCC/gccrs/commit/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/comments", "author": null, "committer": null, "parents": [{"sha": "2ca2d9ee0f4845d32453142ed3466dd7116906c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ca2d9ee0f4845d32453142ed3466dd7116906c7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ca2d9ee0f4845d32453142ed3466dd7116906c7"}], "stats": {"total": 29, "additions": 20, "deletions": 9}, "files": [{"sha": "fbfead832ffc73cdec9a950ee98c07885089b2eb", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "patch": "@@ -1,3 +1,10 @@\n+2001-12-03  Tom Tromey  <tromey@redhat.com>\n+\n+\t* defineclass.cc (handleMethodsEnd): Invoke verifier here...\n+\t(handleCodeAttribute): ... not here.\n+\t* verify.cc (_Jv_BytecodeVerifier::state::state): Use `copy', not\n+\tstructure assignment.\n+\n 2001-12-02  Bryce McKinlay  <bryce@waitaki.otago.ac.nz>\n \n \t* Makefile.am (nat_files, x_nat_files): Make sure the dependencies"}, {"sha": "31a4662532097740aceb490b657b1e0f8a95901d", "filename": "libjava/defineclass.cc", "status": "modified", "additions": 11, "deletions": 7, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/libjava%2Fdefineclass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/libjava%2Fdefineclass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fdefineclass.cc?ref=64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "patch": "@@ -500,10 +500,10 @@ void _Jv_ClassReader::read_methods ()\n \n       check_tag (name_index, JV_CONSTANT_Utf8);\n       prepare_pool_entry (descriptor_index, JV_CONSTANT_Utf8);\n-      \n+\n       handleMethod (i, access_flags, name_index,\n \t\t    descriptor_index);\n-      \n+\n       for (int j = 0; j < attributes_count; j++)\n \t{\n \t  read_one_method_attribute (i);\n@@ -1282,10 +1282,6 @@ void _Jv_ClassReader::handleCodeAttribute\n \t  code_length);\n \n   def->interpreted_methods[method_index] = method;\n-\n-  // FIXME: Shouldn't this be done after loading completes?\n-//    if (verify)\n-//      _Jv_VerifyMethod (method);\n }\n \n void _Jv_ClassReader::handleExceptionTableEntry \n@@ -1332,9 +1328,17 @@ void _Jv_ClassReader::handleMethodsEnd ()\n \t{\n \t  if (def->interpreted_methods[i] == 0)\n \t    throw_class_format_error (\"method with no code\");\n+\n+\t  if (verify)\n+\t    {\n+\t      _Jv_InterpMethod *m;\n+\t      m = (reinterpret_cast<_Jv_InterpMethod *>\n+\t\t   (def->interpreted_methods[i]));\n+\t      // FIXME: enable once verifier is more fully tested.\n+\t      // _Jv_VerifyMethod (m);\n+\t    }\n \t}\n     }\n-\n }\n \n void _Jv_ClassReader::throw_class_format_error (char *msg)"}, {"sha": "d4017eb776589b5c8826815a58c2c5e4d3e35a91", "filename": "libjava/verify.cc", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/libjava%2Fverify.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87/libjava%2Fverify.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fverify.cc?ref=64d3a1b48e4a3b46bfdfcd44b9d141deb0bf3b87", "patch": "@@ -697,12 +697,12 @@ class _Jv_BytecodeVerifier\n       subroutine = 0;\n     }\n \n-    state (const state *copy, int max_stack, int max_locals)\n+    state (const state *orig, int max_stack, int max_locals)\n     {\n       stack = new type[max_stack];\n       locals = new type[max_locals];\n       local_changed = (bool *) _Jv_Malloc (sizeof (bool) * max_locals);\n-      *this = *copy;\n+      copy (orig, max_stack, max_locals);\n       next = INVALID;\n     }\n "}]}