{"sha": "af75fb675d7e451df34a1114b236e2291ee5f638", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWY3NWZiNjc1ZDdlNDUxZGYzNGExMTE0YjIzNmUyMjkxZWU1ZjYzOA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2003-03-15T01:43:07Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2003-03-15T01:43:07Z"}, "message": "re PR rtl-optimization/6871 (const objects shouldn't be moved to .bss)\n\n        PR optimization/6871\n        * varasm.c (assemble_variable): Leave constant zeroes in .rodata.\n\nFrom-SVN: r64387", "tree": {"sha": "2f234f8733535067850f91645ed976b5228e1fdd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2f234f8733535067850f91645ed976b5228e1fdd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/af75fb675d7e451df34a1114b236e2291ee5f638", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af75fb675d7e451df34a1114b236e2291ee5f638", "html_url": "https://github.com/Rust-GCC/gccrs/commit/af75fb675d7e451df34a1114b236e2291ee5f638", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/af75fb675d7e451df34a1114b236e2291ee5f638/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "adf936a606445e0e6c0d1de74338a5e237d9217e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adf936a606445e0e6c0d1de74338a5e237d9217e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adf936a606445e0e6c0d1de74338a5e237d9217e"}], "stats": {"total": 12, "additions": 12, "deletions": 0}, "files": [{"sha": "146eb18973bbf4bcef4729dee95e77b815ac3020", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af75fb675d7e451df34a1114b236e2291ee5f638/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af75fb675d7e451df34a1114b236e2291ee5f638/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=af75fb675d7e451df34a1114b236e2291ee5f638", "patch": "@@ -1,3 +1,8 @@\n+2003-03-14  Jason Merrill  <jason@redhat.com>\n+\n+\tPR optimization/6871\n+\t* varasm.c (assemble_variable): Leave constant zeroes in .rodata.\n+\n 2003-03-14  Neil Booth  <neil@daikokuya.co.uk>\n \n \t* c-opts.c (finish_options): New."}, {"sha": "e907f193b0fe6bac3d0cd99acd96e9d2c2024d71", "filename": "gcc/testsuite/gcc.dg/section1.c", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af75fb675d7e451df34a1114b236e2291ee5f638/gcc%2Ftestsuite%2Fgcc.dg%2Fsection1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af75fb675d7e451df34a1114b236e2291ee5f638/gcc%2Ftestsuite%2Fgcc.dg%2Fsection1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fsection1.c?ref=af75fb675d7e451df34a1114b236e2291ee5f638", "patch": "@@ -0,0 +1,5 @@\n+/* PR optimization/6871 */\n+/* Constant variables belong in .rodata, not .bss.  */\n+/* { dg-final { scan-assembler-not \"\\.bss\" } } */\n+\n+const int i = 0;"}, {"sha": "42775dca5bc692b0e6bae5ed4685f693b58e6dd5", "filename": "gcc/varasm.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/af75fb675d7e451df34a1114b236e2291ee5f638/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/af75fb675d7e451df34a1114b236e2291ee5f638/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=af75fb675d7e451df34a1114b236e2291ee5f638", "patch": "@@ -1551,6 +1551,8 @@ assemble_variable (decl, top_level, at_end, dont_output_data)\n   else if (DECL_INITIAL (decl) == 0\n \t   || DECL_INITIAL (decl) == error_mark_node\n \t   || (flag_zero_initialized_in_bss\n+\t       /* Leave constant zeroes in .rodata so they can be shared.  */\n+\t       && !TREE_READONLY (decl)\n \t       && initializer_zerop (DECL_INITIAL (decl))))\n     {\n       unsigned HOST_WIDE_INT size = tree_low_cst (DECL_SIZE_UNIT (decl), 1);"}]}