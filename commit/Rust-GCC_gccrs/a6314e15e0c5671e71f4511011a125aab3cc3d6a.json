{"sha": "a6314e15e0c5671e71f4511011a125aab3cc3d6a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTYzMTRlMTVlMGM1NjcxZTcxZjQ1MTEwMTFhMTI1YWFiM2NjM2Q2YQ==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2015-06-30T19:18:34Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@gcc.gnu.org", "date": "2015-06-30T19:18:34Z"}, "message": "fixes to gcc_jit_context_dump_reproducer_to_file\n\ngcc/jit/ChangeLog:\n\t* jit-recording.c\n\t(gcc::jit::recording::context::dump_reproducer_to_file):\n\tAdd pragma to generated reproducers to disable -Wunused-variable.\n\tFix handling of NULL string options.\n\nFrom-SVN: r225204", "tree": {"sha": "c0e9a6fe7c2601958c3d008584862c73e00c43c9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0e9a6fe7c2601958c3d008584862c73e00c43c9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a6314e15e0c5671e71f4511011a125aab3cc3d6a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6314e15e0c5671e71f4511011a125aab3cc3d6a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a6314e15e0c5671e71f4511011a125aab3cc3d6a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a6314e15e0c5671e71f4511011a125aab3cc3d6a/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "adb6d84ba64c1513a4238691ec25e3137485f485", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/adb6d84ba64c1513a4238691ec25e3137485f485", "html_url": "https://github.com/Rust-GCC/gccrs/commit/adb6d84ba64c1513a4238691ec25e3137485f485"}], "stats": {"total": 25, "additions": 19, "deletions": 6}, "files": [{"sha": "2ab6153dc7946bbe83552fb54c59c088a134c686", "filename": "gcc/jit/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6314e15e0c5671e71f4511011a125aab3cc3d6a/gcc%2Fjit%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6314e15e0c5671e71f4511011a125aab3cc3d6a/gcc%2Fjit%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjit%2FChangeLog?ref=a6314e15e0c5671e71f4511011a125aab3cc3d6a", "patch": "@@ -1,3 +1,10 @@\n+2015-06-30  David Malcolm  <dmalcolm@redhat.com>\n+\n+\t* jit-recording.c\n+\t(gcc::jit::recording::context::dump_reproducer_to_file):\n+\tAdd pragma to generated reproducers to disable -Wunused-variable.\n+\tFix handling of NULL string options.\n+\n 2015-06-30  David Malcolm  <dmalcolm@redhat.com>\n \n \t* docs/cp/topics/expressions.rst: Remove stray semicolon."}, {"sha": "11b9739ed5a3ac9bfeaf7fce9b77b853416eaf04", "filename": "gcc/jit/jit-recording.c", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a6314e15e0c5671e71f4511011a125aab3cc3d6a/gcc%2Fjit%2Fjit-recording.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a6314e15e0c5671e71f4511011a125aab3cc3d6a/gcc%2Fjit%2Fjit-recording.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjit%2Fjit-recording.c?ref=a6314e15e0c5671e71f4511011a125aab3cc3d6a", "patch": "@@ -1494,6 +1494,7 @@ recording::context::dump_reproducer_to_file (const char *path)\n   print_version (r.get_file (), \"  \", false);\n   r.write (\"*/\\n\");\n   r.write (\"#include <libgccjit.h>\\n\\n\");\n+  r.write (\"#pragma GCC diagnostic ignored \\\"-Wunused-variable\\\"\\n\\n\");\n   r.write (\"static void\\nset_options (\");\n   r.write_params (contexts);\n   r.write (\");\\n\\n\");\n@@ -1564,12 +1565,17 @@ recording::context::dump_reproducer_to_file (const char *path)\n \n       r.write (\"  /* String options.  */\\n\");\n       for (int opt_idx = 0; opt_idx < GCC_JIT_NUM_STR_OPTIONS; opt_idx++)\n-\tr.write (\"  gcc_jit_context_set_str_option (%s,\\n\"\n-\t\t \"                                  %s,\\n\"\n-\t\t \"                                  \\\"%s\\\");\\n\",\n-\t\t r.get_identifier (contexts[ctxt_idx]),\n-\t\t str_option_reproducer_strings[opt_idx],\n-\t\t m_str_options[opt_idx] ? m_str_options[opt_idx] : \"NULL\");\n+\t{\n+\t  r.write (\"  gcc_jit_context_set_str_option (%s,\\n\"\n+\t\t   \"                                  %s,\\n\",\n+\t\t   r.get_identifier (contexts[ctxt_idx]),\n+\t\t   str_option_reproducer_strings[opt_idx]);\n+\t  if (m_str_options[opt_idx])\n+\t    r.write (\"                                  \\\"%s\\\");\\n\",\n+\t\t     m_str_options[opt_idx]);\n+\t  else\n+\t    r.write (\"                                  NULL);\\n\");\n+\t}\n       r.write (\"  /* Int options.  */\\n\");\n       for (int opt_idx = 0; opt_idx < GCC_JIT_NUM_INT_OPTIONS; opt_idx++)\n \tr.write (\"  gcc_jit_context_set_int_option (%s,\\n\""}]}