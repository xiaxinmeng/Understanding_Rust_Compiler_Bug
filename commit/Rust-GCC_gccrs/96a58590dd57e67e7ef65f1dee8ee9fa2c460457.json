{"sha": "96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTZhNTg1OTBkZDU3ZTY3ZTdlZjY1ZjFkZWU4ZWU5ZmEyYzQ2MDQ1Nw==", "commit": {"author": {"name": "H.J. Lu", "email": "hongjiu.lu@intel.com", "date": "2015-07-14T14:25:35Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2015-07-14T14:25:35Z"}, "message": "This patch syncs zlib.m4 with binutils-gdb and uses AM_ZLIB from zlib.m4\nin gcc/configure.ac.\n\nconfig/\n\n\t* zlib.m4: Sync with binutils-gdb.\n\ngcc/\n\n\t* Makefile.in (top_srcdir): New.\n\t* configure.ac: Use AM_ZLIB.\n\t* configure: Regeneated.\n\nFrom-SVN: r225774", "tree": {"sha": "283d05c62f478517a553de7fb4c73d0181b4189d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/283d05c62f478517a553de7fb4c73d0181b4189d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/comments", "author": {"login": "hjl-tools", "id": 1072356, "node_id": "MDQ6VXNlcjEwNzIzNTY=", "avatar_url": "https://avatars.githubusercontent.com/u/1072356?v=4", "gravatar_id": "", "url": "https://api.github.com/users/hjl-tools", "html_url": "https://github.com/hjl-tools", "followers_url": "https://api.github.com/users/hjl-tools/followers", "following_url": "https://api.github.com/users/hjl-tools/following{/other_user}", "gists_url": "https://api.github.com/users/hjl-tools/gists{/gist_id}", "starred_url": "https://api.github.com/users/hjl-tools/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/hjl-tools/subscriptions", "organizations_url": "https://api.github.com/users/hjl-tools/orgs", "repos_url": "https://api.github.com/users/hjl-tools/repos", "events_url": "https://api.github.com/users/hjl-tools/events{/privacy}", "received_events_url": "https://api.github.com/users/hjl-tools/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "6ed80e1e5116abd6a8119b9c187bcd261ac55b1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ed80e1e5116abd6a8119b9c187bcd261ac55b1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ed80e1e5116abd6a8119b9c187bcd261ac55b1b"}], "stats": {"total": 64, "additions": 38, "deletions": 26}, "files": [{"sha": "311378e2e77a72b6e5ea1403f281372e464ec2ab", "filename": "config/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/config%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/config%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2FChangeLog?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -1,3 +1,7 @@\n+2015-07-14  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* zlib.m4: Sync with binutils-gdb.\n+\n 2015-06-30  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* dfp.m4 (enable_decimal_float): Also set to yes for"}, {"sha": "afa57d112e74f03948b7c43071f62e48422ced6b", "filename": "config/zlib.m4", "status": "modified", "additions": 14, "deletions": 13, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/config%2Fzlib.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/config%2Fzlib.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/config%2Fzlib.m4?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -1,18 +1,19 @@\n-dnl A function to check for zlib availability.  zlib is used by default\n-dnl unless the user configured with --disable-nls.\n+dnl A function to check if the system's zlib library should be used.  The\n+dnl builtin zlib dnl is used by default unless the user configured with\n+dnl --with-system-zlib.\n \n AC_DEFUN([AM_ZLIB],\n [\n-  # See if the user specified whether he wants zlib support or not.\n-  AC_ARG_WITH(zlib,\n-    [  --with-zlib             include zlib support (auto/yes/no) [default=auto]],\n-    [], [with_zlib=auto])\n-\n-  if test \"$with_zlib\" != \"no\"; then\n-    AC_SEARCH_LIBS(zlibVersion, z, [AC_CHECK_HEADERS(zlib.h)])\n-    if test \"$with_zlib\" = \"yes\" -a \"$ac_cv_header_zlib_h\" != \"yes\"; then\n-      AC_MSG_ERROR([zlib (libz) library was explicitly requested but not found])\n-    fi\n+  # Use the system's zlib library.\n+  zlibdir=\"-L\\$(top_builddir)/../zlib\"\n+  zlibinc=\"-I\\$(top_srcdir)/../zlib\"\n+  AC_ARG_WITH(system-zlib,\n+  [AS_HELP_STRING([--with-system-zlib], [use installed libz])],\n+  if test x$with_system_zlib = xyes ; then\n+    zlibdir=\n+    zlibinc=\n   fi\n+  )\n+  AC_SUBST(zlibdir)\n+  AC_SUBST(zlibinc)\n ])\n-"}, {"sha": "a34eb8d975d26a800daa05ee89f81ccebf8909ef", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -1,3 +1,9 @@\n+2015-07-14  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\t* Makefile.in (top_srcdir): New.\n+\t* configure.ac: Use AM_ZLIB.\n+\t* configure: Regeneated.\n+\n 2015-07-14  Matthias Klose  <doko@ubuntu.com>\n \n \tPR target/66840"}, {"sha": "bf2186a24eeacb749382e6974d49668b0f48a24e", "filename": "gcc/Makefile.in", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -79,6 +79,9 @@ gcc_docdir = @srcdir@/doc\n abs_srcdir = @abs_srcdir@\n abs_docdir = @abs_srcdir@/doc\n \n+# Directory where sources are, relative to here.\n+top_srcdir = @top_srcdir@\n+\n # Top build directory for this package, relative to here.\n top_builddir = .\n "}, {"sha": "84f8abb8bb0b9d05fc1a057253fadae182e3d56c", "filename": "gcc/aclocal.m4", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Faclocal.m4?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -35,4 +35,5 @@ m4_include([../config/picflag.m4])\n m4_include([../config/progtest.m4])\n m4_include([../config/stdint.m4])\n m4_include([../config/warnings.m4])\n+m4_include([../config/zlib.m4])\n m4_include([acinclude.m4])"}, {"sha": "e0755f9ba82c1d1ac145e2cc812e568cf3c62c4a", "filename": "gcc/configure", "status": "modified", "additions": 9, "deletions": 4, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -28108,20 +28108,25 @@ fi\n \n \n # Use the system's zlib library.\n-zlibdir=-L../zlib\n-zlibinc=\"-I\\$(srcdir)/../zlib\"\n+\n+  # Use the system's zlib library.\n+  zlibdir=\"-L\\$(top_builddir)/../zlib\"\n+  zlibinc=\"-I\\$(top_srcdir)/../zlib\"\n \n # Check whether --with-system-zlib was given.\n if test \"${with_system_zlib+set}\" = set; then :\n-  withval=$with_system_zlib; zlibdir=\n-zlibinc=\n+  withval=$with_system_zlib; if test x$with_system_zlib = xyes ; then\n+    zlibdir=\n+    zlibinc=\n+  fi\n \n fi\n \n \n \n \n \n+\n { $as_echo \"$as_me:${as_lineno-$LINENO}: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n $as_echo_n \"checking whether to enable maintainer-specific portions of Makefiles... \" >&6; }\n     # Check whether --enable-maintainer-mode was given."}, {"sha": "7af6dbd3bec8025440f7eebee5c9a8759da89b84", "filename": "gcc/configure.ac", "status": "modified", "additions": 1, "deletions": 9, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/96a58590dd57e67e7ef65f1dee8ee9fa2c460457/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=96a58590dd57e67e7ef65f1dee8ee9fa2c460457", "patch": "@@ -5385,15 +5385,7 @@ fi\n AC_SUBST(HOST_LIBS)\n \n # Use the system's zlib library.\n-zlibdir=-L../zlib\n-zlibinc=\"-I\\$(srcdir)/../zlib\"\n-AC_ARG_WITH(system-zlib,\n-[AS_HELP_STRING([--with-system-zlib], [use installed libz])],\n-zlibdir=\n-zlibinc=\n-)\n-AC_SUBST(zlibdir)\n-AC_SUBST(zlibinc)\n+AM_ZLIB\n \n dnl Very limited version of automake's enable-maintainer-mode\n "}]}