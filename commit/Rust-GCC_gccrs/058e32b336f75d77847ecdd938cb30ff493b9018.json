{"sha": "058e32b336f75d77847ecdd938cb30ff493b9018", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDU4ZTMyYjMzNmY3NWQ3Nzg0N2VjZGQ5MzhjYjMwZmY0OTNiOTAxOA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2004-12-23T21:55:12Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2004-12-23T21:55:12Z"}, "message": "gimplify.c (gimplify_modify_expr_rhs): Use types_compatible_p.\n\n\t* gimplify.c (gimplify_modify_expr_rhs): Use types_compatible_p.\n\n\t* g++.dg/opt/temp1.C: Make memcpy actually copy bytes.\n\nFrom-SVN: r92571", "tree": {"sha": "fe6597866e3145314348d9f88fb30b8bdf3054fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe6597866e3145314348d9f88fb30b8bdf3054fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/058e32b336f75d77847ecdd938cb30ff493b9018", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/058e32b336f75d77847ecdd938cb30ff493b9018", "html_url": "https://github.com/Rust-GCC/gccrs/commit/058e32b336f75d77847ecdd938cb30ff493b9018", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/058e32b336f75d77847ecdd938cb30ff493b9018/comments", "author": null, "committer": null, "parents": [{"sha": "05f5e885564e730c6700bb57abfd75ce734b7e1b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/05f5e885564e730c6700bb57abfd75ce734b7e1b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/05f5e885564e730c6700bb57abfd75ce734b7e1b"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "c84ae79e5860d783f664198ba4a6db6d1099dc30", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=058e32b336f75d77847ecdd938cb30ff493b9018", "patch": "@@ -1,3 +1,7 @@\n+2004-12-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* gimplify.c (gimplify_modify_expr_rhs): Use types_compatible_p.\n+\n 2004-12-23  DJ Delorie  <dj@redhat.com>\n \n \t* genrecog.c (did_you_mean_codes): New."}, {"sha": "9bf4c4ec6a9809653ed0e7973a9fc407d70a4d91", "filename": "gcc/gimplify.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=058e32b336f75d77847ecdd938cb30ff493b9018", "patch": "@@ -2817,8 +2817,9 @@ gimplify_modify_expr_rhs (tree *expr_p, tree *from_p, tree *to_p, tree *pre_p,\n \t  pointer = TREE_OPERAND (*from_p, 0);\n \t  STRIP_NOPS (pointer);\n \t  if (TREE_CODE (pointer) == ADDR_EXPR\n-\t      && (TYPE_MAIN_VARIANT (TREE_TYPE (TREE_OPERAND (pointer, 0)))\n-\t\t  == TYPE_MAIN_VARIANT (TREE_TYPE (*from_p))))\n+\t      && (lang_hooks.types_compatible_p \n+\t\t  (TREE_TYPE (TREE_OPERAND (pointer, 0)),\n+\t\t   TREE_TYPE (*from_p))))\n \t    {\n \t      *from_p = TREE_OPERAND (pointer, 0); \n \t      ret = GS_OK;"}, {"sha": "e3e6ae7033cbcd98dba854ceda91e022df3f0f3c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=058e32b336f75d77847ecdd938cb30ff493b9018", "patch": "@@ -1,3 +1,7 @@\n+2004-12-23  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* g++.dg/opt/temp1.C: Make memcpy actually copy bytes.\n+\n 2004-12-23  Alexandre Oliva  <aoliva@redhat.com>\n \n \t* gcc.dg/empty2.c: Add missing dg-warning."}, {"sha": "05dd2697171ae7e746c74f6e394ce9a03ae38488", "filename": "gcc/testsuite/g++.dg/opt/temp1.C", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Ftemp1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/058e32b336f75d77847ecdd938cb30ff493b9018/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Ftemp1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fopt%2Ftemp1.C?ref=058e32b336f75d77847ecdd938cb30ff493b9018", "patch": "@@ -15,6 +15,10 @@ int i;\n extern \"C\"\n void *memcpy (void *dest, const void *src, __SIZE_TYPE__ n)\n {\n+  char *d = (char *) dest;\n+  const char *s = (const char *) src;\n+  while (n--)\n+    d[n] = s[n];\n   ++i;\n }\n  "}]}