{"sha": "180bde4f78fdc3c07ed45f8219a130f94a214171", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTgwYmRlNGY3OGZkYzNjMDdlZDQ1ZjgyMTlhMTMwZjk0YTIxNDE3MQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2002-11-18T12:35:15Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2002-11-18T12:35:15Z"}, "message": "sh.c (calc_live_regs): Update check for PIC liveness in compact code.\n\n\t* config/sh/sh.c (calc_live_regs): Update check for PIC liveness\n\tin compact code.\n\nFrom-SVN: r59212", "tree": {"sha": "b2c6499d86283af51031fc33d53928642c892e4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b2c6499d86283af51031fc33d53928642c892e4b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/180bde4f78fdc3c07ed45f8219a130f94a214171", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/180bde4f78fdc3c07ed45f8219a130f94a214171", "html_url": "https://github.com/Rust-GCC/gccrs/commit/180bde4f78fdc3c07ed45f8219a130f94a214171", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/180bde4f78fdc3c07ed45f8219a130f94a214171/comments", "author": null, "committer": null, "parents": [{"sha": "e300c78c25b7afa6ebf258572c015cccb4897e38", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e300c78c25b7afa6ebf258572c015cccb4897e38", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e300c78c25b7afa6ebf258572c015cccb4897e38"}], "stats": {"total": 30, "additions": 29, "deletions": 1}, "files": [{"sha": "7ab6bca3324ab355577ed6aee041d2bb24a33c2c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=180bde4f78fdc3c07ed45f8219a130f94a214171", "patch": "@@ -1,3 +1,8 @@\n+2002-11-18  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* config/sh/sh.c (calc_live_regs): Update check for PIC liveness\n+\tin compact code.\n+\n 2002-11-18  Richard Sandiford  <rsandifo@redhat.com>\n \n \t* config/sh/sh.md (initialize_trampoline): Do not force the"}, {"sha": "1b3f92d8a8b88b6edb82bf34dc38bce4871ec9be", "filename": "gcc/config/sh/sh.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2Fconfig%2Fsh%2Fsh.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2Fconfig%2Fsh%2Fsh.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh.c?ref=180bde4f78fdc3c07ed45f8219a130f94a214171", "patch": "@@ -4456,7 +4456,11 @@ calc_live_regs (count_ptr, live_regs_mask)\n \t     && reg != RETURN_ADDRESS_POINTER_REGNUM\n \t     && reg != T_REG && reg != GBR_REG)\n \t  : (/* Only push those regs which are used and need to be saved.  */\n-\t     regs_ever_live[reg] && ! call_used_regs[reg]))\n+\t     (TARGET_SHCOMPACT\n+\t      && flag_pic\n+\t      && current_function_args_info.call_cookie\n+\t      && reg == PIC_OFFSET_TABLE_REGNUM)\n+\t     || (regs_ever_live[reg] && ! call_used_regs[reg])))\n \t{\n \t  live_regs_mask[reg / 32] |= 1 << (reg % 32);\n \t  count += GET_MODE_SIZE (REGISTER_NATURAL_MODE (reg));"}, {"sha": "899f448e323ea7b6208f03eeb271af70681dd272", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=180bde4f78fdc3c07ed45f8219a130f94a214171", "patch": "@@ -1,3 +1,7 @@\n+2002-11-18  Richard Sandiford  <rsandifo@redhat.com>\n+\n+\t* gcc.c-torture/execute/20021118-1.c: New test.\n+\n 2002-11-16  Jakub Jelinek  <jakub@redhat.com>\n \n \t* gcc.dg/20021116-1.c: New test."}, {"sha": "0c1f800de76f84e1fef0fb0ec307cd85f0319b0a", "filename": "gcc/testsuite/gcc.c-torture/execute/20021118-1.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20021118-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/180bde4f78fdc3c07ed45f8219a130f94a214171/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20021118-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2F20021118-1.c?ref=180bde4f78fdc3c07ed45f8219a130f94a214171", "patch": "@@ -0,0 +1,15 @@\n+struct s { int f[4]; };\n+\n+int foo (struct s s, int x1, int x2, int x3, int x4, int x5, int x6, int x7)\n+{\n+  return s.f[3] + x7;\n+}\n+\n+int main ()\n+{\n+  struct s s = { 1, 2, 3, 4 };\n+\n+  if (foo (s, 100, 200, 300, 400, 500, 600, 700) != 704)\n+    abort ();\n+  exit (0);\n+}"}]}