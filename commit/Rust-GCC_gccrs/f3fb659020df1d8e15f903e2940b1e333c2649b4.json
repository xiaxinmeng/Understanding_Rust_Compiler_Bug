{"sha": "f3fb659020df1d8e15f903e2940b1e333c2649b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjNmYjY1OTAyMGRmMWQ4ZTE1ZjkwM2UyOTQwYjFlMzMzYzI2NDliNA==", "commit": {"author": {"name": "Chung-Lin Tang", "email": "cltang@codesourcery.com", "date": "2010-12-19T09:04:41Z"}, "committer": {"name": "Chung-Lin Tang", "email": "cltang@gcc.gnu.org", "date": "2010-12-19T09:04:41Z"}, "message": "arm.c (arm_legitimate_index_p): Add VFP load/store index range case.\n\n2010-12-19  Chung-Lin Tang  <cltang@codesourcery.com>\n\n\tgcc/\n\t* config/arm/arm.c (arm_legitimate_index_p): Add VFP load/store\n\tindex range case. Change to SF/DFmode tests to avoid capturing HFmode.\n\t(thumb2_legitimate_index_p): Same.\n\n\tgcc/testsuite/\n\t* gcc.target/arm/vfp-1.c (test_ldst): New test for VFP\n\tload/store immediate indexes.\n\nFrom-SVN: r168045", "tree": {"sha": "9e56005936eabf5d930be187ec45e50370fe46b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9e56005936eabf5d930be187ec45e50370fe46b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f3fb659020df1d8e15f903e2940b1e333c2649b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3fb659020df1d8e15f903e2940b1e333c2649b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3fb659020df1d8e15f903e2940b1e333c2649b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3fb659020df1d8e15f903e2940b1e333c2649b4/comments", "author": {"login": "cltang", "id": 4055966, "node_id": "MDQ6VXNlcjQwNTU5NjY=", "avatar_url": "https://avatars.githubusercontent.com/u/4055966?v=4", "gravatar_id": "", "url": "https://api.github.com/users/cltang", "html_url": "https://github.com/cltang", "followers_url": "https://api.github.com/users/cltang/followers", "following_url": "https://api.github.com/users/cltang/following{/other_user}", "gists_url": "https://api.github.com/users/cltang/gists{/gist_id}", "starred_url": "https://api.github.com/users/cltang/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/cltang/subscriptions", "organizations_url": "https://api.github.com/users/cltang/orgs", "repos_url": "https://api.github.com/users/cltang/repos", "events_url": "https://api.github.com/users/cltang/events{/privacy}", "received_events_url": "https://api.github.com/users/cltang/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "120d5f8ea40c87b7451278186dc60849e5455af9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/120d5f8ea40c87b7451278186dc60849e5455af9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/120d5f8ea40c87b7451278186dc60849e5455af9"}], "stats": {"total": 31, "additions": 27, "deletions": 4}, "files": [{"sha": "f79db55574a6419a21ab4c6caa49484d5658afa4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f3fb659020df1d8e15f903e2940b1e333c2649b4", "patch": "@@ -1,3 +1,9 @@\n+2010-12-19  Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\t* config/arm/arm.c (arm_legitimate_index_p): Add VFP load/store\n+\tindex range case. Change to SF/DFmode tests to avoid capturing HFmode.\n+\t(thumb2_legitimate_index_p): Same.\n+\n 2010-12-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/46969"}, {"sha": "d7108a38ec053ce565a94b19aff6f8915454434c", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=f3fb659020df1d8e15f903e2940b1e333c2649b4", "patch": "@@ -5647,8 +5647,8 @@ arm_legitimate_index_p (enum machine_mode mode, rtx index, RTX_CODE outer,\n \n   /* Standard coprocessor addressing modes.  */\n   if (TARGET_HARD_FLOAT\n-      && (TARGET_FPA || TARGET_MAVERICK)\n-      && (GET_MODE_CLASS (mode) == MODE_FLOAT\n+      && (TARGET_VFP || TARGET_FPA || TARGET_MAVERICK)\n+      && (mode == SFmode || mode == DFmode\n \t  || (TARGET_MAVERICK && mode == DImode)))\n     return (code == CONST_INT && INTVAL (index) < 1024\n \t    && INTVAL (index) > -1024\n@@ -5768,8 +5768,8 @@ thumb2_legitimate_index_p (enum machine_mode mode, rtx index, int strict_p)\n   /* ??? Combine arm and thumb2 coprocessor addressing modes.  */\n   /* Standard coprocessor addressing modes.  */\n   if (TARGET_HARD_FLOAT\n-      && (TARGET_FPA || TARGET_MAVERICK)\n-      && (GET_MODE_CLASS (mode) == MODE_FLOAT\n+      && (TARGET_VFP || TARGET_FPA || TARGET_MAVERICK)\n+      && (mode == SFmode || mode == DFmode\n \t  || (TARGET_MAVERICK && mode == DImode)))\n     return (code == CONST_INT && INTVAL (index) < 1024\n \t    && INTVAL (index) > -1024"}, {"sha": "d8c514654c5344130b3ae4d69974312eac0e7cf9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f3fb659020df1d8e15f903e2940b1e333c2649b4", "patch": "@@ -1,3 +1,8 @@\n+2010-12-19  Chung-Lin Tang  <cltang@codesourcery.com>\n+\n+\t* gcc.target/arm/vfp-1.c (test_ldst): New test for VFP\n+\tload/store immediate indexes.\n+\n 2010-12-19  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \t* objc.dg/gnu-api-2-resolve-method.m: Include objc/message.h."}, {"sha": "3a7090e4be3d7472ff0e1722748e9fab0d5d0900", "filename": "gcc/testsuite/gcc.target/arm/vfp-1.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fvfp-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f3fb659020df1d8e15f903e2940b1e333c2649b4/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fvfp-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Farm%2Fvfp-1.c?ref=f3fb659020df1d8e15f903e2940b1e333c2649b4", "patch": "@@ -125,3 +125,15 @@ void test_convert () {\n   d1 = u1;\n }\n \n+void test_ldst (float f[], double d[]) {\n+  /* { dg-final { scan-assembler \"flds.+ \\\\\\[r0, #1020\\\\\\]\" } } */\n+  /* { dg-final { scan-assembler \"flds.+ \\\\\\[r0, #-1020\\\\\\]\" } } */\n+  /* { dg-final { scan-assembler \"add.+ r0, #1024\" } } */\n+  /* { dg-final { scan-assembler \"fsts.+ \\\\\\[r0, #0\\\\\\]$\" } } */\n+  f[256] = f[255] + f[-255];\n+\n+  /* { dg-final { scan-assembler \"fldd.+ \\\\\\[r1, #1016\\\\\\]\" } } */\n+  /* { dg-final { scan-assembler \"fldd.+ \\\\\\[r1, #-1016\\\\\\]\" } } */\n+  /* { dg-final { scan-assembler \"fstd.+ \\\\\\[r1, #256\\\\\\]\" } } */\n+  d[32] = d[127] + d[-127];\n+}"}]}