{"sha": "43b60e578393cc58f1d75387b811cc90bc74297b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDNiNjBlNTc4MzkzY2M1OGYxZDc1Mzg3YjgxMWNjOTBiYzc0Mjk3Yg==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2019-10-11T08:33:03Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2019-10-11T08:33:03Z"}, "message": "decl.c (Gigi_Equivalent_Type): New case.\n\n\t* gcc-interface/decl.c (Gigi_Equivalent_Type) <E_Array_Subtype>: New\n\tcase.  Return the base type if the subtype is not constrained.\n\nFrom-SVN: r276865", "tree": {"sha": "23e1408fc88f516c0134fab884a79f2b079af7da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/23e1408fc88f516c0134fab884a79f2b079af7da"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/43b60e578393cc58f1d75387b811cc90bc74297b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43b60e578393cc58f1d75387b811cc90bc74297b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43b60e578393cc58f1d75387b811cc90bc74297b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43b60e578393cc58f1d75387b811cc90bc74297b/comments", "author": null, "committer": null, "parents": [{"sha": "104099b897fe28c5d28b81a83d7655ea3b91c0c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/104099b897fe28c5d28b81a83d7655ea3b91c0c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/104099b897fe28c5d28b81a83d7655ea3b91c0c8"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "8e11108c4fc526423ec942b1660b7305eacd7505", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=43b60e578393cc58f1d75387b811cc90bc74297b", "patch": "@@ -1,3 +1,8 @@\n+2019-10-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/decl.c (Gigi_Equivalent_Type) <E_Array_Subtype>: New\n+\tcase.  Return the base type if the subtype is not constrained.\n+\n 2019-10-11  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/decl.c (gnat_to_gnu_entity) <E_Named_{Integer|Real}>:"}, {"sha": "25298241ebacc7d30ef1da876483372526646074", "filename": "gcc/ada/gcc-interface/decl.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Fada%2Fgcc-interface%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Fdecl.c?ref=43b60e578393cc58f1d75387b811cc90bc74297b", "patch": "@@ -5026,6 +5026,11 @@ Gigi_Equivalent_Type (Entity_Id gnat_entity)\n       gnat_equiv = Etype (gnat_entity);\n       break;\n \n+    case E_Array_Subtype:\n+      if (!Is_Constrained (gnat_entity))\n+\tgnat_equiv = Etype (gnat_entity);\n+      break;\n+\n     case E_Class_Wide_Type:\n       gnat_equiv = Root_Type (gnat_entity);\n       break;"}, {"sha": "612b22b9243c7935398ea0a8481eeeb8e6882b0c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=43b60e578393cc58f1d75387b811cc90bc74297b", "patch": "@@ -1,3 +1,8 @@\n+2019-10-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/array38.adb: New test.\n+\t* gnat.dg/array38_pkg.ad[sb]: New helper.\n+\n 2019-10-11  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/91987"}, {"sha": "fe37b653eaaf94f4c05b762c2bf33053b4bc85a3", "filename": "gcc/testsuite/gnat.dg/array38.adb", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2Fgnat.dg%2Farray38.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2Fgnat.dg%2Farray38.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Farray38.adb?ref=43b60e578393cc58f1d75387b811cc90bc74297b", "patch": "@@ -0,0 +1,11 @@\n+-- { dg-do compile }\n+\n+with Array38_Pkg; use Array38_Pkg;\n+\n+procedure Array38 is\n+\n+  function My_F is new F (Index, Byte, Bytes, Integer);\n+\n+begin\n+  null;\n+end;"}, {"sha": "ebaa66eba8e2a96d0d7953b4ad5782ab66dfb579", "filename": "gcc/testsuite/gnat.dg/array38_pkg.adb", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2Fgnat.dg%2Farray38_pkg.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2Fgnat.dg%2Farray38_pkg.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Farray38_pkg.adb?ref=43b60e578393cc58f1d75387b811cc90bc74297b", "patch": "@@ -0,0 +1,8 @@\n+package body Array38_Pkg is\n+\n+   function F (Data : Array_Type) return Value_Type is\n+   begin\n+      return Value_Type'First;\n+   end;\n+\n+end Array38_Pkg;"}, {"sha": "17c3ef478923c634db65a2870a1469f0603a3b70", "filename": "gcc/testsuite/gnat.dg/array38_pkg.ads", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2Fgnat.dg%2Farray38_pkg.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/43b60e578393cc58f1d75387b811cc90bc74297b/gcc%2Ftestsuite%2Fgnat.dg%2Farray38_pkg.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Farray38_pkg.ads?ref=43b60e578393cc58f1d75387b811cc90bc74297b", "patch": "@@ -0,0 +1,18 @@\n+package Array38_Pkg is\n+\n+   type Byte is mod 2**8;\n+\n+   type Length is new Natural;\n+   subtype Index is Length range 1 .. Length'Last;\n+\n+   type Bytes is array (Index range <>) of Byte with\n+     Predicate => Bytes'Length > 0;\n+\n+   generic\n+      type Index_Type   is (<>);\n+      type Element_Type is (<>);\n+      type Array_Type   is array (Index_Type range <>) of Element_Type;\n+      type Value_Type   is (<>);\n+   function F (Data : Array_Type) return Value_Type;\n+\n+end Array38_Pkg;"}]}