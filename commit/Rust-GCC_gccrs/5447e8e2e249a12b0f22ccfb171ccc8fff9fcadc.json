{"sha": "5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ0N2U4ZTJlMjQ5YTEyYjBmMjJjY2ZiMTcxY2NjOGZmZjlmY2FkYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-09-10T02:37:42Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-09-10T02:37:42Z"}, "message": "compiler: permit inlining constant expressions and expression statements\n    \n    This relatively minor change increases the number of inlinable\n    functions/methods in the standard library from 983 to 2179.\n    \n    In particular it permits inlining math/bits/RotateLeftNN.  This\n    restores the speed of crypto/sha256 back to what it was before the\n    update to 1.13beta1.\n    \n    Reviewed-on: https://go-review.googlesource.com/c/gofrontend/+/194340\n\nFrom-SVN: r275558", "tree": {"sha": "6035009eba3ff49350241fb098c94923426439f3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6035009eba3ff49350241fb098c94923426439f3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/comments", "author": null, "committer": null, "parents": [{"sha": "77df40e8127ec4f62c01c15f2d6f76d995424863", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77df40e8127ec4f62c01c15f2d6f76d995424863", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77df40e8127ec4f62c01c15f2d6f76d995424863"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "a762d6bf2f3999d3a77eca27517389644a2323d2", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "patch": "@@ -1,4 +1,4 @@\n-c6097f269d2b3dbfd5204cf7e3d0b9f8d7ec2b5e\n+5c3f52ffbae7a9bb59bce63cd2cffdd8af8f4a92\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "7d8963e2c0be835f2121070f5a1c76ad6b25715f", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "patch": "@@ -3283,6 +3283,10 @@ class Const_expression : public Expression\n   Bexpression*\n   do_get_backend(Translate_context* context);\n \n+  int\n+  do_inlining_cost() const\n+  { return 1; }\n+\n   // When exporting a reference to a const as part of a const\n   // expression, we export the value.  We ignore the fact that it has\n   // a name."}, {"sha": "3dc394ab32b1af94cae2ec65919a943270192562", "filename": "gcc/go/gofrontend/statements.cc", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2Fstatements.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.cc?ref=5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "patch": "@@ -158,6 +158,10 @@ Statement::import_statement(Import_function_body* ifb, Location loc)\n     return Goto_statement::do_import(ifb, loc);\n \n   Expression* lhs = Expression::import_expression(ifb, loc);\n+\n+  if (ifb->match_c_string(\" //\"))\n+    return Statement::make_statement(lhs, true);\n+\n   ifb->require_c_string(\" = \");\n   Expression* rhs = Expression::import_expression(ifb, loc);\n   return Statement::make_assignment(lhs, rhs, loc);\n@@ -2089,6 +2093,14 @@ Expression_statement::do_may_fall_through() const\n   return true;\n }\n \n+// Export an expression statement.\n+\n+void\n+Expression_statement::do_export_statement(Export_function_body* efb)\n+{\n+  this->expr_->export_expression(efb);\n+}\n+\n // Convert to backend representation.\n \n Bstatement*"}, {"sha": "f1c6be9c98a990224991793082a70f1899e450af", "filename": "gcc/go/gofrontend/statements.h", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2Fstatements.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc/gcc%2Fgo%2Fgofrontend%2Fstatements.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fstatements.h?ref=5447e8e2e249a12b0f22ccfb171ccc8fff9fcadc", "patch": "@@ -924,6 +924,13 @@ class Expression_statement : public Statement\n   bool\n   do_may_fall_through() const;\n \n+  int\n+  do_inlining_cost()\n+  { return 0; }\n+\n+  void\n+  do_export_statement(Export_function_body*);\n+\n   Bstatement*\n   do_get_backend(Translate_context* context);\n "}]}