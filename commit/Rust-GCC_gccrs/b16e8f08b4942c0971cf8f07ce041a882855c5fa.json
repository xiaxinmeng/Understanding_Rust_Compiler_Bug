{"sha": "b16e8f08b4942c0971cf8f07ce041a882855c5fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjE2ZThmMDhiNDk0MmMwOTcxY2Y4ZjA3Y2UwNDFhODgyODU1YzVmYQ==", "commit": {"author": {"name": "Per Bothner", "email": "per@bothner.com", "date": "2001-03-16T06:30:28Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2001-03-16T06:30:28Z"}, "message": "java-tree.h (BLOCK_IS_IMPLICIT): New flag.\n\n\n\t* java-tree.h (BLOCK_IS_IMPLICIT):  New flag.\n\t* parse.h (BLOCK_EXPR_ORIGIN):  Removed macro.\n\t* parse.y (declare_local_variables, maybe_absorb_scoping_blocks):\n\tUse BLOCK_IS_IMPLICIT rather than BLOCK_EXPR_ORIGIN.\n\nFrom-SVN: r40542", "tree": {"sha": "67536e58400ed7f787f84efc053a21e12fed953e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/67536e58400ed7f787f84efc053a21e12fed953e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b16e8f08b4942c0971cf8f07ce041a882855c5fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b16e8f08b4942c0971cf8f07ce041a882855c5fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b16e8f08b4942c0971cf8f07ce041a882855c5fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b16e8f08b4942c0971cf8f07ce041a882855c5fa/comments", "author": {"login": "PerBothner", "id": 10293361, "node_id": "MDQ6VXNlcjEwMjkzMzYx", "avatar_url": "https://avatars.githubusercontent.com/u/10293361?v=4", "gravatar_id": "", "url": "https://api.github.com/users/PerBothner", "html_url": "https://github.com/PerBothner", "followers_url": "https://api.github.com/users/PerBothner/followers", "following_url": "https://api.github.com/users/PerBothner/following{/other_user}", "gists_url": "https://api.github.com/users/PerBothner/gists{/gist_id}", "starred_url": "https://api.github.com/users/PerBothner/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/PerBothner/subscriptions", "organizations_url": "https://api.github.com/users/PerBothner/orgs", "repos_url": "https://api.github.com/users/PerBothner/repos", "events_url": "https://api.github.com/users/PerBothner/events{/privacy}", "received_events_url": "https://api.github.com/users/PerBothner/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "3a2e5926e6f7b9353623b9d4aad695cc421b28d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3a2e5926e6f7b9353623b9d4aad695cc421b28d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3a2e5926e6f7b9353623b9d4aad695cc421b28d7"}], "stats": {"total": 19, "additions": 11, "deletions": 8}, "files": [{"sha": "50efdcde427a1139cb5e211adab01ef88a92fc38", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=b16e8f08b4942c0971cf8f07ce041a882855c5fa", "patch": "@@ -1,5 +1,10 @@\n 2001-03-15  Per Bothner  <per@bothner.com>\n \n+\t* java-tree.h (BLOCK_IS_IMPLICIT):  New flag.\n+\t* parse.h (BLOCK_EXPR_ORIGIN):  Removed macro.\n+\t* parse.y (declare_local_variables, maybe_absorb_scoping_blocks):\n+\tUse BLOCK_IS_IMPLICIT rather than BLOCK_EXPR_ORIGIN.\n+\t\n \t* jcf-parse.c (yyparse):  Set/reset input_filename for source file.\n \t* parse.y (java_expand_classes):  Likewise.\n \t"}, {"sha": "a2be1b3ef54964cd53dcc3c7d48a739d106017dc", "filename": "gcc/java/java-tree.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2Fjava-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2Fjava-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-tree.h?ref=b16e8f08b4942c0971cf8f07ce041a882855c5fa", "patch": "@@ -48,6 +48,7 @@ struct JCF;\n       IS_A_CLASSFILE_NAME (in IDENTIFIER_NODE)\n       COMPOUND_ASSIGN_P (in EXPR (binop_*))\n       LOCAL_CLASS_P (in RECORD_TYPE)\n+      BLOCK_IS_IMPLICIT (in BLOCK)\n    2: RETURN_MAP_ADJUSTED (in TREE_VEC).\n       QUALIFIED_P (in IDENTIFIER_NODE)\n       PRIMARY_P (in EXPR_WITH_FILE_LOCATION)\n@@ -1501,6 +1502,8 @@ extern tree *type_map;\n \n #define BLOCK_EXPR_DECLS(NODE)  BLOCK_VARS(NODE)\n #define BLOCK_EXPR_BODY(NODE)   BLOCK_SUBBLOCKS(NODE)\n+/* True for an implicit block surrounding declaration not at start of {...}. */\n+#define BLOCK_IS_IMPLICIT(NODE) TREE_LANG_FLAG_1 (NODE)\n \n #define BUILD_MONITOR_ENTER(WHERE, ARG)\t\t\t\t\\\n   {\t\t\t\t\t\t\t\t\\"}, {"sha": "8a7bae56a1bda705be6bbba8c57efc2ac24e6685", "filename": "gcc/java/parse.h", "status": "modified", "additions": 0, "deletions": 4, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2Fparse.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2Fparse.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.h?ref=b16e8f08b4942c0971cf8f07ce041a882855c5fa", "patch": "@@ -603,10 +603,6 @@ typedef struct _jdeplist {\n #define GET_CURRENT_BLOCK(F) ((F) ? DECL_FUNCTION_BODY ((F)) :\t\\\n \t\t\t     current_static_block)\n \n-/* For an artificial BLOCK (created to house a local variable declaration not\n-   at the start of an existing block), the parent block;  otherwise NULL. */\n-#define BLOCK_EXPR_ORIGIN(NODE) BLOCK_ABSTRACT_ORIGIN(NODE)\n-\n /* Merge an other line to the source line number of a decl. Used to\n    remember function's end. */\n #define DECL_SOURCE_LINE_MERGE(DECL,NO) DECL_SOURCE_LINE(DECL) |= (NO << 16)"}, {"sha": "2100c66c24556755534a900b94f1e59d00fab86d", "filename": "gcc/java/parse.y", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b16e8f08b4942c0971cf8f07ce041a882855c5fa/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=b16e8f08b4942c0971cf8f07ce041a882855c5fa", "patch": "@@ -6909,12 +6909,11 @@ declare_local_variables (modifier, type, vlist)\n   int final_p = 0;\n \n   /* Push a new block if statements were seen between the last time we\n-     pushed a block and now. Keep a cound of block to close */\n+     pushed a block and now. Keep a count of blocks to close */\n   if (BLOCK_EXPR_BODY (GET_CURRENT_BLOCK (current_function_decl)))\n     {\n-      tree body = GET_CURRENT_BLOCK (current_function_decl);\n       tree b = enter_block ();\n-      BLOCK_EXPR_ORIGIN (b) = body;\n+      BLOCK_IS_IMPLICIT (b) = 1;\n     }\n \n   if (modifier)\n@@ -11962,7 +11961,7 @@ lookup_name_in_blocks (name)\n static void\n maybe_absorb_scoping_blocks ()\n {\n-  while (BLOCK_EXPR_ORIGIN (GET_CURRENT_BLOCK (current_function_decl)))\n+  while (BLOCK_IS_IMPLICIT (GET_CURRENT_BLOCK (current_function_decl)))\n     {\n       tree b = exit_block ();\n       java_method_add_stmt (current_function_decl, b);"}]}