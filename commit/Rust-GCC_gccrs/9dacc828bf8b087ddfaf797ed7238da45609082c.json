{"sha": "9dacc828bf8b087ddfaf797ed7238da45609082c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRhY2M4MjhiZjhiMDg3ZGRmYWY3OTdlZDcyMzhkYTQ1NjA5MDgyYw==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-03-11T16:48:32Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-03-11T17:52:56Z"}, "message": "libstdc++: Fix find_type helper to work consistently\n\nThe find_type helper function sometimes results in \"class X::name\" and\nlookup for that fails. For more details see \"Problem 1\" in\nhttps://gcc.gnu.org/pipermail/libstdc++/2021-March/052132.html and the\nexample at https://sourceware.org/bugzilla/show_bug.cgi?id=27510#c2\n\nThis patch replaces typ.unqualified() with typ.tag, which is never\nqualified, and will never include the 'class' or 'struct' keywords.\nUsing the .tag attribute should be safe here because we know we are\nlooking at a class type and we've already used strip_typedefs().\n\nlibstdc++-v3/ChangeLog:\n\n\t* python/libstdcxx/v6/printers.py (find_type): Use tag attribute\n\tinstead of unqualified() method.", "tree": {"sha": "74e3f58b355f002ec4747948f332d71b2726be23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/74e3f58b355f002ec4747948f332d71b2726be23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9dacc828bf8b087ddfaf797ed7238da45609082c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dacc828bf8b087ddfaf797ed7238da45609082c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9dacc828bf8b087ddfaf797ed7238da45609082c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9dacc828bf8b087ddfaf797ed7238da45609082c/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "15825b17cf3fbf28181c51fe94a2898f448f915c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15825b17cf3fbf28181c51fe94a2898f448f915c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15825b17cf3fbf28181c51fe94a2898f448f915c"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "550e0ecdd222bff9863533a263212af5c2bd12ee", "filename": "libstdc++-v3/python/libstdcxx/v6/printers.py", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9dacc828bf8b087ddfaf797ed7238da45609082c/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9dacc828bf8b087ddfaf797ed7238da45609082c/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpython%2Flibstdcxx%2Fv6%2Fprinters.py?ref=9dacc828bf8b087ddfaf797ed7238da45609082c", "patch": "@@ -85,8 +85,8 @@ def next(self):\n def find_type(orig, name):\n     typ = orig.strip_typedefs()\n     while True:\n-        # Strip cv-qualifiers.  PR 67440.\n-        search = '%s::%s' % (typ.unqualified(), name)\n+        # Use Type.tag to ignore cv-qualifiers.  PR 67440.\n+        search = '%s::%s' % (typ.tag, name)\n         try:\n             return gdb.lookup_type(search)\n         except RuntimeError:"}]}