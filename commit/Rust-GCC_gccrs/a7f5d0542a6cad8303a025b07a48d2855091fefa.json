{"sha": "a7f5d0542a6cad8303a025b07a48d2855091fefa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTdmNWQwNTQyYTZjYWQ4MzAzYTAyNWIwN2E0OGQyODU1MDkxZmVmYQ==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-10-23T02:31:00Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2008-10-23T02:31:00Z"}, "message": "re PR libfortran/37707 (Namelist read of array of derived type incorrect)\n\n2008-10-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org\n\n\tPR libfortran/37707\n\t* io/list_read.c (read_character): Remove code to look ahead in namelist\n\treads to descriminate non-delimited strings from namelist objects.\n\t* io/write.c (namelist_write): Delimit character strings with quote or\n\tapostrophe, defaulting to quote.\n\nFrom-SVN: r141317", "tree": {"sha": "0f795feb40442d1e9dcbe1cb9af2d4ad6fecd921", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f795feb40442d1e9dcbe1cb9af2d4ad6fecd921"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a7f5d0542a6cad8303a025b07a48d2855091fefa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7f5d0542a6cad8303a025b07a48d2855091fefa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7f5d0542a6cad8303a025b07a48d2855091fefa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7f5d0542a6cad8303a025b07a48d2855091fefa/comments", "author": null, "committer": null, "parents": [{"sha": "a7bd6332aca18130563fa6dfa25e82c93a9705c1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7bd6332aca18130563fa6dfa25e82c93a9705c1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7bd6332aca18130563fa6dfa25e82c93a9705c1"}], "stats": {"total": 70, "additions": 11, "deletions": 59}, "files": [{"sha": "be62b198ee4e05956e6e82a250c422313edd17a5", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7f5d0542a6cad8303a025b07a48d2855091fefa/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7f5d0542a6cad8303a025b07a48d2855091fefa/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=a7f5d0542a6cad8303a025b07a48d2855091fefa", "patch": "@@ -1,3 +1,11 @@\n+2008-10-22  Jerry DeLisle  <jvdelisle@gcc.gnu.org\n+\n+\tPR libfortran/37707\n+\t* io/list_read.c (read_character): Remove code to look ahead in namelist\n+\treads to descriminate non-delimited strings from namelist objects.\n+\t* io/write.c (namelist_write): Delimit character strings with quote or\n+\tapostrophe, defaulting to quote.\n+\n 2008-10-21  Thomas Koenig  <tkoenig@gcc.gnu.org>\n \n \tPR libfortran/34670"}, {"sha": "1f1023c10d22defdf6d03d3b34a218b0d6d37f06", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 2, "deletions": 46, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7f5d0542a6cad8303a025b07a48d2855091fefa/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7f5d0542a6cad8303a025b07a48d2855091fefa/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=a7f5d0542a6cad8303a025b07a48d2855091fefa", "patch": "@@ -929,52 +929,8 @@ read_character (st_parameter_dt *dtp, int length __attribute__ ((unused)))\n     default:\n       if (dtp->u.p.namelist_mode)\n \t{\n-\t  if (dtp->u.p.current_unit->delim_status == DELIM_APOSTROPHE\n-\t      || dtp->u.p.current_unit->delim_status == DELIM_QUOTE\n-\t      || c == '&' || c == '$' || c == '/')\n-\t    {\n-\t      unget_char (dtp, c);\n-\t      return;\n-\t    }\n-\n-\t  /* Check to see if we are seeing a namelist object name by using the\n-\t     line buffer and looking ahead for an '=' or '('.  */\n-\t  l_push_char (dtp, c);\n-\n-\t  int i;\n-\t  for(i = 0; i < 63; i++)\n-\t    {\n-\t      c = next_char (dtp);\n-\t      if (is_separator(c))\n-\t\t{\n-\t\t  unget_char (dtp, c);\n-\t\t  eat_separator (dtp);\n-\t\t  c = next_char (dtp);\n-\t\t  if (c != '=')\n-\t\t    {\n-\t\t      l_push_char (dtp, c);\n-\t\t      dtp->u.p.item_count = 0;\n-\t\t      dtp->u.p.line_buffer_enabled = 1;\n-\t\t      goto get_string;\n-\t\t    }\n-\t\t}\n-\n-\t      l_push_char (dtp, c);\n-\n-\t      if (c == '=' || c == '(')\n-\t\t{\n-\t\t  dtp->u.p.item_count = 0;\n-\t\t  dtp->u.p.nml_read_error = 1;\n-\t\t  dtp->u.p.line_buffer_enabled = 1;\n-\t\t  return;\n-\t\t}\n-\t    }\n-\n-\t  /* The string is too long to be a valid object name so assume that it\n-\t     is a string to be read in as a value.  */\n-\t  dtp->u.p.item_count = 0;\n-\t  dtp->u.p.line_buffer_enabled = 1;\n-\t  goto get_string;\n+\t  unget_char (dtp, c);\n+\t  return;\n \t}\n \n       push_char (dtp, c);"}, {"sha": "12ff2953c6215903328741c92c4485d51c2ece7b", "filename": "libgfortran/io/write.c", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a7f5d0542a6cad8303a025b07a48d2855091fefa/libgfortran%2Fio%2Fwrite.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a7f5d0542a6cad8303a025b07a48d2855091fefa/libgfortran%2Fio%2Fwrite.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Fwrite.c?ref=a7f5d0542a6cad8303a025b07a48d2855091fefa", "patch": "@@ -1442,20 +1442,8 @@ namelist_write (st_parameter_dt *dtp)\n \n   /* Set the delimiter for namelist output.  */\n   tmp_delim = dtp->u.p.current_unit->delim_status;\n-  switch (tmp_delim)\n-    {\n-    case (DELIM_QUOTE):\n-      dtp->u.p.nml_delim = '\"';\n-      break;\n-\n-    case (DELIM_APOSTROPHE):\n-      dtp->u.p.nml_delim = '\\'';\n-      break;\n \n-    default:\n-      dtp->u.p.nml_delim = '\\0';\n-      break;\n-    }\n+  dtp->u.p.nml_delim = tmp_delim == DELIM_APOSTROPHE ? '\\'' : '\"';\n \n   /* Temporarily disable namelist delimters.  */\n   dtp->u.p.current_unit->delim_status = DELIM_NONE;"}]}