{"sha": "f128db92ae25bb3499b98834e21e5b66121f0264", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjEyOGRiOTJhZTI1YmIzNDk5Yjk4ODM0ZTIxZTViNjYxMjFmMDI2NA==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2010-03-31T09:03:29Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2010-03-31T09:03:29Z"}, "message": "re PR target/39048 (gcc 4.4.0 20090131 - Extra underscore hides libgcc's soft-fp functions from Testsuite causing FAILs + naming error in libgcc)\n\n\tgcc:\n\tPR target/39048\n\t* config.gcc (i[34567]86-*-solaris2*): Add i386/t-fprules-softfp\n\tand soft-fp/t-softfp to tmake_file.\n\t* config/i386/sol2.h (LIBGCC2_HAS_TF_MODE): Redefine.\n\t(LIBGCC2_TF_CEXT): Define.\n\t(TF_SIZE): Define.\n\n\tlibgcc:\n\tPR target/39048\n\t* config.host (i[34567]86-*-solaris2): Handle 32-bit Solaris 2/x86\n\tlike other remaining 32-bit x86 OSes.\n\t* config/i386/32/sfp-machine.h (FP_HANDLE_EXCEPTIONS): Support Sun\n\tassembler syntax.\n\t* config/i386/libgcc-sol2.ver: New file.\n\t* config/i386/t-sol2 (SHLIB_MAPFILES): Add it.\n\nCo-Authored-By: Uros Bizjak <ubizjak@gmail.com>\n\nFrom-SVN: r157854", "tree": {"sha": "6d2203b80ded14c7c7c2d8548878e287d6cbd178", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6d2203b80ded14c7c7c2d8548878e287d6cbd178"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f128db92ae25bb3499b98834e21e5b66121f0264", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f128db92ae25bb3499b98834e21e5b66121f0264", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f128db92ae25bb3499b98834e21e5b66121f0264", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f128db92ae25bb3499b98834e21e5b66121f0264/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d8d55ac02edfc9adb80051aeb98f6434f1272927", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d8d55ac02edfc9adb80051aeb98f6434f1272927", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d8d55ac02edfc9adb80051aeb98f6434f1272927"}], "stats": {"total": 122, "additions": 121, "deletions": 1}, "files": [{"sha": "b0ed0128ed1ecf32387ed4778c60b90989d6e7ec", "filename": "gcc/config.gcc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -3402,6 +3402,9 @@ case ${target} in\n \ti[34567]86-*-linux* | x86_64-*-linux* | i[34567]86-*-kfreebsd*-gnu | x86_64-*-kfreebsd*-gnu)\n \t\ttmake_file=\"${tmake_file} i386/t-fprules-softfp soft-fp/t-softfp i386/t-linux\"\n \t\t;;\n+\ti[34567]86-*-solaris2*)\n+\t\ttmake_file=\"${tmake_file} i386/t-fprules-softfp soft-fp/t-softfp\"\n+\t\t;;\n \ti[34567]86-*-cygwin* | i[34567]86-*-mingw* | x86_64-*-mingw*)\n \t\ttmake_file=\"${tmake_file} i386/t-fprules-softfp soft-fp/t-softfp\"\n \t\t;;"}, {"sha": "777fc2cf129f2f72fb54149b387230c30f7d97a0", "filename": "gcc/config/i386/sol2.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/gcc%2Fconfig%2Fi386%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/gcc%2Fconfig%2Fi386%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsol2.h?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -165,4 +165,10 @@ along with GCC; see the file COPYING3.  If not see\n #define USE_HIDDEN_LINKONCE 0\n #endif\n \n+/* Put all *tf routines in libgcc.  */\n+#undef LIBGCC2_HAS_TF_MODE\n+#define LIBGCC2_HAS_TF_MODE 1\n+#define LIBGCC2_TF_CEXT q\n+#define TF_SIZE 113\n+\n #define MD_UNWIND_SUPPORT \"config/i386/sol2-unwind.h\""}, {"sha": "b2fe53578be77b7ecf52faee36572c211a2a0f2d", "filename": "libgcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2FChangeLog?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -1,3 +1,14 @@\n+2010-03-31  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\t    Uros Bizjak <ubizjak@gmail.com>\n+\n+\tPR target/39048\n+\t* config.host (i[34567]86-*-solaris2): Handle 32-bit Solaris 2/x86\n+\tlike other remaining 32-bit x86 OSes.\n+\t* config/i386/32/sfp-machine.h (FP_HANDLE_EXCEPTIONS): Support Sun\n+\tassembler syntax.\n+\t* config/i386/libgcc-sol2.ver: New file.\n+\t* config/i386/t-sol2 (SHLIB_MAPFILES): Add it.\n+\n 2010-03-30  Jack Howarth <howarth@bromo.med.uc.edu>\n \n \tPR c/43553"}, {"sha": "86159b77de62feb5ae589e05222ee1d810535f97", "filename": "libgcc/config.host", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig.host", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig.host", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig.host?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -600,6 +600,7 @@ case ${host} in\n i[34567]86-*-darwin* | x86_64-*-darwin* | \\\n   i[34567]86-*-kfreebsd*-gnu | x86_64-*-kfreebsd*-gnu | \\\n   i[34567]86-*-linux* | x86_64-*-linux* | \\\n+  i[34567]86-*-solaris2* | \\\n   i[34567]86-*-cygwin* | i[34567]86-*-mingw* | x86_64-*-mingw*)\n \tif test \"${host_address}\" = 32; then\n \t\ttmake_file=\"${tmake_file} t-softfp i386/${host_address}/t-fprules-softfp\""}, {"sha": "ccff31450102a6d88e6d7b92ff7202903794ee8a", "filename": "libgcc/config/i386/32/sfp-machine.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig%2Fi386%2F32%2Fsfp-machine.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig%2Fi386%2F32%2Fsfp-machine.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2F32%2Fsfp-machine.h?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -136,7 +136,7 @@ struct fenv\n     if (_fex & FP_EX_INVALID)\t\t\t\t\t\t\\\n       {\t\t\t\t\t\t\t\t\t\\\n \tfloat f = 0.0;\t\t\t\t\t\t\t\\\n-\t__asm__ __volatile__ (\"fdiv %0\" : \"+t\" (f));\t\t\t\\\n+\t__asm__ __volatile__ (\"fdiv {%y0, %0|%0, %y0}\" : \"+t\" (f));\t\\\n \t__asm__ __volatile__ (\"fwait\");\t\t\t\t\t\\\n       }\t\t\t\t\t\t\t\t\t\\\n     if (_fex & FP_EX_DIVZERO)\t\t\t\t\t\t\\"}, {"sha": "8d94d3c6178040f9218ccc857a1270491eda6750", "filename": "libgcc/config/i386/libgcc-sol2.ver", "status": "added", "additions": 96, "deletions": 0, "changes": 96, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig%2Fi386%2Flibgcc-sol2.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig%2Fi386%2Flibgcc-sol2.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Flibgcc-sol2.ver?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -0,0 +1,96 @@\n+# Copyright (C) 2010 Free Software Foundation, Inc.\n+#\n+# This file is part of GCC.\n+#\n+# GCC is free software; you can redistribute it and/or modify\n+# it under the terms of the GNU General Public License as published by\n+# the Free Software Foundation; either version 3, or (at your option)\n+# any later version.\n+#\n+# GCC is distributed in the hope that it will be useful,\n+# but WITHOUT ANY WARRANTY; without even the implied warranty of\n+# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+# GNU General Public License for more details.\n+#\n+# You should have received a copy of the GNU General Public License\n+# along with GCC; see the file COPYING3.  If not see\n+# <http://www.gnu.org/licenses/>.\n+\n+# 128 bit long double support was introduced with GCC 4.5.0 for Solaris 2.\n+# These lines make the symbols to get a @@GCC_4.5.0.\n+\n+%exclude {\n+  __addtf3\n+  __copysigntf3\n+  __divtc3\n+  __divtf3\n+  __eqtf2\n+  __extenddftf2\n+  __extendsftf2\n+  __extendxftf2\n+  __fabstf2\n+  __fixtfdi\n+  __fixtfsi\n+  __fixtfti\n+  __fixunstfdi\n+  __fixunstfsi\n+  __fixunstfti\n+  __floatditf\n+  __floatsitf\n+  __floattitf\n+  __floatunditf\n+  __floatunsitf\n+  __floatuntitf\n+  __getf2\n+  __gttf2\n+  __letf2\n+  __lttf2\n+  __multc3\n+  __multf3\n+  __negtf2\n+  __netf2\n+  __powitf2\n+  __subtf3\n+  __trunctfdf2\n+  __trunctfsf2\n+  __trunctfxf2\n+  __unordtf2\n+}\n+\n+GCC_4.5.0 {\n+  __addtf3\n+  __copysigntf3\n+  __divtc3\n+  __divtf3\n+  __eqtf2\n+  __extenddftf2\n+  __extendsftf2\n+  __extendxftf2\n+  __fabstf2\n+  __fixtfdi\n+  __fixtfsi\n+  __fixtfti\n+  __fixunstfdi\n+  __fixunstfsi\n+  __fixunstfti\n+  __floatditf\n+  __floatsitf\n+  __floattitf\n+  __floatunditf\n+  __floatunsitf\n+  __floatuntitf\n+  __getf2\n+  __gttf2\n+  __letf2\n+  __lttf2\n+  __multc3\n+  __multf3\n+  __negtf2\n+  __netf2\n+  __powitf2\n+  __subtf3\n+  __trunctfdf2\n+  __trunctfsf2\n+  __trunctfxf2\n+  __unordtf2\n+}"}, {"sha": "883b1a92acc731d8790ec89b6395c8121720e168", "filename": "libgcc/config/i386/t-sol2", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig%2Fi386%2Ft-sol2", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f128db92ae25bb3499b98834e21e5b66121f0264/libgcc%2Fconfig%2Fi386%2Ft-sol2", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fi386%2Ft-sol2?ref=f128db92ae25bb3499b98834e21e5b66121f0264", "patch": "@@ -32,3 +32,6 @@ $(T)crtn.o: $(gcc_srcdir)/config/i386/sol2-cn.asm $(GCC_PASSES)\n \n CRTSTUFF_T_CFLAGS = -fPIC -O2\n TARGET_LIBGCC2_CFLAGS = -fPIC\n+\n+# Add support for the introduction of 128-bit long double.\n+SHLIB_MAPFILES += $(srcdir)/config/i386/libgcc-sol2.ver"}]}