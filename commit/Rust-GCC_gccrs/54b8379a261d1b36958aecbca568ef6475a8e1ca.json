{"sha": "54b8379a261d1b36958aecbca568ef6475a8e1ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRiODM3OWEyNjFkMWIzNjk1OGFlY2JjYTU2OGVmNjQ3NWE4ZTFjYQ==", "commit": {"author": {"name": "Andrey Belevantsev", "email": "abel@ispras.ru", "date": "2013-04-30T10:55:52Z"}, "committer": {"name": "Andrey Belevantsev", "email": "abel@gcc.gnu.org", "date": "2013-04-30T10:55:52Z"}, "message": "re PR rtl-optimization/56957 (ICE in add_insn_after, at emit-rtl.c:3783)\n\n        PR rtl-optimization/56957\n        PR rtl-optimization/57105\n\n        * sel-sched.c (move_op_orig_expr_found): Remove insn_emitted\n        variable.  Use just INSN_UID for determining whether an insn\n        should be only disconnected from the insn stream.\n        * sel-sched-ir.h (EXPR_WAS_CHANGED): Remove.\n\n\t* gcc.dg/pr57105.c: New test.\n\nFrom-SVN: r198449", "tree": {"sha": "3d9c0e789beb68074f0dcebb9a4ca3f6bc4ca676", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d9c0e789beb68074f0dcebb9a4ca3f6bc4ca676"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54b8379a261d1b36958aecbca568ef6475a8e1ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54b8379a261d1b36958aecbca568ef6475a8e1ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54b8379a261d1b36958aecbca568ef6475a8e1ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54b8379a261d1b36958aecbca568ef6475a8e1ca/comments", "author": {"login": "abonzo", "id": 20396542, "node_id": "MDQ6VXNlcjIwMzk2NTQy", "avatar_url": "https://avatars.githubusercontent.com/u/20396542?v=4", "gravatar_id": "", "url": "https://api.github.com/users/abonzo", "html_url": "https://github.com/abonzo", "followers_url": "https://api.github.com/users/abonzo/followers", "following_url": "https://api.github.com/users/abonzo/following{/other_user}", "gists_url": "https://api.github.com/users/abonzo/gists{/gist_id}", "starred_url": "https://api.github.com/users/abonzo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/abonzo/subscriptions", "organizations_url": "https://api.github.com/users/abonzo/orgs", "repos_url": "https://api.github.com/users/abonzo/repos", "events_url": "https://api.github.com/users/abonzo/events{/privacy}", "received_events_url": "https://api.github.com/users/abonzo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "abc27962b81152a9c68108b2e11e8a90129a46e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/abc27962b81152a9c68108b2e11e8a90129a46e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/abc27962b81152a9c68108b2e11e8a90129a46e9"}], "stats": {"total": 42, "additions": 36, "deletions": 6}, "files": [{"sha": "cde1dec35785adca80d0fadaa9abda79dcb32816", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=54b8379a261d1b36958aecbca568ef6475a8e1ca", "patch": "@@ -1,3 +1,13 @@\n+2013-04-30  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/56957\n+\tPR rtl-optimization/57105\n+\n+\t* sel-sched.c (move_op_orig_expr_found): Remove insn_emitted\n+\tvariable.  Use just INSN_UID for determining whether an insn\n+\tshould be only disconnected from the insn stream.\n+\t* sel-sched-ir.h (EXPR_WAS_CHANGED): Remove.\n+\n 2013-04-30  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/57104"}, {"sha": "486159dd262f98213829afb479af699d6867e0e4", "filename": "gcc/sel-sched-ir.h", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Fsel-sched-ir.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Fsel-sched-ir.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched-ir.h?ref=54b8379a261d1b36958aecbca568ef6475a8e1ca", "patch": "@@ -191,8 +191,6 @@ typedef expr_def *expr_t;\n #define EXPR_WAS_RENAMED(EXPR) ((EXPR)->was_renamed)\n #define EXPR_CANT_MOVE(EXPR) ((EXPR)->cant_move)\n \n-#define EXPR_WAS_CHANGED(EXPR) (EXPR_HISTORY_OF_CHANGES (EXPR).length () > 0)\n-\n /* Insn definition for list of original insns in find_used_regs.  */\n struct _def\n {"}, {"sha": "fb9386f969000cfbe7fd10919c34d39d6b44a492", "filename": "gcc/sel-sched.c", "status": "modified", "additions": 3, "deletions": 4, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Fsel-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Fsel-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsel-sched.c?ref=54b8379a261d1b36958aecbca568ef6475a8e1ca", "patch": "@@ -6051,14 +6051,13 @@ move_op_orig_expr_found (insn_t insn, expr_t expr,\n                          cmpd_local_params_p lparams ATTRIBUTE_UNUSED,\n                          void *static_params)\n {\n-  bool only_disconnect, insn_emitted;\n+  bool only_disconnect;\n   moveop_static_params_p params = (moveop_static_params_p) static_params;\n \n   copy_expr_onside (params->c_expr, INSN_EXPR (insn));\n   track_scheduled_insns_and_blocks (insn);\n-  insn_emitted = handle_emitting_transformations (insn, expr, params);\n-  only_disconnect = (params->uid == INSN_UID (insn)\n-                     && ! insn_emitted  && ! EXPR_WAS_CHANGED (expr));\n+  handle_emitting_transformations (insn, expr, params);\n+  only_disconnect = params->uid == INSN_UID (insn);\n \n   /* Mark that we've disconnected an insn.  */\n   if (only_disconnect)"}, {"sha": "00576eec6a32bc43348fbcfab814ef591e17e35d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=54b8379a261d1b36958aecbca568ef6475a8e1ca", "patch": "@@ -1,3 +1,8 @@\n+2013-04-30  Andrey Belevantsev  <abel@ispras.ru>\n+\n+\tPR rtl-optimization/57105\n+\t* gcc.dg/pr57105.c: New test.\n+\n 2013-04-30  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/57104"}, {"sha": "a968f52375e8fc5023dce144738f9923a932475c", "filename": "gcc/testsuite/gcc.dg/pr57105.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Ftestsuite%2Fgcc.dg%2Fpr57105.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54b8379a261d1b36958aecbca568ef6475a8e1ca/gcc%2Ftestsuite%2Fgcc.dg%2Fpr57105.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr57105.c?ref=54b8379a261d1b36958aecbca568ef6475a8e1ca", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile { target powerpc*-*-* ia64-*-* i?86-*-* x86_64-*-* } } */\n+/* { dg-options \"-Os -fselective-scheduling2 -g\" } */\n+int bar (int);\n+int *baz (int *);\n+\n+void\n+foo (int a)\n+{\n+  while (bar (0))\n+    {\n+      int *c = baz (0);\n+      if (a)\n+\t{\n+\t  int i = *baz (c);\n+\t}\n+      bar (*baz (c));\n+    }\n+}"}]}