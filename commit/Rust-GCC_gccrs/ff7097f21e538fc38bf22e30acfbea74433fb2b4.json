{"sha": "ff7097f21e538fc38bf22e30acfbea74433fb2b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmY3MDk3ZjIxZTUzOGZjMzhiZjIyZTMwYWNmYmVhNzQ0MzNmYjJiNA==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-07-14T21:44:46Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2015-07-14T21:44:46Z"}, "message": "simplify.c (gfc_simplify_floor): Set precision of temporary to that of arg.\n\n2015-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\t* simplify.c (gfc_simplify_floor): Set precision of temporary to\n\tthat of arg.\n\n2015-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tgfortran.dg/pr66864.f90: New test.\n\nFrom-SVN: r225790", "tree": {"sha": "be0c833ab43339dfe5bcb5d62d90379dd934ef43", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/be0c833ab43339dfe5bcb5d62d90379dd934ef43"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ff7097f21e538fc38bf22e30acfbea74433fb2b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff7097f21e538fc38bf22e30acfbea74433fb2b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff7097f21e538fc38bf22e30acfbea74433fb2b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff7097f21e538fc38bf22e30acfbea74433fb2b4/comments", "author": null, "committer": null, "parents": [{"sha": "6e5ad0f92c3e5b4f8c3fcf5a67265874beda1040", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e5ad0f92c3e5b4f8c3fcf5a67265874beda1040", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e5ad0f92c3e5b4f8c3fcf5a67265874beda1040"}], "stats": {"total": 29, "additions": 26, "deletions": 3}, "files": [{"sha": "b13f67f75fb8ef9a1fd42147a6ad63b3983afa10", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=ff7097f21e538fc38bf22e30acfbea74433fb2b4", "patch": "@@ -1,3 +1,8 @@\n+2015-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\t* simplify.c (gfc_simplify_floor): Set precision of temporary to\n+\tthat of arg.\n+\n 2015-07-13  Andre Vehreschild  <vehre@gcc.gnu.org>\n \n \tPR fortran/64589"}, {"sha": "3fb98873709b284e4c332e95e4c3d9071b497c91", "filename": "gcc/fortran/simplify.c", "status": "modified", "additions": 1, "deletions": 3, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ffortran%2Fsimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ffortran%2Fsimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsimplify.c?ref=ff7097f21e538fc38bf22e30acfbea74433fb2b4", "patch": "@@ -2351,9 +2351,7 @@ gfc_simplify_floor (gfc_expr *e, gfc_expr *k)\n   if (e->expr_type != EXPR_CONSTANT)\n     return NULL;\n \n-  gfc_set_model_kind (kind);\n-\n-  mpfr_init (floor);\n+  mpfr_init2 (floor, mpfr_get_prec (e->value.real));\n   mpfr_floor (floor, e->value.real);\n \n   result = gfc_get_constant_expr (BT_INTEGER, kind, &e->where);"}, {"sha": "801e46285a91795ded888e255fc80c0a3a99ed4b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=ff7097f21e538fc38bf22e30acfbea74433fb2b4", "patch": "@@ -1,3 +1,7 @@\n+2015-07-14  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tgfortran.dg/pr66864.f90: New test.\n+\n 2015-07-14  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/66626"}, {"sha": "ebea99b389254ce167fedea2303564be2105c559", "filename": "gcc/testsuite/gfortran.dg/pr66864.f90", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr66864.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ff7097f21e538fc38bf22e30acfbea74433fb2b4/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr66864.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr66864.f90?ref=ff7097f21e538fc38bf22e30acfbea74433fb2b4", "patch": "@@ -0,0 +1,16 @@\n+! { dg-do run }\n+! PR fortran/66864\n+!\n+program t\n+   implicit none\n+   real(8) x\n+   x = 2.0d0**26.5d0\n+   if (floor(x) /= 94906265) call abort\n+   if (floor(2.0d0**26.5d0)/= 94906265) call abort\n+   x = 777666555.6d0\n+   if (floor(x) /= 777666555) call abort\n+   if (floor(777666555.6d0) /= 777666555) call abort\n+   x = 2000111222.6d0\n+   if (floor(x) /= 2000111222) call abort\n+   if (floor(2000111222.6d0) /= 2000111222) call abort\n+end program t"}]}