{"sha": "17939c986e43ba302f9dd4adb7c6740902083ab3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTc5MzljOTg2ZTQzYmEzMDJmOWRkNGFkYjdjNjc0MDkwMjA4M2FiMw==", "commit": {"author": {"name": "Steve Ellcey", "email": "sje@cup.hp.com", "date": "2007-03-21T16:02:32Z"}, "committer": {"name": "Steve Ellcey", "email": "sje@gcc.gnu.org", "date": "2007-03-21T16:02:32Z"}, "message": "explow.c (convert_memory_address): Fold memory reference when POINTERS_EXTEND_UNSIGNED < 0\n\n\t* explow.c (convert_memory_address): Fold memory reference when\n\tPOINTERS_EXTEND_UNSIGNED < 0\n\nFrom-SVN: r123113", "tree": {"sha": "378aaf734885e7053c836665f0819e960fc4e4ab", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/378aaf734885e7053c836665f0819e960fc4e4ab"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/17939c986e43ba302f9dd4adb7c6740902083ab3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17939c986e43ba302f9dd4adb7c6740902083ab3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/17939c986e43ba302f9dd4adb7c6740902083ab3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/17939c986e43ba302f9dd4adb7c6740902083ab3/comments", "author": null, "committer": null, "parents": [{"sha": "b5cf27d7ec42156b78369cc0bdaabc34d1885191", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b5cf27d7ec42156b78369cc0bdaabc34d1885191", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b5cf27d7ec42156b78369cc0bdaabc34d1885191"}], "stats": {"total": 14, "additions": 11, "deletions": 3}, "files": [{"sha": "c6f76cca7b81c66c9ecc10d8a83e811e81a9564d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17939c986e43ba302f9dd4adb7c6740902083ab3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17939c986e43ba302f9dd4adb7c6740902083ab3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=17939c986e43ba302f9dd4adb7c6740902083ab3", "patch": "@@ -1,3 +1,8 @@\n+2007-02-21  Steve Ellcey  <sje@cup.hp.com>\n+\n+\t* explow.c (convert_memory_address): Fold memory reference when\n+\tPOINTERS_EXTEND_UNSIGNED < 0\n+\n 2007-03-21  Richard Henderson  <rth@redhat.com>\n \n \tPR target/31245"}, {"sha": "b2d4f52969bf48be9cc2fbc3687337e6dfcbdee6", "filename": "gcc/explow.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/17939c986e43ba302f9dd4adb7c6740902083ab3/gcc%2Fexplow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/17939c986e43ba302f9dd4adb7c6740902083ab3/gcc%2Fexplow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexplow.c?ref=17939c986e43ba302f9dd4adb7c6740902083ab3", "patch": "@@ -382,12 +382,15 @@ convert_memory_address (enum machine_mode to_mode ATTRIBUTE_UNUSED,\n     case MULT:\n       /* For addition we can safely permute the conversion and addition\n \t operation if one operand is a constant and converting the constant\n-\t does not change it.  We can always safely permute them if we are\n-\t making the address narrower.  */\n+\t does not change it or if one operand is a constant and we are\n+\t using a ptr_extend instruction  (POINTERS_EXTEND_UNSIGNED < 0).\n+\t We can always safely permute them if we are making the address\n+\t narrower.  */\n       if (GET_MODE_SIZE (to_mode) < GET_MODE_SIZE (from_mode)\n \t  || (GET_CODE (x) == PLUS\n \t      && GET_CODE (XEXP (x, 1)) == CONST_INT\n-\t      && XEXP (x, 1) == convert_memory_address (to_mode, XEXP (x, 1))))\n+\t      && (XEXP (x, 1) == convert_memory_address (to_mode, XEXP (x, 1))\n+                 || POINTERS_EXTEND_UNSIGNED < 0)))\n \treturn gen_rtx_fmt_ee (GET_CODE (x), to_mode,\n \t\t\t       convert_memory_address (to_mode, XEXP (x, 0)),\n \t\t\t       XEXP (x, 1));"}]}