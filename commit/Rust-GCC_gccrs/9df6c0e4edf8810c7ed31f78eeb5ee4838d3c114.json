{"sha": "9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWRmNmMwZTRlZGY4ODEwYzdlZDMxZjc4ZWViNWVlNDgzOGQzYzExNA==", "commit": {"author": {"name": "Julian Brown", "email": "jules@gcc.gnu.org", "date": "2018-12-04T12:35:06Z"}, "committer": {"name": "Julian Brown", "email": "jules@gcc.gnu.org", "date": "2018-12-04T12:35:06Z"}, "message": "OpenACC wait list diagnostic change\n\n2018-12-04  James Norris  <jnorris@codesourcery.com>\n\t    Cesar Philippidis  <cesar@codesourcery.com>\n\t    Julian Brown  <julian@codesourcery.com>\n\n\tgcc/c/\n\t* c-parser.c (c_parser_oacc_wait_list): Remove dead diagnostic\n\tcode.\n\n\tgcc/cp/\n\t* parser.c (cp_parser_oacc_wait_list): Fix error message and avoid\n\tduplicate diagnostic.\n\n\tgcc/testsuite/\n\t* c-c++-common/goacc/asyncwait-1: Update expected errors and add a\n\ttest for \"wait (\".\n\nReviewed-by: Thomas Schwinge  <thomas@codesourcery.com>\nReviewed-by: Joseph Myers  <joseph@codesourcery.com>\n\nFrom-SVN: r266774", "tree": {"sha": "a2b615915d7dede9b8326229a4fd7631de438973", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a2b615915d7dede9b8326229a4fd7631de438973"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/comments", "author": null, "committer": null, "parents": [{"sha": "f0e98f1bb47ab5827d89bd6a16f4263e20549da3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f0e98f1bb47ab5827d89bd6a16f4263e20549da3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f0e98f1bb47ab5827d89bd6a16f4263e20549da3"}], "stats": {"total": 39, "additions": 27, "deletions": 12}, "files": [{"sha": "6f0f67cc190128ec522efde9fcc9d58e368ba81b", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "patch": "@@ -1,3 +1,10 @@\n+2018-12-04  James Norris  <jnorris@codesourcery.com>\n+\t    Cesar Philippidis  <cesar@codesourcery.com>\n+\t    Julian Brown  <julian@codesourcery.com>\n+\n+\t* c-parser.c (c_parser_oacc_wait_list): Remove dead diagnostic\n+\tcode.\n+\n 2018-11-30  Richard Biener  <rguenther@suse.de>\n \n \t* gimple-parser.c (c_parser_gimple_postfix_expression): Parse"}, {"sha": "0d7fcc0f7228535978993d29d439f034478d325b", "filename": "gcc/c/c-parser.c", "status": "modified", "additions": 0, "deletions": 8, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-parser.c?ref=9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "patch": "@@ -11801,14 +11801,6 @@ c_parser_oacc_wait_list (c_parser *parser, location_t clause_loc, tree list)\n     return list;\n \n   args = c_parser_expr_list (parser, false, true, NULL, NULL, NULL, NULL);\n-\n-  if (args->length () == 0)\n-    {\n-      c_parser_error (parser, \"expected integer expression before ')'\");\n-      release_tree_vector (args);\n-      return list;\n-    }\n-\n   args_tree = build_tree_list_vec (args);\n \n   for (t = args_tree; t; t = TREE_CHAIN (t))"}, {"sha": "866fd33e6bd009af64a606681762a9a719bb1705", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "patch": "@@ -1,3 +1,8 @@\n+2018-12-04  Julian Brown  <julian@codesourcery.com>\n+\n+\t* parser.c (cp_parser_oacc_wait_list): Fix error message and avoid\n+\tduplicate diagnostic.\n+\n 2018-12-04  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/88103"}, {"sha": "ac19cb4b9bb51bda0db332f7a16d6631e7b19589", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "patch": "@@ -32605,9 +32605,11 @@ cp_parser_oacc_wait_list (cp_parser *parser, location_t clause_loc, tree list)\n \n   if (args == NULL || args->length () == 0)\n     {\n-      cp_parser_error (parser, \"expected integer expression before ')'\");\n       if (args != NULL)\n-\trelease_tree_vector (args);\n+\t{\n+\t  cp_parser_error (parser, \"expected integer expression list\");\n+\t  release_tree_vector (args);\n+\t}\n       return list;\n     }\n "}, {"sha": "2c7e3a9b6708e2f2ac39e24f03c5250fc0316bca", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "patch": "@@ -1,3 +1,8 @@\n+2018-12-04  Julian Brown  <julian@codesourcery.com>\n+\n+\t* c-c++-common/goacc/asyncwait-1: Update expected errors and add a\n+\ttest for \"wait (\".\n+\n 2018-12-04  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR c++/88103"}, {"sha": "2f5d4762b494c4e652905442b2d1f23514e9581b", "filename": "gcc/testsuite/c-c++-common/goacc/asyncwait-1.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fgoacc%2Fasyncwait-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fgoacc%2Fasyncwait-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fc-c%2B%2B-common%2Fgoacc%2Fasyncwait-1.c?ref=9df6c0e4edf8810c7ed31f78eeb5ee4838d3c114", "patch": "@@ -116,7 +116,6 @@ f (int N, float *a, float *b)\n     }\n \n #pragma acc parallel copyin (a[0:N]) copy (b[0:N]) wait (1 /* { dg-error \"expected '\\\\\\)' before end of line\" } */\n-    /* { dg-error \"expected integer expression before '\\\\\\)'\" \"\" { target c++ } .-1 } */\n     {\n         for (ii = 0; ii < N; ii++)\n             b[ii] = a[ii];\n@@ -152,6 +151,12 @@ f (int N, float *a, float *b)\n             b[ii] = a[ii];\n     }\n \n+#pragma acc parallel copyin (a[0:N]) copy (b[0:N]) wait ( /* { dg-error \"expected (primary-|)expression before\" } */\n+    {\n+        for (ii = 0; ii < N; ii++)\n+            b[ii] = a[ii];\n+    }\n+\n #pragma acc parallel copyin (a[0:N]) copy (b[0:N]) wait\n     {\n         for (ii = 0; ii < N; ii++)\n@@ -171,7 +176,6 @@ f (int N, float *a, float *b)\n #pragma acc wait (1,2,,) /* { dg-error \"expected (primary-|)expression before\" } */\n \n #pragma acc wait (1 /* { dg-error \"expected '\\\\\\)' before end of line\" } */\n-    /* { dg-error \"expected integer expression before '\\\\\\)'\" \"\" { target c++ } .-1 } */\n \n #pragma acc wait (1,*) /* { dg-error \"expected (primary-|)expression before\" } */\n "}]}