{"sha": "5e9bda655cd622a17f1f1397a058847a9c6b38ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWU5YmRhNjU1Y2Q2MjJhMTdmMWYxMzk3YTA1ODg0N2E5YzZiMzhjYQ==", "commit": {"author": {"name": "Joseph Myers", "email": "jsm@polyomino.org.uk", "date": "2004-09-27T19:33:55Z"}, "committer": {"name": "Joseph Myers", "email": "jsm28@gcc.gnu.org", "date": "2004-09-27T19:33:55Z"}, "message": "re PR c/13804 (Error message enhancement Request)\n\n\tPR c/13804\n\t* c-typeck.c (build_component_ref): Name type involved in\n\tdiagnostic for structure or union without a member of the given\n\tname.\n\ntestsuite:\n\t* gcc.dg/pr13804-1.c: New test.\n\nFrom-SVN: r88195", "tree": {"sha": "bea232c1f5d8bde732375be9c7629cc2679c4b93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/bea232c1f5d8bde732375be9c7629cc2679c4b93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5e9bda655cd622a17f1f1397a058847a9c6b38ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e9bda655cd622a17f1f1397a058847a9c6b38ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5e9bda655cd622a17f1f1397a058847a9c6b38ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5e9bda655cd622a17f1f1397a058847a9c6b38ca/comments", "author": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jsm28", "id": 10537793, "node_id": "MDQ6VXNlcjEwNTM3Nzkz", "avatar_url": "https://avatars.githubusercontent.com/u/10537793?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jsm28", "html_url": "https://github.com/jsm28", "followers_url": "https://api.github.com/users/jsm28/followers", "following_url": "https://api.github.com/users/jsm28/following{/other_user}", "gists_url": "https://api.github.com/users/jsm28/gists{/gist_id}", "starred_url": "https://api.github.com/users/jsm28/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jsm28/subscriptions", "organizations_url": "https://api.github.com/users/jsm28/orgs", "repos_url": "https://api.github.com/users/jsm28/repos", "events_url": "https://api.github.com/users/jsm28/events{/privacy}", "received_events_url": "https://api.github.com/users/jsm28/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "43f51151e2983568f53c011bb19ca9999abfab0d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/43f51151e2983568f53c011bb19ca9999abfab0d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/43f51151e2983568f53c011bb19ca9999abfab0d"}], "stats": {"total": 43, "additions": 41, "deletions": 2}, "files": [{"sha": "8c0e62927b35d48956715efd0fec58bc5ff4f8b3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5e9bda655cd622a17f1f1397a058847a9c6b38ca", "patch": "@@ -1,3 +1,10 @@\n+2004-09-27  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\tPR c/13804\n+\t* c-typeck.c (build_component_ref): Name type involved in\n+\tdiagnostic for structure or union without a member of the given\n+\tname.\n+\n 2004-09-27  DJ Delorie  <dj@redhat.com>\n \n \t* config/stormy16/stormy16.c (xstormy16_asm_output_aligned_common):"}, {"sha": "d744296aa13da5efb7810285ed7c1626afc27a70", "filename": "gcc/c-typeck.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2Fc-typeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2Fc-typeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-typeck.c?ref=5e9bda655cd622a17f1f1397a058847a9c6b38ca", "patch": "@@ -1466,8 +1466,7 @@ build_component_ref (tree datum, tree component)\n \n       if (!field)\n \t{\n-\t  error (\"%s has no member named %qs\",\n-\t\t code == RECORD_TYPE ? \"structure\" : \"union\",\n+\t  error (\"%qT has no member named %qs\", type,\n \t\t IDENTIFIER_POINTER (component));\n \t  return error_mark_node;\n \t}"}, {"sha": "eb4165c93b3e3dd976f596ccdf86380214740709", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5e9bda655cd622a17f1f1397a058847a9c6b38ca", "patch": "@@ -1,3 +1,8 @@\n+2004-09-27  Joseph S. Myers  <jsm@polyomino.org.uk>\n+\n+\tPR c/13804\n+\t* gcc.dg/pr13804-1.c: New test.\n+\n 2004-09-27  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/16938"}, {"sha": "2dbd731fd692d2dc1bb366bb394eb20c111b9ec2", "filename": "gcc/testsuite/gcc.dg/pr13804-1.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2Ftestsuite%2Fgcc.dg%2Fpr13804-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5e9bda655cd622a17f1f1397a058847a9c6b38ca/gcc%2Ftestsuite%2Fgcc.dg%2Fpr13804-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr13804-1.c?ref=5e9bda655cd622a17f1f1397a058847a9c6b38ca", "patch": "@@ -0,0 +1,28 @@\n+/* Diagnostics for attempts to access a member not in a structure or\n+   union should name the type involved.  Bug 13804.  */\n+/* Origin: Joseph Myers <jsm@polyomino.org.uk> */\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+\n+struct s0 { int a; };\n+union u0 { long b; };\n+typedef struct s0 S0;\n+typedef union u0 U0;\n+\n+struct s0 x0;\n+S0 x1;\n+union u0 x2;\n+U0 x3;\n+struct s0 *x4;\n+union u0 *x5;\n+\n+void\n+f (void)\n+{\n+  x0.c; /* { dg-error \"error: 'struct s0' has no member named 'c'\" } */\n+  x1.c; /* { dg-error \"error: 'S0' has no member named 'c'\" } */\n+  x2.c; /* { dg-error \"error: 'union u0' has no member named 'c'\" } */\n+  x3.c; /* { dg-error \"error: 'U0' has no member named 'c'\" } */\n+  x4->c; /* { dg-error \"error: 'struct s0' has no member named 'c'\" } */\n+  x5->c; /* { dg-error \"error: 'union u0' has no member named 'c'\" } */\n+}"}]}