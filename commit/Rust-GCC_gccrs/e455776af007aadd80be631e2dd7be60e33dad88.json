{"sha": "e455776af007aadd80be631e2dd7be60e33dad88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTQ1NTc3NmFmMDA3YWFkZDgwYmU2MzFlMmRkN2JlNjBlMzNkYWQ4OA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2009-05-27T23:12:21Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2009-05-27T23:12:21Z"}, "message": "unwind-dw2.c (_Unwind_DebugHook): New function.\n\n\t* unwind-dw2.c (_Unwind_DebugHook): New function.\n\t(uw_install_context): Call _Unwind_DebugHook.\n\nFrom-SVN: r147934", "tree": {"sha": "b1e619202a5c9ef24a5dd472f74194ce7272723a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b1e619202a5c9ef24a5dd472f74194ce7272723a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e455776af007aadd80be631e2dd7be60e33dad88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e455776af007aadd80be631e2dd7be60e33dad88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e455776af007aadd80be631e2dd7be60e33dad88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e455776af007aadd80be631e2dd7be60e33dad88/comments", "author": null, "committer": null, "parents": [{"sha": "c5adc4275c2a4e0f6529b9985da0bdb043af151e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c5adc4275c2a4e0f6529b9985da0bdb043af151e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c5adc4275c2a4e0f6529b9985da0bdb043af151e"}], "stats": {"total": 32, "additions": 25, "deletions": 7}, "files": [{"sha": "6920b5a11ceba880e1661266e5a867fcf5bb9273", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e455776af007aadd80be631e2dd7be60e33dad88/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e455776af007aadd80be631e2dd7be60e33dad88/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e455776af007aadd80be631e2dd7be60e33dad88", "patch": "@@ -1,3 +1,8 @@\n+2009-05-27  Tom Tromey  <tromey@redhat.com>\n+\n+\t* unwind-dw2.c (_Unwind_DebugHook): New function.\n+\t(uw_install_context): Call _Unwind_DebugHook.\n+\n 2009-05-27  Tom Tromey  <tromey@redhat.com>\n \n \t* system.h (CONST_CAST2): Use C++ const_cast when compiled as C++"}, {"sha": "68a1a282b3496c0edfe523d9f623309cd29c814d", "filename": "gcc/unwind-dw2.c", "status": "modified", "additions": 20, "deletions": 7, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e455776af007aadd80be631e2dd7be60e33dad88/gcc%2Funwind-dw2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e455776af007aadd80be631e2dd7be60e33dad88/gcc%2Funwind-dw2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Funwind-dw2.c?ref=e455776af007aadd80be631e2dd7be60e33dad88", "patch": "@@ -1473,18 +1473,31 @@ uw_init_context_1 (struct _Unwind_Context *context,\n   context->ra = __builtin_extract_return_addr (outer_ra);\n }\n \n+static void _Unwind_DebugHook (void *, void *) __attribute__ ((__noinline__));\n+\n+/* This function is called during unwinding.  It is intended as a hook\n+   for a debugger to intercept exceptions.  CFA is the CFA of the\n+   target frame.  HANDLER is the PC to which control will be\n+   transferred.  */\n+static void\n+_Unwind_DebugHook (void *cfa __attribute__ ((__unused__)),\n+\t\t   void *handler __attribute__ ((__unused__)))\n+{\n+  asm (\"\");\n+}\n \n /* Install TARGET into CURRENT so that we can return to it.  This is a\n    macro because __builtin_eh_return must be invoked in the context of\n    our caller.  */\n \n-#define uw_install_context(CURRENT, TARGET)\t\t\t\t \\\n-  do\t\t\t\t\t\t\t\t\t \\\n-    {\t\t\t\t\t\t\t\t\t \\\n-      long offset = uw_install_context_1 ((CURRENT), (TARGET));\t\t \\\n-      void *handler = __builtin_frob_return_addr ((TARGET)->ra);\t \\\n-      __builtin_eh_return (offset, handler);\t\t\t\t \\\n-    }\t\t\t\t\t\t\t\t\t \\\n+#define uw_install_context(CURRENT, TARGET)\t\t\t\t\\\n+  do\t\t\t\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      long offset = uw_install_context_1 ((CURRENT), (TARGET));\t\t\\\n+      void *handler = __builtin_frob_return_addr ((TARGET)->ra);\t\\\n+      _Unwind_DebugHook ((TARGET)->cfa, handler);\t\t\t\\\n+      __builtin_eh_return (offset, handler);\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n   while (0)\n \n static long"}]}