{"sha": "811c7fbd147991645e6116897f07d8a406b864e6", "node_id": "C_kwDOANBUbNoAKDgxMWM3ZmJkMTQ3OTkxNjQ1ZTYxMTY4OTdmMDdkOGE0MDZiODY0ZTY", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-04-21T08:17:34Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2022-04-21T08:18:15Z"}, "message": "Support --compress-debug-sections for ld.mold.\n\ngcc/ChangeLog:\n\n\t* configure.ac: Enable compressed debug sections for mold\n\tlinker.\n\t* configure: Regenerate.", "tree": {"sha": "1457cfb4bc16f19e13688a526c9d182427223c55", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1457cfb4bc16f19e13688a526c9d182427223c55"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/811c7fbd147991645e6116897f07d8a406b864e6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/811c7fbd147991645e6116897f07d8a406b864e6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/811c7fbd147991645e6116897f07d8a406b864e6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/811c7fbd147991645e6116897f07d8a406b864e6/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "504b02c70abcc31e0e9b56e69f82f85b5261bca9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/504b02c70abcc31e0e9b56e69f82f85b5261bca9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/504b02c70abcc31e0e9b56e69f82f85b5261bca9"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "5ce0557719a9fe0acf9a0f0ffaf949e9eeba0eb1", "filename": "gcc/configure", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811c7fbd147991645e6116897f07d8a406b864e6/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811c7fbd147991645e6116897f07d8a406b864e6/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=811c7fbd147991645e6116897f07d8a406b864e6", "patch": "@@ -30623,7 +30623,10 @@ $as_echo_n \"checking linker for compressed debug sections... \" >&6; }\n # In binutils 2.26, gld gained support for the ELF gABI format.\n if test $in_tree_ld = yes ; then\n   gcc_cv_ld_compress_debug=0\n-  if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 19 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n+  if test $ld_is_mold = yes; then\n+    gcc_cv_ld_compress_debug=3\n+    gcc_cv_ld_compress_debug_option=\"--compress-debug-sections\"\n+  elif test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 19 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n      && test $in_tree_ld_is_elf = yes && test $ld_is_gold = yes; then\n     gcc_cv_ld_compress_debug=2\n     gcc_cv_ld_compress_debug_option=\"--compress-debug-sections\"\n@@ -30636,7 +30639,10 @@ if test $in_tree_ld = yes ; then\n     gcc_cv_ld_compress_debug=1\n   fi\n elif echo \"$ld_ver\" | grep GNU > /dev/null; then\n-  if test \"$ld_vers_major\" -lt 2 \\\n+  if test $ld_is_mold = yes; then\n+    gcc_cv_ld_compress_debug=3\n+    gcc_cv_ld_compress_debug_option=\"--compress-debug-sections\"\n+  elif test \"$ld_vers_major\" -lt 2 \\\n      || test \"$ld_vers_major\" -eq 2 -a \"$ld_vers_minor\" -lt 21; then\n     gcc_cv_ld_compress_debug=0\n   elif test \"$ld_vers_major\" -eq 2 -a \"$ld_vers_minor\" -lt 26; then"}, {"sha": "23bee7010a37baf52ae697b26dafa965f1fb0285", "filename": "gcc/configure.ac", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/811c7fbd147991645e6116897f07d8a406b864e6/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/811c7fbd147991645e6116897f07d8a406b864e6/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=811c7fbd147991645e6116897f07d8a406b864e6", "patch": "@@ -6264,7 +6264,10 @@ AC_MSG_CHECKING(linker for compressed debug sections)\n # In binutils 2.26, gld gained support for the ELF gABI format.\n if test $in_tree_ld = yes ; then\n   gcc_cv_ld_compress_debug=0\n-  if test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 19 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n+  if test $ld_is_mold = yes; then\n+    gcc_cv_ld_compress_debug=3\n+    gcc_cv_ld_compress_debug_option=\"--compress-debug-sections\"\n+  elif test \"$gcc_cv_gld_major_version\" -eq 2 -a \"$gcc_cv_gld_minor_version\" -ge 19 -o \"$gcc_cv_gld_major_version\" -gt 2 \\\n      && test $in_tree_ld_is_elf = yes && test $ld_is_gold = yes; then\n     gcc_cv_ld_compress_debug=2\n     gcc_cv_ld_compress_debug_option=\"--compress-debug-sections\"\n@@ -6277,7 +6280,10 @@ if test $in_tree_ld = yes ; then\n     gcc_cv_ld_compress_debug=1\n   fi\n elif echo \"$ld_ver\" | grep GNU > /dev/null; then\n-  if test \"$ld_vers_major\" -lt 2 \\\n+  if test $ld_is_mold = yes; then\n+    gcc_cv_ld_compress_debug=3\n+    gcc_cv_ld_compress_debug_option=\"--compress-debug-sections\"\n+  elif test \"$ld_vers_major\" -lt 2 \\\n      || test \"$ld_vers_major\" -eq 2 -a \"$ld_vers_minor\" -lt 21; then\n     gcc_cv_ld_compress_debug=0\n   elif test \"$ld_vers_major\" -eq 2 -a \"$ld_vers_minor\" -lt 26; then"}]}