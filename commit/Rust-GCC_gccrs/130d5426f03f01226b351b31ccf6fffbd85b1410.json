{"sha": "130d5426f03f01226b351b31ccf6fffbd85b1410", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTMwZDU0MjZmMDNmMDEyMjZiMzUxYjMxY2NmNmZmZmJkODViMTQxMA==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@specifixinc.com", "date": "2004-09-02T01:04:22Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2004-09-02T01:04:22Z"}, "message": "Make -fdata-sections work for AVR port.\n\nPR target/14064\n* config/avr/avr.c (avr_unique_section): Delete prototype and\ndefinition.\n(TARGET_ASM_UNIQUE_SECTION): Delete.\n\nFrom-SVN: r86951", "tree": {"sha": "866afeb63f0ca9af344fd08604df26b6fc92be42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/866afeb63f0ca9af344fd08604df26b6fc92be42"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/130d5426f03f01226b351b31ccf6fffbd85b1410", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/130d5426f03f01226b351b31ccf6fffbd85b1410", "html_url": "https://github.com/Rust-GCC/gccrs/commit/130d5426f03f01226b351b31ccf6fffbd85b1410", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/130d5426f03f01226b351b31ccf6fffbd85b1410/comments", "author": null, "committer": null, "parents": [{"sha": "57a6af27ed66c67241c101ba79b3f3b0c44a4867", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57a6af27ed66c67241c101ba79b3f3b0c44a4867", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57a6af27ed66c67241c101ba79b3f3b0c44a4867"}], "stats": {"total": 42, "additions": 7, "deletions": 35}, "files": [{"sha": "5d1334aa942c3d8b9d17745de50aded4436ebb04", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130d5426f03f01226b351b31ccf6fffbd85b1410/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130d5426f03f01226b351b31ccf6fffbd85b1410/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=130d5426f03f01226b351b31ccf6fffbd85b1410", "patch": "@@ -1,3 +1,10 @@\n+2004-09-01  James E Wilson  <wilson@specifixinc.com>\n+\n+\tPR target/14064\n+\t* config/avr/avr.c (avr_unique_section): Delete prototype and\n+\tdefinition.\n+\t(TARGET_ASM_UNIQUE_SECTION): Delete.\n+\n 2004-09-01  Ziemowit Laski  <zlaski@apple.com>\n \n \t* c-parse.in (primary): Call objc_build_message_expr(),"}, {"sha": "d080b8d1840a124b221f117f58a1960506d1fb82", "filename": "gcc/config/avr/avr.c", "status": "modified", "additions": 0, "deletions": 35, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/130d5426f03f01226b351b31ccf6fffbd85b1410/gcc%2Fconfig%2Favr%2Favr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/130d5426f03f01226b351b31ccf6fffbd85b1410/gcc%2Fconfig%2Favr%2Favr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Favr%2Favr.c?ref=130d5426f03f01226b351b31ccf6fffbd85b1410", "patch": "@@ -68,7 +68,6 @@ static void avr_file_start (void);\n static void avr_file_end (void);\n static void avr_output_function_prologue (FILE *, HOST_WIDE_INT);\n static void avr_output_function_epilogue (FILE *, HOST_WIDE_INT);\n-static void avr_unique_section (tree, int);\n static void avr_insert_attributes (tree, tree *);\n static unsigned int avr_section_type_flags (tree, const char *, int);\n \n@@ -231,8 +230,6 @@ int avr_case_values_threshold = 30000;\n #define TARGET_ASM_FUNCTION_EPILOGUE avr_output_function_epilogue\n #undef TARGET_ATTRIBUTE_TABLE\n #define TARGET_ATTRIBUTE_TABLE avr_attribute_table\n-#undef TARGET_ASM_UNIQUE_SECTION\n-#define TARGET_ASM_UNIQUE_SECTION avr_unique_section\n #undef TARGET_ASM_FUNCTION_RODATA_SECTION\n #define TARGET_ASM_FUNCTION_RODATA_SECTION default_no_function_rodata_section\n #undef TARGET_INSERT_ATTRIBUTES\n@@ -4356,38 +4353,6 @@ avr_assemble_integer (rtx x, unsigned int size, int aligned_p)\n   return default_assemble_integer (x, size, aligned_p);\n }\n \n-/* Sets section name for declaration DECL.  */\n-  \n-static void\n-avr_unique_section (tree decl, int reloc ATTRIBUTE_UNUSED)\n-{\n-  int len;\n-  const char *name, *prefix;\n-  char *string;\n-\n-  name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (decl));\n-  name = (* targetm.strip_name_encoding) (name);\n-\n-  if (TREE_CODE (decl) == FUNCTION_DECL)\n-    {\n-      if (flag_function_sections)\n-\tprefix = \".text.\";\n-      else\n-\tprefix = \".text\";\n-    }\n-  else \n-    abort ();\n-\n-  if (flag_function_sections)\n-    {\n-      len = strlen (name) + strlen (prefix);\n-      string = alloca (len + 1);\n-      sprintf (string, \"%s%s\", prefix, name);\n-      DECL_SECTION_NAME (decl) = build_string (len, string);\n-    }\n-}\n-\n-\n /* The routine used to output NUL terminated strings.  We use a special\n    version of this for most svr4 targets because doing so makes the\n    generated assembly code more compact (and thus faster to assemble)"}]}