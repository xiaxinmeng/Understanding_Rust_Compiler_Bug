{"sha": "e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTk3YjYxYzI2ZTQ4NzBmNWI3NjFhOWRkNGNjM2NkYjJjMDA2MDlhOA==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael.morin@sfr.fr", "date": "2011-09-08T15:40:48Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-09-08T15:40:48Z"}, "message": "trans-array.c (gfc_trans_constant_array_constructor): Remove superfluous initialisation of DIM field.\n\n2011-09-08  Mikael Morin  <mikael.morin@sfr.fr>\n\n\t* trans-array.c (gfc_trans_constant_array_constructor): Remove\n\tsuperfluous initialisation of DIM field.\n\t(gfc_trans_array_constructor): Assert that DIMEN field is properly set.\n\t(gfc_conv_expr_descriptor): Ditto.\n\t* trans-expr.c (gfc_conv_procedure_call): Ditto.\n\nFrom-SVN: r178698", "tree": {"sha": "ac1ad46c35c2b8019de22bad8745d47ca800bdb0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ac1ad46c35c2b8019de22bad8745d47ca800bdb0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/comments", "author": null, "committer": null, "parents": [{"sha": "26f7753013e52c93c6d63bb678b1544da43a2384", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26f7753013e52c93c6d63bb678b1544da43a2384", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26f7753013e52c93c6d63bb678b1544da43a2384"}], "stats": {"total": 17, "additions": 12, "deletions": 5}, "files": [{"sha": "e3ae236b2cb1209167a5a998f838517403681b9c", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "patch": "@@ -1,3 +1,11 @@\n+2011-09-08  Mikael Morin  <mikael.morin@sfr.fr>\n+\n+\t* trans-array.c (gfc_trans_constant_array_constructor): Remove\n+\tsuperfluous initialisation of DIM field.\n+\t(gfc_trans_array_constructor): Assert that DIMEN field is properly set.\n+\t(gfc_conv_expr_descriptor): Ditto.\n+\t* trans-expr.c (gfc_conv_procedure_call): Ditto.\n+\n 2011-09-08  Mikael Morin  <mikael.morin@sfr.fr>\n \n \t* trans-array.h (gfc_get_scalar_ss): New prototype."}, {"sha": "37cdeb560ee7677997ee50c3d040f8f0636c5383", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "patch": "@@ -1882,7 +1882,6 @@ gfc_trans_constant_array_constructor (gfc_loopinfo * loop,\n       info->start[i] = gfc_index_zero_node;\n       info->end[i] = gfc_index_zero_node;\n       info->stride[i] = gfc_index_one_node;\n-      info->dim[i] = i;\n     }\n \n   if (info->dimen > loop->temp_dim)\n@@ -1961,7 +1960,7 @@ gfc_trans_array_constructor (gfc_loopinfo * loop, gfc_ss * ss, locus * where)\n       first_len = true;\n     }\n \n-  ss->data.info.dimen = loop->dimen;\n+  gcc_assert (ss->data.info.dimen == loop->dimen);\n \n   c = ss->expr->value.constructor;\n   if (ss->expr->ts.type == BT_CHARACTER)\n@@ -5915,7 +5914,7 @@ gfc_conv_expr_descriptor (gfc_se * se, gfc_expr * expr, gfc_ss * ss)\n \t\t\t\t      loop.dimen);\n \n       se->string_length = loop.temp_ss->string_length;\n-      loop.temp_ss->data.temp.dimen = loop.dimen;\n+      gcc_assert (loop.temp_ss->data.temp.dimen == loop.dimen);\n       loop.temp_ss->data.temp.codimen = loop.codimen;\n       gfc_add_ss_to_loop (&loop, loop.temp_ss);\n     }"}, {"sha": "131927ce2a67e762abb9c80c0e50599ff04b4986", "filename": "gcc/fortran/trans-expr.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/gcc%2Ffortran%2Ftrans-expr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8/gcc%2Ffortran%2Ftrans-expr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-expr.c?ref=e97b61c26e4870f5b761a9dd4cc3cdb2c00609a8", "patch": "@@ -3576,7 +3576,7 @@ gfc_conv_procedure_call (gfc_se * se, gfc_symbol * sym,\n \n \t  /* Set the type of the array.  */\n \t  tmp = gfc_typenode_for_spec (&comp->ts);\n-\t  info->dimen = se->loop->dimen;\n+\t  gcc_assert (info->dimen == se->loop->dimen);\n \n \t  /* Evaluate the bounds of the result, if known.  */\n \t  gfc_set_loop_bounds_from_array_spec (&mapping, se, comp->as);\n@@ -3611,7 +3611,7 @@ gfc_conv_procedure_call (gfc_se * se, gfc_symbol * sym,\n \n \t  /* Set the type of the array.  */\n \t  tmp = gfc_typenode_for_spec (&ts);\n-\t  info->dimen = se->loop->dimen;\n+\t  gcc_assert (info->dimen == se->loop->dimen);\n \n \t  /* Evaluate the bounds of the result, if known.  */\n \t  gfc_set_loop_bounds_from_array_spec (&mapping, se, sym->result->as);"}]}