{"sha": "6ac00218e10463af6597fb22e942601fd3751fad", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmFjMDAyMThlMTA0NjNhZjY1OTdmYjIyZTk0MjYwMWZkMzc1MWZhZA==", "commit": {"author": {"name": "Mark Wielaard", "email": "mjw@redhat.com", "date": "2011-05-03T19:36:08Z"}, "committer": {"name": "Mark Wielaard", "email": "mark@gcc.gnu.org", "date": "2011-05-03T19:36:08Z"}, "message": "PR42288 emit empty .debug_aranges section.\n\n* dwarf2out.c (dwarf2out_finish): Always call output_aranges ()\n  when info_section_emitted.\n\nFrom-SVN: r173340", "tree": {"sha": "c21d71f9c1619f6fa81526e26f8effb83e9e44c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c21d71f9c1619f6fa81526e26f8effb83e9e44c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ac00218e10463af6597fb22e942601fd3751fad", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ac00218e10463af6597fb22e942601fd3751fad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ac00218e10463af6597fb22e942601fd3751fad", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ac00218e10463af6597fb22e942601fd3751fad/comments", "author": null, "committer": null, "parents": [{"sha": "3af42a7bacf04933a6ce32a9b04ea4217f1cc392", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3af42a7bacf04933a6ce32a9b04ea4217f1cc392", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3af42a7bacf04933a6ce32a9b04ea4217f1cc392"}], "stats": {"total": 24, "additions": 13, "deletions": 11}, "files": [{"sha": "78b593f695cd6ce923eb20766caadb20f9008c09", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ac00218e10463af6597fb22e942601fd3751fad/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ac00218e10463af6597fb22e942601fd3751fad/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ac00218e10463af6597fb22e942601fd3751fad", "patch": "@@ -1,3 +1,9 @@\n+2011-04-26  Mark Wielaard  <mjw@redhat.com>\n+\n+\tPR42288\n+\t* dwarf2out.c (dwarf2out_finish): Always call output_aranges ()\n+\twhen info_section_emitted.\n+\n 2011-05-03  Joseph Myers  <joseph@codesourcery.com>\n \n \t* config/mips/mips-opts.h: New."}, {"sha": "f3620a41fea2d76a13efab3ed9b51ac990b2ca73", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 7, "deletions": 11, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ac00218e10463af6597fb22e942601fd3751fad/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ac00218e10463af6597fb22e942601fd3751fad/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=6ac00218e10463af6597fb22e942601fd3751fad", "patch": "@@ -24587,21 +24587,17 @@ dwarf2out_finish (const char *filename)\n \t}\n     }\n \n-  /* Output the address range information.  We only put functions in the\n-     arange table, so don't write it out if we don't have any.  */\n+  /* Output the address range information if a CU (.debug_info section)\n+     was emitted.  We output an empty table even if we had no functions\n+     to put in it.  This because the consumer has no way to tell the\n+     difference between an empty table that we omitted and failure to\n+     generate a table that would have contained data.  */\n   if (info_section_emitted)\n     {\n       unsigned long aranges_length = size_of_aranges ();\n \n-      /* Empty .debug_aranges would contain just header and\n-\t terminating 0,0.  */\n-      if (aranges_length\n-\t  != (unsigned long) (DWARF_ARANGES_HEADER_SIZE\n-\t\t\t      + 2 * DWARF2_ADDR_SIZE))\n-\t{\n-\t  switch_to_section (debug_aranges_section);\n-\t  output_aranges (aranges_length);\n-\t}\n+      switch_to_section (debug_aranges_section);\n+      output_aranges (aranges_length);\n     }\n \n   /* Output ranges section if necessary.  */"}]}