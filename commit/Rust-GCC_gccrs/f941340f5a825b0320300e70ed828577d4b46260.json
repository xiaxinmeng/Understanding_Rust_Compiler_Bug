{"sha": "f941340f5a825b0320300e70ed828577d4b46260", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Zjk0MTM0MGY1YTgyNWIwMzIwMzAwZTcwZWQ4Mjg1NzdkNGI0NjI2MA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-01-02T20:14:57Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2001-01-02T20:14:57Z"}, "message": "* typeck.c (build_binary_op): Fix pmf comparison logic.\n\nFrom-SVN: r38637", "tree": {"sha": "a69e9d8adf91a6ada2c79350abe09cb07288efcb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a69e9d8adf91a6ada2c79350abe09cb07288efcb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f941340f5a825b0320300e70ed828577d4b46260", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f941340f5a825b0320300e70ed828577d4b46260", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f941340f5a825b0320300e70ed828577d4b46260", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f941340f5a825b0320300e70ed828577d4b46260/comments", "author": null, "committer": null, "parents": [{"sha": "96d6c6107ae89e779b41cca083c7c453f690bcc1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/96d6c6107ae89e779b41cca083c7c453f690bcc1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/96d6c6107ae89e779b41cca083c7c453f690bcc1"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "cb9da305bf838bc72446095039dc305473c663e7", "filename": "gcc/testsuite/g++.old-deja/g++.other/pmf6.C", "status": "added", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f941340f5a825b0320300e70ed828577d4b46260/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fpmf6.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f941340f5a825b0320300e70ed828577d4b46260/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fpmf6.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fpmf6.C?ref=f941340f5a825b0320300e70ed828577d4b46260", "patch": "@@ -0,0 +1,26 @@\n+// Test that we only call f once and that pointers to different subobjects\n+// compare as different.\n+\n+struct A { void f() { } };\n+struct B: public A { };\n+struct C: public A { };\n+struct D : public B, public C { };\n+\n+typedef void (B::*bp)();\n+typedef void (C::*cp)();\n+typedef void (D::*dp)();\n+\n+dp d1;\n+\n+int call;\n+\n+dp f () { ++call; return d1; }\n+\n+int main()\n+{\n+  bp b = &A::f;\n+  cp c = &A::f;\n+  d1 = b;\n+  dp d2 = c;\n+  return (f() == d2 || call != 1);\n+}"}]}