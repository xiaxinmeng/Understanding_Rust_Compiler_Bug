{"sha": "08439bec5f7e05cf133b4e7497bccedbe1210c35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDg0MzliZWM1ZjdlMDVjZjEzM2I0ZTc0OTdiY2NlZGJlMTIxMGMzNQ==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@wolery.cumb.org", "date": "2000-01-16T17:53:02Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-01-16T17:53:02Z"}, "message": "i386.md: Add peephole to merge successive stack adjusts.\n\n\t* config/i386/i386.md: Add peephole to merge successive stack\n\tadjusts.\n\nFrom-SVN: r31443", "tree": {"sha": "124fb7970fc89356797acbecf335d2f905cf4595", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/124fb7970fc89356797acbecf335d2f905cf4595"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08439bec5f7e05cf133b4e7497bccedbe1210c35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08439bec5f7e05cf133b4e7497bccedbe1210c35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08439bec5f7e05cf133b4e7497bccedbe1210c35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08439bec5f7e05cf133b4e7497bccedbe1210c35/comments", "author": null, "committer": null, "parents": [{"sha": "f83611476fa182abd77ddedd75eac2ba67452540", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f83611476fa182abd77ddedd75eac2ba67452540", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f83611476fa182abd77ddedd75eac2ba67452540"}], "stats": {"total": 24, "additions": 24, "deletions": 0}, "files": [{"sha": "62c417c90225b738d366bc03cf87537842c17e14", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08439bec5f7e05cf133b4e7497bccedbe1210c35/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08439bec5f7e05cf133b4e7497bccedbe1210c35/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08439bec5f7e05cf133b4e7497bccedbe1210c35", "patch": "@@ -1,3 +1,8 @@\n+2000-01-16  Zack Weinberg  <zack@wolery.cumb.org>\n+\n+\t* config/i386/i386.md: Add peephole to merge successive stack\n+\tadjusts. \n+\n Sat Jan 15 15:41:14 EST 2000  John Wehle  (john@feith.com)\n \n \t* gcse.c (insert_insn_end_bb): Use emit_block_insn_before"}, {"sha": "c7b01819a434a336e5df21047e6701b582452029", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08439bec5f7e05cf133b4e7497bccedbe1210c35/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08439bec5f7e05cf133b4e7497bccedbe1210c35/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=08439bec5f7e05cf133b4e7497bccedbe1210c35", "patch": "@@ -8947,6 +8947,25 @@\n   [(parallel [(set (match_dup 0) (ashift:SI (match_dup 0) (match_dup 2)))\n \t      (clobber (reg:CC 17))])]\n   \"operands[2] = GEN_INT (exact_log2 (INTVAL (operands[1])));\")\n+\n+;; Merge two successive stack adjusts.  The combiner doesn't know how\n+;; to do this, and doesn't see all of them.\n+;; (reg:SI 7) is %esp.\n+(define_peephole2\n+  [(parallel[\n+    (set (reg:SI 7)\n+\t (plus:SI (reg:SI 7) (match_operand:SI 0 \"const_int_operand\" \"\")))\n+    (clobber (reg:CC 17))])\n+   (parallel[\n+    (set (reg:SI 7)\n+\t (plus:SI (reg:SI 7) (match_operand:SI 1 \"const_int_operand\" \"\")))\n+    (clobber (reg:CC 17))])]\n+  \"\"\n+  [(parallel[\n+    (set (reg:SI 7)\n+\t (plus:SI (reg:SI 7) (match_dup 2)))\n+    (clobber (reg:CC 17))])]\n+  \"operands[2] = GEN_INT (INTVAL (operands[0]) + INTVAL (operands[1]));\")\n \f\n ;; Call-value patterns last so that the wildcard operand does not\n ;; disrupt insn-recog's switch tables."}]}