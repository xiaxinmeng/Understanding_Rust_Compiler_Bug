{"sha": "d5b793624729a55f928a3d16de25c256e7c1bd37", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDViNzkzNjI0NzI5YTU1ZjkyOGEzZDE2ZGUyNWMyNTZlN2MxYmQzNw==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@cygnus.com", "date": "1997-11-17T23:41:05Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "1997-11-17T23:41:05Z"}, "message": "From Tom Tromey\n\t* cccp.c (deps_output): Properly quote file names for make.\n\nFrom-SVN: r16555", "tree": {"sha": "89d82f0d1d519fee5404b8f4408b759215cd1029", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/89d82f0d1d519fee5404b8f4408b759215cd1029"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d5b793624729a55f928a3d16de25c256e7c1bd37", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5b793624729a55f928a3d16de25c256e7c1bd37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5b793624729a55f928a3d16de25c256e7c1bd37", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5b793624729a55f928a3d16de25c256e7c1bd37/comments", "author": null, "committer": null, "parents": [{"sha": "de1ea87ac2b6db8105be0f4fa1c13e5d9e76a9f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de1ea87ac2b6db8105be0f4fa1c13e5d9e76a9f1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de1ea87ac2b6db8105be0f4fa1c13e5d9e76a9f1"}], "stats": {"total": 34, "additions": 29, "deletions": 5}, "files": [{"sha": "eea0bf05b4cc64d273f1a4aae77dd84fa6244498", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b793624729a55f928a3d16de25c256e7c1bd37/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b793624729a55f928a3d16de25c256e7c1bd37/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d5b793624729a55f928a3d16de25c256e7c1bd37", "patch": "@@ -1,3 +1,7 @@\n+Mon Nov 17 15:35:38 1997  Tom Tromey  <tromey@cygnus.com>\n+\n+\t* cccp.c (deps_output): Properly quote file names for make.\n+\n Mon Nov 17 13:21:40 1997  Jeffrey A Law  (law@cygnus.com)\n \n \t* t-h8300 (MULTILIB_EXCEPTIONS): Define."}, {"sha": "3a8a07687af730100990f35dce8d0e786925d92f", "filename": "gcc/cccp.c", "status": "modified", "additions": 25, "deletions": 5, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d5b793624729a55f928a3d16de25c256e7c1bd37/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d5b793624729a55f928a3d16de25c256e7c1bd37/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=d5b793624729a55f928a3d16de25c256e7c1bd37", "patch": "@@ -9950,6 +9950,8 @@ deps_output (string, spacer)\n      int spacer;\n {\n   int size = strlen (string);\n+  int i;\n+  char *p;\n \n   if (size == 0)\n     return;\n@@ -9966,17 +9968,35 @@ deps_output (string, spacer)\n       spacer = 0;\n   }\n \n-  if (deps_size + size + 8 > deps_allocated_size) {\n-    deps_allocated_size = (deps_size + size + 50) * 2;\n+  if (deps_size + 2 * size + 8 > deps_allocated_size) {\n+    deps_allocated_size = (deps_size + 2 * size + 50) * 2;\n     deps_buffer = xrealloc (deps_buffer, deps_allocated_size);\n   }\n   if (spacer == ' ') {\n     deps_buffer[deps_size++] = ' ';\n     deps_column++;\n   }\n-  bcopy (string, &deps_buffer[deps_size], size);\n-  deps_size += size;\n-  deps_column += size;\n+\n+  for (i = 0; i < size; ++i)\n+    {\n+      if (string[i] == '$')\n+\t{\n+\t  deps_buffer[deps_size++] = '$';\n+\t  deps_column++;\n+\t}\n+      else\n+\t{\n+\t  p = strchr (\"~[]*?()\\\\ \", string[i]);\n+\t  if (p != NULL)\n+\t    {\n+\t      deps_buffer[deps_size++] = '\\\\';\n+\t      deps_column++;\n+\t    }\n+\t}\n+      deps_buffer[deps_size++] = string[i];\n+      deps_column++;\n+    }\n+\n   if (spacer == ':') {\n     deps_buffer[deps_size++] = ':';\n     deps_column++;"}]}