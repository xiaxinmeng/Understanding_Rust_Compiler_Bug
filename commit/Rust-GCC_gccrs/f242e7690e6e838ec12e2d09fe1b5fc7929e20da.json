{"sha": "f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI0MmU3NjkwZTZlODM4ZWMxMmUyZDA5ZmUxYjVmYzc5MjllMjBkYQ==", "commit": {"author": {"name": "James A. Morrison", "email": "phython@gcc.gnu.org", "date": "2005-04-20T04:32:41Z"}, "committer": {"name": "James A. Morrison", "email": "phython@gcc.gnu.org", "date": "2005-04-20T04:32:41Z"}, "message": "fold-const.c (fold_binary): Fold ~(X ^ Y) to ~X ^ Y or X ^ ~Y if ~X or ~Y simplify.\n\n2005-04-19  James A. Morrison  <phython@gcc.gnu.org>\n\n\t* fold-const.c (fold_binary): Fold ~(X ^ Y) to ~X ^ Y or X ^ ~Y if\n\t~X or ~Y simplify.\n\nFrom-SVN: r98435", "tree": {"sha": "b4037461c39b448b596c703851cd4c6686eae2b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b4037461c39b448b596c703851cd4c6686eae2b5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/comments", "author": null, "committer": null, "parents": [{"sha": "33ab6245545612b87af5868b4f6e6373cc733791", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33ab6245545612b87af5868b4f6e6373cc733791", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33ab6245545612b87af5868b4f6e6373cc733791"}], "stats": {"total": 36, "additions": 36, "deletions": 0}, "files": [{"sha": "f4737d780d3805f282f3dcda9f917f004bd64326", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "patch": "@@ -1,3 +1,8 @@\n+2005-04-19  James A. Morrison  <phython@gcc.gnu.org>\n+\n+\t* fold-const.c (fold_binary): Fold ~(X ^ Y) to ~X ^ Y or X ^ ~Y if\n+\t~X or ~Y simplify.\n+\n 2005-04-19  James A. Morrison  <phython@gcc.gnu.org>\n \n \t* fold-const (fold_binary):  Fold ~X ^ ~ Y to X ^ Y."}, {"sha": "2ed556b27307ffbd40d2b50fc1c22b03bec0f11e", "filename": "gcc/fold-const.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "patch": "@@ -7015,6 +7015,20 @@ fold_unary (enum tree_code code, tree type, tree op0)\n \t\t   || (TREE_CODE (arg0) == PLUS_EXPR\n \t\t       && integer_all_onesp (TREE_OPERAND (arg0, 1)))))\n \treturn fold_build1 (NEGATE_EXPR, type, TREE_OPERAND (arg0, 0));\n+      /* Convert ~(X ^ Y) to ~X ^ Y or X ^ ~Y if ~X or ~Y simplify.  */\n+      else if (TREE_CODE (arg0) == BIT_XOR_EXPR\n+\t       && (tem = fold_unary (BIT_NOT_EXPR, type,\n+\t\t\t       \t     fold_convert (type,\n+\t\t\t\t\t     \t   TREE_OPERAND (arg0, 0)))))\n+\treturn fold_build2 (BIT_XOR_EXPR, type, tem,\n+\t\t\t    fold_convert (type, TREE_OPERAND (arg0, 1)));\n+      else if (TREE_CODE (arg0) == BIT_XOR_EXPR\n+\t       && (tem = fold_unary (BIT_NOT_EXPR, type,\n+\t\t\t       \t     fold_convert (type,\n+\t\t\t\t\t     \t   TREE_OPERAND (arg0, 1)))))\n+\treturn fold_build2 (BIT_XOR_EXPR, type,\n+\t\t\t    fold_convert (type, TREE_OPERAND (arg0, 0)), tem);\n+\n       return NULL_TREE;\n \n     case TRUTH_NOT_EXPR:"}, {"sha": "c7d9f2ec93395f57c67347f0a8a11f6a2680e572", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "patch": "@@ -1,6 +1,7 @@\n 2005-04-19  James A. Morrison  <phython@gcc.gnu.org>\n \n \t* gcc.dg/fold-xor-1.c: New test.\n+\t* gcc.dg/fold-xor-2.c: New test.\n \n 2005-04-19  James E. Wilson  <wilson@specifixinc.com>\n "}, {"sha": "40c2c5d46c257d284bfa1e92305392a406418961", "filename": "gcc/testsuite/gcc.dg/fold-xor-2.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-xor-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f242e7690e6e838ec12e2d09fe1b5fc7929e20da/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-xor-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ffold-xor-2.c?ref=f242e7690e6e838ec12e2d09fe1b5fc7929e20da", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fdump-tree-generic\" } */\n+int f (int a, int b) {\n+\treturn ~(a ^ -(b + 1));\n+}\n+\n+int g (int a, int b) {\n+\treturn b ^ a;\n+}\n+\n+unsigned int h (unsigned int a, unsigned int b) {\n+\treturn ~(-(b + 1) ^ a);\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"b \\\\^ a\" 3 \"generic\" } } */\n+/* { dg-final { cleanup-tree-dump \"generic\" } } */"}]}