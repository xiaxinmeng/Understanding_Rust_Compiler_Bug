{"sha": "5f41422fc7be19182f2df199f84ff20c96636526", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWY0MTQyMmZjN2JlMTkxODJmMmRmMTk5Zjg0ZmYyMGM5NjYzNjUyNg==", "commit": {"author": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2011-11-12T15:06:18Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2011-11-12T15:06:18Z"}, "message": "Makefile.in (stamp-gnatlib-$(RTSDIR)): Don't link s-oscons.ads.\n\n\nada:\n\n\t* gcc-interface/Makefile.in (stamp-gnatlib-$(RTSDIR)): Don't link\n\ts-oscons.ads.\n\t(OSCONS_CPP, OSCONS_EXTRACT): New.\n\t(./bldtools/oscons/xoscons): New Target.\n\t($(RTSDIR)/s-oscons.ads): New Target.\n\t(gnatlib): Depend on  $(RTSDIR)/s-oscons.ads.\n\t* gcc-interface/Make-lang.in (ada/s-oscons.ads) Remove as dependency.\n\t* Make-generated.in: Remove machinery to generate xoscons and\n\tada/s-oscons.ads.\n\nlibada:\n\n\tMakefile.in: Change dependency on oscons to depend on the generator\n\ttool.\n\nFrom-SVN: r181319", "tree": {"sha": "0a7e040aa0c1808884608b7d3b58cdebbfc1a4d0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0a7e040aa0c1808884608b7d3b58cdebbfc1a4d0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5f41422fc7be19182f2df199f84ff20c96636526", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f41422fc7be19182f2df199f84ff20c96636526", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5f41422fc7be19182f2df199f84ff20c96636526", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5f41422fc7be19182f2df199f84ff20c96636526/comments", "author": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0eb5d9c427638b5e0851223e8dfdc89c7e590f51", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0eb5d9c427638b5e0851223e8dfdc89c7e590f51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0eb5d9c427638b5e0851223e8dfdc89c7e590f51"}], "stats": {"total": 98, "additions": 57, "deletions": 41}, "files": [{"sha": "f8d6489ac83dbd98e54cb45e4be912ba701520a0", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=5f41422fc7be19182f2df199f84ff20c96636526", "patch": "@@ -1,3 +1,15 @@\n+2011-11-12  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\t* gcc-interface/Makefile.in (stamp-gnatlib-$(RTSDIR)): Don't link\n+\ts-oscons.ads.\n+\t(OSCONS_CPP, OSCONS_EXTRACT): New.\n+\t(./bldtools/oscons/xoscons): New Target.\n+\t($(RTSDIR)/s-oscons.ads): New Target.\n+\t(gnatlib): Depend on  $(RTSDIR)/s-oscons.ads.\n+\t* gcc-interface/Make-lang.in (ada/s-oscons.ads) Remove as dependency.\n+\t* Make-generated.in: Remove machinery to generate xoscons and\n+\tada/s-oscons.ads.\n+\n 2011-11-10  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* fe.h (Serious_Errors_Detected): New macro."}, {"sha": "ac52e491eeb68572760fdc3186c0fbab0580907c", "filename": "gcc/ada/Make-generated.in", "status": "modified", "additions": 0, "deletions": 31, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2FMake-generated.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2FMake-generated.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FMake-generated.in?ref=5f41422fc7be19182f2df199f84ff20c96636526", "patch": "@@ -64,37 +64,6 @@ $(ADA_GEN_SUBDIR)/nmake.ads :  $(ADA_GEN_SUBDIR)/sinfo.ads $(ADA_GEN_SUBDIR)/nma\n \t$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/nmake_s\n \t(cd $(ADA_GEN_SUBDIR)/bldtools/nmake_s; gnatmake -q xnmake ; ./xnmake -s ../../nmake.ads )\n \n-ifeq ($(strip $(filter-out alpha64 ia64 dec hp vms% openvms% alphavms%,$(subst -, ,$(host)))),)\n-OSCONS_CPP=../../../$(DECC) -E /comment=as_is -DNATIVE \\\n-             -DTARGET='\"\"$(target)\"\"' s-oscons-tmplt.c\n-\n-OSCONS_EXTRACT=../../../$(DECC) -DNATIVE \\\n-                 -DTARGET='\"\"$(target)\"\"' s-oscons-tmplt.c ; \\\n-  ld -o s-oscons-tmplt.exe s-oscons-tmplt.obj; \\\n-  ./s-oscons-tmplt.exe > s-oscons-tmplt.s\n-\n-else\n-# GCC_FOR_TARGET has paths relative to the gcc directory, so we need to adjust\n-# for running it from $(ADA_GEN_SUBDIR)/bldtools/oscons\n-OSCONS_CC=`echo \"$(GCC_FOR_TARGET)\" \\\n-  | sed -e 's^\\./xgcc^../../../xgcc^' -e 's^-B./^-B../../../^'`\n-OSCONS_CPP=$(OSCONS_CC) $(GNATLIBCFLAGS) -E -C \\\n-  -DTARGET=\\\"$(target)\\\" s-oscons-tmplt.c > s-oscons-tmplt.i\n-OSCONS_EXTRACT=$(OSCONS_CC) -S s-oscons-tmplt.i\n-endif\n-\n-$(ADA_GEN_SUBDIR)/s-oscons.ads : $(ADA_GEN_SUBDIR)/s-oscons-tmplt.c $(ADA_GEN_SUBDIR)/gsocket.h $(ADA_GEN_SUBDIR)/xoscons.adb $(ADA_GEN_SUBDIR)/xutil.ads $(ADA_GEN_SUBDIR)/xutil.adb\n-\t-$(MKDIR) $(ADA_GEN_SUBDIR)/bldtools/oscons\n-\t$(RM) $(addprefix $(ADA_GEN_SUBDIR)/bldtools/oscons/,$(notdir $^))\n-\t$(CP) $^ $(ADA_GEN_SUBDIR)/bldtools/oscons\n-\t(cd $(ADA_GEN_SUBDIR)/bldtools/oscons ; gnatmake -q xoscons ; \\\n-\t\t$(RM) s-oscons-tmplt.i s-oscons-tmplt.s ; \\\n-\t\t$(OSCONS_CPP) ; \\\n-\t\t$(OSCONS_EXTRACT) ; \\\n-\t\t./xoscons ; \\\n-\t\t$(RM) ../../s-oscons.ads ; \\\n-\t\t$(CP) s-oscons.ads s-oscons.h ../../)\n-\n $(ADA_GEN_SUBDIR)/sdefault.adb: $(ADA_GEN_SUBDIR)/stamp-sdefault ; @true\n $(ADA_GEN_SUBDIR)/stamp-sdefault : $(srcdir)/version.c Makefile\n \t$(ECHO) \"pragma Style_Checks (Off);\" >tmp-sdefault.adb"}, {"sha": "4dfc45b6e79d71322641a509b056b2f210a17e38", "filename": "gcc/ada/gcc-interface/Make-lang.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2Fgcc-interface%2FMake-lang.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMake-lang.in?ref=5f41422fc7be19182f2df199f84ff20c96636526", "patch": "@@ -568,7 +568,7 @@ canadian-gnattools: force\n \t$(MAKE) -C ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools1-re\n \t$(MAKE) -C ada $(ADA_TOOLS_FLAGS_TO_PASS) gnattools2\n \n-gnatlib gnatlib-sjlj gnatlib-zcx gnatlib-shared: ada/s-oscons.ads force\n+gnatlib gnatlib-sjlj gnatlib-zcx gnatlib-shared: force\n \t$(MAKE) -C ada $(COMMON_FLAGS_TO_PASS)  \\\n \t   GNATLIBFLAGS=\"$(GNATLIBFLAGS)\" \\\n \t   GNATLIBCFLAGS=\"$(GNATLIBCFLAGS)\" \\"}, {"sha": "d000b5df779d3cc05558cee762b67c2bb44f2f88", "filename": "gcc/ada/gcc-interface/Makefile.in", "status": "modified", "additions": 33, "deletions": 4, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f41422fc7be19182f2df199f84ff20c96636526/gcc%2Fada%2Fgcc-interface%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2FMakefile.in?ref=5f41422fc7be19182f2df199f84ff20c96636526", "patch": "@@ -2495,21 +2495,50 @@ install-gnatlib: ../stamp-gnatlib-$(RTSDIR)\n \t                $(RTSDIR)/$(word 1,$(subst <, ,$(PAIR)));)\n # Copy tsystem.h\n \t$(CP) $(srcdir)/tsystem.h $(RTSDIR)\n-# Copy generated target dependent sources\n-\t$(RM) $(RTSDIR)/s-oscons.ads\n-\t(cd $(RTSDIR); $(LN_S) ../s-oscons.ads s-oscons.ads)\n \t$(RM) ../stamp-gnatlib-$(RTSDIR)\n \ttouch ../stamp-gnatlib1-$(RTSDIR)\n \n # GNULLI End #############################################################\n \n+ifeq ($(strip $(filter-out alpha64 ia64 dec hp vms% openvms% alphavms%,$(subst -, ,$(host)))),)\n+OSCONS_CPP=../../$(DECC) -E /comment=as_is -DNATIVE \\\n+             -DTARGET='\"\"$(target)\"\"' $(fsrcpfx)ada/s-oscons-tmplt.c\n+\n+OSCONS_EXTRACT=../../$(DECC) -DNATIVE \\\n+                 -DTARGET='\"\"$(target)\"\"' $(fsrcpfx)ada/s-oscons-tmplt.c ; \\\n+  ld -o s-oscons-tmplt.exe s-oscons-tmplt.obj; \\\n+  ./s-oscons-tmplt.exe > s-oscons-tmplt.s\n+\n+else\n+# GCC_FOR_TARGET has paths relative to the gcc directory, so we need to adjust\n+# for running it from $(RTSDIR)\n+OSCONS_CC=`echo \"$(GCC_FOR_TARGET)\" \\\n+  | sed -e 's^\\./xgcc^../../xgcc^' -e 's^-B./^-B../../^'`\n+OSCONS_CPP=$(OSCONS_CC) $(GNATLIBCFLAGS) -E -C \\\n+  -DTARGET=\\\"$(target)\\\" $(fsrcpfx)ada/s-oscons-tmplt.c > s-oscons-tmplt.i\n+OSCONS_EXTRACT=$(OSCONS_CC) -S s-oscons-tmplt.i\n+endif\n+\n+./bldtools/oscons/xoscons: xoscons.adb xutil.ads xutil.adb\n+\t-$(MKDIR) ./bldtools/oscons\n+\t$(RM) $(addprefix ./bldtools/oscons/,$(notdir $^))\n+\t$(CP) $^ ./bldtools/oscons\n+\t(cd ./bldtools/oscons ; gnatmake -q xoscons)\n+\n+$(RTSDIR)/s-oscons.ads: ../stamp-gnatlib1-$(RTSDIR) s-oscons-tmplt.c gsocket.h ./bldtools/oscons/xoscons\n+\t$(RM) $(RTSDIR)/s-oscons-tmplt.i $(RTSDIR)/s-oscons-tmplt.s\n+\t(cd $(RTSDIR) ; \\\n+\t    $(OSCONS_CPP) ; \\\n+\t    $(OSCONS_EXTRACT) ; \\\n+\t    ../bldtools/oscons/xoscons)\n+\n # Don't use semicolon separated shell commands that involve list expansions.\n # The semicolon triggers a call to DCL on VMS and DCL can't handle command\n # line lengths in excess of 256 characters.\n # Example: cd $(RTSDIR); ar rc libfoo.a $(LONG_LIST_OF_OBJS)\n # is guaranteed to overflow the buffer.\n \n-gnatlib: ../stamp-gnatlib1-$(RTSDIR) ../stamp-gnatlib2-$(RTSDIR)\n+gnatlib: ../stamp-gnatlib1-$(RTSDIR) ../stamp-gnatlib2-$(RTSDIR) $(RTSDIR)/s-oscons.ads\n \t$(MAKE) -C $(RTSDIR) \\\n \t\tCC=\"`echo \\\"$(GCC_FOR_TARGET)\\\" \\\n \t\t| sed -e 's,\\./xgcc,../../xgcc,' -e 's,-B\\./,-B../../,'`\" \\"}, {"sha": "921b1bd7789074558f302668ccb2db9ef85d2d3d", "filename": "libada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f41422fc7be19182f2df199f84ff20c96636526/libada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f41422fc7be19182f2df199f84ff20c96636526/libada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FChangeLog?ref=5f41422fc7be19182f2df199f84ff20c96636526", "patch": "@@ -1,3 +1,8 @@\n+2011-11-12  Iain Sandoe  <iains@gcc.gnu.org>\n+\n+\tMakefile.in: Change dependency on oscons to depend on the generator\n+\ttool.\n+\n 2011-10-12  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* Makefile.in (LOOSE_WARN): Delete."}, {"sha": "5389dd005defed08eda67820a90587e98199ed3d", "filename": "libada/Makefile.in", "status": "modified", "additions": 6, "deletions": 5, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5f41422fc7be19182f2df199f84ff20c96636526/libada%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5f41422fc7be19182f2df199f84ff20c96636526/libada%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libada%2FMakefile.in?ref=5f41422fc7be19182f2df199f84ff20c96636526", "patch": "@@ -64,6 +64,7 @@ target_noncanonical:=@target_noncanonical@\n version := $(shell cat $(srcdir)/../gcc/BASE-VER)\n libsubdir := $(libdir)/gcc/$(target_noncanonical)/$(version)$(MULTISUBDIR)\n ADA_RTS_DIR=$(GCC_DIR)/ada/rts$(subst /,_,$(MULTISUBDIR))\n+ADA_RTS_SUBDIR=./rts$(subst /,_,$(MULTISUBDIR))\n \n # exeext should not be used because it's the *host* exeext.  We're building\n # a *target* library, aren't we?!?  Likewise for CC.  Still, provide bogus\n@@ -90,10 +91,10 @@ LIBADA_FLAGS_TO_PASS = \\\n         \"CFLAGS=$(CFLAGS)\"\n \n # Rules to build gnatlib.\n-.PHONY: gnatlib gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared oscons\n+.PHONY: gnatlib gnatlib-plain gnatlib-sjlj gnatlib-zcx gnatlib-shared osconstool\n gnatlib: @default_gnatlib_target@\n \n-gnatlib-plain: oscons $(GCC_DIR)/ada/Makefile\n+gnatlib-plain: osconstool $(GCC_DIR)/ada/Makefile\n \ttest -f stamp-libada || \\\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) gnatlib \\\n \t&& touch stamp-libada\n@@ -102,7 +103,7 @@ gnatlib-plain: oscons $(GCC_DIR)/ada/Makefile\n \t$(LN_S) $(ADA_RTS_DIR) adainclude\n \t$(LN_S) $(ADA_RTS_DIR) adalib\n \n-gnatlib-sjlj gnatlib-zcx gnatlib-shared: oscons $(GCC_DIR)/ada/Makefile\n+gnatlib-sjlj gnatlib-zcx gnatlib-shared: osconstool $(GCC_DIR)/ada/Makefile\n \ttest -f stamp-libada || \\\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) $@ \\\n \t&& touch stamp-libada\n@@ -111,8 +112,8 @@ gnatlib-sjlj gnatlib-zcx gnatlib-shared: oscons $(GCC_DIR)/ada/Makefile\n \t$(LN_S) $(ADA_RTS_DIR) adainclude\n \t$(LN_S) $(ADA_RTS_DIR) adalib\n \n-oscons:\n-\t$(MAKE) -C $(GCC_DIR) $(LIBADA_FLAGS_TO_PASS) ada/s-oscons.ads\n+osconstool:\n+\t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) ./bldtools/oscons/xoscons\n \n install-gnatlib: $(GCC_DIR)/ada/Makefile\n \t$(MAKE) -C $(GCC_DIR)/ada $(LIBADA_FLAGS_TO_PASS) install-gnatlib"}]}