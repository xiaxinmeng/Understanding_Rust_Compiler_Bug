{"sha": "b25912a4138026ccbb1efd7b680075a0953ac074", "node_id": "C_kwDOANBUbNoAKGIyNTkxMmE0MTM4MDI2Y2NiYjFlZmQ3YjY4MDA3NWEwOTUzYWMwNzQ", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2022-05-12T15:44:59Z"}, "committer": {"name": "Pierre-Marie de Rodat", "email": "derodat@adacore.com", "date": "2022-06-02T09:06:40Z"}, "message": "[Ada] Fix detection of deferred constants for freezing error\n\nTesting Is_Frozen is not robust enough, so instead test that the full view\nhas been seen and that the Has_Completion flag is set on it.\n\ngcc/ada/\n\n\t* freeze.adb (Check_Expression_Function.Find_Constant): Make test\n\tfor deferred constants more robust.", "tree": {"sha": "ecf3ad3c31e9e0fb706ae7345fb7dba36e3b03d3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ecf3ad3c31e9e0fb706ae7345fb7dba36e3b03d3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b25912a4138026ccbb1efd7b680075a0953ac074", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b25912a4138026ccbb1efd7b680075a0953ac074", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b25912a4138026ccbb1efd7b680075a0953ac074", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b25912a4138026ccbb1efd7b680075a0953ac074/comments", "author": null, "committer": {"login": "pmderodat", "id": 758452, "node_id": "MDQ6VXNlcjc1ODQ1Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/758452?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pmderodat", "html_url": "https://github.com/pmderodat", "followers_url": "https://api.github.com/users/pmderodat/followers", "following_url": "https://api.github.com/users/pmderodat/following{/other_user}", "gists_url": "https://api.github.com/users/pmderodat/gists{/gist_id}", "starred_url": "https://api.github.com/users/pmderodat/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pmderodat/subscriptions", "organizations_url": "https://api.github.com/users/pmderodat/orgs", "repos_url": "https://api.github.com/users/pmderodat/repos", "events_url": "https://api.github.com/users/pmderodat/events{/privacy}", "received_events_url": "https://api.github.com/users/pmderodat/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "cfd2262668862167cbe102ffbe87f127599be7a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cfd2262668862167cbe102ffbe87f127599be7a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cfd2262668862167cbe102ffbe87f127599be7a8"}], "stats": {"total": 3, "additions": 2, "deletions": 1}, "files": [{"sha": "b7310a4e8a84190ca1e07fd35bbc93a8f3ae7283", "filename": "gcc/ada/freeze.adb", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b25912a4138026ccbb1efd7b680075a0953ac074/gcc%2Fada%2Ffreeze.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b25912a4138026ccbb1efd7b680075a0953ac074/gcc%2Fada%2Ffreeze.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Ffreeze.adb?ref=b25912a4138026ccbb1efd7b680075a0953ac074", "patch": "@@ -1458,7 +1458,8 @@ package body Freeze is\n                                                          N_Object_Declaration\n            and then not Is_Imported (Entity (Nod))\n            and then not Has_Completion (Entity (Nod))\n-           and then not Is_Frozen (Entity (Nod))\n+           and then not (Present (Full_View (Entity (Nod)))\n+                          and then Has_Completion (Full_View (Entity (Nod))))\n          then\n             Error_Msg_NE\n               (\"premature use of& in call or instance\", N, Entity (Nod));"}]}