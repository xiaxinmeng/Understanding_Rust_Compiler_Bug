{"sha": "2de9107ad5ea3e76fb01e7eead041901f8348cc0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRlOTEwN2FkNWVhM2U3NmZiMDFlN2VlYWQwNDE5MDFmODM0OGNjMA==", "commit": {"author": {"name": "J\"orn Rennecke", "email": "joern.rennecke@st.com", "date": "2006-08-29T14:34:36Z"}, "committer": {"name": "Joern Rennecke", "email": "amylaar@gcc.gnu.org", "date": "2006-08-29T14:34:36Z"}, "message": "re PR c++/28139 (alias information for EH is wrong)\n\ncp:\n\tPR c++/28139\n\t* except.c (expand_start_catch_block): Use correct types for bitwise\n\tcopy.\ntestsuite:\n\tPR c++/28139\n\t* g++.dg/eh/alias1.C: New test.\n\nFrom-SVN: r116561", "tree": {"sha": "54706980654f3c40de987bd6338934a3dee183b3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/54706980654f3c40de987bd6338934a3dee183b3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2de9107ad5ea3e76fb01e7eead041901f8348cc0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2de9107ad5ea3e76fb01e7eead041901f8348cc0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2de9107ad5ea3e76fb01e7eead041901f8348cc0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2de9107ad5ea3e76fb01e7eead041901f8348cc0/comments", "author": null, "committer": null, "parents": [{"sha": "a3b6119721e9344233ac684940ea4cc0ee79e9c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a3b6119721e9344233ac684940ea4cc0ee79e9c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a3b6119721e9344233ac684940ea4cc0ee79e9c5"}], "stats": {"total": 62, "additions": 61, "deletions": 1}, "files": [{"sha": "3774c14d33df42f40556ffdf697046d982fc5704", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2de9107ad5ea3e76fb01e7eead041901f8348cc0", "patch": "@@ -1,3 +1,9 @@\n+2006-08-29  J\"orn Rennecke  <joern.rennecke@st.com>\n+\n+\tPR c++/28139\n+\t* except.c (expand_start_catch_block): Use correct types for bitwise\n+\tcopy.\n+\n 2006-08-28  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/26670"}, {"sha": "ad493aa389ca782971319e2e8f2e1066c16c1091", "filename": "gcc/cp/except.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Fcp%2Fexcept.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Fcp%2Fexcept.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fexcept.c?ref=2de9107ad5ea3e76fb01e7eead041901f8348cc0", "patch": "@@ -458,7 +458,14 @@ expand_start_catch_block (tree decl)\n   else\n     {\n       tree init = do_begin_catch ();\n-      exp = create_temporary_var (ptr_type_node);\n+      tree init_type = type;\n+\n+      /* Pointers are passed by values, everything else by reference.  */\n+      if (!TYPE_PTR_P (type))\n+\tinit_type = build_pointer_type (type);\n+      if (init_type != TREE_TYPE (init))\n+\tinit = build1 (NOP_EXPR, init_type, init);\n+      exp = create_temporary_var (init_type);\n       DECL_REGISTER (exp) = 1;\n       cp_finish_decl (exp, init, /*init_const_expr=*/false,\n \t\t      NULL_TREE, LOOKUP_ONLYCONVERTING);"}, {"sha": "21eba05b7d453c8ddc1edac3a49d8c616d7a9892", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2de9107ad5ea3e76fb01e7eead041901f8348cc0", "patch": "@@ -1,3 +1,8 @@\n+2006-08-29  J\"orn Rennecke  <joern.rennecke@st.com>\n+\n+\tPR c++/28139\n+\t* g++.dg/eh/alias1.C: New test.\n+\n 2006-08-28  Volker Reichelt  <reichelt@igpm.rwth-aachen.de>\n \n \tPR c++/28860"}, {"sha": "f9c6cb744834a71b2bb75dc9978d72e6317ff74c", "filename": "gcc/testsuite/g++.dg/eh/alias1.C", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Falias1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2de9107ad5ea3e76fb01e7eead041901f8348cc0/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Falias1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Falias1.C?ref=2de9107ad5ea3e76fb01e7eead041901f8348cc0", "patch": "@@ -0,0 +1,42 @@\n+// { dg-do run }\n+// { dg-options \"-O3\" }\n+/* PR c++/28139: disjoint alias sets for the store from\n+   expand_start_catch_block than for loading P result in P being loaded\n+   before it is initialized for sh-elf.  */\n+\n+extern \"C\" {\n+void exit (int) __attribute__ ((noreturn));\n+}\n+\n+int i_glob = 42;\n+int *p0 = &i_glob;\n+typedef int **ipp;\n+\n+void\n+g (int i)\n+{\n+  if (!i_glob)\n+    exit ((int)(long long) &i);\n+}\n+\n+static void\n+h ()\n+{\n+  throw &p0;\n+}\n+\n+int\n+main()\n+{\n+  g (42);\n+  try\n+    {\n+     h ();\n+    }\n+  catch (const ipp &p)\n+    {\n+      if (**p != 42)\n+\texit (1);\n+    }\n+  return 0;\n+}"}]}