{"sha": "fa5556deb30c805414137700342441f3186b075a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE1NTU2ZGViMzBjODA1NDE0MTM3NzAwMzQyNDQxZjMxODZiMDc1YQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2013-03-06T11:24:07Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2013-03-06T11:24:07Z"}, "message": "re PR tree-optimization/56294 (BOOT_CFLAGS='-O2 -g -fno-ipa-sra' leads to bootstrap comparison failure)\n\n2013-03-06  Richard Biener  <rguenther@suse.de>\n\n\tPR middle-end/56294\n\t* tree-into-ssa.c (insert_phi_nodes_for): Add dumping.\n\t(insert_updated_phi_nodes_compare_uids): New function.\n\t(update_ssa): Sort symbols_to_rename after UID before\n\ttraversing it to insert PHI nodes.\n\nFrom-SVN: r196488", "tree": {"sha": "c3718ec07ee45dfd5809b7725f9a6cc7dcfb2b88", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c3718ec07ee45dfd5809b7725f9a6cc7dcfb2b88"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa5556deb30c805414137700342441f3186b075a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5556deb30c805414137700342441f3186b075a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa5556deb30c805414137700342441f3186b075a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5556deb30c805414137700342441f3186b075a/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "010403d180a49644c9786a55d51d677aafa86402", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/010403d180a49644c9786a55d51d677aafa86402", "html_url": "https://github.com/Rust-GCC/gccrs/commit/010403d180a49644c9786a55d51d677aafa86402"}], "stats": {"total": 26, "additions": 26, "deletions": 0}, "files": [{"sha": "3eaab4c40a54bad9cb0cd6be06abe862383b877d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5556deb30c805414137700342441f3186b075a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5556deb30c805414137700342441f3186b075a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa5556deb30c805414137700342441f3186b075a", "patch": "@@ -1,3 +1,11 @@\n+2013-03-06  Richard Biener  <rguenther@suse.de>\n+\n+\tPR middle-end/56294\n+\t* tree-into-ssa.c (insert_phi_nodes_for): Add dumping.\n+\t(insert_updated_phi_nodes_compare_uids): New function.\n+\t(update_ssa): Sort symbols_to_rename after UID before\n+\ttraversing it to insert PHI nodes.\n+\n 2013-03-06  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/50494"}, {"sha": "65c15daca4ce11dbff42b64636d1fbc595673bef", "filename": "gcc/tree-into-ssa.c", "status": "modified", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5556deb30c805414137700342441f3186b075a/gcc%2Ftree-into-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5556deb30c805414137700342441f3186b075a/gcc%2Ftree-into-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-into-ssa.c?ref=fa5556deb30c805414137700342441f3186b075a", "patch": "@@ -969,6 +969,12 @@ insert_phi_nodes_for (tree var, bitmap phi_insertion_points, bool update_p)\n       if (update_p)\n \tmark_block_for_update (bb);\n \n+      if (dump_file && (dump_flags & TDF_DETAILS))\n+\t{\n+\t  fprintf (dump_file, \"creating PHI node in block #%d for \", bb_index);\n+\t  print_generic_expr (dump_file, var, TDF_SLIM);\n+\t  fprintf (dump_file, \"\\n\");\n+\t}\n       phi = NULL;\n \n       if (TREE_CODE (var) == SSA_NAME)\n@@ -3040,6 +3046,17 @@ insert_updated_phi_nodes_for (tree var, bitmap_head *dfs, bitmap blocks,\n   BITMAP_FREE (idf);\n }\n \n+/* Sort symbols_to_rename after their DECL_UID.  */\n+\n+static int\n+insert_updated_phi_nodes_compare_uids (const void *a, const void *b)\n+{\n+  const_tree syma = *(const const_tree *)a;\n+  const_tree symb = *(const const_tree *)b;\n+  if (DECL_UID (syma) == DECL_UID (symb))\n+    return 0;\n+  return DECL_UID (syma) < DECL_UID (symb) ? -1 : 1;\n+}\n \n /* Given a set of newly created SSA names (NEW_SSA_NAMES) and a set of\n    existing SSA names (OLD_SSA_NAMES), update the SSA form so that:\n@@ -3250,6 +3267,7 @@ update_ssa (unsigned update_flags)\n \t  sbitmap_free (tmp);\n \t}\n \n+      symbols_to_rename.qsort (insert_updated_phi_nodes_compare_uids);\n       FOR_EACH_VEC_ELT (symbols_to_rename, i, sym)\n \tinsert_updated_phi_nodes_for (sym, dfs, blocks_to_update,\n \t                              update_flags);"}]}