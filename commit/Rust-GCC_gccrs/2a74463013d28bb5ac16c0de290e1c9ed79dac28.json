{"sha": "2a74463013d28bb5ac16c0de290e1c9ed79dac28", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmE3NDQ2MzAxM2QyOGJiNWFjMTZjMGRlMjkwZTFjOWVkNzlkYWMyOA==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2001-12-10T08:41:03Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2001-12-10T08:41:03Z"}, "message": "locale_facets.h (__num_base::_S_scale_hex): Add.\n\n\n2001-12-09  Benjamin Kosnik  <bkoz@redhat.com>\n\t    Philip Martin <pmartin@uklinux.net>\n\n\t* include/bits/locale_facets.h (__num_base::_S_scale_hex): Add.\n\t(__num_base::_S_scale_oct): Add.\n\t* src/locale.cc: Add definitions.\n\t* testsuite/27_io/istream_extractor_arith.cc (main): Call test13.\n\n\t* testsuite/testsuite_hooks.h: Remove duplicate VERIFY define.\n\nCo-Authored-By: Philip Martin <pmartin@uklinux.net>\n\nFrom-SVN: r47837", "tree": {"sha": "2e3c142c60d613fd9c38672144a6f3e75a9931c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2e3c142c60d613fd9c38672144a6f3e75a9931c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2a74463013d28bb5ac16c0de290e1c9ed79dac28", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a74463013d28bb5ac16c0de290e1c9ed79dac28", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2a74463013d28bb5ac16c0de290e1c9ed79dac28", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2a74463013d28bb5ac16c0de290e1c9ed79dac28/comments", "author": null, "committer": null, "parents": [{"sha": "d4197a152d554f286b37da26bb37c96025f068ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d4197a152d554f286b37da26bb37c96025f068ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d4197a152d554f286b37da26bb37c96025f068ee"}], "stats": {"total": 36, "additions": 29, "deletions": 7}, "files": [{"sha": "e2d7b7e9840d3536294e0696fd20aa2ae8eac6f9", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=2a74463013d28bb5ac16c0de290e1c9ed79dac28", "patch": "@@ -1,3 +1,13 @@\n+2001-12-09  Benjamin Kosnik  <bkoz@redhat.com>\n+\t    Philip Martin <pmartin@uklinux.net>\n+\t\n+\t* include/bits/locale_facets.h (__num_base::_S_scale_hex): Add.\n+\t(__num_base::_S_scale_oct): Add.\n+\t* src/locale.cc: Add definitions.\n+\t* testsuite/27_io/istream_extractor_arith.cc (main): Call test13.\n+\n+\t* testsuite/testsuite_hooks.h: Remove duplicate VERIFY define.\n+\t\n 2001-12-07  Nathan Myers  <ncm@cantrip.org>\n \t    Loren Rittle <ljrittle@acm.org>\n "}, {"sha": "a992c455093863b227e5fb46078ed61c42d0bd3a", "filename": "libstdc++-v3/include/bits/locale_facets.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.h?ref=2a74463013d28bb5ac16c0de290e1c9ed79dac28", "patch": "@@ -439,6 +439,12 @@ namespace std\n     // Construct and return valid scanf format for integer types.\n     static void\n     _S_format_int(const ios_base& __io, char* __fptr, char __mod, char __modl);\n+\n+    // Used to establish gating factor for base 16 input.\n+    static const double _S_scale_hex;\n+    \n+    // Used to establish gating factor for base 8 input.\n+    static const double _S_scale_oct;\n   };\n \n   template<typename _CharT>"}, {"sha": "5f22cde02a223210ba9ba2a0d7761c9341779060", "filename": "libstdc++-v3/include/bits/locale_facets.tcc", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Flocale_facets.tcc?ref=2a74463013d28bb5ac16c0de290e1c9ed79dac28", "patch": "@@ -35,7 +35,7 @@\n #include <bits/std_cerrno.h>\n #include <bits/std_clocale.h>   // For localeconv\n #include <bits/std_cstdlib.h>   // For strof, strtold\n-#include <bits/std_cmath.h>   // For ceil\n+#include <bits/std_cmath.h>     // For ceil\n #include <bits/std_limits.h>    // For numeric_limits\n #include <bits/std_memory.h>    // For auto_ptr\n #include <bits/streambuf_iterator.h>     // For streambuf_iterators\n@@ -299,11 +299,13 @@ namespace std\n       // Figure out the maximum number of digits that can be extracted\n       // for the given type, using the determined base.\n       int __max_digits;\n-      if (__base != 10)\n-\t__max_digits = static_cast<int>(ceil(__max * log(10.0)\n-\t\t\t\t\t   /log(static_cast<double>(__base))));\n-      else \n+      if (__base == 10)\n \t__max_digits = __max;\n+      else if (__base == 16)\n+\t__max_digits = static_cast<int>(ceil(__max * _S_scale_hex));\n+      else if (__base == 8)\n+      __max_digits = static_cast<int>(ceil(__max * _S_scale_oct));\n+\n       // Add in what's already been extracted.\n       __max_digits += __pos;\n "}, {"sha": "92a8a5c09807d96d170a98c56b55ae9ca6bcdb36", "filename": "libstdc++-v3/src/locale.cc", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Flocale.cc?ref=2a74463013d28bb5ac16c0de290e1c9ed79dac28", "patch": "@@ -76,6 +76,10 @@ namespace std\n \n   const char __num_base::_S_atoms[] = \"0123456789eEabcdfABCDF\";\n \n+  const double __num_base::_S_scale_hex = log(10.0)/log(16.0);\n+\n+  const double __num_base::_S_scale_oct = log(10.0)/log(8.0);\n+\n   // Definitions for static const data members of locale::_Impl\n   const locale::id* const\n   locale::_Impl::_S_id_ctype[] ="}, {"sha": "83b93025226b00f84521c19647a9846c98f48ba2", "filename": "libstdc++-v3/testsuite/27_io/istream_extractor_arith.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_extractor_arith.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_extractor_arith.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fistream_extractor_arith.cc?ref=2a74463013d28bb5ac16c0de290e1c9ed79dac28", "patch": "@@ -579,7 +579,7 @@ void test13()\n     digits += '1';\n   istringstream iss2(digits);\n   iss2 >> i;\n-  VERIFY( iss2.good() );\n+  VERIFY( !iss2.fail() );\n \n   digits += '1';\n   i = 0;\n@@ -604,6 +604,7 @@ int main()\n   \n   test11();\n   test12();\n+  test13();\n   return 0;\n }\n "}, {"sha": "b7e96cb2cf05b10d9baaa5ae9d3a6851c4771e75", "filename": "libstdc++-v3/testsuite/testsuite_hooks.h", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2a74463013d28bb5ac16c0de290e1c9ed79dac28/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2Ftestsuite_hooks.h?ref=2a74463013d28bb5ac16c0de290e1c9ed79dac28", "patch": "@@ -49,7 +49,6 @@\n # define VERIFY(fn) assert(fn)\n #else\n # define VERIFY(fn) test &= (fn)\n-# define VERIFY(fn) fn\n #endif\n \n #include <bits/c++config.h>"}]}