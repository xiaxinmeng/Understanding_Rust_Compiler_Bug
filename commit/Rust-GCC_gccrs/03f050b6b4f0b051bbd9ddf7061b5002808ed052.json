{"sha": "03f050b6b4f0b051bbd9ddf7061b5002808ed052", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDNmMDUwYjZiNGYwYjA1MWJiZDlkZGY3MDYxYjUwMDI4MDhlZDA1Mg==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-17T10:01:17Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-17T10:01:17Z"}, "message": "[multiple changes]\n\n2009-04-17  Nicolas Roche  <roche@adacore.com>\n\n\t* initialize.c (__gnat_initialize): remove MAX_PATH limitation on each\n\targument length.\n\n2009-04-17  Gary Dismukes  <dismukes@adacore.com>\n\n\t* sem_elim.adb (Eliminate_Error_Msg): Minor change to error message to\n\tcover both calls and attribute references (\"call\" => \"reference\").\n\n2009-04-17  Ed Schonberg  <schonberg@adacore.com>\n\n\t* sem_ch3.adb (Analyze_Subtype_Declaration): A subtype of an access\n\ttype for which Storage_Size is set to 0 is legal in a pure unit.\n\nFrom-SVN: r146237", "tree": {"sha": "743b5a8129e06c619ef80fa5f1948d96e7408beb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/743b5a8129e06c619ef80fa5f1948d96e7408beb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/03f050b6b4f0b051bbd9ddf7061b5002808ed052", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03f050b6b4f0b051bbd9ddf7061b5002808ed052", "html_url": "https://github.com/Rust-GCC/gccrs/commit/03f050b6b4f0b051bbd9ddf7061b5002808ed052", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/03f050b6b4f0b051bbd9ddf7061b5002808ed052/comments", "author": null, "committer": null, "parents": [{"sha": "bf327c92ead248cae1afba338d72bb7116dfc783", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bf327c92ead248cae1afba338d72bb7116dfc783", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bf327c92ead248cae1afba338d72bb7116dfc783"}], "stats": {"total": 29, "additions": 23, "deletions": 6}, "files": [{"sha": "df057e59aead8790b062a525f6dc65cb22267ebd", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=03f050b6b4f0b051bbd9ddf7061b5002808ed052", "patch": "@@ -1,3 +1,18 @@\n+2009-04-17  Nicolas Roche  <roche@adacore.com>\n+\n+\t* initialize.c (__gnat_initialize): remove MAX_PATH limitation on each\n+\targument length.\n+\n+2009-04-17  Gary Dismukes  <dismukes@adacore.com>\n+\n+\t* sem_elim.adb (Eliminate_Error_Msg): Minor change to error message to\n+\tcover both calls and attribute references (\"call\" => \"reference\").\n+\n+2009-04-17  Ed Schonberg  <schonberg@adacore.com>\n+\n+\t* sem_ch3.adb (Analyze_Subtype_Declaration): A subtype of an access\n+\ttype for which Storage_Size is set to 0 is legal in a pure unit.\n+\n 2009-04-17  Thomas Quinot  <quinot@adacore.com>\n \n \t* exp_ch7.adb: Minor reformatting"}, {"sha": "b7b905b49a2e2eb05f0541c7a521bf49f9be3aa5", "filename": "gcc/ada/initialize.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2Finitialize.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2Finitialize.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Finitialize.c?ref=03f050b6b4f0b051bbd9ddf7061b5002808ed052", "patch": "@@ -99,10 +99,10 @@ __gnat_initialize (void *eh)\n \n    /* Adjust gnat_argv to support Unicode characters. */\n    {\n-     char arg_utf8[MAX_PATH];\n      LPWSTR *wargv;\n      int wargc;\n      int k;\n+     int size;\n \n      wargv = CommandLineToArgvW (GetCommandLineW(), &wargc);\n \n@@ -113,9 +113,9 @@ __gnat_initialize (void *eh)\n \n \t for (k=0; k<wargc; k++)\n \t   {\n-\t     WS2SC (arg_utf8, wargv[k], MAX_PATH);\n-\t     gnat_argv[k] = (char *) xmalloc (strlen (arg_utf8) + 1);\n-\t     strcpy (gnat_argv[k], arg_utf8);\n+\t     size = WS2SC (NULL, wargv[k], 0);\n+\t     gnat_argv[k] = (char *) xmalloc (size + 1);\n+\t     WS2SC (gnat_argv[k], wargv[k], size);\n \t   }\n \n \t LocalFree (wargv);"}, {"sha": "243c9f7a3d789dc173b95cf919dc2712e2e976f8", "filename": "gcc/ada/sem_ch3.adb", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2Fsem_ch3.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2Fsem_ch3.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch3.adb?ref=03f050b6b4f0b051bbd9ddf7061b5002808ed052", "patch": "@@ -3606,11 +3606,13 @@ package body Sem_Ch3 is\n \n                --  A Pure library_item must not contain the declaration of a\n                --  named access type, except within a subprogram, generic\n-               --  subprogram, task unit, or protected unit (RM 10.2.1(16)).\n+               --  subprogram, task unit, or protected unit, or if it has\n+               --  a specified Storage_Size of zero (RM05-10.2.1(15.4-15.5)).\n \n                if Comes_From_Source (Id)\n                  and then In_Pure_Unit\n                  and then not In_Subprogram_Task_Protected_Unit\n+                 and then not No_Pool_Assigned (Id)\n                then\n                   Error_Msg_N\n                     (\"named access types not allowed in pure unit\", N);"}, {"sha": "6dd7021e7cf15b236ca0c0de773df08c8651ea47", "filename": "gcc/ada/sem_elim.adb", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2Fsem_elim.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/03f050b6b4f0b051bbd9ddf7061b5002808ed052/gcc%2Fada%2Fsem_elim.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_elim.adb?ref=03f050b6b4f0b051bbd9ddf7061b5002808ed052", "patch": "@@ -671,7 +671,7 @@ package body Sem_Elim is\n       for J in Elim_Entities.First .. Elim_Entities.Last loop\n          if E = Elim_Entities.Table (J).Subp then\n             Error_Msg_Sloc := Sloc (Elim_Entities.Table (J).Prag);\n-            Error_Msg_NE (\"cannot call subprogram & eliminated #\", N, E);\n+            Error_Msg_NE (\"cannot reference subprogram & eliminated #\", N, E);\n             return;\n          end if;\n       end loop;"}]}