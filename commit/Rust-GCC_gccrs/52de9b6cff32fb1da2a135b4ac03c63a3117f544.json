{"sha": "52de9b6cff32fb1da2a135b4ac03c63a3117f544", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJkZTliNmNmZjMyZmIxZGEyYTEzNWI0YWMwM2M2M2EzMTE3ZjU0NA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "1998-03-18T13:45:28Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "1998-03-18T13:45:28Z"}, "message": "fold-const.c (operand_equal_for_comparison_p): See if equal when nop conversions are removed.\n\nWed Mar 18 13:46:07 1998  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n        * fold-const.c (operand_equal_for_comparison_p): See if equal\n        when nop conversions are removed.\n\nFrom-SVN: r18672", "tree": {"sha": "2acd431d2d2a70b8845f47ad260fb682bdbb506d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2acd431d2d2a70b8845f47ad260fb682bdbb506d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52de9b6cff32fb1da2a135b4ac03c63a3117f544", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52de9b6cff32fb1da2a135b4ac03c63a3117f544", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52de9b6cff32fb1da2a135b4ac03c63a3117f544", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52de9b6cff32fb1da2a135b4ac03c63a3117f544/comments", "author": null, "committer": null, "parents": [{"sha": "7c00d1fe83e896e59dd6f445f0da11232ba0803f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7c00d1fe83e896e59dd6f445f0da11232ba0803f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7c00d1fe83e896e59dd6f445f0da11232ba0803f"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "2b246554f42f57d5a0ffd02ba78b35699817c6fd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52de9b6cff32fb1da2a135b4ac03c63a3117f544/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52de9b6cff32fb1da2a135b4ac03c63a3117f544/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=52de9b6cff32fb1da2a135b4ac03c63a3117f544", "patch": "@@ -1,3 +1,8 @@\n+Wed Mar 18 13:46:07 1998  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* fold-const.c (operand_equal_for_comparison_p): See if equal\n+\twhen nop conversions are removed.\n+\n Wed Mar 18 13:42:01 1998  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* expr.c (expand_expr, case COND_EXPR): If have conditional move,"}, {"sha": "3a24e4c2df584d3b6429ab282464e7870fabbb8a", "filename": "gcc/fold-const.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52de9b6cff32fb1da2a135b4ac03c63a3117f544/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52de9b6cff32fb1da2a135b4ac03c63a3117f544/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=52de9b6cff32fb1da2a135b4ac03c63a3117f544", "patch": "@@ -1909,7 +1909,7 @@ operand_equal_for_comparison_p (arg0, arg1, other)\n      tree other;\n {\n   int unsignedp1, unsignedpo;\n-  tree primarg1, primother;\n+  tree primarg0, primarg1, primother;\n   unsigned correct_width;\n \n   if (operand_equal_p (arg0, arg1, 0))\n@@ -1919,6 +1919,14 @@ operand_equal_for_comparison_p (arg0, arg1, other)\n       || ! INTEGRAL_TYPE_P (TREE_TYPE (arg1)))\n     return 0;\n \n+  /* Discard any conversions that don't change the modes of ARG0 and ARG1\n+     and see if the inner values are the same.  This removes any\n+     signedness comparison, which doesn't matter here.  */\n+  primarg0 = arg0, primarg1 = arg1;\n+  STRIP_NOPS (primarg0);  STRIP_NOPS (primarg1);\n+  if (operand_equal_p (primarg0, primarg1, 0))\n+    return 1;\n+\n   /* Duplicate what shorten_compare does to ARG1 and see if that gives the\n      actual comparison operand, ARG0.\n "}]}