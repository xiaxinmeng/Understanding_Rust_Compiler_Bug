{"sha": "bd5ab709de98ed49524b96cae15de692dd65a64d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ1YWI3MDlkZTk4ZWQ0OTUyNGI5NmNhZTE1ZGU2OTJkZDY1YTY0ZA==", "commit": {"author": {"name": "Arthur Loiret", "email": "aloiret@debian.org", "date": "2011-07-11T11:22:15Z"}, "committer": {"name": "Matthias Klose", "email": "doko@gcc.gnu.org", "date": "2011-07-11T11:22:15Z"}, "message": "config.gcc (mips*-*-linux*): If 'enabled_targets' is 'all'...\n\n2011-07-11  Arthur Loiret  <aloiret@debian.org>\n            Matthias Klose <doko@debian.org>\n\n        * config.gcc (mips*-*-linux*): If 'enabled_targets' is 'all', build\n        a tri-arch compiler defaulting to 32-bit (ABI o32). In this case:\n        (tm_file): Add mips/linux64.h.\n        (tmake_file): Add mips/t-linux64.\n        (tm_defines): Add MIPS_ABI_DEFAULT=ABI_32.\n        * config/mips/linux64.h (DRIVER_SELF_SPECS): Use MULTILIB_ABI_DEFAULT\n        instead of hardcoded mabi=n32.\n        * config/mips/t-linux64 (MULTILIB_DIRNAMES): Set to 'n32 . 64' if\n        tm_defines contains MIPS_ABI_DEFAULT ABI_32, to follow the glibc\n        convention.\n\nCo-Authored-By: Matthias Klose <doko@debian.org>\n\nFrom-SVN: r176145", "tree": {"sha": "3ceae419a24876fa4fbfb9c66d24a0142b0e3279", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3ceae419a24876fa4fbfb9c66d24a0142b0e3279"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd5ab709de98ed49524b96cae15de692dd65a64d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd5ab709de98ed49524b96cae15de692dd65a64d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd5ab709de98ed49524b96cae15de692dd65a64d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd5ab709de98ed49524b96cae15de692dd65a64d/comments", "author": null, "committer": null, "parents": [{"sha": "d3b7e946d7a2c298e87a0affd06caedb7639f180", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3b7e946d7a2c298e87a0affd06caedb7639f180", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3b7e946d7a2c298e87a0affd06caedb7639f180"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "59e1fde440e7ffe8e1fbf251499a2ad7710b2d43", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bd5ab709de98ed49524b96cae15de692dd65a64d", "patch": "@@ -1,3 +1,17 @@\n+2011-07-11  Arthur Loiret  <aloiret@debian.org>\n+\t    Matthias Klose <doko@debian.org>\n+\n+\t* config.gcc (mips*-*-linux*): If 'enabled_targets' is 'all', build\n+\ta tri-arch compiler defaulting to 32-bit (ABI o32). In this case:\n+\t(tm_file): Add mips/linux64.h.\n+\t(tmake_file): Add mips/t-linux64.\n+\t(tm_defines): Add MIPS_ABI_DEFAULT=ABI_32.\n+\t* config/mips/linux64.h (DRIVER_SELF_SPECS): Use MULTILIB_ABI_DEFAULT\n+\tinstead of hardcoded mabi=n32.\n+\t* config/mips/t-linux64 (MULTILIB_DIRNAMES): Set to 'n32 . 64' if\n+\ttm_defines contains MIPS_ABI_DEFAULT ABI_32, to follow the glibc\n+\tconvention.\n+\n 2011-07-11  Andreas Krebbel  <Andreas.Krebbel@de.ibm.com>\n \n \t* passes.c (init_optimization_passes): Add invariant motion pass"}, {"sha": "e51a44a8a7816d8e50523286ef81257ac025b7b4", "filename": "gcc/config.gcc", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=bd5ab709de98ed49524b96cae15de692dd65a64d", "patch": "@@ -1862,6 +1862,11 @@ mips64*-*-linux* | mipsisa64*-*-linux*)\n mips*-*-linux*)\t\t\t\t# Linux MIPS, either endian.\n         tm_file=\"dbxelf.h elfos.h gnu-user.h linux.h glibc-stdint.h ${tm_file} mips/linux.h\"\n \ttmake_file=\"${tmake_file} mips/t-libgcc-mips16\"\n+\tif test x$enable_targets = xall; then\n+\t\ttm_file=\"${tm_file} mips/linux64.h\"\n+\t\ttmake_file=\"${tmake_file} mips/t-linux64\"\n+\t\ttm_defines=\"${tm_defines} MIPS_ABI_DEFAULT=ABI_32\"\n+\tfi\n \tcase ${target} in\n         mipsisa32r2*)\n \t\ttm_defines=\"${tm_defines} MIPS_ISA_DEFAULT=33\""}, {"sha": "cfdae5a1e61a2be0dd9016b041a28cb1a19b8161", "filename": "gcc/config/mips/linux64.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2Fconfig%2Fmips%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2Fconfig%2Fmips%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Flinux64.h?ref=bd5ab709de98ed49524b96cae15de692dd65a64d", "patch": "@@ -26,7 +26,7 @@ along with GCC; see the file COPYING3.  If not see\n   BASE_DRIVER_SELF_SPECS, \\\n   LINUX_DRIVER_SELF_SPECS \\\n   \" %{!EB:%{!EL:%(endian_spec)}}\" \\\n-  \" %{!mabi=*: -mabi=n32}\"\n+  \" %{!mabi=*: -\" MULTILIB_ABI_DEFAULT \"}\"\n \n #undef LIB_SPEC\n #define LIB_SPEC \"\\"}, {"sha": "326e6465afed3e8c7123930dccef6e7e514fc62c", "filename": "gcc/config/mips/t-linux64", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2Fconfig%2Fmips%2Ft-linux64", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd5ab709de98ed49524b96cae15de692dd65a64d/gcc%2Fconfig%2Fmips%2Ft-linux64", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Ft-linux64?ref=bd5ab709de98ed49524b96cae15de692dd65a64d", "patch": "@@ -17,7 +17,11 @@\n # <http://www.gnu.org/licenses/>.\n \n MULTILIB_OPTIONS = mabi=n32/mabi=32/mabi=64\n+ifneq ($(filter MIPS_ABI_DEFAULT=ABI_32,$(tm_defines)),)\n+MULTILIB_DIRNAMES = n32 . 64\n+else\n MULTILIB_DIRNAMES = n32 32 64\n+endif\n MULTILIB_OSDIRNAMES = ../lib32 ../lib ../lib64\n \n EXTRA_MULTILIB_PARTS=crtbegin.o crtend.o crtbeginS.o crtendS.o crtbeginT.o"}]}