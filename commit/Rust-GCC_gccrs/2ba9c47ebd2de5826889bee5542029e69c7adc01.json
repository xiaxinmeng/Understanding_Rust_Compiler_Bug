{"sha": "2ba9c47ebd2de5826889bee5542029e69c7adc01", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmJhOWM0N2ViZDJkZTU4MjY4ODliZWU1NTQyMDI5ZTY5YzdhZGMwMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2001-07-11T06:24:57Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2001-07-11T06:24:57Z"}, "message": "pt.c (tsubst_decl): Set DECL_CONTEXT for namespace-scope variables.\n\n\t* pt.c (tsubst_decl): Set DECL_CONTEXT for namespace-scope\n\tvariables.\n\nFrom-SVN: r43924", "tree": {"sha": "f94f395e0dfbb2305ee62e83935147dfac5c7069", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f94f395e0dfbb2305ee62e83935147dfac5c7069"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ba9c47ebd2de5826889bee5542029e69c7adc01", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ba9c47ebd2de5826889bee5542029e69c7adc01", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ba9c47ebd2de5826889bee5542029e69c7adc01", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ba9c47ebd2de5826889bee5542029e69c7adc01/comments", "author": null, "committer": null, "parents": [{"sha": "9556f88777b749e2e436b61073ea9d3c68630f42", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9556f88777b749e2e436b61073ea9d3c68630f42", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9556f88777b749e2e436b61073ea9d3c68630f42"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "d7a843f8ad5eee45c1924377a9097fcfeb80806c", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ba9c47ebd2de5826889bee5542029e69c7adc01/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ba9c47ebd2de5826889bee5542029e69c7adc01/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=2ba9c47ebd2de5826889bee5542029e69c7adc01", "patch": "@@ -1,3 +1,8 @@\n+2001-07-10  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* pt.c (tsubst_decl): Set DECL_CONTEXT for namespace-scope\n+\tvariables.\n+\n 2001-07-10  Jason Merrill  <jason_merrill@redhat.com>\n \n \t* semantics.c (cp_expand_stmt): Fix for null"}, {"sha": "3d6279a82823dd81224999c839c7ce80130b896c", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ba9c47ebd2de5826889bee5542029e69c7adc01/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ba9c47ebd2de5826889bee5542029e69c7adc01/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=2ba9c47ebd2de5826889bee5542029e69c7adc01", "patch": "@@ -5946,12 +5946,13 @@ tsubst_decl (t, args, type)\n \t  ctx = tsubst_aggr_type (DECL_CONTEXT (t), args, \n \t\t\t\t  /*complain=*/1,\n \t\t\t\t  in_decl, /*entering_scope=*/1);\n+\telse if (DECL_NAMESPACE_SCOPE_P (t))\n+\t  ctx = DECL_CONTEXT (t);\n \telse\n \t  {\n \t    /* Subsequent calls to pushdecl will fill this in.  */\n \t    ctx = NULL_TREE;\n-\t    if (!DECL_NAMESPACE_SCOPE_P (t))\n-\t      local_p = 1;\n+\t    local_p = 1;\n \t  }\n \n \t/* Check to see if we already have this specialization.  */"}, {"sha": "4b3f720e74bab5dbaf12ffd2d12a6d1b1df6210d", "filename": "gcc/testsuite/g++.old-deja/g++.ns/template18.C", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ba9c47ebd2de5826889bee5542029e69c7adc01/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Ftemplate18.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ba9c47ebd2de5826889bee5542029e69c7adc01/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Ftemplate18.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Ftemplate18.C?ref=2ba9c47ebd2de5826889bee5542029e69c7adc01", "patch": "@@ -0,0 +1,24 @@\n+// Build don't run:\n+// Origin: Andrey Slepuhin <pooh@msu.ru>\n+\n+namespace A\n+{\n+  int j;\n+\n+  template <typename val_t>\n+  struct X\n+  {\n+    inline X ()\n+    {\n+      extern int j;\n+      i = j;\n+    }\n+\n+    int i;\n+  };\n+}\n+\n+int main ()\n+{\n+  A::X<int> x;\n+}"}]}