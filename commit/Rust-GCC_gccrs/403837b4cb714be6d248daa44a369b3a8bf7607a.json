{"sha": "403837b4cb714be6d248daa44a369b3a8bf7607a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDAzODM3YjRjYjcxNGJlNmQyNDhkYWE0NGEzNjliM2E4YmY3NjA3YQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2014-08-28T06:21:44Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-08-28T06:21:44Z"}, "message": "alias.c: Include rtl-iter.h.\n\ngcc/\n\t* alias.c: Include rtl-iter.h.\n\t(refs_newer_value_cb): Delete.\n\t(refs_newer_value_p): Use FOR_EACH_SUBRTX instead of for_each_rtx.\n\nFrom-SVN: r214619", "tree": {"sha": "019ac44a843b533ab2e542ac3eb677683379fc3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/019ac44a843b533ab2e542ac3eb677683379fc3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/403837b4cb714be6d248daa44a369b3a8bf7607a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403837b4cb714be6d248daa44a369b3a8bf7607a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/403837b4cb714be6d248daa44a369b3a8bf7607a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/403837b4cb714be6d248daa44a369b3a8bf7607a/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "476dd0ce18abee7581ab669bb9d5b80dcac09d82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/476dd0ce18abee7581ab669bb9d5b80dcac09d82", "html_url": "https://github.com/Rust-GCC/gccrs/commit/476dd0ce18abee7581ab669bb9d5b80dcac09d82"}], "stats": {"total": 28, "additions": 13, "deletions": 15}, "files": [{"sha": "9ccf7bae5cafec5c1eec6043b24e013e862073a0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403837b4cb714be6d248daa44a369b3a8bf7607a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403837b4cb714be6d248daa44a369b3a8bf7607a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=403837b4cb714be6d248daa44a369b3a8bf7607a", "patch": "@@ -1,3 +1,9 @@\n+2014-08-28  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\t* alias.c: Include rtl-iter.h.\n+\t(refs_newer_value_cb): Delete.\n+\t(refs_newer_value_p): Use FOR_EACH_SUBRTX instead of for_each_rtx.\n+\n 2014-08-28  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* rtl-iter.h: New file."}, {"sha": "602e9e03a70b59a8eb0bfce74d1cc6e927cb6c09", "filename": "gcc/alias.c", "status": "modified", "additions": 7, "deletions": 15, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/403837b4cb714be6d248daa44a369b3a8bf7607a/gcc%2Falias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/403837b4cb714be6d248daa44a369b3a8bf7607a/gcc%2Falias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Falias.c?ref=403837b4cb714be6d248daa44a369b3a8bf7607a", "patch": "@@ -47,6 +47,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"is-a.h\"\n #include \"gimple.h\"\n #include \"gimple-ssa.h\"\n+#include \"rtl-iter.h\"\n \n /* The aliasing API provided here solves related but different problems:\n \n@@ -1851,27 +1852,18 @@ base_alias_check (rtx x, rtx x_base, rtx y, rtx y_base,\n   return 1;\n }\n \n-/* Callback for for_each_rtx, that returns 1 upon encountering a VALUE\n-   whose UID is greater than the int uid that D points to.  */\n-\n-static int\n-refs_newer_value_cb (rtx *x, void *d)\n-{\n-  if (GET_CODE (*x) == VALUE && CSELIB_VAL_PTR (*x)->uid > *(int *)d)\n-    return 1;\n-\n-  return 0;\n-}\n-\n /* Return TRUE if EXPR refers to a VALUE whose uid is greater than\n    that of V.  */\n \n static bool\n-refs_newer_value_p (rtx expr, rtx v)\n+refs_newer_value_p (const_rtx expr, rtx v)\n {\n   int minuid = CSELIB_VAL_PTR (v)->uid;\n-\n-  return for_each_rtx (&expr, refs_newer_value_cb, &minuid);\n+  subrtx_iterator::array_type array;\n+  FOR_EACH_SUBRTX (iter, array, expr, NONCONST)\n+    if (GET_CODE (*iter) == VALUE && CSELIB_VAL_PTR (*iter)->uid > minuid)\n+      return true;\n+  return false;\n }\n \n /* Convert the address X into something we can use.  This is done by returning"}]}