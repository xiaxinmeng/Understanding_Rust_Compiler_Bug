{"sha": "0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGNlMmIyOTkxYzZjZWYzZDY1MDU1Y2MwNmFkNzZhZWZmYjM1ODdhMw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2008-12-03T08:40:50Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2008-12-03T08:40:50Z"}, "message": "re PR rtl-optimization/38281 (segmentation fault with optimization enabled)\n\n\tPR rtl-optimization/38281\n\t* combine.c (distribute_notes): When invoking SET_INSN_DELETED on i2,\n\tset it to NULL_RTX afterwards.\n\n\t* emit-rtl.c (set_insn_deleted): Fix formatting.\n\nCo-Authored-By: Andrew Pinski <andrew_pinski@playstation.sony.com>\nCo-Authored-By: Jakub Jelinek <jakub@redhat.com>\n\nFrom-SVN: r142388", "tree": {"sha": "8997fcdef589e56a8ca3d3a251a0bc0305892e4b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8997fcdef589e56a8ca3d3a251a0bc0305892e4b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/comments", "author": null, "committer": null, "parents": [{"sha": "396315d951e6e0743fa9a55e9f8933e7fb5d1352", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/396315d951e6e0743fa9a55e9f8933e7fb5d1352", "html_url": "https://github.com/Rust-GCC/gccrs/commit/396315d951e6e0743fa9a55e9f8933e7fb5d1352"}], "stats": {"total": 45, "additions": 44, "deletions": 1}, "files": [{"sha": "a4afc7ebbd9e4e6fc6ed859dd265bc574c1b1903", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "patch": "@@ -1,3 +1,13 @@\n+2008-12-03  Eric Botcazou  <ebotcazou@adacore.com>\n+            Jakub Jelinek  <jakub@redhat.com>\n+            Andrew Pinski  <andrew_pinski@playstation.sony.com>\n+\n+\tPR rtl-optimization/38281\n+\t* combine.c (distribute_notes): When invoking SET_INSN_DELETED on i2,\n+\tset it to NULL_RTX afterwards.\n+\n+\t* emit-rtl.c (set_insn_deleted): Fix formatting.\n+\n 2008-12-02  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* config/mips/mips.c (mips_expand_builtin): Fix the mode of the"}, {"sha": "d6f7480223aaa96ccf30f9ec22254c2ebe8beb8c", "filename": "gcc/combine.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "patch": "@@ -12653,6 +12653,8 @@ distribute_notes (rtx notes, rtx from_insn, rtx i3, rtx i2, rtx elim_i2,\n \t\t\t  distribute_links (LOG_LINKS (tem));\n \n \t\t\t  SET_INSN_DELETED (tem);\n+\t\t\t  if (tem == i2)\n+\t\t\t    i2 = NULL_RTX;\n \n #ifdef HAVE_cc0\n \t\t\t  /* Delete the setter too.  */\n@@ -12668,6 +12670,8 @@ distribute_notes (rtx notes, rtx from_insn, rtx i3, rtx i2, rtx elim_i2,\n \t\t\t      distribute_links (LOG_LINKS (cc0_setter));\n \n \t\t\t      SET_INSN_DELETED (cc0_setter);\n+\t\t\t      if (cc0_setter == i2)\n+\t\t\t\ti2 = NULL_RTX;\n \t\t\t    }\n #endif\n \t\t\t}"}, {"sha": "0738f384497ed5a36d7e30cf571c86f812455e9d", "filename": "gcc/emit-rtl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Femit-rtl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Femit-rtl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Femit-rtl.c?ref=0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "patch": "@@ -3620,7 +3620,8 @@ add_insn_before (rtx insn, rtx before, basic_block bb)\n \n /* Replace insn with an deleted instruction note.  */\n \n-void set_insn_deleted (rtx insn)\n+void\n+set_insn_deleted (rtx insn)\n {\n   df_insn_delete (BLOCK_FOR_INSN (insn), INSN_UID (insn));\n   PUT_CODE (insn, NOTE);"}, {"sha": "a1623c9be97ceceffb7679fdfe9dfaf014a4b9ca", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "patch": "@@ -1,3 +1,7 @@\n+2008-12-03  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc.c-torture/compile/20081203-1.c: New test.\n+\n 2008-12-02  Jason Merrill  <jason@redhat.com>\n \n \tPR c++/35782, c++/37860"}, {"sha": "713235ff50fabdbfe54fbce62dacca1a33eb9b1c", "filename": "gcc/testsuite/gcc.c-torture/compile/20081203-1.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20081203-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ce2b2991c6cef3d65055cc06ad76aeffb3587a3/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20081203-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2F20081203-1.c?ref=0ce2b2991c6cef3d65055cc06ad76aeffb3587a3", "patch": "@@ -0,0 +1,24 @@\n+/* PR rtl-optimization/38281 */\n+/* Reporter: John Regehr <regehr@cs.utah.edu> */\n+/* Testcase by Jakub Jelinek <jakub@redhat.com> */\n+\n+inline unsigned short\n+foo (unsigned short x, unsigned short y)\n+{\n+  if (y == 0)\n+    return x;\n+  return x / y;\n+}\n+\n+unsigned short a, b, c;\n+\n+extern int baz (int, int);\n+\n+void\n+bar (void)\n+{\n+  int d = 0x3D75D162;\n+  a = foo (b > d, baz (0, 1));\n+  for (c = 0; c; c = 1)\n+    ;\n+}"}]}