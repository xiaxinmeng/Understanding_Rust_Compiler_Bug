{"sha": "cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2M1ZTFmYWI0MDRmNWM2YzZmNmY3ZTc5YzU2MjZmYzY4MWVhZTk3ZA==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2007-03-30T04:09:35Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2007-03-30T04:09:35Z"}, "message": "re PR libgcj/29869 (LogManager class loading failure with Tomcat)\n\nlibjava\n\tPR libgcj/29869:\n\t* java/util/logging/LogManager.java (readConfiguration): Handle\n\tcomma-separated 'handlers'.  Don't try to add a non-existing\n\thandler.\nlibgcj/classpath\n\tPR libgcj/29869:\n\t* gnu/java/util/jar/JarUtils.java (log): Commented out.\n\t(readSFManifest): Don't log.\n\nFrom-SVN: r123356", "tree": {"sha": "8b08d6e0dec0395e2de932fcd3c04af282a603c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b08d6e0dec0395e2de932fcd3c04af282a603c0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/comments", "author": null, "committer": null, "parents": [{"sha": "1a54978869b510d5b712778ae5e32521459f3791", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a54978869b510d5b712778ae5e32521459f3791", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a54978869b510d5b712778ae5e32521459f3791"}], "stats": {"total": 39, "additions": 32, "deletions": 7}, "files": [{"sha": "318a4c2837c5ca9b21d870be7aa51bd525eb298b", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "patch": "@@ -1,3 +1,10 @@\n+2007-03-29  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libgcj/29869:\n+\t* java/util/logging/LogManager.java (readConfiguration): Handle\n+\tcomma-separated 'handlers'.  Don't try to add a non-existing\n+\thandler.\n+\n 2007-03-27  Tom Tromey  <tromey@redhat.com>\n \n \t* sources.am, Makefile.in: Rebuilt."}, {"sha": "3d3d23fe9d30d0a0b2cfa3c26ccef8caece416cb", "filename": "libjava/classpath/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2FChangeLog?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "patch": "@@ -1,3 +1,9 @@\n+2007-03-29  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR libgcj/29869:\n+\t* gnu/java/util/jar/JarUtils.java (log): Commented out.\n+\t(readSFManifest): Don't log.\n+\n 2007-03-28  Casey Marshall  <csm@gnu.org>\n \n \t* gnu/javax/net/ssl/provider/ClientHandshake.java (RSAGen.implRun):"}, {"sha": "9debf647b6619176b8b30543f70ea34b370f633b", "filename": "libjava/classpath/gnu/java/util/jar/JarUtils.java", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Fgnu%2Fjava%2Futil%2Fjar%2FJarUtils.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Fgnu%2Fjava%2Futil%2Fjar%2FJarUtils.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Fgnu%2Fjava%2Futil%2Fjar%2FJarUtils.java?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "patch": "@@ -1,5 +1,5 @@\n /* JarUtils.java -- Utility methods for reading/writing Manifest[-like] files\n-   Copyright (C) 2006 Free Software Foundation, Inc.\n+   Copyright (C) 2006, 2007 Free Software Foundation, Inc.\n \n This file is part of GNU Classpath.\n \n@@ -62,7 +62,10 @@\n  */\n public abstract class JarUtils\n {\n-  private static final Logger log = Logger.getLogger(JarUtils.class.getName());\n+  // We used to log here, but this causes problems during bootstrap,\n+  // and it didn't seem worthwhile to preserve this.  Still, this\n+  // might be useful for debugging.\n+  // private static final Logger log = Logger.getLogger(JarUtils.class.getName());\n   public static final String META_INF = \"META-INF/\";\n   public static final String DSA_SUFFIX = \".DSA\";\n   public static final String SF_SUFFIX = \".SF\";\n@@ -112,9 +115,10 @@\n       {\n         String version = expectHeader(version_header, br);\n         attr.putValue(SIGNATURE_VERSION, version);\n-        if (! DEFAULT_SF_VERSION.equals(version))\n-          log.warning(\"Unexpected version number: \" + version\n-                      + \". Continue (but may fail later)\");\n+\t// This may cause problems during VM bootstrap.\n+        // if (! DEFAULT_SF_VERSION.equals(version))\n+        //  log.warning(\"Unexpected version number: \" + version\n+        //              + \". Continue (but may fail later)\");\n       }\n     catch (IOException ioe)\n       {"}, {"sha": "b2c6b893eb0cc38ce3f934aacb9020fc6a40e671", "filename": "libjava/classpath/lib/gnu/java/util/jar/JarUtils.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Flib%2Fgnu%2Fjava%2Futil%2Fjar%2FJarUtils.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Flib%2Fgnu%2Fjava%2Futil%2Fjar%2FJarUtils.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fgnu%2Fjava%2Futil%2Fjar%2FJarUtils.class?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d"}, {"sha": "737e5e643981132403b85c2dc9027e2ace4d7c51", "filename": "libjava/classpath/lib/java/util/logging/LogManager$1.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Flib%2Fjava%2Futil%2Flogging%2FLogManager%241.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Flib%2Fjava%2Futil%2Flogging%2FLogManager%241.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fjava%2Futil%2Flogging%2FLogManager%241.class?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d"}, {"sha": "2a4e0b0073a154cf900923533f0b30bb0ccc5e67", "filename": "libjava/classpath/lib/java/util/logging/LogManager.class", "status": "modified", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Flib%2Fjava%2Futil%2Flogging%2FLogManager.class", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fclasspath%2Flib%2Fjava%2Futil%2Flogging%2FLogManager.class", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fclasspath%2Flib%2Fjava%2Futil%2Flogging%2FLogManager.class?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d"}, {"sha": "811310c709d84835a62cdd56eda517295355c6d3", "filename": "libjava/java/util/logging/LogManager.java", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fjava%2Futil%2Flogging%2FLogManager.java", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d/libjava%2Fjava%2Futil%2Flogging%2FLogManager.java", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Futil%2Flogging%2FLogManager.java?ref=cc5e1fab404f5c6c6f6f7e79c5626fc681eae97d", "patch": "@@ -559,13 +559,21 @@ public synchronized void readConfiguration(InputStream inputStream)\n \n \tif (\"handlers\".equals(key))\n \t  {\n-\t    StringTokenizer tokenizer = new StringTokenizer(value);\n+\t    // In Java 5 and earlier this was specified to be\n+\t    // whitespace-separated, but in reality it also accepted\n+\t    // commas (tomcat relied on this), and in Java 6 the\n+\t    // documentation was updated to fit the implementation.\n+\t    StringTokenizer tokenizer = new StringTokenizer(value,\n+\t\t\t\t\t\t\t    \" \\t\\n\\r\\f,\");\n \t    while (tokenizer.hasMoreTokens())\n \t      {\n \t\tString handlerName = tokenizer.nextToken();\n                 Handler handler = (Handler)\n                   createInstance(handlerName, Handler.class, key);\n-                Logger.root.addHandler(handler);\n+\t\t// Tomcat also relies on the implementation ignoring\n+\t\t// items in 'handlers' which are not class names.\n+\t\tif (handler != null)\n+\t\t  Logger.root.addHandler(handler);\n \t      }\n \t  }\n "}]}