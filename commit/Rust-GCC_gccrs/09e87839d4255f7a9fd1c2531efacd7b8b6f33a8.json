{"sha": "09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDllODc4MzlkNDI1NWY3YTlmZDFjMjUzMWVmYWNkN2I4YjZmMzNhOA==", "commit": {"author": {"name": "Asher Langton", "email": "langton2@llnl.gov", "date": "2005-10-24T14:50:18Z"}, "committer": {"name": "Steven Bosscher", "email": "steven@gcc.gnu.org", "date": "2005-10-24T14:50:18Z"}, "message": "Commit for Asher Langton  <langton2@llnl.gov>\n\nfortran/\n        * decl.c (gfc_match_save): Changed duplicate SAVE errors to\n        warnings in the absence of strict standard conformance\n        * symbol.c (gfc_add_save): Same.\n\ntestsuite/\n\t* gfortran.dg/dup_save_1.f90: New test.\n\t* gfortran.dg/dup_save_2.f90: New test.\n\nFrom-SVN: r105850", "tree": {"sha": "a9bd12371703f8d2b1cef1390ea3e56d4e2cff82", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a9bd12371703f8d2b1cef1390ea3e56d4e2cff82"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/comments", "author": null, "committer": null, "parents": [{"sha": "aca2b8da2026c46d5ed9447823111a488d364135", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aca2b8da2026c46d5ed9447823111a488d364135", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aca2b8da2026c46d5ed9447823111a488d364135"}], "stats": {"total": 151, "additions": 141, "deletions": 10}, "files": [{"sha": "a019a1b25126fa707d666fe9cc7f8b2ba0554dec", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "patch": "@@ -1,3 +1,9 @@\n+2005-10-24  Asher Langton  <langton2@llnl.gov>\n+\n+\t* decl.c (gfc_match_save): Changed duplicate SAVE errors to\n+\twarnings in the absence of strict standard conformance\n+\t* symbol.c (gfc_add_save): Same.\n+\n 2005-10-24  Francois-Xavier Coudert  <coudert@clipper.ens.fr>\n \n \tPR fortran/15586"}, {"sha": "2ecd143190b7a5429e476dab9877232bc377b0a6", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "patch": "@@ -3271,10 +3271,11 @@ gfc_match_save (void)\n     {\n       if (gfc_current_ns->seen_save)\n \t{\n-\t  gfc_error (\"Blanket SAVE statement at %C follows previous \"\n-\t\t     \"SAVE statement\");\n-\n-\t  return MATCH_ERROR;\n+\t  if (gfc_notify_std (GFC_STD_LEGACY, \n+\t\t\t      \"Blanket SAVE statement at %C follows previous \"\n+\t\t\t      \"SAVE statement\")\n+\t      == FAILURE)\n+\t    return MATCH_ERROR;\n \t}\n \n       gfc_current_ns->save_all = gfc_current_ns->seen_save = 1;\n@@ -3283,8 +3284,10 @@ gfc_match_save (void)\n \n   if (gfc_current_ns->save_all)\n     {\n-      gfc_error (\"SAVE statement at %C follows blanket SAVE statement\");\n-      return MATCH_ERROR;\n+      if (gfc_notify_std (GFC_STD_LEGACY, \n+\t\t\t  \"SAVE statement at %C follows blanket SAVE statement\")\n+\t  == FAILURE)\n+\treturn MATCH_ERROR;\n     }\n \n   gfc_match (\" ::\");"}, {"sha": "c1221eb72a52afb26452c725481fc9869ecbc87c", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "patch": "@@ -681,8 +681,11 @@ gfc_add_save (symbol_attribute * attr, const char *name, locus * where)\n \n   if (attr->save)\n     {\n-      duplicate_attr (\"SAVE\", where);\n-      return FAILURE;\n+\tif (gfc_notify_std (GFC_STD_LEGACY, \n+\t\t\t    \"Duplicate SAVE attribute specified at %L\",\n+\t\t\t    where) \n+\t    == FAILURE)\n+\t  return FAILURE;\n     }\n \n   attr->save = 1;"}, {"sha": "e8f970349f6d96df253efe8434b38c2521ad42d5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "patch": "@@ -1,3 +1,8 @@\n+2005-10-24  Asher Langton  <langton2@llnl.gov>\n+\n+\t* gfortran.dg/dup_save_1.f90: New test.\n+\t* gfortran.dg/dup_save_2.f90: New test.\n+\n 2005-10-24  Paul Brook  <paul@codesourcery.com>\n \n \tPR 24107\n@@ -6,8 +11,8 @@\n \n 2005-10-23  Jerry DeLisle  <jvdelisle@verizon.net>\n \n-        PR libgfortran/24489\n-        * gfortran.dg/pr24489.f90: New test.\n+\tPR libgfortran/24489\n+\t* gfortran.dg/pr24489.f90: New test.\n \n 2005-10-23  Andrew Pinski  <pinskia@physics.uc.edu>\n "}, {"sha": "d7ce8e127e660114e53d00ed8d626e03737fe4a0", "filename": "gcc/testsuite/gfortran.dg/dup_save_1.f90", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_1.f90?ref=09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "patch": "@@ -0,0 +1,57 @@\n+! { dg-do run }\n+program save_1\n+  implicit none\n+  integer i\n+  integer foo1, foo2, foo3, foo4\n+  do i=1,10\n+     if (foo1().ne.i) then\n+        call abort\n+     end if\n+     if (foo2().ne.i) then\n+        call abort\n+     end if\n+     if (foo3().ne.i) then\n+        call abort\n+     end if\n+     if (foo4().ne.i) then\n+        call abort\n+     end if\n+  end do\n+end program save_1\n+\n+integer function foo1\n+  integer j\n+  save\n+  save ! { dg-warning \"Blanket SAVE\" }\n+  data j /0/\n+  j = j + 1\n+  foo1 = j\n+end function foo1\n+\n+integer function foo2\n+  integer j\n+  save j\n+  save j ! { dg-warning \"Duplicate SAVE\" }\n+  data j /0/\n+  j = j + 1\n+  foo2 = j\n+end function foo2\n+\n+integer function foo3\n+  integer j ! { dg-warning \"Duplicate SAVE\" }\n+  save\n+  save j ! { dg-warning \"SAVE statement\" }\n+  data j /0/\n+  j = j + 1\n+  foo3 = j\n+end function foo3\n+\n+integer function foo4\n+  integer j ! { dg-warning \"Duplicate SAVE\" }\n+  save j\n+  save\n+  data j /0/\n+  j = j + 1\n+  foo4 = j\n+end function foo4\n+"}, {"sha": "1c0bfdbe554470ecee508a099623a4d43c456919", "filename": "gcc/testsuite/gfortran.dg/dup_save_2.f90", "status": "added", "additions": 57, "deletions": 0, "changes": 57, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09e87839d4255f7a9fd1c2531efacd7b8b6f33a8/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fdup_save_2.f90?ref=09e87839d4255f7a9fd1c2531efacd7b8b6f33a8", "patch": "@@ -0,0 +1,57 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+program save_2\n+  implicit none\n+  integer i\n+  integer foo1, foo2, foo3, foo4\n+  do i=1,10\n+     if (foo1().ne.i) then\n+        call abort\n+     end if\n+     if (foo2().ne.i) then\n+        call abort\n+     end if\n+     if (foo3().ne.i) then\n+        call abort\n+     end if\n+     if (foo4().ne.i) then\n+        call abort\n+     end if\n+  end do\n+end program save_2\n+\n+integer function foo1\n+  integer j\n+  save\n+  save ! { dg-error \"Blanket SAVE\" }\n+  data j /0/\n+  j = j + 1\n+  foo1 = j\n+end function foo1\n+\n+integer function foo2\n+  integer j\n+  save j\n+  save j ! { dg-error \"Duplicate SAVE\" }\n+  data j /0/\n+  j = j + 1\n+  foo2 = j\n+end function foo2\n+\n+integer function foo3\n+  integer j\n+  save\n+  save j ! { dg-error \"SAVE statement\" }\n+  data j /0/\n+  j = j + 1\n+  foo3 = j\n+end function foo3\n+\n+integer function foo4\n+  integer j ! { dg-error \"Duplicate SAVE\" }\n+  save j\n+  save\n+  data j /0/\n+  j = j + 1\n+  foo4 = j\n+end function foo4"}]}