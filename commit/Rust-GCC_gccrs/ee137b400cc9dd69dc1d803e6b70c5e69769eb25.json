{"sha": "ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWUxMzdiNDAwY2M5ZGQ2OWRjMWQ4MDNlNmI3MGM1ZTY5NzY5ZWIyNQ==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2019-06-06T07:19:58Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2019-06-06T07:19:58Z"}, "message": "IPA ICF: enhance dump output\n\n2019-06-06  Martin Liska  <mliska@suse.cz>\n\n\t* ipa-icf-gimple.h (dump_message_1): Remove.\n\t(dump_message): Likewise.\n\t(return_false_with_message_1): Print also file.\n\t(return_false_with_msg): Likewise.\n\t(return_with_result): Likewise.\n\t(return_with_debug): Likewise.\n\t* ipa-icf.c (sem_function::equals_private): Remove call\n\tto dump_message.\n\nFrom-SVN: r271987", "tree": {"sha": "29406832c12c7da75dfe3ccd2b2f789124b24f00", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/29406832c12c7da75dfe3ccd2b2f789124b24f00"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "248fabe6a7a04a22079886b6eebc3e6758c2de1e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/248fabe6a7a04a22079886b6eebc3e6758c2de1e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/248fabe6a7a04a22079886b6eebc3e6758c2de1e"}], "stats": {"total": 44, "additions": 22, "deletions": 22}, "files": [{"sha": "27cff9a1bc92c5080db65efd89cdd73c3ecc0b45", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "patch": "@@ -1,3 +1,14 @@\n+2019-06-06  Martin Liska  <mliska@suse.cz>\n+\n+\t* ipa-icf-gimple.h (dump_message_1): Remove.\n+\t(dump_message): Likewise.\n+\t(return_false_with_message_1): Print also file.\n+\t(return_false_with_msg): Likewise.\n+\t(return_with_result): Likewise.\n+\t(return_with_debug): Likewise.\n+\t* ipa-icf.c (sem_function::equals_private): Remove call\n+\tto dump_message.\n+\n 2019-06-05  Hongtao Liu  <hongtao.liu@intel.com>\n \n \t* config/i386/sse.md (define_mode_suffix vecmemsuffix): New."}, {"sha": "351bddfb2f69736c4ddcb9c1fc2994fac265f695", "filename": "gcc/ipa-icf-gimple.h", "status": "modified", "additions": 11, "deletions": 20, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/gcc%2Fipa-icf-gimple.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/gcc%2Fipa-icf-gimple.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-icf-gimple.h?ref=ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "patch": "@@ -36,34 +36,22 @@ along with GCC; see the file COPYING3.  If not see\n #define FPRINTF_SPACES(file, space_count, format, ...) \\\n   fprintf (file, \"%*s\" format, space_count, \" \", ##__VA_ARGS__);\n \n-/* Prints a MESSAGE to dump_file if exists. FUNC is name of function and\n-   LINE is location in the source file.  */\n-\n-static inline void\n-dump_message_1 (const char *message, const char *func, unsigned int line)\n-{\n-  if (dump_file && (dump_flags & TDF_DETAILS))\n-    fprintf (dump_file, \"  debug message: %s (%s:%u)\\n\", message, func, line);\n-}\n-\n-/* Prints a MESSAGE to dump_file if exists.  */\n-#define dump_message(message) dump_message_1 (message, __func__, __LINE__)\n-\n /* Logs a MESSAGE to dump_file if exists and returns false. FUNC is name\n    of function and LINE is location in the source file.  */\n \n static inline bool\n-return_false_with_message_1 (const char *message, const char *func,\n-\t\t\t     unsigned int line)\n+return_false_with_message_1 (const char *message, const char *filename,\n+\t\t\t     const char *func, unsigned int line)\n {\n   if (dump_file && (dump_flags & TDF_DETAILS))\n-    fprintf (dump_file, \"  false returned: '%s' (%s:%u)\\n\", message, func, line);\n+    fprintf (dump_file, \"  false returned: '%s' in %s at %s:%u\\n\", message, func,\n+\t     filename, line);\n   return false;\n }\n \n /* Logs a MESSAGE to dump_file if exists and returns false.  */\n #define return_false_with_msg(message) \\\n-  return_false_with_message_1 (message, __func__, __LINE__)\n+  return_false_with_message_1 (message, __FILE__, __func__, __LINE__)\n \n /* Return false and log that false value is returned.  */\n #define return_false() return_false_with_msg (\"\")\n@@ -72,16 +60,19 @@ return_false_with_message_1 (const char *message, const char *func,\n    is location in the source file.  */\n \n static inline bool\n-return_with_result (bool result, const char *func, unsigned int line)\n+return_with_result (bool result, const char *filename,\n+\t\t    const char *func, unsigned int line)\n {\n   if (!result && dump_file && (dump_flags & TDF_DETAILS))\n-    fprintf (dump_file, \"  false returned: (%s:%u)\\n\", func, line);\n+    fprintf (dump_file, \"  false returned: '' in %s at %s:%u\\n\", func,\n+\t     filename, line);\n \n   return result;\n }\n \n /* Logs return value if RESULT is false.  */\n-#define return_with_debug(result) return_with_result (result, __func__, __LINE__)\n+#define return_with_debug(result) return_with_result \\\n+  (result, __FILE__, __func__, __LINE__)\n \n /* Verbose logging function logging statements S1 and S2 of a CODE.\n    FUNC is name of function and LINE is location in the source file.  */"}, {"sha": "6307407935fb147107ad8d698b0fd142c868b15e", "filename": "gcc/ipa-icf.c", "status": "modified", "additions": 0, "deletions": 2, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/gcc%2Fipa-icf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ee137b400cc9dd69dc1d803e6b70c5e69769eb25/gcc%2Fipa-icf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-icf.c?ref=ee137b400cc9dd69dc1d803e6b70c5e69769eb25", "patch": "@@ -882,8 +882,6 @@ sem_function::equals_private (sem_item *item)\n     if(!m_checker->compare_bb (bb_sorted[i], m_compared_func->bb_sorted[i]))\n       return return_false();\n \n-  dump_message (\"All BBs are equal\\n\");\n-\n   auto_vec <int> bb_dict;\n \n   /* Basic block edges check.  */"}]}