{"sha": "15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTVjNzIzZjM5ZmI1NWRhOWVlMGYyODhlY2FjMmMxNzhiNjhiMmEzYw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard@codesourcery.com", "date": "2007-07-02T19:20:33Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-07-02T19:20:33Z"}, "message": "configure.ac (gcc_gxx_include_dir): Use $(libsubdir_to_prefix).\n\ngcc/\n\t* configure.ac (gcc_gxx_include_dir): Use $(libsubdir_to_prefix).\n\t(gcc_tooldir): Likewise.\n\t* configure: Regenerate.\n\t* Makefile.in (libsubdir_to_prefix): New variable, based on the\n\told configure.ac gcc_tooldir setting.\n\t(prefix_to_exec_prefix): New variable.\n\t(DRIVER_DEFINES): Use $(libsubdir_to_prefix)$(prefix_to_exec_prefix)\n\trather than $(unlibsubdir)/../ to derive TOOLDIR_BASE_PREFIX.\n\nFrom-SVN: r126225", "tree": {"sha": "c1e48ba268114a27caf7ec663f5a08c72ad10388", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1e48ba268114a27caf7ec663f5a08c72ad10388"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/comments", "author": null, "committer": null, "parents": [{"sha": "4f9c450c2fbfd415a7e39552a3d8b170e2518b72", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4f9c450c2fbfd415a7e39552a3d8b170e2518b72", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4f9c450c2fbfd415a7e39552a3d8b170e2518b72"}], "stats": {"total": 121, "additions": 46, "deletions": 75}, "files": [{"sha": "f651d00d835548b3b51bbdaef743274d6dc27a24", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "patch": "@@ -1,3 +1,14 @@\n+2007-07-02  Richard Sandiford  <richard@codesourcery.com>\n+\n+\t* configure.ac (gcc_gxx_include_dir): Use $(libsubdir_to_prefix).\n+\t(gcc_tooldir): Likewise.\n+\t* configure: Regenerate.\n+\t* Makefile.in (libsubdir_to_prefix): New variable, based on the\n+\told configure.ac gcc_tooldir setting.\n+\t(prefix_to_exec_prefix): New variable.\n+\t(DRIVER_DEFINES): Use $(libsubdir_to_prefix)$(prefix_to_exec_prefix)\n+\trather than $(unlibsubdir)/../ to derive TOOLDIR_BASE_PREFIX.\n+\n 2007-07-02  Daniel Berlin  <dberlin@dberlin.org>\n \n \tFix PR tree-optimization/32583"}, {"sha": "61c51856b12ea83ae551e8f4619ab4dce8a63376", "filename": "gcc/Makefile.in", "status": "modified", "additions": 31, "deletions": 1, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "patch": "@@ -458,6 +458,36 @@ libsubdir = $(libdir)/gcc/$(target_noncanonical)/$(version)\n libexecsubdir = $(libexecdir)/gcc/$(target_noncanonical)/$(version)\n # Used to produce a relative $(gcc_tooldir) in gcc.o\n unlibsubdir = ../../..\n+# $(prefix), expressed as a path relative to $(libsubdir).\n+#\n+# An explanation of the sed strings:\n+#  -e 's|^$(prefix)||'   matches and eliminates 'prefix' from 'exec_prefix'\n+#  -e 's|/$$||'          match a trailing forward slash and eliminates it\n+#  -e 's|^[^/]|/|'       forces the string to start with a forward slash (*)\n+#  -e 's|/[^/]*|../|g'   replaces each occurrence of /<directory> with ../\n+#\n+# (*) Note this pattern overwrites the first character of the string\n+# with a forward slash if one is not already present.  This is not a\n+# problem because the exact names of the sub-directories concerned is\n+# unimportant, just the number of them matters.\n+#\n+# The practical upshot of these patterns is like this:\n+#\n+#  prefix     exec_prefix        result\n+#  ------     -----------        ------\n+#   /foo        /foo/bar          ../\n+#   /foo/       /foo/bar          ../\n+#   /foo        /foo/bar/         ../\n+#   /foo/       /foo/bar/         ../\n+#   /foo        /foo/bar/ugg      ../../\n+libsubdir_to_prefix := \\\n+  $(unlibsubdir)/$(shell echo \"$(libdir)\" | \\\n+    sed -e 's|^$(prefix)||' -e 's|/$$||' -e 's|^[^/]|/|' \\\n+        -e 's|/[^/]*|../|g')\n+# $(exec_prefix), expressed as a path relative to $(prefix).\n+prefix_to_exec_prefix := \\\n+  $(shell echo \"$(exec_prefix)\" | \\\n+    sed -e 's|^$(prefix)||' -e 's|^/||' -e '/./s|$$|/|')\n # Directory in which to find other cross-compilation tools and headers.\n dollar = @dollar@\n # Used in install-cross.\n@@ -1791,7 +1821,7 @@ DRIVER_DEFINES = \\\n   -DDEFAULT_TARGET_VERSION=\\\"$(version)\\\" \\\n   -DDEFAULT_TARGET_MACHINE=\\\"$(target_noncanonical)\\\" \\\n   -DSTANDARD_BINDIR_PREFIX=\\\"$(bindir)/\\\" \\\n-  -DTOOLDIR_BASE_PREFIX=\\\"$(unlibsubdir)/../\\\" \\\n+  -DTOOLDIR_BASE_PREFIX=\\\"$(libsubdir_to_prefix)$(prefix_to_exec_prefix)\\\" \\\n   @TARGET_SYSTEM_ROOT_DEFINE@ \\\n   $(VALGRIND_DRIVER_DEFINES) \\\n   `test \"X$${SHLIB_LINK}\" = \"X\" || test \"@enable_shared@\" != \"yes\" || echo \"-DENABLE_SHARED_LIBGCC\"` \\"}, {"sha": "2981115ecce33509ad9a1a04f6a575cebf279d4d", "filename": "gcc/configure", "status": "modified", "additions": 2, "deletions": 35, "changes": 37, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "patch": "@@ -1688,7 +1688,7 @@ if test x${gcc_gxx_include_dir} = x; then\n     if test x$host != x$target; then\n        libstdcxx_incdir=\"$target_alias/$libstdcxx_incdir\"\n     fi\n-    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/$libstdcxx_incdir\"\n+    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(libsubdir_to_prefix)$libstdcxx_incdir\"\n   fi\n fi\n \n@@ -16855,40 +16855,7 @@ if test \"x$subdirs\" != x; then\n fi\n echo \"source ${srcdir}/gdbinit.in\" >> .gdbinit\n \n-# If $(exec_prefix) exists and is not the same as $(prefix), then compute an\n-# absolute path for gcc_tooldir based on inserting the number of up-directory\n-# movements required to get from $(exec_prefix) to $(prefix) into the basic\n-# $(libsubdir)/@(unlibsubdir) based path.\n-# Don't set gcc_tooldir to tooldir since that's only passed in by the toplevel\n-# make and thus we'd get different behavior depending on where we built the\n-# sources.\n-if test x$exec_prefix = xNONE -o x$exec_prefix = x$prefix; then\n-    gcc_tooldir='$(libsubdir)/$(unlibsubdir)/../$(target_noncanonical)'\n-else\n-# An explanation of the sed strings:\n-#  -e 's|^\\$(prefix)||'   matches and eliminates 'prefix' from 'exec_prefix'\n-#  -e 's|/$||'            match a trailing forward slash and eliminates it\n-#  -e 's|^[^/]|/|'        forces the string to start with a forward slash (*)\n-#  -e 's|/[^/]*|../|g'    replaces each occurrence of /<directory> with ../\n-#\n-# (*) Note this pattern overwrites the first character of the string\n-# with a forward slash if one is not already present.  This is not a\n-# problem because the exact names of the sub-directories concerned is\n-# unimportant, just the number of them matters.\n-#\n-# The practical upshot of these patterns is like this:\n-#\n-#  prefix     exec_prefix        result\n-#  ------     -----------        ------\n-#   /foo        /foo/bar          ../\n-#   /foo/       /foo/bar          ../\n-#   /foo        /foo/bar/         ../\n-#   /foo/       /foo/bar/         ../\n-#   /foo        /foo/bar/ugg      ../../\n-#\n-    dollar='$$'\n-    gcc_tooldir=\"\\$(libsubdir)/\\$(unlibsubdir)/\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/\\$(dollar)||' -e 's|^[^/]|/|' -e 's|/[^/]*|../|g'\\`\\$(target_noncanonical)\"\n-fi\n+gcc_tooldir='$(libsubdir)/$(libsubdir_to_prefix)$(target_noncanonical)'\n \n \n "}, {"sha": "2ec7c31b0dfcdb246094c2c9dfbb31200a42fae3", "filename": "gcc/configure.ac", "status": "modified", "additions": 2, "deletions": 39, "changes": 41, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/15c723f39fb55da9ee0f288ecac2c178b68b2a3c/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=15c723f39fb55da9ee0f288ecac2c178b68b2a3c", "patch": "@@ -141,9 +141,7 @@ if test x${gcc_gxx_include_dir} = x; then\n     if test x$host != x$target; then\n        libstdcxx_incdir=\"$target_alias/$libstdcxx_incdir\"\n     fi\n-changequote(<<, >>)dnl\n-    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(unlibsubdir)/..\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/[^/]*|/..|g'\\`/$libstdcxx_incdir\"\n-changequote([, ])dnl\n+    gcc_gxx_include_dir=\"\\$(libsubdir)/\\$(libsubdir_to_prefix)$libstdcxx_incdir\"\n   fi\n fi\n \n@@ -3603,42 +3601,7 @@ if test \"x$subdirs\" != x; then\n fi\n echo \"source ${srcdir}/gdbinit.in\" >> .gdbinit\n \n-# If $(exec_prefix) exists and is not the same as $(prefix), then compute an\n-# absolute path for gcc_tooldir based on inserting the number of up-directory\n-# movements required to get from $(exec_prefix) to $(prefix) into the basic\n-# $(libsubdir)/@(unlibsubdir) based path.\n-# Don't set gcc_tooldir to tooldir since that's only passed in by the toplevel\n-# make and thus we'd get different behavior depending on where we built the\n-# sources.\n-if test x$exec_prefix = xNONE -o x$exec_prefix = x$prefix; then\n-    gcc_tooldir='$(libsubdir)/$(unlibsubdir)/../$(target_noncanonical)'\n-else\n-changequote(<<, >>)dnl\n-# An explanation of the sed strings:\n-#  -e 's|^\\$(prefix)||'   matches and eliminates 'prefix' from 'exec_prefix'\n-#  -e 's|/$||'            match a trailing forward slash and eliminates it\n-#  -e 's|^[^/]|/|'        forces the string to start with a forward slash (*)\n-#  -e 's|/[^/]*|../|g'    replaces each occurrence of /<directory> with ../\n-#\n-# (*) Note this pattern overwrites the first character of the string\n-# with a forward slash if one is not already present.  This is not a\n-# problem because the exact names of the sub-directories concerned is\n-# unimportant, just the number of them matters.\n-#\n-# The practical upshot of these patterns is like this:\n-#\n-#  prefix     exec_prefix        result\n-#  ------     -----------        ------\n-#   /foo        /foo/bar          ../\n-#   /foo/       /foo/bar          ../\n-#   /foo        /foo/bar/         ../\n-#   /foo/       /foo/bar/         ../\n-#   /foo        /foo/bar/ugg      ../../\n-#\n-    dollar='$$'\n-    gcc_tooldir=\"\\$(libsubdir)/\\$(unlibsubdir)/\\`echo \\$(exec_prefix) | sed -e 's|^\\$(prefix)||' -e 's|/\\$(dollar)||' -e 's|^[^/]|/|' -e 's|/[^/]*|../|g'\\`\\$(target_noncanonical)\"\n-changequote([, ])dnl\n-fi\n+gcc_tooldir='$(libsubdir)/$(libsubdir_to_prefix)$(target_noncanonical)'\n AC_SUBST(gcc_tooldir)\n AC_SUBST(dollar)\n "}]}