{"sha": "14b4829dfde2a20e4f8277eeaaa00e119ba97471", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRiNDgyOWRmZGUyYTIwZTRmODI3N2VlYWFhMDBlMTE5YmE5NzQ3MQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2002-10-31T16:07:32Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2002-10-31T16:07:32Z"}, "message": "cp-tree.h (lang_decl_flags): Remove init_priority.\n\n\t* cp-tree.h (lang_decl_flags): Remove init_priority.\n\t(lang_decl): Add delta.\n\t(GLOBAL_INIT_PRIORITY): Remove.\n\t(THUNK_DELTA): Revise definition.\n\t* decl2.c (start_objects): Don't set GLOBAL_INIT_PRIORITY.\n\t* dump.c (cp_dump_tree): Don't dump it.\n\nFrom-SVN: r58680", "tree": {"sha": "79a270860192fd7f71f8b6195aa154937df94a9f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/79a270860192fd7f71f8b6195aa154937df94a9f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14b4829dfde2a20e4f8277eeaaa00e119ba97471", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14b4829dfde2a20e4f8277eeaaa00e119ba97471", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14b4829dfde2a20e4f8277eeaaa00e119ba97471", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14b4829dfde2a20e4f8277eeaaa00e119ba97471/comments", "author": null, "committer": null, "parents": [{"sha": "f7e5dfbd025de3610853a55655129e10fd9076b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f7e5dfbd025de3610853a55655129e10fd9076b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f7e5dfbd025de3610853a55655129e10fd9076b6"}], "stats": {"total": 29, "additions": 15, "deletions": 14}, "files": [{"sha": "0f7653c09ce2aece630c653cc66612f4994c5431", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=14b4829dfde2a20e4f8277eeaaa00e119ba97471", "patch": "@@ -1,3 +1,12 @@\n+2002-10-31  Mark Mitchell  <mark@codesourcery.com>\n+\n+\t* cp-tree.h (lang_decl_flags): Remove init_priority.\n+\t(lang_decl): Add delta.\n+\t(GLOBAL_INIT_PRIORITY): Remove.\n+\t(THUNK_DELTA): Revise definition.\n+\t* decl2.c (start_objects): Don't set GLOBAL_INIT_PRIORITY.\n+\t* dump.c (cp_dump_tree): Don't dump it.\n+\n 2002-10-30  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/8160"}, {"sha": "f74c58ef9b6a89e1a0fd9d5f0248520cecb7d16d", "filename": "gcc/cp/cp-tree.h", "status": "modified", "additions": 6, "deletions": 12, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2Fcp-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2Fcp-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcp-tree.h?ref=14b4829dfde2a20e4f8277eeaaa00e119ba97471", "patch": "@@ -1747,10 +1747,6 @@ struct lang_decl_flags GTY(())\n     /* For VAR_DECL in function, this is DECL_DISCRIMINATOR.  */\n     int discriminator;\n \n-    /* In a namespace-scope FUNCTION_DECL, this is\n-       GLOBAL_INIT_PRIORITY.  */\n-    int init_priority;\n-\n     /* In a FUNCTION_DECL for which DECL_THUNK_P holds, this is\n        THUNK_VCALL_OFFSET.  */\n     tree GTY((tag (\"2\"))) vcall_offset;\n@@ -1775,6 +1771,10 @@ struct lang_decl GTY(())\n \t/* In a FUNCTION_DECL, this is DECL_CLONED_FUNCTION.  */\n \ttree cloned_function;\n \t\n+\t/* In a FUNCTION_DECL for which THUNK_P holds, this is\n+\t   THUNK_DELTA.  */\n+\tHOST_WIDE_INT delta;\n+\n \t/* In an overloaded operator, this is the value of\n \t   DECL_OVERLOADED_OPERATOR_P.  */\n \tenum tree_code operator_code;\n@@ -2689,13 +2689,6 @@ struct lang_decl GTY(())\n #define DECL_GLOBAL_DTOR_P(NODE) \\\n   (DECL_LANG_SPECIFIC (NODE)->decl_flags.global_dtor_p)\n \n-/* If DECL_GLOBAL_CTOR_P or DECL_GLOBAL_DTOR_P holds, this macro\n-   returns the initialization priority for the function.  Constructors\n-   with lower numbers should be run first.  Destructors should be run\n-   in the reverse order of constructors.  */\n-#define GLOBAL_INIT_PRIORITY(NODE) \\\n-  (LANG_DECL_U2_CHECK (NODE, 1)->init_priority)\n-\n /* Accessor macros for C++ template decl nodes.  */\n \n /* The DECL_TEMPLATE_PARMS are a list.  The TREE_PURPOSE of each node\n@@ -2935,7 +2928,8 @@ struct lang_decl GTY(())\n \n /* An integer indicating how many bytes should be subtracted from the\n    `this' pointer when this function is called.  */\n-#define THUNK_DELTA(DECL) (DECL_CHECK (DECL)->decl.u1.i)\n+#define THUNK_DELTA(DECL) \\\n+  (DECL_LANG_SPECIFIC (DECL)->u.f.delta)\n \n /* A tree indicating how many bytes should be subtracted from the\n    vtable for the `this' pointer to find the vcall offset.  (The vptr"}, {"sha": "9461174eb60f120b6f609b2a738ad21ff43656cc", "filename": "gcc/cp/decl2.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2Fdecl2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2Fdecl2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl2.c?ref=14b4829dfde2a20e4f8277eeaaa00e119ba97471", "patch": "@@ -2144,7 +2144,6 @@ start_objects (method_type, initp)\n   else\n     DECL_GLOBAL_DTOR_P (current_function_decl) = 1;\n   DECL_LANG_SPECIFIC (current_function_decl)->decl_flags.u2sel = 1;\n-  GLOBAL_INIT_PRIORITY (current_function_decl) = initp;\n \n   body = begin_compound_stmt (/*has_no_scope=*/0);\n "}, {"sha": "c4472b07359662df23a7d1d4b618ec39fb834682", "filename": "gcc/cp/dump.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2Fdump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14b4829dfde2a20e4f8277eeaaa00e119ba97471/gcc%2Fcp%2Fdump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdump.c?ref=14b4829dfde2a20e4f8277eeaaa00e119ba97471", "patch": "@@ -323,7 +323,6 @@ cp_dump_tree (dump_info, t)\n \t\tdump_string (di, \"global init\");\n \t      if (DECL_GLOBAL_DTOR_P (t))\n \t\tdump_string (di, \"global fini\");\n-\t      dump_int (di, \"prio\", GLOBAL_INIT_PRIORITY (t));\n \t    }\n \t  if (DECL_FRIEND_PSEUDO_TEMPLATE_INSTANTIATION (t))\n \t    dump_string (di, \"pseudo tmpl\");"}]}