{"sha": "a14713223feae48a1a8c6b5883e9fedcfce44894", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE0NzEzMjIzZmVhZTQ4YTFhOGM2YjU4ODNlOWZlZGNmY2U0NDg5NA==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@vlsi1.ultra.nyu.edu", "date": "2002-04-02T12:00:30Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "2002-04-02T12:00:30Z"}, "message": "stor-layout.c (layout_type, [...]): Give one-element array the same mode as its component.\n\n\t* stor-layout.c (layout_type, case ARRAY_TYPE): Give one-element array\n\tthe same mode as its component.\n\nFrom-SVN: r51745", "tree": {"sha": "fa0d60aadbc1e4eb5c5c7d47e9d9b0f971548fdb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fa0d60aadbc1e4eb5c5c7d47e9d9b0f971548fdb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a14713223feae48a1a8c6b5883e9fedcfce44894", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a14713223feae48a1a8c6b5883e9fedcfce44894", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a14713223feae48a1a8c6b5883e9fedcfce44894", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a14713223feae48a1a8c6b5883e9fedcfce44894/comments", "author": null, "committer": null, "parents": [{"sha": "c8b947688ff5b2a16d7b79a8c8cc1170cc0c227e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c8b947688ff5b2a16d7b79a8c8cc1170cc0c227e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c8b947688ff5b2a16d7b79a8c8cc1170cc0c227e"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "3cb11a0e53512cda4bebc8890299182ee29b7632", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a14713223feae48a1a8c6b5883e9fedcfce44894/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a14713223feae48a1a8c6b5883e9fedcfce44894/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a14713223feae48a1a8c6b5883e9fedcfce44894", "patch": "@@ -1,3 +1,8 @@\n+Tue Apr  2 06:47:40 2002  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n+\n+\t* stor-layout.c (layout_type, case ARRAY_TYPE): Give one-element array\n+\tthe same mode as its component.\n+\n 2002-04-02  Richard Henderson  <rth@redhat.com>\n \n \tPR opt/190"}, {"sha": "baf26dddba1ac6ffae37f0ff14621490f1499a09", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a14713223feae48a1a8c6b5883e9fedcfce44894/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a14713223feae48a1a8c6b5883e9fedcfce44894/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=a14713223feae48a1a8c6b5883e9fedcfce44894", "patch": "@@ -1584,8 +1584,13 @@ layout_type (type)\n \t    && (TYPE_MODE (TREE_TYPE (type)) != BLKmode\n \t\t|| TYPE_NO_FORCE_BLK (TREE_TYPE (type))))\n \t  {\n-\t    TYPE_MODE (type)\n-\t      = mode_for_size_tree (TYPE_SIZE (type), MODE_INT, 1);\n+\t    /* One-element arrays get the component type's mode.  */\n+\t    if (simple_cst_equal (TYPE_SIZE (type),\n+\t\t\t\t  TYPE_SIZE (TREE_TYPE (type))))\n+\t      TYPE_MODE (type) = TYPE_MODE (TREE_TYPE (type));\n+\t    else\n+\t      TYPE_MODE (type)\n+\t\t= mode_for_size_tree (TYPE_SIZE (type), MODE_INT, 1);\n \n \t    if (TYPE_MODE (type) != BLKmode\n \t\t&& STRICT_ALIGNMENT && TYPE_ALIGN (type) < BIGGEST_ALIGNMENT"}]}