{"sha": "5d1a0108f1b72f8cb3224cc465b2f67421210181", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQxYTAxMDhmMWI3MmY4Y2IzMjI0Y2M0NjViMmY2NzQyMTIxMDE4MQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2013-11-20T10:31:24Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2013-11-20T10:31:24Z"}, "message": "re PR target/59035 (FAIL: gcc.dg/torture/c99-contract-1.c  -O2 -flto -fno-use-linker-plugin -flto-partition=none  execution test)\n\n2013-11-20  Richard Biener  <rguenther@suse.de>\n\n\tPR lto/59035\n\t* lto-opts.c (lto_write_options): Write defaults only if\n\tthey were not explicitely specified.  Also write\n\t-ffp-contract default.\n\t* lto-wrapper.c (merge_and_complain): Merge -ffp-contract\n\tconservatively.\n\t(run_gcc): Pass through -ffp-contract.\n\nFrom-SVN: r205096", "tree": {"sha": "e3cdaaeaa9d8ca6484fca76ec6770b667d08d60f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3cdaaeaa9d8ca6484fca76ec6770b667d08d60f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d1a0108f1b72f8cb3224cc465b2f67421210181", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d1a0108f1b72f8cb3224cc465b2f67421210181", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d1a0108f1b72f8cb3224cc465b2f67421210181", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d1a0108f1b72f8cb3224cc465b2f67421210181/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d6e193b3e4809f3b3d309819566fa4ee5b837636", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6e193b3e4809f3b3d309819566fa4ee5b837636", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6e193b3e4809f3b3d309819566fa4ee5b837636"}], "stats": {"total": 48, "additions": 46, "deletions": 2}, "files": [{"sha": "2bd67d0ef4954bb1d09c588e181f5689c6eb1c22", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d1a0108f1b72f8cb3224cc465b2f67421210181/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d1a0108f1b72f8cb3224cc465b2f67421210181/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5d1a0108f1b72f8cb3224cc465b2f67421210181", "patch": "@@ -1,3 +1,13 @@\n+2013-11-20  Richard Biener  <rguenther@suse.de>\n+\n+\tPR lto/59035\n+\t* lto-opts.c (lto_write_options): Write defaults only if\n+\tthey were not explicitely specified.  Also write\n+\t-ffp-contract default.\n+\t* lto-wrapper.c (merge_and_complain): Merge -ffp-contract\n+\tconservatively.\n+\t(run_gcc): Pass through -ffp-contract.\n+\n 2013-11-20  Jan-Benedict Glaw  <jbglaw@lug-owl.de>\n \n \t* config/mips/mips.c (r10k_simplify_address): Eliminate macro usage."}, {"sha": "2cb536bfc558bba9887cc557e3ee1065fd226201", "filename": "gcc/lto-opts.c", "status": "modified", "additions": 23, "deletions": 2, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d1a0108f1b72f8cb3224cc465b2f67421210181/gcc%2Flto-opts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d1a0108f1b72f8cb3224cc465b2f67421210181/gcc%2Flto-opts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-opts.c?ref=5d1a0108f1b72f8cb3224cc465b2f67421210181", "patch": "@@ -85,14 +85,35 @@ lto_write_options (void)\n      function rather than per compilation unit.  */\n   /* -fexceptions causes the EH machinery to be initialized, enabling\n      generation of unwind data so that explicit throw() calls work.  */\n-  if (global_options.x_flag_exceptions)\n+  if (!global_options_set.x_flag_exceptions\n+      && global_options.x_flag_exceptions)\n     append_to_collect_gcc_options (&temporary_obstack, &first_p,\n \t\t\t\t   \"-fexceptions\");\n   /* -fnon-call-exceptions changes the generation of exception\n       regions.  It is enabled implicitly by the Go frontend.  */\n-  if (global_options.x_flag_non_call_exceptions)\n+  if (!global_options_set.x_flag_non_call_exceptions\n+      && global_options.x_flag_non_call_exceptions)\n     append_to_collect_gcc_options (&temporary_obstack, &first_p,\n \t\t\t\t   \"-fnon-call-exceptions\");\n+  /* The default -ffp-contract changes depending on the language\n+     standard.  Pass thru conservative standard settings.  */\n+  if (!global_options_set.x_flag_fp_contract_mode)\n+    switch (global_options.x_flag_fp_contract_mode)\n+      {\n+      case FP_CONTRACT_OFF:\n+\tappend_to_collect_gcc_options (&temporary_obstack, &first_p,\n+\t\t\t\t       \"-ffp-contract=off\");\n+\tbreak;\n+      case FP_CONTRACT_ON:\n+\tappend_to_collect_gcc_options (&temporary_obstack, &first_p,\n+\t\t\t\t       \"-ffp-contract=on\");\n+\tbreak;\n+      case FP_CONTRACT_FAST:\n+\t/* Nothing.  That merges conservatively and is the default for LTO.  */\n+\tbreak;\n+      default:\n+\tgcc_unreachable ();\n+      }\n \n   /* Output explicitly passed options.  */\n   for (i = 1; i < save_decoded_options_count; ++i)"}, {"sha": "335ec8fd01aeaa50283c01b2737d8009c06801c5", "filename": "gcc/lto-wrapper.c", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d1a0108f1b72f8cb3224cc465b2f67421210181/gcc%2Flto-wrapper.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d1a0108f1b72f8cb3224cc465b2f67421210181/gcc%2Flto-wrapper.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-wrapper.c?ref=5d1a0108f1b72f8cb3224cc465b2f67421210181", "patch": "@@ -422,6 +422,18 @@ merge_and_complain (struct cl_decoded_option **decoded_options,\n \t    append_option (decoded_options, decoded_options_count, foption);\n \t  break;\n \n+\tcase OPT_ffp_contract_:\n+\t  /* For selected options we can merge conservatively.  */\n+\t  for (j = 0; j < *decoded_options_count; ++j)\n+\t    if ((*decoded_options)[j].opt_index == foption->opt_index)\n+\t      break;\n+\t  if (j == *decoded_options_count)\n+\t    append_option (decoded_options, decoded_options_count, foption);\n+\t  /* FP_CONTRACT_OFF < FP_CONTRACT_ON < FP_CONTRACT_FAST.  */\n+\t  else if (foption->value < (*decoded_options)[j].value)\n+\t    (*decoded_options)[j] = *foption;\n+\t  break;\n+\n \tcase OPT_freg_struct_return:\n \tcase OPT_fpcc_struct_return:\n \t  for (j = 0; j < *decoded_options_count; ++j)\n@@ -578,6 +590,7 @@ run_gcc (unsigned argc, char *argv[])\n \tcase OPT_fgnu_tm:\n \tcase OPT_freg_struct_return:\n \tcase OPT_fpcc_struct_return:\n+\tcase OPT_ffp_contract_:\n \t  break;\n \n \tdefault:"}]}