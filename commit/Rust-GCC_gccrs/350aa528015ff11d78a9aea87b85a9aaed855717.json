{"sha": "350aa528015ff11d78a9aea87b85a9aaed855717", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzUwYWE1MjgwMTVmZjExZDc4YTlhZWE4N2I4NWE5YWFlZDg1NTcxNw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-11-05T04:04:24Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2014-11-05T04:04:24Z"}, "message": "go-test.exp: In +build lines, require whitespace around expected strings, fix check for negation.\n\n\t* go.test/go-test.exp: In +build lines, require whitespace around\n\texpected strings, fix check for negation.\n\nFrom-SVN: r217111", "tree": {"sha": "6fe3eb8b908af8dfa452dfaf290c3943ba91e5df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6fe3eb8b908af8dfa452dfaf290c3943ba91e5df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/350aa528015ff11d78a9aea87b85a9aaed855717", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/350aa528015ff11d78a9aea87b85a9aaed855717", "html_url": "https://github.com/Rust-GCC/gccrs/commit/350aa528015ff11d78a9aea87b85a9aaed855717", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/350aa528015ff11d78a9aea87b85a9aaed855717/comments", "author": null, "committer": null, "parents": [{"sha": "c9bc4e2d2bf5d5967754a16fd93af2c48c0f4533", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c9bc4e2d2bf5d5967754a16fd93af2c48c0f4533", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c9bc4e2d2bf5d5967754a16fd93af2c48c0f4533"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "71272a3aa90f0618f0619f77e99605237e961819", "filename": "gcc/testsuite/go.test/go-test.exp", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/350aa528015ff11d78a9aea87b85a9aaed855717/gcc%2Ftestsuite%2Fgo.test%2Fgo-test.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/350aa528015ff11d78a9aea87b85a9aaed855717/gcc%2Ftestsuite%2Fgo.test%2Fgo-test.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgo.test%2Fgo-test.exp?ref=350aa528015ff11d78a9aea87b85a9aaed855717", "patch": "@@ -449,13 +449,22 @@ proc go-gc-tests { } {\n \t    }\n \n \t    if { [ string match \"// +build *\" $test_line ] } {\n-\t\tif { [ string match \"*[getenv GOARCH]*\" $test_line ] } {\n-\t\t    continue\n-\t\t}\n-\t\tif { [ string match \"*linux*\" $test_line ] } {\n-\t\t    continue\n+\t\tset matches_pos 0\n+\t\tset matches_neg 0\n+\t\tif { [ regexp -line \"\\[ \t\\][getenv GOARCH]\\(\\[ \t\\]\\|\\$\\)\" $test_line ] } {\n+\t\t    set matches_pos 1\n+\t\t} elseif { [ regexp -line \"\\[ \t\\]\\![getenv GOARCH]\\(\\[ \t\\]\\|\\$\\)\" $test_line ] } {\n+\t\t    set matches_neg 1\n+\t\t} elseif { [ regexp -line \"\\[ \t\\]linux\\(\\[ \t\\]\\|\\$\\)\" $test_line ] } {\n+\t\t    set matches_pos 1\n+\t\t} elseif { [ regexp -line \"\\[ \t\\]\\!linux\\(\\[ \t\\]\\|\\$\\)\" $test_line ] } {\n+\t\t    set matches_neg 1\n+\t\t} elseif { [ regexp -line \"\\[ \t\\]\\!windows\\(\\[ \t\\]\\|\\$\\)\" $test_line ] } {\n+\t\t    set matches_pos 1\n+\t\t} elseif { [ regexp -line \"\\[ \t\\]windows\\(\\[ \t\\]\\|\\$\\)\" $test_line ] } {\n+\t\t    set matches_neg 1\n \t\t}\n-\t\tif { [ string match \"*!windows*\" $test_line ] } {\n+\t\tif { $matches_pos == 1 && $matches_neg == 0 } {\n \t\t    continue\n \t\t}\n \t\tclose $fd"}]}