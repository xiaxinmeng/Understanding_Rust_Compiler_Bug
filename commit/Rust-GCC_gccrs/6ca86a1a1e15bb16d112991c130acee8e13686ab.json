{"sha": "6ca86a1a1e15bb16d112991c130acee8e13686ab", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmNhODZhMWExZTE1YmIxNmQxMTI5OTFjMTMwYWNlZThlMTM2ODZhYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2003-01-25T19:08:15Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2003-01-25T19:08:15Z"}, "message": "ia64.c (ia64_rwreloc_select_rtx_section): Rename from ia64_aix_select_rtx_section.\n\n        * config/ia64/ia64.c (ia64_rwreloc_select_rtx_section): Rename\n        from ia64_aix_select_rtx_section.\n        (ia64_rwreloc_select_section): Simlarly; use default*_1 function\n        instead of saving and restoring flag_pic.\n        (ia64_rwreloc_unique_section): Similarly.\n        * config/ia64/aix.h (TARGET_ASM_SELECT_SECTION,\n        TARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): Update.\n        * config/ia64/hpux.h (TARGET_ASM_SELECT_SECTION,\n        TARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): New.\n\nFrom-SVN: r61797", "tree": {"sha": "cf64cae4a544898b69e22a0b3de824e4a709b6ba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf64cae4a544898b69e22a0b3de824e4a709b6ba"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6ca86a1a1e15bb16d112991c130acee8e13686ab", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ca86a1a1e15bb16d112991c130acee8e13686ab", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6ca86a1a1e15bb16d112991c130acee8e13686ab", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6ca86a1a1e15bb16d112991c130acee8e13686ab/comments", "author": null, "committer": null, "parents": [{"sha": "aa2fb4ddb0ee8c7b52e234b5a329059d9eefa33d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aa2fb4ddb0ee8c7b52e234b5a329059d9eefa33d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aa2fb4ddb0ee8c7b52e234b5a329059d9eefa33d"}], "stats": {"total": 57, "additions": 37, "deletions": 20}, "files": [{"sha": "b10a807ea4908092cc8ced664c6bf2c6e3a53a6e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6ca86a1a1e15bb16d112991c130acee8e13686ab", "patch": "@@ -1,3 +1,15 @@\n+2003-01-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/ia64/ia64.c (ia64_rwreloc_select_rtx_section): Rename\n+\tfrom ia64_aix_select_rtx_section.\n+\t(ia64_rwreloc_select_section): Simlarly; use default*_1 function\n+\tinstead of saving and restoring flag_pic.\n+\t(ia64_rwreloc_unique_section): Similarly.\n+\t* config/ia64/aix.h (TARGET_ASM_SELECT_SECTION,\n+\tTARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): Update.\n+\t* config/ia64/hpux.h (TARGET_ASM_SELECT_SECTION,\n+\tTARGET_ASM_UNIQUE_SECTION, TARGET_ASM_SELECT_RTX_SECTION): New.\n+\n 2003-01-25  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300.c (h8300_shift_needs_scratch_p): Update a"}, {"sha": "5eb2334cb6a83317d68932c98151a33e5cae51bc", "filename": "gcc/config/ia64/aix.h", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2Fconfig%2Fia64%2Faix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2Fconfig%2Fia64%2Faix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Faix.h?ref=6ca86a1a1e15bb16d112991c130acee8e13686ab", "patch": "@@ -134,12 +134,14 @@ do {\t\t\t\t\t\t\t\\\n #define STANDARD_STARTFILE_PREFIX \"/usr/lib/ia64l64/\"\n #endif\n \n+/* It is illegal to have relocations in shared segments on AIX.\n+   Pretend flag_pic is always set.  */\n #undef\tTARGET_ASM_SELECT_SECTION\n-#define TARGET_ASM_SELECT_SECTION  ia64_aix_select_section\n+#define TARGET_ASM_SELECT_SECTION  ia64_rwreloc_select_section\n #undef\tTARGET_ASM_UNIQUE_SECTION\n-#define TARGET_ASM_UNIQUE_SECTION  ia64_aix_unique_section\n+#define TARGET_ASM_UNIQUE_SECTION  ia64_rwreloc_unique_section\n #undef\tTARGET_ASM_SELECT_RTX_SECTION\n-#define TARGET_ASM_SELECT_RTX_SECTION  ia64_aix_select_rtx_section\n+#define TARGET_ASM_SELECT_RTX_SECTION  ia64_rwreloc_select_rtx_section\n \n /* Override ia64/sysv4.h setting with that used by AIX5.  */\n #undef WCHAR_TYPE"}, {"sha": "230009950683a0300006584860b4fca4b0da67c6", "filename": "gcc/config/ia64/hpux.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2Fconfig%2Fia64%2Fhpux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2Fconfig%2Fia64%2Fhpux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fhpux.h?ref=6ca86a1a1e15bb16d112991c130acee8e13686ab", "patch": "@@ -167,3 +167,12 @@ do {\t\t\t\t\t\t\t\t\\\n \n #undef TEXT_SECTION_ASM_OP\n #define TEXT_SECTION_ASM_OP \"\\t.section\\t.text,\\t\\\"ax\\\",\\t\\\"progbits\\\"\"\n+\n+/* It is illegal to have relocations in shared segments on HPUX.\n+   Pretend flag_pic is always set.  */\n+#undef  TARGET_ASM_SELECT_SECTION\n+#define TARGET_ASM_SELECT_SECTION  ia64_rwreloc_select_section\n+#undef  TARGET_ASM_UNIQUE_SECTION\n+#define TARGET_ASM_UNIQUE_SECTION  ia64_rwreloc_unique_section\n+#undef  TARGET_ASM_SELECT_RTX_SECTION\n+#define TARGET_ASM_SELECT_RTX_SECTION  ia64_rwreloc_select_rtx_section"}, {"sha": "784bc394cd3f2be90c89c571790dc04d44c95aa0", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 11, "deletions": 17, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6ca86a1a1e15bb16d112991c130acee8e13686ab/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=6ca86a1a1e15bb16d112991c130acee8e13686ab", "patch": "@@ -207,13 +207,13 @@ static void ia64_output_mi_thunk PARAMS ((FILE *, tree, HOST_WIDE_INT,\n \n static void ia64_select_rtx_section PARAMS ((enum machine_mode, rtx,\n \t\t\t\t\t     unsigned HOST_WIDE_INT));\n-static void ia64_aix_select_section PARAMS ((tree, int,\n-\t\t\t\t\t     unsigned HOST_WIDE_INT))\n+static void ia64_rwreloc_select_section PARAMS ((tree, int,\n+\t\t\t\t\t         unsigned HOST_WIDE_INT))\n      ATTRIBUTE_UNUSED;\n-static void ia64_aix_unique_section PARAMS ((tree, int))\n+static void ia64_rwreloc_unique_section PARAMS ((tree, int))\n      ATTRIBUTE_UNUSED;\n-static void ia64_aix_select_rtx_section PARAMS ((enum machine_mode, rtx,\n-\t\t\t\t\t         unsigned HOST_WIDE_INT))\n+static void ia64_rwreloc_select_rtx_section PARAMS ((enum machine_mode, rtx,\n+\t\t\t\t\t             unsigned HOST_WIDE_INT))\n      ATTRIBUTE_UNUSED;\n \n static void ia64_hpux_add_extern_decl PARAMS ((const char *name))\n@@ -8273,34 +8273,28 @@ ia64_select_rtx_section (mode, x, align)\n     default_elf_select_rtx_section (mode, x, align);\n }\n \n-/* It is illegal to have relocations in shared segments on AIX.\n+/* It is illegal to have relocations in shared segments on AIX and HPUX.\n    Pretend flag_pic is always set.  */\n \n static void\n-ia64_aix_select_section (exp, reloc, align)\n+ia64_rwreloc_select_section (exp, reloc, align)\n      tree exp;\n      int reloc;\n      unsigned HOST_WIDE_INT align;\n {\n-  int save_pic = flag_pic;\n-  flag_pic = 1;\n-  default_elf_select_section (exp, reloc, align);\n-  flag_pic = save_pic;\n+  default_elf_select_section_1 (exp, reloc, align, true);\n }\n \n static void\n-ia64_aix_unique_section (decl, reloc)\n+ia64_rwreloc_unique_section (decl, reloc)\n      tree decl;\n      int reloc;\n {\n-  int save_pic = flag_pic;\n-  flag_pic = 1;\n-  default_unique_section (decl, reloc);\n-  flag_pic = save_pic;\n+  default_unique_section_1 (decl, reloc, true);\n }\n \n static void\n-ia64_aix_select_rtx_section (mode, x, align)\n+ia64_rwreloc_select_rtx_section (mode, x, align)\n      enum machine_mode mode;\n      rtx x;\n      unsigned HOST_WIDE_INT align;"}]}