{"sha": "162b5a21add6f291f4c57cc14e2c2e915cb2029c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTYyYjVhMjFhZGQ2ZjI5MWY0YzU3Y2MxNGUyYzJlOTE1Y2IyMDI5Yw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2011-06-02T17:39:11Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2011-06-02T17:39:11Z"}, "message": "re PR fortran/49265 (Double colon in procedure-stmt (generic interface))\n\n2011-06-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/49265\n\t* decl.c (gfc_match_modproc):  Allow for a double colon in a module\n\tprocedure statement.\n\t* parse.c ( decode_statement): Deal with whitespace around :: in\n\tgfc_match_modproc.\n \n2011-06-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/49265\n\t* gfortran.dg/module_procedure_double_colon_1.f90: New test.\n\t* gfortran.dg/module_procedure_double_colon_2.f90: New test.\n\nFrom-SVN: r174569", "tree": {"sha": "242a5caaf3adfe3919008fa60117ab80217b7e2f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/242a5caaf3adfe3919008fa60117ab80217b7e2f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/162b5a21add6f291f4c57cc14e2c2e915cb2029c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/162b5a21add6f291f4c57cc14e2c2e915cb2029c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/162b5a21add6f291f4c57cc14e2c2e915cb2029c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/162b5a21add6f291f4c57cc14e2c2e915cb2029c/comments", "author": null, "committer": null, "parents": [{"sha": "6e588138db4f545f3d14b96fe946150b594294ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6e588138db4f545f3d14b96fe946150b594294ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6e588138db4f545f3d14b96fe946150b594294ae"}], "stats": {"total": 80, "additions": 78, "deletions": 2}, "files": [{"sha": "e7b567e6337dabec8e6b1ae986827fa08f3a8e66", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=162b5a21add6f291f4c57cc14e2c2e915cb2029c", "patch": "@@ -1,3 +1,11 @@\n+2011-06-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/49265\n+\t* decl.c (gfc_match_modproc):  Allow for a double colon in a module\n+\tprocedure statement.\n+\t* parse.c ( decode_statement): Deal with whitespace around :: in\n+\tgfc_match_modproc.\n+ \n 2011-05-31  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/18918"}, {"sha": "f9141567450bf497d1d18e0dddb0fb254b8b74b3", "filename": "gcc/fortran/decl.c", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ffortran%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ffortran%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fdecl.c?ref=162b5a21add6f291f4c57cc14e2c2e915cb2029c", "patch": "@@ -7016,6 +7016,7 @@ gfc_match_modproc (void)\n   char name[GFC_MAX_SYMBOL_LEN + 1];\n   gfc_symbol *sym;\n   match m;\n+  locus old_locus;\n   gfc_namespace *module_ns;\n   gfc_interface *old_interface_head, *interface;\n \n@@ -7044,10 +7045,23 @@ gfc_match_modproc (void)\n      end up with a syntax error and need to recover.  */\n   old_interface_head = gfc_current_interface_head ();\n \n+  /* Check if the F2008 optional double colon appears.  */\n+  gfc_gobble_whitespace ();\n+  old_locus = gfc_current_locus;\n+  if (gfc_match (\"::\") == MATCH_YES)\n+    {\n+      if (gfc_notify_std (GFC_STD_F2008, \"Fortran 2008: double colon in \"\n+\t\t\t \"MODULE PROCEDURE statement at %L\", &old_locus)\n+\t  == FAILURE)\n+\treturn MATCH_ERROR;\n+    }\n+  else\n+    gfc_current_locus = old_locus;\n+      \n   for (;;)\n     {\n-      locus old_locus = gfc_current_locus;\n       bool last = false;\n+      old_locus = gfc_current_locus;\n \n       m = gfc_match_name (name);\n       if (m == MATCH_NO)\n@@ -7059,6 +7073,7 @@ gfc_match_modproc (void)\n \t current namespace.  */\n       if (gfc_match_eos () == MATCH_YES)\n \tlast = true;\n+\n       if (!last && gfc_match_char (',') != MATCH_YES)\n \tgoto syntax;\n "}, {"sha": "a47b4578169b91b3f85471d5c9b71c68a444404c", "filename": "gcc/fortran/parse.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ffortran%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ffortran%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fparse.c?ref=162b5a21add6f291f4c57cc14e2c2e915cb2029c", "patch": "@@ -399,7 +399,7 @@ decode_statement (void)\n       break;\n \n     case 'm':\n-      match (\"module% procedure% \", gfc_match_modproc, ST_MODULE_PROC);\n+      match (\"module% procedure\", gfc_match_modproc, ST_MODULE_PROC);\n       match (\"module\", gfc_match_module, ST_MODULE);\n       break;\n "}, {"sha": "18d03ed1479a42afb7f823ef145055b7b47b46f2", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=162b5a21add6f291f4c57cc14e2c2e915cb2029c", "patch": "@@ -1,3 +1,9 @@\n+2011-06-02  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/49265\n+\t* gfortran.dg/module_procedure_double_colon_1.f90: New test.\n+\t* gfortran.dg/module_procedure_double_colon_2.f90: New test.\n+\n 2011-06-02  Eric Botcazou  <ebotcazou@adacore.com>\n \t    Hans-Peter Nilsson  <hp@axis.com>\n "}, {"sha": "200f0ff26e1b84e2fd7c2a0b443cef9e3860f988", "filename": "gcc/testsuite/gfortran.dg/module_procedure_double_colon_1.f90", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_procedure_double_colon_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_procedure_double_colon_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_procedure_double_colon_1.f90?ref=162b5a21add6f291f4c57cc14e2c2e915cb2029c", "patch": "@@ -0,0 +1,23 @@\n+! { dg-do compile }\n+!\n+! PR fortran/49265\n+! Contributed by Erik Toussaint\n+!\n+module m1\n+   implicit none\n+   interface foo\n+      module procedure::bar\n+      module procedure ::bar_none\n+      module procedure:: none_bar\n+   end interface\n+contains\n+   subroutine bar\n+   end subroutine\n+   subroutine bar_none(i)\n+     integer i\n+   end subroutine\n+   subroutine none_bar(x)\n+     real x\n+   end subroutine\n+end module\n+! { dg-final { cleanup-modules \"m1\" } }"}, {"sha": "9300215e74921e368ed4c676c0281a2cc07e6111", "filename": "gcc/testsuite/gfortran.dg/module_procedure_double_colon_2.f90", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_procedure_double_colon_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/162b5a21add6f291f4c57cc14e2c2e915cb2029c/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_procedure_double_colon_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fmodule_procedure_double_colon_2.f90?ref=162b5a21add6f291f4c57cc14e2c2e915cb2029c", "patch": "@@ -0,0 +1,24 @@\n+! { dg-do compile }\n+! { dg-options \"-std=f95\" }\n+!\n+! PR fortran/49265\n+! Contributed by Erik Toussaint\n+!\n+module m1\n+   implicit none\n+   interface foo\n+      module procedure::bar       ! { dg-error \"double colon\" }\n+      module procedure ::bar_none ! { dg-error \"double colon\" }\n+      module procedure:: none_bar ! { dg-error \"double colon\" }\n+   end interface\n+contains\n+   subroutine bar\n+   end subroutine\n+   subroutine bar_none(i)\n+     integer i\n+   end subroutine\n+   subroutine none_bar(x)\n+     real x\n+   end subroutine\n+end module\n+! { dg-final { cleanup-modules \"m1\" } }"}]}