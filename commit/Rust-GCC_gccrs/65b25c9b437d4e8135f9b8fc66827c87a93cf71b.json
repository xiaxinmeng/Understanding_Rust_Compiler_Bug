{"sha": "65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjViMjVjOWI0MzdkNGU4MTM1ZjliOGZjNjY4MjdjODdhOTNjZjcxYg==", "commit": {"author": {"name": "Kugan Vivekanandarajah", "email": "kuganv@linaro.org", "date": "2016-10-06T19:55:14Z"}, "committer": {"name": "Kugan Vivekanandarajah", "email": "kugan@gcc.gnu.org", "date": "2016-10-06T19:55:14Z"}, "message": "Handle POINTER_TYPE_P in EVRP\n\nHandle POINTER_TYPE_P in EVRP\ngcc/ChangeLog:\n\n2016-10-06  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\t* tree-vrp.c (evrp_dom_walker::before_dom_children): Handle\n\t  POINTER_TYPE_P.\n\n\ngcc/testsuite/ChangeLog:\n\n2016-10-06  Kugan Vivekanandarajah  <kuganv@linaro.org>\n\n\t* gcc.dg/tree-ssa/evrp4.c: New test.\n\nFrom-SVN: r240841", "tree": {"sha": "76936f1cc4444f007ca6217385401c6d0d47fbfe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76936f1cc4444f007ca6217385401c6d0d47fbfe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/comments", "author": null, "committer": null, "parents": [{"sha": "4c4430e390301324e48b70ceb7b882fedd18aa15", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4c4430e390301324e48b70ceb7b882fedd18aa15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4c4430e390301324e48b70ceb7b882fedd18aa15"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "b4ce1a73031567a060e64dabf4b8d427edbe8ede", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "patch": "@@ -1,3 +1,8 @@\n+2016-10-06  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\t* tree-vrp.c (evrp_dom_walker::before_dom_children): Handle\n+\t  POINTER_TYPE_P.\n+\n 2016-10-05  Jeff Law  <law@redhat.com>\n \n \tPR tree-optimization/71661"}, {"sha": "e41e168efade517c0df94224bae43bba2fff301d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "patch": "@@ -1,3 +1,7 @@\n+2016-10-06  Kugan Vivekanandarajah  <kuganv@linaro.org>\n+\n+\t* gcc.dg/tree-ssa/evrp4.c: New test.\n+\n 2016-10-06  Jeff Law  <law@redhat.com>\n \n \tPR tree-optimization/71661"}, {"sha": "ebb87ed38b089e1fa1f115685ec91e0887372c5f", "filename": "gcc/testsuite/gcc.dg/tree-ssa/evrp4.c", "status": "added", "additions": 20, "deletions": 0, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fevrp4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fevrp4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fevrp4.c?ref=65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "patch": "@@ -0,0 +1,20 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-evrp\" } */\n+\n+int foo (int *p);\n+\n+struct st\n+{\n+  int a;\n+  int b;\n+};\n+\n+int bar (struct st *s)\n+{\n+\n+  if (!s)\n+    return 0;\n+  foo (&s->a);\n+}\n+\n+/* { dg-final { scan-tree-dump \"\\~\\\\\\[0B, 0B\\\\\\]\" \"evrp\" } } */"}, {"sha": "46bbd823bfcbda77aefc9750e58af87d4088b0c1", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/65b25c9b437d4e8135f9b8fc66827c87a93cf71b/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=65b25c9b437d4e8135f9b8fc66827c87a93cf71b", "patch": "@@ -10666,7 +10666,8 @@ evrp_dom_walker::before_dom_children (basic_block bb)\n \t  && gimple_code (stmt) == GIMPLE_COND\n \t  && (op0 = gimple_cond_lhs (stmt))\n \t  && TREE_CODE (op0) == SSA_NAME\n-\t  && INTEGRAL_TYPE_P (TREE_TYPE (gimple_cond_lhs (stmt))))\n+\t  && (INTEGRAL_TYPE_P (TREE_TYPE (gimple_cond_lhs (stmt)))\n+\t      || POINTER_TYPE_P (TREE_TYPE (gimple_cond_lhs (stmt)))))\n \t{\n \t  /* Entering a new scope.  Try to see if we can find a VR\n \t     here.  */"}]}