{"sha": "a8e17e9ea71adffbceaecb8e217042a8f998bd93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YThlMTdlOWVhNzFhZGZmYmNlYWVjYjhlMjE3MDQyYThmOTk4YmQ5Mw==", "commit": {"author": {"name": "Paul Brook", "email": "paul@codesourcery.com", "date": "2008-08-26T17:16:53Z"}, "committer": {"name": "Paul Brook", "email": "pbrook@gcc.gnu.org", "date": "2008-08-26T17:16:53Z"}, "message": "vfp.md: Document fmul{s,d} and fmac{s,d} types.\n\n2008-08-28  Paul Brook  <paul@codesourcery.com>\n\n\t* config/arm/vfp.md: Document fmul{s,d} and fmac{s,d} types.\n\tRemove documentation entry for fmul type.\n\tUse fmuls to annotate single-precision multiplication patterns,\n\tfmuld to annotate double-precision multiplication patterns,\n\tfmacs to annotate single-precision multiply-accumulate patterns\n\tand fmacd to annotate double-precision multiply-accumulate patterns.\n\t* config/arm/vfp11.md: Update reservations accordingly.\n\t* config/arm/arm.md: Note that certain values of the \"type\"\n\tattribute are documented in vfp.md.\n\t* config/arm/arm1020e.md: Remove out of date duplicate comment.\n\t(v10_cvt): Use new fmul types.\n\nFrom-SVN: r139604", "tree": {"sha": "751c6b7b8ebe6005b0c413d0678452c37846286f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/751c6b7b8ebe6005b0c413d0678452c37846286f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a8e17e9ea71adffbceaecb8e217042a8f998bd93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8e17e9ea71adffbceaecb8e217042a8f998bd93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a8e17e9ea71adffbceaecb8e217042a8f998bd93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a8e17e9ea71adffbceaecb8e217042a8f998bd93/comments", "author": null, "committer": null, "parents": [{"sha": "f08d75a9e666d5679af36ef4696c4fa820a7223b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f08d75a9e666d5679af36ef4696c4fa820a7223b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f08d75a9e666d5679af36ef4696c4fa820a7223b"}], "stats": {"total": 63, "additions": 35, "deletions": 28}, "files": [{"sha": "eec19752b6822a6f7665ca8cc397d554a00767c0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a8e17e9ea71adffbceaecb8e217042a8f998bd93", "patch": "@@ -1,3 +1,17 @@\n+2008-08-28  Paul Brook  <paul@codesourcery.com>\n+\n+\t* config/arm/vfp.md: Document fmul{s,d} and fmac{s,d} types.\n+\tRemove documentation entry for fmul type.\n+\tUse fmuls to annotate single-precision multiplication patterns,\n+\tfmuld to annotate double-precision multiplication patterns,\n+\tfmacs to annotate single-precision multiply-accumulate patterns\n+\tand fmacd to annotate double-precision multiply-accumulate patterns.\n+\t* config/arm/vfp11.md: Update reservations accordingly.\n+\t* config/arm/arm.md: Note that certain values of the \"type\"\n+\tattribute are documented in vfp.md.\n+\t* config/arm/arm1020e.md: Remove out of date duplicate comment.\n+\t(v10_cvt): Use new fmul types.\n+\n 2008-08-26  Paul Brook   <paul@codesourcery.com>\n \n \t* config/arm/vfp.md: Move pipeline description for VFP11 to..."}, {"sha": "0ef91c6a00382db0a1c58e815252d634b3a3dae3", "filename": "gcc/config/arm/arm.md", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Farm.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Farm.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.md?ref=a8e17e9ea71adffbceaecb8e217042a8f998bd93", "patch": "@@ -193,6 +193,8 @@\n ; scheduling of writes.\n \n ; Classification of each insn\n+; Note: vfp.md has different meanings for some of these, and some further\n+; types as well.  See that file for details.\n ; alu\t\tany alu  instruction that doesn't hit memory or fp\n ;\t\tregs or have a shifted source operand\n ; alu_shift\tany data instruction that doesn't hit memory or fp"}, {"sha": "ed170c4b170ac259f56184dbd0433191af1bd4e0", "filename": "gcc/config/arm/arm1020e.md", "status": "modified", "additions": 1, "deletions": 13, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Farm1020e.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Farm1020e.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm1020e.md?ref=a8e17e9ea71adffbceaecb8e217042a8f998bd93", "patch": "@@ -265,18 +265,6 @@\n \t\t\t    (eq_attr \"fpu\" \"vfp\"))\n \t\t       (const_string \"yes\") (const_string \"no\"))))\n \n-;; The VFP \"type\" attributes differ from those used in the FPA model.\n-;; ffarith\tFast floating point insns, e.g. abs, neg, cpy, cmp.\n-;; farith\tMost arithmetic insns.\n-;; fmul\t\tDouble precision multiply.\n-;; fdivs\tSingle precision sqrt or division.\n-;; fdivd\tDouble precision sqrt or division.\n-;; f_flag\tfmstat operation\n-;; f_load\tFloating point load from memory.\n-;; f_store\tFloating point store to memory.\n-;; f_2_r\tTransfer vfp to arm reg.\n-;; r_2_f\tTransfer arm to vfp reg.\n-\n ;; Note, no instruction can issue to the VFP if the core is stalled in the\n ;; first execute state.  We model this by using 1020a_e in the first cycle.\n (define_insn_reservation \"v10_ffarith\" 5\n@@ -296,7 +284,7 @@\n \n (define_insn_reservation \"v10_fmul\" 6\n  (and (eq_attr \"vfp10\" \"yes\")\n-      (eq_attr \"type\" \"fmul\"))\n+      (eq_attr \"type\" \"fmuls,fmacs,fmuld,fmacd\"))\n  \"1020a_e+v10_fmac*2\")\n \n (define_insn_reservation \"v10_fdivs\" 18"}, {"sha": "64bb9564d9c703727f803540b90e658fed333810", "filename": "gcc/config/arm/vfp.md", "status": "modified", "additions": 16, "deletions": 13, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Fvfp.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Fvfp.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fvfp.md?ref=a8e17e9ea71adffbceaecb8e217042a8f998bd93", "patch": "@@ -26,7 +26,10 @@\n ;; The VFP \"type\" attributes differ from those used in the FPA model.\n ;; ffarith\tFast floating point insns, e.g. abs, neg, cpy, cmp.\n ;; farith\tMost arithmetic insns.\n-;; fmul\t\tDouble precision multiply.\n+;; fmuls\tSingle precision multiply.\n+;; fmuld\tDouble precision multiply.\n+;; fmacs\tSingle precision multiply-accumulate.\n+;; fmacd\tDouble precision multiply-accumulate.\n ;; fdivs\tSingle precision sqrt or division.\n ;; fdivd\tDouble precision sqrt or division.\n ;; f_flag\tfmstat operation\n@@ -573,7 +576,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fmuls%?\\\\t%0, %1, %2\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"farith\")]\n+   (set_attr \"type\" \"fmuls\")]\n )\n \n (define_insn \"*muldf3_vfp\"\n@@ -583,7 +586,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fmuld%?\\\\t%P0, %P1, %P2\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"fmul\")]\n+   (set_attr \"type\" \"fmuld\")]\n )\n \n \n@@ -594,7 +597,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fnmuls%?\\\\t%0, %1, %2\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"farith\")]\n+   (set_attr \"type\" \"fmuls\")]\n )\n \n (define_insn \"*muldf3negdf_vfp\"\n@@ -604,7 +607,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fnmuld%?\\\\t%P0, %P1, %P2\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"fmul\")]\n+   (set_attr \"type\" \"fmuld\")]\n )\n \n \n@@ -619,7 +622,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fmacs%?\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"farith\")]\n+   (set_attr \"type\" \"fmacs\")]\n )\n \n (define_insn \"*muldf3adddf_vfp\"\n@@ -630,7 +633,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fmacd%?\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"fmul\")]\n+   (set_attr \"type\" \"fmacd\")]\n )\n \n ;; 0 = 1 * 2 - 0\n@@ -642,7 +645,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fmscs%?\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"farith\")]\n+   (set_attr \"type\" \"fmacs\")]\n )\n \n (define_insn \"*muldf3subdf_vfp\"\n@@ -653,7 +656,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fmscd%?\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"fmul\")]\n+   (set_attr \"type\" \"fmacd\")]\n )\n \n ;; 0 = -(1 * 2) + 0\n@@ -665,7 +668,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fnmacs%?\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"farith\")]\n+   (set_attr \"type\" \"fmacs\")]\n )\n \n (define_insn \"*fmuldf3negdfadddf_vfp\"\n@@ -676,7 +679,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fnmacd%?\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"fmul\")]\n+   (set_attr \"type\" \"fmacd\")]\n )\n \n \n@@ -690,7 +693,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fnmscs%?\\\\t%0, %2, %3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"farith\")]\n+   (set_attr \"type\" \"fmacs\")]\n )\n \n (define_insn \"*muldf3negdfsubdf_vfp\"\n@@ -702,7 +705,7 @@\n   \"TARGET_32BIT && TARGET_HARD_FLOAT && TARGET_VFP\"\n   \"fnmscd%?\\\\t%P0, %P2, %P3\"\n   [(set_attr \"predicable\" \"yes\")\n-   (set_attr \"type\" \"fmul\")]\n+   (set_attr \"type\" \"fmacd\")]\n )\n \n "}, {"sha": "7b297d2ed868b55c21c95bbf0a521e0b3819fd99", "filename": "gcc/config/arm/vfp11.md", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Fvfp11.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a8e17e9ea71adffbceaecb8e217042a8f998bd93/gcc%2Fconfig%2Farm%2Fvfp11.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fvfp11.md?ref=a8e17e9ea71adffbceaecb8e217042a8f998bd93", "patch": "@@ -57,12 +57,12 @@\n \n (define_insn_reservation \"vfp_farith\" 8\n  (and (eq_attr \"generic_vfp\" \"yes\")\n-      (eq_attr \"type\" \"farith,f_cvt\"))\n+      (eq_attr \"type\" \"farith,f_cvt,fmuls,fmacs\"))\n  \"fmac\")\n \n (define_insn_reservation \"vfp_fmul\" 9\n  (and (eq_attr \"generic_vfp\" \"yes\")\n-      (eq_attr \"type\" \"fmul\"))\n+      (eq_attr \"type\" \"fmuld,fmacd\"))\n  \"fmac*2\")\n \n (define_insn_reservation \"vfp_fdivs\" 19"}]}