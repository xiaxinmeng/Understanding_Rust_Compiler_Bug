{"sha": "0ad7574f933e754957d2df890bd84ba3ccea19ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGFkNzU3NGY5MzNlNzU0OTU3ZDJkZjg5MGJkODRiYTNjY2VhMTllZQ==", "commit": {"author": {"name": "David Edelsohn", "email": "edelsohn@gnu.org", "date": "2000-10-21T01:47:05Z"}, "committer": {"name": "David Edelsohn", "email": "dje@gcc.gnu.org", "date": "2000-10-21T01:47:05Z"}, "message": "Makefile.in (SHLIB_NM_FLAGS): New.\n\n        * Makefile.in (SHLIB_NM_FLAGS): New.\n        (libgcc.mk): Pass it.\n        * mklibgcc.in (libgcc.map): Use it.\n\n        * rs6000/t-aix43 (SHLIB_EXT, SHLIB_LINK, SHLIB_LIBS,\n        SHLIB_MKMAP, SHLIB_MAPFILES, SHLIB_NM_FLAGS): New.\n\nFrom-SVN: r36989", "tree": {"sha": "b037f49f5f9d87522cd6c42b9244b590f517ba4c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b037f49f5f9d87522cd6c42b9244b590f517ba4c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0ad7574f933e754957d2df890bd84ba3ccea19ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ad7574f933e754957d2df890bd84ba3ccea19ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0ad7574f933e754957d2df890bd84ba3ccea19ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0ad7574f933e754957d2df890bd84ba3ccea19ee/comments", "author": null, "committer": null, "parents": [{"sha": "d73b0bcff3a087964a7aca5ffbf0be410a9922ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d73b0bcff3a087964a7aca5ffbf0be410a9922ae", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d73b0bcff3a087964a7aca5ffbf0be410a9922ae"}], "stats": {"total": 34, "additions": 32, "deletions": 2}, "files": [{"sha": "abab32c545bf3037dff62362db6bc8e11ed81c0e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0ad7574f933e754957d2df890bd84ba3ccea19ee", "patch": "@@ -1,3 +1,12 @@\n+2000-10-20  David Edelsohn  <edelsohn@gnu.org>\n+\n+\t* Makefile.in (SHLIB_NM_FLAGS): New.\n+\t(libgcc.mk): Pass it.\n+\t* mklibgcc.in (libgcc.map): Use it.\n+\n+\t* rs6000/t-aix43 (SHLIB_EXT, SHLIB_LINK, SHLIB_LIBS,\n+\tSHLIB_MKMAP, SHLIB_MAPFILES, SHLIB_NM_FLAGS): New.\n+\n 2000-10-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* mips.h (REG_CLASS_FROM_LETTER): Cast array arg to unsigned char."}, {"sha": "8a7a7993627db2ec129bd7bc12c5faa24a9374ce", "filename": "gcc/Makefile.in", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=0ad7574f933e754957d2df890bd84ba3ccea19ee", "patch": "@@ -381,12 +381,15 @@ LIBGCC2_INCLUDES =\n # Additional target-dependent options for compiling libgcc2.a.\n TARGET_LIBGCC2_CFLAGS =\n \n-# Addition sources to handle exceptions; overridden by some targets.\n+# Additional sources to handle exceptions; overridden by some targets.\n LIB2ADDEH = $(srcdir)/frame-dwarf2.c\n \n # libgcc1-test target (must also be overridable for a target)\n LIBGCC1_TEST = libgcc1-test\n \n+# nm flags to list global symbols in libgcc object files.\n+SHLIB_NM_FLAGS = -pg\n+\n # List of extra executables that should be compiled for this target machine\n # that are used for compiling from source code to object code.\n # The rules for compiling them should be in the t-* file for the machine.\n@@ -985,6 +988,7 @@ libgcc.mk: config.status Makefile mklibgcc $(LIB2ADD) xgcc$(exeext)\n \tSHLIB_MULTILIB='$(SHLIB_MULTILIB)' \\\n \tSHLIB_MKMAP='$(SHLIB_MKMAP)' \\\n \tSHLIB_MAPFILES='$(SHLIB_MAPFILES)' \\\n+\tSHLIB_NM_FLAGS='$(SHLIB_NM_FLAGS)' \\\n \t  $(SHELL) mklibgcc > tmp-libgcc.mk\n \tmv tmp-libgcc.mk libgcc.mk\n "}, {"sha": "7db8ae1c748c60696fd3828c11002446121f979e", "filename": "gcc/config/rs6000/t-aix43", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2Fconfig%2Frs6000%2Ft-aix43", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2Fconfig%2Frs6000%2Ft-aix43", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-aix43?ref=0ad7574f933e754957d2df890bd84ba3ccea19ee", "patch": "@@ -48,6 +48,22 @@ MULTILIB_MATCHES\t= mcpu?power=mpower \\\n LIBGCC = stmp-multilib\n INSTALL_LIBGCC = install-multilib\n \n+# Build a shared libgcc library.\n+SHLIB_EXT = .a\n+SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n+\t-Wl,-bE:@shlib_map_file@ -o @multilib_dir@/shr.o \\\n+\t@multilib_flags@ @shlib_objs@ -lc \\\n+\t`case @shlib_base_name@ in \\\n+\t*pthread*) echo -L/usr/lib/threads -lpthreads -lc_r /usr/lib/libc.a ;; \\\n+\t*) echo -lc ;; esac` ; \\\n+\trm -f tmp-@shlib_base_name@.a ; \\\n+\t$(AR_CREATE_FOR_TARGET) tmp-@shlib_base_name@.a @multilib_dir@/shr.o ; \\\n+\tmv tmp-@shlib_base_name@.a @shlib_base_name@.a ; \\\n+\trm -f @multilib_dir@/shr.o\n+SHLIB_LIBS = -lc `case @shlib_base_name@ in *pthread*) echo -lpthread ;; esac`\n+SHLIB_MKMAP = $(srcdir)/mkmap-flat.awk\n+SHLIB_MAPFILES = $(srcdir)/libgcc-std.ver\n+SHLIB_NM_FLAGS = -Bpg\n \n # Both 32-bit and 64-bit objects in archives\n AR_FLAGS_FOR_TARGET=-X32_64"}, {"sha": "4d957fa063be48203c15ed26f9fd3a3f33dfc789", "filename": "gcc/mklibgcc.in", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2Fmklibgcc.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0ad7574f933e754957d2df890bd84ba3ccea19ee/gcc%2Fmklibgcc.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmklibgcc.in?ref=0ad7574f933e754957d2df890bd84ba3ccea19ee", "patch": "@@ -28,6 +28,7 @@\n # SHLIB_MULTILIB\n # SHLIB_MKMAP\n # SHLIB_MAPFILES\n+# SHLIB_NM_FLAGS\n \n # Make needs VPATH to be literal.\n echo 'srcdir = @srcdir@'\n@@ -262,7 +263,7 @@ for ml in $MULTILIBS; do\n     mapfile=\"libgcc.map\"\n     echo \"\"\n     echo \"${mapfile}: $SHLIB_MKMAP $SHLIB_MAPFILES $libgcc_objs\"\n-    echo '\t{ $(NM_FOR_TARGET) -pg'\" $libgcc_objs; echo %%; cat $SHLIB_MAPFILES; } | \"'$(AWK)'\" -f $SHLIB_MKMAP > \"'tmp-$@'\n+    echo '\t{ $(NM_FOR_TARGET)'\" $SHLIB_NM_FLAGS $libgcc_objs; echo %%; cat $SHLIB_MAPFILES; } | \"'$(AWK)'\" -f $SHLIB_MKMAP > \"'tmp-$@'\n     echo '\tmv tmp-$@ $@'\n   fi\n   shlib_deps=\"$shlib_deps $mapfile\""}]}