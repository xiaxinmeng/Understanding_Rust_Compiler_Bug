{"sha": "fa13976560a8ae33802927ed3e607d01e96e7cfa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmExMzk3NjU2MGE4YWUzMzgwMjkyN2VkM2U2MDdkMDFlOTZlN2NmYQ==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2007-05-30T14:11:06Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2007-05-30T14:11:06Z"}, "message": "re PR middle-end/32152 (omp lowering creates mismatched types)\n\n2007-05-30  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/32152\n\t* gimplify.c (gimplify_omp_atomic_pipeline): Use correct\n\ttypes for comparison.\n\t* fold-const.c (fold_comparison): Call maybe_canonicalize_comparison\n\twith original typed arguments.\n\t* config/i386/i386.c (ix86_gimplify_va_arg): Fix type mismatches.\n\nFrom-SVN: r125187", "tree": {"sha": "38252a4dbdfe3f79cc10bd5574226330baaa645c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/38252a4dbdfe3f79cc10bd5574226330baaa645c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa13976560a8ae33802927ed3e607d01e96e7cfa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa13976560a8ae33802927ed3e607d01e96e7cfa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa13976560a8ae33802927ed3e607d01e96e7cfa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa13976560a8ae33802927ed3e607d01e96e7cfa/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "722ba5eeacaeaf2c913d74f5d17b5e8ab9f04d37", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/722ba5eeacaeaf2c913d74f5d17b5e8ab9f04d37", "html_url": "https://github.com/Rust-GCC/gccrs/commit/722ba5eeacaeaf2c913d74f5d17b5e8ab9f04d37"}], "stats": {"total": 22, "additions": 16, "deletions": 6}, "files": [{"sha": "89d7923b8a1137db5e649200e953ad383cc194b9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa13976560a8ae33802927ed3e607d01e96e7cfa", "patch": "@@ -1,3 +1,12 @@\n+2007-05-30  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/32152\n+\t* gimplify.c (gimplify_omp_atomic_pipeline): Use correct\n+\ttypes for comparison.\n+\t* fold-const.c (fold_comparison): Call maybe_canonicalize_comparison\n+\twith original typed arguments.\n+\t* config/i386/i386.c (ix86_gimplify_va_arg): Fix type mismatches.\n+\n 2007-05-30  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/31769"}, {"sha": "977ff6b805f6c637762a4e46a7deb218aee2a0b7", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=fa13976560a8ae33802927ed3e607d01e96e7cfa", "patch": "@@ -4912,15 +4912,15 @@ ix86_gimplify_va_arg (tree valist, tree type, tree *pre_p, tree *post_p)\n       if (needed_intregs)\n \t{\n \t  /* int_addr = gpr + sav; */\n-\t  t = fold_convert (ptr_type_node, gpr);\n+\t  t = fold_convert (ptr_type_node, fold_convert (size_type_node, gpr));\n \t  t = build2 (PLUS_EXPR, ptr_type_node, sav, t);\n \t  t = build2 (GIMPLE_MODIFY_STMT, void_type_node, int_addr, t);\n \t  gimplify_and_add (t, pre_p);\n \t}\n       if (needed_sseregs)\n \t{\n \t  /* sse_addr = fpr + sav; */\n-\t  t = fold_convert (ptr_type_node, fpr);\n+\t  t = fold_convert (ptr_type_node, fold_convert (size_type_node, fpr));\n \t  t = build2 (PLUS_EXPR, ptr_type_node, sav, t);\n \t  t = build2 (GIMPLE_MODIFY_STMT, void_type_node, sse_addr, t);\n \t  gimplify_and_add (t, pre_p);\n@@ -4958,12 +4958,12 @@ ix86_gimplify_va_arg (tree valist, tree type, tree *pre_p, tree *post_p)\n \t\t}\n \t      src_addr = fold_convert (addr_type, src_addr);\n \t      src_addr = fold_build2 (PLUS_EXPR, addr_type, src_addr,\n-\t\t\t\t      size_int (src_offset));\n+\t\t\t\t      build_int_cst (addr_type, src_offset));\n \t      src = build_va_arg_indirect_ref (src_addr);\n \n \t      dest_addr = fold_convert (addr_type, addr);\n \t      dest_addr = fold_build2 (PLUS_EXPR, addr_type, dest_addr,\n-\t\t\t\t       size_int (INTVAL (XEXP (slot, 1))));\n+\t\t\t\t       build_int_cst (addr_type, INTVAL (XEXP (slot, 1))));\n \t      dest = build_va_arg_indirect_ref (dest_addr);\n \n \t      t = build2 (GIMPLE_MODIFY_STMT, void_type_node, dest, src);"}, {"sha": "af48916601c14b8730b2bcf40a0ef071448a5aed", "filename": "gcc/fold-const.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=fa13976560a8ae33802927ed3e607d01e96e7cfa", "patch": "@@ -8542,7 +8542,7 @@ fold_comparison (enum tree_code code, tree type, tree op0, tree op1)\n       return fold_build2 (cmp_code, type, variable1, const2);\n     }\n \n-  tem = maybe_canonicalize_comparison (code, type, arg0, arg1);\n+  tem = maybe_canonicalize_comparison (code, type, op0, op1);\n   if (tem)\n     return tem;\n "}, {"sha": "e73e00ae9ae959eafd11ee571b0b256600dc83dd", "filename": "gcc/gimplify.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2Fgimplify.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa13976560a8ae33802927ed3e607d01e96e7cfa/gcc%2Fgimplify.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimplify.c?ref=fa13976560a8ae33802927ed3e607d01e96e7cfa", "patch": "@@ -5308,7 +5308,8 @@ gimplify_omp_atomic_pipeline (tree *expr_p, tree *pre_p, tree addr,\n      floating point.  This allows the atomic operation to properly \n      succeed even with NaNs and -0.0.  */\n   x = build3 (COND_EXPR, void_type_node,\n-\t      build2 (NE_EXPR, boolean_type_node, oldival, oldival2),\n+\t      build2 (NE_EXPR, boolean_type_node,\n+\t\t      fold_convert (itype, oldival), oldival2),\n \t      build1 (GOTO_EXPR, void_type_node, label), NULL);\n   gimplify_and_add (x, pre_p);\n "}]}