{"sha": "da6d3adf1e660ce6b7da0d422395664faded45cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGE2ZDNhZGYxZTY2MGNlNmI3ZGEwZDQyMjM5NTY2NGZhZGVkNDVjZg==", "commit": {"author": {"name": "Bruce Korb", "email": "bkorb@gnu.org", "date": "2000-05-19T14:15:24Z"}, "committer": {"name": "Bruce Korb", "email": "korbb@gcc.gnu.org", "date": "2000-05-19T14:15:24Z"}, "message": "test_text cleanups\n\nFrom-SVN: r34020", "tree": {"sha": "4106030b50a274de7cd09399962355987b57cc70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4106030b50a274de7cd09399962355987b57cc70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/da6d3adf1e660ce6b7da0d422395664faded45cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da6d3adf1e660ce6b7da0d422395664faded45cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da6d3adf1e660ce6b7da0d422395664faded45cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da6d3adf1e660ce6b7da0d422395664faded45cf/comments", "author": {"login": "brkorb", "id": 1242936, "node_id": "MDQ6VXNlcjEyNDI5MzY=", "avatar_url": "https://avatars.githubusercontent.com/u/1242936?v=4", "gravatar_id": "", "url": "https://api.github.com/users/brkorb", "html_url": "https://github.com/brkorb", "followers_url": "https://api.github.com/users/brkorb/followers", "following_url": "https://api.github.com/users/brkorb/following{/other_user}", "gists_url": "https://api.github.com/users/brkorb/gists{/gist_id}", "starred_url": "https://api.github.com/users/brkorb/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/brkorb/subscriptions", "organizations_url": "https://api.github.com/users/brkorb/orgs", "repos_url": "https://api.github.com/users/brkorb/repos", "events_url": "https://api.github.com/users/brkorb/events{/privacy}", "received_events_url": "https://api.github.com/users/brkorb/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f2b339813f835813cd5a675d86c5a6342aa043e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2b339813f835813cd5a675d86c5a6342aa043e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2b339813f835813cd5a675d86c5a6342aa043e2"}], "stats": {"total": 359, "additions": 189, "deletions": 170}, "files": [{"sha": "74becdcdba0d50a205a8131e5143cb963eb98011", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=da6d3adf1e660ce6b7da0d422395664faded45cf", "patch": "@@ -1,3 +1,14 @@\n+2000-05-19  Bruce Korb  <bkorb@gnu.org>\n+\n+\t* fixinc/README:  cleaned up old documentation\n+\t* fixinc/check.diff: regenerated & verified on OSR5 on ix86\n+\t* fixinc/check.tpl: compute the list of needed directories\n+\temit \"#if defined(name)\" because of conflict\n+\tomit machine name differences from output differences\n+\t* fixinc/inclhack.def( m88k_multi_incl ):  Use `wrap' function\n+\t(machine_name): change test text to use `sed' markers\n+\t* fixinc/fixincl.x: regen\n+\n Fri May 19 06:49:35 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* config/elfos.h (SELECT_SECTION): Don't access DECL_INITIAL of"}, {"sha": "29ef61b139370934e7664a50c604179fa3b36320", "filename": "gcc/fixinc/README", "status": "modified", "additions": 18, "deletions": 46, "changes": 64, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2FREADME", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2FREADME", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2FREADME?ref=da6d3adf1e660ce6b7da0d422395664faded45cf", "patch": "@@ -192,49 +192,21 @@ Here are the rules for making fixes in the inclhack.def file:\n 5.  Testing fixes.\n \n     The brute force method is, of course, to configure and build\n-    GCC.  There are easier ways, too.  You can run the compiled\n-    binaries in isolation.  ``c_tests'' can be tested with\n-    ``fixtests'', ``c_fixes'' with ``fixfixes'' and any fix or\n-    test can be tested with ``fixincl''.\n-\n-    ``fixtests'' is invoked as follows:\n-\n-        fixtests filename.h your_test_name\n-        if [ $? -ne 0 ]\n-        then echo do not apply your_fix_name\n-        else echo APPLY your_fix_name ; fi\n-\n-    and ``fixfixes'' is invoked thus:\n-\n-        fixfixes filename.h your_fix_name < filename.h > /tmp/fixed\n-\n-    The file name argument is required, but is only used as a hint\n-    for use by ``your_fix_name'', it is not used for obtaining the\n-    data.  Also, ``your_fix_name'' and ``your_test_name'' may be\n-    the same, since fix names and test names are in different\n-    \"name spaces.\"\n-\n-    The ``fixincl'' program is a little harder to work with  :-}.\n-    It was written with the expectation that it would be run\n-    inside of the fixincl.sh script that handles everything.\n-\n-    Run it with no arguments to get usage hints, but here is what\n-    you will need to do (approximately):\n-\n-        FI=${top_builddir}/gcc/fixinc/fixincl\n-        TARGET_MACHINE=`sh ${top_srcdir}/config.guess`\n-        SRCDIR=/usr/include\n-        DESTDIR=/tmp/fixtest\n-        VERBOSE=4\n-        FIND_BASE=\".\"\n-        export TARGET_MACHINE SRCDIR DESTDIR VERBOSE FIND_BASE\n-        rm -rf ${DESTDIR}\n-        mkdir -p ${DESTDIR}\n-        cd ${SRCDIR}\n-        find * -follow -type f -name '*.h' > ${DESTDIR}/LIST\n-        # you may edit this to the list you want\n-        ${FI} ${DESTDIR}/LIST > /dev/null 2> ${DESTDIR}/LOG\n-\n-    Check your results in ${DESTDIR}/LOG.  The stdout output\n-    is merely some shell commands that are relevant only to\n-    the fixincl.sh shell script.\n+    GCC.  But you can also:\n+\n+        cd ${top_builddir}/gcc\n+        rm -rf fixinc.sh include/ stmp-fixinc\n+        make stmp-fixinc\n+\n+    I would really recommend, however:\n+\n+        cd ${top_builddir}/gcc/fixinc\n+        make check\n+\n+    To do this, you *must* have autogen installed on your system.\n+    The \"check\" step will proceed to construct a shell script that\n+    will exercize all the fixes, using the sample test_text\n+    provided with each fix.  Once done, the changes made will\n+    be compared against the changes saved in the source directory.\n+    If you are changing the tests or fixes, the change will likely\n+    be highlighted."}, {"sha": "aae8a9478750b8bf20ca0522c8778d4a211fc79a", "filename": "gcc/fixinc/check.diff", "status": "modified", "additions": 132, "deletions": 103, "changes": 235, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Fcheck.diff", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Fcheck.diff", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fcheck.diff?ref=da6d3adf1e660ce6b7da0d422395664faded45cf", "patch": "@@ -4,13 +4,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef ARM_NORCROFT_HINT_CHECK\n+  #if defined( ARM_NORCROFT_HINT_CHECK )\n ! ___type p_type mumble;\n   #endif  /* ARM_NORCROFT_HINT_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef ARM_NORCROFT_HINT_CHECK\n+  #if defined( ARM_NORCROFT_HINT_CHECK )\n ! p_type mumble;\n   #endif  /* ARM_NORCROFT_HINT_CHECK */\n *** inc/X11/ShellP.h\n@@ -19,7 +19,7 @@\n *** 2,8 ****\n --- 2,12 ----\n   \n-  #ifndef X11_CLASS_CHECK\n+  #if defined( X11_CLASS_CHECK )\n   struct {\n + #ifdef __cplusplus\n + \tchar *c_class;\n@@ -36,7 +36,7 @@\n --- 1,7 ----\n   \n   \n-  #ifndef X11_SPRINTF_CHECK\n+  #if defined( X11_SPRINTF_CHECK )\n + #ifndef __STDC__\n   extern char *\tsprintf();\n + #endif /* !defined __STDC__ */\n@@ -47,14 +47,14 @@\n *** 1,6 ****\n   \n   \n-  #ifndef X11_CLASS_USAGE_CHECK\n+  #if defined( X11_CLASS_USAGE_CHECK )\n ! extern mumble (int  class);\n   \n   #endif  /* X11_CLASS_USAGE_CHECK */\n --- 1,6 ----\n   \n   \n-  #ifndef X11_CLASS_USAGE_CHECK\n+  #if defined( X11_CLASS_USAGE_CHECK )\n ! extern mumble (int  c_class);\n   \n   #endif  /* X11_CLASS_USAGE_CHECK */\n@@ -63,15 +63,15 @@\n ***************\n *** 2,8 ****\n   \n-  #ifndef X11_NEW_CHECK\n+  #if defined( X11_NEW_CHECK )\n   struct wedge {\n      Widget\told, new; /* fix the new */\n   };\n ! extern Wedged( Widget new, Widget old );\n   #endif  /* X11_NEW_CHECK */\n --- 2,12 ----\n   \n-  #ifndef X11_NEW_CHECK\n+  #if defined( X11_NEW_CHECK )\n   struct wedge {\n + #ifdef __cplusplus\n + \tWidget\told, c_new;\n@@ -98,11 +98,11 @@\n + #include <stdio.h>\n   \n   \n-  #ifndef BROKEN_ASSERT_STDIO_CHECK\n+  #if defined( BROKEN_ASSERT_STDIO_CHECK )\n ***************\n *** 8,10 ****\n --- 18,24 ----\n-  #ifndef BROKEN_ASSERT_STDLIB_CHECK\n+  #if defined( BROKEN_ASSERT_STDLIB_CHECK )\n   extern void exit ( int );\n   #endif  /* BROKEN_ASSERT_STDLIB_CHECK */\n + \n@@ -116,7 +116,7 @@\n --- 1,11 ----\n   \n   \n-  #ifndef DEC_INTERN_ASM_CHECK\n+  #if defined( DEC_INTERN_ASM_CHECK )\n + #ifdef __DECC\n   float fasm {\n       ... asm stuff ...\n@@ -131,24 +131,24 @@\n *** 1,16 ****\n   \n   \n-  #ifndef AVOID_BOOL_CHECK\n+  #if defined( AVOID_BOOL_CHECK )\n   # define bool\t char \n   typedef unsigned int\tbool \t; /* bool type */\n   #endif  /* AVOID_BOOL_CHECK */\n   \n   \n-  #ifndef BAD_STRUCT_TERM_CHECK\n+  #if defined( BAD_STRUCT_TERM_CHECK )\n ! typedef struct term;\n   #endif  /* BAD_STRUCT_TERM_CHECK */\n   \n   \n-  #ifndef LYNX_VOID_INT_CHECK\n+  #if defined( LYNX_VOID_INT_CHECK )\n ! # define\tvoid\tint \t/* curses foiled again */\n   #endif  /* LYNX_VOID_INT_CHECK */\n --- 1,20 ----\n   \n   \n-  #ifndef AVOID_BOOL_CHECK\n+  #if defined( AVOID_BOOL_CHECK )\n + #ifndef __cplusplus\n   # define bool\t char \n + #endif\n@@ -158,12 +158,12 @@\n   #endif  /* AVOID_BOOL_CHECK */\n   \n   \n-  #ifndef BAD_STRUCT_TERM_CHECK\n+  #if defined( BAD_STRUCT_TERM_CHECK )\n ! struct term;\n   #endif  /* BAD_STRUCT_TERM_CHECK */\n   \n   \n-  #ifndef LYNX_VOID_INT_CHECK\n+  #if defined( LYNX_VOID_INT_CHECK )\n ! /* curses foiled again */\n   #endif  /* LYNX_VOID_INT_CHECK */\n *** inc/fcntl.h\n@@ -172,27 +172,27 @@\n *** 1,5 ****\n   \n   \n-  #ifndef LYNXOS_FCNTL_PROTO_CHECK\n+  #if defined( LYNXOS_FCNTL_PROTO_CHECK )\n ! extern int fcntl(int, int, int);\n   #endif  /* LYNXOS_FCNTL_PROTO_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef LYNXOS_FCNTL_PROTO_CHECK\n+  #if defined( LYNXOS_FCNTL_PROTO_CHECK )\n ! extern int fcntl(int, int, ...);\n   #endif  /* LYNXOS_FCNTL_PROTO_CHECK */\n *** inc/inttypes.h\n --- res/inttypes.h\n ***************\n *** 2,6 ****\n   \n-  #ifndef HPUX11_UINT32_C_CHECK\n+  #if defined( HPUX11_UINT32_C_CHECK )\n   #define CONCAT_U__(__c)\t__CONCAT__(__c,u)\n ! #define UINT32_C(__c)\t__CONCAT__(__CONCAT_U__(__c),l)\n   #endif  /* HPUX11_UINT32_C_CHECK */\n --- 2,6 ----\n   \n-  #ifndef HPUX11_UINT32_C_CHECK\n+  #if defined( HPUX11_UINT32_C_CHECK )\n   #define CONCAT_U__(__c)\t__CONCAT__(__c,u)\n ! #define UINT32_C(__c) __CONCAT__(__c,ul)\n   #endif  /* HPUX11_UINT32_C_CHECK */\n@@ -201,14 +201,14 @@\n ***************\n *** 2,7 ****\n   \n-  #ifndef BAD_LVAL_CHECK\n+  #if defined( BAD_LVAL_CHECK )\n   #pragma extern_prefix \"_FOO\"\n ! #define something(x,y,z) _FOOsomething(x,y,z)\n   #define mumble _FOOmumble\n   #endif  /* BAD_LVAL_CHECK */\n --- 2,7 ----\n   \n-  #ifndef BAD_LVAL_CHECK\n+  #if defined( BAD_LVAL_CHECK )\n   #pragma extern_prefix \"_FOO\"\n ! #define something _FOOsomething\n   #define mumble _FOOmumble\n@@ -220,51 +220,60 @@\n --- 1,7 ----\n   \n   \n-  #ifndef LIMITS_IFNDEFS_CHECK\n+  #if defined( LIMITS_IFNDEFS_CHECK )\n + #ifndef DBL_DIG\n    #\tdefine\tDBL_DIG \t 0  /* somthin' */\n + #endif\n   #endif  /* LIMITS_IFNDEFS_CHECK */\n *** inc/math.h\n --- res/math.h\n ***************\n-*** 1,35 ****\n+*** 1,44 ****\n   \n   \n-  #ifndef BROKEN_CABS_CHECK\n+  #if defined( BROKEN_CABS_CHECK )\n   #ifdef __STDC__\n-- extern double cabs(struct dbl_hypot);\n+! extern double cabs(struct dbl_hypot);\n   #else\n-- extern double cabs();\n+! extern double cabs();\n   #endif\n+! extern double cabs(); /* This is a comment\n+                           and it ends here. */\n   #endif  /* BROKEN_CABS_CHECK */\n   \n   \n-  #ifndef FIX_HEADER_BREAKAGE_CHECK\n+  #if defined( FIX_HEADER_BREAKAGE_CHECK )\n ! extern double floor(), ceil(), fmod(), fabs();\n   #endif  /* FIX_HEADER_BREAKAGE_CHECK */\n   \n   \n-  #ifndef HPUX8_BOGUS_INLINES_CHECK\n+  #if defined( HPUX11_FABSF_CHECK )\n+  #ifdef _PA_RISC\n+  #  define fabsf(x) ((float)fabs((double)(float)(x)))\n+  #endif\n+  #endif  /* HPUX11_FABSF_CHECK */\n+  \n+  \n+  #if defined( HPUX8_BOGUS_INLINES_CHECK )\n ! inline int abs(int v) { return (v>=0)?v:-v; }\n ! inline double sqr(double v) { return v**0.5; }\n   #endif  /* HPUX8_BOGUS_INLINES_CHECK */\n   \n   \n-  #ifndef ISC_FMOD_CHECK\n+  #if defined( ISC_FMOD_CHECK )\n ! extern double\tfmod(double);\n   #endif  /* ISC_FMOD_CHECK */\n   \n   \n-  #ifndef M88K_BAD_HYPOT_OPT_CHECK\n+  #if defined( M88K_BAD_HYPOT_OPT_CHECK )\n   extern double hypot();\n   #endif  /* M88K_BAD_HYPOT_OPT_CHECK */\n   \n   \n-  #ifndef MATH_EXCEPTION_CHECK\n+  #if defined( MATH_EXCEPTION_CHECK )\n   typedef struct exception t_math_exception;\n   #endif  /* MATH_EXCEPTION_CHECK */\n---- 1,56 ----\n+--- 1,69 ----\n + #ifndef FIXINC_MATH_EXCEPTION_CHECK\n + #define FIXINC_MATH_EXCEPTION_CHECK 1\n + \n@@ -273,30 +282,43 @@\n + #endif\n   \n   \n-  #ifndef BROKEN_CABS_CHECK\n+  #if defined( BROKEN_CABS_CHECK )\n   #ifdef __STDC__\n+! \n   #else\n+! \n   #endif\n+!  /* This is a comment\n+                           and it ends here. */\n   #endif  /* BROKEN_CABS_CHECK */\n   \n   \n-  #ifndef FIX_HEADER_BREAKAGE_CHECK\n+  #if defined( FIX_HEADER_BREAKAGE_CHECK )\n ! extern double floor(), ceil(), fmod(), fabs _PARAMS((double));\n   #endif  /* FIX_HEADER_BREAKAGE_CHECK */\n   \n   \n-  #ifndef HPUX8_BOGUS_INLINES_CHECK\n+  #if defined( HPUX11_FABSF_CHECK )\n+  #ifdef _PA_RISC\n++ #ifndef __cplusplus\n+  #  define fabsf(x) ((float)fabs((double)(float)(x)))\n+  #endif\n++ #endif\n+  #endif  /* HPUX11_FABSF_CHECK */\n+  \n+  \n+  #if defined( HPUX8_BOGUS_INLINES_CHECK )\n ! extern \"C\" int abs(int);\n ! \n   #endif  /* HPUX8_BOGUS_INLINES_CHECK */\n   \n   \n-  #ifndef ISC_FMOD_CHECK\n+  #if defined( ISC_FMOD_CHECK )\n ! extern double\tfmod(double, double);\n   #endif  /* ISC_FMOD_CHECK */\n   \n   \n-  #ifndef M88K_BAD_HYPOT_OPT_CHECK\n+  #if defined( M88K_BAD_HYPOT_OPT_CHECK )\n   extern double hypot();\n + /* Workaround a stupid Motorola optimization if one\n +    of x or y is 0.0 and the other is negative!  */\n@@ -313,7 +335,7 @@\n   #endif  /* M88K_BAD_HYPOT_OPT_CHECK */\n   \n   \n-  #ifndef MATH_EXCEPTION_CHECK\n+  #if defined( MATH_EXCEPTION_CHECK )\n   typedef struct exception t_math_exception;\n   #endif  /* MATH_EXCEPTION_CHECK */\n + #ifdef __cplusplus\n@@ -347,7 +369,7 @@\n --- 1,6 ----\n   \n   \n-  #ifndef STRUCT_SOCKADDR_CHECK\n+  #if defined( STRUCT_SOCKADDR_CHECK )\n + struct sockaddr;\n   extern AUTH* authdes_create( struct sockaddr* );\n   #endif  /* STRUCT_SOCKADDR_CHECK */\n@@ -357,13 +379,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef NESTED_AUTH_DES_CHECK\n+  #if defined( NESTED_AUTH_DES_CHECK )\n ! /*#include <rpc/auth_des.h> /* skip this */\n   #endif  /* NESTED_AUTH_DES_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef NESTED_AUTH_DES_CHECK\n+  #if defined( NESTED_AUTH_DES_CHECK )\n ! /*#include <rpc/auth_des.h> */ /* skip this */\n   #endif  /* NESTED_AUTH_DES_CHECK */\n *** inc/rpc/xdr.h\n@@ -373,7 +395,7 @@\n --- 1,6 ----\n   \n   \n-  #ifndef STRUCT_FILE_CHECK\n+  #if defined( STRUCT_FILE_CHECK )\n + struct __file_s;\n   extern void xdrstdio_create( struct __file_s* );\n   #endif  /* STRUCT_FILE_CHECK */\n@@ -383,13 +405,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef KANDR_CONCAT_CHECK\n+  #if defined( KANDR_CONCAT_CHECK )\n ! #define __CONCAT__(a,b) a/**/b\n   #endif  /* KANDR_CONCAT_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef KANDR_CONCAT_CHECK\n+  #if defined( KANDR_CONCAT_CHECK )\n ! #define __CONCAT__(a,b) a##b\n   #endif  /* KANDR_CONCAT_CHECK */\n *** inc/stdio.h\n@@ -398,12 +420,12 @@\n *** 1,12 ****\n   \n   \n-  #ifndef ALPHA_GETOPT_CHECK\n+  #if defined( ALPHA_GETOPT_CHECK )\n ! extern int getopt(int, char *[], char *);\n   #endif  /* ALPHA_GETOPT_CHECK */\n   \n   \n-  #ifndef ISC_OMITS_WITH_STDC_CHECK\n+  #if defined( ISC_OMITS_WITH_STDC_CHECK )\n ! #if !defined(__STDC__) && !defined(_POSIX_SOURCE) /* ? ! */\n   int foo;\n   #endif\n@@ -416,20 +438,20 @@\n + #include <stdarg.h>\n   \n   \n-  #ifndef ALPHA_GETOPT_CHECK\n+  #if defined( ALPHA_GETOPT_CHECK )\n ! extern int getopt(int, char *const[], const char *);\n   #endif  /* ALPHA_GETOPT_CHECK */\n   \n   \n-  #ifndef ISC_OMITS_WITH_STDC_CHECK\n+  #if defined( ISC_OMITS_WITH_STDC_CHECK )\n ! #if !defined(_POSIX_SOURCE) /* ? ! */\n   int foo;\n   #endif\n   #endif  /* ISC_OMITS_WITH_STDC_CHECK */\n ***************\n *** 15,17 ****\n --- 20,24 ----\n-  #ifndef STDIO_STDARG_H_CHECK\n+  #if defined( STDIO_STDARG_H_CHECK )\n   \n   #endif  /* STDIO_STDARG_H_CHECK */\n + \n@@ -440,15 +462,15 @@\n *** 1,7 ****\n   \n   \n-  #ifndef ARM_WCHAR_CHECK\n+  #if defined( ARM_WCHAR_CHECK )\n ! # ifndef \t __wchar_t /* we don't have wchar_t yet, ... */\n ! #  define  __wchar_t  short\n   # endif /* __wchar_t */\n   #endif  /* ARM_WCHAR_CHECK */\n --- 1,7 ----\n   \n   \n-  #ifndef ARM_WCHAR_CHECK\n+  #if defined( ARM_WCHAR_CHECK )\n ! # ifndef \t _GCC_WCHAR_T /* we don't have wchar_t yet, ... */\n ! #  define  _GCC_WCHAR_T  short\n   # endif /* __wchar_t */\n@@ -459,13 +481,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef BADQUOTE_CHECK\n+  #if defined( BADQUOTE_CHECK )\n ! /* doesn't have matched single quotes */\n   #endif  /* BADQUOTE_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef BADQUOTE_CHECK\n+  #if defined( BADQUOTE_CHECK )\n ! /* does not have matched single quotes */\n   #endif  /* BADQUOTE_CHECK */\n *** inc/sunwindow/win_lock.h\n@@ -474,15 +496,15 @@\n *** 1,7 ****\n   \n   \n-  #ifndef ECD_CURSOR_CHECK\n+  #if defined( ECD_CURSOR_CHECK )\n ! #ifdef ecd.cursor\n   #error bogus\n ! #endif /* ecd+cursor */\n   #endif  /* ECD_CURSOR_CHECK */\n --- 1,7 ----\n   \n   \n-  #ifndef ECD_CURSOR_CHECK\n+  #if defined( ECD_CURSOR_CHECK )\n ! #ifdef ecd_cursor\n   #error bogus\n ! #endif /* ecd_cursor */\n@@ -493,15 +515,15 @@\n *** 1,7 ****\n   \n   \n-  #ifndef ALPHA_PARENS_CHECK\n+  #if defined( ALPHA_PARENS_CHECK )\n ! #ifndef(__mips64) /* bogus */\n   extern int foo;\n   #endif\n   #endif  /* ALPHA_PARENS_CHECK */\n --- 1,7 ----\n   \n   \n-  #ifndef ALPHA_PARENS_CHECK\n+  #if defined( ALPHA_PARENS_CHECK )\n ! #ifndef __mips64 /* bogus */\n   extern int foo;\n   #endif\n@@ -512,13 +534,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef IRIX_ASM_APOSTROPHE_CHECK\n+  #if defined( IRIX_ASM_APOSTROPHE_CHECK )\n ! # and we're on vacation\n   #endif  /* IRIX_ASM_APOSTROPHE_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef IRIX_ASM_APOSTROPHE_CHECK\n+  #if defined( IRIX_ASM_APOSTROPHE_CHECK )\n ! # and we are on vacation\n   #endif  /* IRIX_ASM_APOSTROPHE_CHECK */\n *** inc/sys/file.h\n@@ -527,29 +549,29 @@\n *** 1,5 ****\n   \n   \n-  #ifndef HP_SYSFILE_CHECK\n+  #if defined( HP_SYSFILE_CHECK )\n ! extern void foo(...); /* HPUX_SOURCE - bad varargs */\n   #endif  /* HP_SYSFILE_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef HP_SYSFILE_CHECK\n+  #if defined( HP_SYSFILE_CHECK )\n ! extern void foo(struct file *, ...); /* HPUX_SOURCE - bad varargs */\n   #endif  /* HP_SYSFILE_CHECK */\n *** inc/sys/limits.h\n --- res/sys/limits.h\n ***************\n *** 2,8 ****\n   \n-  #ifndef NESTED_SYS_LIMITS_CHECK\n+  #if defined( NESTED_SYS_LIMITS_CHECK )\n   /*\n ! #define CHILD_MAX 20 /* Max, Max, ... */ /*\n ! #define OPEN_MAX  20 /* Max, Max, ... */\n   \n   #endif  /* NESTED_SYS_LIMITS_CHECK */\n --- 2,8 ----\n   \n-  #ifndef NESTED_SYS_LIMITS_CHECK\n+  #if defined( NESTED_SYS_LIMITS_CHECK )\n   /*\n ! #define CHILD_MAX 20  Max, Max, ... */ /*\n ! #define OPEN_MAX  20  Max, Max, ... */\n@@ -568,7 +590,7 @@\n + #endif\n   \n   \n-  #ifndef CXX_UNREADY_CHECK\n+  #if defined( CXX_UNREADY_CHECK )\n   extern void* malloc( size_t );\n   #endif  /* CXX_UNREADY_CHECK */\n + #ifdef __cplusplus\n@@ -582,25 +604,25 @@\n *** 1,11 ****\n   \n   \n-  #ifndef AUX_ASM_CHECK\n+  #if defined( AUX_ASM_CHECK )\n ! #ifndef NOINLINE /* ain't got no inline, so we got it */\n   #endif /* NOINLINE */\n   #endif  /* AUX_ASM_CHECK */\n   \n   \n-  #ifndef HPUX_MAXINT_CHECK\n+  #if defined( HPUX_MAXINT_CHECK )\n   #define MAXINT 0x7FFFFFFF\n   #endif  /* HPUX_MAXINT_CHECK */\n --- 1,13 ----\n   \n   \n-  #ifndef AUX_ASM_CHECK\n+  #if defined( AUX_ASM_CHECK )\n ! #if !defined(NOINLINE) && !defined(__GNUC__) /* ain't got no inline, so we got it */\n   #endif /* NOINLINE */\n   #endif  /* AUX_ASM_CHECK */\n   \n   \n-  #ifndef HPUX_MAXINT_CHECK\n+  #if defined( HPUX_MAXINT_CHECK )\n + #ifndef MAXINT\n   #define MAXINT 0x7FFFFFFF\n + #endif\n@@ -611,13 +633,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef AIX_VOLATILE_CHECK\n+  #if defined( AIX_VOLATILE_CHECK )\n ! typedef volatile int sig_atomic_t;\n   #endif  /* AIX_VOLATILE_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef AIX_VOLATILE_CHECK\n+  #if defined( AIX_VOLATILE_CHECK )\n ! typedef int sig_atomic_t;\n   #endif  /* AIX_VOLATILE_CHECK */\n *** inc/sys/spinlock.h\n@@ -626,15 +648,15 @@\n *** 1,7 ****\n   \n   \n-  #ifndef HP_INLINE_CHECK\n+  #if defined( HP_INLINE_CHECK )\n ! # include \"../machine/inline.h\"\n   # include \"../machine/dontfix.h\"\n ! # include \"../machine/psl.h\"\n   #endif  /* HP_INLINE_CHECK */\n --- 1,7 ----\n   \n   \n-  #ifndef HP_INLINE_CHECK\n+  #if defined( HP_INLINE_CHECK )\n ! # include <machine/inline.h>\n   # include \"../machine/dontfix.h\"\n ! # include <machine/psl.h>\n@@ -645,13 +667,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef M88K_BAD_S_IF_CHECK\n+  #if defined( M88K_BAD_S_IF_CHECK )\n ! #define S_ISREG(m) (m & S_IFREG) /* is regular? */\n   #endif  /* M88K_BAD_S_IF_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef M88K_BAD_S_IF_CHECK\n+  #if defined( M88K_BAD_S_IF_CHECK )\n ! #define S_ISREG(m) (((m) & S_IFMT) == S_IFREG) /* is regular? */\n   #endif  /* M88K_BAD_S_IF_CHECK */\n *** inc/sys/time.h\n@@ -660,13 +682,13 @@\n *** 1,5 ****\n   \n   \n-  #ifndef HPUX_SYSTIME_CHECK\n+  #if defined( HPUX_SYSTIME_CHECK )\n ! extern struct sigevent;\n   #endif  /* HPUX_SYSTIME_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef HPUX_SYSTIME_CHECK\n+  #if defined( HPUX_SYSTIME_CHECK )\n ! struct sigevent;\n   #endif  /* HPUX_SYSTIME_CHECK */\n *** inc/sys/types.h\n@@ -675,14 +697,14 @@\n *** 1,6 ****\n   \n   \n-  #ifndef IRIX_MULTILINE_CMNT_CHECK\n+  #if defined( IRIX_MULTILINE_CMNT_CHECK )\n ! /* we check the type of the result\n ! // of the sizeof something.  This is a bad test :-( */\n   #endif  /* IRIX_MULTILINE_CMNT_CHECK */\n --- 1,6 ----\n   \n   \n-  #ifndef IRIX_MULTILINE_CMNT_CHECK\n+  #if defined( IRIX_MULTILINE_CMNT_CHECK )\n ! /* we check the type of the result */\n ! // /* of the sizeof something.  This is a bad test :-( */\n   #endif  /* IRIX_MULTILINE_CMNT_CHECK */\n@@ -692,7 +714,7 @@\n *** 2,7 ****\n --- 2,8 ----\n   \n-  #ifndef AIX_SYSWAIT_CHECK\n+  #if defined( AIX_SYSWAIT_CHECK )\n   /* bos325, */\n + struct rusage;\n   extern pid_t wait3();\n@@ -704,67 +726,63 @@\n *** 1,33 ****\n   \n   \n-  #ifndef CTRL_QUOTES_DEF_CHECK\n+  #if defined( CTRL_QUOTES_DEF_CHECK )\n ! #define BSD43_CTRL(n, x) (('n'<<8)+x)\n   #endif  /* CTRL_QUOTES_DEF_CHECK */\n   \n   \n-  #ifndef CTRL_QUOTES_USE_CHECK\n+  #if defined( CTRL_QUOTES_USE_CHECK )\n ! #define TIOCFOO BSD43_CTRL(T, 1)\n   #endif  /* CTRL_QUOTES_USE_CHECK */\n   \n   \n-  #ifndef IO_QUOTES_DEF_CHECK\n+  #if defined( IO_QUOTES_DEF_CHECK )\n ! #define BSD43__IOWR(n, x) (('n'<<8)+x)\n   #endif  /* IO_QUOTES_DEF_CHECK */\n   \n   \n-  #ifndef IO_QUOTES_USE_CHECK\n+  #if defined( IO_QUOTES_USE_CHECK )\n ! #define TIOCFOO BSD43__IOWR(T, 1)\n   #endif  /* IO_QUOTES_USE_CHECK */\n   \n   \n-  #ifndef MACHINE_NAME_CHECK\n-! #ifdef i386 /* no uniform machine_name test, so\n-                 this only works on i?86 machines */\n+  #if defined( MACHINE_NAME_CHECK )\n   #endif  /* MACHINE_NAME_CHECK */\n   \n   \n-  #ifndef UNDEFINE_NULL_CHECK\n+  #if defined( UNDEFINE_NULL_CHECK )\n   #define NULL 0UL\r\n   #define NULL\t((void*)0)\n   \n   #endif  /* UNDEFINE_NULL_CHECK */\n --- 1,37 ----\n   \n   \n-  #ifndef CTRL_QUOTES_DEF_CHECK\n+  #if defined( CTRL_QUOTES_DEF_CHECK )\n ! #define BSD43_CTRL(n, x) ((n<<8)+x)\n   #endif  /* CTRL_QUOTES_DEF_CHECK */\n   \n   \n-  #ifndef CTRL_QUOTES_USE_CHECK\n+  #if defined( CTRL_QUOTES_USE_CHECK )\n ! #define TIOCFOO BSD43_CTRL('T', 1)\n   #endif  /* CTRL_QUOTES_USE_CHECK */\n   \n   \n-  #ifndef IO_QUOTES_DEF_CHECK\n+  #if defined( IO_QUOTES_DEF_CHECK )\n ! #define BSD43__IOWR(n, x) ((n<<8)+x)\n   #endif  /* IO_QUOTES_DEF_CHECK */\n   \n   \n-  #ifndef IO_QUOTES_USE_CHECK\n+  #if defined( IO_QUOTES_USE_CHECK )\n ! #define TIOCFOO BSD43__IOWR('T', 1)\n   #endif  /* IO_QUOTES_USE_CHECK */\n   \n   \n-  #ifndef MACHINE_NAME_CHECK\n-! #ifdef __i386__ /* no uniform machine_name test, so\n-                 this only works on i?86 machines */\n+  #if defined( MACHINE_NAME_CHECK )\n   #endif  /* MACHINE_NAME_CHECK */\n   \n   \n-  #ifndef UNDEFINE_NULL_CHECK\n+  #if defined( UNDEFINE_NULL_CHECK )\n + #ifndef NULL\r\n   #define NULL 0UL\r\n + #endif\r\n@@ -776,30 +794,41 @@\n *** inc/time.h\n --- res/time.h\n ***************\n-*** 1,5 ****\n+*** 1,3 ****\n+--- 1,6 ----\n++ #ifndef FIXINC_M88K_MULTI_INCL_CHECK\n++ #define FIXINC_M88K_MULTI_INCL_CHECK 1\n++ \n   \n   \n-  #ifndef VXWORKS_NEEDS_VXTYPES_CHECK\n+  #if defined( M88K_MULTI_INCL_CHECK )\n+***************\n+*** 6,10 ****\n+  \n+  \n+  #if defined( VXWORKS_NEEDS_VXTYPES_CHECK )\n ! uint_t\t_clocks_per_sec;\n   #endif  /* VXWORKS_NEEDS_VXTYPES_CHECK */\n---- 1,5 ----\n+--- 9,15 ----\n   \n   \n-  #ifndef VXWORKS_NEEDS_VXTYPES_CHECK\n+  #if defined( VXWORKS_NEEDS_VXTYPES_CHECK )\n ! unsigned int\t_clocks_per_sec;\n   #endif  /* VXWORKS_NEEDS_VXTYPES_CHECK */\n++ \n++ #endif  /* FIXINC_M88K_MULTI_INCL_CHECK */\n *** inc/unistd.h\n --- res/unistd.h\n ***************\n *** 1,5 ****\n   \n   \n-  #ifndef ALPHA_SBRK_CHECK\n+  #if defined( ALPHA_SBRK_CHECK )\n ! extern char* sbrk(ptrdiff_t increment);\n   #endif  /* ALPHA_SBRK_CHECK */\n --- 1,5 ----\n   \n   \n-  #ifndef ALPHA_SBRK_CHECK\n+  #if defined( ALPHA_SBRK_CHECK )\n ! extern void *sbrk(ptrdiff_t increment);\n   #endif  /* ALPHA_SBRK_CHECK */"}, {"sha": "10773a592fa8f6235c86f4aa8b1033be9d77dc47", "filename": "gcc/fixinc/check.tpl", "status": "modified", "additions": 18, "deletions": 4, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Fcheck.tpl", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Fcheck.tpl", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Fcheck.tpl?ref=da6d3adf1e660ce6b7da0d422395664faded45cf", "patch": "@@ -21,7 +21,21 @@ export TARGET_MACHINE DESTDIR SRCDIR FIND_BASE VERBOSE\n mkdir ${DESTDIR} ${SRCDIR}\n \n ( cd ${SRCDIR}\n-  mkdir netinet rpc sparc sundev sunwindow sys X11 Xm )\n+  set +e\n+  for f in [=\n+\n+  _EVAL fix.files _stack _join \"echo `\n+\n+  for f in %s\n+  do case $f in\n+     */* ) echo $f | sed 's;/[^/]*$;;' ;;\n+     esac\n+  done | sort -u\n+\n+  ` \" _printf _shell =]\n+  do\n+    mkdir $f || mkdir -p $f\n+  done ) > /dev/null 2>&1\n \n [=\n \n@@ -40,10 +54,10 @@ cat >> inc/[=\n     _IF files _exist =][=\n       files[0] =][=\n     _ELSE =]testing.h[=\n-    _ENDIF =] <<- '_HACK_EOF_'\n+    _ENDIF =] <<- _HACK_EOF_\n \n \n-\t#ifndef [=hackname _up=]_CHECK\n+\t#if defined( [=hackname _up=]_CHECK )\n [=test_text \"\\t\" _prefix=]\n \t#endif  /* [=hackname _up=]_CHECK */\n _HACK_EOF_\n@@ -65,7 +79,7 @@ do\n     echo \"Only in inc:  inc/$f\"\n   else\n     diff -c inc/$f res/$f | \\\n-      sed -e '1,2s;\t.*;;'\n+      sed -e '1,2s;\t.*;;' -e '/MACH_DIFF:/,/no uniform test,/d'\n   fi\n done > NEWDIFF < LIST\n "}, {"sha": "a81d50ad4f2fddee774aa381d7d810dbb6b89fae", "filename": "gcc/fixinc/fixincl.x", "status": "modified", "additions": 3, "deletions": 8, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Ffixincl.x", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Ffixincl.x", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Ffixincl.x?ref=da6d3adf1e660ce6b7da0d422395664faded45cf", "patch": "@@ -2291,13 +2291,8 @@ tTestDesc aM88k_Multi_InclTests[] = {\n /*\n  *  Fix Command Arguments for M88k_Multi_Incl\n  */\n-const char* apzM88k_Multi_InclPatch[] = { \"sh\", \"-c\",\n-    \"echo Fixing $file, to protect against multiple inclusion. >&2\\n\\\n-      cpp_wrapper=`echo $file | sed -e 's,\\\\.,_,g' -e 's,/,_,g'`\\n\\\n-      echo \\\"#ifndef __GCC_GOT_${cpp_wrapper}_\\\"\\n\\\n-      echo \\\"#define __GCC_GOT_${cpp_wrapper}_\\\"\\n\\\n-      cat\\n\\\n-      echo \\\"#endif /* ! __GCC_GOT_${cpp_wrapper}_ */\\\"\",\n+const char* apzM88k_Multi_InclPatch[] = {\n+    \"wrap\",\n     (char*)NULL };\n \n /* * * * * * * * * * * * * * * * * * * * * * * * * *\n@@ -5070,7 +5065,7 @@ tFixDesc fixDescList[ FIX_COUNT ] = {\n \n   {  zM88k_Multi_InclName,    zM88k_Multi_InclList,\n      apzM88k_Multi_InclMachs,\n-     M88K_MULTI_INCL_TEST_CT, FD_MACH_ONLY | FD_SHELL_SCRIPT,\n+     M88K_MULTI_INCL_TEST_CT, FD_MACH_ONLY | FD_SUBROUTINE,\n      aM88k_Multi_InclTests,   apzM88k_Multi_InclPatch },\n \n   {  zMachine_Ansi_H_Va_ListName,    zMachine_Ansi_H_Va_ListList,"}, {"sha": "a641e046a3fcb8e50c8fe34aaa2830bfdd5ce645", "filename": "gcc/fixinc/inclhack.def", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Finclhack.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/da6d3adf1e660ce6b7da0d422395664faded45cf/gcc%2Ffixinc%2Finclhack.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffixinc%2Finclhack.def?ref=da6d3adf1e660ce6b7da0d422395664faded45cf", "patch": "@@ -1284,13 +1284,8 @@ fix = {\n     mach     = \"m88k-tektronix-sysv3*\";\n     files    = \"time.h\";\n     bypass   = \"#ifndef\";\n-    shell    =\n-      \"echo Fixing $file, to protect against multiple inclusion. >&2\n-      cpp_wrapper=`echo $file | sed -e 's,\\\\.,_,g' -e 's,/,_,g'`\n-      echo \\\"#ifndef __GCC_GOT_${cpp_wrapper}_\\\"\n-      echo \\\"#define __GCC_GOT_${cpp_wrapper}_\\\"\n-      cat\n-      echo \\\"#endif /* ! __GCC_GOT_${cpp_wrapper}_ */\\\"\";\n+    c_fix    = wrap;\n+    test_text = \"\";\n };\n \n \n@@ -1314,8 +1309,11 @@ fix = {\n     hackname  = machine_name;\n     c_test    = machine_name;\n     c_fix     = machine_name;\n-    test_text = \"#ifdef i386 /* no uniform machine_name test, so\\n\"\n-                \"               this only works on i?86 machines */\";\n+    test_text =\n+    \"#if /* MACH_DIFF: */ \\\\\\n\"\n+    \"\\t   defined( i386 ) \\\\\\n\"\n+    \"\\t|| defined( sparc ) /*\\n\"\n+    \"no uniform test, so be careful  :-) */\";\n };\n \n "}]}