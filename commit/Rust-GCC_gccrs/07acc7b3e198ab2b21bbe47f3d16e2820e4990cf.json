{"sha": "07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDdhY2M3YjNlMTk4YWIyYjIxYmJlNDdmM2QxNmUyODIwZTQ5OTBjZg==", "commit": {"author": {"name": "James E Wilson", "email": "wilson@tuliptree.org", "date": "2008-04-14T23:38:40Z"}, "committer": {"name": "Jim Wilson", "email": "wilson@gcc.gnu.org", "date": "2008-04-14T23:38:40Z"}, "message": "ia64.c (rtx_needs_barrier): Handle UNSPEC_FR_SQRT_RECIP_APPROX_RES.\n\n* config/ia64/ia64.c (rtx_needs_barrier): Handle\nUNSPEC_FR_SQRT_RECIP_APPROX_RES.\n* config/ia64/ia64.c (UNSPEC_FR_SQRT_RECIP_APPROX_RES): Define.\n(divsi3_internal, divdi3_internal_lat, divdi3_internal_thr,\ndivsf3_internal_lat, sqrt_approx, sqrtsf2_internal_thr,\ndivdf3_internal_lat, sqrtdf2_internal_thr, divxf3_internal_lat,\ndivxf3_internal_thr, sqrtxf2_internal_thr, recip_approx): Use it.\n\nFrom-SVN: r134295", "tree": {"sha": "575c0259df59969d698d48d5be10ea746900c51c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/575c0259df59969d698d48d5be10ea746900c51c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/comments", "author": {"login": "jim-wilson", "id": 11654017, "node_id": "MDQ6VXNlcjExNjU0MDE3", "avatar_url": "https://avatars.githubusercontent.com/u/11654017?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jim-wilson", "html_url": "https://github.com/jim-wilson", "followers_url": "https://api.github.com/users/jim-wilson/followers", "following_url": "https://api.github.com/users/jim-wilson/following{/other_user}", "gists_url": "https://api.github.com/users/jim-wilson/gists{/gist_id}", "starred_url": "https://api.github.com/users/jim-wilson/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jim-wilson/subscriptions", "organizations_url": "https://api.github.com/users/jim-wilson/orgs", "repos_url": "https://api.github.com/users/jim-wilson/repos", "events_url": "https://api.github.com/users/jim-wilson/events{/privacy}", "received_events_url": "https://api.github.com/users/jim-wilson/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f3d0f304ff5dc9bd1836b1a1329038558ea572be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f3d0f304ff5dc9bd1836b1a1329038558ea572be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f3d0f304ff5dc9bd1836b1a1329038558ea572be"}], "stats": {"total": 60, "additions": 42, "deletions": 18}, "files": [{"sha": "e32aeeaa88f88538f6b06ee64d1cefb83fabde12", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "patch": "@@ -1,3 +1,13 @@\n+2008-04-14  James E. Wilson  <wilson@tuliptree.org>\n+\n+\t* config/ia64/ia64.c (rtx_needs_barrier): Handle\n+\tUNSPEC_FR_SQRT_RECIP_APPROX_RES.\n+\t* config/ia64/ia64.c (UNSPEC_FR_SQRT_RECIP_APPROX_RES): Define.\n+\t(divsi3_internal, divdi3_internal_lat, divdi3_internal_thr,\n+\tdivsf3_internal_lat, sqrt_approx, sqrtsf2_internal_thr,\n+\tdivdf3_internal_lat, sqrtdf2_internal_thr, divxf3_internal_lat,\n+\tdivxf3_internal_thr, sqrtxf2_internal_thr, recip_approx): Use it.\n+\n 2008-04-14  Ian Lance Taylor  <iant@google.com>\n \n \t* flags.h (POINTER_TYPE_OVERFLOW_UNDEFINED): Define."}, {"sha": "5b48eba14f517b0d212330bcc8a3a1cc0bfaddbb", "filename": "gcc/config/ia64/ia64.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/gcc%2Fconfig%2Fia64%2Fia64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/gcc%2Fconfig%2Fia64%2Fia64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.c?ref=07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler.\n-   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n    Free Software Foundation, Inc.\n    Contributed by James E. Wilson <wilson@cygnus.com> and\n \t\t  David Mosberger <davidm@hpl.hp.com>.\n@@ -5887,6 +5887,7 @@ rtx_needs_barrier (rtx x, struct reg_flags flags, int pred)\n \tcase UNSPEC_SETF_EXP:\n         case UNSPEC_ADDP4:\n \tcase UNSPEC_FR_SQRT_RECIP_APPROX:\n+\tcase UNSPEC_FR_SQRT_RECIP_APPROX_RES:\n \tcase UNSPEC_LDA:\n \tcase UNSPEC_LDS:\n \tcase UNSPEC_LDSA:"}, {"sha": "7135bf4da5857711957879f0f7462708818ea664", "filename": "gcc/config/ia64/ia64.md", "status": "modified", "additions": 30, "deletions": 17, "changes": 47, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/gcc%2Fconfig%2Fia64%2Fia64.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/07acc7b3e198ab2b21bbe47f3d16e2820e4990cf/gcc%2Fconfig%2Fia64%2Fia64.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fia64.md?ref=07acc7b3e198ab2b21bbe47f3d16e2820e4990cf", "patch": "@@ -1,5 +1,5 @@\n ;; IA-64 Machine description template\n-;; Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+;; Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n ;; Free Software Foundation, Inc.\n ;; Contributed by James E. Wilson <wilson@cygnus.com> and\n ;;\t\t  David Mosberger <davidm@hpl.hp.com>.\n@@ -87,6 +87,7 @@\n    (UNSPEC_CHKACLR              45)\n    (UNSPEC_CHKS                 47)\t\n    (UNSPEC_FR_RECIP_APPROX_RES  48)\n+   (UNSPEC_FR_SQRT_RECIP_APPROX_RES 49)\n   ])\n \n (define_constants\n@@ -2204,7 +2205,8 @@\n   \"TARGET_INLINE_INT_DIV\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 0) (div:XF (const_int 1) (match_dup 2)))\n+  [(parallel [(set (match_dup 0) (unspec:XF [(const_int 1) (match_dup 2)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 6) (unspec:BI [(match_dup 1) (match_dup 2)]\n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 1))])\n@@ -2617,7 +2619,8 @@\n   \"TARGET_INLINE_INT_DIV == INL_MIN_LAT\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 0) (div:XF (const_int 1) (match_dup 2)))\n+  [(parallel [(set (match_dup 0) (unspec:XF [(const_int 1) (match_dup 2)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 6) (unspec:BI [(match_dup 1) (match_dup 2)]\n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 1))])\n@@ -2676,7 +2679,8 @@\n   \"TARGET_INLINE_INT_DIV == INL_MAX_THR\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 0) (div:XF (const_int 1) (match_dup 2)))\n+  [(parallel [(set (match_dup 0) (unspec:XF [(const_int 1) (match_dup 2)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 5) (unspec:BI [(match_dup 1) (match_dup 2)] \n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 1))])\n@@ -3064,7 +3068,8 @@\n   \"TARGET_INLINE_FLOAT_DIV == INL_MIN_LAT\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 6) (div:XF (const_int 1) (match_dup 8)))\n+  [(parallel [(set (match_dup 6) (unspec:XF [(const_int 1) (match_dup 8)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 5) (unspec:BI [(match_dup 7) (match_dup 8)]\n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 0))])\n@@ -3116,7 +3121,8 @@\n (define_insn \"*sqrt_approx\"\n   [(set (match_operand:XF 0 \"fr_register_operand\" \"=f\")\n         (div:XF (const_int 1)\n-                (sqrt:XF (match_operand:XF 2 \"fr_register_operand\" \"f\"))))\n+\t\t(unspec:XF [(match_operand:XF 2 \"fr_register_operand\" \"f\")]\n+\t\t\t   UNSPEC_FR_SQRT_RECIP_APPROX_RES)))\n    (set (match_operand:BI 1 \"register_operand\" \"=c\")\n         (unspec:BI [(match_dup 2)] UNSPEC_FR_SQRT_RECIP_APPROX))\n    (use (match_operand:SI 3 \"const_int_operand\" \"\")) ]\n@@ -3181,10 +3187,11 @@\n     ;; y0 = 1/sqrt(a) in f7\n     (parallel [(set (match_dup 7)\n                     (div:XF (const_int 1)\n-                            (sqrt:XF (match_dup 8))))\n+\t\t\t    (unspec:XF [(match_dup 8)]\n+\t\t\t\t       UNSPEC_FR_SQRT_RECIP_APPROX_RES)))\n                (set (match_dup 6)\n                     (unspec:BI [(match_dup 8)]\n-                                 UNSPEC_FR_SQRT_RECIP_APPROX))\n+\t\t\t       UNSPEC_FR_SQRT_RECIP_APPROX))\n                (use (const_int 0))])\n     ;; Step 2\n     ;; H0 = 1/2 * y0 in f9\n@@ -3493,7 +3500,8 @@\n   \"TARGET_INLINE_FLOAT_DIV == INL_MIN_LAT\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 7) (div:XF (const_int 1) (match_dup 9)))\n+  [(parallel [(set (match_dup 7) (unspec:XF [(const_int 1) (match_dup 9)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 6) (unspec:BI [(match_dup 8) (match_dup 9)]\n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 0))])\n@@ -3613,10 +3621,11 @@\n     ;; y0 = 1/sqrt(a) in f7\n     (parallel [(set (match_dup 7)\n                     (div:XF (const_int 1)\n-                            (sqrt:XF (match_dup 8))))\n+\t\t\t    (unspec:XF [(match_dup 8)]\n+\t\t\t\t       UNSPEC_FR_SQRT_RECIP_APPROX_RES)))\n                (set (match_dup 6)\n                     (unspec:BI [(match_dup 8)]\n-                                 UNSPEC_FR_SQRT_RECIP_APPROX))\n+\t\t\t       UNSPEC_FR_SQRT_RECIP_APPROX))\n                (use (const_int 0))])\n     ;; Step 2\n     ;; H0 = 1/2 * y0 in f8\n@@ -4092,7 +4101,8 @@\n   \"TARGET_INLINE_FLOAT_DIV == INL_MIN_LAT\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 0) (div:XF (const_int 1) (match_dup 2)))\n+  [(parallel [(set (match_dup 0) (unspec:XF [(const_int 1) (match_dup 2)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 7) (unspec:BI [(match_dup 1) (match_dup 2)]\n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 0))])\n@@ -4170,7 +4180,8 @@\n   \"TARGET_INLINE_FLOAT_DIV == INL_MAX_THR\"\n   \"#\"\n   \"&& reload_completed\"\n-  [(parallel [(set (match_dup 0) (div:XF (const_int 1) (match_dup 2)))\n+  [(parallel [(set (match_dup 0) (unspec:XF [(const_int 1) (match_dup 2)]\n+\t\t\t\t\t    UNSPEC_FR_RECIP_APPROX_RES))\n \t      (set (match_dup 5) (unspec:BI [(match_dup 1) (match_dup 2)]\n \t\t\t\t\t    UNSPEC_FR_RECIP_APPROX))\n \t      (use (const_int 0))])\n@@ -4290,10 +4301,11 @@\n     ;; y0 = 1/sqrt(a) in f7\n     (parallel [(set (match_dup 8)\n                     (div:XF (const_int 1)\n-                            (sqrt:XF (match_dup 9))))\n+\t\t\t    (unspec:XF [(match_dup 9)]\n+\t\t\t\t       UNSPEC_FR_SQRT_RECIP_APPROX_RES)))\n                (set (match_dup 7)\n                     (unspec:BI [(match_dup 9)]\n-                                 UNSPEC_FR_SQRT_RECIP_APPROX))\n+\t\t\t       UNSPEC_FR_SQRT_RECIP_APPROX))\n                (use (const_int 0))])\n     ;; Step 2\n     ;; H0 = 1/2 * y0 in f9\n@@ -4406,8 +4418,9 @@\n \n (define_insn \"*recip_approx\"\n   [(set (match_operand:XF 0 \"fr_register_operand\" \"=f\")\n-\t(div:XF (const_int 1)\n-\t\t(match_operand:XF 3 \"fr_register_operand\" \"f\")))\n+\t(unspec:XF [(const_int 1)\n+\t\t    (match_operand:XF 3 \"fr_register_operand\" \"f\")]\n+\t\t   UNSPEC_FR_RECIP_APPROX_RES))\n    (set (match_operand:BI 1 \"register_operand\" \"=c\")\n \t(unspec:BI [(match_operand:XF 2 \"fr_register_operand\" \"f\")\n \t\t    (match_dup 3)] UNSPEC_FR_RECIP_APPROX))"}]}