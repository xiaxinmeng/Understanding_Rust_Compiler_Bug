{"sha": "fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmQ5MWZmYjgwNTFjM2E5OWI4ZmRmZmExYzYyMzRmOWY4ODRmY2UxYw==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2015-08-11T07:12:19Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2015-08-11T07:12:19Z"}, "message": "Fix test failure on Solaris 9 where strtod() does not accept hexadecimals\n\n2015-08-11  Iain Buclaw  <ibuclaw@gdcproject.org>\n\nlibiberty/\n\n\t* d-demangle.c (dlang_parse_real): Remove call to strtod.\n\t(strtod): Remove declaration.\n\t* testsuite/d-demangle-expected: Update float and complex literal\n\ttests to check correct hexadecimal demangling.\n\nFrom-SVN: r226774", "tree": {"sha": "2daa0406e920e83dd940e8567424cbc929f516a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2daa0406e920e83dd940e8567424cbc929f516a5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9f46780965e8b9c33f7fb77793297ddeaa39305a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9f46780965e8b9c33f7fb77793297ddeaa39305a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9f46780965e8b9c33f7fb77793297ddeaa39305a"}], "stats": {"total": 44, "additions": 22, "deletions": 22}, "files": [{"sha": "d1c632460e5bb4451cdb5f76d87e26013416957e", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "patch": "@@ -1,3 +1,10 @@\n+2015-08-11  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* d-demangle.c (dlang_parse_real): Remove call to strtod.\n+\t(strtod): Remove declaration.\n+\t* testsuite/d-demangle-expected: Update float and complex literal\n+\ttests to check correct hexadecimal demangling.\n+\n 2015-07-13  Mikhail Maltsev  <maltsevm@gmail.com>\n \n \t* cp-demangle.c (d_dump): Fix syntax error."}, {"sha": "3d7ccf67985ca584982507b0bbddb98648f9ce7e", "filename": "libiberty/d-demangle.c", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/libiberty%2Fd-demangle.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/libiberty%2Fd-demangle.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fd-demangle.c?ref=fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "patch": "@@ -28,7 +28,7 @@ If not, see <http://www.gnu.org/licenses/>.  */\n \n /* This file exports one function; dlang_demangle.\n \n-   This file imports strtol and strtod for decoding mangled literals.  */\n+   This file imports strtol for decoding mangled literals.  */\n \n #ifdef HAVE_CONFIG_H\n #include \"config.h\"\n@@ -44,7 +44,6 @@ If not, see <http://www.gnu.org/licenses/>.  */\n #include <stdlib.h>\n #else\n extern long strtol (const char *nptr, char **endptr, int base);\n-extern double strtod (const char *nptr, char **endptr);\n #endif\n \n #include <demangle.h>\n@@ -970,8 +969,6 @@ dlang_parse_real (string *decl, const char *mangled)\n {\n   char buffer[64];\n   int len = 0;\n-  double value;\n-  char *endptr;\n \n   /* Handle NAN and +-INF.  */\n   if (strncmp (mangled, \"NAN\", 3) == 0)\n@@ -1035,14 +1032,10 @@ dlang_parse_real (string *decl, const char *mangled)\n       mangled++;\n     }\n \n-  /* Convert buffer from hexadecimal to floating-point.  */\n+  /* Write out the demangled hexadecimal, rather than trying to\n+     convert the buffer into a floating-point value.  */\n   buffer[len] = '\\0';\n-  value = strtod (buffer, &endptr);\n-\n-  if (endptr == NULL || endptr != (buffer + len))\n-    return NULL;\n-\n-  len = snprintf (buffer, sizeof(buffer), \"%#g\", value);\n+  len = strlen (buffer);\n   string_appendn (decl, buffer, len);\n   return mangled;\n }"}, {"sha": "2b1cc4f2b2fb1205e6185b6404c0d656af4aed0a", "filename": "libiberty/testsuite/d-demangle-expected", "status": "modified", "additions": 11, "deletions": 11, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/libiberty%2Ftestsuite%2Fd-demangle-expected", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c/libiberty%2Ftestsuite%2Fd-demangle-expected", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Ftestsuite%2Fd-demangle-expected?ref=fd91ffb8051c3a99b8fdffa1c6234f9f884fce1c", "patch": "@@ -719,19 +719,19 @@ demangle.test!('\\U000186a0')\n #\n --format=dlang\n _D8demangle17__T4testVde0A8P6Zv\n-demangle.test!(42.0000)\n+demangle.test!(0x0.A8p6)\n #\n --format=dlang\n _D8demangle16__T4testVdeA8P2Zv\n-demangle.test!(42.0000)\n+demangle.test!(0xA.8p2)\n #\n --format=dlang\n _D8demangle18__T4testVdeN0A8P6Zv\n-demangle.test!(-42.0000)\n+demangle.test!(-0x0.A8p6)\n #\n --format=dlang\n _D8demangle31__T4testVde0F6E978D4FDF3B646P7Zv\n-demangle.test!(123.456)\n+demangle.test!(0x0.F6E978D4FDF3B646p7)\n #\n --format=dlang\n _D8demangle15__T4testVdeNANZv\n@@ -747,27 +747,27 @@ demangle.test!(-Inf)\n #\n --format=dlang\n _D8demangle23__T4testVfe0FFFFFFP128Zv\n-demangle.test!(3.40282e+38)\n+demangle.test!(0x0.FFFFFFp128)\n #\n --format=dlang\n _D8demangle32__T4testVde0FFFFFFFFFFFFF8P1024Zv\n-demangle.test!(1.79769e+308)\n+demangle.test!(0x0.FFFFFFFFFFFFF8p1024)\n #\n --format=dlang\n _D8demangle19__T4testVfe08PN125Zv\n-demangle.test!(1.17549e-38)\n+demangle.test!(0x0.8p-125)\n #\n --format=dlang\n _D8demangle20__T4testVde08PN1021Zv\n-demangle.test!(2.22507e-308)\n+demangle.test!(0x0.8p-1021)\n #\n --format=dlang\n _D8demangle51__T4testVrc0C4CCCCCCCCCCCCCDP4c0B666666666666666P6Zv\n-demangle.test!(12.3000+45.6000i)\n+demangle.test!(0x0.C4CCCCCCCCCCCCCDp4+0x0.B666666666666666p6i)\n #\n --format=dlang\n _D8demangle52__T4testVrcN0C4CCCCCCCCCCCCCDP4c0B666666666666666P6Zv\n-demangle.test!(-12.3000+45.6000i)\n+demangle.test!(-0x0.C4CCCCCCCCCCCCCDp4+0x0.B666666666666666p6i)\n #\n --format=dlang\n _D8demangle22__T4testVG3ua3_616263Zv\n@@ -787,7 +787,7 @@ demangle.test!([1, 2, 3, 4])\n #\n --format=dlang\n _D8demangle25__T4testVAdA2e08P1eN08P1Zv\n-demangle.test!([1.00000, -1.00000])\n+demangle.test!([0x0.8p1, -0x0.8p1])\n #\n --format=dlang\n _D8demangle23__T4testVHiiA2i1i2i3i4Zv"}]}