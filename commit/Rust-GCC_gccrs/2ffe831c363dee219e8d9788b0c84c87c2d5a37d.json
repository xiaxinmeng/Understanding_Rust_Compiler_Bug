{"sha": "2ffe831c363dee219e8d9788b0c84c87c2d5a37d", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmZmZTgzMWMzNjNkZWUyMTllOGQ5Nzg4YjBjODRjODdjMmQ1YTM3ZA==", "commit": {"author": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1994-11-16T00:53:50Z"}, "committer": {"name": "Doug Evans", "email": "dje@gnu.org", "date": "1994-11-16T00:53:50Z"}, "message": "(named_section): New argument decl, all callers changed.\n\nFrom-SVN: r8460", "tree": {"sha": "aa58723fa200242a9566531f7c25ae9c7a88a3be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aa58723fa200242a9566531f7c25ae9c7a88a3be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2ffe831c363dee219e8d9788b0c84c87c2d5a37d", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ffe831c363dee219e8d9788b0c84c87c2d5a37d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ffe831c363dee219e8d9788b0c84c87c2d5a37d", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ffe831c363dee219e8d9788b0c84c87c2d5a37d/comments", "author": null, "committer": null, "parents": [{"sha": "9a2073d855c6e922e83f9a36663f8f15b94201e9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a2073d855c6e922e83f9a36663f8f15b94201e9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a2073d855c6e922e83f9a36663f8f15b94201e9"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "1e6a8ae27ee17576483c9c0264a9e801e8d19c0f", "filename": "gcc/varasm.c", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2ffe831c363dee219e8d9788b0c84c87c2d5a37d/gcc%2Fvarasm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2ffe831c363dee219e8d9788b0c84c87c2d5a37d/gcc%2Fvarasm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvarasm.c?ref=2ffe831c363dee219e8d9788b0c84c87c2d5a37d", "patch": "@@ -203,19 +203,28 @@ in_text_section ()\n   return in_section == in_text;\n }\n \n-/* Tell assembler to change to named section.  */\n+/* Tell assembler to change to section NAME for DECL.\n+   If DECL is NULL, just switch to section NAME.\n+   If NAME is NULL, get the name from DECL.  */\n \n void\n-named_section (name)\n+named_section (decl, name)\n+     tree decl;\n      char *name;\n {\n+  if (decl != NULL_TREE\n+      && (TREE_CODE (decl) != FUNCTION_DECL && TREE_CODE (decl) != VAR_DECL))\n+    abort ();\n+  if (name == NULL)\n+    name = TREE_STRING_POINTER (DECL_SECTION_NAME (decl));\n+\n   if (in_section != in_named || strcmp (name, in_named_name))\n     {\n       in_named_name = name;\n       in_section = in_named;\n     \n #ifdef ASM_OUTPUT_SECTION_NAME\n-      ASM_OUTPUT_SECTION_NAME (asm_out_file, name);\n+      ASM_OUTPUT_SECTION_NAME (asm_out_file, decl, name);\n #else\n       /* Section attributes are not supported if this macro isn't provided -\n \t some host formats don't support them at all.  The front-end should\n@@ -713,7 +722,7 @@ assemble_start_function (decl, fnname)\n   output_constant_pool (fnname, decl);\n \n   if (IN_NAMED_SECTION (decl))\n-    named_section (TREE_STRING_POINTER (DECL_SECTION_NAME (decl)));\n+    named_section (decl, NULL);\n   else\n     text_section ();\n \n@@ -1141,7 +1150,7 @@ assemble_variable (decl, top_level, at_end, dont_output_data)\n \n   /* Switch to the proper section for this data.  */\n   if (IN_NAMED_SECTION (decl))\n-    named_section (TREE_STRING_POINTER (DECL_SECTION_NAME (decl)));\n+    named_section (decl, NULL);\n   else\n     {\n       /* C++ can have const variables that get initialized from constructors,\n@@ -2673,7 +2682,7 @@ output_constant_def_contents (exp, reloc, labelno)\n   int align;\n \n   if (IN_NAMED_SECTION (exp))\n-    named_section (TREE_STRING_POINTER (DECL_SECTION_NAME (exp)));\n+    named_section (exp, NULL);\n   else\n     {\n       /* First switch to text section, except for writable strings.  */"}]}