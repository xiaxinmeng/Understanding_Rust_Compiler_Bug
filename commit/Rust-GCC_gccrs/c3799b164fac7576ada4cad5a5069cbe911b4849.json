{"sha": "c3799b164fac7576ada4cad5a5069cbe911b4849", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM3OTliMTY0ZmFjNzU3NmFkYTRjYWQ1YTUwNjljYmU5MTFiNDg0OQ==", "commit": {"author": {"name": "Ville Voutilainen", "email": "ville.voutilainen@gmail.com", "date": "2019-01-10T13:14:57Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2019-01-10T13:14:57Z"}, "message": "Implement LWG 2221: formatted output operator for nullptr\n\n2019-01-10  Ville Voutilainen  <ville.voutilainen@gmail.com>\n\t    Jonathan Wakely  <jwakely@redhat.com>\n\n\tImplement LWG 2221\n\t* config/abi/pre/gnu.ver (GLIBCXX_3.4): Tighten patterns.\n\t(GLIBCXX_3.4.26): Add new exports.\n\t* include/Makefile.am: Add ostream-inst.cc. Move string-inst.cc to\n\tcorrect list of sources.\n\t* include/Makefile.in: Regenerate.\n\t* include/std/ostream (operator<<(nullptr_t)): New member function.\n\t* src/c++17/ostream-inst.cc: New file.\n\t* testsuite/27_io/basic_ostream/inserters_other/char/lwg2221.cc: New\n\ttest.\n\nCo-Authored-By: Jonathan Wakely <jwakely@redhat.com>\n\nFrom-SVN: r267808", "tree": {"sha": "f84fa45aa7f81f4cb7d7a541bd155b083ede00ec", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f84fa45aa7f81f4cb7d7a541bd155b083ede00ec"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c3799b164fac7576ada4cad5a5069cbe911b4849", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3799b164fac7576ada4cad5a5069cbe911b4849", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c3799b164fac7576ada4cad5a5069cbe911b4849", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c3799b164fac7576ada4cad5a5069cbe911b4849/comments", "author": {"login": "villevoutilainen", "id": 963599, "node_id": "MDQ6VXNlcjk2MzU5OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/963599?v=4", "gravatar_id": "", "url": "https://api.github.com/users/villevoutilainen", "html_url": "https://github.com/villevoutilainen", "followers_url": "https://api.github.com/users/villevoutilainen/followers", "following_url": "https://api.github.com/users/villevoutilainen/following{/other_user}", "gists_url": "https://api.github.com/users/villevoutilainen/gists{/gist_id}", "starred_url": "https://api.github.com/users/villevoutilainen/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/villevoutilainen/subscriptions", "organizations_url": "https://api.github.com/users/villevoutilainen/orgs", "repos_url": "https://api.github.com/users/villevoutilainen/repos", "events_url": "https://api.github.com/users/villevoutilainen/events{/privacy}", "received_events_url": "https://api.github.com/users/villevoutilainen/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e222497dcb808dc0c8e24dcded5b90bac4b59122", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e222497dcb808dc0c8e24dcded5b90bac4b59122", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e222497dcb808dc0c8e24dcded5b90bac4b59122"}], "stats": {"total": 90, "additions": 84, "deletions": 6}, "files": [{"sha": "fdaf477c358964d12c4c335cc81f10c4376fe1b2", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -1,3 +1,17 @@\n+2019-01-10  Ville Voutilainen  <ville.voutilainen@gmail.com>\n+\t    Jonathan Wakely  <jwakely@redhat.com>\n+\n+\tImplement LWG 2221\n+\t* config/abi/pre/gnu.ver (GLIBCXX_3.4): Tighten patterns.\n+\t(GLIBCXX_3.4.26): Add new exports.\n+\t* include/Makefile.am: Add ostream-inst.cc. Move string-inst.cc to\n+\tcorrect list of sources.\n+\t* include/Makefile.in: Regenerate.\n+\t* include/std/ostream (operator<<(nullptr_t)): New member function.\n+\t* src/c++17/ostream-inst.cc: New file.\n+\t* testsuite/27_io/basic_ostream/inserters_other/char/lwg2221.cc: New\n+\ttest.\n+\n 2019-01-10  Jonathan Wakely  <jwakely@redhat.com>\n \n \t* testsuite/util/testsuite_fs.h (nonexistent_path): Include name"}, {"sha": "788c2e0303cc558b2ec3d65606d2e2748e54320c", "filename": "libstdc++-v3/config/abi/pre/gnu.ver", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Fabi%2Fpre%2Fgnu.ver?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -495,7 +495,7 @@ GLIBCXX_3.4 {\n     _ZNSo8_M_writeEPKc[ilx];\n     _ZNSo3put*;\n     _ZNSo[5-9][a-z]*;\n-    _ZNSolsE*[^g];\n+    _ZNSolsE*[^Dg];\n \n     # std::basic_ostream<wchar_t>\n     _ZNSt13basic_ostreamIwSt11char_traitsIwEEC[12]Ev;\n@@ -509,7 +509,7 @@ GLIBCXX_3.4 {\n     _ZNSt13basic_ostreamIwSt11char_traitsIwEE5writeEPKw*;\n     _ZNSt13basic_ostreamIwSt11char_traitsIwEE6sentry*;\n     _ZNSt13basic_ostreamIwSt11char_traitsIwEE8_M_writeEPKw[ilx];\n-    _ZNSt13basic_ostreamIwSt11char_traitsIwEElsE*[^g];\n+    _ZNSt13basic_ostreamIwSt11char_traitsIwEElsE*[^Dg];\n \n     # std::ostream operators and inserters\n     _ZSt4end[ls]I[cw]St11char_traitsI[cw]EERSt13basic_ostream*;\n@@ -2223,6 +2223,10 @@ GLIBCXX_3.4.26 {\n     _ZNSt10filesystem7__cxx1128recursive_directory_iteratoraSEOS1_;\n     _ZNSt10filesystem7__cxx1128recursive_directory_iteratorppEv;\n \n+    # basic_ostream::operator<<(nullptr_t)\n+    _ZNSolsEDn;\n+    _ZNSt13basic_ostreamIwSt11char_traitsIwEElsEDn;\n+\n } GLIBCXX_3.4.25;\n \n # Symbols in the support library (libsupc++) have their own tag."}, {"sha": "2541d97888653ea121f3ece7ed8ed4acb0dbe0c9", "filename": "libstdc++-v3/include/std/ostream", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fostream", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fostream", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fostream?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -245,6 +245,12 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n       operator<<(const void* __p)\n       { return _M_insert(__p); }\n \n+#if __cplusplus >= 201703L\n+      __ostream_type&\n+      operator<<(nullptr_t)\n+      { return *this << \"nullptr\"; }\n+#endif\n+\n       /**\n        *  @brief  Extracting from another streambuf.\n        *  @param  __sb  A pointer to a streambuf"}, {"sha": "1a00770081ebc52658cdbe4edea9ccb5ecc09a3e", "filename": "libstdc++-v3/src/c++17/Makefile.am", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2FMakefile.am?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -41,6 +41,8 @@ endif\n if ENABLE_EXTERN_TEMPLATE\n # XTEMPLATE_FLAGS = -fno-implicit-templates\n inst_sources = \\\n+\tostream-inst.cc \\\n+\tstring-inst.cc \\\n \t$(extra_string_inst_sources)\n else\n # XTEMPLATE_FLAGS =\n@@ -52,7 +54,6 @@ sources = \\\n \tfs_ops.cc \\\n \tfs_path.cc \\\n \tmemory_resource.cc \\\n-\tstring-inst.cc \\\n \t$(extra_fs_sources)\n \n vpath % $(top_srcdir)/src/c++17"}, {"sha": "639cb5c1d2e80da857a7ffca977e089c74e6ca1d", "filename": "libstdc++-v3/src/c++17/Makefile.in", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2FMakefile.in?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -124,9 +124,10 @@ libc__17convenience_la_LIBADD =\n @ENABLE_DUAL_ABI_TRUE@am__objects_1 = cow-fs_dir.lo cow-fs_ops.lo \\\n @ENABLE_DUAL_ABI_TRUE@\tcow-fs_path.lo\n am__objects_2 = fs_dir.lo fs_ops.lo fs_path.lo memory_resource.lo \\\n-\tstring-inst.lo $(am__objects_1)\n+\t$(am__objects_1)\n @ENABLE_DUAL_ABI_TRUE@am__objects_3 = cow-string-inst.lo\n-@ENABLE_EXTERN_TEMPLATE_TRUE@am__objects_4 = $(am__objects_3)\n+@ENABLE_EXTERN_TEMPLATE_TRUE@am__objects_4 = ostream-inst.lo \\\n+@ENABLE_EXTERN_TEMPLATE_TRUE@\tstring-inst.lo $(am__objects_3)\n am_libc__17convenience_la_OBJECTS = $(am__objects_2) $(am__objects_4)\n libc__17convenience_la_OBJECTS = $(am_libc__17convenience_la_OBJECTS)\n AM_V_lt = $(am__v_lt_@AM_V@)\n@@ -426,14 +427,15 @@ headers =\n \n # XTEMPLATE_FLAGS = -fno-implicit-templates\n @ENABLE_EXTERN_TEMPLATE_TRUE@inst_sources = \\\n+@ENABLE_EXTERN_TEMPLATE_TRUE@\tostream-inst.cc \\\n+@ENABLE_EXTERN_TEMPLATE_TRUE@\tstring-inst.cc \\\n @ENABLE_EXTERN_TEMPLATE_TRUE@\t$(extra_string_inst_sources)\n \n sources = \\\n \tfs_dir.cc \\\n \tfs_ops.cc \\\n \tfs_path.cc \\\n \tmemory_resource.cc \\\n-\tstring-inst.cc \\\n \t$(extra_fs_sources)\n \n libc__17convenience_la_SOURCES = $(sources)  $(inst_sources)"}, {"sha": "b2fbafcef917422d60b1b799b529101419bb1e3a", "filename": "libstdc++-v3/src/c++17/ostream-inst.cc", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2Fostream-inst.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2Fostream-inst.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fc%2B%2B17%2Fostream-inst.cc?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -0,0 +1,42 @@\n+// std::ostream instantiations for C++17 -*- C++ -*-\n+\n+// Copyright (C) 2019 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// Under Section 7 of GPL version 3, you are granted additional\n+// permissions described in the GCC Runtime Library Exception, version\n+// 3.1, as published by the Free Software Foundation.\n+\n+// You should have received a copy of the GNU General Public License and\n+// a copy of the GCC Runtime Library Exception along with this program;\n+// see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n+// <http://www.gnu.org/licenses/>.\n+\n+//\n+// ISO C++ 14882:2017 28  Input/output library\n+//\n+\n+#include <ostream>\n+\n+namespace std _GLIBCXX_VISIBILITY(default)\n+{\n+_GLIBCXX_BEGIN_NAMESPACE_VERSION\n+\n+template basic_ostream<char>& basic_ostream<char>::operator<<(nullptr_t);\n+\n+#ifdef _GLIBCXX_USE_WCHAR_T\n+template basic_ostream<wchar_t>& basic_ostream<wchar_t>::operator<<(nullptr_t);\n+#endif\n+\n+_GLIBCXX_END_NAMESPACE_VERSION\n+} // namespace std"}, {"sha": "b4ff52b7d2c8d45dd3d2e096eafed7cce0a1e345", "filename": "libstdc++-v3/testsuite/27_io/basic_ostream/inserters_other/char/lwg2221.cc", "status": "added", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_ostream%2Finserters_other%2Fchar%2Flwg2221.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c3799b164fac7576ada4cad5a5069cbe911b4849/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_ostream%2Finserters_other%2Fchar%2Flwg2221.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_ostream%2Finserters_other%2Fchar%2Flwg2221.cc?ref=c3799b164fac7576ada4cad5a5069cbe911b4849", "patch": "@@ -0,0 +1,9 @@\n+// { dg-options \"-std=gnu++17 -fno-inline\" }\n+// { dg-do link }\n+\n+#include <iostream>\n+\n+int main()\n+{\n+  std::cout << nullptr << std::endl;\n+}"}]}