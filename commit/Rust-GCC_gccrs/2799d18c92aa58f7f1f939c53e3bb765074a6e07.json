{"sha": "2799d18c92aa58f7f1f939c53e3bb765074a6e07", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc5OWQxOGM5MmFhNThmN2YxZjkzOWM1M2UzYmI3NjUwNzRhNmUwNw==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-11-05T18:26:21Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-11-05T18:26:21Z"}, "message": "* gcc-interface/utils.c (gnat_type_for_mode): Handle vector modes.\n\nFrom-SVN: r153949", "tree": {"sha": "17d1c63e8798f11f7740ed054434db57ed00af23", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/17d1c63e8798f11f7740ed054434db57ed00af23"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2799d18c92aa58f7f1f939c53e3bb765074a6e07", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2799d18c92aa58f7f1f939c53e3bb765074a6e07", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2799d18c92aa58f7f1f939c53e3bb765074a6e07", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2799d18c92aa58f7f1f939c53e3bb765074a6e07/comments", "author": null, "committer": null, "parents": [{"sha": "22d12fc2cbe60ac835621b11cdaa52d8dc6e08ce", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/22d12fc2cbe60ac835621b11cdaa52d8dc6e08ce", "html_url": "https://github.com/Rust-GCC/gccrs/commit/22d12fc2cbe60ac835621b11cdaa52d8dc6e08ce"}], "stats": {"total": 28, "additions": 22, "deletions": 6}, "files": [{"sha": "8c98429a2f3a0c43b377b63067e8169140758dd4", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2799d18c92aa58f7f1f939c53e3bb765074a6e07/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2799d18c92aa58f7f1f939c53e3bb765074a6e07/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=2799d18c92aa58f7f1f939c53e3bb765074a6e07", "patch": "@@ -1,3 +1,7 @@\n+2009-11-05  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/utils.c (gnat_type_for_mode): Handle vector modes.\n+\n 2009-11-05  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* gcc-interface/trans.c (lvalue_required_p) <N_Unchecked_Conversion>:"}, {"sha": "c79dd4e7a65c98ab2225a9def9d3bc8c76114375", "filename": "gcc/ada/gcc-interface/utils.c", "status": "modified", "additions": 18, "deletions": 6, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2799d18c92aa58f7f1f939c53e3bb765074a6e07/gcc%2Fada%2Fgcc-interface%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2799d18c92aa58f7f1f939c53e3bb765074a6e07/gcc%2Fada%2Fgcc-interface%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Futils.c?ref=2799d18c92aa58f7f1f939c53e3bb765074a6e07", "patch": "@@ -2177,16 +2177,28 @@ gnat_type_for_mode (enum machine_mode mode, int unsignedp)\n {\n   if (mode == BLKmode)\n     return NULL_TREE;\n-  else if (mode == VOIDmode)\n+\n+  if (mode == VOIDmode)\n     return void_type_node;\n-  else if (COMPLEX_MODE_P (mode))\n+\n+  if (COMPLEX_MODE_P (mode))\n     return NULL_TREE;\n-  else if (SCALAR_FLOAT_MODE_P (mode))\n+\n+  if (SCALAR_FLOAT_MODE_P (mode))\n     return float_type_for_precision (GET_MODE_PRECISION (mode), mode);\n-  else if (SCALAR_INT_MODE_P (mode))\n+\n+  if (SCALAR_INT_MODE_P (mode))\n     return gnat_type_for_size (GET_MODE_BITSIZE (mode), unsignedp);\n-  else\n-    return NULL_TREE;\n+\n+  if (VECTOR_MODE_P (mode))\n+    {\n+      enum machine_mode inner_mode = GET_MODE_INNER (mode);\n+      tree inner_type = gnat_type_for_mode (inner_mode, unsignedp);\n+      if (inner_type)\n+\treturn build_vector_type_for_mode (inner_type, mode);\n+    }\n+\n+  return NULL_TREE;\n }\n \n /* Return the unsigned version of a TYPE_NODE, a scalar type.  */"}]}