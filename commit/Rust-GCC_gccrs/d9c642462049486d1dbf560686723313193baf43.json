{"sha": "d9c642462049486d1dbf560686723313193baf43", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDljNjQyNDYyMDQ5NDg2ZDFkYmY1NjA2ODY3MjMzMTMxOTNiYWY0Mw==", "commit": {"author": {"name": "Changpeng Fang", "email": "changpeng.fang@amd.com", "date": "2011-03-04T17:56:39Z"}, "committer": {"name": "Changpeng Fang", "email": "cfang@gcc.gnu.org", "date": "2011-03-04T17:56:39Z"}, "message": "Introduce flag -mprefer-avx128 for the auto-vectorizer to generate only 128-bit avx insns.\n\n\t* config/i386/i386.opt (mprefer-avx128): New flag.\n\t* config/i386/i386.c (ix86_preferred_simd_mode): Prefer 128-bit mode\n\twhen the flag -mprefer-avx128 is on.\n\nFrom-SVN: r170681", "tree": {"sha": "3c50e34a6c3fd630527aee6807e1f3d67a274f6f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3c50e34a6c3fd630527aee6807e1f3d67a274f6f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d9c642462049486d1dbf560686723313193baf43", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9c642462049486d1dbf560686723313193baf43", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9c642462049486d1dbf560686723313193baf43", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9c642462049486d1dbf560686723313193baf43/comments", "author": {"login": "changpeng", "id": 4239661, "node_id": "MDQ6VXNlcjQyMzk2NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4239661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/changpeng", "html_url": "https://github.com/changpeng", "followers_url": "https://api.github.com/users/changpeng/followers", "following_url": "https://api.github.com/users/changpeng/following{/other_user}", "gists_url": "https://api.github.com/users/changpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/changpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/changpeng/subscriptions", "organizations_url": "https://api.github.com/users/changpeng/orgs", "repos_url": "https://api.github.com/users/changpeng/repos", "events_url": "https://api.github.com/users/changpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/changpeng/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7a9d7a4f865490d0972a07dc4d8ae2de6b2c5a27"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "ec81d68394dc0e4a5db700b89a39e559042b31ab", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9c642462049486d1dbf560686723313193baf43/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9c642462049486d1dbf560686723313193baf43/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d9c642462049486d1dbf560686723313193baf43", "patch": "@@ -1,3 +1,9 @@\n+2011-03-04  Changpeng Fang  <changpeng.fang@amd.com>\n+\n+\t* config/i386/i386.opt (mprefer-avx128): New flag.\n+\t* config/i386/i386.c (ix86_preferred_simd_mode): Prefer 128-bit mode\n+\twhen the flag -mprefer-avx128 is on.\n+\n 2011-03-04  Richard Sandiford  <richard.sandiford@linaro.org>\n \n \t* dwarf2out.c (compare_loc_operands): Fix address handling."}, {"sha": "82d999beb92f2c75602a3475d1abe3617916ab10", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9c642462049486d1dbf560686723313193baf43/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9c642462049486d1dbf560686723313193baf43/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=d9c642462049486d1dbf560686723313193baf43", "patch": "@@ -34747,9 +34747,9 @@ ix86_preferred_simd_mode (enum machine_mode mode)\n   switch (mode)\n     {\n     case SFmode:\n-      return TARGET_AVX ? V8SFmode : V4SFmode;\n+      return (TARGET_AVX && !flag_prefer_avx128) ? V8SFmode : V4SFmode;\n     case DFmode:\n-      return TARGET_AVX ? V4DFmode : V2DFmode;\n+      return (TARGET_AVX && !flag_prefer_avx128) ? V4DFmode : V2DFmode;\n     case DImode:\n       return V2DImode;\n     case SImode:"}, {"sha": "0563bc1f925d7ff1a1441d0dcd1979e094a8d800", "filename": "gcc/config/i386/i386.opt", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d9c642462049486d1dbf560686723313193baf43/gcc%2Fconfig%2Fi386%2Fi386.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d9c642462049486d1dbf560686723313193baf43/gcc%2Fconfig%2Fi386%2Fi386.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.opt?ref=d9c642462049486d1dbf560686723313193baf43", "patch": "@@ -266,6 +266,10 @@ Target RejectNegative Var(flag_dispatch_scheduler)\n Do dispatch scheduling if processor is bdver1 and Haifa scheduling\n is selected.\n \n+mprefer-avx128\n+Target Report Var(flag_prefer_avx128) Init(0)\n+Use 128-bit AVX instructions instead of 256-bit AVX instructions in the auto-vectorizer.\n+\n ;; ISA support\n \n m32"}]}