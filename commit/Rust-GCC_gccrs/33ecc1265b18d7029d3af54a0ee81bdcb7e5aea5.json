{"sha": "33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzNlY2MxMjY1YjE4ZDcwMjlkM2FmNTRhMGVlODFiZGNiN2U1YWVhNQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "ubizjak@gmail.com", "date": "2009-07-23T09:51:33Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2009-07-23T09:51:33Z"}, "message": "re PR target/40832 (gfortran 4.4.0 generates invalid .s file on solaris-x86 using  -march=k8 for 130.socorro)\n\n\tPR target/40832\n\t* config/i386/i386.c (output_387_ffreep): Rewrite to return\n\tASM_SHORT instead of .word.\n\t* config/i386/i386.md (*tls_global_dynamic_64): Use ASM_SHORT\n\tinstead of .word in asm template.\n\nFrom-SVN: r149988", "tree": {"sha": "5a9564d4d6bebdcd0ef9574c0844ed881fab2fc3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a9564d4d6bebdcd0ef9574c0844ed881fab2fc3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/comments", "author": {"login": "ubizjak", "id": 55479990, "node_id": "MDQ6VXNlcjU1NDc5OTkw", "avatar_url": "https://avatars.githubusercontent.com/u/55479990?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ubizjak", "html_url": "https://github.com/ubizjak", "followers_url": "https://api.github.com/users/ubizjak/followers", "following_url": "https://api.github.com/users/ubizjak/following{/other_user}", "gists_url": "https://api.github.com/users/ubizjak/gists{/gist_id}", "starred_url": "https://api.github.com/users/ubizjak/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ubizjak/subscriptions", "organizations_url": "https://api.github.com/users/ubizjak/orgs", "repos_url": "https://api.github.com/users/ubizjak/repos", "events_url": "https://api.github.com/users/ubizjak/events{/privacy}", "received_events_url": "https://api.github.com/users/ubizjak/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5d5e9775770b0e2dbfbe88ce19ecd3d7debe8975", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d5e9775770b0e2dbfbe88ce19ecd3d7debe8975", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d5e9775770b0e2dbfbe88ce19ecd3d7debe8975"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "746938a6165b4befddf14909e8de38dbbd6c9706", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "patch": "@@ -1,3 +1,11 @@\n+2009-07-23  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/40832\n+\t* config/i386/i386.c (output_387_ffreep): Rewrite to return\n+\tASM_SHORT instead of .word.\n+\t* config/i386/i386.md (*tls_global_dynamic_64): Use ASM_SHORT\n+\tinstead of .word in asm template.\n+\n 2009-07-22  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR target/37488"}, {"sha": "f6c94e5637f888376559c12c90700502555bb5da", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "patch": "@@ -12537,16 +12537,18 @@ static const char *\n output_387_ffreep (rtx *operands ATTRIBUTE_UNUSED, int opno)\n {\n   if (TARGET_USE_FFREEP)\n-#if HAVE_AS_IX86_FFREEP\n+#ifdef HAVE_AS_IX86_FFREEP\n     return opno ? \"ffreep\\t%y1\" : \"ffreep\\t%y0\";\n #else\n     {\n-      static char retval[] = \".word\\t0xc_df\";\n+      static char retval[32];\n       int regno = REGNO (operands[opno]);\n \n       gcc_assert (FP_REGNO_P (regno));\n \n-      retval[9] = '0' + (regno - FIRST_STACK_REG);\n+      regno -= FIRST_STACK_REG;\n+\n+      snprintf (retval, sizeof (retval), ASM_SHORT \"0xc%ddf\", regno);\n       return retval;\n     }\n #endif"}, {"sha": "f50bcc19320a69b5ba46486c1f1b66c758d08405", "filename": "gcc/config/i386/i386.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/gcc%2Fconfig%2Fi386%2Fi386.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5/gcc%2Fconfig%2Fi386%2Fi386.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.md?ref=33ecc1265b18d7029d3af54a0ee81bdcb7e5aea5", "patch": "@@ -16473,7 +16473,7 @@\n    (unspec:DI [(match_operand:DI 1 \"tls_symbolic_operand\" \"\")]\n \t      UNSPEC_TLS_GD)]\n   \"TARGET_64BIT\"\n-  \".byte\\t0x66\\;lea{q}\\t{%a1@TLSGD(%%rip), %%rdi|rdi, %a1@TLSGD[rip]}\\;.word\\t0x6666\\;rex64\\;call\\t%P2\"\n+  { return \".byte\\t0x66\\n\\tlea{q}\\t{%a1@TLSGD(%%rip), %%rdi|rdi, %a1@TLSGD[rip]}\\n\" ASM_SHORT \"0x6666\\n\\trex64\\n\\tcall\\t%P2\"; }\n   [(set_attr \"type\" \"multi\")\n    (set_attr \"length\" \"16\")])\n "}]}