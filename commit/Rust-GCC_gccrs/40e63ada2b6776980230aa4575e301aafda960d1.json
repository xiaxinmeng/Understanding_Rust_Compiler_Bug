{"sha": "40e63ada2b6776980230aa4575e301aafda960d1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDBlNjNhZGEyYjY3NzY5ODAyMzBhYTQ1NzVlMzAxYWFmZGE5NjBkMQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2014-05-18T21:12:42Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2014-05-18T21:12:42Z"}, "message": "trans.c (Subprogram_Body_to_gnu): Rework comment and set function_start_locus.\n\n\t* gcc-interface/trans.c (Subprogram_Body_to_gnu): Rework comment and\n\tset function_start_locus.\n\nFrom-SVN: r210591", "tree": {"sha": "95a1eed776ec8e3dad155bd2a5376e5400de517e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/95a1eed776ec8e3dad155bd2a5376e5400de517e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/40e63ada2b6776980230aa4575e301aafda960d1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40e63ada2b6776980230aa4575e301aafda960d1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40e63ada2b6776980230aa4575e301aafda960d1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40e63ada2b6776980230aa4575e301aafda960d1/comments", "author": null, "committer": null, "parents": [{"sha": "dd25fe0a4bfad9fe6017e432ae741e549a77e0a5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd25fe0a4bfad9fe6017e432ae741e549a77e0a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd25fe0a4bfad9fe6017e432ae741e549a77e0a5"}], "stats": {"total": 13, "additions": 10, "deletions": 3}, "files": [{"sha": "aa60d8a9f950e874d64295178ca54841fca822af", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40e63ada2b6776980230aa4575e301aafda960d1/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40e63ada2b6776980230aa4575e301aafda960d1/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=40e63ada2b6776980230aa4575e301aafda960d1", "patch": "@@ -1,3 +1,8 @@\n+2014-05-18  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gcc-interface/trans.c (Subprogram_Body_to_gnu): Rework comment and\n+\tset function_start_locus.\n+\n 2014-05-18  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* utils.c (gnat_write_global_declarations): Adjust the flags put on"}, {"sha": "cd01d4d2420ce4c1ba0cf44efaf1b68554ebe699", "filename": "gcc/ada/gcc-interface/trans.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/40e63ada2b6776980230aa4575e301aafda960d1/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/40e63ada2b6776980230aa4575e301aafda960d1/gcc%2Fada%2Fgcc-interface%2Ftrans.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fgcc-interface%2Ftrans.c?ref=40e63ada2b6776980230aa4575e301aafda960d1", "patch": "@@ -3574,6 +3574,7 @@ Subprogram_Body_to_gnu (Node_Id gnat_node)\n   /* The entry in the CI_CO_LIST that represents a function return, if any.  */\n   tree gnu_return_var_elmt = NULL_TREE;\n   tree gnu_result;\n+  location_t locus;\n   struct language_function *gnu_subprog_language;\n   vec<parm_attr, va_gc> *cache;\n \n@@ -3610,14 +3611,15 @@ Subprogram_Body_to_gnu (Node_Id gnat_node)\n       relayout_decl (gnu_result_decl);\n     }\n \n-  /* Set the line number in the decl to correspond to that of the body so that\n-     the line number notes are written correctly.  */\n-  Sloc_to_locus (Sloc (gnat_node), &DECL_SOURCE_LOCATION (gnu_subprog_decl));\n+  /* Set the line number in the decl to correspond to that of the body.  */\n+  Sloc_to_locus (Sloc (gnat_node), &locus);\n+  DECL_SOURCE_LOCATION (gnu_subprog_decl) = locus;\n \n   /* Initialize the information structure for the function.  */\n   allocate_struct_function (gnu_subprog_decl, false);\n   gnu_subprog_language = ggc_cleared_alloc<language_function> ();\n   DECL_STRUCT_FUNCTION (gnu_subprog_decl)->language = gnu_subprog_language;\n+  DECL_STRUCT_FUNCTION (gnu_subprog_decl)->function_start_locus = locus;\n   set_cfun (NULL);\n \n   begin_subprog_body (gnu_subprog_decl);"}]}