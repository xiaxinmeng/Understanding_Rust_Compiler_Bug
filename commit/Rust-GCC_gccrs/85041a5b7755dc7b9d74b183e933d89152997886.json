{"sha": "85041a5b7755dc7b9d74b183e933d89152997886", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODUwNDFhNWI3NzU1ZGM3YjlkNzRiMTgzZTkzM2Q4OTE1Mjk5Nzg4Ng==", "commit": {"author": {"name": "Iain Buclaw", "email": "ibuclaw@gdcproject.org", "date": "2018-11-28T17:54:07Z"}, "committer": {"name": "Iain Buclaw", "email": "ibuclaw@gcc.gnu.org", "date": "2018-11-28T17:54:07Z"}, "message": "Merge libphobos upstream version 2.076.1\n\nUpdated the library version to 76:3:0.\n\nlibphobos/ChangeLog:\n\n2018-11-28  Iain Buclaw  <ibuclaw@gdcproject.org>\n\n\t* Makefile.in: Rebuild.\n\t* configure: Rebuild.\n\t* configure.ac (DRUNTIME_SOVERSION): Remove.\n\t(PHOBOS_SOVERSION): Remove.\n\t(libtool_VERSION): Add.\n\t* libdruntime/Makefile.am: Use libtool_VERSION.\n\t* libdruntime/Makefile.in: Rebuild.\n\t* src/Makefile.am: Use libtool_VERSION.\n\t* src/Makefile.in: Rebuild.\n\t* testsuite/Makefile.in: Rebuild.\n\nFrom-SVN: r266572", "tree": {"sha": "2967bb1b7ffbc8c178b109a75f117df37895e144", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2967bb1b7ffbc8c178b109a75f117df37895e144"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/85041a5b7755dc7b9d74b183e933d89152997886", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85041a5b7755dc7b9d74b183e933d89152997886", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85041a5b7755dc7b9d74b183e933d89152997886", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85041a5b7755dc7b9d74b183e933d89152997886/comments", "author": {"login": "ibuclaw", "id": 397929, "node_id": "MDQ6VXNlcjM5NzkyOQ==", "avatar_url": "https://avatars.githubusercontent.com/u/397929?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ibuclaw", "html_url": "https://github.com/ibuclaw", "followers_url": "https://api.github.com/users/ibuclaw/followers", "following_url": "https://api.github.com/users/ibuclaw/following{/other_user}", "gists_url": "https://api.github.com/users/ibuclaw/gists{/gist_id}", "starred_url": "https://api.github.com/users/ibuclaw/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ibuclaw/subscriptions", "organizations_url": "https://api.github.com/users/ibuclaw/orgs", "repos_url": "https://api.github.com/users/ibuclaw/repos", "events_url": "https://api.github.com/users/ibuclaw/events{/privacy}", "received_events_url": "https://api.github.com/users/ibuclaw/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "735352d2eede1e412cb89f45a5c3e0846bce39af", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/735352d2eede1e412cb89f45a5c3e0846bce39af", "html_url": "https://github.com/Rust-GCC/gccrs/commit/735352d2eede1e412cb89f45a5c3e0846bce39af"}], "stats": {"total": 110, "additions": 75, "deletions": 35}, "files": [{"sha": "ad8f7ee278d355d6e3bd8d9be50fe9ee83b25c09", "filename": "libphobos/ChangeLog", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FChangeLog?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -1,3 +1,16 @@\n+2018-11-28  Iain Buclaw  <ibuclaw@gdcproject.org>\n+\n+\t* Makefile.in: Rebuild.\n+\t* configure: Rebuild.\n+\t* configure.ac (DRUNTIME_SOVERSION): Remove.\n+\t(PHOBOS_SOVERSION): Remove.\n+\t(libtool_VERSION): Add.\n+\t* libdruntime/Makefile.am: Use libtool_VERSION.\n+\t* libdruntime/Makefile.in: Rebuild.\n+\t* src/Makefile.am: Use libtool_VERSION.\n+\t* src/Makefile.in: Rebuild.\n+\t* testsuite/Makefile.in: Rebuild.\n+\n 2018-11-22  Johannes Pfau  <johannespfau@gmail.com>\n \n \tPR d/87824"}, {"sha": "a54821d679975af470d2d7face3a519e6f4e911d", "filename": "libphobos/Makefile.in", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2FMakefile.in?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -216,7 +216,6 @@ DCFG_HAVE_LIBATOMIC = @DCFG_HAVE_LIBATOMIC@\n DCFG_MINFO_BRACKETING = @DCFG_MINFO_BRACKETING@\n DCFG_THREAD_MODEL = @DCFG_THREAD_MODEL@\n DEFS = @DEFS@\n-DRUNTIME_SOVERSION = @DRUNTIME_SOVERSION@\n DSYMUTIL = @DSYMUTIL@\n DUMPBIN = @DUMPBIN@\n ECHO_C = @ECHO_C@\n@@ -261,7 +260,6 @@ PACKAGE_TARNAME = @PACKAGE_TARNAME@\n PACKAGE_URL = @PACKAGE_URL@\n PACKAGE_VERSION = @PACKAGE_VERSION@\n PATH_SEPARATOR = @PATH_SEPARATOR@\n-PHOBOS_SOVERSION = @PHOBOS_SOVERSION@\n RANLIB = @RANLIB@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n@@ -308,6 +306,7 @@ libphobos_builddir = @libphobos_builddir@\n libphobos_srcdir = @libphobos_srcdir@\n libphobos_toolexecdir = @libphobos_toolexecdir@\n libphobos_toolexeclibdir = @libphobos_toolexeclibdir@\n+libtool_VERSION = @libtool_VERSION@\n localedir = @localedir@\n localstatedir = @localstatedir@\n mandir = @mandir@"}, {"sha": "d247d9adc1fe69aba61c2c619009501466cf3dab", "filename": "libphobos/configure", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -634,8 +634,7 @@ am__EXEEXT_TRUE\n LTLIBOBJS\n LIBOBJS\n GDCFLAGSX\n-PHOBOS_SOVERSION\n-DRUNTIME_SOVERSION\n+libtool_VERSION\n SPEC_PHOBOS_DEPS\n gdc_include_dir\n libphobos_toolexeclibdir\n@@ -11509,7 +11508,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11512 \"configure\"\n+#line 11511 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -11615,7 +11614,7 @@ else\n   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2\n   lt_status=$lt_dlunknown\n   cat > conftest.$ac_ext <<_LT_EOF\n-#line 11618 \"configure\"\n+#line 11617 \"configure\"\n #include \"confdefs.h\"\n \n #if HAVE_DLFCN_H\n@@ -14874,9 +14873,7 @@ SPEC_PHOBOS_DEPS=\"$LIBS\"\n \n \n # Libdruntime / phobos soname version\n-DRUNTIME_SOVERSION=\"76:2:0\"\n-PHOBOS_SOVERSION=\"76:2:0\"\n-\n+libtool_VERSION=76:3:0\n \n \n # Set default flags (after DRUNTIME_WERROR!)"}, {"sha": "67eab27e8218dcb81ad190603646250a80ab274f", "filename": "libphobos/configure.ac", "status": "modified", "additions": 2, "deletions": 4, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fconfigure.ac?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -148,10 +148,8 @@ SPEC_PHOBOS_DEPS=\"$LIBS\"\n AC_SUBST(SPEC_PHOBOS_DEPS)\n \n # Libdruntime / phobos soname version\n-DRUNTIME_SOVERSION=\"76:2:0\"\n-PHOBOS_SOVERSION=\"76:2:0\"\n-AC_SUBST([DRUNTIME_SOVERSION])\n-AC_SUBST([PHOBOS_SOVERSION])\n+libtool_VERSION=76:3:0\n+AC_SUBST(libtool_VERSION)\n \n # Set default flags (after DRUNTIME_WERROR!)\n if test -z \"$GDCFLAGS\"; then"}, {"sha": "e14cc031eeaed7d4ba9c3e456080a0aaf1e9b89e", "filename": "libphobos/libdruntime/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Flibdruntime%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Flibdruntime%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMakefile.am?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -104,7 +104,7 @@ endif\n toolexeclib_LTLIBRARIES = libgdruntime.la\n libgdruntime_la_SOURCES = $(ALL_DRUNTIME_SOURCES)\n libgdruntime_la_LIBTOOLFLAGS =\n-libgdruntime_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(DRUNTIME_SOVERSION)\n+libgdruntime_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(libtool_VERSION)\n libgdruntime_la_LIBADD = $(LIBATOMIC) $(LIBBACKTRACE)\n \n # For static unittest, link objects directly"}, {"sha": "d07a8f98099148122e11c8d72feb91e54d53bab9", "filename": "libphobos/libdruntime/Makefile.in", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Flibdruntime%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Flibdruntime%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2FMakefile.in?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -553,7 +553,6 @@ DCFG_HAVE_LIBATOMIC = @DCFG_HAVE_LIBATOMIC@\n DCFG_MINFO_BRACKETING = @DCFG_MINFO_BRACKETING@\n DCFG_THREAD_MODEL = @DCFG_THREAD_MODEL@\n DEFS = @DEFS@\n-DRUNTIME_SOVERSION = @DRUNTIME_SOVERSION@\n DSYMUTIL = @DSYMUTIL@\n DUMPBIN = @DUMPBIN@\n ECHO_C = @ECHO_C@\n@@ -598,7 +597,6 @@ PACKAGE_TARNAME = @PACKAGE_TARNAME@\n PACKAGE_URL = @PACKAGE_URL@\n PACKAGE_VERSION = @PACKAGE_VERSION@\n PATH_SEPARATOR = @PATH_SEPARATOR@\n-PHOBOS_SOVERSION = @PHOBOS_SOVERSION@\n RANLIB = @RANLIB@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n@@ -645,6 +643,7 @@ libphobos_builddir = @libphobos_builddir@\n libphobos_srcdir = @libphobos_srcdir@\n libphobos_toolexecdir = @libphobos_toolexecdir@\n libphobos_toolexeclibdir = @libphobos_toolexeclibdir@\n+libtool_VERSION = @libtool_VERSION@\n localedir = @localedir@\n localstatedir = @localstatedir@\n mandir = @mandir@\n@@ -760,7 +759,7 @@ DRUNTIME_TEST_LOBJECTS = $(filter-out rt/util/typeinfo.t.lo \\\n toolexeclib_LTLIBRARIES = libgdruntime.la\n libgdruntime_la_SOURCES = $(ALL_DRUNTIME_SOURCES)\n libgdruntime_la_LIBTOOLFLAGS = \n-libgdruntime_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(DRUNTIME_SOVERSION)\n+libgdruntime_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(libtool_VERSION)\n libgdruntime_la_LIBADD = $(LIBATOMIC) $(LIBBACKTRACE)\n \n # For static unittest, link objects directly"}, {"sha": "2fe27a195df3b84561a9131e7ab65522aa022e3e", "filename": "libphobos/libdruntime/object.d", "status": "modified", "additions": 31, "deletions": 4, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Flibdruntime%2Fobject.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Flibdruntime%2Fobject.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Flibdruntime%2Fobject.d?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -3468,14 +3468,13 @@ if (__traits(isScalar, T))\n // comparisons in the semantic analysis phase of CmpExp. The ordering\n // comparison is lowered to a call to this template.\n int __cmp(T1, T2)(T1[] s1, T2[] s2)\n-if (!__traits(isScalar, T1))\n+if (!__traits(isScalar, T1) && !__traits(isScalar, T2))\n {\n     import core.internal.traits : Unqual;\n     alias U1 = Unqual!T1;\n     alias U2 = Unqual!T2;\n-    static assert(is(U1 == U2), \"Internal error.\");\n \n-    static if (is(U1 == void))\n+    static if (is(U1 == void) && is(U2 == void))\n         static @trusted ref inout(ubyte) at(inout(void)[] r, size_t i) { return (cast(inout(ubyte)*) r.ptr)[i]; }\n     else\n         static @trusted ref R at(R)(R[] r, size_t i) { return r.ptr[i]; }\n@@ -3506,8 +3505,11 @@ if (!__traits(isScalar, T1))\n         {\n             // TODO: fix this legacy bad behavior, see\n             // https://issues.dlang.org/show_bug.cgi?id=17244\n+            static assert(is(U1 == U2), \"Internal error.\");\n             import core.stdc.string : memcmp;\n-            return (() @trusted => memcmp(&at(s1, u), &at(s2, u), U1.sizeof))();\n+            auto c = (() @trusted => memcmp(&at(s1, u), &at(s2, u), U1.sizeof))();\n+            if (c != 0)\n+                return c;\n         }\n     }\n     return s1.length < s2.length ? -1 : (s1.length > s2.length);\n@@ -3566,9 +3568,15 @@ if (!__traits(isScalar, T1))\n     {\n         T[2] a = [T.max, T.max];\n         T[2] b = [T.min_normal, T.min_normal];\n+        T[2] c = [T.max, T.min_normal];\n+        T[1] d = [T.max];\n \n         assert(__cmp(a, b) > 0);\n         assert(__cmp(b, a) < 0);\n+        assert(__cmp(a, c) > 0);\n+        assert(__cmp(a, d) > 0);\n+        assert(__cmp(d, c) < 0);\n+        assert(__cmp(c, c) == 0);\n     }\n \n     compareMinMax!real;\n@@ -3602,6 +3610,24 @@ if (!__traits(isScalar, T1))\n     assert(__cmp(b, a) < 0);\n }\n \n+// arrays of arrays with mixed modifiers\n+@safe unittest\n+{\n+    // https://issues.dlang.org/show_bug.cgi?id=17876\n+    bool less1(immutable size_t[][] a, size_t[][] b) { return a < b; }\n+    bool less2(const void[][] a, void[][] b) { return a < b; }\n+    bool less3(inout size_t[][] a, size_t[][] b) { return a < b; }\n+\n+    immutable size_t[][] a = [[1, 2], [3, 4]];\n+    size_t[][] b = [[1, 2], [3, 5]];\n+    assert(less1(a, b));\n+    assert(less3(a, b));\n+\n+    auto va = [cast(immutable void[])a[0], a[1]];\n+    auto vb = [cast(void[])b[0], b[1]];\n+    assert(less2(va, vb));\n+}\n+\n // objects\n @safe unittest\n {\n@@ -3642,6 +3668,7 @@ if (!__traits(isScalar, T1))\n \n     assert(__cmp([c1, c1][], [c2, c2][]) < 0);\n     assert(__cmp([c2, c2], [c1, c1]) > 0);\n+    assert(__cmp([c2, c2], [c2, c1]) > 0);\n }\n \n // Compiler hook into the runtime implementation of array (vector) operations."}, {"sha": "3ced3ae21c8e2a28c7a53fa79f30ab7c16735f81", "filename": "libphobos/src/Makefile.am", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMakefile.am?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -57,7 +57,7 @@ toolexeclib_DATA = libgphobos.spec\n toolexeclib_LTLIBRARIES = libgphobos.la\n libgphobos_la_SOURCES = $(ALL_PHOBOS_SOURCES) $(ZLIB_SRC)\n libgphobos_la_LIBTOOLFLAGS =\n-libgphobos_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(PHOBOS_SOVERSION)\n+libgphobos_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(libtool_VERSION)\n libgphobos_la_LIBADD = ../libdruntime/libgdruntime.la\n libgphobos_la_DEPENDENCIES = libgphobos.spec\n "}, {"sha": "f0c8f8760b4019b61a796483023e97251f5c8c01", "filename": "libphobos/src/Makefile.in", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2FMakefile.in?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -507,7 +507,6 @@ DCFG_HAVE_LIBATOMIC = @DCFG_HAVE_LIBATOMIC@\n DCFG_MINFO_BRACKETING = @DCFG_MINFO_BRACKETING@\n DCFG_THREAD_MODEL = @DCFG_THREAD_MODEL@\n DEFS = @DEFS@\n-DRUNTIME_SOVERSION = @DRUNTIME_SOVERSION@\n DSYMUTIL = @DSYMUTIL@\n DUMPBIN = @DUMPBIN@\n ECHO_C = @ECHO_C@\n@@ -552,7 +551,6 @@ PACKAGE_TARNAME = @PACKAGE_TARNAME@\n PACKAGE_URL = @PACKAGE_URL@\n PACKAGE_VERSION = @PACKAGE_VERSION@\n PATH_SEPARATOR = @PATH_SEPARATOR@\n-PHOBOS_SOVERSION = @PHOBOS_SOVERSION@\n RANLIB = @RANLIB@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n@@ -599,6 +597,7 @@ libphobos_builddir = @libphobos_builddir@\n libphobos_srcdir = @libphobos_srcdir@\n libphobos_toolexecdir = @libphobos_toolexecdir@\n libphobos_toolexeclibdir = @libphobos_toolexeclibdir@\n+libtool_VERSION = @libtool_VERSION@\n localedir = @localedir@\n localstatedir = @localstatedir@\n mandir = @mandir@\n@@ -698,7 +697,7 @@ toolexeclib_DATA = libgphobos.spec\n toolexeclib_LTLIBRARIES = libgphobos.la\n libgphobos_la_SOURCES = $(ALL_PHOBOS_SOURCES) $(ZLIB_SRC)\n libgphobos_la_LIBTOOLFLAGS = \n-libgphobos_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(PHOBOS_SOVERSION)\n+libgphobos_la_LDFLAGS = -Xcompiler -nophoboslib -version-info $(libtool_VERSION)\n libgphobos_la_LIBADD = ../libdruntime/libgdruntime.la\n libgphobos_la_DEPENDENCIES = libgphobos.spec\n "}, {"sha": "b0780512ed32d1dcd6c719e0dba0fd2d6976b108", "filename": "libphobos/src/std/complex.d", "status": "modified", "additions": 4, "deletions": 1, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2Fstd%2Fcomplex.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2Fstd%2Fcomplex.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2Fstd%2Fcomplex.d?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -853,7 +853,10 @@ Complex!T cos(T)(Complex!T z)  @safe pure nothrow @nogc\n     import std.math;\n     assert(cos(complex(0.0)) == 1.0);\n     assert(cos(complex(1.3L)) == std.math.cos(1.3L));\n-    assert(cos(complex(0, 5.2L)) == cosh(5.2L));\n+    auto c1 = cos(complex(0, 5.2L));\n+    auto c2 = cosh(5.2L);\n+    assert(feqrel(c1.re, c2.re) >= real.mant_dig - 1 &&\n+        feqrel(c1.im, c2.im) >= real.mant_dig - 1);\n }\n \n "}, {"sha": "7bb4d7c23dbdbcafcca6598748588890d39cc2eb", "filename": "libphobos/src/std/math.d", "status": "modified", "additions": 10, "deletions": 4, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2Fstd%2Fmath.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2Fstd%2Fmath.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2Fstd%2Fmath.d?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -177,7 +177,7 @@ version (StaticallyHaveSSE)\n {\n     private enum bool haveSSE = true;\n }\n-else\n+else version (X86)\n {\n     static import core.cpuid;\n     private alias haveSSE = core.cpuid.sse;\n@@ -887,7 +887,7 @@ Lret: {}\n                 -9.889929415807650724957118893791829849557E-1L\n             ];\n             static immutable real[7] Q = [\n-                8.650244186622719093893836740197250197602E10L\n+                8.650244186622719093893836740197250197602E10L,\n                 -4.152206921457208101480801635640958361612E10L,\n                 2.758476078803232151774723646710890525496E9L,\n                 -5.733709132766856723608447733926138506824E7L,\n@@ -3141,7 +3141,8 @@ float ldexp(float n, int exp) @safe pure nothrow @nogc { return ldexp(cast(real)\n \n @safe pure nothrow @nogc unittest\n {\n-    static if (floatTraits!(real).realFormat == RealFormat.ieeeExtended)\n+    static if (floatTraits!(real).realFormat == RealFormat.ieeeExtended ||\n+               floatTraits!(real).realFormat == RealFormat.ieeeQuadruple)\n     {\n         assert(ldexp(1.0L, -16384) == 0x1p-16384L);\n         assert(ldexp(1.0L, -16382) == 0x1p-16382L);\n@@ -4453,14 +4454,14 @@ long lrint(real x) @trusted pure nothrow @nogc\n             const j = sign ? -OF : OF;\n             x = (j + x) - j;\n \n+            const exp = (vu[F.EXPPOS_SHORT] & F.EXPMASK) - (F.EXPBIAS + 1);\n             const implicitOne = 1UL << 48;\n             auto vl = cast(ulong*)(&x);\n             vl[MANTISSA_MSB] &= implicitOne - 1;\n             vl[MANTISSA_MSB] |= implicitOne;\n \n             long result;\n \n-            const exp = (vu[F.EXPPOS_SHORT] & F.EXPMASK) - (F.EXPBIAS + 1);\n             if (exp < 0)\n                 result = 0;\n             else if (exp <= 48)\n@@ -5337,6 +5338,7 @@ private:\n             }\n             else version (AArch64)\n             {\n+                ControlState cont;\n                 asm pure nothrow @nogc\n                 {\n                     \"mrs %0, FPCR;\" : \"=r\" cont;\n@@ -6668,6 +6670,10 @@ if (isFloatingPoint!(F) && isIntegral!(G))\n     {\n         pragma(msg, \"test disabled on ARM, see bug 5628\");\n     }\n+    else version (GNU)\n+    {\n+        pragma(msg, \"test disabled on GNU, see bug 5628\");\n+    }\n     else\n     {\n         assert(pow(xd, neg2) == 1 / (x * x));"}, {"sha": "f4c64d4a36da8adf22b5194db141c09f263d3666", "filename": "libphobos/src/std/random.d", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2Fstd%2Frandom.d", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Fsrc%2Fstd%2Frandom.d", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Fsrc%2Fstd%2Frandom.d?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -64,15 +64,15 @@ import std.traits;\n     // Generate a uniformly-distributed integer in the range [0, 14]\n     // If no random generator is passed, the global `rndGen` would be used\n     auto i = uniform(0, 15, rnd);\n-    assert(i == 12);\n+    assert(i >= 0 && i < 15);\n \n     // Generate a uniformly-distributed real in the range [0, 100)\n     auto r = uniform(0.0L, 100.0L, rnd);\n-    assert(r == 79.65429843861011285);\n+    assert(r >= 0 && r < 100);\n \n     // Generate a 32-bit random number\n     auto u = uniform!uint(rnd);\n-    assert(u == 4083286876);\n+    static assert(is(typeof(u) == uint));\n }\n \n version (unittest)"}, {"sha": "33950c5c953629be327b59e62c7ce23ca0dce5bc", "filename": "libphobos/testsuite/Makefile.in", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/85041a5b7755dc7b9d74b183e933d89152997886/libphobos%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libphobos%2Ftestsuite%2FMakefile.in?ref=85041a5b7755dc7b9d74b183e933d89152997886", "patch": "@@ -162,7 +162,6 @@ DCFG_HAVE_LIBATOMIC = @DCFG_HAVE_LIBATOMIC@\n DCFG_MINFO_BRACKETING = @DCFG_MINFO_BRACKETING@\n DCFG_THREAD_MODEL = @DCFG_THREAD_MODEL@\n DEFS = @DEFS@\n-DRUNTIME_SOVERSION = @DRUNTIME_SOVERSION@\n DSYMUTIL = @DSYMUTIL@\n DUMPBIN = @DUMPBIN@\n ECHO_C = @ECHO_C@\n@@ -207,7 +206,6 @@ PACKAGE_TARNAME = @PACKAGE_TARNAME@\n PACKAGE_URL = @PACKAGE_URL@\n PACKAGE_VERSION = @PACKAGE_VERSION@\n PATH_SEPARATOR = @PATH_SEPARATOR@\n-PHOBOS_SOVERSION = @PHOBOS_SOVERSION@\n RANLIB = @RANLIB@\n SED = @SED@\n SET_MAKE = @SET_MAKE@\n@@ -254,6 +252,7 @@ libphobos_builddir = @libphobos_builddir@\n libphobos_srcdir = @libphobos_srcdir@\n libphobos_toolexecdir = @libphobos_toolexecdir@\n libphobos_toolexeclibdir = @libphobos_toolexeclibdir@\n+libtool_VERSION = @libtool_VERSION@\n localedir = @localedir@\n localstatedir = @localstatedir@\n mandir = @mandir@"}]}