{"sha": "28a0816854bc2a988f69f6f6a41455208b97ac96", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjhhMDgxNjg1NGJjMmE5ODhmNjlmNmY2YTQxNDU1MjA4Yjk3YWM5Ng==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2008-01-18T15:46:43Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2008-01-18T15:46:43Z"}, "message": "common.opt: Add fmerge-debug-strings.\n\n./:\t* common.opt: Add fmerge-debug-strings.\n\t* dwarf2out.c (DEBUG_STR_SECTION_FLAGS): Test\n\tflag_merge_debug_strings rather than flag_merge_constants.\n\t* doc/invoke.texi (Option Summary): Mention\n\t-fmerge-debug-strings.\n\t(Debugging Options): Document -fmerge-debug-strings.\ntestsuite/:\n\t* gcc.dg/debug/dwarf2/var1.c: Add -fno-merge-debug-strings.\n\nFrom-SVN: r131630", "tree": {"sha": "84df8eb9f36c5fe1275521e9196420e0b58781f1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/84df8eb9f36c5fe1275521e9196420e0b58781f1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/28a0816854bc2a988f69f6f6a41455208b97ac96", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28a0816854bc2a988f69f6f6a41455208b97ac96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/28a0816854bc2a988f69f6f6a41455208b97ac96", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/28a0816854bc2a988f69f6f6a41455208b97ac96/comments", "author": null, "committer": null, "parents": [{"sha": "1ea193c21f060b7e7837138122b24c9d07f57d57", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ea193c21f060b7e7837138122b24c9d07f57d57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ea193c21f060b7e7837138122b24c9d07f57d57"}], "stats": {"total": 40, "additions": 33, "deletions": 7}, "files": [{"sha": "3c5183a990b42e4e60dde8c2f21e1f93b6612ebc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=28a0816854bc2a988f69f6f6a41455208b97ac96", "patch": "@@ -1,3 +1,12 @@\n+2008-01-18  Ian Lance Taylor  <iant@google.com>\n+\n+\t* common.opt: Add fmerge-debug-strings.\n+\t* dwarf2out.c (DEBUG_STR_SECTION_FLAGS): Test\n+\tflag_merge_debug_strings rather than flag_merge_constants.\n+\t* doc/invoke.texi (Option Summary): Mention\n+\t-fmerge-debug-strings.\n+\t(Debugging Options): Document -fmerge-debug-strings.\n+\n 2008-01-18  Ian Lance Taylor  <iant@google.com>\n \n \tPR c++/33407"}, {"sha": "5c659e4d3079dff67150df74b19c00fad9a8fe24", "filename": "gcc/common.opt", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Fcommon.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Fcommon.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcommon.opt?ref=28a0816854bc2a988f69f6f6a41455208b97ac96", "patch": "@@ -1,6 +1,7 @@\n ; Options for the language- and target-independent parts of the compiler.\n \n-; Copyright (C) 2003, 2004, 2005, 2006, 2007 Free Software Foundation, Inc.\n+; Copyright (C) 2003, 2004, 2005, 2006, 2007, 2008\n+; Free Software Foundation, Inc.\n ;\n ; This file is part of GCC.\n ;\n@@ -664,6 +665,10 @@ fmerge-constants\n Common Report Var(flag_merge_constants,1) VarExists Optimization\n Attempt to merge identical constants across compilation units\n \n+fmerge-debug-strings\n+Common Report Var(flag_merge_debug_strings) Init(1)\n+Attempt to merge identical debug strings across compilation units\n+\n fmessage-length=\n Common RejectNegative Joined UInteger\n -fmessage-length=<number>\tLimit diagnostics to <number> characters per line.  0 suppresses line-wrapping"}, {"sha": "ea54e454c8a2175e2e09903d39eb2bfc6140e5d8", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=28a0816854bc2a988f69f6f6a41455208b97ac96", "patch": "@@ -1,5 +1,5 @@\n @c Copyright (C) 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,\n-@c 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+@c 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n @c Free Software Foundation, Inc.\n @c This is part of the GCC manual.\n @c For copying conditions, see the file gcc.texi.\n@@ -11,8 +11,8 @@\n \n @c man begin COPYRIGHT\n Copyright @copyright{} 1988, 1989, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006,\n-2007 Free Software Foundation, Inc.\n+1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n+Free Software Foundation, Inc.\n \n Permission is granted to copy, distribute and/or modify this document\n under the terms of the GNU Free Documentation License, Version 1.2 or\n@@ -304,7 +304,7 @@ Objective-C and Objective-C++ Dialects}.\n -ftest-coverage  -ftime-report -fvar-tracking @gol\n -g  -g@var{level}  -gcoff -gdwarf-2 @gol\n -ggdb  -gstabs  -gstabs+  -gvms  -gxcoff  -gxcoff+ @gol\n--fdebug-prefix-map=@var{old}=@var{new} @gol\n+-fmerge-debug-strings -fdebug-prefix-map=@var{old}=@var{new} @gol\n -femit-struct-debug-baseonly -femit-struct-debug-reduced @gol\n -femit-struct-debug-detailed@r{[}=@var{spec-list}@r{]} @gol\n -p  -pg  -print-file-name=@var{library}  -print-libgcc-file-name @gol\n@@ -4162,6 +4162,14 @@ The default is @samp{-femit-struct-debug-detailed=all}.\n \n This option works only with DWARF 2.\n \n+@item -fmerge-debug-strings\n+@opindex fmerge-debug-strings\n+Direct the linker to merge together strings which are identical in\n+different object files.  This is not supported by all assemblers or\n+linker.  This decreases the size of the debug information in the\n+output file at the cost of increasing link processing time.  This is\n+on by default.\n+\n @item -fdebug-prefix-map=@var{old}=@var{new}\n @opindex fdebug-prefix-map\n When compiling files in directory @file{@var{old}}, record debugging"}, {"sha": "3a5b897c8776e5193c6f4b68097f6483263f00f2", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=28a0816854bc2a988f69f6f6a41455208b97ac96", "patch": "@@ -4393,7 +4393,7 @@ static int maybe_emit_file (struct dwarf_file_data *fd);\n \n /* Section flags for .debug_str section.  */\n #define DEBUG_STR_SECTION_FLAGS \\\n-  (HAVE_GAS_SHF_MERGE && flag_merge_constants\t\t\t\\\n+  (HAVE_GAS_SHF_MERGE && flag_merge_debug_strings\t\t\\\n    ? SECTION_DEBUG | SECTION_MERGE | SECTION_STRINGS | 1\t\\\n    : SECTION_DEBUG)\n "}, {"sha": "2c3053c2fa4ed93f38115e0b500d8a14ee1840c9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=28a0816854bc2a988f69f6f6a41455208b97ac96", "patch": "@@ -1,3 +1,7 @@\n+2008-01-18  Ian Lance Taylor  <iant@google.com>\n+\n+\t* gcc.dg/debug/dwarf2/var1.c: Add -fno-merge-debug-strings.\n+\n 2008-01-18  Ian Lance Taylor  <iant@google.com>\n \n \tPR c++/33407"}, {"sha": "04dd1297694fad54d343fe122c8dcdaace4b750b", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/var1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fvar1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/28a0816854bc2a988f69f6f6a41455208b97ac96/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fvar1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fvar1.c?ref=28a0816854bc2a988f69f6f6a41455208b97ac96", "patch": "@@ -1,6 +1,6 @@\n /* PR 23190 */\n /* { dg-do compile }\n-/* { dg-options \"-gdwarf-2 -dA\" } */\n+/* { dg-options \"-gdwarf-2 -dA -fno-merge-debug-strings\" } */\n /* { dg-final { scan-assembler \"xyzzy\\[^\\\\n\\\\r\\]+DW_AT_name\" } } */\n \n void f(void)"}]}