{"sha": "ce59619c01966977ca5b2537c1fd138f6abe767a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U1OTYxOWMwMTk2Njk3N2NhNWIyNTM3YzFmZDEzOGY2YWJlNzY3YQ==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1996-08-22T15:47:12Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1996-08-22T15:47:12Z"}, "message": "Only build eabi crtx in eabi dirs; ditto for solaris; fix multilib solaris/linux\n\nFrom-SVN: r12668", "tree": {"sha": "25c4bc27e7c09671a0a7d40201c7b2e44431e6d8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/25c4bc27e7c09671a0a7d40201c7b2e44431e6d8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce59619c01966977ca5b2537c1fd138f6abe767a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce59619c01966977ca5b2537c1fd138f6abe767a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce59619c01966977ca5b2537c1fd138f6abe767a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce59619c01966977ca5b2537c1fd138f6abe767a/comments", "author": null, "committer": null, "parents": [{"sha": "deeeee8cd39dbee2092e5f0236e975de950d9c35", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/deeeee8cd39dbee2092e5f0236e975de950d9c35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/deeeee8cd39dbee2092e5f0236e975de950d9c35"}], "stats": {"total": 51, "additions": 36, "deletions": 15}, "files": [{"sha": "719babc502476d9e7f82cd357b6624c4a3e9cc60", "filename": "gcc/config/rs6000/t-ppcgas", "status": "modified", "additions": 36, "deletions": 15, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce59619c01966977ca5b2537c1fd138f6abe767a/gcc%2Fconfig%2Frs6000%2Ft-ppcgas", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce59619c01966977ca5b2537c1fd138f6abe767a/gcc%2Fconfig%2Frs6000%2Ft-ppcgas", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Ft-ppcgas?ref=ce59619c01966977ca5b2537c1fd138f6abe767a", "patch": "@@ -33,11 +33,9 @@ MULTILIB_DIRNAMES\t= nof \\\n \n MULTILIB_MATCHES\t= mlittle=mlittle-endian \\\n \t\t\t  mbig=mbig-endian \\\n-\t\t\t  mbig=mcall-linux \\\n \t\t\t  msoft-float=mcpu?403 \\\n \t\t\t  msoft-float=mcpu?821 \\\n \t\t\t  msoft-float=mcpu?860 \\\n-\t\t\t  mcall-sysv=mcall-solaris \\\n \t\t\t  mcall-sysv=mcall-sysv-eabi \\\n \t\t\t  mcall-sysv=mcall-sysv-noeabi\n \n@@ -71,34 +69,57 @@ scrtn.S: $(srcdir)/config/rs6000/sol-cn.asm\n scrt0.c: $(srcdir)/config/rs6000/sol-c0.c\n \tcat $(srcdir)/config/rs6000/sol-c0.c >scrt0.c\n \n-# Build multiple copies of crt{i,n}.o, one for each target switch.\n-stmp-crt: ecrti.S ecrtn.S scrti.S scrtn.S scrt0.c $(GCC_PASSES) $(EXTRA_HEADERS) stmp-multilib config.status\n+# Build multiple copies of ?crt{i,n}.o, one for each target switch.\n+stmp-crt: ecrti.S ecrtn.S scrt0.c scrti.S scrtn.S libgcc2.ready config.status\n \tfor i in `$(GCC_FOR_TARGET) --print-multi-lib`; do \\\n \t  dir=`echo $$i | sed -e 's/;.*$$//'`; \\\n \t  flags=`echo $$i | sed -e 's/^[^;]*;//' -e 's/@/ -/g'`; \\\n-\t  $(MAKE) GCC_FOR_TARGET=\"$(GCC_FOR_TARGET)\" \\\n-\t    LIBGCC2_CFLAGS=\"$(LIBGCC2_CFLAGS) $${flags}\" \\\n-\t    dir=\"$${dir}\" stmp-crt-sub; \\\n-\t  if [ $$? -eq 0 ] ; then true; else exit 1; fi; \\\n+\t  case \"$$flags\" in \\\n+\t    *-mcall-solaris*) \\\n+\t      $(MAKE) GCC_FOR_TARGET=\"$(GCC_FOR_TARGET)\" \\\n+\t        LIBGCC2_CFLAGS=\"$(LIBGCC2_CFLAGS) $${flags}\" \\\n+\t        dir=\"$${dir}\" stmp-crt-sub2; \\\n+\t      if [ $$? -eq 0 ] ; then true; else exit 1; fi;; \\\n+\t    *-mcall-linux*) \\\n+\t      true;; \\\n+\t    *) \\\n+\t      $(MAKE) GCC_FOR_TARGET=\"$(GCC_FOR_TARGET)\" \\\n+\t\tLIBGCC2_CFLAGS=\"$(LIBGCC2_CFLAGS) $${flags}\" \\\n+\t\tdir=\"$${dir}\" stmp-crt-sub; \\\n+\t      if [ $$? -eq 0 ] ; then true; else exit 1; fi;; \\\n+\t  esac; \\\n \tdone\n \ttouch stmp-crt\n \n # Subroutine of stmp-crt so make -n works.\n stmp-crt-sub:\n+\tif [ -d $(dir) ]; then true; else mkdir $(dir); fi\n \t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o $(dir)/ecrti.o ecrti.S\n \t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o $(dir)/ecrtn.o ecrtn.S\n+\n+# Subroutine of stmp-crt so make -n works.\n+stmp-crt-sub2:\n+\tif [ -d $(dir) ]; then true; else mkdir $(dir); fi\n \t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o $(dir)/scrti.o scrti.S\n \t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o $(dir)/scrtn.o scrtn.S\n \t$(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -c -o $(dir)/scrt0.o scrt0.c\n \n-# Install multiple versions of crt[in].o\n+# Install multiple versions of ?crt[in].o\n install-crt: stmp-crt install-dir install-multilib\n \tfor i in `$(GCC_FOR_TARGET) --print-multi-lib`; do \\\n \t  dir=`echo $$i | sed -e 's/;.*$$//'`; \\\n-\t  rm -f $(libsubdir)/$${dir}/[es]crt[in0].o; \\\n-\t  $(INSTALL_DATA) $${dir}/ecrti.o $(libsubdir)/$${dir}/ecrti.o; \\\n-\t  $(INSTALL_DATA) $${dir}/ecrtn.o $(libsubdir)/$${dir}/ecrtn.o; \\\n-\t  $(INSTALL_DATA) $${dir}/scrti.o $(libsubdir)/$${dir}/scrti.o; \\\n-\t  $(INSTALL_DATA) $${dir}/scrtn.o $(libsubdir)/$${dir}/scrtn.o; \\\n-\t  $(INSTALL_DATA) $${dir}/scrt0.o $(libsubdir)/$${dir}/scrt0.o; \\\n+\t  flags=`echo $$i | sed -e 's/^[^;]*;//' -e 's/@/ -/g'`; \\\n+\t  case \"$$flags\" in \\\n+\t    *-mcall-solaris*) \\\n+\t      rm -f $(libsubdir)/$${dir}/scrt[in0].o; \\\n+\t      $(INSTALL_DATA) $${dir}/scrti.o $(libsubdir)/$${dir}/scrti.o; \\\n+\t      $(INSTALL_DATA) $${dir}/scrtn.o $(libsubdir)/$${dir}/scrtn.o; \\\n+\t      $(INSTALL_DATA) $${dir}/scrt0.o $(libsubdir)/$${dir}/scrt0.o;; \\\n+\t    *-mcall-linux*) \\\n+\t      true;; \\\n+\t    *) \\\n+\t      rm -f $(libsubdir)/$${dir}/ecrt[in].o; \\\n+\t      $(INSTALL_DATA) $${dir}/ecrti.o $(libsubdir)/$${dir}/ecrti.o; \\\n+\t      $(INSTALL_DATA) $${dir}/ecrtn.o $(libsubdir)/$${dir}/ecrtn.o; \\\n+\t  esac; \\\n \tdone"}]}