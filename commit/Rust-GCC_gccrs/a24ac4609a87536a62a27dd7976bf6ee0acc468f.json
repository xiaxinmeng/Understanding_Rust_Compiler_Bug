{"sha": "a24ac4609a87536a62a27dd7976bf6ee0acc468f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTI0YWM0NjA5YTg3NTM2YTYyYTI3ZGQ3OTc2YmY2ZWUwYWNjNDY4Zg==", "commit": {"author": {"name": "Richard Guenther", "email": "rguenther@suse.de", "date": "2011-10-10T15:45:53Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2011-10-10T15:45:53Z"}, "message": "re PR tree-optimization/50389 (ICE: in execute_todo, at passes.c:1730 with -O -freorder-blocks -ftracer and __builtin___memcpy_chk())\n\n2011-10-10  Richard Guenther  <rguenther@suse.de>\n\n\tPR middle-end/50389\n\t* gimple-fold.c (gimplify_and_update_call_from_tree): Do not\n\tmark symbols for renaming.  Append the VUSE to all statements\n\tthat possibly can have one.\n\n\t* gcc.dg/torture/pr50389.c: New testcase.\n\nFrom-SVN: r179757", "tree": {"sha": "f8a62b9ac946da08fd1b85696236a2dda0edcb5c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f8a62b9ac946da08fd1b85696236a2dda0edcb5c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a24ac4609a87536a62a27dd7976bf6ee0acc468f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a24ac4609a87536a62a27dd7976bf6ee0acc468f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a24ac4609a87536a62a27dd7976bf6ee0acc468f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a24ac4609a87536a62a27dd7976bf6ee0acc468f/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "40b6510f2e15672a4027cbd1395bb75ffd5920bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/40b6510f2e15672a4027cbd1395bb75ffd5920bc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/40b6510f2e15672a4027cbd1395bb75ffd5920bc"}], "stats": {"total": 38, "additions": 31, "deletions": 7}, "files": [{"sha": "b3219b50c9fb068f2026f8b254be497e149a5de3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a24ac4609a87536a62a27dd7976bf6ee0acc468f", "patch": "@@ -1,3 +1,10 @@\n+2011-10-10  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/50389\n+\t* gimple-fold.c (gimplify_and_update_call_from_tree): Do not\n+\tmark symbols for renaming.  Append the VUSE to all statements\n+\tthat possibly can have one.\n+\n 2011-10-10  Richard Guenther  <rguenther@suse.de>\n \n \t* ipa-split.c (pass_split_functions): Add verification TODOs."}, {"sha": "7df7e694aa2b9c980f32a01d53aa70823312a134", "filename": "gcc/gimple-fold.c", "status": "modified", "additions": 4, "deletions": 7, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2Fgimple-fold.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2Fgimple-fold.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple-fold.c?ref=a24ac4609a87536a62a27dd7976bf6ee0acc468f", "patch": "@@ -588,13 +588,10 @@ gimplify_and_update_call_from_tree (gimple_stmt_iterator *si_p, tree expr)\n \t}\n       new_stmt = gsi_stmt (i);\n       if (gimple_in_ssa_p (cfun))\n-\t{\n-\t  find_new_referenced_vars (new_stmt);\n-\t  mark_symbols_for_renaming (new_stmt);\n-\t}\n-      /* If the new statement has a VUSE, update it with exact SSA name we\n-         know will reach this one.  */\n-      if (gimple_vuse (new_stmt))\n+\tfind_new_referenced_vars (new_stmt);\n+      /* If the new statement possibly has a VUSE, update it with exact SSA\n+\t name we know will reach this one.  */\n+      if (gimple_has_mem_ops (new_stmt))\n \t{\n \t  /* If we've also seen a previous store create a new VDEF for\n \t     the latter one, and make that the new reaching VUSE.  */"}, {"sha": "d3299d8d017d261d367eb225095b4d8b4a901f3d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a24ac4609a87536a62a27dd7976bf6ee0acc468f", "patch": "@@ -1,3 +1,8 @@\n+2011-10-10  Richard Guenther  <rguenther@suse.de>\n+\n+\tPR middle-end/50389\n+\t* gcc.dg/torture/pr50389.c: New testcase.\n+\n 2011-10-10  Richard Guenther  <rguenther@suse.de>\n \n \tPR middle-end/50195"}, {"sha": "6d8b095b8cefa2d0af03e3de17240b682a6eeeb2", "filename": "gcc/testsuite/gcc.dg/torture/pr50389.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr50389.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a24ac4609a87536a62a27dd7976bf6ee0acc468f/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr50389.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr50389.c?ref=a24ac4609a87536a62a27dd7976bf6ee0acc468f", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-freorder-blocks -ftracer\" } */\n+\n+extern int data[];\n+extern int i;\n+\n+void\n+foo (void)\n+{\n+  char buf[8];\n+  __builtin___memcpy_chk (buf, data, i ? 8 : 4,\n+\t\t\t  __builtin_object_size (buf, 0));\n+  __builtin___memcpy_chk (buf, data, i ? 8 : 4,\n+\t\t\t  __builtin_object_size (buf, 0));\n+}"}]}