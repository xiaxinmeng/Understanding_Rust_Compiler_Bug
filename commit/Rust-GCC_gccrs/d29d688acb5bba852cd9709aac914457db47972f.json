{"sha": "d29d688acb5bba852cd9709aac914457db47972f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDI5ZDY4OGFjYjViYmE4NTJjZDk3MDlhYWM5MTQ0NTdkYjQ3OTcyZg==", "commit": {"author": {"name": "Zhenqiang Chen", "email": "zhenqiang.chen@linaro.org", "date": "2014-05-26T06:40:57Z"}, "committer": {"name": "Zhenqiang Chen", "email": "zqchen@gcc.gnu.org", "date": "2014-05-26T06:40:57Z"}, "message": "re PR rtl-optimization/61278 (ICE with LTO (lto-wrapper failed) on x86_64-linux-gnu in 64-bit mode)\n\nChangeLog:\n2014-05-26  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n\n\tPR rtl-optimization/61278\n\t* shrink-wrap.c (move_insn_for_shrink_wrap): Check df_live.\n\ntestsuite/ChangeLog:\n2014-05-26  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n\n\t* gcc.dg/lto/pr61278_0.c: New test.\n\t* gcc.dg/lto/pr61278_1.c: New test.\n\nFrom-SVN: r210922", "tree": {"sha": "d1b6e9a616200e45161fe65a5982cdc41bfb4eb2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d1b6e9a616200e45161fe65a5982cdc41bfb4eb2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d29d688acb5bba852cd9709aac914457db47972f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d29d688acb5bba852cd9709aac914457db47972f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d29d688acb5bba852cd9709aac914457db47972f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d29d688acb5bba852cd9709aac914457db47972f/comments", "author": null, "committer": null, "parents": [{"sha": "88f32f0f924ccac7635c4491292327cbe30939e2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88f32f0f924ccac7635c4491292327cbe30939e2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88f32f0f924ccac7635c4491292327cbe30939e2"}], "stats": {"total": 61, "additions": 60, "deletions": 1}, "files": [{"sha": "3cadcfa969526beda7d3974869773a137f7edaae", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29d688acb5bba852cd9709aac914457db47972f/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29d688acb5bba852cd9709aac914457db47972f/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d29d688acb5bba852cd9709aac914457db47972f", "patch": "@@ -1,4 +1,8 @@\n-ChangeLog:\n+2014-05-26  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n+\n+\tPR rtl-optimization/61278\n+\t* shrink-wrap.c (move_insn_for_shrink_wrap): Check df_live.\n+\n 2014-05-26  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n \n \tPR rtl-optimization/61220"}, {"sha": "7d9c6e715db2f6e346beef6797c901e909f34d36", "filename": "gcc/shrink-wrap.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Fshrink-wrap.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Fshrink-wrap.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fshrink-wrap.c?ref=d29d688acb5bba852cd9709aac914457db47972f", "patch": "@@ -213,8 +213,15 @@ move_insn_for_shrink_wrap (basic_block bb, rtx insn,\n       if (EDGE_COUNT (bb->succs) == 1)\n \treturn false;\n \n+      /* If DF_LIVE doesn't exist, i.e. at -O1, just give up.  */\n+      if (!df_live)\n+\treturn false;\n+\n       next_block = split_edge (live_edge);\n \n+      /* We create a new basic block.  Call df_grow_bb_info to make sure\n+\t all data structures are allocated.  */\n+      df_grow_bb_info (df_live);\n       bitmap_copy (df_get_live_in (next_block), df_get_live_out (bb));\n       df_set_bb_dirty (next_block);\n "}, {"sha": "810cc44a87cce1479152993e4fd8b055d26e2c70", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=d29d688acb5bba852cd9709aac914457db47972f", "patch": "@@ -1,3 +1,8 @@\n+2014-05-26  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n+\n+\t* gcc.dg/lto/pr61278_0.c: New test.\n+\t* gcc.dg/lto/pr61278_1.c: New test.\n+\n 2014-05-26  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n \n \t* gcc.dg/pr61220.c: New test."}, {"sha": "36cdabc0f22decdd6f2fb7df16c445bd62eea70e", "filename": "gcc/testsuite/gcc.dg/lto/pr61278_0.c", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61278_0.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61278_0.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61278_0.c?ref=d29d688acb5bba852cd9709aac914457db47972f", "patch": "@@ -0,0 +1,30 @@\n+/* { dg-lto-do link } */\n+/* { dg-lto-options { { -flto -O0 } } } */\n+/* { dg-extra-ld-options \" -flto -O1 \" } */\n+\n+static unsigned int\n+fn1 (int p1, int p2)\n+{\n+  return 0;\n+}\n+\n+char a, b, c;\n+\n+char\n+foo (char *p)\n+{\n+  int i;\n+  for (b = 1 ; b > 0; b++)\n+    {\n+      for (i = 0; i < 2; i++)\n+\t;\n+      for (a = 1; a > 0; a++)\n+\t{\n+\t  char d[1] = { 0 };\n+\t  if (*p)\n+\t    break;\n+\t  c ^= fn1 (fn1 (fn1 (0, 0), 0), 0);\n+\t}\n+    }\n+  return 0;\n+}"}, {"sha": "1162aed7f3de998c266e57cb600c42ebda039ac3", "filename": "gcc/testsuite/gcc.dg/lto/pr61278_1.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61278_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d29d688acb5bba852cd9709aac914457db47972f/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61278_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Flto%2Fpr61278_1.c?ref=d29d688acb5bba852cd9709aac914457db47972f", "patch": "@@ -0,0 +1,13 @@\n+/* { dg-lto-do link } */\n+/* { dg-lto-options { { -flto -O1 } } } */\n+\n+extern char foo (char *);\n+\n+char d;\n+\n+int\n+main ()\n+{\n+  foo (&d);\n+  return 0;\n+}"}]}