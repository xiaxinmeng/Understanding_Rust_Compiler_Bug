{"sha": "ab038a807dcebed2e81592ca10031b3c5033b718", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWIwMzhhODA3ZGNlYmVkMmU4MTU5MmNhMTAwMzFiM2M1MDMzYjcxOA==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-03-05T21:26:44Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-03-05T21:26:44Z"}, "message": "* ipa-icf.c (sem_variable::equals_wpa): Check FINAL flags.\n\nFrom-SVN: r221226", "tree": {"sha": "11025947cf4fb3b3d604bb1f53a2fa1e1055b097", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/11025947cf4fb3b3d604bb1f53a2fa1e1055b097"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab038a807dcebed2e81592ca10031b3c5033b718", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab038a807dcebed2e81592ca10031b3c5033b718", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab038a807dcebed2e81592ca10031b3c5033b718", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab038a807dcebed2e81592ca10031b3c5033b718/comments", "author": null, "committer": null, "parents": [{"sha": "34349d557a00b1748d36da6e4cd460295febd244", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/34349d557a00b1748d36da6e4cd460295febd244", "html_url": "https://github.com/Rust-GCC/gccrs/commit/34349d557a00b1748d36da6e4cd460295febd244"}], "stats": {"total": 16, "additions": 16, "deletions": 0}, "files": [{"sha": "9d2e92ba6bd526d21b9745e81a9ce14231e40db4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab038a807dcebed2e81592ca10031b3c5033b718/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab038a807dcebed2e81592ca10031b3c5033b718/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ab038a807dcebed2e81592ca10031b3c5033b718", "patch": "@@ -1,3 +1,7 @@\n+2015-03-05  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* ipa-icf.c (sem_variable::equals_wpa): Check FINAL flags.\n+\n 2015-03-05  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR target/64342"}, {"sha": "7c4c852ed5f4815d4293ebc224260af9b2b2af5d", "filename": "gcc/ipa-icf.c", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab038a807dcebed2e81592ca10031b3c5033b718/gcc%2Fipa-icf.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab038a807dcebed2e81592ca10031b3c5033b718/gcc%2Fipa-icf.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-icf.c?ref=ab038a807dcebed2e81592ca10031b3c5033b718", "patch": "@@ -1480,6 +1480,18 @@ sem_variable::equals_wpa (sem_item *item,\n \t\t\t\t      ref->referred, ref2->referred,\n \t\t\t\t      ref->address_matters_p ()))\n \treturn false;\n+\n+      /* DECL_FINAL_P flag on methods referred by virtual tables is used\n+\t to decide on completeness possible_polymorphic_call_targets lists\n+\t and therefore it must match.  */\n+      if ((DECL_VIRTUAL_P (decl) || DECL_VIRTUAL_P (item->decl))\n+\t  && (DECL_VIRTUAL_P (ref->referred->decl)\n+\t      || DECL_VIRTUAL_P (ref2->referred->decl))\n+\t  && ((DECL_VIRTUAL_P (ref->referred->decl)\n+\t       != DECL_VIRTUAL_P (ref2->referred->decl))\n+\t      || (DECL_FINAL_P (ref->referred->decl)\n+\t\t  != DECL_FINAL_P (ref2->referred->decl))))\n+        return return_false_with_msg (\"virtual or final flag mismatch\");\n     }\n \n   return true;"}]}