{"sha": "38e596df667d2c263921e990d4e0cb3b4dbb8ead", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzhlNTk2ZGY2NjdkMmMyNjM5MjFlOTkwZDRlMGNiM2I0ZGJiOGVhZA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@redhat.com", "date": "2003-08-04T20:23:15Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2003-08-04T20:23:15Z"}, "message": "mips.c (override_options): Disable -G on targets that have no .section support.\n\n\t* config/mips/mips.c (override_options): Disable -G on targets that\n\thave no .section support.\n\t(mips_select_section): Use default_select_section for such targets.\n\nFrom-SVN: r70154", "tree": {"sha": "f70474dc845230a1fde65a533cc211b4904cf999", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f70474dc845230a1fde65a533cc211b4904cf999"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/38e596df667d2c263921e990d4e0cb3b4dbb8ead", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38e596df667d2c263921e990d4e0cb3b4dbb8ead", "html_url": "https://github.com/Rust-GCC/gccrs/commit/38e596df667d2c263921e990d4e0cb3b4dbb8ead", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/38e596df667d2c263921e990d4e0cb3b4dbb8ead/comments", "author": null, "committer": null, "parents": [{"sha": "76d2e2c547be369f04a192181df7f0a8d79cd270", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/76d2e2c547be369f04a192181df7f0a8d79cd270", "html_url": "https://github.com/Rust-GCC/gccrs/commit/76d2e2c547be369f04a192181df7f0a8d79cd270"}], "stats": {"total": 18, "additions": 17, "deletions": 1}, "files": [{"sha": "ee5f70b97b25feb405ad1b17b76445b50b5beb74", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e596df667d2c263921e990d4e0cb3b4dbb8ead/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e596df667d2c263921e990d4e0cb3b4dbb8ead/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=38e596df667d2c263921e990d4e0cb3b4dbb8ead", "patch": "@@ -1,3 +1,9 @@\n+2003-08-04  Richard Sandiford  <rsandif@redhat.com>\n+\n+\t* config/mips/mips.c (override_options): Disable -G on targets that\n+\thave no .section support.\n+\t(mips_select_section): Use default_select_section for such targets.\n+\n 2003-08-04  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* fixinc/inclhack.def (svr4_undeclared_getrnge): Introduce and enable."}, {"sha": "9fe8bbf912ce05ea61a688089c7eb53253cc97cd", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 11, "deletions": 1, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/38e596df667d2c263921e990d4e0cb3b4dbb8ead/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/38e596df667d2c263921e990d4e0cb3b4dbb8ead/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=38e596df667d2c263921e990d4e0cb3b4dbb8ead", "patch": "@@ -5059,6 +5059,13 @@ override_options ()\n   if (!TARGET_EXPLICIT_RELOCS && !TARGET_GAS)\n     mips_section_threshold = 0;\n \n+  /* We switch to small data sections using \".section\", which the native\n+     o32 irix assemblers don't understand.  Disable -G accordingly.\n+     We must do this regardless of command-line options since otherwise\n+     the compiler would abort.  */\n+  if (!targetm.have_named_sections)\n+    mips_section_threshold = 0;\n+\n   /* -membedded-pic is a form of PIC code suitable for embedded\n      systems.  All calls are made using PC relative addressing, and\n      all data is addressed using the $gp register.  This requires gas,\n@@ -7879,8 +7886,11 @@ mips_select_section (decl, reloc, align)\n        For mips16 code, put strings in the text section so that a PC\n        relative load instruction can be used to get their address.  */\n     text_section ();\n-  else\n+  else if (targetm.have_named_sections)\n     default_elf_select_section (decl, reloc, align);\n+  else\n+    /* The native irix o32 assembler doesn't support named sections.  */\n+    default_select_section (decl, reloc, align);\n }\n \n "}]}