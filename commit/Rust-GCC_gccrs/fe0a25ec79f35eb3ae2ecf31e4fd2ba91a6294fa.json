{"sha": "fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmUwYTI1ZWM3OWYzNWViM2FlMmVjZjMxZTRmZDJiYTkxYTYyOTRmYQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2009-04-06T21:16:00Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2009-04-06T21:16:00Z"}, "message": "stor-layout.c (set_sizetype): Use the full precision of their machine mode for bitsize types.\n\n\t* stor-layout.c (set_sizetype): Use the full precision of their\n\tmachine mode for bitsize types.\n\nFrom-SVN: r145631", "tree": {"sha": "f415142c581a669bd3c74758395dd97a88d662ee", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f415142c581a669bd3c74758395dd97a88d662ee"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa/comments", "author": null, "committer": null, "parents": [{"sha": "0c011bc3b382df7cdb9e444ebba4db0ba01495e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0c011bc3b382df7cdb9e444ebba4db0ba01495e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0c011bc3b382df7cdb9e444ebba4db0ba01495e1"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "493b7ec3e90d9b59068872816636ea826db4ebdb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa", "patch": "@@ -1,3 +1,8 @@\n+2009-04-06  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* stor-layout.c (set_sizetype): Use the full precision of their\n+\tmachine mode for bitsize types.\n+\n 2009-04-06  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/i386.md: Revert 2 accidental checkins."}, {"sha": "c2d367f38a7aac8a87263fce482b92e4c03c3590", "filename": "gcc/stor-layout.c", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa/gcc%2Fstor-layout.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa/gcc%2Fstor-layout.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fstor-layout.c?ref=fe0a25ec79f35eb3ae2ecf31e4fd2ba91a6294fa", "patch": "@@ -2046,15 +2046,18 @@ initialize_sizetypes (bool signed_p)\n void\n set_sizetype (tree type)\n {\n+  tree t;\n   int oprecision = TYPE_PRECISION (type);\n   /* The *bitsizetype types use a precision that avoids overflows when\n      calculating signed sizes / offsets in bits.  However, when\n      cross-compiling from a 32 bit to a 64 bit host, we are limited to 64 bit\n      precision.  */\n-  int precision = MIN (MIN (oprecision + BITS_PER_UNIT_LOG + 1,\n-\t\t\t    MAX_FIXED_MODE_SIZE),\n-\t\t       2 * HOST_BITS_PER_WIDE_INT);\n-  tree t;\n+  int precision\n+    = MIN (oprecision + BITS_PER_UNIT_LOG + 1, MAX_FIXED_MODE_SIZE);\n+  precision\n+    = GET_MODE_PRECISION (smallest_mode_for_size (precision, MODE_INT));\n+  if (precision > HOST_BITS_PER_WIDE_INT * 2)\n+    precision = HOST_BITS_PER_WIDE_INT * 2;\n \n   gcc_assert (TYPE_UNSIGNED (type) == TYPE_UNSIGNED (sizetype));\n "}]}