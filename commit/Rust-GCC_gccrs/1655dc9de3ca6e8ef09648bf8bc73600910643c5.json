{"sha": "1655dc9de3ca6e8ef09648bf8bc73600910643c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTY1NWRjOWRlM2NhNmU4ZWYwOTY0OGJmOGJjNzM2MDA5MTA2NDNjNQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2005-03-20T15:27:18Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2005-03-20T15:27:18Z"}, "message": "cgraph.h (cgraph_node): Add prev_clone pointer.\n\n\t* cgraph.h (cgraph_node): Add prev_clone pointer.\n\t* cgraph.c (cgraph_remove_node): Remove from doubly linked chain.\n\t(cgraph_clone_node): Produce doubly linked chain.\n\nFrom-SVN: r96761", "tree": {"sha": "9295919722e5f5a302f8ec2e11579c6b99f514ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9295919722e5f5a302f8ec2e11579c6b99f514ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1655dc9de3ca6e8ef09648bf8bc73600910643c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1655dc9de3ca6e8ef09648bf8bc73600910643c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1655dc9de3ca6e8ef09648bf8bc73600910643c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1655dc9de3ca6e8ef09648bf8bc73600910643c5/comments", "author": null, "committer": null, "parents": [{"sha": "f6d1c3a69b64edc2ff6d10d8ec89456552a5f3a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6d1c3a69b64edc2ff6d10d8ec89456552a5f3a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6d1c3a69b64edc2ff6d10d8ec89456552a5f3a8"}], "stats": {"total": 21, "additions": 16, "deletions": 5}, "files": [{"sha": "379ac7fdee98b1ff30dd8776df9a004167ba1618", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1655dc9de3ca6e8ef09648bf8bc73600910643c5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1655dc9de3ca6e8ef09648bf8bc73600910643c5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1655dc9de3ca6e8ef09648bf8bc73600910643c5", "patch": "@@ -1,3 +1,9 @@\n+2005-03-20  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraph.h (cgraph_node): Add prev_clone pointer.\n+\t* cgraph.c (cgraph_remove_node): Remove from doubly linked chain.\n+\t(cgraph_clone_node): Produce doubly linked chain.\n+\n 2005-03-20  Joseph S. Myers  <joseph@codesourcery.com>\n \n \t* c-common.c (handle_aligned_attribute, check_function_sentinel,"}, {"sha": "3aabc4071fb95e777d754a58c3bf0e560eb51032", "filename": "gcc/cgraph.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1655dc9de3ca6e8ef09648bf8bc73600910643c5/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1655dc9de3ca6e8ef09648bf8bc73600910643c5/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=1655dc9de3ca6e8ef09648bf8bc73600910643c5", "patch": "@@ -422,7 +422,10 @@ cgraph_remove_node (struct cgraph_node *node)\n   if (*slot == node)\n     {\n       if (node->next_clone)\n+      {\n \t*slot = node->next_clone;\n+\tnode->next_clone->prev_clone = NULL;\n+      }\n       else\n \t{\n           htab_clear_slot (cgraph_hash, slot);\n@@ -431,11 +434,9 @@ cgraph_remove_node (struct cgraph_node *node)\n     }\n   else\n     {\n-      struct cgraph_node *n;\n-\n-      for (n = *slot; n->next_clone != node; n = n->next_clone)\n-\tcontinue;\n-      n->next_clone = node->next_clone;\n+      node->prev_clone->next_clone = node->next_clone;\n+      if (node->next_clone)\n+        node->next_clone->prev_clone = node->prev_clone;\n     }\n \n   /* While all the clones are removed after being proceeded, the function \n@@ -779,7 +780,10 @@ cgraph_clone_node (struct cgraph_node *n)\n     cgraph_clone_edge (e, new, e->call_expr);\n \n   new->next_clone = n->next_clone;\n+  new->prev_clone = n;\n   n->next_clone = new;\n+  if (new->next_clone)\n+    new->next_clone->prev_clone = new;\n \n   return new;\n }"}, {"sha": "2a1c1b3b949451a9118c59ac13080ad691e18c89", "filename": "gcc/cgraph.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1655dc9de3ca6e8ef09648bf8bc73600910643c5/gcc%2Fcgraph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1655dc9de3ca6e8ef09648bf8bc73600910643c5/gcc%2Fcgraph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.h?ref=1655dc9de3ca6e8ef09648bf8bc73600910643c5", "patch": "@@ -98,6 +98,7 @@ struct cgraph_node GTY((chain_next (\"%h.next\"), chain_prev (\"%h.previous\")))\n   struct cgraph_node *next_needed;\n   /* Pointer to the next clone.  */\n   struct cgraph_node *next_clone;\n+  struct cgraph_node *prev_clone;\n   PTR GTY ((skip)) aux;\n \n   struct cgraph_local_info local;"}]}