{"sha": "4615abe8569bedef58b8400e881cf10a49e5383c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDYxNWFiZTg1NjliZWRlZjU4Yjg0MDBlODgxY2YxMGE0OWU1MzgzYw==", "commit": {"author": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T22:54:37Z"}, "committer": {"name": "Mikael Morin", "email": "mikael@gcc.gnu.org", "date": "2011-11-03T22:54:37Z"}, "message": "trans.h (struct gfc_ss): New field loop.\n\n\t* trans.h (struct gfc_ss): New field loop.\n\t* trans-array.c (set_ss_loop): New function.\n\t(gfc_add_ss_to_loop): Call set_ss_loop.\n\nFrom-SVN: r180884", "tree": {"sha": "76d69fd45ec296d10eee88ad7f8b62be67d52f31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76d69fd45ec296d10eee88ad7f8b62be67d52f31"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4615abe8569bedef58b8400e881cf10a49e5383c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4615abe8569bedef58b8400e881cf10a49e5383c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4615abe8569bedef58b8400e881cf10a49e5383c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4615abe8569bedef58b8400e881cf10a49e5383c/comments", "author": null, "committer": null, "parents": [{"sha": "c7bf4f1e646ac15f269ac01128c75cccc2bb05bf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7bf4f1e646ac15f269ac01128c75cccc2bb05bf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7bf4f1e646ac15f269ac01128c75cccc2bb05bf"}], "stats": {"total": 32, "additions": 32, "deletions": 0}, "files": [{"sha": "57d62be36c1ab20723f79b6c5c2bf69c1ac2aad0", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4615abe8569bedef58b8400e881cf10a49e5383c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4615abe8569bedef58b8400e881cf10a49e5383c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4615abe8569bedef58b8400e881cf10a49e5383c", "patch": "@@ -1,3 +1,9 @@\n+2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n+\n+\t* trans.h (struct gfc_ss): New field loop.\n+\t* trans-array.c (set_ss_loop): New function.\n+\t(gfc_add_ss_to_loop): Call set_ss_loop.\n+\n 2011-11-03  Mikael Morin  <mikael@gcc.gnu.org>\n \n \t* trans.h (struct gfc_ss_info): New field refcount."}, {"sha": "e64767a201060cf7c2b1adb7934b0e5d39469aa2", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4615abe8569bedef58b8400e881cf10a49e5383c/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4615abe8569bedef58b8400e881cf10a49e5383c/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=4615abe8569bedef58b8400e881cf10a49e5383c", "patch": "@@ -618,6 +618,27 @@ gfc_cleanup_loop (gfc_loopinfo * loop)\n }\n \n \n+static void\n+set_ss_loop (gfc_ss *ss, gfc_loopinfo *loop)\n+{\n+  int n;\n+\n+  for (; ss != gfc_ss_terminator; ss = ss->next)\n+    {\n+      ss->loop = loop;\n+\n+      if (ss->info->type == GFC_SS_SCALAR\n+\t  || ss->info->type == GFC_SS_REFERENCE\n+\t  || ss->info->type == GFC_SS_TEMP)\n+\tcontinue;\n+\n+      for (n = 0; n < GFC_MAX_DIMENSIONS; n++)\n+\tif (ss->info->data.array.subscript[n] != NULL)\n+\t  set_ss_loop (ss->info->data.array.subscript[n], loop);\n+    }\n+}\n+\n+\n /* Associate a SS chain with a loop.  */\n \n void\n@@ -628,6 +649,8 @@ gfc_add_ss_to_loop (gfc_loopinfo * loop, gfc_ss * head)\n   if (head == gfc_ss_terminator)\n     return;\n \n+  set_ss_loop (head, loop);\n+\n   ss = head;\n   for (; ss && ss != gfc_ss_terminator; ss = ss->next)\n     {"}, {"sha": "62bcc643fb531e2c536ca1dcd9c7140c95e3f75c", "filename": "gcc/fortran/trans.h", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4615abe8569bedef58b8400e881cf10a49e5383c/gcc%2Ffortran%2Ftrans.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4615abe8569bedef58b8400e881cf10a49e5383c/gcc%2Ffortran%2Ftrans.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans.h?ref=4615abe8569bedef58b8400e881cf10a49e5383c", "patch": "@@ -246,6 +246,9 @@ typedef struct gfc_ss\n   struct gfc_ss *loop_chain;\n   struct gfc_ss *next;\n \n+  /* The loop this gfc_ss is in.  */\n+  struct gfc_loopinfo *loop;\n+\n   unsigned is_alloc_lhs:1;\n }\n gfc_ss;"}]}