{"sha": "bd65fc87824ef69e69c6e79cd1323b43b77e0866", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmQ2NWZjODc4MjRlZjY5ZTY5YzZlNzljZDEzMjNiNDNiNzdlMDg2Ng==", "commit": {"author": {"name": "Richard Sandiford", "email": "rdsandiford@googlemail.com", "date": "2014-03-08T09:27:23Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2014-03-08T09:27:23Z"}, "message": "re PR target/58271 (ICE in gcc for a MIPS target during compilation with -mpaired-single -ftree-vectorize)\n\ngcc/\n\tPR target/58271\n\t* config/mips/mips.c (mips_option_override): Promote -mpaired-single\n\twarning to an error.  Disable TARGET_PAIRED_SINGLE and TARGET_MIPS3D\n\tif they can't be used.\n\nFrom-SVN: r208425", "tree": {"sha": "4a3e17b1015038219b1fcd334e24dd96e4cb52c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4a3e17b1015038219b1fcd334e24dd96e4cb52c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bd65fc87824ef69e69c6e79cd1323b43b77e0866", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd65fc87824ef69e69c6e79cd1323b43b77e0866", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd65fc87824ef69e69c6e79cd1323b43b77e0866", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd65fc87824ef69e69c6e79cd1323b43b77e0866/comments", "author": {"login": "rsandifo", "id": 4235983, "node_id": "MDQ6VXNlcjQyMzU5ODM=", "avatar_url": "https://avatars.githubusercontent.com/u/4235983?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo", "html_url": "https://github.com/rsandifo", "followers_url": "https://api.github.com/users/rsandifo/followers", "following_url": "https://api.github.com/users/rsandifo/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo/orgs", "repos_url": "https://api.github.com/users/rsandifo/repos", "events_url": "https://api.github.com/users/rsandifo/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4e185d7cee2261ee43266533a8fdbcc84e65e539", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e185d7cee2261ee43266533a8fdbcc84e65e539", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e185d7cee2261ee43266533a8fdbcc84e65e539"}], "stats": {"total": 28, "additions": 22, "deletions": 6}, "files": [{"sha": "5611246ed95a502ac32fbd461925d2ca88099ce7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd65fc87824ef69e69c6e79cd1323b43b77e0866/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd65fc87824ef69e69c6e79cd1323b43b77e0866/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bd65fc87824ef69e69c6e79cd1323b43b77e0866", "patch": "@@ -1,3 +1,10 @@\n+2014-03-08  Richard Sandiford  <rdsandiford@googlemail.com>\n+\n+\tPR target/58271\n+\t* config/mips/mips.c (mips_option_override): Promote -mpaired-single\n+\twarning to an error.  Disable TARGET_PAIRED_SINGLE and TARGET_MIPS3D\n+\tif they can't be used.\n+\n 2014-03-07  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* configure.ac (HAVE_AS_IX86_TLSLDMPLT): Improve test for Solaris"}, {"sha": "143169bc150fa05a223dafcc4374c230389b45e2", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 15, "deletions": 6, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bd65fc87824ef69e69c6e79cd1323b43b77e0866/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bd65fc87824ef69e69c6e79cd1323b43b77e0866/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=bd65fc87824ef69e69c6e79cd1323b43b77e0866", "patch": "@@ -17206,15 +17206,24 @@ mips_option_override (void)\n   /* Make sure that when TARGET_PAIRED_SINGLE_FLOAT is true, TARGET_FLOAT64\n      and TARGET_HARD_FLOAT_ABI are both true.  */\n   if (TARGET_PAIRED_SINGLE_FLOAT && !(TARGET_FLOAT64 && TARGET_HARD_FLOAT_ABI))\n-    error (\"%qs must be used with %qs\",\n-\t   TARGET_MIPS3D ? \"-mips3d\" : \"-mpaired-single\",\n-\t   TARGET_HARD_FLOAT_ABI ? \"-mfp64\" : \"-mhard-float\");\n+    {\n+      error (\"%qs must be used with %qs\",\n+\t     TARGET_MIPS3D ? \"-mips3d\" : \"-mpaired-single\",\n+\t     TARGET_HARD_FLOAT_ABI ? \"-mfp64\" : \"-mhard-float\");\n+      target_flags &= ~MASK_PAIRED_SINGLE_FLOAT;\n+      TARGET_MIPS3D = 0;\n+    }\n \n-  /* Make sure that the ISA supports TARGET_PAIRED_SINGLE_FLOAT when it is\n-     enabled.  */\n+  /* Make sure that -mpaired-single is only used on ISAs that support it.\n+     We must disable it otherwise since it relies on other ISA properties\n+     like ISA_HAS_8CC having their normal values.  */\n   if (TARGET_PAIRED_SINGLE_FLOAT && !ISA_HAS_PAIRED_SINGLE)\n-    warning (0, \"the %qs architecture does not support paired-single\"\n+    {\n+      error (\"the %qs architecture does not support paired-single\"\n \t     \" instructions\", mips_arch_info->name);\n+      target_flags &= ~MASK_PAIRED_SINGLE_FLOAT;\n+      TARGET_MIPS3D = 0;\n+    }\n \n   if (mips_r10k_cache_barrier != R10K_CACHE_BARRIER_NONE\n       && !TARGET_CACHE_BUILTIN)"}]}