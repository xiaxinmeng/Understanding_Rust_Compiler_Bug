{"sha": "d44d791012efda1f48ed647d1d3a1538d15d4e19", "node_id": "C_kwDOANBUbNoAKGQ0NGQ3OTEwMTJlZmRhMWY0OGVkNjQ3ZDFkM2ExNTM4ZDE1ZDRlMTk", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2021-11-08T17:58:03Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2021-11-08T17:58:51Z"}, "message": "Remove workaround allowing interposition of nested functions.\n\n\t* gimple.c (gimple_call_static_chain_flags): Revert the workaround\n\tallowing interposition since issues with binds_to_local_def were\n\thopefully solved.", "tree": {"sha": "a67aa3ea4ce7844b8d5f337d7f905ae28256bf31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a67aa3ea4ce7844b8d5f337d7f905ae28256bf31"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d44d791012efda1f48ed647d1d3a1538d15d4e19", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d44d791012efda1f48ed647d1d3a1538d15d4e19", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d44d791012efda1f48ed647d1d3a1538d15d4e19", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d44d791012efda1f48ed647d1d3a1538d15d4e19/comments", "author": null, "committer": null, "parents": [{"sha": "0cd653bd2559701da9cc4c9bf51f22bdd68623b5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0cd653bd2559701da9cc4c9bf51f22bdd68623b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0cd653bd2559701da9cc4c9bf51f22bdd68623b5"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "9e65fa61c732045b9ea5028171b0bb947caf36f0", "filename": "gcc/gimple.c", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d44d791012efda1f48ed647d1d3a1538d15d4e19/gcc%2Fgimple.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d44d791012efda1f48ed647d1d3a1538d15d4e19/gcc%2Fgimple.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgimple.c?ref=d44d791012efda1f48ed647d1d3a1538d15d4e19", "patch": "@@ -1645,13 +1645,13 @@ gimple_call_static_chain_flags (const gcall *stmt)\n       modref_summary *summary = node ? get_modref_function_summary (node)\n \t\t\t\t: NULL;\n \n+      /* Nested functions should always bind to current def since\n+\t there is no public ABI for them.  */\n+      gcc_checking_assert (node->binds_to_current_def_p ());\n       if (summary)\n \t{\n \t  int modref_flags = summary->static_chain_flags;\n \n-\t  /* ??? Nested functions should always bind to current def.  */\n-\t  if (!node->binds_to_current_def_p ())\n-\t    modref_flags = interposable_eaf_flags (modref_flags, flags);\n \t  if (dbg_cnt (ipa_mod_ref_pta))\n \t    flags |= modref_flags;\n \t}"}]}