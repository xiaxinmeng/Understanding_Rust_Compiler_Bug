{"sha": "f28aa681d399c174527abd917afe15a3174a401e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjI4YWE2ODFkMzk5YzE3NDUyN2FiZDkxN2FmZTE1YTMxNzRhNDAxZQ==", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2013-10-24T10:42:43Z"}, "committer": {"name": "Marek Polacek", "email": "mpolacek@gcc.gnu.org", "date": "2013-10-24T10:42:43Z"}, "message": "c-parser.c (c_parser_struct_declaration): Add a comment.\n\nc/\n\t* c-parser.c (c_parser_struct_declaration): Add a comment.\n\t(c_parser_declarator): Don't allow _Alignas here.\ntestsuite/\n\t* gcc.dg/c1x-align-5.c: Add more testing.\n\nFrom-SVN: r204007", "tree": {"sha": "940e59e6e12042dadc381f6e206c11785d7ff06d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/940e59e6e12042dadc381f6e206c11785d7ff06d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f28aa681d399c174527abd917afe15a3174a401e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f28aa681d399c174527abd917afe15a3174a401e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f28aa681d399c174527abd917afe15a3174a401e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f28aa681d399c174527abd917afe15a3174a401e/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "54c09437d1f90441f562140d4c0dfd2598bb9722", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54c09437d1f90441f562140d4c0dfd2598bb9722", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54c09437d1f90441f562140d4c0dfd2598bb9722"}], "stats": {"total": 24, "additions": 23, "deletions": 1}, "files": [{"sha": "1d0dd9569f34f18b1a7d636a754051667629cad7", "filename": "gcc/c/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Fc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Fc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2FChangeLog?ref=f28aa681d399c174527abd917afe15a3174a401e", "patch": "@@ -1,3 +1,8 @@\n+2013-10-24  Marek Polacek  <polacek@redhat.com>\n+\n+\t* c-parser.c (c_parser_struct_declaration): Add a comment.\n+\t(c_parser_declarator): Don't allow _Alignas here.\n+\n 2013-10-17  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* c-parser.c: Include omp-low.h."}, {"sha": "4d6c9303918b220bae9c338f61ca4a0adc1a95da", "filename": "gcc/c/c-parser.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Fc%2Fc-parser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Fc%2Fc-parser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc%2Fc-parser.c?ref=f28aa681d399c174527abd917afe15a3174a401e", "patch": "@@ -2645,6 +2645,11 @@ c_parser_struct_declaration (c_parser *parser)\n     }\n   specs = build_null_declspecs ();\n   decl_loc = c_parser_peek_token (parser)->location;\n+  /* Strictly by the standard, we shouldn't allow _Alignas here,\n+     but it appears to have been intended to allow it there, so\n+     we're keeping it as it is until WG14 reaches a conclusion\n+     of N1731.\n+     <http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1731.pdf>  */\n   c_parser_declspecs (parser, specs, false, true, true,\n \t\t      true, cla_nonabstract_decl);\n   if (parser->error)\n@@ -2959,7 +2964,7 @@ c_parser_declarator (c_parser *parser, bool type_seen_p, c_dtr_syn kind,\n       struct c_declarator *inner;\n       c_parser_consume_token (parser);\n       c_parser_declspecs (parser, quals_attrs, false, false, true,\n-\t\t\t  true, cla_prefer_id);\n+\t\t\t  false, cla_prefer_id);\n       inner = c_parser_declarator (parser, type_seen_p, kind, seen_id);\n       if (inner == NULL)\n \treturn NULL;"}, {"sha": "d68f3846cac5384e5f3d418ad8009defc3e8778e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f28aa681d399c174527abd917afe15a3174a401e", "patch": "@@ -1,3 +1,7 @@\n+2013-10-24  Marek Polacek  <polacek@redhat.com>\n+\n+\t* gcc.dg/c11-align-5.c: Add more testing.\n+\n 2013-10-23  Pat Haugen  <pthaugen@us.ibm.com>\n \n \t* gcc.target/powerpc/direct-move.h: Fix header for executable tests."}, {"sha": "f3a14779ff8f0be0a8d04611998f6db0c6d99ed9", "filename": "gcc/testsuite/gcc.dg/c11-align-5.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-align-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f28aa681d399c174527abd917afe15a3174a401e/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-align-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fc11-align-5.c?ref=f28aa681d399c174527abd917afe15a3174a401e", "patch": "@@ -14,6 +14,14 @@ void foo (int a[_Alignas (0) 10]) { } /* { dg-error \"expected expression before\"\n void\n test (void)\n {\n+  int *_Alignas (long) p; /* { dg-error \"expected\" } */\n+  int *const _Alignas (long) *q; /* { dg-error \"expected\" } */\n+  struct s { int n; };\n+  __builtin_offsetof (struct s _Alignas (int), n); /* { dg-error \"expected\" } */\n+  __typeof (long double _Alignas (0)) e; /* { dg-error \"expected\" } */\n+  sizeof (int _Alignas (int)); /* { dg-error \"expected\" } */\n+  _Alignas (int _Alignas (float)) int t; /* { dg-error \"expected\" } */\n+  __builtin_types_compatible_p (signed _Alignas (0), unsigned); /* { dg-error \"expected\" } */\n   int a[_Alignas (int) 10]; /* { dg-error \"expected expression before\" } */\n   int b[10];\n   foo (b);"}]}