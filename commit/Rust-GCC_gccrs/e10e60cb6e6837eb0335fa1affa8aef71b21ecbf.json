{"sha": "e10e60cb6e6837eb0335fa1affa8aef71b21ecbf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTEwZTYwY2I2ZTY4MzdlYjAzMzVmYTFhZmZhOGFlZjcxYjIxZWNiZg==", "commit": {"author": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2018-01-10T11:34:45Z"}, "committer": {"name": "Janne Blomqvist", "email": "jb@gcc.gnu.org", "date": "2018-01-10T11:34:45Z"}, "message": "PR 83740 Wrong string length type in bounds check\n\nThis patch fixes up the formatting and corrects the PR number in the\nChangeLog for r256425.\n\ngcc/fortran/ChangeLog:\n\n2018-01-10  Janne Blomqvist  <jb@gcc.gnu.org>\n\n\tPR fortran/83740\n\t* trans-array.c (gfc_trans_array_ctor_element): Fix formatting.\n\nFrom-SVN: r256426", "tree": {"sha": "997c5af5ede5722501845830f4dba7bce7b5dbe7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/997c5af5ede5722501845830f4dba7bce7b5dbe7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf/comments", "author": null, "committer": null, "parents": [{"sha": "85c2c761f44b23df217e20354bf83bbe5a4632dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/85c2c761f44b23df217e20354bf83bbe5a4632dd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/85c2c761f44b23df217e20354bf83bbe5a4632dd"}], "stats": {"total": 15, "additions": 10, "deletions": 5}, "files": [{"sha": "05ea28ec69ffa64055ee6c96182a134071f89e4f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=e10e60cb6e6837eb0335fa1affa8aef71b21ecbf", "patch": "@@ -1,6 +1,11 @@\n 2018-01-10  Janne Blomqvist  <jb@gcc.gnu.org>\n \n-\tPR fortran/84740\n+\tPR fortran/83740\n+\t* trans-array.c (gfc_trans_array_ctor_element): Fix formatting.\n+\n+2018-01-10  Janne Blomqvist  <jb@gcc.gnu.org>\n+\n+\tPR fortran/83740\n \t* trans-array.c (gfc_trans_array_ctor_element): Convert RHS to the\n \tLHS type when assigning.\n "}, {"sha": "e35e0c9195fe9b60df09bedaf8a2a4bbc2c8d052", "filename": "gcc/fortran/trans-array.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf/gcc%2Ffortran%2Ftrans-array.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e10e60cb6e6837eb0335fa1affa8aef71b21ecbf/gcc%2Ffortran%2Ftrans-array.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-array.c?ref=e10e60cb6e6837eb0335fa1affa8aef71b21ecbf", "patch": "@@ -1563,18 +1563,18 @@ gfc_trans_array_ctor_element (stmtblock_t * pblock, tree desc,\n \t    {\n \t      gfc_add_modify (&se->pre, first_len_val,\n \t\t\t      fold_convert (TREE_TYPE (first_len_val),\n-\t\t\t\t\t\t       se->string_length));\n+\t\t\t\t\t    se->string_length));\n \t      first_len = false;\n \t    }\n \t  else\n \t    {\n \t      /* Verify that all constructor elements are of the same\n \t\t length.  */\n+\t      tree rhs = fold_convert (TREE_TYPE (first_len_val),\n+\t\t\t\t       se->string_length);\n \t      tree cond = fold_build2_loc (input_location, NE_EXPR,\n \t\t\t\t\t   logical_type_node, first_len_val,\n-\t\t\t\t\t   fold_convert (TREE_TYPE\n-\t\t\t\t\t\t\t (first_len_val),\n-\t\t\t\t\t\t\t se->string_length));\n+\t\t\t\t\t   rhs);\n \t      gfc_trans_runtime_check\n \t\t(true, false, cond, &se->pre, &expr->where,\n \t\t \"Different CHARACTER lengths (%ld/%ld) in array constructor\","}]}