{"sha": "6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmZjM2MzYzAzMzQzZTVhMzNkZjg5ZjhiZTQ0ZjVlNTIzYWQ5OWNkNg==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-01-04T00:14:31Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-01-04T00:14:31Z"}, "message": "re PR c/34457 (ICE with VLA and -combine)\n\ngcc/\n\tPR c/34457:\n\t* c-common.c (c_type_hash): Handle VLAs.\ngcc/testsuite\n\tPR c/34457:\n\t* gcc.dg/pr34457-2.c: New file.\n\t* gcc.dg/pr34457-1.c: New file.\n\nFrom-SVN: r131311", "tree": {"sha": "b9e4f4cbbeed5ac124cea9852ab5a4afa0caa93e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9e4f4cbbeed5ac124cea9852ab5a4afa0caa93e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/comments", "author": null, "committer": null, "parents": [{"sha": "1af0d737922e03bbd97c183756b29c99dc5e7cc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1af0d737922e03bbd97c183756b29c99dc5e7cc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1af0d737922e03bbd97c183756b29c99dc5e7cc2"}], "stats": {"total": 45, "additions": 43, "deletions": 2}, "files": [{"sha": "8a7ae195fe389b4122bd3de1ba90aa43d2a560f8", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "patch": "@@ -1,3 +1,8 @@\n+2008-01-03  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR c/34457:\n+\t* c-common.c (c_type_hash): Handle VLAs.\n+\n 2008-01-03  Jan Hubicka  <jh@suse.cz>\n \n \tPR tree-optimization/31081"}, {"sha": "4e5d24c6fd2440ed3080629595c2df3b2c0c4372", "filename": "gcc/c-common.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "patch": "@@ -1,6 +1,6 @@\n /* Subroutines shared by all languages that are variants of C.\n    Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,\n-   2001, 2002, 2003, 2004, 2005, 2006, 2007 Free Software Foundation, Inc.\n+   2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.\n \n This file is part of GCC.\n \n@@ -3171,7 +3171,11 @@ c_type_hash (const void *p)\n     }\n   for (; t2; t2 = TREE_CHAIN (t2))\n     i++;\n-  size = TREE_INT_CST_LOW (TYPE_SIZE (t));\n+  /* We might have a VLA here.  */\n+  if (TREE_CODE (TYPE_SIZE (t)) != INTEGER_CST)\n+    size = 0;\n+  else\n+    size = TREE_INT_CST_LOW (TYPE_SIZE (t));\n   return ((size << 24) | (i << shift));\n }\n "}, {"sha": "6f91d5dcda72b28081f4b7469fa24c640557a561", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "patch": "@@ -1,3 +1,9 @@\n+2008-01-03  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR c/34457:\n+\t* gcc.dg/pr34457-2.c: New file.\n+\t* gcc.dg/pr34457-1.c: New file.\n+\n 2008-01-03  Sebastian Pop  <sebastian.pop@amd.com>\n \n \tRevert fix for PR tree-optimization/34458."}, {"sha": "7a1efed54d94c8577e88a59e0e6ad38dcea66c08", "filename": "gcc/testsuite/gcc.dg/pr34457-1.c", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34457-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34457-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34457-1.c?ref=6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "patch": "@@ -0,0 +1,23 @@\n+/* PR c/34457 */\n+/* { dg-do compile } */\n+/* { dg-options \"--combine -O2\" } */\n+/* { dg-additional-sources \"pr34457-2.c\" } */\n+   \n+\n+typedef __SIZE_TYPE__ size_t;\n+extern int printf (const char *, ...);\n+extern void *memset (void *, int, size_t);\n+\n+int bar (int (*)(), int, void *);\n+\n+int\n+main(int argc, char **argv)\n+{\n+  struct s { int a; char b[argc]; };\n+  int nested (struct s x) { return x.a + sizeof(x); }\n+  struct s t;\n+  memset (&t, 0, sizeof(t));\n+  t.a = 123;\n+  printf(\"%d\\n\", bar (nested, argc, &t));\n+  return 0;\n+}"}, {"sha": "8e251d3abeb8c9e6f0100b1bde15bc2494caea01", "filename": "gcc/testsuite/gcc.dg/pr34457-2.c", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34457-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6fc3c3c03343e5a33df89f8be44f5e523ad99cd6/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34457-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr34457-2.c?ref=6fc3c3c03343e5a33df89f8be44f5e523ad99cd6", "patch": "@@ -0,0 +1,3 @@\n+/* Additional file for PR c/34457.  */\n+\n+int x;"}]}