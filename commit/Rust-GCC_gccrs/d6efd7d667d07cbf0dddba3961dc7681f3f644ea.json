{"sha": "d6efd7d667d07cbf0dddba3961dc7681f3f644ea", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDZlZmQ3ZDY2N2QwN2NiZjBkZGRiYTM5NjFkYzc2ODFmM2Y2NDRlYQ==", "commit": {"author": {"name": "Dorit Naishlos", "email": "dorit@il.ibm.com", "date": "2005-03-17T21:08:06Z"}, "committer": {"name": "Dorit Nuzman", "email": "dorit@gcc.gnu.org", "date": "2005-03-17T21:08:06Z"}, "message": "re PR tree-optimization/20474 (ICE while compiling openmotif-2.2.3 with -ftree-vectorize)\n\n        PR tree-optimization/20474\n        * tree-vect-analyze.c (vect_analyze_pointer_ref_access): Check the\n        size_type of the relevant pointer. Check for COMPLETE_TYPE_P.\n\nFrom-SVN: r96632", "tree": {"sha": "4554f320f96b682b69921d2e131d1f9f7ba6d781", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4554f320f96b682b69921d2e131d1f9f7ba6d781"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d6efd7d667d07cbf0dddba3961dc7681f3f644ea", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6efd7d667d07cbf0dddba3961dc7681f3f644ea", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6efd7d667d07cbf0dddba3961dc7681f3f644ea", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6efd7d667d07cbf0dddba3961dc7681f3f644ea/comments", "author": null, "committer": null, "parents": [{"sha": "981c7dcef835c914783cd456ee18a29611afe4db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/981c7dcef835c914783cd456ee18a29611afe4db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/981c7dcef835c914783cd456ee18a29611afe4db"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "19f8137edf49a4e4d1063065cd241f382d01fad5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6efd7d667d07cbf0dddba3961dc7681f3f644ea/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6efd7d667d07cbf0dddba3961dc7681f3f644ea/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d6efd7d667d07cbf0dddba3961dc7681f3f644ea", "patch": "@@ -1,3 +1,9 @@\n+2005-03-17  Dorit Naishlos  <dorit@il.ibm.com>\n+\n+\tPR tree-optimization/20474\n+\t* tree-vect-analyze.c (vect_analyze_pointer_ref_access): Check the \n+\tsize_type of the relevant pointer. Check for COMPLETE_TYPE_P.\n+\n 2005-03-17  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* config/h8300/h8300-protos.h: Remove prototypes for"}, {"sha": "dd9342a8136b968df0e6867b23f4090a9c805e7d", "filename": "gcc/tree-vect-analyze.c", "status": "modified", "additions": 9, "deletions": 2, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6efd7d667d07cbf0dddba3961dc7681f3f644ea/gcc%2Ftree-vect-analyze.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6efd7d667d07cbf0dddba3961dc7681f3f644ea/gcc%2Ftree-vect-analyze.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-analyze.c?ref=d6efd7d667d07cbf0dddba3961dc7681f3f644ea", "patch": "@@ -1401,8 +1401,7 @@ vect_analyze_pointer_ref_access (tree memref, tree stmt, bool is_read,\n       return NULL;\n     }\n \n-  reftype = TREE_TYPE (init);\n-  if (!POINTER_TYPE_P (reftype)) \n+  if (!POINTER_TYPE_P (TREE_TYPE (init))) \n     {\n       if (vect_print_dump_info (REPORT_UNVECTORIZED_LOOPS,\n \t\t\t\tLOOP_LOC (loop_vinfo))) \n@@ -1412,6 +1411,14 @@ vect_analyze_pointer_ref_access (tree memref, tree stmt, bool is_read,\n \n   *ptr_step = fold_convert (ssizetype, step);\n   innertype = TREE_TYPE (reftype);\n+  if (!COMPLETE_TYPE_P (innertype))\n+    {\n+      if (vect_print_dump_info (REPORT_UNVECTORIZED_LOOPS,\n+                              LOOP_LOC (loop_vinfo)))\n+      fprintf (vect_dump, \"not vectorized: pointer to incomplete type.\");\n+      return NULL;\n+    }\n+   \n   /* Check that STEP is a multiple of type size.  */\n   if (!integer_zerop (size_binop (TRUNC_MOD_EXPR, *ptr_step, \n  \t\t        fold_convert (ssizetype, TYPE_SIZE_UNIT (innertype)))))"}]}