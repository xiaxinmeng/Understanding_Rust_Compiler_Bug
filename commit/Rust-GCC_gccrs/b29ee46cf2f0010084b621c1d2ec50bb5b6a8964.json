{"sha": "b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjI5ZWU0NmNmMmYwMDEwMDg0YjYyMWMxZDJlYzUwYmI1YjZhODk2NA==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-10-14T09:53:55Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2009-10-14T09:53:55Z"}, "message": "re PR debug/41695 (Invalid .debug_loc created)\n\n\tPR debug/41695\n\t* dwarf2out.c (dwarf2out_var_location): Always clear\n\tlast_postcall_label when changing last_label.\n\n\t* gcc.dg/debug/dwarf2/pr41695.c: New test.\n\nFrom-SVN: r152760", "tree": {"sha": "abd2f224224e9cd62618bc0a46713303c77d86be", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/abd2f224224e9cd62618bc0a46713303c77d86be"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/comments", "author": null, "committer": null, "parents": [{"sha": "1b5bc8e9f21dcf98f5bb9ca3e096c5633cbc2ada", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1b5bc8e9f21dcf98f5bb9ca3e096c5633cbc2ada", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1b5bc8e9f21dcf98f5bb9ca3e096c5633cbc2ada"}], "stats": {"total": 34, "additions": 31, "deletions": 3}, "files": [{"sha": "992f9b647c061ab0ec3a5a3a8fe8a1a926c889d7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "patch": "@@ -1,3 +1,9 @@\n+2009-10-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/41695\n+\t* dwarf2out.c (dwarf2out_var_location): Always clear\n+\tlast_postcall_label when changing last_label.\n+\n 2009-10-14  Pascal Obry  <obry@adacore.com>\n \n \t* gcc.c (DEFAULT_SWITCH_CURTAILS_COMPILATION): Add -E."}, {"sha": "2f9d2b8337b8a5cfa67ff06fbb1e7cc4192ce9e4", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "patch": "@@ -20013,8 +20013,7 @@ dwarf2out_var_location (rtx loc_note)\n       ASM_OUTPUT_DEBUG_LABEL (asm_out_file, \"LVL\", loclabel_num);\n       loclabel_num++;\n       last_label = ggc_strdup (loclabel);\n-      if (!NOTE_DURING_CALL_P (loc_note))\n-\tlast_postcall_label = NULL;\n+      last_postcall_label = NULL;\n     }\n   newloc->var_loc_note = loc_note;\n   newloc->next = NULL;"}, {"sha": "c93c579c5c8a8efb2055c02d47f56209487e72a5", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "patch": "@@ -1,8 +1,13 @@\n+2009-10-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/41695\n+\t* gcc.dg/debug/dwarf2/pr41695.c: New test.\n+\n 2009-10-14  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* gcc.target/i386/i386.exp (check_effective_target_ms_hook_prologue):\n \tNew procedure.\n-\t* gcc.target/i386/ms_hook_prologue.c: Check for  ms_hook_prologue\n+\t* gcc.target/i386/ms_hook_prologue.c: Check for ms_hook_prologue\n \teffective target.\n \n 2009-10-14  Jason Merrill  <jason@redhat.com>"}, {"sha": "d61b5a293f564f5cf24e943da49fcd59a74c60dd", "filename": "gcc/testsuite/gcc.dg/debug/dwarf2/pr41695.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr41695.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b29ee46cf2f0010084b621c1d2ec50bb5b6a8964/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr41695.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fdebug%2Fdwarf2%2Fpr41695.c?ref=b29ee46cf2f0010084b621c1d2ec50bb5b6a8964", "patch": "@@ -0,0 +1,18 @@\n+/* PR debug/41695 */\n+/* { dg-do compile } */\n+/* { dg-options \"-g -O2 -dA -fno-merge-debug-strings\" } */\n+\n+int bar (int);\n+\n+void\n+foo (void)\n+{\n+  int b = 0;\n+  b = bar (b);\n+  b = bar (b);\n+  b = bar (b);\n+  b = bar (b);\n+  bar (b);\n+}\n+\n+/* { dg-final { scan-assembler-not \"LVL(\\[0-9\\]+)-\\[^1\\]\\[^\\\\r\\\\n\\]*Location list begin address\\[^\\\\r\\\\n\\]*\\[\\\\r\\\\n\\]+\\[^\\\\r\\\\n\\]*LVL\\\\1-1-\" } } */"}]}