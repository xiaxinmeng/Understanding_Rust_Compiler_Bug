{"sha": "08a557f68225a22e690482ab7c1671231d96b2ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDhhNTU3ZjY4MjI1YTIyZTY5MDQ4MmFiN2MxNjcxMjMxZDk2YjJhYw==", "commit": {"author": {"name": "Mark Shinwell", "email": "shinwell@codesourcery.com", "date": "2006-08-21T10:10:58Z"}, "committer": {"name": "Mark Shinwell", "email": "shinwell@gcc.gnu.org", "date": "2006-08-21T10:10:58Z"}, "message": "pr-support.c (__gnu_unwind_execute): Insert \" + 1\" in necessary places to pass the correct \"number of registers\"...\n\n\tgcc/\n\t* config/arm/pr-support.c (__gnu_unwind_execute): Insert \" + 1\" in\n\tnecessary places to pass the correct \"number of registers\" values\n\tto _Unwind_VRS_Pop.\n\n\tgcc/testsuite/\n \t* g++.dg/eh/arm-vfp-unwind.C: New test.\n\nFrom-SVN: r116291", "tree": {"sha": "64512c7e3821c3ff89a5a5bcd03debbfc3c16aa5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/64512c7e3821c3ff89a5a5bcd03debbfc3c16aa5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/08a557f68225a22e690482ab7c1671231d96b2ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08a557f68225a22e690482ab7c1671231d96b2ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/08a557f68225a22e690482ab7c1671231d96b2ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/08a557f68225a22e690482ab7c1671231d96b2ac/comments", "author": null, "committer": null, "parents": [{"sha": "1af4bba82ed51ba8108d40badd3d39204f810838", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1af4bba82ed51ba8108d40badd3d39204f810838", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1af4bba82ed51ba8108d40badd3d39204f810838"}], "stats": {"total": 58, "additions": 54, "deletions": 4}, "files": [{"sha": "b0143f71ba665863e0325efa9f32ea7e0fbe6d86", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=08a557f68225a22e690482ab7c1671231d96b2ac", "patch": "@@ -1,3 +1,9 @@\n+2006-08-21  Mark Shinwell  <shinwell@codesourcery.com>\n+ \n+\t* config/arm/pr-support.c (__gnu_unwind_execute): Insert \" + 1\" in\n+\tnecessary places to pass the correct \"number of registers\" values\n+\tto _Unwind_VRS_Pop.\n+\n 2006-08-20  Jan Hubicka  <jh@suse.cz>\n \n \t* tree-ssa-alias.c (eq_ptr_info, ptr_info_hash): New function."}, {"sha": "0e750bf3e09fb221de9ea9ec3674a9a0461dc135", "filename": "gcc/config/arm/pr-support.c", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2Fconfig%2Farm%2Fpr-support.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2Fconfig%2Farm%2Fpr-support.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fpr-support.c?ref=08a557f68225a22e690482ab7c1671231d96b2ac", "patch": "@@ -224,7 +224,7 @@ __gnu_unwind_execute (_Unwind_Context * context, __gnu_unwind_state * uws)\n \t    {\n \t      /* Pop VFP registers with fldmx.  */\n \t      op = next_unwind_byte (uws);\n-\t      op = ((op & 0xf0) << 12) | (op & 0xf);\n+\t      op = ((op & 0xf0) << 12) | ((op & 0xf) + 1);\n \t      if (_Unwind_VRS_Pop (context, _UVRSC_VFP, op, _UVRSD_VFPX)\n \t\t  != _UVRSR_OK)\n \t\treturn _URC_FAILURE;\n@@ -253,7 +253,7 @@ __gnu_unwind_execute (_Unwind_Context * context, __gnu_unwind_state * uws)\n \t    {\n \t      /* Pop iWMMXt D registers.  */\n \t      op = next_unwind_byte (uws);\n-\t      op = ((op & 0xf0) << 12) | (op & 0xf);\n+\t      op = ((op & 0xf0) << 12) | ((op & 0xf) + 1);\n \t      if (_Unwind_VRS_Pop (context, _UVRSC_WMMXD, op, _UVRSD_UINT64)\n \t\t  != _UVRSR_OK)\n \t\treturn _URC_FAILURE;\n@@ -284,7 +284,7 @@ __gnu_unwind_execute (_Unwind_Context * context, __gnu_unwind_state * uws)\n \t    {\n \t      /* Pop FPA registers.  */\n \t      op = next_unwind_byte (uws);\n-\t      op = ((op & 0xf0) << 12) | (op & 0xf);\n+\t      op = ((op & 0xf0) << 12) | ((op & 0xf) + 1);\n \t      if (_Unwind_VRS_Pop (context, _UVRSC_FPA, op, _UVRSD_FPAX)\n \t\t  != _UVRSR_OK)\n \t\treturn _URC_FAILURE;\n@@ -294,7 +294,7 @@ __gnu_unwind_execute (_Unwind_Context * context, __gnu_unwind_state * uws)\n \t    {\n \t      /* Pop VFP registers with fldmd.  */\n \t      op = next_unwind_byte (uws);\n-\t      op = ((op & 0xf0) << 12) | (op & 0xf);\n+\t      op = ((op & 0xf0) << 12) | ((op & 0xf) + 1);\n \t      if (_Unwind_VRS_Pop (context, _UVRSC_VFP, op, _UVRSD_DOUBLE)\n \t\t  != _UVRSR_OK)\n \t\treturn _URC_FAILURE;"}, {"sha": "0f92e5f646579aa0e18c6885570931863434211d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=08a557f68225a22e690482ab7c1671231d96b2ac", "patch": "@@ -1,3 +1,7 @@\n+2006-08-21  Mark Shinwell  <shinwell@codesourcery.com>\n+ \n+ \t* g++.dg/eh/arm-vfp-unwind.C: New test.\n+ \n 2006-08-20  Mark Mitchell  <mark@codesourcery.com>\n \n \tPR c++/28341"}, {"sha": "94b53b595d8a681e4f9e74f0384dd0757b1f4573", "filename": "gcc/testsuite/g++.dg/eh/arm-vfp-unwind.C", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Farm-vfp-unwind.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/08a557f68225a22e690482ab7c1671231d96b2ac/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Farm-vfp-unwind.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Feh%2Farm-vfp-unwind.C?ref=08a557f68225a22e690482ab7c1671231d96b2ac", "patch": "@@ -0,0 +1,40 @@\n+/* { dg-require-effective-target arm32 } */\n+/* { dg-do run } */\n+\n+/* Test to catch off-by-one errors in arm/pr-support.c.  */\n+\n+#if defined (__VFP_FP__) && !defined (__SOFTFP__)\n+\n+#include <iostream>\n+#include <stdlib.h>\n+\n+using namespace std;\n+\n+static void donkey ()\n+{\n+  asm volatile (\"fcpyd d9, %P0\" : : \"w\" (1.2345) : \"d9\");\n+  throw 1;\n+}\n+\n+int main()\n+{\n+  try\n+    {\n+      donkey ();\n+    }\n+  catch (int foo)\n+    {\n+      return 0;\n+    }\n+  return 1;\n+}\n+\n+#else\n+\n+int main()\n+{\n+  return 0;\n+}\n+\n+#endif\n+"}]}