{"sha": "b962cd0b239656dac5c053e29460de730b8848c5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjk2MmNkMGIyMzk2NTZkYWM1YzA1M2UyOTQ2MGRlNzMwYjg4NDhjNQ==", "commit": {"author": {"name": "Kresten Krab Thorup", "email": "krab@gcc.gnu.org", "date": "1994-10-06T16:17:38Z"}, "committer": {"name": "Kresten Krab Thorup", "email": "krab@gcc.gnu.org", "date": "1994-10-06T16:17:38Z"}, "message": "Delay eeing when unarchiving.\n\nFrom-SVN: r8229", "tree": {"sha": "e3f4910dde31d4e1bb4f0e32a38a1ffe2b75121c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e3f4910dde31d4e1bb4f0e32a38a1ffe2b75121c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b962cd0b239656dac5c053e29460de730b8848c5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b962cd0b239656dac5c053e29460de730b8848c5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b962cd0b239656dac5c053e29460de730b8848c5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b962cd0b239656dac5c053e29460de730b8848c5/comments", "author": null, "committer": null, "parents": [{"sha": "9a9a996b7b83ac05a2ff8715051a86a3abf59f39", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a9a996b7b83ac05a2ff8715051a86a3abf59f39", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a9a996b7b83ac05a2ff8715051a86a3abf59f39"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "f78f7871ecbe6d43684b0a8c921f4fa466be5b9b", "filename": "gcc/objc/archive.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b962cd0b239656dac5c053e29460de730b8848c5/gcc%2Fobjc%2Farchive.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b962cd0b239656dac5c053e29460de730b8848c5/gcc%2Fobjc%2Farchive.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Farchive.c?ref=b962cd0b239656dac5c053e29460de730b8848c5", "patch": "@@ -1427,9 +1427,11 @@ static void __objc_finish_write_root_object(struct objc_typed_stream* stream)\n static void __objc_finish_read_root_object(struct objc_typed_stream* stream)\n {\n   node_ptr node;\n+  struct objc_list* free_list;\n   SEL awake_sel = sel_get_any_uid (\"awake\");\n \n   /* resolve object forward references */\n+  free_list = list_cons(NULL, NULL);\n   for (node = hash_next (stream->object_refs, NULL); node;\n        node = hash_next (stream->object_refs, node))\n     {\n@@ -1439,10 +1441,13 @@ static void __objc_finish_read_root_object(struct objc_typed_stream* stream)\n       while(reflist)\n \t{\n \t  *((id*)reflist->head) = object;\n+          if (list_find(&free_list, reflist) == NULL)\n+\t    free_list = list_cons (reflist, free_list);\n \t  reflist = reflist->tail;\n \t}\n-      list_free (node->value);\n     }\n+  list_mapcar (free_list, free);\n+  list_free (free_list);\n \n   /* empty object reference table */\n   hash_delete (stream->object_refs);"}]}