{"sha": "1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWU1ZTZmZjVlNjMxMjdhN2E2YWU0ZWU2NGQwOGEyMmE0MWEwMjFjNA==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2018-07-31T14:26:10Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2018-07-31T14:26:10Z"}, "message": "[39/46] Change STMT_VINFO_UNALIGNED_DR to a dr_vec_info\n\nAfter previous changes, it makes more sense for STMT_VINFO_UNALIGNED_DR\nto be dr_vec_info rather than a data_reference.\n\n2018-07-31  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* tree-vectorizer.h (_loop_vec_info::unaligned_dr): Change to\n\tdr_vec_info.\n\t* tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Update\n\taccordingly.\n\t* tree-vect-loop.c (vect_analyze_loop_2): Likewise.\n\t* tree-vect-loop-manip.c (get_misalign_in_elems): Likewise.\n\t(vect_gen_prolog_loop_niters): Likewise.\n\nFrom-SVN: r263154", "tree": {"sha": "30b746c7cef5848d90a741f61bdd947f722a0612", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/30b746c7cef5848d90a741f61bdd947f722a0612"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "89fa689a9e898ccb81b966477b3ac4e254461b05", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/89fa689a9e898ccb81b966477b3ac4e254461b05", "html_url": "https://github.com/Rust-GCC/gccrs/commit/89fa689a9e898ccb81b966477b3ac4e254461b05"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "a9d81d4aaacaaf8d3fe66a615d6b6e910e1a6b78", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "patch": "@@ -1,3 +1,13 @@\n+2018-07-31  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* tree-vectorizer.h (_loop_vec_info::unaligned_dr): Change to\n+\tdr_vec_info.\n+\t* tree-vect-data-refs.c (vect_enhance_data_refs_alignment): Update\n+\taccordingly.\n+\t* tree-vect-loop.c (vect_analyze_loop_2): Likewise.\n+\t* tree-vect-loop-manip.c (get_misalign_in_elems): Likewise.\n+\t(vect_gen_prolog_loop_niters): Likewise.\n+\n 2018-07-31  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* tree-vectorizer.h (set_dr_misalignment, dr_misalignment)"}, {"sha": "aac7fb4e9e87dbc1dea57c36e2603b428e01bdea", "filename": "gcc/tree-vect-data-refs.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vect-data-refs.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vect-data-refs.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-data-refs.c?ref=1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "patch": "@@ -2135,7 +2135,7 @@ vect_enhance_data_refs_alignment (loop_vec_info loop_vinfo)\n \t\tvect_update_misalignment_for_peel (dr_info, dr0_info, npeel);\n \t      }\n \n-          LOOP_VINFO_UNALIGNED_DR (loop_vinfo) = dr0_info->dr;\n+          LOOP_VINFO_UNALIGNED_DR (loop_vinfo) = dr0_info;\n           if (npeel)\n             LOOP_VINFO_PEELING_FOR_ALIGNMENT (loop_vinfo) = npeel;\n           else"}, {"sha": "e566333420da6e0e20513453ea8e42363e8cf8ae", "filename": "gcc/tree-vect-loop-manip.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vect-loop-manip.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vect-loop-manip.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop-manip.c?ref=1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "patch": "@@ -1560,7 +1560,7 @@ vect_update_ivs_after_vectorizer (loop_vec_info loop_vinfo,\n static tree\n get_misalign_in_elems (gimple **seq, loop_vec_info loop_vinfo)\n {\n-  dr_vec_info *dr_info = DR_VECT_AUX (LOOP_VINFO_UNALIGNED_DR (loop_vinfo));\n+  dr_vec_info *dr_info = LOOP_VINFO_UNALIGNED_DR (loop_vinfo);\n   stmt_vec_info stmt_info = dr_info->stmt;\n   tree vectype = STMT_VINFO_VECTYPE (stmt_info);\n \n@@ -1627,7 +1627,7 @@ static tree\n vect_gen_prolog_loop_niters (loop_vec_info loop_vinfo,\n \t\t\t     basic_block bb, int *bound)\n {\n-  dr_vec_info *dr_info = DR_VECT_AUX (LOOP_VINFO_UNALIGNED_DR (loop_vinfo));\n+  dr_vec_info *dr_info = LOOP_VINFO_UNALIGNED_DR (loop_vinfo);\n   tree var;\n   tree niters_type = TREE_TYPE (LOOP_VINFO_NITERS (loop_vinfo));\n   gimple_seq stmts = NULL, new_stmts = NULL;"}, {"sha": "32643d303afe420f229edfdd23a05ecea0784435", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "patch": "@@ -2142,8 +2142,7 @@ vect_analyze_loop_2 (loop_vec_info loop_vinfo, bool &fatal, unsigned *n_stmts)\n \t  /* Niters for peeled prolog loop.  */\n \t  if (LOOP_VINFO_PEELING_FOR_ALIGNMENT (loop_vinfo) < 0)\n \t    {\n-\t      dr_vec_info *dr_info\n-\t\t= DR_VECT_AUX (LOOP_VINFO_UNALIGNED_DR (loop_vinfo));\n+\t      dr_vec_info *dr_info = LOOP_VINFO_UNALIGNED_DR (loop_vinfo);\n \t      tree vectype = STMT_VINFO_VECTYPE (dr_info->stmt);\n \t      niters_th += TYPE_VECTOR_SUBPARTS (vectype) - 1;\n \t    }"}, {"sha": "a9c9805c51f70c376698ff206714e96d55d63bb3", "filename": "gcc/tree-vectorizer.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vectorizer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4/gcc%2Ftree-vectorizer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.h?ref=1e5e6ff5e63127a7a6ae4ee64d08a22a41a021c4", "patch": "@@ -437,7 +437,7 @@ typedef struct _loop_vec_info : public vec_info {\n   tree mask_compare_type;\n \n   /* Unknown DRs according to which loop was peeled.  */\n-  struct data_reference *unaligned_dr;\n+  struct dr_vec_info *unaligned_dr;\n \n   /* peeling_for_alignment indicates whether peeling for alignment will take\n      place, and what the peeling factor should be:"}]}