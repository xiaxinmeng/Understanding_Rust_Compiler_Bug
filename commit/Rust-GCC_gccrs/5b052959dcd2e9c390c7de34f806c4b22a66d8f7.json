{"sha": "5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWIwNTI5NTlkY2QyZTljMzkwYzdkZTM0ZjgwNmM0YjIyYTY2ZDhmNw==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2020-01-09T15:21:47Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2020-01-09T15:21:47Z"}, "message": "[AArch64] Rename SVE shape \"unary_count\" to \"unary_to_uint\"\n\nThe SVE ACLE shape names use \"_int\" and \"_uint\" for arguments that are\nsigned-integer or unsigned-integer variants of the main vector type.\nWith SVE2 this variation also becomes common for return values,\nwhich the main SVE2 patch handles using \"_to_int\" and \"_to_uint\".\nThis patch renames the existing unary_count shape to match the\nnew scheme.\n\n2020-01-09  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* config/aarch64/aarch64-sve-builtins-shapes.h (unary_count): Delete.\n\t(unary_to_uint): Define.\n\t* config/aarch64/aarch64-sve-builtins-shapes.cc (unary_count_def)\n\t(unary_count): Rename to...\n\t(unary_to_uint_def, unary_to_uint): ...this.\n\t* config/aarch64/aarch64-sve-builtins-base.def: Update accordingly.\n\ngcc/testsuite/\n\t* gcc.target/aarch64/sve/acle/general-c/unary_count_1.c: Rename to...\n\t* gcc.target/aarch64/sve/acle/general-c/unary_to_uint_1.c: ...this.\n\t* gcc.target/aarch64/sve/acle/general-c/unary_count_2.c: Rename to...\n\t* gcc.target/aarch64/sve/acle/general-c/unary_to_uint_2.c: ...this.\n\t* gcc.target/aarch64/sve/acle/general-c/unary_count_3.c: Rename to...\n\t* gcc.target/aarch64/sve/acle/general-c/unary_to_uint_3.c: ...this.\n\nFrom-SVN: r280052", "tree": {"sha": "3da22bd78206d5bba8e8adafbe56383561c1e29c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3da22bd78206d5bba8e8adafbe56383561c1e29c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "99a3b91535cb41807d62478cd769bc1bed0db5df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/99a3b91535cb41807d62478cd769bc1bed0db5df", "html_url": "https://github.com/Rust-GCC/gccrs/commit/99a3b91535cb41807d62478cd769bc1bed0db5df"}], "stats": {"total": 68, "additions": 43, "deletions": 25}, "files": [{"sha": "ad7f519521c206522d67e1ddf60cf208f0608528", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "patch": "@@ -1,3 +1,12 @@\n+2020-01-09  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* config/aarch64/aarch64-sve-builtins-shapes.h (unary_count): Delete.\n+\t(unary_to_uint): Define.\n+\t* config/aarch64/aarch64-sve-builtins-shapes.cc (unary_count_def)\n+\t(unary_count): Rename to...\n+\t(unary_to_uint_def, unary_to_uint): ...this.\n+\t* config/aarch64/aarch64-sve-builtins-base.def: Update accordingly.\n+\n 2020-01-09  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* config/aarch64/aarch64-sve-builtins-functions.h"}, {"sha": "cd0a9bef08fd5293faf4bce8b4bb6cf8a297f090", "filename": "gcc/config/aarch64/aarch64-sve-builtins-base.def", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-base.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-base.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-base.def?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "patch": "@@ -47,8 +47,8 @@ DEF_SVE_FUNCTION (svbrkpb, binary, b, z)\n DEF_SVE_FUNCTION (svcadd, binary_rotate, all_float, mxz)\n DEF_SVE_FUNCTION (svclasta, clast, all_data, implicit)\n DEF_SVE_FUNCTION (svclastb, clast, all_data, implicit)\n-DEF_SVE_FUNCTION (svcls, unary_count, all_signed, mxz)\n-DEF_SVE_FUNCTION (svclz, unary_count, all_integer, mxz)\n+DEF_SVE_FUNCTION (svcls, unary_to_uint, all_signed, mxz)\n+DEF_SVE_FUNCTION (svclz, unary_to_uint, all_integer, mxz)\n DEF_SVE_FUNCTION (svcmla, ternary_rotate, all_float, mxz)\n DEF_SVE_FUNCTION (svcmla_lane, ternary_lane_rotate, hs_float, none)\n DEF_SVE_FUNCTION (svcmpeq, compare_opt_n, all_data, implicit)\n@@ -65,7 +65,7 @@ DEF_SVE_FUNCTION (svcmpne, compare_opt_n, all_data, implicit)\n DEF_SVE_FUNCTION (svcmpne_wide, compare_wide_opt_n, bhs_signed, implicit)\n DEF_SVE_FUNCTION (svcmpuo, compare_opt_n, all_float, implicit)\n DEF_SVE_FUNCTION (svcnot, unary, all_integer, mxz)\n-DEF_SVE_FUNCTION (svcnt, unary_count, all_data, mxz)\n+DEF_SVE_FUNCTION (svcnt, unary_to_uint, all_data, mxz)\n DEF_SVE_FUNCTION (svcntb, count_inherent, none, none)\n DEF_SVE_FUNCTION (svcntb_pat, count_pat, none, none)\n DEF_SVE_FUNCTION (svcntd, count_inherent, none, none)"}, {"sha": "69a062124f38ca1b6da7810dd34dc6c861c3f715", "filename": "gcc/config/aarch64/aarch64-sve-builtins-shapes.cc", "status": "modified", "additions": 21, "deletions": 21, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-shapes.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-shapes.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-shapes.cc?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "patch": "@@ -2104,27 +2104,6 @@ struct unary_convert_def : public overloaded_base<1>\n };\n SHAPE (unary_convert)\n \n-/* sv<t0:uint>_t svfoo[_t0](sv<t0>_t)\n-\n-   i.e. a version of \"unary\" in which the returned vector contains\n-   unsigned integers.  */\n-struct unary_count_def : public overloaded_base<0>\n-{\n-  void\n-  build (function_builder &b, const function_group_info &group) const OVERRIDE\n-  {\n-    b.add_overloaded_functions (group, MODE_none);\n-    build_all (b, \"vu0,v0\", group, MODE_none);\n-  }\n-\n-  tree\n-  resolve (function_resolver &r) const OVERRIDE\n-  {\n-    return r.resolve_unary (TYPE_unsigned);\n-  }\n-};\n-SHAPE (unary_count)\n-\n /* sv<t0>_t svfoo[_n]_t0(<t0>_t).  */\n struct unary_n_def : public overloaded_base<1>\n {\n@@ -2156,6 +2135,27 @@ struct unary_pred_def : public nonoverloaded_base\n };\n SHAPE (unary_pred)\n \n+/* sv<t0:uint>_t svfoo[_t0](sv<t0>_t)\n+\n+   i.e. a version of \"unary\" in which the returned vector contains\n+   unsigned integers.  */\n+struct unary_to_uint_def : public overloaded_base<0>\n+{\n+  void\n+  build (function_builder &b, const function_group_info &group) const OVERRIDE\n+  {\n+    b.add_overloaded_functions (group, MODE_none);\n+    build_all (b, \"vu0,v0\", group, MODE_none);\n+  }\n+\n+  tree\n+  resolve (function_resolver &r) const OVERRIDE\n+  {\n+    return r.resolve_unary (TYPE_unsigned);\n+  }\n+};\n+SHAPE (unary_to_uint)\n+\n /* sv<t0>_t svfoo[_t0](sv<t0:uint>_t)\n \n    where <t0> always belongs a certain type class, and where <t0:uint>"}, {"sha": "151371289e2908ccfcebb18f0a0080f38fa70254", "filename": "gcc/config/aarch64/aarch64-sve-builtins-shapes.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-shapes.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-shapes.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-sve-builtins-shapes.h?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "patch": "@@ -135,9 +135,9 @@ namespace aarch64_sve\n     extern const function_shape *const tmad;\n     extern const function_shape *const unary;\n     extern const function_shape *const unary_convert;\n-    extern const function_shape *const unary_count;\n     extern const function_shape *const unary_n;\n     extern const function_shape *const unary_pred;\n+    extern const function_shape *const unary_to_uint;\n     extern const function_shape *const unary_uint;\n     extern const function_shape *const unary_widen;\n   }"}, {"sha": "943b632adc7289522bbd1530b168ab45e969a8ad", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "patch": "@@ -1,3 +1,12 @@\n+2020-01-09  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* gcc.target/aarch64/sve/acle/general-c/unary_count_1.c: Rename to...\n+\t* gcc.target/aarch64/sve/acle/general-c/unary_to_uint_1.c: ...this.\n+\t* gcc.target/aarch64/sve/acle/general-c/unary_count_2.c: Rename to...\n+\t* gcc.target/aarch64/sve/acle/general-c/unary_to_uint_2.c: ...this.\n+\t* gcc.target/aarch64/sve/acle/general-c/unary_count_3.c: Rename to...\n+\t* gcc.target/aarch64/sve/acle/general-c/unary_to_uint_3.c: ...this.\n+\n 2020-01-09  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* gcc.target/aarch64/sve/acle/general/nrv_1.c: New test."}, {"sha": "888b52513ef60bcd069bc7b166638b81e04bd87f", "filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/unary_to_uint_1.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_1.c?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "previous_filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/unary_count_1.c"}, {"sha": "233e847e9037771c8693072c2445067d048f7b31", "filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/unary_to_uint_2.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_2.c?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "previous_filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/unary_count_2.c"}, {"sha": "da57b07ea84d630b14f483f952ed5349795a9711", "filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/unary_to_uint_3.c", "status": "renamed", "additions": 0, "deletions": 0, "changes": 0, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5b052959dcd2e9c390c7de34f806c4b22a66d8f7/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Faarch64%2Fsve%2Facle%2Fgeneral-c%2Funary_to_uint_3.c?ref=5b052959dcd2e9c390c7de34f806c4b22a66d8f7", "previous_filename": "gcc/testsuite/gcc.target/aarch64/sve/acle/general-c/unary_count_3.c"}]}