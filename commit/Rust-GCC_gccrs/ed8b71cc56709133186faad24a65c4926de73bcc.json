{"sha": "ed8b71cc56709133186faad24a65c4926de73bcc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ4YjcxY2M1NjcwOTEzMzE4NmZhYWQyNGE2NWM0OTI2ZGU3M2JjYw==", "commit": {"author": {"name": "Nagaraju Mekala", "email": "nagaraju.mekala@xilinx.com", "date": "2014-02-11T01:34:03Z"}, "committer": {"name": "Michael Eager", "email": "eager@gcc.gnu.org", "date": "2014-02-11T01:34:03Z"}, "message": "microblaze.c: Extend mcpu version format\n\n2013-11-26  Nagaraju Mekala <nagaraju.mekala@xilinx.com>\n\n * gcc/config/microblaze/microblaze.c: Extend mcpu version format\n\nFrom-SVN: r207680", "tree": {"sha": "aeb500b8820a18b5c5b443e3bcfbeea0c4876eb8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aeb500b8820a18b5c5b443e3bcfbeea0c4876eb8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed8b71cc56709133186faad24a65c4926de73bcc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed8b71cc56709133186faad24a65c4926de73bcc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed8b71cc56709133186faad24a65c4926de73bcc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed8b71cc56709133186faad24a65c4926de73bcc/comments", "author": null, "committer": null, "parents": [{"sha": "9b5414c6e4306c998662b5a5813ae3bcc3d18bd7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b5414c6e4306c998662b5a5813ae3bcc3d18bd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b5414c6e4306c998662b5a5813ae3bcc3d18bd7"}], "stats": {"total": 25, "additions": 18, "deletions": 7}, "files": [{"sha": "8198a5f3b5153de7a89efd15b9b802b0ab07dc27", "filename": "gcc/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed8b71cc56709133186faad24a65c4926de73bcc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed8b71cc56709133186faad24a65c4926de73bcc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed8b71cc56709133186faad24a65c4926de73bcc", "patch": "@@ -1,3 +1,7 @@\n+2013-11-26  Nagaraju Mekala <nagaraju.mekala@xilinx.com>\n+\n+\t* config/microblaze/microblaze.c: Extend mcpu version format\n+\n 2014-02-10  David Holsgrove <david.holsgrove@xilinx.com>\n \n \t* config/microblaze/microblaze.h: Define SIZE_TYPE and PTRDIFF_TYPE."}, {"sha": "cd2a788caaeaeeb5b80de2d23fa6d799c747668a", "filename": "gcc/config/microblaze/microblaze.c", "status": "modified", "additions": 14, "deletions": 7, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed8b71cc56709133186faad24a65c4926de73bcc/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed8b71cc56709133186faad24a65c4926de73bcc/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmicroblaze%2Fmicroblaze.c?ref=ed8b71cc56709133186faad24a65c4926de73bcc", "patch": "@@ -1612,21 +1612,28 @@ static int\n microblaze_version_to_int (const char *version)\n {\n   const char *p, *v;\n-  const char *tmpl = \"vX.YY.Z\";\n+  const char *tmpl = \"vXX.YY.Z\";\n   int iver = 0;\n \n   p = version;\n   v = tmpl;\n \n-  while (*v)\n+  while (*p)\n     {\n       if (*v == 'X')\n \t{\t\t\t/* Looking for major  */\n-\t  if (!(*p >= '0' && *p <= '9'))\n-\t    return -1;\n-\t  iver += (int) (*p - '0');\n-\t  iver *= 10;\n-\t}\n+          if (*p == '.')\n+            {\n+              *v++;\n+            }\n+          else\n+            {\n+\t      if (!(*p >= '0' && *p <= '9'))\n+\t        return -1;\n+\t      iver += (int) (*p - '0');\n+              iver *= 10;\n+\t     }\n+        }\n       else if (*v == 'Y')\n \t{\t\t\t/* Looking for minor  */\n \t  if (!(*p >= '0' && *p <= '9'))"}]}