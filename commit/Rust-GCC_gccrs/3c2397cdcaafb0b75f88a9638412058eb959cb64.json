{"sha": "3c2397cdcaafb0b75f88a9638412058eb959cb64", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2MyMzk3Y2RjYWFmYjBiNzVmODhhOTYzODQxMjA1OGViOTU5Y2I2NA==", "commit": {"author": {"name": "Andy Hutchinson", "email": "hutchinsonandy@aim.com", "date": "2008-04-04T23:45:46Z"}, "committer": {"name": "Andy Hutchinson", "email": "hutchinsonandy@gcc.gnu.org", "date": "2008-04-04T23:45:46Z"}, "message": "re PR target/34916 (gcc.c-torture/execute/pr27364.c fails with -O1, -O2 and -Os)\n\nPR rtl-optimization/34916\nPR middle-end/35519\n* combine.c (create_log_links): Do not create duplicate LOG_LINKS\nbetween instruction pairs\n\nFrom-SVN: r133920", "tree": {"sha": "608b6af689bb766fb939cdcf3c357eaf819afa5a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/608b6af689bb766fb939cdcf3c357eaf819afa5a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3c2397cdcaafb0b75f88a9638412058eb959cb64", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c2397cdcaafb0b75f88a9638412058eb959cb64", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c2397cdcaafb0b75f88a9638412058eb959cb64", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c2397cdcaafb0b75f88a9638412058eb959cb64/comments", "author": null, "committer": null, "parents": [{"sha": "9eb3a0dd852a6a0de2c4849391024e7efc70922d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9eb3a0dd852a6a0de2c4849391024e7efc70922d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9eb3a0dd852a6a0de2c4849391024e7efc70922d"}], "stats": {"total": 23, "additions": 20, "deletions": 3}, "files": [{"sha": "a1a95f991af7c019eb14e32eae2623c4b1f8f481", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c2397cdcaafb0b75f88a9638412058eb959cb64/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c2397cdcaafb0b75f88a9638412058eb959cb64/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=3c2397cdcaafb0b75f88a9638412058eb959cb64", "patch": "@@ -1,3 +1,10 @@\n+2008-04-04 Andy Hutchinson <hutchinsonandy@aim.com>\n+\n+\tPR rtl-optimization/34916\n+\tPR middle-end/35519\n+\t* combine.c (create_log_links): Do not create duplicate LOG_LINKS\n+\tbetween instruction pairs.\n+\n 2008-04-04  Naveen.H.S  <naveen.hs@kpitcummins.com>\n \n \t* doc/invoke.texi: Document -mbitops for SH."}, {"sha": "db828e8e4166dcdd3b559667925fb5fe5924300c", "filename": "gcc/combine.c", "status": "modified", "additions": 13, "deletions": 3, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3c2397cdcaafb0b75f88a9638412058eb959cb64/gcc%2Fcombine.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3c2397cdcaafb0b75f88a9638412058eb959cb64/gcc%2Fcombine.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcombine.c?ref=3c2397cdcaafb0b75f88a9638412058eb959cb64", "patch": "@@ -1,6 +1,6 @@\n /* Optimize by combining instructions for GNU compiler.\n    Copyright (C) 1987, 1988, 1992, 1993, 1994, 1995, 1996, 1997, 1998,\n-   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007\n+   1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008\n    Free Software Foundation, Inc.\n \n This file is part of GCC.\n@@ -976,8 +976,18 @@ create_log_links (void)\n                      assignments later.  */\n                   if (regno >= FIRST_PSEUDO_REGISTER\n                       || asm_noperands (PATTERN (use_insn)) < 0)\n-                    LOG_LINKS (use_insn) =\n-                      alloc_INSN_LIST (insn, LOG_LINKS (use_insn));\n+\t\t    {\n+\t\t      /* Don't add duplicate links between instructions.  */\n+\t\t      rtx links;\n+\t\t      for (links = LOG_LINKS (use_insn); links;\n+\t\t\t   links = XEXP (links, 1))\n+\t\t        if (insn == XEXP (links, 0))\n+\t\t\t  break;\n+\n+\t\t      if (!links)\n+\t\t\tLOG_LINKS (use_insn) =\n+\t\t\t  alloc_INSN_LIST (insn, LOG_LINKS (use_insn));\n+\t\t    }\n                 }\n               next_use[regno] = NULL_RTX;\n             }"}]}