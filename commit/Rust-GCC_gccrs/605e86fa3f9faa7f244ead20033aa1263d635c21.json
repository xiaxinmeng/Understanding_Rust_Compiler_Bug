{"sha": "605e86fa3f9faa7f244ead20033aa1263d635c21", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjA1ZTg2ZmEzZjlmYWE3ZjI0NGVhZDIwMDMzYWExMjYzZDYzNWMyMQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2013-07-30T12:00:42Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2013-07-30T12:00:42Z"}, "message": "profile.c (compute_value_histograms): Do not ICE when there is mismatch only on some counters.\n\n\n\t* profile.c (compute_value_histograms): Do not ICE when\n\tthere is mismatch only on some counters.\n\nCo-Authored-By: Martin Liska <marxin.liska@gmail.com>\n\nFrom-SVN: r201333", "tree": {"sha": "9be479df66543cd0fbfc4055e4671cf88c8b127d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/9be479df66543cd0fbfc4055e4671cf88c8b127d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/605e86fa3f9faa7f244ead20033aa1263d635c21", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/605e86fa3f9faa7f244ead20033aa1263d635c21", "html_url": "https://github.com/Rust-GCC/gccrs/commit/605e86fa3f9faa7f244ead20033aa1263d635c21", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/605e86fa3f9faa7f244ead20033aa1263d635c21/comments", "author": null, "committer": null, "parents": [{"sha": "60de1c7df5486e81b52c9db5003abba08af7b3f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/60de1c7df5486e81b52c9db5003abba08af7b3f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/60de1c7df5486e81b52c9db5003abba08af7b3f9"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "b99e074067c90bb0edea9df66009532d9c3347bc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/605e86fa3f9faa7f244ead20033aa1263d635c21/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/605e86fa3f9faa7f244ead20033aa1263d635c21/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=605e86fa3f9faa7f244ead20033aa1263d635c21", "patch": "@@ -1,3 +1,9 @@\n+2013-07-30  Jan Hubicka  <jh@suse.cz>\n+\t    Martin Liska  <marxin.liska@gmail.com>\n+\n+\t* profile.c (compute_value_histograms): Do not ICE when\n+\tthere is mismatch only on some counters.\n+\n 2013-07-30  Zhenqiang Chen  <zhenqiang.chen@linaro.org>\n \n \tPR rtl-optimization/57637"}, {"sha": "4ad7c9f3ab1e3d48c6c9985c1af0053c85ec6991", "filename": "gcc/profile.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/605e86fa3f9faa7f244ead20033aa1263d635c21/gcc%2Fprofile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/605e86fa3f9faa7f244ead20033aa1263d635c21/gcc%2Fprofile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprofile.c?ref=605e86fa3f9faa7f244ead20033aa1263d635c21", "patch": "@@ -885,12 +885,16 @@ compute_value_histograms (histogram_values values, unsigned cfg_checksum,\n       t = (int) hist->type;\n \n       aact_count = act_count[t];\n-      act_count[t] += hist->n_counters;\n+      if (act_count[t])\n+        act_count[t] += hist->n_counters;\n \n       gimple_add_histogram_value (cfun, stmt, hist);\n       hist->hvalue.counters =  XNEWVEC (gcov_type, hist->n_counters);\n       for (j = 0; j < hist->n_counters; j++)\n-\thist->hvalue.counters[j] = aact_count[j];\n+        if (aact_count[t])\n+\t  hist->hvalue.counters[j] = aact_count[j];\n+\telse\n+\t  hist->hvalue.counters[j] = 0;\n     }\n \n   for (t = 0; t < GCOV_N_VALUE_COUNTERS; t++)"}]}