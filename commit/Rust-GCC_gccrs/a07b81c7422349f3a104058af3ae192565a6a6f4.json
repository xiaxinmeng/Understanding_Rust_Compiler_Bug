{"sha": "a07b81c7422349f3a104058af3ae192565a6a6f4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTA3YjgxYzc0MjIzNDlmM2ExMDQwNThhZjNhZTE5MjU2NWE2YTZmNA==", "commit": {"author": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2016-07-15T19:58:55Z"}, "committer": {"name": "Jerry DeLisle", "email": "jvdelisle@gcc.gnu.org", "date": "2016-07-15T19:58:55Z"}, "message": "re PR fortran/62125 (Nested select type not accepted (rejects valid))\n\n2016-07-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n\t    Marco Restelli <mrestelli@gmail.com>\n\n\tPR fortran/62125\n\t* symbol.c (select_type_insert_tmp): Recursively call self to take care\n\tof nested select type.\n\n\t* gfortran.dg/pr62125.f90: New test.\n\nCo-Authored-By: Marco Restelli <mrestelli@gmail.com>\n\nFrom-SVN: r238400", "tree": {"sha": "61b7c0ce5454c61aa9c28620d7b1f82c25a99954", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/61b7c0ce5454c61aa9c28620d7b1f82c25a99954"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a07b81c7422349f3a104058af3ae192565a6a6f4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a07b81c7422349f3a104058af3ae192565a6a6f4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a07b81c7422349f3a104058af3ae192565a6a6f4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a07b81c7422349f3a104058af3ae192565a6a6f4/comments", "author": null, "committer": null, "parents": [{"sha": "d1129d45b09c6fe0542f439fffda3bd4667a67a1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1129d45b09c6fe0542f439fffda3bd4667a67a1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1129d45b09c6fe0542f439fffda3bd4667a67a1"}], "stats": {"total": 51, "additions": 50, "deletions": 1}, "files": [{"sha": "82e90da0236eadae4e750ef213c6f77b278a0b57", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a07b81c7422349f3a104058af3ae192565a6a6f4", "patch": "@@ -1,3 +1,10 @@\n+2016-07-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\t    Marco Restelli <mrestelli@gmail.com>\n+\n+\tPR fortran/62125\n+\t* symbol.c (select_type_insert_tmp): Recursively call self to take care\n+\tof nested select type.\n+\n 2016-07-15  Cesar Philippidis  <cesar@codesourcery.com>\n \n \t* openmp.c (gfc_match_omp_clauses): Scan for clause vector_length"}, {"sha": "c967f25c85822b25c89f4d44e224d18ae73f72a2", "filename": "gcc/fortran/symbol.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ffortran%2Fsymbol.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ffortran%2Fsymbol.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fsymbol.c?ref=a07b81c7422349f3a104058af3ae192565a6a6f4", "patch": "@@ -2930,7 +2930,11 @@ select_type_insert_tmp (gfc_symtree **st)\n   gfc_select_type_stack *stack = select_type_stack;\n   for (; stack; stack = stack->prev)\n     if ((*st)->n.sym == stack->selector && stack->tmp)\n-      *st = stack->tmp;\n+      {\n+        *st = stack->tmp;\n+        select_type_insert_tmp (st);\n+        return;\n+      }\n }\n \n "}, {"sha": "2793b344fa1e59e99212d94e388882e4c9a02f65", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a07b81c7422349f3a104058af3ae192565a6a6f4", "patch": "@@ -1,3 +1,9 @@\n+2016-07-15  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n+\t    Marco Restelli <mrestelli@gmail.com>\n+\n+\tPR fortran/62125\n+\t* gfortran.dg/pr62125.f90: New test.\n+\n 2016-07-15  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* gcc.target/powerpc/divkc3-1.c: Require p8vector support."}, {"sha": "3256d05cba015b31ee070fb5c013e6050f22330e", "filename": "gcc/testsuite/gfortran.dg/pr62125.f90", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr62125.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a07b81c7422349f3a104058af3ae192565a6a6f4/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr62125.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fpr62125.f90?ref=a07b81c7422349f3a104058af3ae192565a6a6f4", "patch": "@@ -0,0 +1,32 @@\n+! { dg-do run }\n+! PR62125  Nested select type not accepted (rejects valid) \n+module m\n+ implicit none\n+ type, abstract :: t1\n+  logical :: l\n+ end type t1\n+ type, extends(t1), abstract :: t2\n+  integer :: i\n+ end type t2\n+ type, extends(t2) :: t3\n+  real :: x\n+ end type t3\n+contains\n+ subroutine s(u)\n+  class(t1), intent(in) :: u\n+  if(.not.u%l) call abort()\n+   select type(u); class is(t2)\n+     if(u%i.ne.2) call abort()\n+     select type(u); class is(t3)\n+       if(u%x.ne.3.5) call abort()\n+     end select\n+   end select\n+ end subroutine s\n+end module m\n+\n+program p\n+ use m\n+ implicit none\n+ type(t3) :: var = t3( l=.true. , i=2 , x=3.5 )\n+ call s(var)\n+end program p"}]}