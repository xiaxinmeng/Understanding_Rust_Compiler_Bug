{"sha": "67401d45972edb1c09918f9f7feea0ba00680ac4", "node_id": "C_kwDOANBUbNoAKDY3NDAxZDQ1OTcyZWRiMWMwOTkxOGY5ZjdmZWVhMGJhMDA2ODBhYzQ", "commit": {"author": {"name": "Xi Ruoyao", "email": "xry111@xry111.site", "date": "2023-03-03T08:32:41Z"}, "committer": {"name": "Xi Ruoyao", "email": "xry111@xry111.site", "date": "2023-03-06T07:56:05Z"}, "message": "LoongArch: testsuite: Disable stack protector for some tests\n\nStack protector will affect stack layout and break the expectation of\nthese tests, causing test failures if GCC is configured with\n--enable-default-ssp.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/loongarch/prolog-opt.c (dg-options): Add\n\t-fno-stack-protector.\n\t* gcc.target/loongarch/stack-check-cfa-1.c (dg-options):\n\tLikewise.\n\t* gcc.target/loongarch/stack-check-cfa-2.c (dg-options):\n\tLikewise.", "tree": {"sha": "0aa3b74d2620b0728c0f88bac3df28006efbf7ae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0aa3b74d2620b0728c0f88bac3df28006efbf7ae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/67401d45972edb1c09918f9f7feea0ba00680ac4", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQSR0PV2MB+STX3t3OisqtIOGecQ4wUCZAWclQAKCRCsqtIOGecQ\n48MWAQD6/XTUa1+EqFmbTb2gaS4dOo7Uy6FtUNo4gLZLER4UmgD/UbxMftxYnJH4\nnaKpw/TOt7M7LXl2hcIMtRWuTLp1Agk=\n=Sl8r\n-----END PGP SIGNATURE-----", "payload": "tree 0aa3b74d2620b0728c0f88bac3df28006efbf7ae\nparent 75eccddef5784bc5e262af31f535267a9c4e993e\nauthor Xi Ruoyao <xry111@xry111.site> 1677832361 +0800\ncommitter Xi Ruoyao <xry111@xry111.site> 1678089365 +0800\n\nLoongArch: testsuite: Disable stack protector for some tests\n\nStack protector will affect stack layout and break the expectation of\nthese tests, causing test failures if GCC is configured with\n--enable-default-ssp.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.target/loongarch/prolog-opt.c (dg-options): Add\n\t-fno-stack-protector.\n\t* gcc.target/loongarch/stack-check-cfa-1.c (dg-options):\n\tLikewise.\n\t* gcc.target/loongarch/stack-check-cfa-2.c (dg-options):\n\tLikewise.\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67401d45972edb1c09918f9f7feea0ba00680ac4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/67401d45972edb1c09918f9f7feea0ba00680ac4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/67401d45972edb1c09918f9f7feea0ba00680ac4/comments", "author": {"login": "xry111", "id": 8733039, "node_id": "MDQ6VXNlcjg3MzMwMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8733039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xry111", "html_url": "https://github.com/xry111", "followers_url": "https://api.github.com/users/xry111/followers", "following_url": "https://api.github.com/users/xry111/following{/other_user}", "gists_url": "https://api.github.com/users/xry111/gists{/gist_id}", "starred_url": "https://api.github.com/users/xry111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xry111/subscriptions", "organizations_url": "https://api.github.com/users/xry111/orgs", "repos_url": "https://api.github.com/users/xry111/repos", "events_url": "https://api.github.com/users/xry111/events{/privacy}", "received_events_url": "https://api.github.com/users/xry111/received_events", "type": "User", "site_admin": false}, "committer": {"login": "xry111", "id": 8733039, "node_id": "MDQ6VXNlcjg3MzMwMzk=", "avatar_url": "https://avatars.githubusercontent.com/u/8733039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/xry111", "html_url": "https://github.com/xry111", "followers_url": "https://api.github.com/users/xry111/followers", "following_url": "https://api.github.com/users/xry111/following{/other_user}", "gists_url": "https://api.github.com/users/xry111/gists{/gist_id}", "starred_url": "https://api.github.com/users/xry111/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/xry111/subscriptions", "organizations_url": "https://api.github.com/users/xry111/orgs", "repos_url": "https://api.github.com/users/xry111/repos", "events_url": "https://api.github.com/users/xry111/events{/privacy}", "received_events_url": "https://api.github.com/users/xry111/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "75eccddef5784bc5e262af31f535267a9c4e993e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75eccddef5784bc5e262af31f535267a9c4e993e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75eccddef5784bc5e262af31f535267a9c4e993e"}], "stats": {"total": 6, "additions": 3, "deletions": 3}, "files": [{"sha": "e6a642633842182c137fa1c6a7ff65bd49f9b54c", "filename": "gcc/testsuite/gcc.target/loongarch/prolog-opt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67401d45972edb1c09918f9f7feea0ba00680ac4/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fprolog-opt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67401d45972edb1c09918f9f7feea0ba00680ac4/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fprolog-opt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fprolog-opt.c?ref=67401d45972edb1c09918f9f7feea0ba00680ac4", "patch": "@@ -1,7 +1,7 @@\n /* Test that LoongArch backend stack drop operation optimized.  */\n \n /* { dg-do compile } */\n-/* { dg-options \"-O2 -mabi=lp64d\" } */\n+/* { dg-options \"-O2 -mabi=lp64d -fno-stack-protector\" } */\n /* { dg-final { scan-assembler \"addi.d\\t\\\\\\$r3,\\\\\\$r3,-16\" } } */\n \n extern int printf (char *, ...);"}, {"sha": "3533fe7b685dbaa8e13d7575e02d7b864e0886ed", "filename": "gcc/testsuite/gcc.target/loongarch/stack-check-cfa-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67401d45972edb1c09918f9f7feea0ba00680ac4/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fstack-check-cfa-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67401d45972edb1c09918f9f7feea0ba00680ac4/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fstack-check-cfa-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fstack-check-cfa-1.c?ref=67401d45972edb1c09918f9f7feea0ba00680ac4", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -fstack-clash-protection --param stack-clash-protection-guard-size=16 -funwind-tables\" } */\n+/* { dg-options \"-O2 -fstack-clash-protection --param stack-clash-protection-guard-size=16 -funwind-tables -fno-stack-protector\" } */\n /* { dg-require-effective-target supports_stack_clash_protection } */\n /* { dg-skip-if \"\" { *-*-* } { \"-fstack-check\" } { \"\" } } */\n "}, {"sha": "e5e711105ac19537d9f21624d34bef80926e9a30", "filename": "gcc/testsuite/gcc.target/loongarch/stack-check-cfa-2.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/67401d45972edb1c09918f9f7feea0ba00680ac4/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fstack-check-cfa-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/67401d45972edb1c09918f9f7feea0ba00680ac4/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fstack-check-cfa-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Floongarch%2Fstack-check-cfa-2.c?ref=67401d45972edb1c09918f9f7feea0ba00680ac4", "patch": "@@ -1,5 +1,5 @@\n /* { dg-do compile } */\n-/* { dg-options \"-O2 -fstack-clash-protection --param stack-clash-protection-guard-size=16 -funwind-tables\" } */\n+/* { dg-options \"-O2 -fstack-clash-protection --param stack-clash-protection-guard-size=16 -funwind-tables -fno-stack-protector\" } */\n /* { dg-require-effective-target supports_stack_clash_protection } */\n /* { dg-skip-if \"\" { *-*-* } { \"-fstack-check\" } { \"\" } } */\n "}]}