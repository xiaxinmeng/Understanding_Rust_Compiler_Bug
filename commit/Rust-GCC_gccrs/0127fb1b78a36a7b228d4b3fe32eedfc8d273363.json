{"sha": "0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "node_id": "C_kwDOANBUbNoAKDAxMjdmYjFiNzhhMzZhN2IyMjhkNGIzZmUzMmVlZGZjOGQyNzMzNjM", "commit": {"author": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-03-28T15:55:49Z"}, "committer": {"name": "Tom de Vries", "email": "tdevries@suse.de", "date": "2022-03-28T16:38:57Z"}, "message": "[nvptx] Improve help description of misa and mptx\n\nCurrently we have:\n...\n$ gcc --target-help 2>&1 | egrep \"misa|mptx\"\n  -misa=                      Specify the version of the ptx ISA to use.\n  -mptx=                      Specify the version of the ptx version to use.\n  Known PTX ISA versions (for use with the -misa= option):\n  Known PTX versions (for use with the -mptx= option):\n...\n\nAs reported in PR104818, the \"version of the ptx version\" doesn't make much\nsense.\n\nFurthermore, the description of misa (and 'Known ISA versions') is misleading\nbecause it does not specify the version of the PTX ISA, but rather the PTX ISA\ntarget architecture.\n\nFix this by printing instead:\n...\n$ gcc --target-help 2>&1 | egrep \"misa|mptx\"\n  -misa=                      Specify the PTX ISA target architecture to use.\n  -mptx=                      Specify the PTX ISA version to use.\n  Known PTX ISA target architectures (for use with the -misa= option):\n  Known PTX ISA versions (for use with the -mptx= option):\n...\n\nTested on nvptx.\n\ngcc/ChangeLog:\n\n2022-03-28  Tom de Vries  <tdevries@suse.de>\n\n\tPR target/104818\n\t* config/nvptx/gen-opt.sh (ptx_isa): Improve help text.\n\t* config/nvptx/nvptx-gen.opt: Regenerate.\n\t* config/nvptx/nvptx.opt (misa, mptx, ptx_version): Improve help text.\n\t* config/nvptx/t-nvptx (s-nvptx-gen-opt): Add missing dependency on\n\tgen-opt.sh.", "tree": {"sha": "5742e08a5d26aa32d0a648283b41eb58acb212d4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5742e08a5d26aa32d0a648283b41eb58acb212d4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/comments", "author": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "committer": {"login": "vries", "id": 4057235, "node_id": "MDQ6VXNlcjQwNTcyMzU=", "avatar_url": "https://avatars.githubusercontent.com/u/4057235?v=4", "gravatar_id": "", "url": "https://api.github.com/users/vries", "html_url": "https://github.com/vries", "followers_url": "https://api.github.com/users/vries/followers", "following_url": "https://api.github.com/users/vries/following{/other_user}", "gists_url": "https://api.github.com/users/vries/gists{/gist_id}", "starred_url": "https://api.github.com/users/vries/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/vries/subscriptions", "organizations_url": "https://api.github.com/users/vries/orgs", "repos_url": "https://api.github.com/users/vries/repos", "events_url": "https://api.github.com/users/vries/events{/privacy}", "received_events_url": "https://api.github.com/users/vries/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "fc50d9a252c89c1bac78192bd0884ff23f2bf48b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fc50d9a252c89c1bac78192bd0884ff23f2bf48b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fc50d9a252c89c1bac78192bd0884ff23f2bf48b"}], "stats": {"total": 13, "additions": 7, "deletions": 6}, "files": [{"sha": "ba048891a49993ee5042816c5fd5e155541b882e", "filename": "gcc/config/nvptx/gen-opt.sh", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Fgen-opt.sh", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Fgen-opt.sh", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fgen-opt.sh?ref=0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "patch": "@@ -44,7 +44,7 @@ echo\n cat <<EOF\n Enum\n Name(ptx_isa) Type(int)\n-Known PTX ISA versions (for use with the -misa= option):\n+Known PTX ISA target architectures (for use with the -misa= option):\n EOF\n \n # Separator."}, {"sha": "0f5889ecfab09a1b9475ede15be95e8d44e6f543", "filename": "gcc/config/nvptx/nvptx-gen.opt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Fnvptx-gen.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Fnvptx-gen.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx-gen.opt?ref=0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "patch": "@@ -21,7 +21,7 @@\n \n Enum\n Name(ptx_isa) Type(int)\n-Known PTX ISA versions (for use with the -misa= option):\n+Known PTX ISA target architectures (for use with the -misa= option):\n \n EnumValue\n Enum(ptx_isa) String(sm_30) Value(PTX_ISA_SM30)"}, {"sha": "1f684ed88608a14d6fdf60e7ac9104203f9754df", "filename": "gcc/config/nvptx/nvptx.opt", "status": "modified", "additions": 3, "deletions": 3, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Fnvptx.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Fnvptx.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Fnvptx.opt?ref=0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "patch": "@@ -54,11 +54,11 @@ Generate code for OpenMP offloading: enables -msoft-stack and -muniform-simt.\n ; Default needs to be in sync with default in ASM_SPEC in nvptx.h.\n misa=\n Target RejectNegative ToLower Joined Enum(ptx_isa) Var(ptx_isa_option) Init(PTX_ISA_SM30)\n-Specify the version of the ptx ISA to use.\n+Specify the PTX ISA target architecture to use.\n \n Enum\n Name(ptx_version) Type(int)\n-Known PTX versions (for use with the -mptx= option):\n+Known PTX ISA versions (for use with the -mptx= option):\n \n EnumValue\n Enum(ptx_version) String(3.1) Value(PTX_VERSION_3_1)\n@@ -77,7 +77,7 @@ Enum(ptx_version) String(_) Value(PTX_VERSION_default)\n \n mptx=\n Target RejectNegative ToLower Joined Enum(ptx_version) Var(ptx_version_option)\n-Specify the version of the ptx version to use.\n+Specify the PTX ISA version to use.\n \n minit-regs=\n Target Var(nvptx_init_regs) IntegerRange(0, 3) Joined UInteger Init(3)"}, {"sha": "2b68149ed7e68d0fad7b0de559ea116de559a475", "filename": "gcc/config/nvptx/t-nvptx", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Ft-nvptx", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0127fb1b78a36a7b228d4b3fe32eedfc8d273363/gcc%2Fconfig%2Fnvptx%2Ft-nvptx", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fnvptx%2Ft-nvptx?ref=0127fb1b78a36a7b228d4b3fe32eedfc8d273363", "patch": "@@ -23,7 +23,8 @@ s-nvptx-gen-h: $(srcdir)/config/nvptx/nvptx-sm.def\n \t$(STAMP) s-nvptx-gen-h\n \n $(srcdir)/config/nvptx/nvptx-gen.opt: s-nvptx-gen-opt; @true\n-s-nvptx-gen-opt: $(srcdir)/config/nvptx/nvptx-sm.def\n+s-nvptx-gen-opt: $(srcdir)/config/nvptx/nvptx-sm.def \\\n+  $(srcdir)/config/nvptx/gen-opt.sh\n \t$(SHELL) $(srcdir)/config/nvptx/gen-opt.sh \"$(srcdir)/config/nvptx\" \\\n \t  > tmp-nvptx-gen.opt\n \t$(SHELL) $(srcdir)/../move-if-change \\"}]}