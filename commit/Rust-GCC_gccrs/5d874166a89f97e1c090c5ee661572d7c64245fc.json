{"sha": "5d874166a89f97e1c090c5ee661572d7c64245fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQ4NzQxNjZhODlmOTdlMWMwOTBjNWVlNjYxNTcyZDdjNjQyNDVmYw==", "commit": {"author": {"name": "Tobias Schl\u00fcter", "email": "tobias.schlueter@physik.uni-muenchen.de", "date": "2004-10-07T15:12:06Z"}, "committer": {"name": "Tobias Schl\u00fcter", "email": "tobi@gcc.gnu.org", "date": "2004-10-07T15:12:06Z"}, "message": "primary.c (match_boz_constant): Allow kind parameter suffixes.\n\nfortran/\n* primary.c (match_boz_constant): Allow kind parameter suffixes.\nMove standard warning further to the front.\n\ntestsuite/\n* gfortran.fortran-torture/execute/intrinsic_mvbits.f90,\ngfortran.dg/ishft.f90: Add more tests.\n\nFrom-SVN: r88690", "tree": {"sha": "574bfaa034b15098befcc64f0fa9d316cfc1f980", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/574bfaa034b15098befcc64f0fa9d316cfc1f980"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d874166a89f97e1c090c5ee661572d7c64245fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d874166a89f97e1c090c5ee661572d7c64245fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d874166a89f97e1c090c5ee661572d7c64245fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d874166a89f97e1c090c5ee661572d7c64245fc/comments", "author": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "committer": {"login": "TobiSchluter", "id": 11887541, "node_id": "MDQ6VXNlcjExODg3NTQx", "avatar_url": "https://avatars.githubusercontent.com/u/11887541?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TobiSchluter", "html_url": "https://github.com/TobiSchluter", "followers_url": "https://api.github.com/users/TobiSchluter/followers", "following_url": "https://api.github.com/users/TobiSchluter/following{/other_user}", "gists_url": "https://api.github.com/users/TobiSchluter/gists{/gist_id}", "starred_url": "https://api.github.com/users/TobiSchluter/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TobiSchluter/subscriptions", "organizations_url": "https://api.github.com/users/TobiSchluter/orgs", "repos_url": "https://api.github.com/users/TobiSchluter/repos", "events_url": "https://api.github.com/users/TobiSchluter/events{/privacy}", "received_events_url": "https://api.github.com/users/TobiSchluter/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "14de86fa0a7305603e08f42e6fa5ba4dbd2c2c7d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14de86fa0a7305603e08f42e6fa5ba4dbd2c2c7d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14de86fa0a7305603e08f42e6fa5ba4dbd2c2c7d"}], "stats": {"total": 68, "additions": 52, "deletions": 16}, "files": [{"sha": "60cae9b3bc245100202764a265d24a063c5fb66a", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=5d874166a89f97e1c090c5ee661572d7c64245fc", "patch": "@@ -1,3 +1,8 @@\n+2004-10-07  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* primary.c (match_boz_constant): Allow kind parameter suffixes.\n+\tMove standard warning further to the front.\n+\n 2004-10-07  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* trans-stmt.c: Fix a comment typo."}, {"sha": "fe6645de21e7e775d5be4765ef8fa1ec5f533134", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 21, "deletions": 15, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=5d874166a89f97e1c090c5ee661572d7c64245fc", "patch": "@@ -235,7 +235,7 @@ match_integer_constant (gfc_expr ** result, int signflag)\n static match\n match_boz_constant (gfc_expr ** result)\n {\n-  int radix, delim, length, x_hex;\n+  int radix, delim, length, x_hex, kind;\n   locus old_loc;\n   char *buffer;\n   gfc_expr *e;\n@@ -272,6 +272,12 @@ match_boz_constant (gfc_expr ** result)\n   if (delim != '\\'' && delim != '\\\"')\n     goto backup;\n \n+  if (x_hex && pedantic\n+      && (gfc_notify_std (GFC_STD_GNU, \"Extension: Hexadecimal \"\n+\t\t\t  \"constant at %C uses non-standard syntax.\")\n+\t  == FAILURE))\n+      return MATCH_ERROR;\n+\n   old_loc = gfc_current_locus;\n \n   length = match_digits (0, radix, NULL);\n@@ -293,25 +299,25 @@ match_boz_constant (gfc_expr ** result)\n   memset (buffer, '\\0', length + 1);\n \n   match_digits (0, radix, buffer);\n-  gfc_next_char ();\n+  gfc_next_char ();  /* Eat delimiter.  */\n+\n+  kind = get_kind ();\n+  if (kind == -1)\n+    return MATCH_ERROR;\n+  if (kind == -2)\n+    kind = gfc_default_integer_kind;\n+  else if (pedantic \n+\t   && (gfc_notify_std (GFC_STD_GNU, \"Extension: Kind parameter \"\n+\t\t\t       \"suffix to boz literal constant at %C.\")\n+\t       == FAILURE))\n+    return MATCH_ERROR;\n \n-  e = gfc_convert_integer (buffer, gfc_default_integer_kind, radix,\n-\t\t\t   &gfc_current_locus);\n+  e = gfc_convert_integer (buffer, kind, radix, &gfc_current_locus);\n \n   if (gfc_range_check (e) != ARITH_OK)\n     {\n-      gfc_error (\"Integer too big for default integer kind at %C\");\n-\n-      gfc_free_expr (e);\n-      return MATCH_ERROR;\n-    }\n+      gfc_error (\"Integer too big for integer kind %i at %C\", kind);\n \n-  if (x_hex\n-      && pedantic\n-      && (gfc_notify_std (GFC_STD_GNU, \"Extension: Hexadecimal \"\n-\t\t\t  \"constant at %C uses non-standard syntax.\")\n-\t  == FAILURE))\n-    {\n       gfc_free_expr (e);\n       return MATCH_ERROR;\n     }"}, {"sha": "9cb3d144913f78b034d8cb47c94b7931291f2bf8", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5d874166a89f97e1c090c5ee661572d7c64245fc", "patch": "@@ -1,3 +1,8 @@\n+2004-10-07  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n+\n+\t* gfortran.fortran-torture/execute/intrinsic_mvbits.f90, \n+\tgfortran.dg/ishft.f90: Add more tests.\n+\n 2004-10-07  Andrew Pinski  <pinskia@physics.uc.edu>\n \n \t* g++.dg/ext/asm6.C: Remove extraneous semicolon."}, {"sha": "f7800bd08b800dc99bc0c44c261695bb737759ca", "filename": "gcc/testsuite/gfortran.dg/ishft.f90", "status": "modified", "additions": 16, "deletions": 1, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ftestsuite%2Fgfortran.dg%2Fishft.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ftestsuite%2Fgfortran.dg%2Fishft.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fishft.f90?ref=5d874166a89f97e1c090c5ee661572d7c64245fc", "patch": "@@ -5,7 +5,7 @@\n if (ishft (3_1, 1) /= 6) call abort\n if (ishft (-1_1, 1) /= -2) call abort\n if (ishft (-1_1, -1) /= 127) call abort\n-if (ishft (96_1, 2) /= -128_2) call abort\n+if (ishft (96_1, 2) /= -128) call abort\n \n if (ishft (1_2, 0) /= 1) call abort\n if (ishft (1_2, 1) /= 2) call abort\n@@ -21,6 +21,12 @@\n if (ishft (-1_4, -1) /= 2147483647) call abort\n if (ishft (1073741824_4 + 536870912_4, 2) /= -2147483648_8) call abort\n \n+if (ishft (1_8, 0) /= 1) call abort\n+if (ishft (1_8, 1) /= 2) call abort\n+if (ishft (3_8, 1) /= 6) call abort\n+if (ishft (-1_8, 1) /= -2) call abort\n+if (ishft (-1_8, -60) /= z'F'_8) call abort\n+\n if (ishftc (1_1, 0) /= 1) call abort\n if (ishftc (1_1, 1) /= 2) call abort\n if (ishftc (3_1, 1) /= 6) call abort\n@@ -41,4 +47,13 @@\n if (ishftc (-1_4, 1) /= -1) call abort\n if (ishftc (-1_4, -1) /= -1) call abort\n if (ishftc (ishftc (1325876_4, 2), -2) /= 1325876) call abort\n+\n+if (ishftc (1_8, 0) /= 1) call abort\n+if (ishftc (1_8, 1) /= 2) call abort\n+if (ishftc (3_8, 1) /= 6) call abort\n+if (ishftc (-1_8, 1) /= -1) call abort\n+if (ishftc (-1_8, -1) /= -1) call abort\n+if (ishftc (ishftc (1325876_8, 2), -2) /= 1325876) call abort\n end\n+\n+"}, {"sha": "086589a1d513721ad6e7a257eb89eb86da3239e4", "filename": "gcc/testsuite/gfortran.fortran-torture/execute/intrinsic_mvbits.f90", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_mvbits.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d874166a89f97e1c090c5ee661572d7c64245fc/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_mvbits.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.fortran-torture%2Fexecute%2Fintrinsic_mvbits.f90?ref=5d874166a89f97e1c090c5ee661572d7c64245fc", "patch": "@@ -1,10 +1,15 @@\n ! Test the MVBITS intrinsic subroutine\n INTEGER*4 :: from, to, result\n+integer*8 :: to8\n \n DATA from / z'0003FFFC' /\n DATA to / z'77760000' /\n DATA result / z'7777FFFE' /\n \n CALL mvbits(from, 2, 16, to, 1)\n if (to /= result) CALL abort()\n+\n+to8 = 0\n+call mvbits (b'1011'_8*2_8**32, 33, 3, to8, 2)\n+if (to8 /= b'10100'_8) call abort\n end"}]}