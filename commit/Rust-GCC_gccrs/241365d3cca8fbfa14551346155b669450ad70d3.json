{"sha": "241365d3cca8fbfa14551346155b669450ad70d3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjQxMzY1ZDNjY2E4ZmJmYTE0NTUxMzQ2MTU1YjY2OTQ1MGFkNzBkMw==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-02-03T00:40:12Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1997-02-03T00:40:12Z"}, "message": "(init_check_module_version): Replace call to abort function with call\nto objc_error function.\n\nFrom-SVN: r13588", "tree": {"sha": "8280a6358468e7b4f6f13dcd330037a1e70b0357", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8280a6358468e7b4f6f13dcd330037a1e70b0357"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/241365d3cca8fbfa14551346155b669450ad70d3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/241365d3cca8fbfa14551346155b669450ad70d3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/241365d3cca8fbfa14551346155b669450ad70d3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/241365d3cca8fbfa14551346155b669450ad70d3/comments", "author": null, "committer": null, "parents": [{"sha": "b2948281c3d8e4221b1fab6d11db272bf735276a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2948281c3d8e4221b1fab6d11db272bf735276a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2948281c3d8e4221b1fab6d11db272bf735276a"}], "stats": {"total": 25, "additions": 13, "deletions": 12}, "files": [{"sha": "051888193d988f63768ad0c19e2aa714a3a36b6e", "filename": "gcc/objc/init.c", "status": "modified", "additions": 13, "deletions": 12, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/241365d3cca8fbfa14551346155b669450ad70d3/gcc%2Fobjc%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/241365d3cca8fbfa14551346155b669450ad70d3/gcc%2Fobjc%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Finit.c?ref=241365d3cca8fbfa14551346155b669450ad70d3", "patch": "@@ -1,5 +1,5 @@\n /* GNU Objective C Runtime initialization \n-   Copyright (C) 1993, 1995, 1996 Free Software Foundation, Inc.\n+   Copyright (C) 1993, 1995, 1996, 1997 Free Software Foundation, Inc.\n    Contributed by Kresten Krab Thorup\n \n This file is part of GNU CC.\n@@ -314,15 +314,17 @@ static void init_check_module_version(Module_t module)\n {\n   if ((module->version != OBJC_VERSION) || (module->size != sizeof (Module)))\n     {\n-      fprintf (stderr, \"Module %s version %d doesn't match runtime %d\\n\",\n-\t       module->name, (int)module->version, OBJC_VERSION);\n+      int code;\n+\n       if(module->version > OBJC_VERSION)\n-\tfprintf (stderr, \"Runtime (libobjc.a) is out of date\\n\");\n+\tcode = OBJC_ERR_OBJC_VERSION;\n       else if (module->version < OBJC_VERSION)\n-\tfprintf (stderr, \"Compiler (gcc) is out of date\\n\");\n+\tcode = OBJC_ERR_GCC_VERSION;\n       else\n-\tfprintf (stderr, \"Objective C internal error -- bad Module size\\n\");\n-      abort ();\n+\tcode = OBJC_ERR_MODULE_SIZE;\n+\n+      objc_error(nil, code, \"Module %s version %d doesn't match runtime %d\\n\",\n+\t       module->name, (int)module->version, OBJC_VERSION);\n     }\n }\n \n@@ -364,11 +366,10 @@ __objc_init_protocols (struct objc_protocol_list* protos)\n \t}\n       else if (protos->list[i]->class_pointer != proto_class)\n \t{\n-\t  fprintf (stderr,\n-\t\t   \"Version %d doesn't match runtime protocol version %d\\n\",\n-\t\t   (int)((char*)protos->list[i]->class_pointer-(char*)0),\n-\t\t   PROTOCOL_VERSION);\n-\t  abort ();\n+\t  objc_error(nil, OBJC_ERR_PROTOCOL_VERSION,\n+\t\t     \"Version %d doesn't match runtime protocol version %d\\n\",\n+\t\t     (int)((char*)protos->list[i]->class_pointer-(char*)0),\n+\t\t     PROTOCOL_VERSION);\n \t}\n     }\n "}]}