{"sha": "3215d4f5b3d08e0087a88df9e155c779927ace1a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzIxNWQ0ZjViM2QwOGUwMDg3YTg4ZGY5ZTE1NWM3Nzk5MjdhY2UxYQ==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-04-30T19:32:05Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2021-04-30T20:58:45Z"}, "message": "libstdc++: Fix inconsistent feature test macros\n\nThe __cpp_lib_constexpr_string and __cpp_lib_semaphore feature test\nmacros are not defined consistently in <version> and the relevant header\nfor the feature.\n\nlibstdc++-v3/ChangeLog:\n\n\t* include/bits/basic_string.h (__cpp_lib_constexpr_string):\n\tOnly define for C++17 and later.\n\t* include/std/version (__cpp_lib_semaphore): Fix condition\n\tto match the one in <semaphore>.", "tree": {"sha": "cbf96b8c32112a8632eaa5549db68215d40c4c93", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbf96b8c32112a8632eaa5549db68215d40c4c93"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3215d4f5b3d08e0087a88df9e155c779927ace1a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3215d4f5b3d08e0087a88df9e155c779927ace1a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3215d4f5b3d08e0087a88df9e155c779927ace1a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3215d4f5b3d08e0087a88df9e155c779927ace1a/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "7ddcd26ebb60a8a4b57330442631115cabb6ec22", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ddcd26ebb60a8a4b57330442631115cabb6ec22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ddcd26ebb60a8a4b57330442631115cabb6ec22"}], "stats": {"total": 4, "additions": 2, "deletions": 2}, "files": [{"sha": "fba7c6f335418790faec2d31488292ebb98ef53b", "filename": "libstdc++-v3/include/bits/basic_string.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3215d4f5b3d08e0087a88df9e155c779927ace1a/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3215d4f5b3d08e0087a88df9e155c779927ace1a/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.h?ref=3215d4f5b3d08e0087a88df9e155c779927ace1a", "patch": "@@ -55,7 +55,7 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n #if __cplusplus == 201703L\n // Support P0426R1 changes to char_traits in C++17.\n # define __cpp_lib_constexpr_string 201611L\n-#else\n+#elif __cplusplus > 201703L\n // Also support P1032R1 in C++20 (but not P0980R1 yet).\n # define __cpp_lib_constexpr_string 201811L\n #endif"}, {"sha": "ea0e18a3f9dcff43a7d0e65e7584d003dbe777f9", "filename": "libstdc++-v3/include/std/version", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3215d4f5b3d08e0087a88df9e155c779927ace1a/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fversion", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3215d4f5b3d08e0087a88df9e155c779927ace1a/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fversion", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fstd%2Fversion?ref=3215d4f5b3d08e0087a88df9e155c779927ace1a", "patch": "@@ -241,7 +241,7 @@\n #if __cpp_lib_concepts\n # define __cpp_lib_ranges 201911L\n #endif\n-#if __cpp_lib_atomic_wait\n+#if __cpp_lib_atomic_wait || _GLIBCXX_HAVE_POSIX_SEMAPHORE\n # define __cpp_lib_semaphore 201907L\n #endif\n #define __cpp_lib_shift 201806L"}]}