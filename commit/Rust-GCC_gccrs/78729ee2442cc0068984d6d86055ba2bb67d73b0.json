{"sha": "78729ee2442cc0068984d6d86055ba2bb67d73b0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzg3MjllZTI0NDJjYzAwNjg5ODRkNmQ4NjA1NWJhMmJiNjdkNzNiMA==", "commit": {"author": {"name": "Andreas Tobler", "email": "a.tobler@schweiz.org", "date": "2009-08-05T16:11:54Z"}, "committer": {"name": "Andreas Tobler", "email": "andreast@gcc.gnu.org", "date": "2009-08-05T16:11:54Z"}, "message": "fortran.exp: Add flags in case of shared only build.\n\n2009-08-05  Andreas Tobler  <a.tobler@schweiz.org>\n\n\t* testsuite/libgomp.fortran/fortran.exp: Add flags in case of shared\n\tonly build.\n\nFrom-SVN: r150495", "tree": {"sha": "63b2a7698adb06980c9000aea9aaa13063eba330", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63b2a7698adb06980c9000aea9aaa13063eba330"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/78729ee2442cc0068984d6d86055ba2bb67d73b0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78729ee2442cc0068984d6d86055ba2bb67d73b0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78729ee2442cc0068984d6d86055ba2bb67d73b0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78729ee2442cc0068984d6d86055ba2bb67d73b0/comments", "author": null, "committer": null, "parents": [{"sha": "fd1e840d81c4d581d118ef1890e682fb90a4a72b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fd1e840d81c4d581d118ef1890e682fb90a4a72b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fd1e840d81c4d581d118ef1890e682fb90a4a72b"}], "stats": {"total": 16, "additions": 15, "deletions": 1}, "files": [{"sha": "4f0e5c596d37beee0eca3e737021133c29b3183b", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78729ee2442cc0068984d6d86055ba2bb67d73b0/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78729ee2442cc0068984d6d86055ba2bb67d73b0/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=78729ee2442cc0068984d6d86055ba2bb67d73b0", "patch": "@@ -1,3 +1,8 @@\n+2009-08-05  Andreas Tobler  <a.tobler@schweiz.org>\n+\n+\t* testsuite/libgomp.fortran/fortran.exp: Add flags in case of shared\n+\tonly build.\n+\n 2009-08-04  David Daney  <ddaney@caviumnetworks.com>\n \n \t* config/linux/mutex.h (gomp_mutex_unlock): Add comment about"}, {"sha": "acbfe49e5e31c464e3365de16e04a94d4ecea936", "filename": "libgomp/testsuite/libgomp.fortran/fortran.exp", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/78729ee2442cc0068984d6d86055ba2bb67d73b0/libgomp%2Ftestsuite%2Flibgomp.fortran%2Ffortran.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/78729ee2442cc0068984d6d86055ba2bb67d73b0/libgomp%2Ftestsuite%2Flibgomp.fortran%2Ffortran.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Ftestsuite%2Flibgomp.fortran%2Ffortran.exp?ref=78729ee2442cc0068984d6d86055ba2bb67d73b0", "patch": "@@ -1,16 +1,25 @@\n+load_lib libgomp-dg.exp\n+\n+global shlib_ext\n+\n+set shlib_ext [get_shlib_extension]\n set lang_library_path\t\"../libgfortran/.libs\"\n set lang_link_flags\t\"-lgfortran\"\n set lang_test_file_found 0\n \n-load_lib libgomp-dg.exp\n \n # Initialize dg.\n dg-init\n \n if { $blddir != \"\" } {\n+    # Look for a static libgfortran first.\n     if [file exists \"${blddir}/${lang_library_path}/libgfortran.a\"] {\n         set lang_test_file \"${lang_library_path}/libgfortran.a\"\n         set lang_test_file_found 1\n+\t# We may have a shared only build, so look for a shared libgfortran.\n+    } elseif [file exists \"${blddir}/${lang_library_path}/libgfortran.${shlib_ext}\"] {\n+        set lang_test_file \"${lang_library_path}/libgfortran.${shlib_ext}\"\n+        set lang_test_file_found 1\n     } else {\n         puts \"No libgfortran library found, will not execute fortran tests\"\n     }"}]}