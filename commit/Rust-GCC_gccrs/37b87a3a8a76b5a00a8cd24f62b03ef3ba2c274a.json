{"sha": "37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdiODdhM2E4YTc2YjVhMDBhOGNkMjRmNjJiMDNlZjNiYTJjMjc0YQ==", "commit": {"author": {"name": "Janis Johnson", "email": "janis187@us.ibm.com", "date": "2008-01-17T03:21:36Z"}, "committer": {"name": "Peter Bergner", "email": "bergner@gcc.gnu.org", "date": "2008-01-17T03:21:36Z"}, "message": "re PR rtl-optimization/33796 (valgrind error with -O2 for linux kernel code)\n\n\tPR rtl-optimization/33796\n\t* sparseset.c (sparseset_alloc): Use xcalloc rather than xmalloc.\n\nCo-Authored-By: Peter Bergner <bergner@vnet.ibm.com>\n\nFrom-SVN: r131589", "tree": {"sha": "966e88afff3c3966960437c877988df8a77b722d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/966e88afff3c3966960437c877988df8a77b722d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a/comments", "author": null, "committer": null, "parents": [{"sha": "6595ec51c4a4aee6a369bebe575e08cb41068e66", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6595ec51c4a4aee6a369bebe575e08cb41068e66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6595ec51c4a4aee6a369bebe575e08cb41068e66"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "e1e6f10a274fa814ff528995b048f483151b5fa5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a", "patch": "@@ -1,3 +1,9 @@\n+2007-01-16  Janis Johnson  <janis187@us.ibm.com>\n+\t    Peter Bergner  <bergner@vnet.ibm.com>\n+\n+\tPR rtl-optimization/33796\n+\t* sparseset.c (sparseset_alloc): Use xcalloc rather than xmalloc.\n+\n 2008-01-16  John David Anglin  <dave.anglin@nrc-cnrc.gc.ca>\n \n \tPR libgfortran/34699"}, {"sha": "c8a9a301b593d61e37dad02a96ef4810983ed184", "filename": "gcc/sparseset.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a/gcc%2Fsparseset.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a/gcc%2Fsparseset.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsparseset.c?ref=37b87a3a8a76b5a00a8cd24f62b03ef3ba2c274a", "patch": "@@ -30,7 +30,12 @@ sparseset_alloc (SPARSESET_ELT_TYPE n_elms)\n   unsigned int n_bytes = sizeof (struct sparseset_def)\n \t\t\t + ((n_elms - 1) * 2 * sizeof (SPARSESET_ELT_TYPE));\n \n-  sparseset set = (sparseset) xmalloc (n_bytes);\n+  /* We use xcalloc rather than xmalloc to silence some valgrind uninitialized\n+     read errors when accessing set->sparse[n] when \"n\" is not, and never has\n+     been, in the set.  These uninitialized reads are expected, by design and\n+     harmless.  If this turns into a performance problem due to some future\n+     additional users of sparseset, we can revisit this decision.  */\n+  sparseset set = (sparseset) xcalloc (1, n_bytes);\n   set->dense = &(set->elms[0]);\n   set->sparse = &(set->elms[n_elms]);\n   set->size = n_elms;"}]}