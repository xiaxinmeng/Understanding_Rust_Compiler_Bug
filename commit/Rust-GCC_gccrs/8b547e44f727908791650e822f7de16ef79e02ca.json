{"sha": "8b547e44f727908791650e822f7de16ef79e02ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGI1NDdlNDRmNzI3OTA4NzkxNjUwZTgyMmY3ZGUxNmVmNzllMDJjYQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2004-09-18T07:31:30Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2004-09-18T07:31:30Z"}, "message": "tree-into-ssa.c (rewrite_ssa_into_ssa): Expect ssa_name to return NULL.\n\n\t* tree-into-ssa.c (rewrite_ssa_into_ssa):  Expect ssa_name to return\n\tNULL.\n\t* tree-ssa-alias.c (init_alias_info): Likewise.\n\t* tree-ssa.c (verify_flow_sensitive_alias_info): Likewise.\n\t(verify_ssa): Likewise.\n\t* tree-ssanames.c (make_ssa_name): Clear out ssa_names arrays.\n\nFrom-SVN: r87698", "tree": {"sha": "fe05dda72592a1cc1bfa37384e18d975a9caf42f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fe05dda72592a1cc1bfa37384e18d975a9caf42f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8b547e44f727908791650e822f7de16ef79e02ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b547e44f727908791650e822f7de16ef79e02ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8b547e44f727908791650e822f7de16ef79e02ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8b547e44f727908791650e822f7de16ef79e02ca/comments", "author": null, "committer": null, "parents": [{"sha": "b8771ace10537344957eaf0351793239ba5b2ee3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b8771ace10537344957eaf0351793239ba5b2ee3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b8771ace10537344957eaf0351793239ba5b2ee3"}], "stats": {"total": 63, "additions": 40, "deletions": 23}, "files": [{"sha": "a69ec4bb8166cc76588360b4ecc7a747e1cf1fdd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8b547e44f727908791650e822f7de16ef79e02ca", "patch": "@@ -1,3 +1,12 @@\n+2004-09-18  Jan Hubicka  <jh@suse.cz>\n+\n+\t* tree-into-ssa.c (rewrite_ssa_into_ssa):  Expect ssa_name to return\n+\tNULL.\n+\t* tree-ssa-alias.c (init_alias_info): Likewise.\n+\t* tree-ssa.c (verify_flow_sensitive_alias_info): Likewise.\n+\t(verify_ssa): Likewise.\n+\t* tree-ssanames.c (make_ssa_name): Clear out ssa_names arrays.\n+\n 2004-09-18  Jan Hubicka  <jh@suse.cz>\n \n \t* i386.c (legitimize_pic_address): Fix splitting of PLUS with"}, {"sha": "e71eb4745aaae72275cee31437cf7a6c47f93ecd", "filename": "gcc/tree-into-ssa.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-into-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-into-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-into-ssa.c?ref=8b547e44f727908791650e822f7de16ef79e02ca", "patch": "@@ -1623,7 +1623,8 @@ rewrite_ssa_into_ssa (void)\n   sbitmap_free (mark_def_sites_global_data.kills);\n \n   for (i = 1; i < num_ssa_names; i++)\n-    set_current_def (ssa_name (i), NULL_TREE);\n+    if (ssa_name (i))\n+      set_current_def (ssa_name (i), NULL_TREE);\n \n   /* Insert PHI nodes at dominance frontiers of definition blocks.  */\n   insert_phi_nodes (dfs, to_rename);\n@@ -1679,7 +1680,7 @@ rewrite_ssa_into_ssa (void)\n   for (i = 1; i < num_ssa_names; i++)\n     {\n       name = ssa_name (i);\n-      if (!SSA_NAME_AUX (name))\n+      if (!name || !SSA_NAME_AUX (name))\n \tcontinue;\n \n       free (SSA_NAME_AUX (name));"}, {"sha": "ff1dd7726aada2501bddab216e3a2c034fca9ab7", "filename": "gcc/tree-ssa-alias.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-ssa-alias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-ssa-alias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-alias.c?ref=8b547e44f727908791650e822f7de16ef79e02ca", "patch": "@@ -414,7 +414,7 @@ init_alias_info (void)\n \t{\n \t  tree name = ssa_name (i);\n \n-\t  if (!POINTER_TYPE_P (TREE_TYPE (name)))\n+\t  if (!name || !POINTER_TYPE_P (TREE_TYPE (name)))\n \t    continue;\n \n \t  if (SSA_NAME_PTR_INFO (name))"}, {"sha": "2c5cf5ab160188f438997f14a37cc323c0ca3cfe", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 24, "deletions": 20, "changes": 44, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=8b547e44f727908791650e822f7de16ef79e02ca", "patch": "@@ -419,6 +419,8 @@ verify_flow_sensitive_alias_info (void)\n       struct ptr_info_def *pi;\n \n       ptr = ssa_name (i);\n+      if (!ptr)\n+\tcontinue;\n       ann = var_ann (SSA_NAME_VAR (ptr));\n       pi = SSA_NAME_PTR_INFO (ptr);\n \n@@ -466,25 +468,26 @@ verify_flow_sensitive_alias_info (void)\n \t  size_t j;\n \n \t  for (j = i + 1; j < num_ssa_names; j++)\n-\t    {\n-\t      tree ptr2 = ssa_name (j);\n-\t      struct ptr_info_def *pi2 = SSA_NAME_PTR_INFO (ptr2);\n-\n-\t      if (!TREE_VISITED (ptr2) || !POINTER_TYPE_P (TREE_TYPE (ptr2)))\n-\t\tcontinue;\n-\n-\t      if (pi2\n-\t\t  && pi2->name_mem_tag\n-\t\t  && pi2->pt_vars\n-\t\t  && bitmap_first_set_bit (pi2->pt_vars) >= 0\n-\t\t  && pi->name_mem_tag != pi2->name_mem_tag\n-\t\t  && bitmap_equal_p (pi->pt_vars, pi2->pt_vars))\n-\t\t{\n-\t\t  error (\"Two pointers with different name tags and identical points-to sets\");\n-\t\t  debug_variable (ptr2);\n-\t\t  goto err;\n-\t\t}\n-\t    }\n+\t    if (ssa_name (j))\n+\t      {\n+\t\ttree ptr2 = ssa_name (j);\n+\t\tstruct ptr_info_def *pi2 = SSA_NAME_PTR_INFO (ptr2);\n+\n+\t\tif (!TREE_VISITED (ptr2) || !POINTER_TYPE_P (TREE_TYPE (ptr2)))\n+\t\t  continue;\n+\n+\t\tif (pi2\n+\t\t    && pi2->name_mem_tag\n+\t\t    && pi2->pt_vars\n+\t\t    && bitmap_first_set_bit (pi2->pt_vars) >= 0\n+\t\t    && pi->name_mem_tag != pi2->name_mem_tag\n+\t\t    && bitmap_equal_p (pi->pt_vars, pi2->pt_vars))\n+\t\t  {\n+\t\t    error (\"Two pointers with different name tags and identical points-to sets\");\n+\t\t    debug_variable (ptr2);\n+\t\t    goto err;\n+\t\t  }\n+\t      }\n \t}\n     }\n \n@@ -524,7 +527,8 @@ verify_ssa (void)\n \n   /* Keep track of SSA names present in the IL.  */\n   for (i = 1; i < num_ssa_names; i++)\n-    TREE_VISITED (ssa_name (i)) = 0;\n+    if (ssa_name (i))\n+      TREE_VISITED (ssa_name (i)) = 0;\n \n   calculate_dominance_info (CDI_DOMINATORS);\n "}, {"sha": "cc12f28d7d47f5d7eaa8372f2536f3fa3e110c7e", "filename": "gcc/tree-ssanames.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-ssanames.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8b547e44f727908791650e822f7de16ef79e02ca/gcc%2Ftree-ssanames.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssanames.c?ref=8b547e44f727908791650e822f7de16ef79e02ca", "patch": "@@ -205,6 +205,8 @@ make_ssa_name (tree var, tree stmt)\n       memset (t, 0, tree_size (t));\n       TREE_SET_CODE (t, SSA_NAME);\n       SSA_NAME_VERSION (t) = save_version;\n+      gcc_assert (ssa_name (save_version) == NULL);\n+      VARRAY_TREE (ssa_names, save_version) = t;\n     }\n   else\n     {\n@@ -260,6 +262,7 @@ release_ssa_name (tree var)\n      defining statement.  */\n   if (! SSA_NAME_IN_FREE_LIST (var))\n     {\n+      VARRAY_TREE (ssa_names, SSA_NAME_VERSION (var)) = NULL;\n       SSA_NAME_IN_FREE_LIST (var) = 1;\n       TREE_CHAIN (var) = free_ssanames;\n       free_ssanames = var;"}]}