{"sha": "14db98d4a6349271ab34e894c9b0780cb985666b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRkYjk4ZDRhNjM0OTI3MWFiMzRlODk0YzliMDc4MGNiOTg1NjY2Yg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2010-05-21T18:45:29Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2010-05-21T18:45:29Z"}, "message": "re PR debug/44223 (segmentation fault with -g -fsched-pressure)\n\n\tPR debug/44223\n\t* haifa-sched.c (schedule_insn): When freeing INSN_REG_USE_LIST,\n\tunchain each use from the cyclic next_regno_use chain first.\n\n\t* gcc.target/i386/pr44223.c: New test.\n\nFrom-SVN: r159680", "tree": {"sha": "ecc6ff1833b54604393846a37e39a3473d3c215c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ecc6ff1833b54604393846a37e39a3473d3c215c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14db98d4a6349271ab34e894c9b0780cb985666b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14db98d4a6349271ab34e894c9b0780cb985666b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14db98d4a6349271ab34e894c9b0780cb985666b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14db98d4a6349271ab34e894c9b0780cb985666b/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d49b6e1e33707adeb972ade7cec09acc0b178d02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d49b6e1e33707adeb972ade7cec09acc0b178d02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d49b6e1e33707adeb972ade7cec09acc0b178d02"}], "stats": {"total": 53, "additions": 53, "deletions": 0}, "files": [{"sha": "dcfff779fc16c34c7cad3c0e0000a5a794018a66", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=14db98d4a6349271ab34e894c9b0780cb985666b", "patch": "@@ -1,3 +1,9 @@\n+2010-05-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/44223\n+\t* haifa-sched.c (schedule_insn): When freeing INSN_REG_USE_LIST,\n+\tunchain each use from the cyclic next_regno_use chain first.\n+\n 2010-05-21  Steven Bosscher  <steven@gcc.gnu.org>\n \n \t* real: Do not include gmp.h, mpfr.h, and mpc.h."}, {"sha": "b15fe63f34a299b9312ecab9adfc9d1499f78954", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=14db98d4a6349271ab34e894c9b0780cb985666b", "patch": "@@ -1721,6 +1721,12 @@ schedule_insn (rtx insn)\n \t/* Unknown location doesn't use any registers.  */\n \tfor (use = INSN_REG_USE_LIST (dbg); use != NULL; use = next)\n \t  {\n+\t    struct reg_use_data *prev = use;\n+\n+\t    /* Remove use from the cyclic next_regno_use chain first.  */\n+\t    while (prev->next_regno_use != use)\n+\t      prev = prev->next_regno_use;\n+\t    prev->next_regno_use = use->next_regno_use;\n \t    next = use->next_insn_use;\n \t    free (use);\n \t  }"}, {"sha": "d40fc045d2dba0d97ee29f27290ebdc429996f66", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=14db98d4a6349271ab34e894c9b0780cb985666b", "patch": "@@ -1,3 +1,8 @@\n+2010-05-21  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR debug/44223\n+\t* gcc.target/i386/pr44223.c: New test.\n+\n 2010-05-21  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* gcc.target/i386/pr25993.c: Use @function as type specifier."}, {"sha": "3b8030c1bbbef433c4bf0f92a455bb9cec2164c1", "filename": "gcc/testsuite/gcc.target/i386/pr44223.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr44223.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14db98d4a6349271ab34e894c9b0780cb985666b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr44223.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr44223.c?ref=14db98d4a6349271ab34e894c9b0780cb985666b", "patch": "@@ -0,0 +1,36 @@\n+/* PR debug/44223 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O3 -fsched-pressure -fschedule-insns -fpic -march=core2 -g\" { target fpic } } */\n+\n+struct S { unsigned int s1; int s2; };\n+struct T { int t; };\n+\n+extern void extfn (struct S *);\n+\n+static inline void\n+foo (struct S *s, unsigned char *x, int y)\n+{\n+  s->s2 = 32;\n+}\n+\n+static inline void\n+bar (struct S *s, int n, unsigned int x)\n+{\n+  unsigned int s1;\n+  int s2;\n+  s1 = s->s1;\n+  s2 = s->s2;\n+  if (n < s2)\n+    s1 = (s1 << n) | x;\n+  s->s1 = s1;\n+}\n+\n+int\n+baz (struct T *u, unsigned char *v, int w)\n+{\n+  struct S y;\n+  foo (&y, v, 7);\n+  bar (&y, 12, 0xfff);\n+  bar (&y, 2, u->t);\n+  extfn (&y);\n+}"}]}