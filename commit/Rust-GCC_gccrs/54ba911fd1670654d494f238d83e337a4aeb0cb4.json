{"sha": "54ba911fd1670654d494f238d83e337a4aeb0cb4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTRiYTkxMWZkMTY3MDY1NGQ0OTRmMjM4ZDgzZTMzN2E0YWViMGNiNA==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.ibm.com", "date": "2019-12-17T22:21:35Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2019-12-17T22:21:35Z"}, "message": "Generate PADDI to add large constants if -mcpu=future.\n\n2019-12-12  Michael Meissner  <meissner@linux.ibm.com>\n\n\t* config/rs6000/predicates.md (add_operand): Allow eI constants.\n\t* config/rs6000/rs6000.md (add<mode>3): Add alternative to\n\tgenerate PADDI for 34-bit constants if -mcpu=future.\n\nFrom-SVN: r279476", "tree": {"sha": "60425b46e8b77a06d604a9a9c4a65fa1aa50b936", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/60425b46e8b77a06d604a9a9c4a65fa1aa50b936"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/54ba911fd1670654d494f238d83e337a4aeb0cb4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54ba911fd1670654d494f238d83e337a4aeb0cb4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/54ba911fd1670654d494f238d83e337a4aeb0cb4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/54ba911fd1670654d494f238d83e337a4aeb0cb4/comments", "author": null, "committer": null, "parents": [{"sha": "ef759fd121558455cd45d15e3bcf5e66279d6251", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef759fd121558455cd45d15e3bcf5e66279d6251", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef759fd121558455cd45d15e3bcf5e66279d6251"}], "stats": {"total": 22, "additions": 14, "deletions": 8}, "files": [{"sha": "634d3f8e4b51b8739c2d77e71a4b043c2f8c79b9", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54ba911fd1670654d494f238d83e337a4aeb0cb4/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54ba911fd1670654d494f238d83e337a4aeb0cb4/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=54ba911fd1670654d494f238d83e337a4aeb0cb4", "patch": "@@ -2,10 +2,13 @@\n \n \t* config/rs6000/rs6000.c (num_insns_constant_gpr): Return 1 if the\n \tconstant can be loaded with PLI if -mcpu=future.\n-\t* config/rs6000/rs6000.md (movdi_internal64): Add alternative to\n-\tuse PLI to load up 34-bit constants if -mcpu=future.\n+\t* config/rs6000/rs6000.md (add<mode>3): Add alternative to\n+\tgenerate PADDI for 34-bit constants if -mcpu=future.\n+\t(movdi_internal64): Add alternative to use PLI to load up 34-bit\n+\tconstants if -mcpu=future.\n \t(movsi_internal1): Add alternative to use PLI to load up 32-bit\n \tconstants if -mcpu=future.\n+\t* config/rs6000/predicates.md (add_operand): Allow eI constants.\n \n 2019-12-17  Jakub Jelinek  <jakub@redhat.com>\n "}, {"sha": "718ddc45f957be566e09c8283d7a0693212739eb", "filename": "gcc/config/rs6000/predicates.md", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54ba911fd1670654d494f238d83e337a4aeb0cb4/gcc%2Fconfig%2Frs6000%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54ba911fd1670654d494f238d83e337a4aeb0cb4/gcc%2Fconfig%2Frs6000%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpredicates.md?ref=54ba911fd1670654d494f238d83e337a4aeb0cb4", "patch": "@@ -839,7 +839,8 @@\n (define_predicate \"add_operand\"\n   (if_then_else (match_code \"const_int\")\n     (match_test \"satisfies_constraint_I (op)\n-\t\t || satisfies_constraint_L (op)\")\n+\t\t || satisfies_constraint_L (op)\n+\t\t || satisfies_constraint_eI (op)\")\n     (match_operand 0 \"gpc_reg_operand\")))\n \n ;; Return 1 if the operand is either a non-special register, or 0, or -1."}, {"sha": "ed85a05826cac7b9367e03194c8a3b795410c912", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 7, "deletions": 5, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/54ba911fd1670654d494f238d83e337a4aeb0cb4/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/54ba911fd1670654d494f238d83e337a4aeb0cb4/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=54ba911fd1670654d494f238d83e337a4aeb0cb4", "patch": "@@ -1761,15 +1761,17 @@\n })\n \n (define_insn \"*add<mode>3\"\n-  [(set (match_operand:GPR 0 \"gpc_reg_operand\" \"=r,r,r\")\n-\t(plus:GPR (match_operand:GPR 1 \"gpc_reg_operand\" \"%r,b,b\")\n-\t\t  (match_operand:GPR 2 \"add_operand\" \"r,I,L\")))]\n+  [(set (match_operand:GPR 0 \"gpc_reg_operand\" \"=r,r,r,r\")\n+\t(plus:GPR (match_operand:GPR 1 \"gpc_reg_operand\" \"%r,b,b,b\")\n+\t\t  (match_operand:GPR 2 \"add_operand\" \"r,I,L,eI\")))]\n   \"\"\n   \"@\n    add %0,%1,%2\n    addi %0,%1,%2\n-   addis %0,%1,%v2\"\n-  [(set_attr \"type\" \"add\")])\n+   addis %0,%1,%v2\n+   addi %0,%1,%2\"\n+  [(set_attr \"type\" \"add\")\n+   (set_attr \"isa\" \"*,*,*,fut\")])\n \n (define_insn \"*addsi3_high\"\n   [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=b\")"}]}