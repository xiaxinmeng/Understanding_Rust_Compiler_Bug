{"sha": "a78e4fa7643f1264968e86476a2f39a2a241f202", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTc4ZTRmYTc2NDNmMTI2NDk2OGU4NjQ3NmEyZjM5YTJhMjQxZjIwMg==", "commit": {"author": {"name": "Jeff Sturm", "email": "jsturm@gcc.gnu.org", "date": "2003-11-18T03:42:30Z"}, "committer": {"name": "Jeff Sturm", "email": "jsturm@gcc.gnu.org", "date": "2003-11-18T03:42:30Z"}, "message": "re PR java/12739 (gcj emits dead bytecode)\n\nFix PR java/12739.\n* java-tree.h (BLOCK_EMPTY_P): Define.\n* parse.y (java_complete_lhs): Check for empty blocks\nin TRY_FINALLY_EXPR case.\n\nFrom-SVN: r73690", "tree": {"sha": "436e45b83f98cf7428f89e2219412eb6350203fe", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/436e45b83f98cf7428f89e2219412eb6350203fe"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a78e4fa7643f1264968e86476a2f39a2a241f202", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a78e4fa7643f1264968e86476a2f39a2a241f202", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a78e4fa7643f1264968e86476a2f39a2a241f202", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a78e4fa7643f1264968e86476a2f39a2a241f202/comments", "author": null, "committer": null, "parents": [{"sha": "e44846d6cc11782725608b7ef84b61daafe17abc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e44846d6cc11782725608b7ef84b61daafe17abc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e44846d6cc11782725608b7ef84b61daafe17abc"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "995b21a2f3d1841abaf6e87b5fd2f7fbdb6279c1", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a78e4fa7643f1264968e86476a2f39a2a241f202/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a78e4fa7643f1264968e86476a2f39a2a241f202/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=a78e4fa7643f1264968e86476a2f39a2a241f202", "patch": "@@ -1,4 +1,11 @@\n-2003-09-12  Andrew Haley  <aph@redhat.com>\n+2003-11-17  Jeff Sturm  <jsturm@one-point.com>\n+\n+\tFix PR java/12739.\n+\t* java-tree.h (BLOCK_EMPTY_P): Define.\n+\t* parse.y (java_complete_lhs): Check for empty blocks\n+\tin TRY_FINALLY_EXPR case.\n+\n+2003-11-17  Andrew Haley  <aph@redhat.com>\n \n \t* java-tree.h (LOCAL_VAR_OUT_OF_SCOPE_P): New.\n \t(struct lang_decl_var:freed): New variable. "}, {"sha": "eb0db483963217969cb28f1b58ca17b328bf7604", "filename": "gcc/java/java-tree.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a78e4fa7643f1264968e86476a2f39a2a241f202/gcc%2Fjava%2Fjava-tree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a78e4fa7643f1264968e86476a2f39a2a241f202/gcc%2Fjava%2Fjava-tree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fjava-tree.h?ref=a78e4fa7643f1264968e86476a2f39a2a241f202", "patch": "@@ -1731,6 +1731,8 @@ while (0)\n #define BLOCK_EXPR_BODY(NODE)   BLOCK_SUBBLOCKS(NODE)\n /* True for an implicit block surrounding declaration not at start of {...}. */\n #define BLOCK_IS_IMPLICIT(NODE) TREE_LANG_FLAG_1 (NODE)\n+#define BLOCK_EMPTY_P(NODE) \\\n+  (TREE_CODE (NODE) == BLOCK && BLOCK_EXPR_BODY (NODE) == empty_stmt_node)\n \n #define BUILD_MONITOR_ENTER(WHERE, ARG)\t\t\t\t\\\n   {\t\t\t\t\t\t\t\t\\"}, {"sha": "375e7ec826641ede8a14a827be43e89b459a5c86", "filename": "gcc/java/parse.y", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a78e4fa7643f1264968e86476a2f39a2a241f202/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a78e4fa7643f1264968e86476a2f39a2a241f202/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=a78e4fa7643f1264968e86476a2f39a2a241f202", "patch": "@@ -11719,9 +11719,13 @@ java_complete_lhs (tree node)\n     case TRY_FINALLY_EXPR:\n       COMPLETE_CHECK_OP_0 (node);\n       COMPLETE_CHECK_OP_1 (node);\n-      if (TREE_OPERAND (node, 0) == empty_stmt_node)\n+      /* Reduce try/finally nodes with an empty try block.  */\n+      if (TREE_OPERAND (node, 0) == empty_stmt_node\n+\t  || BLOCK_EMPTY_P (TREE_OPERAND (node, 0)))\n \treturn TREE_OPERAND (node, 1);\n-      if (TREE_OPERAND (node, 1) == empty_stmt_node)\n+      /* Likewise for an empty finally block.  */\n+      if (TREE_OPERAND (node, 1) == empty_stmt_node\n+\t  || BLOCK_EMPTY_P (TREE_OPERAND (node, 1)))\n \treturn TREE_OPERAND (node, 0);\n       CAN_COMPLETE_NORMALLY (node)\n \t= (CAN_COMPLETE_NORMALLY (TREE_OPERAND (node, 0))"}]}