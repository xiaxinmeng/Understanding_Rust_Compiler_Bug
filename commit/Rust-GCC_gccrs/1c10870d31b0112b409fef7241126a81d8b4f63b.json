{"sha": "1c10870d31b0112b409fef7241126a81d8b4f63b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWMxMDg3MGQzMWIwMTEyYjQwOWZlZjcyNDExMjZhODFkOGI0ZjYzYg==", "commit": {"author": {"name": "Alex Samuel", "email": "samuel@codesourcery.com", "date": "1999-08-30T05:22:45Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-08-30T05:22:45Z"}, "message": "pt.c (push_template_decl_real): Use template declaration from class type if it exists.\n\n\t* pt.c (push_template_decl_real): Use template declaration from\n\tclass type if it exists.\n\nFrom-SVN: r28978", "tree": {"sha": "e134c7528d6d639f5898070cba606742b39fe03c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e134c7528d6d639f5898070cba606742b39fe03c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1c10870d31b0112b409fef7241126a81d8b4f63b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c10870d31b0112b409fef7241126a81d8b4f63b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c10870d31b0112b409fef7241126a81d8b4f63b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c10870d31b0112b409fef7241126a81d8b4f63b/comments", "author": null, "committer": null, "parents": [{"sha": "0d54c3f607f3a1a74dae33f3ee537ec2546167da", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d54c3f607f3a1a74dae33f3ee537ec2546167da", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d54c3f607f3a1a74dae33f3ee537ec2546167da"}], "stats": {"total": 35, "additions": 35, "deletions": 0}, "files": [{"sha": "4a8fd5ac0c2edd5fdcdfa4f12b31cb1602a42601", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c10870d31b0112b409fef7241126a81d8b4f63b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c10870d31b0112b409fef7241126a81d8b4f63b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1c10870d31b0112b409fef7241126a81d8b4f63b", "patch": "@@ -1,3 +1,8 @@\n+1999-08-29  Alex Samuel  <samuel@codesourcery.com>\n+\n+\t* pt.c (push_template_decl_real): Use template declaration from\n+\tclass type if it exists.\n+\n 1999-08-29  Mark Mitchell  <mark@codesourcery.com>\n \n \t* cp-tree.h (TYPE_NEEDS_CONSTRUCTING): Remove #if 0'd definition."}, {"sha": "ee6f85ac4be97d46ee0a240cc3a11052ab904adb", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c10870d31b0112b409fef7241126a81d8b4f63b/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c10870d31b0112b409fef7241126a81d8b4f63b/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=1c10870d31b0112b409fef7241126a81d8b4f63b", "patch": "@@ -2461,6 +2461,22 @@ push_template_decl_real (decl, is_friend)\n \t  && DECL_TEMPLATE_INFO (decl)\n \t  && DECL_TI_TEMPLATE (decl))\n \ttmpl = DECL_TI_TEMPLATE (decl);\n+      /* If DECL is a TYPE_DECL for a class-template, then there won't\n+\t be DECL_LANG_SPECIFIC.  The information equivalent to\n+\t DECL_TEMPLATE_INFO is found in TYPE_TEMPLATE_INFO instead.  */\n+      else if (DECL_IMPLICIT_TYPEDEF_P (decl) \n+\t       && TYPE_TEMPLATE_INFO (TREE_TYPE (decl))\n+\t       && TYPE_TI_TEMPLATE (TREE_TYPE (decl)))\n+\t{\n+\t  /* Since a template declaration already existed for this\n+\t     class-type, we must be redeclaring it here.  Make sure\n+\t     that the redeclaration is legal.  */\n+\t  redeclare_class_template (TREE_TYPE (decl),\n+\t\t\t\t    current_template_parms);\n+\t  /* We don't need to create a new TEMPLATE_DECL; just use the\n+\t     one we already had.  */\n+\t  tmpl = TYPE_TI_TEMPLATE (TREE_TYPE (decl));\n+\t}\n       else\n \t{\n \t  tmpl = build_template_decl (decl, current_template_parms);"}, {"sha": "90e5312aa768eb1c9301615a6506bbe63ab9e2f6", "filename": "gcc/testsuite/g++.old-deja/g++.ns/template14.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1c10870d31b0112b409fef7241126a81d8b4f63b/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Ftemplate14.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1c10870d31b0112b409fef7241126a81d8b4f63b/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Ftemplate14.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.ns%2Ftemplate14.C?ref=1c10870d31b0112b409fef7241126a81d8b4f63b", "patch": "@@ -0,0 +1,14 @@\n+// Build don't link:\n+// Origin: Alex Samuel <samuel@codesourcery.com>\n+\n+namespace Outer \n+{\n+template <class T> class Inner;\n+}\n+\n+template <class T>\n+class Outer::Inner  \n+{\n+public:\n+  Inner ();\n+};"}]}