{"sha": "97ef5ae607b720d05e17808bbe18903c70dd6dac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTdlZjVhZTYwN2I3MjBkMDVlMTc4MDhiYmUxODkwM2M3MGRkNmRhYw==", "commit": {"author": {"name": "Changpeng Fang", "email": "changpeng.fang@amd.com", "date": "2011-06-20T21:52:32Z"}, "committer": {"name": "Changpeng Fang", "email": "cfang@gcc.gnu.org", "date": "2011-06-20T21:52:32Z"}, "message": "pr49089: enable avx256 splitting unaligned load/store only when beneficial\n\n\t* config/i386/i386.c (avx256_split_unaligned_load): New definition.\n\t(avx256_split_unaligned_store): New definition.\n\t(ix86_option_override_internal): Enable avx256 unaligned load/store\n\tsplitting only when avx256_split_unaligned_load/store is set.\n\nFrom-SVN: r175230", "tree": {"sha": "51d4870f05768ae407bb70cceb7ef3fe7a6044e4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/51d4870f05768ae407bb70cceb7ef3fe7a6044e4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/97ef5ae607b720d05e17808bbe18903c70dd6dac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ef5ae607b720d05e17808bbe18903c70dd6dac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/97ef5ae607b720d05e17808bbe18903c70dd6dac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/97ef5ae607b720d05e17808bbe18903c70dd6dac/comments", "author": {"login": "changpeng", "id": 4239661, "node_id": "MDQ6VXNlcjQyMzk2NjE=", "avatar_url": "https://avatars.githubusercontent.com/u/4239661?v=4", "gravatar_id": "", "url": "https://api.github.com/users/changpeng", "html_url": "https://github.com/changpeng", "followers_url": "https://api.github.com/users/changpeng/followers", "following_url": "https://api.github.com/users/changpeng/following{/other_user}", "gists_url": "https://api.github.com/users/changpeng/gists{/gist_id}", "starred_url": "https://api.github.com/users/changpeng/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/changpeng/subscriptions", "organizations_url": "https://api.github.com/users/changpeng/orgs", "repos_url": "https://api.github.com/users/changpeng/repos", "events_url": "https://api.github.com/users/changpeng/events{/privacy}", "received_events_url": "https://api.github.com/users/changpeng/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "fea549356d388607081f1a83ebac557259314d62", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fea549356d388607081f1a83ebac557259314d62", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fea549356d388607081f1a83ebac557259314d62"}], "stats": {"total": 20, "additions": 18, "deletions": 2}, "files": [{"sha": "361b584fb2deb6b7bbbf84d327086a962d50f48f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ef5ae607b720d05e17808bbe18903c70dd6dac/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ef5ae607b720d05e17808bbe18903c70dd6dac/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=97ef5ae607b720d05e17808bbe18903c70dd6dac", "patch": "@@ -1,3 +1,11 @@\n+2011-06-20  Changpeng Fang <changpeng.fang@amd.com>\n+\n+        PR i386/49089\n+\t* config/i386/i386.c (avx256_split_unaligned_load): New definition.\n+\t(avx256_split_unaligned_store): New definition.\n+\t(ix86_option_override_internal): Enable avx256 unaligned load/store\n+\tsplitting only when avx256_split_unaligned_load/store is set.\n+\n 2011-06-20  Bernd Schmidt  <bernds@codesourcery.com>\n \n \t* regrename.c (scan_rtx_reg): Handle the case where we write to an"}, {"sha": "014401b3651bee4e5309be6431d64c8d1678f4b7", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/97ef5ae607b720d05e17808bbe18903c70dd6dac/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/97ef5ae607b720d05e17808bbe18903c70dd6dac/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=97ef5ae607b720d05e17808bbe18903c70dd6dac", "patch": "@@ -2122,6 +2122,12 @@ static const unsigned int x86_arch_always_fancy_math_387\n   = m_PENT | m_ATOM | m_PPRO | m_AMD_MULTIPLE | m_PENT4\n     | m_NOCONA | m_CORE2I7 | m_GENERIC;\n \n+static const unsigned int x86_avx256_split_unaligned_load\n+  = m_COREI7 | m_GENERIC;\n+\n+static const unsigned int x86_avx256_split_unaligned_store\n+  = m_COREI7 | m_BDVER1 | m_GENERIC;\n+\n /* In case the average insn count for single function invocation is\n    lower than this constant, emit fast (but longer) prologue and\n    epilogue code.  */\n@@ -3660,9 +3666,11 @@ ix86_option_override_internal (bool main_args_p)\n \t  if (flag_expensive_optimizations\n \t      && !(target_flags_explicit & MASK_VZEROUPPER))\n \t    target_flags |= MASK_VZEROUPPER;\n-\t  if (!(target_flags_explicit & MASK_AVX256_SPLIT_UNALIGNED_LOAD))\n+\t  if ((x86_avx256_split_unaligned_load & ix86_tune_mask)\n+\t      && !(target_flags_explicit & MASK_AVX256_SPLIT_UNALIGNED_LOAD))\n \t    target_flags |= MASK_AVX256_SPLIT_UNALIGNED_LOAD;\n-\t  if (!(target_flags_explicit & MASK_AVX256_SPLIT_UNALIGNED_STORE))\n+\t  if ((x86_avx256_split_unaligned_store & ix86_tune_mask)\n+\t      && !(target_flags_explicit & MASK_AVX256_SPLIT_UNALIGNED_STORE))\n \t    target_flags |= MASK_AVX256_SPLIT_UNALIGNED_STORE;\n \t}\n     }"}]}