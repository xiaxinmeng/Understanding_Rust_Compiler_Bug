{"sha": "ce81282261c6c77883b17d0ebfbbe337bed76457", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2U4MTI4MjI2MWM2Yzc3ODgzYjE3ZDBlYmZiYmUzMzdiZWQ3NjQ1Nw==", "commit": {"author": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2021-05-13T20:09:58Z"}, "committer": {"name": "Aldy Hernandez", "email": "aldyh@redhat.com", "date": "2021-05-17T16:18:37Z"}, "message": "Bail in bounds_of_var_in_loop if scev returns NULL.\n\nBoth initial_condition_in_loop_num and evolution_part_in_loop_num\ncan return NULL.  This patch exits if either one is NULL.  Presumably\nthis didn't happen before, because adjust_range_with_scev was called\nfar less frequently than in ranger, which can call it for every PHI.\n\ngcc/ChangeLog:\n\n\tPR tree-optimization/100349\n\t* vr-values.c (bounds_of_var_in_loop): Bail if scev returns\n\t  NULL.\n\ngcc/testsuite/ChangeLog:\n\n\t* gcc.dg/pr100349.c: New test.", "tree": {"sha": "d53f50b5dd7ed93644b1598dec40f43bf8ddb3ac", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d53f50b5dd7ed93644b1598dec40f43bf8ddb3ac"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ce81282261c6c77883b17d0ebfbbe337bed76457", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce81282261c6c77883b17d0ebfbbe337bed76457", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce81282261c6c77883b17d0ebfbbe337bed76457", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce81282261c6c77883b17d0ebfbbe337bed76457/comments", "author": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "committer": {"login": "aldyh", "id": 12937877, "node_id": "MDQ6VXNlcjEyOTM3ODc3", "avatar_url": "https://avatars.githubusercontent.com/u/12937877?v=4", "gravatar_id": "", "url": "https://api.github.com/users/aldyh", "html_url": "https://github.com/aldyh", "followers_url": "https://api.github.com/users/aldyh/followers", "following_url": "https://api.github.com/users/aldyh/following{/other_user}", "gists_url": "https://api.github.com/users/aldyh/gists{/gist_id}", "starred_url": "https://api.github.com/users/aldyh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/aldyh/subscriptions", "organizations_url": "https://api.github.com/users/aldyh/orgs", "repos_url": "https://api.github.com/users/aldyh/repos", "events_url": "https://api.github.com/users/aldyh/events{/privacy}", "received_events_url": "https://api.github.com/users/aldyh/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "e91a17fe39c39e98cebe6e1cbc8064ee6846a3a7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e91a17fe39c39e98cebe6e1cbc8064ee6846a3a7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e91a17fe39c39e98cebe6e1cbc8064ee6846a3a7"}], "stats": {"total": 19, "additions": 19, "deletions": 0}, "files": [{"sha": "dd7977ac0f9e3ef4f93788e214e6c953a34a2f74", "filename": "gcc/testsuite/gcc.dg/pr100349.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce81282261c6c77883b17d0ebfbbe337bed76457/gcc%2Ftestsuite%2Fgcc.dg%2Fpr100349.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce81282261c6c77883b17d0ebfbbe337bed76457/gcc%2Ftestsuite%2Fgcc.dg%2Fpr100349.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fpr100349.c?ref=ce81282261c6c77883b17d0ebfbbe337bed76457", "patch": "@@ -0,0 +1,16 @@\n+// { dg-do compile }\n+// { dg-options \"-O2 -w\" }\n+\n+#include <stdint.h>\n+uint8_t a;\n+b(int8_t c) {\n+  int d;\n+e:\n+  uint32_t f;\n+  for (;;)\n+    for (c = 10; c; c++)\n+      if (0 > (a = c) ?: d) {\n+        f = a;\n+        goto e;\n+      }\n+}"}, {"sha": "b1bf53af9e0e40374d166c7ea957231e9a0785cc", "filename": "gcc/vr-values.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ce81282261c6c77883b17d0ebfbbe337bed76457/gcc%2Fvr-values.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ce81282261c6c77883b17d0ebfbbe337bed76457/gcc%2Fvr-values.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fvr-values.c?ref=ce81282261c6c77883b17d0ebfbbe337bed76457", "patch": "@@ -1650,6 +1650,9 @@ bounds_of_var_in_loop (tree *min, tree *max, range_query *query,\n   init = initial_condition_in_loop_num (chrec, loop->num);\n   step = evolution_part_in_loop_num (chrec, loop->num);\n \n+  if (!init || !step)\n+    return false;\n+\n   /* If INIT is an SSA with a singleton range, set INIT to said\n      singleton, otherwise leave INIT alone.  */\n   if (TREE_CODE (init) == SSA_NAME)"}]}