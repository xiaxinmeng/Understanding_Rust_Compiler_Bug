{"sha": "5456cefc68db903dcb308729a3d68f619c703660", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTQ1NmNlZmM2OGRiOTAzZGNiMzA4NzI5YTNkNjhmNjE5YzcwMzY2MA==", "commit": {"author": {"name": "Ulrich Weigand", "email": "uweigand@de.ibm.com", "date": "2009-11-17T16:21:56Z"}, "committer": {"name": "Ulrich Weigand", "email": "uweigand@gcc.gnu.org", "date": "2009-11-17T16:21:56Z"}, "message": "re PR tree-optimization/41857 (Loop optimizer breaks __ea pointers with -mea64)\n\n\tPR tree-optimization/41857\n\t* tree-ssa-address.c (move_hint_to_base): Use void pointer to\n\tTYPE's address space instead of pointer to TYPE.\n\nFrom-SVN: r154255", "tree": {"sha": "ec58d132d92e5296133cf29f71a6fb3fd0d19c9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ec58d132d92e5296133cf29f71a6fb3fd0d19c9c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5456cefc68db903dcb308729a3d68f619c703660", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5456cefc68db903dcb308729a3d68f619c703660", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5456cefc68db903dcb308729a3d68f619c703660", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5456cefc68db903dcb308729a3d68f619c703660/comments", "author": null, "committer": null, "parents": [{"sha": "263839d33b9fc3c1145b70c957ed733765661381", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/263839d33b9fc3c1145b70c957ed733765661381", "html_url": "https://github.com/Rust-GCC/gccrs/commit/263839d33b9fc3c1145b70c957ed733765661381"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "7ca19723e457d6758ba571f29d070e7500e60f1f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5456cefc68db903dcb308729a3d68f619c703660/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5456cefc68db903dcb308729a3d68f619c703660/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5456cefc68db903dcb308729a3d68f619c703660", "patch": "@@ -1,3 +1,9 @@\n+2009-11-17  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n+\n+\tPR tree-optimization/41857\n+\t* tree-ssa-address.c (move_hint_to_base): Use void pointer to\n+\tTYPE's address space instead of pointer to TYPE.\n+\n 2009-11-17  Ulrich Weigand  <Ulrich.Weigand@de.ibm.com>\n \n \t* reload.c (find_reloads_address): Fix typo."}, {"sha": "d96b66b1aa8e46a4651f6d4d53ccbc20fca669c5", "filename": "gcc/tree-ssa-address.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5456cefc68db903dcb308729a3d68f619c703660/gcc%2Ftree-ssa-address.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5456cefc68db903dcb308729a3d68f619c703660/gcc%2Ftree-ssa-address.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-address.c?ref=5456cefc68db903dcb308729a3d68f619c703660", "patch": "@@ -400,6 +400,7 @@ move_hint_to_base (tree type, struct mem_address *parts, tree base_hint,\n {\n   unsigned i;\n   tree val = NULL_TREE;\n+  int qual;\n \n   for (i = 0; i < addr->n; i++)\n     {\n@@ -414,7 +415,12 @@ move_hint_to_base (tree type, struct mem_address *parts, tree base_hint,\n   if (i == addr->n)\n     return;\n \n-  /* Cast value to appropriate pointer type.  */\n+  /* Cast value to appropriate pointer type.  We cannot use a pointer\n+     to TYPE directly, as the back-end will assume registers of pointer\n+     type are aligned, and just the base itself may not actually be.\n+     We use void pointer to the type's address space instead.  */\n+  qual = ENCODE_QUAL_ADDR_SPACE (TYPE_ADDR_SPACE (type));\n+  type = build_qualified_type (void_type_node, qual);\n   parts->base = fold_convert (build_pointer_type (type), val);\n   aff_combination_remove_elt (addr, i);\n }"}]}