{"sha": "978dee9ad2cb226af83831bcd1becaa1652964e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTc4ZGVlOWFkMmNiMjI2YWY4MzgzMWJjZDFiZWNhYTE2NTI5NjRlMA==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2005-11-16T23:43:39Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2005-11-16T23:43:39Z"}, "message": "re PR middle-end/23497 (Bogus 'is used uninitialized...' warning about std::complex<T>)\n\n        PR middle-end/23497\n        * tree-ssa.c (warn_uninitialized_var): Skip real and imaginary\n        parts of an SSA_NAME.\n\nFrom-SVN: r107107", "tree": {"sha": "c288491f515c50ad8125312a40e42328d819a661", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c288491f515c50ad8125312a40e42328d819a661"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/978dee9ad2cb226af83831bcd1becaa1652964e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/978dee9ad2cb226af83831bcd1becaa1652964e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/978dee9ad2cb226af83831bcd1becaa1652964e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/978dee9ad2cb226af83831bcd1becaa1652964e0/comments", "author": null, "committer": null, "parents": [{"sha": "dbb28e4b135080a823bd74f922ff48e79b52946a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbb28e4b135080a823bd74f922ff48e79b52946a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbb28e4b135080a823bd74f922ff48e79b52946a"}], "stats": {"total": 51, "additions": 47, "deletions": 4}, "files": [{"sha": "f0555b3b98286c783f540e0854dd973c8254a8b0", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=978dee9ad2cb226af83831bcd1becaa1652964e0", "patch": "@@ -1,3 +1,9 @@\n+2005-11-16  Richard Henderson  <rth@redhat.com>\n+\n+\tPR middle-end/23497\n+\t* tree-ssa.c (warn_uninitialized_var): Skip real and imaginary\n+\tparts of an SSA_NAME.\n+\n 2005-11-16  Richard Earnshaw  <richard.earnshaw@arm.com>\n \n \tPR target/24861"}, {"sha": "7889e5370e5d5dbaf1026ea6d026d91d6207b0a9", "filename": "gcc/testsuite/gcc.dg/uninit-12.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-12.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-12.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-12.c?ref=978dee9ad2cb226af83831bcd1becaa1652964e0", "patch": "@@ -0,0 +1,12 @@\n+/* PR 23497 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O -Wuninitialized\" } */\n+\n+typedef _Complex float C;\n+C foo()\n+{\n+  C f;\n+  __real__ f = 0;\n+  __imag__ f = 0;\n+  return f;\n+}"}, {"sha": "168939ab8573889b3c40eeb2c6c63080840e286a", "filename": "gcc/testsuite/gcc.dg/uninit-13.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-13.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-13.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Funinit-13.c?ref=978dee9ad2cb226af83831bcd1becaa1652964e0", "patch": "@@ -0,0 +1,10 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O -Wuninitialized\" } */\n+\n+typedef _Complex float C;\n+C foo()\n+{\n+  C f;\n+  __imag__ f = 0;\n+  return f;\t\t/* { dg-warning \"\" \"uninit\" { xfail *-*-* } } */\n+}"}, {"sha": "7b24c594a5cc6710abc58a67bfc2d335b9802d21", "filename": "gcc/tree-ssa.c", "status": "modified", "additions": 19, "deletions": 4, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2Ftree-ssa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/978dee9ad2cb226af83831bcd1becaa1652964e0/gcc%2Ftree-ssa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa.c?ref=978dee9ad2cb226af83831bcd1becaa1652964e0", "patch": "@@ -1155,14 +1155,29 @@ warn_uninitialized_var (tree *tp, int *walk_subtrees, void *data)\n {\n   tree t = *tp;\n \n-  /* We only do data flow with SSA_NAMEs, so that's all we can warn about.  */\n-  if (TREE_CODE (t) == SSA_NAME)\n+  switch (TREE_CODE (t))\n     {\n+    case SSA_NAME:\n+      /* We only do data flow with SSA_NAMEs, so that's all we\n+\t can warn about.  */\n       warn_uninit (t, \"%H%qD is used uninitialized in this function\", data);\n       *walk_subtrees = 0;\n+      break;\n+\n+    case REALPART_EXPR:\n+    case IMAGPART_EXPR:\n+      /* The total store transformation performed during gimplification\n+\t creates uninitialized variable uses.  If all is well, these will\n+\t be optimized away, so don't warn now.  */\n+      if (TREE_CODE (TREE_OPERAND (t, 0)) == SSA_NAME)\n+\t*walk_subtrees = 0;\n+      break;\n+\n+    default:\n+      if (IS_TYPE_OR_DECL_P (t))\n+\t*walk_subtrees = 0;\n+      break;\n     }\n-  else if (IS_TYPE_OR_DECL_P (t))\n-    *walk_subtrees = 0;\n \n   return NULL_TREE;\n }"}]}