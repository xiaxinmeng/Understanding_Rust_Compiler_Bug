{"sha": "1dea4fc642a9bc54214090f0a97c811d59bf6a84", "node_id": "C_kwDOANBUbNoAKDFkZWE0ZmM2NDJhOWJjNTQyMTQwOTBmMGE5N2M4MTFkNTliZjZhODQ", "commit": {"author": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2022-12-16T21:44:40Z"}, "committer": {"name": "John David Anglin", "email": "danglin@gcc.gnu.org", "date": "2022-12-16T21:44:40Z"}, "message": "Suppress -fstack-protector warning on hppa.\n\nSome package builds enable -fstack-protector and -Werror. Since\n-fstack-protector is not supported on hppa because the stack grows\nup, these packages must check for the warning generated by\n-fstack-protector and suppress it on hppa. This is problematic\nsince hppa is the only significant architecture where the stack\ngrows up.\n\n2022-12-16  John David Anglin  <danglin@gcc.gnu.org>\n\ngcc/ChangeLog:\n\n\t* config/pa/pa.cc (pa_option_override): Disable -fstack-protector.\n\ngcc/testsuite/ChangeLog:\n\n\t* lib/target-supports.exp (check_effective_target_static): Return 0\n\ton hppa*-*-*.", "tree": {"sha": "05ea684f840800148dde3cf44835cd50b55576fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05ea684f840800148dde3cf44835cd50b55576fb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1dea4fc642a9bc54214090f0a97c811d59bf6a84", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dea4fc642a9bc54214090f0a97c811d59bf6a84", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1dea4fc642a9bc54214090f0a97c811d59bf6a84", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1dea4fc642a9bc54214090f0a97c811d59bf6a84/comments", "author": null, "committer": null, "parents": [{"sha": "8d9e2776a6d2bfe6662f79182e85ab79f3cc9522", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d9e2776a6d2bfe6662f79182e85ab79f3cc9522", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d9e2776a6d2bfe6662f79182e85ab79f3cc9522"}], "stats": {"total": 6, "additions": 6, "deletions": 0}, "files": [{"sha": "9f43802075fe05ccdc2549fafe7584f9eeb8330c", "filename": "gcc/config/pa/pa.cc", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dea4fc642a9bc54214090f0a97c811d59bf6a84/gcc%2Fconfig%2Fpa%2Fpa.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dea4fc642a9bc54214090f0a97c811d59bf6a84/gcc%2Fconfig%2Fpa%2Fpa.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa.cc?ref=1dea4fc642a9bc54214090f0a97c811d59bf6a84", "patch": "@@ -567,6 +567,9 @@ pa_option_override (void)\n       flag_reorder_blocks = 1;\n     }\n \n+  /* Disable -fstack-protector to suppress warning.  */\n+  flag_stack_protect = 0;\n+\n   /* We can't guarantee that .dword is available for 32-bit targets.  */\n   if (UNITS_PER_WORD == 4)\n     targetm.asm_out.aligned_op.di = NULL;"}, {"sha": "dccd1aed7c5ad6f3b55a7a1a9939df89f273feae", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1dea4fc642a9bc54214090f0a97c811d59bf6a84/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1dea4fc642a9bc54214090f0a97c811d59bf6a84/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=1dea4fc642a9bc54214090f0a97c811d59bf6a84", "patch": "@@ -1218,6 +1218,9 @@ proc check_effective_target_static {} {\n \n # Return 1 if the target supports -fstack-protector\n proc check_effective_target_fstack_protector {} {\n+    if { [istarget hppa*-*-*] } {\n+\treturn 0;\n+    }\n     return [check_runtime fstack_protector {\n \t#include <string.h>\n \tint main (int argc, char *argv[]) {"}]}