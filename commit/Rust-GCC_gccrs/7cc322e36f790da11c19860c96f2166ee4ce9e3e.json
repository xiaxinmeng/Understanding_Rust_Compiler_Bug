{"sha": "7cc322e36f790da11c19860c96f2166ee4ce9e3e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2NjMzIyZTM2Zjc5MGRhMTFjMTk4NjBjOTZmMjE2NmVlNGNlOWUzZQ==", "commit": {"author": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-09-30T21:30:07Z"}, "committer": {"name": "Richard Kenner", "email": "kenner@gcc.gnu.org", "date": "1994-09-30T21:30:07Z"}, "message": "(main): Use DIR_SEPARATOR if defined.\n\nUse \"Include\" environment variable instead of CPATH for winnt.\n\nFrom-SVN: r8183", "tree": {"sha": "c5b1dd3b8fc287c8b7890fe21651277f5e6f2dd0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c5b1dd3b8fc287c8b7890fe21651277f5e6f2dd0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7cc322e36f790da11c19860c96f2166ee4ce9e3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cc322e36f790da11c19860c96f2166ee4ce9e3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7cc322e36f790da11c19860c96f2166ee4ce9e3e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7cc322e36f790da11c19860c96f2166ee4ce9e3e/comments", "author": null, "committer": null, "parents": [{"sha": "eb910b5a56c7305decd563a2d737ac88b4e55492", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb910b5a56c7305decd563a2d737ac88b4e55492", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb910b5a56c7305decd563a2d737ac88b4e55492"}], "stats": {"total": 17, "additions": 15, "deletions": 2}, "files": [{"sha": "b4343001cddd363902371a3bc476ca6073700c41", "filename": "gcc/cccp.c", "status": "modified", "additions": 15, "deletions": 2, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7cc322e36f790da11c19860c96f2166ee4ce9e3e/gcc%2Fcccp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7cc322e36f790da11c19860c96f2166ee4ce9e3e/gcc%2Fcccp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcccp.c?ref=7cc322e36f790da11c19860c96f2166ee4ce9e3e", "patch": "@@ -1136,7 +1136,12 @@ main (argc, argv)\n #endif\n \n   p = argv[0] + strlen (argv[0]);\n-  while (p != argv[0] && p[-1] != '/') --p;\n+  while (p != argv[0] && p[-1] != '/'\n+#ifdef DIR_SEPARATOR\n+\t && p[-1] != DIR_SEPARATOR\n+#endif\n+\t )\n+    --p;\n   progname = p;\n \n #ifdef VMS\n@@ -1627,7 +1632,11 @@ main (argc, argv)\n   /* Some people say that CPATH should replace the standard include dirs,\n      but that seems pointless: it comes before them, so it overrides them\n      anyway.  */\n+#ifdef WINNT\n+  p = (char *) getenv (\"Include\");\n+#else\n   p = (char *) getenv (\"CPATH\");\n+#endif\n   if (p != 0 && ! no_standard_includes)\n     path_include (p);\n \n@@ -1979,7 +1988,11 @@ main (argc, argv)\n       int len;\n \n       /* Discard all directory prefixes from filename.  */\n-      if ((q = rindex (in_fname, '/')) != NULL)\n+      if ((q = rindex (in_fname, '/')) != NULL\n+#ifdef DIR_SEPARATOR\n+\t  && (q = rindex (in_fname, DIR_SEPARATOR)) != NULL\n+#endif\n+\t  )\n \t++q;\n       else\n \tq = in_fname;"}]}