{"sha": "6b5b46f2aae7a12fb88833790ffcafaed5068474", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NmI1YjQ2ZjJhYWU3YTEyZmI4ODgzMzc5MGZmY2FmYWVkNTA2ODQ3NA==", "commit": {"author": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-04-04T22:47:36Z"}, "committer": {"name": "Richard Stallman", "email": "rms@gnu.org", "date": "1993-04-04T22:47:36Z"}, "message": "Change \"illegal\" to \"invalid\" in error messages.\n\n(parse_stabs_common): Allow nonzero ignored fields in .stabs/.stabn.\n\nFrom-SVN: r4011", "tree": {"sha": "83a1abd75a93bfbbbdf293233fde5f1ef57d6f94", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/83a1abd75a93bfbbbdf293233fde5f1ef57d6f94"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/6b5b46f2aae7a12fb88833790ffcafaed5068474", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b5b46f2aae7a12fb88833790ffcafaed5068474", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6b5b46f2aae7a12fb88833790ffcafaed5068474", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6b5b46f2aae7a12fb88833790ffcafaed5068474/comments", "author": null, "committer": null, "parents": [{"sha": "2829c155f07001193b7cd139da79f7a7d00ad57f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2829c155f07001193b7cd139da79f7a7d00ad57f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2829c155f07001193b7cd139da79f7a7d00ad57f"}], "stats": {"total": 46, "additions": 25, "deletions": 21}, "files": [{"sha": "0192064a2dc7ccb86029e121c1cd8e455ef573f0", "filename": "gcc/mips-tfile.c", "status": "modified", "additions": 25, "deletions": 21, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/6b5b46f2aae7a12fb88833790ffcafaed5068474/gcc%2Fmips-tfile.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/6b5b46f2aae7a12fb88833790ffcafaed5068474/gcc%2Fmips-tfile.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fmips-tfile.c?ref=6b5b46f2aae7a12fb88833790ffcafaed5068474", "patch": "@@ -3580,7 +3580,7 @@ parse_file (start)\n       || (start_name = local_index (p, '\"')) == (char *)0\n       || (end_name_p1 = local_rindex (++start_name, '\"')) == (char *)0)\n     {\n-      error (\"Illegal .file directive\");\n+      error (\"Invalid .file directive\");\n       return;\n     }\n \n@@ -3661,7 +3661,7 @@ parse_stabs_common (string_start, string_end, rest)\n   /* Read code from stabs.  */\n   if (!isdigit (*rest))\n     {\n-      error (\"Illegal .stabs/.stabn directive, code is non-numeric\");\n+      error (\"Invalid .stabs/.stabn directive, code is non-numeric\");\n       return;\n     }\n \n@@ -3681,15 +3681,15 @@ parse_stabs_common (string_start, string_end, rest)\n       /* Skip ,0, */\n       if (p[0] != ',' || p[1] != '0' || p[2] != ',' || !isdigit (p[3]))\n \t{\n-\t  error (\"Illegal line number .stabs/.stabn directive\");\n+\t  error (\"Invalid line number .stabs/.stabn directive\");\n \t  return;\n \t}\n \n       code = strtol (p+3, &p, 0);\n       ch = *++p;\n       if (p[-1] != ',' || isdigit (ch) || !IS_ASM_IDENT (ch))\n \t{\n-\t  error (\"Illegal line number .stabs/.stabn directive\");\n+\t  error (\"Invalid line number .stabs/.stabn directive\");\n \t  return;\n \t}\n \n@@ -3710,13 +3710,13 @@ parse_stabs_common (string_start, string_end, rest)\n       if (shash_ptr == (shash_t *)0\n \t  || (sym_ptr = shash_ptr->sym_ptr) == (SYMR *)0)\n \t{\n-\t  error (\"Illegal .stabs/.stabn directive, value not found\");\n+\t  error (\"Invalid .stabs/.stabn directive, value not found\");\n \t  return;\n \t}\n \n       if ((st_t) sym_ptr->st != st_Label)\n \t{\n-\t  error (\"Illegal line number .stabs/.stabn directive\");\n+\t  error (\"Invalid line number .stabs/.stabn directive\");\n \t  return;\n \t}\n \n@@ -3726,18 +3726,22 @@ parse_stabs_common (string_start, string_end, rest)\n     }\n   else\n     {\n-      /* Skip ,0,0, */\n-      if (p[0] != ',' || p[1] != '0' || p[2] != ',' || p[3] != '0' || p[4] != ',')\n-\t{\n-\t  error (\"Illegal .stabs/.stabn directive, mandatory 0 isn't\");\n-\t  return;\n-\t}\n-\n-      p += 5;\n+      /* Skip ,<num>,<num>, */\n+      if (*p++ != ',')\n+\tgoto failure;\n+      for (; isdigit (*p); p++)\n+\t;\n+      if (*p++ != ',')\n+\tgoto failure;\n+      for (; isdigit (*p); p++)\n+\t;\n+      if (*p++ != ',')\n+\tgoto failure;\n       ch = *p;\n       if (!IS_ASM_IDENT (ch) && ch != '-')\n \t{\n-\t  error (\"Illegal .stabs/.stabn directive, bad character\");\n+\tfailure:\n+\t  error (\"Invalid .stabs/.stabn directive, bad character\");\n \t  return;\n \t}\n \n@@ -3748,13 +3752,13 @@ parse_stabs_common (string_start, string_end, rest)\n \t  value = strtol (p, &p, 0);\n \t  if (*p != '\\n')\n \t    {\n-\t      error (\"Illegal .stabs/.stabn directive, stuff after numeric value\");\n+\t      error (\"Invalid .stabs/.stabn directive, stuff after numeric value\");\n \t      return;\n \t    }\n \t}\n       else if (!IS_ASM_IDENT (ch))\n \t{\n-\t  error (\"Illegal .stabs/.stabn directive, bad character\");\n+\t  error (\"Invalid .stabs/.stabn directive, bad character\");\n \t  return;\n \t}\n       else\n@@ -3786,7 +3790,7 @@ parse_stabs_common (string_start, string_end, rest)\n \t      if (shash_ptr == (shash_t *)0\n \t\t  || shash_ptr->esym_ptr == (EXTR *)0)\n \t\t{\n-\t\t  error (\"Illegal .stabs/.stabn directive, value not found\");\n+\t\t  error (\"Invalid .stabs/.stabn directive, value not found\");\n \t\t  return;\n \t\t}\n \t      else\n@@ -3812,7 +3816,7 @@ parse_stabs_common (string_start, string_end, rest)\n \t      if (((!isdigit (*end_p1)) && (*end_p1 != '-'))\n \t\t  || ((ch != '+') && (ch != '-')))\n \t\t{\n-\t\t  error (\"Illegal .stabs/.stabn directive, badly formed value\");\n+\t\t  error (\"Invalid .stabs/.stabn directive, badly formed value\");\n \t\t  return;\n \t\t}\n \t      if (ch == '+')\n@@ -3822,7 +3826,7 @@ parse_stabs_common (string_start, string_end, rest)\n \n \t      if (*p != '\\n')\n \t\t{\n-\t\t  error (\"Illegal .stabs/.stabn directive, stuff after numeric value\");\n+\t\t  error (\"Invalid .stabs/.stabn directive, stuff after numeric value\");\n \t\t  return;\n \t\t}\n \t    }\n@@ -3844,7 +3848,7 @@ parse_stabs (start)\n \n   if (*start != '\"' || end == (const char *)0 || end[1] != ',')\n     {\n-      error (\"Illegal .stabs directive, no string\");\n+      error (\"Invalid .stabs directive, no string\");\n       return;\n     }\n "}]}