{"sha": "a5c655e832e56b78b5cc4cab0452f4263740e938", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVjNjU1ZTgzMmU1NmI3OGI1Y2M0Y2FiMDQ1MmY0MjYzNzQwZTkzOA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2008-01-06T09:07:47Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2008-01-06T09:07:47Z"}, "message": "re PR fortran/34662 (inout argument with parameter)\n\n2008-01-06  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/34662\n        * interface.c (compare_actual_formal): Reject parameter\n        actual to intent(out) dummy.\n\n2008-01-06  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/34662\n        * gfortran.dg/intent_out_3.f90: New.\n\nFrom-SVN: r131348", "tree": {"sha": "cbdd147b3dc5efc685848f0b3084142c55373706", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cbdd147b3dc5efc685848f0b3084142c55373706"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5c655e832e56b78b5cc4cab0452f4263740e938", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c655e832e56b78b5cc4cab0452f4263740e938", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5c655e832e56b78b5cc4cab0452f4263740e938", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5c655e832e56b78b5cc4cab0452f4263740e938/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5c09795d82c0d78be059a3e94b5bb9cef99305ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c09795d82c0d78be059a3e94b5bb9cef99305ff", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c09795d82c0d78be059a3e94b5bb9cef99305ff"}], "stats": {"total": 38, "additions": 35, "deletions": 3}, "files": [{"sha": "43d7519d13af00582a6a84ef4e04095cd36a2eda", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=a5c655e832e56b78b5cc4cab0452f4263740e938", "patch": "@@ -1,3 +1,9 @@\n+2008-01-06  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/34662\n+\t* interface.c (compare_actual_formal): Reject parameter\n+\tactual to intent(out) dummy.\n+\n 2008-01-04  Tobias Burnus  <burnus@net-b.de>\n \n \tPR fortran/34557"}, {"sha": "b900b102fe5e552d8c74ab28214e8993f12a34ff", "filename": "gcc/fortran/interface.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ffortran%2Finterface.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ffortran%2Finterface.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Finterface.c?ref=a5c655e832e56b78b5cc4cab0452f4263740e938", "patch": "@@ -1908,13 +1908,15 @@ compare_actual_formal (gfc_actual_arglist **ap, gfc_formal_arglist *formal,\n \t}\n \n       /* Check intent = OUT/INOUT for definable actual argument.  */\n-      if (a->expr->expr_type != EXPR_VARIABLE\n+      if ((a->expr->expr_type != EXPR_VARIABLE\n+\t   || a->expr->symtree->n.sym->attr.flavor != FL_VARIABLE)\n \t  && (f->sym->attr.intent == INTENT_OUT\n \t      || f->sym->attr.intent == INTENT_INOUT))\n \t{\n \t  if (where)\n-\t    gfc_error (\"Actual argument at %L must be definable to \"\n-\t\t       \"match dummy INTENT = OUT/INOUT\", &a->expr->where);\n+\t    gfc_error (\"Actual argument at %L must be definable as \"\n+\t\t       \"the dummy argument '%s' is INTENT = OUT/INOUT\",\n+\t\t       &a->expr->where, f->sym->name);\n \t  return 0;\n \t}\n "}, {"sha": "5cecf0642e653bc577535a29626293d756bc47c0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=a5c655e832e56b78b5cc4cab0452f4263740e938", "patch": "@@ -1,3 +1,8 @@\n+2008-01-06  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/34662\n+\t* gfortran.dg/intent_out_3.f90: New.\n+\n 2008-01-05  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \t* objc.dg/stabs-1.m: Allow labels to be begin with $L as well as .L."}, {"sha": "7b68a352246e2955c82f1ba668ef1df56ae373b8", "filename": "gcc/testsuite/gfortran.dg/intent_out_3.f90", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_out_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5c655e832e56b78b5cc4cab0452f4263740e938/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_out_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fintent_out_3.f90?ref=a5c655e832e56b78b5cc4cab0452f4263740e938", "patch": "@@ -0,0 +1,19 @@\n+! { dg-do compile }\n+!\n+! PR fortran/34662\n+! The INTENT error was not detected.\n+! Test case contributed by Joost VandeVondele.\n+!\n+MODULE M1\n+ TYPE T1\n+  INTEGER :: I(3)\n+ END TYPE T1\n+ TYPE(T1), PARAMETER :: D1=T1((/1,2,3/))\n+CONTAINS\n+ SUBROUTINE S1(J)\n+  INTEGER, INTENT(INOUT) :: J\n+ END SUBROUTINE S1\n+END MODULE M1\n+USE M1\n+CALL S1(D1%I(3)) ! { dg-error \"must be definable\" }\n+END"}]}