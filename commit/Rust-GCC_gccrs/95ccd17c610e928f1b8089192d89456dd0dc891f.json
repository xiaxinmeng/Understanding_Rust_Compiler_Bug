{"sha": "95ccd17c610e928f1b8089192d89456dd0dc891f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTVjY2QxN2M2MTBlOTI4ZjFiODA4OTE5MmQ4OTQ1NmRkMGRjODkxZg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-10-03T18:39:54Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-10-03T18:39:54Z"}, "message": "re PR go/77809 (\"_LITTLE_ENDIAN\" redefined)\n\n\tPR go/77809\n\n    libgo: strip most C macros from runtime.inc\n    \n    The Go runtime package is picking up C macros from runtime_sysinfo.go\n    and then re-exporting them to runtime.inc.  This can cause name\n    conflicts.  Change the Makefile so that we only put the macros we need\n    into runtime.inc.  These are the constants that are actually defined by\n    Go code, not runtime_sysinfo.go.  There are only a few, so we can\n    pattern match.\n    \n    This is an additional hack on runtime.inc.  The long term goal is to\n    convert the runtime package to Go and eliminate runtime.inc entirely, so\n    a few hacks seem acceptable.\n    \n    Fixes GCC PR 77809.\n\n    Reviewed-on: https://go-review.googlesource.com/30167\n\nFrom-SVN: r240724", "tree": {"sha": "0c76240dd904927dcaadeb0e937ac447ab5d453d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0c76240dd904927dcaadeb0e937ac447ab5d453d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/95ccd17c610e928f1b8089192d89456dd0dc891f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95ccd17c610e928f1b8089192d89456dd0dc891f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/95ccd17c610e928f1b8089192d89456dd0dc891f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/95ccd17c610e928f1b8089192d89456dd0dc891f/comments", "author": null, "committer": null, "parents": [{"sha": "606dda21c8bcd4c2574e5b28f8125f01e38955c6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/606dda21c8bcd4c2574e5b28f8125f01e38955c6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/606dda21c8bcd4c2574e5b28f8125f01e38955c6"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "1bd4552e6647ffb6efe6956bb6101c48dd4eaa3d", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95ccd17c610e928f1b8089192d89456dd0dc891f/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95ccd17c610e928f1b8089192d89456dd0dc891f/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=95ccd17c610e928f1b8089192d89456dd0dc891f", "patch": "@@ -1,4 +1,4 @@\n-f3fb9bf2d5a009a707962a416fcd1a8435756218\n+325f8074c5224ae537f8e00aede5c780b70f914c\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "a0566c10be6c26f6ff8f3ad5ce0b724e48338eae", "filename": "libgo/Makefile.am", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95ccd17c610e928f1b8089192d89456dd0dc891f/libgo%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95ccd17c610e928f1b8089192d89456dd0dc891f/libgo%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.am?ref=95ccd17c610e928f1b8089192d89456dd0dc891f", "patch": "@@ -1284,8 +1284,13 @@ runtime_go_lo_GOCFLAGS = -fgo-c-header=runtime.inc.tmp -fgo-compiling-runtime\n runtime-go.lo:\n \t$(BUILDPACKAGE)\n runtime.inc: s-runtime-inc; @true\n-s-runtime-inc: runtime-go.lo\n-\t$(SHELL) $(srcdir)/mvifdiff.sh runtime.inc.tmp runtime.inc\n+s-runtime-inc: runtime-go.lo Makefile\n+\trm -f runtime.inc.tmp2\n+\tgrep -v \"#define _\" runtime.inc.tmp > runtime.inc.tmp2\n+\tfor pattern in '_G[a-z]' '_P[a-z]' _Max _Lock _Sig _Trace _MHeap _Num; do \\\n+\t  grep \"#define $$pattern\" runtime.inc.tmp >> runtime.inc.tmp2; \\\n+\tdone\n+\t$(SHELL) $(srcdir)/mvifdiff.sh runtime.inc.tmp2 runtime.inc\n \t$(STAMP) $@\n runtime_check_GOCFLAGS = -fgo-compiling-runtime\n runtime/check: $(CHECK_DEPS)"}, {"sha": "7a133f1b377be68234390dfdea552a10fda6399e", "filename": "libgo/Makefile.in", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/95ccd17c610e928f1b8089192d89456dd0dc891f/libgo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/95ccd17c610e928f1b8089192d89456dd0dc891f/libgo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2FMakefile.in?ref=95ccd17c610e928f1b8089192d89456dd0dc891f", "patch": "@@ -3886,8 +3886,13 @@ runtime-go.lo.dep: $(srcdir)/go/runtime/*.go $(extra_go_files_runtime)\n runtime-go.lo:\n \t$(BUILDPACKAGE)\n runtime.inc: s-runtime-inc; @true\n-s-runtime-inc: runtime-go.lo\n-\t$(SHELL) $(srcdir)/mvifdiff.sh runtime.inc.tmp runtime.inc\n+s-runtime-inc: runtime-go.lo Makefile\n+\trm -f runtime.inc.tmp2\n+\tgrep -v \"#define _\" runtime.inc.tmp > runtime.inc.tmp2\n+\tfor pattern in '_G[a-z]' '_P[a-z]' _Max _Lock _Sig _Trace _MHeap _Num; do \\\n+\t  grep \"#define $$pattern\" runtime.inc.tmp >> runtime.inc.tmp2; \\\n+\tdone\n+\t$(SHELL) $(srcdir)/mvifdiff.sh runtime.inc.tmp2 runtime.inc\n \t$(STAMP) $@\n runtime/check: $(CHECK_DEPS)\n \t@$(CHECK)"}]}