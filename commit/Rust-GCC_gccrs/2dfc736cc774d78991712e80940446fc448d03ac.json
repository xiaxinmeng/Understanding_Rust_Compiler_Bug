{"sha": "2dfc736cc774d78991712e80940446fc448d03ac", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmRmYzczNmNjNzc0ZDc4OTkxNzEyZTgwOTQwNDQ2ZmM0NDhkMDNhYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-16T23:05:40Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2012-04-16T23:05:40Z"}, "message": "compiler: fix infinite recursion in string constant evaluation.\n\nFixes compilation of incorrect code:\n    const f, g = g, f\n    func S() []byte { return []byte(f) }\n\nThe problem was already handled for numerical constants.\n\nPart of issue 3186 (go).\n\nFrom-SVN: r186511", "tree": {"sha": "2e167b8be082bf80ff042e1cedcf1a1f32f13286", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2e167b8be082bf80ff042e1cedcf1a1f32f13286"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2dfc736cc774d78991712e80940446fc448d03ac", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dfc736cc774d78991712e80940446fc448d03ac", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2dfc736cc774d78991712e80940446fc448d03ac", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2dfc736cc774d78991712e80940446fc448d03ac/comments", "author": null, "committer": null, "parents": [{"sha": "4a1016814c2121920459d13ccb4c841b3a537951", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4a1016814c2121920459d13ccb4c841b3a537951", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4a1016814c2121920459d13ccb4c841b3a537951"}], "stats": {"total": 18, "additions": 16, "deletions": 2}, "files": [{"sha": "6ff071860aafd879931e1f8386c2b7bd6e6b74aa", "filename": "gcc/go/gofrontend/expressions.cc", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2dfc736cc774d78991712e80940446fc448d03ac/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2dfc736cc774d78991712e80940446fc448d03ac/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fexpressions.cc?ref=2dfc736cc774d78991712e80940446fc448d03ac", "patch": "@@ -2403,8 +2403,7 @@ class Const_expression : public Expression\n   do_numeric_constant_value(Numeric_constant* nc) const;\n \n   bool\n-  do_string_constant_value(std::string* val) const\n-  { return this->constant_->const_value()->expr()->string_constant_value(val); }\n+  do_string_constant_value(std::string* val) const;\n \n   Type*\n   do_type();\n@@ -2514,6 +2513,21 @@ Const_expression::do_numeric_constant_value(Numeric_constant* nc) const\n   return r;\n }\n \n+bool\n+Const_expression::do_string_constant_value(std::string* val) const\n+{\n+  if (this->seen_)\n+    return false;\n+\n+  Expression* e = this->constant_->const_value()->expr();\n+\n+  this->seen_ = true;\n+  bool ok = e->string_constant_value(val);\n+  this->seen_ = false;\n+\n+  return ok;\n+}\n+\n // Return the type of the const reference.\n \n Type*"}]}