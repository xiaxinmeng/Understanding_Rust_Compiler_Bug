{"sha": "fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE1ZDZjNzUyZTliOWJmMjZiZTczYTVkYTRlNjhmZjI0M2YwYWMzMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2014-01-18T10:18:33Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-01-18T10:18:33Z"}, "message": "re PR target/58944 (bogus -Wunused-macros warnings when compiling Libreoffice)\n\n\tPR target/58944\n\t* config/i386/i386-c.c (ix86_pragma_target_parse): Temporarily\n\tclear cpp_get_options (parse_in)->warn_unused_macros for\n\tix86_target_macros_internal with cpp_define.\n\n\t* gcc.target/i386/pr58944.c: Drop -march=native from dg-options.\n\tRemove dg-prune-output lines.\n\nFrom-SVN: r206750", "tree": {"sha": "1bad4adf41de31070d1b4764e799d69e1deff463", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1bad4adf41de31070d1b4764e799d69e1deff463"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "04da56800d7dab3b3aee10b742328efc49ff3a4a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04da56800d7dab3b3aee10b742328efc49ff3a4a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04da56800d7dab3b3aee10b742328efc49ff3a4a"}], "stats": {"total": 28, "additions": 23, "deletions": 5}, "files": [{"sha": "82421c7c177d5e7f8113cc9cd2d1f0afc85a0283", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "patch": "@@ -1,3 +1,10 @@\n+2014-01-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/58944\n+\t* config/i386/i386-c.c (ix86_pragma_target_parse): Temporarily\n+\tclear cpp_get_options (parse_in)->warn_unused_macros for\n+\tix86_target_macros_internal with cpp_define.\n+\n 2014-01-18  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* jump.c (delete_related_insns): Keep (use (insn))s."}, {"sha": "ee83de66471ab9a60c3472668807343a494b41b0", "filename": "gcc/config/i386/i386-c.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2Fconfig%2Fi386%2Fi386-c.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2Fconfig%2Fi386%2Fi386-c.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386-c.c?ref=fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "patch": "@@ -460,13 +460,22 @@ ix86_pragma_target_parse (tree args, tree pop_target)\n \t\t\t       (enum fpmath_unit) prev_opt->x_ix86_fpmath,\n \t\t\t       cpp_undef);\n \n+  /* For the definitions, ensure all newly defined macros are considered\n+     as used for -Wunused-macros.  There is no point warning about the\n+     compiler predefined macros.  */\n+  cpp_options *cpp_opts = cpp_get_options (parse_in);\n+  unsigned char saved_warn_unused_macros = cpp_opts->warn_unused_macros;\n+  cpp_opts->warn_unused_macros = 0;\n+\n   /* Define all of the macros for new options that were just turned on.  */\n   ix86_target_macros_internal (cur_isa & diff_isa,\n \t\t\t       cur_arch,\n \t\t\t       cur_tune,\n \t\t\t       (enum fpmath_unit) cur_opt->x_ix86_fpmath,\n \t\t\t       cpp_define);\n \n+  cpp_opts->warn_unused_macros = saved_warn_unused_macros;\n+\n   return true;\n }\n \f"}, {"sha": "f57666977647c91eeaa692e55ed5d6ff89571f83", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "patch": "@@ -1,3 +1,9 @@\n+2014-01-18  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/58944\n+\t* gcc.target/i386/pr58944.c: Drop -march=native from dg-options.\n+\tRemove dg-prune-output lines.\n+\n 2014-01-17  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR middle-end/59706"}, {"sha": "9a92e9b6cec2cb5ca5d68926a7f95e5daab70f57", "filename": "gcc/testsuite/gcc.target/i386/pr58944.c", "status": "modified", "additions": 1, "deletions": 5, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr58944.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr58944.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr58944.c?ref=fa5d6c752e9b9bf26be73a5da4e68ff243f0ac32", "patch": "@@ -1,11 +1,7 @@\n /* { dg-do compile } */\n-/* { dg-options \"-Wunused-macros -march=native\" } */\n+/* { dg-options \"-Wunused-macros\" } */\n \n #pragma GCC push_options\n #pragma GCC target(\"xsaveopt\")\n void fn1(void) {}\n #pragma GCC pop_options\n-\n-/* { dg-prune-output \"macro \\\"__code_model_\" } */ \n-/* { dg-prune-output \"macro \\\"__XSAVE__\\\" is not used\" } */ \n-/* { dg-prune-output \"macro \\\"__XSAVEOPT__\\\" is not used\" } */ "}]}