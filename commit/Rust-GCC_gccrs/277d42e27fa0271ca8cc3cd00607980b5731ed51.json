{"sha": "277d42e27fa0271ca8cc3cd00607980b5731ed51", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjc3ZDQyZTI3ZmEwMjcxY2E4Y2MzY2QwMDYwNzk4MGI1NzMxZWQ1MQ==", "commit": {"author": {"name": "Benjamin Kosnik", "email": "bkoz@redhat.com", "date": "2005-08-26T21:10:59Z"}, "committer": {"name": "Benjamin Kosnik", "email": "bkoz@gcc.gnu.org", "date": "2005-08-26T21:10:59Z"}, "message": "PR libstdc++/20534 (contd)\n\n\n2005-08-26  Benjamin Kosnik  <bkoz@redhat.com>\n\n\tPR libstdc++/20534 (contd)\n\t* src/debug.cc (__gnu_debug): Remove __fancy_abort definition.\n\tRemove cstdio and cstdlib includes.\n\t* include/debug/debug.h: Define inline here. Remove\n\t_GLIBCXX_DEBUG_ABORT.\n\t* include/debug/macros.h: Remove __fancy_abort declaration,\n\t_GLIBXX_DEBUG_ABORT definition.\n\t* config/linker-map.gnu: Remove export.\n\nFrom-SVN: r103535", "tree": {"sha": "8a9ff1231f676eb1b8f844fa75ddbd482309c0c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8a9ff1231f676eb1b8f844fa75ddbd482309c0c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/277d42e27fa0271ca8cc3cd00607980b5731ed51", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/277d42e27fa0271ca8cc3cd00607980b5731ed51", "html_url": "https://github.com/Rust-GCC/gccrs/commit/277d42e27fa0271ca8cc3cd00607980b5731ed51", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/277d42e27fa0271ca8cc3cd00607980b5731ed51/comments", "author": null, "committer": null, "parents": [{"sha": "327d749cf801245ac09a5539bb0ee4f07a32002c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/327d749cf801245ac09a5539bb0ee4f07a32002c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/327d749cf801245ac09a5539bb0ee4f07a32002c"}], "stats": {"total": 63, "additions": 38, "deletions": 25}, "files": [{"sha": "76c62a1c471c68d2ec5a24c522c5f4ae18cbf60e", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=277d42e27fa0271ca8cc3cd00607980b5731ed51", "patch": "@@ -1,3 +1,14 @@\n+2005-08-26  Benjamin Kosnik  <bkoz@redhat.com>\n+\n+\tPR libstdc++/20534 (contd)\n+\t* src/debug.cc (__gnu_debug): Remove __fancy_abort definition.\n+\tRemove cstdio and cstdlib includes.\n+\t* include/debug/debug.h: Define inline here. Remove\n+\t_GLIBCXX_DEBUG_ABORT.\n+\t* include/debug/macros.h: Remove __fancy_abort declaration,\n+\t_GLIBXX_DEBUG_ABORT definition.\n+\t* config/linker-map.gnu: Remove export.\n+\t\n 2005-08-26  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* scripts/check_compile (UNIQUE_ID): New. Use to name output files."}, {"sha": "3099bfb68171d36625183dc08a111a6fa23f07a7", "filename": "libstdc++-v3/config/linker-map.gnu", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Fconfig%2Flinker-map.gnu", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Fconfig%2Flinker-map.gnu", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfig%2Flinker-map.gnu?ref=277d42e27fa0271ca8cc3cd00607980b5731ed51", "patch": "@@ -566,7 +566,6 @@ GLIBCXX_3.4.6 {\n     _ZNSt8ios_base17_M_call_callbacksENS_5eventE;\n     _ZNSt8ios_base20_M_dispose_callbacksEv;\n     _ZNSt6locale5facet13_S_get_c_nameEv;\n-    _ZN11__gnu_debug13__fancy_abortEPKciS1_S1_;\n \n     _ZNSt15basic_stringbufI[cw]St11char_traitsI[cw]ESaI[cw]EE9showmanycEv;\n "}, {"sha": "c29109681764817cab8a0f3408fe60898fdc7b2c", "filename": "libstdc++-v3/include/debug/debug.h", "status": "modified", "additions": 27, "deletions": 3, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fdebug.h?ref=277d42e27fa0271ca8cc3cd00607980b5731ed51", "patch": "@@ -40,11 +40,35 @@\n */\n \n #ifdef _GLIBCXX_DEBUG\n-#  include <debug/macros.h>\n-#  define _GLIBCXX_DEBUG_ASSERT(_Condition) _GLIBCXX_DEBUG_ABORT(_Condition)\n+\n+# include <debug/macros.h>\n+# include <cstdlib>\n+# include <cstdio>\n+\n+// Avoid the use of assert, because we're trying to keep the <cassert>\n+// include out of the mix.\n+namespace __gnu_debug\n+{ \n+  inline void\n+  __replacement_assert(const char* __file, int __line, const char* __function,\n+\t\t       const char* __condition)\n+  {\n+    std::printf(\"%s:%d: %s: Assertion '%s' failed.\\n\", __file, __line,\n+\t\t__function, __condition);\n+    std::abort();\n+  }\n+}\n+\n+#define _GLIBCXX_DEBUG_ASSERT(_Condition)                               \\\n+  do {                                                                  \\\n+    if (! (_Condition))                                                 \\\n+      ::__gnu_debug::__replacement_assert(__FILE__, __LINE__,           \\\n+\t\t\t\t   __PRETTY_FUNCTION__,                 \\\n+\t\t\t\t   #_Condition);                        \\\n+  } while (false)\n \n #  ifdef _GLIBCXX_DEBUG_PEDANTIC\n-#    define _GLIBCXX_DEBUG_PEDASSERT(_Condition) _GLIBCXX_DEBUG_ABORT(_Condition)\n+#    define _GLIBCXX_DEBUG_PEDASSERT(_Condition) _GLIBCXX_DEBUG_ASSERT(_Condition)\n #  else\n #    define _GLIBCXX_DEBUG_PEDASSERT(_Condition)\n #  endif"}, {"sha": "9b279cbf36a3f71025df741aef35f8d1589fa06b", "filename": "libstdc++-v3/include/debug/macros.h", "status": "modified", "additions": 0, "deletions": 10, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fdebug%2Fmacros.h?ref=277d42e27fa0271ca8cc3cd00607980b5731ed51", "patch": "@@ -40,16 +40,6 @@\n  * the user error and where the error is reported.\n  *\n  */\n-namespace __gnu_debug\n-{ void __fancy_abort(const char*, int, const char*, const char*); }\n-#define _GLIBCXX_DEBUG_ABORT(_Condition)                                \\\n-  do {                                                                  \\\n-    if (! (_Condition))                                                 \\\n-      ::__gnu_debug::__fancy_abort(__FILE__, __LINE__,                  \\\n-\t\t\t\t   __PRETTY_FUNCTION__,                 \\\n-\t\t\t\t   #_Condition);                        \\\n-  } while (false)\n-\n #define _GLIBCXX_DEBUG_VERIFY(_Condition,_ErrorMessage)\t\t        \\\n   do {\t\t\t\t\t\t\t\t\t\\\n     if (! (_Condition))\t\t\t\t\t\t\t\\"}, {"sha": "af927e152fb5b74d42e3b976983af6f1c5e7308f", "filename": "libstdc++-v3/src/debug.cc", "status": "modified", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/277d42e27fa0271ca8cc3cd00607980b5731ed51/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2Fdebug.cc?ref=277d42e27fa0271ca8cc3cd00607980b5731ed51", "patch": "@@ -32,10 +32,8 @@\n #include <debug/safe_sequence.h>\n #include <debug/safe_iterator.h>\n #include <algorithm>\n-#include <cstdlib>\n #include <cassert>\n #include <cstring>\n-#include <cstdio>\n #include <cctype>\n #include <bits/concurrence.h>\n \n@@ -48,15 +46,6 @@ namespace __gnu_internal\n \n namespace __gnu_debug\n {\n-  void\n-  __fancy_abort(const char* __file, int __line, const char* __function,\n-\t\tconst char* __condition)\n-  {\n-    printf(\"%s:%d: %s: Assertion '%s' failed.\\n\", __file, __line,\n-\t   __function, __condition);\n-    abort();\n-  }\n-\n   const char* _S_debug_messages[] = \n   {\n     \"function requires a valid iterator range [%1.name;, %2.name;)\","}]}