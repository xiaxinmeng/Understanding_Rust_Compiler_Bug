{"sha": "a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTVlZmNkNjM3MGEwNGUwZmU4YjdlNjRhMzZmZDgwZjJjZjIyYWVmMw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@yorick.cygnus.com", "date": "1999-07-27T10:23:05Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1999-07-27T10:23:05Z"}, "message": "expr.c (expand_expr, [...]): Get the mode from the tree for op1, not the rtl.\n\n\t* expr.c (expand_expr, case PLUS_EXPR): Get the mode from the\n\ttree for op1, not the rtl.\n\nFrom-SVN: r28292", "tree": {"sha": "72446ba3904c9193a882b47fd480893835e23205", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/72446ba3904c9193a882b47fd480893835e23205"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3/comments", "author": null, "committer": null, "parents": [{"sha": "3c56dbcfe29dc4053c0ec20f0dc43f76d039c97b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3c56dbcfe29dc4053c0ec20f0dc43f76d039c97b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3c56dbcfe29dc4053c0ec20f0dc43f76d039c97b"}], "stats": {"total": 9, "additions": 8, "deletions": 1}, "files": [{"sha": "3d5b4d771de2f65384af32647af105af652dd644", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3", "patch": "@@ -1,3 +1,8 @@\n+Tue Jul 27 03:15:33 1999  Jason Merrill  <jason@yorick.cygnus.com>\n+\n+\t* expr.c (expand_expr, case PLUS_EXPR): Get the mode from the \n+\ttree for op1, not the rtl.\n+\n Tue Jul 27 00:18:34 1999  Richard Henderson  <rth@cygnus.com>\n \n \t* m88k.c (m88k_builtin_saveregs): Break out the constructor code"}, {"sha": "e24096114bb3daf8e7b2e9ea4ca58ca687eeace8", "filename": "gcc/expr.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3/gcc%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3/gcc%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpr.c?ref=a5efcd6370a04e0fe8b7e64a36fd80f2cf22aef3", "patch": "@@ -4018,7 +4018,9 @@ store_constructor (exp, target, cleared)\n      int cleared;\n {\n   tree type = TREE_TYPE (exp);\n+#ifdef WORD_REGISTER_OPERATIONS\n   rtx exp_size = expr_size (exp);\n+#endif\n \n   /* We know our target cannot conflict, since safe_from_p has been called.  */\n #if 0\n@@ -6955,7 +6957,7 @@ expand_expr (exp, target, tmode, modifier)\n \t      constant_part\n \t\t= immed_double_const (TREE_INT_CST_LOW (TREE_OPERAND (exp, 0)),\n \t\t\t\t      (HOST_WIDE_INT) 0,\n-\t\t\t\t      GET_MODE (op1));\n+\t\t\t\t      TYPE_MODE (TREE_TYPE (TREE_OPERAND (exp, 1))));\n \t      op1 = plus_constant (op1, INTVAL (constant_part));\n \t      if (modifier != EXPAND_SUM && modifier != EXPAND_INITIALIZER)\n \t\top1 = force_operand (op1, target);"}]}