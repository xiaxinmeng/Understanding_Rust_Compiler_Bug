{"sha": "952137502b559919c0cf1c6087ac7d4f3ba3a32c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTUyMTM3NTAyYjU1OTkxOWMwY2YxYzYwODdhYzdkNGYzYmEzYTMyYw==", "commit": {"author": {"name": "Laurynas Biveinis", "email": "lauras@gcc.gnu.org", "date": "2008-06-20T13:57:00Z"}, "committer": {"name": "Laurynas Biveinis", "email": "lauras@gcc.gnu.org", "date": "2008-06-20T13:57:00Z"}, "message": "re PR debug/34908 (valgrind error indication from testsuite hashtab.c : htab_hash_string)\n\n2008-06-20  Laurynas Biveinis  <laurynas.biveinis@gmail.com>\n\t    Tobias Burnus  <burnus@net-b.de>\n\n\tPR fortran/34908\n\tPR fortran/36276\n\t* scanner.c (preprocessor_line): do not call gfc_free for\n\tcurrent_file->filename if it differs from filename.\n\nFrom-SVN: r136989", "tree": {"sha": "8b6748605686a37cf70f38d09d876a05711abeb6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8b6748605686a37cf70f38d09d876a05711abeb6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/952137502b559919c0cf1c6087ac7d4f3ba3a32c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/952137502b559919c0cf1c6087ac7d4f3ba3a32c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/952137502b559919c0cf1c6087ac7d4f3ba3a32c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/952137502b559919c0cf1c6087ac7d4f3ba3a32c/comments", "author": null, "committer": null, "parents": [{"sha": "a055f99f15139fb20de4d19434402954a3a22651", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a055f99f15139fb20de4d19434402954a3a22651", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a055f99f15139fb20de4d19434402954a3a22651"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "7c145e1222bf465bbb124eef5a0f9fbf35a6b631", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/952137502b559919c0cf1c6087ac7d4f3ba3a32c/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/952137502b559919c0cf1c6087ac7d4f3ba3a32c/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=952137502b559919c0cf1c6087ac7d4f3ba3a32c", "patch": "@@ -1,3 +1,11 @@\n+2008-06-20  Laurynas Biveinis  <laurynas.biveinis@gmail.com>\n+\t    Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/34908\n+\tPR fortran/36276\n+\t* scanner.c (preprocessor_line): do not call gfc_free for\n+\tcurrent_file->filename if it differs from filename.\n+\n 2008-06-20  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* arith.c (hollerith2representation): Fix for -Wc++-compat.\n@@ -1139,7 +1147,7 @@\n \t(check_init_expr): Remove tests that first argument is an array\n \tin the call to scalarize_intrinsic_call.\n \n-2008-04-06  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n+2008-04-06  Tobias Schl\u00fcter  <tobi@gcc.gnu.org>\n \n \tPR fortran/35832\n \t* io.c (io_tag): Add field 'value'.  Split 'spec' field in\n@@ -1298,7 +1306,7 @@\n \tfunction, ensure that the derived type is visible in the same\n \tnamespace as the function.\n \n-2008-03-23  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n+2008-03-23  Tobias Schl\u00fcter  <tobi@gcc.gnu.org>\n \n \t* trans.h: Use fold_build in build1_v, build2_v and build3_v\n \tmacros.\n@@ -1496,7 +1504,7 @@\n \t(gfc_call_realloc): Likewise.\n \t* trans-io.c (gfc_trans_io_runtime_check): Likewise.\n \n-2008-02-24  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n+2008-02-24  Tobias Schl\u00fcter  <tobi@gcc.gnu.org>\n \n \t* arith.c: Update copyright years.\n \t* arith.h: Likewise.\n@@ -1560,7 +1568,7 @@\n \t(gfc_simplify_real): Add call gfc_clear_ts to initialize the\n \ttemporary gfc_typspec variable.\n \n-2008-02-24  Tobias Schl\ufffdter  <tobi@gcc.gnu.org>\n+2008-02-24  Tobias Schl\u00fcter  <tobi@gcc.gnu.org>\n \n \t* trans-array.c (gfc_conv_descriptor_data_get,\n \tgfc_conv_descriptor_data_set_internal,"}, {"sha": "48f148d300ab3d16b2b7197019c650a96524b5ec", "filename": "gcc/fortran/scanner.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/952137502b559919c0cf1c6087ac7d4f3ba3a32c/gcc%2Ffortran%2Fscanner.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/952137502b559919c0cf1c6087ac7d4f3ba3a32c/gcc%2Ffortran%2Fscanner.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fscanner.c?ref=952137502b559919c0cf1c6087ac7d4f3ba3a32c", "patch": "@@ -1652,7 +1652,9 @@ preprocessor_line (gfc_char_t *c)\n \n   if (strcmp (current_file->filename, filename) != 0)\n     {\n-      gfc_free (current_file->filename);\n+       /* FIXME: we leak the old filename because a pointer to it may be stored\n+          in the linemap.  Alternative could be using GC or updating linemap to\n+          point to the new name, but there is no API for that currently. */\n       current_file->filename = xstrdup (filename);\n     }\n "}]}