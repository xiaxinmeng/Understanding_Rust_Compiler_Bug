{"sha": "4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDcwMWZiYTMxY2QyYzdkNWQ2Y2QwYWY5YTk3MWVmODAyYWZjODllMw==", "commit": {"author": {"name": "Joe Seymour", "email": "joe.s@somniumtech.com", "date": "2017-01-18T03:56:10Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2017-01-18T03:56:10Z"}, "message": "t-msp430 (LIB2ADD): Remove mpy.c\n\n\tlibgcc/\n\t* config/msp430/t-msp430 (LIB2ADD): Remove mpy.c\n\t(mpy.o): New rule.\n\t(libmul_none.a): Add mpy.o\n\n\tgcc/testsuite/\n\t* gcc.target/msp430/mul_f5_muldef.c: New test.\n\nFrom-SVN: r244564", "tree": {"sha": "8d0dd65b23b74d3b3a6b785c7d3a320509280657", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d0dd65b23b74d3b3a6b785c7d3a320509280657"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/comments", "author": null, "committer": null, "parents": [{"sha": "49947b33ff2fc3982e6e5e0815d0daf3e46188eb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/49947b33ff2fc3982e6e5e0815d0daf3e46188eb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/49947b33ff2fc3982e6e5e0815d0daf3e46188eb"}], "stats": {"total": 25, "additions": 23, "deletions": 2}, "files": [{"sha": "738afb621b20670d4bc6169d686efd5930a8e82b", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "patch": "@@ -1,3 +1,7 @@\n+2017-01-17  Joe Seymour  <joe.s@somniumtech.com>\n+\n+\t* gcc.target/msp430/mul_f5_muldef.c: New test.\n+\n 2017-01-17  Michael Meissner  <meissner@linux.vnet.ibm.com>\n \n \tPR target/79004"}, {"sha": "da1b1bb983cd743d39ae3884b56782a2ebfeb53c", "filename": "gcc/testsuite/gcc.target/msp430/mul_f5_muldef.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fmul_f5_muldef.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fmul_f5_muldef.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fmsp430%2Fmul_f5_muldef.c?ref=4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do link } */\n+/* { dg-options \"-mhwmult=f5series\" } */\n+\n+/* This program used to result in a multiple definition error:\n+\n+libmul_f5.a(lib2hw_mul_f5.o): In function `__mulhi2_f5':\n+(.text.__mulhi2_f5+0x0): multiple definition of `__mspabi_mpyi'\n+libgcc.a(mpy.o):mpy.c:(.text.__mulhi3+0x0): first defined here */\n+\n+#include <stdio.h>\n+\n+int main (void)\n+{\n+  printf (\"%d\", 430);\n+}"}, {"sha": "668b9437dc255c85061af84cf0a89a86ef466e66", "filename": "libgcc/config/msp430/t-msp430", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/libgcc%2Fconfig%2Fmsp430%2Ft-msp430", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4701fba31cd2c7d5d6cd0af9a971ef802afc89e3/libgcc%2Fconfig%2Fmsp430%2Ft-msp430", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgcc%2Fconfig%2Fmsp430%2Ft-msp430?ref=4701fba31cd2c7d5d6cd0af9a971ef802afc89e3", "patch": "@@ -30,7 +30,6 @@ LIB2ADD = \\\n \t$(srcdir)/config/msp430/lib2mul.c \\\n \t$(srcdir)/config/msp430/lib2shift.c \\\n \t$(srcdir)/config/msp430/epilogue.S \\\n-\t$(srcdir)/config/msp430/mpy.c \\\n \t$(srcdir)/config/msp430/slli.S \\\n \t$(srcdir)/config/msp430/srai.S \\\n \t$(srcdir)/config/msp430/srli.S \\\n@@ -43,6 +42,9 @@ LIB2ADD = \\\n \n HOST_LIBGCC2_CFLAGS += -Os -ffunction-sections -fdata-sections -mhwmult=none\n \n+mpy.o: $(srcdir)/config/msp430/mpy.c\n+\t$(gcc_compile) $< -c\n+\n lib2_mul_none.o: $(srcdir)/config/msp430/lib2mul.c\n \t$(gcc_compile) $< -c -DMUL_NONE\n \n@@ -58,7 +60,7 @@ lib2hw_mul_32.o: $(srcdir)/config/msp430/lib2hw_mul.S\n lib2hw_mul_f5.o: $(srcdir)/config/msp430/lib2hw_mul.S\n \t$(gcc_compile) $< -c -DMUL_F5\n \n-libmul_none.a: lib2_mul_none.o\n+libmul_none.a: lib2_mul_none.o mpy.o\n \t$(AR_CREATE_FOR_TARGET) $@ $(filter %.o,$^)\n \n libmul_16.a: lib2hw_mul_16.o lib2_mul_16bit.o"}]}