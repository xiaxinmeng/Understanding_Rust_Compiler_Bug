{"sha": "cf5b2be2a4b13c3fb806033840581cd02080375c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2Y1YjJiZTJhNGIxM2MzZmI4MDYwMzM4NDA1ODFjZDAyMDgwMzc1Yw==", "commit": {"author": {"name": "Cong Hou", "email": "congh@google.com", "date": "2014-02-03T18:15:56Z"}, "committer": {"name": "Cong Hou", "email": "congh@gcc.gnu.org", "date": "2014-02-03T18:15:56Z"}, "message": "re PR tree-optimization/60000 (GCC trunk build failure caused by the vectorizer)\n\n2014-02-03  Cong Hou  <congh@google.com>\n\n\tPR tree-optimization/60000\n\t* tree-vect-loop.c (vect_transform_loop): Set pattern_def_seq to NULL\n\tif the vectorized statement is a store.  A store statement can only\n\tappear at the end of pattern statements.\n\n2014-02-03  Cong Hou  <congh@google.com>\n\n\tPR tree-optimization/60000\n\t* g++.dg/vect/pr60000.cc: New test.\n\nFrom-SVN: r207433", "tree": {"sha": "c169424d5d8cdcbdf3aa71e42ddf34256bc75463", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c169424d5d8cdcbdf3aa71e42ddf34256bc75463"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cf5b2be2a4b13c3fb806033840581cd02080375c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf5b2be2a4b13c3fb806033840581cd02080375c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cf5b2be2a4b13c3fb806033840581cd02080375c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cf5b2be2a4b13c3fb806033840581cd02080375c/comments", "author": null, "committer": null, "parents": [{"sha": "e3aaedd6bf3a5c7e7b88802bcb135fd842b3e655", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3aaedd6bf3a5c7e7b88802bcb135fd842b3e655", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3aaedd6bf3a5c7e7b88802bcb135fd842b3e655"}], "stats": {"total": 34, "additions": 30, "deletions": 4}, "files": [{"sha": "f3ebc0cb543173c544a84fc18946f92a8eebb72e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cf5b2be2a4b13c3fb806033840581cd02080375c", "patch": "@@ -1,3 +1,10 @@\n+2014-02-03  Cong Hou  <congh@google.com>\n+\n+\tPR tree-optimization/60000\n+\t* tree-vect-loop.c (vect_transform_loop): Set pattern_def_seq to NULL\n+\tif the vectorized statement is a store.  A store statement can only\n+\tappear at the end of pattern statements.\n+\n 2014-02-03  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* config/i386/i386.c (flag_opts): Add -mlong-double-128."}, {"sha": "d896017e5d4559bf4fc232d0dcf4f2c54eef067e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=cf5b2be2a4b13c3fb806033840581cd02080375c", "patch": "@@ -1,3 +1,8 @@\n+2014-02-03  Cong Hou  <congh@google.com>\n+\n+\tPR tree-optimization/60000\n+\t* g++.dg/vect/pr60000.cc: New test.\n+\n 2014-02-03  H.J. Lu  <hongjiu.lu@intel.com>\n \n \t* gcc.target/i386/long-double-64-1.c: Verify __multf3 isn't used."}, {"sha": "fe39d6ae9a5f42a3af1d583270afaf43a0ee84bb", "filename": "gcc/testsuite/g++.dg/vect/pr60000.cc", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr60000.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr60000.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fvect%2Fpr60000.cc?ref=cf5b2be2a4b13c3fb806033840581cd02080375c", "patch": "@@ -0,0 +1,13 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-fno-tree-vrp\" } */\n+\n+void foo (bool* a, int* b)\n+{\n+  for (int i = 0; i < 1000; ++i)\n+    {\n+      a[i] = i % 2;\n+      b[i] = i % 3;\n+    }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "eb7ecb60065837d4f0284f0dec97d6a2c68beba6", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cf5b2be2a4b13c3fb806033840581cd02080375c/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=cf5b2be2a4b13c3fb806033840581cd02080375c", "patch": "@@ -6054,7 +6054,6 @@ vect_transform_loop (loop_vec_info loop_vinfo)\n \t\t     the chain.  */\n \t\t  gsi_next (&si);\n \t\t  vect_remove_stores (GROUP_FIRST_ELEMENT (stmt_info));\n- \t\t  continue;\n \t\t}\n \t      else\n \t\t{\n@@ -6064,11 +6063,13 @@ vect_transform_loop (loop_vec_info loop_vinfo)\n \t\t  unlink_stmt_vdef (store);\n \t\t  gsi_remove (&si, true);\n \t\t  release_defs (store);\n-\t\t  continue;\n \t\t}\n-\t    }\n \n-\t  if (!transform_pattern_stmt && gsi_end_p (pattern_def_si))\n+\t      /* Stores can only appear at the end of pattern statements.  */\n+\t      gcc_assert (!transform_pattern_stmt);\n+\t      pattern_def_seq = NULL;\n+\t    }\n+\t  else if (!transform_pattern_stmt && gsi_end_p (pattern_def_si))\n \t    {\n \t      pattern_def_seq = NULL;\n \t      gsi_next (&si);"}]}