{"sha": "264d951ae8c99ea72633487dc3404e8d2a4a02d8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY0ZDk1MWFlOGM5OWVhNzI2MzM0ODdkYzM0MDRlOGQyYTRhMDJkOA==", "commit": {"author": {"name": "Ilya Enkovich", "email": "ilya.enkovich@intel.com", "date": "2016-06-29T12:26:40Z"}, "committer": {"name": "Ilya Enkovich", "email": "ienkovich@gcc.gnu.org", "date": "2016-06-29T12:26:40Z"}, "message": "re PR tree-optimization/71655 (GCC trunk ICE on westmere target)\n\ngcc/\n\n\tPR tree-optimization/71655\n\t* tree-vect-stmts.c (vectorizable_comparison): Swap definition\n\ttypes when swapping operands.\n\ngcc/testsuite/\n\n\tPR tree-optimization/71655\n\t* g++.dg/pr71655.C: New test.\n\nFrom-SVN: r237846", "tree": {"sha": "68e3a1ca09b053ad3c96bcc0e7cc411e4418bac4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/68e3a1ca09b053ad3c96bcc0e7cc411e4418bac4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/264d951ae8c99ea72633487dc3404e8d2a4a02d8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/264d951ae8c99ea72633487dc3404e8d2a4a02d8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/264d951ae8c99ea72633487dc3404e8d2a4a02d8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/264d951ae8c99ea72633487dc3404e8d2a4a02d8/comments", "author": {"login": "ienkovich", "id": 18308708, "node_id": "MDQ6VXNlcjE4MzA4NzA4", "avatar_url": "https://avatars.githubusercontent.com/u/18308708?v=4", "gravatar_id": "", "url": "https://api.github.com/users/ienkovich", "html_url": "https://github.com/ienkovich", "followers_url": "https://api.github.com/users/ienkovich/followers", "following_url": "https://api.github.com/users/ienkovich/following{/other_user}", "gists_url": "https://api.github.com/users/ienkovich/gists{/gist_id}", "starred_url": "https://api.github.com/users/ienkovich/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/ienkovich/subscriptions", "organizations_url": "https://api.github.com/users/ienkovich/orgs", "repos_url": "https://api.github.com/users/ienkovich/repos", "events_url": "https://api.github.com/users/ienkovich/events{/privacy}", "received_events_url": "https://api.github.com/users/ienkovich/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5c846a81ffb1fa4464f89d2884c85a690d75adf0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5c846a81ffb1fa4464f89d2884c85a690d75adf0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5c846a81ffb1fa4464f89d2884c85a690d75adf0"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "3900362650a767c4a862ec9aba8e78fa1551c268", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=264d951ae8c99ea72633487dc3404e8d2a4a02d8", "patch": "@@ -1,3 +1,9 @@\n+2016-06-29  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\tPR tree-optimization/71655\n+\t* tree-vect-stmts.c (vectorizable_comparison): Swap definition\n+\ttypes when swapping operands.\n+\n 2016-06-29  Martin Liska  <mliska@suse.cz>\n \n \tPR middle-end/71585"}, {"sha": "6801c5fb90621889854b9d39e6ce39e4dfb2a645", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=264d951ae8c99ea72633487dc3404e8d2a4a02d8", "patch": "@@ -1,3 +1,8 @@\n+2016-06-29  Ilya Enkovich  <ilya.enkovich@intel.com>\n+\n+\tPR tree-optimization/71655\n+\t* g++.dg/pr71655.C: New test.\n+\n 2016-06-29  Martin Liska  <mliska@suse.cz>\n \n \t* gcc.dg/pr71585.c: New test."}, {"sha": "8ed33711c36501d668aaebed522fd602f4258c96", "filename": "gcc/testsuite/g++.dg/pr71655.C", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr71655.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr71655.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr71655.C?ref=264d951ae8c99ea72633487dc3404e8d2a4a02d8", "patch": "@@ -0,0 +1,28 @@\n+// PR tree-optimization/71655\n+// { dg-do compile }\n+// { dg-options \"-O3 -std=c++11\" }\n+// { dg-additional-options \"-msse4\" { target i?86-*-* x86_64-*-* } }\n+\n+#include <functional>\n+#include <valarray>\n+extern int var_16, le_s5, le_s6, le_s9;\n+std::array<std::array<std::array<long, 8>, 4>, 24> v4;\n+extern std::array<std::array<int, 48>, 18> v15;\n+\n+void fn1() {\n+  for (int k0 = 0;;)\n+    for (int i1 = 0;;)\n+      for (int j1 = 0; j1 < le_s9; j1 = j1 + 1) {\n+\tstd::valarray<std::valarray<short>> v15_;\n+        for (; le_s5;) {\n+\t  std::array<std::array<std::array<int, 3>, 48>, 18> v16;\n+          for (int k2 = 0;; k2 = 1)\n+            for (int l2 = 2; l2 < 6; l2 = l2 + 1)\n+              for (int k3 = 0; le_s6;)\n+                for (int i4 = 0; i4 < le_s9; i4 = i4 + 1)\n+                  *(i4 + (*v16.begin())[k3].begin()) =\n+\t\t    (v15[k2][l2] || var_16) >\n+\t\t    unsigned(i1 <= (*v4.begin()).at(k0).at(j1));\n+        }\n+      }\n+}"}, {"sha": "c41550d4a1b403bd63150392dc2239b62e15aa61", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/264d951ae8c99ea72633487dc3404e8d2a4a02d8/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=264d951ae8c99ea72633487dc3404e8d2a4a02d8", "patch": "@@ -7858,12 +7858,14 @@ vectorizable_comparison (gimple *stmt, gimple_stmt_iterator *gsi,\n \t  bitop1 = BIT_NOT_EXPR;\n \t  bitop2 = BIT_AND_EXPR;\n \t  std::swap (rhs1, rhs2);\n+\t  std::swap (dts[0], dts[1]);\n \t}\n       else if (code == LE_EXPR)\n \t{\n \t  bitop1 = BIT_NOT_EXPR;\n \t  bitop2 = BIT_IOR_EXPR;\n \t  std::swap (rhs1, rhs2);\n+\t  std::swap (dts[0], dts[1]);\n \t}\n       else\n \t{"}]}