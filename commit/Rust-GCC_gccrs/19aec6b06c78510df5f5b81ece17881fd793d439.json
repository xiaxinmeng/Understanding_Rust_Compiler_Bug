{"sha": "19aec6b06c78510df5f5b81ece17881fd793d439", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTlhZWM2YjA2Yzc4NTEwZGY1ZjViODFlY2UxNzg4MWZkNzkzZDQzOQ==", "commit": {"author": {"name": "Ira Rosen", "email": "irar@il.ibm.com", "date": "2008-04-10T05:51:59Z"}, "committer": {"name": "Ira Rosen", "email": "irar@gcc.gnu.org", "date": "2008-04-10T05:51:59Z"}, "message": "re PR tree-optimization/35821 (Internal compiler error: segmentation fault)\n\n\tPR tree-optimization/35821\n\t* tree-vect-transform.c (vect_create_data_ref_ptr): Add check that\n\tNEW_STMT_LIST is not NULL.\n\nFrom-SVN: r134162", "tree": {"sha": "6e3b8f33cb99d6a7acb6ad066042776276f0ba80", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6e3b8f33cb99d6a7acb6ad066042776276f0ba80"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/19aec6b06c78510df5f5b81ece17881fd793d439", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19aec6b06c78510df5f5b81ece17881fd793d439", "html_url": "https://github.com/Rust-GCC/gccrs/commit/19aec6b06c78510df5f5b81ece17881fd793d439", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/19aec6b06c78510df5f5b81ece17881fd793d439/comments", "author": {"login": "irar2", "id": 16818592, "node_id": "MDQ6VXNlcjE2ODE4NTky", "avatar_url": "https://avatars.githubusercontent.com/u/16818592?v=4", "gravatar_id": "", "url": "https://api.github.com/users/irar2", "html_url": "https://github.com/irar2", "followers_url": "https://api.github.com/users/irar2/followers", "following_url": "https://api.github.com/users/irar2/following{/other_user}", "gists_url": "https://api.github.com/users/irar2/gists{/gist_id}", "starred_url": "https://api.github.com/users/irar2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/irar2/subscriptions", "organizations_url": "https://api.github.com/users/irar2/orgs", "repos_url": "https://api.github.com/users/irar2/repos", "events_url": "https://api.github.com/users/irar2/events{/privacy}", "received_events_url": "https://api.github.com/users/irar2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ef14b9f86db8238113d77f87bda11b5db4037021", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ef14b9f86db8238113d77f87bda11b5db4037021", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ef14b9f86db8238113d77f87bda11b5db4037021"}], "stats": {"total": 66, "additions": 64, "deletions": 2}, "files": [{"sha": "8daa766967912d84b68299e83dc9fa35527982fb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=19aec6b06c78510df5f5b81ece17881fd793d439", "patch": "@@ -1,3 +1,9 @@\n+2008-04-10  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/35821\n+\t* tree-vect-transform.c (vect_create_data_ref_ptr): Add check that\n+\tNEW_STMT_LIST is not NULL.\n+\n 2008-04-09  David Edelsohn  <edelsohn@gnu.org>\n \n \tPR libstdc++/35597"}, {"sha": "1eab06bf7783daef6033d013941aff2063bc5847", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=19aec6b06c78510df5f5b81ece17881fd793d439", "patch": "@@ -1,3 +1,9 @@\n+2008-04-10  Ira Rosen  <irar@il.ibm.com>\n+\n+\tPR tree-optimization/35821\n+\t* gcc.dg/vect/pr35821-altivec.c: New.\n+\t* gcc.dg/vect/pr35821-spu.c: New.\n+\n 2008-04-09  Andy Hutchinson  <hutchinsonandy@aim.com>\n \n \tPR testsuite/34894"}, {"sha": "79fa926ec6791bc8df2ab045011bbb74751f0d51", "filename": "gcc/testsuite/gcc.dg/vect/pr35821-altivec.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr35821-altivec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr35821-altivec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr35821-altivec.c?ref=19aec6b06c78510df5f5b81ece17881fd793d439", "patch": "@@ -0,0 +1,24 @@\n+/* { dg-do compile { target { powerpc_altivec_ok } } } */\n+\n+#include \"altivec.h\"\n+\n+void\n+foo (float f_gain1, int n_tail, float * __restrict__ f_in_hptr,\n+     float * __restrict__ f_out_hptr)\n+{\n+  int i;\n+  vector float *v_f_in_hptr, *v_f_out_hptr;\n+\n+  f_in_hptr = ( float* )v_f_in_hptr;\n+  f_out_hptr = ( float* )v_f_out_hptr;\n+\n+  for( i = 0 ; i < n_tail ; i++ ) {\n+   f_out_hptr[0] = f_in_hptr[0] * f_gain1;\n+   f_in_hptr++;\n+   f_out_hptr++;\n+  }\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */\n+"}, {"sha": "4cc255f07ee606ca90540b106b9ccde2d713a3a5", "filename": "gcc/testsuite/gcc.dg/vect/pr35821-spu.c", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr35821-spu.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr35821-spu.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fpr35821-spu.c?ref=19aec6b06c78510df5f5b81ece17881fd793d439", "patch": "@@ -0,0 +1,22 @@\n+/* { dg-do compile { target { spu-*-* } } } */\n+\n+void\n+foo (float f_gain1, int n_tail, float * __restrict__ f_in_hptr,\n+     float * __restrict__ f_out_hptr)\n+{\n+  int i;\n+  __attribute__((__spu_vector__)) float *v_f_in_hptr, *v_f_out_hptr;\n+\n+  f_in_hptr = ( float* )v_f_in_hptr;\n+  f_out_hptr = ( float* )v_f_out_hptr;\n+\n+  for( i = 0 ; i < n_tail ; i++ ) {\n+   f_out_hptr[0] = f_in_hptr[0] * f_gain1;\n+   f_in_hptr++;\n+   f_out_hptr++;\n+  }\n+}\n+\n+/* { dg-final { scan-tree-dump-times \"vectorized 1 loops\" 1 \"vect\" } } */\n+/* { dg-final { cleanup-tree-dump \"vect\" } } */\n+"}, {"sha": "6168fdab74d9dfb84c87fd7c5f8145cc0018d455", "filename": "gcc/tree-vect-transform.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftree-vect-transform.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/19aec6b06c78510df5f5b81ece17881fd793d439/gcc%2Ftree-vect-transform.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-transform.c?ref=19aec6b06c78510df5f5b81ece17881fd793d439", "patch": "@@ -1102,8 +1102,12 @@ vect_create_data_ref_ptr (tree stmt, struct loop *at_loop,\n   new_temp = vect_create_addr_base_for_vector_ref (stmt, &new_stmt_list,\n                                                    offset, loop);\n   pe = loop_preheader_edge (loop);\n-  new_bb = bsi_insert_on_edge_immediate (pe, new_stmt_list);\n-  gcc_assert (!new_bb);\n+  if (new_stmt_list)\n+    {\n+      new_bb = bsi_insert_on_edge_immediate (pe, new_stmt_list);\n+      gcc_assert (!new_bb);\n+    }\n+\n   *initial_address = new_temp;\n \n   /* Create: p = (vectype *) initial_base  */"}]}