{"sha": "500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTAwZGM5YTZjMzM1ZmJhOWJlMGMyYWE5YzZjNDg5YjdlMDljODQwMA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2015-09-03T14:35:43Z"}, "committer": {"name": "Jonathan Wakely", "email": "redi@gcc.gnu.org", "date": "2015-09-03T14:35:43Z"}, "message": "Add concept checks to std::next and std::prev.\n\n\tPR libstdc++/62039\n\t* include/bits/stl_iterator_base_funcs.h (next, prev): Add concept\n\tchecks.\n\t* testsuite/24_iterators/operations/prev_neg.cc: New.\n\t* testsuite/24_iterators/operations/next_neg.cc: New.\n\nFrom-SVN: r227447", "tree": {"sha": "c63c05ed1c41f92bf84d643fc7da223d230bd540", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c63c05ed1c41f92bf84d643fc7da223d230bd540"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "html_url": "https://github.com/Rust-GCC/gccrs/commit/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "42ec4ec863b784b6d03093929a0b6a82ad544d9d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/42ec4ec863b784b6d03093929a0b6a82ad544d9d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/42ec4ec863b784b6d03093929a0b6a82ad544d9d"}], "stats": {"total": 98, "additions": 98, "deletions": 0}, "files": [{"sha": "099863ddafcc70ba348c7a6da17289f893e003cf", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "patch": "@@ -1,3 +1,11 @@\n+2015-09-03  Jonathan Wakely  <jwakely@redhat.com>\n+\n+\tPR libstdc++/62039\n+\t* include/bits/stl_iterator_base_funcs.h (next, prev): Add concept\n+\tchecks.\n+\t* testsuite/24_iterators/operations/prev_neg.cc: New.\n+\t* testsuite/24_iterators/operations/next_neg.cc: New.\n+\n 2015-09-03  Sebastian Huber  <sebastian.huber@embedded-brains.de>\n \n \t* testsuite/18_support/pthread_guard.cc: Add *-*-rtems* target"}, {"sha": "0f773292b66a9685bc3d5dbb516d11a77d085504", "filename": "libstdc++-v3/include/bits/stl_iterator_base_funcs.h", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_funcs.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_funcs.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fstl_iterator_base_funcs.h?ref=500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "patch": "@@ -205,6 +205,9 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     next(_ForwardIterator __x, typename\n \t iterator_traits<_ForwardIterator>::difference_type __n = 1)\n     {\n+      // concept requirements\n+      __glibcxx_function_requires(_ForwardIteratorConcept<\n+\t\t\t\t  _ForwardIterator>)\n       std::advance(__x, __n);\n       return __x;\n     }\n@@ -214,6 +217,9 @@ _GLIBCXX_BEGIN_NAMESPACE_VERSION\n     prev(_BidirectionalIterator __x, typename\n \t iterator_traits<_BidirectionalIterator>::difference_type __n = 1) \n     {\n+      // concept requirements\n+      __glibcxx_function_requires(_BidirectionalIteratorConcept<\n+\t\t\t\t  _BidirectionalIterator>)\n       std::advance(__x, -__n);\n       return __x;\n     }"}, {"sha": "881307eb05b5e41a52a983945f18d905494d8327", "filename": "libstdc++-v3/testsuite/24_iterators/operations/next_neg.cc", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fnext_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fnext_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fnext_neg.cc?ref=500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "patch": "@@ -0,0 +1,42 @@\n+// Copyright (C) 2015 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++11 -D_GLIBCXX_CONCEPT_CHECKS\" }\n+// { dg-do compile }\n+\n+#include <iterator>\n+\n+struct X {};\n+\n+namespace std\n+{\n+  template<>\n+    struct iterator_traits<const X*> : iterator_traits<X*>\n+    {\n+      using iterator_category = input_iterator_tag;\n+      using reference = const X&;\n+      using pointer = const X*;\n+    };\n+}\n+\n+void\n+test01()\n+{\n+  const X array[1] = { };\n+  std::next(array);\n+  // { dg-error \"input_iterator\" \"\" { target *-*-* } 220 }\n+}"}, {"sha": "513e0e80b0bd08ef2dcb611414cfdfe64a35c123", "filename": "libstdc++-v3/testsuite/24_iterators/operations/prev_neg.cc", "status": "added", "additions": 42, "deletions": 0, "changes": 42, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fprev_neg.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/500dc9a6c335fba9be0c2aa9c6c489b7e09c8400/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fprev_neg.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F24_iterators%2Foperations%2Fprev_neg.cc?ref=500dc9a6c335fba9be0c2aa9c6c489b7e09c8400", "patch": "@@ -0,0 +1,42 @@\n+// Copyright (C) 2015 Free Software Foundation, Inc.\n+//\n+// This file is part of the GNU ISO C++ Library.  This library is free\n+// software; you can redistribute it and/or modify it under the\n+// terms of the GNU General Public License as published by the\n+// Free Software Foundation; either version 3, or (at your option)\n+// any later version.\n+\n+// This library is distributed in the hope that it will be useful,\n+// but WITHOUT ANY WARRANTY; without even the implied warranty of\n+// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+// GNU General Public License for more details.\n+\n+// You should have received a copy of the GNU General Public License along\n+// with this library; see the file COPYING3.  If not see\n+// <http://www.gnu.org/licenses/>.\n+\n+// { dg-options \"-std=gnu++11 -D_GLIBCXX_CONCEPT_CHECKS\" }\n+// { dg-do compile }\n+\n+#include <iterator>\n+\n+struct Y {};\n+\n+namespace std\n+{\n+  template<>\n+    struct iterator_traits<const Y*> : iterator_traits<Y*>\n+    {\n+      using iterator_category = forward_iterator_tag;\n+      using reference = const Y&;\n+      using pointer = const Y*;\n+    };\n+}\n+\n+void\n+test02()\n+{\n+  const Y array[1] = { };\n+  std::prev(array + 1);\n+  // { dg-error \"forward_iterator\" \"\" { target *-*-* } 220 }\n+}"}]}