{"sha": "09fa6acd8d96013cf97046b273642fdefeef7559", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDlmYTZhY2Q4ZDk2MDEzY2Y5NzA0NmIyNzM2NDJmZGVmZWVmNzU1OQ==", "commit": {"author": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2020-09-04T08:56:59Z"}, "committer": {"name": "Andrea Corallo", "email": "andrea.corallo@arm.com", "date": "2020-09-04T12:16:52Z"}, "message": "vec: dead code removal in tree-vect-loop.c\n\ngcc/ChangeLog\n\n2020-09-04  Andrea Corallo  <andrea.corallo@arm.com>\n\n\t* tree-vect-loop.c (vect_estimate_min_profitable_iters): Remove\n\tdead code as LOOP_VINFO_USING_PARTIAL_VECTORS_P (loop_vinfo) is\n\talways verified.", "tree": {"sha": "7df357800325ef01cc78697599af98efce3b7205", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7df357800325ef01cc78697599af98efce3b7205"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/09fa6acd8d96013cf97046b273642fdefeef7559", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09fa6acd8d96013cf97046b273642fdefeef7559", "html_url": "https://github.com/Rust-GCC/gccrs/commit/09fa6acd8d96013cf97046b273642fdefeef7559", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/09fa6acd8d96013cf97046b273642fdefeef7559/comments", "author": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "committer": {"login": "AndreaCorallo", "id": 6765576, "node_id": "MDQ6VXNlcjY3NjU1NzY=", "avatar_url": "https://avatars.githubusercontent.com/u/6765576?v=4", "gravatar_id": "", "url": "https://api.github.com/users/AndreaCorallo", "html_url": "https://github.com/AndreaCorallo", "followers_url": "https://api.github.com/users/AndreaCorallo/followers", "following_url": "https://api.github.com/users/AndreaCorallo/following{/other_user}", "gists_url": "https://api.github.com/users/AndreaCorallo/gists{/gist_id}", "starred_url": "https://api.github.com/users/AndreaCorallo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/AndreaCorallo/subscriptions", "organizations_url": "https://api.github.com/users/AndreaCorallo/orgs", "repos_url": "https://api.github.com/users/AndreaCorallo/repos", "events_url": "https://api.github.com/users/AndreaCorallo/events{/privacy}", "received_events_url": "https://api.github.com/users/AndreaCorallo/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2033a63cbd0aab27d3a8450b4a4a5b371d583c85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2033a63cbd0aab27d3a8450b4a4a5b371d583c85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2033a63cbd0aab27d3a8450b4a4a5b371d583c85"}], "stats": {"total": 15, "additions": 4, "deletions": 11}, "files": [{"sha": "38576382fe783a41f9f629de233d97d475cca1d4", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/09fa6acd8d96013cf97046b273642fdefeef7559/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/09fa6acd8d96013cf97046b273642fdefeef7559/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=09fa6acd8d96013cf97046b273642fdefeef7559", "patch": "@@ -4101,17 +4101,10 @@ vect_estimate_min_profitable_iters (loop_vec_info loop_vinfo,\n       if (outside_overhead > 0)\n \tmin_vec_niters = outside_overhead / saving_per_viter + 1;\n \n-      if (LOOP_VINFO_USING_PARTIAL_VECTORS_P (loop_vinfo))\n-\t{\n-\t  int threshold = (vec_inside_cost * min_vec_niters\n-\t\t\t   + vec_outside_cost\n-\t\t\t   + scalar_outside_cost);\n-\t  min_profitable_estimate = threshold / scalar_single_iter_cost + 1;\n-\t}\n-      else\n-\tmin_profitable_estimate = (min_vec_niters * assumed_vf\n-\t\t\t\t   + peel_iters_prologue\n-\t\t\t\t   + peel_iters_epilogue);\n+      int threshold = (vec_inside_cost * min_vec_niters\n+\t\t       + vec_outside_cost\n+\t\t       + scalar_outside_cost);\n+      min_profitable_estimate = threshold / scalar_single_iter_cost + 1;\n     }\n   else\n     {"}]}