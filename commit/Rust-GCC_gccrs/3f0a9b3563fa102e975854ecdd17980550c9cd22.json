{"sha": "3f0a9b3563fa102e975854ecdd17980550c9cd22", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2YwYTliMzU2M2ZhMTAyZTk3NTg1NGVjZGQxNzk4MDU1MGM5Y2QyMg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2001-05-16T09:34:24Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2001-05-16T09:34:24Z"}, "message": "init.c (member_init_ok_or_else): Take a tree rather than string for name.\n\ncp:\n\t* init.c (member_init_ok_or_else): Take a tree rather than\n\tstring for name.\n\t(expand_member_init): Adjust.\ntestsuite:\n\t* g++.pt/inherit2.C: Remove XFAIL.\n\t* g++.pt/crash66.C: New test.\n\nFrom-SVN: r42142", "tree": {"sha": "3763ba89d727eec4a2a351db78494d45942e5b90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3763ba89d727eec4a2a351db78494d45942e5b90"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3f0a9b3563fa102e975854ecdd17980550c9cd22", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f0a9b3563fa102e975854ecdd17980550c9cd22", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3f0a9b3563fa102e975854ecdd17980550c9cd22", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3f0a9b3563fa102e975854ecdd17980550c9cd22/comments", "author": null, "committer": null, "parents": [{"sha": "f94557fb739bf07401ac6a1ab09e49879e945ecb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f94557fb739bf07401ac6a1ab09e49879e945ecb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f94557fb739bf07401ac6a1ab09e49879e945ecb"}], "stats": {"total": 65, "additions": 58, "deletions": 7}, "files": [{"sha": "a739534de518bb06931080e64be3b0767285adb5", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=3f0a9b3563fa102e975854ecdd17980550c9cd22", "patch": "@@ -1,3 +1,9 @@\n+2001-05-16  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* init.c (member_init_ok_or_else): Take a tree rather than\n+\tstring for name.\n+\t(expand_member_init): Adjust.\n+\n 2001-05-14  Nick Clifton  <nickc@cambridge.redhat.com>\n \n \t* decl.c (duplicate_decls): Suppress warning about duplicate"}, {"sha": "1ac6f739de8d586804c90f5b0662df2be477afeb", "filename": "gcc/cp/init.c", "status": "modified", "additions": 5, "deletions": 5, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Fcp%2Finit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Fcp%2Finit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Finit.c?ref=3f0a9b3563fa102e975854ecdd17980550c9cd22", "patch": "@@ -42,7 +42,7 @@ static tree build_vec_delete_1 PARAMS ((tree, tree, tree, special_function_kind,\n static void perform_member_init PARAMS ((tree, tree, int));\n static void sort_base_init PARAMS ((tree, tree, tree *, tree *));\n static tree build_builtin_delete_call PARAMS ((tree));\n-static int member_init_ok_or_else PARAMS ((tree, tree, const char *));\n+static int member_init_ok_or_else PARAMS ((tree, tree, tree));\n static void expand_virtual_init PARAMS ((tree, tree));\n static tree sort_member_init PARAMS ((tree, tree));\n static tree initializing_context PARAMS ((tree));\n@@ -1043,19 +1043,19 @@ static int\n member_init_ok_or_else (field, type, member_name)\n      tree field;\n      tree type;\n-     const char *member_name;\n+     tree member_name;\n {\n   if (field == error_mark_node)\n     return 0;\n   if (field == NULL_TREE || initializing_context (field) != type)\n     {\n-      cp_error (\"class `%T' does not have any field named `%s'\", type,\n+      cp_error (\"class `%T' does not have any field named `%D'\", type,\n \t\tmember_name);\n       return 0;\n     }\n   if (TREE_STATIC (field))\n     {\n-      cp_error (\"field `%#D' is static; only point of initialization is its declaration\",\n+      cp_error (\"field `%#D' is static; the only point of initialization is its definition\",\n \t\tfield);\n       return 0;\n     }\n@@ -1162,7 +1162,7 @@ expand_member_init (exp, name, init)\n     try_member:\n       field = lookup_field (type, name, 1, 0);\n \n-      if (! member_init_ok_or_else (field, type, IDENTIFIER_POINTER (name)))\n+      if (! member_init_ok_or_else (field, type, name))\n \treturn NULL_TREE;\n \n       init = build_tree_list (field, init);"}, {"sha": "9793562676b728c20c628414456df138ae6cbf3f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=3f0a9b3563fa102e975854ecdd17980550c9cd22", "patch": "@@ -1,3 +1,8 @@\n+2001-05-16  Nathan Sidwell  <nathan@codesourcery.com>\n+\n+\t* g++.pt/inherit2.C: Remove XFAIL.\n+\t* g++.pt/crash66.C: New test.\n+\n 2001-05-15  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* g++.old-deja/g++.robertl/eb27.C: Convert."}, {"sha": "5bbac5e196d7eec70b73d3020f15652fef9afb9b", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash66.C", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash66.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash66.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash66.C?ref=3f0a9b3563fa102e975854ecdd17980550c9cd22", "patch": "@@ -0,0 +1,40 @@\n+// Build don't link:\n+// \n+// Copyright (C) 2001 Free Software Foundation, Inc.\n+// Contributed by Nathan Sidwell 7 May 2001 <nathan@codesourcery.com>\n+\n+// Bug 2525. We ICEd when a namespace scope template was erroneously\n+// given as a base member init.\n+\n+namespace N1\n+{\n+  template<typename T>\n+  struct B\n+  {\n+    B (T);\n+  };\n+  \n+  template<typename T>\n+  struct D : B<T>\n+  {\n+    D (T r)\n+      : B (r)  // ERROR - no field named B\n+    {}\n+  };\n+}\n+\n+template<typename T>\n+struct D1 : N1::B<T>\n+{\n+  D1 (T r)\n+    : N1::B<T> (r)\n+  {}\n+};\n+\n+template<typename T>\n+struct D2 : N1::B<T>\n+{\n+  D2 (T r)\n+    : N1::B (r) // ERROR - no field named N1::B\n+  {}\n+};"}, {"sha": "5198a6436e2bb8469cede67aab4e92d68063bebf", "filename": "gcc/testsuite/g++.old-deja/g++.pt/inherit2.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finherit2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3f0a9b3563fa102e975854ecdd17980550c9cd22/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finherit2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Finherit2.C?ref=3f0a9b3563fa102e975854ecdd17980550c9cd22", "patch": "@@ -1,7 +1,7 @@\n // Test that we warn about unqualified references to implicit typenames.\n-// Bug: g++ is confused by the binding for ::AN and crashes.\n+\n // Special g++ Options:\n-// excess errors test - XFAIL *-*-*\n+// Build don't link:\n \n template <class T> struct A {\n   struct AA { };"}]}