{"sha": "d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDM2MDZlZTNlYTZhOGEzMDg0NGY5OTdhYWM2MWI0YTFlY2QzMDI0Mg==", "commit": {"author": {"name": "Jocelyn Mayer", "email": "l_indien@magic.fr", "date": "2016-06-16T16:09:30Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2016-06-16T16:09:30Z"}, "message": "driver-i386.c (host_detect_local_cpu): Set PROCESSOR_K8 for signature_CENTAUR_ebx with has_longmode.\n\n\t* config/i386/driver-i386.c (host_detect_local_cpu): Set\n\tPROCESSOR_K8 for signature_CENTAUR_ebx with has_longmode.\n\t<case PROCESSOR_K8>: Pass nano-3000, nano, eden-x2 or k8 for\n\tsignature_CENTAUR_ebx.\n\t* config/i386/i386.c (ix86_option_override_internal): Add\n\tdefinitions for VIA c7, samuel-2, nehemiah, esther, eden-x2, eden-x4,\n\tnano, nano-1000, nano-2000, nano-3000, nano-x2 and nano-x4.\n\t* doc/invoke.texi: Document new VIA -march entries.\n\nFrom-SVN: r237534", "tree": {"sha": "6ccba83a49f36e51ac681471fc05bae3baee5316", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6ccba83a49f36e51ac681471fc05bae3baee5316"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/comments", "author": null, "committer": null, "parents": [{"sha": "68fa96d6257baa572dad70a23259670be1542efb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68fa96d6257baa572dad70a23259670be1542efb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68fa96d6257baa572dad70a23259670be1542efb"}], "stats": {"total": 136, "additions": 127, "deletions": 9}, "files": [{"sha": "5215b801a6b20b440841422b74c2c4cba508b167", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "patch": "@@ -1,3 +1,14 @@\n+2016-06-16  Jocelyn Mayer  <l_indien@magic.fr>\n+\n+\t* config/i386/driver-i386.c (host_detect_local_cpu): Set\n+\tPROCESSOR_K8 for signature_CENTAUR_ebx with has_longmode.\n+\t<case PROCESSOR_K8>: Pass nano-3000, nano, eden-x2 or k8 for\n+\tsignature_CENTAUR_ebx.\n+\t* config/i386/i386.c (ix86_option_override_internal): Add\n+\tdefinitions for VIA c7, samuel-2, nehemiah, esther, eden-x2, eden-x4,\n+\tnano, nano-1000, nano-2000, nano-3000, nano-x2 and nano-x4.\n+\t* doc/invoke.texi: Document new VIA -march entries.\n+\n 2016-06-16  Martin Liska  <mliska@suse.cz>\n \n \t* predict.def: Add fortran loop preheader predictor."}, {"sha": "9f44ee86391befe272961412cc65e8bbcec23f93", "filename": "gcc/config/i386/driver-i386.c", "status": "modified", "additions": 26, "deletions": 3, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2Fconfig%2Fi386%2Fdriver-i386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2Fconfig%2Fi386%2Fdriver-i386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fdriver-i386.c?ref=d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "patch": "@@ -651,7 +651,9 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n \t  break;\n \n \tcase 6:\n-\t  if (model > 9 || has_longmode)\n+\t  if (has_longmode)\n+\t    processor = PROCESSOR_K8;\n+\t  else if (model > 9)\n \t    /* Use the default detection procedure.  */\n \t    ;\n \t  else if (model == 9)\n@@ -869,9 +871,30 @@ const char *host_detect_local_cpu (int argc, const char **argv)\n \tcpu = \"athlon\";\n       break;\n     case PROCESSOR_K8:\n-      if (arch && has_sse3)\n-\tcpu = \"k8-sse3\";\n+      if (arch)\n+\t{\n+\t  if (vendor == signature_CENTAUR_ebx)\n+\t    {\n+\t      if (has_sse4_1)\n+\t\t/* Nano 3000 | Nano dual / quad core | Eden X4 */\n+\t\tcpu = \"nano-3000\";\n+\t      else if (has_ssse3)\n+\t\t/* Nano 1000 | Nano 2000 */\n+\t\tcpu = \"nano\";\n+\t      else if (has_sse3)\n+\t\t/* Eden X2 */\n+\t\tcpu = \"eden-x2\";\n+\t      else\n+\t\t/* Default to k8 */\n+\t\tcpu = \"k8\";\n+\t    }\n+\t  else if (has_sse3)\n+\t    cpu = \"k8-sse3\";\n+\t  else\n+\t    cpu = \"k8\";\n+\t}\n       else\n+\t/* For -mtune, we default to -mtune=k8 */\n \tcpu = \"k8\";\n       break;\n     case PROCESSOR_AMDFAM10:"}, {"sha": "56a5b9c32962c91a1cda45b8faef3d460d6db87b", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 32, "deletions": 2, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "patch": "@@ -4783,8 +4783,15 @@ ix86_option_override_internal (bool main_args_p,\n       {\"winchip-c6\", PROCESSOR_I486, CPU_NONE, PTA_MMX},\n       {\"winchip2\", PROCESSOR_I486, CPU_NONE, PTA_MMX | PTA_3DNOW | PTA_PRFCHW},\n       {\"c3\", PROCESSOR_I486, CPU_NONE, PTA_MMX | PTA_3DNOW | PTA_PRFCHW},\n+      {\"samuel-2\", PROCESSOR_I486, CPU_NONE, PTA_MMX | PTA_3DNOW | PTA_PRFCHW},\n       {\"c3-2\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO,\n \tPTA_MMX | PTA_SSE | PTA_FXSR},\n+      {\"nehemiah\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO,\n+        PTA_MMX | PTA_SSE | PTA_FXSR},\n+      {\"c7\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO,\n+        PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3 | PTA_FXSR},\n+      {\"esther\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO,\n+        PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3 | PTA_FXSR},\n       {\"i686\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO, 0},\n       {\"pentiumpro\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO, 0},\n       {\"pentium2\", PROCESSOR_PENTIUMPRO, CPU_PENTIUMPRO, PTA_MMX | PTA_FXSR},\n@@ -4843,6 +4850,29 @@ ix86_option_override_internal (bool main_args_p,\n \tPTA_MMX | PTA_3DNOW | PTA_3DNOW_A | PTA_SSE | PTA_PRFCHW | PTA_FXSR},\n       {\"x86-64\", PROCESSOR_K8, CPU_K8,\n \tPTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_NO_SAHF | PTA_FXSR},\n+      {\"eden-x2\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3 | PTA_FXSR},\n+      {\"nano\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_FXSR},\n+      {\"nano-1000\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_FXSR},\n+      {\"nano-2000\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_FXSR},\n+      {\"nano-3000\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_SSE4_1 | PTA_FXSR},\n+      {\"nano-x2\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_SSE4_1 | PTA_FXSR},\n+      {\"eden-x4\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_SSE4_1 | PTA_FXSR},\n+      {\"nano-x4\", PROCESSOR_K8, CPU_K8,\n+        PTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n+        | PTA_SSSE3 | PTA_SSE4_1 | PTA_FXSR},\n       {\"k8\", PROCESSOR_K8, CPU_K8,\n \tPTA_64BIT | PTA_MMX | PTA_3DNOW | PTA_3DNOW_A | PTA_SSE\n \t| PTA_SSE2 | PTA_NO_SAHF | PTA_PRFCHW | PTA_FXSR},\n@@ -4888,7 +4918,7 @@ ix86_option_override_internal (bool main_args_p,\n \t| PTA_XOP | PTA_LWP | PTA_BMI | PTA_TBM | PTA_F16C\n \t| PTA_FMA | PTA_PRFCHW | PTA_FXSR | PTA_XSAVE \n \t| PTA_XSAVEOPT | PTA_FSGSBASE},\n-     {\"bdver4\", PROCESSOR_BDVER4, CPU_BDVER4,\n+      {\"bdver4\", PROCESSOR_BDVER4, CPU_BDVER4,\n \tPTA_64BIT | PTA_MMX | PTA_SSE | PTA_SSE2 | PTA_SSE3\n \t| PTA_SSE4A | PTA_CX16 | PTA_ABM | PTA_SSSE3 | PTA_SSE4_1\n \t| PTA_SSE4_2 | PTA_AES | PTA_PCLMUL | PTA_AVX | PTA_AVX2 \n@@ -4905,7 +4935,7 @@ ix86_option_override_internal (bool main_args_p,\n \t| PTA_RDRND | PTA_MOVBE | PTA_MWAITX | PTA_ADX | PTA_RDSEED\n \t| PTA_CLZERO | PTA_CLFLUSHOPT | PTA_XSAVEC | PTA_XSAVES\n \t| PTA_SHA | PTA_LZCNT | PTA_POPCNT},\n-     {\"btver1\", PROCESSOR_BTVER1, CPU_GENERIC,\n+      {\"btver1\", PROCESSOR_BTVER1, CPU_GENERIC,\n \tPTA_64BIT | PTA_MMX |  PTA_SSE  | PTA_SSE2 | PTA_SSE3\n \t| PTA_SSSE3 | PTA_SSE4A |PTA_ABM | PTA_CX16 | PTA_PRFCHW\n \t| PTA_FXSR | PTA_XSAVE},"}, {"sha": "741ccce57267f355328fb141cf9262fdf6c1e51c", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 58, "deletions": 4, "changes": 62, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d3606ee3ea6a8a30844f997aac61b4a1ecd30242/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=d3606ee3ea6a8a30844f997aac61b4a1ecd30242", "patch": "@@ -23357,13 +23357,67 @@ IDT WinChip 2 CPU, dealt in same way as i486 with additional MMX and 3DNow!@:\n instruction set support.\n \n @item c3\n-VIA C3 CPU with MMX and 3DNow!@: instruction set support.  (No scheduling is\n-implemented for this chip.)\n+VIA C3 CPU with MMX and 3DNow!@: instruction set support.\n+(No scheduling is implemented for this chip.)\n \n @item c3-2\n VIA C3-2 (Nehemiah/C5XL) CPU with MMX and SSE instruction set support.\n-(No scheduling is\n-implemented for this chip.)\n+(No scheduling is implemented for this chip.)\n+\n+@item c7\n+VIA C7 (Esther) CPU with MMX, SSE, SSE2 and SSE3 instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item samuel-2\n+VIA Eden Samuel 2 CPU with MMX and 3DNow!@: instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nehemiah\n+VIA Eden Nehemiah CPU with MMX and SSE instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item esther\n+VIA Eden Esther CPU with MMX, SSE, SSE2 and SSE3 instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item eden-x2\n+VIA Eden X2 CPU with x86-64, MMX, SSE, SSE2 and SSE3 instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item eden-x4\n+VIA Eden X4 CPU with x86-64, MMX, SSE, SSE2, SSE3, SSSE3, SSE4.1, SSE4.2,\n+AVX and AVX2 instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nano\n+Generic VIA Nano CPU with x86-64, MMX, SSE, SSE2, SSE3 and SSSE3\n+instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nano-1000\n+VIA Nano 1xxx CPU with x86-64, MMX, SSE, SSE2, SSE3 and SSSE3\n+instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nano-2000\n+VIA Nano 2xxx CPU with x86-64, MMX, SSE, SSE2, SSE3 and SSSE3\n+instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nano-3000\n+VIA Nano 3xxx CPU with x86-64, MMX, SSE, SSE2, SSE3, SSSE3 and SSE4.1\n+instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nano-x2\n+VIA Nano Dual Core CPU with x86-64, MMX, SSE, SSE2, SSE3, SSSE3 and SSE4.1\n+instruction set support.\n+(No scheduling is implemented for this chip.)\n+\n+@item nano-x4\n+VIA Nano Quad Core CPU with x86-64, MMX, SSE, SSE2, SSE3, SSSE3 and SSE4.1\n+instruction set support.\n+(No scheduling is implemented for this chip.)\n \n @item geode\n AMD Geode embedded processor with MMX and 3DNow!@: instruction set support."}]}