{"sha": "284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Mjg0ZWU0NzVlMWMyMzliOWQ3NGJkMmM1ZmM3ZGRlNDU3YzlkYjRmNw==", "commit": {"author": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-03-06T19:05:48Z"}, "committer": {"name": "Steven G. Kargl", "email": "kargl@gcc.gnu.org", "date": "2018-03-06T19:05:48Z"}, "message": "re PR fortran/56667 (Syntax error causes misleading message: \"Expected PARAMETER symbol in complex constant\")\n\n2018-03-06  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/56667\n\t* primary.c (match_sym_complex_part): Give the matcher for an implied\n\tdo-loop a chance to run.\n\n2018-03-06  Steven G. Kargl  <kargl@gcc.gnu.org>\n\n\tPR fortran/56667\n\t* gfortran.dg/implied_do_2.f90: New test.\n\t* gfortran.dg/coarray_8.f90: Update for new error message.\n\nFrom-SVN: r258281", "tree": {"sha": "e7ee124f6dfec76895093567e821277038a6f4dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e7ee124f6dfec76895093567e821277038a6f4dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/comments", "author": null, "committer": null, "parents": [{"sha": "2128896318a0e71a002566d2150a54dd6a44765d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2128896318a0e71a002566d2150a54dd6a44765d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2128896318a0e71a002566d2150a54dd6a44765d"}], "stats": {"total": 41, "additions": 37, "deletions": 4}, "files": [{"sha": "f5b990d7694d8ee8d124fda2cc51637b68273b21", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "patch": "@@ -1,3 +1,9 @@\n+2018-03-06  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/56667\n+\t* primary.c (match_sym_complex_part): Give the matcher for an implied\n+\tdo-loop a chance to run.\n+\n 2018-03-03  Harald Anlauf  <anlauf@gmx.de>\n \n \tPR fortran/71085"}, {"sha": "702010a026c6293169b6c69f5be2c643f60e7d77", "filename": "gcc/fortran/primary.c", "status": "modified", "additions": 16, "deletions": 2, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ffortran%2Fprimary.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ffortran%2Fprimary.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fprimary.c?ref=284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "patch": "@@ -1248,8 +1248,22 @@ match_sym_complex_part (gfc_expr **result)\n \n   if (sym->attr.flavor != FL_PARAMETER)\n     {\n-      gfc_error (\"Expected PARAMETER symbol in complex constant at %C\");\n-      return MATCH_ERROR;\n+      /* Give the matcher for implied do-loops a chance to run.  This yields\n+\t a much saner error message for \"write(*,*) (i, i=1, 6\" where the \n+\t right parenthesis is missing.  */\n+      char c;\n+      gfc_gobble_whitespace ();\n+      c = gfc_peek_ascii_char ();\n+      if (c == '=' || c == ',')\n+\t{\n+\t  m = MATCH_NO;\n+\t}\n+      else\n+\t{\n+\t  gfc_error (\"Expected PARAMETER symbol in complex constant at %C\");\n+\t  m = MATCH_ERROR;\n+\t}\n+      return m;\n     }\n \n   if (!sym->value)"}, {"sha": "46a329aad3eb4cb9488c3e0270014d6770f4bd29", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "patch": "@@ -1,3 +1,9 @@\n+2018-03-06  Steven G. Kargl  <kargl@gcc.gnu.org>\n+\n+\tPR fortran/56667\n+\t* gfortran.dg/implied_do_2.f90: New test.\n+\t* gfortran.dg/coarray_8.f90: Update for new error message.\n+\n 2018-03-06  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR inline-asm/84683"}, {"sha": "060f94118ac6d45abc9330bddc78a9a1200a41c8", "filename": "gcc/testsuite/gfortran.dg/coarray_8.f90", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_8.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_8.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fcoarray_8.f90?ref=284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "patch": "@@ -145,15 +145,15 @@ end module mmm4\n \n subroutine tfgh()\n   integer :: i(2)\n-  DATA i/(i, i=1,2)/ ! { dg-error \"Expected PARAMETER symbol\" }\n+  DATA i/(i, i=1,2)/ ! { dg-error \"Syntax error in DATA\" }\n   do i = 1, 5 ! { dg-error \"cannot be an array\" }\n   end do ! { dg-error \"Expecting END SUBROUTINE\" }\n end subroutine tfgh\n \n subroutine tfgh2()\n   integer, save :: x[*]\n   integer :: i(2)\n-  DATA i/(x, x=1,2)/ ! { dg-error \"Expected PARAMETER symbol\" }\n+  DATA i/(x, x=1,2)/ ! { dg-error \"Syntax error in DATA\" }\n   do x = 1, 5 ! { dg-error \"cannot be a coarray\" }\n   end do ! { dg-error \"Expecting END SUBROUTINE\" }\n end subroutine tfgh2"}, {"sha": "5078ac804d329d91ad9496d367914939926ac9df", "filename": "gcc/testsuite/gfortran.dg/implied_do_2.f90", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplied_do_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/284ee475e1c239b9d74bd2c5fc7dde457c9db4f7/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplied_do_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fimplied_do_2.f90?ref=284ee475e1c239b9d74bd2c5fc7dde457c9db4f7", "patch": "@@ -0,0 +1,7 @@\n+! { dg-do compile }\n+! PR fortran/56667\n+program error_message\n+   implicit none\n+   integer :: ir\n+   write(*,*) ( ir, ir = 1,10    ! { dg-error \"Expected a right parenthesis\" }\n+end program error_message "}]}