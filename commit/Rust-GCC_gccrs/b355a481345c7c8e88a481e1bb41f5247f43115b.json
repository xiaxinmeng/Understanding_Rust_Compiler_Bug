{"sha": "b355a481345c7c8e88a481e1bb41f5247f43115b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjM1NWE0ODEzNDVjN2M4ZTg4YTQ4MWUxYmI0MWY1MjQ3ZjQzMTE1Yg==", "commit": {"author": {"name": "Nick Clifton", "email": "nickc@cygnus.com", "date": "1998-10-27T11:13:39Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "1998-10-27T11:13:39Z"}, "message": "Appleid arm-elf contribution from Philip Blundell and merged with Catherine\nMoore's work.\n\nFrom-SVN: r23364", "tree": {"sha": "d27a78ca988127b3ee084a5ed05f914db234fcb9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d27a78ca988127b3ee084a5ed05f914db234fcb9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b355a481345c7c8e88a481e1bb41f5247f43115b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b355a481345c7c8e88a481e1bb41f5247f43115b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b355a481345c7c8e88a481e1bb41f5247f43115b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b355a481345c7c8e88a481e1bb41f5247f43115b/comments", "author": null, "committer": null, "parents": [{"sha": "74153f8e013408b48b0ef5cedee01a338890e4fb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/74153f8e013408b48b0ef5cedee01a338890e4fb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/74153f8e013408b48b0ef5cedee01a338890e4fb"}], "stats": {"total": 1465, "additions": 1241, "deletions": 224}, "files": [{"sha": "ba537b5576387da440767dc9897f633962eba99d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 54, "deletions": 0, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,3 +1,57 @@\n+Tue Oct 27 10:15:02 EST 1998  Nick Clifton  <nickc@cygnus.com>\n+\n+\tAdded support for arm-elf-linux configuration, submitted by Philip\n+\tBlundell <pb@nexus.co.uk>, and integrated this with the arm-elf\n+\tcode developed by Catherine Moore <clm@cygnus.com>.  The following\n+\tfiles are affected: \n+\n+\t* configure.in: Add arm-*-linux-gnu, armv2-*-linux and arm-*-elf\n+\ttargets. \n+\n+\t* configure: Regenerated.\n+\t\n+\t* config/arm/aout.h: Add default definitions of REGISTER_PREFIX,\n+\tUSER_LABEL_PREFIX and LOCAL_LABEL_PREFIX.  Make other macro\n+\tdefinitions conditional on their not having been already defined.\n+\n+\t* config/arm/lin1funcs.asm: Add ELF only macros to generate .size\n+\tand .type directives, and add \"(PLT)\" qualification to function\n+\tcalls.\n+\n+\t* config/arm/linux.h: Deleted.  This file is now superceeded by\n+\teither linux-elf.h or linux-aout.h.\n+\n+\t* config/arm/linux-gas.h: Define `inhibit_libc' if cross-compiling.\n+\t(CLEAR_INSN_CACHE): New macro, currently disabled (awaiting kernel\n+\tsupport).\n+\tMove definitions from old linux.h file here.\n+\t\n+\t* config/arm/elf.h: New file.  Generic ARM/ELF support.\n+\t\n+\t* config/arm/linux-aout.h: New file.  Support for Linux with a.out.\n+\t\n+\t* config/arm/linux-elf.h: New file.  Support for Linux with ELF.\n+\t\n+\t* config/arm/linux-elf26.h: New file.  Support for Linux with ELF\n+\tusing the 26bit APCS.\n+\t\n+\t* config/arm/unknown-elf.h: New file.  Support for OS'es other\n+\tthan Linux with ELF.\n+\n+\t* config/arm/t-arm-elf: New file.  makefile fragment for arm-elf\n+\tbuilds.\n+\t\n+\t* config/arm/coff.h: Include aout.h for basic assembler macros.\n+\tAdd support for -mstructure_size_boundary=<n> command line option.\n+\t\n+\t* config/arm/arm.h: Add support for -mstructure_size_boundary=<n>\n+\tcommand line option.  Make macro definitions conditional on their\n+\tnot having been already defined. \n+\n+\t* config/arm/arm.c: Add support for -mstructure_size_boundary=<n>\n+\tcommand line option.\n+\n+\t\n Tue Oct 27 08:56:46 EST 1998  Andrew MacLeod  <amacleod@cygnus.com>\n \n \t* dwarfout.c (ASM_OUTPUT_DWARF_STRING_NEWLINE): ASM_OUTPUT_DWARF_STRING"}, {"sha": "5b5ff0606c5a2635127ef31b1a74608aec6778f5", "filename": "gcc/config/arm/aout.h", "status": "modified", "additions": 60, "deletions": 29, "changes": 89, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Faout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Faout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Faout.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,5 +1,5 @@\n /* Definitions of target machine for GNU compiler, for ARM with a.out\n-   Copyright (C) 1995, 1996, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n    Contributed by Richard Earnshaw (rearnsha@armltd.co.uk).\n    \n This file is part of GNU CC.\n@@ -24,6 +24,7 @@ Boston, MA 02111-1307, USA.  */\n #endif\n \n /* The text to go at the start of the assembler file */\n+#ifndef ASM_FILE_START\n #define ASM_FILE_START(STREAM)\t\t\t\t\t\t    \\\n {\t\t\t\t\t\t\t\t\t    \\\n   fprintf (STREAM,\"%srfp\\t.req\\t%sr9\\n\", REGISTER_PREFIX, REGISTER_PREFIX); \\\n@@ -34,22 +35,35 @@ Boston, MA 02111-1307, USA.  */\n   fprintf (STREAM,\"%slr\\t.req\\t%sr14\\n\", REGISTER_PREFIX, REGISTER_PREFIX); \\\n   fprintf (STREAM,\"%spc\\t.req\\t%sr15\\n\", REGISTER_PREFIX, REGISTER_PREFIX); \\\n }\n+#endif\n \n-#define ASM_APP_ON  \"\"\n-#define ASM_APP_OFF  \"\"\n+#define ASM_APP_ON  \t\t\"\"\n+#define ASM_APP_OFF  \t\t\"\"\n \n /* Switch to the text or data segment.  */\n-#define TEXT_SECTION_ASM_OP  \".text\"\n-#define DATA_SECTION_ASM_OP  \".data\"\n-#define BSS_SECTION_ASM_OP   \".bss\"\n+#define TEXT_SECTION_ASM_OP  \t\".text\"\n+#define DATA_SECTION_ASM_OP  \t\".data\"\n+#define BSS_SECTION_ASM_OP   \t\".bss\"\n+\n+/* Note: If USER_LABEL_PREFIX or LOCAL_LABEL_PREFIX are changed,\n+   make sure that this change is reflected in the function\n+   coff_arm_is_local_label_name() in bfd/coff-arm.c  */\n+#ifndef REGISTER_PREFIX\n+#define REGISTER_PREFIX \t\"\"\n+#endif\n+\n+#ifndef USER_LABEL_PREFIX\n+#define USER_LABEL_PREFIX \t\"_\"\n+#endif\n+\n+#ifndef LOCAL_LABEL_PREFIX\n+#define LOCAL_LABEL_PREFIX \t\"\"\n+#endif\n \n-#define REGISTER_PREFIX \"\"\n-#define USER_LABEL_PREFIX \"_\"\n-#define LOCAL_LABEL_PREFIX \"\"\n \n /* The assembler's names for the registers.  */\n #ifndef REGISTER_NAMES\n-#define REGISTER_NAMES  \\\n+#define REGISTER_NAMES  \t\t\t   \\\n {\t\t\t\t                   \\\n   \"r0\", \"r1\", \"r2\", \"r3\", \"r4\", \"r5\", \"r6\", \"r7\",  \\\n   \"r8\", \"r9\", \"sl\", \"fp\", \"ip\", \"sp\", \"lr\", \"pc\",  \\\n@@ -111,25 +125,32 @@ do {\t\t\t\t\t\t\t\t\t\\\n } while (0)\n   \n /* Output a function label definition.  */\n-#define ASM_DECLARE_FUNCTION_NAME(STREAM,NAME,DECL) \\\n-    ASM_OUTPUT_LABEL(STREAM, NAME)\n+#ifndef ASM_DECLARE_FUNCTION_NAME\n+#define ASM_DECLARE_FUNCTION_NAME(STREAM,NAME,DECL) ASM_OUTPUT_LABEL (STREAM, NAME)\n+#endif\n \n+#ifndef ASM_OUTPUT_LABEL\n #define ASM_OUTPUT_LABEL(STREAM,NAME)\t\\\n do {\t\t\t\t\t\\\n   assemble_name (STREAM,NAME);\t\t\\\n   fputs (\":\\n\", STREAM);\t\t\\\n } while (0)\n-\n+#endif\n+     \n /* Output a globalising directive for a label.  */\n+#ifndef ASM_GLOBALIZE_LABEL\n #define ASM_GLOBALIZE_LABEL(STREAM,NAME)  \\\n   (fprintf (STREAM, \"\\t.global\\t\"),\t  \\\n    assemble_name (STREAM, NAME),\t  \\\n-   fputc ('\\n',STREAM))                   \\\n+   fputc ('\\n',STREAM))                   \n+#endif\n \n /* Make an internal label into a string.  */\n+#ifndef ASM_GENERATE_INTERNAL_LABEL\n #define ASM_GENERATE_INTERNAL_LABEL(STRING, PREFIX, NUM)  \\\n   sprintf (STRING, \"*%s%s%d\", LOCAL_LABEL_PREFIX, PREFIX, NUM)\n-\n+#endif\n+     \n /* Nothing special is done about jump tables */\n /* #define ASM_OUTPUT_CASE_LABEL(STREAM,PREFIX,NUM,TABLE)   */\n /* #define ASM_OUTPUT_CASE_END(STREAM,NUM,TABLE)\t    */\n@@ -196,14 +217,14 @@ do { char dstr[30];\t\t\t\t\t\t\t\\\n    output_addr_const (STREAM, (EXP)),  \\\n    fputc ('\\n', STREAM))\n \n-#define ASM_OUTPUT_BYTE(STREAM, VALUE)  \\\n+#define ASM_OUTPUT_BYTE(STREAM, VALUE)  \t\\\n   fprintf (STREAM, \"\\t.byte\\t%d\\n\", VALUE)\n \n #define ASM_OUTPUT_ASCII(STREAM, PTR, LEN)  \\\n   output_ascii_pseudo_op ((STREAM), (unsigned char *)(PTR), (LEN))\n \n /* Output a gap.  In fact we fill it with nulls.  */\n-#define ASM_OUTPUT_SKIP(STREAM, NBYTES)  \\\n+#define ASM_OUTPUT_SKIP(STREAM, NBYTES) \t\\\n    fprintf (STREAM, \"\\t.space\\t%d\\n\", NBYTES)\n \n /* Align output to a power of two.  Horrible /bin/as.  */\n@@ -219,41 +240,51 @@ do { char dstr[30];\t\t\t\t\t\t\t\\\n     } while (0)\n \n /* Output a common block */\n+#ifndef ASM_OUTPUT_COMMON\n #define ASM_OUTPUT_COMMON(STREAM, NAME, SIZE, ROUNDED)  \t\t\\\n   (fprintf (STREAM, \"\\t.comm\\t\"), \t\t     \t\t\t\\\n    assemble_name ((STREAM), (NAME)),\t\t     \t\t\t\\\n-   fprintf(STREAM, \", %d\\t%s %d\\n\", ROUNDED, ASM_COMMENT_START, SIZE))\n-\n+   fprintf (STREAM, \", %d\\t%s %d\\n\", ROUNDED, ASM_COMMENT_START, SIZE))\n+#endif\n+     \n /* Output a local common block.  /bin/as can't do this, so hack a\n-   `.space' into the bss segment.  Note that this is *bad* practice.  */\n+   `.space' into the bss segment.  Note that this is *bad* practice,\n+   which is guaranteed NOT to work since it doesn't define STATIC\n+   COMMON space but merely STATIC BSS space.  */\n+#ifndef ASM_OUTPUT_ALIGNED_LOCAL\n #define ASM_OUTPUT_ALIGNED_LOCAL(STREAM,NAME,SIZE,ALIGN)\t\t\\\n   do {\t\t\t\t\t\t\t\t\t\\\n     bss_section ();\t\t\t\t\t\t\t\\\n     ASM_OUTPUT_ALIGN (STREAM, floor_log2 (ALIGN / BITS_PER_UNIT));\t\\\n     ASM_OUTPUT_LABEL (STREAM, NAME);\t\t\t\t\t\\\n     fprintf (STREAM, \"\\t.space\\t%d\\n\", SIZE);\t\t\t\t\\\n   } while (0)\n-\n+#endif\n+     \n /* Output a zero-initialized block.  */\n+#ifndef ASM_OUTPUT_ALIGNED_BSS\n #define ASM_OUTPUT_ALIGNED_BSS(STREAM,DECL,NAME,SIZE,ALIGN) \\\n-  asm_output_aligned_bss(STREAM, DECL, NAME, SIZE, ALIGN)\n-\n+  asm_output_aligned_bss (STREAM, DECL, NAME, SIZE, ALIGN)\n+#endif\n+     \n /* Output a source line for the debugger.  */\n /* #define ASM_OUTPUT_SOURCE_LINE(STREAM,LINE) */\n \n /* Output a #ident directive.  */\n+#ifndef ASM_OUTPUT_IDENT\n #define ASM_OUTPUT_IDENT(STREAM,STRING)  \\\n-  fprintf (STREAM,\"- - - ident %s\\n\",STRING)\n-\n+  fprintf (STREAM, \"%s - - - ident %s\\n\", ASM_COMMENT_START, STRING)\n+#endif\n+     \n /* The assembler's parentheses characters.  */\n-#define ASM_OPEN_PAREN \"(\"\n-#define ASM_CLOSE_PAREN \")\"\n+#define ASM_OPEN_PAREN \t\t\"(\"\n+#define ASM_CLOSE_PAREN \t\")\"\n \n #ifndef ASM_COMMENT_START\n-#define ASM_COMMENT_START \"@\"\n+#define ASM_COMMENT_START \t\"@\"\n #endif\n \n /* This works for GAS and some other assemblers.  */\n-#define SET_ASM_OP\t\".set\"\n+#define SET_ASM_OP\t\t\".set\"\n \n #include \"arm/arm.h\""}, {"sha": "a096d8980ad88016d774198286ee4d1a8add9e59", "filename": "gcc/config/arm/arm.c", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Farm.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Farm.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.c?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -90,6 +90,10 @@ enum prog_mode_type arm_prgmode;\n /* Set by the -mfp=... option */\n char *target_fp_name = NULL;\n \n+/* Used to parse -mstructure_size_boundary command line option.  */\n+char * structure_size_string = NULL;\n+int    arm_structure_size_boundary = 32; /* Used to be 8 */\n+\n /* Nonzero if this is an \"M\" variant of the processor.  */\n int arm_fast_multiply = 0;\n \n@@ -367,6 +371,16 @@ arm_override_options ()\n     flag_schedule_insns = flag_schedule_insns_after_reload = 0;\n \n   arm_prog_mode = TARGET_APCS_32 ? PROG_MODE_PROG32 : PROG_MODE_PROG26;\n+  \n+  if (structure_size_string != NULL)\n+    {\n+      int size = strtol (structure_size_string, NULL, 0);\n+      \n+      if (size == 8 || size == 32)\n+\tarm_structure_size_boundary = size;\n+      else\n+\twarning (\"Structure size boundary can only be set to 8 or 32\");\n+    }\n }\n \f\n "}, {"sha": "6521a86ef47c893763d97f289ab097c85091d0ed", "filename": "gcc/config/arm/arm.h", "status": "modified", "additions": 18, "deletions": 2, "changes": 20, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Farm.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Farm.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -30,6 +30,9 @@ Boston, MA 02111-1307, USA.  */\n    should default to that used by the OS.\n */\n \n+#ifndef __ARM_H__\n+#define __ARM_H__\n+\n #define TARGET_CPU_arm2\t\t0x0000\n #define TARGET_CPU_arm250\t0x0000\n #define TARGET_CPU_arm3\t\t0x0000\n@@ -180,7 +183,9 @@ Unrecognized value in TARGET_CPU_DEFAULT.\n  %{m3:-D__APCS_26__} %{!m6:%{!m3:%{!m2:%(cpp_apcs_pc_default)}}}}} \\\n \"\n \n+#ifndef CPP_APCS_PC_DEFAULT_SPEC\n #define CPP_APCS_PC_DEFAULT_SPEC \"-D__APCS_26__\"\n+#endif\n \n #define CPP_FLOAT_SPEC \"\\\n %{msoft-float:\\\n@@ -381,7 +386,9 @@ extern char *target_fp_name;\n   {\"cpu=\",  & arm_select[1].string, \"Specify the name of the target CPU\" },\t\\\n   {\"arch=\", & arm_select[2].string, \"Specify the name of the target architecture\" }, \\\n   {\"tune=\", & arm_select[3].string, \"\" },\t\\\n-  {\"fp=\",   & target_fp_name, \"Specify the version of the floating point emulator\"} \\\n+  {\"fp=\",   & target_fp_name, \"Specify the version of the floating point emulator\"}, \\\n+  { \"structure-size-boundary=\", & structure_size_string, \t\\\n+      \"Specify the minumum bit alignment of structures\" } \t\\\n }\n \n /* arm_select[0] is reserved for the default cpu.  */\n@@ -579,7 +586,12 @@ extern int arm_arch4;\n /* This is for compatibility with ARMCC.  ARM SDT Reference Manual\n    (ARM DUI 0020D) page 2-20 says \"Structures are aligned on word\n    boundaries\".  */\n+#ifndef STRUCTURE_SIZE_BOUNDARY\n #define STRUCTURE_SIZE_BOUNDARY 32\n+#endif\n+     \n+/* Used when parsing command line option -mstructure_size_boundary.  */\n+extern char * structure_size_string;\n \n /* Non-zero if move instructions will actually fail to work\n    when given unaligned data.  */\n@@ -1832,6 +1844,7 @@ extern int arm_compare_fp;\n   goto JUMPTO\n \n /* Output an internal label definition.  */\n+#ifndef ASM_OUTPUT_INTERNAL_LABEL\n #define ASM_OUTPUT_INTERNAL_LABEL(STREAM, PREFIX, NUM)  \t\\\n   do                                    \t      \t   \t\\\n     {\t\t\t\t\t\t      \t   \t\\\n@@ -1848,7 +1861,8 @@ extern int arm_compare_fp;\n \tASM_GENERATE_INTERNAL_LABEL (s, (PREFIX), (NUM));   \t\\\n \tASM_OUTPUT_LABEL (STREAM, s);\t\t                \\\n     } while (0)\n-\n+#endif\n+     \n /* Output a push or a pop instruction (only used when profiling).  */\n #define ASM_OUTPUT_REG_PUSH(STREAM,REGNO) \\\n   fprintf(STREAM,\"\\tstmfd\\t%ssp!,{%s%s}\\n\", \\\n@@ -2132,3 +2146,5 @@ void aof_add_import (/* char * */);\n void aof_delete_import (/* char * */);\n void aof_dump_imports (/* FILE * */);\n #endif\n+\n+#endif /* __ARM_H__ */"}, {"sha": "6db0c1afd06398d99099663bb07acf56a952ed45", "filename": "gcc/config/arm/coff.h", "status": "modified", "additions": 25, "deletions": 29, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Fcoff.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Fcoff.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fcoff.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,6 +1,6 @@\n /* Definitions of target machine for GNU compiler,\n    for ARM with COFF obj format.\n-   Copyright (C) 1995, 1996, 1997 Free Software Foundation, Inc.\n+   Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n    Contributed by Doug Evans (dje@cygnus.com).\n    \n This file is part of GNU CC.\n@@ -21,27 +21,25 @@ the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n #include \"arm/semi.h\"\n+#include \"arm/aout.h\"\n \f\n /* Run-time Target Specification.  */\n-#undef TARGET_VERSION\n+#undef  TARGET_VERSION\n #define TARGET_VERSION fputs (\" (ARM/coff)\", stderr)\n \n-/* ??? Maybe use --with{enable?}-fpu or some such to make hardware floating\n-   point the default.  NOT --nfp!  --with{enable?} is supposed to replace it\n-   (right?), so let's stop using it.  */\n-#undef TARGET_DEFAULT\n+#undef  TARGET_DEFAULT\n #define TARGET_DEFAULT (ARM_FLAG_SOFT_FLOAT | ARM_FLAG_APCS_32)\n \n-/* ??? Is a big-endian default intended to be supported?  */\n-#if 0 /*TARGET_CPU_DEFAULT & ARM_FLAG_BIG_END*/\n-#define MULTILIB_DEFAULTS { \"mbig-endian\" }\n-#else\n-#define MULTILIB_DEFAULTS { \"mlittle-endian\" }\n-#endif\n+#define MULTILIB_DEFAULTS { \"mlittle-endian\", \"msoft-float\", \"mapcs-32\" }\n \f\n-/* ??? Does arm.h really need to set this to 32?  */\n-#undef STRUCTURE_SIZE_BOUNDARY\n-#define STRUCTURE_SIZE_BOUNDARY 8\n+/* Setting this to 32 produces more efficient code, but the value set in previous\n+   versions of this toolchain was 8, which produces more compact structures. The\n+   command line option -mstructure_size_boundary=<n> can be used to change this\n+   value.  */\n+#undef  STRUCTURE_SIZE_BOUNDARY\n+#define STRUCTURE_SIZE_BOUNDARY arm_structure_size_boundary\n+\n+extern int arm_structure_size_boundary;\n \f\n /* A C expression whose value is nonzero if IDENTIFIER with arguments ARGS\n    is a valid machine specific attribute for DECL.\n@@ -57,12 +55,6 @@ arm_valid_machine_decl_attribute (DECL, ATTRIBUTES, IDENTIFIER, ARGS)\n \n #include \"dbxcoff.h\"\n \f\n-#undef LOCAL_LABEL_PREFIX\n-#define LOCAL_LABEL_PREFIX \".\"\n-\n-#undef USER_LABEL_PREFIX\n-#define USER_LABEL_PREFIX \"\"\n-\n /* A C statement to output assembler commands which will identify the\n    object file as having been compiled with GNU CC (or another GNU\n    compiler).  */\n@@ -71,7 +63,8 @@ arm_valid_machine_decl_attribute (DECL, ATTRIBUTES, IDENTIFIER, ARGS)\n    Also, when using stabs, gcc2_compiled must be a stabs entry, not an\n    ordinary symbol, or gdb won't see it.  The stabs entry must be\n    before the N_SO in order for gdb to find it.  */\n-#define ASM_IDENTIFY_GCC(STREAM)\n+#define ASM_IDENTIFY_GCC(STREAM) \t\t\t\t\\\n+     fprintf (STREAM, \"%sgcc2_compiled.:\\n\", LOCAL_LABEL_PREFIX )\n \n /* This outputs a lot of .req's to define alias for various registers.\n    Let's try to avoid this.  */\n@@ -106,14 +99,13 @@ do {\t\t\t\t\t\t\t\t\\\n    Otherwise, the readonly data section is used.  */\n #define JUMP_TABLES_IN_TEXT_SECTION 1\n \n-#undef READONLY_DATA_SECTION\n+#undef  READONLY_DATA_SECTION\n #define READONLY_DATA_SECTION\trdata_section\n-#undef RDATA_SECTION_ASM_OP\n+#undef  RDATA_SECTION_ASM_OP\n #define RDATA_SECTION_ASM_OP\t\"\\t.section .rdata\"\n-\n-#undef CTORS_SECTION_ASM_OP\n+#undef  CTORS_SECTION_ASM_OP\n #define CTORS_SECTION_ASM_OP\t\"\\t.section .ctors,\\\"x\\\"\"\n-#undef DTORS_SECTION_ASM_OP\n+#undef  DTORS_SECTION_ASM_OP\n #define DTORS_SECTION_ASM_OP\t\"\\t.section .dtors,\\\"x\\\"\"\n \n /* A list of other sections which the compiler might be \"in\" at any\n@@ -200,8 +192,12 @@ do {\t\t\t\t\t\t\\\n #undef DO_GLOBAL_CTORS_BODY\n #undef DO_GLOBAL_DTORS_BODY\n \n-/* The ARM development system has atexit and doesn't have _exit,\n-   so define this for now.  */\n+/* If you don't define HAVE_ATEXIT, and the object file format/OS/whatever \n+   does not support constructors/destructors, then gcc implements destructors\n+   by defining its own exit function, which calls the destructors.  This gcc\n+   exit function overrides the C library's exit function, and this can cause\n+   all kinds of havoc if the C library has a non-trivial exit function.  You\n+   really don't want to use the exit function in libgcc2.c.  */\n #define HAVE_ATEXIT\n \n /* The ARM development system defines __main.  */"}, {"sha": "a8aaf76d2e780eae2daf7855797285b948a19149", "filename": "gcc/config/arm/elf.h", "status": "added", "additions": 331, "deletions": 0, "changes": 331, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Felf.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -0,0 +1,331 @@\n+/* Definitions of target machine for GNU compiler,\n+   for ARM with ELF obj format.\n+   Copyright (C) 1995, 1996, 1997, 1998 Free Software Foundation, Inc.\n+   Contributed by Philip Blundell <philb@gnu.org> and\n+   Catherine Moore <clm@cygnus.com>\n+   \n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with GNU CC; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+\n+#define OBJECT_FORMAT_ELF\n+\n+#ifndef LOCAL_LABEL_PREFIX\n+#define LOCAL_LABEL_PREFIX \".\"\n+#endif\n+\n+#ifndef USER_LABEL_PREFIX\n+#define USER_LABEL_PREFIX \"\"\n+#endif\n+\n+#ifndef CPP_PREDEFINES\n+#define CPP_PREDEFINES \"-Darm -Darm_elf -Acpu(arm) -Amachine(arm) -D__ELF__\"\n+#endif\n+\n+/* The following macro defines the format used to output the second\n+   operand of the .type assembler directive.  Different svr4 assemblers\n+   expect various different forms for this operand.  The one given here\n+   is just a default.  You may need to override it in your machine-\n+   specific tm.h file (depending upon the particulars of your assembler).  */\n+#define TYPE_OPERAND_FMT\t\"%s\"\n+\n+/* Write the extra assembler code needed to declare a function's result.\n+   Most svr4 assemblers don't require any special declaration of the\n+   result value, but there are exceptions.  */\n+#ifndef ASM_DECLARE_RESULT\n+#define ASM_DECLARE_RESULT(FILE, RESULT)\n+#endif\n+\n+/* These macros generate the special .type and .size directives which\n+   are used to set the corresponding fields of the linker symbol table\n+   entries in an ELF object file under SVR4.  These macros also output\n+   the starting labels for the relevant functions/objects.  */\n+#define TYPE_ASM_OP     \".type\"\n+#define SIZE_ASM_OP     \".size\"\n+\n+/* Write the extra assembler code needed to declare a function properly.\n+   Some svr4 assemblers need to also have something extra said about the\n+   function's return value.  We allow for that here.  */\n+#define ASM_DECLARE_FUNCTION_NAME(FILE, NAME, DECL)\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    fprintf (FILE, \"\\t%s\\t \", TYPE_ASM_OP);\t\t\t\t\\\n+    assemble_name (FILE, NAME);\t\t\t\t\t\t\\\n+    putc (',', FILE);\t\t\t\t\t\t\t\\\n+    fprintf (FILE, TYPE_OPERAND_FMT, \"function\");\t\t\t\\\n+    putc ('\\n', FILE);\t\t\t\t\t\t\t\\\n+    ASM_DECLARE_RESULT (FILE, DECL_RESULT (DECL));\t\t\t\\\n+    ASM_OUTPUT_LABEL(FILE, NAME);\t\t\t\t\t\\\n+  } while (0)\n+\n+/* Write the extra assembler code needed to declare an object properly.  */\n+#define ASM_DECLARE_OBJECT_NAME(FILE, NAME, DECL)\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    fprintf (FILE, \"\\t%s\\t \", TYPE_ASM_OP);\t\t\t\t\\\n+    assemble_name (FILE, NAME);\t\t\t\t\t\t\\\n+    putc (',', FILE);\t\t\t\t\t\t\t\\\n+    fprintf (FILE, TYPE_OPERAND_FMT, \"object\");\t\t\t\t\\\n+    putc ('\\n', FILE);\t\t\t\t\t\t\t\\\n+    size_directive_output = 0;\t\t\t\t\t\t\\\n+    if (!flag_inhibit_size_directive && DECL_SIZE (DECL))\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+\tsize_directive_output = 1;\t\t\t\t\t\\\n+\tfprintf (FILE, \"\\t%s\\t \", SIZE_ASM_OP);\t\t\t\t\\\n+\tassemble_name (FILE, NAME);\t\t\t\t\t\\\n+\tputc (',', FILE);\t\t\t\t\t\t\\\n+\tfprintf (FILE, HOST_WIDE_INT_PRINT_DEC,\t\t\t\t\\\n+\t\t int_size_in_bytes (TREE_TYPE (DECL)));\t\t\t\\\n+\tfputc ('\\n', FILE);\t\t\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\t\\\n+    ASM_OUTPUT_LABEL(FILE, NAME);\t\t\t\t\t\\\n+  } while (0)\n+\n+/* Output the size directive for a decl in rest_of_decl_compilation\n+   in the case where we did not do so before the initializer.\n+   Once we find the error_mark_node, we know that the value of\n+   size_directive_output was set\n+   by ASM_DECLARE_OBJECT_NAME when it was run for the same decl.  */\n+#define ASM_FINISH_DECLARE_OBJECT(FILE, DECL, TOP_LEVEL, AT_END)\t \\\n+do {\t\t\t\t\t\t\t\t\t \\\n+     char *name = XSTR (XEXP (DECL_RTL (DECL), 0), 0);\t\t\t \\\n+     if (!flag_inhibit_size_directive && DECL_SIZE (DECL)\t\t \\\n+         && ! AT_END && TOP_LEVEL\t\t\t\t\t \\\n+\t && DECL_INITIAL (DECL) == error_mark_node\t\t\t \\\n+\t && !size_directive_output)\t\t\t\t\t \\\n+       {\t\t\t\t\t\t\t\t \\\n+\t size_directive_output = 1;\t\t\t\t\t \\\n+\t fprintf (FILE, \"\\t%s\\t \", SIZE_ASM_OP);\t\t\t \\\n+\t assemble_name (FILE, name);\t\t\t\t\t \\\n+\t putc (',', FILE);\t\t\t\t\t\t \\\n+\t fprintf (FILE, HOST_WIDE_INT_PRINT_DEC,\t\t\t \\\n+\t\t  int_size_in_bytes (TREE_TYPE (DECL))); \t\t \\\n+\tfputc ('\\n', FILE);\t\t\t\t\t\t \\\n+       }\t\t\t\t\t\t\t\t \\\n+   } while (0)\n+\n+/* This is how to declare the size of a function.  */\n+#define ASM_DECLARE_FUNCTION_SIZE(FILE, FNAME, DECL)\t\t\t\\\n+  do {\t\t\t\t\t\t\t\t\t\\\n+    if (!flag_inhibit_size_directive)\t\t\t\t\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+        char label[256];\t\t\t\t\t\t\\\n+\tstatic int labelno;\t\t\t\t\t\t\\\n+\tlabelno ++;\t\t\t\t\t\t\t\\\n+\tASM_GENERATE_INTERNAL_LABEL (label, \"Lfe\", labelno);\t\t\\\n+\tASM_OUTPUT_INTERNAL_LABEL (FILE, \"Lfe\", labelno);\t\t\\\n+\tfprintf (FILE, \"\\t%s\\t \", SIZE_ASM_OP);\t\t\t\t\\\n+\tassemble_name (FILE, (FNAME));\t\t\t\t\t\\\n+        fprintf (FILE, \",\");\t\t\t\t\t\t\\\n+\tassemble_name (FILE, label);\t\t\t\t\t\\\n+        fprintf (FILE, \"-\");\t\t\t\t\t\t\\\n+\tassemble_name (FILE, (FNAME));\t\t\t\t\t\\\n+\tputc ('\\n', FILE);\t\t\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\t\\\n+  } while (0)\n+\n+/* Define this macro if jump tables (for `tablejump' insns) should be\n+   output in the text section, along with the assembler instructions.\n+   Otherwise, the readonly data section is used.  */\n+#define JUMP_TABLES_IN_TEXT_SECTION 1\n+\n+#ifndef ASM_SPEC\n+#define ASM_SPEC \"%{mbig-endian:-EB} %{mcpu=*:-m%*} %{march=*:-m%*} \\\n+ %{mapcs-*:-mapcs-%*} %{mthumb-interwork:-mthumb-interwork}\"\n+#endif\n+\n+#ifndef LINK_SPEC\n+#define LINK_SPEC \"%{mbig-endian:-EB} -X\"\n+#endif\n+  \n+/* Run-time Target Specification.  */\n+#ifndef TARGET_VERSION\n+#define TARGET_VERSION fputs (\" (ARM/elf)\", stderr)\n+#endif\n+\n+#ifndef TARGET_DEFAULT\n+#define TARGET_DEFAULT (ARM_FLAG_SOFT_FLOAT | ARM_FLAG_APCS_32)\n+#endif\n+\n+#ifndef MULTILIB_DEFAULTS\n+#define MULTILIB_DEFAULTS { \"mlittle-endian\", \"msoft-float\", \"mapcs-32\", \"mno-thumb-interwork\" }\n+#endif\n+\n+/* Setting this to 32 produces more efficient code, but the value set in previous\n+   versions of this toolchain was 8, which produces more compact structures. The\n+   command line option -mstructure_size_boundary=<n> can be used to change this\n+   value.  */\n+#undef  STRUCTURE_SIZE_BOUNDARY\n+#define STRUCTURE_SIZE_BOUNDARY arm_structure_size_boundary\n+\n+extern int arm_structure_size_boundary;\n+\n+/* A C expression whose value is nonzero if IDENTIFIER with arguments ARGS\n+   is a valid machine specific attribute for DECL.\n+   The attributes in ATTRIBUTES have previously been assigned to DECL.  */\n+extern int arm_valid_machine_decl_attribute ();\n+#define VALID_MACHINE_DECL_ATTRIBUTE(DECL, ATTRIBUTES, IDENTIFIER, ARGS) \\\n+arm_valid_machine_decl_attribute (DECL, ATTRIBUTES, IDENTIFIER, ARGS)\n+\f\n+\n+/* A C statement to output assembler commands which will identify the\n+   object file as having been compiled with GNU CC (or another GNU\n+   compiler).  */\n+/* Define this to NULL so we don't get anything.\n+   We have ASM_IDENTIFY_LANGUAGE.\n+   Also, when using stabs, gcc2_compiled must be a stabs entry, not an\n+   ordinary symbol, or gdb won't see it.  The stabs entry must be\n+   before the N_SO in order for gdb to find it.  */\n+#ifndef ASM_IDENTIFY_GCC\n+#define ASM_IDENTIFY_GCC(STREAM) \t\t\t\t\\\n+     fprintf (STREAM, \"%sgcc2_compiled.:\\n\", LOCAL_LABEL_PREFIX )\n+#endif\n+\n+/* This outputs a lot of .req's to define alias for various registers.\n+   Let's try to avoid this.  */\n+#ifndef ASM_FILE_START\n+#define ASM_FILE_START(STREAM) \\\n+do {\t\t\t\t\t\t\t\t\\\n+  extern char *version_string;\t\t\t\t\t\\\n+  fprintf (STREAM, \"%s Generated by gcc %s for ARM/elf\\n\",\t\\\n+\t   ASM_COMMENT_START, version_string);\t\t\t\\\n+} while (0)\n+#endif\n+     \n+/* Output an internal label definition.  */\n+#ifndef ASM_OUTPUT_INTERNAL_LABEL\n+#define ASM_OUTPUT_INTERNAL_LABEL(STREAM, PREFIX, NUM)  \t\\\n+  do                                    \t      \t   \t\\\n+    {\t\t\t\t\t\t      \t   \t\\\n+      char *s = (char *) alloca (40 + strlen (PREFIX));\t   \t\\\n+      extern int arm_target_label, arm_ccfsm_state;\t   \t\\\n+      extern rtx arm_target_insn;\t\t\t\t\\\n+\t\t\t\t\t\t           \t\\\n+      if (arm_ccfsm_state == 3 && arm_target_label == (NUM)   \t\\\n+\t&& !strcmp (PREFIX, \"L\"))\t\t\t\t\\\n+\t{\t\t\t\t\t\t\t\\\n+\t  arm_ccfsm_state = 0;\t\t\t\t        \\\n+\t  arm_target_insn = NULL;\t\t\t\t\\\n+\t}\t\t\t\t\t\t\t\\\n+\tASM_GENERATE_INTERNAL_LABEL (s, (PREFIX), (NUM));   \t\\\n+\tASM_OUTPUT_LABEL (STREAM, s);\t                \t\\\n+    } while (0)\n+#endif\n+\f\n+/* Support the ctors/dtors and other sections.  */\n+\n+/* Define the pseudo-ops used to switch to the .ctors and .dtors sections.\n+\n+   Note that we want to give these sections the SHF_WRITE attribute\n+   because these sections will actually contain data (i.e. tables of\n+   addresses of functions in the current root executable or shared library\n+   file) and, in the case of a shared library, the relocatable addresses\n+   will have to be properly resolved/relocated (and then written into) by\n+   the dynamic linker when it actually attaches the given shared library\n+   to the executing process.  (Note that on SVR4, you may wish to use the\n+   `-z text' option to the ELF linker, when building a shared library, as\n+   an additional check that you are doing everything right.  But if you do\n+   use the `-z text' option when building a shared library, you will get\n+   errors unless the .ctors and .dtors sections are marked as writable\n+   via the SHF_WRITE attribute.)  */\n+#ifndef CTORS_SECTION_ASM_OP\n+#define CTORS_SECTION_ASM_OP\t\"\\t.section\\t.ctors,\\\"aw\\\"\"\n+#endif\n+     \n+#ifndef DTORS_SECTION_ASM_OP\n+#define DTORS_SECTION_ASM_OP\t\"\\t.section\\t.dtors,\\\"aw\\\"\"\n+#endif\n+\n+/* A list of other sections which the compiler might be \"in\" at any\n+   given time.  */\n+#ifndef SUBTARGET_EXTRA_SECTIONS\n+#define SUBTARGET_EXTRA_SECTIONS\n+#endif\n+\n+#ifndef EXTRA_SECTIONS\n+#define EXTRA_SECTIONS SUBTARGET_EXTRA_SECTIONS in_ctors, in_dtors\n+#endif\n+\n+/* A list of extra section function definitions.  */\n+#ifndef SUBTARGET_EXTRA_SECTION_FUNCTIONS\n+#define SUBTARGET_EXTRA_SECTION_FUNCTIONS\n+#endif\n+\n+#ifndef EXTRA_SECTION_FUNCTIONS\n+#define EXTRA_SECTION_FUNCTIONS \t\t\\\n+  SUBTARGET_EXTRA_SECTION_FUNCTIONS\t\t\\\n+  CTORS_SECTION_FUNCTION\t\t\t\\\n+  DTORS_SECTION_FUNCTION\t\t\t\n+#endif\n+\n+#ifndef CTORS_SECTION_FUNCTION\n+#define CTORS_SECTION_FUNCTION \t\t\t\t\t\t\\\n+void\t\t\t\t\t\t\t\t\t\\\n+ctors_section ()\t\t\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  if (in_section != in_ctors)\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      fprintf (asm_out_file, \"%s\\n\", CTORS_SECTION_ASM_OP);\t\t\\\n+      in_section = in_ctors;\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+}\n+#endif\n+\n+#ifndef DTORS_SECTION_FUNCTION\n+#define DTORS_SECTION_FUNCTION \t\t\t\t\t\t\\\n+void\t\t\t\t\t\t\t\t\t\\\n+dtors_section ()\t\t\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  if (in_section != in_dtors)\t\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      fprintf (asm_out_file, \"%s\\n\", DTORS_SECTION_ASM_OP);\t\t\\\n+      in_section = in_dtors;\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+}\n+#endif\n+\f\n+/* Support the ctors/dtors sections for g++.  */\n+#ifndef INT_ASM_OP\n+#define INT_ASM_OP \t\".word\"\n+#endif\n+\n+/* A C statement (sans semicolon) to output an element in the table of\n+   global constructors.  */\n+#ifndef ASM_OUTPUT_CONSTRUCTOR\n+#define ASM_OUTPUT_CONSTRUCTOR(STREAM,NAME) \\\n+do {\t\t\t\t\t\t\\\n+  ctors_section ();\t\t\t\t\\\n+  fprintf (STREAM, \"\\t%s\\t \", INT_ASM_OP);\t\\\n+  assemble_name (STREAM, NAME);\t\t\t\\\n+  fprintf (STREAM, \"\\n\");\t\t\t\\\n+} while (0)\n+#endif\n+     \n+/* A C statement (sans semicolon) to output an element in the table of\n+   global destructors.  */\n+#ifndef ASM_OUTPUT_DESTRUCTOR\n+#define ASM_OUTPUT_DESTRUCTOR(STREAM,NAME) \\\n+do {\t\t\t\t\t\t\\\n+  dtors_section ();                   \t\t\\\n+  fprintf (STREAM, \"\\t%s\\t \", INT_ASM_OP);\t\\\n+  assemble_name (STREAM, NAME);              \t\\\n+  fprintf (STREAM, \"\\n\");\t\t\t\\\n+} while (0)\n+#endif\n+\n+#include \"arm/aout.h\"\n+\n+\n+"}, {"sha": "5baab8aa5518d17fd30bf5488bf94ac2c05c2b70", "filename": "gcc/config/arm/lib1funcs.asm", "status": "modified", "additions": 41, "deletions": 8, "changes": 49, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flib1funcs.asm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flib1funcs.asm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Flib1funcs.asm?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,7 +1,7 @@\n @ libgcc1 routines for ARM cpu.\n @ Division routines, written by Richard Earnshaw, (rearnsha@armltd.co.uk)\n \n-/* Copyright (C) 1995, 1996 Free Software Foundation, Inc.\n+/* Copyright (C) 1995, 1996, 1998 Free Software Foundation, Inc.\n \n This file is free software; you can redistribute it and/or modify it\n under the terms of the GNU General Public License as published by the\n@@ -43,6 +43,16 @@ Boston, MA 02111-1307, USA.  */\n #define RETCOND\n #endif\n \n+#ifdef __elf__\n+#define __PLT__ (PLT)\n+#define TYPE(x) .type SYM(x),function\n+#define SIZE(x) .size SYM(x), . - SYM(x)\n+#else\n+#define __PLT__\n+#define TYPE(x)\n+#define SIZE(x)\n+#endif\n+\n #ifndef __USER_LABEL_PREFIX__\n #define __USER_LABEL_PREFIX__ _\n #endif\n@@ -66,9 +76,11 @@ ip\t\t.req\tr12\n sp\t\t.req\tr13\n lr\t\t.req\tr14\n pc\t\t.req\tr15\n+\t\n \t.text\n-\t.globl SYM (__udivsi3)\n-\t.align 0\n+\t.globl\tSYM(__udivsi3)\n+\tTYPE \t(__udivsi3)\n+\t.align\t0\n \n SYM (__udivsi3):\n \tcmp\tdivisor, #0\n@@ -124,10 +136,12 @@ Lgot_result:\n \n Ldiv0:\n \tstr\tlr, [sp, #-4]!\n-\tbl\tSYM (__div0)\n+\tbl\tSYM (__div0) __PLT__\n \tmov\tr0, #0\t\t\t@ about as wrong as it could be\n \tldmia\tsp!, {pc}RETCOND\n \n+\tSIZE\t(__udivsi3)\n+\n #endif /* L_udivsi3 */\n \n #ifdef L_umodsi3\n@@ -140,8 +154,10 @@ ip\t\t.req\tr12\n sp\t\t.req\tr13\n lr\t\t.req\tr14\n pc\t\t.req\tr15\n+\t\n \t.text\n \t.globl SYM (__umodsi3)\n+\tTYPE  (__umodsi3)\n \t.align 0\n \n SYM (__umodsi3):\n@@ -210,10 +226,12 @@ Loop3:\n \n Ldiv0:\n \tstr\tlr, [sp, #-4]!\n-\tbl\tSYM (__div0)\n+\tbl\tSYM (__div0) __PLT__\n \tmov\tr0, #0\t\t\t@ about as wrong as it could be\n \tldmia\tsp!, {pc}RETCOND\n \n+\tSIZE\t(__umodsi3)\n+\n #endif /* L_umodsi3 */\n \n #ifdef L_divsi3\n@@ -226,8 +244,10 @@ ip\t\t.req\tr12\n sp\t\t.req\tr13\n lr\t\t.req\tr14\n pc\t\t.req\tr15\n+\t\n \t.text\n \t.globl SYM (__divsi3)\n+\tTYPE   (__divsi3)\n \t.align 0\n \n SYM (__divsi3):\n@@ -291,10 +311,12 @@ Lgot_result:\n \n Ldiv0:\n \tstr\tlr, [sp, #-4]!\n-\tbl\tSYM (__div0)\n+\tbl\tSYM (__div0) __PLT__\n \tmov\tr0, #0\t\t\t@ about as wrong as it could be\n \tldmia\tsp!, {pc}RETCOND\n \n+\tSIZE\t(__divsi3)\n+\n #endif /* L_divsi3 */\n \n #ifdef L_modsi3\n@@ -307,8 +329,10 @@ ip\t\t.req\tr12\n sp\t\t.req\tr13\n lr\t\t.req\tr14\n pc\t\t.req\tr15\n+\t\n \t.text\n \t.globl SYM (__modsi3)\n+\tTYPE   (__modsi3)\n \t.align 0\n \n SYM (__modsi3):\n@@ -388,38 +412,47 @@ Lgot_result:\n \n Ldiv0:\n \tstr\tlr, [sp, #-4]!\n-\tbl\tSYM (__div0)\n+\tbl\tSYM (__div0) __PLT__\n \tmov\tr0, #0\t\t\t@ about as wrong as it could be\n \tldmia\tsp!, {pc}RETCOND\n \n+\tSIZE\t(__modsi3)\n+\n #endif /* L_modsi3 */\n \n #ifdef L_dvmd_tls\n \n \t.globl SYM (__div0)\n+\tTYPE   (__div0)\n \t.align 0\n SYM (__div0):\n \tRET\tpc, lr\n \n+\tSIZE\t(__div0)\n+\t\n #endif /* L_divmodsi_tools */\n \n #ifdef L_dvmd_lnx\n @ GNU/Linux division-by zero handler.  Used in place of L_dvmd_tls\n \n #include <asm/unistd.h>\n+\t\n #define SIGFPE\t8\t\t\t@ cant use <asm/signal.h> as it\n \t\t\t\t\t@ contains too much C rubbish\n \t.globl SYM (__div0)\n+\tTYPE   (__div0)\n \t.align 0\n SYM (__div0):\n \tstmfd\tsp!, {r1, lr}\n \tswi\t__NR_getpid\n \tcmn\tr0, #1000\n-\tldmgefd\tsp!, {r1, pc}RETCOND\t@ not much we can do\n+\tldmhsfd\tsp!, {r1, pc}RETCOND\t@ not much we can do\n \tmov\tr1, #SIGFPE\n \tswi\t__NR_kill\n \tldmfd\tsp!, {r1, pc}RETCOND\n \n+\tSIZE \t(__div0)\n+\t\n #endif /* L_dvmd_lnx */\n \n /* These next two sections are here despite the fact that they contain Thumb "}, {"sha": "3a853bd9d9e3b2c02890803dadac4a84d8f34b4a", "filename": "gcc/config/arm/linux-aout.h", "status": "renamed", "additions": 12, "deletions": 27, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flinux-aout.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flinux-aout.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Flinux-aout.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,6 +1,6 @@\n-/* Definitions for ARM running Linux\n-   Copyright (C) 1993, 1994, 1997 Free Software Foundation, Inc.\n-   Adapted from ARM Linux by Russell King  <rmk92@ecs.soton.ac.uk>.\n+/* Definitions for ARM running Linux-based GNU systems using a.out.\n+   Copyright (C) 1993, 1994, 1997, 1998 Free Software Foundation, Inc.\n+   Contributed by Russell King  <rmk92@ecs.soton.ac.uk>.\n \n This file is part of GNU CC.\n \n@@ -31,7 +31,7 @@ Boston, MA 02111-1307, USA.  */\n #undef COMMENT_BEGIN\n  \n /* We default to ARM3.  */\n-#define TARGET_CPU_DEFAULT TARGET_CPU_arm3\n+#define SUBTARGET_CPU_DEFAULT TARGET_CPU_arm3\n \n #undef CPP_PREDEFINES\n #define CPP_PREDEFINES \\\n@@ -41,33 +41,18 @@ Boston, MA 02111-1307, USA.  */\n #define LIB_SPEC \\\n \t\"%{mieee-fp:-lieee} %{p:-lgmon} %{pg:-lgmon} %{!ggdb:-lc} %{ggdb:-lg}\"\n \n-#undef SIZE_TYPE\n-#define SIZE_TYPE \"unsigned int\"\n-\n-#undef PTRDIFF_TYPE\n-#define PTRDIFF_TYPE \"int\"\n-\n-#undef WCHAR_TYPE\n-#define WCHAR_TYPE \"long int\"\n-\n-#undef WCHAR_TYPE_SIZE\n-#define WCHAR_TYPE_SIZE BITS_PER_WORD\n-\n #define HANDLE_SYSV_PRAGMA\n   \n /* Run-time Target Specification.  */\n-#define TARGET_VERSION  \\\n-  fputs (\" (ARM Linux/a.out)\", stderr);\n+#define TARGET_VERSION  fputs (\" (ARM GNU/Linux with a.out)\", stderr);\n \n-/* This is used in ASM_FILE_START */\n-#define ARM_OS_NAME \"Linux\"\n-\n-/* Unsigned chars produces much better code than signed.  */\n-#define DEFAULT_SIGNED_CHAR 0\n-\n-/* Maths operation domain error number, EDOM */\n+/* \n+ * Maths operation domain error number, EDOM\n+ * We don't really want this for libc6.  However, taking it out would be\n+ * too much of a pain for now and it doesn't hurt much.\n+ */\n #define TARGET_EDOM 33\n+\n #include \"arm/aout.h\"\n \n-#undef SUBTARGET_CPP_SPEC\n-#define SUBTARGET_CPP_SPEC  \"%{posix:-D_POSIX_SOURCE}\"\n+#include \"arm/linux-gas.h\"", "previous_filename": "gcc/config/arm/linux.h"}, {"sha": "d90609303ff159377a3cf2202001d86c12a7661d", "filename": "gcc/config/arm/linux-elf.h", "status": "added", "additions": 204, "deletions": 0, "changes": 204, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flinux-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flinux-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Flinux-elf.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -0,0 +1,204 @@\n+/* Definitions for ARM running Linux-based GNU systems using ELF\n+   Copyright (C) 1993, 1994, 1997, 1998 Free Software Foundation, Inc.\n+   Contributed by Philip Blundell <philb@gnu.org>\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with this program; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+/* Run-time Target Specification.  */\n+#define TARGET_VERSION  fputs (\" (ARM GNU/Linux with ELF)\", stderr);\n+\n+/* We have libgcc2.  */\n+#define HAVE_ATEXIT\n+\n+/* Default is to use APCS-32 mode.  */\n+#ifndef SUBTARGET_DEFAULT_APCS26\n+#define TARGET_DEFAULT (ARM_FLAG_APCS_32 | ARM_FLAG_SHORT_BYTE)\n+#define SUBTARGET_EXTRA_LINK_SPEC\t\\\n+\t\" %{mapcs-26:-m elf32arm26} %{!mapcs-26:-m elf32arm}\"\n+#define SUBTARGET_EXTRA_ASM_SPEC\t\\\n+\t\" %{mapcs-26:-mapcs-26} %(!mapcs-26:-mapcs-32}\"\n+#endif\n+\n+/* Now we define the strings used to build the spec file.  */\n+#define LIB_SPEC \"%{!shared:%{!symbolic:-lc}}\"\n+\n+/* Add the compiler's crtend, and the library's crtn.  */\n+#define ENDFILE_SPEC \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} \\\n+   %{pg:gcrtn.o%s}%{!pg:crtn.o%s}\"\n+\n+#define STARTFILE_SPEC \"%{!shared:crt1.o%s} \\\n+   crti.o%s \\\n+   %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n+\n+#define LINK_SPEC \"%{h*} %{version:-v} \\\n+   %{b} %{Wl,*:%*} \\\n+   %{static:-Bstatic} \\\n+   %{shared:-shared} \\\n+   %{symbolic:-Bsymbolic} \\\n+   %{rdynamic:-export-dynamic} \\\n+   %{!dynamic-linker:-dynamic-linker /lib/ld-linux.so.2} \\\n+   -X \\\n+   %{mbig-endian:-EB}\" \\\n+   SUBTARGET_EXTRA_LINK_SPEC\n+\n+#undef  CPP_PREDEFINES\n+#define CPP_PREDEFINES \\\n+\"-Dunix -Darm -Dlinux -Asystem(unix) -Asystem(posix) -Acpu(arm) \\\n+-Amachine(arm) -D__ELF__ -Darm_elf\"\n+\n+#ifndef SUBTARGET_DEFAULT_APCS26\n+#undef  CPP_APCS_PC_DEFAULT_SPEC\n+#define CPP_APCS_PC_DEFAULT_SPEC \"-D__APCS_32__\"\n+#endif\n+\n+/* Allow #sccs in preprocessor.  */\n+#define SCCS_DIRECTIVE\n+\n+#define USER_LABEL_PREFIX \t\"\"\t/* For ELF the default is no underscores */\n+#define LOCAL_LABEL_PREFIX \t\".\"\n+\n+/* Attach a special .ident directive to the end of the file to identify\n+   the version of GCC which compiled this code.  */\n+#define IDENT_ASM_OP \t\".ident\"\n+\n+/* Output #ident as a .ident.  */\n+#define ASM_OUTPUT_IDENT(FILE, NAME) \\\n+  fprintf (FILE, \"\\t%s\\t\\\"%s\\\"\\n\", IDENT_ASM_OP, NAME);\n+  \n+#ifdef IDENTIFY_WITH_IDENT\n+#define ASM_IDENTIFY_GCC(FILE) /* nothing */\n+#define ASM_IDENTIFY_LANGUAGE(FILE)\t\t\t\\\n+ fprintf (FILE, \"\\t%s \\\"GCC (%s) %s\\\"\\n\", IDENT_ASM_OP,\t\\\n+\t lang_identify (), version_string)\n+#else\n+#define ASM_FILE_END(FILE)\t\t\t\t\t\\\n+do {\t\t\t\t \t\t\t\t\\\n+     fprintf ((FILE), \"\\t%s\\t\\\"GCC: (GNU) %s\\\"\\n\",\t\t\\\n+\t      IDENT_ASM_OP, version_string);\t\t\t\\\n+   } while (0)\n+#endif\n+\n+/* Support const sections and the ctors and dtors sections for g++.\n+   Note that there appears to be two different ways to support const\n+   sections at the moment.  You can either #define the symbol\n+   READONLY_DATA_SECTION (giving it some code which switches to the\n+   readonly data section) or else you can #define the symbols\n+   EXTRA_SECTIONS, EXTRA_SECTION_FUNCTIONS, SELECT_SECTION, and\n+   SELECT_RTX_SECTION.  We do both here just to be on the safe side.  */\n+#define USE_CONST_SECTION\t1\n+\n+/* Support for Constructors and Destructors.  */\n+#define READONLY_DATA_SECTION() const_section ()\n+\n+/* A default list of other sections which we might be \"in\" at any given\n+   time.  For targets that use additional sections (e.g. .tdesc) you\n+   should override this definition in the target-specific file which\n+   includes this file.  */\n+#define SUBTARGET_EXTRA_SECTIONS in_const,\n+\n+/* A default list of extra section function definitions.  For targets\n+   that use additional sections (e.g. .tdesc) you should override this\n+   definition in the target-specific file which includes this file.  */\n+#define SUBTARGET_EXTRA_SECTION_FUNCTIONS\tCONST_SECTION_FUNCTION\n+\n+extern void text_section ();\n+\n+#define CONST_SECTION_ASM_OP\t\".section\\t.rodata\"\n+\n+#define CONST_SECTION_FUNCTION\t\t\t\t\t\t\\\n+void\t\t\t\t\t\t\t\t\t\\\n+const_section ()\t\t\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  if (!USE_CONST_SECTION)\t\t\t\t\t\t\\\n+    text_section ();\t\t\t\t\t\t\t\\\n+  else if (in_section != in_const)\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      fprintf (asm_out_file, \"%s\\n\", CONST_SECTION_ASM_OP);\t\t\\\n+      in_section = in_const;\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+}\n+\n+/* Switch into a generic section.\n+   This is currently only used to support section attributes.\n+\n+   We make the section read-only and executable for a function decl,\n+   read-only for a const data decl, and writable for a non-const data decl.  */\n+#define ASM_OUTPUT_SECTION_NAME(FILE, DECL, NAME, RELOC) \\\n+  fprintf (FILE, \".section\\t%s,\\\"%s\\\",%%progbits\\n\", NAME, \\\n+\t   (DECL) && TREE_CODE (DECL) == FUNCTION_DECL ? \"ax\" : \\\n+\t   (DECL) && DECL_READONLY_SECTION (DECL, RELOC) ? \"a\" : \"aw\")\n+\n+/* A C statement or statements to switch to the appropriate\n+   section for output of DECL.  DECL is either a `VAR_DECL' node\n+   or a constant of some sort.  RELOC indicates whether forming\n+   the initial value of DECL requires link-time relocations.  */\n+#define SELECT_SECTION(DECL,RELOC)\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  if (TREE_CODE (DECL) == STRING_CST)\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      if (! flag_writable_strings)\t\t\t\t\t\\\n+\tconst_section ();\t\t\t\t\t\t\\\n+      else\t\t\t\t\t\t\t\t\\\n+\tdata_section ();\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  else if (TREE_CODE (DECL) == VAR_DECL)\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\t\\\n+      if ((flag_pic && RELOC)\t\t\t\t\t\t\\\n+\t  || !TREE_READONLY (DECL) || TREE_SIDE_EFFECTS (DECL)\t\t\\\n+\t  || !DECL_INITIAL (DECL)\t\t\t\t\t\\\n+\t  || (DECL_INITIAL (DECL) != error_mark_node\t\t\t\\\n+\t      && !TREE_CONSTANT (DECL_INITIAL (DECL))))\t\t\t\\\n+\tdata_section ();\t\t\t\t\t\t\\\n+      else\t\t\t\t\t\t\t\t\\\n+\tconst_section ();\t\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\t\\\n+  else\t\t\t\t\t\t\t\t\t\\\n+    const_section ();\t\t\t\t\t\t\t\\\n+}\n+\n+/* A C statement or statements to switch to the appropriate\n+   section for output of RTX in mode MODE.  RTX is some kind\n+   of constant in RTL.  The argument MODE is redundant except\n+   in the case of a `const_int' rtx.  Currently, these always\n+   go into the const section.  */\n+#define SELECT_RTX_SECTION(MODE,RTX) const_section ()\n+\n+/* On svr4, we *do* have support for the .init and .fini sections, and we\n+   can put stuff in there to be executed before and after `main'.  We let\n+   crtstuff.c and other files know this by defining the following symbols.\n+   The definitions say how to change sections to the .init and .fini\n+   sections.  This is the same for all known svr4 assemblers.  */\n+#define INIT_SECTION_ASM_OP\t\".section\\t.init\"\n+#define FINI_SECTION_ASM_OP\t\".section\\t.fini\"\n+\n+\n+/* This is how we tell the assembler that a symbol is weak.  */\n+#define ASM_WEAKEN_LABEL(FILE,NAME) \\\n+  do { fputs (\"\\t.weak\\t\", FILE); assemble_name (FILE, NAME); \\\n+       fputc ('\\n', FILE); } while (0)\n+\n+/* This is how we tell the assembler that two symbols have the same value.  */\n+\n+#define ASM_OUTPUT_DEF(FILE,NAME1,NAME2) \\\n+  do { assemble_name (FILE, NAME1); \t \\\n+       fputs (\" = \", FILE);\t\t \\\n+       assemble_name (FILE, NAME2);\t \\\n+       fputc ('\\n', FILE); } while (0)\n+\n+#include \"arm/elf.h\"\n+#include \"arm/linux-gas.h\""}, {"sha": "72567f3915831b167e890d84ba42da2abb07b7c2", "filename": "gcc/config/arm/linux-gas.h", "status": "modified", "additions": 61, "deletions": 7, "changes": 68, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flinux-gas.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Flinux-gas.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Flinux-gas.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,5 +1,6 @@\n-/* Definitions of target machine for GNU compiler.  ARM Linux version.\n-   Copyright (C) 1997 Free Software Foundation, Inc.\n+/* Definitions of target machine for GNU compiler.\n+   ARM Linux-based GNU systems version.\n+   Copyright (C) 1997, 1998 Free Software Foundation, Inc.\n    Contributed by Russell King  <rmk92@ecs.soton.ac.uk>.\n \n This file is part of GNU CC.\n@@ -19,15 +20,68 @@ along with this program; see the file COPYING.  If not, write to\n the Free Software Foundation, 59 Temple Place - Suite 330,\n Boston, MA 02111-1307, USA.  */\n \n-/* Limit the length of a stabs entry (for the broken Acorn assembler) */\n-#define DBX_CONTIN_LENGTH 80\n-\n-#include \"arm/linux.h\"\n-\n /*\n  * We are using GAS, so stabs should work.\n  */\n \n #ifndef DBX_DEBUGGING_INFO\n #define DBX_DEBUGGING_INFO 1\n #endif\n+\n+/*\n+ * This is how we tell the assembler that a symbol is weak.  GAS always\n+ * supports weak symbols.\n+ */\n+\n+#define ASM_WEAKEN_LABEL(FILE,NAME) \\\n+  do { fputs (\"\\t.weak\\t\", FILE); assemble_name (FILE, NAME); \\\n+       fputc ('\\n', FILE); } while (0)\n+\n+/* This is used in ASM_FILE_START */\n+#undef  ARM_OS_NAME\n+#define ARM_OS_NAME \"Linux\"\n+\n+/* Unsigned chars produces much better code than signed.  */\n+#define DEFAULT_SIGNED_CHAR 0\n+\n+#undef  SUBTARGET_CPP_SPEC\n+#define SUBTARGET_CPP_SPEC  \"%{posix:-D_POSIX_SOURCE} %{fPIC:-D__PIC__ -D__pic__} %{fpic:-D__PIC__ -D__pic__}\"\n+\n+#undef  SIZE_TYPE\n+#define SIZE_TYPE \"unsigned int\"\n+\n+#undef  PTRDIFF_TYPE\n+#define PTRDIFF_TYPE \"int\"\n+\n+#undef  WCHAR_TYPE\n+#define WCHAR_TYPE \"long int\"\n+\n+#undef  WCHAR_TYPE_SIZE\n+#define WCHAR_TYPE_SIZE BITS_PER_WORD\n+\n+#if 0\t\t/* not yet */\n+\n+/* Clear the instruction cache from `beg' to `end'.  This makes an\n+   inline system call to SYS_cacheflush.  The arguments are as\n+   follows:\n+\n+\tcacheflush (start, end, flags)\n+\n+*/\n+\n+#define CLEAR_INSN_CACHE(BEG, END)\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\t\\\n+  register unsigned long _beg __asm (\"a1\") = (unsigned long) (BEG);\t\\\n+  register unsigned long _end __asm (\"a2\") = (unsigned long) (END);\t\\\n+  register unsigned long _flg __asm (\"a3\") = 0;\t\t\t\t\\\n+  __asm __volatile (\"swi 0x9000b8\");\t\t\t\t\t\\\n+}\n+\n+#endif\n+\n+/* If cross-compiling, don't require stdio.h etc to build libgcc.a.  */\n+#ifdef CROSS_COMPILE\n+#ifndef inhibit_libc\n+#define inhibit_libc\n+#endif\n+#endif"}, {"sha": "bb0a3d50723be2c1b297d060a7615385deb76c8d", "filename": "gcc/config/arm/t-arm-elf", "status": "added", "additions": 31, "deletions": 0, "changes": 31, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Ft-arm-elf", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Ft-arm-elf", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Ft-arm-elf?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -0,0 +1,31 @@\n+CROSS_LIBGCC1 = libgcc1-asm.a\n+LIB1ASMSRC = arm/lib1funcs.asm\n+LIB1ASMFUNCS = _udivsi3 _divsi3 _umodsi3 _modsi3 _dvmd_tls\n+\n+EXTRA_PARTS = crtbegin.o crtend.o\n+\n+# These are really part of libgcc1, but this will cause them to be\n+# built correctly, so...\n+\n+LIB2FUNCS_EXTRA = fp-bit.c dp-bit.c\n+\n+fp-bit.c: $(srcdir)/config/fp-bit.c\n+\techo '#define FLOAT' > fp-bit.c\n+\techo '#ifndef __ARMEB__' >> fp-bit.c\n+\techo '#define FLOAT_BIT_ORDER_MISMATCH' >> fp-bit.c\n+\techo '#endif' >> fp-bit.c\n+\tcat $(srcdir)/config/fp-bit.c >> fp-bit.c\n+\n+dp-bit.c: $(srcdir)/config/fp-bit.c\n+\techo '#ifndef __ARMEB__' > dp-bit.c\n+\techo '#define FLOAT_BIT_ORDER_MISMATCH' >> dp-bit.c\n+\techo '#define FLOAT_WORD_ORDER_MISMATCH' >> dp-bit.c\n+\techo '#endif' >> dp-bit.c\n+\tcat $(srcdir)/config/fp-bit.c >> dp-bit.c\n+\n+MULTILIB_OPTIONS  = mlittle-endian/mbig-endian mhard-float/msoft-float mapcs-32/mapcs-26\n+MULTILIB_DIRNAMES = le be fpu soft 32bit 26bit\n+MULTILIB_MATCHES  = \n+\n+LIBGCC = stmp-multilib\n+INSTALL_LIBGCC = install-multilib"}, {"sha": "d23ba6f7f9a1e8f23f4e983b5241f15aeb9c3dd8", "filename": "gcc/config/arm/unknown-elf.h", "status": "added", "additions": 166, "deletions": 0, "changes": 166, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Funknown-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfig%2Farm%2Funknown-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Funknown-elf.h?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -0,0 +1,166 @@\n+/* Definitions for non-Linux based ARM systems using ELF\n+   Copyright (C) 1998 Free Software Foundation, Inc.\n+   Contributed by Catherine Moore <clm@cygnus.com>\n+\n+This file is part of GNU CC.\n+\n+GNU CC is free software; you can redistribute it and/or modify\n+it under the terms of the GNU General Public License as published by\n+the Free Software Foundation; either version 2, or (at your option)\n+any later version.\n+\n+GNU CC is distributed in the hope that it will be useful,\n+but WITHOUT ANY WARRANTY; without even the implied warranty of\n+MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+GNU General Public License for more details.\n+\n+You should have received a copy of the GNU General Public License\n+along with this program; see the file COPYING.  If not, write to\n+the Free Software Foundation, 59 Temple Place - Suite 330,\n+Boston, MA 02111-1307, USA.  */\n+\n+/* Run-time Target Specification.  */\n+#define TARGET_VERSION\tfputs (\" (ARM non-Linux)\", stderr);\n+\n+/* If you don't define HAVE_ATEXIT, and the object file format/OS/whatever \n+   does not support constructors/destructors, then gcc implements destructors\n+   by defining its own exit function, which calls the destructors.  This gcc\n+   exit function overrides the C library's exit function, and this can cause\n+   all kinds of havoc if the C library has a non-trivial exit function.  You\n+   really don't want to use the exit function in libgcc2.c.  */\n+#define HAVE_ATEXIT\n+\n+/* Default to using APCS-32 and software floating point.  */\n+#define TARGET_DEFAULT\t(ARM_FLAG_SOFT_FLOAT | ARM_FLAG_APCS_32)\n+\n+/* Now we define the strings used to build the spec file.  */\n+#define STARTFILE_SPEC\t\"crtbegin%O%s crt0%O%s\"\n+\n+#define ENDFILE_SPEC\t\"crtend%O%s\"\n+\n+#define USER_LABEL_PREFIX \t\"_\"\t/* FIXME: This ought to be \"\" */\n+#define LOCAL_LABEL_PREFIX \t\".\"\n+\n+#define TEXT_SECTION \"\t\t.text\"\n+\n+#define INVOKE__main\n+\n+/* Debugging */\n+#define DWARF_DEBUGGING_INFO\n+#define DWARF2_DEBUGGING_INFO\n+#define PREFERRED_DEBUGGING_TYPE DWARF2_DEBUG\n+\n+/* Support for Constructors and Destrcutors .  */\n+#define READONLY_DATA_SECTION\trdata_section\n+\n+/* A list of other sections which the compiler might be \"in\" at any\n+   given time.  */\n+#define SUBTARGET_EXTRA_SECTIONS in_rdata,\n+\n+/* A list of extra section function definitions.  */\n+#define SUBTARGET_EXTRA_SECTION_FUNCTIONS\tRDATA_SECTION_FUNCTION\n+  \n+#define RDATA_SECTION_ASM_OP\t\"\\t.section .rodata\"\n+\n+#define RDATA_SECTION_FUNCTION \t\t\t\t\t\\\n+void\t\t\t\t\t\t\t\t\\\n+rdata_section ()\t\t\t\t\t\t\\\n+{\t\t\t\t\t\t\t\t\\\n+  if (in_section != in_rdata)\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\\\n+      fprintf (asm_out_file, \"%s\\n\", RDATA_SECTION_ASM_OP);\t\\\n+      in_section = in_rdata;\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\\\n+}\n+\n+#define CTOR_LIST_BEGIN\t\t\t\t\t\\\n+asm (CTORS_SECTION_ASM_OP);\t\t\t\t\\\n+func_ptr __CTOR_LIST__[1] = { (func_ptr) (-1) }\n+\n+#define CTOR_LIST_END\t\t\t\t\t\\\n+asm (CTORS_SECTION_ASM_OP);\t\t\t\t\\\n+func_ptr __CTOR_END__[1] = { (func_ptr) 0 };\n+\n+#define DTOR_LIST_BEGIN\t\t\t\t\t\\\n+asm (DTORS_SECTION_ASM_OP);\t\t\t\t\\\n+func_ptr __DTOR_LIST__[1] = { (func_ptr) (-1) }\n+\n+#define DTOR_LIST_END\t\t\t\t\t\\\n+asm (DTORS_SECTION_ASM_OP);\t\t\t\t\\\n+func_ptr __DTOR_END__[1] = { (func_ptr) 0 };\n+\n+/* A C statement to output something to the assembler file to switch to section\n+   NAME for object DECL which is either a FUNCTION_DECL, a VAR_DECL or\n+   NULL_TREE.  Some target formats do not support arbitrary sections.  Do not\n+   define this macro in such cases.  */\n+#define ASM_OUTPUT_SECTION_NAME(STREAM, DECL, NAME, RELOC) \\\n+do {\t\t\t\t\t\t\t\t\\\n+  if ((DECL) && TREE_CODE (DECL) == FUNCTION_DECL)\t\t\\\n+    fprintf (STREAM, \"\\t.section %s,\\\"ax\\\",@progbits\\n\", (NAME));\t\t\\\n+  else if ((DECL) && DECL_READONLY_SECTION (DECL, RELOC))\t\\\n+    fprintf (STREAM, \"\\t.section %s,\\\"a\\\"\\n\", (NAME));\t\t\\\n+  else\t\t\t\t\t\t\t\t\\\n+    fprintf (STREAM, \"\\t.section %s,\\\"aw\\\"\\n\", (NAME));\t\t\\\n+} while (0)\n+\n+/* Don't know how to order these.  UNALIGNED_WORD_ASM_OP is in\n+   dwarf2.out. */ \n+#define UNALIGNED_WORD_ASM_OP \".4byte\"\n+\n+#define ASM_OUTPUT_DWARF2_ADDR_CONST(FILE,ADDR)                  \\\n+     if (((ADDR)[0] == '.') && ((ADDR)[1] == 'L'))              \\\n+       fprintf ((FILE), \"\\t%s\\t%s\", UNALIGNED_WORD_ASM_OP, (ADDR));\t\\\n+     else                  \t\t\t\t\t\\\n+       fprintf ((FILE), \"\\t%s\\t%s%s\", \t\t\t\t\\\n+             UNALIGNED_WORD_ASM_OP, USER_LABEL_PREFIX, (ADDR))\n+\n+#define ASM_OUTPUT_DWARF_ADDR_CONST(FILE,RTX)                   \\\n+do {\t\t\t\t\t\t\t\t\\\n+  fprintf ((FILE), \"\\t%s\\t\", UNALIGNED_WORD_ASM_OP);\t\t\\\n+  output_addr_const ((FILE), (RTX));\t\t\t\t\\\n+  fputc ('\\n', (FILE));\t\t\t\t\t\t\\\n+} while (0)\n+\n+\n+/* The ARM development system defines __main.  */\n+#define NAME__MAIN \"__gccmain\"\n+#define SYMBOL__MAIN __gccmain\n+\n+#define MAKE_DECL_ONE_ONLY(DECL) (DECL_WEAK (DECL) = 1)\n+#define UNIQUE_SECTION_P(DECL) (DECL_ONE_ONLY (DECL))\n+#define UNIQUE_SECTION(DECL,RELOC)\t\t\t\t\\\n+do {\t\t\t\t\t\t\t\t\\\n+  int len;\t\t\t\t\t\t\t\\\n+  char *name, *string, *prefix;\t\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\\\n+  name = IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (DECL));\t\\\n+\t\t\t\t\t\t\t\t\\\n+  if (! DECL_ONE_ONLY (DECL))\t\t\t\t\t\\\n+    {\t\t\t\t\t\t\t\t\\\n+      prefix = \".\";                                             \\\n+      if (TREE_CODE (DECL) == FUNCTION_DECL)\t\t\t\\\n+\tprefix = \".text.\";\t\t\t\t\t\\\n+      else if (DECL_READONLY_SECTION (DECL, RELOC))\t\t\\\n+\tprefix = \".rodata.\";\t\t\t\t\t\\\n+      else\t\t\t\t\t\t\t\\\n+\tprefix = \".data.\";\t\t\t\t\t\\\n+    }\t\t\t\t\t\t\t\t\\\n+  else if (TREE_CODE (DECL) == FUNCTION_DECL)\t\t\t\\\n+    prefix = \".gnu.linkonce.t.\";\t\t\t\t\\\n+  else if (DECL_READONLY_SECTION (DECL, RELOC))\t\t\t\\\n+    prefix = \".gnu.linkonce.r.\";\t\t\t\t\\\n+  else\t\t\t\t\t\t\t\t\\\n+    prefix = \".gnu.linkonce.d.\";\t\t\t\t\\\n+\t\t\t\t\t\t\t\t\\\n+  len = strlen (name) + strlen (prefix);\t\t\t\\\n+  string = alloca (len + 1);\t\t\t\t\t\\\n+  sprintf (string, \"%s%s\", prefix, name);\t\t\t\\\n+\t\t\t\t\t\t\t\t\\\n+  DECL_SECTION_NAME (DECL) = build_string (len, string);\t\\\n+} while (0)\n+\n+#define CPP_APCS_PC_DEFAULT_SPEC\t\"-D__APCS_32__\"\n+#define SUBTARGET_CPU_DEFAULT \t\tTARGET_CPU_arm7tdmi\n+     \n+/* Now get the routine arm-elf definitions.  */\n+#include \"arm/elf.h\""}, {"sha": "e4aa7fcc936d3136eca3b9eefd401530bbeb9fac", "filename": "gcc/configure", "status": "modified", "additions": 201, "deletions": 119, "changes": 320, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -1,7 +1,7 @@\n #! /bin/sh\n \n # Guess values for system-dependent variables and create Makefiles.\n-# Generated automatically using autoconf version 2.12.1 \n+# Generated automatically using autoconf version 2.12.2 \n # Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.\n #\n # This configure script is free software; the Free Software Foundation\n@@ -376,7 +376,7 @@ EOF\n     verbose=yes ;;\n \n   -version | --version | --versio | --versi | --vers)\n-    echo \"configure generated by autoconf version 2.12.1\"\n+    echo \"configure generated by autoconf version 2.12.2\"\n     exit 0 ;;\n \n   -with-* | --with-*)\n@@ -546,9 +546,11 @@ ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n-ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n cross_compiling=$ac_cv_prog_cc_cross\n \n+ac_exeext=\n+ac_objext=o\n if (echo \"testing\\c\"; echo 1,2,3) | grep c >/dev/null; then\n   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.\n   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then\n@@ -578,7 +580,7 @@ copy=cp\n # - two terminals occur directly after each other\n # - the path contains an element with a dot in it\n echo $ac_n \"checking LIBRARY_PATH variable\"\"... $ac_c\" 1>&6\n-echo \"configure:582: checking LIBRARY_PATH variable\" >&5\n+echo \"configure:584: checking LIBRARY_PATH variable\" >&5\n case ${LIBRARY_PATH} in\n   [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n     library_path_setting=\"contains current directory\"\n@@ -603,7 +605,7 @@ fi\n # - two terminals occur directly after each other\n # - the path contains an element with a dot in it\n echo $ac_n \"checking GCC_EXEC_PREFIX variable\"\"... $ac_c\" 1>&6\n-echo \"configure:607: checking GCC_EXEC_PREFIX variable\" >&5\n+echo \"configure:609: checking GCC_EXEC_PREFIX variable\" >&5\n case ${GCC_EXEC_PREFIX} in\n   [:\\;]* | *[:\\;] | *[:\\;][:\\;]* |  *[:\\;]. | .[:\\;]*| . | *[:\\;].[:\\;]* )\n     gcc_exec_prefix_setting=\"contains current directory\"\n@@ -914,7 +916,7 @@ else { echo \"configure: error: can not run $ac_config_sub\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking host system type\"\"... $ac_c\" 1>&6\n-echo \"configure:918: checking host system type\" >&5\n+echo \"configure:920: checking host system type\" >&5\n \n host_alias=$host\n case \"$host_alias\" in\n@@ -935,7 +937,7 @@ host_os=`echo $host | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$host\" 1>&6\n \n echo $ac_n \"checking target system type\"\"... $ac_c\" 1>&6\n-echo \"configure:939: checking target system type\" >&5\n+echo \"configure:941: checking target system type\" >&5\n \n target_alias=$target\n case \"$target_alias\" in\n@@ -953,7 +955,7 @@ target_os=`echo $target | sed 's/^\\([^-]*\\)-\\([^-]*\\)-\\(.*\\)$/\\3/'`\n echo \"$ac_t\"\"$target\" 1>&6\n \n echo $ac_n \"checking build system type\"\"... $ac_c\" 1>&6\n-echo \"configure:957: checking build system type\" >&5\n+echo \"configure:959: checking build system type\" >&5\n \n build_alias=$build\n case \"$build_alias\" in\n@@ -980,14 +982,14 @@ test \"$host_alias\" != \"$target_alias\" &&\n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:984: checking for $ac_word\" >&5\n+echo \"configure:986: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$CC\"; then\n   ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n@@ -1009,14 +1011,14 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1013: checking for $ac_word\" >&5\n+echo \"configure:1015: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$CC\"; then\n   ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   ac_prog_rejected=no\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n@@ -1053,25 +1055,58 @@ else\n   echo \"$ac_t\"\"no\" 1>&6\n fi\n \n+  if test -z \"$CC\"; then\n+    case \"`uname -s`\" in\n+    *win32* | *WIN32*)\n+      # Extract the first word of \"cl\", so it can be a program name with args.\n+set dummy cl; ac_word=$2\n+echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n+echo \"configure:1065: checking for $ac_word\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  if test -n \"$CC\"; then\n+  ac_cv_prog_CC=\"$CC\" # Let the user override the test.\n+else\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n+  for ac_dir in $PATH; do\n+    test -z \"$ac_dir\" && ac_dir=.\n+    if test -f $ac_dir/$ac_word; then\n+      ac_cv_prog_CC=\"cl\"\n+      break\n+    fi\n+  done\n+  IFS=\"$ac_save_ifs\"\n+fi\n+fi\n+CC=\"$ac_cv_prog_CC\"\n+if test -n \"$CC\"; then\n+  echo \"$ac_t\"\"$CC\" 1>&6\n+else\n+  echo \"$ac_t\"\"no\" 1>&6\n+fi\n+ ;;\n+    esac\n+  fi\n   test -z \"$CC\" && { echo \"configure: error: no acceptable cc found in \\$PATH\" 1>&2; exit 1; }\n fi\n \n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1061: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1096: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'\n-ac_link='${CC-cc} -o conftest $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n+ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'\n cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext <<EOF\n-#line 1071 \"configure\"\n+#line 1106 \"configure\"\n #include \"confdefs.h\"\n main(){return(0);}\n EOF\n-if { (eval echo configure:1075: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1110: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1091,12 +1126,12 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1095: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1130: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:1100: checking whether we are using GNU C\" >&5\n+echo \"configure:1135: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1105,7 +1140,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1109: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1144: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -1116,11 +1151,15 @@ echo \"$ac_t\"\"$ac_cv_prog_gcc\" 1>&6\n \n if test $ac_cv_prog_gcc = yes; then\n   GCC=yes\n-  ac_test_CFLAGS=\"${CFLAGS+set}\"\n-  ac_save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\n-  echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:1124: checking whether ${CC-cc} accepts -g\" >&5\n+else\n+  GCC=\n+fi\n+\n+ac_test_CFLAGS=\"${CFLAGS+set}\"\n+ac_save_CFLAGS=\"$CFLAGS\"\n+CFLAGS=\n+echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n+echo \"configure:1163: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1135,16 +1174,20 @@ rm -f conftest*\n fi\n \n echo \"$ac_t\"\"$ac_cv_prog_cc_g\" 1>&6\n-  if test \"$ac_test_CFLAGS\" = set; then\n-    CFLAGS=\"$ac_save_CFLAGS\"\n-  elif test $ac_cv_prog_cc_g = yes; then\n+if test \"$ac_test_CFLAGS\" = set; then\n+  CFLAGS=\"$ac_save_CFLAGS\"\n+elif test $ac_cv_prog_cc_g = yes; then\n+  if test \"$GCC\" = yes; then\n     CFLAGS=\"-g -O2\"\n   else\n-    CFLAGS=\"-O2\"\n+    CFLAGS=\"-g\"\n   fi\n else\n-  GCC=\n-  test \"${CFLAGS+set}\" = set || CFLAGS=\"-g\"\n+  if test \"$GCC\" = yes; then\n+    CFLAGS=\"-O2\"\n+  else\n+    CFLAGS=\n+  fi\n fi\n \n \n@@ -1159,7 +1202,7 @@ fi\n \n \n echo $ac_n \"checking whether ${MAKE-make} sets \\${MAKE}\"\"... $ac_c\" 1>&6\n-echo \"configure:1163: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n+echo \"configure:1206: checking whether ${MAKE-make} sets \\${MAKE}\" >&5\n set dummy ${MAKE-make}; ac_make=`echo \"$2\" | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1187,7 +1230,7 @@ fi\n \n \n echo $ac_n \"checking whether a default assembler was specified\"\"... $ac_c\" 1>&6\n-echo \"configure:1191: checking whether a default assembler was specified\" >&5\n+echo \"configure:1234: checking whether a default assembler was specified\" >&5\n if test x\"${AS+set}\" = x\"set\"; then\n     if test x\"$with_gas\" = x\"no\"; then\n     \techo \"$ac_t\"\"yes ($AS)\" 1>&6\n@@ -1199,7 +1242,7 @@ else\n fi\n \n echo $ac_n \"checking whether a default linker was specified\"\"... $ac_c\" 1>&6\n-echo \"configure:1203: checking whether a default linker was specified\" >&5\n+echo \"configure:1246: checking whether a default linker was specified\" >&5\n if test x\"${LD+set}\" = x\"set\"; then\n     if test x\"$with_gnu_ld\" = x\"no\"; then\n \techo \"$ac_t\"\"yes ($LD)\" 1>&6\n@@ -1216,14 +1259,14 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1220: checking for $ac_word\" >&5\n+echo \"configure:1263: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_AWK'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$AWK\"; then\n   ac_cv_prog_AWK=\"$AWK\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n@@ -1247,14 +1290,14 @@ done\n # Extract the first word of \"flex\", so it can be a program name with args.\n set dummy flex; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1251: checking for $ac_word\" >&5\n+echo \"configure:1294: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_LEX'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$LEX\"; then\n   ac_cv_prog_LEX=\"$LEX\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n@@ -1280,15 +1323,15 @@ then\n   *) ac_lib=l ;;\n   esac\n   echo $ac_n \"checking for yywrap in -l$ac_lib\"\"... $ac_c\" 1>&6\n-echo \"configure:1284: checking for yywrap in -l$ac_lib\" >&5\n+echo \"configure:1327: checking for yywrap in -l$ac_lib\" >&5\n ac_lib_var=`echo $ac_lib'_'yywrap | sed 'y%./+-%__p_%'`\n if eval \"test \\\"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   ac_save_LIBS=\"$LIBS\"\n LIBS=\"-l$ac_lib  $LIBS\"\n cat > conftest.$ac_ext <<EOF\n-#line 1292 \"configure\"\n+#line 1335 \"configure\"\n #include \"confdefs.h\"\n /* Override any gcc2 internal prototype to avoid an error.  */\n /* We use char because int might match the return type of a gcc2\n@@ -1299,7 +1342,7 @@ int main() {\n yywrap()\n ; return 0; }\n EOF\n-if { (eval echo configure:1303: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:1346: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_lib_$ac_lib_var=yes\"\n else\n@@ -1322,7 +1365,7 @@ fi\n fi\n \n echo $ac_n \"checking whether ln works\"\"... $ac_c\" 1>&6\n-echo \"configure:1326: checking whether ln works\" >&5\n+echo \"configure:1369: checking whether ln works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1354,7 +1397,7 @@ else\n fi\n \n echo $ac_n \"checking whether ln -s works\"\"... $ac_c\" 1>&6\n-echo \"configure:1358: checking whether ln -s works\" >&5\n+echo \"configure:1401: checking whether ln -s works\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_prog_LN_S'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -1386,19 +1429,19 @@ else\n fi\n \n echo $ac_n \"checking for volatile\"\"... $ac_c\" 1>&6\n-echo \"configure:1390: checking for volatile\" >&5\n+echo \"configure:1433: checking for volatile\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_volatile'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1395 \"configure\"\n+#line 1438 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n volatile int foo;\n ; return 0; }\n EOF\n-if { (eval echo configure:1402: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1445: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_volatile=yes\n else\n@@ -1421,14 +1464,14 @@ fi\n # Extract the first word of \"ranlib\", so it can be a program name with args.\n set dummy ranlib; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1425: checking for $ac_word\" >&5\n+echo \"configure:1468: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$RANLIB\"; then\n   ac_cv_prog_RANLIB=\"$RANLIB\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n@@ -1452,14 +1495,14 @@ do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1456: checking for $ac_word\" >&5\n+echo \"configure:1499: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_YACC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$YACC\"; then\n   ac_cv_prog_YACC=\"$YACC\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n@@ -1492,7 +1535,7 @@ test -n \"$YACC\" || YACC=\"yacc\"\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:1496: checking for a BSD compatible install\" >&5\n+echo \"configure:1539: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -1543,7 +1586,7 @@ test -z \"$INSTALL_DATA\" && INSTALL_DATA='${INSTALL} -m 644'\n \n \n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:1547: checking how to run the C preprocessor\" >&5\n+echo \"configure:1590: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -1558,14 +1601,14 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 1562 \"configure\"\n+#line 1605 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1568: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1611: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n else\n@@ -1575,14 +1618,31 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1579 \"configure\"\n+#line 1622 \"configure\"\n+#include \"confdefs.h\"\n+#include <assert.h>\n+Syntax Error\n+EOF\n+ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n+{ (eval echo configure:1628: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n+if test -z \"$ac_err\"; then\n+  :\n+else\n+  echo \"$ac_err\" >&5\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  CPP=\"${CC-cc} -nologo -E\"\n+  cat > conftest.$ac_ext <<EOF\n+#line 1639 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1585: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1645: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n else\n@@ -1594,6 +1654,8 @@ else\n fi\n rm -f conftest*\n fi\n+rm -f conftest*\n+fi\n rm -f conftest*\n   ac_cv_prog_CPP=\"$CPP\"\n fi\n@@ -1604,21 +1666,21 @@ fi\n echo \"$ac_t\"\"$CPP\" 1>&6\n \n echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:1608: checking for ANSI C header files\" >&5\n+echo \"configure:1670: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1613 \"configure\"\n+#line 1675 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1621: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1683: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   ac_cv_header_stdc=yes\n@@ -1634,7 +1696,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1638 \"configure\"\n+#line 1700 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -1652,7 +1714,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 1656 \"configure\"\n+#line 1718 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -1673,7 +1735,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1677 \"configure\"\n+#line 1739 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -1684,7 +1746,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:1688: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:1750: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -1708,12 +1770,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1712: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:1774: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1717 \"configure\"\n+#line 1779 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -1722,7 +1784,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:1726: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1788: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -1743,20 +1805,20 @@ EOF\n fi\n \n echo $ac_n \"checking whether string.h and strings.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1747: checking whether string.h and strings.h may both be included\" >&5\n+echo \"configure:1809: checking whether string.h and strings.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_string'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1752 \"configure\"\n+#line 1814 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n #include <strings.h>\n int main() {\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1760: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1822: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_header_string=yes\n else\n@@ -1780,18 +1842,18 @@ for ac_hdr in limits.h stddef.h string.h strings.h stdlib.h time.h fcntl.h unist\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1784: checking for $ac_hdr\" >&5\n+echo \"configure:1846: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1789 \"configure\"\n+#line 1851 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1794: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1856: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   eval \"ac_cv_header_$ac_safe=yes\"\n@@ -1820,18 +1882,18 @@ done\n # Check for thread headers.\n ac_safe=`echo \"thread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for thread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1824: checking for thread.h\" >&5\n+echo \"configure:1886: checking for thread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1829 \"configure\"\n+#line 1891 \"configure\"\n #include \"confdefs.h\"\n #include <thread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1834: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1896: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   eval \"ac_cv_header_$ac_safe=yes\"\n@@ -1854,18 +1916,18 @@ fi\n \n ac_safe=`echo \"pthread.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for pthread.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1858: checking for pthread.h\" >&5\n+echo \"configure:1920: checking for pthread.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1863 \"configure\"\n+#line 1925 \"configure\"\n #include \"confdefs.h\"\n #include <pthread.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1868: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n-ac_err=`grep -v '^ *+' conftest.out`\n+{ (eval echo configure:1930: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n   eval \"ac_cv_header_$ac_safe=yes\"\n@@ -1891,14 +1953,14 @@ fi\n # Extract the first word of \"gnatbind\", so it can be a program name with args.\n set dummy gnatbind; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:1895: checking for $ac_word\" >&5\n+echo \"configure:1957: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gnat'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test -n \"$gnat\"; then\n   ac_cv_prog_gnat=\"$gnat\" # Let the user override the test.\n else\n-  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\"${IFS}:\"\n+  IFS=\"${IFS= \t}\"; ac_save_ifs=\"$IFS\"; IFS=\":\"\n   for ac_dir in $PATH; do\n     test -z \"$ac_dir\" && ac_dir=.\n     if test -f $ac_dir/$ac_word; then\n@@ -1921,20 +1983,20 @@ fi\n # See if the system preprocessor understands the ANSI C preprocessor\n # stringification operator.\n echo $ac_n \"checking whether cpp understands the stringify operator\"\"... $ac_c\" 1>&6\n-echo \"configure:1925: checking whether cpp understands the stringify operator\" >&5\n+echo \"configure:1987: checking whether cpp understands the stringify operator\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_c_have_stringify'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1930 \"configure\"\n+#line 1992 \"configure\"\n #include \"confdefs.h\"\n \n int main() {\n #define S(x)   #x\n char *test = S(foo);\n ; return 0; }\n EOF\n-if { (eval echo configure:1938: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2000: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   gcc_cv_c_have_stringify=yes\n else\n@@ -1957,20 +2019,20 @@ fi\n # Use <inttypes.h> only if it exists,\n # doesn't clash with <sys/types.h>, and declares intmax_t.\n echo $ac_n \"checking for inttypes.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1961: checking for inttypes.h\" >&5\n+echo \"configure:2023: checking for inttypes.h\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_header_inttypes_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1966 \"configure\"\n+#line 2028 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <inttypes.h>\n int main() {\n intmax_t i = -1;\n ; return 0; }\n EOF\n-if { (eval echo configure:1974: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2036: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   cat >> confdefs.h <<EOF\n #define HAVE_INTTYPES_H 1\n@@ -1993,12 +2055,12 @@ for ac_func in strtoul bsearch strerror putenv popen bcopy bzero bcmp \\\n \tsysconf isascii gettimeofday strsignal\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1997: checking for $ac_func\" >&5\n+echo \"configure:2059: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2002 \"configure\"\n+#line 2064 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2021,7 +2083,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2025: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2087: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2050,12 +2112,12 @@ done\n #AC_CHECK_TYPE(wchar_t, unsigned int)\n \n echo $ac_n \"checking for vprintf\"\"... $ac_c\" 1>&6\n-echo \"configure:2054: checking for vprintf\" >&5\n+echo \"configure:2116: checking for vprintf\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vprintf'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2059 \"configure\"\n+#line 2121 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vprintf(); below.  */\n@@ -2078,7 +2140,7 @@ vprintf();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2082: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2144: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vprintf=yes\"\n else\n@@ -2102,12 +2164,12 @@ fi\n \n if test \"$ac_cv_func_vprintf\" != yes; then\n echo $ac_n \"checking for _doprnt\"\"... $ac_c\" 1>&6\n-echo \"configure:2106: checking for _doprnt\" >&5\n+echo \"configure:2168: checking for _doprnt\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func__doprnt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2111 \"configure\"\n+#line 2173 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char _doprnt(); below.  */\n@@ -2130,7 +2192,7 @@ _doprnt();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2134: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest; then\n+if { (eval echo configure:2196: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func__doprnt=yes\"\n else\n@@ -2166,15 +2228,15 @@ fi\n \n \n echo $ac_n \"checking whether the printf functions support %p\"\"... $ac_c\" 1>&6\n-echo \"configure:2170: checking whether the printf functions support %p\" >&5\n+echo \"configure:2232: checking whether the printf functions support %p\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_func_printf_ptr'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   gcc_cv_func_printf_ptr=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2178 \"configure\"\n+#line 2240 \"configure\"\n #include \"confdefs.h\"\n #include <stdio.h>\n \n@@ -2187,7 +2249,7 @@ main()\n   exit (p != q);\n }\n EOF\n-if { (eval echo configure:2191: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2253: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   gcc_cv_func_printf_ptr=yes\n else\n@@ -2216,12 +2278,12 @@ for ac_func in malloc realloc calloc free bcopy bzero bcmp \\\n \tstrsignal\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2220: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2282: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2225 \"configure\"\n+#line 2287 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2254,7 +2316,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2258: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2320: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2283,12 +2345,12 @@ done\n for ac_func in getrlimit setrlimit\n do\n echo $ac_n \"checking whether $ac_func must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:2287: checking whether $ac_func must be declared\" >&5\n+echo \"configure:2349: checking whether $ac_func must be declared\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_decl_needed_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2292 \"configure\"\n+#line 2354 \"configure\"\n #include \"confdefs.h\"\n \n #include <stdio.h>\n@@ -2325,7 +2387,7 @@ int main() {\n char *(*pfn) = (char *(*)) $ac_func\n ; return 0; }\n EOF\n-if { (eval echo configure:2329: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2391: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   eval \"gcc_cv_decl_needed_$ac_func=no\"\n else\n@@ -2352,12 +2414,12 @@ done\n \n \n echo $ac_n \"checking for sys_siglist declaration in signal.h or unistd.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2356: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n+echo \"configure:2418: checking for sys_siglist declaration in signal.h or unistd.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_decl_sys_siglist'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2361 \"configure\"\n+#line 2423 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <signal.h>\n@@ -2369,7 +2431,7 @@ int main() {\n char *msg = *(sys_siglist + 1);\n ; return 0; }\n EOF\n-if { (eval echo configure:2373: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:2435: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_decl_sys_siglist=yes\n else\n@@ -2675,18 +2737,38 @@ for machine in $build $host $target; do\n \t\t# On NetBSD, the headers are already okay, except for math.h.\n \t\tfixincludes=fixinc.wrap\n \t\t;;\n-\tarm-*-linux-gnuaout*)\t\t# ARM GNU/Linux\n+\tarm*-*-linux-gnuaout*)\t\t# ARM GNU/Linux with a.out\n \t\tcpu_type=arm\n \t\txmake_file=x-linux\n-\t\ttm_file=arm/linux-gas.h\n+\t\ttm_file=arm/linux-aout.h\n \t\ttmake_file=arm/t-linux\n \t\tfixincludes=Makefile.in\n \t\tgnu_ld=yes\n \t\t;;\n-\tarm-*-aout)\n+\tarm*-*-linux-gnu*)\t\t# ARM GNU/Linux with ELF\n+\t\txm_file=arm/xm-linux.h\n+\t\txmake_file=x-linux\n+\t\tcase $machine in\n+\t\tarmv2*-*-*)\n+\t\t\ttm_file=arm/linux-elf26.h\n+\t\t\t;;\n+\t\t*)\n+\t\t\ttm_file=arm/linux-elf.h\n+\t\t\t;;\n+\t\tesac\n+\t\ttmake_file=\"t-linux arm/t-linux\"\n+\t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n+\t\tfixincludes=Makefile.in\t\t# Nothing to fix\n+\t\tgnu_ld=yes\n+\t\t;;\n+\tarm*-*-aout)\n \t\ttm_file=arm/aout.h\n \t\ttmake_file=arm/t-bare\n \t\t;;\n+\tarm*-*-elf)\n+\t\ttm_file=arm/unknown-elf.h\n+\t\ttmake_file=arm/t-arm-elf\n+\t\t;;\n \tc1-convex-*)\t\t\t# Convex C1\n \t\ttarget_cpu_default=1\n \t\tuse_collect2=yes\n@@ -5562,7 +5644,7 @@ fi\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:5566: checking assembler alignment features\" >&5\n+echo \"configure:5648: checking assembler alignment features\" >&5\n gcc_cv_as=\n gcc_cv_as_alignment_features=\n gcc_cv_as_gas_srcdir=`echo $srcdir | sed -e 's,/gcc$,,'`/gas\n@@ -5633,7 +5715,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:5637: checking assembler subsection support\" >&5\n+echo \"configure:5719: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=\n if test x$gcc_cv_as != x; then\n \t# Check if we have .subsection\n@@ -5869,7 +5951,7 @@ fi\n \n # Warn if using init_priority.\n echo $ac_n \"checking whether to enable init_priority by default\"\"... $ac_c\" 1>&6\n-echo \"configure:5873: checking whether to enable init_priority by default\" >&5\n+echo \"configure:5955: checking whether to enable init_priority by default\" >&5\n if test x$enable_init_priority != xyes; then\n   enable_init_priority=no\n fi\n@@ -6066,7 +6148,7 @@ do\n     echo \"running \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion\"\n     exec \\${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;\n   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)\n-    echo \"$CONFIG_STATUS generated by autoconf version 2.12.1\"\n+    echo \"$CONFIG_STATUS generated by autoconf version 2.12.2\"\n     exit 0 ;;\n   -help | --help | --hel | --he | --h)\n     echo \"\\$ac_cs_usage\"; exit 0 ;;"}, {"sha": "5b79d3f3e7541c5b4a7c7b148be403b5f6135bf6", "filename": "gcc/configure.in", "status": "modified", "additions": 23, "deletions": 3, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b355a481345c7c8e88a481e1bb41f5247f43115b/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=b355a481345c7c8e88a481e1bb41f5247f43115b", "patch": "@@ -673,18 +673,38 @@ changequote([,])dnl\n \t\t# On NetBSD, the headers are already okay, except for math.h.\n \t\tfixincludes=fixinc.wrap\n \t\t;;\n-\tarm-*-linux-gnuaout*)\t\t# ARM GNU/Linux\n+\tarm*-*-linux-gnuaout*)\t\t# ARM GNU/Linux with a.out\n \t\tcpu_type=arm\n \t\txmake_file=x-linux\n-\t\ttm_file=arm/linux-gas.h\n+\t\ttm_file=arm/linux-aout.h\n \t\ttmake_file=arm/t-linux\n \t\tfixincludes=Makefile.in\n \t\tgnu_ld=yes\n \t\t;;\n-\tarm-*-aout)\n+\tarm*-*-linux-gnu*)\t\t# ARM GNU/Linux with ELF\n+\t\txm_file=arm/xm-linux.h\n+\t\txmake_file=x-linux\n+\t\tcase $machine in\n+\t\tarmv2*-*-*)\n+\t\t\ttm_file=arm/linux-elf26.h\n+\t\t\t;;\n+\t\t*)\n+\t\t\ttm_file=arm/linux-elf.h\n+\t\t\t;;\n+\t\tesac\n+\t\ttmake_file=\"t-linux arm/t-linux\"\n+\t\textra_parts=\"crtbegin.o crtbeginS.o crtend.o crtendS.o\"\n+\t\tfixincludes=Makefile.in\t\t# Nothing to fix\n+\t\tgnu_ld=yes\n+\t\t;;\n+\tarm*-*-aout)\n \t\ttm_file=arm/aout.h\n \t\ttmake_file=arm/t-bare\n \t\t;;\n+\tarm*-*-elf)\n+\t\ttm_file=arm/unknown-elf.h\n+\t\ttmake_file=arm/t-arm-elf\n+\t\t;;\n \tc1-convex-*)\t\t\t# Convex C1\n \t\ttarget_cpu_default=1\n \t\tuse_collect2=yes"}]}