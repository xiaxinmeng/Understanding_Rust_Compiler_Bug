{"sha": "5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWFlZDdlMmMwZDliZGUxNGY1YzBlNDVlM2QyOTcyN2U2ZWM5NDMyNA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2016-02-26T08:34:58Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2016-02-26T08:34:58Z"}, "message": "re PR target/69551 (Wrong code with single element vector insert)\n\n2016-02-26  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/69551\n\t* tree-ssa-structalias.c (get_constraint_for_ssa_var): When\n\tlooking through aliases adjust DECL_PT_UID to refer to the\n\tultimate alias target.\n\n\t* gcc.dg/torture/pr69951.c: New testcase.\n\nFrom-SVN: r233734", "tree": {"sha": "3dd3aecb6d28e8d12f988dbaf374e94218608ece", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3dd3aecb6d28e8d12f988dbaf374e94218608ece"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "8ba8c3757ba2d1325e75b637ca410609f716d4c0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ba8c3757ba2d1325e75b637ca410609f716d4c0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ba8c3757ba2d1325e75b637ca410609f716d4c0"}], "stats": {"total": 41, "additions": 41, "deletions": 0}, "files": [{"sha": "c4aa8c04a55da7600dea0bee2347b7c91d836537", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "patch": "@@ -1,3 +1,10 @@\n+2016-02-26  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/69551\n+\t* tree-ssa-structalias.c (get_constraint_for_ssa_var): When\n+\tlooking through aliases adjust DECL_PT_UID to refer to the\n+\tultimate alias target.\n+\n 2016-02-25  Martin Liska  <mliska@suse.cz>\n \n \tPR middle-end/69919"}, {"sha": "5fdc3e354895e16ff2236a1af0055b5f9efeb660", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "patch": "@@ -1,3 +1,8 @@\n+2016-02-26  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/69551\n+\t* gcc.dg/torture/pr69951.c: New testcase.\n+\n 2016-02-25  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/48795"}, {"sha": "cb46fefccdb23041faed0f29142cad28997b5616", "filename": "gcc/testsuite/gcc.dg/torture/pr69951.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr69951.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr69951.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr69951.c?ref=5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do run } */\n+/* { dg-require-alias \"\" } */\n+\n+extern void abort (void);\n+\n+int a = 1, c = 1;\n+extern int b __attribute__((alias(\"a\")));\n+extern int d __attribute__((alias(\"c\")));\n+int main(int argc)\n+{\n+  int *p, *q;\n+  if (argc)\n+    p = &c, q = &d;\n+  else\n+    p = &b, q = &d;\n+  *p = 1;\n+  *q = 2;\n+  if (*p == 1)\n+    abort();\n+  return 0;\n+}"}, {"sha": "de123800f0b31403848cf91aac88d52749fdca72", "filename": "gcc/tree-ssa-structalias.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2Ftree-ssa-structalias.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324/gcc%2Ftree-ssa-structalias.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-ssa-structalias.c?ref=5aed7e2c0d9bde14f5c0e45e3d29727e6ec94324", "patch": "@@ -2943,6 +2943,14 @@ get_constraint_for_ssa_var (tree t, vec<ce_s> *results, bool address_p)\n       if (node && node->alias && node->analyzed)\n \t{\n \t  node = node->ultimate_alias_target ();\n+\t  /* Canonicalize the PT uid of all aliases to the ultimate target.\n+\t     ???  Hopefully the set of aliases can't change in a way that\n+\t     changes the ultimate alias target.  */\n+\t  gcc_assert ((! DECL_PT_UID_SET_P (node->decl)\n+\t\t       || DECL_PT_UID (node->decl) == DECL_UID (node->decl))\n+\t\t      && (! DECL_PT_UID_SET_P (t)\n+\t\t\t  || DECL_PT_UID (t) == DECL_UID (node->decl)));\n+\t  DECL_PT_UID (t) = DECL_UID (node->decl);\n \t  t = node->decl;\n \t}\n     }"}]}