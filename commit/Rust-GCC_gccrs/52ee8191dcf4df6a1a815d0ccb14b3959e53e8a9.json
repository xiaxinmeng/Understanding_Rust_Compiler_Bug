{"sha": "52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTJlZTgxOTFkY2Y0ZGY2YTFhODE1ZDBjY2IxNGIzOTU5ZTUzZThhOQ==", "commit": {"author": {"name": "Siddhesh Poyarekar", "email": "siddhesh.poyarekar@linaro.org", "date": "2017-11-03T13:26:28Z"}, "committer": {"name": "Richard Earnshaw", "email": "rearnsha@gcc.gnu.org", "date": "2017-11-03T13:26:28Z"}, "message": "[aarch64] Add Qualcomm saphira CPU support.\n\nThis patch adds an mcpu option for the Qualcomm saphira server part.\nTested on aarch64 and did not find any regressions resulting from this\npatch.\n\n2017-11-03  Siddhesh Poyarekar  <siddhesh.poyarekar@linaro.org>\n\t    Jim Wilson  <jim.wilson@linaro.org>\n\n\t* config/aarch64/aarch64-cores.def (saphira): New CPU.\n\t* config/aarch64/aarch64-tune.md: Regenerated.\n\t* doc/invoke.texi (AArch64 Options/-mtune): Add \"saphira\".\n\t* gcc/config/aarch64/aarch64.c (saphira_tunings): New tuning table.\n\n\nCo-Authored-By: Jim Wilson <jim.wilson@linaro.org>\n\nFrom-SVN: r254372", "tree": {"sha": "b5764b318e00f4d9611eb100f2a996cc868a33e0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b5764b318e00f4d9611eb100f2a996cc868a33e0"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/comments", "author": {"login": "siddhesh", "id": 158582, "node_id": "MDQ6VXNlcjE1ODU4Mg==", "avatar_url": "https://avatars.githubusercontent.com/u/158582?v=4", "gravatar_id": "", "url": "https://api.github.com/users/siddhesh", "html_url": "https://github.com/siddhesh", "followers_url": "https://api.github.com/users/siddhesh/followers", "following_url": "https://api.github.com/users/siddhesh/following{/other_user}", "gists_url": "https://api.github.com/users/siddhesh/gists{/gist_id}", "starred_url": "https://api.github.com/users/siddhesh/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/siddhesh/subscriptions", "organizations_url": "https://api.github.com/users/siddhesh/orgs", "repos_url": "https://api.github.com/users/siddhesh/repos", "events_url": "https://api.github.com/users/siddhesh/events{/privacy}", "received_events_url": "https://api.github.com/users/siddhesh/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a93ee058fa3f2b0569e43b425293f28858eebfaf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a93ee058fa3f2b0569e43b425293f28858eebfaf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a93ee058fa3f2b0569e43b425293f28858eebfaf"}], "stats": {"total": 45, "additions": 43, "deletions": 2}, "files": [{"sha": "ced4dd347e7a5cd89ed91ed98672f88f607a7551", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "patch": "@@ -1,3 +1,11 @@\n+2017-11-03  Siddhesh Poyarekar  <siddhesh.poyarekar@linaro.org>\n+\t    Jim Wilson  <jim.wilson@linaro.org>\n+\n+\t* config/aarch64/aarch64-cores.def (saphira): New CPU.\n+\t* config/aarch64/aarch64-tune.md: Regenerated.\n+\t* doc/invoke.texi (AArch64 Options/-mtune): Add \"saphira\".\n+\t* gcc/config/aarch64/aarch64.c (saphira_tunings): New tuning table.\n+\n 2017-11-03  Cupertino Miranda  <cmiranda@synopsys.com>\n \n \t* config/arc/arc.c (arc_save_restore): Corrected CFA note."}, {"sha": "cdf047c0fa22ec1396a10e071430c7853135fca5", "filename": "gcc/config/aarch64/aarch64-cores.def", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fconfig%2Faarch64%2Faarch64-cores.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fconfig%2Faarch64%2Faarch64-cores.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-cores.def?ref=52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "patch": "@@ -86,6 +86,11 @@ AARCH64_CORE(\"thunderx2t99\",  thunderx2t99,  thunderx2t99, 8_1A,  AARCH64_FL_FOR\n AARCH64_CORE(\"cortex-a55\",  cortexa55, cortexa53, 8_2A,  AARCH64_FL_FOR_ARCH8_2 | AARCH64_FL_RCPC | AARCH64_FL_DOTPROD, cortexa53, 0x41, 0xd05, -1)\n AARCH64_CORE(\"cortex-a75\",  cortexa75, cortexa57, 8_2A,  AARCH64_FL_FOR_ARCH8_2 | AARCH64_FL_RCPC | AARCH64_FL_DOTPROD, cortexa73, 0x41, 0xd0a, -1)\n \n+/* ARMv8.3-A Architecture Processors.  */\n+\n+/* Qualcomm ('Q') cores. */\n+AARCH64_CORE(\"saphira\",     saphira,    falkor,    8_3A,  AARCH64_FL_FOR_ARCH8_3 | AARCH64_FL_CRYPTO | AARCH64_FL_RCPC, saphira,   0x51, 0xC01, -1)\n+\n /* ARMv8-A big.LITTLE implementations.  */\n \n AARCH64_CORE(\"cortex-a57.cortex-a53\",  cortexa57cortexa53, cortexa53, 8A,  AARCH64_FL_FOR_ARCH8 | AARCH64_FL_CRC, cortexa57, 0x41, AARCH64_BIG_LITTLE (0xd07, 0xd03), -1)"}, {"sha": "7b3a7460561ee87e13799f726919c3f870781f6d", "filename": "gcc/config/aarch64/aarch64-tune.md", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fconfig%2Faarch64%2Faarch64-tune.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fconfig%2Faarch64%2Faarch64-tune.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64-tune.md?ref=52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "patch": "@@ -1,5 +1,5 @@\n ;; -*- buffer-read-only: t -*-\n ;; Generated automatically by gentune.sh from aarch64-cores.def\n (define_attr \"tune\"\n-\t\"cortexa35,cortexa53,cortexa57,cortexa72,cortexa73,thunderx,thunderxt88p1,thunderxt88,thunderxt81,thunderxt83,xgene1,falkor,qdf24xx,exynosm1,thunderx2t99p1,vulcan,thunderx2t99,cortexa55,cortexa75,cortexa57cortexa53,cortexa72cortexa53,cortexa73cortexa35,cortexa73cortexa53,cortexa75cortexa55\"\n+\t\"cortexa35,cortexa53,cortexa57,cortexa72,cortexa73,thunderx,thunderxt88p1,thunderxt88,thunderxt81,thunderxt83,xgene1,falkor,qdf24xx,exynosm1,thunderx2t99p1,vulcan,thunderx2t99,cortexa55,cortexa75,saphira,cortexa57cortexa53,cortexa72cortexa53,cortexa73cortexa35,cortexa73cortexa53,cortexa75cortexa55\"\n \t(const (symbol_ref \"((enum attr_tune) aarch64_tune)\")))"}, {"sha": "eb2d5f8ad456ad57b6a9032bdf6ebbac84965679", "filename": "gcc/config/aarch64/aarch64.c", "status": "modified", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fconfig%2Faarch64%2Faarch64.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fconfig%2Faarch64%2Faarch64.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Faarch64%2Faarch64.c?ref=52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "patch": "@@ -822,6 +822,34 @@ static const struct tune_params qdf24xx_tunings =\n   &qdf24xx_prefetch_tune\n };\n \n+/* Tuning structure for the Qualcomm Saphira core.  Default to falkor values\n+   for now.  */\n+static const struct tune_params saphira_tunings =\n+{\n+  &generic_extra_costs,\n+  &generic_addrcost_table,\n+  &generic_regmove_cost,\n+  &generic_vector_cost,\n+  &generic_branch_cost,\n+  &generic_approx_modes,\n+  4, /* memmov_cost  */\n+  4, /* issue_rate  */\n+  (AARCH64_FUSE_MOV_MOVK | AARCH64_FUSE_ADRP_ADD\n+   | AARCH64_FUSE_MOVK_MOVK), /* fuseable_ops  */\n+  16,\t/* function_align.  */\n+  8,\t/* jump_align.  */\n+  16,\t/* loop_align.  */\n+  2,\t/* int_reassoc_width.  */\n+  4,\t/* fp_reassoc_width.  */\n+  1,\t/* vec_reassoc_width.  */\n+  2,\t/* min_div_recip_mul_sf.  */\n+  2,\t/* min_div_recip_mul_df.  */\n+  0,\t/* max_case_values.  */\n+  tune_params::AUTOPREFETCHER_WEAK,\t/* autoprefetcher_model.  */\n+  (AARCH64_EXTRA_TUNE_NONE),\t\t/* tune_flags.  */\n+  &generic_prefetch_tune\n+};\n+\n static const struct tune_params thunderx2t99_tunings =\n {\n   &thunderx2t99_extra_costs,"}, {"sha": "2ef88e081f982f5619132cc33ce23c3fb542ae11", "filename": "gcc/doc/invoke.texi", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fdoc%2Finvoke.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9/gcc%2Fdoc%2Finvoke.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finvoke.texi?ref=52ee8191dcf4df6a1a815d0ccb14b3959e53e8a9", "patch": "@@ -14339,7 +14339,7 @@ Specify the name of the target processor for which GCC should tune the\n performance of the code.  Permissible values for this option are:\n @samp{generic}, @samp{cortex-a35}, @samp{cortex-a53}, @samp{cortex-a55},\n @samp{cortex-a57}, @samp{cortex-a72}, @samp{cortex-a73}, @samp{cortex-a75},\n-@samp{exynos-m1}, @samp{falkor}, @samp{qdf24xx},\n+@samp{exynos-m1}, @samp{falkor}, @samp{qdf24xx}, @samp{saphira},\n @samp{xgene1}, @samp{vulcan}, @samp{thunderx},\n @samp{thunderxt88}, @samp{thunderxt88p1}, @samp{thunderxt81},\n @samp{thunderxt83}, @samp{thunderx2t99}, @samp{cortex-a57.cortex-a53},"}]}