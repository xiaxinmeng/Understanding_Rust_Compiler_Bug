{"sha": "88df9da15894541d19330b2f2d6cd301ce4f4cbf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODhkZjlkYTE1ODk0NTQxZDE5MzMwYjJmMmQ2Y2QzMDFjZTRmNGNiZg==", "commit": {"author": {"name": "Dirk Mueller", "email": "dmueller@suse.de", "date": "2007-11-23T23:02:21Z"}, "committer": {"name": "Dirk Mueller", "email": "mueller@gcc.gnu.org", "date": "2007-11-23T23:02:21Z"}, "message": "re PR middle-end/34197 (array overflow warning without line number)\n\n2007-11-23  Dirk Mueller  <dmueller@suse.de>\n       Richard Guenther <rguenther@suse.de>\n\n       PR middle-end/34197\n       * tree-vrp.c (check_array_ref): Move check for valid location..\n       (check_array_bounds) here. Use EXPR_HAS_LOCATION().\n\n\nCo-Authored-By: Richard Guenther <rguenther@suse.de>\n\nFrom-SVN: r130385", "tree": {"sha": "c2bed6268f34a3f711cee93ae89b98112aa01a61", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2bed6268f34a3f711cee93ae89b98112aa01a61"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/88df9da15894541d19330b2f2d6cd301ce4f4cbf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88df9da15894541d19330b2f2d6cd301ce4f4cbf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/88df9da15894541d19330b2f2d6cd301ce4f4cbf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/88df9da15894541d19330b2f2d6cd301ce4f4cbf/comments", "author": null, "committer": null, "parents": [{"sha": "b96817da11c613095421177f06a1936a3e9bbf54", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b96817da11c613095421177f06a1936a3e9bbf54", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b96817da11c613095421177f06a1936a3e9bbf54"}], "stats": {"total": 15, "additions": 14, "deletions": 1}, "files": [{"sha": "4c34686d78218174a09c01c0ee98265212e2c648", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88df9da15894541d19330b2f2d6cd301ce4f4cbf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88df9da15894541d19330b2f2d6cd301ce4f4cbf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=88df9da15894541d19330b2f2d6cd301ce4f4cbf", "patch": "@@ -1,3 +1,10 @@\n+2007-11-23  Dirk Mueller  <dmueller@suse.de>\n+\tRichard Guenther <rguenther@suse.de>\n+\n+\tPR middle-end/34197\n+\t* tree-vrp.c (check_array_ref): Move check for valid location..\n+\t(check_array_bounds) here. Use EXPR_HAS_LOCATION().\n+\n 2007-11-23  Hans-Peter Nilsson  <hp@axis.com>\n \n \t* reload.c (find_reloads_address_1) <autoincdec cases>:"}, {"sha": "00264d9a12ca968f8b05b18e1276e74ff0cc2a72", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/88df9da15894541d19330b2f2d6cd301ce4f4cbf/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/88df9da15894541d19330b2f2d6cd301ce4f4cbf/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=88df9da15894541d19330b2f2d6cd301ce4f4cbf", "patch": "@@ -4339,7 +4339,7 @@ check_array_ref (tree ref, location_t* locus, bool ignore_off_by_one)\n \n   low_sub = up_sub = TREE_OPERAND (ref, 1);\n \n-  if (!up_bound || !locus || TREE_NO_WARNING (ref)\n+  if (!up_bound || TREE_NO_WARNING (ref)\n       || TREE_CODE (up_bound) != INTEGER_CST\n       /* Can not check flexible arrays.  */\n       || (TYPE_SIZE (TREE_TYPE (ref)) == NULL_TREE\n@@ -4441,6 +4441,12 @@ check_array_bounds (tree *tp, int *walk_subtree, void *data)\n   tree stmt = (tree)data;\n   location_t *location = EXPR_LOCUS (stmt);\n \n+  if (!EXPR_HAS_LOCATION (stmt))\n+    {\n+      *walk_subtree = FALSE;\n+      return NULL_TREE;\n+    }\n+\n   *walk_subtree = TRUE;\n \n   if (TREE_CODE (t) == ARRAY_REF)"}]}