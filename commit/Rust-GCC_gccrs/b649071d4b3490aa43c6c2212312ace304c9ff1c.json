{"sha": "b649071d4b3490aa43c6c2212312ace304c9ff1c", "node_id": "C_kwDOANBUbNoAKGI2NDkwNzFkNGIzNDkwYWE0M2M2YzIyMTIzMTJhY2UzMDRjOWZmMWM", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2022-01-27T15:53:07Z"}, "committer": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2022-02-01T19:14:12Z"}, "message": "tree: move tree_vec_map_cache_hasher into header\n\ngcc/ChangeLog:\n\n\t* tree.h (struct tree_vec_map_cache_hasher): Move from...\n\t* tree.cc (struct tree_vec_map_cache_hasher): ...here.", "tree": {"sha": "727dd53672950c787bdc7a75f8a27c42b3494707", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/727dd53672950c787bdc7a75f8a27c42b3494707"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b649071d4b3490aa43c6c2212312ace304c9ff1c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b649071d4b3490aa43c6c2212312ace304c9ff1c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b649071d4b3490aa43c6c2212312ace304c9ff1c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b649071d4b3490aa43c6c2212312ace304c9ff1c/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "f32f74c2e8cef5fe37af6d4e8d7e8f6b4c8ae9a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f32f74c2e8cef5fe37af6d4e8d7e8f6b4c8ae9a8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f32f74c2e8cef5fe37af6d4e8d7e8f6b4c8ae9a8"}], "stats": {"total": 34, "additions": 17, "deletions": 17}, "files": [{"sha": "7ce4f242751a9856ebaede03221578f4ab76ea78", "filename": "gcc/tree.cc", "status": "modified", "additions": 0, "deletions": 17, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b649071d4b3490aa43c6c2212312ace304c9ff1c/gcc%2Ftree.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b649071d4b3490aa43c6c2212312ace304c9ff1c/gcc%2Ftree.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.cc?ref=b649071d4b3490aa43c6c2212312ace304c9ff1c", "patch": "@@ -242,23 +242,6 @@ static GTY ((cache))\n static GTY ((cache))\n      hash_table<tree_decl_map_cache_hasher> *value_expr_for_decl;\n \n-struct tree_vec_map_cache_hasher : ggc_cache_ptr_hash<tree_vec_map>\n-{\n-  static hashval_t hash (tree_vec_map *m) { return DECL_UID (m->base.from); }\n-\n-  static bool\n-  equal (tree_vec_map *a, tree_vec_map *b)\n-  {\n-    return a->base.from == b->base.from;\n-  }\n-\n-  static int\n-  keep_cache_entry (tree_vec_map *&m)\n-  {\n-    return ggc_marked_p (m->base.from);\n-  }\n-};\n-\n static GTY ((cache))\n      hash_table<tree_vec_map_cache_hasher> *debug_args_for_decl;\n "}, {"sha": "e2157d66d6c77bd12054d07a62db4999de7f9fda", "filename": "gcc/tree.h", "status": "modified", "additions": 17, "deletions": 0, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b649071d4b3490aa43c6c2212312ace304c9ff1c/gcc%2Ftree.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b649071d4b3490aa43c6c2212312ace304c9ff1c/gcc%2Ftree.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.h?ref=b649071d4b3490aa43c6c2212312ace304c9ff1c", "patch": "@@ -5559,6 +5559,23 @@ struct tree_decl_map_cache_hasher : ggc_cache_ptr_hash<tree_decl_map>\n #define tree_vec_map_hash tree_decl_map_hash\n #define tree_vec_map_marked_p tree_map_base_marked_p\n \n+struct tree_vec_map_cache_hasher : ggc_cache_ptr_hash<tree_vec_map>\n+{\n+  static hashval_t hash (tree_vec_map *m) { return DECL_UID (m->base.from); }\n+\n+  static bool\n+  equal (tree_vec_map *a, tree_vec_map *b)\n+  {\n+    return a->base.from == b->base.from;\n+  }\n+\n+  static int\n+  keep_cache_entry (tree_vec_map *&m)\n+  {\n+    return ggc_marked_p (m->base.from);\n+  }\n+};\n+\n /* Hasher for tree decls.  Pointer equality is enough here, but the DECL_UID\n    is a better hash than the pointer value and gives a predictable traversal\n    order.  Additionally it can be used across PCH save/restore.  */"}]}