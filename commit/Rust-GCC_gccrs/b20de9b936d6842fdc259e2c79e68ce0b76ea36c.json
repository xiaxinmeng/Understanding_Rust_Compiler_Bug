{"sha": "b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjIwZGU5YjkzNmQ2ODQyZmRjMjU5ZTJjNzllNjhjZTBiNzZlYTM2Yw==", "commit": {"author": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-17T12:16:04Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2009-04-17T12:16:04Z"}, "message": "[multiple changes]\n\n2009-04-17  Javier Miranda  <miranda@adacore.com>\n\n\t* sem_ch6.adb (Check_Anonymous_Return): Add missing checks to\n\tavoid generating code that references the Current_Master\n\twhen compiling without tasks.\n\n2009-04-17  Vincent Celier  <celier@adacore.com>\n\n\t* prj-attr.adb: New project level attribute Target\n\t\n\t* prj-nmsc.adb (Process_Project_Level_Simple_Attributes): Process\n\tattribute Target\n\t\n\t* prj.ads (Project_Configuration): New component Target\n\nFrom-SVN: r146256", "tree": {"sha": "8d2ecb0a15535806ffe4827a2eeb82035440245b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8d2ecb0a15535806ffe4827a2eeb82035440245b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/comments", "author": null, "committer": null, "parents": [{"sha": "68f7b0613fceb32f45de2928d0b05a88b0641d0f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/68f7b0613fceb32f45de2928d0b05a88b0641d0f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/68f7b0613fceb32f45de2928d0b05a88b0641d0f"}], "stats": {"total": 37, "additions": 35, "deletions": 2}, "files": [{"sha": "b1820a09d15b400bfa5f064a23834ef6f2a5203a", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "patch": "@@ -1,3 +1,18 @@\n+2009-04-17  Javier Miranda  <miranda@adacore.com>\n+\n+\t* sem_ch6.adb (Check_Anonymous_Return): Add missing checks to\n+\tavoid generating code that references the Current_Master\n+\twhen compiling without tasks.\n+\n+2009-04-17  Vincent Celier  <celier@adacore.com>\n+\n+\t* prj-attr.adb: New project level attribute Target\n+\t\n+\t* prj-nmsc.adb (Process_Project_Level_Simple_Attributes): Process\n+\tattribute Target\n+\t\n+\t* prj.ads (Project_Configuration): New component Target\n+\n 2009-04-17  Thomas Quinot  <quinot@adacore.com>\n \n \t* exp_ch7.adb (Expand_Ctrl_Function_Call): Remove incorrect special"}, {"sha": "81a611f7800f751db3846255dd375b8cc362604a", "filename": "gcc/ada/prj-attr.adb", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fprj-attr.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fprj-attr.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-attr.adb?ref=b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "patch": "@@ -116,6 +116,7 @@ package body Prj.Attr is\n    \"Satoolchain_description#\" &\n    \"Saobject_generated#\" &\n    \"Saobjects_linked#\" &\n+   \"SVtarget#\" &\n \n    --  Configuration - Libraries\n "}, {"sha": "e9bc518de69fb9978c98a1831b4723baa0ec2427", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "patch": "@@ -1977,7 +1977,13 @@ package body Prj.Nmsc is\n               In_Tree.Variable_Elements.Table (Attribute_Id);\n \n             if not Attribute.Value.Default then\n-               if Attribute.Name = Name_Library_Builder then\n+               if Attribute.Name = Name_Target then\n+\n+                  --  Attribute Target: the target specified\n+\n+                  Data.Config.Target := Attribute.Value.Value;\n+\n+               elsif Attribute.Name = Name_Library_Builder then\n \n                   --  Attribute Library_Builder: the application to invoke\n                   --  to build libraries."}, {"sha": "aa8d88f7571e11cb37f8cbdbf0fe904e6b3ba02b", "filename": "gcc/ada/prj.ads", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fprj.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fprj.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj.ads?ref=b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "patch": "@@ -997,6 +997,9 @@ package Prj is\n    --  The format of the different response files\n \n    type Project_Configuration is record\n+      Target                        : Name_Id         := No_Name;\n+      --  The target of the configuration, when specified\n+\n       Run_Path_Option               : Name_List_Index := No_Name_List;\n       --  The option to use when linking to specify the path where to look for\n       --  libraries.\n@@ -1106,7 +1109,8 @@ package Prj is\n    end record;\n \n    Default_Project_Config : constant Project_Configuration :=\n-                              (Run_Path_Option               => No_Name_List,\n+                              (Target                        => No_Name,\n+                               Run_Path_Option               => No_Name_List,\n                                Executable_Suffix             => No_Name,\n                                Linker                        => No_Path,\n                                Map_File_Option               => No_Name,"}, {"sha": "c51f8435fd498df10707927d0a3c50df27a006e0", "filename": "gcc/ada/sem_ch6.adb", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fsem_ch6.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b20de9b936d6842fdc259e2c79e68ce0b76ea36c/gcc%2Fada%2Fsem_ch6.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fsem_ch6.adb?ref=b20de9b936d6842fdc259e2c79e68ce0b76ea36c", "patch": "@@ -47,6 +47,8 @@ with Nlists;   use Nlists;\n with Nmake;    use Nmake;\n with Opt;      use Opt;\n with Output;   use Output;\n+with Restrict; use Restrict;\n+with Rident;   use Rident;\n with Rtsfind;  use Rtsfind;\n with Sem;      use Sem;\n with Sem_Aux;  use Sem_Aux;\n@@ -1485,6 +1487,11 @@ package body Sem_Ch6 is\n                           and then\n                         Is_Limited_Record (Designated_Type (Etype (Scop)))))\n            and then Expander_Active\n+\n+            --  Avoid cases with no tasking support\n+\n+           and then RTE_Available (RE_Current_Master)\n+           and then not Restriction_Active (No_Task_Hierarchy)\n          then\n             Decl :=\n               Make_Object_Declaration (Loc,"}]}