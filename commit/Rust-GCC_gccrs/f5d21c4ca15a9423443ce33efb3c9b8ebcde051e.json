{"sha": "f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjVkMjFjNGNhMTVhOTQyMzQ0M2NlMzNlZmIzYzliOGViY2RlMDUxZQ==", "commit": {"author": {"name": "Ziemowit Laski", "email": "zlaski@apple.com", "date": "2005-07-07T06:25:49Z"}, "committer": {"name": "Ziemowit Laski", "email": "zlaski@gcc.gnu.org", "date": "2005-07-07T06:25:49Z"}, "message": "re PR objc/22274 (string[1-4].m, const-str-5.m fails with the gnu runtime)\n\n/objc/ChangeLog]\n2005-07-07  Ziemowit Laski  <zlaski@apple.com>\n\n        PR objc/22274\n        * objc-act.c (objc_build_string_object): For GNU-style constants,\n        use the @interface type rather than the built-in type.\n\n[gcc/testsuite/ChangeLog]\n2005-07-07  Ziemowit Laski  <zlaski@apple.com>\n\n        PR objc/22274\n        * obj-c++.dg/gnu-runtime-[1-2].mm: New.\n        * objc.dg/gnu-runtime-2.m: New.\n\nFrom-SVN: r101686", "tree": {"sha": "93c09ea889a25a12734d437c45ac4d1457f89401", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/93c09ea889a25a12734d437c45ac4d1457f89401"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/comments", "author": null, "committer": null, "parents": [{"sha": "1a5577239fdf250e3fde521810339981d90c11c8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a5577239fdf250e3fde521810339981d90c11c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a5577239fdf250e3fde521810339981d90c11c8"}], "stats": {"total": 93, "additions": 92, "deletions": 1}, "files": [{"sha": "6d7b9a4d9f15b5c2e1729bf635b48749a7ee3543", "filename": "gcc/objc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Fobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Fobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2FChangeLog?ref=f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "patch": "@@ -1,3 +1,9 @@\n+2005-07-07  Ziemowit Laski  <zlaski@apple.com>\n+\n+\tPR objc/22274\n+\t* objc-act.c (objc_build_string_object): For GNU-style constants,\n+\tuse the @interface type rather than the built-in type.\n+\n 2005-07-03  Kazu Hirata  <kazu@codesourcery.com>\n \n \t* Make-lang.in (cc1plus-checksum.c): Use"}, {"sha": "48cf70758632357371d2decde7e6812b5af10f2e", "filename": "gcc/objc/objc-act.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Fobjc%2Fobjc-act.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Fobjc%2Fobjc-act.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fobjc%2Fobjc-act.c?ref=f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "patch": "@@ -1915,7 +1915,7 @@ objc_build_string_object (tree string)\n \n       if (!flag_next_runtime)\n \tconstructor\n-\t  = objc_add_static_instance (constructor, internal_const_str_type);\n+\t  = objc_add_static_instance (constructor, constant_string_type);\n       else\n         {\n \t  var = build_decl (CONST_DECL, NULL, TREE_TYPE (constructor));"}, {"sha": "d8efcde2a6393c8577ad67e4c806a37ac1f4050e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "patch": "@@ -1,3 +1,9 @@\n+2005-07-07  Ziemowit Laski  <zlaski@apple.com>\n+\n+\tPR objc/22274\n+\t* obj-c++.dg/gnu-runtime-[1-2].mm: New.\n+\t* objc.dg/gnu-runtime-2.m: New.\n+\n 2005-07-06  Jeff Law  <law@redhat.com>\n \n \t* gcc.dg/tree-ssa/vrp17.c: New test."}, {"sha": "dab921554f190d4af6a445981890454e7308df17", "filename": "gcc/testsuite/obj-c++.dg/gnu-runtime-1.mm", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-runtime-1.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-runtime-1.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-runtime-1.mm?ref=f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "patch": "@@ -0,0 +1,19 @@\n+/* Test that compiling for the GNU runtime works (regardless of\n+   the system runtime used).  */\n+/* Author: Ziemowit Laski <zlaski@apple.com>  */\n+/* { dg-do compile } */\n+/* { dg-options \"-fgnu-runtime\" } */\n+\n+#include <objc/Object.h>\n+\n+@interface FooBar: Object\n+- (void)boo;\n+@end\n+\n+int main ()\n+{\n+  id fooBarInst = [[FooBar alloc] init];\n+  [fooBarInst boo];\n+  return 0;\n+}\n+"}, {"sha": "09204e3c918ea4240160ca5d50ff3a222e8288cd", "filename": "gcc/testsuite/obj-c++.dg/gnu-runtime-2.mm", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-runtime-2.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-runtime-2.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-runtime-2.mm?ref=f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "patch": "@@ -0,0 +1,30 @@\n+/* Sanity check for GNU-runtime version of constant strings,\n+   regardless of runtime used on target system.  */\n+\n+/* { dg-do run } */\n+/* { dg-options \"-fgnu-runtime\" } */\n+\n+#include <objc/Object.h>\n+#include <string.h>\n+#include <stdlib.h>\n+\n+@interface NXConstantString: Object\n+{\n+  char *c_string;\n+  unsigned int len;                                                     \n+}\n+-(const char *) cString;\n+-(unsigned int) length;\n+@end\n+\n+@implementation NXConstantString\n+-(const char *) cString { return c_string; }\n+-(unsigned int) length  { return len; }\n+@end\n+\n+int main(int argc, void **args)\n+{\n+  if (strcmp ([@\"this is a string\" cString], \"this is a string\"))\n+    abort ();\n+  return 0;\n+}"}, {"sha": "09204e3c918ea4240160ca5d50ff3a222e8288cd", "filename": "gcc/testsuite/objc.dg/gnu-runtime-2.m", "status": "added", "additions": 30, "deletions": 0, "changes": 30, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-runtime-2.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f5d21c4ca15a9423443ce33efb3c9b8ebcde051e/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-runtime-2.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-runtime-2.m?ref=f5d21c4ca15a9423443ce33efb3c9b8ebcde051e", "patch": "@@ -0,0 +1,30 @@\n+/* Sanity check for GNU-runtime version of constant strings,\n+   regardless of runtime used on target system.  */\n+\n+/* { dg-do run } */\n+/* { dg-options \"-fgnu-runtime\" } */\n+\n+#include <objc/Object.h>\n+#include <string.h>\n+#include <stdlib.h>\n+\n+@interface NXConstantString: Object\n+{\n+  char *c_string;\n+  unsigned int len;                                                     \n+}\n+-(const char *) cString;\n+-(unsigned int) length;\n+@end\n+\n+@implementation NXConstantString\n+-(const char *) cString { return c_string; }\n+-(unsigned int) length  { return len; }\n+@end\n+\n+int main(int argc, void **args)\n+{\n+  if (strcmp ([@\"this is a string\" cString], \"this is a string\"))\n+    abort ();\n+  return 0;\n+}"}]}