{"sha": "37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzdmNDU4ZGMxZWYzYWE4NWVlNWZmMDdjZWMxMjUzMWQxN2RkYThiZQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-11-19T14:41:26Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2012-11-19T14:41:26Z"}, "message": "re PR c++/55368 (Comma before semicolon in struct definition is not rejected)\n\n/cp\n2012-11-19  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/55368\n\t* parser.c (cp_parser_member_declaration): Emit an error in case\n\tof stray comma at end of member declaration.\n\n/testsuite\n2012-11-19  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/55368\n\t* g++.dg/parse/struct-5.C: New.\n\nFrom-SVN: r193624", "tree": {"sha": "5635bce9e4cf62c03e4cfaccd2e106bb27d5de32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5635bce9e4cf62c03e4cfaccd2e106bb27d5de32"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "html_url": "https://github.com/Rust-GCC/gccrs/commit/37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/comments", "author": null, "committer": null, "parents": [{"sha": "e252e96aae2161af2838e993ea2373c91436aaa3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e252e96aae2161af2838e993ea2373c91436aaa3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e252e96aae2161af2838e993ea2373c91436aaa3"}], "stats": {"total": 28, "additions": 25, "deletions": 3}, "files": [{"sha": "0e1be07152e294f3e9a9bd9db3c23e630c441057", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "patch": "@@ -1,3 +1,9 @@\n+2012-11-19  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/55368\n+\t* parser.c (cp_parser_member_declaration): Emit an error in case\n+\tof stray comma at end of member declaration.\n+\n 2012-11-19  Jason Merrill  <jason@redhat.com>\n \n \t* class.c (one_inheriting_sig): Don't inherit base copy ctors."}, {"sha": "a2d8062d7eb0dfc3a8f7364225e1599b04213422", "filename": "gcc/cp/parser.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Fcp%2Fparser.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Fcp%2Fparser.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fparser.c?ref=37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "patch": "@@ -19407,7 +19407,15 @@ cp_parser_member_declaration (cp_parser* parser)\n \t  parser->object_scope = NULL_TREE;\n \t  /* If it's a `,', then there are more declarators.  */\n \t  if (cp_lexer_next_token_is (parser->lexer, CPP_COMMA))\n-\t    cp_lexer_consume_token (parser->lexer);\n+\t    {\n+\t      cp_lexer_consume_token (parser->lexer);\n+\t      if (cp_lexer_next_token_is (parser->lexer, CPP_SEMICOLON))\n+\t\t{\n+\t\t  cp_token *token = cp_lexer_previous_token (parser->lexer);\n+\t\t  error_at (token->location,\n+\t\t\t    \"stray %<,%> at end of member declaration\");\n+\t\t}\n+\t    }\n \t  /* If the next token isn't a `;', then we have a parse error.  */\n \t  else if (cp_lexer_next_token_is_not (parser->lexer,\n \t\t\t\t\t       CPP_SEMICOLON))"}, {"sha": "68d9738bbb6e6e91f4b475519310231a4cee8736", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 2, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "patch": "@@ -1,3 +1,8 @@\n+2012-11-19  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/55368\n+\t* g++.dg/parse/struct-5.C: New.\n+\n 2012-11-19  Tom de Vries  <tom@codesourcery.com>\n \n \tPR rtl-optimization/55315\n@@ -13,8 +18,8 @@\n \t-[2, 2] and -[3, 3] and -[4, 4] range tests together.\n \n \t* lib/asan-dg.exp (asan_symbolize): Prune BFD: prefixed error messages\n-\tfrom addr2line_output.  Increment idx if asking for more than one address\n-\tin one object.\n+\tfrom addr2line_output.  Increment idx if asking for more than one\n+\taddress in one object.\n \n 2012-11-16  Jakub Jelinek  <jakub@redhat.com>\n "}, {"sha": "4cd1b5d33c34d5360b5a27842644f341f65eb707", "filename": "gcc/testsuite/g++.dg/parse/struct-5.C", "status": "added", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fstruct-5.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/37f458dc1ef3aa85ee5ff07cec12531d17dda8be/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fstruct-5.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fparse%2Fstruct-5.C?ref=37f458dc1ef3aa85ee5ff07cec12531d17dda8be", "patch": "@@ -0,0 +1,3 @@\n+// PR c++/55368\n+\n+struct A { struct B *C,; };  // { dg-error \"stray\" }"}]}