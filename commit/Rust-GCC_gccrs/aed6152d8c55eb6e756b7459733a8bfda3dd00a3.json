{"sha": "aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWVkNjE1MmQ4YzU1ZWI2ZTc1NmI3NDU5NzMzYThiZmRhM2RkMDBhMw==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-08-04T02:52:53Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-08-04T02:52:53Z"}, "message": "configure.in: Eliminate uses of changequote (mostly by quoting []).\n\n\t* configure.in: Eliminate uses of changequote (mostly by quoting []).\n\tReplace most top level 'dnl' comments with '#' comments, conforming\n\tto new autoconf style.  Use AS_HELP_STRING throughout; improve a few\n\thelp strings.\n\t* configure: Rebuilt.\n\nFrom-SVN: r85540", "tree": {"sha": "4348570387b3b9846428567b471becb59bfa69f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4348570387b3b9846428567b471becb59bfa69f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/comments", "author": null, "committer": null, "parents": [{"sha": "b0e9ac085062db3b7f9fa31f6c066082e63938a0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b0e9ac085062db3b7f9fa31f6c066082e63938a0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b0e9ac085062db3b7f9fa31f6c066082e63938a0"}], "stats": {"total": 328, "additions": 191, "deletions": 137}, "files": [{"sha": "fdd047bc91afe07362061343ce716f97c9d6eac4", "filename": "libjava/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "patch": "@@ -1,3 +1,11 @@\n+2004-08-03  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* configure.in: Eliminate uses of changequote (mostly by quoting []).\n+\tReplace most top level 'dnl' comments with '#' comments, conforming\n+\tto new autoconf style.  Use AS_HELP_STRING throughout; improve a few\n+\thelp strings.\n+\t* configure: Rebuilt.\n+\n 2004-07-17  Nathanael Nerode  <neroden@gcc.gnu.org>\n \n \t* acinclude.m4: Include no-executables.m4."}, {"sha": "db7675011e0f3ac06c6190f1b11e4bf450604521", "filename": "libjava/configure", "status": "modified", "additions": 72, "deletions": 27, "changes": 99, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/libjava%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/libjava%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure?ref=aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "patch": "@@ -848,8 +848,8 @@ Optional Features:\n   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)\n   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]\n   --enable-version-specific-runtime-libs\n-   specify that runtime libraries should be installed in a compiler-specific\n-   directory\n+                          specify that runtime libraries should be installed\n+                          in a compiler-specific directory\n   --enable-multilib       build many library versions (default)\n   --enable-maintainer-mode enable make rules and dependencies not useful\n                           (and sometimes confusing) to the casual installer\n@@ -862,27 +862,29 @@ Optional Features:\n   --enable-hash-synchronization\n                           use global hash table for monitor locks\n   --enable-libgcj-multifile\n-                          allow compilation of several files at once\n+                 allow compilation of several files at once\n+\n   --enable-libgcj-debug   enable runtime debugging code\n   --enable-interpreter    enable interpreter\n-  --enable-sjlj-exceptions  force use of builtin_setjmp for exceptions\n+  --enable-sjlj-exceptions\n+                          force use of builtin_setjmp for exceptions\n   --disable-java-net      disable java.net\n   --disable-jvmpi         disable JVMPI support\n   --enable-java-awt       list of AWT peer implementations to be built\n-  --enable-gtk-cairo       build the cairo Graphics2D implementation on GTK\n-  --enable-java-gc=TYPE   choose garbage collector boehm\n+  --enable-gtk-cairo      build the cairo Graphics2D implementation on GTK\n+  --enable-java-gc=TYPE   choose garbage collector (default is boehm)\n \n Optional Packages:\n   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]\n   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)\n   --with-target-subdir=SUBDIR\n-                           configuring in a subdirectory\n-  --with-cross-host=HOST  configuring with a cross compiler\n-  --with-newlib           Configuring with newlib\n+                          configure in a subdirectory\n+  --with-cross-host=HOST  configure with a cross compiler from HOST\n+  --with-newlib           configure with newlib\n   --with-gnu-ld           assume the C compiler uses GNU ld default=no\n   --with-pic              try to use only PIC/non-PIC objects default=use both\n-  --with-win32-nlsapi=ansi, unicows or unicode\n-                          native MinGW libgcj Win32 OS API ansi\n+  --with-win32-nlsapi=ansi or unicows or unicode\n+                          native MinGW libgcj Win32 OS API (default is ansi)\n   --without-libffi        don't use libffi\n   --with-ecos             enable runtime eCos target support\n   --with-system-zlib      use installed libz\n@@ -1340,13 +1342,16 @@ ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n \n \n+# We use these options to decide which functions to include.\n \n # Check whether --with-target-subdir or --without-target-subdir was given.\n if test \"${with_target_subdir+set}\" = set; then\n   withval=\"$with_target_subdir\"\n \n fi;\n \n+# We may get other options which we don't document:\n+# --with-target-subdir, --with-multisrctop, --with-multisubdir\n \n # When building with srcdir == objdir, links to the source files will\n # be created in directories within the target_subdir.  We have to\n@@ -1576,6 +1581,7 @@ else\n \n fi;\n \n+# Default to --enable-multilib\n # Check whether --enable-multilib or --disable-multilib was given.\n if test \"${enable_multilib+set}\" = set; then\n   enableval=\"$enable_multilib\"\n@@ -1589,6 +1595,7 @@ echo \"$as_me: error: bad value ${enableval} for multilib option\" >&2;}\n else\n   multilib=yes\n fi;\n+# It may not be safe to run linking tests in AC_PROG_CC/AC_PROG_CXX.\n \n \n # (1) We use an abnormal CXX (without library references), so we\n@@ -2921,7 +2928,9 @@ CXXFLAGS=\"$save_CXXFLAGS\"\n \n \n \n+# version is pulled out to make it a bit easier to change using sed.\n version=0.0.7\n+# Still use \"libjava\" here to placate dejagnu.\n # Find a good install program.  We prefer a C program (faster),\n # so one script is as good as another.  But avoid the broken or\n # incompatible versions:\n@@ -4315,7 +4324,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 4318 \"configure\"' > conftest.$ac_ext\n+  echo '#line 4327 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -4871,6 +4880,7 @@ else\n fi\n \n \n+# The -no-testsuite modules omit the test subdir.\n \n \n if test -d $srcdir/testsuite; then\n@@ -4881,12 +4891,15 @@ else\n   TESTSUBDIR_FALSE=\n fi\n \n+# Should the runtime set system properties by examining the\n+# environment variable GCJ_PROPERTIES?\n # Check whether --enable-getenv-properties or --disable-getenv-properties was given.\n if test \"${enable_getenv_properties+set}\" = set; then\n   enableval=\"$enable_getenv_properties\"\n \n fi;\n \n+# Whether GCJ_PROPERTIES is used depends on the target.\n if test -z \"$enable_getenv_properties\"; then\n    enable_getenv_properties=${enable_getenv_properties_default-yes}\n fi\n@@ -4898,6 +4911,7 @@ _ACEOF\n \n fi\n \n+# Whether we should use arguments to main()\n if test -z \"$enable_main_args\"; then\n    enable_main_args=${enable_main_args_default-yes}\n fi\n@@ -4910,6 +4924,9 @@ _ACEOF\n fi\n \n \n+# Should we use hashtable-based synchronization?\n+# Currently works only for Linux X86/ia64\n+# Typically faster and more space-efficient\n # Check whether --enable-hash-synchronization or --disable-hash-synchronization was given.\n if test \"${enable_hash_synchronization+set}\" = set; then\n   enableval=\"$enable_hash_synchronization\"\n@@ -4949,8 +4966,7 @@ fi\n # Check whether --with-win32-nlsapi or --without-win32-nlsapi was given.\n if test \"${with_win32_nlsapi+set}\" = set; then\n   withval=\"$with_win32_nlsapi\"\n-\n-case \"${withval}\" in\n+  case \"${withval}\" in\n   ansi) with_win32_nlsapi=ansi ;;\n   unicows) with_win32_nlsapi=unicows ;;\n   unicode) with_win32_nlsapi=unicode ;;\n@@ -4972,6 +4988,8 @@ _ACEOF\n     ;;\n esac\n \n+# configure.host sets slow_pthread_self if the synchronization code should\n+# try to avoid pthread_self calls by caching thread IDs in a hashtable.\n if test \"${slow_pthread_self}\" = \"yes\"; then\n \n cat >>confdefs.h <<\\_ACEOF\n@@ -4981,6 +4999,7 @@ _ACEOF\n fi\n \n \n+# See if the user has requested runtime debugging.\n LIBGCJDEBUG=\"false\"\n \n # Check whether --enable-libgcj-debug or --disable-libgcj-debug was given.\n@@ -4996,6 +5015,7 @@ _ACEOF\n   fi\n fi;\n \n+# See if the user has the interpreter included.\n # Check whether --enable-interpreter or --disable-interpreter was given.\n if test \"${enable_interpreter+set}\" = set; then\n   enableval=\"$enable_interpreter\"\n@@ -5033,7 +5053,7 @@ if test \"${enable_sjlj_exceptions+set}\" = set; then\n   :\n else\n   cat > conftest.$ac_ext << EOF\n-#line 5036 \"configure\"\n+#line 5056 \"configure\"\n struct S { ~S(); };\n void bar();\n void foo()\n@@ -5089,12 +5109,15 @@ if test $can_unwind_signal = no && test $enable_sjlj_exceptions = no; then\n   EXCEPTIONSPEC=\n fi\n \n+# See if the user wants to disable java.net.  This is the mildly\n+# ugly way that we admit that target-side configuration sucks.\n # Check whether --enable-java-net or --disable-java-net was given.\n if test \"${enable_java_net+set}\" = set; then\n   enableval=\"$enable_java_net\"\n \n fi;\n \n+# Whether java.net is built by default can depend on the target.\n if test -z \"$enable_java_net\"; then\n    enable_java_net=${enable_java_net_default-yes}\n fi\n@@ -5106,11 +5129,14 @@ _ACEOF\n \n fi\n \n+# See if the user wants to configure without libffi.  Some\n+# architectures don't support it, and default values are set in\n+# configure.host.\n \n # Check whether --with-libffi or --without-libffi was given.\n if test \"${with_libffi+set}\" = set; then\n   withval=\"$with_libffi\"\n-\n+  :\n else\n   with_libffi=${with_libffi_default-yes}\n fi;\n@@ -5129,6 +5155,7 @@ fi\n \n \n \n+# See if the user wants to disable JVMPI support.\n # Check whether --enable-jvmpi or --disable-jvmpi was given.\n if test \"${enable_jvmpi+set}\" = set; then\n   enableval=\"$enable_jvmpi\"\n@@ -5143,6 +5170,10 @@ _ACEOF\n \n fi\n \n+# If the target is an eCos system, use the appropriate eCos\n+# I/O routines.\n+# FIXME: this should not be a local option but a global target\n+# system; at present there is no eCos target.\n TARGET_ECOS=${PROCESS-\"no\"}\n \n # Check whether --with-ecos or --without-ecos was given.\n@@ -5551,6 +5582,8 @@ rm -f conftest*\n \n \n \n+# These may not be defined in a non-ANS conformant embedded system.\n+# FIXME: Should these case a runtime exception in that case?\n cat >conftest.$ac_ext <<_ACEOF\n /* confdefs.h.  */\n _ACEOF\n@@ -5590,6 +5623,8 @@ fi\n rm -f conftest*\n \n \n+# Create the subdirectory for natFile.cc, or the attempt\n+# to create the link will fail.\n test -d java || mkdir java\n test -d java/io || mkdir java/io\n test -d gnu || mkdir gnu\n@@ -5603,6 +5638,7 @@ done\n           ac_config_links=\"$ac_config_links $ac_config_links_2\"\n \n \n+# Likewise for ConcreteProcess.java and natConcreteProcess.cc.\n test -d java/lang || mkdir java/lang\n ac_sources=\"java/lang/${PLATFORM}Process.java\"\n ac_dests=\"java/lang/ConcreteProcess.java\"\n@@ -5623,6 +5659,7 @@ done\n           ac_config_links=\"$ac_config_links $ac_config_links_4\"\n \n \n+# Likewise for natInetAddress.cc and natNetworkInterface.cc.\n test -d java/net || mkdir java/net\n ac_sources=\"java/net/natInetAddress${PLATFORMNET}.cc\"\n ac_dests=\"java/net/natInetAddress.cc\"\n@@ -5643,6 +5680,7 @@ done\n           ac_config_links=\"$ac_config_links $ac_config_links_6\"\n \n \n+# Likewise for natPlainSocketImpl.cc and natPlainDatagramSocketImpl.cc.\n test -d gnu/java || mkdir gnu/java\n test -d gnu/java/net || mkdir gnu/java/net\n ac_sources=\"gnu/java/net/natPlainSocketImpl${PLATFORMNET}.cc\"\n@@ -5664,6 +5702,7 @@ done\n           ac_config_links=\"$ac_config_links $ac_config_links_8\"\n \n \n+# Likewise for natPipeImpl.cc and natSelectorImpl.cc.\n test -d gnu/java/nio || mkdir gnu/java/nio\n ac_sources=\"gnu/java/nio/natPipeImpl${PLATFORM}.cc\"\n ac_dests=\"gnu/java/nio/natPipeImpl.cc\"\n@@ -7182,6 +7221,7 @@ fi\n fi\n \n \n+# Determine which AWT peer libraries to build\n # Check whether --enable-java-awt or --disable-java-awt was given.\n if test \"${enable_java_awt+set}\" = set; then\n   enableval=\"$enable_java_awt\"\n@@ -7250,6 +7290,7 @@ else\n   GTK_AWT_FALSE=\n fi\n \n+# determine whether to enable the cairo GTK Graphics2D backend\n # Check whether --enable-gtk-cairo or --disable-gtk-cairo was given.\n if test \"${enable_gtk_cairo+set}\" = set; then\n   enableval=\"$enable_gtk_cairo\"\n@@ -7468,14 +7509,15 @@ fi\n \n \n \n+# FIXME: this should be _libs on some hosts.\n libsubdir=.libs\n \n+# Allow the GC to be disabled.  Can be useful when debugging.\n echo \"$as_me:$LINENO: checking for garbage collector to use\" >&5\n echo $ECHO_N \"checking for garbage collector to use... $ECHO_C\" >&6\n # Check whether --enable-java-gc or --disable-java-gc was given.\n if test \"${enable_java_gc+set}\" = set; then\n   enableval=\"$enable_java_gc\"\n-\n   GC=$enableval\n else\n   GC=boehm\n@@ -7495,9 +7537,12 @@ echo \"${ECHO_T}boehm\" >&6\n     JC1GCSPEC='-fuse-boehm-gc'\n     GCTESTSPEC=\"-L`${PWDCMD-pwd}`/../boehm-gc/.libs -rpath `${PWDCMD-pwd}`/../boehm-gc/.libs\"\n \n-            GCINCS=\"`cat ../boehm-gc/boehm-cflags`\"\n+    # We also want to pick up some cpp flags required when including\n+    # boehm-config.h.  Yuck.\n+    GCINCS=\"`cat ../boehm-gc/boehm-cflags`\"\n     GCOBJS=boehm.lo\n     GCHDR=boehm-gc.h\n+    # The POSIX thread support needs to know this.\n \n cat >>confdefs.h <<\\_ACEOF\n #define HAVE_BOEHM_GC 1\n@@ -7584,9 +7629,7 @@ case \"$THREADS\" in\n      *-*-cygwin*)\n \t# Don't set THREADLIBS here.  Cygwin doesn't have -lpthread.\n \t;;\n-\n      *-*-freebsd[1234]*)\n-\n \t# Before FreeBSD 5, it didn't have -lpthread (or any library which\n \t# merely adds pthread_* functions) but it does have a -pthread switch\n \t# which is required at link-time to select -lc_r *instead* of -lc.\n@@ -7757,16 +7800,19 @@ cat >>confdefs.h <<\\_ACEOF\n #define HAVE_USLEEP_DECL 1\n _ACEOF\n \n+   # This is only for POSIX threads.\n \n cat >>confdefs.h <<\\_ACEOF\n #define HAVE_PTHREAD_MUTEXATTR_INIT 1\n _ACEOF\n \n-      cat >>confdefs.h <<\\_ACEOF\n+   # We also assume we are using gcc, which provides alloca.\n+   cat >>confdefs.h <<\\_ACEOF\n #define HAVE_ALLOCA 1\n _ACEOF\n \n \n+   # Assume we do not have getuid and friends.\n \n cat >>confdefs.h <<\\_ACEOF\n #define NO_GETUID 1\n@@ -12471,9 +12517,7 @@ fi\n if test -z \"${with_multisubdir}\"; then\n    builddotdot=.\n else\n-\n    builddotdot=`echo ${with_multisubdir} | sed -e 's:[^/][^/]*:..:g'`\n-\n fi\n \n NATIVE=yes\n@@ -12828,9 +12872,7 @@ esac\n \n \n # Determine gcj version number.\n-\n gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([^ ]*\\).*$/\\1/p'`\n-\n GCJVERSION=$gcjversion\n \n \n@@ -12839,6 +12881,9 @@ cat >>confdefs.h <<_ACEOF\n _ACEOF\n \n \n+# We check for sys/filio.h because Solaris 2.5 defines FIONREAD there.\n+# On that system, sys/ioctl.h will not include sys/filio.h unless\n+# BSD_COMP is defined; just including sys/filio.h is simpler.\n \n \n \n@@ -13006,6 +13051,8 @@ fi\n \n done\n \n+# We avoid AC_HEADER_DIRENT since we really only care about dirent.h\n+# for now.  If you change this, you also must update natFile.cc.\n \n for ac_header in dirent.h\n do\n@@ -16391,9 +16438,7 @@ h=`${PWDCMD-pwd}`\n    while read f; do\n       echo \"include $f\" >> deps.mk\n       test -f $f || {\n-\n \t d=`echo $f | sed -e 's,/[^/]*$,,'`\n-\n \t if test ! -d $d; then\n \t   $libgcj_basedir/../mkinstalldirs $d\n \t fi;"}, {"sha": "ca049b830a7d76da6663662ed082ee83664295c4", "filename": "libjava/configure.in", "status": "modified", "additions": 111, "deletions": 110, "changes": 221, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/libjava%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aed6152d8c55eb6e756b7459733a8bfda3dd00a3/libjava%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fconfigure.in?ref=aed6152d8c55eb6e756b7459733a8bfda3dd00a3", "patch": "@@ -1,14 +1,14 @@\n-dnl Process this with autoconf to create configure\n+dnl # Process this with autoconf to create configure\n AC_PREREQ(2.59)\n AC_INIT(java/lang/System.java)\n \n-dnl We use these options to decide which functions to include.\n+# We use these options to decide which functions to include.\n AC_ARG_WITH(target-subdir,\n-[  --with-target-subdir=SUBDIR\n-                           configuring in a subdirectory])\n+  AS_HELP_STRING([--with-target-subdir=SUBDIR],\n+                 [configure in a subdirectory]))\n \n-dnl We may get other options which we don't document:\n-dnl --with-target-subdir, --with-multisrctop, --with-multisubdir\n+# We may get other options which we don't document:\n+# --with-target-subdir, --with-multisrctop, --with-multisubdir\n \n # When building with srcdir == objdir, links to the source files will\n # be created in directories within the target_subdir.  We have to\n@@ -58,15 +58,16 @@ mkinstalldirs=\"`cd $ac_aux_dir && ${PWDCMD-pwd}`/mkinstalldirs\"\n AC_SUBST(mkinstalldirs)\n \n AC_ARG_WITH(cross-host,\n-[  --with-cross-host=HOST  configuring with a cross compiler])\n+  AS_HELP_STRING([--with-cross-host=HOST],\n+                 [configure with a cross compiler from HOST]))\n \n AC_ARG_WITH(newlib,\n-[  --with-newlib           Configuring with newlib])\n+  AS_HELP_STRING([--with-newlib],\n+                 [configure with newlib]))\n \n AC_ARG_ENABLE(version-specific-runtime-libs,\n-[  --enable-version-specific-runtime-libs    \n-   specify that runtime libraries should be installed in a compiler-specific\n-   directory ],\n+  AS_HELP_STRING([--enable-version-specific-runtime-libs],    \n+                 [specify that runtime libraries should be installed in a compiler-specific directory]),\n     [case \"$enableval\" in\n       yes) version_specific_libs=yes ;;\n       no)  version_specific_libs=no ;;\n@@ -75,16 +76,17 @@ AC_ARG_ENABLE(version-specific-runtime-libs,\n     [version_specific_libs=no]\n )\n \n-dnl Default to --enable-multilib\n+# Default to --enable-multilib\n AC_ARG_ENABLE(multilib,\n-[  --enable-multilib       build many library versions (default)],\n+  AS_HELP_STRING([--enable-multilib],\n+                 [build many library versions (default)]),\n [case \"${enableval}\" in\n   yes) multilib=yes ;;\n   no)  multilib=no ;;\n   *)   AC_MSG_ERROR(bad value ${enableval} for multilib option) ;;\n  esac], [multilib=yes])dnl\n \n-dnl # It may not be safe to run linking tests in AC_PROG_CC/AC_PROG_CXX.\n+# It may not be safe to run linking tests in AC_PROG_CC/AC_PROG_CXX.\n GCC_NO_EXECUTABLES\n \n # (1) We use an abnormal CXX (without library references), so we\n@@ -110,9 +112,9 @@ AC_SUBST(CFLAGS)\n AC_SUBST(CXXFLAGS)\n AC_SUBST(LDFLAGS)\n \n-dnl version is pulled out to make it a bit easier to change using sed.\n+# version is pulled out to make it a bit easier to change using sed.\n version=0.0.7\n-dnl Still use \"libjava\" here to placate dejagnu.\n+# Still use \"libjava\" here to placate dejagnu.\n AM_INIT_AUTOMAKE(libjava, $version)\n \n AC_CHECK_TOOL(AS, as)\n@@ -134,11 +136,11 @@ libgcj_cflags=\n libgcj_cxxflags=\n libgcj_javaflags=\n \n-. [$]{srcdir}/configure.host\n+. ${srcdir}/configure.host\n \n-LIBGCJ_CFLAGS=\"[$]{libgcj_cflags}\"\n-LIBGCJ_CXXFLAGS=\"[$]{libgcj_cxxflags}\"\n-LIBGCJ_JAVAFLAGS=\"[$]{libgcj_javaflags}\"\n+LIBGCJ_CFLAGS=\"${libgcj_cflags}\"\n+LIBGCJ_CXXFLAGS=\"${libgcj_cxxflags}\"\n+LIBGCJ_JAVAFLAGS=\"${libgcj_javaflags}\"\n AC_SUBST(LIBGCJ_CFLAGS)\n AC_SUBST(LIBGCJ_CXXFLAGS)\n AC_SUBST(LIBGCJ_JAVAFLAGS)\n@@ -170,16 +172,16 @@ else\n fi\n AC_SUBST(COMPPATH)\n \n-dnl The -no-testsuite modules omit the test subdir.\n+# The -no-testsuite modules omit the test subdir.\n AM_CONDITIONAL(TESTSUBDIR, test -d $srcdir/testsuite)\n \n-dnl Should the runtime set system properties by examining the \n-dnl environment variable GCJ_PROPERTIES?\n+# Should the runtime set system properties by examining the \n+# environment variable GCJ_PROPERTIES?\n AC_ARG_ENABLE(getenv-properties,\n-[  --disable-getenv-properties\n-                          don't set system properties from GCJ_PROPERTIES])\n+  AS_HELP_STRING([--disable-getenv-properties],\n+                 [don't set system properties from GCJ_PROPERTIES]))\n \n-dnl Whether GCJ_PROPERTIES is used depends on the target.\n+# Whether GCJ_PROPERTIES is used depends on the target.\n if test -z \"$enable_getenv_properties\"; then\n    enable_getenv_properties=${enable_getenv_properties_default-yes}\n fi\n@@ -188,7 +190,7 @@ if test \"$enable_getenv_properties\" = no; then\n      [Define if system properties shouldn't be read from getenv(\"GCJ_PROPERTIES\").])\n fi\n \n-dnl Whether we should use arguments to main()\n+# Whether we should use arguments to main()\n if test -z \"$enable_main_args\"; then\n    enable_main_args=${enable_main_args_default-yes}\n fi\n@@ -197,21 +199,21 @@ if test \"$enable_main_args\" = no; then\n fi\n \n \n-dnl Should we use hashtable-based synchronization?\n-dnl Currently works only for Linux X86/ia64\n-dnl Typically faster and more space-efficient\n+# Should we use hashtable-based synchronization?\n+# Currently works only for Linux X86/ia64\n+# Typically faster and more space-efficient\n AC_ARG_ENABLE(hash-synchronization,\n-[  --enable-hash-synchronization\n-                          use global hash table for monitor locks])\n+  AS_HELP_STRING([--enable-hash-synchronization],\n+                 [use global hash table for monitor locks]))\n \n if test -z \"$enable_hash_synchronization\"; then\n    enable_hash_synchronization=$enable_hash_synchronization_default\n fi\n \n # Do we allow intermodule optimizations (i.e. compiling many files at once)?\n AC_ARG_ENABLE(libgcj-multifile,\n-[  --enable-libgcj-multifile\n-                          allow compilation of several files at once],\n+  AS_HELP_STRING([--enable-libgcj-multifile]\n+                 [allow compilation of several files at once]),\n [case \"${enableval}\" in\n   yes) enable_libgcj_multifile=yes ;;\n   no)  enable_libgcj_multifile=no ;;\n@@ -221,10 +223,8 @@ AM_CONDITIONAL(ONESTEP, test \"$enable_libgcj_multifile\" = yes)\n \n # What is the native OS API for MinGW?\n AC_ARG_WITH(win32-nlsapi,\n-changequote(<<,>>)dnl\n-<<  --with-win32-nlsapi=ansi, unicows or unicode\n-                          native MinGW libgcj Win32 OS API [ansi]>>,\n-changequote([,])\n+  AS_HELP_STRING([--with-win32-nlsapi=ansi or unicows or unicode],\n+                 [native MinGW libgcj Win32 OS API (default is ansi)]),\n [case \"${withval}\" in\n   ansi) with_win32_nlsapi=ansi ;;\n   unicows) with_win32_nlsapi=unicows ;;\n@@ -239,33 +239,35 @@ case \"${with_win32_nlsapi}\" in\n     ;;\n esac\n \n-dnl configure.host sets slow_pthread_self if the synchronization code should \n-dnl try to avoid pthread_self calls by caching thread IDs in a hashtable.\n+# configure.host sets slow_pthread_self if the synchronization code should \n+# try to avoid pthread_self calls by caching thread IDs in a hashtable.\n if test \"${slow_pthread_self}\" = \"yes\"; then\n   AC_DEFINE(SLOW_PTHREAD_SELF, 1,\n     [Define if if the synchronization code should try to avoid pthread_self calls by caching thread IDs in a hashtable.])\n fi\n \n \n-dnl See if the user has requested runtime debugging.\n+# See if the user has requested runtime debugging.\n LIBGCJDEBUG=\"false\"\n AC_SUBST(LIBGCJDEBUG)\n AC_ARG_ENABLE(libgcj-debug,\n-[  --enable-libgcj-debug   enable runtime debugging code],\n-  if test \"$enable_libgcj_debug\" = yes; then\n+  AS_HELP_STRING([--enable-libgcj-debug],\n+                 [enable runtime debugging code]),\n+  [if test \"$enable_libgcj_debug\" = yes; then\n     AC_DEFINE(DEBUG, 1, [Define this if you want runtime debugging enabled.])\n     LIBGCJDEBUG=\"true\"\n-  fi)\n+  fi])\n \n-dnl See if the user has the interpreter included.\n+# See if the user has the interpreter included.\n AC_ARG_ENABLE(interpreter,\n-[  --enable-interpreter    enable interpreter],\n-  if test \"$enable_interpreter\" = yes; then\n+  AS_HELP_STRING([--enable-interpreter],\n+                 [enable interpreter]),\n+  [if test \"$enable_interpreter\" = yes; then\n     # This can also be set in configure.host.\n     libgcj_interpreter=yes\n   elif test \"$enable_interpreter\" = no; then\n     libgcj_interpreter=no\n-  fi)\n+  fi])\n \n if test \"$libgcj_interpreter\" = yes; then\n    AC_DEFINE(INTERPRETER, 1, [Define if you want a bytecode interpreter.])\n@@ -277,7 +279,8 @@ AC_MSG_CHECKING([for exception model to use])\n AC_LANG_SAVE\n AC_LANG_CPLUSPLUS\n AC_ARG_ENABLE(sjlj-exceptions,\n-[  --enable-sjlj-exceptions  force use of builtin_setjmp for exceptions],\n+  AS_HELP_STRING([--enable-sjlj-exceptions],\n+                 [force use of builtin_setjmp for exceptions]),\n [:],\n [dnl Botheration.  Now we've got to detect the exception model.\n dnl Link tests against libgcc.a are problematic since -- at least\n@@ -327,24 +330,28 @@ if test $can_unwind_signal = no && test $enable_sjlj_exceptions = no; then\n   EXCEPTIONSPEC=\n fi\n \n-dnl See if the user wants to disable java.net.  This is the mildly\n-dnl ugly way that we admit that target-side configuration sucks.\n+# See if the user wants to disable java.net.  This is the mildly\n+# ugly way that we admit that target-side configuration sucks.\n AC_ARG_ENABLE(java-net,\n-[  --disable-java-net      disable java.net])\n+  AS_HELP_STRING([--disable-java-net],\n+                 [disable java.net]))\n \n-dnl Whether java.net is built by default can depend on the target.\n+# Whether java.net is built by default can depend on the target.\n if test -z \"$enable_java_net\"; then\n    enable_java_net=${enable_java_net_default-yes}\n fi\n if test \"$enable_java_net\" = no; then\n    AC_DEFINE(DISABLE_JAVA_NET, 1, [Define if java.net native functions should be stubbed out.])\n fi\n \n-dnl See if the user wants to configure without libffi.  Some\n-dnl architectures don't support it, and default values are set in \n-dnl configure.host.\n+# See if the user wants to configure without libffi.  Some\n+# architectures don't support it, and default values are set in \n+# configure.host.\n AC_ARG_WITH(libffi,\n-[  --without-libffi        don't use libffi],,with_libffi=${with_libffi_default-yes})\n+  AS_HELP_STRING([--without-libffi],\n+                 [don't use libffi]),\n+  [:],\n+  [with_libffi=${with_libffi_default-yes}])\n \n LIBFFI=\n LIBFFIINCS=\n@@ -356,18 +363,19 @@ fi\n AC_SUBST(LIBFFI)\n AC_SUBST(LIBFFIINCS)\n \n-dnl See if the user wants to disable JVMPI support.\n+# See if the user wants to disable JVMPI support.\n AC_ARG_ENABLE(jvmpi,\n-[  --disable-jvmpi         disable JVMPI support])\n+  AS_HELP_STRING([--disable-jvmpi],\n+                 [disable JVMPI support]))\n \n if test \"$enable_jvmpi\" != no; then\n     AC_DEFINE(ENABLE_JVMPI, 1, [Define if you are using JVMPI.])\n fi\n \n-dnl If the target is an eCos system, use the appropriate eCos\n-dnl I/O routines.\n-dnl FIXME: this should not be a local option but a global target\n-dnl system; at present there is no eCos target.\n+# If the target is an eCos system, use the appropriate eCos\n+# I/O routines.\n+# FIXME: this should not be a local option but a global target\n+# system; at present there is no eCos target.\n TARGET_ECOS=${PROCESS-\"no\"}\n AC_ARG_WITH(ecos,\n [  --with-ecos             enable runtime eCos target support],\n@@ -416,37 +424,37 @@ AC_EGREP_HEADER(u_int32_t, sys/config.h, AC_DEFINE(HAVE_BSD_INT32_DEFINED, 1,\n                                            [Define if you have u_int32_t]))\n \n \n-dnl These may not be defined in a non-ANS conformant embedded system.\n-dnl FIXME: Should these case a runtime exception in that case?\n+# These may not be defined in a non-ANS conformant embedded system.\n+# FIXME: Should these case a runtime exception in that case?\n AC_EGREP_HEADER(mktime, time.h, AC_DEFINE(HAVE_MKTIME, 1,\n                                   [Define is you have 'mktime' in <time.h>]))\n AC_EGREP_HEADER(localtime, time.h, AC_DEFINE(HAVE_LOCALTIME, 1,\n                                   [Define is you have 'localtime' in <time.h>]))\n \n-dnl Create the subdirectory for natFile.cc, or the attempt\n-dnl to create the link will fail.\n+# Create the subdirectory for natFile.cc, or the attempt\n+# to create the link will fail.\n test -d java || mkdir java\n test -d java/io || mkdir java/io\n test -d gnu || mkdir gnu\n AC_LINK_FILES(java/io/natFile${FILE-${PLATFORM}}.cc, java/io/natFile.cc)\n \n-dnl Likewise for ConcreteProcess.java and natConcreteProcess.cc.\n+# Likewise for ConcreteProcess.java and natConcreteProcess.cc.\n test -d java/lang || mkdir java/lang\n AC_LINK_FILES(java/lang/${PLATFORM}Process.java, java/lang/ConcreteProcess.java)\n AC_LINK_FILES(java/lang/nat${PLATFORM}Process.cc, java/lang/natConcreteProcess.cc)\n \n-dnl Likewise for natInetAddress.cc and natNetworkInterface.cc.\n+# Likewise for natInetAddress.cc and natNetworkInterface.cc.\n test -d java/net || mkdir java/net\n AC_LINK_FILES(java/net/natInetAddress${PLATFORMNET}.cc, java/net/natInetAddress.cc)\n AC_LINK_FILES(java/net/natNetworkInterface${PLATFORMNET}.cc, java/net/natNetworkInterface.cc)\n \n-dnl Likewise for natPlainSocketImpl.cc and natPlainDatagramSocketImpl.cc.\n+# Likewise for natPlainSocketImpl.cc and natPlainDatagramSocketImpl.cc.\n test -d gnu/java || mkdir gnu/java\n test -d gnu/java/net || mkdir gnu/java/net\n AC_LINK_FILES(gnu/java/net/natPlainSocketImpl${PLATFORMNET}.cc, gnu/java/net/natPlainSocketImpl.cc)\n AC_LINK_FILES(gnu/java/net/natPlainDatagramSocketImpl${PLATFORMNET}.cc, gnu/java/net/natPlainDatagramSocketImpl.cc)\n \n-dnl Likewise for natPipeImpl.cc and natSelectorImpl.cc.\n+# Likewise for natPipeImpl.cc and natSelectorImpl.cc.\n test -d gnu/java/nio || mkdir gnu/java/nio\n AC_LINK_FILES(gnu/java/nio/natPipeImpl${PLATFORM}.cc, gnu/java/nio/natPipeImpl.cc)\n AC_LINK_FILES(gnu/java/nio/natSelectorImpl${PLATFORM}.cc, gnu/java/nio/natSelectorImpl.cc)\n@@ -470,17 +478,19 @@ LIBGCJTESTSPEC=\"-L`${PWDCMD-pwd}`/.libs -rpath `${PWDCMD-pwd}`/.libs\"\n AC_SUBST(LIBGCJTESTSPEC)\n \n AC_ARG_WITH(system-zlib,\n-[  --with-system-zlib      use installed libz])\n+  AS_HELP_STRING([--with-system-zlib],\n+                 [use installed libz]))\n ZLIBSPEC=\n AC_SUBST(ZLIBSPEC)\n ZLIBTESTSPEC=\n AC_SUBST(ZLIBTESTSPEC)\n \n AC_PATH_XTRA\n \n-dnl Determine which AWT peer libraries to build\n+# Determine which AWT peer libraries to build\n AC_ARG_ENABLE(java-awt,\n-[  --enable-java-awt       list of AWT peer implementations to be built])\n+  AS_HELP_STRING([--enable-java-awt],\n+                 [list of AWT peer implementations to be built]))\n \n peerlibs=\"`echo ${enable_java_awt} | tr ',' ' '`\"\n use_xlib_awt=\"\"\n@@ -528,8 +538,10 @@ done\n AM_CONDITIONAL(XLIB_AWT, test \"$use_xlib_awt\" = yes)\n AM_CONDITIONAL(GTK_AWT, test \"$use_gtk_awt\" = yes)\n \n-dnl determine whether to enable the cairo GTK Graphics2D backend\n-AC_ARG_ENABLE(gtk-cairo, [  --enable-gtk-cairo       build the cairo Graphics2D implementation on GTK])\n+# determine whether to enable the cairo GTK Graphics2D backend\n+AC_ARG_ENABLE(gtk-cairo,\n+  AS_HELP_STRING([--enable-gtk-cairo],\n+                 [build the cairo Graphics2D implementation on GTK]))\n AM_CONDITIONAL(GTK_CAIRO, test \"x${enable_gtk_cairo}\" = xyes)\n if test \"x${enable_gtk_cairo}\" = xyes\n then\n@@ -541,17 +553,16 @@ AC_SUBST(CAIRO_CFLAGS)\n AC_SUBST(PANGOFT2_LIBS)\n AC_SUBST(PANGOFT2_CFLAGS)\n \n-dnl FIXME: this should be _libs on some hosts.\n+# FIXME: this should be _libs on some hosts.\n libsubdir=.libs\n \n-dnl Allow the GC to be disabled.  Can be useful when debugging.\n+# Allow the GC to be disabled.  Can be useful when debugging.\n AC_MSG_CHECKING([for garbage collector to use])\n AC_ARG_ENABLE(java-gc,\n-changequote(<<,>>)dnl\n-<<  --enable-java-gc=TYPE   choose garbage collector [boehm]>>,\n-changequote([,])\n-  GC=$enableval,\n-  GC=boehm)\n+  AS_HELP_STRING([--enable-java-gc=TYPE],\n+                 [choose garbage collector (default is boehm)]),\n+  [GC=$enableval],\n+  [GC=boehm])\n GCLIBS=\n GCINCS=\n GCDEPS=\n@@ -566,12 +577,12 @@ case \"$GC\" in\n     JC1GCSPEC='-fuse-boehm-gc'\n     GCTESTSPEC=\"-L`${PWDCMD-pwd}`/../boehm-gc/.libs -rpath `${PWDCMD-pwd}`/../boehm-gc/.libs\"\n \n-    dnl We also want to pick up some cpp flags required when including\n-    dnl boehm-config.h.  Yuck.\n+    # We also want to pick up some cpp flags required when including\n+    # boehm-config.h.  Yuck.\n     GCINCS=\"`cat ../boehm-gc/boehm-cflags`\"\n     GCOBJS=boehm.lo\n     GCHDR=boehm-gc.h\n-    dnl The POSIX thread support needs to know this.\n+    # The POSIX thread support needs to know this.\n     AC_DEFINE(HAVE_BOEHM_GC, 1, [Define if Boehm GC in use.])\n     ;;\n  no)\n@@ -633,9 +644,7 @@ case \"$THREADS\" in\n      *-*-cygwin*)\n \t# Don't set THREADLIBS here.  Cygwin doesn't have -lpthread.\n \t;;\n-changequote(<<,>>)   \n-     *-*-freebsd[1234]*)\n-changequote([,])   \n+     *-*-freebsd[[1234]]*)\n \t# Before FreeBSD 5, it didn't have -lpthread (or any library which\n \t# merely adds pthread_* functions) but it does have a -pthread switch\n \t# which is required at link-time to select -lc_r *instead* of -lc.\n@@ -717,12 +726,10 @@ AM_CONDITIONAL(USING_GCC, test \"$GCC\" = yes)\n GCC_UNWIND_INCLUDE='-I$(libgcj_basedir)/../gcc'\n \n # Figure out where generated headers like libgcj-config.h get installed.\n-changequote(,)dnl\n gcc_version_trigger=${libgcj_basedir}/../gcc/version.c\n-gcc_version_full=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\\\"\\([^\\\"]*\\)\\\".*/\\1/'`\n-gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([^ ]*\\) .*/\\1/'`\n+gcc_version_full=`grep version_string ${gcc_version_trigger} | sed -e 's/.*\\\"\\([[^\\\"]]*\\)\\\".*/\\1/'`\n+gcc_version=`echo ${gcc_version_full} | sed -e 's/\\([[^ ]]*\\) .*/\\1/'`\n tool_include_dir='$(libdir)/gcc/$(target_noncanonical)/'${gcc_version}/include\n-changequote([,])dnl\n AC_SUBST(tool_include_dir)\n AC_SUBST(gcc_version)\n \n@@ -740,12 +747,12 @@ if test \"x${with_newlib}\" = \"xyes\"; then\n    AC_DEFINE(HAVE_GMTIME_R, 1, [Define if you have the 'gmtime_r' function])\n    AC_DEFINE(HAVE_LOCALTIME_R, 1, [Define if you have the 'localtime_r' function.])\n    AC_DEFINE(HAVE_USLEEP_DECL, 1, [Define if usleep is declared in <unistd.h>.])\n-   dnl This is only for POSIX threads.\n+   # This is only for POSIX threads.\n    AC_DEFINE(HAVE_PTHREAD_MUTEXATTR_INIT, 1, [Define if using POSIX threads that have the mutexattr functions.])\n-   dnl We also assume we are using gcc, which provides alloca.\n+   # We also assume we are using gcc, which provides alloca.\n    AC_DEFINE(HAVE_ALLOCA)\n \n-   dnl Assume we do not have getuid and friends.\n+   # Assume we do not have getuid and friends.\n    AC_DEFINE(NO_GETUID, 1, [Define if getuid() and friends are missing.])\n    PLATFORMNET=NoNet\n else\n@@ -1017,9 +1024,7 @@ fi\n if test -z \"${with_multisubdir}\"; then\n    builddotdot=.\n else\n-changequote(<<,>>)\n-   builddotdot=`echo ${with_multisubdir} | sed -e 's:[^/][^/]*:..:g'`\n-changequote([,])\n+   builddotdot=`echo ${with_multisubdir} | sed -e 's:[[^/]][[^/]]*:..:g'`\n fi\n \n NATIVE=yes\n@@ -1180,19 +1185,17 @@ AC_SUBST(toolexecmainlibdir)\n AC_SUBST(toolexeclibdir)\n \n # Determine gcj version number.\n-changequote(<<,>>)\n-gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([^ ]*\\).*$/\\1/p'`\n-changequote([,])\n+gcjversion=`$GCJ -v 2>&1 | sed -n 's/^.*version \\([[^ ]]*\\).*$/\\1/p'`\n GCJVERSION=$gcjversion\n AC_SUBST(GCJVERSION)\n AC_DEFINE_UNQUOTED(GCJVERSION, \"$GCJVERSION\", [Short GCJ version ID])\n \n-dnl We check for sys/filio.h because Solaris 2.5 defines FIONREAD there.\n-dnl On that system, sys/ioctl.h will not include sys/filio.h unless\n-dnl BSD_COMP is defined; just including sys/filio.h is simpler.\n+# We check for sys/filio.h because Solaris 2.5 defines FIONREAD there.\n+# On that system, sys/ioctl.h will not include sys/filio.h unless\n+# BSD_COMP is defined; just including sys/filio.h is simpler.\n AC_CHECK_HEADERS(unistd.h bstring.h sys/time.h sys/types.h fcntl.h sys/ioctl.h sys/filio.h sys/stat.h sys/select.h sys/socket.h netinet/in.h arpa/inet.h netdb.h net/if.h pwd.h sys/config.h stdint.h langinfo.h locale.h)\n-dnl We avoid AC_HEADER_DIRENT since we really only care about dirent.h\n-dnl for now.  If you change this, you also must update natFile.cc.\n+# We avoid AC_HEADER_DIRENT since we really only care about dirent.h\n+# for now.  If you change this, you also must update natFile.cc.\n AC_CHECK_HEADERS(dirent.h)\n AC_CHECK_HEADERS(inttypes.h, [\n     AC_DEFINE(HAVE_INTTYPES_H, 1, [Define if <inttypes.h> is available])\n@@ -1383,9 +1386,7 @@ h=`${PWDCMD-pwd}`\n    while read f; do\n       echo \"include $f\" >> deps.mk\n       test -f $f || {\n-changequote(<<,>>)\n-\t d=`echo $f | sed -e 's,/[^/]*$,,'`\n-changequote([,])\n+\t d=`echo $f | sed -e 's,/[[^/]]*$,,'`\n \t if test ! -d $d; then\n \t   $libgcj_basedir/../mkinstalldirs $d\n \t fi;"}]}