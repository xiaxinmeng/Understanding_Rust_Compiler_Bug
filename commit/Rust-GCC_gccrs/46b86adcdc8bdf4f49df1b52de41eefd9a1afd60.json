{"sha": "46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDZiODZhZGNkYzhiZGY0ZjQ5ZGYxYjUyZGU0MWVlZmQ5YTFhZmQ2MA==", "commit": {"author": {"name": "Daniel Berlin", "email": "dberlin@dberlin.org", "date": "2006-06-19T14:33:46Z"}, "committer": {"name": "Daniel Berlin", "email": "dberlin@gcc.gnu.org", "date": "2006-06-19T14:33:46Z"}, "message": "re PR tree-optimization/27341 (ICE  in in add_virtual_operand with complex types)\n\n2006-06-19  Daniel Berlin  <dberlin@dberlin.org>\n\n\tFix PR tree-optimization/27341\n\t* tree-cfg.c (gimplify_val): Call mark_new_vars_to_rename on the\n\tstatement we get.\n\t* tree-complex.c (pass_lower_complex): Update SMT usage.\n\nFrom-SVN: r114771", "tree": {"sha": "f7538558f1fde777988a78b4c1ca0c7d6194fb01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f7538558f1fde777988a78b4c1ca0c7d6194fb01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/comments", "author": {"login": "dberlin", "id": 324715, "node_id": "MDQ6VXNlcjMyNDcxNQ==", "avatar_url": "https://avatars.githubusercontent.com/u/324715?v=4", "gravatar_id": "", "url": "https://api.github.com/users/dberlin", "html_url": "https://github.com/dberlin", "followers_url": "https://api.github.com/users/dberlin/followers", "following_url": "https://api.github.com/users/dberlin/following{/other_user}", "gists_url": "https://api.github.com/users/dberlin/gists{/gist_id}", "starred_url": "https://api.github.com/users/dberlin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/dberlin/subscriptions", "organizations_url": "https://api.github.com/users/dberlin/orgs", "repos_url": "https://api.github.com/users/dberlin/repos", "events_url": "https://api.github.com/users/dberlin/events{/privacy}", "received_events_url": "https://api.github.com/users/dberlin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4307d0dbf9a4ad8923df89e857bbe09a8b5edc20", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4307d0dbf9a4ad8923df89e857bbe09a8b5edc20", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4307d0dbf9a4ad8923df89e857bbe09a8b5edc20"}], "stats": {"total": 31, "additions": 28, "deletions": 3}, "files": [{"sha": "34b7da6cbbe30162739c3ea8683453098a599440", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "patch": "@@ -1,3 +1,10 @@\n+2006-06-19  Daniel Berlin  <dberlin@dberlin.org>\n+\n+\tFix PR tree-optimization/27341\n+\t* tree-cfg.c (gimplify_val): Call mark_new_vars_to_rename on the\n+\tstatement we get.\n+\t* tree-complex.c (pass_lower_complex): Update SMT usage.\t\n+\n 2006-06-19  Andreas Krebbel  <krebbel1@de.ibm.com>\n \n \t* config/s390/s390.md (\"doloop_si64\", \"doloop_si31\", \"doloop_di\"): "}, {"sha": "b77e937b9ce13dfcc3fe57198a2f5f66eb027380", "filename": "gcc/testsuite/gcc.c-torture/compile/pr27341-1.c", "status": "added", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27341-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27341-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27341-1.c?ref=46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "patch": "@@ -0,0 +1,7 @@\n+extern double R_NaReal;\n+void z_atan2 (double _Complex * r, double _Complex * ccs)\n+{\n+    if (*ccs == 0)\n+        __imag__ *r = R_NaReal;\n+}\n+"}, {"sha": "e6be1e4712d8b2f20e59fec9ecd836465e3f45f8", "filename": "gcc/testsuite/gcc.c-torture/compile/pr27341-2.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27341-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27341-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr27341-2.c?ref=46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "patch": "@@ -0,0 +1,8 @@\n+void zgemm_ (const int*, const double*);\n+extern void matmul_c8 (_Complex double * dest)\n+{\n+  const int  ldc = 0;\n+  const double zero = 0;\n+  zgemm_ ( &zero, &ldc);\n+  dest[1] += 1 ;\n+}"}, {"sha": "6dbb7d367e1e7f4df83edb899bc532a6132bfd02", "filename": "gcc/tree-cfg.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftree-cfg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftree-cfg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-cfg.c?ref=46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "patch": "@@ -5584,6 +5584,8 @@ gimplify_val (block_stmt_iterator *bsi, tree type, tree exp)\n   TREE_BLOCK (new_stmt) = TREE_BLOCK (orig_stmt);\n \n   bsi_insert_before (bsi, new_stmt, BSI_SAME_STMT);\n+  if (in_ssa_p)\n+    mark_new_vars_to_rename (new_stmt);\n \n   return t;\n }"}, {"sha": "f841844f88e02ada12ba935b901482d2d03c2f8c", "filename": "gcc/tree-complex.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftree-complex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/46b86adcdc8bdf4f49df1b52de41eefd9a1afd60/gcc%2Ftree-complex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-complex.c?ref=46b86adcdc8bdf4f49df1b52de41eefd9a1afd60", "patch": "@@ -1541,11 +1541,12 @@ struct tree_opt_pass pass_lower_complex =\n   0,\t\t\t\t\t/* tv_id */\n   PROP_ssa,\t\t\t\t/* properties_required */\n   0,\t\t\t\t\t/* properties_provided */\n-  0,\t\t\t\t\t/* properties_destroyed */\n+  PROP_smt_usage,                       /* properties_destroyed */\n   0,\t\t\t\t\t/* todo_flags_start */\n   TODO_dump_func | TODO_ggc_collect\n-    | TODO_update_ssa\n-    | TODO_verify_stmts,\t\t/* todo_flags_finish */\n+  | TODO_update_smt_usage\n+  | TODO_update_ssa\n+  | TODO_verify_stmts,\t\t        /* todo_flags_finish */\n   0\t\t\t\t\t/* letter */\n };\n "}]}