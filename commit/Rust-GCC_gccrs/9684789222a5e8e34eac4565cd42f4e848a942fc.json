{"sha": "9684789222a5e8e34eac4565cd42f4e848a942fc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTY4NDc4OTIyMmE1ZThlMzRlYWM0NTY1Y2Q0MmY0ZTg0OGE5NDJmYw==", "commit": {"author": {"name": "Andrew Haley", "email": "aph@cygnus.com", "date": "1999-01-13T06:13:37Z"}, "committer": {"name": "Andrew Haley", "email": "aph@gcc.gnu.org", "date": "1999-01-13T06:13:37Z"}, "message": "expr.c (generate_name): Name prefix changed to avoid clashes with assembler temp labels.\n\n1999-01-13  Andrew Haley  <aph@cygnus.com>\n\t* expr.c (generate_name): Name prefix changed to avoid clashes\n\twith assembler temp labels.\n\t* parse.y (patch_synchronized_statement): Set TREE_SIDE_EFFECTS on\n\tMODIFY_EXPR.  Without this, code for the assignement may not be\n\tgenerated at all and the synchronized statement will read an\n\tuninitialized variable.\n\nFrom-SVN: r24649", "tree": {"sha": "2c27d075b4014382a25b9f3db1ff1efc6de4ed40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2c27d075b4014382a25b9f3db1ff1efc6de4ed40"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9684789222a5e8e34eac4565cd42f4e848a942fc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9684789222a5e8e34eac4565cd42f4e848a942fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9684789222a5e8e34eac4565cd42f4e848a942fc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9684789222a5e8e34eac4565cd42f4e848a942fc/comments", "author": null, "committer": null, "parents": [{"sha": "ba179f9f6f3c593721837c6c24cc39296a6eb92d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ba179f9f6f3c593721837c6c24cc39296a6eb92d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ba179f9f6f3c593721837c6c24cc39296a6eb92d"}], "stats": {"total": 34, "additions": 22, "deletions": 12}, "files": [{"sha": "d3062f8db00405a71f57e81657eb83016aadd0b1", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=9684789222a5e8e34eac4565cd42f4e848a942fc", "patch": "@@ -1,3 +1,13 @@\n+1999-01-13  Andrew Haley  <aph@cygnus.com>\n+\n+\t* expr.c (generate_name): Name prefix changed to avoid clashes\n+\twith assembler temp labels.\n+\n+\t* parse.y (patch_synchronized_statement): Set TREE_SIDE_EFFECTS on\n+\tMODIFY_EXPR.  Without this, code for the assignement may not be\n+\tgenerated at all and the synchronized statement will read an\n+\tuninitialized variable.\n+  \t\n Wed Jan 13 01:24:54 1999  Alexandre Petit-Bianco  <apbianco@cygnus.com>\n \n \t* class.c (maybe_layout_super_class): Fixed returned value."}, {"sha": "623eb909334f6faf047a787b61f3fa6caf591cec", "filename": "gcc/java/expr.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fexpr.c?ref=9684789222a5e8e34eac4565cd42f4e848a942fc", "patch": "@@ -1186,7 +1186,7 @@ generate_name ()\n {\n   static int l_number = 0;\n   char buff [20];\n-  sprintf (buff, \"$L%d\", l_number++);\n+  sprintf (buff, \"$LJv%d\", l_number++);\n   return get_identifier (buff);\n }\n "}, {"sha": "c34aa135d8e3b0832599aa67562ea71d7b7638ec", "filename": "gcc/java/parse.c", "status": "modified", "additions": 7, "deletions": 7, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2Fparse.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2Fparse.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.c?ref=9684789222a5e8e34eac4565cd42f4e848a942fc", "patch": "@@ -2250,7 +2250,7 @@ static const short yycheck[] = {     3,\n #define YYPURE 1\n \n /* -*-C-*-  Note some compilers choke on comments on `#line' lines.  */\n-#line 3 \"/usr/cygnus/gnupro-98r1/share/bison.simple\"\n+#line 3 \"/usr/local/share/bison.simple\"\n \n /* Skeleton output parser for bison,\n    Copyright (C) 1984, 1989, 1990 Free Software Foundation, Inc.\n@@ -2443,7 +2443,7 @@ __yy_memcpy (char *to, char *from, int count)\n #endif\n #endif\n \f\n-#line 196 \"/usr/cygnus/gnupro-98r1/share/bison.simple\"\n+#line 196 \"/usr/local/share/bison.simple\"\n \n /* The user can define YYPARSE_PARAM as the name of an argument to be passed\n    into yyparse.  The argument should have type void *.\n@@ -4701,7 +4701,7 @@ case 492:\n     break;}\n }\n    /* the action file gets copied in in place of this dollarsign */\n-#line 498 \"/usr/cygnus/gnupro-98r1/share/bison.simple\"\n+#line 498 \"/usr/local/share/bison.simple\"\n \f\n   yyvsp -= yylen;\n   yyssp -= yylen;\n@@ -13461,7 +13461,7 @@ patch_synchronized_statement (node, wfl_op1)\n   tree expr = java_complete_tree (TREE_OPERAND (node, 0));\n   tree block = TREE_OPERAND (node, 1);\n \n-  tree enter, exit, finally, expr_decl;\n+  tree enter, exit, finally, expr_decl, assignment;\n \n   if (expr == error_mark_node)\n     {\n@@ -13501,13 +13501,13 @@ patch_synchronized_statement (node, wfl_op1)\n   BUILD_MONITOR_EXIT (exit, expr_decl);\n   CAN_COMPLETE_NORMALLY (enter) = 1;\n   CAN_COMPLETE_NORMALLY (exit) = 1;\n+  assignment = build (MODIFY_EXPR, NULL_TREE, expr_decl, expr);\n+  TREE_SIDE_EFFECTS (assignment) = 1;\n   node = build1 (CLEANUP_POINT_EXPR, NULL_TREE,\n \t\t build (COMPOUND_EXPR, NULL_TREE,\n \t\t\tbuild (WITH_CLEANUP_EXPR, NULL_TREE,\n \t\t\t       build (COMPOUND_EXPR, NULL_TREE,\n-\t\t\t\t      build (MODIFY_EXPR, NULL_TREE,\n-\t\t\t\t\t     expr_decl, expr),\n-\t\t\t\t      enter),\n+\t\t\t\t      assignment, enter),\n \t\t\t       NULL_TREE, exit),\n \t\t\tblock));\n   node = build_expr_block (node, expr_decl);"}, {"sha": "03840042f2f2cd98748eda2abbaf3fb6ce0ddb62", "filename": "gcc/java/parse.y", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2Fparse.y", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9684789222a5e8e34eac4565cd42f4e848a942fc/gcc%2Fjava%2Fparse.y", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fparse.y?ref=9684789222a5e8e34eac4565cd42f4e848a942fc", "patch": "@@ -10823,7 +10823,7 @@ patch_synchronized_statement (node, wfl_op1)\n   tree expr = java_complete_tree (TREE_OPERAND (node, 0));\n   tree block = TREE_OPERAND (node, 1);\n \n-  tree enter, exit, finally, expr_decl;\n+  tree enter, exit, finally, expr_decl, assignment;\n \n   if (expr == error_mark_node)\n     {\n@@ -10863,13 +10863,13 @@ patch_synchronized_statement (node, wfl_op1)\n   BUILD_MONITOR_EXIT (exit, expr_decl);\n   CAN_COMPLETE_NORMALLY (enter) = 1;\n   CAN_COMPLETE_NORMALLY (exit) = 1;\n+  assignment = build (MODIFY_EXPR, NULL_TREE, expr_decl, expr);\n+  TREE_SIDE_EFFECTS (assignment) = 1;\n   node = build1 (CLEANUP_POINT_EXPR, NULL_TREE,\n \t\t build (COMPOUND_EXPR, NULL_TREE,\n \t\t\tbuild (WITH_CLEANUP_EXPR, NULL_TREE,\n \t\t\t       build (COMPOUND_EXPR, NULL_TREE,\n-\t\t\t\t      build (MODIFY_EXPR, NULL_TREE,\n-\t\t\t\t\t     expr_decl, expr),\n-\t\t\t\t      enter),\n+\t\t\t\t      assignment, enter),\n \t\t\t       NULL_TREE, exit),\n \t\t\tblock));\n   node = build_expr_block (node, expr_decl);"}]}