{"sha": "a506c55cb1000de54bb5a2907e10f31113c46133", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTUwNmM1NWNiMTAwMGRlNTRiYjVhMjkwN2UxMGYzMTExM2M0NjEzMw==", "commit": {"author": {"name": "Per Bothner", "email": "pbothner@apple.com", "date": "2003-10-02T07:20:38Z"}, "committer": {"name": "Per Bothner", "email": "bothner@gcc.gnu.org", "date": "2003-10-02T07:20:38Z"}, "message": "cpplex.c (_cpp_get_fresh_line): Revert my no-longer-needed 08-28 change...\n\n\n\t* cpplex.c (_cpp_get_fresh_line):  Revert my no-longer-needed\n\t08-28 change, since we're never called with a NULL buffer.\n\t(_cpp_lex_direct):  Likewise.\n\t* cpptrad.c (_cpp_read_logical_line_trad):  Likewise.\n\tReturn false if buffer is NULL at end.\n\n\t* cpplex.c (_cpp_get_fresh_line):  Return value now just depends on\n\twhether pfile->buffer is NULL after pop, ignoring return_at_eof.\n\nFrom-SVN: r72013", "tree": {"sha": "556b83797cd04698faea5798a63e42ef3fda0c52", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/556b83797cd04698faea5798a63e42ef3fda0c52"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a506c55cb1000de54bb5a2907e10f31113c46133", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a506c55cb1000de54bb5a2907e10f31113c46133", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a506c55cb1000de54bb5a2907e10f31113c46133", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a506c55cb1000de54bb5a2907e10f31113c46133/comments", "author": null, "committer": null, "parents": [{"sha": "fddb33d2cd74d9bfd6951802ea075ad122ad1571", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fddb33d2cd74d9bfd6951802ea075ad122ad1571", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fddb33d2cd74d9bfd6951802ea075ad122ad1571"}], "stats": {"total": 29, "additions": 15, "deletions": 14}, "files": [{"sha": "6dd3abc0d71e947641fa46c5e3b443f16f7d9023", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a506c55cb1000de54bb5a2907e10f31113c46133/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a506c55cb1000de54bb5a2907e10f31113c46133/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=a506c55cb1000de54bb5a2907e10f31113c46133", "patch": "@@ -9,6 +9,15 @@\n \t* fix-header.c (cb_file_change):  Likewise.\n \t* c-ppoutput.c (pp_file_change):  Likewise.\n \n+\t* cpplex.c (_cpp_get_fresh_line):  Revert my no-longer-needed\n+\t08-28 change, since we're never called with a NULL buffer.\n+\t(_cpp_lex_direct):  Likewise.\n+\t* cpptrad.c (_cpp_read_logical_line_trad):  Likewise.\n+\tReturn false if buffer is NULL at end.\n+\n+\t* cpplex.c (_cpp_get_fresh_line):  Return value now just depends on\n+\twhether pfile->buffer is NULL after pop, ignoring return_at_eof.\n+\n 2003-10-01  Zack Weinberg  <zack@codesourcery.com>\n \n \t* target.h (init_libfuncs): New hook."}, {"sha": "45cf5741b6683e5086681d987983a29b76ee2087", "filename": "gcc/cpplex.c", "status": "modified", "additions": 4, "deletions": 11, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a506c55cb1000de54bb5a2907e10f31113c46133/gcc%2Fcpplex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a506c55cb1000de54bb5a2907e10f31113c46133/gcc%2Fcpplex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpplex.c?ref=a506c55cb1000de54bb5a2907e10f31113c46133", "patch": "@@ -694,9 +694,6 @@ _cpp_get_fresh_line (cpp_reader *pfile)\n     {\n       cpp_buffer *buffer = pfile->buffer;\n \n-      if (buffer == NULL)\n-\treturn false;\n-\n       if (!buffer->need_line)\n \treturn true;\n \n@@ -722,13 +719,9 @@ _cpp_get_fresh_line (cpp_reader *pfile)\n \t\t\t       \"no newline at end of file\");\n \t}\n  \n-      if (buffer->return_at_eof)\n-\t{\n-\t  _cpp_pop_buffer (pfile);\n-\t  return false;\n-\t}\n-\n       _cpp_pop_buffer (pfile);\n+      if (pfile->buffer == NULL)\n+\treturn false;\n     }\n }\n \n@@ -763,7 +756,7 @@ _cpp_lex_direct (cpp_reader *pfile)\n  fresh_line:\n   result->flags = 0;\n   buffer = pfile->buffer;\n-  if (buffer == NULL || buffer->need_line)\n+  if (buffer->need_line)\n     {\n       if (!_cpp_get_fresh_line (pfile))\n \t{\n@@ -785,8 +778,8 @@ _cpp_lex_direct (cpp_reader *pfile)\n       result->flags = BOL;\n       if (pfile->state.parsing_args == 2)\n \tresult->flags |= PREV_WHITE;\n-      buffer = pfile->buffer;\n     }\n+  buffer = pfile->buffer;\n  update_tokens_line:\n   result->line = pfile->line;\n "}, {"sha": "e2ccb0bdcbd59aa3017be52d74146d4d5e210c91", "filename": "gcc/cpptrad.c", "status": "modified", "additions": 2, "deletions": 3, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a506c55cb1000de54bb5a2907e10f31113c46133/gcc%2Fcpptrad.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a506c55cb1000de54bb5a2907e10f31113c46133/gcc%2Fcpptrad.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcpptrad.c?ref=a506c55cb1000de54bb5a2907e10f31113c46133", "patch": "@@ -299,13 +299,12 @@ _cpp_read_logical_line_trad (cpp_reader *pfile)\n {\n   do\n     {\n-      if ((pfile->buffer == NULL || pfile->buffer->need_line)\n-\t  && !_cpp_get_fresh_line (pfile))\n+      if (pfile->buffer->need_line && !_cpp_get_fresh_line (pfile))\n \treturn false;\n     }\n   while (!_cpp_scan_out_logical_line (pfile, NULL) || pfile->state.skipping);\n \n-  return true;\n+  return pfile->buffer != NULL;\n }\n \n /* Set up state for finding the opening '(' of a function-like"}]}