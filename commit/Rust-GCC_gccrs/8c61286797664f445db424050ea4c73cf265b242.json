{"sha": "8c61286797664f445db424050ea4c73cf265b242", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGM2MTI4Njc5NzY2NGY0NDVkYjQyNDA1MGVhNGM3M2NmMjY1YjI0Mg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-11-23T21:17:45Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2015-11-23T21:17:45Z"}, "message": "re PR go/68496 ([libgo] reflect test fails on Linux x86-64)\n\n\tPR go/68496\n    reflect: Allocate space for FFI functions returning a zero-sized type.\n    \n    The libffi library does not understand zero-sized types.  We represent\n    them as a struct with a single field of type void.  If such a type is\n    returned from a function, libffi will copy 1 byte of data.  Allocate\n    space for that byte, although we won't use it.\n    \n    Fixes https://gcc.gnu.org/PR68496.\n\n    Reviewed-on: https://go-review.googlesource.com/17175\n\nFrom-SVN: r230776", "tree": {"sha": "d37869769756562cc2596cd4783de2c387baf6b9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d37869769756562cc2596cd4783de2c387baf6b9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8c61286797664f445db424050ea4c73cf265b242", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c61286797664f445db424050ea4c73cf265b242", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8c61286797664f445db424050ea4c73cf265b242", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8c61286797664f445db424050ea4c73cf265b242/comments", "author": null, "committer": null, "parents": [{"sha": "cbd03aee24f57b42a82a119e4182b442ef3b8db3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbd03aee24f57b42a82a119e4182b442ef3b8db3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbd03aee24f57b42a82a119e4182b442ef3b8db3"}], "stats": {"total": 8, "additions": 7, "deletions": 1}, "files": [{"sha": "9fe9d5e1042de9814624164490cfc75ab880309b", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c61286797664f445db424050ea4c73cf265b242/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c61286797664f445db424050ea4c73cf265b242/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=8c61286797664f445db424050ea4c73cf265b242", "patch": "@@ -1,4 +1,4 @@\n-97ec885c715b3922b0866c081554899b8d50933a\n+0d979f0b860cfd879754150e0ae5e1018b94d7c4\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "2a14d6c6adddebdd79a80738abe417f2bc836b2a", "filename": "libgo/runtime/go-reflect-call.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8c61286797664f445db424050ea4c73cf265b242/libgo%2Fruntime%2Fgo-reflect-call.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8c61286797664f445db424050ea4c73cf265b242/libgo%2Fruntime%2Fgo-reflect-call.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-reflect-call.c?ref=8c61286797664f445db424050ea4c73cf265b242", "patch": "@@ -81,6 +81,12 @@ go_results_size (const struct __go_func_type *func)\n \n   off = (off + maxalign - 1) & ~ (maxalign - 1);\n \n+  // The libffi library doesn't understand a struct with no fields.\n+  // We generate a struct with a single field of type void.  When used\n+  // as a return value, libffi will think that requires a byte.\n+  if (off == 0)\n+    off = 1;\n+\n   return off;\n }\n "}]}