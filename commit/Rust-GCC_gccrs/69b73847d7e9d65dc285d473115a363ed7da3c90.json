{"sha": "69b73847d7e9d65dc285d473115a363ed7da3c90", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjliNzM4NDdkN2U5ZDY1ZGMyODVkNDczMTE1YTM2M2VkN2RhM2M5MA==", "commit": {"author": {"name": "Pascal Obry", "email": "obry@adacore.com", "date": "2011-09-05T14:03:26Z"}, "committer": {"name": "Arnaud Charlet", "email": "charlet@gcc.gnu.org", "date": "2011-09-05T14:03:26Z"}, "message": "prj-nmsc.adb: Minor reformatting.\n\n2011-09-05  Pascal Obry  <obry@adacore.com>\n\n\t* prj-nmsc.adb: Minor reformatting.\n\tAdd support for standalone aggregate library.\n\t(Check_Stand_Alone_Library): Handle standalone aggregate library.\n\t* projects.texi: Fix documentation for aggregate library projects.\n\nFrom-SVN: r178546", "tree": {"sha": "c98aa3ecb61a2e5173fcd4de08b151155561d45e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c98aa3ecb61a2e5173fcd4de08b151155561d45e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69b73847d7e9d65dc285d473115a363ed7da3c90", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69b73847d7e9d65dc285d473115a363ed7da3c90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69b73847d7e9d65dc285d473115a363ed7da3c90", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69b73847d7e9d65dc285d473115a363ed7da3c90/comments", "author": {"login": "TurboGit", "id": 467069, "node_id": "MDQ6VXNlcjQ2NzA2OQ==", "avatar_url": "https://avatars.githubusercontent.com/u/467069?v=4", "gravatar_id": "", "url": "https://api.github.com/users/TurboGit", "html_url": "https://github.com/TurboGit", "followers_url": "https://api.github.com/users/TurboGit/followers", "following_url": "https://api.github.com/users/TurboGit/following{/other_user}", "gists_url": "https://api.github.com/users/TurboGit/gists{/gist_id}", "starred_url": "https://api.github.com/users/TurboGit/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/TurboGit/subscriptions", "organizations_url": "https://api.github.com/users/TurboGit/orgs", "repos_url": "https://api.github.com/users/TurboGit/repos", "events_url": "https://api.github.com/users/TurboGit/events{/privacy}", "received_events_url": "https://api.github.com/users/TurboGit/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "4e5bc135443f7ce8bb1b7c487f02942a701dfb32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4e5bc135443f7ce8bb1b7c487f02942a701dfb32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4e5bc135443f7ce8bb1b7c487f02942a701dfb32"}], "stats": {"total": 46, "additions": 32, "deletions": 14}, "files": [{"sha": "0b6ae3fb9df9985bfe3731483b012f353ff56e52", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69b73847d7e9d65dc285d473115a363ed7da3c90/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69b73847d7e9d65dc285d473115a363ed7da3c90/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=69b73847d7e9d65dc285d473115a363ed7da3c90", "patch": "@@ -1,3 +1,10 @@\n+2011-09-05  Pascal Obry  <obry@adacore.com>\n+\n+\t* prj-nmsc.adb: Minor reformatting.\n+\tAdd support for standalone aggregate library.\n+\t(Check_Stand_Alone_Library): Handle standalone aggregate library.\n+\t* projects.texi: Fix documentation for aggregate library projects.\n+\n 2011-09-05  Robert Dewar  <dewar@adacore.com>\n \n \t* sem_ch6.adb: Minor reformatting."}, {"sha": "9ebd3003aa30bc3e4ff5f3c657ce41d3bf69b726", "filename": "gcc/ada/prj-nmsc.adb", "status": "modified", "additions": 25, "deletions": 13, "changes": 38, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69b73847d7e9d65dc285d473115a363ed7da3c90/gcc%2Fada%2Fprj-nmsc.adb", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69b73847d7e9d65dc285d473115a363ed7da3c90/gcc%2Fada%2Fprj-nmsc.adb", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprj-nmsc.adb?ref=69b73847d7e9d65dc285d473115a363ed7da3c90", "patch": "@@ -2717,8 +2717,8 @@ package body Prj.Nmsc is\n                   Source := Prj.Element (Iter);\n                   exit when Source = No_Source;\n \n-                  if Source.Unit /= No_Unit_Index and then\n-                     Source.Unit.Name = Name_Id (Name)\n+                  if Source.Unit /= No_Unit_Index\n+                    and then Source.Unit.Name = Name_Id (Name)\n                   then\n                      if not Source.Locally_Removed then\n                         Source.In_Interfaces := True;\n@@ -2870,8 +2870,8 @@ package body Prj.Nmsc is\n                   end if;\n                end if;\n \n-            elsif Project.Library_Kind /= Static and then\n-                  Proj.Library_Kind = Static\n+            elsif Project.Library_Kind /= Static\n+              and then Proj.Library_Kind = Static\n             then\n                Error_Msg_Name_1 := Project.Name;\n                Error_Msg_Name_2 := Proj.Name;\n@@ -3193,8 +3193,8 @@ package body Prj.Nmsc is\n                      Lib_ALI_Dir.Location, Project);\n                end if;\n \n-               if (not Project.Externally_Built) and then\n-                  Project.Library_ALI_Dir /= Project.Library_Dir\n+               if not Project.Externally_Built\n+                 and then Project.Library_ALI_Dir /= Project.Library_Dir\n                then\n                   --  The library ALI directory cannot be the same as the\n                   --  Object directory.\n@@ -4435,7 +4435,18 @@ package body Prj.Nmsc is\n                   Error_Msg_Name_1 := Unit;\n \n                   Next_Proj := Project.Extends;\n-                  Iter := For_Each_Source (Data.Tree, Project);\n+\n+                  if Project.Qualifier = Aggregate_Library then\n+\n+                     --  For an aggregate library we want to consider sources\n+                     --  of all aggregated projects.\n+\n+                     Iter := For_Each_Source (Data.Tree);\n+\n+                  else\n+                     Iter := For_Each_Source (Data.Tree, Project);\n+                  end if;\n+\n                   loop\n                      while Prj.Element (Iter) /= No_Source\n                        and then\n@@ -4467,6 +4478,7 @@ package body Prj.Nmsc is\n                   if Source /= No_Source then\n                      if Source.Project /= Project\n                        and then not Is_Extending (Project, Source.Project)\n+                       and then Project.Qualifier /= Aggregate_Library\n                      then\n                         Source := No_Source;\n                      end if;\n@@ -4952,10 +4964,10 @@ package body Prj.Nmsc is\n         and then Name_Len > 3\n         and then Name_Buffer (2 .. 3) = \"__\"\n         and then\n-          ((Name_Buffer (1) = 'a') or else\n-           (Name_Buffer (1) = 'g') or else\n-           (Name_Buffer (1) = 'i') or else\n-           (Name_Buffer (1) = 's'))\n+          (Name_Buffer (1) = 'a' or else\n+           Name_Buffer (1) = 'g' or else\n+           Name_Buffer (1) = 'i' or else\n+           Name_Buffer (1) = 's')\n       then\n          Name_Buffer (2) := '.';\n          Name_Buffer (3 .. Name_Len - 1) := Name_Buffer (4 .. Name_Len);\n@@ -5054,8 +5066,8 @@ package body Prj.Nmsc is\n       OK := OK and then not Need_Letter and then not Last_Underscore;\n \n       if OK then\n-         if First /= Name'First and then\n-           Is_Reserved (The_Name (First .. The_Name'Last))\n+         if First /= Name'First\n+           and then Is_Reserved (The_Name (First .. The_Name'Last))\n          then\n             return;\n          end if;"}, {"sha": "fbaa34537273adba9c594b1633aa069b6b10a8e3", "filename": "gcc/ada/projects.texi", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69b73847d7e9d65dc285d473115a363ed7da3c90/gcc%2Fada%2Fprojects.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69b73847d7e9d65dc285d473115a363ed7da3c90/gcc%2Fada%2Fprojects.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Fprojects.texi?ref=69b73847d7e9d65dc285d473115a363ed7da3c90", "patch": "@@ -2695,7 +2695,6 @@ project. Here is the (non exhaustive) list:\n @item Source_Files, Source_List_File and other attributes dealing with\n   list of sources.\n @item Source_Dirs, Exec_Dir and Object_Dir\n-@item Library_Dir, Library_Name and other library-related attributes\n @item Main\n @item Roots\n @item Externally_Built"}]}