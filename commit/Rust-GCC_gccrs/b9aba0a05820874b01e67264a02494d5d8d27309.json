{"sha": "b9aba0a05820874b01e67264a02494d5d8d27309", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjlhYmEwYTA1ODIwODc0YjAxZTY3MjY0YTAyNDk0ZDVkOGQyNzMwOQ==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2016-07-15T13:05:56Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2016-07-15T13:05:56Z"}, "message": "re PR tree-optimization/71881 (ICE on valid code at -O3 with -g enabled on x86_64-linux-gnu: cannot update SSA form)\n\n2016-07-15  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/71881\n\t* tree-loop-distribution.c (destroy_loop): Remove blocks in\n\treverse DOM order to make debug temp generation happy.\n\n\t* gcc.dg/torture/pr71881.c: New testcase.\n\nFrom-SVN: r238374", "tree": {"sha": "63f8b69a265fbe07bef4e9bf4304157f191a30df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/63f8b69a265fbe07bef4e9bf4304157f191a30df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b9aba0a05820874b01e67264a02494d5d8d27309", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9aba0a05820874b01e67264a02494d5d8d27309", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b9aba0a05820874b01e67264a02494d5d8d27309", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b9aba0a05820874b01e67264a02494d5d8d27309/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "9513d5fbcabaf84b5e8450e8bb16894b3d42ba96", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9513d5fbcabaf84b5e8450e8bb16894b3d42ba96", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9513d5fbcabaf84b5e8450e8bb16894b3d42ba96"}], "stats": {"total": 42, "additions": 41, "deletions": 1}, "files": [{"sha": "9e393803eb2310468240b1f077fd507d32d968fc", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b9aba0a05820874b01e67264a02494d5d8d27309", "patch": "@@ -1,3 +1,9 @@\n+2016-07-15  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/71881\n+\t* tree-loop-distribution.c (destroy_loop): Remove blocks in\n+\treverse DOM order to make debug temp generation happy.\n+\n 2016-07-15  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/71887"}, {"sha": "c3a56007ac07ed5038a3ba92a31388c7bc8f5b30", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b9aba0a05820874b01e67264a02494d5d8d27309", "patch": "@@ -1,3 +1,8 @@\n+2016-07-15  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/71881\n+\t* gcc.dg/torture/pr71881.c: New testcase.\n+\n 2016-07-15  Richard Biener  <rguenther@suse.de>\n \n \tPR tree-optimization/71887"}, {"sha": "b17db1b21c1cca9bba3b69d639d242709c9d3567", "filename": "gcc/testsuite/gcc.dg/torture/pr71881.c", "status": "added", "additions": 25, "deletions": 0, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr71881.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr71881.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr71881.c?ref=b9aba0a05820874b01e67264a02494d5d8d27309", "patch": "@@ -0,0 +1,25 @@\n+/* { dg-do compile } */\n+/* { dg-additional-options \"-g\" } */\n+\n+int a, b, c, d, *e, f, g;\n+\n+int fn1 ()\n+{\n+  char h[2];\n+  int i = 0;\n+  for (; i < 2; i++)\n+    {\n+      if (c)\n+\tfor (*e = 0; *e;)\n+\t  {\n+\t    int j[f];\n+\t    i = *e;\n+\t  }\n+      h[i] = 0;\n+    }\n+  for (; a;)\n+    return h[0];\n+  for (b = 0; b;)\n+    i = g = (1 & i) < d;\n+  return 0;\n+}"}, {"sha": "181e4e9ed7d8b43be2e482c1ed68e98590868930", "filename": "gcc/tree-loop-distribution.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2Ftree-loop-distribution.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b9aba0a05820874b01e67264a02494d5d8d27309/gcc%2Ftree-loop-distribution.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-loop-distribution.c?ref=b9aba0a05820874b01e67264a02494d5d8d27309", "patch": "@@ -888,13 +888,15 @@ destroy_loop (struct loop *loop)\n   cancel_loop_tree (loop);\n   rescan_loop_exit (exit, false, true);\n \n-  for (i = 0; i < nbbs; i++)\n+  i = nbbs;\n+  do\n     {\n       /* We have made sure to not leave any dangling uses of SSA\n          names defined in the loop.  With the exception of virtuals.\n \t Make sure we replace all uses of virtual defs that will remain\n \t outside of the loop with the bare symbol as delete_basic_block\n \t will release them.  */\n+      --i;\n       for (gphi_iterator gsi = gsi_start_phis (bbs[i]); !gsi_end_p (gsi);\n \t   gsi_next (&gsi))\n \t{\n@@ -912,6 +914,8 @@ destroy_loop (struct loop *loop)\n \t}\n       delete_basic_block (bbs[i]);\n     }\n+  while (i != 0);\n+\n   free (bbs);\n \n   set_immediate_dominator (CDI_DOMINATORS, dest,"}]}