{"sha": "357734719bc1f42da202c8d0e28a80f4a87e682b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MzU3NzM0NzE5YmMxZjQyZGEyMDJjOGQwZTI4YTgwZjRhODdlNjgyYg==", "commit": {"author": {"name": "Nathan Sidwell", "email": "nathan@codesourcery.com", "date": "2003-06-28T19:02:32Z"}, "committer": {"name": "Nathan Sidwell", "email": "nathan@gcc.gnu.org", "date": "2003-06-28T19:02:32Z"}, "message": "error.c (print_instantiation_partial_context): Take a location_t.\n\n\t* error.c (print_instantiation_partial_context): Take a\n\tlocation_t.\n\t(print_instantiation_full_context): Adjust.\n\t(print_instantiation_context): Adjust.\n\nFrom-SVN: r68644", "tree": {"sha": "2ce64a436903cc81f11734c7ac9f759418366d99", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2ce64a436903cc81f11734c7ac9f759418366d99"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/357734719bc1f42da202c8d0e28a80f4a87e682b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/357734719bc1f42da202c8d0e28a80f4a87e682b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/357734719bc1f42da202c8d0e28a80f4a87e682b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/357734719bc1f42da202c8d0e28a80f4a87e682b/comments", "author": null, "committer": null, "parents": [{"sha": "9a472a42247d099c512b6d992890f88643612c8c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9a472a42247d099c512b6d992890f88643612c8c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9a472a42247d099c512b6d992890f88643612c8c"}], "stats": {"total": 27, "additions": 17, "deletions": 10}, "files": [{"sha": "ae461ed942b290509eafd342002f8a3f1af272a7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/357734719bc1f42da202c8d0e28a80f4a87e682b/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/357734719bc1f42da202c8d0e28a80f4a87e682b/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=357734719bc1f42da202c8d0e28a80f4a87e682b", "patch": "@@ -1,5 +1,10 @@\n 2003-06-28  Nathan Sidwell  <nathan@codesourcery.com>\n \n+\t* error.c (print_instantiation_partial_context): Take a\n+\tlocation_t.\n+\t(print_instantiation_full_context): Adjust.\n+\t(print_instantiation_context): Adjust.\n+\n \t* cp-tree.h (cp_line_of, cp_file_of): Remove.\n \t* error.c (cp_line_of, cp_file_of): Merge into ...\n \t(location_of): ... here. Make static, return a location_t."}, {"sha": "99624858aa41b3673598ef0e15527ee6a6b6921d", "filename": "gcc/cp/error.c", "status": "modified", "additions": 12, "deletions": 10, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/357734719bc1f42da202c8d0e28a80f4a87e682b/gcc%2Fcp%2Ferror.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/357734719bc1f42da202c8d0e28a80f4a87e682b/gcc%2Fcp%2Ferror.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ferror.c?ref=357734719bc1f42da202c8d0e28a80f4a87e682b", "patch": "@@ -104,7 +104,7 @@ static const char *function_category (tree);\n static void maybe_print_instantiation_context (diagnostic_context *);\n static void print_instantiation_full_context (diagnostic_context *);\n static void print_instantiation_partial_context (diagnostic_context *,\n-                                                 tree, const char *, int);\n+                                                 tree, location_t);\n static void cp_diagnostic_starter (diagnostic_context *, diagnostic_info *);\n static void cp_diagnostic_finalizer (diagnostic_context *, diagnostic_info *);\n static void cp_print_error_function (diagnostic_context *, diagnostic_info *);\n@@ -2403,24 +2403,26 @@ print_instantiation_full_context (diagnostic_context *context)\n \t}\n     }\n \n-  print_instantiation_partial_context (context, p,\n-\t\t\t\t       location.file, location.line);\n+  print_instantiation_partial_context (context, p, location);\n }\n \n /* Same as above but less verbose.  */\n static void\n print_instantiation_partial_context (diagnostic_context *context,\n-                                     tree t, const char *file, int line)\n+                                     tree t, location_t loc)\n {\n   for (; t; t = TREE_CHAIN (t))\n     {\n       output_verbatim\n-        (&context->buffer, \"%s:%d:   instantiated from `%s'\\n\", file, line,\n-         decl_as_string (TINST_DECL (t), TFF_DECL_SPECIFIERS | TFF_RETURN_TYPE));\n-      line = TINST_LINE (t);\n-      file = TINST_FILE (t);\n+        (&context->buffer, \"%s:%d:   instantiated from `%s'\\n\",\n+\t loc.file, loc.line,\n+         decl_as_string (TINST_DECL (t),\n+\t\t\t TFF_DECL_SPECIFIERS | TFF_RETURN_TYPE));\n+      loc.line = TINST_LINE (t);\n+      loc.file = TINST_FILE (t);\n     }\n-  output_verbatim (&context->buffer, \"%s:%d:   instantiated from here\\n\", file, line);\n+  output_verbatim (&context->buffer, \"%s:%d:   instantiated from here\\n\",\n+\t\t   loc.file, loc.line);\n }\n \n /* Called from cp_thing to print the template context for an error.  */\n@@ -2439,7 +2441,7 @@ void\n print_instantiation_context (void)\n {\n   print_instantiation_partial_context\n-    (global_dc, current_instantiation (), input_filename, input_line);\n+    (global_dc, current_instantiation (), input_location);\n   diagnostic_flush_buffer (global_dc);\n }\n \f"}]}