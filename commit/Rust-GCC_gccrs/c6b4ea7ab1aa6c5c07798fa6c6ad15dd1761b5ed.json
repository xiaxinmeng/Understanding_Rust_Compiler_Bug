{"sha": "c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "node_id": "C_kwDOANBUbNoAKGM2YjRlYTdhYjFhYTZjNWMwNzc5OGZhNmM2YWQxNWRkMTc2MWI1ZWQ", "commit": {"author": {"name": "Christophe Lyon", "email": "christophe.lyon@arm.com", "date": "2021-10-13T09:16:49Z"}, "committer": {"name": "Christophe Lyon", "email": "christophe.lyon@foss.st.com", "date": "2022-02-22T15:55:09Z"}, "message": "arm: Convert more MVE/CDE builtins to predicate qualifiers\n\nThis patch covers a few non-load/store builtins where we do not use\nthe <mode> iterator and thus we cannot use <MVE_vpred>.\n\nMost of the work of this patch series was carried out while I was\nworking at STMicroelectronics as a Linaro assignee.\n\n2022-02-22  Christophe Lyon  <christophe.lyon@arm.com>\n\n\tgcc/\n\tPR target/100757\n\tPR target/101325\n\t* config/arm/arm-builtins.cc (CX_UNARY_UNONE_QUALIFIERS): Use\n\tpredicate.\n\t(CX_BINARY_UNONE_QUALIFIERS): Likewise.\n\t(CX_TERNARY_UNONE_QUALIFIERS): Likewise.\n\t(TERNOP_NONE_NONE_NONE_UNONE_QUALIFIERS): Delete.\n\t(QUADOP_NONE_NONE_NONE_NONE_UNONE_QUALIFIERS): Delete.\n\t(QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE_QUALIFIERS): Delete.\n\t* config/arm/arm_mve_builtins.def: Use predicated qualifiers.\n\t* config/arm/mve.md: Use VxBI instead of HI.", "tree": {"sha": "ffb24721fec6b8f78ef47246d86327f38a4f00e6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ffb24721fec6b8f78ef47246d86327f38a4f00e6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/comments", "author": null, "committer": null, "parents": [{"sha": "6a7c13a0cf2290b60ab36f9ce1027b92838586bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6a7c13a0cf2290b60ab36f9ce1027b92838586bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6a7c13a0cf2290b60ab36f9ce1027b92838586bd"}], "stats": {"total": 136, "additions": 58, "deletions": 78}, "files": [{"sha": "a7acc1d71e7f4888b9deb0eeadd0a0da10e99639", "filename": "gcc/config/arm/arm-builtins.cc", "status": "modified", "additions": 3, "deletions": 23, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/gcc%2Fconfig%2Farm%2Farm-builtins.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/gcc%2Fconfig%2Farm%2Farm-builtins.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm-builtins.cc?ref=c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "patch": "@@ -295,7 +295,7 @@ static enum arm_type_qualifiers\n arm_cx_unary_unone_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n   = { qualifier_none, qualifier_immediate, qualifier_none,\n       qualifier_unsigned_immediate,\n-      qualifier_unsigned };\n+      qualifier_predicate };\n #define CX_UNARY_UNONE_QUALIFIERS (arm_cx_unary_unone_qualifiers)\n \n /* T (immediate, T, T, unsigned immediate).  */\n@@ -304,7 +304,7 @@ arm_cx_binary_unone_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n   = { qualifier_none, qualifier_immediate,\n       qualifier_none, qualifier_none,\n       qualifier_unsigned_immediate,\n-      qualifier_unsigned };\n+      qualifier_predicate };\n #define CX_BINARY_UNONE_QUALIFIERS (arm_cx_binary_unone_qualifiers)\n \n /* T (immediate, T, T, T, unsigned immediate).  */\n@@ -313,7 +313,7 @@ arm_cx_ternary_unone_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n   = { qualifier_none, qualifier_immediate,\n       qualifier_none, qualifier_none, qualifier_none,\n       qualifier_unsigned_immediate,\n-      qualifier_unsigned };\n+      qualifier_predicate };\n #define CX_TERNARY_UNONE_QUALIFIERS (arm_cx_ternary_unone_qualifiers)\n \n /* The first argument (return type) of a store should be void type,\n@@ -509,12 +509,6 @@ arm_ternop_none_none_none_imm_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n #define TERNOP_NONE_NONE_NONE_IMM_QUALIFIERS \\\n   (arm_ternop_none_none_none_imm_qualifiers)\n \n-static enum arm_type_qualifiers\n-arm_ternop_none_none_none_unone_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n-  = { qualifier_none, qualifier_none, qualifier_none, qualifier_unsigned };\n-#define TERNOP_NONE_NONE_NONE_UNONE_QUALIFIERS \\\n-  (arm_ternop_none_none_none_unone_qualifiers)\n-\n static enum arm_type_qualifiers\n arm_ternop_none_none_none_pred_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n   = { qualifier_none, qualifier_none, qualifier_none, qualifier_predicate };\n@@ -567,13 +561,6 @@ arm_quadop_unone_unone_none_none_pred_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n #define QUADOP_UNONE_UNONE_NONE_NONE_PRED_QUALIFIERS \\\n   (arm_quadop_unone_unone_none_none_pred_qualifiers)\n \n-static enum arm_type_qualifiers\n-arm_quadop_none_none_none_none_unone_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n-  = { qualifier_none, qualifier_none, qualifier_none, qualifier_none,\n-    qualifier_unsigned };\n-#define QUADOP_NONE_NONE_NONE_NONE_UNONE_QUALIFIERS \\\n-  (arm_quadop_none_none_none_none_unone_qualifiers)\n-\n static enum arm_type_qualifiers\n arm_quadop_none_none_none_none_pred_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n   = { qualifier_none, qualifier_none, qualifier_none, qualifier_none,\n@@ -588,13 +575,6 @@ arm_quadop_none_none_none_imm_pred_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n #define QUADOP_NONE_NONE_NONE_IMM_PRED_QUALIFIERS \\\n   (arm_quadop_none_none_none_imm_pred_qualifiers)\n \n-static enum arm_type_qualifiers\n-arm_quadop_unone_unone_unone_unone_unone_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n-  = { qualifier_unsigned, qualifier_unsigned, qualifier_unsigned,\n-    qualifier_unsigned, qualifier_unsigned };\n-#define QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE_QUALIFIERS \\\n-  (arm_quadop_unone_unone_unone_unone_unone_qualifiers)\n-\n static enum arm_type_qualifiers\n arm_quadop_unone_unone_unone_unone_pred_qualifiers[SIMD_MAX_BUILTIN_ARGS]\n   = { qualifier_unsigned, qualifier_unsigned, qualifier_unsigned,"}, {"sha": "1c8ee34f5cb764a6338629de2a7e3a3578c1e9c6", "filename": "gcc/config/arm/arm_mve_builtins.def", "status": "modified", "additions": 29, "deletions": 29, "changes": 58, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/gcc%2Fconfig%2Farm%2Farm_mve_builtins.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/gcc%2Fconfig%2Farm%2Farm_mve_builtins.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Farm_mve_builtins.def?ref=c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "patch": "@@ -87,8 +87,8 @@ VAR4 (BINOP_UNONE_UNONE_UNONE, vcreateq_u, v16qi, v8hi, v4si, v2di)\n VAR4 (BINOP_NONE_UNONE_UNONE, vcreateq_s, v16qi, v8hi, v4si, v2di)\n VAR3 (BINOP_UNONE_UNONE_IMM, vshrq_n_u, v16qi, v8hi, v4si)\n VAR3 (BINOP_NONE_NONE_IMM, vshrq_n_s, v16qi, v8hi, v4si)\n-VAR1 (BINOP_NONE_NONE_UNONE, vaddlvq_p_s, v4si)\n-VAR1 (BINOP_UNONE_UNONE_UNONE, vaddlvq_p_u, v4si)\n+VAR1 (BINOP_NONE_NONE_PRED, vaddlvq_p_s, v4si)\n+VAR1 (BINOP_UNONE_UNONE_PRED, vaddlvq_p_u, v4si)\n VAR3 (BINOP_PRED_NONE_NONE, vcmpneq_, v16qi, v8hi, v4si)\n VAR3 (BINOP_NONE_NONE_NONE, vshlq_s, v16qi, v8hi, v4si)\n VAR3 (BINOP_UNONE_UNONE_NONE, vshlq_u, v16qi, v8hi, v4si)\n@@ -465,20 +465,20 @@ VAR2 (TERNOP_NONE_NONE_NONE_IMM, vqshrnbq_n_s, v8hi, v4si)\n VAR2 (TERNOP_NONE_NONE_NONE_IMM, vqrshrntq_n_s, v8hi, v4si)\n VAR2 (TERNOP_NONE_NONE_IMM_PRED, vorrq_m_n_s, v8hi, v4si)\n VAR2 (TERNOP_NONE_NONE_IMM_PRED, vmvnq_m_n_s, v8hi, v4si)\n-VAR1 (TERNOP_UNONE_UNONE_UNONE_UNONE, vrmlaldavhq_p_u, v4si)\n-VAR1 (TERNOP_UNONE_UNONE_UNONE_UNONE, vrev16q_m_u, v16qi)\n-VAR1 (TERNOP_UNONE_UNONE_UNONE_UNONE, vaddlvaq_p_u, v4si)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vrmlsldavhxq_p_s, v4si)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vrmlsldavhq_p_s, v4si)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vrmlaldavhxq_p_s, v4si)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vrmlaldavhq_p_s, v4si)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vrev32q_m_f, v8hf)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vrev16q_m_s, v16qi)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vcvttq_m_f32_f16, v4sf)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vcvttq_m_f16_f32, v8hf)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vcvtbq_m_f32_f16, v4sf)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vcvtbq_m_f16_f32, v8hf)\n-VAR1 (TERNOP_NONE_NONE_NONE_UNONE, vaddlvaq_p_s, v4si)\n+VAR1 (TERNOP_UNONE_UNONE_UNONE_PRED, vrmlaldavhq_p_u, v4si)\n+VAR1 (TERNOP_UNONE_UNONE_UNONE_PRED, vrev16q_m_u, v16qi)\n+VAR1 (TERNOP_UNONE_UNONE_UNONE_PRED, vaddlvaq_p_u, v4si)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vrmlsldavhxq_p_s, v4si)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vrmlsldavhq_p_s, v4si)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vrmlaldavhxq_p_s, v4si)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vrmlaldavhq_p_s, v4si)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vrev32q_m_f, v8hf)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vrev16q_m_s, v16qi)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vcvttq_m_f32_f16, v4sf)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vcvttq_m_f16_f32, v8hf)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vcvtbq_m_f32_f16, v4sf)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vcvtbq_m_f16_f32, v8hf)\n+VAR1 (TERNOP_NONE_NONE_NONE_PRED, vaddlvaq_p_s, v4si)\n VAR1 (TERNOP_NONE_NONE_NONE_NONE, vrmlsldavhaxq_s, v4si)\n VAR1 (TERNOP_NONE_NONE_NONE_NONE, vrmlsldavhaq_s, v4si)\n VAR1 (TERNOP_NONE_NONE_NONE_NONE, vrmlaldavhaxq_s, v4si)\n@@ -629,11 +629,11 @@ VAR2 (QUADOP_NONE_NONE_NONE_IMM_PRED, vqshrntq_m_n_s, v8hi, v4si)\n VAR2 (QUADOP_NONE_NONE_NONE_IMM_PRED, vqshrnbq_m_n_s, v8hi, v4si)\n VAR2 (QUADOP_NONE_NONE_NONE_IMM_PRED, vqrshrntq_m_n_s, v8hi, v4si)\n VAR2 (QUADOP_NONE_NONE_NONE_IMM_PRED, vqrshrnbq_m_n_s, v8hi, v4si)\n-VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE, vrmlaldavhaq_p_u, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vrmlsldavhaxq_p_s, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vrmlsldavhaq_p_s, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vrmlaldavhaxq_p_s, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vrmlaldavhaq_p_s, v4si)\n+VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_PRED, vrmlaldavhaq_p_u, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vrmlsldavhaxq_p_s, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vrmlsldavhaq_p_s, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vrmlaldavhaxq_p_s, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vrmlaldavhaq_p_s, v4si)\n VAR2 (QUADOP_UNONE_UNONE_NONE_IMM_PRED, vcvtq_m_n_from_f_u, v8hi, v4si)\n VAR2 (QUADOP_NONE_NONE_NONE_IMM_PRED, vcvtq_m_n_from_f_s, v8hi, v4si)\n VAR2 (QUADOP_NONE_NONE_NONE_NONE_PRED, vbrsrq_m_n_f, v8hf, v4sf)\n@@ -845,14 +845,14 @@ VAR1 (BINOP_NONE_NONE_NONE, vsbciq_s, v4si)\n VAR1 (BINOP_UNONE_UNONE_UNONE, vsbciq_u, v4si)\n VAR1 (BINOP_NONE_NONE_NONE, vsbcq_s, v4si)\n VAR1 (BINOP_UNONE_UNONE_UNONE, vsbcq_u, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vadciq_m_s, v4si)\n-VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE, vadciq_m_u, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vadcq_m_s, v4si)\n-VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE, vadcq_m_u, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vsbciq_m_s, v4si)\n-VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE, vsbciq_m_u, v4si)\n-VAR1 (QUADOP_NONE_NONE_NONE_NONE_UNONE, vsbcq_m_s, v4si)\n-VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_UNONE, vsbcq_m_u, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vadciq_m_s, v4si)\n+VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_PRED, vadciq_m_u, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vadcq_m_s, v4si)\n+VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_PRED, vadcq_m_u, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vsbciq_m_s, v4si)\n+VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_PRED, vsbciq_m_u, v4si)\n+VAR1 (QUADOP_NONE_NONE_NONE_NONE_PRED, vsbcq_m_s, v4si)\n+VAR1 (QUADOP_UNONE_UNONE_UNONE_UNONE_PRED, vsbcq_m_u, v4si)\n VAR5 (STORE1, vst2q, v16qi, v8hi, v4si, v8hf, v4sf)\n VAR5 (LOAD1, vld4q, v16qi, v8hi, v4si, v8hf, v4sf)\n VAR5 (LOAD1, vld2q, v16qi, v8hi, v4si, v8hf, v4sf)"}, {"sha": "908bedc92545e4ce2858136116e9649fb7ba3350", "filename": "gcc/config/arm/mve.md", "status": "modified", "additions": 26, "deletions": 26, "changes": 52, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/gcc%2Fconfig%2Farm%2Fmve.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed/gcc%2Fconfig%2Farm%2Fmve.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Fmve.md?ref=c6b4ea7ab1aa6c5c07798fa6c6ad15dd1761b5ed", "patch": "@@ -826,7 +826,7 @@\n   [\n    (set (match_operand:DI 0 \"s_register_operand\" \"=r\")\n \t(unspec:DI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n-\t\t    (match_operand:HI 2 \"vpr_register_operand\" \"Up\")]\n+\t\t    (match_operand:V4BI 2 \"vpr_register_operand\" \"Up\")]\n \t VADDLVQ_P))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -3739,7 +3739,7 @@\n    (set (match_operand:DI 0 \"s_register_operand\" \"=r\")\n \t(unspec:DI [(match_operand:DI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:V4BI 3 \"vpr_register_operand\" \"Up\")]\n \t VADDLVAQ_P))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -3949,7 +3949,7 @@\n    (set (match_operand:V8HF 0 \"s_register_operand\" \"=w\")\n \t(unspec:V8HF [(match_operand:V8HF 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SF 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VCVTBQ_M_F16_F32))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -3965,7 +3965,7 @@\n    (set (match_operand:V4SF 0 \"s_register_operand\" \"=w\")\n \t(unspec:V4SF [(match_operand:V4SF 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V8HF 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VCVTBQ_M_F32_F16))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -3981,7 +3981,7 @@\n    (set (match_operand:V8HF 0 \"s_register_operand\" \"=w\")\n \t(unspec:V8HF [(match_operand:V8HF 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SF 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VCVTTQ_M_F16_F32))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -3997,7 +3997,7 @@\n    (set (match_operand:V4SF 0 \"s_register_operand\" \"=w\")\n \t(unspec:V4SF [(match_operand:V4SF 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V8HF 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VCVTTQ_M_F32_F16))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -4595,7 +4595,7 @@\n    (set (match_operand:V8HF 0 \"s_register_operand\" \"=w\")\n \t(unspec:V8HF [(match_operand:V8HF 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V8HF 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VREV32Q_M_F))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -4659,7 +4659,7 @@\n    (set (match_operand:DI 0 \"s_register_operand\" \"=r\")\n \t(unspec:DI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VRMLALDAVHXQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -4691,7 +4691,7 @@\n    (set (match_operand:DI 0 \"s_register_operand\" \"=r\")\n \t(unspec:DI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VRMLSLDAVHQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -4707,7 +4707,7 @@\n    (set (match_operand:DI 0 \"s_register_operand\" \"=r\")\n \t(unspec:DI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 3 \"vpr_register_operand\" \"Up\")]\n \t VRMLSLDAVHXQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -4932,7 +4932,7 @@\n    (set (match_operand:V16QI 0 \"s_register_operand\" \"=w\")\n \t(unspec:V16QI [(match_operand:V16QI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V16QI 2 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:V16BI 3 \"vpr_register_operand\" \"Up\")]\n \t VREV16Q_M))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -4964,7 +4964,7 @@\n    (set (match_operand:DI 0 \"s_register_operand\" \"=r\")\n \t(unspec:DI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n \t\t    (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n-\t\t    (match_operand:HI 3 \"vpr_register_operand\" \"Up\")]\n+\t\t    (match_operand:V4BI 3 \"vpr_register_operand\" \"Up\")]\n \t VRMLALDAVHQ_P))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -6233,7 +6233,7 @@\n \t(unspec:DI [(match_operand:DI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 4 \"vpr_register_operand\" \"Up\")]\n \t VRMLALDAVHAQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -6556,7 +6556,7 @@\n \t(unspec:DI [(match_operand:DI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 4 \"vpr_register_operand\" \"Up\")]\n \t VRMLALDAVHAQ_P_U))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -6573,7 +6573,7 @@\n \t(unspec:DI [(match_operand:DI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 4 \"vpr_register_operand\" \"Up\")]\n \t VRMLALDAVHAXQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -6590,7 +6590,7 @@\n \t(unspec:DI [(match_operand:DI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 4 \"vpr_register_operand\" \"Up\")]\n \t VRMLSLDAVHAQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -6607,7 +6607,7 @@\n \t(unspec:DI [(match_operand:DI 1 \"s_register_operand\" \"0\")\n \t\t       (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t       (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t       (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t       (match_operand:<MVE_VPRED> 4 \"vpr_register_operand\" \"Up\")]\n \t VRMLSLDAVHAXQ_P_S))\n   ]\n   \"TARGET_HAVE_MVE\"\n@@ -7528,7 +7528,7 @@\n (define_insn \"mve_vldrhq_z_fv8hf\"\n   [(set (match_operand:V8HF 0 \"s_register_operand\" \"=w\")\n \t(unspec:V8HF [(match_operand:V8HI 1 \"mve_memory_operand\" \"Ux\")\n-\t(match_operand:HI 2 \"vpr_register_operand\" \"Up\")]\n+\t(match_operand:<MVE_VPRED> 2 \"vpr_register_operand\" \"Up\")]\n \t VLDRHQ_F))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -8303,7 +8303,7 @@\n (define_insn \"mve_vstrwq_p_fv4sf\"\n   [(set (match_operand:V4SI 0 \"mve_memory_operand\" \"=Ux\")\n \t(unspec:V4SI [(match_operand:V4SF 1 \"s_register_operand\" \"w\")\n-\t\t      (match_operand:HI 2 \"vpr_register_operand\" \"Up\")]\n+\t\t      (match_operand:<MVE_VPRED> 2 \"vpr_register_operand\" \"Up\")]\n \t VSTRWQ_F))\n   ]\n   \"TARGET_HAVE_MVE && TARGET_HAVE_MVE_FLOAT\"\n@@ -9844,7 +9844,7 @@\n \t(unspec:V4SI [(match_operand:V4SI 1 \"s_register_operand\" \"0\")\n \t\t      (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t      (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t      (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t      (match_operand:V4BI 4 \"vpr_register_operand\" \"Up\")]\n \t VADCIQ_M))\n    (set (reg:SI VFPCC_REGNUM)\n \t(unspec:SI [(const_int 0)]\n@@ -9880,7 +9880,7 @@\n \t(unspec:V4SI [(match_operand:V4SI 1 \"s_register_operand\" \"0\")\n \t\t      (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t      (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t      (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t      (match_operand:V4BI 4 \"vpr_register_operand\" \"Up\")]\n \t VADCQ_M))\n    (set (reg:SI VFPCC_REGNUM)\n \t(unspec:SI [(reg:SI VFPCC_REGNUM)]\n@@ -9917,7 +9917,7 @@\n \t(unspec:V4SI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n \t\t      (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t      (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t      (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t      (match_operand:V4BI 4 \"vpr_register_operand\" \"Up\")]\n \t VSBCIQ_M))\n    (set (reg:SI VFPCC_REGNUM)\n \t(unspec:SI [(const_int 0)]\n@@ -9953,7 +9953,7 @@\n \t(unspec:V4SI [(match_operand:V4SI 1 \"s_register_operand\" \"w\")\n \t\t      (match_operand:V4SI 2 \"s_register_operand\" \"w\")\n \t\t      (match_operand:V4SI 3 \"s_register_operand\" \"w\")\n-\t\t      (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t      (match_operand:V4BI 4 \"vpr_register_operand\" \"Up\")]\n \t VSBCQ_M))\n    (set (reg:SI VFPCC_REGNUM)\n \t(unspec:SI [(reg:SI VFPCC_REGNUM)]\n@@ -10457,7 +10457,7 @@\n \t(unspec:V16QI [(match_operand:SI 1 \"const_int_coproc_operand\" \"i\")\n \t\t\t   (match_operand:V16QI 2 \"register_operand\" \"0\")\n \t\t\t   (match_operand:SI 3 \"const_int_mve_cde1_operand\" \"i\")\n-\t\t\t   (match_operand:HI 4 \"vpr_register_operand\" \"Up\")]\n+\t\t\t   (match_operand:V16BI 4 \"vpr_register_operand\" \"Up\")]\n \t CDE_VCX))]\n   \"TARGET_CDE && TARGET_HAVE_MVE\"\n   \"vpst\\;vcx1<a>t\\\\tp%c1, %q0, #%c3\"\n@@ -10471,7 +10471,7 @@\n \t\t\t  (match_operand:V16QI 2 \"register_operand\" \"0\")\n \t\t\t  (match_operand:V16QI 3 \"register_operand\" \"t\")\n \t\t\t  (match_operand:SI 4 \"const_int_mve_cde2_operand\" \"i\")\n-\t\t\t  (match_operand:HI 5 \"vpr_register_operand\" \"Up\")]\n+\t\t\t  (match_operand:V16BI 5 \"vpr_register_operand\" \"Up\")]\n \t CDE_VCX))]\n   \"TARGET_CDE && TARGET_HAVE_MVE\"\n   \"vpst\\;vcx2<a>t\\\\tp%c1, %q0, %q3, #%c4\"\n@@ -10486,7 +10486,7 @@\n \t\t\t  (match_operand:V16QI 3 \"register_operand\" \"t\")\n \t\t\t  (match_operand:V16QI 4 \"register_operand\" \"t\")\n \t\t\t  (match_operand:SI 5 \"const_int_mve_cde3_operand\" \"i\")\n-\t\t\t  (match_operand:HI 6 \"vpr_register_operand\" \"Up\")]\n+\t\t\t  (match_operand:V16BI 6 \"vpr_register_operand\" \"Up\")]\n \t CDE_VCX))]\n   \"TARGET_CDE && TARGET_HAVE_MVE\"\n   \"vpst\\;vcx3<a>t\\\\tp%c1, %q0, %q3, %q4, #%c5\""}]}