{"sha": "75b5bc017bbeb83768564a3bd8128e382d327102", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzViNWJjMDE3YmJlYjgzNzY4NTY0YTNiZDgxMjhlMzgyZDMyNzEwMg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2018-06-14T13:35:06Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2018-06-14T13:35:06Z"}, "message": "re PR target/85945 (ICE in resolve_subreg_use, at lower-subreg.c:751)\n\n\tPR target/85945\n\t* lower-subreg.c (find_decomposable_subregs): Don't decompose float\n\tsubregs of multi-word pseudos unless the float mode has word size.\n\n\t* gcc.c-torture/compile/pr85945.c: New test.\n\nFrom-SVN: r261593", "tree": {"sha": "fbdf198a6c3f99aadacfcc2a274072d316ded024", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/fbdf198a6c3f99aadacfcc2a274072d316ded024"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/75b5bc017bbeb83768564a3bd8128e382d327102", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75b5bc017bbeb83768564a3bd8128e382d327102", "html_url": "https://github.com/Rust-GCC/gccrs/commit/75b5bc017bbeb83768564a3bd8128e382d327102", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/75b5bc017bbeb83768564a3bd8128e382d327102/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "977ac63eab69884aa8d4bd317d7c1b80627d75ef", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/977ac63eab69884aa8d4bd317d7c1b80627d75ef", "html_url": "https://github.com/Rust-GCC/gccrs/commit/977ac63eab69884aa8d4bd317d7c1b80627d75ef"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "65284fb6fbcb51e28e629a15c00a46217b13c69f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=75b5bc017bbeb83768564a3bd8128e382d327102", "patch": "@@ -1,3 +1,9 @@\n+2018-06-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/85945\n+\t* lower-subreg.c (find_decomposable_subregs): Don't decompose float\n+\tsubregs of multi-word pseudos unless the float mode has word size.\n+\n 2018-06-14  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/86139"}, {"sha": "72818b8255851921a6300db960fb42a7b29b5e6b", "filename": "gcc/lower-subreg.c", "status": "modified", "additions": 10, "deletions": 1, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2Flower-subreg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2Flower-subreg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flower-subreg.c?ref=75b5bc017bbeb83768564a3bd8128e382d327102", "patch": "@@ -497,7 +497,16 @@ find_decomposable_subregs (rtx *loc, enum classify_move_insn *pcmi)\n \t     were the same number and size of pieces.  Hopefully this\n \t     doesn't happen much.  */\n \n-\t  if (outer_words == 1 && inner_words > 1)\n+\t  if (outer_words == 1\n+\t      && inner_words > 1\n+\t      /* Don't allow to decompose floating point subregs of\n+\t\t multi-word pseudos if the floating point mode does\n+\t\t not have word size, because otherwise we'd generate\n+\t\t a subreg with that floating mode from a different\n+\t\t sized integral pseudo which is not allowed by\n+\t\t validate_subreg.  */\n+\t      && (!FLOAT_MODE_P (GET_MODE (x))\n+\t\t  || outer_size == UNITS_PER_WORD))\n \t    {\n \t      bitmap_set_bit (decomposable_context, regno);\n \t      iter.skip_subrtxes ();"}, {"sha": "74e5d850524603ab96389f8b60fa2c1d9ea557d9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=75b5bc017bbeb83768564a3bd8128e382d327102", "patch": "@@ -1,3 +1,8 @@\n+2018-06-14  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR target/85945\n+\t* gcc.c-torture/compile/pr85945.c: New test.\n+\n 2018-06-14  Richard Biener  <rguenther@suse.de>\n \n \tPR ipa/86124"}, {"sha": "93b2023f25cb132ad4954c48cd375db89f7524cb", "filename": "gcc/testsuite/gcc.c-torture/compile/pr85945.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr85945.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/75b5bc017bbeb83768564a3bd8128e382d327102/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr85945.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr85945.c?ref=75b5bc017bbeb83768564a3bd8128e382d327102", "patch": "@@ -0,0 +1,16 @@\n+/* PR target/85945 */\n+\n+typedef float V __attribute__((vector_size(16)));\n+union U { V v; float f[4]; };\n+int f;\n+float g[4];\n+\n+void\n+foo (void)\n+{\n+  V d;\n+  union U i;\n+  i.v = d;\n+  for (f = 0; f < 4; f++)\n+    g[f] = i.f[f];\n+}"}]}