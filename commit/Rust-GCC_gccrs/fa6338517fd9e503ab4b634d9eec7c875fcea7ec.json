{"sha": "fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZmE2MzM4NTE3ZmQ5ZTUwM2FiNGI2MzRkOWVlYzdjODc1ZmNlYTdlYw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "iant@google.com", "date": "2007-03-26T21:43:30Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2007-03-26T21:43:30Z"}, "message": "re PR tree-optimization/31345 (ICE in set_value_range, at tree-vrp.c:269)\n\n./:\tPR tree-optimization/31345\n\t* tree-vrp.c (extract_range_from_binary_expr): Turn ranges like\n\t[+INF, +INF(OVF)] into VARYING.\ntestsuite/:\n\tPR tree-optimization/31345\n\t* gcc.c-torture/compile/pr31345-1.c: New test.\n\nFrom-SVN: r123237", "tree": {"sha": "04800cbd7818dfff26637d50f412f6a224326008", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/04800cbd7818dfff26637d50f412f6a224326008"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/comments", "author": null, "committer": null, "parents": [{"sha": "0d67a675f058ea075a64d3675ca8b9b7322594fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0d67a675f058ea075a64d3675ca8b9b7322594fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0d67a675f058ea075a64d3675ca8b9b7322594fd"}], "stats": {"total": 47, "additions": 45, "deletions": 2}, "files": [{"sha": "b8636653e476189cc1c6301e8bc83cd1f6512d9e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "patch": "@@ -1,3 +1,9 @@\n+2007-03-26  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR tree-optimization/31345\n+\t* tree-vrp.c (extract_range_from_binary_expr): Turn ranges like\n+\t[+INF, +INF(OVF)] into VARYING.\n+\n 2007-03-26  Zack Weinberg  <zackw@panix.com>\n \n \t* gengtype-parse.c: New file."}, {"sha": "7ba80be07d9ee3ec5e717f4f4216ad30d9bb7bf4", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "patch": "@@ -1,3 +1,8 @@\n+2007-03-26  Ian Lance Taylor  <iant@google.com>\n+\n+\tPR tree-optimization/31345\n+\t* gcc.c-torture/compile/pr31345-1.c: New test.\n+\n 2007-03-26  Brooks Moses  <brooks.moses@codesourcery.com>\n \n \t* gfortran.dg/func_derived_4.f90: Fix module cleanup."}, {"sha": "fb4d8034c55a65086a268813270f84c5fd477976", "filename": "gcc/testsuite/gcc.c-torture/compile/pr31345-1.c", "status": "added", "additions": 24, "deletions": 0, "changes": 24, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr31345-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr31345-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr31345-1.c?ref=fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "patch": "@@ -0,0 +1,24 @@\n+/* PR tree-optimization/31345\n+   This caused a crash in VRP when dealing with overflow infinities.  */\n+\n+void\n+dpsnaffle (const char *kbuf)\n+{\n+  int hash, thash, head[2], off;\n+    {\n+      int _DP_i;\n+      (hash) = 19780211;\n+        {\n+          (hash) = (hash) + (kbuf)[_DP_i];\n+        }\n+      (hash) = ((hash) * 43321879) & 0x7FFFFFFF;\n+    }\n+  while (off != 0)\n+    {\n+      if (hash > thash) {}\n+      else if (hash < thash)\n+        {\n+          off = head[2];\n+        }\n+    }\n+}"}, {"sha": "3b7358dc032087d0ab2e7b889863e7f3cbdf0dc9", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 10, "deletions": 2, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/fa6338517fd9e503ab4b634d9eec7c875fcea7ec/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=fa6338517fd9e503ab4b634d9eec7c875fcea7ec", "patch": "@@ -1982,10 +1982,18 @@ extract_range_from_binary_expr (value_range_t *vr, tree expr)\n       return;\n     }\n \n+  /* We punt if:\n+     1) [-INF, +INF]\n+     2) [-INF, +-INF(OVF)]\n+     3) [+-INF(OVF), +INF]\n+     4) [+-INF(OVF), +-INF(OVF)]\n+     We learn nothing when we have INF and INF(OVF) on both sides.\n+     Note that we do accept [-INF, -INF] and [+INF, +INF] without\n+     overflow.  */\n   if ((min == TYPE_MIN_VALUE (TREE_TYPE (min))\n-       || is_negative_overflow_infinity (min))\n+       || is_overflow_infinity (min))\n       && (max == TYPE_MAX_VALUE (TREE_TYPE (max))\n-\t  || is_positive_overflow_infinity (max)))\n+\t  || is_overflow_infinity (max)))\n     {\n       set_value_range_to_varying (vr);\n       return;"}]}