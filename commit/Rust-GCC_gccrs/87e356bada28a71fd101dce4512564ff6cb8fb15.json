{"sha": "87e356bada28a71fd101dce4512564ff6cb8fb15", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ODdlMzU2YmFkYTI4YTcxZmQxMDFkY2U0NTEyNTY0ZmY2Y2I4ZmIxNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2013-07-10T16:40:49Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2013-07-10T16:40:49Z"}, "message": "re PR preprocessor/57757 (CPP extra inserted whitespace needs to be reviewed for C++11 user-defined literals)\n\n\tPR preprocessor/57757\n\t* lex.c (cpp_avoid_paste): Avoid pasting CPP_{,W,UTF8}STRING\n\tor CPP_STRING{16,32} with CPP_NAME or SPELL_LITERAL token that\n\tstarts if a-zA-Z_.\n\n\t* g++.dg/cpp/paste1.C: New test.\n\t* g++.dg/cpp/paste2.C: New test.\n\nFrom-SVN: r200875", "tree": {"sha": "0fc3c50dd67f106705eddd814b4b2176bee125ff", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0fc3c50dd67f106705eddd814b4b2176bee125ff"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/87e356bada28a71fd101dce4512564ff6cb8fb15", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87e356bada28a71fd101dce4512564ff6cb8fb15", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87e356bada28a71fd101dce4512564ff6cb8fb15", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87e356bada28a71fd101dce4512564ff6cb8fb15/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bb6f2bacbb0d7133a1187bb394d5713b98a54942", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bb6f2bacbb0d7133a1187bb394d5713b98a54942", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bb6f2bacbb0d7133a1187bb394d5713b98a54942"}], "stats": {"total": 52, "additions": 52, "deletions": 0}, "files": [{"sha": "82502f5f9015f938b8d88929dcbb8fec10b708cd", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e356bada28a71fd101dce4512564ff6cb8fb15/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e356bada28a71fd101dce4512564ff6cb8fb15/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=87e356bada28a71fd101dce4512564ff6cb8fb15", "patch": "@@ -1,4 +1,11 @@\n+2013-07-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR preprocessor/57757\n+\t* g++.dg/cpp/paste1.C: New test.\n+\t* g++.dg/cpp/paste2.C: New test.\n+\n 2013-07-10  Graham Stott  <grahams@btinternet.com>\n+\n \t* gcc.target/mips/mulsize-1.c: New.\n \t* gcc.target/mips/mulsize-2.c: New.\n \t* gcc.target/mips/mulsize-3.c: New."}, {"sha": "a33fdf5c436a64cc89d29a9c9e0d76159fb24760", "filename": "gcc/testsuite/g++.dg/cpp/paste1.C", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e356bada28a71fd101dce4512564ff6cb8fb15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpaste1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e356bada28a71fd101dce4512564ff6cb8fb15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpaste1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpaste1.C?ref=87e356bada28a71fd101dce4512564ff6cb8fb15", "patch": "@@ -0,0 +1,14 @@\n+// PR preprocessor/57757\n+// { dg-do compile }\n+// { dg-options \"-std=c++11\" }\n+\n+#define S(x) x\n+extern S(\"C\")void exit (int);\n+int\n+main ()\n+{\n+  (void) (S(\"foo\")and 0);\n+  const wchar_t *p = S(L\"foo\")L\"bar\";\n+  const char *a = S(\"foo\")R\"(bar)\";\n+  exit (0);\n+}"}, {"sha": "89a659e6bb9561f70b2410625d2e965ef696ac2e", "filename": "gcc/testsuite/g++.dg/cpp/paste2.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e356bada28a71fd101dce4512564ff6cb8fb15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpaste2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e356bada28a71fd101dce4512564ff6cb8fb15/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpaste2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp%2Fpaste2.C?ref=87e356bada28a71fd101dce4512564ff6cb8fb15", "patch": "@@ -0,0 +1,15 @@\n+// PR preprocessor/57757\n+// { dg-do compile }\n+// { dg-options \"-std=c++11 -save-temps\" }\n+// { dg-final cleanup-saved-temps }\n+\n+#define S(x) x\n+extern S(\"C\")void exit (int);\n+int\n+main ()\n+{\n+  (void) (S(\"foo\")and 0);\n+  const wchar_t *p = S(L\"foo\")L\"bar\";\n+  const char *a = S(\"foo\")R\"(bar)\";\n+  exit (0);\n+}"}, {"sha": "d0c583d86913b48d0467e12a94143f008a344b12", "filename": "libcpp/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e356bada28a71fd101dce4512564ff6cb8fb15/libcpp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e356bada28a71fd101dce4512564ff6cb8fb15/libcpp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2FChangeLog?ref=87e356bada28a71fd101dce4512564ff6cb8fb15", "patch": "@@ -1,3 +1,10 @@\n+2013-07-10  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR preprocessor/57757\n+\t* lex.c (cpp_avoid_paste): Avoid pasting CPP_{,W,UTF8}STRING\n+\tor CPP_STRING{16,32} with CPP_NAME or SPELL_LITERAL token that\n+\tstarts if a-zA-Z_.\n+\n 2013-06-28  Ed Smith-Rowland  <3dw4rd@verizon.net>\n \n \t* lex.c (lex_raw_string(), lex_string()): Constrain suffixes treated"}, {"sha": "dc7b9c17ddc3961a5ee8a500ab78d6e24029e69a", "filename": "libcpp/lex.c", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/87e356bada28a71fd101dce4512564ff6cb8fb15/libcpp%2Flex.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/87e356bada28a71fd101dce4512564ff6cb8fb15/libcpp%2Flex.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libcpp%2Flex.c?ref=87e356bada28a71fd101dce4512564ff6cb8fb15", "patch": "@@ -2767,6 +2767,15 @@ cpp_avoid_paste (cpp_reader *pfile, const cpp_token *token1,\n \t\t\t\t|| (CPP_OPTION (pfile, objc)\n \t\t\t\t    && token1->val.str.text[0] == '@'\n \t\t\t\t    && (b == CPP_NAME || b == CPP_STRING)));\n+    case CPP_STRING:\n+    case CPP_WSTRING:\n+    case CPP_UTF8STRING:\n+    case CPP_STRING16:\n+    case CPP_STRING32:\treturn (CPP_OPTION (pfile, user_literals)\n+\t\t\t\t&& (b == CPP_NAME\n+\t\t\t\t    || (TOKEN_SPELL (token2) == SPELL_LITERAL\n+\t\t\t\t\t&& ISIDST (token2->val.str.text[0]))));\n+\n     default:\t\tbreak;\n     }\n "}]}