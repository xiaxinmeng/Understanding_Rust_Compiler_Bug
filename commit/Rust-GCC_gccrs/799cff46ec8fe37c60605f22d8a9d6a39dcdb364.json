{"sha": "799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Nzk5Y2ZmNDZlYzhmZTM3YzYwNjA1ZjIyZDhhOWQ2YTM5ZGNkYjM2NA==", "commit": {"author": {"name": "Marius Strobl", "email": "marius@FreeBSD.org", "date": "2008-04-18T02:16:35Z"}, "committer": {"name": "Gerald Pfeifer", "email": "gerald@gcc.gnu.org", "date": "2008-04-18T02:16:35Z"}, "message": "gthr-posix.h (__gthread_active_p): Use the Solaris implementation for FreeBSD as well.\n\n\t* gthr-posix.h (__gthread_active_p): Use the Solaris implementation\n\tfor FreeBSD as well.\n\t* gthr-posix95.h: Likewise.\n\nFrom-SVN: r134423", "tree": {"sha": "d97072b705682b99c3bac4021c85f16d54ca9c21", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/d97072b705682b99c3bac4021c85f16d54ca9c21"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "html_url": "https://github.com/Rust-GCC/gccrs/commit/799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/comments", "author": {"login": "sparcplug", "id": 26117443, "node_id": "MDQ6VXNlcjI2MTE3NDQz", "avatar_url": "https://avatars.githubusercontent.com/u/26117443?v=4", "gravatar_id": "", "url": "https://api.github.com/users/sparcplug", "html_url": "https://github.com/sparcplug", "followers_url": "https://api.github.com/users/sparcplug/followers", "following_url": "https://api.github.com/users/sparcplug/following{/other_user}", "gists_url": "https://api.github.com/users/sparcplug/gists{/gist_id}", "starred_url": "https://api.github.com/users/sparcplug/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/sparcplug/subscriptions", "organizations_url": "https://api.github.com/users/sparcplug/orgs", "repos_url": "https://api.github.com/users/sparcplug/repos", "events_url": "https://api.github.com/users/sparcplug/events{/privacy}", "received_events_url": "https://api.github.com/users/sparcplug/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "57b256d993797dfaa46995aed0d3d74d288729fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/57b256d993797dfaa46995aed0d3d74d288729fc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/57b256d993797dfaa46995aed0d3d74d288729fc"}], "stats": {"total": 28, "additions": 20, "deletions": 8}, "files": [{"sha": "f45e4a6895a49c7b38d28d279092e55a957434bf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "patch": "@@ -1,3 +1,9 @@\n+2008-04-18  Marius Strobl <marius@FreeBSD.org>\n+\n+\t* gthr-posix.h (__gthread_active_p): Use the Solaris implementation\n+\tfor FreeBSD as well.\n+\t* gthr-posix95.h: Likewise.\n+\n 2008-04-17  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \tPR rtl-optimization/35838"}, {"sha": "b16f9b31fe8d4c9144e818e6734434b3dc580ed2", "filename": "gcc/gthr-posix.h", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/gcc%2Fgthr-posix.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/gcc%2Fgthr-posix.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-posix.h?ref=799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "patch": "@@ -158,9 +158,12 @@ __gthrw(pthread_setschedparam)\n    it is passed so we cannot pretend that the interface is active if -pthreads\n    is not specified.  On Solaris 2.5.1, the interface is not exposed at all so\n    we need to play the usual game with weak symbols.  On Solaris 10 and up, a\n-   working interface is always exposed.  */\n+   working interface is always exposed.  On FreeBSD 6 and later, libc also\n+   exposes a dummy POSIX threads interface, similar to what Solaris 2.6 up\n+   to 9 does.  FreeBSD >= 700014 even provides a pthread_cancel stub in libc,\n+   which means the alternate __gthread_active_p below cannot be used there.  */\n \n-#if defined(__sun) && defined(__svr4__)\n+#if defined(__FreeBSD__) || (defined(__sun) && defined(__svr4__))\n \n static volatile int __gthread_active = -1;\n \n@@ -203,7 +206,7 @@ __gthread_active_p (void)\n   return __gthread_active_latest_value != 0;\n }\n \n-#else /* not Solaris */\n+#else /* neither FreeBSD nor Solaris */\n \n static inline int\n __gthread_active_p (void)\n@@ -213,7 +216,7 @@ __gthread_active_p (void)\n   return __gthread_active_ptr != 0;\n }\n \n-#endif /* Solaris */\n+#endif /* FreeBSD or Solaris */\n \n #else /* not SUPPORTS_WEAK */\n "}, {"sha": "190b097d284d20928563a4c351fd7fd39ee844d7", "filename": "gcc/gthr-posix95.h", "status": "modified", "additions": 7, "deletions": 4, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/gcc%2Fgthr-posix95.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/799cff46ec8fe37c60605f22d8a9d6a39dcdb364/gcc%2Fgthr-posix95.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgthr-posix95.h?ref=799cff46ec8fe37c60605f22d8a9d6a39dcdb364", "patch": "@@ -121,9 +121,12 @@ __gthrw(pthread_setschedparam)\n    it is passed so we cannot pretend that the interface is active if -pthreads\n    is not specified.  On Solaris 2.5.1, the interface is not exposed at all so\n    we need to play the usual game with weak symbols.  On Solaris 10 and up, a\n-   working interface is always exposed.  */\n+   working interface is always exposed.  On FreeBSD 6 and later, libc also\n+   exposes a dummy POSIX threads interface, similar to what Solaris 2.6 up\n+   to 9 does.  FreeBSD >= 700014 even provides a pthread_cancel stub in libc,\n+   which means the alternate __gthread_active_p below cannot be used there.  */\n \n-#if defined(__sun) && defined(__svr4__)\n+#if defined(__FreeBSD__) || (defined(__sun) && defined(__svr4__))\n \n static volatile int __gthread_active = -1;\n \n@@ -166,7 +169,7 @@ __gthread_active_p (void)\n   return __gthread_active_latest_value != 0;\n }\n \n-#else /* not Solaris */\n+#else /* neither FreeBSD nor Solaris */\n \n static inline int\n __gthread_active_p (void)\n@@ -176,7 +179,7 @@ __gthread_active_p (void)\n   return __gthread_active_ptr != 0;\n }\n \n-#endif /* Solaris */\n+#endif /* FreeBSD or Solaris */\n \n #else /* not SUPPORTS_WEAK */\n "}]}