{"sha": "7bb4a6be35f5c0da036869a1c416d7aeeada96cf", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2JiNGE2YmUzNWY1YzBkYTAzNjg2OWExYzQxNmQ3YWVlYWRhOTZjZg==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2007-04-16T13:49:14Z"}, "committer": {"name": "H.J. Lu", "email": "hjl@gcc.gnu.org", "date": "2007-04-16T13:49:14Z"}, "message": "re PR target/31582 (ix86_expand_vec_set_builtin modifies source)\n\n2007-04-16  H.J. Lu  <hongjiu.lu@intel.com>\n\n\tPR target/31582\n\t* config/i386/i386.c (ix86_expand_vec_set_builtin): Make a\n\tcopy of source, pass it to ix86_expand_vector_set and return\n\tit as target.\n\nFrom-SVN: r123866", "tree": {"sha": "c61c6d9c04c18c120e021f4959d31d39551ca614", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c61c6d9c04c18c120e021f4959d31d39551ca614"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7bb4a6be35f5c0da036869a1c416d7aeeada96cf", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bb4a6be35f5c0da036869a1c416d7aeeada96cf", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7bb4a6be35f5c0da036869a1c416d7aeeada96cf", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7bb4a6be35f5c0da036869a1c416d7aeeada96cf/comments", "author": null, "committer": null, "parents": [{"sha": "9c3068be677f1d7c596453034fb68656b21091e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9c3068be677f1d7c596453034fb68656b21091e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9c3068be677f1d7c596453034fb68656b21091e7"}], "stats": {"total": 19, "additions": 15, "deletions": 4}, "files": [{"sha": "401d2a56fb98aa3357542cf4b3a4280853a94871", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bb4a6be35f5c0da036869a1c416d7aeeada96cf/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bb4a6be35f5c0da036869a1c416d7aeeada96cf/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7bb4a6be35f5c0da036869a1c416d7aeeada96cf", "patch": "@@ -1,5 +1,12 @@\n+2007-04-16  H.J. Lu  <hongjiu.lu@intel.com>\n+\n+\tPR target/31582\n+\t* config/i386/i386.c (ix86_expand_vec_set_builtin): Make a\n+\tcopy of source, pass it to ix86_expand_vector_set and return\n+\tit as target.\n+\n 2007-04-16  David Ung  <davidu@mips.com>\n-            Joseph Myers  <joseph@codesourcery.com>\n+\t    Joseph Myers  <joseph@codesourcery.com>\n \n \t* config/mips/mips.h (PROCESSOR_74KC, PROCESSOR_74KF,\n \tPROCESSOR_74KX, TUNE_74K, GENERATE_MADD_MSUB): Define."}, {"sha": "ecc2e6bb1c7b031ca782b2a76ed403b7485464c3", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 7, "deletions": 3, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7bb4a6be35f5c0da036869a1c416d7aeeada96cf/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7bb4a6be35f5c0da036869a1c416d7aeeada96cf/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=7bb4a6be35f5c0da036869a1c416d7aeeada96cf", "patch": "@@ -17902,7 +17902,7 @@ ix86_expand_vec_set_builtin (tree exp)\n   enum machine_mode tmode, mode1;\n   tree arg0, arg1, arg2;\n   int elt;\n-  rtx op0, op1;\n+  rtx op0, op1, target;\n \n   arg0 = CALL_EXPR_ARG (exp, 0);\n   arg1 = CALL_EXPR_ARG (exp, 1);\n@@ -17922,9 +17922,13 @@ ix86_expand_vec_set_builtin (tree exp)\n   op0 = force_reg (tmode, op0);\n   op1 = force_reg (mode1, op1);\n \n-  ix86_expand_vector_set (true, op0, op1, elt);\n+  /* OP0 is the source of these builtin functions and shouldn't be\n+     modifified.  Create a copy, use it and return it as target.  */\n+  target = gen_reg_rtx (tmode);\n+  emit_move_insn (target, op0);\n+  ix86_expand_vector_set (true, target, op1, elt);\n \n-  return op0;\n+  return target;\n }\n \n /* Expand an expression EXP that calls a built-in function,"}]}