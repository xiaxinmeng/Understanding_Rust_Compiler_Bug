{"sha": "987395fd6592568a578e9906727b3e7b0164bc66", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTg3Mzk1ZmQ2NTkyNTY4YTU3OGU5OTA2NzI3YjNlN2IwMTY0YmM2Ng==", "commit": {"author": {"name": "Dominique d'Humieres", "email": "dominiq@lps.ens.fr", "date": "2016-11-27T14:41:22Z"}, "committer": {"name": "Iain Sandoe", "email": "iains@gcc.gnu.org", "date": "2016-11-27T14:41:22Z"}, "message": "[Testsuite] pr71767 Changes.\n\n Update Darwin tests to reflect the differences in symbol names and section\n usage.\n\ngcc/testsuite/\n\n2016-11-27  Dominique d'Humieres  <dominiq@lps.ens.fr>\n\t    Iain Sandoe  <iain@codesourcery.com>\n\n\tPR target/71767\n\t* g++.dg/abi/key2.C: Adjust for changed Darwin sections and\n\tlinker-visible symbols.\n\t* g++.dg/torture/darwin-cfstring-3.C: Likewise.\n\t* gcc.dg/const-uniq-1.c: Likewise.\n\t* gcc.dg/torture/darwin-cfstring-3.c: Likewise.\n\t* gcc.target/i386/pr70799-1.c: Likewise.\n\n\nCo-Authored-By: Iain Sandoe <iain@codesourcery.com>\n\nFrom-SVN: r242896", "tree": {"sha": "97b113126f334bf27bce3af6b6ec8ec1b7fe63a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97b113126f334bf27bce3af6b6ec8ec1b7fe63a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/987395fd6592568a578e9906727b3e7b0164bc66", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/987395fd6592568a578e9906727b3e7b0164bc66", "html_url": "https://github.com/Rust-GCC/gccrs/commit/987395fd6592568a578e9906727b3e7b0164bc66", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/987395fd6592568a578e9906727b3e7b0164bc66/comments", "author": {"login": "DominiquedHumieres", "id": 18394944, "node_id": "MDQ6VXNlcjE4Mzk0OTQ0", "avatar_url": "https://avatars.githubusercontent.com/u/18394944?v=4", "gravatar_id": "", "url": "https://api.github.com/users/DominiquedHumieres", "html_url": "https://github.com/DominiquedHumieres", "followers_url": "https://api.github.com/users/DominiquedHumieres/followers", "following_url": "https://api.github.com/users/DominiquedHumieres/following{/other_user}", "gists_url": "https://api.github.com/users/DominiquedHumieres/gists{/gist_id}", "starred_url": "https://api.github.com/users/DominiquedHumieres/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/DominiquedHumieres/subscriptions", "organizations_url": "https://api.github.com/users/DominiquedHumieres/orgs", "repos_url": "https://api.github.com/users/DominiquedHumieres/repos", "events_url": "https://api.github.com/users/DominiquedHumieres/events{/privacy}", "received_events_url": "https://api.github.com/users/DominiquedHumieres/received_events", "type": "User", "site_admin": false}, "committer": {"login": "iains", "id": 4039407, "node_id": "MDQ6VXNlcjQwMzk0MDc=", "avatar_url": "https://avatars.githubusercontent.com/u/4039407?v=4", "gravatar_id": "", "url": "https://api.github.com/users/iains", "html_url": "https://github.com/iains", "followers_url": "https://api.github.com/users/iains/followers", "following_url": "https://api.github.com/users/iains/following{/other_user}", "gists_url": "https://api.github.com/users/iains/gists{/gist_id}", "starred_url": "https://api.github.com/users/iains/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/iains/subscriptions", "organizations_url": "https://api.github.com/users/iains/orgs", "repos_url": "https://api.github.com/users/iains/repos", "events_url": "https://api.github.com/users/iains/events{/privacy}", "received_events_url": "https://api.github.com/users/iains/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "794fa8a6ab0a9fa4541e9528d7c6595299385e5f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/794fa8a6ab0a9fa4541e9528d7c6595299385e5f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/794fa8a6ab0a9fa4541e9528d7c6595299385e5f"}], "stats": {"total": 24, "additions": 18, "deletions": 6}, "files": [{"sha": "bd2d5405ba71d1ea9a1a4887ff23f5bf0d91747e", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=987395fd6592568a578e9906727b3e7b0164bc66", "patch": "@@ -1,3 +1,14 @@\n+2016-11-27  Dominique d'Humieres  <dominiq@lps.ens.fr>\n+\t    Iain Sandoe  <iain@codesourcery.com>\n+\n+\tPR target/71767\n+\t* g++.dg/abi/key2.C: Adjust for changed Darwin sections and\n+\tlinker-visible symbols.\n+\t* g++.dg/torture/darwin-cfstring-3.C: Likewise.\n+\t* gcc.dg/const-uniq-1.c: Likewise.\n+\t* gcc.dg/torture/darwin-cfstring-3.c: Likewise.\n+\t* gcc.target/i386/pr70799-1.c: Likewise.\n+\n 2016-11-25  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR rtl-optimization/78438"}, {"sha": "c79b3b2a20cab7a21b39100912aab19d93be48d6", "filename": "gcc/testsuite/g++.dg/abi/key2.C", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fkey2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fkey2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fabi%2Fkey2.C?ref=987395fd6592568a578e9906727b3e7b0164bc66", "patch": "@@ -2,6 +2,7 @@\n // PR darwin/25908\n \n // { dg-do compile { target *-*-darwin* } }\n+// { dg-options \"-mtarget-linker 85.2\" }\n // { dg-final { scan-assembler \".globl __ZTV1f\\\\n\t.weak_definition __ZTV1f(\\\\n\t.section __DATA,__const_coal,coalesced)?\\\\n\t.align\" } }\n // { dg-final { scan-assembler \".globl __ZTS1f\\\\n\t.weak_definition __ZTS1f\\\\n\t.section __TEXT,__const_coal,coalesced\" } }\n // { dg-final { scan-assembler \".globl __ZTI1f\\\\n\t.weak_definition __ZTI1f(\\\\n\t.section __DATA,__const_coal,coalesced)?\\\\n\t.align\" } }"}, {"sha": "ee4b385b17fad6cf20257df2d6caaed6fc958c7d", "filename": "gcc/testsuite/g++.dg/torture/darwin-cfstring-3.C", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fdarwin-cfstring-3.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fdarwin-cfstring-3.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Ftorture%2Fdarwin-cfstring-3.C?ref=987395fd6592568a578e9906727b3e7b0164bc66", "patch": "@@ -24,7 +24,7 @@ void foo(void) {\n   s0 = s1;\n }\n \n-/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+LC.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+4\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n-/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+LC.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+10\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n+/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+\\[lL\\]C.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+4\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n+/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+\\[lL\\]C.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+10\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n /* { dg-final { scan-assembler \".quad\\t___CFConstantStringClassReference\\n\\t.long\\t1992\\n\\t.space 4\\n\\t.quad\\t.*\\n\\t.quad\\t4\\n\" { target { *-*-darwin* && {  lp64 } } } } } */\n /* { dg-final { scan-assembler \".quad\\t___CFConstantStringClassReference\\n\\t.long\\t1992\\n\\t.space 4\\n\\t.quad\\t.*\\n\\t.quad\\t10\\n\" { target { *-*-darwin* && {  lp64 } } } } } */"}, {"sha": "0e0718bf5057cbb22b73a705995f0b10f78ce013", "filename": "gcc/testsuite/gcc.dg/const-uniq-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fgcc.dg%2Fconst-uniq-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fgcc.dg%2Fconst-uniq-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fconst-uniq-1.c?ref=987395fd6592568a578e9906727b3e7b0164bc66", "patch": "@@ -20,4 +20,4 @@ int lookup2 (int i)\n   return a[i+1];\n }\n \n-/* { dg-final { scan-tree-dump-times \"L\\\\\\$?C\\\\\\.*0\" 2 \"gimple\" } } */\n+/* { dg-final { scan-tree-dump-times \"\\[lL\\]\\\\\\$?C\\\\\\.*0\" 2 \"gimple\" } } */"}, {"sha": "ee4b385b17fad6cf20257df2d6caaed6fc958c7d", "filename": "gcc/testsuite/gcc.dg/torture/darwin-cfstring-3.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fdarwin-cfstring-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fdarwin-cfstring-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fdarwin-cfstring-3.c?ref=987395fd6592568a578e9906727b3e7b0164bc66", "patch": "@@ -24,7 +24,7 @@ void foo(void) {\n   s0 = s1;\n }\n \n-/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+LC.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+4\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n-/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+LC.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+10\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n+/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+\\[lL\\]C.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+4\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n+/* { dg-final { scan-assembler \"\\\\.long\\[ \\\\t\\]+___CFConstantStringClassReference\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+1992\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+\\[lL\\]C.*\\n\\[ \\\\t\\]*\\\\.long\\[ \\\\t\\]+10\\n\" { target { *-*-darwin* && { ! lp64 } } } } } */\n /* { dg-final { scan-assembler \".quad\\t___CFConstantStringClassReference\\n\\t.long\\t1992\\n\\t.space 4\\n\\t.quad\\t.*\\n\\t.quad\\t4\\n\" { target { *-*-darwin* && {  lp64 } } } } } */\n /* { dg-final { scan-assembler \".quad\\t___CFConstantStringClassReference\\n\\t.long\\t1992\\n\\t.space 4\\n\\t.quad\\t.*\\n\\t.quad\\t10\\n\" { target { *-*-darwin* && {  lp64 } } } } } */"}, {"sha": "44c795ccab45a8a5864e563729946688eaefa3c1", "filename": "gcc/testsuite/gcc.target/i386/pr70799-1.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70799-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/987395fd6592568a578e9906727b3e7b0164bc66/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70799-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr70799-1.c?ref=987395fd6592568a578e9906727b3e7b0164bc66", "patch": "@@ -3,7 +3,7 @@\n /* { dg-options \"-O2 -march=slm -mno-stackrealign\" } */\n /* { dg-final { scan-assembler \"pxor\" } } */\n /* { dg-final { scan-assembler \"pcmpeqd\" } } */\n-/* { dg-final { scan-assembler \"movdqa\\[ \\\\t\\]+.?LC0\" } } */\n+/* { dg-final { scan-assembler \"movdqa\\[ \\\\t\\]+.?\\[lL\\]C0\" } } */\n \n long long a, b, c;\n "}]}