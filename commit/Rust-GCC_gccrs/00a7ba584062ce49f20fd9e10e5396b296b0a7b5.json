{"sha": "00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDBhN2JhNTg0MDYyY2U0OWYyMGZkOWUxMGU1Mzk2YjI5NmIwYTdiNQ==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2014-07-03T14:39:05Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2014-07-03T14:39:05Z"}, "message": "gcov-io.c (gcov_read_words): Don't call memmove if excess is 0.\n\n\t* gcov-io.c (gcov_read_words): Don't call memmove if excess is 0.\n\t* data-streamer-in.c (streamer_read_hwi): Shift UHWI 1 instead of\n\tHWI 1 and negate the unsigned value.\n\t* expmed.c (expand_sdiv_pow2): For modes wider than word always\n\tuse AND instead of shift.\n\t* wide-int-print.cc (print_decs): Negate UHWI instead of HWI.\nc-family/\n\t* c-ada-spec.c (dump_ada_nodes): Don't call qsort if \n\tcomments->count <= 1, as comments->entries might be NULL.\n\nFrom-SVN: r212264", "tree": {"sha": "0f9f89a40e0f06ad2065a6c8389c198699c9f249", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0f9f89a40e0f06ad2065a6c8389c198699c9f249"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e21526739585ce47c37e40c1da738ba42c7a7e02", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e21526739585ce47c37e40c1da738ba42c7a7e02", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e21526739585ce47c37e40c1da738ba42c7a7e02"}], "stats": {"total": 36, "additions": 27, "deletions": 9}, "files": [{"sha": "6d2a558dda91bf9086e206c4ba47e5e0f3c05f0b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -1,3 +1,12 @@\n+2014-07-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* gcov-io.c (gcov_read_words): Don't call memmove if excess is 0.\n+\t* data-streamer-in.c (streamer_read_hwi): Shift UHWI 1 instead of\n+\tHWI 1 and negate the unsigned value.\n+\t* expmed.c (expand_sdiv_pow2): For modes wider than word always\n+\tuse AND instead of shift.\n+\t* wide-int-print.cc (print_decs): Negate UHWI instead of HWI.\n+\n 2014-07-03  Marek Polacek  <polacek@redhat.com>\n \n \t* doc/invoke.texi (-fsanitize=bounds): Tweak wording."}, {"sha": "d667ed862515b08a9ce131765dce30571bd3e844", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -1,3 +1,8 @@\n+2014-07-03  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* c-ada-spec.c (dump_ada_nodes): Don't call qsort if \n+\tcomments->count <= 1, as comments->entries might be NULL.\n+\n 2014-07-01  Marek Polacek  <polacek@redhat.com>\n \n \t* c.opt (Wint-conversion): New option."}, {"sha": "5142f07a7ca385029acbb1a0d918ccb67b30dca6", "filename": "gcc/c-family/c-ada-spec.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fc-family%2Fc-ada-spec.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fc-family%2Fc-ada-spec.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-ada-spec.c?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -636,8 +636,9 @@ dump_ada_nodes (pretty_printer *pp, const char *source_file)\n   comments = cpp_get_comments (parse_in);\n \n   /* Sort the comments table by sloc.  */\n-  qsort (comments->entries, comments->count, sizeof (cpp_comment),\n-\t compare_comment);\n+  if (comments->count > 1)\n+    qsort (comments->entries, comments->count, sizeof (cpp_comment),\n+\t   compare_comment);\n \n   /* Interleave comments and declarations in line number order.  */\n   i = j = 0;"}, {"sha": "7bec1b1519a8dffbc8d8086404fe17d7d52d4f0f", "filename": "gcc/data-streamer-in.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fdata-streamer-in.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fdata-streamer-in.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdata-streamer-in.c?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -174,7 +174,7 @@ streamer_read_hwi (struct lto_input_block *ib)\n       if ((byte & 0x80) == 0)\n \t{\n \t  if ((shift < HOST_BITS_PER_WIDE_INT) && (byte & 0x40))\n-\t    result |= - ((HOST_WIDE_INT)1 << shift);\n+\t    result |= - (HOST_WIDE_INT_1U << shift);\n \n \t  return result;\n \t}"}, {"sha": "36c43463de1a4348e36c1e4bf1676f3355c33f55", "filename": "gcc/expmed.c", "status": "modified", "additions": 3, "deletions": 2, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fexpmed.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fexpmed.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fexpmed.c?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -3795,8 +3795,9 @@ expand_sdiv_pow2 (enum machine_mode mode, rtx op0, HOST_WIDE_INT d)\n \n       temp = gen_reg_rtx (mode);\n       temp = emit_store_flag (temp, LT, op0, const0_rtx, mode, 0, -1);\n-      if (shift_cost (optimize_insn_for_speed_p (), mode, ushift)\n-\t  > COSTS_N_INSNS (1))\n+      if (GET_MODE_BITSIZE (mode) >= BITS_PER_WORD\n+\t  || shift_cost (optimize_insn_for_speed_p (), mode, ushift)\n+\t     > COSTS_N_INSNS (1))\n \ttemp = expand_binop (mode, and_optab, temp, gen_int_mode (d - 1, mode),\n \t\t\t     NULL_RTX, 0, OPTAB_LIB_WIDEN);\n       else"}, {"sha": "547276fbcf0b732ed02163d8d57c677b846e5021", "filename": "gcc/gcov-io.c", "status": "modified", "additions": 4, "deletions": 3, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fgcov-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fgcov-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcov-io.c?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -489,14 +489,15 @@ gcov_read_words (unsigned words)\n   if (excess < words)\n     {\n       gcov_var.start += gcov_var.offset;\n-#if IN_LIBGCOV\n       if (excess)\n \t{\n+#if IN_LIBGCOV\n \t  memcpy (gcov_var.buffer, gcov_var.buffer + gcov_var.offset, 4);\n-\t}\n #else\n-      memmove (gcov_var.buffer, gcov_var.buffer + gcov_var.offset, excess * 4);\n+\t  memmove (gcov_var.buffer, gcov_var.buffer + gcov_var.offset,\n+\t\t   excess * 4);\n #endif\n+\t}\n       gcov_var.offset = 0;\n       gcov_var.length = excess;\n #if IN_LIBGCOV"}, {"sha": "9b2893a99b1d041392f8a77d147eb38db58e9fd4", "filename": "gcc/wide-int-print.cc", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fwide-int-print.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/00a7ba584062ce49f20fd9e10e5396b296b0a7b5/gcc%2Fwide-int-print.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fwide-int-print.cc?ref=00a7ba584062ce49f20fd9e10e5396b296b0a7b5", "patch": "@@ -62,7 +62,8 @@ print_decs (const wide_int_ref &wi, char *buf)\n       || (wi.get_len () == 1))\n     {\n       if (wi::neg_p (wi))\n-      \tsprintf (buf, \"-\" HOST_WIDE_INT_PRINT_UNSIGNED, -wi.to_shwi ());\n+      \tsprintf (buf, \"-\" HOST_WIDE_INT_PRINT_UNSIGNED,\n+\t\t -(unsigned HOST_WIDE_INT) wi.to_shwi ());\n       else\n \tsprintf (buf, HOST_WIDE_INT_PRINT_DEC, wi.to_shwi ());\n     }"}]}