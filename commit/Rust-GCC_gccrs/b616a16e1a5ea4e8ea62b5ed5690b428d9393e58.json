{"sha": "b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjYxNmExNmUxYTVlYTRlOGVhNjJiNWVkNTY5MGI0MjhkOTM5M2U1OA==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2007-09-07T10:17:46Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2007-09-07T10:17:46Z"}, "message": "re PR tree-optimization/32821 (tree-if-conv:combine_blocks with -ftree-dump-tree-all-details fails on ICE in compilation: segfault)\n\n\tPR tree-optimization/32821\n\t* tree_if_conv.c (combine_blocks): Use alloc_stmt_list instead of\n\tNULL in the call to set_bb_stmt_list.\n\ntestsuite/ChangeLog:\n\n\tPR tree-optimization/32821\n\t* gcc.dg/tree-ssa/pr32821.c: New file.\n\nFrom-SVN: r128235", "tree": {"sha": "86bc2a69e632746478df68506829ec6c7eb1f74b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/86bc2a69e632746478df68506829ec6c7eb1f74b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/comments", "author": null, "committer": null, "parents": [{"sha": "c664bb1b461cfee89b2e9b65c5fe827f3da40173", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c664bb1b461cfee89b2e9b65c5fe827f3da40173", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c664bb1b461cfee89b2e9b65c5fe827f3da40173"}], "stats": {"total": 29, "additions": 28, "deletions": 1}, "files": [{"sha": "7ae6007f92c737cb048ffd20aa10b8f1f2face67", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "patch": "@@ -1,3 +1,10 @@\n+2007-09-07  Richard Guenther  <rguenther@suse.de>\n+\t    Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR tree-optimization/32821\n+\t* tree_if_conv.c (combine_blocks): Use alloc_stmt_list instead of\n+\tNULL in the call to set_bb_stmt_list.\n+\n 2007-09-07  Richard Sandiford  <richard@codesourcery.com>\n \n \t* config/mips/mips.c (build_mips16_call_stub): Emit all direct"}, {"sha": "c9dc15fc76dfcf5c69da143ac268fa936ddca480", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "patch": "@@ -1,3 +1,8 @@\n+2007-09-07 Uros Bizjak <ubizjak@gmail.com>\n+\n+\tPR tree-optimization/32821\n+\t* gcc.dg/tree-ssa/pr32821.c: New file.\n+\n 2007-09-07  Richard Sandiford  <richard@codesourcery.com>\n \n \t* gcc.dg/attr-alias-3.c: Use real asm for MIPS."}, {"sha": "2195739404d08e99d139a1e46a66b55371fb63b9", "filename": "gcc/testsuite/gcc.dg/tree-ssa/pr32821.c", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr32821.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr32821.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fpr32821.c?ref=b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "patch": "@@ -0,0 +1,15 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -ftree-vectorize -fdump-tree-ifcvt-details\" } */\n+\n+void\n+main1 (int *arr, int n, int a, int b)\n+{\n+  int i;\n+  for (i = 0; i < n; i++)\n+    {\n+      int m = arr[i];\n+      arr[i] = (m < a ? m - a : b);\n+    }\n+}\n+\n+/* { dg-final { cleanup-tree-dump \"ifcvt\" } } */"}, {"sha": "f97c23db93bbecb9abaafa823d89b8d135a6f674", "filename": "gcc/tree-if-conv.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2Ftree-if-conv.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b616a16e1a5ea4e8ea62b5ed5690b428d9393e58/gcc%2Ftree-if-conv.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-if-conv.c?ref=b616a16e1a5ea4e8ea62b5ed5690b428d9393e58", "patch": "@@ -985,7 +985,7 @@ combine_blocks (struct loop *loop)\n       /* Update stmt list.  */\n       last = tsi_last (bb_stmt_list (merge_target_bb));\n       tsi_link_after (&last, bb_stmt_list (bb), TSI_NEW_STMT);\n-      set_bb_stmt_list (bb, NULL);\n+      set_bb_stmt_list (bb, alloc_stmt_list());\n \n       delete_basic_block (bb);\n     }"}]}