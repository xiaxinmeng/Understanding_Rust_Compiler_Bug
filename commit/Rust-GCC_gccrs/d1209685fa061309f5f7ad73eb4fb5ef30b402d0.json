{"sha": "d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDEyMDk2ODVmYTA2MTMwOWY1ZjdhZDczZWI0ZmI1ZWYzMGI0MDJkMA==", "commit": {"author": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-11-22T08:32:26Z"}, "committer": {"name": "Zack Weinberg", "email": "zack@gcc.gnu.org", "date": "2000-11-22T08:32:26Z"}, "message": "Makefile.in, [...]: Expunge remaining traces of facility for running MD files through C preprocessor.\n\ngcc:\n        * Makefile.in, config.gcc, configure.in: Expunge remaining\n        traces of facility for running MD files through C preprocessor.\n\nlibiberty:\n        * aclocal.m4 (LIB_AC_PROG_CC): Moved here from configure.in.\n        (AC_DEFINE_NOAUTOHEADER): New - work around bug in autoheader.\n        * configure.in: Call AC_C_INLINE and AC_C_CONST.  Use three\n        argument form of AC_DEFINE in dummy definitions block.  Use\n        AC_DEFINE_NOAUTOHEADER for real definitions of things defined\n        in dummy block.  Preload cache variables instead of bypassing\n        tests, where possible.\n        * acconfig.h: Removed.\n\n        * xmalloc.c (xmalloc_failed): New function, does error\n        reporting on failed allocation.\n        (xmalloc, xcalloc, xrealloc): Use it.\n        * libiberty.h: Move #includes to top.  Prototype xmalloc_failed.\n\nFrom-SVN: r37650", "tree": {"sha": "2a1d2ae9f91d97732b595daf55f5397c013d1d7b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2a1d2ae9f91d97732b595daf55f5397c013d1d7b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/comments", "author": null, "committer": null, "parents": [{"sha": "c01a508e4e8a795f63348accdd04483c9d67197e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c01a508e4e8a795f63348accdd04483c9d67197e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c01a508e4e8a795f63348accdd04483c9d67197e"}], "stats": {"total": 828, "additions": 438, "deletions": 390}, "files": [{"sha": "4100db538748fbdbd0a793b0bc274748145bbd70", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -1,3 +1,8 @@\n+2000-11-22  Zack Weinberg  <zack@wolery.stanford.edu>\n+\n+\t* Makefile.in, config.gcc, configure.in: Expunge remaining\n+\ttraces of facility for running MD files through C preprocessor.\n+\n 2000-11-22  Joseph S. Myers  <jsm28@cam.ac.uk>\n \n \t* gcov.texi: Add magic comments for texi2pod.pl."}, {"sha": "fd32ef4f469aca07c8279c64650beb79e40f7f33", "filename": "gcc/Makefile.in", "status": "modified", "additions": 1, "deletions": 14, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FMakefile.in?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -495,10 +495,6 @@ GCC_PARTS=$(GCC_PASSES) $(LIBGCC) $(EXTRA_PROGRAMS) $(USE_COLLECT2) $(EXTRA_PART\n # Directory to link to, when using the target `maketest'.\n DIR = ../gcc\n \n-# Guaranteed to not exist when not passing md through cpp.\n-# This value is overridden directly by configure.\n-MD_FILE = md-cpp-not-used\n-\n # Flags to use when cross-building GCC.\n # Prefix to apply to names of object files when using them\n # to run on the machine we are compiling on.\n@@ -1647,12 +1643,6 @@ s-genrtl: gengenrtl $(srcdir)/move-if-change $(RTL_BASE_H)\n # about the target machine.  They do depend on config.h itself,\n # since that describes the host machine.\n \n-# Pass the md file through cpp if the target requests it.\n-$(MD_FILE): $(MD_DEPS)\n-\trm -f $@\n-\t$(MD_CPP) $(MD_CPPFLAGS) $(md_file) | sed 's/^# /; /g' > tmp-$@\n-\tmv tmp-$@ $@\n-\n gensupport.o: gensupport.c $(RTL_H) $(OBSTACK_H) system.h errors.h gensupport.h\n \t$(HOST_CC) -c $(HOST_CFLAGS) $(HOST_CPPFLAGS) $(INCLUDES) $(srcdir)/gensupport.c\n \n@@ -2237,9 +2227,6 @@ clean: mostlyclean $(INTL_CLEAN) lang.clean\n \t-rm -rf libgcc\n \t-rm -f *.dvi\n \t-rm -f */*.dvi\n-\t-if [ -f md.pre-cpp ]; then \\\n-\t  rm -f md ; \\\n-\tfi\n # Delete the include directory.\n \t-rm -rf include\n # Delete files used by the \"multilib\" facility (including libgcc subdirs).\n@@ -2259,7 +2246,7 @@ clean: mostlyclean $(INTL_CLEAN) lang.clean\n INTL_DISTCLEAN = intl.distclean\n distclean: clean $(INTL_DISTCLEAN) lang.distclean\n \t-rm -f tm.h tm_p.h config.h auto-host.h auto-build.h tconfig.h hconfig.h\n-\t-rm -f md cstamp-h\n+\t-rm -f cstamp-h\n \t-rm -f config.status config.run config.cache config.bak\n \t-rm -f Make-lang Make-hooks Make-host Make-target\n \t-rm -f Makefile specs.h options.h gencheck.h *.oaux"}, {"sha": "8d5306a3747110afaeba33b3b0510b0ba64f0f49", "filename": "gcc/config.gcc", "status": "modified", "additions": 0, "deletions": 6, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -119,9 +119,6 @@\n #  build_install_headers_dir\n #\t\t\tTarget to use when installing header files.\n #\n-#  md_cppflags\t\tNon-empty list of args to pass to cpp if the target\n-#  \t\t\twants its .md file passed through cpp.\n-#\n #  host_truncate_target\n #\t\t\tNon-empty if the target name should be truncated\n #\t\t\ton this host, due to filename length issues.\n@@ -182,9 +179,6 @@ use_collect2=\n target_cpu_default=\n # Set this to control how the header file directory is installed.\n install_headers_dir=install-headers-tar\n-# Set this to a non-empty list of args to pass to cpp if the target\n-# wants its .md file passed through cpp.\n-md_cppflags=\n # Set this if directory names should be truncated to 14 characters.\n truncate_target=\n # Set this if gdb needs a dir command with `dirname $out_file`"}, {"sha": "4f58f5f94265f9a5f2f013ca56931c017df9af1e", "filename": "gcc/configure", "status": "modified", "additions": 17, "deletions": 31, "changes": 48, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -1575,7 +1575,7 @@ for ac_kw in inline __inline__ __inline; do\n #include \"confdefs.h\"\n \n int main() {\n-} $ac_kw foo() {\n+} int $ac_kw foo() {\n ; return 0; }\n EOF\n if { (eval echo configure:1582: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n@@ -1605,7 +1605,7 @@ esac\n \n \n # Find some useful tools\n-for ac_prog in gawk mawk nawk awk\n+for ac_prog in mawk gawk nawk awk\n do\n # Extract the first word of \"$ac_prog\", so it can be a program name with args.\n set dummy $ac_prog; ac_word=$2\n@@ -4013,7 +4013,7 @@ else\n int main() {\n \n /* Ultrix mips cc rejects this.  */\n-typedef int charset[2]; const charset x;\n+typedef int charset[2]; const charset x = {0,0};\n /* SunOS 4.1.1 cc rejects this.  */\n char const *const *ccp;\n char **p;\n@@ -4154,7 +4154,7 @@ else\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n-char *p = alloca(2 * sizeof(int));\n+void *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n if { (eval echo configure:4161: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n@@ -5708,20 +5708,6 @@ else\n \tmaybe_use_collect2=\"-DUSE_COLLECT2\"\n fi\n \n-# NEED TO CONVERT\n-# Set MD_DEPS if the real md file is in md.pre-cpp.\n-# Set MD_CPP to the cpp to pass the md file through.  Md files use ';'\n-# for line oriented comments, so we must always use a GNU cpp.  If\n-# building gcc with a cross compiler, use the cross compiler just\n-# built.  Otherwise, we can use the cpp just built.\n-md_file_sub=\n-if test \"x$md_cppflags\" = x\n-then\n-\tmd_file_sub=$srcdir/config/$md_file\n-else\n-\tmd_file=md\n-fi\n-\n # If we have gas in the build tree, make a link to it.\n if test -f ../gas/Makefile; then\n \trm -f as; $symbolic_link ../gas/as-new$host_exeext as$host_exeext 2>/dev/null\n@@ -5743,7 +5729,7 @@ fi\n \n # Figure out what assembler we will be using.\n echo $ac_n \"checking what assembler to use\"\"... $ac_c\" 1>&6\n-echo \"configure:5747: checking what assembler to use\" >&5\n+echo \"configure:5733: checking what assembler to use\" >&5\n gcc_cv_as=\n gcc_cv_gas_major_version=\n gcc_cv_gas_minor_version=\n@@ -5828,7 +5814,7 @@ fi\n \n # Figure out what nm we will be using.\n echo $ac_n \"checking what nm to use\"\"... $ac_c\" 1>&6\n-echo \"configure:5832: checking what nm to use\" >&5\n+echo \"configure:5818: checking what nm to use\" >&5\n if test -x nm$host_exeext; then\n \tgcc_cv_nm=./nm$host_exeext\n elif test x$host = x$target; then\n@@ -5839,7 +5825,7 @@ echo \"$ac_t\"\"$gcc_cv_nm\" 1>&6\n \n # Figure out what assembler alignment features are present.\n echo $ac_n \"checking assembler alignment features\"\"... $ac_c\" 1>&6\n-echo \"configure:5843: checking assembler alignment features\" >&5\n+echo \"configure:5829: checking assembler alignment features\" >&5\n gcc_cv_as_alignment_features=none\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n \t# Gas version 2.6 and later support for .balign and .p2align.\n@@ -5887,7 +5873,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_alignment_features\" 1>&6\n \n echo $ac_n \"checking assembler subsection support\"\"... $ac_c\" 1>&6\n-echo \"configure:5891: checking assembler subsection support\" >&5\n+echo \"configure:5877: checking assembler subsection support\" >&5\n gcc_cv_as_subsections=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -5927,7 +5913,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_subsections\" 1>&6\n \n echo $ac_n \"checking assembler weak support\"\"... $ac_c\" 1>&6\n-echo \"configure:5931: checking assembler weak support\" >&5\n+echo \"configure:5917: checking assembler weak support\" >&5\n gcc_cv_as_weak=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 2 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -5950,7 +5936,7 @@ fi\n echo \"$ac_t\"\"$gcc_cv_as_weak\" 1>&6\n \n echo $ac_n \"checking assembler hidden support\"\"... $ac_c\" 1>&6\n-echo \"configure:5954: checking assembler hidden support\" >&5\n+echo \"configure:5940: checking assembler hidden support\" >&5\n gcc_cv_as_hidden=no\n if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n   if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 10 -o \"$gcc_cv_gas_major_version\" -gt 2 && grep 'obj_format = elf' ../gas/Makefile > /dev/null; then\n@@ -5976,7 +5962,7 @@ echo \"$ac_t\"\"$gcc_cv_as_hidden\" 1>&6\n case \"$target\" in \n   sparc*-*-*)\n     echo $ac_n \"checking assembler .register pseudo-op support\"\"... $ac_c\" 1>&6\n-echo \"configure:5980: checking assembler .register pseudo-op support\" >&5\n+echo \"configure:5966: checking assembler .register pseudo-op support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_register_pseudo_op'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6004,7 +5990,7 @@ EOF\n     fi\n \n     echo $ac_n \"checking assembler supports -relax\"\"... $ac_c\" 1>&6\n-echo \"configure:6008: checking assembler supports -relax\" >&5\n+echo \"configure:5994: checking assembler supports -relax\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_relax_opt'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6034,7 +6020,7 @@ EOF\n     case \"$tm_file\" in\n     *64*)\n \techo $ac_n \"checking for 64 bit support in assembler ($gcc_cv_as)\"\"... $ac_c\" 1>&6\n-echo \"configure:6038: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n+echo \"configure:6024: checking for 64 bit support in assembler ($gcc_cv_as)\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_flags64'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6079,7 +6065,7 @@ EOF\n \n     if test \"x$gcc_cv_as_flags64\" != xno; then\n \techo $ac_n \"checking for assembler offsetable %lo() support\"\"... $ac_c\" 1>&6\n-echo \"configure:6083: checking for assembler offsetable %lo() support\" >&5\n+echo \"configure:6069: checking for assembler offsetable %lo() support\" >&5\n if eval \"test \\\"`echo '$''{'gcc_cv_as_offsetable_lo10'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -6118,7 +6104,7 @@ EOF\n \n   i[34567]86-*-*)\n     echo $ac_n \"checking assembler instructions\"\"... $ac_c\" 1>&6\n-echo \"configure:6122: checking assembler instructions\" >&5\n+echo \"configure:6108: checking assembler instructions\" >&5\n     gcc_cv_as_instructions=\n     if test x$gcc_cv_gas_major_version != x -a x$gcc_cv_gas_minor_version != x; then\n       if test \"$gcc_cv_gas_major_version\" -eq 2 -a \"$gcc_cv_gas_minor_version\" -ge 9 -o \"$gcc_cv_gas_major_version\" -gt 2; then\n@@ -6147,7 +6133,7 @@ EOF\n esac\n \n echo $ac_n \"checking assembler dwarf2 debug_line support\"\"... $ac_c\" 1>&6\n-echo \"configure:6151: checking assembler dwarf2 debug_line support\" >&5\n+echo \"configure:6137: checking assembler dwarf2 debug_line support\" >&5\n gcc_cv_as_dwarf2_debug_line=no\n # ??? Not all targets support dwarf2 debug_line, even within a version\n # of gas.  Moreover, we need to emit a valid instruction to trigger any\n@@ -6324,7 +6310,7 @@ EOF\n \n \n echo $ac_n \"checking whether to enable maintainer-specific portions of Makefiles\"\"... $ac_c\" 1>&6\n-echo \"configure:6328: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n+echo \"configure:6314: checking whether to enable maintainer-specific portions of Makefiles\" >&5\n     # Check whether --enable-maintainer-mode or --disable-maintainer-mode was given.\n if test \"${enable_maintainer_mode+set}\" = set; then\n   enableval=\"$enable_maintainer_mode\""}, {"sha": "b37f35ef7944a1de1edbe8f7422eda2b11886cc0", "filename": "gcc/configure.in", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/gcc%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.in?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -1077,20 +1077,6 @@ else\n \tmaybe_use_collect2=\"-DUSE_COLLECT2\"\n fi\n \n-# NEED TO CONVERT\n-# Set MD_DEPS if the real md file is in md.pre-cpp.\n-# Set MD_CPP to the cpp to pass the md file through.  Md files use ';'\n-# for line oriented comments, so we must always use a GNU cpp.  If\n-# building gcc with a cross compiler, use the cross compiler just\n-# built.  Otherwise, we can use the cpp just built.\n-md_file_sub=\n-if test \"x$md_cppflags\" = x\n-then\n-\tmd_file_sub=$srcdir/config/$md_file\n-else\n-\tmd_file=md\n-fi\n-\n # If we have gas in the build tree, make a link to it.\n if test -f ../gas/Makefile; then\n \trm -f as; $symbolic_link ../gas/as-new$host_exeext as$host_exeext 2>/dev/null"}, {"sha": "07bea1f8397e2f93fecc96939e9c48adf2cffe72", "filename": "include/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/include%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/include%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2FChangeLog?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -1,3 +1,7 @@\n+2000-11-22  Zack Weinberg  <zack@wolery.stanford.edu>\n+\n+\t* libiberty.h: Move #includes to top.  Prototype xmalloc_failed.\n+\n 2000-11-15  Kenneth Block  <kenneth.block@compaq.com>\n \n \t* demangle.h: Add gnat and java demangle styles."}, {"sha": "64d072be392db0b5259705c7b511648671b8dde7", "filename": "include/libiberty.h", "status": "modified", "additions": 10, "deletions": 6, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/include%2Flibiberty.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/include%2Flibiberty.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/include%2Flibiberty.h?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -16,6 +16,13 @@ extern \"C\" {\n \n #include \"ansidecl.h\"\n \n+#ifdef ANSI_PROTOTYPES\n+/* Get a definition for size_t.  */\n+#include <stddef.h>\n+/* Get a definition for va_list.  */\n+#include <stdarg.h>\n+#endif\n+\n /* Build an argument vector from a string.  Allocates memory using\n    malloc.  Use freeargv to free the vector.  */\n \n@@ -130,16 +137,13 @@ extern void xexit PARAMS ((int status)) ATTRIBUTE_NORETURN;\n \n extern void xmalloc_set_program_name PARAMS ((const char *));\n \n+/* Report an allocation failure.  */\n+extern void xmalloc_failed PARAMS ((size_t)) ATTRIBUTE_NORETURN;\n+\n /* Allocate memory without fail.  If malloc fails, this will print a\n    message to stderr (using the name set by xmalloc_set_program_name,\n    if any) and then call xexit.  */\n \n-#ifdef ANSI_PROTOTYPES\n-/* Get a definition for size_t.  */\n-#include <stddef.h>\n-/* Get a definition for va_list.  */\n-#include <stdarg.h>\n-#endif\n extern PTR xmalloc PARAMS ((size_t)) ATTRIBUTE_MALLOC;\n \n /* Reallocate memory without fail.  This works like xmalloc.  Note,"}, {"sha": "1769a28ef48bf11cbfa06dfb217512ff65d9fbfc", "filename": "libiberty/ChangeLog", "status": "modified", "additions": 46, "deletions": 31, "changes": 77, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2FChangeLog?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -1,3 +1,18 @@\n+2000-11-22  Zack Weinberg  <zack@wolery.stanford.edu>\n+\n+\t* aclocal.m4 (LIB_AC_PROG_CC): Moved here from configure.in.\n+\t(AC_DEFINE_NOAUTOHEADER): New - work around bug in autoheader.\n+\t* configure.in: Call AC_C_INLINE and AC_C_CONST.  Use three\n+\targument form of AC_DEFINE in dummy definitions block.  Use\n+\tAC_DEFINE_NOAUTOHEADER for real definitions of things defined\n+\tin dummy block.  Preload cache variables instead of bypassing\n+\ttests, where possible.\n+\t* acconfig.h: Removed.\n+\n+\t* xmalloc.c (xmalloc_failed): New function, does error\n+\treporting on failed allocation.\n+\t(xmalloc, xcalloc, xrealloc): Use it.\n+\n 2000-11-21  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \t* cplus-dem.c (cplus_demangle): Fix formatting.\n@@ -52,13 +67,13 @@\n \t(result_caret_pos): New macro.\n \t(result_append_string): Rename to...\n \t(result_add_string): ... this, and insert at caret position.\n-\tRename throughout. \n+\tRename throughout.\n \t(result_append): Rename to...\n \t(result_add): ... this, and insert at caret position.  Rename\n-\tthroughout. \n+\tthroughout.\n \t(result_append_char): Rename to...\n \t(result_add_char): ... this, and insert at caret position.  Rename\n-\tthroughout. \n+\tthroughout.\n \t(result_append_space): Remove.\n \t(string_list_new): Initialize caret position.\n \t(result_add_separated_char): Use caret position.\n@@ -70,13 +85,13 @@\n \t(substitution_add): Likewise.\n \t(demangling_new): Initialize caret position.\n \t(demangle_encoding): Use caret position.\n-\t(demanglin_nested_name): Put CV qualifiers after name. \n+\t(demanglin_nested_name): Put CV qualifiers after name.\n \t(demangle_type_ptr): Use switch statement.  Handle pointers to\n \tarrays.  Don't use result_append_space.  Use caret position.\n \t(demangle_type): Emit CV qualifiers after underlying type.  Adjust\n-\tcall to demangle_array_type. \n-\t(demangle_array_type): Add parameter to handle pointers to arrays. \n-\t\n+\tcall to demangle_array_type.\n+\t(demangle_array_type): Add parameter to handle pointers to arrays.\n+\n 2000-10-01  Mark Mitchell  <mark@codesourcery.com>\n \n \t* splay-tree.c (splay_tree_insert): Fix formatting.\n@@ -133,7 +148,7 @@\n \t(demangle_special_name): Fix comment.\n \t(demangle_type): Rename variable.\n \t(demangle_bare_function_type): Check for missing return type and\n-\tparameter. \n+\tparameter.\n \t(demangle_class_enum_type): Rename parameter.\n \t(demangle_discriminator): Fix misspelling in comment.\n \n@@ -145,8 +160,8 @@\n 2000-09-04  Alex Samuel  <samuel@codesourcery.com>\n \n \t* cp-demangle.c (demangle_template_arg): Eat an `E' after an\n-\t<expression>. \n-\t\n+\t<expression>.\n+\n 2000-09-04  Alex Samuel  <samuel@codesourcery.com>\n \n \t* cp-demangle.c (demangle_type_ptr): Increment position past\n@@ -159,7 +174,7 @@\n \t(demangle_call_offset): Likewise.\n \t(demangle_special_name): Update thunk demangling to comply with\n \tABI changes.\n-\t\n+\n 2000-09-03  Alex Samuel  <samuel@codesourcery.com>\n \n \t* cp-demangle.c (ANONYMOUS_NAMESPACE_PREFIX): New macro.\n@@ -169,25 +184,25 @@\n \t(result_insert): Likewise.\n \t(result_insert_char): Likewise.\n \t(substitution_add): Remove last parameter.  Don't store template\n-\tparm number. \n+\tparm number.\n \t(BFT_NO_RETURN_TYPE): Define as NULL.\n \t(demangle_encoding): Adjust call to demangle_bare_function_type.\n \t(demangle_name): Adjust substitution.  Adjust call to\n-\tsubstitution_add. \n+\tsubstitution_add.\n \t(demangle_prefix): Adjust call to substitution_add.\n \t(demangle_identifier): Handle anonymous namespaces.\n \t(demangle_operator_name): Change demangling of vendor-extended\n \toperator to match ABI changes.\n \t(demangle_type_ptr): Change parameters.  Make recursive.  Handle\n-\tsubstitutions here.  \n+\tsubstitutions here.\n \t(demangle_type): Adjust calls to demangle_template_param,\n \tsubstitution_add, and demangle_type_ptr.  Fix substitution of\n \ttemplated types.\n \t(demangle_function_type): Change parameter to a pointer.\n \t(demangle_bare_function_type): Likewise.  Adjust insertion point.\n \t(demangle_template_param): Remove last parameter.\n \t(demangle_expr_primary): Remove unused variable.  Adjust call to\n-\tdemangle_template_param. \n+\tdemangle_template_param.\n \t(is_mangled_char): Accept `$' and `.'.\n \t* cplus-dem.c (gnu_new_abi_symbol_characters): Add '$' and '.'.\n \t* dyn-string.c (dyn_string_insert_char): New function.\n@@ -232,7 +247,7 @@\n \t(demangle_type): Don't treat r as built-in type.  Remove argument\n \tto demangle_substitution.  Fix substitution candidate mechanics.\n \tHandle <template-template-parm>s.  Improve comments.\n-\t(demangle_template_param): Don't handle template arg lists here. \n+\t(demangle_template_param): Don't handle template arg lists here.\n \t(demangle_substitution): Remove parameter.\n \t(print_usage): Remove extra fprintf option.\n \n@@ -257,12 +272,12 @@\n \t(demangle_type_ptr): Remove duplicate RETURN_IF_ERROR.\n \t(demangle_type): Check for template args after substitution.\n \t(demangle_template_args): Use result_open_template_list.\n-\t\n+\n 2000-08-02  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* pexecute.c:  Don't use vfork.  Initialize 'pid' before retry loop.\n \n-2000-07-26  Dave Pitts  <dpitts@cozx.com>\t\n+2000-07-26  Dave Pitts  <dpitts@cozx.com>\n \n \t* config/mh-openedition.h: Added -DLE370 definition.\n \n@@ -300,7 +315,7 @@\n \n 2000-07-24  Daniel Berlin <dberlin@redhat.com>\n \n-\t* cplus-dem.c (demangle_signature): Change if (GNU_DEMANGLING) to \n+\t* cplus-dem.c (demangle_signature): Change if (GNU_DEMANGLING) to\n \tif (AUTO_DEMANGLING || GNU_DEMANGLING)\n \n 2000-07-21  Alex Samuel  <samuel@codesourcery.com>\n@@ -379,7 +394,7 @@\n \t<class-enum-type>\n \t(demangle_subtitution): Set template_p for special substitutions.\n \t(main): Fix typos.\n-\t\n+\n 2000-06-27  Alex Samuel  <samuel@codesourcery.com>\n \n \t* cp-demangle.c (demangle_special_name): Swap base and derived\n@@ -437,7 +452,7 @@\n \t(dyn_string_append_cstr): Likewise.\n \t(dyn_string_append_char): Likewise.\n \t(dyn_string_substring): Likewise.\n-\t\n+\n 2000-06-09  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* cp-demangle.c (demangle_operator_name): Add spaces before\n@@ -460,7 +475,7 @@ Thu Jun  8 09:25:54 2000  Philippe De Muyter  <phdm@macqel.be>\n 2000-06-07  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* configure.in (ac_libiberty_warn_cflags): Add -pedantic.\n-\t\n+\n \t* choose-temp.c (try, choose_temp_base, make_temp_file): Constify.\n \n \t* cp-demangle.c (demangle_char): Change parameter from char to int.\n@@ -479,7 +494,7 @@ Thu Jun  8 09:25:54 2000  Philippe De Muyter  <phdm@macqel.be>\n \tconst-ness.\n \n \t* setenv.c (setenv): Use braces to avoid ambiguous `else'.\n-\t\n+\n 2000-06-07  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n \t* Makefile.in (cp-demangle.o): Depend on $(INCDIR)/demangle.h.\n@@ -517,7 +532,7 @@ Thu Jun  8 09:25:54 2000  Philippe De Muyter  <phdm@macqel.be>\n \t(main): Use gnu_new_abi_symbol_characters.  * cp-demangle.c: New\n \tfile.\n \t* cp-demangle.c: New file.\n-\t\n+\n Tue May 30 16:45:25 2000  Andrew Cagney  <cagney@b1.cygnus.com>\n \n \t* floatformat.c: Add name to each floatformat field.\n@@ -549,7 +564,7 @@ Tue May 30 15:07:52 2000  Jeffrey A Law  (law@cygnus.com)\n \n 2000-05-16  Horst von Brand <vonbrand@sleipnir.valparaiso.cl>\n \n-        * hashtab.c (hash_pointer): Delete low-order bits which are\n+\t* hashtab.c (hash_pointer): Delete low-order bits which are\n \tprobably zero, also eliminate a warning on alpha.\n \n 2000-05-15  David Edelsohn  <edelsohn@gnu.org>\n@@ -584,9 +599,9 @@ Thu May  4 17:14:41 2000  Philippe De Muyter  <phdm@macqel.be>\n 2000-04-28  Kenneth Block  <block@zk3.dec.com>\n \t    Jason Merrill  <jason@casey.cygnus.com>\n \n-        * cplus-dem.c (libiberty_demanglers): New table for demangle styles.\n-        (cplus_demangle_set_style): New function for setting style.\n-        (cplus_demangle_name_to_style): New function to translate name.\n+\t* cplus-dem.c (libiberty_demanglers): New table for demangle styles.\n+\t(cplus_demangle_set_style): New function for setting style.\n+\t(cplus_demangle_name_to_style): New function to translate name.\n \n 2000-04-27  Kaveh R. Ghazi  <ghazi@caip.rutgers.edu>\n \n@@ -638,7 +653,7 @@ Tue Apr 18 16:23:31 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n 2000-04-16  Dave Pitts  <dpitts@cozx.com>\n \n \t* cplus-dem.c (cplus_demangle_opname): Changed to use islower.\n- \n+\n 2000-04-05  Richard Henderson  <rth@cygnus.com>\n \n \t* splay-tree.c (splay_tree_remove): New.\n@@ -649,7 +664,7 @@ Tue Apr 18 16:23:31 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \tcodes.\n \t(htab_find_with_hash): Likewise.\n \t(htab_find_slot_with_hash): Likewise.\n-\t\n+\n 2000-03-29  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* hashtab.c (htab_find_with_hash): Avoid calculating hash2\n@@ -678,7 +693,7 @@ Thu Mar 16 01:33:58 2000  Jeffrey A Law  (law@cygnus.com)\n \t(REQUIRED_OFILES): Add partition.o.\n \t(partition.o): New rule.\n \t* partition.c: New file.\n-\t\n+\n 2000-03-09  Zack Weinberg  <zack@wolery.cumb.org>\n \n \t* hashtab.c (htab_create): Set del_f."}, {"sha": "f7c599df7ac681459516fe0e398e2350d5a60e90", "filename": "libiberty/acconfig.h", "status": "removed", "additions": 0, "deletions": 11, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c01a508e4e8a795f63348accdd04483c9d67197e/libiberty%2Facconfig.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c01a508e4e8a795f63348accdd04483c9d67197e/libiberty%2Facconfig.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Facconfig.h?ref=c01a508e4e8a795f63348accdd04483c9d67197e", "patch": "@@ -1,11 +0,0 @@\n-/* Define if you have the sys_errlist variable.  */\n-#undef HAVE_SYS_ERRLIST\n-\n-/* Define if you have the sys_nerr variable.  */\n-#undef HAVE_SYS_NERR\n-\n-/* Define if you have the sys_siglist variable.  */\n-#undef HAVE_SYS_SIGLIST\n-\n-/* Define if you have the strerror function.  */\n-#undef HAVE_STRERROR"}, {"sha": "c5628352773e78e48710751e8d9f4b2eec91b12f", "filename": "libiberty/aclocal.m4", "status": "modified", "additions": 51, "deletions": 0, "changes": 51, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Faclocal.m4?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -83,3 +83,54 @@ then AC_DEFINE(NEED_DECLARATION_ERRNO, 1,\n   [Define if errno must be declared even when <errno.h> is included.])\n fi\n ])\n+\n+# FIXME: We temporarily define our own version of AC_PROG_CC.  This is\n+# copied from autoconf 2.12, but does not call AC_PROG_CC_WORKS.  We\n+# are probably using a cross compiler, which will not be able to fully\n+# link an executable.  This should really be fixed in autoconf\n+# itself.\n+\n+AC_DEFUN(LIB_AC_PROG_CC,\n+[AC_BEFORE([$0], [AC_PROG_CPP])dnl\n+AC_PROVIDE([AC_PROG_CC])\n+AC_CHECK_PROG(CC, gcc, gcc)\n+if test -z \"$CC\"; then\n+  AC_CHECK_PROG(CC, cc, cc, , , /usr/ucb/cc)\n+  test -z \"$CC\" && AC_MSG_ERROR([no acceptable cc found in \\$PATH])\n+fi\n+\n+AC_PROG_CC_GNU\n+\n+if test $ac_cv_prog_gcc = yes; then\n+  GCC=yes\n+  ac_libiberty_warn_cflags='-W -Wall -Wtraditional -pedantic'\n+dnl Check whether -g works, even if CFLAGS is set, in case the package\n+dnl plays around with CFLAGS (such as to build both debugging and\n+dnl normal versions of a library), tasteless as that idea is.\n+  ac_test_CFLAGS=\"${CFLAGS+set}\"\n+  ac_save_CFLAGS=\"$CFLAGS\"\n+  CFLAGS=\n+  AC_PROG_CC_G\n+  if test \"$ac_test_CFLAGS\" = set; then\n+    CFLAGS=\"$ac_save_CFLAGS\"\n+  elif test $ac_cv_prog_cc_g = yes; then\n+    CFLAGS=\"-g -O2\"\n+  else\n+    CFLAGS=\"-O2\"\n+  fi\n+else\n+  GCC=\n+  ac_libiberty_warn_cflags=\n+  test \"${CFLAGS+set}\" = set || CFLAGS=\"-g\"\n+fi\n+AC_SUBST(ac_libiberty_warn_cflags)\n+])\n+\n+# Work around a bug in autoheader.  This can go away when we switch to\n+# autoconf >2.50.  The use of define instead of AC_DEFUN is\n+# deliberate.\n+define(AC_DEFINE_NOAUTOHEADER,\n+[cat >> confdefs.h <<\\EOF\n+[#define] $1 ifelse($#, 2, [$2], $#, 3, [$2], 1)\n+EOF\n+])"}, {"sha": "5fed1ccc83438008c5603a6fbb538773ea78cdeb", "filename": "libiberty/config.in", "status": "modified", "additions": 15, "deletions": 12, "changes": 27, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fconfig.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fconfig.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfig.in?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -3,6 +3,9 @@\n /* Define if using alloca.c.  */\n #undef C_ALLOCA\n \n+/* Define to empty if the keyword does not work.  */\n+#undef const\n+\n /* Define to one of _getb67, GETB67, getb67 for Cray-2 and Cray-YMP systems.\n    This function is required for alloca.c support on those systems.  */\n #undef CRAY_STACKSEG_END\n@@ -22,6 +25,9 @@\n /* Define if you have <vfork.h>.  */\n #undef HAVE_VFORK_H\n \n+/* Define as __inline if that's what the C compiler calls it.  */\n+#undef inline\n+\n /* Define to `int' if <sys/types.h> doesn't define.  */\n #undef pid_t\n \n@@ -46,18 +52,6 @@\n /* Define vfork as fork if vfork does not work.  */\n #undef vfork\n \n-/* Define if you have the sys_errlist variable.  */\n-#undef HAVE_SYS_ERRLIST\n-\n-/* Define if you have the sys_nerr variable.  */\n-#undef HAVE_SYS_NERR\n-\n-/* Define if you have the sys_siglist variable.  */\n-#undef HAVE_SYS_SIGLIST\n-\n-/* Define if you have the strerror function.  */\n-#undef HAVE_STRERROR\n-\n /* Define if you have the asprintf function.  */\n #undef HAVE_ASPRINTF\n \n@@ -244,3 +238,12 @@\n /* Define if errno must be declared even when <errno.h> is included. */\n #undef NEED_DECLARATION_ERRNO\n \n+/* Define if you have the sys_errlist variable. */\n+#undef HAVE_SYS_ERRLIST\n+\n+/* Define if you have the sys_nerr variable. */\n+#undef HAVE_SYS_NERR\n+\n+/* Define if you have the sys_siglist variable. */\n+#undef HAVE_SYS_SIGLIST\n+"}, {"sha": "8c51dcb79f1b357358c429fe4d76b0ea67be4311", "filename": "libiberty/configure", "status": "modified", "additions": 247, "deletions": 150, "changes": 397, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -733,20 +733,11 @@ fi\n fi\n \n \n-# FIXME: We temporarily define our own version of AC_PROG_CC.  This is\n-# copied from autoconf 2.12, but does not call AC_PROG_CC_WORKS.  We\n-# are probably using a cross compiler, which will not be able to fully\n-# link an executable.  This should really be fixed in autoconf\n-# itself.\n-\n-\n-\n-\n \n # Extract the first word of \"gcc\", so it can be a program name with args.\n set dummy gcc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:750: checking for $ac_word\" >&5\n+echo \"configure:741: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -776,7 +767,7 @@ if test -z \"$CC\"; then\n   # Extract the first word of \"cc\", so it can be a program name with args.\n set dummy cc; ac_word=$2\n echo $ac_n \"checking for $ac_word\"\"... $ac_c\" 1>&6\n-echo \"configure:780: checking for $ac_word\" >&5\n+echo \"configure:771: checking for $ac_word\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_CC'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -825,7 +816,7 @@ fi\n fi\n \n echo $ac_n \"checking whether we are using GNU C\"\"... $ac_c\" 1>&6\n-echo \"configure:829: checking whether we are using GNU C\" >&5\n+echo \"configure:820: checking whether we are using GNU C\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_gcc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -834,7 +825,7 @@ else\n   yes;\n #endif\n EOF\n-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:838: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:829: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then\n   ac_cv_prog_gcc=yes\n else\n   ac_cv_prog_gcc=no\n@@ -850,7 +841,7 @@ if test $ac_cv_prog_gcc = yes; then\n   ac_save_CFLAGS=\"$CFLAGS\"\n   CFLAGS=\n   echo $ac_n \"checking whether ${CC-cc} accepts -g\"\"... $ac_c\" 1>&6\n-echo \"configure:854: checking whether ${CC-cc} accepts -g\" >&5\n+echo \"configure:845: checking whether ${CC-cc} accepts -g\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_prog_cc_g'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n@@ -879,8 +870,9 @@ else\n fi\n \n \n+\n echo $ac_n \"checking for POSIXized ISC\"\"... $ac_c\" 1>&6\n-echo \"configure:884: checking for POSIXized ISC\" >&5\n+echo \"configure:876: checking for POSIXized ISC\" >&5\n if test -d /etc/conf/kconfig.d &&\n   grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1\n then\n@@ -900,6 +892,121 @@ else\n   ISC=\n fi\n \n+echo $ac_n \"checking for working const\"\"... $ac_c\" 1>&6\n+echo \"configure:897: checking for working const\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_c_const'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  cat > conftest.$ac_ext <<EOF\n+#line 902 \"configure\"\n+#include \"confdefs.h\"\n+\n+int main() {\n+\n+/* Ultrix mips cc rejects this.  */\n+typedef int charset[2]; const charset x = {0,0};\n+/* SunOS 4.1.1 cc rejects this.  */\n+char const *const *ccp;\n+char **p;\n+/* NEC SVR4.0.2 mips cc rejects this.  */\n+struct point {int x, y;};\n+static struct point const zero = {0,0};\n+/* AIX XL C 1.02.0.0 rejects this.\n+   It does not let you subtract one const X* pointer from another in an arm\n+   of an if-expression whose if-part is not a constant expression */\n+const char *g = \"string\";\n+ccp = &g + (g ? g-g : 0);\n+/* HPUX 7.0 cc rejects these. */\n+++ccp;\n+p = (char**) ccp;\n+ccp = (char const *const *) p;\n+{ /* SCO 3.2v4 cc rejects this.  */\n+  char *t;\n+  char const *s = 0 ? (char *) 0 : (char const *) 0;\n+\n+  *t++ = 0;\n+}\n+{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */\n+  int x[] = {25, 17};\n+  const int *foo = &x[0];\n+  ++foo;\n+}\n+{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */\n+  typedef const int *iptr;\n+  iptr p = 0;\n+  ++p;\n+}\n+{ /* AIX XL C 1.02.0.0 rejects this saying\n+     \"k.c\", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */\n+  struct s { int j; const int *ap[3]; };\n+  struct s *b; b->j = 5;\n+}\n+{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */\n+  const int foo = 10;\n+}\n+\n+; return 0; }\n+EOF\n+if { (eval echo configure:951: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_c_const=yes\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+  rm -rf conftest*\n+  ac_cv_c_const=no\n+fi\n+rm -f conftest*\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_c_const\" 1>&6\n+if test $ac_cv_c_const = no; then\n+  cat >> confdefs.h <<\\EOF\n+#define const \n+EOF\n+\n+fi\n+\n+echo $ac_n \"checking for inline\"\"... $ac_c\" 1>&6\n+echo \"configure:972: checking for inline\" >&5\n+if eval \"test \\\"`echo '$''{'ac_cv_c_inline'+set}'`\\\" = set\"; then\n+  echo $ac_n \"(cached) $ac_c\" 1>&6\n+else\n+  ac_cv_c_inline=no\n+for ac_kw in inline __inline__ __inline; do\n+  cat > conftest.$ac_ext <<EOF\n+#line 979 \"configure\"\n+#include \"confdefs.h\"\n+\n+int main() {\n+} int $ac_kw foo() {\n+; return 0; }\n+EOF\n+if { (eval echo configure:986: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+  rm -rf conftest*\n+  ac_cv_c_inline=$ac_kw; break\n+else\n+  echo \"configure: failed program was:\" >&5\n+  cat conftest.$ac_ext >&5\n+fi\n+rm -f conftest*\n+done\n+\n+fi\n+\n+echo \"$ac_t\"\"$ac_cv_c_inline\" 1>&6\n+case \"$ac_cv_c_inline\" in\n+  inline | yes) ;;\n+  no) cat >> confdefs.h <<\\EOF\n+#define inline \n+EOF\n+ ;;\n+  *)  cat >> confdefs.h <<EOF\n+#define inline $ac_cv_c_inline\n+EOF\n+ ;;\n+esac\n+\n \n \n \n@@ -918,7 +1025,7 @@ fi\n # SVR4 /usr/ucb/install, which tries to use the nonexistent group \"staff\"\n # ./install, which can be erroneously created by make from ./install.sh.\n echo $ac_n \"checking for a BSD compatible install\"\"... $ac_c\" 1>&6\n-echo \"configure:922: checking for a BSD compatible install\" >&5\n+echo \"configure:1029: checking for a BSD compatible install\" >&5\n if test -z \"$INSTALL\"; then\n if eval \"test \\\"`echo '$''{'ac_cv_path_install'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n@@ -979,7 +1086,7 @@ host_makefile_frag=${frag}\n # able to link anything, it had better be able to at least compile\n # something.\n echo $ac_n \"checking how to run the C preprocessor\"\"... $ac_c\" 1>&6\n-echo \"configure:983: checking how to run the C preprocessor\" >&5\n+echo \"configure:1090: checking how to run the C preprocessor\" >&5\n # On Suns, sometimes $CPP names a directory.\n if test -n \"$CPP\" && test -d \"$CPP\"; then\n   CPP=\n@@ -994,13 +1101,13 @@ else\n   # On the NeXT, cc -E runs the code through the compiler's parser,\n   # not just through cpp.\n   cat > conftest.$ac_ext <<EOF\n-#line 998 \"configure\"\n+#line 1105 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1004: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1111: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1011,13 +1118,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -E -traditional-cpp\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1015 \"configure\"\n+#line 1122 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1021: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1128: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1028,13 +1135,13 @@ else\n   rm -rf conftest*\n   CPP=\"${CC-cc} -nologo -E\"\n   cat > conftest.$ac_ext <<EOF\n-#line 1032 \"configure\"\n+#line 1139 \"configure\"\n #include \"confdefs.h\"\n #include <assert.h>\n Syntax Error\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1038: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1145: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   :\n@@ -1062,17 +1169,17 @@ for ac_hdr in sys/file.h sys/param.h limits.h stdlib.h string.h unistd.h strings\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:1066: checking for $ac_hdr\" >&5\n+echo \"configure:1173: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1071 \"configure\"\n+#line 1178 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:1076: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:1183: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -1099,12 +1206,12 @@ fi\n done\n \n echo $ac_n \"checking for sys/wait.h that is POSIX.1 compatible\"\"... $ac_c\" 1>&6\n-echo \"configure:1103: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n+echo \"configure:1210: checking for sys/wait.h that is POSIX.1 compatible\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1108 \"configure\"\n+#line 1215 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/wait.h>\n@@ -1120,7 +1227,7 @@ wait (&s);\n s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;\n ; return 0; }\n EOF\n-if { (eval echo configure:1124: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1231: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_sys_wait_h=yes\n else\n@@ -1141,12 +1248,12 @@ EOF\n fi\n \n echo $ac_n \"checking whether time.h and sys/time.h may both be included\"\"... $ac_c\" 1>&6\n-echo \"configure:1145: checking whether time.h and sys/time.h may both be included\" >&5\n+echo \"configure:1252: checking whether time.h and sys/time.h may both be included\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_time'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1150 \"configure\"\n+#line 1257 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #include <sys/time.h>\n@@ -1155,7 +1262,7 @@ int main() {\n struct tm *tp;\n ; return 0; }\n EOF\n-if { (eval echo configure:1159: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1266: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   ac_cv_header_time=yes\n else\n@@ -1177,19 +1284,19 @@ fi\n \n \n echo $ac_n \"checking whether errno must be declared\"\"... $ac_c\" 1>&6\n-echo \"configure:1181: checking whether errno must be declared\" >&5\n+echo \"configure:1288: checking whether errno must be declared\" >&5\n if eval \"test \\\"`echo '$''{'libiberty_cv_declare_errno'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1186 \"configure\"\n+#line 1293 \"configure\"\n #include \"confdefs.h\"\n #include <errno.h>\n int main() {\n int x = errno;\n ; return 0; }\n EOF\n-if { (eval echo configure:1193: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n+if { (eval echo configure:1300: \\\"$ac_compile\\\") 1>&5; (eval $ac_compile) 2>&5; }; then\n   rm -rf conftest*\n   libiberty_cv_declare_errno=no\n else\n@@ -1265,12 +1372,12 @@ if test \"x\" = \"y\"; then\n   for ac_func in asprintf atexit basename bcmp bcopy bzero calloc clock getcwd\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1269: checking for $ac_func\" >&5\n+echo \"configure:1376: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1274 \"configure\"\n+#line 1381 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1293,7 +1400,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1297: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1404: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1320,12 +1427,12 @@ done\n   for ac_func in getpagesize index insque mkstemps memchr memcmp memcpy memmove\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1324: checking for $ac_func\" >&5\n+echo \"configure:1431: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1329 \"configure\"\n+#line 1436 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1348,7 +1455,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1352: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1459: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1375,12 +1482,12 @@ done\n   for ac_func in memset putenv random rename rindex sigsetmask strcasecmp\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1379: checking for $ac_func\" >&5\n+echo \"configure:1486: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1384 \"configure\"\n+#line 1491 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1403,7 +1510,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1407: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1514: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1430,12 +1537,12 @@ done\n   for ac_func in setenv strchr strdup strncasecmp strrchr strstr strtod strtol\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1434: checking for $ac_func\" >&5\n+echo \"configure:1541: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1439 \"configure\"\n+#line 1546 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1458,7 +1565,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1462: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1569: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1485,12 +1592,12 @@ done\n   for ac_func in strtoul tmpnam vasprintf vfprintf vprintf vsprintf waitpid\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1489: checking for $ac_func\" >&5\n+echo \"configure:1596: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1494 \"configure\"\n+#line 1601 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1513,7 +1620,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1517: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1624: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1537,27 +1644,15 @@ else\n fi\n done\n \n-  cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_ERRLIST 1\n-EOF\n-\n-  cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_NERR 1\n-EOF\n-\n-  cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_SIGLIST 1\n-EOF\n-\n   for ac_func in getrusage on_exit psignal strerror strsignal sysconf times\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1556: checking for $ac_func\" >&5\n+echo \"configure:1651: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1561 \"configure\"\n+#line 1656 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1580,7 +1675,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1584: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1679: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1607,12 +1702,12 @@ done\n   for ac_func in sbrk gettimeofday\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1611: checking for $ac_func\" >&5\n+echo \"configure:1706: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1616 \"configure\"\n+#line 1711 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1635,7 +1730,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1639: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1734: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1659,6 +1754,18 @@ else\n fi\n done\n \n+  cat >> confdefs.h <<\\EOF\n+#define HAVE_SYS_ERRLIST 1\n+EOF\n+\n+  cat >> confdefs.h <<\\EOF\n+#define HAVE_SYS_NERR     1 Define if you have the sys_nerr variable.\n+EOF\n+\n+  cat >> confdefs.h <<\\EOF\n+#define HAVE_SYS_SIGLIST 1\n+EOF\n+\n fi\n \n # For each of these functions, if the host does not provide the\n@@ -1788,15 +1895,8 @@ if test -z \"${setobjs}\"; then\n   *-*-mingw32*)\n     # Under mingw32, sys_nerr and sys_errlist exist, but they are\n     # macros, so the test below won't find them.\n-    vars=\"`echo $vars | sed -e 's/sys_nerr//' -e 's/sys_errlist//'`\"\n-    cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_NERR 1\n-EOF\n-\n-    cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_ERRLIST 1\n-EOF\n-\n+    libiberty_cv_var_sys_nerr=yes\n+    libiberty_cv_var_sys_errlist=yes\n     ;;\n \n   *-*-uwin*)\n@@ -1807,22 +1907,16 @@ EOF\n     # Under uwin 2.0+, sys_nerr and sys_errlist exist, but they are\n     # macros (actually, these are imported from a DLL, but the end effect \n     # is the same), so the test below won't find them.\n-    cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_NERR 1\n-EOF\n-\n-    cat >> confdefs.h <<\\EOF\n-#define HAVE_SYS_ERRLIST 1\n-EOF\n-\n+    libiberty_cv_var_sys_nerr=yes\n+    libiberty_cv_var_sys_errlist=yes\n     ;;\n \n   esac\n \n   # We haven't set the list of objects yet.  Use the standard autoconf\n   # tests.  This will only work if the compiler works.\n   echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\"\"... $ac_c\" 1>&6\n-echo \"configure:1821: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n+echo \"configure:1920: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works\" >&5\n \n ac_ext=c\n # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.\n@@ -1833,12 +1927,12 @@ cross_compiling=$ac_cv_prog_cc_cross\n \n cat > conftest.$ac_ext << EOF\n \n-#line 1832 \"configure\"\n+#line 1931 \"configure\"\n #include \"confdefs.h\"\n \n main(){return(0);}\n EOF\n-if { (eval echo configure:1837: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1936: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   ac_cv_prog_cc_works=yes\n   # If we can't run a trivial program, we are probably using a cross compiler.\n   if (./conftest; exit) 2>/dev/null; then\n@@ -1864,19 +1958,19 @@ if test $ac_cv_prog_cc_works = no; then\n   { echo \"configure: error: installation or configuration problem: C compiler cannot create executables.\" 1>&2; exit 1; }\n fi\n echo $ac_n \"checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\"\"... $ac_c\" 1>&6\n-echo \"configure:1863: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n+echo \"configure:1962: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler\" >&5\n echo \"$ac_t\"\"$ac_cv_prog_cc_cross\" 1>&6\n cross_compiling=$ac_cv_prog_cc_cross\n \n   for ac_func in $funcs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:1870: checking for $ac_func\" >&5\n+echo \"configure:1969: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1875 \"configure\"\n+#line 1974 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -1899,7 +1993,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:1898: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:1997: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -1946,19 +2040,19 @@ EOF\n     # The Ultrix 4.2 mips builtin alloca declared by alloca.h only works\n # for constant arguments.  Useless!\n echo $ac_n \"checking for working alloca.h\"\"... $ac_c\" 1>&6\n-echo \"configure:1945: checking for working alloca.h\" >&5\n+echo \"configure:2044: checking for working alloca.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_alloca_h'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1950 \"configure\"\n+#line 2049 \"configure\"\n #include \"confdefs.h\"\n #include <alloca.h>\n int main() {\n-char *p = alloca(2 * sizeof(int));\n+void *p = alloca(2 * sizeof(int));\n ; return 0; }\n EOF\n-if { (eval echo configure:1957: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2056: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_header_alloca_h=yes\n else\n@@ -1979,12 +2073,12 @@ EOF\n fi\n \n echo $ac_n \"checking for alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:1978: checking for alloca\" >&5\n+echo \"configure:2077: checking for alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_alloca_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 1983 \"configure\"\n+#line 2082 \"configure\"\n #include \"confdefs.h\"\n \n #ifdef __GNUC__\n@@ -2012,7 +2106,7 @@ int main() {\n char *p = (char *) alloca(1);\n ; return 0; }\n EOF\n-if { (eval echo configure:2011: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2110: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   ac_cv_func_alloca_works=yes\n else\n@@ -2044,12 +2138,12 @@ EOF\n \n \n echo $ac_n \"checking whether alloca needs Cray hooks\"\"... $ac_c\" 1>&6\n-echo \"configure:2043: checking whether alloca needs Cray hooks\" >&5\n+echo \"configure:2142: checking whether alloca needs Cray hooks\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_os_cray'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2048 \"configure\"\n+#line 2147 \"configure\"\n #include \"confdefs.h\"\n #if defined(CRAY) && ! defined(CRAY2)\n webecray\n@@ -2074,12 +2168,12 @@ echo \"$ac_t\"\"$ac_cv_os_cray\" 1>&6\n if test $ac_cv_os_cray = yes; then\n for ac_func in _getb67 GETB67 getb67; do\n   echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2073: checking for $ac_func\" >&5\n+echo \"configure:2172: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2078 \"configure\"\n+#line 2177 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2102,7 +2196,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2101: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2200: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2129,15 +2223,15 @@ done\n fi\n \n echo $ac_n \"checking stack direction for C alloca\"\"... $ac_c\" 1>&6\n-echo \"configure:2128: checking stack direction for C alloca\" >&5\n+echo \"configure:2227: checking stack direction for C alloca\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_c_stack_direction'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_c_stack_direction=0\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2136 \"configure\"\n+#line 2235 \"configure\"\n #include \"confdefs.h\"\n find_stack_direction ()\n {\n@@ -2156,7 +2250,7 @@ main ()\n   exit (find_stack_direction() < 0);\n }\n EOF\n-if { (eval echo configure:2155: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2254: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_c_stack_direction=1\n else\n@@ -2181,20 +2275,20 @@ fi\n   esac\n \n   echo $ac_n \"checking for ANSI C header files\"\"... $ac_c\" 1>&6\n-echo \"configure:2180: checking for ANSI C header files\" >&5\n+echo \"configure:2279: checking for ANSI C header files\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_stdc'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2185 \"configure\"\n+#line 2284 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n #include <stdarg.h>\n #include <string.h>\n #include <float.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2193: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2292: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2211,7 +2305,7 @@ rm -f conftest*\n if test $ac_cv_header_stdc = yes; then\n   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2210 \"configure\"\n+#line 2309 \"configure\"\n #include \"confdefs.h\"\n #include <string.h>\n EOF\n@@ -2229,7 +2323,7 @@ fi\n if test $ac_cv_header_stdc = yes; then\n   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.\n cat > conftest.$ac_ext <<EOF\n-#line 2228 \"configure\"\n+#line 2327 \"configure\"\n #include \"confdefs.h\"\n #include <stdlib.h>\n EOF\n@@ -2250,7 +2344,7 @@ if test \"$cross_compiling\" = yes; then\n   :\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2249 \"configure\"\n+#line 2348 \"configure\"\n #include \"confdefs.h\"\n #include <ctype.h>\n #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')\n@@ -2261,7 +2355,7 @@ if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);\n exit (0); }\n \n EOF\n-if { (eval echo configure:2260: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2359: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   :\n else\n@@ -2285,12 +2379,12 @@ EOF\n fi\n \n echo $ac_n \"checking for pid_t\"\"... $ac_c\" 1>&6\n-echo \"configure:2284: checking for pid_t\" >&5\n+echo \"configure:2383: checking for pid_t\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_type_pid_t'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2289 \"configure\"\n+#line 2388 \"configure\"\n #include \"confdefs.h\"\n #include <sys/types.h>\n #if STDC_HEADERS\n@@ -2319,17 +2413,17 @@ fi\n \n ac_safe=`echo \"vfork.h\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for vfork.h\"\"... $ac_c\" 1>&6\n-echo \"configure:2318: checking for vfork.h\" >&5\n+echo \"configure:2417: checking for vfork.h\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2323 \"configure\"\n+#line 2422 \"configure\"\n #include \"confdefs.h\"\n #include <vfork.h>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2328: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2427: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2354,18 +2448,18 @@ else\n fi\n \n echo $ac_n \"checking for working vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2353: checking for working vfork\" >&5\n+echo \"configure:2452: checking for working vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   echo $ac_n \"checking for vfork\"\"... $ac_c\" 1>&6\n-echo \"configure:2359: checking for vfork\" >&5\n+echo \"configure:2458: checking for vfork\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_vfork'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2364 \"configure\"\n+#line 2463 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char vfork(); below.  */\n@@ -2388,7 +2482,7 @@ vfork();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2387: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2486: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_vfork=yes\"\n else\n@@ -2410,7 +2504,7 @@ fi\n ac_cv_func_vfork_works=$ac_cv_func_vfork\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2409 \"configure\"\n+#line 2508 \"configure\"\n #include \"confdefs.h\"\n /* Thanks to Paul Eggert for this test.  */\n #include <stdio.h>\n@@ -2505,7 +2599,7 @@ main() {\n   }\n }\n EOF\n-if { (eval echo configure:2504: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2603: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_vfork_works=yes\n else\n@@ -2532,19 +2626,19 @@ fi\n   fi\n   for v in $vars; do\n     echo $ac_n \"checking for $v\"\"... $ac_c\" 1>&6\n-echo \"configure:2531: checking for $v\" >&5\n+echo \"configure:2630: checking for $v\" >&5\n     if eval \"test \\\"`echo '$''{'libiberty_cv_var_$v'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2536 \"configure\"\n+#line 2635 \"configure\"\n #include \"confdefs.h\"\n int *p;\n int main() {\n extern int $v; p = &$v;\n ; return 0; }\n EOF\n-if { (eval echo configure:2543: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2642: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"libiberty_cv_var_$v=yes\"\n else\n@@ -2570,12 +2664,12 @@ EOF\n   for ac_func in $checkfuncs\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2569: checking for $ac_func\" >&5\n+echo \"configure:2668: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2574 \"configure\"\n+#line 2673 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2598,7 +2692,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2597: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2696: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2628,17 +2722,17 @@ for ac_hdr in unistd.h\n do\n ac_safe=`echo \"$ac_hdr\" | sed 'y%./+-%__p_%'`\n echo $ac_n \"checking for $ac_hdr\"\"... $ac_c\" 1>&6\n-echo \"configure:2627: checking for $ac_hdr\" >&5\n+echo \"configure:2726: checking for $ac_hdr\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2632 \"configure\"\n+#line 2731 \"configure\"\n #include \"confdefs.h\"\n #include <$ac_hdr>\n EOF\n ac_try=\"$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out\"\n-{ (eval echo configure:2637: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n+{ (eval echo configure:2736: \\\"$ac_try\\\") 1>&5; (eval $ac_try) 2>&5; }\n ac_err=`grep -v '^ *+' conftest.out | grep -v \"^conftest.${ac_ext}\\$\"`\n if test -z \"$ac_err\"; then\n   rm -rf conftest*\n@@ -2667,12 +2761,12 @@ done\n for ac_func in getpagesize\n do\n echo $ac_n \"checking for $ac_func\"\"... $ac_c\" 1>&6\n-echo \"configure:2666: checking for $ac_func\" >&5\n+echo \"configure:2765: checking for $ac_func\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_$ac_func'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2671 \"configure\"\n+#line 2770 \"configure\"\n #include \"confdefs.h\"\n /* System header to define __stub macros and hopefully few prototypes,\n     which can conflict with char $ac_func(); below.  */\n@@ -2695,7 +2789,7 @@ $ac_func();\n \n ; return 0; }\n EOF\n-if { (eval echo configure:2694: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n+if { (eval echo configure:2793: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then\n   rm -rf conftest*\n   eval \"ac_cv_func_$ac_func=yes\"\n else\n@@ -2720,15 +2814,15 @@ fi\n done\n \n echo $ac_n \"checking for working mmap\"\"... $ac_c\" 1>&6\n-echo \"configure:2719: checking for working mmap\" >&5\n+echo \"configure:2818: checking for working mmap\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_mmap_fixed_mapped'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_mmap_fixed_mapped=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2727 \"configure\"\n+#line 2826 \"configure\"\n #include \"confdefs.h\"\n \n /* Thanks to Mike Haertel and Jim Avera for this test.\n@@ -2755,12 +2849,15 @@ else\n #include <sys/types.h>\n #include <fcntl.h>\n #include <sys/mman.h>\n+#include <stdlib.h>\n+#include <sys/stat.h>\n+\n+#ifdef HAVE_UNISTD_H\n+# include <unistd.h>\n+#endif\n \n /* This mess was copied from the GNU getpagesize.h.  */\n #ifndef HAVE_GETPAGESIZE\n-# ifdef HAVE_UNISTD_H\n-#  include <unistd.h>\n-# endif\n \n /* Assume that all systems that can run configure have sys/param.h.  */\n # ifndef HAVE_SYS_PARAM_H\n@@ -2815,7 +2912,7 @@ main()\n \t/*\n \t * First, make a file with some known garbage in it.\n \t */\n-\tdata = malloc(pagesize);\n+\tdata = (char*)malloc(pagesize);\n \tif (!data)\n \t\texit(1);\n \tfor (i = 0; i < pagesize; ++i)\n@@ -2836,7 +2933,7 @@ main()\n \tfd = open(\"conftestmmap\", O_RDWR);\n \tif (fd < 0)\n \t\texit(1);\n-\tdata2 = malloc(2 * pagesize);\n+\tdata2 = (char*)malloc(2 * pagesize);\n \tif (!data2)\n \t\texit(1);\n \tdata2 += (pagesize - ((int) data2 & (pagesize - 1))) & (pagesize - 1);\n@@ -2854,7 +2951,7 @@ main()\n \t */\n \tfor (i = 0; i < pagesize; ++i)\n \t\t*(data2 + i) = *(data2 + i) + 1;\n-\tdata3 = malloc(pagesize);\n+\tdata3 = (char*)malloc(pagesize);\n \tif (!data3)\n \t\texit(1);\n \tif (read(fd, data3, pagesize) != pagesize)\n@@ -2868,7 +2965,7 @@ main()\n }\n \n EOF\n-if { (eval echo configure:2867: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:2969: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_mmap_fixed_mapped=yes\n else\n@@ -2892,15 +2989,15 @@ fi\n \n \n echo $ac_n \"checking for working strncmp\"\"... $ac_c\" 1>&6\n-echo \"configure:2891: checking for working strncmp\" >&5\n+echo \"configure:2993: checking for working strncmp\" >&5\n if eval \"test \\\"`echo '$''{'ac_cv_func_strncmp_works'+set}'`\\\" = set\"; then\n   echo $ac_n \"(cached) $ac_c\" 1>&6\n else\n   if test \"$cross_compiling\" = yes; then\n   ac_cv_func_strncmp_works=no\n else\n   cat > conftest.$ac_ext <<EOF\n-#line 2899 \"configure\"\n+#line 3001 \"configure\"\n #include \"confdefs.h\"\n \n /* Test by Jim Wilson and Kaveh Ghazi.\n@@ -2961,7 +3058,7 @@ main ()\n }\n \n EOF\n-if { (eval echo configure:2960: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n+if { (eval echo configure:3062: \\\"$ac_link\\\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null\n then\n   ac_cv_func_strncmp_works=yes\n else\n@@ -3137,8 +3234,8 @@ s%@build_vendor@%$build_vendor%g\n s%@build_os@%$build_os%g\n s%@AR@%$AR%g\n s%@RANLIB@%$RANLIB%g\n-s%@ac_libiberty_warn_cflags@%$ac_libiberty_warn_cflags%g\n s%@CC@%$CC%g\n+s%@ac_libiberty_warn_cflags@%$ac_libiberty_warn_cflags%g\n s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g\n s%@INSTALL_SCRIPT@%$INSTALL_SCRIPT%g\n s%@INSTALL_DATA@%$INSTALL_DATA%g"}, {"sha": "6d06c0af2d0ab5f55ca2446d05922cdfd40595c9", "filename": "libiberty/configure.in", "status": "modified", "additions": 11, "deletions": 52, "changes": 63, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fconfigure.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fconfigure.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fconfigure.in?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -36,51 +36,11 @@ dnl to call AC_CHECK_PROG.\n AC_CHECK_TOOL(AR, ar)\n AC_CHECK_TOOL(RANLIB, ranlib, :)\n \n-# FIXME: We temporarily define our own version of AC_PROG_CC.  This is\n-# copied from autoconf 2.12, but does not call AC_PROG_CC_WORKS.  We\n-# are probably using a cross compiler, which will not be able to fully\n-# link an executable.  This should really be fixed in autoconf\n-# itself.\n-\n-AC_DEFUN(LIB_AC_PROG_CC,\n-[AC_BEFORE([$0], [AC_PROG_CPP])dnl\n-AC_PROVIDE([AC_PROG_CC])\n-AC_CHECK_PROG(CC, gcc, gcc)\n-if test -z \"$CC\"; then\n-  AC_CHECK_PROG(CC, cc, cc, , , /usr/ucb/cc)\n-  test -z \"$CC\" && AC_MSG_ERROR([no acceptable cc found in \\$PATH])\n-fi\n-\n-AC_PROG_CC_GNU\n-\n-if test $ac_cv_prog_gcc = yes; then\n-  GCC=yes\n-  ac_libiberty_warn_cflags='-W -Wall -Wtraditional -pedantic'\n-dnl Check whether -g works, even if CFLAGS is set, in case the package\n-dnl plays around with CFLAGS (such as to build both debugging and\n-dnl normal versions of a library), tasteless as that idea is.\n-  ac_test_CFLAGS=\"${CFLAGS+set}\"\n-  ac_save_CFLAGS=\"$CFLAGS\"\n-  CFLAGS=\n-  AC_PROG_CC_G\n-  if test \"$ac_test_CFLAGS\" = set; then\n-    CFLAGS=\"$ac_save_CFLAGS\"\n-  elif test $ac_cv_prog_cc_g = yes; then\n-    CFLAGS=\"-g -O2\"\n-  else\n-    CFLAGS=\"-O2\"\n-  fi\n-else\n-  GCC=\n-  ac_libiberty_warn_cflags=\n-  test \"${CFLAGS+set}\" = set || CFLAGS=\"-g\"\n-fi\n-])\n-AC_SUBST(ac_libiberty_warn_cflags)\n-\n LIB_AC_PROG_CC\n \n AC_ISC_POSIX\n+AC_C_CONST\n+AC_C_INLINE\n \n dnl When we start using libtool:\n dnl Default to a non shared library.  This may be overridden by the\n@@ -172,11 +132,11 @@ if test \"x\" = \"y\"; then\n   AC_CHECK_FUNCS(memset putenv random rename rindex sigsetmask strcasecmp)\n   AC_CHECK_FUNCS(setenv strchr strdup strncasecmp strrchr strstr strtod strtol)\n   AC_CHECK_FUNCS(strtoul tmpnam vasprintf vfprintf vprintf vsprintf waitpid)\n-  AC_DEFINE(HAVE_SYS_ERRLIST)\n-  AC_DEFINE(HAVE_SYS_NERR)\n-  AC_DEFINE(HAVE_SYS_SIGLIST)\n   AC_CHECK_FUNCS(getrusage on_exit psignal strerror strsignal sysconf times)\n   AC_CHECK_FUNCS(sbrk gettimeofday)\n+  AC_DEFINE(HAVE_SYS_ERRLIST, 1, [Define if you have the sys_errlist variable.])\n+  AC_DEFINE(HAVE_SYS_NERR,    1, [Define if you have the sys_nerr variable.])\n+  AC_DEFINE(HAVE_SYS_SIGLIST, 1, [Define if you have the sys_siglist variable.])\n fi\n \n # For each of these functions, if the host does not provide the\n@@ -215,7 +175,7 @@ if test -n \"${with_target_subdir}\"; then\n     # dont have to check them here.\n \n     # Of the functions in $checkfuncs, newlib only has strerror.\n-    AC_DEFINE(HAVE_STRERROR)\n+    AC_DEFINE_NOAUTOHEADER(HAVE_STRERROR)\n \n     setobjs=yes\n \n@@ -256,7 +216,7 @@ if test -z \"${setobjs}\"; then\n     # don't have to check them here.\n \n     # Of the functions in $checkfuncs, VxWorks only has strerror.\n-    AC_DEFINE(HAVE_STRERROR)\n+    AC_DEFINE_NOAUTOHEADER(HAVE_STRERROR)\n \n     setobjs=yes\n     ;;\n@@ -294,9 +254,8 @@ if test -z \"${setobjs}\"; then\n   *-*-mingw32*)\n     # Under mingw32, sys_nerr and sys_errlist exist, but they are\n     # macros, so the test below won't find them.\n-    vars=\"`echo $vars | sed -e 's/sys_nerr//' -e 's/sys_errlist//'`\"\n-    AC_DEFINE(HAVE_SYS_NERR)\n-    AC_DEFINE(HAVE_SYS_ERRLIST)\n+    libiberty_cv_var_sys_nerr=yes\n+    libiberty_cv_var_sys_errlist=yes\n     ;;\n \n   *-*-uwin*)\n@@ -307,8 +266,8 @@ if test -z \"${setobjs}\"; then\n     # Under uwin 2.0+, sys_nerr and sys_errlist exist, but they are\n     # macros (actually, these are imported from a DLL, but the end effect \n     # is the same), so the test below won't find them.\n-    AC_DEFINE(HAVE_SYS_NERR)\n-    AC_DEFINE(HAVE_SYS_ERRLIST)\n+    libiberty_cv_var_sys_nerr=yes\n+    libiberty_cv_var_sys_errlist=yes\n     ;;\n \n   esac"}, {"sha": "3ea2d4afc06e3edf4546cc96f677cac0744f3c9f", "filename": "libiberty/xmalloc.c", "status": "modified", "additions": 31, "deletions": 63, "changes": 94, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fxmalloc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d1209685fa061309f5f7ad73eb4fb5ef30b402d0/libiberty%2Fxmalloc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libiberty%2Fxmalloc.c?ref=d1209685fa061309f5f7ad73eb4fb5ef30b402d0", "patch": "@@ -64,6 +64,31 @@ xmalloc_set_program_name (s)\n #endif /* HAVE_SBRK */\n }\n \n+void\n+xmalloc_failed (size)\n+     size_t size;\n+{\n+#ifdef HAVE_SBRK\n+  extern char **environ;\n+  size_t allocated;\n+\n+  if (first_break != NULL)\n+    allocated = (char *) sbrk (0) - first_break;\n+  else\n+    allocated = (char *) sbrk (0) - (char *) &environ;\n+  fprintf (stderr,\n+\t   \"\\n%s%sCannot allocate %lu bytes after allocating %lu bytes\\n\",\n+\t   name, *name ? \": \" : \"\",\n+\t   (unsigned long) size, (unsigned long) allocated);\n+#else /* HAVE_SBRK */\n+  fprintf (stderr,\n+\t   \"\\n%s%sCannot allocate %lu bytes\\n\",\n+\t   name, *name ? \": \" : \"\",\n+\t   (unsigned long) size);\n+#endif /* HAVE_SBRK */\n+  xexit (1);\n+}  \n+\n PTR\n xmalloc (size)\n     size_t size;\n@@ -74,27 +99,8 @@ xmalloc (size)\n     size = 1;\n   newmem = malloc (size);\n   if (!newmem)\n-    {\n-#ifdef HAVE_SBRK\n-      extern char **environ;\n-      size_t allocated;\n-\n-      if (first_break != NULL)\n-\tallocated = (char *) sbrk (0) - first_break;\n-      else\n-\tallocated = (char *) sbrk (0) - (char *) &environ;\n-      fprintf (stderr,\n-\t       \"\\n%s%sCannot allocate %lu bytes after allocating %lu bytes\\n\",\n-\t       name, *name ? \": \" : \"\",\n-\t       (unsigned long) size, (unsigned long) allocated);\n-#else /* HAVE_SBRK */\n-      fprintf (stderr,\n-              \"\\n%s%sCannot allocate %lu bytes\\n\",\n-              name, *name ? \": \" : \"\",\n-              (unsigned long) size);\n-#endif /* HAVE_SBRK */\n-      xexit (1);\n-    }\n+    xmalloc_failed (size);\n+\n   return (newmem);\n }\n \n@@ -109,27 +115,8 @@ xcalloc (nelem, elsize)\n \n   newmem = calloc (nelem, elsize);\n   if (!newmem)\n-    {\n-#ifdef HAVE_SBRK\n-      extern char **environ;\n-      size_t allocated;\n-\n-      if (first_break != NULL)\n-\tallocated = (char *) sbrk (0) - first_break;\n-      else\n-\tallocated = (char *) sbrk (0) - (char *) &environ;\n-      fprintf (stderr,\n-\t       \"\\n%s%sCannot allocate %lu bytes after allocating %lu bytes\\n\",\n-\t       name, *name ? \": \" : \"\",\n-\t       (unsigned long) (nelem * elsize), (unsigned long) allocated);\n-#else /* HAVE_SBRK */\n-      fprintf (stderr,\n-              \"\\n%s%sCannot allocate %lu bytes\\n\",\n-              name, *name ? \": \" : \"\",\n-              (unsigned long) (nelem * elsize));\n-#endif /* HAVE_SBRK */\n-      xexit (1);\n-    }\n+    xmalloc_failed (nelem * elsize);\n+\n   return (newmem);\n }\n \n@@ -147,26 +134,7 @@ xrealloc (oldmem, size)\n   else\n     newmem = realloc (oldmem, size);\n   if (!newmem)\n-    {\n-#ifdef HAVE_SBRK\n-      extern char **environ;\n-      size_t allocated;\n-\n-      if (first_break != NULL)\n-\tallocated = (char *) sbrk (0) - first_break;\n-      else\n-\tallocated = (char *) sbrk (0) - (char *) &environ;\n-      fprintf (stderr,\n-\t       \"\\n%s%sCannot reallocate %lu bytes after allocating %lu bytes\\n\",\n-\t       name, *name ? \": \" : \"\",\n-\t       (unsigned long) size, (unsigned long) allocated);\n-#else /* HAVE_SBRK */\n-      fprintf (stderr,\n-              \"\\n%s%sCannot reallocate %lu bytes\\n\",\n-              name, *name ? \": \" : \"\",\n-              (unsigned long) size);\n-#endif /* HAVE_SBRK */\n-      xexit (1);\n-    }\n+    xmalloc_failed (size);\n+\n   return (newmem);\n }"}]}