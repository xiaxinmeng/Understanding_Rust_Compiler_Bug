{"sha": "26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjY4NjlmZGI0NzFlZThkMGZjZGNmM2QyN2Y1YWM1ZGJhZGM3YjVlMA==", "commit": {"author": {"name": "Pat Haugen", "email": "pthaugen@us.ibm.com", "date": "2016-05-24T22:24:16Z"}, "committer": {"name": "Pat Haugen", "email": "pthaugen@gcc.gnu.org", "date": "2016-05-24T22:24:16Z"}, "message": "lhs-1.c: Fix testcase to avoid subreg changes.\n\n\t* gcc.target/powerpc/lhs-1.c: Fix testcase to avoid subreg changes.\n\nFrom-SVN: r236672", "tree": {"sha": "ff6e357633468263bd228a4dc74dd9d866db2794", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ff6e357633468263bd228a4dc74dd9d866db2794"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0/comments", "author": null, "committer": null, "parents": [{"sha": "b2dc9c3b2012f7bf7bd3e69bac8ea2fd1c470975", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b2dc9c3b2012f7bf7bd3e69bac8ea2fd1c470975", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b2dc9c3b2012f7bf7bd3e69bac8ea2fd1c470975"}], "stats": {"total": 24, "additions": 11, "deletions": 13}, "files": [{"sha": "a2821a7c9c7aabd7cf0232150c5e616f1ea92fc0", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0", "patch": "@@ -1,3 +1,8 @@\n+2016-05-24  Pat Haugen  <pthaugen@us.ibm.com>\n+\n+\tPR target/71050\n+\t* gcc.target/powerpc/lhs-1.c: Fix testcase to avoid subreg changes.\n+\n 2016-05-24  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/50436"}, {"sha": "2979711e3925b01feac776ffe8269fac49f0d706", "filename": "gcc/testsuite/gcc.target/powerpc/lhs-1.c", "status": "modified", "additions": 6, "deletions": 13, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Flhs-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Flhs-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Flhs-1.c?ref=26869fdb471ee8d0fcdcf3d27f5ac5dbadc7b5e0", "patch": "@@ -4,19 +4,12 @@\n /* { dg-options \"-O2 -mcpu=power5\" } */\n /* { dg-final { scan-assembler-times \"nop\" 3 } } */\n \n-/* Test generation of nops in load hit store situation.  */\n+/* Test generation of nops in load hit store situation.  Make sure enough nop\n+   insns are generated to move the load to a new dispatch group.  With the\n+   simple stw/lwz pair below, that would be 3 nop insns for Power5.  */\n \n-typedef union {\n-  double val;\n-  struct {\n-    unsigned int w1;\n-    unsigned int w2;\n-  };\n-} words;\n-\n-unsigned int f (double d, words *u)\n+unsigned int f (volatile unsigned int *u, unsigned int u2)\n {\n-  u->val = d;\n-  return u->w2;\n+  *u = u2;\n+  return *u;\n }\n-"}]}