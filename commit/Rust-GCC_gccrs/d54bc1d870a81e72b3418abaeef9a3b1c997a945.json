{"sha": "d54bc1d870a81e72b3418abaeef9a3b1c997a945", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDU0YmMxZDg3MGE4MWU3MmIzNDE4YWJhZWVmOWEzYjFjOTk3YTk0NQ==", "commit": {"author": {"name": "Phil Edwards", "email": "phil@codesourcery.com", "date": "2004-03-19T11:34:47Z"}, "committer": {"name": "Phil Edwards", "email": "pme@gcc.gnu.org", "date": "2004-03-19T11:34:47Z"}, "message": "acinclude.m4 (GLIBCXX_CHECK_WCHAR_T_SUPPORT): Set LIBICONV, not libiconv.\n\n2004-03-19  Phil Edwards  <phil@codesourcery.com>\n\n\t* acinclude.m4 (GLIBCXX_CHECK_WCHAR_T_SUPPORT):  Set LIBICONV,\n\tnot libiconv.  SUBST this variable as well.\n\t* testsuite/Makefile.am (site.exp):  New target, based on that\n\tcreated by automake.  Also set libiconv.\n\n\t* configure, Makefile.in, include/Makefile.in, libmath/Makefile.in,\n\tlibsupc++/Makefile.in, po/Makefile.in, src/Makefile.in,\n\ttestsuite/Makefile.in:  Regenerate.\n\nFrom-SVN: r79678", "tree": {"sha": "05e016085db5fbc026e884949a40ffea756b57c4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/05e016085db5fbc026e884949a40ffea756b57c4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d54bc1d870a81e72b3418abaeef9a3b1c997a945", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54bc1d870a81e72b3418abaeef9a3b1c997a945", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d54bc1d870a81e72b3418abaeef9a3b1c997a945", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d54bc1d870a81e72b3418abaeef9a3b1c997a945/comments", "author": null, "committer": null, "parents": [{"sha": "dbee7ab93c2c22ce25aa38033073a437e787a96a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dbee7ab93c2c22ce25aa38033073a437e787a96a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dbee7ab93c2c22ce25aa38033073a437e787a96a"}], "stats": {"total": 2211, "additions": 797, "deletions": 1414}, "files": [{"sha": "0314acd6c699873edf1c7c0d9ed518d07bf63eb1", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -1,3 +1,14 @@\n+2004-03-19  Phil Edwards  <phil@codesourcery.com>\n+\n+\t* acinclude.m4 (GLIBCXX_CHECK_WCHAR_T_SUPPORT):  Set LIBICONV,\n+\tnot libiconv.  SUBST this variable as well.\n+\t* testsuite/Makefile.am (site.exp):  New target, based on that\n+\tcreated by automake.  Also set libiconv.\n+\n+\t* configure, Makefile.in, include/Makefile.in, libmath/Makefile.in,\n+\tlibsupc++/Makefile.in, po/Makefile.in, src/Makefile.in,\n+\ttestsuite/Makefile.in:  Regenerate.\n+\n 2004-03-16  Benjamin Kosnik  <bkoz@redhat.com>\n \n \t* acinclude.m4 (GLIBCXX_ENABLE_ALLOCATOR): Default setting is"}, {"sha": "051ace1e5869a99723cd82c426b4a3258afeee87", "filename": "libstdc++-v3/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -154,6 +154,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@"}, {"sha": "8be0e2557fff3b34d7fba30be16a56795a9629f2", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 5, "deletions": 2, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -336,6 +336,8 @@ dnl\n dnl Defines:\n dnl  HAVE_MBSTATE_T if mbstate_t is not in wchar.h\n dnl  _GLIBCXX_USE_WCHAR_T if all the bits are found.\n+dnl Substs:\n+dnl  LIBICONV to a -l string containing the iconv library, if needed.\n dnl\n AC_DEFUN([GLIBCXX_CHECK_WCHAR_T_SUPPORT], [\n   # Test wchar.h for mbstate_t, which is needed for char_traits and\n@@ -412,9 +414,10 @@ AC_DEFUN([GLIBCXX_CHECK_WCHAR_T_SUPPORT], [\n     AC_CHECK_HEADER(langinfo.h, ac_has_langinfo_h=yes, ac_has_langinfo_h=no)\n \n     # Check for existence of libiconv.a providing XPG2 wchar_t support.\n-    AC_CHECK_LIB(iconv, iconv, libiconv=\"-liconv\")\n+    AC_CHECK_LIB(iconv, iconv, LIBICONV=\"-liconv\")\n     ac_save_LIBS=\"$LIBS\"\n-    LIBS=\"$LIBS $libiconv\"\n+    LIBS=\"$LIBS $LIBICONV\"\n+    AC_SUBST(LIBICONV)\n \n     AC_CHECK_FUNCS([iconv_open iconv_close iconv nl_langinfo],\n     [ac_XPG2funcs=yes], [ac_XPG2funcs=no])"}, {"sha": "cc4d2d4b84ba9c84b9d9cc54b36f317b0222e615", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 722, "deletions": 1393, "changes": 2115, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945"}, {"sha": "7e9220db1404f6889c9388e80f854d8b89d75d03", "filename": "libstdc++-v3/include/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Finclude%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Finclude%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -122,6 +122,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@"}, {"sha": "7cf286f6050c9196b0bf076c7246130c10bbf80e", "filename": "libstdc++-v3/libmath/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Flibmath%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Flibmath%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibmath%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -139,6 +139,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@"}, {"sha": "8e03ed8fd30cab46076a14b14c59ab75d0730206", "filename": "libstdc++-v3/libsupc++/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Flibsupc%2B%2B%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -157,6 +157,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@"}, {"sha": "a3375354a27bfc971a5811ba97fdb538c42ef3af", "filename": "libstdc++-v3/po/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Fpo%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Fpo%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fpo%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -122,6 +122,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@"}, {"sha": "9c4f48330ca6c360fe23ef68bd41dcb027cf1672", "filename": "libstdc++-v3/src/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fsrc%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -150,6 +150,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@"}, {"sha": "0dffb3e82862b69569be130ce597f2f981b62bc1", "filename": "libstdc++-v3/testsuite/Makefile.am", "status": "modified", "additions": 26, "deletions": 0, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Ftestsuite%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Ftestsuite%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2FMakefile.am?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -69,6 +69,32 @@ else\n stamp_wchar:\n endif\n \n+# We need more things in site.exp, but automake completely controls the\n+# creation of that file; there's no way to append to it without messing up\n+# the dependancy chains.  So we overrule automake.  This rule is exactly\n+# what it would have generated, plus our own additions.\n+site.exp: Makefile\n+\t@echo 'Making a new site.exp file...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir $(srcdir)' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@echo 'set libiconv \"$(LIBICONV)\"' >>site.tmp\n+\t@echo '## All variables above are generated by configure. Do Not Edit ##' >>site.tmp\n+\t@test ! -f site.exp || \\\n+\t  sed '1,/^## All variables above are.*##/ d' site.exp >> site.tmp\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp\n+\n # This is automatically run after the generated check-DEJAGNU rule.\n check-local: check-abi\n "}, {"sha": "adc811611b2c03fa6f8f24a59463501a7b88429c", "filename": "libstdc++-v3/testsuite/Makefile.in", "status": "modified", "additions": 27, "deletions": 19, "changes": 46, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Ftestsuite%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d54bc1d870a81e72b3418abaeef9a3b1c997a945/libstdc%2B%2B-v3%2Ftestsuite%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2FMakefile.in?ref=d54bc1d870a81e72b3418abaeef9a3b1c997a945", "patch": "@@ -151,6 +151,7 @@ INSTALL_DATA = @INSTALL_DATA@\n INSTALL_PROGRAM = @INSTALL_PROGRAM@\n INSTALL_SCRIPT = @INSTALL_SCRIPT@\n INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@\n+LIBICONV = @LIBICONV@\n LIBMATHOBJS = @LIBMATHOBJS@\n LIBOBJS = @LIBOBJS@\n LIBS = @LIBS@\n@@ -435,25 +436,6 @@ check-DEJAGNU: site.exp\n \t  done; \\\n \telse echo \"WARNING: could not find \\`runtest'\" 1>&2; :;\\\n \tfi\n-site.exp: Makefile\n-\t@echo 'Making a new site.exp file...'\n-\t@echo '## these variables are automatically generated by make ##' >site.tmp\n-\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n-\t@echo '# edit the last section' >>site.tmp\n-\t@echo 'set srcdir $(srcdir)' >>site.tmp\n-\t@echo \"set objdir `pwd`\" >>site.tmp\n-\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n-\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n-\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n-\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n-\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n-\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n-\t@echo '## All variables above are generated by configure. Do Not Edit ##' >>site.tmp\n-\t@test ! -f site.exp || \\\n-\t  sed '1,/^## All variables above are.*##/ d' site.exp >> site.tmp\n-\t@-rm -f site.bak\n-\t@test ! -f site.exp || mv site.exp site.bak\n-\t@mv site.tmp site.exp\n \n distclean-DEJAGNU:\n \t-rm -f site.exp site.bak\n@@ -589,6 +571,32 @@ all-local: stamp_wchar testsuite_files\n @GLIBCXX_TEST_WCHAR_T_TRUE@\ttouch testsuite_wchar_t\n @GLIBCXX_TEST_WCHAR_T_FALSE@stamp_wchar:\n \n+# We need more things in site.exp, but automake completely controls the\n+# creation of that file; there's no way to append to it without messing up\n+# the dependancy chains.  So we overrule automake.  This rule is exactly\n+# what it would have generated, plus our own additions.\n+site.exp: Makefile\n+\t@echo 'Making a new site.exp file...'\n+\t@echo '## these variables are automatically generated by make ##' >site.tmp\n+\t@echo '# Do not edit here.  If you wish to override these values' >>site.tmp\n+\t@echo '# edit the last section' >>site.tmp\n+\t@echo 'set srcdir $(srcdir)' >>site.tmp\n+\t@echo \"set objdir `pwd`\" >>site.tmp\n+\t@echo 'set build_alias \"$(build_alias)\"' >>site.tmp\n+\t@echo 'set build_triplet $(build_triplet)' >>site.tmp\n+\t@echo 'set host_alias \"$(host_alias)\"' >>site.tmp\n+\t@echo 'set host_triplet $(host_triplet)' >>site.tmp\n+\t@echo 'set target_alias \"$(target_alias)\"' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@echo 'set target_triplet $(target_triplet)' >>site.tmp\n+\t@echo 'set libiconv \"$(LIBICONV)\"' >>site.tmp\n+\t@echo '## All variables above are generated by configure. Do Not Edit ##' >>site.tmp\n+\t@test ! -f site.exp || \\\n+\t  sed '1,/^## All variables above are.*##/ d' site.exp >> site.tmp\n+\t@-rm -f site.bak\n+\t@test ! -f site.exp || mv site.exp site.bak\n+\t@mv site.tmp site.exp\n+\n # This is automatically run after the generated check-DEJAGNU rule.\n check-local: check-abi\n "}]}