{"sha": "f2b5129c6db6f547864adbe32d84d401603845e1", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjJiNTEyOWM2ZGI2ZjU0Nzg2NGFkYmUzMmQ4NGQ0MDE2MDM4NDVlMQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@codesourcery.com", "date": "2006-02-28T00:41:19Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "2006-02-28T00:41:19Z"}, "message": "re PR other/26473 (cross-building installs ssp headers to $(includedir))\n\n\tPR 26473\n\t* configure.ac (ACX_NONCANONICAL_TARGET): Use it.\n\t* Makefile.am (target_noncanonical): Define.\n\t(libsubincludedir): New variable.\n\t(nobase_libsubinclude_HEADERS): Likewise.\n\t(nobase_include_HEADERS): Remove.\n\t* configure: Regenerated.\n\t* Makefile.in: Likewise.\n\t* aclocal.m4: Regenerated.\n\nFrom-SVN: r111501", "tree": {"sha": "dd78262824851423ed9e782410f3e8265785172c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd78262824851423ed9e782410f3e8265785172c"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f2b5129c6db6f547864adbe32d84d401603845e1", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2b5129c6db6f547864adbe32d84d401603845e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f2b5129c6db6f547864adbe32d84d401603845e1", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f2b5129c6db6f547864adbe32d84d401603845e1/comments", "author": null, "committer": null, "parents": [{"sha": "36b2c8f2ceffab30c6d3e271df7c79d24b7f34db", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36b2c8f2ceffab30c6d3e271df7c79d24b7f34db", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36b2c8f2ceffab30c6d3e271df7c79d24b7f34db"}], "stats": {"total": 86, "additions": 62, "deletions": 24}, "files": [{"sha": "d01d6879f6921030f457511115edf040221f2c40", "filename": "libssp/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2FChangeLog?ref=f2b5129c6db6f547864adbe32d84d401603845e1", "patch": "@@ -1,3 +1,15 @@\n+2006-02-27  Mark Mitchell  <mark@codesourcery.com>\n+\t\n+\tPR 26473\n+\t* configure.ac (ACX_NONCANONICAL_TARGET): Use it.\n+\t* Makefile.am (target_noncanonical): Define.\n+\t(libsubincludedir): New variable.\n+\t(nobase_libsubinclude_HEADERS): Likewise.\n+\t(nobase_include_HEADERS): Remove.\n+\t* configure: Regenerated.\n+\t* Makefile.in: Likewise.\n+\t* aclocal.m4: Regenerated.\n+\n 2006-01-20  Richard Guenther  <rguenther@suse.de>\n \n \t* configure.ac: Use -fPIC for symbol versioning test."}, {"sha": "1500e251269bbc3655a9f1f2c871e91b5124b4e7", "filename": "libssp/Makefile.am", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2FMakefile.am?ref=f2b5129c6db6f547864adbe32d84d401603845e1", "patch": "@@ -23,7 +23,9 @@ AM_CFLAGS = -Wall\n \n toolexeclib_LTLIBRARIES = libssp.la libssp_nonshared.la\n \n-nobase_include_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h\n+target_noncanonical = @target_noncanonical@\n+libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)/include\n+nobase_libsubinclude_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h\n \n libssp_la_SOURCES = \\\n \tssp.c gets-chk.c memcpy-chk.c memmove-chk.c mempcpy-chk.c \\"}, {"sha": "8dfa8f4fe665027fa8193888aa83de6b7a86f14c", "filename": "libssp/Makefile.in", "status": "modified", "additions": 23, "deletions": 20, "changes": 43, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2FMakefile.in?ref=f2b5129c6db6f547864adbe32d84d401603845e1", "patch": "@@ -40,7 +40,7 @@ POST_UNINSTALL = :\n build_triplet = @build@\n host_triplet = @host@\n target_triplet = @target@\n-DIST_COMMON = $(am__configure_deps) $(nobase_include_HEADERS) \\\n+DIST_COMMON = $(am__configure_deps) $(nobase_libsubinclude_HEADERS) \\\n \t$(srcdir)/../compile $(srcdir)/../config.guess \\\n \t$(srcdir)/../config.sub $(srcdir)/../depcomp \\\n \t$(srcdir)/../install-sh $(srcdir)/../ltmain.sh \\\n@@ -50,7 +50,8 @@ DIST_COMMON = $(am__configure_deps) $(nobase_include_HEADERS) \\\n \t$(top_srcdir)/ssp/ssp.h.in ChangeLog\n subdir = .\n ACLOCAL_M4 = $(top_srcdir)/aclocal.m4\n-am__aclocal_m4_deps = $(top_srcdir)/../config/depstand.m4 \\\n+am__aclocal_m4_deps = $(top_srcdir)/../config/acx.m4 \\\n+\t$(top_srcdir)/../config/depstand.m4 \\\n \t$(top_srcdir)/../config/lead-dot.m4 \\\n \t$(top_srcdir)/../libtool.m4 $(top_srcdir)/configure.ac\n am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \\\n@@ -67,7 +68,7 @@ am__vpath_adj = case $$p in \\\n   esac;\n am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;\n am__installdirs = \"$(DESTDIR)$(toolexeclibdir)\" \\\n-\t\"$(DESTDIR)$(includedir)\"\n+\t\"$(DESTDIR)$(libsubincludedir)\"\n toolexeclibLTLIBRARIES_INSTALL = $(INSTALL)\n LTLIBRARIES = $(toolexeclib_LTLIBRARIES)\n am_libssp_la_OBJECTS = ssp.lo gets-chk.lo memcpy-chk.lo memmove-chk.lo \\\n@@ -96,8 +97,8 @@ MULTIDIRS =\n MULTISUBDIR = \n MULTIDO = true\n MULTICLEAN = true\n-nobase_includeHEADERS_INSTALL = $(install_sh_DATA)\n-HEADERS = $(nobase_include_HEADERS)\n+nobase_libsubincludeHEADERS_INSTALL = $(install_sh_DATA)\n+HEADERS = $(nobase_libsubinclude_HEADERS)\n ETAGS = etags\n CTAGS = ctags\n DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)\n@@ -204,6 +205,7 @@ sysconfdir = @sysconfdir@\n target = @target@\n target_alias = @target_alias@\n target_cpu = @target_cpu@\n+target_noncanonical = @target_noncanonical@\n target_os = @target_os@\n target_vendor = @target_vendor@\n toolexecdir = @toolexecdir@\n@@ -220,7 +222,8 @@ gcc_version := $(shell cat $(top_srcdir)/../gcc/BASE-VER)\n @LIBSSP_USE_SYMVER_TRUE@version_dep = $(srcdir)/ssp.map\n AM_CFLAGS = -Wall\n toolexeclib_LTLIBRARIES = libssp.la libssp_nonshared.la\n-nobase_include_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h\n+libsubincludedir = $(libdir)/gcc/$(target_noncanonical)/$(gcc_version)/include\n+nobase_libsubinclude_HEADERS = ssp/ssp.h ssp/string.h ssp/stdio.h ssp/unistd.h\n libssp_la_SOURCES = \\\n \tssp.c gets-chk.c memcpy-chk.c memmove-chk.c mempcpy-chk.c \\\n \tmemset-chk.c snprintf-chk.c sprintf-chk.c stpcpy-chk.c \\\n@@ -450,24 +453,24 @@ distclean-multi:\n maintainer-clean-multi:\n \t$(MULTICLEAN) $(AM_MAKEFLAGS) DO=maintainer-clean multi-clean # $(MAKE)\n uninstall-info-am:\n-install-nobase_includeHEADERS: $(nobase_include_HEADERS)\n+install-nobase_libsubincludeHEADERS: $(nobase_libsubinclude_HEADERS)\n \t@$(NORMAL_INSTALL)\n-\ttest -z \"$(includedir)\" || $(mkdir_p) \"$(DESTDIR)$(includedir)\"\n+\ttest -z \"$(libsubincludedir)\" || $(mkdir_p) \"$(DESTDIR)$(libsubincludedir)\"\n \t@$(am__vpath_adj_setup) \\\n-\tlist='$(nobase_include_HEADERS)'; for p in $$list; do \\\n+\tlist='$(nobase_libsubinclude_HEADERS)'; for p in $$list; do \\\n \t  if test -f \"$$p\"; then d=; else d=\"$(srcdir)/\"; fi; \\\n \t  $(am__vpath_adj) \\\n-\t  echo \" $(nobase_includeHEADERS_INSTALL) '$$d$$p' '$(DESTDIR)$(includedir)/$$f'\"; \\\n-\t  $(nobase_includeHEADERS_INSTALL) \"$$d$$p\" \"$(DESTDIR)$(includedir)/$$f\"; \\\n+\t  echo \" $(nobase_libsubincludeHEADERS_INSTALL) '$$d$$p' '$(DESTDIR)$(libsubincludedir)/$$f'\"; \\\n+\t  $(nobase_libsubincludeHEADERS_INSTALL) \"$$d$$p\" \"$(DESTDIR)$(libsubincludedir)/$$f\"; \\\n \tdone\n \n-uninstall-nobase_includeHEADERS:\n+uninstall-nobase_libsubincludeHEADERS:\n \t@$(NORMAL_UNINSTALL)\n \t@$(am__vpath_adj_setup) \\\n-\tlist='$(nobase_include_HEADERS)'; for p in $$list; do \\\n+\tlist='$(nobase_libsubinclude_HEADERS)'; for p in $$list; do \\\n \t  $(am__vpath_adj) \\\n-\t  echo \" rm -f '$(DESTDIR)$(includedir)/$$f'\"; \\\n-\t  rm -f \"$(DESTDIR)$(includedir)/$$f\"; \\\n+\t  echo \" rm -f '$(DESTDIR)$(libsubincludedir)/$$f'\"; \\\n+\t  rm -f \"$(DESTDIR)$(libsubincludedir)/$$f\"; \\\n \tdone\n \n ID: $(HEADERS) $(SOURCES) $(LISP) $(TAGS_FILES)\n@@ -649,7 +652,7 @@ check-am: all-am\n check: check-am\n all-am: Makefile $(LTLIBRARIES) all-multi $(HEADERS) config.h\n installdirs:\n-\tfor dir in \"$(DESTDIR)$(toolexeclibdir)\" \"$(DESTDIR)$(includedir)\"; do \\\n+\tfor dir in \"$(DESTDIR)$(toolexeclibdir)\" \"$(DESTDIR)$(libsubincludedir)\"; do \\\n \t  test -z \"$$dir\" || $(mkdir_p) \"$$dir\"; \\\n \tdone\n install: install-am\n@@ -698,7 +701,7 @@ info: info-am\n \n info-am:\n \n-install-data-am: install-nobase_includeHEADERS\n+install-data-am: install-nobase_libsubincludeHEADERS\n \n install-exec-am: install-multi install-toolexeclibLTLIBRARIES\n \n@@ -728,7 +731,7 @@ ps: ps-am\n \n ps-am:\n \n-uninstall-am: uninstall-info-am uninstall-nobase_includeHEADERS \\\n+uninstall-am: uninstall-info-am uninstall-nobase_libsubincludeHEADERS \\\n \tuninstall-toolexeclibLTLIBRARIES\n \n .PHONY: CTAGS GTAGS all all-am all-multi am--refresh check check-am \\\n@@ -741,13 +744,13 @@ uninstall-am: uninstall-info-am uninstall-nobase_includeHEADERS \\\n \thtml-am info info-am install install-am install-data \\\n \tinstall-data-am install-exec install-exec-am install-info \\\n \tinstall-info-am install-man install-multi \\\n-\tinstall-nobase_includeHEADERS install-strip \\\n+\tinstall-nobase_libsubincludeHEADERS install-strip \\\n \tinstall-toolexeclibLTLIBRARIES installcheck installcheck-am \\\n \tinstalldirs maintainer-clean maintainer-clean-generic \\\n \tmaintainer-clean-multi mostlyclean mostlyclean-compile \\\n \tmostlyclean-generic mostlyclean-libtool mostlyclean-multi pdf \\\n \tpdf-am ps ps-am tags uninstall uninstall-am uninstall-info-am \\\n-\tuninstall-nobase_includeHEADERS \\\n+\tuninstall-nobase_libsubincludeHEADERS \\\n \tuninstall-toolexeclibLTLIBRARIES\n \n # Tell versions [3.59,3.63) of GNU make to not export all variables."}, {"sha": "576735e1b476eedeb57316f1cf204ddf4be99a73", "filename": "libssp/aclocal.m4", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2Faclocal.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2Faclocal.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2Faclocal.m4?ref=f2b5129c6db6f547864adbe32d84d401603845e1", "patch": "@@ -914,6 +914,7 @@ AC_SUBST([am__tar])\n AC_SUBST([am__untar])\n ]) # _AM_PROG_TAR\n \n+m4_include([../config/acx.m4])\n m4_include([../config/depstand.m4])\n m4_include([../config/lead-dot.m4])\n m4_include([../libtool.m4])"}, {"sha": "a892313b8eb051f15318d1c8f4a60cc49a6f6f9a", "filename": "libssp/configure", "status": "modified", "additions": 20, "deletions": 2, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2Fconfigure?ref=f2b5129c6db6f547864adbe32d84d401603845e1", "patch": "@@ -309,7 +309,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT multi_basedir CC ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CFLAGS CPP CPPFLAGS LIBSSP_USE_SYMVER_TRUE LIBSSP_USE_SYMVER_FALSE EGREP ssp_have_usable_vsnprintf LN_S RANLIB ac_ct_RANLIB LIBTOOL enable_shared enable_static toolexecdir toolexeclibdir LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os target_noncanonical INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar MAINTAINER_MODE_TRUE MAINTAINER_MODE_FALSE MAINT multi_basedir CC ac_ct_CC EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE CFLAGS CPP CPPFLAGS LIBSSP_USE_SYMVER_TRUE LIBSSP_USE_SYMVER_FALSE EGREP ssp_have_usable_vsnprintf LN_S RANLIB ac_ct_RANLIB LIBTOOL enable_shared enable_static toolexecdir toolexeclibdir LIBOBJS LTLIBOBJS'\n ac_subst_files=''\n \n # Initialize some variables set by options.\n@@ -1422,6 +1422,23 @@ test -n \"$target_alias\" &&\n   test \"$program_prefix$program_suffix$program_transform_name\" = \\\n     NONENONEs,x,x, &&\n   program_prefix=${target_alias}-\n+ case ${build_alias} in\n+  \"\") build_noncanonical=${build} ;;\n+  *) build_noncanonical=${build_alias} ;;\n+esac\n+\n+ case ${host_alias} in\n+  \"\") host_noncanonical=${build_noncanonical} ;;\n+  *) host_noncanonical=${host_alias} ;;\n+esac\n+\n+ case ${target_alias} in\n+  \"\") target_noncanonical=${host_noncanonical} ;;\n+  *) target_noncanonical=${target_alias} ;;\n+esac\n+\n+\n+\n \n am__api_version=\"1.9\"\n # Find a good install program.  We prefer a C program (faster),\n@@ -4847,7 +4864,7 @@ test x\"$pic_mode\" = xno && libtool_flags=\"$libtool_flags --prefer-non-pic\"\n case $host in\n *-*-irix6*)\n   # Find out which ABI we are using.\n-  echo '#line 4850 \"configure\"' > conftest.$ac_ext\n+  echo '#line 4867 \"configure\"' > conftest.$ac_ext\n   if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   (eval $ac_compile) 2>&5\n   ac_status=$?\n@@ -5850,6 +5867,7 @@ s,@target@,$target,;t t\n s,@target_cpu@,$target_cpu,;t t\n s,@target_vendor@,$target_vendor,;t t\n s,@target_os@,$target_os,;t t\n+s,@target_noncanonical@,$target_noncanonical,;t t\n s,@INSTALL_PROGRAM@,$INSTALL_PROGRAM,;t t\n s,@INSTALL_SCRIPT@,$INSTALL_SCRIPT,;t t\n s,@INSTALL_DATA@,$INSTALL_DATA,;t t"}, {"sha": "f8ed70c510506eeefad02e2676538da399496416", "filename": "libssp/configure.ac", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f2b5129c6db6f547864adbe32d84d401603845e1/libssp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libssp%2Fconfigure.ac?ref=f2b5129c6db6f547864adbe32d84d401603845e1", "patch": "@@ -1,10 +1,12 @@\n # Process this file with autoconf to produce a configure script, like so:\n-# aclocal && autoconf && autoheader && automake\n+# \n+# aclocal -I .. -I ../config && autoconf && autoheader && automake\n \n AC_PREREQ(2.59)\n AC_INIT(libssp, 1.0)\n AC_CONFIG_SRCDIR(ssp.c)\n AC_CANONICAL_SYSTEM\n+ACX_NONCANONICAL_TARGET\n \n AM_INIT_AUTOMAKE\n "}]}