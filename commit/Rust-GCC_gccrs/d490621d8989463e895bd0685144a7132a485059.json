{"sha": "d490621d8989463e895bd0685144a7132a485059", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDQ5MDYyMWQ4OTg5NDYzZTg5NWJkMDY4NTE0NGE3MTMyYTQ4NTA1OQ==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1999-01-15T18:34:48Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1999-01-15T18:34:48Z"}, "message": "pt.c (process_template_parm): Ignore top-level qualifiers on non-type parameters.\n\n\t* pt.c (process_template_parm): Ignore top-level qualifiers on\n\tnon-type parameters.\n\t* decl.c (start_function): Use current_function_parms in the call\n\tto require_complete_type_for_parms, not the probably empty\n\tDECL_ARGUMENTS.\n\nFrom-SVN: r24684", "tree": {"sha": "76132e5f3be5666e5b87fdfa8a4787b6f33f4139", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/76132e5f3be5666e5b87fdfa8a4787b6f33f4139"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d490621d8989463e895bd0685144a7132a485059", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d490621d8989463e895bd0685144a7132a485059", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d490621d8989463e895bd0685144a7132a485059", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d490621d8989463e895bd0685144a7132a485059/comments", "author": null, "committer": null, "parents": [{"sha": "1e75bc3481e7baf4e7f2b588950953d9fed16a24", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1e75bc3481e7baf4e7f2b588950953d9fed16a24", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1e75bc3481e7baf4e7f2b588950953d9fed16a24"}], "stats": {"total": 40, "additions": 38, "deletions": 2}, "files": [{"sha": "c0daba4189e2abbe4177ea0f20826647d2772a62", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d490621d8989463e895bd0685144a7132a485059/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d490621d8989463e895bd0685144a7132a485059/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=d490621d8989463e895bd0685144a7132a485059", "patch": "@@ -1,3 +1,12 @@\n+1999-01-15  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* pt.c (process_template_parm): Ignore top-level qualifiers on\n+\tnon-type parameters.\n+\n+\t* decl.c (start_function): Use current_function_parms in the call\n+\tto require_complete_type_for_parms, not the probably empty\n+\tDECL_ARGUMENTS.\n+\n 1999-01-14  Jason Merrill  <jason@yorick.cygnus.com>\n \n \t* semantics.c (finish_asm_stmt): Don't warn about redundant volatile."}, {"sha": "5e603b6d4804644b0534ee36851e726726daf7be", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d490621d8989463e895bd0685144a7132a485059/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d490621d8989463e895bd0685144a7132a485059/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=d490621d8989463e895bd0685144a7132a485059", "patch": "@@ -12860,8 +12860,8 @@ start_function (declspecs, declarator, attrs, pre_parsed_p)\n \n   if (! processing_template_decl)\n     {\n-      /* In a fcn definition, arg types must be complete.  */\n-      require_complete_types_for_parms (DECL_ARGUMENTS (decl1));\n+      /* In a function definition, arg types must be complete.  */\n+      require_complete_types_for_parms (current_function_parms);\n \n       if (TYPE_SIZE (complete_type (TREE_TYPE (fntype))) == NULL_TREE)\n \t{"}, {"sha": "a28751b0386831079d5bfde37d784175950757e0", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d490621d8989463e895bd0685144a7132a485059/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d490621d8989463e895bd0685144a7132a485059/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=d490621d8989463e895bd0685144a7132a485059", "patch": "@@ -1591,6 +1591,13 @@ process_template_parm (list, next)\n       /* is a const-param */\n       parm = grokdeclarator (TREE_VALUE (parm), TREE_PURPOSE (parm),\n \t\t\t     PARM, 0, NULL_TREE);\n+\n+      /* [temp.param]\n+\n+\t The top-level cv-qualifiers on the template-parameter are\n+\t ignored when determining its type.  */\n+      TREE_TYPE (parm) = TYPE_MAIN_VARIANT (TREE_TYPE (parm));\n+\n       /* A template parameter is not modifiable.  */\n       TREE_READONLY (parm) = 1;\n       if (IS_AGGR_TYPE (TREE_TYPE (parm))"}, {"sha": "0c230c18777cde14d2bb6495f35ef331806ef5f6", "filename": "gcc/testsuite/g++.old-deja/g++.other/incomplete.C", "status": "added", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d490621d8989463e895bd0685144a7132a485059/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fincomplete.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d490621d8989463e895bd0685144a7132a485059/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fincomplete.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fincomplete.C?ref=d490621d8989463e895bd0685144a7132a485059", "patch": "@@ -0,0 +1,5 @@\n+// Build don't link:\n+\n+struct S;\n+\n+void f(S s) {} // ERROR - incomplete type"}, {"sha": "d2101bd3b63209c7a107fa503887303c769d61d7", "filename": "gcc/testsuite/g++.old-deja/g++.pt/crash26.C", "status": "added", "additions": 15, "deletions": 0, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d490621d8989463e895bd0685144a7132a485059/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash26.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d490621d8989463e895bd0685144a7132a485059/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash26.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.pt%2Fcrash26.C?ref=d490621d8989463e895bd0685144a7132a485059", "patch": "@@ -0,0 +1,15 @@\n+// Build don't link:\n+// Origin: Theodore Papadopoulo <Theodore.Papadopoulo@sophia.inria.fr>\n+\n+double f(double);\n+typedef double (*M)(double);\n+\n+class A {\n+public:\n+\ttemplate <const M n> void g(); \n+};\n+\n+class B: public A {\n+public:\n+\tvoid g() { A::g<f>(); }\n+};"}]}