{"sha": "2d9c5743d6e8b054b7fbbc8a881c94b45b12053f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmQ5YzU3NDNkNmU4YjA1NGI3ZmJiYzhhODgxYzk0YjQ1YjEyMDUzZg==", "commit": {"author": {"name": "Alan Modra", "email": "amodra@bigpond.net.au", "date": "2005-08-25T00:54:54Z"}, "committer": {"name": "Alan Modra", "email": "amodra@gcc.gnu.org", "date": "2005-08-25T00:54:54Z"}, "message": "re PR target/23404 (gij trashes args of functions with more than 8 fp args)\n\n\tPR target/23404\n\t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Correct placement of stack\n\thomed fp args.\n\t(ffi_status ffi_prep_cif_machdep): Correct stack sizing for same.\n\nFrom-SVN: r103462", "tree": {"sha": "502e280b7eb2fda62c32917c5855be5aa668c880", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/502e280b7eb2fda62c32917c5855be5aa668c880"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f/comments", "author": null, "committer": null, "parents": [{"sha": "91432782c4aff15c1faeede2deffdc624696fff9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91432782c4aff15c1faeede2deffdc624696fff9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91432782c4aff15c1faeede2deffdc624696fff9"}], "stats": {"total": 13, "additions": 11, "deletions": 2}, "files": [{"sha": "fd61c4b80d6e8ce9548f687ab8065c9093e86707", "filename": "libffi/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f/libffi%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f/libffi%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2FChangeLog?ref=2d9c5743d6e8b054b7fbbc8a881c94b45b12053f", "patch": "@@ -1,3 +1,10 @@\n+2005-08-25  Alan Modra  <amodra@bigpond.net.au>\n+\n+\tPR target/23404\n+\t* src/powerpc/ffi.c (ffi_prep_args_SYSV): Correct placement of stack\n+\thomed fp args.\n+\t(ffi_status ffi_prep_cif_machdep): Correct stack sizing for same.\n+\n 2005-08-11  Jakub Jelinek  <jakub@redhat.com>\n \n \t* configure.ac (HAVE_HIDDEN_VISIBILITY_ATTRIBUTE): New test."}, {"sha": "cc410bc6bdc93e1dee9f6f179b27d14c082c652b", "filename": "libffi/src/powerpc/ffi.c", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2d9c5743d6e8b054b7fbbc8a881c94b45b12053f/libffi%2Fsrc%2Fpowerpc%2Fffi.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libffi%2Fsrc%2Fpowerpc%2Fffi.c?ref=2d9c5743d6e8b054b7fbbc8a881c94b45b12053f", "patch": "@@ -155,7 +155,8 @@ void ffi_prep_args_SYSV(extended_cif *ecif, unsigned *const stack)\n \n \t  if (fparg_count >= NUM_FPR_ARG_REGISTERS)\n \t    {\n-\t      if (intarg_count%2 != 0)\n+\t      if (intarg_count >= NUM_GPR_ARG_REGISTERS\n+\t\t  && intarg_count % 2 != 0)\n \t\t{\n \t\t  intarg_count++;\n \t\t  next_arg++;\n@@ -575,7 +576,8 @@ ffi_status ffi_prep_cif_machdep(ffi_cif *cif)\n \t    /* If this FP arg is going on the stack, it must be\n \t       8-byte-aligned.  */\n \t    if (fparg_count > NUM_FPR_ARG_REGISTERS\n-\t\t&& intarg_count%2 != 0)\n+\t\t&& intarg_count >= NUM_GPR_ARG_REGISTERS\n+\t\t&& intarg_count % 2 != 0)\n \t      intarg_count++;\n \t    break;\n "}]}