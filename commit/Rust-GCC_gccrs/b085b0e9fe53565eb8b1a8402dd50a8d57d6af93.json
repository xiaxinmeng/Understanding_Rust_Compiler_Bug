{"sha": "b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA4NWIwZTlmZTUzNTY1ZWI4YjFhODQwMmRkNTBhOGQ1N2Q2YWY5Mw==", "commit": {"author": {"name": "Tom de Vries", "email": "tom@codesourcery.com", "date": "2014-08-04T08:29:59Z"}, "committer": {"name": "Tom de Vries", "email": "vries@gcc.gnu.org", "date": "2014-08-04T08:29:59Z"}, "message": "For cproj test-case, use glibc version xfail\n\n2014-08-04  Tom de Vries  <tom@codesourcery.com>\n\n\t* gcc.dg/cproj-fails-with-broken-glibc.c: Use xfail for broken glibc\n\tversion instead of required-target.\n\t* lib/target-supports.exp\n\t(check_effective_target_not_glibc_2_11_or_earlier): Replace by ...\n\t(check_effective_target_glibc_2_11_or_earlier): ... this.\n\n\t* doc/sourcebuild.texi (glibc, glibc_2_12_or_later)\n\t(glibc_2_11_or_earlier): Document effective-target keywords.\n\nFrom-SVN: r213543", "tree": {"sha": "e791d0d1c2e3bd5028f4289b0da011759c2ea73f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e791d0d1c2e3bd5028f4289b0da011759c2ea73f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/comments", "author": null, "committer": null, "parents": [{"sha": "dfaff97b614755b2ac6787c541af837f200d274b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dfaff97b614755b2ac6787c541af837f200d274b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dfaff97b614755b2ac6787c541af837f200d274b"}], "stats": {"total": 33, "additions": 27, "deletions": 6}, "files": [{"sha": "67957ea812f446423ee8915d31ef0ed0c44c3bbe", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "patch": "@@ -1,3 +1,8 @@\n+2014-08-04  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* doc/sourcebuild.texi (glibc, glibc_2_12_or_later)\n+\t(glibc_2_11_or_earlier): Document effective-target keywords.\n+\n 2014-08-01  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* ipa-devirt.c (odr_type_warn_count): Add type."}, {"sha": "0793f80d3e183b9399ea2ba61fc66a7a78313c96", "filename": "gcc/doc/sourcebuild.texi", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Fdoc%2Fsourcebuild.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Fdoc%2Fsourcebuild.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Fsourcebuild.texi?ref=b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "patch": "@@ -1804,6 +1804,15 @@ Target is a VxWorks RTP.\n \n @item wchar\n Target supports wide characters.\n+\n+@item glibc\n+Target supports glibc\n+\n+@item glibc_2_12_or_later\n+Target supports glibc 2.12 or later\n+\n+@item glibc_2_11_or_earlier\n+Target supports glibc 2.11 or earlier\n @end table\n \n @subsubsection Other attributes"}, {"sha": "b02eaf4b62dcea344de224371611a2d31fc94297", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "patch": "@@ -1,3 +1,11 @@\n+2014-08-04  Tom de Vries  <tom@codesourcery.com>\n+\n+\t* gcc.dg/cproj-fails-with-broken-glibc.c: Use xfail for broken glibc\n+\tversion instead of required-target.\n+\t* lib/target-supports.exp\n+\t(check_effective_target_not_glibc_2_11_or_earlier): Replace by ...\n+\t(check_effective_target_glibc_2_11_or_earlier): ... this.\n+\n 2014-08-04  Arnaud Charlet  <charlet@adacore.com>\n \n \t* gnat.dg/discr6.adb, gnat.dg/discr6_pkg.ads: Removed, no longer"}, {"sha": "fc37faca225e84f824a95466e611166248285148", "filename": "gcc/testsuite/gcc.dg/cproj-fails-with-broken-glibc.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Ftestsuite%2Fgcc.dg%2Fcproj-fails-with-broken-glibc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Ftestsuite%2Fgcc.dg%2Fcproj-fails-with-broken-glibc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fcproj-fails-with-broken-glibc.c?ref=b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "patch": "@@ -7,11 +7,10 @@\n \n    Origin: Kaveh R. Ghazi,  April 20, 2010.  */\n \n-/* { dg-do run } */\n+/* { dg-do run { xfail glibc_2_11_or_earlier } } */\n /* { dg-options \"-fno-builtin-cproj\" } */\n /* { dg-add-options c99_runtime } */\n /* { dg-require-effective-target c99_runtime } */\n-/* { dg-require-effective-target not_glibc_2_11_or_earlier } */\n \n extern void abort(void);\n extern void exit(int);"}, {"sha": "7157d2a61382b1541cf55663e873879176abd01d", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b085b0e9fe53565eb8b1a8402dd50a8d57d6af93/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=b085b0e9fe53565eb8b1a8402dd50a8d57d6af93", "patch": "@@ -5061,19 +5061,19 @@ proc check_effective_target_glibc_2_12_or_later {} {\n     }]\n }\n \n-# Return true if this is a not a glibc 2.11 or earlier target.\n+# Return true if this is a glibc 2.11 or earlier target.\n \n-proc check_effective_target_not_glibc_2_11_or_earlier {} {\n+proc check_effective_target_glibc_2_11_or_earlier {} {\n \n     if { ![check_effective_target_glibc] } {\n \treturn 1\n     }\n     \n     if { [check_effective_target_glibc_2_12_or_later] } {\n-\treturn 1\n+\treturn 0\n     }\n \n-    return 0\n+    return 1\n }\n \n # Return true if this is NOT a Bionic target."}]}