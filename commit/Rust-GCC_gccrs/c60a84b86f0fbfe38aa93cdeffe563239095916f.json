{"sha": "c60a84b86f0fbfe38aa93cdeffe563239095916f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzYwYTg0Yjg2ZjBmYmZlMzhhYTkzY2RlZmZlNTYzMjM5MDk1OTE2Zg==", "commit": {"author": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-04-07T20:18:17Z"}, "committer": {"name": "Paul Thomas", "email": "pault@gcc.gnu.org", "date": "2007-04-07T20:18:17Z"}, "message": "re PR fortran/31214 (User-defined operator using entry leads to ICE)\n\n2007-04-07  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/31214\n\t* trans-decl.c (gfc_get_symbol_decl): Allow unreferenced use\n\tassociated symbols.\n\n2007-04-07  Paul Thomas  <pault@gcc.gnu.org>\n\n\tPR fortran/31424\n\t* gfortran.dg/unreferenced_use_assoc_1.f90: New test.\n\nFrom-SVN: r123642", "tree": {"sha": "b6ec665721fde1724f006a43410149ae5b59facf", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6ec665721fde1724f006a43410149ae5b59facf"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c60a84b86f0fbfe38aa93cdeffe563239095916f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c60a84b86f0fbfe38aa93cdeffe563239095916f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c60a84b86f0fbfe38aa93cdeffe563239095916f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c60a84b86f0fbfe38aa93cdeffe563239095916f/comments", "author": null, "committer": null, "parents": [{"sha": "e9bd9f7d5db94db21cdd566e9e00f851563edc97", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e9bd9f7d5db94db21cdd566e9e00f851563edc97", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e9bd9f7d5db94db21cdd566e9e00f851563edc97"}], "stats": {"total": 54, "additions": 53, "deletions": 1}, "files": [{"sha": "2079580daa7d2877c1a1167ac900f22dfcb6115b", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=c60a84b86f0fbfe38aa93cdeffe563239095916f", "patch": "@@ -1,3 +1,9 @@\n+2007-04-07  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/31214\n+\t* trans-decl.c (gfc_get_symbol_decl): Allow unreferenced use\n+\tassociated symbols.\n+\n 2007-04-07  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/31293"}, {"sha": "fa75260d00b8e867d00a3e8921c0f39d68b65581", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=c60a84b86f0fbfe38aa93cdeffe563239095916f", "patch": "@@ -873,7 +873,8 @@ gfc_get_symbol_decl (gfc_symbol * sym)\n   int byref;\n \n   gcc_assert (sym->attr.referenced\n-               || sym->ns->proc_name->attr.if_source == IFSRC_IFBODY);\n+\t\t|| sym->attr.use_assoc\n+\t\t|| sym->ns->proc_name->attr.if_source == IFSRC_IFBODY);\n \n   if (sym->ns && sym->ns->proc_name->attr.function)\n     byref = gfc_return_by_reference (sym->ns->proc_name);"}, {"sha": "8bb09344004e1e6bc80c2d3344ab84aa399681c7", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c60a84b86f0fbfe38aa93cdeffe563239095916f", "patch": "@@ -1,3 +1,8 @@\n+2007-04-07  Paul Thomas  <pault@gcc.gnu.org>\n+\n+\tPR fortran/31424\n+\t* gfortran.dg/unreferenced_use_assoc_1.f90: New test.\n+\n 2007-04-07  Paul Thomas  <pault@gcc.gnu.org>\n \n \tPR fortran/31293"}, {"sha": "57892d5328f8a9784acbb20e1bc209f0ff0c582e", "filename": "gcc/testsuite/gfortran.dg/unreferenced_use_assoc_1.f90", "status": "added", "additions": 40, "deletions": 0, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ftestsuite%2Fgfortran.dg%2Funreferenced_use_assoc_1.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c60a84b86f0fbfe38aa93cdeffe563239095916f/gcc%2Ftestsuite%2Fgfortran.dg%2Funreferenced_use_assoc_1.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Funreferenced_use_assoc_1.f90?ref=c60a84b86f0fbfe38aa93cdeffe563239095916f", "patch": "@@ -0,0 +1,40 @@\n+! { dg-do compile }\n+! Tests the  fix for PR31424.\n+!\n+module InternalCompilerError\n+\n+   type Byte\n+      private \n+      character(len=1)     :: singleByte\n+   end type\n+\n+   type (Byte)             :: BytesPrototype(1)\n+\n+   type UserType\n+      real :: r\n+   end type\n+\n+contains\n+\n+   function UserTypeToBytes(user) result (bytes) \n+      type(UserType) :: user \n+      type(Byte)     :: bytes(size(transfer(user, BytesPrototype)))\n+      bytes = transfer(user, BytesPrototype) \n+   end function\n+\n+   subroutine DoSomethingWithBytes(bytes)\n+      type(Byte), intent(in)     :: bytes(:)\n+   end subroutine\n+\n+end module\n+\n+\n+program main\n+   use InternalCompilerError\n+   type (UserType) :: user \n+\n+   ! The following line caused the ICE \n+   call DoSomethingWithBytes( UserTypeToBytes(user) )\n+\n+end program \n+! { dg-final { cleanup-modules \"InternalCompilerError\" } }"}]}