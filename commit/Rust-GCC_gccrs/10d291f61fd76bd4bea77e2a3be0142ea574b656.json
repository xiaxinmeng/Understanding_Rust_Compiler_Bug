{"sha": "10d291f61fd76bd4bea77e2a3be0142ea574b656", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTBkMjkxZjYxZmQ3NmJkNGJlYTc3ZTJhM2JlMDE0MmVhNTc0YjY1Ng==", "commit": {"author": {"name": "Kai Tietz", "email": "kai.tietz@onevision.com", "date": "2010-06-11T08:14:33Z"}, "committer": {"name": "Kai Tietz", "email": "ktietz@gcc.gnu.org", "date": "2010-06-11T08:14:33Z"}, "message": "system.h (helper_const_non_const_cast): New inline for gcc version <= 4.0.\n\n2010-06-11  Kai Tietz  <kai.tietz@onevision.com>\n\n        * system.h (helper_const_non_const_cast): New inline for\n        gcc version <= 4.0.\n        (CONST_CAST2): For gcc version <= 4.0 use\n        new helper to do const/non-const casting.\n\nFrom-SVN: r160598", "tree": {"sha": "b68ad72d0eb1a6b3c3d16ea618983f80d8aa41c7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b68ad72d0eb1a6b3c3d16ea618983f80d8aa41c7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/10d291f61fd76bd4bea77e2a3be0142ea574b656", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d291f61fd76bd4bea77e2a3be0142ea574b656", "html_url": "https://github.com/Rust-GCC/gccrs/commit/10d291f61fd76bd4bea77e2a3be0142ea574b656", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/10d291f61fd76bd4bea77e2a3be0142ea574b656/comments", "author": null, "committer": null, "parents": [{"sha": "2aa9a961d4252247641c5d91d4329785728342a2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2aa9a961d4252247641c5d91d4329785728342a2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2aa9a961d4252247641c5d91d4329785728342a2"}], "stats": {"total": 21, "additions": 21, "deletions": 0}, "files": [{"sha": "6f9de31d99591215456396cbfb0b9cba2f6a3e3f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d291f61fd76bd4bea77e2a3be0142ea574b656/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d291f61fd76bd4bea77e2a3be0142ea574b656/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=10d291f61fd76bd4bea77e2a3be0142ea574b656", "patch": "@@ -1,3 +1,10 @@\n+2010-06-11  Kai Tietz  <kai.tietz@onevision.com>\n+\n+\t* system.h (helper_const_non_const_cast): New inline for\n+\tgcc version <= 4.0.\n+\t(CONST_CAST2): For gcc version <= 4.0 use\n+\tnew helper to do const/non-const casting.\n+\n 2010-06-10  Richard Sandiford  <rdsandiford@googlemail.com>\n \n \t* doc/md.texi: Document the \"unspec\" and \"unspecv\" enum names."}, {"sha": "29b7cd230506c5b263c47658e97e7d969819e271", "filename": "gcc/system.h", "status": "modified", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/10d291f61fd76bd4bea77e2a3be0142ea574b656/gcc%2Fsystem.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/10d291f61fd76bd4bea77e2a3be0142ea574b656/gcc%2Fsystem.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsystem.h?ref=10d291f61fd76bd4bea77e2a3be0142ea574b656", "patch": "@@ -834,6 +834,20 @@ extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;\n /* GCC 4.0.x has a bug where it may ICE on this expression,\n    so does GCC 3.4.x (PR17436).  */\n #define CONST_CAST2(TOTYPE,FROMTYPE,X) ((__extension__(union {FROMTYPE _q; TOTYPE _nq;})(X))._nq)\n+#elif defined(__GNUC__)\n+static inline char *\n+helper_const_non_const_cast (const char *p)\n+{\n+  union {\n+    const char *const_c;\n+    char *c;\n+  } val;\n+  val.const_c = p;\n+  return val.c;\n+}\n+\n+#define CONST_CAST2(TOTYPE,FROMTYPE,X) \\\n+\t((TOTYPE) helper_const_non_const_cast ((const char *) (FROMTYPE) (X)))\n #else\n #define CONST_CAST2(TOTYPE,FROMTYPE,X) ((TOTYPE)(FROMTYPE)(X))\n #endif"}]}