{"sha": "0380c51fefbf548d957595868069e1af09190e69", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDM4MGM1MWZlZmJmNTQ4ZDk1NzU5NTg2ODA2OWUxYWYwOTE5MGU2OQ==", "commit": {"author": {"name": "Bernd Schmidt", "email": "bernds@codesourcery.com", "date": "2012-09-28T20:32:55Z"}, "committer": {"name": "Bernd Schmidt", "email": "bernds@gcc.gnu.org", "date": "2012-09-28T20:32:55Z"}, "message": "re PR bootstrap/54688 (violation of implicit restriction \"No_Elaboration_Code\" on a-ioexce.ads)\n\n\tPR bootstrap/54688\n\t* sched-deps.c (parse_add_or_inc): Remove MINUS handling.  Take\n\tSTACK_GROWS_DOWNWARD into account.\n\nFrom-SVN: r191838", "tree": {"sha": "247621f2e57181c9c2fd27754a1407dc19f88749", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/247621f2e57181c9c2fd27754a1407dc19f88749"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0380c51fefbf548d957595868069e1af09190e69", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0380c51fefbf548d957595868069e1af09190e69", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0380c51fefbf548d957595868069e1af09190e69", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0380c51fefbf548d957595868069e1af09190e69/comments", "author": null, "committer": null, "parents": [{"sha": "495de4f4cb2e9de61fe73a1000837e2f9001404d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/495de4f4cb2e9de61fe73a1000837e2f9001404d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/495de4f4cb2e9de61fe73a1000837e2f9001404d"}], "stats": {"total": 20, "additions": 15, "deletions": 5}, "files": [{"sha": "7851337f434d4abfc4fd85e5747074a1ab26f2f6", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0380c51fefbf548d957595868069e1af09190e69/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0380c51fefbf548d957595868069e1af09190e69/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=0380c51fefbf548d957595868069e1af09190e69", "patch": "@@ -1,3 +1,9 @@\n+2012-09-20  Bernd Schmidt  <bernds@codesourcery.com>\n+\n+\tPR bootstrap/54688\n+\t* sched-deps.c (parse_add_or_inc): Remove MINUS handling.  Take\n+\tSTACK_GROWS_DOWNWARD into account.\n+\n 2012-09-28  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR target/54716"}, {"sha": "6625a53a699b4333d5b9a6fbec1bb594d7915a84", "filename": "gcc/sched-deps.c", "status": "modified", "additions": 9, "deletions": 5, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0380c51fefbf548d957595868069e1af09190e69/gcc%2Fsched-deps.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0380c51fefbf548d957595868069e1af09190e69/gcc%2Fsched-deps.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fsched-deps.c?ref=0380c51fefbf548d957595868069e1af09190e69", "patch": "@@ -4600,8 +4600,7 @@ parse_add_or_inc (struct mem_inc_info *mii, rtx insn, bool before_mem)\n   if (!REG_P (SET_DEST (pat)))\n     return false;\n \n-  if (GET_CODE (SET_SRC (pat)) != PLUS\n-      && GET_CODE (SET_SRC (pat)) != MINUS)\n+  if (GET_CODE (SET_SRC (pat)) != PLUS)\n     return false;\n \n   mii->inc_insn = insn;\n@@ -4629,9 +4628,14 @@ parse_add_or_inc (struct mem_inc_info *mii, rtx insn, bool before_mem)\n     }\n \n   if (regs_equal && REGNO (SET_DEST (pat)) == STACK_POINTER_REGNUM)\n-    /* Note that the sign has already been reversed for !before_mem.  */\n-    return mii->inc_constant > 0;\n-\n+    {\n+      /* Note that the sign has already been reversed for !before_mem.  */\n+#ifdef STACK_GROWS_DOWNWARD\n+      return mii->inc_constant > 0;\n+#else\n+      return mii->inc_constant < 0;\n+#endif\n+    }\n   return true;\n }\n "}]}