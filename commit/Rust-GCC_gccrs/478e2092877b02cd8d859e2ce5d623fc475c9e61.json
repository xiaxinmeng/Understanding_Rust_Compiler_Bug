{"sha": "478e2092877b02cd8d859e2ce5d623fc475c9e61", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDc4ZTIwOTI4NzdiMDJjZDhkODU5ZTJjZTVkNjIzZmM0NzVjOWU2MQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2004-11-22T20:02:16Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-11-22T20:02:16Z"}, "message": "re PR tree-optimization/18572 (Bus error compiling makegpr.adb on Mac OS X 10.3)\n\n2004-11-22  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR tree-opt/18572\n        * tree-sra.c (scalarize_init): Unshare the rhs before gimplifying\n        it.\n\nFrom-SVN: r91024", "tree": {"sha": "642eb34e30add87caa49f6d47fff8912cc3c12bc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/642eb34e30add87caa49f6d47fff8912cc3c12bc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/478e2092877b02cd8d859e2ce5d623fc475c9e61", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/478e2092877b02cd8d859e2ce5d623fc475c9e61", "html_url": "https://github.com/Rust-GCC/gccrs/commit/478e2092877b02cd8d859e2ce5d623fc475c9e61", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/478e2092877b02cd8d859e2ce5d623fc475c9e61/comments", "author": null, "committer": null, "parents": [{"sha": "65c844e23ddf871ff0045edc74380feb54c3cf11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/65c844e23ddf871ff0045edc74380feb54c3cf11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/65c844e23ddf871ff0045edc74380feb54c3cf11"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "d46e06afd3d87508a80f9af076ef136523ecf8de", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/478e2092877b02cd8d859e2ce5d623fc475c9e61/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/478e2092877b02cd8d859e2ce5d623fc475c9e61/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=478e2092877b02cd8d859e2ce5d623fc475c9e61", "patch": "@@ -1,3 +1,9 @@\n+2004-11-22  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR tree-opt/18572\n+\t* tree-sra.c (scalarize_init): Unshare the rhs before gimplifying\n+\tit.\n+\n 2004-11-22  Richard Henderson  <rth@redhat.com>\n \n \t* function.c (assign_parm_setup_block): Revert 11-13 change to"}, {"sha": "3cc9261552c394183a46e321e8c425a7b883eeb2", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/478e2092877b02cd8d859e2ce5d623fc475c9e61/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/478e2092877b02cd8d859e2ce5d623fc475c9e61/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=478e2092877b02cd8d859e2ce5d623fc475c9e61", "patch": "@@ -1832,6 +1832,8 @@ scalarize_init (struct sra_elt *lhs_elt, tree rhs, block_stmt_iterator *bsi)\n   /* Generate initialization statements for all members extant in the RHS.  */\n   if (rhs)\n     {\n+      /* Unshare the expression just in case this is from a decl's initial.  */\n+      rhs = unshare_expr (rhs);\n       push_gimplify_context ();\n       result = generate_element_init (lhs_elt, rhs, &list);\n       pop_gimplify_context (NULL);"}]}