{"sha": "3d879eacbb35e2495eb17f97c226435ae97040c3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6M2Q4NzllYWNiYjM1ZTI0OTVlYjE3Zjk3YzIyNjQzNWFlOTcwNDBjMw==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-04-21T18:05:17Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "1998-04-21T18:05:17Z"}, "message": "(convert_for_assignment): Fix handling of pmfs.\n\nFrom-SVN: r19360", "tree": {"sha": "4aefe6fd2efe071187b4233df6a00f8ca128db87", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4aefe6fd2efe071187b4233df6a00f8ca128db87"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3d879eacbb35e2495eb17f97c226435ae97040c3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d879eacbb35e2495eb17f97c226435ae97040c3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3d879eacbb35e2495eb17f97c226435ae97040c3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3d879eacbb35e2495eb17f97c226435ae97040c3/comments", "author": null, "committer": null, "parents": [{"sha": "4ceb7595d9833d1cd21ec87a67c2a42e03244310", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ceb7595d9833d1cd21ec87a67c2a42e03244310", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ceb7595d9833d1cd21ec87a67c2a42e03244310"}], "stats": {"total": 8, "additions": 5, "deletions": 3}, "files": [{"sha": "f891b1ef8f033d27895d9227187ecc74d07f5c18", "filename": "gcc/cp/typeck.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3d879eacbb35e2495eb17f97c226435ae97040c3/gcc%2Fcp%2Ftypeck.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3d879eacbb35e2495eb17f97c226435ae97040c3/gcc%2Fcp%2Ftypeck.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Ftypeck.c?ref=3d879eacbb35e2495eb17f97c226435ae97040c3", "patch": "@@ -6844,9 +6844,11 @@ convert_for_assignment (type, rhs, errtype, fndecl, parmnum)\n \t   && TYPE_PTRMEMFUNC_P (type))\n     {\n       tree ttl = TYPE_PTRMEMFUNC_FN_TYPE (type);\n-      tree ttr = (TREE_CODE (rhstype) == POINTER_TYPE ? rhstype\n-\t\t  : TYPE_PTRMEMFUNC_FN_TYPE (rhstype));\n-      int ctt = comp_target_types (ttl, ttr, 1);\n+      tree ttr = (TYPE_PTRMEMFUNC_P (rhstype)\n+\t\t  ? TYPE_PTRMEMFUNC_FN_TYPE (rhstype)\n+\t\t  : rhstype);\n+      int ctt = (TREE_CODE (rhstype) == INTEGER_TYPE ? 1\n+\t\t : comp_target_types (ttl, ttr, 1));\n \n       if (ctt < 0)\n \tcp_pedwarn (\"converting `%T' to `%T' is a contravariance violation\","}]}