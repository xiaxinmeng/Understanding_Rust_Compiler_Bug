{"sha": "3b81f5c4d8e0d79cbd6927d004185707c14e54b2", "node_id": "C_kwDOANBUbNoAKDNiODFmNWM0ZDhlMGQ3OWNiZDY5MjdkMDA0MTg1NzA3YzE0ZTU0YjI", "commit": {"author": {"name": "Jose E. Marchesi", "email": "jose.marchesi@oracle.com", "date": "2023-01-17T16:16:32Z"}, "committer": {"name": "Jose E. Marchesi", "email": "jose.marchesi@oracle.com", "date": "2023-01-17T16:16:32Z"}, "message": "bpf: disable -fstack-protector in BPF\n\nThe stack protector is not supported in BPF.  This patch disables\n-fstack-protector in bpf-* targets, along with the emission of a note\nindicating that the feature is not supported in this platform.\n\nRegtested in bpf-unknown-none.\n\ngcc/ChangeLog:\n\n\t* config/bpf/bpf.cc (bpf_option_override): Disable\n\t-fstack-protector.", "tree": {"sha": "cf80fc5ed988c6d85fba906fc79c44cbd828d5e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf80fc5ed988c6d85fba906fc79c44cbd828d5e7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/3b81f5c4d8e0d79cbd6927d004185707c14e54b2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b81f5c4d8e0d79cbd6927d004185707c14e54b2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3b81f5c4d8e0d79cbd6927d004185707c14e54b2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3b81f5c4d8e0d79cbd6927d004185707c14e54b2/comments", "author": {"login": "jemarch", "id": 7061875, "node_id": "MDQ6VXNlcjcwNjE4NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7061875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jemarch", "html_url": "https://github.com/jemarch", "followers_url": "https://api.github.com/users/jemarch/followers", "following_url": "https://api.github.com/users/jemarch/following{/other_user}", "gists_url": "https://api.github.com/users/jemarch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jemarch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jemarch/subscriptions", "organizations_url": "https://api.github.com/users/jemarch/orgs", "repos_url": "https://api.github.com/users/jemarch/repos", "events_url": "https://api.github.com/users/jemarch/events{/privacy}", "received_events_url": "https://api.github.com/users/jemarch/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jemarch", "id": 7061875, "node_id": "MDQ6VXNlcjcwNjE4NzU=", "avatar_url": "https://avatars.githubusercontent.com/u/7061875?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jemarch", "html_url": "https://github.com/jemarch", "followers_url": "https://api.github.com/users/jemarch/followers", "following_url": "https://api.github.com/users/jemarch/following{/other_user}", "gists_url": "https://api.github.com/users/jemarch/gists{/gist_id}", "starred_url": "https://api.github.com/users/jemarch/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jemarch/subscriptions", "organizations_url": "https://api.github.com/users/jemarch/orgs", "repos_url": "https://api.github.com/users/jemarch/repos", "events_url": "https://api.github.com/users/jemarch/events{/privacy}", "received_events_url": "https://api.github.com/users/jemarch/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "1fce7d29ebb47c805ad4d38b68e00f7b1178f467", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1fce7d29ebb47c805ad4d38b68e00f7b1178f467", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1fce7d29ebb47c805ad4d38b68e00f7b1178f467"}], "stats": {"total": 8, "additions": 8, "deletions": 0}, "files": [{"sha": "b268801d00c784e2ef9e47265e5e92c7c90a0722", "filename": "gcc/config/bpf/bpf.cc", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/3b81f5c4d8e0d79cbd6927d004185707c14e54b2/gcc%2Fconfig%2Fbpf%2Fbpf.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/3b81f5c4d8e0d79cbd6927d004185707c14e54b2/gcc%2Fconfig%2Fbpf%2Fbpf.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fbpf%2Fbpf.cc?ref=3b81f5c4d8e0d79cbd6927d004185707c14e54b2", "patch": "@@ -253,6 +253,14 @@ bpf_option_override (void)\n   if (bpf_has_jmp32 == -1)\n     bpf_has_jmp32 = (bpf_isa >= ISA_V3);\n \n+  /* Disable -fstack-protector as it is not supported in BPF.  */\n+  if (flag_stack_protect)\n+    {\n+      inform (input_location,\n+              \"%<-fstack-protector%> does not work \"\n+              \" on this architecture\");\n+      flag_stack_protect = 0;\n+    }\n }\n \n #undef TARGET_OPTION_OVERRIDE"}]}