{"sha": "a162f9d81efa26ffbf15c8289becd5919396df8b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YTE2MmY5ZDgxZWZhMjZmZmJmMTVjODI4OWJlY2Q1OTE5Mzk2ZGY4Yg==", "commit": {"author": {"name": "Bryce McKinlay", "email": "bryce@albatross.co.nz", "date": "2000-03-21T05:12:20Z"}, "committer": {"name": "Bryce McKinlay", "email": "bryce@gcc.gnu.org", "date": "2000-03-21T05:12:20Z"}, "message": "natClass.cc (isInstance): Initialize `this'.\n\n2000-03-21  Bryce McKinlay  <bryce@albatross.co.nz>\n\n        * java/lang/natClass.cc (isInstance): Initialize `this'.\n        (isAssignableFrom): Initialize `this' and `klass'.\n        (_Jv_IsAssignableFrom): If an interface has no idt, it is not\n        implemented by any loaded class, so return false.\n\nFrom-SVN: r32663", "tree": {"sha": "ba8ed5a1fb470d85753828e70c64ed0559b15b44", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ba8ed5a1fb470d85753828e70c64ed0559b15b44"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a162f9d81efa26ffbf15c8289becd5919396df8b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a162f9d81efa26ffbf15c8289becd5919396df8b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a162f9d81efa26ffbf15c8289becd5919396df8b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a162f9d81efa26ffbf15c8289becd5919396df8b/comments", "author": null, "committer": null, "parents": [{"sha": "2ca2f317e2f7153293f6458d93cb6739d7be7504", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2ca2f317e2f7153293f6458d93cb6739d7be7504", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2ca2f317e2f7153293f6458d93cb6739d7be7504"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "67cfcd6faedac6bd7f2f4271aebcdb16b952abed", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a162f9d81efa26ffbf15c8289becd5919396df8b/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a162f9d81efa26ffbf15c8289becd5919396df8b/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=a162f9d81efa26ffbf15c8289becd5919396df8b", "patch": "@@ -1,3 +1,10 @@\n+2000-03-21  Bryce McKinlay  <bryce@albatross.co.nz>\n+\n+\t* java/lang/natClass.cc (isInstance): Initialize `this'.\n+\t(isAssignableFrom): Initialize `this' and `klass'.\n+\t(_Jv_IsAssignableFrom): If an interface has no idt, it is not \n+\timplemented by any loaded class, so return false.\n+\n 2000-03-19  Warren Levy  <warrenl@cygnus.com>\n \n \t* java/awt/Color.java: Specified java.io for Serializable."}, {"sha": "3e5644eca7e9215f8884713831cbd22c99b8301e", "filename": "libjava/java/lang/natClass.cc", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a162f9d81efa26ffbf15c8289becd5919396df8b/libjava%2Fjava%2Flang%2FnatClass.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a162f9d81efa26ffbf15c8289becd5919396df8b/libjava%2Fjava%2Flang%2FnatClass.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2Fjava%2Flang%2FnatClass.cc?ref=a162f9d81efa26ffbf15c8289becd5919396df8b", "patch": "@@ -613,6 +613,9 @@ java::lang::Class::getMethods (void)\n jboolean\n java::lang::Class::isAssignableFrom (jclass klass)\n {\n+  // Arguments may not have been initialized, given \".class\" syntax.\n+  _Jv_InitClass (this);\n+  _Jv_InitClass (klass);\n   return _Jv_IsAssignableFrom (this, klass);\n }\n \n@@ -621,6 +624,7 @@ java::lang::Class::isInstance (jobject obj)\n {\n   if (! obj || isPrimitive ())\n     return false;\n+  _Jv_InitClass (this);\n   return isAssignableFrom (obj->getClass());\n }\n \n@@ -919,6 +923,8 @@ _Jv_IsAssignableFrom (jclass target, jclass source)\n     {\n       _Jv_IDispatchTable *cl_idt = source->idt;\n       _Jv_IDispatchTable *if_idt = target->idt;\n+      if (if_idt == NULL)\n+\treturn false; // No class implementing TARGET has been loaded.    \n       jshort cl_iindex = cl_idt->cls.iindex;\n       if (cl_iindex <= if_idt->iface.ioffsets[0])\n         {\n@@ -927,7 +933,6 @@ _Jv_IsAssignableFrom (jclass target, jclass source)\n \t      && cl_idt->cls.itable[offset] == target)\n \t    return true;\n \t}\n-      return false;\n     }\n     \n   return false;"}]}