{"sha": "47c32082dd8ab3e086a68309673dbcd9ad4da418", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDdjMzIwODJkZDhhYjNlMDg2YTY4MzA5NjczZGJjZDlhZDRkYTQxOA==", "commit": {"author": {"name": "Richard Biener", "email": "rguenther@suse.de", "date": "2013-11-19T15:00:10Z"}, "committer": {"name": "Richard Biener", "email": "rguenth@gcc.gnu.org", "date": "2013-11-19T15:00:10Z"}, "message": "re PR tree-optimization/59164 (ice: tree check: expected tree that contains \u2018decl minimal\u2019 structure, have \u2018integer_cst\u2019 in get_var_info, at tree-into-ssa.c:380)\n\n2013-11-19  Richard Biener  <rguenther@suse.de>\n\n\tPR tree-optimization/59164\n\t* tree-vect-loop-manip.c (vect_update_ivs_after_vectorizer):\n\tUncomment assert.\n\t* tree-vect-loop.c (vect_analyze_loop_operations): Adjust\n\tcheck whether we can create an epilogue loop to reflect the\n\tcases where we create one.\n\n\t* gcc.dg/torture/pr59164.c: New testcase.\n\nFrom-SVN: r205030", "tree": {"sha": "5b3c0ad04fec2e6b97a7b70107dd6744aa6ee116", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5b3c0ad04fec2e6b97a7b70107dd6744aa6ee116"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/47c32082dd8ab3e086a68309673dbcd9ad4da418", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47c32082dd8ab3e086a68309673dbcd9ad4da418", "html_url": "https://github.com/Rust-GCC/gccrs/commit/47c32082dd8ab3e086a68309673dbcd9ad4da418", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/47c32082dd8ab3e086a68309673dbcd9ad4da418/comments", "author": {"login": "rguenth", "id": 2046526, "node_id": "MDQ6VXNlcjIwNDY1MjY=", "avatar_url": "https://avatars.githubusercontent.com/u/2046526?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rguenth", "html_url": "https://github.com/rguenth", "followers_url": "https://api.github.com/users/rguenth/followers", "following_url": "https://api.github.com/users/rguenth/following{/other_user}", "gists_url": "https://api.github.com/users/rguenth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rguenth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rguenth/subscriptions", "organizations_url": "https://api.github.com/users/rguenth/orgs", "repos_url": "https://api.github.com/users/rguenth/repos", "events_url": "https://api.github.com/users/rguenth/events{/privacy}", "received_events_url": "https://api.github.com/users/rguenth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "04ef64d53657fb64b14851af5106f8d018aa1707", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04ef64d53657fb64b14851af5106f8d018aa1707", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04ef64d53657fb64b14851af5106f8d018aa1707"}], "stats": {"total": 54, "additions": 42, "deletions": 12}, "files": [{"sha": "f54a4764c445630b9845942e95772c997140289e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=47c32082dd8ab3e086a68309673dbcd9ad4da418", "patch": "@@ -1,3 +1,12 @@\n+2013-11-19  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/59164\n+\t* tree-vect-loop-manip.c (vect_update_ivs_after_vectorizer):\n+\tUncomment assert.\n+\t* tree-vect-loop.c (vect_analyze_loop_operations): Adjust\n+\tcheck whether we can create an epilogue loop to reflect the\n+\tcases where we create one.\n+\n 2013-11-19  Andrew MacLeod  <amacleod@redhat.com>\n \n \t* graphite-sese-to-poly.c: Include expr.h."}, {"sha": "c9605bc0973e52a3ed23dd9f2a8d91af66873553", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=47c32082dd8ab3e086a68309673dbcd9ad4da418", "patch": "@@ -1,3 +1,8 @@\n+2013-11-19  Richard Biener  <rguenther@suse.de>\n+\n+\tPR tree-optimization/59164\n+\t* gcc.dg/torture/pr59164.c: New testcase.\n+\n 2013-11-19  Richard Biener  <rguenther@suse.de>\n \n \tPR middle-end/58956"}, {"sha": "1ec69610c21da2da27258c397b528d3ad8baa173", "filename": "gcc/testsuite/gcc.dg/torture/pr59164.c", "status": "added", "additions": 21, "deletions": 0, "changes": 21, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr59164.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr59164.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr59164.c?ref=47c32082dd8ab3e086a68309673dbcd9ad4da418", "patch": "@@ -0,0 +1,21 @@\n+/* { dg-do compile } */\n+\n+int a, d, e;\n+long b[10];\n+int c[10][8];\n+\n+int fn1(p1)\n+{ \n+  return 1 >> p1; \n+}\n+\n+void fn2(void)\n+{\n+  int f;\n+  for (a=1; a <= 4; a++)\n+    {\n+      f = fn1(0 < c[a][0]);\n+      if (f || d)\n+\te = b[a] = 1;\n+    }\n+}"}, {"sha": "3193f20e5a9e886c626ba8fe4d84c9f192f49cdb", "filename": "gcc/tree-vect-loop-manip.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftree-vect-loop-manip.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftree-vect-loop-manip.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop-manip.c?ref=47c32082dd8ab3e086a68309673dbcd9ad4da418", "patch": "@@ -1673,7 +1673,7 @@ vect_update_ivs_after_vectorizer (loop_vec_info loop_vinfo, tree niters,\n   gimple_stmt_iterator gsi, gsi1;\n   basic_block update_bb = update_e->dest;\n \n-  /* gcc_assert (vect_can_advance_ivs_p (loop_vinfo)); */\n+  gcc_checking_assert (vect_can_advance_ivs_p (loop_vinfo));\n \n   /* Make sure there exists a single-predecessor exit bb:  */\n   gcc_assert (single_pred_p (exit_bb));"}, {"sha": "a97d413f5cdabe0625725b87b3cd261367d85516", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 6, "deletions": 11, "changes": 17, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/47c32082dd8ab3e086a68309673dbcd9ad4da418/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=47c32082dd8ab3e086a68309673dbcd9ad4da418", "patch": "@@ -1588,24 +1588,19 @@ vect_analyze_loop_operations (loop_vec_info loop_vinfo, bool slp)\n       return false;\n     }\n \n-  if (LOOP_PEELING_FOR_ALIGNMENT (loop_vinfo)\n+  if (LOOP_VINFO_PEELING_FOR_GAPS (loop_vinfo)\n       || ((int) tree_ctz (LOOP_VINFO_NITERS (loop_vinfo))\n \t  < exact_log2 (vectorization_factor)))\n     {\n       if (dump_enabled_p ())\n-        dump_printf_loc (MSG_NOTE, vect_location, \"epilog loop required.\\n\");\n-      if (!vect_can_advance_ivs_p (loop_vinfo))\n-        {\n-          if (dump_enabled_p ())\n-\t    dump_printf_loc (MSG_MISSED_OPTIMIZATION, vect_location,\n-\t\t\t     \"not vectorized: can't create epilog loop 1.\\n\");\n-          return false;\n-        }\n-      if (!slpeel_can_duplicate_loop_p (loop, single_exit (loop)))\n+        dump_printf_loc (MSG_NOTE, vect_location, \"epilog loop required\\n\");\n+      if (!vect_can_advance_ivs_p (loop_vinfo)\n+\t  || !slpeel_can_duplicate_loop_p (loop, single_exit (loop)))\n         {\n           if (dump_enabled_p ())\n \t    dump_printf_loc (MSG_MISSED_OPTIMIZATION, vect_location,\n-\t\t\t     \"not vectorized: can't create epilog loop 2.\\n\");\n+\t\t\t     \"not vectorized: can't create required \"\n+\t\t\t     \"epilog loop\\n\");\n           return false;\n         }\n     }"}]}