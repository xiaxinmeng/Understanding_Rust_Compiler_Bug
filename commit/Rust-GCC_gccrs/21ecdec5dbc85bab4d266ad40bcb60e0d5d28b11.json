{"sha": "21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjFlY2RlYzVkYmM4NWJhYjRkMjY2YWQ0MGJjYjYwZTBkNWQyOGIxMQ==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2009-06-08T19:21:33Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2009-06-08T19:21:33Z"}, "message": "re PR middle-end/39834 (verify_cgraph_node failed with -O3 -Winline)\n\n\n\tPR debug/39834\n\t* gcc.dg/torture/pr39834.c\n\tPR middle-end/39834\n\t* cgraphunit.c (save_inline_function_body): Do not copy transform hooks\n\tfor saved inline bodies.\n\t* ipa-passes.c (do_per_function): Do not add the hoks multiple times\n\tfor given function.\n\nFrom-SVN: r148292", "tree": {"sha": "3e7b5c6fc01692dae73e79052c41bdbbef6e460b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3e7b5c6fc01692dae73e79052c41bdbbef6e460b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/comments", "author": null, "committer": null, "parents": [{"sha": "568e8e1e73145dedc973ee9543775b4085e53d26", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/568e8e1e73145dedc973ee9543775b4085e53d26", "html_url": "https://github.com/Rust-GCC/gccrs/commit/568e8e1e73145dedc973ee9543775b4085e53d26"}], "stats": {"total": 32, "additions": 31, "deletions": 1}, "files": [{"sha": "233028faa0688fc90e18097aefca7b64435fe476", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "patch": "@@ -1,3 +1,11 @@\n+2009-06-08  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR middle-end/39834\n+\t* cgraphunit.c (save_inline_function_body): Do not copy transform hooks\n+\tfor saved inline bodies.\n+\t* ipa-passes.c (do_per_function): Do not add the hoks multiple times\n+\tfor given function.\n+\n 2009-06-08  Adam Nemet  <anemet@caviumnetworks.com>\n \n \t* jump.c (returnjump_p): Handle delayed branches.  Add missing"}, {"sha": "907488c1431cbf847c45f237f11d282cb847c20a", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "patch": "@@ -1688,6 +1688,9 @@ save_inline_function_body (struct cgraph_node *node)\n   DECL_ONE_ONLY (first_clone->decl) = 0;\n   TREE_PUBLIC (first_clone->decl) = 0;\n   DECL_COMDAT (first_clone->decl) = 0;\n+  VEC_free (ipa_opt_pass, heap,\n+            DECL_STRUCT_FUNCTION (first_clone->decl)->ipa_transforms_to_apply);\n+  DECL_STRUCT_FUNCTION (first_clone->decl)->ipa_transforms_to_apply = NULL;\n \n #ifdef ENABLE_CHECKING\n   verify_cgraph_node (first_clone);"}, {"sha": "f146670efd1c88b27170737033c9604ed5873a61", "filename": "gcc/passes.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Fpasses.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Fpasses.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fpasses.c?ref=21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "patch": "@@ -844,7 +844,8 @@ do_per_function (void (*callback) (void *data), void *data)\n     {\n       struct cgraph_node *node;\n       for (node = cgraph_nodes; node; node = node->next)\n-\tif (node->analyzed && gimple_has_body_p (node->decl))\n+\tif (node->analyzed && gimple_has_body_p (node->decl)\n+\t    && (!node->clone_of || node->decl != node->clone_of->decl))\n \t  {\n \t    push_cfun (DECL_STRUCT_FUNCTION (node->decl));\n \t    current_function_decl = node->decl;"}, {"sha": "e20679a9ba36280e32bc7b4d422705b926d19928", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "patch": "@@ -1,3 +1,8 @@\n+2009-06-08  Jan Hubicka  <jh@suse.cz>\n+\n+\tPR debug/39834\n+\t* gcc.dg/torture/pr39834.c\n+\n 2009-06-08  Jan Hubicka  <jh@suse.cz>\n \n \tPR middle-end/40102"}, {"sha": "ecc3977a1f0b7b511e470c69dc15805fc094dd05", "filename": "gcc/testsuite/gcc.c-torture/compile/pr39834.c", "status": "added", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr39834.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr39834.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fcompile%2Fpr39834.c?ref=21ecdec5dbc85bab4d266ad40bcb60e0d5d28b11", "patch": "@@ -0,0 +1,13 @@\n+/* { dg-options \"-O1 -Winline\" } */\n+void quit_mined ();\n+void bottom_line ();\n+typedef enum { False, True } FLAG;\n+inline void\n+nextfile (FLAG exitiflast)\n+{\n+  if (exitiflast)     \n+    quit_mined ();\n+  else \n+    bottom_line ();\n+  nextfile (True);\n+}"}]}