{"sha": "f6ba5bb293414a4114a8147b3e7fd38169aacccd", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZjZiYTViYjI5MzQxNGE0MTE0YTgxNDdiM2U3ZmQzODE2OWFhY2NjZA==", "commit": {"author": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2015-09-14T13:46:14Z"}, "committer": {"name": "Oleg Endo", "email": "olegendo@gcc.gnu.org", "date": "2015-09-14T13:46:14Z"}, "message": "re PR target/67061 (sh64-elf: internal compiler error: in sh_find_set_of_reg, at config/sh/sh-protos.h:235)\n\ngcc/\n\tPR target/67061\n\t* config/sh/sh-protos.h (sh_find_set_of_reg): Simplfiy for-loop.\n\tHandle call insns.\n\nFrom-SVN: r227750", "tree": {"sha": "e5c364e587f46bbab10268998d09c2d17d5d4684", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e5c364e587f46bbab10268998d09c2d17d5d4684"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/f6ba5bb293414a4114a8147b3e7fd38169aacccd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6ba5bb293414a4114a8147b3e7fd38169aacccd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f6ba5bb293414a4114a8147b3e7fd38169aacccd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f6ba5bb293414a4114a8147b3e7fd38169aacccd/comments", "author": null, "committer": null, "parents": [{"sha": "eb472171caecd57bed9d996a31d354f568e581ad", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/eb472171caecd57bed9d996a31d354f568e581ad", "html_url": "https://github.com/Rust-GCC/gccrs/commit/eb472171caecd57bed9d996a31d354f568e581ad"}], "stats": {"total": 31, "additions": 16, "deletions": 15}, "files": [{"sha": "86888f96883d51030d172cadc716a84337f4c61e", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6ba5bb293414a4114a8147b3e7fd38169aacccd/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6ba5bb293414a4114a8147b3e7fd38169aacccd/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=f6ba5bb293414a4114a8147b3e7fd38169aacccd", "patch": "@@ -1,3 +1,9 @@\n+2015-09-14  Oleg Endo  <olegendo@gcc.gnu.org>\n+\n+\tPR target/67061\n+\t* config/sh/sh-protos.h (sh_find_set_of_reg): Simplfiy for-loop.\n+\tHandle call insns.\n+\n 2015-09-14  Chung-Lin Tang  <cltang@codesourcery.com>\n \n \t* lto-wrapper.c (merge_and_complain): Add OPT_fdiagnostics_show_caret,"}, {"sha": "bb7003c18cde3fc6faa2c90bf841f95d6c794968", "filename": "gcc/config/sh/sh-protos.h", "status": "modified", "additions": 10, "deletions": 15, "changes": 25, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/f6ba5bb293414a4114a8147b3e7fd38169aacccd/gcc%2Fconfig%2Fsh%2Fsh-protos.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/f6ba5bb293414a4114a8147b3e7fd38169aacccd/gcc%2Fconfig%2Fsh%2Fsh-protos.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsh%2Fsh-protos.h?ref=f6ba5bb293414a4114a8147b3e7fd38169aacccd", "patch": "@@ -192,18 +192,19 @@ sh_find_set_of_reg (rtx reg, rtx_insn* insn, F stepfunc,\n   if (!REG_P (reg) || insn == NULL_RTX)\n     return result;\n \n-  rtx_insn* previnsn = insn;\n-\n-  for (result.insn = stepfunc (insn); result.insn != NULL_RTX;\n-       previnsn = result.insn, result.insn = stepfunc (result.insn))\n+  for (rtx_insn* i = stepfunc (insn); i != NULL_RTX; i = stepfunc (i))\n     {\n-      if (BARRIER_P (result.insn))\n+      if (BARRIER_P (i))\n \tbreak;\n-      if (!NONJUMP_INSN_P (result.insn))\n-\tcontinue;\n-      if (reg_set_p (reg, result.insn))\n+      if (!INSN_P (i) || DEBUG_INSN_P (i))\n+\t  continue;\n+      if (reg_set_p (reg, i))\n \t{\n-\t  result.set_rtx = set_of (reg, result.insn);\n+\t  if (CALL_P (i))\n+\t    break;\n+\n+\t  result.insn = i;\n+\t  result.set_rtx = set_of (reg, i);\n \n \t  if (result.set_rtx == NULL_RTX || GET_CODE (result.set_rtx) != SET)\n \t    break;\n@@ -226,12 +227,6 @@ sh_find_set_of_reg (rtx reg, rtx_insn* insn, F stepfunc,\n \t}\n     }\n \n-  /* If the loop above stopped at the first insn in the list,\n-     result.insn will be null.  Use the insn from the previous iteration\n-     in this case.  */\n-  if (result.insn == NULL)\n-    result.insn = previnsn;\n-\n   if (result.set_src != NULL)\n     gcc_assert (result.insn != NULL && result.set_rtx != NULL);\n "}]}