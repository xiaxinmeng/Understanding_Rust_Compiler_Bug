{"sha": "4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDQyOGU2ODJmYmI0M2E3ZWJhNGFmOWRiOWQ0M2VhNWQ1NWE4MmI1Nw==", "commit": {"author": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-01-25T21:15:34Z"}, "committer": {"name": "Manuel L\u00f3pez-Ib\u00e1\u00f1ez", "email": "manu@gcc.gnu.org", "date": "2007-01-25T21:15:34Z"}, "message": "re PR fortran/30437 (-Wno-all is rejected (even when fortran is not included))\n\n2007-01-25  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n\n\tPR fortran/30437\nfortran/\n\t* lang.opt (Wall): Remove RejectNegative.\n\t* options.c (gfc_handle_option): Wall can be disabled.\n\t(set_Wall): Add a parameter for disabling Wall.\ntestsuite/\t\n\t* gcc.dg/Wall.c: New.\n\t* gcc.dg/Wno-all.c: New.\n\t* gfortran.dg/Wall.f90: New.\n\t* gfortran.dg/Wno-all.f90: New.\n\nFrom-SVN: r121186", "tree": {"sha": "ae99d681e8fc21bd381de32f00477b07892126f9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ae99d681e8fc21bd381de32f00477b07892126f9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/comments", "author": null, "committer": null, "parents": [{"sha": "161a649cb95838bb373e2bcdaab050d2215c9754", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/161a649cb95838bb373e2bcdaab050d2215c9754", "html_url": "https://github.com/Rust-GCC/gccrs/commit/161a649cb95838bb373e2bcdaab050d2215c9754"}], "stats": {"total": 95, "additions": 78, "deletions": 17}, "files": [{"sha": "fe816b719f4699ff3f5ffd3560005c4933d4830f", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -1,3 +1,10 @@\n+2007-01-25  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR fortran/30437\n+\t* lang.opt (Wall): Remove RejectNegative.\n+\t* options.c (gfc_handle_option): Wall can be disabled.\n+\t(set_Wall): Add a parameter for disabling Wall.\n+\t\n 2007-01-23  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR fortran/30532"}, {"sha": "60806c58286b72a11e6b6b794ac7041ddc4c814a", "filename": "gcc/fortran/lang.opt", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ffortran%2Flang.opt", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ffortran%2Flang.opt", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Flang.opt?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -34,7 +34,7 @@ Fortran Joined\n -J<directory>\tPut MODULE files in 'directory'\n \n Wall\n-Fortran RejectNegative\n+Fortran\n ; Documented in C\n \n Waliasing"}, {"sha": "056ba33ff6df7b7638d993d8d88a42a247fb3f3f", "filename": "gcc/fortran/options.c", "status": "modified", "additions": 17, "deletions": 16, "changes": 33, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ffortran%2Foptions.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ffortran%2Foptions.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Foptions.c?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -298,26 +298,27 @@ gfc_post_options (const char **pfilename)\n /* Set the options for -Wall.  */\n \n static void\n-set_Wall (void)\n+set_Wall (int setting)\n {\n-  gfc_option.warn_aliasing = 1;\n-  gfc_option.warn_ampersand = 1;\n-  gfc_option.warn_line_truncation = 1;\n-  gfc_option.warn_nonstd_intrinsics = 1;\n-  gfc_option.warn_surprising = 1;\n-  gfc_option.warn_tabs = 0;\n-  gfc_option.warn_underflow = 1;\n-  gfc_option.warn_character_truncation = 1;\n-\n-  set_Wunused (1);\n-  warn_return_type = 1;\n-  warn_switch = 1;\n+  gfc_option.warn_aliasing = setting;\n+  gfc_option.warn_ampersand = setting;\n+  gfc_option.warn_line_truncation = setting;\n+  gfc_option.warn_nonstd_intrinsics = setting;\n+  gfc_option.warn_surprising = setting;\n+  gfc_option.warn_tabs = !setting;\n+  gfc_option.warn_underflow = setting;\n+  gfc_option.warn_character_truncation = setting;\n+\n+  set_Wunused (setting);\n+  warn_return_type = setting;\n+  warn_switch = setting;\n \n   /* We save the value of warn_uninitialized, since if they put\n      -Wuninitialized on the command line, we need to generate a\n      warning about not using it without also specifying -O.  */\n-\n-  if (warn_uninitialized != 1)\n+  if (setting == 0)\n+    warn_uninitialized = 0;\n+  else if (warn_uninitialized != 1)\n     warn_uninitialized = 2;\n }\n \n@@ -404,7 +405,7 @@ gfc_handle_option (size_t scode, const char *arg, int value)\n       break;\n \n     case OPT_Wall:\n-      set_Wall ();\n+      set_Wall (value);\n       break;\n \n     case OPT_Waliasing:"}, {"sha": "d2473a8c446f300a1fa7a21dcc471e2a188f211a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -1,3 +1,11 @@\n+2007-01-25  Manuel Lopez-Ibanez  <manu@gcc.gnu.org>\n+\n+\tPR fortran/30437\n+\t* gcc.dg/Wall.c: New.\n+\t* gcc.dg/Wno-all.c: New.\n+\t* gfortran.dg/Wall.f90: New.\n+\t* gfortran.dg/Wno-all.f90: New.\n+\t\n 2007-01-24  Geoffrey Keating  <geoffk@apple.com>\n \n \t* gcc.target/powerpc/darwin-ehreturn-1.c: New."}, {"sha": "86a359b49cd55ca8992929bbc836fd9f82c80db0", "filename": "gcc/testsuite/gcc.dg/Wall.c", "status": "added", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgcc.dg%2FWall.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgcc.dg%2FWall.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWall.c?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -0,0 +1,10 @@\n+/* PR 30437: Test -Wall \n+   Don't change this without changing Wno-all.c as well.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wall\" } */\n+\n+void foo()\n+{\n+  int a;\n+  5 * (a == 1) | (a == 2);  /* { dg-warning \"no effect\" \"no effect\" } */\n+}"}, {"sha": "3275eb6cd5011a93c7ebf62a89102ef826147d9b", "filename": "gcc/testsuite/gcc.dg/Wno-all.c", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgcc.dg%2FWno-all.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgcc.dg%2FWno-all.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWno-all.c?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -0,0 +1,11 @@\n+/* PR 30437: Test negative of -Wall\n+   Don't change this without changing Wall.c as well.  */\n+/* { dg-do compile } */\n+/* { dg-options \"-Wall -Wno-all\" } */\n+\n+void foo()\n+{\n+  int a;\n+  5 * (a == 1) | (a == 2);  /* { dg-bogus \"no effect\" \"no effect\" } */\n+}\n+"}, {"sha": "a11c4b7fd15f8691991f707ffcd196250005a043", "filename": "gcc/testsuite/gfortran.dg/Wall.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgfortran.dg%2FWall.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgfortran.dg%2FWall.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2FWall.f90?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -0,0 +1,12 @@\n+! { dg-do run }\n+! { dg-options -Wall }\n+! PR 30437  Test for Wall\n+program main\n+  character (len=40) &\n+  c\n+  c = \"Hello, &\n+         world!\" ! { dg-warning \"Warning: Missing '&' in continued character constant\" }\n+  if (c.ne.&\n+                                   \"Hello, world!\")&\n+                               call abort();end program main\n+"}, {"sha": "550c7e46ad2062d3c6a8663f81200a3c8dc539f7", "filename": "gcc/testsuite/gfortran.dg/Wno-all.f90", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgfortran.dg%2FWno-all.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/4428e682fbb43a7eba4af9db9d43ea5d55a82b57/gcc%2Ftestsuite%2Fgfortran.dg%2FWno-all.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2FWno-all.f90?ref=4428e682fbb43a7eba4af9db9d43ea5d55a82b57", "patch": "@@ -0,0 +1,12 @@\n+! PR 30437  Test for negative Wall\n+! { dg-do run }\n+! { dg-options \"-Wall -Wno-all\" }\n+program main\n+  character (len=40) &\n+  c\n+  c = \"Hello, &\n+         world!\" ! { dg-bogus \"Warning: Missing '&' in continued character constant\" }\n+  if (c.ne.&\n+                                   \"Hello, world!\")&\n+                               call abort();end program main\n+"}]}