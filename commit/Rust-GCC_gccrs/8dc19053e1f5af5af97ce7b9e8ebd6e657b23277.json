{"sha": "8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGRjMTkwNTNlMWY1YWY1YWY5N2NlN2I5ZThlYmQ2ZTY1N2IyMzI3Nw==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2017-03-09T09:22:29Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2017-03-09T09:22:29Z"}, "message": "Get bounds for a PARM_DECL (PR ipa/79761).\n\n2017-03-09  Martin Liska  <mliska@suse.cz>\n\n\tPR ipa/79761\n\t* tree-chkp.c (chkp_get_bound_for_parm): Get bounds for a param.\n\t(chkp_find_bounds_1): Remove gcc_unreachable.\n2017-03-09  Martin Liska  <mliska@suse.cz>\n\n\tPR ipa/79761\n\t* g++.dg/pr79761.C: New test.\n\nFrom-SVN: r245993", "tree": {"sha": "237ec5a5190c692675856739ba4df20c7a6e6606", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/237ec5a5190c692675856739ba4df20c7a6e6606"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bba81f1c84837b1a9bfd5daa46d263e87577af89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bba81f1c84837b1a9bfd5daa46d263e87577af89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bba81f1c84837b1a9bfd5daa46d263e87577af89"}], "stats": {"total": 49, "additions": 47, "deletions": 2}, "files": [{"sha": "b3ab72b3d8206239b7f7bc88f9f037043f297799", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "patch": "@@ -1,3 +1,9 @@\n+2017-03-09  Martin Liska  <mliska@suse.cz>\n+\n+\tPR ipa/79761\n+\t* tree-chkp.c (chkp_get_bound_for_parm): Get bounds for a param.\n+\t(chkp_find_bounds_1): Remove gcc_unreachable.\n+\n 2017-03-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR sanitizer/79944"}, {"sha": "371fdbb84282b6ab67db7b1408a633cc79e24b59", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "patch": "@@ -1,3 +1,8 @@\n+2017-03-09  Martin Liska  <mliska@suse.cz>\n+\n+\tPR ipa/79761\n+\t* g++.dg/pr79761.C: New test.\n+\n 2017-03-09  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR sanitizer/79944"}, {"sha": "a97325a1fc4db45159ff400ee7b012c813cbc6bd", "filename": "gcc/testsuite/g++.dg/pr79761.C", "status": "added", "additions": 34, "deletions": 0, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr79761.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr79761.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fpr79761.C?ref=8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "patch": "@@ -0,0 +1,34 @@\n+/* { dg-do compile { target { { i?86-*-* x86_64-*-* } && { ! x32 } } } } */\n+/* { dg-options \"-fcheck-pointer-bounds -mmpx -mabi=ms\" } */\n+\n+struct Foo\n+{\n+  Foo() : a(1), b(1), c('a') {}\n+  int a;\n+  int b;\n+  char c;\n+};\n+\n+static Foo copy_foo(Foo) __attribute__((noinline, noclone));\n+\n+static Foo copy_foo(Foo A)\n+{\n+  return A;\n+}\n+\n+struct Bar : Foo\n+{\n+  Bar(Foo t) : Foo(copy_foo(t)) {}\n+};\n+\n+Foo F;\n+\n+int main (void)\n+{\n+  Bar B (F);\n+\n+  if (B.a != 1 || B.b != 1 || B.c != 'a')\n+    __builtin_abort ();\n+\n+  return 0;\n+}"}, {"sha": "66612baaaff3bcf0ff58768c8a292137ab370802", "filename": "gcc/tree-chkp.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2Ftree-chkp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8dc19053e1f5af5af97ce7b9e8ebd6e657b23277/gcc%2Ftree-chkp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-chkp.c?ref=8dc19053e1f5af5af97ce7b9e8ebd6e657b23277", "patch": "@@ -3604,8 +3604,8 @@ chkp_find_bounds_1 (tree ptr, tree ptr_src, gimple_stmt_iterator *iter)\n       break;\n \n     case PARM_DECL:\n-      gcc_unreachable ();\n-      bounds = chkp_get_bound_for_parm (ptr_src);\n+      /* Handled above but failed.  */\n+      bounds = chkp_get_invalid_op_bounds ();\n       break;\n \n     case TARGET_MEM_REF:"}]}