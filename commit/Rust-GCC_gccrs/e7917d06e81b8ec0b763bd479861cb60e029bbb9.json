{"sha": "e7917d06e81b8ec0b763bd479861cb60e029bbb9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTc5MTdkMDZlODFiOGVjMGI3NjNiZDQ3OTg2MWNiNjBlMDI5YmJiOQ==", "commit": {"author": {"name": "Dirk Mueller", "email": "dmueller@suse.de", "date": "2007-01-31T13:43:40Z"}, "committer": {"name": "Dirk Mueller", "email": "mueller@gcc.gnu.org", "date": "2007-01-31T13:43:40Z"}, "message": "c-common.c (warn_about_parentheses): Separate warning about un-parenthized sequence of comparison operators from the...\n\n2007-01-31  Dirk Mueller  <dmueller@suse.de>\n\n        * c-common.c (warn_about_parentheses): Separate warning about\n        un-parenthized sequence of comparison operators from the one\n        which is supposed to warn about x <= y <= z.\n\n        * testsuite/gcc.dg/Wparentheses-2.c: Update and add new tests.\n\nFrom-SVN: r121421", "tree": {"sha": "3d17c03e4ce96fde3fa173a9f6e9fbd5991de70e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/3d17c03e4ce96fde3fa173a9f6e9fbd5991de70e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e7917d06e81b8ec0b763bd479861cb60e029bbb9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7917d06e81b8ec0b763bd479861cb60e029bbb9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e7917d06e81b8ec0b763bd479861cb60e029bbb9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e7917d06e81b8ec0b763bd479861cb60e029bbb9/comments", "author": null, "committer": null, "parents": [{"sha": "d9f414687eff2b7d3b4ffbd7f0ce00d892d76a90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d9f414687eff2b7d3b4ffbd7f0ce00d892d76a90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d9f414687eff2b7d3b4ffbd7f0ce00d892d76a90"}], "stats": {"total": 123, "additions": 99, "deletions": 24}, "files": [{"sha": "3433a8d1406b387b2a335e0681d407539024bc66", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e7917d06e81b8ec0b763bd479861cb60e029bbb9", "patch": "@@ -1,3 +1,9 @@\n+2007-01-31  Dirk Mueller  <dmueller@suse.de>\n+\n+\t* c-common.c (warn_about_parentheses): Separate warning about\n+\tun-parenthized sequence of comparison operators from the one\n+\twhich is supposed to warn about x <= y <= z.\n+\n 2007-01-31  Uros Bizjak  <ubizjak@gmail.com>\n \n \t* optabs.h (enum optab_index): Add new OTI_isinf."}, {"sha": "cfd382991d362c1e28d9f07d4af7bd2ab00f2ed4", "filename": "gcc/c-common.c", "status": "modified", "additions": 17, "deletions": 6, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-common.c?ref=e7917d06e81b8ec0b763bd479861cb60e029bbb9", "patch": "@@ -6750,12 +6750,23 @@ warn_about_parentheses (enum tree_code code, enum tree_code code_left,\n \t\t \"suggest parentheses around comparison in operand of &\");\n     }\n \n-  /* Similarly, check for cases like 1<=i<=10 that are probably errors.  */\n-  if (TREE_CODE_CLASS (code) == tcc_comparison\n-      && (TREE_CODE_CLASS (code_left) == tcc_comparison\n-\t  || TREE_CODE_CLASS (code_right) == tcc_comparison))\n-    warning (OPT_Wparentheses, \"comparisons like X<=Y<=Z do not \"\n-\t     \"have their mathematical meaning\");\n+  if (code == EQ_EXPR || code == NE_EXPR)\n+    {\n+      if (TREE_CODE_CLASS (code_left) == tcc_comparison\n+          || TREE_CODE_CLASS (code_right) == tcc_comparison)\n+\twarning (OPT_Wparentheses,\n+\t\t \"suggest parentheses around comparison in operand of %s\",\n+                 code == EQ_EXPR ? \"==\" : \"!=\");\n+    }\n+  else if (TREE_CODE_CLASS (code) == tcc_comparison)\n+    {\n+      if ((TREE_CODE_CLASS (code_left) == tcc_comparison\n+\t   && code_left != NE_EXPR && code_left != EQ_EXPR)\n+\t  || (TREE_CODE_CLASS (code_right) == tcc_comparison\n+\t      && code_right != NE_EXPR && code_right != EQ_EXPR))\n+\twarning (OPT_Wparentheses, \"comparisons like X<=Y<=Z do not \"\n+\t\t \"have their mathematical meaning\");\n+    }\n }\n \n /* If LABEL (a LABEL_DECL) has not been used, issue a warning.  */"}, {"sha": "137fea50e4fbdd828a412bd260bd1146fafaddfa", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e7917d06e81b8ec0b763bd479861cb60e029bbb9", "patch": "@@ -1,3 +1,7 @@\n+2007-01-31  Dirk Mueller  <dmueller@suse.de>\n+\n+\tgcc.dg/Wparentheses-2.c: Update and add new tests.\n+\n 2007-01-31  Ira Rosen  <irar@il.ibm.com> \n \n \t* gcc.dg/vect/vect-37.c: Restore the original behaivior - xfail to"}, {"sha": "51038c2d71526cdf0f409ac46eed6216e61c0140", "filename": "gcc/testsuite/gcc.dg/Wparentheses-2.c", "status": "modified", "additions": 72, "deletions": 18, "changes": 90, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2Ftestsuite%2Fgcc.dg%2FWparentheses-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e7917d06e81b8ec0b763bd479861cb60e029bbb9/gcc%2Ftestsuite%2Fgcc.dg%2FWparentheses-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2FWparentheses-2.c?ref=e7917d06e81b8ec0b763bd479861cb60e029bbb9", "patch": "@@ -10,58 +10,112 @@ int foo (int);\n int\n bar (int a, int b, int c)\n {\n-  foo (a <= b <= c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (a <= b <= c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((a <= b) <= c);\n   foo (a <= (b <= c));\n-  foo (1 <= 2 <= c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 <= 2 <= c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 <= 2) <= c);\n   foo (1 <= (2 <= c));\n-  foo (1 <= 2 <= 3); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 <= 2 <= 3); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 <= 2) <= 3);\n   foo (1 <= (2 <= 3));\n-  foo (a > b > c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (a > b > c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((a > b) > c);\n   foo (a > (b > c));\n-  foo (1 > 2 > c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 > 2 > c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 > 2) > c);\n   foo (1 > (2 > c));\n-  foo (1 > 2 > 3); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 > 2 > 3); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 > 2) > 3);\n   foo (1 > (2 > 3));\n-  foo (a < b <= c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (a < b <= c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((a < b) <= c);\n   foo (a < (b <= c));\n-  foo (1 < 2 <= c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 < 2 <= c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 < 2) <= c);\n   foo (1 < (2 <= c));\n-  foo (1 < 2 <= 3); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 < 2 <= 3); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 < 2) <= 3);\n   foo (1 < (2 <= 3));\n-  foo (a <= b > c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (a <= b > c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((a <= b) > c);\n   foo (a <= (b > c));\n-  foo (1 <= 2 > c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 <= 2 > c); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 <= 2) > c);\n   foo (1 <= (2 > c));\n-  foo (1 <= 2 > 3); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 <= 2 > 3); /* { dg-warning \"mathematical meaning\" \"correct warning\" } */\n   foo ((1 <= 2) > 3);\n   foo (1 <= (2 > 3));\n-  foo (a <= b == c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (a <= b == c); /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n   foo ((a <= b) == c);\n   foo (a <= (b == c));\n-  foo (1 <= 2 == c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 <= 2 == c); /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n   foo ((1 <= 2) == c);\n   foo (1 <= (2 == c));\n-  foo (1 <= 2 == 3); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 <= 2 == 3); /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n   foo ((1 <= 2) == 3);\n   foo (1 <= (2 == 3));\n-  foo (a != b != c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (a != b != c); /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n   foo ((a != b) != c);\n   foo (a != (b != c));\n-  foo (1 != 2 != c); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 != 2 != c); /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n   foo ((1 != 2) != c);\n   foo (1 != (2 != c));\n-  foo (1 != 2 != 3); /* { dg-warning \"comparison\" \"correct warning\" } */\n+  foo (1 != 2 != 3); /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n   foo ((1 != 2) != 3);\n   foo (1 != (2 != 3));\n+  foo (a < b == c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a < b) == c);\n+  foo (a < (b == c));\n+  foo (a > b == c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a > b) == c);\n+  foo (a > (b == c));\n+  foo (a == b < c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a == b) < c);\n+  foo (a == (b < c));\n+  foo (a == b > c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a == b) > c);\n+  foo (a == (b > c));\n+  foo (a == b == c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a == b) == c);\n+  foo (a == (b == c));\n+  foo (1 == 2 == 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 == 2) == 3);\n+  foo (1 == (2 == 3));\n+  foo (1 < 2 == 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 < 2) == 3);\n+  foo (1 < (2 == 3));\n+  foo (1 > 2 == 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 > 2) == 3);\n+  foo (1 > (2 == 3));\n+  foo (1 == 2 < 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 == 2) < 3);\n+  foo (1 == (2 < 3));\n+  foo (1 == 2 > 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 == 2) > 3);\n+  foo (1 == (2 > 3));\n+  foo (a < b != c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a < b) != c);\n+  foo (a < (b != c));\n+  foo (a > b != c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a > b) != c);\n+  foo (a > (b != c));\n+  foo (a != b < c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a != b) < c);\n+  foo (a != (b < c));\n+  foo (a != b > c);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((a != b) > c);\n+  foo (a != (b > c));\n+  foo (1 < 2 != 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 < 2) != 3);\n+  foo (1 < (2 != 3));\n+  foo (1 > 2 != 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 > 2) != 3);\n+  foo (1 > (2 != 3));\n+  foo (1 != 2 < 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 != 2) < 3);\n+  foo (1 != (2 < 3));\n+  foo (1 != 2 > 3);  /* { dg-warning \"suggest parentheses around comparison\" \"correct warning\" } */\n+  foo ((1 != 2) > 3);\n+  foo (1 != (2 > 3));\n }"}]}