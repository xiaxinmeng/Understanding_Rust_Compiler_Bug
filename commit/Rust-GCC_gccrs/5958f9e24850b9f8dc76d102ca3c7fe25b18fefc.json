{"sha": "5958f9e24850b9f8dc76d102ca3c7fe25b18fefc", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTk1OGY5ZTI0ODUwYjlmOGRjNzZkMTAyY2EzYzdmZTI1YjE4ZmVmYw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2016-01-23T09:54:53Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2016-01-23T09:54:53Z"}, "message": "tree-vect-stmts.c (vectorizable_condition): Build a VEC_COND_EXPR directly instead of building a temporary tree.\n\n\t* tree-vect-stmts.c (vectorizable_condition): Build a VEC_COND_EXPR\n\tdirectly instead of building a temporary tree.\n\nFrom-SVN: r232764", "tree": {"sha": "cf20c11044e5648d8397bd4be5eaad361f5c56a3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cf20c11044e5648d8397bd4be5eaad361f5c56a3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "bc0cbd52afc64bf9eedb238da196961987970d31", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc0cbd52afc64bf9eedb238da196961987970d31", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc0cbd52afc64bf9eedb238da196961987970d31"}], "stats": {"total": 15, "additions": 8, "deletions": 7}, "files": [{"sha": "e84d60a98dca4ba294d8593a7adcd75c96d3ded3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5958f9e24850b9f8dc76d102ca3c7fe25b18fefc", "patch": "@@ -1,5 +1,8 @@\n 2016-01-23  Jakub Jelinek  <jakub@redhat.com>\n \n+\t* tree-vect-stmts.c (vectorizable_condition): Build a VEC_COND_EXPR\n+\tdirectly instead of building a temporary tree.\n+\n \tPR bootstrap/69434\n \t* genrecog.c: Define INCLUDE_ALGORITHM before including system.h,\n \tremove <algorithm> include."}, {"sha": "c986a002078d8ddc1634e16f6ac7e6faf2665575", "filename": "gcc/tree-vect-stmts.c", "status": "modified", "additions": 5, "deletions": 7, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc/gcc%2Ftree-vect-stmts.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5958f9e24850b9f8dc76d102ca3c7fe25b18fefc/gcc%2Ftree-vect-stmts.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-stmts.c?ref=5958f9e24850b9f8dc76d102ca3c7fe25b18fefc", "patch": "@@ -7478,7 +7478,7 @@ vectorizable_condition (gimple *stmt, gimple_stmt_iterator *gsi,\n   tree comp_vectype = NULL_TREE;\n   tree vec_cond_lhs = NULL_TREE, vec_cond_rhs = NULL_TREE;\n   tree vec_then_clause = NULL_TREE, vec_else_clause = NULL_TREE;\n-  tree vec_compare, vec_cond_expr;\n+  tree vec_compare;\n   tree new_temp;\n   loop_vec_info loop_vinfo = STMT_VINFO_LOOP_VINFO (stmt_info);\n   enum vect_def_type dt, dts[4];\n@@ -7691,12 +7691,10 @@ vectorizable_condition (gimple *stmt, gimple_stmt_iterator *gsi,\n \t      vec_compare = build2 (TREE_CODE (cond_expr), vec_cmp_type,\n \t\t\t\t    vec_cond_lhs, vec_cond_rhs);\n \t    }\n-          vec_cond_expr = build3 (VEC_COND_EXPR, vectype,\n- \t\t         vec_compare, vec_then_clause, vec_else_clause);\n-\n-          new_stmt = gimple_build_assign (vec_dest, vec_cond_expr);\n-          new_temp = make_ssa_name (vec_dest, new_stmt);\n-          gimple_assign_set_lhs (new_stmt, new_temp);\n+          new_temp = make_ssa_name (vec_dest);\n+          new_stmt = gimple_build_assign (new_temp, VEC_COND_EXPR,\n+\t\t\t\t\t  vec_compare, vec_then_clause,\n+\t\t\t\t\t  vec_else_clause);\n           vect_finish_stmt_generation (stmt, new_stmt, gsi);\n           if (slp_node)\n             SLP_TREE_VEC_STMTS (slp_node).quick_push (new_stmt);"}]}