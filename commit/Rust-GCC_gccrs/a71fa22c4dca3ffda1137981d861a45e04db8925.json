{"sha": "a71fa22c4dca3ffda1137981d861a45e04db8925", "node_id": "C_kwDOANBUbNoAKGE3MWZhMjJjNGRjYTNmZmRhMTEzNzk4MWQ4NjFhNDVlMDRkYjg5MjU", "commit": {"author": {"name": "bors[bot]", "email": "26634292+bors[bot]@users.noreply.github.com", "date": "2022-06-02T11:18:30Z"}, "committer": {"name": "GitHub", "email": "noreply@github.com", "date": "2022-06-02T11:18:30Z"}, "message": "Merge #1288\n\n1288: docker: Add commit information to Docker image r=philberty a=CohenArthur\n\nCloses #1262 \n\nCo-authored-by: Arthur Cohen <arthur.cohen@embecosm.com>", "tree": {"sha": "b6a6785e3583fe69bab5ffa17cd30459972306a8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b6a6785e3583fe69bab5ffa17cd30459972306a8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/a71fa22c4dca3ffda1137981d861a45e04db8925", "comment_count": 0, "verification": {"verified": true, "reason": "valid", "signature": "-----BEGIN PGP SIGNATURE-----\n\nwsBcBAABCAAQBQJimJyGCRBK7hj4Ov3rIwAA26cIAEd2II8i5HIChKjzdIffzzmT\nBfpx0gxohk/X1gaNST7J0fdCvVesMJ0iEQ6PsB24Femzl4Pv4Ol86VJgJGZRzDFb\nprVlfwzbxj7GPSc8RSXAycBWTpIaFItZriv7dxOSCOh/dWkBUwICh8AAoK8JxbEL\nC22+itGrIA5evFFYaEsteZUVCWLbSTc99q/up7lCI8oeWQszN7mVdeWBCmODj13F\n/RmOlqZQDoACotUlX1P32aTiKyclfnSIOTlrCCFI29HR3nuhAMcpFwvZce3XTR95\nBciS7ldXBxHqukAwK0eLi7zPoL0vyTwmmUDktmo3UN5NcJ7qQG11hw6bHlhTPow=\n=0dZ9\n-----END PGP SIGNATURE-----\n", "payload": "tree b6a6785e3583fe69bab5ffa17cd30459972306a8\nparent 0866a4fbc6e7f70cd3708467419c60af8c6104f2\nparent e009a46e2267a622eeef02217e273deb8913029f\nauthor bors[bot] <26634292+bors[bot]@users.noreply.github.com> 1654168710 +0000\ncommitter GitHub <noreply@github.com> 1654168710 +0000\n\nMerge #1288\n\n1288: docker: Add commit information to Docker image r=philberty a=CohenArthur\n\nCloses #1262 \n\nCo-authored-by: Arthur Cohen <arthur.cohen@embecosm.com>\n"}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a71fa22c4dca3ffda1137981d861a45e04db8925", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a71fa22c4dca3ffda1137981d861a45e04db8925", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a71fa22c4dca3ffda1137981d861a45e04db8925/comments", "author": {"login": "bors[bot]", "id": 26634292, "node_id": "MDM6Qm90MjY2MzQyOTI=", "avatar_url": "https://avatars.githubusercontent.com/in/1847?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bors%5Bbot%5D", "html_url": "https://github.com/apps/bors", "followers_url": "https://api.github.com/users/bors%5Bbot%5D/followers", "following_url": "https://api.github.com/users/bors%5Bbot%5D/following{/other_user}", "gists_url": "https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}", "starred_url": "https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bors%5Bbot%5D/subscriptions", "organizations_url": "https://api.github.com/users/bors%5Bbot%5D/orgs", "repos_url": "https://api.github.com/users/bors%5Bbot%5D/repos", "events_url": "https://api.github.com/users/bors%5Bbot%5D/events{/privacy}", "received_events_url": "https://api.github.com/users/bors%5Bbot%5D/received_events", "type": "Bot", "site_admin": false}, "committer": {"login": "web-flow", "id": 19864447, "node_id": "MDQ6VXNlcjE5ODY0NDQ3", "avatar_url": "https://avatars.githubusercontent.com/u/19864447?v=4", "gravatar_id": "", "url": "https://api.github.com/users/web-flow", "html_url": "https://github.com/web-flow", "followers_url": "https://api.github.com/users/web-flow/followers", "following_url": "https://api.github.com/users/web-flow/following{/other_user}", "gists_url": "https://api.github.com/users/web-flow/gists{/gist_id}", "starred_url": "https://api.github.com/users/web-flow/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/web-flow/subscriptions", "organizations_url": "https://api.github.com/users/web-flow/orgs", "repos_url": "https://api.github.com/users/web-flow/repos", "events_url": "https://api.github.com/users/web-flow/events{/privacy}", "received_events_url": "https://api.github.com/users/web-flow/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "0866a4fbc6e7f70cd3708467419c60af8c6104f2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0866a4fbc6e7f70cd3708467419c60af8c6104f2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0866a4fbc6e7f70cd3708467419c60af8c6104f2"}, {"sha": "e009a46e2267a622eeef02217e273deb8913029f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e009a46e2267a622eeef02217e273deb8913029f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e009a46e2267a622eeef02217e273deb8913029f"}], "stats": {"total": 7, "additions": 6, "deletions": 1}, "files": [{"sha": "da97edacb9e802ea205f9d35409c24df05653d3c", "filename": "Dockerfile", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/a71fa22c4dca3ffda1137981d861a45e04db8925/Dockerfile", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/a71fa22c4dca3ffda1137981d861a45e04db8925/Dockerfile", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/Dockerfile?ref=a71fa22c4dca3ffda1137981d861a45e04db8925", "patch": "@@ -44,7 +44,8 @@ RUN apt-get update; \\\n     xz-utils \\\n     zlib1g-dev \\\n     flex \\\n-    bison\n+    bison \\\n+    git\n \n ADD . /usr/src/gcc\n RUN /bin/sh -c set -ex; \\\n@@ -58,6 +59,9 @@ RUN /bin/sh -c set -ex; \\\n     cd /root; \\\n     rm -rf /usr/src/gcc\n \n+RUN cd /usr/src/gcc; \\\n+  git log -1 --format=\"%h\" > /GCCRS_BUILD; \\\n+\n RUN /bin/sh -c set -ex; \\\n     echo '/usr/local/lib64' > /etc/ld.so.conf.d/local-lib64.conf; \\\n     ldconfig -v\n@@ -69,6 +73,7 @@ RUN /bin/sh -c set -ex; \\\n \n FROM rust:latest\n COPY --from=gcc-builder /usr/ /usr/\n+COPY --from=gcc-builder /GCCRS_BUILD /GCCRS_BUILD\n RUN cargo install --git https://github.com/Rust-GCC/cargo-gccrs cargo-gccrs\n \n CMD [\"bash\"]"}]}