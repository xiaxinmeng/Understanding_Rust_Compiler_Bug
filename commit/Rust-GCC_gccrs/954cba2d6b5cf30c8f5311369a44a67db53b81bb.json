{"sha": "954cba2d6b5cf30c8f5311369a44a67db53b81bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTU0Y2JhMmQ2YjVjZjMwYzhmNTMxMTM2OWE0NGE2N2RiNTNiODFiYg==", "commit": {"author": {"name": "Paolo Bonzini", "email": "bonzini@gnu.org", "date": "2005-05-17T10:26:27Z"}, "committer": {"name": "Paolo Bonzini", "email": "bonzini@gcc.gnu.org", "date": "2005-05-17T10:26:27Z"}, "message": "Makefile.am (Makefile.deps): Do not create native.list and bytecodes.list.\n\n2005-05-17  Paolo Bonzini  <bonzini@gnu.org>\n\n\t* Makefile.am (Makefile.deps): Do not create native.list and\n\tbytecodes.list.\n\t(all_native_compiled_dirs, all_java_dirs): Compute dir list here.\n\nFrom-SVN: r99827", "tree": {"sha": "682027ec303cfdda3c92dbb24f40497cdfa20732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/682027ec303cfdda3c92dbb24f40497cdfa20732"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/954cba2d6b5cf30c8f5311369a44a67db53b81bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/954cba2d6b5cf30c8f5311369a44a67db53b81bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/954cba2d6b5cf30c8f5311369a44a67db53b81bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/954cba2d6b5cf30c8f5311369a44a67db53b81bb/comments", "author": {"login": "bonzini", "id": 42082, "node_id": "MDQ6VXNlcjQyMDgy", "avatar_url": "https://avatars.githubusercontent.com/u/42082?v=4", "gravatar_id": "", "url": "https://api.github.com/users/bonzini", "html_url": "https://github.com/bonzini", "followers_url": "https://api.github.com/users/bonzini/followers", "following_url": "https://api.github.com/users/bonzini/following{/other_user}", "gists_url": "https://api.github.com/users/bonzini/gists{/gist_id}", "starred_url": "https://api.github.com/users/bonzini/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/bonzini/subscriptions", "organizations_url": "https://api.github.com/users/bonzini/orgs", "repos_url": "https://api.github.com/users/bonzini/repos", "events_url": "https://api.github.com/users/bonzini/events{/privacy}", "received_events_url": "https://api.github.com/users/bonzini/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "f8912a553ae9e4da3bcbdd9aaf802dd179434ebc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/f8912a553ae9e4da3bcbdd9aaf802dd179434ebc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/f8912a553ae9e4da3bcbdd9aaf802dd179434ebc"}], "stats": {"total": 85, "additions": 55, "deletions": 30}, "files": [{"sha": "21c35ad0cfc70b6826ed7f61b806a1ce0bbcf81f", "filename": "libjava/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/954cba2d6b5cf30c8f5311369a44a67db53b81bb/libjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/954cba2d6b5cf30c8f5311369a44a67db53b81bb/libjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FChangeLog?ref=954cba2d6b5cf30c8f5311369a44a67db53b81bb", "patch": "@@ -1,3 +1,10 @@\n+2005-05-17  Paolo Bonzini  <bonzini@gnu.org>\n+\n+\t* Makefile.am (Makefile.deps): Do not create native.list and\n+\tbytecodes.list.\n+\t(all_native_compiled_dirs, all_java_dirs): Compute dir list here.\n+\t* Makefile.in: Regenerate.\n+\n 2005-05-17  Paolo Bonzini  <bonzini@gnu.org>\n \n \t* configure.ac (--enable-libgcj-multifile): Remove."}, {"sha": "91ac1c9c56ffc77394bf29ce2184bd044c6ce243", "filename": "libjava/Makefile.am", "status": "modified", "additions": 24, "deletions": 15, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/954cba2d6b5cf30c8f5311369a44a67db53b81bb/libjava%2FMakefile.am", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/954cba2d6b5cf30c8f5311369a44a67db53b81bb/libjava%2FMakefile.am", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.am?ref=954cba2d6b5cf30c8f5311369a44a67db53b81bb", "patch": "@@ -247,27 +247,36 @@ all_java_source_files = \\\n \n EXTRA_DIST = $(all_java_source_files)\n \n-# Build a list of native and bytecode-compiled directories.  The Makefile\n-# depends on them, because they affect the definition of two variables\n-# below.\n-# Each directory's filelist file depends on the corresponding Java source files\n-# Each class file depends on the its directory's .stamp file\n-# Below, one .lo file is built per directory when the stamp file changes\n-\n+# Build dependencies between java, class and lo files.  They are included\n+# below, together with automatically-generated dependencies between Java\n+# files.\n+#\n+# Dependencies from Java to .class files\n+# --------------------------------------\n+# Each directory's filelist file depends on the corresponding Java source files.\n+# The stamp file depends on the filelist (using a `Static Pattern Rule').\n+# Each class file depends on the its directory's .stamp file.  This reflects\n+# the fact that 1) all classfiles are compiled in one go when the .stamp file\n+# is built and 2) anything which depends on a particular .class file must wait\n+# until its directory is processed and the .stamp file is created.\n+#\n+# Dependencies from Java to .lo files\n+# -----------------------------------\n+# As above, each directory's filelist file depends on the corresponding Java\n+# source files, and the stamp file depends on the filelist.  For native\n+# compilation, the lo file depends on the stamp file (also using a `Static\n+# Pattern Rule').  So, when one Java file changes, the filelist file is\n+# updated, the stamp file rule builds the .class files, and the .lo file rule\n+# recompiles to native code.\n Makefile.deps: $(srcdir)/Makefile.in\n \t@: $(call write_entries_to_file,$(all_java_source_files),files.tmplist)\n-\tsed 's,/[^/]*$$,,' \\\n-\t  files.tmplist | sort | uniq > bytecodes.list\n-\tsed -n '1,$(words $(all_native_compiled_source_files))s,/[^/]*$$,,p' \\\n-\t  files.tmplist | sort | uniq > native.list\n \techo 's,^\\(.*\\)/\\([^/]*\\)\\.java$$,\\1.list: \\0\\' > tmpsed\n \techo '\\1/\\2.class: \\1.stamp,' >> tmpsed\n-\tsed -ftmpsed files.tmplist \\\n-\t  > Makefile.deps\n+\tsed -ftmpsed files.tmplist > Makefile.deps\n \trm files.tmplist tmpsed\n \n-all_native_compiled_dirs := $(shell test -f native.list && cat native.list)\n-all_java_dirs := $(shell test -f bytecodes.list && cat bytecodes.list)\n+all_native_compiled_dirs = $(sort $(patsubst %/, %, $(dir $(all_native_compiled_source_files))))\n+all_java_dirs = $(sort $(patsubst %/, %, $(dir $(all_java_source_files))))\n all_java_lo_files = $(all_native_compiled_dirs:=.lo)\n all_java_deps_files = $(all_java_dirs:=.deps)\n all_java_stamp_files = $(all_java_dirs:=.stamp)"}, {"sha": "7e692a76e849cdcc817db7790e6f100c638a05e3", "filename": "libjava/Makefile.in", "status": "modified", "additions": 24, "deletions": 15, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/954cba2d6b5cf30c8f5311369a44a67db53b81bb/libjava%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/954cba2d6b5cf30c8f5311369a44a67db53b81bb/libjava%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libjava%2FMakefile.in?ref=954cba2d6b5cf30c8f5311369a44a67db53b81bb", "patch": "@@ -778,8 +778,8 @@ all_java_source_files = \\\n     gnu/gcj/tools/gcj_dbtool/Main.java\n \n EXTRA_DIST = $(all_java_source_files)\n-all_native_compiled_dirs := $(shell test -f native.list && cat native.list)\n-all_java_dirs := $(shell test -f bytecodes.list && cat bytecodes.list)\n+all_native_compiled_dirs = $(sort $(patsubst %/, %, $(dir $(all_native_compiled_source_files))))\n+all_java_dirs = $(sort $(patsubst %/, %, $(dir $(all_java_source_files))))\n all_java_lo_files = $(all_native_compiled_dirs:=.lo)\n all_java_deps_files = $(all_java_dirs:=.deps)\n all_java_stamp_files = $(all_java_dirs:=.stamp)\n@@ -6270,23 +6270,32 @@ uninstall-info: uninstall-info-recursive\n \tuninstall-toolexeclibLTLIBRARIES uninstall-toolexecmainlibDATA\n \n \n-# Build a list of native and bytecode-compiled directories.  The Makefile\n-# depends on them, because they affect the definition of two variables\n-# below.\n-# Each directory's filelist file depends on the corresponding Java source files\n-# Each class file depends on the its directory's .stamp file\n-# Below, one .lo file is built per directory when the stamp file changes\n-\n+# Build dependencies between java, class and lo files.  They are included\n+# below, together with automatically-generated dependencies between Java\n+# files.\n+#\n+# Dependencies from Java to .class files\n+# --------------------------------------\n+# Each directory's filelist file depends on the corresponding Java source files.\n+# The stamp file depends on the filelist (using a `Static Pattern Rule').\n+# Each class file depends on the its directory's .stamp file.  This reflects\n+# the fact that 1) all classfiles are compiled in one go when the .stamp file\n+# is built and 2) anything which depends on a particular .class file must wait\n+# until its directory is processed and the .stamp file is created.\n+#\n+# Dependencies from Java to .lo files\n+# -----------------------------------\n+# As above, each directory's filelist file depends on the corresponding Java\n+# source files, and the stamp file depends on the filelist.  For native\n+# compilation, the lo file depends on the stamp file (also using a `Static\n+# Pattern Rule').  So, when one Java file changes, the filelist file is\n+# updated, the stamp file rule builds the .class files, and the .lo file rule\n+# recompiles to native code.\n Makefile.deps: $(srcdir)/Makefile.in\n \t@: $(call write_entries_to_file,$(all_java_source_files),files.tmplist)\n-\tsed 's,/[^/]*$$,,' \\\n-\t  files.tmplist | sort | uniq > bytecodes.list\n-\tsed -n '1,$(words $(all_native_compiled_source_files))s,/[^/]*$$,,p' \\\n-\t  files.tmplist | sort | uniq > native.list\n \techo 's,^\\(.*\\)/\\([^/]*\\)\\.java$$,\\1.list: \\0\\' > tmpsed\n \techo '\\1/\\2.class: \\1.stamp,' >> tmpsed\n-\tsed -ftmpsed files.tmplist \\\n-\t  > Makefile.deps\n+\tsed -ftmpsed files.tmplist > Makefile.deps\n \trm files.tmplist tmpsed\n \n # Include automatically generated dependencies between Java source files."}]}