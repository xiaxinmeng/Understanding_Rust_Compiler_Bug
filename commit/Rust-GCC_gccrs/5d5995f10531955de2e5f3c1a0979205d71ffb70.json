{"sha": "5d5995f10531955de2e5f3c1a0979205d71ffb70", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWQ1OTk1ZjEwNTMxOTU1ZGUyZTVmM2MxYTA5NzkyMDVkNzFmZmI3MA==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2006-08-10T22:13:42Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2006-08-10T22:13:42Z"}, "message": "tree.c (build1_stat): Also propagate the TREE_CONSTANT and TREE_INVARIANT flags for a VIEW_CONVERT_EXPR.\n\n\t* tree.c (build1_stat): Also propagate the TREE_CONSTANT and\n\tTREE_INVARIANT flags for a VIEW_CONVERT_EXPR.\n\nFrom-SVN: r116071", "tree": {"sha": "441815d76c21086dcc274b40493bc2c69d55c061", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/441815d76c21086dcc274b40493bc2c69d55c061"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5d5995f10531955de2e5f3c1a0979205d71ffb70", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d5995f10531955de2e5f3c1a0979205d71ffb70", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5d5995f10531955de2e5f3c1a0979205d71ffb70", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5d5995f10531955de2e5f3c1a0979205d71ffb70/comments", "author": null, "committer": null, "parents": [{"sha": "b576b3a7fda3f914807f1296124f15fe791b5a60", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b576b3a7fda3f914807f1296124f15fe791b5a60", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b576b3a7fda3f914807f1296124f15fe791b5a60"}], "stats": {"total": 27, "additions": 25, "deletions": 2}, "files": [{"sha": "c42ae6017d531eca9e60d8adbb1ad49046ec988b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5d5995f10531955de2e5f3c1a0979205d71ffb70", "patch": "@@ -1,3 +1,8 @@\n+2006-08-11  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree.c (build1_stat): Also propagate the TREE_CONSTANT and\n+\tTREE_INVARIANT flags for a VIEW_CONVERT_EXPR.\n+\n 2006-08-10  Paul Brook  <paul@codesourcery.com>\n \n \t* final.c (final_scan_insn): Clear current_insn_predicate before"}, {"sha": "44a48940b8911e7d8ea6e0852ab48e5c9b952c9a", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5d5995f10531955de2e5f3c1a0979205d71ffb70", "patch": "@@ -1,3 +1,7 @@\n+2006-08-10  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* gnat.dg/specs/static_initializer.ads: New test.\n+\n 2006-08-10  Paul Brook  <paul@codesourcery.com>\n \n \t* gcc.target/arm/cond-asm.c: New test."}, {"sha": "8755c30d17be0367f12850c681ea51c03c521fcb", "filename": "gcc/testsuite/gnat.dg/specs/static_initializer.ads", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fstatic_initializer.ads", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fstatic_initializer.ads", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgnat.dg%2Fspecs%2Fstatic_initializer.ads?ref=5d5995f10531955de2e5f3c1a0979205d71ffb70", "patch": "@@ -0,0 +1,14 @@\n+-- { dg-do compile }\n+\n+package static_initializer is\n+\n+  type Vector is array (1 .. 3) of Float;\n+  type Arr is array (Integer range 1 .. 3) of Vector;\n+\n+  Pos : constant Arr := ((0.0, 1.0, 2.0),\n+                         (0.5, 1.5, 2.5),\n+                         (1.0, 2.0, 4.0));\n+\n+end;\n+\n+-- { dg-final { scan-assembler-not \"elabs\" } }"}, {"sha": "efccfb11d9a1e28d53056dfc85f1844694403852", "filename": "gcc/tree.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2Ftree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5d5995f10531955de2e5f3c1a0979205d71ffb70/gcc%2Ftree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.c?ref=5d5995f10531955de2e5f3c1a0979205d71ffb70", "patch": "@@ -2923,11 +2923,11 @@ build1_stat (enum tree_code code, tree type, tree node MEM_STAT_DECL)\n       break;\n \n     default:\n-      if (TREE_CODE_CLASS (code) == tcc_unary\n+      if ((TREE_CODE_CLASS (code) == tcc_unary || code == VIEW_CONVERT_EXPR)\n \t  && node && !TYPE_P (node)\n \t  && TREE_CONSTANT (node))\n \tTREE_CONSTANT (t) = 1;\n-      if (TREE_CODE_CLASS (code) == tcc_unary\n+      if ((TREE_CODE_CLASS (code) == tcc_unary || code == VIEW_CONVERT_EXPR)\n \t  && node && TREE_INVARIANT (node))\n \tTREE_INVARIANT (t) = 1;\n       if (TREE_CODE_CLASS (code) == tcc_reference"}]}