{"sha": "0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MGU3ZTA5ZGMxZWE3NjRjMDQyNjJhMWQzZDJhZGJhNzdhNzNiZGM3ZQ==", "commit": {"author": {"name": "Eric Christopher", "email": "echristo@apple.com", "date": "2006-11-01T05:20:05Z"}, "committer": {"name": "Geoffrey Keating", "email": "geoffk@gcc.gnu.org", "date": "2006-11-01T05:20:05Z"}, "message": "builtin-bswap-1.c: New.\n\n2006-10-31  Eric Christopher  <echristo@apple.com>\n\t    Falk Hueffner  <falk@debian.org>\n\n\t* gcc.dg/builtin-bswap-1.c: New.\n\t* gcc.dg/builtin-bswap-2.c: New.\n\t* gcc.dg/builtin-bswap-3.c: New.\n\t* gcc.dg/builtin-bswap-4.c: New.\n\t* gcc.dg/builtin-bswap-5.c: New.\n\t* gcc.target/i386/builtin-bswap-1.c: New.\n\nCo-Authored-By: Falk Hueffner <falk@debian.org>\n\nFrom-SVN: r118364", "tree": {"sha": "544eecf6a9b2b5a2b237b57685072451e865376d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/544eecf6a9b2b5a2b237b57685072451e865376d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/comments", "author": {"login": "echristo", "id": 327308, "node_id": "MDQ6VXNlcjMyNzMwOA==", "avatar_url": "https://avatars.githubusercontent.com/u/327308?v=4", "gravatar_id": "", "url": "https://api.github.com/users/echristo", "html_url": "https://github.com/echristo", "followers_url": "https://api.github.com/users/echristo/followers", "following_url": "https://api.github.com/users/echristo/following{/other_user}", "gists_url": "https://api.github.com/users/echristo/gists{/gist_id}", "starred_url": "https://api.github.com/users/echristo/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/echristo/subscriptions", "organizations_url": "https://api.github.com/users/echristo/orgs", "repos_url": "https://api.github.com/users/echristo/repos", "events_url": "https://api.github.com/users/echristo/events{/privacy}", "received_events_url": "https://api.github.com/users/echristo/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "91053e6c256943a21b08658aa8f386b4f1f67c32", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/91053e6c256943a21b08658aa8f386b4f1f67c32", "html_url": "https://github.com/Rust-GCC/gccrs/commit/91053e6c256943a21b08658aa8f386b4f1f67c32"}], "stats": {"total": 149, "additions": 149, "deletions": 0}, "files": [{"sha": "95f4301c7ed02f63b90ddfb8463217b9ae78db41", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -1,3 +1,13 @@\n+2006-10-31  Eric Christopher  <echristo@apple.com>\n+\t    Falk Hueffner  <falk@debian.org>\n+\n+\t* gcc.dg/builtin-bswap-1.c: New.\n+\t* gcc.dg/builtin-bswap-2.c: New.\n+\t* gcc.dg/builtin-bswap-3.c: New.\n+\t* gcc.dg/builtin-bswap-4.c: New.\n+\t* gcc.dg/builtin-bswap-5.c: New.\n+\t* gcc.dg/i386/builtin-bswap-1.c: New.\n+\n 2006-10-31  Geoffrey Keating  <geoffk@apple.com>\n \n \t* gcc.dg/inline-16.c: New."}, {"sha": "02912db5a0d66275e9bd009de1c934efdd813326", "filename": "gcc/testsuite/gcc.dg/builtin-bswap-1.c", "status": "added", "additions": 14, "deletions": 0, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-1.c?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -0,0 +1,14 @@\n+/* { dg-do compile } */\n+/* { dg-options \"\" } */\n+/* { dg-final { scan-assembler-not \"__builtin_\" } } */\n+\n+#include <stdint.h>\n+\n+uint32_t foo (uint32_t a)\n+{\n+  int b;\n+\n+  b = __builtin_bswap32 (a);\n+\n+  return b;\n+}"}, {"sha": "f601056db22ea53b6b9d1249f9b1b28478a3fcf4", "filename": "gcc/testsuite/gcc.dg/builtin-bswap-2.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-2.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-2.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-2.c?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do run } */\n+/* { dg-options \"\" } */\n+#include <stdint.h>\n+\n+extern void abort (void);\n+\n+int main (void)\n+{\n+  uint32_t a = 4;\n+  uint32_t b;\n+\n+  b = __builtin_bswap32 (a);\n+  a = __builtin_bswap32 (b);\n+\n+  if (b == 4 || a != 4)\n+    abort ();\n+\n+  return 0;\n+}"}, {"sha": "3416d65085d9d751741ae1f46e9c00d74bc0a761", "filename": "gcc/testsuite/gcc.dg/builtin-bswap-3.c", "status": "added", "additions": 19, "deletions": 0, "changes": 19, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-3.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-3.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-3.c?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -0,0 +1,19 @@\n+/* { dg-do run } */\n+/* { dg-options \"\" } */\n+#include <stdint.h>\n+\n+extern void abort (void);\n+\n+int main (void)\n+{\n+  uint32_t a = 0x80000000;\n+  uint32_t b;\n+\n+  b = __builtin_bswap32 (a);\n+  a = __builtin_bswap32 (b);\n+\n+  if (b != 0x80 || a != 0x80000000)\n+    abort ();\n+\n+  return 0;\n+}"}, {"sha": "d14358e2dedb33049361444958a84a1dae9648a5", "filename": "gcc/testsuite/gcc.dg/builtin-bswap-4.c", "status": "added", "additions": 59, "deletions": 0, "changes": 59, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-4.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-4.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-4.c?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -0,0 +1,59 @@\n+/* { dg-do run } */\n+/* { dg-options \"-Wall\" } */\n+\n+#include <stdint.h>\n+\n+#define MAKE_FUN(suffix, type)\t\t\t\t\t\t\\\n+  type my_bswap##suffix(type x) {\t\t\t\t\t\\\n+    type result = 0;\t\t\t\t\t\t\t\\\n+    int shift;\t\t\t\t\t\t\t\t\\\n+    for (shift = 0; shift < 8 * sizeof (type); shift += 8)\t\\\n+      {\t\t\t\t\t\t\t\t\t\\\n+\tresult <<= 8;\t\t\t\t\t\t\t\\\n+\tresult |= (x >> shift) & 0xff;\t\t\t\t\t\\\n+      }\t\t\t\t\t\t\t\t\t\\\n+    return result;\t\t\t\t\t\t\t\\\n+  }\t\t\t\t\t\t\t\t\t\\\n+\n+MAKE_FUN(32, uint32_t);\n+MAKE_FUN(64, uint64_t);\n+\n+extern void abort (void);\n+\n+#define NUMS32\t\t\t\t\t\\\n+  {\t\t\t\t\t\t\\\n+    0x00000000UL,\t\t\t\t\\\n+    0x11223344UL,\t\t\t\t\\\n+    0xffffffffUL,\t\t\t\t\\\n+  }\n+\n+#define NUMS64\t\t\t\t\t\\\n+  {\t\t\t\t\t\t\\\n+    0x0000000000000000ULL,\t\t\t\\\n+    0x1122334455667788ULL,\t\t\t\\\n+    0xffffffffffffffffULL,\t\t\t\\\n+  }\n+\n+uint32_t uint32_ts[] =\n+  NUMS32;\n+\n+uint64_t uint64_ts[] =\n+  NUMS64;\n+\n+#define N(table) (sizeof (table) / sizeof (table[0]))\n+\n+int\n+main (void)\n+{\n+  int i;\n+\n+  for (i = 0; i < N(uint32_ts); i++)\n+    if (__builtin_bswap32 (uint32_ts[i]) != my_bswap32 (uint32_ts[i]))\n+      abort ();\n+\n+  for (i = 0; i < N(uint64_ts); i++)\n+    if (__builtin_bswap64 (uint64_ts[i]) != my_bswap64 (uint64_ts[i]))\n+      abort ();\n+\n+  return 0;\n+}"}, {"sha": "ccac9663334decf0eca760e6d33df97113398990", "filename": "gcc/testsuite/gcc.dg/builtin-bswap-5.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-5.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-5.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fbuiltin-bswap-5.c?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O\" } */\n+int\n+main (void)\n+{\n+  /* Test constant folding.  */\n+  extern void link_error (void);\n+\n+  if (__builtin_bswap32(0xaabbccdd) != 0xddccbbaa)\n+    link_error ();\n+\n+  if (__builtin_bswap64(0x1122334455667788ULL) != 0x8877665544332211ULL)\n+    link_error ();\n+\n+  return 0;\n+}"}, {"sha": "a3cf0a0d0f9db9453815455326fa048a76b0cddb", "filename": "gcc/testsuite/gcc.target/i386/builtin-bswap-1.c", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fbuiltin-bswap-1.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fbuiltin-bswap-1.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fbuiltin-bswap-1.c?ref=0e7e09dc1ea764c04262a1d3d2adba77a73bdc7e", "patch": "@@ -0,0 +1,12 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-march=i486\" } */\n+/* { dg-final { scan-assembler \"bswap\" } } */\n+\n+int foo (int a)\n+{\n+  int b;\n+\n+  b = __builtin_bswap (a);\n+\n+  return b;\n+}"}]}