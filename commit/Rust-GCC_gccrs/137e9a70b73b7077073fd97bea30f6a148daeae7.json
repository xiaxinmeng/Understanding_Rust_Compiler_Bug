{"sha": "137e9a70b73b7077073fd97bea30f6a148daeae7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTM3ZTlhNzBiNzNiNzA3NzA3M2ZkOTdiZWEzMGY2YTE0OGRhZWFlNw==", "commit": {"author": {"name": "Andreas Krebbel", "email": "krebbel1@de.ibm.com", "date": "2007-10-28T10:14:21Z"}, "committer": {"name": "Andreas Krebbel", "email": "krebbel@gcc.gnu.org", "date": "2007-10-28T10:14:21Z"}, "message": "dce.c (delete_unmarked_insns): Just delete the RETVAL and LIBCALL notes if...\n\n2007-10-28  Andreas Krebbel  <krebbel1@de.ibm.com>\n\n\t* dce.c (delete_unmarked_insns): Just delete the RETVAL and\n\tLIBCALL notes if they are about to be moved to the same insn.\n\nFrom-SVN: r129693", "tree": {"sha": "5428021c4a21da831fb98d6cb297d06cef563f3e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5428021c4a21da831fb98d6cb297d06cef563f3e"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/137e9a70b73b7077073fd97bea30f6a148daeae7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/137e9a70b73b7077073fd97bea30f6a148daeae7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/137e9a70b73b7077073fd97bea30f6a148daeae7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/137e9a70b73b7077073fd97bea30f6a148daeae7/comments", "author": null, "committer": null, "parents": [{"sha": "c7a7567d5248031d457dbe8ba0923fcfa1db0173", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7a7567d5248031d457dbe8ba0923fcfa1db0173", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7a7567d5248031d457dbe8ba0923fcfa1db0173"}], "stats": {"total": 20, "additions": 16, "deletions": 4}, "files": [{"sha": "ef136a53d876bfae40209d0e3db9bb914a70a361", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/137e9a70b73b7077073fd97bea30f6a148daeae7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/137e9a70b73b7077073fd97bea30f6a148daeae7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=137e9a70b73b7077073fd97bea30f6a148daeae7", "patch": "@@ -1,3 +1,8 @@\n+2007-10-28  Andreas Krebbel  <krebbel1@de.ibm.com>\n+\n+\t* dce.c (delete_unmarked_insns): Just delete the RETVAL and\n+\tLIBCALL notes if they are about to be moved to the same insn.\n+\n 2007-10-27  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/33870"}, {"sha": "e63a07a9ef4213f71c170b73f53a7f29a5929ef3", "filename": "gcc/dce.c", "status": "modified", "additions": 11, "deletions": 4, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/137e9a70b73b7077073fd97bea30f6a148daeae7/gcc%2Fdce.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/137e9a70b73b7077073fd97bea30f6a148daeae7/gcc%2Fdce.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdce.c?ref=137e9a70b73b7077073fd97bea30f6a148daeae7", "patch": "@@ -346,10 +346,17 @@ delete_unmarked_insns (void)\n \t      rtx new_libcall_insn = next_real_insn (insn);\n \t      rtx retval_note = find_reg_note (XEXP (note, 0),\n \t\t\t\t\t       REG_RETVAL, NULL_RTX);\n-\t      REG_NOTES (new_libcall_insn)\n-\t\t= gen_rtx_INSN_LIST (REG_LIBCALL, XEXP (note, 0),\n-\t\t\t\t     REG_NOTES (new_libcall_insn));\n-\t      XEXP (retval_note, 0) = new_libcall_insn;\n+\t      /* If the RETVAL and LIBCALL notes would land on the same\n+\t\t insn just remove them.  */\n+\t      if (XEXP (note, 0) == new_libcall_insn)\n+\t\tremove_note (new_libcall_insn, retval_note);\n+\t      else\n+\t\t{\n+\t\t  REG_NOTES (new_libcall_insn)\n+\t\t    = gen_rtx_INSN_LIST (REG_LIBCALL, XEXP (note, 0),\n+\t\t\t\t\t REG_NOTES (new_libcall_insn));\n+\t\t  XEXP (retval_note, 0) = new_libcall_insn;\n+\t\t}\n \t    }\n \n \t  /* If the insn contains a REG_RETVAL note and is dead, but the"}]}