{"sha": "90f7636bf8df50940e0f749af60a6b374a8f09b4", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTBmNzYzNmJmOGRmNTA5NDBlMGY3NDlhZjYwYTZiMzc0YThmMDliNA==", "commit": {"author": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-08-10T12:21:59Z"}, "committer": {"name": "Jonathan Wakely", "email": "jwakely@redhat.com", "date": "2020-08-10T12:21:59Z"}, "message": "libstdc++: Make C++17 ignore --disable-libstdcxx-filesystem-ts [PR 94681]\n\nThe configure switch should only affect the optional Filesystem TS, not\nthe std::filesystem features of C++17.\n\nlibstdc++-v3/ChangeLog:\n\n\tPR libstdc++/94681\n\t* acinclude.m4 (GLIBCXX_CHECK_FILESYSTEM_DEPS): Do not depend on\n\t$enable_libstdcxx_filesystem_ts.\n\t* configure: Regenerate.", "tree": {"sha": "5230ab1742e819eefab11ff623dd9a307d3ec027", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5230ab1742e819eefab11ff623dd9a307d3ec027"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/90f7636bf8df50940e0f749af60a6b374a8f09b4", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90f7636bf8df50940e0f749af60a6b374a8f09b4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/90f7636bf8df50940e0f749af60a6b374a8f09b4", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/90f7636bf8df50940e0f749af60a6b374a8f09b4/comments", "author": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "committer": {"login": "jwakely", "id": 1254480, "node_id": "MDQ6VXNlcjEyNTQ0ODA=", "avatar_url": "https://avatars.githubusercontent.com/u/1254480?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jwakely", "html_url": "https://github.com/jwakely", "followers_url": "https://api.github.com/users/jwakely/followers", "following_url": "https://api.github.com/users/jwakely/following{/other_user}", "gists_url": "https://api.github.com/users/jwakely/gists{/gist_id}", "starred_url": "https://api.github.com/users/jwakely/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jwakely/subscriptions", "organizations_url": "https://api.github.com/users/jwakely/orgs", "repos_url": "https://api.github.com/users/jwakely/repos", "events_url": "https://api.github.com/users/jwakely/events{/privacy}", "received_events_url": "https://api.github.com/users/jwakely/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "2203a80a72cb582364245b6997d0724a5f84e062", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2203a80a72cb582364245b6997d0724a5f84e062", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2203a80a72cb582364245b6997d0724a5f84e062"}], "stats": {"total": 697, "additions": 347, "deletions": 350}, "files": [{"sha": "26cf21975499d3e23769a41eab20c592eb70b91a", "filename": "libstdc++-v3/acinclude.m4", "status": "modified", "additions": 206, "deletions": 207, "changes": 413, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90f7636bf8df50940e0f749af60a6b374a8f09b4/libstdc%2B%2B-v3%2Facinclude.m4", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90f7636bf8df50940e0f749af60a6b374a8f09b4/libstdc%2B%2B-v3%2Facinclude.m4", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Facinclude.m4?ref=90f7636bf8df50940e0f749af60a6b374a8f09b4", "patch": "@@ -4536,7 +4536,8 @@ AC_DEFUN([GLIBCXX_ENABLE_FILESYSTEM_TS], [\n ])\n \n dnl\n-dnl Check whether the library calls required by the Filesystem TS are present.\n+dnl Check whether the library calls required by the C++17 Filesystem library\n+dnl and the Filesystem TS are present.\n dnl Defines:\n dnl  HAVE_STRUCT_DIRENT_D_TYPE\n dnl  _GLIBCXX_USE_REALPATH\n@@ -4551,226 +4552,224 @@ dnl  HAVE_SYMLINK\n dnl\n AC_DEFUN([GLIBCXX_CHECK_FILESYSTEM_DEPS], [dnl\n dnl\n-  if test $enable_libstdcxx_filesystem_ts = yes; then\n-    AC_LANG_SAVE\n-    AC_LANG_CPLUSPLUS\n-    ac_save_CXXFLAGS=\"$CXXFLAGS\"\n-    CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n+  AC_LANG_SAVE\n+  AC_LANG_CPLUSPLUS\n+  ac_save_CXXFLAGS=\"$CXXFLAGS\"\n+  CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n dnl\n-    AC_MSG_CHECKING([for struct dirent.d_type])\n-    AC_CACHE_VAL(glibcxx_cv_dirent_d_type, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [#include <dirent.h>],\n-        [\n-         struct dirent d;\n-         if (sizeof d.d_type) return 0;\n-        ],\n-        [glibcxx_cv_dirent_d_type=yes],\n-        [glibcxx_cv_dirent_d_type=no])\n-    ])\n-    if test $glibcxx_cv_dirent_d_type = yes; then\n-      AC_DEFINE(HAVE_STRUCT_DIRENT_D_TYPE, 1, [Define to 1 if `d_type' is a member of `struct dirent'.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_dirent_d_type)\n+  AC_MSG_CHECKING([for struct dirent.d_type])\n+  AC_CACHE_VAL(glibcxx_cv_dirent_d_type, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [#include <dirent.h>],\n+      [\n+       struct dirent d;\n+       if (sizeof d.d_type) return 0;\n+      ],\n+      [glibcxx_cv_dirent_d_type=yes],\n+      [glibcxx_cv_dirent_d_type=no])\n+  ])\n+  if test $glibcxx_cv_dirent_d_type = yes; then\n+    AC_DEFINE(HAVE_STRUCT_DIRENT_D_TYPE, 1, [Define to 1 if `d_type' is a member of `struct dirent'.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_dirent_d_type)\n dnl\n-    AC_MSG_CHECKING([for realpath])\n-    AC_CACHE_VAL(glibcxx_cv_realpath, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [\n-         #include <limits.h>\n-         #include <stdlib.h>\n-         #include <unistd.h>\n-        ],\n-        [\n-         #if _XOPEN_VERSION < 500\n-         #error\n-         #elif _XOPEN_VERSION >= 700 || defined(PATH_MAX)\n-         char *tmp = realpath((const char*)NULL, (char*)NULL);\n-         #else\n-         #error\n-         #endif\n-        ],\n-        [glibcxx_cv_realpath=yes],\n-        [glibcxx_cv_realpath=no])\n-    ])\n-    if test $glibcxx_cv_realpath = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_REALPATH, 1, [Define if usable realpath is available in <stdlib.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_realpath)\n+  AC_MSG_CHECKING([for realpath])\n+  AC_CACHE_VAL(glibcxx_cv_realpath, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [\n+       #include <limits.h>\n+       #include <stdlib.h>\n+       #include <unistd.h>\n+      ],\n+      [\n+       #if _XOPEN_VERSION < 500\n+       #error\n+       #elif _XOPEN_VERSION >= 700 || defined(PATH_MAX)\n+       char *tmp = realpath((const char*)NULL, (char*)NULL);\n+       #else\n+       #error\n+       #endif\n+      ],\n+      [glibcxx_cv_realpath=yes],\n+      [glibcxx_cv_realpath=no])\n+  ])\n+  if test $glibcxx_cv_realpath = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_REALPATH, 1, [Define if usable realpath is available in <stdlib.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_realpath)\n dnl\n-    AC_MSG_CHECKING([for utimensat])\n-    AC_CACHE_VAL(glibcxx_cv_utimensat, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [\n-          #include <fcntl.h>\n-          #include <sys/stat.h>\n-        ],\n-        [\n-          struct timespec ts[2] = { { 0, UTIME_OMIT }, { 1, 1 } };\n-          int i = utimensat(AT_FDCWD, \"path\", ts, 0);\n-        ],\n-        [glibcxx_cv_utimensat=yes],\n-        [glibcxx_cv_utimensat=no])\n-    ])\n-    if test $glibcxx_cv_utimensat = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_UTIMENSAT, 1, [Define if utimensat and UTIME_OMIT are available in <sys/stat.h> and AT_FDCWD in <fcntl.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_utimensat)\n+  AC_MSG_CHECKING([for utimensat])\n+  AC_CACHE_VAL(glibcxx_cv_utimensat, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [\n+\t#include <fcntl.h>\n+\t#include <sys/stat.h>\n+      ],\n+      [\n+\tstruct timespec ts[2] = { { 0, UTIME_OMIT }, { 1, 1 } };\n+\tint i = utimensat(AT_FDCWD, \"path\", ts, 0);\n+      ],\n+      [glibcxx_cv_utimensat=yes],\n+      [glibcxx_cv_utimensat=no])\n+  ])\n+  if test $glibcxx_cv_utimensat = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_UTIMENSAT, 1, [Define if utimensat and UTIME_OMIT are available in <sys/stat.h> and AT_FDCWD in <fcntl.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_utimensat)\n dnl\n-    AC_MSG_CHECKING([for utime])\n-    AC_CACHE_VAL(glibcxx_cv_utime, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [\n-          #include <utime.h>\n-        ],\n-        [\n-          struct utimbuf t = { 1, 1 };\n-          int i = utime(\"path\", &t);\n-        ],\n-        [glibcxx_cv_utime=yes],\n-        [glibcxx_cv_utime=no])\n-    ])\n-    if test $glibcxx_cv_utime = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_UTIME, 1, [Define if utime is available in <utime.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_utime)\n+  AC_MSG_CHECKING([for utime])\n+  AC_CACHE_VAL(glibcxx_cv_utime, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [\n+\t#include <utime.h>\n+      ],\n+      [\n+\tstruct utimbuf t = { 1, 1 };\n+\tint i = utime(\"path\", &t);\n+      ],\n+      [glibcxx_cv_utime=yes],\n+      [glibcxx_cv_utime=no])\n+  ])\n+  if test $glibcxx_cv_utime = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_UTIME, 1, [Define if utime is available in <utime.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_utime)\n dnl\n-    AC_MSG_CHECKING([for lstat])\n-    AC_CACHE_VAL(glibcxx_cv_lstat, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [ #include <sys/stat.h> ],\n-        [\n-          struct stat st;\n-          int i = lstat(\"path\", &st);\n-        ],\n-        [glibcxx_cv_lstat=yes],\n-        [glibcxx_cv_lstat=no])\n-    ])\n-    if test $glibcxx_cv_lstat = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_LSTAT, 1, [Define if lstat is available in <sys/stat.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_lstat)\n+  AC_MSG_CHECKING([for lstat])\n+  AC_CACHE_VAL(glibcxx_cv_lstat, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [ #include <sys/stat.h> ],\n+      [\n+\tstruct stat st;\n+\tint i = lstat(\"path\", &st);\n+      ],\n+      [glibcxx_cv_lstat=yes],\n+      [glibcxx_cv_lstat=no])\n+  ])\n+  if test $glibcxx_cv_lstat = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_LSTAT, 1, [Define if lstat is available in <sys/stat.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_lstat)\n dnl\n-    AC_MSG_CHECKING([for struct stat.st_mtim.tv_nsec])\n-    AC_CACHE_VAL(glibcxx_cv_st_mtim, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [ #include <sys/stat.h> ],\n-        [\n-          struct stat st;\n-          return st.st_mtim.tv_nsec;\n-        ],\n-        [glibcxx_cv_st_mtim=yes],\n-        [glibcxx_cv_st_mtim=no])\n-    ])\n-    if test $glibcxx_cv_st_mtim = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_ST_MTIM, 1, [Define if struct stat has timespec members.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_st_mtim)\n+  AC_MSG_CHECKING([for struct stat.st_mtim.tv_nsec])\n+  AC_CACHE_VAL(glibcxx_cv_st_mtim, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [ #include <sys/stat.h> ],\n+      [\n+\tstruct stat st;\n+\treturn st.st_mtim.tv_nsec;\n+      ],\n+      [glibcxx_cv_st_mtim=yes],\n+      [glibcxx_cv_st_mtim=no])\n+  ])\n+  if test $glibcxx_cv_st_mtim = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_ST_MTIM, 1, [Define if struct stat has timespec members.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_st_mtim)\n dnl\n-    AC_MSG_CHECKING([for fchmod])\n-    AC_CACHE_VAL(glibcxx_cv_fchmod, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [#include <sys/stat.h>],\n-        [fchmod(1, S_IWUSR);],\n-        [glibcxx_cv_fchmod=yes],\n-        [glibcxx_cv_fchmod=no])\n-    ])\n-    if test $glibcxx_cv_fchmod = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_FCHMOD, 1, [Define if fchmod is available in <sys/stat.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_fchmod)\n+  AC_MSG_CHECKING([for fchmod])\n+  AC_CACHE_VAL(glibcxx_cv_fchmod, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [#include <sys/stat.h>],\n+      [fchmod(1, S_IWUSR);],\n+      [glibcxx_cv_fchmod=yes],\n+      [glibcxx_cv_fchmod=no])\n+  ])\n+  if test $glibcxx_cv_fchmod = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_FCHMOD, 1, [Define if fchmod is available in <sys/stat.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_fchmod)\n dnl\n-    AC_MSG_CHECKING([for fchmodat])\n-    AC_CACHE_VAL(glibcxx_cv_fchmodat, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [\n-          #include <fcntl.h>\n-          #include <sys/stat.h>\n-        ],\n-        [fchmodat(AT_FDCWD, \"\", 0, AT_SYMLINK_NOFOLLOW);],\n-        [glibcxx_cv_fchmodat=yes],\n-        [glibcxx_cv_fchmodat=no])\n-    ])\n-    if test $glibcxx_cv_fchmodat = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_FCHMODAT, 1, [Define if fchmodat is available in <sys/stat.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_fchmodat)\n-dnl\n-    AC_MSG_CHECKING([for sendfile that can copy files])\n-    AC_CACHE_VAL(glibcxx_cv_sendfile, [dnl\n-      case \"${target_os}\" in\n-        gnu* | linux* | solaris* | uclinux*)\n-          GCC_TRY_COMPILE_OR_LINK(\n-            [#include <sys/sendfile.h>],\n-            [sendfile(1, 2, (off_t*)0, sizeof 1);],\n-            [glibcxx_cv_sendfile=yes],\n-            [glibcxx_cv_sendfile=no])\n-          ;;\n-        *)\n-          glibcxx_cv_sendfile=no\n-          ;;\n-      esac\n-    ])\n-    if test $glibcxx_cv_sendfile = yes; then\n-      AC_DEFINE(_GLIBCXX_USE_SENDFILE, 1, [Define if sendfile is available in <sys/sendfile.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_sendfile)\n+  AC_MSG_CHECKING([for fchmodat])\n+  AC_CACHE_VAL(glibcxx_cv_fchmodat, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [\n+\t#include <fcntl.h>\n+\t#include <sys/stat.h>\n+      ],\n+      [fchmodat(AT_FDCWD, \"\", 0, AT_SYMLINK_NOFOLLOW);],\n+      [glibcxx_cv_fchmodat=yes],\n+      [glibcxx_cv_fchmodat=no])\n+  ])\n+  if test $glibcxx_cv_fchmodat = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_FCHMODAT, 1, [Define if fchmodat is available in <sys/stat.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_fchmodat)\n dnl\n-    AC_MSG_CHECKING([for link])\n-    AC_CACHE_VAL(glibcxx_cv_link, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [#include <unistd.h>],\n-        [link(\"\", \"\");],\n-        [glibcxx_cv_link=yes],\n-        [glibcxx_cv_link=no])\n-    ])\n-    if test $glibcxx_cv_link = yes; then\n-      AC_DEFINE(HAVE_LINK, 1, [Define if link is available in <unistd.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_link)\n+  AC_MSG_CHECKING([for sendfile that can copy files])\n+  AC_CACHE_VAL(glibcxx_cv_sendfile, [dnl\n+    case \"${target_os}\" in\n+      gnu* | linux* | solaris* | uclinux*)\n+\tGCC_TRY_COMPILE_OR_LINK(\n+\t  [#include <sys/sendfile.h>],\n+\t  [sendfile(1, 2, (off_t*)0, sizeof 1);],\n+\t  [glibcxx_cv_sendfile=yes],\n+\t  [glibcxx_cv_sendfile=no])\n+\t;;\n+      *)\n+\tglibcxx_cv_sendfile=no\n+\t;;\n+    esac\n+  ])\n+  if test $glibcxx_cv_sendfile = yes; then\n+    AC_DEFINE(_GLIBCXX_USE_SENDFILE, 1, [Define if sendfile is available in <sys/sendfile.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_sendfile)\n dnl\n-    AC_MSG_CHECKING([for readlink])\n-    AC_CACHE_VAL(glibcxx_cv_readlink, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [#include <unistd.h>],\n-        [char buf[32]; readlink(\"\", buf, sizeof(buf));],\n-        [glibcxx_cv_readlink=yes],\n-        [glibcxx_cv_readlink=no])\n-    ])\n-    if test $glibcxx_cv_readlink = yes; then\n-      AC_DEFINE(HAVE_READLINK, 1, [Define if readlink is available in <unistd.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_readlink)\n+  AC_MSG_CHECKING([for link])\n+  AC_CACHE_VAL(glibcxx_cv_link, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [#include <unistd.h>],\n+      [link(\"\", \"\");],\n+      [glibcxx_cv_link=yes],\n+      [glibcxx_cv_link=no])\n+  ])\n+  if test $glibcxx_cv_link = yes; then\n+    AC_DEFINE(HAVE_LINK, 1, [Define if link is available in <unistd.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_link)\n dnl\n-    AC_MSG_CHECKING([for symlink])\n-    AC_CACHE_VAL(glibcxx_cv_symlink, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [#include <unistd.h>],\n-        [symlink(\"\", \"\");],\n-        [glibcxx_cv_symlink=yes],\n-        [glibcxx_cv_symlink=no])\n-    ])\n-    if test $glibcxx_cv_symlink = yes; then\n-      AC_DEFINE(HAVE_SYMLINK, 1, [Define if symlink is available in <unistd.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_symlink)\n+  AC_MSG_CHECKING([for readlink])\n+  AC_CACHE_VAL(glibcxx_cv_readlink, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [#include <unistd.h>],\n+      [char buf[32]; readlink(\"\", buf, sizeof(buf));],\n+      [glibcxx_cv_readlink=yes],\n+      [glibcxx_cv_readlink=no])\n+  ])\n+  if test $glibcxx_cv_readlink = yes; then\n+    AC_DEFINE(HAVE_READLINK, 1, [Define if readlink is available in <unistd.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_readlink)\n dnl\n-    AC_MSG_CHECKING([for truncate])\n-    AC_CACHE_VAL(glibcxx_cv_truncate, [dnl\n-      GCC_TRY_COMPILE_OR_LINK(\n-        [#include <unistd.h>],\n-        [truncate(\"\", 99);],\n-        [glibcxx_cv_truncate=yes],\n-        [glibcxx_cv_truncate=no])\n-    ])\n-    if test $glibcxx_cv_truncate = yes; then\n-      AC_DEFINE(HAVE_TRUNCATE, 1, [Define if truncate is available in <unistd.h>.])\n-    fi\n-    AC_MSG_RESULT($glibcxx_cv_truncate)\n+  AC_MSG_CHECKING([for symlink])\n+  AC_CACHE_VAL(glibcxx_cv_symlink, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [#include <unistd.h>],\n+      [symlink(\"\", \"\");],\n+      [glibcxx_cv_symlink=yes],\n+      [glibcxx_cv_symlink=no])\n+  ])\n+  if test $glibcxx_cv_symlink = yes; then\n+    AC_DEFINE(HAVE_SYMLINK, 1, [Define if symlink is available in <unistd.h>.])\n+  fi\n+  AC_MSG_RESULT($glibcxx_cv_symlink)\n dnl\n-    CXXFLAGS=\"$ac_save_CXXFLAGS\"\n-    AC_LANG_RESTORE\n+  AC_MSG_CHECKING([for truncate])\n+  AC_CACHE_VAL(glibcxx_cv_truncate, [dnl\n+    GCC_TRY_COMPILE_OR_LINK(\n+      [#include <unistd.h>],\n+      [truncate(\"\", 99);],\n+      [glibcxx_cv_truncate=yes],\n+      [glibcxx_cv_truncate=no])\n+  ])\n+  if test $glibcxx_cv_truncate = yes; then\n+    AC_DEFINE(HAVE_TRUNCATE, 1, [Define if truncate is available in <unistd.h>.])\n   fi\n+  AC_MSG_RESULT($glibcxx_cv_truncate)\n+dnl\n+  CXXFLAGS=\"$ac_save_CXXFLAGS\"\n+  AC_LANG_RESTORE\n ])\n \n dnl"}, {"sha": "845f2882ec1ef0a2d4bddaa31182d902fc3034f5", "filename": "libstdc++-v3/configure", "status": "modified", "additions": 141, "deletions": 143, "changes": 284, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/90f7636bf8df50940e0f749af60a6b374a8f09b4/libstdc%2B%2B-v3%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/90f7636bf8df50940e0f749af60a6b374a8f09b4/libstdc%2B%2B-v3%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Fconfigure?ref=90f7636bf8df50940e0f749af60a6b374a8f09b4", "patch": "@@ -76281,31 +76281,30 @@ $as_echo_n \"checking whether to build Filesystem TS support... \" >&6; }\n $as_echo \"$enable_libstdcxx_filesystem_ts\" >&6; }\n \n \n-  if test $enable_libstdcxx_filesystem_ts = yes; then\n \n-    ac_ext=cpp\n+  ac_ext=cpp\n ac_cpp='$CXXCPP $CPPFLAGS'\n ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_cxx_compiler_gnu\n \n-    ac_save_CXXFLAGS=\"$CXXFLAGS\"\n-    CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for struct dirent.d_type\" >&5\n+  ac_save_CXXFLAGS=\"$CXXFLAGS\"\n+  CXXFLAGS=\"$CXXFLAGS -fno-exceptions\"\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for struct dirent.d_type\" >&5\n $as_echo_n \"checking for struct dirent.d_type... \" >&6; }\n-    if ${glibcxx_cv_dirent_d_type+:} false; then :\n+  if ${glibcxx_cv_dirent_d_type+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <dirent.h>\n int\n main ()\n {\n \n-         struct dirent d;\n-         if (sizeof d.d_type) return 0;\n+       struct dirent d;\n+       if (sizeof d.d_type) return 0;\n \n   ;\n   return 0;\n@@ -76328,8 +76327,8 @@ int\n main ()\n {\n \n-         struct dirent d;\n-         if (sizeof d.d_type) return 0;\n+       struct dirent d;\n+       if (sizeof d.d_type) return 0;\n \n   ;\n   return 0;\n@@ -76346,37 +76345,37 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_dirent_d_type = yes; then\n+  if test $glibcxx_cv_dirent_d_type = yes; then\n \n $as_echo \"#define HAVE_STRUCT_DIRENT_D_TYPE 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_dirent_d_type\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_dirent_d_type\" >&5\n $as_echo \"$glibcxx_cv_dirent_d_type\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for realpath\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for realpath\" >&5\n $as_echo_n \"checking for realpath... \" >&6; }\n-    if ${glibcxx_cv_realpath+:} false; then :\n+  if ${glibcxx_cv_realpath+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-         #include <limits.h>\n-         #include <stdlib.h>\n-         #include <unistd.h>\n+       #include <limits.h>\n+       #include <stdlib.h>\n+       #include <unistd.h>\n \n int\n main ()\n {\n \n-         #if _XOPEN_VERSION < 500\n-         #error\n-         #elif _XOPEN_VERSION >= 700 || defined(PATH_MAX)\n-         char *tmp = realpath((const char*)NULL, (char*)NULL);\n-         #else\n-         #error\n-         #endif\n+       #if _XOPEN_VERSION < 500\n+       #error\n+       #elif _XOPEN_VERSION >= 700 || defined(PATH_MAX)\n+       char *tmp = realpath((const char*)NULL, (char*)NULL);\n+       #else\n+       #error\n+       #endif\n \n   ;\n   return 0;\n@@ -76395,21 +76394,21 @@ fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-         #include <limits.h>\n-         #include <stdlib.h>\n-         #include <unistd.h>\n+       #include <limits.h>\n+       #include <stdlib.h>\n+       #include <unistd.h>\n \n int\n main ()\n {\n \n-         #if _XOPEN_VERSION < 500\n-         #error\n-         #elif _XOPEN_VERSION >= 700 || defined(PATH_MAX)\n-         char *tmp = realpath((const char*)NULL, (char*)NULL);\n-         #else\n-         #error\n-         #endif\n+       #if _XOPEN_VERSION < 500\n+       #error\n+       #elif _XOPEN_VERSION >= 700 || defined(PATH_MAX)\n+       char *tmp = realpath((const char*)NULL, (char*)NULL);\n+       #else\n+       #error\n+       #endif\n \n   ;\n   return 0;\n@@ -76426,31 +76425,31 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_realpath = yes; then\n+  if test $glibcxx_cv_realpath = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_REALPATH 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_realpath\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_realpath\" >&5\n $as_echo \"$glibcxx_cv_realpath\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for utimensat\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for utimensat\" >&5\n $as_echo_n \"checking for utimensat... \" >&6; }\n-    if ${glibcxx_cv_utimensat+:} false; then :\n+  if ${glibcxx_cv_utimensat+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-          #include <fcntl.h>\n-          #include <sys/stat.h>\n+\t#include <fcntl.h>\n+\t#include <sys/stat.h>\n \n int\n main ()\n {\n \n-          struct timespec ts[2] = { { 0, UTIME_OMIT }, { 1, 1 } };\n-          int i = utimensat(AT_FDCWD, \"path\", ts, 0);\n+\tstruct timespec ts[2] = { { 0, UTIME_OMIT }, { 1, 1 } };\n+\tint i = utimensat(AT_FDCWD, \"path\", ts, 0);\n \n   ;\n   return 0;\n@@ -76469,15 +76468,15 @@ fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-          #include <fcntl.h>\n-          #include <sys/stat.h>\n+\t#include <fcntl.h>\n+\t#include <sys/stat.h>\n \n int\n main ()\n {\n \n-          struct timespec ts[2] = { { 0, UTIME_OMIT }, { 1, 1 } };\n-          int i = utimensat(AT_FDCWD, \"path\", ts, 0);\n+\tstruct timespec ts[2] = { { 0, UTIME_OMIT }, { 1, 1 } };\n+\tint i = utimensat(AT_FDCWD, \"path\", ts, 0);\n \n   ;\n   return 0;\n@@ -76494,30 +76493,30 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_utimensat = yes; then\n+  if test $glibcxx_cv_utimensat = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_UTIMENSAT 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_utimensat\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_utimensat\" >&5\n $as_echo \"$glibcxx_cv_utimensat\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for utime\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for utime\" >&5\n $as_echo_n \"checking for utime... \" >&6; }\n-    if ${glibcxx_cv_utime+:} false; then :\n+  if ${glibcxx_cv_utime+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-          #include <utime.h>\n+\t#include <utime.h>\n \n int\n main ()\n {\n \n-          struct utimbuf t = { 1, 1 };\n-          int i = utime(\"path\", &t);\n+\tstruct utimbuf t = { 1, 1 };\n+\tint i = utime(\"path\", &t);\n \n   ;\n   return 0;\n@@ -76536,14 +76535,14 @@ fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-          #include <utime.h>\n+\t#include <utime.h>\n \n int\n main ()\n {\n \n-          struct utimbuf t = { 1, 1 };\n-          int i = utime(\"path\", &t);\n+\tstruct utimbuf t = { 1, 1 };\n+\tint i = utime(\"path\", &t);\n \n   ;\n   return 0;\n@@ -76560,28 +76559,28 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_utime = yes; then\n+  if test $glibcxx_cv_utime = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_UTIME 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_utime\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_utime\" >&5\n $as_echo \"$glibcxx_cv_utime\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lstat\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for lstat\" >&5\n $as_echo_n \"checking for lstat... \" >&6; }\n-    if ${glibcxx_cv_lstat+:} false; then :\n+  if ${glibcxx_cv_lstat+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n  #include <sys/stat.h>\n int\n main ()\n {\n \n-          struct stat st;\n-          int i = lstat(\"path\", &st);\n+\tstruct stat st;\n+\tint i = lstat(\"path\", &st);\n \n   ;\n   return 0;\n@@ -76604,8 +76603,8 @@ int\n main ()\n {\n \n-          struct stat st;\n-          int i = lstat(\"path\", &st);\n+\tstruct stat st;\n+\tint i = lstat(\"path\", &st);\n \n   ;\n   return 0;\n@@ -76622,28 +76621,28 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_lstat = yes; then\n+  if test $glibcxx_cv_lstat = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_LSTAT 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_lstat\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_lstat\" >&5\n $as_echo \"$glibcxx_cv_lstat\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for struct stat.st_mtim.tv_nsec\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for struct stat.st_mtim.tv_nsec\" >&5\n $as_echo_n \"checking for struct stat.st_mtim.tv_nsec... \" >&6; }\n-    if ${glibcxx_cv_st_mtim+:} false; then :\n+  if ${glibcxx_cv_st_mtim+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n  #include <sys/stat.h>\n int\n main ()\n {\n \n-          struct stat st;\n-          return st.st_mtim.tv_nsec;\n+\tstruct stat st;\n+\treturn st.st_mtim.tv_nsec;\n \n   ;\n   return 0;\n@@ -76666,8 +76665,8 @@ int\n main ()\n {\n \n-          struct stat st;\n-          return st.st_mtim.tv_nsec;\n+\tstruct stat st;\n+\treturn st.st_mtim.tv_nsec;\n \n   ;\n   return 0;\n@@ -76684,19 +76683,19 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_st_mtim = yes; then\n+  if test $glibcxx_cv_st_mtim = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_ST_MTIM 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_st_mtim\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_st_mtim\" >&5\n $as_echo \"$glibcxx_cv_st_mtim\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fchmod\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fchmod\" >&5\n $as_echo_n \"checking for fchmod... \" >&6; }\n-    if ${glibcxx_cv_fchmod+:} false; then :\n+  if ${glibcxx_cv_fchmod+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <sys/stat.h>\n@@ -76740,24 +76739,24 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_fchmod = yes; then\n+  if test $glibcxx_cv_fchmod = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_FCHMOD 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_fchmod\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_fchmod\" >&5\n $as_echo \"$glibcxx_cv_fchmod\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fchmodat\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for fchmodat\" >&5\n $as_echo_n \"checking for fchmodat... \" >&6; }\n-    if ${glibcxx_cv_fchmodat+:} false; then :\n+  if ${glibcxx_cv_fchmodat+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-          #include <fcntl.h>\n-          #include <sys/stat.h>\n+\t#include <fcntl.h>\n+\t#include <sys/stat.h>\n \n int\n main ()\n@@ -76780,8 +76779,8 @@ fi\n cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n \n-          #include <fcntl.h>\n-          #include <sys/stat.h>\n+\t#include <fcntl.h>\n+\t#include <sys/stat.h>\n \n int\n main ()\n@@ -76802,21 +76801,21 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_fchmodat = yes; then\n+  if test $glibcxx_cv_fchmodat = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_FCHMODAT 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_fchmodat\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_fchmodat\" >&5\n $as_echo \"$glibcxx_cv_fchmodat\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for sendfile that can copy files\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for sendfile that can copy files\" >&5\n $as_echo_n \"checking for sendfile that can copy files... \" >&6; }\n-    if ${glibcxx_cv_sendfile+:} false; then :\n+  if ${glibcxx_cv_sendfile+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        case \"${target_os}\" in\n-        gnu* | linux* | solaris* | uclinux*)\n-          if test x$gcc_no_link = xyes; then\n+      case \"${target_os}\" in\n+      gnu* | linux* | solaris* | uclinux*)\n+\tif test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <sys/sendfile.h>\n@@ -76857,27 +76856,27 @@ fi\n rm -f core conftest.err conftest.$ac_objext \\\n     conftest$ac_exeext conftest.$ac_ext\n fi\n-          ;;\n-        *)\n-          glibcxx_cv_sendfile=no\n-          ;;\n-      esac\n+\t;;\n+      *)\n+\tglibcxx_cv_sendfile=no\n+\t;;\n+    esac\n \n fi\n \n-    if test $glibcxx_cv_sendfile = yes; then\n+  if test $glibcxx_cv_sendfile = yes; then\n \n $as_echo \"#define _GLIBCXX_USE_SENDFILE 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_sendfile\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_sendfile\" >&5\n $as_echo \"$glibcxx_cv_sendfile\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for link\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for link\" >&5\n $as_echo_n \"checking for link... \" >&6; }\n-    if ${glibcxx_cv_link+:} false; then :\n+  if ${glibcxx_cv_link+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <unistd.h>\n@@ -76921,19 +76920,19 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_link = yes; then\n+  if test $glibcxx_cv_link = yes; then\n \n $as_echo \"#define HAVE_LINK 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_link\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_link\" >&5\n $as_echo \"$glibcxx_cv_link\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for readlink\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for readlink\" >&5\n $as_echo_n \"checking for readlink... \" >&6; }\n-    if ${glibcxx_cv_readlink+:} false; then :\n+  if ${glibcxx_cv_readlink+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <unistd.h>\n@@ -76977,19 +76976,19 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_readlink = yes; then\n+  if test $glibcxx_cv_readlink = yes; then\n \n $as_echo \"#define HAVE_READLINK 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_readlink\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_readlink\" >&5\n $as_echo \"$glibcxx_cv_readlink\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for symlink\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for symlink\" >&5\n $as_echo_n \"checking for symlink... \" >&6; }\n-    if ${glibcxx_cv_symlink+:} false; then :\n+  if ${glibcxx_cv_symlink+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <unistd.h>\n@@ -77033,19 +77032,19 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_symlink = yes; then\n+  if test $glibcxx_cv_symlink = yes; then\n \n $as_echo \"#define HAVE_SYMLINK 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_symlink\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_symlink\" >&5\n $as_echo \"$glibcxx_cv_symlink\" >&6; }\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for truncate\" >&5\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: checking for truncate\" >&5\n $as_echo_n \"checking for truncate... \" >&6; }\n-    if ${glibcxx_cv_truncate+:} false; then :\n+  if ${glibcxx_cv_truncate+:} false; then :\n   $as_echo_n \"(cached) \" >&6\n else\n-        if test x$gcc_no_link = xyes; then\n+      if test x$gcc_no_link = xyes; then\n   cat confdefs.h - <<_ACEOF >conftest.$ac_ext\n /* end confdefs.h.  */\n #include <unistd.h>\n@@ -77089,21 +77088,20 @@ fi\n \n fi\n \n-    if test $glibcxx_cv_truncate = yes; then\n+  if test $glibcxx_cv_truncate = yes; then\n \n $as_echo \"#define HAVE_TRUNCATE 1\" >>confdefs.h\n \n-    fi\n-    { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_truncate\" >&5\n+  fi\n+  { $as_echo \"$as_me:${as_lineno-$LINENO}: result: $glibcxx_cv_truncate\" >&5\n $as_echo \"$glibcxx_cv_truncate\" >&6; }\n-    CXXFLAGS=\"$ac_save_CXXFLAGS\"\n-    ac_ext=c\n+  CXXFLAGS=\"$ac_save_CXXFLAGS\"\n+  ac_ext=c\n ac_cpp='$CPP $CPPFLAGS'\n ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'\n ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'\n ac_compiler_gnu=$ac_cv_c_compiler_gnu\n \n-  fi\n \n \n # For Networking TS.\n@@ -77818,7 +77816,7 @@ case \"$host\" in\n     case \"$enable_cet\" in\n       auto)\n \t# Check if target supports multi-byte NOPs\n-\t# and if assembler supports CET insn.\n+\t# and if compiler and assembler support CET insn.\n \tcet_save_CFLAGS=\"$CFLAGS\"\n \tCFLAGS=\"$CFLAGS -fcf-protection\"\n \tcat confdefs.h - <<_ACEOF >conftest.$ac_ext"}]}