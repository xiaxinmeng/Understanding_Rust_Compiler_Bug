{"sha": "25e8b6ceb492818d78314bfccd8808556d059761", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MjVlOGI2Y2ViNDkyODE4ZDc4MzE0YmZjY2Q4ODA4NTU2ZDA1OTc2MQ==", "commit": {"author": {"name": "Tom Tromey", "email": "tromey@redhat.com", "date": "2008-06-14T19:49:45Z"}, "committer": {"name": "Tom Tromey", "email": "tromey@gcc.gnu.org", "date": "2008-06-14T19:49:45Z"}, "message": "re PR java/36247 (Segfault with -findirect-dispatch and --jni)\n\n\tPR java/36247:\n\t* class.c (build_class_ref): Initialize this_classdollar when\n\nFrom-SVN: r136787", "tree": {"sha": "1b7b78c294f2e99523b7b1c7eccf9cca010b57b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1b7b78c294f2e99523b7b1c7eccf9cca010b57b6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/25e8b6ceb492818d78314bfccd8808556d059761", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25e8b6ceb492818d78314bfccd8808556d059761", "html_url": "https://github.com/Rust-GCC/gccrs/commit/25e8b6ceb492818d78314bfccd8808556d059761", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/25e8b6ceb492818d78314bfccd8808556d059761/comments", "author": null, "committer": null, "parents": [{"sha": "397fda8004eb8e8391a3fee9e4ee6098ff613be7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/397fda8004eb8e8391a3fee9e4ee6098ff613be7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/397fda8004eb8e8391a3fee9e4ee6098ff613be7"}], "stats": {"total": 14, "additions": 13, "deletions": 1}, "files": [{"sha": "943299d5318c0f4077b78b236720a327baa622c4", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25e8b6ceb492818d78314bfccd8808556d059761/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25e8b6ceb492818d78314bfccd8808556d059761/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=25e8b6ceb492818d78314bfccd8808556d059761", "patch": "@@ -1,3 +1,9 @@\n+2008-06-14  Tom Tromey  <tromey@redhat.com>\n+\n+\tPR java/36247:\n+\t* class.c (build_class_ref): Initialize this_classdollar when\n+\tneeded.\n+\n 2008-05-23  Andrew Haley  <aph@redhat.com>\n \n \t* jcf-parse.c (give_name_to_class): Call find_sourcefile to find full"}, {"sha": "dff75ac9e43eafdd7a03fb2b327873f6ee3a5576", "filename": "gcc/java/class.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/25e8b6ceb492818d78314bfccd8808556d059761/gcc%2Fjava%2Fclass.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/25e8b6ceb492818d78314bfccd8808556d059761/gcc%2Fjava%2Fclass.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fclass.c?ref=25e8b6ceb492818d78314bfccd8808556d059761", "patch": "@@ -1142,7 +1142,13 @@ build_class_ref (tree type)\n \treturn build_indirect_class_ref (type);\n \n       if (type == output_class && flag_indirect_classes)\n-\treturn this_classdollar;\n+\t{\n+\t  /* This can be NULL if we see a JNI stub before we see any\n+\t     other method.  */\n+\t  if (! this_classdollar)\n+\t    this_classdollar = build_classdollar_field (output_class);\n+\t  return this_classdollar;\n+\t}\n       \n       if (TREE_CODE (type) == RECORD_TYPE)\n \treturn build_static_class_ref (type);"}]}