{"sha": "751a243337660bfb64bb0a6ded40688e9c3c7cf6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzUxYTI0MzMzNzY2MGJmYjY0YmIwYTZkZWQ0MDY4OGU5YzNjN2NmNg==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2012-11-26T09:19:30Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2012-11-26T09:19:30Z"}, "message": "re PR tree-optimization/54471 (FAIL: gcc.dg/sms-8.c execution test)\n\n\tPR tree-optimization/54471\n\t* tree-vrp.c (extract_range_from_binary_expr_1): For MULT_EXPR,\n\tdon't canonicalize range if min2 is zero.\n\n\t* gcc.dg/tree-ssa/vrp86.c: New test.\n\t* gcc.c-torture/execute/pr54471.c: New test.\n\nFrom-SVN: r193806", "tree": {"sha": "cb24767045d31e52a5520172e38c0d6fccfa4be2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/cb24767045d31e52a5520172e38c0d6fccfa4be2"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/751a243337660bfb64bb0a6ded40688e9c3c7cf6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/751a243337660bfb64bb0a6ded40688e9c3c7cf6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/751a243337660bfb64bb0a6ded40688e9c3c7cf6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/751a243337660bfb64bb0a6ded40688e9c3c7cf6/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "d42f26c16c36e5e137bf4e6d0ec09ed32fbe6c90", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d42f26c16c36e5e137bf4e6d0ec09ed32fbe6c90", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d42f26c16c36e5e137bf4e6d0ec09ed32fbe6c90"}], "stats": {"total": 80, "additions": 78, "deletions": 2}, "files": [{"sha": "e58b1e66512ef2678ab65bad33ae5df410f5b60c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=751a243337660bfb64bb0a6ded40688e9c3c7cf6", "patch": "@@ -1,3 +1,9 @@\n+2012-11-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/54471\n+\t* tree-vrp.c (extract_range_from_binary_expr_1): For MULT_EXPR,\n+\tdon't canonicalize range if min2 is zero.\n+\n 2012-11-26  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \tPR middle-end/55030"}, {"sha": "c8b4b6bf25f1416515848b7dd1181fcb1be26d47", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=751a243337660bfb64bb0a6ded40688e9c3c7cf6", "patch": "@@ -1,3 +1,9 @@\n+2012-11-26  Jakub Jelinek  <jakub@redhat.com>\n+\n+\tPR tree-optimization/54471\n+\t* gcc.dg/tree-ssa/vrp86.c: New test.\n+\t* gcc.c-torture/execute/pr54471.c: New test.\n+\n 2012-11-26  Hans-Peter Nilsson  <hp@bitrange.com>\n \n \tPR middle-end/55030"}, {"sha": "a169873b069b8cb37b89045fe14d78e0bf015336", "filename": "gcc/testsuite/gcc.c-torture/execute/pr54471.c", "status": "added", "additions": 36, "deletions": 0, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr54471.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr54471.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.c-torture%2Fexecute%2Fpr54471.c?ref=751a243337660bfb64bb0a6ded40688e9c3c7cf6", "patch": "@@ -0,0 +1,36 @@\n+/* PR tree-optimization/54471 */\n+\n+#ifdef __SIZEOF_INT128__\n+#define T __int128\n+#else\n+#define T long long\n+#endif\n+\n+extern void abort (void);\n+\n+__attribute__ ((noinline))\n+unsigned T\n+foo (T ixi, unsigned ctr)\n+{\n+  unsigned T irslt = 1;\n+  T ix = ixi;\n+\n+  for (; ctr; ctr--)\n+    {\n+      irslt *= ix;\n+      ix *= ix;\n+    }\n+\n+  if (irslt != 14348907)\n+    abort ();\n+  return irslt;\n+}\n+\n+int\n+main ()\n+{\n+  unsigned T res;\n+\n+  res = foo (3, 4);\n+  return 0;\n+}"}, {"sha": "ee7ed5f085222adcc715037f798f8c213bdfd5d4", "filename": "gcc/testsuite/gcc.dg/tree-ssa/vrp86.c", "status": "added", "additions": 28, "deletions": 0, "changes": 28, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp86.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp86.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftree-ssa%2Fvrp86.c?ref=751a243337660bfb64bb0a6ded40688e9c3c7cf6", "patch": "@@ -0,0 +1,28 @@\n+/* PR tree-optimization/54471 */\n+/* { dg-do compile } */\n+/* { dg-options \"-O2 -fdump-tree-vrp1\" } */\n+\n+#ifdef __SIZEOF_INT128__\n+#define T __int128\n+#else\n+#define T long long\n+#endif\n+\n+void fn1call (void);\n+void fn2call (void);\n+\n+void\n+foo (unsigned T x)\n+{\n+  if (x > (unsigned T) -3)\n+    return;\n+  unsigned T y = 2 * x;\n+  if (y == 42)\n+    fn1call ();\n+  else\n+    fn2call ();\n+}\n+\n+/* { dg-final { scan-tree-dump \"fn1call\" \"vrp1\"} } */\n+/* { dg-final { scan-tree-dump \"fn2call\" \"vrp1\"} } */\n+/* { dg-final { cleanup-tree-dump \"vrp1\" } } */"}, {"sha": "c9e4e313692fd98f3b54ed8fa6797a8c1101e049", "filename": "gcc/tree-vrp.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftree-vrp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/751a243337660bfb64bb0a6ded40688e9c3c7cf6/gcc%2Ftree-vrp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vrp.c?ref=751a243337660bfb64bb0a6ded40688e9c3c7cf6", "patch": "@@ -2653,15 +2653,15 @@ extract_range_from_binary_expr_1 (value_range_t *vr,\n \t  if (TYPE_UNSIGNED (expr_type))\n \t    {\n \t      double_int min2 = size - min0;\n-\t      if (min2.cmp (max0, true) < 0)\n+\t      if (!min2.is_zero () && min2.cmp (max0, true) < 0)\n \t\t{\n \t\t  min0 = -min2;\n \t\t  max0 -= size;\n \t\t  uns0 = false;\n \t\t}\n \n \t      min2 = size - min1;\n-\t      if (min2.cmp (max1, true) < 0)\n+\t      if (!min2.is_zero () && min2.cmp (max1, true) < 0)\n \t\t{\n \t\t  min1 = -min2;\n \t\t  max1 -= size;"}]}