{"sha": "44ed91a1d664478bb2f6f2e277988908ce3675a5", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDRlZDkxYTFkNjY0NDc4YmIyZjZmMmUyNzc5ODg5MDhjZTM2NzVhNQ==", "commit": {"author": {"name": "Neil Booth", "email": "neilb@earthling.net", "date": "2000-10-29T11:37:18Z"}, "committer": {"name": "Neil Booth", "email": "neil@gcc.gnu.org", "date": "2000-10-29T11:37:18Z"}, "message": "cppmacro.c (_cpp_create_definition): Optimize the case of a macro defined to itself.\n\n\t* cppmacro.c (_cpp_create_definition): Optimize the case of\n        a macro defined to itself.\n\nFrom-SVN: r37123", "tree": {"sha": "c48aad594f9cc3ca2781664e65c553c6fb3277cb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c48aad594f9cc3ca2781664e65c553c6fb3277cb"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/44ed91a1d664478bb2f6f2e277988908ce3675a5", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44ed91a1d664478bb2f6f2e277988908ce3675a5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/44ed91a1d664478bb2f6f2e277988908ce3675a5", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/44ed91a1d664478bb2f6f2e277988908ce3675a5/comments", "author": null, "committer": null, "parents": [{"sha": "3542203b30a788180f69c3298227c97eeefec03d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/3542203b30a788180f69c3298227c97eeefec03d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/3542203b30a788180f69c3298227c97eeefec03d"}], "stats": {"total": 11, "additions": 10, "deletions": 1}, "files": [{"sha": "af210008cbe8ec11bc934c37f78592a2d64d578c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ed91a1d664478bb2f6f2e277988908ce3675a5/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ed91a1d664478bb2f6f2e277988908ce3675a5/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=44ed91a1d664478bb2f6f2e277988908ce3675a5", "patch": "@@ -1,3 +1,8 @@\n+2000-10-29  Neil Booth  <neilb@earthling.net>\n+\n+\t* cppmacro.c (_cpp_create_definition): Optimize the case of\n+        a macro defined to itself.\n+\n 2000-10-29  Neil Booth  <neilb@earthling.net>\n \n \t* cpplex.c (save_comment): Don't store new lines in C++ comments."}, {"sha": "35e66f48054049e06038f357e66f3478e0f56260", "filename": "gcc/cppmacro.c", "status": "modified", "additions": 5, "deletions": 1, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/44ed91a1d664478bb2f6f2e277988908ce3675a5/gcc%2Fcppmacro.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/44ed91a1d664478bb2f6f2e277988908ce3675a5/gcc%2Fcppmacro.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcppmacro.c?ref=44ed91a1d664478bb2f6f2e277988908ce3675a5", "patch": "@@ -1403,7 +1403,6 @@ _cpp_create_definition (pfile, node)\n   macro->paramc = 0;\n   macro->fun_like = 0;\n   macro->var_args = 0;\n-  macro->disabled = 0;\n   macro->count = 0;\n   macro->expansion = (cpp_token *) POOL_FRONT (&pfile->macro_pool);\n \n@@ -1485,6 +1484,11 @@ _cpp_create_definition (pfile, node)\n   /* Clear the whitespace flag from the leading token.  */\n   macro->expansion[0].flags &= ~PREV_WHITE;\n \n+  /* Implement the macro-defined-to-itself optimisation.  */\n+  macro->disabled = (macro->count == 1 && !macro->fun_like\n+\t\t     && macro->expansion[0].type == CPP_NAME\n+\t\t     && macro->expansion[0].val.node == node);\n+\n   /* Commit the memory.  */\n   POOL_COMMIT (&pfile->macro_pool, macro->count * sizeof (cpp_token));\n "}]}