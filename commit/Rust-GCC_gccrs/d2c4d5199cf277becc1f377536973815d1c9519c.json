{"sha": "d2c4d5199cf277becc1f377536973815d1c9519c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDJjNGQ1MTk5Y2YyNzdiZWNjMWYzNzc1MzY5NzM4MTVkMWM5NTE5Yw==", "commit": {"author": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-09-16T13:12:45Z"}, "committer": {"name": "David Malcolm", "email": "dmalcolm@redhat.com", "date": "2020-09-16T23:03:15Z"}, "message": "analyzer: show SCC ids in .dot dumps\n\ngcc/analyzer/ChangeLog:\n\t* engine.cc (supernode_cluster::dump_dot): Show the SCC id\n\tin the per-supernode clusters in FILENAME.eg.dot output.\n\t(exploded_graph_annotator::add_node_annotations):\n\tShow the SCC of the supernode in FILENAME.supernode.eg.dot output.\n\t* exploded-graph.h (worklist::scc_id): New.\n\t(exploded_graph::get_scc_id): New.", "tree": {"sha": "0015b37fdee4cc59fcce720e1996a6fd325ddefd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/0015b37fdee4cc59fcce720e1996a6fd325ddefd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d2c4d5199cf277becc1f377536973815d1c9519c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2c4d5199cf277becc1f377536973815d1c9519c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d2c4d5199cf277becc1f377536973815d1c9519c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d2c4d5199cf277becc1f377536973815d1c9519c/comments", "author": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "committer": {"login": "davidmalcolm", "id": 1553248, "node_id": "MDQ6VXNlcjE1NTMyNDg=", "avatar_url": "https://avatars.githubusercontent.com/u/1553248?v=4", "gravatar_id": "", "url": "https://api.github.com/users/davidmalcolm", "html_url": "https://github.com/davidmalcolm", "followers_url": "https://api.github.com/users/davidmalcolm/followers", "following_url": "https://api.github.com/users/davidmalcolm/following{/other_user}", "gists_url": "https://api.github.com/users/davidmalcolm/gists{/gist_id}", "starred_url": "https://api.github.com/users/davidmalcolm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/davidmalcolm/subscriptions", "organizations_url": "https://api.github.com/users/davidmalcolm/orgs", "repos_url": "https://api.github.com/users/davidmalcolm/repos", "events_url": "https://api.github.com/users/davidmalcolm/events{/privacy}", "received_events_url": "https://api.github.com/users/davidmalcolm/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "b28491dc2d79763ecbff4f0b9f1f3e48a443be1d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b28491dc2d79763ecbff4f0b9f1f3e48a443be1d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b28491dc2d79763ecbff4f0b9f1f3e48a443be1d"}], "stats": {"total": 15, "additions": 13, "deletions": 2}, "files": [{"sha": "637a990da4a9b26cb90708aee4ca5bbcfaf85565", "filename": "gcc/analyzer/engine.cc", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2c4d5199cf277becc1f377536973815d1c9519c/gcc%2Fanalyzer%2Fengine.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2c4d5199cf277becc1f377536973815d1c9519c/gcc%2Fanalyzer%2Fengine.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fengine.cc?ref=d2c4d5199cf277becc1f377536973815d1c9519c", "patch": "@@ -3288,8 +3288,9 @@ class supernode_cluster : public exploded_cluster\n \t\t (const void *)this);\n     gv->indent ();\n     gv->println (\"style=\\\"dashed\\\";\");\n-    gv->println (\"label=\\\"SN: %i (bb: %i)\\\";\",\n-\t\t m_supernode->m_index, m_supernode->m_bb->index);\n+    gv->println (\"label=\\\"SN: %i (bb: %i; scc: %i)\\\";\",\n+\t\t m_supernode->m_index, m_supernode->m_bb->index,\n+\t\t args.m_eg.get_scc_id (*m_supernode));\n \n     int i;\n     exploded_node *enode;\n@@ -4040,6 +4041,7 @@ class exploded_graph_annotator : public dot_annotator\n \n     gv->begin_td ();\n     pp_string (pp, \"BEFORE\");\n+    pp_printf (pp, \" (scc: %i)\", m_eg.get_scc_id (n));\n     gv->end_td ();\n \n     unsigned i;"}, {"sha": "04e878fbdfc1ce59d86d498df0325c4d05a907f6", "filename": "gcc/analyzer/exploded-graph.h", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d2c4d5199cf277becc1f377536973815d1c9519c/gcc%2Fanalyzer%2Fexploded-graph.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d2c4d5199cf277becc1f377536973815d1c9519c/gcc%2Fanalyzer%2Fexploded-graph.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fanalyzer%2Fexploded-graph.h?ref=d2c4d5199cf277becc1f377536973815d1c9519c", "patch": "@@ -652,6 +652,10 @@ class worklist\n   exploded_node *take_next ();\n   exploded_node *peek_next ();\n   void add_node (exploded_node *enode);\n+  int get_scc_id (const supernode &snode) const\n+  {\n+    return m_scc.get_scc_id (snode.m_index);\n+  }\n \n private:\n   class key_t\n@@ -783,6 +787,11 @@ class exploded_graph : public digraph<eg_traits>\n   const call_string_data_map_t *get_per_call_string_data () const\n   { return &m_per_call_string_data; }\n \n+  int get_scc_id (const supernode &node) const\n+  {\n+    return m_worklist.get_scc_id (node);\n+  }\n+\n private:\n   void print_bar_charts (pretty_printer *pp) const;\n "}]}