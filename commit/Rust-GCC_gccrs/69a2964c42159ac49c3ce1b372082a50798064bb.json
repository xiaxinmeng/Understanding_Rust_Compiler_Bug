{"sha": "69a2964c42159ac49c3ce1b372082a50798064bb", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjlhMjk2NGM0MjE1OWFjNDljM2NlMWIzNzIwODJhNTA3OTgwNjRiYg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2005-06-28T06:16:57Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2005-06-28T06:16:57Z"}, "message": "sse.md (vec_shl_<SSEMODEI>, [...]): New.\n\n        * config/i386/sse.md (vec_shl_<SSEMODEI>, vec_shr_<SSEMODEI>): New.\n        (smaxv16qi3, umaxv8hi3, sminv16qi3, uminv8hi3): New.\n\n        * gcc.dg/vect/vect-reduc-1short.c: Remove XFAIL.\n        * gcc.dg/vect/vect-reduc-2char.c: Remove XFAIL.\n\nFrom-SVN: r101373", "tree": {"sha": "c6be694da2b1f952e3dcc140639bba297122d082", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6be694da2b1f952e3dcc140639bba297122d082"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/69a2964c42159ac49c3ce1b372082a50798064bb", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69a2964c42159ac49c3ce1b372082a50798064bb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/69a2964c42159ac49c3ce1b372082a50798064bb", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/69a2964c42159ac49c3ce1b372082a50798064bb/comments", "author": null, "committer": null, "parents": [{"sha": "46ae108707e53e994a2ee93a0f782a61f9bc0c9c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/46ae108707e53e994a2ee93a0f782a61f9bc0c9c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/46ae108707e53e994a2ee93a0f782a61f9bc0c9c"}], "stats": {"total": 110, "additions": 108, "deletions": 2}, "files": [{"sha": "7bc4af658a3dbeaf9b39ce9e017521477b02d536", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=69a2964c42159ac49c3ce1b372082a50798064bb", "patch": "@@ -1,3 +1,8 @@\n+2005-06-27  Richard Henderson  <rth@redhat.com>\n+\n+\t* config/i386/sse.md (vec_shl_<SSEMODEI>, vec_shr_<SSEMODEI>): New.\n+\t(smaxv16qi3, umaxv8hi3, sminv16qi3, uminv8hi3): New.\n+\n 2005-06-27  Richard Henderson  <rth@redhat.com>\n \n \t* tree-vect-transform.c (vect_create_epilog_for_reduction): Remove"}, {"sha": "16059bb55d13841ceba669d1b779fcfa179948a2", "filename": "gcc/config/i386/sse.md", "status": "modified", "additions": 96, "deletions": 0, "changes": 96, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Fconfig%2Fi386%2Fsse.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Fconfig%2Fi386%2Fsse.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fsse.md?ref=69a2964c42159ac49c3ce1b372082a50798064bb", "patch": "@@ -2705,6 +2705,18 @@\n   [(set_attr \"type\" \"sseishft\")\n    (set_attr \"mode\" \"TI\")])\n \n+(define_expand \"vec_shl_<mode>\"\n+  [(set (match_operand:SSEMODEI 0 \"register_operand\" \"\")\n+        (ashift:TI (match_operand:SSEMODEI 1 \"register_operand\" \"\")\n+\t\t   (match_operand:SI 2 \"general_operand\" \"\")))]\n+  \"TARGET_SSE2\"\n+{\n+  if (!const_0_to_255_mul_8_operand (operands[2], SImode))\n+    FAIL;\n+  operands[0] = gen_lowpart (TImode, operands[0]);\n+  operands[1] = gen_lowpart (TImode, operands[1]);\n+})\n+\n (define_insn \"sse2_lshrti3\"\n   [(set (match_operand:TI 0 \"register_operand\" \"=x\")\n  \t(lshiftrt:TI (match_operand:TI 1 \"register_operand\" \"0\")\n@@ -2717,6 +2729,33 @@\n   [(set_attr \"type\" \"sseishft\")\n    (set_attr \"mode\" \"TI\")])\n \n+(define_expand \"vec_shr_<mode>\"\n+  [(set (match_operand:SSEMODEI 0 \"register_operand\" \"\")\n+        (lshiftrt:TI (match_operand:SSEMODEI 1 \"register_operand\" \"\")\n+\t\t     (match_operand:SI 2 \"general_operand\" \"\")))]\n+  \"TARGET_SSE2\"\n+{\n+  if (!const_0_to_255_mul_8_operand (operands[2], SImode))\n+    FAIL;\n+  operands[0] = gen_lowpart (TImode, operands[0]);\n+  operands[1] = gen_lowpart (TImode, operands[1]);\n+})\n+\n+(define_expand \"smaxv16qi3\"\n+  [(set (match_operand:V16QI 0 \"register_operand\" \"\")\n+\t(smax:V16QI (match_operand:V16QI 1 \"register_operand\" \"\")\n+\t\t    (match_operand:V16QI 2 \"register_operand\" \"\")))]\n+  \"TARGET_SSE2\"\n+{\n+  bool ok;\n+  operands[3] = gen_rtx_GT (VOIDmode, operands[1], operands[2]);\n+  operands[4] = operands[1];\n+  operands[5] = operands[2];\n+  ok = ix86_expand_int_vcond (operands, false);\n+  gcc_assert (ok);\n+  DONE;\n+})\n+\n (define_expand \"umaxv16qi3\"\n   [(set (match_operand:V16QI 0 \"register_operand\" \"\")\n \t(umax:V16QI (match_operand:V16QI 1 \"nonimmediate_operand\" \"\")\n@@ -2749,6 +2788,42 @@\n   [(set_attr \"type\" \"sseiadd\")\n    (set_attr \"mode\" \"TI\")])\n \n+(define_expand \"umaxv8hi3\"\n+  [(set (match_operand:V8HI 0 \"register_operand\" \"\")\n+\t(umax:V8HI (match_operand:V8HI 1 \"register_operand\" \"\")\n+\t\t   (match_operand:V8HI 2 \"register_operand\" \"\")))]\n+  \"TARGET_SSE2\"\n+{\n+  rtx t1, t2;\n+  bool ok;\n+\n+  t1 = gen_reg_rtx (V8HImode);\n+  emit_insn (gen_sse2_ussubv8hi3 (t1, operands[2], operands[1]));\n+  t2 = force_reg (V8HImode, CONST0_RTX (V8HImode));\n+\n+  operands[3] = gen_rtx_EQ (VOIDmode, t1, t2);\n+  operands[4] = t1;\n+  operands[5] = t2;\n+  ok = ix86_expand_int_vcond (operands, false);\n+  gcc_assert (ok);\n+  DONE;\n+})\n+\n+(define_expand \"sminv16qi3\"\n+  [(set (match_operand:V16QI 0 \"register_operand\" \"\")\n+\t(smin:V16QI (match_operand:V16QI 1 \"register_operand\" \"\")\n+\t\t    (match_operand:V16QI 2 \"register_operand\" \"\")))]\n+  \"TARGET_SSE2\"\n+{\n+  bool ok;\n+  operands[3] = gen_rtx_GT (VOIDmode, operands[1], operands[2]);\n+  operands[4] = operands[2];\n+  operands[5] = operands[1];\n+  ok = ix86_expand_int_vcond (operands, false);\n+  gcc_assert (ok);\n+  DONE;\n+})\n+\n (define_expand \"uminv16qi3\"\n   [(set (match_operand:V16QI 0 \"register_operand\" \"\")\n \t(umin:V16QI (match_operand:V16QI 1 \"nonimmediate_operand\" \"\")\n@@ -2781,6 +2856,27 @@\n   [(set_attr \"type\" \"sseiadd\")\n    (set_attr \"mode\" \"TI\")])\n \n+(define_expand \"uminv8hi3\"\n+  [(set (match_operand:V8HI 0 \"register_operand\" \"\")\n+\t(umin:V8HI (match_operand:V8HI 1 \"register_operand\" \"\")\n+\t\t   (match_operand:V8HI 2 \"register_operand\" \"\")))]\n+  \"TARGET_SSE2\"\n+{\n+  rtx t1, t2;\n+  bool ok;\n+\n+  t1 = gen_reg_rtx (V8HImode);\n+  emit_insn (gen_sse2_ussubv8hi3 (t1, operands[1], operands[2]));\n+  t2 = force_reg (V8HImode, CONST0_RTX (V8HImode));\n+\n+  operands[3] = gen_rtx_EQ (VOIDmode, t1, t2);\n+  operands[4] = t1;\n+  operands[5] = t2;\n+  ok = ix86_expand_int_vcond (operands, false);\n+  gcc_assert (ok);\n+  DONE;\n+})\n+\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n ;;\n ;; Parallel integral comparisons"}, {"sha": "09e3e6564cfeabd98a3d31b70043655f855016ac", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=69a2964c42159ac49c3ce1b372082a50798064bb", "patch": "@@ -1,3 +1,8 @@\n+2005-06-27  Richard Henderson  <rth@redhat.com>\n+\n+\t* gcc.dg/vect/vect-reduc-1short.c: Remove XFAIL.\n+\t* gcc.dg/vect/vect-reduc-2char.c: Remove XFAIL.\n+\n 2005-06-27  Ziemowit Laski  <zlaski@apple.com>\n \n \t* obj-c++.dg/proto-lossage-5.mm: New."}, {"sha": "6212f4cfdcda844e47132e72aa1820eeff300945", "filename": "gcc/testsuite/gcc.dg/vect/vect-reduc-1short.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-reduc-1short.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-reduc-1short.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-reduc-1short.c?ref=69a2964c42159ac49c3ce1b372082a50798064bb", "patch": "@@ -47,5 +47,5 @@ int main (void)\n   return 0;\n }\n \n-/* { dg-final { scan-tree-dump-times \"vectorized 3 loops\" 1 \"vect\" { xfail i?86-*-* x86_64-*-* } } } */\n+/* { dg-final { scan-tree-dump-times \"vectorized 3 loops\" 1 \"vect\" } } */\n /* { dg-final { cleanup-tree-dump \"vect\" } } */"}, {"sha": "cd8b1304956a3fc805335b5528870518ee19e8a6", "filename": "gcc/testsuite/gcc.dg/vect/vect-reduc-2char.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-reduc-2char.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/69a2964c42159ac49c3ce1b372082a50798064bb/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-reduc-2char.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Fvect%2Fvect-reduc-2char.c?ref=69a2964c42159ac49c3ce1b372082a50798064bb", "patch": "@@ -47,5 +47,5 @@ int main (void)\n   return 0 ;\n }\n \n-/* { dg-final { scan-tree-dump-times \"vectorized 3 loops\" 1 \"vect\" { xfail i?86-*-* x86_64-*-* } } } */\n+/* { dg-final { scan-tree-dump-times \"vectorized 3 loops\" 1 \"vect\" } } */\n /* { dg-final { cleanup-tree-dump \"vect\" } } */"}]}