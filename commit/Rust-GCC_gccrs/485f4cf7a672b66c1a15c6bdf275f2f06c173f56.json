{"sha": "485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NDg1ZjRjZjdhNjcyYjY2YzFhMTVjNmJkZjI3NWYyZjA2YzE3M2Y1Ng==", "commit": {"author": {"name": "Tom Tromey", "email": "tom@tromey.com", "date": "2021-06-20T23:23:52Z"}, "committer": {"name": "Tom Tromey", "email": "tom@tromey.com", "date": "2021-06-20T23:23:52Z"}, "message": "Fix up test suite buglets\n\nMark Wielaard pointed out that the i8u8.rs test that I recently\nintroduced has a bug: it checks the DW_AT_language attribute, not\nDW_AT_encoding.\n\nSorry about this.\n\nThis patch fixes this problem.  I've verified that this notices the\nfailure after temporarily backing out the corresponding GCC change.\n\nThis patch also fixes another problem that he found, namely that it's\npossible for these tests to find the wrong answer, because the hex\nvalue that is checked for might be a prefix of some longer value.\nThis patch also adds a whitespace check to avoid this potential\nproblem.", "tree": {"sha": "ea151c53744428c8ae9984bac03e25c279e0b533", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ea151c53744428c8ae9984bac03e25c279e0b533"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "html_url": "https://github.com/Rust-GCC/gccrs/commit/485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/comments", "author": {"login": "tromey", "id": 1557670, "node_id": "MDQ6VXNlcjE1NTc2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tromey", "html_url": "https://github.com/tromey", "followers_url": "https://api.github.com/users/tromey/followers", "following_url": "https://api.github.com/users/tromey/following{/other_user}", "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}", "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tromey/subscriptions", "organizations_url": "https://api.github.com/users/tromey/orgs", "repos_url": "https://api.github.com/users/tromey/repos", "events_url": "https://api.github.com/users/tromey/events{/privacy}", "received_events_url": "https://api.github.com/users/tromey/received_events", "type": "User", "site_admin": false}, "committer": {"login": "tromey", "id": 1557670, "node_id": "MDQ6VXNlcjE1NTc2NzA=", "avatar_url": "https://avatars.githubusercontent.com/u/1557670?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tromey", "html_url": "https://github.com/tromey", "followers_url": "https://api.github.com/users/tromey/followers", "following_url": "https://api.github.com/users/tromey/following{/other_user}", "gists_url": "https://api.github.com/users/tromey/gists{/gist_id}", "starred_url": "https://api.github.com/users/tromey/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tromey/subscriptions", "organizations_url": "https://api.github.com/users/tromey/orgs", "repos_url": "https://api.github.com/users/tromey/repos", "events_url": "https://api.github.com/users/tromey/events{/privacy}", "received_events_url": "https://api.github.com/users/tromey/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "8528f4b25f59cf10c093715d56f7a37c4ab6b732", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8528f4b25f59cf10c093715d56f7a37c4ab6b732", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8528f4b25f59cf10c093715d56f7a37c4ab6b732"}], "stats": {"total": 10, "additions": 5, "deletions": 5}, "files": [{"sha": "69e7ab0b17f0854651649b6ea8fc473f31ebd4b8", "filename": "gcc/testsuite/rust/debug/chartype.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Fchartype.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Fchartype.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Fchartype.rs?ref=485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "patch": "@@ -6,5 +6,5 @@ fn main () {\n // DW_ATE_UTF entered in DWARF 4.\n // { dg-options \"-w -gdwarf-4 -dA\" }\n // DW_ATE_UTF = 0x10\n-// { dg-final { scan-assembler \"0x10\\[^\\n\\r]* DW_AT_encoding\" } } */\n+// { dg-final { scan-assembler \"0x10\\[ \\t]\\[^\\n\\r]* DW_AT_encoding\" } } */\n }"}, {"sha": "1cd21a4a8ffc70a69480596c40e7149810be63c3", "filename": "gcc/testsuite/rust/debug/i8u8.rs", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Fi8u8.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Fi8u8.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Fi8u8.rs?ref=485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "patch": "@@ -6,7 +6,7 @@ fn main () {\n // Use -w to avoid warnings about the unused variables\n // { dg-options \"-w -g -dA\" }\n // DW_ATE_signed_char = 6\n-// { dg-final { scan-assembler-not \"0x6\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler-not \"0x6\\[ \\t]\\[^\\n\\r]* DW_AT_encoding\" } } */\n // DW_ATE_unsigned_char = 8\n-// { dg-final { scan-assembler-not \"0x8\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler-not \"0x8\\[ \\t]\\[^\\n\\r]* DW_AT_encoding\" } } */\n }"}, {"sha": "12e0b587a02e4d1215539e5bf344cf789cf408fe", "filename": "gcc/testsuite/rust/debug/lang.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Flang.rs?ref=485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "patch": "@@ -2,5 +2,5 @@ fn main () {\n // { dg-do compile }\n // { dg-options \"-gdwarf-5 -dA\" }\n // DW_LANG_Rust is 0x1c\n-// { dg-final { scan-assembler \"0x1c\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler \"0x1c\\[ \\t]\\[^\\n\\r]* DW_AT_language\" } } */\n }"}, {"sha": "ddacf0e43924d69ccb14a31f54ee8d3650545eaa", "filename": "gcc/testsuite/rust/debug/oldlang.rs", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/485f4cf7a672b66c1a15c6bdf275f2f06c173f56/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Frust%2Fdebug%2Foldlang.rs?ref=485f4cf7a672b66c1a15c6bdf275f2f06c173f56", "patch": "@@ -2,5 +2,5 @@ fn main () {\n // { dg-do compile }\n // { dg-options \"-gstrict-dwarf -gdwarf-3 -dA\" }\n // DW_LANG_Rust_old is 0x9000\n-// { dg-final { scan-assembler \"0x9000\\[^\\n\\r]* DW_AT_language\" } } */\n+// { dg-final { scan-assembler \"0x9000\\[ \\t]\\[^\\n\\r]* DW_AT_language\" } } */\n }"}]}