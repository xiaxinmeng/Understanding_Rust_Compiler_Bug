{"sha": "5de0e8d4e02cf79e31e9845aa03814306e9161c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWRlMGU4ZDRlMDJjZjc5ZTMxZTk4NDVhYTAzODE0MzA2ZTkxNjFjOA==", "commit": {"author": {"name": "Jason Merrill", "email": "jason@redhat.com", "date": "2000-08-28T23:07:55Z"}, "committer": {"name": "Jason Merrill", "email": "jason@gcc.gnu.org", "date": "2000-08-28T23:07:55Z"}, "message": "dwarf2out.c (new_loc_descr): Use calloc.\n\n        * dwarf2out.c (new_loc_descr): Use calloc.\n        (splice_child_die): Remove the die from the right parent.\n        (gen_struct_or_union_die): Don't add AT_name to a specification DIE.\n\nFrom-SVN: r36021", "tree": {"sha": "b457276d26a916340a6292a7eacbe884f55e8917", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b457276d26a916340a6292a7eacbe884f55e8917"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5de0e8d4e02cf79e31e9845aa03814306e9161c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de0e8d4e02cf79e31e9845aa03814306e9161c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5de0e8d4e02cf79e31e9845aa03814306e9161c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5de0e8d4e02cf79e31e9845aa03814306e9161c8/comments", "author": {"login": "jicama", "id": 266146, "node_id": "MDQ6VXNlcjI2NjE0Ng==", "avatar_url": "https://avatars.githubusercontent.com/u/266146?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jicama", "html_url": "https://github.com/jicama", "followers_url": "https://api.github.com/users/jicama/followers", "following_url": "https://api.github.com/users/jicama/following{/other_user}", "gists_url": "https://api.github.com/users/jicama/gists{/gist_id}", "starred_url": "https://api.github.com/users/jicama/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jicama/subscriptions", "organizations_url": "https://api.github.com/users/jicama/orgs", "repos_url": "https://api.github.com/users/jicama/repos", "events_url": "https://api.github.com/users/jicama/events{/privacy}", "received_events_url": "https://api.github.com/users/jicama/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "04324727ebed1259ecede17a65c975fe656b5a5e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/04324727ebed1259ecede17a65c975fe656b5a5e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/04324727ebed1259ecede17a65c975fe656b5a5e"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "885b563856589b970a64744c3f581ada9bdc49c5", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de0e8d4e02cf79e31e9845aa03814306e9161c8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de0e8d4e02cf79e31e9845aa03814306e9161c8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5de0e8d4e02cf79e31e9845aa03814306e9161c8", "patch": "@@ -1,3 +1,9 @@\n+2000-08-28  Jason Merrill  <jason@redhat.com>\n+\n+\t* dwarf2out.c (new_loc_descr): Use calloc.\n+\t(splice_child_die): Remove the die from the right parent.\n+\t(gen_struct_or_union_die): Don't add AT_name to a specification DIE.\n+\n Mon Aug 28 19:02:13 2000  Richard Kenner  <kenner@vlsi1.ultra.nyu.edu>\n \n \t* toplev.c (decode_g_option): Don't give warning for unknown -g"}, {"sha": "cc121e1283411bdba997d0130fa0a1c6d7a8dbfb", "filename": "gcc/dwarf2out.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5de0e8d4e02cf79e31e9845aa03814306e9161c8/gcc%2Fdwarf2out.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5de0e8d4e02cf79e31e9845aa03814306e9161c8/gcc%2Fdwarf2out.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdwarf2out.c?ref=5de0e8d4e02cf79e31e9845aa03814306e9161c8", "patch": "@@ -2470,10 +2470,11 @@ new_loc_descr (op, oprnd1, oprnd2)\n      register unsigned long oprnd1;\n      register unsigned long oprnd2;\n {\n+  /* Use xcalloc here so we clear out all of the long_long constant in\n+     the union.  */\n   register dw_loc_descr_ref descr\n-    = (dw_loc_descr_ref) xmalloc (sizeof (dw_loc_descr_node));\n+    = (dw_loc_descr_ref) xcalloc (1, sizeof (dw_loc_descr_node));\n \n-  descr->dw_loc_next = NULL;\n   descr->dw_loc_opc = op;\n   descr->dw_loc_oprnd1.val_class = dw_val_class_unsigned_const;\n   descr->dw_loc_oprnd1.v.val_unsigned = oprnd1;\n@@ -4649,7 +4650,7 @@ splice_child_die (parent, child)\n       && child->die_parent != get_AT_ref (parent, DW_AT_specification))\n     abort ();\n \n-  for (p = &(parent->die_child); *p; p = &((*p)->die_sib))\n+  for (p = &(child->die_parent->die_child); *p; p = &((*p)->die_sib))\n     if (*p == child)\n       {\n \t*p = child->die_sib;\n@@ -9185,9 +9186,10 @@ gen_struct_or_union_type_die (type, context_die)\n \t\t\t  ? DW_TAG_structure_type : DW_TAG_union_type,\n \t\t\t  scope_die);\n       equate_type_number_to_die (type, type_die);\n-      add_name_attribute (type_die, type_tag (type));\n       if (old_die)\n \tadd_AT_die_ref (type_die, DW_AT_specification, old_die);\n+      else\n+\tadd_name_attribute (type_die, type_tag (type));\n     }\n   else\n     remove_AT (type_die, DW_AT_declaration);"}]}