{"sha": "62ecd2b8d46aaf96caef5fa78953216629e49ebd", "node_id": "C_kwDOANBUbNoAKDYyZWNkMmI4ZDQ2YWFmOTZjYWVmNWZhNzg5NTMyMTY2MjllNDllYmQ", "commit": {"author": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2022-05-13T23:45:03Z"}, "committer": {"name": "Marek Polacek", "email": "polacek@redhat.com", "date": "2022-05-13T23:45:49Z"}, "message": "c++: Add fixed test [PR81952]\n\nThis was fixed by r258755:\nPR c++/81311 - wrong C++17 overload resolution.\n\n\tPR c++/81952\n\ngcc/testsuite/ChangeLog:\n\n\t* g++.dg/overload/conv-op4.C: New test.", "tree": {"sha": "dd6dd740b581928c3ee8858b3a04fa8447e153de", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/dd6dd740b581928c3ee8858b3a04fa8447e153de"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/62ecd2b8d46aaf96caef5fa78953216629e49ebd", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62ecd2b8d46aaf96caef5fa78953216629e49ebd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/62ecd2b8d46aaf96caef5fa78953216629e49ebd", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/62ecd2b8d46aaf96caef5fa78953216629e49ebd/comments", "author": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "committer": {"login": "mpolacek", "id": 10496300, "node_id": "MDQ6VXNlcjEwNDk2MzAw", "avatar_url": "https://avatars.githubusercontent.com/u/10496300?v=4", "gravatar_id": "", "url": "https://api.github.com/users/mpolacek", "html_url": "https://github.com/mpolacek", "followers_url": "https://api.github.com/users/mpolacek/followers", "following_url": "https://api.github.com/users/mpolacek/following{/other_user}", "gists_url": "https://api.github.com/users/mpolacek/gists{/gist_id}", "starred_url": "https://api.github.com/users/mpolacek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/mpolacek/subscriptions", "organizations_url": "https://api.github.com/users/mpolacek/orgs", "repos_url": "https://api.github.com/users/mpolacek/repos", "events_url": "https://api.github.com/users/mpolacek/events{/privacy}", "received_events_url": "https://api.github.com/users/mpolacek/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "dd7813f05df50d2ad8e0dc34503f2dff0b521d89", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/dd7813f05df50d2ad8e0dc34503f2dff0b521d89", "html_url": "https://github.com/Rust-GCC/gccrs/commit/dd7813f05df50d2ad8e0dc34503f2dff0b521d89"}], "stats": {"total": 22, "additions": 22, "deletions": 0}, "files": [{"sha": "80de19549e30886a5bc84484a0c3583e44bddce1", "filename": "gcc/testsuite/g++.dg/overload/conv-op4.C", "status": "added", "additions": 22, "deletions": 0, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/62ecd2b8d46aaf96caef5fa78953216629e49ebd/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2Fconv-op4.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/62ecd2b8d46aaf96caef5fa78953216629e49ebd/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2Fconv-op4.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Foverload%2Fconv-op4.C?ref=62ecd2b8d46aaf96caef5fa78953216629e49ebd", "patch": "@@ -0,0 +1,22 @@\n+// PR c++/81952\n+// { dg-do run { target c++11 } }\n+\n+template <class T>\n+struct opt {\n+    opt() { }\n+    opt(opt const& ) { __builtin_abort (); }\n+    opt(opt&& ) { __builtin_abort (); }\n+\n+    template <class U>\n+    opt(U&& ) { }\n+};\n+\n+struct foo \n+{\n+    explicit operator opt<int>() { __builtin_abort (); return {}; }\n+};\n+\n+int main()\n+{\n+    opt<int> o(foo{});\n+}"}]}