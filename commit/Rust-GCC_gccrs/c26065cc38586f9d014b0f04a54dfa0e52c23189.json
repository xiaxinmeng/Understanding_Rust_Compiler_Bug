{"sha": "c26065cc38586f9d014b0f04a54dfa0e52c23189", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzI2MDY1Y2MzODU4NmY5ZDAxNGIwZjA0YTU0ZGZhMGU1MmMyMzE4OQ==", "commit": {"author": {"name": "Eric Botcazou", "email": "ebotcazou@adacore.com", "date": "2015-10-21T21:10:49Z"}, "committer": {"name": "Eric Botcazou", "email": "ebotcazou@gcc.gnu.org", "date": "2015-10-21T21:10:49Z"}, "message": "tree.def (CEIL_DIV_EXPR, [...]): Tweak comments.\n\n\t* tree.def (CEIL_DIV_EXPR, FLOOR_DIV_EXPR, ROUND_DIV_EXPR): Tweak\n\tcomments.\n\t(TRUNC_MOD_EXPR, CEIL_MOD_EXPR, FLOOR_MOD_EXPR, ROUND_MOD_EXPR):\n\tAdd comments on sign of the result.\n\t* fold-const.c (tree_binary_nonnegative_warnv_p) <FLOOR_MOD_EXPR>:\n\tRecurse on operand #1 instead of operand #0.\n\t<CEIL_MOD_EXPR>: Do not recurse.\n\t<ROUND_MOD_EXPR>: Likewise.\n\nFrom-SVN: r229146", "tree": {"sha": "084c76d531cbfb2e9595783f1db615465fd22c4f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/084c76d531cbfb2e9595783f1db615465fd22c4f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c26065cc38586f9d014b0f04a54dfa0e52c23189", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c26065cc38586f9d014b0f04a54dfa0e52c23189", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c26065cc38586f9d014b0f04a54dfa0e52c23189", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c26065cc38586f9d014b0f04a54dfa0e52c23189/comments", "author": null, "committer": null, "parents": [{"sha": "e90bedf52c86a7b4e2e0a1f8a5a1450725cb95b6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e90bedf52c86a7b4e2e0a1f8a5a1450725cb95b6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e90bedf52c86a7b4e2e0a1f8a5a1450725cb95b6"}], "stats": {"total": 35, "additions": 28, "deletions": 7}, "files": [{"sha": "457c3385f8754b34657f212e223d2c590c68f754", "filename": "gcc/ChangeLog", "status": "modified", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26065cc38586f9d014b0f04a54dfa0e52c23189/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26065cc38586f9d014b0f04a54dfa0e52c23189/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c26065cc38586f9d014b0f04a54dfa0e52c23189", "patch": "@@ -1,3 +1,14 @@\n+2015-10-21  Eric Botcazou  <ebotcazou@adacore.com>\n+\n+\t* tree.def (CEIL_DIV_EXPR, FLOOR_DIV_EXPR, ROUND_DIV_EXPR): Tweak\n+\tcomments.\n+\t(TRUNC_MOD_EXPR, CEIL_MOD_EXPR, FLOOR_MOD_EXPR, ROUND_MOD_EXPR):\n+\tAdd comments on sign of the result.\n+\t* fold-const.c (tree_binary_nonnegative_warnv_p) <FLOOR_MOD_EXPR>:\n+\tRecurse on operand #1 instead of operand #0.\n+\t<CEIL_MOD_EXPR>: Do not recurse.\n+\t<ROUND_MOD_EXPR>: Likewise.\n+\n 2015-10-21  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* cfgrtl.c (pass_free_cfg::execute): Adjust."}, {"sha": "b7874a08c0b62acab3762d085de13f223557eb03", "filename": "gcc/fold-const.c", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26065cc38586f9d014b0f04a54dfa0e52c23189/gcc%2Ffold-const.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26065cc38586f9d014b0f04a54dfa0e52c23189/gcc%2Ffold-const.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffold-const.c?ref=c26065cc38586f9d014b0f04a54dfa0e52c23189", "patch": "@@ -12908,11 +12908,13 @@ tree_binary_nonnegative_warnv_p (enum tree_code code, tree type, tree op0,\n       return RECURSE (op0) && RECURSE (op1);\n \n     case TRUNC_MOD_EXPR:\n-    case CEIL_MOD_EXPR:\n-    case FLOOR_MOD_EXPR:\n-    case ROUND_MOD_EXPR:\n       return RECURSE (op0);\n \n+    case FLOOR_MOD_EXPR:\n+      return RECURSE (op1);\n+\n+    case CEIL_MOD_EXPR:\n+    case ROUND_MOD_EXPR:\n     default:\n       return tree_simple_nonnegative_warnv_p (code, type);\n     }"}, {"sha": "d0a3bd6839865671a0c8e12958e9cc988aed7354", "filename": "gcc/tree.def", "status": "modified", "additions": 12, "deletions": 4, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c26065cc38586f9d014b0f04a54dfa0e52c23189/gcc%2Ftree.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c26065cc38586f9d014b0f04a54dfa0e52c23189/gcc%2Ftree.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree.def?ref=c26065cc38586f9d014b0f04a54dfa0e52c23189", "patch": "@@ -685,19 +685,27 @@ DEFTREECODE (MULT_HIGHPART_EXPR, \"mult_highpart_expr\", tcc_binary, 2)\n /* Division for integer result that rounds the quotient toward zero.  */\n DEFTREECODE (TRUNC_DIV_EXPR, \"trunc_div_expr\", tcc_binary, 2)\n \n-/* Division for integer result that rounds the quotient toward infinity.  */\n+/* Division for integer result that rounds it toward plus infinity.  */\n DEFTREECODE (CEIL_DIV_EXPR, \"ceil_div_expr\", tcc_binary, 2)\n \n-/* Division for integer result that rounds toward minus infinity.  */\n+/* Division for integer result that rounds it toward minus infinity.  */\n DEFTREECODE (FLOOR_DIV_EXPR, \"floor_div_expr\", tcc_binary, 2)\n \n-/* Division for integer result that rounds toward nearest integer.  */\n+/* Division for integer result that rounds it toward nearest integer.  */\n DEFTREECODE (ROUND_DIV_EXPR, \"round_div_expr\", tcc_binary, 2)\n \n-/* Four kinds of remainder that go with the four kinds of division.  */\n+/* Four kinds of remainder that go with the four kinds of division:  */\n+\n+/* The sign of the remainder is that of the dividend.  */\n DEFTREECODE (TRUNC_MOD_EXPR, \"trunc_mod_expr\", tcc_binary, 2)\n+\n+/* The sign of the remainder is the opposite of that of the divisor.  */\n DEFTREECODE (CEIL_MOD_EXPR, \"ceil_mod_expr\", tcc_binary, 2)\n+\n+/* The sign of the remainder is that of the divisor.  */\n DEFTREECODE (FLOOR_MOD_EXPR, \"floor_mod_expr\", tcc_binary, 2)\n+\n+/* The sign of the remainder is not predictable.  */\n DEFTREECODE (ROUND_MOD_EXPR, \"round_mod_expr\", tcc_binary, 2)\n \n /* Division for real result.  */"}]}