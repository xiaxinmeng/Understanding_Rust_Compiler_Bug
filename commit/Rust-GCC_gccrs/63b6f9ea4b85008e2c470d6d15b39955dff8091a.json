{"sha": "63b6f9ea4b85008e2c470d6d15b39955dff8091a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NjNiNmY5ZWE0Yjg1MDA4ZTJjNDcwZDZkMTViMzk5NTVkZmY4MDkxYQ==", "commit": {"author": {"name": "Andrew Pinski", "email": "pinskia@physics.uc.edu", "date": "2004-12-20T22:32:39Z"}, "committer": {"name": "Andrew Pinski", "email": "pinskia@gcc.gnu.org", "date": "2004-12-20T22:32:39Z"}, "message": "re PR libobjc/12035 (Patch for libobjc/gc.c that fixes compilation error of Objective-C with garbage collector enabled)\n\n2004-12-20  Andrew Pinski  <pinskia@physics.uc.edu>\n\n        PR libobjc/12035\n        * gc.c: Remove definition of LOGWL, modWORDSZ, and divWORDSZ since\n        they are not used.  Include limits.h and stdlib.h.\n\nFrom-SVN: r92437", "tree": {"sha": "575dd9013cb729e4f0328b32394efa81bdb670f4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/575dd9013cb729e4f0328b32394efa81bdb670f4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/63b6f9ea4b85008e2c470d6d15b39955dff8091a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63b6f9ea4b85008e2c470d6d15b39955dff8091a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/63b6f9ea4b85008e2c470d6d15b39955dff8091a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/63b6f9ea4b85008e2c470d6d15b39955dff8091a/comments", "author": null, "committer": null, "parents": [{"sha": "8ff61ea72f35598f267b6003b0ce6425b81fadf2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8ff61ea72f35598f267b6003b0ce6425b81fadf2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8ff61ea72f35598f267b6003b0ce6425b81fadf2"}], "stats": {"total": 21, "additions": 9, "deletions": 12}, "files": [{"sha": "9968b12016e50deb4118cbd8a1301ba8823999ed", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b6f9ea4b85008e2c470d6d15b39955dff8091a/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b6f9ea4b85008e2c470d6d15b39955dff8091a/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=63b6f9ea4b85008e2c470d6d15b39955dff8091a", "patch": "@@ -1,3 +1,9 @@\n+2004-12-20  Andrew Pinski  <pinskia@physics.uc.edu>\n+\n+\tPR libobjc/12035\n+\t* gc.c: Remove definition of LOGWL, modWORDSZ, and divWORDSZ since\n+\tthey are not used.  Include limits.h and stdlib.h.\n+\n 2004-12-12  Alexander Malmberg  <alexander@malmberg.org>\n \n \t* selector.c (__objc_init_selector_tables): Add missing void to"}, {"sha": "66aa78a32ee9540a1a80715387ecfefd05ac0cd0", "filename": "libobjc/gc.c", "status": "modified", "additions": 3, "deletions": 12, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/63b6f9ea4b85008e2c470d6d15b39955dff8091a/libobjc%2Fgc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/63b6f9ea4b85008e2c470d6d15b39955dff8091a/libobjc%2Fgc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fgc.c?ref=63b6f9ea4b85008e2c470d6d15b39955dff8091a", "patch": "@@ -31,26 +31,17 @@ Boston, MA 02111-1307, USA.  */\n \n #include <assert.h>\n #include <string.h>\n+#include <stdlib.h>\n \n #if OBJC_WITH_GC\n \n #include <gc.h>\n+#include <limits.h>\n \n /* gc_typed.h uses the following but doesn't declare them */\n typedef GC_word word;\n typedef GC_signed_word signed_word;\n-\n-#if BITS_PER_WORD == 32\n-# define LOGWL\t5\n-# define modWORDSZ(n) ((n) & 0x1f)        /* n mod size of word\t    */\n-#endif\n-\n-#if BITS_PER_WORD == 64\n-# define LOGWL 6\n-# define modWORDSZ(n) ((n) & 0x3f)        /* n mod size of word\t    */\n-#endif\n-\n-#define divWORDSZ(n) ((n) >> LOGWL)\t   /* divide n by size of word      */\n+#define BITS_PER_WORD (CHAR_BIT * sizeof (word))\n \n #include <gc_typed.h>\n "}]}