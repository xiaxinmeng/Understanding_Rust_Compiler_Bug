{"sha": "b785f485ecfa4a4685e30b3385b701159726f4a3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc4NWY0ODVlY2ZhNGE0Njg1ZTMwYjMzODViNzAxMTU5NzI2ZjRhMw==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@redhat.com", "date": "2004-07-25T08:10:28Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2004-07-25T08:10:28Z"}, "message": "c-decl.c (start_function): Set DECL_ARTIFICIAL and DECL_IGNORED_P on the RESULT_DECL.\n\n        * c-decl.c (start_function): Set DECL_ARTIFICIAL and DECL_IGNORED_P\n        on the RESULT_DECL.\n        * cgraphunit.c (cgraph_build_static_cdtor): Likewise.\n        * integrate.c (copy_decl_for_inlining): Copy DECL_ARTIFICIAL and\n        DECL_IGNORED_P to new decl.\nada/\n        * utils.c (create_subprog_decl): Set DECL_ARTIFICIAL and\n        DECL_IGNORED_P on RESULT_DECL.\ncp/\n        * decl.c (start_preparsed_function): Set DECL_ARTIFICIAL and\n        DECL_IGNORED_P on RESULT_DECL.\n        * semantics.c (finalize_nrv): Copy them too.\nfortran/\n        * trans-decl.c (gfc_build_function_decl): Set DECL_ARTIFICIAL\n        and DECL_IGNORED_P on RESULT_DECL.\n        (gfc_generate_constructors): Likewise.\njava/\n        * decl.c (build_result_decl): Set DECL_ARTIFICIAL and DECL_IGNORED_P.\n\nFrom-SVN: r85145", "tree": {"sha": "b78bcdd05d614d85d427a31d73cab2c711cc5ccd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b78bcdd05d614d85d427a31d73cab2c711cc5ccd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b785f485ecfa4a4685e30b3385b701159726f4a3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b785f485ecfa4a4685e30b3385b701159726f4a3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b785f485ecfa4a4685e30b3385b701159726f4a3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b785f485ecfa4a4685e30b3385b701159726f4a3/comments", "author": null, "committer": null, "parents": [{"sha": "78d8e0f9d867bb8d53ab4ad98873e2e8ab342c8f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/78d8e0f9d867bb8d53ab4ad98873e2e8ab342c8f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/78d8e0f9d867bb8d53ab4ad98873e2e8ab342c8f"}], "stats": {"total": 73, "additions": 64, "deletions": 9}, "files": [{"sha": "a6719d35b020fcd34fb4ce4e976e6cc438d74c13", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1,3 +1,11 @@\n+2004-07-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* c-decl.c (start_function): Set DECL_ARTIFICIAL and DECL_IGNORED_P\n+\ton the RESULT_DECL.\n+\t* cgraphunit.c (cgraph_build_static_cdtor): Likewise.\n+\t* integrate.c (copy_decl_for_inlining): Copy DECL_ARTIFICIAL and\n+\tDECL_IGNORED_P to new decl.\n+\n 2004-07-24  Zack Weinberg  <zack@codesourcery.com>\n \n \t* config/ia64/ia64.c (general_xfmode_operand)"}, {"sha": "651ff90c188826f2534fa9ba27b141c9844818e5", "filename": "gcc/ada/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fada%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fada%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2FChangeLog?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1,3 +1,8 @@\n+2004-07-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* utils.c (create_subprog_decl): Set DECL_ARTIFICIAL and\n+\tDECL_IGNORED_P on RESULT_DECL.\n+\n 2004-07-20  Olivier Hainque  <hainque@act-europe.fr>\n \n \t* a-elchha.adb (Last_Chance_Handler): Remove the bogus buffer dynamic"}, {"sha": "e307def7e800625ef0fa91f9f914c3091736abc0", "filename": "gcc/ada/utils.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fada%2Futils.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fada%2Futils.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fada%2Futils.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1687,6 +1687,8 @@ create_subprog_decl (tree subprog_name, tree asm_name,\n   TREE_SIDE_EFFECTS (subprog_decl) = TYPE_VOLATILE (subprog_type);\n   DECL_ARGUMENTS (subprog_decl) = param_decl_list;\n   DECL_RESULT (subprog_decl)    = build_decl (RESULT_DECL, 0, return_type);\n+  DECL_ARTIFICIAL (DECL_RESULT (subprog_decl)) = 1;\n+  DECL_IGNORED_P (DECL_RESULT (subprog_decl)) = 1;\n \n   if (inline_flag)\n     DECL_DECLARED_INLINE_P (subprog_decl) = 1;"}, {"sha": "62a464ee305acab6666e915c3b9bbd96e1e90016", "filename": "gcc/c-decl.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fc-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fc-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-decl.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -5661,7 +5661,7 @@ int\n start_function (tree declspecs, tree declarator, tree attributes)\n {\n   tree decl1, old_decl;\n-  tree restype;\n+  tree restype, resdecl;\n \n   current_function_returns_value = 0;  /* Assume, until we see it does.  */\n   current_function_returns_null = 0;\n@@ -5857,8 +5857,11 @@ start_function (tree declspecs, tree declarator, tree attributes)\n       else\n \trestype = integer_type_node;\n     }\n-  DECL_RESULT (current_function_decl)\n-    = build_decl (RESULT_DECL, NULL_TREE, restype);\n+\n+  resdecl = build_decl (RESULT_DECL, NULL_TREE, restype);\n+  DECL_ARTIFICIAL (resdecl) = 1;\n+  DECL_IGNORED_P (resdecl) = 1;\n+  DECL_RESULT (current_function_decl) = resdecl;\n \n   start_fname_decls ();\n "}, {"sha": "2d962b8c83972f499398418cc7ef26f1679fc7cb", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 6, "deletions": 2, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1796,7 +1796,7 @@ cgraph_build_static_cdtor (char which, tree body, int priority)\n {\n   static int counter = 0;\n   char which_buf[16];\n-  tree decl, name;\n+  tree decl, name, resdecl;\n \n   sprintf (which_buf, \"%c_%d\", which, counter++);\n   name = get_file_function_name_long (which_buf);\n@@ -1805,7 +1805,11 @@ cgraph_build_static_cdtor (char which, tree body, int priority)\n \t\t     build_function_type (void_type_node, void_list_node));\n   current_function_decl = decl;\n \n-  DECL_RESULT (decl) = build_decl (RESULT_DECL, NULL_TREE, void_type_node);\n+  resdecl = build_decl (RESULT_DECL, NULL_TREE, void_type_node);\n+  DECL_ARTIFICIAL (resdecl) = 1;\n+  DECL_IGNORED_P (resdecl) = 1;\n+  DECL_RESULT (decl) = resdecl;\n+\n   allocate_struct_function (decl);\n \n   TREE_STATIC (decl) = 1;"}, {"sha": "6512f4e46374339f9cf6d38aded0adba6402fe91", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1,3 +1,9 @@\n+2004-07-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* decl.c (start_preparsed_function): Set DECL_ARTIFICIAL and\n+\tDECL_IGNORED_P on RESULT_DECL.\n+\t* semantics.c (finalize_nrv): Copy them too.\n+\n 2004-07-23  Nathan Sidwell  <nathan@codesourcery.com>\n \n \t* search.c (lookup_conversion_operator): Avoid two loops."}, {"sha": "64217cf98f03915a9dcf21362478493a2d957bda", "filename": "gcc/cp/decl.c", "status": "modified", "additions": 8, "deletions": 4, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcp%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcp%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fdecl.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -9689,10 +9689,14 @@ start_preparsed_function (tree decl1, tree attrs, int flags)\n     restype = type_promotes_to (restype);\n   if (DECL_RESULT (decl1) == NULL_TREE)\n     {\n-      DECL_RESULT (decl1)\n-\t= build_decl (RESULT_DECL, 0, TYPE_MAIN_VARIANT (restype));\n-      c_apply_type_quals_to_decl (cp_type_quals (restype),\n-\t\t\t\t  DECL_RESULT (decl1));\n+      tree resdecl;\n+\n+      resdecl = build_decl (RESULT_DECL, 0, TYPE_MAIN_VARIANT (restype));\n+      DECL_ARTIFICIAL (resdecl) = 1;\n+      DECL_IGNORED_P (resdecl) = 1;\n+      DECL_RESULT (decl1) = resdecl;\n+\n+      c_apply_type_quals_to_decl (cp_type_quals (restype), resdecl);\n     }\n \n   /* Initialize RTL machinery.  We cannot do this until"}, {"sha": "f6f71759478b5d17813d03b7625ba74e62046210", "filename": "gcc/cp/semantics.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcp%2Fsemantics.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fcp%2Fsemantics.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fsemantics.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -3050,6 +3050,8 @@ finalize_nrv (tree *tp, tree var, tree result)\n \n   /* Copy debugging information from VAR to RESULT.  */\n   DECL_NAME (result) = DECL_NAME (var);\n+  DECL_ARTIFICIAL (result) = DECL_ARTIFICIAL (var);\n+  DECL_IGNORED_P (result) = DECL_IGNORED_P (var);\n   DECL_SOURCE_LOCATION (result) = DECL_SOURCE_LOCATION (var);\n   DECL_ABSTRACT_ORIGIN (result) = DECL_ABSTRACT_ORIGIN (var);\n   /* Don't forget that we take its address.  */"}, {"sha": "1e0d825cf68f12cc3ed13565175841a16f48e755", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1,3 +1,9 @@\n+2004-07-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* trans-decl.c (gfc_build_function_decl): Set DECL_ARTIFICIAL\n+\tand DECL_IGNORED_P on RESULT_DECL.\n+\t(gfc_generate_constructors): Likewise.\n+\n 2004-07-18  Tobias Schlueter  <tobias.schlueter@physik.uni-muenchen.de>\n \n \tPR fortran/16465"}, {"sha": "7883bdea2d86694a8ca154738c771e15ae9d3290", "filename": "gcc/fortran/trans-decl.c", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Ffortran%2Ftrans-decl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Ffortran%2Ftrans-decl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-decl.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1030,6 +1030,8 @@ gfc_build_function_decl (gfc_symbol * sym)\n     }\n \n   result_decl = build_decl (RESULT_DECL, result_decl, type);\n+  DECL_ARTIFICIAL (result_decl) = 1;\n+  DECL_IGNORED_P (result_decl) = 1;\n   DECL_CONTEXT (result_decl) = fndecl;\n   DECL_RESULT (fndecl) = result_decl;\n \n@@ -2124,6 +2126,8 @@ gfc_generate_constructors (void)\n   TREE_PUBLIC (fndecl) = 1;\n \n   decl = build_decl (RESULT_DECL, NULL_TREE, void_type_node);\n+  DECL_ARTIFICIAL (decl) = 1;\n+  DECL_IGNORED_P (decl) = 1;\n   DECL_CONTEXT (decl) = fndecl;\n   DECL_RESULT (fndecl) = decl;\n "}, {"sha": "d9e66f340fbac1c21a9b242c14e1f88a1f3d4499", "filename": "gcc/integrate.c", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fintegrate.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fintegrate.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fintegrate.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -141,6 +141,11 @@ copy_decl_for_inlining (tree decl, tree from_fn, tree to_fn)\n \t}\n     }\n \n+  /* Don't generate debug information for the copy if we wouldn't have\n+     generated it for the copy either.  */\n+  DECL_ARTIFICIAL (copy) = DECL_ARTIFICIAL (decl);\n+  DECL_IGNORED_P (copy) = DECL_IGNORED_P (decl);\n+\n   /* Set the DECL_ABSTRACT_ORIGIN so the debugging routines know what\n      declaration inspired this copy.  */\n   DECL_ABSTRACT_ORIGIN (copy) = DECL_ORIGIN (decl);"}, {"sha": "b8e6eec6dcb4507afbfe2ddbd197f60b08f2c19d", "filename": "gcc/java/ChangeLog", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fjava%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fjava%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2FChangeLog?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1,3 +1,7 @@\n+2004-07-25  Richard Henderson  <rth@redhat.com>\n+\n+\t* decl.c (build_result_decl): Set DECL_ARTIFICIAL and DECL_IGNORED_P.\n+\n 2004-07-23  Mike Stump  <mrs@apple.com>\n \n \t* boehm.c (set_bit): Improve type safety wrt unsignedness."}, {"sha": "c61d42653f70dc63049656d2fba298ab6928a25b", "filename": "gcc/java/decl.c", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fjava%2Fdecl.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b785f485ecfa4a4685e30b3385b701159726f4a3/gcc%2Fjava%2Fdecl.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fjava%2Fdecl.c?ref=b785f485ecfa4a4685e30b3385b701159726f4a3", "patch": "@@ -1804,6 +1804,8 @@ build_result_decl (tree fndecl)\n \t  && TYPE_PRECISION (restype) < TYPE_PRECISION (integer_type_node))\n \trestype = integer_type_node;\n       result = build_decl (RESULT_DECL, NULL_TREE, restype);\n+      DECL_ARTIFICIAL (result) = 1;\n+      DECL_IGNORED_P (result) = 1;\n       DECL_CONTEXT (result) = fndecl;\n       DECL_RESULT (fndecl) = result;\n     }"}]}