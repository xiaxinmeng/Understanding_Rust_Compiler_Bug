{"sha": "2f4d643dab5cdf9ac795434578b970ca6af21021", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MmY0ZDY0M2RhYjVjZGY5YWM3OTU0MzQ1NzhiOTcwY2E2YWYyMTAyMQ==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2010-03-11T16:06:37Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2010-03-11T16:06:37Z"}, "message": "re PR fortran/43228 (NAMELIST I/O: Reading at 2 dimensions (rank) array values.)\n\n2010-03-11  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/43228\n        * io/list_read.c (nml_parse_qualifier): Disable expanded_read\n        for array sections.\n\n2010-03-11  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/43228\n        * gfortran.dg/namelist_61.f90: New test.\n\nFrom-SVN: r157389", "tree": {"sha": "8619eef5d631dc59aea8b9819cc1d86757f0be5d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/8619eef5d631dc59aea8b9819cc1d86757f0be5d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/2f4d643dab5cdf9ac795434578b970ca6af21021", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f4d643dab5cdf9ac795434578b970ca6af21021", "html_url": "https://github.com/Rust-GCC/gccrs/commit/2f4d643dab5cdf9ac795434578b970ca6af21021", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/2f4d643dab5cdf9ac795434578b970ca6af21021/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ff0a0c1d883427293cc007f273ad6f9a31b511a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ff0a0c1d883427293cc007f273ad6f9a31b511a6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ff0a0c1d883427293cc007f273ad6f9a31b511a6"}], "stats": {"total": 54, "additions": 54, "deletions": 0}, "files": [{"sha": "152db47601667106ebbf9aabef83ca37e1aeca9c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f4d643dab5cdf9ac795434578b970ca6af21021/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f4d643dab5cdf9ac795434578b970ca6af21021/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=2f4d643dab5cdf9ac795434578b970ca6af21021", "patch": "@@ -1,3 +1,8 @@\n+2010-03-11  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/43228\n+\t* gfortran.dg/namelist_61.f90: New test.\n+\n 2010-03-11  Richard Guenther  <rguenther@suse.de>\n \n \tPR tree-optimization/43255"}, {"sha": "c7214dd2bb946fd6136f879979839381400c9da8", "filename": "gcc/testsuite/gfortran.dg/namelist_61.f90", "status": "added", "additions": 35, "deletions": 0, "changes": 35, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f4d643dab5cdf9ac795434578b970ca6af21021/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_61.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f4d643dab5cdf9ac795434578b970ca6af21021/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_61.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fnamelist_61.f90?ref=2f4d643dab5cdf9ac795434578b970ca6af21021", "patch": "@@ -0,0 +1,35 @@\n+! { dg-do run }\n+!\n+! PR fortran/43228\n+!\n+integer :: a(3,3)\n+character(len=100) :: str\n+namelist /nml/a\n+\n+a = -1\n+str = '&nml a(1,:) = 1 2 3 /'\n+read(str, nml=nml)\n+if (any (a(1,:) /= [1, 2, 3])) call abort ()\n+if (any (a([2,3],:) /= -1)) call abort ()\n+\n+a = -1\n+str = '&nml a(1,1) = 1 2 3 4 /'\n+read(str, nml=nml)\n+if (any (a(:,1) /= [1, 2, 3])) call abort ()\n+if (any (a(:,2) /= [4, -1, -1])) call abort ()\n+if (any (a(:,3) /= -1)) call abort ()\n+\n+str = '&nml a(1,:) = 1 2 3 , &\n+       &    a(2,:) = 4,5,6 &\n+       &    a(3,:) = 7 8 9/'\n+read(str, nml=nml)\n+if (any (a(1,:) /= [1, 2, 3])) call abort ()\n+if (any (a(2,:) /= [4, 5, 6])) call abort ()\n+if (any (a(3,:) /= [7, 8, 9])) call abort ()\n+\n+!print *, a(:,1)\n+!print *, a(:,2)\n+!print *, a(:,3)\n+end\n+\n+"}, {"sha": "4f59525332e68f04f600e68a939495822febf191", "filename": "libgfortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f4d643dab5cdf9ac795434578b970ca6af21021/libgfortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f4d643dab5cdf9ac795434578b970ca6af21021/libgfortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2FChangeLog?ref=2f4d643dab5cdf9ac795434578b970ca6af21021", "patch": "@@ -1,3 +1,9 @@\n+2010-03-11  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/43228\n+\t* io/list_read.c (nml_parse_qualifier): Disable expanded_read\n+\tfor array sections.\n+\n 2010-03-10  Jerry DeLisle  <jvdelisle@gcc.gnu.org>\n \n \tPR libfortran/43320"}, {"sha": "830cde24d698d68fd815a161dcea72b948657ae7", "filename": "libgfortran/io/list_read.c", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/2f4d643dab5cdf9ac795434578b970ca6af21021/libgfortran%2Fio%2Flist_read.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/2f4d643dab5cdf9ac795434578b970ca6af21021/libgfortran%2Fio%2Flist_read.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgfortran%2Fio%2Flist_read.c?ref=2f4d643dab5cdf9ac795434578b970ca6af21021", "patch": "@@ -2091,6 +2091,14 @@ nml_parse_qualifier (st_parameter_dt *dtp, descriptor_dimension *ad,\n \t    }\n \t}\n \n+      if (is_array_section == 1 && dtp->u.p.expanded_read == 1)\n+     \t{\n+\t  int i;\n+\t  dtp->u.p.expanded_read = 0;\n+\t  for (i = 0; i < dim; i++)\n+\t    ls[i].end = ls[i].start;\n+      \t}\n+\n       /* Check the values of the triplet indices.  */\n       if ((ls[dim].start > (ssize_t) GFC_DIMENSION_UBOUND(ad[dim]))\n \t   || (ls[dim].start < (ssize_t) GFC_DIMENSION_LBOUND(ad[dim]))"}]}