{"sha": "ed7dc894d7a38a763bc88608135d047ddb650032", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZWQ3ZGM4OTRkN2EzOGE3NjNiYzg4NjA4MTM1ZDA0N2RkYjY1MDAzMg==", "commit": {"author": {"name": "Jan Hubicka", "email": "hubicka@ucw.cz", "date": "2015-11-25T20:00:47Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2015-11-25T20:00:47Z"}, "message": "timevar.def (TV_IPA_LTO_DECOMPRESS, [...]): New.\n\n\t* timevar.def (TV_IPA_LTO_DECOMPRESS, TV_IPA_LTO_COMPRESS,\n\tTV_IPA_LTO_OUTPUT): New.\n\t* lto-compress.c: Include timevar.h\n\t(lto_end_compression, lto_end_uncompression): Add timers.\n\t* langhooks.c: Include timevar.h\n\t(lhd_append_data): Add timer.\n\nFrom-SVN: r230902", "tree": {"sha": "458ee9ffb9bb3ad9069cde9a08ca71c1b3a9d60d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/458ee9ffb9bb3ad9069cde9a08ca71c1b3a9d60d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ed7dc894d7a38a763bc88608135d047ddb650032", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed7dc894d7a38a763bc88608135d047ddb650032", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ed7dc894d7a38a763bc88608135d047ddb650032", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ed7dc894d7a38a763bc88608135d047ddb650032/comments", "author": null, "committer": null, "parents": [{"sha": "72ad6d333902d1ac6a2c17b223508aea2b8a7e85", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/72ad6d333902d1ac6a2c17b223508aea2b8a7e85", "html_url": "https://github.com/Rust-GCC/gccrs/commit/72ad6d333902d1ac6a2c17b223508aea2b8a7e85"}], "stats": {"total": 25, "additions": 24, "deletions": 1}, "files": [{"sha": "2950141066cba6a04643cd95ec495d5bd025958f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ed7dc894d7a38a763bc88608135d047ddb650032", "patch": "@@ -1,3 +1,12 @@\n+2015-11-25  Jan Hubicka  <hubicka@ucw.cz>\n+\n+\t* timevar.def (TV_IPA_LTO_DECOMPRESS, TV_IPA_LTO_COMPRESS,\n+\tTV_IPA_LTO_OUTPUT): New.\n+\t* lto-compress.c: Include timevar.h\n+\t(lto_end_compression, lto_end_uncompression): Add timers.\n+\t* langhooks.c: Include timevar.h\n+\t(lhd_append_data): Add timer.\n+\n 2015-11-25  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* varasm.c (default_elf_asm_output_limited_string,"}, {"sha": "9d4f331fc4881f83d97b3fe99455d26eb2cc14a3", "filename": "gcc/langhooks.c", "status": "modified", "additions": 6, "deletions": 1, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2Flanghooks.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2Flanghooks.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flanghooks.c?ref=ed7dc894d7a38a763bc88608135d047ddb650032", "patch": "@@ -34,6 +34,7 @@ along with GCC; see the file COPYING3.  If not see\n #include \"langhooks.h\"\n #include \"tree-diagnostic.h\"\n #include \"output.h\"\n+#include \"timevar.h\"\n \n /* Do nothing; in many cases the default hook.  */\n \n@@ -658,7 +659,11 @@ void\n lhd_append_data (const void *data, size_t len, void *)\n {\n   if (data)\n-    assemble_string ((const char *)data, len);\n+    {\n+      timevar_push (TV_IPA_LTO_OUTPUT);\n+      assemble_string ((const char *)data, len);\n+      timevar_pop (TV_IPA_LTO_OUTPUT);\n+    }\n }\n \n "}, {"sha": "204ca419d74b887db5f568fb2f1b53f169e9d827", "filename": "gcc/lto-compress.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2Flto-compress.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2Flto-compress.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Flto-compress.c?ref=ed7dc894d7a38a763bc88608135d047ddb650032", "patch": "@@ -33,6 +33,7 @@ along with GCC; see the file COPYING3.  If not see\n    system.h.  */\n #include <zlib.h>\n #include \"lto-compress.h\"\n+#include \"timevar.h\"\n \n /* Compression stream structure, holds the flush callback and opaque token,\n    the buffered data, and a note of whether compressing or uncompressing.  */\n@@ -177,6 +178,8 @@ lto_end_compression (struct lto_compression_stream *stream)\n \n   gcc_assert (stream->is_compression);\n \n+  timevar_push (TV_IPA_LTO_COMPRESS);\n+\n   out_stream.next_out = outbuf;\n   out_stream.avail_out = outbuf_length;\n   out_stream.next_in = cursor;\n@@ -220,6 +223,7 @@ lto_end_compression (struct lto_compression_stream *stream)\n \n   lto_destroy_compression_stream (stream);\n   free (outbuf);\n+  timevar_pop (TV_IPA_LTO_COMPRESS);\n }\n \n /* Return a new uncompression stream, with CALLBACK flush function passed\n@@ -260,6 +264,7 @@ lto_end_uncompression (struct lto_compression_stream *stream)\n   size_t uncompressed_bytes = 0;\n \n   gcc_assert (!stream->is_compression);\n+  timevar_push (TV_IPA_LTO_DECOMPRESS);\n \n   while (remaining > 0)\n     {\n@@ -311,4 +316,5 @@ lto_end_uncompression (struct lto_compression_stream *stream)\n \n   lto_destroy_compression_stream (stream);\n   free (outbuf);\n+  timevar_pop (TV_IPA_LTO_DECOMPRESS);\n }"}, {"sha": "535597fcbb1166f141aed5f219288179fb0a52f1", "filename": "gcc/timevar.def", "status": "modified", "additions": 3, "deletions": 0, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2Ftimevar.def", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ed7dc894d7a38a763bc88608135d047ddb650032/gcc%2Ftimevar.def", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftimevar.def?ref=ed7dc894d7a38a763bc88608135d047ddb650032", "patch": "@@ -79,6 +79,9 @@ DEFTIMEVAR (TV_IPA_INLINING          , \"ipa inlining heuristics\")\n DEFTIMEVAR (TV_IPA_FNSPLIT           , \"ipa function splitting\")\n DEFTIMEVAR (TV_IPA_COMDATS\t     , \"ipa comdats\")\n DEFTIMEVAR (TV_IPA_OPT\t\t     , \"ipa various optimizations\")\n+DEFTIMEVAR (TV_IPA_LTO_DECOMPRESS    , \"lto stream inflate\")\n+DEFTIMEVAR (TV_IPA_LTO_COMPRESS      , \"lto stream deflate\")\n+DEFTIMEVAR (TV_IPA_LTO_OUTPUT        , \"lto stream output\")\n DEFTIMEVAR (TV_IPA_LTO_GIMPLE_IN     , \"ipa lto gimple in\")\n DEFTIMEVAR (TV_IPA_LTO_GIMPLE_OUT    , \"ipa lto gimple out\")\n DEFTIMEVAR (TV_IPA_LTO_DECL_IN       , \"ipa lto decl in\")"}]}