{"sha": "9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWIxZjZlOTFhMTdlM2I1MGIyOWRkMDZkYmU1YjdmNzFmNGFhNzc2OQ==", "commit": {"author": {"name": "Ben Elliston", "email": "bje@au.ibm.com", "date": "2006-09-18T22:40:59Z"}, "committer": {"name": "Ben Elliston", "email": "bje@gcc.gnu.org", "date": "2006-09-18T22:40:59Z"}, "message": "target-supports.exp (check_effective_target_tls): Compile test stubs using ${tool}_target_compile, not just target_compile.\n\n\t* lib/target-supports.exp (check_effective_target_tls): Compile\n\ttest stubs using ${tool}_target_compile, not just target_compile.\n\t(check_effective_target_tls_runtime): Likewise.\n\nFrom-SVN: r117041", "tree": {"sha": "c6c6cc18ee53c6ad8b73b165350afc5cea5b5dae", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c6c6cc18ee53c6ad8b73b165350afc5cea5b5dae"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769/comments", "author": null, "committer": null, "parents": [{"sha": "71e9f91522224a31fd9fc7b5345bf87e9222b24a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/71e9f91522224a31fd9fc7b5345bf87e9222b24a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/71e9f91522224a31fd9fc7b5345bf87e9222b24a"}], "stats": {"total": 12, "additions": 10, "deletions": 2}, "files": [{"sha": "5a9cf9f6bff5c5206e6b8c927066d67ae3adca81", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769", "patch": "@@ -1,3 +1,9 @@\n+2006-09-19  Ben Elliston  <bje@au.ibm.com>\n+\n+\t* lib/target-supports.exp (check_effective_target_tls): Compile\n+\ttest stubs using ${tool}_target_compile, not just target_compile.\n+\t(check_effective_target_tls_runtime): Likewise.\n+\n 2006-09-19  Ben Elliston  <bje@au.ibm.com>\n \n \t* gcc.c-torture/compile/20030405-1.x: Remove."}, {"sha": "90639ceb44f1090895c17caf864e6b9b30bb14f7", "filename": "gcc/testsuite/lib/target-supports.exp", "status": "modified", "additions": 4, "deletions": 2, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Flib%2Ftarget-supports.exp?ref=9b1f6e91a17e3b50b29dd06dbe5b7f71f4aa7769", "patch": "@@ -390,6 +390,7 @@ proc check_effective_target_pcc_bitfield_type_matters { } {\n \n proc check_effective_target_tls {} {\n     global et_tls_saved\n+    global tool\n \n     if [info exists et_tls_saved] {\n \tverbose \"check_effective_target_tls: using cached result\" 2\n@@ -406,7 +407,7 @@ proc check_effective_target_tls {} {\n \n \t# Test for thread-local data supported by the platform.\n \tset comp_output \\\n-\t    [target_compile $src $asm assembly \"\"]\n+\t    [${tool}_target_compile $src $asm assembly \"\"]\n \tfile delete $src\n \tif { [string match \"*not supported*\" $comp_output] } {\n \t    set et_tls_saved 0\n@@ -423,6 +424,7 @@ proc check_effective_target_tls {} {\n \n proc check_effective_target_tls_runtime {} {\n     global et_tls_runtime_saved\n+    global tool\n \n     if [info exists et_tls_runtime_saved] {\n \tverbose \"check_effective_target_tls_runtime: using cached result\" 2\n@@ -439,7 +441,7 @@ proc check_effective_target_tls_runtime {} {\n \tclose $f\n \n \tset comp_output \\\n-\t    [target_compile $src $exe executable \"\"]\n+\t    [${tool}_target_compile $src $exe executable \"\"]\n \tfile delete $src\n \n \tif [string match \"\" $comp_output] then {"}]}