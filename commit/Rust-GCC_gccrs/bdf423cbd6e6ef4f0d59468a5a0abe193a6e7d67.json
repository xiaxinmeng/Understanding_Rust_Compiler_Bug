{"sha": "bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmRmNDIzY2JkNmU2ZWY0ZjBkNTk0NjhhNWEwYWJlMTkzYTZlN2Q2Nw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1996-05-20T15:17:41Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1996-05-20T15:17:41Z"}, "message": "Try to fix inline of fp/int convert\n\nFrom-SVN: r12057", "tree": {"sha": "5a8e96c4b6bd7e9669da657dda30a3e8512a4857", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a8e96c4b6bd7e9669da657dda30a3e8512a4857"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67/comments", "author": null, "committer": null, "parents": [{"sha": "b34ec578aa01e2830f2d77f1e556e4df76d18623", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b34ec578aa01e2830f2d77f1e556e4df76d18623", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b34ec578aa01e2830f2d77f1e556e4df76d18623"}], "stats": {"total": 65, "additions": 37, "deletions": 28}, "files": [{"sha": "cc843941b3384900766dce91e7ae9242417549f6", "filename": "gcc/config/rs6000/rs6000.md", "status": "modified", "additions": 37, "deletions": 28, "changes": 65, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67/gcc%2Fconfig%2Frs6000%2Frs6000.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67/gcc%2Fconfig%2Frs6000%2Frs6000.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Frs6000.md?ref=bdf423cbd6e6ef4f0d59468a5a0abe193a6e7d67", "patch": "@@ -2612,68 +2612,77 @@\n }\")\n \n (define_insn \"lshrsi3_power\"\n-  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r\")\n-\t(lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r\")\n-\t\t     (match_operand:SI 2 \"reg_or_cint_operand\" \"r,i\")))\n-   (clobber (match_scratch:SI 3 \"=q,X\"))]\n+  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r,r\")\n+\t(lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r,r\")\n+\t\t     (match_operand:SI 2 \"reg_or_cint_operand\" \"r,O,i\")))\n+   (clobber (match_scratch:SI 3 \"=q,X,X\"))]\n   \"TARGET_POWER\"\n   \"@\n   sre %0,%1,%2\n+  mr %0,%1\n   {s%A2i|s%A2wi} %0,%1,%h2\")\n \n (define_insn \"lshrsi3_no_power\"\n-  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n-\t(lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n-\t\t     (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\")))]\n+  [(set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r\")\n+\t(lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r\")\n+\t\t     (match_operand:SI 2 \"reg_or_cint_operand\" \"O,ri\")))]\n   \"! TARGET_POWER\"\n-  \"{sr|srw}%I2 %0,%1,%h2\")\n+  \"@\n+  mr %0,%1\n+  {sr|srw}%I2 %0,%1,%h2\")\n \n (define_insn \"\"\n-  [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x\")\n-\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r\")\n-\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"r,i\"))\n+  [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x,x\")\n+\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r,r\")\n+\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"r,O,i\"))\n \t\t    (const_int 0)))\n-   (clobber (match_scratch:SI 3 \"=r,r\"))\n-   (clobber (match_scratch:SI 4 \"=q,X\"))]\n+   (clobber (match_scratch:SI 3 \"=r,X,r\"))\n+   (clobber (match_scratch:SI 4 \"=q,X,X\"))]\n   \"TARGET_POWER\"\n   \"@\n   sre. %3,%1,%2\n+  mr. %1,%1\n   {s%A2i.|s%A2wi.} %3,%1,%h2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n (define_insn \"\"\n-  [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x\")\n-\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n-\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\"))\n+  [(set (match_operand:CC 0 \"cc_reg_operand\" \"=x,x\")\n+\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r\")\n+\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"O,ri\"))\n \t\t    (const_int 0)))\n-   (clobber (match_scratch:SI 3 \"=r\"))]\n+   (clobber (match_scratch:SI 3 \"=X,r\"))]\n   \"! TARGET_POWER\"\n-  \"{sr|srw}%I2. %3,%1,%h2\"\n+  \"@\n+   mr. %1,%1\n+   {sr|srw}%I2. %3,%1,%h2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n (define_insn \"\"\n-  [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x,x\")\n-\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r\")\n-\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"r,i\"))\n+  [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x,x,x\")\n+\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r,r\")\n+\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"r,O,i\"))\n \t\t    (const_int 0)))\n-   (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r\")\n+   (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r,r\")\n \t(lshiftrt:SI (match_dup 1) (match_dup 2)))\n-   (clobber (match_scratch:SI 4 \"=q,X\"))]\n+   (clobber (match_scratch:SI 4 \"=q,X,X\"))]\n   \"TARGET_POWER\"\n   \"@\n   sre. %0,%1,%2\n+  mr. %0,%1\n   {s%A2i.|s%A2wi.} %0,%1,%h2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n (define_insn \"\"\n-  [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x\")\n-\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r\")\n-\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"ri\"))\n+  [(set (match_operand:CC 3 \"cc_reg_operand\" \"=x,x\")\n+\t(compare:CC (lshiftrt:SI (match_operand:SI 1 \"gpc_reg_operand\" \"r,r\")\n+\t\t\t\t (match_operand:SI 2 \"reg_or_cint_operand\" \"O,ri\"))\n \t\t    (const_int 0)))\n-   (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r\")\n+   (set (match_operand:SI 0 \"gpc_reg_operand\" \"=r,r\")\n \t(lshiftrt:SI (match_dup 1) (match_dup 2)))]\n   \"! TARGET_POWER\"\n-  \"{sr|srw}%I2. %0,%1,%h2\"\n+  \"@\n+   mr. %0,%1\n+   {sr|srw}%I2. %0,%1,%h2\"\n   [(set_attr \"type\" \"delayed_compare\")])\n \n (define_insn \"\""}]}