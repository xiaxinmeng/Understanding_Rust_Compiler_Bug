{"sha": "bc3a44dbcad809b3e9a94153627db6079fe90794", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YmMzYTQ0ZGJjYWQ4MDliM2U5YTk0MTUzNjI3ZGI2MDc5ZmU5MDc5NA==", "commit": {"author": {"name": "Loren J. Rittle", "email": "ljrittle@acm.org", "date": "2002-03-29T22:01:18Z"}, "committer": {"name": "Loren J. Rittle", "email": "ljrittle@gcc.gnu.org", "date": "2002-03-29T22:01:18Z"}, "message": "config.gcc (*-*-freebsd*): Enable creation of libgcc_s.so.\n\n\t* config.gcc (*-*-freebsd*): Enable creation of libgcc_s.so.\n\t* config/t-slibgcc-elf-ver (SHLIB_LC): Add macro and use it.\n\tNo functional change except ...\n\t* config/t-slibgcc-nolc-override (SHLIB_LC): Override it.  New file.\n\t* doc/install.texi (*-*-freebsd*): Document port configuration.\n\nFrom-SVN: r51574", "tree": {"sha": "2cf309009b8a9fac5ebb36296af94b25e5cd8ee3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/2cf309009b8a9fac5ebb36296af94b25e5cd8ee3"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/bc3a44dbcad809b3e9a94153627db6079fe90794", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc3a44dbcad809b3e9a94153627db6079fe90794", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bc3a44dbcad809b3e9a94153627db6079fe90794", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bc3a44dbcad809b3e9a94153627db6079fe90794/comments", "author": null, "committer": null, "parents": [{"sha": "bce54832de15ae651be11fda3b84b07dd0f2663e", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bce54832de15ae651be11fda3b84b07dd0f2663e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bce54832de15ae651be11fda3b84b07dd0f2663e"}], "stats": {"total": 22, "additions": 20, "deletions": 2}, "files": [{"sha": "b5309a2c27420414f9966039dd03c7fe84b10b00", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=bc3a44dbcad809b3e9a94153627db6079fe90794", "patch": "@@ -1,3 +1,11 @@\n+2002-03-29  Loren J. Rittle  <ljrittle@acm.org>\n+\n+\t* config.gcc (*-*-freebsd*): Enable creation of libgcc_s.so.\n+\t* config/t-slibgcc-elf-ver (SHLIB_LC): Add macro and use it.\n+\tNo functional change except ...\n+\t* config/t-slibgcc-nolc-override (SHLIB_LC): Override it.  New file.\n+\t* doc/install.texi (*-*-freebsd*): Document port configuration.\n+\n 2002-03-29  Neil Booth  <neil@daikokuya.demon.co.uk>\n \n \t* Makefile.in (convert.o, calls.o, expmed.o): Update."}, {"sha": "80aed452d93300f211e666beb2fdfa9168d4c4e0", "filename": "gcc/config.gcc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fconfig.gcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fconfig.gcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig.gcc?ref=bc3a44dbcad809b3e9a94153627db6079fe90794", "patch": "@@ -363,14 +363,20 @@ case $machine in\n \t*-*-freebsd6 | *-*-freebsd[6].*) fbsd_tm_file=\"freebsd6.h\";;\n \t*) echo 'Please update *-*-freebsd* in gcc/config.gcc'; exit 1;;\n \tesac\n-\ttmake_file=t-freebsd\n+\ttmake_file=\"t-slibgcc-elf-ver t-freebsd\"\n \txmake_file=none\n \txm_defines=POSIX\n \tcase x${enable_threads} in\n \txno) fbsd_tm_file=\"${fbsd_tm_file} freebsd-nthr.h\";;\n \tx | xyes | xpthreads | xposix)\n \t\tthread_file='posix'\n \t\ttmake_file=\"${tmake_file} t-freebsd-thread\"\n+\t\t# Before 5.0, FreeBSD can't bind shared libraries to -lc\n+\t\t# when \"optionally\" threaded via weak pthread_* checks.\n+\t\tcase $machine in\n+\t\t*-*-freebsd[34] | *-*-freebsd[34].*)\n+\t\t\ttmake_file=\"${tmake_file} t-slibgcc-nolc-override\";;\n+\t\tesac\n \t\t;;\n \t*) echo 'Unknown thread configuration for FreeBSD'; exit 1;;\n \tesac"}, {"sha": "d6c89ff8acbdbcbbf0fc59a7f932cdeb0b0ce320", "filename": "gcc/config/t-slibgcc-elf-ver", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fconfig%2Ft-slibgcc-elf-ver", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-elf-ver?ref=bc3a44dbcad809b3e9a94153627db6079fe90794", "patch": "@@ -6,11 +6,12 @@ SHLIB_NAME = @shlib_base_name@.so\n SHLIB_SONAME = @shlib_base_name@.so.1\n SHLIB_MAP = @shlib_map_file@\n SHLIB_OBJS = @shlib_objs@\n+SHLIB_LC = -lc\n \n SHLIB_LINK = $(GCC_FOR_TARGET) $(LIBGCC2_CFLAGS) -shared -nodefaultlibs \\\n \t-Wl,--soname=$(SHLIB_SONAME) \\\n \t-Wl,--version-script=$(SHLIB_MAP) \\\n-\t-o $(SHLIB_NAME) @multilib_flags@ $(SHLIB_OBJS) -lc && \\\n+\t-o $(SHLIB_NAME) @multilib_flags@ $(SHLIB_OBJS) $(SHLIB_LC) && \\\n \trm -f $(SHLIB_SONAME) && \\\n \t$(LN_S) $(SHLIB_NAME) $(SHLIB_SONAME)\n # $(slibdir) double quoted to protect it from expansion while building"}, {"sha": "959d2cc2a1f620a448cec63bea997fea1d801994", "filename": "gcc/config/t-slibgcc-nolc-override", "status": "added", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fconfig%2Ft-slibgcc-nolc-override", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fconfig%2Ft-slibgcc-nolc-override", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Ft-slibgcc-nolc-override?ref=bc3a44dbcad809b3e9a94153627db6079fe90794", "patch": "@@ -0,0 +1 @@\n+SHLIB_LC ="}, {"sha": "3e3e258bff76564735b3dea2b190724dfd24b589", "filename": "gcc/doc/install.texi", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fdoc%2Finstall.texi", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/bc3a44dbcad809b3e9a94153627db6079fe90794/gcc%2Fdoc%2Finstall.texi", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdoc%2Finstall.texi?ref=bc3a44dbcad809b3e9a94153627db6079fe90794", "patch": "@@ -2079,6 +2079,8 @@ should properly complete the bootstrap).  Other CPU architectures\n supported by FreeBSD will require additional configuration tuning in, at\n the very least, both boehm-gc and libffi.\n \n+Shared @file{libgcc_s.so} is now built and installed by default.\n+\n @html\n </p>\n <hr>"}]}