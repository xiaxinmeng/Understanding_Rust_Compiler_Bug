{"sha": "de14871c88330996f2aeec4f9331aee85b664bd7", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGUxNDg3MWM4ODMzMDk5NmYyYWVlYzRmOTMzMWFlZTg1YjY2NGJkNw==", "commit": {"author": {"name": "Thomas Schwinge", "email": "thomas@codesourcery.com", "date": "2013-11-07T15:07:34Z"}, "committer": {"name": "Thomas Schwinge", "email": "tschwinge@gcc.gnu.org", "date": "2013-11-07T15:07:34Z"}, "message": "Generally link to libgomp for -ftree-parallelize-loops=*.\n\n\tgcc/\n\t* config/arc/arc.h (LINK_COMMAND_SPEC): For\n\t-ftree-parallelize-loops=*, link to libgomp and its dependencies.\n\t* config/ia64/hpux.h (LIB_SPEC): Likewise.\n\t* config/pa/pa-hpux11.h (LIB_SPEC): Likewise.\n\t* config/pa/pa64-hpux.h (LIB_SPEC): Likewise.\n\t* gcc.c (GOMP_SELF_SPECS): Update comment about libgomp's\n\tdependencies.\n\tlibgomp/\n\t* libgomp.spec.in: Update comment about libgomp's dependencies.\n\t* configure.ac: Likewise.\n\t* configure: Regenerate.\n\nFrom-SVN: r204517", "tree": {"sha": "aef72f75ea80aeea4373ea725a6b2bd6c9b83f78", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/aef72f75ea80aeea4373ea725a6b2bd6c9b83f78"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/de14871c88330996f2aeec4f9331aee85b664bd7", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de14871c88330996f2aeec4f9331aee85b664bd7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de14871c88330996f2aeec4f9331aee85b664bd7", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de14871c88330996f2aeec4f9331aee85b664bd7/comments", "author": {"login": "tschwinge", "id": 21753, "node_id": "MDQ6VXNlcjIxNzUz", "avatar_url": "https://avatars.githubusercontent.com/u/21753?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tschwinge", "html_url": "https://github.com/tschwinge", "followers_url": "https://api.github.com/users/tschwinge/followers", "following_url": "https://api.github.com/users/tschwinge/following{/other_user}", "gists_url": "https://api.github.com/users/tschwinge/gists{/gist_id}", "starred_url": "https://api.github.com/users/tschwinge/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tschwinge/subscriptions", "organizations_url": "https://api.github.com/users/tschwinge/orgs", "repos_url": "https://api.github.com/users/tschwinge/repos", "events_url": "https://api.github.com/users/tschwinge/events{/privacy}", "received_events_url": "https://api.github.com/users/tschwinge/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7190fdc1906cfdfee00dc32197bee568d8174b71", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7190fdc1906cfdfee00dc32197bee568d8174b71", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7190fdc1906cfdfee00dc32197bee568d8174b71"}], "stats": {"total": 50, "additions": 37, "deletions": 13}, "files": [{"sha": "cfb6036e7d10fa35604e8b60aae47d5c1dd756a4", "filename": "gcc/ChangeLog", "status": "modified", "additions": 10, "deletions": 0, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -1,3 +1,13 @@\n+2013-11-07  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* config/arc/arc.h (LINK_COMMAND_SPEC): For\n+\t-ftree-parallelize-loops=*, link to libgomp and its dependencies.\n+\t* config/ia64/hpux.h (LIB_SPEC): Likewise.\n+\t* config/pa/pa-hpux11.h (LIB_SPEC): Likewise.\n+\t* config/pa/pa64-hpux.h (LIB_SPEC): Likewise.\n+\t* gcc.c (GOMP_SELF_SPECS): Update comment about libgomp's\n+\tdependencies.\n+\n 2013-11-07  Jakub Jelinek  <jakub@redhat.com>\n \n \t* tree-ssa-loop-niter.c: Include tree-ssanames.h."}, {"sha": "87908d41afc6976c74c008da4dc1a340caf69050", "filename": "gcc/config/arc/arc.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Farc%2Farc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Farc%2Farc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farc%2Farc.h?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -174,7 +174,8 @@ along with GCC; see the file COPYING3.  If not see\n     %(linker) %l \" LINK_PIE_SPEC \"%X %{o*} %{A} %{d} %{e*} %{m} %{N} %{n} %{r}\\\n     %{s} %{t} %{u*} %{x} %{z} %{Z} %{!A:%{!nostdlib:%{!nostartfiles:%S}}}\\\n     %{static:} %{L*} %(mfwrap) %(link_libgcc) %o\\\n-    %{fopenmp:%:include(libgomp.spec)%(link_gomp)} %(mflib)\\\n+    %{fopenmp|ftree-parallelize-loops=*:%:include(libgomp.spec)%(link_gomp)}\\\n+    %(mflib)\\\n     %{fprofile-arcs|fprofile-generate|coverage:-lgcov}\\\n     %{!nostdlib:%{!nodefaultlibs:%(link_ssp) %(link_gcc_c_sequence)}}\\\n     %{!A:%{!nostdlib:%{!nostartfiles:%E}}} %{T*} }}}}}}\""}, {"sha": "517132c8e63e4cc442b8e67ea816d5af1fc9330d", "filename": "gcc/config/ia64/hpux.h", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Fia64%2Fhpux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Fia64%2Fhpux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fia64%2Fhpux.h?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -92,7 +92,7 @@ do {\t\t\t\t\t\t\t\\\n #undef  LIB_SPEC\n #define LIB_SPEC \\\n   \"%{!shared: \\\n-     %{mt|pthread:%{fopenmp:-lrt} -lpthread} \\\n+     %{mt|pthread:%{fopenmp|ftree-parallelize-loops=*:-lrt} -lpthread} \\\n      %{p:%{!mlp64:-L/usr/lib/hpux32/libp} \\\n \t %{mlp64:-L/usr/lib/hpux64/libp} -lprof} \\\n      %{pg:%{!mlp64:-L/usr/lib/hpux32/libp} \\"}, {"sha": "4da1b096a5050e81ff18d60231d663cef78fa7b8", "filename": "gcc/config/pa/pa-hpux11.h", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa-hpux11.h?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -120,7 +120,8 @@ along with GCC; see the file COPYING3.  If not see\n #undef LIB_SPEC\n #define LIB_SPEC \\\n   \"%{!shared:\\\n-     %{fopenmp:%{static:-a archive_shared} -lrt %{static:-a archive}}\\\n+     %{fopenmp|ftree-parallelize-loops=*:%{static:-a archive_shared} -lrt\\\n+       %{static:-a archive}}\\\n      %{mt|pthread:-lpthread} -lc\\\n      %{static:%{!nolibdld:-a archive_shared -ldld -a archive -lc}\\\n        %{!mt:%{!pthread:-a shared -lc -a archive}}}}\\"}, {"sha": "9efc137c89e32db4444c4a4a07404d8c07a9378a", "filename": "gcc/config/pa/pa64-hpux.h", "status": "modified", "additions": 12, "deletions": 6, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fpa%2Fpa64-hpux.h?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -58,39 +58,45 @@ along with GCC; see the file COPYING3.  If not see\n #if ((TARGET_DEFAULT | TARGET_CPU_DEFAULT) & MASK_GNU_LD)\n #define LIB_SPEC \\\n   \"%{!shared:\\\n-     %{!p:%{!pg:%{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n+     %{!p:%{!pg:%{fopenmp|ftree-parallelize-loops=*:%{static:-a shared} -lrt\\\n+                  %{static:-a archive}}\\\n \t    %{mt|pthread:-lpthread} -lc\\\n \t    %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n \t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{p:%{!pg:%{static:%{!mhp-ld:-a shared}%{mhp-ld:-a archive_shared}}\\\n \t   -lprof %{static:-a archive}\\\n-\t   %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n+\t   %{fopenmp|ftree-parallelize-loops=*:%{static:-a shared} -lrt\\\n+             %{static:-a archive}}\\\n \t   %{mt|pthread:-lpthread} -lc\\\n \t   %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n \t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{pg:%{static:%{!mhp-ld:-a shared}%{mhp-ld:-a archive_shared}}\\\n        -lgprof %{static:-a archive}\\\n-       %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n+       %{fopenmp|ftree-parallelize-loops=*:%{static:-a shared} -lrt\\\n+         %{static:-a archive}}\\\n        %{mt|pthread:-lpthread} -lc\\\n        %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n \t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n    %{shared:%{mt|pthread:-lpthread}}\"\n #else\n #define LIB_SPEC \\\n   \"%{!shared:\\\n-     %{!p:%{!pg:%{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n+     %{!p:%{!pg:%{fopenmp|ftree-parallelize-loops=*:%{static:-a shared} -lrt\\\n+                  %{static:-a archive}}\\\n \t    %{mt|pthread:-lpthread} -lc\\\n \t    %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n \t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{p:%{!pg:%{static:%{mgnu-ld:-a shared}%{!mgnu-ld:-a archive_shared}}\\\n \t   -lprof %{static:-a archive}\\\n-\t   %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n+\t   %{fopenmp|ftree-parallelize-loops=*:%{static:-a shared} -lrt\\\n+             %{static:-a archive}}\\\n \t   %{mt|pthread:-lpthread} -lc\\\n \t   %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n \t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\\n      %{pg:%{static:%{mgnu-ld:-a shared}%{!mgnu-ld:-a archive_shared}}\\\n        -lgprof %{static:-a archive}\\\n-       %{fopenmp:%{static:-a shared} -lrt %{static:-a archive}}\\\n+       %{fopenmp|ftree-parallelize-loops=*:%{static:-a shared} -lrt\\\n+         %{static:-a archive}}\\\n        %{mt|pthread:-lpthread} -lc\\\n        %{static:%{!nolibdld:-a shared -ldld -a archive -lc}\\\n \t\t%{!mt:%{!pthread:-a shared -lc -a archive}}}}}\\"}, {"sha": "dff7477f54e1c60dad0616b97f1bfded63eaf042", "filename": "gcc/gcc.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fgcc.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/gcc%2Fgcc.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgcc.c?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -924,7 +924,7 @@ static const char *const multilib_defaults_raw[] = MULTILIB_DEFAULTS;\n #define DRIVER_SELF_SPECS \"\"\n #endif\n \n-/* Adding -fopenmp should imply pthreads.  This is particularly important\n+/* Linking to libgomp implies pthreads.  This is particularly important\n    for targets that use different start files and suchlike.  */\n #ifndef GOMP_SELF_SPECS\n #define GOMP_SELF_SPECS \"%{fopenmp|ftree-parallelize-loops=*: -pthread}\""}, {"sha": "507a589200eceb7549bab954a38044746b5bc66f", "filename": "libgomp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2FChangeLog?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -1,3 +1,9 @@\n+2013-11-07  Thomas Schwinge  <thomas@codesourcery.com>\n+\n+\t* libgomp.spec.in: Update comment about libgomp's dependencies.\n+\t* configure.ac: Likewise.\n+\t* configure: Regenerate.\n+\n 2013-10-16  Tobias Burnus  <burnus@net-b.de>\n \n \t* libgomp.texi: (Runtime Library Routines): Update references for"}, {"sha": "766eb098089fbc148c91f7a3ebb1139667ac85cc", "filename": "libgomp/configure", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -16154,7 +16154,7 @@ else\n fi\n \n # Set up the set of libraries that we need to link against for libgomp.\n-# Note that the GOMP_SELF_SPEC in gcc.c will force -pthread for -fopenmp,\n+# Note that the GOMP_SELF_SPEC in gcc.c may force -pthread,\n # which will force linkage against -lpthread (or equivalent for the system).\n # That's not 100% ideal, but about the best we can do easily.\n if test $enable_shared = yes; then"}, {"sha": "84d250f0b19a237538ff2be3d9810a3c32e99adf", "filename": "libgomp/configure.ac", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Fconfigure.ac?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -274,7 +274,7 @@ else\n fi\n \n # Set up the set of libraries that we need to link against for libgomp.\n-# Note that the GOMP_SELF_SPEC in gcc.c will force -pthread for -fopenmp,\n+# Note that the GOMP_SELF_SPEC in gcc.c may force -pthread,\n # which will force linkage against -lpthread (or equivalent for the system).\n # That's not 100% ideal, but about the best we can do easily.\n if test $enable_shared = yes; then"}, {"sha": "5651603f48745617e9aa7de5f07d2a618a18caad", "filename": "libgomp/libgomp.spec.in", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2Flibgomp.spec.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/de14871c88330996f2aeec4f9331aee85b664bd7/libgomp%2Flibgomp.spec.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgomp%2Flibgomp.spec.in?ref=de14871c88330996f2aeec4f9331aee85b664bd7", "patch": "@@ -1,3 +1,3 @@\n # This spec file is read by gcc when linking.  It is used to specify the\n-# standard libraries we need in order to link with -fopenmp.\n+# standard libraries we need in order to link with libgomp.\n *link_gomp: @link_gomp@"}]}