{"sha": "1a989b6179c0a10892785658443e93507dc597ee", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWE5ODliNjE3OWMwYTEwODkyNzg1NjU4NDQzZTkzNTA3ZGM1OTdlZQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2013-05-01T19:19:44Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2013-05-01T19:19:44Z"}, "message": "re PR c++/57132 (spurious warning: division by zero [-Wdiv-by-zero] in  if (m) res %=m;)\n\n/cp\n2013-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/57132\n\t* pt.c (tsubst_copy_and_build, MODOP_EXPR): Increase / decrease\n\tc_inhibit_evaluation_warnings around build_x_modify_expr call.\n\n/testsuite\n2013-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/57132\n\t* g++.dg/warn/Wdiv-by-zero-bogus-2.C: New.\n\nFrom-SVN: r198504", "tree": {"sha": "508a2f6b25799edf4c0ed0c43034da30fd462ef4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/508a2f6b25799edf4c0ed0c43034da30fd462ef4"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1a989b6179c0a10892785658443e93507dc597ee", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a989b6179c0a10892785658443e93507dc597ee", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1a989b6179c0a10892785658443e93507dc597ee", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1a989b6179c0a10892785658443e93507dc597ee/comments", "author": null, "committer": null, "parents": [{"sha": "36ff9dfbbec06afc69c642ff460abbd4cbbd78e1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/36ff9dfbbec06afc69c642ff460abbd4cbbd78e1", "html_url": "https://github.com/Rust-GCC/gccrs/commit/36ff9dfbbec06afc69c642ff460abbd4cbbd78e1"}], "stats": {"total": 38, "additions": 37, "deletions": 1}, "files": [{"sha": "e4996fb0492ab4cbfff8d627cf3d4f6edb69c619", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=1a989b6179c0a10892785658443e93507dc597ee", "patch": "@@ -1,3 +1,9 @@\n+2013-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/57132\n+\t* pt.c (tsubst_copy_and_build, MODOP_EXPR): Increase / decrease\n+\tc_inhibit_evaluation_warnings around build_x_modify_expr call.\n+\n 2013-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/57092"}, {"sha": "33ab292b9b542da47cbdde141b38aff43c83dfa0", "filename": "gcc/cp/pt.c", "status": "modified", "additions": 8, "deletions": 1, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Fcp%2Fpt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Fcp%2Fpt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fpt.c?ref=1a989b6179c0a10892785658443e93507dc597ee", "patch": "@@ -13810,7 +13810,11 @@ tsubst_copy_and_build (tree t,\n \n     case MODOP_EXPR:\n       {\n-\ttree r = build_x_modify_expr\n+\ttree r;\n+\n+\t++c_inhibit_evaluation_warnings;\n+\n+\tr = build_x_modify_expr\n \t  (EXPR_LOCATION (t),\n \t   RECUR (TREE_OPERAND (t, 0)),\n \t   TREE_CODE (TREE_OPERAND (t, 1)),\n@@ -13824,6 +13828,9 @@ tsubst_copy_and_build (tree t,\n \t   here.  */\n \tif (TREE_NO_WARNING (t))\n \t  TREE_NO_WARNING (r) = TREE_NO_WARNING (t);\n+\n+\t--c_inhibit_evaluation_warnings;\n+\n \tRETURN (r);\n       }\n "}, {"sha": "bce4185ca693ed44b10d22cc4c50ee9f45ed1ade", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1a989b6179c0a10892785658443e93507dc597ee", "patch": "@@ -1,3 +1,8 @@\n+2013-05-01  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/57132\n+\t* g++.dg/warn/Wdiv-by-zero-bogus-2.C: New.\n+\n 2013-05-01  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR target/57091"}, {"sha": "b7556eaac30badc06c2d16e98db16bdbc19976ea", "filename": "gcc/testsuite/g++.dg/warn/Wdiv-by-zero-bogus-2.C", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWdiv-by-zero-bogus-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1a989b6179c0a10892785658443e93507dc597ee/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWdiv-by-zero-bogus-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fwarn%2FWdiv-by-zero-bogus-2.C?ref=1a989b6179c0a10892785658443e93507dc597ee", "patch": "@@ -0,0 +1,18 @@\n+// PR c++/57132\n+\n+template<unsigned m, unsigned a>\n+struct mod \n+{\n+  static unsigned calc(unsigned x) {\n+    unsigned res = a * x;\n+    if (m)\n+      res %= m;\n+    return res;\n+  }\n+};\n+\n+int main()\n+{\n+  mod<3,2>::calc(7);\n+  mod<0,2>::calc(7);\n+}"}]}