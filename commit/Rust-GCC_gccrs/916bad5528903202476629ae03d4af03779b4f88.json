{"sha": "916bad5528903202476629ae03d4af03779b4f88", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTE2YmFkNTUyODkwMzIwMjQ3NjYyOWFlMDNkNGFmMDM3NzliNGY4OA==", "commit": {"author": {"name": "Tobias Burnus", "email": "burnus@net-b.de", "date": "2012-11-27T22:20:44Z"}, "committer": {"name": "Tobias Burnus", "email": "burnus@gcc.gnu.org", "date": "2012-11-27T22:20:44Z"}, "message": "re PR fortran/55476 (Bogus warning \"Pointer might outlive the pointer target\")\n\n2012-11-27  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/55476\n        * expr.c (gfc_check_pointer_assign): Fix check\n        pointer-might-outlive-target check for host_assoc.\n\n2012-11-27  Tobias Burnus  <burnus@net-b.de>\n\n        PR fortran/55476\n        * gfortran.dg/warn_target_lifetime_3.f90: New.\n\nFrom-SVN: r193872", "tree": {"sha": "b89e89d0758864c6437f331fd445a29614b32b29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b89e89d0758864c6437f331fd445a29614b32b29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/916bad5528903202476629ae03d4af03779b4f88", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/916bad5528903202476629ae03d4af03779b4f88", "html_url": "https://github.com/Rust-GCC/gccrs/commit/916bad5528903202476629ae03d4af03779b4f88", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/916bad5528903202476629ae03d4af03779b4f88/comments", "author": {"login": "tob2", "id": 264461, "node_id": "MDQ6VXNlcjI2NDQ2MQ==", "avatar_url": "https://avatars.githubusercontent.com/u/264461?v=4", "gravatar_id": "", "url": "https://api.github.com/users/tob2", "html_url": "https://github.com/tob2", "followers_url": "https://api.github.com/users/tob2/followers", "following_url": "https://api.github.com/users/tob2/following{/other_user}", "gists_url": "https://api.github.com/users/tob2/gists{/gist_id}", "starred_url": "https://api.github.com/users/tob2/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/tob2/subscriptions", "organizations_url": "https://api.github.com/users/tob2/orgs", "repos_url": "https://api.github.com/users/tob2/repos", "events_url": "https://api.github.com/users/tob2/events{/privacy}", "received_events_url": "https://api.github.com/users/tob2/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "ce940020f8ddc157806d642dddfb6e7bcec51f34", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ce940020f8ddc157806d642dddfb6e7bcec51f34", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ce940020f8ddc157806d642dddfb6e7bcec51f34"}], "stats": {"total": 44, "additions": 43, "deletions": 1}, "files": [{"sha": "bc8d0d8d445adfd23c763b5788a9b14b4458a9b4", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=916bad5528903202476629ae03d4af03779b4f88", "patch": "@@ -1,3 +1,9 @@\n+2012-11-27  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/55476\n+\t* expr.c (gfc_check_pointer_assign): Fix check\n+\tpointer-might-outlive-target check for host_assoc.\n+\n 2012-11-26  Eric Botcazou  <ebotcazou@adacore.com>\n \n \t* trans-decl.c (gfc_finish_var_decl): Do not set DECL_RESTRICTED_P."}, {"sha": "15570afb6ee33e273da01618b91f5eed24e61240", "filename": "gcc/fortran/expr.c", "status": "modified", "additions": 3, "deletions": 1, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ffortran%2Fexpr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ffortran%2Fexpr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Fexpr.c?ref=916bad5528903202476629ae03d4af03779b4f88", "patch": "@@ -3693,7 +3693,9 @@ gfc_check_pointer_assign (gfc_expr *lvalue, gfc_expr *rvalue)\n       warn = lvalue->symtree->n.sym->attr.dummy\n \t     || lvalue->symtree->n.sym->attr.result\n \t     || lvalue->symtree->n.sym->attr.function\n-\t     || lvalue->symtree->n.sym->attr.host_assoc\n+\t     || (lvalue->symtree->n.sym->attr.host_assoc\n+\t\t && lvalue->symtree->n.sym->ns\n+\t\t    != rvalue->symtree->n.sym->ns)\n \t     || lvalue->symtree->n.sym->attr.use_assoc\n \t     || lvalue->symtree->n.sym->attr.in_common;\n "}, {"sha": "2d8350b202628a303eb1f4ae4d68833cbee98bc9", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=916bad5528903202476629ae03d4af03779b4f88", "patch": "@@ -1,3 +1,8 @@\n+2012-11-27  Tobias Burnus  <burnus@net-b.de>\n+\n+\tPR fortran/55476\n+\t* gfortran.dg/warn_target_lifetime_3.f90: New.\n+\n 2012-11-27  Vladimir Makarov  <vmakarov@redhat.com>\n \n \tPR rtl-optimization/55458"}, {"sha": "9113a885fa6b4f4b0e511815ee12dbd0201f77ae", "filename": "gcc/testsuite/gfortran.dg/warn_target_lifetime_3.f90", "status": "added", "additions": 29, "deletions": 0, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_target_lifetime_3.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/916bad5528903202476629ae03d4af03779b4f88/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_target_lifetime_3.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fwarn_target_lifetime_3.f90?ref=916bad5528903202476629ae03d4af03779b4f88", "patch": "@@ -0,0 +1,29 @@\n+! { dg-do compile }\n+! { dg-options \"-Wall\" }\n+!\n+! PR fortran/55476\n+!\n+! Contribued by  Janus Weil\n+!\n+subroutine test\n+  integer, pointer :: p\n+  integer, target :: t\n+  p => t\n+contains\n+  subroutine sub()\n+    if (p /= 0) return\n+  end subroutine\n+end subroutine\n+\n+module m\n+  integer, pointer :: p2\n+contains\n+  subroutine test\n+    integer, target :: t2\n+    p2 => t2 ! { dg-warning \"Pointer at .1. in pointer assignment might outlive the pointer target\" }\n+  contains\n+    subroutine sub()\n+      if (p2 /= 0) return\n+    end subroutine\n+  end subroutine\n+end module m"}]}