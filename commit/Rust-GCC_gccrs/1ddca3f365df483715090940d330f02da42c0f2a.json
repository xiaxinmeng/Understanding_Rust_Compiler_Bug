{"sha": "1ddca3f365df483715090940d330f02da42c0f2a", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MWRkY2EzZjM2NWRmNDgzNzE1MDkwOTQwZDMzMGYwMmRhNDJjMGYyYQ==", "commit": {"author": {"name": "Paolo Carlini", "email": "paolo.carlini@oracle.com", "date": "2017-01-16T15:43:06Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2017-01-16T15:43:06Z"}, "message": "revert: re PR c++/71737 (ICE following 2x pack expansion in non-pack with template alias)\n\n/c-family\n2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tRevert:\n     \t2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71737\n\t* c-common.c (set_underlying_type): Always set DECL_ORIGINAL_TYPE.\n\n/testsuite\n2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tRevert:\n        2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n\n\tPR c++/71737\n\t* g++.dg/cpp0x/pr71737.C: New.\n\nFrom-SVN: r244496", "tree": {"sha": "6842961845efcd495b7f47e159df3608208c934f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6842961845efcd495b7f47e159df3608208c934f"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/1ddca3f365df483715090940d330f02da42c0f2a", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ddca3f365df483715090940d330f02da42c0f2a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1ddca3f365df483715090940d330f02da42c0f2a", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1ddca3f365df483715090940d330f02da42c0f2a/comments", "author": null, "committer": null, "parents": [{"sha": "290687fb4ee780292684e85d616269305629adc2", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/290687fb4ee780292684e85d616269305629adc2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/290687fb4ee780292684e85d616269305629adc2"}], "stats": {"total": 45, "additions": 23, "deletions": 22}, "files": [{"sha": "de95874888284073c2cef3f3ea53aaace7dd8f10", "filename": "gcc/c-family/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Fc-family%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Fc-family%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2FChangeLog?ref=1ddca3f365df483715090940d330f02da42c0f2a", "patch": "@@ -1,3 +1,11 @@\n+2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tRevert:\n+     \t2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71737\n+\t* c-common.c (set_underlying_type): Always set DECL_ORIGINAL_TYPE.\n+\n 2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n \n \tPR c++/71737"}, {"sha": "15ead18d36dca5ca7f3cbc4bb2cf75e9ca0dd42c", "filename": "gcc/c-family/c-common.c", "status": "modified", "additions": 7, "deletions": 9, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Fc-family%2Fc-common.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Fc-family%2Fc-common.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fc-family%2Fc-common.c?ref=1ddca3f365df483715090940d330f02da42c0f2a", "patch": "@@ -7419,18 +7419,16 @@ set_underlying_type (tree x)\n       if (TYPE_NAME (TREE_TYPE (x)) == 0)\n \tTYPE_NAME (TREE_TYPE (x)) = x;\n     }\n-  else if (DECL_ORIGINAL_TYPE (x) == NULL_TREE)\n+  else if (TREE_TYPE (x) != error_mark_node\n+\t   && DECL_ORIGINAL_TYPE (x) == NULL_TREE)\n     {\n       tree tt = TREE_TYPE (x);\n       DECL_ORIGINAL_TYPE (x) = tt;\n-      if (tt != error_mark_node)\n-\t{\n-\t  tt = build_variant_type_copy (tt);\n-\t  TYPE_STUB_DECL (tt) = TYPE_STUB_DECL (DECL_ORIGINAL_TYPE (x));\n-\t  TYPE_NAME (tt) = x;\n-\t  TREE_USED (tt) = TREE_USED (x);\n-\t  TREE_TYPE (x) = tt;\n-\t}\n+      tt = build_variant_type_copy (tt);\n+      TYPE_STUB_DECL (tt) = TYPE_STUB_DECL (DECL_ORIGINAL_TYPE (x));\n+      TYPE_NAME (tt) = x;\n+      TREE_USED (tt) = TREE_USED (x);\n+      TREE_TYPE (x) = tt;\n     }\n }\n "}, {"sha": "f25ba45e2dab08a698bc0d0dec7ecad05f58f06c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=1ddca3f365df483715090940d330f02da42c0f2a", "patch": "@@ -1,3 +1,11 @@\n+2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tRevert:\n+        2017-01-16  Paolo Carlini  <paolo.carlini@oracle.com>\n+\n+\tPR c++/71737\n+\t* g++.dg/cpp0x/pr71737.C: New.\n+\n 2017-01-16  Bill Schmidt  <wschmidt@linux.vnet.ibm.com>\n \n \t* gcc.target/powerpc/swaps-p8-27.c: New."}, {"sha": "e69de29bb2d1d6434b8b29ae775ad8c2e48c5391", "filename": "gcc/testsuite/g++.dg/cpp0x/pr71737.C", "status": "modified", "additions": 0, "deletions": 13, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71737.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/1ddca3f365df483715090940d330f02da42c0f2a/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71737.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fcpp0x%2Fpr71737.C?ref=1ddca3f365df483715090940d330f02da42c0f2a", "patch": "@@ -1,13 +0,0 @@\n-// PR c++/78765\n-// { dg-do compile { target c++11 } }\n-\n-template <template <typename ...> class TT>\n-struct quote {\n-  template <typename ...Ts>\n-  using apply = TT<Ts...>;  // { dg-error \"pack expansion\" }\n-};\n-\n-template <typename>\n-using to_int_t = int;\n-\n-using t = quote<quote<to_int_t>::apply>::apply<int>;"}]}