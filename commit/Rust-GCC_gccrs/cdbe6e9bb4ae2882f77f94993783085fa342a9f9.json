{"sha": "cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2RiZTZlOWJiNGFlMjg4MmY3N2Y5NDk5Mzc4MzA4NWZhMzQyYTlmOQ==", "commit": {"author": {"name": "Richard Sandiford", "email": "richard.sandiford@arm.com", "date": "2019-10-21T06:41:01Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2019-10-21T06:41:01Z"}, "message": "Pass a vec_info to duplicate_and_interleave\n\n2019-10-21  Richard Sandiford  <richard.sandiford@arm.com>\n\ngcc/\n\t* tree-vectorizer.h (duplicate_and_interleave): Take a vec_info.\n\t* tree-vect-slp.c (duplicate_and_interleave): Likewise.\n\t(vect_get_constant_vectors): Update call accordingly.\n\t* tree-vect-loop.c (get_initial_defs_for_reduction): Likewise.\n\nFrom-SVN: r277228", "tree": {"sha": "c2403bdfb60edc048b5c3c8d455d402bfe3e3ac9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c2403bdfb60edc048b5c3c8d455d402bfe3e3ac9"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/comments", "author": {"login": "rsandifo-arm", "id": 28043039, "node_id": "MDQ6VXNlcjI4MDQzMDM5", "avatar_url": "https://avatars.githubusercontent.com/u/28043039?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rsandifo-arm", "html_url": "https://github.com/rsandifo-arm", "followers_url": "https://api.github.com/users/rsandifo-arm/followers", "following_url": "https://api.github.com/users/rsandifo-arm/following{/other_user}", "gists_url": "https://api.github.com/users/rsandifo-arm/gists{/gist_id}", "starred_url": "https://api.github.com/users/rsandifo-arm/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rsandifo-arm/subscriptions", "organizations_url": "https://api.github.com/users/rsandifo-arm/orgs", "repos_url": "https://api.github.com/users/rsandifo-arm/repos", "events_url": "https://api.github.com/users/rsandifo-arm/events{/privacy}", "received_events_url": "https://api.github.com/users/rsandifo-arm/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "7ed54790da87bbb4a134020a9fb8bd1b72fd0acb", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ed54790da87bbb4a134020a9fb8bd1b72fd0acb", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ed54790da87bbb4a134020a9fb8bd1b72fd0acb"}], "stats": {"total": 23, "additions": 16, "deletions": 7}, "files": [{"sha": "67b640cb42274813ffcd86236f24b2d0595468eb", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "patch": "@@ -1,3 +1,10 @@\n+2019-10-21  Richard Sandiford  <richard.sandiford@arm.com>\n+\n+\t* tree-vectorizer.h (duplicate_and_interleave): Take a vec_info.\n+\t* tree-vect-slp.c (duplicate_and_interleave): Likewise.\n+\t(vect_get_constant_vectors): Update call accordingly.\n+\t* tree-vect-loop.c (get_initial_defs_for_reduction): Likewise.\n+\n 2019-10-21  Richard Sandiford  <richard.sandiford@arm.com>\n \n \t* tree-vectorizer.h (get_vectype_for_scalar_type): Take a vec_info."}, {"sha": "ecd972473b8ded199eb5b6437f0bdb21d25334b1", "filename": "gcc/tree-vect-loop.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2Ftree-vect-loop.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2Ftree-vect-loop.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-loop.c?ref=cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "patch": "@@ -3878,6 +3878,7 @@ get_initial_defs_for_reduction (slp_tree slp_node,\n {\n   vec<stmt_vec_info> stmts = SLP_TREE_SCALAR_STMTS (slp_node);\n   stmt_vec_info stmt_vinfo = stmts[0];\n+  vec_info *vinfo = stmt_vinfo->vinfo;\n   unsigned HOST_WIDE_INT nunits;\n   unsigned j, number_of_places_left_in_vector;\n   tree vector_type;\n@@ -3970,7 +3971,7 @@ get_initial_defs_for_reduction (slp_tree slp_node,\n \t    {\n \t      /* First time round, duplicate ELTS to fill the\n \t\t required number of vectors.  */\n-\t      duplicate_and_interleave (&ctor_seq, vector_type, elts,\n+\t      duplicate_and_interleave (vinfo, &ctor_seq, vector_type, elts,\n \t\t\t\t\tnumber_of_vectors, *vec_oprnds);\n \t      break;\n \t    }"}, {"sha": "cf1ff5a2941454b931deb68e9d3735146ddf1a9b", "filename": "gcc/tree-vect-slp.c", "status": "modified", "additions": 5, "deletions": 4, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2Ftree-vect-slp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2Ftree-vect-slp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vect-slp.c?ref=cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "patch": "@@ -3183,8 +3183,9 @@ vect_mask_constant_operand_p (stmt_vec_info stmt_vinfo)\n    to cut down on the number of interleaves.  */\n \n void\n-duplicate_and_interleave (gimple_seq *seq, tree vector_type, vec<tree> elts,\n-\t\t\t  unsigned int nresults, vec<tree> &results)\n+duplicate_and_interleave (vec_info *, gimple_seq *seq, tree vector_type,\n+\t\t\t  vec<tree> elts, unsigned int nresults,\n+\t\t\t  vec<tree> &results)\n {\n   unsigned int nelts = elts.length ();\n   tree element_type = TREE_TYPE (vector_type);\n@@ -3473,8 +3474,8 @@ vect_get_constant_vectors (tree op, slp_tree slp_node,\n \t      else\n \t\t{\n \t\t  if (vec_oprnds->is_empty ())\n-\t\t    duplicate_and_interleave (&ctor_seq, vector_type, elts,\n-\t\t\t\t\t      number_of_vectors,\n+\t\t    duplicate_and_interleave (vinfo, &ctor_seq, vector_type,\n+\t\t\t\t\t      elts, number_of_vectors,\n \t\t\t\t\t      permute_results);\n \t\t  vec_cst = permute_results[number_of_vectors - j - 1];\n \t\t}"}, {"sha": "ef5492536dce018521697ea61f57b44e60a02b24", "filename": "gcc/tree-vectorizer.h", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2Ftree-vectorizer.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cdbe6e9bb4ae2882f77f94993783085fa342a9f9/gcc%2Ftree-vectorizer.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-vectorizer.h?ref=cdbe6e9bb4ae2882f77f94993783085fa342a9f9", "patch": "@@ -1754,8 +1754,8 @@ extern bool is_simple_and_all_uses_invariant (stmt_vec_info, loop_vec_info);\n extern bool can_duplicate_and_interleave_p (unsigned int, machine_mode,\n \t\t\t\t\t    unsigned int * = NULL,\n \t\t\t\t\t    tree * = NULL, tree * = NULL);\n-extern void duplicate_and_interleave (gimple_seq *, tree, vec<tree>,\n-\t\t\t\t      unsigned int, vec<tree> &);\n+extern void duplicate_and_interleave (vec_info *, gimple_seq *, tree,\n+\t\t\t\t      vec<tree>, unsigned int, vec<tree> &);\n extern int vect_get_place_in_interleaving_chain (stmt_vec_info, stmt_vec_info);\n \n /* In tree-vect-patterns.c.  */"}]}