{"sha": "ab87b0add6a7c3464ee9067dd99e037e79f81984", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWI4N2IwYWRkNmE3YzM0NjRlZTkwNjdkZDk5ZTAzN2U3OWY4MTk4NA==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-10-12T08:13:46Z"}, "committer": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2020-10-12T09:09:14Z"}, "message": "IPA: prevent an UBSAN error\n\nPrevents the following UBSAN error:\n\n./xgcc -B. /home/marxin/Programming/gcc/gcc/testsuite/g++.dg/torture/pr49770.C -O2 -c\n/home/marxin/Programming/gcc2/gcc/ipa-modref-tree.h:482:22: runtime error: load of value 2, which is not a valid value for type 'bool'\n    #0 0x1fdb4d1 in modref_tree<int>::merge(modref_tree<int>*, vec<modref_parm_map, va_heap, vl_ptr>*) /home/marxin/Programming/gcc2/gcc/ipa-modref-tree.h:482\n    #1 0x1fcadaa in merge_call_side_effects(modref_summary*, gimple*, modref_summary*, bool) /home/marxin/Programming/gcc2/gcc/ipa-modref.c:511\n    #2 0x1fcbadd in analyze_call /home/marxin/Programming/gcc2/gcc/ipa-modref.c:642\n    #3 0x1fcc061 in analyze_stmt /home/marxin/Programming/gcc2/gcc/ipa-modref.c:732\n    #4 0x1fccf31 in analyze_function /home/marxin/Programming/gcc2/gcc/ipa-modref.c:823\n    #5 0x1fd17e5 in execute /home/marxin/Programming/gcc2/gcc/ipa-modref.c:1441\n    #6 0x25cca6e in execute_one_pass(opt_pass*) /home/marxin/Programming/gcc2/gcc/passes.c:2509\n    #7 0x25cd39b in execute_pass_list_1 /home/marxin/Programming/gcc2/gcc/passes.c:2597\n    #8 0x25cd450 in execute_pass_list_1 /home/marxin/Programming/gcc2/gcc/passes.c:2598\n    #9 0x25cd4ee in execute_pass_list(function*, opt_pass*) /home/marxin/Programming/gcc2/gcc/passes.c:2608\n    #10 0x25c7a5a in do_per_function_toporder(void (*)(function*, void*), void*) /home/marxin/Programming/gcc2/gcc/passes.c:1726\n    #11 0x25cfa3f in execute_ipa_pass_list(opt_pass*) /home/marxin/Programming/gcc2/gcc/passes.c:2941\n    #12 0x173572d in ipa_passes /home/marxin/Programming/gcc2/gcc/cgraphunit.c:2642\n    #13 0x17364ee in symbol_table::compile() /home/marxin/Programming/gcc2/gcc/cgraphunit.c:2777\n    #14 0x17372d9 in symbol_table::finalize_compilation_unit() /home/marxin/Programming/gcc2/gcc/cgraphunit.c:3022\n    #15 0x2a1f00a in compile_file /home/marxin/Programming/gcc2/gcc/toplev.c:485\n    #16 0x2a27dc8 in do_compile /home/marxin/Programming/gcc2/gcc/toplev.c:2321\n    #17 0x2a283cc in toplev::main(int, char**) /home/marxin/Programming/gcc2/gcc/toplev.c:2460\n    #18 0x54f21cd in main /home/marxin/Programming/gcc2/gcc/main.c:39\n    #19 0x7ffff6f0de09 in __libc_start_main ../csu/libc-start.c:314\n    #20 0x9eac09 in _start (/home/marxin/Programming/gcc2/objdir/gcc/cc1plus+0x9eac09)\n\ngcc/ChangeLog:\n\n\t* ipa-modref.c (merge_call_side_effects): Clear modref_parm_map\n\tfields in the vector.", "tree": {"sha": "c0c3fd4e1def41bed863ca1c29579aad66b13a27", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c0c3fd4e1def41bed863ca1c29579aad66b13a27"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ab87b0add6a7c3464ee9067dd99e037e79f81984", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab87b0add6a7c3464ee9067dd99e037e79f81984", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ab87b0add6a7c3464ee9067dd99e037e79f81984", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ab87b0add6a7c3464ee9067dd99e037e79f81984/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "parents": [{"sha": "6d42d1e223deaf866062e11bd51ee99441ad8871", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6d42d1e223deaf866062e11bd51ee99441ad8871", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6d42d1e223deaf866062e11bd51ee99441ad8871"}], "stats": {"total": 2, "additions": 1, "deletions": 1}, "files": [{"sha": "b815eb8cc889211da6d34c0210777d196f1e194e", "filename": "gcc/ipa-modref.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ab87b0add6a7c3464ee9067dd99e037e79f81984/gcc%2Fipa-modref.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ab87b0add6a7c3464ee9067dd99e037e79f81984/gcc%2Fipa-modref.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-modref.c?ref=ab87b0add6a7c3464ee9067dd99e037e79f81984", "patch": "@@ -476,7 +476,7 @@ merge_call_side_effects (modref_summary *cur_summary,\n   auto_vec <modref_parm_map, 32> parm_map;\n   bool changed = false;\n \n-  parm_map.safe_grow (gimple_call_num_args (stmt));\n+  parm_map.safe_grow_cleared (gimple_call_num_args (stmt));\n   for (unsigned i = 0; i < gimple_call_num_args (stmt); i++)\n     {\n       tree op = gimple_call_arg (stmt, i);"}]}