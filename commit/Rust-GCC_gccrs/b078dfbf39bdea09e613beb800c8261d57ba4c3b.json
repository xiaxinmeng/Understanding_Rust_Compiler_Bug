{"sha": "b078dfbf39bdea09e613beb800c8261d57ba4c3b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YjA3OGRmYmYzOWJkZWEwOWU2MTNiZWI4MDBjODI2MWQ1N2JhNGMzYg==", "commit": {"author": {"name": "Feng Wang", "email": "fengwang@gcc.gnu.org", "date": "2005-05-15T02:45:29Z"}, "committer": {"name": "Feng Wang", "email": "fengwang@gcc.gnu.org", "date": "2005-05-15T02:45:29Z"}, "message": "[multiple changes]\n\n2005-05-15  Feng Wang <fengwang@nudt.edu.cn>\n        Jerry DeLisle <jvdelisle@verizon.net>\n\n        PR fortran/17432\n        * trans-stmt.c (gfc_trans_label_assign): fix pointer type, to\n        resolve ICE on assign of format label.\n        * trans-io.c (set_string): add fold-convert to properly\n        handle assigned format label in write.\n\n2005-05-15  Jerry DeLisle <jvdelisle@verizon.net>\n\n        PR fortran/17432\n        * gfortran.dg/assign_4.f: New test.\n\nFrom-SVN: r99711", "tree": {"sha": "561264b5f4c56dabd9ef6b439c86f897e8c47a29", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/561264b5f4c56dabd9ef6b439c86f897e8c47a29"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b078dfbf39bdea09e613beb800c8261d57ba4c3b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b078dfbf39bdea09e613beb800c8261d57ba4c3b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b078dfbf39bdea09e613beb800c8261d57ba4c3b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b078dfbf39bdea09e613beb800c8261d57ba4c3b/comments", "author": null, "committer": null, "parents": [{"sha": "652ad062339cd338403543e46cf91eb5abbe7d36", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/652ad062339cd338403543e46cf91eb5abbe7d36", "html_url": "https://github.com/Rust-GCC/gccrs/commit/652ad062339cd338403543e46cf91eb5abbe7d36"}], "stats": {"total": 30, "additions": 28, "deletions": 2}, "files": [{"sha": "5cfe135fda58eb75e2ab5a47df8357217c32f682", "filename": "gcc/fortran/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ffortran%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ffortran%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2FChangeLog?ref=b078dfbf39bdea09e613beb800c8261d57ba4c3b", "patch": "@@ -1,3 +1,12 @@\n+2005-05-15  Feng Wang <fengwang@nudt.edu.cn>\n+\tJerry DeLisle <jvdelisle@verizon.net>\n+\n+\tPR fortran/17432\n+\t* trans-stmt.c (gfc_trans_label_assign): fix pointer type, to \n+\tresolve ICE on assign of format label.\n+\t* trans-io.c (set_string): add fold-convert to properly\n+\thandle assigned format label in write.\n+ \n 2005-05-13  Paul Brook  <paul@codesourcery.com>\n \n \t* trans-stmt.c (gfc_trans_forall_1): Fix comment typo."}, {"sha": "a8f8ce8d4611c1fb570a479e6664ccd316a82806", "filename": "gcc/fortran/trans-io.c", "status": "modified", "additions": 2, "deletions": 1, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ffortran%2Ftrans-io.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ffortran%2Ftrans-io.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-io.c?ref=b078dfbf39bdea09e613beb800c8261d57ba4c3b", "patch": "@@ -394,7 +394,8 @@ set_string (stmtblock_t * block, stmtblock_t * postblock, tree var,\n       tmp = build2 (LE_EXPR, boolean_type_node,\n \t\t    tmp, convert (TREE_TYPE (tmp), integer_minus_one_node));\n       gfc_trans_runtime_check (tmp, msg, &se.pre);\n-      gfc_add_modify_expr (&se.pre, io, GFC_DECL_ASSIGN_ADDR (se.expr));\n+      gfc_add_modify_expr (&se.pre, io,\n+\t\t fold_convert (TREE_TYPE (io), GFC_DECL_ASSIGN_ADDR (se.expr)));\n       gfc_add_modify_expr (&se.pre, len, GFC_DECL_STRING_LEN (se.expr));\n     }\n   else"}, {"sha": "b8959968a69bff688a423a0f2cb6c97d5c277f87", "filename": "gcc/fortran/trans-stmt.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ffortran%2Ftrans-stmt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ffortran%2Ftrans-stmt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ffortran%2Ftrans-stmt.c?ref=b078dfbf39bdea09e613beb800c8261d57ba4c3b", "patch": "@@ -129,7 +129,7 @@ gfc_trans_label_assign (gfc_code * code)\n       label_len = code->label->format->value.character.length;\n       len_tree = build_int_cst (NULL_TREE, label_len);\n       label_tree = gfc_build_string_const (label_len + 1, label_str);\n-      label_tree = gfc_build_addr_expr (pchar_type_node, label_tree);\n+      label_tree = gfc_build_addr_expr (pvoid_type_node, label_tree);\n     }\n \n   gfc_add_modify_expr (&se.pre, len, len_tree);"}, {"sha": "9e239380bfbf2f6a8b61d6a6b871bdba08d47c4c", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b078dfbf39bdea09e613beb800c8261d57ba4c3b", "patch": "@@ -1,3 +1,8 @@\n+2005-05-15  Jerry DeLisle <jvdelisle@verizon.net>\n+\n+\tPR fortran/17432\n+\t* gfortran.dg/assign_4.f: New test.\n+\n 2005-05-14  Kazu Hirata  <kazu@cs.umass.edu>\n \n \tPR tree-optimization/21563"}, {"sha": "3277f7c74a2413670624727d75dbc8495c26a28d", "filename": "gcc/testsuite/gfortran.dg/assign_4.f", "status": "added", "additions": 11, "deletions": 0, "changes": 11, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ftestsuite%2Fgfortran.dg%2Fassign_4.f", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b078dfbf39bdea09e613beb800c8261d57ba4c3b/gcc%2Ftestsuite%2Fgfortran.dg%2Fassign_4.f", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fassign_4.f?ref=b078dfbf39bdea09e613beb800c8261d57ba4c3b", "patch": "@@ -0,0 +1,11 @@\n+! { dg-do compile }\n+! Option passed to avoid excess errors from obsolete warning\n+! { dg-options \"-w\" }\n+! PR17423\n+      program testit\n+c\n+      assign 12 to i\n+      write(*, i) \n+ 0012 format (\" **** ASSIGN FORMAT NUMBER TO INTEGER VARIABLE ****\" )\n+      end\n+"}]}