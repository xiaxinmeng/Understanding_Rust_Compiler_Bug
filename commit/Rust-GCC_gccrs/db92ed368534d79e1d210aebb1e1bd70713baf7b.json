{"sha": "db92ed368534d79e1d210aebb1e1bd70713baf7b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGI5MmVkMzY4NTM0ZDc5ZTFkMjEwYWViYjFlMWJkNzA3MTNiYWY3Yg==", "commit": {"author": {"name": "Mikhail Maltsev", "email": "maltsevm@gmail.com", "date": "2015-11-24T12:18:21Z"}, "committer": {"name": "Mikhail Maltsev", "email": "miyuki@gcc.gnu.org", "date": "2015-11-24T12:18:21Z"}, "message": "Fix PR68497 (ICE with -fno-checking)\n\ngcc/\n\n\tPR target/68497\n\t* config/i386/i386.c (output_387_binary_op): Fix assertion for\n\t-fno-checking case.\n\ngcc/testsuite/\n\n\tPR target/68497\n\t* gcc.target/i386/pr68497.c: New test.\n\nFrom-SVN: r230803", "tree": {"sha": "97a2f3e03332f51d60a9c1ae3c57db9b196378f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/97a2f3e03332f51d60a9c1ae3c57db9b196378f7"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/db92ed368534d79e1d210aebb1e1bd70713baf7b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db92ed368534d79e1d210aebb1e1bd70713baf7b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/db92ed368534d79e1d210aebb1e1bd70713baf7b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/db92ed368534d79e1d210aebb1e1bd70713baf7b/comments", "author": {"login": "miyuki", "id": 4668268, "node_id": "MDQ6VXNlcjQ2NjgyNjg=", "avatar_url": "https://avatars.githubusercontent.com/u/4668268?v=4", "gravatar_id": "", "url": "https://api.github.com/users/miyuki", "html_url": "https://github.com/miyuki", "followers_url": "https://api.github.com/users/miyuki/followers", "following_url": "https://api.github.com/users/miyuki/following{/other_user}", "gists_url": "https://api.github.com/users/miyuki/gists{/gist_id}", "starred_url": "https://api.github.com/users/miyuki/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/miyuki/subscriptions", "organizations_url": "https://api.github.com/users/miyuki/orgs", "repos_url": "https://api.github.com/users/miyuki/repos", "events_url": "https://api.github.com/users/miyuki/events{/privacy}", "received_events_url": "https://api.github.com/users/miyuki/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "5205ae6e2793fe81613a971cfdb8f87dfb07c05b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5205ae6e2793fe81613a971cfdb8f87dfb07c05b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5205ae6e2793fe81613a971cfdb8f87dfb07c05b"}], "stats": {"total": 45, "additions": 33, "deletions": 12}, "files": [{"sha": "02590a2eaea31bf6cb5c29b64fb9c795abe9171c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=db92ed368534d79e1d210aebb1e1bd70713baf7b", "patch": "@@ -1,3 +1,9 @@\n+2015-11-24  Mikhail Maltsev  <maltsevm@gmail.com>\n+\n+\tPR target/68497\n+\t* config/i386/i386.c (output_387_binary_op): Fix assertion for\n+\t-fno-checking case.\n+\n 2015-11-24  Trevor Saunders  <tbsaunde+gcc@tbsaunde.org>\n \n \t* tree-ssa-uncprop.c (struct val_ssa_equiv_hash_traits): Remove."}, {"sha": "2ac6c259f415d894e4c60eb29c7c280af36c9b0a", "filename": "gcc/config/i386/i386.c", "status": "modified", "additions": 14, "deletions": 12, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2Fconfig%2Fi386%2Fi386.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2Fconfig%2Fi386%2Fi386.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fi386.c?ref=db92ed368534d79e1d210aebb1e1bd70713baf7b", "patch": "@@ -17675,18 +17675,20 @@ output_387_binary_op (rtx insn, rtx *operands)\n \n   /* Even if we do not want to check the inputs, this documents input\n      constraints.  Which helps in understanding the following code.  */\n-  if (flag_checking\n-      && STACK_REG_P (operands[0])\n-      && ((REG_P (operands[1])\n-\t   && REGNO (operands[0]) == REGNO (operands[1])\n-\t   && (STACK_REG_P (operands[2]) || MEM_P (operands[2])))\n-\t  || (REG_P (operands[2])\n-\t      && REGNO (operands[0]) == REGNO (operands[2])\n-\t      && (STACK_REG_P (operands[1]) || MEM_P (operands[1]))))\n-      && (STACK_TOP_P (operands[1]) || STACK_TOP_P (operands[2])))\n-    ; /* ok */\n-  else\n-    gcc_checking_assert (is_sse);\n+  if (flag_checking)\n+    {\n+      if (STACK_REG_P (operands[0])\n+\t  && ((REG_P (operands[1])\n+\t       && REGNO (operands[0]) == REGNO (operands[1])\n+\t       && (STACK_REG_P (operands[2]) || MEM_P (operands[2])))\n+\t      || (REG_P (operands[2])\n+\t\t  && REGNO (operands[0]) == REGNO (operands[2])\n+\t\t  && (STACK_REG_P (operands[1]) || MEM_P (operands[1]))))\n+\t  && (STACK_TOP_P (operands[1]) || STACK_TOP_P (operands[2])))\n+\t; /* ok */\n+      else\n+\tgcc_assert (is_sse);\n+    }\n \n   switch (GET_CODE (operands[3]))\n     {"}, {"sha": "3ec74df4db362decbfd0fd9c20d81c20747c2201", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=db92ed368534d79e1d210aebb1e1bd70713baf7b", "patch": "@@ -1,3 +1,8 @@\n+2015-11-24  Mikhail Maltsev  <maltsevm@gmail.com>\n+\n+\tPR target/68497\n+\t* gcc.target/i386/pr68497.c: New test.\n+\n 2015-11-24  Bilyan Borisov  <bilyan.borisov@arm.com>\n \n \t* gcc.target/aarch64/advsimd-intrinsics/vmulx_lane_f32_indices_1.c:"}, {"sha": "0135cda0d5867ea5af1bbcfccb05b874eed66c59", "filename": "gcc/testsuite/gcc.target/i386/pr68497.c", "status": "added", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr68497.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/db92ed368534d79e1d210aebb1e1bd70713baf7b/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr68497.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr68497.c?ref=db92ed368534d79e1d210aebb1e1bd70713baf7b", "patch": "@@ -0,0 +1,8 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-fno-checking\" } */\n+\n+long double\n+foo (long double x, long double y)\n+{\n+  return x + y;\n+}"}]}