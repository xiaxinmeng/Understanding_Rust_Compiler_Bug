{"sha": "d6df9efb6d4a855e65f48967469cf2d29b2ebd7f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZDZkZjllZmI2ZDRhODU1ZTY1ZjQ4OTY3NDY5Y2YyZDI5YjJlYmQ3Zg==", "commit": {"author": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-04-04T13:54:26Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-04-04T13:54:26Z"}, "message": "* Check in merge from gcc2.  See ChangeLog.11 and ChangeLog.12\n        for details.\n\n        * haifa-sched.c: Mirror recent changes from gcc2.\n\nFrom-SVN: r18988", "tree": {"sha": "57006688a5896dc9b98a78d65100a17a1c0758fc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/57006688a5896dc9b98a78d65100a17a1c0758fc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/d6df9efb6d4a855e65f48967469cf2d29b2ebd7f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6df9efb6d4a855e65f48967469cf2d29b2ebd7f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d6df9efb6d4a855e65f48967469cf2d29b2ebd7f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d6df9efb6d4a855e65f48967469cf2d29b2ebd7f/comments", "author": null, "committer": null, "parents": [{"sha": "8e7bc3cd8ff0c23574e2523ef047d453cbd95bf5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8e7bc3cd8ff0c23574e2523ef047d453cbd95bf5", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8e7bc3cd8ff0c23574e2523ef047d453cbd95bf5"}], "stats": {"total": 22, "additions": 10, "deletions": 12}, "files": [{"sha": "b5f4ace1aaf5f16d6a4da052efe948f7ca2f17dd", "filename": "gcc/haifa-sched.c", "status": "modified", "additions": 10, "deletions": 12, "changes": 22, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/d6df9efb6d4a855e65f48967469cf2d29b2ebd7f/gcc%2Fhaifa-sched.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/d6df9efb6d4a855e65f48967469cf2d29b2ebd7f/gcc%2Fhaifa-sched.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fhaifa-sched.c?ref=d6df9efb6d4a855e65f48967469cf2d29b2ebd7f", "patch": "@@ -4443,12 +4443,7 @@ attach_deaths (x, insn, set_p)\n #endif\n \t\t&& regno != STACK_POINTER_REGNUM)\n \t      {\n-\t\t/* ??? It is perhaps a dead_or_set_p bug that it does\n-\t\t   not check for REG_UNUSED notes itself.  This is necessary\n-\t\t   for the case where the SET_DEST is a subreg of regno, as\n-\t\t   dead_or_set_p handles subregs specially.  */\n-\t\tif (! all_needed && ! dead_or_set_p (insn, x)\n-\t\t    && ! find_reg_note (insn, REG_UNUSED, x))\n+\t\tif (! all_needed && ! dead_or_set_p (insn, x))\n \t\t  {\n \t\t    /* Check for the case where the register dying partially\n \t\t       overlaps the register set by this insn.  */\n@@ -4511,17 +4506,20 @@ attach_deaths (x, insn, set_p)\n       return;\n \n     case SUBREG:\n+      attach_deaths (SUBREG_REG (x), insn,\n+\t\t     set_p && ((GET_MODE_SIZE (GET_MODE (SUBREG_REG (x)))\n+\t\t\t\t<= UNITS_PER_WORD)\n+\t\t\t       || (GET_MODE_SIZE (GET_MODE (SUBREG_REG (x)))\n+\t\t\t\t   == GET_MODE_SIZE (GET_MODE ((x))))));\n+      return;\n+\n     case STRICT_LOW_PART:\n-      /* These two cases preserve the value of SET_P, so handle them\n-         separately.  */\n-      attach_deaths (XEXP (x, 0), insn, set_p);\n+      attach_deaths (XEXP (x, 0), insn, 0);\n       return;\n \n     case ZERO_EXTRACT:\n     case SIGN_EXTRACT:\n-      /* This case preserves the value of SET_P for the first operand, but\n-         clears it for the other two.  */\n-      attach_deaths (XEXP (x, 0), insn, set_p);\n+      attach_deaths (XEXP (x, 0), insn, 0);\n       attach_deaths (XEXP (x, 1), insn, 0);\n       attach_deaths (XEXP (x, 2), insn, 0);\n       return;"}]}