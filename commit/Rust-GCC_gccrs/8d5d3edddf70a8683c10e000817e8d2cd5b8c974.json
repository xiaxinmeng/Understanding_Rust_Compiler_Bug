{"sha": "8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGQ1ZDNlZGRkZjcwYTg2ODNjMTBlMDAwODE3ZThkMmNkNWI4Yzk3NA==", "commit": {"author": {"name": "Svante Signell", "email": "svante.signell@gmail.com", "date": "2019-01-12T21:17:56Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2019-01-12T21:17:56Z"}, "message": "gnu.h (TARGET_THREAD_SSP_OFFSET): Define.\n\n\t* config/i386/gnu.h (TARGET_THREAD_SSP_OFFSET): Define.\n\t(TARGET_CAN_SPLIT_STACK): Define.\n\t(TARGET_THREAD_SPLIT_STACK_OFFSET): Define.\n\nFrom-SVN: r267886", "tree": {"sha": "c90c3f0c93d265c4af9559f27ad5863aea666791", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c90c3f0c93d265c4af9559f27ad5863aea666791"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8d5d3edddf70a8683c10e000817e8d2cd5b8c974/comments", "author": {"login": "gnu-srs", "id": 8969044, "node_id": "MDQ6VXNlcjg5NjkwNDQ=", "avatar_url": "https://avatars.githubusercontent.com/u/8969044?v=4", "gravatar_id": "", "url": "https://api.github.com/users/gnu-srs", "html_url": "https://github.com/gnu-srs", "followers_url": "https://api.github.com/users/gnu-srs/followers", "following_url": "https://api.github.com/users/gnu-srs/following{/other_user}", "gists_url": "https://api.github.com/users/gnu-srs/gists{/gist_id}", "starred_url": "https://api.github.com/users/gnu-srs/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/gnu-srs/subscriptions", "organizations_url": "https://api.github.com/users/gnu-srs/orgs", "repos_url": "https://api.github.com/users/gnu-srs/repos", "events_url": "https://api.github.com/users/gnu-srs/events{/privacy}", "received_events_url": "https://api.github.com/users/gnu-srs/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "865f11b6191458ebff136400e4b32c1adc7f575c", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/865f11b6191458ebff136400e4b32c1adc7f575c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/865f11b6191458ebff136400e4b32c1adc7f575c"}], "stats": {"total": 21, "additions": 15, "deletions": 6}, "files": [{"sha": "a2735a5e4c98d2b495ae662f2ecb9bffdca956bd", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d5d3edddf70a8683c10e000817e8d2cd5b8c974/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d5d3edddf70a8683c10e000817e8d2cd5b8c974/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "patch": "@@ -1,3 +1,9 @@\n+2019-01-12  Svante Signell  <svante.signell@gmail.com>\n+\n+\t* config/i386/gnu.h (TARGET_THREAD_SSP_OFFSET): Define.\n+\t(TARGET_CAN_SPLIT_STACK): Define.\n+\t(TARGET_THREAD_SPLIT_STACK_OFFSET): Define.\n+\n 2019-01-05  Jan Hubicka  <hubicka@ucw.cz>\n \n \t* params.def (inline-unit-growth): Set to 40."}, {"sha": "9d1dcde1c999b8d0cb79eb8a1dfed860e2bf6b79", "filename": "gcc/config/i386/gnu.h", "status": "modified", "additions": 9, "deletions": 6, "changes": 15, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8d5d3edddf70a8683c10e000817e8d2cd5b8c974/gcc%2Fconfig%2Fi386%2Fgnu.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8d5d3edddf70a8683c10e000817e8d2cd5b8c974/gcc%2Fconfig%2Fi386%2Fgnu.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fgnu.h?ref=8d5d3edddf70a8683c10e000817e8d2cd5b8c974", "patch": "@@ -37,11 +37,14 @@ along with GCC.  If not, see <http://www.gnu.org/licenses/>.\n \n #ifdef TARGET_LIBC_PROVIDES_SSP\n \n-/* Not supported yet.  */\n-# undef TARGET_THREAD_SSP_OFFSET\n-\n-/* Not supported yet.  */\n-# undef TARGET_CAN_SPLIT_STACK\n-# undef TARGET_THREAD_SPLIT_STACK_OFFSET\n+/* i386 glibc provides __stack_chk_guard in %gs:0x14.  */\n+#define TARGET_THREAD_SSP_OFFSET        0x14\n \n+/* We only build the -fsplit-stack support in libgcc if the\n+   assembler has full support for the CFI directives.  */\n+#if HAVE_GAS_CFI_PERSONALITY_DIRECTIVE\n+#define TARGET_CAN_SPLIT_STACK\n+#endif\n+/* We steal the last transactional memory word.  */\n+#define TARGET_THREAD_SPLIT_STACK_OFFSET 0x30\n #endif"}]}