{"sha": "ddc4af9c164140e3a6bcbbe448c7cd50719845c8", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZGRjNGFmOWMxNjQxNDBlM2E2YmNiYmU0NDhjN2NkNTA3MTk4NDVjOA==", "commit": {"author": {"name": "Richard Sandiford", "email": "rsandifo@nildram.co.uk", "date": "2007-10-18T19:50:08Z"}, "committer": {"name": "Richard Sandiford", "email": "rsandifo@gcc.gnu.org", "date": "2007-10-18T19:50:08Z"}, "message": "mips.c (mips_frame_info): Remove gp_reg_size and and fp_reg_size.\n\ngcc/\n\t* config/mips/mips.c (mips_frame_info): Remove gp_reg_size and\n\tand fp_reg_size.\n\t(mips_compute_frame_info): Remove associated code.\n\t(mips16e_build_save_restore): Check num_fp instead of fp_reg_size.\n\nFrom-SVN: r129461", "tree": {"sha": "79cbed89f39231edb9f15902887f253a280f215b", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/79cbed89f39231edb9f15902887f253a280f215b"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/ddc4af9c164140e3a6bcbbe448c7cd50719845c8", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddc4af9c164140e3a6bcbbe448c7cd50719845c8", "html_url": "https://github.com/Rust-GCC/gccrs/commit/ddc4af9c164140e3a6bcbbe448c7cd50719845c8", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/ddc4af9c164140e3a6bcbbe448c7cd50719845c8/comments", "author": null, "committer": null, "parents": [{"sha": "16dc5c284f2705790fed7c32924118ef4a4ed0cd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/16dc5c284f2705790fed7c32924118ef4a4ed0cd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/16dc5c284f2705790fed7c32924118ef4a4ed0cd"}], "stats": {"total": 19, "additions": 10, "deletions": 9}, "files": [{"sha": "569d9eb9968d57f3cf11f7c23d9f96c3589636cf", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddc4af9c164140e3a6bcbbe448c7cd50719845c8/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddc4af9c164140e3a6bcbbe448c7cd50719845c8/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=ddc4af9c164140e3a6bcbbe448c7cd50719845c8", "patch": "@@ -1,3 +1,10 @@\n+2007-10-18  Richard Sandiford  <rsandifo@nildram.co.uk>\n+\n+\t* config/mips/mips.c (mips_frame_info): Remove gp_reg_size and\n+\tand fp_reg_size.\n+\t(mips_compute_frame_info): Remove associated code.\n+\t(mips16e_build_save_restore): Check num_fp instead of fp_reg_size.\n+\n 2007-10-18  Richard Sandiford  <rsandifo@nildram.co.uk>\n \n \t* config/mips/mips-protos.h (compute_frame_size): Delete."}, {"sha": "39b34fa6efd6bc5f0aeec6b0891c4c8e5f5a6513", "filename": "gcc/config/mips/mips.c", "status": "modified", "additions": 3, "deletions": 9, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/ddc4af9c164140e3a6bcbbe448c7cd50719845c8/gcc%2Fconfig%2Fmips%2Fmips.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/ddc4af9c164140e3a6bcbbe448c7cd50719845c8/gcc%2Fconfig%2Fmips%2Fmips.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.c?ref=ddc4af9c164140e3a6bcbbe448c7cd50719845c8", "patch": "@@ -250,10 +250,6 @@ struct mips_frame_info GTY(())\n      is no such slot.  */\n   HOST_WIDE_INT cprestore_size;\n \n-  /* The size in bytes of the GPR and FPR save areas.  */\n-  HOST_WIDE_INT gp_reg_size;\n-  HOST_WIDE_INT fp_reg_size;\n-\n   /* Bit X is set if the function saves or restores GPR X.  */\n   unsigned int mask;\n \n@@ -7461,7 +7457,7 @@ mips16e_build_save_restore (bool restore_p, unsigned int *mask_ptr,\n   unsigned int i, regno;\n   int n;\n \n-  gcc_assert (cfun->machine->frame.fp_reg_size == 0);\n+  gcc_assert (cfun->machine->frame.num_fp == 0);\n \n   /* Calculate the number of elements in the PARALLEL.  We need one element\n      for the stack adjustment, one for each argument register save, and one\n@@ -7960,8 +7956,7 @@ mips_compute_frame_info (void)\n   /* Move above the GPR save area.  */\n   if (frame->num_gp > 0)\n     {\n-      frame->gp_reg_size = frame->num_gp * UNITS_PER_WORD;\n-      offset += MIPS_STACK_ALIGN (frame->gp_reg_size);\n+      offset += MIPS_STACK_ALIGN (frame->num_gp * UNITS_PER_WORD);\n       frame->gp_sp_offset = offset - UNITS_PER_WORD;\n     }\n \n@@ -7978,8 +7973,7 @@ mips_compute_frame_info (void)\n   /* Move above the FPR save area.  */\n   if (frame->num_fp > 0)\n     {\n-      frame->fp_reg_size = frame->num_fp * UNITS_PER_FPREG;\n-      offset += MIPS_STACK_ALIGN (frame->fp_reg_size);\n+      offset += MIPS_STACK_ALIGN (frame->num_fp * UNITS_PER_FPREG);\n       frame->fp_sp_offset = offset - UNITS_PER_HWFPVALUE;\n     }\n "}]}