{"sha": "cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2MyNDBhYTdkMWI1ZmE4N2NhNTA3ZjY5YTVkZjgxYTYzY2RhMmNlMw==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-02-09T00:34:55Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2016-02-09T00:34:55Z"}, "message": "re PR go/69357 (libgo refers to _end in a non-weak way)\n\n\tPR go/69537\n    runtime: Don't refer to _end symbol in shared library.\n    \n    Fixes GCC PR 69357.\n    \n    Reviewed-on: https://go-review.googlesource.com/19362\n\nFrom-SVN: r233235", "tree": {"sha": "7816f6072883911ab6d91b664bb121e5cbfff3e8", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/7816f6072883911ab6d91b664bb121e5cbfff3e8"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/comments", "author": null, "committer": null, "parents": [{"sha": "41798077bfd95dc55e0e1a16aa03dfe85435cbd4", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/41798077bfd95dc55e0e1a16aa03dfe85435cbd4", "html_url": "https://github.com/Rust-GCC/gccrs/commit/41798077bfd95dc55e0e1a16aa03dfe85435cbd4"}], "stats": {"total": 19, "additions": 16, "deletions": 3}, "files": [{"sha": "1f47b1e269b0ed3393b86b24301cb66ab57ed226", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "patch": "@@ -1,4 +1,4 @@\n-91833164072078a3fde7e9b05641ec3ed4a2f5d0\n+2ef5f1ca449b5cf07dbbd7b13a50910fb5567372\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "ff2958c239a30eb6b945691936ad93992088219b", "filename": "libgo/runtime/go-main.c", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/libgo%2Fruntime%2Fgo-main.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/libgo%2Fruntime%2Fgo-main.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fgo-main.c?ref=cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "patch": "@@ -30,6 +30,11 @@\n \n extern char **environ;\n \n+/* A copy of _end that a shared library can reasonably refer to.  */\n+uintptr __go_end;\n+\n+extern byte _end[];\n+\n /* The main function.  */\n \n int\n@@ -41,6 +46,7 @@ main (int argc, char **argv)\n     return 0;\n   runtime_isstarted = true;\n \n+  __go_end = (uintptr)_end;\n   runtime_check ();\n   runtime_args (argc, (byte **) argv);\n   runtime_osinit ();"}, {"sha": "0d8629277f8f8ce9b1bded5fe0e1286f97d3b53a", "filename": "libgo/runtime/malloc.goc", "status": "modified", "additions": 8, "deletions": 2, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/libgo%2Fruntime%2Fmalloc.goc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/libgo%2Fruntime%2Fmalloc.goc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fmalloc.goc?ref=cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "patch": "@@ -505,7 +505,8 @@ runtime_mallocinit(void)\n {\n \tbyte *p, *p1;\n \tuintptr arena_size, bitmap_size, spans_size, p_size;\n-\textern byte _end[];\n+\tuintptr *pend;\n+\tuintptr end;\n \tuintptr limit;\n \tuint64 i;\n \tbool reserved;\n@@ -613,7 +614,12 @@ runtime_mallocinit(void)\n \t\t// So adjust it upward a little bit ourselves: 1/4 MB to get\n \t\t// away from the running binary image and then round up\n \t\t// to a MB boundary.\n-\t\tp = (byte*)ROUND((uintptr)_end + (1<<18), 1<<20);\n+\n+\t\tend = 0;\n+\t\tpend = &__go_end;\n+\t\tif(pend != nil)\n+\t\t\tend = *pend;\n+\t\tp = (byte*)ROUND(end + (1<<18), 1<<20);\n \t\tp_size = bitmap_size + spans_size + arena_size + PageSize;\n \t\tp = runtime_SysReserve(p, p_size, &reserved);\n \t\tif(p == nil)"}, {"sha": "67242291db7b2182eb6b2ebef496a7d616f782bd", "filename": "libgo/runtime/runtime.h", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/libgo%2Fruntime%2Fruntime.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3/libgo%2Fruntime%2Fruntime.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libgo%2Fruntime%2Fruntime.h?ref=cc240aa7d1b5fa87ca507f69a5df81a63cda2ce3", "patch": "@@ -863,3 +863,4 @@ extern void _cgo_notify_runtime_init_done (void);\n extern _Bool runtime_iscgo;\n extern _Bool runtime_cgoHasExtraM;\n extern Hchan *runtime_main_init_done;\n+extern uintptr __go_end __attribute__ ((weak));"}]}