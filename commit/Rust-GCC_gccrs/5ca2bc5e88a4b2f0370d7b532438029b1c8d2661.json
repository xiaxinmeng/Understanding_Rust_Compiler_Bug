{"sha": "5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWNhMmJjNWU4OGE0YjJmMDM3MGQ3YjUzMjQzODAyOWIxYzhkMjY2MQ==", "commit": {"author": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-11-10T23:00:01Z"}, "committer": {"name": "Uros Bizjak", "email": "uros@gcc.gnu.org", "date": "2010-11-10T23:00:01Z"}, "message": "re PR target/46419 (_mm_cvtpu16_ps (and hence _mm_cvtpu8_ps) returns false result)\n\n\tPR middle-end/46419\n\t* config/i386/xmmintrin.h (_mm_cvtpi16_ps): Swap __hisi and __losi.\n\t(_mm_cvtpu16_ps): Ditto.\n\ntestsuite/ChangeLog:\n\n\tPR target/46419\n\t* gcc-target/i386/pr46419.c: New test.\n\nFrom-SVN: r166569", "tree": {"sha": "5a99f2f325a8058e017081f69c54ae9ad2063d6d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a99f2f325a8058e017081f69c54ae9ad2063d6d"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/comments", "author": null, "committer": null, "parents": [{"sha": "d5478783983705a1044961df3c3d59f2ff3d52dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/d5478783983705a1044961df3c3d59f2ff3d52dc", "html_url": "https://github.com/Rust-GCC/gccrs/commit/d5478783983705a1044961df3c3d59f2ff3d52dc"}], "stats": {"total": 145, "additions": 92, "deletions": 53}, "files": [{"sha": "185cb4026fc2ca733468fda2c65a4c0eaaa85070", "filename": "gcc/ChangeLog", "status": "modified", "additions": 18, "deletions": 22, "changes": 40, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "patch": "@@ -1,3 +1,9 @@\n+2010-11-10  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR middle-end/46419\n+\t* config/i386/xmmintrin.h (_mm_cvtpi16_ps): Swap __hisi and __losi.\n+\t(_mm_cvtpu16_ps): Ditto.\n+\n 2010-11-10  Joseph Myers  <joseph@codesourcery.com>\n \n \t* common.opt (flag_excess_precision_cmdline, flag_generate_lto,\n@@ -34,8 +40,7 @@\n \tOPT_dumpdir, OPT_falign_functions_, OPT_falign_jumps_,\n \tOPT_falign_labels_, OPT_falign_loops_, OPT_fira_verbose_, OPT_o or\n \tOPT_fwhopr_.  Do not explicitly set .opt file variables for\n-\tOPT_aux_info or OPT_pedantic_errors.  Use dc for diagnostic\n-\tcontext.\n+\tOPT_aux_info or OPT_pedantic_errors.  Use dc for diagnostic context.\n \t(set_Wstrict_aliasing): Add gcc_options parameter.\n \t* opts.h (struct cl_option_handler_func): Add diagnostic_context\n \tparameter to handler.\n@@ -210,8 +215,7 @@\n \t* doc/tm.texi: Regenerate.\n \t* opts-common.c (tm.h): Don't include.\n \t(target_option_translations): Remove.\n-\t(decode_cmdline_options_to_array): Don't handle translating\n-\toptions.\n+\t(decode_cmdline_options_to_array): Don't handle translating options.\n \t* system.h (TARGET_OPTION_TRANSLATE_TABLE): Poison.\n \t* config/darwin-driver.c: Don't condition includes on\n \tCROSS_DIRECTORY_STRUCTURE.\n@@ -247,12 +251,10 @@\n \t(DRIVER_SELF_SPECS): Handle options formerly in\n \tTARGET_OPTION_TRANSLATE_TABLE.\n \t* config/mep/mep.opt (mfar): New.\n-\t* config/picochip/picochip.h (TARGET_OPTION_TRANSLATE_TABLE):\n-\tRemove.\n+\t* config/picochip/picochip.h (TARGET_OPTION_TRANSLATE_TABLE): Remove.\n \t(DRIVER_SELF_SPECS): Define.  Handle options formerly in\n \tTARGET_OPTION_TRANSLATE_TABLE.\n-\t* config/rs6000/darwin.h (CC1_SPEC): Handle -faltivec and\n-\t-fno-altivec.\n+\t* config/rs6000/darwin.h (CC1_SPEC): Handle -faltivec and -fno-altivec.\n \t(SUBTARGET_OPTION_TRANSLATE_TABLE): Remove.\n \t* config/rs6000/darwin.opt (Waltivec-long-deprecated, faltivec,\n \tffix-and-continue, findirect-data): New.\n@@ -330,7 +332,7 @@\n \tinitialized at ggc_collect call.\n \t(Troubleshooting): New section.\n \n-2010-11-09   Jan Hubicka  <jh@suse.cz>\n+2010-11-09  Jan Hubicka  <jh@suse.cz>\n \n \tPR tree-optimization/40436\n \t* ipa-inline.c (leaf_node_p): Implement using is_inexpensive_builtin.\n@@ -374,8 +376,7 @@\n \t(fix_trunc<mode>si2_mem): Ditto.\n \t(fixuns_trunc<mode>si2_mem): Ditto.\n \t(round32<mode>2_fprs): New combiner insn to combine (double)(int)\n-\ttype operations to reduce copying the values to multiple memory\n-\tslots.\n+\ttype operations to reduce copying the values to multiple memory slots.\n \t(roundu32<mode>2_fprs): Ditto.\n \n \t* config/rs6000/rs6000.c (rs6000_address_for_fpconvert): Handle\n@@ -428,8 +429,7 @@\n \n 2010-11-09  Paul Koning  <ni1d@arrl.net>\n \n-\t* config/pdp11/pdp11.md (lshrsi3, lshrhi3): Use add for\n-\tdecrement. \n+\t* config/pdp11/pdp11.md (lshrsi3, lshrhi3): Use add for decrement.\n \n 2010-11-09  Richard Guenther  <rguenther@suse.de>\n \n@@ -479,8 +479,7 @@\n 2010-11-09  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR bootstrap/46392\n-\t* gengtype-parse.c (type): Call get_input_file_name to get\n-\tfile name.\n+\t* gengtype-parse.c (type): Call get_input_file_name to get file name.\n \n 2010-11-09  Eric Botcazou  <ebotcazou@adacore.com>\n \n@@ -518,8 +517,7 @@\n 2010-11-09  Basile Starynkevitch  <basile@starynkevitch.net>\n \t    Jeremie Salvucci  <jeremie.salvucci@free.fr>\n \n-\t* gengtype.c (get_output_file_name): Declaration moved to\n-\tgengtype.h.\n+\t* gengtype.c (get_output_file_name): Declaration moved to gengtype.h.\n \t(plugin_files, get_file_basename, get_file_realbasename)\n \t(get_file_langdir, error_at_line, gt_files, this_file)\n \t(system_h_file, read_input_list, create_field_all)\n@@ -536,11 +534,10 @@\n \t* gengtype.h: (struct input_file_st, input_file): New type.\n \t(struct fileloc): Use it.\n \t(gt_files, num_gt_files, this_file, system_h_file)\n-\t(input_file_by_name, get_file_srcdir_relative_path): Use\n-\tinput_file.\n+\t(input_file_by_name, get_file_srcdir_relative_path): Use input_file.\n \t(get_input_file_name): New function.\n \t(get_lang_bitmap, set_lang_bitmap): Moved from gengtype.c and\n-        use input_file.\n+\tuse input_file.\n \t(lang_dir_names, num_lang_dirs, get_output_file_with_visibility)\n \t(get_output_file_name): Ditto.\n \n@@ -619,8 +616,7 @@\n \n 2010-11-08  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n-\t* config/i386/i386.c (ix86_function_arg_boundary): Fix warning\n-\tmessage.\n+\t* config/i386/i386.c (ix86_function_arg_boundary): Fix warning message.\n \n 2010-11-08  Basile Starynkevitch  <basile@starynkevitch.net>\n "}, {"sha": "8bec37440357f15b6611b1e642eeaccc53470ca9", "filename": "gcc/config/i386/xmmintrin.h", "status": "modified", "additions": 6, "deletions": 6, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2Fconfig%2Fi386%2Fxmmintrin.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2Fconfig%2Fi386%2Fxmmintrin.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fi386%2Fxmmintrin.h?ref=5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "patch": "@@ -626,13 +626,13 @@ _mm_cvtpi16_ps (__m64 __A)\n   __sign = __builtin_ia32_pcmpgtw ((__v4hi)0LL, (__v4hi)__A);\n \n   /* Convert the four words to doublewords.  */\n-  __hisi = (__v2si) __builtin_ia32_punpckhwd ((__v4hi)__A, __sign);\n   __losi = (__v2si) __builtin_ia32_punpcklwd ((__v4hi)__A, __sign);\n+  __hisi = (__v2si) __builtin_ia32_punpckhwd ((__v4hi)__A, __sign);\n \n   /* Convert the doublewords to floating point two at a time.  */\n   __zero = (__v4sf) _mm_setzero_ps ();\n-  __ra = __builtin_ia32_cvtpi2ps (__zero, __hisi);\n-  __rb = __builtin_ia32_cvtpi2ps (__ra, __losi);\n+  __ra = __builtin_ia32_cvtpi2ps (__zero, __losi);\n+  __rb = __builtin_ia32_cvtpi2ps (__ra, __hisi);\n \n   return (__m128) __builtin_ia32_movlhps (__ra, __rb);\n }\n@@ -645,13 +645,13 @@ _mm_cvtpu16_ps (__m64 __A)\n   __v4sf __zero, __ra, __rb;\n \n   /* Convert the four words to doublewords.  */\n-  __hisi = (__v2si) __builtin_ia32_punpckhwd ((__v4hi)__A, (__v4hi)0LL);\n   __losi = (__v2si) __builtin_ia32_punpcklwd ((__v4hi)__A, (__v4hi)0LL);\n+  __hisi = (__v2si) __builtin_ia32_punpckhwd ((__v4hi)__A, (__v4hi)0LL);\n \n   /* Convert the doublewords to floating point two at a time.  */\n   __zero = (__v4sf) _mm_setzero_ps ();\n-  __ra = __builtin_ia32_cvtpi2ps (__zero, __hisi);\n-  __rb = __builtin_ia32_cvtpi2ps (__ra, __losi);\n+  __ra = __builtin_ia32_cvtpi2ps (__zero, __losi);\n+  __rb = __builtin_ia32_cvtpi2ps (__ra, __hisi);\n \n   return (__m128) __builtin_ia32_movlhps (__ra, __rb);\n }"}, {"sha": "ff026a35285fa7e959cbdea9eb451cfd9141425f", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 29, "deletions": 25, "changes": 54, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "patch": "@@ -1,3 +1,8 @@\n+2010-11-10  Uros Bizjak  <ubizjak@gmail.com>\n+\n+\tPR target/46419\n+\t* gcc-target/i386/pr46419.c: New test.\n+\n 2010-11-10  Quentin Neill  <quentin.neill.gnu@gmail.com>\n \n \t* g++.dg/other/i386-2.C: Add -mtbm.\n@@ -125,7 +130,7 @@\n \n \t* gfortran.dg/open_dev_null.f90: New test.\n \n-2010-11-09   Jan Hubicka  <jh@suse.cz>\n+2010-11-09  Jan Hubicka  <jh@suse.cz>\n \n \t* testsuite/gcc.target/i386/recip-vec-sqrtf-avx.c: Update for loop\n \tunrolling.\n@@ -219,7 +224,7 @@\n \n \tPR tree-optimization/46316\n \t* gcc.c-torture/execute/pr46316.c: New test.\n-\t\n+\n 2010-11-08  Janus Weil  <janus@gcc.gnu.org>\n \n \tPR fortran/46344\n@@ -229,18 +234,18 @@\n \n \t* objc.dg/property/dotsyntax-13.m: New.\n \t* objc.dg/property/dotsyntax-14.m: New.\n-\t* objc.dg/property/dotsyntax-15.m: New.\t\n+\t* objc.dg/property/dotsyntax-15.m: New.\n \t* objc.dg/property/synthesize-7.m: New.\n \t* obj-c++.dg/property/dotsyntax-13.mm: New.\n \t* obj-c++.dg/property/dotsyntax-14.mm: New.\n-\t* obj-c++.dg/property/dotsyntax-15.mm: New.\t\n+\t* obj-c++.dg/property/dotsyntax-15.mm: New.\n \t* obj-c++.dg/property/synthesize-7.mm: New.\n \n 2010-11-08  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \t* objc.dg/property/dynamic-4.m: New.\n \t* objc.dg/property/dynamic-5.m: New.\n-\t* objc.dg/property/dynamic-6.m: New.\t\n+\t* objc.dg/property/dynamic-6.m: New.\n \t* obj-c++.dg/property/dynamic-4.mm: New.\n \t* obj-c++.dg/property/dynamic-5.mm: New.\n \t* obj-c++.dg/property/dynamic-6.mm: New.\n@@ -254,27 +259,27 @@\n \t* obj-c++.dg/property/synthesize-3.mm: New.\n \t* obj-c++.dg/property/synthesize-4.mm: New.\n \t* obj-c++.dg/property/synthesize-5.mm: New.\n-\t* obj-c++.dg/property/synthesize-6.mm: New.\t\n-\t\n+\t* obj-c++.dg/property/synthesize-6.mm: New.\n+\n 2010-11-08  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n-\t* objc.dg/property/at-property-5.m: Updated test.\t\n+\t* objc.dg/property/at-property-5.m: Updated test.\n \t* objc.dg/property/at-property-16.m: New.\n \t* objc.dg/property/at-property-17.m: New.\n \t* objc.dg/property/at-property-18.m: New.\n-\t* objc.dg/property/at-property-19.m: New.\t\n+\t* objc.dg/property/at-property-19.m: New.\n \t* objc.dg/property/dotsyntax-12.m: New.\n \t* objc.dg/protocol-inheritance-1.m: New.\n \t* objc.dg/protocol-inheritance-2.m: New.\n \t* obj-c++.dg/property/at-property-5.mm: Updated test.\n \t* obj-c++.dg/property/at-property-16.mm: New.\n \t* obj-c++.dg/property/at-property-17.mm: New.\n \t* obj-c++.dg/property/at-property-18.mm: New.\n-\t* obj-c++.dg/property/at-property-19.mm: New.\t\n+\t* obj-c++.dg/property/at-property-19.mm: New.\n \t* obj-c++.dg/protocol-inheritance-1.mm: New.\n \t* obj-c++.dg/protocol-inheritance-2.mm: New.\n \t* obj-c++.dg/property/dotsyntax-12.mm: New.\n-\t\n+\n 2010-11-08  Jason Merrill  <jason@redhat.com>\n \n \t* g++.dg/expr/overflow1.C: New.\n@@ -299,8 +304,7 @@\n \t* gcc.c-torture/compile/vector-2.c: Likewise.\n \t* gcc.dg/pr32912-1.c: Likewise.\n \t* gcc.c-torture/execute/va-arg-25.c: Move ...\n-\t* gcc.dg/torture/va-arg-25.c: ... here.\n-\tAdd dg-do run.\n+\t* gcc.dg/torture/va-arg-25.c: ... here.  Add dg-do run.\n \tAdd dg-options -msse, dg-require-effective-target sse_runtime for\n \tfor i?86-*-*, x86_64-*-*.\n \t* gcc.c-torture/execute/vector-1.c: Likewise.\n@@ -317,17 +321,17 @@\n \n \t* gcc.dg/torture/pr45982.c: Add -std=c99\n \t* gcc.dg/torture/pr45623.c: Ditto.\n-\t\n+\n 2010-11-08  Steve Ellcey  <sje@cup.hp.com>\n \n \t* gcc/testsuite/g++.dg/abi/covariant1.C: Fix scan-assembler.\n \t* gcc/testsuite/g++.dg/abi/covariant6.C: Ditto.\n \n 2010-11-08  Kai Tietz  <kai.tietz@onevision.com>\n \n-        PR target/28627\n-        * g++.dg/ext/dllimport7.C: Adjust second error check and\n-        allow test for x86_64 mingw, too.\n+\tPR target/28627\n+\t* g++.dg/ext/dllimport7.C: Adjust second error check and\n+\tallow test for x86_64 mingw, too.\n \n 2010-11-08  Janus Weil  <janus@gcc.gnu.org>\n \n@@ -339,14 +343,14 @@\n \tPR rtl-optimization/45352\n \tgcc.dg/pr45352.c, gcc.dg/pr45352-1.c, gcc.dg/pr45352-2.c: New tests.\n \tgcc.target/i386/pr45352.c, gcc.target/i386/pr45352-1.c,\n-\tgcc.target/i386/pr45352-2.c: New tests. \n+\tgcc.target/i386/pr45352-2.c: New tests.\n \n 2010-11-06  Iain Sandoe  <iains@gcc.gnu.org>\n \n \tPR libobjc/36610\n-\t* objc.dg/torture/forward-1.m: Re-enable for gnu-runtime, XFAIL the run for\n-\tall but m32 x86.\n-\t\n+\t* objc.dg/torture/forward-1.m: Re-enable for gnu-runtime,\n+\tXFAIL the run for all but m32 x86.\n+\n 2010-11-07  Andreas Schwab  <schwab@linux-m68k.org>\n \n \t* g++.dg/debug/dwarf2/nested-2.C: Adjust pattern to also match \"|\"\n@@ -549,8 +553,8 @@\n \t* obj-c++.dg/template-8.mm: Likewise.\n \t* obj-c++.dg/encode-3.mm: Use abort (), cast char types.\n \t* obj-c++.dg/demangle-2.mm: Add +initialize:, XFAIL NeXT m64.\n-\t* obj-c++.dg/property/at-property-2.mm: Comment out a case that ICEs and\n-\tput a FIXME for this.\n+\t* obj-c++.dg/property/at-property-2.mm: Comment out a case that ICEs\n+\tand put a FIXME for this.\n \t* obj-c++.dg/property/property-2.mm: Remove.\n \t* obj-c++.dg/property/property-3.mm: Remove.\n \n@@ -941,8 +945,8 @@\n \n 2010-11-02  Iain Sandoe  <iains@gcc.gnu.org>\n \n-\t* g++.dg/debug/dwarf2/pubnames-1.C: Amend to check for only one instance\n-\tof debug_pubnames on darwin.\n+\t* g++.dg/debug/dwarf2/pubnames-1.C: Amend to check for only one\n+\tinstance of debug_pubnames on darwin.\n \n 2010-11-01  Jason Merrill  <jason@redhat.com>\n \t    Benjamin Kosnik  <bkoz@redhat.com>"}, {"sha": "3b722283ef328e6a2d535eba5d17c77ffbc308c9", "filename": "gcc/testsuite/gcc.target/i386/pr46419.c", "status": "added", "additions": 39, "deletions": 0, "changes": 39, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr46419.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ca2bc5e88a4b2f0370d7b532438029b1c8d2661/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr46419.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fi386%2Fpr46419.c?ref=5ca2bc5e88a4b2f0370d7b532438029b1c8d2661", "patch": "@@ -0,0 +1,39 @@\n+/* { dg-do run } */\n+/* { dg-options \"-O2 -msse\" } */\n+/* { dg-require-effective-target sse } */\n+\n+#include \"sse-check.h\"\n+\n+#include <xmmintrin.h>\n+\n+void __attribute__((noinline))\n+sse_test (void)\n+{\n+  char image[4];\n+  __m128 image4;\n+  float out[4] __attribute__ ((aligned (16)));\n+  int i;\n+\n+  for (i = 0; i < 4; i++)\n+    image[i] = i + 1;\n+\n+  image4 =\n+    _mm_cvtpi8_ps (_mm_setr_pi8\n+\t\t   (image[0], image[1], image[2], image[3], 0, 0, 0, 0));\n+  _mm_store_ps (out, image4);\n+  _mm_empty ();\n+\n+  for (i = 0; i < 4; i++)\n+    if (out[i] != (float) (i + 1))\n+      abort ();\n+\n+  image4 =\n+    _mm_cvtpu8_ps (_mm_setr_pi8\n+\t\t   (image[0], image[1], image[2], image[3], 0, 0, 0, 0));\n+  _mm_store_ps (out, image4);\n+  _mm_empty ();\n+\n+  for (i = 0; i < 4; i++)\n+    if (out[i] != (float) (i + 1))\n+      abort ();\n+}"}]}