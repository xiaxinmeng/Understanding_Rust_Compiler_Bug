{"sha": "c969e34e3fe457d60c4220554fa3c81d2bdae91b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yzk2OWUzNGUzZmU0NTdkNjBjNDIyMDU1NGZhM2M4MWQyYmRhZTkxYg==", "commit": {"author": {"name": "Rainer Orth", "email": "ro@CeBiTec.Uni-Bielefeld.DE", "date": "2018-01-12T09:52:53Z"}, "committer": {"name": "Rainer Orth", "email": "ro@gcc.gnu.org", "date": "2018-01-12T09:52:53Z"}, "message": "Link with correct values-*.o files on Solaris (PR target/40411)\n\n\tgcc/testsuite:\n\tPR libfortran/67412\n\t* gfortran.dg/execute_command_line_2.f90: Remove dg-xfail-run-if\n\ton *-*-solaris2.10.\n\n\tlibstdc++-v3:\n\tPR libstdc++/64054\n\t* testsuite/27_io/basic_ostream/inserters_arithmetic/char/hexfloat.cc:\n\tRemove dg-xfail-run-if.\n\n\tgcc:\n\tPR target/40411\n\t* config/sol2.h (STARTFILE_ARCH_SPEC): Don't use with -shared or\n\t-symbolic.\n\tUse values-Xc.o for -pedantic.\n\tLink with values-xpg4.o for C90, values-xpg6.o otherwise.\n\nFrom-SVN: r256568", "tree": {"sha": "a4878f25e329b0be127c17901442243f07da7f73", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a4878f25e329b0be127c17901442243f07da7f73"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c969e34e3fe457d60c4220554fa3c81d2bdae91b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c969e34e3fe457d60c4220554fa3c81d2bdae91b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c969e34e3fe457d60c4220554fa3c81d2bdae91b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c969e34e3fe457d60c4220554fa3c81d2bdae91b/comments", "author": {"login": "rorth", "id": 3930951, "node_id": "MDQ6VXNlcjM5MzA5NTE=", "avatar_url": "https://avatars.githubusercontent.com/u/3930951?v=4", "gravatar_id": "", "url": "https://api.github.com/users/rorth", "html_url": "https://github.com/rorth", "followers_url": "https://api.github.com/users/rorth/followers", "following_url": "https://api.github.com/users/rorth/following{/other_user}", "gists_url": "https://api.github.com/users/rorth/gists{/gist_id}", "starred_url": "https://api.github.com/users/rorth/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/rorth/subscriptions", "organizations_url": "https://api.github.com/users/rorth/orgs", "repos_url": "https://api.github.com/users/rorth/repos", "events_url": "https://api.github.com/users/rorth/events{/privacy}", "received_events_url": "https://api.github.com/users/rorth/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "a7448bdfbcce56b44a6f3b3cbdc6add9a0b9d6bd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/a7448bdfbcce56b44a6f3b3cbdc6add9a0b9d6bd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/a7448bdfbcce56b44a6f3b3cbdc6add9a0b9d6bd"}], "stats": {"total": 51, "additions": 47, "deletions": 4}, "files": [{"sha": "36e8aa8b51109ec87881c02fce4a0f55bed37c2d", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c969e34e3fe457d60c4220554fa3c81d2bdae91b", "patch": "@@ -1,3 +1,11 @@\n+2018-01-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR target/40411\n+\t* config/sol2.h (STARTFILE_ARCH_SPEC): Don't use with -shared or\n+\t-symbolic.\n+\tUse values-Xc.o for -pedantic.\n+\tLink with values-xpg4.o for C90, values-xpg6.o otherwise.\n+\n 2018-01-12  Martin Liska  <mliska@suse.cz>\n \n \tPR ipa/83054"}, {"sha": "f296cf5731c590c76965d5363632081809cd5d7c", "filename": "gcc/config/sol2.h", "status": "modified", "additions": 27, "deletions": 2, "changes": 29, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2Fconfig%2Fsol2.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2Fconfig%2Fsol2.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fsol2.h?ref=c969e34e3fe457d60c4220554fa3c81d2bdae91b", "patch": "@@ -169,9 +169,34 @@ along with GCC; see the file COPYING3.  If not see\n #undef SUPPORTS_INIT_PRIORITY\n #define SUPPORTS_INIT_PRIORITY HAVE_INITFINI_ARRAY_SUPPORT\n \n+/* Solaris libc and libm implement multiple behaviours for various\n+   interfaces that have changed over the years in different versions of the\n+   C standard.  The behaviour is controlled by linking corresponding\n+   values-*.o objects.  Each of these objects contain alternate definitions\n+   of one or more variables that the libraries use to select which\n+   conflicting behaviour they should exhibit.  There are two sets of these\n+   objects, values-X*.o and values-xpg*.o.\n+\n+   The values-X[ac].o objects set the variable _lib_version.  The Studio C\n+   compilers use values-Xc.o with either -Xc or (since Studio 12.6)\n+   -pedantic to select strictly conformant ISO C behaviour, otherwise\n+   values-Xa.o.\n+\n+   The values-xpg[46].o objects define either or both __xpg[46] variables,\n+   selecting XPG4 mode (__xpg4) and conforming C99/SUSv3 behavior (__xpg6).\n+\n+   Since GCC 5, gcc defaults to -std=gnu11 or higher, so we link\n+   values-xpg6.o to get C99 semantics.  Besides, most of the runtime\n+   libraries always require C99 semantics.\n+\n+   Since only one instance of _lib_version and __xpg[46] takes effekt (the\n+   first in ld.so.1's search path), we only link the values-*.o files into\n+   executable programs.  */\n #undef STARTFILE_ARCH_SPEC\n-#define STARTFILE_ARCH_SPEC \"%{ansi:values-Xc.o%s} \\\n-\t\t\t    %{!ansi:values-Xa.o%s}\"\n+#define STARTFILE_ARCH_SPEC \\\n+  \"%{!shared:%{!symbolic: \\\n+     %{pedantic:values-Xc.o%s; :values-Xa.o%s} \\\n+     %{std=c90|std=gnu90:values-xpg4.o%s; :values-xpg6.o%s}}}\"\n \n #if defined(HAVE_LD_PIE) && defined(HAVE_SOLARIS_CRTS)\n #define STARTFILE_CRTBEGIN_SPEC \"%{static:crtbegin.o%s; \\"}, {"sha": "017281df3d2afe7157e8d5d7b11f69c60c73f086", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=c969e34e3fe457d60c4220554fa3c81d2bdae91b", "patch": "@@ -1,3 +1,9 @@\n+2018-01-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR libfortran/67412\n+\t* gfortran.dg/execute_command_line_2.f90: Remove dg-xfail-run-if\n+\ton *-*-solaris2.10.\n+\n 2018-01-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n \n \t* lib/target-supports.exp (check_effective_target_branch_cost):"}, {"sha": "5a4e9cc7b8299a812d93a8075b7f1534ba495e0d", "filename": "gcc/testsuite/gfortran.dg/execute_command_line_2.f90", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2Ftestsuite%2Fgfortran.dg%2Fexecute_command_line_2.f90", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c969e34e3fe457d60c4220554fa3c81d2bdae91b/gcc%2Ftestsuite%2Fgfortran.dg%2Fexecute_command_line_2.f90", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgfortran.dg%2Fexecute_command_line_2.f90?ref=c969e34e3fe457d60c4220554fa3c81d2bdae91b", "patch": "@@ -1,5 +1,4 @@\n ! { dg-do run }\n-! { dg-xfail-run-if \"PR libfortran/67412\" { *-*-solaris2.10 } }\n !\n ! Check that EXECUTE_COMMAND_LINE handles invalid command lines appropriately\n !"}, {"sha": "01963be85b516de250ab88f2e50350df18060509", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c969e34e3fe457d60c4220554fa3c81d2bdae91b/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c969e34e3fe457d60c4220554fa3c81d2bdae91b/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=c969e34e3fe457d60c4220554fa3c81d2bdae91b", "patch": "@@ -1,3 +1,9 @@\n+2018-01-12  Rainer Orth  <ro@CeBiTec.Uni-Bielefeld.DE>\n+\n+\tPR libstdc++/64054\n+\t* testsuite/27_io/basic_ostream/inserters_arithmetic/char/hexfloat.cc:\n+\tRemove dg-xfail-run-if.\n+\n 2018-01-10  Fran\u00e7ois Dumont  <fdumont@gcc.gnu.org>\n \n \t* include/bits/forward_list.h"}, {"sha": "f71551b397e095b2c73eb596eff00abd420fce23", "filename": "libstdc++-v3/testsuite/27_io/basic_ostream/inserters_arithmetic/char/hexfloat.cc", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c969e34e3fe457d60c4220554fa3c81d2bdae91b/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_ostream%2Finserters_arithmetic%2Fchar%2Fhexfloat.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c969e34e3fe457d60c4220554fa3c81d2bdae91b/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_ostream%2Finserters_arithmetic%2Fchar%2Fhexfloat.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F27_io%2Fbasic_ostream%2Finserters_arithmetic%2Fchar%2Fhexfloat.cc?ref=c969e34e3fe457d60c4220554fa3c81d2bdae91b", "patch": "@@ -1,6 +1,5 @@\n // { dg-do run { target c++11 } }\n // { dg-require-string-conversions \"\" }\n-// { dg-xfail-run-if \"PR libstdc++/64054\" { *-*-solaris* } }\n // { dg-xfail-run-if \"broken long double IO\" { newlib_broken_long_double_io  } }\n \n // 2014-03-27 R\u00fcdiger Sonderfeld"}]}