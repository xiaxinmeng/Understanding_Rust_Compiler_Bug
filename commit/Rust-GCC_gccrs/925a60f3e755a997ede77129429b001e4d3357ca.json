{"sha": "925a60f3e755a997ede77129429b001e4d3357ca", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTI1YTYwZjNlNzU1YTk5N2VkZTc3MTI5NDI5YjAwMWU0ZDMzNTdjYQ==", "commit": {"author": {"name": "Philip Blundell", "email": "pb@nexus.co.uk", "date": "1999-03-25T09:45:15Z"}, "committer": {"name": "Nick Clifton", "email": "nickc@gcc.gnu.org", "date": "1999-03-25T09:45:15Z"}, "message": "Applied patch from Phillip Blundell <pb@nexus.co.uk>:\n\n  This patch fixes a couple of Linux-specific problems with profiling and\n  debugging.  It's against the trunk version.  Without it gdb reports wrong\n  line numbers and -pg does not work at all.\n\nFrom-SVN: r25972", "tree": {"sha": "336fbdaadb2ba171178bb71eddc5dd6bc26fabaa", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/336fbdaadb2ba171178bb71eddc5dd6bc26fabaa"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/925a60f3e755a997ede77129429b001e4d3357ca", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/925a60f3e755a997ede77129429b001e4d3357ca", "html_url": "https://github.com/Rust-GCC/gccrs/commit/925a60f3e755a997ede77129429b001e4d3357ca", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/925a60f3e755a997ede77129429b001e4d3357ca/comments", "author": null, "committer": null, "parents": [{"sha": "fe1e8929ab1a5f978944272f389d7bb3bbe3dac0", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe1e8929ab1a5f978944272f389d7bb3bbe3dac0", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe1e8929ab1a5f978944272f389d7bb3bbe3dac0"}], "stats": {"total": 43, "additions": 35, "deletions": 8}, "files": [{"sha": "cc4577a1bdb6f77abf2928581a3b221aced872e7", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/925a60f3e755a997ede77129429b001e4d3357ca/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/925a60f3e755a997ede77129429b001e4d3357ca/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=925a60f3e755a997ede77129429b001e4d3357ca", "patch": "@@ -1,3 +1,10 @@\n+1999-03-25  Philip Blundell  <pb@nexus.co.uk>\n+\n+\tBased on patch from Jim Studt <jim@federated.com>:\n+\t* config/arm/linux-elf.h (STARTFILE_SPEC, ENDFILE_SPEC): Copy\n+\tdefinitions from config/linux.h.\n+\t(DBX_BLOCKS_FUNCTION_RELATIVE): Define to 1.\n+\n Thu Mar 25 02:12:42 1999  Finn Hakansson  <finn@axis.com>\n \n         * rtl.h (MEM_COPY_ATTRIBUTES): Remove unnecessary ending backslash."}, {"sha": "585c259f0b80be230b44600d6c5e7c1354aa9a48", "filename": "gcc/config/arm/linux-elf.h", "status": "modified", "additions": 28, "deletions": 8, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/925a60f3e755a997ede77129429b001e4d3357ca/gcc%2Fconfig%2Farm%2Flinux-elf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/925a60f3e755a997ede77129429b001e4d3357ca/gcc%2Fconfig%2Farm%2Flinux-elf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Farm%2Flinux-elf.h?ref=925a60f3e755a997ede77129429b001e4d3357ca", "patch": "@@ -49,13 +49,26 @@ Boston, MA 02111-1307, USA.  */\n \n #define LIBGCC_SPEC \"%{msoft-float:-lfloat} -lgcc\"\n \n-/* Add the compiler's crtend, and the library's crtn.  */\n-#define ENDFILE_SPEC \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} \\\n-   %{pg:gcrtn.o%s}%{!pg:crtn.o%s}\"\n-\n-#define STARTFILE_SPEC \"%{!shared:crt1.o%s} \\\n-   crti.o%s \\\n-   %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n+/* Provide a STARTFILE_SPEC appropriate for GNU/Linux.  Here we add\n+   the GNU/Linux magical crtbegin.o file (see crtstuff.c) which\n+   provides part of the support for getting C++ file-scope static\n+   object constructed before entering `main'. */\n+   \n+#define STARTFILE_SPEC \\\n+  \"%{!shared: \\\n+     %{pg:gcrt1.o%s} %{!pg:%{p:gcrt1.o%s} \\\n+\t\t       %{!p:%{profile:gcrt1.o%s} \\\n+\t\t\t %{!profile:crt1.o%s}}}} \\\n+   crti.o%s %{!shared:crtbegin.o%s} %{shared:crtbeginS.o%s}\"\n+\n+/* Provide a ENDFILE_SPEC appropriate for GNU/Linux.  Here we tack on\n+   the GNU/Linux magical crtend.o file (see crtstuff.c) which\n+   provides part of the support for getting C++ file-scope static\n+   object constructed before entering `main', followed by a normal\n+   GNU/Linux \"finalizer\" file, `crtn.o'.  */\n+\n+#define ENDFILE_SPEC \\\n+  \"%{!shared:crtend.o%s} %{shared:crtendS.o%s} crtn.o%s\"\n \n #define LINK_SPEC \"%{h*} %{version:-v} \\\n    %{b} %{Wl,*:%*} \\\n@@ -218,9 +231,16 @@ const_section ()\t\t\t\t\t\t\t\\\n        fputc ('\\n', FILE); } while (0)\n \n /* Make DWARF2 an option, but keep DBX as the default for now.\n-   Use -gdwarf2 to turn on DWARF2.  */\n+   Use -gdwarf-2 to turn on DWARF2.  */\n #define DWARF2_DEBUGGING_INFO\n #define PREFERRED_DEBUGGING_TYPE DBX_DEBUG\n \n+/* Make LBRAC and RBRAC addresses relative to the start of the\n+   function.  The native Solaris stabs debugging format works this\n+   way, gdb expects it, and it reduces the number of relocation\n+   entries.  */\n+\n+#define DBX_BLOCKS_FUNCTION_RELATIVE 1\n+\n #include \"arm/elf.h\"\n #include \"arm/linux-gas.h\""}]}