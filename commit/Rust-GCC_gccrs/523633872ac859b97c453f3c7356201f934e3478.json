{"sha": "523633872ac859b97c453f3c7356201f934e3478", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTIzNjMzODcyYWM4NTliOTdjNDUzZjNjNzM1NjIwMWY5MzRlMzQ3OA==", "commit": {"author": {"name": "Mark Mitchell", "email": "mark@markmitchell.com", "date": "1998-08-07T09:56:06Z"}, "committer": {"name": "Mark Mitchell", "email": "mmitchel@gcc.gnu.org", "date": "1998-08-07T09:56:06Z"}, "message": "cvt.c (cp_convert_to_pointer): Handle NULL pointer conversions, even in complex virtual base class hierarchies.\n\n\t* cvt.c (cp_convert_to_pointer): Handle NULL pointer\n\tconversions, even in complex virtual base class hierarchies.\n\nFrom-SVN: r21626", "tree": {"sha": "f552903fd32c0e5acdd1baa05318a0912933f57a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f552903fd32c0e5acdd1baa05318a0912933f57a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/523633872ac859b97c453f3c7356201f934e3478", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/523633872ac859b97c453f3c7356201f934e3478", "html_url": "https://github.com/Rust-GCC/gccrs/commit/523633872ac859b97c453f3c7356201f934e3478", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/523633872ac859b97c453f3c7356201f934e3478/comments", "author": null, "committer": null, "parents": [{"sha": "bd106708cf7cea9e34749c116ebf70e8d5a0ece3", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/bd106708cf7cea9e34749c116ebf70e8d5a0ece3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/bd106708cf7cea9e34749c116ebf70e8d5a0ece3"}], "stats": {"total": 31, "additions": 30, "deletions": 1}, "files": [{"sha": "f1957d80cd353be6ad4042a283e65231eed4dbd7", "filename": "gcc/cp/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/523633872ac859b97c453f3c7356201f934e3478/gcc%2Fcp%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/523633872ac859b97c453f3c7356201f934e3478/gcc%2Fcp%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2FChangeLog?ref=523633872ac859b97c453f3c7356201f934e3478", "patch": "@@ -1,3 +1,8 @@\n+1998-08-07  Mark Mitchell  <mark@markmitchell.com>\n+\n+\t* cvt.c (cp_convert_to_pointer): Handle a NULL pointer\n+\tconversions, even in complex virtual base class hierarchies.\n+\n 1998-08-06  Mark Mitchell  <mark@markmitchell.com>\n \n \t* cp-tree.h (ENUM_TEMPLATE_INFO): New macro."}, {"sha": "1078488c2938cad3ce74d4ef3076603a47f662f3", "filename": "gcc/cp/cvt.c", "status": "modified", "additions": 9, "deletions": 1, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/523633872ac859b97c453f3c7356201f934e3478/gcc%2Fcp%2Fcvt.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/523633872ac859b97c453f3c7356201f934e3478/gcc%2Fcp%2Fcvt.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcp%2Fcvt.c?ref=523633872ac859b97c453f3c7356201f934e3478", "patch": "@@ -154,7 +154,15 @@ cp_convert_to_pointer (type, expr)\n \t  && TREE_CODE (TREE_TYPE (type)) == RECORD_TYPE\n \t  && IS_AGGR_TYPE (TREE_TYPE (type))\n \t  && IS_AGGR_TYPE (TREE_TYPE (intype))\n-\t  && TREE_CODE (TREE_TYPE (intype)) == RECORD_TYPE)\n+\t  && TREE_CODE (TREE_TYPE (intype)) == RECORD_TYPE\n+\t  /* If EXPR is NULL, then we don't need to do any arithmetic\n+\t     to convert it:\n+\n+\t       [conv.ptr]\n+\n+\t       The null pointer value is converted to the null pointer\n+\t       value of the destination type.  */\n+\t  && !integer_zerop (expr))\n \t{\n \t  enum tree_code code = PLUS_EXPR;\n \t  tree binfo = get_binfo (TREE_TYPE (type), TREE_TYPE (intype), 1);"}, {"sha": "7cd805975aac0f3aab6fb1b844abb93de5c08bcd", "filename": "gcc/testsuite/g++.old-deja/g++.other/cast1.C", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/523633872ac859b97c453f3c7356201f934e3478/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcast1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/523633872ac859b97c453f3c7356201f934e3478/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcast1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.old-deja%2Fg%2B%2B.other%2Fcast1.C?ref=523633872ac859b97c453f3c7356201f934e3478", "patch": "@@ -0,0 +1,16 @@\n+// Build don't link:\n+\n+struct S0 { };\n+struct S1 : virtual public S0 { };\n+struct S2 : virtual public S0 { };\n+\n+struct S3 : public S1, public S2, virtual public S0\n+{\n+};\n+\n+void f(const S0*) {}\n+\n+void g()\n+{\n+  f(static_cast<S3*>(0));\n+}"}]}