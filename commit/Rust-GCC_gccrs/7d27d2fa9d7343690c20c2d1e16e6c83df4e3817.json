{"sha": "7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6N2QyN2QyZmE5ZDczNDM2OTBjMjBjMmQxZTE2ZTZjODNkZjRlMzgxNw==", "commit": {"author": {"name": "Jakub Jelinek", "email": "jakub@redhat.com", "date": "2017-09-13T21:22:33Z"}, "committer": {"name": "Jakub Jelinek", "email": "jakub@gcc.gnu.org", "date": "2017-09-13T21:22:33Z"}, "message": "sysv4.h (STARTFILE_LINUX_SPEC): Add -static-pie support.\n\n\t* config/rs6000/sysv4.h (STARTFILE_LINUX_SPEC): Add -static-pie\n\tsupport.\n\t(ENDFILE_LINUX_SPEC): Likewise.\n\t(LINK_EH_SPEC): Likewise.\n\t* config/rs6000/linux64.h (LINK_SHLIB_SPEC): Likewise.\n\t(LINK_OS_LINUX_SPEC32): Likewise.\n\t(LINK_OS_LINUX_SPEC64): Likewise.\n\t* config/rs6000/linux.h (LINK_SHLIB_SPEC): Likewise.\n\t(LINK_OS_LINUX_SPEC): Likewise.\n\nFrom-SVN: r252735", "tree": {"sha": "473c2363d2fd5953667ee3ad22450cec966c01a6", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/473c2363d2fd5953667ee3ad22450cec966c01a6"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/comments", "author": {"login": "jakubjelinek", "id": 9370665, "node_id": "MDQ6VXNlcjkzNzA2NjU=", "avatar_url": "https://avatars.githubusercontent.com/u/9370665?v=4", "gravatar_id": "", "url": "https://api.github.com/users/jakubjelinek", "html_url": "https://github.com/jakubjelinek", "followers_url": "https://api.github.com/users/jakubjelinek/followers", "following_url": "https://api.github.com/users/jakubjelinek/following{/other_user}", "gists_url": "https://api.github.com/users/jakubjelinek/gists{/gist_id}", "starred_url": "https://api.github.com/users/jakubjelinek/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/jakubjelinek/subscriptions", "organizations_url": "https://api.github.com/users/jakubjelinek/orgs", "repos_url": "https://api.github.com/users/jakubjelinek/repos", "events_url": "https://api.github.com/users/jakubjelinek/events{/privacy}", "received_events_url": "https://api.github.com/users/jakubjelinek/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "87f3a5cfb59347cd794c97c52b075d38dfc9ed48", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/87f3a5cfb59347cd794c97c52b075d38dfc9ed48", "html_url": "https://github.com/Rust-GCC/gccrs/commit/87f3a5cfb59347cd794c97c52b075d38dfc9ed48"}], "stats": {"total": 41, "additions": 29, "deletions": 12}, "files": [{"sha": "1c5b812d62870e7d569b078866c0c5a24de4a699", "filename": "gcc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "patch": "@@ -1,3 +1,15 @@\n+2017-09-13  Jakub Jelinek  <jakub@redhat.com>\n+\n+\t* config/rs6000/sysv4.h (STARTFILE_LINUX_SPEC): Add -static-pie\n+\tsupport.\n+\t(ENDFILE_LINUX_SPEC): Likewise.\n+\t(LINK_EH_SPEC): Likewise.\n+\t* config/rs6000/linux64.h (LINK_SHLIB_SPEC): Likewise.\n+\t(LINK_OS_LINUX_SPEC32): Likewise.\n+\t(LINK_OS_LINUX_SPEC64): Likewise.\n+\t* config/rs6000/linux.h (LINK_SHLIB_SPEC): Likewise.\n+\t(LINK_OS_LINUX_SPEC): Likewise.\n+\n 2017-09-13  Martin Liska  <mliska@suse.cz>\n \n \tPR middle-end/82154"}, {"sha": "e4158d26abb383557029602729cefcea10f21f59", "filename": "gcc/config/rs6000/linux.h", "status": "modified", "additions": 5, "deletions": 3, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2Fconfig%2Frs6000%2Flinux.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2Fconfig%2Frs6000%2Flinux.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux.h?ref=7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "patch": "@@ -61,7 +61,8 @@\n #define CPP_OS_DEFAULT_SPEC \"%(cpp_os_linux)\"\n \n #undef  LINK_SHLIB_SPEC\n-#define LINK_SHLIB_SPEC \"%{shared:-shared} %{!shared: %{static:-static}}\"\n+#define LINK_SHLIB_SPEC \"%{shared:-shared} %{!shared: %{static:-static}} \\\n+  %{static-pie:-static -pie --no-dynamic-linker -z text}\"\n \n #undef\tLIB_DEFAULT_SPEC\n #define LIB_DEFAULT_SPEC \"%(lib_linux)\"\n@@ -93,8 +94,9 @@\n \n #undef LINK_OS_LINUX_SPEC\n #define LINK_OS_LINUX_SPEC LINK_OS_LINUX_EMUL \" %{!shared: %{!static: \\\n-  %{rdynamic:-export-dynamic} \\\n-  -dynamic-linker \" GNU_USER_DYNAMIC_LINKER \"}}\"\n+  %{!static-pie: \\\n+    %{rdynamic:-export-dynamic} \\\n+    -dynamic-linker \" GNU_USER_DYNAMIC_LINKER \"}}}\"\n \n /* For backward compatibility, we must continue to use the AIX\n    structure return convention.  */"}, {"sha": "13b769211b1130a5b2fa6b86d138273bc6fac96b", "filename": "gcc/config/rs6000/linux64.h", "status": "modified", "additions": 8, "deletions": 5, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2Fconfig%2Frs6000%2Flinux64.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2Fconfig%2Frs6000%2Flinux64.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Flinux64.h?ref=7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "patch": "@@ -395,7 +395,8 @@ extern int dot_symbols;\n #define CPP_OS_DEFAULT_SPEC \"%(cpp_os_linux) %(include_extra)\"\n \n #undef  LINK_SHLIB_SPEC\n-#define LINK_SHLIB_SPEC \"%{shared:-shared} %{!shared: %{static:-static}}\"\n+#define LINK_SHLIB_SPEC \"%{shared:-shared} %{!shared: %{static:-static}} \\\n+  %{static-pie:-static -pie --no-dynamic-linker -z text}\"\n \n #undef  LIB_DEFAULT_SPEC\n #define LIB_DEFAULT_SPEC \"%(lib_linux)\"\n@@ -470,13 +471,15 @@ extern int dot_symbols;\n #endif\n \n #define LINK_OS_LINUX_SPEC32 LINK_OS_LINUX_EMUL32 \" %{!shared: %{!static: \\\n-  %{rdynamic:-export-dynamic} \\\n-  -dynamic-linker \" GNU_USER_DYNAMIC_LINKER32 \"}} \\\n+  %{!static-pie: \\\n+    %{rdynamic:-export-dynamic} \\\n+    -dynamic-linker \" GNU_USER_DYNAMIC_LINKER32 \"}}} \\\n   %(link_os_extra_spec32)\"\n \n #define LINK_OS_LINUX_SPEC64 LINK_OS_LINUX_EMUL64 \" %{!shared: %{!static: \\\n-  %{rdynamic:-export-dynamic} \\\n-  -dynamic-linker \" GNU_USER_DYNAMIC_LINKER64 \"}} \\\n+  %{!static-pie: \\\n+    %{rdynamic:-export-dynamic} \\\n+    -dynamic-linker \" GNU_USER_DYNAMIC_LINKER64 \"}}} \\\n   %(link_os_extra_spec64)\"\n \n #undef  TOC_SECTION_ASM_OP"}, {"sha": "e381ce90a8c764fe11ecfcfeabfaeda8fd1e0cb9", "filename": "gcc/config/rs6000/sysv4.h", "status": "modified", "additions": 4, "deletions": 4, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/7d27d2fa9d7343690c20c2d1e16e6c83df4e3817/gcc%2Fconfig%2Frs6000%2Fsysv4.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fsysv4.h?ref=7d27d2fa9d7343690c20c2d1e16e6c83df4e3817", "patch": "@@ -764,11 +764,11 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n   \"%{shared:; \\\n      pg|p|profile:gcrt1.o%s; \\\n      static:crt1.o%s; \\\n-     \" PIE_SPEC \":Scrt1.o%s; \\\n+     static-pie|\" PIE_SPEC \":Scrt1.o%s; \\\n      :crt1.o%s} \\\n    %{mnewlib:ecrti.o%s;:crti.o%s} \\\n    %{static:crtbeginT.o%s; \\\n-     shared|\" PIE_SPEC \":crtbeginS.o%s; \\\n+     shared|static-pie|\" PIE_SPEC \":crtbeginS.o%s; \\\n      :crtbegin.o%s} \\\n    %{fvtable-verify=none:%s; \\\n      fvtable-verify=preinit:vtv_start_preinit.o%s; \\\n@@ -782,7 +782,7 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n      fvtable-verify=preinit:vtv_end_preinit.o%s; \\\n      fvtable-verify=std:vtv_end.o%s} \\\n    %{static:crtend.o%s; \\\n-     shared|\" PIE_SPEC \":crtendS.o%s; \\\n+     shared|static-pie|\" PIE_SPEC \":crtendS.o%s; \\\n      :crtend.o%s} \\\n    %{mnewlib:ecrtn.o%s;:crtn.o%s} \\\n    \" CRTOFFLOADEND\n@@ -816,7 +816,7 @@ ENDIAN_SELECT(\" -mbig\", \" -mlittle\", DEFAULT_ASM_ENDIAN)\n   -dynamic-linker \" GNU_USER_DYNAMIC_LINKER \"}}\"\n \n #if defined(HAVE_LD_EH_FRAME_HDR)\n-# define LINK_EH_SPEC \"%{!static:--eh-frame-hdr} \"\n+# define LINK_EH_SPEC \"%{!static|static-pie:--eh-frame-hdr} \"\n #endif\n \n #define CPP_OS_LINUX_SPEC \"-D__unix__ -D__gnu_linux__ -D__linux__ \\"}]}