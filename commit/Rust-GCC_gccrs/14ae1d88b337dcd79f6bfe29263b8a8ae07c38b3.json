{"sha": "14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MTRhZTFkODhiMzM3ZGNkNzlmNmJmZTI5MjYzYjhhOGFlMDdjMzhiMw==", "commit": {"author": {"name": "DJ Delorie", "email": "dj@redhat.com", "date": "2015-06-05T05:00:05Z"}, "committer": {"name": "DJ Delorie", "email": "dj@gcc.gnu.org", "date": "2015-06-05T05:00:05Z"}, "message": "msp430.md (movsi_s): New.\n\n* config/msp430/msp430.md (movsi_s): New.  Special case for\nstoring a 20-bit symbol into a 32-bit register.\n* config/msp430/msp430.c (msp430_subreg): Add support for it.\n* config/msp430/predicates.md (msp430_symbol_operand): New.\n\nFrom-SVN: r224145", "tree": {"sha": "b9a36265a813a664354fe926455cefe5075688df", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/b9a36265a813a664354fe926455cefe5075688df"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "html_url": "https://github.com/Rust-GCC/gccrs/commit/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/comments", "author": null, "committer": null, "parents": [{"sha": "b1ada49be04014013fb915d5a056bf7facd7a5f7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b1ada49be04014013fb915d5a056bf7facd7a5f7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b1ada49be04014013fb915d5a056bf7facd7a5f7"}], "stats": {"total": 31, "additions": 31, "deletions": 0}, "files": [{"sha": "a052bd3cf9c21efb2bb5dcafba94b8fe56ac1505", "filename": "gcc/ChangeLog", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "patch": "@@ -1,3 +1,10 @@\n+2015-06-04  DJ Delorie  <dj@redhat.com>\n+\n+\t* config/msp430/msp430.md (movsi_s): New.  Special case for\n+\tstoring a 20-bit symbol into a 32-bit register.\n+\t* config/msp430/msp430.c (msp430_subreg): Add support for it.\n+\t* config/msp430/predicates.md (msp430_symbol_operand): New.\n+\n 2015-06-04  Sriraman Tallam  <tmsriram@google.com>\n \n \t* c-family/c-common.c (noplt): New attribute."}, {"sha": "1c18047807d2e1ed2c36d986bb3b37f183bfe81e", "filename": "gcc/config/msp430/msp430.c", "status": "modified", "additions": 7, "deletions": 0, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2Fconfig%2Fmsp430%2Fmsp430.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.c?ref=14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "patch": "@@ -2374,6 +2374,13 @@ msp430_subreg (machine_mode mode, rtx r, machine_mode omode, int byte)\n     }\n   else if (GET_CODE (r) == MEM)\n     rv = adjust_address (r, mode, byte);\n+  else if (GET_CODE (r) == SYMBOL_REF\n+\t   && (byte == 0 || byte == 2)\n+\t   && mode == HImode)\n+    {\n+      rv = gen_rtx_ZERO_EXTRACT (HImode, r, GEN_INT (16), GEN_INT (8*byte));\n+      rv = gen_rtx_CONST (HImode, r);\n+    }\n   else\n     rv = simplify_gen_subreg (mode, r, omode, byte);\n "}, {"sha": "ad8fb7af31960646867b8cbf3d11aa7281af7883", "filename": "gcc/config/msp430/msp430.md", "status": "modified", "additions": 13, "deletions": 0, "changes": 13, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2Fconfig%2Fmsp430%2Fmsp430.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2Fconfig%2Fmsp430%2Fmsp430.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fmsp430.md?ref=14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "patch": "@@ -214,6 +214,19 @@\n   \"\"\n   )\n \n+(define_insn_and_split \"movsi_s\"\n+  [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=rm\")\n+\t(subreg:SI (match_operand:PSI 1 \"msp430_symbol_operand\" \"i\") 0))]\n+  \"\"\n+  \"\"\n+  \"reload_completed\"\n+  [(set (match_operand:HI 2 \"nonimmediate_operand\")\n+\t(match_operand:HI 4 \"general_operand\"))\n+   (set (match_operand:HI 3 \"nonimmediate_operand\")\n+\t(match_operand:HI 5 \"general_operand\"))]\n+  \"msp430_split_movsi (operands);\"\n+  )\n+\n (define_insn_and_split \"movsi_x\"\n   [(set (match_operand:SI 0 \"nonimmediate_operand\" \"=rm\")\n \t(match_operand:SI 1 \"general_operand\" \"rmi\"))]"}, {"sha": "5902339be97037bea4ea50e78cb43de01910f3bd", "filename": "gcc/config/msp430/predicates.md", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2Fconfig%2Fmsp430%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3/gcc%2Fconfig%2Fmsp430%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmsp430%2Fpredicates.md?ref=14ae1d88b337dcd79f6bfe29263b8a8ae07c38b3", "patch": "@@ -82,3 +82,7 @@\n   (and (match_code \"const_int\")\n        (match_test (\"   INTVAL (op) >= 0\n \t\t     && INTVAL (op) <= 15 \"))))\n+\n+(define_predicate \"msp430_symbol_operand\"\n+  (match_code \"symbol_ref\")\n+)"}]}