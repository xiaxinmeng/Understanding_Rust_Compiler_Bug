{"sha": "77c42d456e28d04b684a1774264a2d7be816676b", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzdjNDJkNDU2ZTI4ZDA0YjY4NGExNzc0MjY0YTJkN2JlODE2Njc2Yg==", "commit": {"author": {"name": "Pekka J\u00e4\u00e4skel\u00e4inen", "email": "pekka.jaaskelainen@parmance.com", "date": "2018-05-04T17:58:38Z"}, "committer": {"name": "Pekka J\u00e4\u00e4skel\u00e4inen", "email": "visit0r@gcc.gnu.org", "date": "2018-05-04T17:58:38Z"}, "message": "[BRIGFE] allow controlling strict aliasing from cmd line\n\nFrom-SVN: r259948", "tree": {"sha": "6c3f279e9989f59aa9fdbc6f925a10346b438171", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/6c3f279e9989f59aa9fdbc6f925a10346b438171"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/77c42d456e28d04b684a1774264a2d7be816676b", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77c42d456e28d04b684a1774264a2d7be816676b", "html_url": "https://github.com/Rust-GCC/gccrs/commit/77c42d456e28d04b684a1774264a2d7be816676b", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/77c42d456e28d04b684a1774264a2d7be816676b/comments", "author": {"login": "pjaaskel", "id": 1652632, "node_id": "MDQ6VXNlcjE2NTI2MzI=", "avatar_url": "https://avatars.githubusercontent.com/u/1652632?v=4", "gravatar_id": "", "url": "https://api.github.com/users/pjaaskel", "html_url": "https://github.com/pjaaskel", "followers_url": "https://api.github.com/users/pjaaskel/followers", "following_url": "https://api.github.com/users/pjaaskel/following{/other_user}", "gists_url": "https://api.github.com/users/pjaaskel/gists{/gist_id}", "starred_url": "https://api.github.com/users/pjaaskel/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/pjaaskel/subscriptions", "organizations_url": "https://api.github.com/users/pjaaskel/orgs", "repos_url": "https://api.github.com/users/pjaaskel/repos", "events_url": "https://api.github.com/users/pjaaskel/events{/privacy}", "received_events_url": "https://api.github.com/users/pjaaskel/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "1c72513315c93a968acfdc5000b2f237480dbcba", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/1c72513315c93a968acfdc5000b2f237480dbcba", "html_url": "https://github.com/Rust-GCC/gccrs/commit/1c72513315c93a968acfdc5000b2f237480dbcba"}], "stats": {"total": 17, "additions": 14, "deletions": 3}, "files": [{"sha": "40a715664fd33d0433206edcfec611c7672df8cc", "filename": "gcc/brig/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77c42d456e28d04b684a1774264a2d7be816676b/gcc%2Fbrig%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77c42d456e28d04b684a1774264a2d7be816676b/gcc%2Fbrig%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbrig%2FChangeLog?ref=77c42d456e28d04b684a1774264a2d7be816676b", "patch": "@@ -1,3 +1,8 @@\n+2018-05-04  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n+\n+\t* brig/brig-lang.c: Allow controlling strict aliasing from\n+\tcmd line.\n+\n 2018-05-04  Pekka J\u00e4\u00e4skel\u00e4inen  <pekka.jaaskelainen@parmance.com>\n \n \t* brig/brigfrontend/brig-code-entry-handler.cc: The modulo in"}, {"sha": "58b98fd56a3c76d2aeaac28235c7ba2dcb2a567f", "filename": "gcc/brig/brig-lang.c", "status": "modified", "additions": 9, "deletions": 3, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/77c42d456e28d04b684a1774264a2d7be816676b/gcc%2Fbrig%2Fbrig-lang.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/77c42d456e28d04b684a1774264a2d7be816676b/gcc%2Fbrig%2Fbrig-lang.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fbrig%2Fbrig-lang.c?ref=77c42d456e28d04b684a1774264a2d7be816676b", "patch": "@@ -167,9 +167,15 @@ brig_langhook_post_options (const char **pfilename ATTRIBUTE_UNUSED)\n   if (flag_excess_precision_cmdline == EXCESS_PRECISION_DEFAULT)\n     flag_excess_precision_cmdline = EXCESS_PRECISION_STANDARD;\n \n-  /* gccbrig casts pointers around like crazy, TBAA produces\n-     broken code if not force disabling it.  */\n-  flag_strict_aliasing = 0;\n+  /* gccbrig casts pointers around like crazy, TBAA might produce broken\n+     code if not disabling it by default.  Some PRM conformance tests such\n+     as prm/core/memory/ordinary/ld/ld_u16 fail currently with strict\n+     aliasing (to fix).  It can be enabled from the command line for cases\n+     that are known not to break the C style aliasing requirements.  */\n+  if (!global_options_set.x_flag_strict_aliasing)\n+    flag_strict_aliasing = 0;\n+  else\n+    flag_strict_aliasing = global_options.x_flag_strict_aliasing;\n \n   /* Returning false means that the backend should be used.  */\n   return false;"}]}