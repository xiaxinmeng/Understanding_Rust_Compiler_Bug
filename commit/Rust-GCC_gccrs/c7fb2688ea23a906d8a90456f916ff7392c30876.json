{"sha": "c7fb2688ea23a906d8a90456f916ff7392c30876", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzdmYjI2ODhlYTIzYTkwNmQ4YTkwNDU2ZjkxNmZmNzM5MmMzMDg3Ng==", "commit": {"author": {"name": "Dave Love", "email": "fx@gcc.gnu.org", "date": "1998-07-09T03:40:06Z"}, "committer": {"name": "Dave Love", "email": "fx@gcc.gnu.org", "date": "1998-07-09T03:40:06Z"}, "message": "Replace TIMES conditional stuff removed in\nerror by last change.\n\nFrom-SVN: r21027", "tree": {"sha": "5a4b3cf782ae0a62ccdf4a59b13b206880b37787", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/5a4b3cf782ae0a62ccdf4a59b13b206880b37787"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c7fb2688ea23a906d8a90456f916ff7392c30876", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7fb2688ea23a906d8a90456f916ff7392c30876", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c7fb2688ea23a906d8a90456f916ff7392c30876", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c7fb2688ea23a906d8a90456f916ff7392c30876/comments", "author": null, "committer": null, "parents": [{"sha": "da490d14838614e092423d8c67498ef570262388", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/da490d14838614e092423d8c67498ef570262388", "html_url": "https://github.com/Rust-GCC/gccrs/commit/da490d14838614e092423d8c67498ef570262388"}], "stats": {"total": 14, "additions": 12, "deletions": 2}, "files": [{"sha": "7b7a9d0c0d2c938a12d0495c6f4225be0c1b0220", "filename": "libf2c/libU77/sys_clock_.c", "status": "modified", "additions": 12, "deletions": 2, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c7fb2688ea23a906d8a90456f916ff7392c30876/libf2c%2FlibU77%2Fsys_clock_.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c7fb2688ea23a906d8a90456f916ff7392c30876/libf2c%2FlibU77%2Fsys_clock_.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libf2c%2FlibU77%2Fsys_clock_.c?ref=c7fb2688ea23a906d8a90456f916ff7392c30876", "patch": "@@ -1,4 +1,4 @@\n-/* Copyright (C) 1996 Free Software Foundation, Inc.\n+/* Copyright (C) 1996, 1998 Free Software Foundation, Inc.\n This file is part of GNU Fortran libU77 library.\n \n This library is free software; you can redistribute it and/or modify it\n@@ -29,11 +29,14 @@ Boston, MA 02111-1307, USA.  */\n #  include <time.h>\n # endif\n #endif\n-#include <sys/times.h>\n+#if HAVE_SYS_TIMES_H\n+#  include <sys/times.h>\n+#endif\n #include <limits.h>\n #if HAVE_UNISTD_H\n #  include <unistd.h>\n #endif\n+#include <errno.h>\t\t/* for ENOSYS */\n #include \"f2c.h\"\n \n #ifdef KR_headers\n@@ -43,6 +46,7 @@ int G77_system_clock_0 (count, count_rate, count_max)\n int G77_system_clock_0 (integer *count, integer *count_rate, integer *count_max)\n #endif\n {\n+#if defined (HAVE_TIMES)\n   struct tms buffer;\n   unsigned long cnt;\n   if (count_rate) {\n@@ -52,6 +56,8 @@ int G77_system_clock_0 (integer *count, integer *count_rate, integer *count_max)\n     *count_rate = CLOCKS_PER_SECOND;\n #elif defined CLK_TCK\n     *count_rate = CLK_TCK;\n+#elif defined HZ\n+  *count_rate = HZ;\n #else\n #error Dont know clock tick length\n #endif\n@@ -64,4 +70,8 @@ int G77_system_clock_0 (integer *count, integer *count_rate, integer *count_max)\n   else\n     *count = cnt;\n   return 0;\n+#else /* ! HAVE_TIMES */\n+  errno = ENOSYS;\n+  return -1;\n+#endif /* ! HAVE_TIMES */\n }"}]}