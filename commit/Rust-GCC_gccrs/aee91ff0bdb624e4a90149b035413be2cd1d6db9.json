{"sha": "aee91ff0bdb624e4a90149b035413be2cd1d6db9", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YWVlOTFmZjBiZGI2MjRlNGE5MDE0OWIwMzU0MTNiZTJjZDFkNmRiOQ==", "commit": {"author": {"name": "Alexandre Oliva", "email": "aoliva@redhat.com", "date": "2008-12-10T17:20:50Z"}, "committer": {"name": "Alexandre Oliva", "email": "aoliva@gcc.gnu.org", "date": "2008-12-10T17:20:50Z"}, "message": "re PR middle-end/38271 (Spurious / missing \"... used uninitialized in this function\" warning)\n\ngcc/ChangeLog:\nPR middle-end/38271\n* tree-sra.c (sra_build_bf_assignment): Avoid warnings for\nvariables initialized from SRAed bit fields.\ngcc/testsuite/ChangeLog:\nPR middle-end/38271\n* gcc.dg/torture/pr38271.c: New.\n\nFrom-SVN: r142651", "tree": {"sha": "99930ce8db4d328a4055eff0144cb0036904bb01", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/99930ce8db4d328a4055eff0144cb0036904bb01"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/aee91ff0bdb624e4a90149b035413be2cd1d6db9", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aee91ff0bdb624e4a90149b035413be2cd1d6db9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/aee91ff0bdb624e4a90149b035413be2cd1d6db9", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/aee91ff0bdb624e4a90149b035413be2cd1d6db9/comments", "author": null, "committer": null, "parents": [{"sha": "7ce8451d98680124fe012365631ca51d430e9b40", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/7ce8451d98680124fe012365631ca51d430e9b40", "html_url": "https://github.com/Rust-GCC/gccrs/commit/7ce8451d98680124fe012365631ca51d430e9b40"}], "stats": {"total": 38, "additions": 35, "deletions": 3}, "files": [{"sha": "a32639ef97d749338f0c38b58d6f70f4b1ce0e1b", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=aee91ff0bdb624e4a90149b035413be2cd1d6db9", "patch": "@@ -1,3 +1,9 @@\n+2008-12-10  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR middle-end/38271\n+\t* tree-sra.c (sra_build_bf_assignment): Avoid warnings for\n+\tvariables initialized from SRAed bit fields.\n+\n 2008-12-10  Martin Guy <martinwguy@yahoo.it>\n \n \tPR target/37668"}, {"sha": "4fa8dc2366050ee31f0b2610dcfaa86e25173ff6", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=aee91ff0bdb624e4a90149b035413be2cd1d6db9", "patch": "@@ -1,3 +1,8 @@\n+2008-12-10  Alexandre Oliva  <aoliva@redhat.com>\n+\n+\tPR middle-end/38271\n+\t* gcc.dg/torture/pr38271.c: New.\n+\n 2008-12-10  Ira Rosen  <irar@il.ibm.com>\n \n \tPR tree-optimization/37416"}, {"sha": "2c64a9b34a624e0f04b7f4987ccc0109d42ab266", "filename": "gcc/testsuite/gcc.dg/torture/pr38271.c", "status": "added", "additions": 18, "deletions": 0, "changes": 18, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr38271.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr38271.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.dg%2Ftorture%2Fpr38271.c?ref=aee91ff0bdb624e4a90149b035413be2cd1d6db9", "patch": "@@ -0,0 +1,18 @@\n+/* { dg-do compile } */\n+/* { dg-options \"-Wuninitialized\" } */\n+\n+struct xxx {\n+    short a;\n+    short b;\n+    void *c;\n+};\n+\n+void bar(struct xxx);\n+\n+void foo(struct xxx *p, int i)\n+{\n+  struct xxx s0 = *p;\n+  struct xxx s = s0;\n+  if (s.a) i++;\n+  bar(s);\n+}"}, {"sha": "01c0e121e0035351fc509e20570f25db0e08469f", "filename": "gcc/tree-sra.c", "status": "modified", "additions": 6, "deletions": 3, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2Ftree-sra.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/aee91ff0bdb624e4a90149b035413be2cd1d6db9/gcc%2Ftree-sra.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-sra.c?ref=aee91ff0bdb624e4a90149b035413be2cd1d6db9", "patch": "@@ -2354,14 +2354,17 @@ sra_build_bf_assignment (tree dst, tree src)\n       tmp = var;\n       if (!is_gimple_variable (tmp))\n \ttmp = unshare_expr (var);\n+      else\n+\tTREE_NO_WARNING (var) = true;\n \n       tmp2 = make_rename_temp (utype, \"SR\");\n \n       if (INTEGRAL_TYPE_P (TREE_TYPE (var)))\n-\tstmt = gimple_build_assign (tmp2, fold_convert (utype, tmp));\n+\ttmp = fold_convert (utype, tmp);\n       else\n-\tstmt = gimple_build_assign (tmp2, fold_build1 (VIEW_CONVERT_EXPR,\n-\t\t\t\t\t\t       utype, tmp));\n+\ttmp = fold_build1 (VIEW_CONVERT_EXPR, utype, tmp);\n+\n+      stmt = gimple_build_assign (tmp2, tmp);\n       gimple_seq_add_stmt (&seq, stmt);\n     }\n   else"}]}