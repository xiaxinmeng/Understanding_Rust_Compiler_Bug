{"sha": "590dc23bd01c9645074a265a689b61689c046d67", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NTkwZGMyM2JkMDFjOTY0NTA3NGEyNjVhNjg5YjYxNjg5YzA0NmQ2Nw==", "commit": {"author": {"name": "H.J. Lu", "email": "hjl@gnu.org", "date": "1998-08-30T21:18:37Z"}, "committer": {"name": "Jeff Law", "email": "law@gcc.gnu.org", "date": "1998-08-30T21:18:37Z"}, "message": "Makefile.in (INTERFACE): New, set to 2.\n\nd\n\t* Makefile.in (INTERFACE): New, set to 2.\n\t(ARLIB): Set to libstdc++.a.$(VERSION)\n\t(ARLINK, MARLINK): New macros.\n\t(LIBS): Add $(ARLINK).\n\t($(ARLINK), marlink): New targets.\n\t(install): Don't check $(libsubdir). Handle versioned libraries.\n\t* config/linux.ml (ARLIB, MARLINK, SHLIB, MSHLINK): New macros.\n\t(LIBS): Add marlink $(ARLINK).\n\t* config/aix.ml (ARLIB): Set to libstdc++-ar.a.$(VERSION)\n\t(ARLINK): New macros.\n\t(BUILD_LIBS): Add $(ARLINK).\n\t* config/dec-osf.ml (LIBS): Add $(ARLINK).\n\t* config/elf.ml (LIBS): Likewise.\n\t* config/elfshlibm.ml (LIBS): Likewise.\n\t* config/hpux.ml (LIBS): Likewise.\n\t* config/iris5.ml (LIBS): Likewise.\n\t* config/sol2shm.ml (LIBS): Likewise.\n\t* config/sunos4.ml (LIBS): Likewise.\n\t* configure.in: Use ${topsrcdir}/config.if to put\n\tLIBSTDCXX_INTERFACE, CXX_INTERFACE, LIBC_INTERFACE in\n\t${package_makefile_frag}.\n\nFrom-SVN: r22114", "tree": {"sha": "27c0539168d9ec3467724bc5037192c09633922a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/27c0539168d9ec3467724bc5037192c09633922a"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/590dc23bd01c9645074a265a689b61689c046d67", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/590dc23bd01c9645074a265a689b61689c046d67", "html_url": "https://github.com/Rust-GCC/gccrs/commit/590dc23bd01c9645074a265a689b61689c046d67", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/590dc23bd01c9645074a265a689b61689c046d67/comments", "author": null, "committer": null, "parents": [{"sha": "6882b0807b945a9efb1a57c80328a1b6f18274d9", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/6882b0807b945a9efb1a57c80328a1b6f18274d9", "html_url": "https://github.com/Rust-GCC/gccrs/commit/6882b0807b945a9efb1a57c80328a1b6f18274d9"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "6736c2c9699eefc637702db4f5c11f3058fc5c2d", "filename": "libstdc++/Makefile.in", "status": "modified", "additions": 31, "deletions": 5, "changes": 36, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/590dc23bd01c9645074a265a689b61689c046d67/libstdc%2B%2B%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/590dc23bd01c9645074a265a689b61689c046d67/libstdc%2B%2B%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B%2FMakefile.in?ref=590dc23bd01c9645074a265a689b61689c046d67", "patch": "@@ -15,6 +15,7 @@\n # Software Foundation, 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.\n \n VERSION = 2.9.0\n+INTERFACE = 2\n \n OBJS  = cstringi.o stdexcepti.o cstdlibi.o cmathi.o stlinst.o\n SUBLIBS = $(STAMP)-string $(STAMP)-complx\n@@ -27,7 +28,9 @@ HEADERS= cassert cctype cerrno cfloat ciso646 climits clocale cmath complex \\\n \t memory numeric pthread_alloc queue rope set slist stack utility \\\n \t vector fstream iomanip iostream strstream iosfwd\n \n-ARLIB   = libstdc++.a\n+ARLIB   = libstdc++.a.$(VERSION)\n+ARLINK  = libstdc++.a\n+MARLINK = libstdc++.a.`echo $(VERSION) | sed 's/\\([0-9][.][0-9]\\).*/\\1/'`\n SHLIB   = libstdc++.so.$(VERSION)\n SHARLIB = libstdc++-sh.a\n SHLINK  = libstdc++.so\n@@ -37,7 +40,7 @@ SHDEPS  =\n \n STAMP   = bigstmp\n \n-LIBS    = $(ARLIB)\n+LIBS    = $(ARLIB) $(ARLINK)\n \n #### package, host, target, and site dependent Makefile fragments come in here.\n ##\n@@ -85,6 +88,12 @@ $(ARLIB): stdlist\n \tmv t$(ARLIB) $(ARLIB)\n \t$(RANLIB) $(ARLIB)\n \n+$(ARLINK):\n+\tln -f -s $(ARLIB) $(ARLINK)\n+\n+marlink:\n+\t@$(MAKE) $(MARLINK) \"ARLINK=$(MARLINK)\"\n+\n $(SHLIB): piclist\n \t$(CC) $(LIBCXXFLAGS) $(SHFLAGS) -shared -o $(SHLIB) `cat piclist` $(SHDEPS)\n \n@@ -270,21 +279,38 @@ install:\n \telse true ; \\\n \tfi\n \trootme=`pwd`/ ; export rootme ; \\\n-\tif [ x$(libsubdir) = x ] || [ x$(enable_version_specific_runtime_libs) != xyes ]; then \\\n+\tif [ x$(enable_version_specific_runtime_libs) != xyes ]; then \\\n \t  INSTALLDIR=$(libdir); \\\n \telse \\\n \t  INSTALLDIR=$(libsubdir); \\\n \tfi; \\\n-\trm -f $${INSTALLDIR}$(MULTISUBDIR)/$(SHLINK) ; \\\n+\tINSTALLLINKDIR=$(libsubdir); \\\n+\trm -f $${INSTALLLINKDIR}$(MULTISUBDIR)/$(SHLINK) ; \\\n+\trm -f $${INSTALLLINKDIR}$(MULTISUBDIR)/$(ARLINK) ; \\\n \tfor FILE in $(LIBS) ; do \\\n \t  rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t  if [ $$FILE = $(SHLINK) ] ; then \\\n-\t    ln -f -s $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    if [ -f $${INSTALLDIR}/$(MSHLINK) ]; then \\\n+\t      ln -f -s $${INSTALLDIR}/$(MSHLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    else \\\n+\t      ln -f -s $${INSTALLDIR}/$(SHLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    fi; \\\n+\t  elif [ $$FILE = $(ARLINK) ] ; then \\\n+\t    if [ -f $${INSTALLDIR}/$(MARLINK) ]; then \\\n+\t      ln -f -s $${INSTALLDIR}/$(MARLINK) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    else \\\n+\t      ln -f -s $${INSTALLDIR}/$(ARLIB) $${INSTALLLINKDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    fi; \\\n \t  elif [ $$FILE = mshlink ]; then \\\n \t    for FILE in $(MSHLINK) ; do \\\n \t      rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t      ln -f -s $(SHLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    done; \\\n+\t  elif [ $$FILE = marlink ]; then \\\n+\t    for FILE in $(MARLINK) ; do \\\n+\t      rm -f $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t      ln -f -s $(ARLIB) $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n+\t    done; \\\n \t  elif [ $$FILE = $(SHLIB) ]; then \\\n \t    $(INSTALL_PROGRAM) $$FILE $${INSTALLDIR}$(MULTISUBDIR)/$$FILE ; \\\n \t    : On the HP, shared libraries must be mode 555. ;\\"}]}