{"sha": "92b4cee19af3c822c3757ff69b5cd26ef505b616", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OTJiNGNlZTE5YWYzYzgyMmMzNzU3ZmY2OWI1Y2QyNmVmNTA1YjYxNg==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1992-05-08T18:49:07Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "1992-05-08T18:49:07Z"}, "message": "*** empty log message ***\n\nFrom-SVN: r938", "tree": {"sha": "f4abc2d14ac652cd967e6e7dd2d7492e831c27dd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/f4abc2d14ac652cd967e6e7dd2d7492e831c27dd"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/92b4cee19af3c822c3757ff69b5cd26ef505b616", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92b4cee19af3c822c3757ff69b5cd26ef505b616", "html_url": "https://github.com/Rust-GCC/gccrs/commit/92b4cee19af3c822c3757ff69b5cd26ef505b616", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/92b4cee19af3c822c3757ff69b5cd26ef505b616/comments", "author": null, "committer": null, "parents": [{"sha": "c62f36cfc65facc3a6b5e1f299964e2b4e782669", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c62f36cfc65facc3a6b5e1f299964e2b4e782669", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c62f36cfc65facc3a6b5e1f299964e2b4e782669"}], "stats": {"total": 93, "additions": 49, "deletions": 44}, "files": [{"sha": "4369b293fcce3b599bb16c034bf3d28abdea1f29", "filename": "gcc/config/mips/mips.md", "status": "modified", "additions": 49, "deletions": 44, "changes": 93, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/92b4cee19af3c822c3757ff69b5cd26ef505b616/gcc%2Fconfig%2Fmips%2Fmips.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/92b4cee19af3c822c3757ff69b5cd26ef505b616/gcc%2Fconfig%2Fmips%2Fmips.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fmips%2Fmips.md?ref=92b4cee19af3c822c3757ff69b5cd26ef505b616", "patch": "@@ -315,7 +315,13 @@\n \t\t\t    (match_operand:DI 2 \"arith_operand\" \"\")))\n \t      (clobber (match_dup 3))])]\n   \"!TARGET_DEBUG_G_MODE\"\n-  \"operands[3] = gen_reg_rtx (SImode);\")\n+  \"\n+{\n+  if (GET_CODE (operands[2]) == CONST_INT && INTVAL (operands[2]) == -32768)\n+    operands[2] = force_reg (SImode, operands[2]);\n+\n+  operands[3] = gen_reg_rtx (SImode);\n+}\")\n \n (define_insn \"adddi3_internal_1\"\n   [(set (match_operand:DI 0 \"register_operand\" \"=d,&d\")\n@@ -330,9 +336,9 @@\n     ? \\\"srl\\\\t%3,%L0,31\\;sll\\\\t%M0,%M0,1\\;sll\\\\t%L0,%L1,1\\;addu\\\\t%M0,%M0,%3\\\"\n     : \\\"addu\\\\t%L0,%L1,%L2\\;sltu\\\\t%3,%L0,%L2\\;addu\\\\t%M0,%M1,%M2\\;addu\\\\t%M0,%M0,%3\\\";\n }\"\n-  [(set_attr \"type\"\t\"darith,darith\")\n-   (set_attr \"mode\"\t\"DI,DI\")\n-   (set_attr \"length\"\t\"4,4\")])\n+  [(set_attr \"type\"\t\"darith\")\n+   (set_attr \"mode\"\t\"DI\")\n+   (set_attr \"length\"\t\"4\")])\n \n (define_split\n   [(set (match_operand:DI 0 \"register_operand\" \"\")\n@@ -402,8 +408,8 @@\n    addu\\\\t%L0,%L1,%2\\;sltu\\\\t%3,%L0,%2\\;addu\\\\t%M0,%M1,%3\n    move\\\\t%L0,%L1\\;move\\\\t%M0,%M1\n    subu\\\\t%L0,%L1,%n2\\;sltu\\\\t%3,%L0,%2\\;subu\\\\t%M0,%M1,1\\;addu\\\\t%M0,%M0,%3\"\n-  [(set_attr \"type\"\t\"darith,darith,darith\")\n-   (set_attr \"mode\"\t\"DI,DI,DI\")\n+  [(set_attr \"type\"\t\"darith\")\n+   (set_attr \"mode\"\t\"DI\")\n    (set_attr \"length\"\t\"3,2,4\")])\n \n (define_split\n@@ -578,8 +584,8 @@\n    sltu\\\\t%3,%L1,%2\\;subu\\\\t%L0,%L1,%2\\;subu\\\\t%M0,%M1,%3\n    move\\\\t%L0,%L1\\;move\\\\t%M0,%M1\n    sltu\\\\t%3,%L1,%2\\;subu\\\\t%L0,%L1,%2\\;subu\\\\t%M0,%M1,1\\;subu\\\\t%M0,%M0,%3\"\n-  [(set_attr \"type\"\t\"darith,darith,darith\")\n-   (set_attr \"mode\"\t\"DI,DI,DI\")\n+  [(set_attr \"type\"\t\"darith\")\n+   (set_attr \"mode\"\t\"DI\")\n    (set_attr \"length\"\t\"3,2,4\")])\n \n (define_split\n@@ -1158,7 +1164,7 @@ move\\\\t%0,%z4\\\\n\\\\\n    %[li\\\\t%@,%X2\\;and\\\\t%0,%1,%@%]\n    %[li\\\\t%@,%X2\\;and\\\\t%0,%1,%@%]\"\n   [(set_attr \"type\"\t\"arith,arith,multi,multi\")\n-   (set_attr \"mode\"\t\"SI,SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,1,2,3\")])\n \n (define_insn \"anddi3\"\n@@ -1195,7 +1201,7 @@ move\\\\t%0,%z4\\\\n\\\\\n    %[li\\\\t%@,%X2\\;or\\\\t%0,%1,%@%]\n    %[li\\\\t%@,%X2\\;or\\\\t%0,%1,%@%]\"\n   [(set_attr \"type\"\t\"arith,arith,multi,multi\")\n-   (set_attr \"mode\"\t\"SI,SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,1,2,3\")])\n \n (define_insn \"iordi3\"\n@@ -1232,7 +1238,7 @@ move\\\\t%0,%z4\\\\n\\\\\n    %[li\\\\t%@,%X2\\;xor\\\\t%0,%1,%@%]\n    %[li\\\\t%@,%X2\\;xor\\\\t%0,%1,%@%]\"\n   [(set_attr \"type\"\t\"arith,arith,multi,multi\")\n-   (set_attr \"mode\"\t\"SI,SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,1,2,3\")])\n \n (define_insn \"xordi3\"\n@@ -1299,7 +1305,7 @@ move\\\\t%0,%z4\\\\n\\\\\n     return mips_move_1word (operands, insn, TRUE);\n }\"\n   [(set_attr \"type\"\t\"arith,load,load\")\n-   (set_attr \"mode\"\t\"SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,1,2\")])\n \n (define_insn \"zero_extendqihi2\"\n@@ -1314,7 +1320,7 @@ move\\\\t%0,%z4\\\\n\\\\\n     return mips_move_1word (operands, insn, TRUE);\n }\"\n   [(set_attr \"type\"\t\"arith,load,load\")\n-   (set_attr \"mode\"\t\"HI,HI,HI\")\n+   (set_attr \"mode\"\t\"HI\")\n    (set_attr \"length\"\t\"1,1,2\")])\n \n (define_insn \"zero_extendqisi2\"\n@@ -1329,7 +1335,7 @@ move\\\\t%0,%z4\\\\n\\\\\n     return mips_move_1word (operands, insn, TRUE);\n }\"\n   [(set_attr \"type\"\t\"arith,load,load\")\n-   (set_attr \"mode\"\t\"SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,1,2\")])\n \n \f\n@@ -1374,8 +1380,8 @@ move\\\\t%0,%z4\\\\n\\\\\n \t(sign_extend:SI (match_operand:HI 1 \"memory_operand\" \"R,m\")))]\n   \"\"\n   \"* return mips_move_1word (operands, insn, FALSE);\"\n-  [(set_attr \"type\"\t\"load,load\")\n-   (set_attr \"mode\"\t\"SI,SI\")\n+  [(set_attr \"type\"\t\"load\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,2\")])\n \n (define_expand \"extendqihi2\"\n@@ -1405,8 +1411,8 @@ move\\\\t%0,%z4\\\\n\\\\\n \t(sign_extend:HI (match_operand:QI 1 \"memory_operand\" \"R,m\")))]\n   \"\"\n   \"* return mips_move_1word (operands, insn, FALSE);\"\n-  [(set_attr \"type\"\t\"load,load\")\n-   (set_attr \"mode\"\t\"SI,SI\")\n+  [(set_attr \"type\"\t\"load\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,2\")])\n \n \n@@ -1436,8 +1442,8 @@ move\\\\t%0,%z4\\\\n\\\\\n \t(sign_extend:SI (match_operand:QI 1 \"memory_operand\" \"R,m\")))]\n   \"\"\n   \"* return mips_move_1word (operands, insn, FALSE);\"\n-  [(set_attr \"type\"\t\"load,load\")\n-   (set_attr \"mode\"\t\"SI,SI\")\n+  [(set_attr \"type\"\t\"load\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,2\")])\n \n \n@@ -1479,8 +1485,8 @@ move\\\\t%0,%z4\\\\n\\\\\n   output_asm_insn (mips_move_1word (xoperands, insn, FALSE), xoperands);\n   return \\\"\\\";\n }\"\n-  [(set_attr \"type\"\t\"fcvt,fcvt,fcvt,fcvt\")\n-   (set_attr \"mode\"\t\"DF,DF,DF,DF\")\n+  [(set_attr \"type\"\t\"fcvt\")\n+   (set_attr \"mode\"\t\"DF\")\n    (set_attr \"length\"\t\"14,12,13,14\")])\n \n \n@@ -1518,8 +1524,8 @@ move\\\\t%0,%z4\\\\n\\\\\n   output_asm_insn (mips_move_1word (xoperands, insn, FALSE), xoperands);\n   return \\\"\\\";\n }\"\n-  [(set_attr \"type\"\t\"fcvt,fcvt,fcvt,fcvt\")\n-   (set_attr \"mode\"\t\"SF,SF,SF,SF\")\n+  [(set_attr \"type\"\t\"fcvt\")\n+   (set_attr \"mode\"\t\"SF\")\n    (set_attr \"length\"\t\"14,12,13,14\")])\n \n \n@@ -1550,8 +1556,8 @@ move\\\\t%0,%z4\\\\n\\\\\n \n   return \\\"mtc1\\\\t%1,%0%#\\;cvt.d.w\\\\t%0,%0\\\";\n }\"\n-  [(set_attr \"type\"\t\"fcvt,fcvt,fcvt\")\n-   (set_attr \"mode\"\t\"DF,DF,DF\")\n+  [(set_attr \"type\"\t\"fcvt\")\n+   (set_attr \"mode\"\t\"DF\")\n    (set_attr \"length\"\t\"3,4,3\")])\n \n (define_insn \"floatsisf2\"\n@@ -1566,8 +1572,8 @@ move\\\\t%0,%z4\\\\n\\\\\n \n   return \\\"mtc1\\\\t%1,%0%#\\;cvt.s.w\\\\t%0,%0\\\";\n }\"\n-  [(set_attr \"type\"\t\"fcvt,fcvt,fcvt\")\n-   (set_attr \"mode\"\t\"SF,SF,SF\")\n+  [(set_attr \"type\"\t\"fcvt\")\n+   (set_attr \"mode\"\t\"SF\")\n    (set_attr \"length\"\t\"3,4,3\")])\n \n \n@@ -1673,7 +1679,6 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"\n {\n-  extern rtx force_reg ();\n   extern rtx gen_movsi_ulw ();\n   extern rtx gen_movsi ();\n \n@@ -1751,7 +1756,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   return mips_fill_delay_slot (ret, DELAY_LOAD, operands, insn);\n }\"\n   [(set_attr \"type\"\t\"load,load,move,arith\")\n-   (set_attr \"mode\"\t\"SI,SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"2,4,1,2\")])\n \n (define_insn \"movsi_usw\"\n@@ -1789,8 +1794,8 @@ move\\\\t%0,%z4\\\\n\\\\\n \n   return \\\"usw\\\\t%z1,%0\\\";\n }\"\n-  [(set_attr \"type\"\t\"store,store\")\n-   (set_attr \"mode\"\t\"SI,SI\")\n+  [(set_attr \"type\"\t\"store\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"2,4\")])\n \n ;; 64-bit integer moves\n@@ -1805,7 +1810,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"* return mips_move_2words (operands, insn); \"\n   [(set_attr \"type\"\t\"move,arith,load,load,store,store,hilo,hilo\")\n-   (set_attr \"mode\"\t\"DI,DI,DI,DI,DI,DI,DI,DI\")\n+   (set_attr \"mode\"\t\"DI\")\n    (set_attr \"length\"\t\"2,4,2,4,2,4,2,2\")])\n \n (define_split\n@@ -1870,7 +1875,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"* return mips_move_1word (operands, insn, TRUE);\"\n   [(set_attr \"type\"\t\"move,pic,arith,arith,load,load,store,store,xfer,xfer,move,load,load,store,store,hilo,hilo\")\n-   (set_attr \"mode\"\t\"SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI,SI\")\n+   (set_attr \"mode\"\t\"SI\")\n    (set_attr \"length\"\t\"1,4,1,2,1,2,1,2,1,1,1,1,2,1,2,1,1\")])\n \n ;; 16-bit Integer moves\n@@ -1886,7 +1891,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"* return mips_move_1word (operands, insn, TRUE);\"\n   [(set_attr \"type\"\t\"move,arith,load,load,store,store,xfer,xfer,move,hilo,hilo\")\n-   (set_attr \"mode\"\t\"HI,HI,HI,HI,HI,HI,HI,HI,HI,HI,HI\")\n+   (set_attr \"mode\"\t\"HI\")\n    (set_attr \"length\"\t\"1,1,1,2,1,2,1,1,1,1,1\")])\n \n ;; 8-bit Integer moves\n@@ -1902,7 +1907,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"* return mips_move_1word (operands, insn, TRUE);\"\n   [(set_attr \"type\"\t\"move,arith,load,load,store,store,xfer,xfer,move,hilo,hilo\")\n-   (set_attr \"mode\"\t\"QI,QI,QI,QI,QI,QI,QI,QI,QI,QI,QI\")\n+   (set_attr \"mode\"\t\"QI\")\n    (set_attr \"length\"\t\"1,1,1,2,1,2,1,1,1,1,1\")])\n \n \n@@ -1914,7 +1919,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"* return mips_move_1word (operands, insn, FALSE);\"\n   [(set_attr \"type\"\t\"move,xfer,load,load,store,store,xfer,xfer,move,load,load,store,store\")\n-   (set_attr \"mode\"\t\"SF,SF,SF,SF,SF,SF,SF,SF,SF,SF,SF,SF,SF\")\n+   (set_attr \"mode\"\t\"SF\")\n    (set_attr \"length\"\t\"1,1,1,2,1,2,1,1,1,1,2,1,2\")])\n \n ;; 64-bit floating point moves\n@@ -1925,7 +1930,7 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"\"\n   \"* return mips_move_2words (operands, insn); \"\n   [(set_attr \"type\"\t\"move,load,load,store,store,load,xfer,xfer,move,load,load,store,store\")\n-   (set_attr \"mode\"\t\"DF,DF,DF,DF,DF,DF,DF,DF,DF,DF,DF,DF,DF\")\n+   (set_attr \"mode\"\t\"DF\")\n    (set_attr \"length\"\t\"1,2,4,2,4,4,2,2,2,2,4,2,4\")])\n \n (define_split\n@@ -3127,9 +3132,9 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"@\n    xor\\\\t%0,%1,%2\\;sltu\\\\t%0,%0,1\n    xori\\\\t%0,%1,%2\\;sltu\\\\t%0,%0,1\"\n- [(set_attr \"type\"\t\"arith,arith\")\n-   (set_attr \"mode\"\t\"SI,SI\")\n-   (set_attr \"length\"\t\"2,2\")])\n+ [(set_attr \"type\"\t\"arith\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"2\")])\n \n (define_split\n   [(set (match_operand:SI 0 \"register_operand\" \"\")\n@@ -3191,9 +3196,9 @@ move\\\\t%0,%z4\\\\n\\\\\n   \"@\n     xor\\\\t%0,%1,%2\\;sltu\\\\t%0,%.,%0\n     xori\\\\t%0,%1,%x2\\;sltu\\\\t%0,%.,%0\"\n- [(set_attr \"type\"\t\"arith,arith\")\n-   (set_attr \"mode\"\t\"SI,SI\")\n-   (set_attr \"length\"\t\"2,2\")])\n+ [(set_attr \"type\"\t\"arith\")\n+   (set_attr \"mode\"\t\"SI\")\n+   (set_attr \"length\"\t\"2\")])\n \n (define_split\n   [(set (match_operand:SI 0 \"register_operand\" \"\")"}]}