{"sha": "01abf342f82f9db810b16e139fd15986afc75168", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6MDFhYmYzNDJmODJmOWRiODEwYjE2ZTEzOWZkMTU5ODZhZmM3NTE2OA==", "commit": {"author": {"name": "Bob Wilson", "email": "bob.wilson@acm.org", "date": "2002-09-04T16:22:51Z"}, "committer": {"name": "Bob Wilson", "email": "bwilson@gcc.gnu.org", "date": "2002-09-04T16:22:51Z"}, "message": "elf.h (TARGET_SECTION_TYPE_FLAGS): Define to xtensa_multibss_section_type_flags.\n\n        * config/xtensa/elf.h (TARGET_SECTION_TYPE_FLAGS): Define to\n        xtensa_multibss_section_type_flags.\n        * config/xtensa/xtensa.c (xtensa_multibss_section_type_flags): Define.\n\nFrom-SVN: r56797", "tree": {"sha": "c1421f79baacb61a40a46c6629d7c574038fec70", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/c1421f79baacb61a40a46c6629d7c574038fec70"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/01abf342f82f9db810b16e139fd15986afc75168", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01abf342f82f9db810b16e139fd15986afc75168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/01abf342f82f9db810b16e139fd15986afc75168", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/01abf342f82f9db810b16e139fd15986afc75168/comments", "author": null, "committer": null, "parents": [{"sha": "cd42d3df16374d1efef9ca9490122c0ef9ed20fd", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cd42d3df16374d1efef9ca9490122c0ef9ed20fd", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cd42d3df16374d1efef9ca9490122c0ef9ed20fd"}], "stats": {"total": 42, "additions": 40, "deletions": 2}, "files": [{"sha": "dc248d883521d0cd266a8422314db2e1dc9596d3", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01abf342f82f9db810b16e139fd15986afc75168/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01abf342f82f9db810b16e139fd15986afc75168/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=01abf342f82f9db810b16e139fd15986afc75168", "patch": "@@ -1,3 +1,9 @@\n+2002-09-04  Bob Wilson  <bob.wilson@acm.org>\n+\n+\t* config/xtensa/elf.h (TARGET_SECTION_TYPE_FLAGS): Define to\n+\txtensa_multibss_section_type_flags.\n+\t* config/xtensa/xtensa.c (xtensa_multibss_section_type_flags): Define.\n+\n 2002-09-04  Richard Henderson  <rth@redhat.com>\n \n \t* doc/install-old.texi: Don't mention enquire."}, {"sha": "866c463c8dd86c4eb800272785bfb157e2ea96e2", "filename": "gcc/config/xtensa/elf.h", "status": "modified", "additions": 2, "deletions": 0, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01abf342f82f9db810b16e139fd15986afc75168/gcc%2Fconfig%2Fxtensa%2Felf.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01abf342f82f9db810b16e139fd15986afc75168/gcc%2Fconfig%2Fxtensa%2Felf.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Felf.h?ref=01abf342f82f9db810b16e139fd15986afc75168", "patch": "@@ -24,6 +24,8 @@ Software Foundation, 59 Temple Place - Suite 330, Boston, MA\n     builtin_define (\"__ELF__\");\t\t\t\t\t\\\n   } while (0)\n \n+#define TARGET_SECTION_TYPE_FLAGS xtensa_multibss_section_type_flags\n+\n /* Don't assume anything about the header files. */\n #define NO_IMPLICIT_EXTERN_C\n "}, {"sha": "7b3ece1398f400a9175e1073b7f1979902cbaeec", "filename": "gcc/config/xtensa/xtensa.c", "status": "modified", "additions": 32, "deletions": 2, "changes": 34, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/01abf342f82f9db810b16e139fd15986afc75168/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/01abf342f82f9db810b16e139fd15986afc75168/gcc%2Fconfig%2Fxtensa%2Fxtensa.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Fxtensa%2Fxtensa.c?ref=01abf342f82f9db810b16e139fd15986afc75168", "patch": "@@ -197,8 +197,10 @@ static rtx fixup_subreg_mem PARAMS ((rtx x));\n static enum machine_mode xtensa_find_mode_for_size PARAMS ((unsigned));\n static struct machine_function * xtensa_init_machine_status PARAMS ((void));\n static void printx PARAMS ((FILE *, signed int));\n-static void xtensa_select_rtx_section PARAMS ((enum machine_mode, rtx,\n-\t\t\t\t\t       unsigned HOST_WIDE_INT));\n+static unsigned int xtensa_multibss_section_type_flags\n+  PARAMS ((tree, const char *, int));\n+static void xtensa_select_rtx_section\n+  PARAMS ((enum machine_mode, rtx, unsigned HOST_WIDE_INT));\n static void xtensa_encode_section_info PARAMS ((tree, int));\n \n static rtx frame_size_const;\n@@ -2746,6 +2748,34 @@ a7_overlap_mentioned_p (x)\n   return 0;\n }\n \n+\n+/* Some Xtensa targets support multiple bss sections.  If the section\n+   name ends with \".bss\", add SECTION_BSS to the flags.  */\n+\n+static unsigned int\n+xtensa_multibss_section_type_flags (decl, name, reloc)\n+     tree decl;\n+     const char *name;\n+     int reloc;\n+{\n+  unsigned int flags = default_section_type_flags (decl, name, reloc);\n+  const char *suffix;\n+\n+  suffix = strrchr (name, '.');\n+  if (suffix && strcmp (suffix, \".bss\") == 0)\n+    {\n+      if (!decl || (TREE_CODE (decl) == VAR_DECL\n+\t\t    && DECL_INITIAL (decl) == NULL_TREE))\n+\tflags |= SECTION_BSS;  /* @nobits */\n+      else\n+\twarning (\"only uninitialized variables can be placed in a \"\n+\t\t \".bss section\");\n+    }\n+\n+  return flags;\n+}\n+\n+\n /* The literal pool stays with the function.  */\n \n static void"}]}