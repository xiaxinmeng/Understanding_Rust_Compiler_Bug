{"sha": "5ec582f9383cbdc56e12a9826839f1874fc34d6f", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NWVjNTgyZjkzODNjYmRjNTZlMTJhOTgyNjgzOWYxODc0ZmMzNGQ2Zg==", "commit": {"author": {"name": "Nicola Pero", "email": "nicola.pero@meta-innovation.com", "date": "2010-12-19T01:29:09Z"}, "committer": {"name": "Nicola Pero", "email": "nicola@gcc.gnu.org", "date": "2010-12-19T01:29:09Z"}, "message": "In gcc/testsuite/: 2010-12-19 Nicola Pero <nicola.pero@meta-innovation.com>\n\nIn gcc/testsuite/:\n2010-12-19  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n\t* objc.dg/gnu-api-2-resolve-method.m: Include objc/message.h.\n\t* obj-c++.dg/gnu-api-2-resolve-method.m: Include objc/message.h.\n\nIn libobjc/:\n2010-12-19  Nicola Pero  <nicola.pero@meta-innovation.com>\n\n\t* Makefile.in (OBJC_DEPRECATED_H): Added objc_msg_sendv.h.\n\t* objc/deprecated/objc_msg_sendv.h: New.\n\t* objc/message.h: Do not define retval_t, apply_t, arglist,\n\targlist_t, objc_msg_sendv, now in\n\tobjc/deprecated/objc_msg_sendv.h.\n\t* objc/objc.h: Do not include message.h; include\n\tobjc/deprecated/objc_msg_sendv.h instead.  Tidied up comments.\n\t* sendmsg.c: Include objc/message.h.\n\t* thr.c: Include objc/message.h.\n\nFrom-SVN: r168042", "tree": {"sha": "462247c43c060a7636dfaee091ca5f760c1a6231", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/462247c43c060a7636dfaee091ca5f760c1a6231"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/5ec582f9383cbdc56e12a9826839f1874fc34d6f", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ec582f9383cbdc56e12a9826839f1874fc34d6f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/5ec582f9383cbdc56e12a9826839f1874fc34d6f", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/5ec582f9383cbdc56e12a9826839f1874fc34d6f/comments", "author": {"login": "Nico-31415", "id": 94470564, "node_id": "U_kgDOBaGBpA", "avatar_url": "https://avatars.githubusercontent.com/u/94470564?v=4", "gravatar_id": "", "url": "https://api.github.com/users/Nico-31415", "html_url": "https://github.com/Nico-31415", "followers_url": "https://api.github.com/users/Nico-31415/followers", "following_url": "https://api.github.com/users/Nico-31415/following{/other_user}", "gists_url": "https://api.github.com/users/Nico-31415/gists{/gist_id}", "starred_url": "https://api.github.com/users/Nico-31415/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/Nico-31415/subscriptions", "organizations_url": "https://api.github.com/users/Nico-31415/orgs", "repos_url": "https://api.github.com/users/Nico-31415/repos", "events_url": "https://api.github.com/users/Nico-31415/events{/privacy}", "received_events_url": "https://api.github.com/users/Nico-31415/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "805a07f15ebd51826f22cc41c6e98f1bc72e8774", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/805a07f15ebd51826f22cc41c6e98f1bc72e8774", "html_url": "https://github.com/Rust-GCC/gccrs/commit/805a07f15ebd51826f22cc41c6e98f1bc72e8774"}], "stats": {"total": 134, "additions": 76, "deletions": 58}, "files": [{"sha": "6f30e61b1747528be054ed86b506d734310c7a08", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -1,3 +1,8 @@\n+2010-12-19  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* objc.dg/gnu-api-2-resolve-method.m: Include objc/message.h.\n+\t* obj-c++.dg/gnu-api-2-resolve-method.m: Include objc/message.h.\n+\n 2010-12-18  Jakub Jelinek  <jakub@redhat.com>\n \n \tPR tree-optimization/46969"}, {"sha": "f8a54d392c3ec132341326c705ba02c5b050782f", "filename": "gcc/testsuite/obj-c++.dg/gnu-api-2-resolve-method.mm", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-api-2-resolve-method.mm", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-api-2-resolve-method.mm", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobj-c%2B%2B.dg%2Fgnu-api-2-resolve-method.mm?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -9,6 +9,10 @@\n /* To get the modern GNU Objective-C Runtime API, you include\n    objc/runtime.h.  */\n #include <objc/runtime.h>\n+\n+/* For __objc_msg_forward2.  */\n+#include <objc/message.h>\n+\n #include <stdlib.h>\n #include <iostream>\n #include <cstring>"}, {"sha": "a387709908cf7c08ffc66cea0caa9820b9a291e3", "filename": "gcc/testsuite/objc.dg/gnu-api-2-resolve-method.m", "status": "modified", "additions": 4, "deletions": 0, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-api-2-resolve-method.m", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-api-2-resolve-method.m", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fobjc.dg%2Fgnu-api-2-resolve-method.m?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -9,6 +9,10 @@\n /* To get the modern GNU Objective-C Runtime API, you include\n    objc/runtime.h.  */\n #include <objc/runtime.h>\n+\n+/* For __objc_msg_forward2.  */\n+#include <objc/message.h>\n+\n #include <stdlib.h>\n #include <stdio.h>\n #include <string.h>"}, {"sha": "dd0769029c8208fac23e56f2f8ef18d128d944b1", "filename": "libobjc/ChangeLog", "status": "modified", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FChangeLog?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -1,3 +1,15 @@\n+2010-12-19  Nicola Pero  <nicola.pero@meta-innovation.com>\n+\n+\t* Makefile.in (OBJC_DEPRECATED_H): Added objc_msg_sendv.h.\n+\t* objc/deprecated/objc_msg_sendv.h: New.\n+\t* objc/message.h: Do not define retval_t, apply_t, arglist,\n+\targlist_t, objc_msg_sendv, now in\n+\tobjc/deprecated/objc_msg_sendv.h.\n+\t* objc/objc.h: Do not include message.h; include\n+\tobjc/deprecated/objc_msg_sendv.h instead.  Tidied up comments.\n+\t* sendmsg.c: Include objc/message.h.\n+\t* thr.c: Include objc/message.h.\n+\t\n 2010-12-19  Nicola Pero  <nicola.pero@meta-innovation.com>\n \n \t* objc/objc-exception.h: Include objc-decls.h.  Mark all"}, {"sha": "c519542e0726608dc5cd4bbc8513e3b5291f15bd", "filename": "libobjc/Makefile.in", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2FMakefile.in", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2FMakefile.in", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2FMakefile.in?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -142,6 +142,7 @@ OBJC_DEPRECATED_H = \\\n   objc_error.h \\\n   objc_get_uninstalled_dtable.h \\\n   objc_malloc.h \\\n+  objc_msg_sendv.h \\\n   objc_object_alloc.h \\\n   objc_unexpected_exception.h \\\n   objc_valloc.h \\"}, {"sha": "825d9a7661223cb6142233ec50f3db912661e8a5", "filename": "libobjc/objc/deprecated/objc_msg_sendv.h", "status": "added", "additions": 12, "deletions": 0, "changes": 12, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fobjc%2Fdeprecated%2Fobjc_msg_sendv.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fobjc%2Fdeprecated%2Fobjc_msg_sendv.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fobjc%2Fdeprecated%2Fobjc_msg_sendv.h?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -0,0 +1,12 @@\n+/* The following types and functions are provided only for\n+   backwards-compatibility and should not be used in new code.  They\n+   were deprecated in GCC 4.6 and will be removed in the next\n+   release.  */\n+typedef void* retval_t;\t\t/* return value */\n+typedef void(*apply_t)(void);\t/* function pointer */\n+typedef union arglist {\n+  char *arg_ptr;\n+  char arg_regs[sizeof (char*)];\n+} *arglist_t;\t\t        /* argument frame */\n+\n+objc_EXPORT retval_t objc_msg_sendv(id, SEL, arglist_t);"}, {"sha": "9d5e6d8e657f338a6a99b7d8511123d142262479", "filename": "libobjc/objc/message.h", "status": "modified", "additions": 0, "deletions": 14, "changes": 14, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fobjc%2Fmessage.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fobjc%2Fmessage.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fobjc%2Fmessage.h?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -137,20 +137,6 @@ objc_EXPORT IMP objc_msg_lookup_super (struct objc_super *super, SEL sel);\n objc_EXPORT IMP (*__objc_msg_forward)(SEL);\n objc_EXPORT IMP (*__objc_msg_forward2)(id, SEL);\n \n-\n-/* The following types and functions are provided only for\n-   backwards-compatibility and should not be used in new code.  They\n-   were deprecated in GCC 4.6 and will be removed in the next\n-   release.  */\n-typedef void* retval_t;\t\t/* return value */\n-typedef void(*apply_t)(void);\t/* function pointer */\n-typedef union arglist {\n-  char *arg_ptr;\n-  char arg_regs[sizeof (char*)];\n-} *arglist_t;\t\t        /* argument frame */\n-\n-objc_EXPORT retval_t objc_msg_sendv(id, SEL, arglist_t);\n-\n #ifdef __cplusplus\n }\n #endif"}, {"sha": "ece0f88410500f66128140dd8efce1631df7daa8", "filename": "libobjc/objc/objc.h", "status": "modified", "additions": 36, "deletions": 44, "changes": 80, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fobjc%2Fobjc.h", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fobjc%2Fobjc.h", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fobjc%2Fobjc.h?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -28,34 +28,35 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n \n /* This file contains the definition of the basic types used by the\n    Objective-C language.  It needs to be included to do almost\n-   anything with Objective-C.\n-*/\n+   anything with Objective-C.  */\n \n #ifdef __cplusplus\n extern \"C\" {\n #endif\n \n #include <stddef.h>\n \n+/* objc-decls.h is included because deprecated/objc_msg_sendv.h needs\n+   it.  When that goes away, the include of objc-decls.h should be\n+   removed.  */\n+#include \"objc-decls.h\"\n+\n /* The current version of the GNU Objective-C Runtime library in\n    compressed ISO date format.  This should be updated any time a new\n    version is released with changes to the public API (there is no\n    need to update it if there were no API changes since the previous\n    release).  This macro is only defined starting with the GNU\n    Objective-C Runtime shipped with GCC 4.6.0.  If it is not defined,\n-   it is either an older version of the runtime, or another runtime.\n-*/\n+   it is either an older version of the runtime, or another runtime.  */\n #define __GNU_LIBOBJC__ 20100911\n \n-/*\n-  Definition of the boolean type.\n+/* Definition of the boolean type.\n \n-  Compatibility note: the Apple/NeXT runtime defines a BOOL as a\n-  'signed char'.  The GNU runtime uses an 'unsigned char'.\n+   Compatibility note: the Apple/NeXT runtime defines a BOOL as a\n+   'signed char'.  The GNU runtime uses an 'unsigned char'.\n \n-  Important: this could change and we could switch to 'typedef bool\n-  BOOL' in the future.  Do not depend on the type of BOOL.\n-*/\n+   Important: this could change and we could switch to 'typedef bool\n+   BOOL' in the future.  Do not depend on the type of BOOL.  */\n #undef BOOL\n typedef unsigned char  BOOL;\n \n@@ -65,58 +66,52 @@ typedef unsigned char  BOOL;\n /* The basic Objective-C types (SEL, Class, id) are defined as pointer\n    to opaque structures.  The details of the structures are private to\n    the runtime and may potentially change from one version to the\n-   other.\n-*/\n+   other.  */\n \n /* A SEL (selector) represents an abstract method (in the\n    object-oriented sense) and includes all the details of how to\n    invoke the method (which means its name, arguments and return\n    types) but provides no implementation of its own.  You can check\n    whether a class implements a selector or not, and if you have a\n    selector and know that the class implements it, you can use it to\n-   call the method for an object in the class.\n- */\n+   call the method for an object in the class.  */\n typedef const struct objc_selector *SEL;\n #include \"deprecated/struct_objc_selector.h\"\n \n /* A Class is a class (in the object-oriented sense).  In Objective-C\n    there is the complication that each Class is an object itself, and\n    so belongs to a class too.  This class that a class belongs to is\n-   called its 'meta class'.\n-*/\n+   called its 'meta class'.  */\n typedef struct objc_class *Class;\n #include \"deprecated/MetaClass.h\"\n #include \"deprecated/struct_objc_class.h\"\n \n /* An 'id' is an object of an unknown class.  The way the object data\n    is stored inside the object is private and what you see here is\n    only the beginning of the actual struct.  The first field is always\n-   a pointer to the Class that the object belongs to.\n-*/\n+   a pointer to the Class that the object belongs to.  */\n typedef struct objc_object\n {\n   /* 'class_pointer' is the Class that the object belongs to.  In case\n      of a Class object, this pointer points to the meta class.\n \n      Compatibility Note: The Apple/NeXT runtime calls this field\n-     'isa'.  To access this field in a portable way, use\n-     object_getClass() from runtime.h, which is an inline function so\n-     does not add any overhead.  */\n+     'isa'.  To access this field, use object_getClass() from\n+     runtime.h, which is an inline function so does not add any\n+     overhead and is also portable to other runtimes.  */\n   Class class_pointer;\n } *id;\n \n-/*\n-  'IMP' is a C function that implements a method.  When retrieving the\n-  implementation of a method from the runtime, this is the type of the\n-  pointer returned.  The idea of the definition of IMP is to represent\n-  a 'pointer to a general function taking an id, a SEL, followed by\n-  other unspecified arguments'.  You must always cast an IMP to a\n-  pointer to a function taking the appropriate, specific types for\n-  that function, before calling it - to make sure the appropriate\n-  arguments are passed to it.  The code generated by the compiler to\n-  perform method calls automatically does this cast inside method\n-  calls.\n-*/\n+/* 'IMP' is a C function that implements a method.  When retrieving\n+   the implementation of a method from the runtime, this is the type\n+   of the pointer returned.  The idea of the definition of IMP is to\n+   represent a 'pointer to a general function taking an id, a SEL,\n+   followed by other unspecified arguments'.  You must always cast an\n+   IMP to a pointer to a function taking the appropriate, specific\n+   types for that function, before calling it - to make sure the\n+   appropriate arguments are passed to it.  The code generated by the\n+   compiler to perform method calls automatically does this cast\n+   inside method calls.  */\n typedef id (*IMP)(id, SEL, ...); \n \n /* 'nil' is the null object.  Messages to nil do nothing and always\n@@ -135,21 +130,18 @@ typedef id (*IMP)(id, SEL, ...);\n /* TODO: Move the 'Protocol' declaration into objc/runtime.h.  A\n    Protocol is simply an object, not a basic Objective-C type.  The\n    Apple runtime defines Protocol in objc/runtime.h too, so it's good\n-   to move it there for API compatibility.\n-*/\n+   to move it there for API compatibility.  */\n \n /* A 'Protocol' is a formally defined list of selectors (normally\n    created using the @protocol Objective-C syntax).  It is mostly used\n    at compile-time to check that classes implement all the methods\n    that they are supposed to.  Protocols are also available in the\n-   runtime system as Protocol objects.\n- */\n+   runtime system as Protocol objects.  */\n #ifndef __OBJC__\n   /* Once we stop including the deprecated struct_objc_protocol.h\n      there is no reason to even define a 'struct objc_protocol'.  As\n      all the structure details will be hidden, a Protocol basically is\n-     simply an object (as it should be).\n-   */\n+     simply an object (as it should be).  */\n   /* typedef struct objc_object Protocol; */\n   #include \"deprecated/struct_objc_protocol.h\"\n #else /* __OBJC__ */\n@@ -158,17 +150,17 @@ typedef id (*IMP)(id, SEL, ...);\n \n /* Deprecated include - here temporarily, for backwards-compatibility\n    as reval_t, apply_t, arglist_t and objc_msg_lookup() used to be\n-   defined here.  */\n-#include \"message.h\"\n+   defined here.  objc_msg_lookup() is now defined in message.h,\n+   included by objc-api.h or runtime.h.  */\n+#include \"deprecated/objc_msg_sendv.h\"\n \n /* Compatibility note: the Apple/NeXT runtime defines sel_getName(),\n    sel_registerName(), object_getClassName(), object_getIndexedIvars()\n    in this file while the GNU runtime defines them in runtime.h.\n \n    The reason the GNU runtime does not define them here is that they\n    are not basic Objective-C types (defined in this file), but are\n-   part of the runtime API (defined in runtime.h).\n-*/\n+   part of the runtime API (defined in runtime.h).  */\n \n #ifdef __cplusplus\n }"}, {"sha": "e41a190eb373c76dc0a0f015a78deeb70caf8dc2", "filename": "libobjc/sendmsg.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fsendmsg.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fsendmsg.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fsendmsg.c?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -34,6 +34,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #include \"coretypes.h\"\n #include \"tm.h\"\n #include \"objc/runtime.h\"\n+#include \"objc/message.h\"          /* For objc_msg_lookup(), objc_msg_lookup_super().  */\n #include \"objc/thr.h\"\n #include \"objc-private/module-abi-8.h\"\n #include \"objc-private/runtime.h\""}, {"sha": "3f7e5c525fae33f892af88acbd1dc4562595f83d", "filename": "libobjc/thr.c", "status": "modified", "additions": 1, "deletions": 0, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fthr.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/5ec582f9383cbdc56e12a9826839f1874fc34d6f/libobjc%2Fthr.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libobjc%2Fthr.c?ref=5ec582f9383cbdc56e12a9826839f1874fc34d6f", "patch": "@@ -38,6 +38,7 @@ see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see\n #include \"tm.h\"\n #include \"defaults.h\"\n #include \"objc/thr.h\"\n+#include \"objc/message.h\" /* For objc_msg_lookup().  */\n #include \"objc/runtime.h\"\n #include \"objc-private/runtime.h\"\n #include <gthr.h>"}]}