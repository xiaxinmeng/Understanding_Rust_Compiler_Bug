{"sha": "b7597ae57977ff3d4ff359141a471acf22001f92", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Yjc1OTdhZTU3OTc3ZmYzZDRmZjM1OTE0MWE0NzFhY2YyMjAwMWY5Mg==", "commit": {"author": {"name": "Martin Liska", "email": "mliska@suse.cz", "date": "2016-08-09T21:03:39Z"}, "committer": {"name": "Martin Liska", "email": "marxin@gcc.gnu.org", "date": "2016-08-09T21:03:39Z"}, "message": "Add tests for __gcov_dump and __gcov_reset\n\n\t* g++.dg/gcov/gcov-dump-1.C: New test.\n\t* g++.dg/gcov/gcov-dump-2.C: New test.\n\nFrom-SVN: r239308", "tree": {"sha": "233f833b664d5e30ca1345399a7fe1337efc56c5", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/233f833b664d5e30ca1345399a7fe1337efc56c5"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/b7597ae57977ff3d4ff359141a471acf22001f92", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7597ae57977ff3d4ff359141a471acf22001f92", "html_url": "https://github.com/Rust-GCC/gccrs/commit/b7597ae57977ff3d4ff359141a471acf22001f92", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/b7597ae57977ff3d4ff359141a471acf22001f92/comments", "author": {"login": "marxin", "id": 2658545, "node_id": "MDQ6VXNlcjI2NTg1NDU=", "avatar_url": "https://avatars.githubusercontent.com/u/2658545?v=4", "gravatar_id": "", "url": "https://api.github.com/users/marxin", "html_url": "https://github.com/marxin", "followers_url": "https://api.github.com/users/marxin/followers", "following_url": "https://api.github.com/users/marxin/following{/other_user}", "gists_url": "https://api.github.com/users/marxin/gists{/gist_id}", "starred_url": "https://api.github.com/users/marxin/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/marxin/subscriptions", "organizations_url": "https://api.github.com/users/marxin/orgs", "repos_url": "https://api.github.com/users/marxin/repos", "events_url": "https://api.github.com/users/marxin/events{/privacy}", "received_events_url": "https://api.github.com/users/marxin/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "e0c8eebff7810f5ca52a884006c6bc681820144d", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e0c8eebff7810f5ca52a884006c6bc681820144d", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e0c8eebff7810f5ca52a884006c6bc681820144d"}], "stats": {"total": 60, "additions": 60, "deletions": 0}, "files": [{"sha": "f1465e878b98485d0163d79f5683465c7b469d5d", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7597ae57977ff3d4ff359141a471acf22001f92/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7597ae57977ff3d4ff359141a471acf22001f92/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=b7597ae57977ff3d4ff359141a471acf22001f92", "patch": "@@ -1,3 +1,8 @@\n+2016-08-09  Martin Liska  <mliska@suse.cz>\n+\n+\t* g++.dg/gcov/gcov-dump-1.C: New test.\n+\t* g++.dg/gcov/gcov-dump-2.C: New test.\n+\n 2016-08-09  Martin Liska  <mliska@suse.cz>\n \n \t* gcc.dg/tree-prof/val-prof-9.c: New test."}, {"sha": "f0e81e9b042549b028581f9ab50632a3d31c8e93", "filename": "gcc/testsuite/g++.dg/gcov/gcov-dump-1.C", "status": "added", "additions": 23, "deletions": 0, "changes": 23, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7597ae57977ff3d4ff359141a471acf22001f92/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-dump-1.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7597ae57977ff3d4ff359141a471acf22001f92/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-dump-1.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-dump-1.C?ref=b7597ae57977ff3d4ff359141a471acf22001f92", "patch": "@@ -0,0 +1,23 @@\n+/* { dg-options \"-fprofile-generate -ftest-coverage -lgcov\" } */\n+/* { dg-do run { target native } } */\n+\n+int value;\n+\n+extern \"C\" { void __gcov_dump(void); }\n+\n+int main(int argc, char **argv)\n+{\n+  value = 123;\t\t\t\t\t/* count(1) */\n+\n+  for (unsigned i = 0; i < 100; i++)\n+    value += argc;\t\t\t\t/* count(100) */\n+\n+  __gcov_dump();\n+\n+  for (unsigned i = 0; i < 1000; i++)\t\t/* count(#####) */\n+    value += argc;\n+\n+  return 0;\t\t\t\t\t/* count(#####) */\n+}\n+\n+/* { dg-final { run-gcov gcov-dump-1.C } } */"}, {"sha": "6234a81a58687204c4bbf86f2f8696a3f470c01c", "filename": "gcc/testsuite/g++.dg/gcov/gcov-dump-2.C", "status": "added", "additions": 32, "deletions": 0, "changes": 32, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/b7597ae57977ff3d4ff359141a471acf22001f92/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-dump-2.C", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/b7597ae57977ff3d4ff359141a471acf22001f92/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-dump-2.C", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fg%2B%2B.dg%2Fgcov%2Fgcov-dump-2.C?ref=b7597ae57977ff3d4ff359141a471acf22001f92", "patch": "@@ -0,0 +1,32 @@\n+/* { dg-options \"-fprofile-generate -ftest-coverage -lgcov\" } */\n+/* { dg-do run { target native } } */\n+\n+int value;\n+\n+extern \"C\"\n+{\n+  void __gcov_dump(void);\n+  void __gcov_reset(void);\n+}\n+\n+int main(int argc, char **argv)\n+{\n+  value = 123;\t\t\t\t\t/* count(1) */\n+\n+  for (unsigned i = 0; i < 100; i++)\n+    value += argc;\t\t\t\t/* count(100) */\n+\n+  __gcov_dump();\n+\n+  for (unsigned i = 0; i < 1000; i++)\t\t/* count(#####) */\n+    value += argc;\n+\n+  __gcov_reset ();\n+\n+  for (unsigned i = 0; i < 10000; i++)\t\t/* count(10001) */\n+    value += argc;\n+\n+  return 0;\t\t\t\t\t/* count(1) */\n+}\n+\n+/* { dg-final { run-gcov gcov-dump-2.C } } */"}]}