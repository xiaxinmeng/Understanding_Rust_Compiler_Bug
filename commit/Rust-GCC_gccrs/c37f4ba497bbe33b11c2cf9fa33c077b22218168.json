{"sha": "c37f4ba497bbe33b11c2cf9fa33c077b22218168", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6YzM3ZjRiYTQ5N2JiZTMzYjExYzJjZjlmYTMzYzA3N2IyMjIxODE2OA==", "commit": {"author": {"name": "Jan Hubicka", "email": "jh@suse.cz", "date": "2008-07-26T10:03:01Z"}, "committer": {"name": "Jan Hubicka", "email": "hubicka@gcc.gnu.org", "date": "2008-07-26T10:03:01Z"}, "message": "cgraph.c (cgraph_function_possibly_inlined_p): Do not rely on DECL_INLINE.\n\n\t* cgraph.c (cgraph_function_possibly_inlined_p): Do not rely on DECL_INLINE.\n\t* cgraphunit.c (record_cdtor_fn): Do not initialize DECL_INLINE\n\t(cgraph_preserve_function_body_p): Do not rely on DECL_INLINE.\n\t* dojump.c (clear_pending_stack_adjust): Likewise.\n\t* print-tree.c (print_node): Ignore DECL_INLINE.\n\t* tree-inline.c (inlinable_function_p): Likewise.\n\nFrom-SVN: r138165", "tree": {"sha": "80406a736a1a96412c44a033898bd544e1802903", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/80406a736a1a96412c44a033898bd544e1802903"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/c37f4ba497bbe33b11c2cf9fa33c077b22218168", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c37f4ba497bbe33b11c2cf9fa33c077b22218168", "html_url": "https://github.com/Rust-GCC/gccrs/commit/c37f4ba497bbe33b11c2cf9fa33c077b22218168", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/c37f4ba497bbe33b11c2cf9fa33c077b22218168/comments", "author": null, "committer": null, "parents": [{"sha": "18509edc7fe522caa0a55e49f8780074cdb431e7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/18509edc7fe522caa0a55e49f8780074cdb431e7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/18509edc7fe522caa0a55e49f8780074cdb431e7"}], "stats": {"total": 26, "additions": 15, "deletions": 11}, "files": [{"sha": "a461d7b1c3c6415156daf8fda2cb155ebea2360f", "filename": "gcc/ChangeLog", "status": "modified", "additions": 9, "deletions": 0, "changes": 9, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=c37f4ba497bbe33b11c2cf9fa33c077b22218168", "patch": "@@ -1,3 +1,12 @@\n+2008-07-25  Jan Hubicka  <jh@suse.cz>\n+\n+\t* cgraph.c (cgraph_function_possibly_inlined_p): Do not rely on DECL_INLINE.\n+\t* cgraphunit.c (record_cdtor_fn): Do not initialize DECL_INLINE\n+\t(cgraph_preserve_function_body_p): Do not rely on DECL_INLINE.\n+\t* dojump.c (clear_pending_stack_adjust): Likewise.\n+\t* print-tree.c (print_node): Ignore DECL_INLINE.\n+\t* tree-inline.c (inlinable_function_p): Likewise.\n+\t\n 2008-07-25  Michael Meissner  <gnu@the-meissners.org>\n \n \t* doc/extend.texi (hot attribute): Document that the hot attribute"}, {"sha": "b88ab68f05601d26e28de5cb1e6a8cf09b684fbe", "filename": "gcc/cgraph.c", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fcgraph.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fcgraph.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraph.c?ref=c37f4ba497bbe33b11c2cf9fa33c077b22218168", "patch": "@@ -1140,7 +1140,7 @@ bool\n cgraph_function_possibly_inlined_p (tree decl)\n {\n   if (!cgraph_global_info_ready)\n-    return (DECL_INLINE (decl) && !flag_really_no_inline);\n+    return !DECL_UNINLINABLE (decl) && !flag_really_no_inline;\n   return DECL_POSSIBLY_INLINED (decl);\n }\n "}, {"sha": "9f4f87c2451b76d68a075f90940099dd523523b4", "filename": "gcc/cgraphunit.c", "status": "modified", "additions": 2, "deletions": 5, "changes": 7, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fcgraphunit.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fcgraphunit.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fcgraphunit.c?ref=c37f4ba497bbe33b11c2cf9fa33c077b22218168", "patch": "@@ -172,7 +172,6 @@ record_cdtor_fn (tree fndecl)\n       VEC_safe_push (tree, gc, static_dtors, fndecl);\n       DECL_STATIC_DESTRUCTOR (fndecl) = 0;\n     }\n-  DECL_INLINE (fndecl) = 1;\n   node = cgraph_node (fndecl);\n   node->local.disregard_inline_limits = 1;\n   cgraph_mark_reachable_node (node);\n@@ -1211,10 +1210,8 @@ bool\n cgraph_preserve_function_body_p (tree decl)\n {\n   struct cgraph_node *node;\n-  if (!cgraph_global_info_ready)\n-    return (flag_really_no_inline\n-\t    ? DECL_DISREGARD_INLINE_LIMITS (decl)\n-\t    : DECL_INLINE (decl));\n+\n+  gcc_assert (cgraph_global_info_ready);\n   /* Look if there is any clone around.  */\n   for (node = cgraph_node (decl); node; node = node->next_clone)\n     if (node->global.inlined_to)"}, {"sha": "fb8d139b11168c34853dd2f1d932a07c200892b1", "filename": "gcc/dojump.c", "status": "modified", "additions": 1, "deletions": 2, "changes": 3, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fdojump.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fdojump.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fdojump.c?ref=c37f4ba497bbe33b11c2cf9fa33c077b22218168", "patch": "@@ -71,8 +71,7 @@ clear_pending_stack_adjust (void)\n {\n   if (optimize > 0\n       && (! flag_omit_frame_pointer || cfun->calls_alloca)\n-      && EXIT_IGNORE_STACK\n-      && ! (DECL_INLINE (current_function_decl) && ! flag_no_inline))\n+      && EXIT_IGNORE_STACK)\n     discard_pending_stack_adjust ();\n }\n "}, {"sha": "ed31861624a7f1f816935e1f15bd0a6f515f89c0", "filename": "gcc/print-tree.c", "status": "modified", "additions": 2, "deletions": 2, "changes": 4, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fprint-tree.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Fprint-tree.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fprint-tree.c?ref=c37f4ba497bbe33b11c2cf9fa33c077b22218168", "patch": "@@ -375,8 +375,8 @@ print_node (FILE *file, const char *prefix, tree node, int indent)\n       if (TREE_CODE (node) == FUNCTION_DECL\n \t  && DECL_FUNCTION_SPECIFIC_OPTIMIZATION (node))\n \tfputs (\" function-specific-opt\", file);\n-      if (TREE_CODE (node) == FUNCTION_DECL && DECL_INLINE (node))\n-\tfputs (DECL_DECLARED_INLINE_P (node) ? \" inline\" : \" autoinline\", file);\n+      if (TREE_CODE (node) == FUNCTION_DECL && DECL_DECLARED_INLINE_P (node))\n+\tfputs (\" autoinline\", file);\n       if (TREE_CODE (node) == FUNCTION_DECL && DECL_BUILT_IN (node))\n \tfputs (\" built-in\", file);\n       if (TREE_CODE (node) == FUNCTION_DECL && DECL_NO_STATIC_CHAIN (node))"}, {"sha": "103f504c2d9e5fb92d4c56a53209d30297a42e79", "filename": "gcc/tree-inline.c", "status": "modified", "additions": 0, "deletions": 1, "changes": 1, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Ftree-inline.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/c37f4ba497bbe33b11c2cf9fa33c077b22218168/gcc%2Ftree-inline.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftree-inline.c?ref=c37f4ba497bbe33b11c2cf9fa33c077b22218168", "patch": "@@ -2058,7 +2058,6 @@ inlinable_function_p (tree fn)\n \n   /* We only warn for functions declared `inline' by the user.  */\n   do_warning = (warn_inline\n-\t\t&& DECL_INLINE (fn)\n \t\t&& DECL_DECLARED_INLINE_P (fn)\n \t\t&& !DECL_IN_SYSTEM_HEADER (fn));\n "}]}