{"sha": "729a7089845f57ffa7067612f8d5b059149eeae6", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6NzI5YTcwODk4NDVmNTdmZmE3MDY3NjEyZjhkNWIwNTkxNDllZWFlNg==", "commit": {"author": {"name": "Richard Henderson", "email": "rth@cygnus.com", "date": "2000-04-08T22:38:38Z"}, "committer": {"name": "Richard Henderson", "email": "rth@gcc.gnu.org", "date": "2000-04-08T22:38:38Z"}, "message": "flow.c (mark_used_reg): Use reg_set_p to determine if a register was modified in the current insn.\n\n        * flow.c (mark_used_reg): Use reg_set_p to determine if a register\n        was modified in the current insn.\n\nFrom-SVN: r33030", "tree": {"sha": "1dc05b7313adaea608af4537317eb2bb4ccbba58", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/1dc05b7313adaea608af4537317eb2bb4ccbba58"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/729a7089845f57ffa7067612f8d5b059149eeae6", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/729a7089845f57ffa7067612f8d5b059149eeae6", "html_url": "https://github.com/Rust-GCC/gccrs/commit/729a7089845f57ffa7067612f8d5b059149eeae6", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/729a7089845f57ffa7067612f8d5b059149eeae6/comments", "author": null, "committer": null, "parents": [{"sha": "83ffeecd1d9356db6935136e4e9a20ab714afb11", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/83ffeecd1d9356db6935136e4e9a20ab714afb11", "html_url": "https://github.com/Rust-GCC/gccrs/commit/83ffeecd1d9356db6935136e4e9a20ab714afb11"}], "stats": {"total": 13, "additions": 12, "deletions": 1}, "files": [{"sha": "97c0cfa819fa49d7c8e08a2bf7d8604b5b73aa9c", "filename": "gcc/ChangeLog", "status": "modified", "additions": 5, "deletions": 0, "changes": 5, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/729a7089845f57ffa7067612f8d5b059149eeae6/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/729a7089845f57ffa7067612f8d5b059149eeae6/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=729a7089845f57ffa7067612f8d5b059149eeae6", "patch": "@@ -1,3 +1,8 @@\n+2000-04-08  Richard Henderson  <rth@cygnus.com>\n+\n+\t* flow.c (mark_used_reg): Use reg_set_p to determine if a register\n+\twas modified in the current insn.\n+\n 2000-04-08  Richard Earnshaw (rearnsha@arm.com)\n \n \t* arm/thumb.md: Delete."}, {"sha": "e900617c9b2cf3d7f27620c6349b2ff57f257b70", "filename": "gcc/flow.c", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/729a7089845f57ffa7067612f8d5b059149eeae6/gcc%2Fflow.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/729a7089845f57ffa7067612f8d5b059149eeae6/gcc%2Fflow.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fflow.c?ref=729a7089845f57ffa7067612f8d5b059149eeae6", "patch": "@@ -4520,11 +4520,17 @@ mark_used_reg (pbi, new_live, reg, cond, insn)\n \n   /* Record and count the insns in which a reg dies.  If it is used in\n      this insn and was dead below the insn then it dies in this insn.\n+\n      If it was set in this insn, we do not make a REG_DEAD note;\n-     likewise if we already made such a note.  */\n+     likewise if we already made such a note.  Recall that dead_or_set_p\n+     checks for complete overlap, and thus is not suitable for the first\n+     case.  But it does handle the existing note case.  Also recall that\n+     reg_set_p, when presented with the complete insn, will try to infer\n+     things about a call_insn that we do not wish.  */\n \n   if ((pbi->flags & PROP_DEATH_NOTES)\n       && some_was_dead\n+      && ! reg_set_p (reg, PATTERN (insn))\n       && ! dead_or_set_p (insn, reg))\n     {\n       int n;"}]}