{"sha": "9e0b0ec3aa447a33c45f9916116b9b597ce7061c", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OWUwYjBlYzNhYTQ0N2EzM2M0NWY5OTE2MTE2YjliNTk3Y2U3MDYxYw==", "commit": {"author": {"name": "Michael Ploujnikov", "email": "michael.ploujnikov@oracle.com", "date": "2018-12-04T14:22:09Z"}, "committer": {"name": "Michael Ploujnikov", "email": "plouj@gcc.gnu.org", "date": "2018-12-04T14:22:09Z"}, "message": "re PR lto/88297 (Assembler Error: symbol `_Z41__static_initialization_and_destruction_0ii.constprop.0' is already defined)\n\n\tPR ipa/88297\n\t* ipa-cp.c (create_specialized_node): Track clone counters by\n\tnode assembler names.\n\t(ipcp_driver): Change type of clone_num_suffixes key to const\n\tchar*.\n\nFrom-SVN: r266780", "tree": {"sha": "78997324642dba4c59d796514ddb4ad3009e31d1", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/78997324642dba4c59d796514ddb4ad3009e31d1"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/9e0b0ec3aa447a33c45f9916116b9b597ce7061c", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e0b0ec3aa447a33c45f9916116b9b597ce7061c", "html_url": "https://github.com/Rust-GCC/gccrs/commit/9e0b0ec3aa447a33c45f9916116b9b597ce7061c", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/9e0b0ec3aa447a33c45f9916116b9b597ce7061c/comments", "author": {"login": "plouj-oracle", "id": 7086511, "node_id": "MDQ6VXNlcjcwODY1MTE=", "avatar_url": "https://avatars.githubusercontent.com/u/7086511?v=4", "gravatar_id": "", "url": "https://api.github.com/users/plouj-oracle", "html_url": "https://github.com/plouj-oracle", "followers_url": "https://api.github.com/users/plouj-oracle/followers", "following_url": "https://api.github.com/users/plouj-oracle/following{/other_user}", "gists_url": "https://api.github.com/users/plouj-oracle/gists{/gist_id}", "starred_url": "https://api.github.com/users/plouj-oracle/starred{/owner}{/repo}", "subscriptions_url": "https://api.github.com/users/plouj-oracle/subscriptions", "organizations_url": "https://api.github.com/users/plouj-oracle/orgs", "repos_url": "https://api.github.com/users/plouj-oracle/repos", "events_url": "https://api.github.com/users/plouj-oracle/events{/privacy}", "received_events_url": "https://api.github.com/users/plouj-oracle/received_events", "type": "User", "site_admin": false}, "committer": null, "parents": [{"sha": "0232f69fa23bfe5d51535ef20730200430cb567f", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/0232f69fa23bfe5d51535ef20730200430cb567f", "html_url": "https://github.com/Rust-GCC/gccrs/commit/0232f69fa23bfe5d51535ef20730200430cb567f"}], "stats": {"total": 18, "additions": 14, "deletions": 4}, "files": [{"sha": "ea8680a13804e0e9ccd3fa000d7f596d1c613766", "filename": "gcc/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e0b0ec3aa447a33c45f9916116b9b597ce7061c/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e0b0ec3aa447a33c45f9916116b9b597ce7061c/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=9e0b0ec3aa447a33c45f9916116b9b597ce7061c", "patch": "@@ -1,3 +1,11 @@\n+2018-12-04  Michael Ploujnikov  <michael.ploujnikov@oracle.com>\n+\n+\tPR ipa/88297\n+\t* ipa-cp.c (create_specialized_node): Track clone counters by\n+\tnode assembler names.\n+\t(ipcp_driver): Change type of clone_num_suffixes key to const\n+\tchar*.\n+\n 2018-12-04  Richard Biener  <rguenther@suse.de>\n \n \t* tree-vect-loop.c (vect_transform_loop): Fix epilogue iterations"}, {"sha": "c7c462ab816352bd61e584e3da4008d3befadf43", "filename": "gcc/ipa-cp.c", "status": "modified", "additions": 6, "deletions": 4, "changes": 10, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/9e0b0ec3aa447a33c45f9916116b9b597ce7061c/gcc%2Fipa-cp.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/9e0b0ec3aa447a33c45f9916116b9b597ce7061c/gcc%2Fipa-cp.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fipa-cp.c?ref=9e0b0ec3aa447a33c45f9916116b9b597ce7061c", "patch": "@@ -376,8 +376,8 @@ static profile_count max_count;\n \n static long overall_size, max_new_size;\n \n-/* Node to unique clone suffix number map.  */\n-static hash_map<cgraph_node *, unsigned> *clone_num_suffixes;\n+/* Node name to unique clone suffix number map.  */\n+static hash_map<const char *, unsigned> *clone_num_suffixes;\n \n /* Return the param lattices structure corresponding to the Ith formal\n    parameter of the function described by INFO.  */\n@@ -3832,7 +3832,9 @@ create_specialized_node (struct cgraph_node *node,\n \t}\n     }\n \n-  unsigned &suffix_counter = clone_num_suffixes->get_or_insert (node);\n+  unsigned &suffix_counter = clone_num_suffixes->get_or_insert (\n+\t\t\t       IDENTIFIER_POINTER (DECL_ASSEMBLER_NAME (\n+\t\t\t\t node->decl)));\n   new_node = node->create_virtual_clone (callers, replace_trees,\n \t\t\t\t\t args_to_skip, \"constprop\",\n \t\t\t\t\t suffix_counter);\n@@ -5050,7 +5052,7 @@ ipcp_driver (void)\n \n   ipa_check_create_node_params ();\n   ipa_check_create_edge_args ();\n-  clone_num_suffixes = new hash_map<cgraph_node *, unsigned>;\n+  clone_num_suffixes = new hash_map<const char *, unsigned>;\n \n   if (dump_file)\n     {"}]}