{"sha": "8be04b48a4b31ede3691a70daba6dbc03dc428c2", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJlMDRiNDhhNGIzMWVkZTM2OTFhNzBkYWJhNmRiYzAzZGM0MjhjMg==", "commit": {"author": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-05-23T23:55:59Z"}, "committer": {"name": "Ian Lance Taylor", "email": "ian@gcc.gnu.org", "date": "2017-05-23T23:55:59Z"}, "message": "compiler: detect failure to set init priority for package\n    \n    This would have caught the problem fixed by https://golang.org/cl/43610.\n    \n    Reviewed-on: https://go-review.googlesource.com/43999\n\nFrom-SVN: r248394", "tree": {"sha": "a251a08e36e2b219fef77b7a3d6c0e2b96c57364", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/a251a08e36e2b219fef77b7a3d6c0e2b96c57364"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8be04b48a4b31ede3691a70daba6dbc03dc428c2", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8be04b48a4b31ede3691a70daba6dbc03dc428c2", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8be04b48a4b31ede3691a70daba6dbc03dc428c2", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8be04b48a4b31ede3691a70daba6dbc03dc428c2/comments", "author": null, "committer": null, "parents": [{"sha": "4b3e2314759ccd32e04f35090df50af1a2c4697a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4b3e2314759ccd32e04f35090df50af1a2c4697a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4b3e2314759ccd32e04f35090df50af1a2c4697a"}], "stats": {"total": 10, "additions": 8, "deletions": 2}, "files": [{"sha": "17239fd1e5ccc2440be5e261be4689a58ee48182", "filename": "gcc/go/gofrontend/MERGE", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8be04b48a4b31ede3691a70daba6dbc03dc428c2/gcc%2Fgo%2Fgofrontend%2FMERGE", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8be04b48a4b31ede3691a70daba6dbc03dc428c2/gcc%2Fgo%2Fgofrontend%2FMERGE", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2FMERGE?ref=8be04b48a4b31ede3691a70daba6dbc03dc428c2", "patch": "@@ -1,4 +1,4 @@\n-369e1efe19adfc5393d2235992327f39360e0554\n+ec49c69df1df4d62f3751fcd7e930d6508d67bf2\n \n The first line of this file holds the git revision number of the last\n merge done from the gofrontend repository."}, {"sha": "26f6441d5b16078d9fcaca1697b46e6bb2f8dfed", "filename": "gcc/go/gofrontend/gogo.cc", "status": "modified", "additions": 7, "deletions": 1, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8be04b48a4b31ede3691a70daba6dbc03dc428c2/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8be04b48a4b31ede3691a70daba6dbc03dc428c2/gcc%2Fgo%2Fgofrontend%2Fgogo.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fgo%2Fgofrontend%2Fgogo.cc?ref=8be04b48a4b31ede3691a70daba6dbc03dc428c2", "patch": "@@ -689,7 +689,13 @@ Gogo::init_imports(std::vector<Bstatement*>& init_stmts, Bfunction *bfunction)\n \t this->imported_init_fns_.begin();\n        p != this->imported_init_fns_.end();\n        ++p)\n-    v.push_back(*p);\n+    {\n+      if ((*p)->priority() < 0)\n+\tgo_error_at(Linemap::unknown_location(),\n+\t\t    \"internal error: failed to set init priority for %s\",\n+\t\t    (*p)->package_name().c_str());\n+      v.push_back(*p);\n+    }\n   std::sort(v.begin(), v.end(), priority_compare);\n \n   // We build calls to the init functions, which take no arguments."}]}