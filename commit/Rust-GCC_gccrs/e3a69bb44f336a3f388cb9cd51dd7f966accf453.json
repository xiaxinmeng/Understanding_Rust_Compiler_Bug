{"sha": "e3a69bb44f336a3f388cb9cd51dd7f966accf453", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6ZTNhNjliYjQ0ZjMzNmEzZjM4OGNiOWNkNTFkZDdmOTY2YWNjZjQ1Mw==", "commit": {"author": {"name": "Michael Meissner", "email": "meissner@linux.vnet.ibm.com", "date": "2011-02-15T18:42:59Z"}, "committer": {"name": "Michael Meissner", "email": "meissner@gcc.gnu.org", "date": "2011-02-15T18:42:59Z"}, "message": "Fix PR 47755\n\nFrom-SVN: r170189", "tree": {"sha": "ceeafe510f70d4facde86866e9c2cd0127751862", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/ceeafe510f70d4facde86866e9c2cd0127751862"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/e3a69bb44f336a3f388cb9cd51dd7f966accf453", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3a69bb44f336a3f388cb9cd51dd7f966accf453", "html_url": "https://github.com/Rust-GCC/gccrs/commit/e3a69bb44f336a3f388cb9cd51dd7f966accf453", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/e3a69bb44f336a3f388cb9cd51dd7f966accf453/comments", "author": null, "committer": null, "parents": [{"sha": "de650422167b7a651474426acb164bd52f2e53d7", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/de650422167b7a651474426acb164bd52f2e53d7", "html_url": "https://github.com/Rust-GCC/gccrs/commit/de650422167b7a651474426acb164bd52f2e53d7"}], "stats": {"total": 36, "additions": 31, "deletions": 5}, "files": [{"sha": "599b09c7984fc04ae779cd018028437099ea8626", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=e3a69bb44f336a3f388cb9cd51dd7f966accf453", "patch": "@@ -1,3 +1,9 @@\n+2011-02-15  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/47755\n+\t* config/rs6000/predicates.md (easy_vector_constant): Allow V2DI\n+\tmode for vector constants.  Remove code that checks for TImode.\n+\n 2011-02-15  Alexandre Oliva  <aoliva@redhat.com>\n \n \tPR debug/47106"}, {"sha": "1d06caeaef50888fc46d3318fc32cb4238d34d9e", "filename": "gcc/config/rs6000/predicates.md", "status": "modified", "additions": 3, "deletions": 5, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2Fconfig%2Frs6000%2Fpredicates.md", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2Fconfig%2Frs6000%2Fpredicates.md", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfig%2Frs6000%2Fpredicates.md?ref=e3a69bb44f336a3f388cb9cd51dd7f966accf453", "patch": "@@ -328,13 +328,11 @@\n   if (TARGET_PAIRED_FLOAT)\n     return false;\n \n-  if ((VSX_VECTOR_MODE (mode) || mode == TImode) && zero_constant (op, mode))\n-    return true;\n-\n-  if (ALTIVEC_VECTOR_MODE (mode))\n+  if (VECTOR_MEM_ALTIVEC_OR_VSX_P (mode))\n     {\n       if (zero_constant (op, mode))\n-        return true;\n+\treturn true;\n+\n       return easy_altivec_constant (op, mode);\n     }\n "}, {"sha": "64bd46ad49bd1933202f347192c09d483432b654", "filename": "gcc/testsuite/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2Ftestsuite%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2Ftestsuite%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2FChangeLog?ref=e3a69bb44f336a3f388cb9cd51dd7f966accf453", "patch": "@@ -1,3 +1,9 @@\n+2011-02-15  Michael Meissner  <meissner@linux.vnet.ibm.com>\n+\n+\tPR target/47755\n+\t* gcc.target/powerpc/pr47755.c: New file, test all 0 vector\n+\tconstant does not generate a load from memory.\n+\n 2011-02-15  H.J. Lu  <hongjiu.lu@intel.com>\n \n \tPR middle-end/47725"}, {"sha": "6dbd1fe02f3a6b9947913f240d14c8c6c8684712", "filename": "gcc/testsuite/gcc.target/powerpc/pr47755.c", "status": "added", "additions": 16, "deletions": 0, "changes": 16, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr47755.c", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/e3a69bb44f336a3f388cb9cd51dd7f966accf453/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr47755.c", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Ftestsuite%2Fgcc.target%2Fpowerpc%2Fpr47755.c?ref=e3a69bb44f336a3f388cb9cd51dd7f966accf453", "patch": "@@ -0,0 +1,16 @@\n+/* { dg-do compile { target { powerpc*-*-* } } } */\n+/* { dg-skip-if \"\" { powerpc*-*-darwin* } { \"*\" } { \"\" } } */\n+/* { dg-require-effective-target powerpc_vsx_ok } */\n+/* { dg-options \"-O3 -mcpu=power7\" } */\n+/* { dg-final { scan-assembler \"xxlxor\" } } */\n+/* { dg-final { scan-assembler-not \"lxvd2x\" } } */\n+/* { dg-final { scan-assembler-not \"lxvw4x\" } } */\n+/* { dg-final { scan-assembler-not \"lvx\" } } */\n+\n+/* PR 47755: Compiler loads vector constant of 0 from TOC instead of using\n+   xxlxor.  */\n+void\n+func (vector long long *p)\n+{\n+  *p = (vector long long) { 0LL, 0LL };\n+}"}]}