{"sha": "cbc679558590aaada586364f6fb99020f777ae35", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6Y2JjNjc5NTU4NTkwYWFhZGE1ODYzNjRmNmZiOTkwMjBmNzc3YWUzNQ==", "commit": {"author": {"name": "Neil Ferguson", "email": "nferguso@eso.org", "date": "2003-12-11T22:29:12Z"}, "committer": {"name": "Paolo Carlini", "email": "paolo@gcc.gnu.org", "date": "2003-12-11T22:29:12Z"}, "message": "basic_string.tcc (reserve): Allow shrink-to-fit.\n\n2003-12-11  Neil Ferguson  <nferguso@eso.org>\n\t    Paolo Carlini  <pcarlini@suse.de>\n\n\t* include/bits/basic_string.tcc (reserve): Allow shrink-to-fit.\n\t* testsuite/21_strings/basic_string/capacity/1.cc: Tweak.\n\t* testsuite/21_strings/basic_string/capacity/char/1.cc: Ditto.\n\t* testsuite/21_strings/basic_string/capacity/wchar_t/1.cc: Ditto.\n\nCo-Authored-By: Paolo Carlini <pcarlini@suse.de>\n\nFrom-SVN: r74551", "tree": {"sha": "4f97d2273a1601123a8a49fc99408c59a7923ffc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/4f97d2273a1601123a8a49fc99408c59a7923ffc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/cbc679558590aaada586364f6fb99020f777ae35", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbc679558590aaada586364f6fb99020f777ae35", "html_url": "https://github.com/Rust-GCC/gccrs/commit/cbc679558590aaada586364f6fb99020f777ae35", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/cbc679558590aaada586364f6fb99020f777ae35/comments", "author": null, "committer": null, "parents": [{"sha": "fe16ab7e3e9a7ee336de14045e9c324d1c18080a", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/fe16ab7e3e9a7ee336de14045e9c324d1c18080a", "html_url": "https://github.com/Rust-GCC/gccrs/commit/fe16ab7e3e9a7ee336de14045e9c324d1c18080a"}], "stats": {"total": 16, "additions": 12, "deletions": 4}, "files": [{"sha": "45d7c7e55353c177536416b269996c412ee1ef98", "filename": "libstdc++-v3/ChangeLog", "status": "modified", "additions": 8, "deletions": 0, "changes": 8, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2FChangeLog?ref=cbc679558590aaada586364f6fb99020f777ae35", "patch": "@@ -1,3 +1,11 @@\n+2003-12-11  Neil Ferguson  <nferguso@eso.org>\n+            Paolo Carlini  <pcarlini@suse.de>\n+\n+\t* include/bits/basic_string.tcc (reserve): Allow shrink-to-fit.\n+\t* testsuite/21_strings/basic_string/capacity/1.cc: Tweak.\n+\t* testsuite/21_strings/basic_string/capacity/char/1.cc: Ditto.\n+\t* testsuite/21_strings/basic_string/capacity/wchar_t/1.cc: Ditto.\n+\n 2003-12-10  Benjamin Kosnik  <bkoz@redhat.com>\n \n \tPR libstdc++/6243"}, {"sha": "3a1e8468eb030f33e09da13c2380de7b072d2333", "filename": "libstdc++-v3/include/bits/basic_string.tcc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Finclude%2Fbits%2Fbasic_string.tcc?ref=cbc679558590aaada586364f6fb99020f777ae35", "patch": "@@ -474,7 +474,7 @@ namespace std\n     void\n     basic_string<_CharT, _Traits, _Alloc>::reserve(size_type __res)\n     {\n-      if (__res > this->capacity() || _M_rep()->_M_is_shared())\n+      if (__res != this->capacity() || _M_rep()->_M_is_shared())\n         {\n \t  if (__res > this->max_size())\n \t    __throw_length_error(\"basic_string::reserve\");"}, {"sha": "2599d4298ffbf5d8dda73b96f40293c58c3464d1", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/capacity/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2F1.cc?ref=cbc679558590aaada586364f6fb99020f777ae35", "patch": "@@ -140,7 +140,7 @@ void test01()\n   VERIFY( sz04 >= 100 );\n   str02.reserve();\n   sz03 = str02.capacity();\n-  VERIFY( sz03 > 0 );\n+  VERIFY( sz03 >= 0 );\n \n   sz03 = str02.size() + 5;\n   str02.resize(sz03);"}, {"sha": "9cdc4f0457cf63408ced184a8ad757ee11a2bd46", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/capacity/char/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2Fchar%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2Fchar%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2Fchar%2F1.cc?ref=cbc679558590aaada586364f6fb99020f777ae35", "patch": "@@ -37,7 +37,7 @@ void test01()\n   VERIFY( sz02 >= 100 );\n   str01.reserve();\n   sz01 = str01.capacity();\n-  VERIFY( sz01 > 0 );\n+  VERIFY( sz01 >= 0 );\n \n   sz01 = str01.size() + 5;\n   str01.resize(sz01);"}, {"sha": "925d812c7481fd847cf63171fff2acb405a4a87d", "filename": "libstdc++-v3/testsuite/21_strings/basic_string/capacity/wchar_t/1.cc", "status": "modified", "additions": 1, "deletions": 1, "changes": 2, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2Fwchar_t%2F1.cc", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/cbc679558590aaada586364f6fb99020f777ae35/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2Fwchar_t%2F1.cc", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/libstdc%2B%2B-v3%2Ftestsuite%2F21_strings%2Fbasic_string%2Fcapacity%2Fwchar_t%2F1.cc?ref=cbc679558590aaada586364f6fb99020f777ae35", "patch": "@@ -37,7 +37,7 @@ void test01()\n   VERIFY( sz02 >= 100 );\n   str01.reserve();\n   sz01 = str01.capacity();\n-  VERIFY( sz01 > 0 );\n+  VERIFY( sz01 >= 0 );\n \n   sz01 = str01.size() + 5;\n   str01.resize(sz01);"}]}