{"sha": "8bb915b65498bcfd9769ba28438140e4006b9d3e", "node_id": "MDY6Q29tbWl0MTM2NTMxMDA6OGJiOTE1YjY1NDk4YmNmZDk3NjliYTI4NDM4MTQwZTQwMDZiOWQzZQ==", "commit": {"author": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-02-29T22:50:19Z"}, "committer": {"name": "Nathanael Nerode", "email": "neroden@gcc.gnu.org", "date": "2004-02-29T22:50:19Z"}, "message": "configure.ac: Rearrange some threading code for clarity; add section comment.\n\n\t* configure.ac: Rearrange some threading code for clarity;\n\tadd section comment.\n\t* configure: Regenerate.\n\nFrom-SVN: r78678", "tree": {"sha": "e8f6ed8ce3d0e215220cb39569e130254b08a0dc", "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/trees/e8f6ed8ce3d0e215220cb39569e130254b08a0dc"}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/git/commits/8bb915b65498bcfd9769ba28438140e4006b9d3e", "comment_count": 0, "verification": {"verified": false, "reason": "unsigned", "signature": null, "payload": null}}, "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb915b65498bcfd9769ba28438140e4006b9d3e", "html_url": "https://github.com/Rust-GCC/gccrs/commit/8bb915b65498bcfd9769ba28438140e4006b9d3e", "comments_url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/8bb915b65498bcfd9769ba28438140e4006b9d3e/comments", "author": null, "committer": null, "parents": [{"sha": "4ee31f1e477ffd0354f1322970d6c09ae580f665", "url": "https://api.github.com/repos/Rust-GCC/gccrs/commits/4ee31f1e477ffd0354f1322970d6c09ae580f665", "html_url": "https://github.com/Rust-GCC/gccrs/commit/4ee31f1e477ffd0354f1322970d6c09ae580f665"}], "stats": {"total": 107, "additions": 72, "deletions": 35}, "files": [{"sha": "833450837a37901f09666a207928ce710390c814", "filename": "gcc/ChangeLog", "status": "modified", "additions": 6, "deletions": 0, "changes": 6, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb915b65498bcfd9769ba28438140e4006b9d3e/gcc%2FChangeLog", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb915b65498bcfd9769ba28438140e4006b9d3e/gcc%2FChangeLog", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2FChangeLog?ref=8bb915b65498bcfd9769ba28438140e4006b9d3e", "patch": "@@ -1,3 +1,9 @@\n+2004-02-29  Nathanael Nerode  <neroden@gcc.gnu.org>\n+\n+\t* configure.ac: Rearrange some threading code for clarity;\n+\tadd section comment.\n+\t* configure: Regenerate.\n+\n 2004-02-29  Kazu Hirata  <kazu@cs.umass.edu>\n \n \t* passes.c, config/frv/frv.c, config/sh/sh.c: Fix comment"}, {"sha": "6d0f01b871d2032b24846aad677d3fda29fb31b3", "filename": "gcc/configure", "status": "modified", "additions": 49, "deletions": 26, "changes": 75, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb915b65498bcfd9769ba28438140e4006b9d3e/gcc%2Fconfigure", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb915b65498bcfd9769ba28438140e4006b9d3e/gcc%2Fconfigure", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure?ref=8bb915b65498bcfd9769ba28438140e4006b9d3e", "patch": "@@ -308,7 +308,7 @@ ac_includes_default=\"\\\n # include <unistd.h>\n #endif\"\n \n-ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP GNATBIND ac_ct_GNATBIND strict1_warn warn_cflags WERROR nocommon_flag EGREP valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN LN_S RANLIB ac_ct_RANLIB INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext extra_modes_file FORBUILD PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc BUILD_PREFIX BUILD_PREFIX_1 CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO libgcc_visibility gthread_flags GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines target_noncanonical c_target_objs cxx_target_objs target_cpu_default LIBOBJS LTLIBOBJS'\n+ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS build build_cpu build_vendor build_os host host_cpu host_vendor host_os target target_cpu target_vendor target_os build_subdir host_subdir target_subdir GENINSRC CC CFLAGS LDFLAGS CPPFLAGS ac_ct_CC EXEEXT OBJEXT NO_MINUS_C_MINUS_O OUTPUT_OPTION CPP GNATBIND ac_ct_GNATBIND strict1_warn warn_cflags WERROR nocommon_flag EGREP valgrind_path valgrind_path_defines valgrind_command coverage_flags enable_multilib enable_shared TARGET_SYSTEM_ROOT TARGET_SYSTEM_ROOT_DEFINE CROSS_SYSTEM_HEADER_DIR onestep SET_MAKE AWK LN LN_S RANLIB ac_ct_RANLIB INSTALL INSTALL_PROGRAM INSTALL_DATA make_compare_target have_mktemp_command MAKEINFO BUILD_INFO GENERATED_MANPAGES FLEX BISON stage1_cflags COLLECT2_LIBS GNAT_LIBEXC LDEXP_LIB TARGET_GETGROUPS_T LIBICONV LIBICONV_DEP manext objext gthread_flags extra_modes_file FORBUILD PACKAGE VERSION USE_NLS LIBINTL LIBINTL_DEP INCINTL XGETTEXT GMSGFMT POSUB CATALOGS CROSS ALL SYSTEM_HEADER_DIR inhibit_libc BUILD_PREFIX BUILD_PREFIX_1 CC_FOR_BUILD BUILD_CFLAGS STMP_FIXINC STMP_FIXPROTO libgcc_visibility GGC zlibdir zlibinc MAINT gcc_tooldir dollar slibdir objdir subdirs srcdir all_boot_languages all_compilers all_gtfiles all_gtfiles_files_langs all_gtfiles_files_files all_lang_makefrags all_lang_makefiles all_languages all_stagestuff build_exeext build_install_headers_dir build_xm_file_list build_xm_include_list build_xm_defines check_languages cc_set_by_configure quoted_cc_set_by_configure cpp_install_dir xmake_file tmake_file extra_gcc_objs extra_headers_list extra_objs extra_parts extra_passes extra_programs float_h_file gcc_config_arguments gcc_gxx_include_dir libstdcxx_incdir gcc_version gcc_version_full gcc_version_trigger host_exeext host_xm_file_list host_xm_include_list host_xm_defines out_host_hook_obj install lang_opt_files lang_specs_files lang_tree_files local_prefix md_file objc_boehm_gc out_file out_object_file stage_prefix_set_by_configure quoted_stage_prefix_set_by_configure symbolic_link thread_file tm_file_list tm_include_list tm_defines tm_p_file_list tm_p_include_list xm_file_list xm_include_list xm_defines target_noncanonical c_target_objs cxx_target_objs target_cpu_default LIBOBJS LTLIBOBJS'\n ac_subst_files='language_hooks'\n \n # Initialize some variables set by options.\n@@ -981,7 +981,7 @@ ac_abs_top_srcdir=`cd \"$ac_dir\" && cd $ac_top_srcdir && pwd`\n     else\n       echo \"$as_me: WARNING: no configuration information is in $ac_dir\" >&2\n     fi\n-    cd $ac_popdir\n+    cd \"$ac_popdir\"\n   done\n fi\n \n@@ -1178,7 +1178,7 @@ _ASBOX\n       echo \"$as_me: caught signal $ac_signal\"\n     echo \"$as_me: exit $exit_status\"\n   } >&5\n-  rm -f core core.* *.core &&\n+  rm -f core *.core &&\n   rm -rf conftest* confdefs* conf$$* $ac_clean_files &&\n     exit $exit_status\n      ' 0\n@@ -2517,8 +2517,7 @@ if { (eval echo \"$as_me:$LINENO: \\\"$ac_compile\\\"\") >&5\n   echo \"$as_me:$LINENO: \\$? = $ac_status\" >&5\n   (exit $ac_status); }; }; then\n   for ac_declaration in \\\n-   ''\\\n-   '#include <stdlib.h>' \\\n+   '' \\\n    'extern \"C\" void std::exit (int) throw (); using std::exit;' \\\n    'extern \"C\" void std::exit (int); using std::exit;' \\\n    'extern \"C\" void exit (int) throw ();' \\\n@@ -2532,8 +2531,8 @@ _ACEOF\n cat confdefs.h >>conftest.$ac_ext\n cat >>conftest.$ac_ext <<_ACEOF\n /* end confdefs.h.  */\n-#include <stdlib.h>\n $ac_declaration\n+#include <stdlib.h>\n int\n main ()\n {\n@@ -4008,7 +4007,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n ac_cv_header_stdc=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n fi\n@@ -5006,7 +5005,7 @@ if test \"${gcc_cv_prog_makeinfo_modern+set}\" = set; then\n else\n     ac_prog_version=`$MAKEINFO --version 2>&1 |\n                    sed -n 's/^.*GNU texinfo.* \\([0-9][0-9.]*\\).*$/\\1/p'`\n-  echo \"configure:5009: version of makeinfo is $ac_prog_version\" >&5\n+  echo \"configure:5008: version of makeinfo is $ac_prog_version\" >&5\n   case $ac_prog_version in\n     '')     gcc_cv_prog_makeinfo_modern=no;;\n     4.[2-9]*)\n@@ -5344,7 +5343,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n ac_cv_header_stdc=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n fi\n@@ -5983,7 +5982,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n ac_cv_c_bigendian=yes\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n fi\n@@ -6582,7 +6581,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n gcc_cv_func_mbstowcs_works=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n echo \"$as_me:$LINENO: result: $gcc_cv_func_mbstowcs_works\" >&5\n@@ -6753,7 +6752,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n ac_cv_type_getgroups=int\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n if test $ac_cv_type_getgroups = cross; then\n         cat >conftest.$ac_ext <<_ACEOF\n@@ -6847,7 +6846,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n gcc_cv_func_printf_ptr=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n rm -f core core.* *.core\n fi\n@@ -7260,7 +7259,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n ac_cv_func_fork_works=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n echo \"$as_me:$LINENO: result: $ac_cv_func_fork_works\" >&5\n@@ -7415,7 +7414,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n ac_cv_func_vfork_works=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n echo \"$as_me:$LINENO: result: $ac_cv_func_vfork_works\" >&5\n@@ -8444,7 +8443,7 @@ sed 's/^/| /' conftest.$ac_ext >&5\n ( exit $ac_status )\n gcc_cv_initfini_array=no\n fi\n-rm -f core core.* *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext\n fi\n fi\n echo \"$as_me:$LINENO: result: $gcc_cv_initfini_array\" >&5\n@@ -8746,6 +8745,10 @@ if test \"$host_xm_file\" != \"$build_xm_file\"; then\n \tfi\n fi\n \n+# ---------\n+# Threading\n+# ---------\n+\n # Check if a valid thread package\n case ${enable_threads_flag} in\n   \"\" | no)\n@@ -8772,6 +8775,19 @@ if test x${thread_file} = x; then\n   thread_file=${target_thread_file}\n fi\n \n+# Make gthr-default.h if we have a thread file.\n+gthread_flags=\n+if test $thread_file != single; then\n+  rm -f gthr-default.h\n+  echo \"#include \\\"gthr-${thread_file}.h\\\"\" > gthr-default.h\n+  gthread_flags=-DHAVE_GTHR_DEFAULT\n+fi\n+\n+\n+# --------\n+# UNSORTED\n+# --------\n+\n if test x$enable___cxa_atexit = xyes || \\\n    test x$enable___cxa_atexit = x -a x$default_use_cxa_atexit = xyes; then\n    echo \"$as_me:$LINENO: checking for __cxa_atexit\" >&5\n@@ -9435,6 +9451,10 @@ case $use_collect2 in\n     ;;\n esac\n \n+# ---------------------------\n+# Assembler & linker features\n+# ---------------------------\n+\n # Identify the assembler which will work hand-in-glove with the newly\n # built GCC, so that we can examine its features.  This is the assembler\n # which will be driven by the driver program.\n@@ -11275,6 +11295,10 @@ fi\n echo \"$as_me:$LINENO: result: $gcc_cv_ld_pie\" >&5\n echo \"${ECHO_T}$gcc_cv_ld_pie\" >&6\n \n+# --------\n+# UNSORTED\n+# --------\n+\n if test x$with_sysroot = x && test x$host = x$target \\\n    && test \"$prefix\" != \"/usr\" && test \"x$prefix\" != \"x$local_prefix\" ; then\n \n@@ -11412,15 +11436,6 @@ The following languages were available: c${found_languages}\" >&2;}\n    { (exit 1); exit 1; }; }\n fi\n \n-# Make gthr-default.h if we have a thread file.\n-gthread_flags=\n-if test $thread_file != single; then\n-    rm -f gthr-default.h\n-    echo \"#include \\\"gthr-${thread_file}.h\\\"\" > gthr-default.h\n-    gthread_flags=-DHAVE_GTHR_DEFAULT\n-fi\n-\n-\n # Find out what GC implementation we want, or may, use.\n \n # Check whether --with-gc or --without-gc was given.\n@@ -11476,6 +11491,10 @@ else\n   MAINT='#'\n fi\n \n+# --------------\n+# Language hooks\n+# --------------\n+\n # Make empty files to contain the specs and options for each language.\n # Then add #include lines to for a compiler that has specs and/or options.\n \n@@ -11592,6 +11611,10 @@ do\n \techo \"lang.$t: $x\" >> Make-hooks\n done\n \n+# --------\n+# UNSORTED\n+# --------\n+\n # Create .gdbinit.\n \n echo \"dir .\" > .gdbinit\n@@ -12468,6 +12491,7 @@ s,@LIBICONV@,$LIBICONV,;t t\n s,@LIBICONV_DEP@,$LIBICONV_DEP,;t t\n s,@manext@,$manext,;t t\n s,@objext@,$objext,;t t\n+s,@gthread_flags@,$gthread_flags,;t t\n s,@extra_modes_file@,$extra_modes_file,;t t\n s,@FORBUILD@,$FORBUILD,;t t\n s,@PACKAGE@,$PACKAGE,;t t\n@@ -12491,7 +12515,6 @@ s,@BUILD_CFLAGS@,$BUILD_CFLAGS,;t t\n s,@STMP_FIXINC@,$STMP_FIXINC,;t t\n s,@STMP_FIXPROTO@,$STMP_FIXPROTO,;t t\n s,@libgcc_visibility@,$libgcc_visibility,;t t\n-s,@gthread_flags@,$gthread_flags,;t t\n s,@GGC@,$GGC,;t t\n s,@zlibdir@,$zlibdir,;t t\n s,@zlibinc@,$zlibinc,;t t"}, {"sha": "cee941cc2c323efd34e0f18139a2cbb2eb9c3264", "filename": "gcc/configure.ac", "status": "modified", "additions": 17, "deletions": 9, "changes": 26, "blob_url": "https://github.com/Rust-GCC/gccrs/blob/8bb915b65498bcfd9769ba28438140e4006b9d3e/gcc%2Fconfigure.ac", "raw_url": "https://github.com/Rust-GCC/gccrs/raw/8bb915b65498bcfd9769ba28438140e4006b9d3e/gcc%2Fconfigure.ac", "contents_url": "https://api.github.com/repos/Rust-GCC/gccrs/contents/gcc%2Fconfigure.ac?ref=8bb915b65498bcfd9769ba28438140e4006b9d3e", "patch": "@@ -1118,6 +1118,10 @@ if test \"$host_xm_file\" != \"$build_xm_file\"; then\n \tfi\n fi\n \n+# ---------\n+# Threading\n+# ---------\n+\n # Check if a valid thread package\n case ${enable_threads_flag} in\n   \"\" | no)\n@@ -1144,6 +1148,19 @@ if test x${thread_file} = x; then\n   thread_file=${target_thread_file}\n fi\n \n+# Make gthr-default.h if we have a thread file.\n+gthread_flags=\n+if test $thread_file != single; then\n+  rm -f gthr-default.h\n+  echo \"#include \\\"gthr-${thread_file}.h\\\"\" > gthr-default.h\n+  gthread_flags=-DHAVE_GTHR_DEFAULT\n+fi\n+AC_SUBST(gthread_flags)\n+\n+# --------\n+# UNSORTED\n+# --------\n+\n if test x$enable___cxa_atexit = xyes || \\\n    test x$enable___cxa_atexit = x -a x$default_use_cxa_atexit = xyes; then\n    AC_CHECK_FUNC(__cxa_atexit,\n@@ -2761,15 +2778,6 @@ The following requested languages were not found:${missing_languages}\n The following languages were available: c${found_languages}])\n fi\n \n-# Make gthr-default.h if we have a thread file.\n-gthread_flags=\n-if test $thread_file != single; then\n-    rm -f gthr-default.h\n-    echo \"#include \\\"gthr-${thread_file}.h\\\"\" > gthr-default.h\n-    gthread_flags=-DHAVE_GTHR_DEFAULT\n-fi\n-AC_SUBST(gthread_flags)\n-\n # Find out what GC implementation we want, or may, use.\n AC_ARG_WITH(gc,\n [  --with-gc={page,zone}   choose the garbage collection mechanism to use"}]}